{"items":[{"tags":["java","regex"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1663825135,"post_id":73809673,"comment_id":130330925,"body_markdown":"There are a couple of ways to do it, e.g. you could use expressions that look for `new_actor=(value)` etc. or you could use an expression that looks for the pattern `(property)=(value)` (the `(...)` means a capturing group that you would then need to extract from the match and process further). It also depends on whether the format of those strings will always be the same, i.e. `property=value;property=value;...` and whether values could contain `=` or `;`.","body":"There are a couple of ways to do it, e.g. you could use expressions that look for <code>new_actor=(value)</code> etc. or you could use an expression that looks for the pattern <code>(property)=(value)</code> (the <code>(...)</code> means a capturing group that you would then need to extract from the match and process further). It also depends on whether the format of those strings will always be the same, i.e. <code>property=value;property=value;...</code> and whether values could contain <code>=</code> or <code>;</code>."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1663825181,"post_id":73809673,"comment_id":130330937,"body_markdown":"Note that if the format is as you described above it might be easier to split on `&quot;;&quot;` to get individual entries and then split each entry on `&quot;=&quot;` to get name and value.","body":"Note that if the format is as you described above it might be easier to split on <code>&quot;;&quot;</code> to get individual entries and then split each entry on <code>&quot;=&quot;</code> to get name and value."}],"answers":[{"tags":[],"owner":{"account_id":23904485,"reputation":21,"user_id":17902242,"display_name":"DerLebkuchenmann"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663825388,"creation_date":1663825388,"answer_id":73809821,"question_id":73809673,"body_markdown":"You could use `String.split(String regex)`.\r\nFirst, you use `String.split(&quot;;&quot;)`, which will give you an array `String[] values` with contents looking like `Movie=moviename`, then you use `String.split(&quot;=&quot;)` on each string in the first array\r\n```\r\nfor(String str : values) {\r\nString[] keyValue = str.split(&quot;=&quot;);\r\n}\r\n```\r\nto create subarrays of length 2 with key at position 0 and value at position 1.","title":"Extracting a substring from a given string pattern","body":"<p>You could use <code>String.split(String regex)</code>.\nFirst, you use <code>String.split(&quot;;&quot;)</code>, which will give you an array <code>String[] values</code> with contents looking like <code>Movie=moviename</code>, then you use <code>String.split(&quot;=&quot;)</code> on each string in the first array</p>\n<pre><code>for(String str : values) {\nString[] keyValue = str.split(&quot;=&quot;);\n}\n</code></pre>\n<p>to create subarrays of length 2 with key at position 0 and value at position 1.</p>\n"},{"tags":[],"owner":{"account_id":23391725,"reputation":243,"user_id":17456295,"display_name":"Sawan Meshram"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663825450,"creation_date":1663825450,"answer_id":73809828,"question_id":73809673,"body_markdown":"You can do using `java regex` as follows\r\n\r\n    String str1 = &quot;Movie=HULK/Incredible HULK;old_actor=Edward Norton;new_actor=Mark Ruffalo&quot;;\r\n    String str2 = &quot;Movie=HULK/Incredible HULK;old_movie_release_date=12 December 2008;new_movie_release_date=20 June 2012&quot;;\r\n    \r\n    String pattern1=&quot;Movie=(.*?);old_actor=(.*?);new_actor=(.*?)$&quot;;\r\n    String pattern2=&quot;Movie=(.*?);old_movie_release_date=(.*?);new_movie_release_date=(.*?)$&quot;;\r\n    \r\n    Matcher m1 =  Pattern.compile(pattern1).matcher(str1);\r\n    if (m1.find()) {    \r\n    \tSystem.out.println(&quot;old_actor: &quot; + m1.group(2));\r\n    \tSystem.out.println(&quot;new_actor: &quot; + m1.group(3));\r\n    }  \r\n    \r\n    Matcher m2 = Pattern.compile(pattern2).matcher(str2);\r\n    if (m2.find()) {    \r\n    \tSystem.out.println(&quot;old_movie_release_date: &quot; + m2.group(2));\r\n    \tSystem.out.println(&quot;new_movie_release_date: &quot; + m2.group(3));\r\n    }","title":"Extracting a substring from a given string pattern","body":"<p>You can do using <code>java regex</code> as follows</p>\n<pre><code>String str1 = &quot;Movie=HULK/Incredible HULK;old_actor=Edward Norton;new_actor=Mark Ruffalo&quot;;\nString str2 = &quot;Movie=HULK/Incredible HULK;old_movie_release_date=12 December 2008;new_movie_release_date=20 June 2012&quot;;\n\nString pattern1=&quot;Movie=(.*?);old_actor=(.*?);new_actor=(.*?)$&quot;;\nString pattern2=&quot;Movie=(.*?);old_movie_release_date=(.*?);new_movie_release_date=(.*?)$&quot;;\n\nMatcher m1 =  Pattern.compile(pattern1).matcher(str1);\nif (m1.find()) {    \n    System.out.println(&quot;old_actor: &quot; + m1.group(2));\n    System.out.println(&quot;new_actor: &quot; + m1.group(3));\n}  \n\nMatcher m2 = Pattern.compile(pattern2).matcher(str2);\nif (m2.find()) {    \n    System.out.println(&quot;old_movie_release_date: &quot; + m2.group(2));\n    System.out.println(&quot;new_movie_release_date: &quot; + m2.group(3));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10309761,"reputation":944,"user_id":7605967,"display_name":"Keshavram Kuduwa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663829825,"creation_date":1663829825,"answer_id":73810510,"question_id":73809673,"body_markdown":"Just an enhancement to @DerLebkuchenmann&#39;s solution\r\n```java\r\n  public static void main(String[] args) {\r\n    String str1 = &quot;Movie=HULK/Incredible HULK;old_actor=Edward Norton;new_actor=Mark Ruffalo&quot;;\r\n    String str2 = &quot;Movie=HULK/Incredible HULK;old_movie_release_date=12 December 2008;new_movie_release_date=20 June 2012&quot;;\r\n\r\n    Map&lt;String, String&gt; props1 = getProps(str1);\r\n    Map&lt;String, String&gt; props2 = getProps(str2);\r\n\r\n    System.out.println(String.format(&quot;Old Actor: %s&quot;, props1.get(&quot;old_actor&quot;)));\r\n    System.out.println(String.format(&quot;Old Movie Release Date: %s&quot;, props2.get(&quot;old_movie_release_date&quot;)));\r\n    System.out.println(String.format(&quot;New Movie Release Date: %s&quot;, props2.get(&quot;new_movie_release_date&quot;)));\r\n  }\r\n\r\n  private static Map&lt;String, String&gt; getProps(String str1) {\r\n    return Arrays.stream(str1.split(&quot;;&quot;))\r\n        .map(pair -&gt; pair.split(&quot;=&quot;))\r\n        .collect(Collectors.toMap(crumbs -&gt; crumbs[0], crumbs -&gt; crumbs[1]));\r\n  }\r\n```","title":"Extracting a substring from a given string pattern","body":"<p>Just an enhancement to @DerLebkuchenmann's solution</p>\n<pre class=\"lang-java prettyprint-override\"><code>  public static void main(String[] args) {\n    String str1 = &quot;Movie=HULK/Incredible HULK;old_actor=Edward Norton;new_actor=Mark Ruffalo&quot;;\n    String str2 = &quot;Movie=HULK/Incredible HULK;old_movie_release_date=12 December 2008;new_movie_release_date=20 June 2012&quot;;\n\n    Map&lt;String, String&gt; props1 = getProps(str1);\n    Map&lt;String, String&gt; props2 = getProps(str2);\n\n    System.out.println(String.format(&quot;Old Actor: %s&quot;, props1.get(&quot;old_actor&quot;)));\n    System.out.println(String.format(&quot;Old Movie Release Date: %s&quot;, props2.get(&quot;old_movie_release_date&quot;)));\n    System.out.println(String.format(&quot;New Movie Release Date: %s&quot;, props2.get(&quot;new_movie_release_date&quot;)));\n  }\n\n  private static Map&lt;String, String&gt; getProps(String str1) {\n    return Arrays.stream(str1.split(&quot;;&quot;))\n        .map(pair -&gt; pair.split(&quot;=&quot;))\n        .collect(Collectors.toMap(crumbs -&gt; crumbs[0], crumbs -&gt; crumbs[1]));\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663830220,"creation_date":1663830220,"answer_id":73810569,"question_id":73809673,"body_markdown":"Another approach using `StringTokenizer` and assembling a `HashMap` for result:\r\n\r\n    public class Main\r\n    {\r\n        public static void main(String[] args) {\r\n            HashMap&lt;String,String&gt; m = new HashMap&lt;String,String&gt;();\r\n            StringTokenizer st = new StringTokenizer(&quot;Movie=HULK/Incredible HULK;old_actor=Edward Norton;new_actor=Mark Ruffalo&quot;,&quot;;=&quot;);\r\n            while(st.hasMoreTokens()) {\r\n                String s = st.nextToken();\r\n                if (st.hasMoreTokens()) { // ensure well-formed\r\n                    m.put(s,st.nextToken());\r\n                }\r\n            }\r\n            System.out.println(m);\r\n        }\r\n    }\r\n\r\nPrints:\r\n\r\n    {Movie=HULK/Incredible HULK, old_actor=Edward Norton, new_actor=Mark Ruffalo}\r\n\r\n\r\n\r\n","title":"Extracting a substring from a given string pattern","body":"<p>Another approach using <code>StringTokenizer</code> and assembling a <code>HashMap</code> for result:</p>\n<pre><code>public class Main\n{\n    public static void main(String[] args) {\n        HashMap&lt;String,String&gt; m = new HashMap&lt;String,String&gt;();\n        StringTokenizer st = new StringTokenizer(&quot;Movie=HULK/Incredible HULK;old_actor=Edward Norton;new_actor=Mark Ruffalo&quot;,&quot;;=&quot;);\n        while(st.hasMoreTokens()) {\n            String s = st.nextToken();\n            if (st.hasMoreTokens()) { // ensure well-formed\n                m.put(s,st.nextToken());\n            }\n        }\n        System.out.println(m);\n    }\n}\n</code></pre>\n<p>Prints:</p>\n<pre><code>{Movie=HULK/Incredible HULK, old_actor=Edward Norton, new_actor=Mark Ruffalo}\n</code></pre>\n"}],"owner":{"account_id":3894540,"reputation":406,"user_id":3223942,"accept_rate":57,"display_name":"RIP SunMicrosystem"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":4,"score":-1,"last_activity_date":1663830220,"creation_date":1663824147,"question_id":73809673,"body_markdown":"Here are the Strings: \r\n\r\nExample 1 - ```Movie=HULK/Incredible HULK;old_actor=Edward Norton;new_actor=Mark Ruffalo```\r\n\r\nExample 2 - ```Movie=HULK/Incredible HULK;old_movie_release_date=12 December 2008;new_movie_release_date=20 June 2012```\r\n\r\nHow can I extract values like old_actor, new actor from example 1 and new_movie_release_date and old_movie_release_date from example 2. \r\n\r\nI&#39;m new to regex trying to see how can this be done. Thanks in advance.","title":"Extracting a substring from a given string pattern","body":"<p>Here are the Strings:</p>\n<p>Example 1 - <code>Movie=HULK/Incredible HULK;old_actor=Edward Norton;new_actor=Mark Ruffalo</code></p>\n<p>Example 2 - <code>Movie=HULK/Incredible HULK;old_movie_release_date=12 December 2008;new_movie_release_date=20 June 2012</code></p>\n<p>How can I extract values like old_actor, new actor from example 1 and new_movie_release_date and old_movie_release_date from example 2.</p>\n<p>I'm new to regex trying to see how can this be done. Thanks in advance.</p>\n"},{"tags":["java","xml","dom"],"comments":[{"owner":{"account_id":1020072,"reputation":233583,"user_id":1030675,"display_name":"choroba"},"score":0,"creation_date":1663832294,"post_id":73810449,"comment_id":130332892,"body_markdown":"The `i` should tell you. Also, you can use XPath, for example, the first one of them has `../../../*[self::product]` while the other `./../../*[self::consumable]`.","body":"The <code>i</code> should tell you. Also, you can use XPath, for example, the first one of them has <code>..&#47;..&#47;..&#47;*[self::product]</code> while the other <code>.&#47;..&#47;..&#47;*[self::consumable]</code>."},{"owner":{"account_id":19095349,"reputation":3041,"user_id":13944750,"display_name":"Ptit Xav"},"score":1,"creation_date":1663841125,"post_id":73810449,"comment_id":130336139,"body_markdown":"may be you should change your approach and search first for the parent element and then the child element you want that will be unique.","body":"may be you should change your approach and search first for the parent element and then the child element you want that will be unique."}],"owner":{"account_id":1488087,"reputation":4476,"user_id":1395874,"accept_rate":85,"display_name":"zinon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663830064,"creation_date":1663829478,"question_id":73810449,"body_markdown":"I have the following xml file that contains twice the element `manufacturedMaterial`.\r\n\r\nI&#39;m using `NodeList nodes = dom.getElementsByTagName(&quot;manufacturedMaterial&quot;);` to access the elements of `manufacturedMaterial` and add some subelements. However, the subelements are added also to the second `manufacturedMaterial`.\r\n\r\nThe code I&#39;m using is:\r\n\r\n    for (int i = 0; i &lt; nodes.getLength(); i++) {\r\n    \t\t\tNode node = nodes.item(i);\r\n    }\r\n\r\nIs there a way to check if I&#39;m in the first or second node of `manufacturedMaterial`?\r\n\r\n    &lt;product&gt;\r\n    \t&lt;manufacturedProduct classCode=&quot;MANU&quot;&gt;\r\n    \t\t&lt;templateId root=&quot;1.3.6.1.4.1.12559.11.10.1.3.1.3.1&quot;/&gt;\r\n    \t\t&lt;templateId root=&quot;2.16.840.1.113883.10.20.1.53&quot;/&gt;\r\n    \t\t&lt;manufacturedMaterial classCode=&quot;MMAT&quot; determinerCode=&quot;KIND&quot;&gt;\r\n    \t\t\t&lt;code code=&quot;10219000&quot; codeSystem=&quot;0.4.0.127.0.16.1.1.2.1&quot; codeSystemName=&quot;EDQM&quot; codeSystemVersion=&quot;2022-01-18&quot; displayName=&quot;Tablet&quot;/&gt;\r\n    \t\t\t&lt;name&gt;ALGOFEN TABLET 500MG&lt;/name&gt;\r\n    \t\t\t&lt;epsos:desc xmlns=&quot;&quot;&gt;500 mg&lt;/epsos:desc&gt;\r\n    \t\t\t&lt;epsos:formCode xmlns=&quot;&quot; code=&quot;658244&quot; codeSystem=&quot;2.16.724.4.21.5.15.4&quot; displayName=&quot;PARACETAMOL NORMON 500MG 20 COMPRIMIDOS EFG&quot;/&gt;\r\n    \t\t\t&lt;epsos:asContent xmlns=&quot;urn:epsos-org:ep:medication&quot; classCode=&quot;CONT&quot;&gt;\r\n    \t\t\t\t&lt;epsos:containerPackagedMedicine xmlns=&quot;&quot; classCode=&quot;CONT&quot; determinerCode=&quot;INSTANCE&quot;&gt;\r\n    \t\t\t\t\t&lt;epsos:name/&gt;\r\n    \t\t\t\t\t&lt;epsos:formCode code=&quot;116&quot; codeSystem=&quot;1.3.6.1.4.1.12559.11.10.1.3.1.44.4&quot; codeSystemName=&quot;eHDSIDisplayLabel&quot; displayName=&quot;&quot;/&gt;\r\n    \t\t\t\t\t&lt;epsos:capacityQuantity unit=&quot;1&quot; value=&quot;20.0&quot;/&gt;\r\n    \t\t\t\t\t&lt;epsos:capTypeCode nullFlavor=&quot;NA&quot;/&gt;\r\n    \t\t\t\t&lt;/epsos:containerPackagedMedicine&gt;\r\n    \t\t\t&lt;/epsos:asContent&gt;\r\n    \t\t\t&lt;epsos:asSpecializedKind xmlns=&quot;urn:epsos-org:ep:medication&quot; classCode=&quot;GEN&quot;&gt;\r\n    \t\t\t\t&lt;epsos:generalizedMedicineClass classCode=&quot;MMAT&quot;&gt;\r\n    \t\t\t\t\t&lt;code code=&quot;N02BE01&quot; codeSystem=&quot;2.16.840.1.113883.6.73&quot; codeSystemName=&quot;Anatomical Therapeutic Chemical&quot; codeSystemVersion=&quot;2022-01&quot; displayName=&quot;paracetamol&quot;/&gt;\r\n    \t\t\t\t&lt;/epsos:generalizedMedicineClass&gt;\r\n    \t\t\t&lt;/epsos:asSpecializedKind&gt;\r\n    \t\t&lt;/manufacturedMaterial&gt;\r\n    \t&lt;/manufacturedProduct&gt;\r\n    &lt;/product&gt;\r\n    &lt;entryRelationship typeCode=&quot;REFR&quot;&gt;\r\n    \t&lt;sequenceNumber value=&quot;1&quot;/&gt;\r\n    \t&lt;substanceAdministration classCode=&quot;SBADM&quot; moodCode=&quot;INT&quot;&gt;\r\n    \t\t&lt;id extension=&quot;JE000233461&quot; root=&quot;2.16.724.4.9.30.40&quot;/&gt;\r\n    \t\t&lt;text&gt;\r\n    \t\t\t&lt;reference value=&quot;#medicine.1&quot;/&gt;\r\n    \t\t&lt;/text&gt;\r\n    \t\t&lt;statusCode code=&quot;completed&quot;/&gt;\r\n    \t\t&lt;effectiveTime nullFlavor=&quot;UNK&quot; xsi:type=&quot;IVL_TS&quot;/&gt;\r\n    \t\t&lt;doseQuantity nullFlavor=&quot;UNK&quot;/&gt;\r\n    \t\t&lt;consumable typeCode=&quot;CSM&quot;&gt;\r\n    \t\t\t&lt;manufacturedProduct classCode=&quot;MANU&quot;&gt;\r\n    \t\t\t\t&lt;templateId root=&quot;1.3.6.1.4.1.12559.11.10.1.3.1.3.1&quot;/&gt;\r\n    \t\t\t\t&lt;templateId root=&quot;2.16.840.1.113883.10.20.1.53&quot;/&gt;\r\n    \t\t\t\t&lt;manufacturedMaterial classCode=&quot;MMAT&quot; determinerCode=&quot;KIND&quot;&gt;\r\n    \t\t\t\t\t&lt;code code=&quot;10219000&quot; codeSystem=&quot;0.4.0.127.0.16.1.1.2.1&quot; codeSystemName=&quot;EDQM&quot; codeSystemVersion=&quot;2022-01-18&quot; displayName=&quot;Tablet&quot;/&gt;\r\n    \t\t\t\t\t&lt;name&gt;PARACETAMOL NORMON 500 mg COMPRIMIDOS EFGPARACETAMOL NORMON 500 mg COMPRIMIDOS EFG&lt;/name&gt;\r\n    \t\t\t\t\t&lt;epsos:formCode xmlns=&quot;&quot;/&gt;\r\n    \t\t\t\t\t&lt;epsos:asContent xmlns=&quot;urn:epsos-org:ep:medication&quot; classCode=&quot;CONT&quot;&gt;\r\n    \t\t\t\t\t\t&lt;epsos:containerPackagedMedicine xmlns=&quot;&quot; classCode=&quot;CONT&quot; determinerCode=&quot;INSTANCE&quot;&gt;\r\n    \t\t\t\t\t\t\t&lt;epsos:name/&gt;\r\n    \t\t\t\t\t\t\t&lt;epsos:formCode/&gt;\r\n    \t\t\t\t\t\t\t&lt;epsos:capacityQuantity/&gt;\r\n    \t\t\t\t\t\t\t&lt;epsos:capTypeCode nullFlavor=&quot;NA&quot;/&gt;\r\n    \t\t\t\t\t\t&lt;/epsos:containerPackagedMedicine&gt;\r\n    \t\t\t\t\t&lt;/epsos:asContent&gt;\r\n    \t\t\t\t\t&lt;epsos:asSpecializedKind xmlns=&quot;urn:epsos-org:ep:medication&quot; classCode=&quot;GEN&quot;&gt;\r\n    \t\t\t\t\t\t&lt;epsos:generalizedMedicineClass classCode=&quot;MMAT&quot;&gt;\r\n    \t\t\t\t\t\t\t&lt;code code=&quot;N02BE01&quot; codeSystem=&quot;2.16.840.1.113883.6.73&quot; codeSystemName=&quot;Anatomical Therapeutic Chemical&quot; codeSystemVersion=&quot;2022-01&quot; displayName=&quot;paracetamol&quot;/&gt;\r\n    \t\t\t\t\t\t&lt;/epsos:generalizedMedicineClass&gt;\r\n    \t\t\t\t\t&lt;/epsos:asSpecializedKind&gt;\r\n    \t\t\t\t&lt;/manufacturedMaterial&gt;\r\n    \t\t\t&lt;/manufacturedProduct&gt;\r\n    \t\t&lt;/consumable&gt;\r\n    \t&lt;/substanceAdministration&gt;\r\n    &lt;/entryRelationship&gt;\r\n\r\n","title":"If my xml has two nodes with the same name, how to know the node I&#39;m into?","body":"<p>I have the following xml file that contains twice the element <code>manufacturedMaterial</code>.</p>\n<p>I'm using <code>NodeList nodes = dom.getElementsByTagName(&quot;manufacturedMaterial&quot;);</code> to access the elements of <code>manufacturedMaterial</code> and add some subelements. However, the subelements are added also to the second <code>manufacturedMaterial</code>.</p>\n<p>The code I'm using is:</p>\n<pre><code>for (int i = 0; i &lt; nodes.getLength(); i++) {\n            Node node = nodes.item(i);\n}\n</code></pre>\n<p>Is there a way to check if I'm in the first or second node of <code>manufacturedMaterial</code>?</p>\n<pre><code>&lt;product&gt;\n    &lt;manufacturedProduct classCode=&quot;MANU&quot;&gt;\n        &lt;templateId root=&quot;1.3.6.1.4.1.12559.11.10.1.3.1.3.1&quot;/&gt;\n        &lt;templateId root=&quot;2.16.840.1.113883.10.20.1.53&quot;/&gt;\n        &lt;manufacturedMaterial classCode=&quot;MMAT&quot; determinerCode=&quot;KIND&quot;&gt;\n            &lt;code code=&quot;10219000&quot; codeSystem=&quot;0.4.0.127.0.16.1.1.2.1&quot; codeSystemName=&quot;EDQM&quot; codeSystemVersion=&quot;2022-01-18&quot; displayName=&quot;Tablet&quot;/&gt;\n            &lt;name&gt;ALGOFEN TABLET 500MG&lt;/name&gt;\n            &lt;epsos:desc xmlns=&quot;&quot;&gt;500 mg&lt;/epsos:desc&gt;\n            &lt;epsos:formCode xmlns=&quot;&quot; code=&quot;658244&quot; codeSystem=&quot;2.16.724.4.21.5.15.4&quot; displayName=&quot;PARACETAMOL NORMON 500MG 20 COMPRIMIDOS EFG&quot;/&gt;\n            &lt;epsos:asContent xmlns=&quot;urn:epsos-org:ep:medication&quot; classCode=&quot;CONT&quot;&gt;\n                &lt;epsos:containerPackagedMedicine xmlns=&quot;&quot; classCode=&quot;CONT&quot; determinerCode=&quot;INSTANCE&quot;&gt;\n                    &lt;epsos:name/&gt;\n                    &lt;epsos:formCode code=&quot;116&quot; codeSystem=&quot;1.3.6.1.4.1.12559.11.10.1.3.1.44.4&quot; codeSystemName=&quot;eHDSIDisplayLabel&quot; displayName=&quot;&quot;/&gt;\n                    &lt;epsos:capacityQuantity unit=&quot;1&quot; value=&quot;20.0&quot;/&gt;\n                    &lt;epsos:capTypeCode nullFlavor=&quot;NA&quot;/&gt;\n                &lt;/epsos:containerPackagedMedicine&gt;\n            &lt;/epsos:asContent&gt;\n            &lt;epsos:asSpecializedKind xmlns=&quot;urn:epsos-org:ep:medication&quot; classCode=&quot;GEN&quot;&gt;\n                &lt;epsos:generalizedMedicineClass classCode=&quot;MMAT&quot;&gt;\n                    &lt;code code=&quot;N02BE01&quot; codeSystem=&quot;2.16.840.1.113883.6.73&quot; codeSystemName=&quot;Anatomical Therapeutic Chemical&quot; codeSystemVersion=&quot;2022-01&quot; displayName=&quot;paracetamol&quot;/&gt;\n                &lt;/epsos:generalizedMedicineClass&gt;\n            &lt;/epsos:asSpecializedKind&gt;\n        &lt;/manufacturedMaterial&gt;\n    &lt;/manufacturedProduct&gt;\n&lt;/product&gt;\n&lt;entryRelationship typeCode=&quot;REFR&quot;&gt;\n    &lt;sequenceNumber value=&quot;1&quot;/&gt;\n    &lt;substanceAdministration classCode=&quot;SBADM&quot; moodCode=&quot;INT&quot;&gt;\n        &lt;id extension=&quot;JE000233461&quot; root=&quot;2.16.724.4.9.30.40&quot;/&gt;\n        &lt;text&gt;\n            &lt;reference value=&quot;#medicine.1&quot;/&gt;\n        &lt;/text&gt;\n        &lt;statusCode code=&quot;completed&quot;/&gt;\n        &lt;effectiveTime nullFlavor=&quot;UNK&quot; xsi:type=&quot;IVL_TS&quot;/&gt;\n        &lt;doseQuantity nullFlavor=&quot;UNK&quot;/&gt;\n        &lt;consumable typeCode=&quot;CSM&quot;&gt;\n            &lt;manufacturedProduct classCode=&quot;MANU&quot;&gt;\n                &lt;templateId root=&quot;1.3.6.1.4.1.12559.11.10.1.3.1.3.1&quot;/&gt;\n                &lt;templateId root=&quot;2.16.840.1.113883.10.20.1.53&quot;/&gt;\n                &lt;manufacturedMaterial classCode=&quot;MMAT&quot; determinerCode=&quot;KIND&quot;&gt;\n                    &lt;code code=&quot;10219000&quot; codeSystem=&quot;0.4.0.127.0.16.1.1.2.1&quot; codeSystemName=&quot;EDQM&quot; codeSystemVersion=&quot;2022-01-18&quot; displayName=&quot;Tablet&quot;/&gt;\n                    &lt;name&gt;PARACETAMOL NORMON 500 mg COMPRIMIDOS EFGPARACETAMOL NORMON 500 mg COMPRIMIDOS EFG&lt;/name&gt;\n                    &lt;epsos:formCode xmlns=&quot;&quot;/&gt;\n                    &lt;epsos:asContent xmlns=&quot;urn:epsos-org:ep:medication&quot; classCode=&quot;CONT&quot;&gt;\n                        &lt;epsos:containerPackagedMedicine xmlns=&quot;&quot; classCode=&quot;CONT&quot; determinerCode=&quot;INSTANCE&quot;&gt;\n                            &lt;epsos:name/&gt;\n                            &lt;epsos:formCode/&gt;\n                            &lt;epsos:capacityQuantity/&gt;\n                            &lt;epsos:capTypeCode nullFlavor=&quot;NA&quot;/&gt;\n                        &lt;/epsos:containerPackagedMedicine&gt;\n                    &lt;/epsos:asContent&gt;\n                    &lt;epsos:asSpecializedKind xmlns=&quot;urn:epsos-org:ep:medication&quot; classCode=&quot;GEN&quot;&gt;\n                        &lt;epsos:generalizedMedicineClass classCode=&quot;MMAT&quot;&gt;\n                            &lt;code code=&quot;N02BE01&quot; codeSystem=&quot;2.16.840.1.113883.6.73&quot; codeSystemName=&quot;Anatomical Therapeutic Chemical&quot; codeSystemVersion=&quot;2022-01&quot; displayName=&quot;paracetamol&quot;/&gt;\n                        &lt;/epsos:generalizedMedicineClass&gt;\n                    &lt;/epsos:asSpecializedKind&gt;\n                &lt;/manufacturedMaterial&gt;\n            &lt;/manufacturedProduct&gt;\n        &lt;/consumable&gt;\n    &lt;/substanceAdministration&gt;\n&lt;/entryRelationship&gt;\n</code></pre>\n"},{"tags":["java","servlets","jdbc","mysql-connector"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1661577889,"post_id":73504635,"comment_id":129810213,"body_markdown":"Your sql is wrong. It should be ```VALUES```. Use try-with-resources on all db resources and ```ps.executeUpdate```","body":"Your sql is wrong. It should be <code>VALUES</code>. Use try-with-resources on all db resources and <code>ps.executeUpdate</code>"}],"answers":[{"tags":[],"owner":{"account_id":18179414,"reputation":102,"user_id":13589705,"display_name":"sighclone"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1663829791,"creation_date":1663829791,"answer_id":73810501,"question_id":73504635,"body_markdown":"[Tahir Hussain Mir][1]&#39;s answer on [this][2] question has resolved the issue.\r\nAs it turns out, it&#39;s a problem during deployment in which the external jar file for SQL is used for compilation but is not included during runtime.\r\nTo solve this:\r\nAdd the `.jar` file to the `Deployment Assembly` under `Project &gt; Properties`.\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/5435216/tahir-hussain-mir\r\n  [2]: https://stackoverflow.com/questions/17484764/java-lang-classnotfoundexception-com-mysql-jdbc-driver-in-eclipse","title":"Unable to execute SQL via &quot;Run on server&quot; option on eclipse","body":"<p><a href=\"https://stackoverflow.com/users/5435216/tahir-hussain-mir\">Tahir Hussain Mir</a>'s answer on <a href=\"https://stackoverflow.com/questions/17484764/java-lang-classnotfoundexception-com-mysql-jdbc-driver-in-eclipse\">this</a> question has resolved the issue.\nAs it turns out, it's a problem during deployment in which the external jar file for SQL is used for compilation but is not included during runtime.\nTo solve this:\nAdd the <code>.jar</code> file to the <code>Deployment Assembly</code> under <code>Project &gt; Properties</code>.</p>\n"}],"owner":{"account_id":18179414,"reputation":102,"user_id":13589705,"display_name":"sighclone"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73810501,"answer_count":1,"score":0,"last_activity_date":1663829791,"creation_date":1661534895,"question_id":73504635,"body_markdown":"I am trying to get the servlet program to connect with the database and perform actions. In eclipse, when I put the connection and queries in the main() method and choose &quot;Run as java application&quot; it is working and the database is being updated, however, when I launch the html using &quot;Run on server&quot; and put the queries in the doGet() method, the servlet is running and html is being updated in the browser, but, no update is being done in the database. I also tried putting the code in the main method and calling main() through doGet() with no success.\r\n\r\nhtml file:\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n    &lt;meta charset=&quot;ISO-8859-1&quot;&gt;\r\n    &lt;title&gt;Register&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    \t&lt;form action=&quot;register&quot; method=&quot;get&quot;&gt;\r\n    \t\t&lt;label for=&quot;uname&quot;&gt;Username:&lt;/label&gt;\r\n    \t\t&lt;input type=&quot;text&quot; name=&quot;uname&quot;&gt;\r\n    \t\t&lt;label for=&quot;pwd&quot;&gt;Password:&lt;/label&gt;\r\n    \t\t&lt;input type=&quot;text&quot; name=&quot;pwd&quot;&gt;\r\n    \t\t&lt;button type=&quot;submit&quot;&gt;Register&lt;/button&gt;\r\n    \t&lt;/form&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\ndoGet() method:\r\n\r\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n    \t// TODO Auto-generated method stub\r\n    \t// response.getWriter().append(&quot;Served at: &quot;).append(request.getContextPath());\r\n    \tPrintWriter pw = response.getWriter();\r\n    \tString uname = request.getParameter(&quot;uname&quot;);\r\n    \tString pwd = request.getParameter(&quot;pwd&quot;);\r\n    \tConnection con = null;\r\n    \ttry {\r\n    \t\tClass.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n    \t\tcon = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/advjavada&quot;, &quot;root&quot;, &quot;&quot;);\r\n    \t\tif(!con.isClosed()) {\r\n    \t\t\tSystem.out.println(&quot;Connection SUCCESSFUL!&quot;);\r\n    \t\t\tPreparedStatement ps = con.prepareStatement(&quot;insert into userdata(uname, pwd) value(&#39;sample2&#39;, &#39;sampass2&#39;);&quot;);\r\n    \t\t\t//ResultSet rs = ps.executeQuery();\r\n    \t\t\tps.executeQuery();\r\n    \t\t}\r\n    \t\telse {\r\n    \t\t\tSystem.out.println(&quot;Connection FAILED!&quot;);\r\n    \t\t}\r\n    \t}\r\n    \tcatch (Exception e) {\r\n    \t\tSystem.err.print(e.getMessage());\r\n    \t}\r\n    \tpw.println(&quot;&lt;h1&gt;Hello, &quot; + uname + &quot;!&lt;/h1&gt;&lt;p&gt;Registration Successful&lt;/p&gt;&quot;);\r\n    \tpw.close();\r\n    }\r\n\r\n","title":"Unable to execute SQL via &quot;Run on server&quot; option on eclipse","body":"<p>I am trying to get the servlet program to connect with the database and perform actions. In eclipse, when I put the connection and queries in the main() method and choose &quot;Run as java application&quot; it is working and the database is being updated, however, when I launch the html using &quot;Run on server&quot; and put the queries in the doGet() method, the servlet is running and html is being updated in the browser, but, no update is being done in the database. I also tried putting the code in the main method and calling main() through doGet() with no success.</p>\n<p>html file:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;ISO-8859-1&quot;&gt;\n&lt;title&gt;Register&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;form action=&quot;register&quot; method=&quot;get&quot;&gt;\n        &lt;label for=&quot;uname&quot;&gt;Username:&lt;/label&gt;\n        &lt;input type=&quot;text&quot; name=&quot;uname&quot;&gt;\n        &lt;label for=&quot;pwd&quot;&gt;Password:&lt;/label&gt;\n        &lt;input type=&quot;text&quot; name=&quot;pwd&quot;&gt;\n        &lt;button type=&quot;submit&quot;&gt;Register&lt;/button&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>doGet() method:</p>\n<pre><code>protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n    // TODO Auto-generated method stub\n    // response.getWriter().append(&quot;Served at: &quot;).append(request.getContextPath());\n    PrintWriter pw = response.getWriter();\n    String uname = request.getParameter(&quot;uname&quot;);\n    String pwd = request.getParameter(&quot;pwd&quot;);\n    Connection con = null;\n    try {\n        Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n        con = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/advjavada&quot;, &quot;root&quot;, &quot;&quot;);\n        if(!con.isClosed()) {\n            System.out.println(&quot;Connection SUCCESSFUL!&quot;);\n            PreparedStatement ps = con.prepareStatement(&quot;insert into userdata(uname, pwd) value('sample2', 'sampass2');&quot;);\n            //ResultSet rs = ps.executeQuery();\n            ps.executeQuery();\n        }\n        else {\n            System.out.println(&quot;Connection FAILED!&quot;);\n        }\n    }\n    catch (Exception e) {\n        System.err.print(e.getMessage());\n    }\n    pw.println(&quot;&lt;h1&gt;Hello, &quot; + uname + &quot;!&lt;/h1&gt;&lt;p&gt;Registration Successful&lt;/p&gt;&quot;);\n    pw.close();\n}\n</code></pre>\n"},{"tags":["java","spring-security","spring-cloud-gateway","spring-session"],"comments":[{"owner":{"account_id":22443986,"reputation":2042,"user_id":16648127,"display_name":"Enfield Li"},"score":0,"creation_date":1663390242,"post_id":73688201,"comment_id":130233558,"body_markdown":"I tried [`GlobalFilters`](https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#global-filters) but to no avail. It seems like it&#39;s impossible to do this inside Gateway. Guess I&#39;ll use GWT in the end. And access header takes minimum amount of fuss.","body":"I tried <a href=\"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#global-filters\" rel=\"nofollow noreferrer\"><code>GlobalFilters</code></a> but to no avail. It seems like it&#39;s impossible to do this inside Gateway. Guess I&#39;ll use GWT in the end. And access header takes minimum amount of fuss."}],"answers":[{"tags":[],"owner":{"account_id":22443986,"reputation":2042,"user_id":16648127,"display_name":"Enfield Li"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663829596,"creation_date":1663829596,"answer_id":73810472,"question_id":73688201,"body_markdown":"### Found a workaround:\r\nBy setting up a servlet application as a downstream service that does authorization, and then reading/writing session inside the &quot;authorization service&quot; will be relatively easier (since the gateway and the direct downstream service will be sharing the same session).\r\n\r\nAs to the whole authentication/authorization part in this microservice architecture, I found out that using JWT is more preferable, and it&#39;s recommended that it should be stateless in between services, while gateway can be stateful, so as to share session with the said &quot;authorization service&quot;.\r\n\r\nA [great answer](https://stackoverflow.com/a/69631673/16648127) explaining JWT implementation visually.","title":"How to read/write session attribute in Spring Cloud Gateway?","body":"<h3>Found a workaround:</h3>\n<p>By setting up a servlet application as a downstream service that does authorization, and then reading/writing session inside the &quot;authorization service&quot; will be relatively easier (since the gateway and the direct downstream service will be sharing the same session).</p>\n<p>As to the whole authentication/authorization part in this microservice architecture, I found out that using JWT is more preferable, and it's recommended that it should be stateless in between services, while gateway can be stateful, so as to share session with the said &quot;authorization service&quot;.</p>\n<p>A <a href=\"https://stackoverflow.com/a/69631673/16648127\">great answer</a> explaining JWT implementation visually.</p>\n"}],"owner":{"account_id":22443986,"reputation":2042,"user_id":16648127,"display_name":"Enfield Li"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1529,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1663829596,"creation_date":1662980291,"question_id":73688201,"body_markdown":"I&#39;m trying to persist user in http session and verify authentication request inside Gateway by using a custom filter. I found a [similar question](https://stackoverflow.com/questions/47406424/how-to-use-websession-in-spring-webflux-to-persist-data) too: \r\n\r\n### SecurityConfig:\r\n```\r\n@Configuration\r\npublic class SecurityConfig {\r\n\r\n  @Bean\r\n  public SecurityWebFilterChain securityWebFilterChain(\r\n    ServerHttpSecurity http,\r\n    MyAuthenticationFilter myAuthenticationFilter\r\n  ) {\r\n    http\r\n      .csrf()\r\n      .disable()\r\n      .authorizeExchange()\r\n      .pathMatchers(&quot;/**&quot;)\r\n      .permitAll()\r\n      .and()\r\n      .addFilterAt(myAuthenticationFilter, SecurityWebFiltersOrder.FIRST); // custom filter\r\n\r\n    return http.build();\r\n  }\r\n```\r\n### MyAuthenticationFilter:\r\n```\r\n@Component\r\npublic class MyAuthenticationFilter implements WebFilter {\r\n\r\n  @Override\r\n  public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\r\n    exchange.getSession().map(\r\n        session -&gt; {\r\n          session.getAttributes().put(&quot;userId&quot;, &quot;id123&quot;);\r\n\r\n          // It does not print anything\r\n          System.out.println(&quot;userId in session: &quot; + session.getAttribute(&quot;userId&quot;));\r\n          return session;\r\n        }\r\n      );\r\n\r\n    return chain.filter(exchange);\r\n  }\r\n}\r\n```\r\nBy adding a custom filter, and attempting to read/write session attribute, as I observed in debug mode, the function inside `map()` **never** gets executed, and nothing gets print out in the terminal. (Unsurprisingly, downstream service cannot read `userId` from session even though both gateway and service share the same session).\r\n\r\nWhy is it not working? Here&#39;s a minimal reproduced version: [Github repo](https://github.com/Enfield-Li/Debug-Gateway-Session-Attr), please take a look.\r\n","title":"How to read/write session attribute in Spring Cloud Gateway?","body":"<p>I'm trying to persist user in http session and verify authentication request inside Gateway by using a custom filter. I found a <a href=\"https://stackoverflow.com/questions/47406424/how-to-use-websession-in-spring-webflux-to-persist-data\">similar question</a> too:</p>\n<h3>SecurityConfig:</h3>\n<pre><code>@Configuration\npublic class SecurityConfig {\n\n  @Bean\n  public SecurityWebFilterChain securityWebFilterChain(\n    ServerHttpSecurity http,\n    MyAuthenticationFilter myAuthenticationFilter\n  ) {\n    http\n      .csrf()\n      .disable()\n      .authorizeExchange()\n      .pathMatchers(&quot;/**&quot;)\n      .permitAll()\n      .and()\n      .addFilterAt(myAuthenticationFilter, SecurityWebFiltersOrder.FIRST); // custom filter\n\n    return http.build();\n  }\n</code></pre>\n<h3>MyAuthenticationFilter:</h3>\n<pre><code>@Component\npublic class MyAuthenticationFilter implements WebFilter {\n\n  @Override\n  public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\n    exchange.getSession().map(\n        session -&gt; {\n          session.getAttributes().put(&quot;userId&quot;, &quot;id123&quot;);\n\n          // It does not print anything\n          System.out.println(&quot;userId in session: &quot; + session.getAttribute(&quot;userId&quot;));\n          return session;\n        }\n      );\n\n    return chain.filter(exchange);\n  }\n}\n</code></pre>\n<p>By adding a custom filter, and attempting to read/write session attribute, as I observed in debug mode, the function inside <code>map()</code> <strong>never</strong> gets executed, and nothing gets print out in the terminal. (Unsurprisingly, downstream service cannot read <code>userId</code> from session even though both gateway and service share the same session).</p>\n<p>Why is it not working? Here's a minimal reproduced version: <a href=\"https://github.com/Enfield-Li/Debug-Gateway-Session-Attr\" rel=\"nofollow noreferrer\">Github repo</a>, please take a look.</p>\n"},{"tags":["java","maven","jenkins","spring-boot","slf4j"],"comments":[{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1476797383,"post_id":40109002,"comment_id":67490469,"body_markdown":"Possible duplicate of [Spring + PostgreSQL &gt; Multiple SLF4J bindings](http://stackoverflow.com/questions/28661189/spring-postgresql-multiple-slf4j-bindings)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/28661189/spring-postgresql-multiple-slf4j-bindings\">Spring + PostgreSQL &gt; Multiple SLF4J bindings</a>"},{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1476797491,"post_id":40109002,"comment_id":67490539,"body_markdown":"It appears that the **slf4j-simple** dependency of PostgreSQL is the culprit here. Rather than trying to exclude logback, I think you should exclude slf4j-simple from com.soft.pgs:common. The answer I linked to in my previous comment mentions exactly the same.","body":"It appears that the <b>slf4j-simple</b> dependency of PostgreSQL is the culprit here. Rather than trying to exclude logback, I think you should exclude slf4j-simple from com.soft.pgs:common. The answer I linked to in my previous comment mentions exactly the same."},{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1476798979,"post_id":40109002,"comment_id":67491745,"body_markdown":"I noticed that you changed your question and mentioned that the exclusions from the linked answer does not work. Can you post your current pom.xml now and show your updated mvn dependency:tree as well?","body":"I noticed that you changed your question and mentioned that the exclusions from the linked answer does not work. Can you post your current pom.xml now and show your updated mvn dependency:tree as well?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1476799559,"post_id":40109002,"comment_id":67492180,"body_markdown":"For starters I would cleanup your pom, then do `mvn dependency:tree` and see which dependency pulls in the cullprit instead of randomly excluding things","body":"For starters I would cleanup your pom, then do <code>mvn dependency:tree</code> and see which dependency pulls in the cullprit instead of randomly excluding things"}],"answers":[{"tags":[],"owner":{"account_id":5972466,"reputation":1293,"user_id":4694415,"display_name":"Guilherme Alencar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1620257357,"creation_date":1620257357,"answer_id":67410004,"question_id":40109002,"body_markdown":"I was facing the same issue but it started to happen when I added the `swagger-codegen-maven-plugin`, and after making the `mvn dependency:tree` I figure out they had also the `slf4j-simple-1.7.30.jar`. Then I added the exclusion to it:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.swagger&lt;/groupId&gt;\r\n        &lt;artifactId&gt;swagger-codegen-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.1&lt;/version&gt;\r\n        &lt;exclusions&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n            &lt;/exclusion&gt;\r\n        &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;","title":"Class path contains multiple SLF4J bindings even with exclusions","body":"<p>I was facing the same issue but it started to happen when I added the <code>swagger-codegen-maven-plugin</code>, and after making the <code>mvn dependency:tree</code> I figure out they had also the <code>slf4j-simple-1.7.30.jar</code>. Then I added the exclusion to it:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.swagger&lt;/groupId&gt;\n    &lt;artifactId&gt;swagger-codegen-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.3.1&lt;/version&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2095815,"reputation":1095,"user_id":1864614,"display_name":"razvang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663829406,"creation_date":1663828999,"answer_id":73810363,"question_id":40109002,"body_markdown":"struggled several hours to resolve this error, which I was getting when running a JUnitTest for a RestController from IntelliJ.\r\nI&#39;ve tried a lot of exclude combinations in gradle,\r\nand based on @Guilherme Alencar response, here&#39;s what worked for me:\r\n\r\n```\r\nopenApiGenerate {\r\n    generatorName.set(&quot;spring&quot;)\r\n    validateSpec.set(true)\r\n    inputSpec.set(&quot;$rootDir/myproj/src/main/resources/api/api.yaml&quot;)\r\n    outputDir.set(&quot;$buildDir/generated/$generator&quot;)\r\n    modelPackage.set(&quot;com.fanduel.loyalty.gateway.generated.models&quot;)\r\n    apiPackage.set(&quot;com.fanduel.loyalty.gateway.generated.controllers&quot;)\r\n    configOptions.set(\r\n            mapOf(\r\n                    &quot;dateLibrary&quot; to &quot;java8&quot;,\r\n                    &quot;useTags&quot; to &quot;true&quot;,\r\n                    &quot;interfaceOnly&quot; to &quot;true&quot;\r\n            )\r\n    )\r\n    configurations {\r\n        all {\r\n            exclude(group = &quot;slf4j-simple&quot;, module = &quot;slf4j-simple&quot;)\r\n        }\r\n    }\r\n}\r\n\r\nconfigurations.all {\r\n    exclude(module = &quot;slf4j-simple&quot;)\r\n}\r\n```\r\n\r\n","title":"Class path contains multiple SLF4J bindings even with exclusions","body":"<p>struggled several hours to resolve this error, which I was getting when running a JUnitTest for a RestController from IntelliJ.\nI've tried a lot of exclude combinations in gradle,\nand based on @Guilherme Alencar response, here's what worked for me:</p>\n<pre><code>openApiGenerate {\n    generatorName.set(&quot;spring&quot;)\n    validateSpec.set(true)\n    inputSpec.set(&quot;$rootDir/myproj/src/main/resources/api/api.yaml&quot;)\n    outputDir.set(&quot;$buildDir/generated/$generator&quot;)\n    modelPackage.set(&quot;com.fanduel.loyalty.gateway.generated.models&quot;)\n    apiPackage.set(&quot;com.fanduel.loyalty.gateway.generated.controllers&quot;)\n    configOptions.set(\n            mapOf(\n                    &quot;dateLibrary&quot; to &quot;java8&quot;,\n                    &quot;useTags&quot; to &quot;true&quot;,\n                    &quot;interfaceOnly&quot; to &quot;true&quot;\n            )\n    )\n    configurations {\n        all {\n            exclude(group = &quot;slf4j-simple&quot;, module = &quot;slf4j-simple&quot;)\n        }\n    }\n}\n\nconfigurations.all {\n    exclude(module = &quot;slf4j-simple&quot;)\n}\n</code></pre>\n"}],"owner":{"account_id":7414718,"reputation":41,"user_id":5640952,"display_name":"Max94"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1667,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1663829406,"creation_date":1476795613,"question_id":40109002,"body_markdown":"I&#39;m deploying application on Jenkins and I&#39;m getting [Multiple bindings error][1]\r\n\r\n\r\nI&#39;ve already tried adding exclusions to my pom. Then I ran maven *dependency:tree* command to trace if any other dependency is using logback and there is no reference to that. Here are my logs after running this command [logs][2]. The wierd thing is that on my local machine the application builds and starts successfully. This is my latest pom.xml:\r\n\r\n    &lt;modules&gt;\r\n        &lt;module&gt;my-first-module&lt;/module&gt;\r\n        &lt;module&gt;my-second-module&lt;/module&gt;\r\n    &lt;/modules&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;springboot.version&gt;1.4.1.RELEASE&lt;/springboot.version&gt;\r\n        &lt;postgresql.version&gt;9.4-1200-jdbc41&lt;/postgresql.version&gt;\r\n        &lt;hsqldb.version&gt;1.8.0.10&lt;/hsqldb.version&gt;\r\n        &lt;h2.version&gt;1.4.192&lt;/h2.version&gt;\r\n        &lt;junit.version&gt;4.12&lt;/junit.version&gt;\r\n        &lt;jwt.version&gt;0.6.0&lt;/jwt.version&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n        &lt;spring.security&gt;4.1.3.RELEASE&lt;/spring.security&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;1.4.1.RELEASE&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;!--spring-boot--&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\r\n                &lt;version&gt;${springboot.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n                &lt;version&gt;${springboot.version}&lt;/version&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n                &lt;version&gt;${springboot.version}&lt;/version&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n                &lt;version&gt;${springboot.version}&lt;/version&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.security}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!--JWT--&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\r\n                &lt;version&gt;${jwt.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!--lombok--&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                &lt;version&gt;1.16.10&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!--common-module--&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.soft.pgs&lt;/groupId&gt;\r\n                &lt;artifactId&gt;common&lt;/artifactId&gt;\r\n                &lt;version&gt;0.1.0-SNAPSHOT&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!--mapper--&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\r\n                &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\r\n                &lt;version&gt;0.7.5&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!--HSQL--&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\r\n                &lt;version&gt;${hsqldb.version}&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!--H2--&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n                &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n                &lt;version&gt;${h2.version}&lt;/version&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!--test--&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;junit&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n                &lt;version&gt;${junit.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!--swagger--&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n                &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\r\n                &lt;version&gt;2.4.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n                &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\r\n                &lt;version&gt;2.4.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n I have even tried stupid things like adding exclusions to every dependency in every pom and still no changes.\r\n\r\n               &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n\r\n\r\nI tried also this exclusions:\r\n\r\n              &lt;exclusions&gt;\r\n                  &lt;exclusion&gt; \r\n                      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                      &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n                  &lt;/exclusion&gt;\r\n                  &lt;exclusion&gt; \r\n                      &lt;groupId&gt;log4j&lt;/groupId&gt;\r\n                      &lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n                  &lt;/exclusion&gt;\r\n              &lt;/exclusions&gt; \r\n\r\nAnd even that two combined. I don&#39;t know what other options could be, if someone hase any idea, I would appreciate that, thanks.\r\n\r\nAdded also exclusions from this [question][3] and still no changes.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Yxw7N.png\r\n  [2]: http://hastebin.com/itidofabep.rb\r\n  [3]: https://stackoverflow.com/questions/28661189/spring-postgresql-multiple-slf4j-bindings","title":"Class path contains multiple SLF4J bindings even with exclusions","body":"<p>I'm deploying application on Jenkins and I'm getting <a href=\"https://i.stack.imgur.com/Yxw7N.png\" rel=\"nofollow noreferrer\">Multiple bindings error</a></p>\n\n<p>I've already tried adding exclusions to my pom. Then I ran maven <em>dependency:tree</em> command to trace if any other dependency is using logback and there is no reference to that. Here are my logs after running this command <a href=\"http://hastebin.com/itidofabep.rb\" rel=\"nofollow noreferrer\">logs</a>. The wierd thing is that on my local machine the application builds and starts successfully. This is my latest pom.xml:</p>\n\n<pre><code>&lt;modules&gt;\n    &lt;module&gt;my-first-module&lt;/module&gt;\n    &lt;module&gt;my-second-module&lt;/module&gt;\n&lt;/modules&gt;\n\n&lt;properties&gt;\n    &lt;springboot.version&gt;1.4.1.RELEASE&lt;/springboot.version&gt;\n    &lt;postgresql.version&gt;9.4-1200-jdbc41&lt;/postgresql.version&gt;\n    &lt;hsqldb.version&gt;1.8.0.10&lt;/hsqldb.version&gt;\n    &lt;h2.version&gt;1.4.192&lt;/h2.version&gt;\n    &lt;junit.version&gt;4.12&lt;/junit.version&gt;\n    &lt;jwt.version&gt;0.6.0&lt;/jwt.version&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n    &lt;spring.security&gt;4.1.3.RELEASE&lt;/spring.security&gt;\n&lt;/properties&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;1.4.1.RELEASE&lt;/version&gt;\n&lt;/parent&gt;\n\n&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;!--spring-boot--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\n            &lt;version&gt;${springboot.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;version&gt;${springboot.version}&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n                    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n            &lt;version&gt;${springboot.version}&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n                    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;version&gt;${springboot.version}&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n                    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\n            &lt;version&gt;${spring.security}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!--JWT--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n            &lt;version&gt;${jwt.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!--lombok--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.16.10&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!--common-module--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.soft.pgs&lt;/groupId&gt;\n            &lt;artifactId&gt;common&lt;/artifactId&gt;\n            &lt;version&gt;0.1.0-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!--mapper--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\n            &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\n            &lt;version&gt;0.7.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!--HSQL--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n            &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n            &lt;version&gt;${hsqldb.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!--H2--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;version&gt;${h2.version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!--test--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!--swagger--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\n            &lt;version&gt;2.4.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n            &lt;version&gt;2.4.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n\n<p>I have even tried stupid things like adding exclusions to every dependency in every pom and still no changes.</p>\n\n<pre><code>           &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n                    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n</code></pre>\n\n<p>I tried also this exclusions:</p>\n\n<pre><code>          &lt;exclusions&gt;\n              &lt;exclusion&gt; \n                  &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                  &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n              &lt;/exclusion&gt;\n              &lt;exclusion&gt; \n                  &lt;groupId&gt;log4j&lt;/groupId&gt;\n                  &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n              &lt;/exclusion&gt;\n          &lt;/exclusions&gt; \n</code></pre>\n\n<p>And even that two combined. I don't know what other options could be, if someone hase any idea, I would appreciate that, thanks.</p>\n\n<p>Added also exclusions from this <a href=\"https://stackoverflow.com/questions/28661189/spring-postgresql-multiple-slf4j-bindings\">question</a> and still no changes.</p>\n"},{"tags":["java","spring-boot","junit","dependency-injection","autowired"],"comments":[{"owner":{"account_id":1516644,"reputation":1090,"user_id":1417502,"accept_rate":91,"display_name":"drgn"},"score":1,"creation_date":1498590807,"post_id":44787722,"comment_id":76556979,"body_markdown":"Commenting by memory, should it be &quot;@InjectMocks&quot; that should go in DeMorgenArticleScraperTest instead of &quot;@Autowired&quot;. I don&#39;t remember having &quot;@Autowired&quot; anotation in Junittest","body":"Commenting by memory, should it be &quot;@InjectMocks&quot; that should go in DeMorgenArticleScraperTest instead of &quot;@Autowired&quot;. I don&#39;t remember having &quot;@Autowired&quot; anotation in Junittest"},{"owner":{"account_id":6225104,"reputation":3680,"user_id":4843624,"accept_rate":67,"display_name":"progonkpa"},"score":0,"creation_date":1498591839,"post_id":44787722,"comment_id":76557545,"body_markdown":"I played around with the class annotation of the test after your comment and found something that works. Thank you.","body":"I played around with the class annotation of the test after your comment and found something that works. Thank you."},{"owner":{"account_id":1516644,"reputation":1090,"user_id":1417502,"accept_rate":91,"display_name":"drgn"},"score":0,"creation_date":1498591906,"post_id":44787722,"comment_id":76557588,"body_markdown":"I would suggest that you answer your own question with the solution for Stack overflow sake! Glad it helped","body":"I would suggest that you answer your own question with the solution for Stack overflow sake! Glad it helped"},{"owner":{"account_id":6225104,"reputation":3680,"user_id":4843624,"accept_rate":67,"display_name":"progonkpa"},"score":0,"creation_date":1498592105,"post_id":44787722,"comment_id":76557710,"body_markdown":"I&#39;ll better answer first and comment second in the future :)","body":"I&#39;ll better answer first and comment second in the future :)"}],"answers":[{"tags":[],"owner":{"account_id":6225104,"reputation":3680,"user_id":4843624,"accept_rate":67,"display_name":"progonkpa"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1498592016,"creation_date":1498592016,"answer_id":44788429,"question_id":44787722,"body_markdown":"I replaced\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n\r\nwith\r\n\r\n    @SpringBootTest\r\n    @RunWith(SpringRunner.class)\r\n\r\nThis appears to be working fine: I see Spring boot firing up and loading beans. I&#39;ll keep this question open for a short while for better suggestions.","title":"Spring boot field injection with autowire not working in JUnit test","body":"<p>I replaced</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n</code></pre>\n\n<p>with</p>\n\n<pre><code>@SpringBootTest\n@RunWith(SpringRunner.class)\n</code></pre>\n\n<p>This appears to be working fine: I see Spring boot firing up and loading beans. I'll keep this question open for a short while for better suggestions.</p>\n"},{"tags":[],"owner":{"account_id":10235034,"reputation":10879,"user_id":7554328,"display_name":"Darren Forsythe"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1513851651,"creation_date":1498595003,"answer_id":44789237,"question_id":44787722,"body_markdown":"`@SpringBootTest` is fairly heavyweight, and for all intents and purpose will load your entire application, https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html#boot-features-testing-spring-boot-applications, it&#39;s fairly heavyweight and dramatically affects test time. Depending on what you are trying to test you may want to look into \r\n\r\n - Slice tests e.g. `@JsonTest`, `@DataJpaTest`, `@WebMvcTest` etc. , https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html#boot-features-testing-spring-boot-applications-testing-autoconfigured-tests. Benefit of these tests are not only will they not load everything, thus faster, but will try to hunt out the relevant configurations.\r\n - Plain old `@ContextConfiguration`and point to the relevant `@Configuration`&#39;s required to load beans needed for the test https://docs.spring.io/spring/docs/current/spring-framework-reference/testing.html#contextconfiguration\r\n","title":"Spring boot field injection with autowire not working in JUnit test","body":"<p><code>@SpringBootTest</code> is fairly heavyweight, and for all intents and purpose will load your entire application, <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html#boot-features-testing-spring-boot-applications\" rel=\"noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html#boot-features-testing-spring-boot-applications</a>, it's fairly heavyweight and dramatically affects test time. Depending on what you are trying to test you may want to look into </p>\n\n<ul>\n<li>Slice tests e.g. <code>@JsonTest</code>, <code>@DataJpaTest</code>, <code>@WebMvcTest</code> etc. , <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html#boot-features-testing-spring-boot-applications-testing-autoconfigured-tests\" rel=\"noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html#boot-features-testing-spring-boot-applications-testing-autoconfigured-tests</a>. Benefit of these tests are not only will they not load everything, thus faster, but will try to hunt out the relevant configurations.</li>\n<li>Plain old <code>@ContextConfiguration</code>and point to the relevant <code>@Configuration</code>'s required to load beans needed for the test <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/testing.html#contextconfiguration\" rel=\"noreferrer\">https://docs.spring.io/spring/docs/current/spring-framework-reference/testing.html#contextconfiguration</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4219149,"reputation":537,"user_id":3454339,"display_name":"Vladimir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576758025,"creation_date":1576758025,"answer_id":59409695,"question_id":44787722,"body_markdown":"I have the same problem.\r\n\r\n1. There is service, which I want to inject for testing but I want to test only `platformToSql(..)` method without launching whole Spring Boot application.\r\n\r\n    ```java\r\n    @Service\r\n    public class ConverterToSqlImpl implements IConverterToSql {\r\n    \t\r\n    \tprivate final ISomeRepository someRepository;\r\n        private final IUtilService utilService;\r\n    \r\n        public ConverterToSqlMainConstructorServiceImpl(\r\n                IWorkerUtilService workerUtilService,\r\n                ISomeRepository someRepository) {\r\n            this.utilService = utilService;\r\n            this.someRepository = someRepository;\r\n        }\r\n    \t\t\r\n    \t@Override\r\n        public String platformToSql(String platformName) {\r\n            return &quot;platform=&#39;&quot; + platformName + &quot;&#39;&quot;;\r\n        }\r\n    \t\r\n    \t@Override\r\n    \tpublic String methodWhichUseRepositoryAndUtilBeans() {\r\n    \t\t// some code which is not interested us\r\n    \t}\r\n    }\r\n    ```\r\n\r\n2. I create test class. It is necessary to mock beans because they are not need for test method.\r\n\r\n    ```java\t\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest(classes = {ConverterToSqlImpl.class})\r\n    //@ContextConfiguration(classes = {ConverterToSqlImpl.class})\r\n    @MockBeans({@MockBean(IUtilService.class), @MockBean(ISomeRepository.class)})\r\n    public class SqlConverterConstructorTest {\r\n    \r\n        @Autowired\r\n        private IConverterToSqlMainConstructorService convertToSql;\r\n    \r\n        @Test\r\n        public void platformTest() {\r\n            String platformSql = convertToSql.platformToSql(&quot;PLATFORM_1&quot;);\r\n            String expectedSql = &quot;platform=&#39;PLATFORM_1&#39;&quot;;\r\n            Assert.assertEquals(platformSql, expectedSql);\r\n        }\r\n    }\r\n    ```\t\r\n\r\n`@SpringBootTest(classess = {})` load to `ApplicationContext` only classess which are pointed out in `classess` section, **not** whole application with all beans will be lauched.\r\n\r\nAlso, as alternative to `@SpringBootTest` with `classes={..}`, you can uncomment line with `@ContextConfiguration`. It is plain old style.\r\n","title":"Spring boot field injection with autowire not working in JUnit test","body":"<p>I have the same problem.</p>\n\n<ol>\n<li><p>There is service, which I want to inject for testing but I want to test only <code>platformToSql(..)</code> method without launching whole Spring Boot application.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class ConverterToSqlImpl implements IConverterToSql {\n\n    private final ISomeRepository someRepository;\n    private final IUtilService utilService;\n\n    public ConverterToSqlMainConstructorServiceImpl(\n            IWorkerUtilService workerUtilService,\n            ISomeRepository someRepository) {\n        this.utilService = utilService;\n        this.someRepository = someRepository;\n    }\n\n    @Override\n    public String platformToSql(String platformName) {\n        return \"platform='\" + platformName + \"'\";\n    }\n\n    @Override\n    public String methodWhichUseRepositoryAndUtilBeans() {\n        // some code which is not interested us\n    }\n}\n</code></pre></li>\n<li><p>I create test class. It is necessary to mock beans because they are not need for test method.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(SpringRunner.class)\n@SpringBootTest(classes = {ConverterToSqlImpl.class})\n//@ContextConfiguration(classes = {ConverterToSqlImpl.class})\n@MockBeans({@MockBean(IUtilService.class), @MockBean(ISomeRepository.class)})\npublic class SqlConverterConstructorTest {\n\n    @Autowired\n    private IConverterToSqlMainConstructorService convertToSql;\n\n    @Test\n    public void platformTest() {\n        String platformSql = convertToSql.platformToSql(\"PLATFORM_1\");\n        String expectedSql = \"platform='PLATFORM_1'\";\n        Assert.assertEquals(platformSql, expectedSql);\n    }\n}\n</code></pre></li>\n</ol>\n\n<p><code>@SpringBootTest(classess = {})</code> load to <code>ApplicationContext</code> only classess which are pointed out in <code>classess</code> section, <strong>not</strong> whole application with all beans will be lauched.</p>\n\n<p>Also, as alternative to <code>@SpringBootTest</code> with <code>classes={..}</code>, you can uncomment line with <code>@ContextConfiguration</code>. It is plain old style.</p>\n"},{"tags":[],"owner":{"account_id":6550921,"reputation":1782,"user_id":5065362,"display_name":"hiren"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1625052240,"creation_date":1625052240,"answer_id":68193859,"question_id":44787722,"body_markdown":"I ran into similar problem where my spring context was not getting initialized and therefore I was not able to inject the bean with `@Autowired` annotation. Then I came across this post and tried with the below annotations as suggested by @progonkpa and it started working.\r\n\r\n    @SpringBootTest\r\n    @RunWith(SpringRunner.class)\r\n\r\nBut then I realized that `@SpringBootTest` already contains `@ExtendWith({SpringExtension.class})` annotation which is Junit5 equivalent of `@RunWith(SpringRunner.class)` thus it should load spring-context while running the test. Then I found out the silly mistake I made to import `@Test` annotation from junit4(i.e `org.junit.Test;`) instead of junit5(i.e `org.junit.jupiter.api.Test;`) library. I changed the `@Test` from junit5 library and it started working with a single annotation `@SpringBootTest`.\r\n\r\np.s : don&#39;t forget to exclude junit4 library from your dependency if you are using junit5","title":"Spring boot field injection with autowire not working in JUnit test","body":"<p>I ran into similar problem where my spring context was not getting initialized and therefore I was not able to inject the bean with <code>@Autowired</code> annotation. Then I came across this post and tried with the below annotations as suggested by @progonkpa and it started working.</p>\n<pre><code>@SpringBootTest\n@RunWith(SpringRunner.class)\n</code></pre>\n<p>But then I realized that <code>@SpringBootTest</code> already contains <code>@ExtendWith({SpringExtension.class})</code> annotation which is Junit5 equivalent of <code>@RunWith(SpringRunner.class)</code> thus it should load spring-context while running the test. Then I found out the silly mistake I made to import <code>@Test</code> annotation from junit4(i.e <code>org.junit.Test;</code>) instead of junit5(i.e <code>org.junit.jupiter.api.Test;</code>) library. I changed the <code>@Test</code> from junit5 library and it started working with a single annotation <code>@SpringBootTest</code>.</p>\n<p>p.s : don't forget to exclude junit4 library from your dependency if you are using junit5</p>\n"},{"tags":[],"owner":{"account_id":24720472,"reputation":1,"user_id":18609643,"display_name":"UMehta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663828678,"creation_date":1663343607,"answer_id":73747426,"question_id":44787722,"body_markdown":"Using Junit5 worked for me and then just the `@SpringBootTest` and `@ActiveProfiles (&quot;test&quot;)` annotation was sufficient. Of course, I had to have an `application-test.properties` in the `/test/resources` path.","title":"Spring boot field injection with autowire not working in JUnit test","body":"<p>Using Junit5 worked for me and then just the <code>@SpringBootTest</code> and <code>@ActiveProfiles (&quot;test&quot;)</code> annotation was sufficient. Of course, I had to have an <code>application-test.properties</code> in the <code>/test/resources</code> path.</p>\n"}],"owner":{"account_id":6225104,"reputation":3680,"user_id":4843624,"accept_rate":67,"display_name":"progonkpa"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23515,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":44789237,"answer_count":5,"score":4,"last_activity_date":1663828678,"creation_date":1498589291,"question_id":44787722,"body_markdown":"I want to inject DeMorgenArticleScraper in a test.\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    public class DeMorgenArticleScraperTest {\r\n    \r\n        @Autowired\r\n        private DeMorgenArticleScraper deMorgenArticleScraper;\r\n\r\n        ...\r\n    }\r\n\r\nThe DeMorgenArticleScraper component has some configuration going on for itself, but the IDE/compiler is not complaining about them.\r\n\r\n    @Component\r\n    public class DeMorgenArticleScraper extends NewsPaperArticleScraper {\r\n    \r\n        @Autowired\r\n        public DeMorgenArticleScraper(\r\n                @Qualifier(&quot;deMorgenSelectorContainer&quot;) SelectorContainer selector,\r\n                GenericArticleScraper genericArticleScraper,\r\n                @Qualifier(&quot;deMorgenCompany&quot;) Company company) {\r\n            super(selector, genericArticleScraper, company);\r\n        }\r\n        \r\n        ...\r\n    }\r\n\r\nThe constructor parameters that are annotated with @Qualifier, are defined in a Config.class With @Bean. The class itself has @Configuration. I figure the problem is not situated here.\r\n\r\nThe IDE warns me already, no bean found...autowired members must be defined in a bean. But as far as I know, it is defined in a bean with the @Component annotation. All other bean wiring seems ok as the Spring boot application can start (when I comment out the test class).","title":"Spring boot field injection with autowire not working in JUnit test","body":"<p>I want to inject DeMorgenArticleScraper in a test.</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\npublic class DeMorgenArticleScraperTest {\n\n    @Autowired\n    private DeMorgenArticleScraper deMorgenArticleScraper;\n\n    ...\n}\n</code></pre>\n\n<p>The DeMorgenArticleScraper component has some configuration going on for itself, but the IDE/compiler is not complaining about them.</p>\n\n<pre><code>@Component\npublic class DeMorgenArticleScraper extends NewsPaperArticleScraper {\n\n    @Autowired\n    public DeMorgenArticleScraper(\n            @Qualifier(\"deMorgenSelectorContainer\") SelectorContainer selector,\n            GenericArticleScraper genericArticleScraper,\n            @Qualifier(\"deMorgenCompany\") Company company) {\n        super(selector, genericArticleScraper, company);\n    }\n\n    ...\n}\n</code></pre>\n\n<p>The constructor parameters that are annotated with @Qualifier, are defined in a Config.class With @Bean. The class itself has @Configuration. I figure the problem is not situated here.</p>\n\n<p>The IDE warns me already, no bean found...autowired members must be defined in a bean. But as far as I know, it is defined in a bean with the @Component annotation. All other bean wiring seems ok as the Spring boot application can start (when I comment out the test class).</p>\n"},{"tags":["java","hibernate","jpa","orm","entity"],"comments":[{"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":7,"creation_date":1293020680,"post_id":4509086,"comment_id":4935882,"body_markdown":"The javadoc is very explicit about what they do, and what the differences are. Have you read and understood it?","body":"The javadoc is very explicit about what they do, and what the differences are. Have you read and understood it?"},{"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"score":1,"creation_date":1293020759,"post_id":4509086,"comment_id":4935898,"body_markdown":"Check http://stackoverflow.com/questions/161224/what-are-the-differences-between-the-different-saving-methods-in-hibernate","body":"Check <a href=\"http://stackoverflow.com/questions/161224/what-are-the-differences-between-the-different-saving-methods-in-hibernate\" title=\"what are the differences between the different saving methods in hibernate\">stackoverflow.com/questions/161224/&hellip;</a>"},{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":0,"creation_date":1350049986,"post_id":4509086,"comment_id":17405921,"body_markdown":"http://stackoverflow.com/questions/1069992/jpa-entitymanager-why-use-persist-over-merge","body":"<a href=\"http://stackoverflow.com/questions/1069992/jpa-entitymanager-why-use-persist-over-merge\" title=\"jpa entitymanager why use persist over merge\">stackoverflow.com/questions/1069992/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":36208,"reputation":240316,"user_id":103154,"display_name":"axtavt"},"down_vote_count":1,"up_vote_count":160,"is_accepted":true,"score":159,"last_activity_date":1293022626,"creation_date":1293022626,"answer_id":4509389,"question_id":4509086,"body_markdown":"[JPA specification][1] contains a very precise description of semantics of these operations, better than in javadoc:\r\n\r\n&gt; The semantics of the **persist**\r\n&gt; operation, applied to an entity X are\r\n&gt; as follows: \r\n\r\n&gt; * If X is a new entity, it\r\n&gt; becomes managed. The entity X will be\r\n&gt; entered into the database at or before\r\n&gt; transaction commit or as a result of\r\n&gt; the flush operation.\r\n\r\n&gt; * If X is a\r\n&gt; preexisting managed entity, it is\r\n&gt; ignored by the persist operation.\r\n&gt; However, the persist operation is\r\n&gt; cascaded to entities referenced by X,\r\n&gt; if the relationships from X to these\r\n&gt; other entities are annotated with the\r\n&gt; `cascade=PERSIST` or `cascade=ALL`\r\n&gt; annotation element value or specified\r\n&gt; with the equivalent XML descriptor\r\n&gt; element.\r\n\r\n&gt; * If X is a removed entity,\r\n&gt; it becomes managed.\r\n\r\n&gt; * If X is a\r\n&gt; detached object, the\r\n&gt; `EntityExistsException` may be thrown\r\n&gt; when the persist operation is invoked,\r\n&gt; or the `EntityExistsException` or\r\n&gt; another `PersistenceException` may be\r\n&gt; thrown at flush or commit time.\r\n\r\n&gt; * For\r\n&gt; all entities Y referenced by a\r\n&gt; relationship from X, if the\r\n&gt; relationship to Y has been annotated\r\n&gt; with the cascade element value\r\n&gt; `cascade=PERSIST` or `cascade=ALL`, the\r\n&gt; persist operation is applied to Y.\r\n\r\n---\r\n\r\n&gt; The semantics of the **merge** operation\r\n&gt; applied to an entity X are as follows:\r\n\r\n&gt; * If X is a detached entity, the state\r\n&gt; of X is copied onto a pre-existing\r\n&gt; managed entity instance X&#39; of the same\r\n&gt; identity or a new managed copy X&#39; of X\r\n&gt; is created.\r\n\r\n&gt; * If X is a new entity\r\n&gt; instance, a new managed entity\r\n&gt; instance X&#39; is created and the state\r\n&gt; of X is copied into the new managed\r\n&gt; entity instance X&#39;.\r\n\r\n&gt; * If X is a\r\n&gt; removed entity instance, an\r\n&gt; `IllegalArgumentException` will be\r\n&gt; thrown by the merge operation (or the\r\n&gt; transaction commit will fail).\r\n\r\n&gt; * If X\r\n&gt; is a managed entity, it is ignored by\r\n&gt; the merge operation, however, the\r\n&gt; merge operation is cascaded to\r\n&gt; entities referenced by relationships\r\n&gt; from X if these relationships have\r\n&gt; been annotated with the cascade\r\n&gt; element value `cascade=MERGE` or\r\n&gt; `cascade=ALL` annotation.\r\n\r\n&gt; * For all\r\n&gt; entities Y referenced by relationships\r\n&gt; from X having the cascade element\r\n&gt; value `cascade=MERGE` or `cascade=ALL`, Y\r\n&gt; is merged recursively as Y&#39;. For all\r\n&gt; such Y referenced by X, X&#39; is set to\r\n&gt; reference Y&#39;. (Note that if X is\r\n&gt; managed then X is the same object as\r\n&gt; X&#39;.)\r\n\r\n&gt; * If X is an entity merged to X&#39;,\r\n&gt; with a reference to another entity Y,\r\n&gt; where `cascade=MERGE` or `cascade=ALL` is\r\n&gt; not specified, then navigation of the\r\n&gt; same association from X&#39; yields a\r\n&gt; reference to a managed object Y&#39; with\r\n&gt; the same persistent identity as Y.\r\n\r\n\r\n  [1]: http://www.jcp.org/en/jsr/detail?id=317","title":"What is the difference between persist() and merge() in JPA and Hibernate?","body":"<p><a href=\"http://www.jcp.org/en/jsr/detail?id=317\" rel=\"noreferrer\">JPA specification</a> contains a very precise description of semantics of these operations, better than in javadoc:</p>\n\n<blockquote>\n  <p>The semantics of the <strong>persist</strong>\n  operation, applied to an entity X are\n  as follows: </p>\n  \n  <ul>\n  <li><p>If X is a new entity, it\n  becomes managed. The entity X will be\n  entered into the database at or before\n  transaction commit or as a result of\n  the flush operation.</p></li>\n  <li><p>If X is a\n  preexisting managed entity, it is\n  ignored by the persist operation.\n  However, the persist operation is\n  cascaded to entities referenced by X,\n  if the relationships from X to these\n  other entities are annotated with the\n  <code>cascade=PERSIST</code> or <code>cascade=ALL</code>\n  annotation element value or specified\n  with the equivalent XML descriptor\n  element.</p></li>\n  <li><p>If X is a removed entity,\n  it becomes managed.</p></li>\n  <li><p>If X is a\n  detached object, the\n  <code>EntityExistsException</code> may be thrown\n  when the persist operation is invoked,\n  or the <code>EntityExistsException</code> or\n  another <code>PersistenceException</code> may be\n  thrown at flush or commit time.</p></li>\n  <li><p>For\n  all entities Y referenced by a\n  relationship from X, if the\n  relationship to Y has been annotated\n  with the cascade element value\n  <code>cascade=PERSIST</code> or <code>cascade=ALL</code>, the\n  persist operation is applied to Y.</p></li>\n  </ul>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>The semantics of the <strong>merge</strong> operation\n  applied to an entity X are as follows:</p>\n  \n  <ul>\n  <li><p>If X is a detached entity, the state\n  of X is copied onto a pre-existing\n  managed entity instance X' of the same\n  identity or a new managed copy X' of X\n  is created.</p></li>\n  <li><p>If X is a new entity\n  instance, a new managed entity\n  instance X' is created and the state\n  of X is copied into the new managed\n  entity instance X'.</p></li>\n  <li><p>If X is a\n  removed entity instance, an\n  <code>IllegalArgumentException</code> will be\n  thrown by the merge operation (or the\n  transaction commit will fail).</p></li>\n  <li><p>If X\n  is a managed entity, it is ignored by\n  the merge operation, however, the\n  merge operation is cascaded to\n  entities referenced by relationships\n  from X if these relationships have\n  been annotated with the cascade\n  element value <code>cascade=MERGE</code> or\n  <code>cascade=ALL</code> annotation.</p></li>\n  <li><p>For all\n  entities Y referenced by relationships\n  from X having the cascade element\n  value <code>cascade=MERGE</code> or <code>cascade=ALL</code>, Y\n  is merged recursively as Y'. For all\n  such Y referenced by X, X' is set to\n  reference Y'. (Note that if X is\n  managed then X is the same object as\n  X'.)</p></li>\n  <li><p>If X is an entity merged to X',\n  with a reference to another entity Y,\n  where <code>cascade=MERGE</code> or <code>cascade=ALL</code> is\n  not specified, then navigation of the\n  same association from X' yields a\n  reference to a managed object Y' with\n  the same persistent identity as Y.</p></li>\n  </ul>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1489715,"reputation":2281,"user_id":1397115,"accept_rate":67,"display_name":"Krystian"},"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1582015469,"creation_date":1446640839,"answer_id":33522221,"question_id":4509086,"body_markdown":"This is coming from `JPA`. In a very simple way:\r\n\r\n - `persist(entity)` should be used with totally new entities, to add them to DB (if entity already exists in DB there will be EntityExistsException throw). \r\n\r\n - `merge(entity)` should be used, to put entity back to persistence context if the entity was detached and was changed.\r\n\r\n\r\n\r\n","title":"What is the difference between persist() and merge() in JPA and Hibernate?","body":"<p>This is coming from <code>JPA</code>. In a very simple way:</p>\n\n<ul>\n<li><p><code>persist(entity)</code> should be used with totally new entities, to add them to DB (if entity already exists in DB there will be EntityExistsException throw). </p></li>\n<li><p><code>merge(entity)</code> should be used, to put entity back to persistence context if the entity was detached and was changed.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1610205522,"creation_date":1468917343,"answer_id":38453369,"question_id":4509086,"body_markdown":"Persist should be called only on new entities, while `merge` is meant to reattach detached entities.\r\n\r\nIf you&#39;re using the assigned generator, using `merge` instead of `persist` can cause a redundant SQL statement.\r\n\r\nAlso, calling merge for managed entities is also a mistake since managed entities are automatically managed by Hibernate, and their state is synchronized with the database record by the dirty checking mechanism upon flushing the Persistence Context. \r\n","title":"What is the difference between persist() and merge() in JPA and Hibernate?","body":"<p>Persist should be called only on new entities, while <code>merge</code> is meant to reattach detached entities.</p>\n<p>If you're using the assigned generator, using <code>merge</code> instead of <code>persist</code> can cause a redundant SQL statement.</p>\n<p>Also, calling merge for managed entities is also a mistake since managed entities are automatically managed by Hibernate, and their state is synchronized with the database record by the dirty checking mechanism upon flushing the Persistence Context.</p>\n"},{"tags":[],"owner":{"account_id":8213997,"reputation":78,"user_id":6181070,"display_name":"Od Chan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663828641,"creation_date":1555502138,"answer_id":55727038,"question_id":4509086,"body_markdown":"The most important difference is this:\r\n\r\n - In case of the `persist` method, if the entity that is to be managed in the persistence context, already exists in the persistence context, the new one is ignored. (Basically, NOTHING happens)\r\n\r\n - But in case of the `merge` method, the entity that is already managed in the persistence context will be replaced by the new entity (Simply, it gets updated) and a copy of this updated entity will then return back. (So from now on any changes should be made to this returned entity if you want to reflect your changes in the persistence context)\r\n\r\n","title":"What is the difference between persist() and merge() in JPA and Hibernate?","body":"<p>The most important difference is this:</p>\n<ul>\n<li><p>In case of the <code>persist</code> method, if the entity that is to be managed in the persistence context, already exists in the persistence context, the new one is ignored. (Basically, NOTHING happens)</p>\n</li>\n<li><p>But in case of the <code>merge</code> method, the entity that is already managed in the persistence context will be replaced by the new entity (Simply, it gets updated) and a copy of this updated entity will then return back. (So from now on any changes should be made to this returned entity if you want to reflect your changes in the persistence context)</p>\n</li>\n</ul>\n"}],"owner":{"account_id":250714,"reputation":1479,"user_id":527601,"accept_rate":74,"display_name":"Jimit Tank"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":186871,"favorite_count":0,"down_vote_count":0,"up_vote_count":134,"accepted_answer_id":4509389,"answer_count":4,"score":134,"last_activity_date":1663828641,"creation_date":1293020422,"question_id":4509086,"body_markdown":"What is the difference between persist() and merge() in Hibernate?\r\n\r\n`persist()` can create a UPDATE &amp; INSERT query, eg:\r\n\r\n    SessionFactory sef = cfg.buildSessionFactory();\r\n    Session session = sef.openSession();\r\n    A a=new A();\r\n    session.persist(a);\r\n    a.setName(&quot;Mario&quot;);\r\n    session.flush();\r\n\r\nin this case **query** will be generated like this:\r\n\r\n    Hibernate: insert into A (NAME, ID) values (?, ?)\r\n    Hibernate: update A set NAME=? where ID=?\r\n\r\nso `persist()` method can **generate** an Insert and an Update.\r\n\r\nNow with `merge()`:\r\n\r\n    SessionFactory sef = cfg.buildSessionFactory();\r\n    Session session = sef.openSession();\r\n    Singer singer = new Singer();\r\n    singer.setName(&quot;Luciano Pavarotti&quot;);\r\n    session.merge(singer);\r\n    session.flush();\r\n\r\nThis is what I see in the database:\r\n\r\n    SINGER_ID\tSINGER_NAME\r\n    1\t        Ricky Martin\r\n    2\t        Madonna\r\n    3\t        Elvis Presley\r\n    4\t        Luciano Pavarotti\r\n\r\nNow update a record using `merge()`\r\n        \r\n    SessionFactory sef = cfg.buildSessionFactory();\r\n    Session session = sef.openSession();\r\n    Singer singer = new Singer();\r\n    singer.setId(2);\r\n    singer.setName(&quot;Luciano Pavarotti&quot;);\r\n    session.merge(singer);\r\n    session.flush();\r\n\r\nThis is what I see in the database:\r\n\r\n    SINGER_ID\tSINGER_NAME\r\n    1\t        Ricky Martin\r\n    2\t        Luciano Pavarotti\r\n    3\t        Elvis Presley\r\n","title":"What is the difference between persist() and merge() in JPA and Hibernate?","body":"<p>What is the difference between persist() and merge() in Hibernate?</p>\n\n<p><code>persist()</code> can create a UPDATE &amp; INSERT query, eg:</p>\n\n<pre><code>SessionFactory sef = cfg.buildSessionFactory();\nSession session = sef.openSession();\nA a=new A();\nsession.persist(a);\na.setName(\"Mario\");\nsession.flush();\n</code></pre>\n\n<p>in this case <strong>query</strong> will be generated like this:</p>\n\n<pre><code>Hibernate: insert into A (NAME, ID) values (?, ?)\nHibernate: update A set NAME=? where ID=?\n</code></pre>\n\n<p>so <code>persist()</code> method can <strong>generate</strong> an Insert and an Update.</p>\n\n<p>Now with <code>merge()</code>:</p>\n\n<pre><code>SessionFactory sef = cfg.buildSessionFactory();\nSession session = sef.openSession();\nSinger singer = new Singer();\nsinger.setName(\"Luciano Pavarotti\");\nsession.merge(singer);\nsession.flush();\n</code></pre>\n\n<p>This is what I see in the database:</p>\n\n<pre><code>SINGER_ID   SINGER_NAME\n1           Ricky Martin\n2           Madonna\n3           Elvis Presley\n4           Luciano Pavarotti\n</code></pre>\n\n<p>Now update a record using <code>merge()</code></p>\n\n<pre><code>SessionFactory sef = cfg.buildSessionFactory();\nSession session = sef.openSession();\nSinger singer = new Singer();\nsinger.setId(2);\nsinger.setName(\"Luciano Pavarotti\");\nsession.merge(singer);\nsession.flush();\n</code></pre>\n\n<p>This is what I see in the database:</p>\n\n<pre><code>SINGER_ID   SINGER_NAME\n1           Ricky Martin\n2           Luciano Pavarotti\n3           Elvis Presley\n</code></pre>\n"},{"tags":["java","tomcat","google-cloud-platform","google-compute-engine","centos7"],"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1536584324,"post_id":52258329,"comment_id":91463893,"body_markdown":"A) dont link to **pictures** of content that is text. All of the relevant information should come as [mcve], and nicely formatted/indented text with your question B) I then think that your question might be better suited for segfault.com You are asking how to configure your server setup. This isn&#39;t really a programming question.","body":"A) dont link to <b>pictures</b> of content that is text. All of the relevant information should come as <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, and nicely formatted/indented text with your question B) I then think that your question might be better suited for segfault.com You are asking how to configure your server setup. This isn&#39;t really a programming question."},{"owner":{"account_id":2232270,"reputation":3813,"user_id":2351110,"display_name":"mattmess1221"},"score":0,"creation_date":1536584422,"post_id":52258329,"comment_id":91463954,"body_markdown":"This is something that a lot of cloud hosts do. Check your environment variables for something like `PORT`.","body":"This is something that a lot of cloud hosts do. Check your environment variables for something like <code>PORT</code>."},{"owner":{"account_id":4404219,"reputation":145,"user_id":3589086,"display_name":"Asanka Anthony"},"score":0,"creation_date":1536584592,"post_id":52258329,"comment_id":91464063,"body_markdown":"Where can i check something like PORT in cloud engine?","body":"Where can i check something like PORT in cloud engine?"},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1536585470,"post_id":52258329,"comment_id":91464709,"body_markdown":"`java.net.SocketException: Permission denied`, users can&#39;t open ports below 1024, only root can.","body":"<code>java.net.SocketException: Permission denied</code>, users can&#39;t open ports below 1024, only root can."},{"owner":{"account_id":7671907,"reputation":2141,"user_id":5813861,"accept_rate":50,"display_name":"yash"},"score":0,"creation_date":1536592709,"post_id":52258329,"comment_id":91469339,"body_markdown":"Possible duplicate of [google cloud platform: cannot start java https server](https://stackoverflow.com/questions/46356163/google-cloud-platform-cannot-start-java-https-server)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/46356163/google-cloud-platform-cannot-start-java-https-server\">google cloud platform: cannot start java https server</a>"},{"owner":{"account_id":4443235,"reputation":866,"user_id":3617261,"display_name":"peja"},"score":0,"creation_date":1608483222,"post_id":52258329,"comment_id":115592113,"body_markdown":"you should try with sudo","body":"you should try with sudo"}],"answers":[{"tags":[],"owner":{"account_id":12788284,"reputation":2496,"user_id":9253778,"display_name":"dany L"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536589022,"creation_date":1536589022,"answer_id":52259814,"question_id":52258329,"body_markdown":"A community member previously had a similar [issue](https://stackoverflow.com/questions/48177453/tomcat-8-running-but-refused-to-connect). He was able to [fix](https://wolfpaulus.com/java/tomcat-ssl/) his issue by running this command:\r\n\r\n    sudo setcap cap_net_bind_service+ep /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java","title":"Unable to start tomcat with 80 port in Google Compute Engine","body":"<p>A community member previously had a similar <a href=\"https://stackoverflow.com/questions/48177453/tomcat-8-running-but-refused-to-connect\">issue</a>. He was able to <a href=\"https://wolfpaulus.com/java/tomcat-ssl/\" rel=\"nofollow noreferrer\">fix</a> his issue by running this command:</p>\n\n<pre><code>sudo setcap cap_net_bind_service+ep /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7671907,"reputation":2141,"user_id":5813861,"accept_rate":50,"display_name":"yash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1536593050,"creation_date":1536593050,"answer_id":52261023,"question_id":52258329,"body_markdown":"As said over [here][1] by @gdahlm,\r\n\r\nPorts below 1024 on linux/Unix are &quot;privileged ports&quot;, which require elevated privileges to create.\r\n\r\nAs you are in GCP (Google Cloud Platform), you have several options.\r\n\r\nUse a high port above 1024 as a non-privlaged user and:\r\n\r\n - Connect to that high port in your url https://foo:8443 \r\n - Use the GCP\r\n   network or HTTP/HTTPS load balancer to forward port 443 to a high\r\n   port \r\n - Leverage IP tables to forward packets from 443 to a high port\r\n   inside the VM instance \r\n - Run the service using suid, sudo or other\r\n   method \r\n - Grant the _CAP_NET_BIND_SERVICE_ capabilities(7) to the\r\n   process. &lt;br/&gt;\r\n\r\nThose last two options have complex security implications\r\n   and should be avoided if at all possible.\r\n\r\n  [1]: https://stackoverflow.com/a/46357383/5813861","title":"Unable to start tomcat with 80 port in Google Compute Engine","body":"<p>As said over <a href=\"https://stackoverflow.com/a/46357383/5813861\">here</a> by @gdahlm,</p>\n\n<p>Ports below 1024 on linux/Unix are \"privileged ports\", which require elevated privileges to create.</p>\n\n<p>As you are in GCP (Google Cloud Platform), you have several options.</p>\n\n<p>Use a high port above 1024 as a non-privlaged user and:</p>\n\n<ul>\n<li>Connect to that high port in your url <a href=\"https://foo:8443\" rel=\"nofollow noreferrer\">https://foo:8443</a> </li>\n<li>Use the GCP\nnetwork or HTTP/HTTPS load balancer to forward port 443 to a high\nport </li>\n<li>Leverage IP tables to forward packets from 443 to a high port\ninside the VM instance </li>\n<li>Run the service using suid, sudo or other\nmethod </li>\n<li>Grant the _CAP_NET_BIND_SERVICE_ capabilities(7) to the\nprocess. <br/></li>\n</ul>\n\n<p>Those last two options have complex security implications\n   and should be avoided if at all possible.</p>\n"},{"tags":[],"owner":{"account_id":26359029,"reputation":11,"user_id":20015565,"display_name":"Fernando Souza"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663828426,"creation_date":1663359950,"answer_id":73750015,"question_id":52258329,"body_markdown":"Heres the command i used for iptables to forward port 80 to 8080:\r\n\r\n    iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-port 8080\r\n\r\ndon&#39;t forget to do the same for 443","title":"Unable to start tomcat with 80 port in Google Compute Engine","body":"<p>Heres the command i used for iptables to forward port 80 to 8080:</p>\n<pre><code>iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-port 8080\n</code></pre>\n<p>don't forget to do the same for 443</p>\n"}],"owner":{"account_id":4404219,"reputation":145,"user_id":3589086,"display_name":"Asanka Anthony"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1192,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":52261023,"answer_count":3,"score":1,"last_activity_date":1663828426,"creation_date":1536584195,"question_id":52258329,"body_markdown":"I used Google Compute Engine instance with CentOS7 and Tomcat 8.Tomcat server works fine with port 8080 but socket exception occurred when i change port to 80.\r\nTomcat exception is,\r\n\r\n    org.apache.catalina.LifecycleException: Failed to initialize component [Connector[HTTP/1.1-80]]\r\n            at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:112)\r\n            at org.apache.catalina.core.StandardService.initInternal(StandardService.java:552)\r\n            at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)\r\n            at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:875)\r\n            at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)\r\n            at org.apache.catalina.startup.Catalina.load(Catalina.java:632)\r\n            at org.apache.catalina.startup.Catalina.load(Catalina.java:655)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:498)\r\n            at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:309)\r\n            at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:492)\r\n    Caused by: org.apache.catalina.LifecycleException: Protocol handler initialization failed\r\n            at org.apache.catalina.connector.Connector.initInternal(Connector.java:995)\r\n            at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)\r\n            ... 12 more\r\n    Caused by: java.net.SocketException: Permission denied\r\n            at sun.nio.ch.Net.bind0(Native Method)\r\n            at sun.nio.ch.Net.bind(Net.java:433)\r\n            at sun.nio.ch.Net.bind(Net.java:425)\r\n            at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:223)\r\n            at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)\r\n            at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:219)\r\n            at org.apache.tomcat.util.net.AbstractEndpoint.init(AbstractEndpoint.java:1087)\r\n            at org.apache.tomcat.util.net.AbstractJsseEndpoint.init(AbstractJsseEndpoint.java:265)\r\n            at org.apache.coyote.AbstractProtocol.init(AbstractProtocol.java:581)\r\n            at org.apache.coyote.http11.AbstractHttp11Protocol.init(AbstractHttp11Protocol.java:68)\r\n            at org.apache.catalina.connector.Connector.initInternal(Connector.java:993)\r\n\r\nMy firewall roles,\r\n [enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oSQU0.png\r\n\r\nI already followed \r\nhttps://stackoverflow.com/questions/44643758/google-cloud-compute-engine-refuse-outer-access-through-apache2\r\nBut no works.. Please advice .......","title":"Unable to start tomcat with 80 port in Google Compute Engine","body":"<p>I used Google Compute Engine instance with CentOS7 and Tomcat 8.Tomcat server works fine with port 8080 but socket exception occurred when i change port to 80.\nTomcat exception is,</p>\n\n<pre><code>org.apache.catalina.LifecycleException: Failed to initialize component [Connector[HTTP/1.1-80]]\n        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:112)\n        at org.apache.catalina.core.StandardService.initInternal(StandardService.java:552)\n        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)\n        at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:875)\n        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:632)\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:655)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:309)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:492)\nCaused by: org.apache.catalina.LifecycleException: Protocol handler initialization failed\n        at org.apache.catalina.connector.Connector.initInternal(Connector.java:995)\n        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)\n        ... 12 more\nCaused by: java.net.SocketException: Permission denied\n        at sun.nio.ch.Net.bind0(Native Method)\n        at sun.nio.ch.Net.bind(Net.java:433)\n        at sun.nio.ch.Net.bind(Net.java:425)\n        at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:223)\n        at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)\n        at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:219)\n        at org.apache.tomcat.util.net.AbstractEndpoint.init(AbstractEndpoint.java:1087)\n        at org.apache.tomcat.util.net.AbstractJsseEndpoint.init(AbstractJsseEndpoint.java:265)\n        at org.apache.coyote.AbstractProtocol.init(AbstractProtocol.java:581)\n        at org.apache.coyote.http11.AbstractHttp11Protocol.init(AbstractHttp11Protocol.java:68)\n        at org.apache.catalina.connector.Connector.initInternal(Connector.java:993)\n</code></pre>\n\n<p>My firewall roles,\n <a href=\"https://i.stack.imgur.com/oSQU0.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>I already followed \n<a href=\"https://stackoverflow.com/questions/44643758/google-cloud-compute-engine-refuse-outer-access-through-apache2\">Google cloud Compute Engine refuse outer access through apache2</a>\nBut no works.. Please advice .......</p>\n"},{"tags":["java","android","xml","android-studio","android-layout"],"comments":[{"owner":{"account_id":2557581,"reputation":6571,"user_id":2219237,"accept_rate":60,"display_name":"Vasily Kabunov"},"score":0,"creation_date":1651032987,"post_id":72020498,"comment_id":127262751,"body_markdown":"Could you copy all the stacktrace of you crash?","body":"Could you copy all the stacktrace of you crash?"}],"answers":[{"tags":[],"owner":{"account_id":14361048,"reputation":448,"user_id":10373347,"display_name":"Peer Mohamed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652863032,"creation_date":1652863032,"answer_id":72285796,"question_id":72020498,"body_markdown":"This issue is already discussed in the same github library page. Seems like they haven&#39;t found a solution yet.\r\n\r\n[Issue Discussion Page][1]\r\n\r\nHowever, you can use other libraries to get pie chart.\r\n\r\nHere is a [sample code][2]\r\n\r\nReferred from this [page][3]\r\n\r\n\r\n  [1]: https://github.com/lecho/hellocharts-android/issues/86\r\n  [2]: https://github.com/PM1509/Chart-App\r\n  [3]: https://www.tutorialspoint.com/how-to-use-pie-chart-graph-in-android","title":"Error when trying to use a PieChart (hellocharts) on an Activity","body":"<p>This issue is already discussed in the same github library page. Seems like they haven't found a solution yet.</p>\n<p><a href=\"https://github.com/lecho/hellocharts-android/issues/86\" rel=\"nofollow noreferrer\">Issue Discussion Page</a></p>\n<p>However, you can use other libraries to get pie chart.</p>\n<p>Here is a <a href=\"https://github.com/PM1509/Chart-App\" rel=\"nofollow noreferrer\">sample code</a></p>\n<p>Referred from this <a href=\"https://www.tutorialspoint.com/how-to-use-pie-chart-graph-in-android\" rel=\"nofollow noreferrer\">page</a></p>\n"},{"tags":[],"owner":{"account_id":24522852,"reputation":26,"user_id":18435634,"display_name":"Vikram Chougule"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663827653,"creation_date":1663327340,"answer_id":73744050,"question_id":72020498,"body_markdown":"I was facing the same issue with some similar library. Later found that \r\njust implementing library is not enough. You sometimes have to add few addon lines to our project settings files as per requirement. (e.g. `gradle.properties`, `settings.gradle`,... etc).\r\n\r\nFollowing helped me :)\r\n\r\n**android.enableJetifier=true** to *gradle.properties* file","title":"Error when trying to use a PieChart (hellocharts) on an Activity","body":"<p>I was facing the same issue with some similar library. Later found that\njust implementing library is not enough. You sometimes have to add few addon lines to our project settings files as per requirement. (e.g. <code>gradle.properties</code>, <code>settings.gradle</code>,... etc).</p>\n<p>Following helped me :)</p>\n<p><strong>android.enableJetifier=true</strong> to <em>gradle.properties</em> file</p>\n"}],"owner":{"account_id":16416701,"reputation":241,"user_id":11858729,"display_name":"&#193;lvaro S&#225;nchez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":459,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1663827653,"creation_date":1651006961,"question_id":72020498,"body_markdown":"I&#39;m trying to use the external library &quot;hellocharts&quot; in my project. I have linked the library to my project already, but when the activity that has the chart starts, the whole app crash with the exception: &quot;Error inflating class lecho.lib.hellocharts.view.PieChartView&quot;.\r\n\r\nI don&#39;t know what the problem can be. The java class (when I use the Charts) don&#39;t seem to have that problem (it doesn&#39;t get compile errors of not finding the library).\r\n\r\nHere it is the .xml file of the activity\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:orientation=&quot;vertical&quot;&gt;\r\n        &lt;HorizontalScrollView\r\n            android:id=&quot;@+id/horizontalScrollView&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;80dp&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\r\n    \r\n            &lt;LinearLayout\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n                &lt;Button\r\n                    android:id=&quot;@+id/Dia&quot;\r\n                    style=&quot;@android:style/Widget.Button&quot;\r\n                    android:layout_width=&quot;80dp&quot;\r\n                    android:layout_height=&quot;80dp&quot;\r\n                    android:layout_marginBottom=&quot;8dp&quot;\r\n                    android:text=&quot;Dia&quot; /&gt;\r\n    \r\n                &lt;Button\r\n                    android:id=&quot;@+id/Semana&quot;\r\n                    style=&quot;@android:style/Widget.Button&quot;\r\n                    android:layout_width=&quot;80dp&quot;\r\n                    android:layout_height=&quot;80dp&quot;\r\n                    android:text=&quot;Semana&quot; /&gt;\r\n    \r\n                &lt;Button\r\n                    android:id=&quot;@+id/Mes&quot;\r\n                    style=&quot;@android:style/Widget.Button&quot;\r\n                    android:layout_width=&quot;80dp&quot;\r\n                    android:layout_height=&quot;80dp&quot;\r\n                    android:text=&quot;Mes&quot; /&gt;\r\n    \r\n                &lt;Button\r\n                    android:id=&quot;@+id/Temporizador&quot;\r\n                    style=&quot;@android:style/Widget.Button&quot;\r\n                    android:layout_width=&quot;80dp&quot;\r\n                    android:layout_height=&quot;80dp&quot;\r\n                    android:text=&quot;Temp&quot; /&gt;\r\n    \r\n                &lt;Button\r\n                    android:id=&quot;@+id/Estadisticas&quot;\r\n                    style=&quot;@android:style/Widget.Button&quot;\r\n                    android:layout_width=&quot;80dp&quot;\r\n                    android:layout_height=&quot;80dp&quot;\r\n                    android:text=&quot;Stats&quot; /&gt;\r\n    \r\n                &lt;Button\r\n                    android:id=&quot;@+id/Tienda&quot;\r\n                    style=&quot;@android:style/Widget.Button&quot;\r\n                    android:layout_width=&quot;80dp&quot;\r\n                    android:layout_height=&quot;80dp&quot;\r\n                    android:text=&quot;Tienda&quot; /&gt;\r\n            &lt;/LinearLayout&gt;\r\n        &lt;/HorizontalScrollView&gt;\r\n    \r\n        &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n            &lt;lecho.lib.hellocharts.view.PieChartView\r\n                android:id=&quot;@+id/graphic_pie_chart&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;500dp&quot;\r\n                app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                app:layout_constraintHorizontal_bias=&quot;0.0&quot;\r\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n                app:layout_constraintVertical_bias=&quot;0.826&quot; /&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/tv_asignatura&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:textSize=&quot;28sp&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                app:layout_constraintBottom_toTopOf=&quot;@+id/graphic_pie_chart&quot;\r\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                app:layout_constraintStart_toStartOf=&quot;@+id/graphic_pie_chart&quot;\r\n                app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n                app:layout_constraintVertical_bias=&quot;0.3&quot; /&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/tv_tiempo&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:textSize=&quot;20sp&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                app:layout_constraintBottom_toTopOf=&quot;@+id/graphic_pie_chart&quot;\r\n                app:layout_constraintEnd_toEndOf=&quot;@+id/tv_asignatura&quot;\r\n                app:layout_constraintStart_toStartOf=&quot;@+id/tv_asignatura&quot;\r\n                app:layout_constraintTop_toBottomOf=&quot;@+id/tv_asignatura&quot;\r\n                app:layout_constraintVertical_bias=&quot;0.45&quot; /&gt;\r\n    \r\n        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n    \r\n    \r\n    \r\n    &lt;/LinearLayout&gt;\r\n\r\nAnd here it is the gradle files\r\n\r\n    plugins {\r\n        id &#39;com.android.application&#39;\r\n    }\r\n    \r\n    android {\r\n        compileSdkVersion 31\r\n    \r\n        defaultConfig {\r\n            applicationId &quot;es.ucm&quot;\r\n            minSdkVersion 26\r\n            targetSdkVersion 31\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n    \r\n            testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n        }\r\n    \r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n        compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_1_8\r\n            targetCompatibility JavaVersion.VERSION_1_8\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n    \r\n        implementation &#39;androidx.appcompat:appcompat:1.4.1&#39;\r\n        implementation &#39;com.google.android.material:material:1.5.0&#39;\r\n        implementation &#39;androidx.constraintlayout:constraintlayout:2.1.3&#39;\r\n        testImplementation &#39;junit:junit:4.+&#39;\r\n        androidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n        androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n        implementation &#39;com.github.lecho:hellocharts-library:1.5.8@aar&#39;\r\n    }\r\n\r\n    // Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n    buildscript {\r\n        repositories {\r\n            google()\r\n            mavenCentral()\r\n        }\r\n        dependencies {\r\n            classpath &quot;com.android.tools.build:gradle:4.2.2&quot;\r\n    \r\n            // NOTE: Do not place your application dependencies here; they belong\r\n            // in the individual module build.gradle files\r\n        }\r\n    }\r\n    \r\n    allprojects {\r\n        repositories {\r\n            google()\r\n            mavenCentral()\r\n            jcenter()// Warning: this repository is going to shut down soon\r\n    \r\n        }\r\n    }\r\n    \r\n    task clean(type: Delete) {\r\n        delete rootProject.buildDir\r\n    }","title":"Error when trying to use a PieChart (hellocharts) on an Activity","body":"<p>I'm trying to use the external library &quot;hellocharts&quot; in my project. I have linked the library to my project already, but when the activity that has the chart starts, the whole app crash with the exception: &quot;Error inflating class lecho.lib.hellocharts.view.PieChartView&quot;.</p>\n<p>I don't know what the problem can be. The java class (when I use the Charts) don't seem to have that problem (it doesn't get compile errors of not finding the library).</p>\n<p>Here it is the .xml file of the activity</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;&gt;\n    &lt;HorizontalScrollView\n        android:id=&quot;@+id/horizontalScrollView&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;80dp&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\n\n        &lt;LinearLayout\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;match_parent&quot;&gt;\n\n            &lt;Button\n                android:id=&quot;@+id/Dia&quot;\n                style=&quot;@android:style/Widget.Button&quot;\n                android:layout_width=&quot;80dp&quot;\n                android:layout_height=&quot;80dp&quot;\n                android:layout_marginBottom=&quot;8dp&quot;\n                android:text=&quot;Dia&quot; /&gt;\n\n            &lt;Button\n                android:id=&quot;@+id/Semana&quot;\n                style=&quot;@android:style/Widget.Button&quot;\n                android:layout_width=&quot;80dp&quot;\n                android:layout_height=&quot;80dp&quot;\n                android:text=&quot;Semana&quot; /&gt;\n\n            &lt;Button\n                android:id=&quot;@+id/Mes&quot;\n                style=&quot;@android:style/Widget.Button&quot;\n                android:layout_width=&quot;80dp&quot;\n                android:layout_height=&quot;80dp&quot;\n                android:text=&quot;Mes&quot; /&gt;\n\n            &lt;Button\n                android:id=&quot;@+id/Temporizador&quot;\n                style=&quot;@android:style/Widget.Button&quot;\n                android:layout_width=&quot;80dp&quot;\n                android:layout_height=&quot;80dp&quot;\n                android:text=&quot;Temp&quot; /&gt;\n\n            &lt;Button\n                android:id=&quot;@+id/Estadisticas&quot;\n                style=&quot;@android:style/Widget.Button&quot;\n                android:layout_width=&quot;80dp&quot;\n                android:layout_height=&quot;80dp&quot;\n                android:text=&quot;Stats&quot; /&gt;\n\n            &lt;Button\n                android:id=&quot;@+id/Tienda&quot;\n                style=&quot;@android:style/Widget.Button&quot;\n                android:layout_width=&quot;80dp&quot;\n                android:layout_height=&quot;80dp&quot;\n                android:text=&quot;Tienda&quot; /&gt;\n        &lt;/LinearLayout&gt;\n    &lt;/HorizontalScrollView&gt;\n\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;&gt;\n\n        &lt;lecho.lib.hellocharts.view.PieChartView\n            android:id=&quot;@+id/graphic_pie_chart&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;500dp&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintHorizontal_bias=&quot;0.0&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\n            app:layout_constraintVertical_bias=&quot;0.826&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/tv_asignatura&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:textSize=&quot;28sp&quot;\n            android:textStyle=&quot;bold&quot;\n            android:layout_gravity=&quot;center&quot;\n            app:layout_constraintBottom_toTopOf=&quot;@+id/graphic_pie_chart&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;@+id/graphic_pie_chart&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\n            app:layout_constraintVertical_bias=&quot;0.3&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/tv_tiempo&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:textSize=&quot;20sp&quot;\n            android:layout_gravity=&quot;center&quot;\n            app:layout_constraintBottom_toTopOf=&quot;@+id/graphic_pie_chart&quot;\n            app:layout_constraintEnd_toEndOf=&quot;@+id/tv_asignatura&quot;\n            app:layout_constraintStart_toStartOf=&quot;@+id/tv_asignatura&quot;\n            app:layout_constraintTop_toBottomOf=&quot;@+id/tv_asignatura&quot;\n            app:layout_constraintVertical_bias=&quot;0.45&quot; /&gt;\n\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>And here it is the gradle files</p>\n<pre><code>plugins {\n    id 'com.android.application'\n}\n\nandroid {\n    compileSdkVersion 31\n\n    defaultConfig {\n        applicationId &quot;es.ucm&quot;\n        minSdkVersion 26\n        targetSdkVersion 31\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.4.1'\n    implementation 'com.google.android.material:material:1.5.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.3'\n    testImplementation 'junit:junit:4.+'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n    implementation 'com.github.lecho:hellocharts-library:1.5.8@aar'\n}\n\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\nbuildscript {\n    repositories {\n        google()\n        mavenCentral()\n    }\n    dependencies {\n        classpath &quot;com.android.tools.build:gradle:4.2.2&quot;\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        mavenCentral()\n        jcenter()// Warning: this repository is going to shut down soon\n\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n"},{"tags":["java","maven","kotlin","gradle","maven-publish"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":1,"creation_date":1642175331,"post_id":70709989,"comment_id":125008527,"body_markdown":"Can you show where you declared the dependency?","body":"Can you show where you declared the dependency?"},{"owner":{"account_id":232352,"reputation":16522,"user_id":497132,"accept_rate":75,"display_name":"artem"},"score":0,"creation_date":1642176429,"post_id":70709989,"comment_id":125009011,"body_markdown":"@Tenfour04 module&#39;s `build.gradle.kts` -&gt; `dependencies` -&gt; `api(&quot;com.example.path:common-core:0.0.1&quot;)`","body":"@Tenfour04 module&#39;s <code>build.gradle.kts</code> -&gt; <code>dependencies</code> -&gt; <code>api(&quot;com.example.path:common-core:0.0.1&quot;)</code>"},{"owner":{"account_id":232352,"reputation":16522,"user_id":497132,"accept_rate":75,"display_name":"artem"},"score":0,"creation_date":1642176603,"post_id":70709989,"comment_id":125009087,"body_markdown":"@Tenfour04 btw should POM file contain information about sources and javadoc jar?","body":"@Tenfour04 btw should POM file contain information about sources and javadoc jar?"},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1642178715,"post_id":70709989,"comment_id":125009938,"body_markdown":"From browsing some public POMs, I don&#39;t think so. Not an expert on that. I&#39;m not sure what could cause your problem.","body":"From browsing some public POMs, I don&#39;t think so. Not an expert on that. I&#39;m not sure what could cause your problem."},{"owner":{"account_id":19125636,"reputation":7406,"user_id":13968673,"display_name":"Михаил Нафталь"},"score":0,"creation_date":1642187725,"post_id":70709989,"comment_id":125013262,"body_markdown":"Could you run it with `--debug` key? What exact URL it&#39;s trying (and failing) to access?","body":"Could you run it with <code>--debug</code> key? What exact URL it&#39;s trying (and failing) to access?"},{"owner":{"account_id":232352,"reputation":16522,"user_id":497132,"accept_rate":75,"display_name":"artem"},"score":0,"creation_date":1642189490,"post_id":70709989,"comment_id":125013841,"body_markdown":"@МихаилНафталь well with `--debug` I see the following: `[INFO] [org.gradle.internal.resource.transport.http.HttpClientHelper] Resource missing. [HTTP GET: repo.replaced-domain.com/mvn/replaced/replaced/com/example/path/common-core/0.0.1@aar/common-core-0.0.1@aar.pom]`. If I remove `@aar` it becomes a valid URL for the POM.","body":"@МихаилНафталь well with <code>--debug</code> I see the following: <code>[INFO] [org.gradle.internal.resource.transport.http.HttpClientHelpe&zwnj;&#8203;r] Resource missing. [HTTP GET: repo.replaced-domain.com&#47;mvn&#47;replaced&#47;replaced&#47;com&#47;example&#47;p&zwnj;&#8203;ath&#47;common-core&#47;0.0.&zwnj;&#8203;1@aar&#47;common-core-0.&zwnj;&#8203;0.1@aar.pom]</code>. If I remove <code>@aar</code> it becomes a valid URL for the POM."},{"owner":{"account_id":19125636,"reputation":7406,"user_id":13968673,"display_name":"Михаил Нафталь"},"score":0,"creation_date":1642195138,"post_id":70709989,"comment_id":125015451,"body_markdown":"where does this `DownloadSources` task come from?","body":"where does this <code>DownloadSources</code> task come from?"},{"owner":{"account_id":19125636,"reputation":7406,"user_id":13968673,"display_name":"Михаил Нафталь"},"score":0,"creation_date":1642195394,"post_id":70709989,"comment_id":125015514,"body_markdown":"Will it work if you add `metadataSources { artifact() }` to your maven repo declaration (it should disable search for pom files, orienting on artifacts layout)? Or it will try to fetch `common-core-0.0.1@aar-sources.jar` in this case?","body":"Will it work if you add <code>metadataSources { artifact() }</code> to your maven repo declaration (it should disable search for pom files, orienting on artifacts layout)? Or it will try to fetch <code>common-core-0.0.1@aar-sources.jar</code> in this case?"},{"owner":{"account_id":232352,"reputation":16522,"user_id":497132,"accept_rate":75,"display_name":"artem"},"score":0,"creation_date":1642202256,"post_id":70709989,"comment_id":125017151,"body_markdown":"@МихаилНафталь if I add `metadataSources { artifact() }`, it fails to resolve the dependency. `DownloadSources` is the (probably synthetic) name of the task when that is launched when I click &#171;Download Sources&#187; in Idea. It doesn&#39;t work for any module from command line, like `./gradlew :core:DownloadSources`","body":"@МихаилНафталь if I add <code>metadataSources { artifact() }</code>, it fails to resolve the dependency. <code>DownloadSources</code> is the (probably synthetic) name of the task when that is launched when I click &#171;Download Sources&#187; in Idea. It doesn&#39;t work for any module from command line, like <code>.&#47;gradlew :core:DownloadSources</code>"},{"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"score":0,"creation_date":1642835735,"post_id":70709989,"comment_id":125182522,"body_markdown":"Variable `extra` is unknown, therefore this is missing debug information; try `project.ext` - or try substituting these variable with strings for a test. In every case, the repository isn&#39;t properly set up.","body":"Variable <code>extra</code> is unknown, therefore this is missing debug information; try <code>project.ext</code> - or try substituting these variable with strings for a test. In every case, the repository isn&#39;t properly set up."},{"owner":{"account_id":4215646,"reputation":193,"user_id":3451956,"display_name":"getacoafeza"},"score":0,"creation_date":1665747500,"post_id":70709989,"comment_id":130775772,"body_markdown":"I have the exact same issue. For some reason the @aar gets placed where it shouldn&#39;t in the URL. Did you get this resolved?","body":"I have the exact same issue. For some reason the @aar gets placed where it shouldn&#39;t in the URL. Did you get this resolved?"}],"answers":[{"tags":[],"owner":{"account_id":3057249,"reputation":1522,"user_id":2590615,"display_name":"de-jcup"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1642498477,"creation_date":1642498477,"answer_id":70753275,"question_id":70709989,"body_markdown":"I am not developing with Android Studio currently, but when looking at your output:\r\n```\r\nSearched in the following locations:\r\n       - https://dl.google.com/dl/android/maven2/com/example/path/common-core/0.0.1@aar/common-core-0.0.1@aar.pom\r\n       - https://repo.maven.apache.org/maven2/com/example/path/common-core/0.0.1@aar/common-core-0.0.1@aar.pom\r\n       - https://jitpack.io/com/example/path/common-core/0.0.1@aar/common-core-0.0.1@aar.pom\r\n       - https://repo.replaced-domain.com/mvn/replaced/replaced/com/example/path/common-core/0.0.1@aar/common-core-0.0.1@aar.pom &lt;-- This is my private repo\r\n```\r\nit seems that the `ext` (extension) part is not correct resolved/calculated.\r\n\r\nMaybe it&#39;s enough when you explicit set `ext` inside your dependencies :\r\n\r\n\r\n```kotlin\r\nbuild.gradle.kts -&gt; dependencies -&gt; {\r\n    api(group=&quot;com.example.path&quot;, name=&quot;common-core&quot;, version=&quot;0.0.1&quot;, ext=&quot;aar&quot;)\r\n}\r\n```\r\n\r\n","title":"IDEA can&#39;t download sources for my library","body":"<p>I am not developing with Android Studio currently, but when looking at your output:</p>\n<pre><code>Searched in the following locations:\n       - https://dl.google.com/dl/android/maven2/com/example/path/common-core/0.0.1@aar/common-core-0.0.1@aar.pom\n       - https://repo.maven.apache.org/maven2/com/example/path/common-core/0.0.1@aar/common-core-0.0.1@aar.pom\n       - https://jitpack.io/com/example/path/common-core/0.0.1@aar/common-core-0.0.1@aar.pom\n       - https://repo.replaced-domain.com/mvn/replaced/replaced/com/example/path/common-core/0.0.1@aar/common-core-0.0.1@aar.pom &lt;-- This is my private repo\n</code></pre>\n<p>it seems that the <code>ext</code> (extension) part is not correct resolved/calculated.</p>\n<p>Maybe it's enough when you explicit set <code>ext</code> inside your dependencies :</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>build.gradle.kts -&gt; dependencies -&gt; {\n    api(group=&quot;com.example.path&quot;, name=&quot;common-core&quot;, version=&quot;0.0.1&quot;, ext=&quot;aar&quot;)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1642510441,"creation_date":1642510441,"answer_id":70755922,"question_id":70709989,"body_markdown":"I have my own library as well, and I suggest to add a classifier in your artifact that specifically downloads sources and Javadoc. Although it is possibly not necessary, it might help in your case - the two last artifacts specifically bring sources and Javadoc:\r\n\r\n    &lt;dependency&gt;\r\n         &lt;groupId&gt;com.github.michaelgantman&lt;/groupId&gt;\r\n         &lt;artifactId&gt;MgntUtils&lt;/artifactId&gt;\r\n         &lt;version&gt;1.6.0.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n     &lt;dependency&gt;\r\n         &lt;groupId&gt;com.github.michaelgantman&lt;/groupId&gt;\r\n         &lt;artifactId&gt;MgntUtils&lt;/artifactId&gt;\r\n         &lt;version&gt;1.6.0.1&lt;/version&gt;\r\n         &lt;classifier&gt;javadoc&lt;/classifier&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n         &lt;groupId&gt;com.github.michaelgantman&lt;/groupId&gt;\r\n         &lt;artifactId&gt;MgntUtils&lt;/artifactId&gt;\r\n         &lt;version&gt;1.6.0.1&lt;/version&gt;\r\n         &lt;classifier&gt;sources&lt;/classifier&gt;\r\n    &lt;/dependency&gt; ","title":"IDEA can&#39;t download sources for my library","body":"<p>I have my own library as well, and I suggest to add a classifier in your artifact that specifically downloads sources and Javadoc. Although it is possibly not necessary, it might help in your case - the two last artifacts specifically bring sources and Javadoc:</p>\n<pre><code>&lt;dependency&gt;\n     &lt;groupId&gt;com.github.michaelgantman&lt;/groupId&gt;\n     &lt;artifactId&gt;MgntUtils&lt;/artifactId&gt;\n     &lt;version&gt;1.6.0.1&lt;/version&gt;\n&lt;/dependency&gt;\n\n &lt;dependency&gt;\n     &lt;groupId&gt;com.github.michaelgantman&lt;/groupId&gt;\n     &lt;artifactId&gt;MgntUtils&lt;/artifactId&gt;\n     &lt;version&gt;1.6.0.1&lt;/version&gt;\n     &lt;classifier&gt;javadoc&lt;/classifier&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n     &lt;groupId&gt;com.github.michaelgantman&lt;/groupId&gt;\n     &lt;artifactId&gt;MgntUtils&lt;/artifactId&gt;\n     &lt;version&gt;1.6.0.1&lt;/version&gt;\n     &lt;classifier&gt;sources&lt;/classifier&gt;\n&lt;/dependency&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":5380666,"reputation":512,"user_id":4285978,"display_name":"Victor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663827589,"creation_date":1663827589,"answer_id":73810142,"question_id":70709989,"body_markdown":"I think it&#39;s a bug in Android Studio.\r\n\r\nhttps://issuetracker.google.com/issues/247991770  \r\nhttps://youtrack.jetbrains.com/issue/IDEA-302178/Cannot-download-sources-for-AAR-dependencies","title":"IDEA can&#39;t download sources for my library","body":"<p>I think it's a bug in Android Studio.</p>\n<p><a href=\"https://issuetracker.google.com/issues/247991770\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/247991770</a><br />\n<a href=\"https://youtrack.jetbrains.com/issue/IDEA-302178/Cannot-download-sources-for-AAR-dependencies\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/IDEA-302178/Cannot-download-sources-for-AAR-dependencies</a></p>\n"}],"owner":{"account_id":232352,"reputation":16522,"user_id":497132,"accept_rate":75,"display_name":"artem"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1870,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":3,"score":9,"last_activity_date":1663827589,"creation_date":1642160159,"question_id":70709989,"body_markdown":"I have a library (my own) in a private maven repo. I ship it there with javadoc and sources:\r\n\r\n[![Repo][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bCScf.png\r\n\r\nIn my app I&#39;ve declared this repo:\r\n\r\n```\r\ndependencyResolutionManagement {\r\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n\r\n        maven {\r\n            url = uri(&quot;https://jitpack.io&quot;)\r\n        }\r\n        maven { // &lt;- This is my private repo\r\n            credentials {\r\n                username = extra[&quot;mavenUser&quot;] as String\r\n                password = extra[&quot;mavenPassword&quot;] as String\r\n            }\r\n            url = uri(extra[&quot;mavenUrl&quot;] as String)\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIt downloads the aar without any problems, but doesn&#39;t download sources, and when I&#39;m trying to force it by clicking &#171;Download sources&#187; it fails:\r\n\r\n```\r\nExecution failed for task &#39;:app:DownloadSources&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:app:downloadSources_36c7b334-04c2-4099-b66c-2adc137cc95c&#39;.\r\n   &gt; Could not find com.example.path:common-core:0.0.1@aar.\r\n     Searched in the following locations:\r\n       - https://dl.google.com/dl/android/maven2/com/example/path/common-core/0.0.1@aar/common-core-0.0.1@aar.pom\r\n       - https://repo.maven.apache.org/maven2/com/example/path/common-core/0.0.1@aar/common-core-0.0.1@aar.pom\r\n       - https://jitpack.io/com/example/path/common-core/0.0.1@aar/common-core-0.0.1@aar.pom\r\n       - https://repo.replaced-domain.com/mvn/replaced/replaced/com/example/path/common-core/0.0.1@aar/common-core-0.0.1@aar.pom &lt;-- This is my private repo\r\n     Required by:\r\n         project :app\r\n```\r\n\r\n**UPD 1:** If I click &#171;Choose sources&#187; and specify my local sources jar, it just does nothing.\r\n\r\nHow to fix it?","title":"IDEA can&#39;t download sources for my library","body":"<p>I have a library (my own) in a private maven repo. I ship it there with javadoc and sources:</p>\n<p><a href=\"https://i.stack.imgur.com/bCScf.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/bCScf.png\" alt=\"Repo\" /></a></p>\n<p>In my app I've declared this repo:</p>\n<pre><code>dependencyResolutionManagement {\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n\n    repositories {\n        google()\n        mavenCentral()\n\n        maven {\n            url = uri(&quot;https://jitpack.io&quot;)\n        }\n        maven { // &lt;- This is my private repo\n            credentials {\n                username = extra[&quot;mavenUser&quot;] as String\n                password = extra[&quot;mavenPassword&quot;] as String\n            }\n            url = uri(extra[&quot;mavenUrl&quot;] as String)\n        }\n    }\n}\n</code></pre>\n<p>It downloads the aar without any problems, but doesn't download sources, and when I'm trying to force it by clicking «Download sources» it fails:</p>\n<pre><code>Execution failed for task ':app:DownloadSources'.\n&gt; Could not resolve all files for configuration ':app:downloadSources_36c7b334-04c2-4099-b66c-2adc137cc95c'.\n   &gt; Could not find com.example.path:common-core:0.0.1@aar.\n     Searched in the following locations:\n       - https://dl.google.com/dl/android/maven2/com/example/path/common-core/0.0.1@aar/common-core-0.0.1@aar.pom\n       - https://repo.maven.apache.org/maven2/com/example/path/common-core/0.0.1@aar/common-core-0.0.1@aar.pom\n       - https://jitpack.io/com/example/path/common-core/0.0.1@aar/common-core-0.0.1@aar.pom\n       - https://repo.replaced-domain.com/mvn/replaced/replaced/com/example/path/common-core/0.0.1@aar/common-core-0.0.1@aar.pom &lt;-- This is my private repo\n     Required by:\n         project :app\n</code></pre>\n<p><strong>UPD 1:</strong> If I click «Choose sources» and specify my local sources jar, it just does nothing.</p>\n<p>How to fix it?</p>\n"},{"tags":["java","sql","mybatis"],"comments":[{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":0,"creation_date":1663828594,"post_id":73810116,"comment_id":130331737,"body_markdown":"Why you SQL query isn&#39;t working for you?","body":"Why you SQL query isn&#39;t working for you?"},{"owner":{"account_id":22198694,"reputation":23,"user_id":16439717,"display_name":"bobbibrown123"},"score":0,"creation_date":1663831257,"post_id":73810116,"comment_id":130332554,"body_markdown":"the SQL works, but I just want to get a statement that does not have SQL injection vulnerabilities","body":"the SQL works, but I just want to get a statement that does not have SQL injection vulnerabilities"},{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":0,"creation_date":1663832177,"post_id":73810116,"comment_id":130332845,"body_markdown":"Your example (second) is not vulnerable to SQL injections","body":"Your example (second) is not vulnerable to SQL injections"}],"owner":{"account_id":22198694,"reputation":23,"user_id":16439717,"display_name":"bobbibrown123"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663827462,"creation_date":1663827462,"question_id":73810116,"body_markdown":"I have an SQL query taking in a column name from backend. \r\n```\r\nSELECT ${sequenceName}.NEXTVAL FROM DUAL\r\n```\r\nI am doing this in MyBatis, and while usually I&#39;d stick to #{} instead of ${}, in this case i need the string concatanation, so I am unable to prevent SQL injection this way. Is there a solution or method where SQL injection does not occur when I am doing dynamic queries and string substitution for SQL?\r\n\r\nPerhaps something like:\r\n```\r\nSELECT (Select SEQUENCE_NAME from ALL_SEQUENCES where SEQUENCE_NAME = ?).NEXTVAL FROM DUAL\r\n```\r\n?","title":"How to prevent SQL injection when using sequence.NEXTVAL FROM DUAL?","body":"<p>I have an SQL query taking in a column name from backend.</p>\n<pre><code>SELECT ${sequenceName}.NEXTVAL FROM DUAL\n</code></pre>\n<p>I am doing this in MyBatis, and while usually I'd stick to #{} instead of ${}, in this case i need the string concatanation, so I am unable to prevent SQL injection this way. Is there a solution or method where SQL injection does not occur when I am doing dynamic queries and string substitution for SQL?</p>\n<p>Perhaps something like:</p>\n<pre><code>SELECT (Select SEQUENCE_NAME from ALL_SEQUENCES where SEQUENCE_NAME = ?).NEXTVAL FROM DUAL\n</code></pre>\n<p>?</p>\n"},{"tags":["java","pdfbox"],"comments":[{"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"score":1,"creation_date":1663828320,"post_id":73810066,"comment_id":130331635,"body_markdown":"maybe need use some OCR sdk. cause the content of many pdf files is in the form of pictures","body":"maybe need use some OCR sdk. cause the content of many pdf files is in the form of pictures"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1663833707,"post_id":73810066,"comment_id":130333361,"body_markdown":"You can override text stripper methods to retrieve not only text but also its coordinates. That should allow you to recognize those columns.","body":"You can override text stripper methods to retrieve not only text but also its coordinates. That should allow you to recognize those columns."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1663834037,"post_id":73810066,"comment_id":130333467,"body_markdown":"Also consider using various heuristics to determine ( say with pattern length / regex ) to determine which datum is which","body":"Also consider using various heuristics to determine ( say with pattern length / regex ) to determine which datum is which"}],"owner":{"account_id":22960907,"reputation":43,"user_id":17090789,"display_name":"Thomas124124"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663827127,"creation_date":1663827127,"question_id":73810066,"body_markdown":"I&#39;ve got pdf file that looks like it: \r\n[example][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rg6tg.png\r\nIt would be easy if each word of first line would have child in the next one. But sometimes the parents are empty below. I can get whole text from pdf and find those two lines. But if there is break in third column then reading the whole text I lose information if the third word was in forth column or third column. I hope I&#39;ve made it clear, but I would appreciate idea how to read those two lines and connecting them, considering that not each parent has child in next line.","title":"Reading lines in pdf file","body":"<p>I've got pdf file that looks like it:\n<a href=\"https://i.stack.imgur.com/rg6tg.png\" rel=\"nofollow noreferrer\">example</a></p>\n<p>It would be easy if each word of first line would have child in the next one. But sometimes the parents are empty below. I can get whole text from pdf and find those two lines. But if there is break in third column then reading the whole text I lose information if the third word was in forth column or third column. I hope I've made it clear, but I would appreciate idea how to read those two lines and connecting them, considering that not each parent has child in next line.</p>\n"},{"tags":["java","binary-search-tree"],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663827031,"creation_date":1663827031,"answer_id":73810049,"question_id":73807469,"body_markdown":"Assuming your `Node` has a `size` member, you can add a line in this block:\r\n\r\n    midNode.left = balanceTree(tree, first, mid - 1);\r\n    midNode.right = balanceTree(tree, mid + 1, last);\r\n    midNode.size = (midNode.left == null ? 0 : midNode.left.size)\r\n                 + (midNode.right == null ? 0 : midNode.right.size)\r\n                 + 1;\r\n    return midNode;\r\n\r\nUnrelated to your question, but your algorithm is inefficient, as the `get` method on a linked list has O(n) time complexity, making the overall process O(n&#178;). This would however work fine if the input were an *array*(list) that supports direct access by index in constant time.\r\n\r\nIf it has to work efficiently with a linked list, you&#39;ll need an entirely different algorithm, not the divide-and-conquer style of algorithm that you have here.","title":"How do you update node sizes in a BST balancing algorithm?","body":"<p>Assuming your <code>Node</code> has a <code>size</code> member, you can add a line in this block:</p>\n<pre><code>midNode.left = balanceTree(tree, first, mid - 1);\nmidNode.right = balanceTree(tree, mid + 1, last);\nmidNode.size = (midNode.left == null ? 0 : midNode.left.size)\n             + (midNode.right == null ? 0 : midNode.right.size)\n             + 1;\nreturn midNode;\n</code></pre>\n<p>Unrelated to your question, but your algorithm is inefficient, as the <code>get</code> method on a linked list has O(n) time complexity, making the overall process O(n²). This would however work fine if the input were an <em>array</em>(list) that supports direct access by index in constant time.</p>\n<p>If it has to work efficiently with a linked list, you'll need an entirely different algorithm, not the divide-and-conquer style of algorithm that you have here.</p>\n"}],"owner":{"account_id":20079143,"reputation":1,"user_id":14722172,"display_name":"Derpman5000"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663827031,"creation_date":1663798485,"question_id":73807469,"body_markdown":"    public void balance() {\r\n        LinkedList&lt;Node&gt; tree = new LinkedList&lt;Node&gt;();\r\n        sortTree(tree, root);\r\n    root = balanceTree(tree, 0, (size() - 1));\r\n    }\r\n    \r\n    private Node balanceTree(LinkedList&lt;Node&gt; tree, int first, int last) {\r\n        if (first &gt; last) {\r\n            return null;\r\n        }\r\n        int temp = first + last;\r\n        int mid = temp / 2;\r\n        if (temp % 2 == 1) {\r\n            mid++;\r\n        }\r\n        Node midNode = tree.get(mid);\r\n        midNode.left = balanceTree(tree, first, mid - 1);\r\n        midNode.right = balanceTree(tree, mid + 1, last);\r\n        return midNode;\r\n    }\r\n    \r\n    private void sortTree(LinkedList&lt;Node&gt; tree, Node n) {\r\n        if (n == null) {\r\n            return;\r\n        }\r\n        sortTree(tree, n.left);\r\n        tree.add(n);\r\n        sortTree(tree, n.right);\r\n    }\r\nThis properly balances BST&#39;s but it does not update the nodes sizes, can I get some help on where I should be trying to update the node sizes?","title":"How do you update node sizes in a BST balancing algorithm?","body":"<pre><code>public void balance() {\n    LinkedList&lt;Node&gt; tree = new LinkedList&lt;Node&gt;();\n    sortTree(tree, root);\nroot = balanceTree(tree, 0, (size() - 1));\n}\n\nprivate Node balanceTree(LinkedList&lt;Node&gt; tree, int first, int last) {\n    if (first &gt; last) {\n        return null;\n    }\n    int temp = first + last;\n    int mid = temp / 2;\n    if (temp % 2 == 1) {\n        mid++;\n    }\n    Node midNode = tree.get(mid);\n    midNode.left = balanceTree(tree, first, mid - 1);\n    midNode.right = balanceTree(tree, mid + 1, last);\n    return midNode;\n}\n\nprivate void sortTree(LinkedList&lt;Node&gt; tree, Node n) {\n    if (n == null) {\n        return;\n    }\n    sortTree(tree, n.left);\n    tree.add(n);\n    sortTree(tree, n.right);\n}\n</code></pre>\n<p>This properly balances BST's but it does not update the nodes sizes, can I get some help on where I should be trying to update the node sizes?</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":1190755,"reputation":48912,"user_id":1163607,"accept_rate":97,"display_name":"AllTooSir"},"score":0,"creation_date":1374143550,"post_id":17720902,"comment_id":25829179,"body_markdown":"I guess too many connections were opened ! Have you deployed the app in multiple JVMs ?","body":"I guess too many connections were opened ! Have you deployed the app in multiple JVMs ?"},{"owner":{"account_id":2426776,"reputation":373,"user_id":2118536,"accept_rate":80,"display_name":"kavi"},"score":0,"creation_date":1374144198,"post_id":17720902,"comment_id":25829551,"body_markdown":"@The New Idiot thank u for the response. I will check the connections","body":"@The New Idiot thank u for the response. I will check the connections"}],"answers":[{"tags":[],"owner":{"account_id":60096,"reputation":40513,"user_id":179630,"accept_rate":64,"display_name":"gerrytan"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1374148452,"creation_date":1374148452,"answer_id":17722758,"question_id":17720902,"body_markdown":"There are 2 common reason for that symptoms\r\n\r\n - The connection pool is exhausted, too many active connections open and the next client cannot get it. This might be a connection pool leak\r\n - The connection pool setting doesn&#39;t test idle connection periodically / on borrow, hence when TCP connection truncated by OS (eg: because the OS thinks it&#39;s idle doing nothing), the pool still thinks it&#39;s a valid","title":"org.springframework.jdbc.CannotGetJdbcConnectionException","body":"<p>There are 2 common reason for that symptoms</p>\n\n<ul>\n<li>The connection pool is exhausted, too many active connections open and the next client cannot get it. This might be a connection pool leak</li>\n<li>The connection pool setting doesn't test idle connection periodically / on borrow, hence when TCP connection truncated by OS (eg: because the OS thinks it's idle doing nothing), the pool still thinks it's a valid</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":19128190,"reputation":11,"user_id":14041648,"display_name":"Venkata Siva Krishna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663827016,"creation_date":1663827016,"answer_id":73810046,"question_id":17720902,"body_markdown":"To resolve this issue, just **Restart your MySQL service** &lt;br/&gt;\r\n\r\n**How to restart the MySQL service** &lt;br/&gt;\r\nOn Windows: https://www.mysqltutorial.org/mysql-adminsitration/restart-mysql &lt;br/&gt;\r\nOn Linux: &amp;emsp;&amp;ensp; https://linuxhint.com/restart-mysql-in-ubuntu/\r\n","title":"org.springframework.jdbc.CannotGetJdbcConnectionException","body":"<p>To resolve this issue, just <strong>Restart your MySQL service</strong> <br/></p>\n<p><strong>How to restart the MySQL service</strong> <br/>\nOn Windows: <a href=\"https://www.mysqltutorial.org/mysql-adminsitration/restart-mysql\" rel=\"nofollow noreferrer\">https://www.mysqltutorial.org/mysql-adminsitration/restart-mysql</a> <br/>\nOn Linux:    <a href=\"https://linuxhint.com/restart-mysql-in-ubuntu/\" rel=\"nofollow noreferrer\">https://linuxhint.com/restart-mysql-in-ubuntu/</a></p>\n"}],"owner":{"account_id":2426776,"reputation":373,"user_id":2118536,"accept_rate":80,"display_name":"kavi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26233,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":17722758,"answer_count":2,"score":4,"last_activity_date":1663827016,"creation_date":1374143172,"question_id":17720902,"body_markdown":"I am working in spring3 project. When I run my code sometimes i am getting this Jdbc Connection Exception for some particular functionality but other functionalities working very fine. And also this Exception is not occurring repetitively but sometimes, So I can&#39;t get where the mistake will be.\r\nPlease help me to come out of this problem.  \r\n   \r\n\r\n&gt; &lt;[weblogic.servlet.internal.WebAppServletContext@1b6e978 - appName:  &#39;_auto_generated_ear_&#39;, name: &#39;ae&#39;, context-path: &#39;/ae&#39;] Root cause of ServletException.\r\n&gt;  org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is java.sql.SQLException: Listener refused the connection with the following error:\r\nORA-12519, TNS:no appropriate service handler found\r\nThe Connection descriptor used by the client was:\r\nlocalhost:1521:XE at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)\r\n\tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:573)\r\n\tat org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:637)\r\n\tat org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:666)\r\n\tat org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:674)\r\n\tTruncated. see log file for complete stacktrace\r\njava.sql.SQLException: Listener refused the connection with the following error:\r\nORA-12519, TNS:no appropriate service handler found\r\nThe Connection descriptor used by the client was:\r\nlocalhost:1521:XE\r\n\tat oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)\r\n\tat oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:261)\r\n\tat oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:387)\r\n\tat oracle.jdbc.driver.PhysicalConnection.&lt;init&gt;(PhysicalConnection.java:420)\r\n\tat oracle.jdbc.driver.T4CConnection.&lt;init&gt;(T4CConnection.java:165)\r\n\tTruncated. see log file for complete stacktrace\r\n\r\n\r\n\r\n","title":"org.springframework.jdbc.CannotGetJdbcConnectionException","body":"<p>I am working in spring3 project. When I run my code sometimes i am getting this Jdbc Connection Exception for some particular functionality but other functionalities working very fine. And also this Exception is not occurring repetitively but sometimes, So I can't get where the mistake will be.\nPlease help me to come out of this problem.  </p>\n\n<blockquote>\n  <p>&lt;[weblogic.servlet.internal.WebAppServletContext@1b6e978 - appName:  '_auto_generated_ear_', name: 'ae', context-path: '/ae'] Root cause of ServletException.\n   org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is java.sql.SQLException: Listener refused the connection with the following error:\n  ORA-12519, TNS:no appropriate service handler found\n  The Connection descriptor used by the client was:\n  localhost:1521:XE at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)\n      at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:573)\n      at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:637)\n      at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:666)\n      at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:674)\n      Truncated. see log file for complete stacktrace\n  java.sql.SQLException: Listener refused the connection with the following error:\n  ORA-12519, TNS:no appropriate service handler found\n  The Connection descriptor used by the client was:\n  localhost:1521:XE\n      at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)\n      at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:261)\n      at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:387)\n      at oracle.jdbc.driver.PhysicalConnection.(PhysicalConnection.java:420)\n      at oracle.jdbc.driver.T4CConnection.(T4CConnection.java:165)\n      Truncated. see log file for complete stacktrace</p>\n</blockquote>\n"},{"tags":["java","spring","spring-boot","reactive","spring-reactive"],"answers":[{"tags":[],"owner":{"account_id":10346755,"reputation":21971,"user_id":7631480,"display_name":"CryptoFool"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599521805,"creation_date":1599517007,"answer_id":63784892,"question_id":63784829,"body_markdown":"There are a number of things you can do with a `Mono` instead of calling `block`, things that will not block.  One thing you can do is attach a `Consumer` to it that gets called when the `Mono`&#39;s action completes successfully.  The signature of the method to do that (on the `Mono`) is:\r\n\r\n    Mono&lt;T&gt; doOnSuccess(Consumer&lt;? super T&gt; onSuccess)\r\n\r\nSo then you can go on working, and your consumer will get called when the action completes.  That call would then initiate whatever actions you want to have performed after the user is added.\r\n\r\nYou put code in your `Consumer` that writes to the database.  If that object needs information, like a handle to the database to write to, you can hand it that information when you construct the object, before passing it in to the `doOnSuccess` call. - \r\n","title":"How to get User object from Mono&lt;User&gt; without blocking it in Java?","body":"<p>There are a number of things you can do with a <code>Mono</code> instead of calling <code>block</code>, things that will not block.  One thing you can do is attach a <code>Consumer</code> to it that gets called when the <code>Mono</code>'s action completes successfully.  The signature of the method to do that (on the <code>Mono</code>) is:</p>\n<pre><code>Mono&lt;T&gt; doOnSuccess(Consumer&lt;? super T&gt; onSuccess)\n</code></pre>\n<p>So then you can go on working, and your consumer will get called when the action completes.  That call would then initiate whatever actions you want to have performed after the user is added.</p>\n<p>You put code in your <code>Consumer</code> that writes to the database.  If that object needs information, like a handle to the database to write to, you can hand it that information when you construct the object, before passing it in to the <code>doOnSuccess</code> call. -</p>\n"},{"tags":[],"owner":{"account_id":19264689,"reputation":1,"user_id":14079864,"display_name":"Abdul Mannan Zafar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663826845,"creation_date":1663826845,"answer_id":73810025,"question_id":63784829,"body_markdown":"The correct way to handle this would be to link your Mono&lt;&gt; output with the function signature and consume it by calling the getUserData method in your Mono pipeline. To consume it you&#39;ll have to maintain a complete reactive pipeline where all your operations are linked to one another through the various operations like map / flatmap. Alternatively if you just want to print the user inserted in your logs you can make use of .doOnNext() to print the same, this would run in a different thread which would not block your main Mono thread.","title":"How to get User object from Mono&lt;User&gt; without blocking it in Java?","body":"<p>The correct way to handle this would be to link your Mono&lt;&gt; output with the function signature and consume it by calling the getUserData method in your Mono pipeline. To consume it you'll have to maintain a complete reactive pipeline where all your operations are linked to one another through the various operations like map / flatmap. Alternatively if you just want to print the user inserted in your logs you can make use of .doOnNext() to print the same, this would run in a different thread which would not block your main Mono thread.</p>\n"}],"owner":{"account_id":3051388,"reputation":119,"user_id":2585846,"accept_rate":17,"display_name":"Ravi sinha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":803,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1663826845,"creation_date":1599516548,"question_id":63784829,"body_markdown":"I have a repository call which will give me Mono&lt;User&gt; .\r\n\r\nex:\r\n\r\n        private User getUserData (User user)\r\n    {\r\n     Mono&lt;User&gt; monoUser=userRepository.insert(user);\r\n      User user= monoUser.block; \r\n    return user;\r\n    }\r\n\r\nHow to achieve this without blocking in spring reactive. I don&#39;t want to do monoUser.block to get User object.\r\n\r\nAfter getting userObject i need to  convert id to UserId via Mapstruct.Also i want to achieve this  without blocking so that  i will be using reactive feature.","title":"How to get User object from Mono&lt;User&gt; without blocking it in Java?","body":"<p>I have a repository call which will give me Mono .</p>\n<p>ex:</p>\n<pre><code>    private User getUserData (User user)\n{\n Mono&lt;User&gt; monoUser=userRepository.insert(user);\n  User user= monoUser.block; \nreturn user;\n}\n</code></pre>\n<p>How to achieve this without blocking in spring reactive. I don't want to do monoUser.block to get User object.</p>\n<p>After getting userObject i need to  convert id to UserId via Mapstruct.Also i want to achieve this  without blocking so that  i will be using reactive feature.</p>\n"},{"tags":["java","android","c","android-studio","kotlin"],"comments":[{"owner":{"account_id":15654001,"reputation":11419,"user_id":11294831,"display_name":"the busybee"},"score":0,"creation_date":1663766934,"post_id":73800611,"comment_id":130316609,"body_markdown":"What does the apparent macro `CF_ENUM` expand to?","body":"What does the apparent macro <code>CF_ENUM</code> expand to?"},{"owner":{"account_id":169684,"reputation":26170,"user_id":395897,"accept_rate":85,"display_name":"Andrea"},"score":0,"creation_date":1663767451,"post_id":73800611,"comment_id":130316811,"body_markdown":"@thebusybee into something like that available in Clang  `__attribute__((enum_extensibility(open)))`","body":"@thebusybee into something like that available in Clang  <code>__attribute__((enum_extensibility(open)))</code>"},{"owner":{"account_id":15654001,"reputation":11419,"user_id":11294831,"display_name":"the busybee"},"score":0,"creation_date":1663767543,"post_id":73800611,"comment_id":130316848,"body_markdown":"Please show the preprocessor&#39;s output in your question.","body":"Please show the preprocessor&#39;s output in your question."},{"owner":{"account_id":169684,"reputation":26170,"user_id":395897,"accept_rate":85,"display_name":"Andrea"},"score":0,"creation_date":1663768102,"post_id":73800611,"comment_id":130317099,"body_markdown":"I have to ask, I&#39;m not the one building the library, but to avoid any missunderstanding about the question. The CF_ENUM is used only on Swift side and it solves the issue. What I&#39;am looking for is a similar solution on kotlin side, that is the `else` of the `C` code posted.","body":"I have to ask, I&#39;m not the one building the library, but to avoid any missunderstanding about the question. The CF_ENUM is used only on Swift side and it solves the issue. What I&#39;am looking for is a similar solution on kotlin side, that is the <code>else</code> of the <code>C</code> code posted."},{"owner":{"account_id":15654001,"reputation":11419,"user_id":11294831,"display_name":"the busybee"},"score":0,"creation_date":1663770845,"post_id":73800611,"comment_id":130318251,"body_markdown":"So you are saying that the shown source can be included in a Swift source or translated as Swift? I thought it is C, and therefore I asked for the expanded source (look up the `-E` option of GCC and Clang). As I understand it, you need to add _something_ to make the compiler export more than the usual stuff, so that the linker knows how to resolve the references. Commonly the names of enumerated constants are gone and replaced by their numeric values after compiling.","body":"So you are saying that the shown source can be included in a Swift source or translated as Swift? I thought it is C, and therefore I asked for the expanded source (look up the <code>-E</code> option of GCC and Clang). As I understand it, you need to add <i>something</i> to make the compiler export more than the usual stuff, so that the linker knows how to resolve the references. Commonly the names of enumerated constants are gone and replaced by their numeric values after compiling."},{"owner":{"account_id":169684,"reputation":26170,"user_id":395897,"accept_rate":85,"display_name":"Andrea"},"score":0,"creation_date":1663826342,"post_id":73800611,"comment_id":130331162,"body_markdown":"@thebusybee basically yes, the part wrapped in the check for `__APPLE__` when we consume the library exposes a full enum with all labeled cases instead of just a class with a raw `Int` value.\nThe question is about ,is there something similar also on kotlin side? a defined macro that can make us able to export the full enumeration, without the need of remapping it?","body":"@thebusybee basically yes, the part wrapped in the check for <code>__APPLE__</code> when we consume the library exposes a full enum with all labeled cases instead of just a class with a raw <code>Int</code> value. The question is about ,is there something similar also on kotlin side? a defined macro that can make us able to export the full enumeration, without the need of remapping it?"},{"owner":{"account_id":15654001,"reputation":11419,"user_id":11294831,"display_name":"the busybee"},"score":0,"creation_date":1663829172,"post_id":73800611,"comment_id":130331901,"body_markdown":"Hm, I think we are talking past each other. My core issue is: Is the presented source snippet really read by a Swift compiler? A quick research seems to show that `typedef` is not a Swift keyword, so I asked for confirmation. -- The term &quot;_consume the library_&quot; is a bit unclear to me. Does building a Swift application work similarly to building a C application? Then it means what, reading and compiling the source code, or linking against the compiled C library? At least in the C world, these are two distinct processes.","body":"Hm, I think we are talking past each other. My core issue is: Is the presented source snippet really read by a Swift compiler? A quick research seems to show that <code>typedef</code> is not a Swift keyword, so I asked for confirmation. -- The term &quot;<i>consume the library</i>&quot; is a bit unclear to me. Does building a Swift application work similarly to building a C application? Then it means what, reading and compiling the source code, or linking against the compiled C library? At least in the C world, these are two distinct processes."},{"owner":{"account_id":15654001,"reputation":11419,"user_id":11294831,"display_name":"the busybee"},"score":0,"creation_date":1663829189,"post_id":73800611,"comment_id":130331909,"body_markdown":"Anyway, as Swift seems to be &quot;near enough&quot; to C, the source could be accepted by a Swift preprocessor and compiler. Couldn&#39;t you expand it with another `#elif` and filter it through, for example, the C or Swift preprocessor before giving it to the Kotlin compiler? A quick web search revelaed no preprocessor for Kotlin.","body":"Anyway, as Swift seems to be &quot;near enough&quot; to C, the source could be accepted by a Swift preprocessor and compiler. Couldn&#39;t you expand it with another <code>#elif</code> and filter it through, for example, the C or Swift preprocessor before giving it to the Kotlin compiler? A quick web search revelaed no preprocessor for Kotlin."}],"owner":{"account_id":169684,"reputation":26170,"user_id":395897,"accept_rate":85,"display_name":"Andrea"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1663826505,"creation_date":1663762709,"question_id":73800611,"body_markdown":"We are working on a `C` library and trying to consume it on an Android `kotlin` project.&lt;br&gt;\r\nEverything works fine except for `enum` declared in the library itself.&lt;br&gt;\r\nIt seems that cases defined are not available.&lt;br&gt;\r\nWe had the same issue on `Swift` but we were able to takle it by conditional compiling the library and adding a specific attribute in the `C` code. Here a sample .h that once consumed by swift compiler can show the correct number of enum cases instead of just the `uint32_t` raw value.\r\n\r\n\r\n    #if defined (__APPLE__)\r\n    #include &lt;CoreFoundation/CFAvailability.h&gt;\r\n    \r\n    typedef CF_ENUM(uint32_t, Cases) {\r\n      case_zero         = 0,\r\n      case_one          = 1\r\n    };\r\n    #else\r\n    typedef enum {\r\n      case_zero         = 0,\r\n      case_one          = 1\r\n    } Cases;\r\n    #endif\r\n\r\nIs there any way to mark the enumeration to make it visible with all cases also on a `kotlin`(or maybe `java`) project without the need of rewriting a remapping?","title":"Import a public C enumeration from a C library into kotlin project","body":"<p>We are working on a <code>C</code> library and trying to consume it on an Android <code>kotlin</code> project.<br>\nEverything works fine except for <code>enum</code> declared in the library itself.<br>\nIt seems that cases defined are not available.<br>\nWe had the same issue on <code>Swift</code> but we were able to takle it by conditional compiling the library and adding a specific attribute in the <code>C</code> code. Here a sample .h that once consumed by swift compiler can show the correct number of enum cases instead of just the <code>uint32_t</code> raw value.</p>\n<pre><code>#if defined (__APPLE__)\n#include &lt;CoreFoundation/CFAvailability.h&gt;\n\ntypedef CF_ENUM(uint32_t, Cases) {\n  case_zero         = 0,\n  case_one          = 1\n};\n#else\ntypedef enum {\n  case_zero         = 0,\n  case_one          = 1\n} Cases;\n#endif\n</code></pre>\n<p>Is there any way to mark the enumeration to make it visible with all cases also on a <code>kotlin</code>(or maybe <code>java</code>) project without the need of rewriting a remapping?</p>\n"},{"tags":["java","rest","junit","resteasy","jboss-arquillian"],"comments":[{"owner":{"account_id":159105,"reputation":5318,"user_id":378185,"display_name":"LightGuard"},"score":0,"creation_date":1440801247,"post_id":32265740,"comment_id":52440054,"body_markdown":"Is this a server-side or client-side test? Which version of RestEasy is being used?","body":"Is this a server-side or client-side test? Which version of RestEasy is being used?"},{"owner":{"account_id":3192347,"reputation":1118,"user_id":2696329,"accept_rate":50,"display_name":"Seb"},"score":0,"creation_date":1440999674,"post_id":32265740,"comment_id":52485026,"body_markdown":"It is a server-side test. I use  the 3.0.11.Final version of RestEasy.","body":"It is a server-side test. I use  the 3.0.11.Final version of RestEasy."},{"owner":{"account_id":159105,"reputation":5318,"user_id":378185,"display_name":"LightGuard"},"score":0,"creation_date":1441118895,"post_id":32265740,"comment_id":52543421,"body_markdown":"Certainly looks like a bug.","body":"Certainly looks like a bug."}],"answers":[{"tags":[],"owner":{"account_id":121626,"reputation":8142,"user_id":314862,"accept_rate":76,"display_name":"Dimitri"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1455880530,"creation_date":1455880530,"answer_id":35503956,"question_id":32265740,"body_markdown":"This answer might be late but if you want to inject `webTarget` in the test, you have to add `@RunAsClient` in the test method. \r\n\r\n    @Test  \r\n    @Consumes(MediaType.APPLICATION_JSON)\r\n    @RunAsClient  \r\n    public void testWithWT(@ArquillianResteasyResource WebTarget webTarget) {}","title":"(Arquillian REST Extension) why webtarget is null in test method?","body":"<p>This answer might be late but if you want to inject <code>webTarget</code> in the test, you have to add <code>@RunAsClient</code> in the test method. </p>\n\n<pre><code>@Test  \n@Consumes(MediaType.APPLICATION_JSON)\n@RunAsClient  \npublic void testWithWT(@ArquillianResteasyResource WebTarget webTarget) {}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2209705,"reputation":2681,"user_id":1951947,"display_name":"raythurnevoid"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1487956361,"creation_date":1487956361,"answer_id":42444500,"question_id":32265740,"body_markdown":"I&#39;ve created a [sample project on GitHub here][1] using rest-extension and an embedded instance of Glassfish.\r\nI hope that would help.\r\n\r\n\r\n\r\n\r\n  [1]: https://github.com/Lemmy4555/arquillian-rest-extension-embedded-server-example/tree/master","title":"(Arquillian REST Extension) why webtarget is null in test method?","body":"<p>I've created a <a href=\"https://github.com/Lemmy4555/arquillian-rest-extension-embedded-server-example/tree/master\" rel=\"nofollow noreferrer\">sample project on GitHub here</a> using rest-extension and an embedded instance of Glassfish.\nI hope that would help.</p>\n"}],"owner":{"account_id":3192347,"reputation":1118,"user_id":2696329,"accept_rate":50,"display_name":"Seb"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1596,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1663826483,"creation_date":1440747503,"question_id":32265740,"body_markdown":"I try to use &#39;ArquillianResteasyResource&#39; to inject WebTarget in my test, but WebTarget&#39;s variable remains null.\r\n\r\n   \r\n\r\n    @Test  \r\n    @Consumes(MediaType.APPLICATION_JSON)  \r\n    public void testWithWT(@ArquillianResteasyResource WebTarget webTarget) {  \r\n        ......}\r\n\r\nWhen I directly injects my class service, everything works fine!\r\n\r\n \r\n\r\n    @Test  \r\n    @Consumes(MediaType.APPLICATION_JSON)  \r\n    public void testWithWT(@ArquillianResteasyResource MyService sv) {  \r\n    ......}  \r\n\r\nmy pom dependences :\r\n\r\n&gt;     &lt;dependency&gt;\r\n&gt;    \t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n&gt;    \t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n&gt;    \t\t&lt;version&gt;4.12&lt;/version&gt;\r\n&gt;    \t\t&lt;scope&gt;test&lt;/scope&gt;\r\n&gt;    \t&lt;/dependency&gt;\r\n&gt;    \t&lt;dependency&gt;\r\n&gt;    \t\t&lt;groupId&gt;org.eu.ingwar.tools&lt;/groupId&gt;\r\n&gt;    \t\t&lt;artifactId&gt;arquillian-suite-extension&lt;/artifactId&gt;\r\n&gt;    \t\t&lt;version&gt;1.1.2&lt;/version&gt;\r\n&gt;    \t\t&lt;scope&gt;test&lt;/scope&gt;\r\n&gt;    \t&lt;/dependency&gt;\r\n&gt;    \t&lt;dependency&gt;\r\n&gt;    \t\t&lt;groupId&gt;org.jboss.arquillian.junit&lt;/groupId&gt;\r\n&gt;    \t\t&lt;artifactId&gt;arquillian-junit-container&lt;/artifactId&gt;\r\n&gt;    \t\t&lt;scope&gt;test&lt;/scope&gt;\r\n&gt;    \t&lt;/dependency&gt;\r\n&gt;    \t&lt;dependency&gt;\r\n&gt;    \t\t&lt;groupId&gt;org.wildfly.arquillian&lt;/groupId&gt;\r\n&gt;    \t\t&lt;artifactId&gt;wildfly-arquillian-container-embedded&lt;/artifactId&gt;\r\n&gt;    \t\t&lt;version&gt;1.0.1.Final&lt;/version&gt;\r\n&gt;    \t\t&lt;scope&gt;test&lt;/scope&gt;\r\n&gt;    \t&lt;/dependency&gt;\r\n&gt;    \t&lt;dependency&gt;\r\n&gt;    \t\t&lt;groupId&gt;org.jboss.arquillian.extension&lt;/groupId&gt;\r\n&gt;    \t\t&lt;artifactId&gt;arquillian-rest-client-api&lt;/artifactId&gt;\r\n&gt;    \t\t&lt;version&gt;1.0.0.Alpha3&lt;/version&gt;\r\n&gt;    \t\t&lt;scope&gt;test&lt;/scope&gt;\r\n&gt;    \t&lt;/dependency&gt;\r\n&gt;    \t&lt;dependency&gt;\r\n&gt;    \t\t&lt;groupId&gt;org.jboss.arquillian.extension&lt;/groupId&gt;\r\n&gt;    \t\t&lt;artifactId&gt;arquillian-rest-client-impl-3x&lt;/artifactId&gt;\r\n&gt;    \t\t&lt;version&gt;1.0.0.Alpha3&lt;/version&gt;\r\n&gt;    \t\t&lt;scope&gt;test&lt;/scope&gt;\r\n&gt;    \t&lt;/dependency&gt;\r\n&gt;    \t&lt;dependency&gt;\r\n&gt;    \t\t&lt;groupId&gt;org.wildfly&lt;/groupId&gt;\r\n&gt;    \t\t&lt;artifactId&gt;wildfly-embedded&lt;/artifactId&gt;\r\n&gt;    \t\t&lt;version&gt;9.0.0.Final&lt;/version&gt;\r\n&gt;    \t\t&lt;scope&gt;test&lt;/scope&gt;\r\n&gt;    \t&lt;/dependency&gt;\r\n\r\nwhat is the problem with the WebTarget ?\r\n\r\nany ideas ?\r\n\r\nBest regards","title":"(Arquillian REST Extension) why webtarget is null in test method?","body":"<p>I try to use 'ArquillianResteasyResource' to inject WebTarget in my test, but WebTarget's variable remains null.</p>\n\n<pre><code>@Test  \n@Consumes(MediaType.APPLICATION_JSON)  \npublic void testWithWT(@ArquillianResteasyResource WebTarget webTarget) {  \n    ......}\n</code></pre>\n\n<p>When I directly injects my class service, everything works fine!</p>\n\n<pre><code>@Test  \n@Consumes(MediaType.APPLICATION_JSON)  \npublic void testWithWT(@ArquillianResteasyResource MyService sv) {  \n......}  \n</code></pre>\n\n<p>my pom dependences :</p>\n\n<blockquote>\n<pre><code>&lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;4.12&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n      &lt;groupId&gt;org.eu.ingwar.tools&lt;/groupId&gt;\n      &lt;artifactId&gt;arquillian-suite-extension&lt;/artifactId&gt;\n      &lt;version&gt;1.1.2&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n      &lt;groupId&gt;org.jboss.arquillian.junit&lt;/groupId&gt;\n      &lt;artifactId&gt;arquillian-junit-container&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n      &lt;groupId&gt;org.wildfly.arquillian&lt;/groupId&gt;\n      &lt;artifactId&gt;wildfly-arquillian-container-embedded&lt;/artifactId&gt;\n      &lt;version&gt;1.0.1.Final&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n      &lt;groupId&gt;org.jboss.arquillian.extension&lt;/groupId&gt;\n      &lt;artifactId&gt;arquillian-rest-client-api&lt;/artifactId&gt;\n      &lt;version&gt;1.0.0.Alpha3&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n      &lt;groupId&gt;org.jboss.arquillian.extension&lt;/groupId&gt;\n      &lt;artifactId&gt;arquillian-rest-client-impl-3x&lt;/artifactId&gt;\n      &lt;version&gt;1.0.0.Alpha3&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n      &lt;groupId&gt;org.wildfly&lt;/groupId&gt;\n      &lt;artifactId&gt;wildfly-embedded&lt;/artifactId&gt;\n      &lt;version&gt;9.0.0.Final&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n  &lt;/dependency&gt;\n</code></pre>\n</blockquote>\n\n<p>what is the problem with the WebTarget ?</p>\n\n<p>any ideas ?</p>\n\n<p>Best regards</p>\n"},{"tags":["java","spring","hibernate","orm"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1663825971,"post_id":73809760,"comment_id":130331079,"body_markdown":"Aparently your user lacks the permissions. Probably due to a change in hibernate it now does an explicit lock for the serializable transaction.","body":"Aparently your user lacks the permissions. Probably due to a change in hibernate it now does an explicit lock for the serializable transaction."},{"owner":{"account_id":9809969,"reputation":51,"user_id":7268485,"accept_rate":0,"display_name":"floid costa"},"score":0,"creation_date":1663826229,"post_id":73809760,"comment_id":130331137,"body_markdown":"we have only ```@Transactional(propagation = Propagation.REQUIRES_NEW)``` isolation is not specified explicitly. I was trying options","body":"we have only <code>@Transactional(propagation = Propagation.REQUIRES_NEW)</code> isolation is not specified explicitly. I was trying options"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1663826749,"post_id":73809760,"comment_id":130331261,"body_markdown":"It has nothing to do with `@Transactional`. You have to check in your database that the user has the correct permissions for the table","body":"It has nothing to do with <code>@Transactional</code>. You have to check in your database that the user has the correct permissions for the table"},{"owner":{"account_id":9809969,"reputation":51,"user_id":7268485,"accept_rate":0,"display_name":"floid costa"},"score":0,"creation_date":1663827076,"post_id":73809760,"comment_id":130331334,"body_markdown":"correct me this table &#39;hibernate_sequence&#39; is managed by hibernate. Not something that i could query over in mysql and provide the grant","body":"correct me this table &#39;hibernate_sequence&#39; is managed by hibernate. Not something that i could query over in mysql and provide the grant"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":1,"creation_date":1663827458,"post_id":73809760,"comment_id":130331415,"body_markdown":"It is a table you can access and provide a grant on. [Read up on sequences](https://www.baeldung.com/hibernate-identifiers#3-sequence-generation).","body":"It is a table you can access and provide a grant on. <a href=\"https://www.baeldung.com/hibernate-identifiers#3-sequence-generation\" rel=\"nofollow noreferrer\">Read up on sequences</a>."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1663827524,"post_id":73809760,"comment_id":130331435,"body_markdown":"It was in your initial post, so you modified it!. Nonetheless it is a security issue with your user which doesn&#39;t have the right permissions.","body":"It was in your initial post, so you modified it!. Nonetheless it is a security issue with your user which doesn&#39;t have the right permissions."},{"owner":{"account_id":9809969,"reputation":51,"user_id":7268485,"accept_rate":0,"display_name":"floid costa"},"score":0,"creation_date":1663828379,"post_id":73809760,"comment_id":130331664,"body_markdown":"Thanks @XtremeBaumer  on the pointer towards the sequences. I missed to highlight the full log ```SEVERE: [The component {0} encountered an error during execution]\njavax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: error performing isolated work```","body":"Thanks @XtremeBaumer  on the pointer towards the sequences. I missed to highlight the full log <code>SEVERE: [The component {0} encountered an error during execution] javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: error performing isolated work</code>"},{"owner":{"account_id":9809969,"reputation":51,"user_id":7268485,"accept_rate":0,"display_name":"floid costa"},"score":0,"creation_date":1663828495,"post_id":73809760,"comment_id":130331708,"body_markdown":"https://stackoverflow.com/questions/68804784/spring-replication-issue-with-read-only-user-command-denied  seems to have a pointer to my issue","body":"<a href=\"https://stackoverflow.com/questions/68804784/spring-replication-issue-with-read-only-user-command-denied\" title=\"spring replication issue with read only user command denied\">stackoverflow.com/questions/68804784/&hellip;</a>  seems to have a pointer to my issue"},{"owner":{"account_id":9809969,"reputation":51,"user_id":7268485,"accept_rate":0,"display_name":"floid costa"},"score":0,"creation_date":1663828590,"post_id":73809760,"comment_id":130331734,"body_markdown":"i changed my \t@GeneratedValue(strategy = GenerationType.AUTO) to \t@GeneratedValue(strategy = GenerationType.IDENTITY) seems to have deflected the error.","body":"i changed my \t@GeneratedValue(strategy = GenerationType.AUTO) to \t@GeneratedValue(strategy = GenerationType.IDENTITY) seems to have deflected the error."},{"owner":{"account_id":9809969,"reputation":51,"user_id":7268485,"accept_rate":0,"display_name":"floid costa"},"score":0,"creation_date":1663829119,"post_id":73809760,"comment_id":130331891,"body_markdown":"https://coderanch.com/t/487173/databases/hibernate-sequence-exist reference","body":"<a href=\"https://coderanch.com/t/487173/databases/hibernate-sequence-exist\" rel=\"nofollow noreferrer\">coderanch.com/t/487173/databases/hibernate-sequence-exist</a> reference"}],"owner":{"account_id":9809969,"reputation":51,"user_id":7268485,"accept_rate":0,"display_name":"floid costa"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":290,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663825937,"creation_date":1663824893,"question_id":73809760,"body_markdown":"I uplifted my hibernate version from 3.x to 5.x\r\n\r\nwe use spring orm for transaction \r\n\r\nfound the issue to be located around the below persist method\r\n\r\nI find lot of similar issues online but had trouble relating it to hibernate_sequence\r\n\r\n```\r\n@Transactional(propagation = Propagation.REQUIRES_NEW) \r\n\tpublic void save(T entity) {\r\n\t\tentityManager.persist(entity);\r\n\t}\r\n\r\n```\r\n\r\nbelow is the error log \r\n\r\n```\r\nINFO: HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\nMon Sep 12 03:17:51 IST 2022\r\nSep 22, 2022 4:46:49 AM org.hibernate.id.enhanced.TableStructure$1$1 execute\r\nERROR: could not read a hi value\r\njava.sql.SQLSyntaxErrorException: SELECT with locking clause command denied to user &#39;d7a_viewer&#39;@&#39;localhost&#39; for table &#39;hibernate_sequence&#39;\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)\r\n\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:1003)\r\n\tat com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:430)\r\n\tat org.hibernate.id.enhanced.TableStructure.executeQuery(TableStructure.java:216)\r\n\tat org.hibernate.id.enhanced.TableStructure.access$300(TableStructure.java:46)\r\n\tat org.hibernate.id.enhanced.TableStructure$1$1.execute(TableStructure.java:138)\r\n\tat org.hibernate.id.enhanced.TableStructure$1$1.execute(TableStructure.java:126)\r\n\tat org.hibernate.jdbc.WorkExecutor.executeReturningWork(WorkExecutor.java:55)\r\n\tat org.hibernate.jdbc.AbstractReturningWork.accept(AbstractReturningWork.java:34)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:57)\r\n\tat org.hibernate.id.enhanced.TableStructure$1.getNextValue(TableStructure.java:125)\r\n\tat org.hibernate.id.enhanced.NoopOptimizer.generate(NoopOptimizer.java:40)\r\n\tat org.hibernate.id.enhanced.SequenceStyleGenerator.generate(SequenceStyleGenerator.java:525)\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:115)\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185)\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128)\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:749)\r\n\tat org.hibernate.internal.SessionImpl.persist(SessionImpl.java:735)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:314)\r\n\tat com.sun.proxy.$Proxy49.persist(Unknown Source)\r\n```","title":"java.sql.SQLSyntaxErrorException: SELECT with locking clause command denied to user &#39;user&#39;@&#39;localhost&#39; for table &#39;hibernate_sequence&#39;","body":"<p>I uplifted my hibernate version from 3.x to 5.x</p>\n<p>we use spring orm for transaction</p>\n<p>found the issue to be located around the below persist method</p>\n<p>I find lot of similar issues online but had trouble relating it to hibernate_sequence</p>\n<pre><code>@Transactional(propagation = Propagation.REQUIRES_NEW) \n    public void save(T entity) {\n        entityManager.persist(entity);\n    }\n\n</code></pre>\n<p>below is the error log</p>\n<pre><code>INFO: HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\nMon Sep 12 03:17:51 IST 2022\nSep 22, 2022 4:46:49 AM org.hibernate.id.enhanced.TableStructure$1$1 execute\nERROR: could not read a hi value\njava.sql.SQLSyntaxErrorException: SELECT with locking clause command denied to user 'd7a_viewer'@'localhost' for table 'hibernate_sequence'\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:1003)\n    at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:430)\n    at org.hibernate.id.enhanced.TableStructure.executeQuery(TableStructure.java:216)\n    at org.hibernate.id.enhanced.TableStructure.access$300(TableStructure.java:46)\n    at org.hibernate.id.enhanced.TableStructure$1$1.execute(TableStructure.java:138)\n    at org.hibernate.id.enhanced.TableStructure$1$1.execute(TableStructure.java:126)\n    at org.hibernate.jdbc.WorkExecutor.executeReturningWork(WorkExecutor.java:55)\n    at org.hibernate.jdbc.AbstractReturningWork.accept(AbstractReturningWork.java:34)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:57)\n    at org.hibernate.id.enhanced.TableStructure$1.getNextValue(TableStructure.java:125)\n    at org.hibernate.id.enhanced.NoopOptimizer.generate(NoopOptimizer.java:40)\n    at org.hibernate.id.enhanced.SequenceStyleGenerator.generate(SequenceStyleGenerator.java:525)\n    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:115)\n    at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185)\n    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128)\n    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\n    at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:749)\n    at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:735)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:314)\n    at com.sun.proxy.$Proxy49.persist(Unknown Source)\n</code></pre>\n"},{"tags":["java","spring","spring-boot","java-17"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1663765162,"post_id":73800837,"comment_id":130315913,"body_markdown":"Thre is no instance of the prototype bean hence nothing to scan hence no schedule.  Don&#39;t make the bean prototype scoped. Just create the session when you need it and close it when you are done. The fact that you are using Spring doesn&#39;t mean **everything** has to be managed by Spring. I also doubt it would even work in this case due to the mixing of web and non-web scopes in a single bean with a schedule (which wouldn&#39;t have the web scope).","body":"Thre is no instance of the prototype bean hence nothing to scan hence no schedule.  Don&#39;t make the bean prototype scoped. Just create the session when you need it and close it when you are done. The fact that you are using Spring doesn&#39;t mean <b>everything</b> has to be managed by Spring. I also doubt it would even work in this case due to the mixing of web and non-web scopes in a single bean with a schedule (which wouldn&#39;t have the web scope)."},{"owner":{"account_id":1789975,"reputation":1548,"user_id":1630619,"accept_rate":77,"display_name":"Philippe Gioseffi"},"score":0,"creation_date":1663766162,"post_id":73800837,"comment_id":130316320,"body_markdown":"@M.Deinum The bean with web scope is separated and working fine. When I work with singleton bean, the FTP is not created again and therefore I have a closed connection.","body":"@M.Deinum The bean with web scope is separated and working fine. When I work with singleton bean, the FTP is not created again and therefore I have a closed connection."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1663766230,"post_id":73800837,"comment_id":130316343,"body_markdown":"As stated create it when needed and close it afterwards, not everything needs to be managed by Spring.","body":"As stated create it when needed and close it afterwards, not everything needs to be managed by Spring."},{"owner":{"account_id":1789975,"reputation":1548,"user_id":1630619,"accept_rate":77,"display_name":"Philippe Gioseffi"},"score":0,"creation_date":1663766472,"post_id":73800837,"comment_id":130316427,"body_markdown":"So, will I have to instantiate `RetrieveFileFromSecureFileTransferProtocolInputBoundary` contained in `InsertTransactionDetailsByScheduleAPIInteractor` manually and extract it from FTP configuration?","body":"So, will I have to instantiate <code>RetrieveFileFromSecureFileTransferProtocolInputBoundary</code> contained in <code>InsertTransactionDetailsByScheduleAPIInteractor</code> manually and extract it from FTP configuration?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1663766709,"post_id":73800837,"comment_id":130316532,"body_markdown":"The part that needs/creates an ftp session. As stated not everything needs to be spring managed. Another option is to use Spring Integration with its (S)FTP(S) support.","body":"The part that needs/creates an ftp session. As stated not everything needs to be spring managed. Another option is to use Spring Integration with its (S)FTP(S) support."},{"owner":{"account_id":1789975,"reputation":1548,"user_id":1630619,"accept_rate":77,"display_name":"Philippe Gioseffi"},"score":0,"creation_date":1663784914,"post_id":73800837,"comment_id":130323368,"body_markdown":"@M.Deinum, your solution worked. If you provide an answer, I&#39;ll accept it.","body":"@M.Deinum, your solution worked. If you provide an answer, I&#39;ll accept it."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1663824494,"post_id":73800837,"comment_id":130330808,"body_markdown":"Which solution as I proposed 2 :).","body":"Which solution as I proposed 2 :)."},{"owner":{"account_id":1789975,"reputation":1548,"user_id":1630619,"accept_rate":77,"display_name":"Philippe Gioseffi"},"score":0,"creation_date":1663825669,"post_id":73800837,"comment_id":130331025,"body_markdown":"@M.Deinum instantiate beans manually. But if you want to provide a sample code for spring SFTP support feel free. I&#39;ll definitely check this support out later.","body":"@M.Deinum instantiate beans manually. But if you want to provide a sample code for spring SFTP support feel free. I&#39;ll definitely check this support out later."}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663825906,"creation_date":1663825906,"answer_id":73809880,"question_id":73800837,"body_markdown":"You are using Spring but that doesn&#39;t mean **everything** has to be managed by Spring. There is nothing wrong with opening an SFTP Session inside your class when you need it and close it afterwards. You can probably even use a try-with-resources as I expect the `Session` to be a `AutoClosable` which can be used. \r\n\r\nSo in short manually create the objects you need inside your scheduled job and cleanup after the job finished. This way your scheduler can be a regular singleton and properly cleanup after itself. ","title":"Prototyped bean not triggering Scheduled method in Spring Boot","body":"<p>You are using Spring but that doesn't mean <strong>everything</strong> has to be managed by Spring. There is nothing wrong with opening an SFTP Session inside your class when you need it and close it afterwards. You can probably even use a try-with-resources as I expect the <code>Session</code> to be a <code>AutoClosable</code> which can be used.</p>\n<p>So in short manually create the objects you need inside your scheduled job and cleanup after the job finished. This way your scheduler can be a regular singleton and properly cleanup after itself.</p>\n"}],"owner":{"account_id":1789975,"reputation":1548,"user_id":1630619,"accept_rate":77,"display_name":"Philippe Gioseffi"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73809880,"answer_count":1,"score":1,"last_activity_date":1663825906,"creation_date":1663763745,"question_id":73800837,"body_markdown":"I&#39;m using Java 17, spring-boot 2.7.3 and spring 5.3.22 dependencies.\r\n\r\nI have prototyped beans as follows:\r\n```java\r\n@Service\r\n@Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\r\npublic class InsertTransactionDetailsByScheduleAPIInteractor\r\n\t\timplements InsertTransactionDetailsByScheduleAPIInputBoundary {\r\n\r\n\tprivate final InsertTransactionsInputBoundary insertTransactionsInputBoundary;\r\n\tprivate final RetrieveFileFromSecureFileTransferProtocolInputBoundary retrieveFileFromSecureFileTransferProtocolInputBoundary;\r\n\r\n\tpublic InsertTransactionDetailsByScheduleAPIInteractor(\r\n\t\t\tfinal InsertTransactionsInputBoundary insertTransactionsInputBoundaryParam,\r\n\t\t\t@Qualifier(Constants.PROTOTYPE_RETRIEVE_FILE_BEAN_QUALIFIER) final RetrieveFileFromSecureFileTransferProtocolInputBoundary retrieveFileFromSecureFileTransferProtocolInputBoundaryParam) {\r\n\t\tsuper();\r\n\t\tthis.insertTransactionsInputBoundary = insertTransactionsInputBoundaryParam;\r\n\t\tthis.retrieveFileFromSecureFileTransferProtocolInputBoundary = retrieveFileFromSecureFileTransferProtocolInputBoundaryParam;\r\n\t}\r\n\r\n\t/**\r\n\t * {@inheritDoc}\r\n\t */\r\n\t@Override\r\n//\t@Scheduled(cron = &quot;* 30 1 * * *&quot;, zone = &quot;America/Sao_Paulo&quot;)\r\n\t@Scheduled(initialDelay = 5, fixedRate = 1, timeUnit = TimeUnit.SECONDS)\r\n\tpublic void insertTransactionsBySchedule() throws Exception {\r\n\t\tthis.insertTransactionsInputBoundary.insertTransactions(LocalDate.now(Constants.DEFAULT_ZONE_ID),\r\n\t\t\t\tthis.retrieveFileFromSecureFileTransferProtocolInputBoundary);\r\n\t}\r\n}\r\n```\r\n\r\n```\r\n@Configuration\r\n@RefreshScope\r\nclass FTPConfiguration {\r\n\r\n\tprivate final ConsulProperties consulProperties;\r\n\r\n\tpublic FTPConfiguration(final ConsulProperties consulPropertiesParam) {\r\n\t\tsuper();\r\n\t\tthis.consulProperties = consulPropertiesParam;\r\n\t}\r\n\r\n\t@Bean\r\n\t@RequestScope\r\n\t@Primary\r\n\tRetrieveFileFromSecureFileTransferProtocolInputBoundary createRequestScopedRetrieveFileFromSecureFileTransferProtocolBean()\r\n\t\t\tthrows Exception {\r\n\t\treturn this.createRetrieveFileFromSecureFileTransferProtocolBean(true);\r\n\t}\r\n\r\n\t@Bean\r\n\t@RequestScope\r\n\t@Primary\r\n\tChannelSftp createRequestScopedSecureFileTransferProtocolChannel() throws JSchException {\r\n\t\treturn this.createSFTPChannel(true);\r\n\t}\r\n\r\n\t@Bean(destroyMethod = Constants.FTP_SESSION_BEAN_DESTROY_METHOD)\r\n\t@RequestScope\r\n\t@Primary\r\n\tSession createRequestScopeSecureFileTransferProtocolSession() throws JSchException {\r\n\t\treturn this.createSFTPSession();\r\n\t}\r\n\r\n\t@Bean(Constants.PROTOTYPE_RETRIEVE_FILE_BEAN_QUALIFIER)\r\n\t@Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\r\n\tRetrieveFileFromSecureFileTransferProtocolInputBoundary createPrototypeScopedRetrieveFileFromSecureFileTransferProtocolBean()\r\n\t\t\tthrows Exception {\r\n\t\treturn this.createRetrieveFileFromSecureFileTransferProtocolBean(false);\r\n\t}\r\n\r\n\t@Bean\r\n\t@Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\r\n\tChannelSftp createPrototypeScopedSecureFileTransferProtocolChannel() throws JSchException {\r\n\t\treturn this.createSFTPChannel(false);\r\n\t}\r\n\r\n\t@Bean\r\n\t@Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\r\n\tSession createPrototypeScopedSecureFileTransferProtocolSession() throws JSchException {\r\n\t\treturn this.createSFTPSession();\r\n\t}\r\n\r\n\tprivate RetrieveFileFromSecureFileTransferProtocolInputBoundary createRetrieveFileFromSecureFileTransferProtocolBean(\r\n\t\t\tfinal boolean isRequestScope) throws Exception {\r\n\t\tfinal var channelSFTP = isRequestScope ? this.createRequestScopedSecureFileTransferProtocolChannel()\r\n\t\t\t\t: this.createPrototypeScopedSecureFileTransferProtocolChannel();\r\n\t\treturn new RetrieveFileFromSecureFileTransferProtocolInteractor(channelSFTP,\r\n\t\t\t\tnew ListDirFilesFromSecureFileTransferProtocolInteractor(channelSFTP));\r\n\t}\r\n\r\n\tprivate ChannelSftp createSFTPChannel(final boolean isRequestScope) throws JSchException {\r\n\t\tfinal var channel = (isRequestScope ? this.createRequestScopeSecureFileTransferProtocolSession()\r\n\t\t\t\t: this.createPrototypeScopedSecureFileTransferProtocolSession()).openChannel(&quot;sftp&quot;);\r\n\t\tchannel.connect(this.consulProperties.getChannelTimeout());\r\n\t\treturn (ChannelSftp) channel;\r\n\t}\r\n\r\n\tprivate Session createSFTPSession() throws JSchException {\r\n\t\tfinal var session = new JSch().getSession(this.consulProperties.getUsername(), this.consulProperties.getHost(),\r\n\t\t\t\tthis.consulProperties.getPort());\r\n\t\tsession.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\r\n\t\tsession.setPassword(this.consulProperties.getFtpPassword());\r\n\t\tsession.connect(this.consulProperties.getSessionTimeout());\r\n\t\treturn session;\r\n\t}\r\n}\r\n```\r\nMy application class:\r\n\r\n```\r\n@SpringBootApplication\r\n@EnableCaching\r\n@EnableScheduling\r\npublic class Application implements Closeable {\r\n\r\n\tprivate static ConfigurableApplicationContext run;\r\n\r\n\tpublic static void main(final String[] args) {\r\n\t\tApplication.run = SpringApplication.run(Application.class, args);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void close() {\r\n\t\tApplication.run.close();\r\n\t}\r\n}\r\n```\r\nI annotated the `InsertTransactionDetailsByScheduleAPIInteractor` also as prototype in order to have a new instance of the inner beans per schedule execution, but somehow the @Scheduled method only runs when I have a singleton `InsertTransactionDetailsByScheduleAPIInteractor` bean, which in my use case I can&#39;t have, otherwise I wouldn&#39;t close FTP connection. I know before Spring 4.3, @Scheduled methods only works with Singleton beans, but as mentioned before I&#39;m using Spring version 5.3.22.","title":"Prototyped bean not triggering Scheduled method in Spring Boot","body":"<p>I'm using Java 17, spring-boot 2.7.3 and spring 5.3.22 dependencies.</p>\n<p>I have prototyped beans as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\npublic class InsertTransactionDetailsByScheduleAPIInteractor\n        implements InsertTransactionDetailsByScheduleAPIInputBoundary {\n\n    private final InsertTransactionsInputBoundary insertTransactionsInputBoundary;\n    private final RetrieveFileFromSecureFileTransferProtocolInputBoundary retrieveFileFromSecureFileTransferProtocolInputBoundary;\n\n    public InsertTransactionDetailsByScheduleAPIInteractor(\n            final InsertTransactionsInputBoundary insertTransactionsInputBoundaryParam,\n            @Qualifier(Constants.PROTOTYPE_RETRIEVE_FILE_BEAN_QUALIFIER) final RetrieveFileFromSecureFileTransferProtocolInputBoundary retrieveFileFromSecureFileTransferProtocolInputBoundaryParam) {\n        super();\n        this.insertTransactionsInputBoundary = insertTransactionsInputBoundaryParam;\n        this.retrieveFileFromSecureFileTransferProtocolInputBoundary = retrieveFileFromSecureFileTransferProtocolInputBoundaryParam;\n    }\n\n    /**\n     * {@inheritDoc}\n     */\n    @Override\n//  @Scheduled(cron = &quot;* 30 1 * * *&quot;, zone = &quot;America/Sao_Paulo&quot;)\n    @Scheduled(initialDelay = 5, fixedRate = 1, timeUnit = TimeUnit.SECONDS)\n    public void insertTransactionsBySchedule() throws Exception {\n        this.insertTransactionsInputBoundary.insertTransactions(LocalDate.now(Constants.DEFAULT_ZONE_ID),\n                this.retrieveFileFromSecureFileTransferProtocolInputBoundary);\n    }\n}\n</code></pre>\n<pre><code>@Configuration\n@RefreshScope\nclass FTPConfiguration {\n\n    private final ConsulProperties consulProperties;\n\n    public FTPConfiguration(final ConsulProperties consulPropertiesParam) {\n        super();\n        this.consulProperties = consulPropertiesParam;\n    }\n\n    @Bean\n    @RequestScope\n    @Primary\n    RetrieveFileFromSecureFileTransferProtocolInputBoundary createRequestScopedRetrieveFileFromSecureFileTransferProtocolBean()\n            throws Exception {\n        return this.createRetrieveFileFromSecureFileTransferProtocolBean(true);\n    }\n\n    @Bean\n    @RequestScope\n    @Primary\n    ChannelSftp createRequestScopedSecureFileTransferProtocolChannel() throws JSchException {\n        return this.createSFTPChannel(true);\n    }\n\n    @Bean(destroyMethod = Constants.FTP_SESSION_BEAN_DESTROY_METHOD)\n    @RequestScope\n    @Primary\n    Session createRequestScopeSecureFileTransferProtocolSession() throws JSchException {\n        return this.createSFTPSession();\n    }\n\n    @Bean(Constants.PROTOTYPE_RETRIEVE_FILE_BEAN_QUALIFIER)\n    @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\n    RetrieveFileFromSecureFileTransferProtocolInputBoundary createPrototypeScopedRetrieveFileFromSecureFileTransferProtocolBean()\n            throws Exception {\n        return this.createRetrieveFileFromSecureFileTransferProtocolBean(false);\n    }\n\n    @Bean\n    @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\n    ChannelSftp createPrototypeScopedSecureFileTransferProtocolChannel() throws JSchException {\n        return this.createSFTPChannel(false);\n    }\n\n    @Bean\n    @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\n    Session createPrototypeScopedSecureFileTransferProtocolSession() throws JSchException {\n        return this.createSFTPSession();\n    }\n\n    private RetrieveFileFromSecureFileTransferProtocolInputBoundary createRetrieveFileFromSecureFileTransferProtocolBean(\n            final boolean isRequestScope) throws Exception {\n        final var channelSFTP = isRequestScope ? this.createRequestScopedSecureFileTransferProtocolChannel()\n                : this.createPrototypeScopedSecureFileTransferProtocolChannel();\n        return new RetrieveFileFromSecureFileTransferProtocolInteractor(channelSFTP,\n                new ListDirFilesFromSecureFileTransferProtocolInteractor(channelSFTP));\n    }\n\n    private ChannelSftp createSFTPChannel(final boolean isRequestScope) throws JSchException {\n        final var channel = (isRequestScope ? this.createRequestScopeSecureFileTransferProtocolSession()\n                : this.createPrototypeScopedSecureFileTransferProtocolSession()).openChannel(&quot;sftp&quot;);\n        channel.connect(this.consulProperties.getChannelTimeout());\n        return (ChannelSftp) channel;\n    }\n\n    private Session createSFTPSession() throws JSchException {\n        final var session = new JSch().getSession(this.consulProperties.getUsername(), this.consulProperties.getHost(),\n                this.consulProperties.getPort());\n        session.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\n        session.setPassword(this.consulProperties.getFtpPassword());\n        session.connect(this.consulProperties.getSessionTimeout());\n        return session;\n    }\n}\n</code></pre>\n<p>My application class:</p>\n<pre><code>@SpringBootApplication\n@EnableCaching\n@EnableScheduling\npublic class Application implements Closeable {\n\n    private static ConfigurableApplicationContext run;\n\n    public static void main(final String[] args) {\n        Application.run = SpringApplication.run(Application.class, args);\n    }\n\n    @Override\n    public void close() {\n        Application.run.close();\n    }\n}\n</code></pre>\n<p>I annotated the <code>InsertTransactionDetailsByScheduleAPIInteractor</code> also as prototype in order to have a new instance of the inner beans per schedule execution, but somehow the @Scheduled method only runs when I have a singleton <code>InsertTransactionDetailsByScheduleAPIInteractor</code> bean, which in my use case I can't have, otherwise I wouldn't close FTP connection. I know before Spring 4.3, @Scheduled methods only works with Singleton beans, but as mentioned before I'm using Spring version 5.3.22.</p>\n"},{"tags":["java","android","filter","imageview"],"comments":[{"owner":{"account_id":3131499,"reputation":1797,"user_id":2649154,"accept_rate":93,"display_name":"gioravered"},"score":0,"creation_date":1663681631,"post_id":73787540,"comment_id":130293723,"body_markdown":"This looks like Java: https://stackoverflow.com/a/56717316/2649154","body":"This looks like Java: <a href=\"https://stackoverflow.com/a/56717316/2649154\">stackoverflow.com/a/56717316/2649154</a>"},{"owner":{"account_id":26362930,"reputation":175,"user_id":20018861,"display_name":"Lechius"},"score":0,"creation_date":1663681903,"post_id":73787540,"comment_id":130293841,"body_markdown":"@gioravered  I have already seen that post, in that post, `mydrawable.colorFilter = BlendModeColorFilterCompat.createBlendModeColorFilterCompat(color, BlendModeCompat.SRC_ATOP)&#39;` .The &quot;colorFilter&quot; is highlighted in read, it says unresolved reference of colorFilter. I have also added the dependencies that in that post is said to add, this is why I made this post...","body":"@gioravered  I have already seen that post, in that post, <code>mydrawable.colorFilter = BlendModeColorFilterCompat.createBlendModeColorFilterCompat(&zwnj;&#8203;color, BlendModeCompat.SRC_ATOP)&#39;</code> .The &quot;colorFilter&quot; is highlighted in read, it says unresolved reference of colorFilter. I have also added the dependencies that in that post is said to add, this is why I made this post..."}],"answers":[{"tags":[],"owner":{"account_id":3131499,"reputation":1797,"user_id":2649154,"accept_rate":93,"display_name":"gioravered"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663825776,"creation_date":1663745259,"answer_id":73796886,"question_id":73787540,"body_markdown":"For me, this works in Java:\r\n\r\n```Java\r\n@SuppressWarnings(&quot;deprecation&quot;)\r\npublic static void setcol(TextView dLabel) {\r\n    if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.Q) {\r\n        dLabel.getBackground().setColorFilter(\r\n            color, \r\n            android.graphics.PorterDuff.Mode.MULTIPLY\r\n        );\r\n    } else {\r\n        dLabel.getBackground().setColorFilter(\r\n            BlendModeColorFilterCompat.createBlendModeColorFilterCompat(\r\n                color,\r\n                BlendModeCompat.MULTIPLY\r\n            )\r\n        );\r\n    }\r\n}\r\n```\r\n\r\nChange the color to you desired *color* and the *some_drawable_id* to your drawable.\r\n","title":"Alternative to setColorFilter(int,Mode)","body":"<p>For me, this works in Java:</p>\n<pre><code>@SuppressWarnings(&quot;deprecation&quot;)\npublic static void setcol(TextView dLabel) {\n    if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.Q) {\n        dLabel.getBackground().setColorFilter(\n            color, \n            android.graphics.PorterDuff.Mode.MULTIPLY\n        );\n    } else {\n        dLabel.getBackground().setColorFilter(\n            BlendModeColorFilterCompat.createBlendModeColorFilterCompat(\n                color,\n                BlendModeCompat.MULTIPLY\n            )\n        );\n    }\n}\n</code></pre>\n<p>Change the color to you desired <em>color</em> and the <em>some_drawable_id</em> to your drawable.</p>\n"}],"owner":{"account_id":26362930,"reputation":175,"user_id":20018861,"display_name":"Lechius"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":227,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1663825776,"creation_date":1663680595,"question_id":73787540,"body_markdown":"I have seen that the following method is deprecated : `public void setColorFilter (int color, PorterDuff.Mode mode)`. In the Android documentation I have seen the following recommendation: \r\n\r\n    This method was deprecated in API level 29.\r\n    use setColorFilter(android.graphics.ColorFilter) with an instance of BlendModeColorFilter\r\n\r\nI am trying to replace that method to a non-deprecated method but I have not achieved it. I have seen similar posts to this one but they are kotlin version. How could I replace this deprecated method for a non-deprecated method in Java? \r\n\r\nThanks \r\n\r\nedit:\r\n\r\nWhat I had using the deprecated method: \r\n\r\n     public static void setcol(TextView dLabel) {\r\n           \r\n    dLabel.getBackground().setColorFilter(color,android.graphics.PorterDuff.Mode.MULTIPLY);\r\n    }\r\n\r\nwhat I have changed to use non-deprecated method that is apparently working to replace the above deprecated method:\r\n\r\n\r\n     public static void setcol(TextView dLabel) {\r\n               \r\n         dLabel.getBackground().setColorFilter(\r\n                    BlendModeColorFilterCompat.createBlendModeColorFilterCompat(\r\n                            color,\r\n                            BlendModeCompat.SRC_OVER\r\n                    )\r\n            );\r\n    }","title":"Alternative to setColorFilter(int,Mode)","body":"<p>I have seen that the following method is deprecated : <code>public void setColorFilter (int color, PorterDuff.Mode mode)</code>. In the Android documentation I have seen the following recommendation:</p>\n<pre><code>This method was deprecated in API level 29.\nuse setColorFilter(android.graphics.ColorFilter) with an instance of BlendModeColorFilter\n</code></pre>\n<p>I am trying to replace that method to a non-deprecated method but I have not achieved it. I have seen similar posts to this one but they are kotlin version. How could I replace this deprecated method for a non-deprecated method in Java?</p>\n<p>Thanks</p>\n<p>edit:</p>\n<p>What I had using the deprecated method:</p>\n<pre><code> public static void setcol(TextView dLabel) {\n       \ndLabel.getBackground().setColorFilter(color,android.graphics.PorterDuff.Mode.MULTIPLY);\n}\n</code></pre>\n<p>what I have changed to use non-deprecated method that is apparently working to replace the above deprecated method:</p>\n<pre><code> public static void setcol(TextView dLabel) {\n           \n     dLabel.getBackground().setColorFilter(\n                BlendModeColorFilterCompat.createBlendModeColorFilterCompat(\n                        color,\n                        BlendModeCompat.SRC_OVER\n                )\n        );\n}\n</code></pre>\n"},{"tags":["java","android","react-native","gradle","wix-react-native-navigation"],"answers":[{"tags":[],"owner":{"account_id":9956961,"reputation":629,"user_id":10798040,"display_name":"abdemirza"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663825755,"creation_date":1663825755,"answer_id":73809859,"question_id":73797808,"body_markdown":"Step 1:\r\n\r\n```\r\nyarn add react-native-navigation\r\n```\r\nStep 2:\r\n```\r\npod install --project-directory=ios  \r\n```\r\nStep 3:\r\nEdit the index.js file\r\n\r\n```\r\nimport { Navigation } from &quot;react-native-navigation&quot;;\r\nimport App from &quot;./App&quot;;\r\n\r\nNavigation.registerComponent(&#39;com.myApp.WelcomeScreen&#39;, () =&gt; App);\r\n\r\nNavigation.events().registerAppLaunchedListener(() =&gt; {\r\n   Navigation.setRoot({\r\n     root: {\r\n      stack: {\r\n         children: [\r\n           {\r\n             component: {\r\n               name: &#39;com.myApp.WelcomeScreen&#39;\r\n             }\r\n           }\r\n         ]\r\n       }\r\n    }\r\n  });\r\n});\r\n```\r\nStep 4: Kill the app, close the react-native terminal and build the project again","title":"Cannot get React-Native-Navigation installed for the life of me","body":"<p>Step 1:</p>\n<pre><code>yarn add react-native-navigation\n</code></pre>\n<p>Step 2:</p>\n<pre><code>pod install --project-directory=ios  \n</code></pre>\n<p>Step 3:\nEdit the index.js file</p>\n<pre><code>import { Navigation } from &quot;react-native-navigation&quot;;\nimport App from &quot;./App&quot;;\n\nNavigation.registerComponent('com.myApp.WelcomeScreen', () =&gt; App);\n\nNavigation.events().registerAppLaunchedListener(() =&gt; {\n   Navigation.setRoot({\n     root: {\n      stack: {\n         children: [\n           {\n             component: {\n               name: 'com.myApp.WelcomeScreen'\n             }\n           }\n         ]\n       }\n    }\n  });\n});\n</code></pre>\n<p>Step 4: Kill the app, close the react-native terminal and build the project again</p>\n"}],"owner":{"account_id":22593626,"reputation":11,"user_id":16776321,"display_name":"Paul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":402,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1663825755,"creation_date":1663749794,"question_id":73797808,"body_markdown":"I am working on implementing wix navigation to my React Native project. So far I have:\r\n\r\n- Initialised the project with the CLI, installed react-native-navigation and followed the set-up instructions including going through it manually as well as using rnn-link. \r\n\r\nI have solved most of the errors that I was getting but I am left with this one:\r\n```\r\n&gt; pokedecks@0.0.1 android \r\n&gt; react-native run-android\r\n\r\ninfo Running jetifier to migrate libraries to AndroidX. You can disable it using &quot;--no-jetifier&quot; flag.\r\nJetifier found 1237 file(s) to forward-jetify. Using 12 workers...\r\ninfo Starting JS server...\r\ninfo Installing the app...\r\nStarting a Gradle Daemon, 1 incompatible and 1 stopped Daemons could not be reused, use --status for details\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* Where:\r\nBuild file &#39;C:\\Users\\Paul\\Documents\\Projects\\3sidedcube\\pokedecks\\node_modules\\react-native-navigation\\lib\\android\\app\\build.gradle&#39; line: 177\r\n\r\n* What went wrong:\r\nA problem occurred evaluating project &#39;:react-native-navigation&#39;.\r\n&gt; Cannot run program &quot;C:\\Users\\Paul\\AppData\\Local\\Android\\Sdk/cmdline-tools/latest/bin/sdkmanager&quot;: CreateProcess error=2, The system cannot find the file specified  \r\n\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 14s\r\n\r\nerror Failed to install the app. Make sure you have the Android development environment set up: https://reactnative.dev/docs/environment-setup.\r\nError: Command failed: gradlew.bat app:installDebug -PreactNativeDevServerPort=8081\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* Where:\r\nBuild file &#39;C:\\Users\\Paul\\Documents\\Projects\\3sidedcube\\pokedecks\\node_modules\\react-native-navigation\\lib\\android\\app\\build.gradle&#39; line: 177\r\n\r\n* What went wrong:\r\nA problem occurred evaluating project &#39;:react-native-navigation&#39;.\r\n&gt; Cannot run program &quot;C:\\Users\\Paul\\AppData\\Local\\Android\\Sdk/cmdline-tools/latest/bin/sdkmanager&quot;: CreateProcess error=2, The system cannot find the file specified  \r\n\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 14s\r\n\r\n    at makeError (C:\\Users\\Paul\\Documents\\Projects\\3sidedcube\\pokedecks\\node_modules\\execa\\index.js:174:9)\r\n    at C:\\Users\\Paul\\Documents\\Projects\\3sidedcube\\pokedecks\\node_modules\\execa\\index.js:278:16\r\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\r\n    at async runOnAllDevices (C:\\Users\\Paul\\Documents\\Projects\\3sidedcube\\pokedecks\\node_modules\\@react-native-community\\cli-platform-android\\build\\commands\\runAndroid\\runOnAllDevices.js:109:5)\r\n    at async Command.handleAction (C:\\Users\\Paul\\Documents\\Projects\\3sidedcube\\pokedecks\\node_modules\\@react-native-community\\cli\\build\\index.js:192:9)\r\ninfo Run CLI with --verbose flag for more details.\r\n```\r\nIt seems to be a problem with the path to the SDK?\r\n\r\n    if (!buildToolsDir.exists()) {\r\n        def command = sdkDir.absolutePath + &quot;/cmdline-tools/latest/bin/sdkmanager build-tools;&quot; + buildToolsVersion\r\n        command.execute().waitForProcessOutput(System.out, System.err)\r\n    }\r\n\r\nThis is line 177, I can see it relates to the SDK path and I dont know where the build-tools come from as in the path on my system, its just sdkmanager.bat.\r\n\r\nSo I changed this to:\r\n\r\n    if (!buildToolsDir.exists()) {\r\n        def command = sdkDir.absolutePath + &quot;/cmdline-tools/latest/bin/sdkmanager.bat;\r\n        command.execute().waitForProcessOutput(System.out, System.err)\r\n    }\r\n\r\nIt now compiles to the executing phase and then crashes giving me this;\r\n```\r\n* What went wrong:\r\nCould not determine the dependencies of task &#39;:react-native-navigation:compileReactNative63DebugAidl&#39;.\r\n\r\n&gt; Installed Build Tools revision 33.0.0 is corrupted. Remove and install again using the SDK Manager.\r\n```\r\n\r\nI am at a total loss. It seems this package is just prone to errors and bugs, from my researching companies hate it, but I must use it.","title":"Cannot get React-Native-Navigation installed for the life of me","body":"<p>I am working on implementing wix navigation to my React Native project. So far I have:</p>\n<ul>\n<li>Initialised the project with the CLI, installed react-native-navigation and followed the set-up instructions including going through it manually as well as using rnn-link.</li>\n</ul>\n<p>I have solved most of the errors that I was getting but I am left with this one:</p>\n<pre><code>&gt; pokedecks@0.0.1 android \n&gt; react-native run-android\n\ninfo Running jetifier to migrate libraries to AndroidX. You can disable it using &quot;--no-jetifier&quot; flag.\nJetifier found 1237 file(s) to forward-jetify. Using 12 workers...\ninfo Starting JS server...\ninfo Installing the app...\nStarting a Gradle Daemon, 1 incompatible and 1 stopped Daemons could not be reused, use --status for details\n\nFAILURE: Build failed with an exception.\n\n* Where:\nBuild file 'C:\\Users\\Paul\\Documents\\Projects\\3sidedcube\\pokedecks\\node_modules\\react-native-navigation\\lib\\android\\app\\build.gradle' line: 177\n\n* What went wrong:\nA problem occurred evaluating project ':react-native-navigation'.\n&gt; Cannot run program &quot;C:\\Users\\Paul\\AppData\\Local\\Android\\Sdk/cmdline-tools/latest/bin/sdkmanager&quot;: CreateProcess error=2, The system cannot find the file specified  \n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 14s\n\nerror Failed to install the app. Make sure you have the Android development environment set up: https://reactnative.dev/docs/environment-setup.\nError: Command failed: gradlew.bat app:installDebug -PreactNativeDevServerPort=8081\n\nFAILURE: Build failed with an exception.\n\n* Where:\nBuild file 'C:\\Users\\Paul\\Documents\\Projects\\3sidedcube\\pokedecks\\node_modules\\react-native-navigation\\lib\\android\\app\\build.gradle' line: 177\n\n* What went wrong:\nA problem occurred evaluating project ':react-native-navigation'.\n&gt; Cannot run program &quot;C:\\Users\\Paul\\AppData\\Local\\Android\\Sdk/cmdline-tools/latest/bin/sdkmanager&quot;: CreateProcess error=2, The system cannot find the file specified  \n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 14s\n\n    at makeError (C:\\Users\\Paul\\Documents\\Projects\\3sidedcube\\pokedecks\\node_modules\\execa\\index.js:174:9)\n    at C:\\Users\\Paul\\Documents\\Projects\\3sidedcube\\pokedecks\\node_modules\\execa\\index.js:278:16\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runOnAllDevices (C:\\Users\\Paul\\Documents\\Projects\\3sidedcube\\pokedecks\\node_modules\\@react-native-community\\cli-platform-android\\build\\commands\\runAndroid\\runOnAllDevices.js:109:5)\n    at async Command.handleAction (C:\\Users\\Paul\\Documents\\Projects\\3sidedcube\\pokedecks\\node_modules\\@react-native-community\\cli\\build\\index.js:192:9)\ninfo Run CLI with --verbose flag for more details.\n</code></pre>\n<p>It seems to be a problem with the path to the SDK?</p>\n<pre><code>if (!buildToolsDir.exists()) {\n    def command = sdkDir.absolutePath + &quot;/cmdline-tools/latest/bin/sdkmanager build-tools;&quot; + buildToolsVersion\n    command.execute().waitForProcessOutput(System.out, System.err)\n}\n</code></pre>\n<p>This is line 177, I can see it relates to the SDK path and I dont know where the build-tools come from as in the path on my system, its just sdkmanager.bat.</p>\n<p>So I changed this to:</p>\n<pre><code>if (!buildToolsDir.exists()) {\n    def command = sdkDir.absolutePath + &quot;/cmdline-tools/latest/bin/sdkmanager.bat;\n    command.execute().waitForProcessOutput(System.out, System.err)\n}\n</code></pre>\n<p>It now compiles to the executing phase and then crashes giving me this;</p>\n<pre><code>* What went wrong:\nCould not determine the dependencies of task ':react-native-navigation:compileReactNative63DebugAidl'.\n\n&gt; Installed Build Tools revision 33.0.0 is corrupted. Remove and install again using the SDK Manager.\n</code></pre>\n<p>I am at a total loss. It seems this package is just prone to errors and bugs, from my researching companies hate it, but I must use it.</p>\n"},{"tags":["java","jms","amqp","qpid"],"comments":[{"owner":{"account_id":328884,"reputation":460,"user_id":652078,"accept_rate":73,"display_name":"sairn"},"score":0,"creation_date":1577476220,"post_id":55244472,"comment_id":105183287,"body_markdown":"any resolution?    *seems* my &quot;publisher&quot; connects and sends message... -but, my &quot;consumer&quot; appears to have received nothing but an empty message &quot;shell&quot;... e.g.,  printing out the &quot;consumed&quot; message looks like:  &quot;Exchange[ID-LAPTOP-4LR4PMVQ-1577475921482-0-19]&quot;  - rather than the original payload/text","body":"any resolution?    <i>seems</i> my &quot;publisher&quot; connects and sends message... -but, my &quot;consumer&quot; appears to have received nothing but an empty message &quot;shell&quot;... e.g.,  printing out the &quot;consumed&quot; message looks like:  &quot;Exchange[ID-LAPTOP-4LR4PMVQ-1577475921482-0-19]&quot;  - rather than the original payload/text"},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1577542540,"post_id":55244472,"comment_id":105195128,"body_markdown":"@sairn none, I ended up dropping qpid in my solution...","body":"@sairn none, I ended up dropping qpid in my solution..."},{"owner":{"account_id":328884,"reputation":460,"user_id":652078,"accept_rate":73,"display_name":"sairn"},"score":0,"creation_date":1577578518,"post_id":55244472,"comment_id":105203415,"body_markdown":"sorry to hear.  but, I certainly do understand the frustration!  :-)   --thx!","body":"sorry to hear.  but, I certainly do understand the frustration!  :-)   --thx!"}],"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":630,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1663825691,"creation_date":1553008958,"question_id":55244472,"body_markdown":"I am using queues in a Java application in order to produce and consume messages that go through them. \r\n\r\nI would like to check the content of the payload I send using the QPID Broker (documentation: [http://qpid.apache.org/releases/qpid-broker-j-7.0.3][1]). I am viewing my Broker Manager through a link like this (please note the **http** - without **s** - in the link):\r\n\r\n    http://myServer:myHost/ \r\n\r\nWhen I try to open a message that I can see going through the queues where I&#39;m sending it, I get this: \r\n\r\n[![enter image description here][2]][2]\r\n\r\nUnfortunately my development server can&#39;t be moved over an `HTTPS` connection, so I will have to stick to `HTTP`.\r\n\r\nI&#39;ve looked over the web to see if someone had my same issue, and didn&#39;t find much, the only tip I&#39;ve found into another forum was to modify the `config.json` of the messaging broker in order to allow confidential operations on insecure channels: \r\n\r\n    {\r\n        &quot;name&quot; : &quot;HTTP&quot;,\r\n        &quot;port&quot; : &quot;${BROKER_HTTP_PORT}&quot;,\r\n        &quot;authenticationProvider&quot; : &quot;anonymous&quot;,\r\n    \t&quot;allowConfidentialOperationsOnInsecureChannels&quot; : true, &lt;-- ADDED BY ME\r\n        &quot;protocols&quot; : [ &quot;HTTP&quot; ]\r\n    }\r\n\r\nI have restarted the broker service after this change, but still I keep on getting the same message when opening a payload. \r\n\r\nDoes anybody have any idea to read the content of the payloads without actually doing it via a consumer? \r\n\r\n\r\n  [1]: http://qpid.apache.org/releases/qpid-broker-j-7.0.3\r\n  [2]: https://i.stack.imgur.com/2m49S.png","title":"How can I see the content of messages in my Qpid Broker Management console?","body":"<p>I am using queues in a Java application in order to produce and consume messages that go through them. </p>\n\n<p>I would like to check the content of the payload I send using the QPID Broker (documentation: <a href=\"http://qpid.apache.org/releases/qpid-broker-j-7.0.3\" rel=\"nofollow noreferrer\">http://qpid.apache.org/releases/qpid-broker-j-7.0.3</a>). I am viewing my Broker Manager through a link like this (please note the <strong>http</strong> - without <strong>s</strong> - in the link):</p>\n\n<pre><code>http://myServer:myHost/ \n</code></pre>\n\n<p>When I try to open a message that I can see going through the queues where I'm sending it, I get this: </p>\n\n<p><a href=\"https://i.stack.imgur.com/2m49S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2m49S.png\" alt=\"enter image description here\"></a></p>\n\n<p>Unfortunately my development server can't be moved over an <code>HTTPS</code> connection, so I will have to stick to <code>HTTP</code>.</p>\n\n<p>I've looked over the web to see if someone had my same issue, and didn't find much, the only tip I've found into another forum was to modify the <code>config.json</code> of the messaging broker in order to allow confidential operations on insecure channels: </p>\n\n<pre><code>{\n    \"name\" : \"HTTP\",\n    \"port\" : \"${BROKER_HTTP_PORT}\",\n    \"authenticationProvider\" : \"anonymous\",\n    \"allowConfidentialOperationsOnInsecureChannels\" : true, &lt;-- ADDED BY ME\n    \"protocols\" : [ \"HTTP\" ]\n}\n</code></pre>\n\n<p>I have restarted the broker service after this change, but still I keep on getting the same message when opening a payload. </p>\n\n<p>Does anybody have any idea to read the content of the payloads without actually doing it via a consumer? </p>\n"},{"tags":["java","math","pow","exponent"],"comments":[{"owner":{"account_id":3369711,"reputation":1263,"user_id":2829267,"display_name":"GoldRoger"},"score":0,"creation_date":1397925945,"post_id":23172704,"comment_id":35438595,"body_markdown":"Multiply maybe ?!? After all `next power = previous power * 2`..eg `2^1=2` `2^2 = 4`, `2^3 = 4*2 = 8`","body":"Multiply maybe ?!? After all <code>next power = previous power * 2</code>..eg <code>2^1=2</code> <code>2^2 = 4</code>, <code>2^3 = 4*2 = 8</code>"},{"owner":{"account_id":438602,"reputation":5680,"user_id":3538289,"display_name":"cevaris"},"score":0,"creation_date":1397926096,"post_id":23172704,"comment_id":35438650,"body_markdown":"Make sure to preserve whether the power is negative. If so, divide, not multiply.","body":"Make sure to preserve whether the power is negative. If so, divide, not multiply."},{"owner":{"account_id":433754,"reputation":38773,"user_id":995714,"accept_rate":56,"display_name":"phuclv"},"score":0,"creation_date":1412907075,"post_id":23172704,"comment_id":41252482,"body_markdown":"to get exponents you use `log`, not `pow`. `pow` is used to get the powers","body":"to get exponents you use <code>log</code>, not <code>pow</code>. <code>pow</code> is used to get the powers"}],"answers":[{"tags":[],"owner":{"account_id":451822,"reputation":1120,"user_id":847917,"accept_rate":79,"display_name":"tutak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1556437214,"creation_date":1397926067,"answer_id":23172747,"question_id":23172704,"body_markdown":"If there are no performance constraints you can do:\r\n  \r\n    double x1=1;\r\n\r\n    for(int i=1;i&lt;=numPowersOf2;i++){\r\n       x1 =* 2\r\n    }\r\n\r\n","title":"how to get exponents without using the math.pow for java","body":"<p>If there are no performance constraints you can do:</p>\n\n<pre><code>double x1=1;\n\nfor(int i=1;i&lt;=numPowersOf2;i++){\n   x1 =* 2\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":438602,"reputation":5680,"user_id":3538289,"display_name":"cevaris"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1397926228,"creation_date":1397926228,"answer_id":23172775,"question_id":23172704,"body_markdown":"Here is a post that allows both negative/positive power calculations.\r\n\r\nhttps://stackoverflow.com/a/23003962/3538289\r\n\r\nFunction to handle +/- exponents with O(log(n)) complexity.\r\n    \r\n    double power(double x, int n){\r\n     if(n==0)\r\n      return 1;\r\n\r\n      if(n&lt;0){\r\n          x = 1.0/x;\r\n          n = -n;\r\n      }\r\n     double ret = power(x,n/2);\r\n     ret = ret * ret;\r\n     if(n%2!=0)\r\n       ret = ret * x;\r\n     return ret;\r\n    }","title":"how to get exponents without using the math.pow for java","body":"<p>Here is a post that allows both negative/positive power calculations.</p>\n\n<p><a href=\"https://stackoverflow.com/a/23003962/3538289\">https://stackoverflow.com/a/23003962/3538289</a></p>\n\n<p>Function to handle +/- exponents with O(log(n)) complexity.</p>\n\n<pre><code>double power(double x, int n){\n if(n==0)\n  return 1;\n\n  if(n&lt;0){\n      x = 1.0/x;\n      n = -n;\n  }\n double ret = power(x,n/2);\n ret = ret * ret;\n if(n%2!=0)\n   ret = ret * x;\n return ret;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3093821,"reputation":53931,"user_id":3182664,"accept_rate":55,"display_name":"Marco13"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1397926413,"creation_date":1397926413,"answer_id":23172815,"question_id":23172704,"body_markdown":"Powers of 2 can simply be computed by [Bit Shift Operators][1]\r\n\r\n    int exponent = ...\r\n    int powerOf2 = 1 &lt;&lt; exponent;\r\n\r\nEven for the more general form, you should **not** compute an exponent by &quot;multiplying `n` times&quot;. Instead, you could do [Exponentiation by squaring][2]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html\r\n  [2]: http://en.wikipedia.org/wiki/Exponentiation_by_squaring","title":"how to get exponents without using the math.pow for java","body":"<p>Powers of 2 can simply be computed by <a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html\" rel=\"noreferrer\">Bit Shift Operators</a></p>\n\n<pre><code>int exponent = ...\nint powerOf2 = 1 &lt;&lt; exponent;\n</code></pre>\n\n<p>Even for the more general form, you should <strong>not</strong> compute an exponent by \"multiplying <code>n</code> times\". Instead, you could do <a href=\"http://en.wikipedia.org/wiki/Exponentiation_by_squaring\" rel=\"noreferrer\">Exponentiation by squaring</a></p>\n"},{"tags":[],"owner":{"account_id":1326895,"reputation":1276,"user_id":1271541,"accept_rate":78,"display_name":"wns349"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1397926611,"creation_date":1397926611,"answer_id":23172865,"question_id":23172704,"body_markdown":"You could implement your own `power` function.\r\n\r\nThe complexity of the `power` function depends on your requirements and constraints. \r\nFor example, you may constraint exponents to be only positive integer.\r\n\r\nHere&#39;s an example of `power` function:\r\n\r\n\tpublic static double power(double base, int exponent) {\r\n\t\tdouble ans = 1;\r\n\t\tif (exponent != 0) {\r\n\t\t\tint absExponent = exponent &gt; 0 ? exponent : (-1) * exponent;\r\n\t\t\tfor (int i = 1; i &lt;= absExponent; i++) {\r\n\t\t\t\tans *= base;\r\n\t\t\t}\r\n\r\n\t\t\tif (exponent &lt; 0) {\r\n\t\t\t\t// For negative exponent, must invert\r\n\t\t\t\tans = 1.0 / ans;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// exponent is 0\r\n\t\t\tans = 1;\r\n\t\t}\r\n\r\n\t\treturn ans;\r\n\t}","title":"how to get exponents without using the math.pow for java","body":"<p>You could implement your own <code>power</code> function.</p>\n\n<p>The complexity of the <code>power</code> function depends on your requirements and constraints. \nFor example, you may constraint exponents to be only positive integer.</p>\n\n<p>Here's an example of <code>power</code> function:</p>\n\n<pre><code>public static double power(double base, int exponent) {\n    double ans = 1;\n    if (exponent != 0) {\n        int absExponent = exponent &gt; 0 ? exponent : (-1) * exponent;\n        for (int i = 1; i &lt;= absExponent; i++) {\n            ans *= base;\n        }\n\n        if (exponent &lt; 0) {\n            // For negative exponent, must invert\n            ans = 1.0 / ans;\n        }\n    } else {\n        // exponent is 0\n        ans = 1;\n    }\n\n    return ans;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":90081,"reputation":17174,"user_id":248123,"accept_rate":100,"display_name":"andand"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1398050507,"creation_date":1397942592,"answer_id":23175730,"question_id":23172704,"body_markdown":"It&#39;s unclear whether your comment about using a loop is a desire or a requirement.  If it&#39;s just a desire there is a math identity you can use that doesn&#39;t rely on `Math.Pow`.\r\n&lt;pre&gt;&lt;code&gt;x&lt;sup&gt;y&lt;/sup&gt; = e&lt;sup&gt;y∙ln(x)&lt;/sup&gt;&lt;/code&gt;&lt;/pre&gt;\r\nIn Java this would look like\r\n\r\n    public static double myPow(double x, double y){\r\n      return Math.exp(y*Math.log(x));\r\n    }\r\nIf you really need a loop, you can use something like the following\r\n\r\n    public static double myPow(double b, int e) {\r\n      if (e &lt; 0) {\r\n        b = 1 / b;\r\n        e = -e;\r\n      }\r\n\r\n      double pow = 1.0;\r\n      double intermediate = b;\r\n      boolean fin = false;\r\n\r\n      while (e != 0) {\r\n        if (e % 2 == 0) {\r\n          intermediate *= intermediate;\r\n          fin = true;\r\n        } else {\r\n          pow *= intermediate;\r\n          intermediate = b;\r\n          fin = false;\r\n        }\r\n        e &gt;&gt;= 1;\r\n      }\r\n    \r\n      return pow * (fin ? intermediate : 1.0);\r\n    }","title":"how to get exponents without using the math.pow for java","body":"<p>It's unclear whether your comment about using a loop is a desire or a requirement.  If it's just a desire there is a math identity you can use that doesn't rely on <code>Math.Pow</code>.</p>\n\n<pre><code>x<sup>y</sup> = e<sup>y∙ln(x)</sup></code></pre>\n\n<p>In Java this would look like</p>\n\n<pre><code>public static double myPow(double x, double y){\n  return Math.exp(y*Math.log(x));\n}\n</code></pre>\n\n<p>If you really need a loop, you can use something like the following</p>\n\n<pre><code>public static double myPow(double b, int e) {\n  if (e &lt; 0) {\n    b = 1 / b;\n    e = -e;\n  }\n\n  double pow = 1.0;\n  double intermediate = b;\n  boolean fin = false;\n\n  while (e != 0) {\n    if (e % 2 == 0) {\n      intermediate *= intermediate;\n      fin = true;\n    } else {\n      pow *= intermediate;\n      intermediate = b;\n      fin = false;\n    }\n    e &gt;&gt;= 1;\n  }\n\n  return pow * (fin ? intermediate : 1.0);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5153939,"reputation":1,"user_id":4127672,"display_name":"noob.coder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1412905785,"creation_date":1412905664,"answer_id":26290698,"question_id":23172704,"body_markdown":"    // Set the variables\r\n    \r\n    int numPowersOf2;        //How many powers of 2 to compute\r\n    int nextPowerOf2 = 1;    //Current power of  2\r\n    int exponent = 0;  \r\n\r\n    \r\n    /* User input here */\r\n    \r\n    // Loop and print results\r\n            \r\n    do\r\n       {\r\n\r\n        System.out.println (&quot;2^&quot; + exponent + &quot; = &quot; + nextPowerOf2);\r\n\r\n        nextPowerOf2 = nextPowerOf2*2;\r\n\r\n        exponent ++;\r\n      } \r\n    while (exponent &lt; numPowersOf2);\r\n","title":"how to get exponents without using the math.pow for java","body":"<pre><code>// Set the variables\n\nint numPowersOf2;        //How many powers of 2 to compute\nint nextPowerOf2 = 1;    //Current power of  2\nint exponent = 0;  \n\n\n/* User input here */\n\n// Loop and print results\n\ndo\n   {\n\n    System.out.println (\"2^\" + exponent + \" = \" + nextPowerOf2);\n\n    nextPowerOf2 = nextPowerOf2*2;\n\n    exponent ++;\n  } \nwhile (exponent &lt; numPowersOf2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5218150,"reputation":1,"user_id":4172392,"display_name":"AVos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1414033005,"creation_date":1414033005,"answer_id":26520576,"question_id":23172704,"body_markdown":"here is how I managed without using &quot;myPow(x,n)&quot;, but by making use of &quot;while&quot;. (I&#39;ve only been learning Java for 2 weeks so excuse, if the code is a bit lumpy :)  \r\n\r\n        String base =&quot;&quot;;\r\n        String exp =&quot;&quot;;\r\n        BufferedReader value = new BufferedReader (new InputStreamReader(System.in));\r\n        try {System.out.print(&quot;enter the base number: &quot;);\r\n            base = value.readLine();\r\n            System.out.print(&quot;enter the exponent: &quot;);\r\n            exp = value.readLine(); }\r\n        catch(IOException e){System.out.print(&quot;error&quot;);}\r\n        \r\n        int x = Integer.valueOf(base);\r\n        int n = Integer.valueOf(exp);\r\n        int y=x;\r\n        int m=1;       \r\n        while(m&lt;n+1) {\r\n            System.out.println(x+&quot;^&quot;+m+&quot;= &quot;+y);\r\n            y=y*x;\r\n            m++;    \r\n        }","title":"how to get exponents without using the math.pow for java","body":"<p>here is how I managed without using \"myPow(x,n)\", but by making use of \"while\". (I've only been learning Java for 2 weeks so excuse, if the code is a bit lumpy :)  </p>\n\n<pre><code>    String base =\"\";\n    String exp =\"\";\n    BufferedReader value = new BufferedReader (new InputStreamReader(System.in));\n    try {System.out.print(\"enter the base number: \");\n        base = value.readLine();\n        System.out.print(\"enter the exponent: \");\n        exp = value.readLine(); }\n    catch(IOException e){System.out.print(\"error\");}\n\n    int x = Integer.valueOf(base);\n    int n = Integer.valueOf(exp);\n    int y=x;\n    int m=1;       \n    while(m&lt;n+1) {\n        System.out.println(x+\"^\"+m+\"= \"+y);\n        y=y*x;\n        m++;    \n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3862971,"reputation":348,"user_id":3200242,"accept_rate":100,"display_name":"mpatel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527532982,"creation_date":1527532982,"answer_id":50572009,"question_id":23172704,"body_markdown":"To implement pow function without using built-in Math.pow(), we can use the below recursive way to implement it. To optimize the runtime, we can store the result of power(a, b/2) and reuse it depending on the number of times is even or odd.\r\n\r\n    static float power(float a, int b)\r\n    {\r\n        float temp;\r\n        if( b == 0)\r\n            return 1;\r\n        temp = power(a, b/2); \r\n        \r\n        // if even times\r\n        if (b%2 == 0)\r\n            return temp*temp;\r\n        else  // if odd times\r\n        {\r\n            if(b &gt; 0)\r\n                return a * temp * temp;\r\n            else  // if negetive i.e. 3 ^ (-2)\r\n                return (temp * temp) / a;\r\n        }\r\n    } ","title":"how to get exponents without using the math.pow for java","body":"<p>To implement pow function without using built-in Math.pow(), we can use the below recursive way to implement it. To optimize the runtime, we can store the result of power(a, b/2) and reuse it depending on the number of times is even or odd.</p>\n\n<pre><code>static float power(float a, int b)\n{\n    float temp;\n    if( b == 0)\n        return 1;\n    temp = power(a, b/2); \n\n    // if even times\n    if (b%2 == 0)\n        return temp*temp;\n    else  // if odd times\n    {\n        if(b &gt; 0)\n            return a * temp * temp;\n        else  // if negetive i.e. 3 ^ (-2)\n            return (temp * temp) / a;\n    }\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":15224361,"reputation":33,"user_id":10985418,"display_name":"Ronit Danti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548775494,"creation_date":1548775494,"answer_id":54424321,"question_id":23172704,"body_markdown":"I know this answer is very late, but there&#39;s a very simple solution you can use if you are allowed to have variables that store the base and the exponent.\r\n\r\n    public class trythis {\r\n\t    public static void main(String[] args) {\r\n\t\t    int b = 2;\r\n\t\t    int p = 5;\r\n\t\t    int r = 1;\r\n\t\t    for (int i = 1; i &lt;= p; i++) {\r\n\t\t\t    r *= b;\r\n\t\t    }\r\n\t\t    System.out.println(r);\r\n\t    }\r\n    }\r\nThis will work with positive and negative bases, but not with negative powers.","title":"how to get exponents without using the math.pow for java","body":"<p>I know this answer is very late, but there's a very simple solution you can use if you are allowed to have variables that store the base and the exponent.</p>\n\n<pre><code>public class trythis {\n    public static void main(String[] args) {\n        int b = 2;\n        int p = 5;\n        int r = 1;\n        for (int i = 1; i &lt;= p; i++) {\n            r *= b;\n        }\n        System.out.println(r);\n    }\n}\n</code></pre>\n\n<p>This will work with positive and negative bases, but not with negative powers.</p>\n"},{"tags":[],"owner":{"account_id":1592127,"reputation":18171,"user_id":1475228,"accept_rate":84,"display_name":"Pritam Banerjee"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1556437399,"creation_date":1556345240,"answer_id":55877772,"question_id":23172704,"body_markdown":"You can try to do this based on this [explanation][1]:\r\n\r\n     public double myPow(double x, int n) {\r\n               \r\n        if(n &lt; 0) {\r\n            if(n == Integer.MIN_VALUE) {\r\n                n = (n+1)*(-1);\r\n                return 1.0/(myPow(x*x, n));\r\n            }\r\n            n = n*(-1);\r\n            return (double)1.0/myPow(x, n);\r\n        }\r\n        double y = 1;\r\n        while(n &gt; 0) {\r\n            if(n%2 == 0) {\r\n               x = x*x; \r\n            }\r\n            else {\r\n                y = y*x;\r\n                x = x*x;\r\n            }\r\n             n = n/2;\r\n        }\r\n        return y;   \r\n    }\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Exponentiation_by_squaring","title":"how to get exponents without using the math.pow for java","body":"<p>You can try to do this based on this <a href=\"https://en.wikipedia.org/wiki/Exponentiation_by_squaring\" rel=\"nofollow noreferrer\">explanation</a>:</p>\n\n<pre><code> public double myPow(double x, int n) {\n\n    if(n &lt; 0) {\n        if(n == Integer.MIN_VALUE) {\n            n = (n+1)*(-1);\n            return 1.0/(myPow(x*x, n));\n        }\n        n = n*(-1);\n        return (double)1.0/myPow(x, n);\n    }\n    double y = 1;\n    while(n &gt; 0) {\n        if(n%2 == 0) {\n           x = x*x; \n        }\n        else {\n            y = y*x;\n            x = x*x;\n        }\n         n = n/2;\n    }\n    return y;   \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16754073,"reputation":39,"user_id":12110449,"display_name":"Chen Jin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1569553659,"creation_date":1569552299,"answer_id":58127096,"question_id":23172704,"body_markdown":"To get the exponential value without using `Math.pow()` you can use a loop:\r\nAs long as the count is less than b (your power), your loop will have an \r\nadditional &quot;* a&quot; to it. Mathematically, it is the same as having a `Math.pow()` \r\n\r\n    while (count &lt;=b){\r\n        a= a* a;\r\n    }","title":"how to get exponents without using the math.pow for java","body":"<p>To get the exponential value without using <code>Math.pow()</code> you can use a loop:\nAs long as the count is less than b (your power), your loop will have an \nadditional \"* a\" to it. Mathematically, it is the same as having a <code>Math.pow()</code> </p>\n\n<pre><code>while (count &lt;=b){\n    a= a* a;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17289788,"reputation":49,"user_id":12521599,"display_name":"CodeZinx"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579384114,"creation_date":1579384114,"answer_id":59805202,"question_id":23172704,"body_markdown":"Try this simple code:\r\n\r\n    public static int exponent(int base, int power) {\r\n       int answer = 1;\r\n       \r\n       for(int i = 0; i &lt; power; i++) {\r\n          answer *= base;\r\n       }\r\n       \r\n       return answer;\r\n    }","title":"how to get exponents without using the math.pow for java","body":"<p>Try this simple code:</p>\n\n<pre><code>public static int exponent(int base, int power) {\n   int answer = 1;\n\n   for(int i = 0; i &lt; power; i++) {\n      answer *= base;\n   }\n\n   return answer;\n}\n</code></pre>\n"}],"owner":{"account_id":4352102,"reputation":61,"user_id":3552056,"display_name":"user3552056"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86340,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":12,"score":6,"last_activity_date":1663825625,"creation_date":1397925863,"question_id":23172704,"body_markdown":"This is my program\r\n\t\r\n\r\n    // ************************************************************\r\n    \t// PowersOf2.java\r\n    \t//\r\n    \t// Print out as many powers of 2 as the user requests\r\n    \t//\r\n    \t// ************************************************************\r\n    \r\n    \timport java.util.Scanner;\r\n\r\n    \tpublic class PowersOf2 {\r\n\r\n\t\tpublic static void main(String[] args)\r\n\r\n\t\t{\r\n\t\t\tint numPowersOf2; //How many powers of 2 to compute\r\n\t\t\tint nextPowerOf2 = 1; //Current power of 2\r\n\t\t\tint exponent= 1;\r\n\t\t\tdouble x;\r\n\t\t\t\r\n\t\t\t //Exponent for current power of 2 -- this\r\n\t\t\t//also serves as a counter for the loop Scanner\r\n\r\n\t\t\tScanner scan = new Scanner(System.in);\r\n\t\t\tSystem.out.println(&quot;How many powers of 2 would you like printed?&quot;);\r\n\t\t\tnumPowersOf2 = scan.nextInt();\r\n\t\t\tSystem.out.println (&quot;There will be &quot; + numPowersOf2 + &quot; powers of 2 printed&quot;);\r\n\t\t\t//initialize exponent -- the first thing printed is 2 to the what?\r\n\t\t\t\r\n\t\twhile( exponent &lt;= numPowersOf2)\r\n\t\t\t{\r\n\t\t\tdouble x1 = Math.pow(2, exponent);\r\n\t\t\tSystem.out.println(&quot;2^&quot; + exponent + &quot; = &quot; + x1);\r\n\t\t\t\t\texponent++;\r\n\t\t\t}\t\r\n\t//print out current power of 2\r\n\t//find next power of 2 -- how do you get this from the last one?\r\n\t//increment exponent\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\nThe thing is that I am not allowed to use the math.pow method, I need to find another way to get the correct answer in the while loop. ","title":"how to get exponents without using the math.pow for java","body":"<p>This is my program</p>\n\n<pre><code>// ************************************************************\n    // PowersOf2.java\n    //\n    // Print out as many powers of 2 as the user requests\n    //\n    // ************************************************************\n\n    import java.util.Scanner;\n\n    public class PowersOf2 {\n\n    public static void main(String[] args)\n\n    {\n        int numPowersOf2; //How many powers of 2 to compute\n        int nextPowerOf2 = 1; //Current power of 2\n        int exponent= 1;\n        double x;\n\n         //Exponent for current power of 2 -- this\n        //also serves as a counter for the loop Scanner\n\n        Scanner scan = new Scanner(System.in);\n        System.out.println(\"How many powers of 2 would you like printed?\");\n        numPowersOf2 = scan.nextInt();\n        System.out.println (\"There will be \" + numPowersOf2 + \" powers of 2 printed\");\n        //initialize exponent -- the first thing printed is 2 to the what?\n\n    while( exponent &lt;= numPowersOf2)\n        {\n        double x1 = Math.pow(2, exponent);\n        System.out.println(\"2^\" + exponent + \" = \" + x1);\n                exponent++;\n        }   \n//print out current power of 2\n//find next power of 2 -- how do you get this from the last one?\n//increment exponent\n\n    }\n}\n</code></pre>\n\n<p>The thing is that I am not allowed to use the math.pow method, I need to find another way to get the correct answer in the while loop. </p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams","confluent-schema-registry"],"comments":[{"owner":{"account_id":12856919,"reputation":74,"user_id":9452221,"display_name":"Erik"},"score":0,"creation_date":1610096653,"post_id":65624650,"comment_id":116029112,"body_markdown":"I&#39;ve never used protobuf. But it says `com.google.protobuf.DynamicMessage cannot be cast to iit.datahub.party.system_crm.v1.CustomerAddressBase$CustomerAddressBaseEntity ` I think I would try to find out what kind of class `com.google.protobuf.DynamicMessage` is.","body":"I&#39;ve never used protobuf. But it says <code>com.google.protobuf.DynamicMessage cannot be cast to iit.datahub.party.system_crm.v1.CustomerAddressBase$Customer&zwnj;&#8203;AddressBaseEntity </code> I think I would try to find out what kind of class <code>com.google.protobuf.DynamicMessage</code> is."},{"owner":{"account_id":247982,"reputation":2211,"user_id":523075,"accept_rate":39,"display_name":"giaosudau"},"score":0,"creation_date":1614091960,"post_id":65624650,"comment_id":117275156,"body_markdown":"I have the same error `DynamicMessage cannot be cast to `","body":"I have the same error <code>DynamicMessage cannot be cast to </code>"}],"answers":[{"tags":[],"owner":{"account_id":17825,"reputation":12989,"user_id":2572740,"accept_rate":20,"display_name":"Sachin Gaur"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1610351084,"creation_date":1610351084,"answer_id":65663022,"question_id":65624650,"body_markdown":"I am able to resolve it by changing this from\r\n\r\n    Map&lt;String, Object&gt; serdeConfig = getSerdeConfig();\r\n\r\nTo\r\n\r\n    Map&lt;String, String&gt; serdeConfig = getSerdeConfig();\r\n\r\nAs key &amp; Value for this map are both strings.","title":"Kafka Streams - Getting issue using Protobuf serde","body":"<p>I am able to resolve it by changing this from</p>\n<pre><code>Map&lt;String, Object&gt; serdeConfig = getSerdeConfig();\n</code></pre>\n<p>To</p>\n<pre><code>Map&lt;String, String&gt; serdeConfig = getSerdeConfig();\n</code></pre>\n<p>As key &amp; Value for this map are both strings.</p>\n"},{"tags":[],"owner":{"account_id":17283419,"reputation":1,"user_id":12516476,"display_name":"Sridhar M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663824957,"creation_date":1663824957,"answer_id":73809767,"question_id":65624650,"body_markdown":"serdeConfig.put(KafkaProtobufDeserializerConfig.SPECIFIC_PROTOBUF_VALUE_TYPE,ProtobufClass1.class);\r\n\r\nAdd above configuration line in &quot;createConfiguredSerde1()&quot; method like below\r\n\r\n    public static KafkaProtobufSerde&lt;ProtobufClass1&gt; createConfiguredSerde1() {\r\n            KafkaProtobufSerde&lt;ProtobufClass1&gt; serde = new KafkaProtobufSerde&lt;ProtobufClass1&gt;();\r\n            Map&lt;String, Object&gt; serdeConfig = getSerdeConfig();\r\n    serdeConfig.put(KafkaProtobufDeserializerConfig.SPECIFIC_PROTOBUF_VALUE_TYPE,ProtobufClass1.class);\r\n            serde.configure(serdeConfig, false);\r\n            return serde;\r\n        }","title":"Kafka Streams - Getting issue using Protobuf serde","body":"<p>serdeConfig.put(KafkaProtobufDeserializerConfig.SPECIFIC_PROTOBUF_VALUE_TYPE,ProtobufClass1.class);</p>\n<p>Add above configuration line in &quot;createConfiguredSerde1()&quot; method like below</p>\n<pre><code>public static KafkaProtobufSerde&lt;ProtobufClass1&gt; createConfiguredSerde1() {\n        KafkaProtobufSerde&lt;ProtobufClass1&gt; serde = new KafkaProtobufSerde&lt;ProtobufClass1&gt;();\n        Map&lt;String, Object&gt; serdeConfig = getSerdeConfig();\nserdeConfig.put(KafkaProtobufDeserializerConfig.SPECIFIC_PROTOBUF_VALUE_TYPE,ProtobufClass1.class);\n        serde.configure(serdeConfig, false);\n        return serde;\n    }\n</code></pre>\n"}],"owner":{"account_id":17825,"reputation":12989,"user_id":2572740,"accept_rate":20,"display_name":"Sachin Gaur"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1445,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1663824957,"creation_date":1610089103,"question_id":65624650,"body_markdown":"I am creating a Kafka Streams application and my topic data is coming from Protobuf. We are able to create Java code bindings for this. However, I am struggling to use correct serde to consume my data from topic. Can someone please share what wrong I am doing here.\r\n\r\nBelow is the properties definition, I am using:\r\n\r\n    Properties properties = new Properties();\r\n        properties.put(StreamsConfig.APPLICATION_ID_CONFIG, &quot;my-app-id-config&quot;);\r\n        properties.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;my-broker:my-port&quot;);\r\n        properties.put(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass());\r\n        properties.put(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, KafkaProtobufSerde.class);\r\n\r\n        properties.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\r\n        properties.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, false);\r\n\r\nMy Serde class\r\n\r\n    public class AppSerdes extends Serdes {\r\n\r\n        public static KafkaProtobufSerde&lt;ProtobufClass1&gt; createConfiguredSerde1() {\r\n            KafkaProtobufSerde&lt;ProtobufClass1&gt; serde = new KafkaProtobufSerde&lt;ProtobufClass1&gt;();\r\n            Map&lt;String, Object&gt; serdeConfig = getSerdeConfig();\r\n            serde.configure(serdeConfig, false);\r\n            return serde;\r\n        }\r\n\r\n        public static KafkaProtobufSerde&lt;ProtobufClass2&gt; createConfiguredSerde2() {\r\n            KafkaProtobufSerde&lt;ProtobufClass2&gt; serde = new KafkaProtobufSerde&lt;ProtobufClass2&gt;();\r\n            Map&lt;String, Object&gt; serdeConfig = getSerdeConfig();\r\n            serde.configure(serdeConfig, false);\r\n            return serde;\r\n        }\r\n\r\n        private static Map&lt;String, Object&gt; getSerdeConfig() {\r\n            Map&lt;String, Object&gt; serdeConfig = new HashMap&lt;&gt;();\r\n            serdeConfig.put(AbstractKafkaSchemaSerDeConfig.SCHEMA_REGISTRY_URL_CONFIG, &quot;http://localhost:8081&quot;);\r\n\r\n            return serdeConfig;\r\n        }\r\n    }\r\n\r\nAnd this is how I am creating KStream and KTable instances:\r\n\r\n    StreamsBuilder streamBuilder = new StreamsBuilder();\r\n        KTable&lt;String, ProtobufClass1&gt; table = streamBuilder.table(&quot;topic1&quot;,\r\n                Consumed.with(AppSerdes.String(), AppSerdes.createConfiguredSerde1()));\r\n        KStream&lt;String, ProtobufClass2&gt; stream = streamBuilder.stream(&quot;topic2&quot;.\r\n                Consumed.with(AppSerdes.String(), AppSerdes.createConfiguredSerde2()));\r\n\r\n\r\nHowever, I am getting below error:\r\n\r\norg.apache.kafka.streams.errors.StreamsException: ClassCastException invoking Processor. Do the Processor&#39;s input types match the deserialized types? Check the Serde setup and change the default Serdes in StreamConfig or provide correct Serdes via method parameters. Make sure the Processor can accept the deserialized input of type key: java.lang.String, and value: com.google.protobuf.DynamicMessage.\r\nNote that although incorrect Serdes are a common cause of error, the cast exception might have another cause (in user code, for example). For example, if a processor wires in a store, but casts the generics incorrectly, a class cast exception could be raised during processing, but the cause would not be wrong Serdes.\r\n        at org.apache.kafka.streams.processor.internals.ProcessorNode.process(ProcessorNode.java:185)\r\n        at org.apache.kafka.streams.processor.internals.ProcessorContextImpl.forwardInternal(ProcessorContextImpl.java:273)\r\n        at org.apache.kafka.streams.processor.internals.ProcessorContextImpl.forward(ProcessorContextImpl.java:252)\r\n        at org.apache.kafka.streams.processor.internals.ProcessorContextImpl.forward(ProcessorContextImpl.java:219)\r\n        at org.apache.kafka.streams.processor.internals.SourceNode.process(SourceNode.java:86)\r\n        at org.apache.kafka.streams.processor.internals.StreamTask.lambda$process$1(StreamTask.java:703)\r\n        at org.apache.kafka.streams.processor.internals.metrics.StreamsMetricsImpl.maybeMeasureLatency(StreamsMetricsImpl.java:883)\r\n        at org.apache.kafka.streams.processor.internals.StreamTask.process(StreamTask.java:703)\r\n        at org.apache.kafka.streams.processor.internals.TaskManager.process(TaskManager.java:1105)\r\n        at org.apache.kafka.streams.processor.internals.StreamThread.runOnce(StreamThread.java:647)\r\n        at org.apache.kafka.streams.processor.internals.StreamThread.runLoop(StreamThread.java:553)\r\n        at org.apache.kafka.streams.processor.internals.StreamThread.run(StreamThread.java:512)\r\nCaused by: java.lang.ClassCastException: com.google.protobuf.DynamicMessage cannot be cast to iit.datahub.party.system_crm.v1.CustomerAddressBase$CustomerAddressBaseEntity\r\n        at org.apache.kafka.streams.kstream.internals.KStreamImpl.lambda$internalSelectKey$0(KStreamImpl.java:234)\r\n        at org.apache.kafka.streams.kstream.internals.KStreamMap$KStreamMapProcessor.process(KStreamMap.java:41)\r\n        at org.apache.kafka.streams.processor.internals.ProcessorAdapter.process(ProcessorAdapter.java:71)\r\n        at org.apache.kafka.streams.processor.internals.ProcessorNode.lambda$process$2(ProcessorNode.java:181)\r\n        at org.apache.kafka.streams.processor.internals.metrics.StreamsMetricsImpl.maybeMeasureLatency(StreamsMetricsImpl.java:883)\r\n        at org.apache.kafka.streams.processor.internals.ProcessorNode.process(ProcessorNode.java:181)\r\n        ... 11 more","title":"Kafka Streams - Getting issue using Protobuf serde","body":"<p>I am creating a Kafka Streams application and my topic data is coming from Protobuf. We are able to create Java code bindings for this. However, I am struggling to use correct serde to consume my data from topic. Can someone please share what wrong I am doing here.</p>\n<p>Below is the properties definition, I am using:</p>\n<pre><code>Properties properties = new Properties();\n    properties.put(StreamsConfig.APPLICATION_ID_CONFIG, &quot;my-app-id-config&quot;);\n    properties.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;my-broker:my-port&quot;);\n    properties.put(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass());\n    properties.put(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, KafkaProtobufSerde.class);\n\n    properties.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\n    properties.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, false);\n</code></pre>\n<p>My Serde class</p>\n<pre><code>public class AppSerdes extends Serdes {\n\n    public static KafkaProtobufSerde&lt;ProtobufClass1&gt; createConfiguredSerde1() {\n        KafkaProtobufSerde&lt;ProtobufClass1&gt; serde = new KafkaProtobufSerde&lt;ProtobufClass1&gt;();\n        Map&lt;String, Object&gt; serdeConfig = getSerdeConfig();\n        serde.configure(serdeConfig, false);\n        return serde;\n    }\n\n    public static KafkaProtobufSerde&lt;ProtobufClass2&gt; createConfiguredSerde2() {\n        KafkaProtobufSerde&lt;ProtobufClass2&gt; serde = new KafkaProtobufSerde&lt;ProtobufClass2&gt;();\n        Map&lt;String, Object&gt; serdeConfig = getSerdeConfig();\n        serde.configure(serdeConfig, false);\n        return serde;\n    }\n\n    private static Map&lt;String, Object&gt; getSerdeConfig() {\n        Map&lt;String, Object&gt; serdeConfig = new HashMap&lt;&gt;();\n        serdeConfig.put(AbstractKafkaSchemaSerDeConfig.SCHEMA_REGISTRY_URL_CONFIG, &quot;http://localhost:8081&quot;);\n\n        return serdeConfig;\n    }\n}\n</code></pre>\n<p>And this is how I am creating KStream and KTable instances:</p>\n<pre><code>StreamsBuilder streamBuilder = new StreamsBuilder();\n    KTable&lt;String, ProtobufClass1&gt; table = streamBuilder.table(&quot;topic1&quot;,\n            Consumed.with(AppSerdes.String(), AppSerdes.createConfiguredSerde1()));\n    KStream&lt;String, ProtobufClass2&gt; stream = streamBuilder.stream(&quot;topic2&quot;.\n            Consumed.with(AppSerdes.String(), AppSerdes.createConfiguredSerde2()));\n</code></pre>\n<p>However, I am getting below error:</p>\n<p>org.apache.kafka.streams.errors.StreamsException: ClassCastException invoking Processor. Do the Processor's input types match the deserialized types? Check the Serde setup and change the default Serdes in StreamConfig or provide correct Serdes via method parameters. Make sure the Processor can accept the deserialized input of type key: java.lang.String, and value: com.google.protobuf.DynamicMessage.\nNote that although incorrect Serdes are a common cause of error, the cast exception might have another cause (in user code, for example). For example, if a processor wires in a store, but casts the generics incorrectly, a class cast exception could be raised during processing, but the cause would not be wrong Serdes.\nat org.apache.kafka.streams.processor.internals.ProcessorNode.process(ProcessorNode.java:185)\nat org.apache.kafka.streams.processor.internals.ProcessorContextImpl.forwardInternal(ProcessorContextImpl.java:273)\nat org.apache.kafka.streams.processor.internals.ProcessorContextImpl.forward(ProcessorContextImpl.java:252)\nat org.apache.kafka.streams.processor.internals.ProcessorContextImpl.forward(ProcessorContextImpl.java:219)\nat org.apache.kafka.streams.processor.internals.SourceNode.process(SourceNode.java:86)\nat org.apache.kafka.streams.processor.internals.StreamTask.lambda$process$1(StreamTask.java:703)\nat org.apache.kafka.streams.processor.internals.metrics.StreamsMetricsImpl.maybeMeasureLatency(StreamsMetricsImpl.java:883)\nat org.apache.kafka.streams.processor.internals.StreamTask.process(StreamTask.java:703)\nat org.apache.kafka.streams.processor.internals.TaskManager.process(TaskManager.java:1105)\nat org.apache.kafka.streams.processor.internals.StreamThread.runOnce(StreamThread.java:647)\nat org.apache.kafka.streams.processor.internals.StreamThread.runLoop(StreamThread.java:553)\nat org.apache.kafka.streams.processor.internals.StreamThread.run(StreamThread.java:512)\nCaused by: java.lang.ClassCastException: com.google.protobuf.DynamicMessage cannot be cast to iit.datahub.party.system_crm.v1.CustomerAddressBase$CustomerAddressBaseEntity\nat org.apache.kafka.streams.kstream.internals.KStreamImpl.lambda$internalSelectKey$0(KStreamImpl.java:234)\nat org.apache.kafka.streams.kstream.internals.KStreamMap$KStreamMapProcessor.process(KStreamMap.java:41)\nat org.apache.kafka.streams.processor.internals.ProcessorAdapter.process(ProcessorAdapter.java:71)\nat org.apache.kafka.streams.processor.internals.ProcessorNode.lambda$process$2(ProcessorNode.java:181)\nat org.apache.kafka.streams.processor.internals.metrics.StreamsMetricsImpl.maybeMeasureLatency(StreamsMetricsImpl.java:883)\nat org.apache.kafka.streams.processor.internals.ProcessorNode.process(ProcessorNode.java:181)\n... 11 more</p>\n"},{"tags":["java","hashmap"],"comments":[{"owner":{"account_id":6006605,"reputation":15867,"user_id":4718350,"accept_rate":75,"display_name":"Chris"},"score":0,"creation_date":1663782432,"post_id":73804964,"comment_id":130322596,"body_markdown":"Where is your code?","body":"Where is your code?"},{"owner":{"account_id":9729385,"reputation":85,"user_id":7215021,"display_name":"Waleed Mahmood"},"score":0,"creation_date":1663783119,"post_id":73804964,"comment_id":130322842,"body_markdown":"Hi, i want to solve this in one of two languages if possible.","body":"Hi, i want to solve this in one of two languages if possible."}],"answers":[{"tags":[],"owner":{"account_id":4616092,"reputation":111,"user_id":3946362,"display_name":"Trixie Wolf"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663823793,"creation_date":1663785641,"answer_id":73805522,"question_id":73804964,"body_markdown":"Think of the password like a binary number as an incrementing counter:\r\n\r\n0000\r\n0001\r\n0010\r\n0011\r\n0100...\r\n\r\nEach bit can be &#39;on&#39; or &#39;off&#39;. The &quot;bits&quot; of your number are the substitutable letters, and in this case it makes more sense to do the incrementing from left to right.\r\n\r\nAt any given time, you&#39;re either checking a bit, or &quot;carrying&quot; an increment to the next bit. The letters that don&#39;t substitute always &quot;carry&quot; automatically. The letters that *do* substitute increment to the next &quot;value&quot; (you could do this with more than one substitution, like i = {i, I, l, 1}). If you would carry past the &quot;highest value&quot;, reset the &quot;bit&quot; to the initial value and &quot;carry&quot; to the next bit that would change. If that bit also carries, keep moving to the right, but if you change a bit, return to the first bit and continue from there.\r\n\r\nIf the process would go past the end of the word, it would reset the entire value to the initial one so you don&#39;t need to print that one and you can terminate the algorithm.\r\n\r\n**EDIT** (by asker request): Let&#39;s use your example to illustrate.\r\n\r\nIn your example, you have two values for five different &#39;common&#39; characters: &#39;a&#39;, &#39;e&#39;, &#39;i&#39;, &#39;o&#39;, and &#39;s&#39;. Think of each of these as set of ordered lists of &#39;changeable&#39; characters, such as { &lt;&#39;a&#39;, &#39;@&#39;&gt;, &lt;&#39;e&#39;, &#39;3&#39;&gt;, ... } and so on. If a letter doesn&#39;t have any alternatives, pretend it&#39;s in the set too, but it&#39;s just a list with a single character in it, like &lt;&#39;p&#39;&gt;. The reason the list is ordered is so that you can go through it systematically, which allows you to know when you&#39;ve tried all the values. The order doesn&#39;t matter, but if it helps you can imagine the &quot;base&quot; character is the common version.\r\n\r\nOne way to hold that information would be with a map from each possible character (like &#39;a&#39;, &#39;@&#39;, &#39;b&#39;, and so on) to a short array that lists the ones you want to interchange. If there&#39;s only one version of a character, you don&#39;t need to add it. So in the mapping, both &#39;a&#39; and &#39;@&#39; would be keys for the same sequence of characters &lt;&#39;a&#39;, &#39;@&#39;&gt;, and &#39;p&#39; wouldn&#39;t need to be defined at all.\r\n\r\nThe first string of characters is &quot;password&quot;, which you also store as the first word in your set of possible passwords. You also start with an index pointing to the first character in the string.\r\n\r\nThe algorithm does this. Look at the current index. Check if the value is in the map, and is not the last value in the list the mapping points to: e.g., if the list you find in the map for &#39;a&#39; or &#39;@&#39; is &lt;&#39;a&#39;, &#39;@&#39;&gt;, then &#39;a&#39; is not the last value, but &#39;@&#39; is the last value.\r\n\r\nIf it&#39;s in the map but it isn&#39;t the last value in its list, change the character to the next value in that list: so, &#39;a&#39; would become &#39;@&#39;. Then set the counter back to zero (even if it&#39;s already zero) and continue the loop. Also, every time you return to index zero, you must store the modified string in your set of passwords because it is now a new possible password.\r\n\r\nIf it IS at the last value (or if it&#39;s not in the map, in which case it&#39;s always at the last value because there&#39;s only one version), you have to carry instead. Change the character back to the first value in the list (so &#39;@&#39; becomes &#39;a&#39; again, and &#39;p&#39; doesn&#39;t change), and increment the index. Don&#39;t add the current word to the set of passwords, though! You aren&#39;t done changing it until it returns to index 0, and it&#39;s currently the same as a password you&#39;ve already added.\r\n\r\nIf the index would go past the end of the string, you&#39;ve collected all possible passwords (and the string should now be the same as it was initially) so you can stop.\r\n\r\nSo in your example, we start by looking at index and see that index 0 is not past the end of the string. Then we look at &#39;p&#39; and it isn&#39;t found in the map, so we &#39;carry&#39;: increment the index and repeat the loop. Now we&#39;re at index 1 and see &#39;a&#39;, which is in the map, pointing to &lt;&#39;a&#39;, &#39;@&#39;&gt;. Since there&#39;s at least one character after &#39;a&#39; in that list, we change &#39;a&#39; to the next character &#39;@&#39;. Making any change other than a carry means we store this new password, and return to index 0 to repeat the loop. (The next time we see index 1, we&#39;ll change it back to &#39;a&#39;, but not store the password because we need to &#39;carry&#39; and continue walking through the string until we find something new to change or reach the end.)\r\n\r\n(Note that I simplified this with the assumption that you always start testing with the &quot;least&quot; character in the list, so you&#39;d test &quot;password&quot; as an initial string, not &quot;p@s$word&quot;. It&#39;s not too difficult to modify it to work in the other cases, but may be more efficient to just do a first pass through the test string and set it to all &#39;base&#39; characters, then take that as the initial password.)","title":"All Possible Combinations and their Substitutions given a string","body":"<p>Think of the password like a binary number as an incrementing counter:</p>\n<p>0000\n0001\n0010\n0011\n0100...</p>\n<p>Each bit can be 'on' or 'off'. The &quot;bits&quot; of your number are the substitutable letters, and in this case it makes more sense to do the incrementing from left to right.</p>\n<p>At any given time, you're either checking a bit, or &quot;carrying&quot; an increment to the next bit. The letters that don't substitute always &quot;carry&quot; automatically. The letters that <em>do</em> substitute increment to the next &quot;value&quot; (you could do this with more than one substitution, like i = {i, I, l, 1}). If you would carry past the &quot;highest value&quot;, reset the &quot;bit&quot; to the initial value and &quot;carry&quot; to the next bit that would change. If that bit also carries, keep moving to the right, but if you change a bit, return to the first bit and continue from there.</p>\n<p>If the process would go past the end of the word, it would reset the entire value to the initial one so you don't need to print that one and you can terminate the algorithm.</p>\n<p><strong>EDIT</strong> (by asker request): Let's use your example to illustrate.</p>\n<p>In your example, you have two values for five different 'common' characters: 'a', 'e', 'i', 'o', and 's'. Think of each of these as set of ordered lists of 'changeable' characters, such as { &lt;'a', '@'&gt;, &lt;'e', '3'&gt;, ... } and so on. If a letter doesn't have any alternatives, pretend it's in the set too, but it's just a list with a single character in it, like &lt;'p'&gt;. The reason the list is ordered is so that you can go through it systematically, which allows you to know when you've tried all the values. The order doesn't matter, but if it helps you can imagine the &quot;base&quot; character is the common version.</p>\n<p>One way to hold that information would be with a map from each possible character (like 'a', '@', 'b', and so on) to a short array that lists the ones you want to interchange. If there's only one version of a character, you don't need to add it. So in the mapping, both 'a' and '@' would be keys for the same sequence of characters &lt;'a', '@'&gt;, and 'p' wouldn't need to be defined at all.</p>\n<p>The first string of characters is &quot;password&quot;, which you also store as the first word in your set of possible passwords. You also start with an index pointing to the first character in the string.</p>\n<p>The algorithm does this. Look at the current index. Check if the value is in the map, and is not the last value in the list the mapping points to: e.g., if the list you find in the map for 'a' or '@' is &lt;'a', '@'&gt;, then 'a' is not the last value, but '@' is the last value.</p>\n<p>If it's in the map but it isn't the last value in its list, change the character to the next value in that list: so, 'a' would become '@'. Then set the counter back to zero (even if it's already zero) and continue the loop. Also, every time you return to index zero, you must store the modified string in your set of passwords because it is now a new possible password.</p>\n<p>If it IS at the last value (or if it's not in the map, in which case it's always at the last value because there's only one version), you have to carry instead. Change the character back to the first value in the list (so '@' becomes 'a' again, and 'p' doesn't change), and increment the index. Don't add the current word to the set of passwords, though! You aren't done changing it until it returns to index 0, and it's currently the same as a password you've already added.</p>\n<p>If the index would go past the end of the string, you've collected all possible passwords (and the string should now be the same as it was initially) so you can stop.</p>\n<p>So in your example, we start by looking at index and see that index 0 is not past the end of the string. Then we look at 'p' and it isn't found in the map, so we 'carry': increment the index and repeat the loop. Now we're at index 1 and see 'a', which is in the map, pointing to &lt;'a', '@'&gt;. Since there's at least one character after 'a' in that list, we change 'a' to the next character '@'. Making any change other than a carry means we store this new password, and return to index 0 to repeat the loop. (The next time we see index 1, we'll change it back to 'a', but not store the password because we need to 'carry' and continue walking through the string until we find something new to change or reach the end.)</p>\n<p>(Note that I simplified this with the assumption that you always start testing with the &quot;least&quot; character in the list, so you'd test &quot;password&quot; as an initial string, not &quot;p@s$word&quot;. It's not too difficult to modify it to work in the other cases, but may be more efficient to just do a first pass through the test string and set it to all 'base' characters, then take that as the initial password.)</p>\n"}],"owner":{"account_id":9729385,"reputation":85,"user_id":7215021,"display_name":"Waleed Mahmood"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":256,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1663823793,"creation_date":1663782341,"question_id":73804964,"body_markdown":"I am working on a problem:\r\n\r\nGiven a password represented as a string and a character map that contains common characters and substitutions, create a list of all possible password combinations that can be created.\r\n\r\nMap: {a=@, s=$, E=3, i=!, o=0}\r\n\r\nPassword String: &quot;password&quot;\r\n\r\n|Possible outcomes|\r\n|-----------------|\r\n|p@ssword|\r\n|p@$sword|\r\n|pa$sword|\r\n|p@s$word|\r\n|p@$$word|\r\n|pa$$word|\r\n|pas$word|\r\n|p@ssw0rd|\r\n|p@$sw0rd|\r\n|pa$sw0rd|\r\n|p@s$w0rd|\r\n|p@$$w0rd|\r\n|pa$$w0rd|\r\n|pas$w0rd|\r\n|passw0rd|\r\n\r\nMy logic so far:\r\n\r\nReplace everything except the index you are on. This solution gives the most results but not complete result. It misses about 5 combinations.\r\n\r\nMy Code so far: it doesnt work and i havent implemented the solution above.\r\n\r\n    for(int i = 0;i &lt; arr.length;i++){\r\n            for(int j =i; j &lt; arr.length ; j++){\r\n                if(map.containsKey(arr[j])){\r\n                    arr[j] = map.get(arr[j]);\r\n                    \r\n                }\r\n                //list.add(arr);\r\n\r\n            }\r\n            list.add(arr);\r\n        }","title":"All Possible Combinations and their Substitutions given a string","body":"<p>I am working on a problem:</p>\n<p>Given a password represented as a string and a character map that contains common characters and substitutions, create a list of all possible password combinations that can be created.</p>\n<p>Map: {a=@, s=$, E=3, i=!, o=0}</p>\n<p>Password String: &quot;password&quot;</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Possible outcomes</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>p@ssword</td>\n</tr>\n<tr>\n<td>p@$sword</td>\n</tr>\n<tr>\n<td>pa$sword</td>\n</tr>\n<tr>\n<td>p@s$word</td>\n</tr>\n<tr>\n<td>p@$$word</td>\n</tr>\n<tr>\n<td>pa$$word</td>\n</tr>\n<tr>\n<td>pas$word</td>\n</tr>\n<tr>\n<td>p@ssw0rd</td>\n</tr>\n<tr>\n<td>p@$sw0rd</td>\n</tr>\n<tr>\n<td>pa$sw0rd</td>\n</tr>\n<tr>\n<td>p@s$w0rd</td>\n</tr>\n<tr>\n<td>p@$$w0rd</td>\n</tr>\n<tr>\n<td>pa$$w0rd</td>\n</tr>\n<tr>\n<td>pas$w0rd</td>\n</tr>\n<tr>\n<td>passw0rd</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>My logic so far:</p>\n<p>Replace everything except the index you are on. This solution gives the most results but not complete result. It misses about 5 combinations.</p>\n<p>My Code so far: it doesnt work and i havent implemented the solution above.</p>\n<pre><code>for(int i = 0;i &lt; arr.length;i++){\n        for(int j =i; j &lt; arr.length ; j++){\n            if(map.containsKey(arr[j])){\n                arr[j] = map.get(arr[j]);\n                \n            }\n            //list.add(arr);\n\n        }\n        list.add(arr);\n    }\n</code></pre>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1663814272,"post_id":73808743,"comment_id":130329275,"body_markdown":"My guess would be `moneyString.split(&quot;\\\\.&quot;);` returns an array of 1 element.","body":"My guess would be <code>moneyString.split(&quot;\\\\.&quot;);</code> returns an array of 1 element."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1663814476,"post_id":73808743,"comment_id":130329304,"body_markdown":"By the way, the exception will point to a line number in your code. You could mark the line in the code you copy here.  For example: `int foo = bar / bin;  // **** Division by zero exception here ****`","body":"By the way, the exception will point to a line number in your code. You could mark the line in the code you copy here.  For example: <code>int foo = bar &#47; bin;  &#47;&#47; **** Division by zero exception here ****</code>"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1663814923,"post_id":73808743,"comment_id":130329365,"body_markdown":"See this question: https://stackoverflow.com/questions/5554734/what-causes-a-java-lang-arrayindexoutofboundsexception-and-how-do-i-prevent-it","body":"See this question: <a href=\"https://stackoverflow.com/questions/5554734/what-causes-a-java-lang-arrayindexoutofboundsexception-and-how-do-i-prevent-it\" title=\"what causes a java lang arrayindexoutofboundsexception and how do i prevent it\">stackoverflow.com/questions/5554734/&hellip;</a>"},{"owner":{"account_id":17538923,"reputation":11,"user_id":12721431,"display_name":"maddie pattie c"},"score":1,"creation_date":1663815064,"post_id":73808743,"comment_id":130329387,"body_markdown":"@OldDogProgrammer Thank you! I updated my post to show which line it was pointing to. I read the thread that you linked and I&#39;m still a little confused. (This was a sample code my tutor told me to follow and it wasn&#39;t explained well)","body":"@OldDogProgrammer Thank you! I updated my post to show which line it was pointing to. I read the thread that you linked and I&#39;m still a little confused. (This was a sample code my tutor told me to follow and it wasn&#39;t explained well)"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1663815629,"post_id":73808743,"comment_id":130329481,"body_markdown":"I would advise against using a floating point type (`double` or `float`) to represent money. It doesn&#39;t work well with decimal fractions. Try using an `int` variable that represents cents.  Or use `BigDecimal`.","body":"I would advise against using a floating point type (<code>double</code> or <code>float</code>) to represent money. It doesn&#39;t work well with decimal fractions. Try using an <code>int</code> variable that represents cents.  Or use <code>BigDecimal</code>."}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663822765,"creation_date":1663822765,"answer_id":73809544,"question_id":73808743,"body_markdown":"When sale amount is 92 and amount tended is 95, the total change is 3.\r\nHence `moneyString` is 3 and not 3.00\r\nTherefore `moneyString.split(&quot;\\\\.&quot;)` will return an array that contains a single element only and that&#39;s why you are getting `ArrayIndexOutOfBoundException`.\r\n\r\nYou just need to check the number of elements in `parts` and add code that handles different numbers of elements.\r\nAlso, as mentioned in the comments, it is better to use class [java.math.BigDecimal](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigDecimal.html) for money amounts (rather than `double`).\r\nRefer to this SO question (and answer): [How to display a number with always 2 decimal points using BigDecimal?\r\n](https://stackoverflow.com/questions/14515640/how-to-display-a-number-with-always-2-decimal-points-using-bigdecimal)\r\n\r\nNote that there is also [Java Money](https://javamoney.github.io/).\r\n\r\nIt is recommended to adhere to [Java naming conventions](https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html) which means that then name of your class should be `CashRegister` (and not `cashRegister`).\r\nRemember that Java code is case-sensitive.\r\n\r\nHere is my rewrite of your code. I check the number of elements in `parts` and handle the case where that number is zero or one or two.\r\n\r\nRefer to the *javadoc* for method [printf](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/PrintStream.html#printf(java.lang.String,java.lang.Object...)), I think you should change the code that calls that method. I have done so in the below code.\r\n```java\r\nimport java.math.BigDecimal;\r\nimport java.math.RoundingMode;\r\nimport java.util.Scanner;\r\n\r\npublic class CashRegister {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        //Collects sale amount from user\r\n        Scanner customerIn = new Scanner(System.in);\r\n        System.out.println(&quot;Please enter the sale amount&quot;);\r\n        double tmp = customerIn.nextDouble();\r\n\r\n        //represents the sale amount\r\n        BigDecimal saleAmt = new BigDecimal(tmp);\r\n\r\n        //Collects amount tended \r\n        System.out.println(&quot;Please enter amount tended by the customer&quot;);\r\n        tmp = customerIn.nextDouble();\r\n\r\n        //represents amount of money given by customer\r\n        BigDecimal cusTend = new BigDecimal(tmp);\r\n\r\n        //Outputs customer&#39;s total change\r\n        BigDecimal cusChange = cusTend.subtract(saleAmt);\r\n        cusChange.setScale(2, RoundingMode.HALF_UP);\r\n\r\n        //Splits change into Dollars and Cents\r\n        String moneyString = String.format(&quot;%.2f&quot;, cusChange.doubleValue());\r\n        System.out.printf(&quot;Total Change: %s%n&quot;, moneyString);\r\n        String[] parts = moneyString.split(&quot;\\\\.&quot;);\r\n        String dollars;\r\n        if (parts.length &gt; 0) {\r\n            dollars = parts[0];\r\n        }\r\n        else {\r\n            dollars = &quot;0&quot;;\r\n        }\r\n        String part2;\r\n        if (parts.length &gt; 1) {\r\n            part2 = parts[1];\r\n        }\r\n        else {\r\n            part2 = &quot;0&quot;;\r\n        }\r\n        double cents5 = Double.parseDouble(part2);\r\n\r\n        //Divides change by amount\r\n        int cents = (int)cents5;\r\n        int quarters = cents / 25;\r\n        int cents1 = cents % 25;\r\n        int dimes = cents1 / 10;\r\n        int cents2 = cents % 10;\r\n        int nickels = cents2 / 5;\r\n        int cents3 = cents % 5;\r\n        int pennies = cents3;\r\n\r\n        //Out prints the amount of dollars, quarters, dimes, nickles, and pennies \r\n        System.out.printf(&quot;%nDollars : %s%n&quot;, dollars);\r\n        System.out.printf(&quot;Quarters: %d%n&quot;, quarters);\r\n        System.out.printf(&quot;Dimes   : %d%n&quot;, dimes);\r\n        System.out.printf(&quot;Nickles : %d%n&quot;, nickels);\r\n        System.out.printf(&quot;Pennies : %d%n&quot;, pennies);\r\n    }\r\n}\r\n```\r\nHere is a sample run of the above code:\r\n```none\r\nPlease enter the sale amount\r\n92.00\r\nPlease enter amount tended by the customer\r\n95.00\r\nTotal Change: 3.00\r\n\r\nDollars : 3\r\nQuarters: 0\r\nDimes   : 0\r\nNickles : 0\r\nPennies : 0\r\n```\r\n","title":"ArrayIndexOutOfBoundsException when Running Data","body":"<p>When sale amount is 92 and amount tended is 95, the total change is 3.\nHence <code>moneyString</code> is 3 and not 3.00\nTherefore <code>moneyString.split(&quot;\\\\.&quot;)</code> will return an array that contains a single element only and that's why you are getting <code>ArrayIndexOutOfBoundException</code>.</p>\n<p>You just need to check the number of elements in <code>parts</code> and add code that handles different numbers of elements.\nAlso, as mentioned in the comments, it is better to use class <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\">java.math.BigDecimal</a> for money amounts (rather than <code>double</code>).\nRefer to this SO question (and answer): <a href=\"https://stackoverflow.com/questions/14515640/how-to-display-a-number-with-always-2-decimal-points-using-bigdecimal\">How to display a number with always 2 decimal points using BigDecimal?\n</a></p>\n<p>Note that there is also <a href=\"https://javamoney.github.io/\" rel=\"nofollow noreferrer\">Java Money</a>.</p>\n<p>It is recommended to adhere to <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">Java naming conventions</a> which means that then name of your class should be <code>CashRegister</code> (and not <code>cashRegister</code>).\nRemember that Java code is case-sensitive.</p>\n<p>Here is my rewrite of your code. I check the number of elements in <code>parts</code> and handle the case where that number is zero or one or two.</p>\n<p>Refer to the <em>javadoc</em> for method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/PrintStream.html#printf(java.lang.String,java.lang.Object...)\" rel=\"nofollow noreferrer\">printf</a>, I think you should change the code that calls that method. I have done so in the below code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.math.BigDecimal;\nimport java.math.RoundingMode;\nimport java.util.Scanner;\n\npublic class CashRegister {\n\n    public static void main(String[] args) {\n\n        //Collects sale amount from user\n        Scanner customerIn = new Scanner(System.in);\n        System.out.println(&quot;Please enter the sale amount&quot;);\n        double tmp = customerIn.nextDouble();\n\n        //represents the sale amount\n        BigDecimal saleAmt = new BigDecimal(tmp);\n\n        //Collects amount tended \n        System.out.println(&quot;Please enter amount tended by the customer&quot;);\n        tmp = customerIn.nextDouble();\n\n        //represents amount of money given by customer\n        BigDecimal cusTend = new BigDecimal(tmp);\n\n        //Outputs customer's total change\n        BigDecimal cusChange = cusTend.subtract(saleAmt);\n        cusChange.setScale(2, RoundingMode.HALF_UP);\n\n        //Splits change into Dollars and Cents\n        String moneyString = String.format(&quot;%.2f&quot;, cusChange.doubleValue());\n        System.out.printf(&quot;Total Change: %s%n&quot;, moneyString);\n        String[] parts = moneyString.split(&quot;\\\\.&quot;);\n        String dollars;\n        if (parts.length &gt; 0) {\n            dollars = parts[0];\n        }\n        else {\n            dollars = &quot;0&quot;;\n        }\n        String part2;\n        if (parts.length &gt; 1) {\n            part2 = parts[1];\n        }\n        else {\n            part2 = &quot;0&quot;;\n        }\n        double cents5 = Double.parseDouble(part2);\n\n        //Divides change by amount\n        int cents = (int)cents5;\n        int quarters = cents / 25;\n        int cents1 = cents % 25;\n        int dimes = cents1 / 10;\n        int cents2 = cents % 10;\n        int nickels = cents2 / 5;\n        int cents3 = cents % 5;\n        int pennies = cents3;\n\n        //Out prints the amount of dollars, quarters, dimes, nickles, and pennies \n        System.out.printf(&quot;%nDollars : %s%n&quot;, dollars);\n        System.out.printf(&quot;Quarters: %d%n&quot;, quarters);\n        System.out.printf(&quot;Dimes   : %d%n&quot;, dimes);\n        System.out.printf(&quot;Nickles : %d%n&quot;, nickels);\n        System.out.printf(&quot;Pennies : %d%n&quot;, pennies);\n    }\n}\n</code></pre>\n<p>Here is a sample run of the above code:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Please enter the sale amount\n92.00\nPlease enter amount tended by the customer\n95.00\nTotal Change: 3.00\n\nDollars : 3\nQuarters: 0\nDimes   : 0\nNickles : 0\nPennies : 0\n</code></pre>\n"}],"owner":{"account_id":17538923,"reputation":11,"user_id":12721431,"display_name":"maddie pattie c"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1663822765,"creation_date":1663813869,"question_id":73808743,"body_markdown":"I am still pretty new to learning java and for an assignment I was given a set of data to run with my code.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAfter inputting some of the data, this exception appeared \r\n\r\n  [![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mrcD6.png\r\n  [2]: https://i.stack.imgur.com/ApYCd.png\r\n\r\nI can&#39;t figure out why an exception is being thrown after I prompt user for money tended by the customer. Help is appreciated. Here is my code below:\r\n```java\r\npublic class cashRegister \r\n{\r\n    public static void main(String[] args)\r\n    {\r\n        //represents the sale amount\r\n        double saleAmt;\r\n        //represents amount of money given by customer\r\n        double cusTend;\r\n        //represents customer&#39;s change \r\n        double cusChange = 0;\r\n\r\n        //Collects sale amount from user\r\n        Scanner customerIn = new Scanner(System.in);\r\n        System.out.println(&quot;Please enter the sale amount&quot;);\r\n        saleAmt = customerIn.nextDouble();\r\n        //Collects amount tended \r\n        System.out.println(&quot;Please enter amount tended by the customer&quot;);\r\n        cusTend = customerIn.nextDouble();\r\n        //Outputs customer&#39;s total change\r\n        cusChange = cusTend - saleAmt;\r\n        System.out.printf(&quot;Total Change: %.2f&quot;, cusChange,&quot;\\n&quot;);\r\n        //Splits change into Dollars and Cents \r\n        DecimalFormat decimalFormat = new DecimalFormat();\r\n        String moneyString = decimalFormat.format(cusChange);\r\n        String[] parts = moneyString.split(&quot;\\\\.&quot;);\r\n        String part2 = parts[1]; //ArrayIndexOutOfBoundException here\r\n        String dollars= parts[0];\r\n        double cents5 = Double.parseDouble(part2);\r\n        //Divides change by amount\r\n        int cents = (int)cents5;\r\n        int quarters = cents / 25;\r\n        int cents1 = cents % 25;\r\n        int dimes = cents1 / 10;\r\n        int cents2 = cents % 10;\r\n        int nickels = cents2 / 5;\r\n        int cents3 = cents % 5;\r\n        int pennies = cents3;\r\n\r\n        //Out prints the amount of dollars, quarters, dimes, nickles, and pennies \r\n        System.out.printf(&quot;\\n&quot;+ &quot;Dollars :&quot;+ dollars + &quot;\\n&quot; );\r\n        System.out.printf(&quot;Quarters :&quot; + quarters + &quot;\\n&quot;);\r\n        System.out.printf(&quot;Dimes :&quot;+ dimes +&quot;\\n&quot;);\r\n        System.out.printf(&quot;Nickles :&quot; + nickels +&quot;\\n&quot;);\r\n        System.out.printf(&quot;Pennies :&quot; + pennies + &quot;\\n&quot;);\r\n\r\n    }\r\n}\r\n```\r\n","title":"ArrayIndexOutOfBoundsException when Running Data","body":"<p>I am still pretty new to learning java and for an assignment I was given a set of data to run with my code.</p>\n<p><a href=\"https://i.stack.imgur.com/mrcD6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mrcD6.png\" alt=\"enter image description here\" /></a></p>\n<p>After inputting some of the data, this exception appeared</p>\n<p><a href=\"https://i.stack.imgur.com/ApYCd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ApYCd.png\" alt=\"enter image description here\" /></a></p>\n<p>I can't figure out why an exception is being thrown after I prompt user for money tended by the customer. Help is appreciated. Here is my code below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class cashRegister \n{\n    public static void main(String[] args)\n    {\n        //represents the sale amount\n        double saleAmt;\n        //represents amount of money given by customer\n        double cusTend;\n        //represents customer's change \n        double cusChange = 0;\n\n        //Collects sale amount from user\n        Scanner customerIn = new Scanner(System.in);\n        System.out.println(&quot;Please enter the sale amount&quot;);\n        saleAmt = customerIn.nextDouble();\n        //Collects amount tended \n        System.out.println(&quot;Please enter amount tended by the customer&quot;);\n        cusTend = customerIn.nextDouble();\n        //Outputs customer's total change\n        cusChange = cusTend - saleAmt;\n        System.out.printf(&quot;Total Change: %.2f&quot;, cusChange,&quot;\\n&quot;);\n        //Splits change into Dollars and Cents \n        DecimalFormat decimalFormat = new DecimalFormat();\n        String moneyString = decimalFormat.format(cusChange);\n        String[] parts = moneyString.split(&quot;\\\\.&quot;);\n        String part2 = parts[1]; //ArrayIndexOutOfBoundException here\n        String dollars= parts[0];\n        double cents5 = Double.parseDouble(part2);\n        //Divides change by amount\n        int cents = (int)cents5;\n        int quarters = cents / 25;\n        int cents1 = cents % 25;\n        int dimes = cents1 / 10;\n        int cents2 = cents % 10;\n        int nickels = cents2 / 5;\n        int cents3 = cents % 5;\n        int pennies = cents3;\n\n        //Out prints the amount of dollars, quarters, dimes, nickles, and pennies \n        System.out.printf(&quot;\\n&quot;+ &quot;Dollars :&quot;+ dollars + &quot;\\n&quot; );\n        System.out.printf(&quot;Quarters :&quot; + quarters + &quot;\\n&quot;);\n        System.out.printf(&quot;Dimes :&quot;+ dimes +&quot;\\n&quot;);\n        System.out.printf(&quot;Nickles :&quot; + nickels +&quot;\\n&quot;);\n        System.out.printf(&quot;Pennies :&quot; + pennies + &quot;\\n&quot;);\n\n    }\n}\n</code></pre>\n"},{"tags":["java","android","formatting","localdate"],"comments":[{"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":0,"creation_date":1664516721,"post_id":73809017,"comment_id":130493993,"body_markdown":"I guess it is because of `Locale`. Try with `DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;, Locale.ENGLISH)`. Check [Never use SimpleDateFormat or DateTimeFormatter without a Locale for more examples](https://stackoverflow.com/a/65544056/10819573) to learn more about it.","body":"I guess it is because of <code>Locale</code>. Try with <code>DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;, Locale.ENGLISH)</code>. Check <a href=\"https://stackoverflow.com/a/65544056/10819573\">Never use SimpleDateFormat or DateTimeFormatter without a Locale for more examples</a> to learn more about it."}],"answers":[{"tags":[],"owner":{"account_id":21132288,"reputation":409,"user_id":15536371,"display_name":"Tariq Hussain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663822345,"creation_date":1663822345,"answer_id":73809508,"question_id":73809017,"body_markdown":"Here is simple method to format `millies` or `long` date to `Date Format`\r\n\r\n    fun getDate(milliSeconds: Long, dateFormat: String = &quot;d MMM, yyyy&quot;): String? {\r\n    // Create a DateFormatter object for displaying date in specified format.\r\n    val formatter = SimpleDateFormat(dateFormat)\r\n\r\n    // Create a calendar object that will convert the date and time value in milliseconds to date.\r\n    val calendar: Calendar = Calendar.getInstance()\r\n    calendar.timeInMillis = milliSeconds\r\n    return formatter.format(calendar.time)\r\n}","title":"how to format a string into a LocalDate","body":"<p>Here is simple method to format <code>millies</code> or <code>long</code> date to <code>Date Format</code></p>\n<pre><code>fun getDate(milliSeconds: Long, dateFormat: String = &quot;d MMM, yyyy&quot;): String? {\n// Create a DateFormatter object for displaying date in specified format.\nval formatter = SimpleDateFormat(dateFormat)\n\n// Create a calendar object that will convert the date and time value in milliseconds to date.\nval calendar: Calendar = Calendar.getInstance()\ncalendar.timeInMillis = milliSeconds\nreturn formatter.format(calendar.time)\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":19505218,"reputation":191,"user_id":14270425,"display_name":"Ukeme Elijah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663822345,"creation_date":1663817116,"question_id":73809017,"body_markdown":"I have an android app that requires user&#39;s date of birth and the data type is LocalDate because the backend uses it to calculate the age of that user and assign how much he/she will have to pay for the registration depending on the age. I have a button that when click, it will pop up a calendar dialog for the user to select the date of birth and display the date selected on the button as a text.The text on the button which is the selected date of birth will be read and stored as a string so that it can be used as the parameter for the date of birth. The button is working correctly but I&#39;m having issue in the formatting because I want to format the string into a LocalDate. I&#39;m getting this error that says Text &#39;2000-10-23&#39; could not be parsed at index 4. I don&#39;t know what I did wrong.\r\n    \r\n    Here is the button in the XML\r\n    \r\n    &lt;Button\r\n                                android:id=&quot;@+id/btn_date_of_birth&quot;\r\n                                style=&quot;@style/Base.Widget.AppCompat.Spinner.Underlined&quot;\r\n                                android:layout_width=&quot;0dp&quot;\r\n                                android:layout_height=&quot;wrap_content&quot;\r\n                                android:layout_weight=&quot;2&quot;\r\n                                android:text=&quot;select here&quot;\r\n                                android:theme=&quot;@style/EditText.Grey&quot;\r\n                                android:textAppearance=&quot;@style/TextAppearance.AppCompat.Medium&quot;\r\n                                android:textColor=&quot;@color/grey_40&quot; /&gt;\r\n    \r\n    Here is how I set the calendar and did the formatting\r\n    \r\n    private void setDate(){\r\n    \r\n            Calendar cal = Calendar.getInstance();\r\n            int year = cal.get(Calendar.YEAR);\r\n            int month = cal.get(Calendar.MONTH);\r\n            int day = cal.get(Calendar.DAY_OF_MONTH);\r\n    \r\n            android.app.DatePickerDialog dialog = new DatePickerDialog(\r\n                    PatientRegistrationActivity.this,\r\n                    android.R.style.Theme_Holo_Light_Dialog_MinWidth,\r\n                    mDateSetListener,\r\n                    year,month,day);\r\n            dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n            dialog.show();\r\n    \r\n            mDateSetListener = new DatePickerDialog.OnDateSetListener() {\r\n                @Override\r\n                public void onDateSet(DatePicker datePicker, int year, int month, int day) {\r\n                    month = month + 1;\r\n    \r\n                    String date = year + &quot;-&quot; + month + &quot;-&quot; + day;\r\n                    btnDateOfBirth.setText(date);\r\n                }\r\n            };\r\n        }\r\n    I now call the setDate method when the button is click\r\n    \r\n    btnDateOfBirth.setOnClickListener(view -&gt; {\r\n                setDate();\r\n            });\r\n    \r\n    Now I want to format the date of birth displayed on the button and pass it to the date of birth which is of type LocalDate \r\n    \r\n    String dateTime = btnDateOfBirth.getText().toString();\r\n    userDto.setDateOfBirth(LocalDate.parse(dateTime, DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;)));\r\n    \r\n    But this is giving me an error that says Text &#39;2000-10-23&#39; could not be parsed at index 4.\r\n    Please how can I resolve this issue, I really need help","title":"how to format a string into a LocalDate","body":"<p>I have an android app that requires user's date of birth and the data type is LocalDate because the backend uses it to calculate the age of that user and assign how much he/she will have to pay for the registration depending on the age. I have a button that when click, it will pop up a calendar dialog for the user to select the date of birth and display the date selected on the button as a text.The text on the button which is the selected date of birth will be read and stored as a string so that it can be used as the parameter for the date of birth. The button is working correctly but I'm having issue in the formatting because I want to format the string into a LocalDate. I'm getting this error that says Text '2000-10-23' could not be parsed at index 4. I don't know what I did wrong.</p>\n<pre><code>Here is the button in the XML\n\n&lt;Button\n                            android:id=&quot;@+id/btn_date_of_birth&quot;\n                            style=&quot;@style/Base.Widget.AppCompat.Spinner.Underlined&quot;\n                            android:layout_width=&quot;0dp&quot;\n                            android:layout_height=&quot;wrap_content&quot;\n                            android:layout_weight=&quot;2&quot;\n                            android:text=&quot;select here&quot;\n                            android:theme=&quot;@style/EditText.Grey&quot;\n                            android:textAppearance=&quot;@style/TextAppearance.AppCompat.Medium&quot;\n                            android:textColor=&quot;@color/grey_40&quot; /&gt;\n\nHere is how I set the calendar and did the formatting\n\nprivate void setDate(){\n\n        Calendar cal = Calendar.getInstance();\n        int year = cal.get(Calendar.YEAR);\n        int month = cal.get(Calendar.MONTH);\n        int day = cal.get(Calendar.DAY_OF_MONTH);\n\n        android.app.DatePickerDialog dialog = new DatePickerDialog(\n                PatientRegistrationActivity.this,\n                android.R.style.Theme_Holo_Light_Dialog_MinWidth,\n                mDateSetListener,\n                year,month,day);\n        dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\n        dialog.show();\n\n        mDateSetListener = new DatePickerDialog.OnDateSetListener() {\n            @Override\n            public void onDateSet(DatePicker datePicker, int year, int month, int day) {\n                month = month + 1;\n\n                String date = year + &quot;-&quot; + month + &quot;-&quot; + day;\n                btnDateOfBirth.setText(date);\n            }\n        };\n    }\nI now call the setDate method when the button is click\n\nbtnDateOfBirth.setOnClickListener(view -&gt; {\n            setDate();\n        });\n\nNow I want to format the date of birth displayed on the button and pass it to the date of birth which is of type LocalDate \n\nString dateTime = btnDateOfBirth.getText().toString();\nuserDto.setDateOfBirth(LocalDate.parse(dateTime, DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;)));\n\nBut this is giving me an error that says Text '2000-10-23' could not be parsed at index 4.\nPlease how can I resolve this issue, I really need help\n</code></pre>\n"},{"tags":["java","linux","elasticsearch"],"answers":[{"tags":[],"owner":{"account_id":1391655,"reputation":14169,"user_id":1432281,"display_name":"dadoonet"},"down_vote_count":4,"up_vote_count":2,"is_accepted":false,"score":-2,"last_activity_date":1508162796,"creation_date":1508162796,"answer_id":46772301,"question_id":46771233,"body_markdown":"Did you read [that page](https://www.elastic.co/guide/en/elasticsearch/reference/current/file-descriptors.html)? \r\n\r\nIt says:\r\n\r\nset ulimit -n 65536 as root before starting Elasticsearch, or set nofile to 65536 in /etc/security/limits.conf.","title":"max file descriptors for elasticsearch process is too low","body":"<p>Did you read <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/file-descriptors.html\" rel=\"nofollow noreferrer\">that page</a>? </p>\n\n<p>It says:</p>\n\n<p>set ulimit -n 65536 as root before starting Elasticsearch, or set nofile to 65536 in /etc/security/limits.conf.</p>\n"},{"tags":[],"owner":{"account_id":1657423,"reputation":899,"user_id":1526565,"display_name":"mrtipale"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1545027787,"creation_date":1545027787,"answer_id":53809888,"question_id":46771233,"body_markdown":"Try this: (got it from 2-3 different sources)\r\n\r\nadd in `$ES_HOME/config/elasticsearch.yml`\r\n\r\n    network.host: 0.0.0.0\r\n    http.port: 9200\r\n    transport.host: localhost\r\n    transport.tcp.port: 9300\r\n\r\nIf its local dev setup, also use lesser memory options if possible:\r\n\r\nadd/modify in `$ES_HOME/config/jvm.options`\r\n\r\n    # Xms represents the initial size of total heap space\r\n    # Xmx represents the maximum size of total heap space\r\n    \r\n    -Xms512m\r\n    -Xmx512m\r\n\r\n","title":"max file descriptors for elasticsearch process is too low","body":"<p>Try this: (got it from 2-3 different sources)</p>\n\n<p>add in <code>$ES_HOME/config/elasticsearch.yml</code></p>\n\n<pre><code>network.host: 0.0.0.0\nhttp.port: 9200\ntransport.host: localhost\ntransport.tcp.port: 9300\n</code></pre>\n\n<p>If its local dev setup, also use lesser memory options if possible:</p>\n\n<p>add/modify in <code>$ES_HOME/config/jvm.options</code></p>\n\n<pre><code># Xms represents the initial size of total heap space\n# Xmx represents the maximum size of total heap space\n\n-Xms512m\n-Xmx512m\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13702848,"reputation":61,"user_id":9887387,"display_name":"sagar arora"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1554049655,"creation_date":1554049655,"answer_id":55442986,"question_id":46771233,"body_markdown":"Simply Update /etc/security/limits.conf content to below\r\n\r\n    elasticsearch   soft    nofile          65536\r\n    elasticsearch   hard    nofile          65536\r\n    elasticsearch   memlock unlimited\r\n\r\nand remove content of /etc/security/limits.d/nproc.conf\r\n\r\nDo not forgot to relogin into the shell in order to get the limits applied.","title":"max file descriptors for elasticsearch process is too low","body":"<p>Simply Update /etc/security/limits.conf content to below</p>\n\n<pre><code>elasticsearch   soft    nofile          65536\nelasticsearch   hard    nofile          65536\nelasticsearch   memlock unlimited\n</code></pre>\n\n<p>and remove content of /etc/security/limits.d/nproc.conf</p>\n\n<p>Do not forgot to relogin into the shell in order to get the limits applied.</p>\n"},{"tags":[],"owner":{"account_id":4087483,"reputation":738,"user_id":3356424,"accept_rate":46,"display_name":"khanna"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1568900355,"creation_date":1568900355,"answer_id":58012374,"question_id":46771233,"body_markdown":"Just create a systemd service like this, watch closely the ulimit nofile settings :\r\nvi /etc/systemd/system/elasticsearch.service : \r\n\r\n    [Unit]\r\n    Description=Spin ES Service\r\n    After=network.target\r\n    \r\n    [Service]\r\n    User=&lt;user name&gt;\r\n    Group=&lt;group name&gt;\r\n    Type=simple\r\n    ExecStart=/bin/bash /home/&lt;user&gt;/elasticsearch-6.4.3/bin/elasticsearch\r\n    Restart=on-failure\r\n    RestartSec=5s\r\n    LimitAS=infinity\r\n    LimitRSS=infinity\r\n    LimitCORE=infinity\r\n    LimitNOFILE=65536\r\n    \r\n    [Install]\r\n    WantedBy=multi-user.target\r\n\r\nwhere the ExecStart needs to have &quot;which bash&quot; followed by your $ES_HOME/bin/elasticsearch\r\n\r\nAlso, my settings for users are these :\r\n\r\n    ulimit -n 65536\r\n\r\n/etc/sysctl.conf\r\n\r\n    fs.file-max = 2097152\r\n    vm.max_map_count = 262144\r\n    vm.swappiness = 1\r\n\r\nfollowed by:\r\n\r\n    sudo sysctl -p","title":"max file descriptors for elasticsearch process is too low","body":"<p>Just create a systemd service like this, watch closely the ulimit nofile settings :\nvi /etc/systemd/system/elasticsearch.service : </p>\n\n<pre><code>[Unit]\nDescription=Spin ES Service\nAfter=network.target\n\n[Service]\nUser=&lt;user name&gt;\nGroup=&lt;group name&gt;\nType=simple\nExecStart=/bin/bash /home/&lt;user&gt;/elasticsearch-6.4.3/bin/elasticsearch\nRestart=on-failure\nRestartSec=5s\nLimitAS=infinity\nLimitRSS=infinity\nLimitCORE=infinity\nLimitNOFILE=65536\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>\n\n<p>where the ExecStart needs to have \"which bash\" followed by your $ES_HOME/bin/elasticsearch</p>\n\n<p>Also, my settings for users are these :</p>\n\n<pre><code>ulimit -n 65536\n</code></pre>\n\n<p>/etc/sysctl.conf</p>\n\n<pre><code>fs.file-max = 2097152\nvm.max_map_count = 262144\nvm.swappiness = 1\n</code></pre>\n\n<p>followed by:</p>\n\n<pre><code>sudo sysctl -p\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4835528,"reputation":4155,"user_id":3902367,"accept_rate":33,"display_name":"arunjos007"},"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1568966186,"creation_date":1568966186,"answer_id":58024178,"question_id":46771233,"body_markdown":"For those who are using docker for running elastic search then you can set ulimit through your `docker run` command like below.\r\n\r\n```\r\ndocker run --ulimit nofile=65536:65536 -p 9200:9200 --name elastic-search docker.elastic.co/elasticsearch/elasticsearch:6.4.2\r\n```\r\n\r\nHope this will help docker users","title":"max file descriptors for elasticsearch process is too low","body":"<p>For those who are using docker for running elastic search then you can set ulimit through your <code>docker run</code> command like below.</p>\n\n<pre><code>docker run --ulimit nofile=65536:65536 -p 9200:9200 --name elastic-search docker.elastic.co/elasticsearch/elasticsearch:6.4.2\n</code></pre>\n\n<p>Hope this will help docker users</p>\n"},{"tags":[],"owner":{"account_id":10781290,"reputation":661,"user_id":7931722,"display_name":"GangaRam Dewasi"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1573468174,"creation_date":1573468174,"answer_id":58799635,"question_id":46771233,"body_markdown":"I was also facing the same issue while configuring the sonarqube and was able to resolve the issue by adding the **LimitNOFILE=65536** param in the /etc/systemd/system/sonarqube.service file\r\n\r\n    [Unit]\r\n    Description=SonarQube service\r\n    After=syslog.target network.target\r\n    \r\n    [Service]\r\n    Type=forking\r\n    \r\n    ExecStart=/opt/sonarqube/sonarqube-7.9.1/bin/linux-x86-64/sonar.sh start\r\n    ExecStop=/opt/sonarqube/sonarqube-7.9.1/bin/linux-x86-64/sonar.sh stop\r\n    \r\n    User=sonarqube\r\n    Group=sonarqube\r\n    **LimitNOFILE=65536**\r\n    Restart=always\r\n    \r\n    [Install]\r\n    WantedBy=multi-user.target\r\n\r\n","title":"max file descriptors for elasticsearch process is too low","body":"<p>I was also facing the same issue while configuring the sonarqube and was able to resolve the issue by adding the <strong>LimitNOFILE=65536</strong> param in the /etc/systemd/system/sonarqube.service file</p>\n\n<pre><code>[Unit]\nDescription=SonarQube service\nAfter=syslog.target network.target\n\n[Service]\nType=forking\n\nExecStart=/opt/sonarqube/sonarqube-7.9.1/bin/linux-x86-64/sonar.sh start\nExecStop=/opt/sonarqube/sonarqube-7.9.1/bin/linux-x86-64/sonar.sh stop\n\nUser=sonarqube\nGroup=sonarqube\n**LimitNOFILE=65536**\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12082083,"reputation":563,"user_id":8833429,"display_name":"Иван Пузырёв"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1578565414,"creation_date":1578565414,"answer_id":59661832,"question_id":46771233,"body_markdown":"This guide will help if you run SonarQube:\r\n[SonarQube Guide][1]\r\n\r\n\r\n  [1]: https://docs.sonarqube.org/latest/requirements/requirements/","title":"max file descriptors for elasticsearch process is too low","body":"<p>This guide will help if you run SonarQube:\n<a href=\"https://docs.sonarqube.org/latest/requirements/requirements/\" rel=\"nofollow noreferrer\">SonarQube Guide</a></p>\n"},{"tags":[],"owner":{"account_id":7376613,"reputation":1,"user_id":5614967,"display_name":"Pankaj Girme"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593181855,"creation_date":1593181855,"answer_id":62596975,"question_id":46771233,"body_markdown":"Worked for me .\r\n\r\nIf you want to increase the limit shown by ulimit -n, modify below files.\r\n\r\n 1. /etc/systemd/user.conf  \r\n \r\n 2. /etc/systemd/system.conf\r\n\r\nin both file add the following line in addition \r\n\r\n      DefaultLimitNOFILE=65536\r\n\r\n 3. /etc/security/limits.conf with the following lines\r\n\r\n                 *  soft    nofile  65536\r\n                 *  hard    nofile  65536\r\n                 elasticsearch   soft    nofile  65536\r\n                 elasticsearch   hard    nofile  65536\r\n                 elasticsearch   memlock unlimited\r\n\r\n\r\n    \r\n\r\n","title":"max file descriptors for elasticsearch process is too low","body":"<p>Worked for me .</p>\n<p>If you want to increase the limit shown by ulimit -n, modify below files.</p>\n<ol>\n<li><p>/etc/systemd/user.conf</p>\n</li>\n<li><p>/etc/systemd/system.conf</p>\n</li>\n</ol>\n<p>in both file add the following line in addition</p>\n<pre><code>  DefaultLimitNOFILE=65536\n</code></pre>\n<ol start=\"3\">\n<li><p>/etc/security/limits.conf with the following lines</p>\n<pre><code>         *  soft    nofile  65536\n         *  hard    nofile  65536\n         elasticsearch   soft    nofile  65536\n         elasticsearch   hard    nofile  65536\n         elasticsearch   memlock unlimited\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3169753,"reputation":764,"user_id":2679033,"display_name":"Rajitha Bhanuka"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1613029945,"creation_date":1613029945,"answer_id":66150717,"question_id":46771233,"body_markdown":"I tried this, It worked for me \r\n\r\n    sudo sysctl -w vm.max_map_count=262144","title":"max file descriptors for elasticsearch process is too low","body":"<p>I tried this, It worked for me</p>\n<pre><code>sudo sysctl -w vm.max_map_count=262144\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1609658,"reputation":11,"user_id":1489022,"display_name":"Danny Wu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663821040,"creation_date":1663821040,"answer_id":73809369,"question_id":46771233,"body_markdown":"it works for me after I do:\r\nvi /etc/security/limits.conf\r\nadd following:\r\n* soft nproc 65535\r\n* hard nproc 65535\r\n* soft nofile 65535\r\n* hard nofile 65535\r\n\r\nSave and reboot.","title":"max file descriptors for elasticsearch process is too low","body":"<p>it works for me after I do:\nvi /etc/security/limits.conf\nadd following:</p>\n<ul>\n<li>soft nproc 65535</li>\n<li>hard nproc 65535</li>\n<li>soft nofile 65535</li>\n<li>hard nofile 65535</li>\n</ul>\n<p>Save and reboot.</p>\n"}],"owner":{"account_id":9035343,"reputation":327,"user_id":6731574,"accept_rate":0,"display_name":"F.BOU"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65776,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"answer_count":10,"score":18,"last_activity_date":1663821040,"creation_date":1508159565,"question_id":46771233,"body_markdown":"Cannot resolve these problems:\r\n    \r\n    [2017-10-16T13:54:23,381][WARN ][o.e.b.BootstrapChecks    ] [node-1] max \r\n    file descriptors [65000] for elasticsearch process is too low, increase to \r\n    at least [65536]\r\n    [2017-10-16T13:54:23,382][WARN ][o.e.b.BootstrapChecks    ] [node-1] max \r\n    number of threads [1024] for user [appadm01] is too low, increase to at \r\n    least [2048]\r\n    [2017-10-16T13:54:23,382][WARN ][o.e.b.BootstrapChecks    ] [node-1] system \r\n    call filters failed to install; check the logs and fix your configuration or \r\n    disable system call filters at your own risk\r\n\r\nI executed sysctl -w fs.file-max=65536 but I get the same thing.","title":"max file descriptors for elasticsearch process is too low","body":"<p>Cannot resolve these problems:</p>\n\n<pre><code>[2017-10-16T13:54:23,381][WARN ][o.e.b.BootstrapChecks    ] [node-1] max \nfile descriptors [65000] for elasticsearch process is too low, increase to \nat least [65536]\n[2017-10-16T13:54:23,382][WARN ][o.e.b.BootstrapChecks    ] [node-1] max \nnumber of threads [1024] for user [appadm01] is too low, increase to at \nleast [2048]\n[2017-10-16T13:54:23,382][WARN ][o.e.b.BootstrapChecks    ] [node-1] system \ncall filters failed to install; check the logs and fix your configuration or \ndisable system call filters at your own risk\n</code></pre>\n\n<p>I executed sysctl -w fs.file-max=65536 but I get the same thing.</p>\n"},{"tags":["java","java-stream","migration"],"comments":[{"owner":{"account_id":12331407,"reputation":284,"user_id":8997268,"display_name":"Umesh Sulakude"},"score":0,"creation_date":1663776094,"post_id":73803658,"comment_id":130320415,"body_markdown":"where is object for testLogResponseVo? what are you trying to do here exactly? when record contains userid you are adding it to new list but in else case also adding to same list why ?","body":"where is object for testLogResponseVo? what are you trying to do here exactly? when record contains userid you are adding it to new list but in else case also adding to same list why ?"}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663780322,"creation_date":1663780322,"answer_id":73804617,"question_id":73803658,"body_markdown":"Firstly, you need to provide the alternative response object for the case when `userId` is `null`. For that, you need to use the same conditional logic (it&#39;s not a task for streams).\r\n\r\nIn the stream, you need to transform each `Wrapper` object the matches the predicate to your target type. Which can be done using [`map()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#map(java.util.function.Function)) operation.\r\n\r\n    private List&lt;ResponseVo&gt; populateResponse(String userId, String type) {\r\n        \r\n        if (userId == null) {\r\n            return Collections.singletonList(buildResultsResponse(record));\r\n        }\r\n        \r\n        return logRepo.getEntities(type, userId).stream()\r\n            .filter(record -&gt; record.getSortKey().contains(userId)) // Stream&lt;Wrapper&gt;\r\n            .map(record -&gt; buildResultsResponse(record))            // Stream&lt;ResponseVo&gt;\r\n            .toList();                                              // for Java 16+ or collect(Collectors.toList())\r\n    }","title":"Simplifying/Migrating Source Code method to Java 8","body":"<p>Firstly, you need to provide the alternative response object for the case when <code>userId</code> is <code>null</code>. For that, you need to use the same conditional logic (it's not a task for streams).</p>\n<p>In the stream, you need to transform each <code>Wrapper</code> object the matches the predicate to your target type. Which can be done using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#map(java.util.function.Function)\" rel=\"nofollow noreferrer\"><code>map()</code></a> operation.</p>\n<pre><code>private List&lt;ResponseVo&gt; populateResponse(String userId, String type) {\n    \n    if (userId == null) {\n        return Collections.singletonList(buildResultsResponse(record));\n    }\n    \n    return logRepo.getEntities(type, userId).stream()\n        .filter(record -&gt; record.getSortKey().contains(userId)) // Stream&lt;Wrapper&gt;\n        .map(record -&gt; buildResultsResponse(record))            // Stream&lt;ResponseVo&gt;\n        .toList();                                              // for Java 16+ or collect(Collectors.toList())\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663819907,"creation_date":1663819907,"answer_id":73809264,"question_id":73803658,"body_markdown":"It is possible with a single chain of calls starting with the `Optional` wrapper around the `userId`.\r\n\r\n```\r\nfinal List&lt;ResponseVo&gt; responseVoList = Optional\r\n\t.ofNullable(userId)                                // nullable userId\r\n\t.map(id -&gt; recordsList.stream()                    // if non-null\r\n\t\t\t.filter(r -&gt; r.getSortKey().contains(id))) // ... filter some out\r\n\t.orElseGet(recordsList::stream)                    // or else use all\r\n\t.map(this::buildResultsResponse)                   // build the response\r\n\t.collect(Collectors.toList());                     // pack as a List\r\n```","title":"Simplifying/Migrating Source Code method to Java 8","body":"<p>It is possible with a single chain of calls starting with the <code>Optional</code> wrapper around the <code>userId</code>.</p>\n<pre><code>final List&lt;ResponseVo&gt; responseVoList = Optional\n    .ofNullable(userId)                                // nullable userId\n    .map(id -&gt; recordsList.stream()                    // if non-null\n            .filter(r -&gt; r.getSortKey().contains(id))) // ... filter some out\n    .orElseGet(recordsList::stream)                    // or else use all\n    .map(this::buildResultsResponse)                   // build the response\n    .collect(Collectors.toList());                     // pack as a List\n</code></pre>\n"}],"owner":{"account_id":19772987,"reputation":53,"user_id":14479613,"display_name":"Code Junkie"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1663819907,"creation_date":1663775238,"question_id":73803658,"body_markdown":"I have been attempting to convert this source code to be conventionally formatted using Java 8. I have been following a few conversion guides but haven&#39;t been able to get any solutions working. What am I doing wrong? \r\n\r\nHere is the source code: \r\n\r\n    private List&lt;ResponseVo&gt; populateResponse(String userId, String type) {\r\n\r\n        List&lt;Wrapper&gt; recordsList = logRepo.getEntities(type, userId);\r\n        List&lt;ResponseVo&gt; responseVoList = new ArrayList&lt;&gt;();\r\n\r\n        if (null != userId) {\r\n            for (Wrapper record : recordsList) {\r\n                if (record.getSortKey().contains(userId)) {\r\n                    ResponseVo responseVo = buildResultsResponse(record);\r\n                    responseVoList.add(responseVo);\r\n                }\r\n            }\r\n        } else {\r\n            for (Wrapper record : recordsList) {\r\n                ResponseVo testLogResponseVo = buildResultsResponse(record);\r\n                responseVoList.add(responseVo);\r\n            }\r\n        }\r\n        return responseVoList;\r\n    }\r\n\r\n\r\nI have attempted using the Collectors class and Stream mapping, but am having no luck. It looked something like this:\r\n\r\n                recordsList.stream()\r\n                    .filter(record -&gt; record.getSortKey().contains(userId))\r\n                    .collect(Collectors.toList());","title":"Simplifying/Migrating Source Code method to Java 8","body":"<p>I have been attempting to convert this source code to be conventionally formatted using Java 8. I have been following a few conversion guides but haven't been able to get any solutions working. What am I doing wrong?</p>\n<p>Here is the source code:</p>\n<pre><code>private List&lt;ResponseVo&gt; populateResponse(String userId, String type) {\n\n    List&lt;Wrapper&gt; recordsList = logRepo.getEntities(type, userId);\n    List&lt;ResponseVo&gt; responseVoList = new ArrayList&lt;&gt;();\n\n    if (null != userId) {\n        for (Wrapper record : recordsList) {\n            if (record.getSortKey().contains(userId)) {\n                ResponseVo responseVo = buildResultsResponse(record);\n                responseVoList.add(responseVo);\n            }\n        }\n    } else {\n        for (Wrapper record : recordsList) {\n            ResponseVo testLogResponseVo = buildResultsResponse(record);\n            responseVoList.add(responseVo);\n        }\n    }\n    return responseVoList;\n}\n</code></pre>\n<p>I have attempted using the Collectors class and Stream mapping, but am having no luck. It looked something like this:</p>\n<pre><code>            recordsList.stream()\n                .filter(record -&gt; record.getSortKey().contains(userId))\n                .collect(Collectors.toList());\n</code></pre>\n"},{"tags":["java","hibernate","stack-overflow","one-to-many"],"comments":[{"owner":{"account_id":2188639,"reputation":2082,"user_id":1936390,"accept_rate":20,"display_name":"shreyansh jogi"},"score":0,"creation_date":1372847704,"post_id":17445657,"comment_id":25343986,"body_markdown":"in your league class you have define set of team but put one to many annotation abouce its getter and setter","body":"in your league class you have define set of team but put one to many annotation abouce its getter and setter"},{"owner":{"account_id":263142,"reputation":9391,"user_id":548526,"accept_rate":70,"display_name":"Siddharth"},"score":0,"creation_date":1372854668,"post_id":17445657,"comment_id":25347917,"body_markdown":"Its a good question, so upvote for you.\\","body":"Its a good question, so upvote for you.\\"},{"owner":{"account_id":3253096,"reputation":4401,"user_id":2987755,"accept_rate":50,"display_name":"dkb"},"score":0,"creation_date":1537707197,"post_id":17445657,"comment_id":91874163,"body_markdown":"similar question and solution: https://stackoverflow.com/questions/17195116/jpa-hibernate-bidirectional-many-to-one-results-in-stackoverflowexception","body":"similar question and solution: <a href=\"https://stackoverflow.com/questions/17195116/jpa-hibernate-bidirectional-many-to-one-results-in-stackoverflowexception\" title=\"jpa hibernate bidirectional many to one results in stackoverflowexception\">stackoverflow.com/questions/17195116/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":882029,"reputation":6941,"user_id":272451,"accept_rate":100,"display_name":"Thihara"},"down_vote_count":0,"up_vote_count":38,"is_accepted":true,"score":38,"last_activity_date":1479188420,"creation_date":1372847782,"answer_id":17445773,"question_id":17445657,"body_markdown":"The only way it can throw an StackOverFlow is when your Team&#39;s League is accessed recursively....\r\n\r\nTeam  to League to Team to League\r\n\r\nI&#39;m guessing there&#39;s some function trying to convert your objects into some other representation reflectively or recursively resulting in an infinite loop.","title":"Hibernate OneToMany java.lang.StackOverflowError","body":"<p>The only way it can throw an StackOverFlow is when your Team's League is accessed recursively....</p>\n\n<p>Team  to League to Team to League</p>\n\n<p>I'm guessing there's some function trying to convert your objects into some other representation reflectively or recursively resulting in an infinite loop.</p>\n"},{"tags":[],"owner":{"account_id":5066727,"reputation":3340,"user_id":4066662,"accept_rate":38,"display_name":"Fabian"},"down_vote_count":0,"up_vote_count":142,"is_accepted":false,"score":142,"last_activity_date":1557182490,"creation_date":1481816064,"answer_id":41167875,"question_id":17445657,"body_markdown":"I had a very similar issue. I was using Lombok&#39;s `@Data` annotation on my model objects to auto-generate getters, setters, and other standard methods. I believe the `toString()` method generated by Lombok introduced a circular dependency between my `Team` and `League` objects. When I tried to get the `Set&lt;teams&gt; teams` from my `League` object, I got a `java.lang.StackOverflowError` because Spring was calling the toString method for logging purposes.  \r\n\r\nI resolved this by getting rid of Lombok&#39;s `toString()` method. I replaced the `@Data` annotation with Lombok&#39;s `@Getter` and `@Setter` annotations. That way I still could benefit from free getters and setters without getting the `toString()` method. ","title":"Hibernate OneToMany java.lang.StackOverflowError","body":"<p>I had a very similar issue. I was using Lombok's <code>@Data</code> annotation on my model objects to auto-generate getters, setters, and other standard methods. I believe the <code>toString()</code> method generated by Lombok introduced a circular dependency between my <code>Team</code> and <code>League</code> objects. When I tried to get the <code>Set&lt;teams&gt; teams</code> from my <code>League</code> object, I got a <code>java.lang.StackOverflowError</code> because Spring was calling the toString method for logging purposes.  </p>\n\n<p>I resolved this by getting rid of Lombok's <code>toString()</code> method. I replaced the <code>@Data</code> annotation with Lombok's <code>@Getter</code> and <code>@Setter</code> annotations. That way I still could benefit from free getters and setters without getting the <code>toString()</code> method. </p>\n"},{"tags":[],"owner":{"account_id":13265395,"reputation":1820,"user_id":9578419,"display_name":"S.Daineko"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1526582874,"creation_date":1526582531,"answer_id":50398477,"question_id":17445657,"body_markdown":"I had similar issue and in my case nothing of this didnt help.\r\n\r\nHelped this one approach: \r\n\r\n    @OneToMany(cascade = CascadeType.ALL)\r\n    @JoinColumn(name = &quot;order_id&quot;)\r\n    @Fetch(value = FetchMode.SUBSELECT)\r\n    private List&lt;Product&gt; orderLines; \r\n\r\nname = &quot;order_id&quot; is a foreign key column from Product table.\r\n \r\nAnd i didnt put anything in Product entity.","title":"Hibernate OneToMany java.lang.StackOverflowError","body":"<p>I had similar issue and in my case nothing of this didnt help.</p>\n\n<p>Helped this one approach: </p>\n\n<pre><code>@OneToMany(cascade = CascadeType.ALL)\n@JoinColumn(name = \"order_id\")\n@Fetch(value = FetchMode.SUBSELECT)\nprivate List&lt;Product&gt; orderLines; \n</code></pre>\n\n<p>name = \"order_id\" is a foreign key column from Product table.</p>\n\n<p>And i didnt put anything in Product entity.</p>\n"},{"tags":[],"owner":{"account_id":1125613,"reputation":18964,"user_id":1112963,"accept_rate":59,"display_name":"Zon"},"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1549898425,"creation_date":1549897647,"answer_id":54633473,"question_id":17445657,"body_markdown":"Circular dependency can originate from **Lombok&#39;s** `toString()` autogenerated method, if you use `@Data` complex annotation. To exclude your circular dependecy for a certain field:\r\n\r\n    @Entity\r\n    @Data\r\n    public class Team {\r\n\r\n      ...\r\n\r\n      @ToString.Exclude\r\n      @ManyToOne\r\n      private League league;\r\n    }","title":"Hibernate OneToMany java.lang.StackOverflowError","body":"<p>Circular dependency can originate from <strong>Lombok's</strong> <code>toString()</code> autogenerated method, if you use <code>@Data</code> complex annotation. To exclude your circular dependecy for a certain field:</p>\n\n<pre><code>@Entity\n@Data\npublic class Team {\n\n  ...\n\n  @ToString.Exclude\n  @ManyToOne\n  private League league;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3785624,"reputation":7670,"user_id":3143670,"accept_rate":50,"display_name":"Neeraj Jain"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1553891420,"creation_date":1553891420,"answer_id":55425076,"question_id":17445657,"body_markdown":"For me, Both hashCode and toString default implementation provided by Lombok was causing this issue.\r\n\r\nYou can use this annotation to exclude members for both equalsAndHasCode with single annotation: \r\n\r\n```\r\n@EqualsAndHashCode(exclude = {&quot;certificates&quot;, &quot;payment&quot;})\r\n```\r\n\r\nAlso if you want to exclude just members from  equals method, Lombok provide : `@ToString.Exclude`\r\n\r\n```\r\n@ToString.Exclude\r\n@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;shipment&quot;)\r\n    private Set&lt;Certificate&gt; certificates;\r\n```","title":"Hibernate OneToMany java.lang.StackOverflowError","body":"<p>For me, Both hashCode and toString default implementation provided by Lombok was causing this issue.</p>\n\n<p>You can use this annotation to exclude members for both equalsAndHasCode with single annotation: </p>\n\n<pre><code>@EqualsAndHashCode(exclude = {\"certificates\", \"payment\"})\n</code></pre>\n\n<p>Also if you want to exclude just members from  equals method, Lombok provide : <code>@ToString.Exclude</code></p>\n\n<pre><code>@ToString.Exclude\n@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = \"shipment\")\n    private Set&lt;Certificate&gt; certificates;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13520631,"reputation":6475,"user_id":9753985,"display_name":"Emeric"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1559822661,"creation_date":1559822661,"answer_id":56477233,"question_id":17445657,"body_markdown":"I had this error because I was parsing a list of objects mapped on both sides `@OneToMany` and `@ManyToOne` to json using jackson which caused an infinite loop.\r\n\r\nIf you are in the same situation you can solve this by using `@JsonManagedReference` and `@JsonBackReference` annotations.\r\n\r\nDefinitions from API :\r\n\r\n - JsonManagedReference (https://fasterxml.github.io/jackson-annotations/javadoc/2.5/com/fasterxml/jackson/annotation/JsonManagedReference.html) : \r\n&gt; Annotation used to indicate that annotated property is part of two-way\r\n&gt; linkage between fields; and that its role is &quot;parent&quot; (or &quot;forward&quot;)\r\n&gt; link. Value type (class) of property must have a single compatible\r\n&gt; property annotated with JsonBackReference. Linkage is handled such\r\n&gt; that the property annotated with this annotation is handled normally\r\n&gt; (serialized normally, no special handling for deserialization); it is\r\n&gt; the matching back reference that requires special handling\r\n\r\n - JsonBackReference: (https://fasterxml.github.io/jackson-annotations/javadoc/2.5/com/fasterxml/jackson/annotation/JsonBackReference.html):\r\n&gt; Annotation used to indicate that associated property is part of\r\n&gt; two-way linkage between fields; and that its role is &quot;child&quot; (or\r\n&gt; &quot;back&quot;) link. Value type of the property must be a bean: it can not be\r\n&gt; a Collection, Map, Array or enumeration. Linkage is handled such that\r\n&gt; the property annotated with this annotation is not serialized; and\r\n&gt; during deserialization, its value is set to instance that has the\r\n&gt; &quot;managed&quot; (forward) link.\r\n\r\nExample:\r\n\r\n**Owner.java:**\r\n\r\n    @JsonManagedReference\r\n    @OneToMany(mappedBy = &quot;owner&quot;, fetch = FetchType.EAGER)\r\n    Set&lt;Car&gt; cars;\r\n\r\n**Car.java:**\r\n\r\n    @JsonBackReference\r\n    @ManyToOne(fetch = FetchType.EAGER)\r\n    @JoinColumn(name = &quot;owner_id&quot;)\r\n    private Owner owner;\r\n\r\nAnother solution is to use `@JsonIgnore` which will just set null to the field.","title":"Hibernate OneToMany java.lang.StackOverflowError","body":"<p>I had this error because I was parsing a list of objects mapped on both sides <code>@OneToMany</code> and <code>@ManyToOne</code> to json using jackson which caused an infinite loop.</p>\n\n<p>If you are in the same situation you can solve this by using <code>@JsonManagedReference</code> and <code>@JsonBackReference</code> annotations.</p>\n\n<p>Definitions from API :</p>\n\n<ul>\n<li><p>JsonManagedReference (<a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.5/com/fasterxml/jackson/annotation/JsonManagedReference.html\" rel=\"noreferrer\">https://fasterxml.github.io/jackson-annotations/javadoc/2.5/com/fasterxml/jackson/annotation/JsonManagedReference.html</a>) : </p>\n\n<blockquote>\n  <p>Annotation used to indicate that annotated property is part of two-way\n  linkage between fields; and that its role is \"parent\" (or \"forward\")\n  link. Value type (class) of property must have a single compatible\n  property annotated with JsonBackReference. Linkage is handled such\n  that the property annotated with this annotation is handled normally\n  (serialized normally, no special handling for deserialization); it is\n  the matching back reference that requires special handling</p>\n</blockquote></li>\n<li><p>JsonBackReference: (<a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.5/com/fasterxml/jackson/annotation/JsonBackReference.html\" rel=\"noreferrer\">https://fasterxml.github.io/jackson-annotations/javadoc/2.5/com/fasterxml/jackson/annotation/JsonBackReference.html</a>):</p>\n\n<blockquote>\n  <p>Annotation used to indicate that associated property is part of\n  two-way linkage between fields; and that its role is \"child\" (or\n  \"back\") link. Value type of the property must be a bean: it can not be\n  a Collection, Map, Array or enumeration. Linkage is handled such that\n  the property annotated with this annotation is not serialized; and\n  during deserialization, its value is set to instance that has the\n  \"managed\" (forward) link.</p>\n</blockquote></li>\n</ul>\n\n<p>Example:</p>\n\n<p><strong>Owner.java:</strong></p>\n\n<pre><code>@JsonManagedReference\n@OneToMany(mappedBy = \"owner\", fetch = FetchType.EAGER)\nSet&lt;Car&gt; cars;\n</code></pre>\n\n<p><strong>Car.java:</strong></p>\n\n<pre><code>@JsonBackReference\n@ManyToOne(fetch = FetchType.EAGER)\n@JoinColumn(name = \"owner_id\")\nprivate Owner owner;\n</code></pre>\n\n<p>Another solution is to use <code>@JsonIgnore</code> which will just set null to the field.</p>\n"},{"tags":[],"owner":{"account_id":5351771,"reputation":147,"user_id":4265722,"display_name":"Omprakash Gautam"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1580209662,"creation_date":1580209662,"answer_id":59947358,"question_id":17445657,"body_markdown":" I replaced the @Data annotation with Lombok&#39;s @Getter and @Setter annotations","title":"Hibernate OneToMany java.lang.StackOverflowError","body":"<p>I replaced the @Data annotation with Lombok's @Getter and @Setter annotations</p>\n"},{"tags":[],"owner":{"account_id":7629995,"reputation":301,"user_id":5785358,"accept_rate":0,"display_name":"Etch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589884463,"creation_date":1589859244,"answer_id":61882789,"question_id":17445657,"body_markdown":"When i was having this problem i was converting the entity to dto. I then realized i was calling the parent class annotated with onetomany from the bridge class annotated with manytoone. Because the parent already calls the bridge, it became cyclic and the collection recursed. Instead of calling the parent method that populates, i just initialized and populated the parent in the child.","title":"Hibernate OneToMany java.lang.StackOverflowError","body":"<p>When i was having this problem i was converting the entity to dto. I then realized i was calling the parent class annotated with onetomany from the bridge class annotated with manytoone. Because the parent already calls the bridge, it became cyclic and the collection recursed. Instead of calling the parent method that populates, i just initialized and populated the parent in the child.</p>\n"},{"tags":[],"owner":{"account_id":82626,"reputation":12122,"user_id":232175,"accept_rate":62,"display_name":"Matthias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1592999227,"creation_date":1592999227,"answer_id":62554323,"question_id":17445657,"body_markdown":"Also see: https://stackoverflow.com/questions/25692299/hibernate-throws-stackoverflowerror-when-querying\r\n\r\nIn my case, I was using the `@IdClass` annotation on an entity which had a foreign key as part of its primary key:\r\n\r\n    @IdClass(MyEntity.MyEntityKey.class)\r\n    public class MyEntity {\r\n       public static class MyEntityKey {\r\n           private Foo parent;\r\n           private int count;\r\n           // Getters, setters, constructor, ...\r\n       }\r\n    \r\n       @Id\r\n       private Foo parent;\r\n       @Id\r\n       private int number;\r\n      \r\n       //...\r\n    }\r\n\r\nNow when loading `Foo` and eagerly loading all `MyEntity`s, Hibernate was again loading the parent entity `Foo` while building the key which resulted in the stack overflow.\r\n\r\nI fixed the issue by modelling the id using explicit key properties (i.e. including the keys of Foo in `MyEntityKey` rather than just a reference to `Foo`) as shown in [Composite key handling, using @Idclass annotation in Spring boot java][1] (also applied to Non-Spring Hibernate). In short: Use the `@JoinColumns` annotation to specify the relationship between the navigation property (to parent) and the id columns.\r\n\r\n\r\n  [1]: https://medium.com/@bhagyajayashani/composite-key-handling-using-idclass-annotation-in-spring-boot-java-26f40bbd38a2","title":"Hibernate OneToMany java.lang.StackOverflowError","body":"<p>Also see: <a href=\"https://stackoverflow.com/questions/25692299/hibernate-throws-stackoverflowerror-when-querying\">Hibernate throws StackOverflowError when querying</a></p>\n<p>In my case, I was using the <code>@IdClass</code> annotation on an entity which had a foreign key as part of its primary key:</p>\n<pre><code>@IdClass(MyEntity.MyEntityKey.class)\npublic class MyEntity {\n   public static class MyEntityKey {\n       private Foo parent;\n       private int count;\n       // Getters, setters, constructor, ...\n   }\n\n   @Id\n   private Foo parent;\n   @Id\n   private int number;\n  \n   //...\n}\n</code></pre>\n<p>Now when loading <code>Foo</code> and eagerly loading all <code>MyEntity</code>s, Hibernate was again loading the parent entity <code>Foo</code> while building the key which resulted in the stack overflow.</p>\n<p>I fixed the issue by modelling the id using explicit key properties (i.e. including the keys of Foo in <code>MyEntityKey</code> rather than just a reference to <code>Foo</code>) as shown in <a href=\"https://medium.com/@bhagyajayashani/composite-key-handling-using-idclass-annotation-in-spring-boot-java-26f40bbd38a2\" rel=\"nofollow noreferrer\">Composite key handling, using @Idclass annotation in Spring boot java</a> (also applied to Non-Spring Hibernate). In short: Use the <code>@JoinColumns</code> annotation to specify the relationship between the navigation property (to parent) and the id columns.</p>\n"},{"tags":[],"owner":{"account_id":2315338,"reputation":8067,"user_id":2032539,"accept_rate":7,"display_name":"Emanuel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1597503307,"creation_date":1597503307,"answer_id":63427368,"question_id":17445657,"body_markdown":"I struggled a very long time and thought it&#39;s a problem from Kotlin why it throws an Stackoverflow Exception. At the end it was Jackson, which is used by Spring Hibernate and causese the Stackoverflow. \r\n\r\nYou can solve that by setting `@JsonIgnoreProperties` on both sides. Example:\r\n\r\n\r\n    public class ProductEntity implements Serializable {\r\n    \r\n    private List&lt;ProductPriceEntity&gt; refProductPriceEntities = new ArrayList&lt;&gt;();\r\n\r\n    @OneToMany(\r\n            mappedBy = &quot;product&quot;,\r\n            fetch = FetchType.LAZY,\r\n            cascade = CascadeType.ALL,\r\n            orphanRemoval = true,\r\n            targetEntity = ProductPriceEntity.class)\r\n      @JsonIgnoreProperties(value = &quot;product&quot;, allowSetters = true)\r\n      public List&lt;ProductPriceEntity&gt; getRefProductPriceEntities() {\r\n        return refProductPriceEntities;\r\n      }\r\n\r\n      public void setRefProductPriceEntities(List&lt;ProductPriceEntity&gt; refProductPriceEntities) {\r\n        this.refProductPriceEntities = refProductPriceEntities;\r\n      }\r\n    }\r\n\r\nand finally the other side, which caused the stackoverflow exception.\r\n\r\n    public class ProductPriceEntity {\r\n\r\n    private ProductEntity product;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumns({\r\n            @JoinColumn(name = &quot;product_id&quot;, referencedColumnName = &quot;id&quot;, nullable = false),\r\n            @JoinColumn(name = &quot;product_version_id&quot;, referencedColumnName = &quot;version_id&quot;, nullable = false)\r\n    })\r\n    @JsonIgnoreProperties(value = &quot;refProductPriceEntities&quot;, allowSetters = true)\r\n    public ProductEntity getProduct() {\r\n        return product;\r\n    }\r\n\r\n    public void setProduct(ProductEntity product) {\r\n        this.product = product;\r\n    }\r\n    }","title":"Hibernate OneToMany java.lang.StackOverflowError","body":"<p>I struggled a very long time and thought it's a problem from Kotlin why it throws an Stackoverflow Exception. At the end it was Jackson, which is used by Spring Hibernate and causese the Stackoverflow.</p>\n<p>You can solve that by setting <code>@JsonIgnoreProperties</code> on both sides. Example:</p>\n<pre><code>public class ProductEntity implements Serializable {\n\nprivate List&lt;ProductPriceEntity&gt; refProductPriceEntities = new ArrayList&lt;&gt;();\n\n@OneToMany(\n        mappedBy = &quot;product&quot;,\n        fetch = FetchType.LAZY,\n        cascade = CascadeType.ALL,\n        orphanRemoval = true,\n        targetEntity = ProductPriceEntity.class)\n  @JsonIgnoreProperties(value = &quot;product&quot;, allowSetters = true)\n  public List&lt;ProductPriceEntity&gt; getRefProductPriceEntities() {\n    return refProductPriceEntities;\n  }\n\n  public void setRefProductPriceEntities(List&lt;ProductPriceEntity&gt; refProductPriceEntities) {\n    this.refProductPriceEntities = refProductPriceEntities;\n  }\n}\n</code></pre>\n<p>and finally the other side, which caused the stackoverflow exception.</p>\n<pre><code>public class ProductPriceEntity {\n\nprivate ProductEntity product;\n\n@ManyToOne(fetch = FetchType.LAZY)\n@JoinColumns({\n        @JoinColumn(name = &quot;product_id&quot;, referencedColumnName = &quot;id&quot;, nullable = false),\n        @JoinColumn(name = &quot;product_version_id&quot;, referencedColumnName = &quot;version_id&quot;, nullable = false)\n})\n@JsonIgnoreProperties(value = &quot;refProductPriceEntities&quot;, allowSetters = true)\npublic ProductEntity getProduct() {\n    return product;\n}\n\npublic void setProduct(ProductEntity product) {\n    this.product = product;\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17737955,"reputation":1051,"user_id":12878982,"display_name":"CodingBee"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1619509194,"creation_date":1619509194,"answer_id":67278822,"question_id":17445657,"body_markdown":"Got this error in OneToOne mapping in hibernate, the Entity class was unable to convert toString.\r\n    \r\n    Class A(Details.class)-\r\n    @OneToOne\r\n\t@JoinColumn(name=&quot;billing_address_id&quot;)\r\n\tprivate Address billingAddress;\r\n\r\n\t@OneToOne\r\n\t@JoinColumn(name=&quot;shipping_address_id&quot;)\r\n\tprivate Address shippingAddress;\r\n\r\n\r\n    Class B(Address.class)-\r\n    @OneToOne(mappedBy=&quot;billingAddress&quot;)\r\n\tprivate Details billingDetails;\r\n\r\n\t@OneToOne(mappedBy=&quot;shippingAddress&quot;)\r\n\tprivate Details shippingDetails;\r\n\r\n\r\nError- because Class A is calling Class B and similarly, class B is calling Class A.\r\nNeed to remove one of the two.\r\nThen this issue will be resolved.","title":"Hibernate OneToMany java.lang.StackOverflowError","body":"<p>Got this error in OneToOne mapping in hibernate, the Entity class was unable to convert toString.</p>\n<pre><code>Class A(Details.class)-\n@OneToOne\n@JoinColumn(name=&quot;billing_address_id&quot;)\nprivate Address billingAddress;\n\n@OneToOne\n@JoinColumn(name=&quot;shipping_address_id&quot;)\nprivate Address shippingAddress;\n\n\nClass B(Address.class)-\n@OneToOne(mappedBy=&quot;billingAddress&quot;)\nprivate Details billingDetails;\n\n@OneToOne(mappedBy=&quot;shippingAddress&quot;)\nprivate Details shippingDetails;\n</code></pre>\n<p>Error- because Class A is calling Class B and similarly, class B is calling Class A.\nNeed to remove one of the two.\nThen this issue will be resolved.</p>\n"},{"tags":[],"owner":{"account_id":6332521,"reputation":175,"user_id":4917037,"display_name":"Michael Rountree"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620075989,"creation_date":1620075989,"answer_id":67375818,"question_id":17445657,"body_markdown":"I find that using @EqualsAndHashCode(onlyExplicitlyIncluded = true) is a great place to start. In most cases, equality across objects should only be done on specific values. If you use this for every entity, it will force you to choose what you actually want to include in equality, and is likely to preven the circular memory reference.","title":"Hibernate OneToMany java.lang.StackOverflowError","body":"<p>I find that using @EqualsAndHashCode(onlyExplicitlyIncluded = true) is a great place to start. In most cases, equality across objects should only be done on specific values. If you use this for every entity, it will force you to choose what you actually want to include in equality, and is likely to preven the circular memory reference.</p>\n"},{"tags":[],"owner":{"account_id":7510935,"reputation":749,"user_id":5705891,"accept_rate":18,"display_name":"DanielJ"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1621480830,"creation_date":1621480830,"answer_id":67613512,"question_id":17445657,"body_markdown":"When I was having this problem, I could solve it with `@JsonManagedReference` and `@JsonBackReference`, however it meant that only one side of the entity had the child in it when deserializing into json. I.e. in your team and league example, Only the League would show teams, and the team wouldnt show which league it belonged to.\r\n\r\nTo allow both side, use `@JsonIdentityInfo` annotation in your entity and remove the `@JsonBackReference` and `@JsonManagedReference`. You entities will be something like:\r\n\r\n\r\n```\r\n@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\r\npublic class Team {\r\n...\r\n```\r\nThis replaced the circular refrences with what I was looking for. \r\n","title":"Hibernate OneToMany java.lang.StackOverflowError","body":"<p>When I was having this problem, I could solve it with <code>@JsonManagedReference</code> and <code>@JsonBackReference</code>, however it meant that only one side of the entity had the child in it when deserializing into json. I.e. in your team and league example, Only the League would show teams, and the team wouldnt show which league it belonged to.</p>\n<p>To allow both side, use <code>@JsonIdentityInfo</code> annotation in your entity and remove the <code>@JsonBackReference</code> and <code>@JsonManagedReference</code>. You entities will be something like:</p>\n<pre><code>@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\npublic class Team {\n...\n</code></pre>\n<p>This replaced the circular refrences with what I was looking for.</p>\n"},{"tags":[],"owner":{"account_id":4514046,"reputation":749,"user_id":3669400,"display_name":"Randy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640716411,"creation_date":1640716411,"answer_id":70511124,"question_id":17445657,"body_markdown":"I had a similar problem using Lombok on a save and flush.  It was in my @EqualsAndHashCode, so you can exclude child collections by property name:\r\n\r\n    @Data\r\n    @EqualsAndHashCode(callSuper = true, exclude = &quot;childRowCollectionProp&quot;)\r\n    @Entity\r\n    @Table(name = &quot;parent&quot;)\r\n    public class Parent extends BaseEntityWithId{","title":"Hibernate OneToMany java.lang.StackOverflowError","body":"<p>I had a similar problem using Lombok on a save and flush.  It was in my @EqualsAndHashCode, so you can exclude child collections by property name:</p>\n<pre><code>@Data\n@EqualsAndHashCode(callSuper = true, exclude = &quot;childRowCollectionProp&quot;)\n@Entity\n@Table(name = &quot;parent&quot;)\npublic class Parent extends BaseEntityWithId{\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4895829,"reputation":61,"user_id":3945501,"display_name":"Hamid Pourgholi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663819805,"creation_date":1663819805,"answer_id":73809257,"question_id":17445657,"body_markdown":"I had the same issue in the combination of &quot;Spring Data Rest&quot; and Lomboks @Data annotation. Definitely use both \r\n`@ToString.Exclude\r\n @EqualsAndHashCode.Exclude`\r\nMy setup: \r\n\r\n    @RepositoryRestResource(collectionResourceRel = &quot;a&quot;, path = &quot;a&quot;)\r\n    public interface ARepository extends JpaRepository&lt;A, Long&gt; {\r\n    }\r\n---\r\n        @Data\r\n        @JsonIgnoreProperties(ignoreUnknown = true)\r\n        @Entity\r\n        @EntityListeners(AuditingEntityListener.class)\r\n        @EqualsAndHashCode(callSuper = true)\r\n        public class A extends AuditMetadata&lt;String&gt; {\r\n            @Id\r\n            @GeneratedValue(strategy = GenerationType.AUTO)\r\n            private Long id;\r\n            private String x;\r\n            private String y;\r\n\r\n            @ToString.Exclude\r\n            @EqualsAndHashCode.Exclude\r\n            @ManyToOne\r\n            private B b;\r\n        \r\n        }\r\n---\r\n\r\n    @RepositoryRestResource(collectionResourceRel = &quot;b&quot;, path = &quot;b&quot;)\r\n    public interface BRepository extends JpaRepository&lt;B, Long&gt; {\r\n    }\r\n\r\n---\r\n\r\n        @Data\r\n        @JsonIgnoreProperties(ignoreUnknown = true)\r\n        @Entity\r\n        @EqualsAndHashCode(callSuper = true)\r\n        public class B extends AuditMetadata&lt;String&gt; {\r\n            @Id\r\n            @GeneratedValue(strategy = GenerationType.AUTO)\r\n            private Long id;\r\n            private String k;\r\n            private String l;\r\n            private String m;\r\n            @OneToMany(mappedBy = &quot;b&quot;, cascade = CascadeType.ALL)\r\n            private Set&lt;A&gt; aList = new HashSet&lt;&gt;();\r\n        }\r\n---\r\n\r\nThis worked for me perfectly.\r\nThanks Neeraj Jain.","title":"Hibernate OneToMany java.lang.StackOverflowError","body":"<p>I had the same issue in the combination of &quot;Spring Data Rest&quot; and Lomboks @Data annotation. Definitely use both\n<code>@ToString.Exclude @EqualsAndHashCode.Exclude</code>\nMy setup:</p>\n<pre><code>@RepositoryRestResource(collectionResourceRel = &quot;a&quot;, path = &quot;a&quot;)\npublic interface ARepository extends JpaRepository&lt;A, Long&gt; {\n}\n</code></pre>\n<hr />\n<pre><code>    @Data\n    @JsonIgnoreProperties(ignoreUnknown = true)\n    @Entity\n    @EntityListeners(AuditingEntityListener.class)\n    @EqualsAndHashCode(callSuper = true)\n    public class A extends AuditMetadata&lt;String&gt; {\n        @Id\n        @GeneratedValue(strategy = GenerationType.AUTO)\n        private Long id;\n        private String x;\n        private String y;\n\n        @ToString.Exclude\n        @EqualsAndHashCode.Exclude\n        @ManyToOne\n        private B b;\n    \n    }\n</code></pre>\n<hr />\n<pre><code>@RepositoryRestResource(collectionResourceRel = &quot;b&quot;, path = &quot;b&quot;)\npublic interface BRepository extends JpaRepository&lt;B, Long&gt; {\n}\n</code></pre>\n<hr />\n<pre><code>    @Data\n    @JsonIgnoreProperties(ignoreUnknown = true)\n    @Entity\n    @EqualsAndHashCode(callSuper = true)\n    public class B extends AuditMetadata&lt;String&gt; {\n        @Id\n        @GeneratedValue(strategy = GenerationType.AUTO)\n        private Long id;\n        private String k;\n        private String l;\n        private String m;\n        @OneToMany(mappedBy = &quot;b&quot;, cascade = CascadeType.ALL)\n        private Set&lt;A&gt; aList = new HashSet&lt;&gt;();\n    }\n</code></pre>\n<hr />\n<p>This worked for me perfectly.\nThanks Neeraj Jain.</p>\n"}],"owner":{"account_id":3000148,"reputation":1029,"user_id":2545793,"display_name":"otocon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65190,"favorite_count":0,"down_vote_count":0,"up_vote_count":79,"accepted_answer_id":17445773,"answer_count":15,"score":79,"last_activity_date":1663819805,"creation_date":1372847451,"question_id":17445657,"body_markdown":"It&#39;s my first question here on stack, so please be gentle :D\r\n\r\nI&#39;m trying to create hibernate OneToMany relationship. When I try to fetch some data from my DB, I&#39;m getting StackOverflowError. But when i remove OneToMany part, everything goes normally. This is part of my REST Service, for now it runs on VMware vFabric Server and MySQL DB.\r\n\r\nFetch example:\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Inject\r\n    private EntityManager entityManager;\r\n    ...\r\n    entityManager.find(League.class, 1);\r\n    ...\r\n    entityManager.find(Team.class, 1);\r\n\r\n\r\nMySQL script:\r\n&lt;!-- language: sql --&gt;\r\n\r\n    CREATE TABLE league (\r\n    \tid int(11) NOT NULL AUTO_INCREMENT,\r\n    \tname varchar(20) COLLATE utf8_unicode_ci NOT NULL,\r\n    \tPRIMARY KEY (id)\r\n    ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;\r\n    \r\n    CREATE TABLE team (\r\n    \tteam_id int(11) NOT NULL AUTO_INCREMENT,\r\n    \tname varchar(20) COLLATE utf8_unicode_ci NOT NULL,\r\n    \tfk_leagueId int(11) NOT NULL,\r\n    \tPRIMARY KEY (team_id),\r\n    \tFOREIGN KEY (fk_leagueId) REFERENCES league(id)\r\n    ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;\r\n\r\nClasses:\r\n&lt;!-- language: java --&gt;\r\n\r\n    @XmlRootElement\r\n    @Entity\r\n    @Table(name = &quot;team&quot;)\r\n    @Data\r\n    public class Team {\r\n        @Id\r\n        @GeneratedValue(generator = &quot;increment&quot;)\r\n        @GenericGenerator(name = &quot;increment&quot;, strategy = &quot;increment&quot;)\r\n        @Column(name = &quot;team_id&quot;)\r\n        private int id;\r\n        @Column(name = &quot;name&quot;)\r\n        private String name;\r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;fk_leagueId&quot;, nullable = false)\r\n        private League league;\r\n    }\r\n    \r\n    @XmlRootElement\r\n    @Entity\r\n    @Table(name = &quot;league&quot;)\r\n    @Data\r\n    public class League {\r\n        @Id\r\n        @GeneratedValue(generator = &quot;increment&quot;)\r\n        @GenericGenerator(name = &quot;increment&quot;, strategy = &quot;increment&quot;)\r\n        @Column(name = &quot;id&quot;)\r\n        private int id;\r\n        @Column(name = &quot;name&quot;)\r\n        private String name;\r\n        //if I comment 2 lines below, there is no error, and everything works fine\r\n        @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;league&quot;)\r\n        private Set&lt;Team&gt; teams;\r\n    }\r\n\r\n\r\nError:\r\n\r\n    Hibernate: select league0_.id as id1_1_0_, league0_.name as name2_1_0_ from league league0_ where league0_.id=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Hibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\r\n    Exception in thread &quot;tomcat-http--3&quot; java.lang.StackOverflowError\r\n    \tat org.jboss.logging.JDKLogger.translate(JDKLogger.java:73)\r\n    \tat org.jboss.logging.JDKLogger.isEnabled(JDKLogger.java:85)\r\n    \tat org.jboss.logging.JDKLogger.doLog(JDKLogger.java:41)\r\n    \tat org.jboss.logging.Logger.debug(Logger.java:406)\r\n    \tat org.hibernate.internal.CoreMessageLogger_$logger.debug(CoreMessageLogger_$logger.java:525)\r\n    \tat org.hibernate.engine.jdbc.spi.SqlStatementLogger.logStatement(SqlStatementLogger.java:104)\r\n    \tat org.hibernate.engine.jdbc.spi.SqlStatementLogger.logStatement(SqlStatementLogger.java:95)\r\n    \tat org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:180)\r\n    \tat org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:159)\r\n    \tat org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1858)\r\n    \tat org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1835)\r\n    \tat org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1815)\r\n    \tat org.hibernate.loader.Loader.doQuery(Loader.java:899)\r\n    \tat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:341)\r\n    \tat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:311)\r\n    \tat org.hibernate.loader.Loader.loadCollection(Loader.java:2234)\r\n    \tat org.hibernate.loader.collection.CollectionLoader.initialize(CollectionLoader.java:65)\r\n    \tat org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:674)\r\n    \tat org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:83)\r\n    \tat org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:1849)\r\n    \tat org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:549)\r\n    \tat org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:234)\r\n    \tat org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:545)\r\n    \tat org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:124)\r\n    \tat org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:428)\r\n    \tat com.lukaszb.motspe.webapp.model.League.hashCode(League.java:21)\r\n    \tat com.lukaszb.motspe.webapp.model.Team.hashCode(Team.java:20)\r\n    \tat java.util.HashMap.hash(HashMap.java:351)\r\n    \tat java.util.HashMap.put(HashMap.java:471)\r\n    \tat java.util.HashSet.add(HashSet.java:217)\r\n    ...\r\n\r\n\r\n**Edit:**\r\n\r\nI was able to solve this out thanks to @Thihara and @KarIP. I have overriden toString() for Team and League like this:\r\n\r\n \r\n\r\n    @Override\r\n    public String toString() {\r\n    \treturn &quot;League [id=&quot; + id + &quot;, name=&quot; + name + &quot;]&quot;;\r\n    }\r\n    \r\n    @Override\r\n    public String toString() {\r\n        return &quot;Team [id=&quot; + id + &quot;, name=&quot; + name + &quot;]&quot;;\r\n    }\r\nand was able to fetch data from DB as wanted. But then while parsing I got JAXB error with infinite cycles. So i annotated Team and League class with `@XmlAccessorType(XmlAccessType.FIELD)`, so it won&#39;t look at methods, and Team `league` field as `@XmlTransient`, so it won&#39;t be parsed.\r\n\r\nHere I can even remove my toString() implementations, and it still works.\r\nI&#39;m not completely sure why.\r\nProblem is solved, but I would like to hear more precise explanation. I don&#39;t know why JAXB stopped data fetch, even if it&#39;s after whole DB communication process(or isn&#39;t?).\r\nTo be more specific, I&#39;m using Jersey for that:\r\n\r\n    @GET\r\n    @Path(&quot;search/id&quot;)\r\n    @Produces({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML })\r\n    public List&lt;League&gt; searchById(@QueryParam(&quot;id&quot;) int id) {\r\n    return Arrays.asList(leagueDAO.getById(id));\r\n    }","title":"Hibernate OneToMany java.lang.StackOverflowError","body":"<p>It's my first question here on stack, so please be gentle :D</p>\n<p>I'm trying to create hibernate OneToMany relationship. When I try to fetch some data from my DB, I'm getting StackOverflowError. But when i remove OneToMany part, everything goes normally. This is part of my REST Service, for now it runs on VMware vFabric Server and MySQL DB.</p>\n<p>Fetch example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Inject\nprivate EntityManager entityManager;\n...\nentityManager.find(League.class, 1);\n...\nentityManager.find(Team.class, 1);\n</code></pre>\n<p>MySQL script:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE league (\n    id int(11) NOT NULL AUTO_INCREMENT,\n    name varchar(20) COLLATE utf8_unicode_ci NOT NULL,\n    PRIMARY KEY (id)\n) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;\n\nCREATE TABLE team (\n    team_id int(11) NOT NULL AUTO_INCREMENT,\n    name varchar(20) COLLATE utf8_unicode_ci NOT NULL,\n    fk_leagueId int(11) NOT NULL,\n    PRIMARY KEY (team_id),\n    FOREIGN KEY (fk_leagueId) REFERENCES league(id)\n) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;\n</code></pre>\n<p>Classes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@XmlRootElement\n@Entity\n@Table(name = &quot;team&quot;)\n@Data\npublic class Team {\n    @Id\n    @GeneratedValue(generator = &quot;increment&quot;)\n    @GenericGenerator(name = &quot;increment&quot;, strategy = &quot;increment&quot;)\n    @Column(name = &quot;team_id&quot;)\n    private int id;\n    @Column(name = &quot;name&quot;)\n    private String name;\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;fk_leagueId&quot;, nullable = false)\n    private League league;\n}\n\n@XmlRootElement\n@Entity\n@Table(name = &quot;league&quot;)\n@Data\npublic class League {\n    @Id\n    @GeneratedValue(generator = &quot;increment&quot;)\n    @GenericGenerator(name = &quot;increment&quot;, strategy = &quot;increment&quot;)\n    @Column(name = &quot;id&quot;)\n    private int id;\n    @Column(name = &quot;name&quot;)\n    private String name;\n    //if I comment 2 lines below, there is no error, and everything works fine\n    @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;league&quot;)\n    private Set&lt;Team&gt; teams;\n}\n</code></pre>\n<p>Error:</p>\n<pre><code>Hibernate: select league0_.id as id1_1_0_, league0_.name as name2_1_0_ from league league0_ where league0_.id=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nHibernate: select teams0_.fk_leagueId as fk3_1_1_, teams0_.team_id as team1_4_1_, teams0_.team_id as team1_4_0_, teams0_.fk_leagueId as fk3_4_0_, teams0_.name as name2_4_0_ from team teams0_ where teams0_.fk_leagueId=?\nException in thread &quot;tomcat-http--3&quot; java.lang.StackOverflowError\n    at org.jboss.logging.JDKLogger.translate(JDKLogger.java:73)\n    at org.jboss.logging.JDKLogger.isEnabled(JDKLogger.java:85)\n    at org.jboss.logging.JDKLogger.doLog(JDKLogger.java:41)\n    at org.jboss.logging.Logger.debug(Logger.java:406)\n    at org.hibernate.internal.CoreMessageLogger_$logger.debug(CoreMessageLogger_$logger.java:525)\n    at org.hibernate.engine.jdbc.spi.SqlStatementLogger.logStatement(SqlStatementLogger.java:104)\n    at org.hibernate.engine.jdbc.spi.SqlStatementLogger.logStatement(SqlStatementLogger.java:95)\n    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:180)\n    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:159)\n    at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1858)\n    at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1835)\n    at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1815)\n    at org.hibernate.loader.Loader.doQuery(Loader.java:899)\n    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:341)\n    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:311)\n    at org.hibernate.loader.Loader.loadCollection(Loader.java:2234)\n    at org.hibernate.loader.collection.CollectionLoader.initialize(CollectionLoader.java:65)\n    at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:674)\n    at org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:83)\n    at org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:1849)\n    at org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:549)\n    at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:234)\n    at org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:545)\n    at org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:124)\n    at org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:428)\n    at com.lukaszb.motspe.webapp.model.League.hashCode(League.java:21)\n    at com.lukaszb.motspe.webapp.model.Team.hashCode(Team.java:20)\n    at java.util.HashMap.hash(HashMap.java:351)\n    at java.util.HashMap.put(HashMap.java:471)\n    at java.util.HashSet.add(HashSet.java:217)\n...\n</code></pre>\n<p><strong>Edit:</strong></p>\n<p>I was able to solve this out thanks to @Thihara and @KarIP. I have overriden toString() for Team and League like this:</p>\n<pre><code>@Override\npublic String toString() {\n    return &quot;League [id=&quot; + id + &quot;, name=&quot; + name + &quot;]&quot;;\n}\n\n@Override\npublic String toString() {\n    return &quot;Team [id=&quot; + id + &quot;, name=&quot; + name + &quot;]&quot;;\n}\n</code></pre>\n<p>and was able to fetch data from DB as wanted. But then while parsing I got JAXB error with infinite cycles. So i annotated Team and League class with <code>@XmlAccessorType(XmlAccessType.FIELD)</code>, so it won't look at methods, and Team <code>league</code> field as <code>@XmlTransient</code>, so it won't be parsed.</p>\n<p>Here I can even remove my toString() implementations, and it still works.\nI'm not completely sure why.\nProblem is solved, but I would like to hear more precise explanation. I don't know why JAXB stopped data fetch, even if it's after whole DB communication process(or isn't?).\nTo be more specific, I'm using Jersey for that:</p>\n<pre><code>@GET\n@Path(&quot;search/id&quot;)\n@Produces({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML })\npublic List&lt;League&gt; searchById(@QueryParam(&quot;id&quot;) int id) {\nreturn Arrays.asList(leagueDAO.getById(id));\n}\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663682106,"creation_date":1663682106,"answer_id":73787889,"question_id":73787792,"body_markdown":"Using `peek` is generally not recommended for such tasks, because it forces you to use side-effects to modify the list in-place.\r\n\r\nIt is better to use side-effect-free `map` to create a new version of the list (functional-style):\r\n\r\n\r\n    final List&lt;GpbCodesAndVersions&gt; list = Arrays.asList(\r\n            new GpbCodesAndVersions(&quot;code1&quot;, 1, Arrays.asList(new General(1), new General(2))),\r\n            new GpbCodesAndVersions(&quot;code2&quot;, 2,  Arrays.asList(new General(1), new General(5))),\r\n            new GpbCodesAndVersions(&quot;code3&quot;, 3,  Arrays.asList(new General(2), new General(3))),\r\n            new GpbCodesAndVersions(&quot;code4&quot;, 4,  Arrays.asList(new General(2), new General(4))));\r\n\r\n    final List&lt;GpbCodesAndVersions&gt; newList = list.stream()\r\n        .map(x -&gt; new GpbCodesAndVersions(\r\n                x.getCode(),\r\n                x.getId(),\r\n                x.getContent().stream().filter(g -&gt; g.getStatus() == 1).toList()))\r\n        .filter(Predicate.not(x -&gt; x.getContent().isEmpty()))\r\n        .toList();\r\n\r\nThis will leave all GpbCodesAndVersions unmodified in the original list and creates a new list containing new GpbCodesAndVersions with a new list of generals. Both lists are now independent and modifications of one list will not affect the other list (which avoids unindented modifications).","title":"Filtering list of object inside list of objects","body":"<p>Using <code>peek</code> is generally not recommended for such tasks, because it forces you to use side-effects to modify the list in-place.</p>\n<p>It is better to use side-effect-free <code>map</code> to create a new version of the list (functional-style):</p>\n<pre><code>final List&lt;GpbCodesAndVersions&gt; list = Arrays.asList(\n        new GpbCodesAndVersions(&quot;code1&quot;, 1, Arrays.asList(new General(1), new General(2))),\n        new GpbCodesAndVersions(&quot;code2&quot;, 2,  Arrays.asList(new General(1), new General(5))),\n        new GpbCodesAndVersions(&quot;code3&quot;, 3,  Arrays.asList(new General(2), new General(3))),\n        new GpbCodesAndVersions(&quot;code4&quot;, 4,  Arrays.asList(new General(2), new General(4))));\n\nfinal List&lt;GpbCodesAndVersions&gt; newList = list.stream()\n    .map(x -&gt; new GpbCodesAndVersions(\n            x.getCode(),\n            x.getId(),\n            x.getContent().stream().filter(g -&gt; g.getStatus() == 1).toList()))\n    .filter(Predicate.not(x -&gt; x.getContent().isEmpty()))\n    .toList();\n</code></pre>\n<p>This will leave all GpbCodesAndVersions unmodified in the original list and creates a new list containing new GpbCodesAndVersions with a new list of generals. Both lists are now independent and modifications of one list will not affect the other list (which avoids unindented modifications).</p>\n"},{"tags":[],"owner":{"account_id":22506547,"reputation":965,"user_id":16702058,"display_name":"Hi computer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663819754,"creation_date":1663685696,"answer_id":73788735,"question_id":73787792,"body_markdown":"I think anyMatch can help, thanks for correcting me @knittl\r\n\r\nJust a small thing, it will immediately apply the `map` function after `filter out` one item from list, means the process will be in below order(in this case, first two item can be processed after filter), means **it will iterate the list only once**\r\n```\r\nfilter, map, filter, map, filter, filter, other actions\r\n```\r\n```\r\nList&lt;GpbCodesAndVersions&gt; result1 = list.stream()\r\n        .filter(x -&gt; x.getContent().stream().anyMatch(y -&gt; y.getStatus() == 1))\r\n        .map(x -&gt; {\r\n            List&lt;General&gt; generals2 = x.getContent().stream().filter(g -&gt; g.getStatus() == 1).toList();\r\n            x.setContent(generals2);\r\n            return x;\r\n        })\r\n        .collect(Collectors.toList());\r\n\r\n\r\nSystem.out.println(&quot;result1 = &quot; + result1);\r\n\r\nresult1 = [GpbCodesAndVersions(code=code1, v=1, content=[General(status=1)]), GpbCodesAndVersions(code=code2, v=2, content=[General(status=1)])]\r\n\r\n```","title":"Filtering list of object inside list of objects","body":"<p>I think anyMatch can help, thanks for correcting me @knittl</p>\n<p>Just a small thing, it will immediately apply the <code>map</code> function after <code>filter out</code> one item from list, means the process will be in below order(in this case, first two item can be processed after filter), means <strong>it will iterate the list only once</strong></p>\n<pre><code>filter, map, filter, map, filter, filter, other actions\n</code></pre>\n<pre><code>List&lt;GpbCodesAndVersions&gt; result1 = list.stream()\n        .filter(x -&gt; x.getContent().stream().anyMatch(y -&gt; y.getStatus() == 1))\n        .map(x -&gt; {\n            List&lt;General&gt; generals2 = x.getContent().stream().filter(g -&gt; g.getStatus() == 1).toList();\n            x.setContent(generals2);\n            return x;\n        })\n        .collect(Collectors.toList());\n\n\nSystem.out.println(&quot;result1 = &quot; + result1);\n\nresult1 = [GpbCodesAndVersions(code=code1, v=1, content=[General(status=1)]), GpbCodesAndVersions(code=code2, v=2, content=[General(status=1)])]\n\n</code></pre>\n"}],"owner":{"account_id":14700288,"reputation":89,"user_id":10616501,"display_name":"HudsonHornet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1663819754,"creation_date":1663681662,"question_id":73787792,"body_markdown":"So i have a list of objects: \r\n\r\n    \t\tList&lt;GpbCodesAndVersions&gt; lst = Arrays.asList(new GpbCodesAndVersions(&quot;code1&quot;, 1, Arrays.asList(new General(1), new General(2))),\r\n\t\t\t\tnew GpbCodesAndVersions(&quot;code2&quot;, 2,  Arrays.asList(new General(1), new General(5))),\r\n\t\t\t\tnew GpbCodesAndVersions(&quot;code3&quot;, 3,  Arrays.asList(new General(2), new General(3))),\r\n\t\t\t\tnew GpbCodesAndVersions(&quot;code4&quot;, 4,  Arrays.asList(new General(2), new General(4))));\r\n \r\n\r\nAnd i want to filter this list and get list which includes only General(1) fields:\r\n`GpbCodesAndVersions(code=code1, version=1, content=[General(status=1)]), GpbCodesAndVersions(code=code2, version=2, content=[General(status=1)])`\r\n\r\nMy code is working, but maybe it possible to do it more beautiful ?\r\nMy code:\r\n\r\n    \tList&lt;GpbCodesAndVersions&gt; versionOneGeneral = lst.stream().peek(x -&gt; {\r\n\t\t\tList&lt;General&gt; generals = x.getContent().stream().filter(y -&gt; y.getStatus().equals(1)).toList();\r\n\t\t\tx.setContent(generals);\r\n\t\t}).filter(z -&gt; !z.getContent().isEmpty()).toList();","title":"Filtering list of object inside list of objects","body":"<p>So i have a list of objects:</p>\n<pre><code>        List&lt;GpbCodesAndVersions&gt; lst = Arrays.asList(new GpbCodesAndVersions(&quot;code1&quot;, 1, Arrays.asList(new General(1), new General(2))),\n            new GpbCodesAndVersions(&quot;code2&quot;, 2,  Arrays.asList(new General(1), new General(5))),\n            new GpbCodesAndVersions(&quot;code3&quot;, 3,  Arrays.asList(new General(2), new General(3))),\n            new GpbCodesAndVersions(&quot;code4&quot;, 4,  Arrays.asList(new General(2), new General(4))));\n</code></pre>\n<p>And i want to filter this list and get list which includes only General(1) fields:\n<code>GpbCodesAndVersions(code=code1, version=1, content=[General(status=1)]), GpbCodesAndVersions(code=code2, version=2, content=[General(status=1)])</code></p>\n<p>My code is working, but maybe it possible to do it more beautiful ?\nMy code:</p>\n<pre><code>    List&lt;GpbCodesAndVersions&gt; versionOneGeneral = lst.stream().peek(x -&gt; {\n        List&lt;General&gt; generals = x.getContent().stream().filter(y -&gt; y.getStatus().equals(1)).toList();\n        x.setContent(generals);\n    }).filter(z -&gt; !z.getContent().isEmpty()).toList();\n</code></pre>\n"},{"tags":["java","android","android-imageview"],"answers":[{"tags":[],"owner":{"account_id":2543820,"reputation":8615,"user_id":2209048,"accept_rate":86,"display_name":"JstnPwll"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1381535754,"creation_date":1381535754,"answer_id":19328950,"question_id":19328756,"body_markdown":"I&#39;m not sure if the ImageView&#39;s anchor point is the middle of the image or the top left corner. If it is the top left corner, you would need to modify your margin calculation:\r\n\r\n    params.setMargins((width-w)/2,(height-h)/2, 0, 0);","title":"set position of programmatically created imageview android","body":"<p>I'm not sure if the ImageView's anchor point is the middle of the image or the top left corner. If it is the top left corner, you would need to modify your margin calculation:</p>\n\n<pre><code>params.setMargins((width-w)/2,(height-h)/2, 0, 0);\n</code></pre>\n"}],"owner":{"account_id":2676970,"reputation":268,"user_id":2313143,"accept_rate":54,"display_name":"Mate Križanac"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7592,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663819745,"creation_date":1381534359,"question_id":19328756,"body_markdown":"I am just trying to position my imageView on desired place on screen, but for some reason, picture is always a little bit off, it is not in the right place. For example, this is my code if I want it to put in the middle of the screen.\r\n\r\nGetting the screen size:\r\n\r\n   \t\tDisplayMetrics displaymetrics = new DisplayMetrics();\r\n\t\tgetWindowManager().getDefaultDisplay().getMetrics(displaymetrics);\r\n\t\theight = displaymetrics.heightPixels;\r\n\t\twidth = displaymetrics.widthPixels;\r\n\r\nGetting the picture size: \r\n\r\n   \t\tBitmapFactory.Options o = new BitmapFactory.Options();\r\n\t\to.inTargetDensity = DisplayMetrics.DENSITY_DEFAULT;\r\n\t\tBitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.car1, o);\r\n\t\tint w = bmp.getWidth();\r\n\t\tint h = bmp.getHeight();\r\n\r\nCreating and positioning imageView:\r\n\r\n   \t\timage = new ImageView(this);\r\n\r\n\t\t\r\n\t\tRelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(\r\n\t\t       \t\t            RelativeLayout.LayoutParams.MATCH_PARENT,\r\n                   \t\t\t\tRelativeLayout.LayoutParams.MATCH_PARENT);\r\n\r\n\t\timage.setScaleType(ImageView.ScaleType.MATRIX);\r\n\t\timage.setImageResource(R.drawable.car1);\r\n\t\timage.setId(1);\r\n\r\n\t\r\n\t\tparams.setMargins((width/2)-w,(height/2)-h, 0, 0);\r\n\t\t\r\n\r\n\t\t((ViewGroup) mainLayout).addView(image, params);\r\n\r\nMy imageView is not on the middle of the screen and I don&#39;t know why, any help? I took middle of the screen as an example; I need various positions. ","title":"set position of programmatically created imageview android","body":"<p>I am just trying to position my imageView on desired place on screen, but for some reason, picture is always a little bit off, it is not in the right place. For example, this is my code if I want it to put in the middle of the screen.</p>\n\n<p>Getting the screen size:</p>\n\n<pre><code>    DisplayMetrics displaymetrics = new DisplayMetrics();\n    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);\n    height = displaymetrics.heightPixels;\n    width = displaymetrics.widthPixels;\n</code></pre>\n\n<p>Getting the picture size: </p>\n\n<pre><code>    BitmapFactory.Options o = new BitmapFactory.Options();\n    o.inTargetDensity = DisplayMetrics.DENSITY_DEFAULT;\n    Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.car1, o);\n    int w = bmp.getWidth();\n    int h = bmp.getHeight();\n</code></pre>\n\n<p>Creating and positioning imageView:</p>\n\n<pre><code>    image = new ImageView(this);\n\n\n    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(\n                            RelativeLayout.LayoutParams.MATCH_PARENT,\n                            RelativeLayout.LayoutParams.MATCH_PARENT);\n\n    image.setScaleType(ImageView.ScaleType.MATRIX);\n    image.setImageResource(R.drawable.car1);\n    image.setId(1);\n\n\n    params.setMargins((width/2)-w,(height/2)-h, 0, 0);\n\n\n    ((ViewGroup) mainLayout).addView(image, params);\n</code></pre>\n\n<p>My imageView is not on the middle of the screen and I don't know why, any help? I took middle of the screen as an example; I need various positions. </p>\n"},{"tags":["java","floating-point","double","precision"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1663816506,"post_id":73808832,"comment_id":130329624,"body_markdown":"If precision beyond about 15 significant figures is required, you should use `BigDecimal` instead of `double`.  A `double` has only 64 bits, and it uses them in such a way that you only get about 15-16 significant figures of accuracy, no matter what you do.","body":"If precision beyond about 15 significant figures is required, you should use <code>BigDecimal</code> instead of <code>double</code>.  A <code>double</code> has only 64 bits, and it uses them in such a way that you only get about 15-16 significant figures of accuracy, no matter what you do."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1663816940,"post_id":73808832,"comment_id":130329700,"body_markdown":"Basically, the precision you are losing is not being lost in parsing.  It is being lost because you are using `double` / `Double` to represent the value.","body":"Basically, the precision you are losing is not being lost in parsing.  It is being lost because you are using <code>double</code> / <code>Double</code> to represent the value."},{"owner":{"account_id":4625433,"reputation":344,"user_id":3749391,"accept_rate":100,"display_name":"CoderGuy"},"score":0,"creation_date":1663817052,"post_id":73808832,"comment_id":130329715,"body_markdown":"@DawoodibnKareem Only 15 significant figures are required, that&#39;s why I&#39;m confused on why the precision is being lost since a double should be able to handle 15 significant figures. Even at 14 significant figures I&#39;m seeing this behavior occurring. Since this data is stored and vended as a double, I cannot use a BigDecimal.","body":"@DawoodibnKareem Only 15 significant figures are required, that&#39;s why I&#39;m confused on why the precision is being lost since a double should be able to handle 15 significant figures. Even at 14 significant figures I&#39;m seeing this behavior occurring. Since this data is stored and vended as a double, I cannot use a BigDecimal."},{"owner":{"account_id":4625433,"reputation":344,"user_id":3749391,"accept_rate":100,"display_name":"CoderGuy"},"score":0,"creation_date":1663817217,"post_id":73808832,"comment_id":130329737,"body_markdown":"@StephenC Why is this occurring with 14/15 significant figures if a double is capable of 14/15 significant figures precision?","body":"@StephenC Why is this occurring with 14/15 significant figures if a double is capable of 14/15 significant figures precision?"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1663818281,"post_id":73808832,"comment_id":130329902,"body_markdown":"`74.858546917546052` has 17 significant figures. I think you&#39;ve confused &quot;significant figures&quot; for &quot;decimal places&quot;.","body":"<code>74.858546917546052</code> has 17 significant figures. I think you&#39;ve confused &quot;significant figures&quot; for &quot;decimal places&quot;."},{"owner":{"account_id":4625433,"reputation":344,"user_id":3749391,"accept_rate":100,"display_name":"CoderGuy"},"score":0,"creation_date":1663818697,"post_id":73808832,"comment_id":130329952,"body_markdown":"Ah okay, that was my misunderstanding. Thanks!","body":"Ah okay, that was my misunderstanding. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":18555620,"reputation":71,"user_id":13520809,"display_name":"lawnjittle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663818597,"creation_date":1663818597,"answer_id":73809154,"question_id":73808832,"body_markdown":"You are correct that the loss of precision is due to how floating point numbers are represented under the hood. \r\n\r\nIf you&#39;d like to do floating point arithmetic without a loss of precision at this granularity, you&#39;ll need to use a special library. Example: BigDecimal (https://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)\r\n\r\nIf you&#39;re still interested in the *why this is happening part*, then that&#39;s next. It&#39;s a little bit more complicated than just using a new library.\r\n\r\nThe first thing to note is that at the end of the day, on computers, it&#39;s all just binary and everything needs to have a binary representation. The strings in your program have binary representations. The integers do. The program itself does. And so do floating point values.\r\n\r\nYou can stop reading for a moment and imagine how *you* would represent a fractional value in binary... it&#39;s a tricky problem. There are actually two *main* solutions to this problem that I personally am aware of (and I&#39;m not claiming to be aware of all of them).\r\n\r\nThe first is one that you may not have heard of called *fixed-point representation*. As its name suggests, in fixed-point representations, the &quot;dot&quot; character is locked in place depending on how you&#39;re interpreting the bits. The idea is that in the binary, you encode a constant number of digits after the decimal point. This is not the point of this post, so I&#39;ll move on but I wanted to mention it. More info: https://en.wikipedia.org/wiki/Fixed-point_arithmetic\r\n\r\nThe second method which is much more common is called *floating-point representation*. The widespread standard for floating-point representation is the IEEE 754: https://en.wikipedia.org/wiki/IEEE_754 ... this is the standard that is responsible for the loss of precision that you&#39;re seeing today! The key idea with floating point numbers is that they implement what you probably know as scientific notation. In decimal:\r\n\r\n    5.7893 * 10^4 == 57893\r\n\r\nHow does this work in binary? More on that next.\r\n\r\nThere are a variety of different formats outlined by IEEE 754 to represent fractional values using different numbers of bits (i.e 16 bits, 32 bits, 64 bits, and so on). A Java double is a 64-bit IEEE 754 floating-point value. The 64 bits of a double are divided like so:\r\n\r\n[![IEEE 754 Double Precision][1]][1]\r\n\r\nThe bits fields above have the following roles:\r\n\r\n1. The &quot;sign&quot; bit signals whether or not the number is negative or not where 1 indicates negative and 0 indicates non-negative.\r\n\r\n2. The &quot;exponent&quot; bits serve as the exponent of your scientific notation (the 4 in 5.7893 * 10^4).\r\n\r\n3. The &quot;fraction&quot; bits (aka the &quot;mantissa&quot;) represents the fractional part of your scientific notation (the 7893 of 5.7893 * 10^4).\r\n\r\nThis might make you wonder, how do we represent the 5 in 5.7894 * 10^4 if we&#39;ve already used all the bits? The answer is that since we don&#39;t represent these values in decimal (we&#39;re using binary), we can *imply* the first digit of the number. For example, we could write:\r\n\r\n    (BINARY) 0.111 * 10^11 == (DECIMAL) 0.875 * 2^3 (How did I do this conversion? See footnote.)\r\n\r\nBut there&#39;s actually a clever trick. Instead, since all bits are either a 1 or 0, we can choose to write that same value as:\r\n\r\n    (BINARY) 1.11 * 10^10 == (DECIMAL)  1.75 * 2^2\r\n\r\nNote the single, leading 1 in 1.11. If we choose to write all floating-point values with a single leading 1, then we can just assume either:\r\n\r\n1. That the value starts with a 1 bit.\r\n    OR \r\n2. The value is 0.\r\n\r\nThis is the trick that the IEEE 754 standard uses. It *assumes* that if your &quot;exponent&quot; is not zero, then you must be encoding a value with a leading 1. This means that bit doesn&#39;t have to be stored in the representation, gaining all of us one extra bit of precision. (There is more nuance with the exponent bits than I am sharing here. Look up &quot;IEEE 754 exponent bias&quot; to learn more.)\r\n\r\nSo now you know the situation. We have 1 sign bit, 11 exponent bits, and 52 bits to represent the fractional part of your number. So *why are we losing precision?* The answer is because 52 bits just isn&#39;t enough bits to represent the entire real number line (you&#39;d actually need infinite bits to represent it).\r\n\r\nBecause certain values can&#39;t be compute by adding together reciprocals of powers of two (1/2, 1/4, 1/8, 1/16, etc.), it is possible (certain, almost) that you&#39;ll try to represent a real number that cannot be expressed in 52 bits of precision. For example, the decimal value 1/10 cannot be expressed in binary. Let&#39;s try:\r\n\r\n    Binary        |   Decimal\r\n    ----------------------------\r\n    0.1           |     0.5  &lt;-- too big.\r\n    0.01          |     0.25 &lt;-- too big.\r\n    0.001         |     0.125 &lt;-- ...\r\n    0.0001        |     0.0625  &lt;-- small enough! Lets use this bit first.\r\n    0.00011       |     0.09375 &lt;-- closer...\r\n    0.000111      |     0.109375 &lt;-- too big again!\r\n    0.0001101     |     0.1015625\r\n    0.00011001    |     0.09765625\r\n    0.000110011   |     0.099609375\r\n    0.0001100111  |     0.1005859375 \r\n    0.00011001101 |     ... this is gonna take awhile.\r\n\r\nAs you might be able to see, you end up falling into an infinite loop. Much like Base 10 is not capable of representing 1/3 (0.33333333...), binary is not capable of representing 1/10 (0.00011001100110011...).\r\n\r\nThis is why when you use Java&#39;s double precision floating point value data type, you still lose precision.\r\n\r\n\r\n**Footnote:** In binary, 1010 == 10 in decimal. We know this because:\r\n\r\n    (2^3) * 1 + (2^2) * 0 + (2^1) * 1 + (2^0) * 0 == 10\r\n\r\nSimilarly, with fractional binary:\r\n\r\n    0.1 == 2^(-1) == 0.5\r\n    0.01 == 2^(-2) == 0.25\r\n    0.001 == 2^(-3) == 0.0125\r\n    ... and so on.\r\n\r\nSo 0.111 binary == 0.875 decimal.\r\n\r\n  [1]: https://i.stack.imgur.com/ptqRy.png\r\n","title":"How to avoid losing precision when using Java&#39;s Double.parseDouble method","body":"<p>You are correct that the loss of precision is due to how floating point numbers are represented under the hood.</p>\n<p>If you'd like to do floating point arithmetic without a loss of precision at this granularity, you'll need to use a special library. Example: BigDecimal (<a href=\"https://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html</a>)</p>\n<p>If you're still interested in the <em>why this is happening part</em>, then that's next. It's a little bit more complicated than just using a new library.</p>\n<p>The first thing to note is that at the end of the day, on computers, it's all just binary and everything needs to have a binary representation. The strings in your program have binary representations. The integers do. The program itself does. And so do floating point values.</p>\n<p>You can stop reading for a moment and imagine how <em>you</em> would represent a fractional value in binary... it's a tricky problem. There are actually two <em>main</em> solutions to this problem that I personally am aware of (and I'm not claiming to be aware of all of them).</p>\n<p>The first is one that you may not have heard of called <em>fixed-point representation</em>. As its name suggests, in fixed-point representations, the &quot;dot&quot; character is locked in place depending on how you're interpreting the bits. The idea is that in the binary, you encode a constant number of digits after the decimal point. This is not the point of this post, so I'll move on but I wanted to mention it. More info: <a href=\"https://en.wikipedia.org/wiki/Fixed-point_arithmetic\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Fixed-point_arithmetic</a></p>\n<p>The second method which is much more common is called <em>floating-point representation</em>. The widespread standard for floating-point representation is the IEEE 754: <a href=\"https://en.wikipedia.org/wiki/IEEE_754\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/IEEE_754</a> ... this is the standard that is responsible for the loss of precision that you're seeing today! The key idea with floating point numbers is that they implement what you probably know as scientific notation. In decimal:</p>\n<pre><code>5.7893 * 10^4 == 57893\n</code></pre>\n<p>How does this work in binary? More on that next.</p>\n<p>There are a variety of different formats outlined by IEEE 754 to represent fractional values using different numbers of bits (i.e 16 bits, 32 bits, 64 bits, and so on). A Java double is a 64-bit IEEE 754 floating-point value. The 64 bits of a double are divided like so:</p>\n<p><a href=\"https://i.stack.imgur.com/ptqRy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ptqRy.png\" alt=\"IEEE 754 Double Precision\" /></a></p>\n<p>The bits fields above have the following roles:</p>\n<ol>\n<li><p>The &quot;sign&quot; bit signals whether or not the number is negative or not where 1 indicates negative and 0 indicates non-negative.</p>\n</li>\n<li><p>The &quot;exponent&quot; bits serve as the exponent of your scientific notation (the 4 in 5.7893 * 10^4).</p>\n</li>\n<li><p>The &quot;fraction&quot; bits (aka the &quot;mantissa&quot;) represents the fractional part of your scientific notation (the 7893 of 5.7893 * 10^4).</p>\n</li>\n</ol>\n<p>This might make you wonder, how do we represent the 5 in 5.7894 * 10^4 if we've already used all the bits? The answer is that since we don't represent these values in decimal (we're using binary), we can <em>imply</em> the first digit of the number. For example, we could write:</p>\n<pre><code>(BINARY) 0.111 * 10^11 == (DECIMAL) 0.875 * 2^3 (How did I do this conversion? See footnote.)\n</code></pre>\n<p>But there's actually a clever trick. Instead, since all bits are either a 1 or 0, we can choose to write that same value as:</p>\n<pre><code>(BINARY) 1.11 * 10^10 == (DECIMAL)  1.75 * 2^2\n</code></pre>\n<p>Note the single, leading 1 in 1.11. If we choose to write all floating-point values with a single leading 1, then we can just assume either:</p>\n<ol>\n<li>That the value starts with a 1 bit.\nOR</li>\n<li>The value is 0.</li>\n</ol>\n<p>This is the trick that the IEEE 754 standard uses. It <em>assumes</em> that if your &quot;exponent&quot; is not zero, then you must be encoding a value with a leading 1. This means that bit doesn't have to be stored in the representation, gaining all of us one extra bit of precision. (There is more nuance with the exponent bits than I am sharing here. Look up &quot;IEEE 754 exponent bias&quot; to learn more.)</p>\n<p>So now you know the situation. We have 1 sign bit, 11 exponent bits, and 52 bits to represent the fractional part of your number. So <em>why are we losing precision?</em> The answer is because 52 bits just isn't enough bits to represent the entire real number line (you'd actually need infinite bits to represent it).</p>\n<p>Because certain values can't be compute by adding together reciprocals of powers of two (1/2, 1/4, 1/8, 1/16, etc.), it is possible (certain, almost) that you'll try to represent a real number that cannot be expressed in 52 bits of precision. For example, the decimal value 1/10 cannot be expressed in binary. Let's try:</p>\n<pre><code>Binary        |   Decimal\n----------------------------\n0.1           |     0.5  &lt;-- too big.\n0.01          |     0.25 &lt;-- too big.\n0.001         |     0.125 &lt;-- ...\n0.0001        |     0.0625  &lt;-- small enough! Lets use this bit first.\n0.00011       |     0.09375 &lt;-- closer...\n0.000111      |     0.109375 &lt;-- too big again!\n0.0001101     |     0.1015625\n0.00011001    |     0.09765625\n0.000110011   |     0.099609375\n0.0001100111  |     0.1005859375 \n0.00011001101 |     ... this is gonna take awhile.\n</code></pre>\n<p>As you might be able to see, you end up falling into an infinite loop. Much like Base 10 is not capable of representing 1/3 (0.33333333...), binary is not capable of representing 1/10 (0.00011001100110011...).</p>\n<p>This is why when you use Java's double precision floating point value data type, you still lose precision.</p>\n<p><strong>Footnote:</strong> In binary, 1010 == 10 in decimal. We know this because:</p>\n<pre><code>(2^3) * 1 + (2^2) * 0 + (2^1) * 1 + (2^0) * 0 == 10\n</code></pre>\n<p>Similarly, with fractional binary:</p>\n<pre><code>0.1 == 2^(-1) == 0.5\n0.01 == 2^(-2) == 0.25\n0.001 == 2^(-3) == 0.0125\n... and so on.\n</code></pre>\n<p>So 0.111 binary == 0.875 decimal.</p>\n"}],"owner":{"account_id":4625433,"reputation":344,"user_id":3749391,"accept_rate":100,"display_name":"CoderGuy"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":454,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1663817591,"answer_count":1,"score":1,"last_activity_date":1663818597,"creation_date":1663815044,"question_id":73808832,"body_markdown":"I&#39;m trying to parse a string into a double using Java&#39;s Double.parseDouble and losing precision.\r\n\r\nExamples:\r\n\r\n    Double.parseDouble(&quot;-74.858546917546052&quot;) returns -&gt; -74.85854691754605\r\n    Double.parseDouble(&quot;81.782256145962017&quot;) returns -&gt; 81.78225614596202\r\n    Double.parseDouble(&quot;54.623193637334667&quot;) returns -&gt; 54.623193637334666\r\n    Double.parseDouble(&quot;90.693502119687192&quot;) returns -&gt; 90.6935021196872\r\n    Double.parseDouble(&quot;-56.280643193737337&quot;) returns -&gt; -56.28064319373734\r\n\r\nThe method works as expected when using a double with 13 or less decimals, but loses precision with 14 or 15 decimals, which makes me think some floating point rounding errors are occurring.\r\n\r\nI would like to understand why this is happening and if there&#39;s any way to parse a double string with 14/15 decimals to a double without losing precision.\r\n\r\nAny input is greatly appreciated!\r\n","title":"How to avoid losing precision when using Java&#39;s Double.parseDouble method","body":"<p>I'm trying to parse a string into a double using Java's Double.parseDouble and losing precision.</p>\n<p>Examples:</p>\n<pre><code>Double.parseDouble(&quot;-74.858546917546052&quot;) returns -&gt; -74.85854691754605\nDouble.parseDouble(&quot;81.782256145962017&quot;) returns -&gt; 81.78225614596202\nDouble.parseDouble(&quot;54.623193637334667&quot;) returns -&gt; 54.623193637334666\nDouble.parseDouble(&quot;90.693502119687192&quot;) returns -&gt; 90.6935021196872\nDouble.parseDouble(&quot;-56.280643193737337&quot;) returns -&gt; -56.28064319373734\n</code></pre>\n<p>The method works as expected when using a double with 13 or less decimals, but loses precision with 14 or 15 decimals, which makes me think some floating point rounding errors are occurring.</p>\n<p>I would like to understand why this is happening and if there's any way to parse a double string with 14/15 decimals to a double without losing precision.</p>\n<p>Any input is greatly appreciated!</p>\n"},{"tags":["java","spring","hashmap","field"],"comments":[{"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"score":1,"creation_date":1663762586,"post_id":73800493,"comment_id":130314891,"body_markdown":"What is the `object`?","body":"What is the <code>object</code>?"},{"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"score":1,"creation_date":1663762624,"post_id":73800493,"comment_id":130314905,"body_markdown":"_&quot;I can not get that value&quot;_: what do you mean here?","body":"<i>&quot;I can not get that value&quot;</i>: what do you mean here?"},{"owner":{"account_id":23897722,"reputation":221,"user_id":17896393,"display_name":"Lulex97"},"score":0,"creation_date":1663762695,"post_id":73800493,"comment_id":130314935,"body_markdown":"object is for example Car which i put in method parameter","body":"object is for example Car which i put in method parameter"},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1663763043,"post_id":73800493,"comment_id":130315059,"body_markdown":"If by chance you are trying to serialize your bean, this library may make you a lot faster: http://genson.io/GettingStarted/#pojo-databinding","body":"If by chance you are trying to serialize your bean, this library may make you a lot faster: <a href=\"http://genson.io/GettingStarted/#pojo-databinding\" rel=\"nofollow noreferrer\">genson.io/GettingStarted/#pojo-databinding</a>"}],"answers":[{"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663763139,"creation_date":1663763139,"answer_id":73800713,"question_id":73800493,"body_markdown":"The error you experience is `ClassCastException`:\r\n\r\n&gt; ```\r\n&gt; Exception in thread &quot;main&quot; java.lang.ClassCastException: class java.lang.Long cannot be cast to class java.lang.Double\r\n&gt; ```\r\n\r\nThis is obvious as you try to cast `long vmax` into `Double` through the following snippet:\r\n\r\n```\r\n(Double) declaredField.get(object)\r\n```\r\n\r\nThough the declared field name is `String`, the field&#39;s value cannot be determined and casting is required. The wanted type is never guaranteed. In the case of `double price`, it can be cast into `Double`, but it is not for `long vmax`.\r\n\r\nYou want to change the map generics and casting to `Map&lt;String, Number&gt;` or rather `Map&lt;String, Object&gt;` that would be safer.\r\n\r\n```\r\npublic static Map&lt;String, Object&gt; convert(Object object) throws IllegalAccessException {\r\n\tMap&lt;String, Object&gt; parameters = new HashMap&lt;&gt;();\r\n\tfor (Field declaredField : object.getClass().getDeclaredFields()) {\r\n\t\tdeclaredField.setAccessible(true);\r\n\t\tparameters.put(declaredField.getName(), declaredField.get(object));\r\n\t}\r\n\treturn parameters;\r\n}\r\n```\r\n\r\nFor sample instance `new Car(15d, 25L)`, the map would result as `{price=15.0, vmax=25}`.","title":"Map of field name as key and value as value","body":"<p>The error you experience is <code>ClassCastException</code>:</p>\n<blockquote>\n<pre><code>Exception in thread &quot;main&quot; java.lang.ClassCastException: class java.lang.Long cannot be cast to class java.lang.Double\n</code></pre>\n</blockquote>\n<p>This is obvious as you try to cast <code>long vmax</code> into <code>Double</code> through the following snippet:</p>\n<pre><code>(Double) declaredField.get(object)\n</code></pre>\n<p>Though the declared field name is <code>String</code>, the field's value cannot be determined and casting is required. The wanted type is never guaranteed. In the case of <code>double price</code>, it can be cast into <code>Double</code>, but it is not for <code>long vmax</code>.</p>\n<p>You want to change the map generics and casting to <code>Map&lt;String, Number&gt;</code> or rather <code>Map&lt;String, Object&gt;</code> that would be safer.</p>\n<pre><code>public static Map&lt;String, Object&gt; convert(Object object) throws IllegalAccessException {\n    Map&lt;String, Object&gt; parameters = new HashMap&lt;&gt;();\n    for (Field declaredField : object.getClass().getDeclaredFields()) {\n        declaredField.setAccessible(true);\n        parameters.put(declaredField.getName(), declaredField.get(object));\n    }\n    return parameters;\n}\n</code></pre>\n<p>For sample instance <code>new Car(15d, 25L)</code>, the map would result as <code>{price=15.0, vmax=25}</code>.</p>\n"}],"owner":{"account_id":23897722,"reputation":221,"user_id":17896393,"display_name":"Lulex97"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1257,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663818266,"creation_date":1663762247,"question_id":73800493,"body_markdown":"I would like to create Map&lt;String, Double&gt; when as keys there will be names of declared fields of class, and as value - value of that field:\r\nFor example:\r\n\r\n```\r\nclass Car {\r\n    private double price;\r\n    private long vmax;\r\n}\r\n```\r\n```    \r\nMap&lt;{price, 100000}, {vmax, 200}&gt;\r\n```\r\n\r\nI know how to &quot;iter&quot; by fields but I can not get that value:\r\n\r\n```\r\npublic Map&lt;String, Double&gt; convert(Object object) {\r\n    Map&lt;String, Double&gt; parameters = new HashMap&lt;&gt;();\r\n    for (Field declaredField : object.getClass().getDeclaredFields()) {\r\n       declaredField.setAccessible(true);\r\n       parameters.put(declaredField.getName(), (Double) declaredField.get(object));\r\n    }\r\n    return parameters;\r\n}\r\n```","title":"Map of field name as key and value as value","body":"<p>I would like to create Map&lt;String, Double&gt; when as keys there will be names of declared fields of class, and as value - value of that field:\nFor example:</p>\n<pre><code>class Car {\n    private double price;\n    private long vmax;\n}\n</code></pre>\n<pre><code>Map&lt;{price, 100000}, {vmax, 200}&gt;\n</code></pre>\n<p>I know how to &quot;iter&quot; by fields but I can not get that value:</p>\n<pre><code>public Map&lt;String, Double&gt; convert(Object object) {\n    Map&lt;String, Double&gt; parameters = new HashMap&lt;&gt;();\n    for (Field declaredField : object.getClass().getDeclaredFields()) {\n       declaredField.setAccessible(true);\n       parameters.put(declaredField.getName(), (Double) declaredField.get(object));\n    }\n    return parameters;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-properties"],"answers":[{"tags":[],"owner":{"account_id":15714286,"reputation":633,"user_id":11338849,"display_name":"Nitin Zadage"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1574246589,"creation_date":1574246589,"answer_id":58952419,"question_id":58950811,"body_markdown":"I could do it with different approach.\r\n\r\nIn `application.properties`\r\n```properties\r\nkey\\u0020with\\u0020space=test\r\n```\r\nAnd wherever I want to read, autowired `Environment` object. \r\n```java\r\n@Autowired\r\nprivate Environment env\r\n```\r\nand read the property\r\n\r\n```java\r\nString test = env.getProperty(&quot;key with space&quot;);\r\n```\r\nIn your case if you know the key with spaces you can read the property and then place it in the map. But if you don&#39;t know it exactly not sure how it can be handled.","title":"How to bind a property with space to Map key in Spring application.properties file?","body":"<p>I could do it with different approach.</p>\n\n<p>In <code>application.properties</code></p>\n\n<pre><code>key\\u0020with\\u0020space=test\n</code></pre>\n\n<p>And wherever I want to read, autowired <code>Environment</code> object. </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Autowired\nprivate Environment env\n</code></pre>\n\n<p>and read the property</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>String test = env.getProperty(\"key with space\");\n</code></pre>\n\n<p>In your case if you know the key with spaces you can read the property and then place it in the map. But if you don't know it exactly not sure how it can be handled.</p>\n"},{"tags":[],"owner":{"account_id":19133236,"reputation":11,"user_id":13974690,"display_name":"gzep"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604492545,"creation_date":1604389656,"answer_id":64658654,"question_id":58950811,"body_markdown":"For me, Spring even removed a period and non-Latin 1 characters (I use YAML, because of this) from the key.  Thats why I ended up with a list with the values separated by semicolon:\r\n\r\n    myMapAsList:\r\n       - key 1;value 1\r\n       - key 2 with &#228;&#246;&#252;.;value 2\r\n\r\nYou need a wrapper class with the fields key and value:\r\n\r\n```\r\npublic class YourWrapper {\r\n\tprivate String key;\r\n\tprivate String value;\r\n\t// getter &amp; setter &amp; constructor\r\n}\r\n```\r\n\r\n... plus a converter:\r\n\r\n```\r\n@Component\r\n@ConfigurationPropertiesBinding\r\npublic class YourWrapperConverter implements Converter&lt;String, YourWrapper&gt;{\r\n\r\n\t@Override\r\n\tpublic YourWrapper convert(String source) {\r\n\t\tString[] data = source.split(&quot;;&quot;);\r\n\t\treturn new YourWrapper(data[0], data[1]);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nIn your properties class: `private List&lt;YourWrapper&gt; myMapAsList;`. Afterwards you may loop through the list and fill your map.","title":"How to bind a property with space to Map key in Spring application.properties file?","body":"<p>For me, Spring even removed a period and non-Latin 1 characters (I use YAML, because of this) from the key.  Thats why I ended up with a list with the values separated by semicolon:</p>\n<pre><code>myMapAsList:\n   - key 1;value 1\n   - key 2 with äöü.;value 2\n</code></pre>\n<p>You need a wrapper class with the fields key and value:</p>\n<pre><code>public class YourWrapper {\n    private String key;\n    private String value;\n    // getter &amp; setter &amp; constructor\n}\n</code></pre>\n<p>... plus a converter:</p>\n<pre><code>@Component\n@ConfigurationPropertiesBinding\npublic class YourWrapperConverter implements Converter&lt;String, YourWrapper&gt;{\n\n    @Override\n    public YourWrapper convert(String source) {\n        String[] data = source.split(&quot;;&quot;);\n        return new YourWrapper(data[0], data[1]);\n    }\n\n}\n</code></pre>\n<p>In your properties class: <code>private List&lt;YourWrapper&gt; myMapAsList;</code>. Afterwards you may loop through the list and fill your map.</p>\n"},{"tags":[],"owner":{"account_id":6514317,"reputation":96,"user_id":5040647,"display_name":"Saberos"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1625669252,"creation_date":1625669252,"answer_id":68288249,"question_id":58950811,"body_markdown":"Happened to run into the same issue, I found the trick to be using `[]` brackets combined with escaping the whitespace using either `\\ ` or `\\u0020`:\r\n\r\n    myProperties.map.key1=value1\r\n    myProperties.map.key2=value2\r\n    myProperties.map.[key\\ with\\ space]=value3\r\n\r\nThis way the whitespace is preserved in the map key.\r\n\r\nI was unable to find documentation for this, purely stumbled upon it by trial and error.","title":"How to bind a property with space to Map key in Spring application.properties file?","body":"<p>Happened to run into the same issue, I found the trick to be using <code>[]</code> brackets combined with escaping the whitespace using either <code>\\ </code> or <code>\\u0020</code>:</p>\n<pre><code>myProperties.map.key1=value1\nmyProperties.map.key2=value2\nmyProperties.map.[key\\ with\\ space]=value3\n</code></pre>\n<p>This way the whitespace is preserved in the map key.</p>\n<p>I was unable to find documentation for this, purely stumbled upon it by trial and error.</p>\n"},{"tags":[],"owner":{"account_id":555405,"reputation":743,"user_id":1108508,"display_name":"Nigel Charman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663818181,"creation_date":1663818181,"answer_id":73809125,"question_id":58950811,"body_markdown":"For map keys with non-alphanumeric characters (other than -) in them, surround the key name with [].\r\n\r\nIn your example:\r\n`&#39;[myProperties.map.key with space]&#39;=value3`\r\n\r\nSee https://github.com/spring-projects/spring-boot/wiki/Relaxed-Binding-2.0#maps for further details.","title":"How to bind a property with space to Map key in Spring application.properties file?","body":"<p>For map keys with non-alphanumeric characters (other than -) in them, surround the key name with [].</p>\n<p>In your example:\n<code>'[myProperties.map.key with space]'=value3</code></p>\n<p>See <a href=\"https://github.com/spring-projects/spring-boot/wiki/Relaxed-Binding-2.0#maps\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/wiki/Relaxed-Binding-2.0#maps</a> for further details.</p>\n"}],"owner":{"account_id":1736824,"reputation":5410,"user_id":1589188,"accept_rate":66,"display_name":"user1589188"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5687,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":68288249,"answer_count":4,"score":7,"last_activity_date":1663818181,"creation_date":1574241867,"question_id":58950811,"body_markdown":"Given an application.properties file:\r\n\r\n    myProperties.map.key1=value1\r\n    myProperties.map.key2=value2\r\n    myProperties.map.key with space=value3\r\n\r\nAnd the properties class:\r\n\r\n    @ConfigurationProperties\r\n    public class MyProperties {\r\n        private Map&lt;String, String&gt; map;\r\n        // getters and setters\r\n    }\r\n\r\nI have tried to escape the spaces like `key\\ with\\ space` or even `key\\u0020with\\u0020space` but both still ended up as `keywithspace` in the map. Please point out the correct way to add key with space to map using Spring application.properties, thank you.","title":"How to bind a property with space to Map key in Spring application.properties file?","body":"<p>Given an application.properties file:</p>\n\n<pre><code>myProperties.map.key1=value1\nmyProperties.map.key2=value2\nmyProperties.map.key with space=value3\n</code></pre>\n\n<p>And the properties class:</p>\n\n<pre><code>@ConfigurationProperties\npublic class MyProperties {\n    private Map&lt;String, String&gt; map;\n    // getters and setters\n}\n</code></pre>\n\n<p>I have tried to escape the spaces like <code>key\\ with\\ space</code> or even <code>key\\u0020with\\u0020space</code> but both still ended up as <code>keywithspace</code> in the map. Please point out the correct way to add key with space to map using Spring application.properties, thank you.</p>\n"},{"tags":["java","spring","spring-mvc","spring-security"],"answers":[{"tags":[],"owner":{"account_id":1460608,"reputation":6043,"user_id":1375049,"display_name":"dimas"},"down_vote_count":3,"up_vote_count":94,"is_accepted":true,"score":91,"last_activity_date":1475827512,"creation_date":1342177885,"answer_id":11469342,"question_id":11469211,"body_markdown":"There is a special security expression in spring security:\r\n    \r\n\r\n&gt; *hasAnyRole(list of roles)* - true if the user has been granted any of\r\n&gt; the roles specified (given as a comma-separated list of strings).\r\n\r\nI have never used it but I think it is exactly what you are looking for.\r\n\r\nExample usage:\r\n\r\n    &lt;security:authorize access=&quot;hasAnyRole(&#39;ADMIN&#39;, &#39;DEVELOPER&#39;)&quot;&gt;\r\n    \t...\r\n    &lt;/security:authorize&gt;\r\n\r\nHere is a [link to the reference documentation][1] where the standard spring security expressions are described. Also, here is a [discussion][2] where I described how to create custom expression if you need it.\r\n\r\n\r\n  [1]: http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html\r\n  [2]: https://stackoverflow.com/questions/8321696/creating-new-roles-and-permissions-dynamically-in-spring-security-3/10451102#10451102","title":"How to use &lt;sec:authorize access=&quot;hasRole(&#39;ROLES)&quot;&gt; for checking multiple Roles?","body":"<p>There is a special security expression in spring security:</p>\n\n<blockquote>\n  <p><em>hasAnyRole(list of roles)</em> - true if the user has been granted any of\n  the roles specified (given as a comma-separated list of strings).</p>\n</blockquote>\n\n<p>I have never used it but I think it is exactly what you are looking for.</p>\n\n<p>Example usage:</p>\n\n<pre><code>&lt;security:authorize access=\"hasAnyRole('ADMIN', 'DEVELOPER')\"&gt;\n    ...\n&lt;/security:authorize&gt;\n</code></pre>\n\n<p>Here is a <a href=\"http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html\" rel=\"noreferrer\">link to the reference documentation</a> where the standard spring security expressions are described. Also, here is a <a href=\"https://stackoverflow.com/questions/8321696/creating-new-roles-and-permissions-dynamically-in-spring-security-3/10451102#10451102\">discussion</a> where I described how to create custom expression if you need it.</p>\n"},{"tags":[],"owner":{"account_id":2540468,"reputation":443,"user_id":2206374,"accept_rate":20,"display_name":"Musaddique"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1439473143,"creation_date":1439472831,"answer_id":31989782,"question_id":11469211,"body_markdown":"i used `hasAnyRole(&#39;ROLE_ADMIN&#39;,&#39;ROLE_USER&#39;)` but i was getting bean creation below error \r\n\r\n    Error creating bean with name     &#39;org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0&#39;: Cannot create inner bean &#39;(inner bean)&#39; of type [org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource] while setting bean property &#39;securityMetadataSource&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;(inner bean)#2&#39;: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource]: Constructor threw exception; nested exception is java.lang.IllegalArgumentException: Expected a single expression attribute for [/user/*]\r\n\r\nthen i tried \r\n\r\n`access=&quot;hasRole(&#39;ROLE_ADMIN&#39;) or hasRole(&#39;ROLE_USER&#39;)&quot;` and it&#39;s working fine for me.\r\n\r\nas one of my user is admin as well as user. \r\n\r\nfor this you need to add `use-expressions=&quot;true&quot; auto-config=&quot;true&quot;` followed by http tag \r\n\r\n    &lt;http use-expressions=&quot;true&quot; auto-config=&quot;true&quot; &gt;.....&lt;/http&gt;\r\n\r\n","title":"How to use &lt;sec:authorize access=&quot;hasRole(&#39;ROLES)&quot;&gt; for checking multiple Roles?","body":"<p>i used <code>hasAnyRole('ROLE_ADMIN','ROLE_USER')</code> but i was getting bean creation below error </p>\n\n<pre><code>Error creating bean with name     'org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0': Cannot create inner bean '(inner bean)' of type [org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource] while setting bean property 'securityMetadataSource'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#2': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource]: Constructor threw exception; nested exception is java.lang.IllegalArgumentException: Expected a single expression attribute for [/user/*]\n</code></pre>\n\n<p>then i tried </p>\n\n<p><code>access=\"hasRole('ROLE_ADMIN') or hasRole('ROLE_USER')\"</code> and it's working fine for me.</p>\n\n<p>as one of my user is admin as well as user. </p>\n\n<p>for this you need to add <code>use-expressions=\"true\" auto-config=\"true\"</code> followed by http tag </p>\n\n<pre><code>&lt;http use-expressions=\"true\" auto-config=\"true\" &gt;.....&lt;/http&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2463355,"reputation":315,"user_id":2146981,"display_name":"acidnbass"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1479430212,"creation_date":1479430212,"answer_id":40667655,"question_id":11469211,"body_markdown":"@dimas&#39;s answer is not logically consistent with your question; `ifAllGranted` cannot be directly replaced with `hasAnyRole`.\r\n\r\nFrom the [Spring Security 3—&gt;4 migration guide][1]:\r\n\r\nOld:\r\n\r\n    &lt;sec:authorize ifAllGranted=&quot;ROLE_ADMIN,ROLE_USER&quot;&gt;\r\n    \t&lt;p&gt;Must have ROLE_ADMIN and ROLE_USER&lt;/p&gt;\r\n    &lt;/sec:authorize&gt;\r\n\r\nNew (SPeL):\r\n\r\n    &lt;sec:authorize access=&quot;hasRole(&#39;ROLE_ADMIN&#39;) and hasRole(&#39;ROLE_USER&#39;)&quot;&gt;\r\n    \t&lt;p&gt;Must have ROLE_ADMIN and ROLE_USER&lt;/p&gt;\r\n    &lt;/sec:authorize&gt;\r\n\r\nReplacing `ifAllGranted` directly with `hasAnyRole` will cause spring to evaluate the statement using an `OR` instead of an `AND`.  That is, `hasAnyRole` will return `true` if the authenticated principal contains *at least one* of the specified roles, whereas Spring&#39;s (now deprecated as of Spring Security 4) `ifAllGranted` method only returned `true` if the authenticated principal contained *all* of the specified roles.\r\n\r\n**TL;DR**: To replicate the behavior of `ifAllGranted` using Spring Security Taglib&#39;s new authentication Expression Language, the `hasRole(&#39;ROLE_1&#39;) and hasRole(&#39;ROLE_2&#39;)` pattern needs to be used.\r\n\r\n  [1]: http://docs.spring.io/spring-security/site/migrate/current/3-to-4/html5/migrate-3-to-4-xml.html#m3to4-deprecations-taglibs","title":"How to use &lt;sec:authorize access=&quot;hasRole(&#39;ROLES)&quot;&gt; for checking multiple Roles?","body":"<p>@dimas's answer is not logically consistent with your question; <code>ifAllGranted</code> cannot be directly replaced with <code>hasAnyRole</code>.</p>\n\n<p>From the <a href=\"http://docs.spring.io/spring-security/site/migrate/current/3-to-4/html5/migrate-3-to-4-xml.html#m3to4-deprecations-taglibs\" rel=\"noreferrer\">Spring Security 3—>4 migration guide</a>:</p>\n\n<p>Old:</p>\n\n<pre><code>&lt;sec:authorize ifAllGranted=\"ROLE_ADMIN,ROLE_USER\"&gt;\n    &lt;p&gt;Must have ROLE_ADMIN and ROLE_USER&lt;/p&gt;\n&lt;/sec:authorize&gt;\n</code></pre>\n\n<p>New (SPeL):</p>\n\n<pre><code>&lt;sec:authorize access=\"hasRole('ROLE_ADMIN') and hasRole('ROLE_USER')\"&gt;\n    &lt;p&gt;Must have ROLE_ADMIN and ROLE_USER&lt;/p&gt;\n&lt;/sec:authorize&gt;\n</code></pre>\n\n<p>Replacing <code>ifAllGranted</code> directly with <code>hasAnyRole</code> will cause spring to evaluate the statement using an <code>OR</code> instead of an <code>AND</code>.  That is, <code>hasAnyRole</code> will return <code>true</code> if the authenticated principal contains <em>at least one</em> of the specified roles, whereas Spring's (now deprecated as of Spring Security 4) <code>ifAllGranted</code> method only returned <code>true</code> if the authenticated principal contained <em>all</em> of the specified roles.</p>\n\n<p><strong>TL;DR</strong>: To replicate the behavior of <code>ifAllGranted</code> using Spring Security Taglib's new authentication Expression Language, the <code>hasRole('ROLE_1') and hasRole('ROLE_2')</code> pattern needs to be used.</p>\n"},{"tags":[],"owner":{"account_id":4158688,"reputation":2520,"user_id":3409234,"display_name":"TanvirChowdhury"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1663816576,"creation_date":1568793589,"answer_id":57987796,"question_id":11469211,"body_markdown":"you can try in this way if you are using thymeleaf\r\n\r\n   \r\n\r\n    sec:authorize=&quot;hasAnyRole(&#39;ROLE_ADMIN&#39;,&#39;ROLE_USER&#39;)&quot;\r\n\r\nhasAnyRole will return true if the authenticated principal contains at least one of the specified roles,false otherwise.\r\n\r\n**Please note you have to use sec tag in your html declaration tag like this**\r\n\r\n    &lt;html xmlns:sec=&quot;http://www.thymeleaf.org/thymeleaf-extras-springsecurity4&quot;&gt;\r\n\r\n","title":"How to use &lt;sec:authorize access=&quot;hasRole(&#39;ROLES)&quot;&gt; for checking multiple Roles?","body":"<p>you can try in this way if you are using thymeleaf</p>\n<pre><code>sec:authorize=&quot;hasAnyRole('ROLE_ADMIN','ROLE_USER')&quot;\n</code></pre>\n<p>hasAnyRole will return true if the authenticated principal contains at least one of the specified roles,false otherwise.</p>\n<p><strong>Please note you have to use sec tag in your html declaration tag like this</strong></p>\n<pre><code>&lt;html xmlns:sec=&quot;http://www.thymeleaf.org/thymeleaf-extras-springsecurity4&quot;&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1297474,"reputation":135,"user_id":1248159,"accept_rate":33,"display_name":"Christian Hartmann"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606579858,"creation_date":1606579858,"answer_id":65051693,"question_id":11469211,"body_markdown":"Within Spring Boot 2.4 it is\r\n\r\n    sec:authorize=&quot;hasAnyRole(&#39;ROLE_ADMIN&#39;)\r\n\r\nEnsure that you have \r\n\r\n&gt; thymeleaf-extras-springsecurity5\r\n\r\nin your dependencies. Also make sure that you include the namespace \r\n\r\n    xmlns:sec=&quot;http://www.thymeleaf.org/extras/spring-security&quot;\r\n\r\nin your html...","title":"How to use &lt;sec:authorize access=&quot;hasRole(&#39;ROLES)&quot;&gt; for checking multiple Roles?","body":"<p>Within Spring Boot 2.4 it is</p>\n<pre><code>sec:authorize=&quot;hasAnyRole('ROLE_ADMIN')\n</code></pre>\n<p>Ensure that you have</p>\n<blockquote>\n<p>thymeleaf-extras-springsecurity5</p>\n</blockquote>\n<p>in your dependencies. Also make sure that you include the namespace</p>\n<pre><code>xmlns:sec=&quot;http://www.thymeleaf.org/extras/spring-security&quot;\n</code></pre>\n<p>in your html...</p>\n"}],"owner":{"account_id":393856,"reputation":11926,"user_id":755932,"accept_rate":67,"display_name":"K. Siva Prasad Reddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128961,"favorite_count":0,"down_vote_count":0,"up_vote_count":49,"accepted_answer_id":11469342,"answer_count":5,"score":49,"last_activity_date":1663816576,"creation_date":1342177395,"question_id":11469211,"body_markdown":"I want to display some content conditionally based on Roles using Spring Security JSP taglibs.\r\nBut in Spring Security 3.1.x &lt;sec:authorize access=&quot;hasRole(&#39;MANAGER&#39;)&quot;&gt; is checking for only one role.\r\n\r\nI can use &lt;sec:authorize ifAllGranted=&quot;ROLE_USER,ROLE_ADMIN&quot;&gt; but **ifAllGranted** is deprecated.\r\n\r\nAny help?","title":"How to use &lt;sec:authorize access=&quot;hasRole(&#39;ROLES)&quot;&gt; for checking multiple Roles?","body":"<p>I want to display some content conditionally based on Roles using Spring Security JSP taglibs.\nBut in Spring Security 3.1.x  is checking for only one role.</p>\n\n<p>I can use  but <strong>ifAllGranted</strong> is deprecated.</p>\n\n<p>Any help?</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":14207111,"reputation":332,"user_id":10263321,"display_name":"Aleson"},"score":1,"creation_date":1663815066,"post_id":73808784,"comment_id":130329388,"body_markdown":"It is syntax error, saveAllAndFlush accept Iterable object while you give simple Object, you can add your CalModelEntity to an Object that implement Iterable such as ArrayList, HashMap or etc","body":"It is syntax error, saveAllAndFlush accept Iterable object while you give simple Object, you can add your CalModelEntity to an Object that implement Iterable such as ArrayList, HashMap or etc"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1663824915,"post_id":73808784,"comment_id":130330887,"body_markdown":"You are invoking `saveAll` which requires a collection (or `Iterable`) but you provide only a single element. Either wrap that element in something like `Collections.singletonList` or use the plain `saveAndFlush` which takes a single argument.","body":"You are invoking <code>saveAll</code> which requires a collection (or <code>Iterable</code>) but you provide only a single element. Either wrap that element in something like <code>Collections.singletonList</code> or use the plain <code>saveAndFlush</code> which takes a single argument."},{"owner":{"account_id":11418021,"reputation":4780,"user_id":8370334,"display_name":"Abd Abughazaleh"},"score":0,"creation_date":1663846734,"post_id":73808784,"comment_id":130338074,"body_markdown":"@M.Deinum Thank you, I did not pay attention. \nYou are right I just change it to `saveAndFlush` rather than `saveAllAndFlush`","body":"@M.Deinum Thank you, I did not pay attention.  You are right I just change it to <code>saveAndFlush</code> rather than <code>saveAllAndFlush</code>"}],"answers":[{"tags":[],"owner":{"account_id":14207111,"reputation":332,"user_id":10263321,"display_name":"Aleson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663815836,"creation_date":1663815836,"answer_id":73808904,"question_id":73808784,"body_markdown":"Reposted it as answer\r\n\r\nsaveAllAndFlush accept Iterable object while you give simple Object, you can add your CalModelEntity to an Object that implement Iterable such as ArrayList, HashMap or etc, and then pass the Object to saveAllAndFlush method.\r\nand also saveAllAndFlush return List of Object so you need a List to receive the return value from the method.\r\n\r\nHere is some example code\r\n\r\n    List&lt;CarModelEntity&gt; paramCarModelEntityList = new ArrayList&lt;CarModelEntity&gt;();\r\n            paramCarModelEntityList.add(CarModelEntity.builder()\r\n                    .isParent(1)\r\n                    .modelName(value)\r\n                    .build());\r\n    List&lt;CarModelEntity&gt; carModelEntityList = repository.saveAllAndFlush(paramCarModelEntityList);\r\n\r\nHere are some reference links:\r\n\r\n[Iterable][1]\r\n[JpaRepository][2]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html\r\n  [2]: https://docs.spring.io/spring-data/jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html","title":"Java: method saveAllAndFlush in interface org.springframework.data.jpa.repository.JpaRepository&lt;T,ID&gt; cannot be applied to given types","body":"<p>Reposted it as answer</p>\n<p>saveAllAndFlush accept Iterable object while you give simple Object, you can add your CalModelEntity to an Object that implement Iterable such as ArrayList, HashMap or etc, and then pass the Object to saveAllAndFlush method.\nand also saveAllAndFlush return List of Object so you need a List to receive the return value from the method.</p>\n<p>Here is some example code</p>\n<pre><code>List&lt;CarModelEntity&gt; paramCarModelEntityList = new ArrayList&lt;CarModelEntity&gt;();\n        paramCarModelEntityList.add(CarModelEntity.builder()\n                .isParent(1)\n                .modelName(value)\n                .build());\nList&lt;CarModelEntity&gt; carModelEntityList = repository.saveAllAndFlush(paramCarModelEntityList);\n</code></pre>\n<p>Here are some reference links:</p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html\" rel=\"nofollow noreferrer\">Iterable</a>\n<a href=\"https://docs.spring.io/spring-data/jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html\" rel=\"nofollow noreferrer\">JpaRepository</a></p>\n"}],"owner":{"account_id":11418021,"reputation":4780,"user_id":8370334,"display_name":"Abd Abughazaleh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1040,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663815836,"creation_date":1663814368,"question_id":73808784,"body_markdown":"My **Entity**\r\n\r\n    public class CarModelEntity {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;model_id&quot;)\r\n        private Integer modelId;\r\n        @Column(name = &quot;model_name&quot;)\r\n        private String modelName;\r\n        @Column(name = &quot;is_parent&quot;)\r\n        private Integer isParent;\r\n        @Column(name = &quot;parent_id&quot;)\r\n        private Integer parentId;\r\n        @Column(name = &quot;created_by&quot;)\r\n        private Integer createdBy;\r\n        @Column(name = &quot;created_at&quot;)\r\n        private Timestamp createdAt;\r\n        @Column(name = &quot;updated_at&quot;)\r\n        private Timestamp updatedAt;\r\n    \r\n    }\r\n\r\nMy code : \r\n\r\n    CarModelEntity data = carModelRepo\r\n                            .saveAllAndFlush(CarModelEntity.builder()\r\n                                    .isParent(1)\r\n                                    .modelName(value)\r\n                                    .build());\r\n\r\nSyntax Error :\r\n\r\n    Error:(49, 25) java: method saveAllAndFlush in interface org.springframework.data.jpa.repository.JpaRepository&lt;T,ID&gt; cannot be applied to given types;\r\n      required: java.lang.Iterable&lt;S&gt;\r\n      found: com.*****.catprices.mobileapp.model.entity.CarModelEntity\r\n      reason: cannot infer type-variable(s) S\r\n        (argument mismatch; com.****.catprices.mobileapp.model.entity.CarModelEntity cannot be converted to java.lang.Iterable&lt;S&gt;)\r\n\r\n\r\nMy **Repository** : \r\n\r\n    public interface CarModelRepo extends JpaRepository&lt;CarModelEntity, Integer&gt; {\r\n    }","title":"Java: method saveAllAndFlush in interface org.springframework.data.jpa.repository.JpaRepository&lt;T,ID&gt; cannot be applied to given types","body":"<p>My <strong>Entity</strong></p>\n<pre><code>public class CarModelEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;model_id&quot;)\n    private Integer modelId;\n    @Column(name = &quot;model_name&quot;)\n    private String modelName;\n    @Column(name = &quot;is_parent&quot;)\n    private Integer isParent;\n    @Column(name = &quot;parent_id&quot;)\n    private Integer parentId;\n    @Column(name = &quot;created_by&quot;)\n    private Integer createdBy;\n    @Column(name = &quot;created_at&quot;)\n    private Timestamp createdAt;\n    @Column(name = &quot;updated_at&quot;)\n    private Timestamp updatedAt;\n\n}\n</code></pre>\n<p>My code :</p>\n<pre><code>CarModelEntity data = carModelRepo\n                        .saveAllAndFlush(CarModelEntity.builder()\n                                .isParent(1)\n                                .modelName(value)\n                                .build());\n</code></pre>\n<p>Syntax Error :</p>\n<pre><code>Error:(49, 25) java: method saveAllAndFlush in interface org.springframework.data.jpa.repository.JpaRepository&lt;T,ID&gt; cannot be applied to given types;\n  required: java.lang.Iterable&lt;S&gt;\n  found: com.*****.catprices.mobileapp.model.entity.CarModelEntity\n  reason: cannot infer type-variable(s) S\n    (argument mismatch; com.****.catprices.mobileapp.model.entity.CarModelEntity cannot be converted to java.lang.Iterable&lt;S&gt;)\n</code></pre>\n<p>My <strong>Repository</strong> :</p>\n<pre><code>public interface CarModelRepo extends JpaRepository&lt;CarModelEntity, Integer&gt; {\n}\n</code></pre>\n"},{"tags":["java","rest-assured-jsonpath"],"owner":{"account_id":26153705,"reputation":11,"user_id":19841247,"display_name":"gg_man"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1663815797,"creation_date":1663815797,"question_id":73808895,"body_markdown":"I have a json file which I am passing within api request - which is working but I need to have the date passed as dynamic as per this from current date: \r\n\r\n      final LocalDate plus180Days = LocalDate.now().plusDays(180);\r\n\r\nhere is the sample json file I am using: \r\n\r\n \r\n\r\n     {\r\n      &quot;city&quot;: {\r\n        &quot;details&quot;: {\r\n          &quot;a1&quot;: &quot;AUS&quot;,\r\n          &quot;a2&quot;: &quot;AUS&quot;,\r\n          &quot;country&quot;: &quot;AUS&quot;\r\n        }\r\n      },\r\n      &quot;detail&quot;: {\r\n            &quot;getCountryDetail&quot;: {\r\n                &quot;b1&quot;: &quot;SYD&quot;,\r\n                &quot;b2&quot;: &quot;MEL&quot;,\r\n                &quot;country&quot;: {\r\n                    &quot;2022-09-29|AUS|1234|SYD|MEL&quot;: {\r\n                        &quot;date1&quot;: &quot;2022-09-29&quot;,\r\n                        &quot;time1&quot;: &quot;15:38&quot;,\r\n                        &quot;date2&quot;: &quot;2022-09-29&quot;,\r\n                        &quot;time2&quot;: &quot;19:13&quot;\r\n                    },\r\n                    &quot;2022-09-29|AUS|1234|ADL|MEL&quot;: {\r\n                        &quot;date1&quot;: &quot;2022-09-29&quot;,\r\n                        &quot;time1&quot;: &quot;15:38&quot;,\r\n                        &quot;date2&quot;: &quot;2022-09-29&quot;,\r\n                        &quot;time2&quot;: &quot;19:13&quot;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n  \r\nAnd this is method I was using to create the request for RestAssured Request:\r\n\r\n\r\n      @Test\r\n      public void RestAssuredRequest_Method()\r\n          throws IOException\r\n      {\r\n        Response response = RestAssured.given()\r\n            .header(readConfigFile())\r\n            .contentType(&quot;application/json&quot;)\r\n            .body(jsonFile) //Where I am passing the json file itself\r\n            .when()\r\n            .post(readBaseUrl() + &quot;homepage&quot;)\r\n            .then().statusCode(200)\r\n            .assertThat()\r\n            .log().all()\r\n      }\r\n\r\nAs you can see, there is &quot;country&quot; there is date within a long string and also two dates (1 &amp; 2) within that array. So in total three dates that I am looking to update. But I don&#39;t how can I actually reach those dates and update it with plus180Days. Also as you can see, the dates appear multiple times within the json, so would it be possible to do that for updating json prior to run?","title":"Change date from JSON file for RestAssured in Java","body":"<p>I have a json file which I am passing within api request - which is working but I need to have the date passed as dynamic as per this from current date:</p>\n<pre><code>  final LocalDate plus180Days = LocalDate.now().plusDays(180);\n</code></pre>\n<p>here is the sample json file I am using:</p>\n<pre><code> {\n  &quot;city&quot;: {\n    &quot;details&quot;: {\n      &quot;a1&quot;: &quot;AUS&quot;,\n      &quot;a2&quot;: &quot;AUS&quot;,\n      &quot;country&quot;: &quot;AUS&quot;\n    }\n  },\n  &quot;detail&quot;: {\n        &quot;getCountryDetail&quot;: {\n            &quot;b1&quot;: &quot;SYD&quot;,\n            &quot;b2&quot;: &quot;MEL&quot;,\n            &quot;country&quot;: {\n                &quot;2022-09-29|AUS|1234|SYD|MEL&quot;: {\n                    &quot;date1&quot;: &quot;2022-09-29&quot;,\n                    &quot;time1&quot;: &quot;15:38&quot;,\n                    &quot;date2&quot;: &quot;2022-09-29&quot;,\n                    &quot;time2&quot;: &quot;19:13&quot;\n                },\n                &quot;2022-09-29|AUS|1234|ADL|MEL&quot;: {\n                    &quot;date1&quot;: &quot;2022-09-29&quot;,\n                    &quot;time1&quot;: &quot;15:38&quot;,\n                    &quot;date2&quot;: &quot;2022-09-29&quot;,\n                    &quot;time2&quot;: &quot;19:13&quot;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>And this is method I was using to create the request for RestAssured Request:</p>\n<pre><code>  @Test\n  public void RestAssuredRequest_Method()\n      throws IOException\n  {\n    Response response = RestAssured.given()\n        .header(readConfigFile())\n        .contentType(&quot;application/json&quot;)\n        .body(jsonFile) //Where I am passing the json file itself\n        .when()\n        .post(readBaseUrl() + &quot;homepage&quot;)\n        .then().statusCode(200)\n        .assertThat()\n        .log().all()\n  }\n</code></pre>\n<p>As you can see, there is &quot;country&quot; there is date within a long string and also two dates (1 &amp; 2) within that array. So in total three dates that I am looking to update. But I don't how can I actually reach those dates and update it with plus180Days. Also as you can see, the dates appear multiple times within the json, so would it be possible to do that for updating json prior to run?</p>\n"},{"tags":["java","eclipse","gradle","google-api-java-client"],"answers":[{"tags":[],"owner":{"account_id":6579936,"reputation":11,"user_id":6584778,"display_name":"Wayne Foster"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627052562,"creation_date":1627052562,"answer_id":68501260,"question_id":67297564,"body_markdown":"If anybody else comes across this - the way I fixed this up (after following  Google Sheets quickstart https://developers.google.com/sheets/api/quickstart/java - and losing half a day) - was to not use the latest version of Gradle.\r\n\r\nUsing version 6.3 works (using NetBeans and the Tools &gt; options &gt; Java &gt; Gradle &gt; Use standard gradle version.","title":"Google api import cannot be resolved in Java [eclipse with gradle Plugin]","body":"<p>If anybody else comes across this - the way I fixed this up (after following  Google Sheets quickstart <a href=\"https://developers.google.com/sheets/api/quickstart/java\" rel=\"nofollow noreferrer\">https://developers.google.com/sheets/api/quickstart/java</a> - and losing half a day) - was to not use the latest version of Gradle.</p>\n<p>Using version 6.3 works (using NetBeans and the Tools &gt; options &gt; Java &gt; Gradle &gt; Use standard gradle version.</p>\n"},{"tags":[],"owner":{"account_id":26408121,"reputation":11,"user_id":20057549,"display_name":"claudia vitti"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663814987,"creation_date":1663814987,"answer_id":73808828,"question_id":67297564,"body_markdown":"All you need to do is go to \r\n\r\nhttps://developers.google.com/sheets/api/quickstart/java \r\n\r\nand update the existing build.gradle in your project with the one they supply, and then in your main java file copy what they put in SheetsQuickstart.java \r\nIt will either work or at least give you easier compiler errors. \r\n","title":"Google api import cannot be resolved in Java [eclipse with gradle Plugin]","body":"<p>All you need to do is go to</p>\n<p><a href=\"https://developers.google.com/sheets/api/quickstart/java\" rel=\"nofollow noreferrer\">https://developers.google.com/sheets/api/quickstart/java</a></p>\n<p>and update the existing build.gradle in your project with the one they supply, and then in your main java file copy what they put in SheetsQuickstart.java\nIt will either work or at least give you easier compiler errors.</p>\n"}],"owner":{"account_id":21425925,"reputation":1,"user_id":15783250,"display_name":"nbr85"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":466,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1663814987,"creation_date":1619602376,"question_id":67297564,"body_markdown":"6 months ago i programmed a small tool that reads out a Google Sheet and creates an entrylist (for a Videogame) based on this Data. During this time, i installed a new clean version of windows and now i want  import this workspace to do some tweaks. The Problem is, im not able to get this programm working again. \r\n\r\nIn the Build.gradle there this error: \r\n\r\n    &quot;Could not run phased build action using connection to Gradle installation &#39;C:\\Users\\nikbr\\Documents\\Liga\\gradle-7.0&#39;.\r\n    Build file &#39;C:\\Users\\nikbr\\Documents\\ACC-Tools\\ACC-Database\\build.gradle&#39; line: 14\r\n    A problem occurred evaluating root project &#39;ACC-Database&#39;.\r\n    Could not find method compile() for arguments [com.google.api-client:google-api-client:1.30.4] on object of type org.gradle.api.internal.artifacts.dsl.dependencies.DefaultDependencyHandler.&quot;\r\n\r\nIts somehow related to the google api but i cant find any tutorial/help for this one. I think this is also the reason why im getting this error &quot;The import com.google cannot be resolved&quot;.\r\n\r\nMy java-school skills are coming to an end at this point. \r\n","title":"Google api import cannot be resolved in Java [eclipse with gradle Plugin]","body":"<p>6 months ago i programmed a small tool that reads out a Google Sheet and creates an entrylist (for a Videogame) based on this Data. During this time, i installed a new clean version of windows and now i want  import this workspace to do some tweaks. The Problem is, im not able to get this programm working again.</p>\n<p>In the Build.gradle there this error:</p>\n<pre><code>&quot;Could not run phased build action using connection to Gradle installation 'C:\\Users\\nikbr\\Documents\\Liga\\gradle-7.0'.\nBuild file 'C:\\Users\\nikbr\\Documents\\ACC-Tools\\ACC-Database\\build.gradle' line: 14\nA problem occurred evaluating root project 'ACC-Database'.\nCould not find method compile() for arguments [com.google.api-client:google-api-client:1.30.4] on object of type org.gradle.api.internal.artifacts.dsl.dependencies.DefaultDependencyHandler.&quot;\n</code></pre>\n<p>Its somehow related to the google api but i cant find any tutorial/help for this one. I think this is also the reason why im getting this error &quot;The import com.google cannot be resolved&quot;.</p>\n<p>My java-school skills are coming to an end at this point.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":14207111,"reputation":332,"user_id":10263321,"display_name":"Aleson"},"score":0,"creation_date":1663823457,"post_id":73808750,"comment_id":130330644,"body_markdown":"Is there any reason why you want to get the whole request body? if you really need it then you can try to defer the validation process so that you can process it first then run the validation manually","body":"Is there any reason why you want to get the whole request body? if you really need it then you can try to defer the validation process so that you can process it first then run the validation manually"},{"owner":{"account_id":23456861,"reputation":301,"user_id":17512207,"display_name":"ildvzg68472"},"score":0,"creation_date":1663824908,"post_id":73808750,"comment_id":130330886,"body_markdown":"@Aleson Because yesterday, frontend passed a correct request body, but because I set a wrong value in `@JsonProperty`, so the `@NotNull` field reported not-null exception. If I can  see the request body, then I will know it is my fault at once. But now I have to ask for the request body from frontend team.  Could you please share the best practice about &quot;process it first then run the validation manually&quot;? Thanks a lot.","body":"@Aleson Because yesterday, frontend passed a correct request body, but because I set a wrong value in <code>@JsonProperty</code>, so the <code>@NotNull</code> field reported not-null exception. If I can  see the request body, then I will know it is my fault at once. But now I have to ask for the request body from frontend team.  Could you please share the best practice about &quot;process it first then run the validation manually&quot;? Thanks a lot."},{"owner":{"account_id":480617,"reputation":2495,"user_id":893952,"accept_rate":57,"display_name":"Harry Coder"},"score":1,"creation_date":1663830174,"post_id":73808750,"comment_id":130332210,"body_markdown":"As the provider of an API you don&#39;t have to send much detailed messages or detailed exceptions. You should instead log your errors with more details and just send a simple message in the API.","body":"As the provider of an API you don&#39;t have to send much detailed messages or detailed exceptions. You should instead log your errors with more details and just send a simple message in the API."},{"owner":{"account_id":14207111,"reputation":332,"user_id":10263321,"display_name":"Aleson"},"score":0,"creation_date":1663832491,"post_id":73808750,"comment_id":130332943,"body_markdown":"I see so you need the whole request body for debugging processes, here is some reference links which I mention before about &quot;process it first then run the validation manually&quot; https://stackoverflow.com/questions/19190592/manually-call-spring-annotation-validation https://reflectoring.io/bean-validation-with-spring-boot/","body":"I see so you need the whole request body for debugging processes, here is some reference links which I mention before about &quot;process it first then run the validation manually&quot; <a href=\"https://stackoverflow.com/questions/19190592/manually-call-spring-annotation-validation\" title=\"manually call spring annotation validation\">stackoverflow.com/questions/19190592/&hellip;</a> <a href=\"https://reflectoring.io/bean-validation-with-spring-boot/\" rel=\"nofollow noreferrer\">reflectoring.io/bean-validation-with-spring-boot</a>"}],"owner":{"account_id":23456861,"reputation":301,"user_id":17512207,"display_name":"ildvzg68472"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663813948,"creation_date":1663813948,"question_id":73808750,"body_markdown":"By using\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nand\r\n\r\n`org.springframework.validation.annotation.Validated` on @RequestBody and involved POJO fields, spring (MVC) will help validate incoming request body automatically, and throw exception when the request body is invalid.\r\n\r\nAnd by using `@ExceptionHandler(value = MethodArgumentNotValidException.class)`, I will capture the exception and then return a more readable response body to frontend.\r\n\r\nBut by this way, I cannot get the whole request body. Is it possible to get the whole request body? Could you please help advise?\r\n\r\nThanks a lot.","title":"How to get request body although it didn&#39;t pass spring validation?","body":"<p>By using</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>and</p>\n<p><code>org.springframework.validation.annotation.Validated</code> on @RequestBody and involved POJO fields, spring (MVC) will help validate incoming request body automatically, and throw exception when the request body is invalid.</p>\n<p>And by using <code>@ExceptionHandler(value = MethodArgumentNotValidException.class)</code>, I will capture the exception and then return a more readable response body to frontend.</p>\n<p>But by this way, I cannot get the whole request body. Is it possible to get the whole request body? Could you please help advise?</p>\n<p>Thanks a lot.</p>\n"},{"tags":["java","android","webview"],"comments":[{"owner":{"account_id":10358025,"reputation":2474,"user_id":7639296,"accept_rate":75,"display_name":"Dr Mido"},"score":0,"creation_date":1663814976,"post_id":73808745,"comment_id":130329377,"body_markdown":"Where&#39;s your xml code?","body":"Where&#39;s your xml code?"},{"owner":{"account_id":2898137,"reputation":1813,"user_id":2485458,"accept_rate":48,"display_name":"Panadol Chong"},"score":0,"creation_date":1663815820,"post_id":73808745,"comment_id":130329511,"body_markdown":"Hi @DrMido, May I know which xml code?\nis it the AndroidManifest.xml ?","body":"Hi @DrMido, May I know which xml code? is it the AndroidManifest.xml ?"},{"owner":{"account_id":10358025,"reputation":2474,"user_id":7639296,"accept_rate":75,"display_name":"Dr Mido"},"score":0,"creation_date":1663816061,"post_id":73808745,"comment_id":130329550,"body_markdown":"the xml file that contains `webview` that you&#39;re trying to bind it with `this.findViewById(R.id.webview);`","body":"the xml file that contains <code>webview</code> that you&#39;re trying to bind it with <code>this.findViewById(R.id.webview);</code>"},{"owner":{"account_id":2898137,"reputation":1813,"user_id":2485458,"accept_rate":48,"display_name":"Panadol Chong"},"score":0,"creation_date":1663816354,"post_id":73808745,"comment_id":130329596,"body_markdown":"hi @DrMido , I actually search for whole workspace, no have any wording of &quot;webview&quot; being found. I thought the `this.findViewById(R.id.webview);` is some kind of the android library code that can use in MainActivity.java.","body":"hi @DrMido , I actually search for whole workspace, no have any wording of &quot;webview&quot; being found. I thought the <code>this.findViewById(R.id.webview);</code> is some kind of the android library code that can use in MainActivity.java."},{"owner":{"account_id":10358025,"reputation":2474,"user_id":7639296,"accept_rate":75,"display_name":"Dr Mido"},"score":0,"creation_date":1663816553,"post_id":73808745,"comment_id":130329634,"body_markdown":"If you don&#39;t see any file containing the `webview` then you cannot use it in the java class, I think there&#39;s something missing in your project try to figure out","body":"If you don&#39;t see any file containing the <code>webview</code> then you cannot use it in the java class, I think there&#39;s something missing in your project try to figure out"},{"owner":{"account_id":2898137,"reputation":1813,"user_id":2485458,"accept_rate":48,"display_name":"Panadol Chong"},"score":1,"creation_date":1663816676,"post_id":73808745,"comment_id":130329662,"body_markdown":"Thanks @DrMido. let me check it out. By the way, may I know is `webview` mandatory for cordova mobile project? I would like to find out is it I miss out the `webview` configuration in some where, or my project is actually some kind of &quot;non-webview&quot; project.","body":"Thanks @DrMido. let me check it out. By the way, may I know is <code>webview</code> mandatory for cordova mobile project? I would like to find out is it I miss out the <code>webview</code> configuration in some where, or my project is actually some kind of &quot;non-webview&quot; project."}],"owner":{"account_id":2898137,"reputation":1813,"user_id":2485458,"accept_rate":48,"display_name":"Panadol Chong"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663813887,"creation_date":1663813887,"question_id":73808745,"body_markdown":"Good day,\r\n\r\nI am doing a `cordova` mobile app, and I am trying to access to `webview` to configure something. I google around, the way to get the `webview` object is something as follow:\r\n\r\n    WebView webView = (WebView) this.findViewById(R.id.webview);\r\n\r\nI put this code in my MainActivity.java, but I hit error when I trying to build my code:\r\n[![enter image description here][1]][1]\r\n\r\nI google around and found that many post was asking to check in the `layout file` and the `activity_main file`, but I do not have any of these file in my workspace. I am new to frontend development so maybe I may have some miss understand on some solution from internet.\r\n\r\nCan anyone advise me on this?\r\n\r\n  [1]: https://i.stack.imgur.com/hdel5.png","title":"R.id.webview error: cannot find symbol in MainActivity.java","body":"<p>Good day,</p>\n<p>I am doing a <code>cordova</code> mobile app, and I am trying to access to <code>webview</code> to configure something. I google around, the way to get the <code>webview</code> object is something as follow:</p>\n<pre><code>WebView webView = (WebView) this.findViewById(R.id.webview);\n</code></pre>\n<p>I put this code in my MainActivity.java, but I hit error when I trying to build my code:\n<a href=\"https://i.stack.imgur.com/hdel5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hdel5.png\" alt=\"enter image description here\" /></a></p>\n<p>I google around and found that many post was asking to check in the <code>layout file</code> and the <code>activity_main file</code>, but I do not have any of these file in my workspace. I am new to frontend development so maybe I may have some miss understand on some solution from internet.</p>\n<p>Can anyone advise me on this?</p>\n"},{"tags":["java","spring","multithreading","spring-boot","scheduledexecutorservice"],"answers":[{"tags":[],"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1663813857,"creation_date":1663813857,"answer_id":73808742,"question_id":73589396,"body_markdown":"Found the answers myself after looking at the Spring task scheduling source code. Sharing here for others.\r\n\r\nFor this one,\r\n&gt; Now when this happens what is the nature &amp; behavior of this default scheduler particularly w.r.t whether or not its thread would potentially get terminated due to a failure during execution that is not caught/handled?\r\n\r\nAnswer is as expected, it won&#39;t. User submitted tasks are decorated as a `org.springframework.scheduling.support.DelegatingErrorHandlingRunnable` that wraps the user Runnable, catches any exception or error thrown from it and allows an `org.springframework.util.ErrorHandler` to handle it. Here is the [source][1].\r\n\r\nFor this one,\r\n\r\n&gt; Is this default scheduler an instance of ThreadPoolTaskScheduler? If so then what is its default ErrorHandler strategy ? Is it that the throwable is simply logged?\r\n\r\n&gt; Or is this default scheduler a simpler one, simply an instance of\r\n&gt; ScheduledExecutorService that is constructed from invoking\r\n&gt; Executors.html#newSingleThreadScheduledExecutor()...\r\n\r\nAnswer is its an instance of `org.springframework.scheduling.concurrentConcurrentTaskScheduler` that does wrap a ScheduledExecutorService constructed from invoking [Executors.html#newSingleThreadScheduledExecutor()][2]. \r\n\r\nThe [ErrorHandler][3] strategy is to log the user Throwables at error level. In addition, repeated tasks will also have the user Throwable suppressed &amp; not propagated (so that subsequent executions of the task will not be prevented) while for one shot tasks it will be propagated (re-thrown) as expected. Here is the [source][4].\r\n\r\nBoth of the above is what i was expecting, but wanted to make sure since the nature &amp; behavior of this default is not clearly documented. Perhaps a little more documentation might help.\r\n\r\nThanks\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-framework/blob/84fd94271251c14fc74a1b7fa595f793d79cf9ca/spring-context/src/main/java/org/springframework/scheduling/support/DelegatingErrorHandlingRunnable.java#L32\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Executors.html#newSingleThreadScheduledExecutor()\r\n  [3]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/ErrorHandler.html\r\n  [4]: https://github.com/spring-projects/spring-framework/blob/84fd94271251c14fc74a1b7fa595f793d79cf9ca/spring-context/src/main/java/org/springframework/scheduling/config/ScheduledTaskRegistrar.java#L378","title":"Behavior of the single-threaded default scheduler used with Spring @Scheduled/@EnableScheduling registrar when a TaskScheduler is not setup/available","body":"<p>Found the answers myself after looking at the Spring task scheduling source code. Sharing here for others.</p>\n<p>For this one,</p>\n<blockquote>\n<p>Now when this happens what is the nature &amp; behavior of this default scheduler particularly w.r.t whether or not its thread would potentially get terminated due to a failure during execution that is not caught/handled?</p>\n</blockquote>\n<p>Answer is as expected, it won't. User submitted tasks are decorated as a <code>org.springframework.scheduling.support.DelegatingErrorHandlingRunnable</code> that wraps the user Runnable, catches any exception or error thrown from it and allows an <code>org.springframework.util.ErrorHandler</code> to handle it. Here is the <a href=\"https://github.com/spring-projects/spring-framework/blob/84fd94271251c14fc74a1b7fa595f793d79cf9ca/spring-context/src/main/java/org/springframework/scheduling/support/DelegatingErrorHandlingRunnable.java#L32\" rel=\"nofollow noreferrer\">source</a>.</p>\n<p>For this one,</p>\n<blockquote>\n<p>Is this default scheduler an instance of ThreadPoolTaskScheduler? If so then what is its default ErrorHandler strategy ? Is it that the throwable is simply logged?</p>\n</blockquote>\n<blockquote>\n<p>Or is this default scheduler a simpler one, simply an instance of\nScheduledExecutorService that is constructed from invoking\nExecutors.html#newSingleThreadScheduledExecutor()...</p>\n</blockquote>\n<p>Answer is its an instance of <code>org.springframework.scheduling.concurrentConcurrentTaskScheduler</code> that does wrap a ScheduledExecutorService constructed from invoking <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Executors.html#newSingleThreadScheduledExecutor()\" rel=\"nofollow noreferrer\">Executors.html#newSingleThreadScheduledExecutor()</a>.</p>\n<p>The <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/ErrorHandler.html\" rel=\"nofollow noreferrer\">ErrorHandler</a> strategy is to log the user Throwables at error level. In addition, repeated tasks will also have the user Throwable suppressed &amp; not propagated (so that subsequent executions of the task will not be prevented) while for one shot tasks it will be propagated (re-thrown) as expected. Here is the <a href=\"https://github.com/spring-projects/spring-framework/blob/84fd94271251c14fc74a1b7fa595f793d79cf9ca/spring-context/src/main/java/org/springframework/scheduling/config/ScheduledTaskRegistrar.java#L378\" rel=\"nofollow noreferrer\">source</a>.</p>\n<p>Both of the above is what i was expecting, but wanted to make sure since the nature &amp; behavior of this default is not clearly documented. Perhaps a little more documentation might help.</p>\n<p>Thanks</p>\n"}],"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73808742,"answer_count":1,"score":0,"last_activity_date":1663813857,"creation_date":1662175269,"question_id":73589396,"body_markdown":"As noted in the Spring docs for [EnableScheduling][1], when a TaskScheduler pool is not setup/available/resolvable, &quot;*a local single-threaded default scheduler will be created and used within the registrar*&quot; \r\n\r\nNow when this happens what is the nature &amp; behavior of this default scheduler particularly w.r.t whether or not its thread would potentially get terminated due to a failure during execution that is not caught/handled? \r\n\r\nIs this default scheduler an instance of [ThreadPoolTaskScheduler][2]? If so then what is its default [ErrorHandler][3] strategy ? Is it that the throwable is simply logged?\r\n\r\nOr is this default scheduler a simpler one, simply an instance of [ScheduledExecutorService][4] that is constructed from invoking [Executors.html#newSingleThreadScheduledExecutor()][5] where in as stated there, &quot;*if this single thread terminates due to a failure during execution prior to shutdown, a new one will take its place if needed to execute subsequent tasks*&quot;.\r\n\r\nThanks\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/EnableScheduling.html\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/concurrent/ThreadPoolTaskScheduler.html\r\n  [3]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/ErrorHandler.html\r\n  [4]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ScheduledExecutorService.html\r\n  [5]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Executors.html#newSingleThreadScheduledExecutor()\r\n","title":"Behavior of the single-threaded default scheduler used with Spring @Scheduled/@EnableScheduling registrar when a TaskScheduler is not setup/available","body":"<p>As noted in the Spring docs for <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/EnableScheduling.html\" rel=\"nofollow noreferrer\">EnableScheduling</a>, when a TaskScheduler pool is not setup/available/resolvable, &quot;<em>a local single-threaded default scheduler will be created and used within the registrar</em>&quot;</p>\n<p>Now when this happens what is the nature &amp; behavior of this default scheduler particularly w.r.t whether or not its thread would potentially get terminated due to a failure during execution that is not caught/handled?</p>\n<p>Is this default scheduler an instance of <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/concurrent/ThreadPoolTaskScheduler.html\" rel=\"nofollow noreferrer\">ThreadPoolTaskScheduler</a>? If so then what is its default <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/ErrorHandler.html\" rel=\"nofollow noreferrer\">ErrorHandler</a> strategy ? Is it that the throwable is simply logged?</p>\n<p>Or is this default scheduler a simpler one, simply an instance of <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ScheduledExecutorService.html\" rel=\"nofollow noreferrer\">ScheduledExecutorService</a> that is constructed from invoking <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Executors.html#newSingleThreadScheduledExecutor()\" rel=\"nofollow noreferrer\">Executors.html#newSingleThreadScheduledExecutor()</a> where in as stated there, &quot;<em>if this single thread terminates due to a failure during execution prior to shutdown, a new one will take its place if needed to execute subsequent tasks</em>&quot;.</p>\n<p>Thanks</p>\n"},{"tags":["java","spring-boot","thymeleaf"],"comments":[{"owner":{"account_id":5152799,"reputation":19367,"user_id":4126893,"display_name":"Metroids"},"score":0,"creation_date":1663819081,"post_id":73808592,"comment_id":130329993,"body_markdown":"See this answer: https://stackoverflow.com/questions/73739292/how-to-use-thymeleaf-to-generate-static-files/73749027#73749027 -- you can use `context.setVariable(&quot;variableName&quot;, variable);` to set variables and run Thymeleaf without a server/controllers.","body":"See this answer: <a href=\"https://stackoverflow.com/questions/73739292/how-to-use-thymeleaf-to-generate-static-files/73749027#73749027\" title=\"how to use thymeleaf to generate static files\">stackoverflow.com/questions/73739292/&hellip;</a> -- you can use <code>context.setVariable(&quot;variableName&quot;, variable);</code> to set variables and run Thymeleaf without a server/controllers."}],"answers":[{"tags":[],"owner":{"account_id":14207111,"reputation":332,"user_id":10263321,"display_name":"Aleson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663813849,"creation_date":1663813849,"answer_id":73808741,"question_id":73808592,"body_markdown":"You can use [SpringTemplateEngine][1] class to process your templates, set appropriate Context and send it to your AWS S3.\r\n\r\nHere some code example:\r\n\r\n    @Autowired \r\n    private final SpringTemplateEngine templateEngine;\r\n    \r\n    public String prepareTemplates(String username, String email) {\r\n             Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();\r\n             params.put(&quot;username&quot;, username);\r\n             params.put(&quot;email&quot;, email);\r\n             Context context = new Context();\r\n             context.setVariables(params);\r\n             return templateEngine.process(&quot;template.html&quot;, context);\r\n         }\r\n\r\nHere reference [link][2] for further details.\r\n\r\n  [1]: https://www.thymeleaf.org/apidocs/thymeleaf-spring5/3.0.9.RELEASE/org/thymeleaf/spring5/SpringTemplateEngine.html\r\n  [2]: https://www.baeldung.com/thymeleaf-in-spring-mvc","title":"Using Spring Boot and Thymeleaf outside of HTTP/web/controllers","body":"<p>You can use <a href=\"https://www.thymeleaf.org/apidocs/thymeleaf-spring5/3.0.9.RELEASE/org/thymeleaf/spring5/SpringTemplateEngine.html\" rel=\"nofollow noreferrer\">SpringTemplateEngine</a> class to process your templates, set appropriate Context and send it to your AWS S3.</p>\n<p>Here some code example:</p>\n<pre><code>@Autowired \nprivate final SpringTemplateEngine templateEngine;\n\npublic String prepareTemplates(String username, String email) {\n         Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();\n         params.put(&quot;username&quot;, username);\n         params.put(&quot;email&quot;, email);\n         Context context = new Context();\n         context.setVariables(params);\n         return templateEngine.process(&quot;template.html&quot;, context);\n     }\n</code></pre>\n<p>Here reference <a href=\"https://www.baeldung.com/thymeleaf-in-spring-mvc\" rel=\"nofollow noreferrer\">link</a> for further details.</p>\n"}],"owner":{"account_id":6802882,"reputation":195,"user_id":5235665,"display_name":"hotmeatballsoup"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":469,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73808741,"answer_count":1,"score":0,"last_activity_date":1663813849,"creation_date":1663812412,"question_id":73808592,"body_markdown":"I have a Spring Boot utility application that is _not_ a web service. It exposes no RESTful/GQL (HTTP) endpoints. It consumes off a queue and does work. But I like to still make it a Spring Boot app anyways because there are so many non-web related features (dependency injection, JPA, caching, etc.).\r\n\r\nOne new thing that this utility app now needs to do is read Thymeleaf-formatted HTML templates from the file system, inject it and bind variables to it, and upload the fully templated version to S3. Hence if it reads the following `vendor-abc.html` from the file system:\r\n```\r\n&lt;html xmlns:th=&quot;https://thymeleaf.org&quot;&gt;    \r\n    &lt;table&gt;    \r\n        &lt;tr&gt;    \r\n            &lt;td&gt;&lt;h4&gt;User Name: &lt;/h4&gt;&lt;/td&gt;    \r\n            &lt;td&gt;&lt;h4 th:text=&quot;${user.name}&quot;&gt;&lt;/h4&gt;&lt;/td&gt;    \r\n        &lt;/tr&gt;    \r\n        &lt;tr&gt;    \r\n            &lt;td&gt;&lt;h4&gt;Email ID: &lt;/h4&gt;&lt;/td&gt;    \r\n            &lt;td&gt;&lt;h4 th:text=&quot;${user.email}&quot;&gt;&lt;/h4&gt;&lt;/td&gt;    \r\n        &lt;/tr&gt;    \r\n    &lt;/table&gt;    \r\n&lt;/html&gt;  \r\n```\r\n\r\nAnd its bindings are as follows:\r\n```\r\n@Data // lombok to generate ctors/getters/setters/etc.\r\npublic class User {\r\n    private String name;\r\n    private String email;\r\n}\r\n\r\nUser user = new User(&quot;Jerry Jingleheimer&quot;, &quot;jj@example.com&quot;);\r\n```\r\n\r\nThen the following `vendor-abc-output.html` file will be uploaded to AWS S3:\r\n```\r\n&lt;html xmlns:th=&quot;https://thymeleaf.org&quot;&gt;    \r\n    &lt;table&gt;    \r\n        &lt;tr&gt;    \r\n            &lt;td&gt;&lt;h4&gt;User Name: &lt;/h4&gt;&lt;/td&gt;    \r\n            &lt;td&gt;&lt;h4&gt;Jerry Jingleheimer&lt;/h4&gt;&lt;/td&gt;    \r\n        &lt;/tr&gt;    \r\n        &lt;tr&gt;    \r\n            &lt;td&gt;&lt;h4&gt;Email ID: &lt;/h4&gt;&lt;/td&gt;    \r\n            &lt;td&gt;&lt;h4&gt;jj@example.com&lt;/h4&gt;&lt;/td&gt;    \r\n        &lt;/tr&gt;    \r\n    &lt;/table&gt;    \r\n&lt;/html&gt;  \r\n```\r\n\r\nAll Thymeleaf examples that I can find involve `@Controller`-annotated classes whose methods get injected with `@Model` like so:\r\n```\r\n@GetMapping(&quot;/hello&quot;)\r\npublic String mainWithParam(\r\n        @RequestParam(name = &quot;name&quot;, required = false, defaultValue = &quot;&quot;) \r\n\t\tString name, Model model) {\r\n\r\n    model.addAttribute(&quot;message&quot;, name);\r\n\r\n    return &quot;welcome&quot;; //view\r\n\r\n}\r\n```\r\n\r\nBut here, I will have a single `@Service`-annotated class that has to do all this work (no `@Model`):\r\n```\r\n@Service\r\npublic class S3FileTemplater {\r\n    \r\n    public void templatizeAndUpload(File htmlTemplate, User user) {\r\n\r\n        // fetch all the Thymelead-templated code out of the file\r\n        String htmlContent = Files.readString(Paths.get(htmlTemplate));\r\n\r\n        // how to inject &#39;user&#39; into &#39;htmlContent&#39; via Thymeleaf?\r\n        String finalContentWithUser = ???\r\n\r\n        // upload to S3\r\n        s3Client.upload(finalContentWithUser);\r\n\r\n    }\r\n}\r\n```\r\n\r\n**What do I have to do so that the file gets templated by Thymeleaf properly?**","title":"Using Spring Boot and Thymeleaf outside of HTTP/web/controllers","body":"<p>I have a Spring Boot utility application that is <em>not</em> a web service. It exposes no RESTful/GQL (HTTP) endpoints. It consumes off a queue and does work. But I like to still make it a Spring Boot app anyways because there are so many non-web related features (dependency injection, JPA, caching, etc.).</p>\n<p>One new thing that this utility app now needs to do is read Thymeleaf-formatted HTML templates from the file system, inject it and bind variables to it, and upload the fully templated version to S3. Hence if it reads the following <code>vendor-abc.html</code> from the file system:</p>\n<pre><code>&lt;html xmlns:th=&quot;https://thymeleaf.org&quot;&gt;    \n    &lt;table&gt;    \n        &lt;tr&gt;    \n            &lt;td&gt;&lt;h4&gt;User Name: &lt;/h4&gt;&lt;/td&gt;    \n            &lt;td&gt;&lt;h4 th:text=&quot;${user.name}&quot;&gt;&lt;/h4&gt;&lt;/td&gt;    \n        &lt;/tr&gt;    \n        &lt;tr&gt;    \n            &lt;td&gt;&lt;h4&gt;Email ID: &lt;/h4&gt;&lt;/td&gt;    \n            &lt;td&gt;&lt;h4 th:text=&quot;${user.email}&quot;&gt;&lt;/h4&gt;&lt;/td&gt;    \n        &lt;/tr&gt;    \n    &lt;/table&gt;    \n&lt;/html&gt;  \n</code></pre>\n<p>And its bindings are as follows:</p>\n<pre><code>@Data // lombok to generate ctors/getters/setters/etc.\npublic class User {\n    private String name;\n    private String email;\n}\n\nUser user = new User(&quot;Jerry Jingleheimer&quot;, &quot;jj@example.com&quot;);\n</code></pre>\n<p>Then the following <code>vendor-abc-output.html</code> file will be uploaded to AWS S3:</p>\n<pre><code>&lt;html xmlns:th=&quot;https://thymeleaf.org&quot;&gt;    \n    &lt;table&gt;    \n        &lt;tr&gt;    \n            &lt;td&gt;&lt;h4&gt;User Name: &lt;/h4&gt;&lt;/td&gt;    \n            &lt;td&gt;&lt;h4&gt;Jerry Jingleheimer&lt;/h4&gt;&lt;/td&gt;    \n        &lt;/tr&gt;    \n        &lt;tr&gt;    \n            &lt;td&gt;&lt;h4&gt;Email ID: &lt;/h4&gt;&lt;/td&gt;    \n            &lt;td&gt;&lt;h4&gt;jj@example.com&lt;/h4&gt;&lt;/td&gt;    \n        &lt;/tr&gt;    \n    &lt;/table&gt;    \n&lt;/html&gt;  \n</code></pre>\n<p>All Thymeleaf examples that I can find involve <code>@Controller</code>-annotated classes whose methods get injected with <code>@Model</code> like so:</p>\n<pre><code>@GetMapping(&quot;/hello&quot;)\npublic String mainWithParam(\n        @RequestParam(name = &quot;name&quot;, required = false, defaultValue = &quot;&quot;) \n        String name, Model model) {\n\n    model.addAttribute(&quot;message&quot;, name);\n\n    return &quot;welcome&quot;; //view\n\n}\n</code></pre>\n<p>But here, I will have a single <code>@Service</code>-annotated class that has to do all this work (no <code>@Model</code>):</p>\n<pre><code>@Service\npublic class S3FileTemplater {\n    \n    public void templatizeAndUpload(File htmlTemplate, User user) {\n\n        // fetch all the Thymelead-templated code out of the file\n        String htmlContent = Files.readString(Paths.get(htmlTemplate));\n\n        // how to inject 'user' into 'htmlContent' via Thymeleaf?\n        String finalContentWithUser = ???\n\n        // upload to S3\n        s3Client.upload(finalContentWithUser);\n\n    }\n}\n</code></pre>\n<p><strong>What do I have to do so that the file gets templated by Thymeleaf properly?</strong></p>\n"},{"tags":["java","spring","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":1261634,"reputation":24551,"user_id":1219755,"accept_rate":84,"display_name":"alexanoid"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1503518943,"creation_date":1503518943,"answer_id":45848478,"question_id":32472466,"body_markdown":"I got it working by adding following line \r\n\r\n    jobRegistry.register(new ReferenceJobFactory(job));\r\n\r\ninto the `restartUncompletedJobs` method\r\n\r\n\r\n    public void restartUncompletedJobs() {\r\n        try {\r\n            jobRegistry.register(new ReferenceJobFactory(job));\r\n    \r\n            List&lt;String&gt; jobs = jobExplorer.getJobNames();\r\n            for (String job : jobs) {\r\n                Set&lt;JobExecution&gt; runningJobs = jobExplorer.findRunningJobExecutions(job);\r\n    \r\n                for (JobExecution runningJob : runningJobs) {\r\n                    runningJob.setStatus(BatchStatus.FAILED);\r\n                    runningJob.setEndTime(new Date());\r\n                    jobRepository.update(runningJob);\r\n                    jobOperator.restart(runningJob.getId());\r\n                    logger.info(&quot;Restarted: &quot; + runningJob);\r\n                }\r\n            }\r\n        } catch (Exception e) {\r\n            logger.error(e.getMessage(), e);\r\n        }\r\n    }","title":"Spring Batch restart persistent jobs after abnormal termination","body":"<p>I got it working by adding following line </p>\n\n<pre><code>jobRegistry.register(new ReferenceJobFactory(job));\n</code></pre>\n\n<p>into the <code>restartUncompletedJobs</code> method</p>\n\n<pre><code>public void restartUncompletedJobs() {\n    try {\n        jobRegistry.register(new ReferenceJobFactory(job));\n\n        List&lt;String&gt; jobs = jobExplorer.getJobNames();\n        for (String job : jobs) {\n            Set&lt;JobExecution&gt; runningJobs = jobExplorer.findRunningJobExecutions(job);\n\n            for (JobExecution runningJob : runningJobs) {\n                runningJob.setStatus(BatchStatus.FAILED);\n                runningJob.setEndTime(new Date());\n                jobRepository.update(runningJob);\n                jobOperator.restart(runningJob.getId());\n                logger.info(\"Restarted: \" + runningJob);\n            }\n        }\n    } catch (Exception e) {\n        logger.error(e.getMessage(), e);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1261634,"reputation":24551,"user_id":1219755,"accept_rate":84,"display_name":"alexanoid"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3032,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":45848478,"answer_count":1,"score":3,"last_activity_date":1663813668,"creation_date":1441780559,"question_id":32472466,"body_markdown":"I have a following Spring Batch Job config:\r\n\r\n    @Configuration\r\n    @EnableBatchProcessing\r\n    public class JobConfig {\r\n    \r\n    \t@Autowired\r\n    \tprivate JobBuilderFactory jobBuilderFactory;\r\n    \r\n    \t@Autowired\r\n    \tprivate StepBuilderFactory stepBuilderFactory;\r\n    \r\n    \t@Bean\r\n    \tpublic Job job() {\r\n    \t\treturn jobBuilderFactory.get(&quot;job&quot;)\r\n    \t\t\t\t.flow(stepA()).on(&quot;FAILED&quot;).to(stepC())\r\n    \t\t\t\t.from(stepA()).on(&quot;*&quot;).to(stepB()).next(stepC())\r\n    \t\t\t\t.end().build();\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic Step stepA() {\r\n    \t\treturn stepBuilderFactory.get(&quot;stepA&quot;).tasklet(new RandomFailTasket(&quot;stepA&quot;)).build();\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic Step stepB() {\r\n    \t\treturn stepBuilderFactory.get(&quot;stepB&quot;).tasklet(new PrintTextTasklet(&quot;stepB&quot;)).build();\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic Step stepC() {\r\n    \t\treturn stepBuilderFactory.get(&quot;stepC&quot;).tasklet(new PrintTextTasklet(&quot;stepC&quot;)).build();\r\n    \t}\r\n    \r\n    }\r\n    \r\nI&#39;m starting the job with a following code:\r\n    \r\n        try {\r\n            Map&lt;String,JobParameter&gt; parameters = new HashMap&lt;&gt;();\r\n            JobParameter ccReportIdParameter = new JobParameter(&quot;03061980&quot;);\r\n            parameters.put(&quot;ccReportId&quot;, ccReportIdParameter);\r\n    \r\n            jobLauncher.run(job, new JobParameters(parameters));\r\n        } catch (JobExecutionAlreadyRunningException | JobRestartException | JobInstanceAlreadyCompleteException\r\n                | JobParametersInvalidException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n\r\nThis is my test tasklet:\r\n\r\n    public class PrintTextTasklet implements Tasklet {\r\n    \r\n    \tpublic PrintTextTasklet() {\r\n    \t}\r\n    \r\n    \tpublic RepeatStatus execute(StepContribution stepContribution, ChunkContext chunkContext) throws Exception {\r\n    \r\n    \t\tString ccReportId = chunkContext.getStepContext().getStepExecution().getJobParameters().getString(&quot;ccReportId&quot;);\r\n    \t\tSystem.out.println(&quot;ccReportId: &quot; + ccReportId);\r\n    \t\tThread.sleep(60 * 1000);\r\n    \t\treturn RepeatStatus.FINISHED;\r\n    \t}\r\n    \r\n    }\r\n\r\nI use H2 database as a persistent storage for my jobs. \r\n\r\nDuring the jobs execution I&#39;m terminating my application. Right after application restart I expect that all uncompleted jobs will continue execution from terminated steps but nothing happens.\r\n\r\nAlso, in my application.properties file I added a following property:\r\n\r\n    spring.batch.job.enabled=false\r\n\r\nbecause I don&#39;t want to allow Spring Batch automatically start new(not terminated) job. I need to start all new jobs manually(on user request) and restart all completed jobs after next application run.\r\n\r\nHow to configure Spring Batch in this case ?\r\n\r\n**UPDATED**\r\n\r\nRight now I&#39;m trying to restart jobs with a following method:\r\n\r\n    public void restartUncompletedJobs() {\r\n            List&lt;String&gt; jobs = jobExplorer.getJobNames();\r\n            for (String job : jobs) {\r\n                Set&lt;JobExecution&gt; runningJobs = jobExplorer.findRunningJobExecutions(job);\r\n    \r\n                for (JobExecution runningJob : runningJobs) {\r\n                    try {\r\n                        jobOperator.restart(runningJob.getId());\r\n                        logger.info(&quot;Restarted: &quot; + runningJob);\r\n                    } catch (Exception e) {\r\n                        logger.error(e.getMessage(), e);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\nbut failing with a following exception:\r\n\r\n    org.springframework.batch.core.launch.NoSuchJobException: No job configuration with the name [job] was registered\r\n    \tat org.springframework.batch.core.configuration.support.MapJobRegistry.getJob(MapJobRegistry.java:66) ~[spring-batch-core-3.0.5.RELEASE.jar:3.0.5.RELEASE]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_60]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_60]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_60]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:497) ~[na:1.8.0_60]\r\n    \tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:302) ~[spring-aop-4.2.0.RELEASE.jar:4.2.0.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190) ~[spring-aop-4.2.0.RELEASE.jar:4.2.0.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157) ~[spring-aop-4.2.0.RELEASE.jar:4.2.0.RELEASE]\r\n    \tat org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:127) ~[spring-batch-core-3.0.5.RELEASE.jar:3.0.5.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.0.RELEASE.jar:4.2.0.RELEASE]\r\n    \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207) ~[spring-aop-4.2.0.RELEASE.jar:4.2.0.RELEASE]\r\n    \tat com.sun.proxy.$Proxy94.getJob(Unknown Source) ~[na:na]\r\n    \tat org.springframework.batch.core.launch.support.SimpleJobOperator.restart(SimpleJobOperator.java:275) ~[spring-batch-core-3.0.5.RELEASE.jar:3.0.5.RELEASE]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_60]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_60]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_60]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:497) ~[na:1.8.0_60]\r\n    \tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:302) ~[spring-aop-4.2.0.RELEASE.jar:4.2.0.RELEASE]\r\n    \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201) ~[spring-aop-4.2.0.RELEASE.jar:4.2.0.RELEASE]\r\n    \tat com.sun.proxy.$Proxy96.restart(Unknown Source) ~[na:na]\r\n    \tat com.example.domain.api.batch.job.ReportJobServiceImpl.restartUncompletedJobs(ReportJobServiceImpl.java:72) ~[classes/:na]\r\n    \tat com.example.domain.api.Application.lambda$0(Application.java:46) [classes/:na]\r\n    \tat org.springframework.boot.SpringApplication.runCommandLineRunners(SpringApplication.java:672) ~[spring-boot-1.2.5.RELEASE.jar:1.2.5.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.afterRefresh(SpringApplication.java:690) ~[spring-boot-1.2.5.RELEASE.jar:1.2.5.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:321) ~[spring-boot-1.2.5.RELEASE.jar:1.2.5.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:957) ~[spring-boot-1.2.5.RELEASE.jar:1.2.5.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:946) ~[spring-boot-1.2.5.RELEASE.jar:1.2.5.RELEASE]\r\n    \tat com.example.domain.api.Application.main(Application.java:53) [classes/:na]\r\n","title":"Spring Batch restart persistent jobs after abnormal termination","body":"<p>I have a following Spring Batch Job config:</p>\n\n<pre><code>@Configuration\n@EnableBatchProcessing\npublic class JobConfig {\n\n    @Autowired\n    private JobBuilderFactory jobBuilderFactory;\n\n    @Autowired\n    private StepBuilderFactory stepBuilderFactory;\n\n    @Bean\n    public Job job() {\n        return jobBuilderFactory.get(\"job\")\n                .flow(stepA()).on(\"FAILED\").to(stepC())\n                .from(stepA()).on(\"*\").to(stepB()).next(stepC())\n                .end().build();\n    }\n\n    @Bean\n    public Step stepA() {\n        return stepBuilderFactory.get(\"stepA\").tasklet(new RandomFailTasket(\"stepA\")).build();\n    }\n\n    @Bean\n    public Step stepB() {\n        return stepBuilderFactory.get(\"stepB\").tasklet(new PrintTextTasklet(\"stepB\")).build();\n    }\n\n    @Bean\n    public Step stepC() {\n        return stepBuilderFactory.get(\"stepC\").tasklet(new PrintTextTasklet(\"stepC\")).build();\n    }\n\n}\n</code></pre>\n\n<p>I'm starting the job with a following code:</p>\n\n<pre><code>    try {\n        Map&lt;String,JobParameter&gt; parameters = new HashMap&lt;&gt;();\n        JobParameter ccReportIdParameter = new JobParameter(\"03061980\");\n        parameters.put(\"ccReportId\", ccReportIdParameter);\n\n        jobLauncher.run(job, new JobParameters(parameters));\n    } catch (JobExecutionAlreadyRunningException | JobRestartException | JobInstanceAlreadyCompleteException\n            | JobParametersInvalidException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p>This is my test tasklet:</p>\n\n<pre><code>public class PrintTextTasklet implements Tasklet {\n\n    public PrintTextTasklet() {\n    }\n\n    public RepeatStatus execute(StepContribution stepContribution, ChunkContext chunkContext) throws Exception {\n\n        String ccReportId = chunkContext.getStepContext().getStepExecution().getJobParameters().getString(\"ccReportId\");\n        System.out.println(\"ccReportId: \" + ccReportId);\n        Thread.sleep(60 * 1000);\n        return RepeatStatus.FINISHED;\n    }\n\n}\n</code></pre>\n\n<p>I use H2 database as a persistent storage for my jobs. </p>\n\n<p>During the jobs execution I'm terminating my application. Right after application restart I expect that all uncompleted jobs will continue execution from terminated steps but nothing happens.</p>\n\n<p>Also, in my application.properties file I added a following property:</p>\n\n<pre><code>spring.batch.job.enabled=false\n</code></pre>\n\n<p>because I don't want to allow Spring Batch automatically start new(not terminated) job. I need to start all new jobs manually(on user request) and restart all completed jobs after next application run.</p>\n\n<p>How to configure Spring Batch in this case ?</p>\n\n<p><strong>UPDATED</strong></p>\n\n<p>Right now I'm trying to restart jobs with a following method:</p>\n\n<pre><code>public void restartUncompletedJobs() {\n        List&lt;String&gt; jobs = jobExplorer.getJobNames();\n        for (String job : jobs) {\n            Set&lt;JobExecution&gt; runningJobs = jobExplorer.findRunningJobExecutions(job);\n\n            for (JobExecution runningJob : runningJobs) {\n                try {\n                    jobOperator.restart(runningJob.getId());\n                    logger.info(\"Restarted: \" + runningJob);\n                } catch (Exception e) {\n                    logger.error(e.getMessage(), e);\n                }\n            }\n        }\n    }\n</code></pre>\n\n<p>but failing with a following exception:</p>\n\n<pre><code>org.springframework.batch.core.launch.NoSuchJobException: No job configuration with the name [job] was registered\n    at org.springframework.batch.core.configuration.support.MapJobRegistry.getJob(MapJobRegistry.java:66) ~[spring-batch-core-3.0.5.RELEASE.jar:3.0.5.RELEASE]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_60]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_60]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_60]\n    at java.lang.reflect.Method.invoke(Method.java:497) ~[na:1.8.0_60]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:302) ~[spring-aop-4.2.0.RELEASE.jar:4.2.0.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190) ~[spring-aop-4.2.0.RELEASE.jar:4.2.0.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157) ~[spring-aop-4.2.0.RELEASE.jar:4.2.0.RELEASE]\n    at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:127) ~[spring-batch-core-3.0.5.RELEASE.jar:3.0.5.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.0.RELEASE.jar:4.2.0.RELEASE]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207) ~[spring-aop-4.2.0.RELEASE.jar:4.2.0.RELEASE]\n    at com.sun.proxy.$Proxy94.getJob(Unknown Source) ~[na:na]\n    at org.springframework.batch.core.launch.support.SimpleJobOperator.restart(SimpleJobOperator.java:275) ~[spring-batch-core-3.0.5.RELEASE.jar:3.0.5.RELEASE]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_60]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_60]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_60]\n    at java.lang.reflect.Method.invoke(Method.java:497) ~[na:1.8.0_60]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:302) ~[spring-aop-4.2.0.RELEASE.jar:4.2.0.RELEASE]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201) ~[spring-aop-4.2.0.RELEASE.jar:4.2.0.RELEASE]\n    at com.sun.proxy.$Proxy96.restart(Unknown Source) ~[na:na]\n    at com.example.domain.api.batch.job.ReportJobServiceImpl.restartUncompletedJobs(ReportJobServiceImpl.java:72) ~[classes/:na]\n    at com.example.domain.api.Application.lambda$0(Application.java:46) [classes/:na]\n    at org.springframework.boot.SpringApplication.runCommandLineRunners(SpringApplication.java:672) ~[spring-boot-1.2.5.RELEASE.jar:1.2.5.RELEASE]\n    at org.springframework.boot.SpringApplication.afterRefresh(SpringApplication.java:690) ~[spring-boot-1.2.5.RELEASE.jar:1.2.5.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:321) ~[spring-boot-1.2.5.RELEASE.jar:1.2.5.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:957) ~[spring-boot-1.2.5.RELEASE.jar:1.2.5.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:946) ~[spring-boot-1.2.5.RELEASE.jar:1.2.5.RELEASE]\n    at com.example.domain.api.Application.main(Application.java:53) [classes/:na]\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","redirect"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1381306575,"post_id":19266427,"comment_id":28523568,"body_markdown":"All simple properties in the model. As explained here http://docs.spring.io/spring/docs/3.2.4.RELEASE/spring-framework-reference/html/mvc.html#mvc-redirecting .","body":"All simple properties in the model. As explained here <a href=\"http://docs.spring.io/spring/docs/3.2.4.RELEASE/spring-framework-reference/html/mvc.html#mvc-redirecting\" rel=\"nofollow noreferrer\">docs.spring.io/spring/docs/3.2.4.RELEASE/&hellip;</a> ."}],"answers":[{"tags":[],"owner":{"account_id":1712852,"reputation":10572,"user_id":1570523,"display_name":"Debojit Saikia"},"down_vote_count":0,"up_vote_count":88,"is_accepted":true,"score":88,"last_activity_date":1381314962,"creation_date":1381314962,"answer_id":19269653,"question_id":19266427,"body_markdown":"With `RedirectAttributes`, you can pass almost any data to the redirect URL:\r\n\r\n    @RequestMapping(value=&quot;/someURL&quot;, method=GET)\r\n    public String yourMethod(RedirectAttributes redirectAttributes)\r\n    {\r\n       ...\r\n       redirectAttributes.addAttribute(&quot;rd&quot;, &quot;rdValue&quot;);\r\n       redirectAttributes.addFlashAttribute(&quot;fa&quot;, faValue);\r\n       return &quot;redirect:/someOtherURL&quot;;\r\n    }\r\n\r\nWhen you use `addAttribute` to add attributes, this will end up in the target redirect URL. These attributes are used to construct the request parameters and the client (browser) will send a new request to the `redirect URL` with these parameters. With this, you are limited to use String or primitives as your redirect attributes.\r\n\r\nAnd when you use `addFlashAttribute`, these attributes are saved temporarily before the redirect (typically in the session) and are available to the request after the redirect and removed immediately. The advantage of using `flashAttributes` is that, you can add any object as a flash attribute (as it is stored in session).","title":"What are ways for pass parameters from controller after redirect in spring mvc?","body":"<p>With <code>RedirectAttributes</code>, you can pass almost any data to the redirect URL:</p>\n\n<pre><code>@RequestMapping(value=\"/someURL\", method=GET)\npublic String yourMethod(RedirectAttributes redirectAttributes)\n{\n   ...\n   redirectAttributes.addAttribute(\"rd\", \"rdValue\");\n   redirectAttributes.addFlashAttribute(\"fa\", faValue);\n   return \"redirect:/someOtherURL\";\n}\n</code></pre>\n\n<p>When you use <code>addAttribute</code> to add attributes, this will end up in the target redirect URL. These attributes are used to construct the request parameters and the client (browser) will send a new request to the <code>redirect URL</code> with these parameters. With this, you are limited to use String or primitives as your redirect attributes.</p>\n\n<p>And when you use <code>addFlashAttribute</code>, these attributes are saved temporarily before the redirect (typically in the session) and are available to the request after the redirect and removed immediately. The advantage of using <code>flashAttributes</code> is that, you can add any object as a flash attribute (as it is stored in session).</p>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64300,"favorite_count":0,"down_vote_count":0,"up_vote_count":38,"accepted_answer_id":19269653,"answer_count":1,"score":38,"last_activity_date":1663813183,"creation_date":1381306219,"question_id":19266427,"body_markdown":"if I write in my controller method:\r\n\r\n    return  &quot;redirect:url&quot;;\r\n\r\nWhat parameters will be passed to url (it maybe controller method or jsp page)?","title":"What are ways for pass parameters from controller after redirect in spring mvc?","body":"<p>if I write in my controller method:</p>\n<pre><code>return  &quot;redirect:url&quot;;\n</code></pre>\n<p>What parameters will be passed to url (it maybe controller method or jsp page)?</p>\n"},{"tags":["java","spring-boot","if-statement"],"comments":[{"owner":{"account_id":25534785,"reputation":532,"user_id":19322069,"display_name":"access violation"},"score":3,"creation_date":1663797634,"post_id":73807330,"comment_id":130326869,"body_markdown":"There&#39;s very little commonality in the checks, so it&#39;s probably as succinct as it can be without getting obscure.","body":"There&#39;s very little commonality in the checks, so it&#39;s probably as succinct as it can be without getting obscure."},{"owner":{"account_id":7855019,"reputation":117,"user_id":5937189,"display_name":"Edson Passos"},"score":0,"creation_date":1663797773,"post_id":73807330,"comment_id":130326890,"body_markdown":"You could move both &quot;throw new ResourceNotFound...&quot; to their getters. I.e.: \n```java\npublic User getUser(int id) throws ResourceNotFoundException {\n    //get\n    if (!user.isPresent()) {\n    //throw    \n    }\n    return user;\n}\n```","body":"You could move both &quot;throw new ResourceNotFound...&quot; to their getters. I.e.:  <code>java public User getUser(int id) throws ResourceNotFoundException {     &#47;&#47;get     if (!user.isPresent()) {     &#47;&#47;throw         }     return user; } </code>"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1663797974,"post_id":73807330,"comment_id":130326932,"body_markdown":"Keep doing what you&#39;re doing.  You&#39;ve got four conditions and four actions; so this code is exactly as verbose as it should be.  There is a way to make it shorter, but it comes at the expense of readability.","body":"Keep doing what you&#39;re doing.  You&#39;ve got four conditions and four actions; so this code is exactly as verbose as it should be.  There is a way to make it shorter, but it comes at the expense of readability."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1663799098,"creation_date":1663798754,"answer_id":73807503,"question_id":73807330,"body_markdown":"Perhaps the question is specifically about &#39;4 `if`s&#39;, in which case the answer is mostly no: This is fine - there is no particular commonality amongst the 4 conditions you check, nor is there any particula commonality amongst the 4 code blocks.\r\n\r\nGiven that you have `Optional`, you could rewrite it but the result isn&#39;t any &quot;shorter&quot; in terms of the amount of AST nodes (the &#39;complexity&#39; of the code). Your formatting guidelines may dictate that you could write it in &#39;fewer lines&#39;, but that just means your style guidelines are silly, not that mapping off of optional is somehow &#39;better&#39;. There&#39;s a reason that many style guides dictate that you _must_ write braces after an `if`. Whatever that reason may be, it&#39;s hard to follow how it doesn&#39;t also apply to optional `.map` and `.orElse`. Hence, it&#39;s a style guide thing, not an objective improvement.\r\n\r\nBut, just for argument&#39;s sake:\r\n\r\n```\r\nif (!user.orElseThrow(x -&gt; new ResourceNotFoundException(MessageUtil.ERROR_USER_NOTFOUND)).getGroups().contains(group)) {\r\n  throw new BadRequestException(&quot;Error. You are not a member of this group&quot;);\r\n}\r\n\r\nif (account.orElseThrow(x -&gt; new ResourceNotFoundException(MessageUtil.ERROR_ACCOUNT_NOT_FOUND)).getStatus() == AccountStatus.CLOSED) {\r\n  throw new BadRequestException(&quot;Error. This account is closed&quot;);\r\n}\r\n```\r\n\r\nThis is certainly shorter. It&#39;s also harder to read and harder to modify in light of new feature requests, so it&#39;s almost certainly worse. Contrast it to this code:\r\n\r\n```java\r\n if (!user.isPresent()) throw new ResourceNotFoundException(MessageUtil.ERROR_USER_NOTFOUND);\r\n if (!account.isPresent()) throw new ResourceNotFoundException(MessageUtil.ERROR_ACCOUNT_NOT_FOUND);\r\n if (account.get().getStatus() == AccountStatus.CLOSED) throw new BadRequestException(&quot;Error. This account is closed&quot;);\r\n if (!user.get().getGroups().contains(group)) throw new BadRequestException(&quot;Error. You are not a member of this group&quot;);\r\n```\r\n\r\nYou tell me - which one is easier to understand/change? I think the second, by miles. Which should mostly tell you that (assuming you hold to this), any style rule that `if` statements _must_ have braces is misguided and should be perhaps be discarded, or at least adjusted to allow &#39;fast return&#39; (i.e. if the body is `throw`, `continue`, `break`, or `return`, braces are optional. This is a nuance many more modern style guides do have). Point is: I don&#39;t think this qualifies as &#39;better&#39;, so not an actual answer to your question. Even if it is, under some style guides, &#39;shorter&#39;.\r\n\r\nHowever, I think this code _can_ be improved in a significant way (significant: Results in fewer bugs, is considerably easier to understand/follow, and can more easily be modified in the face of changing requirements) but we need to enlarge the scope a little bit.\r\n\r\nIt appears you call `getAccount()` somewhere which apparently returns an `Optional&lt;Account&gt;`. Or, possibly, this method has a parameter of type `Optional&lt;Account&gt;`.\r\n\r\ninstead of having a method `public Optional&lt;Account&gt; getAccount()`, instead, have a method `public Account getAccount() throws ResourceNotFoundException, BadRequestException`. This method will return the account if it exists, and throws an exception right away if it does not. This way, you&#39;ve isolated the code: Instead of writing `if (!account.isPresent()) throw new ....(MessageUtil...)` in 81905 different places in your code base, you now write it just the one time, in the `getAccount()` method. The assumption being that the vast majority of callers who ask for the account would want to throw that if that isn&#39;t a (valid) account. In passing this method can even check for CLOSED state and throw the appropriate error right away too. This avoids repetition _and_ mistakes: What if some code by accident forgets to check for a closed account?\r\n\r\nThen, for the rare cases where you want code that can fetch an account _even if_ that account is closed, or which wants to continue _even if_ there is no account (and possibly branch out someplace), make a separate method with a different name that sufficiently bells-and-whistles the requirements to follow when using it (needs to indicate to the caller that they need to pay some attention, as they&#39;ll have to do _alllll_ the required validation of that account, including presence of it, themselves).\r\n\r\nSame applies to a user (it&#39;s not clear what the semantic difference is between a &#39;user&#39; and an &#39;account&#39; here - in most systems there are synonyms. All advice above applies just the same to accounts as it does to users).\r\n\r\nNow you can get rid of 3 ifs, _and_ an optional unwrap in the rest of the code that follows the snippet you wrote (because surely after your 4 `if` clauses you actually do something with `user.get()`). And get rid of it not just here, but in many places. The one check that remains is the group check. You could even make a `getUserIf()` method that you pass not just whatever you need to fetch the user, but also an additional `group` param, and the `getUserIf` method will throw that BadRequestException if that user isn&#39;t a member of the group, but at some point you have to stop writing such &#39;utility-fetch&#39; methods. The right ones are near universally applicable to a vast array of situations. If, in your system, &#39;group check&#39; is 40%+ likely to happen when you have any reason to retrieve a `user` object, then make that method. If not, then don&#39;t.\r\n\r\n\r\n","title":"Is there a better way to write my if statement?","body":"<p>Perhaps the question is specifically about '4 <code>if</code>s', in which case the answer is mostly no: This is fine - there is no particular commonality amongst the 4 conditions you check, nor is there any particula commonality amongst the 4 code blocks.</p>\n<p>Given that you have <code>Optional</code>, you could rewrite it but the result isn't any &quot;shorter&quot; in terms of the amount of AST nodes (the 'complexity' of the code). Your formatting guidelines may dictate that you could write it in 'fewer lines', but that just means your style guidelines are silly, not that mapping off of optional is somehow 'better'. There's a reason that many style guides dictate that you <em>must</em> write braces after an <code>if</code>. Whatever that reason may be, it's hard to follow how it doesn't also apply to optional <code>.map</code> and <code>.orElse</code>. Hence, it's a style guide thing, not an objective improvement.</p>\n<p>But, just for argument's sake:</p>\n<pre><code>if (!user.orElseThrow(x -&gt; new ResourceNotFoundException(MessageUtil.ERROR_USER_NOTFOUND)).getGroups().contains(group)) {\n  throw new BadRequestException(&quot;Error. You are not a member of this group&quot;);\n}\n\nif (account.orElseThrow(x -&gt; new ResourceNotFoundException(MessageUtil.ERROR_ACCOUNT_NOT_FOUND)).getStatus() == AccountStatus.CLOSED) {\n  throw new BadRequestException(&quot;Error. This account is closed&quot;);\n}\n</code></pre>\n<p>This is certainly shorter. It's also harder to read and harder to modify in light of new feature requests, so it's almost certainly worse. Contrast it to this code:</p>\n<pre class=\"lang-java prettyprint-override\"><code> if (!user.isPresent()) throw new ResourceNotFoundException(MessageUtil.ERROR_USER_NOTFOUND);\n if (!account.isPresent()) throw new ResourceNotFoundException(MessageUtil.ERROR_ACCOUNT_NOT_FOUND);\n if (account.get().getStatus() == AccountStatus.CLOSED) throw new BadRequestException(&quot;Error. This account is closed&quot;);\n if (!user.get().getGroups().contains(group)) throw new BadRequestException(&quot;Error. You are not a member of this group&quot;);\n</code></pre>\n<p>You tell me - which one is easier to understand/change? I think the second, by miles. Which should mostly tell you that (assuming you hold to this), any style rule that <code>if</code> statements <em>must</em> have braces is misguided and should be perhaps be discarded, or at least adjusted to allow 'fast return' (i.e. if the body is <code>throw</code>, <code>continue</code>, <code>break</code>, or <code>return</code>, braces are optional. This is a nuance many more modern style guides do have). Point is: I don't think this qualifies as 'better', so not an actual answer to your question. Even if it is, under some style guides, 'shorter'.</p>\n<p>However, I think this code <em>can</em> be improved in a significant way (significant: Results in fewer bugs, is considerably easier to understand/follow, and can more easily be modified in the face of changing requirements) but we need to enlarge the scope a little bit.</p>\n<p>It appears you call <code>getAccount()</code> somewhere which apparently returns an <code>Optional&lt;Account&gt;</code>. Or, possibly, this method has a parameter of type <code>Optional&lt;Account&gt;</code>.</p>\n<p>instead of having a method <code>public Optional&lt;Account&gt; getAccount()</code>, instead, have a method <code>public Account getAccount() throws ResourceNotFoundException, BadRequestException</code>. This method will return the account if it exists, and throws an exception right away if it does not. This way, you've isolated the code: Instead of writing <code>if (!account.isPresent()) throw new ....(MessageUtil...)</code> in 81905 different places in your code base, you now write it just the one time, in the <code>getAccount()</code> method. The assumption being that the vast majority of callers who ask for the account would want to throw that if that isn't a (valid) account. In passing this method can even check for CLOSED state and throw the appropriate error right away too. This avoids repetition <em>and</em> mistakes: What if some code by accident forgets to check for a closed account?</p>\n<p>Then, for the rare cases where you want code that can fetch an account <em>even if</em> that account is closed, or which wants to continue <em>even if</em> there is no account (and possibly branch out someplace), make a separate method with a different name that sufficiently bells-and-whistles the requirements to follow when using it (needs to indicate to the caller that they need to pay some attention, as they'll have to do <em>alllll</em> the required validation of that account, including presence of it, themselves).</p>\n<p>Same applies to a user (it's not clear what the semantic difference is between a 'user' and an 'account' here - in most systems there are synonyms. All advice above applies just the same to accounts as it does to users).</p>\n<p>Now you can get rid of 3 ifs, <em>and</em> an optional unwrap in the rest of the code that follows the snippet you wrote (because surely after your 4 <code>if</code> clauses you actually do something with <code>user.get()</code>). And get rid of it not just here, but in many places. The one check that remains is the group check. You could even make a <code>getUserIf()</code> method that you pass not just whatever you need to fetch the user, but also an additional <code>group</code> param, and the <code>getUserIf</code> method will throw that BadRequestException if that user isn't a member of the group, but at some point you have to stop writing such 'utility-fetch' methods. The right ones are near universally applicable to a vast array of situations. If, in your system, 'group check' is 40%+ likely to happen when you have any reason to retrieve a <code>user</code> object, then make that method. If not, then don't.</p>\n"}],"owner":{"account_id":21674731,"reputation":35,"user_id":15991889,"display_name":"Steve Otieno"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73807503,"answer_count":1,"score":0,"last_activity_date":1663813165,"creation_date":1663797261,"question_id":73807330,"body_markdown":"I have a function that checks if multiple conditions are fulfilled before performing an operation. The code below shows all conditions that must be fulfilled.\r\n```\r\n        if (!user.isPresent()) {\r\n            throw new ResourceNotFoundException(MessageUtil.ERROR_USER_NOTFOUND);\r\n        }\r\n\r\n        if (!account.isPresent()) {\r\n            throw new ResourceNotFoundException(MessageUtil.ERROR_ACCOUNT_NOT_FOUND);\r\n        }\r\n\r\n        if (account.get().getStatus() == AccountStatus.CLOSED) {\r\n            throw new BadRequestException(&quot;Error. This account is closed&quot;);\r\n        }\r\n\r\n        if (!user.get().getGroups().contains(group)) {\r\n            throw new BadRequestException(&quot;Error. You are not a member of this group&quot;);\r\n        }\r\n```\r\nThis code works perfectly as is. However, is there a better way of writing my if statements? Something about the look of it just feels wrong, feels verbose.","title":"Is there a better way to write my if statement?","body":"<p>I have a function that checks if multiple conditions are fulfilled before performing an operation. The code below shows all conditions that must be fulfilled.</p>\n<pre><code>        if (!user.isPresent()) {\n            throw new ResourceNotFoundException(MessageUtil.ERROR_USER_NOTFOUND);\n        }\n\n        if (!account.isPresent()) {\n            throw new ResourceNotFoundException(MessageUtil.ERROR_ACCOUNT_NOT_FOUND);\n        }\n\n        if (account.get().getStatus() == AccountStatus.CLOSED) {\n            throw new BadRequestException(&quot;Error. This account is closed&quot;);\n        }\n\n        if (!user.get().getGroups().contains(group)) {\n            throw new BadRequestException(&quot;Error. You are not a member of this group&quot;);\n        }\n</code></pre>\n<p>This code works perfectly as is. However, is there a better way of writing my if statements? Something about the look of it just feels wrong, feels verbose.</p>\n"},{"tags":["java","string","switch-statement"],"comments":[{"owner":{"account_id":65834,"reputation":9352,"user_id":193467,"accept_rate":83,"display_name":"angryITguy"},"score":203,"creation_date":1311231284,"post_id":338206,"comment_id":8032826,"body_markdown":"It&#39;s in SE 7. 16 yrs after it&#39;s request. http://download.oracle.com/javase/tutorial/java/nutsandbolts/switch.html","body":"It&#39;s in SE 7. 16 yrs after it&#39;s request. <a href=\"http://download.oracle.com/javase/tutorial/java/nutsandbolts/switch.html\" rel=\"nofollow noreferrer\">download.oracle.com/javase/tutorial/java/nutsandbolts/&hellip;</a>"},{"owner":{"account_id":416171,"reputation":31417,"user_id":791406,"accept_rate":69,"display_name":"raffian"},"score":88,"creation_date":1376250540,"post_id":338206,"comment_id":26630397,"body_markdown":"Sun was honest in their evaluation: `&quot;Don&#39;t hold your breath.&quot;` lol, http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=1223179","body":"Sun was honest in their evaluation: <code>&quot;Don&#39;t hold your breath.&quot;</code> lol, <a href=\"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=1223179\" rel=\"nofollow noreferrer\">bugs.sun.com/bugdatabase/view_bug.do?bug_id=1223179</a>"},{"owner":{"account_id":3671296,"reputation":2453,"user_id":3058454,"accept_rate":17,"display_name":"Neerkoli"},"score":3,"creation_date":1472210277,"post_id":338206,"comment_id":65672403,"body_markdown":"@raffian I think it&#39;s because she &#39;sigh&#39;ed twice. They were a little late to reply too, after almost 10 years. She might have been packing lunch boxes to her grandchildren then.","body":"@raffian I think it&#39;s because she &#39;sigh&#39;ed twice. They were a little late to reply too, after almost 10 years. She might have been packing lunch boxes to her grandchildren then."}],"answers":[{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":1,"up_vote_count":1027,"is_accepted":true,"score":1026,"last_activity_date":1663813150,"creation_date":1228329045,"answer_id":338230,"question_id":338206,"body_markdown":"Switch statements with `String` cases have been implemented in [Java SE 7][1], at least 16 years [after they were first requested.][2] A clear reason for the delay was not provided, but it likely had to do with performance.\r\n\r\nImplementation in JDK 7\r\n-----------------------\r\n\r\nThe feature has now been implemented in `javac` [with a &quot;de-sugaring&quot; process;][4] a clean, high-level syntax using `String` constants in `case` declarations is expanded at compile-time into more complex code following a pattern. The resulting code uses JVM instructions that have always existed.\r\n\r\nA `switch` with `String` cases is translated into two switches during compilation. The first maps each string to a unique integer&amp;mdash;its position in the original switch. This is done by first switching on the hash code of the label. The corresponding case is an `if` statement that tests string equality; if there are collisions on the hash, the test is a cascading `if-else-if`. The second switch mirrors that in the original source code, but substitutes the case labels with their corresponding positions. This two-step process makes it easy to preserve the flow control of the original switch.\r\n\r\nSwitches in the JVM\r\n-------------------\r\n\r\nFor more technical depth on `switch`, you can refer to the JVM Specification, where the [compilation of switch statements][5] is described. In a nutshell, there are two different JVM instructions that can be used for a switch, depending on the sparsity of the constants used by the cases. Both depend on using integer constants for each case to execute efficiently. \r\n\r\nIf the constants are dense, they are used as an index (after subtracting the lowest value) into a table of instruction pointers&amp;mdash;the `tableswitch` instruction. \r\n\r\nIf the constants are sparse, a binary search for the correct case is performed&amp;mdash;the `lookupswitch` instruction. \r\n\r\nIn de-sugaring a `switch` on `String` objects, both instructions are likely to be used. The `lookupswitch` is suitable for the first switch on hash codes to find the original position of the case. The resulting ordinal is a natural fit for a `tableswitch`.\r\n\r\nBoth instructions require the integer constants assigned to each case to be sorted at compile time. At runtime, while the `O(1)` performance of `tableswitch` generally appears better than the `O(log(n))` performance of `lookupswitch`, it requires some analysis to determine whether the table is dense enough to justify the space&amp;ndash;time tradeoff. Bill Venners wrote [a great article][6] that covers this in more detail, along with an under-the-hood look at other Java flow control instructions.\r\n\r\nBefore JDK 7\r\n------------\r\n\r\nPrior to JDK 7, `enum` could approximate a `String`-based switch. This uses [the static `valueOf`][7] method generated by the compiler on every `enum` type. For example:\r\n\r\n    Pill p = Pill.valueOf(str);\r\n    switch(p) {\r\n      case RED:  pop();  break;\r\n      case BLUE: push(); break;\r\n    }\r\n\r\n\r\n  [1]: http://openjdk.java.net/projects/jdk7/features/\r\n  [2]: https://bugs.java.com/bugdatabase/view_bug.do?bug_id=1223179\r\n  [4]: http://blogs.oracle.com/darcy/entry/project_coin_string_switch_anatomy\r\n  [5]: http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-3.html#jvms-3.10\r\n  [6]: http://www.artima.com/underthehood/flowP.html\r\n  [7]: http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.9.3","title":"Why can&#39;t I use switch statement on a String?","body":"<p>Switch statements with <code>String</code> cases have been implemented in <a href=\"http://openjdk.java.net/projects/jdk7/features/\" rel=\"noreferrer\">Java SE 7</a>, at least 16 years <a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=1223179\" rel=\"noreferrer\">after they were first requested.</a> A clear reason for the delay was not provided, but it likely had to do with performance.</p>\n<h2>Implementation in JDK 7</h2>\n<p>The feature has now been implemented in <code>javac</code> <a href=\"http://blogs.oracle.com/darcy/entry/project_coin_string_switch_anatomy\" rel=\"noreferrer\">with a &quot;de-sugaring&quot; process;</a> a clean, high-level syntax using <code>String</code> constants in <code>case</code> declarations is expanded at compile-time into more complex code following a pattern. The resulting code uses JVM instructions that have always existed.</p>\n<p>A <code>switch</code> with <code>String</code> cases is translated into two switches during compilation. The first maps each string to a unique integer—its position in the original switch. This is done by first switching on the hash code of the label. The corresponding case is an <code>if</code> statement that tests string equality; if there are collisions on the hash, the test is a cascading <code>if-else-if</code>. The second switch mirrors that in the original source code, but substitutes the case labels with their corresponding positions. This two-step process makes it easy to preserve the flow control of the original switch.</p>\n<h2>Switches in the JVM</h2>\n<p>For more technical depth on <code>switch</code>, you can refer to the JVM Specification, where the <a href=\"http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-3.html#jvms-3.10\" rel=\"noreferrer\">compilation of switch statements</a> is described. In a nutshell, there are two different JVM instructions that can be used for a switch, depending on the sparsity of the constants used by the cases. Both depend on using integer constants for each case to execute efficiently.</p>\n<p>If the constants are dense, they are used as an index (after subtracting the lowest value) into a table of instruction pointers—the <code>tableswitch</code> instruction.</p>\n<p>If the constants are sparse, a binary search for the correct case is performed—the <code>lookupswitch</code> instruction.</p>\n<p>In de-sugaring a <code>switch</code> on <code>String</code> objects, both instructions are likely to be used. The <code>lookupswitch</code> is suitable for the first switch on hash codes to find the original position of the case. The resulting ordinal is a natural fit for a <code>tableswitch</code>.</p>\n<p>Both instructions require the integer constants assigned to each case to be sorted at compile time. At runtime, while the <code>O(1)</code> performance of <code>tableswitch</code> generally appears better than the <code>O(log(n))</code> performance of <code>lookupswitch</code>, it requires some analysis to determine whether the table is dense enough to justify the space–time tradeoff. Bill Venners wrote <a href=\"http://www.artima.com/underthehood/flowP.html\" rel=\"noreferrer\">a great article</a> that covers this in more detail, along with an under-the-hood look at other Java flow control instructions.</p>\n<h2>Before JDK 7</h2>\n<p>Prior to JDK 7, <code>enum</code> could approximate a <code>String</code>-based switch. This uses <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.9.3\" rel=\"noreferrer\">the static <code>valueOf</code></a> method generated by the compiler on every <code>enum</code> type. For example:</p>\n<pre><code>Pill p = Pill.valueOf(str);\nswitch(p) {\n  case RED:  pop();  break;\n  case BLUE: push(); break;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7342,"reputation":102036,"user_id":12725,"accept_rate":78,"display_name":"James Curran"},"down_vote_count":4,"up_vote_count":31,"is_accepted":false,"score":27,"last_activity_date":1228329130,"creation_date":1228329130,"answer_id":338236,"question_id":338206,"body_markdown":"Switches based on integers can be optimized to very efficent code.  Switches based on other data type can only be compiled to a series of if() statements.\r\n\r\nFor that reason C &amp; C++ only allow switches on integer types, since it was pointless with other  types.\r\n\r\nThe designers of C# decided that the style was important, even if there was no advantage.\r\n\r\nThe designers of Java apparently thought like the designers of C.\r\n\r\n","title":"Why can&#39;t I use switch statement on a String?","body":"<p>Switches based on integers can be optimized to very efficent code.  Switches based on other data type can only be compiled to a series of if() statements.</p>\n\n<p>For that reason C &amp; C++ only allow switches on integer types, since it was pointless with other  types.</p>\n\n<p>The designers of C# decided that the style was important, even if there was no advantage.</p>\n\n<p>The designers of Java apparently thought like the designers of C.</p>\n"},{"tags":[],"owner":{"account_id":9608,"reputation":17506,"user_id":17832,"display_name":"JeeBee"},"down_vote_count":0,"up_vote_count":129,"is_accepted":false,"score":129,"last_activity_date":1228329859,"creation_date":1228329859,"answer_id":338284,"question_id":338206,"body_markdown":"If you have a place in your code where you can switch on a String, then it may be better to refactor the String to be an enumeration of the possible values, which you can switch on. Of course, you limit the potential values of Strings you can have to those in the enumeration, which may or may not be desired.\r\n\r\nOf course your enumeration could have an entry for &#39;other&#39;, and a fromString(String) method, then you could have\r\n\r\n    ValueEnum enumval = ValueEnum.fromString(myString);\r\n    switch (enumval) {\r\n       case MILK: lap(); break;\r\n       case WATER: sip(); break;\r\n       case BEER: quaff(); break;\r\n       case OTHER: \r\n       default: dance(); break;\r\n    }\r\n\r\n","title":"Why can&#39;t I use switch statement on a String?","body":"<p>If you have a place in your code where you can switch on a String, then it may be better to refactor the String to be an enumeration of the possible values, which you can switch on. Of course, you limit the potential values of Strings you can have to those in the enumeration, which may or may not be desired.</p>\n\n<p>Of course your enumeration could have an entry for 'other', and a fromString(String) method, then you could have</p>\n\n<pre><code>ValueEnum enumval = ValueEnum.fromString(myString);\nswitch (enumval) {\n   case MILK: lap(); break;\n   case WATER: sip(); break;\n   case BEER: quaff(); break;\n   case OTHER: \n   default: dance(); break;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10258,"reputation":26460,"user_id":19276,"accept_rate":81,"display_name":"DJClayworth"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1228337382,"creation_date":1228337382,"answer_id":338631,"question_id":338206,"body_markdown":"James Curran succinctly says: &quot;Switches based on integers can be optimized to very efficent code. Switches based on other data type can only be compiled to a series of if() statements. For that reason C &amp; C++ only allow switches on integer types, since it was pointless with other types.&quot;\r\n\r\nMy opinion, and it&#39;s only that, is that as soon as you start switching on non-primitives you need to start thinking about &quot;equals&quot; versus &quot;==&quot;. Firstly comparing two strings can be a fairly lengthy procedure, adding to the performance problems that are mentioned above. Secondly if there is switching on strings there will be demand for switching on strings ignoring case, switching on strings considering/ignoring locale,switching on strings based on regex.... I would approve of a decision that saved a lot of time for the language developers at the cost of a small amount of time for programmers.","title":"Why can&#39;t I use switch statement on a String?","body":"<p>James Curran succinctly says: \"Switches based on integers can be optimized to very efficent code. Switches based on other data type can only be compiled to a series of if() statements. For that reason C &amp; C++ only allow switches on integer types, since it was pointless with other types.\"</p>\n\n<p>My opinion, and it's only that, is that as soon as you start switching on non-primitives you need to start thinking about \"equals\" versus \"==\". Firstly comparing two strings can be a fairly lengthy procedure, adding to the performance problems that are mentioned above. Secondly if there is switching on strings there will be demand for switching on strings ignoring case, switching on strings considering/ignoring locale,switching on strings based on regex.... I would approve of a decision that saved a lot of time for the language developers at the cost of a small amount of time for programmers.</p>\n"},{"tags":[],"owner":{"account_id":8537,"reputation":40691,"user_id":15459,"accept_rate":70,"display_name":"PhiLho"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1228340738,"creation_date":1228340738,"answer_id":338835,"question_id":338206,"body_markdown":"Beside the above good arguments, I will add that lot of people today see `switch` as an obsolete remainder of procedural past of Java (back to C times).\r\n\r\nI don&#39;t fully share this opinion, I think `switch` can have its usefulness in some cases, at least because of its speed, and anyway it is better than some series of cascading numerical `else if` I saw in some code...\r\n\r\nBut indeed, it is worth looking at the case where you need a switch, and see if it cannot be replaced by something more OO. For example enums in Java 1.5+, perhaps HashTable or some other collection (sometime I regret we don&#39;t have (anonymous) functions as first class citizen, as in Lua — which doesn&#39;t have switch — or JavaScript) or even polymorphism.","title":"Why can&#39;t I use switch statement on a String?","body":"<p>Beside the above good arguments, I will add that lot of people today see <code>switch</code> as an obsolete remainder of procedural past of Java (back to C times).</p>\n\n<p>I don't fully share this opinion, I think <code>switch</code> can have its usefulness in some cases, at least because of its speed, and anyway it is better than some series of cascading numerical <code>else if</code> I saw in some code...</p>\n\n<p>But indeed, it is worth looking at the case where you need a switch, and see if it cannot be replaced by something more OO. For example enums in Java 1.5+, perhaps HashTable or some other collection (sometime I regret we don't have (anonymous) functions as first class citizen, as in Lua — which doesn't have switch — or JavaScript) or even polymorphism.</p>\n"},{"tags":[],"owner":{"account_id":302968,"reputation":3420,"user_id":611628,"display_name":"Thulani Chivandikwa"},"down_vote_count":1,"up_vote_count":92,"is_accepted":false,"score":91,"last_activity_date":1411153775,"creation_date":1316178693,"answer_id":7445174,"question_id":338206,"body_markdown":"The following is a complete example based on JeeBee&#39;s post, using java enum&#39;s instead of using a custom method.\r\n\r\nNote that in Java SE 7 and later you can use a String object in the switch statement&#39;s expression instead.\r\n\r\n    public class Main {\r\n\r\n        /**\r\n        * @param args the command line arguments\r\n        */\r\n        public static void main(String[] args) {\r\n     \r\n          String current = args[0];\r\n          Days currentDay = Days.valueOf(current.toUpperCase());\r\n\r\n          switch (currentDay) {\r\n              case MONDAY:\r\n              case TUESDAY:\r\n              case WEDNESDAY:\r\n                  System.out.println(&quot;boring&quot;);\r\n                  break;\r\n              case THURSDAY:\r\n                  System.out.println(&quot;getting better&quot;);\r\n              case FRIDAY:\r\n              case SATURDAY:\r\n              case SUNDAY:\r\n                  System.out.println(&quot;much better&quot;);\r\n                  break;\r\n\r\n          }\r\n      }\r\n\r\n      public enum Days {\r\n\r\n        MONDAY,\r\n        TUESDAY,\r\n        WEDNESDAY,\r\n        THURSDAY,\r\n        FRIDAY,\r\n        SATURDAY,\r\n        SUNDAY\r\n      }\r\n    }","title":"Why can&#39;t I use switch statement on a String?","body":"<p>The following is a complete example based on JeeBee's post, using java enum's instead of using a custom method.</p>\n\n<p>Note that in Java SE 7 and later you can use a String object in the switch statement's expression instead.</p>\n\n<pre><code>public class Main {\n\n    /**\n    * @param args the command line arguments\n    */\n    public static void main(String[] args) {\n\n      String current = args[0];\n      Days currentDay = Days.valueOf(current.toUpperCase());\n\n      switch (currentDay) {\n          case MONDAY:\n          case TUESDAY:\n          case WEDNESDAY:\n              System.out.println(\"boring\");\n              break;\n          case THURSDAY:\n              System.out.println(\"getting better\");\n          case FRIDAY:\n          case SATURDAY:\n          case SUNDAY:\n              System.out.println(\"much better\");\n              break;\n\n      }\n  }\n\n  public enum Days {\n\n    MONDAY,\n    TUESDAY,\n    WEDNESDAY,\n    THURSDAY,\n    FRIDAY,\n    SATURDAY,\n    SUNDAY\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":261698,"reputation":6422,"user_id":546060,"accept_rate":86,"display_name":"Charles Goodwin"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1430577506,"creation_date":1384530218,"answer_id":20004867,"question_id":338206,"body_markdown":"For years we&#39;ve been using a(n open source) preprocessor for this.\r\n\r\n    //#switch(target)\r\n    case &quot;foo&quot;: code;\r\n    //#end\r\n\r\nPreprocessed files are named Foo.jpp and get processed into Foo.java with an ant script.\r\n\r\nAdvantage is it is processed into Java that runs on 1.0 (although typically we only supported back to 1.4). Also it was far easier to do this (lots of string switches) compared to fudging it with enums or other workarounds - code was a lot easier to read, maintain, and understand. IIRC (can&#39;t provide statistics or technical reasoning at this point) it was also faster than the natural Java equivalents.\r\n\r\nDisadvantages are you aren&#39;t editing Java so it&#39;s a bit more workflow (edit, process, compile/test) plus an IDE will link back to the Java which is a little convoluted (the switch becomes a series of if/else logic steps) and the switch case order is not maintained.\r\n\r\nI wouldn&#39;t recommend it for 1.7+ but it&#39;s useful if you want to program Java that targets earlier JVMs (since Joe public rarely has the latest installed).\r\n\r\nYou can get it [from SVN][1] or browse the [code online][2]. You&#39;ll need [EBuild][3] to build it as-is.\r\n\r\n\r\n  [1]: https://svn.code.sf.net/p/vexi/code/trunk/org.vexi-build.jpp\r\n  [2]: https://svn.code.sf.net/p/vexi/code/trunk/org.vexi-build.jpp/src/main/java/org/vexi/build/jpp/\r\n  [3]: http://ebuild-project.org","title":"Why can&#39;t I use switch statement on a String?","body":"<p>For years we've been using a(n open source) preprocessor for this.</p>\n\n<pre><code>//#switch(target)\ncase \"foo\": code;\n//#end\n</code></pre>\n\n<p>Preprocessed files are named Foo.jpp and get processed into Foo.java with an ant script.</p>\n\n<p>Advantage is it is processed into Java that runs on 1.0 (although typically we only supported back to 1.4). Also it was far easier to do this (lots of string switches) compared to fudging it with enums or other workarounds - code was a lot easier to read, maintain, and understand. IIRC (can't provide statistics or technical reasoning at this point) it was also faster than the natural Java equivalents.</p>\n\n<p>Disadvantages are you aren't editing Java so it's a bit more workflow (edit, process, compile/test) plus an IDE will link back to the Java which is a little convoluted (the switch becomes a series of if/else logic steps) and the switch case order is not maintained.</p>\n\n<p>I wouldn't recommend it for 1.7+ but it's useful if you want to program Java that targets earlier JVMs (since Joe public rarely has the latest installed).</p>\n\n<p>You can get it <a href=\"https://svn.code.sf.net/p/vexi/code/trunk/org.vexi-build.jpp\" rel=\"nofollow\">from SVN</a> or browse the <a href=\"https://svn.code.sf.net/p/vexi/code/trunk/org.vexi-build.jpp/src/main/java/org/vexi/build/jpp/\" rel=\"nofollow\">code online</a>. You'll need <a href=\"http://ebuild-project.org\" rel=\"nofollow\">EBuild</a> to build it as-is.</p>\n"},{"tags":[],"owner":{"account_id":139877,"reputation":1381,"user_id":345759,"display_name":"Gunnar Forsgren - Mobimation"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1446820375,"creation_date":1428561008,"answer_id":29531341,"question_id":338206,"body_markdown":"An example of direct `String` usage since 1.7 may be shown as well:\r\n\r\n    public static void main(String[] args) {\r\n\r\n        switch (args[0]) {\r\n            case &quot;Monday&quot;:\r\n            case &quot;Tuesday&quot;:\r\n            case &quot;Wednesday&quot;:\r\n                System.out.println(&quot;boring&quot;);\r\n                break;\r\n            case &quot;Thursday&quot;:\r\n                System.out.println(&quot;getting better&quot;);\r\n            case &quot;Friday&quot;:\r\n            case &quot;Saturday&quot;:\r\n            case &quot;Sunday&quot;:\r\n                System.out.println(&quot;much better&quot;);\r\n                break;\r\n        }\r\n\r\n    }","title":"Why can&#39;t I use switch statement on a String?","body":"<p>An example of direct <code>String</code> usage since 1.7 may be shown as well:</p>\n\n<pre><code>public static void main(String[] args) {\n\n    switch (args[0]) {\n        case \"Monday\":\n        case \"Tuesday\":\n        case \"Wednesday\":\n            System.out.println(\"boring\");\n            break;\n        case \"Thursday\":\n            System.out.println(\"getting better\");\n        case \"Friday\":\n        case \"Saturday\":\n        case \"Sunday\":\n            System.out.println(\"much better\");\n            break;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10839766,"reputation":5282,"user_id":8200485,"accept_rate":82,"display_name":"hyper-neutrino"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1453778083,"creation_date":1432412188,"answer_id":30417153,"question_id":338206,"body_markdown":"If you are not using JDK7 or higher, you can use `hashCode()` to simulate it. Because `String.hashCode()` usually returns different values for different strings and always returns equal values for equal strings, it is fairly reliable (Different strings &lt;i&gt;can&lt;/i&gt; produce the same hash code as @Lii mentioned in a comment, such as `&quot;FB&quot;` and `&quot;Ea&quot;`) See [documentation][1].\r\n\r\nSo, the code would look like this:\r\n\r\n    String s = &quot;&lt;Your String&gt;&quot;;\r\n    \r\n    switch(s.hashCode()) {\r\n    case &quot;Hello&quot;.hashCode(): break;\r\n    case &quot;Goodbye&quot;.hashCode(): break;\r\n    }\r\n\r\nThat way, you are technically switching on an `int`.\r\n\r\nAlternatively, you could use the following code:\r\n\r\n    public final class Switch&lt;T&gt; {\r\n        private final HashMap&lt;T, Runnable&gt; cases = new HashMap&lt;T, Runnable&gt;(0);\r\n    \r\n        public void addCase(T object, Runnable action) {\r\n            this.cases.put(object, action);\r\n        }\r\n        \r\n        public void SWITCH(T object) {\r\n            for (T t : this.cases.keySet()) {\r\n                if (object.equals(t)) { // This means that the class works with any object!\r\n                    this.cases.get(t).run();\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#hashCode() &quot;String Hashcode&quot;","title":"Why can&#39;t I use switch statement on a String?","body":"<p>If you are not using JDK7 or higher, you can use <code>hashCode()</code> to simulate it. Because <code>String.hashCode()</code> usually returns different values for different strings and always returns equal values for equal strings, it is fairly reliable (Different strings <i>can</i> produce the same hash code as @Lii mentioned in a comment, such as <code>\"FB\"</code> and <code>\"Ea\"</code>) See <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#hashCode()\" rel=\"noreferrer\" title=\"String Hashcode\">documentation</a>.</p>\n\n<p>So, the code would look like this:</p>\n\n<pre><code>String s = \"&lt;Your String&gt;\";\n\nswitch(s.hashCode()) {\ncase \"Hello\".hashCode(): break;\ncase \"Goodbye\".hashCode(): break;\n}\n</code></pre>\n\n<p>That way, you are technically switching on an <code>int</code>.</p>\n\n<p>Alternatively, you could use the following code:</p>\n\n<pre><code>public final class Switch&lt;T&gt; {\n    private final HashMap&lt;T, Runnable&gt; cases = new HashMap&lt;T, Runnable&gt;(0);\n\n    public void addCase(T object, Runnable action) {\n        this.cases.put(object, action);\n    }\n\n    public void SWITCH(T object) {\n        for (T t : this.cases.keySet()) {\n            if (object.equals(t)) { // This means that the class works with any object!\n                this.cases.get(t).run();\n                break;\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6523765,"reputation":9872,"user_id":5083516,"display_name":"plugwash"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1484806188,"creation_date":1484806188,"answer_id":41734919,"question_id":338206,"body_markdown":"Other answers have said this was added in Java 7 and given workarounds for earlier versions. This answer tries to answer the &quot;why&quot;\r\n\r\nJava was a reaction to the over-complexities of C++. It was designed to be a simple clean language.\r\n\r\nString got a little bit of special case handling in the language but it seems clear to me that the designers were trying to keep the amount of special casing and syntactic sugar to a minimum.\r\n\r\nswitching on strings is fairly complex under the hood since strings are not simple primitive types. It was not a common feature at the time Java was designed and doesn&#39;t really fit in well with the minimalist design. Especially as they had decided not to special case == for strings, it would be (and is) a bit strange for case to work where == doesn&#39;t.\r\n\r\nBetween 1.0 and 1.4 the language itself stayed pretty much the same. Most of the enhancements to Java were on the library side. \r\n\r\nThat all changed with Java 5, the language was substantially extended. Further extensions followed in versions 7 and 8. I expect that this change of attitude was driven by the rise of C#\r\n","title":"Why can&#39;t I use switch statement on a String?","body":"<p>Other answers have said this was added in Java 7 and given workarounds for earlier versions. This answer tries to answer the \"why\"</p>\n\n<p>Java was a reaction to the over-complexities of C++. It was designed to be a simple clean language.</p>\n\n<p>String got a little bit of special case handling in the language but it seems clear to me that the designers were trying to keep the amount of special casing and syntactic sugar to a minimum.</p>\n\n<p>switching on strings is fairly complex under the hood since strings are not simple primitive types. It was not a common feature at the time Java was designed and doesn't really fit in well with the minimalist design. Especially as they had decided not to special case == for strings, it would be (and is) a bit strange for case to work where == doesn't.</p>\n\n<p>Between 1.0 and 1.4 the language itself stayed pretty much the same. Most of the enhancements to Java were on the library side. </p>\n\n<p>That all changed with Java 5, the language was substantially extended. Further extensions followed in versions 7 and 8. I expect that this change of attitude was driven by the rise of C#</p>\n"},{"tags":[],"owner":{"account_id":2544920,"reputation":101,"user_id":6413028,"display_name":"Conete Cristian"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1496298808,"creation_date":1496298808,"answer_id":44300104,"question_id":338206,"body_markdown":"Not very pretty, but here is another way for Java 6 and bellow: \r\n\r\n    String runFct = \r\n\t\t\tqueryType.equals(&quot;eq&quot;) ? &quot;method1&quot;:\r\n\t\t\tqueryType.equals(&quot;L_L&quot;)? &quot;method2&quot;:\r\n\t\t\tqueryType.equals(&quot;L_R&quot;)? &quot;method3&quot;:\r\n\t\t\tqueryType.equals(&quot;L_LR&quot;)? &quot;method4&quot;:\r\n\t\t\t\t&quot;method5&quot;;\r\n\tMethod m = this.getClass().getMethod(runFct);\r\n\tm.invoke(this);","title":"Why can&#39;t I use switch statement on a String?","body":"<p>Not very pretty, but here is another way for Java 6 and bellow: </p>\n\n<pre><code>String runFct = \n        queryType.equals(\"eq\") ? \"method1\":\n        queryType.equals(\"L_L\")? \"method2\":\n        queryType.equals(\"L_R\")? \"method3\":\n        queryType.equals(\"L_LR\")? \"method4\":\n            \"method5\";\nMethod m = this.getClass().getMethod(runFct);\nm.invoke(this);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4734827,"reputation":4157,"user_id":7109598,"display_name":"Iskuskov Alexander"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581244757,"creation_date":1581244757,"answer_id":60135712,"question_id":338206,"body_markdown":"[**JEP 354: Switch Expressions (Preview)**](https://openjdk.java.net/jeps/354) in JDK-13 and [**JEP 361: Switch Expressions (Standard)**](https://openjdk.java.net/jeps/361) in JDK-14 will extend the _**switch statement**_ so it can be used as an _**expression**_. \r\n\r\nNow you can:\r\n\r\n - directly assign variable from _switch expression_, \r\n - use new form of switch label (`case L -&gt;`):\r\n   &gt; The code to the right of a &quot;case L -&gt;&quot; switch label is restricted to be an expression, a block, or (for convenience) a throw statement.\r\n - use multiple constants per case, separated by commas, \r\n - and also there are no more value _breaks_:\r\n   &gt; To yield a value from a switch expression, the `break` with value statement is dropped in favor of a `yield` statement.\r\n\r\nSo the demo from the answers ([1](https://stackoverflow.com/a/7445174/7109598), [2](https://stackoverflow.com/a/29531341/7109598)) might look like this:\r\n\r\n```java\r\n  public static void main(String[] args) {\r\n    switch (args[0]) {\r\n      case &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot; -&gt;  System.out.println(&quot;boring&quot;);\r\n      case &quot;Thursday&quot; -&gt; System.out.println(&quot;getting better&quot;);\r\n      case &quot;Friday&quot;, &quot;Saturday&quot;, &quot;Sunday&quot; -&gt; System.out.println(&quot;much better&quot;);\r\n    }\r\n```","title":"Why can&#39;t I use switch statement on a String?","body":"<p><a href=\"https://openjdk.java.net/jeps/354\" rel=\"nofollow noreferrer\"><strong>JEP 354: Switch Expressions (Preview)</strong></a> in JDK-13 and <a href=\"https://openjdk.java.net/jeps/361\" rel=\"nofollow noreferrer\"><strong>JEP 361: Switch Expressions (Standard)</strong></a> in JDK-14 will extend the <em><strong>switch statement</strong></em> so it can be used as an <em><strong>expression</strong></em>. </p>\n\n<p>Now you can:</p>\n\n<ul>\n<li>directly assign variable from <em>switch expression</em>, </li>\n<li>use new form of switch label (<code>case L -&gt;</code>):\n\n<blockquote>\n  <p>The code to the right of a \"case L ->\" switch label is restricted to be an expression, a block, or (for convenience) a throw statement.</p>\n</blockquote></li>\n<li>use multiple constants per case, separated by commas, </li>\n<li>and also there are no more value <em>breaks</em>:\n\n<blockquote>\n  <p>To yield a value from a switch expression, the <code>break</code> with value statement is dropped in favor of a <code>yield</code> statement.</p>\n</blockquote></li>\n</ul>\n\n<p>So the demo from the answers (<a href=\"https://stackoverflow.com/a/7445174/7109598\">1</a>, <a href=\"https://stackoverflow.com/a/29531341/7109598\">2</a>) might look like this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>  public static void main(String[] args) {\n    switch (args[0]) {\n      case \"Monday\", \"Tuesday\", \"Wednesday\" -&gt;  System.out.println(\"boring\");\n      case \"Thursday\" -&gt; System.out.println(\"getting better\");\n      case \"Friday\", \"Saturday\", \"Sunday\" -&gt; System.out.println(\"much better\");\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7206157,"reputation":3851,"user_id":5501699,"display_name":"Imtiaz Shakil Siddique"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593531358,"creation_date":1593531358,"answer_id":62661099,"question_id":338206,"body_markdown":"In Java 11+ it&#39;s possible with variables too. The only condition is it must be a constant. \r\n\r\nFor Example:\r\n\r\n```java\r\nfinal String LEFT = &quot;left&quot;;\r\nfinal String RIGHT = &quot;right&quot;;\r\nfinal String UP = &quot;up&quot;;\r\nfinal String DOWN = &quot;down&quot;;\r\n\r\nString var = ...;\r\n\r\nswitch (var) {\r\n    case LEFT:\r\n    case RIGHT:\r\n    case DOWN:\r\n    default:\r\n        return 0;\r\n}\r\n```\r\n\r\n*PS. I&#39;ve not tried this with earlier jdks. So please update the answer if it&#39;s supported there too.*","title":"Why can&#39;t I use switch statement on a String?","body":"<p>In Java 11+ it's possible with variables too. The only condition is it must be a constant.</p>\n<p>For Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final String LEFT = &quot;left&quot;;\nfinal String RIGHT = &quot;right&quot;;\nfinal String UP = &quot;up&quot;;\nfinal String DOWN = &quot;down&quot;;\n\nString var = ...;\n\nswitch (var) {\n    case LEFT:\n    case RIGHT:\n    case DOWN:\n    default:\n        return 0;\n}\n</code></pre>\n<p><em>PS. I've not tried this with earlier jdks. So please update the answer if it's supported there too.</em></p>\n"},{"tags":[],"owner":{"account_id":1449510,"reputation":48172,"user_id":1366871,"accept_rate":100,"display_name":"dreamcrash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1616102857,"creation_date":1615883367,"answer_id":66651512,"question_id":338206,"body_markdown":"The technicalities were nicely explained in this [answer][1]. I just wanted to add that with Java 12 [switch expressions][2] you can do it with the following syntax:\r\n\r\n    String translation(String cat_language) {\r\n        return switch (cat_language) {\r\n            case &quot;miau miau&quot; -&gt; &quot;I am to run&quot;;\r\n            case &quot;miauuuh&quot; -&gt; &quot;I am to sleep&quot;;\r\n            case &quot;mi...au?&quot; -&gt;  &quot;leave me alone&quot;;\r\n            default -&gt;  &quot;eat&quot;;\r\n        };\r\n    } \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/338230/1366871\r\n  [2]: https://docs.oracle.com/en/java/javase/13/language/switch-expressions.html","title":"Why can&#39;t I use switch statement on a String?","body":"<p>The technicalities were nicely explained in this <a href=\"https://stackoverflow.com/a/338230/1366871\">answer</a>. I just wanted to add that with Java 12 <a href=\"https://docs.oracle.com/en/java/javase/13/language/switch-expressions.html\" rel=\"nofollow noreferrer\">switch expressions</a> you can do it with the following syntax:</p>\n<pre><code>String translation(String cat_language) {\n    return switch (cat_language) {\n        case &quot;miau miau&quot; -&gt; &quot;I am to run&quot;;\n        case &quot;miauuuh&quot; -&gt; &quot;I am to sleep&quot;;\n        case &quot;mi...au?&quot; -&gt;  &quot;leave me alone&quot;;\n        default -&gt;  &quot;eat&quot;;\n    };\n} \n</code></pre>\n"}],"owner":{"account_id":7944,"reputation":21068,"user_id":14007,"accept_rate":92,"display_name":"Alex Beardsley"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":773184,"favorite_count":0,"down_vote_count":3,"up_vote_count":1053,"accepted_answer_id":338230,"answer_count":14,"score":1050,"last_activity_date":1663813150,"creation_date":1228328637,"question_id":338206,"body_markdown":"Is this functionality going to be put into a later Java version?\r\n\r\nCan someone explain why I can&#39;t do this, as in, the technical way Java&#39;s `switch` statement works?","title":"Why can&#39;t I use switch statement on a String?","body":"<p>Is this functionality going to be put into a later Java version?</p>\n\n<p>Can someone explain why I can't do this, as in, the technical way Java's <code>switch</code> statement works?</p>\n"},{"tags":["java","android","button","android-hardware"],"comments":[{"owner":{"account_id":7302782,"reputation":158,"user_id":5564845,"display_name":"Saurabh"},"score":0,"creation_date":1663826190,"post_id":73808575,"comment_id":130331127,"body_markdown":"You won&#39;t be able to intercept hardware buttons apart from back button probably.","body":"You won&#39;t be able to intercept hardware buttons apart from back button probably."}],"answers":[{"tags":[],"owner":{"account_id":11302721,"reputation":36,"user_id":8288187,"display_name":"greenfeel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663813060,"creation_date":1663813060,"answer_id":73808653,"question_id":73808575,"body_markdown":"You can override `onKeyDown()` and `onKeyUp()` method in your View or Activity. \r\n\r\nThe keyCodes are defined in `KeyEvent` class.","title":"While pressing HARDWARE button","body":"<p>You can override <code>onKeyDown()</code> and <code>onKeyUp()</code> method in your View or Activity.</p>\n<p>The keyCodes are defined in <code>KeyEvent</code> class.</p>\n"}],"owner":{"account_id":12291205,"reputation":33,"user_id":8968483,"display_name":"Erick Pro"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663813060,"creation_date":1663812269,"question_id":73808575,"body_markdown":"I would like to do something while any hardware button is pressed (not after it is released).I know how to do it with a regular button, but how can I achieve it with a hardware button?\r\n\r\nThis is the behavior I want to simulate using a hardware button.\r\n\r\n    button.setOnTouchListener(new View.OnTouchListener() {\r\n                @Override\r\n                public boolean onTouch(View v, MotionEvent event) {\r\n                    if(event.getAction() == MotionEvent.ACTION_DOWN){\r\n                        button.setText(&quot;Button Pressed&quot;);\r\n                    }\r\n                    if(event.getAction() == MotionEvent.ACTION_UP){\r\n                        button.setText(&quot;Start&quot;); //finger was lifted\r\n                    }\r\n                    return true;\r\n                }\r\n            });","title":"While pressing HARDWARE button","body":"<p>I would like to do something while any hardware button is pressed (not after it is released).I know how to do it with a regular button, but how can I achieve it with a hardware button?</p>\n<p>This is the behavior I want to simulate using a hardware button.</p>\n<pre><code>button.setOnTouchListener(new View.OnTouchListener() {\n            @Override\n            public boolean onTouch(View v, MotionEvent event) {\n                if(event.getAction() == MotionEvent.ACTION_DOWN){\n                    button.setText(&quot;Button Pressed&quot;);\n                }\n                if(event.getAction() == MotionEvent.ACTION_UP){\n                    button.setText(&quot;Start&quot;); //finger was lifted\n                }\n                return true;\n            }\n        });\n</code></pre>\n"},{"tags":["java","filter","java-stream"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1663803680,"post_id":73807842,"comment_id":130327856,"body_markdown":"[Can&#39;t reproduce.](https://ideone.com/sezFxD) Please provide a [mcve].","body":"<a href=\"https://ideone.com/sezFxD\" rel=\"nofollow noreferrer\">Can&#39;t reproduce.</a> Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":18559672,"reputation":300,"user_id":13523946,"display_name":"notAPPP"},"score":0,"creation_date":1663806315,"post_id":73807842,"comment_id":130328166,"body_markdown":"IndexOutOfBoundsException comes from getPossibilities so you can check if getPosibilites have at least size 2 before you collect when constructing triplets list.","body":"IndexOutOfBoundsException comes from getPossibilities so you can check if getPosibilites have at least size 2 before you collect when constructing triplets list."},{"owner":{"account_id":21195284,"reputation":361,"user_id":15586987,"display_name":"Eduardo Jim&#233;nez"},"score":0,"creation_date":1663812501,"post_id":73807842,"comment_id":130329017,"body_markdown":"@notAPPP All points have at least 1 probability; `Point#uniqueSolution` test if it has 1 probability; first filter discards all points with more than 3 probs. second filter discards all points with 1 prob, therefore only remains points with 2 or 3 probs only","body":"@notAPPP All points have at least 1 probability; <code>Point#uniqueSolution</code> test if it has 1 probability; first filter discards all points with more than 3 probs. second filter discards all points with 1 prob, therefore only remains points with 2 or 3 probs only"},{"owner":{"account_id":21195284,"reputation":361,"user_id":15586987,"display_name":"Eduardo Jim&#233;nez"},"score":0,"creation_date":1663813270,"post_id":73807842,"comment_id":130329133,"body_markdown":"@shmosel I tried to make my example reproducible, but I won&#39;t put all my code in here... But I can say: when I print `point` it turns to be a Collection of size 1. On uniquePossibility, I test `size == 1`  and I discard all points whose size is equal to 1","body":"@shmosel I tried to make my example reproducible, but I won&#39;t put all my code in here... But I can say: when I print <code>point</code> it turns to be a Collection of size 1. On uniquePossibility, I test <code>size == 1</code>  and I discard all points whose size is equal to 1"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1663819171,"post_id":73807842,"comment_id":130330003,"body_markdown":"Still runs fine. My guess is the bug was lost in the translation.","body":"Still runs fine. My guess is the bug was lost in the translation."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1663849519,"post_id":73807842,"comment_id":130339109,"body_markdown":"Seems like the problem is somewhere in `/* Lots of beautiful code*/` and `/* Lots of methods here */`. Most probably, there’s something in there changing the `possibilities` set.","body":"Seems like the problem is somewhere in <code>&#47;* Lots of beautiful code*&#47;</code> and <code>&#47;* Lots of methods here *&#47;</code>. Most probably, there’s something in there changing the <code>possibilities</code> set."},{"owner":{"account_id":21195284,"reputation":361,"user_id":15586987,"display_name":"Eduardo Jim&#233;nez"},"score":0,"creation_date":1663906971,"post_id":73807842,"comment_id":130354018,"body_markdown":"Yeah, I think you&#39;re right. Possibilities set is modified on `/* Lots of beautiful code */`, I was discardind that because doing `.filter().foreach()` solved the problem... maybe the filter acts before every iteration for each item, so the error doesn&#39;t happen. Thanks !","body":"Yeah, I think you&#39;re right. Possibilities set is modified on <code>&#47;* Lots of beautiful code *&#47;</code>, I was discardind that because doing <code>.filter().foreach()</code> solved the problem... maybe the filter acts before every iteration for each item, so the error doesn&#39;t happen. Thanks !"}],"owner":{"account_id":21195284,"reputation":361,"user_id":15586987,"display_name":"Eduardo Jim&#233;nez"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663813019,"creation_date":1663802499,"question_id":73807842,"body_markdown":"I have a set of points with different possibilities. For that I created a class `Point`. It&#39;s importan to say that a point MUST ALWAYS HAVE AT LEAST ONE POSSIBILITY (For this example we assume this statement is true).\r\n\r\n```java\r\nimport org.jetbrains.annotations.NotNull;\r\n\r\nimport java.util.*;\r\nimport java.util.stream.Collectors;\r\nimport java.util.stream.IntStream;\r\n\r\npublic class Point {\r\n\r\n\tprivate final HashSet&lt;Integer&gt; possibilities;\r\n\r\n\tpublic Point(int n) {\r\n\t\tthis.possibilities = (HashSet&lt;Integer&gt;) IntStream.rangeClosed(1, n)\r\n\t\t\t\t.boxed()\r\n\t\t\t\t.collect(Collectors.toSet());\r\n\t}\r\n\r\n\t/**\r\n\t * Serves to verify if this point has only one\r\n\t * possibility\r\n\t * @return true if there&#39;s only one element in the\r\n\t * hashset possibilities, false otherwise\r\n\t */\r\n\tpublic boolean uniquePossibility() {\r\n\t\treturn this.possibilities.size() == 1;\r\n\t}\r\n\r\n\t/**\r\n\t * @return the number of possibilities for this point\r\n\t */\r\n\tpublic int getCurrentPossibilities() {\r\n\t\treturn this.possibilities.size();\r\n\t}\r\n\r\n\t/**\r\n\t * @return possibilities\r\n\t */\r\n\tpublic HashSet&lt;Integer&gt; getPossibilities() {\r\n\t\treturn possibilities;\r\n\t}\r\n\t\r\n\t/* Lots of methods here */\r\n}\r\n```\r\n\r\nAnd then I want to create a method that works with the points with 2 or 3 possibilities.\r\n\r\n```java\r\nimport java.util.*;\r\nimport java.util.concurrent.atomic.AtomicBoolean;\r\nimport java.util.concurrent.atomic.AtomicInteger;\r\nimport java.util.function.BiFunction;\r\nimport java.util.function.Function;\r\nimport java.util.stream.Collectors;\r\nimport java.util.stream.IntStream;\r\n\r\npublic class AwesomeClass {\r\n\r\n\tprivate final List&lt;Point&gt; points;\r\n\r\n\tpublic AwesomeClass() {\r\n\t\tpoints = new ArrayList(10_00_000);\r\n\t\tfor (int i = 0; i &lt; 10_00_000; i++) {\r\n\t\t\tRandom random = new Random();\r\n\t\t\tpoints.add(new Point(random.nextInt(9) + 1));\r\n\t\t}\r\n\t\tspotTriplets();\r\n\t}\r\n\r\n\tprivate boolean spotTriplets() {\r\n\t\tAtomicBoolean changes = new AtomicBoolean(false);\r\n\r\n\t\tList&lt;Point&gt; triplets = points.stream()\r\n\t\t\t\t.filter(point -&gt; point.getCurrentPossibilities() &lt;= 3)\r\n\t\t\t\t.filter(point -&gt; !point.uniquePossibility())\r\n\t\t\t\t.collect(Collectors.toList());\r\n\r\n\t\ttriplets.forEach(point -&gt; {\r\n\t\t\tSystem.out.println(point.uniquePossibility());\r\n\t\t\tList&lt;Integer&gt; number = new ArrayList&lt;&gt;(point.getPossibilities());\r\n\t\t\tint x = number.get(0);\r\n\t\t\tint y = number.get(1);\r\n\t\t\tAtomicInteger z = new AtomicInteger(0);\r\n\t\t\t\r\n\t\t\t/* Lots of beautiful code*/\r\n\t\t\t\r\n\t\t});\r\n\r\n\t\treturn changes.get();\r\n\t}\r\n}\r\n```\r\n\r\nWhen I run my code, this error happens\r\n\r\n```\r\nfalse\r\nfalse\r\n...\r\nfalse\r\nfalse\r\ntrue\r\nException in thread &quot;main&quot; java.lang.IndexOutOfBoundsException: Index 1 out of bounds for length 1\r\n\tat java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:100)\r\n\tat java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:106)\r\n\tat java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:302)\r\n\tat java.base/java.util.Objects.checkIndex(Objects.java:359)\r\n\tat java.base/java.util.ArrayList.get(ArrayList.java:427)\r\n\tat AwesomeClass.lambda$spotTriplets$69(AwesomeClass.java:400)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat AwesomeClass.spotTriplets(AwesomeClass.java:396)\r\n\tat AwesomeClass.solveProblem(AwesomeClass.java:71)\r\n\tat Main.main(Main.java:59)\r\n\r\nProcess finished with exit code 1\r\n```\r\n\r\nThis error is on the line `int y = number.get(1);`. But the error actually is from the filter, please notice the filter `.filter(point -&gt; !point.uniquePossibility())` and the STDOUT: `System.out.println(point.uniquePossibility());`.\r\n\r\nIs contradictory that if I have a filter dropping `point.uniquePossibility()`, I got a point with `point.uniquePossibility() -&gt; true`.\r\n\r\nWhat can I do?\r\n\r\nUsing the filter before the foreach solves the problem, but I would like to fix this on the List\r\n\r\n```java\r\ntriplets.stream()\r\n\t\t.filter(point -&gt; !point.uniquePossibility())\r\n\t\t.forEach(point -&gt; {/*code here*/});\r\n```\r\n\r\nThanks in advance","title":"Java Stream#filter fails on two sequential filters","body":"<p>I have a set of points with different possibilities. For that I created a class <code>Point</code>. It's importan to say that a point MUST ALWAYS HAVE AT LEAST ONE POSSIBILITY (For this example we assume this statement is true).</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.jetbrains.annotations.NotNull;\n\nimport java.util.*;\nimport java.util.stream.Collectors;\nimport java.util.stream.IntStream;\n\npublic class Point {\n\n    private final HashSet&lt;Integer&gt; possibilities;\n\n    public Point(int n) {\n        this.possibilities = (HashSet&lt;Integer&gt;) IntStream.rangeClosed(1, n)\n                .boxed()\n                .collect(Collectors.toSet());\n    }\n\n    /**\n     * Serves to verify if this point has only one\n     * possibility\n     * @return true if there's only one element in the\n     * hashset possibilities, false otherwise\n     */\n    public boolean uniquePossibility() {\n        return this.possibilities.size() == 1;\n    }\n\n    /**\n     * @return the number of possibilities for this point\n     */\n    public int getCurrentPossibilities() {\n        return this.possibilities.size();\n    }\n\n    /**\n     * @return possibilities\n     */\n    public HashSet&lt;Integer&gt; getPossibilities() {\n        return possibilities;\n    }\n    \n    /* Lots of methods here */\n}\n</code></pre>\n<p>And then I want to create a method that works with the points with 2 or 3 possibilities.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\nimport java.util.concurrent.atomic.AtomicBoolean;\nimport java.util.concurrent.atomic.AtomicInteger;\nimport java.util.function.BiFunction;\nimport java.util.function.Function;\nimport java.util.stream.Collectors;\nimport java.util.stream.IntStream;\n\npublic class AwesomeClass {\n\n    private final List&lt;Point&gt; points;\n\n    public AwesomeClass() {\n        points = new ArrayList(10_00_000);\n        for (int i = 0; i &lt; 10_00_000; i++) {\n            Random random = new Random();\n            points.add(new Point(random.nextInt(9) + 1));\n        }\n        spotTriplets();\n    }\n\n    private boolean spotTriplets() {\n        AtomicBoolean changes = new AtomicBoolean(false);\n\n        List&lt;Point&gt; triplets = points.stream()\n                .filter(point -&gt; point.getCurrentPossibilities() &lt;= 3)\n                .filter(point -&gt; !point.uniquePossibility())\n                .collect(Collectors.toList());\n\n        triplets.forEach(point -&gt; {\n            System.out.println(point.uniquePossibility());\n            List&lt;Integer&gt; number = new ArrayList&lt;&gt;(point.getPossibilities());\n            int x = number.get(0);\n            int y = number.get(1);\n            AtomicInteger z = new AtomicInteger(0);\n            \n            /* Lots of beautiful code*/\n            \n        });\n\n        return changes.get();\n    }\n}\n</code></pre>\n<p>When I run my code, this error happens</p>\n<pre><code>false\nfalse\n...\nfalse\nfalse\ntrue\nException in thread &quot;main&quot; java.lang.IndexOutOfBoundsException: Index 1 out of bounds for length 1\n    at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:100)\n    at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:106)\n    at java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:302)\n    at java.base/java.util.Objects.checkIndex(Objects.java:359)\n    at java.base/java.util.ArrayList.get(ArrayList.java:427)\n    at AwesomeClass.lambda$spotTriplets$69(AwesomeClass.java:400)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at AwesomeClass.spotTriplets(AwesomeClass.java:396)\n    at AwesomeClass.solveProblem(AwesomeClass.java:71)\n    at Main.main(Main.java:59)\n\nProcess finished with exit code 1\n</code></pre>\n<p>This error is on the line <code>int y = number.get(1);</code>. But the error actually is from the filter, please notice the filter <code>.filter(point -&gt; !point.uniquePossibility())</code> and the STDOUT: <code>System.out.println(point.uniquePossibility());</code>.</p>\n<p>Is contradictory that if I have a filter dropping <code>point.uniquePossibility()</code>, I got a point with <code>point.uniquePossibility() -&gt; true</code>.</p>\n<p>What can I do?</p>\n<p>Using the filter before the foreach solves the problem, but I would like to fix this on the List</p>\n<pre class=\"lang-java prettyprint-override\"><code>triplets.stream()\n        .filter(point -&gt; !point.uniquePossibility())\n        .forEach(point -&gt; {/*code here*/});\n</code></pre>\n<p>Thanks in advance</p>\n"},{"tags":["java","swing","jscrollpane"],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663812511,"creation_date":1663812197,"answer_id":73808570,"question_id":73808319,"body_markdown":"&gt;  It wont update unless I resize the window. \r\n\r\n    repaint();\r\n    doLayout();\r\n\r\nFirst of all, the order of the statements is wrong. You should not attempt to repaint something if you haven&#39;t redone the layout.\r\n\r\nHowever, you should not invoke doLayout() directly. Instead, you can use:\r\n\r\n    fileScrollView.revalidate();\r\n    fileScrollView.repaint(); // sometimes needed\r\n\r\nThe `revalidate()` will invoke the layout manager. Sometime repaint() is also needed to make sure the panel is repainted.","title":"Reliable object not resizing java JScrollPane","body":"<blockquote>\n<p>It wont update unless I resize the window.</p>\n</blockquote>\n<pre><code>repaint();\ndoLayout();\n</code></pre>\n<p>First of all, the order of the statements is wrong. You should not attempt to repaint something if you haven't redone the layout.</p>\n<p>However, you should not invoke doLayout() directly. Instead, you can use:</p>\n<pre><code>fileScrollView.revalidate();\nfileScrollView.repaint(); // sometimes needed\n</code></pre>\n<p>The <code>revalidate()</code> will invoke the layout manager. Sometime repaint() is also needed to make sure the panel is repainted.</p>\n"}],"owner":{"account_id":20796175,"reputation":53,"user_id":15273156,"display_name":"Crazy games"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1663812511,"creation_date":1663808823,"question_id":73808319,"body_markdown":"I&#39;m trying to make a file view(JScrollPane) resizable for an ide, but when I try to resize it, It wont update unless I resize the window.\r\nI try looking it up but I could not find anything usefull.\r\nIf you help me on this thank you so much.\r\n\r\nTake a look fore yourself\r\n\r\n```java\r\npublic MainWindow(String title) {\r\n        \r\n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        this.setLayout(new BorderLayout());\r\n        this.setResizable(true);\r\n        this.setSize(windowSize);\r\n        this.setLocationRelativeTo(null);\r\n\r\n        // ....\r\n\r\n        JPanel fileView = new JPanel();\r\n        fileView.setBackground(Color.WHITE.darker());\r\n\r\n        JScrollPane fileScrollView = new JScrollPane(fileView);\r\n        fileScrollView.setPreferredSize(new Dimension(100, 0));\r\n\r\n        fileScrollView.addMouseMotionListener(new MouseMotionListener() {\r\n            private int offset = 0;\r\n            private boolean start = false;\r\n\r\n            @Override\r\n            public void mouseDragged(MouseEvent e) {\r\n                int mouseX = e.getX() ;\r\n                int left = fileScrollView.getX() + fileScrollView.getWidth();\r\n                boolean resize = setCursor(left, mouseX);\r\n\r\n                if (start) {\r\n                    offset = left - mouseX;\r\n                }\r\n\r\n                if (resize) {\r\n                    LOGGER.logInfo(&quot;OFFSET: &quot; + offset);\r\n                    fileScrollView.setPreferredSize(new Dimension(mouseX + offset, fileScrollView.getHeight()));\r\n\r\n                    repaint();\r\n                    doLayout();\r\n                }\r\n                start = false;\r\n            }\r\n\r\n            @Override\r\n            public void mouseMoved(MouseEvent e) {\r\n                start = true;\r\n                setCursor(fileScrollView.getX() + fileScrollView.getWidth(), e.getX());\r\n            }\r\n\r\n            public boolean setCursor(int right, int mx) {\r\n                if (mx &gt; right - 20 &amp;&amp; mx &lt; right){\r\n                    fileScrollView.setCursor(new Cursor(Cursor.E_RESIZE_CURSOR));\r\n                    return true;\r\n                } else {\r\n                    fileScrollView.setCursor(Cursor.getDefaultCursor());\r\n                    return false;\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n\r\n        this.add(fileScrollView, BorderLayout.WEST);\r\n    }\r\n```","title":"Reliable object not resizing java JScrollPane","body":"<p>I'm trying to make a file view(JScrollPane) resizable for an ide, but when I try to resize it, It wont update unless I resize the window.\nI try looking it up but I could not find anything usefull.\nIf you help me on this thank you so much.</p>\n<p>Take a look fore yourself</p>\n<pre class=\"lang-java prettyprint-override\"><code>public MainWindow(String title) {\n        \n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        this.setLayout(new BorderLayout());\n        this.setResizable(true);\n        this.setSize(windowSize);\n        this.setLocationRelativeTo(null);\n\n        // ....\n\n        JPanel fileView = new JPanel();\n        fileView.setBackground(Color.WHITE.darker());\n\n        JScrollPane fileScrollView = new JScrollPane(fileView);\n        fileScrollView.setPreferredSize(new Dimension(100, 0));\n\n        fileScrollView.addMouseMotionListener(new MouseMotionListener() {\n            private int offset = 0;\n            private boolean start = false;\n\n            @Override\n            public void mouseDragged(MouseEvent e) {\n                int mouseX = e.getX() ;\n                int left = fileScrollView.getX() + fileScrollView.getWidth();\n                boolean resize = setCursor(left, mouseX);\n\n                if (start) {\n                    offset = left - mouseX;\n                }\n\n                if (resize) {\n                    LOGGER.logInfo(&quot;OFFSET: &quot; + offset);\n                    fileScrollView.setPreferredSize(new Dimension(mouseX + offset, fileScrollView.getHeight()));\n\n                    repaint();\n                    doLayout();\n                }\n                start = false;\n            }\n\n            @Override\n            public void mouseMoved(MouseEvent e) {\n                start = true;\n                setCursor(fileScrollView.getX() + fileScrollView.getWidth(), e.getX());\n            }\n\n            public boolean setCursor(int right, int mx) {\n                if (mx &gt; right - 20 &amp;&amp; mx &lt; right){\n                    fileScrollView.setCursor(new Cursor(Cursor.E_RESIZE_CURSOR));\n                    return true;\n                } else {\n                    fileScrollView.setCursor(Cursor.getDefaultCursor());\n                    return false;\n                }\n            }\n        });\n\n\n\n        this.add(fileScrollView, BorderLayout.WEST);\n    }\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1663776516,"post_id":73800072,"comment_id":130320581,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":26401176,"reputation":1,"user_id":20051620,"display_name":"bandanacheez"},"score":0,"creation_date":1663785996,"post_id":73800072,"comment_id":130323694,"body_markdown":"i have modified it and added an image aswell, hope its clear now","body":"i have modified it and added an image aswell, hope its clear now"},{"owner":{"account_id":10358025,"reputation":2474,"user_id":7639296,"accept_rate":75,"display_name":"Dr Mido"},"score":0,"creation_date":1663812125,"post_id":73800072,"comment_id":130328960,"body_markdown":"@bandanacheez check my answer","body":"@bandanacheez check my answer"}],"answers":[{"tags":[],"owner":{"account_id":10358025,"reputation":2474,"user_id":7639296,"accept_rate":75,"display_name":"Dr Mido"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663812088,"creation_date":1663812088,"answer_id":73808559,"question_id":73800072,"body_markdown":"You used `String input = txtInput.getText().toString();` but in your code there&#39;s no var with this name &quot;txtInput&quot;, I think you mistakes and you mean `CharSequence s` in `onTextChanged` method.&lt;br/&gt;\r\n\r\nHowever, if you wanna get the second number that is written in `onTextChanged` you can use the following\r\n\r\n```\r\nif( s != null &amp;&amp; s.length &gt;= 2) {\r\n\r\nString secondNumber = s[1]\r\n\r\nLog.d(TAG, &quot;onTextChanged: $secondNumber&quot;) ==&gt; this log to check for the number\r\n\r\n}\r\n```\r\n\r\nthen you can continue doing your if check\r\n\r\n```\r\n if (secondNumber.getText().equals(&quot;8&quot;)) {\r\n    doSomeThing();\r\n   }\r\n```","title":"how to set condition on two numbers entered in EditText in Android Studio","body":"<p>You used <code>String input = txtInput.getText().toString();</code> but in your code there's no var with this name &quot;txtInput&quot;, I think you mistakes and you mean <code>CharSequence s</code> in <code>onTextChanged</code> method.<br/></p>\n<p>However, if you wanna get the second number that is written in <code>onTextChanged</code> you can use the following</p>\n<pre><code>if( s != null &amp;&amp; s.length &gt;= 2) {\n\nString secondNumber = s[1]\n\nLog.d(TAG, &quot;onTextChanged: $secondNumber&quot;) ==&gt; this log to check for the number\n\n}\n</code></pre>\n<p>then you can continue doing your if check</p>\n<pre><code> if (secondNumber.getText().equals(&quot;8&quot;)) {\n    doSomeThing();\n   }\n</code></pre>\n"}],"owner":{"account_id":26401176,"reputation":1,"user_id":20051620,"display_name":"bandanacheez"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1663812088,"creation_date":1663760201,"question_id":73800072,"body_markdown":"I have just started android studio, i am stuck on EditText that has to take two numbers as input from user. Basically it is used for a 7-segment display with two digits that is made by views. i am able to turn on the first digit when user enters the first number, but i don&#39;t know how to turn on the second digit when user enters second number in EditText.\r\n\r\nbelow is the MainActivity.java code that i&#39;ve tried.\r\n\r\n\r\n     public void afterTextChanged(Editable s) {\r\n            }\r\n            public void beforeTextChanged(CharSequence s, int start,\r\n                                          int count, int after) {\r\n            }\r\n            public void onTextChanged(CharSequence s, int start,\r\n                                      int before, int count) {\r\n                String input = txtInput.getText().toString();\r\n\r\n//below code is for when user enter 1, the 7-segment will turn 1\r\n\r\n                if (txtInput.getText().toString().equals(&quot;1&quot;)) {\r\n                    view1.setBackgroundColor(Color.WHITE);\r\n                    view2.setBackgroundColor(Color.RED);\r\n                    view3.setBackgroundColor(Color.RED);\r\n                    view4.setBackgroundColor(Color.WHITE);\r\n                    view5.setBackgroundColor(Color.WHITE);\r\n                    view6.setBackgroundColor(Color.WHITE);\r\n                    view7.setBackgroundColor(Color.WHITE);\r\n                }\r\n\r\n\r\n  [the first digit turned red as the user entered 1, how to apply this on second digit aswell ][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Z1Qdr.png","title":"how to set condition on two numbers entered in EditText in Android Studio","body":"<p>I have just started android studio, i am stuck on EditText that has to take two numbers as input from user. Basically it is used for a 7-segment display with two digits that is made by views. i am able to turn on the first digit when user enters the first number, but i don't know how to turn on the second digit when user enters second number in EditText.</p>\n<p>below is the MainActivity.java code that i've tried.</p>\n<pre><code> public void afterTextChanged(Editable s) {\n        }\n        public void beforeTextChanged(CharSequence s, int start,\n                                      int count, int after) {\n        }\n        public void onTextChanged(CharSequence s, int start,\n                                  int before, int count) {\n            String input = txtInput.getText().toString();\n</code></pre>\n<p>//below code is for when user enter 1, the 7-segment will turn 1</p>\n<pre><code>            if (txtInput.getText().toString().equals(&quot;1&quot;)) {\n                view1.setBackgroundColor(Color.WHITE);\n                view2.setBackgroundColor(Color.RED);\n                view3.setBackgroundColor(Color.RED);\n                view4.setBackgroundColor(Color.WHITE);\n                view5.setBackgroundColor(Color.WHITE);\n                view6.setBackgroundColor(Color.WHITE);\n                view7.setBackgroundColor(Color.WHITE);\n            }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Z1Qdr.png\" rel=\"nofollow noreferrer\">the first digit turned red as the user entered 1, how to apply this on second digit aswell </a></p>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1663771577,"post_id":73801405,"comment_id":130318564,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663811867,"creation_date":1663811264,"answer_id":73808500,"question_id":73801405,"body_markdown":"You should be able to modify the &quot;VM Options&quot; in the Netbeans &quot;Project &gt; Run &gt; Properties&quot; dialog.  You can add the `-Xint` option to turn off JIT compilation, so that the JVM will only interpret the bytecodes.\r\n\r\nThere are many other options that can select the JIT compiler used and adjust various optimization settings.  However (AFAIK) there is nothing that allows you to JIT compile without doing any optimization.  \r\n\r\nNote: JIT compilation **is** an optimization.\r\n\r\nYou could also learn to run your application from the command prompt.  And I think you probably ought to read this https://stackoverflow.com/questions/504103 which explains the problems of getting reliable benchmark results for Java code.","title":"How to run netbeans without java optimization?","body":"<p>You should be able to modify the &quot;VM Options&quot; in the Netbeans &quot;Project &gt; Run &gt; Properties&quot; dialog.  You can add the <code>-Xint</code> option to turn off JIT compilation, so that the JVM will only interpret the bytecodes.</p>\n<p>There are many other options that can select the JIT compiler used and adjust various optimization settings.  However (AFAIK) there is nothing that allows you to JIT compile without doing any optimization.</p>\n<p>Note: JIT compilation <strong>is</strong> an optimization.</p>\n<p>You could also learn to run your application from the command prompt.  And I think you probably ought to read this <a href=\"https://stackoverflow.com/questions/504103\">How do I write a correct micro-benchmark in Java?</a> which explains the problems of getting reliable benchmark results for Java code.</p>\n"}],"owner":{"account_id":26402328,"reputation":1,"user_id":20052608,"display_name":"chichian"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1663811867,"creation_date":1663766111,"question_id":73801405,"body_markdown":"I am working on homework where I have to show runtime of a java program and have to disable java optimization. The teacher has shown how to do it with notepad ++, but I need to disable optimization in netbeans. How can I do this?","title":"How to run netbeans without java optimization?","body":"<p>I am working on homework where I have to show runtime of a java program and have to disable java optimization. The teacher has shown how to do it with notepad ++, but I need to disable optimization in netbeans. How can I do this?</p>\n"},{"tags":["java","ascii-art"],"comments":[{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":1,"creation_date":1663811276,"post_id":73808446,"comment_id":130328851,"body_markdown":"In your own words, where the code says `String.format(&quot;%o,&quot;, count);`, what do you expect this to mean? In particular, what do you expect the `%o` part to mean?","body":"In your own words, where the code says <code>String.format(&quot;%o,&quot;, count);</code>, what do you expect this to mean? In particular, what do you expect the <code>%o</code> part to mean?"},{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":1,"creation_date":1663811469,"post_id":73808446,"comment_id":130328872,"body_markdown":"Does this answer your question? [parseInt vs printf %o format modifier](https://stackoverflow.com/questions/25530696/parseint-vs-printf-o-format-modifier)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/25530696/parseint-vs-printf-o-format-modifier\">parseInt vs printf %o format modifier</a>"},{"owner":{"account_id":18505464,"reputation":164,"user_id":13481858,"display_name":"Onur"},"score":0,"creation_date":1663811679,"post_id":73808446,"comment_id":130328899,"body_markdown":"@KarlKnechtel Im new to java and trying to get used to it, so I didn&#39;t think I was using the wrong formatting.","body":"@KarlKnechtel Im new to java and trying to get used to it, so I didn&#39;t think I was using the wrong formatting."},{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":1,"creation_date":1663811769,"post_id":73808446,"comment_id":130328908,"body_markdown":"How did you decide to use `%o`, instead of something else? It&#39;s a very strange choice to make - if you follow example code, it would be very rare to see it, and tutorials would not talk about it.","body":"How did you decide to use <code>%o</code>, instead of something else? It&#39;s a very strange choice to make - if you follow example code, it would be very rare to see it, and tutorials would not talk about it."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1663810996,"creation_date":1663810996,"answer_id":73808483,"question_id":73808446,"body_markdown":"`%o` means octal. I&#39;m not sure how you ended up on using `%o`, but, you don&#39;t want octal. Octal is how you would count if you have 8 fingers. 0, 1, 2, 3, 4, 5, 6, 7.., oh last finger, so.. 10!\r\n\r\nIn octal, &#39;12&#39; is how you write the tenth number. Just like you&#39;d use &#39;10&#39; to do that in decimal, and &#39;1010&#39; in binary.\r\n\r\nYou want `%d` for decimal.","title":"Java integer increases unintended","body":"<p><code>%o</code> means octal. I'm not sure how you ended up on using <code>%o</code>, but, you don't want octal. Octal is how you would count if you have 8 fingers. 0, 1, 2, 3, 4, 5, 6, 7.., oh last finger, so.. 10!</p>\n<p>In octal, '12' is how you write the tenth number. Just like you'd use '10' to do that in decimal, and '1010' in binary.</p>\n<p>You want <code>%d</code> for decimal.</p>\n"},{"tags":[],"owner":{"account_id":10346755,"reputation":21971,"user_id":7631480,"display_name":"CryptoFool"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1663811130,"creation_date":1663811130,"answer_id":73808494,"question_id":73808446,"body_markdown":"Your problem is with this line:\r\n\r\n    outputLine += String.format(&quot;%o,&quot;, count);\r\n\r\nThe `&quot;%o&quot;` output format specifier specifies that the value of `count` should be output in Octal.  When the decimal value of `count` is `10`, the Octal equivalent is `12`.  \r\n\r\nI expect that you want this instead:\r\n\r\n    outputLine += String.format(&quot;%d,&quot;, count);\r\n\r\nPS: When it appears that the number &quot;jumps&quot; from 7 to 10, that&#39;s because &#39;10&#39; immediately follows &#39;7&#39; in octal.","title":"Java integer increases unintended","body":"<p>Your problem is with this line:</p>\n<pre><code>outputLine += String.format(&quot;%o,&quot;, count);\n</code></pre>\n<p>The <code>&quot;%o&quot;</code> output format specifier specifies that the value of <code>count</code> should be output in Octal.  When the decimal value of <code>count</code> is <code>10</code>, the Octal equivalent is <code>12</code>.</p>\n<p>I expect that you want this instead:</p>\n<pre><code>outputLine += String.format(&quot;%d,&quot;, count);\n</code></pre>\n<p>PS: When it appears that the number &quot;jumps&quot; from 7 to 10, that's because '10' immediately follows '7' in octal.</p>\n"}],"owner":{"account_id":18505464,"reputation":164,"user_id":13481858,"display_name":"Onur"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73808494,"answer_count":2,"score":0,"last_activity_date":1663811130,"creation_date":1663810390,"question_id":73808446,"body_markdown":"I have a function that takes `String` and a `char[]` type variables as parameter.\r\n\r\n    public String compressLine(String line, char[] fileChars){\r\n      String outputLine = new String();\r\n      int count = 0;\r\n      char lastChar = fileChars[0];\r\n      for(char c : line.toCharArray()){\r\n        if(c!=lastChar){\r\n          outputLine += String.format(&quot;%o,&quot;, count);\r\n          lastChar = c;\r\n          count = 1;\r\n        }else{\r\n          count += 1;\r\n        }\r\n      }\r\n      outputLine += count;\r\n          return outputLine;\r\n    }\r\n\r\n`String line` is a line of ascii art and the `char[] fileChars` consists of the characters that are used in the string mentioned beforehand.\r\n\r\n**Example of `line`:**\r\n\r\n&gt; &quot;@@@@@@@@@@---&quot;\r\n\r\n\r\n**Example of `fileChars`:**\r\n\r\n&gt; [-, @]\r\n\r\n\r\nAlgorithm works in the following manner: given a row of data, the algorithm replaces each row with numbers that say how many consecutive pixels are the same character, always starting with the number of occurrences of the character that is encountered first in the `fileChars`.\r\n\r\nWhen I ran a test using the examples given above, It should return;\r\n\r\n&gt; `[0, 10, 3]`\r\n\r\nBut the output I get is;\r\n\r\n&gt; `[0, 12, 3]`\r\n\r\nWhen I tried to solve the bug, I saw the integer `count` somehow hops from *7* to *10*.\r\n\r\nWhat is causing this?","title":"Java integer increases unintended","body":"<p>I have a function that takes <code>String</code> and a <code>char[]</code> type variables as parameter.</p>\n<pre><code>public String compressLine(String line, char[] fileChars){\n  String outputLine = new String();\n  int count = 0;\n  char lastChar = fileChars[0];\n  for(char c : line.toCharArray()){\n    if(c!=lastChar){\n      outputLine += String.format(&quot;%o,&quot;, count);\n      lastChar = c;\n      count = 1;\n    }else{\n      count += 1;\n    }\n  }\n  outputLine += count;\n      return outputLine;\n}\n</code></pre>\n<p><code>String line</code> is a line of ascii art and the <code>char[] fileChars</code> consists of the characters that are used in the string mentioned beforehand.</p>\n<p><strong>Example of <code>line</code>:</strong></p>\n<blockquote>\n<p>&quot;@@@@@@@@@@---&quot;</p>\n</blockquote>\n<p><strong>Example of <code>fileChars</code>:</strong></p>\n<blockquote>\n<p>[-, @]</p>\n</blockquote>\n<p>Algorithm works in the following manner: given a row of data, the algorithm replaces each row with numbers that say how many consecutive pixels are the same character, always starting with the number of occurrences of the character that is encountered first in the <code>fileChars</code>.</p>\n<p>When I ran a test using the examples given above, It should return;</p>\n<blockquote>\n<p><code>[0, 10, 3]</code></p>\n</blockquote>\n<p>But the output I get is;</p>\n<blockquote>\n<p><code>[0, 12, 3]</code></p>\n</blockquote>\n<p>When I tried to solve the bug, I saw the integer <code>count</code> somehow hops from <em>7</em> to <em>10</em>.</p>\n<p>What is causing this?</p>\n"},{"tags":["java","selenium-grid","jsonpath","json-extract"],"comments":[{"owner":{"account_id":4998502,"reputation":2080,"user_id":4018180,"accept_rate":60,"display_name":"Akshay G"},"score":0,"creation_date":1656503041,"post_id":72799874,"comment_id":128587652,"body_markdown":"Can you include the jsonpath query that works online but not in java lib?","body":"Can you include the jsonpath query that works online but not in java lib?"},{"owner":{"account_id":7687582,"reputation":381,"user_id":5824795,"accept_rate":71,"display_name":"SacTan"},"score":0,"creation_date":1656504728,"post_id":72799874,"comment_id":128588298,"body_markdown":"This work online, $..slots[?(@.session= &#39;null&#39; &amp;&amp; @.stereotype.platformName==&#39;Windows 10&#39;)]","body":"This work online, $..slots[?(@.session= &#39;null&#39; &amp;&amp; @.stereotype.platformName==&#39;Windows 10&#39;)]"},{"owner":{"account_id":7687582,"reputation":381,"user_id":5824795,"accept_rate":71,"display_name":"SacTan"},"score":0,"creation_date":1656504968,"post_id":72799874,"comment_id":128588393,"body_markdown":"with reserassured JSON getting the below error, Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: Invalid JSON expression:\nScript1.groovy: 1: Unexpected input: &#39;[&#39; @ line 1, column 35.\n                            $..slots[?(@.session= &#39;null&#39; &amp;&amp; @.stereotype.platformName==&#39;Windows 10&#39;)","body":"with reserassured JSON getting the below error, Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: Invalid JSON expression: Script1.groovy: 1: Unexpected input: &#39;[&#39; @ line 1, column 35.                             $..slots[?(@.session= &#39;null&#39; &amp;&amp; @.stereotype.platformName==&#39;Windows 10&#39;)"},{"owner":{"account_id":4998502,"reputation":2080,"user_id":4018180,"accept_rate":60,"display_name":"Akshay G"},"score":0,"creation_date":1656748544,"post_id":72799874,"comment_id":128651551,"body_markdown":"try `$..slots[?(@.session == null &amp;&amp; @.stereotype.platformName == &#39;Windows 10&#39;)]`","body":"try <code>$..slots[?(@.session == null &amp;&amp; @.stereotype.platformName == &#39;Windows 10&#39;)]</code>"},{"owner":{"account_id":4998502,"reputation":2080,"user_id":4018180,"accept_rate":60,"display_name":"Akshay G"},"score":0,"creation_date":1656748653,"post_id":72799874,"comment_id":128651569,"body_markdown":"Use https://jsonpath.herokuapp.com/ Online Test Tool for Java library Jayway JSONPath","body":"Use <a href=\"https://jsonpath.herokuapp.com/\" rel=\"nofollow noreferrer\">jsonpath.herokuapp.com</a> Online Test Tool for Java library Jayway JSONPath"}],"answers":[{"tags":[],"owner":{"account_id":3989726,"reputation":45,"user_id":3289086,"display_name":"Bhanu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658056471,"creation_date":1658056471,"answer_id":73011285,"question_id":72799874,"body_markdown":"If you are using Restassured&#39;s JsonPath, i.e. &quot;io.restassured.path.json.JsonPath&quot;, please remember that it uses a Gpath expression and hence the expression for JayWay&#39;s JsonPath would not work here.\r\n\r\nFor your json payload, the below code should work using RestAssured:\r\n\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import io.restassured.path.json.JsonPath;\r\n    ...\r\n    public static int countOfSessions(String json) {\r\n    \t\tJsonPath js = new JsonPath(json);\r\n    \t\tList&lt;Map&gt; ls = js.param(&quot;sessVal&quot;, null).get(&quot;value.nodes.flatten().slots.flatten().findAll {s -&gt; s.session == sessVal}.session&quot;);\r\n    \t\treturn ls.size();\r\n    \t\t\r\n    \t}","title":"Extract the count of session with null values with condition of platform name","body":"<p>If you are using Restassured's JsonPath, i.e. &quot;io.restassured.path.json.JsonPath&quot;, please remember that it uses a Gpath expression and hence the expression for JayWay's JsonPath would not work here.</p>\n<p>For your json payload, the below code should work using RestAssured:</p>\n<pre><code>import java.util.List;\nimport java.util.Map;\nimport io.restassured.path.json.JsonPath;\n...\npublic static int countOfSessions(String json) {\n        JsonPath js = new JsonPath(json);\n        List&lt;Map&gt; ls = js.param(&quot;sessVal&quot;, null).get(&quot;value.nodes.flatten().slots.flatten().findAll {s -&gt; s.session == sessVal}.session&quot;);\n        return ls.size();\n        \n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663810580,"creation_date":1663810580,"answer_id":73808461,"question_id":72799874,"body_markdown":"You may consider another library *Josson* for the solution.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\nDeserialization\r\n\r\n    Josson josson = Josson.fromJsonString(\r\n        &quot;{&quot; +\r\n        &quot;  \\&quot;value\\&quot;: {&quot; +\r\n        &quot;    \\&quot;ready\\&quot;: true,&quot; +\r\n        &quot;    \\&quot;message\\&quot;: \\&quot;Selenium Grid ready.\\&quot;,&quot; +\r\n        &quot;    \\&quot;nodes\\&quot;: [&quot; +\r\n        &quot;      {&quot; +\r\n        &quot;        \\&quot;id\\&quot;: \\&quot;eaef55e8-18a3-490f-a6a5-0a1cce762e80\\&quot;,&quot; +\r\n        &quot;        \\&quot;uri\\&quot;: \\&quot;xyz\\&quot;,&quot; +\r\n        &quot;        \\&quot;maxSessions\\&quot;: 4,&quot; +\r\n        &quot;        \\&quot;osInfo\\&quot;: {&quot; +\r\n        &quot;          \\&quot;arch\\&quot;: \\&quot;amd64\\&quot;,&quot; +\r\n        &quot;          \\&quot;name\\&quot;: \\&quot;Windows 10\\&quot;,&quot; +\r\n        &quot;          \\&quot;version\\&quot;: \\&quot;10.0\\&quot;&quot; +\r\n        &quot;        },&quot; +\r\n        &quot;        \\&quot;heartbeatPeriod\\&quot;: 60000,&quot; +\r\n        &quot;        \\&quot;availability\\&quot;: \\&quot;UP\\&quot;,&quot; +\r\n        &quot;        \\&quot;version\\&quot;: \\&quot;4.3.0 (revision a4995e2c09*)\\&quot;,&quot; +\r\n        &quot;        \\&quot;slots\\&quot;: [&quot; +\r\n        &quot;          {&quot; +\r\n        &quot;            \\&quot;id\\&quot;: {&quot; +\r\n        &quot;              \\&quot;hostId\\&quot;: \\&quot;eaef55e8-18a3-49f-a6a5-0acce762e80\\&quot;,&quot; +\r\n        &quot;              \\&quot;id\\&quot;: \\&quot;9e4bce35-f596-476f-ab0f-b5df17e02099\\&quot;&quot; +\r\n        &quot;            },&quot; +\r\n        &quot;            \\&quot;lastStarted\\&quot;: \\&quot;1970-01-01T00:00:00Z\\&quot;,&quot; +\r\n        &quot;            \\&quot;session\\&quot;: null,&quot; +\r\n        &quot;            \\&quot;stereotype\\&quot;: {&quot; +\r\n        &quot;              \\&quot;browserName\\&quot;: \\&quot;chrome\\&quot;,&quot; +\r\n        &quot;              \\&quot;platformName\\&quot;: \\&quot;Windows 10\\&quot;&quot; +\r\n        &quot;            }&quot; +\r\n        &quot;          },&quot; +\r\n        &quot;          {&quot; +\r\n        &quot;            \\&quot;id\\&quot;: {&quot; +\r\n        &quot;              \\&quot;hostId\\&quot;: \\&quot;eaef55e8-18a3-490f-a6a5-0a5cce762e80\\&quot;,&quot; +\r\n        &quot;              \\&quot;id\\&quot;: \\&quot;bab6efd1-ed0d-450a-85db-13cbd6c8f6e6\\&quot;&quot; +\r\n        &quot;            },&quot; +\r\n        &quot;            \\&quot;lastStarted\\&quot;: \\&quot;1970-01-01T00:00:00Z\\&quot;,&quot; +\r\n        &quot;            \\&quot;session\\&quot;: null,&quot; +\r\n        &quot;            \\&quot;stereotype\\&quot;: {&quot; +\r\n        &quot;              \\&quot;browserName\\&quot;: \\&quot;chrome\\&quot;,&quot; +\r\n        &quot;              \\&quot;platformName\\&quot;: \\&quot;Windows 10\\&quot;&quot; +\r\n        &quot;            }&quot; +\r\n        &quot;          },&quot; +\r\n        &quot;          {&quot; +\r\n        &quot;            \\&quot;id\\&quot;: {&quot; +\r\n        &quot;              \\&quot;hostId\\&quot;: \\&quot;eaef55e8-18a3-490f-a6a5-0acce762e80\\&quot;,&quot; +\r\n        &quot;              \\&quot;id\\&quot;: \\&quot;5307491a-3ce7-4dc2-98b7-2e8dd1a9dbc2\\&quot;&quot; +\r\n        &quot;            },&quot; +\r\n        &quot;            \\&quot;lastStarted\\&quot;: \\&quot;1970-01-01T00:00:00Z\\&quot;,&quot; +\r\n        &quot;            \\&quot;session\\&quot;: null,&quot; +\r\n        &quot;            \\&quot;stereotype\\&quot;: {&quot; +\r\n        &quot;              \\&quot;browserName\\&quot;: \\&quot;chrome\\&quot;,&quot; +\r\n        &quot;              \\&quot;platformName\\&quot;: \\&quot;Windows 10\\&quot;&quot; +\r\n        &quot;            }&quot; +\r\n        &quot;          },&quot; +\r\n        &quot;          {&quot; +\r\n        &quot;            \\&quot;id\\&quot;: {&quot; +\r\n        &quot;              \\&quot;hostId\\&quot;: \\&quot;eaef55e8-18a3-490f-a6a5-05cce762e80\\&quot;,&quot; +\r\n        &quot;              \\&quot;id\\&quot;: \\&quot;0856bb3b-3a47-44bf-a532-4b4f0298ef95\\&quot;&quot; +\r\n        &quot;            },&quot; +\r\n        &quot;            \\&quot;lastStarted\\&quot;: \\&quot;1970-01-01T00:00:00Z\\&quot;,&quot; +\r\n        &quot;            \\&quot;session\\&quot;: null,&quot; +\r\n        &quot;            \\&quot;stereotype\\&quot;: {&quot; +\r\n        &quot;              \\&quot;browserName\\&quot;: \\&quot;chrome\\&quot;,&quot; +\r\n        &quot;              \\&quot;platformName\\&quot;: \\&quot;Windows 10\\&quot;&quot; +\r\n        &quot;            }&quot; +\r\n        &quot;          }&quot; +\r\n        &quot;        ]&quot; +\r\n        &quot;      },&quot; +\r\n        &quot;      {&quot; +\r\n        &quot;        \\&quot;id\\&quot;: \\&quot;8311f460-496b-4181-9960-19bd5cfaa125\\&quot;,&quot; +\r\n        &quot;        \\&quot;uri\\&quot;: \\&quot;http:\\\\u002f\\\\u002f172.18.32.1:5555\\&quot;,&quot; +\r\n        &quot;        \\&quot;maxSessions\\&quot;: 4,&quot; +\r\n        &quot;        \\&quot;osInfo\\&quot;: {&quot; +\r\n        &quot;          \\&quot;arch\\&quot;: \\&quot;amd64\\&quot;,&quot; +\r\n        &quot;          \\&quot;name\\&quot;: \\&quot;Windows 10\\&quot;,&quot; +\r\n        &quot;          \\&quot;version\\&quot;: \\&quot;10.0\\&quot;&quot; +\r\n        &quot;        },&quot; +\r\n        &quot;        \\&quot;heartbeatPeriod\\&quot;: 60000,&quot; +\r\n        &quot;        \\&quot;availability\\&quot;: \\&quot;UP\\&quot;,&quot; +\r\n        &quot;        \\&quot;version\\&quot;: \\&quot;4.3.0 (revision a4995e2c09*)\\&quot;,&quot; +\r\n        &quot;        \\&quot;slots\\&quot;: [&quot; +\r\n        &quot;          {&quot; +\r\n        &quot;            \\&quot;id\\&quot;: {&quot; +\r\n        &quot;              \\&quot;hostId\\&quot;: \\&quot;8311f460-496b-4181-9960-19bdcfaa125\\&quot;,&quot; +\r\n        &quot;              \\&quot;id\\&quot;: \\&quot;39b50d92-9cb8-47a1-985b-b3e965453a0d\\&quot;&quot; +\r\n        &quot;            },&quot; +\r\n        &quot;            \\&quot;lastStarted\\&quot;: \\&quot;1970-01-01T00:00:00Z\\&quot;,&quot; +\r\n        &quot;            \\&quot;session\\&quot;: null,&quot; +\r\n        &quot;            \\&quot;stereotype\\&quot;: {&quot; +\r\n        &quot;              \\&quot;browserName\\&quot;: \\&quot;chrome\\&quot;,&quot; +\r\n        &quot;              \\&quot;platformName\\&quot;: \\&quot;Windows 10\\&quot;&quot; +\r\n        &quot;            }&quot; +\r\n        &quot;          },&quot; +\r\n        &quot;          {&quot; +\r\n        &quot;            \\&quot;id\\&quot;: {&quot; +\r\n        &quot;              \\&quot;hostId\\&quot;: \\&quot;8311f460-496b-4181-990-19bdfaa125\\&quot;,&quot; +\r\n        &quot;              \\&quot;id\\&quot;: \\&quot;76e691c7-fab5-493a-bc2f-317a2776e5cf\\&quot;&quot; +\r\n        &quot;            },&quot; +\r\n        &quot;            \\&quot;lastStarted\\&quot;: \\&quot;1970-01-01T00:00:00Z\\&quot;,&quot; +\r\n        &quot;            \\&quot;session\\&quot;: null,&quot; +\r\n        &quot;            \\&quot;stereotype\\&quot;: {&quot; +\r\n        &quot;              \\&quot;browserName\\&quot;: \\&quot;chrome\\&quot;,&quot; +\r\n        &quot;              \\&quot;platformName\\&quot;: \\&quot;Windows 10\\&quot;&quot; +\r\n        &quot;            }&quot; +\r\n        &quot;          },&quot; +\r\n        &quot;          {&quot; +\r\n        &quot;            \\&quot;id\\&quot;: {&quot; +\r\n        &quot;              \\&quot;hostId\\&quot;: \\&quot;8311f460-496b-4181-9960-19bd5cfaa125\\&quot;,&quot; +\r\n        &quot;              \\&quot;id\\&quot;: \\&quot;0692a825-2b83-462e-9a5c-dfcae77c033a\\&quot;&quot; +\r\n        &quot;            },&quot; +\r\n        &quot;            \\&quot;lastStarted\\&quot;: \\&quot;1970-01-01T00:00:00Z\\&quot;,&quot; +\r\n        &quot;            \\&quot;session\\&quot;: null,&quot; +\r\n        &quot;            \\&quot;stereotype\\&quot;: {&quot; +\r\n        &quot;              \\&quot;browserName\\&quot;: \\&quot;chrome\\&quot;,&quot; +\r\n        &quot;              \\&quot;platformName\\&quot;: \\&quot;Windows 10\\&quot;&quot; +\r\n        &quot;            }&quot; +\r\n        &quot;          },&quot; +\r\n        &quot;          {&quot; +\r\n        &quot;            \\&quot;id\\&quot;: {&quot; +\r\n        &quot;              \\&quot;hostId\\&quot;: \\&quot;8311f460-496b-4181-9960-19bd5cfaa125\\&quot;,&quot; +\r\n        &quot;              \\&quot;id\\&quot;: \\&quot;10aa0cd9-e9a5-4070-87b6-52a4201e9bc0\\&quot;&quot; +\r\n        &quot;            },&quot; +\r\n        &quot;            \\&quot;lastStarted\\&quot;: \\&quot;1970-01-01T00:00:00Z\\&quot;,&quot; +\r\n        &quot;            \\&quot;session\\&quot;: null,&quot; +\r\n        &quot;            \\&quot;stereotype\\&quot;: {&quot; +\r\n        &quot;              \\&quot;browserName\\&quot;: \\&quot;chrome\\&quot;,&quot; +\r\n        &quot;              \\&quot;platformName\\&quot;: \\&quot;Windows 10\\&quot;&quot; +\r\n        &quot;            }&quot; +\r\n        &quot;          }&quot; +\r\n        &quot;        ]&quot; +\r\n        &quot;      }&quot; +\r\n        &quot;    ]&quot; +\r\n        &quot;  }&quot; +\r\n        &quot;}&quot;);\r\n\r\nQuery\r\n\r\n    // Get all the slots with session=null\r\n    JsonNode node = josson.getNode(\r\n        &quot;value.nodes.slots[session=null &amp; stereotype.platformName=&#39;Windows 10&#39;]*&quot;);\r\n    System.out.println(node.toPrettyString());\r\n\r\n    // Get the COUNT\r\n    node = josson.getNode(\r\n        &quot;value.nodes.slots[session=null &amp; stereotype.platformName=&#39;Windows 10&#39;]*.size()&quot;);\r\n    System.out.println(node.toPrettyString());\r\n\r\n    // Use wildcard search\r\n    node = josson.getNode(\r\n        &quot;*().slots[session=null &amp; stereotype.platformName=&#39;Windows 10&#39;]*.size()&quot;);\r\n    System.out.println(node.toPrettyString());\r\n","title":"Extract the count of session with null values with condition of platform name","body":"<p>You may consider another library <em>Josson</em> for the solution.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<p>Deserialization</p>\n<pre><code>Josson josson = Josson.fromJsonString(\n    &quot;{&quot; +\n    &quot;  \\&quot;value\\&quot;: {&quot; +\n    &quot;    \\&quot;ready\\&quot;: true,&quot; +\n    &quot;    \\&quot;message\\&quot;: \\&quot;Selenium Grid ready.\\&quot;,&quot; +\n    &quot;    \\&quot;nodes\\&quot;: [&quot; +\n    &quot;      {&quot; +\n    &quot;        \\&quot;id\\&quot;: \\&quot;eaef55e8-18a3-490f-a6a5-0a1cce762e80\\&quot;,&quot; +\n    &quot;        \\&quot;uri\\&quot;: \\&quot;xyz\\&quot;,&quot; +\n    &quot;        \\&quot;maxSessions\\&quot;: 4,&quot; +\n    &quot;        \\&quot;osInfo\\&quot;: {&quot; +\n    &quot;          \\&quot;arch\\&quot;: \\&quot;amd64\\&quot;,&quot; +\n    &quot;          \\&quot;name\\&quot;: \\&quot;Windows 10\\&quot;,&quot; +\n    &quot;          \\&quot;version\\&quot;: \\&quot;10.0\\&quot;&quot; +\n    &quot;        },&quot; +\n    &quot;        \\&quot;heartbeatPeriod\\&quot;: 60000,&quot; +\n    &quot;        \\&quot;availability\\&quot;: \\&quot;UP\\&quot;,&quot; +\n    &quot;        \\&quot;version\\&quot;: \\&quot;4.3.0 (revision a4995e2c09*)\\&quot;,&quot; +\n    &quot;        \\&quot;slots\\&quot;: [&quot; +\n    &quot;          {&quot; +\n    &quot;            \\&quot;id\\&quot;: {&quot; +\n    &quot;              \\&quot;hostId\\&quot;: \\&quot;eaef55e8-18a3-49f-a6a5-0acce762e80\\&quot;,&quot; +\n    &quot;              \\&quot;id\\&quot;: \\&quot;9e4bce35-f596-476f-ab0f-b5df17e02099\\&quot;&quot; +\n    &quot;            },&quot; +\n    &quot;            \\&quot;lastStarted\\&quot;: \\&quot;1970-01-01T00:00:00Z\\&quot;,&quot; +\n    &quot;            \\&quot;session\\&quot;: null,&quot; +\n    &quot;            \\&quot;stereotype\\&quot;: {&quot; +\n    &quot;              \\&quot;browserName\\&quot;: \\&quot;chrome\\&quot;,&quot; +\n    &quot;              \\&quot;platformName\\&quot;: \\&quot;Windows 10\\&quot;&quot; +\n    &quot;            }&quot; +\n    &quot;          },&quot; +\n    &quot;          {&quot; +\n    &quot;            \\&quot;id\\&quot;: {&quot; +\n    &quot;              \\&quot;hostId\\&quot;: \\&quot;eaef55e8-18a3-490f-a6a5-0a5cce762e80\\&quot;,&quot; +\n    &quot;              \\&quot;id\\&quot;: \\&quot;bab6efd1-ed0d-450a-85db-13cbd6c8f6e6\\&quot;&quot; +\n    &quot;            },&quot; +\n    &quot;            \\&quot;lastStarted\\&quot;: \\&quot;1970-01-01T00:00:00Z\\&quot;,&quot; +\n    &quot;            \\&quot;session\\&quot;: null,&quot; +\n    &quot;            \\&quot;stereotype\\&quot;: {&quot; +\n    &quot;              \\&quot;browserName\\&quot;: \\&quot;chrome\\&quot;,&quot; +\n    &quot;              \\&quot;platformName\\&quot;: \\&quot;Windows 10\\&quot;&quot; +\n    &quot;            }&quot; +\n    &quot;          },&quot; +\n    &quot;          {&quot; +\n    &quot;            \\&quot;id\\&quot;: {&quot; +\n    &quot;              \\&quot;hostId\\&quot;: \\&quot;eaef55e8-18a3-490f-a6a5-0acce762e80\\&quot;,&quot; +\n    &quot;              \\&quot;id\\&quot;: \\&quot;5307491a-3ce7-4dc2-98b7-2e8dd1a9dbc2\\&quot;&quot; +\n    &quot;            },&quot; +\n    &quot;            \\&quot;lastStarted\\&quot;: \\&quot;1970-01-01T00:00:00Z\\&quot;,&quot; +\n    &quot;            \\&quot;session\\&quot;: null,&quot; +\n    &quot;            \\&quot;stereotype\\&quot;: {&quot; +\n    &quot;              \\&quot;browserName\\&quot;: \\&quot;chrome\\&quot;,&quot; +\n    &quot;              \\&quot;platformName\\&quot;: \\&quot;Windows 10\\&quot;&quot; +\n    &quot;            }&quot; +\n    &quot;          },&quot; +\n    &quot;          {&quot; +\n    &quot;            \\&quot;id\\&quot;: {&quot; +\n    &quot;              \\&quot;hostId\\&quot;: \\&quot;eaef55e8-18a3-490f-a6a5-05cce762e80\\&quot;,&quot; +\n    &quot;              \\&quot;id\\&quot;: \\&quot;0856bb3b-3a47-44bf-a532-4b4f0298ef95\\&quot;&quot; +\n    &quot;            },&quot; +\n    &quot;            \\&quot;lastStarted\\&quot;: \\&quot;1970-01-01T00:00:00Z\\&quot;,&quot; +\n    &quot;            \\&quot;session\\&quot;: null,&quot; +\n    &quot;            \\&quot;stereotype\\&quot;: {&quot; +\n    &quot;              \\&quot;browserName\\&quot;: \\&quot;chrome\\&quot;,&quot; +\n    &quot;              \\&quot;platformName\\&quot;: \\&quot;Windows 10\\&quot;&quot; +\n    &quot;            }&quot; +\n    &quot;          }&quot; +\n    &quot;        ]&quot; +\n    &quot;      },&quot; +\n    &quot;      {&quot; +\n    &quot;        \\&quot;id\\&quot;: \\&quot;8311f460-496b-4181-9960-19bd5cfaa125\\&quot;,&quot; +\n    &quot;        \\&quot;uri\\&quot;: \\&quot;http:\\\\u002f\\\\u002f172.18.32.1:5555\\&quot;,&quot; +\n    &quot;        \\&quot;maxSessions\\&quot;: 4,&quot; +\n    &quot;        \\&quot;osInfo\\&quot;: {&quot; +\n    &quot;          \\&quot;arch\\&quot;: \\&quot;amd64\\&quot;,&quot; +\n    &quot;          \\&quot;name\\&quot;: \\&quot;Windows 10\\&quot;,&quot; +\n    &quot;          \\&quot;version\\&quot;: \\&quot;10.0\\&quot;&quot; +\n    &quot;        },&quot; +\n    &quot;        \\&quot;heartbeatPeriod\\&quot;: 60000,&quot; +\n    &quot;        \\&quot;availability\\&quot;: \\&quot;UP\\&quot;,&quot; +\n    &quot;        \\&quot;version\\&quot;: \\&quot;4.3.0 (revision a4995e2c09*)\\&quot;,&quot; +\n    &quot;        \\&quot;slots\\&quot;: [&quot; +\n    &quot;          {&quot; +\n    &quot;            \\&quot;id\\&quot;: {&quot; +\n    &quot;              \\&quot;hostId\\&quot;: \\&quot;8311f460-496b-4181-9960-19bdcfaa125\\&quot;,&quot; +\n    &quot;              \\&quot;id\\&quot;: \\&quot;39b50d92-9cb8-47a1-985b-b3e965453a0d\\&quot;&quot; +\n    &quot;            },&quot; +\n    &quot;            \\&quot;lastStarted\\&quot;: \\&quot;1970-01-01T00:00:00Z\\&quot;,&quot; +\n    &quot;            \\&quot;session\\&quot;: null,&quot; +\n    &quot;            \\&quot;stereotype\\&quot;: {&quot; +\n    &quot;              \\&quot;browserName\\&quot;: \\&quot;chrome\\&quot;,&quot; +\n    &quot;              \\&quot;platformName\\&quot;: \\&quot;Windows 10\\&quot;&quot; +\n    &quot;            }&quot; +\n    &quot;          },&quot; +\n    &quot;          {&quot; +\n    &quot;            \\&quot;id\\&quot;: {&quot; +\n    &quot;              \\&quot;hostId\\&quot;: \\&quot;8311f460-496b-4181-990-19bdfaa125\\&quot;,&quot; +\n    &quot;              \\&quot;id\\&quot;: \\&quot;76e691c7-fab5-493a-bc2f-317a2776e5cf\\&quot;&quot; +\n    &quot;            },&quot; +\n    &quot;            \\&quot;lastStarted\\&quot;: \\&quot;1970-01-01T00:00:00Z\\&quot;,&quot; +\n    &quot;            \\&quot;session\\&quot;: null,&quot; +\n    &quot;            \\&quot;stereotype\\&quot;: {&quot; +\n    &quot;              \\&quot;browserName\\&quot;: \\&quot;chrome\\&quot;,&quot; +\n    &quot;              \\&quot;platformName\\&quot;: \\&quot;Windows 10\\&quot;&quot; +\n    &quot;            }&quot; +\n    &quot;          },&quot; +\n    &quot;          {&quot; +\n    &quot;            \\&quot;id\\&quot;: {&quot; +\n    &quot;              \\&quot;hostId\\&quot;: \\&quot;8311f460-496b-4181-9960-19bd5cfaa125\\&quot;,&quot; +\n    &quot;              \\&quot;id\\&quot;: \\&quot;0692a825-2b83-462e-9a5c-dfcae77c033a\\&quot;&quot; +\n    &quot;            },&quot; +\n    &quot;            \\&quot;lastStarted\\&quot;: \\&quot;1970-01-01T00:00:00Z\\&quot;,&quot; +\n    &quot;            \\&quot;session\\&quot;: null,&quot; +\n    &quot;            \\&quot;stereotype\\&quot;: {&quot; +\n    &quot;              \\&quot;browserName\\&quot;: \\&quot;chrome\\&quot;,&quot; +\n    &quot;              \\&quot;platformName\\&quot;: \\&quot;Windows 10\\&quot;&quot; +\n    &quot;            }&quot; +\n    &quot;          },&quot; +\n    &quot;          {&quot; +\n    &quot;            \\&quot;id\\&quot;: {&quot; +\n    &quot;              \\&quot;hostId\\&quot;: \\&quot;8311f460-496b-4181-9960-19bd5cfaa125\\&quot;,&quot; +\n    &quot;              \\&quot;id\\&quot;: \\&quot;10aa0cd9-e9a5-4070-87b6-52a4201e9bc0\\&quot;&quot; +\n    &quot;            },&quot; +\n    &quot;            \\&quot;lastStarted\\&quot;: \\&quot;1970-01-01T00:00:00Z\\&quot;,&quot; +\n    &quot;            \\&quot;session\\&quot;: null,&quot; +\n    &quot;            \\&quot;stereotype\\&quot;: {&quot; +\n    &quot;              \\&quot;browserName\\&quot;: \\&quot;chrome\\&quot;,&quot; +\n    &quot;              \\&quot;platformName\\&quot;: \\&quot;Windows 10\\&quot;&quot; +\n    &quot;            }&quot; +\n    &quot;          }&quot; +\n    &quot;        ]&quot; +\n    &quot;      }&quot; +\n    &quot;    ]&quot; +\n    &quot;  }&quot; +\n    &quot;}&quot;);\n</code></pre>\n<p>Query</p>\n<pre><code>// Get all the slots with session=null\nJsonNode node = josson.getNode(\n    &quot;value.nodes.slots[session=null &amp; stereotype.platformName='Windows 10']*&quot;);\nSystem.out.println(node.toPrettyString());\n\n// Get the COUNT\nnode = josson.getNode(\n    &quot;value.nodes.slots[session=null &amp; stereotype.platformName='Windows 10']*.size()&quot;);\nSystem.out.println(node.toPrettyString());\n\n// Use wildcard search\nnode = josson.getNode(\n    &quot;*().slots[session=null &amp; stereotype.platformName='Windows 10']*.size()&quot;);\nSystem.out.println(node.toPrettyString());\n</code></pre>\n"}],"owner":{"account_id":7687582,"reputation":381,"user_id":5824795,"accept_rate":71,"display_name":"SacTan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73808461,"answer_count":2,"score":1,"last_activity_date":1663810580,"creation_date":1656498670,"question_id":72799874,"body_markdown":"I want to extract the COUNT OF session which are of null values from the below json. I tried with online json path extractor its work but the tried on java code with JsonPath lib, its showing parameter is not defind.\r\n\r\n    *{\r\n      &quot;value&quot;: {\r\n        &quot;ready&quot;: true,\r\n        &quot;message&quot;: &quot;Selenium Grid ready.&quot;,\r\n        &quot;nodes&quot;: [\r\n          {\r\n            &quot;id&quot;: &quot;eaef55e8-18a3-490f-a6a5-0a1cce762e80&quot;,\r\n            &quot;uri&quot;: &quot;xyz&quot;,\r\n            &quot;maxSessions&quot;: 4,\r\n            &quot;osInfo&quot;: {\r\n              &quot;arch&quot;: &quot;amd64&quot;,\r\n              &quot;name&quot;: &quot;Windows 10&quot;,\r\n              &quot;version&quot;: &quot;10.0&quot;\r\n            },\r\n            &quot;heartbeatPeriod&quot;: 60000,\r\n            &quot;availability&quot;: &quot;UP&quot;,\r\n            &quot;version&quot;: &quot;4.3.0 (revision a4995e2c09*)&quot;,\r\n            &quot;slots&quot;: [\r\n              {\r\n                &quot;id&quot;: {\r\n                  &quot;hostId&quot;: &quot;eaef55e8-18a3-49f-a6a5-0acce762e80&quot;,\r\n                  &quot;id&quot;: &quot;9e4bce35-f596-476f-ab0f-b5df17e02099&quot;\r\n                },\r\n                &quot;lastStarted&quot;: &quot;1970-01-01T00:00:00Z&quot;,\r\n                &quot;session&quot;: null,\r\n                &quot;stereotype&quot;: {\r\n                  &quot;browserName&quot;: &quot;chrome&quot;,\r\n                  &quot;platformName&quot;: &quot;Windows 10&quot;\r\n                }\r\n              },\r\n              {\r\n                &quot;id&quot;: {\r\n                  &quot;hostId&quot;: &quot;eaef55e8-18a3-490f-a6a5-0a5cce762e80&quot;,\r\n                  &quot;id&quot;: &quot;bab6efd1-ed0d-450a-85db-13cbd6c8f6e6&quot;\r\n                },\r\n                &quot;lastStarted&quot;: &quot;1970-01-01T00:00:00Z&quot;,\r\n                &quot;session&quot;: null,\r\n                &quot;stereotype&quot;: {\r\n                  &quot;browserName&quot;: &quot;chrome&quot;,\r\n                  &quot;platformName&quot;: &quot;Windows 10&quot;\r\n                }\r\n              },\r\n              {\r\n                &quot;id&quot;: {\r\n                  &quot;hostId&quot;: &quot;eaef55e8-18a3-490f-a6a5-0acce762e80&quot;,\r\n                  &quot;id&quot;: &quot;5307491a-3ce7-4dc2-98b7-2e8dd1a9dbc2&quot;\r\n                },\r\n                &quot;lastStarted&quot;: &quot;1970-01-01T00:00:00Z&quot;,\r\n                &quot;session&quot;: null,\r\n                &quot;stereotype&quot;: {\r\n                  &quot;browserName&quot;: &quot;chrome&quot;,\r\n                  &quot;platformName&quot;: &quot;Windows 10&quot;\r\n                }\r\n              },\r\n              {\r\n                &quot;id&quot;: {\r\n                  &quot;hostId&quot;: &quot;eaef55e8-18a3-490f-a6a5-05cce762e80&quot;,\r\n                  &quot;id&quot;: &quot;0856bb3b-3a47-44bf-a532-4b4f0298ef95&quot;\r\n                },\r\n                &quot;lastStarted&quot;: &quot;1970-01-01T00:00:00Z&quot;,\r\n                &quot;session&quot;: null,\r\n                &quot;stereotype&quot;: {\r\n                  &quot;browserName&quot;: &quot;chrome&quot;,\r\n                  &quot;platformName&quot;: &quot;Windows 10&quot;\r\n                }\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            &quot;id&quot;: &quot;8311f460-496b-4181-9960-19bd5cfaa125&quot;,\r\n            &quot;uri&quot;: &quot;http:\\u002f\\u002f172.18.32.1:5555&quot;,\r\n            &quot;maxSessions&quot;: 4,\r\n            &quot;osInfo&quot;: {\r\n              &quot;arch&quot;: &quot;amd64&quot;,\r\n              &quot;name&quot;: &quot;Windows 10&quot;,\r\n              &quot;version&quot;: &quot;10.0&quot;\r\n            },\r\n            &quot;heartbeatPeriod&quot;: 60000,\r\n            &quot;availability&quot;: &quot;UP&quot;,\r\n            &quot;version&quot;: &quot;4.3.0 (revision a4995e2c09*)&quot;,\r\n            &quot;slots&quot;: [\r\n              {\r\n                &quot;id&quot;: {\r\n                  &quot;hostId&quot;: &quot;8311f460-496b-4181-9960-19bdcfaa125&quot;,\r\n                  &quot;id&quot;: &quot;39b50d92-9cb8-47a1-985b-b3e965453a0d&quot;\r\n                },\r\n                &quot;lastStarted&quot;: &quot;1970-01-01T00:00:00Z&quot;,\r\n                &quot;session&quot;: null,\r\n                &quot;stereotype&quot;: {\r\n                  &quot;browserName&quot;: &quot;chrome&quot;,\r\n                  &quot;platformName&quot;: &quot;Windows 10&quot;\r\n                }\r\n              },\r\n              {\r\n                &quot;id&quot;: {\r\n                  &quot;hostId&quot;: &quot;8311f460-496b-4181-990-19bdfaa125&quot;,\r\n                  &quot;id&quot;: &quot;76e691c7-fab5-493a-bc2f-317a2776e5cf&quot;\r\n                },\r\n                &quot;lastStarted&quot;: &quot;1970-01-01T00:00:00Z&quot;,\r\n                &quot;session&quot;: null,\r\n                &quot;stereotype&quot;: {\r\n                  &quot;browserName&quot;: &quot;chrome&quot;,\r\n                  &quot;platformName&quot;: &quot;Windows 10&quot;\r\n                }\r\n              },\r\n              {\r\n                &quot;id&quot;: {\r\n                  &quot;hostId&quot;: &quot;8311f460-496b-4181-9960-19bd5cfaa125&quot;,\r\n                  &quot;id&quot;: &quot;0692a825-2b83-462e-9a5c-dfcae77c033a&quot;\r\n                },\r\n                &quot;lastStarted&quot;: &quot;1970-01-01T00:00:00Z&quot;,\r\n                &quot;session&quot;: null,\r\n                &quot;stereotype&quot;: {\r\n                  &quot;browserName&quot;: &quot;chrome&quot;,\r\n                  &quot;platformName&quot;: &quot;Windows 10&quot;\r\n                }\r\n              },\r\n              {\r\n                &quot;id&quot;: {\r\n                  &quot;hostId&quot;: &quot;8311f460-496b-4181-9960-19bd5cfaa125&quot;,\r\n                  &quot;id&quot;: &quot;10aa0cd9-e9a5-4070-87b6-52a4201e9bc0&quot;\r\n                },\r\n                &quot;lastStarted&quot;: &quot;1970-01-01T00:00:00Z&quot;,\r\n                &quot;session&quot;: null,\r\n                &quot;stereotype&quot;: {\r\n                  &quot;browserName&quot;: &quot;chrome&quot;,\r\n                  &quot;platformName&quot;: &quot;Windows 10&quot;\r\n                }\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    }*\r\n\r\n\r\n\r\nCould you please help me to get the exact path which will work on java too with the given condition.\r\n\r\nThank you in advance.\r\n","title":"Extract the count of session with null values with condition of platform name","body":"<p>I want to extract the COUNT OF session which are of null values from the below json. I tried with online json path extractor its work but the tried on java code with JsonPath lib, its showing parameter is not defind.</p>\n<pre><code>*{\n  &quot;value&quot;: {\n    &quot;ready&quot;: true,\n    &quot;message&quot;: &quot;Selenium Grid ready.&quot;,\n    &quot;nodes&quot;: [\n      {\n        &quot;id&quot;: &quot;eaef55e8-18a3-490f-a6a5-0a1cce762e80&quot;,\n        &quot;uri&quot;: &quot;xyz&quot;,\n        &quot;maxSessions&quot;: 4,\n        &quot;osInfo&quot;: {\n          &quot;arch&quot;: &quot;amd64&quot;,\n          &quot;name&quot;: &quot;Windows 10&quot;,\n          &quot;version&quot;: &quot;10.0&quot;\n        },\n        &quot;heartbeatPeriod&quot;: 60000,\n        &quot;availability&quot;: &quot;UP&quot;,\n        &quot;version&quot;: &quot;4.3.0 (revision a4995e2c09*)&quot;,\n        &quot;slots&quot;: [\n          {\n            &quot;id&quot;: {\n              &quot;hostId&quot;: &quot;eaef55e8-18a3-49f-a6a5-0acce762e80&quot;,\n              &quot;id&quot;: &quot;9e4bce35-f596-476f-ab0f-b5df17e02099&quot;\n            },\n            &quot;lastStarted&quot;: &quot;1970-01-01T00:00:00Z&quot;,\n            &quot;session&quot;: null,\n            &quot;stereotype&quot;: {\n              &quot;browserName&quot;: &quot;chrome&quot;,\n              &quot;platformName&quot;: &quot;Windows 10&quot;\n            }\n          },\n          {\n            &quot;id&quot;: {\n              &quot;hostId&quot;: &quot;eaef55e8-18a3-490f-a6a5-0a5cce762e80&quot;,\n              &quot;id&quot;: &quot;bab6efd1-ed0d-450a-85db-13cbd6c8f6e6&quot;\n            },\n            &quot;lastStarted&quot;: &quot;1970-01-01T00:00:00Z&quot;,\n            &quot;session&quot;: null,\n            &quot;stereotype&quot;: {\n              &quot;browserName&quot;: &quot;chrome&quot;,\n              &quot;platformName&quot;: &quot;Windows 10&quot;\n            }\n          },\n          {\n            &quot;id&quot;: {\n              &quot;hostId&quot;: &quot;eaef55e8-18a3-490f-a6a5-0acce762e80&quot;,\n              &quot;id&quot;: &quot;5307491a-3ce7-4dc2-98b7-2e8dd1a9dbc2&quot;\n            },\n            &quot;lastStarted&quot;: &quot;1970-01-01T00:00:00Z&quot;,\n            &quot;session&quot;: null,\n            &quot;stereotype&quot;: {\n              &quot;browserName&quot;: &quot;chrome&quot;,\n              &quot;platformName&quot;: &quot;Windows 10&quot;\n            }\n          },\n          {\n            &quot;id&quot;: {\n              &quot;hostId&quot;: &quot;eaef55e8-18a3-490f-a6a5-05cce762e80&quot;,\n              &quot;id&quot;: &quot;0856bb3b-3a47-44bf-a532-4b4f0298ef95&quot;\n            },\n            &quot;lastStarted&quot;: &quot;1970-01-01T00:00:00Z&quot;,\n            &quot;session&quot;: null,\n            &quot;stereotype&quot;: {\n              &quot;browserName&quot;: &quot;chrome&quot;,\n              &quot;platformName&quot;: &quot;Windows 10&quot;\n            }\n          }\n        ]\n      },\n      {\n        &quot;id&quot;: &quot;8311f460-496b-4181-9960-19bd5cfaa125&quot;,\n        &quot;uri&quot;: &quot;http:\\u002f\\u002f172.18.32.1:5555&quot;,\n        &quot;maxSessions&quot;: 4,\n        &quot;osInfo&quot;: {\n          &quot;arch&quot;: &quot;amd64&quot;,\n          &quot;name&quot;: &quot;Windows 10&quot;,\n          &quot;version&quot;: &quot;10.0&quot;\n        },\n        &quot;heartbeatPeriod&quot;: 60000,\n        &quot;availability&quot;: &quot;UP&quot;,\n        &quot;version&quot;: &quot;4.3.0 (revision a4995e2c09*)&quot;,\n        &quot;slots&quot;: [\n          {\n            &quot;id&quot;: {\n              &quot;hostId&quot;: &quot;8311f460-496b-4181-9960-19bdcfaa125&quot;,\n              &quot;id&quot;: &quot;39b50d92-9cb8-47a1-985b-b3e965453a0d&quot;\n            },\n            &quot;lastStarted&quot;: &quot;1970-01-01T00:00:00Z&quot;,\n            &quot;session&quot;: null,\n            &quot;stereotype&quot;: {\n              &quot;browserName&quot;: &quot;chrome&quot;,\n              &quot;platformName&quot;: &quot;Windows 10&quot;\n            }\n          },\n          {\n            &quot;id&quot;: {\n              &quot;hostId&quot;: &quot;8311f460-496b-4181-990-19bdfaa125&quot;,\n              &quot;id&quot;: &quot;76e691c7-fab5-493a-bc2f-317a2776e5cf&quot;\n            },\n            &quot;lastStarted&quot;: &quot;1970-01-01T00:00:00Z&quot;,\n            &quot;session&quot;: null,\n            &quot;stereotype&quot;: {\n              &quot;browserName&quot;: &quot;chrome&quot;,\n              &quot;platformName&quot;: &quot;Windows 10&quot;\n            }\n          },\n          {\n            &quot;id&quot;: {\n              &quot;hostId&quot;: &quot;8311f460-496b-4181-9960-19bd5cfaa125&quot;,\n              &quot;id&quot;: &quot;0692a825-2b83-462e-9a5c-dfcae77c033a&quot;\n            },\n            &quot;lastStarted&quot;: &quot;1970-01-01T00:00:00Z&quot;,\n            &quot;session&quot;: null,\n            &quot;stereotype&quot;: {\n              &quot;browserName&quot;: &quot;chrome&quot;,\n              &quot;platformName&quot;: &quot;Windows 10&quot;\n            }\n          },\n          {\n            &quot;id&quot;: {\n              &quot;hostId&quot;: &quot;8311f460-496b-4181-9960-19bd5cfaa125&quot;,\n              &quot;id&quot;: &quot;10aa0cd9-e9a5-4070-87b6-52a4201e9bc0&quot;\n            },\n            &quot;lastStarted&quot;: &quot;1970-01-01T00:00:00Z&quot;,\n            &quot;session&quot;: null,\n            &quot;stereotype&quot;: {\n              &quot;browserName&quot;: &quot;chrome&quot;,\n              &quot;platformName&quot;: &quot;Windows 10&quot;\n            }\n          }\n        ]\n      }\n    ]\n  }\n}*\n</code></pre>\n<p>Could you please help me to get the exact path which will work on java too with the given condition.</p>\n<p>Thank you in advance.</p>\n"},{"tags":["java","audio","fft","frequency"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1663806496,"post_id":73808139,"comment_id":130328195,"body_markdown":"This all depends on the code that generates that array.  What are the indexes of the array supposed to be?  If you&#39;re doing an FFT, I&#39;d expect each index to represent a different frequency; and all you have to do is select the index of the largest number in the array.","body":"This all depends on the code that generates that array.  What are the indexes of the array supposed to be?  If you&#39;re doing an FFT, I&#39;d expect each index to represent a different frequency; and all you have to do is select the index of the largest number in the array."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1663807000,"post_id":73808139,"comment_id":130328252,"body_markdown":"Incidentally, it&#39;s really better if you _don&#39;t_ delete your previous questions as you do more work on this project.  They might just be useful to somebody else.  Also, somebody might be partway through answering at the time you do the delete.","body":"Incidentally, it&#39;s really better if you <i>don&#39;t</i> delete your previous questions as you do more work on this project.  They might just be useful to somebody else.  Also, somebody might be partway through answering at the time you do the delete."},{"owner":{"account_id":15778010,"reputation":134,"user_id":11385284,"display_name":"SprintKeyz"},"score":0,"creation_date":1663810634,"post_id":73808139,"comment_id":130328756,"body_markdown":"@DawoodibnKareem Sorry for deleting those old questions, I assumed they weren&#39;t specific enough for StackOverflow. Yes, the indexes do represent frequencies! My problem is (was) that the Largest index is always zero. To fix this, I tried forcing the largest index to 64 or greater, but it was then spitting out random values. However, I have now tried setting the largest index to be a minimum of 1, and it seems to be working better. If I find a full solution that works well, I will be sure to post it as a solution here for others to benefit from. Thanks for the help!","body":"@DawoodibnKareem Sorry for deleting those old questions, I assumed they weren&#39;t specific enough for StackOverflow. Yes, the indexes do represent frequencies! My problem is (was) that the Largest index is always zero. To fix this, I tried forcing the largest index to 64 or greater, but it was then spitting out random values. However, I have now tried setting the largest index to be a minimum of 1, and it seems to be working better. If I find a full solution that works well, I will be sure to post it as a solution here for others to benefit from. Thanks for the help!"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1663811754,"post_id":73808139,"comment_id":130328907,"body_markdown":"It&#39;s OK.  I was only keeping an eye on your questions because I intend to do something related to this myself, at some point in the future.  I wonder if [this question](https://stackoverflow.com/q/4364823/1081110) might have some answers that are useful to you, even though it&#39;s not in Java.","body":"It&#39;s OK.  I was only keeping an eye on your questions because I intend to do something related to this myself, at some point in the future.  I wonder if <a href=\"https://stackoverflow.com/q/4364823/1081110\">this question</a> might have some answers that are useful to you, even though it&#39;s not in Java."},{"owner":{"account_id":15778010,"reputation":134,"user_id":11385284,"display_name":"SprintKeyz"},"score":0,"creation_date":1663849921,"post_id":73808139,"comment_id":130339251,"body_markdown":"That question is actually extremely helpful, I can now convert my array indexes to frequencies. However, for some reason, the frequency doesn&#39;t change when I play certain frequencies to the mic via a saxophone. Talking, however, does change it. Is there a reason for this? I have a pretty good mic.","body":"That question is actually extremely helpful, I can now convert my array indexes to frequencies. However, for some reason, the frequency doesn&#39;t change when I play certain frequencies to the mic via a saxophone. Talking, however, does change it. Is there a reason for this? I have a pretty good mic."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1663901033,"post_id":73808139,"comment_id":130353255,"body_markdown":"I don&#39;t know.  I&#39;m wondering if, when you talk, you&#39;re picking up formant frequencies rather than the fundamental.  Does the frequency change if you speak or sing the same vowel at a higher pitch?  How about if you speak or sing a different vowel at the same pitch?  Very roughly speaking, for human speech or song, the fundamental frequency gives you the pitch, and the first two formant frequencies tell you the vowel.","body":"I don&#39;t know.  I&#39;m wondering if, when you talk, you&#39;re picking up formant frequencies rather than the fundamental.  Does the frequency change if you speak or sing the same vowel at a higher pitch?  How about if you speak or sing a different vowel at the same pitch?  Very roughly speaking, for human speech or song, the fundamental frequency gives you the pitch, and the first two formant frequencies tell you the vowel."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1663901576,"post_id":73808139,"comment_id":130353327,"body_markdown":"Also, be aware that a change in pitch of one semitone is only about a 5.9% increase in frequency, and it&#39;s possible that you don&#39;t have enough array indexes to measure it accurately enough.  So for example, if you have a tenor sax and you play the B that&#39;s notated on the third line of the treble stave, this corresponds to a frequency of 220Hz.  Now if you go up a semitone, and play C, you&#39;re getting a frequency of 233Hz.  Do you have enough indexes to distinguish these?","body":"Also, be aware that a change in pitch of one semitone is only about a 5.9% increase in frequency, and it&#39;s possible that you don&#39;t have enough array indexes to measure it accurately enough.  So for example, if you have a tenor sax and you play the B that&#39;s notated on the third line of the treble stave, this corresponds to a frequency of 220Hz.  Now if you go up a semitone, and play C, you&#39;re getting a frequency of 233Hz.  Do you have enough indexes to distinguish these?"}],"owner":{"account_id":15778010,"reputation":134,"user_id":11385284,"display_name":"SprintKeyz"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663810421,"creation_date":1663806230,"question_id":73808139,"body_markdown":"I have code to apply an FFT to mic audio and get an array of magnitudes out of it, but how would I go about converting these magnitudes to a frequency?\r\n\r\nHere&#39;s my code:\r\n\r\n```\r\nfinal double[] magnitudes = toMagnitudes(real, imaginary);\r\n\r\nSystem.out.println(&quot;Largest index: &quot; + maxIndex(magnitudes));\r\n```\r\n\r\nAnd the functions:\r\n\r\n```\r\npublic static int maxIndex(double[] array) {\r\n    int maxIndex = 0;\r\n    for (int i = 0; i &lt; array.length; i++) {\r\n    \tif (array[i] &gt; array[maxIndex]) {\r\n    \t\tmaxIndex = i;\r\n    \t}\r\n    }\r\n    return maxIndex;\r\n}\r\n\r\nprivate static double[] toMagnitudes(final float[] realPart, final float[] imaginaryPart) {\r\n    final double[] powers = new double[realPart.length / 2];\r\n    for (int i = 0; i &lt; powers.length; i++) {\r\n            powers[i] = Math.sqrt(realPart[i] * realPart[i] + imaginaryPart[i] * imaginaryPart[i]);\r\n    }\r\n    return powers;\r\n}\r\n```\r\n\r\nCurrently, the largest index of the array is always 0. I have no idea how I&#39;d resolve this (or convert this to a frequency), but it is annoying me quite a bit. Thanks for any help!","title":"Getting frequency of largest magnitude from FFT","body":"<p>I have code to apply an FFT to mic audio and get an array of magnitudes out of it, but how would I go about converting these magnitudes to a frequency?</p>\n<p>Here's my code:</p>\n<pre><code>final double[] magnitudes = toMagnitudes(real, imaginary);\n\nSystem.out.println(&quot;Largest index: &quot; + maxIndex(magnitudes));\n</code></pre>\n<p>And the functions:</p>\n<pre><code>public static int maxIndex(double[] array) {\n    int maxIndex = 0;\n    for (int i = 0; i &lt; array.length; i++) {\n        if (array[i] &gt; array[maxIndex]) {\n            maxIndex = i;\n        }\n    }\n    return maxIndex;\n}\n\nprivate static double[] toMagnitudes(final float[] realPart, final float[] imaginaryPart) {\n    final double[] powers = new double[realPart.length / 2];\n    for (int i = 0; i &lt; powers.length; i++) {\n            powers[i] = Math.sqrt(realPart[i] * realPart[i] + imaginaryPart[i] * imaginaryPart[i]);\n    }\n    return powers;\n}\n</code></pre>\n<p>Currently, the largest index of the array is always 0. I have no idea how I'd resolve this (or convert this to a frequency), but it is annoying me quite a bit. Thanks for any help!</p>\n"},{"tags":["java","cocos2d-x","cocos2d-js"],"answers":[{"tags":[],"owner":{"account_id":166184,"reputation":1852,"user_id":390150,"accept_rate":67,"display_name":"saiy2k"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1663809319,"creation_date":1663809319,"answer_id":73808363,"question_id":73789567,"body_markdown":"Got this working with Java 1.7 and Apache ant 1.9\r\n\r\nAs defined in /tools/cocos2d-console/plugins/plugin_compile/build_web/__init__.py, cocos2dx 3.17.2 works only with Java 1.6 or 1.7","title":"Issue with compiling a cocos2d-x 3.17.2 JS/web project","body":"<p>Got this working with Java 1.7 and Apache ant 1.9</p>\n<p>As defined in /tools/cocos2d-console/plugins/plugin_compile/build_web/<strong>init</strong>.py, cocos2dx 3.17.2 works only with Java 1.6 or 1.7</p>\n"}],"owner":{"account_id":166184,"reputation":1852,"user_id":390150,"accept_rate":67,"display_name":"saiy2k"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73808363,"answer_count":1,"score":0,"last_activity_date":1663809319,"creation_date":1663689650,"question_id":73789567,"body_markdown":"Cross-posting from [https://discuss.cocos2d-x.org/t/issue-with-compiling-a-project/57198][1]\r\n\r\nI am having an issue trying to compile a new cocos2dx JS project.\r\n\r\nI have a fresh Ubuntu 18.04 box setup with Java 1.8, Cmake, and all other dependencies as mentioned @ [https://docs.cocos.com/cocos2d-x/manual/en/installation/Linux.html][2]\r\n\r\nNow when I create and run new projects with\r\n\r\n```\r\ncocos new -l js test\r\ncd test\r\ncocos run -p web\r\n```\r\nIt works flawlessly.\r\n\r\nBut when I try to compile with\r\n`cocos compile -p web -m release`\r\nI am getting\r\n\r\n```\r\nBuilding mode: release\r\nNo valid JDK found\r\n```\r\n\r\nI tried adding \r\n\r\n```\r\nJAVA_HOME=&quot;/usr/lib/jvm/java-8-openjdk-amd64&quot;\r\nexport PATH=$JAVA_HOME:$PATH\r\n```\r\n and then\r\n\r\n```\r\nJAVA_HOME=&quot;/usr/lib/jvm/java-8-openjdk-amd64/jre&quot;\r\nexport PATH=$JAVA_HOME:$PATH\r\n```\r\nand then\r\n```\r\nJAVA_HOME=&quot;/usr/lib/jvm/java-8-openjdk-amd64/jre/bin&quot;\r\nexport PATH=$JAVA_HOME:$PATH\r\n```\r\nWith each of above settings, sourced .bashrc and tried running\r\n`cocos compile -p web -m release`\r\nonly to get\r\n\r\n```\r\nBuilding mode: release\r\nNo valid JDK found\r\n```\r\n\r\nAny hint on what am I doing wrong? Highly appreciate any responses.\r\n\r\nThanks.\r\n\r\n\r\n  [1]: https://discuss.cocos2d-x.org/t/issue-with-compiling-a-project/57198\r\n  [2]: https://docs.cocos.com/cocos2d-x/manual/en/installation/Linux.html","title":"Issue with compiling a cocos2d-x 3.17.2 JS/web project","body":"<p>Cross-posting from <a href=\"https://discuss.cocos2d-x.org/t/issue-with-compiling-a-project/57198\" rel=\"nofollow noreferrer\">https://discuss.cocos2d-x.org/t/issue-with-compiling-a-project/57198</a></p>\n<p>I am having an issue trying to compile a new cocos2dx JS project.</p>\n<p>I have a fresh Ubuntu 18.04 box setup with Java 1.8, Cmake, and all other dependencies as mentioned @ <a href=\"https://docs.cocos.com/cocos2d-x/manual/en/installation/Linux.html\" rel=\"nofollow noreferrer\">https://docs.cocos.com/cocos2d-x/manual/en/installation/Linux.html</a></p>\n<p>Now when I create and run new projects with</p>\n<pre><code>cocos new -l js test\ncd test\ncocos run -p web\n</code></pre>\n<p>It works flawlessly.</p>\n<p>But when I try to compile with\n<code>cocos compile -p web -m release</code>\nI am getting</p>\n<pre><code>Building mode: release\nNo valid JDK found\n</code></pre>\n<p>I tried adding</p>\n<pre><code>JAVA_HOME=&quot;/usr/lib/jvm/java-8-openjdk-amd64&quot;\nexport PATH=$JAVA_HOME:$PATH\n</code></pre>\n<p>and then</p>\n<pre><code>JAVA_HOME=&quot;/usr/lib/jvm/java-8-openjdk-amd64/jre&quot;\nexport PATH=$JAVA_HOME:$PATH\n</code></pre>\n<p>and then</p>\n<pre><code>JAVA_HOME=&quot;/usr/lib/jvm/java-8-openjdk-amd64/jre/bin&quot;\nexport PATH=$JAVA_HOME:$PATH\n</code></pre>\n<p>With each of above settings, sourced .bashrc and tried running\n<code>cocos compile -p web -m release</code>\nonly to get</p>\n<pre><code>Building mode: release\nNo valid JDK found\n</code></pre>\n<p>Any hint on what am I doing wrong? Highly appreciate any responses.</p>\n<p>Thanks.</p>\n"},{"tags":["java","maven","user-interface","intellij-idea","executable-jar"],"comments":[{"owner":{"account_id":2167335,"reputation":2113,"user_id":1920161,"accept_rate":76,"display_name":"Nikola"},"score":0,"creation_date":1512745664,"post_id":41373882,"comment_id":82394250,"body_markdown":"did you find any solution?","body":"did you find any solution?"}],"answers":[{"tags":[],"owner":{"account_id":3025334,"reputation":2293,"user_id":2565484,"display_name":"code"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1482992594,"creation_date":1482992594,"answer_id":41374234,"question_id":41373882,"body_markdown":"**First possibility:**\r\n\r\n    frame.setContentPane(panel1);\r\nHere, `pane1` is not initialized and it is null.\r\n\r\n**Second possibility:**\r\n\r\n    String str = txtTest.getText();\r\n    JOptionPane.showMessageDialog(null, str);\r\n\r\nYou are passing `null` to showMessageDialog() where it expects the parent `Component`.","title":"GUI Application in IntelliJ IDEA using Maven: Throws NullPointerException after built into a jar","body":"<p><strong>First possibility:</strong></p>\n\n<pre><code>frame.setContentPane(panel1);\n</code></pre>\n\n<p>Here, <code>pane1</code> is not initialized and it is null.</p>\n\n<p><strong>Second possibility:</strong></p>\n\n<pre><code>String str = txtTest.getText();\nJOptionPane.showMessageDialog(null, str);\n</code></pre>\n\n<p>You are passing <code>null</code> to showMessageDialog() where it expects the parent <code>Component</code>.</p>\n"},{"tags":[],"owner":{"account_id":7029331,"reputation":1,"user_id":5385640,"display_name":"Stevecaboose"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589064281,"creation_date":1588997587,"answer_id":61691701,"question_id":41373882,"body_markdown":"I came across this issue when I was using `IntelliJ` to convert my project to a `maven` one. This process automatically created package folders and put my src files in it. So I added the package to the top of all my files. But this caused the exact same error when my JFrame was working fine before. Turns out in the form file, in the XML, the binding was wrong because now I was using packages\r\n\r\n    &lt;form xmlns=&quot;http://www.intellij.com/uidesigner/form/&quot; version=&quot;1&quot; bind-to-class=&quot;TestUI&quot;&gt;\r\n\r\nI changed the `bind-to-class` attribute to correctly include the new package. This post is old but it might help someone looking through here in the future.","title":"GUI Application in IntelliJ IDEA using Maven: Throws NullPointerException after built into a jar","body":"<p>I came across this issue when I was using <code>IntelliJ</code> to convert my project to a <code>maven</code> one. This process automatically created package folders and put my src files in it. So I added the package to the top of all my files. But this caused the exact same error when my JFrame was working fine before. Turns out in the form file, in the XML, the binding was wrong because now I was using packages</p>\n\n<pre><code>&lt;form xmlns=\"http://www.intellij.com/uidesigner/form/\" version=\"1\" bind-to-class=\"TestUI\"&gt;\n</code></pre>\n\n<p>I changed the <code>bind-to-class</code> attribute to correctly include the new package. This post is old but it might help someone looking through here in the future.</p>\n"},{"tags":[],"owner":{"account_id":4165150,"reputation":3628,"user_id":3414257,"accept_rate":80,"display_name":"panoet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663807790,"creation_date":1663807790,"answer_id":73808261,"question_id":41373882,"body_markdown":"Your candidate solution didn&#39;t work for me. \r\n\r\nAfter research, this happen only if we compile using maven. If we compile using Intellij, everything goes fine. So my only solution is doing this step when packaging.\r\n\r\n 1. Clean using Maven to make sure every compiled class cleared\r\n 2. Build using built-in Intellij\r\n 3. Package using Maven\r\n\r\n\r\n\r\n ","title":"GUI Application in IntelliJ IDEA using Maven: Throws NullPointerException after built into a jar","body":"<p>Your candidate solution didn't work for me.</p>\n<p>After research, this happen only if we compile using maven. If we compile using Intellij, everything goes fine. So my only solution is doing this step when packaging.</p>\n<ol>\n<li>Clean using Maven to make sure every compiled class cleared</li>\n<li>Build using built-in Intellij</li>\n<li>Package using Maven</li>\n</ol>\n"}],"owner":{"account_id":3762449,"reputation":1696,"user_id":3126973,"accept_rate":54,"display_name":"Romeo Sierra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1872,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1663807790,"creation_date":1482990885,"question_id":41373882,"body_markdown":"A similar question to this has been asked [here][1] about an year back. However, I find that the particular question has some missing details and points, and it has no proper answer given. So I am re-raising the same.\r\n\r\nI have created a Maven project in IntelliJ IDEA and added a GUI form into that. By default IDEA creates a separate XML file for the structure of the form. Mine appears as follows.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;form xmlns=&quot;http://www.intellij.com/uidesigner/form/&quot; version=&quot;1&quot; bind-to-class=&quot;TestUI&quot;&gt;\r\n      &lt;grid id=&quot;27dc6&quot; binding=&quot;panel1&quot; default-binding=&quot;true&quot; layout-manager=&quot;GridLayoutManager&quot; row-count=&quot;1&quot; column-count=&quot;1&quot; same-size-horizontally=&quot;false&quot; same-size-vertically=&quot;false&quot; hgap=&quot;-1&quot; vgap=&quot;-1&quot;&gt;\r\n        &lt;margin top=&quot;0&quot; left=&quot;0&quot; bottom=&quot;0&quot; right=&quot;0&quot;/&gt;\r\n        &lt;constraints&gt;\r\n          &lt;xy x=&quot;20&quot; y=&quot;20&quot; width=&quot;500&quot; height=&quot;400&quot;/&gt;\r\n        &lt;/constraints&gt;\r\n        &lt;properties/&gt;\r\n        &lt;border type=&quot;none&quot;/&gt;\r\n        &lt;children&gt;\r\n          &lt;component id=&quot;e40aa&quot; class=&quot;javax.swing.JTextField&quot; binding=&quot;txtTest&quot;&gt;\r\n            &lt;constraints&gt;\r\n              &lt;grid row=&quot;0&quot; column=&quot;0&quot; row-span=&quot;1&quot; col-span=&quot;1&quot; vsize-policy=&quot;0&quot; hsize-policy=&quot;6&quot; anchor=&quot;8&quot; fill=&quot;1&quot; indent=&quot;0&quot; use-parent-layout=&quot;false&quot;&gt;\r\n                &lt;preferred-size width=&quot;150&quot; height=&quot;-1&quot;/&gt;\r\n              &lt;/grid&gt;\r\n            &lt;/constraints&gt;\r\n            &lt;properties/&gt;\r\n          &lt;/component&gt;\r\n        &lt;/children&gt;\r\n      &lt;/grid&gt;\r\n    &lt;/form&gt;\r\n\r\nThis has a class bound to it which appears as follows.\r\n\r\n    import javax.swing.*;\r\n\r\n    public class TestUI {\r\n        private JTextField txtTest;\r\n        private JPanel panel1;\r\n\r\n        public TestUI() {\r\n            String str = txtTest.getText();\r\n            JOptionPane.showMessageDialog(null, str);\r\n            createAndShowGui();\r\n\r\n            txtTest.addActionListener(new ActionListener(){\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    JOptionPane.showMessageDialog(null, &quot;Clicked&quot;);\r\n                }\r\n            });\r\n        }\r\n\r\n        private  void createAndShowGui(){\r\n            JFrame frame = new JFrame(&quot;test&quot;);\r\n            frame.setContentPane(panel1);\r\n            frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\r\n            frame.pack();\r\n            frame.setVisible(true);\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n            TestUI obj = new TestUI();\r\n        }\r\n    }\r\n\r\nPOM.xml for this project originally looks like follows.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n        &lt;groupId&gt;com.company.test&lt;/groupId&gt;\r\n        &lt;artifactId&gt;UITestWithIJ&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.6.0&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;1.8&lt;/source&gt;\r\n                        &lt;target&gt;1.8&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.6&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;descriptorRefs&gt;\r\n                            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n                        &lt;/descriptorRefs&gt;\r\n                        &lt;archive&gt;\r\n                            &lt;manifest&gt;\r\n                                &lt;mainClass&gt;TestUI&lt;/mainClass&gt;\r\n                            &lt;/manifest&gt;\r\n                        &lt;/archive&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;make-assembly&lt;/id&gt;\r\n                            &lt;phase&gt;package&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;single&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nWhen this is run in IDEA, it works flawless. So I have built it into a fat jar via Maven using the assembly plugin. Then the problems started to jump out. When the jar created by Maven is executed, it throws a NullPointerException which appears as follows.\r\n\r\n    user@group-PC09:~/.m2/repository/com/company/test/UITestWithIJ/1.0-SNAPSHOT$ java -jar UITestWithIJ-1.0-SNAPSHOT-jar-with-dependencies.jar \r\n    Exception in thread &quot;main&quot; java.lang.NullPointerException\r\n\t    at TestUI.&lt;init&gt;(TestUI.java:13)\r\n\t    at TestUI.main(TestUI.java:34)\r\n\r\nDeeper I dug, I found that the reason for this is the line #13 that which is having `txtTest` identifier in it. This identifier by no mean is initialized. Hence it takes the default value `null`. So I realized that the problem is actually with IDEA and I simply need to transform the `.form` file generated by IDEA into some format that JVM alone could read.\r\n\r\nUpon research I could find a candidate solution [here][2]. According to the instructions therein, I have modified my POM.xml as follows.\r\n\r\n - Added the following dependency\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.intellij&lt;/groupId&gt;\r\n            &lt;artifactId&gt;forms_rt&lt;/artifactId&gt;\r\n            &lt;version&gt;7.0.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n - Added the following plugin\r\n\r\n        &lt;plugin&gt;\r\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n            &lt;artifactId&gt;ideauidesigner-maven-plugin&lt;/artifactId&gt;\r\n            &lt;executions&gt;\r\n                &lt;execution&gt;\r\n                    &lt;goals&gt;\r\n                        &lt;goal&gt;javac2&lt;/goal&gt;\r\n                    &lt;/goals&gt;\r\n                &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n\r\n            &lt;configuration&gt;\r\n                &lt;fork&gt;true&lt;/fork&gt;\r\n                &lt;debug&gt;true&lt;/debug&gt;\r\n                &lt;failOnError&gt;true&lt;/failOnError&gt;\r\n            &lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n\r\nThis has resolved the problem. However, in the TestUI.java you see that there is an event listener added. This could be replaced with a lambda expression from Java 8 forth. Once I have done that replacement, Maven fails to build the jar, throwing the following errors.\r\n\r\n\tuser@group-PC09:~/IdeaProjects/UITestWithIJ$ mvn clean install\r\n\t[INFO] Scanning for projects...\r\n\t[WARNING] \r\n\t[WARNING] Some problems were encountered while building the effective model for com.company.test:UITestWithIJ:jar:1.0-SNAPSHOT\r\n\t[WARNING] &#39;build.plugins.plugin.version&#39; for org.codehaus.mojo:ideauidesigner-maven-plugin is missing. @ line 53, column 21\r\n\t[WARNING] \r\n\t[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.\r\n\t[WARNING] \r\n\t[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.\r\n\t[WARNING] \r\n\t[INFO]                                                                         \r\n\t[INFO] ------------------------------------------------------------------------\r\n\t[INFO] Building UITestWithIJ 1.0-SNAPSHOT\r\n\t[INFO] ------------------------------------------------------------------------\r\n\t[INFO] \r\n\t[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ UITestWithIJ ---\r\n\t[INFO] Deleting /home/user/IdeaProjects/UITestWithIJ/target\r\n\t[INFO] \r\n\t[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ UITestWithIJ ---\r\n\t[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!\r\n\t[INFO] Copying 0 resource\r\n\t[INFO] \r\n\t[INFO] --- maven-compiler-plugin:3.6.0:compile (default-compile) @ UITestWithIJ ---\r\n\t[INFO] Changes detected - recompiling the module!\r\n\t[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!\r\n\t[INFO] Compiling 1 source file to /home/user/IdeaProjects/UITestWithIJ/target/classes\r\n\t[INFO] \r\n\t[INFO] --- ideauidesigner-maven-plugin:1.0-beta-1:javac2 (default) @ UITestWithIJ ---\r\n\t[INFO] Executing IDEA UI Designer task...\r\n\t[INFO] ------------------------------------------------------------------------\r\n\t[INFO] BUILD FAILURE\r\n\t[INFO] ------------------------------------------------------------------------\r\n\t[INFO] Total time: 1.227 s\r\n\t[INFO] Finished at: 2016-12-29T11:11:43+05:30\r\n\t[INFO] Final Memory: 17M/205M\r\n\t[INFO] ------------------------------------------------------------------------\r\n\t[ERROR] Failed to execute goal org.codehaus.mojo:ideauidesigner-maven-plugin:1.0-beta-1:javac2 (default) on project UITestWithIJ: Execution default of goal org.codehaus.mojo:ideauidesigner-maven-plugin:1.0-beta-1:javac2 failed: 52264 -&gt; [Help 1]\r\n\t[ERROR] \r\n\t[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n\t[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n\t[ERROR] \r\n\t[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n\t[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException\r\n\r\nI have retired the same with -X switch and found that what actually fails here is the maven goal `javac2` for the plugin `ideauidesigner-maven-plugin` and the only possible cause for that is the lambda expression. A method in the plugin throws an `ArrayIndexOutOfBoundsException` I have checked this and the dependency `forms_rt` in Maven repository and I noticed that those are last updated in 2009 and 2010. May be the plugin is incapable of handling lambda expression.\r\n\r\nFollowing are my questions.\r\n\r\n - Am I doing something wrong?\r\n - Is there a fix for this?\r\n - Is there a viable alternative for this?\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/32747917/3126973\r\n  [2]: http://glxn.net/2010/08/17/making-a-swing-project-using-intellij-idea-and-gui-builder-with-maven-including-executable-jar/","title":"GUI Application in IntelliJ IDEA using Maven: Throws NullPointerException after built into a jar","body":"<p>A similar question to this has been asked <a href=\"https://stackoverflow.com/q/32747917/3126973\">here</a> about an year back. However, I find that the particular question has some missing details and points, and it has no proper answer given. So I am re-raising the same.</p>\n\n<p>I have created a Maven project in IntelliJ IDEA and added a GUI form into that. By default IDEA creates a separate XML file for the structure of the form. Mine appears as follows.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;form xmlns=\"http://www.intellij.com/uidesigner/form/\" version=\"1\" bind-to-class=\"TestUI\"&gt;\n  &lt;grid id=\"27dc6\" binding=\"panel1\" default-binding=\"true\" layout-manager=\"GridLayoutManager\" row-count=\"1\" column-count=\"1\" same-size-horizontally=\"false\" same-size-vertically=\"false\" hgap=\"-1\" vgap=\"-1\"&gt;\n    &lt;margin top=\"0\" left=\"0\" bottom=\"0\" right=\"0\"/&gt;\n    &lt;constraints&gt;\n      &lt;xy x=\"20\" y=\"20\" width=\"500\" height=\"400\"/&gt;\n    &lt;/constraints&gt;\n    &lt;properties/&gt;\n    &lt;border type=\"none\"/&gt;\n    &lt;children&gt;\n      &lt;component id=\"e40aa\" class=\"javax.swing.JTextField\" binding=\"txtTest\"&gt;\n        &lt;constraints&gt;\n          &lt;grid row=\"0\" column=\"0\" row-span=\"1\" col-span=\"1\" vsize-policy=\"0\" hsize-policy=\"6\" anchor=\"8\" fill=\"1\" indent=\"0\" use-parent-layout=\"false\"&gt;\n            &lt;preferred-size width=\"150\" height=\"-1\"/&gt;\n          &lt;/grid&gt;\n        &lt;/constraints&gt;\n        &lt;properties/&gt;\n      &lt;/component&gt;\n    &lt;/children&gt;\n  &lt;/grid&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>This has a class bound to it which appears as follows.</p>\n\n<pre><code>import javax.swing.*;\n\npublic class TestUI {\n    private JTextField txtTest;\n    private JPanel panel1;\n\n    public TestUI() {\n        String str = txtTest.getText();\n        JOptionPane.showMessageDialog(null, str);\n        createAndShowGui();\n\n        txtTest.addActionListener(new ActionListener(){\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                JOptionPane.showMessageDialog(null, \"Clicked\");\n            }\n        });\n    }\n\n    private  void createAndShowGui(){\n        JFrame frame = new JFrame(\"test\");\n        frame.setContentPane(panel1);\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n        frame.pack();\n        frame.setVisible(true);\n    }\n\n    public static void main(String[] args) {\n        TestUI obj = new TestUI();\n    }\n}\n</code></pre>\n\n<p>POM.xml for this project originally looks like follows.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.company.test&lt;/groupId&gt;\n    &lt;artifactId&gt;UITestWithIJ&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.6.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.6&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;descriptorRefs&gt;\n                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                    &lt;/descriptorRefs&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;mainClass&gt;TestUI&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;make-assembly&lt;/id&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;single&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>When this is run in IDEA, it works flawless. So I have built it into a fat jar via Maven using the assembly plugin. Then the problems started to jump out. When the jar created by Maven is executed, it throws a NullPointerException which appears as follows.</p>\n\n<pre><code>user@group-PC09:~/.m2/repository/com/company/test/UITestWithIJ/1.0-SNAPSHOT$ java -jar UITestWithIJ-1.0-SNAPSHOT-jar-with-dependencies.jar \nException in thread \"main\" java.lang.NullPointerException\n    at TestUI.&lt;init&gt;(TestUI.java:13)\n    at TestUI.main(TestUI.java:34)\n</code></pre>\n\n<p>Deeper I dug, I found that the reason for this is the line #13 that which is having <code>txtTest</code> identifier in it. This identifier by no mean is initialized. Hence it takes the default value <code>null</code>. So I realized that the problem is actually with IDEA and I simply need to transform the <code>.form</code> file generated by IDEA into some format that JVM alone could read.</p>\n\n<p>Upon research I could find a candidate solution <a href=\"http://glxn.net/2010/08/17/making-a-swing-project-using-intellij-idea-and-gui-builder-with-maven-including-executable-jar/\" rel=\"nofollow noreferrer\">here</a>. According to the instructions therein, I have modified my POM.xml as follows.</p>\n\n<ul>\n<li><p>Added the following dependency</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.intellij&lt;/groupId&gt;\n    &lt;artifactId&gt;forms_rt&lt;/artifactId&gt;\n    &lt;version&gt;7.0.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre></li>\n<li><p>Added the following plugin</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n    &lt;artifactId&gt;ideauidesigner-maven-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;javac2&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n\n    &lt;configuration&gt;\n        &lt;fork&gt;true&lt;/fork&gt;\n        &lt;debug&gt;true&lt;/debug&gt;\n        &lt;failOnError&gt;true&lt;/failOnError&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre></li>\n</ul>\n\n<p>This has resolved the problem. However, in the TestUI.java you see that there is an event listener added. This could be replaced with a lambda expression from Java 8 forth. Once I have done that replacement, Maven fails to build the jar, throwing the following errors.</p>\n\n<pre><code>user@group-PC09:~/IdeaProjects/UITestWithIJ$ mvn clean install\n[INFO] Scanning for projects...\n[WARNING] \n[WARNING] Some problems were encountered while building the effective model for com.company.test:UITestWithIJ:jar:1.0-SNAPSHOT\n[WARNING] 'build.plugins.plugin.version' for org.codehaus.mojo:ideauidesigner-maven-plugin is missing. @ line 53, column 21\n[WARNING] \n[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.\n[WARNING] \n[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.\n[WARNING] \n[INFO]                                                                         \n[INFO] ------------------------------------------------------------------------\n[INFO] Building UITestWithIJ 1.0-SNAPSHOT\n[INFO] ------------------------------------------------------------------------\n[INFO] \n[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ UITestWithIJ ---\n[INFO] Deleting /home/user/IdeaProjects/UITestWithIJ/target\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ UITestWithIJ ---\n[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!\n[INFO] Copying 0 resource\n[INFO] \n[INFO] --- maven-compiler-plugin:3.6.0:compile (default-compile) @ UITestWithIJ ---\n[INFO] Changes detected - recompiling the module!\n[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!\n[INFO] Compiling 1 source file to /home/user/IdeaProjects/UITestWithIJ/target/classes\n[INFO] \n[INFO] --- ideauidesigner-maven-plugin:1.0-beta-1:javac2 (default) @ UITestWithIJ ---\n[INFO] Executing IDEA UI Designer task...\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 1.227 s\n[INFO] Finished at: 2016-12-29T11:11:43+05:30\n[INFO] Final Memory: 17M/205M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.codehaus.mojo:ideauidesigner-maven-plugin:1.0-beta-1:javac2 (default) on project UITestWithIJ: Execution default of goal org.codehaus.mojo:ideauidesigner-maven-plugin:1.0-beta-1:javac2 failed: 52264 -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException\n</code></pre>\n\n<p>I have retired the same with -X switch and found that what actually fails here is the maven goal <code>javac2</code> for the plugin <code>ideauidesigner-maven-plugin</code> and the only possible cause for that is the lambda expression. A method in the plugin throws an <code>ArrayIndexOutOfBoundsException</code> I have checked this and the dependency <code>forms_rt</code> in Maven repository and I noticed that those are last updated in 2009 and 2010. May be the plugin is incapable of handling lambda expression.</p>\n\n<p>Following are my questions.</p>\n\n<ul>\n<li>Am I doing something wrong?</li>\n<li>Is there a fix for this?</li>\n<li>Is there a viable alternative for this?</li>\n</ul>\n"},{"tags":["java","maven","classloader","maven-plugin","javadoc"],"comments":[{"owner":{"account_id":4635391,"reputation":1131,"user_id":3756780,"display_name":"slindenau"},"score":0,"creation_date":1663316020,"post_id":73730999,"comment_id":130215134,"body_markdown":"What happens when you put your entire project on the classpath of the plugin by adding the following dependency to the `plugin.dependencies` list in `pom.xml`? Then you should be able to load all classes: `&lt;dependency&gt;&lt;groupId&gt;${project.groupId}&lt;/groupId&gt;&lt;artifactId&gt;${project.artifactId}&lt;/artifactId&gt;&lt;version&gt;${project.version}&lt;/version&gt;&lt;/dependency&gt;`","body":"What happens when you put your entire project on the classpath of the plugin by adding the following dependency to the <code>plugin.dependencies</code> list in <code>pom.xml</code>? Then you should be able to load all classes: <code>&lt;dependency&gt;&lt;groupId&gt;${project.groupId}&lt;&#47;groupId&gt;&lt;artifactId&zwnj;&#8203;&gt;${project.artifactI&zwnj;&#8203;d}&lt;&#47;artifactId&gt;&lt;vers&zwnj;&#8203;ion&gt;${project.versio&zwnj;&#8203;n}&lt;&#47;version&gt;&lt;&#47;depend&zwnj;&#8203;ency&gt;</code>"},{"owner":{"account_id":15742265,"reputation":11,"user_id":11359298,"display_name":"jerry.yang"},"score":0,"creation_date":1663317419,"post_id":73730999,"comment_id":130215635,"body_markdown":"well , the maven plugin maybe run everywhere, it cann&#39;t dependent any customize project.","body":"well , the maven plugin maybe run everywhere, it cann&#39;t dependent any customize project."},{"owner":{"account_id":4635391,"reputation":1131,"user_id":3756780,"display_name":"slindenau"},"score":0,"creation_date":1663317682,"post_id":73730999,"comment_id":130215712,"body_markdown":"True, but you can add to the instructions of the plugin (in the documentation) that the end user must always add that dependency? Not very pretty, but maybe someone else knows a better solution.","body":"True, but you can add to the instructions of the plugin (in the documentation) that the end user must always add that dependency? Not very pretty, but maybe someone else knows a better solution."},{"owner":{"account_id":15742265,"reputation":11,"user_id":11359298,"display_name":"jerry.yang"},"score":0,"creation_date":1663323497,"post_id":73730999,"comment_id":130217631,"body_markdown":"emm,I used the plugin load the .class file in PROJECT_HOME/target/classes/....  directory, it works well , but these .class files don&#39;t contain any 2nd or 3rd class. Maybe I should handle these in other way.  Thank you for your help .","body":"emm,I used the plugin load the .class file in PROJECT_HOME/target/classes/....  directory, it works well , but these .class files don&#39;t contain any 2nd or 3rd class. Maybe I should handle these in other way.  Thank you for your help ."},{"owner":{"account_id":4635391,"reputation":1131,"user_id":3756780,"display_name":"slindenau"},"score":0,"creation_date":1663425679,"post_id":73730999,"comment_id":130239365,"body_markdown":"Maybe this can help to navigate the current project and its dependencies: https://medium.com/@viqueen/building-a-maven-plugin-to-explore-your-code-base-fe309ce56eb6","body":"Maybe this can help to navigate the current project and its dependencies: <a href=\"https://medium.com/@viqueen/building-a-maven-plugin-to-explore-your-code-base-fe309ce56eb6\" rel=\"nofollow noreferrer\">medium.com/@viqueen/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":15742265,"reputation":11,"user_id":11359298,"display_name":"jerry.yang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663807204,"creation_date":1663807204,"answer_id":73808218,"question_id":73730999,"body_markdown":"finally,I resolve the question,this maven plugin can load the classes while running in compile stage or others, thanks.\r\n\r\n```\r\n@Mojo(name = &quot;report&quot;, threadSafe = true,defaultPhase= LifecyclePhase.COMPILE,requiresDependencyResolution = ResolutionScope.COMPILE)\r\n@Execute(phase=LifecyclePhase.COMPILE)\r\npublic class JavadocMojo extends AbstractMojo {\r\n\r\n    @Override\r\n    public void execute() {\r\n            List&lt;String&gt; list = mavenProject.getCompileClasspathElements();\r\n            JarClassLoader jarClassLoader=new JarClassLoader(this.getClass().getClassLoader());\r\n            for(String item: list){\r\n                jarClassLoader.add(new File(item).toURI().toURL());\r\n            }\r\n}\r\n}\r\n```","title":"how to load a jar package in a maven plugin","body":"<p>finally,I resolve the question,this maven plugin can load the classes while running in compile stage or others, thanks.</p>\n<pre><code>@Mojo(name = &quot;report&quot;, threadSafe = true,defaultPhase= LifecyclePhase.COMPILE,requiresDependencyResolution = ResolutionScope.COMPILE)\n@Execute(phase=LifecyclePhase.COMPILE)\npublic class JavadocMojo extends AbstractMojo {\n\n    @Override\n    public void execute() {\n            List&lt;String&gt; list = mavenProject.getCompileClasspathElements();\n            JarClassLoader jarClassLoader=new JarClassLoader(this.getClass().getClassLoader());\n            for(String item: list){\n                jarClassLoader.add(new File(item).toURI().toURL());\n            }\n}\n}\n</code></pre>\n"}],"owner":{"account_id":15742265,"reputation":11,"user_id":11359298,"display_name":"jerry.yang"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1663807204,"creation_date":1663244242,"question_id":73730999,"body_markdown":"I have created a maven plugin, the plugin will parse java source code and submit the results to my console.\r\n\r\nBut now I have a problem, some java classes are written by a third-party or by other groups at my company, then my plugin can&#39;t get these classes&#39; structure, fields, method parameter type, method return type etc. \r\n\r\nAt last, I modified my plugin to run at the `package` phase, while maven packages the source code, then the plugin can load the jar package and load all the classes in the jar. \r\nBut now, the classloader doesn&#39;t work.\r\n\r\nMy plugin code can be seen below:\r\n\r\n```lang-java\r\n@Mojo(name = &quot;report&quot;, threadSafe = true,defaultPhase= LifecyclePhase.PACKAGE)\r\n@Execute(phase =LifecyclePhase.PACKAGE )\r\npublic class JavadocMojo extends AbstractMojo {\r\n\r\n    @Component\r\n    private MavenProject mavenProject;\r\n\r\n    @Override\r\n    public void execute() {\r\n\r\n       try {\r\n            File targetDir = new File(mavenProject.getCompileClasspathElements().get(0)).getParentFile();\r\n\r\n            Optional&lt;File&gt; optional = Arrays.stream(targetDir.listFiles()).filter(t-&gt;t.getName().endsWith(&quot;.jar&quot;)).findFirst();\r\n            File file = optional.get();\r\n            URLClassLoader urlClassLoader=new URLClassLoader(new URL[]{file.toURI().toURL()},mavenProject.getClass().getClassLoader());\r\n\r\n\r\n            // the full class name is other project&#39;s class of mine\r\n            // this classload cann&#39;t load the target class and throws ClassNotFoundException while I&#39;m debug the plugin\r\n            urlClassLoader.loadClass(&quot;com.x.y.z.MyClass&quot;);\r\n           \r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```","title":"how to load a jar package in a maven plugin","body":"<p>I have created a maven plugin, the plugin will parse java source code and submit the results to my console.</p>\n<p>But now I have a problem, some java classes are written by a third-party or by other groups at my company, then my plugin can't get these classes' structure, fields, method parameter type, method return type etc.</p>\n<p>At last, I modified my plugin to run at the <code>package</code> phase, while maven packages the source code, then the plugin can load the jar package and load all the classes in the jar.\nBut now, the classloader doesn't work.</p>\n<p>My plugin code can be seen below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mojo(name = &quot;report&quot;, threadSafe = true,defaultPhase= LifecyclePhase.PACKAGE)\n@Execute(phase =LifecyclePhase.PACKAGE )\npublic class JavadocMojo extends AbstractMojo {\n\n    @Component\n    private MavenProject mavenProject;\n\n    @Override\n    public void execute() {\n\n       try {\n            File targetDir = new File(mavenProject.getCompileClasspathElements().get(0)).getParentFile();\n\n            Optional&lt;File&gt; optional = Arrays.stream(targetDir.listFiles()).filter(t-&gt;t.getName().endsWith(&quot;.jar&quot;)).findFirst();\n            File file = optional.get();\n            URLClassLoader urlClassLoader=new URLClassLoader(new URL[]{file.toURI().toURL()},mavenProject.getClass().getClassLoader());\n\n\n            // the full class name is other project's class of mine\n            // this classload cann't load the target class and throws ClassNotFoundException while I'm debug the plugin\n            urlClassLoader.loadClass(&quot;com.x.y.z.MyClass&quot;);\n           \n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","persistence","future"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1663806315,"post_id":73808133,"comment_id":130328167,"body_markdown":"Are you saying you want to store the `Future` in a database or a file system, or something like that?","body":"Are you saying you want to store the <code>Future</code> in a database or a file system, or something like that?"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1663806679,"post_id":73808133,"comment_id":130328218,"body_markdown":"If you mean persist in memory, why is the map a bad idea?","body":"If you mean persist in memory, why is the map a bad idea?"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1663806912,"post_id":73808133,"comment_id":130328245,"body_markdown":"&quot;persist in memory&quot; = &quot;refer to with a variable&quot;, just like any other kind of object.","body":"&quot;persist in memory&quot; = &quot;refer to with a variable&quot;, just like any other kind of object."},{"owner":{"account_id":4406748,"reputation":1,"user_id":3590924,"display_name":"kgwrocks"},"score":0,"creation_date":1663870891,"post_id":73808133,"comment_id":130347253,"body_markdown":"Let me rephrase. We want to be able to launch asynchronous code that may need to be cancelled and restarted. The client can&#39;t block, so putting in code to wait for a Future to complete is not an option. Is it possible to save a thread id (to REDIS for example) so that we can retrieve the thread later in case it needs to be cancelled?","body":"Let me rephrase. We want to be able to launch asynchronous code that may need to be cancelled and restarted. The client can&#39;t block, so putting in code to wait for a Future to complete is not an option. Is it possible to save a thread id (to REDIS for example) so that we can retrieve the thread later in case it needs to be cancelled?"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1663873507,"post_id":73808133,"comment_id":130348037,"body_markdown":"Rather than post a Comment, edit the body of your Question for clarity. And explain what you mean by &quot;The client can&#39;t block, so putting in code to wait for a Future to complete is not an option.&quot;. I suspect you misunderstand some key concepts of threading/concurrency.","body":"Rather than post a Comment, edit the body of your Question for clarity. And explain what you mean by &quot;The client can&#39;t block, so putting in code to wait for a Future to complete is not an option.&quot;. I suspect you misunderstand some key concepts of threading/concurrency."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1663873676,"post_id":73808133,"comment_id":130348091,"body_markdown":"A thread is a runtime-only kind of thing. Persisting makes no sense.","body":"A thread is a runtime-only kind of thing. Persisting makes no sense."}],"owner":{"account_id":4406748,"reputation":1,"user_id":3590924,"display_name":"kgwrocks"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663806171,"creation_date":1663806171,"question_id":73808133,"body_markdown":"Assume I have a method that returns a Future&lt;T&gt;. For example:\r\n\r\n    void foo() {\r\n        final Future&lt;String&gt; future = bar();\r\n        save(future, &quot;FOO&quot;);\r\n    }\r\n\r\n    void fooCancel() {\r\n        final Future&lt;String&gt; future = load(&quot;FOO&quot;);\r\n        future.cancel();\r\n    }\r\n\r\nIs there a good way to persist the future? I could use something simple like a Map&lt;String, Future&gt; but that seems like a really bad idea.","title":"How can I save a Future instance for later use","body":"<p>Assume I have a method that returns a Future. For example:</p>\n<pre><code>void foo() {\n    final Future&lt;String&gt; future = bar();\n    save(future, &quot;FOO&quot;);\n}\n\nvoid fooCancel() {\n    final Future&lt;String&gt; future = load(&quot;FOO&quot;);\n    future.cancel();\n}\n</code></pre>\n<p>Is there a good way to persist the future? I could use something simple like a Map&lt;String, Future&gt; but that seems like a really bad idea.</p>\n"},{"tags":["java","ucanaccess"],"answers":[{"tags":[],"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663685278,"creation_date":1663685278,"answer_id":73788643,"question_id":73787271,"body_markdown":"Short answer: You cannot.\r\n\r\n[UCanAccess][1] is a JDBC driver to access databases which were created by the Microsoft Jet Engine, the default database format used by MS Access. It does this by leveraging [Jackcess][2], which is able to read directly the database file format bypassing MS DLLs so it is able to work under Linux.\r\n\r\nBut if you use Access only as a GUI to access another database like SQL Server or Acomba via ODBC UCanAccess is unable to access those database links.\r\n\r\nSo you need a JDBC driver for your target database. It seems there is none for Acomba. And the old built-in JDBC-ODBC-Bridge driver is no longer provided since Java 8 and was never intended for production use. There was a commercial JDBC-ODBC-Bridge driver provided by Easysoft. But the Easysoft web site is no longer available. So it seems you are out of luck. Maybe you can implement the data access part with another programming language which supports ODBC.\r\n\r\n\r\n  [1]: http://ucanaccess.sourceforge.net/site.html\r\n  [2]: https://jackcess.sourceforge.io","title":"Using UCanAccess with DNS","body":"<p>Short answer: You cannot.</p>\n<p><a href=\"http://ucanaccess.sourceforge.net/site.html\" rel=\"nofollow noreferrer\">UCanAccess</a> is a JDBC driver to access databases which were created by the Microsoft Jet Engine, the default database format used by MS Access. It does this by leveraging <a href=\"https://jackcess.sourceforge.io\" rel=\"nofollow noreferrer\">Jackcess</a>, which is able to read directly the database file format bypassing MS DLLs so it is able to work under Linux.</p>\n<p>But if you use Access only as a GUI to access another database like SQL Server or Acomba via ODBC UCanAccess is unable to access those database links.</p>\n<p>So you need a JDBC driver for your target database. It seems there is none for Acomba. And the old built-in JDBC-ODBC-Bridge driver is no longer provided since Java 8 and was never intended for production use. There was a commercial JDBC-ODBC-Bridge driver provided by Easysoft. But the Easysoft web site is no longer available. So it seems you are out of luck. Maybe you can implement the data access part with another programming language which supports ODBC.</p>\n"}],"owner":{"account_id":18117686,"reputation":198,"user_id":13174149,"display_name":"Charlo Poitras"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":149,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1663805986,"creation_date":1663679449,"question_id":73787271,"body_markdown":"How can I access [ODBC][1] 32-bit drivers with UCanAccess with DNS?\r\n\r\n`jdbc:ucanaccess:pmg`\r\n\r\nHere is the 32-bit driver from a custom ODBC driver:\r\n\r\n[![driver][2]][2]\r\n\r\nI&#39;m using [Java&amp;nbsp;11][3] with [JavaFX][4].\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Open_Database_Connectivity\r\n  [2]: https://i.stack.imgur.com/eu8zy.png\r\n  [3]: https://en.wikipedia.org/wiki/Java_version_history#Java_11\r\n  [4]: https://en.wikipedia.org/wiki/JavaFX\r\n\r\n\r\n","title":"Using UCanAccess with DNS","body":"<p>How can I access <a href=\"https://en.wikipedia.org/wiki/Open_Database_Connectivity\" rel=\"nofollow noreferrer\">ODBC</a> 32-bit drivers with UCanAccess with DNS?</p>\n<p><code>jdbc:ucanaccess:pmg</code></p>\n<p>Here is the 32-bit driver from a custom ODBC driver:</p>\n<p><a href=\"https://i.stack.imgur.com/eu8zy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eu8zy.png\" alt=\"driver\" /></a></p>\n<p>I'm using <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_11\" rel=\"nofollow noreferrer\">Java 11</a> with <a href=\"https://en.wikipedia.org/wiki/JavaFX\" rel=\"nofollow noreferrer\">JavaFX</a>.</p>\n"},{"tags":["java","spring","unit-testing","dependency-injection","jmockit"],"answers":[{"tags":[],"owner":{"account_id":6141709,"reputation":1016,"user_id":4788928,"display_name":"Jeff Bennett"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663805316,"creation_date":1663805316,"answer_id":73808073,"question_id":73335488,"body_markdown":"In a JMockit test class, you normally have a single class (classUnderTest) annotated with the &quot;@Tested&quot; annotation.   Any classes that class needs should be @Injectable.  e.g. classes passed to the constructor of the @Tested class, or things that are @Autowired (which I believe @Resource is an extension thereof).\r\n\r\nSo, try something like this. \r\n\r\n    public class TestClass {\r\n        @Tested ClassToMock classToMock;\r\n        @Injectable StandardDependency standardDependency;\r\n        @Injectable OtherStandardDependency otherStandardDependency;\r\n    \r\n        @Test\r\n        public void testConstruction() {\r\n            assertNotNull(classToMock);\r\n        }\r\n    }\r\n\r\nAs a side benefit, it should read more intuitively expressing that one class is the one being &quot;tested&quot; and the other elements are just there because you need them to make testing work.  All 3 classes are &#39;mocks&#39; and can be accessed/utilized as such from subsequent tests.","title":"Mocking classes that require private autowired fields using JMockit","body":"<p>In a JMockit test class, you normally have a single class (classUnderTest) annotated with the &quot;@Tested&quot; annotation.   Any classes that class needs should be @Injectable.  e.g. classes passed to the constructor of the @Tested class, or things that are @Autowired (which I believe @Resource is an extension thereof).</p>\n<p>So, try something like this.</p>\n<pre><code>public class TestClass {\n    @Tested ClassToMock classToMock;\n    @Injectable StandardDependency standardDependency;\n    @Injectable OtherStandardDependency otherStandardDependency;\n\n    @Test\n    public void testConstruction() {\n        assertNotNull(classToMock);\n    }\n}\n</code></pre>\n<p>As a side benefit, it should read more intuitively expressing that one class is the one being &quot;tested&quot; and the other elements are just there because you need them to make testing work.  All 3 classes are 'mocks' and can be accessed/utilized as such from subsequent tests.</p>\n"}],"owner":{"account_id":18071003,"reputation":69,"user_id":13135667,"display_name":"it2901"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663805316,"creation_date":1660313582,"question_id":73335488,"body_markdown":"I have been stuck on this for a while, being very new to JMockit.\r\n\r\nI have a class that I want to mock, named `ClassToMock`. `ClassToMock` looks like this,\r\n\r\n```java\r\npublic class ClassToMock {\r\n    @Resource(name=&quot;firstDependencyBean&quot;)\r\n    private StandardDependency standardDependency;\r\n\r\n    // Methods defined here, omitted for brevity\r\n}\r\n```\r\n\r\nThe `StandardDependency` class looks something like this,\r\n\r\n```java\r\npublic class StandardDependency {\r\n    @Resource(name=&quot;secondDependencyBean&quot;)\r\n    private OtherStandardDependency otherStandardDependency;\r\n\r\n    // Methods defined here, omitted for brevity\r\n}\r\n```\r\n\r\n`OtherStandardDependency` shares a similar structure, it also having dependencies that are injected using the `@Resource` annotation.\r\n\r\nMy test class looks something like this, currently playing around with it so nothing meaningful at the moment,\r\n\r\n```java\r\npublic class TestClass {\r\n    @Tested(fullyInitialized = true) ClassToMock classToMock;\r\n\r\n    @Test\r\n    public void TestTrivialCase() {\r\n        assertTrue(true);\r\n    }\r\n} \r\n```\r\n\r\nHowever, when running, I get the following exception,\r\n\r\n```shell\r\nMissing @Tested instance of an implementation class for field &quot;OtherStandardDependecy otherStandardDependency&quot; StandardDependency\r\njava.lang.IllegalStateException: Missing @Tested instance of an implementation class for field &quot;OtherStandardDependecy otherStandardDependency&quot; StandardDependency\r\n```\r\n\r\nSo I tried this,\r\n\r\n```java\r\npublic class TestClass {\r\n    @Tested(fullyInitialized = true) ClassToMock classToMock;\r\n    @Tested(fullyInitialized = true) StandardDependency standardDependency;\r\n\r\n    @Test\r\n    public void TestTrivialCase() {\r\n        assertTrue(true);\r\n    }\r\n}\r\n```\r\n\r\nAnd also tried this (just tried it, not given much though),\r\n\r\n```java\r\npublic class TestClass {\r\n    @Tested(fullyInitialized = true) ClassToMock classToMock;\r\n    @Tested(fullyInitialized = true) StandardDependency standardDependency;\r\n    @Injectable OtherStandardDependency otherStandardDependency;\r\n\r\n    @Test\r\n    public void TestTrivialCase() {\r\n        assertTrue(true);\r\n    }\r\n}\r\n```\r\n\r\nNo luck.\r\n\r\nAny help in resolving this issue is much appreciated.","title":"Mocking classes that require private autowired fields using JMockit","body":"<p>I have been stuck on this for a while, being very new to JMockit.</p>\n<p>I have a class that I want to mock, named <code>ClassToMock</code>. <code>ClassToMock</code> looks like this,</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ClassToMock {\n    @Resource(name=&quot;firstDependencyBean&quot;)\n    private StandardDependency standardDependency;\n\n    // Methods defined here, omitted for brevity\n}\n</code></pre>\n<p>The <code>StandardDependency</code> class looks something like this,</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class StandardDependency {\n    @Resource(name=&quot;secondDependencyBean&quot;)\n    private OtherStandardDependency otherStandardDependency;\n\n    // Methods defined here, omitted for brevity\n}\n</code></pre>\n<p><code>OtherStandardDependency</code> shares a similar structure, it also having dependencies that are injected using the <code>@Resource</code> annotation.</p>\n<p>My test class looks something like this, currently playing around with it so nothing meaningful at the moment,</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class TestClass {\n    @Tested(fullyInitialized = true) ClassToMock classToMock;\n\n    @Test\n    public void TestTrivialCase() {\n        assertTrue(true);\n    }\n} \n</code></pre>\n<p>However, when running, I get the following exception,</p>\n<pre class=\"lang-bash prettyprint-override\"><code>Missing @Tested instance of an implementation class for field &quot;OtherStandardDependecy otherStandardDependency&quot; StandardDependency\njava.lang.IllegalStateException: Missing @Tested instance of an implementation class for field &quot;OtherStandardDependecy otherStandardDependency&quot; StandardDependency\n</code></pre>\n<p>So I tried this,</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class TestClass {\n    @Tested(fullyInitialized = true) ClassToMock classToMock;\n    @Tested(fullyInitialized = true) StandardDependency standardDependency;\n\n    @Test\n    public void TestTrivialCase() {\n        assertTrue(true);\n    }\n}\n</code></pre>\n<p>And also tried this (just tried it, not given much though),</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class TestClass {\n    @Tested(fullyInitialized = true) ClassToMock classToMock;\n    @Tested(fullyInitialized = true) StandardDependency standardDependency;\n    @Injectable OtherStandardDependency otherStandardDependency;\n\n    @Test\n    public void TestTrivialCase() {\n        assertTrue(true);\n    }\n}\n</code></pre>\n<p>No luck.</p>\n<p>Any help in resolving this issue is much appreciated.</p>\n"},{"tags":["java","networking","mac-address"],"answers":[{"tags":[],"owner":{"account_id":2766645,"reputation":394,"user_id":2382202,"accept_rate":75,"display_name":"Niek Vandael"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1403000045,"creation_date":1403000045,"answer_id":24261150,"question_id":24261027,"body_markdown":"If the least significant bit of the most significant address octet is set to 1, the frame will still be sent only once; however, NICs will choose to accept it based on criteria other than the matching of a MAC address: for example, based on a configurable list of accepted multicast MAC addresses. This is called multicast addressing.","title":"Make a random mac address generator generate just unicast macs","body":"<p>If the least significant bit of the most significant address octet is set to 1, the frame will still be sent only once; however, NICs will choose to accept it based on criteria other than the matching of a MAC address: for example, based on a configurable list of accepted multicast MAC addresses. This is called multicast addressing.</p>\n"},{"tags":[],"owner":{"account_id":1820811,"reputation":6166,"user_id":1654930,"accept_rate":71,"display_name":"Phate"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1403002750,"creation_date":1403002750,"answer_id":24262057,"question_id":24261027,"body_markdown":"Solved...I just made\r\n\r\n    private String randomMACAddress(){\r\n\t\tRandom rand = new Random();\r\n\t\tbyte[] macAddr = new byte[6];\r\n\t\trand.nextBytes(macAddr);\r\n\t\t\r\n\t\tmacAddr[0] = (byte)(macAddr[0] &amp; (byte)254);  //zeroing last 2 bytes to make it unicast and locally adminstrated\r\n\t\t\r\n\t\tStringBuilder sb = new StringBuilder(18);\r\n\t\tfor(byte b : macAddr){\r\n\t\t\t\r\n\t\t\tif(sb.length() &gt; 0)\r\n\t\t\t\tsb.append(&quot;:&quot;);\r\n\t\t\t\r\n\t\t\tsb.append(String.format(&quot;%02x&quot;, b));\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\treturn sb.toString();\r\n\t}","title":"Make a random mac address generator generate just unicast macs","body":"<p>Solved...I just made</p>\n\n<pre><code>private String randomMACAddress(){\n    Random rand = new Random();\n    byte[] macAddr = new byte[6];\n    rand.nextBytes(macAddr);\n\n    macAddr[0] = (byte)(macAddr[0] &amp; (byte)254);  //zeroing last 2 bytes to make it unicast and locally adminstrated\n\n    StringBuilder sb = new StringBuilder(18);\n    for(byte b : macAddr){\n\n        if(sb.length() &gt; 0)\n            sb.append(\":\");\n\n        sb.append(String.format(\"%02x\", b));\n    }\n\n\n    return sb.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17005988,"reputation":1,"user_id":12302181,"display_name":"pasupuleti jyothi babu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634035076,"creation_date":1634035076,"answer_id":69539079,"question_id":24261027,"body_markdown":" \r\n\r\n    public String generateRandomMacAddress() {\r\n          Random r = new Random();\r\n          return RandomStringUtils.randomAlphabetic(1) + r.nextInt(11)+ &quot;:&quot; +\r\n                  r.nextInt(11) + r.nextInt(11) + &quot;:&quot; +\r\n                  RandomStringUtils.randomAlphabetic(2)+&quot;:&quot;+\r\n                  r.nextInt(11)+RandomStringUtils.randomAlphabetic(1)+&quot;:&quot;+\r\n                  r.nextInt(11)+RandomStringUtils.randomAlphabetic(1);\r\n       }\r\n\r\n``","title":"Make a random mac address generator generate just unicast macs","body":"<pre><code>public String generateRandomMacAddress() {\n      Random r = new Random();\n      return RandomStringUtils.randomAlphabetic(1) + r.nextInt(11)+ &quot;:&quot; +\n              r.nextInt(11) + r.nextInt(11) + &quot;:&quot; +\n              RandomStringUtils.randomAlphabetic(2)+&quot;:&quot;+\n              r.nextInt(11)+RandomStringUtils.randomAlphabetic(1)+&quot;:&quot;+\n              r.nextInt(11)+RandomStringUtils.randomAlphabetic(1);\n   }\n</code></pre>\n<p>``</p>\n"},{"tags":[],"owner":{"account_id":1444917,"reputation":853,"user_id":1363772,"accept_rate":67,"display_name":"baconcheese113"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663803937,"creation_date":1663795347,"answer_id":73807063,"question_id":24261027,"body_markdown":"For a random MAC address, here&#39;s nearly a one liner\r\n```dart\r\nimport &#39;dart:math&#39;;\r\n\r\nRandom r = Random();\r\nString mac = List.generate(6, (_) =&gt; r.nextInt(256).toRadixString(16).padLeft(2, &#39;0&#39;)).join(&quot;:&quot;);\r\n\r\nprint(&quot;mac is $mac&quot;); // mac is 8f:e0:63:e0:92:60\r\n```","title":"Make a random mac address generator generate just unicast macs","body":"<p>For a random MAC address, here's nearly a one liner</p>\n<pre class=\"lang-dart prettyprint-override\"><code>import 'dart:math';\n\nRandom r = Random();\nString mac = List.generate(6, (_) =&gt; r.nextInt(256).toRadixString(16).padLeft(2, '0')).join(&quot;:&quot;);\n\nprint(&quot;mac is $mac&quot;); // mac is 8f:e0:63:e0:92:60\n</code></pre>\n"}],"owner":{"account_id":1820811,"reputation":6166,"user_id":1654930,"accept_rate":71,"display_name":"Phate"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12950,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":24262057,"answer_count":4,"score":5,"last_activity_date":1663803937,"creation_date":1402999565,"question_id":24261027,"body_markdown":"This is my simple mac address generator:\r\n\r\n    private String randomMACAddress(){\r\n\t\tRandom rand = new Random();\r\n\t\tbyte[] macAddr = new byte[6];\r\n\t\trand.nextBytes(macAddr);\r\n\t\t\r\n\t\tStringBuilder sb = new StringBuilder(18);\r\n\t\tfor(byte b : macAddr){\r\n\t\t\tif(sb.length() &gt; 0){\r\n\t\t\t\tsb.append(&quot;:&quot;);\r\n\t\t\t}else{ //first byte, we need to set some options\r\n\t\t\t\tb = (byte)(b | (byte)(0x01 &lt;&lt; 6)); //locally adminstrated\r\n\t\t\t\tb = (byte)(b | (byte)(0x00 &lt;&lt; 7)); //unicast\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tsb.append(String.format(&quot;%02x&quot;, b));\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\treturn sb.toString();\r\n\t}\r\n\r\nNote how I set and unset bits to make so it generates unicast macs.\r\nHowever it doesn&#39;t work and my automated program which accepts mac addresses returns me an error because &quot;this mac address is multicast&quot;.\r\n\r\nWhat am I doing wrong?","title":"Make a random mac address generator generate just unicast macs","body":"<p>This is my simple mac address generator:</p>\n\n<pre><code>private String randomMACAddress(){\n    Random rand = new Random();\n    byte[] macAddr = new byte[6];\n    rand.nextBytes(macAddr);\n\n    StringBuilder sb = new StringBuilder(18);\n    for(byte b : macAddr){\n        if(sb.length() &gt; 0){\n            sb.append(\":\");\n        }else{ //first byte, we need to set some options\n            b = (byte)(b | (byte)(0x01 &lt;&lt; 6)); //locally adminstrated\n            b = (byte)(b | (byte)(0x00 &lt;&lt; 7)); //unicast\n\n        }\n        sb.append(String.format(\"%02x\", b));\n    }\n\n\n    return sb.toString();\n}\n</code></pre>\n\n<p>Note how I set and unset bits to make so it generates unicast macs.\nHowever it doesn't work and my automated program which accepts mac addresses returns me an error because \"this mac address is multicast\".</p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["java","scala"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1663820486,"post_id":73807883,"comment_id":130330193,"body_markdown":"Does this answer your question? [What is the difference between JavaConverters and JavaConversions in Scala?](https://stackoverflow.com/questions/8301947/what-is-the-difference-between-javaconverters-and-javaconversions-in-scala)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/8301947/what-is-the-difference-between-javaconverters-and-javaconversions-in-scala\">What is the difference between JavaConverters and JavaConversions in Scala?</a>"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1663820661,"post_id":73807883,"comment_id":130330219,"body_markdown":"In brief, `JavaConverters` does not implicitly convert Scala collections to Java collections, but rather adds `asJava` and `asScala` methods that need to be called explicitly to do the conversion.","body":"In brief, <code>JavaConverters</code> does not implicitly convert Scala collections to Java collections, but rather adds <code>asJava</code> and <code>asScala</code> methods that need to be called explicitly to do the conversion."}],"owner":{"account_id":26407074,"reputation":1,"user_id":20056695,"display_name":"anons"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663802934,"creation_date":1663802934,"question_id":73807883,"body_markdown":"Can someone help me to fix this, I am trying to debug this method after upgrading from java conversion to java convertors. I am very new to scala.\r\n\r\n```\r\ndef parse(table: String,json: String): Either[Map[String, _], Map[String, Object]] = {\r\n    try {\r\n\r\n      val parsedMap = jsonObjectMapper.readValue(json, classOf[MessageDetails])\r\n\r\n      //Convert from class type to Map type\r\n      val javaMap = jsonObjectMapper.convertValue(parsedMap,classOf[java.util.Map[String,Object]])\r\n\r\n      val msgBodyContent = javaMap.get(&quot;MessageDetails&quot;).asInstanceOf[java.util.LinkedHashMap[String,Object]]\r\n\r\n      // Move messageBody content to top level\r\n      var outMap = javaMap\r\n      if (msgBodyContent != null) {\r\n        outMap = javaMap - &quot;MessageDetails&quot; ++ msgBodyContent\r\n      }\r\n\r\n      Right(outMap.toMap)\r\n\r\n    } catch {\r\n      case e: Exception =&gt;\r\n        logger.error(&quot;unable to parse JSON&quot;, e)\r\n        Left(createErrorRec(json,&quot;JSON_PARSE_ERROR&quot;,e.getMessage,table))\r\n    }\r\n\r\n  }\r\n```\r\n\r\ngetting error \r\n```\r\nvalue - is not a member of java.util.Map[String,Object] &amp; \r\nvalue toMap is not a member of java.util.Map[String,Object]\r\n```\r\n","title":"upgrading java conversion to java convertors","body":"<p>Can someone help me to fix this, I am trying to debug this method after upgrading from java conversion to java convertors. I am very new to scala.</p>\n<pre><code>def parse(table: String,json: String): Either[Map[String, _], Map[String, Object]] = {\n    try {\n\n      val parsedMap = jsonObjectMapper.readValue(json, classOf[MessageDetails])\n\n      //Convert from class type to Map type\n      val javaMap = jsonObjectMapper.convertValue(parsedMap,classOf[java.util.Map[String,Object]])\n\n      val msgBodyContent = javaMap.get(&quot;MessageDetails&quot;).asInstanceOf[java.util.LinkedHashMap[String,Object]]\n\n      // Move messageBody content to top level\n      var outMap = javaMap\n      if (msgBodyContent != null) {\n        outMap = javaMap - &quot;MessageDetails&quot; ++ msgBodyContent\n      }\n\n      Right(outMap.toMap)\n\n    } catch {\n      case e: Exception =&gt;\n        logger.error(&quot;unable to parse JSON&quot;, e)\n        Left(createErrorRec(json,&quot;JSON_PARSE_ERROR&quot;,e.getMessage,table))\n    }\n\n  }\n</code></pre>\n<p>getting error</p>\n<pre><code>value - is not a member of java.util.Map[String,Object] &amp; \nvalue toMap is not a member of java.util.Map[String,Object]\n</code></pre>\n"},{"tags":["java","exception"],"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1375905133,"post_id":18112079,"comment_id":26518604,"body_markdown":"You can catch and throw any `Throwable` in Java, they are the same from that standpoint.","body":"You can catch and throw any <code>Throwable</code> in Java, they are the same from that standpoint."},{"owner":{"account_id":1557597,"reputation":8312,"user_id":1448212,"display_name":"Richard Sitze"},"score":0,"creation_date":1375934392,"post_id":18112079,"comment_id":26527194,"body_markdown":"Think of an assertion as &quot;check &amp; possibly an exception&quot; vs a simple &quot;exception&quot;.  So it&#39;s a short-cut that for that logic, as well as a clear declaration (self-documenting code) that an specific condition is being &quot;asserted to be true&quot;.","body":"Think of an assertion as &quot;check &amp; possibly an exception&quot; vs a simple &quot;exception&quot;.  So it&#39;s a short-cut that for that logic, as well as a clear declaration (self-documenting code) that an specific condition is being &quot;asserted to be true&quot;."}],"answers":[{"tags":[],"owner":{"account_id":186054,"reputation":797,"user_id":423160,"accept_rate":100,"display_name":"obimod"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1375904271,"creation_date":1375903651,"answer_id":18112110,"question_id":18112079,"body_markdown":"Asserts are used by test cases to make sure that what you built doesn&#39;t, in the future, render something unexpected. You can assert to make sure exceptions are thrown upon false input, for instance.\r\n\r\nMany times in programming changing one thing means you have to change other pieces of your code. Assertations make sure that what you change doesn&#39;t break code you&#39;ve written in the past.\r\n\r\nExceptions are good. They are expected and handled via exceptions. You have exceptions for incorrect login and password, for instance.\r\n\r\nYou can assert that upon an incorrect login or password, the expected exception is raised.\r\n\r\nAn assert contains three main things. What you&#39;re testing (function name for instance, i.e. `sign_in`), what goes in (function parameters i.e. `{&#39;email&#39;: &#39;john@example.com&#39;, &#39;password&#39;: hashlib.md5(&#39;my_password&#39;)}`), and what comes out (`assertTrue(&#39;user_name&#39; in response, &#39;Expecting user_name to be in response!&#39;)`).\r\n\r\nExceptions are normal, logical alternatives in code. Asserts are tests to make sure logical paths are followed when they should be.\r\n\r\nAccording to the python [unittest framework][1], you can assert that exceptions are thrown:\r\n\r\n    import random import unittest\r\n    \r\n    class TestSequenceFunctions(unittest.TestCase):\r\n    \r\n        def setUp(self):\r\n            self.seq = range(10)\r\n    \r\n        def test_shuffle(self):\r\n            # make sure the shuffled sequence does not lose any elements\r\n            random.shuffle(self.seq)\r\n            self.seq.sort()\r\n            self.assertEqual(self.seq, range(10))\r\n    \r\n            # should raise an exception for an immutable sequence\r\n            self.assertRaises(TypeError, random.shuffle, (1,2,3))\r\n\r\n    \r\n        def test_choice(self):\r\n            element = random.choice(self.seq)\r\n            self.assertTrue(element in self.seq)\r\n    \r\n        def test_sample(self):\r\n            with self.assertRaises(ValueError):\r\n                random.sample(self.seq, 20)\r\n            for element in random.sample(self.seq, 5):\r\n                self.assertTrue(element in self.seq)\r\n    \r\n    if __name__ == &#39;__main__&#39;:\r\n        unittest.main()\r\n\r\n\r\n  [1]: http://docs.python.org/2/library/unittest.html","title":"Assert vs Exceptions","body":"<p>Asserts are used by test cases to make sure that what you built doesn't, in the future, render something unexpected. You can assert to make sure exceptions are thrown upon false input, for instance.</p>\n\n<p>Many times in programming changing one thing means you have to change other pieces of your code. Assertations make sure that what you change doesn't break code you've written in the past.</p>\n\n<p>Exceptions are good. They are expected and handled via exceptions. You have exceptions for incorrect login and password, for instance.</p>\n\n<p>You can assert that upon an incorrect login or password, the expected exception is raised.</p>\n\n<p>An assert contains three main things. What you're testing (function name for instance, i.e. <code>sign_in</code>), what goes in (function parameters i.e. <code>{'email': 'john@example.com', 'password': hashlib.md5('my_password')}</code>), and what comes out (<code>assertTrue('user_name' in response, 'Expecting user_name to be in response!')</code>).</p>\n\n<p>Exceptions are normal, logical alternatives in code. Asserts are tests to make sure logical paths are followed when they should be.</p>\n\n<p>According to the python <a href=\"http://docs.python.org/2/library/unittest.html\" rel=\"nofollow\">unittest framework</a>, you can assert that exceptions are thrown:</p>\n\n<pre><code>import random import unittest\n\nclass TestSequenceFunctions(unittest.TestCase):\n\n    def setUp(self):\n        self.seq = range(10)\n\n    def test_shuffle(self):\n        # make sure the shuffled sequence does not lose any elements\n        random.shuffle(self.seq)\n        self.seq.sort()\n        self.assertEqual(self.seq, range(10))\n\n        # should raise an exception for an immutable sequence\n        self.assertRaises(TypeError, random.shuffle, (1,2,3))\n\n\n    def test_choice(self):\n        element = random.choice(self.seq)\n        self.assertTrue(element in self.seq)\n\n    def test_sample(self):\n        with self.assertRaises(ValueError):\n            random.sample(self.seq, 20)\n        for element in random.sample(self.seq, 5):\n            self.assertTrue(element in self.seq)\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2183673,"reputation":12897,"user_id":1932588,"display_name":"Lee Meador"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1375903970,"creation_date":1375903970,"answer_id":18112206,"question_id":18112079,"body_markdown":"Asserts in working code, as opposed to test code, are there to check that the values supplied to the code are correct. If the values are wrong, an assertion exception is thrown.\r\n\r\nYou can write your own code to test the values and throw an exception of your own choosing.\r\n\r\nAssertions are easy to use and, like logging, can be turned off in production code that has been thoroughly debugged. Also, anyone reading the code knows why the test is there without thinking about it. So it saves them time. (It will save you time too when you go back and read the code you wrote two years ago.)\r\n\r\nEither way works.","title":"Assert vs Exceptions","body":"<p>Asserts in working code, as opposed to test code, are there to check that the values supplied to the code are correct. If the values are wrong, an assertion exception is thrown.</p>\n\n<p>You can write your own code to test the values and throw an exception of your own choosing.</p>\n\n<p>Assertions are easy to use and, like logging, can be turned off in production code that has been thoroughly debugged. Also, anyone reading the code knows why the test is there without thinking about it. So it saves them time. (It will save you time too when you go back and read the code you wrote two years ago.)</p>\n\n<p>Either way works.</p>\n"},{"tags":[],"owner":{"account_id":7689,"reputation":53388,"user_id":13422,"accept_rate":50,"display_name":"Zan Lynx"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1375904058,"creation_date":1375904058,"answer_id":18112237,"question_id":18112079,"body_markdown":"Many programmer convert asserts into exception checks in release code. Or they might use two different kinds of asserts in order to convert one and not the others, if some happen to be very performance sensitive.\r\n\r\nThis is part of defensive programming. Asserts should document impossible conditions. However, real life programmers know that impossible conditions do sometimes happen, because of untested code paths, bugs in system libraries, or hardware errors.\r\n\r\nThere is usually very little harm in converting asserts into exceptions. Some harm that could happen is in Java, it could introduce a new exception type into a method that previously didn&#39;t have one. Another harm might be that a converted assert could be inside of a loop that requires very high performance, and the assert check might slow it down too much.","title":"Assert vs Exceptions","body":"<p>Many programmer convert asserts into exception checks in release code. Or they might use two different kinds of asserts in order to convert one and not the others, if some happen to be very performance sensitive.</p>\n\n<p>This is part of defensive programming. Asserts should document impossible conditions. However, real life programmers know that impossible conditions do sometimes happen, because of untested code paths, bugs in system libraries, or hardware errors.</p>\n\n<p>There is usually very little harm in converting asserts into exceptions. Some harm that could happen is in Java, it could introduce a new exception type into a method that previously didn't have one. Another harm might be that a converted assert could be inside of a loop that requires very high performance, and the assert check might slow it down too much.</p>\n"},{"tags":[],"owner":{"account_id":3098702,"reputation":470,"user_id":2623382,"display_name":"Evgheni Crujcov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375904192,"creation_date":1375904192,"answer_id":18112285,"question_id":18112079,"body_markdown":"I think the main difference is that asserts allow you to see that a problem has occurred earlier than an exception would. So it gives you an earlier point in execution to attempt to do something about it (or maybe nothing at all - let it fail). So you would use them if you want to see how execution is going before something really bad happens (an exception is thrown).\r\n\r\nOne dramatic analogy I can think of are those Soyuz delivery rockets to ISS, occasionally you hear that an automated rocket went off course at start and immediately triggered its &quot;self destruct&quot;. I would guess that its something like an assert that they use to determine if the heading of the rocket is correct (if it was an exception - by the time that could be thrown the rocket might already hit something). ","title":"Assert vs Exceptions","body":"<p>I think the main difference is that asserts allow you to see that a problem has occurred earlier than an exception would. So it gives you an earlier point in execution to attempt to do something about it (or maybe nothing at all - let it fail). So you would use them if you want to see how execution is going before something really bad happens (an exception is thrown).</p>\n\n<p>One dramatic analogy I can think of are those Soyuz delivery rockets to ISS, occasionally you hear that an automated rocket went off course at start and immediately triggered its \"self destruct\". I would guess that its something like an assert that they use to determine if the heading of the rocket is correct (if it was an exception - by the time that could be thrown the rocket might already hit something). </p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1375907020,"creation_date":1375905813,"answer_id":18112774,"question_id":18112079,"body_markdown":"assertions are designed to be selectively turned off, and by default they are off.  You should use them when there are conditions which should never be the case, but can be checked if you really need to.  Think of them as more exceptional than exceptions.\r\n\r\nExceptions and their checks are always on.  While exceptional they could still occur at any time.\r\n\r\nAssertions can check coding errors and once you program is bug free they shouldn&#39;t be needed.  Exceptions can be triggered due to values which may not be under you control such as inputs.","title":"Assert vs Exceptions","body":"<p>assertions are designed to be selectively turned off, and by default they are off.  You should use them when there are conditions which should never be the case, but can be checked if you really need to.  Think of them as more exceptional than exceptions.</p>\n\n<p>Exceptions and their checks are always on.  While exceptional they could still occur at any time.</p>\n\n<p>Assertions can check coding errors and once you program is bug free they shouldn't be needed.  Exceptions can be triggered due to values which may not be under you control such as inputs.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375905914,"creation_date":1375905914,"answer_id":18112791,"question_id":18112079,"body_markdown":"assertions are designed to be selectively turned off, and by default they are off.  You should use them when there are conditions which should never be the case, but can be checked if you really need to.  Think of them as more exceptional than exceptions.\r\n\r\nExceptions and their checks are always on.  While exceptional they could still occur at any time.\r\n\r\nassertions detect coding errors.  Once your program is bug free they shouldn&#39;t be needed and can be turned off.  Exceptions detect incorrect usage or inputs and cannot be safely turned off.","title":"Assert vs Exceptions","body":"<p>assertions are designed to be selectively turned off, and by default they are off.  You should use them when there are conditions which should never be the case, but can be checked if you really need to.  Think of them as more exceptional than exceptions.</p>\n\n<p>Exceptions and their checks are always on.  While exceptional they could still occur at any time.</p>\n\n<p>assertions detect coding errors.  Once your program is bug free they shouldn't be needed and can be turned off.  Exceptions detect incorrect usage or inputs and cannot be safely turned off.</p>\n"},{"tags":[],"owner":{"account_id":2893075,"reputation":1551,"user_id":2481404,"accept_rate":50,"display_name":"Tobias Kremer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1375907385,"creation_date":1375907385,"answer_id":18113204,"question_id":18112079,"body_markdown":"I see two use cases for assertions in production code:\r\n\r\nAt the beginning of a method you would normaly check if the given parameter are valid. For public methods you would use if statments and exceptions. For private methods you would make the simelar checks using assert. The idea is to avoid redundant checks in produktion while in testing (or when somesting goes wrong) you can just activate assertions to do some double checking.\r\n\r\nThe other reason to use assertions is to document the assumptions that are used in the following code. Like that some value is considered never to be null here.\r\n\r\nHere some example code\r\n\r\n    public class Exampel {\r\n        public publicMethod(final Integer i) {\r\n            if (i == null) {\r\n                throw new RuntimeException(&quot;i should not be null&quot;);\r\n            }\r\n\r\n            privateMethod(i):\r\n        }\r\n\r\n        private privateMethod(final Integer i) {\r\n            assert i != null;\r\n\r\n            // do something\r\n        }\r\n    }\r\n\r\nYou would not want to check i for null several times. You would just assume that `privateMethod`is used correctly. You also give anyone that reads your code the hint that passing null to `privateMethod`is the wrong thing to do.","title":"Assert vs Exceptions","body":"<p>I see two use cases for assertions in production code:</p>\n\n<p>At the beginning of a method you would normaly check if the given parameter are valid. For public methods you would use if statments and exceptions. For private methods you would make the simelar checks using assert. The idea is to avoid redundant checks in produktion while in testing (or when somesting goes wrong) you can just activate assertions to do some double checking.</p>\n\n<p>The other reason to use assertions is to document the assumptions that are used in the following code. Like that some value is considered never to be null here.</p>\n\n<p>Here some example code</p>\n\n<pre><code>public class Exampel {\n    public publicMethod(final Integer i) {\n        if (i == null) {\n            throw new RuntimeException(\"i should not be null\");\n        }\n\n        privateMethod(i):\n    }\n\n    private privateMethod(final Integer i) {\n        assert i != null;\n\n        // do something\n    }\n}\n</code></pre>\n\n<p>You would not want to check i for null several times. You would just assume that <code>privateMethod</code>is used correctly. You also give anyone that reads your code the hint that passing null to <code>privateMethod</code>is the wrong thing to do.</p>\n"}],"owner":{"account_id":2863665,"reputation":5360,"user_id":2458372,"accept_rate":68,"display_name":"JavaDeveloper"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":965,"favorite_count":0,"down_vote_count":2,"up_vote_count":6,"closed_date":1375943421,"accepted_answer_id":18113204,"answer_count":7,"score":4,"last_activity_date":1663801321,"creation_date":1375903564,"question_id":18112079,"body_markdown":"I have read about when to use assert and when to use an exception.\r\n\r\nAssertions are intended to be used as a means of detecting programming errors, aka bugs. Some say assert is for debugging purposes only and its trigger condition should not happen.\r\n\r\nBy contrast, an exception can indicate other kinds of error or &quot;exceptional&quot; condition: invalid user input, missing files, heap full, etc. From my understanding, exceptions can do everything asserts can do except they cannot be disabled.\r\n\r\nIf all asserts were replaced by exceptions, it would be functionally the same. So, is the ability to disable asserts the only reason why they should be used or are there other reasons?\r\n\r\nThanks.\r\n\r\n\r\n\r\n","title":"Assert vs Exceptions","body":"<p>I have read about when to use assert and when to use an exception.</p>\n<p>Assertions are intended to be used as a means of detecting programming errors, aka bugs. Some say assert is for debugging purposes only and its trigger condition should not happen.</p>\n<p>By contrast, an exception can indicate other kinds of error or &quot;exceptional&quot; condition: invalid user input, missing files, heap full, etc. From my understanding, exceptions can do everything asserts can do except they cannot be disabled.</p>\n<p>If all asserts were replaced by exceptions, it would be functionally the same. So, is the ability to disable asserts the only reason why they should be used or are there other reasons?</p>\n<p>Thanks.</p>\n"},{"tags":["java","arrays","collections","integer","permutation"],"comments":[{"owner":{"account_id":18559672,"reputation":300,"user_id":13523946,"display_name":"notAPPP"},"score":0,"creation_date":1663798877,"post_id":73807475,"comment_id":130327128,"body_markdown":"replace your printing with Arrays.toString(perm.toArray())","body":"replace your printing with Arrays.toString(perm.toArray())"},{"owner":{"account_id":20872516,"reputation":87,"user_id":15332116,"display_name":"Tabiat1739"},"score":0,"creation_date":1663799098,"post_id":73807475,"comment_id":130327175,"body_markdown":"Its not a printing issue. I&#39;ve verified that the stack contains the printed values with a debugger.","body":"Its not a printing issue. I&#39;ve verified that the stack contains the printed values with a debugger."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1663800078,"post_id":73807475,"comment_id":130327325,"body_markdown":"Please include the code that calls the `perm` method and prints the stack contents after the `perm` method exits.","body":"Please include the code that calls the <code>perm</code> method and prints the stack contents after the <code>perm</code> method exits."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1663800198,"post_id":73807475,"comment_id":130327351,"body_markdown":"By the way, how do you know the code works?","body":"By the way, how do you know the code works?"},{"owner":{"account_id":20872516,"reputation":87,"user_id":15332116,"display_name":"Tabiat1739"},"score":0,"creation_date":1663800529,"post_id":73807475,"comment_id":130327416,"body_markdown":"Shown in the first output, the permutations of 123 are correctly made before adding to the stack. Ive tried it for other numbers as well. I know the permutations are being found correctly. Its after its added to a collection that all lists in the collection change to the last added list.","body":"Shown in the first output, the permutations of 123 are correctly made before adding to the stack. Ive tried it for other numbers as well. I know the permutations are being found correctly. Its after its added to a collection that all lists in the collection change to the last added list."},{"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"score":3,"creation_date":1663800541,"post_id":73807475,"comment_id":130327421,"body_markdown":"You&#39;re dealing with a single array and add this single array multiple times to the Stack. It doesn&#39;t matter whether you modify the array, it is the same array all the time.","body":"You&#39;re dealing with a single array and add this single array multiple times to the Stack. It doesn&#39;t matter whether you modify the array, it is the same array all the time."},{"owner":{"account_id":20872516,"reputation":87,"user_id":15332116,"display_name":"Tabiat1739"},"score":0,"creation_date":1663800682,"post_id":73807475,"comment_id":130327442,"body_markdown":"Thats what I was thinking as well and I guess I&#39;m drawing a blank as to how I get around that. I&#39;ve tried creating a new list before its added to the stack but I guess I&#39;ll have to create a new list and manually iterate through &quot;values&quot; and add the values to it","body":"Thats what I was thinking as well and I guess I&#39;m drawing a blank as to how I get around that. I&#39;ve tried creating a new list before its added to the stack but I guess I&#39;ll have to create a new list and manually iterate through &quot;values&quot; and add the values to it"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":2,"creation_date":1663800756,"post_id":73807475,"comment_id":130327454,"body_markdown":"I think @Mihe  is right.  In Java, arrays are reference types.  So `int[] value = labels;`  makes `value` and `labels` the same array. What happens to one happens to the other.  If you want them to be different arrays use `Arrays.copyOf`  https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html","body":"I think @Mihe  is right.  In Java, arrays are reference types.  So <code>int[] value = labels;</code>  makes <code>value</code> and <code>labels</code> the same array. What happens to one happens to the other.  If you want them to be different arrays use <code>Arrays.copyOf</code>  <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/util/Arrays.html</a>"},{"owner":{"account_id":20872516,"reputation":87,"user_id":15332116,"display_name":"Tabiat1739"},"score":1,"creation_date":1663800787,"post_id":73807475,"comment_id":130327459,"body_markdown":"Arrays.CopyOf seems way easier than my plan so thank you! Ill give that a shot","body":"Arrays.CopyOf seems way easier than my plan so thank you! Ill give that a shot"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1663829517,"post_id":73807475,"comment_id":130332012,"body_markdown":"If you don’t need to change the length, you can also use `int[] value = labels.clone();`","body":"If you don’t need to change the length, you can also use <code>int[] value = labels.clone();</code>"}],"answers":[{"tags":[],"owner":{"account_id":20872516,"reputation":87,"user_id":15332116,"display_name":"Tabiat1739"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663801105,"creation_date":1663801105,"answer_id":73807727,"question_id":73807475,"body_markdown":"Answers were in the comments but basically the way I was trying to copy the arrays to new arrays was assigning different references to the same array object. By replacing:\r\n```\r\nperm.add(value);\r\n```\r\nwith:\r\n```\r\nint[] newValue = Arrays.CopyOf(value, value.length);\r\nperm.add(newValue);\r\n```\r\nI was able to get around this. I&#39;m sure there&#39;s a cleaner way to write this code but for now this gets me what I need. ","title":"Adding an int Array after modification but ends up adding the old int Array","body":"<p>Answers were in the comments but basically the way I was trying to copy the arrays to new arrays was assigning different references to the same array object. By replacing:</p>\n<pre><code>perm.add(value);\n</code></pre>\n<p>with:</p>\n<pre><code>int[] newValue = Arrays.CopyOf(value, value.length);\nperm.add(newValue);\n</code></pre>\n<p>I was able to get around this. I'm sure there's a cleaner way to write this code but for now this gets me what I need.</p>\n"}],"owner":{"account_id":20872516,"reputation":87,"user_id":15332116,"display_name":"Tabiat1739"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663801105,"creation_date":1663798510,"question_id":73807475,"body_markdown":"I&#39;m writing code to take an int[] and adding all of its permutations to a Collection. The code works and makes the correct swaps. Before adding it to the Stack, I have a print statement showing me my array before adding it:\r\n```\r\n132\r\n213\r\n231\r\n312\r\n321\r\n```\r\nBut then when I print the arrays in the stack after the permutations are done, I get:\r\n```\r\n321\r\n321\r\n321\r\n321\r\n321\r\n```\r\n\r\nI have a feeling it has something to do with how Java handles the array and how the int[] is being added but I&#39;m not sure.\r\n\r\nCode here:\r\n```\r\n\tpublic Stack&lt;int[]&gt; perm(int[] labels) {\r\n\t\tStack&lt;int[]&gt; perm = new Stack&lt;int[]&gt;();\r\n\r\n\t\tint[] value = labels;\r\n\t\tArrays.sort(value);\r\n\t\tint k = labels.length;\r\n\r\n\t\tboolean permutationsComplete = false;\r\n\t\tperm.add(value);\r\n\r\n\t\twhile (!permutationsComplete) {\r\n\t\t\t\r\n\t\t\tint i = k - 1;\r\n\t\t\twhile (i &gt; 0 &amp;&amp; value[i - 1] &gt;= value[i]) {\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\r\n\t\t\tif (i &lt; 1) {\r\n\t\t\t\tpermutationsComplete = true;\r\n\t\t\t\tSystem.out.println();\r\n\t\t\t\tfor(int[] list : perm) {\r\n\t\t\t\t\tthis.printList(list);\r\n\t\t\t\t}\r\n\t\t\t\treturn perm;\r\n\t\t\t}\r\n\r\n\t\t\tint j = k;\r\n\t\t\twhile (value[j - 1] &lt;= value[i - 1]) {\r\n\t\t\t\tj--;\r\n\t\t\t}\r\n\r\n\t\t\tint swap1 = value[i - 1];\r\n\t\t\tvalue[i - 1] = value[j - 1];\r\n\t\t\tvalue[j - 1] = swap1;\r\n\r\n\t\t\ti++;\r\n\t\t\tj = k;\r\n\r\n\t\t\twhile (i &lt; j) {\r\n\t\t\t\tint swap2 = value[i - 1];\r\n\t\t\t\tvalue[i - 1] = value[j - 1];\r\n\t\t\t\tvalue[j - 1] = swap2;\r\n\t\t\t\ti++;\r\n\t\t\t\tj--;\r\n\t\t\t}\r\n\t\t\tperm.add(value);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n```","title":"Adding an int Array after modification but ends up adding the old int Array","body":"<p>I'm writing code to take an int[] and adding all of its permutations to a Collection. The code works and makes the correct swaps. Before adding it to the Stack, I have a print statement showing me my array before adding it:</p>\n<pre><code>132\n213\n231\n312\n321\n</code></pre>\n<p>But then when I print the arrays in the stack after the permutations are done, I get:</p>\n<pre><code>321\n321\n321\n321\n321\n</code></pre>\n<p>I have a feeling it has something to do with how Java handles the array and how the int[] is being added but I'm not sure.</p>\n<p>Code here:</p>\n<pre><code>    public Stack&lt;int[]&gt; perm(int[] labels) {\n        Stack&lt;int[]&gt; perm = new Stack&lt;int[]&gt;();\n\n        int[] value = labels;\n        Arrays.sort(value);\n        int k = labels.length;\n\n        boolean permutationsComplete = false;\n        perm.add(value);\n\n        while (!permutationsComplete) {\n            \n            int i = k - 1;\n            while (i &gt; 0 &amp;&amp; value[i - 1] &gt;= value[i]) {\n                i--;\n            }\n\n            if (i &lt; 1) {\n                permutationsComplete = true;\n                System.out.println();\n                for(int[] list : perm) {\n                    this.printList(list);\n                }\n                return perm;\n            }\n\n            int j = k;\n            while (value[j - 1] &lt;= value[i - 1]) {\n                j--;\n            }\n\n            int swap1 = value[i - 1];\n            value[i - 1] = value[j - 1];\n            value[j - 1] = swap1;\n\n            i++;\n            j = k;\n\n            while (i &lt; j) {\n                int swap2 = value[i - 1];\n                value[i - 1] = value[j - 1];\n                value[j - 1] = swap2;\n                i++;\n                j--;\n            }\n            perm.add(value);\n        }\n        return null;\n    }\n</code></pre>\n"},{"tags":["java","maven","tomcat","servlet-3.0","spring5"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1663789342,"post_id":73793237,"comment_id":130324744,"body_markdown":"Do you know how to read a stacktrace?","body":"Do you know how to read a stacktrace?"},{"owner":{"account_id":5640896,"reputation":187,"user_id":4464806,"display_name":"Abhinash Jha"},"score":0,"creation_date":1663797624,"post_id":73793237,"comment_id":130326864,"body_markdown":"I got the complete error log from console in case not to miss out on any.Strangely, I didn&#39;t get this error when restarted today. But I am stuck with another error now.","body":"I got the complete error log from console in case not to miss out on any.Strangely, I didn&#39;t get this error when restarted today. But I am stuck with another error now."}],"answers":[{"tags":[],"owner":{"account_id":5640896,"reputation":187,"user_id":4464806,"display_name":"Abhinash Jha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663800534,"creation_date":1663800534,"answer_id":73807668,"question_id":73793237,"body_markdown":"SO, the original error was fixed by somehow its own. I didn&#39;t see that error again. The second error(Edit 1) got fixed when I started the tomcat server from terminal and not using Smart Tomcat which is an intellij plugin.","title":"java.lang.NoClassDefFoundError: org/springframework/core/metrics/ApplicationStartup on startup using Spring5","body":"<p>SO, the original error was fixed by somehow its own. I didn't see that error again. The second error(Edit 1) got fixed when I started the tomcat server from terminal and not using Smart Tomcat which is an intellij plugin.</p>\n"}],"owner":{"account_id":5640896,"reputation":187,"user_id":4464806,"display_name":"Abhinash Jha"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1330,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663800534,"creation_date":1663712843,"question_id":73793237,"body_markdown":"I am getting below error on server startup when trying to have a REST API with spring 5.\r\nMaven build is generating the war, but when I am running the application using Smart Tomcat, I am getting below error.\r\n\r\n    20-Sep-2022 17:16:59.737 INFO [main] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\r\n    20-Sep-2022 17:16:59.748 INFO [main] org.springframework.web.context.ContextLoader.initWebApplicationContext Root WebApplicationContext: initialization started\r\n    20-Sep-2022 17:16:59.767 SEVERE [main] org.springframework.web.context.ContextLoader.initWebApplicationContext Context initialization failed\r\n    \torg.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.context.support.XmlWebApplicationContext]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/core/metrics/ApplicationStartup\r\n    \t\tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:175)\r\n    \t\tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:120)\r\n    \t\tat org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:345)\r\n    \t\tat org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:278)\r\n    \t\tat org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103)\r\n    \t\tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4768)\r\n    \t\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\r\n    \t\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\r\n    \t\tat org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:690)\r\n    \t\tat org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1889)\r\n    \t\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \t\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \t\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \t\tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\r\n    \t\tat org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:583)\r\n    \t\tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:473)\r\n    \t\tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\r\n    \t\tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\r\n    \t\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\r\n    \t\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n    \t\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n    \t\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \t\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \t\tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\r\n    \t\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n    \t\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\tat org.apache.catalina.startup.Catalina.start(Catalina.java:772)\r\n    \t\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \t\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \t\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \t\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \t\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n    \t\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n    \tCaused by: java.lang.NoClassDefFoundError: org/springframework/core/metrics/ApplicationStartup\r\n    \t\tat org.springframework.context.support.AbstractApplicationContext.&lt;init&gt;(AbstractApplicationContext.java:229)\r\n    \t\tat org.springframework.context.support.AbstractRefreshableApplicationContext.&lt;init&gt;(AbstractRefreshableApplicationContext.java:81)\r\n    \t\tat org.springframework.context.support.AbstractRefreshableConfigApplicationContext.&lt;init&gt;(AbstractRefreshableConfigApplicationContext.java:51)\r\n    \t\tat org.springframework.web.context.support.AbstractRefreshableWebApplicationContext.&lt;init&gt;(AbstractRefreshableWebApplicationContext.java:101)\r\n    \t\tat org.springframework.web.context.support.XmlWebApplicationContext.&lt;init&gt;(XmlWebApplicationContext.java:62)\r\n    \t\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \t\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    \t\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \t\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n    \t\tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:163)\r\n    \t\t... 45 more\r\n    \tCaused by: java.lang.ClassNotFoundException: org.springframework.core.metrics.ApplicationStartup\r\n    \t\tat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1412)\r\n    \t\tat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1220)\r\n    \t\t... 55 more\r\n\r\nI have following dependencies in pom.xml:\r\n\r\n    &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n                &lt;version&gt;${jackson.databind-version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-oxm&lt;/artifactId&gt;\r\n                &lt;version&gt;5.3.22&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.ws&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-ws-core&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.3&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\nAlso, have the following plugin added:\r\n\r\n    &lt;plugin&gt;\r\n                        &lt;groupId&gt;org.jvnet.jaxb2.maven2&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;maven-jaxb2-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;0.14.0&lt;/version&gt;\r\n                        &lt;executions&gt;\r\n                            &lt;execution&gt;\r\n                                &lt;goals&gt;\r\n                                    &lt;goal&gt;generate&lt;/goal&gt;\r\n                                &lt;/goals&gt;\r\n                            &lt;/execution&gt;\r\n                        &lt;/executions&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;schemaLanguage&gt;WSDL&lt;/schemaLanguage&gt;\r\n                            &lt;generateDirectory&gt;${project.basedir}/src/main/java&lt;/generateDirectory&gt;\r\n                            &lt;generatePackage&gt;com.org.choicehotels.springsoap.client.gen&lt;/generatePackage&gt;\r\n                            &lt;schemaDirectory&gt;${project.basedir}/src/main/resources/wsdl&lt;/schemaDirectory&gt;\r\n                            &lt;schemaIncludes&gt;\r\n                                &lt;include&gt;hotels.wsdl&lt;/include&gt;\r\n                            &lt;/schemaIncludes&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/plugin&gt;\r\nBelow is web.xml:\r\n\r\n    &lt;context-param&gt;\r\n    \t\t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n    \t\t&lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;\r\n    \t&lt;/context-param&gt;\r\n    \t&lt;listener&gt;\r\n    \t\t&lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\r\n    \t&lt;/listener&gt;\r\n    \t&lt;listener&gt;\r\n    \t\t&lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;\r\n    \t&lt;/listener&gt;\r\n    \t&lt;servlet&gt;\r\n    \t\t&lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\r\n    \t\t&lt;servlet-class&gt;org.springframework.web.SpringServletContainerInitializer&lt;/servlet-class&gt;\r\n    \t\t&lt;init-param&gt;\r\n    \t\t\t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n    \t\t\t&lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;\r\n    \t\t&lt;/init-param&gt;\r\n    \t\t&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n    \t&lt;/servlet&gt;\r\n    \t&lt;servlet-mapping&gt;\r\n    \t\t&lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\r\n    \t\t&lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n    \t&lt;/servlet-mapping&gt;\r\nJust to give some extra context, I have to use this REST Api to further connect to a SOAP service as part of requirement.\r\nThanks!\r\n\r\nEdit 1: Strangely, I didn&#39;t get this error anymore. But, when starting the tomcat, I am getting the below error in Tomcat Localhost log:\r\n\r\n    21-Sep-2022 16:50:36.298 INFO [main] org.apache.catalina.core.ApplicationContext.log No Spring WebApplicationInitializer types detected on classpath\r\n    21-Sep-2022 16:50:36.306 INFO [main] org.apache.catalina.core.ApplicationContext.log Initializing Spring root WebApplicationContext\r\n    21-Sep-2022 16:50:37.143 INFO [main] org.apache.catalina.core.ApplicationContext.log Marking servlet [appServlet] as unavailable\r\n    21-Sep-2022 16:50:37.143 SEVERE [main] org.apache.catalina.core.StandardContext.loadOnStartup Servlet [appServlet] in web application [/ChoiceHotels-rest-spring5] threw load() exception\r\n    \tjava.lang.ClassCastException: org.springframework.web.SpringServletContainerInitializer cannot be cast to javax.servlet.Servlet\r\n    \t\tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1070)\r\n    \t\tat org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1010)\r\n    \t\tat org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4957)\r\n    \t\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5264)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\r\n    \t\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\r\n    \t\tat org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:690)\r\n    \t\tat org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1889)\r\n    \t\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \t\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \t\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \t\tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\r\n    \t\tat org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:583)\r\n    \t\tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:473)\r\n    \t\tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\r\n    \t\tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\r\n    \t\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\r\n    \t\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n    \t\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n    \t\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \t\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \t\tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\r\n    \t\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n    \t\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\tat org.apache.catalina.startup.Catalina.start(Catalina.java:772)\r\n    \t\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \t\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \t\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \t\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \t\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n    \t\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n\r\nAlthough, I in console, it shows that server startup is successful:\r\n\r\n    21-Sep-2022 16:50:37.153 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler [&quot;http-nio-8080&quot;]\r\n    21-Sep-2022 16:50:37.159 INFO [main] org.apache.catalina.startup.Catalina.start Server startup in [1580] milliseconds\r\n    http://localhost:8080/ChoiceHotels-rest-spring5\r\nI am getting 404 error when trying to access the url.","title":"java.lang.NoClassDefFoundError: org/springframework/core/metrics/ApplicationStartup on startup using Spring5","body":"<p>I am getting below error on server startup when trying to have a REST API with spring 5.\nMaven build is generating the war, but when I am running the application using Smart Tomcat, I am getting below error.</p>\n<pre><code>20-Sep-2022 17:16:59.737 INFO [main] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n20-Sep-2022 17:16:59.748 INFO [main] org.springframework.web.context.ContextLoader.initWebApplicationContext Root WebApplicationContext: initialization started\n20-Sep-2022 17:16:59.767 SEVERE [main] org.springframework.web.context.ContextLoader.initWebApplicationContext Context initialization failed\n    org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.context.support.XmlWebApplicationContext]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/core/metrics/ApplicationStartup\n        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:175)\n        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:120)\n        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:345)\n        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:278)\n        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103)\n        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4768)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\n        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:690)\n        at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1889)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\n        at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:583)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:473)\n        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\n        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\n        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n        at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\n        at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\n        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n        at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\n    Caused by: java.lang.NoClassDefFoundError: org/springframework/core/metrics/ApplicationStartup\n        at org.springframework.context.support.AbstractApplicationContext.&lt;init&gt;(AbstractApplicationContext.java:229)\n        at org.springframework.context.support.AbstractRefreshableApplicationContext.&lt;init&gt;(AbstractRefreshableApplicationContext.java:81)\n        at org.springframework.context.support.AbstractRefreshableConfigApplicationContext.&lt;init&gt;(AbstractRefreshableConfigApplicationContext.java:51)\n        at org.springframework.web.context.support.AbstractRefreshableWebApplicationContext.&lt;init&gt;(AbstractRefreshableWebApplicationContext.java:101)\n        at org.springframework.web.context.support.XmlWebApplicationContext.&lt;init&gt;(XmlWebApplicationContext.java:62)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:163)\n        ... 45 more\n    Caused by: java.lang.ClassNotFoundException: org.springframework.core.metrics.ApplicationStartup\n        at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1412)\n        at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1220)\n        ... 55 more\n</code></pre>\n<p>I have following dependencies in pom.xml:</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;${jackson.databind-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-oxm&lt;/artifactId&gt;\n            &lt;version&gt;5.3.22&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.ws&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-ws-core&lt;/artifactId&gt;\n            &lt;version&gt;3.1.3&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Also, have the following plugin added:</p>\n<pre><code>&lt;plugin&gt;\n                    &lt;groupId&gt;org.jvnet.jaxb2.maven2&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-jaxb2-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;0.14.0&lt;/version&gt;\n                    &lt;executions&gt;\n                        &lt;execution&gt;\n                            &lt;goals&gt;\n                                &lt;goal&gt;generate&lt;/goal&gt;\n                            &lt;/goals&gt;\n                        &lt;/execution&gt;\n                    &lt;/executions&gt;\n                    &lt;configuration&gt;\n                        &lt;schemaLanguage&gt;WSDL&lt;/schemaLanguage&gt;\n                        &lt;generateDirectory&gt;${project.basedir}/src/main/java&lt;/generateDirectory&gt;\n                        &lt;generatePackage&gt;com.org.choicehotels.springsoap.client.gen&lt;/generatePackage&gt;\n                        &lt;schemaDirectory&gt;${project.basedir}/src/main/resources/wsdl&lt;/schemaDirectory&gt;\n                        &lt;schemaIncludes&gt;\n                            &lt;include&gt;hotels.wsdl&lt;/include&gt;\n                        &lt;/schemaIncludes&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n</code></pre>\n<p>Below is web.xml:</p>\n<pre><code>&lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.SpringServletContainerInitializer&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n            &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n</code></pre>\n<p>Just to give some extra context, I have to use this REST Api to further connect to a SOAP service as part of requirement.\nThanks!</p>\n<p>Edit 1: Strangely, I didn't get this error anymore. But, when starting the tomcat, I am getting the below error in Tomcat Localhost log:</p>\n<pre><code>21-Sep-2022 16:50:36.298 INFO [main] org.apache.catalina.core.ApplicationContext.log No Spring WebApplicationInitializer types detected on classpath\n21-Sep-2022 16:50:36.306 INFO [main] org.apache.catalina.core.ApplicationContext.log Initializing Spring root WebApplicationContext\n21-Sep-2022 16:50:37.143 INFO [main] org.apache.catalina.core.ApplicationContext.log Marking servlet [appServlet] as unavailable\n21-Sep-2022 16:50:37.143 SEVERE [main] org.apache.catalina.core.StandardContext.loadOnStartup Servlet [appServlet] in web application [/ChoiceHotels-rest-spring5] threw load() exception\n    java.lang.ClassCastException: org.springframework.web.SpringServletContainerInitializer cannot be cast to javax.servlet.Servlet\n        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1070)\n        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1010)\n        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4957)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5264)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\n        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:690)\n        at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1889)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\n        at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:583)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:473)\n        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\n        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\n        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n        at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\n        at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\n        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n        at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\n</code></pre>\n<p>Although, I in console, it shows that server startup is successful:</p>\n<pre><code>21-Sep-2022 16:50:37.153 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler [&quot;http-nio-8080&quot;]\n21-Sep-2022 16:50:37.159 INFO [main] org.apache.catalina.startup.Catalina.start Server startup in [1580] milliseconds\nhttp://localhost:8080/ChoiceHotels-rest-spring5\n</code></pre>\n<p>I am getting 404 error when trying to access the url.</p>\n"},{"tags":["java","log4j2","apache-storm"],"answers":[{"tags":[],"owner":{"account_id":18975267,"reputation":409,"user_id":13847890,"display_name":"moosehead42"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663669075,"creation_date":1658166352,"answer_id":73026498,"question_id":72946624,"body_markdown":"Yes, sure. You can add a `log4j2.xml` file to your `resources`-folder and specify the appenders as you like. \r\n\r\nFor instance:\r\n```xml\r\n        &lt;RollingFile name=&quot;mylog&quot;\r\n                 fileName=&quot;path/to/log.file&quot;\r\n                 filePattern=&quot;path/to/log.file.%i.gz&quot;\r\n                 append=&quot;false&quot;\r\n                 createOnDemand=&quot;true&quot;&gt;\r\n            &lt;PatternLayout&gt;\r\n                &lt;pattern&gt;${patternNoTime}&lt;/pattern&gt;\r\n            &lt;/PatternLayout&gt;\r\n            &lt;Policies&gt;\r\n                &lt;SizeBasedTriggeringPolicy size=&quot;100 MB&quot;/&gt;\r\n            &lt;/Policies&gt;\r\n            &lt;DefaultRolloverStrategy max=&quot;4&quot;/&gt;\r\n        &lt;/RollingFile&gt;\r\n```\r\n","title":"Log4j appender append/store log file to a particular location in Storm cluster environment","body":"<p>Yes, sure. You can add a <code>log4j2.xml</code> file to your <code>resources</code>-folder and specify the appenders as you like.</p>\n<p>For instance:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;RollingFile name=&quot;mylog&quot;\n                 fileName=&quot;path/to/log.file&quot;\n                 filePattern=&quot;path/to/log.file.%i.gz&quot;\n                 append=&quot;false&quot;\n                 createOnDemand=&quot;true&quot;&gt;\n            &lt;PatternLayout&gt;\n                &lt;pattern&gt;${patternNoTime}&lt;/pattern&gt;\n            &lt;/PatternLayout&gt;\n            &lt;Policies&gt;\n                &lt;SizeBasedTriggeringPolicy size=&quot;100 MB&quot;/&gt;\n            &lt;/Policies&gt;\n            &lt;DefaultRolloverStrategy max=&quot;4&quot;/&gt;\n        &lt;/RollingFile&gt;\n</code></pre>\n"}],"owner":{"account_id":25516160,"reputation":1,"user_id":19306984,"display_name":"SAWAN KUMAR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663800103,"creation_date":1657595372,"question_id":72946624,"body_markdown":"Is there any way to change the location of the log file for one particular appender of log4j in a Storm cluster environment? \r\nSuppose I want to keep all logger files of `RollingFileInfoappender` at `/logs/storm` directory.","title":"Log4j appender append/store log file to a particular location in Storm cluster environment","body":"<p>Is there any way to change the location of the log file for one particular appender of log4j in a Storm cluster environment?\nSuppose I want to keep all logger files of <code>RollingFileInfoappender</code> at <code>/logs/storm</code> directory.</p>\n"},{"tags":["java","multidimensional-array"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1663800141,"post_id":73807508,"comment_id":130327337,"body_markdown":"I assume this is either a leftover or a hidden type cast.","body":"I assume this is either a leftover or a hidden type cast."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1663801405,"post_id":73807508,"comment_id":130327572,"body_markdown":"Strange. I would expect that code to give &quot;civic&quot; as the result, because lowercase &#39;c&#39; is higher than uppercase &#39;W&#39;. By the way, why do you append empty string when you find a new largest?  I would think that isn&#39;t needed.","body":"Strange. I would expect that code to give &quot;civic&quot; as the result, because lowercase &#39;c&#39; is higher than uppercase &#39;W&#39;. By the way, why do you append empty string when you find a new largest?  I would think that isn&#39;t needed."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663799321,"creation_date":1663799321,"answer_id":73807551,"question_id":73807508,"body_markdown":"I cannot see a flaw in the code. So look at the definition of &#39;largest string&#39;: It is possible that the code really returns exactly that value that you chose in the beginning.\r\n\r\nThis can be easily tested by choosing a different start value.\r\n\r\nOn top of that you could add more System.out.println, or even better use a debugger to step through your code. This will give you a very good understanding of how the JVM executes your code.","title":"Finding the largest string in the second column of a 2d array","body":"<p>I cannot see a flaw in the code. So look at the definition of 'largest string': It is possible that the code really returns exactly that value that you chose in the beginning.</p>\n<p>This can be easily tested by choosing a different start value.</p>\n<p>On top of that you could add more System.out.println, or even better use a debugger to step through your code. This will give you a very good understanding of how the JVM executes your code.</p>\n"},{"tags":[],"owner":{"account_id":18559672,"reputation":300,"user_id":13523946,"display_name":"notAPPP"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663799762,"creation_date":1663799762,"answer_id":73807598,"question_id":73807508,"body_markdown":"You need to comapre length, compareTo is not good choice, please look what are you trying to do:\r\n\r\n    System.out.println(&quot;Wrangler&quot;.compareTo(&quot;civic&quot;));\r\n    System.out.println(&quot;civic&quot;.compareTo(&quot;Corolla&quot;));\r\n    System.out.println(&quot;Corolla&quot;.compareTo(&quot;Wrangler&quot;));\r\n\r\nresult:\r\n\r\n    -12 32 -20\r\n","title":"Finding the largest string in the second column of a 2d array","body":"<p>You need to comapre length, compareTo is not good choice, please look what are you trying to do:</p>\n<pre><code>System.out.println(&quot;Wrangler&quot;.compareTo(&quot;civic&quot;));\nSystem.out.println(&quot;civic&quot;.compareTo(&quot;Corolla&quot;));\nSystem.out.println(&quot;Corolla&quot;.compareTo(&quot;Wrangler&quot;));\n</code></pre>\n<p>result:</p>\n<pre><code>-12 32 -20\n</code></pre>\n"}],"owner":{"account_id":26211519,"reputation":1,"user_id":19890315,"display_name":"Barley0421"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1663799762,"creation_date":1663798797,"question_id":73807508,"body_markdown":"I have a 2d array and I&#39;m trying to find the largest string only in the second column of the 2d array, but for some reason it only gives me the first string in the 2nd column even if there is a bigger string. Here&#39;s what I have:\r\n```\r\nclass Main{\r\n    public static void main(String[] args) {\r\n        \r\n        String[][] data = {\r\n            {&quot;Jeep&quot;, &quot;Wrangler&quot;, &quot;35000&quot;},\r\n            {&quot;Honda&quot;, &quot;civic&quot;, &quot;25000&quot;},\r\n            {&quot;Toyota&quot;, &quot;Corolla&quot;, &quot;22000&quot;}\r\n        };\r\n\r\n        \r\n        LargestName(data);\r\n    }\r\n\r\n    public static void LargestName(String[][] a){\r\n        String largestN = a[0][1];\r\n        for(int i = 0; i &lt; a.length; i++){\r\n            if(largestN.compareTo(a[i][1])&lt;0){ \r\n                largestN = a[i][1] + &quot;&quot;;\r\n            }\r\n        }\r\n        System.out.println(largestN);\r\n    }    \r\n}\r\n```\r\n\r\nAgain, I&#39;m trying to compare the strings only in the second column of the 2d array but with what I have it only gives me the first string of the 2nd column &quot;Wrangler&quot;, even if there is a larger string in the 2nd column. Please help\r\n","title":"Finding the largest string in the second column of a 2d array","body":"<p>I have a 2d array and I'm trying to find the largest string only in the second column of the 2d array, but for some reason it only gives me the first string in the 2nd column even if there is a bigger string. Here's what I have:</p>\n<pre><code>class Main{\n    public static void main(String[] args) {\n        \n        String[][] data = {\n            {&quot;Jeep&quot;, &quot;Wrangler&quot;, &quot;35000&quot;},\n            {&quot;Honda&quot;, &quot;civic&quot;, &quot;25000&quot;},\n            {&quot;Toyota&quot;, &quot;Corolla&quot;, &quot;22000&quot;}\n        };\n\n        \n        LargestName(data);\n    }\n\n    public static void LargestName(String[][] a){\n        String largestN = a[0][1];\n        for(int i = 0; i &lt; a.length; i++){\n            if(largestN.compareTo(a[i][1])&lt;0){ \n                largestN = a[i][1] + &quot;&quot;;\n            }\n        }\n        System.out.println(largestN);\n    }    \n}\n</code></pre>\n<p>Again, I'm trying to compare the strings only in the second column of the 2d array but with what I have it only gives me the first string of the 2nd column &quot;Wrangler&quot;, even if there is a larger string in the 2nd column. Please help</p>\n"},{"tags":["java","function","artificial-intelligence","genetic-programming"],"comments":[{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1663795892,"post_id":73806975,"comment_id":130326490,"body_markdown":"For the first case, you need to share more details to be able to tell you. You can definitely design your code to change the behaviour depending on data collected, but your example is too generic. About the second question yes, it is possible. In java you can write source code programmatically, compile it on the fly and execute it at your taste.","body":"For the first case, you need to share more details to be able to tell you. You can definitely design your code to change the behaviour depending on data collected, but your example is too generic. About the second question yes, it is possible. In java you can write source code programmatically, compile it on the fly and execute it at your taste."},{"owner":{"account_id":18559672,"reputation":300,"user_id":13523946,"display_name":"notAPPP"},"score":0,"creation_date":1663796636,"post_id":73806975,"comment_id":130326657,"body_markdown":"You can check ClassLoader and it&#39;s hard to give an exact answer","body":"You can check ClassLoader and it&#39;s hard to give an exact answer"},{"owner":{"account_id":15182592,"reputation":15,"user_id":10955514,"display_name":"Marcocorico"},"score":0,"creation_date":1663796927,"post_id":73806975,"comment_id":130326719,"body_markdown":"Let&#39;s focus on the second part. I&#39;m not sure if it was clear that I want to run a code that will be able to modify some variables of my current program. If we were talking of the same thing, I would be happy to see a tutorial about writing source code programmatically","body":"Let&#39;s focus on the second part. I&#39;m not sure if it was clear that I want to run a code that will be able to modify some variables of my current program. If we were talking of the same thing, I would be happy to see a tutorial about writing source code programmatically"},{"owner":{"account_id":15182592,"reputation":15,"user_id":10955514,"display_name":"Marcocorico"},"score":0,"creation_date":1663797090,"post_id":73806975,"comment_id":130326761,"body_markdown":"thanks, I will try to check ClassLoader","body":"thanks, I will try to check ClassLoader"},{"owner":{"account_id":55989,"reputation":17809,"user_id":167745,"accept_rate":76,"display_name":"Stewart"},"score":0,"creation_date":1663798167,"post_id":73806975,"comment_id":130326982,"body_markdown":"Lookup BeanShell. It allows scripting using Java.  https://beanshell.github.io/","body":"Lookup BeanShell. It allows scripting using Java.  <a href=\"https://beanshell.github.io/\" rel=\"nofollow noreferrer\">beanshell.github.io</a>"}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663799617,"creation_date":1663799617,"answer_id":73807585,"question_id":73806975,"body_markdown":"You can change class files and their code at runtime using [BCEL][1].\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-bcel/","title":"How to change a function code during the execution in java","body":"<p>You can change class files and their code at runtime using <a href=\"https://commons.apache.org/proper/commons-bcel/\" rel=\"nofollow noreferrer\">BCEL</a>.</p>\n"}],"owner":{"account_id":15182592,"reputation":15,"user_id":10955514,"display_name":"Marcocorico"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663799617,"creation_date":1663794642,"question_id":73806975,"body_markdown":"I&#39;m trying to make some kind of AI that will have acess to his own code and can modify it during the execution to be able to evolve\r\n\r\nfor example, during the runtime I want it to be able to change it&#39;s code from :\r\n```\r\nif (a&gt;1){doSomething();}\r\n```\r\nto :\r\n```\r\nif (a&gt;1){doSomethingElse();}\r\n```\r\n\r\nIt is possible to do such a thing ?\r\n\r\n\r\nIf it is not possible, is it possible instead of writting it in a function, to have a String containing the algorithm like this : \r\n\r\n```\r\nString code = &quot;if (a&gt;1){doSomethingElse();}&quot;;\r\n```\r\n\r\nand running the string as code like that :\r\n\r\n```\r\nrun(code);\r\n```\r\n\r\n\r\nAnd again, if that&#39;s not possible in java, is there a programming language where it can be possible ?\r\n\r\n\r\n","title":"How to change a function code during the execution in java","body":"<p>I'm trying to make some kind of AI that will have acess to his own code and can modify it during the execution to be able to evolve</p>\n<p>for example, during the runtime I want it to be able to change it's code from :</p>\n<pre><code>if (a&gt;1){doSomething();}\n</code></pre>\n<p>to :</p>\n<pre><code>if (a&gt;1){doSomethingElse();}\n</code></pre>\n<p>It is possible to do such a thing ?</p>\n<p>If it is not possible, is it possible instead of writting it in a function, to have a String containing the algorithm like this :</p>\n<pre><code>String code = &quot;if (a&gt;1){doSomethingElse();}&quot;;\n</code></pre>\n<p>and running the string as code like that :</p>\n<pre><code>run(code);\n</code></pre>\n<p>And again, if that's not possible in java, is there a programming language where it can be possible ?</p>\n"},{"tags":["java","spring","spring-webflux"],"comments":[{"owner":{"account_id":7630732,"reputation":1728,"user_id":5785871,"accept_rate":80,"display_name":"mslowiak"},"score":0,"creation_date":1662750647,"post_id":73666400,"comment_id":130086525,"body_markdown":"What is `studFor`? :)","body":"What is <code>studFor</code>? :)"},{"owner":{"account_id":5975599,"reputation":103,"user_id":4696553,"display_name":"Django"},"score":0,"creation_date":1663799313,"post_id":73666400,"comment_id":130327203,"body_markdown":"I am sorry, it&#39;s `stubFor` its a function in `WorkMock`. It is being used for mocking an endpoint call in our integration test","body":"I am sorry, it&#39;s <code>stubFor</code> its a function in <code>WorkMock</code>. It is being used for mocking an endpoint call in our integration test"}],"answers":[{"tags":[],"owner":{"account_id":5975599,"reputation":103,"user_id":4696553,"display_name":"Django"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663799549,"creation_date":1663799549,"answer_id":73807575,"question_id":73666400,"body_markdown":"I test the result, and I can see `WireMock.stubFor` is working with the `subscribe` call.\r\n\r\nFor more explanation,\r\nWe first create a `WireMock.stubFor` for some endpoint call.\r\nThen we make an actual call using the `webTestClient` to do integration test. And then verify the result using \r\n```\r\nverify(exactly(1), postRequestedFor(urlEqualTo(SOME_URL)));\r\n// For SOME_URL create a `stubFor`\r\n```","title":"How to test webclient of Disposable type call in Spring Webflux","body":"<p>I test the result, and I can see <code>WireMock.stubFor</code> is working with the <code>subscribe</code> call.</p>\n<p>For more explanation,\nWe first create a <code>WireMock.stubFor</code> for some endpoint call.\nThen we make an actual call using the <code>webTestClient</code> to do integration test. And then verify the result using</p>\n<pre><code>verify(exactly(1), postRequestedFor(urlEqualTo(SOME_URL)));\n// For SOME_URL create a `stubFor`\n</code></pre>\n"}],"owner":{"account_id":5975599,"reputation":103,"user_id":4696553,"display_name":"Django"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":368,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663799549,"creation_date":1662749421,"question_id":73666400,"body_markdown":"Is it possible to use `stubFor` here? \r\nIf yes, how to do it? \r\nIf not, how to test this code?\r\n\r\n```\r\n    public Mono&lt;Void&gt; trelloCallback(Type payload) {\r\n        webClient.post()\r\n                 .uri(URL)\r\n                 .bodyValue(payload)\r\n                 .headers(httpHeaders -&gt; httpHeaders.add(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE))\r\n                 .retrieve()\r\n                 .bodyToMono(Void.class)\r\n                 .subscribe();\r\n        return Mono.empty();\r\n    }\r\n```\r\n\r\nInfo: If we add `.subscribe` to the code, it runs in the background.\r\n\r\n","title":"How to test webclient of Disposable type call in Spring Webflux","body":"<p>Is it possible to use <code>stubFor</code> here?\nIf yes, how to do it?\nIf not, how to test this code?</p>\n<pre><code>    public Mono&lt;Void&gt; trelloCallback(Type payload) {\n        webClient.post()\n                 .uri(URL)\n                 .bodyValue(payload)\n                 .headers(httpHeaders -&gt; httpHeaders.add(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE))\n                 .retrieve()\n                 .bodyToMono(Void.class)\n                 .subscribe();\n        return Mono.empty();\n    }\n</code></pre>\n<p>Info: If we add <code>.subscribe</code> to the code, it runs in the background.</p>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":6623746,"reputation":1,"user_id":5114602,"display_name":"Stratdi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663686902,"creation_date":1663686902,"answer_id":73788983,"question_id":73779660,"body_markdown":"You can create a configuration class which maps your properties into a map.\r\n\r\n```\r\n@Getter\r\n@Configuration\r\n@ConfigurationProperties\r\npublic class Properties {\r\n\t\r\n\tprivate Map&lt;String, String[]&gt; external = new HashMap&lt;&gt;();\r\n\t\r\n}\r\n```\r\n\r\nIn my opinion, you should avoid using String array as value type. Instead of, you should create a POJO to map the url and timeout properties.\r\n\r\n```\r\n@Getter\r\n@Configuration\r\n@ConfigurationProperties\r\npublic class Properties {\r\n\r\n\tprivate Map&lt;String, Data&gt; external = new HashMap&lt;&gt;();\r\n\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    public static class Data {\r\n        private long timeout;\r\n        private String url;\r\n    }\r\n    \r\n}\r\n```\r\n\r\n**Note**: the Properties class must have a getter for the map, and the Data properties must have a getter and setter for each attribute.","title":"How to get child properties from spring config","body":"<p>You can create a configuration class which maps your properties into a map.</p>\n<pre><code>@Getter\n@Configuration\n@ConfigurationProperties\npublic class Properties {\n    \n    private Map&lt;String, String[]&gt; external = new HashMap&lt;&gt;();\n    \n}\n</code></pre>\n<p>In my opinion, you should avoid using String array as value type. Instead of, you should create a POJO to map the url and timeout properties.</p>\n<pre><code>@Getter\n@Configuration\n@ConfigurationProperties\npublic class Properties {\n\n    private Map&lt;String, Data&gt; external = new HashMap&lt;&gt;();\n\n    @Getter\n    @Setter\n    @ToString\n    public static class Data {\n        private long timeout;\n        private String url;\n    }\n    \n}\n</code></pre>\n<p><strong>Note</strong>: the Properties class must have a getter for the map, and the Data properties must have a getter and setter for each attribute.</p>\n"},{"tags":[],"owner":{"account_id":15521882,"reputation":372,"user_id":11564329,"display_name":"Alexey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1663799349,"creation_date":1663799349,"answer_id":73807554,"question_id":73779660,"body_markdown":"this is my solution\r\n\r\n```\r\nprivate static final String BASE_PROPERTY = &quot;clients.&quot;;\r\nprivate static final String DELIMITER = &quot;.&quot;;\r\n\r\nprivate final org.springframework.core.env.Environment environment;\r\n\r\npublic Set&lt;String&gt; getClientNames() {\r\n    return Arrays\r\n        .stream(((EnumerablePropertySource&lt;?&gt;) ((ConfigurableEnvironment) environment)\r\n            .getPropertySources()\r\n            .stream()\r\n            .filter(OriginTrackedMapPropertySource.class::isInstance)\r\n            .findFirst()\r\n            .orElseThrow(RuntimeException::new)).getPropertyNames())\r\n        .filter(currentValue -&gt; StringUtils.startsWith(currentValue, BASE_PROPERTY))\r\n        .map(key -&gt; StringUtils.substringBetween(key, DELIMITER, DELIMITER))\r\n        .filter(Objects::nonNull)\r\n        .collect(Collectors.toSet());\r\n  }\r\n```","title":"How to get child properties from spring config","body":"<p>this is my solution</p>\n<pre><code>private static final String BASE_PROPERTY = &quot;clients.&quot;;\nprivate static final String DELIMITER = &quot;.&quot;;\n\nprivate final org.springframework.core.env.Environment environment;\n\npublic Set&lt;String&gt; getClientNames() {\n    return Arrays\n        .stream(((EnumerablePropertySource&lt;?&gt;) ((ConfigurableEnvironment) environment)\n            .getPropertySources()\n            .stream()\n            .filter(OriginTrackedMapPropertySource.class::isInstance)\n            .findFirst()\n            .orElseThrow(RuntimeException::new)).getPropertyNames())\n        .filter(currentValue -&gt; StringUtils.startsWith(currentValue, BASE_PROPERTY))\n        .map(key -&gt; StringUtils.substringBetween(key, DELIMITER, DELIMITER))\n        .filter(Objects::nonNull)\n        .collect(Collectors.toSet());\n  }\n</code></pre>\n"}],"owner":{"account_id":15521882,"reputation":372,"user_id":11564329,"display_name":"Alexey"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":316,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73807554,"answer_count":2,"score":0,"last_activity_date":1663799349,"creation_date":1663624421,"question_id":73779660,"body_markdown":"I have the following configuration:\r\n```\r\nexternal:\r\n  shop-service:\r\n    url: localhost:8080\r\n    timeout: 5000\r\n  pet-service:\r\n    url: localhost:8081\r\n    timeout: 10000\r\n  user-service:\r\n    url: localhost:8082\r\n    timeout: 15000\r\n```\r\nI want to create some config library that will read these properties in every my service. In every service I can have different clients with different values of properties, but all of them have the same structure. \r\n\r\nAny ways how I can get a map that will contain client name as a key and object that has `url` and `timeout` values, if I know only `external` property at the beginning and don&#39;t know exact client names?","title":"How to get child properties from spring config","body":"<p>I have the following configuration:</p>\n<pre><code>external:\n  shop-service:\n    url: localhost:8080\n    timeout: 5000\n  pet-service:\n    url: localhost:8081\n    timeout: 10000\n  user-service:\n    url: localhost:8082\n    timeout: 15000\n</code></pre>\n<p>I want to create some config library that will read these properties in every my service. In every service I can have different clients with different values of properties, but all of them have the same structure.</p>\n<p>Any ways how I can get a map that will contain client name as a key and object that has <code>url</code> and <code>timeout</code> values, if I know only <code>external</code> property at the beginning and don't know exact client names?</p>\n"},{"tags":["java","png","jpeg","dxf"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1663800568,"post_id":73807482,"comment_id":130327424,"body_markdown":"I somehow doubt it but you could try to use Image Magick with `ProcessBuilder`","body":"I somehow doubt it but you could try to use Image Magick with <code>ProcessBuilder</code>"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1663802257,"post_id":73807482,"comment_id":130327697,"body_markdown":"Converting a raster image to a vector image is pretty hard.  I doubt there are any libraries for doing it.","body":"Converting a raster image to a vector image is pretty hard.  I doubt there are any libraries for doing it."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1663835152,"post_id":73807482,"comment_id":130333829,"body_markdown":"Sorry, my suggestion won&#39;t work. IM &#39;converted&#39;  on my test by simply creating another jpg with a dxf extension. Naughty ;)","body":"Sorry, my suggestion won&#39;t work. IM &#39;converted&#39;  on my test by simply creating another jpg with a dxf extension. Naughty ;)"},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1663841309,"post_id":73807482,"comment_id":130336204,"body_markdown":"Asking for software recommendations is usually off-topic for SO. Instead you could ask at [Software Recommendations](https://softwarerecs.stackexchange.com). \nThat said, I don&#39;t understand why you would want to convert raster images to a CAD/3D/vector format.","body":"Asking for software recommendations is usually off-topic for SO. Instead you could ask at <a href=\"https://softwarerecs.stackexchange.com\">Software Recommendations</a>.  That said, I don&#39;t understand why you would want to convert raster images to a CAD/3D/vector format."}],"owner":{"account_id":7690310,"reputation":46,"user_id":6198198,"display_name":"Dj.B"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663798566,"creation_date":1663798566,"question_id":73807482,"body_markdown":"Hi I want to convert images (png, jpeg) to dxf format in my graduation project.\r\n\r\nI found that I should use Aspose but it&#39;s not free .\r\n\r\nplease is there any open source java library to do that ?","title":"How to convert jpeg image to dxf format in JAVA?","body":"<p>Hi I want to convert images (png, jpeg) to dxf format in my graduation project.</p>\n<p>I found that I should use Aspose but it's not free .</p>\n<p>please is there any open source java library to do that ?</p>\n"},{"tags":["java","spring","aop","sap-commerce-cloud"],"answers":[{"tags":[],"owner":{"account_id":9616061,"reputation":21,"user_id":7138805,"display_name":"Sven W1993"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663798299,"creation_date":1663798299,"answer_id":73807447,"question_id":73789792,"body_markdown":"finally I found a solution on Baeldung: https://www.baeldung.com/aspectj-advise-methods\r\n\r\nmy solution looks like this:\r\n\r\n```\r\n    &lt;aop:config proxy-target-class=&quot;true&quot;&gt;\r\n        &lt;aop:aspect ref=&quot;userGroupAuthorizeAspect&quot;&gt;\r\n            &lt;aop:before pointcut=&quot;@annotation(userGroupAuthorize)&quot; \r\n                        method=&quot;authorizeMethod&quot;/&gt;\r\n        &lt;/aop:aspect&gt;\r\n        &lt;aop:aspect ref=&quot;userGroupAuthorizeAspect&quot;&gt;\r\n            &lt;aop:around pointcut=&quot;@within(com.[...].annotation.UserGroupAuthorize) and execution(* *(..))&quot; \r\n                        method=&quot;authorizeClass&quot;/&gt;\r\n        &lt;/aop:aspect&gt;\r\n    &lt;/aop:config&gt;\r\n```\r\n\r\n```\r\n    public Object authorizeClass(ProceedingJoinPoint pjp) throws Throwable {\r\n        MethodSignature signature = (MethodSignature) pjp.getSignature();\r\n        UserGroupAuthorize userGroupAuthorize = signature.getMethod().getDeclaringClass()\r\n            .getAnnotation(UserGroupAuthorize.class);\r\n        authorizeMethod(userGroupAuthorize);\r\n        return pjp.proceed();\r\n    }\r\n```","title":"Spring XML Aspect before Annotation an Class not working","body":"<p>finally I found a solution on Baeldung: <a href=\"https://www.baeldung.com/aspectj-advise-methods\" rel=\"nofollow noreferrer\">https://www.baeldung.com/aspectj-advise-methods</a></p>\n<p>my solution looks like this:</p>\n<pre><code>    &lt;aop:config proxy-target-class=&quot;true&quot;&gt;\n        &lt;aop:aspect ref=&quot;userGroupAuthorizeAspect&quot;&gt;\n            &lt;aop:before pointcut=&quot;@annotation(userGroupAuthorize)&quot; \n                        method=&quot;authorizeMethod&quot;/&gt;\n        &lt;/aop:aspect&gt;\n        &lt;aop:aspect ref=&quot;userGroupAuthorizeAspect&quot;&gt;\n            &lt;aop:around pointcut=&quot;@within(com.[...].annotation.UserGroupAuthorize) and execution(* *(..))&quot; \n                        method=&quot;authorizeClass&quot;/&gt;\n        &lt;/aop:aspect&gt;\n    &lt;/aop:config&gt;\n</code></pre>\n<pre><code>    public Object authorizeClass(ProceedingJoinPoint pjp) throws Throwable {\n        MethodSignature signature = (MethodSignature) pjp.getSignature();\n        UserGroupAuthorize userGroupAuthorize = signature.getMethod().getDeclaringClass()\n            .getAnnotation(UserGroupAuthorize.class);\n        authorizeMethod(userGroupAuthorize);\n        return pjp.proceed();\n    }\n</code></pre>\n"}],"owner":{"account_id":9616061,"reputation":21,"user_id":7138805,"display_name":"Sven W1993"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663798299,"creation_date":1663690864,"question_id":73789792,"body_markdown":"i&#39;m currently trying to using a custom annotation at method and class level to execute code via an aspect. It is a SAP Commerce Cloud project (newest version).\r\n\r\n**On method level it works fine** but if the annotation is **on the class it doesn&#39;t** enter my Aspect. Why? Hope someone can help me.\r\n\r\n\r\n**Annotation**\r\n```\r\n@Target({ElementType.METHOD, ElementType.TYPE})\r\n@Retention(RetentionPolicy.RUNTIME)\r\npublic @interface UserGroupAuthorize {\r\n\r\n    UserGroup[] groups() default {};\r\n\r\n}\r\n```\r\n**spring.xml**\r\n```\r\n    &lt;aop:aspectj-autoproxy proxy-target-class=&quot;true&quot; expose-proxy=&quot;true&quot;/&gt;\r\n\r\n    &lt;bean id=&quot;userGroupAuthorizeAspect&quot; class=&quot;com.[...].annotation.UserGroupAuthorizeAspect&quot;&gt;\r\n        &lt;constructor-arg name=&quot;userService&quot; ref=&quot;userService&quot;/&gt;\r\n    &lt;/bean&gt;\r\n    &lt;aop:config proxy-target-class=&quot;true&quot;&gt;\r\n        &lt;aop:aspect id=&quot;userGroupAuthorizeAspectId&quot; ref=&quot;userGroupAuthorizeAspect&quot;&gt;\r\n            &lt;aop:pointcut id=&quot;userGroupAuthorizeAnnotation&quot; expression=&quot;@annotation(userGroupAuthorize)&quot;/&gt;\r\n            &lt;aop:before pointcut-ref=&quot;userGroupAuthorizeAnnotation&quot; method=&quot;authorize&quot;/&gt;\r\n        &lt;/aop:aspect&gt;\r\n    &lt;/aop:config&gt;\r\n```\r\n**Aspect**\r\n```\r\npublic class UserGroupAuthorizeAspect {\r\n\r\n    public void authorize(UserGroupAuthorize userGroupAuthorize) {\r\n       ...\r\n    }\r\n...\r\n}\r\n\r\n```\r\n**Usages**\r\n\r\n@UserGroupAuthorize(groups = {UserGroup.CUSTOMER, UserGroup.CUSTOMER_MANAGERGROUP})\r\n\r\nlike said on method(works) or on class(works not)","title":"Spring XML Aspect before Annotation an Class not working","body":"<p>i'm currently trying to using a custom annotation at method and class level to execute code via an aspect. It is a SAP Commerce Cloud project (newest version).</p>\n<p><strong>On method level it works fine</strong> but if the annotation is <strong>on the class it doesn't</strong> enter my Aspect. Why? Hope someone can help me.</p>\n<p><strong>Annotation</strong></p>\n<pre><code>@Target({ElementType.METHOD, ElementType.TYPE})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface UserGroupAuthorize {\n\n    UserGroup[] groups() default {};\n\n}\n</code></pre>\n<p><strong>spring.xml</strong></p>\n<pre><code>    &lt;aop:aspectj-autoproxy proxy-target-class=&quot;true&quot; expose-proxy=&quot;true&quot;/&gt;\n\n    &lt;bean id=&quot;userGroupAuthorizeAspect&quot; class=&quot;com.[...].annotation.UserGroupAuthorizeAspect&quot;&gt;\n        &lt;constructor-arg name=&quot;userService&quot; ref=&quot;userService&quot;/&gt;\n    &lt;/bean&gt;\n    &lt;aop:config proxy-target-class=&quot;true&quot;&gt;\n        &lt;aop:aspect id=&quot;userGroupAuthorizeAspectId&quot; ref=&quot;userGroupAuthorizeAspect&quot;&gt;\n            &lt;aop:pointcut id=&quot;userGroupAuthorizeAnnotation&quot; expression=&quot;@annotation(userGroupAuthorize)&quot;/&gt;\n            &lt;aop:before pointcut-ref=&quot;userGroupAuthorizeAnnotation&quot; method=&quot;authorize&quot;/&gt;\n        &lt;/aop:aspect&gt;\n    &lt;/aop:config&gt;\n</code></pre>\n<p><strong>Aspect</strong></p>\n<pre><code>public class UserGroupAuthorizeAspect {\n\n    public void authorize(UserGroupAuthorize userGroupAuthorize) {\n       ...\n    }\n...\n}\n\n</code></pre>\n<p><strong>Usages</strong></p>\n<p>@UserGroupAuthorize(groups = {UserGroup.CUSTOMER, UserGroup.CUSTOMER_MANAGERGROUP})</p>\n<p>like said on method(works) or on class(works not)</p>\n"},{"tags":["java","arrays","bytebuffer"],"comments":[{"owner":{"account_id":18559672,"reputation":300,"user_id":13523946,"display_name":"notAPPP"},"score":0,"creation_date":1663797364,"post_id":73807229,"comment_id":130326814,"body_markdown":"Please check that answer https://stackoverflow.com/a/19624671/13523946","body":"Please check that answer <a href=\"https://stackoverflow.com/a/19624671/13523946\">stackoverflow.com/a/19624671/13523946</a>"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1663803735,"post_id":73807229,"comment_id":130327865,"body_markdown":"“…should be able to return an `int[]`.”  You seem to be under the impression that the `array()` method *converts* the buffer’s contents to an array, like Collection.toArray or Stream.toArray, but that is not the case.  As Slaw explained, it returns the array that directly backs the buffer;  if the buffer wasn’t created directly from an int array, you get an UnsupportedOpertaionException.","body":"“…should be able to return an <code>int[]</code>.”  You seem to be under the impression that the <code>array()</code> method <i>converts</i> the buffer’s contents to an array, like Collection.toArray or Stream.toArray, but that is not the case.  As Slaw explained, it returns the array that directly backs the buffer;  if the buffer wasn’t created directly from an int array, you get an UnsupportedOpertaionException."},{"owner":{"account_id":14079892,"reputation":1616,"user_id":10171211,"display_name":"Seb"},"score":0,"creation_date":1663963489,"post_id":73807229,"comment_id":130371395,"body_markdown":"But how would it be possible to transform a Bytebuffer into an int array without allocating new memory?","body":"But how would it be possible to transform a Bytebuffer into an int array without allocating new memory?"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1664093182,"post_id":73807229,"comment_id":130388846,"body_markdown":"It&#39;s not possible to transform a `ByteBuffer` to an `int[]` without allocating new memory for the `int[]`. The best you could do is make use of the `IntBuffer` you created via `#asIntBuffer()`. Obviously, that allocates memory for the `IntBuffer` instance, but both the `ByteBuffer` and the `IntBuffer` will be backed by the same `byte[]` instance.","body":"It&#39;s not possible to transform a <code>ByteBuffer</code> to an <code>int[]</code> without allocating new memory for the <code>int[]</code>. The best you could do is make use of the <code>IntBuffer</code> you created via <code>#asIntBuffer()</code>. Obviously, that allocates memory for the <code>IntBuffer</code> instance, but both the <code>ByteBuffer</code> and the <code>IntBuffer</code> will be backed by the same <code>byte[]</code> instance."}],"answers":[{"tags":[],"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663798269,"creation_date":1663798269,"answer_id":73807442,"question_id":73807229,"body_markdown":"The `#array()` methods of all the buffer classes are defined to throw `UnsupportedOperationException`:\r\n\r\n&gt; If this buffer is not backed by an accessible array\r\n\r\nAlso, modifying the array returned by `#array()` _modifies the buffer_:\r\n\r\n&gt; Modifications to this buffer&#39;s content will cause the returned array&#39;s content to be modified, and vice versa.\r\n\r\nAnd you&#39;re calling it on an `IntBuffer` that was created via [`ByteBuffer#asIntBuffer()`][1], which:\r\n\r\n&gt; Creates a **view** _[emphasis added]_ of this byte buffer as an int buffer.\r\n&gt;\r\n&gt; The content of the new buffer will start at this buffer&#39;s current position. **Changes to this buffer&#39;s content will be visible in the new buffer, and vice versa** _[emphasis added]_; the two buffers&#39; position, limit, and mark values will be independent.\r\n&gt;\r\n&gt; _[...]_\r\n\r\nCombine all that information and you can see why calling `array()` on your `IntBuffer` throws an `UnsupportedOperationException`. If it were to return an `int[]`, then changing the `int[]` would not be capable of modifying the `ByteBuffer`. This is a problem, because modifying the `int[]` is defined to modify the `IntBuffer`, and since your `IntBuffer` is only a view, modifying the `IntBuffer` is defined to also modify the `ByteBuffer`. But it&#39;s not possible to directly &quot;link&quot; a `byte[]` and an `int[]`, hence the operation is not supported.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/nio/ByteBuffer.html#asIntBuffer()","title":"java ByteBuffer to int array conversion fails with UnsupportedOperationException","body":"<p>The <code>#array()</code> methods of all the buffer classes are defined to throw <code>UnsupportedOperationException</code>:</p>\n<blockquote>\n<p>If this buffer is not backed by an accessible array</p>\n</blockquote>\n<p>Also, modifying the array returned by <code>#array()</code> <em>modifies the buffer</em>:</p>\n<blockquote>\n<p>Modifications to this buffer's content will cause the returned array's content to be modified, and vice versa.</p>\n</blockquote>\n<p>And you're calling it on an <code>IntBuffer</code> that was created via <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/nio/ByteBuffer.html#asIntBuffer()\" rel=\"nofollow noreferrer\"><code>ByteBuffer#asIntBuffer()</code></a>, which:</p>\n<blockquote>\n<p>Creates a <strong>view</strong> <em>[emphasis added]</em> of this byte buffer as an int buffer.</p>\n<p>The content of the new buffer will start at this buffer's current position. <strong>Changes to this buffer's content will be visible in the new buffer, and vice versa</strong> <em>[emphasis added]</em>; the two buffers' position, limit, and mark values will be independent.</p>\n<p><em>[...]</em></p>\n</blockquote>\n<p>Combine all that information and you can see why calling <code>array()</code> on your <code>IntBuffer</code> throws an <code>UnsupportedOperationException</code>. If it were to return an <code>int[]</code>, then changing the <code>int[]</code> would not be capable of modifying the <code>ByteBuffer</code>. This is a problem, because modifying the <code>int[]</code> is defined to modify the <code>IntBuffer</code>, and since your <code>IntBuffer</code> is only a view, modifying the <code>IntBuffer</code> is defined to also modify the <code>ByteBuffer</code>. But it's not possible to directly &quot;link&quot; a <code>byte[]</code> and an <code>int[]</code>, hence the operation is not supported.</p>\n"}],"owner":{"account_id":14079892,"reputation":1616,"user_id":10171211,"display_name":"Seb"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":186,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1663798269,"creation_date":1663796505,"question_id":73807229,"body_markdown":"When converting a `ByteBuffer` to an `int` array java unexpectedly throws an `UnsupportedOperationException`.\r\n\r\nHowever as a `byte` array the information is correctly represented. \r\n\r\n```java\r\nint[] intArray = new int[]{1, 2};\r\nByteBuffer byteBuffer = ByteBuffer.allocate(intArray.length * 4);\r\nIntBuffer ib = byteBuffer.asIntBuffer();\r\nib.put(intArray);\r\nSystem.out.println(Arrays.toString(byteBuffer.array())); // prints [0, 0, 0, 1, 0, 0, 0, 2]\r\nSystem.out.println(Arrays.toString(ib.array())); // Fails with exception UnsupportedOperationException\r\n```\r\n\r\nReading through other posts I saw this exception in case there was no array to back up the `ByteBuffer`, but in this case the buffer has enough bytes allocated and should be able to return an `int[]`. \r\n\r\nWhy is this exception thrown? \r\n\r\n(Using java11)","title":"java ByteBuffer to int array conversion fails with UnsupportedOperationException","body":"<p>When converting a <code>ByteBuffer</code> to an <code>int</code> array java unexpectedly throws an <code>UnsupportedOperationException</code>.</p>\n<p>However as a <code>byte</code> array the information is correctly represented.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] intArray = new int[]{1, 2};\nByteBuffer byteBuffer = ByteBuffer.allocate(intArray.length * 4);\nIntBuffer ib = byteBuffer.asIntBuffer();\nib.put(intArray);\nSystem.out.println(Arrays.toString(byteBuffer.array())); // prints [0, 0, 0, 1, 0, 0, 0, 2]\nSystem.out.println(Arrays.toString(ib.array())); // Fails with exception UnsupportedOperationException\n</code></pre>\n<p>Reading through other posts I saw this exception in case there was no array to back up the <code>ByteBuffer</code>, but in this case the buffer has enough bytes allocated and should be able to return an <code>int[]</code>.</p>\n<p>Why is this exception thrown?</p>\n<p>(Using java11)</p>\n"},{"tags":["java","exception"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1663773229,"post_id":73803061,"comment_id":130319202,"body_markdown":"Please [edit] your question to describe precisely what it means that it&#39;s &quot;not working&quot;. Do you get an exception? If so, post the complete message &amp; stacktrace. No exception, but it doesn&#39;t do what you expect? Describe precisely what you expect and what actually happens.","body":"Please <a href=\"https://stackoverflow.com/posts/73803061/edit\">edit</a> your question to describe precisely what it means that it&#39;s &quot;not working&quot;. Do you get an exception? If so, post the complete message &amp; stacktrace. No exception, but it doesn&#39;t do what you expect? Describe precisely what you expect and what actually happens."}],"answers":[{"tags":[],"owner":{"account_id":17141277,"reputation":134,"user_id":12405221,"display_name":"cha_lar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663774186,"creation_date":1663774186,"answer_id":73803415,"question_id":73803061,"body_markdown":"As I understand it, you want to check if your inputs are valid. \r\n\r\nFor *username*, nextLine() reads the given input as String, therefore, you can enter anything and it will be read as a string. Entering 123 as an input will be read as &quot;123&quot; and it won&#39;t throw any exceptions. If you want to check if the input string is alphabetic, i.e., contains only letters, you can refer to https://stackoverflow.com/questions/5238491/check-if-string-contains-only-letters\r\n\r\nFor *pin code*, you can check it with a try/catch block like this:\r\n\r\n        System.out.println(&quot;Enter your pin code: &quot;);\r\n        try {\r\n            int pin = myuser.nextInt();\r\n            System.out.println(&quot;Your pin code is: &quot; + pin);\r\n        } catch(InputMismatchException e) {\r\n            System.out.println(&quot;Incorrect pin!&quot;);\r\n        }\r\n\r\nIt will check if the given pin code is a Java Integer, please note that given input can be a negative integer, and you should check it if you need to.","title":"String input exceptions java","body":"<p>As I understand it, you want to check if your inputs are valid.</p>\n<p>For <em>username</em>, nextLine() reads the given input as String, therefore, you can enter anything and it will be read as a string. Entering 123 as an input will be read as &quot;123&quot; and it won't throw any exceptions. If you want to check if the input string is alphabetic, i.e., contains only letters, you can refer to <a href=\"https://stackoverflow.com/questions/5238491/check-if-string-contains-only-letters\">Check if String contains only letters</a></p>\n<p>For <em>pin code</em>, you can check it with a try/catch block like this:</p>\n<pre><code>    System.out.println(&quot;Enter your pin code: &quot;);\n    try {\n        int pin = myuser.nextInt();\n        System.out.println(&quot;Your pin code is: &quot; + pin);\n    } catch(InputMismatchException e) {\n        System.out.println(&quot;Incorrect pin!&quot;);\n    }\n</code></pre>\n<p>It will check if the given pin code is a Java Integer, please note that given input can be a negative integer, and you should check it if you need to.</p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663774464,"creation_date":1663774464,"answer_id":73803469,"question_id":73803061,"body_markdown":"Unfortunately the command line and Scanner has no validation; has no Exceptions.\r\n\r\n    String username = &quot;&quot;;\r\n    do {\r\n        System.out.println(&quot;Enter your username:&quot;);\r\n        username = myuser.nextLine();\r\n    } while (username.isEmpty());\r\n\r\n    int pin = -1;\r\n    do {\r\n        System.out.println(&quot;Enter your pin code: &quot;);\r\n        if (myuser.hasNextInt()) {\r\n            pin = myuser.nextInt();\r\n        } else if (myuser.hasNext()) {\r\n            myuser.next();\r\n            System.out.println(&quot;You must enter digits for the pin code.&quot;);\r\n        }\r\n        myuser.nextLine();\r\n    } while (pin == -1);\r\n\r\nAs you see `Scanner.hasNextInt()` should be queried, to check that an integer was provided. Any other non-numeric token could be consumed with `next()`.\r\nYou could also use `myuser.hasNextLine()` when the typing user broke out of inputting.\r\n\r\nThis makes the use of Scanner circumstantial. I prefer reading lines and parsing them, say with `Integer.parseInt(line)`. Otherwise I strongly advise to use the [**`Console`**][1] class which even has password entry (so the PIN does not show on the screen). This class however cannot be tested inside the IDE as a &quot;console&quot; in the IDE generally does a `System.setIn(...)` to capture the console. `Console` has nice prompts.\r\n\r\n     // SAMPLE CODE\r\n     char[] passwd;\r\n     Console cons = System.console();\r\n     if (cons != null) {\r\n         String username = cons.readLine(&quot;User: &quot;);\r\n         passwd = cons.readPassword(&quot;Password for %s: &quot;, username);\r\n         if (passwd != null) {\r\n             ...\r\n             Arrays.fill(passwd, &#39; &#39;); // Clear sensitive data in memory.\r\n         }\r\n     }\r\n\r\n  [1]: https://docs.oracle.com/javase/10/docs/api/java/io/Console.html\r\n","title":"String input exceptions java","body":"<p>Unfortunately the command line and Scanner has no validation; has no Exceptions.</p>\n<pre><code>String username = &quot;&quot;;\ndo {\n    System.out.println(&quot;Enter your username:&quot;);\n    username = myuser.nextLine();\n} while (username.isEmpty());\n\nint pin = -1;\ndo {\n    System.out.println(&quot;Enter your pin code: &quot;);\n    if (myuser.hasNextInt()) {\n        pin = myuser.nextInt();\n    } else if (myuser.hasNext()) {\n        myuser.next();\n        System.out.println(&quot;You must enter digits for the pin code.&quot;);\n    }\n    myuser.nextLine();\n} while (pin == -1);\n</code></pre>\n<p>As you see <code>Scanner.hasNextInt()</code> should be queried, to check that an integer was provided. Any other non-numeric token could be consumed with <code>next()</code>.\nYou could also use <code>myuser.hasNextLine()</code> when the typing user broke out of inputting.</p>\n<p>This makes the use of Scanner circumstantial. I prefer reading lines and parsing them, say with <code>Integer.parseInt(line)</code>. Otherwise I strongly advise to use the <a href=\"https://docs.oracle.com/javase/10/docs/api/java/io/Console.html\" rel=\"nofollow noreferrer\"><strong><code>Console</code></strong></a> class which even has password entry (so the PIN does not show on the screen). This class however cannot be tested inside the IDE as a &quot;console&quot; in the IDE generally does a <code>System.setIn(...)</code> to capture the console. <code>Console</code> has nice prompts.</p>\n<pre><code> // SAMPLE CODE\n char[] passwd;\n Console cons = System.console();\n if (cons != null) {\n     String username = cons.readLine(&quot;User: &quot;);\n     passwd = cons.readPassword(&quot;Password for %s: &quot;, username);\n     if (passwd != null) {\n         ...\n         Arrays.fill(passwd, ' '); // Clear sensitive data in memory.\n     }\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21706289,"reputation":473,"user_id":16018684,"display_name":"Amos Machora"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663774921,"creation_date":1663774921,"answer_id":73803585,"question_id":73803061,"body_markdown":"As you have seen from other answers everything read from the scanner will be read as a String. Here is a little trick or workaround to check if someone enters a number.\r\n\r\n    public static void main(String[] args) {\r\n        Scanner myuser = new Scanner(System.in);\r\n\r\n        System.out.println(&quot;Enter your username: &quot;);\r\n\r\n        String username = myuser.nextLine();\r\n\r\n        try {\r\n            int valueInInteger = Integer.parseInt(username);\r\n            System.out.println(&quot;Incorrect username! &quot;);\r\n        } catch (NumberFormatException e) {\r\n            System.out.println(&quot;Your username is: &quot; + username);\r\n        }\r\n        \r\n        System.out.println(&quot;Enter your pin code: &quot;);\r\n        int pin = myuser.nextInt();\r\n        System.out.println(&quot;Your pin code is: &quot; + pin);\r\n    }\r\n\r\nThe trick here is if you parse a string it will throw a number format exception and you will be sure its a string.","title":"String input exceptions java","body":"<p>As you have seen from other answers everything read from the scanner will be read as a String. Here is a little trick or workaround to check if someone enters a number.</p>\n<pre><code>public static void main(String[] args) {\n    Scanner myuser = new Scanner(System.in);\n\n    System.out.println(&quot;Enter your username: &quot;);\n\n    String username = myuser.nextLine();\n\n    try {\n        int valueInInteger = Integer.parseInt(username);\n        System.out.println(&quot;Incorrect username! &quot;);\n    } catch (NumberFormatException e) {\n        System.out.println(&quot;Your username is: &quot; + username);\n    }\n    \n    System.out.println(&quot;Enter your pin code: &quot;);\n    int pin = myuser.nextInt();\n    System.out.println(&quot;Your pin code is: &quot; + pin);\n}\n</code></pre>\n<p>The trick here is if you parse a string it will throw a number format exception and you will be sure its a string.</p>\n"},{"tags":[],"owner":{"account_id":5263557,"reputation":127,"user_id":4204338,"accept_rate":100,"display_name":"John Lopez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663798049,"creation_date":1663798049,"answer_id":73807411,"question_id":73803061,"body_markdown":"Try the follow code, maybe you can use.\r\n\r\n    public static void main(String[] args) {\r\n            Scanner myuser = new Scanner(System.in);\r\n\r\n            System.out.println(&quot;Enter your username: &quot;);\r\n            String username = myuser.nextLine();\r\n            boolean isNumeric =  username.matches(&quot;[+-]?\\\\d*(\\\\.\\\\d+)?&quot;);\r\n            if (isNumeric){\r\n                System.out.println(&quot;Retry! Incorrect username!&quot;);\r\n                main(args);\r\n                System.exit(0);\r\n            }\r\n            System.out.println(&quot;Your username is: &quot; + username);\r\n            System.out.println(&quot;Enter your pin code: &quot;);\r\n            int pin = myuser.nextInt();\r\n            System.out.println(&quot;Your pin code is: &quot; + pin);\r\n        }","title":"String input exceptions java","body":"<p>Try the follow code, maybe you can use.</p>\n<pre><code>public static void main(String[] args) {\n        Scanner myuser = new Scanner(System.in);\n\n        System.out.println(&quot;Enter your username: &quot;);\n        String username = myuser.nextLine();\n        boolean isNumeric =  username.matches(&quot;[+-]?\\\\d*(\\\\.\\\\d+)?&quot;);\n        if (isNumeric){\n            System.out.println(&quot;Retry! Incorrect username!&quot;);\n            main(args);\n            System.exit(0);\n        }\n        System.out.println(&quot;Your username is: &quot; + username);\n        System.out.println(&quot;Enter your pin code: &quot;);\n        int pin = myuser.nextInt();\n        System.out.println(&quot;Your pin code is: &quot; + pin);\n    }\n</code></pre>\n"}],"owner":{"account_id":26274453,"reputation":1,"user_id":19943858,"display_name":"Pop Raluca"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":329,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1663798049,"creation_date":1663772641,"question_id":73803061,"body_markdown":"I&#39;m trying to use try and catch exceptions in case the user does not enter strings for username and integers for the pin code. but my code it&#39;s not working\r\nthis is my code: \r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Scanner myuser = new Scanner(System.in);\r\n\r\n\r\n        System.out.println(&quot;Enter your username: &quot;);\r\n            try {\r\n            String username = myuser.nextLine();\r\n            System.out.println(&quot;Your username is: &quot; + username);\r\n        }\r\n\r\n        catch( Exception e) {\r\n            System.out.println(&quot;Incorrect username! &quot;);\r\n        }\r\n        System.out.println(&quot;Enter your pin code: &quot;);\r\n        int pin = myuser.nextInt();\r\n        System.out.println(&quot;Your pin code is: &quot; + pin);\r\n    }\r\n}\r\n```\r\n\r\nI tried to enter integers at the username to see if my try catch code works but the code doesn&#39;t recognize it as a problem.\r\n\r\n```none\r\nEnter your username: \r\n234\r\nYour username is: 234\r\nEnter your pin code: \r\n```\r\n","title":"String input exceptions java","body":"<p>I'm trying to use try and catch exceptions in case the user does not enter strings for username and integers for the pin code. but my code it's not working\nthis is my code:</p>\n<pre><code>import java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner myuser = new Scanner(System.in);\n\n\n        System.out.println(&quot;Enter your username: &quot;);\n            try {\n            String username = myuser.nextLine();\n            System.out.println(&quot;Your username is: &quot; + username);\n        }\n\n        catch( Exception e) {\n            System.out.println(&quot;Incorrect username! &quot;);\n        }\n        System.out.println(&quot;Enter your pin code: &quot;);\n        int pin = myuser.nextInt();\n        System.out.println(&quot;Your pin code is: &quot; + pin);\n    }\n}\n</code></pre>\n<p>I tried to enter integers at the username to see if my try catch code works but the code doesn't recognize it as a problem.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Enter your username: \n234\nYour username is: 234\nEnter your pin code: \n</code></pre>\n"},{"tags":["java","arrays","file","anagram"],"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1663798050,"post_id":73807350,"comment_id":130326956,"body_markdown":"How does it fail, what should happen at that place instead? It&#39;s currently too much code to debug-by-reading especially when you don&#39;t know what to look for","body":"How does it fail, what should happen at that place instead? It&#39;s currently too much code to debug-by-reading especially when you don&#39;t know what to look for"},{"owner":{"account_id":26190324,"reputation":9,"user_id":19872276,"display_name":"Preston Little"},"score":0,"creation_date":1663799031,"post_id":73807350,"comment_id":130327155,"body_markdown":"I have a file in the package named sample_word_list.txt and this is the output I get &quot;sample_word_list.txt (No such file or directory) Empty list\n[Ljava.lang.String;@5f205aa&quot;","body":"I have a file in the package named sample_word_list.txt and this is the output I get &quot;sample_word_list.txt (No such file or directory) Empty list [Ljava.lang.String;@5f205aa&quot;"},{"owner":{"account_id":3766938,"reputation":1294,"user_id":3130218,"accept_rate":86,"display_name":"bb94"},"score":0,"creation_date":1663801592,"post_id":73807350,"comment_id":130327596,"body_markdown":"If your list of words has no anagrams, then the largest group of anagrams is of size 1, namely of any word in the list.","body":"If your list of words has no anagrams, then the largest group of anagrams is of size 1, namely of any word in the list."},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1663845835,"post_id":73807350,"comment_id":130337740,"body_markdown":"you have an issue with &quot;no such file&quot; and the code you show contains nothing about files so I guess there&#39;s an issue in the code that deals with files. Could simply be that you put the file in the wrong place. The current directory for a java programs is not in the source folders, it&#39;s the project root, so if you load a file without specifying a path it wouldn&#39;t look for a file inside your source packages. It&#39;s different if you use resources. Can update your question to you show the code / provide details about your file handling?","body":"you have an issue with &quot;no such file&quot; and the code you show contains nothing about files so I guess there&#39;s an issue in the code that deals with files. Could simply be that you put the file in the wrong place. The current directory for a java programs is not in the source folders, it&#39;s the project root, so if you load a file without specifying a path it wouldn&#39;t look for a file inside your source packages. It&#39;s different if you use resources. Can update your question to you show the code / provide details about your file handling?"}],"owner":{"account_id":26190324,"reputation":9,"user_id":19872276,"display_name":"Preston Little"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663797400,"creation_date":1663797400,"question_id":73807350,"body_markdown":"This method should return the largest group of anagrams in the input array of words, in no particular order.  It should return an empty array if there are no anagrams in the input array.  This method must call the methods I created that checks if the strings are anagrams method an insertionSort method with a new Comparator class or lambda expression. For some reason when getLargestAnagramGroup gets called on the small array with no anagrams, I fail. I was wondering if I could get some assistance. Thanks!\r\n\r\n```\r\n/**\r\n\t * @param largestStr a string array.\r\n\t * @return the largest group of anagrams in the input array of words, in no\r\n\t *         particular order. It returns an empty array if there are no anagrams\r\n\t *         in the input array.\r\n\t */\r\n\tpublic static String[] getLargestAnagramGroup(String[] largestStr) {\r\n\t\tif (largestStr.length == 0) {\r\n\t\t\treturn largestStr;\r\n\t\t}\r\n\r\n\t\t// creating the new array\r\n\t\tString[] duplicate = new String[largestStr.length];\r\n\t\tfor (int i = 0; i &lt; duplicate.length; i++) {\r\n\t\t\tduplicate[i] = largestStr[i];\r\n\t\t}\r\n\r\n\t\t// puts everything to lower case and sorts them out\r\n\t\tfor (int i = 0; i &lt; duplicate.length; i++) {\r\n\t\t\tduplicate[i] = (String) sort(duplicate[i].toLowerCase());\r\n\t\t}\r\n\r\n\t\t// creates a comparator\r\n\t\tclass compareStrings implements Comparator&lt;String&gt; {\r\n\t\t\tpublic int compare(String o1, String o2) {\r\n\t\t\t\treturn o1.compareTo(o2);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcompareStrings compString = new compareStrings();\r\n\r\n\t\t// sorts the list to alphabetical order\r\n\t\tinsertionSort(duplicate, compString);\r\n\r\n\t\t// temporary array to hold how many instances of each anagram\r\n\t\tArrayList&lt;Integer&gt; temp = new ArrayList&lt;Integer&gt;();\r\n\r\n\t\t// compares to each other\r\n\t\tString compare = duplicate[0];\r\n\r\n\t\t// keeps track of the anagram\r\n\t\tint totalValues = 0;\r\n\r\n\t\t// for loop for how many anagrams there are and adds them up\r\n\t\tfor (int i = 0; i &lt; duplicate.length; i++) {\r\n\t\t\tif (duplicate[i].equals(compare)) {\r\n\t\t\t\ttotalValues++;\r\n\t\t\t} else {\r\n\t\t\t\ttemp.add(totalValues);\r\n\t\t\t\tcompare = duplicate[i];\r\n\t\t\t\ttotalValues = 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// adds the last value to the list\r\n\t\ttemp.add(totalValues);\r\n\r\n\t\tint largestNumber = temp.get(0);\r\n\r\n\t\t// gets the largest number in the array\r\n\t\tfor (int i = 1; i &lt; temp.size(); i++) {\r\n\t\t\tif (temp.get(i) &gt; largestNumber) {\r\n\t\t\t\tlargestNumber = temp.get(i);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// will find the correct anagram in the array\r\n\t\tint sum = 0;\r\n\t\tfor (int i = 0; i &lt;= temp.indexOf(largestNumber); i++) {\r\n\t\t\tsum += temp.get(i);\r\n\t\t}\r\n\r\n\t\tString value = duplicate[sum - 1];\r\n\t\tString[] largetsAnagram = new String[largestNumber];\r\n\r\n\t\t// count keeps track of the new list values\r\n\t\tint count = 0;\r\n\t\tfor (int i = 0; i &lt; largestStr.length; i++) {\r\n\t\t\tif (areAnagrams(largestStr[i], value)) {\r\n\t\t\t\tlargetsAnagram[count] = largestStr[i];\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn largetsAnagram;\r\n\t}\r\n```","title":"Return the largest group of Anagrams","body":"<p>This method should return the largest group of anagrams in the input array of words, in no particular order.  It should return an empty array if there are no anagrams in the input array.  This method must call the methods I created that checks if the strings are anagrams method an insertionSort method with a new Comparator class or lambda expression. For some reason when getLargestAnagramGroup gets called on the small array with no anagrams, I fail. I was wondering if I could get some assistance. Thanks!</p>\n<pre><code>/**\n     * @param largestStr a string array.\n     * @return the largest group of anagrams in the input array of words, in no\n     *         particular order. It returns an empty array if there are no anagrams\n     *         in the input array.\n     */\n    public static String[] getLargestAnagramGroup(String[] largestStr) {\n        if (largestStr.length == 0) {\n            return largestStr;\n        }\n\n        // creating the new array\n        String[] duplicate = new String[largestStr.length];\n        for (int i = 0; i &lt; duplicate.length; i++) {\n            duplicate[i] = largestStr[i];\n        }\n\n        // puts everything to lower case and sorts them out\n        for (int i = 0; i &lt; duplicate.length; i++) {\n            duplicate[i] = (String) sort(duplicate[i].toLowerCase());\n        }\n\n        // creates a comparator\n        class compareStrings implements Comparator&lt;String&gt; {\n            public int compare(String o1, String o2) {\n                return o1.compareTo(o2);\n            }\n        }\n        compareStrings compString = new compareStrings();\n\n        // sorts the list to alphabetical order\n        insertionSort(duplicate, compString);\n\n        // temporary array to hold how many instances of each anagram\n        ArrayList&lt;Integer&gt; temp = new ArrayList&lt;Integer&gt;();\n\n        // compares to each other\n        String compare = duplicate[0];\n\n        // keeps track of the anagram\n        int totalValues = 0;\n\n        // for loop for how many anagrams there are and adds them up\n        for (int i = 0; i &lt; duplicate.length; i++) {\n            if (duplicate[i].equals(compare)) {\n                totalValues++;\n            } else {\n                temp.add(totalValues);\n                compare = duplicate[i];\n                totalValues = 1;\n            }\n        }\n\n        // adds the last value to the list\n        temp.add(totalValues);\n\n        int largestNumber = temp.get(0);\n\n        // gets the largest number in the array\n        for (int i = 1; i &lt; temp.size(); i++) {\n            if (temp.get(i) &gt; largestNumber) {\n                largestNumber = temp.get(i);\n            }\n        }\n\n        // will find the correct anagram in the array\n        int sum = 0;\n        for (int i = 0; i &lt;= temp.indexOf(largestNumber); i++) {\n            sum += temp.get(i);\n        }\n\n        String value = duplicate[sum - 1];\n        String[] largetsAnagram = new String[largestNumber];\n\n        // count keeps track of the new list values\n        int count = 0;\n        for (int i = 0; i &lt; largestStr.length; i++) {\n            if (areAnagrams(largestStr[i], value)) {\n                largetsAnagram[count] = largestStr[i];\n                count++;\n            }\n        }\n        return largetsAnagram;\n    }\n</code></pre>\n"},{"tags":["java","jms","wildfly","activemq-artemis"],"comments":[{"owner":{"account_id":213509,"reputation":1129,"user_id":466932,"accept_rate":50,"display_name":"Unmanned Player"},"score":0,"creation_date":1582717093,"post_id":60411657,"comment_id":106871464,"body_markdown":"Please add lots of context as to what you were trying to do, where you saw this error, etc. Also, what is your question?","body":"Please add lots of context as to what you were trying to do, where you saw this error, etc. Also, what is your question?"},{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1582735415,"post_id":60411657,"comment_id":106882462,"body_markdown":"You say you&#39;re sending a message to a HornetQ broker embedded in Wildfly 10, but Wildfly 10 doesn&#39;t embed HornetQ by default. It embeds ActiveMQ Artemis instead (which is based on the HornetQ code-base). Furthermore, the stack-trace indicates you&#39;re using the ActiveMQ Artemis JMS client. Can you please clarify the role that HornetQ is playing in your use-case?","body":"You say you&#39;re sending a message to a HornetQ broker embedded in Wildfly 10, but Wildfly 10 doesn&#39;t embed HornetQ by default. It embeds ActiveMQ Artemis instead (which is based on the HornetQ code-base). Furthermore, the stack-trace indicates you&#39;re using the ActiveMQ Artemis JMS client. Can you please clarify the role that HornetQ is playing in your use-case?"}],"answers":[{"tags":[],"owner":{"account_id":1491171,"reputation":3291,"user_id":1398228,"display_name":"ehsavoie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582714222,"creation_date":1582714222,"answer_id":60412228,"question_id":60411657,"body_markdown":"Could you describe your problem at least a little. A CONNECTION_TIMEDOUT jut means that you can&#39;t connect which is some configuration issue.","title":"JMSException for HornetQ in Wildfly 10","body":"<p>Could you describe your problem at least a little. A CONNECTION_TIMEDOUT jut means that you can't connect which is some configuration issue.</p>\n"},{"tags":[],"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582735811,"creation_date":1582735811,"answer_id":60418767,"question_id":60411657,"body_markdown":"Your class `com.ecomm.web.jmsqueue.SubmitToJMS` is attempting to send a message, but this operation is timing out waiting for a response from the broker. You should either increase the time out on the client (e.g. by using the `callTimeout` parameter on the client URL, defaults to `30000` milliseconds) or investigate why the broker receiving the message isn&#39;t responding to the client within the allotted time.","title":"JMSException for HornetQ in Wildfly 10","body":"<p>Your class <code>com.ecomm.web.jmsqueue.SubmitToJMS</code> is attempting to send a message, but this operation is timing out waiting for a response from the broker. You should either increase the time out on the client (e.g. by using the <code>callTimeout</code> parameter on the client URL, defaults to <code>30000</code> milliseconds) or investigate why the broker receiving the message isn't responding to the client within the allotted time.</p>\n"},{"tags":[],"owner":{"account_id":4952677,"reputation":11,"user_id":3986169,"display_name":"Vadim Pilipenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663797385,"creation_date":1663797385,"answer_id":73807346,"question_id":60411657,"body_markdown":"Just in case. I had the same problem with camel routing. \r\n\r\n**.transacted()** option removed this problem:\r\n\r\n    from(&quot;timer:hello?period=10s&quot;)\r\n                   .routeId(&quot;hello1&quot;)\r\n                   .transacted()\r\n                   .setBody(simple(&quot;This is plain string&quot;))\r\n                   .to(&quot;jms:queue:consumerQueueName&quot;);\r\n\r\njava 18 + wildfly 20 + artemis 2.25.0\r\n\r\nall via JNDI","title":"JMSException for HornetQ in Wildfly 10","body":"<p>Just in case. I had the same problem with camel routing.</p>\n<p><strong>.transacted()</strong> option removed this problem:</p>\n<pre><code>from(&quot;timer:hello?period=10s&quot;)\n               .routeId(&quot;hello1&quot;)\n               .transacted()\n               .setBody(simple(&quot;This is plain string&quot;))\n               .to(&quot;jms:queue:consumerQueueName&quot;);\n</code></pre>\n<p>java 18 + wildfly 20 + artemis 2.25.0</p>\n<p>all via JNDI</p>\n"}],"owner":{"account_id":17172753,"reputation":19,"user_id":12429548,"display_name":"Harry.ver36"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1008,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1663797385,"creation_date":1582712561,"question_id":60411657,"body_markdown":"I am running more than one schedulers at a time with 1000ms and 500ms repeatInterval. The schedular reads some messages from queue, processes them, and store in a MySQL database. In middle of these process sometimes I am getting this kind of exceptions.\r\n\r\n    javax.jms.JMSException: AMQ119014: Timed out after waiting 30,000 ms for response when sending packet 71\r\n    2020-02-25 12:05:27,483 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at org.apache.activemq.artemis.core.protocol.core.impl.ChannelImpl.sendBlocking(ChannelImpl.java:398)\r\n    2020-02-25 12:05:27,483 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at org.apache.activemq.artemis.core.protocol.core.impl.ChannelImpl.sendBlocking(ChannelImpl.java:304)\r\n    2020-02-25 12:05:27,484 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at org.apache.activemq.artemis.core.protocol.core.impl.ActiveMQSessionContext.sendFullMessage(ActiveMQSessionContext.java:378)\r\n    2020-02-25 12:05:27,484 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at org.apache.activemq.artemis.core.client.impl.ClientProducerImpl.sendRegularMessage(ClientProducerImpl.java:286)\r\n    2020-02-25 12:05:27,485 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at org.apache.activemq.artemis.core.client.impl.ClientProducerImpl.doSend(ClientProducerImpl.java:264)\r\n    2020-02-25 12:05:27,485 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at org.apache.activemq.artemis.core.client.impl.ClientProducerImpl.send(ClientProducerImpl.java:122)\r\n    2020-02-25 12:05:27,485 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at org.apache.activemq.artemis.jms.client.ActiveMQMessageProducer.doSendx(ActiveMQMessageProducer.java:477)\r\n    2020-02-25 12:05:27,486 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at org.apache.activemq.artemis.jms.client.ActiveMQMessageProducer.send(ActiveMQMessageProducer.java:173)\r\n    2020-02-25 12:05:27,486 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at com.ecomm.web.jmsqueue.SubmitToJMS.sendJMSMessagewithpriority(SubmitToJMS.java:197)\r\n    2020-02-25 12:05:27,486 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at com.ecomm.web.jmsqueue.InputMsgNewServerQueue.sendtosenderQueue(InputMsgNewServerQueue.java:78)\r\n    2020-02-25 12:05:27,486 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at com.pl4sms.web.thread.InputMsgSchHighPriority.execute(InputMsgSchHighPriority.java:36)\r\n    2020-02-25 12:05:27,487 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at org.quartz.core.JobRunShell.run(JobRunShell.java:202)\r\n    2020-02-25 12:05:27,487 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:525)\r\n    2020-02-25 12:05:27,487 ERROR [stderr] (DefaultQuartzScheduler_Worker-5) Caused by: ActiveMQConnectionTimedOutException[errorType=CONNECTION_TIMEDOUT message=AMQ119014: Timed out after waiting 30,000 ms for response when sending packet 71]\r\n    2020-02-25 12:05:27,488 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        ... 13 more\r\n    2020-02-25 12:05:27,488 ERROR [com.ecomm.web.jmsqueue.SubmitToJMS] (DefaultQuartzScheduler_Worker-5) javax.jms.JMSException: AMQ119014: Timed out after waiting 30,000 ms for response when sending packet 71","title":"JMSException for HornetQ in Wildfly 10","body":"<p>I am running more than one schedulers at a time with 1000ms and 500ms repeatInterval. The schedular reads some messages from queue, processes them, and store in a MySQL database. In middle of these process sometimes I am getting this kind of exceptions.</p>\n\n<pre><code>javax.jms.JMSException: AMQ119014: Timed out after waiting 30,000 ms for response when sending packet 71\n2020-02-25 12:05:27,483 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at org.apache.activemq.artemis.core.protocol.core.impl.ChannelImpl.sendBlocking(ChannelImpl.java:398)\n2020-02-25 12:05:27,483 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at org.apache.activemq.artemis.core.protocol.core.impl.ChannelImpl.sendBlocking(ChannelImpl.java:304)\n2020-02-25 12:05:27,484 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at org.apache.activemq.artemis.core.protocol.core.impl.ActiveMQSessionContext.sendFullMessage(ActiveMQSessionContext.java:378)\n2020-02-25 12:05:27,484 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at org.apache.activemq.artemis.core.client.impl.ClientProducerImpl.sendRegularMessage(ClientProducerImpl.java:286)\n2020-02-25 12:05:27,485 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at org.apache.activemq.artemis.core.client.impl.ClientProducerImpl.doSend(ClientProducerImpl.java:264)\n2020-02-25 12:05:27,485 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at org.apache.activemq.artemis.core.client.impl.ClientProducerImpl.send(ClientProducerImpl.java:122)\n2020-02-25 12:05:27,485 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at org.apache.activemq.artemis.jms.client.ActiveMQMessageProducer.doSendx(ActiveMQMessageProducer.java:477)\n2020-02-25 12:05:27,486 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at org.apache.activemq.artemis.jms.client.ActiveMQMessageProducer.send(ActiveMQMessageProducer.java:173)\n2020-02-25 12:05:27,486 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at com.ecomm.web.jmsqueue.SubmitToJMS.sendJMSMessagewithpriority(SubmitToJMS.java:197)\n2020-02-25 12:05:27,486 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at com.ecomm.web.jmsqueue.InputMsgNewServerQueue.sendtosenderQueue(InputMsgNewServerQueue.java:78)\n2020-02-25 12:05:27,486 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at com.pl4sms.web.thread.InputMsgSchHighPriority.execute(InputMsgSchHighPriority.java:36)\n2020-02-25 12:05:27,487 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at org.quartz.core.JobRunShell.run(JobRunShell.java:202)\n2020-02-25 12:05:27,487 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:525)\n2020-02-25 12:05:27,487 ERROR [stderr] (DefaultQuartzScheduler_Worker-5) Caused by: ActiveMQConnectionTimedOutException[errorType=CONNECTION_TIMEDOUT message=AMQ119014: Timed out after waiting 30,000 ms for response when sending packet 71]\n2020-02-25 12:05:27,488 ERROR [stderr] (DefaultQuartzScheduler_Worker-5)        ... 13 more\n2020-02-25 12:05:27,488 ERROR [com.ecomm.web.jmsqueue.SubmitToJMS] (DefaultQuartzScheduler_Worker-5) javax.jms.JMSException: AMQ119014: Timed out after waiting 30,000 ms for response when sending packet 71\n</code></pre>\n"},{"tags":["java","multithreading","blockingqueue","threadpoolexecutor"],"comments":[{"owner":{"account_id":1171396,"reputation":2023,"user_id":1148505,"accept_rate":88,"display_name":"bstempi"},"score":1,"creation_date":1382477581,"post_id":19528304,"comment_id":28973222,"body_markdown":"Given that your example creates a maximum of 10 threads, is there any real savings in using something that grows/shrinks over a fixed-sized thread pool?","body":"Given that your example creates a maximum of 10 threads, is there any real savings in using something that grows/shrinks over a fixed-sized thread pool?"},{"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"score":0,"creation_date":1382477742,"post_id":19528304,"comment_id":28973298,"body_markdown":"Good point @bstempi.  The number was somewhat arbitrary.  I&#39;ve increased it in the question to 50.  Not precisely sure how many concurrent threads I actually want working yet now that I have this solution.","body":"Good point @bstempi.  The number was somewhat arbitrary.  I&#39;ve increased it in the question to 50.  Not precisely sure how many concurrent threads I actually want working yet now that I have this solution."},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":1,"creation_date":1512389901,"post_id":19528304,"comment_id":82223913,"body_markdown":"Oh darn! 10 upvotes if I could here, exactly the same position I am into.","body":"Oh darn! 10 upvotes if I could here, exactly the same position I am into."}],"answers":[{"tags":[],"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"down_vote_count":0,"up_vote_count":61,"is_accepted":true,"score":61,"last_activity_date":1643132757,"creation_date":1382475763,"answer_id":19528305,"question_id":19528304,"body_markdown":"&gt; How can I work around this limitation in `ThreadPoolExecutor` where the queue needs to be bounded and full before more threads will be started.\r\n\r\nI believe I have finally found a somewhat elegant (maybe a little hacky) solution to this limitation with `ThreadPoolExecutor`.  It involves extending `LinkedBlockingQueue` to have it return `false` for `queue.offer(...)` when there are already some tasks queued.  If the current threads are not keeping up with the queued tasks, the TPE will add additional threads.  If the pool is already at max threads, then the `RejectedExecutionHandler` will be called which does the `put(...)` into the queue.\r\n\r\nIt certainly is strange to write a queue where `offer(...)` can return `false` and `put()` never blocks so that&#39;s the hack part.  But this works well with TPE&#39;s usage of the queue so I don&#39;t see any problem with doing this.\r\n\r\nHere&#39;s the code:\r\n\r\n\t// extend LinkedBlockingQueue to force offer() to return false conditionally\r\n\tBlockingQueue&lt;Runnable&gt; queue = new LinkedBlockingQueue&lt;Runnable&gt;() {\r\n\t\tprivate static final long serialVersionUID = -6903933921423432194L;\r\n\t\t@Override\r\n\t\tpublic boolean offer(Runnable e) {\r\n\t\t\t// Offer it to the queue if there is 0 items already queued, else\r\n\t\t\t// return false so the TPE will add another thread. If we return false\r\n\t\t\t// and max threads have been reached then the RejectedExecutionHandler\r\n\t\t\t// will be called which will do the put into the queue.\r\n\t\t\tif (size() == 0) {\r\n\t\t\t\treturn super.offer(e);\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tThreadPoolExecutor threadPool = new ThreadPoolExecutor(1 /*core*/, 50 /*max*/,\r\n\t\t\t60 /*secs*/, TimeUnit.SECONDS, queue);\r\n\tthreadPool.setRejectedExecutionHandler(new RejectedExecutionHandler() {\r\n\t\t@Override\r\n\t\tpublic void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {\r\n\t\t\ttry {\r\n\t\t\t\t// This does the actual put into the queue. Once the max threads\r\n\t\t\t\t//  have been reached, the tasks will then queue up.\r\n\t\t\t\texecutor.getQueue().put(r);\r\n                // we do this after the put() to stop race conditions\r\n                if (executor.isShutdown()) {\r\n                    throw new RejectedExecutionException(\r\n                        &quot;Task &quot; + r + &quot; rejected from &quot; + e);\r\n                }\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\tThread.currentThread().interrupt();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\nWith this mechanism, when I submit tasks to the queue, the `ThreadPoolExecutor` will:\r\n\r\n1. Scale the number of threads up to the core size initially (here 1).\r\n2. Offer it to the queue.  If the queue is empty it will be queued to be handled by the existing threads.\r\n3. If the queue has 1 or more elements already, the `offer(...)` will return false.\r\n4. If false is returned, scale up the number of threads in the pool until they reach the max number (here 50).\r\n5. If at the max then it calls the `RejectedExecutionHandler`\r\n6. The `RejectedExecutionHandler` then puts the task into the queue to be processed by the first available thread in FIFO order.\r\n\r\nAlthough in my example code above, the queue is unbounded, you could also define it as a bounded queue.   For example, if you add a capacity of 1000 to the `LinkedBlockingQueue` then it will:\r\n\r\n1. scale the threads up to max\r\n2. then queue up until it is full with 1000 tasks\r\n3. then block the caller until space becomes available to the queue.\r\n\r\nAlso, if you needed to use `offer(...)` in the \r\n`RejectedExecutionHandler` then you could use the `offer(E, long, TimeUnit)` method instead with `Long.MAX_VALUE` as the timeout.\r\n\r\n**Warning:**\r\n\r\nIf you expect tasks to be added to the executor *after* it has been shutdown, then you may want to be smarter about throwing `RejectedExecutionException` out of our custom `RejectedExecutionHandler` when the executor-service has been shutdown.  Thanks to @RaduToader for pointing this out.\r\n\r\n**Edit:**\r\n\r\nAnother tweak to this answer could be to ask the TPE if there are idle threads and only enqueue the item if there is so.  You would have to make a true class for this and add `ourQueue.setThreadPoolExecutor(tpe);` method on it.\r\n\r\nThen your `offer(...)` method might look something like:\r\n\r\n1. Check to see if the `tpe.getPoolSize() == tpe.getMaximumPoolSize()` in which case just call `super.offer(...)`.\r\n2. Else if `tpe.getPoolSize() &gt; tpe.getActiveCount()` then call `super.offer(...)` since there seem to be idle threads.\r\n3. Otherwise return `false` to fork another thread.\r\n\r\nMaybe this:\r\n\r\n\tint poolSize = tpe.getPoolSize();\r\n\tint maximumPoolSize = tpe.getMaximumPoolSize();\r\n\tif (poolSize &gt;= maximumPoolSize || poolSize &gt; tpe.getActiveCount()) {\r\n\t\treturn super.offer(e);\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n\r\nNote that the get methods on TPE are expensive since they access `volatile` fields or (in the case of `getActiveCount()`) lock the TPE and walk the thread-list.  Also, there are race conditions here that may cause a task to be enqueued improperly or another thread forked when there was an idle thread.","title":"How to get the ThreadPoolExecutor to increase threads to max before queueing?","body":"<blockquote>\n<p>How can I work around this limitation in <code>ThreadPoolExecutor</code> where the queue needs to be bounded and full before more threads will be started.</p>\n</blockquote>\n<p>I believe I have finally found a somewhat elegant (maybe a little hacky) solution to this limitation with <code>ThreadPoolExecutor</code>.  It involves extending <code>LinkedBlockingQueue</code> to have it return <code>false</code> for <code>queue.offer(...)</code> when there are already some tasks queued.  If the current threads are not keeping up with the queued tasks, the TPE will add additional threads.  If the pool is already at max threads, then the <code>RejectedExecutionHandler</code> will be called which does the <code>put(...)</code> into the queue.</p>\n<p>It certainly is strange to write a queue where <code>offer(...)</code> can return <code>false</code> and <code>put()</code> never blocks so that's the hack part.  But this works well with TPE's usage of the queue so I don't see any problem with doing this.</p>\n<p>Here's the code:</p>\n<pre><code>// extend LinkedBlockingQueue to force offer() to return false conditionally\nBlockingQueue&lt;Runnable&gt; queue = new LinkedBlockingQueue&lt;Runnable&gt;() {\n    private static final long serialVersionUID = -6903933921423432194L;\n    @Override\n    public boolean offer(Runnable e) {\n        // Offer it to the queue if there is 0 items already queued, else\n        // return false so the TPE will add another thread. If we return false\n        // and max threads have been reached then the RejectedExecutionHandler\n        // will be called which will do the put into the queue.\n        if (size() == 0) {\n            return super.offer(e);\n        } else {\n            return false;\n        }\n    }\n};\nThreadPoolExecutor threadPool = new ThreadPoolExecutor(1 /*core*/, 50 /*max*/,\n        60 /*secs*/, TimeUnit.SECONDS, queue);\nthreadPool.setRejectedExecutionHandler(new RejectedExecutionHandler() {\n    @Override\n    public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {\n        try {\n            // This does the actual put into the queue. Once the max threads\n            //  have been reached, the tasks will then queue up.\n            executor.getQueue().put(r);\n            // we do this after the put() to stop race conditions\n            if (executor.isShutdown()) {\n                throw new RejectedExecutionException(\n                    &quot;Task &quot; + r + &quot; rejected from &quot; + e);\n            }\n        } catch (InterruptedException e) {\n            Thread.currentThread().interrupt();\n            return;\n        }\n    }\n});\n</code></pre>\n<p>With this mechanism, when I submit tasks to the queue, the <code>ThreadPoolExecutor</code> will:</p>\n<ol>\n<li>Scale the number of threads up to the core size initially (here 1).</li>\n<li>Offer it to the queue.  If the queue is empty it will be queued to be handled by the existing threads.</li>\n<li>If the queue has 1 or more elements already, the <code>offer(...)</code> will return false.</li>\n<li>If false is returned, scale up the number of threads in the pool until they reach the max number (here 50).</li>\n<li>If at the max then it calls the <code>RejectedExecutionHandler</code></li>\n<li>The <code>RejectedExecutionHandler</code> then puts the task into the queue to be processed by the first available thread in FIFO order.</li>\n</ol>\n<p>Although in my example code above, the queue is unbounded, you could also define it as a bounded queue.   For example, if you add a capacity of 1000 to the <code>LinkedBlockingQueue</code> then it will:</p>\n<ol>\n<li>scale the threads up to max</li>\n<li>then queue up until it is full with 1000 tasks</li>\n<li>then block the caller until space becomes available to the queue.</li>\n</ol>\n<p>Also, if you needed to use <code>offer(...)</code> in the\n<code>RejectedExecutionHandler</code> then you could use the <code>offer(E, long, TimeUnit)</code> method instead with <code>Long.MAX_VALUE</code> as the timeout.</p>\n<p><strong>Warning:</strong></p>\n<p>If you expect tasks to be added to the executor <em>after</em> it has been shutdown, then you may want to be smarter about throwing <code>RejectedExecutionException</code> out of our custom <code>RejectedExecutionHandler</code> when the executor-service has been shutdown.  Thanks to @RaduToader for pointing this out.</p>\n<p><strong>Edit:</strong></p>\n<p>Another tweak to this answer could be to ask the TPE if there are idle threads and only enqueue the item if there is so.  You would have to make a true class for this and add <code>ourQueue.setThreadPoolExecutor(tpe);</code> method on it.</p>\n<p>Then your <code>offer(...)</code> method might look something like:</p>\n<ol>\n<li>Check to see if the <code>tpe.getPoolSize() == tpe.getMaximumPoolSize()</code> in which case just call <code>super.offer(...)</code>.</li>\n<li>Else if <code>tpe.getPoolSize() &gt; tpe.getActiveCount()</code> then call <code>super.offer(...)</code> since there seem to be idle threads.</li>\n<li>Otherwise return <code>false</code> to fork another thread.</li>\n</ol>\n<p>Maybe this:</p>\n<pre><code>int poolSize = tpe.getPoolSize();\nint maximumPoolSize = tpe.getMaximumPoolSize();\nif (poolSize &gt;= maximumPoolSize || poolSize &gt; tpe.getActiveCount()) {\n    return super.offer(e);\n} else {\n    return false;\n}\n</code></pre>\n<p>Note that the get methods on TPE are expensive since they access <code>volatile</code> fields or (in the case of <code>getActiveCount()</code>) lock the TPE and walk the thread-list.  Also, there are race conditions here that may cause a task to be enqueued improperly or another thread forked when there was an idle thread.</p>\n"},{"tags":[],"owner":{"account_id":216888,"reputation":11757,"user_id":472393,"accept_rate":80,"display_name":"Flavio"},"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1382476954,"creation_date":1382476954,"answer_id":19528622,"question_id":19528304,"body_markdown":"Set core size and max size to the same value, and allow core threads to be removed from the pool with `allowCoreThreadTimeOut(true)`.","title":"How to get the ThreadPoolExecutor to increase threads to max before queueing?","body":"<p>Set core size and max size to the same value, and allow core threads to be removed from the pool with <code>allowCoreThreadTimeOut(true)</code>.</p>\n"},{"tags":[],"owner":{"account_id":1171396,"reputation":2023,"user_id":1148505,"accept_rate":88,"display_name":"bstempi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1382478773,"creation_date":1382478773,"answer_id":19529104,"question_id":19528304,"body_markdown":"The best solution that I can think of is to extend.\r\n\r\n`ThreadPoolExecutor` offers a few hook methods:  `beforeExecute` and `afterExecute`.  In your extension you could maintain use a bounded queue to feed in tasks and a second unbounded queue to handle overflow.  When someone calls `submit`, you could attempt to place the request into the bounded queue.  If you&#39;re met with an exception, you just stick the task in your overflow queue.  You could then utilize the `afterExecute` hook to see if there is anything in the overflow queue after finishing a task.  This way, the executor will take care of the stuff in it&#39;s bounded queue first, and automatically pull from this unbounded queue as time permits.  \r\n\r\nIt seems like more work than your solution, but at least it doesn&#39;t involve giving queues unexpected behaviors.  I also imagine that there&#39;s a better way to check the status of the queue and threads rather than relying on exceptions, which are fairly slow to throw.","title":"How to get the ThreadPoolExecutor to increase threads to max before queueing?","body":"<p>The best solution that I can think of is to extend.</p>\n\n<p><code>ThreadPoolExecutor</code> offers a few hook methods:  <code>beforeExecute</code> and <code>afterExecute</code>.  In your extension you could maintain use a bounded queue to feed in tasks and a second unbounded queue to handle overflow.  When someone calls <code>submit</code>, you could attempt to place the request into the bounded queue.  If you're met with an exception, you just stick the task in your overflow queue.  You could then utilize the <code>afterExecute</code> hook to see if there is anything in the overflow queue after finishing a task.  This way, the executor will take care of the stuff in it's bounded queue first, and automatically pull from this unbounded queue as time permits.  </p>\n\n<p>It seems like more work than your solution, but at least it doesn't involve giving queues unexpected behaviors.  I also imagine that there's a better way to check the status of the queue and threads rather than relying on exceptions, which are fairly slow to throw.</p>\n"},{"tags":[],"owner":{"account_id":978760,"reputation":1422,"user_id":999043,"accept_rate":83,"display_name":"Ralf H"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1382523350,"creation_date":1382523350,"answer_id":19538899,"question_id":19528304,"body_markdown":"We have a subclass of `ThreadPoolExecutor` that takes an additional `creationThreshold` and overrides `execute`.\r\n\r\n\tpublic void execute(Runnable command) {\r\n\t\tsuper.execute(command);\r\n\t\tfinal int poolSize = getPoolSize();\r\n\t\tif (poolSize &lt; getMaximumPoolSize()) {\r\n\t\t\tif (getQueue().size() &gt; creationThreshold) {\r\n\t\t\t\tsynchronized (this) {\r\n\t\t\t\t\tsetCorePoolSize(poolSize + 1);\r\n\t\t\t\t\tsetCorePoolSize(poolSize);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nmaybe that helps too, but yours looks more artsy of course…\r\n","title":"How to get the ThreadPoolExecutor to increase threads to max before queueing?","body":"<p>We have a subclass of <code>ThreadPoolExecutor</code> that takes an additional <code>creationThreshold</code> and overrides <code>execute</code>.</p>\n\n<pre><code>public void execute(Runnable command) {\n    super.execute(command);\n    final int poolSize = getPoolSize();\n    if (poolSize &lt; getMaximumPoolSize()) {\n        if (getQueue().size() &gt; creationThreshold) {\n            synchronized (this) {\n                setCorePoolSize(poolSize + 1);\n                setCorePoolSize(poolSize);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>maybe that helps too, but yours looks more artsy of course…</p>\n"},{"tags":[],"owner":{"account_id":168764,"reputation":10177,"user_id":394431,"accept_rate":87,"display_name":"Robert Tupelo-Schneck"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1512485519,"creation_date":1385149435,"answer_id":20153234,"question_id":19528304,"body_markdown":"Note: I now prefer and recommend [my other answer](https://stackoverflow.com/a/24493856/394431).\r\n\r\nHere&#39;s a version which feels to me much more straightforward: Increase the corePoolSize (up to the limit of maximumPoolSize) whenever a new task is executed, then decrease the corePoolSize (down to the limit of the user specified &quot;core pool size&quot;) whenever a task completes.\r\n\r\nTo put it another way, keep track of the number of running or enqueued tasks, and ensure that the corePoolSize is equal to the number of tasks as long as it is between the user specified &quot;core pool size&quot; and the maximumPoolSize.\r\n\r\n    public class GrowBeforeQueueThreadPoolExecutor extends ThreadPoolExecutor {\r\n        private int userSpecifiedCorePoolSize;\r\n        private int taskCount;\r\n        \r\n        public GrowBeforeQueueThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue) {\r\n            super(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue);\r\n            userSpecifiedCorePoolSize = corePoolSize;\r\n        }\r\n    \r\n        @Override\r\n        public void execute(Runnable runnable) {\r\n            synchronized (this) {\r\n                taskCount++;\r\n                setCorePoolSizeToTaskCountWithinBounds();\r\n            }\r\n            super.execute(runnable);\r\n        }\r\n    \r\n        @Override\r\n        protected void afterExecute(Runnable runnable, Throwable throwable) {\r\n            super.afterExecute(runnable, throwable);\r\n            synchronized (this) {\r\n                taskCount--;\r\n                setCorePoolSizeToTaskCountWithinBounds();\r\n            }\r\n        }\r\n    \r\n        private void setCorePoolSizeToTaskCountWithinBounds() {\r\n            int threads = taskCount;\r\n            if (threads &lt; userSpecifiedCorePoolSize) threads = userSpecifiedCorePoolSize;\r\n            if (threads &gt; getMaximumPoolSize()) threads = getMaximumPoolSize();\r\n            setCorePoolSize(threads);\r\n        }\r\n    }\r\n\r\nAs written the class doesn&#39;t support changing the user specified corePoolSize or maximumPoolSize after construction, and doesn&#39;t support manipulating the work queue directly or via `remove()` or `purge()`.","title":"How to get the ThreadPoolExecutor to increase threads to max before queueing?","body":"<p>Note: I now prefer and recommend <a href=\"https://stackoverflow.com/a/24493856/394431\">my other answer</a>.</p>\n\n<p>Here's a version which feels to me much more straightforward: Increase the corePoolSize (up to the limit of maximumPoolSize) whenever a new task is executed, then decrease the corePoolSize (down to the limit of the user specified \"core pool size\") whenever a task completes.</p>\n\n<p>To put it another way, keep track of the number of running or enqueued tasks, and ensure that the corePoolSize is equal to the number of tasks as long as it is between the user specified \"core pool size\" and the maximumPoolSize.</p>\n\n<pre><code>public class GrowBeforeQueueThreadPoolExecutor extends ThreadPoolExecutor {\n    private int userSpecifiedCorePoolSize;\n    private int taskCount;\n\n    public GrowBeforeQueueThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue) {\n        super(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue);\n        userSpecifiedCorePoolSize = corePoolSize;\n    }\n\n    @Override\n    public void execute(Runnable runnable) {\n        synchronized (this) {\n            taskCount++;\n            setCorePoolSizeToTaskCountWithinBounds();\n        }\n        super.execute(runnable);\n    }\n\n    @Override\n    protected void afterExecute(Runnable runnable, Throwable throwable) {\n        super.afterExecute(runnable, throwable);\n        synchronized (this) {\n            taskCount--;\n            setCorePoolSizeToTaskCountWithinBounds();\n        }\n    }\n\n    private void setCorePoolSizeToTaskCountWithinBounds() {\n        int threads = taskCount;\n        if (threads &lt; userSpecifiedCorePoolSize) threads = userSpecifiedCorePoolSize;\n        if (threads &gt; getMaximumPoolSize()) threads = getMaximumPoolSize();\n        setCorePoolSize(threads);\n    }\n}\n</code></pre>\n\n<p>As written the class doesn't support changing the user specified corePoolSize or maximumPoolSize after construction, and doesn't support manipulating the work queue directly or via <code>remove()</code> or <code>purge()</code>.</p>\n"},{"tags":[],"owner":{"account_id":168764,"reputation":10177,"user_id":394431,"accept_rate":87,"display_name":"Robert Tupelo-Schneck"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1512485464,"creation_date":1385579706,"answer_id":20251135,"question_id":19528304,"body_markdown":"Note: I now prefer and recommend [my other answer](https://stackoverflow.com/a/24493856/394431).\r\n\r\nI have another proposal, following to the original idea of changing the queue to return false.  In this one all tasks can enter the queue, but whenever a task is enqueued after `execute()`, we follow it with a sentinel no-op task which the queue rejects, causing a new thread to spawn, which will execute the no-op immediately followed by something from the queue.\r\n\r\nBecause worker threads may be polling the `LinkedBlockingQueue` for a new task, it&#39;s possible for a task to get enqueued even when there&#39;s an available thread.  To avoid spawning new threads even when there are threads available, we need to keep track of how many threads are waiting for new tasks on the queue, and only spawn a new thread when there are more tasks on the queue than waiting threads.\r\n\r\n    final Runnable SENTINEL_NO_OP = new Runnable() { public void run() { } };\r\n\r\n    final AtomicInteger waitingThreads = new AtomicInteger(0);\r\n\r\n    BlockingQueue&lt;Runnable&gt; queue = new LinkedBlockingQueue&lt;Runnable&gt;() {\r\n        @Override\r\n        public boolean offer(Runnable e) {\r\n            // offer returning false will cause the executor to spawn a new thread\r\n            if (e == SENTINEL_NO_OP) return size() &lt;= waitingThreads.get();\r\n            else return super.offer(e);\r\n        }\r\n\r\n        @Override\r\n        public Runnable poll(long timeout, TimeUnit unit) throws InterruptedException {\r\n            try {\r\n                waitingThreads.incrementAndGet();\r\n                return super.poll(timeout, unit);\r\n            } finally {\r\n                waitingThreads.decrementAndGet();\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public Runnable take() throws InterruptedException {\r\n            try {\r\n                waitingThreads.incrementAndGet();\r\n                return super.take();\r\n            } finally {\r\n                waitingThreads.decrementAndGet();\r\n            }\r\n        }\r\n    };\r\n\r\n    ThreadPoolExecutor threadPool = new ThreadPoolExecutor(1, 50, 60, TimeUnit.SECONDS, queue) {\r\n        @Override\r\n        public void execute(Runnable command) {\r\n            super.execute(command);\r\n            if (getQueue().size() &gt; waitingThreads.get()) super.execute(SENTINEL_NO_OP);\r\n        }\r\n    };\r\n    threadPool.setRejectedExecutionHandler(new RejectedExecutionHandler() {\r\n        @Override\r\n        public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {\r\n            if (r == SENTINEL_NO_OP) return;\r\n            else throw new RejectedExecutionException();            \r\n        }\r\n    });\r\n","title":"How to get the ThreadPoolExecutor to increase threads to max before queueing?","body":"<p>Note: I now prefer and recommend <a href=\"https://stackoverflow.com/a/24493856/394431\">my other answer</a>.</p>\n\n<p>I have another proposal, following to the original idea of changing the queue to return false.  In this one all tasks can enter the queue, but whenever a task is enqueued after <code>execute()</code>, we follow it with a sentinel no-op task which the queue rejects, causing a new thread to spawn, which will execute the no-op immediately followed by something from the queue.</p>\n\n<p>Because worker threads may be polling the <code>LinkedBlockingQueue</code> for a new task, it's possible for a task to get enqueued even when there's an available thread.  To avoid spawning new threads even when there are threads available, we need to keep track of how many threads are waiting for new tasks on the queue, and only spawn a new thread when there are more tasks on the queue than waiting threads.</p>\n\n<pre><code>final Runnable SENTINEL_NO_OP = new Runnable() { public void run() { } };\n\nfinal AtomicInteger waitingThreads = new AtomicInteger(0);\n\nBlockingQueue&lt;Runnable&gt; queue = new LinkedBlockingQueue&lt;Runnable&gt;() {\n    @Override\n    public boolean offer(Runnable e) {\n        // offer returning false will cause the executor to spawn a new thread\n        if (e == SENTINEL_NO_OP) return size() &lt;= waitingThreads.get();\n        else return super.offer(e);\n    }\n\n    @Override\n    public Runnable poll(long timeout, TimeUnit unit) throws InterruptedException {\n        try {\n            waitingThreads.incrementAndGet();\n            return super.poll(timeout, unit);\n        } finally {\n            waitingThreads.decrementAndGet();\n        }\n    }\n\n    @Override\n    public Runnable take() throws InterruptedException {\n        try {\n            waitingThreads.incrementAndGet();\n            return super.take();\n        } finally {\n            waitingThreads.decrementAndGet();\n        }\n    }\n};\n\nThreadPoolExecutor threadPool = new ThreadPoolExecutor(1, 50, 60, TimeUnit.SECONDS, queue) {\n    @Override\n    public void execute(Runnable command) {\n        super.execute(command);\n        if (getQueue().size() &gt; waitingThreads.get()) super.execute(SENTINEL_NO_OP);\n    }\n};\nthreadPool.setRejectedExecutionHandler(new RejectedExecutionHandler() {\n    @Override\n    public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {\n        if (r == SENTINEL_NO_OP) return;\n        else throw new RejectedExecutionException();            \n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":168764,"reputation":10177,"user_id":394431,"accept_rate":87,"display_name":"Robert Tupelo-Schneck"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1512485304,"creation_date":1404142627,"answer_id":24493856,"question_id":19528304,"body_markdown":"I&#39;ve already got two other answers on this question, but I suspect this one is the best.\r\n\r\nIt&#39;s based on the technique of [the currently accepted answer](https://stackoverflow.com/a/19528305/394431), namely:\r\n\r\n1. Override the queue&#39;s `offer()` method to (sometimes) return false,\r\n2. which causes the `ThreadPoolExecutor` to either spawn a new thread or reject the task, and\r\n3. set the `RejectedExecutionHandler` to *actually* queue the task on rejection.\r\n\r\nThe problem is when `offer()` should return false.  The currently accepted answer returns false when the queue has a couple of tasks on it, but as I&#39;ve pointed out in my comment there, this causes undesirable effects.  Alternately, if you always return false, you&#39;ll keep spawning new threads even when you have threads waiting on the queue.\r\n\r\nThe solution is to use Java 7 [`LinkedTransferQueue`](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/LinkedTransferQueue.html) and have `offer()` call `tryTransfer()`.  When there is a waiting consumer thread the task will just get passed to that thread.  Otherwise, `offer()` will return false and the `ThreadPoolExecutor` will spawn a new thread.\r\n\r\n        BlockingQueue&lt;Runnable&gt; queue = new LinkedTransferQueue&lt;Runnable&gt;() {\r\n            @Override\r\n            public boolean offer(Runnable e) {\r\n                return tryTransfer(e);\r\n            }\r\n        };\r\n        ThreadPoolExecutor threadPool = new ThreadPoolExecutor(1, 50, 60, TimeUnit.SECONDS, queue);\r\n        threadPool.setRejectedExecutionHandler(new RejectedExecutionHandler() {\r\n            @Override\r\n            public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {\r\n                try {\r\n                    executor.getQueue().put(r);\r\n                } catch (InterruptedException e) {\r\n                    Thread.currentThread().interrupt();\r\n                }\r\n            }\r\n        });","title":"How to get the ThreadPoolExecutor to increase threads to max before queueing?","body":"<p>I've already got two other answers on this question, but I suspect this one is the best.</p>\n\n<p>It's based on the technique of <a href=\"https://stackoverflow.com/a/19528305/394431\">the currently accepted answer</a>, namely:</p>\n\n<ol>\n<li>Override the queue's <code>offer()</code> method to (sometimes) return false,</li>\n<li>which causes the <code>ThreadPoolExecutor</code> to either spawn a new thread or reject the task, and</li>\n<li>set the <code>RejectedExecutionHandler</code> to <em>actually</em> queue the task on rejection.</li>\n</ol>\n\n<p>The problem is when <code>offer()</code> should return false.  The currently accepted answer returns false when the queue has a couple of tasks on it, but as I've pointed out in my comment there, this causes undesirable effects.  Alternately, if you always return false, you'll keep spawning new threads even when you have threads waiting on the queue.</p>\n\n<p>The solution is to use Java 7 <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/LinkedTransferQueue.html\" rel=\"noreferrer\"><code>LinkedTransferQueue</code></a> and have <code>offer()</code> call <code>tryTransfer()</code>.  When there is a waiting consumer thread the task will just get passed to that thread.  Otherwise, <code>offer()</code> will return false and the <code>ThreadPoolExecutor</code> will spawn a new thread.</p>\n\n<pre><code>    BlockingQueue&lt;Runnable&gt; queue = new LinkedTransferQueue&lt;Runnable&gt;() {\n        @Override\n        public boolean offer(Runnable e) {\n            return tryTransfer(e);\n        }\n    };\n    ThreadPoolExecutor threadPool = new ThreadPoolExecutor(1, 50, 60, TimeUnit.SECONDS, queue);\n    threadPool.setRejectedExecutionHandler(new RejectedExecutionHandler() {\n        @Override\n        public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {\n            try {\n                executor.getQueue().put(r);\n            } catch (InterruptedException e) {\n                Thread.currentThread().interrupt();\n            }\n        }\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2506033,"reputation":513,"user_id":2179737,"display_name":"user2179737"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1540733501,"creation_date":1434808936,"answer_id":30954826,"question_id":19528304,"body_markdown":"The recommended answer resolves only one (1) of the issue with the JDK thread pool:\r\n\r\n1. JDK thread pools are biased towards queuing. So instead of spawning a new thread, they will queue the task. Only if the queue reaches its limit will the thread pool spawn a new thread.\r\n\r\n2. Thread retirement does not happen when load lightens. For example if we have a burst of jobs hitting the pool that causes the pool to go to max, followed by light load of max 2 tasks at a time, the pool will use all threads to service the light load preventing thread retirement. (only 2 threads would be needed…)\r\n\r\n\r\nUnhappy with the behavior above, I went ahead and implemented a pool to overcome the deficiencies above.\r\n\r\nTo resolve 2) Using Lifo scheduling resolves the issue. This idea was presented by Ben Maurer at ACM applicative 2015 conference:\r\n[Systems @ Facebook scale][1] \r\n\r\nSo a new implementation was born:\r\n\r\n[LifoThreadPoolExecutorSQP][2]\r\n\r\nSo far this implementation improves async execution perfomance for [ZEL][3].\r\n\r\nThe implementation is spin capable to reduce context switch overhead, yielding superior performance for certain use cases.\r\n\r\nHope it helps...\r\n\r\nPS: JDK Fork Join Pool implement ExecutorService and works as a &quot;normal&quot; thread pool, Implementation is performant, It uses LIFO Thread scheduling, however there is no control over internal queue size, retirement timeout..., and most importantly tasks cannot be interrupted when canceling them\r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=dlixGkelP9U&amp;feature=youtu.be&amp;list=PLn0nrSd4xjjZoaFwsTnmS1UFj3ob7gf7s\r\n  [2]: https://github.com/zolyfarkas/spf4j/blob/master/spf4j-core/src/main/java/org/spf4j/concurrent/LifoThreadPoolExecutorSQP.java\r\n  [3]: http://zolyfarkas.github.io/spf4j/spf4j-zel/index.html","title":"How to get the ThreadPoolExecutor to increase threads to max before queueing?","body":"<p>The recommended answer resolves only one (1) of the issue with the JDK thread pool:</p>\n\n<ol>\n<li><p>JDK thread pools are biased towards queuing. So instead of spawning a new thread, they will queue the task. Only if the queue reaches its limit will the thread pool spawn a new thread.</p></li>\n<li><p>Thread retirement does not happen when load lightens. For example if we have a burst of jobs hitting the pool that causes the pool to go to max, followed by light load of max 2 tasks at a time, the pool will use all threads to service the light load preventing thread retirement. (only 2 threads would be needed…)</p></li>\n</ol>\n\n<p>Unhappy with the behavior above, I went ahead and implemented a pool to overcome the deficiencies above.</p>\n\n<p>To resolve 2) Using Lifo scheduling resolves the issue. This idea was presented by Ben Maurer at ACM applicative 2015 conference:\n<a href=\"https://www.youtube.com/watch?v=dlixGkelP9U&amp;feature=youtu.be&amp;list=PLn0nrSd4xjjZoaFwsTnmS1UFj3ob7gf7s\" rel=\"nofollow noreferrer\">Systems @ Facebook scale</a> </p>\n\n<p>So a new implementation was born:</p>\n\n<p><a href=\"https://github.com/zolyfarkas/spf4j/blob/master/spf4j-core/src/main/java/org/spf4j/concurrent/LifoThreadPoolExecutorSQP.java\" rel=\"nofollow noreferrer\">LifoThreadPoolExecutorSQP</a></p>\n\n<p>So far this implementation improves async execution perfomance for <a href=\"http://zolyfarkas.github.io/spf4j/spf4j-zel/index.html\" rel=\"nofollow noreferrer\">ZEL</a>.</p>\n\n<p>The implementation is spin capable to reduce context switch overhead, yielding superior performance for certain use cases.</p>\n\n<p>Hope it helps...</p>\n\n<p>PS: JDK Fork Join Pool implement ExecutorService and works as a \"normal\" thread pool, Implementation is performant, It uses LIFO Thread scheduling, however there is no control over internal queue size, retirement timeout..., and most importantly tasks cannot be interrupted when canceling them</p>\n"},{"tags":[],"owner":{"account_id":962425,"reputation":1531,"user_id":986485,"accept_rate":14,"display_name":"Radu Toader"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1575832340,"creation_date":1575646834,"answer_id":59216185,"question_id":19528304,"body_markdown":"**Note: For JDK ThreadPoolExecutor** when you have a bounded queue, you are only creating new threads when offer is returning false. You might obtain something usefull with **CallerRunsPolicy** which creates a bit of BackPressure and directly calls run in caller thread.\r\n\r\nI need tasks to be executed from threads created by the pool and have an ubounded queue for scheduling, while the number of threads within the pool may **grow** or **shrink** between **corePoolSize** and **maximumPoolSize** so...\r\n \r\nI ended up doing a **full copy paste** from **ThreadPoolExecutor** and **change** a bit the execute method because \r\n**unfortunately** this could not be done by extension(it calls private methods).\r\n\r\n\r\nI didn&#39;t wanted to spawn new threads just immediately when new request arrive and all threads are busy(because I have in general short lived tasks). I&#39;ve added a threshold but feel free to change it to your needs ( maybe for mostly IO is better to remove this threshold)\r\n\r\n\r\n```\r\nprivate final AtomicInteger activeWorkers = new AtomicInteger(0);\r\nprivate volatile double threshold = 0.7d;\r\n\r\nprotected void beforeExecute(Thread t, Runnable r) {\r\n    activeWorkers.incrementAndGet();\r\n}\r\nprotected void afterExecute(Runnable r, Throwable t) {\r\n    activeWorkers.decrementAndGet();\r\n}\r\npublic void execute(Runnable command) {\r\n        if (command == null)\r\n            throw new NullPointerException();\r\n\r\n        int c = ctl.get();\r\n        if (workerCountOf(c) &lt; corePoolSize) {\r\n            if (addWorker(command, true))\r\n                return;\r\n            c = ctl.get();\r\n        }\r\n\r\n        if (isRunning(c) &amp;&amp; this.workQueue.offer(command)) {\r\n            int recheck = this.ctl.get();\r\n            if (!isRunning(recheck) &amp;&amp; this.remove(command)) {\r\n                this.reject(command);\r\n            } else if (workerCountOf(recheck) == 0) {\r\n                this.addWorker((Runnable) null, false);\r\n            }\r\n            //&gt;&gt;change start\r\n            else if (workerCountOf(recheck) &lt; maximumPoolSize //\r\n                &amp;&amp; (activeWorkers.get() &gt; workerCountOf(recheck) * threshold\r\n                    || workQueue.size() &gt; workerCountOf(recheck) * threshold)) {\r\n                this.addWorker((Runnable) null, false);\r\n            }\r\n            //&lt;&lt;change end\r\n        } else if (!this.addWorker(command, false)) {\r\n            this.reject(command);\r\n        }\r\n    }\r\n```","title":"How to get the ThreadPoolExecutor to increase threads to max before queueing?","body":"<p><strong>Note: For JDK ThreadPoolExecutor</strong> when you have a bounded queue, you are only creating new threads when offer is returning false. You might obtain something usefull with <strong>CallerRunsPolicy</strong> which creates a bit of BackPressure and directly calls run in caller thread.</p>\n\n<p>I need tasks to be executed from threads created by the pool and have an ubounded queue for scheduling, while the number of threads within the pool may <strong>grow</strong> or <strong>shrink</strong> between <strong>corePoolSize</strong> and <strong>maximumPoolSize</strong> so...</p>\n\n<p>I ended up doing a <strong>full copy paste</strong> from <strong>ThreadPoolExecutor</strong> and <strong>change</strong> a bit the execute method because \n<strong>unfortunately</strong> this could not be done by extension(it calls private methods).</p>\n\n<p>I didn't wanted to spawn new threads just immediately when new request arrive and all threads are busy(because I have in general short lived tasks). I've added a threshold but feel free to change it to your needs ( maybe for mostly IO is better to remove this threshold)</p>\n\n<pre><code>private final AtomicInteger activeWorkers = new AtomicInteger(0);\nprivate volatile double threshold = 0.7d;\n\nprotected void beforeExecute(Thread t, Runnable r) {\n    activeWorkers.incrementAndGet();\n}\nprotected void afterExecute(Runnable r, Throwable t) {\n    activeWorkers.decrementAndGet();\n}\npublic void execute(Runnable command) {\n        if (command == null)\n            throw new NullPointerException();\n\n        int c = ctl.get();\n        if (workerCountOf(c) &lt; corePoolSize) {\n            if (addWorker(command, true))\n                return;\n            c = ctl.get();\n        }\n\n        if (isRunning(c) &amp;&amp; this.workQueue.offer(command)) {\n            int recheck = this.ctl.get();\n            if (!isRunning(recheck) &amp;&amp; this.remove(command)) {\n                this.reject(command);\n            } else if (workerCountOf(recheck) == 0) {\n                this.addWorker((Runnable) null, false);\n            }\n            //&gt;&gt;change start\n            else if (workerCountOf(recheck) &lt; maximumPoolSize //\n                &amp;&amp; (activeWorkers.get() &gt; workerCountOf(recheck) * threshold\n                    || workQueue.size() &gt; workerCountOf(recheck) * threshold)) {\n                this.addWorker((Runnable) null, false);\n            }\n            //&lt;&lt;change end\n        } else if (!this.addWorker(command, false)) {\n            this.reject(command);\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6925906,"reputation":95,"user_id":5317000,"display_name":"Suresh Mahalingam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625481181,"creation_date":1625480680,"answer_id":68254502,"question_id":19528304,"body_markdown":"Below is a solution using two Threadpools both with core and max pool size as same. The second pool is used when the 1st pool is busy.\r\n\r\n&lt;code&gt;\r\n\r\n    import java.util.concurrent.Future;\r\n    import java.util.concurrent.LinkedBlockingQueue;\r\n    import java.util.concurrent.ThreadPoolExecutor;\r\n    import java.util.concurrent.TimeUnit;\r\n    \r\n    public class MyExecutor {\r\n        ThreadPoolExecutor tex1, tex2;\r\n        public MyExecutor() {\r\n            tex1 = new ThreadPoolExecutor(15, 15, 5, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;&gt;());\r\n            tex1.allowCoreThreadTimeOut(true);\r\n            tex2 = new ThreadPoolExecutor(45, 45, 100, TimeUnit.MILLISECONDS, new LinkedBlockingQueue&lt;&gt;());\r\n            tex2.allowCoreThreadTimeOut(true);\r\n        }\r\n    \r\n        public Future&lt;?&gt; submit(Runnable task) {\r\n            ThreadPoolExecutor ex = tex1;\r\n            int excessTasks1 = tex1.getQueue().size() + tex1.getActiveCount() - tex1.getCorePoolSize();\r\n            if (excessTasks1 &gt;= 0) {\r\n                int excessTasks2 = tex2.getQueue().size() + tex2.getActiveCount() - tex2.getCorePoolSize();;\r\n                if (excessTasks2 &lt;= 0 || excessTasks2 / (double) tex2.getCorePoolSize() &lt; excessTasks1 / (double) tex1.getCorePoolSize()) {\r\n                    ex = tex2;\r\n                }\r\n            }\r\n            return ex.submit(task);\r\n        }\r\n    }\r\n\r\n&lt;/code&gt;","title":"How to get the ThreadPoolExecutor to increase threads to max before queueing?","body":"<p>Below is a solution using two Threadpools both with core and max pool size as same. The second pool is used when the 1st pool is busy.</p>\n<code>\n<pre><code>import java.util.concurrent.Future;\nimport java.util.concurrent.LinkedBlockingQueue;\nimport java.util.concurrent.ThreadPoolExecutor;\nimport java.util.concurrent.TimeUnit;\n\npublic class MyExecutor {\n    ThreadPoolExecutor tex1, tex2;\n    public MyExecutor() {\n        tex1 = new ThreadPoolExecutor(15, 15, 5, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;&gt;());\n        tex1.allowCoreThreadTimeOut(true);\n        tex2 = new ThreadPoolExecutor(45, 45, 100, TimeUnit.MILLISECONDS, new LinkedBlockingQueue&lt;&gt;());\n        tex2.allowCoreThreadTimeOut(true);\n    }\n\n    public Future&lt;?&gt; submit(Runnable task) {\n        ThreadPoolExecutor ex = tex1;\n        int excessTasks1 = tex1.getQueue().size() + tex1.getActiveCount() - tex1.getCorePoolSize();\n        if (excessTasks1 &gt;= 0) {\n            int excessTasks2 = tex2.getQueue().size() + tex2.getActiveCount() - tex2.getCorePoolSize();;\n            if (excessTasks2 &lt;= 0 || excessTasks2 / (double) tex2.getCorePoolSize() &lt; excessTasks1 / (double) tex1.getCorePoolSize()) {\n                ex = tex2;\n            }\n        }\n        return ex.submit(task);\n    }\n}\n</code></pre>\n</code>\n"}],"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40925,"favorite_count":0,"down_vote_count":0,"up_vote_count":120,"accepted_answer_id":19528305,"answer_count":10,"score":120,"last_activity_date":1663797224,"creation_date":1382475763,"question_id":19528304,"body_markdown":"I&#39;ve been frustrated for some time with the default behavior of `ThreadPoolExecutor` which backs the `ExecutorService` thread-pools that so many of us use.  To quote from the Javadocs:\r\n\r\n&gt; If there are more than corePoolSize but less than maximumPoolSize threads running, a new thread will be created **only if the queue is full**.\r\n\r\nWhat this means is that if you define a thread pool with the following code, it will _never_ start the 2nd thread because the `LinkedBlockingQueue` is unbounded.\r\n\r\n    ExecutorService threadPool =\r\n       new ThreadPoolExecutor(1 /*core*/, 50 /*max*/, 60 /*timeout*/,\r\n          TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runnable&gt;(/* unlimited queue*/));\r\n\r\nOnly if you have a _bounded_ queue and the queue is _full_ are any threads above the core number started.  I suspect a large number of junior Java multithreaded programmers are unaware of this behavior of the `ThreadPoolExecutor`.\r\n\r\nNow I have specific use case where this is not-optimal.  I&#39;m looking for ways, without writing my own TPE class, to work around it.\r\n\r\nMy requirements are for a web service that is making call-backs to a possibly unreliable 3rd party.\r\n\r\n* I don&#39;t want to make the call-back synchronously with the web-request, so I want to use a thread-pool.\r\n* I typically get a couple of these a minute so I don&#39;t want to have a `newFixedThreadPool(...)` with a large number of threads that mostly are dormant.\r\n* Every so often I get a burst of this traffic and I want to scale up the number of threads to some max value (let&#39;s say 50).\r\n* I need to make a _best_ attempt to do all callbacks so I want to queue up any additional ones above 50.  I don&#39;t want to overwhelm the rest of my web-server by using a `newCachedThreadPool()`.\r\n\r\nHow can I work around this limitation in `ThreadPoolExecutor` where the queue needs to be bounded and full _before_ more threads will be started?  How can I get it to start more threads _before_ queuing tasks?\r\n\r\n**Edit:**\r\n\r\n@Flavio makes a good point about using the `ThreadPoolExecutor.allowCoreThreadTimeOut(true)` to have the core threads timeout and exit.  I considered that but I still wanted the core-threads feature.  I did not want the number of threads in the pool to drop below the core-size if possible.","title":"How to get the ThreadPoolExecutor to increase threads to max before queueing?","body":"<p>I've been frustrated for some time with the default behavior of <code>ThreadPoolExecutor</code> which backs the <code>ExecutorService</code> thread-pools that so many of us use.  To quote from the Javadocs:</p>\n<blockquote>\n<p>If there are more than corePoolSize but less than maximumPoolSize threads running, a new thread will be created <strong>only if the queue is full</strong>.</p>\n</blockquote>\n<p>What this means is that if you define a thread pool with the following code, it will <em>never</em> start the 2nd thread because the <code>LinkedBlockingQueue</code> is unbounded.</p>\n<pre><code>ExecutorService threadPool =\n   new ThreadPoolExecutor(1 /*core*/, 50 /*max*/, 60 /*timeout*/,\n      TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runnable&gt;(/* unlimited queue*/));\n</code></pre>\n<p>Only if you have a <em>bounded</em> queue and the queue is <em>full</em> are any threads above the core number started.  I suspect a large number of junior Java multithreaded programmers are unaware of this behavior of the <code>ThreadPoolExecutor</code>.</p>\n<p>Now I have specific use case where this is not-optimal.  I'm looking for ways, without writing my own TPE class, to work around it.</p>\n<p>My requirements are for a web service that is making call-backs to a possibly unreliable 3rd party.</p>\n<ul>\n<li>I don't want to make the call-back synchronously with the web-request, so I want to use a thread-pool.</li>\n<li>I typically get a couple of these a minute so I don't want to have a <code>newFixedThreadPool(...)</code> with a large number of threads that mostly are dormant.</li>\n<li>Every so often I get a burst of this traffic and I want to scale up the number of threads to some max value (let's say 50).</li>\n<li>I need to make a <em>best</em> attempt to do all callbacks so I want to queue up any additional ones above 50.  I don't want to overwhelm the rest of my web-server by using a <code>newCachedThreadPool()</code>.</li>\n</ul>\n<p>How can I work around this limitation in <code>ThreadPoolExecutor</code> where the queue needs to be bounded and full <em>before</em> more threads will be started?  How can I get it to start more threads <em>before</em> queuing tasks?</p>\n<p><strong>Edit:</strong></p>\n<p>@Flavio makes a good point about using the <code>ThreadPoolExecutor.allowCoreThreadTimeOut(true)</code> to have the core threads timeout and exit.  I considered that but I still wanted the core-threads feature.  I did not want the number of threads in the pool to drop below the core-size if possible.</p>\n"},{"tags":["java","jackson","java-record"],"answers":[{"tags":[],"owner":{"account_id":10805595,"reputation":3025,"user_id":7947994,"display_name":"JANO"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1663796377,"creation_date":1663796377,"answer_id":73807206,"question_id":73804015,"body_markdown":"From what I understood you can use records similar to normal objects/classes. This also means you can use records as parameters for other records. I created a simple example for converting your input JSON string to a nested object with records:\r\n\r\nInterface defining three records:\r\n```\r\npublic interface IRecord {\r\n    record LoginData(String username, String password) {};\r\n    record PersonalData(String givenName, String familyName) {};\r\n    record Data(LoginData loginData, PersonalData personalData) {};\r\n}\r\n```\r\nMain class to test:\r\n```\r\npublic class Main {\r\n\r\n    public static void main(String[] args) throws JsonProcessingException {\r\n\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        String jsonInString = &quot;{\\&quot;loginData\\&quot;: {\\&quot;username\\&quot;: \\&quot;foobar\\&quot;,\\&quot;password\\&quot;: \\&quot;secret\\&quot;}, \\&quot;personalData\\&quot;: {\\&quot;givenName\\&quot;: \\&quot;Foo\\&quot;, \\&quot;familyName\\&quot;: \\&quot;Bar\\&quot;}}&quot;;\r\n\r\n        IRecord.Data user = mapper.readValue(jsonInString, IRecord.Data.class);\r\n        System.out.println(user.loginData().username());\r\n    }\r\n}\r\n```\r\nOutput:\r\n```\r\nfoobar\r\n```\r\n\r\n","title":"Using Java records for (de-)serializing complex/nested objects to JSON","body":"<p>From what I understood you can use records similar to normal objects/classes. This also means you can use records as parameters for other records. I created a simple example for converting your input JSON string to a nested object with records:</p>\n<p>Interface defining three records:</p>\n<pre><code>public interface IRecord {\n    record LoginData(String username, String password) {};\n    record PersonalData(String givenName, String familyName) {};\n    record Data(LoginData loginData, PersonalData personalData) {};\n}\n</code></pre>\n<p>Main class to test:</p>\n<pre><code>public class Main {\n\n    public static void main(String[] args) throws JsonProcessingException {\n\n        ObjectMapper mapper = new ObjectMapper();\n        String jsonInString = &quot;{\\&quot;loginData\\&quot;: {\\&quot;username\\&quot;: \\&quot;foobar\\&quot;,\\&quot;password\\&quot;: \\&quot;secret\\&quot;}, \\&quot;personalData\\&quot;: {\\&quot;givenName\\&quot;: \\&quot;Foo\\&quot;, \\&quot;familyName\\&quot;: \\&quot;Bar\\&quot;}}&quot;;\n\n        IRecord.Data user = mapper.readValue(jsonInString, IRecord.Data.class);\n        System.out.println(user.loginData().username());\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>foobar\n</code></pre>\n"}],"owner":{"account_id":220794,"reputation":12257,"user_id":478406,"accept_rate":82,"display_name":"Robert Strauch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1070,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1663797148,"creation_date":1663776947,"question_id":73804015,"body_markdown":"Given the following JSON...\r\n\r\n```json\r\n{\r\n  &quot;loginData&quot;: {\r\n    &quot;username&quot;: &quot;foobar&quot;,\r\n    &quot;password&quot;: &quot;secret&quot;\r\n  },\r\n  &quot;personalData&quot;: {\r\n    &quot;givenName&quot;: &quot;Foo&quot;,\r\n    &quot;familyName&quot;: &quot;Bar&quot;\r\n  }\r\n}\r\n```\r\n\r\nThis is what my POJO (with some maybe verbose Lombok annotations) looks like. It gets (de-)serialized by Jackson:\r\n\r\n```java\r\n@Builder\r\n@Getter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class User {\r\n\r\n    private LoginData loginData;\r\n    private PersonalData personalData;\r\n\r\n    @Builder\r\n    @Getter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public static class LoginData {\r\n        private String username;\r\n        private String password;\r\n    }\r\n\r\n    @Builder\r\n    @Getter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public static class PersonalData {\r\n        private String givenName;\r\n        private String familyName;\r\n    }\r\n}\r\n```\r\n\r\nI wonder if it is possible to replicate this structure using the relatively new concept of a Java `record`. I&#39;m aware of a simple record like:\r\n\r\n```java\r\npublic record LoginData(String username, String password) {}\r\n```\r\n\r\nBut can records also be used for nested/complex objects which shall be converted to JSON with Jackson?","title":"Using Java records for (de-)serializing complex/nested objects to JSON","body":"<p>Given the following JSON...</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;loginData&quot;: {\n    &quot;username&quot;: &quot;foobar&quot;,\n    &quot;password&quot;: &quot;secret&quot;\n  },\n  &quot;personalData&quot;: {\n    &quot;givenName&quot;: &quot;Foo&quot;,\n    &quot;familyName&quot;: &quot;Bar&quot;\n  }\n}\n</code></pre>\n<p>This is what my POJO (with some maybe verbose Lombok annotations) looks like. It gets (de-)serialized by Jackson:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Builder\n@Getter\n@NoArgsConstructor\n@AllArgsConstructor\npublic class User {\n\n    private LoginData loginData;\n    private PersonalData personalData;\n\n    @Builder\n    @Getter\n    @NoArgsConstructor\n    @AllArgsConstructor\n    public static class LoginData {\n        private String username;\n        private String password;\n    }\n\n    @Builder\n    @Getter\n    @NoArgsConstructor\n    @AllArgsConstructor\n    public static class PersonalData {\n        private String givenName;\n        private String familyName;\n    }\n}\n</code></pre>\n<p>I wonder if it is possible to replicate this structure using the relatively new concept of a Java <code>record</code>. I'm aware of a simple record like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record LoginData(String username, String password) {}\n</code></pre>\n<p>But can records also be used for nested/complex objects which shall be converted to JSON with Jackson?</p>\n"},{"tags":["java","generics","jpa","dao"],"comments":[{"owner":{"account_id":51914,"reputation":67901,"user_id":155137,"accept_rate":91,"display_name":"Martijn Courteaux"},"score":0,"creation_date":1378763543,"post_id":18707582,"comment_id":27563580,"body_markdown":"possible duplicate of [Get generic type of java.util.List](http://stackoverflow.com/questions/1942644/get-generic-type-of-java-util-list)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/1942644/get-generic-type-of-java-util-list\">Get generic type of java.util.List</a>"},{"owner":{"account_id":1435980,"reputation":127999,"user_id":1357341,"accept_rate":100,"display_name":"arshajii"},"score":0,"creation_date":1378763596,"post_id":18707582,"comment_id":27563595,"body_markdown":"Can you give a little more context? Why do you need the class of `T`?","body":"Can you give a little more context? Why do you need the class of <code>T</code>?"},{"owner":{"account_id":2101627,"reputation":3199,"user_id":1869090,"accept_rate":87,"display_name":"t777"},"score":2,"creation_date":1378763700,"post_id":18707582,"comment_id":27563624,"body_markdown":"@MartijnCourteaux I have seen these question before I have asked my question but I did not found an answer there. So I do not think of an duplicate.","body":"@MartijnCourteaux I have seen these question before I have asked my question but I did not found an answer there. So I do not think of an duplicate."},{"owner":{"account_id":2101627,"reputation":3199,"user_id":1869090,"accept_rate":87,"display_name":"t777"},"score":0,"creation_date":1378763777,"post_id":18707582,"comment_id":27563654,"body_markdown":"@arshajii It is a Spring/Hibernate-DAO (aka Repository) and Spring needs the class of the entity. (I agree with you, that there are better approaches, but I am bound to the given API.)","body":"@arshajii It is a Spring/Hibernate-DAO (aka Repository) and Spring needs the class of the entity. (I agree with you, that there are better approaches, but I am bound to the given API.)"},{"owner":{"account_id":2101627,"reputation":3199,"user_id":1869090,"accept_rate":87,"display_name":"t777"},"score":0,"creation_date":1378763911,"post_id":18707582,"comment_id":27563698,"body_markdown":"@arshajii Thanks you. That is already my current workaround. I thought, there is a better way ... :(","body":"@arshajii Thanks you. That is already my current workaround. I thought, there is a better way ... :("},{"owner":{"account_id":1142966,"reputation":3482,"user_id":1126380,"accept_rate":75,"display_name":"Arturo Volpe"},"score":0,"creation_date":1378812275,"post_id":18707582,"comment_id":27580045,"body_markdown":"This is a kickoff sample http://ideone.com/676Wyw see my answers for details.","body":"This is a kickoff sample <a href=\"http://ideone.com/676Wyw\" rel=\"nofollow noreferrer\">ideone.com/676Wyw</a> see my answers for details."},{"owner":{"account_id":357343,"reputation":54520,"user_id":697449,"accept_rate":82,"display_name":"Paul Bellora"},"score":0,"creation_date":1378823832,"post_id":18707582,"comment_id":27587386,"body_markdown":"More accurately: possible duplicate of [how to get class instance of generics type T](http://stackoverflow.com/questions/3437897/how-to-get-class-instance-of-generics-type-t)","body":"More accurately: possible duplicate of <a href=\"http://stackoverflow.com/questions/3437897/how-to-get-class-instance-of-generics-type-t\">how to get class instance of generics type T</a>"},{"owner":{"account_id":1435980,"reputation":127999,"user_id":1357341,"accept_rate":100,"display_name":"arshajii"},"score":0,"creation_date":1378851675,"post_id":18707582,"comment_id":27601761,"body_markdown":"@t777 BalusC&#39;s answer explains that in your particular case it is possible to ascertain the class of `T`. I urge you to accept his answer instead.","body":"@t777 BalusC&#39;s answer explains that in your particular case it is possible to ascertain the class of <code>T</code>. I urge you to accept his answer instead."}],"answers":[{"tags":[],"owner":{"account_id":1230477,"reputation":2295,"user_id":1195197,"display_name":"Farid"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1378764142,"creation_date":1378764142,"answer_id":18707748,"question_id":18707582,"body_markdown":"Common way to sort this issue in a secure way is to add a constructor to store the class of the type.\r\nExample in your context:\r\n\r\n    public abstract class BaseDao&lt;T extends PersistentObject&gt; {\r\n      private Class&lt;T&gt; classT;\r\n    \r\n      BaseDao(Class&lt;T&gt; classT){\r\n        this.classT=classT;\r\n      }\r\n    \r\n      protected Class&lt;T&gt; getClazz() {\r\n         return classT;\r\n      }\r\n    \r\n      // ...\r\n    \r\n    }","title":"Get actual type of generic type argument on abstract superclass","body":"<p>Common way to sort this issue in a secure way is to add a constructor to store the class of the type.\nExample in your context:</p>\n\n<pre><code>public abstract class BaseDao&lt;T extends PersistentObject&gt; {\n  private Class&lt;T&gt; classT;\n\n  BaseDao(Class&lt;T&gt; classT){\n    this.classT=classT;\n  }\n\n  protected Class&lt;T&gt; getClazz() {\n     return classT;\n  }\n\n  // ...\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1142966,"reputation":3482,"user_id":1126380,"accept_rate":75,"display_name":"Arturo Volpe"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1378812299,"creation_date":1378767136,"answer_id":18708282,"question_id":18707582,"body_markdown":"If your class is abstract, you can try with this:\r\n\r\n\tpublic class&lt;T&gt; getClassOfT() {\r\n\t\tfinal ParameterizedType type = (ParameterizedType) this.getClass()\r\n\t\t\t\t.getGenericSuperclass();\r\n\t\tClass&lt;T&gt; clazz = (Class&lt;T&gt;) type.getActualTypeArguments()[0];\r\n\t\treturn clazz;\r\n\t}\r\n\r\n**This only work if the instance is a direct subclass**, and the type of the class you want is the first one (see the [0]).\r\n\r\nIf you have a large hierarchy of dao&#39;s, you can try fidn the BaseDao recursively and get the parametrized type\r\n\r\n\r\nSee a example [here][1] (see the output in the bottom)\r\n\r\nCheers and sorry for my bad english\r\n\r\n\r\n  [1]: http://ideone.com/676Wyw","title":"Get actual type of generic type argument on abstract superclass","body":"<p>If your class is abstract, you can try with this:</p>\n\n<pre><code>public class&lt;T&gt; getClassOfT() {\n    final ParameterizedType type = (ParameterizedType) this.getClass()\n            .getGenericSuperclass();\n    Class&lt;T&gt; clazz = (Class&lt;T&gt;) type.getActualTypeArguments()[0];\n    return clazz;\n}\n</code></pre>\n\n<p><strong>This only work if the instance is a direct subclass</strong>, and the type of the class you want is the first one (see the [0]).</p>\n\n<p>If you have a large hierarchy of dao's, you can try fidn the BaseDao recursively and get the parametrized type</p>\n\n<p>See a example <a href=\"http://ideone.com/676Wyw\" rel=\"noreferrer\">here</a> (see the output in the bottom)</p>\n\n<p>Cheers and sorry for my bad english</p>\n"},{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":27,"is_accepted":true,"score":27,"last_activity_date":1378775476,"creation_date":1378775476,"answer_id":18709327,"question_id":18707582,"body_markdown":"It&#39;s definitely possible to extract it from [`Class#getGenericSuperclass()`][1] because it&#39;s not defined during runtime, but during compiletime by `FooDao extends BaseDao&lt;Foo&gt;`. \r\n\r\nHere&#39;s a kickoff example how you could extract the desired generic super type in the constructor of the abstract class, taking a hierarchy of subclasses into account (along with a real world use case of applying it on generic `EntityManager` methods without the need to explicitly supply the type):\r\n\r\n    public abstract class BaseDao&lt;E extends BaseEntity&gt; {\r\n    \r\n        @PersistenceContext\r\n        private EntityManager em;\r\n\r\n        private Class&lt;E&gt; type;\r\n    \r\n        @SuppressWarnings(&quot;unchecked&quot;) // For the cast on Class&lt;E&gt;.\r\n        public BaseDao() {\r\n            Type type = getClass().getGenericSuperclass();\r\n    \r\n            while (!(type instanceof ParameterizedType) || ((ParameterizedType) type).getRawType() != BaseDao.class) {\r\n                if (type instanceof ParameterizedType) {\r\n                    type = ((Class&lt;?&gt;) ((ParameterizedType) type).getRawType()).getGenericSuperclass();\r\n                } else {\r\n                    type = ((Class&lt;?&gt;) type).getGenericSuperclass();\r\n                }\r\n            }\r\n    \r\n            this.type = (Class&lt;E&gt;) ((ParameterizedType) type).getActualTypeArguments()[0];\r\n        }\r\n\r\n        public E find(Long id) {\r\n            return em.find(type, id);\r\n        }\r\n\r\n        public List&lt;E&gt; list() {\r\n            return em.createQuery(String.format(&quot;SELECT e FROM %s e ORDER BY id&quot;, type.getSimpleName()), type).getResultList();\r\n        }\r\n\r\n        // ...\r\n    }\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getGenericSuperclass%28%29","title":"Get actual type of generic type argument on abstract superclass","body":"<p>It's definitely possible to extract it from <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getGenericSuperclass%28%29\"><code>Class#getGenericSuperclass()</code></a> because it's not defined during runtime, but during compiletime by <code>FooDao extends BaseDao&lt;Foo&gt;</code>. </p>\n\n<p>Here's a kickoff example how you could extract the desired generic super type in the constructor of the abstract class, taking a hierarchy of subclasses into account (along with a real world use case of applying it on generic <code>EntityManager</code> methods without the need to explicitly supply the type):</p>\n\n<pre><code>public abstract class BaseDao&lt;E extends BaseEntity&gt; {\n\n    @PersistenceContext\n    private EntityManager em;\n\n    private Class&lt;E&gt; type;\n\n    @SuppressWarnings(\"unchecked\") // For the cast on Class&lt;E&gt;.\n    public BaseDao() {\n        Type type = getClass().getGenericSuperclass();\n\n        while (!(type instanceof ParameterizedType) || ((ParameterizedType) type).getRawType() != BaseDao.class) {\n            if (type instanceof ParameterizedType) {\n                type = ((Class&lt;?&gt;) ((ParameterizedType) type).getRawType()).getGenericSuperclass();\n            } else {\n                type = ((Class&lt;?&gt;) type).getGenericSuperclass();\n            }\n        }\n\n        this.type = (Class&lt;E&gt;) ((ParameterizedType) type).getActualTypeArguments()[0];\n    }\n\n    public E find(Long id) {\n        return em.find(type, id);\n    }\n\n    public List&lt;E&gt; list() {\n        return em.createQuery(String.format(\"SELECT e FROM %s e ORDER BY id\", type.getSimpleName()), type).getResultList();\n    }\n\n    // ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":225930,"reputation":5037,"user_id":486688,"accept_rate":67,"display_name":"Jonathan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663730223,"creation_date":1382753717,"answer_id":19602100,"question_id":18707582,"body_markdown":"You might check out [TypeTools](https://github.com/jhalterman/typetools) (which I authored) for this:\r\n\r\n\r\n    Class&lt;T&gt; t = (Class&lt;T&gt;)TypeResolver.resolveRawArgument(BaseDao.class, getClass());","title":"Get actual type of generic type argument on abstract superclass","body":"<p>You might check out <a href=\"https://github.com/jhalterman/typetools\" rel=\"nofollow noreferrer\">TypeTools</a> (which I authored) for this:</p>\n<pre><code>Class&lt;T&gt; t = (Class&lt;T&gt;)TypeResolver.resolveRawArgument(BaseDao.class, getClass());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5066381,"reputation":291,"user_id":4066381,"display_name":"Marcel Šebek"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1411388512,"creation_date":1411388512,"answer_id":25974010,"question_id":18707582,"body_markdown":"Actually, this is not as easy as it seems. There is a problem when you have rich type hierarchy and want to get generic parameter in the supertype. For example, you may have the following hierarchy:\r\n\r\n    public abstract class BaseDao&lt;T extends BaseEntity&gt; {\r\n    ...\r\n    }\r\n\r\n    public abstract class SpecialDao&lt;X extends SomeType, E extends BaseEntity&gt; extends BaseDao&lt;E&gt; {\r\n    ...\r\n    }\r\n\r\n    public class MyDao extends SpecialDao&lt;TypeImpl, EntityImpl&gt; {\r\n    ...\r\n    }\r\n\r\nCalling `getClass().getGenericSuperclass()` in an instance of `MyDao` returns `SpecialDao&lt;TypeImpl, EntityImpl&gt;`, but when you call it inside `BaseDao` method, you don&#39;t know how deep the generic hierarchy is. Moreover, as far as I know, you cannot obtain generic supertype of a supertype. Thus, when you invoke `getClass().getGenericSuperclass().getRawType().getGenericSuperclass()` (with some typecasting omitted for readability), you&#39;ll get `BaseDao&lt;E&gt;` (notice `&lt;E&gt;` instead of `&lt;T&gt;`). Since `getRawType()` strips all type-variable mapping from the type, we&#39;re starting with unmapped type variables `X` and `E`. Then `getGenericSuperclass()` just maps these type variables to their positions in `BaseDao`.\r\n\r\nThis behavior can be used so that we keep mapping from type variables to their actual values while traversing the type hierarchy. When we hit the class we want, we simply look up its type parameters in the map. Here is the code:\r\n\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\tpublic static &lt;T&gt; Class&lt;T&gt; getGenericClassParameter(final Class&lt;?&gt; parameterizedSubClass, final Class&lt;?&gt; genericSuperClass, final int pos) {\r\n\t\t// a mapping from type variables to actual values (classes)\r\n\t\tMap&lt;TypeVariable&lt;?&gt;, Class&lt;?&gt;&gt; mapping = new HashMap&lt;&gt;();\r\n\r\n\t\tClass&lt;?&gt; klass = parameterizedSubClass;\r\n\t\twhile (klass != null) {\r\n\t\t\tType type = klass.getGenericSuperclass();\r\n\t\t\tif (type instanceof ParameterizedType) {\r\n\t\t\t\tParameterizedType parType = (ParameterizedType) type;\r\n\t\t\t\tType rawType = parType.getRawType();\r\n\t\t\t\tif (rawType == genericSuperClass) {\r\n\t\t\t\t\t// found\r\n\t\t\t\t\tType t = parType.getActualTypeArguments()[pos];\r\n\t\t\t\t\tif (t instanceof Class&lt;?&gt;) {\r\n\t\t\t\t\t\treturn (Class&lt;T&gt;) t;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn (Class&lt;T&gt;) mapping.get((TypeVariable&lt;?&gt;)t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// resolve\r\n\t\t\t\tType[] vars = ((GenericDeclaration)(parType.getRawType())).getTypeParameters();\r\n\t\t\t\tType[] args = parType.getActualTypeArguments();\r\n\t\t\t\tfor (int i = 0; i &lt; vars.length; i++) {\r\n\t\t\t\t\tif (args[i] instanceof Class&lt;?&gt;) {\r\n\t\t\t\t\t\tmapping.put((TypeVariable)vars[i], (Class&lt;?&gt;)args[i]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmapping.put((TypeVariable)vars[i], mapping.get((TypeVariable&lt;?&gt;)(args[i])));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tklass = (Class&lt;?&gt;) rawType;\r\n\t\t\t} else {\r\n\t\t\t\tklass = klass.getSuperclass();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthrow new IllegalArgumentException(&quot;no generic supertype for &quot; + parameterizedSubClass + &quot; of type &quot; + genericSuperClass);\r\n\t}\r\n","title":"Get actual type of generic type argument on abstract superclass","body":"<p>Actually, this is not as easy as it seems. There is a problem when you have rich type hierarchy and want to get generic parameter in the supertype. For example, you may have the following hierarchy:</p>\n\n<pre><code>public abstract class BaseDao&lt;T extends BaseEntity&gt; {\n...\n}\n\npublic abstract class SpecialDao&lt;X extends SomeType, E extends BaseEntity&gt; extends BaseDao&lt;E&gt; {\n...\n}\n\npublic class MyDao extends SpecialDao&lt;TypeImpl, EntityImpl&gt; {\n...\n}\n</code></pre>\n\n<p>Calling <code>getClass().getGenericSuperclass()</code> in an instance of <code>MyDao</code> returns <code>SpecialDao&lt;TypeImpl, EntityImpl&gt;</code>, but when you call it inside <code>BaseDao</code> method, you don't know how deep the generic hierarchy is. Moreover, as far as I know, you cannot obtain generic supertype of a supertype. Thus, when you invoke <code>getClass().getGenericSuperclass().getRawType().getGenericSuperclass()</code> (with some typecasting omitted for readability), you'll get <code>BaseDao&lt;E&gt;</code> (notice <code>&lt;E&gt;</code> instead of <code>&lt;T&gt;</code>). Since <code>getRawType()</code> strips all type-variable mapping from the type, we're starting with unmapped type variables <code>X</code> and <code>E</code>. Then <code>getGenericSuperclass()</code> just maps these type variables to their positions in <code>BaseDao</code>.</p>\n\n<p>This behavior can be used so that we keep mapping from type variables to their actual values while traversing the type hierarchy. When we hit the class we want, we simply look up its type parameters in the map. Here is the code:</p>\n\n<pre><code>@SuppressWarnings(\"unchecked\")\npublic static &lt;T&gt; Class&lt;T&gt; getGenericClassParameter(final Class&lt;?&gt; parameterizedSubClass, final Class&lt;?&gt; genericSuperClass, final int pos) {\n    // a mapping from type variables to actual values (classes)\n    Map&lt;TypeVariable&lt;?&gt;, Class&lt;?&gt;&gt; mapping = new HashMap&lt;&gt;();\n\n    Class&lt;?&gt; klass = parameterizedSubClass;\n    while (klass != null) {\n        Type type = klass.getGenericSuperclass();\n        if (type instanceof ParameterizedType) {\n            ParameterizedType parType = (ParameterizedType) type;\n            Type rawType = parType.getRawType();\n            if (rawType == genericSuperClass) {\n                // found\n                Type t = parType.getActualTypeArguments()[pos];\n                if (t instanceof Class&lt;?&gt;) {\n                    return (Class&lt;T&gt;) t;\n                } else {\n                    return (Class&lt;T&gt;) mapping.get((TypeVariable&lt;?&gt;)t);\n                }\n            }\n            // resolve\n            Type[] vars = ((GenericDeclaration)(parType.getRawType())).getTypeParameters();\n            Type[] args = parType.getActualTypeArguments();\n            for (int i = 0; i &lt; vars.length; i++) {\n                if (args[i] instanceof Class&lt;?&gt;) {\n                    mapping.put((TypeVariable)vars[i], (Class&lt;?&gt;)args[i]);\n                } else {\n                    mapping.put((TypeVariable)vars[i], mapping.get((TypeVariable&lt;?&gt;)(args[i])));\n                }\n            }\n            klass = (Class&lt;?&gt;) rawType;\n        } else {\n            klass = klass.getSuperclass();\n        }\n    }\n    throw new IllegalArgumentException(\"no generic supertype for \" + parameterizedSubClass + \" of type \" + genericSuperClass);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2118179,"reputation":8532,"user_id":1882010,"accept_rate":100,"display_name":"eugene82"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1427877879,"creation_date":1427877879,"answer_id":29386397,"question_id":18707582,"body_markdown":"If Spring framework is available, you can do like here:\r\n\r\n    import org.springframework.core.GenericTypeResolver;\r\n\r\n    public abstract class BaseDao&lt;T extends PersistentObject&gt; {\r\n\r\n        protected Class&lt;T&gt; getClazz() {\r\n            return (Class&lt;T&gt;) GenericTypeResolver.resolveTypeArgument(getClass(), BaseDao.class);\r\n        }\r\n\r\n    }","title":"Get actual type of generic type argument on abstract superclass","body":"<p>If Spring framework is available, you can do like here:</p>\n\n<pre><code>import org.springframework.core.GenericTypeResolver;\n\npublic abstract class BaseDao&lt;T extends PersistentObject&gt; {\n\n    protected Class&lt;T&gt; getClazz() {\n        return (Class&lt;T&gt;) GenericTypeResolver.resolveTypeArgument(getClass(), BaseDao.class);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11787081,"reputation":526,"user_id":8624381,"display_name":"Felipe Bejarano"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663796612,"creation_date":1663796612,"answer_id":73807247,"question_id":18707582,"body_markdown":"You can pass the type of class through the constructor of the abstract class, like this.\r\n\r\n    public abstract class BaseDao&lt;T extends PersistentObject&gt; {\r\n\r\n        private final Class&lt;T&gt; typeClass;\r\n\r\n        //Here in the constructor, you are asking for the actual Type Class.\r\n        BaseDao(Class&lt;T&gt; typeClass) {\r\n            this.typeClass = typeClass;\r\n        }\r\n\r\n       // ...\r\n\r\n    }\r\n\r\nAnd in the concrete class pass the class type in the constructor.\r\n\r\n    public class BaseDaoImpl extends BaseDao&lt;ActualType&gt; {\r\n       \r\n       BaseDaoImpl() {\r\n           //Here in the implementation, you pass the type class\r\n           super(ActualType.class);\r\n       }\r\n    }\r\n\r\nThe problem with this approach is that you cannot ensure that the type you are passing through the constructor is the actual type is being set in generic, so this can lead to issues if developers do not make sure they are passing the correct type through the constructor. ","title":"Get actual type of generic type argument on abstract superclass","body":"<p>You can pass the type of class through the constructor of the abstract class, like this.</p>\n<pre><code>public abstract class BaseDao&lt;T extends PersistentObject&gt; {\n\n    private final Class&lt;T&gt; typeClass;\n\n    //Here in the constructor, you are asking for the actual Type Class.\n    BaseDao(Class&lt;T&gt; typeClass) {\n        this.typeClass = typeClass;\n    }\n\n   // ...\n\n}\n</code></pre>\n<p>And in the concrete class pass the class type in the constructor.</p>\n<pre><code>public class BaseDaoImpl extends BaseDao&lt;ActualType&gt; {\n   \n   BaseDaoImpl() {\n       //Here in the implementation, you pass the type class\n       super(ActualType.class);\n   }\n}\n</code></pre>\n<p>The problem with this approach is that you cannot ensure that the type you are passing through the constructor is the actual type is being set in generic, so this can lead to issues if developers do not make sure they are passing the correct type through the constructor.</p>\n"}],"owner":{"account_id":2101627,"reputation":3199,"user_id":1869090,"accept_rate":87,"display_name":"t777"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21446,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":18709327,"answer_count":7,"score":16,"last_activity_date":1663796612,"creation_date":1378763361,"question_id":18707582,"body_markdown":"I have a class like:\r\n\r\n    public abstract class BaseDao&lt;T extends PersistentObject&gt; {\r\n    \r\n      protected Class&lt;T&gt; getClazz() {\r\n         return T.class;\r\n      }\r\n\r\n      // ...\r\n\r\n    }\r\n\r\nBut the compiler says to `T.class;`: `Illegal class literal for the type parameter T`.\r\n\r\nHow can I get the class of `T`?\r\n","title":"Get actual type of generic type argument on abstract superclass","body":"<p>I have a class like:</p>\n\n<pre><code>public abstract class BaseDao&lt;T extends PersistentObject&gt; {\n\n  protected Class&lt;T&gt; getClazz() {\n     return T.class;\n  }\n\n  // ...\n\n}\n</code></pre>\n\n<p>But the compiler says to <code>T.class;</code>: <code>Illegal class literal for the type parameter T</code>.</p>\n\n<p>How can I get the class of <code>T</code>?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1900385,"reputation":709,"user_id":1716357,"display_name":"wxyz"},"score":1,"creation_date":1383734012,"post_id":19809640,"comment_id":29451425,"body_markdown":"why don&#39;t u use a loop to check every package with a break if you don&#39;t reach exception?","body":"why don&#39;t u use a loop to check every package with a break if you don&#39;t reach exception?"},{"owner":{"account_id":267393,"reputation":10719,"user_id":555553,"accept_rate":62,"display_name":"mishadoff"},"score":0,"creation_date":1383734071,"post_id":19809640,"comment_id":29451464,"body_markdown":"or you can call recursively the same method in catch block with another classname","body":"or you can call recursively the same method in catch block with another classname"},{"owner":{"account_id":984212,"reputation":62352,"user_id":1003142,"display_name":"Konstantin Yovkov"},"score":0,"creation_date":1383734077,"post_id":19809640,"comment_id":29451468,"body_markdown":"@wxyz, this won&#39;t be a (complete) solution, because he may be interested in a class, that is within some library. If there is a way to list all the loaded classes in the classpath at Runtime...","body":"@wxyz, this won&#39;t be a (complete) solution, because he may be interested in a class, that is within some library. If there is a way to list all the loaded classes in the classpath at Runtime..."},{"owner":{"account_id":265194,"reputation":2046,"user_id":2006403,"accept_rate":57,"display_name":"Jayasagar"},"score":0,"creation_date":1383734120,"post_id":19809640,"comment_id":29451496,"body_markdown":"Why can&#39;t you expect fully qualified name instead just a class name ?. Who is giving class name ? instead they can pass fully qualified class name right ?","body":"Why can&#39;t you expect fully qualified name instead just a class name ?. Who is giving class name ? instead they can pass fully qualified class name right ?"},{"owner":{"account_id":2021595,"reputation":8795,"user_id":1807643,"accept_rate":89,"display_name":"KeyNone"},"score":0,"creation_date":1383734500,"post_id":19809640,"comment_id":29451726,"body_markdown":"@Jayasagar the class name is stored in a database and it&#39;s not a small project. may have plenty of side-effects to switch to fully-qualified classnames","body":"@Jayasagar the class name is stored in a database and it&#39;s not a small project. may have plenty of side-effects to switch to fully-qualified classnames"}],"answers":[{"tags":[],"owner":{"account_id":320617,"reputation":3671,"user_id":638994,"accept_rate":89,"display_name":"lucian.pantelimon"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1663796225,"creation_date":1383734198,"answer_id":19809780,"question_id":19809640,"body_markdown":"I&#39;d stick to the `Class.forName` method for that.\r\n\r\nYou can store the class and package names in `Collection`s or `Set`s and loop through those elements. When you get a `ClassNotFoundException`, you just continue your search. If you don&#39;t get an exception, you exit the loop using `break`, as you have found the class you were looking for.\r\n\r\nThe reason I&#39;d go for `Class.forName` is that it loads the class for you if it had not been already loaded by the VM. This is quite a powerful side effect. \r\n\r\nIt basically relieves you of the trouble of digging through the whole `CLASSPATH` and looking for class files to load in the VM and dealing with issues such as whether the class has already been loaded or not by the VM.\r\n\r\n**EDIT:**\r\n\r\nJakob Jenkov has written some really great articles/tutorials on Java. I&#39;ve found them extremely useful when dealing with reflection, class loaders and concurrency (some of the &quot;hardest&quot; aspects of Java). \r\n\r\n[Here][1]&#39;s a good article on the Java class loader by him, for if you still decide not to use `Class.forName`.\r\n\r\n\r\n  [1]: https://jenkov.com/tutorials/java-reflection/dynamic-class-loading-reloading.html","title":"Check if class exists without running into ClassNotFoundException","body":"<p>I'd stick to the <code>Class.forName</code> method for that.</p>\n<p>You can store the class and package names in <code>Collection</code>s or <code>Set</code>s and loop through those elements. When you get a <code>ClassNotFoundException</code>, you just continue your search. If you don't get an exception, you exit the loop using <code>break</code>, as you have found the class you were looking for.</p>\n<p>The reason I'd go for <code>Class.forName</code> is that it loads the class for you if it had not been already loaded by the VM. This is quite a powerful side effect.</p>\n<p>It basically relieves you of the trouble of digging through the whole <code>CLASSPATH</code> and looking for class files to load in the VM and dealing with issues such as whether the class has already been loaded or not by the VM.</p>\n<p><strong>EDIT:</strong></p>\n<p>Jakob Jenkov has written some really great articles/tutorials on Java. I've found them extremely useful when dealing with reflection, class loaders and concurrency (some of the &quot;hardest&quot; aspects of Java).</p>\n<p><a href=\"https://jenkov.com/tutorials/java-reflection/dynamic-class-loading-reloading.html\" rel=\"nofollow noreferrer\">Here</a>'s a good article on the Java class loader by him, for if you still decide not to use <code>Class.forName</code>.</p>\n"},{"tags":[],"owner":{"account_id":3154697,"reputation":7046,"user_id":2667343,"display_name":"pasha701"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1383734393,"creation_date":1383734393,"answer_id":19809864,"question_id":19809640,"body_markdown":"    public Class&lt;Job&gt; getClass(String className) {\r\n        String packages[] = { &quot;package.one.&quot;, &quot;package.two.&quot; };\r\n        for (int j = 0; j &lt; packages.length; j++) {\r\n            try {\r\n                return (Class&lt;Job&gt;) Class.forName(packages[j] + className);\r\n            } catch (ClassNotFoundException ex) {\r\n                System.out.println(&quot;Package &quot;+packages[j]+&quot; is not worked&quot;);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n","title":"Check if class exists without running into ClassNotFoundException","body":"<pre><code>public Class&lt;Job&gt; getClass(String className) {\n    String packages[] = { \"package.one.\", \"package.two.\" };\n    for (int j = 0; j &lt; packages.length; j++) {\n        try {\n            return (Class&lt;Job&gt;) Class.forName(packages[j] + className);\n        } catch (ClassNotFoundException ex) {\n            System.out.println(\"Package \"+packages[j]+\" is not worked\");\n        }\n    }\n    return null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3512449,"reputation":3956,"user_id":2936460,"accept_rate":83,"display_name":"SQB"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1383734978,"creation_date":1383734978,"answer_id":19810087,"question_id":19809640,"body_markdown":"In this case, I wouldn&#39;t worry about using the `ClassNotFoundException`. While in general a case can be made to not use exceptions for flow control, here it hardly counts as such.\r\n\r\nI&#39;d probably wrap it in a function, like so\r\n\r\n    public static String getPackageForClass(String className, String... packageNames) {\r\n        for (String packageName : packageNames) {\r\n            try {\r\n                Class.forName(packageName + className);\r\n                return packageName;\r\n            } catch (ClassNotFoundException ignored) {\r\n            }\r\n        }\r\n        return &quot;&quot;;\r\n    }\r\nor return the class directly, if you so wish\r\n\r\n    public static Class getPackageForClass(String className, String... packageNames) {\r\n        for (String packageName : packageNames) {\r\n            try {\r\n                return Class.forName(packageName + className);\r\n            } catch (ClassNotFoundException ignored) {\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n","title":"Check if class exists without running into ClassNotFoundException","body":"<p>In this case, I wouldn't worry about using the <code>ClassNotFoundException</code>. While in general a case can be made to not use exceptions for flow control, here it hardly counts as such.</p>\n\n<p>I'd probably wrap it in a function, like so</p>\n\n<pre><code>public static String getPackageForClass(String className, String... packageNames) {\n    for (String packageName : packageNames) {\n        try {\n            Class.forName(packageName + className);\n            return packageName;\n        } catch (ClassNotFoundException ignored) {\n        }\n    }\n    return \"\";\n}\n</code></pre>\n\n<p>or return the class directly, if you so wish</p>\n\n<pre><code>public static Class getPackageForClass(String className, String... packageNames) {\n    for (String packageName : packageNames) {\n        try {\n            return Class.forName(packageName + className);\n        } catch (ClassNotFoundException ignored) {\n        }\n    }\n    return null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":984212,"reputation":62352,"user_id":1003142,"display_name":"Konstantin Yovkov"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1383735755,"creation_date":1383735755,"answer_id":19810347,"question_id":19809640,"body_markdown":"You can use [Guava&#39;s Reflection][1] utilities to get the [ClassInfo][2] of every class loaded in the classpath.\r\n\r\n    ClassLoader classLoader = ClassLoader.getSystemClassLoader();\r\n    ClassPath classPath = ClassPath.from(classLoader);\r\n    ImmutableSet&lt;ClassInfo&gt; set = classPath.getTopLevelClasses();\r\n    for (ClassInfo ci : set) {\r\n        System.out.println(ci.getName());\r\n    }\r\n\r\nIn the loop you can implement your custom logic to load the class with the `className` you&#39;re providing.\r\n\r\n  [1]: https://code.google.com/p/guava-libraries/wiki/ReflectionExplained\r\n  [2]: http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/reflect/ClassPath.ClassInfo.html","title":"Check if class exists without running into ClassNotFoundException","body":"<p>You can use <a href=\"https://code.google.com/p/guava-libraries/wiki/ReflectionExplained\" rel=\"nofollow\">Guava's Reflection</a> utilities to get the <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/reflect/ClassPath.ClassInfo.html\" rel=\"nofollow\">ClassInfo</a> of every class loaded in the classpath.</p>\n\n<pre><code>ClassLoader classLoader = ClassLoader.getSystemClassLoader();\nClassPath classPath = ClassPath.from(classLoader);\nImmutableSet&lt;ClassInfo&gt; set = classPath.getTopLevelClasses();\nfor (ClassInfo ci : set) {\n    System.out.println(ci.getName());\n}\n</code></pre>\n\n<p>In the loop you can implement your custom logic to load the class with the <code>className</code> you're providing.</p>\n"}],"owner":{"account_id":2021595,"reputation":8795,"user_id":1807643,"accept_rate":89,"display_name":"KeyNone"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11984,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":19809780,"answer_count":4,"score":10,"last_activity_date":1663796225,"creation_date":1383733806,"question_id":19809640,"body_markdown":"In order to schedule the execution of a job, i get the name of a class as a string-input.  \r\nThis class may be in one of two packages, but i don&#39;t know which one so i have to check this.\r\n\r\nBy now, i have two try-catch-blocks\r\n\r\n    Class&lt;Job&gt; clazz;\r\n    String className; //the above mentioned string, will be initialized\r\n\r\n    try {\r\n        clazz = (Class&lt;Job&gt;) Class.forName(&quot;package.one.&quot; + className);\r\n    } catch (ClassNotFoundException ex) {\r\n        try {\r\n            clazz = (Class&lt;Job&gt;) Class.forName(&quot;package.two.&quot; + className);\r\n        } catch (ClassNotFoundException ex1) {\r\n          //some error handling code here, as the class is\r\n          //in neither of the two packages\r\n        }\r\n    }\r\n\r\nFor more packages this will get uglier and more unreadable. Furthermore, it is - for me - against the concept of exceptions, as exceptions should&#39;nt be expected/used for flow-control!  \r\nIs there any way to rewrite this without the utilization of the `ClassNotFoundException`?","title":"Check if class exists without running into ClassNotFoundException","body":"<p>In order to schedule the execution of a job, i get the name of a class as a string-input.<br>\nThis class may be in one of two packages, but i don't know which one so i have to check this.</p>\n\n<p>By now, i have two try-catch-blocks</p>\n\n<pre><code>Class&lt;Job&gt; clazz;\nString className; //the above mentioned string, will be initialized\n\ntry {\n    clazz = (Class&lt;Job&gt;) Class.forName(\"package.one.\" + className);\n} catch (ClassNotFoundException ex) {\n    try {\n        clazz = (Class&lt;Job&gt;) Class.forName(\"package.two.\" + className);\n    } catch (ClassNotFoundException ex1) {\n      //some error handling code here, as the class is\n      //in neither of the two packages\n    }\n}\n</code></pre>\n\n<p>For more packages this will get uglier and more unreadable. Furthermore, it is - for me - against the concept of exceptions, as exceptions should'nt be expected/used for flow-control!<br>\nIs there any way to rewrite this without the utilization of the <code>ClassNotFoundException</code>?</p>\n"},{"tags":["java","printf"],"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1663794043,"post_id":73806837,"comment_id":130326053,"body_markdown":"you can&#39;t used fixed `%10d` but instead start to calculate the current line length and build empty strings of missing length yourself to indent correctly. Probably no printf, multiple prints instead","body":"you can&#39;t used fixed <code>%10d</code> but instead start to calculate the current line length and build empty strings of missing length yourself to indent correctly. Probably no printf, multiple prints instead"},{"owner":{"account_id":6502221,"reputation":1372,"user_id":5032541,"display_name":"Erwan Daniel"},"score":0,"creation_date":1663794065,"post_id":73806837,"comment_id":130326058,"body_markdown":"Show an example of what you expect to see if the spaces were correct","body":"Show an example of what you expect to see if the spaces were correct"}],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1663795415,"creation_date":1663795415,"answer_id":73807069,"question_id":73806837,"body_markdown":"There are several lengths that you have to take into account:\r\n1. The length of the number of items (the first `%d`) - use a length specification there as well to take care of counts with a bigger number of digits that 1 (e.g. if somebody has 23 items of something)\r\n2. The length of the item name: &quot;Pygmy Puffs&quot; is shorter than &quot;bags of Pygmy Puffs&quot; - before you output the very first line, you have to know the length of the longest item name and add spaces to the end of the line if the current items name is shorter\r\n3. The length of the price per item (the second `%d`). Either use a length specification there as well (e.g. `%4d`) but this will create a gap before the price per item, or count the number of digits of the largest item in the list and add spaces at the end of the text (similar to 2.)\r\n4. The length of the item price for all items. This is the only thing that you already handle right (with `%10d`). Before that you have to insert the extra spaces from parts 2 and 3 - I would specify a `%s` there and then prepare a string with the necessary spaces (e.g. with `&quot; &quot;.repeat(spaces)`)\r\n\r\nSo the final format string would look like this:\r\n`&quot;%4d %s at %d Knuts ea.: %s%10d%n&quot;`\r\n\r\nThe first parameter is the count, the second the item name, the third the single item price, the fourth a string with spaces to fill up everything and the fifth the price of item times the number of items.\r\n\r\nA &quot;cheaper&quot; option would be to have everything specified with a minimum width (as for the first and last parameter in my example) but that will leave blank regions before or after the item, depending on how you specify it.","title":"Creating whitespace with Java printf() method","body":"<p>There are several lengths that you have to take into account:</p>\n<ol>\n<li>The length of the number of items (the first <code>%d</code>) - use a length specification there as well to take care of counts with a bigger number of digits that 1 (e.g. if somebody has 23 items of something)</li>\n<li>The length of the item name: &quot;Pygmy Puffs&quot; is shorter than &quot;bags of Pygmy Puffs&quot; - before you output the very first line, you have to know the length of the longest item name and add spaces to the end of the line if the current items name is shorter</li>\n<li>The length of the price per item (the second <code>%d</code>). Either use a length specification there as well (e.g. <code>%4d</code>) but this will create a gap before the price per item, or count the number of digits of the largest item in the list and add spaces at the end of the text (similar to 2.)</li>\n<li>The length of the item price for all items. This is the only thing that you already handle right (with <code>%10d</code>). Before that you have to insert the extra spaces from parts 2 and 3 - I would specify a <code>%s</code> there and then prepare a string with the necessary spaces (e.g. with <code>&quot; &quot;.repeat(spaces)</code>)</li>\n</ol>\n<p>So the final format string would look like this:\n<code>&quot;%4d %s at %d Knuts ea.: %s%10d%n&quot;</code></p>\n<p>The first parameter is the count, the second the item name, the third the single item price, the fourth a string with spaces to fill up everything and the fifth the price of item times the number of items.</p>\n<p>A &quot;cheaper&quot; option would be to have everything specified with a minimum width (as for the first and last parameter in my example) but that will leave blank regions before or after the item, depending on how you specify it.</p>\n"}],"owner":{"account_id":26406286,"reputation":3,"user_id":20056027,"display_name":"nordlord"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73807069,"answer_count":1,"score":0,"last_activity_date":1663795415,"creation_date":1663793655,"question_id":73806837,"body_markdown":"I&#39;m trying to create a menu-like text in the Terminal using Java.\r\nI need it to look roughly like this:\r\n![example of intended output][1]\r\n\r\n\r\nI&#39;m doing this using a printf method that looks like this:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    System.out.printf(&quot;%d Pygmy Puffs at %d Knuts ea.: %10d %n&quot;, pygmy_ordered, pygmy, pygmy_total);\r\n    System.out.printf(&quot;%d bags of Extendable ears at %d Knuts ea.: %10d %n&quot;, extendable_ears_three_ordered, extendable_ears_three, extendable_ears_three_total);\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nHowever, this creates a result where the total for the items (last number) is an uneven amount of space away from the rest of the text line to line.\r\n![example of received output][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zJ67d.png\r\n  [2]: https://i.stack.imgur.com/MorPz.png\r\nHow would I go about fixing this?","title":"Creating whitespace with Java printf() method","body":"<p>I'm trying to create a menu-like text in the Terminal using Java.\nI need it to look roughly like this:\n<img src=\"https://i.stack.imgur.com/zJ67d.png\" alt=\"example of intended output\" /></p>\n<p>I'm doing this using a printf method that looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.printf(&quot;%d Pygmy Puffs at %d Knuts ea.: %10d %n&quot;, pygmy_ordered, pygmy, pygmy_total);\nSystem.out.printf(&quot;%d bags of Extendable ears at %d Knuts ea.: %10d %n&quot;, extendable_ears_three_ordered, extendable_ears_three, extendable_ears_three_total);\n</code></pre>\n<p>However, this creates a result where the total for the items (last number) is an uneven amount of space away from the rest of the text line to line.\n<img src=\"https://i.stack.imgur.com/MorPz.png\" alt=\"example of received output\" /></p>\n<p>How would I go about fixing this?</p>\n"},{"tags":["java","selenium","selenium-webdriver","automated-refactoring"],"comments":[{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1599566465,"post_id":63793109,"comment_id":112807497,"body_markdown":"This sounds like an [X-Y problem](http://xyproblem.info/). Instead of asking for help with your solution to the problem, edit your question and ask about the actual problem. What are you trying to do?","body":"This sounds like an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">X-Y problem</a>. Instead of asking for help with your solution to the problem, edit your question and ask about the actual problem. What are you trying to do?"}],"answers":[{"tags":[],"owner":{"account_id":12246014,"reputation":357,"user_id":8937649,"display_name":"Razvan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599600543,"creation_date":1599600543,"answer_id":63801807,"question_id":63793109,"body_markdown":"You can use a while loop &amp; Iterator:\r\n\r\nFirst, define a list with elements that you know they might be there (this is a dummy example, you can create them also by using getWebElements if they have a common locator)\r\n\r\n    ArrayList&lt;WebElement&gt; elements= new ArrayList&lt;WebElement&gt;();\r\n    elements.add(vech1);\r\n    elements.add(vech2);\r\n    ...\r\n    ....\r\n\r\nThen, use this approach:\r\n\r\n    Iterator&lt;Integer&gt; it = elements.iterator();\r\n    while(it.hasNext()) {\r\n      //perform desired logic \r\n      }\r\n\r\nIn this way you don&#39;t need to add so many conditions, and it should be faster.","title":"Is there any alternative to handle multiple if , if else based on Element presences using selenium","body":"<p>You can use a while loop &amp; Iterator:</p>\n<p>First, define a list with elements that you know they might be there (this is a dummy example, you can create them also by using getWebElements if they have a common locator)</p>\n<pre><code>ArrayList&lt;WebElement&gt; elements= new ArrayList&lt;WebElement&gt;();\nelements.add(vech1);\nelements.add(vech2);\n...\n....\n</code></pre>\n<p>Then, use this approach:</p>\n<pre><code>Iterator&lt;Integer&gt; it = elements.iterator();\nwhile(it.hasNext()) {\n  //perform desired logic \n  }\n</code></pre>\n<p>In this way you don't need to add so many conditions, and it should be faster.</p>\n"}],"owner":{"account_id":19455471,"reputation":1,"user_id":14230910,"display_name":"Surendran"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":144,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663794843,"creation_date":1599565122,"question_id":63793109,"body_markdown":"I was working in automating e2e automation cases.To increase the reusability we have used many if conditions inside a function and eventually script performance went down. Could anyone suggest me a alternative wayes to tackle this situation without compromising performance.\r\n\r\nEg ,\r\n\r\n    \r\n      public void Addvechicle()\r\n    \t{\r\n    \t  If (iselementprsent(element 1)\r\n    \t   {\r\n    \t    // Do some action\t 1 \r\n    \r\n    \t\t  If (iselementpresent(element 2) \r\n    \t\t\t{\r\n    \t\t\t  //Do some action2\r\n    \t\t\t}\r\n    \r\n    \t\t  If(iselementpresent (element 3 ) \r\n    \t\t\t\t  {\r\n    \t\t\t  // Do some action3\r\n    \t\t   }\r\n    \t}\r\n    \t else {\r\n    \t     If (iselementpresent (element10) \r\n    \t      {\r\n    \t       // Do some action4\r\n    \t      }\r\n    \t     If else (iselementpresent \r\n    \t       (element 11){\r\n    \t       // Do some action5\r\n    \t     }\r\n    \t \t}\r\n    \t}\r\n    }","title":"Is there any alternative to handle multiple if , if else based on Element presences using selenium","body":"<p>I was working in automating e2e automation cases.To increase the reusability we have used many if conditions inside a function and eventually script performance went down. Could anyone suggest me a alternative wayes to tackle this situation without compromising performance.</p>\n<p>Eg ,</p>\n<pre><code>  public void Addvechicle()\n    {\n      If (iselementprsent(element 1)\n       {\n        // Do some action    1 \n\n          If (iselementpresent(element 2) \n            {\n              //Do some action2\n            }\n\n          If(iselementpresent (element 3 ) \n                  {\n              // Do some action3\n           }\n    }\n     else {\n         If (iselementpresent (element10) \n          {\n           // Do some action4\n          }\n         If else (iselementpresent \n           (element 11){\n           // Do some action5\n         }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","computer-science"],"comments":[{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":0,"creation_date":1663794558,"post_id":73806924,"comment_id":130326194,"body_markdown":"Please [edit] and show what you enter at the command prompt. For example, are you using `javaw.exe` or `java.exe`?","body":"Please <a href=\"https://stackoverflow.com/posts/73806924/edit\">edit</a> and show what you enter at the command prompt. For example, are you using <code>javaw.exe</code> or <code>java.exe</code>?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1663794623,"post_id":73806924,"comment_id":130326211,"body_markdown":"Are you by any chance attempting to run a GUI program without a GUI?","body":"Are you by any chance attempting to run a GUI program without a GUI?"},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1663796163,"post_id":73806924,"comment_id":130326548,"body_markdown":"https://stackoverflow.com/questions/19507096/python-error-import-unable-to-open-x-server is the same error but python, are you executing python from java or something like that? The error itself indicates that the current environment has no (access to) the the GUI system (https://en.wikipedia.org/wiki/X_Window_System). i.e. it can only print text.","body":"<a href=\"https://stackoverflow.com/questions/19507096/python-error-import-unable-to-open-x-server\" title=\"python error import unable to open x server\">stackoverflow.com/questions/19507096/&hellip;</a> is the same error but python, are you executing python from java or something like that? The error itself indicates that the current environment has no (access to) the the GUI system (<a href=\"https://en.wikipedia.org/wiki/X_Window_System\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/X_Window_System</a>). i.e. it can only print text."},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1663799747,"post_id":73806924,"comment_id":130327271,"body_markdown":"Check out running Java in headless mode: https://www.oracle.com/technical-resources/articles/javase/headless.html","body":"Check out running Java in headless mode: <a href=\"https://www.oracle.com/technical-resources/articles/javase/headless.html\" rel=\"nofollow noreferrer\">oracle.com/technical-resources/articles/javase/headless.html</a>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1663800306,"post_id":73806924,"comment_id":130327371,"body_markdown":"Yes but of course that is only appropriate if it is *not* a GUI program","body":"Yes but of course that is only appropriate if it is <i>not</i> a GUI program"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1663813828,"post_id":73806924,"comment_id":130329215,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":26406389,"reputation":1,"user_id":20056118,"display_name":"jerry"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663794292,"creation_date":1663794292,"question_id":73806924,"body_markdown":"I keep getting this in java.\r\nwhat does this mean \r\nI made my code in the eclipse IDE but am now opening it up in my terminal and keep getting this. ","title":"Import: unable to open X server","body":"<p>I keep getting this in java.\nwhat does this mean\nI made my code in the eclipse IDE but am now opening it up in my terminal and keep getting this.</p>\n"},{"tags":["java","apache-camel","quartz-scheduler","apache-zookeeper"],"answers":[{"tags":[],"owner":{"account_id":9492638,"reputation":759,"user_id":7056847,"display_name":"Saxon"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1640807740,"creation_date":1640807740,"answer_id":70524371,"question_id":70523359,"body_markdown":"Why ZooKeeper? ZooKeeper is used to coordinate multiple processes on different nodes. Why not to use some flag in the DB table so that the work is distributed among different micro-services? Micro-service 1 processes records with flag 1, Micro-service 2 processes records with flag 2, and so on, and the flag is generated randomly according to number of active micro-services. You might also use different tables for each client or different partitions of the same table. You might also use a sequence for the flag on the table and store the value of the flag that each micro-service is currently processing (flag-flag + 49) on a different table where each client has its own entry. Row locking might be useful as well.","title":"Record processing by multiple instance application by zookeeper","body":"<p>Why ZooKeeper? ZooKeeper is used to coordinate multiple processes on different nodes. Why not to use some flag in the DB table so that the work is distributed among different micro-services? Micro-service 1 processes records with flag 1, Micro-service 2 processes records with flag 2, and so on, and the flag is generated randomly according to number of active micro-services. You might also use different tables for each client or different partitions of the same table. You might also use a sequence for the flag on the table and store the value of the flag that each micro-service is currently processing (flag-flag + 49) on a different table where each client has its own entry. Row locking might be useful as well.</p>\n"}],"owner":{"account_id":3390495,"reputation":12113,"user_id":2845414,"accept_rate":94,"display_name":"Sumeet Kumar Yadav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":569,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70524371,"answer_count":1,"score":0,"last_activity_date":1663794106,"creation_date":1640801820,"question_id":70523359,"body_markdown":"I have a micro-service application which has scheduler to pick data from DB based on `isProcessed=false` flag . It runs continuously every 1 second and polls 50 records at a time. On successful read and after processing it updates value of rows to `isProcessed=true` . I am using JDBC select and update to perform DB operation on application .\r\n\r\nCurrently I am running a single instance of application and if I want to run multiple instances of micro-service it will be race condition in rows of DB . Multiple instances of application polls same  rows and update twice . How to avoid multiple poll of same record in multi instance application .\r\n\r\nIs there any way to use [zookeeper][1] to coordinate between multiple instance to have information of picked DB records . In multi instance DB rows read by one instance should be locked and should not be read by other .\r\n\r\nMy table looks like ( 1,2,3 is unprocessed and 4,5 is processed and updated)\r\n\r\n    ---------------------------\r\n    C1 | C2 | C3 | isProcessed\r\n    ----------------------------\r\n    1  | a  | 3  | false\r\n    2  | b  | 3  | false\r\n    3  | c  | 3  | false\r\n    4  | d  | 3  | true\r\n    5  | f  | 3  | true\r\n\r\n\r\n  Running multiple instances will improve my record DB processing performance as multiple instance will work on same DB . How to avoid overlapping/ processing same record via different micro-service. \r\n\r\n  [1]: https://zookeeper.apache.org/","title":"Record processing by multiple instance application by zookeeper","body":"<p>I have a micro-service application which has scheduler to pick data from DB based on <code>isProcessed=false</code> flag . It runs continuously every 1 second and polls 50 records at a time. On successful read and after processing it updates value of rows to <code>isProcessed=true</code> . I am using JDBC select and update to perform DB operation on application .</p>\n<p>Currently I am running a single instance of application and if I want to run multiple instances of micro-service it will be race condition in rows of DB . Multiple instances of application polls same  rows and update twice . How to avoid multiple poll of same record in multi instance application .</p>\n<p>Is there any way to use <a href=\"https://zookeeper.apache.org/\" rel=\"nofollow noreferrer\">zookeeper</a> to coordinate between multiple instance to have information of picked DB records . In multi instance DB rows read by one instance should be locked and should not be read by other .</p>\n<p>My table looks like ( 1,2,3 is unprocessed and 4,5 is processed and updated)</p>\n<pre><code>---------------------------\nC1 | C2 | C3 | isProcessed\n----------------------------\n1  | a  | 3  | false\n2  | b  | 3  | false\n3  | c  | 3  | false\n4  | d  | 3  | true\n5  | f  | 3  | true\n</code></pre>\n<p>Running multiple instances will improve my record DB processing performance as multiple instance will work on same DB . How to avoid overlapping/ processing same record via different micro-service.</p>\n"},{"tags":["java","tomcat"],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663790427,"creation_date":1663790427,"answer_id":73806325,"question_id":73805861,"body_markdown":"Check Tomcat&#39;s configuration file `server.xml` for connectors (HTTP/1.1, HTTP/2, AJP).\r\n\r\nAnother thing is that applications (war files) deployed on Tomcat can also open ports if they so choose.\r\n\r\nAnd the JVM could open yet another port when debugging or JMX gets activated. So you also want to check the concise command line used to run Tomcat.\r\n\r\nNetstat will show the sum of those.","title":"Why does Tomcat start listening on more ports?","body":"<p>Check Tomcat's configuration file <code>server.xml</code> for connectors (HTTP/1.1, HTTP/2, AJP).</p>\n<p>Another thing is that applications (war files) deployed on Tomcat can also open ports if they so choose.</p>\n<p>And the JVM could open yet another port when debugging or JMX gets activated. So you also want to check the concise command line used to run Tomcat.</p>\n<p>Netstat will show the sum of those.</p>\n"},{"tags":[],"owner":{"account_id":204659,"reputation":37539,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663791333,"creation_date":1663791333,"answer_id":73806467,"question_id":73805861,"body_markdown":"It is a fairly standard practice for a long lived process that listens on a single port\r\n(for example, 80)\r\nto spawn a child thread on a second port when a new,\r\nlong lived connection is established.\r\n\r\nFor example,\r\n1. client sends message to server:80\r\n2. server spawns a child thread on a new port and directs the client to that new port.\r\n3. future messages between the client and server are via the new port.\r\n\r\nMy guess is that you have some number of keep alive connections to your Tomcat server.","title":"Why does Tomcat start listening on more ports?","body":"<p>It is a fairly standard practice for a long lived process that listens on a single port\n(for example, 80)\nto spawn a child thread on a second port when a new,\nlong lived connection is established.</p>\n<p>For example,</p>\n<ol>\n<li>client sends message to server:80</li>\n<li>server spawns a child thread on a new port and directs the client to that new port.</li>\n<li>future messages between the client and server are via the new port.</li>\n</ol>\n<p>My guess is that you have some number of keep alive connections to your Tomcat server.</p>\n"},{"tags":[],"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663793766,"creation_date":1663792390,"answer_id":73806647,"question_id":73805861,"body_markdown":"`lsof` utility + a thread dump could help to find which thread is opening the port\r\n\r\n    lsof -Pawn -iTCP -sTCP:LISTEN -K -F pfKMT0 -p 11630 +c 15 | tr &#39;\\000&#39; &#39; &#39; | grep -v &#39;^f&#39;\r\n\r\nOutput sample\r\n\r\n    p11630 \r\n    p11630 K11636 Mjava \r\n    p11630 K11646 MVM Thread \r\n    p11630 K11647 MReference Handl \r\n    p11630 K11648 MFinalizer  \r\n    p11630 K11692 Mhttp-nio-8080-e \r\n    p11630 K11693 Mhttp-nio-8080-e \r\n    p11630 K11694 Mhttp-nio-8080-e \r\n    p11630 K11695 Mhttp-nio-8080-e \r\n    p11630 K11696 Mhttp-nio-8080-e\r\n\r\nFields can be read as\r\n\r\n     p11630            PID of tomcat (prefixed by &#39;p&#39;)  \r\n     K11696            THREAD PID (prefix=K)  \r\n     Mhttp-nio-8080-e  Thread name (prefix=M)  \r\n\r\nAlternative with `awk`\r\n\r\n    lsof -Pawn -iTCP -sTCP:LISTEN -K -p 11630 +c 15 | gawk &#39;{print $1,$2,$3,$4,$11 }&#39;      \r\n    COMMAND PID TID TASKCMD NAME\r\n    java 11630 11636 java *:8080\r\n    java 11630 11636 java 127.0.0.1:8009\r\n    java 11630 11636 java 127.0.0.1:8005\r\n    java 11630 11636 java *:37961\r\n","title":"Why does Tomcat start listening on more ports?","body":"<p><code>lsof</code> utility + a thread dump could help to find which thread is opening the port</p>\n<pre><code>lsof -Pawn -iTCP -sTCP:LISTEN -K -F pfKMT0 -p 11630 +c 15 | tr '\\000' ' ' | grep -v '^f'\n</code></pre>\n<p>Output sample</p>\n<pre><code>p11630 \np11630 K11636 Mjava \np11630 K11646 MVM Thread \np11630 K11647 MReference Handl \np11630 K11648 MFinalizer  \np11630 K11692 Mhttp-nio-8080-e \np11630 K11693 Mhttp-nio-8080-e \np11630 K11694 Mhttp-nio-8080-e \np11630 K11695 Mhttp-nio-8080-e \np11630 K11696 Mhttp-nio-8080-e\n</code></pre>\n<p>Fields can be read as</p>\n<pre><code> p11630            PID of tomcat (prefixed by 'p')  \n K11696            THREAD PID (prefix=K)  \n Mhttp-nio-8080-e  Thread name (prefix=M)  \n</code></pre>\n<p>Alternative with <code>awk</code></p>\n<pre><code>lsof -Pawn -iTCP -sTCP:LISTEN -K -p 11630 +c 15 | gawk '{print $1,$2,$3,$4,$11 }'      \nCOMMAND PID TID TASKCMD NAME\njava 11630 11636 java *:8080\njava 11630 11636 java 127.0.0.1:8009\njava 11630 11636 java 127.0.0.1:8005\njava 11630 11636 java *:37961\n</code></pre>\n"}],"owner":{"account_id":13769677,"reputation":181,"user_id":9937471,"display_name":"Luis Carlos Cruz Castillo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":404,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1663793766,"creation_date":1663787689,"question_id":73805861,"body_markdown":"I&#39;m aware that Tomcat uses ports 8080, 8009, and 8005. But recently I used netstat to see the ports Tomcat was using, and noticed that the PID of the Tomcat service was listening on multiple ports, it looked like this (the 2281 PID belongs to the Tomcat service)\r\n\r\n```\r\nProto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    \r\ntcp6       0      0 :::41020                :::*                    LISTEN      2281/java           \r\ntcp6       0      0 :::34300                :::*                    LISTEN      2281/java           \r\ntcp6       0      0 :::34621                :::*                    LISTEN      2281/java           \r\ntcp6       0      0 :::37150                :::*                    LISTEN      2281/java           \r\ntcp6       0      0 :::43231                :::*                    LISTEN      2281/java           \r\ntcp6       0      0 :::34847                :::*                    LISTEN      2281/java           \r\ntcp6       0      0 :::40512                :::*                    LISTEN      2281/java           \r\ntcp6       0      0 :::35808                :::*                    LISTEN      2281/java           \r\ntcp6       0      0 :::35168                :::*                    LISTEN      2281/java           \r\ntcp6       0      0 :::33984                :::*                    LISTEN      2281/java           \r\ntcp6       0      0 :::44577                :::*                    LISTEN      2281/java           \r\ntcp6       0      0 :::34145                :::*                    LISTEN      2281/java           \r\ntcp6       0      0 :::46786                :::*                    LISTEN      2281/java           \r\ntcp6       0      0 :::44419                :::*                    LISTEN      2281/java           \r\ntcp6       0      0 :::40291                :::*                    LISTEN      2281/java           \r\ntcp6       0      0 :::41091                :::*                    LISTEN      2281/java           \r\ntcp6       0      0 127.0.0.1:8005          :::*                    LISTEN      2281/java           \r\ntcp6       0      0 :::36903                :::*                    LISTEN      2281/java           \r\ntcp6       0      0 :::39624                :::*                    LISTEN      2281/java           \r\ntcp6       0      0 :::36072                :::*                    LISTEN      2281/java           \r\ntcp6       0      0 :::38825                :::*                    LISTEN      2281/java           \r\ntcp6       0      0 :::8009                 :::*                    LISTEN      2281/java  \r\n``` ","title":"Why does Tomcat start listening on more ports?","body":"<p>I'm aware that Tomcat uses ports 8080, 8009, and 8005. But recently I used netstat to see the ports Tomcat was using, and noticed that the PID of the Tomcat service was listening on multiple ports, it looked like this (the 2281 PID belongs to the Tomcat service)</p>\n<pre><code>Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    \ntcp6       0      0 :::41020                :::*                    LISTEN      2281/java           \ntcp6       0      0 :::34300                :::*                    LISTEN      2281/java           \ntcp6       0      0 :::34621                :::*                    LISTEN      2281/java           \ntcp6       0      0 :::37150                :::*                    LISTEN      2281/java           \ntcp6       0      0 :::43231                :::*                    LISTEN      2281/java           \ntcp6       0      0 :::34847                :::*                    LISTEN      2281/java           \ntcp6       0      0 :::40512                :::*                    LISTEN      2281/java           \ntcp6       0      0 :::35808                :::*                    LISTEN      2281/java           \ntcp6       0      0 :::35168                :::*                    LISTEN      2281/java           \ntcp6       0      0 :::33984                :::*                    LISTEN      2281/java           \ntcp6       0      0 :::44577                :::*                    LISTEN      2281/java           \ntcp6       0      0 :::34145                :::*                    LISTEN      2281/java           \ntcp6       0      0 :::46786                :::*                    LISTEN      2281/java           \ntcp6       0      0 :::44419                :::*                    LISTEN      2281/java           \ntcp6       0      0 :::40291                :::*                    LISTEN      2281/java           \ntcp6       0      0 :::41091                :::*                    LISTEN      2281/java           \ntcp6       0      0 127.0.0.1:8005          :::*                    LISTEN      2281/java           \ntcp6       0      0 :::36903                :::*                    LISTEN      2281/java           \ntcp6       0      0 :::39624                :::*                    LISTEN      2281/java           \ntcp6       0      0 :::36072                :::*                    LISTEN      2281/java           \ntcp6       0      0 :::38825                :::*                    LISTEN      2281/java           \ntcp6       0      0 :::8009                 :::*                    LISTEN      2281/java  \n</code></pre>\n"},{"tags":["java","json","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":16002508,"reputation":190,"user_id":11548777,"display_name":"kryzystof"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663793690,"creation_date":1663793690,"answer_id":73806839,"question_id":73806576,"body_markdown":"Try to explain more in depth what you are trying to accomplish.\r\nBut that looks like a **Maven Dependency**.\r\nRead up on how to create a Maven Project and add json-p dependency.\r\nWhen you create your project, add this to your pom.xml file.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.glassfish.jsonp&lt;/groupId&gt;\r\n        &lt;artifactId&gt;providers&lt;/artifactId&gt;\r\n        &lt;version&gt;2.0.0-RC3&lt;/version&gt;\r\n        &lt;type&gt;pom&lt;/type&gt;\r\n    &lt;/dependency&gt;","title":"How do I install json-p for intellij?","body":"<p>Try to explain more in depth what you are trying to accomplish.\nBut that looks like a <strong>Maven Dependency</strong>.\nRead up on how to create a Maven Project and add json-p dependency.\nWhen you create your project, add this to your pom.xml file.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.glassfish.jsonp&lt;/groupId&gt;\n    &lt;artifactId&gt;providers&lt;/artifactId&gt;\n    &lt;version&gt;2.0.0-RC3&lt;/version&gt;\n    &lt;type&gt;pom&lt;/type&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":26403664,"reputation":1,"user_id":20053775,"display_name":"Declan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1663793690,"creation_date":1663792015,"question_id":73806576,"body_markdown":"What I need is a link and how to do it. I tried downloading one, but it gave me a file. It’s confusing because it’s not a jar file. It’s just a file with the classes and stuffs in them. I want to get the json in a way I can import it. (Like how I’ll import scanner and other stuffs.)[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sFpy9.jpg","title":"How do I install json-p for intellij?","body":"<p>What I need is a link and how to do it. I tried downloading one, but it gave me a file. It’s confusing because it’s not a jar file. It’s just a file with the classes and stuffs in them. I want to get the json in a way I can import it. (Like how I’ll import scanner and other stuffs.)<a href=\"https://i.stack.imgur.com/sFpy9.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","aop","aspectj"],"answers":[{"tags":[],"owner":{"account_id":303333,"reputation":10115,"user_id":612206,"accept_rate":96,"display_name":"XGouchet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476255020,"creation_date":1476255020,"answer_id":39992186,"question_id":39978586,"body_markdown":"The default precendence of advices declared in the same aspect is stated as this in the documentation : \r\n\r\n&gt; If the two pieces of advice are defined in the same aspect, then there are two cases:\r\n&gt; \r\n&gt; - If either are after advice, then the one that appears later in the aspect has precedence over the one that appears earlier. \r\n&gt; - Otherwise, then the one that appears earlier in the aspect has precedence over the one that appears later.\r\n\r\nWhat you need to understand though is that because of the way advices are woven in byte code, what you&#39;ll get in your first ordering should be seen like this : \r\n\r\n     ---------------\r\n    | Around()      |\r\n    |   ----------  |\r\n    |  | Before() | |\r\n    |   ----------  |\r\n    |  | Call()   | |\r\n    |   ----------  |\r\n     ---------------\r\n    | After()       |\r\n     ---------------\r\n\r\nThe value of `i` is only changed within the scope of Around, which is why After prints a value of `25`. \r\n\r\nIn your second case, the ordering gives something like : \r\n\r\n     ---------------\r\n    | Before()      |\r\n     ---------------\r\n    | Around()      |\r\n    |   ----------  |\r\n    |  | Call()   | |\r\n    |   ----------  |\r\n    |  | After()  | |\r\n    |   ----------  |\r\n     ---------------\r\n\r\nIn which case the values are printed as you expect it. ","title":"Unclear advice precedence when combining before-, around- and after-advice operating on same joinpoint in one aspect","body":"<p>The default precendence of advices declared in the same aspect is stated as this in the documentation : </p>\n\n<blockquote>\n  <p>If the two pieces of advice are defined in the same aspect, then there are two cases:</p>\n  \n  <ul>\n  <li>If either are after advice, then the one that appears later in the aspect has precedence over the one that appears earlier. </li>\n  <li>Otherwise, then the one that appears earlier in the aspect has precedence over the one that appears later.</li>\n  </ul>\n</blockquote>\n\n<p>What you need to understand though is that because of the way advices are woven in byte code, what you'll get in your first ordering should be seen like this : </p>\n\n<pre><code> ---------------\n| Around()      |\n|   ----------  |\n|  | Before() | |\n|   ----------  |\n|  | Call()   | |\n|   ----------  |\n ---------------\n| After()       |\n ---------------\n</code></pre>\n\n<p>The value of <code>i</code> is only changed within the scope of Around, which is why After prints a value of <code>25</code>. </p>\n\n<p>In your second case, the ordering gives something like : </p>\n\n<pre><code> ---------------\n| Before()      |\n ---------------\n| Around()      |\n|   ----------  |\n|  | Call()   | |\n|   ----------  |\n|  | After()  | |\n|   ----------  |\n ---------------\n</code></pre>\n\n<p>In which case the values are printed as you expect it. </p>\n"},{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1604106926,"creation_date":1476627236,"answer_id":40071281,"question_id":39978586,"body_markdown":"Actually @XGouchet&#39;s first sketch is not quite correct because the _before_ advice does not occur within the scope of _around_, but has finished before _around_ is executed. Let me use pseudo code notation with curly braces expressing this kind of &quot;lexical scope&quot;:\r\n\r\n**Scenario A: lexical ordering _before_ -&gt; _around_ -&gt; _after_:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    before(25)\r\n    around(25 → 1) {\r\n        joinpoint(1)\r\n    }\r\n    after(25)\r\n\r\n**Scenario B: lexical ordering _after_ -&gt; _before_ -&gt; _around_:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    before(25)\r\n    around(25 → 1) {\r\n        joinpoint(1)\r\n        after(1)\r\n    }\r\n\r\n**Scenario C: lexical ordering _after_ -&gt; _around_ -&gt; _before_:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    around(25 → 1) {\r\n        before(1)\r\n        joinpoint(1)\r\n        after(1)\r\n    }\r\n\r\nQuote from [Determining precedence](http://www.eclipse.org/aspectj/doc/next/progguide/semantics-advice.html#d0e6257) paragraph from the AspectJ manual&#39;s chapter on aspect precedence:\r\n\r\n&gt; If the two pieces of advice are defined in the same aspect, then there are two cases:\r\n&gt;  * If either are **_after_ advice**, then the one that appears **later** in the aspect has precedence over the one that appears earlier.\r\n&gt;  * **Otherwise,** then the one that appears **earlier** in the aspect has precedence over the one that appears later.\r\n\r\nNow also bear in mind how aspects behave and what precedence really means under certain circumstances. Also quoting the [Effects of precedence](http://www.eclipse.org/aspectj/doc/next/progguide/semantics-advice.html#d0e6293) paragraph from the AspectJ manual&#39;s chapter on aspect precedence:\r\n\r\n&gt; At a particular join point, advice is ordered by precedence.\r\n&gt; \r\n&gt; * A piece of _around_ advice controls whether advice of lower precedence will run by calling proceed. The call to proceed will run the advice with next precedence, or the computation under the join point if there is no further advice.\r\n&gt; * A piece of _before_ advice can prevent advice of lower precedence from running by throwing an exception. If it returns normally, however, then the advice of the next precedence, or the computation under the join point if there is no further advice, will run.\r\n&gt; * Running _after returning_ advice will run the advice of next precedence, or the computation under the join point if there is no further advice. Then, if that computation returned normally, the body of the advice will run.\r\n&gt; * Running _after throwing_ advice will run the advice of next precedence, or the computation under the join point if there is no further advice. Then, if that computation threw an exception of an appropriate type, the body of the advice will run.\r\n&gt; * Running _after_ advice will run the advice of next precedence, or the computation under the join point if there is no further advice. Then the body of the advice will run.\r\n\r\nIn plain English:\r\n\r\n* An _around_ advice wraps\r\n    * other _around_ or _before_ advices of **_lower_** precedence as well as\r\n    * _after_ advices of **_higher_** precedence.\r\n\r\n  Why is that so? Imagine the _around_ advice to be a pair of _before_ and _after_ advices on steroids (can modify method parameters and return value, can handle exceptions, can share state between _before_ and _after_ code). Consequently, the same delegation rules as for separate _before_ and _after_ advices apply as follows.\r\n\r\n* A _before_ advice executes first before delegating or proceeding.\r\n\r\n* An _after_ advice delegates first before executing. In particular (and maybe somewhat counter-intuitively), this means:\r\n\r\n    * If an _after_ advice has higher precedence than an _around_ advice, then if the _around_ advice modifies any method arguments before proceeding, the _after_ advice is affected by the modification too, because the _around_ advice already proceeded to the target method with the modified arguments before the _after_ advice kicks in.\r\n\r\n    * However, the same higher precedence _after (returning)_ advice is unaffected if the lower precedence _around_ advice modifies the return value because the _after (returning)_ advice is executed before the _around_ advice&#39;s post-proceed code due to its higher precedence.\r\n\r\n    * Conversely, if an _after_ advice has lower precedence than an _around_ advice, then if the _around_ advice modifies any method arguments before proceeding, the _after_ advice is unaffected by the modification because it runs outside the context of the _around_ advice, it is not being wrapped by it.\r\n\r\n    * However, the same lower precedence _after (returning)_ advice is affected if the higher precedence _around_ advice modifies the return value because it runs after the latter has finished running already.\r\n\r\nNow here is an extended example illustrating what I just wrote:\r\n\r\n**Driver application:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    public class Application {\r\n        public void doSomething(int i) {\r\n            System.out.println(&quot;Doing something with &quot; + i);\r\n        }\r\n    \r\n        public static void main(String[] arg) {\r\n            Application application = new Application();\r\n            application.doSomething(99);\r\n        }\r\n    }\r\n\r\n**Aspect, variant 1:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.aspect;\r\n    \r\n    import de.scrum_master.app.Application;\r\n    \r\n    public aspect IntraAspectPrecedence {\r\n    \r\n        pointcut methodCall(int i) :\r\n            call(void Application.doSomething(int)) &amp;&amp; args(i);\r\n    \r\n        void around(int i): methodCall(i) {\r\n            System.out.println(&quot;around1 (pre-proceed) -&gt; &quot; + i);\r\n            proceed(11);\r\n            System.out.println(&quot;around1 (post-proceed) -&gt; &quot; + i);\r\n        }\r\n    \r\n        void around(int i): methodCall(i) {\r\n            System.out.println(&quot;around2 (pre-proceed) -&gt; &quot; + i);\r\n            proceed(22);\r\n            System.out.println(&quot;around2 (post-proceed) -&gt; &quot; + i);\r\n        }\r\n    \r\n        before(int i): methodCall(i) {\r\n            System.out.println(&quot;before1 -&gt; &quot; + i);\r\n        }\r\n    \r\n        before(int i): methodCall(i) {\r\n            System.out.println(&quot;before2 -&gt; &quot; + i);\r\n        }\r\n    \r\n        after(int i): methodCall(i) {\r\n            System.out.println(&quot;after1 -&gt; &quot; + i);\r\n        }\r\n    \r\n        after(int i): methodCall(i) {\r\n            System.out.println(&quot;after2 -&gt; &quot; + i);\r\n        }\r\n    \r\n    }\r\n\r\n**Pseudo code, variant 1:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    around1(99 → 11) {\r\n        around2(11 → 22) {\r\n            before1(22) {\r\n                before2(22) {\r\n                    joinpoint(22) {}\r\n                }\r\n            }\r\n        }\r\n    }\r\n    after2(99) {\r\n        after1(99) {}\r\n    }\r\n\r\n**Console output, variant 1:**\r\n\r\nPlease note that &quot;after1&quot; is printed before &quot;after2&quot; even though it has lower precedence because _after_ delegates first, then executes, as explained above.\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    around1 (pre-proceed) -&gt; 99\r\n    around2 (pre-proceed) -&gt; 11\r\n    before1 -&gt; 22\r\n    before2 -&gt; 22\r\n    Doing something with 22\r\n    around2 (post-proceed) -&gt; 11\r\n    around1 (post-proceed) -&gt; 99\r\n    after1 -&gt; 99\r\n    after2 -&gt; 99\r\n\r\n**Aspect, variant 2:**\r\n\r\nBasically it is the same as before, only the first _after_ advice has the highest precedence.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.aspect;\r\n    \r\n    import de.scrum_master.app.Application;\r\n    \r\n    public aspect IntraAspectPrecedence {\r\n    \r\n        pointcut methodCall(int i) :\r\n            call(void Application.doSomething(int)) &amp;&amp; args(i);\r\n    \r\n        after(int i): methodCall(i) {\r\n            System.out.println(&quot;after1 -&gt; &quot; + i);\r\n        }\r\n    \r\n        void around(int i): methodCall(i) {\r\n            System.out.println(&quot;around1 (pre-proceed) -&gt; &quot; + i);\r\n            proceed(11);\r\n            System.out.println(&quot;around1 (post-proceed) -&gt; &quot; + i);\r\n        }\r\n    \r\n        void around(int i): methodCall(i) {\r\n            System.out.println(&quot;around2 (pre-proceed) -&gt; &quot; + i);\r\n            proceed(22);\r\n            System.out.println(&quot;around2 (post-proceed) -&gt; &quot; + i);\r\n        }\r\n    \r\n        before(int i): methodCall(i) {\r\n            System.out.println(&quot;before1 -&gt; &quot; + i);\r\n        }\r\n    \r\n        before(int i): methodCall(i) {\r\n            System.out.println(&quot;before2 -&gt; &quot; + i);\r\n        }\r\n    \r\n        after(int i): methodCall(i) {\r\n            System.out.println(&quot;after2 -&gt; &quot; + i);\r\n        }\r\n    \r\n    }\r\n\r\n**Pseudo code, variant 2:**\r\n\r\nThis time, because _after1_ has higher precedence than both _around_ advices, it is executed right after the _joinpoint_ returns and thus before whatever happens after `proceed()` in the wrapping _around_ advices.\r\n\r\n_(Note to myself: I am not happy with this explanation, maybe there is a better way to say it. Maybe the answer could be rephrased, working with one pseudo before/after advice pair per around advice instead of the wrapping metaphor.)_\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    around1(99 → 11) {\r\n        around2(11 → 22) {\r\n            before1(22) {\r\n                before2(22) {\r\n                    joinpoint(22) {}\r\n                }\r\n            }\r\n            after1(22) {}\r\n        }\r\n    }\r\n    after2(99) {}\r\n\r\n**Console output, variant 2:**\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    around1 (pre-proceed) -&gt; 99\r\n    around2 (pre-proceed) -&gt; 11\r\n    before1 -&gt; 22\r\n    before2 -&gt; 22\r\n    Doing something with 22\r\n    after1 -&gt; 22\r\n    around2 (post-proceed) -&gt; 11\r\n    around1 (post-proceed) -&gt; 99\r\n    after2 -&gt; 99\r\n","title":"Unclear advice precedence when combining before-, around- and after-advice operating on same joinpoint in one aspect","body":"<p>Actually @XGouchet's first sketch is not quite correct because the <em>before</em> advice does not occur within the scope of <em>around</em>, but has finished before <em>around</em> is executed. Let me use pseudo code notation with curly braces expressing this kind of &quot;lexical scope&quot;:</p>\n<p><strong>Scenario A: lexical ordering <em>before</em> -&gt; <em>around</em> -&gt; <em>after</em>:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>before(25)\naround(25 → 1) {\n    joinpoint(1)\n}\nafter(25)\n</code></pre>\n<p><strong>Scenario B: lexical ordering <em>after</em> -&gt; <em>before</em> -&gt; <em>around</em>:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>before(25)\naround(25 → 1) {\n    joinpoint(1)\n    after(1)\n}\n</code></pre>\n<p><strong>Scenario C: lexical ordering <em>after</em> -&gt; <em>around</em> -&gt; <em>before</em>:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>around(25 → 1) {\n    before(1)\n    joinpoint(1)\n    after(1)\n}\n</code></pre>\n<p>Quote from <a href=\"http://www.eclipse.org/aspectj/doc/next/progguide/semantics-advice.html#d0e6257\" rel=\"nofollow noreferrer\">Determining precedence</a> paragraph from the AspectJ manual's chapter on aspect precedence:</p>\n<blockquote>\n<p>If the two pieces of advice are defined in the same aspect, then there are two cases:</p>\n<ul>\n<li>If either are <strong><em>after</em> advice</strong>, then the one that appears <strong>later</strong> in the aspect has precedence over the one that appears earlier.</li>\n<li><strong>Otherwise,</strong> then the one that appears <strong>earlier</strong> in the aspect has precedence over the one that appears later.</li>\n</ul>\n</blockquote>\n<p>Now also bear in mind how aspects behave and what precedence really means under certain circumstances. Also quoting the <a href=\"http://www.eclipse.org/aspectj/doc/next/progguide/semantics-advice.html#d0e6293\" rel=\"nofollow noreferrer\">Effects of precedence</a> paragraph from the AspectJ manual's chapter on aspect precedence:</p>\n<blockquote>\n<p>At a particular join point, advice is ordered by precedence.</p>\n<ul>\n<li>A piece of <em>around</em> advice controls whether advice of lower precedence will run by calling proceed. The call to proceed will run the advice with next precedence, or the computation under the join point if there is no further advice.</li>\n<li>A piece of <em>before</em> advice can prevent advice of lower precedence from running by throwing an exception. If it returns normally, however, then the advice of the next precedence, or the computation under the join point if there is no further advice, will run.</li>\n<li>Running <em>after returning</em> advice will run the advice of next precedence, or the computation under the join point if there is no further advice. Then, if that computation returned normally, the body of the advice will run.</li>\n<li>Running <em>after throwing</em> advice will run the advice of next precedence, or the computation under the join point if there is no further advice. Then, if that computation threw an exception of an appropriate type, the body of the advice will run.</li>\n<li>Running <em>after</em> advice will run the advice of next precedence, or the computation under the join point if there is no further advice. Then the body of the advice will run.</li>\n</ul>\n</blockquote>\n<p>In plain English:</p>\n<ul>\n<li><p>An <em>around</em> advice wraps</p>\n<ul>\n<li>other <em>around</em> or <em>before</em> advices of <strong><em>lower</em></strong> precedence as well as</li>\n<li><em>after</em> advices of <strong><em>higher</em></strong> precedence.</li>\n</ul>\n<p>Why is that so? Imagine the <em>around</em> advice to be a pair of <em>before</em> and <em>after</em> advices on steroids (can modify method parameters and return value, can handle exceptions, can share state between <em>before</em> and <em>after</em> code). Consequently, the same delegation rules as for separate <em>before</em> and <em>after</em> advices apply as follows.</p>\n</li>\n<li><p>A <em>before</em> advice executes first before delegating or proceeding.</p>\n</li>\n<li><p>An <em>after</em> advice delegates first before executing. In particular (and maybe somewhat counter-intuitively), this means:</p>\n<ul>\n<li><p>If an <em>after</em> advice has higher precedence than an <em>around</em> advice, then if the <em>around</em> advice modifies any method arguments before proceeding, the <em>after</em> advice is affected by the modification too, because the <em>around</em> advice already proceeded to the target method with the modified arguments before the <em>after</em> advice kicks in.</p>\n</li>\n<li><p>However, the same higher precedence <em>after (returning)</em> advice is unaffected if the lower precedence <em>around</em> advice modifies the return value because the <em>after (returning)</em> advice is executed before the <em>around</em> advice's post-proceed code due to its higher precedence.</p>\n</li>\n<li><p>Conversely, if an <em>after</em> advice has lower precedence than an <em>around</em> advice, then if the <em>around</em> advice modifies any method arguments before proceeding, the <em>after</em> advice is unaffected by the modification because it runs outside the context of the <em>around</em> advice, it is not being wrapped by it.</p>\n</li>\n<li><p>However, the same lower precedence <em>after (returning)</em> advice is affected if the higher precedence <em>around</em> advice modifies the return value because it runs after the latter has finished running already.</p>\n</li>\n</ul>\n</li>\n</ul>\n<p>Now here is an extended example illustrating what I just wrote:</p>\n<p><strong>Driver application:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\npublic class Application {\n    public void doSomething(int i) {\n        System.out.println(&quot;Doing something with &quot; + i);\n    }\n\n    public static void main(String[] arg) {\n        Application application = new Application();\n        application.doSomething(99);\n    }\n}\n</code></pre>\n<p><strong>Aspect, variant 1:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport de.scrum_master.app.Application;\n\npublic aspect IntraAspectPrecedence {\n\n    pointcut methodCall(int i) :\n        call(void Application.doSomething(int)) &amp;&amp; args(i);\n\n    void around(int i): methodCall(i) {\n        System.out.println(&quot;around1 (pre-proceed) -&gt; &quot; + i);\n        proceed(11);\n        System.out.println(&quot;around1 (post-proceed) -&gt; &quot; + i);\n    }\n\n    void around(int i): methodCall(i) {\n        System.out.println(&quot;around2 (pre-proceed) -&gt; &quot; + i);\n        proceed(22);\n        System.out.println(&quot;around2 (post-proceed) -&gt; &quot; + i);\n    }\n\n    before(int i): methodCall(i) {\n        System.out.println(&quot;before1 -&gt; &quot; + i);\n    }\n\n    before(int i): methodCall(i) {\n        System.out.println(&quot;before2 -&gt; &quot; + i);\n    }\n\n    after(int i): methodCall(i) {\n        System.out.println(&quot;after1 -&gt; &quot; + i);\n    }\n\n    after(int i): methodCall(i) {\n        System.out.println(&quot;after2 -&gt; &quot; + i);\n    }\n\n}\n</code></pre>\n<p><strong>Pseudo code, variant 1:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>around1(99 → 11) {\n    around2(11 → 22) {\n        before1(22) {\n            before2(22) {\n                joinpoint(22) {}\n            }\n        }\n    }\n}\nafter2(99) {\n    after1(99) {}\n}\n</code></pre>\n<p><strong>Console output, variant 1:</strong></p>\n<p>Please note that &quot;after1&quot; is printed before &quot;after2&quot; even though it has lower precedence because <em>after</em> delegates first, then executes, as explained above.</p>\n<pre class=\"lang-none prettyprint-override\"><code>around1 (pre-proceed) -&gt; 99\naround2 (pre-proceed) -&gt; 11\nbefore1 -&gt; 22\nbefore2 -&gt; 22\nDoing something with 22\naround2 (post-proceed) -&gt; 11\naround1 (post-proceed) -&gt; 99\nafter1 -&gt; 99\nafter2 -&gt; 99\n</code></pre>\n<p><strong>Aspect, variant 2:</strong></p>\n<p>Basically it is the same as before, only the first <em>after</em> advice has the highest precedence.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport de.scrum_master.app.Application;\n\npublic aspect IntraAspectPrecedence {\n\n    pointcut methodCall(int i) :\n        call(void Application.doSomething(int)) &amp;&amp; args(i);\n\n    after(int i): methodCall(i) {\n        System.out.println(&quot;after1 -&gt; &quot; + i);\n    }\n\n    void around(int i): methodCall(i) {\n        System.out.println(&quot;around1 (pre-proceed) -&gt; &quot; + i);\n        proceed(11);\n        System.out.println(&quot;around1 (post-proceed) -&gt; &quot; + i);\n    }\n\n    void around(int i): methodCall(i) {\n        System.out.println(&quot;around2 (pre-proceed) -&gt; &quot; + i);\n        proceed(22);\n        System.out.println(&quot;around2 (post-proceed) -&gt; &quot; + i);\n    }\n\n    before(int i): methodCall(i) {\n        System.out.println(&quot;before1 -&gt; &quot; + i);\n    }\n\n    before(int i): methodCall(i) {\n        System.out.println(&quot;before2 -&gt; &quot; + i);\n    }\n\n    after(int i): methodCall(i) {\n        System.out.println(&quot;after2 -&gt; &quot; + i);\n    }\n\n}\n</code></pre>\n<p><strong>Pseudo code, variant 2:</strong></p>\n<p>This time, because <em>after1</em> has higher precedence than both <em>around</em> advices, it is executed right after the <em>joinpoint</em> returns and thus before whatever happens after <code>proceed()</code> in the wrapping <em>around</em> advices.</p>\n<p><em>(Note to myself: I am not happy with this explanation, maybe there is a better way to say it. Maybe the answer could be rephrased, working with one pseudo before/after advice pair per around advice instead of the wrapping metaphor.)</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>around1(99 → 11) {\n    around2(11 → 22) {\n        before1(22) {\n            before2(22) {\n                joinpoint(22) {}\n            }\n        }\n        after1(22) {}\n    }\n}\nafter2(99) {}\n</code></pre>\n<p><strong>Console output, variant 2:</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>around1 (pre-proceed) -&gt; 99\naround2 (pre-proceed) -&gt; 11\nbefore1 -&gt; 22\nbefore2 -&gt; 22\nDoing something with 22\nafter1 -&gt; 22\naround2 (post-proceed) -&gt; 11\naround1 (post-proceed) -&gt; 99\nafter2 -&gt; 99\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16053106,"reputation":39,"user_id":11586363,"display_name":"nobody "},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1663793086,"creation_date":1663793086,"answer_id":73806752,"question_id":39978586,"body_markdown":"Just remember that for after advice, a higher precedence means &quot;runs after&quot;.\r\n\r\nThat tracks what you&#39;re trying to do with after advice anyway.","title":"Unclear advice precedence when combining before-, around- and after-advice operating on same joinpoint in one aspect","body":"<p>Just remember that for after advice, a higher precedence means &quot;runs after&quot;.</p>\n<p>That tracks what you're trying to do with after advice anyway.</p>\n"}],"owner":{"account_id":792334,"reputation":871,"user_id":867078,"accept_rate":60,"display_name":"Simon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":648,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":40071281,"answer_count":3,"score":3,"last_activity_date":1663793086,"creation_date":1476193097,"question_id":39978586,"body_markdown":"Please consider this simple Java-code\r\n\r\n    public class Application {\r\n\t\r\n      public void m(int i) {\r\n       System.out.println(&quot;M with argument &quot; + i );\r\n      }\r\n \r\n      public static void main(String[] arg) {\r\n       Application t = new Application();\r\n       t.m(25);  \r\n      }\r\n    }\r\n\r\nI have defined the following Aspect to operate on this class: \r\n\r\n    public aspect Basics {\r\n      public void output(String tag, Object o) {\r\n        System.out.println(tag + &quot;: &quot; + o);\r\n      }\r\n      \r\n      pointcut callM(int i): call(void Application.m(int)) &amp;&amp; args(i);\r\n\r\n      before(int i): callM(i) {\r\n    \toutput(&quot;before M&quot;, i);  \r\n      }\r\n\r\n      void around(int i): callM(i) {\r\n\t      output(&quot;around-advice&quot;, i);\r\n    \t  proceed(1);\r\n    \t  output(&quot;after proceed&quot;, i);\r\n      }\r\n\r\n      after(int i): callM(i) {\r\n    \toutput(&quot;After M&quot;, i);  \r\n      }\r\n    }\r\n\r\nIt&#39;s important to note that the around-advice changes the value of the argument that&#39;s passed to method M to 1.\r\nRunning this code generates the following output: \r\n\r\n    before M: 25\r\n    around-advice: 25\r\n    M with argument 1\r\n    after proceed: 25\r\n    After M: 25\r\n\r\nThe entire output is as I would have expected, except for the last line. I expected the last line to print &#39;1&#39; instead of &#39;25&#39;. Can someone explain to me why this is the case? \r\n\r\nWhile looking for an answer myself, I tried to change the ordering of the advices but this only made the confusion bigger in the end. If I put the after-advice first in the code, followed by the before-advice and then put the around-advice last (i.e. (1)after-(2)before-(3)around), I got the following output: \r\n\r\n    before M: 25\r\n    around-advice: 25\r\n    M with argument 1\r\n    After M: 1\r\n    after proceed: 25\r\n\r\nTo me, this is the only output that makes perfect sense. \r\n\r\nHowever, if I put the after-advice first, followed by the around-advice while putting the before-advice last (i.e.(1)after-(2)around-(3)before), I get the following output which also makes little sense to me if I take the output of the previous orderings into account:\r\n\r\n    around-advice: 25\r\n    before M: 1\r\n    M with argument 1\r\n    After M: 1\r\n    after proceed: 25\r\n\r\nIn this case, the before-advice gets triggered with &#39;i&#39; bound to 1. My guess is that this is due to the around-advice being triggered first (because of the ordering) and that the before-advice is actually triggered by the call to &#39;proceed&#39; in the body of the around-advice. Following this logic, however, doesn&#39;t explain the output that was generated in the ordering that was discussed first in this question.\r\n\r\nFinally, changing the ordering in such a way that we first have the before-advice, followed by the after-advice, and then followed by the around-advice (i.e. (1)before-(2)after-(3)around) is not valid according to the AspectJ-plugin of Eclipse because this generates a &#39;circular advice precedence&#39;. \r\n\r\nCan someone give me an explanation of the precedence being used between different advices within the same aspect that explains all the behaviour above? \r\n\r\nI have been reading on the subject [here][1] but I think the explanation is inconclusive/doesn&#39;t match the implementation. \r\nIt says\r\n&gt; A piece of around advice controls whether advice of lower precedence will run by calling proceed. The call to proceed will run the advice with next precedence, or the computation under the join point if there is no further advice.\r\n\r\nIf I understand correctly, this means that the output that was discussed first in this question (i.e. (1)before-(2)around-(3)after-ordering) should have had &#39;1&#39; in the last line rather than &#39;25&#39;.\r\n\r\n\r\n  [1]: http://www.eclipse.org/aspectj/doc/next/progguide/semantics-advice.html","title":"Unclear advice precedence when combining before-, around- and after-advice operating on same joinpoint in one aspect","body":"<p>Please consider this simple Java-code</p>\n\n<pre><code>public class Application {\n\n  public void m(int i) {\n   System.out.println(\"M with argument \" + i );\n  }\n\n  public static void main(String[] arg) {\n   Application t = new Application();\n   t.m(25);  \n  }\n}\n</code></pre>\n\n<p>I have defined the following Aspect to operate on this class: </p>\n\n<pre><code>public aspect Basics {\n  public void output(String tag, Object o) {\n    System.out.println(tag + \": \" + o);\n  }\n\n  pointcut callM(int i): call(void Application.m(int)) &amp;&amp; args(i);\n\n  before(int i): callM(i) {\n    output(\"before M\", i);  \n  }\n\n  void around(int i): callM(i) {\n      output(\"around-advice\", i);\n      proceed(1);\n      output(\"after proceed\", i);\n  }\n\n  after(int i): callM(i) {\n    output(\"After M\", i);  \n  }\n}\n</code></pre>\n\n<p>It's important to note that the around-advice changes the value of the argument that's passed to method M to 1.\nRunning this code generates the following output: </p>\n\n<pre><code>before M: 25\naround-advice: 25\nM with argument 1\nafter proceed: 25\nAfter M: 25\n</code></pre>\n\n<p>The entire output is as I would have expected, except for the last line. I expected the last line to print '1' instead of '25'. Can someone explain to me why this is the case? </p>\n\n<p>While looking for an answer myself, I tried to change the ordering of the advices but this only made the confusion bigger in the end. If I put the after-advice first in the code, followed by the before-advice and then put the around-advice last (i.e. (1)after-(2)before-(3)around), I got the following output: </p>\n\n<pre><code>before M: 25\naround-advice: 25\nM with argument 1\nAfter M: 1\nafter proceed: 25\n</code></pre>\n\n<p>To me, this is the only output that makes perfect sense. </p>\n\n<p>However, if I put the after-advice first, followed by the around-advice while putting the before-advice last (i.e.(1)after-(2)around-(3)before), I get the following output which also makes little sense to me if I take the output of the previous orderings into account:</p>\n\n<pre><code>around-advice: 25\nbefore M: 1\nM with argument 1\nAfter M: 1\nafter proceed: 25\n</code></pre>\n\n<p>In this case, the before-advice gets triggered with 'i' bound to 1. My guess is that this is due to the around-advice being triggered first (because of the ordering) and that the before-advice is actually triggered by the call to 'proceed' in the body of the around-advice. Following this logic, however, doesn't explain the output that was generated in the ordering that was discussed first in this question.</p>\n\n<p>Finally, changing the ordering in such a way that we first have the before-advice, followed by the after-advice, and then followed by the around-advice (i.e. (1)before-(2)after-(3)around) is not valid according to the AspectJ-plugin of Eclipse because this generates a 'circular advice precedence'. </p>\n\n<p>Can someone give me an explanation of the precedence being used between different advices within the same aspect that explains all the behaviour above? </p>\n\n<p>I have been reading on the subject <a href=\"http://www.eclipse.org/aspectj/doc/next/progguide/semantics-advice.html\" rel=\"nofollow\">here</a> but I think the explanation is inconclusive/doesn't match the implementation. \nIt says</p>\n\n<blockquote>\n  <p>A piece of around advice controls whether advice of lower precedence will run by calling proceed. The call to proceed will run the advice with next precedence, or the computation under the join point if there is no further advice.</p>\n</blockquote>\n\n<p>If I understand correctly, this means that the output that was discussed first in this question (i.e. (1)before-(2)around-(3)after-ordering) should have had '1' in the last line rather than '25'.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1663705907,"post_id":73792262,"comment_id":130302073,"body_markdown":"How about using `&quot;localhost&quot;` instead of IP like `Socket connection = new Socket(&quot;localhost&quot;, 5050);`?","body":"How about using <code>&quot;localhost&quot;</code> instead of IP like <code>Socket connection = new Socket(&quot;localhost&quot;, 5050);</code>?"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1663706090,"post_id":73792262,"comment_id":130302126,"body_markdown":"&quot;..but the app keeps crushing&quot; usually while problem occurs there is some error message or even entry to log file. Could you include it in your question?","body":"&quot;..but the app keeps crushing&quot; usually while problem occurs there is some error message or even entry to log file. Could you include it in your question?"},{"owner":{"account_id":12948514,"reputation":501,"user_id":19926805,"display_name":"Steffen"},"score":0,"creation_date":1663706419,"post_id":73792262,"comment_id":130302222,"body_markdown":"Does this answer your question? [java InetAddress.getLocalHost(); returns 127.0.0.1 ... how to get REAL IP?](https://stackoverflow.com/questions/2381316/java-inetaddress-getlocalhost-returns-127-0-0-1-how-to-get-real-ip)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2381316/java-inetaddress-getlocalhost-returns-127-0-0-1-how-to-get-real-ip\">java InetAddress.getLocalHost(); returns 127.0.0.1 ... how to get REAL IP?</a>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1663707021,"post_id":73792262,"comment_id":130302407,"body_markdown":"new Socket(&quot;10.0.2.2&quot;, 5050);","body":"new Socket(&quot;10.0.2.2&quot;, 5050);"}],"owner":{"account_id":26389517,"reputation":11,"user_id":20041566,"display_name":"Rising Sun"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1663792812,"creation_date":1663705447,"question_id":73792262,"body_markdown":"I have a local console-based server that I would like to connect to with an android app (emulator) both running on the same computer.\r\n\r\nServer code.\r\n\r\n``` \r\npublic void startServer() {\r\n\r\n    serverSocket = new ServerSocket(5050);\r\n    System.out.printf(&quot;Server started on ip= %s port= 5050\\n&quot;, InetAddress.getLocalHost().getHostAddress());\r\n    while (true) {  \r\n        Socket clientSocket = serverSocket.accept();\r\n        System.out.println(&quot;Accepted&quot;);\r\n    }\r\n}\r\n   \r\n```\r\n\r\nClient \r\n\r\n    Socket connection = new Socket(&quot;192.168.92.11&quot;, 5050);\r\n\r\nBut the problem I do not want to hardcode the IP address in case, I want the app to automatically detect the local IP and connect to the server.\r\n\r\nI tried this below but the app keeps crashing \r\n\r\n     Socket connection = new Socket(InetAddress.getLocalHost().getHostAddress(), 5050);\r\n\r\nIs there another way I can achieve this?","title":"How to connect to local server without hardcoding the IP address","body":"<p>I have a local console-based server that I would like to connect to with an android app (emulator) both running on the same computer.</p>\n<p>Server code.</p>\n<pre><code>public void startServer() {\n\n    serverSocket = new ServerSocket(5050);\n    System.out.printf(&quot;Server started on ip= %s port= 5050\\n&quot;, InetAddress.getLocalHost().getHostAddress());\n    while (true) {  \n        Socket clientSocket = serverSocket.accept();\n        System.out.println(&quot;Accepted&quot;);\n    }\n}\n   \n</code></pre>\n<p>Client</p>\n<pre><code>Socket connection = new Socket(&quot;192.168.92.11&quot;, 5050);\n</code></pre>\n<p>But the problem I do not want to hardcode the IP address in case, I want the app to automatically detect the local IP and connect to the server.</p>\n<p>I tried this below but the app keeps crashing</p>\n<pre><code> Socket connection = new Socket(InetAddress.getLocalHost().getHostAddress(), 5050);\n</code></pre>\n<p>Is there another way I can achieve this?</p>\n"},{"tags":["java","exception","ehcache","heap-memory","terracotta"],"comments":[{"owner":{"account_id":250210,"reputation":1230,"user_id":526781,"display_name":"Alex Snaps"},"score":0,"creation_date":1352755267,"post_id":13320540,"comment_id":18223328,"body_markdown":"The warning is coming from the sizing of your objects in memory that is enabled because of the maxBytesLocalHeap=&quot;30%&quot; setting on your cacheManager.\nNow whether you&#39;re seeing this because of a genuine issue or something else is hard to tell. It is basically telling you that one single entry you put in the cache is over a 1k reference big. Can this actually be correct ?\nAlso, about the speed, are you saying that 700x on puts, gets, both ?","body":"The warning is coming from the sizing of your objects in memory that is enabled because of the maxBytesLocalHeap=&quot;30%&quot; setting on your cacheManager. Now whether you&#39;re seeing this because of a genuine issue or something else is hard to tell. It is basically telling you that one single entry you put in the cache is over a 1k reference big. Can this actually be correct ? Also, about the speed, are you saying that 700x on puts, gets, both ?"},{"owner":{"account_id":1169607,"reputation":491,"user_id":1147070,"accept_rate":24,"display_name":"user1147070"},"score":0,"creation_date":1353592957,"post_id":13320540,"comment_id":18499153,"body_markdown":"So what size i should configure my maxBytesLocalHeap?. The speed is 700x on both . But when i use @IgnoreSizeOf annotation at my 1 object this warning disappears and speed increases a lot.","body":"So what size i should configure my maxBytesLocalHeap?. The speed is 700x on both . But when i use @IgnoreSizeOf annotation at my 1 object this warning disappears and speed increases a lot."},{"owner":{"account_id":250210,"reputation":1230,"user_id":526781,"display_name":"Alex Snaps"},"score":0,"creation_date":1353597220,"post_id":13320540,"comment_id":18501115,"body_markdown":"Does it sound like even possible that a single cache entry is over 1k different objects ?","body":"Does it sound like even possible that a single cache entry is over 1k different objects ?"},{"owner":{"account_id":250210,"reputation":1230,"user_id":526781,"display_name":"Alex Snaps"},"score":0,"creation_date":1353597550,"post_id":13320540,"comment_id":18501297,"body_markdown":"Also not that if both puts and gets are slow, the problem you experience is most probably _not_ related to sizing. Sizing only happens when _adding_ to the cache.","body":"Also not that if both puts and gets are slow, the problem you experience is most probably <i>not</i> related to sizing. Sizing only happens when <i>adding</i> to the cache."}],"owner":{"account_id":1169607,"reputation":491,"user_id":1147070,"accept_rate":24,"display_name":"user1147070"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2567,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1663792281,"creation_date":1352536630,"question_id":13320540,"body_markdown":"I am trying to use Terracotta with ehcache. My project has two instances of Tomcat where my application integrated with ehcache is deployed. I need synchronization between these two instances, which is why I am using Terracotta. However I am facing error:\r\n\r\n&gt; net.sf.ehcache.CacheException: Uncaught exception in get() - Java heap space\r\n\r\nwhen I have integrated ehcache with Terracotta. My ehcache.xml is\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n    &lt;ehcache name=&quot;terracotta&quot; maxBytesLocalHeap=&quot;30%&quot; &gt;\r\n      &lt;diskStore path=&quot;java.io.tmpdir&quot; /&gt;\r\n\r\n     &lt;terracottaConfig url=&quot;localhost:9510&quot;/&gt;\r\n     &lt;cacheManagerPeerListenerFactory\r\n     class=&quot;net.sf.ehcache.distribution.RMICacheManagerPeerListenerFactory&quot;/&gt;\r\n\t\r\n\t&lt;cache name=&quot;LocalCache&quot;\r\n     \t\ttimeToLiveSeconds=&quot;10&quot;\r\n\t\tmaxElementsOnDisk=&quot;0&quot;\r\n\t     \teternal=&quot;false&quot; \r\n\t      \tmemoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\r\n\t      &lt;terracotta /&gt;           \r\n\t&lt;/cache&gt;\r\n\t\r\n\t\r\n\t&lt;cache name=&quot;cache1&quot;\r\n\t\ttimeToLiveSeconds=&quot;10&quot;\r\n\t\tmaxElementsOnDisk=&quot;0&quot;\r\n\t     \teternal=&quot;false&quot; \r\n\t      \tmemoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\r\n\t      &lt;terracotta /&gt;          \r\n\t&lt;/cache&gt;\r\n\t\r\n\t&lt;cache name=&quot;cache2&quot;\r\n\t\ttimeToLiveSeconds=&quot;10&quot;\r\n\t\tmaxElementsOnDisk=&quot;0&quot;\r\n\t     \teternal=&quot;false&quot; \r\n\t      \tmemoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\r\n\t      &lt;terracotta /&gt; \r\n\t      &lt;/cache&gt;\r\n\t\r\n\t&lt;cache name=&quot;cache3&quot;\r\n \t\ttimeToLiveSeconds=&quot;10&quot;\r\n\t\tmaxElementsOnDisk=&quot;0&quot;\r\n\t     \teternal=&quot;false&quot; \r\n\t      \tmemoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\r\n\t            &lt;terracotta /&gt;\r\n\t&lt;/cache&gt;\r\n\t\r\n\t      &lt;cache name=&quot;cache4&quot;\r\n \t\ttimeToLiveSeconds=&quot;10&quot;\r\n\t\tmaxElementsOnDisk=&quot;0&quot;\r\n\t     \teternal=&quot;false&quot; \r\n\t      \tmemoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\r\n\t     &lt;terracotta /&gt; \r\n\t&lt;/cache&gt;\r\n\t\r\n\t &lt;cache name=&quot;cache5&quot;\r\n \t\ttimeToLiveSeconds=&quot;10&quot;\r\n\t\tmaxElementsOnDisk=&quot;0&quot;\r\n\t     \teternal=&quot;false&quot; \r\n\t      \tmemoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\r\n\t      &lt;terracotta /&gt; \t\r\n         &lt;/cache&gt;\r\n\t\r\n\t&lt;cache name=&quot;cache6&quot;\r\n \t\ttimeToLiveSeconds=&quot;10&quot;\r\n\t\tmaxElementsOnDisk=&quot;0&quot;\r\n\t     \teternal=&quot;false&quot; \r\n\t      \tmemoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\r\n\t      &lt;terracotta /&gt; \r\n\t&lt;/cache&gt;\r\n\t\r\n\t&lt;cache name=&quot;cache7&quot;\r\n\t\ttimeToLiveSeconds=&quot;10&quot;\r\n\t\tmaxElementsOnDisk=&quot;0&quot;\r\n\t     \teternal=&quot;false&quot; \r\n\t      \tmemoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\r\n\t     &lt;terracotta /&gt; \r\n\t&lt;/cache&gt;\r\n\t\r\n\t&lt;cache name=&quot;cache8&quot;\r\n\t\ttimeToLiveSeconds=&quot;10&quot;\r\n\t\tmaxElementsOnDisk=&quot;0&quot;\r\n\t     \teternal=&quot;false&quot; \r\n\t      \tmemoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\r\n\t    &lt;terracotta /&gt; \r\n\t&lt;/cache&gt;\r\n\t\r\n\t&lt;cache name=&quot;cache9&quot;\r\n\t\ttimeToLiveSeconds=&quot;10&quot;\r\n\t\tmaxElementsOnDisk=&quot;0&quot;\r\n\t     \teternal=&quot;false&quot; \r\n\t      \tmemoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\r\n\t    &lt;terracotta /&gt; \r\n\t&lt;/cache&gt;\r\n\t\r\n\t&lt;cache name=&quot;cache10&quot;\r\n\t\ttimeToLiveSeconds=&quot;10&quot;\r\n\t\tmaxElementsOnDisk=&quot;0&quot;\r\n\t     \teternal=&quot;false&quot; \r\n\t      \tmemoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\r\n\t      &lt;terracotta /&gt; \r\n\t&lt;/cache&gt;\r\n\t\r\n\t&lt;cache name=&quot;DetailStockByKey&quot;\r\n\t\ttimeToLiveSeconds=&quot;10&quot;\r\n\t\tmaxElementsOnDisk=&quot;0&quot;\r\n\t     \teternal=&quot;false&quot; \r\n\t      \tmemoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\r\n\t      &lt;terracotta /&gt; \r\n\t&lt;/cache&gt;\r\n\t     \r\n\t&lt;cache name=&quot;cache11&quot;\r\n\t\ttimeToLiveSeconds=&quot;10&quot;\r\n\t\tmaxElementsOnDisk=&quot;0&quot;\r\n\t     \teternal=&quot;false&quot; \r\n\t      \tmemoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\r\n\t           &lt;terracotta /&gt; \r\n\t&lt;/cache&gt;\r\n\t\r\n\t&lt;cache name=&quot;cache12&quot;\r\n\t\ttimeToLiveSeconds=&quot;10&quot;\r\n\t\tmaxElementsOnDisk=&quot;0&quot;\r\n\t     \teternal=&quot;false&quot; \r\n\t      \tmemoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\r\n\t           &lt;terracotta /&gt; \r\n\t&lt;/cache&gt;\r\n\t&lt;cache name=&quot;cache13&quot;\r\n\t\ttimeToLiveSeconds=&quot;10&quot;\r\n\t\tmaxElementsOnDisk=&quot;0&quot;\r\n\t     \teternal=&quot;false&quot; \r\n\t      \tmemoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\r\n\t           &lt;terracotta /&gt; \r\n\t&lt;/cache&gt;\r\n\t&lt;cache name=&quot;cache15&quot;\r\n \t\ttimeToLiveSeconds=&quot;10&quot;\r\n\t\t\t     \teternal=&quot;false&quot; \r\n\t      \tmemoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\r\n\t           &lt;!--&lt;terracotta /&gt; --&gt;\r\n\t&lt;/cache&gt;\r\n      \t\t\r\n\t&lt;cache name=&quot;cache14&quot;\r\n \t\ttimeToLiveSeconds=&quot;10&quot;\r\n\t\t\t     \teternal=&quot;false&quot; \r\n\t      \tmemoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\r\n\t           &lt;!--&lt;terracotta /&gt; --&gt;\r\n\t&lt;/cache&gt;      \t\t\r\n      &lt;/ehcache&gt;\r\n\r\n\r\n\r\nI also getting a warning like\r\n\r\n&gt; WARNING: The configured limit of 1,000 object references was reached\r\n&gt; while attempting to calculate the size of the object graph. Severe\r\n&gt; performance degradation could occur if the sizing operation continues.\r\n&gt; This can be avoided by setting the CacheManger or Cache &lt;sizeOfPolicy&gt;\r\n&gt; elements maxDepthExceededBehavior to &quot;abort&quot; or adding stop points\r\n&gt; with @IgnoreSizeOf annotations. If performance degradation is NOT an\r\n&gt; issue at the configured limit, raise the limit value using the\r\n&gt; CacheManager or Cache &lt;sizeOfPolicy&gt; elements maxDepth attribute. For\r\n&gt; more information, see the Ehcache configuration documentation.\r\n\r\n\r\nAnd I am using -Xmx:1024m for running Terracotta. I didn&#39;t face this problem and also my response time is less when running stand-alone ehcache.xml. However when using ehcache with terracotta response time has been increased by 700 times. What should I do so that response time decreases and I won&#39;t face this error again?\r\n","title":"Getting Java heap space error when using ehcache with Terracotta","body":"<p>I am trying to use Terracotta with ehcache. My project has two instances of Tomcat where my application integrated with ehcache is deployed. I need synchronization between these two instances, which is why I am using Terracotta. However I am facing error:</p>\n<blockquote>\n<p>net.sf.ehcache.CacheException: Uncaught exception in get() - Java heap space</p>\n</blockquote>\n<p>when I have integrated ehcache with Terracotta. My ehcache.xml is</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;ehcache name=&quot;terracotta&quot; maxBytesLocalHeap=&quot;30%&quot; &gt;\n  &lt;diskStore path=&quot;java.io.tmpdir&quot; /&gt;\n\n &lt;terracottaConfig url=&quot;localhost:9510&quot;/&gt;\n &lt;cacheManagerPeerListenerFactory\n class=&quot;net.sf.ehcache.distribution.RMICacheManagerPeerListenerFactory&quot;/&gt;\n\n&lt;cache name=&quot;LocalCache&quot;\n        timeToLiveSeconds=&quot;10&quot;\n    maxElementsOnDisk=&quot;0&quot;\n        eternal=&quot;false&quot; \n        memoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\n      &lt;terracotta /&gt;           \n&lt;/cache&gt;\n\n\n&lt;cache name=&quot;cache1&quot;\n    timeToLiveSeconds=&quot;10&quot;\n    maxElementsOnDisk=&quot;0&quot;\n        eternal=&quot;false&quot; \n        memoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\n      &lt;terracotta /&gt;          \n&lt;/cache&gt;\n\n&lt;cache name=&quot;cache2&quot;\n    timeToLiveSeconds=&quot;10&quot;\n    maxElementsOnDisk=&quot;0&quot;\n        eternal=&quot;false&quot; \n        memoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\n      &lt;terracotta /&gt; \n      &lt;/cache&gt;\n\n&lt;cache name=&quot;cache3&quot;\n    timeToLiveSeconds=&quot;10&quot;\n    maxElementsOnDisk=&quot;0&quot;\n        eternal=&quot;false&quot; \n        memoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\n            &lt;terracotta /&gt;\n&lt;/cache&gt;\n\n      &lt;cache name=&quot;cache4&quot;\n    timeToLiveSeconds=&quot;10&quot;\n    maxElementsOnDisk=&quot;0&quot;\n        eternal=&quot;false&quot; \n        memoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\n     &lt;terracotta /&gt; \n&lt;/cache&gt;\n\n &lt;cache name=&quot;cache5&quot;\n    timeToLiveSeconds=&quot;10&quot;\n    maxElementsOnDisk=&quot;0&quot;\n        eternal=&quot;false&quot; \n        memoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\n      &lt;terracotta /&gt;    \n     &lt;/cache&gt;\n\n&lt;cache name=&quot;cache6&quot;\n    timeToLiveSeconds=&quot;10&quot;\n    maxElementsOnDisk=&quot;0&quot;\n        eternal=&quot;false&quot; \n        memoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\n      &lt;terracotta /&gt; \n&lt;/cache&gt;\n\n&lt;cache name=&quot;cache7&quot;\n    timeToLiveSeconds=&quot;10&quot;\n    maxElementsOnDisk=&quot;0&quot;\n        eternal=&quot;false&quot; \n        memoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\n     &lt;terracotta /&gt; \n&lt;/cache&gt;\n\n&lt;cache name=&quot;cache8&quot;\n    timeToLiveSeconds=&quot;10&quot;\n    maxElementsOnDisk=&quot;0&quot;\n        eternal=&quot;false&quot; \n        memoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\n    &lt;terracotta /&gt; \n&lt;/cache&gt;\n\n&lt;cache name=&quot;cache9&quot;\n    timeToLiveSeconds=&quot;10&quot;\n    maxElementsOnDisk=&quot;0&quot;\n        eternal=&quot;false&quot; \n        memoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\n    &lt;terracotta /&gt; \n&lt;/cache&gt;\n\n&lt;cache name=&quot;cache10&quot;\n    timeToLiveSeconds=&quot;10&quot;\n    maxElementsOnDisk=&quot;0&quot;\n        eternal=&quot;false&quot; \n        memoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\n      &lt;terracotta /&gt; \n&lt;/cache&gt;\n\n&lt;cache name=&quot;DetailStockByKey&quot;\n    timeToLiveSeconds=&quot;10&quot;\n    maxElementsOnDisk=&quot;0&quot;\n        eternal=&quot;false&quot; \n        memoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\n      &lt;terracotta /&gt; \n&lt;/cache&gt;\n     \n&lt;cache name=&quot;cache11&quot;\n    timeToLiveSeconds=&quot;10&quot;\n    maxElementsOnDisk=&quot;0&quot;\n        eternal=&quot;false&quot; \n        memoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\n           &lt;terracotta /&gt; \n&lt;/cache&gt;\n\n&lt;cache name=&quot;cache12&quot;\n    timeToLiveSeconds=&quot;10&quot;\n    maxElementsOnDisk=&quot;0&quot;\n        eternal=&quot;false&quot; \n        memoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\n           &lt;terracotta /&gt; \n&lt;/cache&gt;\n&lt;cache name=&quot;cache13&quot;\n    timeToLiveSeconds=&quot;10&quot;\n    maxElementsOnDisk=&quot;0&quot;\n        eternal=&quot;false&quot; \n        memoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\n           &lt;terracotta /&gt; \n&lt;/cache&gt;\n&lt;cache name=&quot;cache15&quot;\n    timeToLiveSeconds=&quot;10&quot;\n                eternal=&quot;false&quot; \n        memoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\n           &lt;!--&lt;terracotta /&gt; --&gt;\n&lt;/cache&gt;\n        \n&lt;cache name=&quot;cache14&quot;\n    timeToLiveSeconds=&quot;10&quot;\n                eternal=&quot;false&quot; \n        memoryStoreEvictionPolicy=&quot;LFU&quot; &gt;\n           &lt;!--&lt;terracotta /&gt; --&gt;\n&lt;/cache&gt;            \n  &lt;/ehcache&gt;\n</code></pre>\n<p>I also getting a warning like</p>\n<blockquote>\n<p>WARNING: The configured limit of 1,000 object references was reached\nwhile attempting to calculate the size of the object graph. Severe\nperformance degradation could occur if the sizing operation continues.\nThis can be avoided by setting the CacheManger or Cache \nelements maxDepthExceededBehavior to &quot;abort&quot; or adding stop points\nwith @IgnoreSizeOf annotations. If performance degradation is NOT an\nissue at the configured limit, raise the limit value using the\nCacheManager or Cache  elements maxDepth attribute. For\nmore information, see the Ehcache configuration documentation.</p>\n</blockquote>\n<p>And I am using -Xmx:1024m for running Terracotta. I didn't face this problem and also my response time is less when running stand-alone ehcache.xml. However when using ehcache with terracotta response time has been increased by 700 times. What should I do so that response time decreases and I won't face this error again?</p>\n"},{"tags":["java","multithreading","static"],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1433423015,"creation_date":1433423015,"answer_id":30644583,"question_id":30644395,"body_markdown":"I think you&#39;re being confused by the dangers of the memory model.\r\n\r\nStatic variables *are* shared between threads - the articles you&#39;ve been reading haven&#39;t been trying to say that each thread has its own independent set of static variables. Instead, they&#39;ve been trying to inform you that unprotected modification of shared state isn&#39;t guaranteed to be visible in other threads without setting up appropriate memory barriers. It&#39;s entirely fine for those changes to be visible to other threads immediately - it&#39;s just not *guaranteed*.","title":"Why static variable is shared among the threads","body":"<p>I think you're being confused by the dangers of the memory model.</p>\n\n<p>Static variables <em>are</em> shared between threads - the articles you've been reading haven't been trying to say that each thread has its own independent set of static variables. Instead, they've been trying to inform you that unprotected modification of shared state isn't guaranteed to be visible in other threads without setting up appropriate memory barriers. It's entirely fine for those changes to be visible to other threads immediately - it's just not <em>guaranteed</em>.</p>\n"},{"tags":[],"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1433426735,"creation_date":1433426290,"answer_id":30645840,"question_id":30644395,"body_markdown":"There is no guaranteed time interval where a Java implementation is required to make changes made by one thread visible to another thread without synchronization or a volatile modifier. \r\n\r\nThe idea is to give different JVM implementors discretion (because their implementations have to run on different hardware in different contexts) about how aggressively they want to optimize with caching, instruction reordering, etc. If you compare the Oracle x86 JVM to ARMv7, they make very different choices. \r\n\r\nThe posted code is a toy example. In real life it would be better to use concurrent collections or message passing. Relying on shared global state in the form of static variables is about the messiest way you could do this.","title":"Why static variable is shared among the threads","body":"<p>There is no guaranteed time interval where a Java implementation is required to make changes made by one thread visible to another thread without synchronization or a volatile modifier. </p>\n\n<p>The idea is to give different JVM implementors discretion (because their implementations have to run on different hardware in different contexts) about how aggressively they want to optimize with caching, instruction reordering, etc. If you compare the Oracle x86 JVM to ARMv7, they make very different choices. </p>\n\n<p>The posted code is a toy example. In real life it would be better to use concurrent collections or message passing. Relying on shared global state in the form of static variables is about the messiest way you could do this.</p>\n"}],"owner":{"account_id":1169607,"reputation":491,"user_id":1147070,"accept_rate":24,"display_name":"user1147070"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2358,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1663792082,"creation_date":1433422396,"question_id":30644395,"body_markdown":"In almost all the posts I have read:\r\n\r\nIf two Threads (suppose Thread 1 and Thread 2) are accessing the same object and updating a variable which is declared as static then it means Thread 1 and Thread 2 can make their own local copy of the same object (including static variables) in their respective cache, so updating by Thread 1 to the static variable in its local cache won&#39;t reflect in the static variable for Thread 2 cache.\r\n\r\nStatic variables are used in the Object Context where updating by one object would reflect in all the other objects of the same class but not in the Thread context where updating of one thread to the static variable will reflect the changes immediately to all the threads (in their local cache).\r\n\r\nBut when I run below code snippet:\r\n\r\n    public class StatciVolatile3 {\r\n    \r\n        public static void main(String args[]) {\r\n            new ExampleThread2(&quot;Thread 1 &quot;).start();\r\n            new ExampleThread2(&quot;Thread 2 &quot;).start();\r\n        }\r\n    \r\n    }\r\n    \r\n    class ExampleThread2 extends Thread {\r\n        private static int testValue = 1;\r\n    \r\n        public ExampleThread2(String str) {\r\n            super(str);\r\n        }\r\n    \r\n        public void run() {\r\n            for (int i = 0; i &lt; 3; i++) {\r\n                try {\r\n                    System.out.println(getName() + &quot; : &quot; + i);\r\n                    if (getName().compareTo(&quot;Thread 1 &quot;) == 0) {\r\n                        testValue++;\r\n                        System.out.println(&quot;Test Value T1: &quot; + testValue);\r\n                    }\r\n                    if (getName().compareTo(&quot;Thread 2 &quot;) == 0) {\r\n                        System.out.println(&quot;Test Value T2: &quot; + testValue);\r\n                    }\r\n                    Thread.sleep(1000);\r\n                } catch (InterruptedException exception) {\r\n                    exception.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nThe output is:\r\n\r\n    Thread 1  : 0\r\n    Thread 2  : 0\r\n    Test Value T2: 2\r\n    Test Value T1: 2\r\n    Thread 2  : 1\r\n    Test Value T2: 2\r\n    Thread 1  : 1\r\n    Test Value T1: 3\r\n    Thread 2  : 2\r\n    Test Value T2: 3\r\n    Thread 1  : 2\r\n    Test Value T1: 4\r\n\r\nAs static variable is not shared among the threads so for thread 2 the test value should always be 1. But this is not the case.\r\n\r\nI read so many other questions related to same problem. Why is this happening?\r\n","title":"Why static variable is shared among the threads","body":"<p>In almost all the posts I have read:</p>\n<p>If two Threads (suppose Thread 1 and Thread 2) are accessing the same object and updating a variable which is declared as static then it means Thread 1 and Thread 2 can make their own local copy of the same object (including static variables) in their respective cache, so updating by Thread 1 to the static variable in its local cache won't reflect in the static variable for Thread 2 cache.</p>\n<p>Static variables are used in the Object Context where updating by one object would reflect in all the other objects of the same class but not in the Thread context where updating of one thread to the static variable will reflect the changes immediately to all the threads (in their local cache).</p>\n<p>But when I run below code snippet:</p>\n<pre><code>public class StatciVolatile3 {\n\n    public static void main(String args[]) {\n        new ExampleThread2(&quot;Thread 1 &quot;).start();\n        new ExampleThread2(&quot;Thread 2 &quot;).start();\n    }\n\n}\n\nclass ExampleThread2 extends Thread {\n    private static int testValue = 1;\n\n    public ExampleThread2(String str) {\n        super(str);\n    }\n\n    public void run() {\n        for (int i = 0; i &lt; 3; i++) {\n            try {\n                System.out.println(getName() + &quot; : &quot; + i);\n                if (getName().compareTo(&quot;Thread 1 &quot;) == 0) {\n                    testValue++;\n                    System.out.println(&quot;Test Value T1: &quot; + testValue);\n                }\n                if (getName().compareTo(&quot;Thread 2 &quot;) == 0) {\n                    System.out.println(&quot;Test Value T2: &quot; + testValue);\n                }\n                Thread.sleep(1000);\n            } catch (InterruptedException exception) {\n                exception.printStackTrace();\n            }\n        }\n    }\n}\n</code></pre>\n<p>The output is:</p>\n<pre><code>Thread 1  : 0\nThread 2  : 0\nTest Value T2: 2\nTest Value T1: 2\nThread 2  : 1\nTest Value T2: 2\nThread 1  : 1\nTest Value T1: 3\nThread 2  : 2\nTest Value T2: 3\nThread 1  : 2\nTest Value T1: 4\n</code></pre>\n<p>As static variable is not shared among the threads so for thread 2 the test value should always be 1. But this is not the case.</p>\n<p>I read so many other questions related to same problem. Why is this happening?</p>\n"},{"tags":["java","spring","spring-mvc","spring-java-config"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":1,"creation_date":1425559339,"post_id":28877982,"comment_id":46017936,"body_markdown":"Can you explain the reason for needing multiple dispatchers in a single application? The whole point of Front Controller is that you multiplex your requests onto one.","body":"Can you explain the reason for needing multiple dispatchers in a single application? The whole point of Front Controller is that you multiplex your requests onto one."},{"owner":{"account_id":1423046,"reputation":183,"user_id":1347263,"display_name":"delimiter"},"score":1,"creation_date":1425560025,"post_id":28877982,"comment_id":46018366,"body_markdown":"@chrylis: sure. The project is more like a module based construction kit for shared services. These are not linked to each other but share the same base setup and entities.\nHaving two applications to deploy is a no-go in that project and trying to configure the dispatcher to handle all kind of view technologies (some are based on tiles, others on jsp, newer ones on Thymeleaf) is also a bad idea.","body":"@chrylis: sure. The project is more like a module based construction kit for shared services. These are not linked to each other but share the same base setup and entities. Having two applications to deploy is a no-go in that project and trying to configure the dispatcher to handle all kind of view technologies (some are based on tiles, others on jsp, newer ones on Thymeleaf) is also a bad idea."},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":1,"creation_date":1425560466,"post_id":28877982,"comment_id":46018633,"body_markdown":"Why is it a bad idea? Spring Boot makes it easy.","body":"Why is it a bad idea? Spring Boot makes it easy."},{"owner":{"account_id":1423046,"reputation":183,"user_id":1347263,"display_name":"delimiter"},"score":0,"creation_date":1425560751,"post_id":28877982,"comment_id":46018786,"body_markdown":"Spring Boot is another topic. I&#39;d really just like to have different DispatcherServlets (with different web contexts). That was easy with web.xml configuration (as ContextLoaderListener was not bound to Dispatcher).\nI&#39;m sure there&#39;s a solution or at least best practice.","body":"Spring Boot is another topic. I&#39;d really just like to have different DispatcherServlets (with different web contexts). That was easy with web.xml configuration (as ContextLoaderListener was not bound to Dispatcher). I&#39;m sure there&#39;s a solution or at least best practice."},{"owner":{"account_id":232145,"reputation":1695,"user_id":496792,"accept_rate":74,"display_name":"pakman"},"score":0,"creation_date":1429319117,"post_id":28877982,"comment_id":47558950,"body_markdown":"Did you find a soultion?","body":"Did you find a soultion?"},{"owner":{"account_id":4522916,"reputation":1224,"user_id":3675565,"display_name":"AntJavaDev"},"score":0,"creation_date":1433948109,"post_id":28877982,"comment_id":49572862,"body_markdown":"have you tried adding the AnotherDispatcherConfig.class into the getServletConfigClasses of MyWebAppInitializer , it should be like  @Override\n  protected Class&lt;?&gt;[] getServletConfigClasses() {\n    return new Class[]{MyDispatcherConfig.class,AnotherDispatcherConfig.class};\n  }","body":"have you tried adding the AnotherDispatcherConfig.class into the getServletConfigClasses of MyWebAppInitializer , it should be like  @Override   protected Class&lt;?&gt;[] getServletConfigClasses() {     return new Class[]{MyDispatcherConfig.class,AnotherDispatcherConfig.cla&zwnj;&#8203;ss};   }"},{"owner":{"account_id":1423046,"reputation":183,"user_id":1347263,"display_name":"delimiter"},"score":0,"creation_date":1434280933,"post_id":28877982,"comment_id":49702775,"body_markdown":"@pakman: solution is described below in the two answers.","body":"@pakman: solution is described below in the two answers."},{"owner":{"account_id":1423046,"reputation":183,"user_id":1347263,"display_name":"delimiter"},"score":0,"creation_date":1434280985,"post_id":28877982,"comment_id":49702789,"body_markdown":"@chrylis: I switched to Spring Boot / MicroService architecture... that makes it more easy and comes with a lot of advantages (thanks for the hint!)","body":"@chrylis: I switched to Spring Boot / MicroService architecture... that makes it more easy and comes with a lot of advantages (thanks for the hint!)"}],"answers":[{"tags":[],"owner":{"account_id":5172012,"reputation":233,"user_id":4140219,"display_name":"Mahesh C."},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1433941719,"creation_date":1433941356,"answer_id":30757180,"question_id":28877982,"body_markdown":"I think you can work it out if you use generic WebApplicationInitializer interface rather than using abstract implementation provided by spring - AbstractAnnotationConfigDispatcherServletInitializer. \r\n\r\nThat way, you could create two separate initializers, so you would get different ServletContext on startUp() method and register different AppConfig &amp; dispatcher servlets for each of them.\r\n\r\nOne of such implementing class may look like this:\r\n\r\n\r\n    public class FirstAppInitializer implements WebApplicationInitializer {\r\n     \r\n        public void onStartup(ServletContext container) throws ServletException {\r\n     \r\n            AnnotationConfigWebApplicationContext ctx = new AnnotationConfigWebApplicationContext();\r\n            ctx.register(AppConfig.class);\r\n            ctx.setServletContext(container);\r\n     \r\n            ServletRegistration.Dynamic servlet = container.addServlet(\r\n                    &quot;dispatcher&quot;, new DispatcherServlet(ctx));\r\n     \r\n            servlet.setLoadOnStartup(1);\r\n            servlet.addMapping(&quot;/control&quot;);\r\n    \r\n        }\r\n     \r\n    }\r\n\r\n","title":"Spring Java Config with Multiple Dispatchers","body":"<p>I think you can work it out if you use generic WebApplicationInitializer interface rather than using abstract implementation provided by spring - AbstractAnnotationConfigDispatcherServletInitializer. </p>\n\n<p>That way, you could create two separate initializers, so you would get different ServletContext on startUp() method and register different AppConfig &amp; dispatcher servlets for each of them.</p>\n\n<p>One of such implementing class may look like this:</p>\n\n<pre><code>public class FirstAppInitializer implements WebApplicationInitializer {\n\n    public void onStartup(ServletContext container) throws ServletException {\n\n        AnnotationConfigWebApplicationContext ctx = new AnnotationConfigWebApplicationContext();\n        ctx.register(AppConfig.class);\n        ctx.setServletContext(container);\n\n        ServletRegistration.Dynamic servlet = container.addServlet(\n                \"dispatcher\", new DispatcherServlet(ctx));\n\n        servlet.setLoadOnStartup(1);\n        servlet.addMapping(\"/control\");\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4342327,"reputation":145474,"user_id":3545273,"accept_rate":100,"display_name":"Serge Ballesta"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1433944978,"creation_date":1433944978,"answer_id":30758664,"question_id":28877982,"body_markdown":"Mahesh C. showed the right path, but his implementation is too limited. He is right on one point : you cannot use directly `AbstractAnnotationConfigDispatcherServletInitializer` for multiple dispatcher servlet. But the implementation should :\r\n\r\n- create a root application context\r\n- gives it an initial configuration and say what packages it should scan\r\n- add a ContextListener for it to the servlet context\r\n- then for each dispatcher servlet\r\n    * create a child application context\r\n    * gives it the same an initial configuration and packages to scan\r\n    * create a DispatcherServlet using the context\r\n    * add it to the servlet context\r\n\r\nHere is a more complete implementation :\r\n\r\n    @Override\r\n    public void onStartup(ServletContext servletContext) throws ServletException {\r\n        // root context\r\n        AnnotationConfigWebApplicationContext rootContext =\r\n                new AnnotationConfigWebApplicationContext();\r\n        rootContext.register(RootConfig.class); // configuration class for root context\r\n        rootContext.scan(&quot;...service&quot;, &quot;...dao&quot;); // scan only some packages\r\n        servletContext.addListener(new ContextLoaderListener(rootContext));\r\n        \r\n        // dispatcher servlet 1\r\n        AnnotationConfigWebApplicationContext webContext1 = \r\n                new AnnotationConfigWebApplicationContext();\r\n        webContext1.setParent(rootContext);\r\n        webContext1.register(WebConfig1.class); // configuration class for servlet 1\r\n        webContext1.scan(&quot;...web1&quot;);            // scan some other packages\r\n        ServletRegistration.Dynamic dispatcher1 =\r\n        servletContext.addServlet(&quot;dispatcher1&quot;, new DispatcherServlet(webContext1));\r\n        dispatcher1.setLoadOnStartup(1);\r\n        dispatcher1.addMapping(&quot;/subcontext1&quot;);\r\n\r\n        // dispatcher servlet 2\r\n        ...\r\n    }\r\n\r\nThat way, you have full control on which beans will end in which context, exactly as you would have with XML configuration.","title":"Spring Java Config with Multiple Dispatchers","body":"<p>Mahesh C. showed the right path, but his implementation is too limited. He is right on one point : you cannot use directly <code>AbstractAnnotationConfigDispatcherServletInitializer</code> for multiple dispatcher servlet. But the implementation should :</p>\n\n<ul>\n<li>create a root application context</li>\n<li>gives it an initial configuration and say what packages it should scan</li>\n<li>add a ContextListener for it to the servlet context</li>\n<li>then for each dispatcher servlet\n<ul>\n<li>create a child application context</li>\n<li>gives it the same an initial configuration and packages to scan</li>\n<li>create a DispatcherServlet using the context</li>\n<li>add it to the servlet context</li>\n</ul></li>\n</ul>\n\n<p>Here is a more complete implementation :</p>\n\n<pre><code>@Override\npublic void onStartup(ServletContext servletContext) throws ServletException {\n    // root context\n    AnnotationConfigWebApplicationContext rootContext =\n            new AnnotationConfigWebApplicationContext();\n    rootContext.register(RootConfig.class); // configuration class for root context\n    rootContext.scan(\"...service\", \"...dao\"); // scan only some packages\n    servletContext.addListener(new ContextLoaderListener(rootContext));\n\n    // dispatcher servlet 1\n    AnnotationConfigWebApplicationContext webContext1 = \n            new AnnotationConfigWebApplicationContext();\n    webContext1.setParent(rootContext);\n    webContext1.register(WebConfig1.class); // configuration class for servlet 1\n    webContext1.scan(\"...web1\");            // scan some other packages\n    ServletRegistration.Dynamic dispatcher1 =\n    servletContext.addServlet(\"dispatcher1\", new DispatcherServlet(webContext1));\n    dispatcher1.setLoadOnStartup(1);\n    dispatcher1.addMapping(\"/subcontext1\");\n\n    // dispatcher servlet 2\n    ...\n}\n</code></pre>\n\n<p>That way, you have full control on which beans will end in which context, exactly as you would have with XML configuration.</p>\n"},{"tags":[],"owner":{"account_id":5100890,"reputation":2796,"user_id":4090550,"display_name":"Anil Agrawal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1488231326,"creation_date":1488228212,"answer_id":42495411,"question_id":28877982,"body_markdown":"I faced the same issue. Actually I had a complex configuration with multiple dispatcher servlets, filters and listeners.\r\n\r\nI had a web.xml like below \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;\r\n    \txsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;\r\n    \tversion=&quot;3.1&quot;&gt;\r\n    \t&lt;listener&gt;\r\n    \t\t&lt;listener-class&gt;MyAppContextLoaderListener&lt;/listener-class&gt;\r\n    \t&lt;/listener&gt;\r\n    \t&lt;context-param&gt;\r\n    \t\t&lt;param-name&gt;spring.profiles.active&lt;/param-name&gt;\r\n    \t\t&lt;param-value&gt;${config.environment}&lt;/param-value&gt;\r\n    \t&lt;/context-param&gt;\r\n    \t&lt;context-param&gt;\r\n    \t\t&lt;param-name&gt;contextClass&lt;/param-name&gt;\r\n    \t\t&lt;param-value&gt;org.springframework.web.context.support.AnnotationConfigWebApplicationContext&lt;/param-value&gt;\r\n    \t&lt;/context-param&gt;\r\n    \t&lt;context-param&gt;\r\n    \t\t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n    \t\t&lt;param-value&gt;MyAppConfig&lt;/param-value&gt;\r\n    \t&lt;/context-param&gt;\r\n    \t&lt;servlet&gt;\r\n    \t\t&lt;servlet-name&gt;restEntryPoint&lt;/servlet-name&gt;\r\n    \t\t&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n    \t\t&lt;init-param&gt;\r\n    \t\t\t&lt;param-name&gt;contextClass&lt;/param-name&gt;\r\n    \t\t\t&lt;param-value&gt;org.springframework.web.context.support.AnnotationConfigWebApplicationContext&lt;/param-value&gt;\r\n    \t\t&lt;/init-param&gt;\r\n    \t\t&lt;init-param&gt;\r\n    \t\t\t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n    \t\t\t&lt;param-value&gt;MyRestConfig&lt;/param-value&gt;\r\n    \t\t&lt;/init-param&gt;\r\n    \t\t&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n    \t&lt;/servlet&gt;\r\n    \t&lt;servlet-mapping&gt;\r\n    \t\t&lt;servlet-name&gt;restEntryPoint&lt;/servlet-name&gt;\r\n    \t\t&lt;url-pattern&gt;/api/*&lt;/url-pattern&gt;\r\n    \t&lt;/servlet-mapping&gt;\r\n    \t&lt;servlet&gt;\r\n    \t\t&lt;servlet-name&gt;webSocketEntryPoint&lt;/servlet-name&gt;\r\n    \t\t&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n    \t\t&lt;init-param&gt;\r\n    \t\t\t&lt;param-name&gt;contextClass&lt;/param-name&gt;\r\n    \t\t\t&lt;param-value&gt;org.springframework.web.context.support.AnnotationConfigWebApplicationContext&lt;/param-value&gt;\r\n    \t\t&lt;/init-param&gt;\r\n    \t\t&lt;init-param&gt;\r\n    \t\t\t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n    \t\t\t&lt;param-value&gt;MyWebSocketWebConfig&lt;/param-value&gt;\r\n    \t\t&lt;/init-param&gt;\r\n    \t\t&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n    \t&lt;/servlet&gt;\r\n    \t&lt;servlet-mapping&gt;\r\n    \t\t&lt;servlet-name&gt;webSocketEntryPoint&lt;/servlet-name&gt;\r\n    \t\t&lt;url-pattern&gt;/ws/*&lt;/url-pattern&gt;\r\n    \t&lt;/servlet-mapping&gt;\r\n    \t&lt;servlet&gt;\r\n    \t\t&lt;servlet-name&gt;webEntryPoint&lt;/servlet-name&gt;\r\n    \t\t&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n    \t\t&lt;init-param&gt;\r\n    \t\t\t&lt;param-name&gt;contextClass&lt;/param-name&gt;\r\n    \t\t\t&lt;param-value&gt;org.springframework.web.context.support.AnnotationConfigWebApplicationContext&lt;/param-value&gt;\r\n    \t\t&lt;/init-param&gt;\r\n    \t\t&lt;init-param&gt;\r\n    \t\t\t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n    \t\t\t&lt;param-value&gt;MyWebConfig&lt;/param-value&gt;\r\n    \t\t&lt;/init-param&gt;\r\n    \t\t&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n    \t&lt;/servlet&gt;\r\n    \t&lt;servlet-mapping&gt;\r\n    \t\t&lt;servlet-name&gt;webEntryPoint&lt;/servlet-name&gt;\r\n    \t\t&lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n    \t&lt;/servlet-mapping&gt;\r\n    \t&lt;filter&gt;\r\n    \t\t&lt;filter-name&gt;exceptionHandlerFilter&lt;/filter-name&gt;\r\n    \t\t&lt;filter-class&gt;com.san.common.filter.ExceptionHandlerFilter&lt;/filter-class&gt;\r\n    \t&lt;/filter&gt;\r\n    \t&lt;filter-mapping&gt;\r\n    \t\t&lt;filter-name&gt;exceptionHandlerFilter&lt;/filter-name&gt;\r\n    \t\t&lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n    \t&lt;/filter-mapping&gt;\r\n    \t&lt;filter&gt;\r\n    \t\t&lt;filter-name&gt;validationFilter&lt;/filter-name&gt;\r\n    \t\t&lt;filter-class&gt;MyValidationFilter&lt;/filter-class&gt;\r\n    \t&lt;/filter&gt;\r\n    \t&lt;filter-mapping&gt;\r\n    \t\t&lt;filter-name&gt;validationFilter&lt;/filter-name&gt;\r\n    \t\t&lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n    \t&lt;/filter-mapping&gt;\r\n    \t&lt;filter&gt;\r\n    \t\t&lt;filter-name&gt;lastFilter&lt;/filter-name&gt;\r\n    \t\t&lt;filter-class&gt;MyLastFilter&lt;/filter-class&gt;\r\n    \t&lt;/filter&gt;\r\n    \t&lt;filter-mapping&gt;\r\n    \t\t&lt;filter-name&gt;lastFilter&lt;/filter-name&gt;\r\n    \t\t&lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n    \t&lt;/filter-mapping&gt;\r\n    &lt;/web-app&gt;\r\n\r\nI replaced above web.xml with below java file\r\n\r\n    import java.util.EnumSet;\r\n    \r\n    import javax.servlet.DispatcherType;\r\n    import javax.servlet.FilterRegistration;\r\n    import javax.servlet.ServletContext;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.ServletRegistration;\r\n    \r\n    import org.springframework.web.context.support.AnnotationConfigWebApplicationContext;\r\n    import org.springframework.web.filter.DelegatingFilterProxy;\r\n    import org.springframework.web.servlet.DispatcherServlet;\r\n    import org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;\r\n    \r\n    \r\n    public class AppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\r\n    \r\n    \t@Override\r\n    \tpublic void onStartup(ServletContext servletContext) throws ServletException {\r\n    \r\n    \t\tservletContext.addListener(MyAppContextLoaderListener.class);\r\n    \r\n    \t\tservletContext.setInitParameter(&quot;spring.profiles.active&quot;, &quot;dev&quot;);\r\n    \t\tservletContext.setInitParameter(&quot;contextClass&quot;, &quot;org.springframework.web.context.support.AnnotationConfigWebApplicationContext&quot;);\r\n    \t\tservletContext.setInitParameter(&quot;contextConfigLocation&quot;, &quot;MyAppConfig&quot;);\r\n    \r\n    \t\t// dispatcher servlet for restEntryPoint\r\n    \t\tAnnotationConfigWebApplicationContext restContext = new AnnotationConfigWebApplicationContext();\r\n    \t\trestContext.register(MyRestConfig.class);\r\n    \t\tServletRegistration.Dynamic restEntryPoint = servletContext.addServlet(&quot;restEntryPoint&quot;, new DispatcherServlet(restContext));\r\n    \t\trestEntryPoint.setLoadOnStartup(1);\r\n    \t\trestEntryPoint.addMapping(&quot;/api/*&quot;);\r\n    \r\n    \t\t// dispatcher servlet for webSocketEntryPoint\r\n    \t\tAnnotationConfigWebApplicationContext webSocketContext = new AnnotationConfigWebApplicationContext();\r\n    \t\twebSocketContext.register(MyWebSocketWebConfig.class);\r\n    \t\tServletRegistration.Dynamic webSocketEntryPoint = servletContext.addServlet(&quot;webSocketEntryPoint&quot;, new DispatcherServlet(webSocketContext));\r\n    \t\twebSocketEntryPoint.setLoadOnStartup(1);\r\n    \t\twebSocketEntryPoint.addMapping(&quot;/ws/*&quot;);\r\n    \r\n    \t\t// dispatcher servlet for webEntryPoint\r\n    \t\tAnnotationConfigWebApplicationContext webContext = new AnnotationConfigWebApplicationContext();\r\n    \t\twebContext.register(MyWebConfig.class);\r\n    \t\tServletRegistration.Dynamic webEntryPoint = servletContext.addServlet(&quot;webEntryPoint&quot;, new DispatcherServlet(webContext));\r\n    \t\twebEntryPoint.setLoadOnStartup(1);\r\n    \t\twebEntryPoint.addMapping(&quot;/&quot;);\r\n    \r\n    \t\tFilterRegistration.Dynamic validationFilter = servletContext.addFilter(&quot;validationFilter&quot;, new MyValidationFilter());\r\n    \t\tvalidationFilter.addMappingForUrlPatterns(null, false, &quot;/*&quot;);\r\n    \r\n    \t\tFilterRegistration.Dynamic lastFilter = servletContext.addFilter(&quot;lastFilter&quot;, new MyLastFilter());\r\n    \t\tlastFilter.addMappingForUrlPatterns(null, false, &quot;/*&quot;);\r\n    \r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected Class&lt;?&gt;[] getRootConfigClasses() {\r\n    \t\t// return new Class&lt;?&gt;[] { AppConfig.class };\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected Class&lt;?&gt;[] getServletConfigClasses() {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected String[] getServletMappings() {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Spring Java Config with Multiple Dispatchers","body":"<p>I faced the same issue. Actually I had a complex configuration with multiple dispatcher servlets, filters and listeners.</p>\n\n<p>I had a web.xml like below </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\"\n    xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd\"\n    version=\"3.1\"&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;MyAppContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;spring.profiles.active&lt;/param-name&gt;\n        &lt;param-value&gt;${config.environment}&lt;/param-value&gt;\n    &lt;/context-param&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextClass&lt;/param-name&gt;\n        &lt;param-value&gt;org.springframework.web.context.support.AnnotationConfigWebApplicationContext&lt;/param-value&gt;\n    &lt;/context-param&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;MyAppConfig&lt;/param-value&gt;\n    &lt;/context-param&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;restEntryPoint&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;contextClass&lt;/param-name&gt;\n            &lt;param-value&gt;org.springframework.web.context.support.AnnotationConfigWebApplicationContext&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n            &lt;param-value&gt;MyRestConfig&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;restEntryPoint&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/api/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;webSocketEntryPoint&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;contextClass&lt;/param-name&gt;\n            &lt;param-value&gt;org.springframework.web.context.support.AnnotationConfigWebApplicationContext&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n            &lt;param-value&gt;MyWebSocketWebConfig&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;webSocketEntryPoint&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/ws/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;webEntryPoint&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;contextClass&lt;/param-name&gt;\n            &lt;param-value&gt;org.springframework.web.context.support.AnnotationConfigWebApplicationContext&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n            &lt;param-value&gt;MyWebConfig&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;webEntryPoint&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    &lt;filter&gt;\n        &lt;filter-name&gt;exceptionHandlerFilter&lt;/filter-name&gt;\n        &lt;filter-class&gt;com.san.common.filter.ExceptionHandlerFilter&lt;/filter-class&gt;\n    &lt;/filter&gt;\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;exceptionHandlerFilter&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n    &lt;filter&gt;\n        &lt;filter-name&gt;validationFilter&lt;/filter-name&gt;\n        &lt;filter-class&gt;MyValidationFilter&lt;/filter-class&gt;\n    &lt;/filter&gt;\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;validationFilter&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n    &lt;filter&gt;\n        &lt;filter-name&gt;lastFilter&lt;/filter-name&gt;\n        &lt;filter-class&gt;MyLastFilter&lt;/filter-class&gt;\n    &lt;/filter&gt;\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;lastFilter&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p>I replaced above web.xml with below java file</p>\n\n<pre><code>import java.util.EnumSet;\n\nimport javax.servlet.DispatcherType;\nimport javax.servlet.FilterRegistration;\nimport javax.servlet.ServletContext;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletRegistration;\n\nimport org.springframework.web.context.support.AnnotationConfigWebApplicationContext;\nimport org.springframework.web.filter.DelegatingFilterProxy;\nimport org.springframework.web.servlet.DispatcherServlet;\nimport org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;\n\n\npublic class AppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\n\n    @Override\n    public void onStartup(ServletContext servletContext) throws ServletException {\n\n        servletContext.addListener(MyAppContextLoaderListener.class);\n\n        servletContext.setInitParameter(\"spring.profiles.active\", \"dev\");\n        servletContext.setInitParameter(\"contextClass\", \"org.springframework.web.context.support.AnnotationConfigWebApplicationContext\");\n        servletContext.setInitParameter(\"contextConfigLocation\", \"MyAppConfig\");\n\n        // dispatcher servlet for restEntryPoint\n        AnnotationConfigWebApplicationContext restContext = new AnnotationConfigWebApplicationContext();\n        restContext.register(MyRestConfig.class);\n        ServletRegistration.Dynamic restEntryPoint = servletContext.addServlet(\"restEntryPoint\", new DispatcherServlet(restContext));\n        restEntryPoint.setLoadOnStartup(1);\n        restEntryPoint.addMapping(\"/api/*\");\n\n        // dispatcher servlet for webSocketEntryPoint\n        AnnotationConfigWebApplicationContext webSocketContext = new AnnotationConfigWebApplicationContext();\n        webSocketContext.register(MyWebSocketWebConfig.class);\n        ServletRegistration.Dynamic webSocketEntryPoint = servletContext.addServlet(\"webSocketEntryPoint\", new DispatcherServlet(webSocketContext));\n        webSocketEntryPoint.setLoadOnStartup(1);\n        webSocketEntryPoint.addMapping(\"/ws/*\");\n\n        // dispatcher servlet for webEntryPoint\n        AnnotationConfigWebApplicationContext webContext = new AnnotationConfigWebApplicationContext();\n        webContext.register(MyWebConfig.class);\n        ServletRegistration.Dynamic webEntryPoint = servletContext.addServlet(\"webEntryPoint\", new DispatcherServlet(webContext));\n        webEntryPoint.setLoadOnStartup(1);\n        webEntryPoint.addMapping(\"/\");\n\n        FilterRegistration.Dynamic validationFilter = servletContext.addFilter(\"validationFilter\", new MyValidationFilter());\n        validationFilter.addMappingForUrlPatterns(null, false, \"/*\");\n\n        FilterRegistration.Dynamic lastFilter = servletContext.addFilter(\"lastFilter\", new MyLastFilter());\n        lastFilter.addMappingForUrlPatterns(null, false, \"/*\");\n\n    }\n\n    @Override\n    protected Class&lt;?&gt;[] getRootConfigClasses() {\n        // return new Class&lt;?&gt;[] { AppConfig.class };\n        return null;\n    }\n\n    @Override\n    protected Class&lt;?&gt;[] getServletConfigClasses() {\n        // TODO Auto-generated method stub\n        return null;\n    }\n\n    @Override\n    protected String[] getServletMappings() {\n        // TODO Auto-generated method stub\n        return null;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4932695,"reputation":805,"user_id":3971900,"display_name":"An&#237;bal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663791908,"creation_date":1663622217,"answer_id":73779379,"question_id":28877982,"body_markdown":"It can and should be done using several [AbstractAnnotationConfigDispatcherServletInitializer](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/support/AbstractAnnotationConfigDispatcherServletInitializer.html) classes, one for each dispatcher. @Serge Ballesta&#39;s answer is incorrect on this.\r\n\r\nThe solution is precisely setting rootConfigClasses to null for the 2nd initializer to prevent ContextLoaderListener setting the root context twice, which is the error you are getting. When loading the 2nd DispatcherServlet, it would look for the root context registered in servletContext, so both dispatcher contexts will finally share the same root context without any issue.\r\n\r\nBut you have to take care of:\r\n\r\n- Configuring orders of initializers. If one dispatcher has the default mapping &quot;/&quot;, it should be the last one.\r\n- 2nd and beyond dispatcher initializers to return null in `getRootConfigClasses` to avoid ContextLoaderListener registering root context twice.\r\n- Configuring desired LoadOnStartup order.\r\n\r\nThis fix is required to question code:\r\n\r\n        @Order(1)\r\n        public class MyWebAppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\r\n            ... // This class is ok\r\n        }\r\n\r\n        @Order(2)\r\n        public class AnotherWebAppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\r\n\r\n            // All is ok but this\r\n            @Override\r\n            protected Class&lt;?&gt;[] getRootConfigClasses() {\r\n                // Set to null to prevent registering root context again. Let FrameworkServlet load it from servletContext.\r\n                return null;\r\n            }\r\n\r\n            @Override\r\n            public void customizeRegistration(ServletRegistration.Dynamic registration) {\r\n                registration.setLoadOnStartup(2);\r\n            }\r\n        }\r\n\r\nOr you can do it everything by hand with a single `WebApplicationInitializer` as in the answer of @Serge Ballesta.\r\n\r\nSome additional notes:\r\n\r\n - `ContextListener` is not mandatory, it just initializes the context, this can be either done calling `refresh` method on context.\r\n - If using `WebApplicationInitializer` class, you can have different ones for each dispatcher, ordered using `@Order` annotation.\r\n - The different dispatcher web contexts don&#39;t need to share a root context. This is usual, but you can create completely independent dispatchers with unrelated contexts. For example, if you want to serve a REST api along with static context and want to keep configurations separated.\r\n - When having several dispatchers, it&#39;s recommendable to configure the `RequestMappingHandlerMapping` to pass the full URL to controllers for those without default mapping (&quot;/&quot;), otherwise by default it trims the dispatcher mapping part. This will simplify you tests. Spring-boot does this automatically, or if you don&#39;t use it, it can be done with a `WebMvcConfigurer`:\r\n\r\n        @Configuration\r\n        @EnableWebMvc\r\n        public class WebConfiguration implements WebMvcConfigurer {\r\n\r\n            @Override\r\n            public void configurePathMatch(PathMatchConfigurer configurer) {\r\n                // Configure controller mappings to match with full path\r\n                UrlPathHelper urlPathHelper = new UrlPathHelper();\r\n                urlPathHelper.setAlwaysUseFullPath(true);\r\n                configurer.setUrlPathHelper(urlPathHelper);\r\n            }\r\n        }\r\n\r\n  - If using the abstract initializer class, you can prevent ContextLoaderListener to be registered at all, overwriting `registerContextLoaderListener` method and registering it by hand in other initializer. Although it&#39;s usually worth it to let the 1st initializer to do it. But this can be useful for example if you have 2 dispatchers with different parent contexts and need to avoid registering both of them as root contexts.\r\n\r\n**Spring security**\r\n\r\nAn important question when having multiple dispatchers is Spring Security configuration. This can be done adding a class extending [AbstractSecurityWebApplicationInitializer](https://docs.spring.io/spring-security/site/docs/5.7.x/api/org/springframework/security/web/context/AbstractSecurityWebApplicationInitializer.html) to your context. It registers a filter called `DelegatingFilterProxy` after the dispatcher configuration mapped to &quot;/*&quot;. This filter looks for a `securityFilterChain` bean in root context by default. This bean is added to context when using `@EnableWebSecurity` annotation which is usually located in root context so you can share the security config between different dispatchers. But you can also put security config in one dispatcher context and tell the filter to load it with init-parameter `contextAttribute`.\r\n\r\nYou can have one shared security configuration with beans `WebSecurityCustomizer` &amp; `SecurityFilterChain` (from Spring Security 5.7) or extending the previous `WebSecurityConfigurer` class. Or you can have different beans for each dispatcher, configuring several *web* and *http* elements.\r\n\r\nOr even you can have separated configurations for different dispatchers by registering a filter for each one. Filters must have different names, and name is hardcoded in `AbstractSecurityWebApplicationInitializer` class (up to spring security 5.7). So you can create:\r\n- one of the filters with a standard `AbstractSecurityWebApplicationInitializer` with last order.\r\n- the other one using the *onStartup* method of you other dispatcher so you can set a different name. Like this:\r\n\r\n        @Override\r\n        public void onStartup(ServletContext servletContext) throws ServletException {\r\n            super.onStartup(servletContext);\r\n\r\n            // Register DelegatingFilterProxy for Spring Security. Filter names cannot repeat.\r\n            // It can not be used here AbstractSecurityWebApplicationInitializer because the filter name is hardcoded.\r\n            final String SERVLET_CONTEXT_PREFIX = &quot;org.springframework.web.servlet.FrameworkServlet.CONTEXT.&quot;;\r\n\r\n            FilterRegistration.Dynamic filterRegistration = servletContext.addFilter(&quot;springSecurityFilterChain2&quot;, DelegatingFilterProxy.class);\r\n            filterRegistration.addMappingForUrlPatterns(null, false, getServletMappings()[0]);\r\n            // Spring security bean is in web app context.\r\n            filterRegistration.setInitParameter(&quot;contextAttribute&quot;, SERVLET_CONTEXT_PREFIX + getServletName());\r\n            // TargetBeanName by default is filter name, so change it to Spring Security standard one\r\n            filterRegistration.setInitParameter(&quot;targetBeanName&quot;, AbstractSecurityWebApplicationInitializer.DEFAULT_FILTER_NAME);\r\n        }\r\n\r\nAdditional references:\r\n- [Understanding Spring Web Contexts](https://www.baeldung.com/spring-web-contexts)","title":"Spring Java Config with Multiple Dispatchers","body":"<p>It can and should be done using several <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/support/AbstractAnnotationConfigDispatcherServletInitializer.html\" rel=\"nofollow noreferrer\">AbstractAnnotationConfigDispatcherServletInitializer</a> classes, one for each dispatcher. @Serge Ballesta's answer is incorrect on this.</p>\n<p>The solution is precisely setting rootConfigClasses to null for the 2nd initializer to prevent ContextLoaderListener setting the root context twice, which is the error you are getting. When loading the 2nd DispatcherServlet, it would look for the root context registered in servletContext, so both dispatcher contexts will finally share the same root context without any issue.</p>\n<p>But you have to take care of:</p>\n<ul>\n<li>Configuring orders of initializers. If one dispatcher has the default mapping &quot;/&quot;, it should be the last one.</li>\n<li>2nd and beyond dispatcher initializers to return null in <code>getRootConfigClasses</code> to avoid ContextLoaderListener registering root context twice.</li>\n<li>Configuring desired LoadOnStartup order.</li>\n</ul>\n<p>This fix is required to question code:</p>\n<pre><code>    @Order(1)\n    public class MyWebAppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\n        ... // This class is ok\n    }\n\n    @Order(2)\n    public class AnotherWebAppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\n\n        // All is ok but this\n        @Override\n        protected Class&lt;?&gt;[] getRootConfigClasses() {\n            // Set to null to prevent registering root context again. Let FrameworkServlet load it from servletContext.\n            return null;\n        }\n\n        @Override\n        public void customizeRegistration(ServletRegistration.Dynamic registration) {\n            registration.setLoadOnStartup(2);\n        }\n    }\n</code></pre>\n<p>Or you can do it everything by hand with a single <code>WebApplicationInitializer</code> as in the answer of @Serge Ballesta.</p>\n<p>Some additional notes:</p>\n<ul>\n<li><p><code>ContextListener</code> is not mandatory, it just initializes the context, this can be either done calling <code>refresh</code> method on context.</p>\n</li>\n<li><p>If using <code>WebApplicationInitializer</code> class, you can have different ones for each dispatcher, ordered using <code>@Order</code> annotation.</p>\n</li>\n<li><p>The different dispatcher web contexts don't need to share a root context. This is usual, but you can create completely independent dispatchers with unrelated contexts. For example, if you want to serve a REST api along with static context and want to keep configurations separated.</p>\n</li>\n<li><p>When having several dispatchers, it's recommendable to configure the <code>RequestMappingHandlerMapping</code> to pass the full URL to controllers for those without default mapping (&quot;/&quot;), otherwise by default it trims the dispatcher mapping part. This will simplify you tests. Spring-boot does this automatically, or if you don't use it, it can be done with a <code>WebMvcConfigurer</code>:</p>\n<pre><code> @Configuration\n @EnableWebMvc\n public class WebConfiguration implements WebMvcConfigurer {\n\n     @Override\n     public void configurePathMatch(PathMatchConfigurer configurer) {\n         // Configure controller mappings to match with full path\n         UrlPathHelper urlPathHelper = new UrlPathHelper();\n         urlPathHelper.setAlwaysUseFullPath(true);\n         configurer.setUrlPathHelper(urlPathHelper);\n     }\n }\n</code></pre>\n</li>\n<li><p>If using the abstract initializer class, you can prevent ContextLoaderListener to be registered at all, overwriting <code>registerContextLoaderListener</code> method and registering it by hand in other initializer. Although it's usually worth it to let the 1st initializer to do it. But this can be useful for example if you have 2 dispatchers with different parent contexts and need to avoid registering both of them as root contexts.</p>\n</li>\n</ul>\n<p><strong>Spring security</strong></p>\n<p>An important question when having multiple dispatchers is Spring Security configuration. This can be done adding a class extending <a href=\"https://docs.spring.io/spring-security/site/docs/5.7.x/api/org/springframework/security/web/context/AbstractSecurityWebApplicationInitializer.html\" rel=\"nofollow noreferrer\">AbstractSecurityWebApplicationInitializer</a> to your context. It registers a filter called <code>DelegatingFilterProxy</code> after the dispatcher configuration mapped to &quot;/*&quot;. This filter looks for a <code>securityFilterChain</code> bean in root context by default. This bean is added to context when using <code>@EnableWebSecurity</code> annotation which is usually located in root context so you can share the security config between different dispatchers. But you can also put security config in one dispatcher context and tell the filter to load it with init-parameter <code>contextAttribute</code>.</p>\n<p>You can have one shared security configuration with beans <code>WebSecurityCustomizer</code> &amp; <code>SecurityFilterChain</code> (from Spring Security 5.7) or extending the previous <code>WebSecurityConfigurer</code> class. Or you can have different beans for each dispatcher, configuring several <em>web</em> and <em>http</em> elements.</p>\n<p>Or even you can have separated configurations for different dispatchers by registering a filter for each one. Filters must have different names, and name is hardcoded in <code>AbstractSecurityWebApplicationInitializer</code> class (up to spring security 5.7). So you can create:</p>\n<ul>\n<li><p>one of the filters with a standard <code>AbstractSecurityWebApplicationInitializer</code> with last order.</p>\n</li>\n<li><p>the other one using the <em>onStartup</em> method of you other dispatcher so you can set a different name. Like this:</p>\n<pre><code>  @Override\n  public void onStartup(ServletContext servletContext) throws ServletException {\n      super.onStartup(servletContext);\n\n      // Register DelegatingFilterProxy for Spring Security. Filter names cannot repeat.\n      // It can not be used here AbstractSecurityWebApplicationInitializer because the filter name is hardcoded.\n      final String SERVLET_CONTEXT_PREFIX = &quot;org.springframework.web.servlet.FrameworkServlet.CONTEXT.&quot;;\n\n      FilterRegistration.Dynamic filterRegistration = servletContext.addFilter(&quot;springSecurityFilterChain2&quot;, DelegatingFilterProxy.class);\n      filterRegistration.addMappingForUrlPatterns(null, false, getServletMappings()[0]);\n      // Spring security bean is in web app context.\n      filterRegistration.setInitParameter(&quot;contextAttribute&quot;, SERVLET_CONTEXT_PREFIX + getServletName());\n      // TargetBeanName by default is filter name, so change it to Spring Security standard one\n      filterRegistration.setInitParameter(&quot;targetBeanName&quot;, AbstractSecurityWebApplicationInitializer.DEFAULT_FILTER_NAME);\n  }\n</code></pre>\n</li>\n</ul>\n<p>Additional references:</p>\n<ul>\n<li><a href=\"https://www.baeldung.com/spring-web-contexts\" rel=\"nofollow noreferrer\">Understanding Spring Web Contexts</a></li>\n</ul>\n"}],"owner":{"account_id":1423046,"reputation":183,"user_id":1347263,"display_name":"delimiter"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16785,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":30758664,"answer_count":4,"score":12,"last_activity_date":1663791908,"creation_date":1425558818,"question_id":28877982,"body_markdown":"I&#39;ve some experience Spring now and also have some pure java config web-apps in use. However, these are usually based on a quiet simple setup:\r\n\r\n* application config for services / repositories\r\n* dispatcher config for one dispatcher (and some controllers)\r\n* (optional) spring security to secure the access\r\n\r\nFor my current project I need to have separate dispatcher contexts with different configuration. That&#39;s not a problem with the XML based configuration as we have a dedicated ContextLoaderListener that&#39;s independent from Dispatcher Configuration. But with java config I&#39;m not sure if what I&#39;m doing is fine so far ;)\r\n\r\nHere&#39;s a common DispatcherConfig:\r\n\r\n    public class MyWebAppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\r\n    \r\n      @Override\r\n      protected Class&lt;?&gt;[] getRootConfigClasses() {\r\n        return new class[]{MyAppConfig.class};\r\n      }\r\n\r\n      @Override\r\n      protected Class&lt;?&gt;[] getServletConfigClasses() {\r\n        return new Class[]{MyDispatcherConfig.class};\r\n      }\r\n    \r\n      @Override\r\n      protected String[] getServletMappings() {\r\n        return new String[]{&quot;/mymapping/*&quot;};\r\n      }\r\n\r\n      @Override\r\n      protected String getServletName() {\r\n        return &quot;myservlet&quot;;\r\n      }\r\n    }\r\n\r\nAs said, I need a second (third, ...) dispatcher with another mapping (and view resolvers). So, I copied the config and added for both getServletName() (otherwise both will be named as &#39;dispatcher&#39; which will cause errors). The second config was looking like that:\r\n\r\n    public class AnotherWebAppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\r\n    \r\n      @Override\r\n      protected Class&lt;?&gt;[] getRootConfigClasses() {\r\n        return new class[]{MyAppConfig.class};\r\n      }\r\n\r\n      @Override\r\n      protected Class&lt;?&gt;[] getServletConfigClasses() {\r\n        return new Class[]{AnotherDispatcherConfig.class};\r\n      }\r\n    \r\n      @Override\r\n      protected String[] getServletMappings() {\r\n        return new String[]{&quot;/another_mapping/*&quot;};\r\n      }\r\n\r\n      @Override\r\n      protected String getServletName() {\r\n        return &quot;anotherservlet&quot;;\r\n      }\r\n    }\r\n\r\nWhen I use it like this, starting application results in a problem with ContextLoaderListener:\r\n\r\n    java.lang.IllegalStateException: Cannot initialize context because there is already a root application context present - check whether you have multiple ContextLoader* definitions in your web.xml!\r\n        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:277)\r\n    ...\r\n\r\nSo I removed the second **MyAppConfig.class** return from one of the \r\n*AbstractAnnotationConfigDispatcherServletInitializer* and it works fine. However, that doesn&#39;t feel to be the right way ;)\r\n\r\nFor my understanding: should all DispatcherConfig be handled within one *AbstractAnnotationConfigDispatcherServletInitializer* or should I separate them as I did? I tried to configure them in one class but then my config was totally mixed (so I believe that&#39;s not the desired way).\r\n\r\nHow do you implement such a case? Is it possible to set the *ContextLoaderListener* in java config outside of the *AbstractAnnotationConfigDispatcherServletInitializer*? Or should I create a *DefaultServlet* which has only the root config? What about implementing the base interface of that configuration *WebApplicationInitializer*?","title":"Spring Java Config with Multiple Dispatchers","body":"<p>I've some experience Spring now and also have some pure java config web-apps in use. However, these are usually based on a quiet simple setup:</p>\n\n<ul>\n<li>application config for services / repositories</li>\n<li>dispatcher config for one dispatcher (and some controllers)</li>\n<li>(optional) spring security to secure the access</li>\n</ul>\n\n<p>For my current project I need to have separate dispatcher contexts with different configuration. That's not a problem with the XML based configuration as we have a dedicated ContextLoaderListener that's independent from Dispatcher Configuration. But with java config I'm not sure if what I'm doing is fine so far ;)</p>\n\n<p>Here's a common DispatcherConfig:</p>\n\n<pre><code>public class MyWebAppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\n\n  @Override\n  protected Class&lt;?&gt;[] getRootConfigClasses() {\n    return new class[]{MyAppConfig.class};\n  }\n\n  @Override\n  protected Class&lt;?&gt;[] getServletConfigClasses() {\n    return new Class[]{MyDispatcherConfig.class};\n  }\n\n  @Override\n  protected String[] getServletMappings() {\n    return new String[]{\"/mymapping/*\"};\n  }\n\n  @Override\n  protected String getServletName() {\n    return \"myservlet\";\n  }\n}\n</code></pre>\n\n<p>As said, I need a second (third, ...) dispatcher with another mapping (and view resolvers). So, I copied the config and added for both getServletName() (otherwise both will be named as 'dispatcher' which will cause errors). The second config was looking like that:</p>\n\n<pre><code>public class AnotherWebAppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\n\n  @Override\n  protected Class&lt;?&gt;[] getRootConfigClasses() {\n    return new class[]{MyAppConfig.class};\n  }\n\n  @Override\n  protected Class&lt;?&gt;[] getServletConfigClasses() {\n    return new Class[]{AnotherDispatcherConfig.class};\n  }\n\n  @Override\n  protected String[] getServletMappings() {\n    return new String[]{\"/another_mapping/*\"};\n  }\n\n  @Override\n  protected String getServletName() {\n    return \"anotherservlet\";\n  }\n}\n</code></pre>\n\n<p>When I use it like this, starting application results in a problem with ContextLoaderListener:</p>\n\n<pre><code>java.lang.IllegalStateException: Cannot initialize context because there is already a root application context present - check whether you have multiple ContextLoader* definitions in your web.xml!\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:277)\n...\n</code></pre>\n\n<p>So I removed the second <strong>MyAppConfig.class</strong> return from one of the \n<em>AbstractAnnotationConfigDispatcherServletInitializer</em> and it works fine. However, that doesn't feel to be the right way ;)</p>\n\n<p>For my understanding: should all DispatcherConfig be handled within one <em>AbstractAnnotationConfigDispatcherServletInitializer</em> or should I separate them as I did? I tried to configure them in one class but then my config was totally mixed (so I believe that's not the desired way).</p>\n\n<p>How do you implement such a case? Is it possible to set the <em>ContextLoaderListener</em> in java config outside of the <em>AbstractAnnotationConfigDispatcherServletInitializer</em>? Or should I create a <em>DefaultServlet</em> which has only the root config? What about implementing the base interface of that configuration <em>WebApplicationInitializer</em>?</p>\n"},{"tags":["java","amazon-web-services","amazon-sqs","aws-cdk","dlq"],"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1663792659,"post_id":73806505,"comment_id":130325708,"body_markdown":"there&#39;s an example here https://docs.aws.amazon.com/cdk/api/v2/java/index.html?software/amazon/awscdk/services/sqs/DeadLetterQueue.html - but it looks pretty like your code. Are you sure you actually receive messages unsuccessfully in &quot;queue&quot;?","body":"there&#39;s an example here <a href=\"https://docs.aws.amazon.com/cdk/api/v2/java/index.html?software/amazon/awscdk/services/sqs/DeadLetterQueue.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/cdk/api/v2/java/index.html?software/amaz&zwnj;&#8203;on/&hellip;</a> - but it looks pretty like your code. Are you sure you actually receive messages unsuccessfully in &quot;queue&quot;?"},{"owner":{"account_id":15823346,"reputation":79,"user_id":11417051,"display_name":"Faruk Ada"},"score":0,"creation_date":1664033282,"post_id":73806505,"comment_id":130381121,"body_markdown":"You need to use:\nDeadLetterQueue deadLetterQueue = DeadLetterQueue.builder()\nThe deadletterqueue is a different kind of sqs and not the same as the default sqs queue","body":"You need to use: DeadLetterQueue deadLetterQueue = DeadLetterQueue.builder() The deadletterqueue is a different kind of sqs and not the same as the default sqs queue"}],"owner":{"account_id":1619564,"reputation":9583,"user_id":1496443,"accept_rate":100,"display_name":"Caesar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":826,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663791551,"creation_date":1663791551,"question_id":73806505,"body_markdown":"I&#39;m using Java CDK to create a queue and a dead-letter-queue (DLQ) in AWS. \r\n\r\nIn my DLQ, I need to set the `Redrive allow policy` to enabled so that it can be used as DLQ, but I can&#39;t find the function in CDK that allows me to set it.\r\n\r\n\r\n\r\n```\r\n        Queue queueDlq = Queue.Builder.create(this, &quot;queue-dlq&quot;)\r\n                .build();\r\n        Queue queue = Queue.Builder.create(this, &quot;queue&quot;)\r\n                .deadLetterQueue(DeadLetterQueue.builder()\r\n                        .queue(queueDlq)\r\n                        .maxReceiveCount(5)\r\n                        .build())\r\n                .build();\r\n```\r\n\r\nWhen I deploy this code, both queues are created. The main queue has the Dead-letter queue set correctly, but the DLQ doesn&#39;t have Redrive allow policy enabled to allow it to receive the messages.\r\n\r\n","title":"How to set the SQS redrive allow policy in Java CDK","body":"<p>I'm using Java CDK to create a queue and a dead-letter-queue (DLQ) in AWS.</p>\n<p>In my DLQ, I need to set the <code>Redrive allow policy</code> to enabled so that it can be used as DLQ, but I can't find the function in CDK that allows me to set it.</p>\n<pre><code>        Queue queueDlq = Queue.Builder.create(this, &quot;queue-dlq&quot;)\n                .build();\n        Queue queue = Queue.Builder.create(this, &quot;queue&quot;)\n                .deadLetterQueue(DeadLetterQueue.builder()\n                        .queue(queueDlq)\n                        .maxReceiveCount(5)\n                        .build())\n                .build();\n</code></pre>\n<p>When I deploy this code, both queues are created. The main queue has the Dead-letter queue set correctly, but the DLQ doesn't have Redrive allow policy enabled to allow it to receive the messages.</p>\n"},{"tags":["java","android","tap","showcaseview"],"comments":[{"owner":{"account_id":10358025,"reputation":2474,"user_id":7639296,"accept_rate":75,"display_name":"Dr Mido"},"score":0,"creation_date":1663806166,"post_id":73806324,"comment_id":130328153,"body_markdown":"you can try the methods in this [question](https://stackoverflow.com/a/30274315/4205927)","body":"you can try the methods in this <a href=\"https://stackoverflow.com/a/30274315/4205927\">question</a>"},{"owner":{"account_id":17665258,"reputation":3,"user_id":12822794,"display_name":"سامي عبدالله علي المصباحي"},"score":0,"creation_date":1663877103,"post_id":73806324,"comment_id":130349066,"body_markdown":"My sincere appreciation to you, it has been resolved","body":"My sincere appreciation to you, it has been resolved"}],"owner":{"account_id":17665258,"reputation":3,"user_id":12822794,"display_name":"سامي عبدالله علي المصباحي"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663791387,"creation_date":1663790424,"question_id":73806324,"body_markdown":"I have this tab target and it plays sequentially, please I want to display it as only once during the first time using the application, please explain how to do this\r\n\r\n    new TapTargetSequence(this)\r\n            .targets(\r\n                    TapTarget.forView(findViewById(R.id.imgView1),\r\n                                    &quot;Title 1&quot;, &quot;This is image 1 click&quot;).tintTarget(false)\r\n                            .outerCircleColor(R.color.dark_blue)\r\n                            .cancelable(true),\r\n                    TapTarget.forView(findViewById(R.id.imgView2),\r\n                                    &quot;Title 2&quot;, &quot;This is image 2 click&quot;).tintTarget(false)\r\n                            .outerCircleColor(R.color.dark_blue)\r\n                            .cancelable(true),\r\n                    TapTarget.forView(findViewById(R.id.imgView3),\r\n                                    &quot;Title 3&quot;, &quot;This is image 3 click&quot;).tintTarget(false)\r\n                            .outerCircleColor(R.color.dark_blue)\r\n                            .cancelable(true))\r\n            .start();","title":"Open TapTargetSequence only on first use of app","body":"<p>I have this tab target and it plays sequentially, please I want to display it as only once during the first time using the application, please explain how to do this</p>\n<pre><code>new TapTargetSequence(this)\n        .targets(\n                TapTarget.forView(findViewById(R.id.imgView1),\n                                &quot;Title 1&quot;, &quot;This is image 1 click&quot;).tintTarget(false)\n                        .outerCircleColor(R.color.dark_blue)\n                        .cancelable(true),\n                TapTarget.forView(findViewById(R.id.imgView2),\n                                &quot;Title 2&quot;, &quot;This is image 2 click&quot;).tintTarget(false)\n                        .outerCircleColor(R.color.dark_blue)\n                        .cancelable(true),\n                TapTarget.forView(findViewById(R.id.imgView3),\n                                &quot;Title 3&quot;, &quot;This is image 3 click&quot;).tintTarget(false)\n                        .outerCircleColor(R.color.dark_blue)\n                        .cancelable(true))\n        .start();\n</code></pre>\n"},{"tags":["java","annotations","jax-rs","quarkus","qualifiers"],"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1663793768,"post_id":73806452,"comment_id":130325993,"body_markdown":"Did you want JAX-RS [Name Binding instead](https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest/filters-and-interceptors.html#d0e10054)?","body":"Did you want JAX-RS <a href=\"https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest/filters-and-interceptors.html#d0e10054\" rel=\"nofollow noreferrer\">Name Binding instead</a>?"},{"owner":{"account_id":385127,"reputation":6284,"user_id":742081,"display_name":"Ladicek"},"score":2,"creation_date":1663833326,"post_id":73806452,"comment_id":130333217,"body_markdown":"Just to explain the error message: JAX-RS resource classes are always beans in Quarkus, and if a bean&#39;s method is annotated with a qualifier, Quarkus considers it a producer method (even if it is not annotated `@Produces`). Parameters of producer methods are injection points, so Quarkus attempts to resolve a bean of type `String` and fails. That&#39;s what the failure means. Your annotation isn&#39;t really a qualifier, because it is not used to qualify any beans.","body":"Just to explain the error message: JAX-RS resource classes are always beans in Quarkus, and if a bean&#39;s method is annotated with a qualifier, Quarkus considers it a producer method (even if it is not annotated <code>@Produces</code>). Parameters of producer methods are injection points, so Quarkus attempts to resolve a bean of type <code>String</code> and fails. That&#39;s what the failure means. Your annotation isn&#39;t really a qualifier, because it is not used to qualify any beans."},{"owner":{"account_id":131613,"reputation":11356,"user_id":331747,"accept_rate":78,"display_name":"Shadowman"},"score":0,"creation_date":1663851128,"post_id":73806452,"comment_id":130339750,"body_markdown":"@Ladicek that makes sense.  It would also explain why I didn’t see this issue running the code under Wildfly, only when migrating to Quarkus.  Thanks for the explanation!","body":"@Ladicek that makes sense.  It would also explain why I didn’t see this issue running the code under Wildfly, only when migrating to Quarkus.  Thanks for the explanation!"}],"owner":{"account_id":131613,"reputation":11356,"user_id":331747,"accept_rate":78,"display_name":"Shadowman"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":663,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1663791250,"creation_date":1663791250,"question_id":73806452,"body_markdown":"I am writing a web app using the Quarkus framework, v2.12.3.  I have a simple JAX-RS class and method that look something like this:\r\n\r\n    \t@Path(&quot;/{token&quot;)\r\n    \t@GET\r\n        @Produces({&quot;text/plan&quot;}\r\n    \tpublic Response processRequest(@PathParam(&quot;token&quot;) String enrollmentToken) {\r\n       ...snip...\r\n    }\r\n\r\nThe request, however, contains a digital signature, so I have created a JAX-RS `ContainerRequestFilter` to validate the signature before passing the request along to `processRequest`.  Since not all of my methods will have signed requests, I created a `Qualifier` annotation that my filter uses to determine if the signature should be validated.  My annotation looks like this:\r\n\r\n    @Qualifier\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target({ ElementType.METHOD, ElementType.TYPE })\r\n    public @interface SignedRequest {\r\n    \r\n    }\r\n\r\nSo, I update my JAX-RS method to include the `Qualifier`:\r\n\r\n    \t@Path(&quot;/{token&quot;)\r\n    \t@GET\r\n        @Produces({&quot;text/plan&quot;}\r\n        @SignedRequest\r\n    \tpublic Response processRequest(@PathParam(&quot;token&quot;) String enrollmentToken) {\r\n       ...snip...\r\n    }\r\n\r\nHowever, once I do this I get the following `Exception` when trying to build the class:\r\n\r\n    [ERROR] Failed to execute goal io.quarkus:quarkus-maven-plugin:2.12.3.Final:build (default) on project myproj: Failed to build quarkus application: io.quarkus.builder.BuildException: Build failure: Build failed due to errors\r\n    [ERROR] \t[error]: Build step io.quarkus.arc.deployment.ArcProcessor#validate threw an exception: javax.enterprise.inject.spi.DeploymentException: javax.enterprise.inject.UnsatisfiedResolutionException: Unsatisfied dependency for type java.lang.String and qualifiers [@Default]\r\n    [ERROR] \t- java member: com.myproj.MyService#processRequest():enrollmentToken\r\n    [ERROR] \t- declared on PRODUCER METHOD bean [types=[javax.ws.rs.core.Response, java.lang.AutoCloseable, java.lang.Object], qualifiers=[@SignedRequest, @Any], target=javax.ws.rs.core.Response processRequest(java.lang.String enrollmentToken), declaringBean=com.myproj.MyService]\r\n    [ERROR] \tThe following beans match by type, but none have matching qualifiers:\r\n    [ERROR] \t\t- Bean [class=java.lang.String, qualifiers=[@ConfigProperty, @Any]]\r\n    [ERROR] \t\t- Bean [class=java.lang.String, qualifiers=[@Any, @Claim(value = &quot;&quot;)]]\r\n    [ERROR] \tat io.quarkus.arc.processor.BeanDeployment.processErrors(BeanDeployment.java:1215)\r\n    [ERROR] \tat io.quarkus.arc.processor.BeanDeployment.init(BeanDeployment.java:275)\r\n    [ERROR] \tat io.quarkus.arc.processor.BeanProcessor.initialize(BeanProcessor.java:140)\r\n    [ERROR] \tat io.quarkus.arc.deployment.ArcProcessor.validate(ArcProcessor.java:496)\r\n    [ERROR] \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    [ERROR] \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    [ERROR] \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    [ERROR] \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    [ERROR] \tat io.quarkus.deployment.ExtensionLoader$3.execute(ExtensionLoader.java:909)\r\n    [ERROR] \tat io.quarkus.builder.BuildContext.run(BuildContext.java:281)\r\n    [ERROR] \tat org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\r\n    [ERROR] \tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\r\n    [ERROR] \tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\r\n    [ERROR] \tat java.base/java.lang.Thread.run(Thread.java:834)\r\n    [ERROR] \tat org.jboss.threads.JBossThread.run(JBossThread.java:501)\r\n    [ERROR] Caused by: javax.enterprise.inject.UnsatisfiedResolutionException: Unsatisfied dependency for type java.lang.String and qualifiers [@Default]\r\n    [ERROR] \t- java member: com.myproj.MyService#processRequest():enrollmentToken\r\n    [ERROR] \t- declared on PRODUCER METHOD bean [types=[javax.ws.rs.core.Response, java.lang.AutoCloseable, java.lang.Object], qualifiers=[@SignedRequest, @Any], target=javax.ws.rs.core.Response processRequest(java.lang.String enrollmentToken), declaringBean=com.myproj.MyService]\r\n    [ERROR] \tThe following beans match by type, but none have matching qualifiers:\r\n    [ERROR] \t\t- Bean [class=java.lang.String, qualifiers=[@ConfigProperty, @Any]]\r\n    [ERROR] \t\t- Bean [class=java.lang.String, qualifiers=[@Any, @Claim(value = &quot;&quot;)]]\r\n    [ERROR] \tat io.quarkus.arc.processor.Beans.resolveInjectionPoint(Beans.java:411)\r\n    [ERROR] \tat io.quarkus.arc.processor.BeanInfo.init(BeanInfo.java:536)\r\n    [ERROR] \tat io.quarkus.arc.processor.BeanDeployment.init(BeanDeployment.java:263)\r\n    [ERROR] \t... 13 more\r\n    [ERROR] -&gt; [Help 1]\r\n\r\nIf I remove the `@SignedRequest` annotation, everything builds properly again.  I&#39;ve also found that if I remove the `enrollmentToken` method parameter everything builds properly as well.  It&#39;s the combination of the `@SignedRequest` annotation and a method parameter that causes problems.\r\n\r\nCan anyone shed some light on what&#39;s happening here?  I&#39;ve never run into this issue before and am stumped.","title":"Quarkus and JAX-RS: Exception with Qualifier Annotation on Method?","body":"<p>I am writing a web app using the Quarkus framework, v2.12.3.  I have a simple JAX-RS class and method that look something like this:</p>\n<pre><code>    @Path(&quot;/{token&quot;)\n    @GET\n    @Produces({&quot;text/plan&quot;}\n    public Response processRequest(@PathParam(&quot;token&quot;) String enrollmentToken) {\n   ...snip...\n}\n</code></pre>\n<p>The request, however, contains a digital signature, so I have created a JAX-RS <code>ContainerRequestFilter</code> to validate the signature before passing the request along to <code>processRequest</code>.  Since not all of my methods will have signed requests, I created a <code>Qualifier</code> annotation that my filter uses to determine if the signature should be validated.  My annotation looks like this:</p>\n<pre><code>@Qualifier\n@Retention(RetentionPolicy.RUNTIME)\n@Target({ ElementType.METHOD, ElementType.TYPE })\npublic @interface SignedRequest {\n\n}\n</code></pre>\n<p>So, I update my JAX-RS method to include the <code>Qualifier</code>:</p>\n<pre><code>    @Path(&quot;/{token&quot;)\n    @GET\n    @Produces({&quot;text/plan&quot;}\n    @SignedRequest\n    public Response processRequest(@PathParam(&quot;token&quot;) String enrollmentToken) {\n   ...snip...\n}\n</code></pre>\n<p>However, once I do this I get the following <code>Exception</code> when trying to build the class:</p>\n<pre><code>[ERROR] Failed to execute goal io.quarkus:quarkus-maven-plugin:2.12.3.Final:build (default) on project myproj: Failed to build quarkus application: io.quarkus.builder.BuildException: Build failure: Build failed due to errors\n[ERROR]     [error]: Build step io.quarkus.arc.deployment.ArcProcessor#validate threw an exception: javax.enterprise.inject.spi.DeploymentException: javax.enterprise.inject.UnsatisfiedResolutionException: Unsatisfied dependency for type java.lang.String and qualifiers [@Default]\n[ERROR]     - java member: com.myproj.MyService#processRequest():enrollmentToken\n[ERROR]     - declared on PRODUCER METHOD bean [types=[javax.ws.rs.core.Response, java.lang.AutoCloseable, java.lang.Object], qualifiers=[@SignedRequest, @Any], target=javax.ws.rs.core.Response processRequest(java.lang.String enrollmentToken), declaringBean=com.myproj.MyService]\n[ERROR]     The following beans match by type, but none have matching qualifiers:\n[ERROR]         - Bean [class=java.lang.String, qualifiers=[@ConfigProperty, @Any]]\n[ERROR]         - Bean [class=java.lang.String, qualifiers=[@Any, @Claim(value = &quot;&quot;)]]\n[ERROR]     at io.quarkus.arc.processor.BeanDeployment.processErrors(BeanDeployment.java:1215)\n[ERROR]     at io.quarkus.arc.processor.BeanDeployment.init(BeanDeployment.java:275)\n[ERROR]     at io.quarkus.arc.processor.BeanProcessor.initialize(BeanProcessor.java:140)\n[ERROR]     at io.quarkus.arc.deployment.ArcProcessor.validate(ArcProcessor.java:496)\n[ERROR]     at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n[ERROR]     at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n[ERROR]     at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n[ERROR]     at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n[ERROR]     at io.quarkus.deployment.ExtensionLoader$3.execute(ExtensionLoader.java:909)\n[ERROR]     at io.quarkus.builder.BuildContext.run(BuildContext.java:281)\n[ERROR]     at org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\n[ERROR]     at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\n[ERROR]     at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\n[ERROR]     at java.base/java.lang.Thread.run(Thread.java:834)\n[ERROR]     at org.jboss.threads.JBossThread.run(JBossThread.java:501)\n[ERROR] Caused by: javax.enterprise.inject.UnsatisfiedResolutionException: Unsatisfied dependency for type java.lang.String and qualifiers [@Default]\n[ERROR]     - java member: com.myproj.MyService#processRequest():enrollmentToken\n[ERROR]     - declared on PRODUCER METHOD bean [types=[javax.ws.rs.core.Response, java.lang.AutoCloseable, java.lang.Object], qualifiers=[@SignedRequest, @Any], target=javax.ws.rs.core.Response processRequest(java.lang.String enrollmentToken), declaringBean=com.myproj.MyService]\n[ERROR]     The following beans match by type, but none have matching qualifiers:\n[ERROR]         - Bean [class=java.lang.String, qualifiers=[@ConfigProperty, @Any]]\n[ERROR]         - Bean [class=java.lang.String, qualifiers=[@Any, @Claim(value = &quot;&quot;)]]\n[ERROR]     at io.quarkus.arc.processor.Beans.resolveInjectionPoint(Beans.java:411)\n[ERROR]     at io.quarkus.arc.processor.BeanInfo.init(BeanInfo.java:536)\n[ERROR]     at io.quarkus.arc.processor.BeanDeployment.init(BeanDeployment.java:263)\n[ERROR]     ... 13 more\n[ERROR] -&gt; [Help 1]\n</code></pre>\n<p>If I remove the <code>@SignedRequest</code> annotation, everything builds properly again.  I've also found that if I remove the <code>enrollmentToken</code> method parameter everything builds properly as well.  It's the combination of the <code>@SignedRequest</code> annotation and a method parameter that causes problems.</p>\n<p>Can anyone shed some light on what's happening here?  I've never run into this issue before and am stumped.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":8984727,"reputation":2962,"user_id":6698642,"display_name":"shriakhilc"},"score":6,"creation_date":1663784492,"post_id":73805296,"comment_id":130323222,"body_markdown":"Based on example 1, it expects your output to be 1-indexed, so &quot;my&quot; should be 2.","body":"Based on example 1, it expects your output to be 1-indexed, so &quot;my&quot; should be 2."},{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":1,"creation_date":1663785919,"post_id":73805296,"comment_id":130323667,"body_markdown":"Probably want `index = (i + 1);` to conform with the required indexing.  You also may not want `contains` but it would work for your examples.  Your code would show 3 for &quot;me&quot; (assuming the previous fix).","body":"Probably want <code>index = (i + 1);</code> to conform with the required indexing.  You also may not want <code>contains</code> but it would work for your examples.  Your code would show 3 for &quot;me&quot; (assuming the previous fix)."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1663789296,"post_id":73805296,"comment_id":130324722,"body_markdown":"since arrays in Java are indexed starting from `0` it is more adequate to leave the code starting at `0` and just change the output so that instead of `0` it prints `1`; instead of `1` it prints `2`, ...","body":"since arrays in Java are indexed starting from <code>0</code> it is more adequate to leave the code starting at <code>0</code> and just change the output so that instead of <code>0</code> it prints <code>1</code>; instead of <code>1</code> it prints <code>2</code>, ..."},{"owner":{"account_id":15920984,"reputation":49,"user_id":11488000,"display_name":"AlElM"},"score":0,"creation_date":1663791484,"post_id":73805296,"comment_id":130325342,"body_markdown":"It was equals instead of contains.","body":"It was equals instead of contains."}],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1663791054,"creation_date":1663791054,"answer_id":73806414,"question_id":73805296,"body_markdown":"You cannot make array indexes start at 1 in Java, you will have to adjust the result.\r\n\r\nI spotted several issues in your code, but none is related to your problem:\r\n\r\n1. You should replace the condition of your loop `i &lt;= splited.length - 1` with the simpler `i &lt; splited.length`\r\n2. Rename `flag` to `found` as this is what the flag means.\r\n3. You should extend your loop end condition with `flag` so you stop searching after the first &quot;hit&quot;: `(i &lt; splited.length) &amp;&amp; !found`\r\n\r\nNow for your actual problem: I would suggest that you simply store the value of `i` into `index` and do the calculation only at the output, so inside the if in the loop just set `index = i;` and add `1` just on the output: `System.out.println(index + 1);`\r\n\r\nMake sure that with all your attempts to fix the code, you add the 1 only once to index, your update sounds as if you applied the fix twice.\r\n\r\n**Update**\r\nAlso trim your input string to prevent empty array elements at the beginning of the splitted array:\r\n`String[] splited = sc1.trim().split(&quot;\\\\s+&quot;);`","title":"How can I make the index count from 1 instead of 0?","body":"<p>You cannot make array indexes start at 1 in Java, you will have to adjust the result.</p>\n<p>I spotted several issues in your code, but none is related to your problem:</p>\n<ol>\n<li>You should replace the condition of your loop <code>i &lt;= splited.length - 1</code> with the simpler <code>i &lt; splited.length</code></li>\n<li>Rename <code>flag</code> to <code>found</code> as this is what the flag means.</li>\n<li>You should extend your loop end condition with <code>flag</code> so you stop searching after the first &quot;hit&quot;: <code>(i &lt; splited.length) &amp;&amp; !found</code></li>\n</ol>\n<p>Now for your actual problem: I would suggest that you simply store the value of <code>i</code> into <code>index</code> and do the calculation only at the output, so inside the if in the loop just set <code>index = i;</code> and add <code>1</code> just on the output: <code>System.out.println(index + 1);</code></p>\n<p>Make sure that with all your attempts to fix the code, you add the 1 only once to index, your update sounds as if you applied the fix twice.</p>\n<p><strong>Update</strong>\nAlso trim your input string to prevent empty array elements at the beginning of the splitted array:\n<code>String[] splited = sc1.trim().split(&quot;\\\\s+&quot;);</code></p>\n"}],"owner":{"account_id":15920984,"reputation":49,"user_id":11488000,"display_name":"AlElM"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":358,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"accepted_answer_id":73806414,"answer_count":1,"score":-1,"last_activity_date":1663791054,"creation_date":1663784316,"question_id":73805296,"body_markdown":"I was trying out the JetBrains course of Java Core.\r\nThis is the exercise:\r\n\r\n&gt;Let&#39;s implement the simplest search engine possible ever. It should search for a specific word in a multi-word input line. The input line contains several words separated by a space. The words are numbered according to their order, with the first word having index 1. Consider that all the words in the line are unique, so there can be no repetition. Write a simple program that reads two lines: a line of words and a line containing the search word. The program must search in the first line for a word specified in the second one. The program should output the index of the specified word. If there is no such word in the first line, the program should print Not Found. Please remember that indexes start from 1!\r\nYou should output exactly one line.\r\nThe lines that start with &gt; represent the user input. Note that these symbols are not part of the input. \r\n\r\nExample 1:\r\n\r\n&quot;&gt; first second third fourth&quot;\r\n&quot;&gt; third&quot;\r\n&quot;3&quot;\r\n\r\nExample 2:\r\n\r\n&quot;&gt; cat dog and mouse&quot;\r\n&quot;&gt; elephant&quot;\r\n&quot;Not found&quot;\r\n\r\nThis is my code:\r\n```\r\npackage search;\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Scanner scanner = new Scanner(System.in);\r\n        String sc1 = scanner.nextLine();\r\n        String[] splited = sc1.split(&quot;\\\\s+&quot;);\r\n\r\n        String sc2 = scanner.nextLine();\r\n        int index = 0;\r\n        boolean flag = false;\r\n\r\n        for (int i = 0; i &lt;= splited.length - 1; i++) {\r\n            if (sc2.contains(splited[i])) {\r\n                flag = true;\r\n                index = i+1; //line updated, same result\r\n            }\r\n        }\r\n        \r\n        if (flag) {\r\n           System.out.println(index);\r\n            }\r\n        else {\r\n           System.out.println(&quot;not found &quot;);\r\n        }\r\n    }            \r\n}\r\n```\r\n\r\nAnd this is the answer:\r\n\r\nWrong answer in test #1\r\n\r\nPlease find below the output of your program during this failed test.\r\nNote that the &#39;&gt;&#39; character indicates the beginning of the input line.\r\n\r\n&quot;---&quot;\r\n\r\n&quot;&gt; hello my name is alex&quot;\r\n\r\n&quot;&gt; my&quot;\r\n\r\n&quot;1&quot;\r\n\r\nUpdate: Thanks a lot for your comments @shriakhilc and @Gardener. I updated the code, as per Gardener&#39;s advice, and now it gives me this example:\r\n\r\n&gt; what a beautiful place\r\n&gt; what\r\n&gt; 2\r\n\r\nWhat could I do to make it count from 1? (I also tried changing the initial values of both i and index separately and doesn&#39;t work either, also modified length but nothing either.)","title":"How can I make the index count from 1 instead of 0?","body":"<p>I was trying out the JetBrains course of Java Core.\nThis is the exercise:</p>\n<blockquote>\n<p>Let's implement the simplest search engine possible ever. It should search for a specific word in a multi-word input line. The input line contains several words separated by a space. The words are numbered according to their order, with the first word having index 1. Consider that all the words in the line are unique, so there can be no repetition. Write a simple program that reads two lines: a line of words and a line containing the search word. The program must search in the first line for a word specified in the second one. The program should output the index of the specified word. If there is no such word in the first line, the program should print Not Found. Please remember that indexes start from 1!\nYou should output exactly one line.\nThe lines that start with &gt; represent the user input. Note that these symbols are not part of the input.</p>\n</blockquote>\n<p>Example 1:</p>\n<p>&quot;&gt; first second third fourth&quot;\n&quot;&gt; third&quot;\n&quot;3&quot;</p>\n<p>Example 2:</p>\n<p>&quot;&gt; cat dog and mouse&quot;\n&quot;&gt; elephant&quot;\n&quot;Not found&quot;</p>\n<p>This is my code:</p>\n<pre><code>package search;\nimport java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        String sc1 = scanner.nextLine();\n        String[] splited = sc1.split(&quot;\\\\s+&quot;);\n\n        String sc2 = scanner.nextLine();\n        int index = 0;\n        boolean flag = false;\n\n        for (int i = 0; i &lt;= splited.length - 1; i++) {\n            if (sc2.contains(splited[i])) {\n                flag = true;\n                index = i+1; //line updated, same result\n            }\n        }\n        \n        if (flag) {\n           System.out.println(index);\n            }\n        else {\n           System.out.println(&quot;not found &quot;);\n        }\n    }            \n}\n</code></pre>\n<p>And this is the answer:</p>\n<p>Wrong answer in test #1</p>\n<p>Please find below the output of your program during this failed test.\nNote that the '&gt;' character indicates the beginning of the input line.</p>\n<p>&quot;---&quot;</p>\n<p>&quot;&gt; hello my name is alex&quot;</p>\n<p>&quot;&gt; my&quot;</p>\n<p>&quot;1&quot;</p>\n<p>Update: Thanks a lot for your comments @shriakhilc and @Gardener. I updated the code, as per Gardener's advice, and now it gives me this example:</p>\n<blockquote>\n<p>what a beautiful place\nwhat\n2</p>\n</blockquote>\n<p>What could I do to make it count from 1? (I also tried changing the initial values of both i and index separately and doesn't work either, also modified length but nothing either.)</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":0,"creation_date":1663790723,"post_id":73806317,"comment_id":130325119,"body_markdown":"Move all the code in `main` into its own function then call that function in a loop.","body":"Move all the code in <code>main</code> into its own function then call that function in a loop."},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1663791300,"post_id":73806317,"comment_id":130325286,"body_markdown":"This kind of programming against cases of user error are (to me) a waste of time. To start with, HTML 5 is now the vanguard of handling bad user input, and (IMO) this is what you should be learning on the topic of bad user input. Scanner  is rarely used by professional Java programmers. My advice: &quot;Fast fail&quot;. Let programs die quickly, and create a user manual in a text/word/etc file that highlights how to use the program correctly - it&#39;s a better way to go about it","body":"This kind of programming against cases of user error are (to me) a waste of time. To start with, HTML 5 is now the vanguard of handling bad user input, and (IMO) this is what you should be learning on the topic of bad user input. Scanner  is rarely used by professional Java programmers. My advice: &quot;Fast fail&quot;. Let programs die quickly, and create a user manual in a text/word/etc file that highlights how to use the program correctly - it&#39;s a better way to go about it"},{"owner":{"account_id":20216668,"reputation":9,"user_id":14827242,"display_name":"Pedro"},"score":0,"creation_date":1663791756,"post_id":73806317,"comment_id":130325440,"body_markdown":"I changed the code into a new file and then called it from the main. But i don&#39;t know how to call that function in a loop i get the error that Operations(the name i gave to the method), cannot be resolved to a variable.","body":"I changed the code into a new file and then called it from the main. But i don&#39;t know how to call that function in a loop i get the error that Operations(the name i gave to the method), cannot be resolved to a variable."},{"owner":{"account_id":20216668,"reputation":9,"user_id":14827242,"display_name":"Pedro"},"score":0,"creation_date":1663791811,"post_id":73806317,"comment_id":130325458,"body_markdown":"I guess so but i was asked to do it this way by the java professor and i need to send it to him working.","body":"I guess so but i was asked to do it this way by the java professor and i need to send it to him working."}],"owner":{"account_id":20216668,"reputation":9,"user_id":14827242,"display_name":"Pedro"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1663793026,"answer_count":0,"score":0,"last_activity_date":1663790389,"creation_date":1663790389,"question_id":73806317,"body_markdown":"How can i get this code to ask if you want to do another operation? And ask again for numbers and an operation if the asnwer is yes. I think it should be with and if like if the operation works fine it should ask if you want to try again and if you say yes it should ask again, and if you say no it stops.\r\n\r\n\r\n    public class Interface {\r\n\t\r\n\t\r\n\tpublic static int promptInt( Scanner sc, String prompt )\r\n\t{\r\n\t    System.out.print( prompt );\r\n\t    while( ! sc.hasNextInt() )\r\n\t    {\r\n\t        System.out.println( &quot;Invalid input, must be an integer&quot; );\r\n\t        System.out.print( prompt );\r\n\t        sc.next(); //if the input is not a number throw away invalid input\r\n\t    }\r\n\t    return sc.nextInt();\r\n\t}\r\n\t\tpublic void suma(int j, int k) {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t}\r\n\t\t\t\t\t\t\r\n\tpublic static void main(String[] args) {\r\n\t\ttry {\r\n\t\tInteger number1;\r\n\t\tInteger number2;\r\n\t\tchar operator;\r\n\t\t\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\t\r\n\t\t\r\n\t\tnumber1 = promptInt( sc, &quot;Give me number 1: &quot; );//Here we ask for the numbers\r\n\t\tnumber2 = promptInt( sc, &quot;Give me number 2: &quot; );\r\n\t\tSystem.out.println(&quot;Choose between +, /, - or *&quot;);\r\n\t\toperator = sc.next().charAt(0);\r\n\t\t\r\n\t\tint result = 0;\r\n\t\t\r\n\t\tswitch(operator) {//With this switch we go through the operations\r\n\t\tcase &#39;+&#39;:\r\n\t\t\tresult = number1 + number2;\r\n\t\t\tbreak;\r\n\t\tcase &#39;-&#39;:\r\n\t\t\tresult = number1 - number2;\r\n\t\t\tbreak;\t\r\n\t\tcase &#39;*&#39;:\r\n\t\t\tresult = number1 * number2;\r\n\t\t\tbreak;\r\n\t\tcase &#39;/&#39;:\r\n\t\t\tresult = number1 / number2;\r\n\t\t\tif(number1 == 0 || number2 == 0 ) {\r\n\t\t\t\tSystem.out.println(&quot;Don&#39;t divide by 0, please&quot;);//If we try to divide by 0 we get an error\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tdefault:\r\n\t\t\t\tSystem.out.println(&quot;We don&#39;t contemplate that operation&quot;);//If we pass something different from +,* or / it gives an error\r\n\t\t\t}\r\n\t\tSystem.out.println(&quot;The result of the &quot; +  &quot; operation is &quot; + result );\r\n\t\tif(operator ==  &#39;+&#39; || operator == &#39;/&#39; || operator == &#39;*&#39; ) {\r\n\t\t\t  System.out.println(&quot;Do you want to try another operation?&quot;);\r\n\t\t\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}catch (InputMismatchException e) {\r\n\t\t\tSystem.out.println(&quot;You are not inserting a number, try again&quot;);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\r\n\t}\r\n\t\t\r\n\t\t\t\r\n}\r\n\t\r\n}\r\n\r\n","title":"Get input to ask again after correct input","body":"<p>How can i get this code to ask if you want to do another operation? And ask again for numbers and an operation if the asnwer is yes. I think it should be with and if like if the operation works fine it should ask if you want to try again and if you say yes it should ask again, and if you say no it stops.</p>\n<pre><code>public class Interface {\n\n\npublic static int promptInt( Scanner sc, String prompt )\n{\n    System.out.print( prompt );\n    while( ! sc.hasNextInt() )\n    {\n        System.out.println( &quot;Invalid input, must be an integer&quot; );\n        System.out.print( prompt );\n        sc.next(); //if the input is not a number throw away invalid input\n    }\n    return sc.nextInt();\n}\n    public void suma(int j, int k) {\n                                \n    }\n                    \npublic static void main(String[] args) {\n    try {\n    Integer number1;\n    Integer number2;\n    char operator;\n    \n    Scanner sc = new Scanner(System.in);\n    \n    \n    number1 = promptInt( sc, &quot;Give me number 1: &quot; );//Here we ask for the numbers\n    number2 = promptInt( sc, &quot;Give me number 2: &quot; );\n    System.out.println(&quot;Choose between +, /, - or *&quot;);\n    operator = sc.next().charAt(0);\n    \n    int result = 0;\n    \n    switch(operator) {//With this switch we go through the operations\n    case '+':\n        result = number1 + number2;\n        break;\n    case '-':\n        result = number1 - number2;\n        break;  \n    case '*':\n        result = number1 * number2;\n        break;\n    case '/':\n        result = number1 / number2;\n        if(number1 == 0 || number2 == 0 ) {\n            System.out.println(&quot;Don't divide by 0, please&quot;);//If we try to divide by 0 we get an error\n        }\n        break;\n        \n        default:\n            System.out.println(&quot;We don't contemplate that operation&quot;);//If we pass something different from +,* or / it gives an error\n        }\n    System.out.println(&quot;The result of the &quot; +  &quot; operation is &quot; + result );\n    if(operator ==  '+' || operator == '/' || operator == '*' ) {\n          System.out.println(&quot;Do you want to try another operation?&quot;);\n    \n        \n    }\n    \n}catch (InputMismatchException e) {\n        System.out.println(&quot;You are not inserting a number, try again&quot;);\n        \n        \n    \n}\n    \n        \n</code></pre>\n<p>}</p>\n<p>}</p>\n"},{"tags":["java","maven","intellij-idea","quickfix","quickfixj"],"comments":[{"owner":{"account_id":2705724,"reputation":2702,"user_id":5264558,"display_name":"Daniele"},"score":1,"creation_date":1573916551,"post_id":58891596,"comment_id":104049348,"body_markdown":"When you run from Intellij, this works since the IDE includes all necessary jar-s in the classpath. in order to run from the command line using the `java -jar ..` option, one way to go is to create an &quot;uber-jar&quot; to package all necessary binaries; see the SO question https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven","body":"When you run from Intellij, this works since the IDE includes all necessary jar-s in the classpath. in order to run from the command line using the <code>java -jar ..</code> option, one way to go is to create an &quot;uber-jar&quot; to package all necessary binaries; see the SO question <a href=\"https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven\" title=\"how can i create an executable jar with dependencies using maven\">stackoverflow.com/questions/574594/&hellip;</a>"},{"owner":{"account_id":6398908,"reputation":3023,"user_id":4962355,"display_name":"Christoph John"},"score":0,"creation_date":1573917969,"post_id":58891596,"comment_id":104049727,"body_markdown":"You should not try to run the sources JAR. There should be a standalone JAR for the examples that will run with java -jar.","body":"You should not try to run the sources JAR. There should be a standalone JAR for the examples that will run with java -jar."},{"owner":{"account_id":87845,"reputation":15821,"user_id":243373,"accept_rate":100,"display_name":"TT."},"score":1,"creation_date":1573918635,"post_id":58891596,"comment_id":104049924,"body_markdown":"You would need to include the quickfixj jars to the classpath: `java -classpath &lt;list-of-all-jars&gt; &lt;main-class&gt;`. Where `&lt;list-of-all-jars&gt;` is a ; (Windows) or : (*nix) separated list of all jars needed to run your program (quickfixj jars, your own jar and any jars needed), and `&lt;main-class&gt;` is the fully qualified class name of your main class (the class that has the main entry to your application).","body":"You would need to include the quickfixj jars to the classpath: <code>java -classpath &lt;list-of-all-jars&gt; &lt;main-class&gt;</code>. Where <code>&lt;list-of-all-jars&gt;</code> is a ; (Windows) or : (*nix) separated list of all jars needed to run your program (quickfixj jars, your own jar and any jars needed), and <code>&lt;main-class&gt;</code> is the fully qualified class name of your main class (the class that has the main entry to your application)."},{"owner":{"account_id":13770214,"reputation":73,"user_id":10990735,"display_name":"Alatha Ntonga"},"score":1,"creation_date":1573929211,"post_id":58891596,"comment_id":104052813,"body_markdown":"@Daniele Thanks. I followed your answer and it worked! I thought I knew maven but turns out I was being a noob. :)","body":"@Daniele Thanks. I followed your answer and it worked! I thought I knew maven but turns out I was being a noob. :)"},{"owner":{"account_id":13770214,"reputation":73,"user_id":10990735,"display_name":"Alatha Ntonga"},"score":1,"creation_date":1573929374,"post_id":58891596,"comment_id":104052845,"body_markdown":"@ChristophJohn Thanks I didn&#39;t properly look at the pom, otehrwise I would have realised the standalone jar is the one I needed to run. Also I&#39;d Iike to say thank you, I&#39;ve asked other questions and you&#39;ve been very helpful.","body":"@ChristophJohn Thanks I didn&#39;t properly look at the pom, otehrwise I would have realised the standalone jar is the one I needed to run. Also I&#39;d Iike to say thank you, I&#39;ve asked other questions and you&#39;ve been very helpful."},{"owner":{"account_id":13770214,"reputation":73,"user_id":10990735,"display_name":"Alatha Ntonga"},"score":1,"creation_date":1573930466,"post_id":58891596,"comment_id":104053129,"body_markdown":"@TT thanks. Your explanation made it crystal clear . I hope you don&#39;t mind, I&#39;ve used your comment in the answer.","body":"@TT thanks. Your explanation made it crystal clear . I hope you don&#39;t mind, I&#39;ve used your comment in the answer."}],"answers":[{"tags":[],"owner":{"account_id":13770214,"reputation":73,"user_id":10990735,"display_name":"Alatha Ntonga"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1573930314,"creation_date":1573930314,"answer_id":58894096,"question_id":58891596,"body_markdown":"Turns out I was beeing a noob. The Maven package lifecycle bundles the specified class files without the dependencies into a jar. I needed to create an uber jar with all the necessary bianries, and then run that. See the SO question [create excecutable jar with dependencies using maven][1]\r\n\r\n What is required is the following:\r\n\r\n```\r\njava -classpath &lt;list-of-all-jars&gt; &lt;main-class&gt;\r\n```\r\nWhere `&lt;list-of-all-jars&gt;` is a ; (Windows) or : (*nix) separated list of all jars needed to run your program (quickfixj jars, your own jar and any jars needed), and `&lt;main-class&gt;` is the fully qualified class name of your main class (the class that has the main entry to your application)\r\n\r\n\r\n  [1]: http://https:stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven","title":"how to execute Quickfix/J jar?","body":"<p>Turns out I was beeing a noob. The Maven package lifecycle bundles the specified class files without the dependencies into a jar. I needed to create an uber jar with all the necessary bianries, and then run that. See the SO question <a href=\"http://https:stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven\" rel=\"nofollow noreferrer\">create excecutable jar with dependencies using maven</a></p>\n\n<p>What is required is the following:</p>\n\n<pre><code>java -classpath &lt;list-of-all-jars&gt; &lt;main-class&gt;\n</code></pre>\n\n<p>Where <code>&lt;list-of-all-jars&gt;</code> is a ; (Windows) or : (*nix) separated list of all jars needed to run your program (quickfixj jars, your own jar and any jars needed), and <code>&lt;main-class&gt;</code> is the fully qualified class name of your main class (the class that has the main entry to your application)</p>\n"},{"tags":[],"owner":{"account_id":26253949,"reputation":1,"user_id":19926305,"display_name":"Gus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663789401,"creation_date":1663789401,"answer_id":73806175,"question_id":58891596,"body_markdown":"You have to create an executable jar.\r\nYou can use Maven to do this. In your pom.xml can use maven-assembly-plugin to generate your executable jar\r\n\r\n    &lt;plugin&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;single&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;archive&gt;\r\n\t\t\t\t\t\t&lt;manifest&gt;\r\n\t\t\t\t\t\t\t&lt;mainClass&gt;myour.main.Class&lt;/mainClass&gt;\r\n\t\t\t\t\t\t&lt;/manifest&gt;\r\n\t\t\t\t\t&lt;/archive&gt;\r\n\t\t\t\t\t&lt;descriptorRefs&gt;\r\n\t\t\t\t\t\t&lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n\t\t\t\t\t&lt;/descriptorRefs&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n","title":"how to execute Quickfix/J jar?","body":"<p>You have to create an executable jar.\nYou can use Maven to do this. In your pom.xml can use maven-assembly-plugin to generate your executable jar</p>\n<pre><code>&lt;plugin&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;single&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;mainClass&gt;myour.main.Class&lt;/mainClass&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n                &lt;descriptorRefs&gt;\n                    &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                &lt;/descriptorRefs&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":13770214,"reputation":73,"user_id":10990735,"display_name":"Alatha Ntonga"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":512,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":58894096,"answer_count":2,"score":1,"last_activity_date":1663789401,"creation_date":1573913712,"question_id":58891596,"body_markdown":"I&#39;m building a self contained trading simulator using the quickfix/j library. Up untill now I&#39;d been using mvn package, then the intelli J &quot;Run button&quot; to run my program from an entry point within my client-application class. I tried using the `java -jar target/.....1.1.0.jar` . and get the following error \r\n```\r\njava -jar Broker/target/Broker-1.0.0.jar\r\nError: Could not find or load main class Broker.ClientApplication\r\nCaused by: java.lang.NoClassDefFoundError: quickfix/Application\r\n```\r\nI thought the error might have something to do with my pom file not fetching a dependecy properly. So to make sure I ran the *ordermatch* example from the quickfix/J github, but i get a similar error.\r\n```\r\njava -jar /homes/antonga/IdeaProjects/Desktop/quickfixj-parent/quickfixj-examples/ordermatch/target/quickfixj-examples-ordermatch-2.1.1-sources.jar\r\n\r\nno main manifest attribute, in /homes/antonga/IdeaProjects/Desktop/quickfixj-parent/quickfixj-examples/ordermatch/target/quickfixj-examples-ordermatch-2.1.1-sources.jar\r\n```\r\nTo be clear using the Intellli J &quot;Run&quot; button inside the main calss works percfectly even for the ordermacth example. From what I gather the command IntelliJ uses is something like this \r\n` &quot;/path/to/java/&quot; &quot;-javagent/.../.jar&quot; &quot;/pathtolocalmavenrepo/quickfix-core.jar &quot;/pathtolocalmavenrepo/anotherquickfixdependecy.jar&quot; .....&quot;more quickfix dependency jar files&quot; packagestructure.Main`\r\n\r\nI don&#39;t see why this would work but my execution wouldn&#39;t. I can include my pom files and other info if this would help. I&#39;m also using a multi-module maven project but that doesn&#39;t seem to the problem.\r\n","title":"how to execute Quickfix/J jar?","body":"<p>I'm building a self contained trading simulator using the quickfix/j library. Up untill now I'd been using mvn package, then the intelli J \"Run button\" to run my program from an entry point within my client-application class. I tried using the <code>java -jar target/.....1.1.0.jar</code> . and get the following error </p>\n\n<pre><code>java -jar Broker/target/Broker-1.0.0.jar\nError: Could not find or load main class Broker.ClientApplication\nCaused by: java.lang.NoClassDefFoundError: quickfix/Application\n</code></pre>\n\n<p>I thought the error might have something to do with my pom file not fetching a dependecy properly. So to make sure I ran the <em>ordermatch</em> example from the quickfix/J github, but i get a similar error.</p>\n\n<pre><code>java -jar /homes/antonga/IdeaProjects/Desktop/quickfixj-parent/quickfixj-examples/ordermatch/target/quickfixj-examples-ordermatch-2.1.1-sources.jar\n\nno main manifest attribute, in /homes/antonga/IdeaProjects/Desktop/quickfixj-parent/quickfixj-examples/ordermatch/target/quickfixj-examples-ordermatch-2.1.1-sources.jar\n</code></pre>\n\n<p>To be clear using the Intellli J \"Run\" button inside the main calss works percfectly even for the ordermacth example. From what I gather the command IntelliJ uses is something like this \n<code>\"/path/to/java/\" \"-javagent/.../.jar\" \"/pathtolocalmavenrepo/quickfix-core.jar \"/pathtolocalmavenrepo/anotherquickfixdependecy.jar\" .....\"more quickfix dependency jar files\" packagestructure.Main</code></p>\n\n<p>I don't see why this would work but my execution wouldn't. I can include my pom files and other info if this would help. I'm also using a multi-module maven project but that doesn't seem to the problem.</p>\n"},{"tags":["java","rest","http-headers","httpresponse"],"comments":[{"owner":{"account_id":26301533,"reputation":1119,"user_id":19966820,"display_name":"YJR"},"score":0,"creation_date":1663786349,"post_id":73805549,"comment_id":130323809,"body_markdown":"https://stackoverflow.com/questions/69283119/get-headers-from-response-with-spring-boot-2-webclient this may be  helpful to you","body":"<a href=\"https://stackoverflow.com/questions/69283119/get-headers-from-response-with-spring-boot-2-webclient\" title=\"get headers from response with spring boot 2 webclient\">stackoverflow.com/questions/69283119/&hellip;</a> this may be  helpful to you"}],"answers":[{"tags":[],"owner":{"account_id":18426445,"reputation":41,"user_id":14129549,"display_name":"Gabriel Granados."},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1663787089,"creation_date":1663787089,"answer_id":73805757,"question_id":73805549,"body_markdown":"You can do it using `getFirstHeader(&quot;key&quot;)`. \r\n\r\nApache HttpClient example:\r\n\r\n    HttpClient client = HttpClientBuilder.create().build();\r\n    HttpGet request = new HttpGet(&quot;http://api.com&quot;);\r\n    HttpResponse response = client.execute(request);\r\n    \r\n    //get header by &#39;key&#39;\r\n    String headerName= response.getFirstHeader(&quot;headerName&quot;).getValue();\r\n\r\nIf you want to get all the headers, you can use `getAllHeaders()`.\r\n\r\n    //get all headers\t\t\r\n    \tHeader[] headers = response.getAllHeaders();\r\n    \tfor (Header header : headers) {\r\n    \t\tSystem.out.println(&quot;Key : &quot; + header.getName() \r\n    \t\t      + &quot; ,Value : &quot; + header.getValue());\r\n    \t}","title":"How to get specific HTTP header values from an HTTP response in Java?","body":"<p>You can do it using <code>getFirstHeader(&quot;key&quot;)</code>.</p>\n<p>Apache HttpClient example:</p>\n<pre><code>HttpClient client = HttpClientBuilder.create().build();\nHttpGet request = new HttpGet(&quot;http://api.com&quot;);\nHttpResponse response = client.execute(request);\n\n//get header by 'key'\nString headerName= response.getFirstHeader(&quot;headerName&quot;).getValue();\n</code></pre>\n<p>If you want to get all the headers, you can use <code>getAllHeaders()</code>.</p>\n<pre><code>//get all headers       \n    Header[] headers = response.getAllHeaders();\n    for (Header header : headers) {\n        System.out.println(&quot;Key : &quot; + header.getName() \n              + &quot; ,Value : &quot; + header.getValue());\n    }\n</code></pre>\n"}],"owner":{"account_id":26318206,"reputation":11,"user_id":19980639,"display_name":"coffeelemon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9061,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1663789058,"creation_date":1663785820,"question_id":73805549,"body_markdown":"For example, you can extract the status code from a CloseableHTTPResponse using `response.getStatusLine().getStatusCode()`. \r\n\r\nIs there a similar way to get a specific header value (ie. Location, Date, etc.) from the response (in String format)?","title":"How to get specific HTTP header values from an HTTP response in Java?","body":"<p>For example, you can extract the status code from a CloseableHTTPResponse using <code>response.getStatusLine().getStatusCode()</code>.</p>\n<p>Is there a similar way to get a specific header value (ie. Location, Date, etc.) from the response (in String format)?</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1663606163,"post_id":73763177,"comment_id":130274484,"body_markdown":"This is not directly related to the (current) error you face, but as you configured a `JwtAuthenticationConverter` which populates the security-context with a `JwtAuthenticationToken`, you should use `@WithMockJwtAuth` (as per the answer) and not `@WithMockBearerTokenAuthentication` which, as its name let you guess, configures test security context with a `BearerTokenAuthentication` (default `Authentication` implementation for OAuth2 resource-server with **introspction**)","body":"This is not directly related to the (current) error you face, but as you configured a <code>JwtAuthenticationConverter</code> which populates the security-context with a <code>JwtAuthenticationToken</code>, you should use <code>@WithMockJwtAuth</code> (as per the answer) and not <code>@WithMockBearerTokenAuthentication</code> which, as its name let you guess, configures test security context with a <code>BearerTokenAuthentication</code> (default <code>Authentication</code> implementation for OAuth2 resource-server with <b>introspction</b>)"}],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663789019,"creation_date":1663553500,"answer_id":73767721,"question_id":73763177,"body_markdown":"Sadly, spring-security team chose to include in test framework MockMvc request post-processors and WebTestClient request mutators only, which limits OAuth2 authentication mocking to **controllers** unit-tests.\r\n\r\nHopefully, I kept my work on test annotations in a set of libs I publish on maven-central: https://github.com/ch4mpy/spring-addons. You can test any `@Component` with it (sample adapted from [here][1]):\r\n```java\r\n//---------------------------------------------------//\r\n// Test secured @Component which isn&#39;t a @Controller //\r\n//---------------------------------------------------//\r\n\r\n// Import web-security configuration and tested component class\r\n@Import({ SampleApi.WebSecurityConfig.class, MessageService.class })\r\n@ExtendWith(SpringExtension.class)\r\nclass MessageServiceTests {\r\n\r\n\t// Auto-wire tested component\r\n\t@Autowired\r\n\tprivate MessageService messageService;\r\n\r\n\t// Mock tested component dependencies\r\n\t@MockBean\r\n\tGreetingRepo greetingRepo;\r\n\t\r\n\t@BeforeEach\r\n\tpublic void setUp() {\r\n\t\twhen(greetingRepo.findUserSecret(&quot;ch4mpy&quot;)).thenReturn(&quot;Don&#39;t tel it&quot;);\r\n\t}\r\n\r\n\t@Test()\r\n\tvoid greetWitoutAuthentication() {\r\n\t\t// Call tested component methods directly (don&#39;t use MockMvc nor WebTestClient)\r\n\t\tassertThrows(Exception.class, () -&gt; messageService.getSecret(&quot;ch4mpy&quot;));\r\n\t}\r\n\r\n\t@Test\r\n\t@WithMockJwtAuth(authorities = &quot;ROLE_AUTHORIZED_PERSONNEL&quot;, claims = @OpenIdClaims(preferredUsername = &quot;ch4mpy&quot;))\r\n\tvoid greetWithMockJwtAuth() {\r\n\t\tassertThat(messageService.getSecret(&quot;ch4mpy&quot;)).isEqualTo(&quot;Don&#39;t tel it&quot;);\r\n\t}\r\n}\r\n```\r\n\r\n### Edit for updated question\r\nOnly `@Controller` unit-tests should run within the context of an HTTP request. \r\n\r\nThis means that `@WebMvcTest` (or `@WebFluxTest`) and `MockMvc` (or `WebTestClient`) must be used in `@Controller` tests **only**. \r\n\r\nUnit-tests for any other type of `@Component` (`@Service` or `@Repository` for instance) should be written without the context of a request. This means that none of `@WebMvcTest`, `@WebFluxTest`, `MockMvc`and `WebTestClient` should be used in such tests.\r\n\r\nThe sample above shows how to structure such tests:\r\n- Trigger spring-context configuration\r\n- `@Import` web-security configuration and your `@Component` class\r\n- provide `@MockBean` for all of your `@Component` dependencies\r\n- in the test, call tested component methods directly (do not try to create a mockMvc request)\r\n\r\n### Edit for the 2nd question modification\r\n&gt; I am trying to write a Unit tests for all of my service classes\r\n\r\nApparently, this first statement is not your main concern anymore as you&#39;re trying to write **integration-tests** for `@Controller` along with the `@Services`, `@Repositories` and other `@Components` it is injected. This is actually a completely different question than **unit-testing** each of those separately (mocking others).\r\n\r\n`NoClassDefFoundError` on `SecurityContextHolderFilter` means that `spring-security-web` is not on your classpath. It should be, even during the tests. Check your dependencies (pom or gradle file that you did not include in your question)\r\n\r\nPlease also note that:\r\n- you might want to write `value = &quot;ADMIN&quot;` instead of `value = &quot;{ADMIN}&quot;` (unless you really want curly-braces in your authority name)\r\n- you can use just `@WithMockJwtAuth(&quot;ADMIN&quot;)` instead of `@WithMockJwtAuth(claims = @OpenIdClaims(otherClaims\r\n            = @Claims(stringClaims = @StringClaim(name = &quot;permissions&quot;, value = &quot;ADMIN&quot;))))`\r\n- **you are allowed to read docs** (you and I would save quite some time). This includes [Spring doc](https://docs.spring.io/spring-security/reference/servlet/test/index.html) and mine: [home one](https://github.com/ch4mpy/spring-addons) and more importantly [tutorials](https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials)\r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons/blob/master/samples/webmvc-jwtauthenticationtoken/src/test/java/com/c4_soft/springaddons/samples/webmvc_jwtauthenticationtoken/MessageServiceTests.java","title":"Cannot mock @PreAuthorize when using with OAuth2 in Spring Boot","body":"<p>Sadly, spring-security team chose to include in test framework MockMvc request post-processors and WebTestClient request mutators only, which limits OAuth2 authentication mocking to <strong>controllers</strong> unit-tests.</p>\n<p>Hopefully, I kept my work on test annotations in a set of libs I publish on maven-central: <a href=\"https://github.com/ch4mpy/spring-addons\" rel=\"nofollow noreferrer\">https://github.com/ch4mpy/spring-addons</a>. You can test any <code>@Component</code> with it (sample adapted from <a href=\"https://github.com/ch4mpy/spring-addons/blob/master/samples/webmvc-jwtauthenticationtoken/src/test/java/com/c4_soft/springaddons/samples/webmvc_jwtauthenticationtoken/MessageServiceTests.java\" rel=\"nofollow noreferrer\">here</a>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>//---------------------------------------------------//\n// Test secured @Component which isn't a @Controller //\n//---------------------------------------------------//\n\n// Import web-security configuration and tested component class\n@Import({ SampleApi.WebSecurityConfig.class, MessageService.class })\n@ExtendWith(SpringExtension.class)\nclass MessageServiceTests {\n\n    // Auto-wire tested component\n    @Autowired\n    private MessageService messageService;\n\n    // Mock tested component dependencies\n    @MockBean\n    GreetingRepo greetingRepo;\n    \n    @BeforeEach\n    public void setUp() {\n        when(greetingRepo.findUserSecret(&quot;ch4mpy&quot;)).thenReturn(&quot;Don't tel it&quot;);\n    }\n\n    @Test()\n    void greetWitoutAuthentication() {\n        // Call tested component methods directly (don't use MockMvc nor WebTestClient)\n        assertThrows(Exception.class, () -&gt; messageService.getSecret(&quot;ch4mpy&quot;));\n    }\n\n    @Test\n    @WithMockJwtAuth(authorities = &quot;ROLE_AUTHORIZED_PERSONNEL&quot;, claims = @OpenIdClaims(preferredUsername = &quot;ch4mpy&quot;))\n    void greetWithMockJwtAuth() {\n        assertThat(messageService.getSecret(&quot;ch4mpy&quot;)).isEqualTo(&quot;Don't tel it&quot;);\n    }\n}\n</code></pre>\n<h3>Edit for updated question</h3>\n<p>Only <code>@Controller</code> unit-tests should run within the context of an HTTP request.</p>\n<p>This means that <code>@WebMvcTest</code> (or <code>@WebFluxTest</code>) and <code>MockMvc</code> (or <code>WebTestClient</code>) must be used in <code>@Controller</code> tests <strong>only</strong>.</p>\n<p>Unit-tests for any other type of <code>@Component</code> (<code>@Service</code> or <code>@Repository</code> for instance) should be written without the context of a request. This means that none of <code>@WebMvcTest</code>, <code>@WebFluxTest</code>, <code>MockMvc</code>and <code>WebTestClient</code> should be used in such tests.</p>\n<p>The sample above shows how to structure such tests:</p>\n<ul>\n<li>Trigger spring-context configuration</li>\n<li><code>@Import</code> web-security configuration and your <code>@Component</code> class</li>\n<li>provide <code>@MockBean</code> for all of your <code>@Component</code> dependencies</li>\n<li>in the test, call tested component methods directly (do not try to create a mockMvc request)</li>\n</ul>\n<h3>Edit for the 2nd question modification</h3>\n<blockquote>\n<p>I am trying to write a Unit tests for all of my service classes</p>\n</blockquote>\n<p>Apparently, this first statement is not your main concern anymore as you're trying to write <strong>integration-tests</strong> for <code>@Controller</code> along with the <code>@Services</code>, <code>@Repositories</code> and other <code>@Components</code> it is injected. This is actually a completely different question than <strong>unit-testing</strong> each of those separately (mocking others).</p>\n<p><code>NoClassDefFoundError</code> on <code>SecurityContextHolderFilter</code> means that <code>spring-security-web</code> is not on your classpath. It should be, even during the tests. Check your dependencies (pom or gradle file that you did not include in your question)</p>\n<p>Please also note that:</p>\n<ul>\n<li>you might want to write <code>value = &quot;ADMIN&quot;</code> instead of <code>value = &quot;{ADMIN}&quot;</code> (unless you really want curly-braces in your authority name)</li>\n<li>you can use just <code>@WithMockJwtAuth(&quot;ADMIN&quot;)</code> instead of <code>@WithMockJwtAuth(claims = @OpenIdClaims(otherClaims = @Claims(stringClaims = @StringClaim(name = &quot;permissions&quot;, value = &quot;ADMIN&quot;))))</code></li>\n<li><strong>you are allowed to read docs</strong> (you and I would save quite some time). This includes <a href=\"https://docs.spring.io/spring-security/reference/servlet/test/index.html\" rel=\"nofollow noreferrer\">Spring doc</a> and mine: <a href=\"https://github.com/ch4mpy/spring-addons\" rel=\"nofollow noreferrer\">home one</a> and more importantly <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">tutorials</a></li>\n</ul>\n"}],"owner":{"account_id":16347167,"reputation":918,"user_id":11806619,"display_name":"Captain Jacky"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":486,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73767721,"answer_count":1,"score":-1,"last_activity_date":1663789019,"creation_date":1663507745,"question_id":73763177,"body_markdown":"I am trying to write a **Unit** tests for all of my service classes, but I cannot find a solution on how to mock a **@PreAuthorize** above my controller methods. As an example:\r\n\r\n I have this function in controller:\r\n\r\n    @GetMapping(&quot;/users&quot;)\r\n    @PreAuthorize(&quot;hasAuthority(&#39;ADMIN&#39;)&quot;)\r\n    public ResponseEntity&lt;List&lt;User&gt;&gt; getUsers() {\r\n        return service.getUsers();\r\n    }\r\n\r\nAnd this in my service class:\r\n\r\n    public ResponseEntity&lt;List&lt;User&gt;&gt; getUsers() {\r\n        return new ResponseEntity&lt;&gt;(userRepository.findAll(), HttpStatus.OK);\r\n    }\r\n\r\nWebSecurity class:\r\n\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http = http.cors().and().csrf().disable();\r\n        http = http\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and();\r\n        http = http\r\n                .exceptionHandling()\r\n                .authenticationEntryPoint(\r\n                        (request, response, ex) -&gt; response.sendError(\r\n                                HttpServletResponse.SC_UNAUTHORIZED,\r\n                                ex.getMessage()\r\n                        )\r\n                )\r\n                .and();\r\n    \r\n        http.authorizeRequests()\r\n                .antMatchers(HttpMethod.GET, &quot;/&quot;).permitAll()\r\n                .anyRequest().authenticated();\r\n    \r\n        http.oauth2ResourceServer().jwt().jwtAuthenticationConverter(jwtAuthenticationConverter());\r\n    }\r\n    \r\n    public JwtAuthenticationConverter jwtAuthenticationConverter() {\r\n        JwtAuthenticationConverter converter = new JwtAuthenticationConverter();\r\n    \r\n        converter.setJwtGrantedAuthoritiesConverter(jwt -&gt;\r\n                Optional.ofNullable(jwt.getClaimAsStringList(&quot;permissions&quot;))\r\n                        .stream()\r\n                        .flatMap(Collection::stream)\r\n                        .map(SimpleGrantedAuthority::new)\r\n                        .collect(Collectors.toList())\r\n        );\r\n    \r\n        return converter;\r\n    }\r\n\r\nNow I am trying to write a unit test:\r\n\r\n    @SpringBootTest\r\n    @AutoConfigureMockMvc\r\n    public class UserControllerTests {\r\n    \r\n        @Autowired\r\n        private MockMvc mvc;\r\n    \r\n        @MockBean\r\n        private UserService userService;\r\n    \r\n        @Test\r\n        @WithMockJwtAuth(claims = @OpenIdClaims(otherClaims\r\n                = @Claims(stringClaims = @StringClaim(name = &quot;permissions&quot;, value = &quot;{ADMIN}&quot;))))\r\n        public void getAllUsers_shouldBeSuccess() throws Exception {\r\n            ArrayList&lt;User&gt; users = new ArrayList&lt;&gt;();\r\n            users.add(new User(&quot;0&quot;, true, new Role(&quot;USER&quot;)));\r\n    \r\n            when(userService.getUsers()).thenReturn(new ResponseEntity&lt;&gt;(users, HttpStatus.OK));\r\n    \r\n            mvc.perform(get(&quot;/users&quot;))\r\n                    .andExpect(status().isOk());\r\n        }\r\n    \r\n    }\r\n\r\nBut I receive an error on `mvc.perform` call:\r\n\r\n    java.lang.NoClassDefFoundError: `org/springframework/security/web/context/SecurityContextHolderFilter`\r\n\r\n**UPDATE:**\r\n\r\nI&#39;ve tried [https://github.com/ch4mpy/spring-addons][1] and added `@WithMockBearerTokenAuthentication`, but I still receive the same error. Also to note: if I removed all `@` and left only with `@Test` above the method, I receive `401` error. \r\n\r\n    @Test\r\n    @WithMockBearerTokenAuthentication(attributes = @OpenIdClaims(otherClaims\r\n            = @Claims(stringClaims = @StringClaim(name = &quot;permissions&quot;, value = &quot;{ADMIN}&quot;))))\r\n    public void getAllUsers_shouldBeSuccess() throws Exception {\r\n        ArrayList&lt;User&gt; users = new ArrayList&lt;&gt;();\r\n        users.add(new User(&quot;0&quot;, true, new Role(&quot;USER&quot;)));\r\n    \r\n        when(userService.getUsers()).thenReturn(new ResponseEntity&lt;&gt;(users, HttpStatus.OK));\r\n    \r\n        mvc.perform(get(&quot;/users&quot;))\r\n                .andExpect(status().isOk());\r\n    }\r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons","title":"Cannot mock @PreAuthorize when using with OAuth2 in Spring Boot","body":"<p>I am trying to write a <strong>Unit</strong> tests for all of my service classes, but I cannot find a solution on how to mock a <strong>@PreAuthorize</strong> above my controller methods. As an example:</p>\n<p>I have this function in controller:</p>\n<pre><code>@GetMapping(&quot;/users&quot;)\n@PreAuthorize(&quot;hasAuthority('ADMIN')&quot;)\npublic ResponseEntity&lt;List&lt;User&gt;&gt; getUsers() {\n    return service.getUsers();\n}\n</code></pre>\n<p>And this in my service class:</p>\n<pre><code>public ResponseEntity&lt;List&lt;User&gt;&gt; getUsers() {\n    return new ResponseEntity&lt;&gt;(userRepository.findAll(), HttpStatus.OK);\n}\n</code></pre>\n<p>WebSecurity class:</p>\n<pre><code>protected void configure(HttpSecurity http) throws Exception {\n    http = http.cors().and().csrf().disable();\n    http = http\n            .sessionManagement()\n            .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n            .and();\n    http = http\n            .exceptionHandling()\n            .authenticationEntryPoint(\n                    (request, response, ex) -&gt; response.sendError(\n                            HttpServletResponse.SC_UNAUTHORIZED,\n                            ex.getMessage()\n                    )\n            )\n            .and();\n\n    http.authorizeRequests()\n            .antMatchers(HttpMethod.GET, &quot;/&quot;).permitAll()\n            .anyRequest().authenticated();\n\n    http.oauth2ResourceServer().jwt().jwtAuthenticationConverter(jwtAuthenticationConverter());\n}\n\npublic JwtAuthenticationConverter jwtAuthenticationConverter() {\n    JwtAuthenticationConverter converter = new JwtAuthenticationConverter();\n\n    converter.setJwtGrantedAuthoritiesConverter(jwt -&gt;\n            Optional.ofNullable(jwt.getClaimAsStringList(&quot;permissions&quot;))\n                    .stream()\n                    .flatMap(Collection::stream)\n                    .map(SimpleGrantedAuthority::new)\n                    .collect(Collectors.toList())\n    );\n\n    return converter;\n}\n</code></pre>\n<p>Now I am trying to write a unit test:</p>\n<pre><code>@SpringBootTest\n@AutoConfigureMockMvc\npublic class UserControllerTests {\n\n    @Autowired\n    private MockMvc mvc;\n\n    @MockBean\n    private UserService userService;\n\n    @Test\n    @WithMockJwtAuth(claims = @OpenIdClaims(otherClaims\n            = @Claims(stringClaims = @StringClaim(name = &quot;permissions&quot;, value = &quot;{ADMIN}&quot;))))\n    public void getAllUsers_shouldBeSuccess() throws Exception {\n        ArrayList&lt;User&gt; users = new ArrayList&lt;&gt;();\n        users.add(new User(&quot;0&quot;, true, new Role(&quot;USER&quot;)));\n\n        when(userService.getUsers()).thenReturn(new ResponseEntity&lt;&gt;(users, HttpStatus.OK));\n\n        mvc.perform(get(&quot;/users&quot;))\n                .andExpect(status().isOk());\n    }\n\n}\n</code></pre>\n<p>But I receive an error on <code>mvc.perform</code> call:</p>\n<pre><code>java.lang.NoClassDefFoundError: `org/springframework/security/web/context/SecurityContextHolderFilter`\n</code></pre>\n<p><strong>UPDATE:</strong></p>\n<p>I've tried <a href=\"https://github.com/ch4mpy/spring-addons\" rel=\"nofollow noreferrer\">https://github.com/ch4mpy/spring-addons</a> and added <code>@WithMockBearerTokenAuthentication</code>, but I still receive the same error. Also to note: if I removed all <code>@</code> and left only with <code>@Test</code> above the method, I receive <code>401</code> error.</p>\n<pre><code>@Test\n@WithMockBearerTokenAuthentication(attributes = @OpenIdClaims(otherClaims\n        = @Claims(stringClaims = @StringClaim(name = &quot;permissions&quot;, value = &quot;{ADMIN}&quot;))))\npublic void getAllUsers_shouldBeSuccess() throws Exception {\n    ArrayList&lt;User&gt; users = new ArrayList&lt;&gt;();\n    users.add(new User(&quot;0&quot;, true, new Role(&quot;USER&quot;)));\n\n    when(userService.getUsers()).thenReturn(new ResponseEntity&lt;&gt;(users, HttpStatus.OK));\n\n    mvc.perform(get(&quot;/users&quot;))\n            .andExpect(status().isOk());\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8974,"page":1018,"page_size":100}
