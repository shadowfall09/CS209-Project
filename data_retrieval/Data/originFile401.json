{"items":[{"tags":["java","spring","eclipse","maven"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1685537327,"post_id":76373505,"comment_id":134673737,"body_markdown":"`&lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;` Java 7? From 2011. Why are you using Java from 12 years ago?","body":"<code>&lt;maven.compiler.source&gt;1.7&lt;&#47;maven.compiler.source&gt;</code> Java 7? From 2011. Why are you using Java from 12 years ago?"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1685537624,"post_id":76373505,"comment_id":134673813,"body_markdown":"See abovelinked duplicate. The question might not be the same but the answer is very applicable on your situation too: use Tomcat 10+ or else downgrade Spring to 5-. In other words, simply make sure all the versions are the most recent ones or at least match each other wrt compatibility.","body":"See abovelinked duplicate. The question might not be the same but the answer is very applicable on your situation too: use Tomcat 10+ or else downgrade Spring to 5-. In other words, simply make sure all the versions are the most recent ones or at least match each other wrt compatibility."}],"owner":{"account_id":28719065,"reputation":3,"user_id":21993125,"display_name":"Prajal Saxena"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1685537573,"answer_count":0,"score":0,"last_activity_date":1685537561,"creation_date":1685536195,"question_id":76373505,"body_markdown":"Getting this error even after inheriting onStartup() method: \r\nThe type LoveCalculatorApplicationInitializer must implement the inherited abstract method WebApplicationInitializer.onStartup(ServletContext). \r\n\r\n**Here&#39;s the pom.xml**\r\n```\r\n\r\n`&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;com.seleniumexpress&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-love-calculator&lt;/artifactId&gt;\r\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n  &lt;packaging&gt;war&lt;/packaging&gt;\r\n\r\n  &lt;name&gt;spring-love-calculator Maven Webapp&lt;/name&gt;\r\n  &lt;!-- FIXME change it to the project&#39;s website --&gt;\r\n  &lt;url&gt;http://www.example.com&lt;/url&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;version&gt;4.11&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n    &lt;version&gt;6.0.9&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n    \r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;finalName&gt;spring-love-calculator&lt;/finalName&gt;\r\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\r\n      &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging --&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.22.1&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.2.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.5.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.8.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n    &lt;/pluginManagement&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n`\r\n```\r\n\r\n**Here&#39;s the LoveCalculatorApplicationInitializer.java:** problem not resolved even after inheriting\r\n\r\n\r\n```\r\n`package com.seleniumexpress.lc.config;\r\n\r\nimport org.springframework.web.WebApplicationInitializer;\r\n\r\nimport jakarta.servlet.ServletContext;\r\nimport jakarta.servlet.ServletException;\r\n\r\npublic class LoveCalculatorApplicationInitializer implements WebApplicationInitializer {\r\n\r\n\t@Override\r\n\tpublic void onStartup(ServletContext servletContext) throws ServletException {\r\n\t\t// TODO Auto-generated method stub\r\n\t\t\r\n\t}\r\n\r\n}\r\n`\r\n```","title":"The type LoveCalculatorApplicationInitializer must implement the inherited abstract method WebApplicationInitializer.onStartup(ServletContext)","body":"<p>Getting this error even after inheriting onStartup() method:\nThe type LoveCalculatorApplicationInitializer must implement the inherited abstract method WebApplicationInitializer.onStartup(ServletContext).</p>\n<p><strong>Here's the pom.xml</strong></p>\n<pre><code>\n`&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.seleniumexpress&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-love-calculator&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n\n  &lt;name&gt;spring-love-calculator Maven Webapp&lt;/name&gt;\n  &lt;!-- FIXME change it to the project's website --&gt;\n  &lt;url&gt;http://www.example.com&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;4.11&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    \n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n    &lt;version&gt;6.0.9&lt;/version&gt;\n&lt;/dependency&gt;\n    \n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;finalName&gt;spring-love-calculator&lt;/finalName&gt;\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\n      &lt;plugins&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.8.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.22.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.2.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.5.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.8.2&lt;/version&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n`\n</code></pre>\n<p><strong>Here's the LoveCalculatorApplicationInitializer.java:</strong> problem not resolved even after inheriting</p>\n<pre><code>`package com.seleniumexpress.lc.config;\n\nimport org.springframework.web.WebApplicationInitializer;\n\nimport jakarta.servlet.ServletContext;\nimport jakarta.servlet.ServletException;\n\npublic class LoveCalculatorApplicationInitializer implements WebApplicationInitializer {\n\n    @Override\n    public void onStartup(ServletContext servletContext) throws ServletException {\n        // TODO Auto-generated method stub\n        \n    }\n\n}\n`\n</code></pre>\n"},{"tags":["java","mongodb","spring-boot"],"comments":[{"owner":{"account_id":3188373,"reputation":1886,"user_id":3957225,"accept_rate":100,"display_name":"Dhaval Simaria"},"score":0,"creation_date":1685524699,"post_id":76371841,"comment_id":134670945,"body_markdown":"You can remove the `@DBRef articles` from User class.  I believe it will form an endless loop if you DBRef two classes into one another.\n\nAlso, please share the exact error that you are getting in your implementation.","body":"You can remove the <code>@DBRef articles</code> from User class.  I believe it will form an endless loop if you DBRef two classes into one another.  Also, please share the exact error that you are getting in your implementation."},{"owner":{"account_id":24199839,"reputation":11,"user_id":18157826,"display_name":"Vitalii Smahlenko"},"score":0,"creation_date":1685525273,"post_id":76371841,"comment_id":134671061,"body_markdown":"error - Invalid path reference user.username! Associations can only be pointed to directly or via their id property!","body":"error - Invalid path reference user.username! Associations can only be pointed to directly or via their id property!"}],"answers":[{"comments":[{"owner":{"account_id":24199839,"reputation":11,"user_id":18157826,"display_name":"Vitalii Smahlenko"},"score":0,"creation_date":1685525720,"post_id":76372015,"comment_id":134671150,"body_markdown":"I still get Invalid path reference user.username! Associations can only be pointed to directly or via their id property!","body":"I still get Invalid path reference user.username! Associations can only be pointed to directly or via their id property!"},{"owner":{"account_id":28578269,"reputation":142,"user_id":21879587,"display_name":"tamtejszystan"},"score":0,"creation_date":1685526171,"post_id":76372015,"comment_id":134671246,"body_markdown":"Maybe try, instead of using `$lookup` operation, to reference related data by ID directly in your documents, and then perform separate queries to retrieve the related data","body":"Maybe try, instead of using <code>$lookup</code> operation, to reference related data by ID directly in your documents, and then perform separate queries to retrieve the related data"}],"tags":[],"owner":{"account_id":28578269,"reputation":142,"user_id":21879587,"display_name":"tamtejszystan"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685525246,"creation_date":1685525246,"answer_id":76372015,"question_id":76371841,"body_markdown":"On `$lookup` stage you&#39;re trying to join on `user` field which is a DBRef in the articles collection and `_id` field in the users collection. The issue is that DBRef is a complex object, and you cannot directly compare it with the `_id` field.\r\n\r\nIn MongoDB, a DBRef is a document that contains the following fields:\r\n\r\n    {\r\n       $ref : &lt;collection name&gt;,\r\n       $id : &lt;id&gt;,\r\n       $db : &lt;database name&gt;\r\n    }\r\n\r\nYour `User` field in the `Article` collection would look something like this:\r\n\r\n    {\r\n        $ref : &#39;user&#39;,\r\n        $id : &lt;user_id&gt;,\r\n        $db : &lt;database_name&gt;\r\n    }\r\n\r\nThus, in your `$lookup` part, you should use `user.$id` as the localField instead of `user`:\r\n\r\n    @Aggregation(pipeline = {\r\n            &quot;{$lookup: {from: &#39;user&#39;, localField: &#39;user.$id&#39;, foreignField: &#39;_id&#39;, as: &#39;user&#39;}}&quot;,\r\n            &quot;{$unwind: &#39;$user&#39;}&quot;,\r\n            &quot;{$match: {&#39;user.username&#39;: ?0}}&quot;\r\n    })\r\n    List&lt;Article&gt; findAllByUserUsername(String username);\r\n\r\n","title":"How to write a join query for mongoDb with Spring boot?","body":"<p>On <code>$lookup</code> stage you're trying to join on <code>user</code> field which is a DBRef in the articles collection and <code>_id</code> field in the users collection. The issue is that DBRef is a complex object, and you cannot directly compare it with the <code>_id</code> field.</p>\n<p>In MongoDB, a DBRef is a document that contains the following fields:</p>\n<pre><code>{\n   $ref : &lt;collection name&gt;,\n   $id : &lt;id&gt;,\n   $db : &lt;database name&gt;\n}\n</code></pre>\n<p>Your <code>User</code> field in the <code>Article</code> collection would look something like this:</p>\n<pre><code>{\n    $ref : 'user',\n    $id : &lt;user_id&gt;,\n    $db : &lt;database_name&gt;\n}\n</code></pre>\n<p>Thus, in your <code>$lookup</code> part, you should use <code>user.$id</code> as the localField instead of <code>user</code>:</p>\n<pre><code>@Aggregation(pipeline = {\n        &quot;{$lookup: {from: 'user', localField: 'user.$id', foreignField: '_id', as: 'user'}}&quot;,\n        &quot;{$unwind: '$user'}&quot;,\n        &quot;{$match: {'user.username': ?0}}&quot;\n})\nList&lt;Article&gt; findAllByUserUsername(String username);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3188373,"reputation":1886,"user_id":3957225,"accept_rate":100,"display_name":"Dhaval Simaria"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685529655,"creation_date":1685529655,"answer_id":76372632,"question_id":76371841,"body_markdown":"You can fetch only the list of articles from the User repository as follows:\r\n\r\n\r\nKeep your User class as is in your question.\r\n\r\nRemove `@DBRef private User user;` from your Article class.\r\n\r\n`User Repository`\r\n\r\n    public interface UserRepository extends MongoRepository&lt;User, Long&gt; {\r\n\r\n        @Query(&quot;select u.articles from User u where u.username:=username&quot;)\r\n        List&lt;Article&gt; findArticlesbyUsername(@Param(&quot;username&quot;) String username);\r\n    }\r\n\r\nThis will fetch only the list of articles through your User class.","title":"How to write a join query for mongoDb with Spring boot?","body":"<p>You can fetch only the list of articles from the User repository as follows:</p>\n<p>Keep your User class as is in your question.</p>\n<p>Remove <code>@DBRef private User user;</code> from your Article class.</p>\n<p><code>User Repository</code></p>\n<pre><code>public interface UserRepository extends MongoRepository&lt;User, Long&gt; {\n\n    @Query(&quot;select u.articles from User u where u.username:=username&quot;)\n    List&lt;Article&gt; findArticlesbyUsername(@Param(&quot;username&quot;) String username);\n}\n</code></pre>\n<p>This will fetch only the list of articles through your User class.</p>\n"},{"comments":[{"owner":{"account_id":3188373,"reputation":1886,"user_id":3957225,"accept_rate":100,"display_name":"Dhaval Simaria"},"score":0,"creation_date":1685595014,"post_id":76373672,"comment_id":134682652,"body_markdown":"Going by the structure of your User class and Article class and assuming you removed `@DBRef` in one place, this solution looks good. But a lot depends on your functional requirement in order to properly decide whether to place User class object within Article class or vice-versa.","body":"Going by the structure of your User class and Article class and assuming you removed <code>@DBRef</code> in one place, this solution looks good. But a lot depends on your functional requirement in order to properly decide whether to place User class object within Article class or vice-versa."}],"tags":[],"owner":{"account_id":24199839,"reputation":11,"user_id":18157826,"display_name":"Vitalii Smahlenko"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685537464,"creation_date":1685537464,"answer_id":76373672,"question_id":76371841,"body_markdown":"I took the idea from the Dhaval Simaria solution, but I tweaked it a bit, and now it works.\r\n\r\n    public interface UserRepository extends MongoRepository&lt;User, Long&gt; {\r\n        Optional&lt;User&gt; findByUsername(String username);\r\n    \r\n        @Aggregation(pipeline = {\r\n                &quot;{$match: {username: ?0}}&quot;,\r\n                &quot;{$lookup: {from: &#39;articles&#39;, localField: &#39;id&#39;, foreignField: &#39;user.id&#39;, as: &#39;articles&#39;}}&quot;,\r\n                &quot;{$unwind: &#39;$articles&#39;}&quot;,\r\n                &quot;{$replaceRoot: {newRoot: &#39;$articles&#39;}}&quot;\r\n        })\r\n        List&lt;Article&gt; findArticlesByUsername(String username);\r\n    }\r\nIt is very important for me to know if it is the right decision to write this method in UserRepository or is it better to look for options to do it in ArticleRepository? ","title":"How to write a join query for mongoDb with Spring boot?","body":"<p>I took the idea from the Dhaval Simaria solution, but I tweaked it a bit, and now it works.</p>\n<pre><code>public interface UserRepository extends MongoRepository&lt;User, Long&gt; {\n    Optional&lt;User&gt; findByUsername(String username);\n\n    @Aggregation(pipeline = {\n            &quot;{$match: {username: ?0}}&quot;,\n            &quot;{$lookup: {from: 'articles', localField: 'id', foreignField: 'user.id', as: 'articles'}}&quot;,\n            &quot;{$unwind: '$articles'}&quot;,\n            &quot;{$replaceRoot: {newRoot: '$articles'}}&quot;\n    })\n    List&lt;Article&gt; findArticlesByUsername(String username);\n}\n</code></pre>\n<p>It is very important for me to know if it is the right decision to write this method in UserRepository or is it better to look for options to do it in ArticleRepository?</p>\n"}],"owner":{"account_id":24199839,"reputation":11,"user_id":18157826,"display_name":"Vitalii Smahlenko"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":333,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1685537464,"creation_date":1685523996,"question_id":76371841,"body_markdown":"everyone! \r\nI would be very grateful for your help, I am a beginner in working with MongoDB.\r\nI have 2 classes\r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Document(collection = &quot;user&quot;)\r\npublic class User {\r\n    @Transient\r\n    public static final String USER_SEQUENCE = &quot;user_sequence&quot;;\r\n    @Id\r\n    private Long id;\r\n    private String username;\r\n    private String password;\r\n    private Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\r\n    @DBRef\r\n    private List&lt;Article&gt; articles = new ArrayList&lt;&gt;();\r\n}\r\n```\r\nand\r\n\r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Document(collection = &quot;articles&quot;)\r\npublic class Article {\r\n    @Transient\r\n    public static final String ARTICLE_SEQUENCE = &quot;article_sequence&quot;;\r\n    @Id\r\n    private Long id;\r\n    private String text;\r\n    private int like = 0;\r\n    @Setter(AccessLevel.NONE)\r\n    private Set&lt;Long&gt; likedBy = new HashSet&lt;&gt;();\r\n    @Setter(AccessLevel.NONE)\r\n    private Set&lt;Long&gt; dislikedBy = new HashSet&lt;&gt;();\r\n    @DBRef\r\n    private User user;\r\n\r\n    public Article(Long id, String text, User user) {\r\n        this.id = id;\r\n        this.text = text;\r\n        this.user = user;\r\n    }\r\n}\r\n```\r\nI need to implement a method that will retrieve all articles by username\r\nThis is my implementation, but it doesn&#39;t work(((\r\n```\r\npublic interface ArticleRepository extends MongoRepository&lt;Article, Long&gt; {\r\n    List&lt;Article&gt; findAllByOrderByIdDesc();\r\n\r\n    @Aggregation(pipeline = {\r\n            &quot;{$lookup: {from: &#39;users&#39;, localField: &#39;user&#39;, foreignField: &#39;_id&#39;, as: &#39;user&#39;}}&quot;,\r\n            &quot;{$unwind: &#39;$user&#39;}&quot;,\r\n            &quot;{$match: {&#39;user.username&#39;: ?0}}&quot;\r\n    })\r\n    List&lt;Article&gt; findAllByUserUsername(String username);\r\n}\r\n```\r\n\r\nHelp me understand how to do this, please\r\n\r\n\r\nOf course, I can pull out the User by name and take the gender from it, but I think it&#39;s not right.\r\n\r\n```\r\npublic interface UserRepository extends MongoRepository&lt;User, Long&gt; {\r\n    Optional&lt;User&gt; findByUsername(String username);\r\n}\r\n```","title":"How to write a join query for mongoDb with Spring boot?","body":"<p>everyone!\nI would be very grateful for your help, I am a beginner in working with MongoDB.\nI have 2 classes</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Document(collection = &quot;user&quot;)\npublic class User {\n    @Transient\n    public static final String USER_SEQUENCE = &quot;user_sequence&quot;;\n    @Id\n    private Long id;\n    private String username;\n    private String password;\n    private Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\n    @DBRef\n    private List&lt;Article&gt; articles = new ArrayList&lt;&gt;();\n}\n</code></pre>\n<p>and</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Document(collection = &quot;articles&quot;)\npublic class Article {\n    @Transient\n    public static final String ARTICLE_SEQUENCE = &quot;article_sequence&quot;;\n    @Id\n    private Long id;\n    private String text;\n    private int like = 0;\n    @Setter(AccessLevel.NONE)\n    private Set&lt;Long&gt; likedBy = new HashSet&lt;&gt;();\n    @Setter(AccessLevel.NONE)\n    private Set&lt;Long&gt; dislikedBy = new HashSet&lt;&gt;();\n    @DBRef\n    private User user;\n\n    public Article(Long id, String text, User user) {\n        this.id = id;\n        this.text = text;\n        this.user = user;\n    }\n}\n</code></pre>\n<p>I need to implement a method that will retrieve all articles by username\nThis is my implementation, but it doesn't work(((</p>\n<pre><code>public interface ArticleRepository extends MongoRepository&lt;Article, Long&gt; {\n    List&lt;Article&gt; findAllByOrderByIdDesc();\n\n    @Aggregation(pipeline = {\n            &quot;{$lookup: {from: 'users', localField: 'user', foreignField: '_id', as: 'user'}}&quot;,\n            &quot;{$unwind: '$user'}&quot;,\n            &quot;{$match: {'user.username': ?0}}&quot;\n    })\n    List&lt;Article&gt; findAllByUserUsername(String username);\n}\n</code></pre>\n<p>Help me understand how to do this, please</p>\n<p>Of course, I can pull out the User by name and take the gender from it, but I think it's not right.</p>\n<pre><code>public interface UserRepository extends MongoRepository&lt;User, Long&gt; {\n    Optional&lt;User&gt; findByUsername(String username);\n}\n</code></pre>\n"},{"tags":["java","spring-boot","graalvm-native-image","spring-native"],"answers":[{"tags":[],"owner":{"account_id":8469968,"reputation":672,"user_id":9311364,"accept_rate":71,"display_name":"Ladu anand"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685537288,"creation_date":1685537288,"answer_id":76373651,"question_id":76370021,"body_markdown":"Fixed by adding below hints  \r\n\r\n```\r\n\t\t// Register Type Hints for class and interface since size() of EmptyList class\r\n\t\t\t// is not accessible because\r\n\t\t\t// JAVA Module system denies that access ; hence to circumvent that , we should\r\n\t\t\t// add hints for both interface and implementing class\r\n\t\t\t// so that Spring can call class methods through interface\r\n\t\t\thints.reflection().registerType(TypeReference.of(&quot;java.util.Collection&quot;),\r\n\t\t\t\t\tbuilder -&gt; builder.withMembers(MemberCategory.INVOKE_DECLARED_METHODS));\r\n\t\t\thints.reflection().registerType(TypeReference.of(&quot;java.util.Collections$EmptyList&quot;),\r\n\t\t\t\t\tbuilder -&gt; builder.withMembers(MemberCategory.INVOKE_DECLARED_METHODS));\r\n  ","title":"Register RuntimeHints for Collections EmptyList class not working","body":"<p>Fixed by adding below hints</p>\n<pre><code>        // Register Type Hints for class and interface since size() of EmptyList class\n            // is not accessible because\n            // JAVA Module system denies that access ; hence to circumvent that , we should\n            // add hints for both interface and implementing class\n            // so that Spring can call class methods through interface\n            hints.reflection().registerType(TypeReference.of(&quot;java.util.Collection&quot;),\n                    builder -&gt; builder.withMembers(MemberCategory.INVOKE_DECLARED_METHODS));\n            hints.reflection().registerType(TypeReference.of(&quot;java.util.Collections$EmptyList&quot;),\n                    builder -&gt; builder.withMembers(MemberCategory.INVOKE_DECLARED_METHODS));\n  \n</code></pre>\n"}],"owner":{"account_id":8469968,"reputation":672,"user_id":9311364,"accept_rate":71,"display_name":"Ladu anand"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1685537288,"creation_date":1685504692,"question_id":76370021,"body_markdown":"I have the following method and a Cacheable annotation on top of that. \r\n```\r\n@Cacheable(value = &quot;autosuggest&quot;, key = &quot;#term&quot;, unless = &quot;#result.size()==0&quot;)\r\n\t@Override\r\n\tpublic List&lt;AutoSuggestUser&gt; autoSuggestUsers(String term) {\r\n\t\tif (term.length() &lt;= 3)\r\n\t\t\treturn Collections.emptyList();\r\n        ....\r\n}\r\n```\r\nWhen I convert it to native image , I get the following error when function returns an EmptyList. \r\n\r\n```\r\norg.springframework.expression.spel.SpelEvaluationException: EL1029E: A problem occurred when trying to execute method &#39;size&#39; on object of type &#39;java.util.Collections$EmptyList&#39;: &#39;Problem invoking method: public int java.util.Collections$EmptyList.size()&#39;\r\n\tat org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:146)\r\n\tat java.base@17.0.5/java.lang.Thread.run(Thread.java:833)\r\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.core.thread.PlatformThreads.threadStartRoutine(PlatformThreads.java:775)\r\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.core.posix.thread.PosixPlatformThreads.pthreadStartRoutine(PosixPlatformThreads.java:203)\r\nCaused by: org.springframework.expression.AccessException: Problem invoking method: public int java.util.Collections$EmptyList.size()\r\n\tat org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute(ReflectiveMethodExecutor.java:143)\r\n\tat org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:139)\r\n\t... 70 more\r\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make public int java.util.Collections$EmptyList.size() accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @2055833f\r\n\tat java.base@17.0.5/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\r\n\tat java.base@17.0.5/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\r\n\tat java.base@17.0.5/java.lang.reflect.Method.checkCanSetAccessible(Method.java:199)\r\n\tat java.base@17.0.5/java.lang.reflect.Method.setAccessible(Method.java:193)\r\n\tat org.springframework.util.ReflectionUtils.makeAccessible(ReflectionUtils.java:574)\r\n\tat org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute(ReflectiveMethodExecutor.java:138)\r\n\t... 71 more\r\n```\r\n\r\nI have added a runtime hint to register EmptyList class but it doesn&#39;t seem to be working. \r\n```\r\n\tstatic class MyRuntimeHints implements RuntimeHintsRegistrar {\r\n\r\n\t\t@Override\r\n\t\tpublic void registerHints(RuntimeHints hints, ClassLoader classLoader) {\r\nhints.reflection().registerType(TypeReference.of(&quot;java.util.Collections$EmptyList&quot;),\r\n\t\t\t\t\tbuilder -&gt; builder.withMembers(MemberCategory.INVOKE_DECLARED_METHODS));\r\n\t\t}\r\n```","title":"Register RuntimeHints for Collections EmptyList class not working","body":"<p>I have the following method and a Cacheable annotation on top of that.</p>\n<pre><code>@Cacheable(value = &quot;autosuggest&quot;, key = &quot;#term&quot;, unless = &quot;#result.size()==0&quot;)\n    @Override\n    public List&lt;AutoSuggestUser&gt; autoSuggestUsers(String term) {\n        if (term.length() &lt;= 3)\n            return Collections.emptyList();\n        ....\n}\n</code></pre>\n<p>When I convert it to native image , I get the following error when function returns an EmptyList.</p>\n<pre><code>org.springframework.expression.spel.SpelEvaluationException: EL1029E: A problem occurred when trying to execute method 'size' on object of type 'java.util.Collections$EmptyList': 'Problem invoking method: public int java.util.Collections$EmptyList.size()'\n    at org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:146)\n    at java.base@17.0.5/java.lang.Thread.run(Thread.java:833)\n    at org.graalvm.nativeimage.builder/com.oracle.svm.core.thread.PlatformThreads.threadStartRoutine(PlatformThreads.java:775)\n    at org.graalvm.nativeimage.builder/com.oracle.svm.core.posix.thread.PosixPlatformThreads.pthreadStartRoutine(PosixPlatformThreads.java:203)\nCaused by: org.springframework.expression.AccessException: Problem invoking method: public int java.util.Collections$EmptyList.size()\n    at org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute(ReflectiveMethodExecutor.java:143)\n    at org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:139)\n    ... 70 more\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make public int java.util.Collections$EmptyList.size() accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @2055833f\n    at java.base@17.0.5/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\n    at java.base@17.0.5/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\n    at java.base@17.0.5/java.lang.reflect.Method.checkCanSetAccessible(Method.java:199)\n    at java.base@17.0.5/java.lang.reflect.Method.setAccessible(Method.java:193)\n    at org.springframework.util.ReflectionUtils.makeAccessible(ReflectionUtils.java:574)\n    at org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute(ReflectiveMethodExecutor.java:138)\n    ... 71 more\n</code></pre>\n<p>I have added a runtime hint to register EmptyList class but it doesn't seem to be working.</p>\n<pre><code>    static class MyRuntimeHints implements RuntimeHintsRegistrar {\n\n        @Override\n        public void registerHints(RuntimeHints hints, ClassLoader classLoader) {\nhints.reflection().registerType(TypeReference.of(&quot;java.util.Collections$EmptyList&quot;),\n                    builder -&gt; builder.withMembers(MemberCategory.INVOKE_DECLARED_METHODS));\n        }\n</code></pre>\n"},{"tags":["java","minecraft","spigot"],"answers":[{"comments":[{"owner":{"account_id":25477830,"reputation":27,"user_id":19274744,"display_name":"Acid"},"score":0,"creation_date":1685468490,"post_id":76366099,"comment_id":134663321,"body_markdown":"Okay thanks dude. I am pretty new to programming and  i think I will use the second Method u gave me as an answer, if I understand this correctly. Thanks for helping","body":"Okay thanks dude. I am pretty new to programming and  i think I will use the second Method u gave me as an answer, if I understand this correctly. Thanks for helping"},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1685473814,"post_id":76366099,"comment_id":134664283,"body_markdown":"With pleasure bro. Good luck while learning Java and spigot API :) I suggest you to check [my other question](https://stackoverflow.com/a/76124681/10952503) about inventories, it can be useful for you x)","body":"With pleasure bro. Good luck while learning Java and spigot API :) I suggest you to check <a href=\"https://stackoverflow.com/a/76124681/10952503\">my other question</a> about inventories, it can be useful for you x)"},{"owner":{"account_id":25477830,"reputation":27,"user_id":19274744,"display_name":"Acid"},"score":0,"creation_date":1685478341,"post_id":76366099,"comment_id":134665112,"body_markdown":"Sure man. I was first willing to ask you to add me on discord, because I can ask you questions that way, but I guess that would be really annoying for you because I have yet another question and I will have many more. But thanks :)","body":"Sure man. I was first willing to ask you to add me on discord, because I can ask you questions that way, but I guess that would be really annoying for you because I have yet another question and I will have many more. But thanks :)"},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1685513388,"post_id":76366099,"comment_id":134668713,"body_markdown":"@ToxicFactoryGames I already have some people that come on discord for things like that, and I no longer want to do this. You can add how much question you want here, on SO. I&#39;m always checking for tags [tag:spigot] and [tag:minecraft] and trying to answer to them so no worry","body":"@ToxicFactoryGames I already have some people that come on discord for things like that, and I no longer want to do this. You can add how much question you want here, on SO. I&#39;m always checking for tags <a href=\"https://stackoverflow.com/questions/tagged/spigot\">spigot</a> and <a href=\"https://stackoverflow.com/questions/tagged/minecraft\">minecraft</a> and trying to answer to them so no worry"},{"owner":{"account_id":25477830,"reputation":27,"user_id":19274744,"display_name":"Acid"},"score":0,"creation_date":1685518178,"post_id":76366099,"comment_id":134669568,"body_markdown":"I understand that. The only problem with this webside is, that I run into problems and cluelessness very often and have an delay of three days here. But thanks for far dude","body":"I understand that. The only problem with this webside is, that I run into problems and cluelessness very often and have an delay of three days here. But thanks for far dude"},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1685519861,"post_id":76366099,"comment_id":134669898,"body_markdown":"Why 3 days delay? You asked your question 17h ago, I answered 15 minutes after. You can check for the [timeline](https://stackoverflow.com/posts/76366017/timeline) for more","body":"Why 3 days delay? You asked your question 17h ago, I answered 15 minutes after. You can check for the <a href=\"https://stackoverflow.com/posts/76366017/timeline\">timeline</a> for more"},{"owner":{"account_id":25477830,"reputation":27,"user_id":19274744,"display_name":"Acid"},"score":0,"creation_date":1685535672,"post_id":76366099,"comment_id":134673316,"body_markdown":"Yeah, I meant that I can only ask an question every three days. I dont know if its because of my current repuatation or smt but it says that","body":"Yeah, I meant that I can only ask an question every three days. I dont know if its because of my current repuatation or smt but it says that"},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1685535730,"post_id":76366099,"comment_id":134673341,"body_markdown":"Did you got like closed &amp; deleted posts? It could like you have been post-limited because of previous bad one. Thanks to this one, maybe you can post a new one","body":"Did you got like closed &amp; deleted posts? It could like you have been post-limited because of previous bad one. Thanks to this one, maybe you can post a new one"},{"owner":{"account_id":25477830,"reputation":27,"user_id":19274744,"display_name":"Acid"},"score":0,"creation_date":1685536646,"post_id":76366099,"comment_id":134673584,"body_markdown":"Yeah, I did have one bad one and I didnt even did anything worng. I showed all my code, but people startet saying I need to give more code. So  the score of that question was -2 and I deleted that afterwards. But I dont really know, I only asked 3 questions in total till now and none of them got any reputation without the negative one so yeah, maybe","body":"Yeah, I did have one bad one and I didnt even did anything worng. I showed all my code, but people startet saying I need to give more code. So  the score of that question was -2 and I deleted that afterwards. But I dont really know, I only asked 3 questions in total till now and none of them got any reputation without the negative one so yeah, maybe"}],"tags":[],"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"comment_count":9,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1685458341,"creation_date":1685458341,"answer_id":76366099,"question_id":76366017,"body_markdown":"The issue comes because the variable is out of your actual scope. It have been create in another method, and now the variable by itself isn&#39;t accessible.\r\n\r\nIf you want to keep the same inventory (not specially recommended), you can put into an `HashMap&lt;&gt;()` and get it after. Exemple:\r\n```\r\n\r\npublic class Copper_Inventory implements CommandExecutor {\r\n\r\n    public static final HashMap&lt;Player, Inventory&gt; INVENTORIES = new HashMap&lt;&gt;();\r\n\r\n    @Override\r\n    public boolean onCommand(CommandSender sender, Command command, String label, String[] args) {\r\n        if(!(sender instanceof Player)) return false;\r\n        Player player = (Player) sender;\r\n\r\n        Inventory copperInventory = Bukkit.createInventory(null , 4 * 9 , &quot;&#167;5Copper \r\nTrails:&quot;);\r\n        // fill inventory\r\n        player.openInventory(copperInventory);\r\n        INVENTORIES.put(player, copperInventory);\r\n    }\r\n}\r\n```\r\nThen, when closing inventory, use: `player.openInventort(Copper_Inventory.INVENTORIES.get(player))`.\r\n\r\nBut, the most recommended way is not this one.\r\n\r\n### You can simply re-open a new one\r\n\r\nYou can create a new class which can be like that:\r\n```java\r\npublic class Inventories {\r\n\r\n    public static Inventory createCopperInventory(Player p) {\r\n        Inventory copperInventory = Bukkit.createInventory(null , 4 * 9 , &quot;&#167;5Copper \r\nTrails:&quot;);\r\n        // fill inventory\r\n        return copperInventory;\r\n    }\r\n}\r\n```\r\nAnd then, each time use `player.openInventory(Inventories.createCopperInventory(player))`.","title":"How to open an Inventory with an Item inside an Inventory","body":"<p>The issue comes because the variable is out of your actual scope. It have been create in another method, and now the variable by itself isn't accessible.</p>\n<p>If you want to keep the same inventory (not specially recommended), you can put into an <code>HashMap&lt;&gt;()</code> and get it after. Exemple:</p>\n<pre><code>\npublic class Copper_Inventory implements CommandExecutor {\n\n    public static final HashMap&lt;Player, Inventory&gt; INVENTORIES = new HashMap&lt;&gt;();\n\n    @Override\n    public boolean onCommand(CommandSender sender, Command command, String label, String[] args) {\n        if(!(sender instanceof Player)) return false;\n        Player player = (Player) sender;\n\n        Inventory copperInventory = Bukkit.createInventory(null , 4 * 9 , &quot;ยง5Copper \nTrails:&quot;);\n        // fill inventory\n        player.openInventory(copperInventory);\n        INVENTORIES.put(player, copperInventory);\n    }\n}\n</code></pre>\n<p>Then, when closing inventory, use: <code>player.openInventort(Copper_Inventory.INVENTORIES.get(player))</code>.</p>\n<p>But, the most recommended way is not this one.</p>\n<h3>You can simply re-open a new one</h3>\n<p>You can create a new class which can be like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Inventories {\n\n    public static Inventory createCopperInventory(Player p) {\n        Inventory copperInventory = Bukkit.createInventory(null , 4 * 9 , &quot;ยง5Copper \nTrails:&quot;);\n        // fill inventory\n        return copperInventory;\n    }\n}\n</code></pre>\n<p>And then, each time use <code>player.openInventory(Inventories.createCopperInventory(player))</code>.</p>\n"}],"owner":{"account_id":25477830,"reputation":27,"user_id":19274744,"display_name":"Acid"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76366099,"answer_count":1,"score":1,"last_activity_date":1685537111,"creation_date":1685457812,"question_id":76366017,"body_markdown":"By just writing the code in one class and the write:\r\n\r\n```\r\ncase &quot;example&quot;:\r\n     player.openInventory(exampleInv);\r\n     break;\r\n   \r\n```\r\n\r\nBut because I like my things organized and well sorted I wrote the Inventory inside another class as the Inventory Click Event.\r\n\r\nHere is the class with the `InvClickEvent`:\r\n\r\n```\r\npackage de.t0x1ccr34t0r.charactertrails.listeners;\r\n\r\nimport org.bukkit.entity.Player;\r\nimport org.bukkit.event.EventHandler;\r\nimport org.bukkit.event.Listener;\r\nimport org.bukkit.event.inventory.InventoryClickEvent;\r\n\r\npublic class InventoryListener implements Listener{\r\n\r\n    @EventHandler\r\n    public void onInvClick(InventoryClickEvent event) {\r\n        if(event.getCurrentItem() == null) return;\r\n        if(event.getView().getTitle() == &quot;&#167;5Trails:&quot;){\r\n            Player player = (Player) event.getWhoClicked();\r\n            event.setCancelled(true);\r\n            if(event.getCurrentItem().getItemMeta().hasLocalizedName()) {\r\n                switch (event.getCurrentItem().getItemMeta().getLocalizedName()) {\r\n                    case &quot;Close&quot;:\r\n                        player.closeInventory();\r\n                        break;\r\n                    case &quot;Copper&quot;:\r\n                        player.closeInventory();\r\n                        break;\r\n                    case &quot;Iron&quot;:\r\n                        player.closeInventory();\r\n                        break;\r\n                    case &quot;Gold&quot;:\r\n                        player.closeInventory();\r\n                        break;\r\n                    case &quot;Diamond&quot;:\r\n                        player.closeInventory();\r\n                        break;\r\n                    case &quot;Emerald&quot;:\r\n                        player.closeInventory();\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nit all says `player.closeinventory()` because the `player.openInventory()` doesn&#39;t work yet and with that I need help. I made several classes like the `copper_Inventory` which I show you here:\r\n\r\n```\r\npackage de.t0x1ccr34t0r.charactertrails.inventories;\r\n\r\nimport org.bukkit.Bukkit;\r\nimport org.bukkit.ChatColor;\r\nimport org.bukkit.Material;\r\nimport org.bukkit.command.Command;\r\nimport org.bukkit.command.CommandExecutor;\r\nimport org.bukkit.command.CommandSender;\r\nimport org.bukkit.entity.Player;\r\nimport org.bukkit.inventory.Inventory;\r\nimport org.bukkit.inventory.ItemStack;\r\nimport org.bukkit.inventory.meta.ItemMeta;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class Copper_Inventory implements CommandExecutor {\r\n\r\n    @Override\r\n    public boolean onCommand(CommandSender sender1, Command cmd1, String s1, String[] strings1) {\r\n        if(!(sender1 instanceof Player)) return false;\r\n        Player player1 = (Player) sender1;\r\n\r\n        Inventory copperInventory = Bukkit.createInventory(null , 4 * 9 , &quot;&#167;5Copper Trails:&quot;);\r\n\r\n        ItemStack ia = new ItemStack(Material.BARRIER);\r\n        ItemMeta ma = ia.getItemMeta();\r\n        ma.setLocalizedName(&quot;Close&quot;);\r\n        ma.setDisplayName(&quot;&#167;cClose&quot;);\r\n        ia.setItemMeta(ma);\r\n        copperInventory.setItem(31 , ia);\r\n\r\n        ItemStack ib = new ItemStack(Material.ARROW);\r\n        ItemMeta mb = ib.getItemMeta();\r\n        mb.setLocalizedName(&quot;Back&quot;);\r\n        mb.setDisplayName(&quot;&#167;7Back&quot;);\r\n        ib.setItemMeta(mb);\r\n        copperInventory.setItem(27 , ib);\r\n\r\n        player1.openInventory(copperInventory);\r\n\r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\nSo that code actually works. But only with an command in-game. \r\nIn the end, I want something like this:\r\n\r\n```\r\ncase &quot;copper&quot;:\r\n     player.openInventory(copperInventory);\r\n     break;\r\n   \r\n```\r\n\r\nBut this obviously doesn&#39;t work of course, because the program cant find &quot;copperInventory&quot;.\r\n\r\nI use the word copper in case &quot;copper&quot;: from another class which looks like this and this already works:\r\n\r\n```\r\npackage de.t0x1ccr34t0r.charactertrails.inventories;\r\n\r\nimport org.bukkit.Bukkit;\r\nimport org.bukkit.ChatColor;\r\nimport org.bukkit.Material;\r\nimport org.bukkit.command.Command;\r\nimport org.bukkit.command.CommandExecutor;\r\nimport org.bukkit.command.CommandSender;\r\nimport org.bukkit.entity.Player;\r\nimport org.bukkit.inventory.Inventory;\r\nimport org.bukkit.inventory.ItemStack;\r\nimport org.bukkit.inventory.meta.ItemMeta;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class Main_Inventory implements CommandExecutor {\r\n    @Override\r\n    public boolean onCommand(CommandSender sender, Command command, String label, String[] args) {\r\n        if(!(sender instanceof Player)) return false;\r\n        Player player = (Player) sender;\r\n\r\n        Inventory mainInventory = Bukkit.createInventory(null , 3 * 9 , &quot;&#167;5Trails:&quot;);\r\n\r\n        ItemStack i1 = new ItemStack(Material.COPPER_INGOT);\r\n        ItemMeta m1 = i1.getItemMeta();\r\n        m1.setLocalizedName(&quot;Copper&quot;);\r\n        m1.setDisplayName(ChatColor.WHITE + &quot;example&quot;);\r\n        i1.setItemMeta(m1);\r\n        mainInventory.setItem(11 , i1);\r\n\r\n        player.openInventory(mainInventory);\r\n\r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\nSo my question is now: How do I do define the variable &quot;copperInventory&quot; from public class Copper_Inventory inside the &quot;case &quot;copper&quot;: in public class InventoryListener.\r\n\r\nAlso, I don&#39;t know if that is important, you may see these classes are not in the same package. I made multiple subpackages to keep everything smooth.\r\n\r\nSo in the end, my code should look like this:\r\n\r\n```\r\ncase &quot;copper&quot;:\r\n     player.openInventory(copperInventory);\r\n     break;\r\n```\r\n\r\nBut I just don&#39;t know how to do this whilst having the variables inside other classes. \r\n\r\nCould you help me with that?","title":"How to open an Inventory with an Item inside an Inventory","body":"<p>By just writing the code in one class and the write:</p>\n<pre><code>case &quot;example&quot;:\n     player.openInventory(exampleInv);\n     break;\n   \n</code></pre>\n<p>But because I like my things organized and well sorted I wrote the Inventory inside another class as the Inventory Click Event.</p>\n<p>Here is the class with the <code>InvClickEvent</code>:</p>\n<pre><code>package de.t0x1ccr34t0r.charactertrails.listeners;\n\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.inventory.InventoryClickEvent;\n\npublic class InventoryListener implements Listener{\n\n    @EventHandler\n    public void onInvClick(InventoryClickEvent event) {\n        if(event.getCurrentItem() == null) return;\n        if(event.getView().getTitle() == &quot;ยง5Trails:&quot;){\n            Player player = (Player) event.getWhoClicked();\n            event.setCancelled(true);\n            if(event.getCurrentItem().getItemMeta().hasLocalizedName()) {\n                switch (event.getCurrentItem().getItemMeta().getLocalizedName()) {\n                    case &quot;Close&quot;:\n                        player.closeInventory();\n                        break;\n                    case &quot;Copper&quot;:\n                        player.closeInventory();\n                        break;\n                    case &quot;Iron&quot;:\n                        player.closeInventory();\n                        break;\n                    case &quot;Gold&quot;:\n                        player.closeInventory();\n                        break;\n                    case &quot;Diamond&quot;:\n                        player.closeInventory();\n                        break;\n                    case &quot;Emerald&quot;:\n                        player.closeInventory();\n                        break;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>it all says <code>player.closeinventory()</code> because the <code>player.openInventory()</code> doesn't work yet and with that I need help. I made several classes like the <code>copper_Inventory</code> which I show you here:</p>\n<pre><code>package de.t0x1ccr34t0r.charactertrails.inventories;\n\nimport org.bukkit.Bukkit;\nimport org.bukkit.ChatColor;\nimport org.bukkit.Material;\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandExecutor;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.entity.Player;\nimport org.bukkit.inventory.Inventory;\nimport org.bukkit.inventory.ItemStack;\nimport org.bukkit.inventory.meta.ItemMeta;\n\nimport java.util.ArrayList;\n\npublic class Copper_Inventory implements CommandExecutor {\n\n    @Override\n    public boolean onCommand(CommandSender sender1, Command cmd1, String s1, String[] strings1) {\n        if(!(sender1 instanceof Player)) return false;\n        Player player1 = (Player) sender1;\n\n        Inventory copperInventory = Bukkit.createInventory(null , 4 * 9 , &quot;ยง5Copper Trails:&quot;);\n\n        ItemStack ia = new ItemStack(Material.BARRIER);\n        ItemMeta ma = ia.getItemMeta();\n        ma.setLocalizedName(&quot;Close&quot;);\n        ma.setDisplayName(&quot;ยงcClose&quot;);\n        ia.setItemMeta(ma);\n        copperInventory.setItem(31 , ia);\n\n        ItemStack ib = new ItemStack(Material.ARROW);\n        ItemMeta mb = ib.getItemMeta();\n        mb.setLocalizedName(&quot;Back&quot;);\n        mb.setDisplayName(&quot;ยง7Back&quot;);\n        ib.setItemMeta(mb);\n        copperInventory.setItem(27 , ib);\n\n        player1.openInventory(copperInventory);\n\n        return false;\n    }\n}\n</code></pre>\n<p>So that code actually works. But only with an command in-game.\nIn the end, I want something like this:</p>\n<pre><code>case &quot;copper&quot;:\n     player.openInventory(copperInventory);\n     break;\n   \n</code></pre>\n<p>But this obviously doesn't work of course, because the program cant find &quot;copperInventory&quot;.</p>\n<p>I use the word copper in case &quot;copper&quot;: from another class which looks like this and this already works:</p>\n<pre><code>package de.t0x1ccr34t0r.charactertrails.inventories;\n\nimport org.bukkit.Bukkit;\nimport org.bukkit.ChatColor;\nimport org.bukkit.Material;\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandExecutor;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.entity.Player;\nimport org.bukkit.inventory.Inventory;\nimport org.bukkit.inventory.ItemStack;\nimport org.bukkit.inventory.meta.ItemMeta;\n\nimport java.util.ArrayList;\n\npublic class Main_Inventory implements CommandExecutor {\n    @Override\n    public boolean onCommand(CommandSender sender, Command command, String label, String[] args) {\n        if(!(sender instanceof Player)) return false;\n        Player player = (Player) sender;\n\n        Inventory mainInventory = Bukkit.createInventory(null , 3 * 9 , &quot;ยง5Trails:&quot;);\n\n        ItemStack i1 = new ItemStack(Material.COPPER_INGOT);\n        ItemMeta m1 = i1.getItemMeta();\n        m1.setLocalizedName(&quot;Copper&quot;);\n        m1.setDisplayName(ChatColor.WHITE + &quot;example&quot;);\n        i1.setItemMeta(m1);\n        mainInventory.setItem(11 , i1);\n\n        player.openInventory(mainInventory);\n\n        return false;\n    }\n}\n</code></pre>\n<p>So my question is now: How do I do define the variable &quot;copperInventory&quot; from public class Copper_Inventory inside the &quot;case &quot;copper&quot;: in public class InventoryListener.</p>\n<p>Also, I don't know if that is important, you may see these classes are not in the same package. I made multiple subpackages to keep everything smooth.</p>\n<p>So in the end, my code should look like this:</p>\n<pre><code>case &quot;copper&quot;:\n     player.openInventory(copperInventory);\n     break;\n</code></pre>\n<p>But I just don't know how to do this whilst having the variables inside other classes.</p>\n<p>Could you help me with that?</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":1345966,"reputation":34645,"user_id":1286723,"accept_rate":60,"display_name":"Shankar Agarwal"},"comment_count":0,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1338103991,"creation_date":1338103689,"answer_id":10772354,"question_id":10772329,"body_markdown":"Copied from [Here][1]\r\n\r\n     /**\r\n         * network iso code: referred and listed at:\r\n         * http://en.wikipedia.org/wiki/List_of_mobile_country_codes\r\n         */\r\n          TelephonyManager manager = (TelephonyManager) getApplicationContext().getSystemService(Context.TELEPHONY_SERVICE);\r\n        String DEVICE_COUNTRY = manager.getNetworkCountryIso();\r\n\r\nUpdate:: Copied from [here][2]\r\n\r\n    String locale = getApplicationCOntext().getResources().getConfiguration().locale.getCountry();\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/5402253/getting-telephone-country-code-with-android\r\n  [2]: https://stackoverflow.com/questions/3659809/where-am-i-get-country","title":"how to get country phone prefix from iso","body":"<p>Copied from <a href=\"https://stackoverflow.com/questions/5402253/getting-telephone-country-code-with-android\">Here</a></p>\n\n<pre><code> /**\n     * network iso code: referred and listed at:\n     * http://en.wikipedia.org/wiki/List_of_mobile_country_codes\n     */\n      TelephonyManager manager = (TelephonyManager) getApplicationContext().getSystemService(Context.TELEPHONY_SERVICE);\n    String DEVICE_COUNTRY = manager.getNetworkCountryIso();\n</code></pre>\n\n<p>Update:: Copied from <a href=\"https://stackoverflow.com/questions/3659809/where-am-i-get-country\">here</a></p>\n\n<pre><code>String locale = getApplicationCOntext().getResources().getConfiguration().locale.getCountry();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":34570,"reputation":17845,"user_id":97777,"accept_rate":82,"display_name":"Duncan McGregor"},"score":1,"creation_date":1408729121,"post_id":10776064,"comment_id":39714852,"body_markdown":"Could do with a bit of work - lots of repeated empty entries for &quot;AQ&quot;, &quot;AU&quot; is set and then unset...","body":"Could do with a bit of work - lots of repeated empty entries for &quot;AQ&quot;, &quot;AU&quot; is set and then unset..."},{"owner":{"account_id":179362,"reputation":15005,"user_id":411965,"accept_rate":87,"display_name":"oshai"},"score":0,"creation_date":1408827276,"post_id":10776064,"comment_id":39740538,"body_markdown":"@Abhi - I wrote it myself.","body":"@Abhi - I wrote it myself."},{"owner":{"account_id":179362,"reputation":15005,"user_id":411965,"accept_rate":87,"display_name":"oshai"},"score":0,"creation_date":1408827302,"post_id":10776064,"comment_id":39740545,"body_markdown":"@DuncanMcGregor - Thanks, I think I fixed those entries now.","body":"@DuncanMcGregor - Thanks, I think I fixed those entries now."},{"owner":{"account_id":3816702,"reputation":1988,"user_id":3165903,"accept_rate":56,"display_name":"Kamil Witkowski"},"score":0,"creation_date":1469190105,"post_id":10776064,"comment_id":64446833,"body_markdown":"better change this line:\n   `country2phone.put(&quot;&quot;, &quot;+357&quot;);`","body":"better change this line:    <code>country2phone.put(&quot;&quot;, &quot;+357&quot;);</code>"},{"owner":{"account_id":6657973,"reputation":2635,"user_id":5137879,"accept_rate":20,"display_name":"SpaceBison"},"score":2,"creation_date":1515065197,"post_id":10776064,"comment_id":83162921,"body_markdown":"Is this line all right? `country2phone.put(&quot;DO&quot;, &quot;+1-809and1-829&quot;);` There are a couple other similar ones that might need fixing, too.","body":"Is this line all right? <code>country2phone.put(&quot;DO&quot;, &quot;+1-809and1-829&quot;);</code> There are a couple other similar ones that might need fixing, too."}],"tags":[],"owner":{"account_id":179362,"reputation":15005,"user_id":411965,"accept_rate":87,"display_name":"oshai"},"comment_count":5,"down_vote_count":2,"up_vote_count":43,"is_accepted":true,"score":41,"last_activity_date":1408827238,"creation_date":1338141361,"answer_id":10776064,"question_id":10772329,"body_markdown":"I found a place where I can get the mapping in csv file. [check here.][1]  \r\n\r\nAlso, I changed it into a class that translate the country code into phone prefix. here it is:  \r\n\r\n        \r\n    public class Iso2Phone {\r\n    public static String getPhone(String code) {\r\n    \treturn country2phone.get(code.toUpperCase());\r\n    }\r\n    public static Map&lt;String, String&gt; getAll(){\r\n    \treturn country2phone;\r\n    }\r\n    private static Map&lt;String, String&gt; country2phone = new HashMap&lt;String, String&gt;();\r\n    static {\r\n    \tcountry2phone.put(&quot;AF&quot;, &quot;+93&quot;);\r\n    \tcountry2phone.put(&quot;AL&quot;, &quot;+355&quot;);\r\n    \tcountry2phone.put(&quot;DZ&quot;, &quot;+213&quot;);\r\n    \tcountry2phone.put(&quot;AD&quot;, &quot;+376&quot;);\r\n    \tcountry2phone.put(&quot;AO&quot;, &quot;+244&quot;);\r\n    \tcountry2phone.put(&quot;AG&quot;, &quot;+1-268&quot;);\r\n    \tcountry2phone.put(&quot;AR&quot;, &quot;+54&quot;);\r\n    \tcountry2phone.put(&quot;AM&quot;, &quot;+374&quot;);\r\n    \tcountry2phone.put(&quot;AU&quot;, &quot;+61&quot;);\r\n    \tcountry2phone.put(&quot;AT&quot;, &quot;+43&quot;);\r\n    \tcountry2phone.put(&quot;AZ&quot;, &quot;+994&quot;);\r\n    \tcountry2phone.put(&quot;BS&quot;, &quot;+1-242&quot;);\r\n    \tcountry2phone.put(&quot;BH&quot;, &quot;+973&quot;);\r\n    \tcountry2phone.put(&quot;BD&quot;, &quot;+880&quot;);\r\n    \tcountry2phone.put(&quot;BB&quot;, &quot;+1-246&quot;);\r\n    \tcountry2phone.put(&quot;BY&quot;, &quot;+375&quot;);\r\n    \tcountry2phone.put(&quot;BE&quot;, &quot;+32&quot;);\r\n    \tcountry2phone.put(&quot;BZ&quot;, &quot;+501&quot;);\r\n    \tcountry2phone.put(&quot;BJ&quot;, &quot;+229&quot;);\r\n    \tcountry2phone.put(&quot;BT&quot;, &quot;+975&quot;);\r\n    \tcountry2phone.put(&quot;BO&quot;, &quot;+591&quot;);\r\n    \tcountry2phone.put(&quot;BA&quot;, &quot;+387&quot;);\r\n    \tcountry2phone.put(&quot;BW&quot;, &quot;+267&quot;);\r\n    \tcountry2phone.put(&quot;BR&quot;, &quot;+55&quot;);\r\n    \tcountry2phone.put(&quot;BN&quot;, &quot;+673&quot;);\r\n    \tcountry2phone.put(&quot;BG&quot;, &quot;+359&quot;);\r\n    \tcountry2phone.put(&quot;BF&quot;, &quot;+226&quot;);\r\n    \tcountry2phone.put(&quot;BI&quot;, &quot;+257&quot;);\r\n    \tcountry2phone.put(&quot;KH&quot;, &quot;+855&quot;);\r\n    \tcountry2phone.put(&quot;CM&quot;, &quot;+237&quot;);\r\n    \tcountry2phone.put(&quot;CA&quot;, &quot;+1&quot;);\r\n    \tcountry2phone.put(&quot;CV&quot;, &quot;+238&quot;);\r\n    \tcountry2phone.put(&quot;CF&quot;, &quot;+236&quot;);\r\n    \tcountry2phone.put(&quot;TD&quot;, &quot;+235&quot;);\r\n    \tcountry2phone.put(&quot;CL&quot;, &quot;+56&quot;);\r\n    \tcountry2phone.put(&quot;CN&quot;, &quot;+86&quot;);\r\n    \tcountry2phone.put(&quot;CO&quot;, &quot;+57&quot;);\r\n    \tcountry2phone.put(&quot;KM&quot;, &quot;+269&quot;);\r\n    \tcountry2phone.put(&quot;CD&quot;, &quot;+243&quot;);\r\n    \tcountry2phone.put(&quot;CG&quot;, &quot;+242&quot;);\r\n    \tcountry2phone.put(&quot;CR&quot;, &quot;+506&quot;);\r\n    \tcountry2phone.put(&quot;CI&quot;, &quot;+225&quot;);\r\n    \tcountry2phone.put(&quot;HR&quot;, &quot;+385&quot;);\r\n    \tcountry2phone.put(&quot;CU&quot;, &quot;+53&quot;);\r\n    \tcountry2phone.put(&quot;CY&quot;, &quot;+357&quot;);\r\n    \tcountry2phone.put(&quot;CZ&quot;, &quot;+420&quot;);\r\n    \tcountry2phone.put(&quot;DK&quot;, &quot;+45&quot;);\r\n    \tcountry2phone.put(&quot;DJ&quot;, &quot;+253&quot;);\r\n    \tcountry2phone.put(&quot;DM&quot;, &quot;+1-767&quot;);\r\n    \tcountry2phone.put(&quot;DO&quot;, &quot;+1-809and1-829&quot;);\r\n    \tcountry2phone.put(&quot;EC&quot;, &quot;+593&quot;);\r\n    \tcountry2phone.put(&quot;EG&quot;, &quot;+20&quot;);\r\n    \tcountry2phone.put(&quot;SV&quot;, &quot;+503&quot;);\r\n    \tcountry2phone.put(&quot;GQ&quot;, &quot;+240&quot;);\r\n    \tcountry2phone.put(&quot;ER&quot;, &quot;+291&quot;);\r\n    \tcountry2phone.put(&quot;EE&quot;, &quot;+372&quot;);\r\n    \tcountry2phone.put(&quot;ET&quot;, &quot;+251&quot;);\r\n    \tcountry2phone.put(&quot;FJ&quot;, &quot;+679&quot;);\r\n    \tcountry2phone.put(&quot;FI&quot;, &quot;+358&quot;);\r\n    \tcountry2phone.put(&quot;FR&quot;, &quot;+33&quot;);\r\n    \tcountry2phone.put(&quot;GA&quot;, &quot;+241&quot;);\r\n    \tcountry2phone.put(&quot;GM&quot;, &quot;+220&quot;);\r\n    \tcountry2phone.put(&quot;GE&quot;, &quot;+995&quot;);\r\n    \tcountry2phone.put(&quot;DE&quot;, &quot;+49&quot;);\r\n    \tcountry2phone.put(&quot;GH&quot;, &quot;+233&quot;);\r\n    \tcountry2phone.put(&quot;GR&quot;, &quot;+30&quot;);\r\n    \tcountry2phone.put(&quot;GD&quot;, &quot;+1-473&quot;);\r\n    \tcountry2phone.put(&quot;GT&quot;, &quot;+502&quot;);\r\n    \tcountry2phone.put(&quot;GN&quot;, &quot;+224&quot;);\r\n    \tcountry2phone.put(&quot;GW&quot;, &quot;+245&quot;);\r\n    \tcountry2phone.put(&quot;GY&quot;, &quot;+592&quot;);\r\n    \tcountry2phone.put(&quot;HT&quot;, &quot;+509&quot;);\r\n    \tcountry2phone.put(&quot;HN&quot;, &quot;+504&quot;);\r\n    \tcountry2phone.put(&quot;HU&quot;, &quot;+36&quot;);\r\n    \tcountry2phone.put(&quot;IS&quot;, &quot;+354&quot;);\r\n    \tcountry2phone.put(&quot;IN&quot;, &quot;+91&quot;);\r\n    \tcountry2phone.put(&quot;ID&quot;, &quot;+62&quot;);\r\n    \tcountry2phone.put(&quot;IR&quot;, &quot;+98&quot;);\r\n    \tcountry2phone.put(&quot;IQ&quot;, &quot;+964&quot;);\r\n    \tcountry2phone.put(&quot;IE&quot;, &quot;+353&quot;);\r\n    \tcountry2phone.put(&quot;IL&quot;, &quot;+972&quot;);\r\n    \tcountry2phone.put(&quot;IT&quot;, &quot;+39&quot;);\r\n    \tcountry2phone.put(&quot;JM&quot;, &quot;+1-876&quot;);\r\n    \tcountry2phone.put(&quot;JP&quot;, &quot;+81&quot;);\r\n    \tcountry2phone.put(&quot;JO&quot;, &quot;+962&quot;);\r\n    \tcountry2phone.put(&quot;KZ&quot;, &quot;+7&quot;);\r\n    \tcountry2phone.put(&quot;KE&quot;, &quot;+254&quot;);\r\n    \tcountry2phone.put(&quot;KI&quot;, &quot;+686&quot;);\r\n    \tcountry2phone.put(&quot;KP&quot;, &quot;+850&quot;);\r\n    \tcountry2phone.put(&quot;KR&quot;, &quot;+82&quot;);\r\n    \tcountry2phone.put(&quot;KW&quot;, &quot;+965&quot;);\r\n    \tcountry2phone.put(&quot;KG&quot;, &quot;+996&quot;);\r\n    \tcountry2phone.put(&quot;LA&quot;, &quot;+856&quot;);\r\n    \tcountry2phone.put(&quot;LV&quot;, &quot;+371&quot;);\r\n    \tcountry2phone.put(&quot;LB&quot;, &quot;+961&quot;);\r\n    \tcountry2phone.put(&quot;LS&quot;, &quot;+266&quot;);\r\n    \tcountry2phone.put(&quot;LR&quot;, &quot;+231&quot;);\r\n    \tcountry2phone.put(&quot;LY&quot;, &quot;+218&quot;);\r\n    \tcountry2phone.put(&quot;LI&quot;, &quot;+423&quot;);\r\n    \tcountry2phone.put(&quot;LT&quot;, &quot;+370&quot;);\r\n    \tcountry2phone.put(&quot;LU&quot;, &quot;+352&quot;);\r\n    \tcountry2phone.put(&quot;MK&quot;, &quot;+389&quot;);\r\n    \tcountry2phone.put(&quot;MG&quot;, &quot;+261&quot;);\r\n    \tcountry2phone.put(&quot;MW&quot;, &quot;+265&quot;);\r\n    \tcountry2phone.put(&quot;MY&quot;, &quot;+60&quot;);\r\n    \tcountry2phone.put(&quot;MV&quot;, &quot;+960&quot;);\r\n    \tcountry2phone.put(&quot;ML&quot;, &quot;+223&quot;);\r\n    \tcountry2phone.put(&quot;MT&quot;, &quot;+356&quot;);\r\n    \tcountry2phone.put(&quot;MH&quot;, &quot;+692&quot;);\r\n    \tcountry2phone.put(&quot;MR&quot;, &quot;+222&quot;);\r\n    \tcountry2phone.put(&quot;MU&quot;, &quot;+230&quot;);\r\n    \tcountry2phone.put(&quot;MX&quot;, &quot;+52&quot;);\r\n    \tcountry2phone.put(&quot;FM&quot;, &quot;+691&quot;);\r\n    \tcountry2phone.put(&quot;MD&quot;, &quot;+373&quot;);\r\n    \tcountry2phone.put(&quot;MC&quot;, &quot;+377&quot;);\r\n    \tcountry2phone.put(&quot;MN&quot;, &quot;+976&quot;);\r\n    \tcountry2phone.put(&quot;ME&quot;, &quot;+382&quot;);\r\n    \tcountry2phone.put(&quot;MA&quot;, &quot;+212&quot;);\r\n    \tcountry2phone.put(&quot;MZ&quot;, &quot;+258&quot;);\r\n    \tcountry2phone.put(&quot;MM&quot;, &quot;+95&quot;);\r\n    \tcountry2phone.put(&quot;NA&quot;, &quot;+264&quot;);\r\n    \tcountry2phone.put(&quot;NR&quot;, &quot;+674&quot;);\r\n    \tcountry2phone.put(&quot;NP&quot;, &quot;+977&quot;);\r\n    \tcountry2phone.put(&quot;NL&quot;, &quot;+31&quot;);\r\n    \tcountry2phone.put(&quot;NZ&quot;, &quot;+64&quot;);\r\n    \tcountry2phone.put(&quot;NI&quot;, &quot;+505&quot;);\r\n    \tcountry2phone.put(&quot;NE&quot;, &quot;+227&quot;);\r\n    \tcountry2phone.put(&quot;NG&quot;, &quot;+234&quot;);\r\n    \tcountry2phone.put(&quot;NO&quot;, &quot;+47&quot;);\r\n    \tcountry2phone.put(&quot;OM&quot;, &quot;+968&quot;);\r\n    \tcountry2phone.put(&quot;PK&quot;, &quot;+92&quot;);\r\n    \tcountry2phone.put(&quot;PW&quot;, &quot;+680&quot;);\r\n    \tcountry2phone.put(&quot;PA&quot;, &quot;+507&quot;);\r\n    \tcountry2phone.put(&quot;PG&quot;, &quot;+675&quot;);\r\n    \tcountry2phone.put(&quot;PY&quot;, &quot;+595&quot;);\r\n    \tcountry2phone.put(&quot;PE&quot;, &quot;+51&quot;);\r\n    \tcountry2phone.put(&quot;PH&quot;, &quot;+63&quot;);\r\n    \tcountry2phone.put(&quot;PL&quot;, &quot;+48&quot;);\r\n    \tcountry2phone.put(&quot;PT&quot;, &quot;+351&quot;);\r\n    \tcountry2phone.put(&quot;QA&quot;, &quot;+974&quot;);\r\n    \tcountry2phone.put(&quot;RO&quot;, &quot;+40&quot;);\r\n    \tcountry2phone.put(&quot;RU&quot;, &quot;+7&quot;);\r\n    \tcountry2phone.put(&quot;RW&quot;, &quot;+250&quot;);\r\n    \tcountry2phone.put(&quot;KN&quot;, &quot;+1-869&quot;);\r\n    \tcountry2phone.put(&quot;LC&quot;, &quot;+1-758&quot;);\r\n    \tcountry2phone.put(&quot;VC&quot;, &quot;+1-784&quot;);\r\n    \tcountry2phone.put(&quot;WS&quot;, &quot;+685&quot;);\r\n    \tcountry2phone.put(&quot;SM&quot;, &quot;+378&quot;);\r\n    \tcountry2phone.put(&quot;ST&quot;, &quot;+239&quot;);\r\n    \tcountry2phone.put(&quot;SA&quot;, &quot;+966&quot;);\r\n    \tcountry2phone.put(&quot;SN&quot;, &quot;+221&quot;);\r\n    \tcountry2phone.put(&quot;RS&quot;, &quot;+381&quot;);\r\n    \tcountry2phone.put(&quot;SC&quot;, &quot;+248&quot;);\r\n    \tcountry2phone.put(&quot;SL&quot;, &quot;+232&quot;);\r\n    \tcountry2phone.put(&quot;SG&quot;, &quot;+65&quot;);\r\n    \tcountry2phone.put(&quot;SK&quot;, &quot;+421&quot;);\r\n    \tcountry2phone.put(&quot;SI&quot;, &quot;+386&quot;);\r\n    \tcountry2phone.put(&quot;SB&quot;, &quot;+677&quot;);\r\n    \tcountry2phone.put(&quot;SO&quot;, &quot;+252&quot;);\r\n    \tcountry2phone.put(&quot;ZA&quot;, &quot;+27&quot;);\r\n    \tcountry2phone.put(&quot;ES&quot;, &quot;+34&quot;);\r\n    \tcountry2phone.put(&quot;LK&quot;, &quot;+94&quot;);\r\n    \tcountry2phone.put(&quot;SD&quot;, &quot;+249&quot;);\r\n    \tcountry2phone.put(&quot;SR&quot;, &quot;+597&quot;);\r\n    \tcountry2phone.put(&quot;SZ&quot;, &quot;+268&quot;);\r\n    \tcountry2phone.put(&quot;SE&quot;, &quot;+46&quot;);\r\n    \tcountry2phone.put(&quot;CH&quot;, &quot;+41&quot;);\r\n    \tcountry2phone.put(&quot;SY&quot;, &quot;+963&quot;);\r\n    \tcountry2phone.put(&quot;TJ&quot;, &quot;+992&quot;);\r\n    \tcountry2phone.put(&quot;TZ&quot;, &quot;+255&quot;);\r\n    \tcountry2phone.put(&quot;TH&quot;, &quot;+66&quot;);\r\n    \tcountry2phone.put(&quot;TL&quot;, &quot;+670&quot;);\r\n    \tcountry2phone.put(&quot;TG&quot;, &quot;+228&quot;);\r\n    \tcountry2phone.put(&quot;TO&quot;, &quot;+676&quot;);\r\n    \tcountry2phone.put(&quot;TT&quot;, &quot;+1-868&quot;);\r\n    \tcountry2phone.put(&quot;TN&quot;, &quot;+216&quot;);\r\n    \tcountry2phone.put(&quot;TR&quot;, &quot;+90&quot;);\r\n    \tcountry2phone.put(&quot;TM&quot;, &quot;+993&quot;);\r\n    \tcountry2phone.put(&quot;TV&quot;, &quot;+688&quot;);\r\n    \tcountry2phone.put(&quot;UG&quot;, &quot;+256&quot;);\r\n    \tcountry2phone.put(&quot;UA&quot;, &quot;+380&quot;);\r\n    \tcountry2phone.put(&quot;AE&quot;, &quot;+971&quot;);\r\n    \tcountry2phone.put(&quot;GB&quot;, &quot;+44&quot;);\r\n    \tcountry2phone.put(&quot;US&quot;, &quot;+1&quot;);\r\n    \tcountry2phone.put(&quot;UY&quot;, &quot;+598&quot;);\r\n    \tcountry2phone.put(&quot;UZ&quot;, &quot;+998&quot;);\r\n    \tcountry2phone.put(&quot;VU&quot;, &quot;+678&quot;);\r\n    \tcountry2phone.put(&quot;VA&quot;, &quot;+379&quot;);\r\n    \tcountry2phone.put(&quot;VE&quot;, &quot;+58&quot;);\r\n    \tcountry2phone.put(&quot;VN&quot;, &quot;+84&quot;);\r\n    \tcountry2phone.put(&quot;YE&quot;, &quot;+967&quot;);\r\n    \tcountry2phone.put(&quot;ZM&quot;, &quot;+260&quot;);\r\n    \tcountry2phone.put(&quot;ZW&quot;, &quot;+263&quot;);\r\n    \tcountry2phone.put(&quot;GE&quot;, &quot;+995&quot;);\r\n    \tcountry2phone.put(&quot;TW&quot;, &quot;+886&quot;);\r\n    \tcountry2phone.put(&quot;AZ&quot;, &quot;+374-97&quot;);\r\n    \tcountry2phone.put(&quot;CY&quot;, &quot;+90-392&quot;);\r\n    \tcountry2phone.put(&quot;MD&quot;, &quot;+373-533&quot;);\r\n    \tcountry2phone.put(&quot;SO&quot;, &quot;+252&quot;);\r\n    \tcountry2phone.put(&quot;GE&quot;, &quot;+995&quot;);\r\n    \tcountry2phone.put(&quot;CX&quot;, &quot;+61&quot;);\r\n    \tcountry2phone.put(&quot;CC&quot;, &quot;+61&quot;);\r\n    \tcountry2phone.put(&quot;NF&quot;, &quot;+672&quot;);\r\n    \tcountry2phone.put(&quot;NC&quot;, &quot;+687&quot;);\r\n    \tcountry2phone.put(&quot;PF&quot;, &quot;+689&quot;);\r\n    \tcountry2phone.put(&quot;YT&quot;, &quot;+262&quot;);\r\n    \tcountry2phone.put(&quot;GP&quot;, &quot;+590&quot;);\r\n    \tcountry2phone.put(&quot;GP&quot;, &quot;+590&quot;);\r\n    \tcountry2phone.put(&quot;PM&quot;, &quot;+508&quot;);\r\n    \tcountry2phone.put(&quot;WF&quot;, &quot;+681&quot;);\r\n    \tcountry2phone.put(&quot;CK&quot;, &quot;+682&quot;);\r\n    \tcountry2phone.put(&quot;NU&quot;, &quot;+683&quot;);\r\n    \tcountry2phone.put(&quot;TK&quot;, &quot;+690&quot;);\r\n    \tcountry2phone.put(&quot;GG&quot;, &quot;+44&quot;);\r\n    \tcountry2phone.put(&quot;IM&quot;, &quot;+44&quot;);\r\n    \tcountry2phone.put(&quot;JE&quot;, &quot;+44&quot;);\r\n    \tcountry2phone.put(&quot;AI&quot;, &quot;+1-264&quot;);\r\n    \tcountry2phone.put(&quot;BM&quot;, &quot;+1-441&quot;);\r\n    \tcountry2phone.put(&quot;IO&quot;, &quot;+246&quot;);\r\n    \tcountry2phone.put(&quot;&quot;, &quot;+357&quot;);\r\n    \tcountry2phone.put(&quot;VG&quot;, &quot;+1-284&quot;);\r\n    \tcountry2phone.put(&quot;KY&quot;, &quot;+1-345&quot;);\r\n    \tcountry2phone.put(&quot;FK&quot;, &quot;+500&quot;);\r\n    \tcountry2phone.put(&quot;GI&quot;, &quot;+350&quot;);\r\n    \tcountry2phone.put(&quot;MS&quot;, &quot;+1-664&quot;);\r\n    \tcountry2phone.put(&quot;SH&quot;, &quot;+290&quot;);\r\n    \tcountry2phone.put(&quot;TC&quot;, &quot;+1-649&quot;);\r\n    \tcountry2phone.put(&quot;MP&quot;, &quot;+1-670&quot;);\r\n    \tcountry2phone.put(&quot;PR&quot;, &quot;+1-787and1-939&quot;);\r\n    \tcountry2phone.put(&quot;AS&quot;, &quot;+1-684&quot;);\r\n    \tcountry2phone.put(&quot;GU&quot;, &quot;+1-671&quot;);\r\n    \tcountry2phone.put(&quot;VI&quot;, &quot;+1-340&quot;);\r\n    \tcountry2phone.put(&quot;HK&quot;, &quot;+852&quot;);\r\n    \tcountry2phone.put(&quot;MO&quot;, &quot;+853&quot;);\r\n    \tcountry2phone.put(&quot;FO&quot;, &quot;+298&quot;);\r\n    \tcountry2phone.put(&quot;GL&quot;, &quot;+299&quot;);\r\n    \tcountry2phone.put(&quot;GF&quot;, &quot;+594&quot;);\r\n    \tcountry2phone.put(&quot;GP&quot;, &quot;+590&quot;);\r\n    \tcountry2phone.put(&quot;MQ&quot;, &quot;+596&quot;);\r\n    \tcountry2phone.put(&quot;RE&quot;, &quot;+262&quot;);\r\n    \tcountry2phone.put(&quot;AX&quot;, &quot;+358-18&quot;);\r\n    \tcountry2phone.put(&quot;AW&quot;, &quot;+297&quot;);\r\n    \tcountry2phone.put(&quot;AN&quot;, &quot;+599&quot;);\r\n    \tcountry2phone.put(&quot;SJ&quot;, &quot;+47&quot;);\r\n    \tcountry2phone.put(&quot;AC&quot;, &quot;+247&quot;);\r\n    \tcountry2phone.put(&quot;TA&quot;, &quot;+290&quot;);\r\n    \tcountry2phone.put(&quot;CS&quot;, &quot;+381&quot;);\r\n    \tcountry2phone.put(&quot;PS&quot;, &quot;+970&quot;);\r\n    \tcountry2phone.put(&quot;EH&quot;, &quot;+212&quot;);\r\n    }\r\n    }\r\n\r\n  [1]: http://www.andrewpatton.com/countrylist.html\r\n","title":"how to get country phone prefix from iso","body":"<p>I found a place where I can get the mapping in csv file. <a href=\"http://www.andrewpatton.com/countrylist.html\" rel=\"noreferrer\">check here.</a>  </p>\n\n<p>Also, I changed it into a class that translate the country code into phone prefix. here it is:  </p>\n\n<pre><code>public class Iso2Phone {\npublic static String getPhone(String code) {\n    return country2phone.get(code.toUpperCase());\n}\npublic static Map&lt;String, String&gt; getAll(){\n    return country2phone;\n}\nprivate static Map&lt;String, String&gt; country2phone = new HashMap&lt;String, String&gt;();\nstatic {\n    country2phone.put(\"AF\", \"+93\");\n    country2phone.put(\"AL\", \"+355\");\n    country2phone.put(\"DZ\", \"+213\");\n    country2phone.put(\"AD\", \"+376\");\n    country2phone.put(\"AO\", \"+244\");\n    country2phone.put(\"AG\", \"+1-268\");\n    country2phone.put(\"AR\", \"+54\");\n    country2phone.put(\"AM\", \"+374\");\n    country2phone.put(\"AU\", \"+61\");\n    country2phone.put(\"AT\", \"+43\");\n    country2phone.put(\"AZ\", \"+994\");\n    country2phone.put(\"BS\", \"+1-242\");\n    country2phone.put(\"BH\", \"+973\");\n    country2phone.put(\"BD\", \"+880\");\n    country2phone.put(\"BB\", \"+1-246\");\n    country2phone.put(\"BY\", \"+375\");\n    country2phone.put(\"BE\", \"+32\");\n    country2phone.put(\"BZ\", \"+501\");\n    country2phone.put(\"BJ\", \"+229\");\n    country2phone.put(\"BT\", \"+975\");\n    country2phone.put(\"BO\", \"+591\");\n    country2phone.put(\"BA\", \"+387\");\n    country2phone.put(\"BW\", \"+267\");\n    country2phone.put(\"BR\", \"+55\");\n    country2phone.put(\"BN\", \"+673\");\n    country2phone.put(\"BG\", \"+359\");\n    country2phone.put(\"BF\", \"+226\");\n    country2phone.put(\"BI\", \"+257\");\n    country2phone.put(\"KH\", \"+855\");\n    country2phone.put(\"CM\", \"+237\");\n    country2phone.put(\"CA\", \"+1\");\n    country2phone.put(\"CV\", \"+238\");\n    country2phone.put(\"CF\", \"+236\");\n    country2phone.put(\"TD\", \"+235\");\n    country2phone.put(\"CL\", \"+56\");\n    country2phone.put(\"CN\", \"+86\");\n    country2phone.put(\"CO\", \"+57\");\n    country2phone.put(\"KM\", \"+269\");\n    country2phone.put(\"CD\", \"+243\");\n    country2phone.put(\"CG\", \"+242\");\n    country2phone.put(\"CR\", \"+506\");\n    country2phone.put(\"CI\", \"+225\");\n    country2phone.put(\"HR\", \"+385\");\n    country2phone.put(\"CU\", \"+53\");\n    country2phone.put(\"CY\", \"+357\");\n    country2phone.put(\"CZ\", \"+420\");\n    country2phone.put(\"DK\", \"+45\");\n    country2phone.put(\"DJ\", \"+253\");\n    country2phone.put(\"DM\", \"+1-767\");\n    country2phone.put(\"DO\", \"+1-809and1-829\");\n    country2phone.put(\"EC\", \"+593\");\n    country2phone.put(\"EG\", \"+20\");\n    country2phone.put(\"SV\", \"+503\");\n    country2phone.put(\"GQ\", \"+240\");\n    country2phone.put(\"ER\", \"+291\");\n    country2phone.put(\"EE\", \"+372\");\n    country2phone.put(\"ET\", \"+251\");\n    country2phone.put(\"FJ\", \"+679\");\n    country2phone.put(\"FI\", \"+358\");\n    country2phone.put(\"FR\", \"+33\");\n    country2phone.put(\"GA\", \"+241\");\n    country2phone.put(\"GM\", \"+220\");\n    country2phone.put(\"GE\", \"+995\");\n    country2phone.put(\"DE\", \"+49\");\n    country2phone.put(\"GH\", \"+233\");\n    country2phone.put(\"GR\", \"+30\");\n    country2phone.put(\"GD\", \"+1-473\");\n    country2phone.put(\"GT\", \"+502\");\n    country2phone.put(\"GN\", \"+224\");\n    country2phone.put(\"GW\", \"+245\");\n    country2phone.put(\"GY\", \"+592\");\n    country2phone.put(\"HT\", \"+509\");\n    country2phone.put(\"HN\", \"+504\");\n    country2phone.put(\"HU\", \"+36\");\n    country2phone.put(\"IS\", \"+354\");\n    country2phone.put(\"IN\", \"+91\");\n    country2phone.put(\"ID\", \"+62\");\n    country2phone.put(\"IR\", \"+98\");\n    country2phone.put(\"IQ\", \"+964\");\n    country2phone.put(\"IE\", \"+353\");\n    country2phone.put(\"IL\", \"+972\");\n    country2phone.put(\"IT\", \"+39\");\n    country2phone.put(\"JM\", \"+1-876\");\n    country2phone.put(\"JP\", \"+81\");\n    country2phone.put(\"JO\", \"+962\");\n    country2phone.put(\"KZ\", \"+7\");\n    country2phone.put(\"KE\", \"+254\");\n    country2phone.put(\"KI\", \"+686\");\n    country2phone.put(\"KP\", \"+850\");\n    country2phone.put(\"KR\", \"+82\");\n    country2phone.put(\"KW\", \"+965\");\n    country2phone.put(\"KG\", \"+996\");\n    country2phone.put(\"LA\", \"+856\");\n    country2phone.put(\"LV\", \"+371\");\n    country2phone.put(\"LB\", \"+961\");\n    country2phone.put(\"LS\", \"+266\");\n    country2phone.put(\"LR\", \"+231\");\n    country2phone.put(\"LY\", \"+218\");\n    country2phone.put(\"LI\", \"+423\");\n    country2phone.put(\"LT\", \"+370\");\n    country2phone.put(\"LU\", \"+352\");\n    country2phone.put(\"MK\", \"+389\");\n    country2phone.put(\"MG\", \"+261\");\n    country2phone.put(\"MW\", \"+265\");\n    country2phone.put(\"MY\", \"+60\");\n    country2phone.put(\"MV\", \"+960\");\n    country2phone.put(\"ML\", \"+223\");\n    country2phone.put(\"MT\", \"+356\");\n    country2phone.put(\"MH\", \"+692\");\n    country2phone.put(\"MR\", \"+222\");\n    country2phone.put(\"MU\", \"+230\");\n    country2phone.put(\"MX\", \"+52\");\n    country2phone.put(\"FM\", \"+691\");\n    country2phone.put(\"MD\", \"+373\");\n    country2phone.put(\"MC\", \"+377\");\n    country2phone.put(\"MN\", \"+976\");\n    country2phone.put(\"ME\", \"+382\");\n    country2phone.put(\"MA\", \"+212\");\n    country2phone.put(\"MZ\", \"+258\");\n    country2phone.put(\"MM\", \"+95\");\n    country2phone.put(\"NA\", \"+264\");\n    country2phone.put(\"NR\", \"+674\");\n    country2phone.put(\"NP\", \"+977\");\n    country2phone.put(\"NL\", \"+31\");\n    country2phone.put(\"NZ\", \"+64\");\n    country2phone.put(\"NI\", \"+505\");\n    country2phone.put(\"NE\", \"+227\");\n    country2phone.put(\"NG\", \"+234\");\n    country2phone.put(\"NO\", \"+47\");\n    country2phone.put(\"OM\", \"+968\");\n    country2phone.put(\"PK\", \"+92\");\n    country2phone.put(\"PW\", \"+680\");\n    country2phone.put(\"PA\", \"+507\");\n    country2phone.put(\"PG\", \"+675\");\n    country2phone.put(\"PY\", \"+595\");\n    country2phone.put(\"PE\", \"+51\");\n    country2phone.put(\"PH\", \"+63\");\n    country2phone.put(\"PL\", \"+48\");\n    country2phone.put(\"PT\", \"+351\");\n    country2phone.put(\"QA\", \"+974\");\n    country2phone.put(\"RO\", \"+40\");\n    country2phone.put(\"RU\", \"+7\");\n    country2phone.put(\"RW\", \"+250\");\n    country2phone.put(\"KN\", \"+1-869\");\n    country2phone.put(\"LC\", \"+1-758\");\n    country2phone.put(\"VC\", \"+1-784\");\n    country2phone.put(\"WS\", \"+685\");\n    country2phone.put(\"SM\", \"+378\");\n    country2phone.put(\"ST\", \"+239\");\n    country2phone.put(\"SA\", \"+966\");\n    country2phone.put(\"SN\", \"+221\");\n    country2phone.put(\"RS\", \"+381\");\n    country2phone.put(\"SC\", \"+248\");\n    country2phone.put(\"SL\", \"+232\");\n    country2phone.put(\"SG\", \"+65\");\n    country2phone.put(\"SK\", \"+421\");\n    country2phone.put(\"SI\", \"+386\");\n    country2phone.put(\"SB\", \"+677\");\n    country2phone.put(\"SO\", \"+252\");\n    country2phone.put(\"ZA\", \"+27\");\n    country2phone.put(\"ES\", \"+34\");\n    country2phone.put(\"LK\", \"+94\");\n    country2phone.put(\"SD\", \"+249\");\n    country2phone.put(\"SR\", \"+597\");\n    country2phone.put(\"SZ\", \"+268\");\n    country2phone.put(\"SE\", \"+46\");\n    country2phone.put(\"CH\", \"+41\");\n    country2phone.put(\"SY\", \"+963\");\n    country2phone.put(\"TJ\", \"+992\");\n    country2phone.put(\"TZ\", \"+255\");\n    country2phone.put(\"TH\", \"+66\");\n    country2phone.put(\"TL\", \"+670\");\n    country2phone.put(\"TG\", \"+228\");\n    country2phone.put(\"TO\", \"+676\");\n    country2phone.put(\"TT\", \"+1-868\");\n    country2phone.put(\"TN\", \"+216\");\n    country2phone.put(\"TR\", \"+90\");\n    country2phone.put(\"TM\", \"+993\");\n    country2phone.put(\"TV\", \"+688\");\n    country2phone.put(\"UG\", \"+256\");\n    country2phone.put(\"UA\", \"+380\");\n    country2phone.put(\"AE\", \"+971\");\n    country2phone.put(\"GB\", \"+44\");\n    country2phone.put(\"US\", \"+1\");\n    country2phone.put(\"UY\", \"+598\");\n    country2phone.put(\"UZ\", \"+998\");\n    country2phone.put(\"VU\", \"+678\");\n    country2phone.put(\"VA\", \"+379\");\n    country2phone.put(\"VE\", \"+58\");\n    country2phone.put(\"VN\", \"+84\");\n    country2phone.put(\"YE\", \"+967\");\n    country2phone.put(\"ZM\", \"+260\");\n    country2phone.put(\"ZW\", \"+263\");\n    country2phone.put(\"GE\", \"+995\");\n    country2phone.put(\"TW\", \"+886\");\n    country2phone.put(\"AZ\", \"+374-97\");\n    country2phone.put(\"CY\", \"+90-392\");\n    country2phone.put(\"MD\", \"+373-533\");\n    country2phone.put(\"SO\", \"+252\");\n    country2phone.put(\"GE\", \"+995\");\n    country2phone.put(\"CX\", \"+61\");\n    country2phone.put(\"CC\", \"+61\");\n    country2phone.put(\"NF\", \"+672\");\n    country2phone.put(\"NC\", \"+687\");\n    country2phone.put(\"PF\", \"+689\");\n    country2phone.put(\"YT\", \"+262\");\n    country2phone.put(\"GP\", \"+590\");\n    country2phone.put(\"GP\", \"+590\");\n    country2phone.put(\"PM\", \"+508\");\n    country2phone.put(\"WF\", \"+681\");\n    country2phone.put(\"CK\", \"+682\");\n    country2phone.put(\"NU\", \"+683\");\n    country2phone.put(\"TK\", \"+690\");\n    country2phone.put(\"GG\", \"+44\");\n    country2phone.put(\"IM\", \"+44\");\n    country2phone.put(\"JE\", \"+44\");\n    country2phone.put(\"AI\", \"+1-264\");\n    country2phone.put(\"BM\", \"+1-441\");\n    country2phone.put(\"IO\", \"+246\");\n    country2phone.put(\"\", \"+357\");\n    country2phone.put(\"VG\", \"+1-284\");\n    country2phone.put(\"KY\", \"+1-345\");\n    country2phone.put(\"FK\", \"+500\");\n    country2phone.put(\"GI\", \"+350\");\n    country2phone.put(\"MS\", \"+1-664\");\n    country2phone.put(\"SH\", \"+290\");\n    country2phone.put(\"TC\", \"+1-649\");\n    country2phone.put(\"MP\", \"+1-670\");\n    country2phone.put(\"PR\", \"+1-787and1-939\");\n    country2phone.put(\"AS\", \"+1-684\");\n    country2phone.put(\"GU\", \"+1-671\");\n    country2phone.put(\"VI\", \"+1-340\");\n    country2phone.put(\"HK\", \"+852\");\n    country2phone.put(\"MO\", \"+853\");\n    country2phone.put(\"FO\", \"+298\");\n    country2phone.put(\"GL\", \"+299\");\n    country2phone.put(\"GF\", \"+594\");\n    country2phone.put(\"GP\", \"+590\");\n    country2phone.put(\"MQ\", \"+596\");\n    country2phone.put(\"RE\", \"+262\");\n    country2phone.put(\"AX\", \"+358-18\");\n    country2phone.put(\"AW\", \"+297\");\n    country2phone.put(\"AN\", \"+599\");\n    country2phone.put(\"SJ\", \"+47\");\n    country2phone.put(\"AC\", \"+247\");\n    country2phone.put(\"TA\", \"+290\");\n    country2phone.put(\"CS\", \"+381\");\n    country2phone.put(\"PS\", \"+970\");\n    country2phone.put(\"EH\", \"+212\");\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":34570,"reputation":17845,"user_id":97777,"accept_rate":82,"display_name":"Duncan McGregor"},"comment_count":0,"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1408729788,"creation_date":1408729788,"answer_id":25452862,"question_id":10772329,"body_markdown":"Tidying up @oshai&#39;s answer\r\n\r\n    public class CountryToPhonePrefix {\r\n\r\n    private static Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\n\r\n    public String prefixFor(String iso2CountryCode) {\r\n        String result = map.get(iso2CountryCode);\r\n        if (result == null) {\r\n            throw new IllegalArgumentException(&quot;Unknown country code &quot; + iso2CountryCode);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    static {\r\n        map.put(&quot;AC&quot;, &quot;+247&quot;);\r\n        map.put(&quot;AD&quot;, &quot;+376&quot;);\r\n        map.put(&quot;AE&quot;, &quot;+971&quot;);\r\n        map.put(&quot;AF&quot;, &quot;+93&quot;);\r\n        map.put(&quot;AG&quot;, &quot;+1-268&quot;);\r\n        map.put(&quot;AI&quot;, &quot;+1-264&quot;);\r\n        map.put(&quot;AL&quot;, &quot;+355&quot;);\r\n        map.put(&quot;AM&quot;, &quot;+374&quot;);\r\n        map.put(&quot;AN&quot;, &quot;+599&quot;);\r\n        map.put(&quot;AO&quot;, &quot;+244&quot;);\r\n        map.put(&quot;AR&quot;, &quot;+54&quot;);\r\n        map.put(&quot;AS&quot;, &quot;+1-684&quot;);\r\n        map.put(&quot;AT&quot;, &quot;+43&quot;);\r\n        map.put(&quot;AU&quot;, &quot;+61&quot;);\r\n        map.put(&quot;AW&quot;, &quot;+297&quot;);\r\n        map.put(&quot;AX&quot;, &quot;+358-18&quot;);\r\n        map.put(&quot;AZ&quot;, &quot;+374-97&quot;);\r\n        map.put(&quot;AZ&quot;, &quot;+994&quot;);\r\n        map.put(&quot;BA&quot;, &quot;+387&quot;);\r\n        map.put(&quot;BB&quot;, &quot;+1-246&quot;);\r\n        map.put(&quot;BD&quot;, &quot;+880&quot;);\r\n        map.put(&quot;BE&quot;, &quot;+32&quot;);\r\n        map.put(&quot;BF&quot;, &quot;+226&quot;);\r\n        map.put(&quot;BG&quot;, &quot;+359&quot;);\r\n        map.put(&quot;BH&quot;, &quot;+973&quot;);\r\n        map.put(&quot;BI&quot;, &quot;+257&quot;);\r\n        map.put(&quot;BJ&quot;, &quot;+229&quot;);\r\n        map.put(&quot;BM&quot;, &quot;+1-441&quot;);\r\n        map.put(&quot;BN&quot;, &quot;+673&quot;);\r\n        map.put(&quot;BO&quot;, &quot;+591&quot;);\r\n        map.put(&quot;BR&quot;, &quot;+55&quot;);\r\n        map.put(&quot;BS&quot;, &quot;+1-242&quot;);\r\n        map.put(&quot;BT&quot;, &quot;+975&quot;);\r\n        map.put(&quot;BW&quot;, &quot;+267&quot;);\r\n        map.put(&quot;BY&quot;, &quot;+375&quot;);\r\n        map.put(&quot;BZ&quot;, &quot;+501&quot;);\r\n        map.put(&quot;CA&quot;, &quot;+1&quot;);\r\n        map.put(&quot;CC&quot;, &quot;+61&quot;);\r\n        map.put(&quot;CD&quot;, &quot;+243&quot;);\r\n        map.put(&quot;CF&quot;, &quot;+236&quot;);\r\n        map.put(&quot;CG&quot;, &quot;+242&quot;);\r\n        map.put(&quot;CH&quot;, &quot;+41&quot;);\r\n        map.put(&quot;CI&quot;, &quot;+225&quot;);\r\n        map.put(&quot;CK&quot;, &quot;+682&quot;);\r\n        map.put(&quot;CL&quot;, &quot;+56&quot;);\r\n        map.put(&quot;CM&quot;, &quot;+237&quot;);\r\n        map.put(&quot;CN&quot;, &quot;+86&quot;);\r\n        map.put(&quot;CO&quot;, &quot;+57&quot;);\r\n        map.put(&quot;CR&quot;, &quot;+506&quot;);\r\n        map.put(&quot;CS&quot;, &quot;+381&quot;);\r\n        map.put(&quot;CU&quot;, &quot;+53&quot;);\r\n        map.put(&quot;CV&quot;, &quot;+238&quot;);\r\n        map.put(&quot;CX&quot;, &quot;+61&quot;);\r\n        map.put(&quot;CY&quot;, &quot;+90-392&quot;);\r\n        map.put(&quot;CY&quot;, &quot;+357&quot;);\r\n        map.put(&quot;CZ&quot;, &quot;+420&quot;);\r\n        map.put(&quot;DE&quot;, &quot;+49&quot;);\r\n        map.put(&quot;DJ&quot;, &quot;+253&quot;);\r\n        map.put(&quot;DK&quot;, &quot;+45&quot;);\r\n        map.put(&quot;DM&quot;, &quot;+1-767&quot;);\r\n        map.put(&quot;DO&quot;, &quot;+1-809&quot;); // and 1-829?\r\n        map.put(&quot;DZ&quot;, &quot;+213&quot;);\r\n        map.put(&quot;EC&quot;, &quot;+593&quot;);\r\n        map.put(&quot;EE&quot;, &quot;+372&quot;);\r\n        map.put(&quot;EG&quot;, &quot;+20&quot;);\r\n        map.put(&quot;EH&quot;, &quot;+212&quot;);\r\n        map.put(&quot;ER&quot;, &quot;+291&quot;);\r\n        map.put(&quot;ES&quot;, &quot;+34&quot;);\r\n        map.put(&quot;ET&quot;, &quot;+251&quot;);\r\n        map.put(&quot;FI&quot;, &quot;+358&quot;);\r\n        map.put(&quot;FJ&quot;, &quot;+679&quot;);\r\n        map.put(&quot;FK&quot;, &quot;+500&quot;);\r\n        map.put(&quot;FM&quot;, &quot;+691&quot;);\r\n        map.put(&quot;FO&quot;, &quot;+298&quot;);\r\n        map.put(&quot;FR&quot;, &quot;+33&quot;);\r\n        map.put(&quot;GA&quot;, &quot;+241&quot;);\r\n        map.put(&quot;GB&quot;, &quot;+44&quot;);\r\n        map.put(&quot;GD&quot;, &quot;+1-473&quot;);\r\n        map.put(&quot;GE&quot;, &quot;+995&quot;);\r\n        map.put(&quot;GF&quot;, &quot;+594&quot;);\r\n        map.put(&quot;GG&quot;, &quot;+44&quot;);\r\n        map.put(&quot;GH&quot;, &quot;+233&quot;);\r\n        map.put(&quot;GI&quot;, &quot;+350&quot;);\r\n        map.put(&quot;GL&quot;, &quot;+299&quot;);\r\n        map.put(&quot;GM&quot;, &quot;+220&quot;);\r\n        map.put(&quot;GN&quot;, &quot;+224&quot;);\r\n        map.put(&quot;GP&quot;, &quot;+590&quot;);\r\n        map.put(&quot;GQ&quot;, &quot;+240&quot;);\r\n        map.put(&quot;GR&quot;, &quot;+30&quot;);\r\n        map.put(&quot;GT&quot;, &quot;+502&quot;);\r\n        map.put(&quot;GU&quot;, &quot;+1-671&quot;);\r\n        map.put(&quot;GW&quot;, &quot;+245&quot;);\r\n        map.put(&quot;GY&quot;, &quot;+592&quot;);\r\n        map.put(&quot;HK&quot;, &quot;+852&quot;);\r\n        map.put(&quot;HN&quot;, &quot;+504&quot;);\r\n        map.put(&quot;HR&quot;, &quot;+385&quot;);\r\n        map.put(&quot;HT&quot;, &quot;+509&quot;);\r\n        map.put(&quot;HU&quot;, &quot;+36&quot;);\r\n        map.put(&quot;ID&quot;, &quot;+62&quot;);\r\n        map.put(&quot;IE&quot;, &quot;+353&quot;);\r\n        map.put(&quot;IL&quot;, &quot;+972&quot;);\r\n        map.put(&quot;IM&quot;, &quot;+44&quot;);\r\n        map.put(&quot;IN&quot;, &quot;+91&quot;);\r\n        map.put(&quot;IO&quot;, &quot;+246&quot;);\r\n        map.put(&quot;IQ&quot;, &quot;+964&quot;);\r\n        map.put(&quot;IR&quot;, &quot;+98&quot;);\r\n        map.put(&quot;IS&quot;, &quot;+354&quot;);\r\n        map.put(&quot;IT&quot;, &quot;+39&quot;);\r\n        map.put(&quot;JE&quot;, &quot;+44&quot;);\r\n        map.put(&quot;JM&quot;, &quot;+1-876&quot;);\r\n        map.put(&quot;JO&quot;, &quot;+962&quot;);\r\n        map.put(&quot;JP&quot;, &quot;+81&quot;);\r\n        map.put(&quot;KE&quot;, &quot;+254&quot;);\r\n        map.put(&quot;KG&quot;, &quot;+996&quot;);\r\n        map.put(&quot;KH&quot;, &quot;+855&quot;);\r\n        map.put(&quot;KI&quot;, &quot;+686&quot;);\r\n        map.put(&quot;KM&quot;, &quot;+269&quot;);\r\n        map.put(&quot;KN&quot;, &quot;+1-869&quot;);\r\n        map.put(&quot;KP&quot;, &quot;+850&quot;);\r\n        map.put(&quot;KR&quot;, &quot;+82&quot;);\r\n        map.put(&quot;KW&quot;, &quot;+965&quot;);\r\n        map.put(&quot;KY&quot;, &quot;+1-345&quot;);\r\n        map.put(&quot;KZ&quot;, &quot;+7&quot;);\r\n        map.put(&quot;LA&quot;, &quot;+856&quot;);\r\n        map.put(&quot;LB&quot;, &quot;+961&quot;);\r\n        map.put(&quot;LC&quot;, &quot;+1-758&quot;);\r\n        map.put(&quot;LI&quot;, &quot;+423&quot;);\r\n        map.put(&quot;LK&quot;, &quot;+94&quot;);\r\n        map.put(&quot;LR&quot;, &quot;+231&quot;);\r\n        map.put(&quot;LS&quot;, &quot;+266&quot;);\r\n        map.put(&quot;LT&quot;, &quot;+370&quot;);\r\n        map.put(&quot;LU&quot;, &quot;+352&quot;);\r\n        map.put(&quot;LV&quot;, &quot;+371&quot;);\r\n        map.put(&quot;LY&quot;, &quot;+218&quot;);\r\n        map.put(&quot;MA&quot;, &quot;+212&quot;);\r\n        map.put(&quot;MC&quot;, &quot;+377&quot;);\r\n        map.put(&quot;MD&quot;, &quot;+373-533&quot;);\r\n        map.put(&quot;MD&quot;, &quot;+373&quot;);\r\n        map.put(&quot;ME&quot;, &quot;+382&quot;);\r\n        map.put(&quot;MG&quot;, &quot;+261&quot;);\r\n        map.put(&quot;MH&quot;, &quot;+692&quot;);\r\n        map.put(&quot;MK&quot;, &quot;+389&quot;);\r\n        map.put(&quot;ML&quot;, &quot;+223&quot;);\r\n        map.put(&quot;MM&quot;, &quot;+95&quot;);\r\n        map.put(&quot;MN&quot;, &quot;+976&quot;);\r\n        map.put(&quot;MO&quot;, &quot;+853&quot;);\r\n        map.put(&quot;MP&quot;, &quot;+1-670&quot;);\r\n        map.put(&quot;MQ&quot;, &quot;+596&quot;);\r\n        map.put(&quot;MR&quot;, &quot;+222&quot;);\r\n        map.put(&quot;MS&quot;, &quot;+1-664&quot;);\r\n        map.put(&quot;MT&quot;, &quot;+356&quot;);\r\n        map.put(&quot;MU&quot;, &quot;+230&quot;);\r\n        map.put(&quot;MV&quot;, &quot;+960&quot;);\r\n        map.put(&quot;MW&quot;, &quot;+265&quot;);\r\n        map.put(&quot;MX&quot;, &quot;+52&quot;);\r\n        map.put(&quot;MY&quot;, &quot;+60&quot;);\r\n        map.put(&quot;MZ&quot;, &quot;+258&quot;);\r\n        map.put(&quot;NA&quot;, &quot;+264&quot;);\r\n        map.put(&quot;NC&quot;, &quot;+687&quot;);\r\n        map.put(&quot;NE&quot;, &quot;+227&quot;);\r\n        map.put(&quot;NF&quot;, &quot;+672&quot;);\r\n        map.put(&quot;NG&quot;, &quot;+234&quot;);\r\n        map.put(&quot;NI&quot;, &quot;+505&quot;);\r\n        map.put(&quot;NL&quot;, &quot;+31&quot;);\r\n        map.put(&quot;NO&quot;, &quot;+47&quot;);\r\n        map.put(&quot;NP&quot;, &quot;+977&quot;);\r\n        map.put(&quot;NR&quot;, &quot;+674&quot;);\r\n        map.put(&quot;NU&quot;, &quot;+683&quot;);\r\n        map.put(&quot;NZ&quot;, &quot;+64&quot;);\r\n        map.put(&quot;OM&quot;, &quot;+968&quot;);\r\n        map.put(&quot;PA&quot;, &quot;+507&quot;);\r\n        map.put(&quot;PE&quot;, &quot;+51&quot;);\r\n        map.put(&quot;PF&quot;, &quot;+689&quot;);\r\n        map.put(&quot;PG&quot;, &quot;+675&quot;);\r\n        map.put(&quot;PH&quot;, &quot;+63&quot;);\r\n        map.put(&quot;PK&quot;, &quot;+92&quot;);\r\n        map.put(&quot;PL&quot;, &quot;+48&quot;);\r\n        map.put(&quot;PM&quot;, &quot;+508&quot;);\r\n        map.put(&quot;PR&quot;, &quot;+1-787&quot;); // and 1-939 ?\r\n        map.put(&quot;PS&quot;, &quot;+970&quot;);\r\n        map.put(&quot;PT&quot;, &quot;+351&quot;);\r\n        map.put(&quot;PW&quot;, &quot;+680&quot;);\r\n        map.put(&quot;PY&quot;, &quot;+595&quot;);\r\n        map.put(&quot;QA&quot;, &quot;+974&quot;);\r\n        map.put(&quot;RE&quot;, &quot;+262&quot;);\r\n        map.put(&quot;RO&quot;, &quot;+40&quot;);\r\n        map.put(&quot;RS&quot;, &quot;+381&quot;);\r\n        map.put(&quot;RU&quot;, &quot;+7&quot;);\r\n        map.put(&quot;RW&quot;, &quot;+250&quot;);\r\n        map.put(&quot;SA&quot;, &quot;+966&quot;);\r\n        map.put(&quot;SB&quot;, &quot;+677&quot;);\r\n        map.put(&quot;SC&quot;, &quot;+248&quot;);\r\n        map.put(&quot;SD&quot;, &quot;+249&quot;);\r\n        map.put(&quot;SE&quot;, &quot;+46&quot;);\r\n        map.put(&quot;SG&quot;, &quot;+65&quot;);\r\n        map.put(&quot;SH&quot;, &quot;+290&quot;);\r\n        map.put(&quot;SI&quot;, &quot;+386&quot;);\r\n        map.put(&quot;SJ&quot;, &quot;+47&quot;);\r\n        map.put(&quot;SK&quot;, &quot;+421&quot;);\r\n        map.put(&quot;SL&quot;, &quot;+232&quot;);\r\n        map.put(&quot;SM&quot;, &quot;+378&quot;);\r\n        map.put(&quot;SN&quot;, &quot;+221&quot;);\r\n        map.put(&quot;SO&quot;, &quot;+252&quot;);\r\n        map.put(&quot;SO&quot;, &quot;+252&quot;);\r\n        map.put(&quot;SR&quot;, &quot;+597&quot;);\r\n        map.put(&quot;ST&quot;, &quot;+239&quot;);\r\n        map.put(&quot;SV&quot;, &quot;+503&quot;);\r\n        map.put(&quot;SY&quot;, &quot;+963&quot;);\r\n        map.put(&quot;SZ&quot;, &quot;+268&quot;);\r\n        map.put(&quot;TA&quot;, &quot;+290&quot;);\r\n        map.put(&quot;TC&quot;, &quot;+1-649&quot;);\r\n        map.put(&quot;TD&quot;, &quot;+235&quot;);\r\n        map.put(&quot;TG&quot;, &quot;+228&quot;);\r\n        map.put(&quot;TH&quot;, &quot;+66&quot;);\r\n        map.put(&quot;TJ&quot;, &quot;+992&quot;);\r\n        map.put(&quot;TK&quot;, &quot;+690&quot;);\r\n        map.put(&quot;TL&quot;, &quot;+670&quot;);\r\n        map.put(&quot;TM&quot;, &quot;+993&quot;);\r\n        map.put(&quot;TN&quot;, &quot;+216&quot;);\r\n        map.put(&quot;TO&quot;, &quot;+676&quot;);\r\n        map.put(&quot;TR&quot;, &quot;+90&quot;);\r\n        map.put(&quot;TT&quot;, &quot;+1-868&quot;);\r\n        map.put(&quot;TV&quot;, &quot;+688&quot;);\r\n        map.put(&quot;TW&quot;, &quot;+886&quot;);\r\n        map.put(&quot;TZ&quot;, &quot;+255&quot;);\r\n        map.put(&quot;UA&quot;, &quot;+380&quot;);\r\n        map.put(&quot;UG&quot;, &quot;+256&quot;);\r\n        map.put(&quot;US&quot;, &quot;+1&quot;);\r\n        map.put(&quot;UY&quot;, &quot;+598&quot;);\r\n        map.put(&quot;UZ&quot;, &quot;+998&quot;);\r\n        map.put(&quot;VA&quot;, &quot;+379&quot;);\r\n        map.put(&quot;VC&quot;, &quot;+1-784&quot;);\r\n        map.put(&quot;VE&quot;, &quot;+58&quot;);\r\n        map.put(&quot;VG&quot;, &quot;+1-284&quot;);\r\n        map.put(&quot;VI&quot;, &quot;+1-340&quot;);\r\n        map.put(&quot;VN&quot;, &quot;+84&quot;);\r\n        map.put(&quot;VU&quot;, &quot;+678&quot;);\r\n        map.put(&quot;WF&quot;, &quot;+681&quot;);\r\n        map.put(&quot;WS&quot;, &quot;+685&quot;);\r\n        map.put(&quot;YE&quot;, &quot;+967&quot;);\r\n        map.put(&quot;YT&quot;, &quot;+262&quot;);\r\n        map.put(&quot;ZA&quot;, &quot;+27&quot;);\r\n        map.put(&quot;ZM&quot;, &quot;+260&quot;);\r\n        map.put(&quot;ZW&quot;, &quot;+263&quot;);\r\n    }}\r\n","title":"how to get country phone prefix from iso","body":"<p>Tidying up @oshai's answer</p>\n\n<pre><code>public class CountryToPhonePrefix {\n\nprivate static Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\n\npublic String prefixFor(String iso2CountryCode) {\n    String result = map.get(iso2CountryCode);\n    if (result == null) {\n        throw new IllegalArgumentException(\"Unknown country code \" + iso2CountryCode);\n    }\n    return result;\n}\n\nstatic {\n    map.put(\"AC\", \"+247\");\n    map.put(\"AD\", \"+376\");\n    map.put(\"AE\", \"+971\");\n    map.put(\"AF\", \"+93\");\n    map.put(\"AG\", \"+1-268\");\n    map.put(\"AI\", \"+1-264\");\n    map.put(\"AL\", \"+355\");\n    map.put(\"AM\", \"+374\");\n    map.put(\"AN\", \"+599\");\n    map.put(\"AO\", \"+244\");\n    map.put(\"AR\", \"+54\");\n    map.put(\"AS\", \"+1-684\");\n    map.put(\"AT\", \"+43\");\n    map.put(\"AU\", \"+61\");\n    map.put(\"AW\", \"+297\");\n    map.put(\"AX\", \"+358-18\");\n    map.put(\"AZ\", \"+374-97\");\n    map.put(\"AZ\", \"+994\");\n    map.put(\"BA\", \"+387\");\n    map.put(\"BB\", \"+1-246\");\n    map.put(\"BD\", \"+880\");\n    map.put(\"BE\", \"+32\");\n    map.put(\"BF\", \"+226\");\n    map.put(\"BG\", \"+359\");\n    map.put(\"BH\", \"+973\");\n    map.put(\"BI\", \"+257\");\n    map.put(\"BJ\", \"+229\");\n    map.put(\"BM\", \"+1-441\");\n    map.put(\"BN\", \"+673\");\n    map.put(\"BO\", \"+591\");\n    map.put(\"BR\", \"+55\");\n    map.put(\"BS\", \"+1-242\");\n    map.put(\"BT\", \"+975\");\n    map.put(\"BW\", \"+267\");\n    map.put(\"BY\", \"+375\");\n    map.put(\"BZ\", \"+501\");\n    map.put(\"CA\", \"+1\");\n    map.put(\"CC\", \"+61\");\n    map.put(\"CD\", \"+243\");\n    map.put(\"CF\", \"+236\");\n    map.put(\"CG\", \"+242\");\n    map.put(\"CH\", \"+41\");\n    map.put(\"CI\", \"+225\");\n    map.put(\"CK\", \"+682\");\n    map.put(\"CL\", \"+56\");\n    map.put(\"CM\", \"+237\");\n    map.put(\"CN\", \"+86\");\n    map.put(\"CO\", \"+57\");\n    map.put(\"CR\", \"+506\");\n    map.put(\"CS\", \"+381\");\n    map.put(\"CU\", \"+53\");\n    map.put(\"CV\", \"+238\");\n    map.put(\"CX\", \"+61\");\n    map.put(\"CY\", \"+90-392\");\n    map.put(\"CY\", \"+357\");\n    map.put(\"CZ\", \"+420\");\n    map.put(\"DE\", \"+49\");\n    map.put(\"DJ\", \"+253\");\n    map.put(\"DK\", \"+45\");\n    map.put(\"DM\", \"+1-767\");\n    map.put(\"DO\", \"+1-809\"); // and 1-829?\n    map.put(\"DZ\", \"+213\");\n    map.put(\"EC\", \"+593\");\n    map.put(\"EE\", \"+372\");\n    map.put(\"EG\", \"+20\");\n    map.put(\"EH\", \"+212\");\n    map.put(\"ER\", \"+291\");\n    map.put(\"ES\", \"+34\");\n    map.put(\"ET\", \"+251\");\n    map.put(\"FI\", \"+358\");\n    map.put(\"FJ\", \"+679\");\n    map.put(\"FK\", \"+500\");\n    map.put(\"FM\", \"+691\");\n    map.put(\"FO\", \"+298\");\n    map.put(\"FR\", \"+33\");\n    map.put(\"GA\", \"+241\");\n    map.put(\"GB\", \"+44\");\n    map.put(\"GD\", \"+1-473\");\n    map.put(\"GE\", \"+995\");\n    map.put(\"GF\", \"+594\");\n    map.put(\"GG\", \"+44\");\n    map.put(\"GH\", \"+233\");\n    map.put(\"GI\", \"+350\");\n    map.put(\"GL\", \"+299\");\n    map.put(\"GM\", \"+220\");\n    map.put(\"GN\", \"+224\");\n    map.put(\"GP\", \"+590\");\n    map.put(\"GQ\", \"+240\");\n    map.put(\"GR\", \"+30\");\n    map.put(\"GT\", \"+502\");\n    map.put(\"GU\", \"+1-671\");\n    map.put(\"GW\", \"+245\");\n    map.put(\"GY\", \"+592\");\n    map.put(\"HK\", \"+852\");\n    map.put(\"HN\", \"+504\");\n    map.put(\"HR\", \"+385\");\n    map.put(\"HT\", \"+509\");\n    map.put(\"HU\", \"+36\");\n    map.put(\"ID\", \"+62\");\n    map.put(\"IE\", \"+353\");\n    map.put(\"IL\", \"+972\");\n    map.put(\"IM\", \"+44\");\n    map.put(\"IN\", \"+91\");\n    map.put(\"IO\", \"+246\");\n    map.put(\"IQ\", \"+964\");\n    map.put(\"IR\", \"+98\");\n    map.put(\"IS\", \"+354\");\n    map.put(\"IT\", \"+39\");\n    map.put(\"JE\", \"+44\");\n    map.put(\"JM\", \"+1-876\");\n    map.put(\"JO\", \"+962\");\n    map.put(\"JP\", \"+81\");\n    map.put(\"KE\", \"+254\");\n    map.put(\"KG\", \"+996\");\n    map.put(\"KH\", \"+855\");\n    map.put(\"KI\", \"+686\");\n    map.put(\"KM\", \"+269\");\n    map.put(\"KN\", \"+1-869\");\n    map.put(\"KP\", \"+850\");\n    map.put(\"KR\", \"+82\");\n    map.put(\"KW\", \"+965\");\n    map.put(\"KY\", \"+1-345\");\n    map.put(\"KZ\", \"+7\");\n    map.put(\"LA\", \"+856\");\n    map.put(\"LB\", \"+961\");\n    map.put(\"LC\", \"+1-758\");\n    map.put(\"LI\", \"+423\");\n    map.put(\"LK\", \"+94\");\n    map.put(\"LR\", \"+231\");\n    map.put(\"LS\", \"+266\");\n    map.put(\"LT\", \"+370\");\n    map.put(\"LU\", \"+352\");\n    map.put(\"LV\", \"+371\");\n    map.put(\"LY\", \"+218\");\n    map.put(\"MA\", \"+212\");\n    map.put(\"MC\", \"+377\");\n    map.put(\"MD\", \"+373-533\");\n    map.put(\"MD\", \"+373\");\n    map.put(\"ME\", \"+382\");\n    map.put(\"MG\", \"+261\");\n    map.put(\"MH\", \"+692\");\n    map.put(\"MK\", \"+389\");\n    map.put(\"ML\", \"+223\");\n    map.put(\"MM\", \"+95\");\n    map.put(\"MN\", \"+976\");\n    map.put(\"MO\", \"+853\");\n    map.put(\"MP\", \"+1-670\");\n    map.put(\"MQ\", \"+596\");\n    map.put(\"MR\", \"+222\");\n    map.put(\"MS\", \"+1-664\");\n    map.put(\"MT\", \"+356\");\n    map.put(\"MU\", \"+230\");\n    map.put(\"MV\", \"+960\");\n    map.put(\"MW\", \"+265\");\n    map.put(\"MX\", \"+52\");\n    map.put(\"MY\", \"+60\");\n    map.put(\"MZ\", \"+258\");\n    map.put(\"NA\", \"+264\");\n    map.put(\"NC\", \"+687\");\n    map.put(\"NE\", \"+227\");\n    map.put(\"NF\", \"+672\");\n    map.put(\"NG\", \"+234\");\n    map.put(\"NI\", \"+505\");\n    map.put(\"NL\", \"+31\");\n    map.put(\"NO\", \"+47\");\n    map.put(\"NP\", \"+977\");\n    map.put(\"NR\", \"+674\");\n    map.put(\"NU\", \"+683\");\n    map.put(\"NZ\", \"+64\");\n    map.put(\"OM\", \"+968\");\n    map.put(\"PA\", \"+507\");\n    map.put(\"PE\", \"+51\");\n    map.put(\"PF\", \"+689\");\n    map.put(\"PG\", \"+675\");\n    map.put(\"PH\", \"+63\");\n    map.put(\"PK\", \"+92\");\n    map.put(\"PL\", \"+48\");\n    map.put(\"PM\", \"+508\");\n    map.put(\"PR\", \"+1-787\"); // and 1-939 ?\n    map.put(\"PS\", \"+970\");\n    map.put(\"PT\", \"+351\");\n    map.put(\"PW\", \"+680\");\n    map.put(\"PY\", \"+595\");\n    map.put(\"QA\", \"+974\");\n    map.put(\"RE\", \"+262\");\n    map.put(\"RO\", \"+40\");\n    map.put(\"RS\", \"+381\");\n    map.put(\"RU\", \"+7\");\n    map.put(\"RW\", \"+250\");\n    map.put(\"SA\", \"+966\");\n    map.put(\"SB\", \"+677\");\n    map.put(\"SC\", \"+248\");\n    map.put(\"SD\", \"+249\");\n    map.put(\"SE\", \"+46\");\n    map.put(\"SG\", \"+65\");\n    map.put(\"SH\", \"+290\");\n    map.put(\"SI\", \"+386\");\n    map.put(\"SJ\", \"+47\");\n    map.put(\"SK\", \"+421\");\n    map.put(\"SL\", \"+232\");\n    map.put(\"SM\", \"+378\");\n    map.put(\"SN\", \"+221\");\n    map.put(\"SO\", \"+252\");\n    map.put(\"SO\", \"+252\");\n    map.put(\"SR\", \"+597\");\n    map.put(\"ST\", \"+239\");\n    map.put(\"SV\", \"+503\");\n    map.put(\"SY\", \"+963\");\n    map.put(\"SZ\", \"+268\");\n    map.put(\"TA\", \"+290\");\n    map.put(\"TC\", \"+1-649\");\n    map.put(\"TD\", \"+235\");\n    map.put(\"TG\", \"+228\");\n    map.put(\"TH\", \"+66\");\n    map.put(\"TJ\", \"+992\");\n    map.put(\"TK\", \"+690\");\n    map.put(\"TL\", \"+670\");\n    map.put(\"TM\", \"+993\");\n    map.put(\"TN\", \"+216\");\n    map.put(\"TO\", \"+676\");\n    map.put(\"TR\", \"+90\");\n    map.put(\"TT\", \"+1-868\");\n    map.put(\"TV\", \"+688\");\n    map.put(\"TW\", \"+886\");\n    map.put(\"TZ\", \"+255\");\n    map.put(\"UA\", \"+380\");\n    map.put(\"UG\", \"+256\");\n    map.put(\"US\", \"+1\");\n    map.put(\"UY\", \"+598\");\n    map.put(\"UZ\", \"+998\");\n    map.put(\"VA\", \"+379\");\n    map.put(\"VC\", \"+1-784\");\n    map.put(\"VE\", \"+58\");\n    map.put(\"VG\", \"+1-284\");\n    map.put(\"VI\", \"+1-340\");\n    map.put(\"VN\", \"+84\");\n    map.put(\"VU\", \"+678\");\n    map.put(\"WF\", \"+681\");\n    map.put(\"WS\", \"+685\");\n    map.put(\"YE\", \"+967\");\n    map.put(\"YT\", \"+262\");\n    map.put(\"ZA\", \"+27\");\n    map.put(\"ZM\", \"+260\");\n    map.put(\"ZW\", \"+263\");\n}}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":416053,"reputation":389,"user_id":791225,"display_name":"Shane Murphy"},"comment_count":0,"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1554352866,"creation_date":1455097793,"answer_id":35311732,"question_id":10772329,"body_markdown":"You could use the library called [libphonenumber][1] available on Github, made by Google developers. For example you can get the prefix using:\r\n\r\n    PhoneNumberUtil.getInstance().getCountryCodeForRegion(&quot;DE&quot;);\r\n\r\nIt also has a lot of useful functions to parse phone numbers.\r\n\r\n\r\n[1]: https://github.com/googlei18n/libphonenumber","title":"how to get country phone prefix from iso","body":"<p>You could use the library called <a href=\"https://github.com/googlei18n/libphonenumber\" rel=\"noreferrer\">libphonenumber</a> available on Github, made by Google developers. For example you can get the prefix using:</p>\n\n<pre><code>PhoneNumberUtil.getInstance().getCountryCodeForRegion(\"DE\");\n</code></pre>\n\n<p>It also has a lot of useful functions to parse phone numbers.</p>\n"},{"tags":[],"owner":{"account_id":14958640,"reputation":71,"user_id":10799050,"display_name":"J Rom"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685536527,"creation_date":1685536527,"answer_id":76373550,"question_id":10772329,"body_markdown":"I&#39;ve simplified @oshai answer in Kotlin and added a few missing countries:\r\n\r\n    class CountryToPhonePrefix {\r\n\r\n    fun prefixFor(iso2CountryCode: String): String {\r\n        return prefixMap[iso2CountryCode]\r\n            ?: throw IllegalArgumentException(&quot;Unknown country code $iso2CountryCode&quot;)\r\n    }\r\n\r\n    private val prefixMap: Map&lt;String, String&gt; = mapOf(\r\n        &quot;AC&quot; to &quot;+247&quot;,\r\n        &quot;AD&quot; to &quot;+376&quot;,\r\n        &quot;AE&quot; to &quot;+971&quot;,\r\n        &quot;AF&quot; to &quot;+93&quot;,\r\n        &quot;AG&quot; to &quot;+1-268&quot;,\r\n        &quot;AI&quot; to &quot;+1-264&quot;,\r\n        &quot;AL&quot; to &quot;+355&quot;,\r\n        &quot;AM&quot; to &quot;+374&quot;,\r\n        &quot;AN&quot; to &quot;+599&quot;,\r\n        &quot;AO&quot; to &quot;+244&quot;,\r\n        &quot;AQ&quot; to &quot;+672&quot;,\r\n        &quot;AR&quot; to &quot;+54&quot;,\r\n        &quot;AS&quot; to &quot;+1-684&quot;,\r\n        &quot;AT&quot; to &quot;+43&quot;,\r\n        &quot;AU&quot; to &quot;+61&quot;,\r\n        &quot;AW&quot; to &quot;+297&quot;,\r\n        &quot;AX&quot; to &quot;+358-18&quot;,\r\n        &quot;AZ&quot; to &quot;+374-97&quot;,\r\n        &quot;BA&quot; to &quot;+387&quot;,\r\n        &quot;BB&quot; to &quot;+1-246&quot;,\r\n        &quot;BD&quot; to &quot;+880&quot;,\r\n        &quot;BE&quot; to &quot;+32&quot;,\r\n        &quot;BF&quot; to &quot;+226&quot;,\r\n        &quot;BG&quot; to &quot;+359&quot;,\r\n        &quot;BH&quot; to &quot;+973&quot;,\r\n        &quot;BI&quot; to &quot;+257&quot;,\r\n        &quot;BJ&quot; to &quot;+229&quot;,\r\n        &quot;BM&quot; to &quot;+1-441&quot;,\r\n        &quot;BN&quot; to &quot;+673&quot;,\r\n        &quot;BL&quot; to &quot;+590&quot;,\r\n        &quot;BO&quot; to &quot;+591&quot;,\r\n        &quot;BQ&quot; to &quot;+599&quot;,\r\n        &quot;BR&quot; to &quot;+55&quot;,\r\n        &quot;BS&quot; to &quot;+1-242&quot;,\r\n        &quot;BT&quot; to &quot;+975&quot;,\r\n        &quot;BW&quot; to &quot;+267&quot;,\r\n        &quot;BV&quot; to &quot;+47&quot;,\r\n        &quot;BY&quot; to &quot;+375&quot;,\r\n        &quot;BZ&quot; to &quot;+501&quot;,\r\n        &quot;CA&quot; to &quot;+1&quot;,\r\n        &quot;CC&quot; to &quot;+61&quot;,\r\n        &quot;CD&quot; to &quot;+243&quot;,\r\n        &quot;CF&quot; to &quot;+236&quot;,\r\n        &quot;CG&quot; to &quot;+242&quot;,\r\n        &quot;CH&quot; to &quot;+41&quot;,\r\n        &quot;CI&quot; to &quot;+225&quot;,\r\n        &quot;CK&quot; to &quot;+682&quot;,\r\n        &quot;CL&quot; to &quot;+56&quot;,\r\n        &quot;CM&quot; to &quot;+237&quot;,\r\n        &quot;CN&quot; to &quot;+86&quot;,\r\n        &quot;CO&quot; to &quot;+57&quot;,\r\n        &quot;CR&quot; to &quot;+506&quot;,\r\n        &quot;CS&quot; to &quot;+381&quot;,\r\n        &quot;CU&quot; to &quot;+53&quot;,\r\n        &quot;CV&quot; to &quot;+238&quot;,\r\n        &quot;CW&quot; to &quot;+599&quot;,\r\n        &quot;CX&quot; to &quot;+61&quot;,\r\n        &quot;CY&quot; to &quot;+90-392&quot;,\r\n        &quot;CZ&quot; to &quot;+420&quot;,\r\n        &quot;DE&quot; to &quot;+49&quot;,\r\n        &quot;DJ&quot; to &quot;+253&quot;,\r\n        &quot;DK&quot; to &quot;+45&quot;,\r\n        &quot;DM&quot; to &quot;+1-767&quot;,\r\n        &quot;DO&quot; to &quot;+1-809&quot;,\r\n        &quot;DZ&quot; to &quot;+213&quot;,\r\n        &quot;EC&quot; to &quot;+593&quot;,\r\n        &quot;EE&quot; to &quot;+372&quot;,\r\n        &quot;EG&quot; to &quot;+20&quot;,\r\n        &quot;EH&quot; to &quot;+212&quot;,\r\n        &quot;ER&quot; to &quot;+291&quot;,\r\n        &quot;ES&quot; to &quot;+34&quot;,\r\n        &quot;ET&quot; to &quot;+251&quot;,\r\n        &quot;FI&quot; to &quot;+358&quot;,\r\n        &quot;FJ&quot; to &quot;+679&quot;,\r\n        &quot;FK&quot; to &quot;+500&quot;,\r\n        &quot;FM&quot; to &quot;+691&quot;,\r\n        &quot;FO&quot; to &quot;+298&quot;,\r\n        &quot;FR&quot; to &quot;+33&quot;,\r\n        &quot;GA&quot; to &quot;+241&quot;,\r\n        &quot;GB&quot; to &quot;+44&quot;,\r\n        &quot;GD&quot; to &quot;+1-473&quot;,\r\n        &quot;GE&quot; to &quot;+995&quot;,\r\n        &quot;GF&quot; to &quot;+594&quot;,\r\n        &quot;GG&quot; to &quot;+44&quot;,\r\n        &quot;GH&quot; to &quot;+233&quot;,\r\n        &quot;GI&quot; to &quot;+350&quot;,\r\n        &quot;GL&quot; to &quot;+299&quot;,\r\n        &quot;GM&quot; to &quot;+220&quot;,\r\n        &quot;GN&quot; to &quot;+224&quot;,\r\n        &quot;GP&quot; to &quot;+590&quot;,\r\n        &quot;GQ&quot; to &quot;+240&quot;,\r\n        &quot;GR&quot; to &quot;+30&quot;,\r\n        &quot;GS&quot; to &quot;+500&quot;,\r\n        &quot;GT&quot; to &quot;+502&quot;,\r\n        &quot;GU&quot; to &quot;+1-671&quot;,\r\n        &quot;GW&quot; to &quot;+245&quot;,\r\n        &quot;GY&quot; to &quot;+592&quot;,\r\n        &quot;HK&quot; to &quot;+852&quot;,\r\n        &quot;HN&quot; to &quot;+504&quot;,\r\n        &quot;HR&quot; to &quot;+385&quot;,\r\n        &quot;HT&quot; to &quot;+509&quot;,\r\n        &quot;HU&quot; to &quot;+36&quot;,\r\n        &quot;ID&quot; to &quot;+62&quot;,\r\n        &quot;IE&quot; to &quot;+353&quot;,\r\n        &quot;IL&quot; to &quot;+972&quot;,\r\n        &quot;IM&quot; to &quot;+44&quot;,\r\n        &quot;IN&quot; to &quot;+91&quot;,\r\n        &quot;IO&quot; to &quot;+246&quot;,\r\n        &quot;IQ&quot; to &quot;+964&quot;,\r\n        &quot;IR&quot; to &quot;+98&quot;,\r\n        &quot;IS&quot; to &quot;+354&quot;,\r\n        &quot;IT&quot; to &quot;+39&quot;,\r\n        &quot;JE&quot; to &quot;+44&quot;,\r\n        &quot;JM&quot; to &quot;+1-876&quot;,\r\n        &quot;JO&quot; to &quot;+962&quot;,\r\n        &quot;JP&quot; to &quot;+81&quot;,\r\n        &quot;KE&quot; to &quot;+254&quot;,\r\n        &quot;KG&quot; to &quot;+996&quot;,\r\n        &quot;KH&quot; to &quot;+855&quot;,\r\n        &quot;KI&quot; to &quot;+686&quot;,\r\n        &quot;KM&quot; to &quot;+269&quot;,\r\n        &quot;KN&quot; to &quot;+1-869&quot;,\r\n        &quot;KP&quot; to &quot;+850&quot;,\r\n        &quot;KR&quot; to &quot;+82&quot;,\r\n        &quot;KW&quot; to &quot;+965&quot;,\r\n        &quot;KY&quot; to &quot;+1-345&quot;,\r\n        &quot;KZ&quot; to &quot;+7&quot;,\r\n        &quot;LA&quot; to &quot;+856&quot;,\r\n        &quot;LB&quot; to &quot;+961&quot;,\r\n        &quot;LC&quot; to &quot;+1-758&quot;,\r\n        &quot;LI&quot; to &quot;+423&quot;,\r\n        &quot;LK&quot; to &quot;+94&quot;,\r\n        &quot;LR&quot; to &quot;+231&quot;,\r\n        &quot;LS&quot; to &quot;+266&quot;,\r\n        &quot;LT&quot; to &quot;+370&quot;,\r\n        &quot;LU&quot; to &quot;+352&quot;,\r\n        &quot;LV&quot; to &quot;+371&quot;,\r\n        &quot;LY&quot; to &quot;+218&quot;,\r\n        &quot;MA&quot; to &quot;+212&quot;,\r\n        &quot;MC&quot; to &quot;+377&quot;,\r\n        &quot;MD&quot; to &quot;+373-533&quot;,\r\n        &quot;ME&quot; to &quot;+382&quot;,\r\n        &quot;MF&quot; to &quot;+590&quot;,\r\n        &quot;MG&quot; to &quot;+261&quot;,\r\n        &quot;MH&quot; to &quot;+692&quot;,\r\n        &quot;MK&quot; to &quot;+389&quot;,\r\n        &quot;ML&quot; to &quot;+223&quot;,\r\n        &quot;MM&quot; to &quot;+95&quot;,\r\n        &quot;MN&quot; to &quot;+976&quot;,\r\n        &quot;MO&quot; to &quot;+853&quot;,\r\n        &quot;MP&quot; to &quot;+1-670&quot;,\r\n        &quot;MQ&quot; to &quot;+596&quot;,\r\n        &quot;MR&quot; to &quot;+222&quot;,\r\n        &quot;MS&quot; to &quot;+1-664&quot;,\r\n        &quot;MT&quot; to &quot;+356&quot;,\r\n        &quot;MU&quot; to &quot;+230&quot;,\r\n        &quot;MV&quot; to &quot;+960&quot;,\r\n        &quot;MW&quot; to &quot;+265&quot;,\r\n        &quot;MX&quot; to &quot;+52&quot;,\r\n        &quot;MY&quot; to &quot;+60&quot;,\r\n        &quot;MZ&quot; to &quot;+258&quot;,\r\n        &quot;NA&quot; to &quot;+264&quot;,\r\n        &quot;NC&quot; to &quot;+687&quot;,\r\n        &quot;NE&quot; to &quot;+227&quot;,\r\n        &quot;NF&quot; to &quot;+672&quot;,\r\n        &quot;NG&quot; to &quot;+234&quot;,\r\n        &quot;NI&quot; to &quot;+505&quot;,\r\n        &quot;NL&quot; to &quot;+31&quot;,\r\n        &quot;NO&quot; to &quot;+47&quot;,\r\n        &quot;NP&quot; to &quot;+977&quot;,\r\n        &quot;NR&quot; to &quot;+674&quot;,\r\n        &quot;NU&quot; to &quot;+683&quot;,\r\n        &quot;NZ&quot; to &quot;+64&quot;,\r\n        &quot;OM&quot; to &quot;+968&quot;,\r\n        &quot;PA&quot; to &quot;+507&quot;,\r\n        &quot;PE&quot; to &quot;+51&quot;,\r\n        &quot;PF&quot; to &quot;+689&quot;,\r\n        &quot;PG&quot; to &quot;+675&quot;,\r\n        &quot;PH&quot; to &quot;+63&quot;,\r\n        &quot;PK&quot; to &quot;+92&quot;,\r\n        &quot;PL&quot; to &quot;+48&quot;,\r\n        &quot;PM&quot; to &quot;+508&quot;,\r\n        &quot;PR&quot; to &quot;+1-787&quot;,\r\n        &quot;PS&quot; to &quot;+970&quot;,\r\n        &quot;PT&quot; to &quot;+351&quot;,\r\n        &quot;PW&quot; to &quot;+680&quot;,\r\n        &quot;PY&quot; to &quot;+595&quot;,\r\n        &quot;QA&quot; to &quot;+974&quot;,\r\n        &quot;RE&quot; to &quot;+262&quot;,\r\n        &quot;RO&quot; to &quot;+40&quot;,\r\n        &quot;RS&quot; to &quot;+381&quot;,\r\n        &quot;RU&quot; to &quot;+7&quot;,\r\n        &quot;RW&quot; to &quot;+250&quot;,\r\n        &quot;SA&quot; to &quot;+966&quot;,\r\n        &quot;SB&quot; to &quot;+677&quot;,\r\n        &quot;SC&quot; to &quot;+248&quot;,\r\n        &quot;SD&quot; to &quot;+249&quot;,\r\n        &quot;SE&quot; to &quot;+46&quot;,\r\n        &quot;SG&quot; to &quot;+65&quot;,\r\n        &quot;SH&quot; to &quot;+290&quot;,\r\n        &quot;SI&quot; to &quot;+386&quot;,\r\n        &quot;SJ&quot; to &quot;+47&quot;,\r\n        &quot;SK&quot; to &quot;+421&quot;,\r\n        &quot;SL&quot; to &quot;+232&quot;,\r\n        &quot;SM&quot; to &quot;+378&quot;,\r\n        &quot;SN&quot; to &quot;+221&quot;,\r\n        &quot;SO&quot; to &quot;+252&quot;,\r\n        &quot;SR&quot; to &quot;+597&quot;,\r\n        &quot;SS&quot; to &quot;+211&quot;,\r\n        &quot;ST&quot; to &quot;+239&quot;,\r\n        &quot;SV&quot; to &quot;+503&quot;,\r\n        &quot;SX&quot; to &quot;+721&quot;,\r\n        &quot;SY&quot; to &quot;+963&quot;,\r\n        &quot;SZ&quot; to &quot;+268&quot;,\r\n        &quot;TA&quot; to &quot;+290&quot;,\r\n        &quot;TC&quot; to &quot;+1-649&quot;,\r\n        &quot;TD&quot; to &quot;+235&quot;,\r\n        &quot;TG&quot; to &quot;+228&quot;,\r\n        &quot;TH&quot; to &quot;+66&quot;,\r\n        &quot;TJ&quot; to &quot;+992&quot;,\r\n        &quot;TK&quot; to &quot;+690&quot;,\r\n        &quot;TL&quot; to &quot;+670&quot;,\r\n        &quot;TM&quot; to &quot;+993&quot;,\r\n        &quot;TN&quot; to &quot;+216&quot;,\r\n        &quot;TO&quot; to &quot;+676&quot;,\r\n        &quot;TR&quot; to &quot;+90&quot;,\r\n        &quot;TT&quot; to &quot;+1-868&quot;,\r\n        &quot;TV&quot; to &quot;+688&quot;,\r\n        &quot;TW&quot; to &quot;+886&quot;,\r\n        &quot;TZ&quot; to &quot;+255&quot;,\r\n        &quot;UA&quot; to &quot;+380&quot;,\r\n        &quot;UG&quot; to &quot;+256&quot;,\r\n        &quot;US&quot; to &quot;+1&quot;,\r\n        &quot;UY&quot; to &quot;+598&quot;,\r\n        &quot;UZ&quot; to &quot;+998&quot;,\r\n        &quot;VA&quot; to &quot;+379&quot;,\r\n        &quot;VC&quot; to &quot;+1-784&quot;,\r\n        &quot;VE&quot; to &quot;+58&quot;,\r\n        &quot;VG&quot; to &quot;+1-284&quot;,\r\n        &quot;VI&quot; to &quot;+1-340&quot;,\r\n        &quot;VN&quot; to &quot;+84&quot;,\r\n        &quot;VU&quot; to &quot;+678&quot;,\r\n        &quot;WF&quot; to &quot;+681&quot;,\r\n        &quot;WS&quot; to &quot;+685&quot;,\r\n        &quot;YE&quot; to &quot;+967&quot;,\r\n        &quot;YT&quot; to &quot;+262&quot;,\r\n        &quot;ZA&quot; to &quot;+27&quot;,\r\n        &quot;ZM&quot; to &quot;+260&quot;,\r\n        &quot;ZW&quot; to &quot;+263&quot;\r\n    )\r\n}\r\n","title":"how to get country phone prefix from iso","body":"<p>I've simplified @oshai answer in Kotlin and added a few missing countries:</p>\n<pre><code>class CountryToPhonePrefix {\n\nfun prefixFor(iso2CountryCode: String): String {\n    return prefixMap[iso2CountryCode]\n        ?: throw IllegalArgumentException(&quot;Unknown country code $iso2CountryCode&quot;)\n}\n\nprivate val prefixMap: Map&lt;String, String&gt; = mapOf(\n    &quot;AC&quot; to &quot;+247&quot;,\n    &quot;AD&quot; to &quot;+376&quot;,\n    &quot;AE&quot; to &quot;+971&quot;,\n    &quot;AF&quot; to &quot;+93&quot;,\n    &quot;AG&quot; to &quot;+1-268&quot;,\n    &quot;AI&quot; to &quot;+1-264&quot;,\n    &quot;AL&quot; to &quot;+355&quot;,\n    &quot;AM&quot; to &quot;+374&quot;,\n    &quot;AN&quot; to &quot;+599&quot;,\n    &quot;AO&quot; to &quot;+244&quot;,\n    &quot;AQ&quot; to &quot;+672&quot;,\n    &quot;AR&quot; to &quot;+54&quot;,\n    &quot;AS&quot; to &quot;+1-684&quot;,\n    &quot;AT&quot; to &quot;+43&quot;,\n    &quot;AU&quot; to &quot;+61&quot;,\n    &quot;AW&quot; to &quot;+297&quot;,\n    &quot;AX&quot; to &quot;+358-18&quot;,\n    &quot;AZ&quot; to &quot;+374-97&quot;,\n    &quot;BA&quot; to &quot;+387&quot;,\n    &quot;BB&quot; to &quot;+1-246&quot;,\n    &quot;BD&quot; to &quot;+880&quot;,\n    &quot;BE&quot; to &quot;+32&quot;,\n    &quot;BF&quot; to &quot;+226&quot;,\n    &quot;BG&quot; to &quot;+359&quot;,\n    &quot;BH&quot; to &quot;+973&quot;,\n    &quot;BI&quot; to &quot;+257&quot;,\n    &quot;BJ&quot; to &quot;+229&quot;,\n    &quot;BM&quot; to &quot;+1-441&quot;,\n    &quot;BN&quot; to &quot;+673&quot;,\n    &quot;BL&quot; to &quot;+590&quot;,\n    &quot;BO&quot; to &quot;+591&quot;,\n    &quot;BQ&quot; to &quot;+599&quot;,\n    &quot;BR&quot; to &quot;+55&quot;,\n    &quot;BS&quot; to &quot;+1-242&quot;,\n    &quot;BT&quot; to &quot;+975&quot;,\n    &quot;BW&quot; to &quot;+267&quot;,\n    &quot;BV&quot; to &quot;+47&quot;,\n    &quot;BY&quot; to &quot;+375&quot;,\n    &quot;BZ&quot; to &quot;+501&quot;,\n    &quot;CA&quot; to &quot;+1&quot;,\n    &quot;CC&quot; to &quot;+61&quot;,\n    &quot;CD&quot; to &quot;+243&quot;,\n    &quot;CF&quot; to &quot;+236&quot;,\n    &quot;CG&quot; to &quot;+242&quot;,\n    &quot;CH&quot; to &quot;+41&quot;,\n    &quot;CI&quot; to &quot;+225&quot;,\n    &quot;CK&quot; to &quot;+682&quot;,\n    &quot;CL&quot; to &quot;+56&quot;,\n    &quot;CM&quot; to &quot;+237&quot;,\n    &quot;CN&quot; to &quot;+86&quot;,\n    &quot;CO&quot; to &quot;+57&quot;,\n    &quot;CR&quot; to &quot;+506&quot;,\n    &quot;CS&quot; to &quot;+381&quot;,\n    &quot;CU&quot; to &quot;+53&quot;,\n    &quot;CV&quot; to &quot;+238&quot;,\n    &quot;CW&quot; to &quot;+599&quot;,\n    &quot;CX&quot; to &quot;+61&quot;,\n    &quot;CY&quot; to &quot;+90-392&quot;,\n    &quot;CZ&quot; to &quot;+420&quot;,\n    &quot;DE&quot; to &quot;+49&quot;,\n    &quot;DJ&quot; to &quot;+253&quot;,\n    &quot;DK&quot; to &quot;+45&quot;,\n    &quot;DM&quot; to &quot;+1-767&quot;,\n    &quot;DO&quot; to &quot;+1-809&quot;,\n    &quot;DZ&quot; to &quot;+213&quot;,\n    &quot;EC&quot; to &quot;+593&quot;,\n    &quot;EE&quot; to &quot;+372&quot;,\n    &quot;EG&quot; to &quot;+20&quot;,\n    &quot;EH&quot; to &quot;+212&quot;,\n    &quot;ER&quot; to &quot;+291&quot;,\n    &quot;ES&quot; to &quot;+34&quot;,\n    &quot;ET&quot; to &quot;+251&quot;,\n    &quot;FI&quot; to &quot;+358&quot;,\n    &quot;FJ&quot; to &quot;+679&quot;,\n    &quot;FK&quot; to &quot;+500&quot;,\n    &quot;FM&quot; to &quot;+691&quot;,\n    &quot;FO&quot; to &quot;+298&quot;,\n    &quot;FR&quot; to &quot;+33&quot;,\n    &quot;GA&quot; to &quot;+241&quot;,\n    &quot;GB&quot; to &quot;+44&quot;,\n    &quot;GD&quot; to &quot;+1-473&quot;,\n    &quot;GE&quot; to &quot;+995&quot;,\n    &quot;GF&quot; to &quot;+594&quot;,\n    &quot;GG&quot; to &quot;+44&quot;,\n    &quot;GH&quot; to &quot;+233&quot;,\n    &quot;GI&quot; to &quot;+350&quot;,\n    &quot;GL&quot; to &quot;+299&quot;,\n    &quot;GM&quot; to &quot;+220&quot;,\n    &quot;GN&quot; to &quot;+224&quot;,\n    &quot;GP&quot; to &quot;+590&quot;,\n    &quot;GQ&quot; to &quot;+240&quot;,\n    &quot;GR&quot; to &quot;+30&quot;,\n    &quot;GS&quot; to &quot;+500&quot;,\n    &quot;GT&quot; to &quot;+502&quot;,\n    &quot;GU&quot; to &quot;+1-671&quot;,\n    &quot;GW&quot; to &quot;+245&quot;,\n    &quot;GY&quot; to &quot;+592&quot;,\n    &quot;HK&quot; to &quot;+852&quot;,\n    &quot;HN&quot; to &quot;+504&quot;,\n    &quot;HR&quot; to &quot;+385&quot;,\n    &quot;HT&quot; to &quot;+509&quot;,\n    &quot;HU&quot; to &quot;+36&quot;,\n    &quot;ID&quot; to &quot;+62&quot;,\n    &quot;IE&quot; to &quot;+353&quot;,\n    &quot;IL&quot; to &quot;+972&quot;,\n    &quot;IM&quot; to &quot;+44&quot;,\n    &quot;IN&quot; to &quot;+91&quot;,\n    &quot;IO&quot; to &quot;+246&quot;,\n    &quot;IQ&quot; to &quot;+964&quot;,\n    &quot;IR&quot; to &quot;+98&quot;,\n    &quot;IS&quot; to &quot;+354&quot;,\n    &quot;IT&quot; to &quot;+39&quot;,\n    &quot;JE&quot; to &quot;+44&quot;,\n    &quot;JM&quot; to &quot;+1-876&quot;,\n    &quot;JO&quot; to &quot;+962&quot;,\n    &quot;JP&quot; to &quot;+81&quot;,\n    &quot;KE&quot; to &quot;+254&quot;,\n    &quot;KG&quot; to &quot;+996&quot;,\n    &quot;KH&quot; to &quot;+855&quot;,\n    &quot;KI&quot; to &quot;+686&quot;,\n    &quot;KM&quot; to &quot;+269&quot;,\n    &quot;KN&quot; to &quot;+1-869&quot;,\n    &quot;KP&quot; to &quot;+850&quot;,\n    &quot;KR&quot; to &quot;+82&quot;,\n    &quot;KW&quot; to &quot;+965&quot;,\n    &quot;KY&quot; to &quot;+1-345&quot;,\n    &quot;KZ&quot; to &quot;+7&quot;,\n    &quot;LA&quot; to &quot;+856&quot;,\n    &quot;LB&quot; to &quot;+961&quot;,\n    &quot;LC&quot; to &quot;+1-758&quot;,\n    &quot;LI&quot; to &quot;+423&quot;,\n    &quot;LK&quot; to &quot;+94&quot;,\n    &quot;LR&quot; to &quot;+231&quot;,\n    &quot;LS&quot; to &quot;+266&quot;,\n    &quot;LT&quot; to &quot;+370&quot;,\n    &quot;LU&quot; to &quot;+352&quot;,\n    &quot;LV&quot; to &quot;+371&quot;,\n    &quot;LY&quot; to &quot;+218&quot;,\n    &quot;MA&quot; to &quot;+212&quot;,\n    &quot;MC&quot; to &quot;+377&quot;,\n    &quot;MD&quot; to &quot;+373-533&quot;,\n    &quot;ME&quot; to &quot;+382&quot;,\n    &quot;MF&quot; to &quot;+590&quot;,\n    &quot;MG&quot; to &quot;+261&quot;,\n    &quot;MH&quot; to &quot;+692&quot;,\n    &quot;MK&quot; to &quot;+389&quot;,\n    &quot;ML&quot; to &quot;+223&quot;,\n    &quot;MM&quot; to &quot;+95&quot;,\n    &quot;MN&quot; to &quot;+976&quot;,\n    &quot;MO&quot; to &quot;+853&quot;,\n    &quot;MP&quot; to &quot;+1-670&quot;,\n    &quot;MQ&quot; to &quot;+596&quot;,\n    &quot;MR&quot; to &quot;+222&quot;,\n    &quot;MS&quot; to &quot;+1-664&quot;,\n    &quot;MT&quot; to &quot;+356&quot;,\n    &quot;MU&quot; to &quot;+230&quot;,\n    &quot;MV&quot; to &quot;+960&quot;,\n    &quot;MW&quot; to &quot;+265&quot;,\n    &quot;MX&quot; to &quot;+52&quot;,\n    &quot;MY&quot; to &quot;+60&quot;,\n    &quot;MZ&quot; to &quot;+258&quot;,\n    &quot;NA&quot; to &quot;+264&quot;,\n    &quot;NC&quot; to &quot;+687&quot;,\n    &quot;NE&quot; to &quot;+227&quot;,\n    &quot;NF&quot; to &quot;+672&quot;,\n    &quot;NG&quot; to &quot;+234&quot;,\n    &quot;NI&quot; to &quot;+505&quot;,\n    &quot;NL&quot; to &quot;+31&quot;,\n    &quot;NO&quot; to &quot;+47&quot;,\n    &quot;NP&quot; to &quot;+977&quot;,\n    &quot;NR&quot; to &quot;+674&quot;,\n    &quot;NU&quot; to &quot;+683&quot;,\n    &quot;NZ&quot; to &quot;+64&quot;,\n    &quot;OM&quot; to &quot;+968&quot;,\n    &quot;PA&quot; to &quot;+507&quot;,\n    &quot;PE&quot; to &quot;+51&quot;,\n    &quot;PF&quot; to &quot;+689&quot;,\n    &quot;PG&quot; to &quot;+675&quot;,\n    &quot;PH&quot; to &quot;+63&quot;,\n    &quot;PK&quot; to &quot;+92&quot;,\n    &quot;PL&quot; to &quot;+48&quot;,\n    &quot;PM&quot; to &quot;+508&quot;,\n    &quot;PR&quot; to &quot;+1-787&quot;,\n    &quot;PS&quot; to &quot;+970&quot;,\n    &quot;PT&quot; to &quot;+351&quot;,\n    &quot;PW&quot; to &quot;+680&quot;,\n    &quot;PY&quot; to &quot;+595&quot;,\n    &quot;QA&quot; to &quot;+974&quot;,\n    &quot;RE&quot; to &quot;+262&quot;,\n    &quot;RO&quot; to &quot;+40&quot;,\n    &quot;RS&quot; to &quot;+381&quot;,\n    &quot;RU&quot; to &quot;+7&quot;,\n    &quot;RW&quot; to &quot;+250&quot;,\n    &quot;SA&quot; to &quot;+966&quot;,\n    &quot;SB&quot; to &quot;+677&quot;,\n    &quot;SC&quot; to &quot;+248&quot;,\n    &quot;SD&quot; to &quot;+249&quot;,\n    &quot;SE&quot; to &quot;+46&quot;,\n    &quot;SG&quot; to &quot;+65&quot;,\n    &quot;SH&quot; to &quot;+290&quot;,\n    &quot;SI&quot; to &quot;+386&quot;,\n    &quot;SJ&quot; to &quot;+47&quot;,\n    &quot;SK&quot; to &quot;+421&quot;,\n    &quot;SL&quot; to &quot;+232&quot;,\n    &quot;SM&quot; to &quot;+378&quot;,\n    &quot;SN&quot; to &quot;+221&quot;,\n    &quot;SO&quot; to &quot;+252&quot;,\n    &quot;SR&quot; to &quot;+597&quot;,\n    &quot;SS&quot; to &quot;+211&quot;,\n    &quot;ST&quot; to &quot;+239&quot;,\n    &quot;SV&quot; to &quot;+503&quot;,\n    &quot;SX&quot; to &quot;+721&quot;,\n    &quot;SY&quot; to &quot;+963&quot;,\n    &quot;SZ&quot; to &quot;+268&quot;,\n    &quot;TA&quot; to &quot;+290&quot;,\n    &quot;TC&quot; to &quot;+1-649&quot;,\n    &quot;TD&quot; to &quot;+235&quot;,\n    &quot;TG&quot; to &quot;+228&quot;,\n    &quot;TH&quot; to &quot;+66&quot;,\n    &quot;TJ&quot; to &quot;+992&quot;,\n    &quot;TK&quot; to &quot;+690&quot;,\n    &quot;TL&quot; to &quot;+670&quot;,\n    &quot;TM&quot; to &quot;+993&quot;,\n    &quot;TN&quot; to &quot;+216&quot;,\n    &quot;TO&quot; to &quot;+676&quot;,\n    &quot;TR&quot; to &quot;+90&quot;,\n    &quot;TT&quot; to &quot;+1-868&quot;,\n    &quot;TV&quot; to &quot;+688&quot;,\n    &quot;TW&quot; to &quot;+886&quot;,\n    &quot;TZ&quot; to &quot;+255&quot;,\n    &quot;UA&quot; to &quot;+380&quot;,\n    &quot;UG&quot; to &quot;+256&quot;,\n    &quot;US&quot; to &quot;+1&quot;,\n    &quot;UY&quot; to &quot;+598&quot;,\n    &quot;UZ&quot; to &quot;+998&quot;,\n    &quot;VA&quot; to &quot;+379&quot;,\n    &quot;VC&quot; to &quot;+1-784&quot;,\n    &quot;VE&quot; to &quot;+58&quot;,\n    &quot;VG&quot; to &quot;+1-284&quot;,\n    &quot;VI&quot; to &quot;+1-340&quot;,\n    &quot;VN&quot; to &quot;+84&quot;,\n    &quot;VU&quot; to &quot;+678&quot;,\n    &quot;WF&quot; to &quot;+681&quot;,\n    &quot;WS&quot; to &quot;+685&quot;,\n    &quot;YE&quot; to &quot;+967&quot;,\n    &quot;YT&quot; to &quot;+262&quot;,\n    &quot;ZA&quot; to &quot;+27&quot;,\n    &quot;ZM&quot; to &quot;+260&quot;,\n    &quot;ZW&quot; to &quot;+263&quot;\n)\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":179362,"reputation":15005,"user_id":411965,"accept_rate":87,"display_name":"oshai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36397,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":10776064,"answer_count":5,"score":14,"last_activity_date":1685536527,"creation_date":1338103333,"question_id":10772329,"body_markdown":"I got the country iso by the code from this [answer][1]:  \r\n\r\n    TelephonyManager tm = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);\r\n    String countryCode = tm.getSimCountryIso();   \r\n\r\nhow can I get the prefix phone number for country?   \r\nfor example +972 for il.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3659809/where-am-i-get-country","title":"how to get country phone prefix from iso","body":"<p>I got the country iso by the code from this <a href=\"https://stackoverflow.com/questions/3659809/where-am-i-get-country\">answer</a>:  </p>\n\n<pre><code>TelephonyManager tm = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);\nString countryCode = tm.getSimCountryIso();   \n</code></pre>\n\n<p>how can I get the prefix phone number for country?<br>\nfor example +972 for il.</p>\n"},{"tags":["java","maven","maven-3"],"comments":[{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1685516428,"post_id":76370646,"comment_id":134669224,"body_markdown":"according to your configs you are deploying to `busy-libs-release-local` and trying to download from `busy-libs-release`, that seems to be a root cause.","body":"according to your configs you are deploying to <code>busy-libs-release-local</code> and trying to download from <code>busy-libs-release</code>, that seems to be a root cause."},{"owner":{"account_id":243616,"reputation":9537,"user_id":515922,"accept_rate":89,"display_name":"Aravind A"},"score":0,"creation_date":1685534716,"post_id":76370646,"comment_id":134673051,"body_markdown":"@AndreyB.Panfilov, Thank you but busy-libs-release is a virtual repo that reflects the contents of busy-libs-release-local. I can&#39;t write to busy-libs-release (get a 405). Hence I write to busy-libs-release-local and read from busy-libs-release. I can see the file in the virtual repo and curl but maven cannot find it for some reason. Also, I just tried reading directly from release-local and got the same error - Could not find artifact org.xyzCompany:test-parent:pom:0.0.1 in central (https://hidden.jfrog.io/artifactory/busy-libs-release-local) although the pom&#39;s in there.","body":"@AndreyB.Panfilov, Thank you but busy-libs-release is a virtual repo that reflects the contents of busy-libs-release-local. I can&#39;t write to busy-libs-release (get a 405). Hence I write to busy-libs-release-local and read from busy-libs-release. I can see the file in the virtual repo and curl but maven cannot find it for some reason. Also, I just tried reading directly from release-local and got the same error - Could not find artifact org.xyzCompany:test-parent:pom:0.0.1 in central (<a href=\"https://hidden.jfrog.io/artifactory/busy-libs-release-local\" rel=\"nofollow noreferrer\">hidden.jfrog.io/artifactory/busy-libs-release-local</a>) although the pom&#39;s in there."},{"owner":{"account_id":243616,"reputation":9537,"user_id":515922,"accept_rate":89,"display_name":"Aravind A"},"score":0,"creation_date":1685536459,"post_id":76370646,"comment_id":134673530,"body_markdown":"Looks like issue was caused by &quot;Hide Existence of Unauthorized Resources&quot; and needs an additional configuration to use preemptive auth. Answer below. Thanks.","body":"Looks like issue was caused by &quot;Hide Existence of Unauthorized Resources&quot; and needs an additional configuration to use preemptive auth. Answer below. Thanks."}],"answers":[{"tags":[],"owner":{"account_id":243616,"reputation":9537,"user_id":515922,"accept_rate":89,"display_name":"Aravind A"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685536311,"creation_date":1685536311,"answer_id":76373523,"question_id":76370646,"body_markdown":"The issue was resolved by\r\n\r\nhttps://stackoverflow.com/questions/43396013/artifactory-file-not-found-by-maven-if-anonymous-access-is-allowed\r\n\r\nUsing pre-emptive authentication seems to have resolved the issue\r\n\r\n           &lt;server&gt;\r\n              &lt;configuration&gt;\r\n    \t\t\t&lt;httpConfiguration&gt;\r\n    \t\t\t  &lt;all&gt;\r\n    \t\t\t\t&lt;usePreemptive&gt;true&lt;/usePreemptive&gt;\r\n    \t\t\t  &lt;/all&gt;\r\n    \t\t\t&lt;/httpConfiguration&gt;\r\n    \t\t  &lt;/configuration&gt;\r\n    \t\t  &lt;username&gt;{username}&lt;/username&gt;\r\n    \t\t  &lt;password&gt;{password}&lt;/password&gt;\r\n    \t\t  &lt;id&gt;central&lt;/id&gt;\r\n    \t\t&lt;/server&gt;\r\n\r\n","title":"Maven cannot find parent pom from artifactory even though it exists","body":"<p>The issue was resolved by</p>\n<p><a href=\"https://stackoverflow.com/questions/43396013/artifactory-file-not-found-by-maven-if-anonymous-access-is-allowed\">Artifactory: file not found by Maven if anonymous access is allowed</a></p>\n<p>Using pre-emptive authentication seems to have resolved the issue</p>\n<pre><code>       &lt;server&gt;\n          &lt;configuration&gt;\n            &lt;httpConfiguration&gt;\n              &lt;all&gt;\n                &lt;usePreemptive&gt;true&lt;/usePreemptive&gt;\n              &lt;/all&gt;\n            &lt;/httpConfiguration&gt;\n          &lt;/configuration&gt;\n          &lt;username&gt;{username}&lt;/username&gt;\n          &lt;password&gt;{password}&lt;/password&gt;\n          &lt;id&gt;central&lt;/id&gt;\n        &lt;/server&gt;\n</code></pre>\n"}],"owner":{"account_id":243616,"reputation":9537,"user_id":515922,"accept_rate":89,"display_name":"Aravind A"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1685536311,"creation_date":1685513777,"question_id":76370646,"body_markdown":"I have a simple maven parent-child project. The parent pom sits on it&#39;s own project. The project has been tested with a trial artifactory which had maven repo autoconfig. Works smooth there. Unfortunately our corporate artifactory did not have the auto config and the repos were manually created. \r\n\r\nMaven deploy on parent works fine. The deploy on child fails in the corporate artifactory since it cannot find the parent. The issue exists on both release and snapshot repos. Maven does search the repo and the file location looks fine(curl to the  location returns the pom and if I put the url in browser, file gets downloaded). Why isn&#39;t maven able to download it? It is an auth issue? Any help will be much appreciated. Thanks.\r\n\r\nError\r\n\r\n[![mvn clean deploy][1]][1]\r\n\r\n\r\nI can simulate the issue with following pom\r\n\r\nParent\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    \r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;groupId&gt;org.xyzCompany&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;test-parent&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1&lt;/version&gt;\r\n    \t&lt;packaging&gt;pom&lt;/packaging&gt;\r\n    \t&lt;name&gt;parent-pom&lt;/name&gt;\r\n    \t&lt;description&gt;Parent POM&lt;/description&gt;\r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.8.2&lt;/version&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \t\t&lt;distributionManagement&gt;\r\n    \t\t&lt;snapshotRepository&gt;\r\n    \t\t\t&lt;id&gt;snapshots&lt;/id&gt;\r\n    \t\t\t&lt;name&gt;artifactory-snapshots&lt;/name&gt;\r\n    \t\t\t&lt;url&gt;https://hidden.jfrog.io/artifactory/busy-libs-snapshot-local&lt;/url&gt;\r\n    \t\t&lt;/snapshotRepository&gt;\r\n    \t\t&lt;repository&gt;\r\n    \t\t\t&lt;id&gt;central&lt;/id&gt;\r\n    \t\t\t&lt;name&gt;artifactory-release&lt;/name&gt;\r\n    \t\t\t&lt;url&gt;https://hidden.jfrog.io/artifactory/busy-libs-release-local&lt;/url&gt;\r\n    \t\t&lt;/repository&gt;\r\n    \t&lt;/distributionManagement&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nChild\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    \t&lt;groupId&gt;org.xyzCompany&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;test-child&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.0.0&lt;/version&gt;\r\n    \t&lt;packaging&gt;mule-application&lt;/packaging&gt;\r\n    \r\n    \t&lt;name&gt;salesforce-data-migration&lt;/name&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.xyzCompany&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;test-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;0.0.1&lt;/version&gt;\r\n    \t&lt;/parent&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t  &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\r\n    \t\t\t  &lt;configuration&gt;\r\n    \t\t\t\t\t&lt;useReleaseProfile&gt;false&lt;/useReleaseProfile&gt;\r\n    \t\t\t  &lt;/configuration&gt;\r\n    \t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \t\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;42.6.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \t\t\r\n    &lt;/project&gt;\r\n\r\nSettings\r\n\r\n[![enter image description here][2]][2]\r\n\r\nNothing much in debug logs either. Please note, busy-libs-release is a virtual repo that reflects the contents of busy-libs-release-local. I am unable to write to the virtual repo. So write to busy-libs-release-local and read from busy-libs-release. Reading directly from busy-libs-release-local also has the same issue.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4rwI9.png\r\n  [2]: https://i.stack.imgur.com/IpIZg.png","title":"Maven cannot find parent pom from artifactory even though it exists","body":"<p>I have a simple maven parent-child project. The parent pom sits on it's own project. The project has been tested with a trial artifactory which had maven repo autoconfig. Works smooth there. Unfortunately our corporate artifactory did not have the auto config and the repos were manually created.</p>\n<p>Maven deploy on parent works fine. The deploy on child fails in the corporate artifactory since it cannot find the parent. The issue exists on both release and snapshot repos. Maven does search the repo and the file location looks fine(curl to the  location returns the pom and if I put the url in browser, file gets downloaded). Why isn't maven able to download it? It is an auth issue? Any help will be much appreciated. Thanks.</p>\n<p>Error</p>\n<p><a href=\"https://i.stack.imgur.com/4rwI9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4rwI9.png\" alt=\"mvn clean deploy\" /></a></p>\n<p>I can simulate the issue with following pom</p>\n<p>Parent</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;org.xyzCompany&lt;/groupId&gt;\n    &lt;artifactId&gt;test-parent&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1&lt;/version&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;name&gt;parent-pom&lt;/name&gt;\n    &lt;description&gt;Parent POM&lt;/description&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.8.2&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n        &lt;distributionManagement&gt;\n        &lt;snapshotRepository&gt;\n            &lt;id&gt;snapshots&lt;/id&gt;\n            &lt;name&gt;artifactory-snapshots&lt;/name&gt;\n            &lt;url&gt;https://hidden.jfrog.io/artifactory/busy-libs-snapshot-local&lt;/url&gt;\n        &lt;/snapshotRepository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;central&lt;/id&gt;\n            &lt;name&gt;artifactory-release&lt;/name&gt;\n            &lt;url&gt;https://hidden.jfrog.io/artifactory/busy-libs-release-local&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/distributionManagement&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Child</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.xyzCompany&lt;/groupId&gt;\n    &lt;artifactId&gt;test-child&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0&lt;/version&gt;\n    &lt;packaging&gt;mule-application&lt;/packaging&gt;\n\n    &lt;name&gt;salesforce-data-migration&lt;/name&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.xyzCompany&lt;/groupId&gt;\n        &lt;artifactId&gt;test-parent&lt;/artifactId&gt;\n        &lt;version&gt;0.0.1&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n              &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\n              &lt;configuration&gt;\n                    &lt;useReleaseProfile&gt;false&lt;/useReleaseProfile&gt;\n              &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n    \n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;version&gt;42.6.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n        \n&lt;/project&gt;\n</code></pre>\n<p>Settings</p>\n<p><a href=\"https://i.stack.imgur.com/IpIZg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IpIZg.png\" alt=\"enter image description here\" /></a></p>\n<p>Nothing much in debug logs either. Please note, busy-libs-release is a virtual repo that reflects the contents of busy-libs-release-local. I am unable to write to the virtual repo. So write to busy-libs-release-local and read from busy-libs-release. Reading directly from busy-libs-release-local also has the same issue.</p>\n"},{"tags":["java","mysql","wamp","jakarta-mail"],"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":1,"creation_date":1685474281,"post_id":76367940,"comment_id":134664357,"body_markdown":"Your design would be better if you refactored the schema to 3rd normal form: one-to-many between receiver and score tables.    Sounds like you have PDF generation with the loop over records inside.  You need to reverse those two: loop over records and create a PDF inside that loop.  Your code is doing too much: query the database, create PDFs, send emails with attachments.  Refactor and test each method individually.","body":"Your design would be better if you refactored the schema to 3rd normal form: one-to-many between receiver and score tables.    Sounds like you have PDF generation with the loop over records inside.  You need to reverse those two: loop over records and create a PDF inside that loop.  Your code is doing too much: query the database, create PDFs, send emails with attachments.  Refactor and test each method individually."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1685474606,"post_id":76367940,"comment_id":134664428,"body_markdown":"Your email routine is sub-optimal too. You should establish the `Session` before the loop and send *in it*","body":"Your email routine is sub-optimal too. You should establish the <code>Session</code> before the loop and send <i>in it</i>"},{"owner":{"account_id":28712986,"reputation":1,"user_id":21988140,"display_name":"mpaypal100"},"score":0,"creation_date":1685476980,"post_id":76367940,"comment_id":134664882,"body_markdown":"was thinking thats what i did @duffymo . it seems am not being able to grasp it entirely. kindly give me a sample code let me follow. thanks","body":"was thinking thats what i did @duffymo . it seems am not being able to grasp it entirely. kindly give me a sample code let me follow. thanks"},{"owner":{"account_id":28712986,"reputation":1,"user_id":21988140,"display_name":"mpaypal100"},"score":0,"creation_date":1685477059,"post_id":76367940,"comment_id":134664891,"body_markdown":"i tried establishing the ```session``` before the loop but still same issue @g00se .","body":"i tried establishing the <code>session</code> before the loop but still same issue @g00se ."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1685477808,"post_id":76367940,"comment_id":134665030,"body_markdown":"You need to post the jrxml file too","body":"You need to post the jrxml file too"},{"owner":{"account_id":28712986,"reputation":1,"user_id":21988140,"display_name":"mpaypal100"},"score":0,"creation_date":1685479159,"post_id":76367940,"comment_id":134665246,"body_markdown":"still same issue @g00se. am thinking the issue has to do with ```Map&lt;String, Object&gt; parameters = new HashMap&lt;&gt;();``` . i believe its loading all records instead of a single record from the database. just trying hard to find the issue. if you have any sample code kingly let it assist me. thanks @g00se","body":"still same issue @g00se. am thinking the issue has to do with <code>Map&lt;String, Object&gt; parameters = new HashMap&lt;&gt;();</code> . i believe its loading all records instead of a single record from the database. just trying hard to find the issue. if you have any sample code kingly let it assist me. thanks @g00se"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1685485503,"post_id":76367940,"comment_id":134666200,"body_markdown":"Where is the jrxml?","body":"Where is the jrxml?"},{"owner":{"account_id":28712986,"reputation":1,"user_id":21988140,"display_name":"mpaypal100"},"score":0,"creation_date":1685487042,"post_id":76367940,"comment_id":134666364,"body_markdown":"its in my main project folder @g00se. so i refer to it in the code like this : ```jasperReport = JasperCompileManager.compileReport(&quot;studentScore.jrxml&quot;);``` i am able to send the pdf to all emails successfully. but the issue is it loads all records of the database into the jrxml file before converting to pdf. i printed out values in the ```Map&lt;String, Object&gt; parameters = new HarshMap&lt;&gt;()``` and it loaded each single record at a time. i just dont know how all records loaded into jrxml file","body":"its in my main project folder @g00se. so i refer to it in the code like this : <code>jasperReport = JasperCompileManager.compileReport(&quot;studentScore.jrxml&quot;);</code> i am able to send the pdf to all emails successfully. but the issue is it loads all records of the database into the jrxml file before converting to pdf. i printed out values in the <code>Map&lt;String, Object&gt; parameters = new HarshMap&lt;&gt;()</code> and it loaded each single record at a time. i just dont know how all records loaded into jrxml file"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1685488697,"post_id":76367940,"comment_id":134666541,"body_markdown":"I wanted you to post the jrxml. I&#39;m guessing you&#39;re doing the full query in that and that it&#39;s filling the report","body":"I wanted you to post the jrxml. I&#39;m guessing you&#39;re doing the full query in that and that it&#39;s filling the report"}],"answers":[{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685536304,"creation_date":1685494185,"answer_id":76369464,"question_id":76367940,"body_markdown":"Here&#39;s how I might refactor your code.  I end up with four interfaces and four classes.  You&#39;d need to add implementations for two of the interfaces.\r\n\r\nStart with an encapsulation for your data - `User`:\r\n\r\n    package report;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Collections;\r\n    import java.util.List;\r\n    \r\n    public class User {\r\n    \r\n        private final String name;\r\n    \r\n        private final String email;\r\n        private final List&lt;Double&gt; scores;\r\n    \r\n        public User(String name, String email, List&lt;Double&gt; scores) {\r\n            if ((name == null) || (name.trim().length() == 0)) throw new IllegalArgumentException(&quot;Name cannot be blank or null&quot;);\r\n            if ((email == null) || (email.trim().length() == 0)) throw new IllegalArgumentException(&quot;Email cannot be blank or null&quot;);\r\n            this.name = name.trim();\r\n            this.email = email.trim();\r\n            this.scores = (scores != null) ? new ArrayList&lt;&gt;(scores) : new ArrayList&lt;&gt;();\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public String getEmail() {\r\n            return email;\r\n        }\r\n    \r\n        public List&lt;Double&gt; getScores() {\r\n            return Collections.unmodifiableList(scores);\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object o) {\r\n            if (this == o) return true;\r\n            if (o == null || getClass() != o.getClass()) return false;\r\n    \r\n            User user = (User) o;\r\n    \r\n            if (!getName().equals(user.getName())) return false;\r\n            if (!getEmail().equals(user.getEmail())) return false;\r\n            return getScores().equals(user.getScores());\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode() {\r\n            int result = getName().hashCode();\r\n            result = 31 * result + getEmail().hashCode();\r\n            result = 31 * result + getScores().hashCode();\r\n            return result;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return &quot;User{&quot; +\r\n                    &quot;name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                    &quot;, email=&#39;&quot; + email + &#39;\\&#39;&#39; +\r\n                    &quot;, scores=&quot; + scores +\r\n                    &#39;}&#39;;\r\n        }\r\n    }\r\n\r\nI created the User class using IntelliJ 2023.1, running under JDK 17.  It might be a good case for using a record class.\r\n\r\nCreate an interface `UserRepository` and an implementation that does nothing but interact with your relational database:\r\n\r\n    package report;\r\n    \r\n    import java.sql.Connection;\r\n    import java.sql.ResultSet;\r\n    import java.sql.SQLException;\r\n    import java.sql.Statement;\r\n    \r\n    public interface UserRepository {\r\n    \r\n        User findByName(String name);\r\n    \r\n        default void close(ResultSet rs) {\r\n            try {\r\n                if (rs != null) {\r\n                    rs.close();\r\n                }\r\n            } catch (SQLException e) {\r\n                // log at best\r\n            }\r\n        }\r\n        default void close(Statement st) {\r\n            try {\r\n                if (st != null) {\r\n                    st.close();\r\n                }\r\n            } catch (SQLException e) {\r\n                // log at best.\r\n            }\r\n        }\r\n    \r\n        default void close(Connection connection) {\r\n            try {\r\n                if (connection != null) {\r\n                    connection.close();\r\n                }\r\n            } catch (SQLException e) {\r\n                // log at best.\r\n            }\r\n        }\r\n    }\r\n\r\nHere&#39;s an implementation: \r\n\r\n    package report;\r\n    \r\n    import java.sql.Connection;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.ResultSet;\r\n    import java.sql.SQLException;\r\n    \r\n    public class UserRepositoryImpl implements UserRepository {\r\n    \r\n        public static final String FIND_BY_NAME = &quot;SELECT NAME, EMAIL, SCORE1, SCORE2, SCORE3, SCORE4 FROM SCORE_TABLE WHERE NAME = ?&quot;;\r\n    \r\n        private final Connection connection;\r\n    \r\n        public UserRepositoryImpl(Connection connection) {\r\n            this.connection = connection;\r\n        }\r\n    \r\n        @Override\r\n        public User findByName(String name) {\r\n            User user;\r\n            ResultSet rs = null;\r\n            PreparedStatement ps = null;\r\n            try {\r\n                ps = this.connection.prepareStatement(FIND_BY_NAME);\r\n                rs = ps.executeQuery();\r\n                user = new UserMapper().mapRow(rs);\r\n            } catch (SQLException e) {\r\n                throw new RuntimeException(e);\r\n            } finally {\r\n                close(rs);\r\n                close(ps);\r\n            }\r\n            return user;\r\n        }\r\n    }\r\n\r\nThe repository implementation uses a `RowMapper` interface and a `UserMapper` implementation:\r\n\r\n    package report;\r\n    \r\n    import java.sql.ResultSet;\r\n    \r\n    public interface RowMapper&lt;T&gt; {\r\n        T mapRow(ResultSet rs);\r\n    }\r\n\r\nHere is the implementation from a `UserMapper`:\r\n\r\n    package report;\r\n    \r\n    import java.sql.ResultSet;\r\n    import java.sql.SQLException;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class UserMapper implements RowMapper&lt;User&gt; {\r\n    \r\n        @Override\r\n        public User mapRow(ResultSet rs) {\r\n            User user = null;\r\n            try {\r\n                while (rs.next()) {\r\n                    String name = rs.getString(&quot;NAME&quot;);\r\n                    String email = rs.getString(&quot;EMAIL&quot;);\r\n                    List&lt;Double&gt; scores = new ArrayList&lt;&gt;();\r\n                    scores.add(rs.getDouble(&quot;SCORE1&quot;));\r\n                    scores.add(rs.getDouble(&quot;SCORE2&quot;));\r\n                    scores.add(rs.getDouble(&quot;SCORE3&quot;));\r\n                    scores.add(rs.getDouble(&quot;SCORE4&quot;));\r\n                    user = new User(name, email, scores);\r\n                }\r\n            } catch (SQLException e) {\r\n                user = null;\r\n            }\r\n            return user;\r\n        }\r\n    }\r\n\r\nThere are interfaces for your Jasper report generator and email client:\r\n\r\n    package report;\r\n    \r\n    public interface JasperReportGenerator&lt;T&gt; {\r\n    \r\n        byte [] generate(String jrxml, T data);\r\n    }\r\n\r\n    package report;\r\n    \r\n    public interface EmailClient {\r\n    \r\n        void send(String from, String to, String subject, String body, byte [] attachment);\r\n    }\r\n\r\nThis is more classes than your single method.  This approach has a few advantages:\r\n\r\n - Each class does one thing well (single responsibility principle)\r\n - It&#39;s easy to test each class individually using Junit.\r\n\r\n\r\nSee if this approach helps you.\r\n","title":"generate pdf of each record in database table and send as attachment to email","body":"<p>Here's how I might refactor your code.  I end up with four interfaces and four classes.  You'd need to add implementations for two of the interfaces.</p>\n<p>Start with an encapsulation for your data - <code>User</code>:</p>\n<pre><code>package report;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\n\npublic class User {\n\n    private final String name;\n\n    private final String email;\n    private final List&lt;Double&gt; scores;\n\n    public User(String name, String email, List&lt;Double&gt; scores) {\n        if ((name == null) || (name.trim().length() == 0)) throw new IllegalArgumentException(&quot;Name cannot be blank or null&quot;);\n        if ((email == null) || (email.trim().length() == 0)) throw new IllegalArgumentException(&quot;Email cannot be blank or null&quot;);\n        this.name = name.trim();\n        this.email = email.trim();\n        this.scores = (scores != null) ? new ArrayList&lt;&gt;(scores) : new ArrayList&lt;&gt;();\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public List&lt;Double&gt; getScores() {\n        return Collections.unmodifiableList(scores);\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n\n        User user = (User) o;\n\n        if (!getName().equals(user.getName())) return false;\n        if (!getEmail().equals(user.getEmail())) return false;\n        return getScores().equals(user.getScores());\n    }\n\n    @Override\n    public int hashCode() {\n        int result = getName().hashCode();\n        result = 31 * result + getEmail().hashCode();\n        result = 31 * result + getScores().hashCode();\n        return result;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;User{&quot; +\n                &quot;name='&quot; + name + '\\'' +\n                &quot;, email='&quot; + email + '\\'' +\n                &quot;, scores=&quot; + scores +\n                '}';\n    }\n}\n</code></pre>\n<p>I created the User class using IntelliJ 2023.1, running under JDK 17.  It might be a good case for using a record class.</p>\n<p>Create an interface <code>UserRepository</code> and an implementation that does nothing but interact with your relational database:</p>\n<pre><code>package report;\n\nimport java.sql.Connection;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Statement;\n\npublic interface UserRepository {\n\n    User findByName(String name);\n\n    default void close(ResultSet rs) {\n        try {\n            if (rs != null) {\n                rs.close();\n            }\n        } catch (SQLException e) {\n            // log at best\n        }\n    }\n    default void close(Statement st) {\n        try {\n            if (st != null) {\n                st.close();\n            }\n        } catch (SQLException e) {\n            // log at best.\n        }\n    }\n\n    default void close(Connection connection) {\n        try {\n            if (connection != null) {\n                connection.close();\n            }\n        } catch (SQLException e) {\n            // log at best.\n        }\n    }\n}\n</code></pre>\n<p>Here's an implementation:</p>\n<pre><code>package report;\n\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\npublic class UserRepositoryImpl implements UserRepository {\n\n    public static final String FIND_BY_NAME = &quot;SELECT NAME, EMAIL, SCORE1, SCORE2, SCORE3, SCORE4 FROM SCORE_TABLE WHERE NAME = ?&quot;;\n\n    private final Connection connection;\n\n    public UserRepositoryImpl(Connection connection) {\n        this.connection = connection;\n    }\n\n    @Override\n    public User findByName(String name) {\n        User user;\n        ResultSet rs = null;\n        PreparedStatement ps = null;\n        try {\n            ps = this.connection.prepareStatement(FIND_BY_NAME);\n            rs = ps.executeQuery();\n            user = new UserMapper().mapRow(rs);\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        } finally {\n            close(rs);\n            close(ps);\n        }\n        return user;\n    }\n}\n</code></pre>\n<p>The repository implementation uses a <code>RowMapper</code> interface and a <code>UserMapper</code> implementation:</p>\n<pre><code>package report;\n\nimport java.sql.ResultSet;\n\npublic interface RowMapper&lt;T&gt; {\n    T mapRow(ResultSet rs);\n}\n</code></pre>\n<p>Here is the implementation from a <code>UserMapper</code>:</p>\n<pre><code>package report;\n\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class UserMapper implements RowMapper&lt;User&gt; {\n\n    @Override\n    public User mapRow(ResultSet rs) {\n        User user = null;\n        try {\n            while (rs.next()) {\n                String name = rs.getString(&quot;NAME&quot;);\n                String email = rs.getString(&quot;EMAIL&quot;);\n                List&lt;Double&gt; scores = new ArrayList&lt;&gt;();\n                scores.add(rs.getDouble(&quot;SCORE1&quot;));\n                scores.add(rs.getDouble(&quot;SCORE2&quot;));\n                scores.add(rs.getDouble(&quot;SCORE3&quot;));\n                scores.add(rs.getDouble(&quot;SCORE4&quot;));\n                user = new User(name, email, scores);\n            }\n        } catch (SQLException e) {\n            user = null;\n        }\n        return user;\n    }\n}\n</code></pre>\n<p>There are interfaces for your Jasper report generator and email client:</p>\n<pre><code>package report;\n\npublic interface JasperReportGenerator&lt;T&gt; {\n\n    byte [] generate(String jrxml, T data);\n}\n\npackage report;\n\npublic interface EmailClient {\n\n    void send(String from, String to, String subject, String body, byte [] attachment);\n}\n</code></pre>\n<p>This is more classes than your single method.  This approach has a few advantages:</p>\n<ul>\n<li>Each class does one thing well (single responsibility principle)</li>\n<li>It's easy to test each class individually using Junit.</li>\n</ul>\n<p>See if this approach helps you.</p>\n"}],"owner":{"account_id":28712986,"reputation":1,"user_id":21988140,"display_name":"mpaypal100"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1685536304,"creation_date":1685473986,"question_id":76367940,"body_markdown":"I have 4 records in database table. The table has columns id, name, score1, score2, score3, total, email. each record has a different email. the purpose of the code is to loop through each record, generate a pdf for each record by the records &#39;id&#39; and send pdf as email to the email value of the record. i used the while loop but hard as i try, my code rather generates pdf of all the records and sends to each recipient email. &#39;i only want it to generate pdf of only each record and send to the recipients email at a time&#39;. cant really tell where i am going wrong.\r\n\r\n```\r\ntry{\r\nString sql=&quot;select * from score_table where id=score_table.id&quot;;\r\npst=con.prepareStatement(sql);\r\nrs=pst.executeQuery();\r\n// Loop through each record\r\nwhile (rs.next()) {\r\n  // Retrieve data for current record\r\n  String name = rs.getString(&quot;name&quot;);\r\n  String score1 = rs.getString(&quot;score1&quot;);\r\n  String score2 = rs.getString(&quot;score2&quot;);\r\n  String score3 = rs.getString(&quot;score3&quot;);\r\n  String score4 = rs.getString(&quot;score4&quot;); \r\n  int total = rs.getInt(&quot;total&quot;);\r\n  String recipientEmail = rs.getString(&quot;email&quot;);\r\n\r\n  // Create parameters for the report\r\n  Map&lt;String, Object&gt; parameters = new HashMap&lt;&gt;();\r\n  parameters.put(&quot;name&quot;, name);\r\n  parameters.put(&quot;score1&quot;, score1);\r\n  parameters.put(&quot;score2&quot;, score2);\r\n  parameters.put(&quot;score3&quot;, score3);\r\n  parameters.put(&quot;score4&quot;, score4);\r\n  parameters.put(&quot;total&quot;, total);\r\n\r\n  // Load report template\r\n  JasperReport jasperReport = JasperCompileManager.compileReport(&quot;studentSco.jrxml&quot;);\r\n\r\n  // Populate report with data\r\n  JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, parameters, con);\r\n\r\n  // Export report to PDF file\r\n  byte[] pdfBytes = JasperExportManager.exportReportToPdf(jasperPrint);\r\n\r\n  // Create new email message\r\n  Properties props = new Properties();\r\n  props.put(&quot;mail.smtp.host&quot;, &quot;smtp.gmail.com&quot;);\r\n  props.put(&quot;mail.smtp.port&quot;, &quot;587&quot;);\r\n  props.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\r\n  props.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\r\n  props.setProperty(&quot;mail.smtp.ssl.protocols&quot;, &quot;TLSv1.2&quot;);\r\n\r\n  Session session = Session.getInstance(props, new javax.mail.Authenticator() {\r\n    @Override\r\n    protected PasswordAuthentication getPasswordAuthentication() {\r\n        return new PasswordAuthentication(&quot;rodysoftonline@gmail.com&quot;, &quot;wdmssbarmwfgxxxw&quot;);\r\n    }\r\n});\r\n\r\n  Message message = new MimeMessage(session);\r\n  message.setFrom(new InternetAddress(&quot;rodysoftonline@gmail.com&quot;));\r\n  message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipientEmail));\r\n  message.setSubject(&quot;Report for &quot; + name);\r\n\r\nMimeBodyPart attachment = new MimeBodyPart();\r\nByteArrayDataSource source = new ByteArrayDataSource(pdfBytes, &quot;application/pdf&quot;);\r\nattachment.setDataHandler(new DataHandler(source));\r\nattachment.setFileName(&quot;report_&quot; + name + &quot;.pdf&quot;);\r\n\r\n  Multipart multipart = new MimeMultipart();\r\n  multipart.addBodyPart(attachment);\r\n\r\n  message.setContent(multipart);\r\n\r\n  // Send email\r\n  Transport.send(message);\r\n  System.out.println(&quot;email sent successfully&quot;);\r\n}\r\n    }catch(SQLException | MessagingException | JRException e){\r\nJOptionPane.showMessageDialog(null,e);\r\n}\r\n// Close database connection and resources\r\nfinally{\r\ntry{\r\nrs.close();\r\npst.close();\r\n  }\r\ncatch(SQLException e){\r\n      }\r\n        }\r\n```\r\n\r\nThis is what i have so far. though its in a while loop, it only generates pdf for all records once and sends to each email in record. i want it to generate pdf for only each record and send to record&#39;s email, generate pdf of next record, send to email and so on... till its done with all records in the table","title":"generate pdf of each record in database table and send as attachment to email","body":"<p>I have 4 records in database table. The table has columns id, name, score1, score2, score3, total, email. each record has a different email. the purpose of the code is to loop through each record, generate a pdf for each record by the records 'id' and send pdf as email to the email value of the record. i used the while loop but hard as i try, my code rather generates pdf of all the records and sends to each recipient email. 'i only want it to generate pdf of only each record and send to the recipients email at a time'. cant really tell where i am going wrong.</p>\n<pre><code>try{\nString sql=&quot;select * from score_table where id=score_table.id&quot;;\npst=con.prepareStatement(sql);\nrs=pst.executeQuery();\n// Loop through each record\nwhile (rs.next()) {\n  // Retrieve data for current record\n  String name = rs.getString(&quot;name&quot;);\n  String score1 = rs.getString(&quot;score1&quot;);\n  String score2 = rs.getString(&quot;score2&quot;);\n  String score3 = rs.getString(&quot;score3&quot;);\n  String score4 = rs.getString(&quot;score4&quot;); \n  int total = rs.getInt(&quot;total&quot;);\n  String recipientEmail = rs.getString(&quot;email&quot;);\n\n  // Create parameters for the report\n  Map&lt;String, Object&gt; parameters = new HashMap&lt;&gt;();\n  parameters.put(&quot;name&quot;, name);\n  parameters.put(&quot;score1&quot;, score1);\n  parameters.put(&quot;score2&quot;, score2);\n  parameters.put(&quot;score3&quot;, score3);\n  parameters.put(&quot;score4&quot;, score4);\n  parameters.put(&quot;total&quot;, total);\n\n  // Load report template\n  JasperReport jasperReport = JasperCompileManager.compileReport(&quot;studentSco.jrxml&quot;);\n\n  // Populate report with data\n  JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, parameters, con);\n\n  // Export report to PDF file\n  byte[] pdfBytes = JasperExportManager.exportReportToPdf(jasperPrint);\n\n  // Create new email message\n  Properties props = new Properties();\n  props.put(&quot;mail.smtp.host&quot;, &quot;smtp.gmail.com&quot;);\n  props.put(&quot;mail.smtp.port&quot;, &quot;587&quot;);\n  props.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\n  props.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\n  props.setProperty(&quot;mail.smtp.ssl.protocols&quot;, &quot;TLSv1.2&quot;);\n\n  Session session = Session.getInstance(props, new javax.mail.Authenticator() {\n    @Override\n    protected PasswordAuthentication getPasswordAuthentication() {\n        return new PasswordAuthentication(&quot;rodysoftonline@gmail.com&quot;, &quot;wdmssbarmwfgxxxw&quot;);\n    }\n});\n\n  Message message = new MimeMessage(session);\n  message.setFrom(new InternetAddress(&quot;rodysoftonline@gmail.com&quot;));\n  message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipientEmail));\n  message.setSubject(&quot;Report for &quot; + name);\n\nMimeBodyPart attachment = new MimeBodyPart();\nByteArrayDataSource source = new ByteArrayDataSource(pdfBytes, &quot;application/pdf&quot;);\nattachment.setDataHandler(new DataHandler(source));\nattachment.setFileName(&quot;report_&quot; + name + &quot;.pdf&quot;);\n\n  Multipart multipart = new MimeMultipart();\n  multipart.addBodyPart(attachment);\n\n  message.setContent(multipart);\n\n  // Send email\n  Transport.send(message);\n  System.out.println(&quot;email sent successfully&quot;);\n}\n    }catch(SQLException | MessagingException | JRException e){\nJOptionPane.showMessageDialog(null,e);\n}\n// Close database connection and resources\nfinally{\ntry{\nrs.close();\npst.close();\n  }\ncatch(SQLException e){\n      }\n        }\n</code></pre>\n<p>This is what i have so far. though its in a while loop, it only generates pdf for all records once and sends to each email in record. i want it to generate pdf for only each record and send to record's email, generate pdf of next record, send to email and so on... till its done with all records in the table</p>\n"},{"tags":["java","android","android-canvas"],"comments":[{"owner":{"account_id":3734008,"reputation":1887,"user_id":3105452,"display_name":"GareginSargsyan"},"score":1,"creation_date":1388302331,"post_id":20822977,"comment_id":31225696,"body_markdown":"Paint.setStrokeCap(Paint.Cap.ROUND)","body":"Paint.setStrokeCap(Paint.Cap.ROUND)"},{"owner":{"display_name":"user2726456"},"score":0,"creation_date":1388302840,"post_id":20822977,"comment_id":31225771,"body_markdown":"@GareginSargsyan : Can you post it as answer so that i can accept it","body":"@GareginSargsyan : Can you post it as answer so that i can accept it"},{"owner":{"account_id":3734008,"reputation":1887,"user_id":3105452,"display_name":"GareginSargsyan"},"score":0,"creation_date":1388303061,"post_id":20822977,"comment_id":31225804,"body_markdown":"Your question is put on hold. I cannot post an answer. You should improve it, or remove it. You should read this: http://meta.stackexchange.com/questions/156810/stack-overflow-question-checklist","body":"Your question is put on hold. I cannot post an answer. You should improve it, or remove it. You should read this: <a href=\"http://meta.stackexchange.com/questions/156810/stack-overflow-question-checklist\" title=\"stack overflow question checklist\">meta.stackexchange.com/questions/156810/&hellip;</a>"},{"owner":{"account_id":2866317,"reputation":6243,"user_id":3136246,"display_name":"Avinash Babu"},"score":0,"creation_date":1388308457,"post_id":20822977,"comment_id":31226848,"body_markdown":"http://stackoverflow.com/questions/8287949/android-how-to-draw-a-smooth-line-following-your-finger","body":"<a href=\"http://stackoverflow.com/questions/8287949/android-how-to-draw-a-smooth-line-following-your-finger\" title=\"android how to draw a smooth line following your finger\">stackoverflow.com/questions/8287949/&hellip;</a>"},{"owner":{"display_name":"user2726456"},"score":0,"creation_date":1388308857,"post_id":20822977,"comment_id":31226949,"body_markdown":"@GareginSargsyan : Now you can post your answer. It seems flagging the moderators hold and comment has removed  (also my comments too), they felt touchy perhaps ;)","body":"@GareginSargsyan : Now you can post your answer. It seems flagging the moderators hold and comment has removed  (also my comments too), they felt touchy perhaps ;)"},{"owner":{"account_id":3734008,"reputation":1887,"user_id":3105452,"display_name":"GareginSargsyan"},"score":1,"creation_date":1388309123,"post_id":20822977,"comment_id":31227004,"body_markdown":"Finally the justice has been served :)","body":"Finally the justice has been served :)"}],"answers":[{"tags":[],"owner":{"account_id":3734008,"reputation":1887,"user_id":3105452,"display_name":"GareginSargsyan"},"comment_count":0,"down_vote_count":0,"up_vote_count":45,"is_accepted":true,"score":45,"last_activity_date":1388309562,"creation_date":1388309562,"answer_id":20823792,"question_id":20822977,"body_markdown":"Use the `Paint.setStrokeCap()` method. You need `Paint.Cap.ROUND`. The default one is `Paint.Cap.BUTT`. There is a similar `Path` property that is called path join. It determines how to draw the parts of the path where it&#39;s constituent segments join. To set it use `Path.setPathJoin()`. You might need it in the future.\r\nGood luck.","title":"Draw a line with curved edges in Android","body":"<p>Use the <code>Paint.setStrokeCap()</code> method. You need <code>Paint.Cap.ROUND</code>. The default one is <code>Paint.Cap.BUTT</code>. There is a similar <code>Path</code> property that is called path join. It determines how to draw the parts of the path where it's constituent segments join. To set it use <code>Path.setPathJoin()</code>. You might need it in the future.\nGood luck.</p>\n"},{"comments":[{"owner":{"account_id":4947846,"reputation":9433,"user_id":3982755,"accept_rate":79,"display_name":"Bentaye"},"score":1,"creation_date":1654073549,"post_id":72457752,"comment_id":128002755,"body_markdown":"How is that different from the accepted answer?","body":"How is that different from the accepted answer?"}],"tags":[],"owner":{"account_id":9313381,"reputation":860,"user_id":6914403,"display_name":"Jithin Jude"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654073520,"creation_date":1654067819,"answer_id":72457752,"question_id":20822977,"body_markdown":"**You can use below**\r\n\r\n    pitchPaint.setStrokeCap(Paint.Cap.ROUND)","title":"Draw a line with curved edges in Android","body":"<p><strong>You can use below</strong></p>\n<pre><code>pitchPaint.setStrokeCap(Paint.Cap.ROUND)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18845028,"reputation":135,"user_id":13745548,"display_name":"El farouk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678526880,"creation_date":1678526880,"answer_id":75703964,"question_id":20822977,"body_markdown":"this is for **kotlin Jetpack Compose** users :\r\nuse the **cap** attribute \r\n\r\n    Canvas(modifier = Modifier.fillMaxSize()) {\r\n    \r\n                // Fetching width and height for\r\n                // setting start x and end y\r\n    \r\n                val canvasHeight = size.height\r\n                \r\n                // drawing a line between start(x,y) and end(x,y)\r\n                drawLine(\r\n                    start = Offset(x = 0f, y = 0.12f * canvasHeight),\r\n                    end = Offset(x = 0f, y =0.5f *canvasHeight),\r\n                    color = Color.Red,\r\n                    strokeWidth = 10F,\r\n                    cap = StrokeCap.Round\r\n                )\r\n            }\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tfzko.png","title":"Draw a line with curved edges in Android","body":"<p>this is for <strong>kotlin Jetpack Compose</strong> users :\nuse the <strong>cap</strong> attribute</p>\n<pre><code>Canvas(modifier = Modifier.fillMaxSize()) {\n\n            // Fetching width and height for\n            // setting start x and end y\n\n            val canvasHeight = size.height\n            \n            // drawing a line between start(x,y) and end(x,y)\n            drawLine(\n                start = Offset(x = 0f, y = 0.12f * canvasHeight),\n                end = Offset(x = 0f, y =0.5f *canvasHeight),\n                color = Color.Red,\n                strokeWidth = 10F,\n                cap = StrokeCap.Round\n            )\n        }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/tfzko.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tfzko.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":22038257,"reputation":1,"user_id":16304396,"display_name":"Aditya Gaurav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685536261,"creation_date":1685536261,"answer_id":76373515,"question_id":20822977,"body_markdown":"    path = new Path();\r\n    path.moveTo(50, 50);\r\n    path.lineTo(50, 500);\r\n    path.lineTo(200, 500);\r\n    path.lineTo(200, 300);\r\n    path.lineTo(350, 300);\r\n\r\n    float radius = 50.0f;\r\n    CornerPathEffect cornerPathEffect = new CornerPathEffect(radius);\r\n    paint.setPathEffect(cornerPathEffect);\r\n    // this setPathEffect will set the curve edges for every new joining\r\n\r\n    canvas.drawPath(path, paint);\r\n\r\n&gt; Go through this link , [This Link will teach you proper usages][1]\r\n\r\n\r\n  [1]: http://learing-android.blogspot.com/2014/05/draw-rounded-corner-line-along-path.html","title":"Draw a line with curved edges in Android","body":"<pre><code>path = new Path();\npath.moveTo(50, 50);\npath.lineTo(50, 500);\npath.lineTo(200, 500);\npath.lineTo(200, 300);\npath.lineTo(350, 300);\n\nfloat radius = 50.0f;\nCornerPathEffect cornerPathEffect = new CornerPathEffect(radius);\npaint.setPathEffect(cornerPathEffect);\n// this setPathEffect will set the curve edges for every new joining\n\ncanvas.drawPath(path, paint);\n</code></pre>\n<blockquote>\n<p>Go through this link , <a href=\"http://learing-android.blogspot.com/2014/05/draw-rounded-corner-line-along-path.html\" rel=\"nofollow noreferrer\">This Link will teach you proper usages</a></p>\n</blockquote>\n"}],"owner":{"display_name":"user2726456"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12820,"favorite_count":0,"down_vote_count":2,"up_vote_count":20,"accepted_answer_id":20823792,"answer_count":4,"score":18,"last_activity_date":1685536261,"creation_date":1388301266,"question_id":20822977,"body_markdown":"I am using `canvas.drawLine`  to draw some line in android but the lines are too sharp but i need a curved edges\r\n![enter image description here][1]\r\n\r\nHere the 1 is what i have and 2  is what i want to achieve, means a line with curved edges rather than straight edges\r\n\r\nHow can I achieve that ??\r\n\r\n\r\n**EDIT 2:**\r\n\r\nI am trying to use the Canvas object to to draw a line. but the lines have a sharp edge, I need a rounded off edge\r\nI am using the Paint object\r\n\r\n    mPaint = new Paint();\r\n    mPaint.setColor(Color.BLACK)\r\n\r\nAny help would be appreciated great.\r\n\r\n  [1]: http://i.stack.imgur.com/OgrmB.png","title":"Draw a line with curved edges in Android","body":"<p>I am using <code>canvas.drawLine</code>  to draw some line in android but the lines are too sharp but i need a curved edges\n<img src=\"https://i.stack.imgur.com/OgrmB.png\" alt=\"enter image description here\" /></p>\n<p>Here the 1 is what i have and 2  is what i want to achieve, means a line with curved edges rather than straight edges</p>\n<p>How can I achieve that ??</p>\n<p><strong>EDIT 2:</strong></p>\n<p>I am trying to use the Canvas object to to draw a line. but the lines have a sharp edge, I need a rounded off edge\nI am using the Paint object</p>\n<pre><code>mPaint = new Paint();\nmPaint.setColor(Color.BLACK)\n</code></pre>\n<p>Any help would be appreciated great.</p>\n"},{"tags":["java","generics","wildcard"],"comments":[{"owner":{"account_id":16657879,"reputation":2625,"user_id":12038714,"display_name":"J Asgarov"},"score":0,"creation_date":1685523643,"post_id":76371757,"comment_id":134670744,"body_markdown":"`A&lt;? super Animal&gt;` only accepts classes that are SUPER of Animal. `Dog` is a child of `Animal`","body":"<code>A&lt;? super Animal&gt;</code> only accepts classes that are SUPER of Animal. <code>Dog</code> is a child of <code>Animal</code>"},{"owner":{"account_id":12786269,"reputation":21,"user_id":9252433,"display_name":"DAN"},"score":0,"creation_date":1685523727,"post_id":76371757,"comment_id":134670759,"body_markdown":"So Dog should not be accepted in Line 2, right?","body":"So Dog should not be accepted in Line 2, right?"},{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":0,"creation_date":1685524233,"post_id":76371757,"comment_id":134670854,"body_markdown":"Is this your actual code or just a summary? `print1` and `print2` are outside of the class body and that&#39;s not allowed.","body":"Is this your actual code or just a summary? <code>print1</code> and <code>print2</code> are outside of the class body and that&#39;s not allowed."},{"owner":{"account_id":12786269,"reputation":21,"user_id":9252433,"display_name":"DAN"},"score":0,"creation_date":1685524307,"post_id":76371757,"comment_id":134670867,"body_markdown":"It is a summary but yes, normaly print1 &amp; print2 are inside a main function.","body":"It is a summary but yes, normaly print1 &amp; print2 are inside a main function."},{"owner":{"account_id":12786269,"reputation":21,"user_id":9252433,"display_name":"DAN"},"score":0,"creation_date":1685526291,"post_id":76371757,"comment_id":134671275,"body_markdown":"So inside ``print1()`` method, I cannot call the ``setter()`` on ``obj`` ?","body":"So inside <code>print1()</code> method, I cannot call the <code>setter()</code> on <code>obj</code> ?"}],"answers":[{"tags":[],"owner":{"account_id":20104740,"reputation":11,"user_id":14742525,"display_name":"Adam Pawelczyk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685535622,"creation_date":1685535622,"answer_id":76373436,"question_id":76371757,"body_markdown":"In Java generics, A&lt;? extends Animal&gt; is a declaration of a wildcard type with an upper bound. It means that the type parameter T can be any type that is a subtype of Animal (including Animal itself). When you have a wildcard with an upper bound, it ensures that the type is &quot;read-only&quot; in the sense that you can only retrieve values of type T but you cannot modify the contents.\r\n\r\nIn the print1 method, obj is declared with an upper bound wildcard A&lt;? extends Animal&gt;. This means that you can call the getT() method, which returns a value of type T (which is some subtype of Animal), but you cannot call the setT() method because the exact type of T is not known. The compiler cannot guarantee the safety of assigning a Cat to T because T could be a more specific subtype of Animal, such as Dog.\r\n\r\nOn the other hand, A&lt;? super Animal&gt; is a declaration of a wildcard type with a lower bound. It means that the type parameter T can be any supertype of Animal (including Animal itself). When you have a wildcard with a lower bound, it allows you to both retrieve and modify the contents of the object.\r\n\r\nIn the print2 method, obj is declared with a lower bound wildcard A&lt;? super Animal&gt;. This means that you can call both the getT() and setT() methods. The setT() method accepts any subtype of Animal (including Animal itself) because any such subtype is a valid assignment to T (which could be a supertype of Animal). In this case, you can assign a Dog to T because T can be a supertype of Dog (e.g., Animal).","title":"Why upper bound wildcard works in the following example","body":"<p>In Java generics, A&lt;? extends Animal&gt; is a declaration of a wildcard type with an upper bound. It means that the type parameter T can be any type that is a subtype of Animal (including Animal itself). When you have a wildcard with an upper bound, it ensures that the type is &quot;read-only&quot; in the sense that you can only retrieve values of type T but you cannot modify the contents.</p>\n<p>In the print1 method, obj is declared with an upper bound wildcard A&lt;? extends Animal&gt;. This means that you can call the getT() method, which returns a value of type T (which is some subtype of Animal), but you cannot call the setT() method because the exact type of T is not known. The compiler cannot guarantee the safety of assigning a Cat to T because T could be a more specific subtype of Animal, such as Dog.</p>\n<p>On the other hand, A&lt;? super Animal&gt; is a declaration of a wildcard type with a lower bound. It means that the type parameter T can be any supertype of Animal (including Animal itself). When you have a wildcard with a lower bound, it allows you to both retrieve and modify the contents of the object.</p>\n<p>In the print2 method, obj is declared with a lower bound wildcard A&lt;? super Animal&gt;. This means that you can call both the getT() and setT() methods. The setT() method accepts any subtype of Animal (including Animal itself) because any such subtype is a valid assignment to T (which could be a supertype of Animal). In this case, you can assign a Dog to T because T can be a supertype of Dog (e.g., Animal).</p>\n"}],"owner":{"account_id":12786269,"reputation":21,"user_id":9252433,"display_name":"DAN"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1685535622,"creation_date":1685523313,"question_id":76371757,"body_markdown":"````\r\nclass Animal {}\r\nclass Dog extends Animal {}\r\nclass Cat extends Animal {}\r\n\r\nclass A&lt;T&gt; {\r\n    T t;\r\n\r\n    public void setT(T t) {\r\n        this.t = t;\r\n    }\r\n\r\n    T getT() {\r\n        return t;\r\n    }\r\n}\r\n\r\n    public static void print1(A&lt;? extends Animal&gt; obj){\r\n        //obj.setT(new Cat()); //Line 1\r\n        System.out.println(obj.getT().getClass());\r\n\r\n    }\r\n\r\n\r\n    public static void print2(A&lt;? super Animal&gt; obj){\r\n        obj.setT(new Dog()); //Line 2\r\n        System.out.println(obj.getT().getClass());\r\n\r\n    }\r\n````\r\n\r\n\r\nI understand why line 1 does not compile, but do not understand at all why Line 2 compiles.\r\n\r\nI&#39;m trying to understand lower and upper bound wildcard in Java","title":"Why upper bound wildcard works in the following example","body":"<pre><code>class Animal {}\nclass Dog extends Animal {}\nclass Cat extends Animal {}\n\nclass A&lt;T&gt; {\n    T t;\n\n    public void setT(T t) {\n        this.t = t;\n    }\n\n    T getT() {\n        return t;\n    }\n}\n\n    public static void print1(A&lt;? extends Animal&gt; obj){\n        //obj.setT(new Cat()); //Line 1\n        System.out.println(obj.getT().getClass());\n\n    }\n\n\n    public static void print2(A&lt;? super Animal&gt; obj){\n        obj.setT(new Dog()); //Line 2\n        System.out.println(obj.getT().getClass());\n\n    }\n</code></pre>\n<p>I understand why line 1 does not compile, but do not understand at all why Line 2 compiles.</p>\n<p>I'm trying to understand lower and upper bound wildcard in Java</p>\n"},{"tags":["java","spring","oauth","jwt","boot"],"comments":[{"owner":{"account_id":3585451,"reputation":6335,"user_id":2992754,"display_name":"juanlumn"},"score":0,"creation_date":1685454226,"post_id":76365380,"comment_id":134659910,"body_markdown":"Does this answer your question? [Resolving javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed Error?](https://stackoverflow.com/questions/9619030/resolving-javax-net-ssl-sslhandshakeexception-sun-security-validator-validatore)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/9619030/resolving-javax-net-ssl-sslhandshakeexception-sun-security-validator-validatore\">Resolving javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed Error?</a>"}],"answers":[{"tags":[],"owner":{"account_id":1465269,"reputation":10929,"user_id":1712294,"display_name":"Michal Trojanowski"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1685535302,"creation_date":1685535302,"answer_id":76373411,"question_id":76365380,"body_markdown":"When your Java code tries to get the contents from that URL (the public key you need to verify JWTs) it can&#39;t establish a proper connection because it doesn&#39;t trust the certificate used by that page. It&#39;s the SSL certificate used by the page itself, not the public key that is returned at that endpoint. What you should do, is to obtain that certificate (you can open the `https://XXXXXXXX/oauth/nam/keys` page in a browser and download the certificate), then add it to your Java truststore. You will find detailed instructions on how to do it under this link posted by juanlumn: https://stackoverflow.com/questions/9619030/resolving-javax-net-ssl-sslhandshakeexception-sun-security-validator-validatore ","title":"Spring boot Jwt signed with RS256","body":"<p>When your Java code tries to get the contents from that URL (the public key you need to verify JWTs) it can't establish a proper connection because it doesn't trust the certificate used by that page. It's the SSL certificate used by the page itself, not the public key that is returned at that endpoint. What you should do, is to obtain that certificate (you can open the <code>https://XXXXXXXX/oauth/nam/keys</code> page in a browser and download the certificate), then add it to your Java truststore. You will find detailed instructions on how to do it under this link posted by juanlumn: <a href=\"https://stackoverflow.com/questions/9619030/resolving-javax-net-ssl-sslhandshakeexception-sun-security-validator-validatore\">Resolving javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed Error?</a></p>\n"}],"owner":{"account_id":15380310,"reputation":138,"user_id":11095907,"display_name":"Sergio"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":299,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76373411,"answer_count":1,"score":1,"last_activity_date":1685535302,"creation_date":1685453491,"question_id":76365380,"body_markdown":"I&#39;m given a url - jwks_uri= https://xxxxx/oauth/nam/keys &lt;br/&gt;\r\n... which produces this json:\r\n```    \r\n{\r\n     &quot;keys&quot;: [{\r\n             &quot;kty&quot;: &quot;RSA&quot;,\r\n             &quot;use&quot;: &quot;sig&quot;,\r\n             &quot;alg&quot;: &quot;RS256&quot;,\r\n             &quot;kid&quot;: &quot;233921010515334582428573459295448396160651486998&quot;,\r\n             &quot;x5c&quot;: [&quot;MIIFQjCCBCqgAwIBAgIUKPlhgf+gbz7h0arpJdYiOXxj5xYwDQYJKoZIhvcNAQELBQAwNTEaMBgGA1UECxMRT3JnYW5pemF0aW9uYWwgQ0ExFzAVBg..........wTBo45axM=&quot;],\r\n             &quot;x5t&quot;: &quot;BBSLHq3rpiVLP2rota71boxAdqE&quot;,\r\n             &quot;x5tS256&quot;: &quot;VAvMs-i58nz5UjOzyOEPpDubjgsNDK_m5z7w8dudPaw&quot;,\r\n             &quot;n&quot;: &quot;okBvqleqjWLqLQ20cd9oajuOFZgOdPgD0rz6PddT1uW0iPkZ53Az68D_9s0fSMh996iGxN8sZFcCO-v0DXFBmUZb8D1VuBbx4v8Q_OUWhUk6V0QgUnzsdEYP39tZqU4gq KMuwzCbqqD1tj1C510tT8LK8lJjYuIjP-eNHv_WaL9QAH0iRwOWXA_a9ZwEoOhI0R-HqnvvJNyuUnh0umHDow3Uu7uuTKMFmziNzcB4ANBrKytVsfqBz2M9qNi6YqpT1ysGyX_M_PCja 2q8CDQxpcUm7XikFNdjutTR_B1gXDEk0Y8O7MgeKQcbYq1jMGEzIUabeka6jbBE2RR-mzV1YQ&quot;,\r\n             &quot;e&quot;: &quot;AQAB&quot;\r\n         }\r\n     ]\r\n}\r\n```\r\nthe company claims that I have everything needed to verify the public key of the jwt but in my code I keep getting the error \r\n\r\n&gt; caused by: javax.net.ssl.SSLHandshakeException: PKIX path building\r\n&gt; failed: sun.security.provider.certpath. SunCertPathBuilderException:\r\n&gt; unable to find valid certification path to requested target.&lt;br/&gt;\r\n\r\nThis is my method:\r\n\r\n\r\n    private RSAPublicKey loadPublicKey(DecodedJWT token) throws JwkException, MalformedURLException {\r\n        \r\n        final String url = &quot;https://XXXXXXXX/oauth/nam/keys&quot;; //getKeycloakCertificateUrl(token);\r\n     //   final String url = &quot;https://XXXXXXXXX/api/GetCA&quot;;\r\n\r\n\r\n\r\n        JwkProvider provider = new UrlJwkProvider(new URL(url));\r\n\r\n        return (RSAPublicKey) provider.get(token.getKeyId()).getPublicKey();\r\n    }\r\n","title":"Spring boot Jwt signed with RS256","body":"<p>I'm given a url - jwks_uri= https://xxxxx/oauth/nam/keys <br/>\n... which produces this json:</p>\n<pre><code>{\n     &quot;keys&quot;: [{\n             &quot;kty&quot;: &quot;RSA&quot;,\n             &quot;use&quot;: &quot;sig&quot;,\n             &quot;alg&quot;: &quot;RS256&quot;,\n             &quot;kid&quot;: &quot;233921010515334582428573459295448396160651486998&quot;,\n             &quot;x5c&quot;: [&quot;MIIFQjCCBCqgAwIBAgIUKPlhgf+gbz7h0arpJdYiOXxj5xYwDQYJKoZIhvcNAQELBQAwNTEaMBgGA1UECxMRT3JnYW5pemF0aW9uYWwgQ0ExFzAVBg..........wTBo45axM=&quot;],\n             &quot;x5t&quot;: &quot;BBSLHq3rpiVLP2rota71boxAdqE&quot;,\n             &quot;x5tS256&quot;: &quot;VAvMs-i58nz5UjOzyOEPpDubjgsNDK_m5z7w8dudPaw&quot;,\n             &quot;n&quot;: &quot;okBvqleqjWLqLQ20cd9oajuOFZgOdPgD0rz6PddT1uW0iPkZ53Az68D_9s0fSMh996iGxN8sZFcCO-v0DXFBmUZb8D1VuBbx4v8Q_OUWhUk6V0QgUnzsdEYP39tZqU4gq KMuwzCbqqD1tj1C510tT8LK8lJjYuIjP-eNHv_WaL9QAH0iRwOWXA_a9ZwEoOhI0R-HqnvvJNyuUnh0umHDow3Uu7uuTKMFmziNzcB4ANBrKytVsfqBz2M9qNi6YqpT1ysGyX_M_PCja 2q8CDQxpcUm7XikFNdjutTR_B1gXDEk0Y8O7MgeKQcbYq1jMGEzIUabeka6jbBE2RR-mzV1YQ&quot;,\n             &quot;e&quot;: &quot;AQAB&quot;\n         }\n     ]\n}\n</code></pre>\n<p>the company claims that I have everything needed to verify the public key of the jwt but in my code I keep getting the error</p>\n<blockquote>\n<p>caused by: javax.net.ssl.SSLHandshakeException: PKIX path building\nfailed: sun.security.provider.certpath. SunCertPathBuilderException:\nunable to find valid certification path to requested target.<br/></p>\n</blockquote>\n<p>This is my method:</p>\n<pre><code>private RSAPublicKey loadPublicKey(DecodedJWT token) throws JwkException, MalformedURLException {\n    \n    final String url = &quot;https://XXXXXXXX/oauth/nam/keys&quot;; //getKeycloakCertificateUrl(token);\n //   final String url = &quot;https://XXXXXXXXX/api/GetCA&quot;;\n\n\n\n    JwkProvider provider = new UrlJwkProvider(new URL(url));\n\n    return (RSAPublicKey) provider.get(token.getKeyId()).getPublicKey();\n}\n</code></pre>\n"},{"tags":["java","spring-boot","filter"],"answers":[{"tags":[],"owner":{"account_id":26712307,"reputation":91,"user_id":20317450,"display_name":"Bastian Hologne"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1685535216,"creation_date":1685535216,"answer_id":76373398,"question_id":76373192,"body_markdown":"As you inherited OncePerRequestFilter, you can override the shouldNotFilterMethod. Here is an example :\r\n\r\n       @Override\r\n        protected boolean shouldNotFilter(HttpServletRequest request) {\r\n            return !request.getServletPath().startsWith(&quot;/search/&quot;);\r\n        }","title":"Why is ContentCachingFilter being applied to all URLs instead of just /search even after specifying the same in urlPatterns?","body":"<p>As you inherited OncePerRequestFilter, you can override the shouldNotFilterMethod. Here is an example :</p>\n<pre><code>   @Override\n    protected boolean shouldNotFilter(HttpServletRequest request) {\n        return !request.getServletPath().startsWith(&quot;/search/&quot;);\n    }\n</code></pre>\n"}],"owner":{"account_id":23584006,"reputation":3,"user_id":17622679,"display_name":"meg1311"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76373398,"answer_count":1,"score":0,"last_activity_date":1685535243,"creation_date":1685533932,"question_id":76373192,"body_markdown":"I have an application with multiple filters. I want ContentCachingFilter to be applied to all URLs having `/search`. Since there are other filters too so in the case of `/search` the `ContentCachingFilter` should be the first one to be applied. I tried providing the full URL as well in urlPatterns but still `doFilterInternal` from `ContentCachingFilter` is getting executed for all the URLS. Please find below the code\r\n\r\n```\r\n@Component     \r\n@Order(Ordered.HIGHEST_PRECEDENCE)\r\n@WebFilter(filterName = &quot;ContentCachingFilter&quot;, urlPatterns = &quot;/search/*&quot;)\r\npublic class ContentCachingFilter extends OncePerRequestFilter {\r\n\r\n    @Override \r\n    protected void doFilterInternal(HttpServletRequest httpServletRequest,\r\n                                    HttpServletResponse httpServletResponse,\r\n                                    FilterChain filterChain) throws ServletException, IOException {\r\n        CachedBodyHttpServletRequest cachedBodyHttpServletRequest = \r\n                new CachedBodyHttpServletRequest(httpServletRequest);\r\n\r\n        filterChain.doFilter(cachedBodyHttpServletRequest, httpServletResponse);\r\n    }\r\n}\r\n\r\n```\r\n","title":"Why is ContentCachingFilter being applied to all URLs instead of just /search even after specifying the same in urlPatterns?","body":"<p>I have an application with multiple filters. I want ContentCachingFilter to be applied to all URLs having <code>/search</code>. Since there are other filters too so in the case of <code>/search</code> the <code>ContentCachingFilter</code> should be the first one to be applied. I tried providing the full URL as well in urlPatterns but still <code>doFilterInternal</code> from <code>ContentCachingFilter</code> is getting executed for all the URLS. Please find below the code</p>\n<pre><code>@Component     \n@Order(Ordered.HIGHEST_PRECEDENCE)\n@WebFilter(filterName = &quot;ContentCachingFilter&quot;, urlPatterns = &quot;/search/*&quot;)\npublic class ContentCachingFilter extends OncePerRequestFilter {\n\n    @Override \n    protected void doFilterInternal(HttpServletRequest httpServletRequest,\n                                    HttpServletResponse httpServletResponse,\n                                    FilterChain filterChain) throws ServletException, IOException {\n        CachedBodyHttpServletRequest cachedBodyHttpServletRequest = \n                new CachedBodyHttpServletRequest(httpServletRequest);\n\n        filterChain.doFilter(cachedBodyHttpServletRequest, httpServletResponse);\n    }\n}\n\n</code></pre>\n"},{"tags":["java","yaml","snakeyaml"],"comments":[{"owner":{"account_id":10838690,"reputation":3209,"user_id":7970787,"display_name":"Alex R"},"score":0,"creation_date":1685529794,"post_id":76372591,"comment_id":134671989,"body_markdown":"Perhaps if you try `DumperOptions.FlowStyle.FLOW`, is that what you mean?","body":"Perhaps if you try <code>DumperOptions.FlowStyle.FLOW</code>, is that what you mean?"},{"owner":{"account_id":2679463,"reputation":2502,"user_id":2315104,"accept_rate":42,"display_name":"user2315104"},"score":0,"creation_date":1685532742,"post_id":76372591,"comment_id":134672570,"body_markdown":"No, still not . it is not working","body":"No, still not . it is not working"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1685533180,"post_id":76372591,"comment_id":134672679,"body_markdown":"What is Values?","body":"What is Values?"},{"owner":{"account_id":2679463,"reputation":2502,"user_id":2315104,"accept_rate":42,"display_name":"user2315104"},"score":0,"creation_date":1685533314,"post_id":76372591,"comment_id":134672716,"body_markdown":"Please see the UPDATE 1 for values","body":"Please see the UPDATE 1 for values"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1685533656,"post_id":76372591,"comment_id":134672801,"body_markdown":"There are other classes missing. Please provide a [minimal reproducible example](http://stackoverflow.com/help/minimal-reproducible-example).","body":"There are other classes missing. Please provide a <a href=\"http://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":2679463,"reputation":2502,"user_id":2315104,"accept_rate":42,"display_name":"user2315104"},"score":0,"creation_date":1685534861,"post_id":76372591,"comment_id":134673088,"body_markdown":"I have added all classes in UPDATE 2 . please suggest @aled","body":"I have added all classes in UPDATE 2 . please suggest @aled"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1685540019,"post_id":76372591,"comment_id":134674410,"body_markdown":"The input file does not match the definitions. Fields repository, pullPolicy don&#39;t exist in code. And what version of Snakeyaml are you using?","body":"The input file does not match the definitions. Fields repository, pullPolicy don&#39;t exist in code. And what version of Snakeyaml are you using?"},{"owner":{"account_id":2679463,"reputation":2502,"user_id":2315104,"accept_rate":42,"display_name":"user2315104"},"score":0,"creation_date":1685545434,"post_id":76372591,"comment_id":134675902,"body_markdown":"repository and pullPolicy is there in Image class . Did you see that ? @aled\nSnakeYaml version : 1.33","body":"repository and pullPolicy is there in Image class . Did you see that ? @aled SnakeYaml version : 1.33"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1685547330,"post_id":76372591,"comment_id":134676349,"body_markdown":"Yes, the error was confusing but the reason is that image is incorrectly typed as a      `List&lt;Image&gt;` when clearly it is not a list in the input file. I&#39;m not sure how that possibly worked.","body":"Yes, the error was confusing but the reason is that image is incorrectly typed as a      <code>List&lt;Image&gt;</code> when clearly it is not a list in the input file. I&#39;m not sure how that possibly worked."},{"owner":{"account_id":141151,"reputation":36461,"user_id":347964,"accept_rate":79,"display_name":"flyx"},"score":0,"creation_date":1685630926,"post_id":76372591,"comment_id":134690128,"body_markdown":"YAML generally doesn&#39;t give you complete control over formatting and doesn&#39;t let you keep the original format, see [this question](https://stackoverflow.com/q/60891174/347964) for details. It might be that you can achieve what you want in this scenario, but it&#39;s probably not worthwhile figuring that out since it won&#39;t be a general solution and it will probably break on different input / structure.","body":"YAML generally doesn&#39;t give you complete control over formatting and doesn&#39;t let you keep the original format, see <a href=\"https://stackoverflow.com/q/60891174/347964\">this question</a> for details. It might be that you can achieve what you want in this scenario, but it&#39;s probably not worthwhile figuring that out since it won&#39;t be a general solution and it will probably break on different input / structure."}],"owner":{"account_id":2679463,"reputation":2502,"user_id":2315104,"accept_rate":42,"display_name":"user2315104"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685534842,"creation_date":1685529412,"question_id":76372591,"body_markdown":"Have following YAML \r\n\r\n    id: &quot;20&quot;\r\n    name: &quot;Bruce&quot;\r\n    year: &quot;2020&quot;\r\n    address: &quot;Gotham City&quot;\r\n    department: &quot;Computer Science&quot;\r\n    image:\r\n      repository: &quot;test.com/test&quot;\r\n      pullPolicy: &quot;IfNotPresent&quot;\r\n      tag: &quot;dfdklf&quot;\r\n    route:\r\n      hosts:\r\n        - host: abc.com\r\n        - host: abc1.com\r\n        - host: abc2.com\r\n\r\nbut when I&#39;m adding new Host entry using JAVA object (serialization and deserialization) and SnakeYaml lib \r\nthe indentation is not proper for Image . it is coming as like below \r\n\r\n    address: Gotham City\r\n    department: Computer Science\r\n    id: &#39;20&#39;\r\n    image: {pullPolicy: IfNotPresent, repository: test.com/test,\r\n      tag: dfdklf}\r\n    name: Bruce\r\n    route:\r\n      hosts:\r\n      - {host: abc.com}\r\n      - {host: abc1.com}\r\n      - {host: abc2.com}\r\n    year: &#39;2020&#39;\r\n\r\nhow to maintain the same structure as the original YAML ? I see that ,  image entry is modified and coming as a single line and the sequence is also not maintained. \r\n\r\nHere is the JAVA code \r\n\r\n    public static void main(String[] args) throws FileNotFoundException {\r\n    \t\t\r\n    \t\tInputStream inputStream = new FileInputStream(new File(&quot;C:\\\\yaml\\\\student.yaml&quot;));\r\n    \t\r\n    \t\tYaml yaml = new Yaml(new Constructor(Values.class));\r\n    \t\r\n    \t\tValues data = yaml.load(inputStream);\r\n    \t\r\n    \t\tdata.getImage().forEach(x -&gt; System.out.println(x.getTag()));\r\n    \t\tdata.getRoute().getHosts().forEach(x -&gt; System.out.println(x.getHost()));\r\n    \t\t\r\n    \t\tDumperOptions options = new DumperOptions();\r\n    \t\toptions.setIndent(2);\r\n    \t\toptions.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);\r\n    \t\toptions.setIndicatorIndent(2);\r\n    \t\toptions.setIndentWithIndicator(true);\r\n    \t\t\r\n    \t\tHost host = new Host();\r\n    \t\thost.setHost(&quot;abc.com&quot;);\r\n    \t\tdata.getRoute().getHosts().add(host);\r\n    \t\t\r\n    \t\t\r\n    \t\tdata.getRoute().getHosts().forEach(x -&gt; System.out.println(x.getHost()));\r\n    \t\t\r\n    \t\tPrintWriter writer = new PrintWriter(new File(&quot;C:\\\\yaml\\\\student.yaml&quot;));\r\n    \t\tYaml yaml1 = new Yaml(new Constructor(Values.class));\r\n    \t\tyaml1.dump(data, writer);\r\n    \t\t\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\n**UPDATE 1 :** \r\n\r\n    public class Values {\r\n    \t\r\n    \t private List&lt;Image&gt; image;\r\n    \t private String id;\r\n    \t private String name;\r\n    \t private String year;\r\n    \t private String address;\r\n    \t private Route route;\r\n    \t  \r\n    \t public Route getRoute() {\r\n    \t\treturn route;\r\n    \t}\r\n    \r\n    \tpublic void setRoute(Route route) {\r\n    \t\tthis.route = route;\r\n    \t}\r\n    \r\n    \tpublic String getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(String id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \r\n    \tpublic String getYear() {\r\n    \t\treturn year;\r\n    \t}\r\n    \r\n    \tpublic void setYear(String year) {\r\n    \t\tthis.year = year;\r\n    \t}\r\n    \r\n    \tpublic String getAddress() {\r\n    \t\treturn address;\r\n    \t}\r\n    \r\n    \tpublic void setAddress(String address) {\r\n    \t\tthis.address = address;\r\n    \t}\r\n    \r\n    \tpublic String getDepartment() {\r\n    \t\treturn department;\r\n    \t}\r\n    \r\n    \tpublic void setDepartment(String department) {\r\n    \t\tthis.department = department;\r\n    \t}\r\n    \r\n    \tprivate String department;\r\n    \t \r\n    \t \r\n    \t public Values()\r\n    \t {\r\n    \t\t \r\n    \t }\r\n    \t \r\n    \t public Values (List&lt;Image&gt; image, String id, String name, String year, String address, String department )\r\n    \t {\r\n    \t\t super ();\r\n    \t\t this.image = image;\r\n    \t\t this.id = id;\r\n    \t\t this.name = name;\r\n    \t\t this.year = year;\r\n    \t\t this.address = address;\r\n    \t\t this.department = department; \r\n    \t }\r\n    \r\n    \tpublic List&lt;Image&gt; getImage() {\r\n    \t\treturn image;\r\n    \t}\r\n    \r\n    \tpublic void setImage(List&lt;Image&gt; image) {\r\n    \t\tthis.image = image;\r\n    \t}\r\n    \r\n    \t/*\r\n    \t * public Map&lt;String, Object&gt; get(String string) { // TODO Auto-generated method\r\n    \t * stub return null; }\r\n    \t */\r\n    }\r\n\r\n**UPDATE 2** \r\n\r\n    public class Host {\r\n    \t\r\n    \t  private String host;\r\n    \t    public String getHost() {\r\n    \t        return host;\r\n    \t    }\r\n    \t    public void setHost(String host) {\r\n    \t        this.host = host;\r\n    \t    }\r\n    \r\n    }\r\n\r\n\r\n    public class Image {\r\n    \t\r\n    \tprivate String repository;\r\n    \tprivate String pullPolicy;\r\n    \tprivate String tag;\r\n    \t\r\n    \tpublic Image()\r\n    \t{\t\r\n    \t}\r\n    \t\r\n    \tpublic Image (String repository, String pullPolicy, String tags)\r\n    \t{\r\n    \t\tsuper();\r\n    \t\tthis.repository = repository;\r\n    \t\tthis.pullPolicy = pullPolicy;\r\n    \t\tthis.tag = tags;\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic String getRepository() {\r\n    \t\treturn repository;\r\n    \t}\r\n    \tpublic void setRepository(String repository) {\r\n    \t\tthis.repository = repository;\r\n    \t}\r\n    \tpublic String getPullPolicy() {\r\n    \t\treturn pullPolicy;\r\n    \t}\r\n    \tpublic void setPullPolicy(String pullPolicy) {\r\n    \t\tthis.pullPolicy = pullPolicy;\r\n    \t}\r\n    \tpublic String getTag() {\r\n    \t\treturn tag;\r\n    \t}\r\n    \tpublic void setTag(String tag) {\r\n    \t\tthis.tag = tag;\r\n    \t}\r\n    \t\r\n    \r\n    }\r\n\r\n\r\n    public class Route {\r\n    \t\r\n    \t   private List&lt;Host&gt; hosts = new ArrayList&lt;Host&gt;();\r\n    \t    public List&lt;Host&gt; getHosts() {\r\n    \t        return hosts;\r\n    \t    }\r\n    \t    public void setHosts(List&lt;Host&gt; hosts) {\r\n    \t        this.hosts = hosts;\r\n    \t    }\r\n    \r\n    }\r\n\r\n\r\n\r\n","title":"how to add indentation in YAML using SnakeYaml and JAVA object","body":"<p>Have following YAML</p>\n<pre><code>id: &quot;20&quot;\nname: &quot;Bruce&quot;\nyear: &quot;2020&quot;\naddress: &quot;Gotham City&quot;\ndepartment: &quot;Computer Science&quot;\nimage:\n  repository: &quot;test.com/test&quot;\n  pullPolicy: &quot;IfNotPresent&quot;\n  tag: &quot;dfdklf&quot;\nroute:\n  hosts:\n    - host: abc.com\n    - host: abc1.com\n    - host: abc2.com\n</code></pre>\n<p>but when I'm adding new Host entry using JAVA object (serialization and deserialization) and SnakeYaml lib\nthe indentation is not proper for Image . it is coming as like below</p>\n<pre><code>address: Gotham City\ndepartment: Computer Science\nid: '20'\nimage: {pullPolicy: IfNotPresent, repository: test.com/test,\n  tag: dfdklf}\nname: Bruce\nroute:\n  hosts:\n  - {host: abc.com}\n  - {host: abc1.com}\n  - {host: abc2.com}\nyear: '2020'\n</code></pre>\n<p>how to maintain the same structure as the original YAML ? I see that ,  image entry is modified and coming as a single line and the sequence is also not maintained.</p>\n<p>Here is the JAVA code</p>\n<pre><code>public static void main(String[] args) throws FileNotFoundException {\n        \n        InputStream inputStream = new FileInputStream(new File(&quot;C:\\\\yaml\\\\student.yaml&quot;));\n    \n        Yaml yaml = new Yaml(new Constructor(Values.class));\n    \n        Values data = yaml.load(inputStream);\n    \n        data.getImage().forEach(x -&gt; System.out.println(x.getTag()));\n        data.getRoute().getHosts().forEach(x -&gt; System.out.println(x.getHost()));\n        \n        DumperOptions options = new DumperOptions();\n        options.setIndent(2);\n        options.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);\n        options.setIndicatorIndent(2);\n        options.setIndentWithIndicator(true);\n        \n        Host host = new Host();\n        host.setHost(&quot;abc.com&quot;);\n        data.getRoute().getHosts().add(host);\n        \n        \n        data.getRoute().getHosts().forEach(x -&gt; System.out.println(x.getHost()));\n        \n        PrintWriter writer = new PrintWriter(new File(&quot;C:\\\\yaml\\\\student.yaml&quot;));\n        Yaml yaml1 = new Yaml(new Constructor(Values.class));\n        yaml1.dump(data, writer);\n        \n\n    }\n\n}\n</code></pre>\n<p><strong>UPDATE 1 :</strong></p>\n<pre><code>public class Values {\n    \n     private List&lt;Image&gt; image;\n     private String id;\n     private String name;\n     private String year;\n     private String address;\n     private Route route;\n      \n     public Route getRoute() {\n        return route;\n    }\n\n    public void setRoute(Route route) {\n        this.route = route;\n    }\n\n    public String getId() {\n        return id;\n    }\n\n    public void setId(String id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getYear() {\n        return year;\n    }\n\n    public void setYear(String year) {\n        this.year = year;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n\n    public String getDepartment() {\n        return department;\n    }\n\n    public void setDepartment(String department) {\n        this.department = department;\n    }\n\n    private String department;\n     \n     \n     public Values()\n     {\n         \n     }\n     \n     public Values (List&lt;Image&gt; image, String id, String name, String year, String address, String department )\n     {\n         super ();\n         this.image = image;\n         this.id = id;\n         this.name = name;\n         this.year = year;\n         this.address = address;\n         this.department = department; \n     }\n\n    public List&lt;Image&gt; getImage() {\n        return image;\n    }\n\n    public void setImage(List&lt;Image&gt; image) {\n        this.image = image;\n    }\n\n    /*\n     * public Map&lt;String, Object&gt; get(String string) { // TODO Auto-generated method\n     * stub return null; }\n     */\n}\n</code></pre>\n<p><strong>UPDATE 2</strong></p>\n<pre><code>public class Host {\n    \n      private String host;\n        public String getHost() {\n            return host;\n        }\n        public void setHost(String host) {\n            this.host = host;\n        }\n\n}\n\n\npublic class Image {\n    \n    private String repository;\n    private String pullPolicy;\n    private String tag;\n    \n    public Image()\n    {   \n    }\n    \n    public Image (String repository, String pullPolicy, String tags)\n    {\n        super();\n        this.repository = repository;\n        this.pullPolicy = pullPolicy;\n        this.tag = tags;\n        \n    }\n    \n    public String getRepository() {\n        return repository;\n    }\n    public void setRepository(String repository) {\n        this.repository = repository;\n    }\n    public String getPullPolicy() {\n        return pullPolicy;\n    }\n    public void setPullPolicy(String pullPolicy) {\n        this.pullPolicy = pullPolicy;\n    }\n    public String getTag() {\n        return tag;\n    }\n    public void setTag(String tag) {\n        this.tag = tag;\n    }\n    \n\n}\n\n\npublic class Route {\n    \n       private List&lt;Host&gt; hosts = new ArrayList&lt;Host&gt;();\n        public List&lt;Host&gt; getHosts() {\n            return hosts;\n        }\n        public void setHosts(List&lt;Host&gt; hosts) {\n            this.hosts = hosts;\n        }\n\n}\n</code></pre>\n"},{"tags":["java","algorithm","data-structures"],"comments":[{"owner":{"account_id":22848,"reputation":131598,"user_id":56778,"accept_rate":93,"display_name":"Jim Mischel"},"score":0,"creation_date":1685647168,"post_id":76373164,"comment_id":134693661,"body_markdown":"How many distinct values can you have for PCids? For SCids, LCids, PIEs, and case? If it&#39;s a reasonable number, you could bitmap the individual properties and pack them into a 32-bit or 64-bit integer.","body":"How many distinct values can you have for PCids? For SCids, LCids, PIEs, and case? If it&#39;s a reasonable number, you could bitmap the individual properties and pack them into a 32-bit or 64-bit integer."},{"owner":{"account_id":10427719,"reputation":81,"user_id":7688437,"display_name":"Y_J"},"score":0,"creation_date":1686543166,"post_id":76373164,"comment_id":134807450,"body_markdown":"The number of distinct values can grow over time based on the business logic.","body":"The number of distinct values can grow over time based on the business logic."},{"owner":{"account_id":22848,"reputation":131598,"user_id":56778,"accept_rate":93,"display_name":"Jim Mischel"},"score":0,"creation_date":1686543774,"post_id":76373164,"comment_id":134807488,"body_markdown":"It can grow over time, but how large? You have four categories: PCids, SCids, LCids, PIEs. Assuming you have fewer than 256 values in each category, you can assign each value within a category a unique number and then pack the four values into a 32-bit integer. If you have fewer than 65,536 values in each category, you can pack them into a 64-bit integer. If your problem fits into those confines, I can provide more detail.","body":"It can grow over time, but how large? You have four categories: PCids, SCids, LCids, PIEs. Assuming you have fewer than 256 values in each category, you can assign each value within a category a unique number and then pack the four values into a 32-bit integer. If you have fewer than 65,536 values in each category, you can pack them into a 64-bit integer. If your problem fits into those confines, I can provide more detail."}],"owner":{"account_id":10427719,"reputation":81,"user_id":7688437,"display_name":"Y_J"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685534754,"creation_date":1685533768,"question_id":76373164,"body_markdown":"Let following be the data set:\r\n```\r\n- ref: UNIQUE_VAL_1\r\n  PCids: [ TTT ]\r\n  LCids: [ TTT ]\r\n  SCids: [ TTT ]\r\n  PIEs: [ PIE_1 ]\r\n  case: [ ACC ]\r\n\r\n\r\n- ref: UNIQUE_VAL_2\r\n  PCids: [ CCC ]\r\n  LCids: [ CCC ]\r\n  SCids: [ CCC ]\r\n  PIEs: [ PIE_2 ]\r\n  case: [ ACC ]\r\n\r\n\r\n- ref: UNIQUE_VAL_3\r\n  PCids: [ DDD ]\r\n  SCids: [ PPP ]\r\n  LCids: [ PPP ]\r\n  PIEs: [ PIE_3 ]\r\n  case: [ ACC ]\r\n\r\n```\r\nFor each combination of values of PCids, SCids, LCids, PIEs and case,\r\nthere will be a unique ref value.\r\n\r\n```\r\nEg Input:\r\n  PCids = DDD\r\n  SCids = PPP\r\n  LCids = PPP\r\n  PIEs = PIE_3\r\n  case = ACC\r\n\r\n  Output:\r\n  ref = UNIQUE_VAL_3\r\n\r\n```\r\nHow can we realise this in code ? I am trying to think of a solution where I am not forced to write a huge if-else ladder.\r\n\r\nTried following solution:\r\nCreate an md5 of all the dependant parameters and put it as a key with value as the ref in a hashmap.\r\n\r\nCaveat:\r\nWill have to use an initialiser code which will run before everything else always to create a hashmap in memory.","title":"Build lookup for getting a single value based on multiple static parameters","body":"<p>Let following be the data set:</p>\n<pre><code>- ref: UNIQUE_VAL_1\n  PCids: [ TTT ]\n  LCids: [ TTT ]\n  SCids: [ TTT ]\n  PIEs: [ PIE_1 ]\n  case: [ ACC ]\n\n\n- ref: UNIQUE_VAL_2\n  PCids: [ CCC ]\n  LCids: [ CCC ]\n  SCids: [ CCC ]\n  PIEs: [ PIE_2 ]\n  case: [ ACC ]\n\n\n- ref: UNIQUE_VAL_3\n  PCids: [ DDD ]\n  SCids: [ PPP ]\n  LCids: [ PPP ]\n  PIEs: [ PIE_3 ]\n  case: [ ACC ]\n\n</code></pre>\n<p>For each combination of values of PCids, SCids, LCids, PIEs and case,\nthere will be a unique ref value.</p>\n<pre><code>Eg Input:\n  PCids = DDD\n  SCids = PPP\n  LCids = PPP\n  PIEs = PIE_3\n  case = ACC\n\n  Output:\n  ref = UNIQUE_VAL_3\n\n</code></pre>\n<p>How can we realise this in code ? I am trying to think of a solution where I am not forced to write a huge if-else ladder.</p>\n<p>Tried following solution:\nCreate an md5 of all the dependant parameters and put it as a key with value as the ref in a hashmap.</p>\n<p>Caveat:\nWill have to use an initialiser code which will run before everything else always to create a hashmap in memory.</p>\n"},{"tags":["java","garbage-collection","out-of-memory","metaspace"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1500028269,"post_id":45075721,"comment_id":77172658,"body_markdown":"Metaspace may contain more meta data than class metadata.","body":"Metaspace may contain more meta data than class metadata."}],"answers":[{"tags":[],"owner":{"account_id":14892463,"reputation":360,"user_id":10753729,"display_name":"Ivan Vakhrushev"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1685534403,"creation_date":1685534403,"answer_id":76373271,"question_id":45075721,"body_markdown":"&gt; CompressedClassSpaceSize determines the size of the metaspace\r\n\r\nNo, it&#39;s incorrect. Compressed class space is an memory region inside Metaspace. So MaxMetaspaceSize option always works and limits both Metaspace and inner Compressed class space.  \r\nIf you try to set CompressedClassSpaceSize greater than MaxMetaspaceSize it will not make an effect.  \r\nSee https://stackoverflow.com/questions/54250638/is-compressedclassspacesize-area-contains-maxmetaspacesize-area  \r\nSee also https://stuefe.de/posts/metaspace/what-is-metaspace/","title":"MaxMetaSpace and CompressedClassSpaceSize","body":"<blockquote>\n<p>CompressedClassSpaceSize determines the size of the metaspace</p>\n</blockquote>\n<p>No, it's incorrect. Compressed class space is an memory region inside Metaspace. So MaxMetaspaceSize option always works and limits both Metaspace and inner Compressed class space.<br />\nIf you try to set CompressedClassSpaceSize greater than MaxMetaspaceSize it will not make an effect.<br />\nSee <a href=\"https://stackoverflow.com/questions/54250638/is-compressedclassspacesize-area-contains-maxmetaspacesize-area\">Is CompressedClassSpaceSize area contains MaxMetaspaceSize area?</a><br />\nSee also <a href=\"https://stuefe.de/posts/metaspace/what-is-metaspace/\" rel=\"nofollow noreferrer\">https://stuefe.de/posts/metaspace/what-is-metaspace/</a></p>\n"}],"owner":{"account_id":401412,"reputation":548,"user_id":767949,"accept_rate":20,"display_name":"null"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2483,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1685534403,"creation_date":1499935691,"question_id":45075721,"body_markdown":"Can I understand when UseCompressedClassPointers is enabled, MaxMetaspace is not relevance and CompressedClassSpaceSize determines the size of the metaspace?.\r\n\r\nBecause from Oracle doc\r\n https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks002.html (section Exception in thread thread_name: java.lang.OutOfMemoryError: Compressed class space)\r\n\r\n - *If the UseCompressedClassPointers is used, the amount of space   \r\n   available for class metadata is fixed at the amount   \r\n   CompressedClassSpaceSize. If the space needed for   \r\n   UseCompressedClassPointers exceeds CompressedClassSpaceSize, a   \r\n   java.lang.OutOfMemoryError with detail Compressed class space is   \r\n   thrown.*\r\n\r\nkindly point me to some link that explains what is stored in CompressedClassSpaceSize &amp; Metaspace","title":"MaxMetaSpace and CompressedClassSpaceSize","body":"<p>Can I understand when UseCompressedClassPointers is enabled, MaxMetaspace is not relevance and CompressedClassSpaceSize determines the size of the metaspace?.</p>\n\n<p>Because from Oracle doc\n <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks002.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks002.html</a> (section Exception in thread thread_name: java.lang.OutOfMemoryError: Compressed class space)</p>\n\n<ul>\n<li><em>If the UseCompressedClassPointers is used, the amount of space<br>\navailable for class metadata is fixed at the amount<br>\nCompressedClassSpaceSize. If the space needed for<br>\nUseCompressedClassPointers exceeds CompressedClassSpaceSize, a<br>\njava.lang.OutOfMemoryError with detail Compressed class space is<br>\nthrown.</em></li>\n</ul>\n\n<p>kindly point me to some link that explains what is stored in CompressedClassSpaceSize &amp; Metaspace</p>\n"},{"tags":["java","jakarta-ee","ejb"],"comments":[{"owner":{"account_id":424958,"reputation":5361,"user_id":805252,"accept_rate":82,"display_name":"Kheldar"},"score":2,"creation_date":1315075460,"post_id":7295096,"comment_id":8788183,"body_markdown":"Check http://stackoverflow.com/questions/1286019/starting-java-ee-mvc","body":"Check <a href=\"http://stackoverflow.com/questions/1286019/starting-java-ee-mvc\">stackoverflow.com/questions/1286019/starting-java-ee-mvc</a>"},{"owner":{"account_id":424958,"reputation":5361,"user_id":805252,"accept_rate":82,"display_name":"Kheldar"},"score":2,"creation_date":1315075748,"post_id":7295096,"comment_id":8788227,"body_markdown":"You should cut this question in two questions though, one is a duplicate, the other I think is not answered in the link there.","body":"You should cut this question in two questions though, one is a duplicate, the other I think is not answered in the link there."},{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paลญlo Ebermann"},"score":2,"creation_date":1315081946,"post_id":7295096,"comment_id":8789141,"body_markdown":"Actually, did you read the [java-ee] [tag wiki](http://meta.stackoverflow.com/posts/66297/revisions)?","body":"Actually, did you read the [java-ee] <a href=\"http://meta.stackoverflow.com/posts/66297/revisions\">tag wiki</a>?"},{"owner":{"account_id":65909,"reputation":52734,"user_id":193653,"accept_rate":84,"display_name":"claws"},"score":0,"creation_date":1355343566,"post_id":7295096,"comment_id":19063263,"body_markdown":"also read: http://stackoverflow.com/questions/106820/what-is-java-ee","body":"also read: <a href=\"http://stackoverflow.com/questions/106820/what-is-java-ee\">stackoverflow.com/questions/106820/what-is-java-ee</a>"},{"owner":{"account_id":1014158,"reputation":2646,"user_id":1026104,"display_name":"jan.supol"},"score":0,"creation_date":1467135870,"post_id":7295096,"comment_id":63602214,"body_markdown":"also: [who-implement-the-specification](http://stackoverflow.com/questions/37983860/java-ee-who-implement-the-specification/37985284?noredirect=1#comment63456009_37985284)","body":"also: <a href=\"http://stackoverflow.com/questions/37983860/java-ee-who-implement-the-specification/37985284?noredirect=1#comment63456009_37985284\">who-implement-the-specification</a>"},{"owner":{"account_id":382980,"reputation":590,"user_id":738556,"display_name":"Viraj"},"score":0,"creation_date":1520442130,"post_id":7295096,"comment_id":85319663,"body_markdown":"Jakarta EE is the new name for Java EE.","body":"Jakarta EE is the new name for Java EE."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1522018474,"post_id":7295096,"comment_id":85966468,"body_markdown":"Related: [*Java EE Web Profile vs Java EE Full Platform*](https://stackoverflow.com/q/24239978/642706)","body":"Related: <a href=\"https://stackoverflow.com/q/24239978/642706\"><i>Java EE Web Profile vs Java EE Full Platform</i></a>"},{"owner":{"account_id":2812914,"reputation":1644,"user_id":2418764,"accept_rate":50,"display_name":"Alex Theedom"},"score":0,"creation_date":1522921159,"post_id":7295096,"comment_id":86348012,"body_markdown":"Java EE past, present and future provides context: https://readlearncode.com/java-ee/java-ee-past-present-and-future/","body":"Java EE past, present and future provides context: <a href=\"https://readlearncode.com/java-ee/java-ee-past-present-and-future/\" rel=\"nofollow noreferrer\">readlearncode.com/java-ee/java-ee-past-present-and-future</a>"},{"owner":{"account_id":1207211,"reputation":506,"user_id":1176557,"accept_rate":83,"display_name":"H.R."},"score":1,"creation_date":1557846284,"post_id":7295096,"comment_id":98898005,"body_markdown":"well java EE is just like ruby on rails EE or javascript EE chose any language today and just call it EE that it sounds niceer....no other language needs some Marketing buzzwords like enterprise edition just to say hey i can do web and db.  \n  &quot;I know java&quot; &quot;wait, you know Java or Java EE&quot; .. WTF its like braging i can do http request in javascript or acces db in rails.. wow magic. but business ppl love the words ENTERPRISE EDITION .... drop the EE Java!","body":"well java EE is just like ruby on rails EE or javascript EE chose any language today and just call it EE that it sounds niceer....no other language needs some Marketing buzzwords like enterprise edition just to say hey i can do web and db.     &quot;I know java&quot; &quot;wait, you know Java or Java EE&quot; .. WTF its like braging i can do http request in javascript or acces db in rails.. wow magic. but business ppl love the words ENTERPRISE EDITION .... drop the EE Java!"}],"answers":[{"comments":[{"owner":{"account_id":20847162,"reputation":894,"user_id":15312420,"display_name":"Mehdi Charife"},"score":0,"creation_date":1686803211,"post_id":7295172,"comment_id":134850126,"body_markdown":"Is Java SE also a specification? I find the term edition less confusing. Why not call it an edition of the Java Language as the name already implies?","body":"Is Java SE also a specification? I find the term edition less confusing. Why not call it an edition of the Java Language as the name already implies?"}],"tags":[],"owner":{"account_id":424572,"reputation":5911,"user_id":804637,"display_name":"Prabath Siriwardena"},"comment_count":1,"down_vote_count":2,"up_vote_count":15,"is_accepted":false,"score":13,"last_activity_date":1315145359,"creation_date":1315076204,"answer_id":7295172,"question_id":7295096,"body_markdown":"Java Enterprise Edition (Java EE) is an umbrella specification that references a number of other more detailed specifications, of which Enterprise JavaBeans (EJB) is one of the more important ones.\r\n\r\nRead [this][1] - it explains the difference between Java EE and Spring\r\n\r\nThanks...\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/2822812/spring-3-0-vs-j2ee-6-0","title":"What exactly is Java EE?","body":"<p>Java Enterprise Edition (Java EE) is an umbrella specification that references a number of other more detailed specifications, of which Enterprise JavaBeans (EJB) is one of the more important ones.</p>\n\n<p>Read <a href=\"https://stackoverflow.com/questions/2822812/spring-3-0-vs-j2ee-6-0\">this</a> - it explains the difference between Java EE and Spring</p>\n\n<p>Thanks...</p>\n"},{"comments":[{"owner":{"account_id":217137,"reputation":37872,"user_id":472792,"accept_rate":50,"display_name":"Arjan Tijms"},"score":6,"creation_date":1315145515,"post_id":7295207,"comment_id":8795072,"body_markdown":"It&#39;s maybe not very useful to quote ancient text (2005) from an ancient version of the specification (J2EE). OP specifically asked for Java EE, which is the modern day incarnation of J2EE.","body":"It&#39;s maybe not very useful to quote ancient text (2005) from an ancient version of the specification (J2EE). OP specifically asked for Java EE, which is the modern day incarnation of J2EE."}],"tags":[],"owner":{"account_id":424465,"reputation":2814,"user_id":804477,"display_name":"Srikanth Venkatesh"},"comment_count":1,"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1415204977,"creation_date":1315076440,"answer_id":7295207,"question_id":7295096,"body_markdown":" - [Source][1] -- Java 2 Platform, Enterprise Edition (J2EE) defines the standard for developing component-based multitier enterprise applications. J2EE simplifies building enterprise applications that are portable, scalable, and that integrate easily with legacy applications and data .\r\n\r\n - [Source][2] -- Enterprise JavaBeans (EJB) technology is the server-side component architecture for Java Platform, Enterprise Edition (Java EE). EJB technology enables rapid and simplified development of distributed, transactional, secure and portable applications based on Java technology.\r\n\r\n - &gt;Is Java EE just a specification? What I mean is: Is EJB Java EE?\r\n \r\n     -  Java EE is a specification.\r\n  \r\n     -  EJB is server side component architecture for Java EE\r\n\r\n - &gt;Are EJB/Spring different implementations of Java EE?\r\n   \r\n     - Both EJB and Spring are different frameworks following Java EE.\r\n\r\n\r\n\r\n  [1]: http://java.sun.com/j2ee/\r\n  [2]: http://www.oracle.com/technetwork/java/javaee/ejb/index.html","title":"What exactly is Java EE?","body":"<ul>\n<li><p><a href=\"http://java.sun.com/j2ee/\" rel=\"nofollow\">Source</a> -- Java 2 Platform, Enterprise Edition (J2EE) defines the standard for developing component-based multitier enterprise applications. J2EE simplifies building enterprise applications that are portable, scalable, and that integrate easily with legacy applications and data .</p></li>\n<li><p><a href=\"http://www.oracle.com/technetwork/java/javaee/ejb/index.html\" rel=\"nofollow\">Source</a> -- Enterprise JavaBeans (EJB) technology is the server-side component architecture for Java Platform, Enterprise Edition (Java EE). EJB technology enables rapid and simplified development of distributed, transactional, secure and portable applications based on Java technology.</p></li>\n<li><blockquote>\n  <p>Is Java EE just a specification? What I mean is: Is EJB Java EE?</p>\n</blockquote>\n\n<ul>\n<li><p>Java EE is a specification.</p></li>\n<li><p>EJB is server side component architecture for Java EE</p></li>\n</ul></li>\n<li><blockquote>\n  <p>Are EJB/Spring different implementations of Java EE?</p>\n</blockquote>\n\n<ul>\n<li>Both EJB and Spring are different frameworks following Java EE.</li>\n</ul></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":79742,"reputation":19393,"user_id":225899,"accept_rate":85,"display_name":"James P."},"score":2,"creation_date":1315086598,"post_id":7295697,"comment_id":8789739,"body_markdown":"So Java EE could be said as defining what support should exist for a typical JEE application to run?","body":"So Java EE could be said as defining what support should exist for a typical JEE application to run?"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":4,"creation_date":1315087206,"post_id":7295697,"comment_id":8789801,"body_markdown":"@James: Yes. Pretty everything in Java EE API is abstract. Java SE API has also several abstract parts, e.g. JDBC, JAXP, JAXB, etc.","body":"@James: Yes. Pretty everything in Java EE API is abstract. Java SE API has also several abstract parts, e.g. JDBC, JAXP, JAXB, etc."},{"owner":{"account_id":1415830,"reputation":7284,"user_id":1341526,"accept_rate":96,"display_name":"jacktrades"},"score":3,"creation_date":1353415430,"post_id":7295697,"comment_id":18431661,"body_markdown":"&quot;There&#39;s not really a reason to look at again another framework like Spring to make the developers more easy.&quot; -&gt; Truly Valuable info.","body":"&quot;There&#39;s not really a reason to look at again another framework like Spring to make the developers more easy.&quot; -&gt; Truly Valuable info."},{"owner":{"account_id":910718,"reputation":2097,"user_id":944657,"accept_rate":100,"display_name":"Abdul Rahman"},"score":0,"creation_date":1388816889,"post_id":7295697,"comment_id":31404383,"body_markdown":"@BalusC: Hi, Is the official Sun Java EE.... link is broken, if you give a link similar to that, it will be helpful for someone.","body":"@BalusC: Hi, Is the official Sun Java EE.... link is broken, if you give a link similar to that, it will be helpful for someone."},{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1513811873,"post_id":7295697,"comment_id":82799445,"body_markdown":"To run complete Spring framework, Servlet container would suffice, Servlet container is [web server + web container(implements servlet api)]\nwhere as to run Java EE, you need application server like Glassfish. Servlet container would not suffice. Servlet container is a subset of application server. How do I understand this?","body":"To run complete Spring framework, Servlet container would suffice, Servlet container is [web server + web container(implements servlet api)] where as to run Java EE, you need application server like Glassfish. Servlet container would not suffice. Servlet container is a subset of application server. How do I understand this?"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1513840042,"post_id":7295697,"comment_id":82806805,"body_markdown":"@overexchange: JSP/Servlet is a subset of Java EE.","body":"@overexchange: JSP/Servlet is a subset of Java EE."},{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1513841066,"post_id":7295697,"comment_id":82807288,"body_markdown":"Are you saying that, anything written in Spring framework boils down to Servlet? whether it is an MVC application or middle ware?","body":"Are you saying that, anything written in Spring framework boils down to Servlet? whether it is an MVC application or middle ware?"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1513841369,"post_id":7295697,"comment_id":82807423,"body_markdown":"@overexchange: Nope, rest of Spring is proprietary.","body":"@overexchange: Nope, rest of Spring is proprietary."},{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1513844154,"post_id":7295697,"comment_id":82808758,"body_markdown":"I don&#39;t know about the proprietary part, and what that mean? Any resource to read?","body":"I don&#39;t know about the proprietary part, and what that mean? Any resource to read?"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1513845210,"post_id":7295697,"comment_id":82809301,"body_markdown":"@overexchange: It just means that Spring is not Java EE. Like as that a BMW is not a Toyota even though they can drive the same road. If you can&#39;t grok that, you&#39;d better take a step back and re-read the entire answer including all of its internal links and the internal links theerof and the internal links thereof and the internal links thereof, etc.","body":"@overexchange: It just means that Spring is not Java EE. Like as that a BMW is not a Toyota even though they can drive the same road. If you can&#39;t grok that, you&#39;d better take a step back and re-read the entire answer including all of its internal links and the internal links theerof and the internal links thereof and the internal links thereof, etc."},{"owner":{"account_id":22033,"reputation":1989,"user_id":54013,"display_name":"Johan Boul&#233;"},"score":0,"creation_date":1551980143,"post_id":7295697,"comment_id":96849494,"body_markdown":"I also think the term proprietary was improper in this context. It usually refers to closedsource implementations (and sometimes too no public API). AFAIK, Spring is opensource and has its own &quot;native&quot; API.","body":"I also think the term proprietary was improper in this context. It usually refers to closedsource implementations (and sometimes too no public API). AFAIK, Spring is opensource and has its own &quot;native&quot; API."}],"tags":[],"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":11,"down_vote_count":1,"up_vote_count":231,"is_accepted":false,"score":230,"last_activity_date":1685534080,"creation_date":1315081621,"answer_id":7295697,"question_id":7295096,"body_markdown":"&lt;sup&gt;&lt;sup&gt;(Updated May 2023)&lt;/sup&gt;&lt;/sup&gt;\r\n\r\nFirst of all, &quot;Java EE&quot; has since Sep 2019 been renamed to &quot;**Jakarta EE**&quot;, starting with version 8. Historically, there was also the term &quot;J2EE&quot; which covered versions 1.2 until 1.4. The term &quot;Java EE&quot; covered versions 5 until 8. See also [Jakarta EE, History on Wikipedia][1].\r\n\r\n----------\r\n\r\n\r\n&gt; *Is Jakarta EE just a specification? What I mean is: Is EJB Jakarta EE?*\r\n\r\n[Jakarta EE][2] is indeed an **abstract** specification. Anybody is open to develop and provide a working [implementation][3] of the specification. The *concrete* implementations are the so-called application servers, like [WildFly][4], [TomEE][5], [GlassFish][6], [Liberty][7], [WebLogic][8], etc. There are also servlet containers which implement only the JSP/Servlet part of the huge Jakarta EE API, such as [Tomcat][9], [Jetty][10], etc.\r\n\r\nWe, Jakarta EE developers, should write code utilizing the specification (i.e. import *only* `jakarta.*` classes in our code instead of implementation specific classes such as `org.jboss.wildfly.*`, `com.sun.glassfish.*`, `org.apache.tomcat.*`, etc) and then we&#39;ll be able to run our code on any implementation (thus, on any application server). If you&#39;re familiar with JDBC, it&#39;s basically the same concept as how JDBC drivers work. See also a.o. https://stackoverflow.com/questions/7550612/in-simplest-terms-what-is-a-factory\r\n\r\nEJB is part of the Jakarta EE specification. Look, [it&#39;s in the Jakarta EE API][11]. Full-fledged Jakarta EE application servers support it out the box, but simple JSP/Servlet containers don&#39;t.\r\n\r\n### See also:\r\n\r\n- https://stackoverflow.com/questions/1958808/java-jakarta-ee-web-development-where-do-i-start-and-what-skills-do-i-need\r\n- https://stackoverflow.com/questions/65703840/how-to-properly-configure-jakarta-ee-libraries-in-maven-pom-xml-for-tomcat/65704617#65704617\r\n\r\n---\r\n\r\n&gt; *Are EJB/Spring different implementations of Jakarta EE?*\r\n\r\nNo, as said, EJB is part of Jakarta EE. Spring is a standalone framework which substitutes and improves many parts of Jakarta EE. Spring doesn&#39;t necessarily require Jakarta EE to run. A bare-bones servlet container like Tomcat is already sufficient. Simply put, Spring is a competitor of Jakarta EE. E.g. &quot;Spring&quot; (standalone) competes EJB/JTA, Spring MVC competes Faces/REST/MVC, Spring DI/IoC/AOP competes CDI, Spring Security competes JASPIC/Security, Spring Boot competes MicroProfile, etc.\r\n\r\nBack during the old J2EE/EJB2 times, the EJB2 API was terrible to implement and maintain. Spring was then a much better alternative to EJB2. But since EJB3 (Java EE 5), the EJB API was much improved based on lessons learnt from Spring. Since CDI (Java EE 6), there&#39;s not really a reason to look at again *another* framework like Spring to make the developers more easy as to developing among others the service layer.\r\n\r\nOnly when you&#39;re using a bare-bones servlet container such as Tomcat and can&#39;t move on to a Jakarta EE server, then Spring is more attractive as it&#39;s easier to install Spring on Tomcat. It isn&#39;t possible to install e.g. an EJB container on Tomcat without modifying the server itself, you would basically be reinventing TomEE.\r\n\r\n### See also:\r\n\r\n- https://stackoverflow.com/questions/18369356/when-is-it-necessary-or-convenient-to-use-springjsf2-or-ejb3jsf2-or-all-of-the\r\n- https://stackoverflow.com/questions/18744910/using-jsf-as-view-technology-of-spring-mvc\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Jakarta_EE#History\r\n  [2]: https://jakarta.ee\r\n  [3]: https://jakarta.ee/compatibility/\r\n  [4]: https://wildfly.org\r\n  [5]: https://tomee.apache.org\r\n  [6]: https://glassfish.org\r\n  [7]: https://www.ibm.com/cloud/websphere-liberty\r\n  [8]: https://www.oracle.com/middleware/technologies/weblogic.html\r\n  [9]: https://tomcat.apache.org\r\n  [10]: https://www.eclipse.org/jetty/\r\n  [11]: https://jakarta.ee/specifications/enterprise-beans/4.0/apidocs/jakarta/ejb/package-summary.html","title":"What exactly is Java EE?","body":"<p><sup><sup>(Updated May 2023)</sup></sup></p>\n<p>First of all, &quot;Java EE&quot; has since Sep 2019 been renamed to &quot;<strong>Jakarta EE</strong>&quot;, starting with version 8. Historically, there was also the term &quot;J2EE&quot; which covered versions 1.2 until 1.4. The term &quot;Java EE&quot; covered versions 5 until 8. See also <a href=\"https://en.wikipedia.org/wiki/Jakarta_EE#History\" rel=\"nofollow noreferrer\">Jakarta EE, History on Wikipedia</a>.</p>\n<hr />\n<blockquote>\n<p><em>Is Jakarta EE just a specification? What I mean is: Is EJB Jakarta EE?</em></p>\n</blockquote>\n<p><a href=\"https://jakarta.ee\" rel=\"nofollow noreferrer\">Jakarta EE</a> is indeed an <strong>abstract</strong> specification. Anybody is open to develop and provide a working <a href=\"https://jakarta.ee/compatibility/\" rel=\"nofollow noreferrer\">implementation</a> of the specification. The <em>concrete</em> implementations are the so-called application servers, like <a href=\"https://wildfly.org\" rel=\"nofollow noreferrer\">WildFly</a>, <a href=\"https://tomee.apache.org\" rel=\"nofollow noreferrer\">TomEE</a>, <a href=\"https://glassfish.org\" rel=\"nofollow noreferrer\">GlassFish</a>, <a href=\"https://www.ibm.com/cloud/websphere-liberty\" rel=\"nofollow noreferrer\">Liberty</a>, <a href=\"https://www.oracle.com/middleware/technologies/weblogic.html\" rel=\"nofollow noreferrer\">WebLogic</a>, etc. There are also servlet containers which implement only the JSP/Servlet part of the huge Jakarta EE API, such as <a href=\"https://tomcat.apache.org\" rel=\"nofollow noreferrer\">Tomcat</a>, <a href=\"https://www.eclipse.org/jetty/\" rel=\"nofollow noreferrer\">Jetty</a>, etc.</p>\n<p>We, Jakarta EE developers, should write code utilizing the specification (i.e. import <em>only</em> <code>jakarta.*</code> classes in our code instead of implementation specific classes such as <code>org.jboss.wildfly.*</code>, <code>com.sun.glassfish.*</code>, <code>org.apache.tomcat.*</code>, etc) and then we'll be able to run our code on any implementation (thus, on any application server). If you're familiar with JDBC, it's basically the same concept as how JDBC drivers work. See also a.o. <a href=\"https://stackoverflow.com/questions/7550612/in-simplest-terms-what-is-a-factory\">In simplest terms, what is a factory?</a></p>\n<p>EJB is part of the Jakarta EE specification. Look, <a href=\"https://jakarta.ee/specifications/enterprise-beans/4.0/apidocs/jakarta/ejb/package-summary.html\" rel=\"nofollow noreferrer\">it's in the Jakarta EE API</a>. Full-fledged Jakarta EE application servers support it out the box, but simple JSP/Servlet containers don't.</p>\n<h3>See also:</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/1958808/java-jakarta-ee-web-development-where-do-i-start-and-what-skills-do-i-need\">Java / Jakarta EE web development, where do I start and what skills do I need?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/65703840/how-to-properly-configure-jakarta-ee-libraries-in-maven-pom-xml-for-tomcat/65704617#65704617\">How to properly configure Jakarta EE libraries in Maven pom.xml for Tomcat?</a></li>\n</ul>\n<hr />\n<blockquote>\n<p><em>Are EJB/Spring different implementations of Jakarta EE?</em></p>\n</blockquote>\n<p>No, as said, EJB is part of Jakarta EE. Spring is a standalone framework which substitutes and improves many parts of Jakarta EE. Spring doesn't necessarily require Jakarta EE to run. A bare-bones servlet container like Tomcat is already sufficient. Simply put, Spring is a competitor of Jakarta EE. E.g. &quot;Spring&quot; (standalone) competes EJB/JTA, Spring MVC competes Faces/REST/MVC, Spring DI/IoC/AOP competes CDI, Spring Security competes JASPIC/Security, Spring Boot competes MicroProfile, etc.</p>\n<p>Back during the old J2EE/EJB2 times, the EJB2 API was terrible to implement and maintain. Spring was then a much better alternative to EJB2. But since EJB3 (Java EE 5), the EJB API was much improved based on lessons learnt from Spring. Since CDI (Java EE 6), there's not really a reason to look at again <em>another</em> framework like Spring to make the developers more easy as to developing among others the service layer.</p>\n<p>Only when you're using a bare-bones servlet container such as Tomcat and can't move on to a Jakarta EE server, then Spring is more attractive as it's easier to install Spring on Tomcat. It isn't possible to install e.g. an EJB container on Tomcat without modifying the server itself, you would basically be reinventing TomEE.</p>\n<h3>See also:</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/18369356/when-is-it-necessary-or-convenient-to-use-springjsf2-or-ejb3jsf2-or-all-of-the\">When is it necessary or convenient to use Spring or EJB3 or all of them together?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/18744910/using-jsf-as-view-technology-of-spring-mvc\">Using JSF as view technology of Spring MVC</a></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":426809,"reputation":3789,"user_id":808237,"accept_rate":67,"display_name":"Tair"},"score":4,"creation_date":1441570391,"post_id":32427707,"comment_id":52720849,"body_markdown":"This answer doesn&#39;t add anything to previous answers. Moreover, it is not accurate: only one concrete implementation is Reference, the others are not. Minor one: Spring integrates with JavaEE, but can work without it just fine.","body":"This answer doesn&#39;t add anything to previous answers. Moreover, it is not accurate: only one concrete implementation is Reference, the others are not. Minor one: Spring integrates with JavaEE, but can work without it just fine."},{"owner":{"account_id":2193313,"reputation":1102,"user_id":1939735,"accept_rate":93,"display_name":"SoftwareDeveloper"},"score":0,"creation_date":1441572597,"post_id":32427707,"comment_id":52721511,"body_markdown":"@tair Yes only 1 concrete implementation is regarded as the &#39;Reference&#39; for e.g. JPA has numerous implementations but only EclipseLink is the RI. When i mentioned RI i was meaning across the different APIs. i think you misunderstood my answer above. Also, yes, Spring integrates with JavaEE which is what i mentioned above.","body":"@tair Yes only 1 concrete implementation is regarded as the &#39;Reference&#39; for e.g. JPA has numerous implementations but only EclipseLink is the RI. When i mentioned RI i was meaning across the different APIs. i think you misunderstood my answer above. Also, yes, Spring integrates with JavaEE which is what i mentioned above."}],"tags":[],"owner":{"account_id":2193313,"reputation":1102,"user_id":1939735,"accept_rate":93,"display_name":"SoftwareDeveloper"},"comment_count":2,"down_vote_count":9,"up_vote_count":3,"is_accepted":false,"score":-6,"last_activity_date":1441569555,"creation_date":1441569555,"answer_id":32427707,"question_id":7295096,"body_markdown":"To put simply - JavaEE is a platform. \r\n\r\nIt is made up of many specifications which are just APIs. The specific concrete implementations of these APIs are the so called &#39;Reference Implementation&#39;\r\n\r\n1. EJB is just one specification within the JavaEE platform\r\n2. No, Spring is a application framework that can allow you/has support for you to develop JavaEE applications\r\n\r\nEJB is Enterprise Java Beans","title":"What exactly is Java EE?","body":"<p>To put simply - JavaEE is a platform. </p>\n\n<p>It is made up of many specifications which are just APIs. The specific concrete implementations of these APIs are the so called 'Reference Implementation'</p>\n\n<ol>\n<li>EJB is just one specification within the JavaEE platform</li>\n<li>No, Spring is a application framework that can allow you/has support for you to develop JavaEE applications</li>\n</ol>\n\n<p>EJB is Enterprise Java Beans</p>\n"},{"tags":[],"owner":{"account_id":22464012,"reputation":5,"user_id":16665454,"display_name":"Ravi R. Oza"},"comment_count":0,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1631812729,"creation_date":1631812729,"answer_id":69212663,"question_id":7295096,"body_markdown":"J2EE/JEE/Jakarta EE\r\n\r\n - Java Enterprise Edition (JEE) is used to develop distributed application &amp;\r\n   web services. \r\n - Itโs a component based approach to develop web app.\r\n - JEE web apps are considered as 3 tiered apps, since it is divided on 3   \r\n   different machines/tiers\r\n    - Client (Presentation) \r\n    - J2EE sever (Application/Business)\r\n    - Database (Data Access)","title":"What exactly is Java EE?","body":"<p>J2EE/JEE/Jakarta EE</p>\n<ul>\n<li>Java Enterprise Edition (JEE) is used to develop distributed application &amp;\nweb services.</li>\n<li>Itโs a component based approach to develop web app.</li>\n<li>JEE web apps are considered as 3 tiered apps, since it is divided on 3<br />\ndifferent machines/tiers\n<ul>\n<li>Client (Presentation)</li>\n<li>J2EE sever (Application/Business)</li>\n<li>Database (Data Access)</li>\n</ul>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":22063167,"reputation":339,"user_id":16325455,"display_name":"Spyros"},"comment_count":0,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1640792886,"creation_date":1640792886,"answer_id":70521731,"question_id":7295096,"body_markdown":"Everything you need to know about Java EE may be found by starting @ [Oracle official website][1], among other. You may also find interesting to read the [specification APIs for release 8][2]. It is worth taking the time to go through the [Java EE 8 tutorial][3]. You may want to start with it actually, because it provides a very good overview of the whole platform.\r\n\r\n\r\n  [1]: https://www.oracle.com/java/technologies/java-ee-glance.html\r\n  [2]: https://javaee.github.io/javaee-spec/javadocs/\r\n  [3]: https://javaee.github.io/tutorial/toc.html","title":"What exactly is Java EE?","body":"<p>Everything you need to know about Java EE may be found by starting @ <a href=\"https://www.oracle.com/java/technologies/java-ee-glance.html\" rel=\"nofollow noreferrer\">Oracle official website</a>, among other. You may also find interesting to read the <a href=\"https://javaee.github.io/javaee-spec/javadocs/\" rel=\"nofollow noreferrer\">specification APIs for release 8</a>. It is worth taking the time to go through the <a href=\"https://javaee.github.io/tutorial/toc.html\" rel=\"nofollow noreferrer\">Java EE 8 tutorial</a>. You may want to start with it actually, because it provides a very good overview of the whole platform.</p>\n"}],"owner":{"account_id":887929,"reputation":1919,"user_id":926906,"display_name":"Frank Zimmer"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66631,"favorite_count":0,"down_vote_count":2,"up_vote_count":192,"answer_count":6,"score":190,"last_activity_date":1685534080,"creation_date":1315075347,"question_id":7295096,"body_markdown":"I have been doing Java SE for some years now and moving on to Java EE. However, I have some trouble understanding some aspects of Java EE.\r\n\r\n1. Is Java EE just a specification? What I mean is: Is EJB Java EE?  \r\n\r\n2. Are EJB/Spring different implementations of Java EE?\r\n\r\nI am sorry to ask but I have some difficulties to understand what Java EE is.  \r\n\r\n**Could someone explain what Java EE is? And EJB?**","title":"What exactly is Java EE?","body":"<p>I have been doing Java SE for some years now and moving on to Java EE. However, I have some trouble understanding some aspects of Java EE.</p>\n\n<ol>\n<li><p>Is Java EE just a specification? What I mean is: Is EJB Java EE?  </p></li>\n<li><p>Are EJB/Spring different implementations of Java EE?</p></li>\n</ol>\n\n<p>I am sorry to ask but I have some difficulties to understand what Java EE is.  </p>\n\n<p><strong>Could someone explain what Java EE is? And EJB?</strong></p>\n"},{"tags":["java","soap","service","cxf","ws-security"],"owner":{"account_id":18837021,"reputation":11,"user_id":13739445,"display_name":"Andre"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":296,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1685533234,"creation_date":1592049660,"question_id":62359460,"body_markdown":"I have created a java SOAP ws client for a SOAP web service which expects a username and a password inside a usernametoken element. I used cxf(3.3.2) to create my web service client.I have added as a dependecy cxf-rt-ws-security.My client code looks like this:\r\n\r\n    BindingProvider bp=(BindingProvider) port;\r\n    \r\n    bp.getRequestContext().put(SecurityConstants.USERNAME, username);\r\n    bp.getRequestContext().put(SecurityConstants.PASSWORD, password);\r\n\r\nThe problem is that the cxf automatically adds the &#39;tmu:Timestamp&#39; element at the SOAP header, but the web service does not like it, and I receive &quot;An error occurred when verifying security for the message.&quot;\r\nIf I remove manually the &#39;tmu:Timestamp&#39; element and send the request with SOAP UI, the request is sucessfully processed by the webservice.\r\n\r\nMy soap header looks like this:\r\n\r\n    &lt;soap:Header&gt;\r\n       &lt;wsse:Security xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot; xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; soap:mustUnderstand=&quot;true&quot;&gt;\r\n            &lt;wsu:Timestamp wsu:Id=&quot;TS-254d999a-5835-49ae-8acf-1f0d8821881b&quot;&gt;\r\n                \t\t&lt;wsu:Created&gt;2020-06-13T11:47:23.160Z&lt;/wsu:Created&gt;\r\n                \t\t&lt;wsu:Expires&gt;2020-06-13T11:52:23.160Z&lt;/wsu:Expires&gt;\r\n                &lt;/wsu:Timestamp&gt;\r\n                &lt;wsse:UsernameToken wsu:Id=&quot;UsernameToken-39e0a8f0-b3b3-4225-8270-375681fc1866&quot;&gt;\r\n                \t&lt;wsse:Username&gt;username&lt;/wsse:Username&gt;\r\n                \t&lt;wsse:Password Type=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText&quot;&gt;password&lt;/wsse:Password&gt;\r\n             &lt;/wsse:UsernameToken&gt;\r\n        &lt;/wsse:Security&gt;\r\n    &lt;/soap:Header&gt;\r\n\r\nI tried to remove the &#39;wsu:Timestamp&#39; element with a SOAPHandler but it failed.\r\nAny help will be usefull. :)\r\n\r\n\r\n\r\n","title":"How to remove cxf &#39;tmu:Timestamp&#39; from SOAP header","body":"<p>I have created a java SOAP ws client for a SOAP web service which expects a username and a password inside a usernametoken element. I used cxf(3.3.2) to create my web service client.I have added as a dependecy cxf-rt-ws-security.My client code looks like this:</p>\n\n<pre><code>BindingProvider bp=(BindingProvider) port;\n\nbp.getRequestContext().put(SecurityConstants.USERNAME, username);\nbp.getRequestContext().put(SecurityConstants.PASSWORD, password);\n</code></pre>\n\n<p>The problem is that the cxf automatically adds the 'tmu:Timestamp' element at the SOAP header, but the web service does not like it, and I receive \"An error occurred when verifying security for the message.\"\nIf I remove manually the 'tmu:Timestamp' element and send the request with SOAP UI, the request is sucessfully processed by the webservice.</p>\n\n<p>My soap header looks like this:</p>\n\n<pre><code>&lt;soap:Header&gt;\n   &lt;wsse:Security xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\" soap:mustUnderstand=\"true\"&gt;\n        &lt;wsu:Timestamp wsu:Id=\"TS-254d999a-5835-49ae-8acf-1f0d8821881b\"&gt;\n                    &lt;wsu:Created&gt;2020-06-13T11:47:23.160Z&lt;/wsu:Created&gt;\n                    &lt;wsu:Expires&gt;2020-06-13T11:52:23.160Z&lt;/wsu:Expires&gt;\n            &lt;/wsu:Timestamp&gt;\n            &lt;wsse:UsernameToken wsu:Id=\"UsernameToken-39e0a8f0-b3b3-4225-8270-375681fc1866\"&gt;\n                &lt;wsse:Username&gt;username&lt;/wsse:Username&gt;\n                &lt;wsse:Password Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText\"&gt;password&lt;/wsse:Password&gt;\n         &lt;/wsse:UsernameToken&gt;\n    &lt;/wsse:Security&gt;\n&lt;/soap:Header&gt;\n</code></pre>\n\n<p>I tried to remove the 'wsu:Timestamp' element with a SOAPHandler but it failed.\nAny help will be usefull. :)</p>\n"},{"tags":["java","hibernate","jdbc","transactions"],"answers":[{"comments":[{"owner":{"account_id":1769821,"reputation":8901,"user_id":1614870,"accept_rate":57,"display_name":"Abhijit Mazumder"},"score":0,"creation_date":1404448451,"post_id":24566723,"comment_id":38052405,"body_markdown":"Edward , Thanks for replying .I understand the Multiple statements or CRUD operation point. But If you see the documentation for even single select txn is used.","body":"Edward , Thanks for replying .I understand the Multiple statements or CRUD operation point. But If you see the documentation for even single select txn is used."},{"owner":{"account_id":1562954,"reputation":1027,"user_id":1452410,"display_name":"Ed Morales"},"score":0,"creation_date":1404448644,"post_id":24566723,"comment_id":38052444,"body_markdown":"On a select statement, to my knowledge, it doesnt really matter. It only matters on statements that modify the DB. Its probably done to keep the code uniform on how to access the DB. Or maybe thinking about the future since you may add code on that method to modify the DB after querying it later on.","body":"On a select statement, to my knowledge, it doesnt really matter. It only matters on statements that modify the DB. Its probably done to keep the code uniform on how to access the DB. Or maybe thinking about the future since you may add code on that method to modify the DB after querying it later on."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1404454227,"post_id":24566723,"comment_id":38054151,"body_markdown":"@AbhijitMazumder Most databases require that everything is executed in a transaction. And databases that do allow doing it without a transaction, will internally wrap the statement in a transaction. That is because transactions are fundamental to how a database works when it tries to guarantee the ACID properties.","body":"@AbhijitMazumder Most databases require that everything is executed in a transaction. And databases that do allow doing it without a transaction, will internally wrap the statement in a transaction. That is because transactions are fundamental to how a database works when it tries to guarantee the ACID properties."},{"owner":{"account_id":1769821,"reputation":8901,"user_id":1614870,"accept_rate":57,"display_name":"Abhijit Mazumder"},"score":0,"creation_date":1404463745,"post_id":24566723,"comment_id":38058664,"body_markdown":"Totally understand that point. Trying to understand if it makes any difference using explicit transaction","body":"Totally understand that point. Trying to understand if it makes any difference using explicit transaction"}],"tags":[],"owner":{"account_id":1562954,"reputation":1027,"user_id":1452410,"display_name":"Ed Morales"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1404448196,"creation_date":1404448196,"answer_id":24566723,"question_id":24566636,"body_markdown":"If its one statement you wouldnt tell the difference, but if you are trying to do ***multiple statements*** in a ***single*** transaction you would see what they are for.\r\n\r\nIf you open a transaction and attempt multiple `CRUD` operations and one fails, you can roll back the transaction and pretty much go back to a previous state within the transaction (even before everything). \r\n\r\nOn the other hand, if you dont open a transaction, its opened and closed implicitly every time you use a statement so if you do multiple `CRUD` operations and one fails, there is no way to roll back the data and you will end up with bad data.\r\n\r\nSide note : this doesnt really matter for ***select*** statements","title":"Hibernate get without explicit Transaction","body":"<p>If its one statement you wouldnt tell the difference, but if you are trying to do <strong><em>multiple statements</em></strong> in a <strong><em>single</em></strong> transaction you would see what they are for.</p>\n\n<p>If you open a transaction and attempt multiple <code>CRUD</code> operations and one fails, you can roll back the transaction and pretty much go back to a previous state within the transaction (even before everything). </p>\n\n<p>On the other hand, if you dont open a transaction, its opened and closed implicitly every time you use a statement so if you do multiple <code>CRUD</code> operations and one fails, there is no way to roll back the data and you will end up with bad data.</p>\n\n<p>Side note : this doesnt really matter for <strong><em>select</em></strong> statements</p>\n"}],"owner":{"account_id":1769821,"reputation":8901,"user_id":1614870,"accept_rate":57,"display_name":"Abhijit Mazumder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2353,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1685532992,"creation_date":1404447531,"question_id":24566636,"body_markdown":"I am trying to understand the reason behind using transaction in the following piece of code retrieved from Hibernate Documentation.\r\n\r\n\r\n\r\n\r\n    Session session1 = factory1.openSession();\r\n    Transaction tx1 = session1.beginTransaction();\r\n    Cat cat = session1.get(Cat.class, catId);\r\n    tx1.commit();\r\n    session1.close();\r\n    //reconcile with a second database\r\n    Session session2 = factory2.openSession();\r\n    Transaction tx2 = session2.beginTransaction();\r\n    session2.replicate(cat, ReplicationMode.LATEST_VERSION);\r\n    tx2.commit();\r\n    session2.close();\r\n\r\n\r\nWhat I understand from this [JBOSS Docs][1] that even though if I dont use a transaction that should not be a problem in this case. Can some body educate me more on this in terms of isolation etc . what actually happens if we do or dont use transaction in the above scenario\r\n\r\n*Working nontransactionally with Hibernate\r\nLook at the following code, which accesses the database without transaction boundaries:*\r\n\r\n    Session session = sessionFactory.openSession();   \r\n    session.get(Item.class, 123l);   \r\n    session.close();   \r\n     \r\n\r\n*By default, in a Java SE environment with a JDBC configuration, this is what happens if you execute this snippet:\r\n1. A new Session is opened. It doesnโt obtain a database connection at this point.\r\n2. The call to get() triggers an SQL SELECT. The Session now obtains a JDBC Connection from the connection pool. Hibernate, by default, immediately turns off the autocommit mode on this connection with setAutoCommit(false). This effectively starts a JDBC transaction!\r\n3. The SELECT is executed inside this JDBC transaction. The Session is closed, and the connection is returned to the pool and released by Hibernate โ Hibernate calls close() on the JDBC Connection. What happens to the uncommitted transaction?   The answer to that question is, โIt depends!โ The JDBC specification doesnโt say anything about pending transactions when close() is called on a connection. What happens depends on how the vendors implement the specification. With Oracle JDBC drivers, for example, the call to close() commits the transaction! Most other JDBC vendors take the sane route and roll back any pending transaction when the JDBC Connection object is closed and the resource is returned to the pool. Obviously, this wonโt be a problem for the SELECT youโve executed, but look at this variation:*\r\n\r\n\r\n[1]: https://developer.jboss.org/docs/DOC-13953","title":"Hibernate get without explicit Transaction","body":"<p>I am trying to understand the reason behind using transaction in the following piece of code retrieved from Hibernate Documentation.</p>\n<pre><code>Session session1 = factory1.openSession();\nTransaction tx1 = session1.beginTransaction();\nCat cat = session1.get(Cat.class, catId);\ntx1.commit();\nsession1.close();\n//reconcile with a second database\nSession session2 = factory2.openSession();\nTransaction tx2 = session2.beginTransaction();\nsession2.replicate(cat, ReplicationMode.LATEST_VERSION);\ntx2.commit();\nsession2.close();\n</code></pre>\n<p>What I understand from this <a href=\"https://developer.jboss.org/docs/DOC-13953\" rel=\"nofollow noreferrer\">JBOSS Docs</a> that even though if I dont use a transaction that should not be a problem in this case. Can some body educate me more on this in terms of isolation etc . what actually happens if we do or dont use transaction in the above scenario</p>\n<p><em>Working nontransactionally with Hibernate\nLook at the following code, which accesses the database without transaction boundaries:</em></p>\n<pre><code>Session session = sessionFactory.openSession();   \nsession.get(Item.class, 123l);   \nsession.close();   \n \n</code></pre>\n<p>*By default, in a Java SE environment with a JDBC configuration, this is what happens if you execute this snippet:</p>\n<ol>\n<li>A new Session is opened. It doesnโt obtain a database connection at this point.</li>\n<li>The call to get() triggers an SQL SELECT. The Session now obtains a JDBC Connection from the connection pool. Hibernate, by default, immediately turns off the autocommit mode on this connection with setAutoCommit(false). This effectively starts a JDBC transaction!</li>\n<li>The SELECT is executed inside this JDBC transaction. The Session is closed, and the connection is returned to the pool and released by Hibernate โ Hibernate calls close() on the JDBC Connection. What happens to the uncommitted transaction?   The answer to that question is, โIt depends!โ The JDBC specification doesnโt say anything about pending transactions when close() is called on a connection. What happens depends on how the vendors implement the specification. With Oracle JDBC drivers, for example, the call to close() commits the transaction! Most other JDBC vendors take the sane route and roll back any pending transaction when the JDBC Connection object is closed and the resource is returned to the pool. Obviously, this wonโt be a problem for the SELECT youโve executed, but look at this variation:*</li>\n</ol>\n"},{"tags":["java","multithreading","concurrency","java-threads","thread-synchronization"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1684585557,"post_id":76295207,"comment_id":134540384,"body_markdown":"`ada.wait()` will only stop blocking, when `ada.notify()` or `ada.notifyAll()` has been called after `t2` has called `ada.wait()`. For me, the logic of the program looks broken.","body":"<code>ada.wait()</code> will only stop blocking, when <code>ada.notify()</code> or <code>ada.notifyAll()</code> has been called after <code>t2</code> has called <code>ada.wait()</code>. For me, the logic of the program looks broken."}],"answers":[{"comments":[{"owner":{"account_id":28615449,"reputation":21,"user_id":21909563,"display_name":"pure21_h"},"score":1,"creation_date":1684585821,"post_id":76295221,"comment_id":134540413,"body_markdown":"Thanks, that really helps me! Wasn&#39;t really understand how to use 2 different objects, but you make it clear. Solved","body":"Thanks, that really helps me! Wasn&#39;t really understand how to use 2 different objects, but you make it clear. Solved"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1684589653,"post_id":76295221,"comment_id":134540937,"body_markdown":"As an aside: this program has the potential to deadlock. Thread `t2` can reach `den.notifyAll()` before `t1` reaches `den.wait()`. It is not sufficient to call `start()`on `t1` before calling `start()`on `t2` to prevent this problem.","body":"As an aside: this program has the potential to deadlock. Thread <code>t2</code> can reach <code>den.notifyAll()</code> before <code>t1</code> reaches <code>den.wait()</code>. It is not sufficient to call <code>start()</code>on <code>t1</code> before calling <code>start()</code>on <code>t2</code> to prevent this problem."},{"owner":{"account_id":28615449,"reputation":21,"user_id":21909563,"display_name":"pure21_h"},"score":0,"creation_date":1684592586,"post_id":76295221,"comment_id":134541262,"body_markdown":"@Turing85 Thank for your remark.\nnow my code looks like that:\n`thread 1: run() {\nsout(&quot;Thread 1 ada&quot;);\nsynchronized (ada) {\nada.notifyAll(); }\n\t\n       \nthread 2: run() {\n synchronized (ada) {\n try {\nada.wait(100); }`\nis there the same deadlock potential?","body":"@Turing85 Thank for your remark. now my code looks like that: <code>thread 1: run() { sout(&quot;Thread 1 ada&quot;); synchronized (ada) { ada.notifyAll(); } \t         thread 2: run() {  synchronized (ada) {  try { ada.wait(100); }</code> is there the same deadlock potential?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1684592955,"post_id":76295221,"comment_id":134541309,"body_markdown":"not the same, but another (if `t1` is started way before `t2`): `t1` could call `ada.notifyAll()` before `t2` calls `ada.wait()`. the problem is generally not easy to solve, and needs additional constructs.","body":"not the same, but another (if <code>t1</code> is started way before <code>t2</code>): <code>t1</code> could call <code>ada.notifyAll()</code> before <code>t2</code> calls <code>ada.wait()</code>. the problem is generally not easy to solve, and needs additional constructs."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1684846544,"post_id":76295221,"comment_id":134574356,"body_markdown":"Itโs worth reading the API Note of [`wait(long timeoutMillis, int nanos)`โs documentation](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html#wait(long,int)) In real applications, a thread doesnโt wait for another thread. A thread will wait for a certain *condition* which another thread may make true. As the documentation states, this condition should be checked with a loop within the `synchronized` block, to ensure not to miss if the condition is already fulfilled and to protect against spurious wakeups and other problematic scenarios.","body":"Itโs worth reading the API Note of <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html#wait(long,int)\" rel=\"nofollow noreferrer\"><code>wait(long timeoutMillis, int nanos)</code>โs documentation</a> In real applications, a thread doesnโt wait for another thread. A thread will wait for a certain <i>condition</i> which another thread may make true. As the documentation states, this condition should be checked with a loop within the <code>synchronized</code> block, to ensure not to miss if the condition is already fulfilled and to protect against spurious wakeups and other problematic scenarios."}],"tags":[],"owner":{"account_id":27780880,"reputation":47,"user_id":21209255,"display_name":"Muhammadqodir Muhsinov"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1685031540,"creation_date":1684585499,"answer_id":76295221,"question_id":76295207,"body_markdown":"In order to achieve the desired output where &quot;Thread 1 den&quot; is printed before &quot;Thread 2 den&quot;, and &quot;Thread 1 ada&quot; is printed before &quot;Thread 2 ada&quot;, you can use wait() and notifyAll() methods to synchronize the execution of the threads. Here&#39;s an updated version of your code:\r\n\r\n        class MyThreads {\r\n        public final static Object den = new Object();\r\n        public final static Object ada = new Object();\r\n    \r\n        public static Thread t1 = new Thread() {\r\n            public void run() {\r\n                System.out.println(&quot;Thread 1 den&quot;);\r\n                synchronized (den) {\r\n                    try {\r\n                        den.wait();  // Wait until den is notified\r\n                    } catch (InterruptedException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n                System.out.println(&quot;Thread 1 ada&quot;);\r\n                \r\n                synchronized (ada) {\r\n                    ada.notifyAll();  // Notify ada to wake up Thread 2\r\n                }\r\n            }\r\n        };\r\n    \r\n        public static Thread t2 = new Thread() {\r\n            public void run() {\r\n                synchronized (den) {\r\n                System.out.println(&quot;Thread 2 den&quot;);\r\n                den.notifyAll();\r\n                }\r\n\r\n                synchronized (ada) {\r\n                    try {\r\n                        ada.wait();  // Wait until ada is notified\r\n                    } catch (InterruptedException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n                System.out.println(&quot;Thread 2 ada&quot;);\r\n            }\r\n        };\r\n    }\r\n\r\nIn the updated code, the t1 thread first enters a synchronized block on den and calls den.wait(). This causes t1 to wait until it is notified by another thread. Meanwhile, t2 thread is executed and it enters a synchronized block on den and calls den.notifyAll(), which wakes up the waiting t1 thread.\r\n\r\nAfter t1 is awakened, it prints &quot;Thread 1 den&quot;. Then, it enters a synchronized block on ada and calls ada.notifyAll(), which wakes up the waiting t2 thread.\r\n\r\nFinally, t2 is awakened and it prints &quot;Thread 2 ada&quot;.\r\n\r\nBy using wait() and notifyAll() methods along with synchronized blocks, you can control the order of execution between the threads and achieve the desired output.\r\n\r\n","title":"How to properly synchronized 2 threads on 2 different objects in Java with wait/notify?","body":"<p>In order to achieve the desired output where &quot;Thread 1 den&quot; is printed before &quot;Thread 2 den&quot;, and &quot;Thread 1 ada&quot; is printed before &quot;Thread 2 ada&quot;, you can use wait() and notifyAll() methods to synchronize the execution of the threads. Here's an updated version of your code:</p>\n<pre><code>    class MyThreads {\n    public final static Object den = new Object();\n    public final static Object ada = new Object();\n\n    public static Thread t1 = new Thread() {\n        public void run() {\n            System.out.println(&quot;Thread 1 den&quot;);\n            synchronized (den) {\n                try {\n                    den.wait();  // Wait until den is notified\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n            System.out.println(&quot;Thread 1 ada&quot;);\n            \n            synchronized (ada) {\n                ada.notifyAll();  // Notify ada to wake up Thread 2\n            }\n        }\n    };\n\n    public static Thread t2 = new Thread() {\n        public void run() {\n            synchronized (den) {\n            System.out.println(&quot;Thread 2 den&quot;);\n            den.notifyAll();\n            }\n\n            synchronized (ada) {\n                try {\n                    ada.wait();  // Wait until ada is notified\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n            System.out.println(&quot;Thread 2 ada&quot;);\n        }\n    };\n}\n</code></pre>\n<p>In the updated code, the t1 thread first enters a synchronized block on den and calls den.wait(). This causes t1 to wait until it is notified by another thread. Meanwhile, t2 thread is executed and it enters a synchronized block on den and calls den.notifyAll(), which wakes up the waiting t1 thread.</p>\n<p>After t1 is awakened, it prints &quot;Thread 1 den&quot;. Then, it enters a synchronized block on ada and calls ada.notifyAll(), which wakes up the waiting t2 thread.</p>\n<p>Finally, t2 is awakened and it prints &quot;Thread 2 ada&quot;.</p>\n<p>By using wait() and notifyAll() methods along with synchronized blocks, you can control the order of execution between the threads and achieve the desired output.</p>\n"},{"tags":[],"owner":{"account_id":28718697,"reputation":1,"user_id":21992811,"display_name":"user21992811"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685532700,"creation_date":1685532700,"answer_id":76373030,"question_id":76295207,"body_markdown":"\r\n[The javadoc for Object.wait(...) methods](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)) advises this:\r\n&gt; The recommended approach to waiting is to check the condition being awaited in a while loop around the call to wait, as shown in the example below. Among other things, this approach avoids problems that can be caused by spurious wakeups.\r\n&gt;\r\n&gt; ```\r\n&gt;    synchronized (obj) {\r\n&gt;        while (&lt;condition does not hold&gt; and &lt;timeout not exceeded&gt;) {\r\n&gt;            long timeoutMillis = ... ; // recompute timeout values\r\n&gt;            int nanos = ... ;\r\n&gt;            obj.wait(timeoutMillis, nanos);\r\n&gt;        }\r\n&gt;        ... // Perform action appropriate to condition or timeout\r\n&gt;    }\r\n&gt; ```\r\n\r\nSo you can do something like this:\r\n\r\n```\r\nclass MyThreads {\r\n  final static Object lockObj = new Object();\r\n  static int lineToPrint;\r\n  \r\n  static {\r\n    synchronized (lockObj) {\r\n      lineToPrint = 1;\r\n    }\r\n  }\r\n\r\n  public static Thread t1 = new Thread() {\r\n    public void run() {\r\n      waitThenPrintLine(1, &quot;Thread 1 den&quot;);\r\n      waitThenPrintLine(3, &quot;Thread 1 ada&quot;);\r\n    }\r\n  };\r\n\r\n  public static Thread t2 = new Thread() {\r\n    public void run() {\r\n      waitThenPrintLine(2, &quot;Thread 2 den&quot;);\r\n      waitThenPrintLine(4, &quot;Thread 2 ada&quot;);\r\n    }\r\n  };\r\n\r\n  static void waitThenPrintLine(int lineNumber, String lineText) {\r\n    try {\r\n      synchronized (lockObj) {\r\n        // wait for the given lineNumber\r\n        while (lineToPrint != lineNumber) {\r\n          lockObj.wait();\r\n        }\r\n\r\n        System.out.println(lineText);\r\n\r\n        // increment lineToPrint and notify another thread about that\r\n        lineToPrint++;\r\n        lockObj.notify();\r\n      }\r\n    } catch (InterruptedException e) {\r\n      throw new Error(e);\r\n    }\r\n  }\r\n}\r\n```","title":"How to properly synchronized 2 threads on 2 different objects in Java with wait/notify?","body":"<p><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)\" rel=\"nofollow noreferrer\">The javadoc for Object.wait(...) methods</a> advises this:</p>\n<blockquote>\n<p>The recommended approach to waiting is to check the condition being awaited in a while loop around the call to wait, as shown in the example below. Among other things, this approach avoids problems that can be caused by spurious wakeups.</p>\n<pre><code>   synchronized (obj) {\n       while (&lt;condition does not hold&gt; and &lt;timeout not exceeded&gt;) {\n           long timeoutMillis = ... ; // recompute timeout values\n           int nanos = ... ;\n           obj.wait(timeoutMillis, nanos);\n       }\n       ... // Perform action appropriate to condition or timeout\n   }\n</code></pre>\n</blockquote>\n<p>So you can do something like this:</p>\n<pre><code>class MyThreads {\n  final static Object lockObj = new Object();\n  static int lineToPrint;\n  \n  static {\n    synchronized (lockObj) {\n      lineToPrint = 1;\n    }\n  }\n\n  public static Thread t1 = new Thread() {\n    public void run() {\n      waitThenPrintLine(1, &quot;Thread 1 den&quot;);\n      waitThenPrintLine(3, &quot;Thread 1 ada&quot;);\n    }\n  };\n\n  public static Thread t2 = new Thread() {\n    public void run() {\n      waitThenPrintLine(2, &quot;Thread 2 den&quot;);\n      waitThenPrintLine(4, &quot;Thread 2 ada&quot;);\n    }\n  };\n\n  static void waitThenPrintLine(int lineNumber, String lineText) {\n    try {\n      synchronized (lockObj) {\n        // wait for the given lineNumber\n        while (lineToPrint != lineNumber) {\n          lockObj.wait();\n        }\n\n        System.out.println(lineText);\n\n        // increment lineToPrint and notify another thread about that\n        lineToPrint++;\n        lockObj.notify();\n      }\n    } catch (InterruptedException e) {\n      throw new Error(e);\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":28615449,"reputation":21,"user_id":21909563,"display_name":"pure21_h"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76295221,"answer_count":2,"score":0,"last_activity_date":1685532700,"creation_date":1684585288,"question_id":76295207,"body_markdown":"I am learning synchronization in Java. I know this is a very basic question, but I can&#39;t figure it out.\r\n\r\nI have class which contains 2 different objects and 2 Threads.\r\n```\r\nclass MyThreads {\r\n\tpublic final static Object den = new Object();\r\n\tpublic final static Object ada = new Object();\r\n\r\n\tpublic static Thread t1 = new Thread() {\r\n\t\tpublic void run() {\r\n\t\t\tSystem.out.println(&quot;Thread 1 den&quot;);\r\n\t\t\tSystem.out.println(&quot;Thread 1 ada&quot;);\r\n\t\t}\r\n\t};\r\n\r\n\tpublic static Thread t2 = new Thread() {\r\n\t\tpublic void run() {\r\n\t\t      System.out.println(&quot;Thread 2 den&quot;);\r\n\t\t      System.out.println(&quot;Thread 2 ada&quot;);\r\n\t\t}\r\n\t};\r\n}\r\n```\r\nAfter execute this code:\r\n```\r\nMyThreads.t1.start();\r\nMyThreads.t2.start();\r\n\r\n```\r\nI should get:\r\n\r\n```\r\nThread 1 den\r\nThread 2 den\r\nThread 1 ada\r\nThread 2 ada\r\n```\r\n\r\nI am struggling here. I don&#39;t understand how thread 1 can awake thread 2. \r\n\r\n```\r\npublic static Thread t1 = new Thread() {\r\n\t\tpublic void run() {\r\n\t\t\tSystem.out.println(&quot;Thread 1 den&quot;);\r\n\t\t\tsynchronized (den) {\r\n\t\t\t\ttry {   \r\n                    den.notifyAll();\r\n\t\t\t\t\tden.wait();\r\n\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\npublic static Thread t2 = new Thread() {\r\n\t\tpublic void run() {\r\n\t\t\tsynchronized (ada){\r\n                        ada.wait();\r\n//                     How to awake it?\r\n                        }\r\n\t\t}\r\n\t};\r\n\r\n```\r\nI will be thankful for any advice!\r\n","title":"How to properly synchronized 2 threads on 2 different objects in Java with wait/notify?","body":"<p>I am learning synchronization in Java. I know this is a very basic question, but I can't figure it out.</p>\n<p>I have class which contains 2 different objects and 2 Threads.</p>\n<pre><code>class MyThreads {\n    public final static Object den = new Object();\n    public final static Object ada = new Object();\n\n    public static Thread t1 = new Thread() {\n        public void run() {\n            System.out.println(&quot;Thread 1 den&quot;);\n            System.out.println(&quot;Thread 1 ada&quot;);\n        }\n    };\n\n    public static Thread t2 = new Thread() {\n        public void run() {\n              System.out.println(&quot;Thread 2 den&quot;);\n              System.out.println(&quot;Thread 2 ada&quot;);\n        }\n    };\n}\n</code></pre>\n<p>After execute this code:</p>\n<pre><code>MyThreads.t1.start();\nMyThreads.t2.start();\n\n</code></pre>\n<p>I should get:</p>\n<pre><code>Thread 1 den\nThread 2 den\nThread 1 ada\nThread 2 ada\n</code></pre>\n<p>I am struggling here. I don't understand how thread 1 can awake thread 2.</p>\n<pre><code>public static Thread t1 = new Thread() {\n        public void run() {\n            System.out.println(&quot;Thread 1 den&quot;);\n            synchronized (den) {\n                try {   \n                    den.notifyAll();\n                    den.wait();\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n    };\n\npublic static Thread t2 = new Thread() {\n        public void run() {\n            synchronized (ada){\n                        ada.wait();\n//                     How to awake it?\n                        }\n        }\n    };\n\n</code></pre>\n<p>I will be thankful for any advice!</p>\n"},{"tags":["java","constants"],"answers":[{"tags":[],"owner":{"account_id":169521,"reputation":37107,"user_id":395659,"accept_rate":90,"display_name":"CloudyMarble"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1358232308,"creation_date":1358231520,"answer_id":14332283,"question_id":14332252,"body_markdown":"declaring it `static` enables you accessing the variale without creating an ojbect of the type .","title":"constant data member","body":"<p>declaring it <code>static</code> enables you accessing the variale without creating an ojbect of the type .</p>\n"},{"tags":[],"owner":{"account_id":1073435,"reputation":12390,"user_id":1072150,"accept_rate":75,"display_name":"EJK"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1358231533,"creation_date":1358231533,"answer_id":14332285,"question_id":14332252,"body_markdown":"The &quot;final&quot; identifier means that the variable&#39;s value cannot be changed.\r\n\r\n&quot;static&quot; however means that there is one instance of the variable within the class that it is defined. \r\n\r\nSo final and static are 2 different things, but you often see them used together to define constants for a class.","title":"constant data member","body":"<p>The \"final\" identifier means that the variable's value cannot be changed.</p>\n\n<p>\"static\" however means that there is one instance of the variable within the class that it is defined. </p>\n\n<p>So final and static are 2 different things, but you often see them used together to define constants for a class.</p>\n"},{"tags":[],"owner":{"account_id":1507235,"reputation":6056,"user_id":1410342,"accept_rate":95,"display_name":"NoNaMe"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1358232042,"creation_date":1358231738,"answer_id":14332319,"question_id":14332252,"body_markdown":"**One reason could** be that you do not need to create an object of the class to access that constant that is why you should/may declarer it as `static`. As you can access it with class name as it is static.\r\n\r\nCheck this code\r\n\r\n    public class A{\r\n    public static final int aa = 1;\r\n    }\r\n    \r\n    public class B{\r\n    public final int bb = 1;\r\n    }\r\n    \r\n    public class Testing{\r\n    SOP(A.aa);// a can be accessed with class name\r\n    B b = new B();// where to access the constant bb we need to create class object \r\n    SOP(b.bb);\r\n    }","title":"constant data member","body":"<p><strong>One reason could</strong> be that you do not need to create an object of the class to access that constant that is why you should/may declarer it as <code>static</code>. As you can access it with class name as it is static.</p>\n\n<p>Check this code</p>\n\n<pre><code>public class A{\npublic static final int aa = 1;\n}\n\npublic class B{\npublic final int bb = 1;\n}\n\npublic class Testing{\nSOP(A.aa);// a can be accessed with class name\nB b = new B();// where to access the constant bb we need to create class object \nSOP(b.bb);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2157109,"reputation":3274,"user_id":1912077,"accept_rate":62,"display_name":"Renjith"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1358231766,"creation_date":1358231766,"answer_id":14332327,"question_id":14332252,"body_markdown":"A static variable means it is available at class level.Only one instance of that variable will be available for all objects of that class.Static variable can be modified, but the change will reflect in all objects of that class.\r\nA final variable means its value cannot be change after initialization.\r\nA final variable with static modifier means the variable is available at class level.In short, it will act as a constant for all objects of that class","title":"constant data member","body":"<p>A static variable means it is available at class level.Only one instance of that variable will be available for all objects of that class.Static variable can be modified, but the change will reflect in all objects of that class.\nA final variable means its value cannot be change after initialization.\nA final variable with static modifier means the variable is available at class level.In short, it will act as a constant for all objects of that class</p>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1685532664,"creation_date":1358231870,"answer_id":14332343,"question_id":14332252,"body_markdown":"`final` means the variable may not be reassigned to another object/primitive.\r\n\r\n`static` means that all code running in the JVM shares the same variable. It exists once per class, instead of once per object.\r\n\r\nA `final` non-static variable can not be reassigned, but each instance has its own copy.\r\n\r\n`static final` fields (accessible without creating an instance) are generally called &quot;Constants&quot;\r\n\r\n`final` (non static) instance variables are generally called &quot;Immutable fields&quot; ","title":"constant data member","body":"<p><code>final</code> means the variable may not be reassigned to another object/primitive.</p>\n<p><code>static</code> means that all code running in the JVM shares the same variable. It exists once per class, instead of once per object.</p>\n<p>A <code>final</code> non-static variable can not be reassigned, but each instance has its own copy.</p>\n<p><code>static final</code> fields (accessible without creating an instance) are generally called &quot;Constants&quot;</p>\n<p><code>final</code> (non static) instance variables are generally called &quot;Immutable fields&quot;</p>\n"},{"tags":[],"owner":{"account_id":2105298,"reputation":16079,"user_id":1871769,"accept_rate":60,"display_name":"Rahul"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1358232298,"creation_date":1358231996,"answer_id":14332363,"question_id":14332252,"body_markdown":"**final** means that, once assigned the value of variable cannot be modified.\r\n\r\n**static** means &quot;associated with the class&quot;; without it, the variable is associated with each instance of the class. if not, you&#39;ll have one for each instance you create. `static` means the variable will remain in memory for as long as the class is loaded\r\n\r\nThere is no point in declaring a variable like this. \r\n\r\n    public final int nVar = 12;\r\n\r\nIf this is not meant to be modified, why have one copy per instance.\r\n\r\nHence, Class *constants* need to be declared as `static final` where as the variables which you want to be *immutable* on per instance basis, you declare them as `final`","title":"constant data member","body":"<p><strong>final</strong> means that, once assigned the value of variable cannot be modified.</p>\n\n<p><strong>static</strong> means \"associated with the class\"; without it, the variable is associated with each instance of the class. if not, you'll have one for each instance you create. <code>static</code> means the variable will remain in memory for as long as the class is loaded</p>\n\n<p>There is no point in declaring a variable like this. </p>\n\n<pre><code>public final int nVar = 12;\n</code></pre>\n\n<p>If this is not meant to be modified, why have one copy per instance.</p>\n\n<p>Hence, Class <em>constants</em> need to be declared as <code>static final</code> where as the variables which you want to be <em>immutable</em> on per instance basis, you declare them as <code>final</code></p>\n"}],"owner":{"account_id":1406504,"reputation":2865,"user_id":1334073,"accept_rate":83,"display_name":"Viku"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2786,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":14332363,"answer_count":6,"score":3,"last_activity_date":1685532664,"creation_date":1358231339,"question_id":14332252,"body_markdown":"when we use final keyword that variable has been declared as constant then what is the necessity of using static ?\r\nI have seen in most of the places that we use\r\n\r\n `public static final int nVar = 12` \r\n\r\nfor constant data member .\r\n","title":"constant data member","body":"<p>when we use final keyword that variable has been declared as constant then what is the necessity of using static ?\nI have seen in most of the places that we use</p>\n\n<p><code>public static final int nVar = 12</code> </p>\n\n<p>for constant data member .</p>\n"},{"tags":["java","apache-kafka","apache-kafka-connect"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1685445000,"post_id":76363548,"comment_id":134657629,"body_markdown":"I don&#39;t think plugins are allowed to extend other connectors, only implement Connector interface... Note: You shouldn&#39;t put connect plugins as a subfolder of the broker classpath","body":"I don&#39;t think plugins are allowed to extend other connectors, only implement Connector interface... Note: You shouldn&#39;t put connect plugins as a subfolder of the broker classpath"},{"owner":{"account_id":18979715,"reputation":43,"user_id":13851333,"display_name":"Muhamed Risvan M S"},"score":0,"creation_date":1685446058,"post_id":76363548,"comment_id":134657851,"body_markdown":"I&#39;ve tried extending Connector interface as well, but the log is similar to that of above. The plugin is not added and when listing the available connectors I don&#39;t see my custom connector.","body":"I&#39;ve tried extending Connector interface as well, but the log is similar to that of above. The plugin is not added and when listing the available connectors I don&#39;t see my custom connector."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1685446217,"post_id":76363548,"comment_id":134657896,"body_markdown":"Not sure, really. I do know that Kafka isn&#39;t well tested on windows, so could be related to the issue","body":"Not sure, really. I do know that Kafka isn&#39;t well tested on windows, so could be related to the issue"}],"answers":[{"tags":[],"owner":{"account_id":18979715,"reputation":43,"user_id":13851333,"display_name":"Muhamed Risvan M S"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1685532651,"creation_date":1685532651,"answer_id":76373018,"question_id":76363548,"body_markdown":"Custom connector was able to load by using maven-assembly-plugin in pom.xml like \r\n\r\n    &lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.3.0&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;descriptorRefs&gt;\r\n    \t\t\t\t\t\t&lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n    \t\t\t\t\t&lt;/descriptorRefs&gt;\r\n    \t\t\t\t\t&lt;archive&gt;\r\n    \t\t\t\t\t\t&lt;manifest&gt;\r\n    \t\t\t\t\t\t\t&lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n    \t\t\t\t\t\t\t&lt;mainClass&gt;com.example.somedir.MainApplication&lt;/mainClass&gt;\r\n    \t\t\t\t\t\t&lt;/manifest&gt;\r\n    \t\t\t\t\t&lt;/archive&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;id&gt;assemble-all&lt;/id&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;single&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;  ","title":"Kafka Connect not loading custom connector","body":"<p>Custom connector was able to load by using maven-assembly-plugin in pom.xml like</p>\n<pre><code>&lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;descriptorRefs&gt;\n                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                    &lt;/descriptorRefs&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                            &lt;mainClass&gt;com.example.somedir.MainApplication&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;assemble-all&lt;/id&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;single&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;  \n</code></pre>\n"}],"owner":{"account_id":18979715,"reputation":43,"user_id":13851333,"display_name":"Muhamed Risvan M S"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76373018,"answer_count":1,"score":1,"last_activity_date":1685532651,"creation_date":1685439800,"question_id":76363548,"body_markdown":"I have created a custom connector which extends JdbcSinkConnector like this\r\n\r\n    public class CustomJdbcSinkConnector extends JdbcSinkConnector {\r\n    \r\n        @Override\r\n        public Class&lt;? extends Task&gt; taskClass() {\r\n            return CustomJdbcSinkTask.class;\r\n        }\r\n    \r\n        @Override\r\n        public String version() {\r\n            //version of your custom connector\r\n            return &quot;1.0.0&quot;;\r\n        }\r\n    }\r\n\r\n    public class CustomJdbcSinkTask extends JdbcSinkTask {\r\n    \r\n        private static final Logger log = LoggerFactory.getLogger(CustomJdbcSinkTask.class);\r\n    \r\n        ErrantRecordReporter reporter;\r\n        DatabaseDialect dialect;\r\n        JdbcSinkConfig config;\r\n        JdbcDbWriter writer;\r\n        int remainingRetries;\r\n        private Map&lt;String, String&gt; configProps;\r\n    \r\n    \r\n        @Override\r\n        public void put(Collection&lt;SinkRecord&gt; records) {\r\n            log.info(&quot;hello from custom put&quot;);\r\n            log.info(&quot;custom put method starting...&quot;);\r\n            JdbcSinkTask jdbcSinkTask = new JdbcSinkTask();\r\n            jdbcSinkTask.put(records);\r\n        }\r\n    }\r\n\r\nand I have taken the jar build and added its path to plugin.path in connect-distributed.properties\r\n\r\nThen started the kafka connect but this custom connector is not loading\r\n\r\nThe log shows,\r\n\r\n    [2023-05-30 14:54:01,585] INFO Loading plugin from: C:\\Kafka\\JDBC\\custom-jdbc-sink-1.0.0.jar (org.apache.kafka.connect.runtime.isolation.DelegatingClassLoader:275)\r\n    [2023-05-30 14:54:01,613] INFO Registered loader: PluginClassLoader{pluginLocation=file:/C:/Kafka/JDBC/custom-jdbc-sink-1.0.0.jar} (org.apache.kafka.connect.runtime.isolation.DelegatingClassLoader:297)\r\n\r\nIt is loaded and registered but the plugin is not added.The jar file is not corrupted, I can run it from the terminal.\r\n\r\n","title":"Kafka Connect not loading custom connector","body":"<p>I have created a custom connector which extends JdbcSinkConnector like this</p>\n<pre><code>public class CustomJdbcSinkConnector extends JdbcSinkConnector {\n\n    @Override\n    public Class&lt;? extends Task&gt; taskClass() {\n        return CustomJdbcSinkTask.class;\n    }\n\n    @Override\n    public String version() {\n        //version of your custom connector\n        return &quot;1.0.0&quot;;\n    }\n}\n\npublic class CustomJdbcSinkTask extends JdbcSinkTask {\n\n    private static final Logger log = LoggerFactory.getLogger(CustomJdbcSinkTask.class);\n\n    ErrantRecordReporter reporter;\n    DatabaseDialect dialect;\n    JdbcSinkConfig config;\n    JdbcDbWriter writer;\n    int remainingRetries;\n    private Map&lt;String, String&gt; configProps;\n\n\n    @Override\n    public void put(Collection&lt;SinkRecord&gt; records) {\n        log.info(&quot;hello from custom put&quot;);\n        log.info(&quot;custom put method starting...&quot;);\n        JdbcSinkTask jdbcSinkTask = new JdbcSinkTask();\n        jdbcSinkTask.put(records);\n    }\n}\n</code></pre>\n<p>and I have taken the jar build and added its path to plugin.path in connect-distributed.properties</p>\n<p>Then started the kafka connect but this custom connector is not loading</p>\n<p>The log shows,</p>\n<pre><code>[2023-05-30 14:54:01,585] INFO Loading plugin from: C:\\Kafka\\JDBC\\custom-jdbc-sink-1.0.0.jar (org.apache.kafka.connect.runtime.isolation.DelegatingClassLoader:275)\n[2023-05-30 14:54:01,613] INFO Registered loader: PluginClassLoader{pluginLocation=file:/C:/Kafka/JDBC/custom-jdbc-sink-1.0.0.jar} (org.apache.kafka.connect.runtime.isolation.DelegatingClassLoader:297)\n</code></pre>\n<p>It is loaded and registered but the plugin is not added.The jar file is not corrupted, I can run it from the terminal.</p>\n"},{"tags":["java","jersey","wadl"],"answers":[{"comments":[{"owner":{"account_id":7356440,"reputation":245,"user_id":5601029,"accept_rate":78,"display_name":"doughaase"},"score":0,"creation_date":1492117087,"post_id":43341597,"comment_id":73863811,"body_markdown":"Yes, partially correct! I only had to add &quot;com.&quot; at the start of the parameter-name that you used (on web.xml), and it worked. Thanks.","body":"Yes, partially correct! I only had to add &quot;com.&quot; at the start of the parameter-name that you used (on web.xml), and it worked. Thanks."},{"owner":{"account_id":9337172,"reputation":1341,"user_id":6931023,"accept_rate":50,"display_name":"gladiator"},"score":0,"creation_date":1492432508,"post_id":43341597,"comment_id":73958542,"body_markdown":"That might be due to jersey version difference.","body":"That might be due to jersey version difference."},{"owner":{"account_id":7356440,"reputation":245,"user_id":5601029,"accept_rate":78,"display_name":"doughaase"},"score":0,"creation_date":1492611678,"post_id":43341597,"comment_id":74051084,"body_markdown":"Oops, my mistake: it didn&#39;t worked... I was looking at a different log file. I tried with com.sun.jersey.config.server.wadl.disableWadl and jersey.config.server.wadl.disableWadl, and both didn&#39;t worked...","body":"Oops, my mistake: it didn&#39;t worked... I was looking at a different log file. I tried with com.sun.jersey.config.server.wadl.disableWadl and jersey.config.server.wadl.disableWadl, and both didn&#39;t worked..."},{"owner":{"account_id":2655485,"reputation":430,"user_id":2296285,"accept_rate":67,"display_name":"Gowthami Reddy"},"score":0,"creation_date":1650891800,"post_id":43341597,"comment_id":127223404,"body_markdown":"This worked for anyone? Not working for me.","body":"This worked for anyone? Not working for me."}],"tags":[],"owner":{"account_id":9337172,"reputation":1341,"user_id":6931023,"accept_rate":50,"display_name":"gladiator"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1491902047,"creation_date":1491902047,"answer_id":43341597,"question_id":43328130,"body_markdown":"Using ApplicationConfig disable using below property\r\n\r\n&gt; jersey.config.server.wadl.disableWadl = &quot;true&quot;\r\n\r\n\r\n\r\n          @ApplicationPath(&quot;/rest&quot;)\r\n        public class ApplicationConfig extends Application {\r\n        \r\n        \t \r\n            @Override\r\n            public Map&lt;String, Object&gt; getProperties() {\r\n            \t\r\n                Map&lt;String, Object&gt; properties = new HashMap&lt;String, Object&gt;();\r\n                properties.put(&quot;jersey.config.server.provider.packages&quot;, &quot;com.study.rest&quot;);\r\n                properties.put(&quot;jersey.config.server.wadl.disableWadl&quot;, &quot;true&quot;);\r\n                properties.put(&quot;jersey.config.server.provider.classnames&quot;,&quot;org.glassfish.jersey.media.multipart.MultiPartFeature&quot;);\r\n                properties.put(CommonProperties.OUTBOUND_CONTENT_LENGTH_BUFFER,&quot;0&quot;);\r\n                System.out.println(&quot;getProperties:-&gt; CommonProperties.OUTBOUND_CONTENT_LENGTH_BUFFER_SERVER :&quot; + CommonProperties.getValue(properties,CommonProperties.OUTBOUND_CONTENT_LENGTH_BUFFER,String.class));\r\n                return properties;\r\n            }\r\n    }\r\n\r\n\r\n  Can you check may be instead of **DisableWADL** *disableWadl*  will work.","title":"Disable WADL generation on Jersey 1.19.1","body":"<p>Using ApplicationConfig disable using below property</p>\n\n<blockquote>\n  <p>jersey.config.server.wadl.disableWadl = \"true\"</p>\n</blockquote>\n\n<pre><code>      @ApplicationPath(\"/rest\")\n    public class ApplicationConfig extends Application {\n\n\n        @Override\n        public Map&lt;String, Object&gt; getProperties() {\n\n            Map&lt;String, Object&gt; properties = new HashMap&lt;String, Object&gt;();\n            properties.put(\"jersey.config.server.provider.packages\", \"com.study.rest\");\n            properties.put(\"jersey.config.server.wadl.disableWadl\", \"true\");\n            properties.put(\"jersey.config.server.provider.classnames\",\"org.glassfish.jersey.media.multipart.MultiPartFeature\");\n            properties.put(CommonProperties.OUTBOUND_CONTENT_LENGTH_BUFFER,\"0\");\n            System.out.println(\"getProperties:-&gt; CommonProperties.OUTBOUND_CONTENT_LENGTH_BUFFER_SERVER :\" + CommonProperties.getValue(properties,CommonProperties.OUTBOUND_CONTENT_LENGTH_BUFFER,String.class));\n            return properties;\n        }\n}\n</code></pre>\n\n<p>Can you check may be instead of <strong>DisableWADL</strong> <em>disableWadl</em>  will work.</p>\n"},{"tags":[],"owner":{"account_id":7356440,"reputation":245,"user_id":5601029,"accept_rate":78,"display_name":"doughaase"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1492623148,"creation_date":1492623148,"answer_id":43502453,"question_id":43328130,"body_markdown":"Figured it out: on version 1.19.x, the param name needs to be like this:\r\n\r\n    com.sun.jersey.config.feature.DisableWADL\r\n\r\n","title":"Disable WADL generation on Jersey 1.19.1","body":"<p>Figured it out: on version 1.19.x, the param name needs to be like this:</p>\n\n<pre><code>com.sun.jersey.config.feature.DisableWADL\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28718681,"reputation":11,"user_id":21992798,"display_name":"Sini"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1685532580,"creation_date":1685532580,"answer_id":76373008,"question_id":43328130,"body_markdown":"to disable wadl generation disableWadl must be set to true. But also the property allowSystemPropertiesProvider should be set\r\n\r\n    jersey.config.allowSystemPropertiesProvider=true jersey.config.server.wadl.disableWadl=true ","title":"Disable WADL generation on Jersey 1.19.1","body":"<p>to disable wadl generation disableWadl must be set to true. But also the property allowSystemPropertiesProvider should be set</p>\n<pre><code>jersey.config.allowSystemPropertiesProvider=true jersey.config.server.wadl.disableWadl=true \n</code></pre>\n"}],"owner":{"account_id":7356440,"reputation":245,"user_id":5601029,"accept_rate":78,"display_name":"doughaase"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7984,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":43502453,"answer_count":3,"score":4,"last_activity_date":1685532580,"creation_date":1491840733,"question_id":43328130,"body_markdown":"I&#39;m using Jersey 1.19.1 on a Web project with Java+Jboss.\r\n\r\nEverytime I request something from the Webservice, it shows this entry on the server.log:\r\n\r\n    ERROR [STDERR] com.sun.jersey.server.wadl.generators.AbstractWadlGeneratorGrammarGenerator attachTypes\r\n    INFO: Couldn&#39;t find grammar element for class java.lang.String\r\n\r\nSearching on how to disable it, I&#39;ve found this:\r\n\r\n\t\t&lt;init-param&gt;\r\n\t    \t&lt;param-name&gt;com.sun.jersey.config.server.wadl.DisableWADL&lt;/param-name&gt;\r\n\t    \t&lt;param-value&gt;true&lt;/param-value&gt;\r\n\t\t&lt;/init-param&gt;\r\n\r\nBut it didn&#39;t changed a thing for me.\r\n\r\nHow can I disable WADL so this annoying message doesn&#39;t show up anymore?\r\n\r\nHere&#39;s the full entry for the servlet:\r\n\r\n\t&lt;servlet&gt;\r\n\t\t&lt;servlet-name&gt;windi-mobile-service&lt;/servlet-name&gt;\r\n\t\t&lt;servlet-class&gt;com.sun.jersey.spi.container.servlet.ServletContainer&lt;/servlet-class&gt;\r\n\t\t&lt;init-param&gt;\r\n\t    \t&lt;param-name&gt;com.sun.jersey.config.server.wadl.DisableWADL&lt;/param-name&gt;\r\n\t    \t&lt;param-value&gt;true&lt;/param-value&gt;\r\n\t\t&lt;/init-param&gt;\r\n\t\t&lt;init-param&gt;\r\n\t\t\t&lt;param-name&gt;com.sun.jersey.config.property.packages&lt;/param-name&gt;\r\n\t\t\t&lt;param-value&gt;br.com.altimus.mobile.service&lt;/param-value&gt;\r\n\t\t&lt;/init-param&gt;\r\n\t\t&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n\t&lt;/servlet&gt;","title":"Disable WADL generation on Jersey 1.19.1","body":"<p>I'm using Jersey 1.19.1 on a Web project with Java+Jboss.</p>\n\n<p>Everytime I request something from the Webservice, it shows this entry on the server.log:</p>\n\n<pre><code>ERROR [STDERR] com.sun.jersey.server.wadl.generators.AbstractWadlGeneratorGrammarGenerator attachTypes\nINFO: Couldn't find grammar element for class java.lang.String\n</code></pre>\n\n<p>Searching on how to disable it, I've found this:</p>\n\n<pre><code>    &lt;init-param&gt;\n        &lt;param-name&gt;com.sun.jersey.config.server.wadl.DisableWADL&lt;/param-name&gt;\n        &lt;param-value&gt;true&lt;/param-value&gt;\n    &lt;/init-param&gt;\n</code></pre>\n\n<p>But it didn't changed a thing for me.</p>\n\n<p>How can I disable WADL so this annoying message doesn't show up anymore?</p>\n\n<p>Here's the full entry for the servlet:</p>\n\n<pre><code>&lt;servlet&gt;\n    &lt;servlet-name&gt;windi-mobile-service&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;com.sun.jersey.spi.container.servlet.ServletContainer&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;com.sun.jersey.config.server.wadl.DisableWADL&lt;/param-name&gt;\n        &lt;param-value&gt;true&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;com.sun.jersey.config.property.packages&lt;/param-name&gt;\n        &lt;param-value&gt;br.com.altimus.mobile.service&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":25046168,"reputation":335,"user_id":18902563,"display_name":"skillup"},"score":0,"creation_date":1685494701,"post_id":76368877,"comment_id":134667027,"body_markdown":"You can annotate the JpaGenericRepository  interface with &#39;@NoRepositoryBean&#39; and delete the &#39;@Repository&#39; for : ProfileJpaRepository  and ProfileJpaRepositoryImp .","body":"You can annotate the JpaGenericRepository  interface with &#39;@NoRepositoryBean&#39; and delete the &#39;@Repository&#39; for : ProfileJpaRepository  and ProfileJpaRepositoryImp ."},{"owner":{"account_id":15919644,"reputation":133,"user_id":14420635,"display_name":"gmn_1450"},"score":0,"creation_date":1685495642,"post_id":76368877,"comment_id":134667087,"body_markdown":"@skillup, thanks for your comment :). Unfortunately, your suggestion was one of my initial unsuccessful attempts.","body":"@skillup, thanks for your comment :). Unfortunately, your suggestion was one of my initial unsuccessful attempts."},{"owner":{"account_id":25046168,"reputation":335,"user_id":18902563,"display_name":"skillup"},"score":0,"creation_date":1685496623,"post_id":76368877,"comment_id":134667163,"body_markdown":"Spring Data search count() method and you have your own method count(Query&lt;Profile&gt; query) , you can change the signature of this method only for test, like this long count(); thanks.","body":"Spring Data search count() method and you have your own method count(Query&lt;Profile&gt; query) , you can change the signature of this method only for test, like this long count(); thanks."},{"owner":{"account_id":15919644,"reputation":133,"user_id":14420635,"display_name":"gmn_1450"},"score":0,"creation_date":1685497910,"post_id":76368877,"comment_id":134667252,"body_markdown":"Now he&#39;s complaining about ```findByProfileStringProperty``` method.\n\n```No property &#39;findByProfileStringProperty&#39; found for type &#39;Profile&#39; ```","body":"Now he&#39;s complaining about <code>findByProfileStringProperty</code> method.  <code>No property &#39;findByProfileStringProperty&#39; found for type &#39;Profile&#39; </code>"},{"owner":{"account_id":25046168,"reputation":335,"user_id":18902563,"display_name":"skillup"},"score":1,"creation_date":1685499223,"post_id":76368877,"comment_id":134667359,"body_markdown":"can you put the code of AbstractJpaRepository.java","body":"can you put the code of AbstractJpaRepository.java"}],"owner":{"account_id":15919644,"reputation":133,"user_id":14420635,"display_name":"gmn_1450"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685531497,"creation_date":1685483286,"question_id":76368877,"body_markdown":"I have two repository interfaces.\r\n\r\nOne is more generic:\r\n\r\n``` \r\n@NoRepositoryBean\r\npublic interface JpaGenericRepository&lt;T&gt; {\r\n\r\n    List&lt;T&gt; find(Query&lt;T&gt; query);\r\n\r\n    long count(Query&lt;T&gt; query);\r\n\r\n    List&lt;T&gt; findAllCache();\r\n\r\n}\r\n```\r\n\r\nThe other one extends it, passing the entity class (Profile in this case):\r\n\r\n```\r\npublic interface ProfileJpaRepository extends JpaGenericRepository&lt;Profile&gt; {\r\n\r\n    List&lt;Profile&gt; findAll();\r\n\r\n    List&lt;Profile&gt; findByProfileStringProperty(Set&lt;String&gt; property);\r\n\r\n}\r\n```\r\n\r\nThe implementation is as follows:\r\n\r\n```\r\npublic class ProfileJpaRepositoryImpl extends AbstractJpaRepository&lt;Profile, Long&gt; implements ProfileJpaRepository, Serializable {\r\n\r\n    @Serial\r\n    private static final long serialVersionUID = -4013787249678288423L;\r\n\r\n    @Override\r\n    public Optional&lt;Profile&gt; findById(Long id) { /* method implementation */ }\r\n\r\n\r\n    @Override\r\n    public List&lt;Profile&gt; findAll() { /* method implementation */ }\r\n\r\n\r\n    @Override\r\n    public List&lt;Profile&gt; find(Query&lt;Profile&gt; query) { /* method implementation */ }\r\n\r\n    @Override\r\n    public long count(Query&lt;Profile&gt; query) { /* method implementation */ }\r\n\r\n    @Override\r\n    public List&lt;Profile&gt; findByProfileStringProperty(Set&lt;String&gt; property) { /* method implementation */ }\r\n\r\n    @Override\r\n    public List&lt;Profile&gt; findAllCache() { /* method implementation */ }\r\n\r\n    public JPAQuery&lt;Perfil&gt; createQuery(Query&lt;Profile&gt; query, boolean sortAndPaging) { /* method implementation */ }\r\n}\r\n\r\n```\r\n\r\nThe error message states:\r\n\r\n```\r\nCaused by: org.springframework.data.mapping.PropertyReferenceException: No property &#39;count&#39; found for type &#39;Profile&#39;\r\n\r\n```\r\n\r\nIt seems that the implementation of the ```count``` method inside ```ProfileJpaRepositoryImpl``` is not being recognized. Can you help me figure out why?\r\n\r\n``` Profile``` class :\r\n\r\n```\r\n\r\n@Entity\r\n@Audited\r\n@Table(name = &quot;PERFIL&quot;)\r\n@Relation(collectionRelation = &quot;profiles&quot;)\r\n@GenericGenerator(\r\n        name = &quot;seqProfile&quot;,\r\n        strategy = &quot;org.hibernate.id.enhanced.SequenceStyleGenerator&quot;,\r\n        parameters = {\r\n                @Parameter(name = &quot;sequence_name&quot;, value = &quot;SEQ_PROFILE&quot;),\r\n                @Parameter(name = &quot;initial_value&quot;, value = &quot;1&quot;),\r\n                @Parameter(name = &quot;increment_size&quot;, value = &quot;1&quot;)\r\n        }\r\n)\r\n@Getter\r\n@Setter\r\n@Builder\r\n@AllArgsConstructor\r\npublic class Profile implements Serializable, GenericEntity&lt;Profile&gt; {\r\n\r\n    private static final long serialVersionUID = 2386088697024413736L;\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO, generator = &quot;seqProfile&quot;)\r\n    @Column(name = &quot;ID&quot;)\r\n    private Long id;\r\n\r\n    @NotBlank\r\n    @Size(min = 1, max = 100)\r\n    @Column(name = &quot;NAME&quot;)\r\n    private String name;\r\n\r\n    @NotBlank\r\n    @Size(min = 1, max = 200)\r\n    @Column(name = &quot;DESCRIPTION&quot;)\r\n    private String description;\r\n\r\n    @Audited(targetAuditMode = NOT_AUDITED)\r\n    @ManyToMany(fetch = FetchType.LAZY)\r\n    @JoinTable(name = &quot;PROFILE_PERMISSION&quot;, joinColumns = @JoinColumn(name = &quot;PROFILE_ID&quot;), inverseJoinColumns = @JoinColumn(name = &quot;PERMISSION_ID&quot;))\r\n    private List&lt;Permission&gt; permissions;\r\n\r\n    public Profile() {\r\n    }\r\n\r\n    public Profile(Long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    @Transient\r\n    @JsonIgnore\r\n    private AuditLog auditLog;\r\n\r\n    @QueryProjection\r\n    public Profile(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    @QueryProjection\r\n    public Profile(Long id, String name) {\r\n        this.id = id;\r\n        this.name = name;\r\n    }\r\n\r\n    @QueryProjection\r\n    public Profile(Long id, String name, String description) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.description = description;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object o) {\r\n        if (this == o) return true;\r\n        if (o == null || !Util.classOf(this).equals(Util.classOf(o))) return false;\r\n        Profile profile = (Profile) o;\r\n        return Objects.equals(this.getId(), profile.getId());\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        return Objects.hash(this.getId());\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return name;\r\n    }\r\n}\r\n```\r\n\r\n``` Query``` class :\r\n\r\n```\r\npublic final class Query&lt;T&gt; implements Serializable {\r\n\r\n    public static final long LIMIT = 10L;\r\n\r\n    public static final long NO_LIMIT = -1;\r\n\r\n    private final Filter&lt;T&gt; filter;\r\n    private final Sorter&lt;T&gt; sorter;\r\n    private final Long page;\r\n    private final Long limit;\r\n\r\n    // getters, setters and constructors\r\n}\r\n```\r\n\r\n```\r\npublic abstract class AbstractJpaRepository&lt;T, ID&gt; {\r\n\r\n@Serial\r\nprivate static final long serialVersionUID = 7633557834565897303L;\r\nprotected final Class&lt;T&gt; entityClass = (Class&lt;T&gt;) ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0];\r\n\r\n@PersistenceContext\r\nprotected EntityManager entityManager;\r\n\r\n@Autowired\r\nprotected DecisorManager decisorManager;\r\nprotected Class&lt;? extends T&gt; daoType;\r\n@Autowired\r\nprivate ApplicationContext applicationContext;\r\n@Autowired\r\nprivate BeanUtil beanUtil;\r\n\r\npublic AbstractJpaRepository() {\r\n    daoType = (Class&lt;T&gt;) ((ParameterizedType) getClass().getGenericSuperclass())\r\n            .getActualTypeArguments()[0];\r\n}\r\n\r\npublic static List&lt;Field&gt; getAllFields(List&lt;Field&gt; fields, Class&lt;?&gt; type) {\r\n    fields.addAll(Arrays.asList(type.getDeclaredFields()));\r\n\r\n    if (type.getSuperclass() != null) {\r\n        fields = getAllFields(fields, type.getSuperclass());\r\n    }\r\n\r\n    return fields;\r\n}\r\n\r\n/**\r\n * Returns whether the entity&#39;s ID is automatically generated.\r\n *\r\n * @return\r\n */\r\nprivate boolean isGeneratedId() {\r\n    return Arrays.stream(entityClass.getDeclaredFields()).anyMatch(field -&gt; field.isAnnotationPresent(GeneratedValue.class));\r\n}\r\n\r\n/**\r\n * Find an entity by its ID.\r\n *\r\n * @param id\r\n * @return\r\n */\r\npublic Optional&lt;T&gt; findById(ID id) {\r\n    return Optional.ofNullable(entityManager.find(entityClass, id));\r\n}\r\n\r\n\r\npublic T findById(ID key, String... columns) {\r\n    try {\r\n        if (columns == null || columns.length == 0) {\r\n            return entityManager.find(daoType, key);\r\n        } else {\r\n            // PERFORM THE QUERY\r\n            return (T) returnCriteria(columns).add(Restrictions.eq(&quot;id&quot;, key)).uniqueResult();\r\n        }\r\n    } catch (NoResultException ex) {\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Insert a new entity.\r\n *\r\n * @param entity\r\n */\r\npublic void create(T entity) {\r\n    Optional&lt;ID&gt; id = getIdentifier(entity);\r\n    if (isGeneratedId() &amp;&amp; id.isPresent()) {\r\n        // TODO - ADJUST MESSAGE ON RESOURCE REFACTORING\r\n        throw new BusinessException(&quot;New message&quot;);\r\n    } else if (!isGeneratedId() &amp;&amp; !id.isPresent()) {\r\n        // TODO - ADJUST MESSAGE ON RESOURCE REFACTORING\r\n        throw new BusinessException(&quot;New message&quot;);\r\n    } else {\r\n        entityManager.persist(entity);\r\n        entityManager.flush();\r\n        if (decisorManager.checkDecisor(entity))\r\n            applicationContext.publishEvent(new CamundaLogEvent(EnumEventoDecisor.AOINCLUIR, entity));\r\n    }\r\n}\r\n\r\npublic void createWithoutCamunda(T entity) {\r\n    Optional&lt;ID&gt; id = getIdentifier(entity);\r\n    if (isGeneratedId() &amp;&amp; id.isPresent()) {\r\n        // TODO - ADJUST MESSAGE ON RESOURCE REFACTORING\r\n        throw new BusinessException(&quot;New message&quot;);\r\n    } else if (!isGeneratedId() &amp;&amp; !id.isPresent()) {\r\n        // TODO - ADJUST MESSAGE ON RESOURCE REFACTORING\r\n        throw new BusinessException(&quot;New message&quot;);\r\n    } else {\r\n        entityManager.persist(entity);\r\n        entityManager.flush();\r\n    }\r\n}\r\n\r\n/**\r\n * Update an entity.\r\n *\r\n * @param entity\r\n */\r\npublic void update(T entity) {\r\n    this.findById(this.getIdentifier(entity).orElseThrow(BusinessException::new)).orElseThrow(EntityNotFoundException::new);\r\n    entityManager.merge(entity);\r\n    entityManager.flush();\r\n    if (decisorManager.checkDecisor(entity))\r\n        applicationContext.publishEvent(new CamundaLogEvent(EnumEventoDecisor.AOALTERAR, entity));\r\n}\r\n\r\npublic void updateBaixaTarefa(T entity) {\r\n    this.findById(this.getIdentifier(entity).orElseThrow(BusinessException::new)).orElseThrow(EntityNotFoundException::new);\r\n    entityManager.merge(entity);\r\n    entityManager.flush();\r\n    if (decisorManager.checkDecisor(entity))\r\n        applicationContext.publishEvent(new CamundaLogEvent(EnumEventoDecisor.AOBAIXAR, entity));\r\n}\r\n\r\npublic void updateWithoutCamunda(T entity) {\r\n    this.findById(this.getIdentifier(entity).orElseThrow(BusinessException::new)).orElseThrow(EntityNotFoundException::new);\r\n    entityManager.merge(entity);\r\n    entityManager.flush();\r\n}\r\n\r\n/**\r\n * Remove an entity.\r\n *\r\n * @param entity\r\n */\r\npublic void remove(T entity) {\r\n    removeById(getIdentifier(entity).orElseThrow(BusinessException::new));\r\n}\r\n\r\n/**\r\n * Remove an entity by its ID.\r\n *\r\n * @param id\r\n */\r\npublic void removeById(ID id) {\r\n    entityManager.remove(Optional.ofNullable(entityManager.find(entityClass, id)).orElseThrow(EntityNotFoundException::new));\r\n    entityManager.flush();\r\n}\r\n\r\n/**\r\n * Clear the cache of an entity in the decisor manager.\r\n *\r\n * @param entityCadastro\r\n */\r\npublic void clearCacheDecisor(String entityCadastro) {\r\n    decisorManager.clearCacheDecisor(entityCadastro);\r\n}\r\n\r\n/**\r\n * Get the ID of the entity.\r\n *\r\n * @param entity\r\n * @return\r\n */\r\nprotected Optional&lt;ID&gt; getIdentifier(T entity) {\r\n    return Optional.ofNullable((ID) entityManager\r\n            .getEntityManagerFactory()\r\n            .getPersistenceUnitUtil()\r\n            .getIdentifier(entity));\r\n}\r\n\r\n/**\r\n * Apply sorting to the query based on the {@link JPAQuery} and {@link Sorter}.\r\n *\r\n * @param jpaQuery {@link JPAQuery} used to perform the query, must already have the query itself prepared.\r\n * @param sorter   {@link Sorter} containing information about the property to be sorted.\r\n * @return {@link JPAQuery} with the sorting prepared.\r\n */\r\nprotected JPAQuery&lt;T&gt; applySorter(JPAQuery&lt;T&gt; jpaQuery, Sorter&lt;T&gt; sorter) {\r\n    final PathBuilder&lt;T&gt; path = new PathBuilder&lt;&gt;(this.entityClass, this.entityClass.getSimpleName().substring(0, 1).toLowerCase() + this.entityClass.getSimpleName().substring(1));\r\n\r\n    if (Objects.nonNull(sorter) &amp;&amp; StringUtils.isNotBlank(sorter.getProperty())) {\r\n        if (sorter.isDesc()) {\r\n            jpaQuery.orderBy(path.getString(sorter.getProperty()).desc());\r\n        } else {\r\n            jpaQuery.orderBy(path.getString(sorter.getProperty()).asc());\r\n        }\r\n    } else {\r\n        jpaQuery.orderBy(path.getString(&quot;id&quot;).asc());\r\n    }\r\n\r\n    return jpaQuery;\r\n}\r\n\r\nprotected JPAQuery&lt;T&gt; applySorter(JPAQuery&lt;T&gt; jpaQuery, Sorter sorter, PathBuilder&lt;T&gt; path) {\r\n\r\n    if (Objects.nonNull(sorter) &amp;&amp; StringUtils.isNotBlank(sorter.getProperty())) {\r\n        if (sorter.isDesc()) {\r\n            jpaQuery.orderBy(path.getString(sorter.getProperty()).desc());\r\n        } else {\r\n            jpaQuery.orderBy(path.getString(sorter.getProperty()).asc());\r\n        }\r\n    } else {\r\n        jpaQuery.orderBy(path.getString(&quot;id&quot;).asc());\r\n    }\r\n\r\n    return jpaQuery;\r\n}\r\n\r\n/**\r\n * Apply pagination to the query based on the {@link JPAQuery}.\r\n *\r\n * @param jpaQuery {@link JPAQuery} used to perform the query, must already have the query itself prepared.\r\n * @param page     {@link Long} representing the page to be queried.\r\n * @param limit    {@link Long} representing the number of records to be displayed per page.\r\n * @return {@link JPAQuery} with the pagination prepared.\r\n */\r\nprotected JPAQuery&lt;T&gt; applyPagination(JPAQuery&lt;T&gt; jpaQuery, Long page, Long limit) {\r\n    if (Optional.ofNullable(page).orElse(0L) &gt; 0L) {\r\n        jpaQuery.offset(((page - 1L) * limit));\r\n    }\r\n\r\n    if (!limit.equals(Query.NO_LIMIT)) {\r\n        jpaQuery.limit(limit);\r\n    }\r\n\r\n    return jpaQuery;\r\n}\r\n\r\npublic String getSelectNew(Class&lt;?&gt; tipoDestino, Class&lt;? extends Entidade&gt; tipoOrigem) {\r\n    String prefix = tipoOrigem.getSimpleName().substring(0, 1).toLowerCase();\r\n    return getSelectNewPrefix(tipoDestino, tipoOrigem, prefix);\r\n}\r\n\r\npublic String getSelectNewPrefix(Class&lt;?&gt; tipoDestino, Class&lt;? extends Entidade&gt; tipoOrigem, String prefix) {\r\n    String table = tipoOrigem.getSimpleName();\r\n    StringBuilder sb = new StringBuilder(&quot;Select distinct new &quot;).append(tipoDestino.getName()).append(&quot;(&quot;);\r\n\r\n    Map&lt;Integer, String&gt; campos = new HashMap();\r\n    boolean foundAtLeastOneFieldInConstructor = false;\r\n    for (Field campo : getAllFields(new LinkedList&lt;Field&gt;(), tipoDestino)) {\r\n        ViewInterface viewInterface = campo.getAnnotation(ViewInterface.class);\r\n        if (viewInterface == null) continue;\r\n        campos.put(viewInterface.ordem(), viewInterface.campo());\r\n        foundAtLeastOneFieldInConstructor = true;\r\n    }\r\n\r\n    for (int i = 0; i &lt; campos.size(); i++) {\r\n        sb.append(campos.get(i)).append(&quot;, &quot;);\r\n    }\r\n\r\n    sb.append(&quot;) from &quot;).append(table).append(&quot; &quot;).append(prefix);\r\n\r\n    if (!foundAtLeastOneFieldInConstructor) {\r\n        sb = new StringBuilder(&quot;Select distinct &quot;)\r\n                .append(prefix)\r\n                .append(&quot; from &quot;)\r\n                .append(table)\r\n                .append(&quot; &quot;)\r\n                .append(prefix);\r\n    }\r\n\r\n    return sb.toString().replace(&quot;, )&quot;, &quot;)&quot;);\r\n}\r\n\r\npublic List&lt;?&gt; listByQueryGeneric(String queryString, List&lt;Object&gt; parametros, int maxResults) {\r\n    int index = 1;\r\n    while (queryString.contains(&quot;?&quot;) &amp;&amp; parametros.size() &gt; 0) {\r\n        queryString = queryString.replaceFirst(&quot;\\\\?&quot;, &quot;:param&quot; + index++);\r\n    }\r\n\r\n    javax.persistence.Query query;\r\n    if (maxResults &gt; 0) {\r\n        query = entityManager.createQuery(queryString).setMaxResults(maxResults);\r\n    } else {\r\n        query = entityManager.createQuery(queryString);\r\n    }\r\n\r\n    index = 1;\r\n    for (Object parametro : parametros) {\r\n        query.setParameter((&quot;param&quot; + index++), parametro);\r\n    }\r\n\r\n    return query.getResultList();\r\n}\r\n\r\nprivate Criteria returnCriteria(String... colunas) {\r\n    // Create criteria based on the entity example\r\n    Criteria criteria = entityManager.unwrap(Session.class).createCriteria(daoType);\r\n\r\n    // Check if attributes were passed to avoid querying all object information\r\n    if (colunas != null &amp;&amp; colunas.length &gt; 0) {\r\n\r\n        ProjectionList listaColunas = Projections.projectionList();\r\n\r\n        for (String coluna : colunas) {\r\n            listaColunas.add(Projections.property(coluna.trim()), coluna.trim());\r\n        }\r\n\r\n        criteria.setProjection(listaColunas).setResultTransformer(Transformers.aliasToBean(daoType));\r\n    }\r\n\r\n    // Perform the query\r\n    return criteria;\r\n}\r\n\r\n\r\n```\r\n\r\n\r\n","title":"&quot;Spring Data JPA - Exception: &#39;No Property Found for Type&#39; with Inheritance Between Repository Interfaces&quot;","body":"<p>I have two repository interfaces.</p>\n<p>One is more generic:</p>\n<pre><code>@NoRepositoryBean\npublic interface JpaGenericRepository&lt;T&gt; {\n\n    List&lt;T&gt; find(Query&lt;T&gt; query);\n\n    long count(Query&lt;T&gt; query);\n\n    List&lt;T&gt; findAllCache();\n\n}\n</code></pre>\n<p>The other one extends it, passing the entity class (Profile in this case):</p>\n<pre><code>public interface ProfileJpaRepository extends JpaGenericRepository&lt;Profile&gt; {\n\n    List&lt;Profile&gt; findAll();\n\n    List&lt;Profile&gt; findByProfileStringProperty(Set&lt;String&gt; property);\n\n}\n</code></pre>\n<p>The implementation is as follows:</p>\n<pre><code>public class ProfileJpaRepositoryImpl extends AbstractJpaRepository&lt;Profile, Long&gt; implements ProfileJpaRepository, Serializable {\n\n    @Serial\n    private static final long serialVersionUID = -4013787249678288423L;\n\n    @Override\n    public Optional&lt;Profile&gt; findById(Long id) { /* method implementation */ }\n\n\n    @Override\n    public List&lt;Profile&gt; findAll() { /* method implementation */ }\n\n\n    @Override\n    public List&lt;Profile&gt; find(Query&lt;Profile&gt; query) { /* method implementation */ }\n\n    @Override\n    public long count(Query&lt;Profile&gt; query) { /* method implementation */ }\n\n    @Override\n    public List&lt;Profile&gt; findByProfileStringProperty(Set&lt;String&gt; property) { /* method implementation */ }\n\n    @Override\n    public List&lt;Profile&gt; findAllCache() { /* method implementation */ }\n\n    public JPAQuery&lt;Perfil&gt; createQuery(Query&lt;Profile&gt; query, boolean sortAndPaging) { /* method implementation */ }\n}\n\n</code></pre>\n<p>The error message states:</p>\n<pre><code>Caused by: org.springframework.data.mapping.PropertyReferenceException: No property 'count' found for type 'Profile'\n\n</code></pre>\n<p>It seems that the implementation of the <code>count</code> method inside <code>ProfileJpaRepositoryImpl</code> is not being recognized. Can you help me figure out why?</p>\n<p><code> Profile</code> class :</p>\n<pre><code>\n@Entity\n@Audited\n@Table(name = &quot;PERFIL&quot;)\n@Relation(collectionRelation = &quot;profiles&quot;)\n@GenericGenerator(\n        name = &quot;seqProfile&quot;,\n        strategy = &quot;org.hibernate.id.enhanced.SequenceStyleGenerator&quot;,\n        parameters = {\n                @Parameter(name = &quot;sequence_name&quot;, value = &quot;SEQ_PROFILE&quot;),\n                @Parameter(name = &quot;initial_value&quot;, value = &quot;1&quot;),\n                @Parameter(name = &quot;increment_size&quot;, value = &quot;1&quot;)\n        }\n)\n@Getter\n@Setter\n@Builder\n@AllArgsConstructor\npublic class Profile implements Serializable, GenericEntity&lt;Profile&gt; {\n\n    private static final long serialVersionUID = 2386088697024413736L;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO, generator = &quot;seqProfile&quot;)\n    @Column(name = &quot;ID&quot;)\n    private Long id;\n\n    @NotBlank\n    @Size(min = 1, max = 100)\n    @Column(name = &quot;NAME&quot;)\n    private String name;\n\n    @NotBlank\n    @Size(min = 1, max = 200)\n    @Column(name = &quot;DESCRIPTION&quot;)\n    private String description;\n\n    @Audited(targetAuditMode = NOT_AUDITED)\n    @ManyToMany(fetch = FetchType.LAZY)\n    @JoinTable(name = &quot;PROFILE_PERMISSION&quot;, joinColumns = @JoinColumn(name = &quot;PROFILE_ID&quot;), inverseJoinColumns = @JoinColumn(name = &quot;PERMISSION_ID&quot;))\n    private List&lt;Permission&gt; permissions;\n\n    public Profile() {\n    }\n\n    public Profile(Long id) {\n        this.id = id;\n    }\n\n    @Transient\n    @JsonIgnore\n    private AuditLog auditLog;\n\n    @QueryProjection\n    public Profile(String name) {\n        this.name = name;\n    }\n\n    @QueryProjection\n    public Profile(Long id, String name) {\n        this.id = id;\n        this.name = name;\n    }\n\n    @QueryProjection\n    public Profile(Long id, String name, String description) {\n        this.id = id;\n        this.name = name;\n        this.description = description;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || !Util.classOf(this).equals(Util.classOf(o))) return false;\n        Profile profile = (Profile) o;\n        return Objects.equals(this.getId(), profile.getId());\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(this.getId());\n    }\n\n    @Override\n    public String toString() {\n        return name;\n    }\n}\n</code></pre>\n<p><code> Query</code> class :</p>\n<pre><code>public final class Query&lt;T&gt; implements Serializable {\n\n    public static final long LIMIT = 10L;\n\n    public static final long NO_LIMIT = -1;\n\n    private final Filter&lt;T&gt; filter;\n    private final Sorter&lt;T&gt; sorter;\n    private final Long page;\n    private final Long limit;\n\n    // getters, setters and constructors\n}\n</code></pre>\n<pre><code>public abstract class AbstractJpaRepository&lt;T, ID&gt; {\n\n@Serial\nprivate static final long serialVersionUID = 7633557834565897303L;\nprotected final Class&lt;T&gt; entityClass = (Class&lt;T&gt;) ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0];\n\n@PersistenceContext\nprotected EntityManager entityManager;\n\n@Autowired\nprotected DecisorManager decisorManager;\nprotected Class&lt;? extends T&gt; daoType;\n@Autowired\nprivate ApplicationContext applicationContext;\n@Autowired\nprivate BeanUtil beanUtil;\n\npublic AbstractJpaRepository() {\n    daoType = (Class&lt;T&gt;) ((ParameterizedType) getClass().getGenericSuperclass())\n            .getActualTypeArguments()[0];\n}\n\npublic static List&lt;Field&gt; getAllFields(List&lt;Field&gt; fields, Class&lt;?&gt; type) {\n    fields.addAll(Arrays.asList(type.getDeclaredFields()));\n\n    if (type.getSuperclass() != null) {\n        fields = getAllFields(fields, type.getSuperclass());\n    }\n\n    return fields;\n}\n\n/**\n * Returns whether the entity's ID is automatically generated.\n *\n * @return\n */\nprivate boolean isGeneratedId() {\n    return Arrays.stream(entityClass.getDeclaredFields()).anyMatch(field -&gt; field.isAnnotationPresent(GeneratedValue.class));\n}\n\n/**\n * Find an entity by its ID.\n *\n * @param id\n * @return\n */\npublic Optional&lt;T&gt; findById(ID id) {\n    return Optional.ofNullable(entityManager.find(entityClass, id));\n}\n\n\npublic T findById(ID key, String... columns) {\n    try {\n        if (columns == null || columns.length == 0) {\n            return entityManager.find(daoType, key);\n        } else {\n            // PERFORM THE QUERY\n            return (T) returnCriteria(columns).add(Restrictions.eq(&quot;id&quot;, key)).uniqueResult();\n        }\n    } catch (NoResultException ex) {\n        return null;\n    }\n}\n\n/**\n * Insert a new entity.\n *\n * @param entity\n */\npublic void create(T entity) {\n    Optional&lt;ID&gt; id = getIdentifier(entity);\n    if (isGeneratedId() &amp;&amp; id.isPresent()) {\n        // TODO - ADJUST MESSAGE ON RESOURCE REFACTORING\n        throw new BusinessException(&quot;New message&quot;);\n    } else if (!isGeneratedId() &amp;&amp; !id.isPresent()) {\n        // TODO - ADJUST MESSAGE ON RESOURCE REFACTORING\n        throw new BusinessException(&quot;New message&quot;);\n    } else {\n        entityManager.persist(entity);\n        entityManager.flush();\n        if (decisorManager.checkDecisor(entity))\n            applicationContext.publishEvent(new CamundaLogEvent(EnumEventoDecisor.AOINCLUIR, entity));\n    }\n}\n\npublic void createWithoutCamunda(T entity) {\n    Optional&lt;ID&gt; id = getIdentifier(entity);\n    if (isGeneratedId() &amp;&amp; id.isPresent()) {\n        // TODO - ADJUST MESSAGE ON RESOURCE REFACTORING\n        throw new BusinessException(&quot;New message&quot;);\n    } else if (!isGeneratedId() &amp;&amp; !id.isPresent()) {\n        // TODO - ADJUST MESSAGE ON RESOURCE REFACTORING\n        throw new BusinessException(&quot;New message&quot;);\n    } else {\n        entityManager.persist(entity);\n        entityManager.flush();\n    }\n}\n\n/**\n * Update an entity.\n *\n * @param entity\n */\npublic void update(T entity) {\n    this.findById(this.getIdentifier(entity).orElseThrow(BusinessException::new)).orElseThrow(EntityNotFoundException::new);\n    entityManager.merge(entity);\n    entityManager.flush();\n    if (decisorManager.checkDecisor(entity))\n        applicationContext.publishEvent(new CamundaLogEvent(EnumEventoDecisor.AOALTERAR, entity));\n}\n\npublic void updateBaixaTarefa(T entity) {\n    this.findById(this.getIdentifier(entity).orElseThrow(BusinessException::new)).orElseThrow(EntityNotFoundException::new);\n    entityManager.merge(entity);\n    entityManager.flush();\n    if (decisorManager.checkDecisor(entity))\n        applicationContext.publishEvent(new CamundaLogEvent(EnumEventoDecisor.AOBAIXAR, entity));\n}\n\npublic void updateWithoutCamunda(T entity) {\n    this.findById(this.getIdentifier(entity).orElseThrow(BusinessException::new)).orElseThrow(EntityNotFoundException::new);\n    entityManager.merge(entity);\n    entityManager.flush();\n}\n\n/**\n * Remove an entity.\n *\n * @param entity\n */\npublic void remove(T entity) {\n    removeById(getIdentifier(entity).orElseThrow(BusinessException::new));\n}\n\n/**\n * Remove an entity by its ID.\n *\n * @param id\n */\npublic void removeById(ID id) {\n    entityManager.remove(Optional.ofNullable(entityManager.find(entityClass, id)).orElseThrow(EntityNotFoundException::new));\n    entityManager.flush();\n}\n\n/**\n * Clear the cache of an entity in the decisor manager.\n *\n * @param entityCadastro\n */\npublic void clearCacheDecisor(String entityCadastro) {\n    decisorManager.clearCacheDecisor(entityCadastro);\n}\n\n/**\n * Get the ID of the entity.\n *\n * @param entity\n * @return\n */\nprotected Optional&lt;ID&gt; getIdentifier(T entity) {\n    return Optional.ofNullable((ID) entityManager\n            .getEntityManagerFactory()\n            .getPersistenceUnitUtil()\n            .getIdentifier(entity));\n}\n\n/**\n * Apply sorting to the query based on the {@link JPAQuery} and {@link Sorter}.\n *\n * @param jpaQuery {@link JPAQuery} used to perform the query, must already have the query itself prepared.\n * @param sorter   {@link Sorter} containing information about the property to be sorted.\n * @return {@link JPAQuery} with the sorting prepared.\n */\nprotected JPAQuery&lt;T&gt; applySorter(JPAQuery&lt;T&gt; jpaQuery, Sorter&lt;T&gt; sorter) {\n    final PathBuilder&lt;T&gt; path = new PathBuilder&lt;&gt;(this.entityClass, this.entityClass.getSimpleName().substring(0, 1).toLowerCase() + this.entityClass.getSimpleName().substring(1));\n\n    if (Objects.nonNull(sorter) &amp;&amp; StringUtils.isNotBlank(sorter.getProperty())) {\n        if (sorter.isDesc()) {\n            jpaQuery.orderBy(path.getString(sorter.getProperty()).desc());\n        } else {\n            jpaQuery.orderBy(path.getString(sorter.getProperty()).asc());\n        }\n    } else {\n        jpaQuery.orderBy(path.getString(&quot;id&quot;).asc());\n    }\n\n    return jpaQuery;\n}\n\nprotected JPAQuery&lt;T&gt; applySorter(JPAQuery&lt;T&gt; jpaQuery, Sorter sorter, PathBuilder&lt;T&gt; path) {\n\n    if (Objects.nonNull(sorter) &amp;&amp; StringUtils.isNotBlank(sorter.getProperty())) {\n        if (sorter.isDesc()) {\n            jpaQuery.orderBy(path.getString(sorter.getProperty()).desc());\n        } else {\n            jpaQuery.orderBy(path.getString(sorter.getProperty()).asc());\n        }\n    } else {\n        jpaQuery.orderBy(path.getString(&quot;id&quot;).asc());\n    }\n\n    return jpaQuery;\n}\n\n/**\n * Apply pagination to the query based on the {@link JPAQuery}.\n *\n * @param jpaQuery {@link JPAQuery} used to perform the query, must already have the query itself prepared.\n * @param page     {@link Long} representing the page to be queried.\n * @param limit    {@link Long} representing the number of records to be displayed per page.\n * @return {@link JPAQuery} with the pagination prepared.\n */\nprotected JPAQuery&lt;T&gt; applyPagination(JPAQuery&lt;T&gt; jpaQuery, Long page, Long limit) {\n    if (Optional.ofNullable(page).orElse(0L) &gt; 0L) {\n        jpaQuery.offset(((page - 1L) * limit));\n    }\n\n    if (!limit.equals(Query.NO_LIMIT)) {\n        jpaQuery.limit(limit);\n    }\n\n    return jpaQuery;\n}\n\npublic String getSelectNew(Class&lt;?&gt; tipoDestino, Class&lt;? extends Entidade&gt; tipoOrigem) {\n    String prefix = tipoOrigem.getSimpleName().substring(0, 1).toLowerCase();\n    return getSelectNewPrefix(tipoDestino, tipoOrigem, prefix);\n}\n\npublic String getSelectNewPrefix(Class&lt;?&gt; tipoDestino, Class&lt;? extends Entidade&gt; tipoOrigem, String prefix) {\n    String table = tipoOrigem.getSimpleName();\n    StringBuilder sb = new StringBuilder(&quot;Select distinct new &quot;).append(tipoDestino.getName()).append(&quot;(&quot;);\n\n    Map&lt;Integer, String&gt; campos = new HashMap();\n    boolean foundAtLeastOneFieldInConstructor = false;\n    for (Field campo : getAllFields(new LinkedList&lt;Field&gt;(), tipoDestino)) {\n        ViewInterface viewInterface = campo.getAnnotation(ViewInterface.class);\n        if (viewInterface == null) continue;\n        campos.put(viewInterface.ordem(), viewInterface.campo());\n        foundAtLeastOneFieldInConstructor = true;\n    }\n\n    for (int i = 0; i &lt; campos.size(); i++) {\n        sb.append(campos.get(i)).append(&quot;, &quot;);\n    }\n\n    sb.append(&quot;) from &quot;).append(table).append(&quot; &quot;).append(prefix);\n\n    if (!foundAtLeastOneFieldInConstructor) {\n        sb = new StringBuilder(&quot;Select distinct &quot;)\n                .append(prefix)\n                .append(&quot; from &quot;)\n                .append(table)\n                .append(&quot; &quot;)\n                .append(prefix);\n    }\n\n    return sb.toString().replace(&quot;, )&quot;, &quot;)&quot;);\n}\n\npublic List&lt;?&gt; listByQueryGeneric(String queryString, List&lt;Object&gt; parametros, int maxResults) {\n    int index = 1;\n    while (queryString.contains(&quot;?&quot;) &amp;&amp; parametros.size() &gt; 0) {\n        queryString = queryString.replaceFirst(&quot;\\\\?&quot;, &quot;:param&quot; + index++);\n    }\n\n    javax.persistence.Query query;\n    if (maxResults &gt; 0) {\n        query = entityManager.createQuery(queryString).setMaxResults(maxResults);\n    } else {\n        query = entityManager.createQuery(queryString);\n    }\n\n    index = 1;\n    for (Object parametro : parametros) {\n        query.setParameter((&quot;param&quot; + index++), parametro);\n    }\n\n    return query.getResultList();\n}\n\nprivate Criteria returnCriteria(String... colunas) {\n    // Create criteria based on the entity example\n    Criteria criteria = entityManager.unwrap(Session.class).createCriteria(daoType);\n\n    // Check if attributes were passed to avoid querying all object information\n    if (colunas != null &amp;&amp; colunas.length &gt; 0) {\n\n        ProjectionList listaColunas = Projections.projectionList();\n\n        for (String coluna : colunas) {\n            listaColunas.add(Projections.property(coluna.trim()), coluna.trim());\n        }\n\n        criteria.setProjection(listaColunas).setResultTransformer(Transformers.aliasToBean(daoType));\n    }\n\n    // Perform the query\n    return criteria;\n}\n\n\n</code></pre>\n"},{"tags":["java","maven","tomcat","cargo"],"comments":[{"owner":{"account_id":6756545,"reputation":1084,"user_id":5204741,"accept_rate":81,"display_name":"quento"},"score":0,"creation_date":1446976850,"post_id":33587299,"comment_id":54960773,"body_markdown":"i see that i dont have here tag &lt;configfiles&gt; but i did that, so dont expext to find mistake here. The main problem is that embedded tomcat are copied later then my custom files and overrides them.","body":"i see that i dont have here tag &lt;configfiles&gt; but i did that, so dont expext to find mistake here. The main problem is that embedded tomcat are copied later then my custom files and overrides them."}],"answers":[{"tags":[],"owner":{"account_id":263115,"reputation":16960,"user_id":548473,"display_name":"Grigory Kislin"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1467841207,"creation_date":1467841207,"answer_id":38234234,"question_id":33587299,"body_markdown":"One of solution is here: https://stackoverflow.com/questions/4305935/is-it-possible-to-supply-tomcat6s-context-xml-file-via-the-maven-cargo-plugin#4417945\r\n\r\nMy working configuration (with jdbc DataSource pool) looks like:\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.cargo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;cargo-maven2-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.5.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;container&gt;\r\n                        &lt;containerId&gt;tomcat8x&lt;/containerId&gt;\r\n                        &lt;systemProperties&gt;\r\n                            &lt;file.encoding&gt;UTF-8&lt;/file.encoding&gt;\r\n                            &lt;spring.profiles.active&gt;tomcat,datajpa&lt;/spring.profiles.active&gt;\r\n                        &lt;/systemProperties&gt;\r\n                        &lt;dependencies&gt;\r\n                            &lt;dependency&gt;\r\n                                &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n                                &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n                            &lt;/dependency&gt;\r\n                        &lt;/dependencies&gt;\r\n                    &lt;/container&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;configfiles&gt;\r\n                            &lt;configfile&gt;\r\n                                &lt;file&gt;src/main/resources/tomcat/context.xml&lt;/file&gt;\r\n                                &lt;todir&gt;conf/Catalina/localhost/&lt;/todir&gt;\r\n                                &lt;tofile&gt;context.xml.default&lt;/tofile&gt;\r\n                            &lt;/configfile&gt;\r\n                        &lt;/configfiles&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;deployables&gt;\r\n                        &lt;deployable&gt;\r\n                            &lt;groupId&gt;ru.javawebinar&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;topjava&lt;/artifactId&gt;\r\n                            &lt;type&gt;war&lt;/type&gt;\r\n                            &lt;properties&gt;\r\n                                &lt;context&gt;${project.build.finalName}&lt;/context&gt;\r\n                            &lt;/properties&gt;\r\n                        &lt;/deployable&gt;\r\n                    &lt;/deployables&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;","title":"Cargo embedded tomcat: custom context.xml","body":"<p>One of solution is here: <a href=\"https://stackoverflow.com/questions/4305935/is-it-possible-to-supply-tomcat6s-context-xml-file-via-the-maven-cargo-plugin#4417945\">Is it possible to supply Tomcat6&#39;s context.xml file via the Maven Cargo plugin?</a></p>\n\n<p>My working configuration (with jdbc DataSource pool) looks like:</p>\n\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.cargo&lt;/groupId&gt;\n            &lt;artifactId&gt;cargo-maven2-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.5.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;container&gt;\n                    &lt;containerId&gt;tomcat8x&lt;/containerId&gt;\n                    &lt;systemProperties&gt;\n                        &lt;file.encoding&gt;UTF-8&lt;/file.encoding&gt;\n                        &lt;spring.profiles.active&gt;tomcat,datajpa&lt;/spring.profiles.active&gt;\n                    &lt;/systemProperties&gt;\n                    &lt;dependencies&gt;\n                        &lt;dependency&gt;\n                            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n                            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n                        &lt;/dependency&gt;\n                    &lt;/dependencies&gt;\n                &lt;/container&gt;\n                &lt;configuration&gt;\n                    &lt;configfiles&gt;\n                        &lt;configfile&gt;\n                            &lt;file&gt;src/main/resources/tomcat/context.xml&lt;/file&gt;\n                            &lt;todir&gt;conf/Catalina/localhost/&lt;/todir&gt;\n                            &lt;tofile&gt;context.xml.default&lt;/tofile&gt;\n                        &lt;/configfile&gt;\n                    &lt;/configfiles&gt;\n                &lt;/configuration&gt;\n                &lt;deployables&gt;\n                    &lt;deployable&gt;\n                        &lt;groupId&gt;ru.javawebinar&lt;/groupId&gt;\n                        &lt;artifactId&gt;topjava&lt;/artifactId&gt;\n                        &lt;type&gt;war&lt;/type&gt;\n                        &lt;properties&gt;\n                            &lt;context&gt;${project.build.finalName}&lt;/context&gt;\n                        &lt;/properties&gt;\n                    &lt;/deployable&gt;\n                &lt;/deployables&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":6756545,"reputation":1084,"user_id":5204741,"accept_rate":81,"display_name":"quento"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10759,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":1,"score":3,"last_activity_date":1685531338,"creation_date":1446927369,"question_id":33587299,"body_markdown":"I am using cargo to automate war deployment on Tomcat. However, i get a trouble: i can`t replace default tomcat files with my custom as my files are copied first and then get overwritten by default. I spent hours for resolving this problem but nothing works. Here is my pom.xml\r\n\r\n        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n                             &lt;executions&gt;\r\n                                 &lt;execution&gt;\r\n                                     &lt;id&gt;replace-tomcat-users-xml&lt;/id&gt;\r\n                                     &lt;phase&gt;process-test-resources&lt;/phase&gt;\r\n                                     &lt;goals&gt;\r\n                                         &lt;goal&gt;copy-resources&lt;/goal&gt;\r\n                                     &lt;/goals&gt;\r\n                                     &lt;configuration&gt;\r\n                                         &lt;outputDirectory&gt;${basedir}/target/apache-tomcat-${version.tomcat}/conf/&lt;/outputDirectory&gt;\r\n                                         &lt;resources&gt;\r\n                                             &lt;resource&gt;\r\n                                                 &lt;directory&gt;src/test/resources/&lt;/directory&gt;\r\n                                                 &lt;includes&gt;\r\n                                                     &lt;include&gt;context.xml&lt;/include&gt;\r\n                                                 &lt;/includes&gt;\r\n                                             &lt;/resource&gt;\r\n                                         &lt;/resources&gt;\r\n                                     &lt;/configuration&gt;\r\n                                 &lt;/execution&gt;\r\n                                 &lt;execution&gt;\r\n                                     &lt;id&gt;replace-tomcat-users-xml-cargo&lt;/id&gt;\r\n                                     &lt;phase&gt;process-test-resources&lt;/phase&gt;\r\n                                     &lt;goals&gt;\r\n                                         &lt;goal&gt;copy-resources&lt;/goal&gt;\r\n                                     &lt;/goals&gt;\r\n                                     &lt;configuration&gt;\r\n                                         &lt;outputDirectory&gt;${basedir}/target/cargo/installs/tomcat-${version.tomcat}/apache-tomcat-${version.tomcat}&lt;/outputDirectory&gt;\r\n                                         &lt;resources&gt;\r\n                                             &lt;resource&gt;\r\n                                                 &lt;directory&gt;src/test/resources/&lt;/directory&gt;\r\n                                                 &lt;includes&gt;\r\n                                                     &lt;include&gt;context.xml&lt;/include&gt;\r\n                                                 &lt;/includes&gt;\r\n                                             &lt;/resource&gt;\r\n                                         &lt;/resources&gt;\r\n                                     &lt;/configuration&gt;\r\n                                 &lt;/execution&gt;\r\n                             &lt;/executions&gt;\r\n                         &lt;/plugin&gt;\r\nand here is cargo using:\r\n\r\n    &lt;plugin&gt;\r\n                           &lt;groupId&gt;org.codehaus.cargo&lt;/groupId&gt;\r\n                           &lt;artifactId&gt;cargo-maven2-plugin&lt;/artifactId&gt;\r\n                           &lt;version&gt;1.4.11&lt;/version&gt;\r\n                           &lt;configuration&gt;\r\n                               &lt;skip&gt;false&lt;/skip&gt;\r\n                               &lt;container&gt;\r\n                                   &lt;containerId&gt;tomcat7x&lt;/containerId&gt;\r\n                                   &lt;log&gt;${project.build.directory}/cargo.log&lt;/log&gt;\r\n                                   &lt;artifactInstaller&gt;\r\n                                       &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n                                       &lt;artifactId&gt;tomcat&lt;/artifactId&gt;\r\n                                       &lt;version&gt;${version.tomcat}&lt;/version&gt;\r\n                                       &lt;type&gt;zip&lt;/type&gt;\r\n                                   &lt;/artifactInstaller&gt;\r\n                                   &lt;systemProperties&gt;\r\n                                       &lt;tomcat.home.dir&gt;\r\n                                           ${basedir}/target/cargo/installs/apache-tomcat-${version.tomcat}/apache-tomcat-${version.tomcat}\r\n                                       &lt;/tomcat.home.dir&gt;\r\n                                       &lt;tomcat.server.home.dir&gt;\r\n                                           ${basedir}/target/cargo/installs/apache-tomcat-${version.tomcat}/apache-tomcat-${version.tomcat}\r\n                                       &lt;/tomcat.server.home.dir&gt;\r\n                                   &lt;/systemProperties&gt;\r\n                                   &lt;dependencies&gt;\r\n                                       &lt;dependency&gt;\r\n                                           &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n                                           &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n                                       &lt;/dependency&gt;\r\n                                   &lt;/dependencies&gt;\r\n                               &lt;/container&gt;\r\n                               &lt;configuration&gt;\r\n\r\n                                   &lt;configfile&gt;\r\n                                       &lt;file&gt;${basedir}/target/cargo/installs/context.xml&lt;/file&gt;\r\n                                       &lt;todir&gt;conf/&lt;/todir&gt;\r\n                                       &lt;tofile&gt;context.xml&lt;/tofile&gt;\r\n                                       &lt;configfile&gt;true&lt;/configfile&gt;\r\n                                       &lt;overwrite&gt;true&lt;/overwrite&gt;\r\n                                   &lt;/configfile&gt;\r\n                                   &lt;properties&gt;\r\n                                       &lt;cargo.servlet.port&gt;8080&lt;/cargo.servlet.port&gt;\r\n                                       &lt;!--ะขัั ะผะตะฝััั--&gt;\r\n                                       &lt;cargo.servlet.users&gt;admin:admin:manager-script&lt;/cargo.servlet.users&gt;\r\n                                       &lt;cargo.jvmargs&gt;\r\n                                           -Xmx1024m -XX:MaxPermSize=512m\r\n                                           -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8000\r\n                                           -Xnoagent\r\n                                           -Djava.compiler=NONE\r\n                                       &lt;/cargo.jvmargs&gt;&lt;/properties&gt;\r\n                               &lt;/configuration&gt;\r\n","title":"Cargo embedded tomcat: custom context.xml","body":"<p>I am using cargo to automate war deployment on Tomcat. However, i get a trouble: i can`t replace default tomcat files with my custom as my files are copied first and then get overwritten by default. I spent hours for resolving this problem but nothing works. Here is my pom.xml</p>\n\n<pre><code>    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                         &lt;executions&gt;\n                             &lt;execution&gt;\n                                 &lt;id&gt;replace-tomcat-users-xml&lt;/id&gt;\n                                 &lt;phase&gt;process-test-resources&lt;/phase&gt;\n                                 &lt;goals&gt;\n                                     &lt;goal&gt;copy-resources&lt;/goal&gt;\n                                 &lt;/goals&gt;\n                                 &lt;configuration&gt;\n                                     &lt;outputDirectory&gt;${basedir}/target/apache-tomcat-${version.tomcat}/conf/&lt;/outputDirectory&gt;\n                                     &lt;resources&gt;\n                                         &lt;resource&gt;\n                                             &lt;directory&gt;src/test/resources/&lt;/directory&gt;\n                                             &lt;includes&gt;\n                                                 &lt;include&gt;context.xml&lt;/include&gt;\n                                             &lt;/includes&gt;\n                                         &lt;/resource&gt;\n                                     &lt;/resources&gt;\n                                 &lt;/configuration&gt;\n                             &lt;/execution&gt;\n                             &lt;execution&gt;\n                                 &lt;id&gt;replace-tomcat-users-xml-cargo&lt;/id&gt;\n                                 &lt;phase&gt;process-test-resources&lt;/phase&gt;\n                                 &lt;goals&gt;\n                                     &lt;goal&gt;copy-resources&lt;/goal&gt;\n                                 &lt;/goals&gt;\n                                 &lt;configuration&gt;\n                                     &lt;outputDirectory&gt;${basedir}/target/cargo/installs/tomcat-${version.tomcat}/apache-tomcat-${version.tomcat}&lt;/outputDirectory&gt;\n                                     &lt;resources&gt;\n                                         &lt;resource&gt;\n                                             &lt;directory&gt;src/test/resources/&lt;/directory&gt;\n                                             &lt;includes&gt;\n                                                 &lt;include&gt;context.xml&lt;/include&gt;\n                                             &lt;/includes&gt;\n                                         &lt;/resource&gt;\n                                     &lt;/resources&gt;\n                                 &lt;/configuration&gt;\n                             &lt;/execution&gt;\n                         &lt;/executions&gt;\n                     &lt;/plugin&gt;\n</code></pre>\n\n<p>and here is cargo using:</p>\n\n<pre><code>&lt;plugin&gt;\n                       &lt;groupId&gt;org.codehaus.cargo&lt;/groupId&gt;\n                       &lt;artifactId&gt;cargo-maven2-plugin&lt;/artifactId&gt;\n                       &lt;version&gt;1.4.11&lt;/version&gt;\n                       &lt;configuration&gt;\n                           &lt;skip&gt;false&lt;/skip&gt;\n                           &lt;container&gt;\n                               &lt;containerId&gt;tomcat7x&lt;/containerId&gt;\n                               &lt;log&gt;${project.build.directory}/cargo.log&lt;/log&gt;\n                               &lt;artifactInstaller&gt;\n                                   &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n                                   &lt;artifactId&gt;tomcat&lt;/artifactId&gt;\n                                   &lt;version&gt;${version.tomcat}&lt;/version&gt;\n                                   &lt;type&gt;zip&lt;/type&gt;\n                               &lt;/artifactInstaller&gt;\n                               &lt;systemProperties&gt;\n                                   &lt;tomcat.home.dir&gt;\n                                       ${basedir}/target/cargo/installs/apache-tomcat-${version.tomcat}/apache-tomcat-${version.tomcat}\n                                   &lt;/tomcat.home.dir&gt;\n                                   &lt;tomcat.server.home.dir&gt;\n                                       ${basedir}/target/cargo/installs/apache-tomcat-${version.tomcat}/apache-tomcat-${version.tomcat}\n                                   &lt;/tomcat.server.home.dir&gt;\n                               &lt;/systemProperties&gt;\n                               &lt;dependencies&gt;\n                                   &lt;dependency&gt;\n                                       &lt;groupId&gt;mysql&lt;/groupId&gt;\n                                       &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n                                   &lt;/dependency&gt;\n                               &lt;/dependencies&gt;\n                           &lt;/container&gt;\n                           &lt;configuration&gt;\n\n                               &lt;configfile&gt;\n                                   &lt;file&gt;${basedir}/target/cargo/installs/context.xml&lt;/file&gt;\n                                   &lt;todir&gt;conf/&lt;/todir&gt;\n                                   &lt;tofile&gt;context.xml&lt;/tofile&gt;\n                                   &lt;configfile&gt;true&lt;/configfile&gt;\n                                   &lt;overwrite&gt;true&lt;/overwrite&gt;\n                               &lt;/configfile&gt;\n                               &lt;properties&gt;\n                                   &lt;cargo.servlet.port&gt;8080&lt;/cargo.servlet.port&gt;\n                                   &lt;!--ะขัั ะผะตะฝััั--&gt;\n                                   &lt;cargo.servlet.users&gt;admin:admin:manager-script&lt;/cargo.servlet.users&gt;\n                                   &lt;cargo.jvmargs&gt;\n                                       -Xmx1024m -XX:MaxPermSize=512m\n                                       -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8000\n                                       -Xnoagent\n                                       -Djava.compiler=NONE\n                                   &lt;/cargo.jvmargs&gt;&lt;/properties&gt;\n                           &lt;/configuration&gt;\n</code></pre>\n"},{"tags":["java","micronaut","micronaut-data"],"owner":{"account_id":1428782,"reputation":351,"user_id":1432317,"display_name":"Olav Gr&#248;n&#229;s Gjerde"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685530866,"creation_date":1685530866,"question_id":76372793,"body_markdown":"I would like to do something similar as with Spring Boot JPA\r\n```java\r\n@ElementCollection\r\n@CollectionTable(name = &quot;timeseries_security_categories&quot;, joinColumns = @JoinColumn(name = &quot;timeseries_id&quot;))\r\n@Column(name = &quot;security_categories_integer&quot;)\r\nprivate Set&lt;Integer&gt; securityCategories = new HashSet&lt;&gt;();\r\n```\r\n\r\nHow can I do this with Micronaut Data JDBC?\r\n\r\n\r\n# I&#39;ve also tried a work around, but I cannot get it to work either\r\n\r\nI&#39;m not sure if this is possible with Micronaut Data yet, however I also tried a workaround where I created a mapped entity. But I cannot get this to work either\r\n\r\nTimeseries class\r\n```java\r\n@MappedEntity(value = &quot;timeseries&quot;)\r\npublic class Timeseries {\r\n\r\n    @Id\r\n    private Long id;\r\n\r\n    @Relation(value = Relation.Kind.ONE_TO_MANY, mappedBy = &quot;timeseries&quot;)\r\n    private Set&lt;TimeseriesSecurityCategory&gt; securityCategories = new HashSet&lt;&gt;();\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public Timeseries setId(Long id) {\r\n        this.id = id;\r\n        return this;\r\n    }\r\n\r\n    public Set&lt;TimeseriesSecurityCategory&gt; getSecurityCategories() {\r\n        return securityCategories;\r\n    }\r\n\r\n    public Timeseries setSecurityCategories(Set&lt;TimeseriesSecurityCategory&gt; securityCategories) {\r\n        this.securityCategories = securityCategories;\r\n        return this;\r\n    }\r\n}\r\n```\r\nTimeseries Security Category association\r\n```java\r\n@MappedEntity(value = &quot;timeseries_security_categories&quot;)\r\n@Serdeable\r\n@Introspected\r\npublic class TimeseriesSecurityCategory {\r\n\r\n    @MappedProperty(&quot;timeseries_id&quot;)\r\n    @Relation(value = Relation.Kind.MANY_TO_ONE)\r\n    private Timeseries timeseries;\r\n\r\n    @MappedProperty(&quot;security_categories_integer&quot;)\r\n    private Integer value;\r\n\r\n    public Timeseries getTimeseries() {\r\n        return timeseries;\r\n    }\r\n\r\n    public Integer getValue() {\r\n        return value;\r\n    }\r\n\r\n    public TimeseriesSecurityCategory setTimeseries(Timeseries t) {\r\n        this.timeseries = t;\r\n        return this;\r\n    }\r\n\r\n    public TimeseriesSecurityCategory setValue(Integer value) {\r\n        this.value = value;\r\n        return this;\r\n    }\r\n\r\n}\r\n```\r\nAnd the repository\r\n```java\r\n@JdbcRepository(dialect = Dialect.POSTGRES)\r\n@Join(value = &quot;securityCategories&quot;, type = Join.Type.LEFT_FETCH)\r\npublic abstract class TimeseriesRepository implements CrudRepository&lt;Timeseries, Long&gt; {\r\n\r\n    private final JdbcOperations jdbcOperations;\r\n\r\n    public TimeseriesRepository(JdbcOperations jdbcOperations) {\r\n        this.jdbcOperations = jdbcOperations;\r\n    }\r\n\r\n    public abstract Collection&lt;Timeseries&gt; list();\r\n\r\n}\r\n```\r\n\r\nThe list method generates a valid SQL, however the returned collection of securityCategory is always empty. Like it cannot bind the association to the timeseries.\r\nThe generated SQL:\r\n```sql\r\nSELECT timeseries_.&quot;id&quot;,\r\n       timeseries_security_categories_.&quot;timeseries_id&quot; AS security_categories_timeseries_id,\r\n       timeseries_security_categories_.&quot;security_categories_integer&quot; AS security_categories_security_categories_integer\r\nFROM &quot;timeseries&quot; timeseries_\r\n    LEFT JOIN &quot;timeseries_security_categories&quot; timeseries_security_categories_ ON timeseries_.&quot;id&quot;=timeseries_security_categories_.&quot;timeseries_id&quot;\r\n\r\n```\r\n\r\n\r\n","title":"How can I create a List of numbers or strings association with Micronaut Data JDBC?","body":"<p>I would like to do something similar as with Spring Boot JPA</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ElementCollection\n@CollectionTable(name = &quot;timeseries_security_categories&quot;, joinColumns = @JoinColumn(name = &quot;timeseries_id&quot;))\n@Column(name = &quot;security_categories_integer&quot;)\nprivate Set&lt;Integer&gt; securityCategories = new HashSet&lt;&gt;();\n</code></pre>\n<p>How can I do this with Micronaut Data JDBC?</p>\n<h1>I've also tried a work around, but I cannot get it to work either</h1>\n<p>I'm not sure if this is possible with Micronaut Data yet, however I also tried a workaround where I created a mapped entity. But I cannot get this to work either</p>\n<p>Timeseries class</p>\n<pre class=\"lang-java prettyprint-override\"><code>@MappedEntity(value = &quot;timeseries&quot;)\npublic class Timeseries {\n\n    @Id\n    private Long id;\n\n    @Relation(value = Relation.Kind.ONE_TO_MANY, mappedBy = &quot;timeseries&quot;)\n    private Set&lt;TimeseriesSecurityCategory&gt; securityCategories = new HashSet&lt;&gt;();\n\n    public Long getId() {\n        return id;\n    }\n\n    public Timeseries setId(Long id) {\n        this.id = id;\n        return this;\n    }\n\n    public Set&lt;TimeseriesSecurityCategory&gt; getSecurityCategories() {\n        return securityCategories;\n    }\n\n    public Timeseries setSecurityCategories(Set&lt;TimeseriesSecurityCategory&gt; securityCategories) {\n        this.securityCategories = securityCategories;\n        return this;\n    }\n}\n</code></pre>\n<p>Timeseries Security Category association</p>\n<pre class=\"lang-java prettyprint-override\"><code>@MappedEntity(value = &quot;timeseries_security_categories&quot;)\n@Serdeable\n@Introspected\npublic class TimeseriesSecurityCategory {\n\n    @MappedProperty(&quot;timeseries_id&quot;)\n    @Relation(value = Relation.Kind.MANY_TO_ONE)\n    private Timeseries timeseries;\n\n    @MappedProperty(&quot;security_categories_integer&quot;)\n    private Integer value;\n\n    public Timeseries getTimeseries() {\n        return timeseries;\n    }\n\n    public Integer getValue() {\n        return value;\n    }\n\n    public TimeseriesSecurityCategory setTimeseries(Timeseries t) {\n        this.timeseries = t;\n        return this;\n    }\n\n    public TimeseriesSecurityCategory setValue(Integer value) {\n        this.value = value;\n        return this;\n    }\n\n}\n</code></pre>\n<p>And the repository</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JdbcRepository(dialect = Dialect.POSTGRES)\n@Join(value = &quot;securityCategories&quot;, type = Join.Type.LEFT_FETCH)\npublic abstract class TimeseriesRepository implements CrudRepository&lt;Timeseries, Long&gt; {\n\n    private final JdbcOperations jdbcOperations;\n\n    public TimeseriesRepository(JdbcOperations jdbcOperations) {\n        this.jdbcOperations = jdbcOperations;\n    }\n\n    public abstract Collection&lt;Timeseries&gt; list();\n\n}\n</code></pre>\n<p>The list method generates a valid SQL, however the returned collection of securityCategory is always empty. Like it cannot bind the association to the timeseries.\nThe generated SQL:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT timeseries_.&quot;id&quot;,\n       timeseries_security_categories_.&quot;timeseries_id&quot; AS security_categories_timeseries_id,\n       timeseries_security_categories_.&quot;security_categories_integer&quot; AS security_categories_security_categories_integer\nFROM &quot;timeseries&quot; timeseries_\n    LEFT JOIN &quot;timeseries_security_categories&quot; timeseries_security_categories_ ON timeseries_.&quot;id&quot;=timeseries_security_categories_.&quot;timeseries_id&quot;\n\n</code></pre>\n"},{"tags":["java","spring-batch"],"answers":[{"comments":[{"owner":{"account_id":18936970,"reputation":209,"user_id":13817825,"display_name":"phildeg31"},"score":0,"creation_date":1685519447,"post_id":76366209,"comment_id":134669811,"body_markdown":"Than you for your answer. When you say that JdbcBatchItemWriter is not what I need, do you know what I can use instead of that please to update and insert each tables? Do I have to use a compositeItemWriter?","body":"Than you for your answer. When you say that JdbcBatchItemWriter is not what I need, do you know what I can use instead of that please to update and insert each tables? Do I have to use a compositeItemWriter?"},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1685530813,"post_id":76366209,"comment_id":134672174,"body_markdown":"Sorry i was wrong. You can use either JDBC or JPA. Please check the updated answer.","body":"Sorry i was wrong. You can use either JDBC or JPA. Please check the updated answer."}],"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1685530722,"creation_date":1685459177,"answer_id":76366209,"question_id":76365333,"body_markdown":"Item writer gets a list of items because it is supposed to write all items gathered in a chunk. But as you set the chunk size to one the list will contain only one item. You can persist just this one and it will be committed immediately.\r\n\r\nAnd if the processor returns null the writer will not be involved for the particular item.\r\n\r\nYou can use JdbcBatchItemWriter even if the size will be one. Or RepositoryItemWriter if you prefer JPA over JDBC.\r\n\r\nHope it helps.","title":"Spring batch: Writer approach to update and insert with a commit for each item","body":"<p>Item writer gets a list of items because it is supposed to write all items gathered in a chunk. But as you set the chunk size to one the list will contain only one item. You can persist just this one and it will be committed immediately.</p>\n<p>And if the processor returns null the writer will not be involved for the particular item.</p>\n<p>You can use JdbcBatchItemWriter even if the size will be one. Or RepositoryItemWriter if you prefer JPA over JDBC.</p>\n<p>Hope it helps.</p>\n"}],"owner":{"account_id":18936970,"reputation":209,"user_id":13817825,"display_name":"phildeg31"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":291,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76366209,"answer_count":1,"score":0,"last_activity_date":1685530722,"creation_date":1685453137,"question_id":76365333,"body_markdown":"My need is to read from a database items to process, have processors to check if each item should be processed according to rules (it retrieves data from tables and completes items with necessary data if it should be processed or return null if it is not to not process the item) and to update and write some data for each item that have been processed. The aim is to do all the update and insert queries for one item, to commit and then to treat the next item. \r\n\r\nI set a chunk size of 1 to have a commit for each item because if an item is processed and the corresponding data has been written in database, this item should not be pocessed again if the batch has failed for an other item after and is restarted.\r\n\r\nI do not understand how I can use a writer (or a compositeItemWriter) to update and insert in some tables the result of the batch. Indeed, I see that a writer receives the list of items as parameter instead of only one item to do all the update and insert queries item by item. Also, I saw that there is some implementations for ItemWriter (RepositoryItemWriter and JdbcBatchItemWriter for example) and I do not know which one I should use. Also, I do not understand if I can create and call one or some services in the writer to do all the update and insert actions.\r\n\r\nCan you help me to have the best approach for the writer part to update, insert and then commit for each item please?","title":"Spring batch: Writer approach to update and insert with a commit for each item","body":"<p>My need is to read from a database items to process, have processors to check if each item should be processed according to rules (it retrieves data from tables and completes items with necessary data if it should be processed or return null if it is not to not process the item) and to update and write some data for each item that have been processed. The aim is to do all the update and insert queries for one item, to commit and then to treat the next item.</p>\n<p>I set a chunk size of 1 to have a commit for each item because if an item is processed and the corresponding data has been written in database, this item should not be pocessed again if the batch has failed for an other item after and is restarted.</p>\n<p>I do not understand how I can use a writer (or a compositeItemWriter) to update and insert in some tables the result of the batch. Indeed, I see that a writer receives the list of items as parameter instead of only one item to do all the update and insert queries item by item. Also, I saw that there is some implementations for ItemWriter (RepositoryItemWriter and JdbcBatchItemWriter for example) and I do not know which one I should use. Also, I do not understand if I can create and call one or some services in the writer to do all the update and insert actions.</p>\n<p>Can you help me to have the best approach for the writer part to update, insert and then commit for each item please?</p>\n"},{"tags":["java","tomcat9","cargo"],"comments":[{"owner":{"account_id":24059439,"reputation":282,"user_id":18036868,"display_name":"HUTUTU"},"score":0,"creation_date":1644486846,"post_id":71062690,"comment_id":125621695,"body_markdown":"Try to introduce tomcat-jaspic-api.","body":"Try to introduce tomcat-jaspic-api."},{"owner":{"account_id":1577409,"reputation":16015,"user_id":1463522,"accept_rate":64,"display_name":"holmis83"},"score":0,"creation_date":1649753002,"post_id":71062690,"comment_id":126949773,"body_markdown":"Seems to be a problem with recent couple of versions. What if you try `&lt;version&gt;1.9.8&lt;/version&gt;` ?","body":"Seems to be a problem with recent couple of versions. What if you try <code>&lt;version&gt;1.9.8&lt;&#47;version&gt;</code> ?"},{"owner":{"account_id":1614036,"reputation":113,"user_id":21223808,"display_name":"ivan_drago"},"score":0,"creation_date":1694204300,"post_id":71062690,"comment_id":135865604,"body_markdown":"@Tzyy Khong Hiew - Did you ever solve this?  If so, can you post the solution?","body":"@Tzyy Khong Hiew - Did you ever solve this?  If so, can you post the solution?"}],"answers":[{"tags":[],"owner":{"account_id":152480,"reputation":1164,"user_id":1384839,"display_name":"slonik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685530360,"creation_date":1685530360,"answer_id":76372717,"question_id":71062690,"body_markdown":"Using embedded server comes with &quot;health warnings&quot; (https://codehaus-cargo.github.io/cargo/Embedded+Container.html) so when I migrated from tomcat7-maven-plugin to cargo-maven3-plugin I gave up on it and let it run standalone.\r\n\r\nMy configuration that works is below (it copies the db driver and context.xml in before tomcat starts with the \\&lt;files\\&gt; and \\&lt;configfiles\\&gt; tags):\r\n\r\n    \t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;org.codehaus.cargo&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;cargo-maven3-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;version&gt;1.9.9&lt;/version&gt;\r\n\t\t\t\t\t\t&lt;dependencies&gt;\r\n\t\t\t\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t\t\t\t&lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t\t&lt;artifactId&gt;tomcat-catalina&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t\t&lt;version&gt;9.0.74&lt;/version&gt;\r\n\t\t\t\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t\t\t\t&lt;groupId&gt;javax.security.auth.message&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t\t&lt;artifactId&gt;javax.security.auth.message-api&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t\t&lt;version&gt;1.1&lt;/version&gt;\r\n\t\t\t\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t\t\t\t&lt;groupId&gt;xalan&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t\t&lt;artifactId&gt;xalan&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t\t&lt;version&gt;2.7.1&lt;/version&gt;\r\n\t\t\t\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t\t\t\t&lt;/dependencies&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;skip&gt;${skipITs}&lt;/skip&gt;\r\n\t\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t\t&lt;files&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;file&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;file&gt;${project.build.directory}/${project.build.finalName}/WEB-INF/lib/postgresql-${postgres.version}.jar&lt;/file&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;todir&gt;/common/lib&lt;/todir&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;tofile&gt;postgresql-${postgres.version}.jar&lt;/tofile&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/file&gt;\r\n\t\t\t\t\t\t\t\t&lt;/files&gt;\r\n\t\t\t\t\t\t\t\t&lt;configfiles&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;configfile&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;file&gt;src/test/resources/tomcat/context.xml&lt;/file&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;todir&gt;conf/Catalina/localhost/&lt;/todir&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;tofile&gt;context.xml.default&lt;/tofile&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/configfile&gt;\r\n\t\t\t\t\t\t\t\t&lt;/configfiles&gt;\r\n\t\t\t\t\t\t\t\t&lt;properties&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;cargo.start.jvmargs&gt;\r\n\t\t\t\t\t\t\t\t\t\t-Xdebug\r\n\t\t\t\t\t\t\t\t\t\t-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8000\r\n\t\t\t\t\t\t\t\t\t\t-Xnoagent\r\n\t\t\t\t\t\t\t\t\t\t-Dmy.property=value\r\n\t\t\t\t\t\t\t\t\t&lt;/cargo.start.jvmargs&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;cargo.servlet.port&gt;${server.http.port}&lt;/cargo.servlet.port&gt;\r\n\t\t\t\t\t\t\t\t&lt;/properties&gt;\r\n\t\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t\t\t&lt;container&gt;\r\n\t\t\t\t\t\t\t\t&lt;systemProperties&gt;\r\n\t\t\t\t\t\t\t\t&lt;/systemProperties&gt;\r\n\t\t\t\t\t\t\t\t&lt;containerId&gt;tomcat9x&lt;/containerId&gt;\r\n\t\t\t\t\t\t\t\t&lt;zipUrlInstaller&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;url&gt;\r\n\t\t\t\t\t\t\t\t\t\thttps://repo.maven.apache.org/maven2/org/apache/tomcat/tomcat/9.0.62/tomcat-9.0.62.zip\r\n\t\t\t\t\t\t\t\t\t&lt;/url&gt;\r\n\t\t\t\t\t\t\t\t&lt;/zipUrlInstaller&gt;\r\n\t\t\t\t\t\t\t&lt;/container&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t\t\t&lt;id&gt;start-tomcat&lt;/id&gt;\r\n\t\t\t\t\t\t\t\t&lt;phase&gt;pre-integration-test&lt;/phase&gt;\r\n\t\t\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;goal&gt;start&lt;/goal&gt;\r\n\t\t\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;skip&gt;${skipITs}&lt;/skip&gt;\r\n\t\t\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t\t\t&lt;id&gt;stop-tomcat&lt;/id&gt;\r\n\t\t\t\t\t\t\t\t&lt;phase&gt;post-integration-test&lt;/phase&gt;\r\n\t\t\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;goal&gt;stop&lt;/goal&gt;\r\n\t\t\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;skip&gt;${skipITs}&lt;/skip&gt;\r\n\t\t\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t\t\t&lt;/executions&gt;\r\n\t\t\t\t\t&lt;/plugin&gt;\r\n","title":"upgrade tomcat7-maven-plugin to cargo-maven3-plugin with contianer Id tomcat9x","body":"<p>Using embedded server comes with &quot;health warnings&quot; (<a href=\"https://codehaus-cargo.github.io/cargo/Embedded+Container.html\" rel=\"nofollow noreferrer\">https://codehaus-cargo.github.io/cargo/Embedded+Container.html</a>) so when I migrated from tomcat7-maven-plugin to cargo-maven3-plugin I gave up on it and let it run standalone.</p>\n<p>My configuration that works is below (it copies the db driver and context.xml in before tomcat starts with the &lt;files&gt; and &lt;configfiles&gt; tags):</p>\n<pre><code>                &lt;plugin&gt;\n                    &lt;groupId&gt;org.codehaus.cargo&lt;/groupId&gt;\n                    &lt;artifactId&gt;cargo-maven3-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;1.9.9&lt;/version&gt;\n                    &lt;dependencies&gt;\n                        &lt;dependency&gt;\n                            &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n                            &lt;artifactId&gt;tomcat-catalina&lt;/artifactId&gt;\n                            &lt;version&gt;9.0.74&lt;/version&gt;\n                        &lt;/dependency&gt;\n                        &lt;dependency&gt;\n                            &lt;groupId&gt;javax.security.auth.message&lt;/groupId&gt;\n                            &lt;artifactId&gt;javax.security.auth.message-api&lt;/artifactId&gt;\n                            &lt;version&gt;1.1&lt;/version&gt;\n                        &lt;/dependency&gt;\n                        &lt;dependency&gt;\n                            &lt;groupId&gt;xalan&lt;/groupId&gt;\n                            &lt;artifactId&gt;xalan&lt;/artifactId&gt;\n                            &lt;version&gt;2.7.1&lt;/version&gt;\n                        &lt;/dependency&gt;\n                    &lt;/dependencies&gt;\n                    &lt;configuration&gt;\n                        &lt;skip&gt;${skipITs}&lt;/skip&gt;\n                        &lt;configuration&gt;\n                            &lt;files&gt;\n                                &lt;file&gt;\n                                    &lt;file&gt;${project.build.directory}/${project.build.finalName}/WEB-INF/lib/postgresql-${postgres.version}.jar&lt;/file&gt;\n                                    &lt;todir&gt;/common/lib&lt;/todir&gt;\n                                    &lt;tofile&gt;postgresql-${postgres.version}.jar&lt;/tofile&gt;\n                                &lt;/file&gt;\n                            &lt;/files&gt;\n                            &lt;configfiles&gt;\n                                &lt;configfile&gt;\n                                    &lt;file&gt;src/test/resources/tomcat/context.xml&lt;/file&gt;\n                                    &lt;todir&gt;conf/Catalina/localhost/&lt;/todir&gt;\n                                    &lt;tofile&gt;context.xml.default&lt;/tofile&gt;\n                                &lt;/configfile&gt;\n                            &lt;/configfiles&gt;\n                            &lt;properties&gt;\n                                &lt;cargo.start.jvmargs&gt;\n                                    -Xdebug\n                                    -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8000\n                                    -Xnoagent\n                                    -Dmy.property=value\n                                &lt;/cargo.start.jvmargs&gt;\n                                &lt;cargo.servlet.port&gt;${server.http.port}&lt;/cargo.servlet.port&gt;\n                            &lt;/properties&gt;\n                        &lt;/configuration&gt;\n                        &lt;container&gt;\n                            &lt;systemProperties&gt;\n                            &lt;/systemProperties&gt;\n                            &lt;containerId&gt;tomcat9x&lt;/containerId&gt;\n                            &lt;zipUrlInstaller&gt;\n                                &lt;url&gt;\n                                    https://repo.maven.apache.org/maven2/org/apache/tomcat/tomcat/9.0.62/tomcat-9.0.62.zip\n                                &lt;/url&gt;\n                            &lt;/zipUrlInstaller&gt;\n                        &lt;/container&gt;\n                    &lt;/configuration&gt;\n                    &lt;executions&gt;\n                        &lt;execution&gt;\n                            &lt;id&gt;start-tomcat&lt;/id&gt;\n                            &lt;phase&gt;pre-integration-test&lt;/phase&gt;\n                            &lt;goals&gt;\n                                &lt;goal&gt;start&lt;/goal&gt;\n                            &lt;/goals&gt;\n                            &lt;configuration&gt;\n                                &lt;skip&gt;${skipITs}&lt;/skip&gt;\n                            &lt;/configuration&gt;\n                        &lt;/execution&gt;\n                        &lt;execution&gt;\n                            &lt;id&gt;stop-tomcat&lt;/id&gt;\n                            &lt;phase&gt;post-integration-test&lt;/phase&gt;\n                            &lt;goals&gt;\n                                &lt;goal&gt;stop&lt;/goal&gt;\n                            &lt;/goals&gt;\n                            &lt;configuration&gt;\n                                &lt;skip&gt;${skipITs}&lt;/skip&gt;\n                            &lt;/configuration&gt;\n                        &lt;/execution&gt;\n                    &lt;/executions&gt;\n                &lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":24212663,"reputation":41,"user_id":18168969,"display_name":"Tzyy Khong Hiew"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":629,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1685530360,"creation_date":1644485607,"question_id":71062690,"body_markdown":"please help , configuring cargo-maven3-plugin and facing the problem below , thank you and appreciate those who have experience on the cargo and tomcat 9 plugin . thank you very much\r\n\r\npom.xml file configuration for cargo-maven3-plugin\r\n\r\n    &lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.codehaus.cargo&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;cargo-maven3-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;container&gt;\r\n\t\t\t\t\t\t&lt;containerId&gt;tomcat9x&lt;/containerId&gt;\r\n\t\t\t\t\t\t&lt;type&gt;embedded&lt;/type&gt;\r\n\t\t\t\t\t\t&lt;zipUrlInstaller&gt;\r\n\t\t\t\t\t\t\t&lt;url&gt;https://repo.maven.apache.org/maven3/org/apache/tomcat/tomcat/9.0.58/tomcat-9.0.58.zip&lt;/url&gt;\r\n\t\t\t\t\t\t&lt;/zipUrlInstaller&gt;\r\n\t\t\t\t\t&lt;/container&gt;\r\n\t\t\t\t\t&lt;deployables&gt;\r\n\t\t\t\t\t\t&lt;deployable&gt;\r\n\t\t\t\t\t\t\t&lt;properties&gt;\r\n\t\t\t\t\t\t\t\t&lt;context&gt;&lt;/context&gt;\r\n\t\t\t\t\t\t\t&lt;/properties&gt;\r\n\t\t\t\t\t\t&lt;/deployable&gt;\r\n\t\t\t\t\t&lt;/deployables&gt;\r\n\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t&lt;properties&gt;\r\n\t\t\t\t\t\t\t&lt;cargo.servlet.port&gt;8082&lt;/cargo.servlet.port&gt;\r\n\t\t\t\t\t\t&lt;/properties&gt;\r\n\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\ntomcat 9 server console startup error log : \r\n\r\n    Feb 10, 2022 5:10:20 PM org.apache.catalina.startup.ContextConfig authenticatorConfig\r\n    SEVERE: Cannot instantiate an authenticator of class [org.apache.catalina.authenticator.NonLoginAuthenticator]\r\n    java.lang.NoClassDefFoundError: javax/security/auth/message/config/RegistrationListener\r\n    \tat java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\n    \tat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1016)\r\n    \tat java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:174)\r\n    \tat java.base/java.net.URLClassLoader.defineClass(URLClassLoader.java:550)\r\n    \tat java.base/java.net.URLClassLoader$1.run(URLClassLoader.java:458)\r\n    \tat java.base/java.net.URLClassLoader$1.run(URLClassLoader.java:452)\r\n    \tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:451)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:588)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n    \tat java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\n    \tat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1016)\r\n    \tat java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:174)\r\n    \tat java.base/java.net.URLClassLoader.defineClass(URLClassLoader.java:550)\r\n    \tat java.base/java.net.URLClassLoader$1.run(URLClassLoader.java:458)\r\n    \tat java.base/java.net.URLClassLoader$1.run(URLClassLoader.java:452)\r\n    \tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:451)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:588)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n    \tat java.base/java.lang.Class.forName0(Native Method)\r\n    \tat java.base/java.lang.Class.forName(Class.java:315)\r\n    \tat org.apache.catalina.startup.ContextConfig.authenticatorConfig(ContextConfig.java:395)\r\n    \tat org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:997)\r\n    \tat org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:303)\r\n    \tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5135)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\r\n    \tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\r\n    \tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\r\n    \tat org.apache.catalina.startup.Tomcat.addWebapp(Tomcat.java:788)\r\n    \tat org.apache.catalina.startup.Tomcat.addWebapp(Tomcat.java:738)\r\n    \tat org.apache.catalina.startup.Tomcat.addWebapp(Tomcat.java:249)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat org.codehaus.cargo.container.tomcat.internal.TomcatEmbedded$Wrapper.invoke(TomcatEmbedded.java:454)\r\n    \tat org.codehaus.cargo.container.tomcat.internal.TomcatEmbedded$Wrapper.invoke(TomcatEmbedded.java:413)\r\n    \tat org.codehaus.cargo.container.tomcat.internal.TomcatEmbedded$Embedded.createContext(TomcatEmbedded.java:712)\r\n    \tat org.codehaus.cargo.container.tomcat.TomcatEmbeddedLocalDeployer.deploy(TomcatEmbeddedLocalDeployer.java:91)\r\n    \tat org.codehaus.cargo.container.tomcat.TomcatEmbeddedLocalDeployer.redeploy(TomcatEmbeddedLocalDeployer.java:149)\r\n    \tat org.codehaus.cargo.container.tomcat.internal.AbstractCatalinaEmbeddedLocalContainer.doStart(AbstractCatalinaEmbeddedLocalContainer.java:166)\r\n    \tat org.codehaus.cargo.container.spi.AbstractEmbeddedLocalContainer.startInternal(AbstractEmbeddedLocalContainer.java:78)\r\n    \tat org.codehaus.cargo.container.spi.AbstractLocalContainer.start(AbstractLocalContainer.java:228)\r\n    \tat org.codehaus.cargo.maven3.ContainerStartMojo.executeLocalContainerAction(ContainerStartMojo.java:83)\r\n    \tat org.codehaus.cargo.maven3.ContainerRunMojo.doExecute(ContainerRunMojo.java:95)\r\n    \tat org.codehaus.cargo.maven3.AbstractCargoMojo.execute(AbstractCargoMojo.java:439)\r\n    \tat org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:137)\r\n    \tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:210)\r\n    \tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:156)\r\n    \tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:148)\r\n    \tat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:117)\r\n    \tat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:81)\r\n    \tat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:56)\r\n    \tat org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:128)\r\n    \tat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:305)\r\n    \tat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:192)\r\n    \tat org.apache.maven.DefaultMaven.execute(DefaultMaven.java:105)\r\n    \tat org.apache.maven.cli.MavenCli.execute(MavenCli.java:957)\r\n    \tat org.apache.maven.cli.MavenCli.doMain(MavenCli.java:289)\r\n    \tat org.apache.maven.cli.MavenCli.main(MavenCli.java:193)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:282)\r\n    \tat org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:225)\r\n    \tat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:406)\r\n    \tat org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:347)\r\n    \tat org.codehaus.classworlds.Launcher.main(Launcher.java:47)\r\n    Caused by: java.lang.ClassNotFoundException: javax.security.auth.message.config.RegistrationListener\r\n    \tat java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:471)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:588)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n    \t... 72 more\r\n\r\nserver startup log show got classNotFoundException for RegistrationListener \r\n\r\ntomcat 7 not problem \r\n\r\nMigrating version tomcat 7 to tomcat 9 , java 8 to java 11\r\n\r\n\r\n\r\nAnyone know what wrong with my configuration ?","title":"upgrade tomcat7-maven-plugin to cargo-maven3-plugin with contianer Id tomcat9x","body":"<p>please help , configuring cargo-maven3-plugin and facing the problem below , thank you and appreciate those who have experience on the cargo and tomcat 9 plugin . thank you very much</p>\n<p>pom.xml file configuration for cargo-maven3-plugin</p>\n<pre><code>&lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.cargo&lt;/groupId&gt;\n            &lt;artifactId&gt;cargo-maven3-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;container&gt;\n                    &lt;containerId&gt;tomcat9x&lt;/containerId&gt;\n                    &lt;type&gt;embedded&lt;/type&gt;\n                    &lt;zipUrlInstaller&gt;\n                        &lt;url&gt;https://repo.maven.apache.org/maven3/org/apache/tomcat/tomcat/9.0.58/tomcat-9.0.58.zip&lt;/url&gt;\n                    &lt;/zipUrlInstaller&gt;\n                &lt;/container&gt;\n                &lt;deployables&gt;\n                    &lt;deployable&gt;\n                        &lt;properties&gt;\n                            &lt;context&gt;&lt;/context&gt;\n                        &lt;/properties&gt;\n                    &lt;/deployable&gt;\n                &lt;/deployables&gt;\n                &lt;configuration&gt;\n                    &lt;properties&gt;\n                        &lt;cargo.servlet.port&gt;8082&lt;/cargo.servlet.port&gt;\n                    &lt;/properties&gt;\n                &lt;/configuration&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>tomcat 9 server console startup error log :</p>\n<pre><code>Feb 10, 2022 5:10:20 PM org.apache.catalina.startup.ContextConfig authenticatorConfig\nSEVERE: Cannot instantiate an authenticator of class [org.apache.catalina.authenticator.NonLoginAuthenticator]\njava.lang.NoClassDefFoundError: javax/security/auth/message/config/RegistrationListener\n    at java.base/java.lang.ClassLoader.defineClass1(Native Method)\n    at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1016)\n    at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:174)\n    at java.base/java.net.URLClassLoader.defineClass(URLClassLoader.java:550)\n    at java.base/java.net.URLClassLoader$1.run(URLClassLoader.java:458)\n    at java.base/java.net.URLClassLoader$1.run(URLClassLoader.java:452)\n    at java.base/java.security.AccessController.doPrivileged(Native Method)\n    at java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:451)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:588)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n    at java.base/java.lang.ClassLoader.defineClass1(Native Method)\n    at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1016)\n    at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:174)\n    at java.base/java.net.URLClassLoader.defineClass(URLClassLoader.java:550)\n    at java.base/java.net.URLClassLoader$1.run(URLClassLoader.java:458)\n    at java.base/java.net.URLClassLoader$1.run(URLClassLoader.java:452)\n    at java.base/java.security.AccessController.doPrivileged(Native Method)\n    at java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:451)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:588)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n    at java.base/java.lang.Class.forName0(Native Method)\n    at java.base/java.lang.Class.forName(Class.java:315)\n    at org.apache.catalina.startup.ContextConfig.authenticatorConfig(ContextConfig.java:395)\n    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:997)\n    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:303)\n    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5135)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\n    at org.apache.catalina.startup.Tomcat.addWebapp(Tomcat.java:788)\n    at org.apache.catalina.startup.Tomcat.addWebapp(Tomcat.java:738)\n    at org.apache.catalina.startup.Tomcat.addWebapp(Tomcat.java:249)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.codehaus.cargo.container.tomcat.internal.TomcatEmbedded$Wrapper.invoke(TomcatEmbedded.java:454)\n    at org.codehaus.cargo.container.tomcat.internal.TomcatEmbedded$Wrapper.invoke(TomcatEmbedded.java:413)\n    at org.codehaus.cargo.container.tomcat.internal.TomcatEmbedded$Embedded.createContext(TomcatEmbedded.java:712)\n    at org.codehaus.cargo.container.tomcat.TomcatEmbeddedLocalDeployer.deploy(TomcatEmbeddedLocalDeployer.java:91)\n    at org.codehaus.cargo.container.tomcat.TomcatEmbeddedLocalDeployer.redeploy(TomcatEmbeddedLocalDeployer.java:149)\n    at org.codehaus.cargo.container.tomcat.internal.AbstractCatalinaEmbeddedLocalContainer.doStart(AbstractCatalinaEmbeddedLocalContainer.java:166)\n    at org.codehaus.cargo.container.spi.AbstractEmbeddedLocalContainer.startInternal(AbstractEmbeddedLocalContainer.java:78)\n    at org.codehaus.cargo.container.spi.AbstractLocalContainer.start(AbstractLocalContainer.java:228)\n    at org.codehaus.cargo.maven3.ContainerStartMojo.executeLocalContainerAction(ContainerStartMojo.java:83)\n    at org.codehaus.cargo.maven3.ContainerRunMojo.doExecute(ContainerRunMojo.java:95)\n    at org.codehaus.cargo.maven3.AbstractCargoMojo.execute(AbstractCargoMojo.java:439)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main(MavenCli.java:193)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:347)\n    at org.codehaus.classworlds.Launcher.main(Launcher.java:47)\nCaused by: java.lang.ClassNotFoundException: javax.security.auth.message.config.RegistrationListener\n    at java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:471)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:588)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n    ... 72 more\n</code></pre>\n<p>server startup log show got classNotFoundException for RegistrationListener</p>\n<p>tomcat 7 not problem</p>\n<p>Migrating version tomcat 7 to tomcat 9 , java 8 to java 11</p>\n<p>Anyone know what wrong with my configuration ?</p>\n"},{"tags":["java","arraylist","automation","hashmap"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1685530801,"post_id":76372691,"comment_id":134672169,"body_markdown":"You clear the list after adding it. [Is Java &quot;pass-by-reference&quot; or &quot;pass-by-value&quot;?](https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value) should be a good read to understand the problem.","body":"You clear the list after adding it. <a href=\"https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value\">Is Java &quot;pass-by-reference&quot; or &quot;pass-by-value&quot;?</a> should be a good read to understand the problem."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1685530805,"post_id":76372691,"comment_id":134672172,"body_markdown":"You only create one `ArrayList &lt;String&gt;recordList` that you fill with data, add a reference to it to `recordbatchof1000` and then empty it again with `recordList.clear();`. After the `if` statement the `recordList` is always empty (and the references that you added to `recordbatchof1000` show that too). To fix this you **must** create new lists that you can add to `recordbatchof1000`.","body":"You only create one <code>ArrayList &lt;String&gt;recordList</code> that you fill with data, add a reference to it to <code>recordbatchof1000</code> and then empty it again with <code>recordList.clear();</code>. After the <code>if</code> statement the <code>recordList</code> is always empty (and the references that you added to <code>recordbatchof1000</code> show that too). To fix this you <b>must</b> create new lists that you can add to <code>recordbatchof1000</code>."}],"owner":{"account_id":14112653,"reputation":33,"user_id":10195099,"display_name":"Shaheaz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1685530661,"answer_count":0,"score":0,"last_activity_date":1685530161,"creation_date":1685530161,"question_id":76372691,"body_markdown":"What is wrong with this code. why i am not able to get the entryset outside of this if condition?\r\n\r\npublic class test{\r\n\r\n    public static void main(String args[]) {\r\n    \r\n        ArrayList &lt;String&gt;recordList = new ArrayList();\r\n        int c = 1;\r\n        HashMap&lt;Integer, ArrayList&gt; recordbatchof1000 = new HashMap&lt;&gt;();\r\n    \r\n        for (int i = 0; i &lt; 10; i++) {\r\n    \r\n            recordList.add(String.valueOf(i));\r\n            if (recordList.size() &gt; 0) {\r\n                recordbatchof1000.put(c, recordList);\r\n                System.out.println(&quot;DEBUG:: The value of the map is  inside if condition::&quot; + recordbatchof1000.entrySet());\r\n                c++;\r\n                recordList.clear();\r\n            }\r\n                System.out.println(&quot;DEBUG:: The value of the map is  outside if condition::&quot; + recordbatchof1000.entrySet());\r\n        }\r\n        }\r\n\r\nI am getting the output as shown below but I am expecting same output inside and outside of if condition...\r\n`DEBUG:: The value of the map is  inside if condition::[1=[0]]`\r\n\r\n`DEBUG:: The value of the map is  outside if condition::[1=[]]`\r\n\r\n`DEBUG:: The value of the map is  inside if condition::[1=[1], 2=[1]]`\r\n\r\n`DEBUG:: The value of the map is  outside if condition::[1=[], 2=[]]`\r\n\r\nI am trying to add records in hashmap and read it at once outside.","title":"Why HashMap is not showing entryset outside the if condition","body":"<p>What is wrong with this code. why i am not able to get the entryset outside of this if condition?</p>\n<p>public class test{</p>\n<pre><code>public static void main(String args[]) {\n\n    ArrayList &lt;String&gt;recordList = new ArrayList();\n    int c = 1;\n    HashMap&lt;Integer, ArrayList&gt; recordbatchof1000 = new HashMap&lt;&gt;();\n\n    for (int i = 0; i &lt; 10; i++) {\n\n        recordList.add(String.valueOf(i));\n        if (recordList.size() &gt; 0) {\n            recordbatchof1000.put(c, recordList);\n            System.out.println(&quot;DEBUG:: The value of the map is  inside if condition::&quot; + recordbatchof1000.entrySet());\n            c++;\n            recordList.clear();\n        }\n            System.out.println(&quot;DEBUG:: The value of the map is  outside if condition::&quot; + recordbatchof1000.entrySet());\n    }\n    }\n</code></pre>\n<p>I am getting the output as shown below but I am expecting same output inside and outside of if condition...\n<code>DEBUG:: The value of the map is  inside if condition::[1=[0]]</code></p>\n<p><code>DEBUG:: The value of the map is  outside if condition::[1=[]]</code></p>\n<p><code>DEBUG:: The value of the map is  inside if condition::[1=[1], 2=[1]]</code></p>\n<p><code>DEBUG:: The value of the map is  outside if condition::[1=[], 2=[]]</code></p>\n<p>I am trying to add records in hashmap and read it at once outside.</p>\n"},{"tags":["java","windows","rmi","latency"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1685469966,"post_id":76366926,"comment_id":134663618,"body_markdown":"Just use sockets. Almost nothing uses RMI these days. Unless you need to learn about RPC concepts.","body":"Just use sockets. Almost nothing uses RMI these days. Unless you need to learn about RPC concepts."},{"owner":{"account_id":14493136,"reputation":41,"user_id":13015518,"display_name":"Benny"},"score":0,"creation_date":1685522496,"post_id":76366926,"comment_id":134670501,"body_markdown":"@aled Yes, ok I see your point. This is a school project and they want us to use RMI, so I have to use it.","body":"@aled Yes, ok I see your point. This is a school project and they want us to use RMI, so I have to use it."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1685534197,"post_id":76366926,"comment_id":134672934,"body_markdown":"RMI latency is usually DNS latency. Physical distance only adds milliseconds. You need to look up the `/etc/hosts` file format. Not really on-topic here.","body":"RMI latency is usually DNS latency. Physical distance only adds milliseconds. You need to look up the <code>&#47;etc&#47;hosts</code> file format. Not really on-topic here."},{"owner":{"account_id":14493136,"reputation":41,"user_id":13015518,"display_name":"Benny"},"score":0,"creation_date":1685542992,"post_id":76366926,"comment_id":134675232,"body_markdown":"@user207421 ok I did take a look at it. The thing is that I don&#39;t have any idea what I should set the hostname to.","body":"@user207421 ok I did take a look at it. The thing is that I don&#39;t have any idea what I should set the hostname to."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1686039594,"post_id":76366926,"comment_id":134740828,"body_markdown":"Err, to its IP address?","body":"Err, to its IP address?"},{"owner":{"account_id":14493136,"reputation":41,"user_id":13015518,"display_name":"Benny"},"score":0,"creation_date":1686091591,"post_id":76366926,"comment_id":134751145,"body_markdown":"that&#39;s the ip address of the host, but what about the hostname?","body":"that&#39;s the ip address of the host, but what about the hostname?"}],"owner":{"account_id":14493136,"reputation":41,"user_id":13015518,"display_name":"Benny"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685530015,"creation_date":1685464681,"question_id":76366926,"body_markdown":"I&#39;m implementing a client-server game in java. As to the connection layer, you can choose to use RMI or Sockets. I&#39;m experiencing huge lantency (roughly 20-30 seconds) using RMI with a Win10 client and a Win11 server on a private network (created using ZeroTier) run on two different machines with a physical distance of 200km. I thought the latency was due to the distance of the two machines, but if I go for the Socket connection layer, the latency is orders of magnitude smaller. After checking in the java RMI FAQ, I noticed that at C.6 they say that latency in Win Platforms might be a consequence of DNS lookup timeouts. They say that, in order to fix it, you have to add to the &quot;hosts&quot; file a hostname/address mapping. Now, my question is: what entry should I add exactly to the hosts file? I know that the address is determined by what ZeroTier assigns me, but what should the hostname be?","title":"RMI latency on Windows","body":"<p>I'm implementing a client-server game in java. As to the connection layer, you can choose to use RMI or Sockets. I'm experiencing huge lantency (roughly 20-30 seconds) using RMI with a Win10 client and a Win11 server on a private network (created using ZeroTier) run on two different machines with a physical distance of 200km. I thought the latency was due to the distance of the two machines, but if I go for the Socket connection layer, the latency is orders of magnitude smaller. After checking in the java RMI FAQ, I noticed that at C.6 they say that latency in Win Platforms might be a consequence of DNS lookup timeouts. They say that, in order to fix it, you have to add to the &quot;hosts&quot; file a hostname/address mapping. Now, my question is: what entry should I add exactly to the hosts file? I know that the address is determined by what ZeroTier assigns me, but what should the hostname be?</p>\n"},{"tags":["java","maven","cxf"],"comments":[{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1685529924,"post_id":76372603,"comment_id":134672010,"body_markdown":"there is `java9-plus` profile defined in parent pom (https://repo1.maven.org/maven2/org/apache/cxf/cxf-parent/3.5.5/cxf-parent-3.5.5.pom), which adds extra dependencies.","body":"there is <code>java9-plus</code> profile defined in parent pom (<a href=\"https://repo1.maven.org/maven2/org/apache/cxf/cxf-parent/3.5.5/cxf-parent-3.5.5.pom\" rel=\"nofollow noreferrer\">repo1.maven.org/maven2/org/apache/cxf/cxf-parent/3.5.5/&hellip;</a>), which adds extra dependencies."},{"owner":{"account_id":3020430,"reputation":909,"user_id":3176108,"display_name":"Raghu"},"score":0,"creation_date":1685530478,"post_id":76372603,"comment_id":134672108,"body_markdown":"Can you add this as an answer so that I can accept it?","body":"Can you add this as an answer so that I can accept it?"}],"owner":{"account_id":3020430,"reputation":909,"user_id":3176108,"display_name":"Raghu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685529490,"creation_date":1685529490,"question_id":76372603,"body_markdown":"I&#39;m using Apache CXF in my project and see a difference in the dependency tree when I&#39;m compiling using different Java Versions. How is maven or CXF controlling this change in the dependency tree based on Java Version?\r\n\r\nFrom whatever I could gather we can either use a Maven Profile with Activation on a specific Java Version or an enforcer plugin but both of these configurations are missing in CXF.\r\n\r\nhttps://repo1.maven.org/maven2/org/apache/cxf/cxf-core/3.5.5/cxf-core-3.5.5.pom\r\n\r\nJDK 8 Dependency Tree\r\n```\r\n[INFO] org.apache.cxf:cxf-core:bundle:3.5.5\r\n[INFO] +- junit:junit:jar:4.13.2:test\r\n[INFO] |  \\- org.hamcrest:hamcrest-core:jar:2.2:test\r\n[INFO] |     \\- org.hamcrest:hamcrest:jar:2.2:test\r\n[INFO] +- org.easymock:easymock:jar:5.0.1:test\r\n[INFO] |  \\- org.objenesis:objenesis:jar:3.3:test\r\n[INFO] +- jakarta.validation:jakarta.validation-api:jar:2.0.2:compile (optional) \r\n[INFO] +- org.ow2.asm:asm:jar:9.4:compile (optional) \r\n[INFO] +- xml-resolver:xml-resolver:jar:1.2:compile (optional) \r\n[INFO] +- org.glassfish.jaxb:jaxb-runtime:jar:2.3.5:compile\r\n[INFO] |  +- org.glassfish.jaxb:txw2:jar:2.3.5:compile\r\n[INFO] |  +- com.sun.istack:istack-commons-runtime:jar:3.0.12:compile\r\n[INFO] |  \\- com.sun.activation:jakarta.activation:jar:1.2.2:runtime\r\n[INFO] +- org.slf4j:slf4j-api:jar:1.7.36:compile (optional) \r\n[INFO] +- org.slf4j:slf4j-jdk14:jar:1.7.36:test\r\n[INFO] +- org.slf4j:jcl-over-slf4j:jar:1.7.36:test\r\n[INFO] +- cglib:cglib-nodep:jar:3.3.0:provided\r\n[INFO] +- com.fasterxml.woodstox:woodstox-core:jar:6.4.0:compile\r\n[INFO] |  \\- org.codehaus.woodstox:stax2-api:jar:4.2.1:compile\r\n[INFO] +- org.springframework:spring-beans:jar:5.3.22:compile (optional) \r\n[INFO] |  \\- org.springframework:spring-core:jar:5.3.22:compile (optional) \r\n[INFO] |     \\- org.springframework:spring-jcl:jar:5.3.22:compile (optional) \r\n[INFO] +- org.springframework:spring-context:jar:5.3.22:compile (optional) \r\n[INFO] |  \\- org.springframework:spring-expression:jar:5.3.22:compile (optional) \r\n[INFO] +- org.springframework:spring-aop:jar:5.3.22:provided (optional) \r\n[INFO] +- org.apache.aries.blueprint:org.apache.aries.blueprint.core:jar:1.10.3:provided (optional) \r\n[INFO] |  +- org.apache.aries.blueprint:org.apache.aries.blueprint.api:jar:1.0.1:provided (optional) \r\n[INFO] |  +- org.apache.aries.quiesce:org.apache.aries.quiesce.api:jar:1.0.0:provided (optional) \r\n[INFO] |  \\- org.apache.aries.proxy:org.apache.aries.proxy.api:jar:1.1.1:provided (optional) \r\n[INFO] +- org.apache.aries.blueprint:blueprint-parser:jar:1.6.1:provided (optional) \r\n[INFO] +- org.apache.ws.xmlschema:xmlschema-core:jar:2.3.0:compile\r\n[INFO] +- com.sun.mail:jakarta.mail:jar:1.6.7:test\r\n[INFO] +- com.sun.xml.fastinfoset:FastInfoset:jar:1.2.18:compile (optional) \r\n[INFO] +- org.osgi:org.osgi.core:jar:6.0.0:provided\r\n[INFO] +- org.osgi:osgi.cmpn:jar:6.0.0:provided (optional) \r\n[INFO] +- net.java.dev.msv:msv-core:jar:2013.6.1:provided (optional) \r\n[INFO] |  +- net.java.dev.msv:xsdlib:jar:2013.6.1:provided (optional) \r\n[INFO] |  |  \\- relaxngDatatype:relaxngDatatype:jar:20020414:provided (optional) \r\n[INFO] |  \\- com.sun.xml.bind.jaxb:isorelax:jar:20090621:provided (optional) \r\n[INFO] +- org.springframework.osgi:spring-osgi-io:jar:1.2.1:provided (optional) \r\n[INFO] +- org.springframework.osgi:spring-osgi-core:jar:1.2.1:provided (optional) \r\n[INFO] +- jakarta.xml.bind:jakarta.xml.bind-api:jar:2.3.3:compile\r\n[INFO] |  \\- jakarta.activation:jakarta.activation-api:jar:1.2.2:compile\r\n[INFO] \\- xerces:xercesImpl:jar:2.12.2:test\r\n[INFO]    \\- xml-apis:xml-apis:jar:1.4.01:test\r\n```\r\n\r\nJDK 16 Dependency Tree\r\n\r\n```\r\n[INFO] org.apache.cxf:cxf-core:bundle:3.5.5\r\n[INFO] +- junit:junit:jar:4.13.2:test\r\n[INFO] |  \\- org.hamcrest:hamcrest-core:jar:2.2:test\r\n[INFO] |     \\- org.hamcrest:hamcrest:jar:2.2:test\r\n[INFO] +- org.easymock:easymock:jar:5.0.1:test\r\n[INFO] |  \\- org.objenesis:objenesis:jar:3.3:test\r\n[INFO] +- jakarta.validation:jakarta.validation-api:jar:2.0.2:compile (optional) \r\n[INFO] +- org.ow2.asm:asm:jar:9.4:compile (optional) \r\n[INFO] +- xml-resolver:xml-resolver:jar:1.2:compile (optional) \r\n[INFO] +- org.glassfish.jaxb:jaxb-runtime:jar:2.3.5:compile\r\n[INFO] |  +- org.glassfish.jaxb:txw2:jar:2.3.5:compile\r\n[INFO] |  \\- com.sun.istack:istack-commons-runtime:jar:3.0.12:compile\r\n[INFO] +- org.slf4j:slf4j-api:jar:1.7.36:compile (optional) \r\n[INFO] +- org.slf4j:slf4j-jdk14:jar:1.7.36:test\r\n[INFO] +- org.slf4j:jcl-over-slf4j:jar:1.7.36:test\r\n[INFO] +- cglib:cglib-nodep:jar:3.3.0:provided\r\n[INFO] +- com.fasterxml.woodstox:woodstox-core:jar:6.4.0:compile\r\n[INFO] |  \\- org.codehaus.woodstox:stax2-api:jar:4.2.1:compile\r\n[INFO] +- org.springframework:spring-beans:jar:5.3.22:compile (optional) \r\n[INFO] |  \\- org.springframework:spring-core:jar:5.3.22:compile (optional) \r\n[INFO] |     \\- org.springframework:spring-jcl:jar:5.3.22:compile (optional) \r\n[INFO] +- org.springframework:spring-context:jar:5.3.22:compile (optional) \r\n[INFO] |  \\- org.springframework:spring-expression:jar:5.3.22:compile (optional) \r\n[INFO] +- org.springframework:spring-aop:jar:5.3.22:provided (optional) \r\n[INFO] +- org.apache.aries.blueprint:org.apache.aries.blueprint.core:jar:1.10.3:provided (optional) \r\n[INFO] |  +- org.apache.aries.blueprint:org.apache.aries.blueprint.api:jar:1.0.1:provided (optional) \r\n[INFO] |  +- org.apache.aries.quiesce:org.apache.aries.quiesce.api:jar:1.0.0:provided (optional) \r\n[INFO] |  \\- org.apache.aries.proxy:org.apache.aries.proxy.api:jar:1.1.1:provided (optional) \r\n[INFO] +- org.apache.aries.blueprint:blueprint-parser:jar:1.6.1:provided (optional) \r\n[INFO] +- org.apache.ws.xmlschema:xmlschema-core:jar:2.3.0:compile\r\n[INFO] +- com.sun.mail:jakarta.mail:jar:1.6.7:test\r\n[INFO] +- com.sun.xml.fastinfoset:FastInfoset:jar:1.2.18:compile (optional) \r\n[INFO] +- org.osgi:org.osgi.core:jar:6.0.0:provided\r\n[INFO] +- org.osgi:osgi.cmpn:jar:6.0.0:provided (optional) \r\n[INFO] +- net.java.dev.msv:msv-core:jar:2013.6.1:provided (optional) \r\n[INFO] |  +- net.java.dev.msv:xsdlib:jar:2013.6.1:provided (optional) \r\n[INFO] |  |  \\- relaxngDatatype:relaxngDatatype:jar:20020414:provided (optional) \r\n[INFO] |  \\- com.sun.xml.bind.jaxb:isorelax:jar:20090621:provided (optional) \r\n[INFO] +- org.springframework.osgi:spring-osgi-io:jar:1.2.1:provided (optional) \r\n[INFO] +- org.springframework.osgi:spring-osgi-core:jar:1.2.1:provided (optional) \r\n[INFO] +- jakarta.xml.bind:jakarta.xml.bind-api:jar:2.3.3:compile\r\n[INFO] |  \\- jakarta.activation:jakarta.activation-api:jar:1.2.2:compile\r\n[INFO] +- xerces:xercesImpl:jar:2.12.2:test\r\n[INFO] +- jakarta.annotation:jakarta.annotation-api:jar:1.3.5:compile\r\n[INFO] +- jakarta.xml.ws:jakarta.xml.ws-api:jar:2.3.3:compile\r\n[INFO] +- jakarta.jws:jakarta.jws-api:jar:2.1.0:compile\r\n[INFO] +- jakarta.xml.soap:jakarta.xml.soap-api:jar:1.4.2:compile\r\n[INFO] +- com.sun.activation:jakarta.activation:jar:1.2.2:compile\r\n[INFO] +- com.sun.xml.messaging.saaj:saaj-impl:jar:1.5.3:runtime\r\n[INFO] |  \\- org.jvnet.staxex:stax-ex:jar:1.8.3:runtime\r\n[INFO] +- org.apache.geronimo.specs:geronimo-jta_1.1_spec:jar:1.1.1:compile\r\n[INFO] \\- org.jacorb:jacorb:jar:3.9:test\r\n[INFO]    \\- org.jacorb:jacorb-omgapi:jar:3.9:test\r\n```\r\n\r\nJars that get added in JDK 16,\r\n\r\n```\r\n[INFO] +- jakarta.annotation:jakarta.annotation-api:jar:1.3.5:compile\r\n[INFO] +- jakarta.xml.ws:jakarta.xml.ws-api:jar:2.3.3:compile\r\n[INFO] +- jakarta.jws:jakarta.jws-api:jar:2.1.0:compile\r\n[INFO] +- jakarta.xml.soap:jakarta.xml.soap-api:jar:1.4.2:compile\r\n[INFO] +- com.sun.activation:jakarta.activation:jar:1.2.2:compile\r\n[INFO] +- com.sun.xml.messaging.saaj:saaj-impl:jar:1.5.3:runtime\r\n[INFO] |  \\- org.jvnet.staxex:stax-ex:jar:1.8.3:runtime\r\n[INFO] +- org.apache.geronimo.specs:geronimo-jta_1.1_spec:jar:1.1.1:compile\r\n[INFO] \\- org.jacorb:jacorb:jar:3.9:test\r\n[INFO]    \\- org.jacorb:jacorb-omgapi:jar:3.9:test\r\n```\r\n\r\nI&#39;m trying to understand how a dependency say geronimo-jta_1.1_spec is getting resolved or added to the tree when compiling using JDK 16.","title":"Difference in Dependency Resolution based on JDK Version in Apache CXF","body":"<p>I'm using Apache CXF in my project and see a difference in the dependency tree when I'm compiling using different Java Versions. How is maven or CXF controlling this change in the dependency tree based on Java Version?</p>\n<p>From whatever I could gather we can either use a Maven Profile with Activation on a specific Java Version or an enforcer plugin but both of these configurations are missing in CXF.</p>\n<p><a href=\"https://repo1.maven.org/maven2/org/apache/cxf/cxf-core/3.5.5/cxf-core-3.5.5.pom\" rel=\"nofollow noreferrer\">https://repo1.maven.org/maven2/org/apache/cxf/cxf-core/3.5.5/cxf-core-3.5.5.pom</a></p>\n<p>JDK 8 Dependency Tree</p>\n<pre><code>[INFO] org.apache.cxf:cxf-core:bundle:3.5.5\n[INFO] +- junit:junit:jar:4.13.2:test\n[INFO] |  \\- org.hamcrest:hamcrest-core:jar:2.2:test\n[INFO] |     \\- org.hamcrest:hamcrest:jar:2.2:test\n[INFO] +- org.easymock:easymock:jar:5.0.1:test\n[INFO] |  \\- org.objenesis:objenesis:jar:3.3:test\n[INFO] +- jakarta.validation:jakarta.validation-api:jar:2.0.2:compile (optional) \n[INFO] +- org.ow2.asm:asm:jar:9.4:compile (optional) \n[INFO] +- xml-resolver:xml-resolver:jar:1.2:compile (optional) \n[INFO] +- org.glassfish.jaxb:jaxb-runtime:jar:2.3.5:compile\n[INFO] |  +- org.glassfish.jaxb:txw2:jar:2.3.5:compile\n[INFO] |  +- com.sun.istack:istack-commons-runtime:jar:3.0.12:compile\n[INFO] |  \\- com.sun.activation:jakarta.activation:jar:1.2.2:runtime\n[INFO] +- org.slf4j:slf4j-api:jar:1.7.36:compile (optional) \n[INFO] +- org.slf4j:slf4j-jdk14:jar:1.7.36:test\n[INFO] +- org.slf4j:jcl-over-slf4j:jar:1.7.36:test\n[INFO] +- cglib:cglib-nodep:jar:3.3.0:provided\n[INFO] +- com.fasterxml.woodstox:woodstox-core:jar:6.4.0:compile\n[INFO] |  \\- org.codehaus.woodstox:stax2-api:jar:4.2.1:compile\n[INFO] +- org.springframework:spring-beans:jar:5.3.22:compile (optional) \n[INFO] |  \\- org.springframework:spring-core:jar:5.3.22:compile (optional) \n[INFO] |     \\- org.springframework:spring-jcl:jar:5.3.22:compile (optional) \n[INFO] +- org.springframework:spring-context:jar:5.3.22:compile (optional) \n[INFO] |  \\- org.springframework:spring-expression:jar:5.3.22:compile (optional) \n[INFO] +- org.springframework:spring-aop:jar:5.3.22:provided (optional) \n[INFO] +- org.apache.aries.blueprint:org.apache.aries.blueprint.core:jar:1.10.3:provided (optional) \n[INFO] |  +- org.apache.aries.blueprint:org.apache.aries.blueprint.api:jar:1.0.1:provided (optional) \n[INFO] |  +- org.apache.aries.quiesce:org.apache.aries.quiesce.api:jar:1.0.0:provided (optional) \n[INFO] |  \\- org.apache.aries.proxy:org.apache.aries.proxy.api:jar:1.1.1:provided (optional) \n[INFO] +- org.apache.aries.blueprint:blueprint-parser:jar:1.6.1:provided (optional) \n[INFO] +- org.apache.ws.xmlschema:xmlschema-core:jar:2.3.0:compile\n[INFO] +- com.sun.mail:jakarta.mail:jar:1.6.7:test\n[INFO] +- com.sun.xml.fastinfoset:FastInfoset:jar:1.2.18:compile (optional) \n[INFO] +- org.osgi:org.osgi.core:jar:6.0.0:provided\n[INFO] +- org.osgi:osgi.cmpn:jar:6.0.0:provided (optional) \n[INFO] +- net.java.dev.msv:msv-core:jar:2013.6.1:provided (optional) \n[INFO] |  +- net.java.dev.msv:xsdlib:jar:2013.6.1:provided (optional) \n[INFO] |  |  \\- relaxngDatatype:relaxngDatatype:jar:20020414:provided (optional) \n[INFO] |  \\- com.sun.xml.bind.jaxb:isorelax:jar:20090621:provided (optional) \n[INFO] +- org.springframework.osgi:spring-osgi-io:jar:1.2.1:provided (optional) \n[INFO] +- org.springframework.osgi:spring-osgi-core:jar:1.2.1:provided (optional) \n[INFO] +- jakarta.xml.bind:jakarta.xml.bind-api:jar:2.3.3:compile\n[INFO] |  \\- jakarta.activation:jakarta.activation-api:jar:1.2.2:compile\n[INFO] \\- xerces:xercesImpl:jar:2.12.2:test\n[INFO]    \\- xml-apis:xml-apis:jar:1.4.01:test\n</code></pre>\n<p>JDK 16 Dependency Tree</p>\n<pre><code>[INFO] org.apache.cxf:cxf-core:bundle:3.5.5\n[INFO] +- junit:junit:jar:4.13.2:test\n[INFO] |  \\- org.hamcrest:hamcrest-core:jar:2.2:test\n[INFO] |     \\- org.hamcrest:hamcrest:jar:2.2:test\n[INFO] +- org.easymock:easymock:jar:5.0.1:test\n[INFO] |  \\- org.objenesis:objenesis:jar:3.3:test\n[INFO] +- jakarta.validation:jakarta.validation-api:jar:2.0.2:compile (optional) \n[INFO] +- org.ow2.asm:asm:jar:9.4:compile (optional) \n[INFO] +- xml-resolver:xml-resolver:jar:1.2:compile (optional) \n[INFO] +- org.glassfish.jaxb:jaxb-runtime:jar:2.3.5:compile\n[INFO] |  +- org.glassfish.jaxb:txw2:jar:2.3.5:compile\n[INFO] |  \\- com.sun.istack:istack-commons-runtime:jar:3.0.12:compile\n[INFO] +- org.slf4j:slf4j-api:jar:1.7.36:compile (optional) \n[INFO] +- org.slf4j:slf4j-jdk14:jar:1.7.36:test\n[INFO] +- org.slf4j:jcl-over-slf4j:jar:1.7.36:test\n[INFO] +- cglib:cglib-nodep:jar:3.3.0:provided\n[INFO] +- com.fasterxml.woodstox:woodstox-core:jar:6.4.0:compile\n[INFO] |  \\- org.codehaus.woodstox:stax2-api:jar:4.2.1:compile\n[INFO] +- org.springframework:spring-beans:jar:5.3.22:compile (optional) \n[INFO] |  \\- org.springframework:spring-core:jar:5.3.22:compile (optional) \n[INFO] |     \\- org.springframework:spring-jcl:jar:5.3.22:compile (optional) \n[INFO] +- org.springframework:spring-context:jar:5.3.22:compile (optional) \n[INFO] |  \\- org.springframework:spring-expression:jar:5.3.22:compile (optional) \n[INFO] +- org.springframework:spring-aop:jar:5.3.22:provided (optional) \n[INFO] +- org.apache.aries.blueprint:org.apache.aries.blueprint.core:jar:1.10.3:provided (optional) \n[INFO] |  +- org.apache.aries.blueprint:org.apache.aries.blueprint.api:jar:1.0.1:provided (optional) \n[INFO] |  +- org.apache.aries.quiesce:org.apache.aries.quiesce.api:jar:1.0.0:provided (optional) \n[INFO] |  \\- org.apache.aries.proxy:org.apache.aries.proxy.api:jar:1.1.1:provided (optional) \n[INFO] +- org.apache.aries.blueprint:blueprint-parser:jar:1.6.1:provided (optional) \n[INFO] +- org.apache.ws.xmlschema:xmlschema-core:jar:2.3.0:compile\n[INFO] +- com.sun.mail:jakarta.mail:jar:1.6.7:test\n[INFO] +- com.sun.xml.fastinfoset:FastInfoset:jar:1.2.18:compile (optional) \n[INFO] +- org.osgi:org.osgi.core:jar:6.0.0:provided\n[INFO] +- org.osgi:osgi.cmpn:jar:6.0.0:provided (optional) \n[INFO] +- net.java.dev.msv:msv-core:jar:2013.6.1:provided (optional) \n[INFO] |  +- net.java.dev.msv:xsdlib:jar:2013.6.1:provided (optional) \n[INFO] |  |  \\- relaxngDatatype:relaxngDatatype:jar:20020414:provided (optional) \n[INFO] |  \\- com.sun.xml.bind.jaxb:isorelax:jar:20090621:provided (optional) \n[INFO] +- org.springframework.osgi:spring-osgi-io:jar:1.2.1:provided (optional) \n[INFO] +- org.springframework.osgi:spring-osgi-core:jar:1.2.1:provided (optional) \n[INFO] +- jakarta.xml.bind:jakarta.xml.bind-api:jar:2.3.3:compile\n[INFO] |  \\- jakarta.activation:jakarta.activation-api:jar:1.2.2:compile\n[INFO] +- xerces:xercesImpl:jar:2.12.2:test\n[INFO] +- jakarta.annotation:jakarta.annotation-api:jar:1.3.5:compile\n[INFO] +- jakarta.xml.ws:jakarta.xml.ws-api:jar:2.3.3:compile\n[INFO] +- jakarta.jws:jakarta.jws-api:jar:2.1.0:compile\n[INFO] +- jakarta.xml.soap:jakarta.xml.soap-api:jar:1.4.2:compile\n[INFO] +- com.sun.activation:jakarta.activation:jar:1.2.2:compile\n[INFO] +- com.sun.xml.messaging.saaj:saaj-impl:jar:1.5.3:runtime\n[INFO] |  \\- org.jvnet.staxex:stax-ex:jar:1.8.3:runtime\n[INFO] +- org.apache.geronimo.specs:geronimo-jta_1.1_spec:jar:1.1.1:compile\n[INFO] \\- org.jacorb:jacorb:jar:3.9:test\n[INFO]    \\- org.jacorb:jacorb-omgapi:jar:3.9:test\n</code></pre>\n<p>Jars that get added in JDK 16,</p>\n<pre><code>[INFO] +- jakarta.annotation:jakarta.annotation-api:jar:1.3.5:compile\n[INFO] +- jakarta.xml.ws:jakarta.xml.ws-api:jar:2.3.3:compile\n[INFO] +- jakarta.jws:jakarta.jws-api:jar:2.1.0:compile\n[INFO] +- jakarta.xml.soap:jakarta.xml.soap-api:jar:1.4.2:compile\n[INFO] +- com.sun.activation:jakarta.activation:jar:1.2.2:compile\n[INFO] +- com.sun.xml.messaging.saaj:saaj-impl:jar:1.5.3:runtime\n[INFO] |  \\- org.jvnet.staxex:stax-ex:jar:1.8.3:runtime\n[INFO] +- org.apache.geronimo.specs:geronimo-jta_1.1_spec:jar:1.1.1:compile\n[INFO] \\- org.jacorb:jacorb:jar:3.9:test\n[INFO]    \\- org.jacorb:jacorb-omgapi:jar:3.9:test\n</code></pre>\n<p>I'm trying to understand how a dependency say geronimo-jta_1.1_spec is getting resolved or added to the tree when compiling using JDK 16.</p>\n"},{"tags":["java","spring","spring-webflux"],"comments":[{"owner":{"account_id":23019255,"reputation":320,"user_id":17140506,"display_name":"Digsb"},"score":0,"creation_date":1636962689,"post_id":69970861,"comment_id":123688165,"body_markdown":"What type of API call is this? Are you doing large data transfer in this API call.","body":"What type of API call is this? Are you doing large data transfer in this API call."},{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1636964445,"post_id":69970861,"comment_id":123688682,"body_markdown":"See if this helps https://kalpads.medium.com/configuring-timeouts-in-spring-reactive-webclient-4bc5faf56411","body":"See if this helps <a href=\"https://kalpads.medium.com/configuring-timeouts-in-spring-reactive-webclient-4bc5faf56411\" rel=\"nofollow noreferrer\">kalpads.medium.com/&hellip;</a>"},{"owner":{"account_id":3656032,"reputation":2735,"user_id":3047038,"display_name":"Michael McFadyen"},"score":0,"creation_date":1636992988,"post_id":69970861,"comment_id":123699902,"body_markdown":"Can you please share a code snippet?","body":"Can you please share a code snippet?"},{"owner":{"account_id":23340957,"reputation":1,"user_id":17415866,"display_name":"Dinesh N"},"score":0,"creation_date":1637003872,"post_id":69970861,"comment_id":123703998,"body_markdown":"@MichaelMcFadyen - Please find the below snippet","body":"@MichaelMcFadyen - Please find the below snippet"},{"owner":{"account_id":3656032,"reputation":2735,"user_id":3047038,"display_name":"Michael McFadyen"},"score":0,"creation_date":1637008686,"post_id":69970861,"comment_id":123705674,"body_markdown":"@DineshN i&#39;m not sure you added a code snippet. Can you add it to the question?","body":"@DineshN i&#39;m not sure you added a code snippet. Can you add it to the question?"},{"owner":{"account_id":23340957,"reputation":1,"user_id":17415866,"display_name":"Dinesh N"},"score":0,"creation_date":1637149046,"post_id":69970861,"comment_id":123746700,"body_markdown":"@MichaelMcFadyen Apologies may bad - I have just added on the question - Only thing I have observed here is this is not a real TCP timeout and I see its more off a signal timeout that surfaces when there is no subscribeon from consumer or might be the case service is unable to fork a thread in the given duration within the service","body":"@MichaelMcFadyen Apologies may bad - I have just added on the question - Only thing I have observed here is this is not a real TCP timeout and I see its more off a signal timeout that surfaces when there is no subscribeon from consumer or might be the case service is unable to fork a thread in the given duration within the service"},{"owner":{"account_id":3656032,"reputation":2735,"user_id":3047038,"display_name":"Michael McFadyen"},"score":0,"creation_date":1637155097,"post_id":69970861,"comment_id":123749273,"body_markdown":"what is the value of `userPrefsAPITimeout`? Is it 5s?","body":"what is the value of <code>userPrefsAPITimeout</code>? Is it 5s?"}],"answers":[{"tags":[],"owner":{"account_id":13822754,"reputation":392,"user_id":9977815,"display_name":"mnagdev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667891210,"creation_date":1667891210,"answer_id":74356832,"question_id":69970861,"body_markdown":"For me, removing the `.timeout(Duration.ofSeconds(&lt;secondsHere&gt;))` resolved the issue.","title":"API call error: Did not observe any item or terminal signal within 5000ms (and no fallback has been configured)","body":"<p>For me, removing the <code>.timeout(Duration.ofSeconds(&lt;secondsHere&gt;))</code> resolved the issue.</p>\n"},{"tags":[],"owner":{"account_id":3156203,"reputation":4585,"user_id":2668564,"display_name":"jfk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670908314,"creation_date":1670908314,"answer_id":74780254,"question_id":69970861,"body_markdown":"Try  `onErrorReturn()`\r\n\r\n    public Mono&lt;UserSubscription&gt; getUserPrefs(String userId) {\r\n        return client.get().uri(getUserPrefsApiPath, userId)\r\n                .retrieve()\r\n                .bodyToMono(String.class)\r\n                .timeout(Duration.ofSeconds(userPrefsAPITimeout))\r\n                .onErrorReturn(//TODO//);\r\n    }","title":"API call error: Did not observe any item or terminal signal within 5000ms (and no fallback has been configured)","body":"<p>Try  <code>onErrorReturn()</code></p>\n<pre><code>public Mono&lt;UserSubscription&gt; getUserPrefs(String userId) {\n    return client.get().uri(getUserPrefsApiPath, userId)\n            .retrieve()\n            .bodyToMono(String.class)\n            .timeout(Duration.ofSeconds(userPrefsAPITimeout))\n            .onErrorReturn(//TODO//);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9336998,"reputation":61,"user_id":6930902,"display_name":"nasser"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685529191,"creation_date":1685529191,"answer_id":76372559,"question_id":69970861,"body_markdown":"This error tells you that server B failed to respond to service A within 5000ms.\r\nIt was probably important for you that the response time should be done within a limited period of time, otherwise you can remove the timeout.\r\nBut I suggest instead of clearing the timeout, print an error message and return a default value.\r\n\r\n    .timeout(Duration.ofSeconds(userPrefsAPITimeout))\r\n    .onErrorResume(e -&gt; {\r\n          log.error(&quot;error: &quot; + e.getMessage());\r\n          return Mono.empty();\r\n    });","title":"API call error: Did not observe any item or terminal signal within 5000ms (and no fallback has been configured)","body":"<p>This error tells you that server B failed to respond to service A within 5000ms.\nIt was probably important for you that the response time should be done within a limited period of time, otherwise you can remove the timeout.\nBut I suggest instead of clearing the timeout, print an error message and return a default value.</p>\n<pre><code>.timeout(Duration.ofSeconds(userPrefsAPITimeout))\n.onErrorResume(e -&gt; {\n      log.error(&quot;error: &quot; + e.getMessage());\n      return Mono.empty();\n});\n</code></pre>\n"}],"owner":{"account_id":23340957,"reputation":1,"user_id":17415866,"display_name":"Dinesh N"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":6835,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1685529191,"creation_date":1636962134,"question_id":69970861,"body_markdown":"We are using two service which are completely written in **Spring WebFlux** and while invoking/calling from service **A** to service **B**, we are seeing below error and we are unable to debug further and hard to nail down to what could be ideal root cause for this.\r\n\r\n&gt; API call error: Did not observe any item or terminal signal within 5000ms (and no fallback has been configured)\r\n\r\n    public Mono&lt;UserSubscription&gt; getUserPrefs(String userId) {\r\n        return client.get().uri(getUserPrefsApiPath, userId)\r\n                .retrieve()\r\n                .bodyToMono(String.class)\r\n                .timeout(Duration.ofSeconds(userPrefsAPITimeout))\r\n                .doOnError(ex -&gt; logError(userId, ex))\r\n                .map(resp-&gt; {\r\n                    UserSubscription us = parseUserOrAppPreferenceData(resp, userId);\r\n                    logger.info(&quot;Retrieved from User Preference API: &quot;+us);\r\n                    return  us;\r\n                })\r\n                .onErrorResume(e-&gt;{\r\n                    logger.error(&quot;Cannot retrieve user preferences - API call error: &quot;+e.getMessage(), e);\r\n                    return Mono.just(new UserSubscription(userId,null, new ArrayList&lt;&gt;()));\r\n                });\r\n    }","title":"API call error: Did not observe any item or terminal signal within 5000ms (and no fallback has been configured)","body":"<p>We are using two service which are completely written in <strong>Spring WebFlux</strong> and while invoking/calling from service <strong>A</strong> to service <strong>B</strong>, we are seeing below error and we are unable to debug further and hard to nail down to what could be ideal root cause for this.</p>\n<blockquote>\n<p>API call error: Did not observe any item or terminal signal within 5000ms (and no fallback has been configured)</p>\n</blockquote>\n<pre><code>public Mono&lt;UserSubscription&gt; getUserPrefs(String userId) {\n    return client.get().uri(getUserPrefsApiPath, userId)\n            .retrieve()\n            .bodyToMono(String.class)\n            .timeout(Duration.ofSeconds(userPrefsAPITimeout))\n            .doOnError(ex -&gt; logError(userId, ex))\n            .map(resp-&gt; {\n                UserSubscription us = parseUserOrAppPreferenceData(resp, userId);\n                logger.info(&quot;Retrieved from User Preference API: &quot;+us);\n                return  us;\n            })\n            .onErrorResume(e-&gt;{\n                logger.error(&quot;Cannot retrieve user preferences - API call error: &quot;+e.getMessage(), e);\n                return Mono.just(new UserSubscription(userId,null, new ArrayList&lt;&gt;()));\n            });\n}\n</code></pre>\n"},{"tags":["java","spring-boot","unit-testing","automated-tests","h2"],"answers":[{"tags":[],"owner":{"account_id":339155,"reputation":8863,"user_id":668455,"accept_rate":80,"display_name":"Tristan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685528558,"creation_date":1685528558,"answer_id":76372476,"question_id":76371193,"body_markdown":"I have a simple/naive answer, but maybe not the best :\r\n\r\nFor ER_BAD_NULL_ERROR, it shouldn&#39;t be tested analyzing sql error code, but instead validated before the entity is sent to the database.\r\n\r\nFor ER_DUB_ENTRY, it can be tested by fetching potential duplicates before inserting, or by relying only on the generic message.\r\n\r\nPlease feel free to give a better answer, or I will accept my own.","title":"How do you write automated test for sql errors working with both H2 errors and MySQL errors?","body":"<p>I have a simple/naive answer, but maybe not the best :</p>\n<p>For ER_BAD_NULL_ERROR, it shouldn't be tested analyzing sql error code, but instead validated before the entity is sent to the database.</p>\n<p>For ER_DUB_ENTRY, it can be tested by fetching potential duplicates before inserting, or by relying only on the generic message.</p>\n<p>Please feel free to give a better answer, or I will accept my own.</p>\n"}],"owner":{"account_id":339155,"reputation":8863,"user_id":668455,"accept_rate":80,"display_name":"Tristan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1685528558,"creation_date":1685518801,"question_id":76371193,"body_markdown":"I&#39;ve read in multiple places it&#39;s a good practice to run tests using an in-memory H2 database to run them without the need to start an external SQL server. Ideally these tests should be able to run both in &quot;local/in-memory&quot; mode with an H2 database and in &quot;integration&quot; mode with a MySQL database.\r\n\r\nI can see it works quite well for &quot;happy path&quot;/nominal scenarios, but how do you test error scenarios (error codes are not the same) ?\r\n\r\n* H2 sql error codes : https://www.h2database.com/javadoc/org/h2/api/ErrorCode.html\r\n* MySQL error codes : https://dev.mysql.com/doc/mysql-errors/8.0/en/server-error-reference.html\r\n\r\nHere is a Jacoco coverage report of the code under test with H2 database, you can see the error code would be specific in the case of MySQL database, but we get only the default exception path with H2 database :\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/j4pgG.png","title":"How do you write automated test for sql errors working with both H2 errors and MySQL errors?","body":"<p>I've read in multiple places it's a good practice to run tests using an in-memory H2 database to run them without the need to start an external SQL server. Ideally these tests should be able to run both in &quot;local/in-memory&quot; mode with an H2 database and in &quot;integration&quot; mode with a MySQL database.</p>\n<p>I can see it works quite well for &quot;happy path&quot;/nominal scenarios, but how do you test error scenarios (error codes are not the same) ?</p>\n<ul>\n<li>H2 sql error codes : <a href=\"https://www.h2database.com/javadoc/org/h2/api/ErrorCode.html\" rel=\"nofollow noreferrer\">https://www.h2database.com/javadoc/org/h2/api/ErrorCode.html</a></li>\n<li>MySQL error codes : <a href=\"https://dev.mysql.com/doc/mysql-errors/8.0/en/server-error-reference.html\" rel=\"nofollow noreferrer\">https://dev.mysql.com/doc/mysql-errors/8.0/en/server-error-reference.html</a></li>\n</ul>\n<p>Here is a Jacoco coverage report of the code under test with H2 database, you can see the error code would be specific in the case of MySQL database, but we get only the default exception path with H2 database :</p>\n<p><a href=\"https://i.stack.imgur.com/j4pgG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j4pgG.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","cpu-usage","tomcat9"],"owner":{"account_id":24680647,"reputation":35,"user_id":18574425,"display_name":"BaiTang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685528424,"creation_date":1685528424,"question_id":76372458,"body_markdown":"An online Tomcat application experiences abnormal CPU usage. Upon inspection using Arthas, it is discovered that the Tomcat poller thread occupies 100% of the CPU. At first, the program was functioning normally, but then the CPU usage suddenly spiked. Afterward, we diverted the traffic away from the problematic instance, but the CPU usage did not alleviate. The Tomcat version is 9.0.68, and the service runs on Kubernetes (k8s).\r\n\r\nHas anyone encountered a similar issue? Or is this a bug in Tomcat?\r\n\r\nstack\r\n```\r\n&quot;http-nio-8080-Poller&quot; Id=148 cpuUsage=99.97% deltaTime=201ms time=7126264ms RUNNABLE\r\n    at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)\r\n    at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)\r\n    at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)\r\n    at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)\r\n    at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)\r\n    at org.apache.tomcat.util.net.NioEndpoint$Poller.run(NioEndpoint.java:799)\r\n    at java.lang.Thread.run(Thread.java:748)\r\n```\r\n","title":"An online Tomcat application experiences abnormal CPU usage","body":"<p>An online Tomcat application experiences abnormal CPU usage. Upon inspection using Arthas, it is discovered that the Tomcat poller thread occupies 100% of the CPU. At first, the program was functioning normally, but then the CPU usage suddenly spiked. Afterward, we diverted the traffic away from the problematic instance, but the CPU usage did not alleviate. The Tomcat version is 9.0.68, and the service runs on Kubernetes (k8s).</p>\n<p>Has anyone encountered a similar issue? Or is this a bug in Tomcat?</p>\n<p>stack</p>\n<pre><code>&quot;http-nio-8080-Poller&quot; Id=148 cpuUsage=99.97% deltaTime=201ms time=7126264ms RUNNABLE\n    at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)\n    at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)\n    at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)\n    at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)\n    at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)\n    at org.apache.tomcat.util.net.NioEndpoint$Poller.run(NioEndpoint.java:799)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n"},{"tags":["java","android","memory-management","project"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1685535193,"post_id":76372444,"comment_id":134673188,"body_markdown":"You can have one project with two flavors, one for root and one for non-root. https://developer.android.com/build/build-variants","body":"You can have one project with two flavors, one for root and one for non-root. <a href=\"https://developer.android.com/build/build-variants\" rel=\"nofollow noreferrer\">developer.android.com/build/build-variants</a>"},{"owner":{"account_id":13354497,"reputation":51,"user_id":15007032,"display_name":"zaxunobi"},"score":0,"creation_date":1685598325,"post_id":76372444,"comment_id":134682996,"body_markdown":"@Robert thanks for the reply! But that would make my app &quot;heavier&quot; and therefore more prone to be killed by the system?","body":"@Robert thanks for the reply! But that would make my app &quot;heavier&quot; and therefore more prone to be killed by the system?"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1685601017,"post_id":76372444,"comment_id":134683348,"body_markdown":"No, you simply have two apps that share large parts of it&#39;s code. For each flavor you have separate folders where you can include code or assets. And in the end you execute one gradle command and get APKs for each flavor.","body":"No, you simply have two apps that share large parts of it&#39;s code. For each flavor you have separate folders where you can include code or assets. And in the end you execute one gradle command and get APKs for each flavor."},{"owner":{"account_id":13354497,"reputation":51,"user_id":15007032,"display_name":"zaxunobi"},"score":0,"creation_date":1685604182,"post_id":76372444,"comment_id":134683905,"body_markdown":"@Robert do you have an example I can look at, where there is the shared code, the code for FLAVOR_1 and code for FLAVOR_2?","body":"@Robert do you have an example I can look at, where there is the shared code, the code for FLAVOR_1 and code for FLAVOR_2?"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1685604692,"post_id":76372444,"comment_id":134684001,"body_markdown":"Flavors are a very basic concept of Android Studio/Gradle projects. There are plenty of examples online: https://www.google.com/search?q=android+flavor+example","body":"Flavors are a very basic concept of Android Studio/Gradle projects. There are plenty of examples online: <a href=\"https://www.google.com/search?q=android+flavor+example\" rel=\"nofollow noreferrer\">google.com/search?q=android+flavor+example</a>"},{"owner":{"account_id":13354497,"reputation":51,"user_id":15007032,"display_name":"zaxunobi"},"score":0,"creation_date":1685615634,"post_id":76372444,"comment_id":134686288,"body_markdown":"@Robert please check here: https://stackoverflow.com/questions/76380803/sharing-code-for-root-version-and-rootless-version-with-flavors","body":"@Robert please check here: <a href=\"https://stackoverflow.com/questions/76380803/sharing-code-for-root-version-and-rootless-version-with-flavors\" title=\"sharing code for root version and rootless version with flavors\">stackoverflow.com/questions/76380803/&hellip;</a>"}],"owner":{"account_id":13354497,"reputation":51,"user_id":15007032,"display_name":"zaxunobi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685528296,"creation_date":1685528296,"question_id":76372444,"body_markdown":"I have an android app that currently performs some tasks (heavy tasks since I am using openCV) with the use of root permissions. \r\nAt the moment I have two different apps but it gets boring handling two projects.\r\nAfter a while it gets killed by the os.\r\nNow I want to put also the option for rootless version. \r\n\r\nSo the code of the Threads would look like something like this:\r\n\r\n    void performTasks(Option option)\r\n    {\r\n    if(Option.ROOT)\r\n    rootTasks();\r\n    else\r\n    rootlessTasks();\r\n    }\r\n\r\nOf course I would need to adjust stuff inside the Service classes and MainActivity.\r\nSo I would like your suggestion if putting everything into a project would decrease efficiency regarding memory-consumption. What is your advice?","title":"Making two distinct apps (root version and rootless version) or put the code in one single app?","body":"<p>I have an android app that currently performs some tasks (heavy tasks since I am using openCV) with the use of root permissions.\nAt the moment I have two different apps but it gets boring handling two projects.\nAfter a while it gets killed by the os.\nNow I want to put also the option for rootless version.</p>\n<p>So the code of the Threads would look like something like this:</p>\n<pre><code>void performTasks(Option option)\n{\nif(Option.ROOT)\nrootTasks();\nelse\nrootlessTasks();\n}\n</code></pre>\n<p>Of course I would need to adjust stuff inside the Service classes and MainActivity.\nSo I would like your suggestion if putting everything into a project would decrease efficiency regarding memory-consumption. What is your advice?</p>\n"},{"tags":["java","file","comparison"],"comments":[{"owner":{"account_id":3046198,"reputation":2670,"user_id":2581783,"display_name":"Rene M."},"score":4,"creation_date":1418128615,"post_id":27379059,"comment_id":43207562,"body_markdown":"The size can differ, also for same content. Depending on several factors. If you realy want to compare the content, then an easy check is to make a checksum of both files and compare them. You can use md5 on the bytearray of the files. Also an compare of the bytearrays can be used.","body":"The size can differ, also for same content. Depending on several factors. If you realy want to compare the content, then an easy check is to make a checksum of both files and compare them. You can use md5 on the bytearray of the files. Also an compare of the bytearrays can be used."},{"owner":{"account_id":6432279,"reputation":882,"user_id":6159217,"accept_rate":85,"display_name":"IntegrateThis"},"score":0,"creation_date":1636857129,"post_id":27379059,"comment_id":123668234,"body_markdown":"@ReneM. I&#39;m curious under what circumstances two files with the same byte content would have different sizes?","body":"@ReneM. I&#39;m curious under what circumstances two files with the same byte content would have different sizes?"},{"owner":{"account_id":3046198,"reputation":2670,"user_id":2581783,"display_name":"Rene M."},"score":0,"creation_date":1649932098,"post_id":27379059,"comment_id":127001969,"body_markdown":"For example the block size and used partition format of the blockstorage can result in different byte sizes for the exact same content.","body":"For example the block size and used partition format of the blockstorage can result in different byte sizes for the exact same content."}],"answers":[{"tags":[],"owner":{"account_id":4138062,"reputation":518,"user_id":3394223,"accept_rate":64,"display_name":"peterremec"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1437314521,"creation_date":1418128579,"answer_id":27379126,"question_id":27379059,"body_markdown":"[This][1] should help you with your problem:\r\n\r\n    package test;\r\n    \r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    \r\n    import org.apache.commons.io.FileUtils;\r\n    \r\n    public class CompareFileContents {\r\n    \r\n    \tpublic static void main(String[] args) throws IOException {\r\n    \r\n    \t\tFile file1 = new File(&quot;test1.txt&quot;);\r\n    \t\tFile file2 = new File(&quot;test2.txt&quot;);\r\n    \t\tFile file3 = new File(&quot;test3.txt&quot;);\r\n    \r\n    \t\tboolean compare1and2 = FileUtils.contentEquals(file1, file2);\r\n    \t\tboolean compare2and3 = FileUtils.contentEquals(file2, file3);\r\n    \t\tboolean compare1and3 = FileUtils.contentEquals(file1, file3);\r\n    \r\n    \t\tSystem.out.println(&quot;Are test1.txt and test2.txt the same? &quot; + compare1and2);\r\n    \t\tSystem.out.println(&quot;Are test2.txt and test3.txt the same? &quot; + compare2and3);\r\n    \t\tSystem.out.println(&quot;Are test1.txt and test3.txt the same? &quot; + compare1and3);\r\n    \t}\r\n    }\r\n\r\n\r\n  [1]: http://www.avajava.com/tutorials/lessons/whats-a-quick-way-to-tell-if-the-contents-of-two-files-are-identical-or-not.html","title":"Determine if two files store the same content","body":"<p><a href=\"http://www.avajava.com/tutorials/lessons/whats-a-quick-way-to-tell-if-the-contents-of-two-files-are-identical-or-not.html\" rel=\"noreferrer\">This</a> should help you with your problem:</p>\n\n<pre><code>package test;\n\nimport java.io.File;\nimport java.io.IOException;\n\nimport org.apache.commons.io.FileUtils;\n\npublic class CompareFileContents {\n\n    public static void main(String[] args) throws IOException {\n\n        File file1 = new File(\"test1.txt\");\n        File file2 = new File(\"test2.txt\");\n        File file3 = new File(\"test3.txt\");\n\n        boolean compare1and2 = FileUtils.contentEquals(file1, file2);\n        boolean compare2and3 = FileUtils.contentEquals(file2, file3);\n        boolean compare1and3 = FileUtils.contentEquals(file1, file3);\n\n        System.out.println(\"Are test1.txt and test2.txt the same? \" + compare1and2);\n        System.out.println(\"Are test2.txt and test3.txt the same? \" + compare2and3);\n        System.out.println(\"Are test1.txt and test3.txt the same? \" + compare1and3);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3153744,"reputation":711,"user_id":2666587,"accept_rate":83,"display_name":"CloudyTrees"},"score":3,"creation_date":1463688254,"post_id":27379155,"comment_id":62184115,"body_markdown":"To add value, I found the `FileUtils.contentEqualsIgnoreEOL` may offer convenience for less stringent assertions.","body":"To add value, I found the <code>FileUtils.contentEqualsIgnoreEOL</code> may offer convenience for less stringent assertions."},{"owner":{"account_id":11910761,"reputation":347,"user_id":8716085,"display_name":"whatthefish"},"score":0,"creation_date":1525714375,"post_id":27379155,"comment_id":87456130,"body_markdown":"This is a great way of doing it, but if I want to match the contents of the file line by line, and then print the matching name and id each from the 2 files","body":"This is a great way of doing it, but if I want to match the contents of the file line by line, and then print the matching name and id each from the 2 files"},{"owner":{"account_id":10316138,"reputation":132,"user_id":7610413,"display_name":"PJ2104"},"score":0,"creation_date":1551771609,"post_id":27379155,"comment_id":96751316,"body_markdown":"Can we use this for images or video compare?","body":"Can we use this for images or video compare?"},{"owner":{"account_id":77967,"reputation":990,"user_id":222232,"display_name":"Skyr"},"score":1,"creation_date":1565269450,"post_id":27379155,"comment_id":101306580,"body_markdown":"Beware though that this is performance-wise probably not the optimal solution. commons-io (at least up to v2.5) uses [IOUtils](https://github.com/apache/commons-io/blob/commons-io-2.5/src/main/java/org/apache/commons/io/FileUtils.java#L753) which in turn does a (byte-wise read)[https://github.com/apache/commons-io/blob/commons-io-2.5/src/main/java/org/apache/commons/io/IOUtils.java#L2563] (at least on a buffered stream, though).\nIf the difference is far down a large file, your performance might suffer.","body":"Beware though that this is performance-wise probably not the optimal solution. commons-io (at least up to v2.5) uses <a href=\"https://github.com/apache/commons-io/blob/commons-io-2.5/src/main/java/org/apache/commons/io/FileUtils.java#L753\" rel=\"nofollow noreferrer\">IOUtils</a> which in turn does a (byte-wise read)[<a href=\"https://github.com/apache/commons-io/blob/commons-io-2.5/src/main/java/org/apache/commons/io/IOUtils.java#L2563]\" rel=\"nofollow noreferrer\">github.com/apache/commons-io/blob/commons-io-2.5/src/m&zwnj;&#8203;ain/java/&hellip;</a> (at least on a buffered stream, though). If the difference is far down a large file, your performance might suffer."}],"tags":[],"owner":{"account_id":121840,"reputation":36551,"user_id":315228,"accept_rate":100,"display_name":"SMA"},"comment_count":4,"down_vote_count":1,"up_vote_count":106,"is_accepted":false,"score":105,"last_activity_date":1418128959,"creation_date":1418128656,"answer_id":27379155,"question_id":27379059,"body_markdown":"Exactly what `FileUtils.contentEquals` method of Apache commons IO does and api is [here](https://commons.apache.org/proper/commons-io/javadocs/api-2.4/).\r\n\r\nTry something like:\r\n\r\n    File file1 = new File(&quot;file1.txt&quot;);\r\n    File file2 = new File(&quot;file2.txt&quot;);\r\n\tboolean isTwoEqual = FileUtils.contentEquals(file1, file2);\r\n\r\nIt does the following checks before actually doing the comparison:\r\n\r\n- existence of both the files\r\n- Both file&#39;s that are passed are to be of file type and not directory.\r\n- length in bytes should not be the same.\r\n- Both are different files and not one and the same.\r\n- Then compare the contents.","title":"Determine if two files store the same content","body":"<p>Exactly what <code>FileUtils.contentEquals</code> method of Apache commons IO does and api is <a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-2.4/\">here</a>.</p>\n\n<p>Try something like:</p>\n\n<pre><code>File file1 = new File(\"file1.txt\");\nFile file2 = new File(\"file2.txt\");\nboolean isTwoEqual = FileUtils.contentEquals(file1, file2);\n</code></pre>\n\n<p>It does the following checks before actually doing the comparison:</p>\n\n<ul>\n<li>existence of both the files</li>\n<li>Both file's that are passed are to be of file type and not directory.</li>\n<li>length in bytes should not be the same.</li>\n<li>Both are different files and not one and the same.</li>\n<li>Then compare the contents.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":3205177,"reputation":4088,"user_id":2706344,"accept_rate":46,"display_name":"principal-ideal-domain"},"score":2,"creation_date":1418130112,"post_id":27379430,"comment_id":43208383,"body_markdown":"I want my program also to work with big files. This could result in a OutOfMemoryError - if an array of the required size cannot be allocated, for example the file is larger that 2GB. Edit: Sorry, I just saw your remark about dealing with large files.","body":"I want my program also to work with big files. This could result in a OutOfMemoryError - if an array of the required size cannot be allocated, for example the file is larger that 2GB. Edit: Sorry, I just saw your remark about dealing with large files."},{"owner":{"account_id":995810,"reputation":8236,"user_id":1011791,"accept_rate":86,"display_name":"Chthonic Project"},"score":2,"creation_date":1418130223,"post_id":27379430,"comment_id":43208442,"body_markdown":"True. That is why I included a link to an SO page which mentions using BufferedInputStream and reading chunk-by-chunk, not the whole file. There&#39;s no point duplicating answers that are already present in SO.","body":"True. That is why I included a link to an SO page which mentions using BufferedInputStream and reading chunk-by-chunk, not the whole file. There&#39;s no point duplicating answers that are already present in SO."}],"tags":[],"owner":{"account_id":995810,"reputation":8236,"user_id":1011791,"accept_rate":86,"display_name":"Chthonic Project"},"comment_count":2,"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1418129580,"creation_date":1418129580,"answer_id":27379430,"question_id":27379059,"body_markdown":"If you don&#39;t want to use any external libraries, then simply read the files into byte arrays and compare them (won&#39;t work pre Java-7):\r\n\r\n    byte[] f1 = Files.readAllBytes(file1);\r\n    byte[] f2 = Files.readAllBytes(file2);\r\n\r\nby using [Arrays.equals][1].\r\n\r\nIf the files are large, then instead of reading the entire files into arrays, you should use `BufferedInputStream` and read the files chunk-by-chunk as explained [here][2].\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#equals(java.lang.Object[],%20java.lang.Object[])\r\n  [2]: https://stackoverflow.com/questions/13111419/using-java-7-api-to-read-a-file-byte-by-byte","title":"Determine if two files store the same content","body":"<p>If you don't want to use any external libraries, then simply read the files into byte arrays and compare them (won't work pre Java-7):</p>\n\n<pre><code>byte[] f1 = Files.readAllBytes(file1);\nbyte[] f2 = Files.readAllBytes(file2);\n</code></pre>\n\n<p>by using <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#equals(java.lang.Object[],%20java.lang.Object[])\" rel=\"noreferrer\">Arrays.equals</a>.</p>\n\n<p>If the files are large, then instead of reading the entire files into arrays, you should use <code>BufferedInputStream</code> and read the files chunk-by-chunk as explained <a href=\"https://stackoverflow.com/questions/13111419/using-java-7-api-to-read-a-file-byte-by-byte\">here</a>.</p>\n"},{"comments":[{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1437521035,"post_id":27379566,"comment_id":51061009,"body_markdown":"Can&#39;t you just wrap the input streams in `BufferedInputStream`? Then the method would be as efficient as if you used `read(byte[])` but without the complexity, right?","body":"Can&#39;t you just wrap the input streams in <code>BufferedInputStream</code>? Then the method would be as efficient as if you used <code>read(byte[])</code> but without the complexity, right?"},{"owner":{"account_id":1886487,"reputation":396597,"user_id":1705598,"accept_rate":92,"display_name":"icza"},"score":0,"creation_date":1437980226,"post_id":27379566,"comment_id":51239410,"body_markdown":"@aioobe Yes, we could. The reason why I used byte-by-byte comparison is because the `read(byte[])` method is not guaranteed to fully read the passed byte array (javadoc says _&quot;it reads up to `bytes.length`&quot;_). If the source of the underlying stream is a file, current implementations will read the full array, but there is no guarantee for this. And the code which properly handles non-full array reads would be more complex and would draw attention from the principle my code snipplet is trying to show.","body":"@aioobe Yes, we could. The reason why I used byte-by-byte comparison is because the <code>read(byte[])</code> method is not guaranteed to fully read the passed byte array (javadoc says <i>&quot;it reads up to <code>bytes.length</code>&quot;</i>). If the source of the underlying stream is a file, current implementations will read the full array, but there is no guarantee for this. And the code which properly handles non-full array reads would be more complex and would draw attention from the principle my code snipplet is trying to show."},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":1,"creation_date":1437984681,"post_id":27379566,"comment_id":51241730,"body_markdown":"I understand this, but what I&#39;m trying to say is that you would get away *without* that complexity by using `BufferedInputStream` (while still achieve the efficiency).","body":"I understand this, but what I&#39;m trying to say is that you would get away <i>without</i> that complexity by using <code>BufferedInputStream</code> (while still achieve the efficiency)."},{"owner":{"account_id":1886487,"reputation":396597,"user_id":1705598,"accept_rate":92,"display_name":"icza"},"score":0,"creation_date":1437985703,"post_id":27379566,"comment_id":51242237,"body_markdown":"@aioobe Yes, you&#39;re right. A little background for other readers: the javadoc of `BufferedInputStream.read(byte[] b, int off, int len)` does state that it tries to read the full array. And although `BufferedInputStream` does not override `FilterInputStream.read(byte[] b)`, the javadoc of `FilterInputStream.read(byte[] b)` states that the implementation calls `read(b, 0, b.length)` which in case of a `BufferedInputStream` will be a call to `BufferedInputStream.read(byte[] b, int off, int len)` method.","body":"@aioobe Yes, you&#39;re right. A little background for other readers: the javadoc of <code>BufferedInputStream.read(byte[] b, int off, int len)</code> does state that it tries to read the full array. And although <code>BufferedInputStream</code> does not override <code>FilterInputStream.read(byte[] b)</code>, the javadoc of <code>FilterInputStream.read(byte[] b)</code> states that the implementation calls <code>read(b, 0, b.length)</code> which in case of a <code>BufferedInputStream</code> will be a call to <code>BufferedInputStream.read(byte[] b, int off, int len)</code> method."},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":3,"creation_date":1437999932,"post_id":27379566,"comment_id":51251193,"body_markdown":"I&#39;m still not sure we&#39;re on the same page here. I&#39;m thinking by simply changing `Files.newInputStream(file1)` to `new BufferedInputStream(Files.newInputStream(file1))` your `is1.read()` call will correspond to a simply array access (in most cases) and the whole `read(byte[] ...)` stuff will be handled behind the curtains. So, I&#39;m suggesting you could improve your answer by wrapping the input streams in `BufferedInputStreams` and drop the comment on how it can be sped up at the cost of extra complexity.","body":"I&#39;m still not sure we&#39;re on the same page here. I&#39;m thinking by simply changing <code>Files.newInputStream(file1)</code> to <code>new BufferedInputStream(Files.newInputStream(file1))</code> your <code>is1.read()</code> call will correspond to a simply array access (in most cases) and the whole <code>read(byte[] ...)</code> stuff will be handled behind the curtains. So, I&#39;m suggesting you could improve your answer by wrapping the input streams in <code>BufferedInputStreams</code> and drop the comment on how it can be sped up at the cost of extra complexity."}],"tags":[],"owner":{"account_id":1886487,"reputation":396597,"user_id":1705598,"accept_rate":92,"display_name":"icza"},"comment_count":5,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1437985764,"creation_date":1418130015,"answer_id":27379566,"question_id":27379059,"body_markdown":"If the files are small, you can read both into the memory and compare the byte arrays.\r\n\r\nIf the files are not small, you can either compute the hashes of their content (e.g. MD5 or SHA-1) one after the other and compare the hashes (but this still leaves a very small chance of error), or you can compare their content but for this you still have to read the streams alternating.\r\n\r\nHere is an example:\r\n\r\n    boolean sameContent(Path file1, Path file2) throws IOException {\r\n        final long size = Files.size(file1);\r\n        if (size != Files.size(file2))\r\n            return false;\r\n        \r\n        if (size &lt; 4096)\r\n            return Arrays.equals(Files.readAllBytes(file1), Files.readAllBytes(file2));\r\n        \r\n        try (InputStream is1 = Files.newInputStream(file1);\r\n             InputStream is2 = Files.newInputStream(file2)) {\r\n            // Compare byte-by-byte.\r\n            // Note that this can be sped up drastically by reading large chunks\r\n            // (e.g. 16 KBs) but care must be taken as InputStream.read(byte[])\r\n            // does not neccessarily read a whole array!\r\n            int data;\r\n            while ((data = is1.read()) != -1)\r\n                if (data != is2.read())\r\n                    return false;\r\n        }\r\n        \r\n        return true;\r\n    }\r\n","title":"Determine if two files store the same content","body":"<p>If the files are small, you can read both into the memory and compare the byte arrays.</p>\n\n<p>If the files are not small, you can either compute the hashes of their content (e.g. MD5 or SHA-1) one after the other and compare the hashes (but this still leaves a very small chance of error), or you can compare their content but for this you still have to read the streams alternating.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>boolean sameContent(Path file1, Path file2) throws IOException {\n    final long size = Files.size(file1);\n    if (size != Files.size(file2))\n        return false;\n\n    if (size &lt; 4096)\n        return Arrays.equals(Files.readAllBytes(file1), Files.readAllBytes(file2));\n\n    try (InputStream is1 = Files.newInputStream(file1);\n         InputStream is2 = Files.newInputStream(file2)) {\n        // Compare byte-by-byte.\n        // Note that this can be sped up drastically by reading large chunks\n        // (e.g. 16 KBs) but care must be taken as InputStream.read(byte[])\n        // does not neccessarily read a whole array!\n        int data;\n        while ((data = is1.read()) != -1)\n            if (data != is2.read())\n                return false;\n    }\n\n    return true;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5596641,"reputation":1936,"user_id":4434202,"accept_rate":54,"display_name":"Akinn"},"score":0,"creation_date":1568196337,"post_id":56680991,"comment_id":102195486,"body_markdown":"does it load the whole files in memory? I don&#39;t find any reference on google for it","body":"does it load the whole files in memory? I don&#39;t find any reference on google for it"},{"owner":{"account_id":9376049,"reputation":3355,"user_id":7643517,"display_name":"Nolequen"},"score":2,"creation_date":1568901313,"post_id":56680991,"comment_id":102429451,"body_markdown":"As far as I know - no, it reads both files by 8kb size chunks.","body":"As far as I know - no, it reads both files by 8kb size chunks."}],"tags":[],"owner":{"account_id":9376049,"reputation":3355,"user_id":7643517,"display_name":"Nolequen"},"comment_count":2,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1561015460,"creation_date":1561015460,"answer_id":56680991,"question_id":27379059,"body_markdown":"Since Java 12 there is method [Files.mismatch][1] which returns ```-1``` if there is no mismatch in the content of the files. Thus the function would look like following:\r\n\r\n    private static boolean sameContent(Path file1, Path file2) throws IOException {\r\n        return Files.mismatch(file1, file2) == -1;\r\n    }\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/nio/file/Files.html#mismatch(java.nio.file.Path,java.nio.file.Path)","title":"Determine if two files store the same content","body":"<p>Since Java 12 there is method <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/nio/file/Files.html#mismatch(java.nio.file.Path,java.nio.file.Path)\" rel=\"noreferrer\">Files.mismatch</a> which returns <code>-1</code> if there is no mismatch in the content of the files. Thus the function would look like following:</p>\n\n<pre><code>private static boolean sameContent(Path file1, Path file2) throws IOException {\n    return Files.mismatch(file1, file2) == -1;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":13389989,"reputation":10689,"user_id":9662601,"display_name":"Samuel Philipp"},"score":0,"creation_date":1565264783,"post_id":57411525,"comment_id":101303716,"body_markdown":"Welcome to Stack Overflow! While this code snippet may solve the problem, it doesn&#39;t explain why or how it answers the question. Please [include an explanation for your code](//meta.stackexchange.com/q/114762/269535), as that really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion.","body":"Welcome to Stack Overflow! While this code snippet may solve the problem, it doesn&#39;t explain why or how it answers the question. Please <a href=\"//meta.stackexchange.com/q/114762/269535\">include an explanation for your code</a>, as that really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion."},{"owner":{"account_id":914346,"reputation":1030,"user_id":947488,"display_name":"Stefan Reich"},"score":3,"creation_date":1569238305,"post_id":57411525,"comment_id":102519502,"body_markdown":"You are comparing file sizes, not contents","body":"You are comparing file sizes, not contents"}],"tags":[],"owner":{"account_id":16473057,"reputation":1,"user_id":11901672,"display_name":"yolo"},"comment_count":2,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1565264513,"creation_date":1565263735,"answer_id":57411525,"question_id":27379059,"body_markdown":" ```\r\npackage test;  \r\n\r\n       import org.junit.jupiter.api.Test;\r\n\r\n       import java.io.IOException;\r\n       import java.nio.file.FileSystems;\r\n       import java.nio.file.Files;\r\n       import java.nio.file.Path;\r\n\r\nimport static org.junit.Assert.assertEquals;\r\n\r\npublic class CSVResultDIfference {\r\n\r\n    @Test\r\n    public void csvDifference() throws IOException {\r\n        Path file_F = FileSystems.getDefault().getPath(&quot;C:\\\\Projekts\\\\csvTestX&quot;, &quot;yolo2.csv&quot;);\r\n        long size_F = Files.size(file_F);\r\n        Path file_I = FileSystems.getDefault().getPath(&quot;C:\\\\Projekts\\\\csvTestZ&quot;, &quot;yolo2.csv&quot;);\r\n        long size_I = Files.size(file_I);\r\n        assertEquals(size_F, size_I);\r\n    \r\n    }\r\n}\r\n```\r\nit worked for me :)","title":"Determine if two files store the same content","body":"<pre><code>package test;  \n\n      import org.junit.jupiter.api.Test;\n\n      import java.io.IOException;\n      import java.nio.file.FileSystems;\n      import java.nio.file.Files;\n      import java.nio.file.Path;\n\nimport static org.junit.Assert.assertEquals;\n\npublic class CSVResultDIfference {\n\n   @Test\n   public void csvDifference() throws IOException {\n       Path file_F = FileSystems.getDefault().getPath(\"C:\\\\Projekts\\\\csvTestX\", \"yolo2.csv\");\n       long size_F = Files.size(file_F);\n       Path file_I = FileSystems.getDefault().getPath(\"C:\\\\Projekts\\\\csvTestZ\", \"yolo2.csv\");\n       long size_I = Files.size(file_I);\n       assertEquals(size_F, size_I);\n\n   }\n}\n</code></pre>\n\n<p>it worked for me :)</p>\n"},{"comments":[{"owner":{"account_id":1952883,"reputation":680,"user_id":1756598,"accept_rate":54,"display_name":"Hamster"},"score":1,"creation_date":1602249100,"post_id":59832050,"comment_id":113668740,"body_markdown":"This is now ```hasSameTextualContentAs```","body":"This is now <code>hasSameTextualContentAs</code>"},{"owner":{"account_id":36031,"reputation":665,"user_id":102469,"accept_rate":48,"display_name":"Anyul Rivas"},"score":2,"creation_date":1615110056,"post_id":59832050,"comment_id":117585405,"body_markdown":"`hasSameContentAs`method has been deprecated, please use instead [hasSameBinaryContentAs](https://www.javadoc.io/static/org.assertj/assertj-core/3.19.0/org/assertj/core/api/AbstractFileAssert.html#hasSameTextualContentAs(java.io.File)):\n\n    `assertThat(file1).hasSameBinaryContentAs(file2);`","body":"<code>hasSameContentAs</code>method has been deprecated, please use instead <a href=\"https://www.javadoc.io/static/org.assertj/assertj-core/3.19.0/org/assertj/core/api/AbstractFileAssert.html#hasSameTextualContentAs(java.io.File)\" rel=\"nofollow noreferrer\">hasSameBinaryContentAs</a>:      <code>assertThat(file1).hasSameBinaryContentAs(file2);</code>"}],"tags":[],"owner":{"account_id":4509047,"reputation":3905,"user_id":3665698,"display_name":"mcoolive"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1579561571,"creation_date":1579561571,"answer_id":59832050,"question_id":27379059,"body_markdown":"If it for unit test, then [AssertJ][1] provides a method named [hasSameContentAs][2]. An example:\r\n\r\n    Assertions.assertThat(file1).hasSameContentAs(file2)\r\n\r\n\r\n  [1]: https://joel-costigliola.github.io/assertj/\r\n  [2]: https://www.javadoc.io/doc/org.assertj/assertj-core/latest/org/assertj/core/api/AbstractFileAssert.html","title":"Determine if two files store the same content","body":"<p>If it for unit test, then <a href=\"https://joel-costigliola.github.io/assertj/\" rel=\"noreferrer\">AssertJ</a> provides a method named <a href=\"https://www.javadoc.io/doc/org.assertj/assertj-core/latest/org/assertj/core/api/AbstractFileAssert.html\" rel=\"noreferrer\">hasSameContentAs</a>. An example:</p>\n\n<pre><code>Assertions.assertThat(file1).hasSameContentAs(file2)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1414942,"reputation":1253,"user_id":1340782,"accept_rate":74,"display_name":"localhost"},"score":1,"creation_date":1632831561,"post_id":63163777,"comment_id":122595011,"body_markdown":"I&#39;ve just discovered that map can only do files up to Integer.MAX_VALUE bytes, about 2Gb.","body":"I&#39;ve just discovered that map can only do files up to Integer.MAX_VALUE bytes, about 2Gb."},{"owner":{"account_id":1414942,"reputation":1253,"user_id":1340782,"accept_rate":74,"display_name":"localhost"},"score":0,"creation_date":1632837181,"post_id":63163777,"comment_id":122597824,"body_markdown":"I ended up comparing files in chunks using the position and length fields of `map()`.","body":"I ended up comparing files in chunks using the position and length fields of <code>map()</code>."}],"tags":[],"owner":{"account_id":11428121,"reputation":91,"user_id":8377704,"display_name":"Patrick Twohig"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1596064432,"creation_date":1596064128,"answer_id":63163777,"question_id":27379059,"body_markdown":"I know I&#39;m pretty late to the party on this one, but memory mapped IO is a pretty simple way to do this if you want to use straight Java APIs and no third party dependencies. It&#39;s only a few calls to open the files, map them, and then compare use [```ByteBuffer.equals(Object)```](https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html#equals(java.lang.Object)) to compare the files.\r\n\r\nThis is probably going to give you the best performance if you expect the particular file to be large because you&#39;re offloading a majority of the IO legwork onto the OS and the otherwise highly optimized bits of the JVM (assuming you&#39;re using a decent JVM).\r\n\r\nStraight from the \r\n[FileChannel JavaDoc](https://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html#map(java.nio.channels.FileChannel.MapMode,%20long,%20long)):\r\n\r\n&gt;  For most operating systems, mapping a file into memory is more expensive than reading or writing a few tens of kilobytes of data via the usual read and write methods. From the standpoint of performance it is generally only worth mapping relatively large files into memory. \r\n\r\n```\r\nimport java.io.IOException;\r\nimport java.nio.MappedByteBuffer;\r\nimport java.nio.channels.FileChannel;\r\nimport java.nio.file.Path;\r\nimport java.nio.file.StandardOpenOption;\r\n\r\n\r\npublic class MemoryMappedCompare {\r\n\r\n    public static boolean areFilesIdenticalMemoryMapped(final Path a, final Path b) throws IOException {\r\n        try (final FileChannel fca = FileChannel.open(a, StandardOpenOption.READ);\r\n             final FileChannel fcb = FileChannel.open(b, StandardOpenOption.READ)) {\r\n            final MappedByteBuffer mbba = fca.map(FileChannel.MapMode.READ_ONLY, 0, fca.size());\r\n            final MappedByteBuffer mbbb = fcb.map(FileChannel.MapMode.READ_ONLY, 0, fcb.size());\r\n            return mbba.equals(mbbb);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n","title":"Determine if two files store the same content","body":"<p>I know I'm pretty late to the party on this one, but memory mapped IO is a pretty simple way to do this if you want to use straight Java APIs and no third party dependencies. It's only a few calls to open the files, map them, and then compare use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html#equals(java.lang.Object)\" rel=\"nofollow noreferrer\"><code>ByteBuffer.equals(Object)</code></a> to compare the files.</p>\n<p>This is probably going to give you the best performance if you expect the particular file to be large because you're offloading a majority of the IO legwork onto the OS and the otherwise highly optimized bits of the JVM (assuming you're using a decent JVM).</p>\n<p>Straight from the\n<a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html#map(java.nio.channels.FileChannel.MapMode,%20long,%20long)\" rel=\"nofollow noreferrer\">FileChannel JavaDoc</a>:</p>\n<blockquote>\n<p>For most operating systems, mapping a file into memory is more expensive than reading or writing a few tens of kilobytes of data via the usual read and write methods. From the standpoint of performance it is generally only worth mapping relatively large files into memory.</p>\n</blockquote>\n<pre><code>import java.io.IOException;\nimport java.nio.MappedByteBuffer;\nimport java.nio.channels.FileChannel;\nimport java.nio.file.Path;\nimport java.nio.file.StandardOpenOption;\n\n\npublic class MemoryMappedCompare {\n\n    public static boolean areFilesIdenticalMemoryMapped(final Path a, final Path b) throws IOException {\n        try (final FileChannel fca = FileChannel.open(a, StandardOpenOption.READ);\n             final FileChannel fcb = FileChannel.open(b, StandardOpenOption.READ)) {\n            final MappedByteBuffer mbba = fca.map(FileChannel.MapMode.READ_ONLY, 0, fca.size());\n            final MappedByteBuffer mbbb = fcb.map(FileChannel.MapMode.READ_ONLY, 0, fcb.size());\n            return mbba.equals(mbbb);\n        }\n    }\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6302144,"reputation":384,"user_id":4896439,"display_name":"Carlos Jesus Arancibia Taborga"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1630355971,"creation_date":1630074267,"answer_id":68955056,"question_id":27379059,"body_markdown":"It&#39;s &gt;=JR6 compatible, library-free and don&#39;t read all content at time.\r\n\r\n    public static boolean sameFile(File a, File b) {\r\n        if (a == null || b == null) {\r\n            return false;\r\n        }\r\n\r\n        if (a.getAbsolutePath().equals(b.getAbsolutePath())) {\r\n            return true;\r\n        }\r\n\r\n        if (!a.exists() || !b.exists()) {\r\n            return false;\r\n        }\r\n        if (a.length() != b.length()) {\r\n            return false;\r\n        }\r\n        boolean eq = true;\r\n        \r\n        FileChannel channelA;\r\n        FileChannel channelB;\r\n        try {\r\n            channelA = new RandomAccessFile(a, &quot;r&quot;).getChannel();\r\n            channelB = new RandomAccessFile(b, &quot;r&quot;).getChannel();\r\n\r\n            long channelsSize = channelA.size();\r\n            ByteBuffer buff1 = channelA.map(FileChannel.MapMode.READ_ONLY, 0, channelsSize);\r\n            ByteBuffer buff2 = channelB.map(FileChannel.MapMode.READ_ONLY, 0, channelsSize);\r\n            for (int i = 0; i &lt; channelsSize; i++) {\r\n                if (buff1.get(i) != buff2.get(i)) {\r\n                    eq = false;\r\n                    break;\r\n                }\r\n            }\r\n        } catch (FileNotFoundException ex) {\r\n            Logger.getLogger(HotUtils.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (IOException ex) {\r\n            Logger.getLogger(HotUtils.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n        return eq; \r\n    }","title":"Determine if two files store the same content","body":"<p>It's &gt;=JR6 compatible, library-free and don't read all content at time.</p>\n<pre><code>public static boolean sameFile(File a, File b) {\n    if (a == null || b == null) {\n        return false;\n    }\n\n    if (a.getAbsolutePath().equals(b.getAbsolutePath())) {\n        return true;\n    }\n\n    if (!a.exists() || !b.exists()) {\n        return false;\n    }\n    if (a.length() != b.length()) {\n        return false;\n    }\n    boolean eq = true;\n    \n    FileChannel channelA;\n    FileChannel channelB;\n    try {\n        channelA = new RandomAccessFile(a, &quot;r&quot;).getChannel();\n        channelB = new RandomAccessFile(b, &quot;r&quot;).getChannel();\n\n        long channelsSize = channelA.size();\n        ByteBuffer buff1 = channelA.map(FileChannel.MapMode.READ_ONLY, 0, channelsSize);\n        ByteBuffer buff2 = channelB.map(FileChannel.MapMode.READ_ONLY, 0, channelsSize);\n        for (int i = 0; i &lt; channelsSize; i++) {\n            if (buff1.get(i) != buff2.get(i)) {\n                eq = false;\n                break;\n            }\n        }\n    } catch (FileNotFoundException ex) {\n        Logger.getLogger(HotUtils.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (IOException ex) {\n        Logger.getLogger(HotUtils.class.getName()).log(Level.SEVERE, null, ex);\n    }\n    return eq; \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13886221,"reputation":473,"user_id":10025287,"display_name":"Milan Panic"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685528182,"creation_date":1685528182,"answer_id":76372428,"question_id":27379059,"body_markdown":"The checksum check that rene m. told you about in the comments is the best approach","title":"Determine if two files store the same content","body":"<p>The checksum check that rene m. told you about in the comments is the best approach</p>\n"}],"owner":{"account_id":3205177,"reputation":4088,"user_id":2706344,"accept_rate":46,"display_name":"principal-ideal-domain"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":131563,"favorite_count":0,"down_vote_count":0,"up_vote_count":81,"answer_count":10,"score":81,"last_activity_date":1685528182,"creation_date":1418128369,"question_id":27379059,"body_markdown":"How would you write a java function `boolean sameContent(Path file1,Path file2)`which determines if the two given paths point to files which store the same content? Of course, first, I would check if the file sizes are the same. This is a necessary condition for storing the same content. But  then I&#39;d like to listen to your approaches. If the two files are stored on the same hard drive (like in most of my cases) it&#39;s probably not the best way to jump too many times between the two streams.","title":"Determine if two files store the same content","body":"<p>How would you write a java function <code>boolean sameContent(Path file1,Path file2)</code>which determines if the two given paths point to files which store the same content? Of course, first, I would check if the file sizes are the same. This is a necessary condition for storing the same content. But  then I'd like to listen to your approaches. If the two files are stored on the same hard drive (like in most of my cases) it's probably not the best way to jump too many times between the two streams.</p>\n"},{"tags":["java","logging","javafx","gtk","java.util.logging"],"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1685389209,"post_id":76359908,"comment_id":134650228,"body_markdown":"It is probably gtk or JavaFX native code, not Java which is logging this error (my opinion).","body":"It is probably gtk or JavaFX native code, not Java which is logging this error (my opinion)."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1685389212,"post_id":76359908,"comment_id":134650229,"body_markdown":"JavaFX typically uses `System.err` directly for low-level logging. In other contexts, I believe it uses its own logger class that wraps a [`java.lang.System.Logger`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/System.Logger.html) (at least in the more recent versions). But that&#39;s assuming this warning/error was printed by Java code and not native code.","body":"JavaFX typically uses <code>System.err</code> directly for low-level logging. In other contexts, I believe it uses its own logger class that wraps a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/System.Logger.html\" rel=\"nofollow noreferrer\"><code>java.lang.System.Logger</code></a> (at least in the more recent versions). But that&#39;s assuming this warning/error was printed by Java code and not native code."},{"owner":{"account_id":14571259,"reputation":994,"user_id":10524503,"display_name":"Wortig"},"score":0,"creation_date":1685389541,"post_id":76359908,"comment_id":134650268,"body_markdown":"@jewelsea Probably these messages are produced only on Linux distros, which use gtk. If it is native code, there is no chance by sending these messages to my log4j2, right?","body":"@jewelsea Probably these messages are produced only on Linux distros, which use gtk. If it is native code, there is no chance by sending these messages to my log4j2, right?"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1685391636,"post_id":76359908,"comment_id":134650549,"body_markdown":"I donโt know why you want to do that.  You can redirect system out and err streams elsewhere if you need to. Either in the shell command that runs your app or [in java](https://stackoverflow.com/questions/3228427/redirect-system-out-println) (though the java redirect may not work for messages written by native code).","body":"I donโt know why you want to do that.  You can redirect system out and err streams elsewhere if you need to. Either in the shell command that runs your app or <a href=\"https://stackoverflow.com/questions/3228427/redirect-system-out-println\">in java</a> (though the java redirect may not work for messages written by native code)."},{"owner":{"account_id":14571259,"reputation":994,"user_id":10524503,"display_name":"Wortig"},"score":0,"creation_date":1685467726,"post_id":76359908,"comment_id":134663164,"body_markdown":"@jewelsea Because i want to log these messages to my log4j2 file as i am elsewhere doing in my code. Its cool that is is possible. However i am afraid its native.","body":"@jewelsea Because i want to log these messages to my log4j2 file as i am elsewhere doing in my code. Its cool that is is possible. However i am afraid its native."}],"answers":[{"tags":[],"owner":{"account_id":14571259,"reputation":994,"user_id":10524503,"display_name":"Wortig"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1685528165,"creation_date":1685528165,"answer_id":76372426,"question_id":76359908,"body_markdown":"It is not possible since these messages are created by native code.\r\n\r\n    System.setOut(IoBuilder.forLogger(LogManager.getLogger(&quot;JAVA SYS OUT&quot;)).buildPrintStream());\r\n    System.setErr(IoBuilder.forLogger(LogManager.getLogger(&quot;JAVA SYS ERR&quot;)).buildPrintStream());\r\n\r\nSetting `out` or `err`, does not work\r\n\r\nIoBuilder is from:\r\n\r\n    &lt;dependency&gt;  \r\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;log4j-iostreams&lt;/artifactId&gt;\r\n        &lt;version&gt;2.20.0&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"How to get logger(s) of gtk messages in javafx?","body":"<p>It is not possible since these messages are created by native code.</p>\n<pre><code>System.setOut(IoBuilder.forLogger(LogManager.getLogger(&quot;JAVA SYS OUT&quot;)).buildPrintStream());\nSystem.setErr(IoBuilder.forLogger(LogManager.getLogger(&quot;JAVA SYS ERR&quot;)).buildPrintStream());\n</code></pre>\n<p>Setting <code>out</code> or <code>err</code>, does not work</p>\n<p>IoBuilder is from:</p>\n<pre><code>&lt;dependency&gt;  \n    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n    &lt;artifactId&gt;log4j-iostreams&lt;/artifactId&gt;\n    &lt;version&gt;2.20.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":14571259,"reputation":994,"user_id":10524503,"display_name":"Wortig"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76372426,"answer_count":1,"score":0,"last_activity_date":1685528165,"creation_date":1685388399,"question_id":76359908,"body_markdown":"During startup of javafx application I get this error:\r\n\r\n `(java:16412): Gtk-WARNING **: 21:08:43.058: Theme parsing error: gtk.css:1649:16: &#39;-gtk-icon-size&#39; is not a valid property name`\r\n\r\nI do not care about cause of this error. I would like to proxy logging of gtk messages to log4j2 or configure level of gtk messages like the one above ([another example of gtk message][1]), because right now it is logged right into console.\r\n\r\nI do not know what logging system is logging these messages. I am assuming java.util.logging. If so, what is the name of the logger(s) that log gtk messages, so I can proxy it to log4j2 by removing console handler (and other handlers) from java util logger and add new handler that sends messages to log4j2 logger like so:\r\n\r\n\r\n     \r\n    private static final Logger GTK_LOGGER = Logger.getLogger(&quot;&quot;); // searching for logger name here\r\n\r\n    static {\r\n        for (val h : GTK_LOGGER.getHandlers()) {\r\n            GTK_LOGGER.removeHandler(h);\r\n        }\r\n        GTK_LOGGER.setUseParentHandlers(false);\r\n        val handlerProxy = new Handler() {\r\n             @Override\r\n             public void publish(LogRecord record) {\r\n                 final Level level = record.getLevel();\r\n                 if (level.equals(Level.INFO)) {\r\n                     log.info(record.getMessage(), record.getThrown());\r\n                 } else if (level.equals(Level.WARNING)) {\r\n                     log.warn(record.getMessage(), record.getThrown());\r\n                 } else if (level.equals(Level.SEVERE)) {\r\n                     log.error(record.getMessage(), record.getThrown());\r\n                 } else {\r\n                     log.debug(record.getMessage(), record.getThrown());\r\n                 }\r\n             }\r\n        \r\n             @Override\r\n             public void flush() {\r\n        \r\n             }\r\n        \r\n             @Override\r\n             public void close() throws SecurityException {\r\n\r\n             }\r\n        };\r\n        GTK_LOGGER.addHandler(handlerProxy);\r\n    }\r\n\r\nI tried to set javafx logger (&quot;javafx&quot;) :\r\nhttps://stackoverflow.com/questions/53158134/javafx-logging-for-java-1-8-0-192, but this logger does not log gtk messages.\r\n\r\nUsing Lombok. Lastly, if they are not logged with java.util.logging, by any chance, what system is it logged with?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/55446534/how-to-fix-java22494-gdk-warning","title":"How to get logger(s) of gtk messages in javafx?","body":"<p>During startup of javafx application I get this error:</p>\n<p><code>(java:16412): Gtk-WARNING **: 21:08:43.058: Theme parsing error: gtk.css:1649:16: '-gtk-icon-size' is not a valid property name</code></p>\n<p>I do not care about cause of this error. I would like to proxy logging of gtk messages to log4j2 or configure level of gtk messages like the one above (<a href=\"https://stackoverflow.com/questions/55446534/how-to-fix-java22494-gdk-warning\">another example of gtk message</a>), because right now it is logged right into console.</p>\n<p>I do not know what logging system is logging these messages. I am assuming java.util.logging. If so, what is the name of the logger(s) that log gtk messages, so I can proxy it to log4j2 by removing console handler (and other handlers) from java util logger and add new handler that sends messages to log4j2 logger like so:</p>\n<pre><code>private static final Logger GTK_LOGGER = Logger.getLogger(&quot;&quot;); // searching for logger name here\n\nstatic {\n    for (val h : GTK_LOGGER.getHandlers()) {\n        GTK_LOGGER.removeHandler(h);\n    }\n    GTK_LOGGER.setUseParentHandlers(false);\n    val handlerProxy = new Handler() {\n         @Override\n         public void publish(LogRecord record) {\n             final Level level = record.getLevel();\n             if (level.equals(Level.INFO)) {\n                 log.info(record.getMessage(), record.getThrown());\n             } else if (level.equals(Level.WARNING)) {\n                 log.warn(record.getMessage(), record.getThrown());\n             } else if (level.equals(Level.SEVERE)) {\n                 log.error(record.getMessage(), record.getThrown());\n             } else {\n                 log.debug(record.getMessage(), record.getThrown());\n             }\n         }\n    \n         @Override\n         public void flush() {\n    \n         }\n    \n         @Override\n         public void close() throws SecurityException {\n\n         }\n    };\n    GTK_LOGGER.addHandler(handlerProxy);\n}\n</code></pre>\n<p>I tried to set javafx logger (&quot;javafx&quot;) :\n<a href=\"https://stackoverflow.com/questions/53158134/javafx-logging-for-java-1-8-0-192\">JavaFX logging for java 1.8.0_192</a>, but this logger does not log gtk messages.</p>\n<p>Using Lombok. Lastly, if they are not logged with java.util.logging, by any chance, what system is it logged with?</p>\n"},{"tags":["java","android","executorservice"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":4,"creation_date":1366480141,"post_id":16122987,"comment_id":23029352,"body_markdown":"&quot;I see many times sample codes, in which all the time, there is a shutdown() invocation right after submiting or executing tasks&quot; -- feel free to use hyperlinks to provide evidence of your claims. Personally, I have never seen any &quot;sample codes&quot; that do what you state. It is possible that you are misinterpreting something, and we can only point that out to you if we know what &quot;sample codes&quot; you are examining.","body":"&quot;I see many times sample codes, in which all the time, there is a shutdown() invocation right after submiting or executing tasks&quot; -- feel free to use hyperlinks to provide evidence of your claims. Personally, I have never seen any &quot;sample codes&quot; that do what you state. It is possible that you are misinterpreting something, and we can only point that out to you if we know what &quot;sample codes&quot; you are examining."},{"owner":{"account_id":537437,"reputation":3531,"user_id":905938,"accept_rate":68,"display_name":"Lucas"},"score":9,"creation_date":1366488810,"post_id":16122987,"comment_id":23031717,"body_markdown":"Hi CommonsWare. First of all, I see an aggresive tone of yours(or so that seems) towards me, which I think is not validated here. I was not trying to portrait people in negative way. As for your quote, I was mostly talking about the Thinking In Java IV edition, Multitasking part. You can find many instances of that in Bruce Eckel&#39;s examples. They are mostly simple, but never the less the impression Bruce put on me, was to use shutdown very often. In any way, you focused on something that was not the main part of my post. I removed those parts cause I really don&#39;t wish to argue about it.","body":"Hi CommonsWare. First of all, I see an aggresive tone of yours(or so that seems) towards me, which I think is not validated here. I was not trying to portrait people in negative way. As for your quote, I was mostly talking about the Thinking In Java IV edition, Multitasking part. You can find many instances of that in Bruce Eckel&#39;s examples. They are mostly simple, but never the less the impression Bruce put on me, was to use shutdown very often. In any way, you focused on something that was not the main part of my post. I removed those parts cause I really don&#39;t wish to argue about it."},{"owner":{"account_id":6707817,"reputation":830,"user_id":5172114,"accept_rate":83,"display_name":"Error"},"score":2,"creation_date":1447320984,"post_id":16122987,"comment_id":55109483,"body_markdown":"hay @CommonsWare in Thinking in java book by Bruce Eckel..in concurrency/Executor page 804 Fourth Edition , he always use shutdown() method right after submitting or executing tasks in simple apps to illustrate how Executor works   as Lucas said","body":"hay @CommonsWare in Thinking in java book by Bruce Eckel..in concurrency/Executor page 804 Fourth Edition , he always use shutdown() method right after submitting or executing tasks in simple apps to illustrate how Executor works   as Lucas said"},{"owner":{"account_id":2484549,"reputation":1547,"user_id":2163245,"accept_rate":49,"display_name":"baekacaek"},"score":2,"creation_date":1449780741,"post_id":16122987,"comment_id":56167191,"body_markdown":"I know this is an old post, but I think the OP&#39;s question still stands and is valid. I&#39;ve also come across many sample codes where &quot;there is a shutdown() invocation right after execute()&quot;. http://tutorials.jenkov.com/java-util-concurrent/executorservice.html (first tutorial that comes up when you google &quot;java executorservice example&quot;)","body":"I know this is an old post, but I think the OP&#39;s question still stands and is valid. I&#39;ve also come across many sample codes where &quot;there is a shutdown() invocation right after execute()&quot;. <a href=\"http://tutorials.jenkov.com/java-util-concurrent/executorservice.html\" rel=\"nofollow noreferrer\">tutorials.jenkov.com/java-util-concurrent/executorservice.ht&zwnj;&#8203;ml</a> (first tutorial that comes up when you google &quot;java executorservice example&quot;)"},{"owner":{"account_id":5355615,"reputation":607,"user_id":4268360,"display_name":"Gregordy"},"score":0,"creation_date":1476723519,"post_id":16122987,"comment_id":67456345,"body_markdown":"Thank you, I had the same question that raised with these &quot;sample codes&quot;.\n\nhttp://www.journaldev.com/2340/java-scheduler-scheduledexecutorservice-scheduledthreadpoolexecutor-example","body":"Thank you, I had the same question that raised with these &quot;sample codes&quot;.  <a href=\"http://www.journaldev.com/2340/java-scheduler-scheduledexecutorservice-scheduledthreadpoolexecutor-example\" rel=\"nofollow noreferrer\">journaldev.com/2340/&hellip;</a>"},{"owner":{"account_id":328119,"reputation":2575,"user_id":650894,"accept_rate":43,"display_name":"Joe Lapp"},"score":0,"creation_date":1525843162,"post_id":16122987,"comment_id":87509375,"body_markdown":"My app would not terminate until I called `shutdown()` on the executor service returned by `Executors.newSingleThreadScheduledExecutor()`.","body":"My app would not terminate until I called <code>shutdown()</code> on the executor service returned by <code>Executors.newSingleThreadScheduledExecutor()</code>."}],"answers":[{"comments":[{"owner":{"account_id":537437,"reputation":3531,"user_id":905938,"accept_rate":68,"display_name":"Lucas"},"score":1,"creation_date":1385894408,"post_id":16742217,"comment_id":30308854,"body_markdown":"Sorry Giovanni for late response, and thank you for that btw. Yes, I&#39;m aware of how Executor works, which I tried to explain in my question. The shutdown does what you said, and also it allows garbage collector to collect those dead threads, and in effect to collect ExecutorService instance. My question was specific. Is there any reason to call &quot;shutdown()&quot; all the time, right after you submit/execute anything on ExecutorService. The second part of the question is strictly in relation to Android architecture. If the answer to previous is no, then when to call shutdown during and. lifecycle.","body":"Sorry Giovanni for late response, and thank you for that btw. Yes, I&#39;m aware of how Executor works, which I tried to explain in my question. The shutdown does what you said, and also it allows garbage collector to collect those dead threads, and in effect to collect ExecutorService instance. My question was specific. Is there any reason to call &quot;shutdown()&quot; all the time, right after you submit/execute anything on ExecutorService. The second part of the question is strictly in relation to Android architecture. If the answer to previous is no, then when to call shutdown during and. lifecycle."},{"owner":{"account_id":1398557,"reputation":9636,"user_id":1327788,"accept_rate":84,"display_name":"Giovanni Botta"},"score":5,"creation_date":1385995478,"post_id":16742217,"comment_id":30343136,"body_markdown":"There&#39;s no reason to call shutdown() all the time. In fact, that might be the absolute wrong thing to do since it will prevent you from reusing the executor service again. The reason to call it at the end of the life cycle of the service is so that the threads can be finally garbage collected as you noticed. If you don&#39;t, those threads will keep the JVM alive even though they are idle.","body":"There&#39;s no reason to call shutdown() all the time. In fact, that might be the absolute wrong thing to do since it will prevent you from reusing the executor service again. The reason to call it at the end of the life cycle of the service is so that the threads can be finally garbage collected as you noticed. If you don&#39;t, those threads will keep the JVM alive even though they are idle."},{"owner":{"account_id":537437,"reputation":3531,"user_id":905938,"accept_rate":68,"display_name":"Lucas"},"score":0,"creation_date":1386011557,"post_id":16742217,"comment_id":30352401,"body_markdown":"&quot;There&#39;s no reason to call shutdown() all the time. In fact, that might be the absolute wrong thing to do since it will prevent you from reusing the executor service again&quot;. That&#39;s exactly my reasoning, and my dillema from the original question. So to reiterate, the question is: When should I shutdown my ExecutiveService in the Android lifecycle?","body":"&quot;There&#39;s no reason to call shutdown() all the time. In fact, that might be the absolute wrong thing to do since it will prevent you from reusing the executor service again&quot;. That&#39;s exactly my reasoning, and my dillema from the original question. So to reiterate, the question is: When should I shutdown my ExecutiveService in the Android lifecycle?"},{"owner":{"account_id":1398557,"reputation":9636,"user_id":1327788,"accept_rate":84,"display_name":"Giovanni Botta"},"score":2,"creation_date":1386015976,"post_id":16742217,"comment_id":30354699,"body_markdown":"I have no Android experience, but I would guess you should shut it down when your application shuts down, in order to allow the JVM to finally exit.","body":"I have no Android experience, but I would guess you should shut it down when your application shuts down, in order to allow the JVM to finally exit."},{"owner":{"account_id":1398557,"reputation":9636,"user_id":1327788,"accept_rate":84,"display_name":"Giovanni Botta"},"score":0,"creation_date":1386016492,"post_id":16742217,"comment_id":30354945,"body_markdown":"By the way, that is true if you use your executor service throughout the application life cycle. If you only use it rarely, it might make sense to shut it down right after you&#39;re done and then create a new one when you need it.","body":"By the way, that is true if you use your executor service throughout the application life cycle. If you only use it rarely, it might make sense to shut it down right after you&#39;re done and then create a new one when you need it."},{"owner":{"account_id":537437,"reputation":3531,"user_id":905938,"accept_rate":68,"display_name":"Lucas"},"score":0,"creation_date":1386056540,"post_id":16742217,"comment_id":30368876,"body_markdown":"Unfortunetly Giovani, android lifecycle does not include explicit app termination, so you never know (you can do a hack arounds, but that&#39;s a no-no) when the application is indeed done, or not. And since youy&#39;re also not an android developer, I will not drag you into the way I&#39;m thinking about it, since you don&#39;t have enough knoledge about the platform. Thanks for taking the time though with your responses.","body":"Unfortunetly Giovani, android lifecycle does not include explicit app termination, so you never know (you can do a hack arounds, but that&#39;s a no-no) when the application is indeed done, or not. And since youy&#39;re also not an android developer, I will not drag you into the way I&#39;m thinking about it, since you don&#39;t have enough knoledge about the platform. Thanks for taking the time though with your responses."},{"owner":{"account_id":1398557,"reputation":9636,"user_id":1327788,"accept_rate":84,"display_name":"Giovanni Botta"},"score":3,"creation_date":1386085696,"post_id":16742217,"comment_id":30386219,"body_markdown":"I see. I suggest you use a [cached thread pool](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newCachedThreadPool()) and never call `shutdown()` on it so that you don&#39;t waste resources when unnecessary. If the application does shut down, the threads in the pool will eventually be garbage collected (after they are idle for 60 seconds by default). Note that if you want the pool to be bounded or want a different thread life time you can create a `ThreadPoolExecutor` directly.","body":"I see. I suggest you use a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newCachedThreadPool()\" rel=\"nofollow noreferrer\">cached thread pool</a> and never call <code>shutdown()</code> on it so that you don&#39;t waste resources when unnecessary. If the application does shut down, the threads in the pool will eventually be garbage collected (after they are idle for 60 seconds by default). Note that if you want the pool to be bounded or want a different thread life time you can create a <code>ThreadPoolExecutor</code> directly."}],"tags":[],"owner":{"account_id":1398557,"reputation":9636,"user_id":1327788,"accept_rate":84,"display_name":"Giovanni Botta"},"comment_count":7,"down_vote_count":0,"up_vote_count":68,"is_accepted":false,"score":68,"last_activity_date":1616786437,"creation_date":1369423263,"answer_id":16742217,"question_id":16122987,"body_markdown":"The &lt;code&gt;shutdown()&lt;/code&gt; method does one thing: prevents clients to send more work to the executor service. This means all the existing tasks will still run to completion unless other actions are taken. This is true even for scheduled tasks, e.g., for a ScheduledExecutorService: new instances of the scheduled task won&#39;t run. It also frees up any background thread resources.  This can be useful in various scenarios.\r\n\r\nLet&#39;s assume you have a console application which has an executor service running N tasks. If the user hits CTRL-C, you expect the application to terminate, possibly gracefully. What does it mean gracefully? Maybe you want your application to not be able to submit more tasks to the executor service and at the same time you want to wait for your existing N tasks to complete. You could achieve this using a shutdown hook as a last resort:\r\n\r\n    final ExecutorService service = ... // get it somewhere\r\n\r\n    Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            System.out.println(&quot;Performing some shutdown cleanup...&quot;);\r\n            service.shutdown();\r\n            while (true) {\r\n                try {\r\n                    System.out.println(&quot;Waiting for the service to terminate...&quot;);\r\n                    if (service.awaitTermination(5, TimeUnit.SECONDS)) {\r\n                        break;\r\n                    }\r\n                } catch (InterruptedException e) {\r\n                }\r\n            }\r\n            System.out.println(&quot;Done cleaning&quot;);\r\n        }\r\n    }));\r\n\r\nThis hook will shutdown the service, which will prevent your application to submit new tasks, and wait for all the existing tasks to complete before shutting down the JVM. The await termination will block for 5 seconds and return true if the service is shutdown. This is done in a loop so that you&#39;re sure the service will shutdown eventually. The InterruptedException gets swallowed each time. This is the best way to shutdown an executor service that gets reused all over your application.\r\n\r\nThis code isn&#39;t perfect. Unless you&#39;re absolutely positive your tasks will eventually terminate, you might want to wait for a given timeout and then just exit, abandoning the running threads. In this case it would make sense to also call &lt;code&gt;shutdownNow()&lt;/code&gt; after the timeout in a final attempt to interrupt the running threads (&lt;code&gt;shutdownNow()&lt;/code&gt; will also give you a list of tasks waiting to run). If your tasks are designed to respond to interruption this will work fine.\r\n\r\nAnother interesting scenario is when you have a ScheduledExecutorService that performs a periodic task. The only way to stop the chain of periodic tasks is to call &lt;code&gt;shutdown()&lt;/code&gt;.\r\n\r\nEDIT: I&#39;d like to add that I wouldn&#39;t recommend using a shutdown hook as shown above in the general case: it can be error-prone and should be a last resort only. Moreover, if you have many shutdown hooks registered, the order in which they will run is undefined, which might be undesirable. I&#39;d rather have the application explicitly call &lt;code&gt;shutdown()&lt;/code&gt; on &lt;code&gt;InterruptedException&lt;/code&gt;.","title":"Reason for calling shutdown() on ExecutorService","body":"<p>The <code>shutdown()</code> method does one thing: prevents clients to send more work to the executor service. This means all the existing tasks will still run to completion unless other actions are taken. This is true even for scheduled tasks, e.g., for a ScheduledExecutorService: new instances of the scheduled task won't run. It also frees up any background thread resources.  This can be useful in various scenarios.</p>\n<p>Let's assume you have a console application which has an executor service running N tasks. If the user hits CTRL-C, you expect the application to terminate, possibly gracefully. What does it mean gracefully? Maybe you want your application to not be able to submit more tasks to the executor service and at the same time you want to wait for your existing N tasks to complete. You could achieve this using a shutdown hook as a last resort:</p>\n<pre><code>final ExecutorService service = ... // get it somewhere\n\nRuntime.getRuntime().addShutdownHook(new Thread(new Runnable() {\n    @Override\n    public void run() {\n        System.out.println(&quot;Performing some shutdown cleanup...&quot;);\n        service.shutdown();\n        while (true) {\n            try {\n                System.out.println(&quot;Waiting for the service to terminate...&quot;);\n                if (service.awaitTermination(5, TimeUnit.SECONDS)) {\n                    break;\n                }\n            } catch (InterruptedException e) {\n            }\n        }\n        System.out.println(&quot;Done cleaning&quot;);\n    }\n}));\n</code></pre>\n<p>This hook will shutdown the service, which will prevent your application to submit new tasks, and wait for all the existing tasks to complete before shutting down the JVM. The await termination will block for 5 seconds and return true if the service is shutdown. This is done in a loop so that you're sure the service will shutdown eventually. The InterruptedException gets swallowed each time. This is the best way to shutdown an executor service that gets reused all over your application.</p>\n<p>This code isn't perfect. Unless you're absolutely positive your tasks will eventually terminate, you might want to wait for a given timeout and then just exit, abandoning the running threads. In this case it would make sense to also call <code>shutdownNow()</code> after the timeout in a final attempt to interrupt the running threads (<code>shutdownNow()</code> will also give you a list of tasks waiting to run). If your tasks are designed to respond to interruption this will work fine.</p>\n<p>Another interesting scenario is when you have a ScheduledExecutorService that performs a periodic task. The only way to stop the chain of periodic tasks is to call <code>shutdown()</code>.</p>\n<p>EDIT: I'd like to add that I wouldn't recommend using a shutdown hook as shown above in the general case: it can be error-prone and should be a last resort only. Moreover, if you have many shutdown hooks registered, the order in which they will run is undefined, which might be undesirable. I'd rather have the application explicitly call <code>shutdown()</code> on <code>InterruptedException</code>.</p>\n"},{"comments":[{"owner":{"account_id":15545149,"reputation":1170,"user_id":11214643,"display_name":"Delark"},"score":0,"creation_date":1628700530,"post_id":45892888,"comment_id":121493789,"body_markdown":"I think this lifeCycle dependency issue is relative, since if something is still sending you runnable commands, AND If your executor was  .shutdown() by a lifeCycle termination, the entire class would still be in the need to be dereferenced from the producer sending the commands (as it leaks if don&#39;t).\nThis means that: IF the entire LifeCycle system is correctly done, AND every Consumer is properly dereferenced from its Producer, every .shutdown() would be redundant since the entire enclosure of the executor would still be eligible for garbage collection anyways.","body":"I think this lifeCycle dependency issue is relative, since if something is still sending you runnable commands, AND If your executor was  .shutdown() by a lifeCycle termination, the entire class would still be in the need to be dereferenced from the producer sending the commands (as it leaks if don&#39;t). This means that: IF the entire LifeCycle system is correctly done, AND every Consumer is properly dereferenced from its Producer, every .shutdown() would be redundant since the entire enclosure of the executor would still be eligible for garbage collection anyways."},{"owner":{"account_id":15545149,"reputation":1170,"user_id":11214643,"display_name":"Delark"},"score":0,"creation_date":1628700546,"post_id":45892888,"comment_id":121493799,"body_markdown":"Now this changes entirely if the phases chosen are onStart() for creation + onStop() for shutdown();","body":"Now this changes entirely if the phases chosen are onStart() for creation + onStop() for shutdown();"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1643918610,"post_id":45892888,"comment_id":125473913,"body_markdown":"โYou should not destroy and re-create ExecutorService frequently.โ While true today (at Java 17), I want to note that such advice will *not* apply to [virtual thread](https://openjdk.java.net/jeps/8277131)-backed executor services coming to Java if [*Project Loom*](https://wiki.openjdk.java.net/display/loom/Main) succeeds. Under Loom, we will frequently launch and close virtual-thread executor services at the drop of a hat. There may be other reasons to constrain our use of background virtual threads, but being conservative with backing thread pools will no longer be one of those reasons.","body":"โYou should not destroy and re-create ExecutorService frequently.โ While true today (at Java 17), I want to note that such advice will <i>not</i> apply to <a href=\"https://openjdk.java.net/jeps/8277131\" rel=\"nofollow noreferrer\">virtual thread</a>-backed executor services coming to Java if <a href=\"https://wiki.openjdk.java.net/display/loom/Main\" rel=\"nofollow noreferrer\"><i>Project Loom</i></a> succeeds. Under Loom, we will frequently launch and close virtual-thread executor services at the drop of a hat. There may be other reasons to constrain our use of background virtual threads, but being conservative with backing thread pools will no longer be one of those reasons."}],"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"comment_count":3,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1503986329,"creation_date":1503731702,"answer_id":45892888,"question_id":16122987,"body_markdown":"&gt; Isn&#39;t the whole idea for the ExecutorService to reuse the threads? So why destroy the ExecutorService so soon?\r\n\r\nYes. You should not destroy and re-create `ExecutorService` frequently. Initialize `ExecutorService` when you require (mostly on start-up) and keep it active until you are done with it. \r\n\r\n&gt;Isn&#39;t it a rational way to simply create ExecutorService (or couple depending on how many you need), then during the application running pass to them the tasks once they come along, and then on the application exit or some other important stages shutdown those executors?\r\n\r\nYes. It&#39;s rational to shutdown `ExecutorService` on important stages like application exit etc. \r\n\r\n\r\n&gt;Second side question, a bit smaller deals with android platform. IF some of you will say that it&#39;s not best idea to shutdown executors every time, and you program on android, could you tell me how you handle those shutdowns (to be specific, when you execute them) when we deal with different events of application life cycle.\r\n\r\nAssume that `ExecutorService` is shared across different Activities in your application. Each activity will be paused/resumed at different intervals of time and still you need one `ExecutorService` per your application.\r\n\r\nInstead of managing the state of `ExecutorService` in Activity life cycle methods, move ExecutorService management ( Creation/Shutdown) to your custom [Service][1].\r\n\r\nCreate `ExecutorService` in Service =&gt; `onCreate()` and shutdown it properly in `onDestroy()`\r\n\r\nRecommended way of shutting down `ExecutorService` :\r\n\r\nhttps://stackoverflow.com/questions/36644043/how-to-properly-shutdown-java-executorservice/36644320#36644320\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/app/Service.html","title":"Reason for calling shutdown() on ExecutorService","body":"<blockquote>\n  <p>Isn't the whole idea for the ExecutorService to reuse the threads? So why destroy the ExecutorService so soon?</p>\n</blockquote>\n\n<p>Yes. You should not destroy and re-create <code>ExecutorService</code> frequently. Initialize <code>ExecutorService</code> when you require (mostly on start-up) and keep it active until you are done with it. </p>\n\n<blockquote>\n  <p>Isn't it a rational way to simply create ExecutorService (or couple depending on how many you need), then during the application running pass to them the tasks once they come along, and then on the application exit or some other important stages shutdown those executors?</p>\n</blockquote>\n\n<p>Yes. It's rational to shutdown <code>ExecutorService</code> on important stages like application exit etc. </p>\n\n<blockquote>\n  <p>Second side question, a bit smaller deals with android platform. IF some of you will say that it's not best idea to shutdown executors every time, and you program on android, could you tell me how you handle those shutdowns (to be specific, when you execute them) when we deal with different events of application life cycle.</p>\n</blockquote>\n\n<p>Assume that <code>ExecutorService</code> is shared across different Activities in your application. Each activity will be paused/resumed at different intervals of time and still you need one <code>ExecutorService</code> per your application.</p>\n\n<p>Instead of managing the state of <code>ExecutorService</code> in Activity life cycle methods, move ExecutorService management ( Creation/Shutdown) to your custom <a href=\"https://developer.android.com/reference/android/app/Service.html\" rel=\"noreferrer\">Service</a>.</p>\n\n<p>Create <code>ExecutorService</code> in Service => <code>onCreate()</code> and shutdown it properly in <code>onDestroy()</code></p>\n\n<p>Recommended way of shutting down <code>ExecutorService</code> :</p>\n\n<p><a href=\"https://stackoverflow.com/questions/36644043/how-to-properly-shutdown-java-executorservice/36644320#36644320\">How to properly shutdown java ExecutorService</a></p>\n"},{"tags":[],"owner":{"account_id":3096713,"reputation":150,"user_id":2621745,"display_name":"Pruthvidhar Rao Nadunooru"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1506552221,"creation_date":1506552221,"answer_id":46458316,"question_id":16122987,"body_markdown":"**Reason for calling shutdown() on ExecutorService**\r\n\r\nToday I encountered a situation where I have to wait until a machine is ready, before starting a series of tasks on that machine.\r\n\r\nI make a REST call to this machine, if I don&#39;t receive 503 (Server Unavailable) then the machine is ready to process my requests. So, I wait until I get 200 (Success) for the first REST call.\r\n\r\nThere are multiple ways to achieve it, I used ExecutorService to create a thread and scheduled it to run after every X Seconds. So, I need to stop this thread on a condition, check this out...\r\n\r\n    final ScheduledExecutorService executor = Executors.newScheduledThreadPool(1);\r\n        Runnable task = () -&gt; {\r\n            try {\r\n                int statusCode = restHelper.firstRESTCall();\r\n\r\n                if (statusCode == 200) {\r\n                    executor.shutdown();\r\n                }\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        };\r\n\r\n        int retryAfter = 60;\r\n        executor.scheduleAtFixedRate(task, 0, retryAfter, TimeUnit.SECONDS);\r\n\r\n**Second side question, a bit smaller deals with android platform.**\r\n\r\nMaybe I can answer if you&#39;ll provide bit more context!\r\nAlso from my experience with Android development it&#39;s rarely you need Threads. Are you developing a Game or an app which needs threads for performance? If not, in Android you have other ways to tackle problems like the scenario that I explained above. You can rather use TimerTask, AsyncTask or Handlers or Loaders based on context. This is because if UIThread waits for long you know what happens :/","title":"Reason for calling shutdown() on ExecutorService","body":"<p><strong>Reason for calling shutdown() on ExecutorService</strong></p>\n\n<p>Today I encountered a situation where I have to wait until a machine is ready, before starting a series of tasks on that machine.</p>\n\n<p>I make a REST call to this machine, if I don't receive 503 (Server Unavailable) then the machine is ready to process my requests. So, I wait until I get 200 (Success) for the first REST call.</p>\n\n<p>There are multiple ways to achieve it, I used ExecutorService to create a thread and scheduled it to run after every X Seconds. So, I need to stop this thread on a condition, check this out...</p>\n\n<pre><code>final ScheduledExecutorService executor = Executors.newScheduledThreadPool(1);\n    Runnable task = () -&gt; {\n        try {\n            int statusCode = restHelper.firstRESTCall();\n\n            if (statusCode == 200) {\n                executor.shutdown();\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    };\n\n    int retryAfter = 60;\n    executor.scheduleAtFixedRate(task, 0, retryAfter, TimeUnit.SECONDS);\n</code></pre>\n\n<p><strong>Second side question, a bit smaller deals with android platform.</strong></p>\n\n<p>Maybe I can answer if you'll provide bit more context!\nAlso from my experience with Android development it's rarely you need Threads. Are you developing a Game or an app which needs threads for performance? If not, in Android you have other ways to tackle problems like the scenario that I explained above. You can rather use TimerTask, AsyncTask or Handlers or Loaders based on context. This is because if UIThread waits for long you know what happens :/</p>\n"},{"tags":[],"owner":{"account_id":7426515,"reputation":1697,"user_id":5648801,"display_name":"emon"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1525034069,"creation_date":1525034069,"answer_id":50091038,"question_id":16122987,"body_markdown":"&gt; An ExecutorService should be shut down once it is no longer needed to\r\n&gt; free up system resources and to allow graceful application shutdown.\r\n&gt; Because the threads in an ExecutorService may be nondaemon threads,\r\n&gt; they may prevent normal application termination. In other words, your\r\n&gt; application stays running after completing its main method.\r\n\r\n[Reference Book][1] \r\n\r\n\r\n  [1]: https://www.amazon.com/Programmer-Study-1Z0-803-1Z0-804-Certification/dp/0071772006/ref=sr_1_1?ie=UTF8&amp;qid=1525033978&amp;sr=8-1&amp;keywords=oca%20ocp%207\r\n\r\nChaper:14 \r\nPage:814","title":"Reason for calling shutdown() on ExecutorService","body":"<blockquote>\n  <p>An ExecutorService should be shut down once it is no longer needed to\n  free up system resources and to allow graceful application shutdown.\n  Because the threads in an ExecutorService may be nondaemon threads,\n  they may prevent normal application termination. In other words, your\n  application stays running after completing its main method.</p>\n</blockquote>\n\n<p><a href=\"https://rads.stackoverflow.com/amzn/click/com/0071772006\" rel=\"noreferrer\" rel=\"nofollow noreferrer\">Reference Book</a> </p>\n\n<p>Chaper:14 \nPage:814</p>\n"},{"tags":[],"owner":{"account_id":15948958,"reputation":3,"user_id":11508767,"display_name":"Devlax"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1558244251,"creation_date":1558244251,"answer_id":56205057,"question_id":16122987,"body_markdown":"This is genuine notwithstanding for planned undertakings, e.g., for a ScheduledExecutorService: new cases of the booked assignment won&#39;t run. \r\n\r\nWe should expect you have a comfort application which has an agent administration running N errands. \r\n\r\nI&#39;m not catching it&#39;s meaning effortlessly? Perhaps you need your application to not have the option to submit more assignments to the agent administration and in the meantime you need to sit tight for your current N undertakings to finish. \r\n\r\nExcept if you&#39;re totally positive your errands will in the end, you should need to sit tight for a given break and after that simply exit, deserting the running strings. \r\n\r\nIn the event that your activitys are intended to react to interference this will work fine. \r\n\r\nAnother intriguing situation is the point at which you have a ScheduledExecutorService that plays out an activity.\r\n\r\nThe best way to stop the chain of activity is to call shutdown()","title":"Reason for calling shutdown() on ExecutorService","body":"<p>This is genuine notwithstanding for planned undertakings, e.g., for a ScheduledExecutorService: new cases of the booked assignment won't run. </p>\n\n<p>We should expect you have a comfort application which has an agent administration running N errands. </p>\n\n<p>I'm not catching it's meaning effortlessly? Perhaps you need your application to not have the option to submit more assignments to the agent administration and in the meantime you need to sit tight for your current N undertakings to finish. </p>\n\n<p>Except if you're totally positive your errands will in the end, you should need to sit tight for a given break and after that simply exit, deserting the running strings. </p>\n\n<p>In the event that your activitys are intended to react to interference this will work fine. </p>\n\n<p>Another intriguing situation is the point at which you have a ScheduledExecutorService that plays out an activity.</p>\n\n<p>The best way to stop the chain of activity is to call shutdown()</p>\n"},{"tags":[],"owner":{"account_id":11659632,"reputation":342,"user_id":9820561,"display_name":"Mr.O"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682892588,"creation_date":1682892588,"answer_id":76143778,"question_id":16122987,"body_markdown":"I recently found in my code that if I&#39;m not using shutdown() after finishing some parallel work, the threads are not closed automatically, even if the parallel work was completed. This created many unused threads that eventually crashed the code due to out-of-memory problems.","title":"Reason for calling shutdown() on ExecutorService","body":"<p>I recently found in my code that if I'm not using shutdown() after finishing some parallel work, the threads are not closed automatically, even if the parallel work was completed. This created many unused threads that eventually crashed the code due to out-of-memory problems.</p>\n"}],"owner":{"account_id":537437,"reputation":3531,"user_id":905938,"accept_rate":68,"display_name":"Lucas"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110455,"favorite_count":0,"down_vote_count":1,"up_vote_count":113,"answer_count":6,"score":112,"last_activity_date":1685528043,"creation_date":1366477754,"question_id":16122987,"body_markdown":"I was reading about it quite a bit in the past couple of hours, and I simply cannot see any reason (**valid** reason) to call `shutdown()` on the `ExecutorService`, unless we have a humongous application that stores, dozens and dozens of different executor services that are not used for a long time.\r\n\r\nThe only thing (from what I gather) the shutdown does, is doing what a normal Thread does once it&#39;s done. When the normal Thread will finish the run method of the Runnable(or Callable), it will be passed to Garbage Collection to be collected. With Executor Service the threads will simply be put on hold, they will not be ticked for the garbage collection. For that, the shutdown is needed.\r\n\r\nOk back to my question. Is there any reason to call shutdown on `ExecutorService` very often, or even right after submitting to it some tasks? I would like to leave behind the case someone is doing it and right after that calls to `awaitTermination()` as this is validated. Once we do that, we have to recreate a new `ExecutorService` all over again, to do the same thing. Isn&#39;t the whole idea for the `ExecutorService` to reuse the threads? So why destroy the `ExecutorService` so soon?\r\n\r\nIsn&#39;t it a rational way to simply create `ExecutorService` (or couple depending on how many you need), then during the application running pass to them the tasks once they come along, and then on the application exit or some other important stages shutdown those executors?\r\n\r\nI&#39;d like an answer from some experienced coders who do write a lot of asynchronous code using the ExecutorServices.\r\n\r\nSecond side question, a bit smaller deals with the android platform. IF some of you will say that it&#39;s not the best idea to shutdown executors every time, and your program on android, could you tell me how do you handle those shutdowns (to be specific - when you execute them) when we deal with different events of the application life cycle.\r\n\r\nBecause of the CommonsWare comment, I made the post neutral. I really am not interested in arguing about it to death and it seems it&#39;s leading there. I&#39;m only interested in learning about what I asked here from experienced developers if they are willing to share their experiences. Thanks.","title":"Reason for calling shutdown() on ExecutorService","body":"<p>I was reading about it quite a bit in the past couple of hours, and I simply cannot see any reason (<strong>valid</strong> reason) to call <code>shutdown()</code> on the <code>ExecutorService</code>, unless we have a humongous application that stores, dozens and dozens of different executor services that are not used for a long time.</p>\n<p>The only thing (from what I gather) the shutdown does, is doing what a normal Thread does once it's done. When the normal Thread will finish the run method of the Runnable(or Callable), it will be passed to Garbage Collection to be collected. With Executor Service the threads will simply be put on hold, they will not be ticked for the garbage collection. For that, the shutdown is needed.</p>\n<p>Ok back to my question. Is there any reason to call shutdown on <code>ExecutorService</code> very often, or even right after submitting to it some tasks? I would like to leave behind the case someone is doing it and right after that calls to <code>awaitTermination()</code> as this is validated. Once we do that, we have to recreate a new <code>ExecutorService</code> all over again, to do the same thing. Isn't the whole idea for the <code>ExecutorService</code> to reuse the threads? So why destroy the <code>ExecutorService</code> so soon?</p>\n<p>Isn't it a rational way to simply create <code>ExecutorService</code> (or couple depending on how many you need), then during the application running pass to them the tasks once they come along, and then on the application exit or some other important stages shutdown those executors?</p>\n<p>I'd like an answer from some experienced coders who do write a lot of asynchronous code using the ExecutorServices.</p>\n<p>Second side question, a bit smaller deals with the android platform. IF some of you will say that it's not the best idea to shutdown executors every time, and your program on android, could you tell me how do you handle those shutdowns (to be specific - when you execute them) when we deal with different events of the application life cycle.</p>\n<p>Because of the CommonsWare comment, I made the post neutral. I really am not interested in arguing about it to death and it seems it's leading there. I'm only interested in learning about what I asked here from experienced developers if they are willing to share their experiences. Thanks.</p>\n"},{"tags":["java","soap","element"],"comments":[{"owner":{"account_id":10408148,"reputation":1398,"user_id":7674438,"accept_rate":100,"display_name":"Lore"},"score":0,"creation_date":1685541888,"post_id":76372400,"comment_id":134674923,"body_markdown":"Please attach more code/logs","body":"Please attach more code/logs"},{"owner":{"account_id":25077833,"reputation":1,"user_id":18931030,"display_name":"DuqueM"},"score":0,"creation_date":1685542261,"post_id":76372400,"comment_id":134675012,"body_markdown":"I dont have any more logs, the logs from the BW are those that I send and in our application I simply get the INput and do a toString and dont see somethimes this element :( yeah, annoying","body":"I dont have any more logs, the logs from the BW are those that I send and in our application I simply get the INput and do a toString and dont see somethimes this element :( yeah, annoying"}],"owner":{"account_id":25077833,"reputation":1,"user_id":18931030,"display_name":"DuqueM"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685527993,"creation_date":1685527993,"question_id":76372400,"body_markdown":"Hello I am having an SOAP app that does not make any sense. We use BW from IBM, we have the logs from the outcoming that shows elementFiveWithProblems being send, but in the application we dont receive the element **sometimes**, it come as &#39;null&#39; sometimes we receive the content. \r\nSomeone has any ideia what can be the problem here?\r\n\r\n```\r\n&lt;ns0:service_input xmlns:ns0=&quot;Bla_Bla_Schema.xsd&quot;&gt;\r\n\t&lt;Header&gt;\r\n\t\t&lt;ClientName/&gt;\r\n\t\t&lt;ClientRequestTime/&gt;\r\n\t\t&lt;ClientRequestID/&gt;\r\n\t&lt;/Header&gt;\r\n\t&lt;Body&gt;\r\n\t\t&lt;elementOne&gt;1234567&lt;/elementOne&gt;\r\n\t\t&lt;elementTwo&gt;5&lt;/elementTwo&gt;\r\n\t\t&lt;elementThree&gt;BLA123456&lt;/elementThree&gt;\r\n\t\t&lt;elementFour&gt;5&lt;/elementFour&gt;\r\n\t\t&lt;elementFiveWithProblems&gt;003&lt;/elementFiveWithProblems&gt;\r\n\t\t&lt;elementSix&gt;2&lt;/elementSix&gt;\r\n\t\t&lt;delayedReleaseID&gt;SERVERNAME:1.2@swnode~EAI_BW@swnode~UUIJI123~45464646464/delayedReleaseID&gt;\r\n\t&lt;/Body&gt;\r\n&lt;/ns0:service_input&gt;\r\n```\r\n\r\n\r\nWe only put logs to identify, and check the cases that works, what happens is that has nothing related.","title":"BW-IBM Soap sometimes does not arrive at the application","body":"<p>Hello I am having an SOAP app that does not make any sense. We use BW from IBM, we have the logs from the outcoming that shows elementFiveWithProblems being send, but in the application we dont receive the element <strong>sometimes</strong>, it come as 'null' sometimes we receive the content.\nSomeone has any ideia what can be the problem here?</p>\n<pre><code>&lt;ns0:service_input xmlns:ns0=&quot;Bla_Bla_Schema.xsd&quot;&gt;\n    &lt;Header&gt;\n        &lt;ClientName/&gt;\n        &lt;ClientRequestTime/&gt;\n        &lt;ClientRequestID/&gt;\n    &lt;/Header&gt;\n    &lt;Body&gt;\n        &lt;elementOne&gt;1234567&lt;/elementOne&gt;\n        &lt;elementTwo&gt;5&lt;/elementTwo&gt;\n        &lt;elementThree&gt;BLA123456&lt;/elementThree&gt;\n        &lt;elementFour&gt;5&lt;/elementFour&gt;\n        &lt;elementFiveWithProblems&gt;003&lt;/elementFiveWithProblems&gt;\n        &lt;elementSix&gt;2&lt;/elementSix&gt;\n        &lt;delayedReleaseID&gt;SERVERNAME:1.2@swnode~EAI_BW@swnode~UUIJI123~45464646464/delayedReleaseID&gt;\n    &lt;/Body&gt;\n&lt;/ns0:service_input&gt;\n</code></pre>\n<p>We only put logs to identify, and check the cases that works, what happens is that has nothing related.</p>\n"},{"tags":["java","android","cordova","sdk"],"owner":{"account_id":28718044,"reputation":1,"user_id":21992270,"display_name":"Sp1nt3lGabT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685527980,"creation_date":1685527980,"question_id":76372396,"body_markdown":"i can&#39;t solve this problem.\r\ni was trying to do a small project in apache cordova but i am totally new to mobile development.\r\nI followed the guide they propose on the apache site for the first simple project but it didn&#39;t work.\r\nI am currently using cordova 11 with jdk 11 and android sdk 13 but something is not working.\r\nCan someone help me?\r\n\r\nbelow find the output of the `cordova requirements` command\r\n\r\n```\r\nRequirements check results for android:\r\nJava JDK: installed 11.0.0\r\nAndroid SDK: installed true\r\nAndroid target: not installed \r\nCommand failed with ENOENT: avdmanager list target\r\nspawn avdmanager ENOENT\r\nGradle: installed ###/.sdkman/candidates/gradle/8.1.1/bin/gradle\r\nSome of requirements check failed\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\nfirst I installed the latest version of android studio, then I reinstalled the necessary sdk and also the emulator with google pixel that I had previously created.\r\ni downloaded different versions of openjdk and tried to fix the problem but it doesn&#39;t work\r\n\r\nI use Ubuntu 20.04","title":"How to solve &#39;Requirements check failed&#39; error when installing Apache Cordova on Android using JDK 11 and SDK 13?","body":"<p>i can't solve this problem.\ni was trying to do a small project in apache cordova but i am totally new to mobile development.\nI followed the guide they propose on the apache site for the first simple project but it didn't work.\nI am currently using cordova 11 with jdk 11 and android sdk 13 but something is not working.\nCan someone help me?</p>\n<p>below find the output of the <code>cordova requirements</code> command</p>\n<pre><code>Requirements check results for android:\nJava JDK: installed 11.0.0\nAndroid SDK: installed true\nAndroid target: not installed \nCommand failed with ENOENT: avdmanager list target\nspawn avdmanager ENOENT\nGradle: installed ###/.sdkman/candidates/gradle/8.1.1/bin/gradle\nSome of requirements check failed\n</code></pre>\n<p>first I installed the latest version of android studio, then I reinstalled the necessary sdk and also the emulator with google pixel that I had previously created.\ni downloaded different versions of openjdk and tried to fix the problem but it doesn't work</p>\n<p>I use Ubuntu 20.04</p>\n"},{"tags":["java","open-telemetry"],"answers":[{"comments":[{"owner":{"account_id":3183071,"reputation":5552,"user_id":2689390,"accept_rate":71,"display_name":"jpgrassi"},"score":0,"creation_date":1685538142,"post_id":76372327,"comment_id":134673943,"body_markdown":"Curious to know how this would be useful? Wouldn&#39;t it be more appropriate to have multiple exporters, but a single &quot;OTel instance?","body":"Curious to know how this would be useful? Wouldn&#39;t it be more appropriate to have multiple exporters, but a single &quot;OTel instance?"},{"owner":{"account_id":21372668,"reputation":156,"user_id":15739953,"display_name":"Mateusz Rzeszutek"},"score":0,"creation_date":1685544344,"post_id":76372327,"comment_id":134675612,"body_markdown":"In general, I think it would be more appropriate to use multiple exporters.\n\nI can imagine a use case where you&#39;d want to instrument several different apps deployed on a single application server; in which case it&#39;d make sense to me to set up separate OpenTelemetry instances (with separate Resource).","body":"In general, I think it would be more appropriate to use multiple exporters.  I can imagine a use case where you&#39;d want to instrument several different apps deployed on a single application server; in which case it&#39;d make sense to me to set up separate OpenTelemetry instances (with separate Resource)."},{"owner":{"account_id":24553001,"reputation":3,"user_id":18461963,"display_name":"aliaksei"},"score":0,"creation_date":1685619292,"post_id":76372327,"comment_id":134687007,"body_markdown":"the situation is: we`re using corporate framework that has built in tracing functionality (based on OpenTracing - ancestor of OpenTelemetry). We developed another small tracing application for our department (we use OTEL). And now guys are moving from OpenTracing to OpenTelemetry, so we fear the side effects.","body":"the situation is: we`re using corporate framework that has built in tracing functionality (based on OpenTracing - ancestor of OpenTelemetry). We developed another small tracing application for our department (we use OTEL). And now guys are moving from OpenTracing to OpenTelemetry, so we fear the side effects."},{"owner":{"account_id":21372668,"reputation":156,"user_id":15739953,"display_name":"Mateusz Rzeszutek"},"score":0,"creation_date":1685625438,"post_id":76372327,"comment_id":134688576,"body_markdown":"We have a shim/bridge library developed specifically for migrating OpenTracing users to OpenTelemetry: https://github.com/open-telemetry/opentelemetry-java/blob/main/opentracing-shim/README.md - might be interesting to you.\nDepending on how much of the framework you can control, you could perhaps inject the shim Tracer instead of the &quot;real&quot; OT tracer. If this is not possible, feel free to create 2 SDK instances. We do recommend merging them into one though, if there&#39;s no business case behind the multiple instances.","body":"We have a shim/bridge library developed specifically for migrating OpenTracing users to OpenTelemetry: <a href=\"https://github.com/open-telemetry/opentelemetry-java/blob/main/opentracing-shim/README.md\" rel=\"nofollow noreferrer\">github.com/open-telemetry/opentelemetry-java/blob/main/&hellip;</a> - might be interesting to you. Depending on how much of the framework you can control, you could perhaps inject the shim Tracer instead of the &quot;real&quot; OT tracer. If this is not possible, feel free to create 2 SDK instances. We do recommend merging them into one though, if there&#39;s no business case behind the multiple instances."},{"owner":{"account_id":3183071,"reputation":5552,"user_id":2689390,"accept_rate":71,"display_name":"jpgrassi"},"score":0,"creation_date":1685703345,"post_id":76372327,"comment_id":134701586,"body_markdown":"single application server; in which case it&#39;d make sense to me to set up separate OpenTelemetry instances (with separate Resource)\n\nBut then it&#39;s still the same thing no? Each app configures its own OTel instance/resource and that&#39;s it. I don&#39;t see how them being hosted on the same app server influences anything on the number of &quot;OTel instances configured&quot;.","body":"single application server; in which case it&#39;d make sense to me to set up separate OpenTelemetry instances (with separate Resource)  But then it&#39;s still the same thing no? Each app configures its own OTel instance/resource and that&#39;s it. I don&#39;t see how them being hosted on the same app server influences anything on the number of &quot;OTel instances configured&quot;."},{"owner":{"account_id":21372668,"reputation":156,"user_id":15739953,"display_name":"Mateusz Rzeszutek"},"score":0,"creation_date":1685953142,"post_id":76372327,"comment_id":134727346,"body_markdown":"&gt; I don&#39;t see how them being hosted on the same app server influences anything on the number of &quot;OTel instances configured&quot;. -- Correct, because it shouldn&#39;t, conceptually these are separate applications (even if they&#39;re running in the same JVM process).","body":"&gt; I don&#39;t see how them being hosted on the same app server influences anything on the number of &quot;OTel instances configured&quot;. -- Correct, because it shouldn&#39;t, conceptually these are separate applications (even if they&#39;re running in the same JVM process)."}],"tags":[],"owner":{"account_id":21372668,"reputation":156,"user_id":15739953,"display_name":"Mateusz Rzeszutek"},"comment_count":6,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1685527447,"creation_date":1685527447,"answer_id":76372327,"question_id":76371490,"body_markdown":"Yes, it is possible to set up and use multiple `OpenTelemetry` instances in an app. The only thing that you have to be careful about is not setting the [`GlobalOpenTelemetry`](https://javadoc.io/doc/io.opentelemetry/opentelemetry-api/latest/io/opentelemetry/api/GlobalOpenTelemetry.html) more than once (you can skip using it entirely).","title":"Two instances of OpenTelemetry running in the same app","body":"<p>Yes, it is possible to set up and use multiple <code>OpenTelemetry</code> instances in an app. The only thing that you have to be careful about is not setting the <a href=\"https://javadoc.io/doc/io.opentelemetry/opentelemetry-api/latest/io/opentelemetry/api/GlobalOpenTelemetry.html\" rel=\"nofollow noreferrer\"><code>GlobalOpenTelemetry</code></a> more than once (you can skip using it entirely).</p>\n"}],"owner":{"account_id":24553001,"reputation":3,"user_id":18461963,"display_name":"aliaksei"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":245,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76372327,"answer_count":1,"score":0,"last_activity_date":1685527447,"creation_date":1685521074,"question_id":76371490,"body_markdown":"Wanted to ask your opinion: is it possible to have two separate instances of OpenTelemetry collecting different data  in one java application? \r\n\r\nUnfortunately, I can`t test 2 instances, so asking maybe someone had such a problem:) thanks in advance","title":"Two instances of OpenTelemetry running in the same app","body":"<p>Wanted to ask your opinion: is it possible to have two separate instances of OpenTelemetry collecting different data  in one java application?</p>\n<p>Unfortunately, I can`t test 2 instances, so asking maybe someone had such a problem:) thanks in advance</p>\n"},{"tags":["java","oop"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":2,"creation_date":1685526848,"post_id":76372197,"comment_id":134671411,"body_markdown":"Please reduce your code to a [mcve]. For example, if the error occurs on line 33, is anything after that relevant to show? Do you need to show adding 14 objects to the dataset, or does it still occur if you only add 1 thing?","body":"Please reduce your code to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. For example, if the error occurs on line 33, is anything after that relevant to show? Do you need to show adding 14 objects to the dataset, or does it still occur if you only add 1 thing?"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1685527001,"post_id":76372197,"comment_id":134671452,"body_markdown":"The actual error seems relatively straightforward: you are trying to cast an `Image` to `Playable`, but `Image` implements just the `NonPlayable` interface. It&#39;s hard to advise you what to do to correct it, because it&#39;s not clear what you&#39;re trying to do.","body":"The actual error seems relatively straightforward: you are trying to cast an <code>Image</code> to <code>Playable</code>, but <code>Image</code> implements just the <code>NonPlayable</code> interface. It&#39;s hard to advise you what to do to correct it, because it&#39;s not clear what you&#39;re trying to do."}],"answers":[{"comments":[{"owner":{"account_id":21212970,"reputation":86,"user_id":15601177,"display_name":"berry.11"},"score":0,"creation_date":1685530335,"post_id":76372247,"comment_id":134672079,"body_markdown":"Thank you for your comment it was so helpful for me.","body":"Thank you for your comment it was so helpful for me."}],"tags":[],"owner":{"account_id":13203350,"reputation":868,"user_id":9535950,"display_name":"Thomas Behr"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1685527270,"creation_date":1685526920,"answer_id":76372247,"question_id":76372197,"body_markdown":"The first thing you add to your `DataSet` is\r\n```\r\nnew Image(&quot;imagename1&quot;, &quot;dimension info1&quot;, &quot;other info1&quot;)\r\n```\r\nIn line 33, you are retrieving that image again with\r\n```\r\nds.getDatasetObjects().get(0)\r\n```\r\nand in the same line, you cast that image to `Playable`:\r\n```\r\n(Playable) ds.getDatasetObjects().get(0)\r\n```\r\nHowever, `Image` is not a `Playable`, i.e. `Image` does not implement the `Playable` interface. Quite the opposite is true:\r\n```\r\nclass Image ... implements NonPlayable\r\n```\r\nYou probably need to check if the items you get from your `DataSet` are indeed `Playable`:\r\n```\r\nObject o = ds.getDatasetObjects().get(0);\r\nif (o instanceof Playable) {\r\n  p1.updatePlaylist((Playable) o); \r\n}\r\n```\r\nEven better would be an iterative apporach, if `DataSet` offers one:\r\n```\r\nfor (Object data : ds.getDatasetObjects()) {\r\n  if (data instanceof Playable) {\r\n    p1.updatePlaylist((Playable) data);\r\n  }\r\n  if (data instanceof NonPlayable) {\r\n    v1.updateViewList((NonPlayable) data);\r\n  }\r\n}\r\n```","title":"JAVA OOP Question &quot; cannot be cast to class&quot; error","body":"<p>The first thing you add to your <code>DataSet</code> is</p>\n<pre><code>new Image(&quot;imagename1&quot;, &quot;dimension info1&quot;, &quot;other info1&quot;)\n</code></pre>\n<p>In line 33, you are retrieving that image again with</p>\n<pre><code>ds.getDatasetObjects().get(0)\n</code></pre>\n<p>and in the same line, you cast that image to <code>Playable</code>:</p>\n<pre><code>(Playable) ds.getDatasetObjects().get(0)\n</code></pre>\n<p>However, <code>Image</code> is not a <code>Playable</code>, i.e. <code>Image</code> does not implement the <code>Playable</code> interface. Quite the opposite is true:</p>\n<pre><code>class Image ... implements NonPlayable\n</code></pre>\n<p>You probably need to check if the items you get from your <code>DataSet</code> are indeed <code>Playable</code>:</p>\n<pre><code>Object o = ds.getDatasetObjects().get(0);\nif (o instanceof Playable) {\n  p1.updatePlaylist((Playable) o); \n}\n</code></pre>\n<p>Even better would be an iterative apporach, if <code>DataSet</code> offers one:</p>\n<pre><code>for (Object data : ds.getDatasetObjects()) {\n  if (data instanceof Playable) {\n    p1.updatePlaylist((Playable) data);\n  }\n  if (data instanceof NonPlayable) {\n    v1.updateViewList((NonPlayable) data);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":21212970,"reputation":86,"user_id":15601177,"display_name":"berry.11"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1685696004,"accepted_answer_id":76372247,"answer_count":1,"score":0,"last_activity_date":1685527270,"creation_date":1685526591,"question_id":76372197,"body_markdown":"I am new to Java and I have a work to do which put below here.\r\n[![Task](https://i.stack.imgur.com/RGxdF.png)]\r\n\r\nAnd i have written code below and i get the error:\r\n\r\nException in thread &quot;main&quot; java.lang.ClassCastException: class CSE_241_PA7.Image cannot be cast to class CSE_241_PA7.Playable (CSE_241_PA7.Image and CSE_241_PA7.Playable are in unnamed module of loader &#39;app&#39;)\r\n\tat CSE_241_PA7.Main.main(Main.java:33)\r\n\r\n\r\nHow could i fix this, i couldn&#39;t find my fault. Please help.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nI am giving the code classes that written :\r\n\r\n```\r\npackage CSE_241_PA7;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Dataset ds = new Dataset();\r\n        //different observers\r\n        Player p1 = new Player();\r\n        Player p2 = new Player();\r\n        Viewer v1 = new Viewer();\r\n        Viewer v2 = new Viewer();\r\n\r\n        ds.register(p1);\r\n        ds.register(p2);\r\n        ds.register(v1);\r\n        ds.register(v2);\r\n\r\n        ds.add(new Image(&quot;imagename1&quot;, &quot;dimension info1&quot;, &quot;other info1&quot;));\r\n        ds.add(new Image(&quot;imagename2&quot;, &quot;dimension info2&quot;, &quot;other info2&quot;));\r\n        ds.add(new Image(&quot;imagename3&quot;, &quot;dimension info3&quot;, &quot;other info3&quot;));\r\n        ds.add(new Image(&quot;imagename4&quot;, &quot;dimension info4&quot;, &quot;other info4&quot;));\r\n        ds.add(new Image(&quot;imagename5&quot;, &quot;dimension info5&quot;, &quot;other info5&quot;));\r\n        ds.add(new Audio(&quot;audioname1&quot;, &quot;duration1&quot;, &quot;other info1&quot;));\r\n        ds.add(new Audio(&quot;audioname2&quot;, &quot;duration2&quot;, &quot;other info2&quot;));\r\n        ds.add(new Audio(&quot;audioname3&quot;, &quot;duration3&quot;, &quot;other info3&quot;));\r\n        ds.add(new Video(&quot;videoname1&quot;, &quot;duration1&quot;, &quot;other info1&quot;));\r\n        ds.add(new Video(&quot;videoname2&quot;, &quot;duration2&quot;, &quot;other info2&quot;));\r\n        ds.add(new Video(&quot;videoname3&quot;, &quot;duration3&quot;, &quot;other info3&quot;));\r\n        ds.add(new Text(&quot;textname1&quot;, &quot;other info1&quot;));\r\n        ds.add(new Text(&quot;textname2&quot;, &quot;other info2&quot;));\r\n        ds.add(new Text(&quot;textname3&quot;, &quot;other info3&quot;));\r\n\r\n\r\n        p1.updatePlaylist((Playable) ds.getDatasetObjects().get(0)); //33.line\r\n        p1.updatePlaylist((Playable) ds.getDatasetObjects().get(2));\r\n        p1.updatePlaylist((Playable) ds.getDatasetObjects().get(4));\r\n\r\n\r\n        v1.updateViewList((NonPlayable) ds.getDatasetObjects().get(1));\r\n        v1.updateViewList((NonPlayable) ds.getDatasetObjects().get(3));\r\n        v1.updateViewList((NonPlayable) ds.getDatasetObjects().get(5));\r\n\r\n\r\n        Playable po = p1.currentlyPlaying();\r\n        if (po != null) {\r\n            po.info();\r\n            ds.remove((DatasetObject) po);\r\n        } else {\r\n            System.out.println(&quot;No currently playing item.&quot;);\r\n        }\r\n        NonPlayable np = v1.currentlyViewing();\r\n        if (np != null) {\r\n            np.info();\r\n        }\r\n\r\n        p1.showList();\r\n        p2.showList();\r\n        v1.showList();\r\n        v2.showList();\r\n    }\r\n}\r\n\r\n```\r\nNow i am adding Image class:\r\n\r\n\r\n```\r\npackage CSE_241_PA7;\r\n\r\npublic class Image extends DatasetObject implements NonPlayable {\r\n    private String dimensionInfo;\r\n\r\n    public Image(String name, String dimensionInfo, String otherInfo) {\r\n        super(name, otherInfo);\r\n        this.dimensionInfo = dimensionInfo;\r\n    }\r\n\r\n    public void play() {\r\n        System.out.println(&quot;Playing image: &quot; + getName());\r\n    }\r\n\r\n    @Override\r\n    public void info() {\r\n        System.out.println(&quot;Image Name: &quot; + getName());\r\n        System.out.println(&quot;Dimension Info: &quot; + dimensionInfo);\r\n        System.out.println(&quot;Other Info: &quot; + getOtherInfo());\r\n    }\r\n\r\n    public void view() {\r\n        System.out.println(&quot;Viewing image: &quot; + getName());\r\n    }\r\n\r\n    public String getDimensionInfo() {\r\n        return dimensionInfo;\r\n    }\r\n    public void showList() {\r\n        System.out.println(&quot;This is the showList() method implementation in Audio class.&quot;);\r\n    }\r\n}\r\n\r\n```\r\nNow i am adding Playable interface:\r\n\r\n```\r\npackage CSE_241_PA7;\r\n\r\npublic interface Playable {\r\n    void play();\r\n    void info();\r\n    void showList();\r\n\r\n\r\n}\r\n```\r\n\r\n","title":"JAVA OOP Question &quot; cannot be cast to class&quot; error","body":"<p>I am new to Java and I have a work to do which put below here.\n[<img src=\"https://i.stack.imgur.com/RGxdF.png\" alt=\"Task\" />]</p>\n<p>And i have written code below and i get the error:</p>\n<p>Exception in thread &quot;main&quot; java.lang.ClassCastException: class CSE_241_PA7.Image cannot be cast to class CSE_241_PA7.Playable (CSE_241_PA7.Image and CSE_241_PA7.Playable are in unnamed module of loader 'app')\nat CSE_241_PA7.Main.main(Main.java:33)</p>\n<p>How could i fix this, i couldn't find my fault. Please help.</p>\n<p>I am giving the code classes that written :</p>\n<pre><code>package CSE_241_PA7;\n\npublic class Main {\n    public static void main(String[] args) {\n        Dataset ds = new Dataset();\n        //different observers\n        Player p1 = new Player();\n        Player p2 = new Player();\n        Viewer v1 = new Viewer();\n        Viewer v2 = new Viewer();\n\n        ds.register(p1);\n        ds.register(p2);\n        ds.register(v1);\n        ds.register(v2);\n\n        ds.add(new Image(&quot;imagename1&quot;, &quot;dimension info1&quot;, &quot;other info1&quot;));\n        ds.add(new Image(&quot;imagename2&quot;, &quot;dimension info2&quot;, &quot;other info2&quot;));\n        ds.add(new Image(&quot;imagename3&quot;, &quot;dimension info3&quot;, &quot;other info3&quot;));\n        ds.add(new Image(&quot;imagename4&quot;, &quot;dimension info4&quot;, &quot;other info4&quot;));\n        ds.add(new Image(&quot;imagename5&quot;, &quot;dimension info5&quot;, &quot;other info5&quot;));\n        ds.add(new Audio(&quot;audioname1&quot;, &quot;duration1&quot;, &quot;other info1&quot;));\n        ds.add(new Audio(&quot;audioname2&quot;, &quot;duration2&quot;, &quot;other info2&quot;));\n        ds.add(new Audio(&quot;audioname3&quot;, &quot;duration3&quot;, &quot;other info3&quot;));\n        ds.add(new Video(&quot;videoname1&quot;, &quot;duration1&quot;, &quot;other info1&quot;));\n        ds.add(new Video(&quot;videoname2&quot;, &quot;duration2&quot;, &quot;other info2&quot;));\n        ds.add(new Video(&quot;videoname3&quot;, &quot;duration3&quot;, &quot;other info3&quot;));\n        ds.add(new Text(&quot;textname1&quot;, &quot;other info1&quot;));\n        ds.add(new Text(&quot;textname2&quot;, &quot;other info2&quot;));\n        ds.add(new Text(&quot;textname3&quot;, &quot;other info3&quot;));\n\n\n        p1.updatePlaylist((Playable) ds.getDatasetObjects().get(0)); //33.line\n        p1.updatePlaylist((Playable) ds.getDatasetObjects().get(2));\n        p1.updatePlaylist((Playable) ds.getDatasetObjects().get(4));\n\n\n        v1.updateViewList((NonPlayable) ds.getDatasetObjects().get(1));\n        v1.updateViewList((NonPlayable) ds.getDatasetObjects().get(3));\n        v1.updateViewList((NonPlayable) ds.getDatasetObjects().get(5));\n\n\n        Playable po = p1.currentlyPlaying();\n        if (po != null) {\n            po.info();\n            ds.remove((DatasetObject) po);\n        } else {\n            System.out.println(&quot;No currently playing item.&quot;);\n        }\n        NonPlayable np = v1.currentlyViewing();\n        if (np != null) {\n            np.info();\n        }\n\n        p1.showList();\n        p2.showList();\n        v1.showList();\n        v2.showList();\n    }\n}\n\n</code></pre>\n<p>Now i am adding Image class:</p>\n<pre><code>package CSE_241_PA7;\n\npublic class Image extends DatasetObject implements NonPlayable {\n    private String dimensionInfo;\n\n    public Image(String name, String dimensionInfo, String otherInfo) {\n        super(name, otherInfo);\n        this.dimensionInfo = dimensionInfo;\n    }\n\n    public void play() {\n        System.out.println(&quot;Playing image: &quot; + getName());\n    }\n\n    @Override\n    public void info() {\n        System.out.println(&quot;Image Name: &quot; + getName());\n        System.out.println(&quot;Dimension Info: &quot; + dimensionInfo);\n        System.out.println(&quot;Other Info: &quot; + getOtherInfo());\n    }\n\n    public void view() {\n        System.out.println(&quot;Viewing image: &quot; + getName());\n    }\n\n    public String getDimensionInfo() {\n        return dimensionInfo;\n    }\n    public void showList() {\n        System.out.println(&quot;This is the showList() method implementation in Audio class.&quot;);\n    }\n}\n\n</code></pre>\n<p>Now i am adding Playable interface:</p>\n<pre><code>package CSE_241_PA7;\n\npublic interface Playable {\n    void play();\n    void info();\n    void showList();\n\n\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","hibernate","multi-tenant"],"answers":[{"tags":[],"owner":{"account_id":16518030,"reputation":113,"user_id":11934922,"display_name":"Rishabh Sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1685527169,"creation_date":1685527169,"answer_id":76372285,"question_id":76332345,"body_markdown":"I have found the issue.\r\n\r\nMy project is using MyBatis for Database queries. Since the configuration is set via hibernate, so using SpringDataJPA or hibernate helped in switching the DB while triggering the query.\r\n","title":"Database/Schema is not being switched when API is called","body":"<p>I have found the issue.</p>\n<p>My project is using MyBatis for Database queries. Since the configuration is set via hibernate, so using SpringDataJPA or hibernate helped in switching the DB while triggering the query.</p>\n"}],"owner":{"account_id":16518030,"reputation":113,"user_id":11934922,"display_name":"Rishabh Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76372285,"answer_count":1,"score":0,"last_activity_date":1685527169,"creation_date":1685018253,"question_id":76332345,"body_markdown":"I am trying to implement hibernate multitenancy in my SpringBootWebApplication.\r\n\r\n**PROBLEM - tenant is being set in filter but when query is called Datasource is not being switched.\r\nbad SQL grammar []; nested exception is org.postgresql.util.PSQLException: ERROR: relation &quot;xyz&quot; does not exist.**\r\n\r\nHere are the details\r\n\r\n - spring-boot-starter-parent -- 2.5.12\r\n   \r\n \r\n - MyBatis for BE queries.\r\n\r\n\r\n - Hibernate for multi-tenancy.\r\n\r\n```\r\n    @Configuration\r\n    @EnableTransactionManagement\r\n    @EnableJpaRepositories(\r\n        basePackages = {&quot;com.xyz.*&quot;}\r\n    )\r\n    public class HibernateConfig {\r\n        @Autowired\r\n        private JpaProperties jpaProperties;\r\n    \r\n        public HibernateConfig() {\r\n        }\r\n    \r\n        @Bean\r\n        JpaVendorAdapter jpaVendorAdapter() {\r\n            return new HibernateJpaVendorAdapter();\r\n        }\r\n    \r\n        @Bean(name = {&quot;entityManagerFactory&quot;})\r\n        public LocalContainerEntityManagerFactoryBean entityManagerFactory(DataSource dataSource, MultiTenantConnectionProvider multiTenantConnectionProviderImpl, CurrentTenantIdentifierResolver currentTenantIdentifierResolverImpl){\r\n            Map&lt;String, Object&gt; jpaPropertiesMap = new HashMap(this.jpaProperties.getProperties());\r\n            jpaPropertiesMap.put(&quot;hibernate.multiTenancy&quot;, MultiTenancyStrategy.SCHEMA);\r\n            jpaPropertiesMap.put(&quot;hibernate.multi_tenant_connection_provider&quot;, multiTenantConnectionProviderImpl);\r\n            jpaPropertiesMap.put(&quot;hibernate.tenant_identifier_resolver&quot;, currentTenantIdentifierResolverImpl);\r\n            jpaPropertiesMap.put(&quot;hibernate.format_sql&quot;, true);\r\n            jpaPropertiesMap.put(&quot;hibernate.show_sql&quot;, true);\r\n            LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\r\n            em.setDataSource(dataSource);\r\n            em.setJpaVendorAdapter(this.jpaVendorAdapter());\r\n            em.setJpaPropertyMap(jpaPropertiesMap);\r\n            em.setPackagesToScan(new String[]{&quot;com.xyz.*&quot;});\r\n            return em;\r\n        }\r\n    }\r\n```\r\n```\r\n    @Component\r\n    public class DataSourceBasedMultiTenantConnectionProviderImpl extends AbstractDataSourceBasedMultiTenantConnectionProviderImpl {\r\n        private static final long serialVersionUID = 1L;\r\n        private static final String DEFAULT_TENANT_ID = &quot;master&quot;;\r\n        @Autowired\r\n        private DataSource defaultDS;\r\n        @Autowired\r\n        private ApplicationContext context;\r\n        private Map&lt;String, DataSource&gt; map = new HashMap();\r\n        boolean init = false;\r\n    \r\n        public DataSourceBasedMultiTenantConnectionProviderImpl() {\r\n        }\r\n    \r\n        @PostConstruct\r\n        public void load() {\r\n            this.map.put(&quot;master&quot;, this.defaultDS);\r\n        }\r\n    \r\n        protected DataSource selectAnyDataSource() {\r\n            return (DataSource)this.map.get(&quot;master&quot;);\r\n        }\r\n    \r\n        protected DataSource selectDataSource(String tenantIdentifier) {\r\n            if (!this.init) {\r\n                this.init = true;\r\n                TenantDataSource tenantDataSource = (TenantDataSource)this.context.getBean(TenantDataSource.class);\r\n                this.map.putAll(tenantDataSource.getAll());\r\n            }\r\n    \r\n            return this.map.get(tenantIdentifier) != null ? (DataSource)this.map.get(tenantIdentifier) : (DataSource)this.map.get(&quot;master&quot;);\r\n        }\r\n    }\r\n```\r\n\r\n\r\nThe above Datasource provider is not being called.\r\nThanks in advance for your Help!!!\r\n","title":"Database/Schema is not being switched when API is called","body":"<p>I am trying to implement hibernate multitenancy in my SpringBootWebApplication.</p>\n<p><strong>PROBLEM - tenant is being set in filter but when query is called Datasource is not being switched.\nbad SQL grammar []; nested exception is org.postgresql.util.PSQLException: ERROR: relation &quot;xyz&quot; does not exist.</strong></p>\n<p>Here are the details</p>\n<ul>\n<li><p>spring-boot-starter-parent -- 2.5.12</p>\n</li>\n<li><p>MyBatis for BE queries.</p>\n</li>\n<li><p>Hibernate for multi-tenancy.</p>\n</li>\n</ul>\n<pre><code>    @Configuration\n    @EnableTransactionManagement\n    @EnableJpaRepositories(\n        basePackages = {&quot;com.xyz.*&quot;}\n    )\n    public class HibernateConfig {\n        @Autowired\n        private JpaProperties jpaProperties;\n    \n        public HibernateConfig() {\n        }\n    \n        @Bean\n        JpaVendorAdapter jpaVendorAdapter() {\n            return new HibernateJpaVendorAdapter();\n        }\n    \n        @Bean(name = {&quot;entityManagerFactory&quot;})\n        public LocalContainerEntityManagerFactoryBean entityManagerFactory(DataSource dataSource, MultiTenantConnectionProvider multiTenantConnectionProviderImpl, CurrentTenantIdentifierResolver currentTenantIdentifierResolverImpl){\n            Map&lt;String, Object&gt; jpaPropertiesMap = new HashMap(this.jpaProperties.getProperties());\n            jpaPropertiesMap.put(&quot;hibernate.multiTenancy&quot;, MultiTenancyStrategy.SCHEMA);\n            jpaPropertiesMap.put(&quot;hibernate.multi_tenant_connection_provider&quot;, multiTenantConnectionProviderImpl);\n            jpaPropertiesMap.put(&quot;hibernate.tenant_identifier_resolver&quot;, currentTenantIdentifierResolverImpl);\n            jpaPropertiesMap.put(&quot;hibernate.format_sql&quot;, true);\n            jpaPropertiesMap.put(&quot;hibernate.show_sql&quot;, true);\n            LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\n            em.setDataSource(dataSource);\n            em.setJpaVendorAdapter(this.jpaVendorAdapter());\n            em.setJpaPropertyMap(jpaPropertiesMap);\n            em.setPackagesToScan(new String[]{&quot;com.xyz.*&quot;});\n            return em;\n        }\n    }\n</code></pre>\n<pre><code>    @Component\n    public class DataSourceBasedMultiTenantConnectionProviderImpl extends AbstractDataSourceBasedMultiTenantConnectionProviderImpl {\n        private static final long serialVersionUID = 1L;\n        private static final String DEFAULT_TENANT_ID = &quot;master&quot;;\n        @Autowired\n        private DataSource defaultDS;\n        @Autowired\n        private ApplicationContext context;\n        private Map&lt;String, DataSource&gt; map = new HashMap();\n        boolean init = false;\n    \n        public DataSourceBasedMultiTenantConnectionProviderImpl() {\n        }\n    \n        @PostConstruct\n        public void load() {\n            this.map.put(&quot;master&quot;, this.defaultDS);\n        }\n    \n        protected DataSource selectAnyDataSource() {\n            return (DataSource)this.map.get(&quot;master&quot;);\n        }\n    \n        protected DataSource selectDataSource(String tenantIdentifier) {\n            if (!this.init) {\n                this.init = true;\n                TenantDataSource tenantDataSource = (TenantDataSource)this.context.getBean(TenantDataSource.class);\n                this.map.putAll(tenantDataSource.getAll());\n            }\n    \n            return this.map.get(tenantIdentifier) != null ? (DataSource)this.map.get(tenantIdentifier) : (DataSource)this.map.get(&quot;master&quot;);\n        }\n    }\n</code></pre>\n<p>The above Datasource provider is not being called.\nThanks in advance for your Help!!!</p>\n"},{"tags":["java","jooq"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1685527033,"creation_date":1685527033,"answer_id":76372260,"question_id":76371252,"body_markdown":"### Why did the records get nested\r\n\r\nThe root problem of any issues related to generics is located here:\r\n\r\n```java\r\nselect(BOOK_AUTHOR.book())\r\n```\r\n\r\nYou&#39;re nesting a `BookRecord` in your `SELECT` clause, effectively producing a subquery of type `Select&lt;Record1&lt;BookRecord&gt;&gt;`, when you expected this, instead: `Select&lt;BookRecord&gt;`. I.e. you probably expected a &quot;flat&quot; result, not a nested one. Perhaps, it makes more sense if you add more columns to the projection? E.g. if you did this:\r\n\r\n```java\r\nselect(BOOK_AUTHOR.BOOK_ID, BOOK_AUTHOR.book())\r\n```\r\n\r\nThen it would be more obvious that your resulting type is `Select&lt;Record2&lt;Long, BookRecord&gt;&gt;`.\r\n\r\n### How to avoid the nesting\r\n\r\nObviously, in your specific example, you want:\r\n\r\n- No such unnecesary nesting\r\n- Profit from the implicit join in `BOOK_AUTHOR.book()`\r\n\r\n**Starting from jOOQ 3.19**, `to-many` path expressions will be available, including explicit path expressions in the `FROM` clause:\r\n\r\n- [#13639][1] Add support for to-many path expressions\r\n- [#14985][2] Allow for specifying explicit path joins\r\n\r\nIt will then be possible to write something like this:\r\n\r\n```java\r\nmultiset(\r\n  selectFrom(AUTHOR.book()) // Implicit correlation here on many-to-many relationship\r\n)\r\n\r\n// Simple mapping available now:\r\n.convertFrom(r -&gt; r.map(mapping(Book::new)))\r\n```\r\n\r\nKey here is that `selectFrom()` produces a type-safe `TableRecord` (in this case `BookRecord`), but doesn&#39;t nest it.\r\n\r\n**In jOOQ 3.18 or less**, this is not yet available, so your 2 workarounds are probably the simplest approach, knowing that this situation arises because you are nesting records in `SELECT`.\r\n\r\nYou could obviously always avoid the nesting by spelling out the projection explicitly:\r\n\r\n```java\r\nmultiset(\r\n  select(BOOK_AUTHOR.book().ID, BOOK_AUTHOR.book().TITLE, ...)\r\n  ...\r\n)\r\n```\r\n\r\nIn case of which this problem would be avoided. While your desired approach would be convenient, it would also likely project too many columns. Do you really need all of them? The overhead (memory consumption, transfer, etc.) can be significant.\r\n\r\n  [1]: https://github.com/jOOQ/jOOQ/issues/13639\r\n  [2]: https://github.com/jOOQ/jOOQ/issues/14985","title":"Fetch grouped POJOs using multiset in JOOQ","body":"<h3>Why did the records get nested</h3>\n<p>The root problem of any issues related to generics is located here:</p>\n<pre class=\"lang-java prettyprint-override\"><code>select(BOOK_AUTHOR.book())\n</code></pre>\n<p>You're nesting a <code>BookRecord</code> in your <code>SELECT</code> clause, effectively producing a subquery of type <code>Select&lt;Record1&lt;BookRecord&gt;&gt;</code>, when you expected this, instead: <code>Select&lt;BookRecord&gt;</code>. I.e. you probably expected a &quot;flat&quot; result, not a nested one. Perhaps, it makes more sense if you add more columns to the projection? E.g. if you did this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>select(BOOK_AUTHOR.BOOK_ID, BOOK_AUTHOR.book())\n</code></pre>\n<p>Then it would be more obvious that your resulting type is <code>Select&lt;Record2&lt;Long, BookRecord&gt;&gt;</code>.</p>\n<h3>How to avoid the nesting</h3>\n<p>Obviously, in your specific example, you want:</p>\n<ul>\n<li>No such unnecesary nesting</li>\n<li>Profit from the implicit join in <code>BOOK_AUTHOR.book()</code></li>\n</ul>\n<p><strong>Starting from jOOQ 3.19</strong>, <code>to-many</code> path expressions will be available, including explicit path expressions in the <code>FROM</code> clause:</p>\n<ul>\n<li><a href=\"https://github.com/jOOQ/jOOQ/issues/13639\" rel=\"nofollow noreferrer\">#13639</a> Add support for to-many path expressions</li>\n<li><a href=\"https://github.com/jOOQ/jOOQ/issues/14985\" rel=\"nofollow noreferrer\">#14985</a> Allow for specifying explicit path joins</li>\n</ul>\n<p>It will then be possible to write something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>multiset(\n  selectFrom(AUTHOR.book()) // Implicit correlation here on many-to-many relationship\n)\n\n// Simple mapping available now:\n.convertFrom(r -&gt; r.map(mapping(Book::new)))\n</code></pre>\n<p>Key here is that <code>selectFrom()</code> produces a type-safe <code>TableRecord</code> (in this case <code>BookRecord</code>), but doesn't nest it.</p>\n<p><strong>In jOOQ 3.18 or less</strong>, this is not yet available, so your 2 workarounds are probably the simplest approach, knowing that this situation arises because you are nesting records in <code>SELECT</code>.</p>\n<p>You could obviously always avoid the nesting by spelling out the projection explicitly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>multiset(\n  select(BOOK_AUTHOR.book().ID, BOOK_AUTHOR.book().TITLE, ...)\n  ...\n)\n</code></pre>\n<p>In case of which this problem would be avoided. While your desired approach would be convenient, it would also likely project too many columns. Do you really need all of them? The overhead (memory consumption, transfer, etc.) can be significant.</p>\n"}],"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76372260,"answer_count":1,"score":1,"last_activity_date":1685527033,"creation_date":1685519249,"question_id":76371252,"body_markdown":"Take the usual example of the book and author tables in a many-to-many (book_author) relationship. If I want to fetch a list of books for each author ID, specifically using `multiset`*, based on [this example ](https://blog.jooq.org/jooq-3-15s-new-multiset-operator-will-change-how-you-think-about-sql/) I&#39;d expect it to look like this:\r\n\r\n    select(\r\n            AUTHOR.ID,\r\n            multiset(\r\n                select(BOOK_AUTHOR.book())\r\n                .from(BOOK_AUTHOR)                                        \r\n                .where(BOOK_AUTHOR.AUTHOR_ID.eq(AUTHOR.ID)))\r\n                .as(&quot;books&quot;).convertFrom(r -&gt; r.map(mapping(Book::new)))\r\n            .from(AUTHOR)\r\n            .fetchMap(...)\r\n\r\nBut the mapper receives `Record1&lt;BookRecord&gt;` and expects `BookRecord`. So I instead have to write nesting mapping:\r\n\r\n\r\n    dsl.select(\r\n            AUTHOR.ID,\r\n            multiset(\r\n                select(BOOK_AUTHOR.book())\r\n                .from(BOOK_AUTHOR)\r\n                .where(BOOK_AUTHOR.AUTHOR_ID.eq(AUTHOR.ID)))\r\n                .as(&quot;books&quot;)\r\n                //&#128071; seems wrong\r\n                .convertFrom(r -&gt; r.map(mapping((b) -&gt; mapping(Book::new).apply(b)))))\r\n            .from(AUTHOR)\r\n            .fetchMap(AUTHOR.ID, mapping((a, b) -&gt; b));\r\n\r\nIs this the most direct/obvious way to express this multiset query?\r\n\r\nEDIT:\r\n\r\nHere&#39;s my improved version after getting my [earlier question](https://stackoverflow.com/questions/76344811) answered (still not what the example promised, though):\r\n\r\n    dsl.select(\r\n        AUTHOR.ID,\r\n        multiset(\r\n                select(BOOK_AUTHOR.book().mapping(Book::new)) //&#128072;\r\n                .from(BOOK_AUTHOR)\r\n                .where(BOOK_AUTHOR.AUTHOR_ID.eq(AUTHOR.ID)))\r\n                .as(&quot;books&quot;).convertFrom(r -&gt; r.map(Record1::value1)))\r\n        .from(AUTHOR)\r\n        .fetchMap(AUTHOR.ID, Record2::value2);\r\n\r\n*I&#39;m aware I don&#39;t really need multiset here. This is a spin-off from my [previous question](https://stackoverflow.com/questions/76344811/fetch-pojos-grouped-by-an-external-field-in-jooq) on grouping POJOs, and I&#39;m just exploring the options.","title":"Fetch grouped POJOs using multiset in JOOQ","body":"<p>Take the usual example of the book and author tables in a many-to-many (book_author) relationship. If I want to fetch a list of books for each author ID, specifically using <code>multiset</code>*, based on <a href=\"https://blog.jooq.org/jooq-3-15s-new-multiset-operator-will-change-how-you-think-about-sql/\" rel=\"nofollow noreferrer\">this example </a> I'd expect it to look like this:</p>\n<pre><code>select(\n        AUTHOR.ID,\n        multiset(\n            select(BOOK_AUTHOR.book())\n            .from(BOOK_AUTHOR)                                        \n            .where(BOOK_AUTHOR.AUTHOR_ID.eq(AUTHOR.ID)))\n            .as(&quot;books&quot;).convertFrom(r -&gt; r.map(mapping(Book::new)))\n        .from(AUTHOR)\n        .fetchMap(...)\n</code></pre>\n<p>But the mapper receives <code>Record1&lt;BookRecord&gt;</code> and expects <code>BookRecord</code>. So I instead have to write nesting mapping:</p>\n<pre><code>dsl.select(\n        AUTHOR.ID,\n        multiset(\n            select(BOOK_AUTHOR.book())\n            .from(BOOK_AUTHOR)\n            .where(BOOK_AUTHOR.AUTHOR_ID.eq(AUTHOR.ID)))\n            .as(&quot;books&quot;)\n            //๐ seems wrong\n            .convertFrom(r -&gt; r.map(mapping((b) -&gt; mapping(Book::new).apply(b)))))\n        .from(AUTHOR)\n        .fetchMap(AUTHOR.ID, mapping((a, b) -&gt; b));\n</code></pre>\n<p>Is this the most direct/obvious way to express this multiset query?</p>\n<p>EDIT:</p>\n<p>Here's my improved version after getting my <a href=\"https://stackoverflow.com/questions/76344811\">earlier question</a> answered (still not what the example promised, though):</p>\n<pre><code>dsl.select(\n    AUTHOR.ID,\n    multiset(\n            select(BOOK_AUTHOR.book().mapping(Book::new)) //๐\n            .from(BOOK_AUTHOR)\n            .where(BOOK_AUTHOR.AUTHOR_ID.eq(AUTHOR.ID)))\n            .as(&quot;books&quot;).convertFrom(r -&gt; r.map(Record1::value1)))\n    .from(AUTHOR)\n    .fetchMap(AUTHOR.ID, Record2::value2);\n</code></pre>\n<p>*I'm aware I don't really need multiset here. This is a spin-off from my <a href=\"https://stackoverflow.com/questions/76344811/fetch-pojos-grouped-by-an-external-field-in-jooq\">previous question</a> on grouping POJOs, and I'm just exploring the options.</p>\n"},{"tags":["java","aws-lambda","amazon-iam","aws-cdk","aws-codeartifact"],"comments":[{"owner":{"account_id":173785,"reputation":930,"user_id":402723,"display_name":"Raul Lapeira Herrero"},"score":0,"creation_date":1680011805,"post_id":75839726,"comment_id":133821448,"body_markdown":"If you want to check if the problem is related with the CDK construction process use the --debug flag","body":"If you want to check if the problem is related with the CDK construction process use the --debug flag"}],"answers":[{"comments":[{"owner":{"account_id":5735759,"reputation":619,"user_id":4529997,"accept_rate":70,"display_name":"Alexiz Hernandez"},"score":0,"creation_date":1680105477,"post_id":75867217,"comment_id":133842064,"body_markdown":"Hi @Raul, if I deploy my CDK changes using my pipeline, it will give me the same error in the CodeBuild process. If I remove the dependency on the CodeArtifact repository and I remove the `export CODEARTIFACT_AUTH_TOKEN=` command, it runs and deploys fine.","body":"Hi @Raul, if I deploy my CDK changes using my pipeline, it will give me the same error in the CodeBuild process. If I remove the dependency on the CodeArtifact repository and I remove the <code>export CODEARTIFACT_AUTH_TOKEN=</code> command, it runs and deploys fine."},{"owner":{"account_id":173785,"reputation":930,"user_id":402723,"display_name":"Raul Lapeira Herrero"},"score":0,"creation_date":1680152504,"post_id":75867217,"comment_id":133850108,"body_markdown":"Have you tried showing the value of the variable before exporting?... Maybe it has a different value for AWS obscure internal reasons when running in a pipeline","body":"Have you tried showing the value of the variable before exporting?... Maybe it has a different value for AWS obscure internal reasons when running in a pipeline"}],"tags":[],"owner":{"account_id":173785,"reputation":930,"user_id":402723,"display_name":"Raul Lapeira Herrero"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1685527025,"creation_date":1680011691,"answer_id":75867217,"question_id":75839726,"body_markdown":"I think that this error is not comming from the bundling image but from the machine where you run the CDK command, looks like the typical CDK --&gt; AWS SDK --&gt; .aws/.credentials dependency... ","title":"How to access CodeArtifact cross-account when CDK is bundling Java lambda function?","body":"<p>I think that this error is not comming from the bundling image but from the machine where you run the CDK command, looks like the typical CDK --&gt; AWS SDK --&gt; .aws/.credentials dependency...</p>\n"}],"owner":{"account_id":5735759,"reputation":619,"user_id":4529997,"accept_rate":70,"display_name":"Alexiz Hernandez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":416,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1685527025,"creation_date":1679720417,"question_id":75839726,"body_markdown":"I currently have 2 AWS accounts and Account A holds a CodeArtifact repository that contains a `commons` package that has shared code between my functions. Account B has my functions. I am using the CDK to set everything up and in Account A&#39;s CDK project, I setup the CodeArtifact domain and repository like this\r\n```\r\nexport class CodeArtifactStack extends Stack {\r\n  constructor(scope: Construct, id: string, props: CodeArtifactStackProps) {\r\n    super(scope, id, props);\r\n\r\n    const domain = new CfnDomain(this, &quot;MyDomain&quot;, {\r\n      domainName: &quot;domain&quot;,\r\n    });\r\n\r\n    const repo = new CfnRepository(this, &quot;CentralRepo&quot;, {\r\n      repositoryName: &quot;central-repository&quot;,\r\n      domainName: domain.domainName,\r\n      externalConnections: [&quot;public:maven-central&quot;],\r\n    });\r\n\r\n    const codeArtifactAccessRole = new Role(this, &quot;CodeArtifactAccessRole&quot;, {\r\n      assumedBy: new ServicePrincipal(&quot;codebuild.amazonaws.com&quot;),\r\n    });\r\n\r\n    const repoPolicy = new PolicyStatement({\r\n      actions: [\r\n        &quot;codeartifact:GetAuthorizationToken&quot;,\r\n        &quot;codeartifact:GetRepositoryEndpoint&quot;,\r\n      ],\r\n      resources: [\r\n      `arn:aws:codeartifact:***:***:repository/domain/central-repository`,\r\n      ],\r\n    });\r\n    codeArtifactAccessRole.addToPolicy(repoPolicy);\r\n\r\n    repo.addDependency(domain);\r\n\r\n    new CfnOutput(this, &quot;CodeArtifactAccessRoleArn&quot;, {\r\n      value: codeArtifactAccessRole.roleArn,\r\n    });\r\n  }\r\n}\r\n```\r\n\r\nAnd my function in Account B looks like this\r\n```\r\nconst customEmailSenderFunction = new Function(\r\n  this,\r\n  customEmailSenderFunctionName,\r\n  {\r\n    runtime: Runtime.JAVA_11,\r\n    timeout: Duration.minutes(3),\r\n    memorySize: 1024,\r\n    handler: &quot;com.example.entrypoint.CustomEmailSenderHandlerEntrypoint::handleRequest&quot;,\r\n    code: Code.fromAsset(\r\n      path.join(\r\n        __dirname,\r\n        &quot;..&quot;,\r\n        &quot;..&quot;,\r\n        &quot;functions/custom-email-sender&quot;\r\n      ),\r\n      {\r\n        bundling: {\r\n          entrypoint: [&quot;/bin/sh&quot;, &quot;-c&quot;],\r\n          command: [\r\n            &quot;export CODEARTIFACT_AUTH_TOKEN=`aws codeartifact get-authorization-token --domain domain --domain-owner *** --region *** --query authorizationToken --output text` &quot; +\r\n              &quot;&amp;&amp; mvn -s .mvn/settings.xml clean install &quot; +\r\n              &quot;&amp;&amp; cp target/custom-email-sender-1.0.jar /asset-output/&quot;,\r\n          ],\r\n          image: Runtime.JAVA_11.bundlingImage,\r\n          user: &quot;root&quot;,\r\n          outputType: BundlingOutput.ARCHIVED,\r\n          volumes: [\r\n            {\r\n              hostPath: os.homedir() + &quot;/.m2/&quot;,\r\n              containerPath: &quot;/root/.m2/&quot;,\r\n            },\r\n          ],\r\n          environment: {},\r\n        },\r\n      }\r\n    ),\r\n    environment: {\r\n        QUEUE_URL: emailQueue.queueUrl,\r\n    },\r\n    logRetention: RetentionDays.THREE_MONTHS,\r\n  }\r\n);\r\n```\r\n\r\nIf I try to run `npx cdk synth -- -v -o dist`, I get an error that says `Unable to locate credentials. You can configure credentials by running &quot;aws configure&quot;`. I am assuming this is coming from the bundling image, but I don&#39;t know how to actually give it access to the role inside the bundling process. If I run `export CODEARTIFACT_AUTH_TOKEN=`aws codeartifact get-authorization-token...` locally with the accounts profile, I can run `mvn clean compile` just fine, but at this point I&#39;m not sure how to configure the role in the bundling image.\r\n\r\nAnyone have any ideas on how to accomplish this or maybe a different route I can take?","title":"How to access CodeArtifact cross-account when CDK is bundling Java lambda function?","body":"<p>I currently have 2 AWS accounts and Account A holds a CodeArtifact repository that contains a <code>commons</code> package that has shared code between my functions. Account B has my functions. I am using the CDK to set everything up and in Account A's CDK project, I setup the CodeArtifact domain and repository like this</p>\n<pre><code>export class CodeArtifactStack extends Stack {\n  constructor(scope: Construct, id: string, props: CodeArtifactStackProps) {\n    super(scope, id, props);\n\n    const domain = new CfnDomain(this, &quot;MyDomain&quot;, {\n      domainName: &quot;domain&quot;,\n    });\n\n    const repo = new CfnRepository(this, &quot;CentralRepo&quot;, {\n      repositoryName: &quot;central-repository&quot;,\n      domainName: domain.domainName,\n      externalConnections: [&quot;public:maven-central&quot;],\n    });\n\n    const codeArtifactAccessRole = new Role(this, &quot;CodeArtifactAccessRole&quot;, {\n      assumedBy: new ServicePrincipal(&quot;codebuild.amazonaws.com&quot;),\n    });\n\n    const repoPolicy = new PolicyStatement({\n      actions: [\n        &quot;codeartifact:GetAuthorizationToken&quot;,\n        &quot;codeartifact:GetRepositoryEndpoint&quot;,\n      ],\n      resources: [\n      `arn:aws:codeartifact:***:***:repository/domain/central-repository`,\n      ],\n    });\n    codeArtifactAccessRole.addToPolicy(repoPolicy);\n\n    repo.addDependency(domain);\n\n    new CfnOutput(this, &quot;CodeArtifactAccessRoleArn&quot;, {\n      value: codeArtifactAccessRole.roleArn,\n    });\n  }\n}\n</code></pre>\n<p>And my function in Account B looks like this</p>\n<pre><code>const customEmailSenderFunction = new Function(\n  this,\n  customEmailSenderFunctionName,\n  {\n    runtime: Runtime.JAVA_11,\n    timeout: Duration.minutes(3),\n    memorySize: 1024,\n    handler: &quot;com.example.entrypoint.CustomEmailSenderHandlerEntrypoint::handleRequest&quot;,\n    code: Code.fromAsset(\n      path.join(\n        __dirname,\n        &quot;..&quot;,\n        &quot;..&quot;,\n        &quot;functions/custom-email-sender&quot;\n      ),\n      {\n        bundling: {\n          entrypoint: [&quot;/bin/sh&quot;, &quot;-c&quot;],\n          command: [\n            &quot;export CODEARTIFACT_AUTH_TOKEN=`aws codeartifact get-authorization-token --domain domain --domain-owner *** --region *** --query authorizationToken --output text` &quot; +\n              &quot;&amp;&amp; mvn -s .mvn/settings.xml clean install &quot; +\n              &quot;&amp;&amp; cp target/custom-email-sender-1.0.jar /asset-output/&quot;,\n          ],\n          image: Runtime.JAVA_11.bundlingImage,\n          user: &quot;root&quot;,\n          outputType: BundlingOutput.ARCHIVED,\n          volumes: [\n            {\n              hostPath: os.homedir() + &quot;/.m2/&quot;,\n              containerPath: &quot;/root/.m2/&quot;,\n            },\n          ],\n          environment: {},\n        },\n      }\n    ),\n    environment: {\n        QUEUE_URL: emailQueue.queueUrl,\n    },\n    logRetention: RetentionDays.THREE_MONTHS,\n  }\n);\n</code></pre>\n<p>If I try to run <code>npx cdk synth -- -v -o dist</code>, I get an error that says <code>Unable to locate credentials. You can configure credentials by running &quot;aws configure&quot;</code>. I am assuming this is coming from the bundling image, but I don't know how to actually give it access to the role inside the bundling process. If I run <code>export CODEARTIFACT_AUTH_TOKEN=</code>aws codeartifact get-authorization-token...<code>locally with the accounts profile, I can run</code>mvn clean compile` just fine, but at this point I'm not sure how to configure the role in the bundling image.</p>\n<p>Anyone have any ideas on how to accomplish this or maybe a different route I can take?</p>\n"},{"tags":["javascript","java","spring-boot","jsp"],"answers":[{"tags":[],"owner":{"account_id":18281346,"reputation":320,"user_id":13310114,"display_name":"Doyel Mishra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1685526994,"creation_date":1644427478,"answer_id":71054044,"question_id":71047391,"body_markdown":"This javaScript code was effective. \r\n\r\n```\r\n\r\n\r\n&lt;script&gt;\r\n        $(function () {\r\n            $(&#39;.selectDatabase&#39;).change(function(){\r\n       //         console.log( $(this).val() );\r\n                const driverName=$(&#39;.driverName&#39;);\r\n                const  connectionURL  = $(&#39;.connectionURL&#39;);\r\n\r\n                if($(this).val()===&#39;MySQL&#39;){\r\n                    driverName.val(&#39;com.microsoft.sqlserver.jdbc.SQLServerDriver&#39;);\r\n                    connectionURL.val(&#39;jdbc:sqlserver://localhost:1433;databaseName=database&#39;);\r\n                    driverName.attr(&#39;readonly&#39;,true);\r\n                    connectionURL.attr(&#39;readonly&#39;,true);\r\n\r\n                }else if($(this).val()===&#39;Other&#39;){\r\n                    driverName.val(&#39;&#39;);\r\n                    connectionURL.val(&#39;&#39;);\r\n                    driverName.attr(&#39;readonly&#39;,false);\r\n                    connectionURL.attr(&#39;readonly&#39;,false);\r\n\r\n                }else{\r\n                    driverName.val(&#39;&#39;);\r\n                    connectionURL.val(&#39;&#39;);\r\n                    driverName.attr(&#39;readonly&#39;,true);\r\n                    connectionURL.attr(&#39;readonly&#39;,true);\r\n                }\r\n\r\n            });\r\n\r\n        });\r\n\r\n\r\n    &lt;/script&gt;\r\n\r\n```\r\n```\r\n\r\n\r\n&lt;div class=&quot;form-group&quot;&gt;\r\n    &lt;form:label path=&quot;databaseServer&quot;&gt;Database Server:&lt;/form:label&gt;\r\n    &lt;form:select path=&quot;databaseServer&quot; class=&quot;form-control selectDatabase&quot;&gt;\r\n        &lt;form:option value=&quot;None&quot; label=&quot;Please Select a Database Server&quot;/&gt;\r\n        &lt;form:options items=&quot;${command.databaseServerMap}&quot; /&gt;\r\n    &lt;/form:select&gt;\r\n\r\n&lt;/div&gt;\r\n&lt;div class=&quot;form-group&quot;&gt;\r\n    &lt;form:label path=&quot;driverName&quot;&gt;Driver Name:&lt;/form:label&gt;\r\n    &lt;form:input path=&quot;driverName&quot; class=&quot;form-control driverName&quot;  readonly=&quot;true&quot;/&gt;\r\n&lt;/div&gt;\r\n","title":"Dynamically filling two fields depending on a dropdown value","body":"<p>This javaScript code was effective.</p>\n<pre><code>\n\n&lt;script&gt;\n        $(function () {\n            $('.selectDatabase').change(function(){\n       //         console.log( $(this).val() );\n                const driverName=$('.driverName');\n                const  connectionURL  = $('.connectionURL');\n\n                if($(this).val()==='MySQL'){\n                    driverName.val('com.microsoft.sqlserver.jdbc.SQLServerDriver');\n                    connectionURL.val('jdbc:sqlserver://localhost:1433;databaseName=database');\n                    driverName.attr('readonly',true);\n                    connectionURL.attr('readonly',true);\n\n                }else if($(this).val()==='Other'){\n                    driverName.val('');\n                    connectionURL.val('');\n                    driverName.attr('readonly',false);\n                    connectionURL.attr('readonly',false);\n\n                }else{\n                    driverName.val('');\n                    connectionURL.val('');\n                    driverName.attr('readonly',true);\n                    connectionURL.attr('readonly',true);\n                }\n\n            });\n\n        });\n\n\n    &lt;/script&gt;\n\n</code></pre>\n<pre><code>\n\n&lt;div class=&quot;form-group&quot;&gt;\n    &lt;form:label path=&quot;databaseServer&quot;&gt;Database Server:&lt;/form:label&gt;\n    &lt;form:select path=&quot;databaseServer&quot; class=&quot;form-control selectDatabase&quot;&gt;\n        &lt;form:option value=&quot;None&quot; label=&quot;Please Select a Database Server&quot;/&gt;\n        &lt;form:options items=&quot;${command.databaseServerMap}&quot; /&gt;\n    &lt;/form:select&gt;\n\n&lt;/div&gt;\n&lt;div class=&quot;form-group&quot;&gt;\n    &lt;form:label path=&quot;driverName&quot;&gt;Driver Name:&lt;/form:label&gt;\n    &lt;form:input path=&quot;driverName&quot; class=&quot;form-control driverName&quot;  readonly=&quot;true&quot;/&gt;\n&lt;/div&gt;\n</code></pre>\n"}],"owner":{"account_id":18281346,"reputation":320,"user_id":13310114,"display_name":"Doyel Mishra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71054044,"answer_count":1,"score":0,"last_activity_date":1685526994,"creation_date":1644400491,"question_id":71047391,"body_markdown":"I have a database server name recommendation list coming from the backend, where &quot;driverName&quot; and &quot;connectionURL&quot; for that driver should auto-populate once the user picks a server.\r\nI know it&#39;s possible to accomplish it with javascript, but I&#39;m new to the language.\r\nCould someone please assist me? \r\n\r\n```\r\n\r\n                        &lt;div class=&quot;form-group&quot;&gt;\r\n                            &lt;form:label path=&quot;databaseServer&quot;&gt;Database Server:&lt;/form:label&gt;\r\n                            &lt;form:select path=&quot;databaseServer&quot; class=&quot;form-control&quot;&gt;\r\n                                &lt;form:option value=&quot;None&quot; label=&quot;Please Select a Database Server&quot;/&gt;\r\n                                &lt;form:options items=&quot;${command.databaseServerMap}&quot; /&gt;\r\n                            &lt;/form:select&gt;\r\n\r\n                        &lt;/div&gt;\r\n                        &lt;div class=&quot;form-group&quot;&gt;\r\n                            &lt;form:label path=&quot;driverName&quot;&gt;Driver Name:&lt;/form:label&gt;\r\n                            &lt;form:input path=&quot;driverName&quot; class=&quot;form-control&quot;  readonly=&quot;true&quot;/&gt;\r\n\r\n                        &lt;/div&gt;\r\n                        &lt;div class=&quot;form-group&quot;&gt;\r\n                            &lt;form:label path=&quot;connectionURL&quot;&gt;connection URL:&lt;/form:label&gt;\r\n                            &lt;form:input path=&quot;connectionURL&quot; class=&quot;form-control&quot; readonly=&quot;true&quot;/&gt;\r\n                        &lt;/div&gt;\r\n\r\n```\r\nThese are the maps I&#39;m working with on the backend. \r\n```\r\n\r\n  public Map&lt;String, String&gt; getDatabaseServerMap() {\r\n        Map&lt;String, String&gt; driverList = new LinkedHashMap&lt;&gt;();\r\n        driverList.put(&quot;MySQL&quot;, &quot;MySQL&quot;);\r\n        driverList.put(&quot;Postgres&quot;, &quot;Postgres&quot;);\r\n        return driverList;\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HKUWd.png","title":"Dynamically filling two fields depending on a dropdown value","body":"<p>I have a database server name recommendation list coming from the backend, where &quot;driverName&quot; and &quot;connectionURL&quot; for that driver should auto-populate once the user picks a server.\nI know it's possible to accomplish it with javascript, but I'm new to the language.\nCould someone please assist me?</p>\n<pre><code>\n                        &lt;div class=&quot;form-group&quot;&gt;\n                            &lt;form:label path=&quot;databaseServer&quot;&gt;Database Server:&lt;/form:label&gt;\n                            &lt;form:select path=&quot;databaseServer&quot; class=&quot;form-control&quot;&gt;\n                                &lt;form:option value=&quot;None&quot; label=&quot;Please Select a Database Server&quot;/&gt;\n                                &lt;form:options items=&quot;${command.databaseServerMap}&quot; /&gt;\n                            &lt;/form:select&gt;\n\n                        &lt;/div&gt;\n                        &lt;div class=&quot;form-group&quot;&gt;\n                            &lt;form:label path=&quot;driverName&quot;&gt;Driver Name:&lt;/form:label&gt;\n                            &lt;form:input path=&quot;driverName&quot; class=&quot;form-control&quot;  readonly=&quot;true&quot;/&gt;\n\n                        &lt;/div&gt;\n                        &lt;div class=&quot;form-group&quot;&gt;\n                            &lt;form:label path=&quot;connectionURL&quot;&gt;connection URL:&lt;/form:label&gt;\n                            &lt;form:input path=&quot;connectionURL&quot; class=&quot;form-control&quot; readonly=&quot;true&quot;/&gt;\n                        &lt;/div&gt;\n\n</code></pre>\n<p>These are the maps I'm working with on the backend.</p>\n<pre><code>\n  public Map&lt;String, String&gt; getDatabaseServerMap() {\n        Map&lt;String, String&gt; driverList = new LinkedHashMap&lt;&gt;();\n        driverList.put(&quot;MySQL&quot;, &quot;MySQL&quot;);\n        driverList.put(&quot;Postgres&quot;, &quot;Postgres&quot;);\n        return driverList;\n    }\n\n\n  [1]: https://i.stack.imgur.com/HKUWd.png\n</code></pre>\n"},{"tags":["java","amazon-web-services","spring-boot","smtp","amazon-ses"],"answers":[{"tags":[],"owner":{"account_id":8104889,"reputation":19430,"user_id":6106791,"display_name":"baduker"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1685526926,"creation_date":1685526926,"answer_id":76372248,"question_id":76371820,"body_markdown":"I&#39;d double check those metrics, as this might mean your SES Email Acount is unhealthy because your *bounce* and *complaints* rates are too high, which might effectively block you from sending any emails.\r\n\r\nFrom the docs:\r\n\r\n&gt; Amazon SES actively tracks several metrics that may cause your reputation as a sender to be damaged, or that could cause your email delivery rates to decline. Two important metrics that we consider in this process are the bounce and complaint rates for your account.\r\n\r\n**Bounce** โ A hard bounce that the recipient&#39;s mail server permanently rejected the email. (Soft bounces are only included when Amazon SES fails to deliver the email after retrying for a period of time.)\r\n\r\n**Complaint** โ The email was successfully delivered to the recipientโs mail server, but the recipient marked it as spam.\r\n\r\nAlso, make sure your emails are not being send to an [email spam trap](https://en.wikipedia.org/wiki/Spamtrap).\r\n\r\nTo learn more about monitoring your Amazon SES sender reputation, read [this](https://docs.aws.amazon.com/ses/latest/dg/manage-sending-quotas.html).","title":"AWS SES Warning: Mail health check failed","body":"<p>I'd double check those metrics, as this might mean your SES Email Acount is unhealthy because your <em>bounce</em> and <em>complaints</em> rates are too high, which might effectively block you from sending any emails.</p>\n<p>From the docs:</p>\n<blockquote>\n<p>Amazon SES actively tracks several metrics that may cause your reputation as a sender to be damaged, or that could cause your email delivery rates to decline. Two important metrics that we consider in this process are the bounce and complaint rates for your account.</p>\n</blockquote>\n<p><strong>Bounce</strong> โ A hard bounce that the recipient's mail server permanently rejected the email. (Soft bounces are only included when Amazon SES fails to deliver the email after retrying for a period of time.)</p>\n<p><strong>Complaint</strong> โ The email was successfully delivered to the recipientโs mail server, but the recipient marked it as spam.</p>\n<p>Also, make sure your emails are not being send to an <a href=\"https://en.wikipedia.org/wiki/Spamtrap\" rel=\"nofollow noreferrer\">email spam trap</a>.</p>\n<p>To learn more about monitoring your Amazon SES sender reputation, read <a href=\"https://docs.aws.amazon.com/ses/latest/dg/manage-sending-quotas.html\" rel=\"nofollow noreferrer\">this</a>.</p>\n"}],"owner":{"account_id":23996629,"reputation":47,"user_id":17982071,"display_name":"HK15"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76372248,"answer_count":1,"score":1,"last_activity_date":1685526926,"creation_date":1685523856,"question_id":76371820,"body_markdown":"We are developing a Java Spring Boot application on AWS and using SES as SMTP server.\r\n\r\nWhen the application starts up (it&#39;s a Docker container running into an ECS Task) We receive the following warning in CloudWatch.\r\n\r\n    {\r\n        &quot;timestamp&quot;: &quot;2023-05-30T15:57:28.7Z&quot;,\r\n        &quot;logger&quot;: &quot;org.springframework.boot.actuate.mail.MailHealthIndicator&quot;,\r\n        &quot;level&quot;: &quot;WARN&quot;,\r\n        &quot;thread&quot;: &quot;http-nio-8080-exec-4&quot;,\r\n        &quot;stackTrace&quot;: &quot;javax.mail.MessagingException: 501 Syntax: HELO &lt;hostname&gt;\\n\\n\\tat com.sun.mail.smtp.SMTPTransport.issueCommand(SMTPTransport.java:2324)\\n\\tat com.sun.mail.smtp.SMTPTransport.helo(SMTPTransport.java:1678)\\n\\tat .. truncated ...,\r\n        &quot;message&quot;: &quot;Mail health check failed&quot;,\r\n        &quot;exceptionClass&quot;: &quot;MessagingException&quot;\r\n    }\r\n\r\nI&#39;ve searched online but can&#39;t find the root cause of this issue.\r\n\r\nHave you got any suggestion?\r\n\r\nThanks.","title":"AWS SES Warning: Mail health check failed","body":"<p>We are developing a Java Spring Boot application on AWS and using SES as SMTP server.</p>\n<p>When the application starts up (it's a Docker container running into an ECS Task) We receive the following warning in CloudWatch.</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2023-05-30T15:57:28.7Z&quot;,\n    &quot;logger&quot;: &quot;org.springframework.boot.actuate.mail.MailHealthIndicator&quot;,\n    &quot;level&quot;: &quot;WARN&quot;,\n    &quot;thread&quot;: &quot;http-nio-8080-exec-4&quot;,\n    &quot;stackTrace&quot;: &quot;javax.mail.MessagingException: 501 Syntax: HELO &lt;hostname&gt;\\n\\n\\tat com.sun.mail.smtp.SMTPTransport.issueCommand(SMTPTransport.java:2324)\\n\\tat com.sun.mail.smtp.SMTPTransport.helo(SMTPTransport.java:1678)\\n\\tat .. truncated ...,\n    &quot;message&quot;: &quot;Mail health check failed&quot;,\n    &quot;exceptionClass&quot;: &quot;MessagingException&quot;\n}\n</code></pre>\n<p>I've searched online but can't find the root cause of this issue.</p>\n<p>Have you got any suggestion?</p>\n<p>Thanks.</p>\n"},{"tags":["java","eclipse","maven"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1512058815,"post_id":47577386,"comment_id":82112960,"body_markdown":"Set testng dependency to scope `test` instead of `compile`","body":"Set testng dependency to scope <code>test</code> instead of <code>compile</code>"},{"owner":{"account_id":11259466,"reputation":1430,"user_id":8258222,"display_name":"helospark"},"score":0,"creation_date":1512071763,"post_id":47577386,"comment_id":82120598,"body_markdown":"Have you tried running Maven from the command line, or only from Eclipse?","body":"Have you tried running Maven from the command line, or only from Eclipse?"}],"answers":[{"comments":[{"owner":{"account_id":12381316,"reputation":45,"user_id":9026807,"accept_rate":50,"display_name":"Yashica"},"score":0,"creation_date":1512058509,"post_id":47577682,"comment_id":82112730,"body_markdown":"This is maven project.","body":"This is maven project."},{"owner":{"account_id":9172758,"reputation":995,"user_id":6819602,"accept_rate":55,"display_name":"Arvind Katte"},"score":0,"creation_date":1512058877,"post_id":47577682,"comment_id":82112999,"body_markdown":"Try this,  Just do Eclipse&gt; Project &gt; Clean and then run the test cases again. It should work. \n\nWhat it does in background is, that it will call mvn eclipse:clean in your project directory which will delete your .project and .classpath files and you can also do a mvn eclipse:eclipse - this regenerates your .project and .classpath files. Thus adding the desired class in the classpath.","body":"Try this,  Just do Eclipse&gt; Project &gt; Clean and then run the test cases again. It should work.   What it does in background is, that it will call mvn eclipse:clean in your project directory which will delete your .project and .classpath files and you can also do a mvn eclipse:eclipse - this regenerates your .project and .classpath files. Thus adding the desired class in the classpath."},{"owner":{"account_id":12381316,"reputation":45,"user_id":9026807,"accept_rate":50,"display_name":"Yashica"},"score":0,"creation_date":1512059656,"post_id":47577682,"comment_id":82113516,"body_markdown":"tried. not working for me. i am not even seeing my compiled test classes in target folder","body":"tried. not working for me. i am not even seeing my compiled test classes in target folder"}],"tags":[],"owner":{"account_id":9172758,"reputation":995,"user_id":6819602,"accept_rate":55,"display_name":"Arvind Katte"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1512057947,"creation_date":1512057947,"answer_id":47577682,"question_id":47577386,"body_markdown":"I think you have to convert non-maven project to maven project\r\n\r\n    right click on project-&gt;Configure-&gt;Convert it to Maven","title":"maven is not compiling test/java classes into target folder","body":"<p>I think you have to convert non-maven project to maven project</p>\n\n<pre><code>right click on project-&gt;Configure-&gt;Convert it to Maven\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4872208,"reputation":1786,"user_id":3928295,"accept_rate":80,"display_name":"Manmohan_singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1512098131,"creation_date":1512098131,"answer_id":47586121,"question_id":47577386,"body_markdown":"You need to add **maven surefire plugin** to run testNG classes. It&#39;s a miracle if you were able to run the tests earlier without this plugin. You have to add below plugin in the build phase to get going. \r\n\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.20.1&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;includes&gt;\r\n            &lt;include&gt;Sample.java&lt;/include&gt;\r\n          &lt;/includes&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n\r\nIf you don&#39;t want to include the tests manually then by default, the Surefire Plugin will automatically include all test classes with the following wildcard patterns:\r\n\r\n    &quot;**/Test*.java&quot;\r\n    \r\n    &quot;**/*Test.java&quot;\r\n    \r\n    &quot;**/*Tests.java&quot;\r\n    \r\n    &quot;**/*TestCase.java&quot;\r\n\r\n","title":"maven is not compiling test/java classes into target folder","body":"<p>You need to add <strong>maven surefire plugin</strong> to run testNG classes. It's a miracle if you were able to run the tests earlier without this plugin. You have to add below plugin in the build phase to get going. </p>\n\n<pre><code>  &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.20.1&lt;/version&gt;\n    &lt;configuration&gt;\n      &lt;includes&gt;\n        &lt;include&gt;Sample.java&lt;/include&gt;\n      &lt;/includes&gt;\n    &lt;/configuration&gt;\n  &lt;/plugin&gt;\n</code></pre>\n\n<p>If you don't want to include the tests manually then by default, the Surefire Plugin will automatically include all test classes with the following wildcard patterns:</p>\n\n<pre><code>\"**/Test*.java\"\n\n\"**/*Test.java\"\n\n\"**/*Tests.java\"\n\n\"**/*TestCase.java\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9505388,"reputation":328,"user_id":7065093,"accept_rate":40,"display_name":"Allen H."},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1523041904,"creation_date":1523041904,"answer_id":49699598,"question_id":47577386,"body_markdown":"Not sure how widely this applies, but I had success with this:\r\n\r\nRight click &gt; Java build path &gt; Source\r\nMake sure Include:(All) and Exclude:(None) is checked for all 4 folders\r\n\r\nsrc/main/java\r\n\r\nsrc/main/resources\r\n\r\nsrc/test/java\r\n\r\nsrc/test/resources","title":"maven is not compiling test/java classes into target folder","body":"<p>Not sure how widely this applies, but I had success with this:</p>\n\n<p>Right click > Java build path > Source\nMake sure Include:(All) and Exclude:(None) is checked for all 4 folders</p>\n\n<p>src/main/java</p>\n\n<p>src/main/resources</p>\n\n<p>src/test/java</p>\n\n<p>src/test/resources</p>\n"},{"tags":[],"owner":{"account_id":6683669,"reputation":4482,"user_id":5155835,"accept_rate":48,"display_name":"user5155835"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551539595,"creation_date":1551539595,"answer_id":54959950,"question_id":47577386,"body_markdown":"The issue for me was that the &quot;Skip Tests&quot; checkbox was checked.\r\n\r\nRClick project -&gt; Run As -&gt; Run Configurations -&gt; Maven Build (select your build configuration) -&gt; Uncheck Skip Tests checkbox \r\n\r\nThis checkbox prevents Maven from compiling tests\r\n\r\nIf you want to compile the tests, but don&#39;t want to execute them during build process, add -DskipTests in Goals","title":"maven is not compiling test/java classes into target folder","body":"<p>The issue for me was that the \"Skip Tests\" checkbox was checked.</p>\n\n<p>RClick project -> Run As -> Run Configurations -> Maven Build (select your build configuration) -> Uncheck Skip Tests checkbox </p>\n\n<p>This checkbox prevents Maven from compiling tests</p>\n\n<p>If you want to compile the tests, but don't want to execute them during build process, add -DskipTests in Goals</p>\n"},{"tags":[],"owner":{"account_id":28717971,"reputation":1,"user_id":21992221,"display_name":"Fenrir0077"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685526886,"creation_date":1685526886,"answer_id":76372239,"question_id":47577386,"body_markdown":"Can you please try using the following maven command. The following maven command will compile the classes inside src/test folder.\r\n\r\n`mvn test-compile`","title":"maven is not compiling test/java classes into target folder","body":"<p>Can you please try using the following maven command. The following maven command will compile the classes inside src/test folder.</p>\n<p><code>mvn test-compile</code></p>\n"}],"owner":{"account_id":12381316,"reputation":45,"user_id":9026807,"accept_rate":50,"display_name":"Yashica"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11088,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1685526886,"creation_date":1512057044,"question_id":47577386,"body_markdown":"I tried cleaning my project through maven-&gt;clean and project-&gt;clean but it didnot work. I tried changing my output folders explicitly under build path but not sure what to select for src/test/java \n\nI also updated my testng plugin in pom.xml\n\n### pom.xml\n\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0\n                          http://maven.apache.org/xsd/maven-4.0.0.xsd&quot; &gt;\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n      &lt;groupId&gt;abc&lt;/groupId&gt;\n      &lt;artifactId&gt;xyz&lt;/artifactId&gt;\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n      &lt;packaging&gt;jar&lt;/packaging&gt;\n      &lt;description&gt;Test&lt;/description&gt;\n      &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.testng&lt;/groupId&gt;\n                &lt;artifactId&gt;testng&lt;/artifactId&gt;\n                &lt;version&gt;6.11&lt;/version&gt;\n                &lt;scope&gt;compile&lt;/scope&gt;\n            &lt;/dependency&gt;\n        \n            &lt;dependency&gt;\n                &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n                &lt;artifactId&gt;guava&lt;/artifactId&gt;\n                &lt;version&gt;21.0&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n                &lt;artifactId&gt;selenium-support&lt;/artifactId&gt;\n                &lt;version&gt;3.3.1&lt;/version&gt;\n            &lt;/dependency&gt;\n            \n            \n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n             &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n             &lt;artifactId&gt;selenium-chrome-driver&lt;/artifactId&gt;\n             &lt;version&gt;3.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n            &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-ie-driver --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-ie-driver&lt;/artifactId&gt;\n            &lt;version&gt;3.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n            \n            &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi&lt;/artifactId&gt;\n            &lt;version&gt;3.16&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n            &lt;version&gt;3.16&lt;/version&gt;\n        &lt;/dependency&gt;\n            \n            &lt;dependency&gt;\n                &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n                &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n                &lt;version&gt;1.4.01&lt;/version&gt;\n            &lt;/dependency&gt;\n        \n            \n            &lt;dependency&gt;\n                &lt;groupId&gt;mysql&lt;/groupId&gt;\n                &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n                &lt;version&gt;5.1.37&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;log4j&lt;/groupId&gt;\n                &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n                &lt;version&gt;1.2.17&lt;/version&gt;\n            &lt;/dependency&gt;\n                &lt;!-- https://mvnrepository.com/artifact/com.relevantcodes/extentreports --&gt;\n            &lt;dependency&gt;\n                 &lt;groupId&gt;com.relevantcodes&lt;/groupId&gt;\n                 &lt;artifactId&gt;extentreports&lt;/artifactId&gt;\n                &lt;version&gt;2.41.0&lt;/version&gt;\n            &lt;/dependency&gt;\n        \n            \n            &lt;dependency&gt;\n                &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n                &lt;artifactId&gt;selenium-firefox-driver&lt;/artifactId&gt;\n                &lt;version&gt;3.1.0&lt;/version&gt;\n            &lt;/dependency&gt;\n            \n            &lt;!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-compiler-plugin --&gt;\n        \n        &lt;/dependencies&gt;\n        &lt;properties&gt;\n            &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n            &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n        &lt;/properties&gt;\n     \n      &lt;build&gt;\n    \n       &lt;resources&gt;\n         &lt;resource&gt;\n           &lt;directory&gt;src/test/resources&lt;/directory&gt;\n           &lt;filtering&gt;false&lt;/filtering&gt;\n           &lt;includes&gt;\n              &lt;include&gt;**/*.properties&lt;/include&gt;\n              \n            &lt;/includes&gt;\n         &lt;/resource&gt;\n       &lt;/resources&gt;\n    \n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1&lt;/version&gt;\n                &lt;configuration&gt;\n    \n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                 \n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    \n      &lt;/build&gt;\n    &lt;/project&gt;\n\nOutput folders for src/test/java and src/test/resources is /target/classes\n\nand I am getting TestNG class not found in classpath error :\n\n    org.testng.TestNGException: \n    Cannot find class in classpath: testclass file\n\nEarlier this code was working fine. I just tried refractoring the project by changing artifact id of maven project and from then not able to proceed.","title":"maven is not compiling test/java classes into target folder","body":"<p>I tried cleaning my project through maven-&gt;clean and project-&gt;clean but it didnot work. I tried changing my output folders explicitly under build path but not sure what to select for src/test/java</p>\n<p>I also updated my testng plugin in pom.xml</p>\n<h3>pom.xml</h3>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0\n                      http://maven.apache.org/xsd/maven-4.0.0.xsd&quot; &gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;abc&lt;/groupId&gt;\n  &lt;artifactId&gt;xyz&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n  &lt;description&gt;Test&lt;/description&gt;\n  &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\n            &lt;version&gt;6.11&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;version&gt;21.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-support&lt;/artifactId&gt;\n            &lt;version&gt;3.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        \n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-io&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n        &lt;version&gt;2.5&lt;/version&gt;\n    &lt;/dependency&gt;\n    \n    &lt;dependency&gt;\n         &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n         &lt;artifactId&gt;selenium-chrome-driver&lt;/artifactId&gt;\n         &lt;version&gt;3.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-ie-driver --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-ie-driver&lt;/artifactId&gt;\n        &lt;version&gt;3.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n        &lt;artifactId&gt;poi&lt;/artifactId&gt;\n        &lt;version&gt;3.16&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n        &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n        &lt;version&gt;3.16&lt;/version&gt;\n    &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n            &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n            &lt;version&gt;1.4.01&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;5.1.37&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;version&gt;1.2.17&lt;/version&gt;\n        &lt;/dependency&gt;\n            &lt;!-- https://mvnrepository.com/artifact/com.relevantcodes/extentreports --&gt;\n        &lt;dependency&gt;\n             &lt;groupId&gt;com.relevantcodes&lt;/groupId&gt;\n             &lt;artifactId&gt;extentreports&lt;/artifactId&gt;\n            &lt;version&gt;2.41.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-firefox-driver&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        &lt;!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-compiler-plugin --&gt;\n    \n    &lt;/dependencies&gt;\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n \n  &lt;build&gt;\n\n   &lt;resources&gt;\n     &lt;resource&gt;\n       &lt;directory&gt;src/test/resources&lt;/directory&gt;\n       &lt;filtering&gt;false&lt;/filtering&gt;\n       &lt;includes&gt;\n          &lt;include&gt;**/*.properties&lt;/include&gt;\n          \n        &lt;/includes&gt;\n     &lt;/resource&gt;\n   &lt;/resources&gt;\n\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.1&lt;/version&gt;\n            &lt;configuration&gt;\n\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n             \n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Output folders for src/test/java and src/test/resources is /target/classes</p>\n<p>and I am getting TestNG class not found in classpath error :</p>\n<pre><code>org.testng.TestNGException: \nCannot find class in classpath: testclass file\n</code></pre>\n<p>Earlier this code was working fine. I just tried refractoring the project by changing artifact id of maven project and from then not able to proceed.</p>\n"},{"tags":["java","maven","jaxb"],"answers":[{"tags":[],"owner":{"account_id":194909,"reputation":4585,"user_id":437506,"accept_rate":47,"display_name":"Kedar Mhaswade"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1460404215,"creation_date":1460404215,"answer_id":36557960,"question_id":36557308,"body_markdown":"You seem to be running it inside the IDE. For some strange reasons, although the JAXB classes are included in JRE&#39;s rt.jar,\r\n\r\n    โ  lib jar tvf rt.jar| grep AnnotationReader\r\n      4199 Fri Jan 29 15:35:18 PST 2016 com/sun/xml/internal/bind/v2/model/annotation/AbstractInlineAnnotationReaderImpl.class\r\n      3140 Fri Jan 29 15:35:14 PST 2016 com/sun/xml/internal/bind/v2/model/annotation/AnnotationReader.class\r\n       442 Fri Jan 29 15:35:14 PST 2016 com/sun/xml/internal/bind/v2/model/annotation/RuntimeAnnotationReader.class\r\n      9846 Fri Jan 29 15:35:22 PST 2016 com/sun/xml/internal/bind/v2/model/annotation/RuntimeInlineAnnotationReader.class\r\n      1217 Fri Jan 29 15:35:26 PST 2016 com/sun/xml/internal/ws/model/ReflectAnnotationReader$1.class\r\n      1332 Fri Jan 29 15:35:26 PST 2016 com/sun/xml/internal/ws/model/ReflectAnnotationReader$2.class\r\n      1278 Fri Jan 29 15:35:26 PST 2016 com/sun/xml/internal/ws/model/ReflectAnnotationReader$3.class\r\n      1166 Fri Jan 29 15:35:26 PST 2016 com/sun/xml/internal/ws/model/ReflectAnnotationReader$4.class\r\n      3563 Fri Jan 29 15:35:26 PST 2016 com/sun/xml/internal/ws/model/ReflectAnnotationReader.class\r\n\r\n they are not available for your app at runtime. \r\n\r\nHowever, if I run the app this way:\r\n\r\n    โ  target java -cp ./classes com.misc.common.ReadXMLFileJaxb\r\n    Book [firstName=null, lastName=Blo, age=33]\r\n\r\ni.e. from the command line using the standard Maven structure, it does seem to run.\r\n\r\nYour book.xml is somewhat wrong, I believe. It contains an embedded `person` element whereas the Book.java does not. You may want to fix that.","title":"Caused by: java.lang.ClassNotFoundException: com.sun.xml.bind.v2.model.annotation.AnnotationReader","body":"<p>You seem to be running it inside the IDE. For some strange reasons, although the JAXB classes are included in JRE's rt.jar,</p>\n\n<pre><code>โ  lib jar tvf rt.jar| grep AnnotationReader\n  4199 Fri Jan 29 15:35:18 PST 2016 com/sun/xml/internal/bind/v2/model/annotation/AbstractInlineAnnotationReaderImpl.class\n  3140 Fri Jan 29 15:35:14 PST 2016 com/sun/xml/internal/bind/v2/model/annotation/AnnotationReader.class\n   442 Fri Jan 29 15:35:14 PST 2016 com/sun/xml/internal/bind/v2/model/annotation/RuntimeAnnotationReader.class\n  9846 Fri Jan 29 15:35:22 PST 2016 com/sun/xml/internal/bind/v2/model/annotation/RuntimeInlineAnnotationReader.class\n  1217 Fri Jan 29 15:35:26 PST 2016 com/sun/xml/internal/ws/model/ReflectAnnotationReader$1.class\n  1332 Fri Jan 29 15:35:26 PST 2016 com/sun/xml/internal/ws/model/ReflectAnnotationReader$2.class\n  1278 Fri Jan 29 15:35:26 PST 2016 com/sun/xml/internal/ws/model/ReflectAnnotationReader$3.class\n  1166 Fri Jan 29 15:35:26 PST 2016 com/sun/xml/internal/ws/model/ReflectAnnotationReader$4.class\n  3563 Fri Jan 29 15:35:26 PST 2016 com/sun/xml/internal/ws/model/ReflectAnnotationReader.class\n</code></pre>\n\n<p>they are not available for your app at runtime. </p>\n\n<p>However, if I run the app this way:</p>\n\n<pre><code>โ  target java -cp ./classes com.misc.common.ReadXMLFileJaxb\nBook [firstName=null, lastName=Blo, age=33]\n</code></pre>\n\n<p>i.e. from the command line using the standard Maven structure, it does seem to run.</p>\n\n<p>Your book.xml is somewhat wrong, I believe. It contains an embedded <code>person</code> element whereas the Book.java does not. You may want to fix that.</p>\n"},{"comments":[{"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":1,"creation_date":1523539089,"post_id":36557993,"comment_id":86609739,"body_markdown":"No need to have `jaxb-core` and `jaxb-impl`, `jaxb-core` automatically adds `jaxb-impl`.","body":"No need to have <code>jaxb-core</code> and <code>jaxb-impl</code>, <code>jaxb-core</code> automatically adds <code>jaxb-impl</code>."},{"owner":{"account_id":231776,"reputation":252,"user_id":496185,"accept_rate":50,"display_name":"CaffiendFrog"},"score":0,"creation_date":1539282067,"post_id":36557993,"comment_id":92455985,"body_markdown":"FYI: jaxb-core is no longer part of com.sun.xml.bind. I got this same error and was fixed with using jaxb-xjc, version 2.1.7, from com.sun.xml.bind.","body":"FYI: jaxb-core is no longer part of com.sun.xml.bind. I got this same error and was fixed with using jaxb-xjc, version 2.1.7, from com.sun.xml.bind."}],"tags":[],"owner":{"display_name":"user4821194"},"comment_count":2,"down_vote_count":0,"up_vote_count":79,"is_accepted":true,"score":79,"last_activity_date":1523040550,"creation_date":1460404324,"answer_id":36557993,"question_id":36557308,"body_markdown":"As per link: https://stackoverflow.com/questions/27046836/why-has-annotationreader-been-removed-from-jaxb-reference-implementation, you need to simply use below maven dependencies:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n        &lt;version&gt;2.2.11&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\r\n   \t    &lt;version&gt;2.2.11&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nYou need to refactor code a bit. Also looks like you&#39;ve not created same name fields of model class, it should be like below:\r\nPerson.java\r\n\r\n    @XmlRootElement(name=&quot;Person&quot;)\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    public class Person {\r\n    \t@XmlElement\r\n    \tprivate String first;\r\n    \t@XmlElement\r\n    \tprivate String last;\r\n    \t@XmlElement\r\n    \tprivate String age;\r\n    \tpublic String getFirst() {\r\n    \t\treturn first;\r\n    \t}\r\n    \tpublic void setFirst(String first) {\r\n    \t\tthis.first = first;\r\n    \t}\r\n    \tpublic String getLast() {\r\n    \t\treturn last;\r\n    \t}\r\n    \tpublic void setLast(String last) {\r\n    \t\tthis.last = last;\r\n    \t}\r\n    \tpublic String getAge() {\r\n    \t\treturn age;\r\n    \t}\r\n    \tpublic void setAge(String age) {\r\n    \t\tthis.age = age;\r\n    \t}\r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;Person [first=&quot; + first + &quot;, last=&quot; + last + &quot;, age=&quot; + age\t+ &quot;]&quot;;\r\n    \t}\r\n    } \r\nBook.java\r\n\r\n    @XmlRootElement(name=&quot;book&quot;)\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    public class Book {\r\n    \tprivate List&lt;Person&gt; person = new ArrayList&lt;Person&gt;();\r\n    \r\n    \tpublic List&lt;Person&gt; getPerson() {\r\n    \t\treturn person;\r\n    \t}\r\n    \r\n    \tpublic void setPerson(List&lt;Person&gt; person) {\r\n    \t\tthis.person = person;\r\n    \t}\r\n    }\r\nReadXMLFileJaxb.java\r\n\r\n    public class ReadXMLFileJaxb {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tFile file = new File(ReadXMLFileDOM.class.getClassLoader().getResource(&quot;book.xml&quot;).getFile());\r\n    \r\n    \t\ttry {\r\n    \t\t\tJAXBContext context = JAXBContext.newInstance(Book.class);\r\n    \t\t\tUnmarshaller unmarshaller = context.createUnmarshaller();\r\n    \t\t\tBook book = (Book) unmarshaller.unmarshal(file);\r\n    \t\t\tSystem.out.println(book.getPerson().size());\r\n    \t\t\t\r\n    \t\t\tfor (int i = 0; i &lt; book.getPerson().size(); i++) {\r\n    \t\t\t\tSystem.out.println(&quot;------------&quot;);\r\n    \t\t\t\tSystem.out.println(book.getPerson().get(i).getFirst());\r\n    \t\t\t\tSystem.out.println(book.getPerson().get(i).getLast());\r\n    \t\t\t\tSystem.out.println(book.getPerson().get(i).getAge());\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t} catch (JAXBException e) {\r\n    \t\t\tSystem.out.println(e.getMessage());\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nThe below output I see:\r\n\r\n    3\r\n    ------------\r\n    Kiran\r\n    Pai\r\n    22\r\n    ------------\r\n    Bill\r\n    Gates\r\n    46\r\n    ------------\r\n    Steve\r\n    Jobs\r\n    40\r\n\r\n","title":"Caused by: java.lang.ClassNotFoundException: com.sun.xml.bind.v2.model.annotation.AnnotationReader","body":"<p>As per link: <a href=\"https://stackoverflow.com/questions/27046836/why-has-annotationreader-been-removed-from-jaxb-reference-implementation\">Why has AnnotationReader been removed from JAXB reference implementation?</a>, you need to simply use below maven dependencies:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n    &lt;version&gt;2.2.11&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\n    &lt;version&gt;2.2.11&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>You need to refactor code a bit. Also looks like you've not created same name fields of model class, it should be like below:\nPerson.java</p>\n\n<pre><code>@XmlRootElement(name=\"Person\")\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class Person {\n    @XmlElement\n    private String first;\n    @XmlElement\n    private String last;\n    @XmlElement\n    private String age;\n    public String getFirst() {\n        return first;\n    }\n    public void setFirst(String first) {\n        this.first = first;\n    }\n    public String getLast() {\n        return last;\n    }\n    public void setLast(String last) {\n        this.last = last;\n    }\n    public String getAge() {\n        return age;\n    }\n    public void setAge(String age) {\n        this.age = age;\n    }\n    @Override\n    public String toString() {\n        return \"Person [first=\" + first + \", last=\" + last + \", age=\" + age + \"]\";\n    }\n} \n</code></pre>\n\n<p>Book.java</p>\n\n<pre><code>@XmlRootElement(name=\"book\")\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class Book {\n    private List&lt;Person&gt; person = new ArrayList&lt;Person&gt;();\n\n    public List&lt;Person&gt; getPerson() {\n        return person;\n    }\n\n    public void setPerson(List&lt;Person&gt; person) {\n        this.person = person;\n    }\n}\n</code></pre>\n\n<p>ReadXMLFileJaxb.java</p>\n\n<pre><code>public class ReadXMLFileJaxb {\n    public static void main(String[] args) {\n        File file = new File(ReadXMLFileDOM.class.getClassLoader().getResource(\"book.xml\").getFile());\n\n        try {\n            JAXBContext context = JAXBContext.newInstance(Book.class);\n            Unmarshaller unmarshaller = context.createUnmarshaller();\n            Book book = (Book) unmarshaller.unmarshal(file);\n            System.out.println(book.getPerson().size());\n\n            for (int i = 0; i &lt; book.getPerson().size(); i++) {\n                System.out.println(\"------------\");\n                System.out.println(book.getPerson().get(i).getFirst());\n                System.out.println(book.getPerson().get(i).getLast());\n                System.out.println(book.getPerson().get(i).getAge());\n            }\n\n        } catch (JAXBException e) {\n            System.out.println(e.getMessage());\n        }\n    }\n}\n</code></pre>\n\n<p>The below output I see:</p>\n\n<pre><code>3\n------------\nKiran\nPai\n22\n------------\nBill\nGates\n46\n------------\nSteve\nJobs\n40\n</code></pre>\n"},{"comments":[{"owner":{"account_id":390125,"reputation":4499,"user_id":749979,"accept_rate":100,"display_name":"GSUgambit"},"score":1,"creation_date":1519933079,"post_id":39753866,"comment_id":85119419,"body_markdown":"i thought this was the case and i added it and still have the issue","body":"i thought this was the case and i added it and still have the issue"},{"owner":{"account_id":390125,"reputation":4499,"user_id":749979,"accept_rate":100,"display_name":"GSUgambit"},"score":3,"creation_date":1519933316,"post_id":39753866,"comment_id":85119551,"body_markdown":"i had to switch to 2.3.0 artifacts of runtime and core to fix the issue","body":"i had to switch to 2.3.0 artifacts of runtime and core to fix the issue"},{"owner":{"account_id":1818501,"reputation":159,"user_id":1653102,"display_name":"wizardInCloud"},"score":5,"creation_date":1527078951,"post_id":39753866,"comment_id":87989943,"body_markdown":"it actually worked for me this :\n     `&lt;dependency&gt;\n        &lt;groupId&gt;com.sun.activation&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.activation&lt;/artifactId&gt;\n        &lt;version&gt;1.2.0&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n        &lt;version&gt;2.3.0&lt;/version&gt;\n      &lt;/dependency&gt;\n`","body":"it actually worked for me this :      <code>&lt;dependency&gt;         &lt;groupId&gt;com.sun.activation&lt;&#47;groupId&gt;         &lt;artifactId&gt;javax.activation&lt;&#47;artifactId&gt;         &lt;version&gt;1.2.0&lt;&#47;version&gt;       &lt;&#47;dependency&gt;       &lt;dependency&gt;         &lt;groupId&gt;org.glassfish.jaxb&lt;&#47;groupId&gt;         &lt;artifactId&gt;jaxb-runtime&lt;&#47;artifactId&gt;         &lt;version&gt;2.3.0&lt;&#47;version&gt;       &lt;&#47;dependency&gt; </code>"},{"owner":{"account_id":7020942,"reputation":28624,"user_id":5380322,"accept_rate":62,"display_name":"Cepr0"},"score":0,"creation_date":1537694957,"post_id":39753866,"comment_id":91871408,"body_markdown":"@Ignaciolucatero only your combination has worked, thanks!!! (java10, spring-boot 2.0.x)","body":"@Ignaciolucatero only your combination has worked, thanks!!! (java10, spring-boot 2.0.x)"}],"tags":[],"owner":{"account_id":3063384,"reputation":550,"user_id":2595609,"display_name":"nirmalsingh"},"comment_count":4,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1475083066,"creation_date":1475083066,"answer_id":39753866,"question_id":36557308,"body_markdown":"Although Issue is very old but still answering. Root cause is that com.sun.xml.bind is obsolete now. org.glassfish.jaxb is latest reference implementation of JAXB API. Using below JAXB RI maven dependency would solve the issue.\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2.11&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n","title":"Caused by: java.lang.ClassNotFoundException: com.sun.xml.bind.v2.model.annotation.AnnotationReader","body":"<p>Although Issue is very old but still answering. Root cause is that com.sun.xml.bind is obsolete now. org.glassfish.jaxb is latest reference implementation of JAXB API. Using below JAXB RI maven dependency would solve the issue.</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n        &lt;version&gt;2.2.11&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2938635,"reputation":1870,"user_id":2517035,"display_name":"Rajeev Rathor"},"score":1,"creation_date":1566985734,"post_id":55297661,"comment_id":101823687,"body_markdown":"I tried all above solution but finally only this solution is working fine for me.","body":"I tried all above solution but finally only this solution is working fine for me."}],"tags":[],"owner":{"account_id":14779600,"reputation":51,"user_id":10673417,"display_name":"Juan Mar&#237;"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1553250690,"creation_date":1553250690,"answer_id":55297661,"question_id":36557308,"body_markdown":"The best solution that I found is using maven-jaxb2-plugin, then the only dependency that you need is:\r\n\r\n    \t&lt;!-- https://mvnrepository.com/artifact/org.jvnet.jaxb2.maven2/maven-jaxb2-plugin --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.jvnet.jaxb2.maven2&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;maven-jaxb2-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.14.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;","title":"Caused by: java.lang.ClassNotFoundException: com.sun.xml.bind.v2.model.annotation.AnnotationReader","body":"<p>The best solution that I found is using maven-jaxb2-plugin, then the only dependency that you need is:</p>\n\n<pre><code>    &lt;!-- https://mvnrepository.com/artifact/org.jvnet.jaxb2.maven2/maven-jaxb2-plugin --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jvnet.jaxb2.maven2&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-jaxb2-plugin&lt;/artifactId&gt;\n        &lt;version&gt;0.14.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4868086,"reputation":3099,"user_id":3925626,"display_name":"prisar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1578602493,"creation_date":1578602493,"answer_id":59671792,"question_id":36557308,"body_markdown":"Solve the error by adding these two dependencies in pom\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2.11&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2.11&lt;/version&gt;\r\n        &lt;/dependency&gt;","title":"Caused by: java.lang.ClassNotFoundException: com.sun.xml.bind.v2.model.annotation.AnnotationReader","body":"<p>Solve the error by adding these two dependencies in pom</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n        &lt;version&gt;2.2.11&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\n        &lt;version&gt;2.2.11&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7327479,"reputation":651,"user_id":5581476,"display_name":"Jonathan Kibet"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685526875,"creation_date":1685526875,"answer_id":76372237,"question_id":36557308,"body_markdown":"I tried above options but none worked. The closest solution was one above that required a little version bump to solve the issue:\r\n\r\nThis did not work:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n        &lt;version&gt;2.2.11&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThis worked:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.6&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Caused by: java.lang.ClassNotFoundException: com.sun.xml.bind.v2.model.annotation.AnnotationReader","body":"<p>I tried above options but none worked. The closest solution was one above that required a little version bump to solve the issue:</p>\n<p>This did not work:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n    &lt;version&gt;2.2.11&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>This worked:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n    &lt;version&gt;2.3.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"display_name":"user4821194"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107827,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"accepted_answer_id":36557993,"answer_count":6,"score":36,"last_activity_date":1685526875,"creation_date":1460402044,"question_id":36557308,"body_markdown":"You might think that following issue is very simple, but I don&#39;t know what I did wrong here. I feel I added required dependencies. Haven&#39;t I?\r\n\r\nCould anyone please suggest me whats wrong here?\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/sun/xml/bind/v2/model/annotation/AnnotationReader\r\n    \tat java.lang.ClassLoader.defineClass1(Native Method)\r\n    \tat java.lang.ClassLoader.defineClass(ClassLoader.java:760)\r\n    \tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n    \tat java.net.URLClassLoader.defineClass(URLClassLoader.java:467)\r\n    \tat java.net.URLClassLoader.access$100(URLClassLoader.java:73)\r\n    \tat java.net.URLClassLoader$1.run(URLClassLoader.java:368)\r\n    \tat java.net.URLClassLoader$1.run(URLClassLoader.java:362)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:361)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n    \tat java.lang.Class.getDeclaredMethods0(Native Method)\r\n    \tat java.lang.Class.privateGetDeclaredMethods(Class.java:2701)\r\n    \tat java.lang.Class.privateGetMethodRecursive(Class.java:3048)\r\n    \tat java.lang.Class.getMethod0(Class.java:3018)\r\n    \tat java.lang.Class.getMethod(Class.java:1784)\r\n    \tat javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:242)\r\n    \tat javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:234)\r\n    \tat javax.xml.bind.ContextFinder.find(ContextFinder.java:441)\r\n    \tat javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:641)\r\n    \tat javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:584)\r\n    \tat com.misc.common.ReadXMLFileJaxb.main(ReadXMLFileJaxb.java:14)\r\n    Caused by: java.lang.ClassNotFoundException: com.sun.xml.bind.v2.model.annotation.AnnotationReader\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:381)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n    \t... 23 more\r\n\r\nBook.java\r\n\r\n    @XmlRootElement\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    public class Book {\r\n    \t@XmlAttribute\r\n    \tprivate String firstName;\r\n    \t@XmlElement\r\n    \tprivate String lastName;\r\n    \t@XmlElement\r\n    \tprivate String age;\r\n    \t\r\n    \t\r\n    \tpublic String getFirstName() {\r\n    \t\treturn firstName;\r\n    \t}\r\n    \tpublic void setFirstName(String firstName) {\r\n    \t\tthis.firstName = firstName;\r\n    \t}\r\n    \tpublic String getLastName() {\r\n    \t\treturn lastName;\r\n    \t}\r\n    \tpublic void setLastName(String lastName) {\r\n    \t\tthis.lastName = lastName;\r\n    \t}\r\n    \tpublic String getAge() {\r\n    \t\treturn age;\r\n    \t}\r\n    \tpublic void setAge(String age) {\r\n    \t\tthis.age = age;\r\n    \t}\r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;Book [firstName=&quot; + firstName + &quot;, lastName=&quot; + lastName+ &quot;, age=&quot; + age + &quot;]&quot;;\r\n    \t}\r\n    }\r\nReadXMLFileJaxb.java\r\n\r\n    public class ReadXMLFileJaxb {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tFile file = new File(ReadXMLFileDOM.class.getClassLoader().getResource(&quot;book.xml&quot;).getFile());\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\tJAXBContext context = JAXBContext.newInstance(Book.class);\r\n    \t\t\tUnmarshaller unmarshaller = context.createUnmarshaller();\r\n    \t\t\tBook book = (Book) unmarshaller.unmarshal(file);\r\n    \t\t\tSystem.out.println(book.toString());\r\n    \t\t} catch (JAXBException e) {\r\n    \t\t\tSystem.out.println(e.getMessage());\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nMy book.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot;?&gt;\r\n    &lt;book&gt;\r\n    \t&lt;person&gt;\r\n    \t\t&lt;first&gt;Kiran&lt;/first&gt;\r\n    \t\t&lt;last&gt;Pai&lt;/last&gt;\r\n    \t\t&lt;age&gt;22&lt;/age&gt;\r\n    \t&lt;/person&gt;\r\n    \t&lt;person&gt;\r\n    \t\t&lt;first&gt;Bill&lt;/first&gt;\r\n    \t\t&lt;last&gt;Gates&lt;/last&gt;\r\n    \t\t&lt;age&gt;46&lt;/age&gt;\r\n    \t&lt;/person&gt;\r\n    \t&lt;person&gt;\r\n    \t\t&lt;first&gt;Steve&lt;/first&gt;\r\n    \t\t&lt;last&gt;Jobs&lt;/last&gt;\r\n    \t\t&lt;age&gt;40&lt;/age&gt;\r\n    \t&lt;/person&gt;\r\n    &lt;/book&gt;\r\n[![enter image description here][1]][1]\r\n\r\n\r\npom.xml\r\n\r\n    &lt;properties&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;!-- JAXB --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.2.11&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.2.12&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/KeT8H.png","title":"Caused by: java.lang.ClassNotFoundException: com.sun.xml.bind.v2.model.annotation.AnnotationReader","body":"<p>You might think that following issue is very simple, but I don't know what I did wrong here. I feel I added required dependencies. Haven't I?</p>\n\n<p>Could anyone please suggest me whats wrong here?</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: com/sun/xml/bind/v2/model/annotation/AnnotationReader\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:760)\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n    at java.net.URLClassLoader.defineClass(URLClassLoader.java:467)\n    at java.net.URLClassLoader.access$100(URLClassLoader.java:73)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:368)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:362)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:361)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    at java.lang.Class.getDeclaredMethods0(Native Method)\n    at java.lang.Class.privateGetDeclaredMethods(Class.java:2701)\n    at java.lang.Class.privateGetMethodRecursive(Class.java:3048)\n    at java.lang.Class.getMethod0(Class.java:3018)\n    at java.lang.Class.getMethod(Class.java:1784)\n    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:242)\n    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:234)\n    at javax.xml.bind.ContextFinder.find(ContextFinder.java:441)\n    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:641)\n    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:584)\n    at com.misc.common.ReadXMLFileJaxb.main(ReadXMLFileJaxb.java:14)\nCaused by: java.lang.ClassNotFoundException: com.sun.xml.bind.v2.model.annotation.AnnotationReader\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    ... 23 more\n</code></pre>\n\n<p>Book.java</p>\n\n<pre><code>@XmlRootElement\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class Book {\n    @XmlAttribute\n    private String firstName;\n    @XmlElement\n    private String lastName;\n    @XmlElement\n    private String age;\n\n\n    public String getFirstName() {\n        return firstName;\n    }\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n    public String getLastName() {\n        return lastName;\n    }\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n    public String getAge() {\n        return age;\n    }\n    public void setAge(String age) {\n        this.age = age;\n    }\n    @Override\n    public String toString() {\n        return \"Book [firstName=\" + firstName + \", lastName=\" + lastName+ \", age=\" + age + \"]\";\n    }\n}\n</code></pre>\n\n<p>ReadXMLFileJaxb.java</p>\n\n<pre><code>public class ReadXMLFileJaxb {\n    public static void main(String[] args) {\n        File file = new File(ReadXMLFileDOM.class.getClassLoader().getResource(\"book.xml\").getFile());\n\n        try {\n            JAXBContext context = JAXBContext.newInstance(Book.class);\n            Unmarshaller unmarshaller = context.createUnmarshaller();\n            Book book = (Book) unmarshaller.unmarshal(file);\n            System.out.println(book.toString());\n        } catch (JAXBException e) {\n            System.out.println(e.getMessage());\n        }\n    }\n}\n</code></pre>\n\n<p>My book.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;book&gt;\n    &lt;person&gt;\n        &lt;first&gt;Kiran&lt;/first&gt;\n        &lt;last&gt;Pai&lt;/last&gt;\n        &lt;age&gt;22&lt;/age&gt;\n    &lt;/person&gt;\n    &lt;person&gt;\n        &lt;first&gt;Bill&lt;/first&gt;\n        &lt;last&gt;Gates&lt;/last&gt;\n        &lt;age&gt;46&lt;/age&gt;\n    &lt;/person&gt;\n    &lt;person&gt;\n        &lt;first&gt;Steve&lt;/first&gt;\n        &lt;last&gt;Jobs&lt;/last&gt;\n        &lt;age&gt;40&lt;/age&gt;\n    &lt;/person&gt;\n&lt;/book&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/KeT8H.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/KeT8H.png\" alt=\"enter image description here\"></a></p>\n\n<p>pom.xml</p>\n\n<pre><code>&lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;!-- JAXB --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n            &lt;version&gt;2.2.11&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.2.12&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n"},{"tags":["java","transactions","ejb","weblogic"],"answers":[{"tags":[],"owner":{"account_id":7754714,"reputation":11,"user_id":5869510,"display_name":"Mohamed Abdel Sattar"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1526540839,"creation_date":1526540839,"answer_id":50385377,"question_id":32098372,"body_markdown":"You can know the type and details of the exception by looking at the server logs which is is AdminServer/logs in your domain directory, it will give you details and description of the exceptions and what happened with the complete stack trace.","title":"weblogic deployment InternalException : Transaction marked rollback or not expected transaction","body":"<p>You can know the type and details of the exception by looking at the server logs which is is AdminServer/logs in your domain directory, it will give you details and description of the exceptions and what happened with the complete stack trace.</p>\n"},{"tags":[],"owner":{"account_id":22929,"reputation":1492,"user_id":57033,"accept_rate":80,"display_name":"hello_earth"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685526848,"creation_date":1679405603,"answer_id":75801906,"question_id":32098372,"body_markdown":"I am just writing down my own case with encountering a similar error while deploying an EAR-packaged application into `Weblogic 12.1.3`. \r\n\r\nWhat I think happened to me is that there was another error hidden somewhere early in the initialization process, which I wasn&#39;t spotting because of very verbose logging.\r\n\r\nApparently there were some breaking changes in my code, the JPA layer was trying to read some constants from the database during the initialization (there is still some code out there that would trap those errors and hide them from you) and was failing - as the result `EJB` layer wasn&#39;t initialized properly, and the obscure exception with the rollback was issued afterwards. So this wasn&#39;t exactly having to do with the deployment process, but with the initialization of the application itself.\r\n\r\n**EDIT:** to double-check this - if the logs do not show something that would make sense, try restarting Weblogic to better see the initialization process","title":"weblogic deployment InternalException : Transaction marked rollback or not expected transaction","body":"<p>I am just writing down my own case with encountering a similar error while deploying an EAR-packaged application into <code>Weblogic 12.1.3</code>.</p>\n<p>What I think happened to me is that there was another error hidden somewhere early in the initialization process, which I wasn't spotting because of very verbose logging.</p>\n<p>Apparently there were some breaking changes in my code, the JPA layer was trying to read some constants from the database during the initialization (there is still some code out there that would trap those errors and hide them from you) and was failing - as the result <code>EJB</code> layer wasn't initialized properly, and the obscure exception with the rollback was issued afterwards. So this wasn't exactly having to do with the deployment process, but with the initialization of the application itself.</p>\n<p><strong>EDIT:</strong> to double-check this - if the logs do not show something that would make sense, try restarting Weblogic to better see the initialization process</p>\n"}],"owner":{"account_id":5871499,"reputation":442,"user_id":4623702,"accept_rate":86,"display_name":"clapsus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":6069,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1685526848,"creation_date":1439994560,"question_id":32098372,"body_markdown":"I have an EAR application, and when i try to deploy it to my weblogic server, i get the following error:\r\n\r\n    &lt;[STANDBY] ExecuteThread: &#39;6&#39; for queue: &#39;weblogic.kernel.Default (self-tuning)&#39;&gt; &lt;&lt;WLS Kernel&gt;&gt; &lt;&gt; &lt;&gt; &lt;1439994186702&gt; &lt;BEA-149078&gt; &lt;Stack trace for message 149004\r\n    weblogic.application.ModuleException: weblogic.ejb.container.InternalException: Transaction marked rollback or not expected transaction status: 1\r\n    \tat weblogic.application.internal.ExtensibleModuleWrapper.start(ExtensibleModuleWrapper.java:140)\r\n    \tat weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:124)\r\n    \tat weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:216)\r\n    \tat weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:211)\r\n    \tat weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:42)\r\n    \tat weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:73)\r\n    \tat weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:24)\r\n    \tat weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:729)\r\n    \tat weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:42)\r\n    \tat weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:258)\r\n    \tat weblogic.application.internal.EarDeployment.activate(EarDeployment.java:61)\r\n    \tat weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:165)\r\n    \tat weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:80)\r\n    \tat weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:587)\r\n    \tat weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:150)\r\n    \tat weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:116)\r\n    \tat weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:339)\r\n    \tat weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:846)\r\n    \tat weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1275)\r\n    \tat weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:442)\r\n    \tat weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:176)\r\n    \tat weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:195)\r\n    \tat weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:13)\r\n    \tat weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:68)\r\n    \tat weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:548)\r\n    \tat weblogic.work.ExecuteThread.execute(ExecuteThread.java:311)\r\n    \tat weblogic.work.ExecuteThread.run(ExecuteThread.java:263)\r\n    Caused By: weblogic.ejb.container.InternalException: Transaction marked rollback or not expected transaction status: 1\r\n    \tat weblogic.ejb.container.manager.SingletonSessionManager.handleLifecycleCallbackTx(SingletonSessionManager.java:422)\r\n    \tat weblogic.ejb.container.manager.SingletonSessionManager.constructAndInitBean(SingletonSessionManager.java:339)\r\n    \tat weblogic.ejb.container.manager.SingletonSessionManager.access$300(SingletonSessionManager.java:62)\r\n    \tat weblogic.ejb.container.manager.SingletonSessionManager$SingletonLifecycleManager.doActualInit(SingletonSessionManager.java:753)\r\n    \tat weblogic.ejb.container.manager.SingletonSessionManager$SingletonLifecycleManager.initInternal(SingletonSessionManager.java:701)\r\n    \tat weblogic.ejb.container.manager.SingletonSessionManager$SingletonLifecycleManager.init(SingletonSessionManager.java:588)\r\n    \tat weblogic.ejb.container.manager.SingletonSessionManager.init(SingletonSessionManager.java:255)\r\n    \tat weblogic.ejb.container.manager.SingletonSessionManager.perhapsInit(SingletonSessionManager.java:251)\r\n    \tat weblogic.ejb.container.deployer.EJBDeployer.start(EJBDeployer.java:968)\r\n    \tat weblogic.ejb.container.deployer.EJBModule.start(EJBModule.java:597)\r\n    \tat weblogic.application.internal.ExtensibleModuleWrapper$StartStateChange.next(ExtensibleModuleWrapper.java:360)\r\n    \tat weblogic.application.internal.ExtensibleModuleWrapper$StartStateChange.next(ExtensibleModuleWrapper.java:356)\r\n    \tat weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:42)\r\n    \tat weblogic.application.internal.ExtensibleModuleWrapper.start(ExtensibleModuleWrapper.java:138)\r\n    \tat weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:124)\r\n    \tat weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:216)\r\n    \tat weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:211)\r\n    \tat weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:42)\r\n    \tat weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:73)\r\n    \tat weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:24)\r\n    \tat weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:729)\r\n    \tat weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:42)\r\n    \tat weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:258)\r\n    \tat weblogic.application.internal.EarDeployment.activate(EarDeployment.java:61)\r\n    \tat weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:165)\r\n    \tat weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:80)\r\n    \tat weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:587)\r\n    \tat weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:150)\r\n    \tat weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:116)\r\n    \tat weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:339)\r\n    \tat weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:846)\r\n    \tat weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1275)\r\n    \tat weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:442)\r\n    \tat weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:176)\r\n    \tat weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:195)\r\n    \tat weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:13)\r\n    \tat weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:68)\r\n    \tat weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:548)\r\n    \tat weblogic.work.ExecuteThread.execute(ExecuteThread.java:311)\r\n    \tat weblogic.work.ExecuteThread.run(ExecuteThread.java:263)\r\n    &gt; \r\n\r\nI have a `@Singleton` in my application, but it doesn&#39;t seem that the problem is there since it&#39;s not raised from there.\r\n\r\nI looked for in the internet for the same problem, but all the given solutions were not enough for me.\r\n\r\nAny help? \r\n\r\nThank you.\r\n\r\n**EDIT:**\r\n\r\nBy restarting my local machine (on which the weblogic server was installed), the deployment produced more detailed error info, as it was something like this\r\n\r\n    javax.ejb.NoSuchEJBException: Singleton MySingleton(Application:MYEAR-3.0.1_C1, EJBComponent: MYEJB.jar) failed to initialize.\r\n    Caused by: javax.ejb.EJBTransactionRolledbackException: EJB Exception: \r\n    Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.2.v20140319-9ad6abd): org.eclipse.persistence.exceptions.EntityManagerSetupException\r\n    Exception Description: Deployment of PersistenceUnit [MyPU] failed. Close all factories for this PersistenceUnit.\r\n    Caused by: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.2.v20140319-9ad6abd): org.eclipse.persistence.exceptions.EntityManagerSetupException\r\n    Exception Description: Deployment of PersistenceUnit [MyPU] failed. Close all factories for this PersistenceUnit.\r\n    Caused by: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.2.v20140319-9ad6abd): org.eclipse.persistence.exceptions.JPQLException\r\n    Exception Description: Syntax error parsing [select o from Transaction o where o.internalId = :internalId and (o.validUntil is nullor CURRENT_TIMESTAMP between o.validFrom and o.validUntil)]. \r\n    [30, 139] The expression is not a valid conditional expression.\r\n    [139, 140] The query contains a malformed ending.\r\n\r\nIt seems that my issue was an error in a `@NamedQuery`, so i solved it, but i&#39;ll leave this question open, as this doesn&#39;t answer it: How can someone tell what an `weblogic.ejb.container.InternalException` is?","title":"weblogic deployment InternalException : Transaction marked rollback or not expected transaction","body":"<p>I have an EAR application, and when i try to deploy it to my weblogic server, i get the following error:</p>\n\n<pre><code>&lt;[STANDBY] ExecuteThread: '6' for queue: 'weblogic.kernel.Default (self-tuning)'&gt; &lt;&lt;WLS Kernel&gt;&gt; &lt;&gt; &lt;&gt; &lt;1439994186702&gt; &lt;BEA-149078&gt; &lt;Stack trace for message 149004\nweblogic.application.ModuleException: weblogic.ejb.container.InternalException: Transaction marked rollback or not expected transaction status: 1\n    at weblogic.application.internal.ExtensibleModuleWrapper.start(ExtensibleModuleWrapper.java:140)\n    at weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:124)\n    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:216)\n    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:211)\n    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:42)\n    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:73)\n    at weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:24)\n    at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:729)\n    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:42)\n    at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:258)\n    at weblogic.application.internal.EarDeployment.activate(EarDeployment.java:61)\n    at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:165)\n    at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:80)\n    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:587)\n    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:150)\n    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:116)\n    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:339)\n    at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:846)\n    at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1275)\n    at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:442)\n    at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:176)\n    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:195)\n    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:13)\n    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:68)\n    at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:548)\n    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:311)\n    at weblogic.work.ExecuteThread.run(ExecuteThread.java:263)\nCaused By: weblogic.ejb.container.InternalException: Transaction marked rollback or not expected transaction status: 1\n    at weblogic.ejb.container.manager.SingletonSessionManager.handleLifecycleCallbackTx(SingletonSessionManager.java:422)\n    at weblogic.ejb.container.manager.SingletonSessionManager.constructAndInitBean(SingletonSessionManager.java:339)\n    at weblogic.ejb.container.manager.SingletonSessionManager.access$300(SingletonSessionManager.java:62)\n    at weblogic.ejb.container.manager.SingletonSessionManager$SingletonLifecycleManager.doActualInit(SingletonSessionManager.java:753)\n    at weblogic.ejb.container.manager.SingletonSessionManager$SingletonLifecycleManager.initInternal(SingletonSessionManager.java:701)\n    at weblogic.ejb.container.manager.SingletonSessionManager$SingletonLifecycleManager.init(SingletonSessionManager.java:588)\n    at weblogic.ejb.container.manager.SingletonSessionManager.init(SingletonSessionManager.java:255)\n    at weblogic.ejb.container.manager.SingletonSessionManager.perhapsInit(SingletonSessionManager.java:251)\n    at weblogic.ejb.container.deployer.EJBDeployer.start(EJBDeployer.java:968)\n    at weblogic.ejb.container.deployer.EJBModule.start(EJBModule.java:597)\n    at weblogic.application.internal.ExtensibleModuleWrapper$StartStateChange.next(ExtensibleModuleWrapper.java:360)\n    at weblogic.application.internal.ExtensibleModuleWrapper$StartStateChange.next(ExtensibleModuleWrapper.java:356)\n    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:42)\n    at weblogic.application.internal.ExtensibleModuleWrapper.start(ExtensibleModuleWrapper.java:138)\n    at weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:124)\n    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:216)\n    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:211)\n    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:42)\n    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:73)\n    at weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:24)\n    at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:729)\n    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:42)\n    at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:258)\n    at weblogic.application.internal.EarDeployment.activate(EarDeployment.java:61)\n    at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:165)\n    at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:80)\n    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:587)\n    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:150)\n    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:116)\n    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:339)\n    at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:846)\n    at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1275)\n    at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:442)\n    at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:176)\n    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:195)\n    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:13)\n    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:68)\n    at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:548)\n    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:311)\n    at weblogic.work.ExecuteThread.run(ExecuteThread.java:263)\n&gt; \n</code></pre>\n\n<p>I have a <code>@Singleton</code> in my application, but it doesn't seem that the problem is there since it's not raised from there.</p>\n\n<p>I looked for in the internet for the same problem, but all the given solutions were not enough for me.</p>\n\n<p>Any help? </p>\n\n<p>Thank you.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>By restarting my local machine (on which the weblogic server was installed), the deployment produced more detailed error info, as it was something like this</p>\n\n<pre><code>javax.ejb.NoSuchEJBException: Singleton MySingleton(Application:MYEAR-3.0.1_C1, EJBComponent: MYEJB.jar) failed to initialize.\nCaused by: javax.ejb.EJBTransactionRolledbackException: EJB Exception: \nCaused by: javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.2.v20140319-9ad6abd): org.eclipse.persistence.exceptions.EntityManagerSetupException\nException Description: Deployment of PersistenceUnit [MyPU] failed. Close all factories for this PersistenceUnit.\nCaused by: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.2.v20140319-9ad6abd): org.eclipse.persistence.exceptions.EntityManagerSetupException\nException Description: Deployment of PersistenceUnit [MyPU] failed. Close all factories for this PersistenceUnit.\nCaused by: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.2.v20140319-9ad6abd): org.eclipse.persistence.exceptions.JPQLException\nException Description: Syntax error parsing [select o from Transaction o where o.internalId = :internalId and (o.validUntil is nullor CURRENT_TIMESTAMP between o.validFrom and o.validUntil)]. \n[30, 139] The expression is not a valid conditional expression.\n[139, 140] The query contains a malformed ending.\n</code></pre>\n\n<p>It seems that my issue was an error in a <code>@NamedQuery</code>, so i solved it, but i'll leave this question open, as this doesn't answer it: How can someone tell what an <code>weblogic.ejb.container.InternalException</code> is?</p>\n"},{"tags":["java","html","mysql","spring-boot","thymeleaf"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1685559411,"post_id":76372229,"comment_id":134678858,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":28517162,"reputation":1,"user_id":21826367,"display_name":"Yordan Chulev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685526808,"creation_date":1685526808,"question_id":76372229,"body_markdown":"I&#39;m currently working on a project where I need to implement a functionality that allows users to dynamically adjust the fields in an INPUT form. The configuration for these fields is stored in a MySQL database table called &quot;additionalFields.&quot; This table has columns for &quot;name,&quot; &quot;type,&quot; and &quot;defaultValue.&quot;\r\n\r\nFor this project, I have chosen to use the Spring Boot framework. My approach involved creating a class that holds a list of objects. I intended to create an object for each record in the MySQL table and add it to the list. However, I encountered an issue when trying to access the name associated with each object, which prevented the desired functionality. It&#39;s important to note that, for now, my goal is only to visualize the HTML form, and I&#39;m not concerned with storing the records in the database.\r\n\r\nTo address this issue, I came up with an idea to create a custom class called &quot;AdditionalField.&quot; This class would have two fields: &quot;name&quot; (for the field name) and &quot;value&quot; (for the field&#39;s type and value). In my main class, I would have a collection of type &quot;AdditionalField.&quot; During the rendering process, I could access the fields by calling &quot;hiring.getFields()&quot; and retrieve the associated name and type using dot notation. This approach eliminates the problem where I cannot access the name of each object.\r\n\r\nI would greatly appreciate any tips, guidance, or relevant links on how to implement this functionality effectively using Spring Boot and MySQL.\r\n\r\nThank you in advance for your assistance!\r\n\r\nI intended to create an object for each record in the MySQL table and add it to the list. However, I encountered an issue when trying to access the name associated with each object, which prevented the desired functionality.","title":"Implementing dynamic field adjustment in an INPUT form using Spring Boot and MySQL","body":"<p>I'm currently working on a project where I need to implement a functionality that allows users to dynamically adjust the fields in an INPUT form. The configuration for these fields is stored in a MySQL database table called &quot;additionalFields.&quot; This table has columns for &quot;name,&quot; &quot;type,&quot; and &quot;defaultValue.&quot;</p>\n<p>For this project, I have chosen to use the Spring Boot framework. My approach involved creating a class that holds a list of objects. I intended to create an object for each record in the MySQL table and add it to the list. However, I encountered an issue when trying to access the name associated with each object, which prevented the desired functionality. It's important to note that, for now, my goal is only to visualize the HTML form, and I'm not concerned with storing the records in the database.</p>\n<p>To address this issue, I came up with an idea to create a custom class called &quot;AdditionalField.&quot; This class would have two fields: &quot;name&quot; (for the field name) and &quot;value&quot; (for the field's type and value). In my main class, I would have a collection of type &quot;AdditionalField.&quot; During the rendering process, I could access the fields by calling &quot;hiring.getFields()&quot; and retrieve the associated name and type using dot notation. This approach eliminates the problem where I cannot access the name of each object.</p>\n<p>I would greatly appreciate any tips, guidance, or relevant links on how to implement this functionality effectively using Spring Boot and MySQL.</p>\n<p>Thank you in advance for your assistance!</p>\n<p>I intended to create an object for each record in the MySQL table and add it to the list. However, I encountered an issue when trying to access the name associated with each object, which prevented the desired functionality.</p>\n"},{"tags":["java","jasper-reports","subreport"],"answers":[{"tags":[],"owner":{"account_id":11889649,"reputation":1404,"user_id":8700934,"display_name":"Lakshan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1553073903,"creation_date":1553069840,"answer_id":55256235,"question_id":55239791,"body_markdown":"firstly defined the sub report&#39;s data sources are as fields in the main report (main.jrxml)\r\n\r\n    &lt;field name=&quot;claimHistoryDataSource&quot; class=&quot;java.util.ArrayList&quot;&gt;\r\n        &lt;fieldDescription&gt;&lt;![CDATA[claimHistoryList}]]&gt;&lt;/fieldDescription&gt;\r\n    &lt;/field&gt;\r\n\r\n    &lt;field name=&quot;claimDetailDataSource&quot; class=&quot;java.util.ArrayList&quot;&gt;\r\n        &lt;fieldDescription&gt;&lt;![CDATA[claimDetailList}]]&gt;&lt;/fieldDescription&gt;\r\n    &lt;/field&gt;\r\n\r\n`claimHistoryList` and `claimDetailList` are ArrayLists defined in the java class which used as a data source of the main report.\r\n\r\nthen pass it to the sub report with a `dataSourceExpression`\r\n\r\n    &lt;subreport&gt;\r\n        &lt;reportElement positionType=&quot;Float&quot; x=&quot;18&quot; y=&quot;1&quot; width=&quot;522&quot; height=&quot;65&quot; uuid=&quot;f3063ed3-775f-47df-8306-a939aecc9d89&quot;/&gt;\r\n        &lt;dataSourceExpression&gt;&lt;![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{claimHistoryDataSource})]]&gt;&lt;/dataSourceExpression&gt;\r\n        &lt;subreportExpression&gt;&lt;![CDATA[&quot;ClaimHistory.jasper&quot;]]&gt;&lt;/subreportExpression&gt;\r\n    &lt;/subreport&gt;\r\n\r\n    &lt;subreport&gt;\r\n        &lt;reportElement positionType=&quot;Float&quot; x=&quot;18&quot; y=&quot;1&quot; width=&quot;522&quot; height=&quot;65&quot; uuid=&quot;f3063ed3-775f-47df-8306-a939aecc9d89&quot;/&gt;\r\n        &lt;dataSourceExpression&gt;&lt;![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{claimDetailDataSource})]]&gt;&lt;/dataSourceExpression&gt;\r\n        &lt;subreportExpression&gt;&lt;![CDATA[&quot;ClaimDetail.jasper&quot;]]&gt;&lt;/subreportExpression&gt;\r\n    &lt;/subreport&gt;","title":"Jasper Report with multiple Subreport","body":"<p>firstly defined the sub report's data sources are as fields in the main report (main.jrxml)</p>\n\n<pre><code>&lt;field name=\"claimHistoryDataSource\" class=\"java.util.ArrayList\"&gt;\n    &lt;fieldDescription&gt;&lt;![CDATA[claimHistoryList}]]&gt;&lt;/fieldDescription&gt;\n&lt;/field&gt;\n\n&lt;field name=\"claimDetailDataSource\" class=\"java.util.ArrayList\"&gt;\n    &lt;fieldDescription&gt;&lt;![CDATA[claimDetailList}]]&gt;&lt;/fieldDescription&gt;\n&lt;/field&gt;\n</code></pre>\n\n<p><code>claimHistoryList</code> and <code>claimDetailList</code> are ArrayLists defined in the java class which used as a data source of the main report.</p>\n\n<p>then pass it to the sub report with a <code>dataSourceExpression</code></p>\n\n<pre><code>&lt;subreport&gt;\n    &lt;reportElement positionType=\"Float\" x=\"18\" y=\"1\" width=\"522\" height=\"65\" uuid=\"f3063ed3-775f-47df-8306-a939aecc9d89\"/&gt;\n    &lt;dataSourceExpression&gt;&lt;![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{claimHistoryDataSource})]]&gt;&lt;/dataSourceExpression&gt;\n    &lt;subreportExpression&gt;&lt;![CDATA[\"ClaimHistory.jasper\"]]&gt;&lt;/subreportExpression&gt;\n&lt;/subreport&gt;\n\n&lt;subreport&gt;\n    &lt;reportElement positionType=\"Float\" x=\"18\" y=\"1\" width=\"522\" height=\"65\" uuid=\"f3063ed3-775f-47df-8306-a939aecc9d89\"/&gt;\n    &lt;dataSourceExpression&gt;&lt;![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{claimDetailDataSource})]]&gt;&lt;/dataSourceExpression&gt;\n    &lt;subreportExpression&gt;&lt;![CDATA[\"ClaimDetail.jasper\"]]&gt;&lt;/subreportExpression&gt;\n&lt;/subreport&gt;\n</code></pre>\n"}],"owner":{"account_id":9985518,"reputation":83,"user_id":7386867,"accept_rate":14,"display_name":"Ari Wibowo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8530,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":55256235,"answer_count":1,"score":0,"last_activity_date":1685526721,"creation_date":1552994362,"question_id":55239791,"body_markdown":"I&#39;m new with Jasper Reports, and I&#39;m creating a Java program that will export reports to a `.pdf` file.\r\nThis report has multiple subreports and was created in JasperSoft studio.\r\n\r\nThis is one of the subreport-parts in the main report:\r\n\r\n```xml\r\n&lt;subreport&gt;\r\n    &lt;reportElement positionType=&quot;Float&quot; x=&quot;18&quot; y=&quot;1&quot; width=&quot;522&quot; height=&quot;65&quot; uuid=&quot;f3063ed3-775f-47df-8306-a939aecc9d89&quot;/&gt;\r\n    &lt;connectionExpression&gt;&lt;![CDATA[$P{REPORT_CONNECTION}]]&gt;&lt;/connectionExpression&gt;\r\n    &lt;subreportExpression&gt;&lt;![CDATA[&quot;ClaimHistory.jasper&quot;]]&gt;&lt;/subreportExpression&gt;\r\n&lt;/subreport&gt;\r\n```\r\n\r\nThis is another subreport:\r\n\r\n```xml\r\n&lt;subreport&gt;\r\n    &lt;reportElement positionType=&quot;Float&quot; x=&quot;18&quot; y=&quot;2&quot; width=&quot;522&quot; height=&quot;65&quot; uuid=&quot;a70d75e0-b9d0-4f52-bb84-090993c2e90b&quot;/&gt;\r\n    &lt;connectionExpression&gt;&lt;![CDATA[$P{REPORT_CONNECTION}]]&gt;&lt;/connectionExpression&gt;\r\n    &lt;subreportExpression&gt;&lt;![CDATA[&quot;ClaimDetail.jasper&quot;]]&gt;&lt;/subreportExpression&gt;\r\n&lt;/subreport&gt;\r\n```\r\n\r\nEach subreport uses `JRBeanCollectionDataSource(list)` to get its data and below is the Java code doing all the work:\r\n\r\n```java\r\nString jasperFile = &quot;E:/jasper/jasperFile.jrxml&quot;;\r\nFileInputStream inputStream = new FileInputStream(jasperFile);\r\nJasperReport jasperReport = JasperCompileManager.compileReport(inputStream);\r\nList&lt;JasperPrint&gt; jasperPrintList = new ArrayList&lt;JasperPrint&gt;();\r\nJasperPrint print = JasperFillManager.fillReport(jasperReport, params, new JREmptyDataSource());\r\njasperPrintList.add(print);\r\nJRPdfExporter exporter = new JRPdfExporter();\r\nexporter.setExporterInput(SimpleExporterInput.getInstance(jasperPrintList)); //Set as export input my list with JasperPrint s\r\nexporter.setExporterOutput(new SimpleOutputStreamExporterOutput(&quot;E:/output.pdf&quot;)); //or any other out streaam\r\nexporter.exportReport();\r\n```\r\n\r\nMy current skills don&#39;t allow me to properly inject any data into the subreports using `JRBeanCollectionDataSource(...)`.  \r\nHow can I achieve injecting data into the subreports?","title":"Jasper Report with multiple Subreport","body":"<p>I'm new with Jasper Reports, and I'm creating a Java program that will export reports to a <code>.pdf</code> file.\nThis report has multiple subreports and was created in JasperSoft studio.</p>\n<p>This is one of the subreport-parts in the main report:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;subreport&gt;\n    &lt;reportElement positionType=&quot;Float&quot; x=&quot;18&quot; y=&quot;1&quot; width=&quot;522&quot; height=&quot;65&quot; uuid=&quot;f3063ed3-775f-47df-8306-a939aecc9d89&quot;/&gt;\n    &lt;connectionExpression&gt;&lt;![CDATA[$P{REPORT_CONNECTION}]]&gt;&lt;/connectionExpression&gt;\n    &lt;subreportExpression&gt;&lt;![CDATA[&quot;ClaimHistory.jasper&quot;]]&gt;&lt;/subreportExpression&gt;\n&lt;/subreport&gt;\n</code></pre>\n<p>This is another subreport:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;subreport&gt;\n    &lt;reportElement positionType=&quot;Float&quot; x=&quot;18&quot; y=&quot;2&quot; width=&quot;522&quot; height=&quot;65&quot; uuid=&quot;a70d75e0-b9d0-4f52-bb84-090993c2e90b&quot;/&gt;\n    &lt;connectionExpression&gt;&lt;![CDATA[$P{REPORT_CONNECTION}]]&gt;&lt;/connectionExpression&gt;\n    &lt;subreportExpression&gt;&lt;![CDATA[&quot;ClaimDetail.jasper&quot;]]&gt;&lt;/subreportExpression&gt;\n&lt;/subreport&gt;\n</code></pre>\n<p>Each subreport uses <code>JRBeanCollectionDataSource(list)</code> to get its data and below is the Java code doing all the work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String jasperFile = &quot;E:/jasper/jasperFile.jrxml&quot;;\nFileInputStream inputStream = new FileInputStream(jasperFile);\nJasperReport jasperReport = JasperCompileManager.compileReport(inputStream);\nList&lt;JasperPrint&gt; jasperPrintList = new ArrayList&lt;JasperPrint&gt;();\nJasperPrint print = JasperFillManager.fillReport(jasperReport, params, new JREmptyDataSource());\njasperPrintList.add(print);\nJRPdfExporter exporter = new JRPdfExporter();\nexporter.setExporterInput(SimpleExporterInput.getInstance(jasperPrintList)); //Set as export input my list with JasperPrint s\nexporter.setExporterOutput(new SimpleOutputStreamExporterOutput(&quot;E:/output.pdf&quot;)); //or any other out streaam\nexporter.exportReport();\n</code></pre>\n<p>My current skills don't allow me to properly inject any data into the subreports using <code>JRBeanCollectionDataSource(...)</code>.<br />\nHow can I achieve injecting data into the subreports?</p>\n"},{"tags":["java","spring","clone"],"answers":[{"comments":[{"owner":{"account_id":108390,"reputation":5268,"user_id":287732,"accept_rate":68,"display_name":"Biscuit128"},"score":3,"creation_date":1363855800,"post_id":15542791,"comment_id":22022018,"body_markdown":"Hi. I am not questioning your judgement just playing devils advocate. Isnt the purpose of clone to create an object of the same type with the same data? If you use create an empty object (a blank canvas) and copy the properties - are we essentially not doing the same thing?","body":"Hi. I am not questioning your judgement just playing devils advocate. Isnt the purpose of clone to create an object of the same type with the same data? If you use create an empty object (a blank canvas) and copy the properties - are we essentially not doing the same thing?"}],"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1363855418,"creation_date":1363855418,"answer_id":15542791,"question_id":15542504,"body_markdown":"clone creates a shallow copy of the object, the clone object is always of the same class as the original one. All fields, private or not are copied.\r\n\r\nBeanUtils.copyProperties API *Copy property values from the origin bean to the destination bean for all cases where the property names are the same.*\r\n\r\nAs to me, these two concepts have little in common.","title":"Should we use clone or BeanUtils.copyProperties and why","body":"<p>clone creates a shallow copy of the object, the clone object is always of the same class as the original one. All fields, private or not are copied.</p>\n\n<p>BeanUtils.copyProperties API <em>Copy property values from the origin bean to the destination bean for all cases where the property names are the same.</em></p>\n\n<p>As to me, these two concepts have little in common.</p>\n"},{"comments":[{"owner":{"account_id":2426614,"reputation":2214,"user_id":2118405,"accept_rate":53,"display_name":"Henry Leu"},"score":0,"creation_date":1364131167,"post_id":15591144,"comment_id":22119918,"body_markdown":"Nice answer as `Josh Bloch&#39;s Effective Java` notes. Can I summarise that &quot;both can be used depending on senarios&quot;? but both have limits.","body":"Nice answer as <code>Josh Bloch&#39;s Effective Java</code> notes. Can I summarise that &quot;both can be used depending on senarios&quot;? but both have limits."},{"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"score":0,"creation_date":1567371857,"post_id":15591144,"comment_id":101936342,"body_markdown":"I think `copyProperties()` is only calling the setter of the target, it is not &quot;deep&quot; because when it comes to a nested object, the inner field is still a reference, not a copy. Check my answer to see the source code.","body":"I think <code>copyProperties()</code> is only calling the setter of the target, it is not &quot;deep&quot; because when it comes to a nested object, the inner field is still a reference, not a copy. Check my answer to see the source code."},{"owner":{"account_id":1021725,"reputation":10018,"user_id":1031887,"accept_rate":77,"display_name":"phatfingers"},"score":0,"creation_date":1568040359,"post_id":15591144,"comment_id":102138902,"body_markdown":"@WesternGun You think correctly.  Anyone who assumes `copyProperties` makes a &quot;deep&quot; copy in a single call would be mistaken.","body":"@WesternGun You think correctly.  Anyone who assumes <code>copyProperties</code> makes a &quot;deep&quot; copy in a single call would be mistaken."}],"tags":[],"owner":{"account_id":1021725,"reputation":10018,"user_id":1031887,"accept_rate":77,"display_name":"phatfingers"},"comment_count":3,"down_vote_count":0,"up_vote_count":35,"is_accepted":true,"score":35,"last_activity_date":1515683826,"creation_date":1364066984,"answer_id":15591144,"question_id":15542504,"body_markdown":"Josh Bloch provides some fairly good arguments (including the one you provided) asserting that `Cloneable` is fundamentally flawed, favoring a copy constructor instead.  See [here](http://www.artima.com/intv/bloch13.html).\r\n\r\nI haven&#39;t yet encountered a practical use case for copying an immutable object.  You&#39;re copying objects for a specific reason, presumably to isolate some set of mutable objects into a single transaction for processing, guaranteeing nothing can alter them until that unit of processing is complete.  If they&#39;re already immutable then a reference is as good as a copy.\r\n\r\n`BeanUtils.copyProperties` is often a less intrusive way of copying without having to alter your classes to be supported, and it offers some unique flexibility in compositing objects.\r\n\r\nThat said, `copyProperties` is not always one-size-fits-all.  You may at some point need to support objects containing types that have specialized constructors, but are still mutable.  Your objects can support internal methods or constructors to work around those exceptions, or you can register specific types into some external tool for copying, but it can&#39;t reach some places that even `clone()` can.  It&#39;s good, but still has limits.","title":"Should we use clone or BeanUtils.copyProperties and why","body":"<p>Josh Bloch provides some fairly good arguments (including the one you provided) asserting that <code>Cloneable</code> is fundamentally flawed, favoring a copy constructor instead.  See <a href=\"http://www.artima.com/intv/bloch13.html\" rel=\"noreferrer\">here</a>.</p>\n\n<p>I haven't yet encountered a practical use case for copying an immutable object.  You're copying objects for a specific reason, presumably to isolate some set of mutable objects into a single transaction for processing, guaranteeing nothing can alter them until that unit of processing is complete.  If they're already immutable then a reference is as good as a copy.</p>\n\n<p><code>BeanUtils.copyProperties</code> is often a less intrusive way of copying without having to alter your classes to be supported, and it offers some unique flexibility in compositing objects.</p>\n\n<p>That said, <code>copyProperties</code> is not always one-size-fits-all.  You may at some point need to support objects containing types that have specialized constructors, but are still mutable.  Your objects can support internal methods or constructors to work around those exceptions, or you can register specific types into some external tool for copying, but it can't reach some places that even <code>clone()</code> can.  It's good, but still has limits.</p>\n"},{"tags":[],"owner":{"account_id":2248460,"reputation":12996,"user_id":1981279,"display_name":"Vishal K"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1364116304,"creation_date":1364115932,"answer_id":15596731,"question_id":15542504,"body_markdown":"From your question I guess that you need ***deep copy*** of the object . If this is the case don&#39;t use [`clone`][1] method  as it is already specified in `oracle docs` that it provides ***shallow copy*** of the associated object. And I don&#39;t have enough idea about `BeanUtils.copyProperties` API.&lt;br&gt;Given below is the short demo of `deep copy`. Here I am deep copying a `primitive array`. You can try this code with any type of object.\r\n\r\n    import java.io.*;\r\n    class ArrayDeepCopy \r\n    {\r\n    \tByteArrayOutputStream baos;\r\n    \tByteArrayInputStream bins;\r\n    \tpublic void saveState(Object obj)throws Exception //saving the stream of bytes of object to `ObjectOutputStream`.\r\n    \t{\r\n    \t\tbaos = new ByteArrayOutputStream();\r\n    \t\tObjectOutputStream oos = new ObjectOutputStream(baos);\r\n    \t\toos.writeObject(obj);\r\n    \t\toos.close();\r\n    \t}\r\n    \tpublic int[][] readState()throws Exception //reading the state back to object using `ObjectInputStream`\r\n    \t{\r\n    \t\tbins = new ByteArrayInputStream(baos.toByteArray());\r\n    \t\tObjectInputStream oins = new ObjectInputStream(bins);\r\n    \t\tObject obj = oins.readObject();\r\n    \t\toins.close();\r\n    \t\treturn (int[][])obj;\r\n    \t}\r\n    \tpublic static void main(String[] args) throws Exception\r\n    \t{\r\n    \t\tint arr[][]= {\r\n    \t\t\t\t\t\t{1,2,3},\r\n    \t\t\t\t\t\t{4,5,7}\r\n    \t\t\t\t\t};\r\n    \t\tArrayDeepCopy ars = new ArrayDeepCopy();\r\n    \t\tSystem.out.println(&quot;Saving state...&quot;);\r\n    \t\tars.saveState(arr);\r\n    \t\tSystem.out.println(&quot;State saved..&quot;);\r\n    \t\tSystem.out.println(&quot;Retrieving state..&quot;);\r\n    \t\tint j[][] = ars.readState();\r\n    \t\tSystem.out.println(&quot;State retrieved..And the retrieved array is:&quot;);\r\n    \t\tfor (int i =0 ; i &lt; j.length ; i++ )\r\n    \t\t{\r\n    \t\t\tfor (int k = 0 ; k &lt; j[i].length ; k++)\r\n    \t\t\t{\r\n    \t\t\t\tSystem.out.print(j[i][k]+&quot;\\t&quot;);\r\n    \t\t\t}\r\n    \t\t\tSystem.out.print(&quot;\\n&quot;);\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#clone%28%29","title":"Should we use clone or BeanUtils.copyProperties and why","body":"<p>From your question I guess that you need <strong><em>deep copy</em></strong> of the object . If this is the case don't use <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#clone%28%29\" rel=\"nofollow\"><code>clone</code></a> method  as it is already specified in <code>oracle docs</code> that it provides <strong><em>shallow copy</em></strong> of the associated object. And I don't have enough idea about <code>BeanUtils.copyProperties</code> API.<br>Given below is the short demo of <code>deep copy</code>. Here I am deep copying a <code>primitive array</code>. You can try this code with any type of object.</p>\n\n<pre><code>import java.io.*;\nclass ArrayDeepCopy \n{\n    ByteArrayOutputStream baos;\n    ByteArrayInputStream bins;\n    public void saveState(Object obj)throws Exception //saving the stream of bytes of object to `ObjectOutputStream`.\n    {\n        baos = new ByteArrayOutputStream();\n        ObjectOutputStream oos = new ObjectOutputStream(baos);\n        oos.writeObject(obj);\n        oos.close();\n    }\n    public int[][] readState()throws Exception //reading the state back to object using `ObjectInputStream`\n    {\n        bins = new ByteArrayInputStream(baos.toByteArray());\n        ObjectInputStream oins = new ObjectInputStream(bins);\n        Object obj = oins.readObject();\n        oins.close();\n        return (int[][])obj;\n    }\n    public static void main(String[] args) throws Exception\n    {\n        int arr[][]= {\n                        {1,2,3},\n                        {4,5,7}\n                    };\n        ArrayDeepCopy ars = new ArrayDeepCopy();\n        System.out.println(\"Saving state...\");\n        ars.saveState(arr);\n        System.out.println(\"State saved..\");\n        System.out.println(\"Retrieving state..\");\n        int j[][] = ars.readState();\n        System.out.println(\"State retrieved..And the retrieved array is:\");\n        for (int i =0 ; i &lt; j.length ; i++ )\n        {\n            for (int k = 0 ; k &lt; j[i].length ; k++)\n            {\n                System.out.print(j[i][k]+\"\\t\");\n            }\n            System.out.print(\"\\n\");\n        }\n\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1579800,"reputation":1519,"user_id":1465378,"display_name":"Mohammed Irfan Tirupattur"},"score":1,"creation_date":1455693107,"post_id":15597050,"comment_id":58597226,"body_markdown":"Now after spring 4.x It does compare the primitive type of soruce and destination beans . So beware while using BeanUtils copy properties.Keep in mind that you do have a identical primitive types which can be assigned from source to destination","body":"Now after spring 4.x It does compare the primitive type of soruce and destination beans . So beware while using BeanUtils copy properties.Keep in mind that you do have a identical primitive types which can be assigned from source to destination"}],"tags":[],"owner":{"account_id":237656,"reputation":3080,"user_id":506005,"accept_rate":62,"display_name":"Houcem Berrayana"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1364118670,"creation_date":1364118670,"answer_id":15597050,"question_id":15542504,"body_markdown":"BeanUtils is more flexible than standard clone that simply copies field values from an object to another. The clone method copies the fields from beans of the same class, but BeanUtils can do that for 2 instances of different classes having the same attribute names.\r\n\r\nFor example let&#39;s suppose that you have a Bean A that have a field String date and a bean B that have the same field java.util.Date date. with BeanUtils you can copy the string value and convert it automatically to date using DateFormat.\r\n\r\nI&#39;ve used that to convert a SOAP object into Hibernate objects which do not have the same data types.","title":"Should we use clone or BeanUtils.copyProperties and why","body":"<p>BeanUtils is more flexible than standard clone that simply copies field values from an object to another. The clone method copies the fields from beans of the same class, but BeanUtils can do that for 2 instances of different classes having the same attribute names.</p>\n\n<p>For example let's suppose that you have a Bean A that have a field String date and a bean B that have the same field java.util.Date date. with BeanUtils you can copy the string value and convert it automatically to date using DateFormat.</p>\n\n<p>I've used that to convert a SOAP object into Hibernate objects which do not have the same data types.</p>\n"},{"tags":[],"owner":{"account_id":1999199,"reputation":8061,"user_id":1790632,"accept_rate":43,"display_name":"Kishor Prakash"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1364461631,"creation_date":1364461631,"answer_id":15677842,"question_id":15542504,"body_markdown":"Cloning is done by you. If the instance which you trying clone contains reference of another instance you have to write cloning code to that one too.\r\nWhat if the instances contains chain of references to other instances?\r\nSo if you do cloning by yourself, there are chances that you might miss a small detail.\r\n\r\nBeanUtils.copyProperties on otherhand take care of everything by itself.\r\nIt reduces your effort.","title":"Should we use clone or BeanUtils.copyProperties and why","body":"<p>Cloning is done by you. If the instance which you trying clone contains reference of another instance you have to write cloning code to that one too.\nWhat if the instances contains chain of references to other instances?\nSo if you do cloning by yourself, there are chances that you might miss a small detail.</p>\n\n<p>BeanUtils.copyProperties on otherhand take care of everything by itself.\nIt reduces your effort.</p>\n"},{"tags":[],"owner":{"account_id":1495455,"reputation":964,"user_id":1401509,"accept_rate":17,"display_name":"Chandru"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1364469674,"creation_date":1364469674,"answer_id":15680471,"question_id":15542504,"body_markdown":"I think you are looking for a deep copy. you can have the below method in a util class and use it for any kind of objct.\r\n\r\n    public static &lt;T extends Serializable&gt; T copy(T input) {\r\n        ByteArrayOutputStream baos = null;\r\n        ObjectOutputStream oos = null;\r\n        ByteArrayInputStream bis = null;\r\n        ObjectInputStream ois = null;\r\n        try {\r\n            baos = new ByteArrayOutputStream();\r\n            oos = new ObjectOutputStream(baos);\r\n            oos.writeObject(input);\r\n            oos.flush();\r\n\r\n            byte[] bytes = baos.toByteArray();\r\n            bis = new ByteArrayInputStream(bytes);\r\n            ois = new ObjectInputStream(bis);\r\n            Object result = ois.readObject();\r\n            return (T) result;\r\n        } catch (IOException e) {\r\n            throw new IllegalArgumentException(&quot;Object can&#39;t be copied&quot;, e);\r\n        } catch (ClassNotFoundException e) {\r\n            throw new IllegalArgumentException(&quot;Unable to reconstruct serialized object due to invalid class definition&quot;, e);\r\n        } finally {\r\n            closeQuietly(oos);\r\n            closeQuietly(baos);\r\n            closeQuietly(bis);\r\n            closeQuietly(ois);\r\n        }\r\n    }","title":"Should we use clone or BeanUtils.copyProperties and why","body":"<p>I think you are looking for a deep copy. you can have the below method in a util class and use it for any kind of objct.</p>\n\n<pre><code>public static &lt;T extends Serializable&gt; T copy(T input) {\n    ByteArrayOutputStream baos = null;\n    ObjectOutputStream oos = null;\n    ByteArrayInputStream bis = null;\n    ObjectInputStream ois = null;\n    try {\n        baos = new ByteArrayOutputStream();\n        oos = new ObjectOutputStream(baos);\n        oos.writeObject(input);\n        oos.flush();\n\n        byte[] bytes = baos.toByteArray();\n        bis = new ByteArrayInputStream(bytes);\n        ois = new ObjectInputStream(bis);\n        Object result = ois.readObject();\n        return (T) result;\n    } catch (IOException e) {\n        throw new IllegalArgumentException(\"Object can't be copied\", e);\n    } catch (ClassNotFoundException e) {\n        throw new IllegalArgumentException(\"Unable to reconstruct serialized object due to invalid class definition\", e);\n    } finally {\n        closeQuietly(oos);\n        closeQuietly(baos);\n        closeQuietly(bis);\n        closeQuietly(ois);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1685526700,"creation_date":1567372872,"answer_id":57749587,"question_id":15542504,"body_markdown":"I have checked the source code and I found that it is only copying the &quot;first level&quot; of **primitive** properties. When it comes to a nested object, the nested properties are still referencing the original object&#39;s fields, so it is not a &quot;deep copy&quot;. \r\n\r\nCheck this snippets from Spring source code from `org.springframework.beans.BeanUtils.java`, version 5.1.3:\r\n\r\n```\r\n/**\r\n\t * Copy the property values of the given source bean into the target bean.\r\n\t * &lt;p&gt;Note: The source and target classes do not have to match or even be derived\r\n\t * from each other, as long as the properties match. Any bean properties that the\r\n\t * source bean exposes but the target bean does not will silently be ignored.\r\n\t * &lt;p&gt;This is just a convenience method. For more complex transfer needs,\r\n\t * consider using a full BeanWrapper.\r\n\t * @param source the source bean\r\n\t * @param target the target bean\r\n\t * @throws BeansException if the copying failed\r\n\t * @see BeanWrapper\r\n\t */\r\n\tpublic static void copyProperties(Object source, Object target) throws BeansException {\r\n\t\tcopyProperties(source, target, null, (String[]) null);\r\n\t}\r\n\r\n...\r\n\r\n\t/**\r\n\t * Copy the property values of the given source bean into the given target bean.\r\n\t * &lt;p&gt;Note: The source and target classes do not have to match or even be derived\r\n\t * from each other, as long as the properties match. Any bean properties that the\r\n\t * source bean exposes but the target bean does not will silently be ignored.\r\n\t * @param source the source bean\r\n\t * @param target the target bean\r\n\t * @param editable the class (or interface) to restrict property setting to\r\n\t * @param ignoreProperties array of property names to ignore\r\n\t * @throws BeansException if the copying failed\r\n\t * @see BeanWrapper\r\n\t */\r\n\tprivate static void copyProperties(Object source, Object target, @Nullable Class&lt;?&gt; editable,\r\n\t\t\t@Nullable String... ignoreProperties) throws BeansException {\r\n\r\n\t\tAssert.notNull(source, &quot;Source must not be null&quot;);\r\n\t\tAssert.notNull(target, &quot;Target must not be null&quot;);\r\n\r\n\t\tClass&lt;?&gt; actualEditable = target.getClass();\r\n\t\tif (editable != null) {\r\n\t\t\tif (!editable.isInstance(target)) {\r\n\t\t\t\tthrow new IllegalArgumentException(&quot;Target class [&quot; + target.getClass().getName() +\r\n\t\t\t\t\t\t&quot;] not assignable to Editable class [&quot; + editable.getName() + &quot;]&quot;);\r\n\t\t\t}\r\n\t\t\tactualEditable = editable;\r\n\t\t}\r\n\t\tPropertyDescriptor[] targetPds = getPropertyDescriptors(actualEditable);\r\n\t\tList&lt;String&gt; ignoreList = (ignoreProperties != null ? Arrays.asList(ignoreProperties) : null);\r\n\r\n\t\tfor (PropertyDescriptor targetPd : targetPds) {\r\n\t\t\tMethod writeMethod = targetPd.getWriteMethod();\r\n\t\t\tif (writeMethod != null &amp;&amp; (ignoreList == null || !ignoreList.contains(targetPd.getName()))) {\r\n\t\t\t\tPropertyDescriptor sourcePd = getPropertyDescriptor(source.getClass(), targetPd.getName());\r\n\t\t\t\tif (sourcePd != null) {\r\n\t\t\t\t\tMethod readMethod = sourcePd.getReadMethod();\r\n\t\t\t\t\tif (readMethod != null &amp;&amp;\r\n\t\t\t\t\t\t\tClassUtils.isAssignable(writeMethod.getParameterTypes()[0], readMethod.getReturnType())) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tif (!Modifier.isPublic(readMethod.getDeclaringClass().getModifiers())) {\r\n\t\t\t\t\t\t\t\treadMethod.setAccessible(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tObject value = readMethod.invoke(source);\r\n\t\t\t\t\t\t\tif (!Modifier.isPublic(writeMethod.getDeclaringClass().getModifiers())) {\r\n\t\t\t\t\t\t\t\twriteMethod.setAccessible(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\twriteMethod.invoke(target, value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcatch (Throwable ex) {\r\n\t\t\t\t\t\t\tthrow new FatalBeanException(\r\n\t\t\t\t\t\t\t\t\t&quot;Could not copy property &#39;&quot; + targetPd.getName() + &quot;&#39; from source to target&quot;, ex);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n```\r\n\r\nJust focus on these lines:\r\n\r\n```\r\nObject value = readMethod.invoke(source);\r\n...\r\nwriteMethod.invoke(target, value);\r\n```\r\n\r\nThis line calls the setter on the target object. Imagine this class:\r\n\r\n```\r\nclass Student {\r\n    private String name;\r\n    private Address address;\r\n}\r\n```\r\nIf we have `student1` and `student2`, the second is just intanciated and not assigned any fields, `student1` has `address1` and name `John`. \r\n\r\nSo, if we call:\r\n\r\n```\r\n    BeanUtils.copyProperties(student1, student2);\r\n```\r\nWe are doing:\r\n```\r\n    student2.setName(student1.getName()); // this is copy because String is immutable\r\n    student2.setAddress(student1.getAddress()); // this is NOT copy, we still are referencing `address1`\r\n```\r\nWhen `address1` changes, it changes `student2` too. \r\n\r\nSo, `BeanUtils.copyProperties()` *only works on primitive types and String fields* of the object; if it is nested, it does not work; or, you have to make sure the immutability of the original object during the whole lifecycle of the target object, which, is not easy and desirable.\r\n\r\n---\r\n\r\nIf you really want to make it a deep copy, you have to implement some way to *recursively* calls this method on fields which are not primitives. At last you will reach a class with only primitive/immutable fields and then you are done. \r\n\r\n","title":"Should we use clone or BeanUtils.copyProperties and why","body":"<p>I have checked the source code and I found that it is only copying the &quot;first level&quot; of <strong>primitive</strong> properties. When it comes to a nested object, the nested properties are still referencing the original object's fields, so it is not a &quot;deep copy&quot;.</p>\n<p>Check this snippets from Spring source code from <code>org.springframework.beans.BeanUtils.java</code>, version 5.1.3:</p>\n<pre><code>/**\n     * Copy the property values of the given source bean into the target bean.\n     * &lt;p&gt;Note: The source and target classes do not have to match or even be derived\n     * from each other, as long as the properties match. Any bean properties that the\n     * source bean exposes but the target bean does not will silently be ignored.\n     * &lt;p&gt;This is just a convenience method. For more complex transfer needs,\n     * consider using a full BeanWrapper.\n     * @param source the source bean\n     * @param target the target bean\n     * @throws BeansException if the copying failed\n     * @see BeanWrapper\n     */\n    public static void copyProperties(Object source, Object target) throws BeansException {\n        copyProperties(source, target, null, (String[]) null);\n    }\n\n...\n\n    /**\n     * Copy the property values of the given source bean into the given target bean.\n     * &lt;p&gt;Note: The source and target classes do not have to match or even be derived\n     * from each other, as long as the properties match. Any bean properties that the\n     * source bean exposes but the target bean does not will silently be ignored.\n     * @param source the source bean\n     * @param target the target bean\n     * @param editable the class (or interface) to restrict property setting to\n     * @param ignoreProperties array of property names to ignore\n     * @throws BeansException if the copying failed\n     * @see BeanWrapper\n     */\n    private static void copyProperties(Object source, Object target, @Nullable Class&lt;?&gt; editable,\n            @Nullable String... ignoreProperties) throws BeansException {\n\n        Assert.notNull(source, &quot;Source must not be null&quot;);\n        Assert.notNull(target, &quot;Target must not be null&quot;);\n\n        Class&lt;?&gt; actualEditable = target.getClass();\n        if (editable != null) {\n            if (!editable.isInstance(target)) {\n                throw new IllegalArgumentException(&quot;Target class [&quot; + target.getClass().getName() +\n                        &quot;] not assignable to Editable class [&quot; + editable.getName() + &quot;]&quot;);\n            }\n            actualEditable = editable;\n        }\n        PropertyDescriptor[] targetPds = getPropertyDescriptors(actualEditable);\n        List&lt;String&gt; ignoreList = (ignoreProperties != null ? Arrays.asList(ignoreProperties) : null);\n\n        for (PropertyDescriptor targetPd : targetPds) {\n            Method writeMethod = targetPd.getWriteMethod();\n            if (writeMethod != null &amp;&amp; (ignoreList == null || !ignoreList.contains(targetPd.getName()))) {\n                PropertyDescriptor sourcePd = getPropertyDescriptor(source.getClass(), targetPd.getName());\n                if (sourcePd != null) {\n                    Method readMethod = sourcePd.getReadMethod();\n                    if (readMethod != null &amp;&amp;\n                            ClassUtils.isAssignable(writeMethod.getParameterTypes()[0], readMethod.getReturnType())) {\n                        try {\n                            if (!Modifier.isPublic(readMethod.getDeclaringClass().getModifiers())) {\n                                readMethod.setAccessible(true);\n                            }\n                            Object value = readMethod.invoke(source);\n                            if (!Modifier.isPublic(writeMethod.getDeclaringClass().getModifiers())) {\n                                writeMethod.setAccessible(true);\n                            }\n                            writeMethod.invoke(target, value);\n                        }\n                        catch (Throwable ex) {\n                            throw new FatalBeanException(\n                                    &quot;Could not copy property '&quot; + targetPd.getName() + &quot;' from source to target&quot;, ex);\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n</code></pre>\n<p>Just focus on these lines:</p>\n<pre><code>Object value = readMethod.invoke(source);\n...\nwriteMethod.invoke(target, value);\n</code></pre>\n<p>This line calls the setter on the target object. Imagine this class:</p>\n<pre><code>class Student {\n    private String name;\n    private Address address;\n}\n</code></pre>\n<p>If we have <code>student1</code> and <code>student2</code>, the second is just intanciated and not assigned any fields, <code>student1</code> has <code>address1</code> and name <code>John</code>.</p>\n<p>So, if we call:</p>\n<pre><code>    BeanUtils.copyProperties(student1, student2);\n</code></pre>\n<p>We are doing:</p>\n<pre><code>    student2.setName(student1.getName()); // this is copy because String is immutable\n    student2.setAddress(student1.getAddress()); // this is NOT copy, we still are referencing `address1`\n</code></pre>\n<p>When <code>address1</code> changes, it changes <code>student2</code> too.</p>\n<p>So, <code>BeanUtils.copyProperties()</code> <em>only works on primitive types and String fields</em> of the object; if it is nested, it does not work; or, you have to make sure the immutability of the original object during the whole lifecycle of the target object, which, is not easy and desirable.</p>\n<hr />\n<p>If you really want to make it a deep copy, you have to implement some way to <em>recursively</em> calls this method on fields which are not primitives. At last you will reach a class with only primitive/immutable fields and then you are done.</p>\n"},{"comments":[{"owner":{"account_id":34247,"reputation":1973,"user_id":96617,"accept_rate":78,"display_name":"Lluis Martinez"},"score":1,"creation_date":1666974081,"post_id":69520095,"comment_id":131068799,"body_markdown":"Very dangerous. You can find references to the same object and get a nice stack overflow (endless loop).","body":"Very dangerous. You can find references to the same object and get a nice stack overflow (endless loop)."},{"owner":{"account_id":11839714,"reputation":1,"user_id":8663939,"display_name":"Umang Chauhan"},"score":0,"creation_date":1667297353,"post_id":69520095,"comment_id":131129844,"body_markdown":"Thank you for your comment @LluisMartinez, Can you please give a little more detail on why it can get the reference to itself?","body":"Thank you for your comment @LluisMartinez, Can you please give a little more detail on why it can get the reference to itself?"}],"tags":[],"owner":{"account_id":11839714,"reputation":1,"user_id":8663939,"display_name":"Umang Chauhan"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633914692,"creation_date":1633914692,"answer_id":69520095,"question_id":15542504,"body_markdown":"The best solution for a deep copy of Objects of any class would be where there is recursion to handle Object inside an Object as well, and the real GET &amp; SET functions are used to maintain Object Integrity.\r\n\r\nThe solution I would like to put forward is to find all GET functions of the Source Object and match them with the SET functions of Target Object. If they match in ReturnType -&gt; Parameter then execute the copy. If they are not matching, try to call deep copy for those internal objects.\r\n\r\n    private void objectCopier(Object SourceObject, Object TargetObject) {\r\n        \t// Get Class Objects of Source and Target\r\n        \tClass&lt;?&gt; SourceClass = SourceObject.getClass();\r\n        \tClass&lt;?&gt; TargetClass = TargetObject.getClass();\r\n        \t// Get all Methods of Source Class\r\n        \tMethod[] sourceClassMethods = SourceClass.getDeclaredMethods();\r\n        \tfor(Method getter : sourceClassMethods) {\r\n        \t\tString getterName = getter.getName();\r\n        \t\t// Check if method is Getter\r\n        \t\tif(getterName.substring(0,3).equals(&quot;get&quot;)){\r\n        \t\t\ttry {\r\n        \t\t\t\t// Call Setter of TargetClass with getter return as parameter\r\n        \t\t\t\tTargetClass.getMethod(&quot;set&quot;+getterName.substring(3), getter.getReturnType()).invoke(TargetObject, getter.invoke(SourceObject));\r\n        \t\t\t}catch(IllegalAccessException | IllegalArgumentException | InvocationTargetException | NoSuchMethodException | SecurityException e) {\r\n        \t\t\t\ttry {\r\n    \t    \t\t\t\t// Get Class of the type Setter in Target object is expecting\r\n    \t\t    \t\t\tClass&lt;?&gt; SetTargetClass = TargetClass.getMethod(getterName).getReturnType();\r\n    \t\t    \t\t\t// Create new object of Setter Parameter of Target\r\n    \t\t\t\t\t\tObject setTargetObject = SetTargetClass.newInstance();\r\n    \t\t\t\t\t\t// Copy properties of return object of the Source Object to Target Object\r\n    \t\t\t\t\t\tobjectCopier(getter.invoke(SourceObject), setTargetObject);\r\n    \t\t\t\t\t\t// Set the copied object to the Target Object property\r\n    \t\t\t\t\t\tTargetClass.getMethod(&quot;set&quot;+getterName.substring(3),SetTargetClass).invoke(TargetObject, setTargetObject);\r\n        \t\t\t\t} catch (IllegalAccessException | IllegalArgumentException | InvocationTargetException\r\n            \t\t\t\t\t| NoSuchMethodException | SecurityException | InstantiationException ef) {\r\n            \t\t\t\tSystem.out.println(getterName);\r\n            \t\t\t}\r\n        \t\t\t}\r\n        \t\t}\r\n        \t}\r\n        }","title":"Should we use clone or BeanUtils.copyProperties and why","body":"<p>The best solution for a deep copy of Objects of any class would be where there is recursion to handle Object inside an Object as well, and the real GET &amp; SET functions are used to maintain Object Integrity.</p>\n<p>The solution I would like to put forward is to find all GET functions of the Source Object and match them with the SET functions of Target Object. If they match in ReturnType -&gt; Parameter then execute the copy. If they are not matching, try to call deep copy for those internal objects.</p>\n<pre><code>private void objectCopier(Object SourceObject, Object TargetObject) {\n        // Get Class Objects of Source and Target\n        Class&lt;?&gt; SourceClass = SourceObject.getClass();\n        Class&lt;?&gt; TargetClass = TargetObject.getClass();\n        // Get all Methods of Source Class\n        Method[] sourceClassMethods = SourceClass.getDeclaredMethods();\n        for(Method getter : sourceClassMethods) {\n            String getterName = getter.getName();\n            // Check if method is Getter\n            if(getterName.substring(0,3).equals(&quot;get&quot;)){\n                try {\n                    // Call Setter of TargetClass with getter return as parameter\n                    TargetClass.getMethod(&quot;set&quot;+getterName.substring(3), getter.getReturnType()).invoke(TargetObject, getter.invoke(SourceObject));\n                }catch(IllegalAccessException | IllegalArgumentException | InvocationTargetException | NoSuchMethodException | SecurityException e) {\n                    try {\n                        // Get Class of the type Setter in Target object is expecting\n                        Class&lt;?&gt; SetTargetClass = TargetClass.getMethod(getterName).getReturnType();\n                        // Create new object of Setter Parameter of Target\n                        Object setTargetObject = SetTargetClass.newInstance();\n                        // Copy properties of return object of the Source Object to Target Object\n                        objectCopier(getter.invoke(SourceObject), setTargetObject);\n                        // Set the copied object to the Target Object property\n                        TargetClass.getMethod(&quot;set&quot;+getterName.substring(3),SetTargetClass).invoke(TargetObject, setTargetObject);\n                    } catch (IllegalAccessException | IllegalArgumentException | InvocationTargetException\n                            | NoSuchMethodException | SecurityException | InstantiationException ef) {\n                        System.out.println(getterName);\n                    }\n                }\n            }\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":108390,"reputation":5268,"user_id":287732,"accept_rate":68,"display_name":"Biscuit128"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62041,"favorite_count":0,"down_vote_count":0,"up_vote_count":37,"accepted_answer_id":15591144,"answer_count":8,"score":37,"last_activity_date":1685526700,"creation_date":1363854283,"question_id":15542504,"body_markdown":"By the looks of it - `BeanUtils.copyProperties` seems to create a clone of an object. If this is the case, and what with the concerns around implementing the Cloneable interface (Only immutable objects are new where as mutable objects have references copied) which is the best and why?\r\n\r\nI yesterday implemented cloneable and then realised I had to provide my own modifications for non **String/Primative** elements. I was then informed about `BeanUtils.copyProperties` which I am now using. Both implementations seem to provide a similar functionality.\r\n\r\n\r\nThanks","title":"Should we use clone or BeanUtils.copyProperties and why","body":"<p>By the looks of it - <code>BeanUtils.copyProperties</code> seems to create a clone of an object. If this is the case, and what with the concerns around implementing the Cloneable interface (Only immutable objects are new where as mutable objects have references copied) which is the best and why?</p>\n\n<p>I yesterday implemented cloneable and then realised I had to provide my own modifications for non <strong>String/Primative</strong> elements. I was then informed about <code>BeanUtils.copyProperties</code> which I am now using. Both implementations seem to provide a similar functionality.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","android","button"],"comments":[{"owner":{"account_id":5872,"reputation":12730,"user_id":9648,"accept_rate":94,"display_name":"JohnnyLambada"},"score":8,"creation_date":1454698003,"post_id":17960599,"comment_id":58177167,"body_markdown":"DATerre&#39;s answer has been correct for two years. Can you mark it as so?","body":"DATerre&#39;s answer has been correct for two years. Can you mark it as so?"},{"owner":{"account_id":4958971,"reputation":7891,"user_id":3990767,"accept_rate":100,"display_name":"SOFe"},"score":1,"creation_date":1469790802,"post_id":17960599,"comment_id":64695807,"body_markdown":"This question requires editing to have a better title. It has become the first result in Google Search whiile it doesn&#39;t really answer the question.","body":"This question requires editing to have a better title. It has become the first result in Google Search whiile it doesn&#39;t really answer the question."}],"answers":[{"comments":[{"owner":{"account_id":1733936,"reputation":23935,"user_id":1586924,"accept_rate":85,"display_name":"hasan"},"score":12,"creation_date":1397658649,"post_id":17960625,"comment_id":35330584,"body_markdown":"I did. didn&#39;t disappear.","body":"I did. didn&#39;t disappear."},{"owner":{"account_id":3000565,"reputation":2167,"user_id":2546146,"accept_rate":75,"display_name":"Iman Akbari"},"score":0,"creation_date":1500375492,"post_id":17960625,"comment_id":77297426,"body_markdown":"How can its size be measured?","body":"How can its size be measured?"},{"owner":{"account_id":479528,"reputation":410,"user_id":892242,"accept_rate":86,"display_name":"Ramon"},"score":0,"creation_date":1502306137,"post_id":17960625,"comment_id":78157361,"body_markdown":"This is it, @Behr, changing the background to the button&#39;s color","body":"This is it, @Behr, changing the background to the button&#39;s color"},{"owner":{"account_id":1077108,"reputation":7629,"user_id":1074998,"accept_rate":48,"display_name":"ๆๆ็"},"score":0,"creation_date":1549021200,"post_id":17960625,"comment_id":95764310,"body_markdown":"I just realized my background image has transparent padding","body":"I just realized my background image has transparent padding"}],"tags":[],"owner":{"account_id":105929,"reputation":8881,"user_id":282398,"accept_rate":100,"display_name":"Delyan"},"comment_count":4,"down_vote_count":1,"up_vote_count":55,"is_accepted":false,"score":54,"last_activity_date":1375237819,"creation_date":1375237819,"answer_id":17960625,"question_id":17960599,"body_markdown":"That&#39;s not padding, it&#39;s the shadow around the button in its background drawable. Create your own background and it will disappear.","title":"How to remove padding around buttons in Android?","body":"<p>That's not padding, it's the shadow around the button in its background drawable. Create your own background and it will disappear.</p>\n"},{"comments":[{"owner":{"account_id":3834816,"reputation":1275,"user_id":3179428,"display_name":"sdf3qrxewqrxeqwxfew3123"},"score":7,"creation_date":1456667017,"post_id":17960713,"comment_id":59043927,"body_markdown":"I would be careful using this solution. What it does is just hidding button background (border + shadows) using negative margins. What is styling changes and border+shadow takes more then 5dp? I would rather use Delyan/Casey Murray solution to be on the safe side.","body":"I would be careful using this solution. What it does is just hidding button background (border + shadows) using negative margins. What is styling changes and border+shadow takes more then 5dp? I would rather use Delyan/Casey Murray solution to be on the safe side."},{"owner":{"account_id":433473,"reputation":1165,"user_id":818821,"accept_rate":60,"display_name":"Tim Kist"},"score":0,"creation_date":1561122771,"post_id":17960713,"comment_id":99971550,"body_markdown":"Also, negative margins are not officially supported in Android so I too would avoid this","body":"Also, negative margins are not officially supported in Android so I too would avoid this"}],"tags":[],"owner":{"account_id":1371289,"reputation":25857,"user_id":1306419,"accept_rate":85,"display_name":"Shobhit Puri"},"comment_count":2,"down_vote_count":5,"up_vote_count":32,"is_accepted":false,"score":27,"last_activity_date":1375238774,"creation_date":1375238421,"answer_id":17960713,"question_id":17960599,"body_markdown":"A workaround may be to try to use `-ve` values for margins like following:\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/button_back&quot;\r\n        android:layout_width=&quot;fill_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:onClick=&quot;CloseActivity&quot;\r\n        android:padding=&quot;0dp&quot;\r\n        android:layout_marginLeft=&quot;-5dip&quot;\r\n        android:layout_marginRight=&quot;-5dip&quot;\r\n        android:layout_marginTop=&quot;-5dip&quot;\r\n        android:layout_marginBottom=&quot;-5dip&quot;\r\n        android:text=&quot;@string/back&quot; /&gt;\r\n    \r\n    \r\nIt will make that space vanish. I mean you can choose the appropriate `dip` value, which makes it go away. It worked for me. Hope it works for you.\r\n    ","title":"How to remove padding around buttons in Android?","body":"<p>A workaround may be to try to use <code>-ve</code> values for margins like following:</p>\n\n<pre><code>&lt;Button\n    android:id=\"@+id/button_back\"\n    android:layout_width=\"fill_parent\"\n    android:layout_height=\"wrap_content\"\n    android:onClick=\"CloseActivity\"\n    android:padding=\"0dp\"\n    android:layout_marginLeft=\"-5dip\"\n    android:layout_marginRight=\"-5dip\"\n    android:layout_marginTop=\"-5dip\"\n    android:layout_marginBottom=\"-5dip\"\n    android:text=\"@string/back\" /&gt;\n</code></pre>\n\n<p>It will make that space vanish. I mean you can choose the appropriate <code>dip</code> value, which makes it go away. It worked for me. Hope it works for you.</p>\n"},{"tags":[],"owner":{"account_id":3065497,"reputation":1582,"user_id":2597290,"accept_rate":71,"display_name":"Casey Murray"},"comment_count":0,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1447855081,"creation_date":1375238623,"answer_id":17960736,"question_id":17960599,"body_markdown":"I am new to android but I had a similar situation. I did what @Delyan suggested and also used android:background=&quot;@null&quot; in the xml layout file.","title":"How to remove padding around buttons in Android?","body":"<p>I am new to android but I had a similar situation. I did what @Delyan suggested and also used android:background=\"@null\" in the xml layout file.</p>\n"},{"comments":[{"owner":{"account_id":266397,"reputation":11145,"user_id":553941,"accept_rate":80,"display_name":"Pijusn"},"score":5,"creation_date":1396872018,"post_id":20323723,"comment_id":34968700,"body_markdown":"Took a while until I realised I&#39;m not dealing with some weird padding behaviour but rather minHeight.","body":"Took a while until I realised I&#39;m not dealing with some weird padding behaviour but rather minHeight."},{"owner":{"account_id":364489,"reputation":8047,"user_id":708906,"display_name":"Tony Chan"},"score":10,"creation_date":1415531025,"post_id":20323723,"comment_id":42222716,"body_markdown":"I don&#39;t think this answer actually answers the original question at all. But I&#39;m still glad I came across it because I couldn&#39;t figure out why my `Button` was still taking up so much space even after setting its `android:background=&quot;@null&quot;`. The fact that the `Button`&#39;s default style is responsible is a very good tip.","body":"I don&#39;t think this answer actually answers the original question at all. But I&#39;m still glad I came across it because I couldn&#39;t figure out why my <code>Button</code> was still taking up so much space even after setting its <code>android:background=&quot;@null&quot;</code>. The fact that the <code>Button</code>&#39;s default style is responsible is a very good tip."},{"owner":{"account_id":2454100,"reputation":8011,"user_id":2139691,"accept_rate":65,"display_name":"Ricardo"},"score":1,"creation_date":1472746555,"post_id":20323723,"comment_id":65887476,"body_markdown":"It&#39;s important use both android:minHeight=&quot;0dp&quot; android:minWidth=&quot;0dp&quot;, and not only one of them.","body":"It&#39;s important use both android:minHeight=&quot;0dp&quot; android:minWidth=&quot;0dp&quot;, and not only one of them."},{"owner":{"account_id":1541936,"reputation":2885,"user_id":1436359,"accept_rate":75,"display_name":"rraallvv"},"score":0,"creation_date":1514734288,"post_id":20323723,"comment_id":83058306,"body_markdown":"This removes the rounded corner and ripple effect from the button on Android Nougat, any idea what could be causing this behavior?","body":"This removes the rounded corner and ripple effect from the button on Android Nougat, any idea what could be causing this behavior?"},{"owner":{"account_id":1752522,"reputation":5575,"user_id":1601298,"accept_rate":44,"display_name":"Mike Hanafey"},"score":0,"creation_date":1551549395,"post_id":20323723,"comment_id":96683837,"body_markdown":"This answer solved a problem with a GridLayout containing buttons with autoSize options on the text going berserk as I tried to get more buttons to fit into rows/columns. Simple answer that took me a long time to find...","body":"This answer solved a problem with a GridLayout containing buttons with autoSize options on the text going berserk as I tried to get more buttons to fit into rows/columns. Simple answer that took me a long time to find..."}],"tags":[],"owner":{"account_id":134493,"reputation":6152,"user_id":336666,"accept_rate":100,"display_name":"D. A. Terre"},"comment_count":5,"down_vote_count":2,"up_vote_count":585,"is_accepted":true,"score":583,"last_activity_date":1385972689,"creation_date":1385972689,"answer_id":20323723,"question_id":17960599,"body_markdown":"For me the problem turned out to be minHeight and minWidth on some of the Android themes.\r\n\r\nOn the Button element, add:\r\n\r\n    &lt;Button android:minHeight=&quot;0dp&quot; android:minWidth=&quot;0dp&quot; ...\r\n\r\nOr in your button&#39;s style:\r\n\r\n    &lt;item name=&quot;android:minHeight&quot;&gt;0dp&lt;/item&gt;\r\n    &lt;item name=&quot;android:minWidth&quot;&gt;0dp&lt;/item&gt;\r\n","title":"How to remove padding around buttons in Android?","body":"<p>For me the problem turned out to be minHeight and minWidth on some of the Android themes.</p>\n\n<p>On the Button element, add:</p>\n\n<pre><code>&lt;Button android:minHeight=\"0dp\" android:minWidth=\"0dp\" ...\n</code></pre>\n\n<p>Or in your button's style:</p>\n\n<pre><code>&lt;item name=\"android:minHeight\"&gt;0dp&lt;/item&gt;\n&lt;item name=\"android:minWidth\"&gt;0dp&lt;/item&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":387432,"reputation":2388,"user_id":745776,"accept_rate":67,"display_name":"juil"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1466714163,"creation_date":1466714163,"answer_id":38001356,"question_id":17960599,"body_markdown":"It doesn&#39;t seem to be padding, margin, or minheight/width.\r\nSetting `android:background=&quot;@null&quot;` the button loses its touch animation, but it turns out that setting the background to anything at all fixes that border.\r\n\r\n\r\n----------\r\n\r\n\r\nI am currently working with:\r\n\r\n    minSdkVersion 19\r\n    targetSdkVersion 23\r\n\r\n","title":"How to remove padding around buttons in Android?","body":"<p>It doesn't seem to be padding, margin, or minheight/width.\nSetting <code>android:background=\"@null\"</code> the button loses its touch animation, but it turns out that setting the background to anything at all fixes that border.</p>\n\n<hr>\n\n<p>I am currently working with:</p>\n\n<pre><code>minSdkVersion 19\ntargetSdkVersion 23\n</code></pre>\n"},{"tags":[],"owner":{"account_id":201081,"reputation":165,"user_id":1005462,"display_name":"user1005462"},"comment_count":0,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1471307322,"creation_date":1470815933,"answer_id":38867440,"question_id":17960599,"body_markdown":"In the button&#39;s XML set `android:includeFontPadding=&quot;false&quot;`","title":"How to remove padding around buttons in Android?","body":"<p>In the button's XML set <code>android:includeFontPadding=\"false\"</code></p>\n"},{"comments":[{"owner":{"account_id":4665479,"reputation":2847,"user_id":3778645,"display_name":"Alec Gerona"},"score":1,"creation_date":1576059312,"post_id":41637837,"comment_id":104772694,"body_markdown":"This removes the highlighting/animation capability of the button.","body":"This removes the highlighting/animation capability of the button."}],"tags":[],"owner":{"account_id":6540319,"reputation":93,"user_id":5058162,"display_name":"Panagiotis"},"comment_count":1,"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1522753043,"creation_date":1484320755,"answer_id":41637837,"question_id":17960599,"body_markdown":"I had the same problem and it seems that it is because of the **background color** of the button. Try changing the background color to another color eg:\r\n\r\n    android:background=&quot;@color/colorActive&quot;\r\n\r\nand see if it works. You can then *define a style* if you want for the button to use.","title":"How to remove padding around buttons in Android?","body":"<p>I had the same problem and it seems that it is because of the <strong>background color</strong> of the button. Try changing the background color to another color eg:</p>\n\n<pre><code>android:background=\"@color/colorActive\"\n</code></pre>\n\n<p>and see if it works. You can then <em>define a style</em> if you want for the button to use.</p>\n"},{"tags":[],"owner":{"account_id":8937446,"reputation":399,"user_id":6667795,"display_name":"Yashoda Bane"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1506165952,"creation_date":1506165952,"answer_id":46379073,"question_id":17960599,"body_markdown":"For removing padding around toggle button we need set minWidth and minHeight 0dp.`android:minWidth=&quot;0dp&quot; android:minHeight=&quot;0dp&quot;`\r\n\r\n      &lt;ToggleButton\r\n            android:id=&quot;@+id/toggle_row_notifications&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:minWidth=&quot;0dp&quot;\r\n            android:minHeight=&quot;0dp&quot;\r\n            android:layout_alignParentRight=&quot;true&quot;\r\n            android:layout_centerVertical=&quot;true&quot;\r\n            android:padding=&quot;@dimen/_5sdp&quot;\r\n            android:textOn=&quot;&quot;\r\n            android:textOff=&quot;&quot;\r\n            android:background=&quot;@android:color/transparent&quot;\r\n            android:button=&quot;@drawable/toggle_selector&quot;\r\n            /&gt;\r\n\r\nset your drawable file to button attribute like: ` android:button=&quot;@drawable/toggle_selector&quot;`\r\n\r\n\r\nBelow is my `toggle_selecter.xml` file\r\n  \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n         &lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n                &lt;item android:drawable=&quot;@drawable/notifications_toggle_on&quot; \r\n                      android:state_checked=&quot;true&quot;/&gt;\r\n                &lt;item android:drawable=&quot;@drawable/notifications_toggle_off&quot; \r\n                      android:state_checked=&quot;false&quot;/&gt;\r\n         &lt;/selector&gt;","title":"How to remove padding around buttons in Android?","body":"<p>For removing padding around toggle button we need set minWidth and minHeight 0dp.<code>android:minWidth=\"0dp\" android:minHeight=\"0dp\"</code></p>\n\n<pre><code>  &lt;ToggleButton\n        android:id=\"@+id/toggle_row_notifications\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:minWidth=\"0dp\"\n        android:minHeight=\"0dp\"\n        android:layout_alignParentRight=\"true\"\n        android:layout_centerVertical=\"true\"\n        android:padding=\"@dimen/_5sdp\"\n        android:textOn=\"\"\n        android:textOff=\"\"\n        android:background=\"@android:color/transparent\"\n        android:button=\"@drawable/toggle_selector\"\n        /&gt;\n</code></pre>\n\n<p>set your drawable file to button attribute like: <code>android:button=\"@drawable/toggle_selector\"</code></p>\n\n<p>Below is my <code>toggle_selecter.xml</code> file</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n     &lt;selector xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n            &lt;item android:drawable=\"@drawable/notifications_toggle_on\" \n                  android:state_checked=\"true\"/&gt;\n            &lt;item android:drawable=\"@drawable/notifications_toggle_off\" \n                  android:state_checked=\"false\"/&gt;\n     &lt;/selector&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2360355,"reputation":5911,"user_id":2067157,"accept_rate":78,"display_name":"Allan Veloso"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1552350995,"creation_date":1531713400,"answer_id":51354387,"question_id":17960599,"body_markdown":"It&#39;s not a padding but or the shadow of the background drawable or a problem with the `minHeight` and `minWidth`.\r\n\r\nIf you still want the nice ripple affect, you can make your own button style using the `?attr/selectableItemBackground`:\r\n\r\n    &lt;style name=&quot;Widget.AppTheme.MyCustomButton&quot; parent=&quot;Widget.AppCompat.Button.Borderless&quot;&gt;\r\n        &lt;item name=&quot;android:minHeight&quot;&gt;0dp&lt;/item&gt;\r\n        &lt;item name=&quot;android:minWidth&quot;&gt;0dp&lt;/item&gt;\r\n        &lt;item name=&quot;android:layout_height&quot;&gt;48dp&lt;/item&gt;\r\n        &lt;item name=&quot;android:background&quot;&gt;?attr/selectableItemBackground&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\nAnd apply it to the button:\r\n\r\n    &lt;Button \r\n        style=&quot;@style/Widget.AppTheme.MyCustomButton&quot;\r\n        ... /&gt;\r\n\r\n","title":"How to remove padding around buttons in Android?","body":"<p>It's not a padding but or the shadow of the background drawable or a problem with the <code>minHeight</code> and <code>minWidth</code>.</p>\n\n<p>If you still want the nice ripple affect, you can make your own button style using the <code>?attr/selectableItemBackground</code>:</p>\n\n<pre><code>&lt;style name=\"Widget.AppTheme.MyCustomButton\" parent=\"Widget.AppCompat.Button.Borderless\"&gt;\n    &lt;item name=\"android:minHeight\"&gt;0dp&lt;/item&gt;\n    &lt;item name=\"android:minWidth\"&gt;0dp&lt;/item&gt;\n    &lt;item name=\"android:layout_height\"&gt;48dp&lt;/item&gt;\n    &lt;item name=\"android:background\"&gt;?attr/selectableItemBackground&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>And apply it to the button:</p>\n\n<pre><code>&lt;Button \n    style=\"@style/Widget.AppTheme.MyCustomButton\"\n    ... /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":244719,"reputation":5617,"user_id":517733,"accept_rate":50,"display_name":"Mike6679"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1538398745,"creation_date":1538398745,"answer_id":52591719,"question_id":17960599,"body_markdown":"Give your button a custom background:   &lt;item name=&quot;android:background&quot;&gt;@drawable/material_btn_blue&lt;/item&gt;","title":"How to remove padding around buttons in Android?","body":"<p>Give your button a custom background:   @drawable/material_btn_blue</p>\n"},{"tags":[],"owner":{"account_id":9470871,"reputation":1070,"user_id":7041761,"display_name":"Neuron"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1540144051,"creation_date":1540144051,"answer_id":52918174,"question_id":17960599,"body_markdown":"You can also do it with `layout_width(height)` parameters. \r\n\r\nE.g. I have deleted top and bottom space with `android:layout_height=&quot;18dp&quot;` code.","title":"How to remove padding around buttons in Android?","body":"<p>You can also do it with <code>layout_width(height)</code> parameters. </p>\n\n<p>E.g. I have deleted top and bottom space with <code>android:layout_height=\"18dp\"</code> code.</p>\n"},{"tags":[],"owner":{"account_id":3944321,"reputation":1019,"user_id":3257579,"accept_rate":88,"display_name":"golkarm"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1568295496,"creation_date":1568295496,"answer_id":57907991,"question_id":17960599,"body_markdown":"A standard button is not supposed to be used at _full width_ which is why you experience this.\r\n\r\n## Background\r\n\r\nIf you have a look at the [_Material Design - Button Style_][2] you will see that a button has a 48dp height click area, but will be displayed as 36dp of height for...some reason.\r\n\r\nThis is the background outline you see, which will not cover the whole area of the button itself.  \r\nIt has rounded corners and some padding and is supposed to be clickable by itself, wrap its content, and not span the whole width at the bottom of your screen.\r\n\r\n## Solution\r\n\r\nAs mentioned above, what you want is a different _background_. Not a standard button, but a background for a selectable item with this nice ripple effect.\r\n\r\nFor this use case there is the `?selectableItemBackground` theme attribute which you can use for your backgrounds (especially in lists).  \r\nIt will add a platform standard ripple (or some color state list on &lt; 21) and will use your current theme colors.\r\n\r\nFor your usecase you might just use the following:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/sign_in_button&quot;\r\n        style=&quot;?android:attr/buttonBarButtonStyle&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;Login&quot;\r\n        android:background=&quot;?attr/selectableItemBackground&quot; /&gt;\r\n                       &lt;!--  /\\ that&#39;s all --&gt;\r\n\r\n_There is also no need to add layout weights if your view is the only one and spans the whole screen_\r\n\r\nIf you have some different idea on what your background should look like you have to create a custom drawable yourself, and manage color and state there.\r\n\r\n&gt; This answer copied from [**Question:** How to properly remove padding (or margin?) around buttons in Android?\r\n][1]\r\n\r\n  [1]: https://stackoverflow.com/a/43298421/3257579\r\n  [2]:https://material.io/guidelines/components/buttons.html#buttons-style","title":"How to remove padding around buttons in Android?","body":"<p>A standard button is not supposed to be used at <em>full width</em> which is why you experience this.</p>\n\n<h2>Background</h2>\n\n<p>If you have a look at the <a href=\"https://material.io/guidelines/components/buttons.html#buttons-style\" rel=\"nofollow noreferrer\"><em>Material Design - Button Style</em></a> you will see that a button has a 48dp height click area, but will be displayed as 36dp of height for...some reason.</p>\n\n<p>This is the background outline you see, which will not cover the whole area of the button itself.<br>\nIt has rounded corners and some padding and is supposed to be clickable by itself, wrap its content, and not span the whole width at the bottom of your screen.</p>\n\n<h2>Solution</h2>\n\n<p>As mentioned above, what you want is a different <em>background</em>. Not a standard button, but a background for a selectable item with this nice ripple effect.</p>\n\n<p>For this use case there is the <code>?selectableItemBackground</code> theme attribute which you can use for your backgrounds (especially in lists).<br>\nIt will add a platform standard ripple (or some color state list on &lt; 21) and will use your current theme colors.</p>\n\n<p>For your usecase you might just use the following:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Button\n    android:id=\"@+id/sign_in_button\"\n    style=\"?android:attr/buttonBarButtonStyle\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:text=\"Login\"\n    android:background=\"?attr/selectableItemBackground\" /&gt;\n                   &lt;!--  /\\ that's all --&gt;\n</code></pre>\n\n<p><em>There is also no need to add layout weights if your view is the only one and spans the whole screen</em></p>\n\n<p>If you have some different idea on what your background should look like you have to create a custom drawable yourself, and manage color and state there.</p>\n\n<blockquote>\n  <p>This answer copied from <a href=\"https://stackoverflow.com/a/43298421/3257579\"><strong>Question:</strong> How to properly remove padding (or margin?) around buttons in Android?\n  </a></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6420798,"reputation":2371,"user_id":4977596,"display_name":"sochas"},"comment_count":0,"down_vote_count":0,"up_vote_count":212,"is_accepted":false,"score":212,"last_activity_date":1569408084,"creation_date":1569408084,"answer_id":58096571,"question_id":17960599,"body_markdown":"My solution was set to 0 the insetTop and insetBottom properties.\r\n\r\n    &lt;android.support.design.button.MaterialButton\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:insetTop=&quot;0dp&quot;\r\n            android:insetBottom=&quot;0dp&quot;\r\n            android:text=&quot;@string/view_video&quot;\r\n            android:textColor=&quot;@color/white&quot;/&gt;","title":"How to remove padding around buttons in Android?","body":"<p>My solution was set to 0 the insetTop and insetBottom properties.</p>\n\n<pre><code>&lt;android.support.design.button.MaterialButton\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:insetTop=\"0dp\"\n        android:insetBottom=\"0dp\"\n        android:text=\"@string/view_video\"\n        android:textColor=\"@color/white\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4665479,"reputation":2847,"user_id":3778645,"display_name":"Alec Gerona"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576061793,"creation_date":1576061793,"answer_id":59284250,"question_id":17960599,"body_markdown":"After hours of digging around multiple answers I finally found a solution that doesn&#39;t use a different element, manipulate `minHeight` or `minWidth`, or even wrapping `Button` around a `RelativeLayout`. \r\n\r\n    &lt;Button\r\n        android:foreground=&quot;?attr/selectableItemBackground&quot;\r\n        android:background=&quot;@color/whatever&quot; /&gt;\r\nThe main takeaway here is the setting of the foreground instead of background as many of the answers stipulate. Changing the background itself to `selectableItemBackground` will just overwrite any changes you made to the button&#39;s color/background, if any. \r\n\r\nChanging the foreground gives you the best of both worlds: get rid of the &quot;invisible&quot; padding and retain your button&#39;s design.\r\n","title":"How to remove padding around buttons in Android?","body":"<p>After hours of digging around multiple answers I finally found a solution that doesn't use a different element, manipulate <code>minHeight</code> or <code>minWidth</code>, or even wrapping <code>Button</code> around a <code>RelativeLayout</code>. </p>\n\n<pre><code>&lt;Button\n    android:foreground=\"?attr/selectableItemBackground\"\n    android:background=\"@color/whatever\" /&gt;\n</code></pre>\n\n<p>The main takeaway here is the setting of the foreground instead of background as many of the answers stipulate. Changing the background itself to <code>selectableItemBackground</code> will just overwrite any changes you made to the button's color/background, if any. </p>\n\n<p>Changing the foreground gives you the best of both worlds: get rid of the \"invisible\" padding and retain your button's design.</p>\n"},{"tags":[],"owner":{"account_id":155220,"reputation":6787,"user_id":371720,"accept_rate":58,"display_name":"Shihab Uddin"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1589440402,"creation_date":1589440041,"answer_id":61791288,"question_id":17960599,"body_markdown":"You can use **Borderless** style in **AppCompatButton** like below. and use **android:background** with it.\r\n\r\n\r\n&gt; **style=&quot;@style/Widget.AppCompat.Button.Borderless.Colored&quot;**\r\n\r\nButton code\r\n\r\n    &lt;androidx.appcompat.widget.AppCompatButton\r\n            android:id=&quot;@+id/button_visa_next&quot;\r\n            android:background=&quot;@color/colorPrimary&quot;\r\n            style=&quot;@style/Widget.AppCompat.Button.Borderless.Colored&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginTop=&quot;@dimen/spacing_normal&quot;\r\n            android:text=&quot;@string/next&quot;\r\n            android:textColor=&quot;@color/white&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\r\n\r\nOutput:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/iKKJb.png","title":"How to remove padding around buttons in Android?","body":"<p>You can use <strong>Borderless</strong> style in <strong>AppCompatButton</strong> like below. and use <strong>android:background</strong> with it.</p>\n\n<blockquote>\n  <p><strong>style=\"@style/Widget.AppCompat.Button.Borderless.Colored\"</strong></p>\n</blockquote>\n\n<p>Button code</p>\n\n<pre><code>&lt;androidx.appcompat.widget.AppCompatButton\n        android:id=\"@+id/button_visa_next\"\n        android:background=\"@color/colorPrimary\"\n        style=\"@style/Widget.AppCompat.Button.Borderless.Colored\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"@dimen/spacing_normal\"\n        android:text=\"@string/next\"\n        android:textColor=\"@color/white\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\" /&gt;\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/iKKJb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iKKJb.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":6832619,"reputation":3131,"user_id":5255963,"display_name":"Ali Rezaiyan"},"comment_count":0,"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1591866284,"creation_date":1591866284,"answer_id":62320792,"question_id":17960599,"body_markdown":"To remove the Top and Bottom padding\r\n\r\n    &lt;com.google.android.material.button.MaterialButton\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:minHeight=&quot;0dp&quot;//to effect the following parameters, this must be added!\r\n            android:insetTop=&quot;0dp&quot;\r\n            android:insetBottom=&quot;0dp&quot;/&gt;\r\n\r\nTo remove the Left and Right padding\r\n\r\n    &lt;com.google.android.material.button.MaterialButton\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:minWidth=&quot;0dp&quot;//to effect the following parameters, this must be added!\r\n            android:insetLeft=&quot;0dp&quot;\r\n            android:insetRight=&quot;0dp&quot;/&gt;","title":"How to remove padding around buttons in Android?","body":"<p>To remove the Top and Bottom padding</p>\n\n<pre><code>&lt;com.google.android.material.button.MaterialButton\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:minHeight=\"0dp\"//to effect the following parameters, this must be added!\n        android:insetTop=\"0dp\"\n        android:insetBottom=\"0dp\"/&gt;\n</code></pre>\n\n<p>To remove the Left and Right padding</p>\n\n<pre><code>&lt;com.google.android.material.button.MaterialButton\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:minWidth=\"0dp\"//to effect the following parameters, this must be added!\n        android:insetLeft=\"0dp\"\n        android:insetRight=\"0dp\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17095722,"reputation":954,"user_id":12370758,"display_name":"Prakash Reddy"},"comment_count":0,"down_vote_count":0,"up_vote_count":39,"is_accepted":false,"score":39,"last_activity_date":1596796423,"creation_date":1596796423,"answer_id":63300025,"question_id":17960599,"body_markdown":"for MaterialButton, add below properties, it will work perfectly\r\n\r\n    &lt;android.support.design.button.MaterialButton\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:insetTop=&quot;0dp&quot;\r\n        android:insetBottom=&quot;0dp&quot;/&gt;","title":"How to remove padding around buttons in Android?","body":"<p>for MaterialButton, add below properties, it will work perfectly</p>\n<pre><code>&lt;android.support.design.button.MaterialButton\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:insetTop=&quot;0dp&quot;\n    android:insetBottom=&quot;0dp&quot;/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2620825,"reputation":723,"user_id":4272167,"accept_rate":83,"display_name":"Maduro"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1629998001,"creation_date":1629998001,"answer_id":68942812,"question_id":17960599,"body_markdown":"For `&lt;androidx.appcompat.widget.AppCompatButton&gt;`\r\n\r\n               &lt;androidx.appcompat.widget.AppCompatButton\r\n                    .\r\n                    .\r\n                    android:minHeight=&quot;0dp&quot;\r\n                    android:minWidth=&quot;0dp&quot; \r\n                   &gt;\r\n\r\n                &lt;/androidx.appcompat.widget.AppCompatButton&gt;","title":"How to remove padding around buttons in Android?","body":"<p>For <code>&lt;androidx.appcompat.widget.AppCompatButton&gt;</code></p>\n<pre><code>           &lt;androidx.appcompat.widget.AppCompatButton\n                .\n                .\n                android:minHeight=&quot;0dp&quot;\n                android:minWidth=&quot;0dp&quot; \n               &gt;\n\n            &lt;/androidx.appcompat.widget.AppCompatButton&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3447122,"reputation":3809,"user_id":4850553,"display_name":"Mikhail Sharin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640178001,"creation_date":1640178001,"answer_id":70449478,"question_id":17960599,"body_markdown":"To remove `AppCompatButton` paddings programmatically:\r\n\r\n    button.setPadding(0, 0, 0, 0)\r\n    button.minHeight = 0\r\n    button.minimumHeight = 0","title":"How to remove padding around buttons in Android?","body":"<p>To remove <code>AppCompatButton</code> paddings programmatically:</p>\n<pre><code>button.setPadding(0, 0, 0, 0)\nbutton.minHeight = 0\nbutton.minimumHeight = 0\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1688455699,"post_id":72808137,"comment_id":135072743,"body_markdown":"Thanks! I didn&#39;t know `android:padding=&quot;0dp&quot;` was also needed (together with `paddingStart`, `paddingEnd` to remove top and bottom paddings and keep left and right).","body":"Thanks! I didn&#39;t know <code>android:padding=&quot;0dp&quot;</code> was also needed (together with <code>paddingStart</code>, <code>paddingEnd</code> to remove top and bottom paddings and keep left and right)."}],"tags":[],"owner":{"account_id":21255563,"reputation":143,"user_id":15637138,"display_name":"Fawzi Abd-Elaal"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1676497686,"creation_date":1656538562,"answer_id":72808137,"question_id":17960599,"body_markdown":"Add these properties:\r\n    \r\n        android:insetTop=&quot;0dp&quot;\r\n        android:insetBottom=&quot;0dp&quot;\r\n        android:minWidth=&quot;0dp&quot;\r\n        android:minHeight=&quot;0dp&quot;\r\n        android:padding=&quot;0dp&quot;","title":"How to remove padding around buttons in Android?","body":"<p>Add these properties:</p>\n<pre><code>    android:insetTop=&quot;0dp&quot;\n    android:insetBottom=&quot;0dp&quot;\n    android:minWidth=&quot;0dp&quot;\n    android:minHeight=&quot;0dp&quot;\n    android:padding=&quot;0dp&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685526519,"creation_date":1684892037,"answer_id":76319571,"question_id":17960599,"body_markdown":"If you use (now material) `Button` with style, add there parameters:\r\n\r\n    &lt;style name=&quot;SomeButton&quot; parent=&quot;Widget.MaterialComponents.Button.TextButton&quot;&gt;\r\n        &lt;item name=&quot;android:insetTop&quot;&gt;0dp&lt;/item&gt;\r\n        &lt;item name=&quot;android:insetBottom&quot;&gt;0dp&lt;/item&gt;\r\n        &lt;!-- Margins between buttons --&gt;\r\n        &lt;item name=&quot;android:layout_marginTop&quot;&gt;4dp&lt;/item&gt;\r\n        &lt;item name=&quot;android:layout_marginBottom&quot;&gt;4dp&lt;/item&gt;\r\n        &lt;!-- Remove extra paddings --&gt;\r\n        &lt;item name=&quot;android:minHeight&quot;&gt;0dp&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n    &lt;Button\r\n        style=&quot;@style/SomeButton&quot;\r\n        ...\r\n\r\nIn case you set a drawable as a background and want to add some margins, don&#39;t use upper code. You should add *top and bottom margins* to the drawable:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n        &lt;!-- Top and bottom margins --&gt;\r\n        &lt;item\r\n            android:bottom=&quot;4dp&quot;\r\n            android:top=&quot;4dp&quot;&gt;\r\n            &lt;!-- Below follows your drawable --&gt;\r\n            &lt;selector&gt;\r\n                &lt;item android:state_enabled=&quot;false&quot;&gt;\r\n                    &lt;shape&gt;\r\n                        &lt;solid android:color=&quot;#f0f0f0&quot; /&gt;\r\n                    &lt;/shape&gt;\r\n                &lt;/item&gt;\r\n                &lt;item android:state_enabled=&quot;true&quot;&gt;\r\n                    &lt;shape&gt;\r\n                        &lt;solid android:color=&quot;#ffff80&quot; /&gt;\r\n                    &lt;/shape&gt;\r\n                &lt;/item&gt;\r\n            &lt;/selector&gt;\r\n        &lt;/item&gt;\r\n    &lt;/layer-list&gt;\r\n\r\n    &lt;Button\r\n        android:background=&quot;@drawable/some_drawable&quot;\r\n        app:backgroundTint=&quot;@null&quot;\r\n        ...\r\n","title":"How to remove padding around buttons in Android?","body":"<p>If you use (now material) <code>Button</code> with style, add there parameters:</p>\n<pre><code>&lt;style name=&quot;SomeButton&quot; parent=&quot;Widget.MaterialComponents.Button.TextButton&quot;&gt;\n    &lt;item name=&quot;android:insetTop&quot;&gt;0dp&lt;/item&gt;\n    &lt;item name=&quot;android:insetBottom&quot;&gt;0dp&lt;/item&gt;\n    &lt;!-- Margins between buttons --&gt;\n    &lt;item name=&quot;android:layout_marginTop&quot;&gt;4dp&lt;/item&gt;\n    &lt;item name=&quot;android:layout_marginBottom&quot;&gt;4dp&lt;/item&gt;\n    &lt;!-- Remove extra paddings --&gt;\n    &lt;item name=&quot;android:minHeight&quot;&gt;0dp&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;Button\n    style=&quot;@style/SomeButton&quot;\n    ...\n</code></pre>\n<p>In case you set a drawable as a background and want to add some margins, don't use upper code. You should add <em>top and bottom margins</em> to the drawable:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n    &lt;!-- Top and bottom margins --&gt;\n    &lt;item\n        android:bottom=&quot;4dp&quot;\n        android:top=&quot;4dp&quot;&gt;\n        &lt;!-- Below follows your drawable --&gt;\n        &lt;selector&gt;\n            &lt;item android:state_enabled=&quot;false&quot;&gt;\n                &lt;shape&gt;\n                    &lt;solid android:color=&quot;#f0f0f0&quot; /&gt;\n                &lt;/shape&gt;\n            &lt;/item&gt;\n            &lt;item android:state_enabled=&quot;true&quot;&gt;\n                &lt;shape&gt;\n                    &lt;solid android:color=&quot;#ffff80&quot; /&gt;\n                &lt;/shape&gt;\n            &lt;/item&gt;\n        &lt;/selector&gt;\n    &lt;/item&gt;\n&lt;/layer-list&gt;\n\n&lt;Button\n    android:background=&quot;@drawable/some_drawable&quot;\n    app:backgroundTint=&quot;@null&quot;\n    ...\n</code></pre>\n"}],"owner":{"account_id":1620855,"reputation":41219,"user_id":1497454,"accept_rate":42,"display_name":"omega"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":180441,"favorite_count":0,"down_vote_count":0,"up_vote_count":268,"accepted_answer_id":20323723,"answer_count":21,"score":268,"last_activity_date":1685526519,"creation_date":1375237628,"question_id":17960599,"body_markdown":"In my Android app, I have this layout:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt; \r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; \r\n    \t  android:layout_width=&quot;match_parent&quot; \r\n    \t  android:layout_height=&quot;match_parent&quot; \r\n    \t  android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n    \t&lt;fragment\r\n    \t\t android:id=&quot;@+id/map&quot;\r\n    \t     android:layout_width=&quot;match_parent&quot;\r\n    \t     android:layout_height=&quot;0dp&quot; \r\n    \t     android:layout_weight=&quot;1&quot; \r\n    \t\t class=&quot;com.google.android.gms.maps.SupportMapFragment&quot;/&gt;\r\n    \r\n        &lt;Button\r\n            android:id=&quot;@+id/button_back&quot;\r\n            android:layout_width=&quot;fill_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:onClick=&quot;CloseActivity&quot;\r\n            android:padding=&quot;0dp&quot;\r\n            android:text=&quot;@+string/back&quot; /&gt;\r\n    \r\n    &lt;/LinearLayout&gt;\r\n\r\nIn the preview and on the phone, it looks like:\r\n\r\n![][1]\r\n\r\nAs you can see on the button in the bottom area, there is some padding there.\r\n\r\nHow can I get rid of that, and let the button fully fill the bottom area?\r\n\r\n  [1]: http://i.stack.imgur.com/6VZqB.png","title":"How to remove padding around buttons in Android?","body":"<p>In my Android app, I have this layout:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt; \n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" \n      android:layout_width=\"match_parent\" \n      android:layout_height=\"match_parent\" \n      android:orientation=\"vertical\"&gt;\n\n    &lt;fragment\n         android:id=\"@+id/map\"\n         android:layout_width=\"match_parent\"\n         android:layout_height=\"0dp\" \n         android:layout_weight=\"1\" \n         class=\"com.google.android.gms.maps.SupportMapFragment\"/&gt;\n\n    &lt;Button\n        android:id=\"@+id/button_back\"\n        android:layout_width=\"fill_parent\"\n        android:layout_height=\"wrap_content\"\n        android:onClick=\"CloseActivity\"\n        android:padding=\"0dp\"\n        android:text=\"@+string/back\" /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>In the preview and on the phone, it looks like:</p>\n\n<p><img src=\"https://i.stack.imgur.com/6VZqB.png\" alt=\"\"></p>\n\n<p>As you can see on the button in the bottom area, there is some padding there.</p>\n\n<p>How can I get rid of that, and let the button fully fill the bottom area?</p>\n"},{"tags":["java","amcharts5"],"answers":[{"tags":[],"owner":{"account_id":28678221,"reputation":1,"user_id":21959925,"display_name":"Maas goudswaard"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685526425,"creation_date":1685526328,"answer_id":76372163,"question_id":76331888,"body_markdown":"I was able to solve it; it turned out to be quite a simple syntax; have posted this here so others might be able to use it:\r\n\r\nThere is some other structure around this; but I did not want to copy the complete code.\r\nClearly it is not the most efficient way to do this but for this prototype chart it works fine!\r\n\r\n        var myDropdown = am5stock.DropdownListControl.new(root, {\r\n            stockChart: stockChart,\r\n            name: &quot;Select Chart&quot;,\r\n            fixedLabel: true,\r\n            items: [{\r\n                id: &quot;emotionprocess&quot;,\r\n                label: &quot;Smiley/ Activity&quot;,\r\n                form: &quot;checkbox&quot;,\r\n                value: &quot;&quot;,\r\n                checked: false\r\n            },\r\n            {\r\n                id: &quot;category&quot;,\r\n                label: &quot;Categories&quot;,\r\n                form: &quot;checkbox&quot;,\r\n                value: &quot;&quot;,\r\n                checked: false\r\n            },\r\n            {\r\n                id: &quot;totalhours&quot;,\r\n                label: &quot;Total Hours&quot;,\r\n                form: &quot;checkbox&quot;,\r\n                value: &quot;&quot;,\r\n                checked: false\r\n            },\r\n            {\r\n                id: &quot;emotionresult&quot;,\r\n                label: &quot;Emotion of result&quot;,\r\n                form: &quot;checkbox&quot;,\r\n                value: &quot;&quot;,\r\n                checked: false\r\n            },\r\n            ]\r\n        });\r\n\r\n\r\n        myDropdown.getPrivate(&quot;dropdown&quot;).events.on(&quot;changed&quot;, function (ev) {\r\n            //     tooltiptoggle = !tooltiptoggle;\r\n            console.log(ev);\r\n            if (ev.item.id == &#39;category&#39;) {\r\n                if (ev.checked == true) {\r\n                    series.show();\r\n                    yAxis.show();\r\n                }\r\n                else {\r\n                    series.hide();\r\n                    yAxis.hide();\r\n                }\r\n            }\r\n            if (ev.item.id == &#39;totalhours&#39;) {\r\n                if (ev.checked == true) {\r\n                    seriesTotalHours.show();\r\n                    yAxisTotalHours.show();\r\n                }\r\n                else {\r\n                    seriesTotalHours.hide();\r\n                    yAxisTotalHours.hide();\r\n                }\r\n            }\r\n            if (ev.item.id == &#39;emotionresult&#39;) {\r\n                if (ev.checked == true) {\r\n                    seriesavg.show();\r\n                    yAxisavg.show();\r\n                }\r\n                else {\r\n                    seriesavg.hide();\r\n                    yAxisavg.hide();\r\n                }\r\n            }\r\n            if (ev.item.id == &#39;emotionprocess&#39;) {\r\n                if (ev.checked == true) {\r\n                    seriessmiley5.show();\r\n                    seriessmiley6.show();\r\n                    seriessmiley7.show();;\r\n                    seriessmiley8.show();\r\n                    seriessmiley9.show();\r\n                    seriessmiley10.show();\r\n                    seriessmiley11.show();\r\n                    seriessmiley12.show();\r\n                    seriessmiley13.show();\r\n                    seriessmiley14.show();\r\n                    seriessmiley15.show();\r\n                    seriessmiley16.show();\r\n                    seriessmiley17.show();\r\n                }\r\n                else {\r\n                    seriessmiley5.hide();\r\n                    seriessmiley6.hide();\r\n                    seriessmiley7.hide();\r\n                    seriessmiley8.hide();\r\n                    seriessmiley9.hide();\r\n                    seriessmiley10.hide();\r\n                    seriessmiley11.hide();\r\n                    seriessmiley12.hide();\r\n                    seriessmiley13.hide();\r\n                    seriessmiley14.hide();\r\n                    seriessmiley15.hide();\r\n                    seriessmiley16.hide();\r\n                    seriessmiley17.hide();\r\n                }\r\n            }","title":"How can I slice values from data in amcharts Java based on a selected checkbox in a dropdown list?","body":"<p>I was able to solve it; it turned out to be quite a simple syntax; have posted this here so others might be able to use it:</p>\n<p>There is some other structure around this; but I did not want to copy the complete code.\nClearly it is not the most efficient way to do this but for this prototype chart it works fine!</p>\n<pre><code>    var myDropdown = am5stock.DropdownListControl.new(root, {\n        stockChart: stockChart,\n        name: &quot;Select Chart&quot;,\n        fixedLabel: true,\n        items: [{\n            id: &quot;emotionprocess&quot;,\n            label: &quot;Smiley/ Activity&quot;,\n            form: &quot;checkbox&quot;,\n            value: &quot;&quot;,\n            checked: false\n        },\n        {\n            id: &quot;category&quot;,\n            label: &quot;Categories&quot;,\n            form: &quot;checkbox&quot;,\n            value: &quot;&quot;,\n            checked: false\n        },\n        {\n            id: &quot;totalhours&quot;,\n            label: &quot;Total Hours&quot;,\n            form: &quot;checkbox&quot;,\n            value: &quot;&quot;,\n            checked: false\n        },\n        {\n            id: &quot;emotionresult&quot;,\n            label: &quot;Emotion of result&quot;,\n            form: &quot;checkbox&quot;,\n            value: &quot;&quot;,\n            checked: false\n        },\n        ]\n    });\n\n\n    myDropdown.getPrivate(&quot;dropdown&quot;).events.on(&quot;changed&quot;, function (ev) {\n        //     tooltiptoggle = !tooltiptoggle;\n        console.log(ev);\n        if (ev.item.id == 'category') {\n            if (ev.checked == true) {\n                series.show();\n                yAxis.show();\n            }\n            else {\n                series.hide();\n                yAxis.hide();\n            }\n        }\n        if (ev.item.id == 'totalhours') {\n            if (ev.checked == true) {\n                seriesTotalHours.show();\n                yAxisTotalHours.show();\n            }\n            else {\n                seriesTotalHours.hide();\n                yAxisTotalHours.hide();\n            }\n        }\n        if (ev.item.id == 'emotionresult') {\n            if (ev.checked == true) {\n                seriesavg.show();\n                yAxisavg.show();\n            }\n            else {\n                seriesavg.hide();\n                yAxisavg.hide();\n            }\n        }\n        if (ev.item.id == 'emotionprocess') {\n            if (ev.checked == true) {\n                seriessmiley5.show();\n                seriessmiley6.show();\n                seriessmiley7.show();;\n                seriessmiley8.show();\n                seriessmiley9.show();\n                seriessmiley10.show();\n                seriessmiley11.show();\n                seriessmiley12.show();\n                seriessmiley13.show();\n                seriessmiley14.show();\n                seriessmiley15.show();\n                seriessmiley16.show();\n                seriessmiley17.show();\n            }\n            else {\n                seriessmiley5.hide();\n                seriessmiley6.hide();\n                seriessmiley7.hide();\n                seriessmiley8.hide();\n                seriessmiley9.hide();\n                seriessmiley10.hide();\n                seriessmiley11.hide();\n                seriessmiley12.hide();\n                seriessmiley13.hide();\n                seriessmiley14.hide();\n                seriessmiley15.hide();\n                seriessmiley16.hide();\n                seriessmiley17.hide();\n            }\n        }\n</code></pre>\n"}],"owner":{"account_id":28678221,"reputation":1,"user_id":21959925,"display_name":"Maas goudswaard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1685526425,"creation_date":1685014941,"question_id":76331888,"body_markdown":"I am trying to access data from an Java array (or some other concept I can&#39;t seem to find). I am familiar with Python but not so much with Java.\r\n\r\nWhat I&#39;m trying to accomplish is to select the ev[id] from a dataset, to execute a function based on the value.\r\n\r\n- The console.log(ev); results:\r\n\r\n      checked: false\r\n      item:{id: &#39;activities&#39;, label: &#39;Display activities&#39;, form: &#39;checkbox&#39;, \r\n      value: &#39;&#39;, checked: true}\r\n      target: et {uid: 153, _settings: {โฆ}, _privateSettings: {โฆ}, \r\n      _settingEvents: {โฆ}, _privateSettingEvents: {โฆ}, โฆ}\r\n      type: &#39;changed&#39;\r\n      value: false\r\n      [[Prototype]]: Object\r\n\r\n- So I&#39;m trying to access the Item.id and use it in an if statement. This is a function in AMcharts5:\r\n\r\n        myDropdown.getPrivate(&quot;dropdown&quot;).events.on(&quot;changed&quot;, function (ev) {\r\n            tooltiptoggle = !tooltiptoggle;\r\n            console.log(ev);\r\n            console.log(tooltiptoggle);\r\n            if (ev[&#39;id&#39;] == &quot;emotion&quot;) {\r\n                if (tooltiptoggle == true) {\r\n                    series.show();\r\n                    //yaxis.show();\r\n\r\n                }\r\n                if (tooltiptoggle == false) {\r\n                    series.hide();\r\n                    //  yaxis.hide();\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n\r\n- Below is the full dropdown code; I am trying to add series and remove them based on the checkmarks.\r\n  \r\n      var myDropdown = am5stock.DropdownListControl.new(root, {\r\n            stockChart: stockChart,\r\n            name: &quot;Options&quot;,\r\n            fixedLabel: true,\r\n            items: [{\r\n                id: &quot;emotion&quot;,\r\n                label: &quot;Display emotion result&quot;,\r\n                form: &quot;checkbox&quot;,\r\n                value: &quot;&quot;,\r\n                checked: true\r\n            },\r\n            {\r\n                id: &quot;activities&quot;,\r\n                label: &quot;Display activities&quot;,\r\n                form: &quot;checkbox&quot;,\r\n                value: &quot;&quot;,\r\n                checked: true\r\n            }\r\n            ]\r\n        });\r\n\r\n\r\n        myDropdown.getPrivate(&quot;dropdown&quot;).events.on(&quot;changed&quot;, function (ev) {\r\n            tooltiptoggle = !tooltiptoggle;\r\n            console.log(ev);\r\n            console.log(tooltiptoggle);\r\n            if (ev[&#39;id&#39;] == &quot;emotion&quot;) {\r\n                if (tooltiptoggle == true) {\r\n                    series.show();\r\n                    //yaxis.show();\r\n\r\n                }\r\n                if (tooltiptoggle == false) {\r\n                    series.hide();\r\n                    //  yaxis.hide();\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n\r\n        var toolbar = am5stock.StockToolbar.new(root, {\r\n            container: document.getElementById(&quot;chartcontrols&quot;),\r\n            stockChart: stockChart,\r\n            controls: [\r\n\r\n\r\n                am5stock.DrawingControl.new(root, {\r\n                    stockChart: stockChart\r\n                }),\r\n                am5stock.ResetControl.new(root, {\r\n                    stockChart: stockChart\r\n                }),\r\n                myDropdown,\r\n            ]\r\n        })\r\n","title":"How can I slice values from data in amcharts Java based on a selected checkbox in a dropdown list?","body":"<p>I am trying to access data from an Java array (or some other concept I can't seem to find). I am familiar with Python but not so much with Java.</p>\n<p>What I'm trying to accomplish is to select the ev[id] from a dataset, to execute a function based on the value.</p>\n<ul>\n<li><p>The console.log(ev); results:</p>\n<pre><code>checked: false\nitem:{id: 'activities', label: 'Display activities', form: 'checkbox', \nvalue: '', checked: true}\ntarget: et {uid: 153, _settings: {โฆ}, _privateSettings: {โฆ}, \n_settingEvents: {โฆ}, _privateSettingEvents: {โฆ}, โฆ}\ntype: 'changed'\nvalue: false\n[[Prototype]]: Object\n</code></pre>\n</li>\n<li><p>So I'm trying to access the Item.id and use it in an if statement. This is a function in AMcharts5:</p>\n<pre><code>  myDropdown.getPrivate(&quot;dropdown&quot;).events.on(&quot;changed&quot;, function (ev) {\n      tooltiptoggle = !tooltiptoggle;\n      console.log(ev);\n      console.log(tooltiptoggle);\n      if (ev['id'] == &quot;emotion&quot;) {\n          if (tooltiptoggle == true) {\n              series.show();\n              //yaxis.show();\n\n          }\n          if (tooltiptoggle == false) {\n              series.hide();\n              //  yaxis.hide();\n          }\n      }\n  });\n</code></pre>\n</li>\n<li><p>Below is the full dropdown code; I am trying to add series and remove them based on the checkmarks.</p>\n<pre><code>var myDropdown = am5stock.DropdownListControl.new(root, {\n      stockChart: stockChart,\n      name: &quot;Options&quot;,\n      fixedLabel: true,\n      items: [{\n          id: &quot;emotion&quot;,\n          label: &quot;Display emotion result&quot;,\n          form: &quot;checkbox&quot;,\n          value: &quot;&quot;,\n          checked: true\n      },\n      {\n          id: &quot;activities&quot;,\n          label: &quot;Display activities&quot;,\n          form: &quot;checkbox&quot;,\n          value: &quot;&quot;,\n          checked: true\n      }\n      ]\n  });\n\n\n  myDropdown.getPrivate(&quot;dropdown&quot;).events.on(&quot;changed&quot;, function (ev) {\n      tooltiptoggle = !tooltiptoggle;\n      console.log(ev);\n      console.log(tooltiptoggle);\n      if (ev['id'] == &quot;emotion&quot;) {\n          if (tooltiptoggle == true) {\n              series.show();\n              //yaxis.show();\n\n          }\n          if (tooltiptoggle == false) {\n              series.hide();\n              //  yaxis.hide();\n          }\n      }\n\n  });\n\n\n  var toolbar = am5stock.StockToolbar.new(root, {\n      container: document.getElementById(&quot;chartcontrols&quot;),\n      stockChart: stockChart,\n      controls: [\n\n\n          am5stock.DrawingControl.new(root, {\n              stockChart: stockChart\n          }),\n          am5stock.ResetControl.new(root, {\n              stockChart: stockChart\n          }),\n          myDropdown,\n      ]\n  })\n</code></pre>\n</li>\n</ul>\n"},{"tags":["java","scheduledexecutorservice","uncaughtexceptionhandler","thread-exceptions"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1685526739,"post_id":76370552,"comment_id":134671383,"body_markdown":"You might want to look at other questions like https://stackoverflow.com/questions/3875739/exception-handling-in-threadpools","body":"You might want to look at other questions like <a href=\"https://stackoverflow.com/questions/3875739/exception-handling-in-threadpools\" title=\"exception handling in threadpools\">stackoverflow.com/questions/3875739/&hellip;</a>"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1685527240,"post_id":76370552,"comment_id":134671496,"body_markdown":"Why do you not check the returned `ScheduledFuture` instance to see, if the task executed successfully?","body":"Why do you not check the returned <code>ScheduledFuture</code> instance to see, if the task executed successfully?"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1685529743,"post_id":76370552,"comment_id":134671974,"body_markdown":"Does this answer your question? [SchduledExecutorService not executing UncaughtExceptionHandler when exception happens in the thread](https://stackoverflow.com/questions/58318817/schduledexecutorservice-not-executing-uncaughtexceptionhandler-when-exception-ha)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/58318817/schduledexecutorservice-not-executing-uncaughtexceptionhandler-when-exception-ha\">SchduledExecutorService not executing UncaughtExceptionHandler when exception happens in the thread</a>"}],"owner":{"account_id":26373773,"reputation":11,"user_id":20028059,"display_name":"CoderBendl"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685526354,"creation_date":1685512588,"question_id":76370552,"body_markdown":"I have this code here. I was trying to get information about unchecked exceptions in `Runnable`s of a scheduler without using try catch or the `ScheduledFuture` to check for exceptions. I thought this would be the easiest way but it doesn&#39;t show any exception. Why isn&#39;t there any output visible?\r\n\r\n    Thread.UncaughtExceptionHandler handler = new Thread.UncaughtExceptionHandler() {\r\n\t\t\t\r\n\t\t\t@Override\r\n\t\t\tpublic void uncaughtException(Thread t, Throwable e) {\r\n\t\t\t\tSystem.err.println(&quot;Exception in thread &quot;+t.getName()+&quot;:&quot;);\r\n\t\t\t\te.printStackTrace();\t\t\t\t\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tThreadFactory tf = new ThreadFactory() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic Thread newThread(Runnable r) {\r\n\t\t\t\tThread t = new Thread(r);\r\n\t\t\t\tt.setUncaughtExceptionHandler(handler);\r\n\t\t\t\treturn t;\r\n\t\t\t}\r\n\t\t};\r\n\t\tScheduledExecutorService ses = new ScheduledThreadPoolExecutor(1, tf);\r\n\t\tses.schedule(()-&gt;Objects.requireNonNull(null), 100, TimeUnit.MILLISECONDS);\r\n\r\n","title":"UncaughtExceptionHandler for ScheduledExecutorService doesn&#39;t work?","body":"<p>I have this code here. I was trying to get information about unchecked exceptions in <code>Runnable</code>s of a scheduler without using try catch or the <code>ScheduledFuture</code> to check for exceptions. I thought this would be the easiest way but it doesn't show any exception. Why isn't there any output visible?</p>\n<pre><code>Thread.UncaughtExceptionHandler handler = new Thread.UncaughtExceptionHandler() {\n        \n        @Override\n        public void uncaughtException(Thread t, Throwable e) {\n            System.err.println(&quot;Exception in thread &quot;+t.getName()+&quot;:&quot;);\n            e.printStackTrace();                \n        }\n    };\n    \n    ThreadFactory tf = new ThreadFactory() {\n\n        @Override\n        public Thread newThread(Runnable r) {\n            Thread t = new Thread(r);\n            t.setUncaughtExceptionHandler(handler);\n            return t;\n        }\n    };\n    ScheduledExecutorService ses = new ScheduledThreadPoolExecutor(1, tf);\n    ses.schedule(()-&gt;Objects.requireNonNull(null), 100, TimeUnit.MILLISECONDS);\n</code></pre>\n"},{"tags":["java","hibernate"],"owner":{"account_id":27581092,"reputation":3,"user_id":21050285,"display_name":"martuo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685526267,"creation_date":1685467428,"question_id":76367223,"body_markdown":"I updated the Hibernate 4.3 to Hibernate 5.0 in my application, i updated the deprecated wasCommitted() and wasRolledBack() in my code to TransactionStatus.COMMITTED and TransactionStatus.ROLLED_BACK in my HibernateUtils, but when executing it, I am having the problem that close all transactions and i don&#39;t know why, this is the log (i have ojdbc v8):\r\n\r\n    *INFO ajp-nio-127.0.0.1-8009-exec-1 login.Loginin - LOGIN USER....... user1\r\n    DEBUG ajp-nio-127.0.0.1-8009-exec-1 org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl - Initiating JDBC connection release from afterTransaction\r\n    DEBUG ajp-nio-127.0.0.1-8009-exec-1 org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl - Initiating JDBC connection release from afterTransaction\r\n    DEBUG ajp-nio-127.0.0.1-8009-exec-1 org.hibernate.engine.transaction.internal.TransactionImpl - begin\r\n    DEBUG ajp-nio-127.0.0.1-8009-exec-1 org.hibernate.engine.transaction.internal.TransactionImpl - rolling back\r\n    DEBUG ajp-nio-127.0.0.1-8009-exec-1 org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl - Initiating JDBC connection release from afterTransaction\r\n    DEBUG ajp-nio-127.0.0.1-8009-exec-1 org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl - Initiating JDBC connection release from afterTransaction*\r\n\r\n**My hibernateUtils:**\r\n\r\n```\r\npackage database.config;\r\nimport java.io.Serializable;\r\n\r\nimport org.apache.commons.logging.Log;\r\nimport org.apache.commons.logging.LogFactory;\r\nimport org.hibernate.HibernateException;\r\nimport org.hibernate.Session;\r\nimport org.hibernate.SessionFactory;\r\nimport org.hibernate.Transaction;\r\nimport org.hibernate.boot.registry.StandardServiceRegistryBuilder;\r\nimport org.hibernate.cfg.Configuration;\r\nimport org.hibernate.resource.transaction.spi.TransactionStatus;\r\n\r\npublic class HibernateUtil implements Serializable {  \r\nโโโโโโ\r\nโโโโโโ\r\nโโโโโโ\r\nโโโโโโprivate static final long serialVersionUID = 1L;\r\nโโโโโโprivate static SessionFactory sessionFactory;\r\nโโโโโโ\r\nโโโโโโprivate static final ThreadLocal&lt;Session&gt; threadSession;\r\nโโโโโโprivate static final ThreadLocal&lt;Transaction&gt; threadTransaction;\r\nโโโโโโ\r\nโโโโโโprivate static Log log = LogFactory.getLog(HibernateUtil.class);  \r\nโโโโโโ  \r\nโโโโโโstatic {\r\nโโโโโโโโโโโโ\r\nโโโโโโโโโโโโโโโโโโtry{\r\nโโโโโโโโโโโโโโโโโโโโโโโโlog.info(&quot;Creating threadSession and threadTransaction...&quot;);\r\nโโโโโโโโโโโโโโโโโโโโโโโโthreadSession = new ThreadLocal&lt;Session&gt;();\r\nโโโโโโโโโโโโโโโโโโโโโโโโthreadTransaction = new ThreadLocal&lt;Transaction&gt;();\r\nโโโโโโโโโโโโโโโโโโโโโโโโ\r\nโโโโโโโโโโโโโโโโโโโโโโโโConfiguration configuration = new Configuration().configure();\r\nโโโโโโโโโโโโโโโโโโโโโโโโ\r\nโโโโโโโโโโโโโโโโโโ      StandardServiceRegistryBuilder builder = new StandardServiceRegistryBuilder()\r\nโโโโโโโโโโโโโโโโโโ        .applySettings(configuration.getProperties());\r\nโโโโโโโโโโโโโโโโโโ      sessionFactory = configuration.buildSessionFactory(builder.build());\r\nโโโโโโโโโโโโ    \r\nโโโโโโโโโโโโโโโโโโ    \r\nโโโโโโโโโโโโโโโโโโโโโโโโ}catch (HibernateException he) {\r\nโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโlog.error(&quot;Initial SessionFactory creation failed.&quot; + he);\r\nโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโthrow new ExceptionInInitializerError(he);\r\nโโโโโโโโโโโโ        โโโโ}\r\nโโโโโโโโโโโโ\r\nโโโโโโโโโโโโ}\r\nโโโโโโโโโโโโ\r\nโโโโโโ    public static SessionFactory getSessionFactory() {\r\nโโโโโโ    โโ\r\nโโโโโโ        return sessionFactory;\r\nโโโโโโ    }\r\nโโโโโโ    \r\nโโโโโโ    \r\nโโโโโโ    \r\nโโโโโโ    public static void openSession() {\r\nโโโโโโ    โโ\r\nโโโโโโ    โโsessionFactory.openSession();\r\nโโโโโโ    โโ\r\nโโโโโโ    }\r\nโโโโโโ    \r\nโโโโโโ    public static Session getSession() throws Exception{\r\nโโโโโโ    โโ\r\nโโโโโโ    โโSession s =  (Session) threadSession.get();\r\nโโโโโโ    โโ\r\nโโโโโโ    โโโโโโโโ    โโ\r\nโโโโโโ    โโ\r\nโโโโโโ        try {\r\nโโโโโโ           if (s == null || !s.isOpen()) {\r\nโโโโโโ              if (log.isInfoEnabled()) {\r\nโโโโโโ            โโโโโโ  log.info(&quot;Opening new Session for this thread - &quot;  + Thread.currentThread().getName());\r\nโโโโโโ              }\r\nโโโโโโ              s = sessionFactory.openSession();\r\nโโโโโโ              threadSession.set(s);\r\nโโโโโโ       โโโโโ           }\r\nโโโโโโ           else {\r\nโโโโโโ        โโโโ  \r\nโโโโโโ        โโโโ  \r\nโโโโโโ              if (log.isDebugEnabled()) {\r\nโโโโโโ            โโโโโโ  log.debug(&quot;Using current session in this thread - &quot; + Thread.currentThread().getName());\r\nโโโโโโ              }\r\nโโโโโโ           }\r\nโโโโโโ        }\r\nโโโโโโ        catch (HibernateException ex) {\r\nโโโโโโ           throw ex;\r\nโโโโโโ        }\r\nโโโโโโ        \r\n//โโโโ        if (s.isDirty()) {\r\n//โโโโ        โโโโ\r\n//โโโโ        โโโโlog.info(&quot;Session is Dirty&quot;);\r\n//โโโโโโโโโโโโโโโโโโโโโโs.flush();\r\n//โโโโโโโโโโโโโโโโโโโโโโs.clear();\r\n//โโโโโโโโโโโโโโโโ}\r\n\r\nโโโโโโ        return s;\r\nโโโโโโ    โโ\r\nโโโโโโ    โโ\r\nโโโโโโ    }\r\nโโโโโโ    \r\nโโโโโโ    public static void beginTransaction()\r\nโโโโโโ    โโ    throws Exception\r\nโโโโโโ    โโ  {\r\nโโโโโโ    โโ    Transaction localTransaction = null;\r\nโโโโโโ    โโ    try\r\nโโโโโโ    โโ    {\r\nโโโโโโ    โโ    โโ\r\nโโโโโโ    โโ      localTransaction = (Transaction)threadTransaction.get();\r\nโโโโโโ    โโ      if (localTransaction == null)\r\nโโโโโโ    โโ      {\r\nโโโโโโ    โโ    โโ getSession();\r\nโโโโโโ    โโ        localTransaction = ((Session)threadSession.get()).beginTransaction();\r\nโโโโโโ    โโ        threadTransaction.set(localTransaction);\r\nโโโโโโ    โโ      }\r\nโโโโโโ    โโ    }\r\nโโโโโโ    โโ    catch (HibernateException localHibernateException)\r\nโโโโโโ    โโ    {\r\nโโโโโโ    โโ      throw new Exception(localHibernateException);\r\nโโโโโโ    โโ    }\r\nโโโโโโ    โโ  }\r\nโโโโโโ    โโ  \r\nโโโโโโ    โโ  public static void commitTransaction() throws Exception\r\nโโโโโโ    โโ  {\r\nโโโโโโ    โโ    Transaction localTransaction = null;\r\nโโโโโโ    โโ    try\r\nโโโโโโ    โโ    {\r\nโโโโโโ    โโ    โโ getSession();\r\nโโโโโโ    โโ    โโ\r\nโโโโโโ    โโ    โโ localTransaction = (Transaction)threadTransaction.get();\r\nโโโโโโ    โโ    โโ\r\nโโโโโโ    โโ    โโ\r\nโโโโโโ    โโ    โโ\r\nโโโโโโ    โโ    โโ\r\nโโโโโโ    โโ    โโ if (localTransaction != null &amp;&amp; !localTransaction.getStatus().isOneOf(TransactionStatus.COMMITTED, TransactionStatus.ROLLED_BACK)) {\r\nโโโโโโ    โโ    โโโโโโโโ    localTransaction.commit();\r\nโโโโโโ    โโ    โโโโโโโโ    threadTransaction.set(null);\r\nโโโโโโ    โโ      }\r\nโโโโโโ    โโ    }\r\nโโโโโโ    โโ    catch (HibernateException localHibernateException)\r\nโโโโโโ    โโ    {\r\nโโโโโโ    โโ      rollbackTransaction();\r\nโโโโโโ    โโ  \r\nโโโโโโ    โโ    }\r\nโโโโโโ    โโ  }\r\nโโโโโโ    โโ  \r\n\r\nโโโโโโ    โโ  \r\nโโโโโโ public static void rollbackTransaction() throws Exception\r\nโโโโโโ    โโ  {\r\nโโโโโโ    โโ    Transaction localTransaction = null;\r\nโโโโโโ    โโ    try\r\nโโโโโโ    โโ    {\r\nโโโโโโ    โโ    โโ getSession();\r\nโโโโโโ    โโ      localTransaction = (Transaction)threadTransaction.get();\r\nโโโโโโ    โโ      threadTransaction.set(null);\r\nโโโโโโ    โโ      if (localTransaction != null &amp;&amp; !localTransaction.getStatus().isOneOf(TransactionStatus.COMMITTED, TransactionStatus.ROLLED_BACK)) {\r\nโโโโโโ    โโ    โโ    localTransaction.rollback();\r\nโโโโโโ    โโ    โโ    threadTransaction.set(null);\r\nโโโโโโ    โโ    โโ}\r\nโโโโโโ    โโ    }\r\nโโโโโโ    โโ    catch (HibernateException localHibernateException)\r\nโโโโโโ    โโ    {\r\nโโโโโโ    โโ    \r\nโโโโโโ    โโ    }\r\nโโโโโโ    โโ  \r\nโโโโโโ    โโ  }โโโ    \r\nโโโโโโ    \r\nโโโโโโ    โโ  public static void closeSession()\r\nโโโโโโ    โโ  {\r\nโโโโโโ    โโ    Session localSession = null;\r\nโโโโโโ    โโ    try\r\nโโโโโโ    โโ    {\r\nโโโโโโ    โโ      localSession = (Session)threadSession.get();\r\nโโโโโโ    โโ      threadSession.set(null);\r\nโโโโโโ    โโ      if ((localSession != null) &amp;&amp; (localSession.isOpen()))\r\nโโโโโโ    โโ      {\r\nโโโโโโ    โโ        try\r\nโโโโโโ    โโ        {\r\nโโโโโโ    โโ          localSession.flush();\r\nโโโโโโ    โโ        }\r\nโโโโโโ    โโ        catch (Exception localException1) {}\r\nโโโโโโ    โโ        try\r\nโโโโโโ    โโ        {\r\nโโโโโโ    โโ          localSession.disconnect();\r\nโโโโโโ    โโ        }\r\nโโโโโโ    โโ        catch (Exception localException2) {}\r\nโโโโโโ    โโ        try\r\nโโโโโโ    โโ        {\r\nโโโโโโ    โโ          localSession.close();\r\nโโโโโโ    โโ    \r\nโโโโโโ  โโโโโโโโโโ        \r\nโโโโโโ    โโ        }\r\nโโโโโโ    โโ        catch (Exception localException3) {}\r\nโโโโโโ    โโ      }\r\nโโโโโโ    โโ    }\r\nโโโโโโ    โโ    catch (HibernateException localHibernateException)\r\nโโโโโโ    โโ    {\r\nโโโโโโ    โโ      localHibernateException.printStackTrace();\r\nโโโโโโ    โโ    }\r\nโโโโโโ    โโ  }\r\nโโโโโโ    โโ  \r\nโโโโโโ    โโ  \r\n}\r\n```","title":"Hibernate 5.0 close connections","body":"<p>I updated the Hibernate 4.3 to Hibernate 5.0 in my application, i updated the deprecated wasCommitted() and wasRolledBack() in my code to TransactionStatus.COMMITTED and TransactionStatus.ROLLED_BACK in my HibernateUtils, but when executing it, I am having the problem that close all transactions and i don't know why, this is the log (i have ojdbc v8):</p>\n<pre><code>*INFO ajp-nio-127.0.0.1-8009-exec-1 login.Loginin - LOGIN USER....... user1\nDEBUG ajp-nio-127.0.0.1-8009-exec-1 org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl - Initiating JDBC connection release from afterTransaction\nDEBUG ajp-nio-127.0.0.1-8009-exec-1 org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl - Initiating JDBC connection release from afterTransaction\nDEBUG ajp-nio-127.0.0.1-8009-exec-1 org.hibernate.engine.transaction.internal.TransactionImpl - begin\nDEBUG ajp-nio-127.0.0.1-8009-exec-1 org.hibernate.engine.transaction.internal.TransactionImpl - rolling back\nDEBUG ajp-nio-127.0.0.1-8009-exec-1 org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl - Initiating JDBC connection release from afterTransaction\nDEBUG ajp-nio-127.0.0.1-8009-exec-1 org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl - Initiating JDBC connection release from afterTransaction*\n</code></pre>\n<p><strong>My hibernateUtils:</strong></p>\n<pre><code>package database.config;\nimport java.io.Serializable;\n\nimport org.apache.commons.logging.Log;\nimport org.apache.commons.logging.LogFactory;\nimport org.hibernate.HibernateException;\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.Transaction;\nimport org.hibernate.boot.registry.StandardServiceRegistryBuilder;\nimport org.hibernate.cfg.Configuration;\nimport org.hibernate.resource.transaction.spi.TransactionStatus;\n\npublic class HibernateUtil implements Serializable {  \nโโโโโโ\nโโโโโโ\nโโโโโโ\nโโโโโโprivate static final long serialVersionUID = 1L;\nโโโโโโprivate static SessionFactory sessionFactory;\nโโโโโโ\nโโโโโโprivate static final ThreadLocal&lt;Session&gt; threadSession;\nโโโโโโprivate static final ThreadLocal&lt;Transaction&gt; threadTransaction;\nโโโโโโ\nโโโโโโprivate static Log log = LogFactory.getLog(HibernateUtil.class);  \nโโโโโโ  \nโโโโโโstatic {\nโโโโโโโโโโโโ\nโโโโโโโโโโโโโโโโโโtry{\nโโโโโโโโโโโโโโโโโโโโโโโโlog.info(&quot;Creating threadSession and threadTransaction...&quot;);\nโโโโโโโโโโโโโโโโโโโโโโโโthreadSession = new ThreadLocal&lt;Session&gt;();\nโโโโโโโโโโโโโโโโโโโโโโโโthreadTransaction = new ThreadLocal&lt;Transaction&gt;();\nโโโโโโโโโโโโโโโโโโโโโโโโ\nโโโโโโโโโโโโโโโโโโโโโโโโConfiguration configuration = new Configuration().configure();\nโโโโโโโโโโโโโโโโโโโโโโโโ\nโโโโโโโโโโโโโโโโโโ      StandardServiceRegistryBuilder builder = new StandardServiceRegistryBuilder()\nโโโโโโโโโโโโโโโโโโ        .applySettings(configuration.getProperties());\nโโโโโโโโโโโโโโโโโโ      sessionFactory = configuration.buildSessionFactory(builder.build());\nโโโโโโโโโโโโ    \nโโโโโโโโโโโโโโโโโโ    \nโโโโโโโโโโโโโโโโโโโโโโโโ}catch (HibernateException he) {\nโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโlog.error(&quot;Initial SessionFactory creation failed.&quot; + he);\nโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโthrow new ExceptionInInitializerError(he);\nโโโโโโโโโโโโ        โโโโ}\nโโโโโโโโโโโโ\nโโโโโโโโโโโโ}\nโโโโโโโโโโโโ\nโโโโโโ    public static SessionFactory getSessionFactory() {\nโโโโโโ    โโ\nโโโโโโ        return sessionFactory;\nโโโโโโ    }\nโโโโโโ    \nโโโโโโ    \nโโโโโโ    \nโโโโโโ    public static void openSession() {\nโโโโโโ    โโ\nโโโโโโ    โโsessionFactory.openSession();\nโโโโโโ    โโ\nโโโโโโ    }\nโโโโโโ    \nโโโโโโ    public static Session getSession() throws Exception{\nโโโโโโ    โโ\nโโโโโโ    โโSession s =  (Session) threadSession.get();\nโโโโโโ    โโ\nโโโโโโ    โโโโโโโโ    โโ\nโโโโโโ    โโ\nโโโโโโ        try {\nโโโโโโ           if (s == null || !s.isOpen()) {\nโโโโโโ              if (log.isInfoEnabled()) {\nโโโโโโ            โโโโโโ  log.info(&quot;Opening new Session for this thread - &quot;  + Thread.currentThread().getName());\nโโโโโโ              }\nโโโโโโ              s = sessionFactory.openSession();\nโโโโโโ              threadSession.set(s);\nโโโโโโ       โโโโโ           }\nโโโโโโ           else {\nโโโโโโ        โโโโ  \nโโโโโโ        โโโโ  \nโโโโโโ              if (log.isDebugEnabled()) {\nโโโโโโ            โโโโโโ  log.debug(&quot;Using current session in this thread - &quot; + Thread.currentThread().getName());\nโโโโโโ              }\nโโโโโโ           }\nโโโโโโ        }\nโโโโโโ        catch (HibernateException ex) {\nโโโโโโ           throw ex;\nโโโโโโ        }\nโโโโโโ        \n//โโโโ        if (s.isDirty()) {\n//โโโโ        โโโโ\n//โโโโ        โโโโlog.info(&quot;Session is Dirty&quot;);\n//โโโโโโโโโโโโโโโโโโโโโโs.flush();\n//โโโโโโโโโโโโโโโโโโโโโโs.clear();\n//โโโโโโโโโโโโโโโโ}\n\nโโโโโโ        return s;\nโโโโโโ    โโ\nโโโโโโ    โโ\nโโโโโโ    }\nโโโโโโ    \nโโโโโโ    public static void beginTransaction()\nโโโโโโ    โโ    throws Exception\nโโโโโโ    โโ  {\nโโโโโโ    โโ    Transaction localTransaction = null;\nโโโโโโ    โโ    try\nโโโโโโ    โโ    {\nโโโโโโ    โโ    โโ\nโโโโโโ    โโ      localTransaction = (Transaction)threadTransaction.get();\nโโโโโโ    โโ      if (localTransaction == null)\nโโโโโโ    โโ      {\nโโโโโโ    โโ    โโ getSession();\nโโโโโโ    โโ        localTransaction = ((Session)threadSession.get()).beginTransaction();\nโโโโโโ    โโ        threadTransaction.set(localTransaction);\nโโโโโโ    โโ      }\nโโโโโโ    โโ    }\nโโโโโโ    โโ    catch (HibernateException localHibernateException)\nโโโโโโ    โโ    {\nโโโโโโ    โโ      throw new Exception(localHibernateException);\nโโโโโโ    โโ    }\nโโโโโโ    โโ  }\nโโโโโโ    โโ  \nโโโโโโ    โโ  public static void commitTransaction() throws Exception\nโโโโโโ    โโ  {\nโโโโโโ    โโ    Transaction localTransaction = null;\nโโโโโโ    โโ    try\nโโโโโโ    โโ    {\nโโโโโโ    โโ    โโ getSession();\nโโโโโโ    โโ    โโ\nโโโโโโ    โโ    โโ localTransaction = (Transaction)threadTransaction.get();\nโโโโโโ    โโ    โโ\nโโโโโโ    โโ    โโ\nโโโโโโ    โโ    โโ\nโโโโโโ    โโ    โโ\nโโโโโโ    โโ    โโ if (localTransaction != null &amp;&amp; !localTransaction.getStatus().isOneOf(TransactionStatus.COMMITTED, TransactionStatus.ROLLED_BACK)) {\nโโโโโโ    โโ    โโโโโโโโ    localTransaction.commit();\nโโโโโโ    โโ    โโโโโโโโ    threadTransaction.set(null);\nโโโโโโ    โโ      }\nโโโโโโ    โโ    }\nโโโโโโ    โโ    catch (HibernateException localHibernateException)\nโโโโโโ    โโ    {\nโโโโโโ    โโ      rollbackTransaction();\nโโโโโโ    โโ  \nโโโโโโ    โโ    }\nโโโโโโ    โโ  }\nโโโโโโ    โโ  \n\nโโโโโโ    โโ  \nโโโโโโ public static void rollbackTransaction() throws Exception\nโโโโโโ    โโ  {\nโโโโโโ    โโ    Transaction localTransaction = null;\nโโโโโโ    โโ    try\nโโโโโโ    โโ    {\nโโโโโโ    โโ    โโ getSession();\nโโโโโโ    โโ      localTransaction = (Transaction)threadTransaction.get();\nโโโโโโ    โโ      threadTransaction.set(null);\nโโโโโโ    โโ      if (localTransaction != null &amp;&amp; !localTransaction.getStatus().isOneOf(TransactionStatus.COMMITTED, TransactionStatus.ROLLED_BACK)) {\nโโโโโโ    โโ    โโ    localTransaction.rollback();\nโโโโโโ    โโ    โโ    threadTransaction.set(null);\nโโโโโโ    โโ    โโ}\nโโโโโโ    โโ    }\nโโโโโโ    โโ    catch (HibernateException localHibernateException)\nโโโโโโ    โโ    {\nโโโโโโ    โโ    \nโโโโโโ    โโ    }\nโโโโโโ    โโ  \nโโโโโโ    โโ  }โโโ    \nโโโโโโ    \nโโโโโโ    โโ  public static void closeSession()\nโโโโโโ    โโ  {\nโโโโโโ    โโ    Session localSession = null;\nโโโโโโ    โโ    try\nโโโโโโ    โโ    {\nโโโโโโ    โโ      localSession = (Session)threadSession.get();\nโโโโโโ    โโ      threadSession.set(null);\nโโโโโโ    โโ      if ((localSession != null) &amp;&amp; (localSession.isOpen()))\nโโโโโโ    โโ      {\nโโโโโโ    โโ        try\nโโโโโโ    โโ        {\nโโโโโโ    โโ          localSession.flush();\nโโโโโโ    โโ        }\nโโโโโโ    โโ        catch (Exception localException1) {}\nโโโโโโ    โโ        try\nโโโโโโ    โโ        {\nโโโโโโ    โโ          localSession.disconnect();\nโโโโโโ    โโ        }\nโโโโโโ    โโ        catch (Exception localException2) {}\nโโโโโโ    โโ        try\nโโโโโโ    โโ        {\nโโโโโโ    โโ          localSession.close();\nโโโโโโ    โโ    \nโโโโโโ  โโโโโโโโโโ        \nโโโโโโ    โโ        }\nโโโโโโ    โโ        catch (Exception localException3) {}\nโโโโโโ    โโ      }\nโโโโโโ    โโ    }\nโโโโโโ    โโ    catch (HibernateException localHibernateException)\nโโโโโโ    โโ    {\nโโโโโโ    โโ      localHibernateException.printStackTrace();\nโโโโโโ    โโ    }\nโโโโโโ    โโ  }\nโโโโโโ    โโ  \nโโโโโโ    โโ  \n}\n</code></pre>\n"},{"tags":["java","websocket","jetty","java-websocket"],"comments":[{"owner":{"account_id":10226265,"reputation":376,"user_id":7548747,"display_name":"Lachlan"},"score":0,"creation_date":1685536031,"post_id":76372147,"comment_id":134673424,"body_markdown":"which way are you configuring the idleTimeout?","body":"which way are you configuring the idleTimeout?"},{"owner":{"account_id":6800547,"reputation":29,"user_id":5233988,"display_name":"Umair Sayed"},"score":0,"creation_date":1685598707,"post_id":76372147,"comment_id":134683032,"body_markdown":"I have used this in configure method factory.setIdleTimeout(Duration.ofMillis(0));","body":"I have used this in configure method factory.setIdleTimeout(Duration.ofMillis(0));"},{"owner":{"account_id":6800547,"reputation":29,"user_id":5233988,"display_name":"Umair Sayed"},"score":0,"creation_date":1685599214,"post_id":76372147,"comment_id":134683091,"body_markdown":"I have also checked with factory.setIdleTimeout(Duration.ofMillis(3600000));","body":"I have also checked with factory.setIdleTimeout(Duration.ofMillis(3600000));"},{"owner":{"account_id":10226265,"reputation":376,"user_id":7548747,"display_name":"Lachlan"},"score":0,"creation_date":1685601364,"post_id":76372147,"comment_id":134683394,"body_markdown":"It would be helpful if you shared some of your code in the question or a simple reproducer.","body":"It would be helpful if you shared some of your code in the question or a simple reproducer."},{"owner":{"account_id":6800547,"reputation":29,"user_id":5233988,"display_name":"Umair Sayed"},"score":0,"creation_date":1687358050,"post_id":76372147,"comment_id":134926021,"body_markdown":"It&#39;s resolved now. The issue was with the entropy. Installed haveged service and it started working. Thank you for your time.","body":"It&#39;s resolved now. The issue was with the entropy. Installed haveged service and it started working. Thank you for your time."}],"owner":{"account_id":6800547,"reputation":29,"user_id":5233988,"display_name":"Umair Sayed"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1685526247,"creation_date":1685526247,"question_id":76372147,"body_markdown":"websocket-jetty-server 11.0.12 socket connection is breaking after 2 mins\r\n\r\nI am using websocket-jetty-server version 11.0.12 to use websocket.\r\nI wanted to use the java verion 17 so I upgraded websocket-jetty-server from 9.4.48.v20220622 to 11.0.12 \r\nNow, my socket connection is breaking after 2 mins and getting the below error message\r\n\r\norg.eclipse.jetty.websocket.api.exceptions.WebSocketTimeoutException: Connection Idle Timeout\r\n\r\nStrange thing is, it is working fine on my local Ubuntu VM but failing on RHEL machine.","title":"Why my socket connection is breaking after 2 mins after upgrading websocket-jetty-server from 9.4.48.v20220622 to 11.0.12?","body":"<p>websocket-jetty-server 11.0.12 socket connection is breaking after 2 mins</p>\n<p>I am using websocket-jetty-server version 11.0.12 to use websocket.\nI wanted to use the java verion 17 so I upgraded websocket-jetty-server from 9.4.48.v20220622 to 11.0.12\nNow, my socket connection is breaking after 2 mins and getting the below error message</p>\n<p>org.eclipse.jetty.websocket.api.exceptions.WebSocketTimeoutException: Connection Idle Timeout</p>\n<p>Strange thing is, it is working fine on my local Ubuntu VM but failing on RHEL machine.</p>\n"},{"tags":["java","pdf"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1685527255,"post_id":76372108,"comment_id":134671504,"body_markdown":"If you sign in append mode, the **ByteRange** entry will be part of the new incremental update which is appended at the end of the file. But out of interest, what difference does it make for you where that array is located?","body":"If you sign in append mode, the <b>ByteRange</b> entry will be part of the new incremental update which is appended at the end of the file. But out of interest, what difference does it make for you where that array is located?"},{"owner":{"account_id":24048244,"reputation":13,"user_id":18027026,"display_name":"zcnc"},"score":0,"creation_date":1685528232,"post_id":76372108,"comment_id":134671688,"body_markdown":"If there are 2 more than signs in a pdf file,those ByteRanges were all placed at the front of the pdf file, so it&#39;s difficult to determine the data range of each ByteRange","body":"If there are 2 more than signs in a pdf file,those ByteRanges were all placed at the front of the pdf file, so it&#39;s difficult to determine the data range of each ByteRange"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1685530485,"post_id":76372108,"comment_id":134672111,"body_markdown":"If you apply a second signature to a PDF, you **must** use append mode at least for the second signing unless invalidating the first signature is not an issue for you. Other than that, though, it is clear which byte ranges are related to which signature, simply follow the object references from the signature field dictionaries.","body":"If you apply a second signature to a PDF, you <b>must</b> use append mode at least for the second signing unless invalidating the first signature is not an issue for you. Other than that, though, it is clear which byte ranges are related to which signature, simply follow the object references from the signature field dictionaries."},{"owner":{"account_id":24048244,"reputation":13,"user_id":18027026,"display_name":"zcnc"},"score":0,"creation_date":1686821601,"post_id":76372108,"comment_id":134853186,"body_markdown":"Thanks for your reply,the problem was fixed.","body":"Thanks for your reply,the problem was fixed."}],"owner":{"account_id":24048244,"reputation":13,"user_id":18027026,"display_name":"zcnc"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685526038,"creation_date":1685526038,"question_id":76372108,"body_markdown":"I implemented interface com.itextpdf.signatures.IExternalSignatureContainer to sign a pdf file using Java,I found that the ByteRange was always placed at the front of the pdf file,but I want to place the ByteRange to the end of the pdf file,could anyone tell me how to do this.\r\n\r\nI tried to modify the method void modifySigningDictionary(PdfDictionary signDic),but it hasn&#39;t any effect","title":"How can I move the ByteRange from the front to the end of a PDF file using IExternalSignatureContainer in iTextPdf?","body":"<p>I implemented interface com.itextpdf.signatures.IExternalSignatureContainer to sign a pdf file using Java,I found that the ByteRange was always placed at the front of the pdf file,but I want to place the ByteRange to the end of the pdf file,could anyone tell me how to do this.</p>\n<p>I tried to modify the method void modifySigningDictionary(PdfDictionary signDic),but it hasn't any effect</p>\n"},{"tags":["java","android","arcore","sceneform","ply"],"owner":{"account_id":18232817,"reputation":11,"user_id":13271419,"display_name":"Sancy Devassy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685525862,"creation_date":1685513599,"question_id":76370632,"body_markdown":"I need to load .ply file instead of glb. Can anyone help me out with ways to load ply 3d models in arcore. i have attached a sample ply file here\r\n\r\nPly file : [1679314339602.ply][1]\r\n\r\n\r\n  [1]: https://unitear.s3.amazonaws.com/xr_assist/models/user_1019/1679314339602.ply","title":"How can I load ply file in arcore instead of glb","body":"<p>I need to load .ply file instead of glb. Can anyone help me out with ways to load ply 3d models in arcore. i have attached a sample ply file here</p>\n<p>Ply file : <a href=\"https://unitear.s3.amazonaws.com/xr_assist/models/user_1019/1679314339602.ply\" rel=\"nofollow noreferrer\">1679314339602.ply</a></p>\n"},{"tags":["java","laravel","authorization","pusher"],"comments":[{"owner":{"account_id":22117604,"reputation":21,"user_id":16371420,"display_name":"Nerdy Live"},"score":0,"creation_date":1685292034,"post_id":76346535,"comment_id":134638119,"body_markdown":"Please if anyone needs any more info don&#39;t hesitate to comment too","body":"Please if anyone needs any more info don&#39;t hesitate to comment too"}],"owner":{"account_id":22117604,"reputation":21,"user_id":16371420,"display_name":"Nerdy Live"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":216,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685525760,"creation_date":1685184682,"question_id":76346535,"body_markdown":"I need help with a Laravel application that uses Soketi and Java Pusher client to communicate with a Pusher server. I get a 403 error when I try to subscribe to a private channel using the Java Pusher client. The public channels work fine.\r\n\r\nHere are some details:\r\n\r\n- channels.php in Laravel:\r\n\r\n```php\r\n&lt;?php\r\n\r\nBroadcast::channel(&#39;private-{id}&#39;, function ($user) {\r\n\treturn true; // always return true for testing\r\n});\r\n```\r\n- BroadcastServiceProvider in Laravel:\r\n```php\r\nclass BroadcastServiceProvider extends ServiceProvider\r\n{\r\n\tpublic function boot(): void\r\n\t{\r\n\t\tBroadcast::routes([&#39;middleware&#39; =&gt; [&#39;auth:sanctum&#39;]]); // im using sanctum&#39;s tokens to authorize user\r\n\t\trequire base_path(&#39;routes/channels.php&#39;);\r\n\t}\r\n}\r\n```\r\n- Java Pusher client code:\r\n```\r\npublic PusherConnector(String bearer) {\r\n\ttry {\r\n\t\tPusherOptions options = new PusherOptions();\r\n\t\tHttpChannelAuthorizer channelAuthorizer = new HttpChannelAuthorizer(&quot;http://localhost/broadcasting/auth&quot;); // this is my broadcasting endpoint from Laravel&#39;s package\r\n\t\tHashMap&lt;String, String&gt; headers = new HashMap&lt;&gt;();\r\n\t\theaders.put(&quot;Authorization&quot;, &quot;Bearer &quot; + bearer); // bearer token from sanctum\r\n\t\tchannelAuthorizer.setHeaders(headers);\r\n\r\n\t\toptions.setHost(&quot;localhost&quot;)\r\n\t\t\t.setWsPort(6001).setUseTLS(false).setChannelAuthorizer(channelAuthorizer);\r\n\r\n\t\tPusher pusher = new Pusher(&quot;MY-PUSHER-APIKEY&quot;, options);\r\n\t\tpusher.connect(new ConnectionEventListener() {\r\n\t\t\t@Override\r\n\t\t\tpublic void onConnectionStateChange(ConnectionStateChange change) {\r\n\t\t\t\tSystem.out.println(&quot;Pusher&quot; + &quot;State changed from &quot; + change.getPreviousState() + &quot; to &quot; + change.getCurrentState());\r\n\t\t\t\tSystem.out.println(pusher.getConnection().getSocketId());\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void onError(String message, String code, Exception e) {\r\n\t\t\t\tSystem.out.println(&quot;Pusher&quot; + &quot;There was a problem connecting! &quot; + &quot;\\ncode: &quot; + code + &quot;\\nmessage: &quot; + message + &quot;\\nException: &quot; + e);\r\n\t\t\t}\r\n\t\t}, ConnectionState.ALL);\r\n\r\n\t\tPrivateChannel cn = pusher.subscribePrivate(&quot;private-&quot; + bearer, new PrivateChannelEventListener() {\r\n\t\t\t@Override\r\n\t\t\tpublic void onAuthenticationFailure(String s, Exception e) {\r\n\t\t\t\tSystem.out.println(&quot;Pusher&quot; + &quot;Authentication failed: &quot; + s);\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void onSubscriptionSucceeded(String s) {\r\n\t\t\t\tSystem.out.println(&quot;Pusher&quot; + &quot;Subscription succeeded: &quot; + s);\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void onEvent(PusherEvent pusherEvent) {\r\n\t\t\t\tSystem.out.println(&quot;Pusher&quot; + &quot; -&gt; Event received: &quot; + pusherEvent.getData());\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void onError(String message, Exception e) {\r\n\t\t\t\tPrivateChannelEventListener.super.onError(message, e);\r\n\t\t\t}\r\n\t\t});\r\n\t} catch (Exception e) {\r\n\t\te.printStackTrace();\r\n\t}\r\n}\r\n```\r\n- Output from the Java program:\r\n``\r\nPusherState changed from DISCONNECTED to CONNECTING\r\nnull // the socket id ( not yet connected )\r\nPusherState changed from CONNECTING to CONNECTED\r\n6069547637.4178363411 // the socket id\r\nPusherAuthentication failed: java.io.IOException: Server returned HTTP response code: 403 for URL: http://localhost/broadcasting/auth // the error\r\n``\r\n\r\n**I have tried removing the sanctumโs auth middleware but it still gives the same error. I have also verified that the sanctumโs authentication works well with other parts of Laravel. I donโt understand why I canโt subscribe to the private channel with authorization. Any ideas?**\r\n\r\n# ** EDIT! **\r\n## So I&#39;ve fixed it by watching the logics behind the laravel classes and tried to debug it by logging the requests, tried to modify the broadcasting&#39;s library code for debugging and heres what I&#39;ve changed to make it work:\r\n\r\n- the BroadcastServiceProvider\r\n```\r\n\t/**\r\n\t * Bootstrap any application services.\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tpublic function boot(): void\r\n\t{\r\n\t\trequire base_path(&#39;routes/channels.php&#39;);\r\n\t\tBroadcast::routes([&#39;middleware&#39; =&gt; [&quot;auth:sanctum&quot;]]); // to use the sanctum&#39;s auth and be able to get the current logged in user in the backend auth of Laravel&#39;s broadcasting\r\n\t}\r\n```\r\n\r\n- channels.php (Laravel&#39;s broadcasting channels file )\r\n```php\r\nRoute::middleware([&quot;auth:sanctum&quot;, TestyaMiddleware::class])-&gt;group(function () {\r\n// TestyaMiddleware is a custom middleware for debugging ( i will remove that from my code later )\r\n\tBroadcast::channel(&#39;{id}&#39;, function ($user, $id) { // also removed the &quot;private-&quot; or &quot;presence-&quot; prefix ( because its not needed )\r\n\t\treturn true;\r\n\t});\r\n});\r\n```\r\n\r\nThats all, i expect the problem happened because of the auth middleware isn&#39;t setted somewhere in the broadcasting channels route file or the broadcasting&#39;s auth route","title":"How to solve &#39;PusherAuthentication failed&#39; error when trying to subscribe to a private channel with authorization using Soketi and Java Pusher client?","body":"<p>I need help with a Laravel application that uses Soketi and Java Pusher client to communicate with a Pusher server. I get a 403 error when I try to subscribe to a private channel using the Java Pusher client. The public channels work fine.</p>\n<p>Here are some details:</p>\n<ul>\n<li>channels.php in Laravel:</li>\n</ul>\n<pre class=\"lang-php prettyprint-override\"><code>&lt;?php\n\nBroadcast::channel('private-{id}', function ($user) {\n    return true; // always return true for testing\n});\n</code></pre>\n<ul>\n<li>BroadcastServiceProvider in Laravel:</li>\n</ul>\n<pre class=\"lang-php prettyprint-override\"><code>class BroadcastServiceProvider extends ServiceProvider\n{\n    public function boot(): void\n    {\n        Broadcast::routes(['middleware' =&gt; ['auth:sanctum']]); // im using sanctum's tokens to authorize user\n        require base_path('routes/channels.php');\n    }\n}\n</code></pre>\n<ul>\n<li>Java Pusher client code:</li>\n</ul>\n<pre><code>public PusherConnector(String bearer) {\n    try {\n        PusherOptions options = new PusherOptions();\n        HttpChannelAuthorizer channelAuthorizer = new HttpChannelAuthorizer(&quot;http://localhost/broadcasting/auth&quot;); // this is my broadcasting endpoint from Laravel's package\n        HashMap&lt;String, String&gt; headers = new HashMap&lt;&gt;();\n        headers.put(&quot;Authorization&quot;, &quot;Bearer &quot; + bearer); // bearer token from sanctum\n        channelAuthorizer.setHeaders(headers);\n\n        options.setHost(&quot;localhost&quot;)\n            .setWsPort(6001).setUseTLS(false).setChannelAuthorizer(channelAuthorizer);\n\n        Pusher pusher = new Pusher(&quot;MY-PUSHER-APIKEY&quot;, options);\n        pusher.connect(new ConnectionEventListener() {\n            @Override\n            public void onConnectionStateChange(ConnectionStateChange change) {\n                System.out.println(&quot;Pusher&quot; + &quot;State changed from &quot; + change.getPreviousState() + &quot; to &quot; + change.getCurrentState());\n                System.out.println(pusher.getConnection().getSocketId());\n            }\n\n            @Override\n            public void onError(String message, String code, Exception e) {\n                System.out.println(&quot;Pusher&quot; + &quot;There was a problem connecting! &quot; + &quot;\\ncode: &quot; + code + &quot;\\nmessage: &quot; + message + &quot;\\nException: &quot; + e);\n            }\n        }, ConnectionState.ALL);\n\n        PrivateChannel cn = pusher.subscribePrivate(&quot;private-&quot; + bearer, new PrivateChannelEventListener() {\n            @Override\n            public void onAuthenticationFailure(String s, Exception e) {\n                System.out.println(&quot;Pusher&quot; + &quot;Authentication failed: &quot; + s);\n            }\n\n            @Override\n            public void onSubscriptionSucceeded(String s) {\n                System.out.println(&quot;Pusher&quot; + &quot;Subscription succeeded: &quot; + s);\n            }\n\n            @Override\n            public void onEvent(PusherEvent pusherEvent) {\n                System.out.println(&quot;Pusher&quot; + &quot; -&gt; Event received: &quot; + pusherEvent.getData());\n            }\n\n            @Override\n            public void onError(String message, Exception e) {\n                PrivateChannelEventListener.super.onError(message, e);\n            }\n        });\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<ul>\n<li>Output from the Java program:\n<code>PusherState changed from DISCONNECTED to CONNECTING null // the socket id ( not yet connected ) PusherState changed from CONNECTING to CONNECTED 6069547637.4178363411 // the socket id PusherAuthentication failed: java.io.IOException: Server returned HTTP response code: 403 for URL: http://localhost/broadcasting/auth // the error</code></li>\n</ul>\n<p><strong>I have tried removing the sanctumโs auth middleware but it still gives the same error. I have also verified that the sanctumโs authentication works well with other parts of Laravel. I donโt understand why I canโt subscribe to the private channel with authorization. Any ideas?</strong></p>\n<h1>** EDIT! **</h1>\n<h2>So I've fixed it by watching the logics behind the laravel classes and tried to debug it by logging the requests, tried to modify the broadcasting's library code for debugging and heres what I've changed to make it work:</h2>\n<ul>\n<li>the BroadcastServiceProvider</li>\n</ul>\n<pre><code>    /**\n     * Bootstrap any application services.\n     *\n     * @return void\n     */\n    public function boot(): void\n    {\n        require base_path('routes/channels.php');\n        Broadcast::routes(['middleware' =&gt; [&quot;auth:sanctum&quot;]]); // to use the sanctum's auth and be able to get the current logged in user in the backend auth of Laravel's broadcasting\n    }\n</code></pre>\n<ul>\n<li>channels.php (Laravel's broadcasting channels file )</li>\n</ul>\n<pre class=\"lang-php prettyprint-override\"><code>Route::middleware([&quot;auth:sanctum&quot;, TestyaMiddleware::class])-&gt;group(function () {\n// TestyaMiddleware is a custom middleware for debugging ( i will remove that from my code later )\n    Broadcast::channel('{id}', function ($user, $id) { // also removed the &quot;private-&quot; or &quot;presence-&quot; prefix ( because its not needed )\n        return true;\n    });\n});\n</code></pre>\n<p>Thats all, i expect the problem happened because of the auth middleware isn't setted somewhere in the broadcasting channels route file or the broadcasting's auth route</p>\n"},{"tags":["java","spring","mongodb","mongodb-query","spring-data-mongodb"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1685446100,"post_id":76364180,"comment_id":134657860,"body_markdown":"*we used to allow birth year, but we do not require it anymore* โฆ Does that mean you are only interested in the day/date of someones birthday without being interested in the actual age?","body":"<i>we used to allow birth year, but we do not require it anymore</i> โฆ Does that mean you are only interested in the day/date of someones birthday without being interested in the actual age?"},{"owner":{"account_id":18044530,"reputation":23,"user_id":13115866,"display_name":"LaplacesCat"},"score":0,"creation_date":1685447373,"post_id":76364180,"comment_id":134658131,"body_markdown":"yes, that is correct","body":"yes, that is correct"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1685447414,"post_id":76364180,"comment_id":134658137,"body_markdown":"I hope the last date of the desired result is a typo and should be `&quot;2003-12-08&quot;`โฆ","body":"I hope the last date of the desired result is a typo and should be <code>&quot;2003-12-08&quot;</code>โฆ"}],"answers":[{"comments":[{"owner":{"account_id":18044530,"reputation":23,"user_id":13115866,"display_name":"LaplacesCat"},"score":1,"creation_date":1685447803,"post_id":76364532,"comment_id":134658223,"body_markdown":"Sorry, can this be done using a MongoDB query, as the title suggested?","body":"Sorry, can this be done using a MongoDB query, as the title suggested?"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1685447969,"post_id":76364532,"comment_id":134658263,"body_markdown":"Does that mean the java tag is totally unrelated here?","body":"Does that mean the java tag is totally unrelated here?"},{"owner":{"account_id":18044530,"reputation":23,"user_id":13115866,"display_name":"LaplacesCat"},"score":1,"creation_date":1685448063,"post_id":76364532,"comment_id":134658290,"body_markdown":"No, because I am using Spring in Java, so I would appreciate code in it&#39;s syntax","body":"No, because I am using Spring in Java, so I would appreciate code in it&#39;s syntax"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1685450601,"post_id":76364532,"comment_id":134658949,"body_markdown":"Well, can&#39;t you simply `group by` month-of-year and day-of-month in the query? How does your query look at the moment? That&#39;s not shown in your questionโฆ","body":"Well, can&#39;t you simply <code>group by</code> month-of-year and day-of-month in the query? How does your query look at the moment? That&#39;s not shown in your questionโฆ"}],"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1685454153,"creation_date":1685447643,"answer_id":76364532,"question_id":76364180,"body_markdown":"### For sorting in Javaโฆ\r\nYou can write your own `Comparator`โฆ\r\n\r\n#### `Comparator&lt;LocalDate&gt;`\r\nIf you write a custom `Comparator&lt;LocalDate&gt;`, you can simply sort by a *sub-unit* or *part* of the `LocalDate`:  \r\nThe `MonthDay`, which only holds information about the day-of-month and the month-of-year and it is already implementing `Comparable&lt;MonthDay&gt;` exactly as desired.\r\n\r\n#### Code example\r\n```Java\r\npublic static void main(String[] args) {\r\n\t// create the list of Strings to be sorted\r\n\tList&lt;String&gt; birthdayStrings = List.of(\r\n\t\t\t\t&quot;2004-03-05&quot;,\r\n\t\t\t\t&quot;2001-03-03&quot;,\r\n\t\t\t\t&quot;2003-12-08&quot;,\r\n\t\t\t\t&quot;2015-10-08&quot;,\r\n\t\t\t\t&quot;1999-09-24&quot;,\r\n\t\t\t\t&quot;1999-07-16&quot;,\r\n\t\t\t\t&quot;2005-01-28&quot;\r\n\t\t\t);\r\n\t// map this list to a sortable one by parsing the Strings to LocalDates\r\n\tList&lt;LocalDate&gt; birthdays = birthdayStrings.stream()\r\n\t\t\t\t\t\t\t\t\t\t\t   .map(LocalDate::parse)\r\n\t\t\t\t\t\t\t\t\t\t\t   .collect(Collectors.toList());\r\n\t// print the list once\r\n\tbirthdays.forEach(System.out::println);\r\n\t// print some separator in order to visually separate the unsorted from the sorted result\r\n\tSystem.out.println(&quot;โ&quot;.repeat(12));\r\n\t// define a comparator for LocalDates that sorts by month-of-year first, then by day-of-month\r\n\tComparator&lt;LocalDate&gt; monthDayComp = new Comparator&lt;LocalDate&gt;() {\r\n\t\t@Override\r\n\t\tpublic int compare(LocalDate o1, LocalDate o2) {\r\n\t\t\t// simply sort by (already comparable) part of the LocalDate: MonthDay\r\n\t\t\treturn MonthDay.from(o1).compareTo(MonthDay.from(o2));\r\n\t\t}\r\n\t};\r\n\t// sort the list using the comparator\r\n\tbirthdays.sort(monthDayComp);\r\n\t// print the sorted list\r\n\tbirthdays.forEach(System.out::println);\r\n}\r\n```\r\n\r\n#### Output\r\n```none\r\n2004-03-05\r\n2001-03-03\r\n2003-12-08\r\n2015-10-08\r\n1999-09-24\r\n1999-07-16\r\n2005-01-28\r\nโโโโโโโโโโโโ\r\n2005-01-28\r\n2001-03-03\r\n2004-03-05\r\n1999-07-16\r\n1999-09-24\r\n2015-10-08\r\n2003-12-08\r\n```","title":"Sorting date field by Day and Month in a MongoDB Query in Spring","body":"<h3>For sorting in Javaโฆ</h3>\n<p>You can write your own <code>Comparator</code>โฆ</p>\n<h4><code>Comparator&lt;LocalDate&gt;</code></h4>\n<p>If you write a custom <code>Comparator&lt;LocalDate&gt;</code>, you can simply sort by a <em>sub-unit</em> or <em>part</em> of the <code>LocalDate</code>:<br />\nThe <code>MonthDay</code>, which only holds information about the day-of-month and the month-of-year and it is already implementing <code>Comparable&lt;MonthDay&gt;</code> exactly as desired.</p>\n<h4>Code example</h4>\n<pre><code>public static void main(String[] args) {\n    // create the list of Strings to be sorted\n    List&lt;String&gt; birthdayStrings = List.of(\n                &quot;2004-03-05&quot;,\n                &quot;2001-03-03&quot;,\n                &quot;2003-12-08&quot;,\n                &quot;2015-10-08&quot;,\n                &quot;1999-09-24&quot;,\n                &quot;1999-07-16&quot;,\n                &quot;2005-01-28&quot;\n            );\n    // map this list to a sortable one by parsing the Strings to LocalDates\n    List&lt;LocalDate&gt; birthdays = birthdayStrings.stream()\n                                               .map(LocalDate::parse)\n                                               .collect(Collectors.toList());\n    // print the list once\n    birthdays.forEach(System.out::println);\n    // print some separator in order to visually separate the unsorted from the sorted result\n    System.out.println(&quot;โ&quot;.repeat(12));\n    // define a comparator for LocalDates that sorts by month-of-year first, then by day-of-month\n    Comparator&lt;LocalDate&gt; monthDayComp = new Comparator&lt;LocalDate&gt;() {\n        @Override\n        public int compare(LocalDate o1, LocalDate o2) {\n            // simply sort by (already comparable) part of the LocalDate: MonthDay\n            return MonthDay.from(o1).compareTo(MonthDay.from(o2));\n        }\n    };\n    // sort the list using the comparator\n    birthdays.sort(monthDayComp);\n    // print the sorted list\n    birthdays.forEach(System.out::println);\n}\n</code></pre>\n<h4>Output</h4>\n<pre class=\"lang-none prettyprint-override\"><code>2004-03-05\n2001-03-03\n2003-12-08\n2015-10-08\n1999-09-24\n1999-07-16\n2005-01-28\nโโโโโโโโโโโโ\n2005-01-28\n2001-03-03\n2004-03-05\n1999-07-16\n1999-09-24\n2015-10-08\n2003-12-08\n</code></pre>\n"}],"owner":{"account_id":18044530,"reputation":23,"user_id":13115866,"display_name":"LaplacesCat"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1685525281,"creation_date":1685444917,"question_id":76364180,"body_markdown":"I wanted to sort the results of a query by a Date of Birth field, but while storing a garbage year value.\r\nThis is because, we used to allow birth year, but we do not require it anymore.\r\n\r\nI am using Spring in Java, with MongoDB as the database. \r\n\r\nThe data should be sorted like this:\r\n```\r\n1. 2004-03-05        7. 2005-01-28\r\n2. 2001-03-03        2. 2001-03-03\r\n3. 2003-12-08        1. 2004-03-05\r\n4. 2015-10-08   -&gt;   6. 1999-07-16\r\n5. 1999-09-24        5. 1999-09-24\r\n6. 1999-07-16        4. 2015-10-08\r\n7. 2005-01-28        3. 2003-12-08\r\n```\r\n\r\nThis is how I am currently sorting the query.\r\nI first sort by the specified field `sortingField`, and then by the `_id` of the object so that the data is always in the same order. In the case of my question, `sortingField = &quot;dob&quot;`\r\n\r\n```\r\nList&lt;Sort.Order&gt; sortList = new ArrayList&lt;&gt;();\r\n\r\nsortList.add(\r\n\tnew Sort.Order(\r\n\t\tsortDirection.compareToIgnoreCase(&quot;d&quot;) == 0\r\n\t\t\t\t? Sort.Direction.DESC\r\n\t\t\t\t: Sort.Direction.ASC,\r\n\t\tsortingField));\r\n\r\nsortList.add(new Sort.Order(Sort.Direction.ASC, &quot;_id&quot;));\r\n\r\nquery.with(Sort.by(sortList));\r\n```\r\n\r\nI then get the result using `List&lt;Customer&gt; = mongoTemplate.find(query, Customer.class);`\r\n\r\nIs this possible?","title":"Sorting date field by Day and Month in a MongoDB Query in Spring","body":"<p>I wanted to sort the results of a query by a Date of Birth field, but while storing a garbage year value.\nThis is because, we used to allow birth year, but we do not require it anymore.</p>\n<p>I am using Spring in Java, with MongoDB as the database.</p>\n<p>The data should be sorted like this:</p>\n<pre><code>1. 2004-03-05        7. 2005-01-28\n2. 2001-03-03        2. 2001-03-03\n3. 2003-12-08        1. 2004-03-05\n4. 2015-10-08   -&gt;   6. 1999-07-16\n5. 1999-09-24        5. 1999-09-24\n6. 1999-07-16        4. 2015-10-08\n7. 2005-01-28        3. 2003-12-08\n</code></pre>\n<p>This is how I am currently sorting the query.\nI first sort by the specified field <code>sortingField</code>, and then by the <code>_id</code> of the object so that the data is always in the same order. In the case of my question, <code>sortingField = &quot;dob&quot;</code></p>\n<pre><code>List&lt;Sort.Order&gt; sortList = new ArrayList&lt;&gt;();\n\nsortList.add(\n    new Sort.Order(\n        sortDirection.compareToIgnoreCase(&quot;d&quot;) == 0\n                ? Sort.Direction.DESC\n                : Sort.Direction.ASC,\n        sortingField));\n\nsortList.add(new Sort.Order(Sort.Direction.ASC, &quot;_id&quot;));\n\nquery.with(Sort.by(sortList));\n</code></pre>\n<p>I then get the result using <code>List&lt;Customer&gt; = mongoTemplate.find(query, Customer.class);</code></p>\n<p>Is this possible?</p>\n"},{"tags":["java","android-studio","google-play-console","android-keystore"],"owner":{"account_id":12091301,"reputation":81,"user_id":8837332,"display_name":"Scott van Duin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685525211,"creation_date":1685524622,"question_id":76371934,"body_markdown":"I have a Java application in Android Studio which includes a mobile and a wear directory. I want both of them uploaded for internal testing, and the mobile app works fine.\r\n\r\nI just added an extra release track for the wear app, but when I try to sign it with the generated zip from the pepk tool it says I should upload a valid key and that the uploadkey and implementation key should be different.\r\n\r\nI&#39;ve tried uploading the same zip file used to sign the mobile .aab, and also tried generating a new one with the same keystore. I was told to use the same keystore, but it the signing doesn&#39;t seem to work. How do I solve this?","title":"How do I sign my wearOS app with the same keystore as my mobile app?","body":"<p>I have a Java application in Android Studio which includes a mobile and a wear directory. I want both of them uploaded for internal testing, and the mobile app works fine.</p>\n<p>I just added an extra release track for the wear app, but when I try to sign it with the generated zip from the pepk tool it says I should upload a valid key and that the uploadkey and implementation key should be different.</p>\n<p>I've tried uploading the same zip file used to sign the mobile .aab, and also tried generating a new one with the same keystore. I was told to use the same keystore, but it the signing doesn't seem to work. How do I solve this?</p>\n"},{"tags":["java","enums","vaadin","converters","vaadin-flow"],"comments":[{"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"score":1,"creation_date":1685523666,"post_id":76371543,"comment_id":134670749,"body_markdown":"&quot;but it does not seem to work like expected.&quot;, could you describe in more detail what is not working as expected, how would you expect it to work?","body":"&quot;but it does not seem to work like expected.&quot;, could you describe in more detail what is not working as expected, how would you expect it to work?"}],"answers":[{"comments":[{"owner":{"account_id":28717065,"reputation":11,"user_id":21991481,"display_name":"NaoMon"},"score":0,"creation_date":1685524847,"post_id":76371838,"comment_id":134670975,"body_markdown":"Using a read-only combobox has exactly the same effect and works without a converter, thank you very much.","body":"Using a read-only combobox has exactly the same effect and works without a converter, thank you very much."}],"tags":[],"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1685523987,"creation_date":1685523987,"answer_id":76371838,"question_id":76371543,"body_markdown":"Binding `TextField` to `Enum` with `Converter` should work, although from user experience perspective I would not use `TextField` with `Enum&#39;s`. Conversion from arbitrary inputs will produce null or empty string, if user makes a typo. I would prefer `ComboBox` or `Select` instead, see simple example\r\n\r\n        ComboBox&lt;UserRole&gt; role = new ComboBox&lt;&gt;(\r\n                &quot;Role&quot;);\r\n        role.setItems(UserRole.values());","title":"How can I use Enum values in Vaadin UI components, and why isn&#39;t my custom converter working as expected?","body":"<p>Binding <code>TextField</code> to <code>Enum</code> with <code>Converter</code> should work, although from user experience perspective I would not use <code>TextField</code> with <code>Enum's</code>. Conversion from arbitrary inputs will produce null or empty string, if user makes a typo. I would prefer <code>ComboBox</code> or <code>Select</code> instead, see simple example</p>\n<pre><code>    ComboBox&lt;UserRole&gt; role = new ComboBox&lt;&gt;(\n            &quot;Role&quot;);\n    role.setItems(UserRole.values());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7372513,"reputation":951,"user_id":5612275,"display_name":"Marco C"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1685524111,"creation_date":1685524111,"answer_id":76371865,"question_id":76371543,"body_markdown":"It looks like your converter implementation is &quot;inverted&quot;.\r\nThe Converter interface is defined as `Converter&lt;PRESENTATION, MODEL&gt;`, so in your case `PRESENTATION` should be `String` and `MODEL` the enum.\r\n\r\nPut simply, `PRESENTATION` is what you see in the TextField, `MODEL` is the type you use in the application\r\n\r\n`class StringToEnumConverter&lt;T extends Enum&lt;T&gt;&gt; implements Converter&lt;String, T&gt;`","title":"How can I use Enum values in Vaadin UI components, and why isn&#39;t my custom converter working as expected?","body":"<p>It looks like your converter implementation is &quot;inverted&quot;.\nThe Converter interface is defined as <code>Converter&lt;PRESENTATION, MODEL&gt;</code>, so in your case <code>PRESENTATION</code> should be <code>String</code> and <code>MODEL</code> the enum.</p>\n<p>Put simply, <code>PRESENTATION</code> is what you see in the TextField, <code>MODEL</code> is the type you use in the application</p>\n<p><code>class StringToEnumConverter&lt;T extends Enum&lt;T&gt;&gt; implements Converter&lt;String, T&gt;</code></p>\n"}],"owner":{"account_id":28717065,"reputation":11,"user_id":21991481,"display_name":"NaoMon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1685524984,"creation_date":1685521530,"question_id":76371543,"body_markdown":"Using Vaadin 24.\r\n\r\nI am trying to put Enum names into Textfields (which only accept Strings) with a custom converter, but it does not seem to work like expected.\r\n\r\nIs there maybe some better way to use Enum Values in UI Components?\r\n\r\n\r\n\r\nI am using the converter like this:\r\n\r\nBut i am a bit confused that theres a difference between the documentation: https://vaadin.com/docs/latest/binding-data/components-binder-validation\r\n\r\nWhich describes the 2 Methods:\r\n\r\nYou need to implement two methods from the Converter interface:\r\n\r\nconvertToModel() receives a value that originates from the user.\r\nThe method returns a Result that contains either a converted value or a conversion error message.\r\n\r\nconvertToPresentation() receives a value that originates from the business object.\r\nThis method returns the converted value directly. Itโs assumed that the business object contains only valid values.\r\n\r\nhttps://github.com/vaadin/flow/blob/main/flow-data/src/main/java/com/vaadin/flow/data/converter/StringToLongConverter.java\r\n\r\nI would expect that the converter calls the right Method depending on what input type it gets, but either my implementation or my tought process is wrong.\r\n\r\n```\r\nimport com.vaadin.flow.data.binder.Result;\r\nimport com.vaadin.flow.data.binder.ValueContext;\r\nimport com.vaadin.flow.data.converter.Converter;\r\n\r\npublic class EnumToStringConverter&lt;T extends Enum&lt;T&gt;&gt; implements Converter&lt;T, String&gt; {\r\n    private final Class&lt;T&gt; enumClass;\r\n\r\n    public EnumToStringConverter(Class&lt;T&gt; enumClass) {\r\n        this.enumClass = enumClass;\r\n    }\r\n\r\n    @Override\r\n    public Result&lt;String&gt; convertToModel(T enumValue, ValueContext context) {\r\n        try {\r\n            return Result.ok(enumValue.name());\r\n        } catch (IllegalArgumentException e) {\r\n            return Result.error(&quot;Invalid enum value&quot;);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public T convertToPresentation(String fieldValue, ValueContext context) {\r\n        return Enum.valueOf(enumClass, fieldValue.toUpperCase());\r\n    }\r\n}\r\n```\r\n\r\n\r\n```\r\n// Convert Role as Enum to String for TextField\r\nbinder.forField(userRole)\r\n    .withConverter(new EnumToStringConverter&lt;&gt;(UserRole.class))\r\n    .bind(Users::getUserRole, Users::setUserRole);\r\n```\r\n\r\n\r\nEDIT:\r\n\r\nI switched to using a read-only combobox for my component, which works like a charm now.","title":"How can I use Enum values in Vaadin UI components, and why isn&#39;t my custom converter working as expected?","body":"<p>Using Vaadin 24.</p>\n<p>I am trying to put Enum names into Textfields (which only accept Strings) with a custom converter, but it does not seem to work like expected.</p>\n<p>Is there maybe some better way to use Enum Values in UI Components?</p>\n<p>I am using the converter like this:</p>\n<p>But i am a bit confused that theres a difference between the documentation: <a href=\"https://vaadin.com/docs/latest/binding-data/components-binder-validation\" rel=\"nofollow noreferrer\">https://vaadin.com/docs/latest/binding-data/components-binder-validation</a></p>\n<p>Which describes the 2 Methods:</p>\n<p>You need to implement two methods from the Converter interface:</p>\n<p>convertToModel() receives a value that originates from the user.\nThe method returns a Result that contains either a converted value or a conversion error message.</p>\n<p>convertToPresentation() receives a value that originates from the business object.\nThis method returns the converted value directly. Itโs assumed that the business object contains only valid values.</p>\n<p><a href=\"https://github.com/vaadin/flow/blob/main/flow-data/src/main/java/com/vaadin/flow/data/converter/StringToLongConverter.java\" rel=\"nofollow noreferrer\">https://github.com/vaadin/flow/blob/main/flow-data/src/main/java/com/vaadin/flow/data/converter/StringToLongConverter.java</a></p>\n<p>I would expect that the converter calls the right Method depending on what input type it gets, but either my implementation or my tought process is wrong.</p>\n<pre><code>import com.vaadin.flow.data.binder.Result;\nimport com.vaadin.flow.data.binder.ValueContext;\nimport com.vaadin.flow.data.converter.Converter;\n\npublic class EnumToStringConverter&lt;T extends Enum&lt;T&gt;&gt; implements Converter&lt;T, String&gt; {\n    private final Class&lt;T&gt; enumClass;\n\n    public EnumToStringConverter(Class&lt;T&gt; enumClass) {\n        this.enumClass = enumClass;\n    }\n\n    @Override\n    public Result&lt;String&gt; convertToModel(T enumValue, ValueContext context) {\n        try {\n            return Result.ok(enumValue.name());\n        } catch (IllegalArgumentException e) {\n            return Result.error(&quot;Invalid enum value&quot;);\n        }\n    }\n\n    @Override\n    public T convertToPresentation(String fieldValue, ValueContext context) {\n        return Enum.valueOf(enumClass, fieldValue.toUpperCase());\n    }\n}\n</code></pre>\n<pre><code>// Convert Role as Enum to String for TextField\nbinder.forField(userRole)\n    .withConverter(new EnumToStringConverter&lt;&gt;(UserRole.class))\n    .bind(Users::getUserRole, Users::setUserRole);\n</code></pre>\n<p>EDIT:</p>\n<p>I switched to using a read-only combobox for my component, which works like a charm now.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","repository","crud"],"comments":[{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":1,"creation_date":1685457491,"post_id":76365761,"comment_id":134660812,"body_markdown":"Please don&#39;t post source code as image but formatted text only.","body":"Please don&#39;t post source code as image but formatted text only."}],"answers":[{"comments":[{"owner":{"account_id":3619499,"reputation":5613,"user_id":3018627,"display_name":"Subarata Talukder"},"score":0,"creation_date":1685523781,"post_id":76365820,"comment_id":134670770,"body_markdown":"Explanation given by updated previous code. Check pls.","body":"Explanation given by updated previous code. Check pls."}],"tags":[],"owner":{"account_id":3619499,"reputation":5613,"user_id":3018627,"display_name":"Subarata Talukder"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685523710,"creation_date":1685456489,"answer_id":76365820,"question_id":76365761,"body_markdown":"Suppose you have a **User** model and a corresponding repository name **UserRepository**:\r\n\r\n    public interface UserRepository extends CrudRepository&lt;User, Long&gt; {}\r\n     \r\nNow create an instance of this UserRepository like:\r\n\r\n    @Autowired\r\n    private UserRepository userRepo;\r\n\r\nThen update your User data:\r\n\r\n    var user = userRepo.findById(id).orElseThrow();\r\n    user.setName(name); // password or email\r\n    userRepo.save(user);\r\n\r\n**Note**: CrudRepository interface has  **Optional&lt;T&gt; findById(ID id)** method definition.\r\nSince Optional reference, If no user found it throws an exception, use orElseThrow().","title":"What is the correct approach to update only specific fields in Spring Boot using Spring Data JPA repository?","body":"<p>Suppose you have a <strong>User</strong> model and a corresponding repository name <strong>UserRepository</strong>:</p>\n<pre><code>public interface UserRepository extends CrudRepository&lt;User, Long&gt; {}\n \n</code></pre>\n<p>Now create an instance of this UserRepository like:</p>\n<pre><code>@Autowired\nprivate UserRepository userRepo;\n</code></pre>\n<p>Then update your User data:</p>\n<pre><code>var user = userRepo.findById(id).orElseThrow();\nuser.setName(name); // password or email\nuserRepo.save(user);\n</code></pre>\n<p><strong>Note</strong>: CrudRepository interface has  <strong>Optional findById(ID id)</strong> method definition.\nSince Optional reference, If no user found it throws an exception, use orElseThrow().</p>\n"}],"owner":{"account_id":20299330,"reputation":19,"user_id":14889133,"display_name":"Deniz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":307,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1685523710,"creation_date":1685456042,"question_id":76365761,"body_markdown":"[![this is my update method](https://i.stack.imgur.com/IbO5S.png)](https://i.stack.imgur.com/IbO5S.png)\r\n[![my update request class](https://i.stack.imgur.com/BdJg4.png)](https://i.stack.imgur.com/BdJg4.png)\r\n[![and my modelmapper forRequest](https://i.stack.imgur.com/zGwW4.png)](https://i.stack.imgur.com/zGwW4.png)\r\n[![and controller](https://i.stack.imgur.com/lgh9R.png)](https://i.stack.imgur.com/lgh9R.png)\r\n\r\nI just want to update just some field.\r\n\r\n For example; just name or password or gmail but when ฤฑ try to add just one field, other datas is being recorded null. How can ฤฑ solve this problem? Should ฤฑ try to add @Query for my repository ? ","title":"What is the correct approach to update only specific fields in Spring Boot using Spring Data JPA repository?","body":"<p><a href=\"https://i.stack.imgur.com/IbO5S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IbO5S.png\" alt=\"this is my update method\" /></a>\n<a href=\"https://i.stack.imgur.com/BdJg4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BdJg4.png\" alt=\"my update request class\" /></a>\n<a href=\"https://i.stack.imgur.com/zGwW4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zGwW4.png\" alt=\"and my modelmapper forRequest\" /></a>\n<a href=\"https://i.stack.imgur.com/lgh9R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lgh9R.png\" alt=\"and controller\" /></a></p>\n<p>I just want to update just some field.</p>\n<p>For example; just name or password or gmail but when ฤฑ try to add just one field, other datas is being recorded null. How can ฤฑ solve this problem? Should ฤฑ try to add @Query for my repository ?</p>\n"},{"tags":["java","synchronized","memory-mapped-files"],"comments":[{"owner":{"account_id":918256,"reputation":1641,"user_id":950558,"display_name":"Bastien Aracil"},"score":2,"creation_date":1685438734,"post_id":76363271,"comment_id":134656260,"body_markdown":"Since you use two or more different Java applications, synchronized block will not work (the synchronisation is only for the same application). You might find what you want in the method lock() and tryLock() of the FileChannel class. At least this could be a good starting point.","body":"Since you use two or more different Java applications, synchronized block will not work (the synchronisation is only for the same application). You might find what you want in the method lock() and tryLock() of the FileChannel class. At least this could be a good starting point."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1685519123,"post_id":76363271,"comment_id":134669725,"body_markdown":"Use file locks. That&#39;s what they&#39;re for.","body":"Use file locks. That&#39;s what they&#39;re for."},{"owner":{"account_id":179202,"reputation":7876,"user_id":411709,"accept_rate":75,"display_name":"Abidi"},"score":0,"creation_date":1685649389,"post_id":76363271,"comment_id":134694053,"body_markdown":"@user207421 How would file locks help here? For example, if producer locks both files and writes data, unlocks one file and before it unlocks second, let us context switching happens. Now reader will be able to read data from the unlocked file, which is going to be out of sync because second file isn&#39;t updated yet.","body":"@user207421 How would file locks help here? For example, if producer locks both files and writes data, unlocks one file and before it unlocks second, let us context switching happens. Now reader will be able to read data from the unlocked file, which is going to be out of sync because second file isn&#39;t updated yet."}],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1685519095,"post_id":76363401,"comment_id":134669720,"body_markdown":"Why don&#39;t think locks will work if both applications keep the file open continuously? What exactly do you think they are for, if not for that?","body":"Why don&#39;t think locks will work if both applications keep the file open continuously? What exactly do you think they are for, if not for that?"},{"owner":{"account_id":18868,"reputation":82004,"user_id":43681,"accept_rate":70,"display_name":"sleske"},"score":0,"creation_date":1685523516,"post_id":76363401,"comment_id":134670719,"body_markdown":"@user207421: True, the file can be kept open, it must just be unlocked. I edited to clarify.","body":"@user207421: True, the file can be kept open, it must just be unlocked. I edited to clarify."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1685527212,"post_id":76363401,"comment_id":134671488,"body_markdown":"Of course it must be unlocked. That doesn&#39;t explain why you claimed &#39; I don&#39;t think this will work if both applications keep the file open continuously.&#39; And don&#39;t conflate correction with clarification.","body":"Of course it must be unlocked. That doesn&#39;t explain why you claimed &#39; I don&#39;t think this will work if both applications keep the file open continuously.&#39; And don&#39;t conflate correction with clarification."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1685527622,"post_id":76363401,"comment_id":134671564,"body_markdown":"To prevent further misunderstandings: *synchronized does not produce atomicity at all*. Even within the same JVM, other threads can see the non-atomicity of the writes, unless they are precluded by using `synchronized` *with the same object*. It should be clear to every developer that a thread in different JVM canโt synchronize on the same object. So in the OPโs scenario without any other thread that could synchronize on the same object, the `synchronized` has no effect at all.","body":"To prevent further misunderstandings: <i>synchronized does not produce atomicity at all</i>. Even within the same JVM, other threads can see the non-atomicity of the writes, unless they are precluded by using <code>synchronized</code> <i>with the same object</i>. It should be clear to every developer that a thread in different JVM canโt synchronize on the same object. So in the OPโs scenario without any other thread that could synchronize on the same object, the <code>synchronized</code> has no effect at all."},{"owner":{"account_id":18868,"reputation":82004,"user_id":43681,"accept_rate":70,"display_name":"sleske"},"score":0,"creation_date":1685529131,"post_id":76363401,"comment_id":134671852,"body_markdown":"@user207421: Yes, the first version was in error. I corrected it. Feel free to re-edit.","body":"@user207421: Yes, the first version was in error. I corrected it. Feel free to re-edit."}],"tags":[],"owner":{"account_id":18868,"reputation":82004,"user_id":43681,"accept_rate":70,"display_name":"sleske"},"comment_count":5,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1685523659,"creation_date":1685438742,"answer_id":76363401,"question_id":76363271,"body_markdown":"&gt; I would like to make writing to both buffers atomic/transactional so\r\n&gt; application reading the files either sees both changes or none.\r\n&gt; Does Java synchronize atomicity help here if writer writes to both\r\n&gt; buffers inside a synchronised block?\r\n\r\nNo, not at all. The `synchronized` only works _inside one JVM_. It does not do any type of synchronization for filesystem operations - which is what you would need here.\r\n\r\nAs to &quot;make writing to both buffers atomic/transactional&quot; - I don&#39;t think this is possible. Any guarantee for atomicity would have to come from the file system, and most do not provide such guarantees. Some filesystems and operating systems have limited guarantees, but that will depend on the specific filesystem in use (and its configuration).\r\n\r\nSo you will have to find a different solution.\r\n\r\nSome alternative solutions that come to mind:\r\n* You could [lock the file][1] - that would block the second application from also locking it. Both programs would need to lock the file whenever they want to read or write, so both programs cannot interfere - probably a shared lock for reading, and an exclusive lock for writing. See this question about details: https://stackoverflow.com/questions/128038/how-can-i-lock-a-file-using-java-if-possible\r\n* Use several files and renaming - this is what many server applications do. Basically, you write the data under a temporary file name, and rename the file once you are done. Renaming is (usually) atomic, so this should be safe. The receiving application may only read the finished files, usually by adopting some naming convention. The [maildir][2] email storage format for example uses such a system.\r\n* The best solution probably is not to communicate using shared files, but use a dedicated service instead - maybe some type of database, or a messaging bus, such as [Apache Kafka][3] or [RabbitMQ][4].\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/File_locking\r\n  [2]: https://en.wikipedia.org/wiki/Maildir\r\n  [3]: https://en.wikipedia.org/wiki/Apache_Kafka\r\n  [4]: https://en.wikipedia.org/wiki/RabbitMQ","title":"Java Synchronisation Atomicity","body":"<blockquote>\n<p>I would like to make writing to both buffers atomic/transactional so\napplication reading the files either sees both changes or none.\nDoes Java synchronize atomicity help here if writer writes to both\nbuffers inside a synchronised block?</p>\n</blockquote>\n<p>No, not at all. The <code>synchronized</code> only works <em>inside one JVM</em>. It does not do any type of synchronization for filesystem operations - which is what you would need here.</p>\n<p>As to &quot;make writing to both buffers atomic/transactional&quot; - I don't think this is possible. Any guarantee for atomicity would have to come from the file system, and most do not provide such guarantees. Some filesystems and operating systems have limited guarantees, but that will depend on the specific filesystem in use (and its configuration).</p>\n<p>So you will have to find a different solution.</p>\n<p>Some alternative solutions that come to mind:</p>\n<ul>\n<li>You could <a href=\"https://en.wikipedia.org/wiki/File_locking\" rel=\"nofollow noreferrer\">lock the file</a> - that would block the second application from also locking it. Both programs would need to lock the file whenever they want to read or write, so both programs cannot interfere - probably a shared lock for reading, and an exclusive lock for writing. See this question about details: <a href=\"https://stackoverflow.com/questions/128038/how-can-i-lock-a-file-using-java-if-possible\">How can I lock a file using java (if possible)</a></li>\n<li>Use several files and renaming - this is what many server applications do. Basically, you write the data under a temporary file name, and rename the file once you are done. Renaming is (usually) atomic, so this should be safe. The receiving application may only read the finished files, usually by adopting some naming convention. The <a href=\"https://en.wikipedia.org/wiki/Maildir\" rel=\"nofollow noreferrer\">maildir</a> email storage format for example uses such a system.</li>\n<li>The best solution probably is not to communicate using shared files, but use a dedicated service instead - maybe some type of database, or a messaging bus, such as <a href=\"https://en.wikipedia.org/wiki/Apache_Kafka\" rel=\"nofollow noreferrer\">Apache Kafka</a> or <a href=\"https://en.wikipedia.org/wiki/RabbitMQ\" rel=\"nofollow noreferrer\">RabbitMQ</a>.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1685519246,"post_id":76363634,"comment_id":134669758,"body_markdown":"You don&#39;t appear to have heard of file locks, by which I do not mean lock files.","body":"You don&#39;t appear to have heard of file locks, by which I do not mean lock files."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1685536276,"post_id":76363634,"comment_id":134673486,"body_markdown":"@user207421 Feel free to elaborate or write an answer then, instead of just adding a bit of a sneer.","body":"@user207421 Feel free to elaborate or write an answer then, instead of just adding a bit of a sneer."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1685440440,"creation_date":1685440440,"answer_id":76363634,"question_id":76363271,"body_markdown":"The usual atomicity systems in java (such as `synchronized`, `volatile`, the &quot;Java Memory Model&quot; section of the Java Language Specification, classes like `AtomicInteger`, and any guarantees about atomicity provided by the spec as written in the javadoc of concurrency-relevant types, such as `ConcurrentHashMap`) __all__ cover atomicity __within__ a single JVM.\r\n\r\nYou&#39;re working on multiple JVMs so none of those guarantees hold.\r\n\r\nYou have a few options.\r\n\r\n## The obvious option - filesystem\r\n\r\nThe filesystem is commonly used as vehicle for inter-process atomicity, and java fully supports doing this:\r\n\r\n```\r\nPath p = Paths.get(&quot;/path/to/some/lockfile&quot;);\r\nFiles.createFile(p);\r\n```\r\n\r\nThe `createFile` API __guarantees atomicity__ - either that call succeeds in which case the file did not exist before but exists now, and that act was atomic (i.e. if 2 processes simultaneously execute `createFile` on the same path, at most one could possibly succeed).\r\n\r\nMore generally any of the &#39;create a file&#39; calls on the `Files` class can do this, e.g. also `Files.move` can do this, which is fantastic for the idea of creating a file _with content_ atomically (the above code makes an empty file): Create a file somewhere with a different temporary name, then `Files.move` it into the right name, asking for atomicity.\r\n\r\nTo do this, you pass the ATOMIC option:\r\n\r\n```\r\nPath p = someTempFile;\r\nPath target = someTarget;\r\n// code to fill p. Use try-with!\r\nFiles.move(p, target, StandardCopyOption.ATOMIC_MOVE);\r\n```\r\n\r\nIf you are using a file system that doesn&#39;t support atomic operations, you&#39;ll get an exception that states this.\r\n\r\nThe major problem with this is - files outlast your JVM. So if you create a lock file and then your JVM hardcrashes, the lock file remains. You can add a runtime hook (with `Runtime.getRuntime().addShutdownHook(new Thread(() -&gt; { try { deleteLockFile(); } catch (Exception ignore) { } }));`). This still won&#39;t work if your system is suddenly powered off or your JVM core dumps.\r\n\r\nThis is a problem all lock file based systems struggle with; generally on boot you check for the existence of the file and make some remark to the user that perhaps they wish to clean it out and printing the path to it. You can get fancy and include your PID or a timestamp when creating the lock file (but, remember, ONLY file creation can be atomic, to create a file atomically __with content__, you make the file in some temporary location and `Files.move` with the ATOMIC_MOVE flag).\r\n\r\n## ports\r\n\r\nYou can open an internet server port; only one process can do this and this too is atomic. If the port is already open you can even chat with the &#39;other&#39; JVM which could be useful. There are no particular ATOMIC flags you need to pass, just follow any tutorial on opening TCP/IP ports. You will have to pick some port number between 1024 and 40000 and hope nobody else also picked that number, though.\r\n\r\n## Use an external system for the act\r\n\r\nFor example, if both JVMs talk to a single database, database have tons of ways to do things atomically; for example, psql has [advisory locks](https://www.postgresql.org/docs/current/explicit-locking.html#ADVISORY-LOCKS) which are specifically designed for application locks.","title":"Java Synchronisation Atomicity","body":"<p>The usual atomicity systems in java (such as <code>synchronized</code>, <code>volatile</code>, the &quot;Java Memory Model&quot; section of the Java Language Specification, classes like <code>AtomicInteger</code>, and any guarantees about atomicity provided by the spec as written in the javadoc of concurrency-relevant types, such as <code>ConcurrentHashMap</code>) <strong>all</strong> cover atomicity <strong>within</strong> a single JVM.</p>\n<p>You're working on multiple JVMs so none of those guarantees hold.</p>\n<p>You have a few options.</p>\n<h2>The obvious option - filesystem</h2>\n<p>The filesystem is commonly used as vehicle for inter-process atomicity, and java fully supports doing this:</p>\n<pre><code>Path p = Paths.get(&quot;/path/to/some/lockfile&quot;);\nFiles.createFile(p);\n</code></pre>\n<p>The <code>createFile</code> API <strong>guarantees atomicity</strong> - either that call succeeds in which case the file did not exist before but exists now, and that act was atomic (i.e. if 2 processes simultaneously execute <code>createFile</code> on the same path, at most one could possibly succeed).</p>\n<p>More generally any of the 'create a file' calls on the <code>Files</code> class can do this, e.g. also <code>Files.move</code> can do this, which is fantastic for the idea of creating a file <em>with content</em> atomically (the above code makes an empty file): Create a file somewhere with a different temporary name, then <code>Files.move</code> it into the right name, asking for atomicity.</p>\n<p>To do this, you pass the ATOMIC option:</p>\n<pre><code>Path p = someTempFile;\nPath target = someTarget;\n// code to fill p. Use try-with!\nFiles.move(p, target, StandardCopyOption.ATOMIC_MOVE);\n</code></pre>\n<p>If you are using a file system that doesn't support atomic operations, you'll get an exception that states this.</p>\n<p>The major problem with this is - files outlast your JVM. So if you create a lock file and then your JVM hardcrashes, the lock file remains. You can add a runtime hook (with <code>Runtime.getRuntime().addShutdownHook(new Thread(() -&gt; { try { deleteLockFile(); } catch (Exception ignore) { } }));</code>). This still won't work if your system is suddenly powered off or your JVM core dumps.</p>\n<p>This is a problem all lock file based systems struggle with; generally on boot you check for the existence of the file and make some remark to the user that perhaps they wish to clean it out and printing the path to it. You can get fancy and include your PID or a timestamp when creating the lock file (but, remember, ONLY file creation can be atomic, to create a file atomically <strong>with content</strong>, you make the file in some temporary location and <code>Files.move</code> with the ATOMIC_MOVE flag).</p>\n<h2>ports</h2>\n<p>You can open an internet server port; only one process can do this and this too is atomic. If the port is already open you can even chat with the 'other' JVM which could be useful. There are no particular ATOMIC flags you need to pass, just follow any tutorial on opening TCP/IP ports. You will have to pick some port number between 1024 and 40000 and hope nobody else also picked that number, though.</p>\n<h2>Use an external system for the act</h2>\n<p>For example, if both JVMs talk to a single database, database have tons of ways to do things atomically; for example, psql has <a href=\"https://www.postgresql.org/docs/current/explicit-locking.html#ADVISORY-LOCKS\" rel=\"nofollow noreferrer\">advisory locks</a> which are specifically designed for application locks.</p>\n"}],"owner":{"account_id":179202,"reputation":7876,"user_id":411709,"accept_rate":75,"display_name":"Abidi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1685523659,"creation_date":1685437774,"question_id":76363271,"body_markdown":"My single-threaded application writes to two memory mapped byte buffers (backed by two memory mapped files) Another Java application is reading from these files.  I would like to make writing to both buffers atomic/transactional so application reading the files either sees both changes or none. Does Java synchronize atomicity help here if writer writes to both buffers inside a synchronised block? Iโm a bit skeptical about using synchronised keyword to ensure atomicity for variables (buffers) backed by external storage (files). \r\n\r\nEdit: I understand, synchronized block isn&#39;t supposed to work between JVMs. My question is more about one JVM atomically calling two putLong() on two MappedByteBuffer instance variables. By doing this, as far as this JVM is concerned, it has done the job to atomically write in two buffers. Now it&#39;s up to underlying OS&#39;s implementation of memory-mapped-file, how/when it takes those Longs from the buffers and writes to the host files. Whenever values from these buffers are read to be written to files, at least either both buffers would have been updated or none. Hopefully, this would help understand my question.\r\n\r\n     MappedByteBuffer buffer1 = fileChannel1.map(READ_WRITE, 0, Integer.MAX_VALUE);\r\n     MappedByteBuffer buffer2 = fileChannel2.map(READ_WRITE, 0, Integer.MAX_VALUE);\r\n\r\n...\r\n    \r\n            synchronized (ATOMIC_LOCK) {\r\n                buffer1.putLong(index, value1);\r\n                buffer2.putLong(index, value2);\r\n            }","title":"Java Synchronisation Atomicity","body":"<p>My single-threaded application writes to two memory mapped byte buffers (backed by two memory mapped files) Another Java application is reading from these files.  I would like to make writing to both buffers atomic/transactional so application reading the files either sees both changes or none. Does Java synchronize atomicity help here if writer writes to both buffers inside a synchronised block? Iโm a bit skeptical about using synchronised keyword to ensure atomicity for variables (buffers) backed by external storage (files).</p>\n<p>Edit: I understand, synchronized block isn't supposed to work between JVMs. My question is more about one JVM atomically calling two putLong() on two MappedByteBuffer instance variables. By doing this, as far as this JVM is concerned, it has done the job to atomically write in two buffers. Now it's up to underlying OS's implementation of memory-mapped-file, how/when it takes those Longs from the buffers and writes to the host files. Whenever values from these buffers are read to be written to files, at least either both buffers would have been updated or none. Hopefully, this would help understand my question.</p>\n<pre><code> MappedByteBuffer buffer1 = fileChannel1.map(READ_WRITE, 0, Integer.MAX_VALUE);\n MappedByteBuffer buffer2 = fileChannel2.map(READ_WRITE, 0, Integer.MAX_VALUE);\n</code></pre>\n<p>...</p>\n<pre><code>        synchronized (ATOMIC_LOCK) {\n            buffer1.putLong(index, value1);\n            buffer2.putLong(index, value2);\n        }\n</code></pre>\n"},{"tags":["java","spring","maven-2"],"answers":[{"tags":[],"owner":{"account_id":46497,"reputation":8446,"user_id":137435,"accept_rate":92,"display_name":"Robert"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1280339462,"creation_date":1280339113,"answer_id":3355765,"question_id":3353960,"body_markdown":"The problem, it seems, is that there is conflict between each of the different spring.handlers and spring.schemas in the META-INF folders of the various spring dependencies. \r\n\r\nThe trick I found is to override these by creating these files in src/main/resources/META-INF and copying and pasting the contents of those individual files into these.  Secondly, use the maven-jar-plugin to set the manifest&#39;s mainClass; and the maven-shade-plugin, instead of the maven-assembly-plugin. So the updated pom.xml looks like:\r\n\r\n    &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n            &lt;archive&gt;\r\n                &lt;manifest&gt;\r\n                  &lt;mainClass&gt;org.robert.xclades.Main&lt;/mainClass&gt;\r\n                &lt;/manifest&gt;\r\n            &lt;/archive&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n        &lt;executions&gt;\r\n            &lt;execution&gt;\r\n                &lt;phase&gt;package&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;shade&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n            &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n\r\nSo all that is required now is `maven package`.","title":"Spring Build Problem - Can&#39;t Find Beans Schema","body":"<p>The problem, it seems, is that there is conflict between each of the different spring.handlers and spring.schemas in the META-INF folders of the various spring dependencies. </p>\n\n<p>The trick I found is to override these by creating these files in src/main/resources/META-INF and copying and pasting the contents of those individual files into these.  Secondly, use the maven-jar-plugin to set the manifest's mainClass; and the maven-shade-plugin, instead of the maven-assembly-plugin. So the updated pom.xml looks like:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;archive&gt;\n            &lt;manifest&gt;\n              &lt;mainClass&gt;org.robert.xclades.Main&lt;/mainClass&gt;\n            &lt;/manifest&gt;\n        &lt;/archive&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;shade&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>So all that is required now is <code>maven package</code>.</p>\n"},{"comments":[{"owner":{"account_id":46497,"reputation":8446,"user_id":137435,"accept_rate":92,"display_name":"Robert"},"score":0,"creation_date":1281021957,"post_id":3415259,"comment_id":3555552,"body_markdown":"Thanks, that seems a much nicer way to merge the files!","body":"Thanks, that seems a much nicer way to merge the files!"},{"owner":{"account_id":13696,"reputation":17531,"user_id":27657,"accept_rate":65,"display_name":"javamonkey79"},"score":0,"creation_date":1318960103,"post_id":3415259,"comment_id":9518707,"body_markdown":"Indeed, I&#39;ve seen this before - I don&#39;t know why I didn&#39;t look closer before. Thanks!","body":"Indeed, I&#39;ve seen this before - I don&#39;t know why I didn&#39;t look closer before. Thanks!"}],"tags":[],"owner":{"account_id":638376,"reputation":36,"user_id":412006,"display_name":"Fin Labusch"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1281015853,"creation_date":1281015853,"answer_id":3415259,"question_id":3353960,"body_markdown":"I had the same problem. Using the shade plugin helped, but I had to add an transformer as described in http://maven.apache.org/plugins/maven-shade-plugin/examples/resource-transformers.html to concat Spring&#39;s handler and schema files.\r\n","title":"Spring Build Problem - Can&#39;t Find Beans Schema","body":"<p>I had the same problem. Using the shade plugin helped, but I had to add an transformer as described in <a href=\"http://maven.apache.org/plugins/maven-shade-plugin/examples/resource-transformers.html\" rel=\"nofollow noreferrer\">http://maven.apache.org/plugins/maven-shade-plugin/examples/resource-transformers.html</a> to concat Spring's handler and schema files.</p>\n"},{"tags":[],"owner":{"account_id":3169575,"reputation":21,"user_id":2678886,"display_name":"user2678886"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1376402272,"creation_date":1376402272,"answer_id":18211130,"question_id":3353960,"body_markdown":"One solution I found that works with Spring 2.5.6 is to include a single Spring jar instead of separate jars.  I&#39;m not sure if there is a signle jar for Spring 3.x.\r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring&lt;/artifactId&gt;\r\n            &lt;version&gt;2.5.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    ","title":"Spring Build Problem - Can&#39;t Find Beans Schema","body":"<p>One solution I found that works with Spring 2.5.6 is to include a single Spring jar instead of separate jars.  I'm not sure if there is a signle jar for Spring 3.x.</p>\n\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring&lt;/artifactId&gt;\n        &lt;version&gt;2.5.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1685525168,"post_id":76371793,"comment_id":134671045,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76371793/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":28717542,"reputation":1,"user_id":21991867,"display_name":"SZP1228"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685523641,"creation_date":1685523641,"answer_id":76371793,"question_id":3353960,"body_markdown":"use this:\r\n\r\n\t\t\t&lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.4.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;shade&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;filters&gt;\r\n                                &lt;filter&gt;\r\n                                    &lt;artifact&gt;*:*&lt;/artifact&gt;\r\n                                    &lt;excludes&gt;\r\n                                        &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\r\n                                        &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\r\n                                        &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\r\n                                    &lt;/excludes&gt;\r\n                                &lt;/filter&gt;\r\n                            &lt;/filters&gt;\r\n                            &lt;transformers&gt;\r\n                                &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\r\n                                    &lt;resource&gt;META-INF/spring.handlers&lt;/resource&gt;\r\n                                &lt;/transformer&gt;\r\n                                &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\r\n                                    &lt;resource&gt;META-INF/spring.schemas&lt;/resource&gt;\r\n                                &lt;/transformer&gt;\r\n                            &lt;/transformers&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;","title":"Spring Build Problem - Can&#39;t Find Beans Schema","body":"<p>use this:</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.4.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;shade&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;filters&gt;\n                            &lt;filter&gt;\n                                &lt;artifact&gt;*:*&lt;/artifact&gt;\n                                &lt;excludes&gt;\n                                    &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                                    &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                                    &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                                &lt;/excludes&gt;\n                            &lt;/filter&gt;\n                        &lt;/filters&gt;\n                        &lt;transformers&gt;\n                            &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\n                                &lt;resource&gt;META-INF/spring.handlers&lt;/resource&gt;\n                            &lt;/transformer&gt;\n                            &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\n                                &lt;resource&gt;META-INF/spring.schemas&lt;/resource&gt;\n                            &lt;/transformer&gt;\n                        &lt;/transformers&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":46497,"reputation":8446,"user_id":137435,"accept_rate":92,"display_name":"Robert"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4404,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":3415259,"answer_count":4,"score":4,"last_activity_date":1685523641,"creation_date":1280327848,"question_id":3353960,"body_markdown":"I&#39;m using Maven2 and Spring 3, when I run my project in Eclipse everything works fine, but when I use assembly:assembly, the resultant jar throws the following Exception:\r\n\r\n    Exception in thread &quot;main&quot; \r\n    org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 4 \r\n    in XML document from class path resource [beans.xml] is invalid; nested exception \r\n    is org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of \r\n    element &#39;beans&#39;.\r\n\r\nmy beans file looks something like this: \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n            \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n            \txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt; \r\n        &lt;!-- Beans Here --&gt;\r\n    &lt;/beans&gt;\r\n\r\nthis file is stored in src/main/resources\r\n\r\nmy pom.xml has the following dependency for spring:   \t\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.3.RELEASE&lt;/version&gt;\r\n        &lt;type&gt;jar&lt;/type&gt;\r\n        &lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nany ideas why this is happening? how to fix?\r\n\r\nUPDATE:\r\n\r\nfurther probing Google turns out that Spring and Maven don&#39;t get on too well with the following in my pom.xml, although no solution is forthcoming:\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.2-beta-5&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n            &lt;archive&gt;\r\n                &lt;manifest&gt;\r\n                    &lt;mainClass&gt;org.robert.xclades.Main&lt;/mainClass&gt;\r\n                &lt;/manifest&gt;\r\n            &lt;/archive&gt;\r\n            &lt;descriptorRefs&gt;\r\n                &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n            &lt;/descriptorRefs&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\n\r\n","title":"Spring Build Problem - Can&#39;t Find Beans Schema","body":"<p>I'm using Maven2 and Spring 3, when I run my project in Eclipse everything works fine, but when I use assembly:assembly, the resultant jar throws the following Exception:</p>\n\n<pre><code>Exception in thread \"main\" \norg.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 4 \nin XML document from class path resource [beans.xml] is invalid; nested exception \nis org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of \nelement 'beans'.\n</code></pre>\n\n<p>my beans file looks something like this: </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n            xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n            xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\"&gt; \n    &lt;!-- Beans Here --&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>this file is stored in src/main/resources</p>\n\n<p>my pom.xml has the following dependency for spring:     </p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n    &lt;version&gt;3.0.3.RELEASE&lt;/version&gt;\n    &lt;type&gt;jar&lt;/type&gt;\n    &lt;scope&gt;compile&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>any ideas why this is happening? how to fix?</p>\n\n<p>UPDATE:</p>\n\n<p>further probing Google turns out that Spring and Maven don't get on too well with the following in my pom.xml, although no solution is forthcoming:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.2-beta-5&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;archive&gt;\n            &lt;manifest&gt;\n                &lt;mainClass&gt;org.robert.xclades.Main&lt;/mainClass&gt;\n            &lt;/manifest&gt;\n        &lt;/archive&gt;\n        &lt;descriptorRefs&gt;\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n        &lt;/descriptorRefs&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","android","kotlin","oppo"],"owner":{"account_id":11008048,"reputation":584,"user_id":8086401,"display_name":"Muraino"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685523613,"creation_date":1685523613,"question_id":76371787,"body_markdown":"Can someone provide a working solution for a Device Admin permission issue in my Android app? \r\nThe permission works fine on most devices, but it seems to have problems on specific devices like OnePlus and Oppo. \r\n\r\nUser can disable it from app info -&gt; uninstall -&gt; Shows a dialogue to remove admin permissions -&gt; uninstall app\r\n\r\nI have tried searching for solutions online, but haven&#39;t found any helpful resources or code examples. I am using `DeviceAdminReceiver` to enable the permission. Any assistance or suggestions would be greatly appreciated.\r\n\r\n\r\n\r\n\r\n","title":"Prevent Disabling Device Admin Permission on Oneplus and Oppo Phones","body":"<p>Can someone provide a working solution for a Device Admin permission issue in my Android app?\nThe permission works fine on most devices, but it seems to have problems on specific devices like OnePlus and Oppo.</p>\n<p>User can disable it from app info -&gt; uninstall -&gt; Shows a dialogue to remove admin permissions -&gt; uninstall app</p>\n<p>I have tried searching for solutions online, but haven't found any helpful resources or code examples. I am using <code>DeviceAdminReceiver</code> to enable the permission. Any assistance or suggestions would be greatly appreciated.</p>\n"},{"tags":["java","performance","hibernate","out-of-memory","data-processing"],"answers":[{"comments":[{"owner":{"account_id":1867377,"reputation":3480,"user_id":1690578,"accept_rate":73,"display_name":"Yurii Bondarenko"},"score":0,"creation_date":1388586146,"post_id":20869504,"comment_id":31313304,"body_markdown":"I suspected session was the problem. So I added this line session.setFlushMode( FlushMode.COMMIT ). But looks like I was wrong. I never used profiler before, I guess it is time to start)))","body":"I suspected session was the problem. So I added this line session.setFlushMode( FlushMode.COMMIT ). But looks like I was wrong. I never used profiler before, I guess it is time to start)))"},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":3,"creation_date":1388589146,"post_id":20869504,"comment_id":31314129,"body_markdown":"For the record, what *effectively* frees memory is not garbage collection, but objects becoming unreachable. This is what OP assumed would happen on transaction commit (flushing implicitly).","body":"For the record, what <i>effectively</i> frees memory is not garbage collection, but objects becoming unreachable. This is what OP assumed would happen on transaction commit (flushing implicitly)."}],"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1388585782,"creation_date":1388585782,"answer_id":20869504,"question_id":20869473,"body_markdown":"I don&#39;t know why you think committing a transaction frees heap memory.  Running garbage collection does that.\r\n\r\nOOM error can happen if your perm gen is exhausted.  \r\n\r\nThe easy answer is to change your min and max heap sizes and perm gen size when you start the JVM and see if it goes away.\r\n\r\nI&#39;d recommending getting a profiler, like VisualVM, and seeing what is consuming your memory at runtime.  It should be easy to fix.\r\n\r\nI&#39;d guess that you&#39;re trying to commit too large a chunk at once.  Break it up into smaller pieces and see if that helps.","title":"Hibernate out of memory exception while processing large collection of elements","body":"<p>I don't know why you think committing a transaction frees heap memory.  Running garbage collection does that.</p>\n\n<p>OOM error can happen if your perm gen is exhausted.  </p>\n\n<p>The easy answer is to change your min and max heap sizes and perm gen size when you start the JVM and see if it goes away.</p>\n\n<p>I'd recommending getting a profiler, like VisualVM, and seeing what is consuming your memory at runtime.  It should be easy to fix.</p>\n\n<p>I'd guess that you're trying to commit too large a chunk at once.  Break it up into smaller pieces and see if that helps.</p>\n"},{"tags":[],"owner":{"account_id":3793875,"reputation":49,"user_id":3149639,"display_name":"theexamtime"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1388588756,"creation_date":1388588028,"answer_id":20869866,"question_id":20869473,"body_markdown":"Try using session.clear() which\r\n*&quot;Completely clear the session. Evict all loaded instances and cancel all pending saves, updates and deletions. Do not close open iterators or instances of ScrollableResults&quot;*","title":"Hibernate out of memory exception while processing large collection of elements","body":"<p>Try using session.clear() which\n<em>\"Completely clear the session. Evict all loaded instances and cancel all pending saves, updates and deletions. Do not close open iterators or instances of ScrollableResults\"</em></p>\n"},{"comments":[{"owner":{"account_id":6099767,"reputation":4936,"user_id":4759176,"accept_rate":74,"display_name":"parsecer"},"score":1,"creation_date":1576669906,"post_id":20869997,"comment_id":104972706,"body_markdown":"How to disable 2nd level cache? Would `session.evict()` help?","body":"How to disable 2nd level cache? Would <code>session.evict()</code> help?"}],"tags":[],"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1685523421,"creation_date":1388589078,"answer_id":20869997,"question_id":20869473,"body_markdown":"It&#39;s important to distinguish these two actions:\r\n\r\n- *flushing* a session executes all pending statements against the database (it synchronizes the in-memory state with the database state);\r\n\r\n- *clearing* a session purges the session (1st-level) cache, thus freeing memory.\r\n\r\nSo you need to both flush and clear a session in order to recover the occupied memory.\r\n\r\nIn addition to that, you must disable the 2nd-level cache. Otherwise all (or most of) the objects will remain reachable even after clearing the session.","title":"Hibernate out of memory exception while processing large collection of elements","body":"<p>It's important to distinguish these two actions:</p>\n<ul>\n<li><p><em>flushing</em> a session executes all pending statements against the database (it synchronizes the in-memory state with the database state);</p>\n</li>\n<li><p><em>clearing</em> a session purges the session (1st-level) cache, thus freeing memory.</p>\n</li>\n</ul>\n<p>So you need to both flush and clear a session in order to recover the occupied memory.</p>\n<p>In addition to that, you must disable the 2nd-level cache. Otherwise all (or most of) the objects will remain reachable even after clearing the session.</p>\n"},{"tags":[],"owner":{"account_id":910640,"reputation":9353,"user_id":944593,"accept_rate":94,"display_name":"shareef"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531556764,"creation_date":1531556764,"answer_id":51336700,"question_id":20869473,"body_markdown":"This article solved my issue\r\n\r\n        Session session = sessionFactory.getCurrentSession();\r\n          ScrollableResults scrollableResults = session.createQuery(&quot;from DemoEntity&quot;).scroll(ScrollMode.FORWARD_ONLY);\r\n          int count = 0;\r\n          while (scrollableResults.next()) {\r\n           if (++count &gt; 0 &amp;&amp; count % 100 == 0) {\r\n            System.out.println(&quot;Fetched &quot; + count + &quot; entities&quot;);\r\n           }\r\n           DemoEntity demoEntity = (DemoEntity) scrollableResults.get()[0];\r\n           //Process and write result\r\n           session.evict(demoEntity);//important to add this\r\n          }\r\n         }\r\n\r\n[bulk fetching hibernate][1]\r\n\r\n1. Use hibernate ScrollableResult\r\n2. Use evict\r\n\r\n**BTW** I tried the statless solution it gave me this exception i did not how to solve ( may be you can improve this answer) [Exception details is here][2]\r\n\r\n    org.hibernate.SessionException: collections cannot be fetched by a stateless session\r\n\r\nSo i tuned with sleep(delay) as its a back ground process and very long with low resources on server i have to cool down cpu; with midnight work ( none rush hours).\r\n\r\n\r\n  [1]: https://dzone.com/articles/bulk-fetching-hibernate\r\n  [2]: https://access.redhat.com/solutions/33032","title":"Hibernate out of memory exception while processing large collection of elements","body":"<p>This article solved my issue</p>\n\n<pre><code>    Session session = sessionFactory.getCurrentSession();\n      ScrollableResults scrollableResults = session.createQuery(\"from DemoEntity\").scroll(ScrollMode.FORWARD_ONLY);\n      int count = 0;\n      while (scrollableResults.next()) {\n       if (++count &gt; 0 &amp;&amp; count % 100 == 0) {\n        System.out.println(\"Fetched \" + count + \" entities\");\n       }\n       DemoEntity demoEntity = (DemoEntity) scrollableResults.get()[0];\n       //Process and write result\n       session.evict(demoEntity);//important to add this\n      }\n     }\n</code></pre>\n\n<p><a href=\"https://dzone.com/articles/bulk-fetching-hibernate\" rel=\"nofollow noreferrer\">bulk fetching hibernate</a></p>\n\n<ol>\n<li>Use hibernate ScrollableResult</li>\n<li>Use evict</li>\n</ol>\n\n<p><strong>BTW</strong> I tried the statless solution it gave me this exception i did not how to solve ( may be you can improve this answer) <a href=\"https://access.redhat.com/solutions/33032\" rel=\"nofollow noreferrer\">Exception details is here</a></p>\n\n<pre><code>org.hibernate.SessionException: collections cannot be fetched by a stateless session\n</code></pre>\n\n<p>So i tuned with sleep(delay) as its a back ground process and very long with low resources on server i have to cool down cpu; with midnight work ( none rush hours).</p>\n"},{"tags":[],"owner":{"account_id":484995,"reputation":1559,"user_id":901019,"accept_rate":85,"display_name":"JonathanReez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655029022,"creation_date":1655029022,"answer_id":72591289,"question_id":20869473,"body_markdown":"This was probably a very obscure version of the same bug, but in my case the culprit was Eclipse. Switching to IntelliJ and running the same project solved the problem - and of course it worked just fine when running the project without an IDE. I couldn&#39;t  quite figure out what was wrong with Eclipse, so stuck with IntelliJ. Full stack trace for future Google searches:\r\n\r\n    INFO: HHH000400: Using dialect: org.hibernate.dialect.SQLServerDialect\r\n    ะธัะฝ 12, 2022 11:37:30 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PoolState stop\r\n    INFO: HHH10001008: Cleaning up connection pool [jdbc:sqlserver://localhost;encrypt=true;trustServerCertificate=true]\r\n    Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\r\n    \tat org.hibernate.loader.PropertyPath.&lt;init&gt;(PropertyPath.java:45)\r\n    \tat org.hibernate.loader.PropertyPath.append(PropertyPath.java:58)\r\n    \tat org.hibernate.loader.plan.build.internal.returns.CollectionFetchableElementEntityGraph.&lt;init&gt;(CollectionFetchableElementEntityGraph.java:26)\r\n    \tat org.hibernate.loader.plan.build.internal.returns.AbstractCollectionReference.buildElementGraph(AbstractCollectionReference.java:135)\r\n    \tat org.hibernate.loader.plan.build.internal.returns.AbstractCollectionReference.&lt;init&gt;(AbstractCollectionReference.java:69)\r\n    \tat org.hibernate.loader.plan.build.internal.returns.CollectionAttributeFetchImpl.&lt;init&gt;(CollectionAttributeFetchImpl.java:32)\r\n    \tat org.hibernate.loader.plan.build.internal.returns.AbstractExpandingFetchSource.buildCollectionAttributeFetch(AbstractExpandingFetchSource.java:176)\r\n    \tat org.hibernate.loader.plan.build.internal.AbstractLoadPlanBuildingAssociationVisitationStrategy.handleAssociationAttribute(AbstractLoadPlanBuildingAssociationVisitationStrategy.java:874)\r\n    \tat org.hibernate.loader.plan.build.internal.FetchStyleLoadPlanBuildingAssociationVisitationStrategy.handleAssociationAttribute(FetchStyleLoadPlanBuildingAssociationVisitationStrategy.java:155)\r\n    \tat org.hibernate.loader.plan.build.internal.AbstractLoadPlanBuildingAssociationVisitationStrategy.startingAttribute(AbstractLoadPlanBuildingAssociationVisitationStrategy.java:564)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributeDefinition(MetamodelGraphWalker.java:170)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributes(MetamodelGraphWalker.java:140)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitEntityDefinition(MetamodelGraphWalker.java:97)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAssociation(MetamodelGraphWalker.java:209)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributeDefinition(MetamodelGraphWalker.java:178)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributes(MetamodelGraphWalker.java:140)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitEntityDefinition(MetamodelGraphWalker.java:97)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAssociation(MetamodelGraphWalker.java:209)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributeDefinition(MetamodelGraphWalker.java:178)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributes(MetamodelGraphWalker.java:140)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitEntityDefinition(MetamodelGraphWalker.java:97)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAssociation(MetamodelGraphWalker.java:209)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributeDefinition(MetamodelGraphWalker.java:178)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributes(MetamodelGraphWalker.java:140)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitEntityDefinition(MetamodelGraphWalker.java:97)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAssociation(MetamodelGraphWalker.java:209)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributeDefinition(MetamodelGraphWalker.java:178)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributes(MetamodelGraphWalker.java:140)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitEntityDefinition(MetamodelGraphWalker.java:97)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAssociation(MetamodelGraphWalker.java:209)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributeDefinition(MetamodelGraphWalker.java:178)\r\n    \tat org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributes(MetamodelGraphWalker.java:140)","title":"Hibernate out of memory exception while processing large collection of elements","body":"<p>This was probably a very obscure version of the same bug, but in my case the culprit was Eclipse. Switching to IntelliJ and running the same project solved the problem - and of course it worked just fine when running the project without an IDE. I couldn't  quite figure out what was wrong with Eclipse, so stuck with IntelliJ. Full stack trace for future Google searches:</p>\n<pre><code>INFO: HHH000400: Using dialect: org.hibernate.dialect.SQLServerDialect\nะธัะฝ 12, 2022 11:37:30 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PoolState stop\nINFO: HHH10001008: Cleaning up connection pool [jdbc:sqlserver://localhost;encrypt=true;trustServerCertificate=true]\nException in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\n    at org.hibernate.loader.PropertyPath.&lt;init&gt;(PropertyPath.java:45)\n    at org.hibernate.loader.PropertyPath.append(PropertyPath.java:58)\n    at org.hibernate.loader.plan.build.internal.returns.CollectionFetchableElementEntityGraph.&lt;init&gt;(CollectionFetchableElementEntityGraph.java:26)\n    at org.hibernate.loader.plan.build.internal.returns.AbstractCollectionReference.buildElementGraph(AbstractCollectionReference.java:135)\n    at org.hibernate.loader.plan.build.internal.returns.AbstractCollectionReference.&lt;init&gt;(AbstractCollectionReference.java:69)\n    at org.hibernate.loader.plan.build.internal.returns.CollectionAttributeFetchImpl.&lt;init&gt;(CollectionAttributeFetchImpl.java:32)\n    at org.hibernate.loader.plan.build.internal.returns.AbstractExpandingFetchSource.buildCollectionAttributeFetch(AbstractExpandingFetchSource.java:176)\n    at org.hibernate.loader.plan.build.internal.AbstractLoadPlanBuildingAssociationVisitationStrategy.handleAssociationAttribute(AbstractLoadPlanBuildingAssociationVisitationStrategy.java:874)\n    at org.hibernate.loader.plan.build.internal.FetchStyleLoadPlanBuildingAssociationVisitationStrategy.handleAssociationAttribute(FetchStyleLoadPlanBuildingAssociationVisitationStrategy.java:155)\n    at org.hibernate.loader.plan.build.internal.AbstractLoadPlanBuildingAssociationVisitationStrategy.startingAttribute(AbstractLoadPlanBuildingAssociationVisitationStrategy.java:564)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributeDefinition(MetamodelGraphWalker.java:170)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributes(MetamodelGraphWalker.java:140)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitEntityDefinition(MetamodelGraphWalker.java:97)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAssociation(MetamodelGraphWalker.java:209)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributeDefinition(MetamodelGraphWalker.java:178)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributes(MetamodelGraphWalker.java:140)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitEntityDefinition(MetamodelGraphWalker.java:97)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAssociation(MetamodelGraphWalker.java:209)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributeDefinition(MetamodelGraphWalker.java:178)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributes(MetamodelGraphWalker.java:140)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitEntityDefinition(MetamodelGraphWalker.java:97)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAssociation(MetamodelGraphWalker.java:209)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributeDefinition(MetamodelGraphWalker.java:178)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributes(MetamodelGraphWalker.java:140)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitEntityDefinition(MetamodelGraphWalker.java:97)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAssociation(MetamodelGraphWalker.java:209)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributeDefinition(MetamodelGraphWalker.java:178)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributes(MetamodelGraphWalker.java:140)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitEntityDefinition(MetamodelGraphWalker.java:97)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAssociation(MetamodelGraphWalker.java:209)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributeDefinition(MetamodelGraphWalker.java:178)\n    at org.hibernate.persister.walking.spi.MetamodelGraphWalker.visitAttributes(MetamodelGraphWalker.java:140)\n</code></pre>\n"}],"owner":{"account_id":1867377,"reputation":3480,"user_id":1690578,"accept_rate":73,"display_name":"Yurii Bondarenko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11004,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":20869997,"answer_count":5,"score":10,"last_activity_date":1685523421,"creation_date":1388585604,"question_id":20869473,"body_markdown":"I am trying to process collection of heavy weight elements (images). Size of collection varies between 8000 - 50000 entries. But for some reason after processing 1800-1900 entries my program falls with java.lang.OutOfMemoryError: Java heap space.\r\n\r\nIn my understanding each time when I call session.getTransaction().commit() program should free heap memory, but looks like it never happens.\r\nWhat do I do wrong? Here is the code:\r\n\r\n    private static void loadImages( LoadStrategy loadStrategy ) throws IOException {\r\n        log.info( &quot;Loading images for: &quot; + loadStrategy.getPageType() );\r\n\r\n        Session session = sessionFactory.openSession();\r\n        session.setFlushMode( FlushMode.COMMIT );\r\n        Query query = session.createQuery( &quot;from PageRaw where pageType = :pageType and pageStatus = :pageStatus and sessionId = 1&quot; );\r\n        query.setString( &quot;pageStatus&quot;, PageStatus.SUCCESS.name() );\r\n        query.setString( &quot;pageType&quot;, loadStrategy.getPageType().name() );\r\n        query.setMaxResults( 50 );\r\n\r\n        List&lt;PageRaw&gt; pages;\r\n        int resultNum = 0;\r\n\r\n        do {\r\n\r\n            session.getTransaction().begin();\r\n\r\n            log.info( &quot;Get pages statring form &quot; + resultNum + &quot; position&quot; );\r\n            query.setFirstResult( resultNum );\r\n            resultNum += 50;\r\n            pages = query.list();\r\n            log.info( &quot;Found &quot; + pages.size() + &quot; pages&quot; );\r\n\r\n\r\n            for (PageRaw pr : pages ) {\r\n                Set&lt;String&gt; imageUrls = new HashSet&lt;&gt;();\r\n                for ( UrlLocator imageUrlLocator : loadStrategy.getImageUrlLocators() ) {\r\n                    imageUrls.addAll(\r\n                            imageUrlLocator.locateUrls( StringConvector.toString( pr.getSourceHtml() ) )\r\n                    );\r\n                }\r\n\r\n                removeDeletedImageRaws( pr.getImages(), imageUrls );\r\n                loadNewImageRaws( pr.getImages(), imageUrls );\r\n            }\r\n\r\n            session.getTransaction().commit();\r\n\r\n        } while ( pages.size() &gt; 0 );\r\n\r\n        session.close();\r\n    }","title":"Hibernate out of memory exception while processing large collection of elements","body":"<p>I am trying to process collection of heavy weight elements (images). Size of collection varies between 8000 - 50000 entries. But for some reason after processing 1800-1900 entries my program falls with java.lang.OutOfMemoryError: Java heap space.</p>\n\n<p>In my understanding each time when I call session.getTransaction().commit() program should free heap memory, but looks like it never happens.\nWhat do I do wrong? Here is the code:</p>\n\n<pre><code>private static void loadImages( LoadStrategy loadStrategy ) throws IOException {\n    log.info( \"Loading images for: \" + loadStrategy.getPageType() );\n\n    Session session = sessionFactory.openSession();\n    session.setFlushMode( FlushMode.COMMIT );\n    Query query = session.createQuery( \"from PageRaw where pageType = :pageType and pageStatus = :pageStatus and sessionId = 1\" );\n    query.setString( \"pageStatus\", PageStatus.SUCCESS.name() );\n    query.setString( \"pageType\", loadStrategy.getPageType().name() );\n    query.setMaxResults( 50 );\n\n    List&lt;PageRaw&gt; pages;\n    int resultNum = 0;\n\n    do {\n\n        session.getTransaction().begin();\n\n        log.info( \"Get pages statring form \" + resultNum + \" position\" );\n        query.setFirstResult( resultNum );\n        resultNum += 50;\n        pages = query.list();\n        log.info( \"Found \" + pages.size() + \" pages\" );\n\n\n        for (PageRaw pr : pages ) {\n            Set&lt;String&gt; imageUrls = new HashSet&lt;&gt;();\n            for ( UrlLocator imageUrlLocator : loadStrategy.getImageUrlLocators() ) {\n                imageUrls.addAll(\n                        imageUrlLocator.locateUrls( StringConvector.toString( pr.getSourceHtml() ) )\n                );\n            }\n\n            removeDeletedImageRaws( pr.getImages(), imageUrls );\n            loadNewImageRaws( pr.getImages(), imageUrls );\n        }\n\n        session.getTransaction().commit();\n\n    } while ( pages.size() &gt; 0 );\n\n    session.close();\n}\n</code></pre>\n"},{"tags":["java","workflow","aem"],"comments":[{"owner":{"account_id":70798,"reputation":2030,"user_id":204968,"display_name":"ronnyfm"},"score":0,"creation_date":1688056949,"post_id":76371660,"comment_id":135025901,"body_markdown":"Why the OOB on/off time properties do not work for you?","body":"Why the OOB on/off time properties do not work for you?"}],"owner":{"account_id":12918463,"reputation":13,"user_id":9341820,"display_name":"Ankit Sethiya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685522448,"creation_date":1685522448,"question_id":76371660,"body_markdown":"Need to Acivate an asset at a Scheduled time provided by User Programatically using SCHEDULED PAGE/ASSET ACTIVATION workflow. I need to set the timeoutHandler value when I call this Workflow from my java code. I&#39;m not sure how to do that. Once this property is set for my workflow instance, I&#39;m hoping AEM should take care of the activation at Scheduled time.\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OGoyO.png\r\n","title":"AEM Scheduled Page/Asset Activation Programatically or through Workflow","body":"<p>Need to Acivate an asset at a Scheduled time provided by User Programatically using SCHEDULED PAGE/ASSET ACTIVATION workflow. I need to set the timeoutHandler value when I call this Workflow from my java code. I'm not sure how to do that. Once this property is set for my workflow instance, I'm hoping AEM should take care of the activation at Scheduled time.</p>\n<p><a href=\"https://i.stack.imgur.com/OGoyO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OGoyO.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","sdk","unity-game-engine"],"comments":[{"owner":{"account_id":8700932,"reputation":562,"user_id":6510850,"display_name":"Douglas Dwyer"},"score":0,"creation_date":1519593886,"post_id":48976296,"comment_id":84962223,"body_markdown":"Do you mean that you imported a plugin, and then this popup appeared and Unity just totally hangs?  That just happened to me, and I&#39;m not sure what to do...","body":"Do you mean that you imported a plugin, and then this popup appeared and Unity just totally hangs?  That just happened to me, and I&#39;m not sure what to do..."},{"owner":{"account_id":10378942,"reputation":323,"user_id":7654353,"accept_rate":73,"display_name":"TheNewbie"},"score":0,"creation_date":1519653495,"post_id":48976296,"comment_id":84984946,"body_markdown":"Yea the same. I have no idea how to fix it. I have been going around different errors for 3 days. My head hurts. I changed Unity version to 5 from 2017 and then the Resolver was fixed, but I couldn&#39;t build my APK. Error after error.","body":"Yea the same. I have no idea how to fix it. I have been going around different errors for 3 days. My head hurts. I changed Unity version to 5 from 2017 and then the Resolver was fixed, but I couldn&#39;t build my APK. Error after error."},{"owner":{"account_id":8700932,"reputation":562,"user_id":6510850,"display_name":"Douglas Dwyer"},"score":0,"creation_date":1519770731,"post_id":48976296,"comment_id":85043264,"body_markdown":"Argh.  I just tried importing some more packages as according to [this GitHub issue](https://github.com/playgameservices/play-games-plugin-for-unity/issues/2116) which seems to detail the error we are experiencing, but to no avail.  Do let me know if you&#39;ve figured this out.","body":"Argh.  I just tried importing some more packages as according to <a href=\"https://github.com/playgameservices/play-games-plugin-for-unity/issues/2116\" rel=\"nofollow noreferrer\">this GitHub issue</a> which seems to detail the error we are experiencing, but to no avail.  Do let me know if you&#39;ve figured this out."},{"owner":{"account_id":8700932,"reputation":562,"user_id":6510850,"display_name":"Douglas Dwyer"},"score":0,"creation_date":1519863131,"post_id":48976296,"comment_id":85086765,"body_markdown":"Hey, I don&#39;t know if you managed to fix this, but I seem to have reached a state where I&#39;ve worked around the error.  I deleted all the GPS and AdMob files from my project, and then reimported GPS and then AdMob whilst Force Resolving the project between each step.","body":"Hey, I don&#39;t know if you managed to fix this, but I seem to have reached a state where I&#39;ve worked around the error.  I deleted all the GPS and AdMob files from my project, and then reimported GPS and then AdMob whilst Force Resolving the project between each step."}],"answers":[{"tags":[],"owner":{"account_id":13579461,"reputation":21,"user_id":9795901,"display_name":"nightofthecow"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1526407079,"creation_date":1526407079,"answer_id":50356563,"question_id":48976296,"body_markdown":"Not sure if this will help or cause more issues -- as I will find out soon I guess, but if you already have Play Services package installed along with the Play Services Resolver that comes with it...when importing the AdMobs package make sure that you uncheck the Play Services Resolver before import since it is already installed. You can manage/update the Play Services Resolver from the Assets menu if needed I believe. ","title":"Unity: Resolving Android Dependencies freeze. Cannot import any plug-in","body":"<p>Not sure if this will help or cause more issues -- as I will find out soon I guess, but if you already have Play Services package installed along with the Play Services Resolver that comes with it...when importing the AdMobs package make sure that you uncheck the Play Services Resolver before import since it is already installed. You can manage/update the Play Services Resolver from the Assets menu if needed I believe. </p>\n"},{"comments":[{"owner":{"account_id":250167,"reputation":982,"user_id":526715,"accept_rate":71,"display_name":"Kleber"},"score":0,"creation_date":1549283738,"post_id":50380399,"comment_id":95835354,"body_markdown":"2019 and we still have to avoid spaces... man! that will never change!","body":"2019 and we still have to avoid spaces... man! that will never change!"}],"tags":[],"owner":{"account_id":10378942,"reputation":323,"user_id":7654353,"accept_rate":73,"display_name":"TheNewbie"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1526507275,"creation_date":1526507275,"answer_id":50380399,"question_id":48976296,"body_markdown":"Well...the problem was that my project folder had spaces in it. If it was\r\n Test App, it should have been TestApp. When I created my project in Unity (Its my first project) I neglected the name of the Project is used as the folder name too. I understood how the whole engine works inside out in hopeless attempts to fix it, but never did I suspect it was so simple. ","title":"Unity: Resolving Android Dependencies freeze. Cannot import any plug-in","body":"<p>Well...the problem was that my project folder had spaces in it. If it was\n Test App, it should have been TestApp. When I created my project in Unity (Its my first project) I neglected the name of the Project is used as the folder name too. I understood how the whole engine works inside out in hopeless attempts to fix it, but never did I suspect it was so simple. </p>\n"},{"comments":[{"owner":{"account_id":2455473,"reputation":171,"user_id":2140808,"display_name":"ChicoDelaBarrio"},"score":0,"creation_date":1548759372,"post_id":53391277,"comment_id":95648515,"body_markdown":"This solved this issued for me when trying to import firebase analytics to unity.\nAs you suggested, I renamed the file and reopened unity. it opened with some error about gradle. Then I noticed it created a new file with the same name. I saved my scene, restarted and after importing firebase analytics everything worked fine.","body":"This solved this issued for me when trying to import firebase analytics to unity. As you suggested, I renamed the file and reopened unity. it opened with some error about gradle. Then I noticed it created a new file with the same name. I saved my scene, restarted and after importing firebase analytics everything worked fine."}],"tags":[],"owner":{"account_id":2667537,"reputation":378,"user_id":2305602,"display_name":"ivan.rosina"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1542710704,"creation_date":1542710704,"answer_id":53391277,"question_id":48976296,"body_markdown":"In ProjectSettings you can remove (I suggest rename) the AndroidResolverDependencies.xml then restart unity.\r\nI takes time but you can see jdk working, so wait and it fixes any problem.\r\n","title":"Unity: Resolving Android Dependencies freeze. Cannot import any plug-in","body":"<p>In ProjectSettings you can remove (I suggest rename) the AndroidResolverDependencies.xml then restart unity.\nI takes time but you can see jdk working, so wait and it fixes any problem.</p>\n"},{"comments":[{"owner":{"account_id":4607970,"reputation":71,"user_id":3736907,"display_name":"Benlish"},"score":1,"creation_date":1635226795,"post_id":65028341,"comment_id":123232520,"body_markdown":"you saved me today friend","body":"you saved me today friend"}],"tags":[],"owner":{"account_id":186443,"reputation":93,"user_id":423835,"display_name":"st4rdog"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1606419752,"creation_date":1606419752,"answer_id":65028341,"question_id":48976296,"body_markdown":"Try going to Edit &gt; Preferences &gt; External Tools &gt; Check/Uncheck the JDK/etc paths and close the window. It can trigger the android dependency manager to continue. If not, go to Assets &gt; External Dependency Manager &gt; Android Resolver &gt; Resolve.","title":"Unity: Resolving Android Dependencies freeze. Cannot import any plug-in","body":"<p>Try going to Edit &gt; Preferences &gt; External Tools &gt; Check/Uncheck the JDK/etc paths and close the window. It can trigger the android dependency manager to continue. If not, go to Assets &gt; External Dependency Manager &gt; Android Resolver &gt; Resolve.</p>\n"},{"comments":[{"owner":{"account_id":19087570,"reputation":780,"user_id":13938503,"display_name":"Anurag Sharma"},"score":0,"creation_date":1614849867,"post_id":66470890,"comment_id":117512556,"body_markdown":"@Deppanshu, with screenshots, please try to add more descriptions too","body":"@Deppanshu, with screenshots, please try to add more descriptions too"}],"tags":[],"owner":{"account_id":20867055,"reputation":1,"user_id":15327852,"display_name":"Deepanshu Soni"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614845353,"creation_date":1614845232,"answer_id":66470890,"question_id":48976296,"body_markdown":"Check both of the checkboxes I checked under Build Menu and it&#39;ll fix.\r\n\r\n![Image][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SMWdz.png","title":"Unity: Resolving Android Dependencies freeze. Cannot import any plug-in","body":"<p>Check both of the checkboxes I checked under Build Menu and it'll fix.</p>\n<p><img src=\"https://i.stack.imgur.com/SMWdz.png\" alt=\"Image\" /></p>\n"}],"owner":{"account_id":10378942,"reputation":323,"user_id":7654353,"accept_rate":73,"display_name":"TheNewbie"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18592,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"accepted_answer_id":50380399,"answer_count":5,"score":9,"last_activity_date":1685522374,"creation_date":1519579250,"question_id":48976296,"body_markdown":"I have a huge issue. For some reason, I am unable to import almost any plug-in into my Unity project. Whenever the import finishes, I get the Resolving Android Dependencies screen, which never actually resolves the issue. I recently got this issue when I imported the Unity Mediation Plug-in and now I reinstalled my Android Studio, Java and Unity, which resulted in the same error but now even for plug-ins, which worked before. I have no idea what to do. After the reinstall, I had to downgrade my SDK tools to 25.0.5 or I couldn&#39;t build the project due to JAVA_HOME error in the Unity Editor. Everything else is up-to-date.\r\n\r\nAny help is appreciated. \r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OmTxZ.png","title":"Unity: Resolving Android Dependencies freeze. Cannot import any plug-in","body":"<p>I have a huge issue. For some reason, I am unable to import almost any plug-in into my Unity project. Whenever the import finishes, I get the Resolving Android Dependencies screen, which never actually resolves the issue. I recently got this issue when I imported the Unity Mediation Plug-in and now I reinstalled my Android Studio, Java and Unity, which resulted in the same error but now even for plug-ins, which worked before. I have no idea what to do. After the reinstall, I had to downgrade my SDK tools to 25.0.5 or I couldn't build the project due to JAVA_HOME error in the Unity Editor. Everything else is up-to-date.</p>\n\n<p>Any help is appreciated. \n<a href=\"https://i.stack.imgur.com/OmTxZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/OmTxZ.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","apache-spark","apache-spark-sql"],"comments":[{"owner":{"account_id":1595031,"reputation":1446,"user_id":1477418,"display_name":"Islam Elbanna"},"score":1,"creation_date":1685524248,"post_id":76371651,"comment_id":134670860,"body_markdown":"Does this answer your question? https://stackoverflow.com/a/72346244/1477418","body":"Does this answer your question? <a href=\"https://stackoverflow.com/a/72346244/1477418\">stackoverflow.com/a/72346244/1477418</a>"},{"owner":{"account_id":25028548,"reputation":425,"user_id":18886549,"display_name":"shalnarkftw"},"score":1,"creation_date":1685543203,"post_id":76371651,"comment_id":134675287,"body_markdown":"In scala we&#39;ll write something like this: \n`df.withColumn(&quot;person_details&quot;, to_json(struct($&quot;FirstName&quot;, $&quot;LastName&quot;, $&quot;Age&quot;)))`\nHope this can help you in order to write this in Java","body":"In scala we&#39;ll write something like this:  <code>df.withColumn(&quot;person_details&quot;, to_json(struct($&quot;FirstName&quot;, $&quot;LastName&quot;, $&quot;Age&quot;)))</code> Hope this can help you in order to write this in Java"}],"owner":{"account_id":11888954,"reputation":125,"user_id":8700452,"display_name":"Ashutosh Rai"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685522373,"creation_date":1685522373,"question_id":76371651,"body_markdown":"I have a use case where I want to combine multiple columns values into one single String column in spark?\r\n\r\n```\r\nSource\r\n\r\nFirstName|LastName|Age\r\nAnuj     | Rai    |26\r\n\r\nTarget\r\n\r\nFirstName|LastName|Age | person_details\r\nAnuj     | Rai    | 26 | {FirstName:&quot;Anuj&quot;,LastName:&quot;Rai&quot;,Age:&quot;26&quot;}\r\n```\r\n\r\nI saw that in scala we can do this by using struct but how to do the same in java.I did not find any struct method in java?","title":"How to combine multiple column into one single json structure in spark?","body":"<p>I have a use case where I want to combine multiple columns values into one single String column in spark?</p>\n<pre><code>Source\n\nFirstName|LastName|Age\nAnuj     | Rai    |26\n\nTarget\n\nFirstName|LastName|Age | person_details\nAnuj     | Rai    | 26 | {FirstName:&quot;Anuj&quot;,LastName:&quot;Rai&quot;,Age:&quot;26&quot;}\n</code></pre>\n<p>I saw that in scala we can do this by using struct but how to do the same in java.I did not find any struct method in java?</p>\n"},{"tags":["java","hibernate","jpa","getter"],"comments":[{"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"score":0,"creation_date":1685522980,"post_id":76371646,"comment_id":134670601,"body_markdown":"If you stop it in the debugged, you can see in the IDE the stack of the calls that would lead you to the place where it was called and why.","body":"If you stop it in the debugged, you can see in the IDE the stack of the calls that would lead you to the place where it was called and why."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1685523513,"post_id":76371646,"comment_id":134670717,"body_markdown":"Does method `decode` change the value of `this.credentials` internally?  Or just decodes and returns, keeping `this.credentials` as-is, i.e. encoded. Then there should not be any problem, even if it is called multiple times.  And yes, check the call-stack as @NikolasCharalambidis suggests to know from where does it get called in both the cases.","body":"Does method <code>decode</code> change the value of <code>this.credentials</code> internally?  Or just decodes and returns, keeping <code>this.credentials</code> as-is, i.e. encoded. Then there should not be any problem, even if it is called multiple times.  And yes, check the call-stack as @NikolasCharalambidis suggests to know from where does it get called in both the cases."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1685542789,"post_id":76371646,"comment_id":134675176,"body_markdown":"Have the method call (new RuntimeException()).printStackTrace() to log the stack to see what is calling your method as it would help determine why if a break point won&#39;t. There isn&#39;t enough info here to know who/what/why it might be called otherwise or even the API used that you see it occurring with. Best practice though might be to decode/encode it once, using onLoad and prePersist/PreUpdate events, and cache the results in the entity - but I don&#39;t see how your debugging proves the method is called twice. If the decode isn&#39;t in the Get call, it means the credentials were not encoded at all","body":"Have the method call (new RuntimeException()).printStackTrace() to log the stack to see what is calling your method as it would help determine why if a break point won&#39;t. There isn&#39;t enough info here to know who/what/why it might be called otherwise or even the API used that you see it occurring with. Best practice though might be to decode/encode it once, using onLoad and prePersist/PreUpdate events, and cache the results in the entity - but I don&#39;t see how your debugging proves the method is called twice. If the decode isn&#39;t in the Get call, it means the credentials were not encoded at all"}],"owner":{"account_id":15028110,"reputation":93,"user_id":10847244,"display_name":"Taserface"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685522333,"creation_date":1685522333,"question_id":76371646,"body_markdown":"I use Spring Boot with Hibernate. I have an entity containing some credentials:\r\n\r\n\r\n```\r\n@Entity\r\nclass MyEntity {\r\n\r\n    @Column(name = &quot;credentials&quot;, columnDefinition = &quot;jsonb&quot;)\r\n    @Type(type = &quot;jsonb&quot;)\r\n    private Map&lt;String, Object&gt; credentials;\r\n}\r\n```\r\n\r\nOn every read and save of the credentials I do use my custom &#39;encode(credentials)&#39; and &#39;decode(credentials)&#39; methods to only keep the encoded versions in my DB and use decoded everywhere else. This is how my getter looks like:\r\n\r\n\r\n```\r\n    public Map&lt;String, Object&gt; getCredentials() {\r\n        Map&lt;String, Object&gt; encryptedCredentials = decode(this.credentials);\r\n        return encryptedCredentials;\r\n    }\r\n```\r\n\r\nBut for some odd reason, it seems to be called twice, with one (the first) is an implicit call and the debugger does not stop there. Why do I think it is called twice? Because when the I debug it the value of \r\n`this.credentials`\r\nis already decoded. However, when I have the getter method like this:\r\n```\r\n    public Map&lt;String, Object&gt; getCredentials() {\r\n        Map&lt;String, Object&gt; encryptedCredentials = this.credentials;\r\n        return encryptedCredentials;\r\n    }\r\n```\r\n\r\nthe credentials I get during a debug are not decrypted, which imples that the getter gets called twice. Strange. What magic does the Hibernate do here and what best practices should I follow to avoid it?","title":"Why does the entity&#39;s getter get called twice?","body":"<p>I use Spring Boot with Hibernate. I have an entity containing some credentials:</p>\n<pre><code>@Entity\nclass MyEntity {\n\n    @Column(name = &quot;credentials&quot;, columnDefinition = &quot;jsonb&quot;)\n    @Type(type = &quot;jsonb&quot;)\n    private Map&lt;String, Object&gt; credentials;\n}\n</code></pre>\n<p>On every read and save of the credentials I do use my custom 'encode(credentials)' and 'decode(credentials)' methods to only keep the encoded versions in my DB and use decoded everywhere else. This is how my getter looks like:</p>\n<pre><code>    public Map&lt;String, Object&gt; getCredentials() {\n        Map&lt;String, Object&gt; encryptedCredentials = decode(this.credentials);\n        return encryptedCredentials;\n    }\n</code></pre>\n<p>But for some odd reason, it seems to be called twice, with one (the first) is an implicit call and the debugger does not stop there. Why do I think it is called twice? Because when the I debug it the value of\n<code>this.credentials</code>\nis already decoded. However, when I have the getter method like this:</p>\n<pre><code>    public Map&lt;String, Object&gt; getCredentials() {\n        Map&lt;String, Object&gt; encryptedCredentials = this.credentials;\n        return encryptedCredentials;\n    }\n</code></pre>\n<p>the credentials I get during a debug are not decrypted, which imples that the getter gets called twice. Strange. What magic does the Hibernate do here and what best practices should I follow to avoid it?</p>\n"},{"tags":["java","reactjs","jenkins","frontend","devops"],"answers":[{"tags":[],"owner":{"account_id":6966136,"reputation":718,"user_id":5344089,"display_name":"Nadeeshani William"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685522262,"creation_date":1685522262,"answer_id":76371637,"question_id":76371551,"body_markdown":"Handling the CORS issue in the backend is better. The changes below work for me.\r\n\r\nAs a temporary solution, you can use a Chrome plugin (eg: [plugin][1]) to disable the security checks.\r\n\r\n    @Configuration\r\n    public class WebMvcConfig implements WebMvcConfigurer {\r\n    \r\n        @Override\r\n        public void addCorsMappings(CorsRegistry registry) {\r\n            registry.addMapping(&quot;/**&quot;)\r\n                    .allowedOrigins(allowedOrigins)\r\n                    .allowedMethods(&quot;*&quot;)\r\n                    .allowedHeaders(&quot;*&quot;);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://chrome.google.com/webstore/detail/allow-cors-access-control/lhobafahddgcelffkeicbaginigeejlf","title":"Changed BE API url to hostname. &lt;not working&gt;","body":"<p>Handling the CORS issue in the backend is better. The changes below work for me.</p>\n<p>As a temporary solution, you can use a Chrome plugin (eg: <a href=\"https://chrome.google.com/webstore/detail/allow-cors-access-control/lhobafahddgcelffkeicbaginigeejlf\" rel=\"nofollow noreferrer\">plugin</a>) to disable the security checks.</p>\n<pre><code>@Configuration\npublic class WebMvcConfig implements WebMvcConfigurer {\n\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping(&quot;/**&quot;)\n                .allowedOrigins(allowedOrigins)\n                .allowedMethods(&quot;*&quot;)\n                .allowedHeaders(&quot;*&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":25496411,"reputation":101,"user_id":19290397,"display_name":"Nikhil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1685522262,"creation_date":1685521602,"question_id":76371551,"body_markdown":"In my project, FE was using BE API Url like - http://171.28.106.18:32514/.\r\nNow this has been changed to hostname from devops team which is - http://project-backend-qa:8080\r\n\r\nNow I am not able to hit any API&#39;s from my application.\r\nScreenshot below - \r\n\r\n[![enter image description here][1]][1]\r\n\r\nOn BE side(JAVA), this has been written - \r\n```\r\npublic WebMvcConfigurer corsConfigurer() {\r\n        return new WebMvcConfigurer() {\r\n            @Override\r\n            public void addCorsMappings(CorsRegistry registry) {\r\n                registry.addMapping(&quot;/**&quot;)\r\n                .allowedOrigins(&quot;*&quot;)\r\n                .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;,&quot;PATCH&quot;)\r\n                .allowedHeaders(&quot;*&quot;)\r\n                .maxAge(3600);\r\n            }\r\n        };\r\n    }\r\n```\r\n\r\nBE is allowing all origins, still not able to access the hostname. Any idea what I am missing - \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kJBfF.png","title":"Changed BE API url to hostname. &lt;not working&gt;","body":"<p>In my project, FE was using BE API Url like - <a href=\"http://171.28.106.18:32514/\" rel=\"nofollow noreferrer\">http://171.28.106.18:32514/</a>.\nNow this has been changed to hostname from devops team which is - http://project-backend-qa:8080</p>\n<p>Now I am not able to hit any API's from my application.\nScreenshot below -</p>\n<p><a href=\"https://i.stack.imgur.com/kJBfF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kJBfF.png\" alt=\"enter image description here\" /></a></p>\n<p>On BE side(JAVA), this has been written -</p>\n<pre><code>public WebMvcConfigurer corsConfigurer() {\n        return new WebMvcConfigurer() {\n            @Override\n            public void addCorsMappings(CorsRegistry registry) {\n                registry.addMapping(&quot;/**&quot;)\n                .allowedOrigins(&quot;*&quot;)\n                .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;,&quot;PATCH&quot;)\n                .allowedHeaders(&quot;*&quot;)\n                .maxAge(3600);\n            }\n        };\n    }\n</code></pre>\n<p>BE is allowing all origins, still not able to access the hostname. Any idea what I am missing -</p>\n"},{"tags":["java","maven","elasticsearch"],"comments":[{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1685544007,"post_id":76371633,"comment_id":134675505,"body_markdown":"No. Why do you need to load both versions? I mean, it does not make sense to use more than one version at once.","body":"No. Why do you need to load both versions? I mean, it does not make sense to use more than one version at once."},{"owner":{"account_id":23351413,"reputation":40,"user_id":17424919,"display_name":"great-jin"},"score":0,"creation_date":1685609417,"post_id":76371633,"comment_id":134684948,"body_markdown":"my application need to manage with multiple version of es database, my currently solution is use the libray that compatible with both version, or is better way to do so?","body":"my application need to manage with multiple version of es database, my currently solution is use the libray that compatible with both version, or is better way to do so?"},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1685611311,"post_id":76371633,"comment_id":134685370,"body_markdown":"So, do you mean that some users use the newer version of the database and some the older? Or does your application talk to two different versions of the database simultaneously?","body":"So, do you mean that some users use the newer version of the database and some the older? Or does your application talk to two different versions of the database simultaneously?"},{"owner":{"account_id":23351413,"reputation":40,"user_id":17424919,"display_name":"great-jin"},"score":0,"creation_date":1685611419,"post_id":76371633,"comment_id":134685397,"body_markdown":"The user have different version of database.","body":"The user have different version of database."},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1685612054,"post_id":76371633,"comment_id":134685571,"body_markdown":"Are your users programmers who use the library, or are they actual users of the application?","body":"Are your users programmers who use the library, or are they actual users of the application?"},{"owner":{"account_id":23351413,"reputation":40,"user_id":17424919,"display_name":"great-jin"},"score":0,"creation_date":1685612584,"post_id":76371633,"comment_id":134685682,"body_markdown":"No, they just user of the application.","body":"No, they just user of the application."}],"owner":{"account_id":23351413,"reputation":40,"user_id":17424919,"display_name":"great-jin"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685522219,"creation_date":1685522219,"question_id":76371633,"body_markdown":"I have a application need to manage with multiple database version, then came with a painful problem with ElastiSearch. I have to compatible with version of 6.8.0 and 7.8.1. As far as I know that maven didn&#39;t supported depend with multiple version of same libary, is anyway to do so?\r\n\r\nFor my problem, I created a project with tree module &quot;elastic-v6&quot;, &quot;elastic-v7&quot; and &quot;elastic-test&quot;,\r\nthe module of v6 and v7 provide relevant version of elasticsearch operation. In my case it was throught the &quot;RestHighLevelClient&quot; to get indexs.\r\n\r\nhere is module-v6 maven definition, and v7 is same but with es version of 7.8.1.\r\n```xml\r\n&lt;artifactId&gt;elastic-v6&lt;/artifactId&gt;\r\n\r\n&lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.elasticsearch&lt;/groupId&gt;\r\n        &lt;artifactId&gt;elasticsearch&lt;/artifactId&gt;\r\n        &lt;version&gt;6.8.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;\r\n        &lt;artifactId&gt;elasticsearch-rest-high-level-client&lt;/artifactId&gt;\r\n        &lt;version&gt;6.8.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\n\r\nboth v6 and v7 module has provide the method &quot;listIndex()&quot;.\r\n```java\r\npublic static Set&lt;String&gt; listIndex(ElasticEntity entity) {\r\n    try (RestHighLevelClient client = Elastic6Client.buildClient(entity)) {\r\n        GetAliasesRequest request = new GetAliasesRequest();\r\n        GetAliasesResponse getAliasesResponse = client.indices()\r\n                    .getAlias(request, RequestOptions.DEFAULT);\r\n        Map&lt;String, Set&lt;AliasMetaData&gt;&gt; map = getAliasesResponse.getAliases();\r\n        return map.keySet();\r\n    } catch (IOException e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n}\r\n```\r\n\r\nHere is module &quot;elastic-test&quot; maven definition, but the es version transfer from v7 will override the v6 version(6.8.0). Is anyway that I can load version of 6.8.0 and 7.8.1 whthin &quot;elastic-test&quot; module in the same time.\r\n```xml\r\n&lt;artifactId&gt;elastic-test&lt;/artifactId&gt;\r\n\r\n&lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.great&lt;/groupId&gt;\r\n        &lt;artifactId&gt;elastic-v7&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.great&lt;/groupId&gt;\r\n        &lt;artifactId&gt;elastic-v6&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\n","title":"Maven how to depended different version of same libary in one module?","body":"<p>I have a application need to manage with multiple database version, then came with a painful problem with ElastiSearch. I have to compatible with version of 6.8.0 and 7.8.1. As far as I know that maven didn't supported depend with multiple version of same libary, is anyway to do so?</p>\n<p>For my problem, I created a project with tree module &quot;elastic-v6&quot;, &quot;elastic-v7&quot; and &quot;elastic-test&quot;,\nthe module of v6 and v7 provide relevant version of elasticsearch operation. In my case it was throught the &quot;RestHighLevelClient&quot; to get indexs.</p>\n<p>here is module-v6 maven definition, and v7 is same but with es version of 7.8.1.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;artifactId&gt;elastic-v6&lt;/artifactId&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.elasticsearch&lt;/groupId&gt;\n        &lt;artifactId&gt;elasticsearch&lt;/artifactId&gt;\n        &lt;version&gt;6.8.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;\n        &lt;artifactId&gt;elasticsearch-rest-high-level-client&lt;/artifactId&gt;\n        &lt;version&gt;6.8.0&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>both v6 and v7 module has provide the method &quot;listIndex()&quot;.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Set&lt;String&gt; listIndex(ElasticEntity entity) {\n    try (RestHighLevelClient client = Elastic6Client.buildClient(entity)) {\n        GetAliasesRequest request = new GetAliasesRequest();\n        GetAliasesResponse getAliasesResponse = client.indices()\n                    .getAlias(request, RequestOptions.DEFAULT);\n        Map&lt;String, Set&lt;AliasMetaData&gt;&gt; map = getAliasesResponse.getAliases();\n        return map.keySet();\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>Here is module &quot;elastic-test&quot; maven definition, but the es version transfer from v7 will override the v6 version(6.8.0). Is anyway that I can load version of 6.8.0 and 7.8.1 whthin &quot;elastic-test&quot; module in the same time.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;artifactId&gt;elastic-test&lt;/artifactId&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.great&lt;/groupId&gt;\n        &lt;artifactId&gt;elastic-v7&lt;/artifactId&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.great&lt;/groupId&gt;\n        &lt;artifactId&gt;elastic-v6&lt;/artifactId&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"},{"tags":["java","while-loop"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1685510856,"post_id":76370360,"comment_id":134668387,"body_markdown":"Think about this expression `(inputValue &gt;= -20) || (inputValue &lt;=  25)` What does `||` mean? Look at each of the two comparisons for 30. Which is true? Which is false? What happens after you apply `||` to those values? Should the final result be true or false for 30?","body":"Think about this expression <code>(inputValue &gt;= -20) || (inputValue &lt;=  25)</code> What does <code>||</code> mean? Look at each of the two comparisons for 30. Which is true? Which is false? What happens after you apply <code>||</code> to those values? Should the final result be true or false for 30?"},{"owner":{"account_id":28174094,"reputation":37,"user_id":21532140,"display_name":"garcGut"},"score":0,"creation_date":1685511117,"post_id":76370360,"comment_id":134668424,"body_markdown":"&amp;&amp; instead of || thanks everyone!","body":"&amp;&amp; instead of || thanks everyone!"}],"answers":[{"comments":[{"owner":{"account_id":28174094,"reputation":37,"user_id":21532140,"display_name":"garcGut"},"score":0,"creation_date":1685511079,"post_id":76370389,"comment_id":134668418,"body_markdown":"&amp;&amp; instead of || ...got it thanks!!!!","body":"&amp;&amp; instead of || ...got it thanks!!!!"}],"tags":[],"owner":{"account_id":36607,"reputation":101051,"user_id":104458,"accept_rate":91,"display_name":"selbie"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1685510873,"creation_date":1685510873,"answer_id":76370389,"question_id":76370360,"body_markdown":"Look at this statement **very, very closely**:\r\n\r\n    while( (inputValue &gt;= -20) || (inputValue &lt;=  25)) {\r\n\r\nAnd specifically what the while statement is evaluating;\r\n\r\n    ((inputValue &gt;= -20) || (inputValue &lt;=  25))\r\n\r\nIf inputValue is say... `-49`, what does that expression evaluate to?  true for false?\r\n\r\nBe careful!\r\n\r\n","title":"While loops with numbers in Java","body":"<p>Look at this statement <strong>very, very closely</strong>:</p>\n<pre><code>while( (inputValue &gt;= -20) || (inputValue &lt;=  25)) {\n</code></pre>\n<p>And specifically what the while statement is evaluating;</p>\n<pre><code>((inputValue &gt;= -20) || (inputValue &lt;=  25))\n</code></pre>\n<p>If inputValue is say... <code>-49</code>, what does that expression evaluate to?  true for false?</p>\n<p>Be careful!</p>\n"}],"owner":{"account_id":28174094,"reputation":37,"user_id":21532140,"display_name":"garcGut"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":258,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1685616547,"accepted_answer_id":76370389,"answer_count":1,"score":1,"last_activity_date":1685521766,"creation_date":1685510521,"question_id":76370360,"body_markdown":"my code won&#39;t output what it should the instructions: \r\nRead integers from input until an integer is read that is not in the range -20 to 25, both inclusive. Output the total number of integers read, including the integer that causes reading to stop. End with a newline.\r\n\r\nEx: If the input is -13 -49 -17 -16 -11, then the output is:\r\n\r\nNumber of integers read: 2\r\nMy code: \r\n\r\n```java\r\nimport java.util.Scanner;\r\n\r\n public class CountRead {\r\n    public static void main(String[] args) {\r\n        Scanner scnr = new Scanner(System.in);\r\n        int inputValue;\r\n        int countRead;\r\n\r\n        inputValue = scnr.nextInt();\r\n        countRead = 0;\r\n\r\n        while ((inputValue &gt;= -20) || (inputValue &lt;= 25)) {\r\n            countRead++;\r\n            inputValue = scnr.nextInt();\r\n        }\r\n\r\n        System.out.println(&quot;Number of integers read: &quot; + (countRead + 1));\r\n\r\n    }\r\n}\r\n```\r\n\r\n \r\n","title":"While loops with numbers in Java","body":"<p>my code won't output what it should the instructions:\nRead integers from input until an integer is read that is not in the range -20 to 25, both inclusive. Output the total number of integers read, including the integer that causes reading to stop. End with a newline.</p>\n<p>Ex: If the input is -13 -49 -17 -16 -11, then the output is:</p>\n<p>Number of integers read: 2\nMy code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\n public class CountRead {\n    public static void main(String[] args) {\n        Scanner scnr = new Scanner(System.in);\n        int inputValue;\n        int countRead;\n\n        inputValue = scnr.nextInt();\n        countRead = 0;\n\n        while ((inputValue &gt;= -20) || (inputValue &lt;= 25)) {\n            countRead++;\n            inputValue = scnr.nextInt();\n        }\n\n        System.out.println(&quot;Number of integers read: &quot; + (countRead + 1));\n\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","elasticsearch","opensearch"],"answers":[{"tags":[],"owner":{"account_id":11452871,"reputation":1,"user_id":8394828,"display_name":"Mohit Rawat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685521739,"creation_date":1685447883,"answer_id":76364568,"question_id":76317177,"body_markdown":"Upgrading to **2.6.0** worked for me. Seems like ***_type*** missing from **xcontentparser** while reading response. \r\n\r\nDocWriteResponse class needs ***_type*** to be non null but using **1.1.0** was leading this property to be null and it was internally leading to NPE.","title":"Problem in Using Opensearch with Spring Boot Application","body":"<p>Upgrading to <strong>2.6.0</strong> worked for me. Seems like <em><strong>_type</strong></em> missing from <strong>xcontentparser</strong> while reading response.</p>\n<p>DocWriteResponse class needs <em><strong>_type</strong></em> to be non null but using <strong>1.1.0</strong> was leading this property to be null and it was internally leading to NPE.</p>\n"}],"owner":{"account_id":28664107,"reputation":1,"user_id":21948501,"display_name":"Ruthvik Manapragada"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1685521739,"creation_date":1684861777,"question_id":76317177,"body_markdown":"Problem in Using Opensearch with Spring Boot Application\r\n\r\nI am trying to use OpenSearch with my SpringBoot Application. As there is no dedicated Spring Boot Starter Open Search Dependency for Open Search. I am Using Spring Boot Starter data elastic search dependency and maven dependecy for opensearch rest high level client and open search. \r\n\r\nLater in the config class, I am Configuring my Open Search like Port and hostName using Instance of Rest High Level Client. \r\n\r\nSo Now, To perform CRUD operations in OpenSearch Using Java, We can use the In Built Methods like save, findById, findAll, deleteById etc by making our Repository Interface Extend ElasticSearchRepository.\r\n\r\nBut My Issue is while Adding Data into DB using save(T t) method like Cricketer cricketer = repo.save(Cricketer) the data is getting saved in the DB but I am getting an Exception with message &quot;java.lang.RuntimeException: Unable to parse response body for Response{requestLine=PUT /game-index1/_doc/2009?timeout=1m HTTP/1.1, host=http://localhost:9200, response=HTTP/1.1 201 Created}&quot;\r\n\r\nThis Issue is only with save method, for the Get Methods like findById and findAll are also working fine. Only save method has this problem.\r\n\r\nAlso while starting the spring boot application, although the application is getting started, its is stating there is an version mismatch between Elasticsearch Client and Cluster: 7.12.1 - 2.7.0, But here the problem is the cluster is of openserach and there is no 7.x version of it. Please Help me in rectifying this issue.\r\n\r\n\r\n-&gt; My Dependencies in pom.xml are \r\n    `\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;\r\n\t&lt;version&gt;2.5.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.opensearch.client&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;opensearch-rest-high-level-client&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.1.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n\t&lt;groupId&gt;org.opensearch&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;opensearch&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.1.0&lt;/version&gt;\r\n    &lt;/dependency&gt;`\r\n```\r\n\r\n-&gt; -&gt; My OpenSearch Config Class is :\r\n    `\r\n```\r\n@Configuration\r\n    @EnableElasticsearchRepositories(basePackageClasses = CricketerRepo.class)\r\n    @ComponentScan(basePackageClasses = OpenSearchConfig.class)\r\n    public class OpenSearchConfig {\r\n       @Bean\r\n       public RestHighLevelClient client() {\r\n           return new RestHighLevelClient(\r\n                   RestClient.builder(new HttpHost(&quot;localhost&quot;, 9200, &quot;http&quot;)));\r\n       }\r\n    }`\r\n```\r\n\r\nNote : Here I disabled the Login Part for OpenSearch for Posting purpose.\r\n\r\n-&gt; My Document class is :\r\n   \r\n```\r\n @Document(indexName = &quot;game-index1&quot;)\r\n    public class Cricketer {\r\n       @Id\r\n       private String cID;\r\n       private String cName;\r\n       private String cRole;\r\n       private String cCountry;\r\n    }\r\n```\r\n\r\n-&gt; My Repository Class is : \r\n   \r\n```\r\n @Repository\r\n    public interface CricketerRepo extends ElasticsearchRepository&lt;Cricketer, String&gt; {\r\n    }\r\n```\r\n\r\n-&gt; My Add Method in Service Class is :\r\n    \r\n```\r\n@Autowired\r\n    CricketerRepo repository;\r\n\r\n    public Cricketer addCricketer(Cricketer cricketer) {\r\n      return repository.save(cricketer); // Exception occuring at this line\r\n    }\r\n```\r\n\r\n-&gt; Here the date I wanted to save in DB (Opensearch is getting save successfully, But as that save method should return something, Cricketer in this case. I am getting an Exception stating unable to parse Responce)\r\n\r\n-&gt; Exception I am getting is : \r\n   java.lang.RuntimeException: Unable to parse response body for Response{requestLine=PUT /game-index1/_doc/2009?timeout=1m HTTP/1.1, host=http://localhost:9200, response=HTTP/1.1 201 Created}\r\n    \r\n-&gt; The Version mismatch message I am getting while starting the spring boot application is :\r\n   Version mismatch in between Elasticsearch Client and Cluster: 7.12.1 - 2.7.0\r\n\r\n   Note : Even Though It is saying there is a version mismatch the spring boot application is starting fine and Also the Get Methods like findById and findAll are also working fine. Only save method has this problem.\r\n\r\n\r\n   ","title":"Problem in Using Opensearch with Spring Boot Application","body":"<p>Problem in Using Opensearch with Spring Boot Application</p>\n<p>I am trying to use OpenSearch with my SpringBoot Application. As there is no dedicated Spring Boot Starter Open Search Dependency for Open Search. I am Using Spring Boot Starter data elastic search dependency and maven dependecy for opensearch rest high level client and open search.</p>\n<p>Later in the config class, I am Configuring my Open Search like Port and hostName using Instance of Rest High Level Client.</p>\n<p>So Now, To perform CRUD operations in OpenSearch Using Java, We can use the In Built Methods like save, findById, findAll, deleteById etc by making our Repository Interface Extend ElasticSearchRepository.</p>\n<p>But My Issue is while Adding Data into DB using save(T t) method like Cricketer cricketer = repo.save(Cricketer) the data is getting saved in the DB but I am getting an Exception with message &quot;java.lang.RuntimeException: Unable to parse response body for Response{requestLine=PUT /game-index1/_doc/2009?timeout=1m HTTP/1.1, host=http://localhost:9200, response=HTTP/1.1 201 Created}&quot;</p>\n<p>This Issue is only with save method, for the Get Methods like findById and findAll are also working fine. Only save method has this problem.</p>\n<p>Also while starting the spring boot application, although the application is getting started, its is stating there is an version mismatch between Elasticsearch Client and Cluster: 7.12.1 - 2.7.0, But here the problem is the cluster is of openserach and there is no 7.x version of it. Please Help me in rectifying this issue.</p>\n<p>-&gt; My Dependencies in pom.xml are\n`</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;\n    &lt;version&gt;2.5.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.opensearch.client&lt;/groupId&gt;\n    &lt;artifactId&gt;opensearch-rest-high-level-client&lt;/artifactId&gt;\n    &lt;version&gt;1.1.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n    &lt;groupId&gt;org.opensearch&lt;/groupId&gt;\n    &lt;artifactId&gt;opensearch&lt;/artifactId&gt;\n    &lt;version&gt;1.1.0&lt;/version&gt;\n    &lt;/dependency&gt;`\n</code></pre>\n<p>-&gt; -&gt; My OpenSearch Config Class is :\n`</p>\n<pre><code>@Configuration\n    @EnableElasticsearchRepositories(basePackageClasses = CricketerRepo.class)\n    @ComponentScan(basePackageClasses = OpenSearchConfig.class)\n    public class OpenSearchConfig {\n       @Bean\n       public RestHighLevelClient client() {\n           return new RestHighLevelClient(\n                   RestClient.builder(new HttpHost(&quot;localhost&quot;, 9200, &quot;http&quot;)));\n       }\n    }`\n</code></pre>\n<p>Note : Here I disabled the Login Part for OpenSearch for Posting purpose.</p>\n<p>-&gt; My Document class is :</p>\n<pre><code> @Document(indexName = &quot;game-index1&quot;)\n    public class Cricketer {\n       @Id\n       private String cID;\n       private String cName;\n       private String cRole;\n       private String cCountry;\n    }\n</code></pre>\n<p>-&gt; My Repository Class is :</p>\n<pre><code> @Repository\n    public interface CricketerRepo extends ElasticsearchRepository&lt;Cricketer, String&gt; {\n    }\n</code></pre>\n<p>-&gt; My Add Method in Service Class is :</p>\n<pre><code>@Autowired\n    CricketerRepo repository;\n\n    public Cricketer addCricketer(Cricketer cricketer) {\n      return repository.save(cricketer); // Exception occuring at this line\n    }\n</code></pre>\n<p>-&gt; Here the date I wanted to save in DB (Opensearch is getting save successfully, But as that save method should return something, Cricketer in this case. I am getting an Exception stating unable to parse Responce)</p>\n<p>-&gt; Exception I am getting is :\njava.lang.RuntimeException: Unable to parse response body for Response{requestLine=PUT /game-index1/_doc/2009?timeout=1m HTTP/1.1, host=http://localhost:9200, response=HTTP/1.1 201 Created}</p>\n<p>-&gt; The Version mismatch message I am getting while starting the spring boot application is :\nVersion mismatch in between Elasticsearch Client and Cluster: 7.12.1 - 2.7.0</p>\n<p>Note : Even Though It is saying there is a version mismatch the spring boot application is starting fine and Also the Get Methods like findById and findAll are also working fine. Only save method has this problem.</p>\n"},{"tags":["java","spring-boot","huawei-cloud"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1685530702,"post_id":76371287,"comment_id":134672151,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":23658819,"reputation":36,"user_id":17686659,"display_name":"cakepbm"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685521643,"creation_date":1685521643,"answer_id":76371557,"question_id":76371287,"body_markdown":"Here is a way but it is impossible to guarantee 100% that photos/videos won&#39;t be leaked if another user gets the URL. The solution is to use `signed URLs` with a validity period. legal users can still get a regenerated signed URL even after the original one has expired.\r\n\r\n```\r\nimport com.obs.services.ObsClient;\r\nimport com.obs.services.model.TemporarySignatureRequest;\r\nimport com.obs.services.model.TemporarySignatureResponse;\r\n\r\nObsClient obsClient = new ObsClient(&quot;access key&quot;, &quot;secret key&quot;, &quot;obs endpoint&quot;);\r\n\r\n// Create a request for a temporary signed URL\r\nTemporarySignatureRequest request = new TemporarySignatureRequest();\r\nrequest.setMethod(&quot;GET&quot;);\r\nrequest.setBucketName(&quot;bucket name&quot;);\r\nrequest.setObjectName(&quot;object name&quot;);\r\nrequest.setExpires(3600);  // Set URL to expire after 1 hour\r\n\r\n// Get the temporary signed URL\r\nTemporarySignatureResponse response = obsClient.createTemporarySignature(request);\r\nString signedUrl = response.getSignedUrl();\r\n```\r\n\r\nYou can shorten the expires to increase security .\r\nbut nothing is completely secure.","title":"How to private image/video with CDN address","body":"<p>Here is a way but it is impossible to guarantee 100% that photos/videos won't be leaked if another user gets the URL. The solution is to use <code>signed URLs</code> with a validity period. legal users can still get a regenerated signed URL even after the original one has expired.</p>\n<pre><code>import com.obs.services.ObsClient;\nimport com.obs.services.model.TemporarySignatureRequest;\nimport com.obs.services.model.TemporarySignatureResponse;\n\nObsClient obsClient = new ObsClient(&quot;access key&quot;, &quot;secret key&quot;, &quot;obs endpoint&quot;);\n\n// Create a request for a temporary signed URL\nTemporarySignatureRequest request = new TemporarySignatureRequest();\nrequest.setMethod(&quot;GET&quot;);\nrequest.setBucketName(&quot;bucket name&quot;);\nrequest.setObjectName(&quot;object name&quot;);\nrequest.setExpires(3600);  // Set URL to expire after 1 hour\n\n// Get the temporary signed URL\nTemporarySignatureResponse response = obsClient.createTemporarySignature(request);\nString signedUrl = response.getSignedUrl();\n</code></pre>\n<p>You can shorten the expires to increase security .\nbut nothing is completely secure.</p>\n"}],"owner":{"account_id":28660046,"reputation":1,"user_id":21945139,"display_name":"dempsey"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1685521643,"creation_date":1685519538,"question_id":76371287,"body_markdown":"\r\nI have a springboot project and use huawei&#39;s cloud to store pictures and videos.\r\nThe problem is how can I prevent other people from seeing the photos/videos when they have a CDN address that I have not allowed.\r\n\r\nI tried to find out, I know the cloud server side can solve this problem\r\n\r\nBut I want to know if there is a way to handle it on the code side, if so, how?\r\nPlease let me know if you have the answer.\r\n\r\nSorry I am not allowed to show the project code.\r\n\r\nThanks!!\r\n\r\n","title":"How to private image/video with CDN address","body":"<p>I have a springboot project and use huawei's cloud to store pictures and videos.\nThe problem is how can I prevent other people from seeing the photos/videos when they have a CDN address that I have not allowed.</p>\n<p>I tried to find out, I know the cloud server side can solve this problem</p>\n<p>But I want to know if there is a way to handle it on the code side, if so, how?\nPlease let me know if you have the answer.</p>\n<p>Sorry I am not allowed to show the project code.</p>\n<p>Thanks!!</p>\n"},{"tags":["java","spring","security","configuration"],"comments":[{"owner":{"account_id":16478744,"reputation":150,"user_id":11905991,"display_name":"Man Man Yu"},"score":1,"creation_date":1695106611,"post_id":61388484,"comment_id":135975971,"body_markdown":"@Archmede have same issue with you, donnot want to write a lot of dummy code, have you solved the problem yet","body":"@Archmede have same issue with you, donnot want to write a lot of dummy code, have you solved the problem yet"},{"owner":{"account_id":8104679,"reputation":1650,"user_id":6106641,"accept_rate":80,"display_name":"Archmede"},"score":0,"creation_date":1695146583,"post_id":61388484,"comment_id":135984065,"body_markdown":"@ManManYu I didn&#39;t ask this question but you&#39;re probably better off solving the problem with something like `@PreAuthorize(&quot;hasAuthorityOrWildcardAction(&#39;&#39;)&quot;)` at the controller level","body":"@ManManYu I didn&#39;t ask this question but you&#39;re probably better off solving the problem with something like <code>@PreAuthorize(&quot;hasAuthorityOrWildcardAction(&#39;&#39;)&quot;)</code> at the controller level"}],"owner":{"account_id":18239078,"reputation":21,"user_id":13276433,"display_name":"JochenSchotte"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":396,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1685521443,"creation_date":1587648663,"question_id":61388484,"body_markdown":"While configuring the security of my Spring Boot application, I wanted to secure parts of the API depending on the PathVariable that is entered there. My current configuration is as follows:\r\n\r\n    @EnableWebSecurity\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n        //not important\r\n\r\n        @Override\r\n        public void configure(HttpSecurity http) throws Exception {\r\n            http.cors();\r\n            http.authorizeRequests()\r\n                .mvcMatchers(&quot;/api&quot;).authenticated()\r\n                .mvcMatchers(&quot;/api/TEST&quot;).hasAuthority(&quot;SCOPE_dep:TEST&quot;)\r\n                .and().oauth2ResourceServer().jwt();\r\n        }\r\n    }\r\n\r\nIn the `api/{PathVariable}` endpoint is the one I want to have customized, making sure that someone with the authority `SCOPE_dep:TEST` can access the `api/TEST` endpoint, someone with `SCOPE_dep:TEST2` authority can access the `api/TEST2` endpoint, even allowing more than one such endpoint for a user which has multiple of these authorities.\r\n\r\nIs there a way to do this by using a type of wildcard/matcher that I&#39;m unaware of, or is the only possibility to hardcode all these different authorities?","title":"Spring Security - Wildcards/matchers in authorization rules","body":"<p>While configuring the security of my Spring Boot application, I wanted to secure parts of the API depending on the PathVariable that is entered there. My current configuration is as follows:</p>\n<pre><code>@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    //not important\n\n    @Override\n    public void configure(HttpSecurity http) throws Exception {\n        http.cors();\n        http.authorizeRequests()\n            .mvcMatchers(&quot;/api&quot;).authenticated()\n            .mvcMatchers(&quot;/api/TEST&quot;).hasAuthority(&quot;SCOPE_dep:TEST&quot;)\n            .and().oauth2ResourceServer().jwt();\n    }\n}\n</code></pre>\n<p>In the <code>api/{PathVariable}</code> endpoint is the one I want to have customized, making sure that someone with the authority <code>SCOPE_dep:TEST</code> can access the <code>api/TEST</code> endpoint, someone with <code>SCOPE_dep:TEST2</code> authority can access the <code>api/TEST2</code> endpoint, even allowing more than one such endpoint for a user which has multiple of these authorities.</p>\n<p>Is there a way to do this by using a type of wildcard/matcher that I'm unaware of, or is the only possibility to hardcode all these different authorities?</p>\n"},{"tags":["java","intellij-idea","apache-camel"],"comments":[{"owner":{"account_id":1282416,"reputation":12126,"user_id":1236217,"accept_rate":100,"display_name":"Namphibian"},"score":0,"creation_date":1507153784,"post_id":46572048,"comment_id":80102978,"body_markdown":"See https://www.jetbrains.com/help/idea/configuring-code-style.html.","body":"See <a href=\"https://www.jetbrains.com/help/idea/configuring-code-style.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/configuring-code-style.html</a>."},{"owner":{"account_id":2264130,"reputation":38917,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":1,"creation_date":1507201053,"post_id":46572048,"comment_id":80120697,"body_markdown":"close voter - why is this off-topic? it&#39;s a clear question about a DSL and a programming tool. If you don&#39;t understand the question, please ask why.","body":"close voter - why is this off-topic? it&#39;s a clear question about a DSL and a programming tool. If you don&#39;t understand the question, please ask why."},{"owner":{"account_id":2264130,"reputation":38917,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":0,"creation_date":1507201115,"post_id":46572048,"comment_id":80120740,"body_markdown":"@well - I never found a way to do this, so just don&#39;t format the code. It&#39;s nice to have the indenting in the DSL code... just never use the auto format feature.","body":"@well - I never found a way to do this, so just don&#39;t format the code. It&#39;s nice to have the indenting in the DSL code... just never use the auto format feature."}],"answers":[{"comments":[{"owner":{"account_id":7793862,"reputation":591,"user_id":6099620,"display_name":"well"},"score":0,"creation_date":1507225405,"post_id":46579150,"comment_id":80136596,"body_markdown":"Yes, I have found this solution before, but I thought there should be a better way to do it. Thanks for answer.","body":"Yes, I have found this solution before, but I thought there should be a better way to do it. Thanks for answer."}],"tags":[],"owner":{"account_id":1470353,"reputation":1531,"user_id":1382079,"display_name":"Tadayoshi Sato"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1507184894,"creation_date":1507184894,"answer_id":46579150,"question_id":46572048,"body_markdown":"I don&#39;t think there is yet a nice plugin that can format Java DSL code as desired.\r\n\r\nAt best we can only disable formatting the specific DSL parts in Java code. I would recommend to use the formatter on/off feature in IntelliJ IDEA for Camel DSL routes:\r\n\r\n    // @formatter:off\r\n    ...\r\n    // @formatter:on\r\n\r\nYou can find the `Formatter Control` settings in `Preferences...` -&gt; `Editor` -&gt; `Code Style` (as of 2017.2.3).\r\n\r\nRefer to other StackOverflow questions such as this for more details on the IntelliJ feature:  \r\nhttps://stackoverflow.com/questions/3375307/how-to-disable-code-formatting-for-some-part-of-the-code-using-comments","title":"Apache Camel and Intellij Idea code format","body":"<p>I don't think there is yet a nice plugin that can format Java DSL code as desired.</p>\n\n<p>At best we can only disable formatting the specific DSL parts in Java code. I would recommend to use the formatter on/off feature in IntelliJ IDEA for Camel DSL routes:</p>\n\n<pre><code>// @formatter:off\n...\n// @formatter:on\n</code></pre>\n\n<p>You can find the <code>Formatter Control</code> settings in <code>Preferences...</code> -> <code>Editor</code> -> <code>Code Style</code> (as of 2017.2.3).</p>\n\n<p>Refer to other StackOverflow questions such as this for more details on the IntelliJ feature:<br>\n<a href=\"https://stackoverflow.com/questions/3375307/how-to-disable-code-formatting-for-some-part-of-the-code-using-comments\">How to disable code formatting for some part of the code using comments?</a></p>\n"},{"tags":[],"owner":{"account_id":176018,"reputation":56316,"user_id":406429,"display_name":"Claus Ibsen"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1685521068,"creation_date":1507196908,"answer_id":46582611,"question_id":46572048,"body_markdown":"Starting from Camel IDEA plugin v 0.9.9, it is now possible to reformat your routes written with the Java DSL thanks to the shortcut &lt;kbd&gt;Ctrl&lt;/kbd&gt; + &lt;kbd&gt;Alt&lt;/kbd&gt; + &lt;kbd&gt;L&lt;/kbd&gt; / &lt;kbd&gt;Cmd&lt;/kbd&gt; + &lt;kbd&gt;Option&lt;/kbd&gt; + &lt;kbd&gt;L&lt;/kbd&gt; on a complete file or on a specific text range as shown in the screenshot below:\r\n\r\n[![Reformat a route in Java][1]][1]\r\n\r\n---\r\n\r\nOriginal Answer\r\n\r\nThere is a ticket about this for the Camel IDEA plugin: https://github.com/camel-idea-plugin/camel-idea-plugin/issues/309\r\n\r\nYou can use the +1 to indicate its something desired.\r\n\r\nI personally would also like to have such feature but haven&#39;t had much spare time to work on this as I am busy with regular work, and also finishing my Camel book.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/32zHU.gif","title":"Apache Camel and Intellij Idea code format","body":"<p>Starting from Camel IDEA plugin v 0.9.9, it is now possible to reformat your routes written with the Java DSL thanks to the shortcut <kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>L</kbd> / <kbd>Cmd</kbd> + <kbd>Option</kbd> + <kbd>L</kbd> on a complete file or on a specific text range as shown in the screenshot below:</p>\n<p><a href=\"https://i.stack.imgur.com/32zHU.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/32zHU.gif\" alt=\"Reformat a route in Java\" /></a></p>\n<hr />\n<p>Original Answer</p>\n<p>There is a ticket about this for the Camel IDEA plugin: <a href=\"https://github.com/camel-idea-plugin/camel-idea-plugin/issues/309\" rel=\"nofollow noreferrer\">https://github.com/camel-idea-plugin/camel-idea-plugin/issues/309</a></p>\n<p>You can use the +1 to indicate its something desired.</p>\n<p>I personally would also like to have such feature but haven't had much spare time to work on this as I am busy with regular work, and also finishing my Camel book.</p>\n"}],"owner":{"account_id":7793862,"reputation":591,"user_id":6099620,"display_name":"well"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3818,"favorite_count":0,"down_vote_count":1,"up_vote_count":18,"answer_count":2,"score":17,"last_activity_date":1685521068,"creation_date":1507142693,"question_id":46572048,"body_markdown":"Intellij Idea formats code in camel routs like this: \r\n\r\n    from(&quot;direct:loop&quot;)\r\n         .log(&quot;Loop: ${header[loopCount]}&quot;)\r\n         .choice()\r\n         .when(simple(&quot;header[loopCount] &lt; 10&quot;))\r\n         .process(exchange -&gt; {\r\n             Message in = exchange.getIn();\r\n             in.setHeader(&quot;loopCount&quot;, in.getHeader(&quot;loopCount&quot;, Integer.class) + 1);\r\n         })\r\n         .to(&quot;direct:loop&quot;)\r\n         .otherwise()\r\n         .log(&quot;Exiting loop&quot;)\r\n         .end();\r\nIs there any plugins or other ways to do like this:\r\n\r\n    from(&quot;direct:loop&quot;)\r\n     .log(&quot;Loop: ${header[loopCount]}&quot;)\r\n     .choice()\r\n         .when(simple(&quot;header[loopCount] &lt; 10&quot;))\r\n             .process(exchange -&gt; {\r\n                 Message in = exchange.getIn();\r\n                 in.setHeader(&quot;loopCount&quot;, in.getHeader(&quot;loopCount&quot;, Integer.class) + 1);\r\n             })\r\n             .to(&quot;direct:loop&quot;)\r\n         .otherwise()\r\n             .log(&quot;Exiting loop&quot;)\r\n     .end();\r\n?","title":"Apache Camel and Intellij Idea code format","body":"<p>Intellij Idea formats code in camel routs like this: </p>\n\n<pre><code>from(\"direct:loop\")\n     .log(\"Loop: ${header[loopCount]}\")\n     .choice()\n     .when(simple(\"header[loopCount] &lt; 10\"))\n     .process(exchange -&gt; {\n         Message in = exchange.getIn();\n         in.setHeader(\"loopCount\", in.getHeader(\"loopCount\", Integer.class) + 1);\n     })\n     .to(\"direct:loop\")\n     .otherwise()\n     .log(\"Exiting loop\")\n     .end();\n</code></pre>\n\n<p>Is there any plugins or other ways to do like this:</p>\n\n<pre><code>from(\"direct:loop\")\n .log(\"Loop: ${header[loopCount]}\")\n .choice()\n     .when(simple(\"header[loopCount] &lt; 10\"))\n         .process(exchange -&gt; {\n             Message in = exchange.getIn();\n             in.setHeader(\"loopCount\", in.getHeader(\"loopCount\", Integer.class) + 1);\n         })\n         .to(\"direct:loop\")\n     .otherwise()\n         .log(\"Exiting loop\")\n .end();\n</code></pre>\n\n<p>?</p>\n"},{"tags":["java","spring-webflux","remote-server","redis-cluster"],"owner":{"account_id":21885224,"reputation":3,"user_id":16172947,"display_name":"Amir Nadi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685520653,"creation_date":1685520653,"question_id":76371433,"body_markdown":"firs sorry about my English . \r\ni have a spring webFlux project , i want to connect redis-cluster in remote server. i just run redis-cluster with docker-compose . everything is ok . i have telnet from my pc to remote server in cluster ports . but when i run my project , throws excpetion that can not connect to remote  . can anyone help me ? \r\n\r\n\r\n\r\n\r\n\r\n\r\nmy config : \r\n\r\n```\r\n@Bean\r\n    @Primary\r\n    public LettuceConnectionFactory  reactiveRedisConnectionFactory(RedisClusterConfiguration defaultRedisConfig) {\r\n        LettuceClientConfiguration clientConfig = LettuceClientConfiguration.builder()\r\n                .readFrom(ReadFrom.ANY)\r\n                .commandTimeout(Duration.ofMillis(60000)).build();\r\n     return   new  LettuceConnectionFactory(defaultRedisConfig, clientConfig);\r\n    }\r\n\r\n    @Bean\r\n    RedisClusterConfiguration redisConfiguration() {\r\n        RedisClusterConfiguration  redisClusterConfiguration = new RedisClusterConfiguration(clusterProperties.getNodes());\r\n        redisClusterConfiguration.setMaxRedirects(clusterProperties.getMaxRedirects());\r\n        return redisClusterConfiguration;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    @Bean\r\n    public ReactiveRedisOperations&lt;String, Object&gt; reactiveRedisTemplate( LettuceConnectionFactory  factory) {\r\n        StringRedisSerializer keySerializer = new StringRedisSerializer();\r\n        Jackson2JsonRedisSerializer&lt;Object&gt; valueSerializer = new Jackson2JsonRedisSerializer&lt;&gt;(\r\n                Object.class);\r\n        Jackson2JsonRedisSerializer&lt;String&gt; valueSerializer1 = new Jackson2JsonRedisSerializer&lt;&gt;(\r\n                String.class);\r\n        RedisSerializationContext.RedisSerializationContextBuilder&lt;String, Object&gt; builder = RedisSerializationContext\r\n                .newSerializationContext(keySerializer);\r\n        RedisSerializationContext&lt;String, Object&gt; context = builder.key(valueSerializer1).value(valueSerializer).build();\r\n        return new ReactiveRedisTemplate&lt;&gt;(factory, context);\r\n    }\r\n\r\n```\r\n\r\nRedisClusterConfig : \r\n\r\n```\r\n@Component\r\n@ConfigurationProperties(prefix = &quot;spring.redis.cluster&quot;)\r\npublic class RedisClusterConfig {\r\n\r\n    /*\r\n    * spring.redis.cluster.nodes[0] = 127.0.0.1:7379 spring.redis.cluster.nodes[1]\r\n    * = 127.0.0.1:7380 ...\r\n     */\r\n    private List&lt;String&gt; nodes;\r\n\r\n    /**\r\n     * spring.redis.cluster.max-redirects=3\r\n     */\r\n    private int maxRedirects;\r\n\r\n    /**\r\n     * Get initial collection of known\r\n     * cluster nodes in format\r\n     * {@code host:port}.\r\n     *\r\n     * @return\r\n     */\r\n    public List&lt;String&gt; getNodes() {\r\n        return nodes;\r\n    }\r\n\r\n    public void setNodes(List&lt;String&gt; nodes) {\r\n        this.nodes = nodes;\r\n    }\r\n\r\n    public int getMaxRedirects() {\r\n        return maxRedirects;\r\n    }\r\n\r\n    public void setMaxRedirects(int maxRedirects) {\r\n        this.maxRedirects = maxRedirects;\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n```\r\n\r\nmy yml file : \r\n\r\n\r\n```\r\n\r\nspring:\r\n   redis:\r\n    cluster:\r\n      nodes[0] : &quot;192.168.53.73:7000&quot;\r\n      nodes[1] : &quot;192.168.53.73:7001&quot;\r\n      nodes[2] : &quot;192.168.53.73:7002&quot;\r\n      nodes[3] : &quot;192.168.53.73:7003&quot;\r\n      nodes[4] : &quot;192.168.53.73:7004&quot;\r\n      nodes[5] : &quot;192.168.53.73:7005&quot;\r\n      enabled: true\r\n      max-redirects: 3\r\n\r\n```\r\n\r\nexception :\r\n\r\n\r\n```\r\n\r\n\r\n31-05-2023 10:56:32.914 [reactor-http-nio-4] INFO  i.c.sadad.avatarapi.services.Aspects.redisReactiveCacheGet - Evaluated Redis cacheKey: material\r\n31-05-2023 10:56:43.605 [lettuce-nioEventLoop-8-4] WARN  i.l.c.c.t.DefaultClusterTopologyRefresh.lambda$openConnections$12 - Unable to connect to [10.10.25.7/&lt;unresolved&gt;:7002]: connection timed out: /10.10.25.7:7002\r\n31-05-2023 10:56:43.605 [lettuce-nioEventLoop-8-7] WARN  i.l.c.c.t.DefaultClusterTopologyRefresh.lambda$openConnections$12 - Unable to connect to [10.10.25.2/&lt;unresolved&gt;:7003]: connection timed out: /10.10.25.2:7003\r\n31-05-2023 10:56:43.605 [lettuce-nioEventLoop-8-8] WARN  i.l.c.c.t.DefaultClusterTopologyRefresh.lambda$openConnections$12 - Unable to connect to [10.10.25.3/&lt;unresolved&gt;:7004]: connection timed out: /10.10.25.3:7004\r\n31-05-2023 10:56:43.605 [lettuce-nioEventLoop-8-3] WARN  i.l.c.c.t.DefaultClusterTopologyRefresh.lambda$openConnections$12 - Unable to connect to [10.10.25.6/&lt;unresolved&gt;:7000]: connection timed out: /10.10.25.6:7000\r\n31-05-2023 10:56:43.605 [lettuce-nioEventLoop-8-2] WARN  i.l.c.c.t.DefaultClusterTopologyRefresh.lambda$openConnections$12 - Unable to connect to [10.10.25.5/&lt;unresolved&gt;:7001]: connection timed out: /10.10.25.5:7001\r\n31-05-2023 10:56:43.605 [lettuce-nioEventLoop-8-1] WARN  i.l.c.c.t.DefaultClusterTopologyRefresh.lambda$openConnections$12 - Unable to connect to [10.10.25.4/&lt;unresolved&gt;:7005]: connection timed out: /10.10.25.4:7005\r\n\r\n\r\n\r\n```\r\n\r\n\r\n","title":"Can not connect to redis-cluster in remote server with spring webflux project","body":"<p>firs sorry about my English .\ni have a spring webFlux project , i want to connect redis-cluster in remote server. i just run redis-cluster with docker-compose . everything is ok . i have telnet from my pc to remote server in cluster ports . but when i run my project , throws excpetion that can not connect to remote  . can anyone help me ?</p>\n<p>my config :</p>\n<pre><code>@Bean\n    @Primary\n    public LettuceConnectionFactory  reactiveRedisConnectionFactory(RedisClusterConfiguration defaultRedisConfig) {\n        LettuceClientConfiguration clientConfig = LettuceClientConfiguration.builder()\n                .readFrom(ReadFrom.ANY)\n                .commandTimeout(Duration.ofMillis(60000)).build();\n     return   new  LettuceConnectionFactory(defaultRedisConfig, clientConfig);\n    }\n\n    @Bean\n    RedisClusterConfiguration redisConfiguration() {\n        RedisClusterConfiguration  redisClusterConfiguration = new RedisClusterConfiguration(clusterProperties.getNodes());\n        redisClusterConfiguration.setMaxRedirects(clusterProperties.getMaxRedirects());\n        return redisClusterConfiguration;\n    }\n\n\n\n\n\n    @Bean\n    public ReactiveRedisOperations&lt;String, Object&gt; reactiveRedisTemplate( LettuceConnectionFactory  factory) {\n        StringRedisSerializer keySerializer = new StringRedisSerializer();\n        Jackson2JsonRedisSerializer&lt;Object&gt; valueSerializer = new Jackson2JsonRedisSerializer&lt;&gt;(\n                Object.class);\n        Jackson2JsonRedisSerializer&lt;String&gt; valueSerializer1 = new Jackson2JsonRedisSerializer&lt;&gt;(\n                String.class);\n        RedisSerializationContext.RedisSerializationContextBuilder&lt;String, Object&gt; builder = RedisSerializationContext\n                .newSerializationContext(keySerializer);\n        RedisSerializationContext&lt;String, Object&gt; context = builder.key(valueSerializer1).value(valueSerializer).build();\n        return new ReactiveRedisTemplate&lt;&gt;(factory, context);\n    }\n\n</code></pre>\n<p>RedisClusterConfig :</p>\n<pre><code>@Component\n@ConfigurationProperties(prefix = &quot;spring.redis.cluster&quot;)\npublic class RedisClusterConfig {\n\n    /*\n    * spring.redis.cluster.nodes[0] = 127.0.0.1:7379 spring.redis.cluster.nodes[1]\n    * = 127.0.0.1:7380 ...\n     */\n    private List&lt;String&gt; nodes;\n\n    /**\n     * spring.redis.cluster.max-redirects=3\n     */\n    private int maxRedirects;\n\n    /**\n     * Get initial collection of known\n     * cluster nodes in format\n     * {@code host:port}.\n     *\n     * @return\n     */\n    public List&lt;String&gt; getNodes() {\n        return nodes;\n    }\n\n    public void setNodes(List&lt;String&gt; nodes) {\n        this.nodes = nodes;\n    }\n\n    public int getMaxRedirects() {\n        return maxRedirects;\n    }\n\n    public void setMaxRedirects(int maxRedirects) {\n        this.maxRedirects = maxRedirects;\n    }\n\n}\n\n\n\n</code></pre>\n<p>my yml file :</p>\n<pre><code>\nspring:\n   redis:\n    cluster:\n      nodes[0] : &quot;192.168.53.73:7000&quot;\n      nodes[1] : &quot;192.168.53.73:7001&quot;\n      nodes[2] : &quot;192.168.53.73:7002&quot;\n      nodes[3] : &quot;192.168.53.73:7003&quot;\n      nodes[4] : &quot;192.168.53.73:7004&quot;\n      nodes[5] : &quot;192.168.53.73:7005&quot;\n      enabled: true\n      max-redirects: 3\n\n</code></pre>\n<p>exception :</p>\n<pre><code>\n\n31-05-2023 10:56:32.914 [reactor-http-nio-4] INFO  i.c.sadad.avatarapi.services.Aspects.redisReactiveCacheGet - Evaluated Redis cacheKey: material\n31-05-2023 10:56:43.605 [lettuce-nioEventLoop-8-4] WARN  i.l.c.c.t.DefaultClusterTopologyRefresh.lambda$openConnections$12 - Unable to connect to [10.10.25.7/&lt;unresolved&gt;:7002]: connection timed out: /10.10.25.7:7002\n31-05-2023 10:56:43.605 [lettuce-nioEventLoop-8-7] WARN  i.l.c.c.t.DefaultClusterTopologyRefresh.lambda$openConnections$12 - Unable to connect to [10.10.25.2/&lt;unresolved&gt;:7003]: connection timed out: /10.10.25.2:7003\n31-05-2023 10:56:43.605 [lettuce-nioEventLoop-8-8] WARN  i.l.c.c.t.DefaultClusterTopologyRefresh.lambda$openConnections$12 - Unable to connect to [10.10.25.3/&lt;unresolved&gt;:7004]: connection timed out: /10.10.25.3:7004\n31-05-2023 10:56:43.605 [lettuce-nioEventLoop-8-3] WARN  i.l.c.c.t.DefaultClusterTopologyRefresh.lambda$openConnections$12 - Unable to connect to [10.10.25.6/&lt;unresolved&gt;:7000]: connection timed out: /10.10.25.6:7000\n31-05-2023 10:56:43.605 [lettuce-nioEventLoop-8-2] WARN  i.l.c.c.t.DefaultClusterTopologyRefresh.lambda$openConnections$12 - Unable to connect to [10.10.25.5/&lt;unresolved&gt;:7001]: connection timed out: /10.10.25.5:7001\n31-05-2023 10:56:43.605 [lettuce-nioEventLoop-8-1] WARN  i.l.c.c.t.DefaultClusterTopologyRefresh.lambda$openConnections$12 - Unable to connect to [10.10.25.4/&lt;unresolved&gt;:7005]: connection timed out: /10.10.25.4:7005\n\n\n\n</code></pre>\n"},{"tags":["java","spring-boot","authentication","spring-security","single-sign-on"],"answers":[{"tags":[],"owner":{"account_id":3340442,"reputation":67,"user_id":2806844,"display_name":"Danushka"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589785641,"creation_date":1589785641,"answer_id":61864155,"question_id":61817966,"body_markdown":"Finally can be found the answer for this. Issue is spring boot version. I have changed my spring boot version to 2.1.3.RELEASE. now it is working as expected. But still don&#39;t have idea why it is not working in latest spring boot version.","title":"Spring Boot + Oauth 2 Single Sign-On ridirect uri misbehaviour","body":"<p>Finally can be found the answer for this. Issue is spring boot version. I have changed my spring boot version to 2.1.3.RELEASE. now it is working as expected. But still don't have idea why it is not working in latest spring boot version.</p>\n"},{"tags":[],"owner":{"account_id":7536663,"reputation":91,"user_id":5722702,"display_name":"Neetu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639841491,"creation_date":1639841016,"answer_id":70404650,"question_id":61817966,"body_markdown":"Faced the similar issue :\r\n```\r\nerror=&quot;invalid_grant&quot;, error_description=&quot;Invalid redirect: http://localhost:8082/login does not match one of the registered values: [http://localhost:8082/]&quot;\r\n```\r\nUpdating below line from\r\n\r\n    client.redirectUris(&quot;http://localhost:9292&quot;)\r\nto\r\n\r\n    client.redirectUris(&quot;http://localhost:9292/login&quot;);\r\nresolved the issue for me.\r\n","title":"Spring Boot + Oauth 2 Single Sign-On ridirect uri misbehaviour","body":"<p>Faced the similar issue :</p>\n<pre><code>error=&quot;invalid_grant&quot;, error_description=&quot;Invalid redirect: http://localhost:8082/login does not match one of the registered values: [http://localhost:8082/]&quot;\n</code></pre>\n<p>Updating below line from</p>\n<pre><code>client.redirectUris(&quot;http://localhost:9292&quot;)\n</code></pre>\n<p>to</p>\n<pre><code>client.redirectUris(&quot;http://localhost:9292/login&quot;);\n</code></pre>\n<p>resolved the issue for me.</p>\n"},{"tags":[],"owner":{"account_id":12476582,"reputation":597,"user_id":9082736,"display_name":"Bilal Demir"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685520533,"creation_date":1685520533,"answer_id":76371422,"question_id":61817966,"body_markdown":"You can use Custom RedirectResolver.\r\n\r\nSample Code:\r\n    \r\n    public class CustomRedirectResolver implements RedirectResolver {\r\n    \r\n    \tprivate Collection&lt;String&gt; redirectGrantTypes = Arrays.asList(&quot;implicit&quot;, &quot;authorization_code&quot;);\r\n    \r\n    \tprivate boolean matchSubdomains = false;\r\n    \r\n    \tprivate boolean matchPorts = true;\r\n        \r\n    \tpublic void setMatchSubdomains(boolean matchSubdomains) {\r\n    \t\tthis.matchSubdomains = matchSubdomains;\r\n    \t}\r\n        \r\n    \tpublic void setMatchPorts(boolean matchPorts) {\r\n    \t\tthis.matchPorts = matchPorts;\r\n    \t}\r\n        \r\n    \tpublic void setRedirectGrantTypes(Collection&lt;String&gt; redirectGrantTypes) {\r\n    \t\tthis.redirectGrantTypes = new HashSet&lt;String&gt;(redirectGrantTypes);\r\n    \t}\r\n    \r\n    \tpublic String resolveRedirect(String requestedRedirect, ClientDetails client) throws OAuth2Exception {\r\n    \r\n    \t\tSet&lt;String&gt; authorizedGrantTypes = client.getAuthorizedGrantTypes();\r\n    \t\tif (authorizedGrantTypes.isEmpty()) {\r\n    \t\t\tthrow new InvalidGrantException(&quot;A client must have at least one authorized grant type.&quot;);\r\n    \t\t}\r\n    \t\tif (!containsRedirectGrantType(authorizedGrantTypes)) {\r\n    \t\t\tthrow new InvalidGrantException(\r\n    \t\t\t\t\t&quot;A redirect_uri can only be used by implicit or authorization_code grant types.&quot;);\r\n    \t\t}\r\n    \r\n    \t\tSet&lt;String&gt; registeredRedirectUris = client.getRegisteredRedirectUri();\r\n    \t\tif (registeredRedirectUris == null || registeredRedirectUris.isEmpty()) {\r\n    \t\t\tthrow new InvalidRequestException(&quot;At least one redirect_uri must be registered with the client.&quot;);\r\n    \t\t}\r\n    \t\treturn obtainMatchingRedirect(registeredRedirectUris, requestedRedirect);\r\n    \t}\r\n        \r\n    \tprivate boolean containsRedirectGrantType(Set&lt;String&gt; grantTypes) {\r\n    \t\tfor (String type : grantTypes) {\r\n    \t\t\tif (redirectGrantTypes.contains(type)) {\r\n    \t\t\t\treturn true;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn false;\r\n    \t}\r\n        \r\n    \tprotected boolean redirectMatches(String requestedRedirect, String redirectUri) {\r\n    \t\tUriComponents requestedRedirectUri = UriComponentsBuilder.fromUriString(requestedRedirect).build();\r\n    \t\tUriComponents registeredRedirectUri = UriComponentsBuilder.fromUriString(redirectUri).build();\r\n    \r\n    \t\tboolean schemeMatch = isEqual(registeredRedirectUri.getScheme(), requestedRedirectUri.getScheme());\r\n    \t\tboolean userInfoMatch = isEqual(registeredRedirectUri.getUserInfo(), requestedRedirectUri.getUserInfo());\r\n    \t\tboolean hostMatch = hostMatches(registeredRedirectUri.getHost(), requestedRedirectUri.getHost());\r\n    \t\tboolean portMatch = !matchPorts || registeredRedirectUri.getPort() == requestedRedirectUri.getPort();\r\n    \r\n            // path match condition removed\r\n    \t\treturn schemeMatch &amp;&amp; userInfoMatch &amp;&amp; hostMatch &amp;&amp; portMatch;\r\n    \t}\r\n        \r\n    \tprivate boolean matchQueryParams(MultiValueMap&lt;String, String&gt; registeredRedirectUriQueryParams,\r\n    \t\t\t\t\t\t\t\t\t MultiValueMap&lt;String, String&gt; requestedRedirectUriQueryParams) {\r\n    \r\n    \r\n    \t\tIterator&lt;String&gt; iter = registeredRedirectUriQueryParams.keySet().iterator();\r\n    \t\twhile (iter.hasNext()) {\r\n    \t\t\tString key = iter.next();\r\n    \t\t\tList&lt;String&gt; registeredRedirectUriQueryParamsValues = registeredRedirectUriQueryParams.get(key);\r\n    \t\t\tList&lt;String&gt; requestedRedirectUriQueryParamsValues = requestedRedirectUriQueryParams.get(key);\r\n    \r\n    \t\t\tif (!registeredRedirectUriQueryParamsValues.equals(requestedRedirectUriQueryParamsValues)) {\r\n    \t\t\t\treturn false;\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\treturn true;\r\n    \t}\r\n        \r\n    \tprivate boolean isEqual(String str1, String str2) {\r\n    \t\tif (StringUtils.isEmpty(str1) &amp;&amp; StringUtils.isEmpty(str2)) {\r\n    \t\t\treturn true;\r\n    \t\t} else if (!StringUtils.isEmpty(str1)) {\r\n    \t\t\treturn str1.equals(str2);\r\n    \t\t} else {\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \t}\r\n        \r\n    \tprotected boolean hostMatches(String registered, String requested) {\r\n    \t\tif (matchSubdomains) {\r\n    \t\t\treturn isEqual(registered, requested) || (requested != null &amp;&amp; requested.endsWith(&quot;.&quot; + registered));\r\n    \t\t}\r\n    \t\treturn isEqual(registered, requested);\r\n    \t}\r\n        \r\n    \tprivate String obtainMatchingRedirect(Set&lt;String&gt; redirectUris, String requestedRedirect) {\r\n    \t\tAssert.notEmpty(redirectUris, &quot;Redirect URIs cannot be empty&quot;);\r\n    \r\n    \t\tif (redirectUris.size() == 1 &amp;&amp; requestedRedirect == null) {\r\n    \t\t\treturn redirectUris.iterator().next();\r\n    \t\t}\r\n    \r\n    \t\tfor (String redirectUri : redirectUris) {\r\n    \t\t\tif (requestedRedirect != null &amp;&amp; redirectMatches(requestedRedirect, redirectUri)) {\r\n    \t\t\t\t// Initialize with the registered redirect-uri\r\n    \t\t\t\tUriComponentsBuilder redirectUriBuilder = UriComponentsBuilder.fromUriString(redirectUri);\r\n    \r\n    \t\t\t\tUriComponents requestedRedirectUri = UriComponentsBuilder.fromUriString(requestedRedirect).build();\r\n    \r\n    \t\t\t\tif (this.matchSubdomains) {\r\n    \t\t\t\t\tredirectUriBuilder.host(requestedRedirectUri.getHost());\r\n    \t\t\t\t}\r\n    \t\t\t\tif (!this.matchPorts) {\r\n    \t\t\t\t\tredirectUriBuilder.port(requestedRedirectUri.getPort());\r\n    \t\t\t\t}\r\n    \t\t\t\tredirectUriBuilder.replaceQuery(requestedRedirectUri.getQuery());\t\t// retain additional params (if any)\r\n    \t\t\t\tredirectUriBuilder.fragment(null);\r\n                    // RedirectUri changed to RequestRedirectUri\r\n    \t\t\t\treturn requestedRedirectUri.toUriString();\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tthrow new RedirectMismatchException(&quot;Invalid redirect: &quot; + requestedRedirect\r\n    \t\t\t\t+ &quot; does not match one of the registered values.&quot;);\r\n    \t}\r\n    }\r\n\r\nYou need to configuration class:\r\n\r\n    @Configuration\r\n    public class AuthorizartionConfigurer extends AuthorizationServerConfigurerAdapter {\r\n    \r\n            \r\n        @Override\r\n        public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {\r\n            // some configurations code here\r\n            // ...\r\n            endpoints.redirectResolver(new CustomRedirectResolver());\r\n        }\r\n    \r\n    }\r\n\r\n","title":"Spring Boot + Oauth 2 Single Sign-On ridirect uri misbehaviour","body":"<p>You can use Custom RedirectResolver.</p>\n<p>Sample Code:</p>\n<pre><code>public class CustomRedirectResolver implements RedirectResolver {\n\n    private Collection&lt;String&gt; redirectGrantTypes = Arrays.asList(&quot;implicit&quot;, &quot;authorization_code&quot;);\n\n    private boolean matchSubdomains = false;\n\n    private boolean matchPorts = true;\n    \n    public void setMatchSubdomains(boolean matchSubdomains) {\n        this.matchSubdomains = matchSubdomains;\n    }\n    \n    public void setMatchPorts(boolean matchPorts) {\n        this.matchPorts = matchPorts;\n    }\n    \n    public void setRedirectGrantTypes(Collection&lt;String&gt; redirectGrantTypes) {\n        this.redirectGrantTypes = new HashSet&lt;String&gt;(redirectGrantTypes);\n    }\n\n    public String resolveRedirect(String requestedRedirect, ClientDetails client) throws OAuth2Exception {\n\n        Set&lt;String&gt; authorizedGrantTypes = client.getAuthorizedGrantTypes();\n        if (authorizedGrantTypes.isEmpty()) {\n            throw new InvalidGrantException(&quot;A client must have at least one authorized grant type.&quot;);\n        }\n        if (!containsRedirectGrantType(authorizedGrantTypes)) {\n            throw new InvalidGrantException(\n                    &quot;A redirect_uri can only be used by implicit or authorization_code grant types.&quot;);\n        }\n\n        Set&lt;String&gt; registeredRedirectUris = client.getRegisteredRedirectUri();\n        if (registeredRedirectUris == null || registeredRedirectUris.isEmpty()) {\n            throw new InvalidRequestException(&quot;At least one redirect_uri must be registered with the client.&quot;);\n        }\n        return obtainMatchingRedirect(registeredRedirectUris, requestedRedirect);\n    }\n    \n    private boolean containsRedirectGrantType(Set&lt;String&gt; grantTypes) {\n        for (String type : grantTypes) {\n            if (redirectGrantTypes.contains(type)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    \n    protected boolean redirectMatches(String requestedRedirect, String redirectUri) {\n        UriComponents requestedRedirectUri = UriComponentsBuilder.fromUriString(requestedRedirect).build();\n        UriComponents registeredRedirectUri = UriComponentsBuilder.fromUriString(redirectUri).build();\n\n        boolean schemeMatch = isEqual(registeredRedirectUri.getScheme(), requestedRedirectUri.getScheme());\n        boolean userInfoMatch = isEqual(registeredRedirectUri.getUserInfo(), requestedRedirectUri.getUserInfo());\n        boolean hostMatch = hostMatches(registeredRedirectUri.getHost(), requestedRedirectUri.getHost());\n        boolean portMatch = !matchPorts || registeredRedirectUri.getPort() == requestedRedirectUri.getPort();\n\n        // path match condition removed\n        return schemeMatch &amp;&amp; userInfoMatch &amp;&amp; hostMatch &amp;&amp; portMatch;\n    }\n    \n    private boolean matchQueryParams(MultiValueMap&lt;String, String&gt; registeredRedirectUriQueryParams,\n                                     MultiValueMap&lt;String, String&gt; requestedRedirectUriQueryParams) {\n\n\n        Iterator&lt;String&gt; iter = registeredRedirectUriQueryParams.keySet().iterator();\n        while (iter.hasNext()) {\n            String key = iter.next();\n            List&lt;String&gt; registeredRedirectUriQueryParamsValues = registeredRedirectUriQueryParams.get(key);\n            List&lt;String&gt; requestedRedirectUriQueryParamsValues = requestedRedirectUriQueryParams.get(key);\n\n            if (!registeredRedirectUriQueryParamsValues.equals(requestedRedirectUriQueryParamsValues)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n    \n    private boolean isEqual(String str1, String str2) {\n        if (StringUtils.isEmpty(str1) &amp;&amp; StringUtils.isEmpty(str2)) {\n            return true;\n        } else if (!StringUtils.isEmpty(str1)) {\n            return str1.equals(str2);\n        } else {\n            return false;\n        }\n    }\n    \n    protected boolean hostMatches(String registered, String requested) {\n        if (matchSubdomains) {\n            return isEqual(registered, requested) || (requested != null &amp;&amp; requested.endsWith(&quot;.&quot; + registered));\n        }\n        return isEqual(registered, requested);\n    }\n    \n    private String obtainMatchingRedirect(Set&lt;String&gt; redirectUris, String requestedRedirect) {\n        Assert.notEmpty(redirectUris, &quot;Redirect URIs cannot be empty&quot;);\n\n        if (redirectUris.size() == 1 &amp;&amp; requestedRedirect == null) {\n            return redirectUris.iterator().next();\n        }\n\n        for (String redirectUri : redirectUris) {\n            if (requestedRedirect != null &amp;&amp; redirectMatches(requestedRedirect, redirectUri)) {\n                // Initialize with the registered redirect-uri\n                UriComponentsBuilder redirectUriBuilder = UriComponentsBuilder.fromUriString(redirectUri);\n\n                UriComponents requestedRedirectUri = UriComponentsBuilder.fromUriString(requestedRedirect).build();\n\n                if (this.matchSubdomains) {\n                    redirectUriBuilder.host(requestedRedirectUri.getHost());\n                }\n                if (!this.matchPorts) {\n                    redirectUriBuilder.port(requestedRedirectUri.getPort());\n                }\n                redirectUriBuilder.replaceQuery(requestedRedirectUri.getQuery());       // retain additional params (if any)\n                redirectUriBuilder.fragment(null);\n                // RedirectUri changed to RequestRedirectUri\n                return requestedRedirectUri.toUriString();\n            }\n        }\n\n        throw new RedirectMismatchException(&quot;Invalid redirect: &quot; + requestedRedirect\n                + &quot; does not match one of the registered values.&quot;);\n    }\n}\n</code></pre>\n<p>You need to configuration class:</p>\n<pre><code>@Configuration\npublic class AuthorizartionConfigurer extends AuthorizationServerConfigurerAdapter {\n\n        \n    @Override\n    public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {\n        // some configurations code here\n        // ...\n        endpoints.redirectResolver(new CustomRedirectResolver());\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":3340442,"reputation":67,"user_id":2806844,"display_name":"Danushka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1084,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1685520533,"creation_date":1589541516,"question_id":61817966,"body_markdown":"I need to implement Single Sign-On application using Spring Boot (2.1.9.RELEASE) and OAuth2. I have created two client application and authentication server as well. When i hit client application URL it successfully redirect to the authentication server and validate username and password. But when it redirect back to the client application always gives below oauth error.\r\n\r\n    error=&quot;invalid_grant&quot;, error_description=&quot;Invalid redirect: http://localhost:8082/app1/login does not match one of the registered values: [http://localhost:8082/app1]&quot;\r\n\r\nHere i have noticed that always append **/login** path automatically to the end of redirect uri. Maybe it is the default behavior of the Spring Boot SSO. I have tried many ways to resolve this error but couldn&#39;t. Can anyone help me.\r\n\r\nI have followed sample project [sample project][1]\r\n\r\n**Steps**\r\n\r\n 1. Hit client application url (http://localhost:8082/app1)\r\n 2. Successfully redirect to the authentication server (http://localhost:8081/auth/login)\r\n 3. enter username  and password and validate\r\n 4. redirect URL with error\r\nhttp://localhost:8081/auth/oauth/authorize?client_id=foo&amp;redirect_uri=http://localhost:8082/app1/login&amp;response_type=code&amp;state=03W7yX\r\n\r\n**Authentication Server**\r\n\r\n**POM file**\r\n\r\n    &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n            &lt;java.version&gt;11&lt;/java.version&gt;\r\n            &lt;spring-cloud.version&gt;Finchley.SR1&lt;/spring-cloud.version&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.security.oauth.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-security-oauth2-autoconfigure&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.0-b170127.1453&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;dependencyManagement&gt;\r\n            &lt;dependencies&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n                    &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n                    &lt;type&gt;pom&lt;/type&gt;\r\n                    &lt;scope&gt;import&lt;/scope&gt;\r\n                &lt;/dependency&gt;\r\n            &lt;/dependencies&gt;\r\n        &lt;/dependencyManagement&gt;\r\n**Main Class**\r\n\r\n    @SpringBootApplication\r\n    @EnableResourceServer\r\n    public class TestProjectApplication {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(TestProjectApplication.class, args);\r\n        }\r\n    }\r\n\r\n**Security config class**\r\n\r\n    @Configuration\r\n    @Order(1)\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http.requestMatchers()\r\n                    .antMatchers(&quot;/login&quot;, &quot;/oauth/authorize&quot;)\r\n                    .and()\r\n                    .authorizeRequests()\r\n                    .anyRequest().authenticated()\r\n                    .and()\r\n                    .formLogin().permitAll();\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n            auth.inMemoryAuthentication()\r\n                    .withUser(&quot;john&quot;)\r\n                    .password(passwordEncoder().encode(&quot;123&quot;))\r\n                    .roles(&quot;USER&quot;);\r\n        }\r\n    \r\n        @Bean\r\n        public BCryptPasswordEncoder passwordEncoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    }\r\n\r\n**Client Application**\r\n\r\n**POM File**\r\n\r\n    &lt;properties&gt;\r\n    \t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    \t\t&lt;spring-cloud.version&gt;Finchley.SR1&lt;/spring-cloud.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-cloud-starter-oauth2&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;dependencyManagement&gt;\r\n    \t\t&lt;dependencies&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n    \t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n    \t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t&lt;/dependencies&gt;\r\n    \t&lt;/dependencyManagement&gt;\r\n\r\n**Main Class**\r\n\r\n    @SpringBootApplication\r\n    @EnableOAuth2Sso\r\n    public class App1Application implements WebMvcConfigurer {\r\n    \r\n        @Override\r\n        public void addViewControllers(ViewControllerRegistry registry) {\r\n            registry.addViewController(&quot;/&quot;).setViewName(&quot;index&quot;);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(App1Application.class, args);\r\n        }\r\n    \r\n    }\r\n\r\n**Application.yml**\r\n\r\n    server:\r\n      port: 8082\r\n      servlet:\r\n        context-path: /app1\r\n    spring:\r\n      main:\r\n        allow-bean-definition-overriding: true\r\n    security:\r\n      basic:\r\n        enabled: false\r\n      oauth2:\r\n        client:\r\n          clientId: foo\r\n          clientSecret: bar\r\n          accessTokenUri: http://localhost:8081/auth/oauth/token\r\n          userAuthorizationUri: http://localhost:8081/auth/oauth/authorize\r\n        resource:\r\n          userInfoUri: http://localhost:8080/auth/user/me\r\n\r\n  [1]: https://github.com/nkhs007/spring-boot-sso","title":"Spring Boot + Oauth 2 Single Sign-On ridirect uri misbehaviour","body":"<p>I need to implement Single Sign-On application using Spring Boot (2.1.9.RELEASE) and OAuth2. I have created two client application and authentication server as well. When i hit client application URL it successfully redirect to the authentication server and validate username and password. But when it redirect back to the client application always gives below oauth error.</p>\n\n<pre><code>error=\"invalid_grant\", error_description=\"Invalid redirect: http://localhost:8082/app1/login does not match one of the registered values: [http://localhost:8082/app1]\"\n</code></pre>\n\n<p>Here i have noticed that always append <strong>/login</strong> path automatically to the end of redirect uri. Maybe it is the default behavior of the Spring Boot SSO. I have tried many ways to resolve this error but couldn't. Can anyone help me.</p>\n\n<p>I have followed sample project <a href=\"https://github.com/nkhs007/spring-boot-sso\" rel=\"nofollow noreferrer\">sample project</a></p>\n\n<p><strong>Steps</strong></p>\n\n<ol>\n<li>Hit client application url (<a href=\"http://localhost:8082/app1\" rel=\"nofollow noreferrer\">http://localhost:8082/app1</a>)</li>\n<li>Successfully redirect to the authentication server (<a href=\"http://localhost:8081/auth/login\" rel=\"nofollow noreferrer\">http://localhost:8081/auth/login</a>)</li>\n<li>enter username  and password and validate</li>\n<li>redirect URL with error\n<a href=\"http://localhost:8081/auth/oauth/authorize?client_id=foo&amp;redirect_uri=http://localhost:8082/app1/login&amp;response_type=code&amp;state=03W7yX\" rel=\"nofollow noreferrer\">http://localhost:8081/auth/oauth/authorize?client_id=foo&amp;redirect_uri=http://localhost:8082/app1/login&amp;response_type=code&amp;state=03W7yX</a></li>\n</ol>\n\n<p><strong>Authentication Server</strong></p>\n\n<p><strong>POM file</strong></p>\n\n<pre><code>&lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;Finchley.SR1&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security.oauth.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-oauth2-autoconfigure&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0-b170127.1453&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n</code></pre>\n\n<p><strong>Main Class</strong></p>\n\n<pre><code>@SpringBootApplication\n@EnableResourceServer\npublic class TestProjectApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(TestProjectApplication.class, args);\n    }\n}\n</code></pre>\n\n<p><strong>Security config class</strong></p>\n\n<pre><code>@Configuration\n@Order(1)\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.requestMatchers()\n                .antMatchers(\"/login\", \"/oauth/authorize\")\n                .and()\n                .authorizeRequests()\n                .anyRequest().authenticated()\n                .and()\n                .formLogin().permitAll();\n    }\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.inMemoryAuthentication()\n                .withUser(\"john\")\n                .password(passwordEncoder().encode(\"123\"))\n                .roles(\"USER\");\n    }\n\n    @Bean\n    public BCryptPasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n\n<p><strong>Client Application</strong></p>\n\n<p><strong>POM File</strong></p>\n\n<pre><code>&lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;spring-cloud.version&gt;Finchley.SR1&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-oauth2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n            &lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n</code></pre>\n\n<p><strong>Main Class</strong></p>\n\n<pre><code>@SpringBootApplication\n@EnableOAuth2Sso\npublic class App1Application implements WebMvcConfigurer {\n\n    @Override\n    public void addViewControllers(ViewControllerRegistry registry) {\n        registry.addViewController(\"/\").setViewName(\"index\");\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(App1Application.class, args);\n    }\n\n}\n</code></pre>\n\n<p><strong>Application.yml</strong></p>\n\n<pre><code>server:\n  port: 8082\n  servlet:\n    context-path: /app1\nspring:\n  main:\n    allow-bean-definition-overriding: true\nsecurity:\n  basic:\n    enabled: false\n  oauth2:\n    client:\n      clientId: foo\n      clientSecret: bar\n      accessTokenUri: http://localhost:8081/auth/oauth/token\n      userAuthorizationUri: http://localhost:8081/auth/oauth/authorize\n    resource:\n      userInfoUri: http://localhost:8080/auth/user/me\n</code></pre>\n"},{"tags":["java","hibernate","count","hql","jpql"],"comments":[{"owner":{"account_id":4000458,"reputation":17823,"user_id":3296621,"accept_rate":78,"display_name":"Smutje"},"score":0,"creation_date":1401097091,"post_id":23867119,"comment_id":36736160,"body_markdown":"What is this, Java 4? It even did not have generics...","body":"What is this, Java 4? It even did not have generics..."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1401097174,"post_id":23867119,"comment_id":36736215,"body_markdown":"you miss the `group by` statement!!","body":"you miss the <code>group by</code> statement!!"},{"owner":{"account_id":3860808,"reputation":5608,"user_id":3198603,"accept_rate":70,"display_name":"user3198603"},"score":0,"creation_date":1401097282,"post_id":23867119,"comment_id":36736277,"body_markdown":"groupBy is not mandatory","body":"groupBy is not mandatory"},{"owner":{"account_id":1879878,"reputation":24286,"user_id":1700321,"display_name":"Aleksandr M"},"score":1,"creation_date":1401098723,"post_id":23867119,"comment_id":36737041,"body_markdown":"@jubinPatel: The question seems more about **why** not how.","body":"@jubinPatel: The question seems more about <b>why</b> not how."}],"answers":[{"comments":[{"owner":{"account_id":3860808,"reputation":5608,"user_id":3198603,"accept_rate":70,"display_name":"user3198603"},"score":0,"creation_date":1401097443,"post_id":23867237,"comment_id":36736357,"body_markdown":"In that case it throws the exception org.hibernate.NonUniqueResultException: query did not return a unique result:","body":"In that case it throws the exception org.hibernate.NonUniqueResultException: query did not return a unique result:"},{"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"score":0,"creation_date":1401097685,"post_id":23867237,"comment_id":36736477,"body_markdown":"Try replacing (*) with the entity alias (e.g. cd). I updated my response.","body":"Try replacing (*) with the entity alias (e.g. cd). I updated my response."},{"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"score":0,"creation_date":1401114629,"post_id":23867237,"comment_id":36745863,"body_markdown":"Please post the entity too. I am curious about some EAGER ToMany associations.","body":"Please post the entity too. I am curious about some EAGER ToMany associations."}],"tags":[],"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1685520441,"creation_date":1401097340,"answer_id":23867237,"question_id":23867119,"body_markdown":"This issue may be caused by entity inheritance. Most likely that the `CustomerData` is the base class of other subclasses.\r\n\r\nSo, you should select from the actual subclass.","title":"Hibernate JPQL is returning multiple results for a count(*) query","body":"<p>This issue may be caused by entity inheritance. Most likely that the <code>CustomerData</code> is the base class of other subclasses.</p>\n<p>So, you should select from the actual subclass.</p>\n"},{"tags":[],"owner":{"account_id":1384517,"reputation":1982,"user_id":1665095,"accept_rate":70,"display_name":"Jubin Patel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401098343,"creation_date":1401098343,"answer_id":23867556,"question_id":23867119,"body_markdown":"Your code is perfect, at the end of your query just add this\r\n\r\n    return ((Integer)test.get(0)).intValue();\r\n\r\nOR\r\n\r\n    Integer result = ((Integer) test.get(0)).intValue();\r\n\r\n[Reference link][1]\r\n\r\n\r\n  [1]: http://forum.spring.io/forum/spring-projects/data/19639-dao-count-for-hibernate","title":"Hibernate JPQL is returning multiple results for a count(*) query","body":"<p>Your code is perfect, at the end of your query just add this</p>\n\n<pre><code>return ((Integer)test.get(0)).intValue();\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>Integer result = ((Integer) test.get(0)).intValue();\n</code></pre>\n\n<p><a href=\"http://forum.spring.io/forum/spring-projects/data/19639-dao-count-for-hibernate\" rel=\"nofollow\">Reference link</a></p>\n"},{"tags":[],"owner":{"account_id":13251388,"reputation":21,"user_id":9568803,"display_name":"willycha0119"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671817373,"creation_date":1671817373,"answer_id":74902538,"question_id":23867119,"body_markdown":"It&#39;s a bit late, but I&#39;ll reply anyway.\r\n\r\nIn my case, I got 3 rows while I use &#39;select count(a) from TaskAttachment&#39;,\r\n\r\njust because I have another 2 domain object called TaskPostAttachment and \r\n\r\nTaskDiscussionAttachment, and then these 2 domain object all extend my \r\n\r\nTaskAttachment for some reason,\r\n\r\nso I create another domain object called RootAttachment,\r\n\r\nand then these 3 TaskAttachment object all extend the RootAttachment,\r\n\r\nthen the problem will be resolved.\r\n\r\nsorry for my bad English. ","title":"Hibernate JPQL is returning multiple results for a count(*) query","body":"<p>It's a bit late, but I'll reply anyway.</p>\n<p>In my case, I got 3 rows while I use 'select count(a) from TaskAttachment',</p>\n<p>just because I have another 2 domain object called TaskPostAttachment and</p>\n<p>TaskDiscussionAttachment, and then these 2 domain object all extend my</p>\n<p>TaskAttachment for some reason,</p>\n<p>so I create another domain object called RootAttachment,</p>\n<p>and then these 3 TaskAttachment object all extend the RootAttachment,</p>\n<p>then the problem will be resolved.</p>\n<p>sorry for my bad English.</p>\n"}],"owner":{"account_id":3860808,"reputation":5608,"user_id":3198603,"accept_rate":70,"display_name":"user3198603"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1204,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":23867237,"answer_count":3,"score":1,"last_activity_date":1685520512,"creation_date":1401096978,"question_id":23867119,"body_markdown":"I have the below code in my Dao:   \r\n\r\n    String query = SELECT COUNT(*)  FROM CustomerData ;\r\n \r\n    Query query = session.createQuery(query);\r\n    List test = query.list();\r\n    \r\n    it returns a list with a size of 2. It contains the following value [1,0]\r\n    \r\nHow come it&#39;s returning 2 rows when it&#39;s not possible, as I have used COUNT(*) in the select clause, which will always return a single value? \r\n\r\nIs Hibernate doing something here?","title":"Hibernate JPQL is returning multiple results for a count(*) query","body":"<p>I have the below code in my Dao:</p>\n<pre><code>String query = SELECT COUNT(*)  FROM CustomerData ;\n\nQuery query = session.createQuery(query);\nList test = query.list();\n\nit returns a list with a size of 2. It contains the following value [1,0]\n</code></pre>\n<p>How come it's returning 2 rows when it's not possible, as I have used COUNT(*) in the select clause, which will always return a single value?</p>\n<p>Is Hibernate doing something here?</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":1626020,"reputation":405,"user_id":1501567,"display_name":"nedenom"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1450209438,"creation_date":1450209145,"answer_id":34298171,"question_id":34297666,"body_markdown":"You can pass it on the command line: \r\n\r\n    java -Dlibrary.system.property=value -jar myapp.jar ","title":"Pass system property to spring boot","body":"<p>You can pass it on the command line: </p>\n\n<pre><code>java -Dlibrary.system.property=value -jar myapp.jar \n</code></pre>\n"},{"tags":[],"owner":{"account_id":7984243,"reputation":71,"user_id":6024351,"display_name":"Praveen"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1470208793,"creation_date":1470207514,"answer_id":38736508,"question_id":34297666,"body_markdown":"If you are using spring-boot maven plugin to execute the application, try (no line breaks)\r\n\r\n    mvn spring-boot:run -Drun.jvmArguments=&quot;-Xms2048m -Xmx4000m -XX:MaxPermSize=2048m \r\n    -Dlibrary.system.property=value&quot;\r\n\r\n\r\nRefer [maven plugin][1] for additional details\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-boot/docs/current/maven-plugin/run-mojo.html","title":"Pass system property to spring boot","body":"<p>If you are using spring-boot maven plugin to execute the application, try (no line breaks)</p>\n\n<pre><code>mvn spring-boot:run -Drun.jvmArguments=\"-Xms2048m -Xmx4000m -XX:MaxPermSize=2048m \n-Dlibrary.system.property=value\"\n</code></pre>\n\n<p>Refer <a href=\"http://docs.spring.io/spring-boot/docs/current/maven-plugin/run-mojo.html\" rel=\"nofollow\">maven plugin</a> for additional details</p>\n"},{"comments":[{"owner":{"account_id":6112668,"reputation":839,"user_id":4768616,"accept_rate":54,"display_name":"Hoang"},"score":0,"creation_date":1519492839,"post_id":38747357,"comment_id":84936828,"body_markdown":"Put System.setProperty same you said it will run ok but i don&#39;t understand yet why must put it before SpringApplication.run() ?","body":"Put System.setProperty same you said it will run ok but i don&#39;t understand yet why must put it before SpringApplication.run() ?"},{"owner":{"account_id":2546050,"reputation":409,"user_id":2210838,"accept_rate":73,"display_name":"Jan Siekierski"},"score":0,"creation_date":1530731154,"post_id":38747357,"comment_id":89341779,"body_markdown":"You set a system property before running your application. Then inside your application you can use this system property.","body":"You set a system property before running your application. Then inside your application you can use this system property."},{"owner":{"account_id":114848,"reputation":134189,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"score":2,"creation_date":1627057057,"post_id":38747357,"comment_id":121063945,"body_markdown":"Alas, that doesn&#39;t work for all properties. A few (notably `java.util.logging.manager`) _must_ be set prior to this.","body":"Alas, that doesn&#39;t work for all properties. A few (notably <code>java.util.logging.manager</code>) <i>must</i> be set prior to this."}],"tags":[],"owner":{"account_id":2546050,"reputation":409,"user_id":2210838,"accept_rate":73,"display_name":"Jan Siekierski"},"comment_count":3,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1470236850,"creation_date":1470236850,"answer_id":38747357,"question_id":34297666,"body_markdown":"you can also do it like this:\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSystem.setProperty(&quot;key&quot;, &quot;value&quot;);\r\n\t\tSpringApplication.run(MyApplication.class);\r\n\t}","title":"Pass system property to spring boot","body":"<p>you can also do it like this:</p>\n\n<pre><code>public static void main(String[] args) {\n    System.setProperty(\"key\", \"value\");\n    SpringApplication.run(MyApplication.class);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1052025,"reputation":5610,"user_id":1055715,"accept_rate":83,"display_name":"Surasin Tancharoen"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1685520197,"creation_date":1578510784,"answer_id":59652415,"question_id":34297666,"body_markdown":"**Update 2020-01-08**\r\n\r\nFor spring-boot **2.2.2.RELEASE** while develop\r\n\r\n    mvn spring-boot:run -Dspring-boot.run.jvmArguments=&quot;-Dmy_system_properties=test1&quot;\r\n\r\nFor spring-boot **1.5.x.RELEASE** or below  while develop\r\n\r\n    mvn spring-boot:run -Drun.jvmArguments=&quot;-Dmy_system_properties=test1&quot;\r\n\r\nFor run as **jar**\r\n\r\n    java -Dmy_system_properties=test1 -jar service.jar \r\n\r\nYou can try with a runnable example, here https://www.surasint.com/spring-boot-pass-system-properties-in-command-line/\r\n","title":"Pass system property to spring boot","body":"<p><strong>Update 2020-01-08</strong></p>\n<p>For spring-boot <strong>2.2.2.RELEASE</strong> while develop</p>\n<pre><code>mvn spring-boot:run -Dspring-boot.run.jvmArguments=&quot;-Dmy_system_properties=test1&quot;\n</code></pre>\n<p>For spring-boot <strong>1.5.x.RELEASE</strong> or below  while develop</p>\n<pre><code>mvn spring-boot:run -Drun.jvmArguments=&quot;-Dmy_system_properties=test1&quot;\n</code></pre>\n<p>For run as <strong>jar</strong></p>\n<pre><code>java -Dmy_system_properties=test1 -jar service.jar \n</code></pre>\n<p>You can try with a runnable example, here <a href=\"https://www.surasint.com/spring-boot-pass-system-properties-in-command-line/\" rel=\"nofollow noreferrer\">https://www.surasint.com/spring-boot-pass-system-properties-in-command-line/</a></p>\n"}],"owner":{"account_id":2209133,"reputation":3193,"user_id":1951544,"accept_rate":60,"display_name":"zibi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20810,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":34298171,"answer_count":4,"score":10,"last_activity_date":1685520197,"creation_date":1450207422,"question_id":34297666,"body_markdown":"A library I need to use reads system property in the following way:\r\n\r\n    System.getProperty(&quot;library.system.property&quot;)\r\n\r\nIs there any way to pass such a property to spring boot while starting the app or do I need to set it in the system?","title":"Pass system property to spring boot","body":"<p>A library I need to use reads system property in the following way:</p>\n\n<pre><code>System.getProperty(\"library.system.property\")\n</code></pre>\n\n<p>Is there any way to pass such a property to spring boot while starting the app or do I need to set it in the system?</p>\n"},{"tags":["java","spring","hibernate","configuration","transactions"],"comments":[{"owner":{"account_id":161943,"reputation":22096,"user_id":383087,"accept_rate":89,"display_name":"Evgeni Dimitrov"},"score":2,"creation_date":1424419263,"post_id":28624052,"comment_id":45549457,"body_markdown":"Do you have `&lt;tx:annotation-driven/&gt;`","body":"Do you have <code>&lt;tx:annotation-driven&#47;&gt;</code>"},{"owner":{"account_id":104911,"reputation":119222,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"score":0,"creation_date":1424420491,"post_id":28624052,"comment_id":45549980,"body_markdown":"have a look at these answer: http://stackoverflow.com/a/4396530/280244","body":"have a look at these answer: <a href=\"http://stackoverflow.com/a/4396530/280244\">stackoverflow.com/a/4396530/280244</a>"},{"owner":{"account_id":4097931,"reputation":8214,"user_id":3364187,"display_name":"Xstian"},"score":0,"creation_date":1424421594,"post_id":28624052,"comment_id":45550468,"body_markdown":"[See here](http://stackoverflow.com/a/25910635/3364187)","body":"<a href=\"http://stackoverflow.com/a/25910635/3364187\">See here</a>"},{"owner":{"account_id":2357292,"reputation":5009,"user_id":2064835,"accept_rate":72,"display_name":"ankit"},"score":0,"creation_date":1424423953,"post_id":28624052,"comment_id":45551688,"body_markdown":"@Evgeni yes its there","body":"@Evgeni yes its there"},{"owner":{"account_id":2019478,"reputation":4894,"user_id":1806005,"accept_rate":56,"display_name":"hi_my_name_is"},"score":0,"creation_date":1425297517,"post_id":28624052,"comment_id":45890718,"body_markdown":"how do you call saveRequest? From another method in same class?","body":"how do you call saveRequest? From another method in same class?"},{"owner":{"account_id":2357292,"reputation":5009,"user_id":2064835,"accept_rate":72,"display_name":"ankit"},"score":0,"creation_date":1425299833,"post_id":28624052,"comment_id":45892020,"body_markdown":"no it is getting called from service layer , and also I have tried moving @ transactional to service layer @freakman","body":"no it is getting called from service layer , and also I have tried moving @ transactional to service layer @freakman"},{"owner":{"account_id":1694567,"reputation":911,"user_id":1556234,"accept_rate":40,"display_name":"ema"},"score":0,"creation_date":1425641300,"post_id":28624052,"comment_id":46055051,"body_markdown":"Have you tried instead of &quot;org.hibernate.context.internal.ThreadLocalSessionContext&quot; putting &quot;thread&quot;? According to doc there are 3 short values for out-of-the-box implementations: &quot;jta&quot;, &quot;thread&quot;, and &quot;managed&quot;","body":"Have you tried instead of &quot;org.hibernate.context.internal.ThreadLocalSessionContext&quot; putting &quot;thread&quot;? According to doc there are 3 short values for out-of-the-box implementations: &quot;jta&quot;, &quot;thread&quot;, and &quot;managed&quot;"}],"answers":[{"tags":[],"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1425335876,"creation_date":1425335876,"answer_id":28820772,"question_id":28624052,"body_markdown":"You definitely don&#39;t need this setting:\r\n\r\n    &lt;beans:prop key=&quot;hibernate.current_session_context_class&quot;&gt;org.hibernate.context.internal.ThreadLocalSessionContext&lt;/beans:prop&gt;\r\n\r\nSpring Transaction Management layer should bind the Hibernate Session to the current running Thread.\r\n\r\nThe settings are fine, the only thing that might cause it comes from this statement of yours:\r\n\r\n&gt; no it is getting called from service layer , and also I have tried\r\n&gt; moving @ transactional to service layer\r\n\r\nYou need to expose this method:\r\n\r\n    Request saveRequest(Request request);\r\n\r\nthrough a Service interface, that you inject in any other component (web or other service layer beans).\r\n\r\nTo validate this, you can place a debug break-point in the `saveRequest` method implementation, and look for the [TransactionInterceptor][1] up the call-stack. If it&#39;s not there, then Spring couldn&#39;t wrap your method call into a Transaction Aspect processing logic.\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/transaction/interceptor/TransactionInterceptor.html","title":"How to fix the &quot;No CurrentSessionContext configured&quot; with Spring and Hibernate","body":"<p>You definitely don't need this setting:</p>\n\n<pre><code>&lt;beans:prop key=\"hibernate.current_session_context_class\"&gt;org.hibernate.context.internal.ThreadLocalSessionContext&lt;/beans:prop&gt;\n</code></pre>\n\n<p>Spring Transaction Management layer should bind the Hibernate Session to the current running Thread.</p>\n\n<p>The settings are fine, the only thing that might cause it comes from this statement of yours:</p>\n\n<blockquote>\n  <p>no it is getting called from service layer , and also I have tried\n  moving @ transactional to service layer</p>\n</blockquote>\n\n<p>You need to expose this method:</p>\n\n<pre><code>Request saveRequest(Request request);\n</code></pre>\n\n<p>through a Service interface, that you inject in any other component (web or other service layer beans).</p>\n\n<p>To validate this, you can place a debug break-point in the <code>saveRequest</code> method implementation, and look for the <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/transaction/interceptor/TransactionInterceptor.html\" rel=\"nofollow\">TransactionInterceptor</a> up the call-stack. If it's not there, then Spring couldn't wrap your method call into a Transaction Aspect processing logic.</p>\n"},{"tags":[],"owner":{"account_id":435280,"reputation":14323,"user_id":821786,"display_name":"Gergely Bacso"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1425671673,"creation_date":1425671673,"answer_id":28906589,"question_id":28624052,"body_markdown":"Having your function annotated as Transactional is not necessarily enough. You also need to ensure that:\r\n\r\n - Your bean gets created via Spring (defined as @Component and found via componentScan OR declared in xml configuration)\r\n - The reference to your bean needs to be obtained through Spring dependency injection","title":"How to fix the &quot;No CurrentSessionContext configured&quot; with Spring and Hibernate","body":"<p>Having your function annotated as Transactional is not necessarily enough. You also need to ensure that:</p>\n\n<ul>\n<li>Your bean gets created via Spring (defined as @Component and found via componentScan OR declared in xml configuration)</li>\n<li>The reference to your bean needs to be obtained through Spring dependency injection</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1425761401,"creation_date":1425761401,"answer_id":28919830,"question_id":28624052,"body_markdown":"For `@Transactional` to be effective you have to tell the Spring context that you want to use that. Annotations without a processor for that annotation is pretty useless. To enable the processor for the `@Transactional` annotation add `&lt;tx:annotation-driven /&gt;` to your context. (As explained [here][1] in the reference guide).\r\n\r\nYour hibernate configuration is also problematic when using Spring you shouldn&#39;t mess around with the `hibernate.current_session_context_class` configuration property (unless you use some specific JTA provider but apparently you aren&#39;t). If you start setting that property you will break proper spring integration for transaction management. Spring already sets that property for you and your setting overrides the default. \r\n\r\nYour configuration should look something like this.\r\n\r\n\t&lt;beans:bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate4.LocalSessionFactoryBean&quot;&gt;\r\n\t\t&lt;beans:property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\r\n\t\t&lt;beans:property name=&quot;packagesToScan&quot; value=&quot;com.hcentive.cig.domain&quot; /&gt;\r\n\t\t&lt;beans:property name=&quot;hibernateProperties&quot;&gt;\r\n\t\t\t&lt;beans:props&gt;\r\n\t\t\t\t&lt;beans:prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/beans:prop&gt;\r\n\t\t\t\t&lt;beans:prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/beans:prop&gt;\r\n\t\t\t\t&lt;beans:prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/beans:prop&gt;\r\n\t\t\t&lt;/beans:props&gt;\r\n\t\t&lt;/beans:property&gt;\r\n\t&lt;/beans:bean&gt; \t\r\n\r\n\t&lt;beans:bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.hibernate4.HibernateTransactionManager&quot;&gt;\r\n\t\t\t&lt;beans:property name=&quot;sessionFactory&quot; ref bean=&quot;sessionFactory&quot; /&gt;\r\n\t&lt;/beans:bean&gt;\r\n\r\n\t&lt;tx:annotation-driven /&gt;\r\n\r\n[1]: http://docs.spring.io/spring/docs/current/spring-framework-reference/html/transaction.html#transaction-declarative-annotations","title":"How to fix the &quot;No CurrentSessionContext configured&quot; with Spring and Hibernate","body":"<p>For <code>@Transactional</code> to be effective you have to tell the Spring context that you want to use that. Annotations without a processor for that annotation is pretty useless. To enable the processor for the <code>@Transactional</code> annotation add <code>&lt;tx:annotation-driven /&gt;</code> to your context. (As explained <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/transaction.html#transaction-declarative-annotations\" rel=\"nofollow\">here</a> in the reference guide).</p>\n\n<p>Your hibernate configuration is also problematic when using Spring you shouldn't mess around with the <code>hibernate.current_session_context_class</code> configuration property (unless you use some specific JTA provider but apparently you aren't). If you start setting that property you will break proper spring integration for transaction management. Spring already sets that property for you and your setting overrides the default. </p>\n\n<p>Your configuration should look something like this.</p>\n\n<pre><code>&lt;beans:bean id=\"sessionFactory\" class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n    &lt;beans:property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;beans:property name=\"packagesToScan\" value=\"com.hcentive.cig.domain\" /&gt;\n    &lt;beans:property name=\"hibernateProperties\"&gt;\n        &lt;beans:props&gt;\n            &lt;beans:prop key=\"hibernate.hbm2ddl.auto\"&gt;update&lt;/beans:prop&gt;\n            &lt;beans:prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQLDialect&lt;/beans:prop&gt;\n            &lt;beans:prop key=\"hibernate.show_sql\"&gt;true&lt;/beans:prop&gt;\n        &lt;/beans:props&gt;\n    &lt;/beans:property&gt;\n&lt;/beans:bean&gt;   \n\n&lt;beans:bean id=\"transactionManager\" class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n        &lt;beans:property name=\"sessionFactory\" ref bean=\"sessionFactory\" /&gt;\n&lt;/beans:bean&gt;\n\n&lt;tx:annotation-driven /&gt;\n</code></pre>\n"}],"owner":{"account_id":2357292,"reputation":5009,"user_id":2064835,"accept_rate":72,"display_name":"ankit"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1957,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1685520048,"creation_date":1424418911,"question_id":28624052,"body_markdown":"I was using programmatic transaction management in spring, now I have switched to declarative transaction management. \r\n\r\nSessionFactory \r\n\r\n    &lt;beans:bean id=&quot;sessionFactory&quot;\r\n    \t\tclass=&quot;org.springframework.orm.hibernate4.LocalSessionFactoryBean&quot;&gt;\r\n    \t\t&lt;beans:property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\r\n    \t\t&lt;beans:property name=&quot;packagesToScan&quot; value=&quot;com.hcentive.cig.domain&quot; /&gt;\r\n    \t\t&lt;beans:property name=&quot;hibernateProperties&quot;&gt;\r\n    \t\t\t&lt;beans:props&gt;\r\n    \t\t\t\t&lt;beans:prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/beans:prop&gt;\r\n    \t\t\t\t&lt;beans:prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect\r\n    \t\t\t\t&lt;/beans:prop&gt;\r\n    \t\t\t\t&lt;beans:prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/beans:prop&gt;\r\n    \t\t\t\t&lt;beans:prop key=&quot;hibernate.current_session_context_class&quot;&gt;org.hibernate.context.internal.ThreadLocalSessionContext&lt;/beans:prop&gt;\r\n    \t\t\t&lt;/beans:props&gt;\r\n    \t\t&lt;/beans:property&gt;\r\n    \t&lt;/beans:bean&gt; \r\n\r\n\r\nTransactionManager \r\n\r\n    &lt;beans:bean id=&quot;transactionManager&quot;\r\n    \t\tclass=&quot;org.springframework.orm.hibernate4.HibernateTransactionManager&quot;&gt;\r\n    \t\t&lt;beans:property name=&quot;sessionFactory&quot;&gt;\r\n    \t\t\t&lt;beans:ref bean=&quot;sessionFactory&quot; /&gt;\r\n    \t\t&lt;/beans:property&gt;\r\n    \t&lt;/beans:bean&gt;\r\n\r\n\r\nNow If run my code\r\n\r\n    @Override\r\n    \t@Transactional\r\n    \tpublic Request saveRequest(Request request) {\r\n    \t\tsessionFactory.getCurrentSession().save(request);\r\n    \t\treturn request;\r\n    \t}\r\n\r\n&gt; I get exception save is not valid without an active transaction\r\n\r\n\r\nif I remove below line\r\n\r\n\t\t\r\n\r\n    &lt;beans:prop key=&quot;hibernate.current_session_context_class&quot;&gt;org.hibernate.context.internal.ThreadLocalSessionContext&lt;/beans:prop&gt;\r\n\r\n\r\nI get \r\n\r\n    \r\n\r\n&gt; No CurrentSessionContext configured!","title":"How to fix the &quot;No CurrentSessionContext configured&quot; with Spring and Hibernate","body":"<p>I was using programmatic transaction management in spring, now I have switched to declarative transaction management. </p>\n\n<p>SessionFactory </p>\n\n<pre><code>&lt;beans:bean id=\"sessionFactory\"\n        class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n        &lt;beans:property name=\"dataSource\" ref=\"dataSource\" /&gt;\n        &lt;beans:property name=\"packagesToScan\" value=\"com.hcentive.cig.domain\" /&gt;\n        &lt;beans:property name=\"hibernateProperties\"&gt;\n            &lt;beans:props&gt;\n                &lt;beans:prop key=\"hibernate.hbm2ddl.auto\"&gt;update&lt;/beans:prop&gt;\n                &lt;beans:prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQLDialect\n                &lt;/beans:prop&gt;\n                &lt;beans:prop key=\"hibernate.show_sql\"&gt;true&lt;/beans:prop&gt;\n                &lt;beans:prop key=\"hibernate.current_session_context_class\"&gt;org.hibernate.context.internal.ThreadLocalSessionContext&lt;/beans:prop&gt;\n            &lt;/beans:props&gt;\n        &lt;/beans:property&gt;\n    &lt;/beans:bean&gt; \n</code></pre>\n\n<p>TransactionManager </p>\n\n<pre><code>&lt;beans:bean id=\"transactionManager\"\n        class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n        &lt;beans:property name=\"sessionFactory\"&gt;\n            &lt;beans:ref bean=\"sessionFactory\" /&gt;\n        &lt;/beans:property&gt;\n    &lt;/beans:bean&gt;\n</code></pre>\n\n<p>Now If run my code</p>\n\n<pre><code>@Override\n    @Transactional\n    public Request saveRequest(Request request) {\n        sessionFactory.getCurrentSession().save(request);\n        return request;\n    }\n</code></pre>\n\n<blockquote>\n  <p>I get exception save is not valid without an active transaction</p>\n</blockquote>\n\n<p>if I remove below line</p>\n\n<pre><code>&lt;beans:prop key=\"hibernate.current_session_context_class\"&gt;org.hibernate.context.internal.ThreadLocalSessionContext&lt;/beans:prop&gt;\n</code></pre>\n\n<p>I get </p>\n\n<blockquote>\n  <p>No CurrentSessionContext configured!</p>\n</blockquote>\n"},{"tags":["java","date","calendar"],"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1685514173,"post_id":76368550,"comment_id":134668823,"body_markdown":"Please give a couple of examples of input, expected result and observed result.","body":"Please give a couple of examples of input, expected result and observed result."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1685557091,"post_id":76368550,"comment_id":134678404,"body_markdown":"When posting a schoolwork question, make an explicit not of that fact. Your phrase &quot;You have to it in two ways&quot; is unclear, but presumably means you have been given a homework assignment, and by &quot;You have to do&quot; you really mean &quot;I have to do&quot;.","body":"When posting a schoolwork question, make an explicit not of that fact. Your phrase &quot;You have to it in two ways&quot; is unclear, but presumably means you have been given a homework assignment, and by &quot;You have to do&quot; you really mean &quot;I have to do&quot;."}],"answers":[{"comments":[{"owner":{"account_id":27460832,"reputation":3,"user_id":20951437,"display_name":"Ala"},"score":0,"creation_date":1685548412,"post_id":76368715,"comment_id":134676636,"body_markdown":"I changed it and now whatDay() function gives proper results but I still don&#39;t know what to do with moveWeek(), thanks anyways","body":"I changed it and now whatDay() function gives proper results but I still don&#39;t know what to do with moveWeek(), thanks anyways"},{"owner":{"account_id":27460832,"reputation":3,"user_id":20951437,"display_name":"Ala"},"score":0,"creation_date":1685548839,"post_id":76368715,"comment_id":134676732,"body_markdown":"However, no. for 17.2.2034 it gives Tuesday while it&#39;s Friday :/","body":"However, no. for 17.2.2034 it gives Tuesday while it&#39;s Friday :/"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1685549693,"post_id":76368715,"comment_id":134676905,"body_markdown":"Have you double-checked the evaluation of _h_?  Maybe there is a truncation within.  Additionally, I noticed the solution uses a _floor_.","body":"Have you double-checked the evaluation of <i>h</i>?  Maybe there is a truncation within.  Additionally, I noticed the solution uses a <i>floor</i>."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1685481955,"creation_date":1685481542,"answer_id":76368715,"question_id":76368550,"body_markdown":"The Wikipedia documentation for _Zeller&#39;s congruence_ states that _h_ will be an index starting with _&quot;Saturday&quot;_.\r\n\r\n&gt; _**h** is the day of the week (0 = Saturday, 1 = Sunday, 2 = Monday, ..., 6 = Friday)_\r\n\r\nYour _days_ array in the _whatDay_ method is starting with _&quot;Monday&quot;_.\r\n\r\n```java\r\n{ &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;, &quot;Sunday&quot; };\r\n```\r\n```java\r\n{ &quot;Saturday&quot;, &quot;Sunday&quot;, &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot; };\r\n```","title":"My own class &#39;calendar&#39;, how to display the day of the week?","body":"<p>The Wikipedia documentation for <em>Zeller's congruence</em> states that <em>h</em> will be an index starting with <em>&quot;Saturday&quot;</em>.</p>\n<blockquote>\n<p><em><strong>h</strong> is the day of the week (0 = Saturday, 1 = Sunday, 2 = Monday, ..., 6 = Friday)</em></p>\n</blockquote>\n<p>Your <em>days</em> array in the <em>whatDay</em> method is starting with <em>&quot;Monday&quot;</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>{ &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;, &quot;Sunday&quot; };\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>{ &quot;Saturday&quot;, &quot;Sunday&quot;, &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot; };\n</code></pre>\n"},{"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1685482969,"post_id":76368803,"comment_id":134665878,"body_markdown":"Three problems: (i) `Date`, `Calendar`, `SimpleDateFormat` were outdated in java 8 (almost 10 years ago); better use the `java.time` package; (ii) from the question: &quot;*You have to do it in two ways, using the methods of shifting by a week (...) and by determining using the modulo operation*&quot;; (iii) input is not a `String`","body":"Three problems: (i) <code>Date</code>, <code>Calendar</code>, <code>SimpleDateFormat</code> were outdated in java 8 (almost 10 years ago); better use the <code>java.time</code> package; (ii) from the question: &quot;<i>You have to do it in two ways, using the methods of shifting by a week (...) and by determining using the modulo operation</i>&quot;; (iii) input is not a <code>String</code>"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1685489301,"post_id":76368803,"comment_id":134666583,"body_markdown":"@user16320675, I am still misunderstanding this misconception on this website, in terms of _Calendar_.  How does the use of those three classes defy the requirement of the task?  They are all valid classes, still in use by Java, as of version 20.","body":"@user16320675, I am still misunderstanding this misconception on this website, in terms of <i>Calendar</i>.  How does the use of those three classes defy the requirement of the task?  They are all valid classes, still in use by Java, as of version 20."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1685512912,"post_id":76368803,"comment_id":134668644,"body_markdown":"@Reilas There is a long list of problems with the legacy date-time classes, addressed many times. Written by people who did not understand date-time handling. Not object-oriented. Awkwardly developed first in `Date`, then later bolting on `Calendar` which only made things worse. Came from legacy code inherited before Java was invented. Terrible design decisions such as subclasses whose inheritance the documentation tells us we should ignore and pretend does not exist. Lacks key concepts such as date-time without zone/offset. Missing SQL types. And more. JSR 310 did not come out of nowhere.","body":"@Reilas There is a long list of problems with the legacy date-time classes, addressed many times. Written by people who did not understand date-time handling. Not object-oriented. Awkwardly developed first in <code>Date</code>, then later bolting on <code>Calendar</code> which only made things worse. Came from legacy code inherited before Java was invented. Terrible design decisions such as subclasses whose inheritance the documentation tells us we should ignore and pretend does not exist. Lacks key concepts such as date-time without zone/offset. Missing SQL types. And more. JSR 310 did not come out of nowhere."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1685513745,"post_id":76368803,"comment_id":134668753,"body_markdown":"I think you answered the question in the title, not the question as spelled out in the body. And only the OP can tell (or their teacher or manager), but it sounds to me like this should be done without using the library date classes (@user16320675 is correct, for production code one would use `LocalDate` and `DayOfWeek` from java.time).","body":"I think you answered the question in the title, not the question as spelled out in the body. And only the OP can tell (or their teacher or manager), but it sounds to me like this should be done without using the library date classes (@user16320675 is correct, for production code one would use <code>LocalDate</code> and <code>DayOfWeek</code> from java.time)."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1685521514,"post_id":76368803,"comment_id":134670259,"body_markdown":"@Reilas I am still trying to understand your problem with the general `java.util.Calendar` bashing on Stack Overflow and in the Java community as a whole. Until now without much success, sorry. The general consensus is that we have given up completely on the old date-time classes several years ago. Youโre perfectly entitled to your own opinion, as we are to ours. You are perfectly correct, most date and time tasks can be solved using the old classes. They are valid. You can use `Calendar` all that you want (only not in code that I need to maintain). I will find some links that may provide more","body":"@Reilas I am still trying to understand your problem with the general <code>java.util.Calendar</code> bashing on Stack Overflow and in the Java community as a whole. Until now without much success, sorry. The general consensus is that we have given up completely on the old date-time classes several years ago. Youโre perfectly entitled to your own opinion, as we are to ours. You are perfectly correct, most date and time tasks can be solved using the old classes. They are valid. You can use <code>Calendar</code> all that you want (only not in code that I need to maintain). I will find some links that may provide more"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1685544111,"post_id":76368803,"comment_id":134675538,"body_markdown":"@Reilas If youโre curious, you can read more in [this Oracle document](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html) and also [here](https://programminghints.com/2017/05/still-using-java-util-date-dont/), [here](https://stackoverflow.com/questions/1571265/why-is-the-java-date-api-java-util-date-calendar-such-a-mess), [here](https://stackoverflow.com/questions/1969442/whats-wrong-with-java-date-time-api), [the EDIT at the bottom of this answer](https://stackoverflow.com/a/344400/5772882) and [here](https://stackoverflow.com/questions/69730254/how-to-correctly-).","body":"@Reilas If youโre curious, you can read more in <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html\" rel=\"nofollow noreferrer\">this Oracle document</a> and also <a href=\"https://programminghints.com/2017/05/still-using-java-util-date-dont/\" rel=\"nofollow noreferrer\">here</a>, <a href=\"https://stackoverflow.com/questions/1571265/why-is-the-java-date-api-java-util-date-calendar-such-a-mess\">here</a>, <a href=\"https://stackoverflow.com/questions/1969442/whats-wrong-with-java-date-time-api\">here</a>, <a href=\"https://stackoverflow.com/a/344400/5772882\">the EDIT at the bottom of this answer</a> and <a href=\"https://stackoverflow.com/questions/69730254/how-to-correctly-\">here</a>."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1685548597,"post_id":76368803,"comment_id":134676671,"body_markdown":"@BasilBourque, you imply there is some other type of design implementation here.  There is not, it&#39;s a method which evaluates the weekday of a given date.  How is this overlooked?","body":"@BasilBourque, you imply there is some other type of design implementation here.  There is not, it&#39;s a method which evaluates the weekday of a given date.  How is this overlooked?"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1685548972,"post_id":76368803,"comment_id":134676768,"body_markdown":"@OleV.V., I&#39;m misunderstanding where the design is, and where any of those factors play a role.  Additionally, you&#39;re under the impression that since there is a newer date and time framework, it some how invalidates the current framework.  If that were the case, the framework would be removed.  We are not talking about a design here, just a method.  I&#39;m amazed at how deviated a group of people can be.  Where&#39;s the Kool-aid?","body":"@OleV.V., I&#39;m misunderstanding where the design is, and where any of those factors play a role.  Additionally, you&#39;re under the impression that since there is a newer date and time framework, it some how invalidates the current framework.  If that were the case, the framework would be removed.  We are not talking about a design here, just a method.  I&#39;m amazed at how deviated a group of people can be.  Where&#39;s the Kool-aid?"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1685550648,"post_id":76368803,"comment_id":134677109,"body_markdown":"No, @Reilas, newer is not necessarily better. Only in this example it happens to be a lot better. And no, Oracle has only recently started removing stuff from the standard library, so presence is different from endorsement. [The official Oracle tutorial](https://docs.oracle.com/javase/tutorial/datetime/iso/legacy.html) refers to `Calendar` and the other date and time classes from Java 1.0 and 1.1 as (quote) *legacy*. Why that is not mentioned in the API documentation is, admitted, a bit of a mystery to me. And I am not deviated if I understand that word (not a native English speaker).","body":"No, @Reilas, newer is not necessarily better. Only in this example it happens to be a lot better. And no, Oracle has only recently started removing stuff from the standard library, so presence is different from endorsement. <a href=\"https://docs.oracle.com/javase/tutorial/datetime/iso/legacy.html\" rel=\"nofollow noreferrer\">The official Oracle tutorial</a> refers to <code>Calendar</code> and the other date and time classes from Java 1.0 and 1.1 as (quote) <i>legacy</i>. Why that is not mentioned in the API documentation is, admitted, a bit of a mystery to me. And I am not deviated if I understand that word (not a native English speaker)."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1685557161,"post_id":76368803,"comment_id":134678423,"body_markdown":"@Reilas &quot;If that were the case, the framework would be removed.&quot; That is not true at all. You must be unfamiliar with the long history of Java. Java has accumulated *many* pieces of cruft over the decades that would be omitted if Java were re-created today. For example, all the old I/O classes remain in place despite the arrival of NIO and NIO.2. The Java team has always been committed to upward compatibility as one of their highest priorities. That means leaving the old cruft in place is the default option, with rare exceptions. Why the cruft is so rarely marked as deprecated is a mystery.","body":"@Reilas &quot;If that were the case, the framework would be removed.&quot; That is not true at all. You must be unfamiliar with the long history of Java. Java has accumulated <i>many</i> pieces of cruft over the decades that would be omitted if Java were re-created today. For example, all the old I/O classes remain in place despite the arrival of NIO and NIO.2. The Java team has always been committed to upward compatibility as one of their highest priorities. That means leaving the old cruft in place is the default option, with rare exceptions. Why the cruft is so rarely marked as deprecated is a mystery."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1685557694,"post_id":76368803,"comment_id":134678520,"body_markdown":"`java.time.LocalDate.of ( 2023 , Month.MAY , 14 ).getDayOfWeek ( ).getDisplayName ( TextStyle.FULL_STANDALONE , Locale.CANADA_FRENCH )` โ dimanche","body":"<code>java.time.LocalDate.of ( 2023 , Month.MAY , 14 ).getDayOfWeek ( ).getDisplayName ( TextStyle.FULL_STANDALONE , Locale.CANADA_FRENCH )</code> โ dimanche"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1685558010,"post_id":76368803,"comment_id":134678572,"body_markdown":"@Reilas I&#39;m afraid the misconception is yours. [That reference](https://docs.oracle.com/javase/tutorial/datetime/iso/legacy.html) clearly refers to the `Calendar`, `Date`, `TimeZone`, and `GregorianCalendar` classes as being โlegacyโ, explains their drawbacks, and refers to their use in the past tense, prior to Java 8. If you need more of an explanation of the term โlegacyโ, see Wikipedia, [*Legacy system*](https://en.wikipedia.org/wiki/Legacy_system).","body":"@Reilas I&#39;m afraid the misconception is yours. <a href=\"https://docs.oracle.com/javase/tutorial/datetime/iso/legacy.html\" rel=\"nofollow noreferrer\">That reference</a> clearly refers to the <code>Calendar</code>, <code>Date</code>, <code>TimeZone</code>, and <code>GregorianCalendar</code> classes as being โlegacyโ, explains their drawbacks, and refers to their use in the past tense, prior to Java 8. If you need more of an explanation of the term โlegacyโ, see Wikipedia, <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"nofollow noreferrer\"><i>Legacy system</i></a>."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1685558150,"post_id":76368803,"comment_id":134678600,"body_markdown":"@BasilBourque, if the coding language you&#39;re using has, in your opinion, built up _&quot;... cruft over the decades...&quot;_ then you shouldn&#39;t be using it.  Choose a coding language that makes sense to you.  The fact that you can&#39;t understand that this question does not imply any sort of design, and is simply stating, _&quot;I need to add a method to a class that returns the name of the day of the week for a given date&quot;_, is strange to me.  You should educate yourself on the term _&quot;context&quot;_; otherwise you&#39;ll create, what is referred to as, _&quot;non-sense&quot;_.","body":"@BasilBourque, if the coding language you&#39;re using has, in your opinion, built up <i>&quot;... cruft over the decades...&quot;</i> then you shouldn&#39;t be using it.  Choose a coding language that makes sense to you.  The fact that you can&#39;t understand that this question does not imply any sort of design, and is simply stating, <i>&quot;I need to add a method to a class that returns the name of the day of the week for a given date&quot;</i>, is strange to me.  You should educate yourself on the term <i>&quot;context&quot;</i>; otherwise you&#39;ll create, what is referred to as, <i>&quot;non-sense&quot;</i>."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1685558338,"post_id":76368803,"comment_id":134678635,"body_markdown":"@BasilBourque, this question is not talking about a design, it&#39;s a question about a method in a class.  You truly cannot understand the difference?","body":"@BasilBourque, this question is not talking about a design, it&#39;s a question about a method in a class.  You truly cannot understand the difference?"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1685558415,"post_id":76368803,"comment_id":134678650,"body_markdown":"@OleV.V., how reflective.  I&#39;m not surprised either.","body":"@OleV.V., how reflective.  I&#39;m not surprised either."}],"tags":[],"owner":{"account_id":3021841,"reputation":129,"user_id":2562675,"display_name":"thiagotrss"},"comment_count":15,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685482452,"creation_date":1685482452,"answer_id":76368803,"question_id":76368550,"body_markdown":"The answer is more simple than you believe.\r\nTest the snippet code below. I think it will solve your problem.\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\n\r\n    private final String showWeekDayName(String stringDate) throws ParseException {\r\n    \tfinal Date date = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;).parse(stringDate);\r\n    \t\r\n    \tCalendar calendar = Calendar.getInstance();\r\n    \tcalendar.setTime(date);\r\n    \treturn calendar.getDisplayName(Calendar.DAY_OF_WEEK, Calendar.LONG_FORMAT, Locale.getDefault());\r\n    }\r\n\r\n&lt;/pre&gt;&lt;/code&gt;\r\n\r\nJust make sure to update your date format and the locale you need the week name.\r\n","title":"My own class &#39;calendar&#39;, how to display the day of the week?","body":"<p>The answer is more simple than you believe.\nTest the snippet code below. I think it will solve your problem.</p>\n<pre><code>\n\n    private final String showWeekDayName(String stringDate) throws ParseException {\n        final Date date = new SimpleDateFormat(\"dd/MM/yyyy\").parse(stringDate);\n        \n        Calendar calendar = Calendar.getInstance();\n        calendar.setTime(date);\n        return calendar.getDisplayName(Calendar.DAY_OF_WEEK, Calendar.LONG_FORMAT, Locale.getDefault());\n    }\n\n</pre></code>\n<p>Just make sure to update your date format and the locale you need the week name.</p>\n"}],"owner":{"account_id":27460832,"reputation":3,"user_id":20951437,"display_name":"Ala"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1685519821,"creation_date":1685479991,"question_id":76368550,"body_markdown":"I have a problem with a task,  I need to add a method to a class that returns the name of the day of the week for a given date. You have to do it in two ways, using the methods of shifting by a week (comparing to the selected reference date, e.g. May 14, 2023 is Sunday) and by determining using the modulo operation (https://en.wikipedia.org/w/index.php?title=Zeller%27s_congruence&amp;oldid=1033222037.\r\n\r\nmy code shows wrong results using both methods, i don&#39;t understand why. e.g. when given 3/17/2030, the reference method displays Wednesday, and the Zeller algorithm displays Friday, when the correct result is Sunday. please help me find the error. I don&#39;t want to use any built-in classes or functions\r\n\r\n\r\n\r\n\r\n```\r\nimport java.util.Scanner;\r\nimport java.util.Comparator;\r\n   class DateComparator implements Comparator&lt;Date&gt;{\r\n\r\n    @Override\r\n    public int compare(Date date1, Date date2){\r\n        int yearComparison = Integer.compare(date1.getYear(), date2.getYear());\r\n        if( yearComparison != 0){\r\n            return yearComparison;\r\n        }\r\n\r\n        int monthComparison = Integer.compare(date1.getMonth(), date2.getMonth());\r\n        if(monthComparison != 0){\r\n            \r\n            return monthComparison;\r\n        }\r\n\r\n\r\n\r\n        return Integer.compare(date1.getDay(), date2.getDay());\r\n    }\r\n}\r\n\r\nclass Month{\r\n    private int monthNumber;\r\n    private String name;\r\n    private int days;\r\n\r\n    public Month(int monthNumber, String name, int days){\r\n        this.monthNumber = monthNumber;\r\n        this.name = name;\r\n        this.days = days;\r\n    }\r\n    public int getMonthNumber() {\r\n        return monthNumber;\r\n    }\r\n\r\n    public int getDays() {\r\n        return days;\r\n    }\r\n\r\n    public void setDays(int days){\r\n        this.days = days;\r\n    }\r\n}\r\n\r\npublic class Date {\r\n\r\n    Months monthsObj = new Months();\r\n    private int year;\r\n    private int month;\r\n    private int day;\r\n\r\n    public Date() {\r\n    }\r\n\r\n    public Date(int year, int month, int day){\r\n        this.year = year;\r\n        this.month = month;\r\n        this.day = day;\r\n    }\r\n\r\n    public int getYear(){\r\n        return year;\r\n    }\r\n\r\n    public void setYear(int year){\r\n        this.year = year;\r\n    }\r\n\r\n    public int getMonth(){\r\n        return month;\r\n    }\r\n\r\n    public void setMonth(int month){\r\n        this.month = month;\r\n    }\r\n\r\n    public int getDay(){\r\n        return day;\r\n    }\r\n\r\n    public void setDay(int day){\r\n        this.day = day;\r\n    }\r\n\r\n    public void printDate(){\r\n        System.out.println(year + &quot;-&quot; + month + &quot;-&quot; + day);\r\n    }\r\n\r\n\r\n    public void incrementWeek(){\r\n        int daysInMonth = monthsObj.getDaysInMonth(year, month);\r\n        day += 7;\r\n        if(day &gt; daysInMonth){\r\n            day -= daysInMonth;\r\n            month++;\r\n            if(month &gt; 12){\r\n                year++;\r\n                month = 1;\r\n            }\r\n        }\r\n    }\r\n\r\n   \r\n\r\n    public void decrementWeek(){\r\n        int daysInPreviousMonth;\r\n        int daysToRemove = 8 - day;\r\n        if(daysToRemove &lt;= 0){\r\n            day -= 7;\r\n        }else{\r\n            month--;\r\n            if(month == 0){\r\n                month = 12;\r\n                year--;\r\n            }\r\n            daysInPreviousMonth = monthsObj.getDaysInMonth(year, month);\r\n            day = daysInPreviousMonth + 1 - daysToRemove;\r\n        }\r\n    }\r\n\r\n\r\n    public void whatDay() {\r\n        int h = (day + 13 * (month + 1) / 5 + year % 100 + (year % 100) / 4 + (year / 100) / 4 - 2 * (year / 100)) % 7;\r\n\r\n        String[] days = { &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;, &quot;Sunday&quot;};\r\n        System.out.println(days[h]);\r\n    }\r\n\r\n    public void moveWeek(Date reference, Date calendar, int result){\r\n\r\n        String[] days = { &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;, &quot;Sunday&quot;};\r\n\r\n        if(result &gt; 0){\r\n            while((reference.getYear() != calendar.getYear()) || (reference.getMonth() != calendar.getMonth()) || (reference.getDay()-calendar.getDay() &gt;= 7)){\r\n                calendar.incrementWeek();\r\n                calendar.printDate();\r\n            }\r\n        }\r\n\r\n        if(result &lt; 0){\r\n            while((reference.getYear() != calendar.getYear()) || (reference.getMonth() != calendar.getMonth()) || ((reference.getDay()-calendar.getDay() &gt;= 7)||(reference.getDay()- calendar.getDay()&lt;0))){\r\n                calendar.decrementWeek();\r\n                calendar.printDate();\r\n\r\n            }\r\n        }\r\n\r\n\r\n        int difference = reference.getDay() - calendar.getDay();\r\n        System.out.println(days[6-difference]);\r\n\r\n    }\r\n\r\n\r\n\r\n    public static void main(String[] args) {\r\n        DateComparator comparator = new DateComparator();\r\n        Scanner sc = new Scanner(System.in);\r\n        System.out.println(&quot;podaj dzien, miesiac i rok:&quot;);\r\n        int day = sc.nextInt();\r\n        int month = sc.nextInt();\r\n        int year = sc.nextInt();\r\n\r\n        Date reference = new Date(2023, 5, 14);\r\n        Date calendar = new Date(year, month, day);\r\n        calendar.moveWeek(reference, calendar, comparator.compare(reference, calendar));\r\n        calendar.whatDay();\r\n      \r\n\r\n    }\r\n}\r\n\r\nclass Months{\r\n    private static final Month[] months = {\r\n            new Month(1, &quot;January&quot;, 31),\r\n            new Month(2, &quot;February&quot;, 28),\r\n            new Month(3, &quot;March&quot;, 31),\r\n            new Month(4, &quot;April&quot;, 30),\r\n            new Month(5, &quot;May&quot;, 31),\r\n            new Month(6, &quot;June&quot;, 30),\r\n            new Month(7, &quot;July&quot;, 31),\r\n            new Month(8, &quot;August&quot;, 31),\r\n            new Month(9, &quot;September&quot;, 30),\r\n            new Month(10, &quot;October&quot;, 31),\r\n            new Month(11, &quot;November&quot;, 30),\r\n            new Month(12, &quot;December&quot;, 31)\r\n    };\r\n\r\n    public boolean isLeapYear(int year){\r\n\r\n        return (year % 4 == 0 &amp;&amp; year % 100 !=0) || year % 400 == 0;\r\n    }\r\n\r\n    public int getDaysInMonth(int year, int month){\r\n\r\n        if(isLeapYear(year) &amp;&amp; month == 2){\r\n            months[1].setDays(29);\r\n        }\r\n\r\n        return months[month-1].getDays();\r\n    }\r\n\r\n}\r\n```","title":"My own class &#39;calendar&#39;, how to display the day of the week?","body":"<p>I have a problem with a task,  I need to add a method to a class that returns the name of the day of the week for a given date. You have to do it in two ways, using the methods of shifting by a week (comparing to the selected reference date, e.g. May 14, 2023 is Sunday) and by determining using the modulo operation (<a href=\"https://en.wikipedia.org/w/index.php?title=Zeller%27s_congruence&amp;oldid=1033222037\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/w/index.php?title=Zeller%27s_congruence&amp;oldid=1033222037</a>.</p>\n<p>my code shows wrong results using both methods, i don't understand why. e.g. when given 3/17/2030, the reference method displays Wednesday, and the Zeller algorithm displays Friday, when the correct result is Sunday. please help me find the error. I don't want to use any built-in classes or functions</p>\n<pre><code>import java.util.Scanner;\nimport java.util.Comparator;\n   class DateComparator implements Comparator&lt;Date&gt;{\n\n    @Override\n    public int compare(Date date1, Date date2){\n        int yearComparison = Integer.compare(date1.getYear(), date2.getYear());\n        if( yearComparison != 0){\n            return yearComparison;\n        }\n\n        int monthComparison = Integer.compare(date1.getMonth(), date2.getMonth());\n        if(monthComparison != 0){\n            \n            return monthComparison;\n        }\n\n\n\n        return Integer.compare(date1.getDay(), date2.getDay());\n    }\n}\n\nclass Month{\n    private int monthNumber;\n    private String name;\n    private int days;\n\n    public Month(int monthNumber, String name, int days){\n        this.monthNumber = monthNumber;\n        this.name = name;\n        this.days = days;\n    }\n    public int getMonthNumber() {\n        return monthNumber;\n    }\n\n    public int getDays() {\n        return days;\n    }\n\n    public void setDays(int days){\n        this.days = days;\n    }\n}\n\npublic class Date {\n\n    Months monthsObj = new Months();\n    private int year;\n    private int month;\n    private int day;\n\n    public Date() {\n    }\n\n    public Date(int year, int month, int day){\n        this.year = year;\n        this.month = month;\n        this.day = day;\n    }\n\n    public int getYear(){\n        return year;\n    }\n\n    public void setYear(int year){\n        this.year = year;\n    }\n\n    public int getMonth(){\n        return month;\n    }\n\n    public void setMonth(int month){\n        this.month = month;\n    }\n\n    public int getDay(){\n        return day;\n    }\n\n    public void setDay(int day){\n        this.day = day;\n    }\n\n    public void printDate(){\n        System.out.println(year + &quot;-&quot; + month + &quot;-&quot; + day);\n    }\n\n\n    public void incrementWeek(){\n        int daysInMonth = monthsObj.getDaysInMonth(year, month);\n        day += 7;\n        if(day &gt; daysInMonth){\n            day -= daysInMonth;\n            month++;\n            if(month &gt; 12){\n                year++;\n                month = 1;\n            }\n        }\n    }\n\n   \n\n    public void decrementWeek(){\n        int daysInPreviousMonth;\n        int daysToRemove = 8 - day;\n        if(daysToRemove &lt;= 0){\n            day -= 7;\n        }else{\n            month--;\n            if(month == 0){\n                month = 12;\n                year--;\n            }\n            daysInPreviousMonth = monthsObj.getDaysInMonth(year, month);\n            day = daysInPreviousMonth + 1 - daysToRemove;\n        }\n    }\n\n\n    public void whatDay() {\n        int h = (day + 13 * (month + 1) / 5 + year % 100 + (year % 100) / 4 + (year / 100) / 4 - 2 * (year / 100)) % 7;\n\n        String[] days = { &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;, &quot;Sunday&quot;};\n        System.out.println(days[h]);\n    }\n\n    public void moveWeek(Date reference, Date calendar, int result){\n\n        String[] days = { &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;, &quot;Sunday&quot;};\n\n        if(result &gt; 0){\n            while((reference.getYear() != calendar.getYear()) || (reference.getMonth() != calendar.getMonth()) || (reference.getDay()-calendar.getDay() &gt;= 7)){\n                calendar.incrementWeek();\n                calendar.printDate();\n            }\n        }\n\n        if(result &lt; 0){\n            while((reference.getYear() != calendar.getYear()) || (reference.getMonth() != calendar.getMonth()) || ((reference.getDay()-calendar.getDay() &gt;= 7)||(reference.getDay()- calendar.getDay()&lt;0))){\n                calendar.decrementWeek();\n                calendar.printDate();\n\n            }\n        }\n\n\n        int difference = reference.getDay() - calendar.getDay();\n        System.out.println(days[6-difference]);\n\n    }\n\n\n\n    public static void main(String[] args) {\n        DateComparator comparator = new DateComparator();\n        Scanner sc = new Scanner(System.in);\n        System.out.println(&quot;podaj dzien, miesiac i rok:&quot;);\n        int day = sc.nextInt();\n        int month = sc.nextInt();\n        int year = sc.nextInt();\n\n        Date reference = new Date(2023, 5, 14);\n        Date calendar = new Date(year, month, day);\n        calendar.moveWeek(reference, calendar, comparator.compare(reference, calendar));\n        calendar.whatDay();\n      \n\n    }\n}\n\nclass Months{\n    private static final Month[] months = {\n            new Month(1, &quot;January&quot;, 31),\n            new Month(2, &quot;February&quot;, 28),\n            new Month(3, &quot;March&quot;, 31),\n            new Month(4, &quot;April&quot;, 30),\n            new Month(5, &quot;May&quot;, 31),\n            new Month(6, &quot;June&quot;, 30),\n            new Month(7, &quot;July&quot;, 31),\n            new Month(8, &quot;August&quot;, 31),\n            new Month(9, &quot;September&quot;, 30),\n            new Month(10, &quot;October&quot;, 31),\n            new Month(11, &quot;November&quot;, 30),\n            new Month(12, &quot;December&quot;, 31)\n    };\n\n    public boolean isLeapYear(int year){\n\n        return (year % 4 == 0 &amp;&amp; year % 100 !=0) || year % 400 == 0;\n    }\n\n    public int getDaysInMonth(int year, int month){\n\n        if(isLeapYear(year) &amp;&amp; month == 2){\n            months[1].setDays(29);\n        }\n\n        return months[month-1].getDays();\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":12521194,"reputation":877,"user_id":9112491,"display_name":"user"},"score":0,"creation_date":1685520113,"post_id":76371328,"comment_id":134669957,"body_markdown":"It is generally not possible to directly collocate two different versions of the same library within the same application, as it can lead to conflicts and compatibility issues.","body":"It is generally not possible to directly collocate two different versions of the same library within the same application, as it can lead to conflicts and compatibility issues."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1685522233,"post_id":76371328,"comment_id":134670427,"body_markdown":"For many libraries you can get away with using shaded libraries (basically &quot;private&quot; copies of the libraries in different packages). I&#39;m not sure if that&#39;ll work well with something as big and complex as Spring itself.","body":"For many libraries you can get away with using shaded libraries (basically &quot;private&quot; copies of the libraries in different packages). I&#39;m not sure if that&#39;ll work well with something as big and complex as Spring itself."}],"owner":{"account_id":21620025,"reputation":35,"user_id":15945184,"display_name":"Snaps"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685519812,"creation_date":1685519812,"question_id":76371328,"body_markdown":"My project, call it A, depends on Project B\r\n\r\nProject A\r\n\r\n - Runs on JDK 17\r\n - Uses spring-framework version 6.0.6 \r\n\r\n \r\nProject B\r\n\r\n - Runs on JDK 11\r\n - Uses spring-framework version 5.3.9 and spring-boot version 2.7.9\r\n \r\n\r\nWhen Project B is added as a dependency in Project A, all of its spring transitive dependencies are overridden with a higher version. Which breaks Project B. Project A requires spring version 6 to run, we can&#39;t downgrade it.\r\n\r\n - Normally the resolution would be to upgrade the JDK and spring version in project B (fairly sure things will break and not sure if it&#39;s worth the time retesting).\r\n - Even if I am able to resolve this issue by upgrading project B&#39;s spring and jdk versions because I can control project B. How do I handle a similar situation when I have a 3rd party dependency on which I do not have any control?\r\n\r\nIs there any way to collocate two different versions of spring-framework in Project A such that it uses the newer version of spring for Project A and the older version of spring for Project B?\r\n\r\n\r\n","title":"How to collocate different spring major versions in a project?","body":"<p>My project, call it A, depends on Project B</p>\n<p>Project A</p>\n<ul>\n<li>Runs on JDK 17</li>\n<li>Uses spring-framework version 6.0.6</li>\n</ul>\n<p>Project B</p>\n<ul>\n<li>Runs on JDK 11</li>\n<li>Uses spring-framework version 5.3.9 and spring-boot version 2.7.9</li>\n</ul>\n<p>When Project B is added as a dependency in Project A, all of its spring transitive dependencies are overridden with a higher version. Which breaks Project B. Project A requires spring version 6 to run, we can't downgrade it.</p>\n<ul>\n<li>Normally the resolution would be to upgrade the JDK and spring version in project B (fairly sure things will break and not sure if it's worth the time retesting).</li>\n<li>Even if I am able to resolve this issue by upgrading project B's spring and jdk versions because I can control project B. How do I handle a similar situation when I have a 3rd party dependency on which I do not have any control?</li>\n</ul>\n<p>Is there any way to collocate two different versions of spring-framework in Project A such that it uses the newer version of spring for Project A and the older version of spring for Project B?</p>\n"},{"tags":["java","javascript","webview","javafx"],"answers":[{"tags":[],"owner":{"account_id":468335,"reputation":6075,"user_id":874257,"display_name":"Josiah Hester"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1386045275,"creation_date":1386045275,"answer_id":20342947,"question_id":20342738,"body_markdown":"You have to set Javascript disabled on the [`WebEngine`](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html#setJavaScriptEnabled(boolean)) itself that the WebView controls.\r\n\r\n    WebView browser = new WebView();\r\n    WebEngine webEngine = browser.getEngine();\r\n    webEngine.setJavaScriptEnabled(false);\r\n","title":"Disable JavaScript from running in JavaFX WebView","body":"<p>You have to set Javascript disabled on the <a href=\"http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html#setJavaScriptEnabled(boolean)\" rel=\"noreferrer\"><code>WebEngine</code></a> itself that the WebView controls.</p>\n\n<pre><code>WebView browser = new WebView();\nWebEngine webEngine = browser.getEngine();\nwebEngine.setJavaScriptEnabled(false);\n</code></pre>\n"}],"owner":{"account_id":1181689,"reputation":312,"user_id":1156493,"accept_rate":43,"display_name":"Dinesh Ravichandran"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3241,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":20342947,"answer_count":1,"score":6,"last_activity_date":1685519331,"creation_date":1386043899,"question_id":20342738,"body_markdown":"I would like to know if JavaScript can be disabled in `WebView` of JavaFX. I have searched the web but cant get any information about this.\r\n\r\nThe link in [Oracle](http://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm) website says that JavaScript can be enabled and disabled but can&#39;t find any documentation.","title":"Disable JavaScript from running in JavaFX WebView","body":"<p>I would like to know if JavaScript can be disabled in <code>WebView</code> of JavaFX. I have searched the web but cant get any information about this.</p>\n<p>The link in <a href=\"http://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm\" rel=\"nofollow noreferrer\">Oracle</a> website says that JavaScript can be enabled and disabled but can't find any documentation.</p>\n"},{"tags":["java","jooq"],"comments":[{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1685179884,"post_id":76344811,"comment_id":134627732,"body_markdown":"*&quot;but surely there is a better way to express this, right?&quot;* This is a very subjective question without a clear goal, so I doubt it&#39;s possible to answer this. *&quot;Also, can this be expressed as a multiset query&quot;* of course it can. *&quot;I know it would most likely be an overkill here&quot;* no, why would it be? *&quot;but I&#39;m still curious how that would look like, because I could not get it right.&quot;* what have you tried? Why did it fail?","body":"<i>&quot;but surely there is a better way to express this, right?&quot;</i> This is a very subjective question without a clear goal, so I doubt it&#39;s possible to answer this. <i>&quot;Also, can this be expressed as a multiset query&quot;</i> of course it can. <i>&quot;I know it would most likely be an overkill here&quot;</i> no, why would it be? <i>&quot;but I&#39;m still curious how that would look like, because I could not get it right.&quot;</i> what have you tried? Why did it fail?"},{"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"score":0,"creation_date":1685203474,"post_id":76344811,"comment_id":134630352,"body_markdown":"1. I&#39;ll rephrase it then: is the nested `mapping` the obvious way to handle this? 2. Can be expressed just as concisely with simpler constructs (as I have already done). 3. I&#39;ll update the question with an example of what I tried, but I could not figure out how to express it, the generics just never lined up.","body":"1. I&#39;ll rephrase it then: is the nested <code>mapping</code> the obvious way to handle this? 2. Can be expressed just as concisely with simpler constructs (as I have already done). 3. I&#39;ll update the question with an example of what I tried, but I could not figure out how to express it, the generics just never lined up."},{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1685350928,"post_id":76344811,"comment_id":134643923,"body_markdown":"OK I think I get it now. I mean, `mapping()` is just a convenience utility to turn a `Record[N]` type into a `Function[N]` higher order function in a type safe way. it was introduced to make type safe `Book::new` constructor reference expressions available. But it isn&#39;t strictly necessary, there are many ways to do the same thing. I&#39;m still not clear what would constitute &quot;better&quot; (which is very subjective), so I still think this is a hard to answer question, but I can try? If my answer isn&#39;t &quot;better&quot;, then maybe a clear specification of what constitutes &quot;good&quot; and &quot;bad&quot; for you could help.","body":"OK I think I get it now. I mean, <code>mapping()</code> is just a convenience utility to turn a <code>Record[N]</code> type into a <code>Function[N]</code> higher order function in a type safe way. it was introduced to make type safe <code>Book::new</code> constructor reference expressions available. But it isn&#39;t strictly necessary, there are many ways to do the same thing. I&#39;m still not clear what would constitute &quot;better&quot; (which is very subjective), so I still think this is a hard to answer question, but I can try? If my answer isn&#39;t &quot;better&quot;, then maybe a clear specification of what constitutes &quot;good&quot; and &quot;bad&quot; for you could help."},{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1685351467,"post_id":76344811,"comment_id":134643995,"body_markdown":"Regarding the `MULTISET` part, I&#39;m happy to answer a new question about this, if you can show what you tried, so I can explain why that might not have worked.","body":"Regarding the <code>MULTISET</code> part, I&#39;m happy to answer a new question about this, if you can show what you tried, so I can explain why that might not have worked."}],"answers":[{"comments":[{"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"score":0,"creation_date":1685370745,"post_id":76355938,"comment_id":134647331,"body_markdown":"Thanks! Yes, this is what I was trying to make it look like, and for some reason kept missing. It was the middle of the night, after all &#128517; I rewrote the question to clarify what I meant with `multiset`, but your answer already covers that too, so it&#39;s all good :)","body":"Thanks! Yes, this is what I was trying to make it look like, and for some reason kept missing. It was the middle of the night, after all ๐ I rewrote the question to clarify what I meant with <code>multiset</code>, but your answer already covers that too, so it&#39;s all good :)"},{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1685380823,"post_id":76355938,"comment_id":134649031,"body_markdown":"@kaqqao: Would you mind asking the `multiset` part of your question in a new question? I&#39;d love to answer it, but it doesn&#39;t seem to be strictly related to your original question. Yet, it&#39;s a question that I think will be useful for others, nonetheless. It is more about correlating `multiset` subqueries, for which there will be a great solution in jOOQ 3.19. The 3.18 solution might indeed seem a bit laborious.","body":"@kaqqao: Would you mind asking the <code>multiset</code> part of your question in a new question? I&#39;d love to answer it, but it doesn&#39;t seem to be strictly related to your original question. Yet, it&#39;s a question that I think will be useful for others, nonetheless. It is more about correlating <code>multiset</code> subqueries, for which there will be a great solution in jOOQ 3.19. The 3.18 solution might indeed seem a bit laborious."},{"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"score":0,"creation_date":1685519351,"post_id":76355938,"comment_id":134669787,"body_markdown":"Sure thing. I removed the multiset part from this question and moved it here: https://stackoverflow.com/questions/76371252/fetch-grouped-pojos-using-multiset-in-jooq","body":"Sure thing. I removed the multiset part from this question and moved it here: <a href=\"https://stackoverflow.com/questions/76371252/fetch-grouped-pojos-using-multiset-in-jooq\" title=\"fetch grouped pojos using multiset in jooq\">stackoverflow.com/questions/76371252/&hellip;</a>"}],"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1685351292,"creation_date":1685350660,"answer_id":76355938,"question_id":76344811,"body_markdown":"You can do this, probably?\r\n\r\n```java\r\n.fetchGroups(\r\n    BOOK_AUTHOR.AUTHOR_ID,\r\n    r -&gt; r.value2().into(Book.class)\r\n);\r\n```\r\n\r\nOr this:\r\n\r\n\r\n```java\r\n.fetchGroups(\r\n    r -&gt; r.value1(),\r\n    r -&gt; r.value2().into(Book.class)\r\n);\r\n```\r\n\r\nThis uses reflection (in the [`DefaultRecordMapper`][1]) to map the book columns of the nested `BOOK_AUTHOR.book()` record into the `Book` POJO. If you enabled the `&lt;recordsImplementingRecordN/&gt;` flag in your code generator, you could do this, in the query:\r\n\r\n```java\r\nBOOK_AUTHOR.book().mapping(Book::new)\r\n```\r\n\r\nThere are maybe other ways to &quot;improve&quot; things, though as I said in the comments, this appears to be subjective. Or maybe, you&#39;re looking for a *specific* operator that could be added to the jOOQ API? [You could request it here][2].\r\n\r\n\r\n  [1]: https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/impl/DefaultRecordMapper.html\r\n  [2]: https://github.com/jOOQ/jOOQ/issues/new/choose","title":"Fetch POJOs grouped by an external field in JOOQ","body":"<p>You can do this, probably?</p>\n<pre class=\"lang-java prettyprint-override\"><code>.fetchGroups(\n    BOOK_AUTHOR.AUTHOR_ID,\n    r -&gt; r.value2().into(Book.class)\n);\n</code></pre>\n<p>Or this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.fetchGroups(\n    r -&gt; r.value1(),\n    r -&gt; r.value2().into(Book.class)\n);\n</code></pre>\n<p>This uses reflection (in the <a href=\"https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/impl/DefaultRecordMapper.html\" rel=\"nofollow noreferrer\"><code>DefaultRecordMapper</code></a>) to map the book columns of the nested <code>BOOK_AUTHOR.book()</code> record into the <code>Book</code> POJO. If you enabled the <code>&lt;recordsImplementingRecordN/&gt;</code> flag in your code generator, you could do this, in the query:</p>\n<pre class=\"lang-java prettyprint-override\"><code>BOOK_AUTHOR.book().mapping(Book::new)\n</code></pre>\n<p>There are maybe other ways to &quot;improve&quot; things, though as I said in the comments, this appears to be subjective. Or maybe, you're looking for a <em>specific</em> operator that could be added to the jOOQ API? <a href=\"https://github.com/jOOQ/jOOQ/issues/new/choose\" rel=\"nofollow noreferrer\">You could request it here</a>.</p>\n"}],"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76355938,"answer_count":1,"score":1,"last_activity_date":1685519185,"creation_date":1685145622,"question_id":76344811,"body_markdown":"Take the usual example of the `book` and `author` tables in a many-to-many (`book_author`) relationship.\r\n\r\nI currently have this and it works:\r\n\r\n    Map&lt;UUID, List&lt;Book&gt;&gt; booksByAuthorId = dsl\r\n        .select(BOOK_AUTHOR.AUTHOR_ID, BOOK_AUTHOR.book())\r\n        .from(BOOK_AUTHOR)\r\n        .where(BOOK_AUTHOR.AUTHOR_ID.in(authorIds))\r\n        .fetchGroups(\r\n            BOOK_AUTHOR.AUTHOR_ID,\r\n            mapping((a, bookRecord) -&gt; mapping(Book::new).apply(bookRecord)));\r\n       \r\n\r\nbut the nested `mapping` makes me feel I&#39;m doing something wrong. Is that really the most obvious approach?","title":"Fetch POJOs grouped by an external field in JOOQ","body":"<p>Take the usual example of the <code>book</code> and <code>author</code> tables in a many-to-many (<code>book_author</code>) relationship.</p>\n<p>I currently have this and it works:</p>\n<pre><code>Map&lt;UUID, List&lt;Book&gt;&gt; booksByAuthorId = dsl\n    .select(BOOK_AUTHOR.AUTHOR_ID, BOOK_AUTHOR.book())\n    .from(BOOK_AUTHOR)\n    .where(BOOK_AUTHOR.AUTHOR_ID.in(authorIds))\n    .fetchGroups(\n        BOOK_AUTHOR.AUTHOR_ID,\n        mapping((a, bookRecord) -&gt; mapping(Book::new).apply(bookRecord)));\n   \n</code></pre>\n<p>but the nested <code>mapping</code> makes me feel I'm doing something wrong. Is that really the most obvious approach?</p>\n"},{"tags":["java","bigdecimal"],"comments":[{"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"score":0,"creation_date":1685512482,"post_id":76370506,"comment_id":134668580,"body_markdown":"Side note: You are assigning the same value (`valueControl`) to `valueZero` in both branches of the *if* condition. Re-think on what you want to return when `valueControl` is lesser than 0 and when it is greater than 0. If you want to return the same, then you can rewrite the *if* to compare against 0 (`== 0`).","body":"Side note: You are assigning the same value (<code>valueControl</code>) to <code>valueZero</code> in both branches of the <i>if</i> condition. Re-think on what you want to return when <code>valueControl</code> is lesser than 0 and when it is greater than 0. If you want to return the same, then you can rewrite the <i>if</i> to compare against 0 (<code>== 0</code>)."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1685514695,"post_id":76370506,"comment_id":134668889,"body_markdown":"Regarding your `(0)`, be careful to not pass a `float`/`double` to the constructor of `BigDecimal` if your goal is accuracy. Those floating-point types trade away accurate for speed of execution. So pass decimal numbers as strings to the constructor.","body":"Regarding your <code>(0)</code>, be careful to not pass a <code>float</code>/<code>double</code> to the constructor of <code>BigDecimal</code> if your goal is accuracy. Those floating-point types trade away accurate for speed of execution. So pass decimal numbers as strings to the constructor."},{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":0,"creation_date":1685519641,"post_id":76370506,"comment_id":134669858,"body_markdown":"Your conditions are useless, for example, `private BigDecimal validateValue(BigDecimal valueControl) {\n    return valueControl;\n}` return the same result of your code","body":"Your conditions are useless, for example, <code>private BigDecimal validateValue(BigDecimal valueControl) {     return valueControl; }</code> return the same result of your code"}],"answers":[{"tags":[],"owner":{"account_id":23594916,"reputation":109,"user_id":17632159,"display_name":"roksui"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1685514517,"creation_date":1685512332,"answer_id":76370534,"question_id":76370506,"body_markdown":"You need to initialize your local variable `valueZero`. \r\n\r\nYou can do so using the constant, [`BigDecimal.ZERO`][1].\r\n\r\n    BigDecimal valueZero = BigDecimal.ZERO;\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html#ZERO","title":"How do i give a BigDecimal variable a value in a method?","body":"<p>You need to initialize your local variable <code>valueZero</code>.</p>\n<p>You can do so using the constant, <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html#ZERO\" rel=\"nofollow noreferrer\"><code>BigDecimal.ZERO</code></a>.</p>\n<pre><code>BigDecimal valueZero = BigDecimal.ZERO;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1685517261,"post_id":76370549,"comment_id":134669376,"body_markdown":"You don&#39;t **need** to use `new`.  There are predefined constants for 0, 1, 2, 10.  Also the static `BigDecimal.valueOf(...)` methods are preferable.","body":"You don&#39;t <b>need</b> to use <code>new</code>.  There are predefined constants for 0, 1, 2, 10.  Also the static <code>BigDecimal.valueOf(...)</code> methods are preferable."},{"owner":{"account_id":26335795,"reputation":948,"user_id":19995658,"display_name":"Sparkling Marcel "},"score":0,"creation_date":1685520108,"post_id":76370549,"comment_id":134669955,"body_markdown":"We are talking about someone that apparently doesn&#39;t know about variable assignement, ence why I prefered to give a more general/basic solution, because most of the time when you initialize a non-primitive type, you use &quot;new&quot;\nAlso if he happens to want to initialize with a value different from Zero (like 12.84), using the predefined constant won&#39;t help him and even maybe disturb him.","body":"We are talking about someone that apparently doesn&#39;t know about variable assignement, ence why I prefered to give a more general/basic solution, because most of the time when you initialize a non-primitive type, you use &quot;new&quot; Also if he happens to want to initialize with a value different from Zero (like 12.84), using the predefined constant won&#39;t help him and even maybe disturb him."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1685521641,"post_id":76370549,"comment_id":134670298,"body_markdown":"Fine.  But don&#39;t say that the OP &gt;&gt;needs&lt;&lt; to do it.  Because that is incorrect.","body":"Fine.  But don&#39;t say that the OP &gt;&gt;needs&lt;&lt; to do it.  Because that is incorrect."}],"tags":[],"owner":{"account_id":26335795,"reputation":948,"user_id":19995658,"display_name":"Sparkling Marcel "},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1685512555,"creation_date":1685512555,"answer_id":76370549,"question_id":76370506,"body_markdown":"     private BigDecimal validateValue(BigDecimal valueControl){\r\n        BigDecimal valueZero = new BigDecimal(&quot;0&quot;); \r\n        if(valueControl.compareTo(valueZero) &gt; 0){\r\n          valueZero = valueControl;\r\n        } else if(valueControl.compareTo(valueZero) &lt; 0) {\r\n          valueZero = valueControl;\r\n        } return valueZero;\r\n       }\r\n\r\nYou need to instantiate your variable valueZero using the &quot;new&quot; keyword since you&#39;re not using a primitive type otherwise java can&#39;t know what is valueZero, ence your error message\r\n\r\n\r\n","title":"How do i give a BigDecimal variable a value in a method?","body":"<pre><code> private BigDecimal validateValue(BigDecimal valueControl){\n    BigDecimal valueZero = new BigDecimal(&quot;0&quot;); \n    if(valueControl.compareTo(valueZero) &gt; 0){\n      valueZero = valueControl;\n    } else if(valueControl.compareTo(valueZero) &lt; 0) {\n      valueZero = valueControl;\n    } return valueZero;\n   }\n</code></pre>\n<p>You need to instantiate your variable valueZero using the &quot;new&quot; keyword since you're not using a primitive type otherwise java can't know what is valueZero, ence your error message</p>\n"}],"owner":{"account_id":28703750,"reputation":13,"user_id":21980468,"display_name":"MasterSteve"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1685519137,"creation_date":1685512037,"question_id":76370506,"body_markdown":"Like the title says im trying to give the BigDecimal Variable a value of zero &quot;(0)&quot; or any other number in a method. I know that local variables in a method dont have a default value unlike a member variable.  But how do i do it? I&#39;m new to java. \r\n\r\nThanks in advance! \r\n\r\n\r\n\r\n\r\n\r\n```\r\n  private BigDecimal validateValue(BigDecimal valueControl){\r\n    BigDecimal valueZero(0); // here i&#39;m having my issue. \r\n    if(valueControl.compareTo(valueZero) &gt; 0){\r\n      valueZero = valueControl;\r\n    } else if(valueControl.compareTo(valueZero) &lt; 0) {\r\n      valueZero = valueControl;\r\n    } return valueZero;\r\n   }\r\n```\r\nProblems:\r\n\r\n&gt; &#39;;&#39; expected\r\n&gt; Variable &#39;valueZero&#39; might not have been initialized","title":"How do i give a BigDecimal variable a value in a method?","body":"<p>Like the title says im trying to give the BigDecimal Variable a value of zero &quot;(0)&quot; or any other number in a method. I know that local variables in a method dont have a default value unlike a member variable.  But how do i do it? I'm new to java.</p>\n<p>Thanks in advance!</p>\n<pre><code>  private BigDecimal validateValue(BigDecimal valueControl){\n    BigDecimal valueZero(0); // here i'm having my issue. \n    if(valueControl.compareTo(valueZero) &gt; 0){\n      valueZero = valueControl;\n    } else if(valueControl.compareTo(valueZero) &lt; 0) {\n      valueZero = valueControl;\n    } return valueZero;\n   }\n</code></pre>\n<p>Problems:</p>\n<blockquote>\n<p>';' expected\nVariable 'valueZero' might not have been initialized</p>\n</blockquote>\n"},{"tags":["java","micronaut","micronaut-client","micronaut-rest"],"owner":{"account_id":1189122,"reputation":15753,"user_id":1162409,"accept_rate":40,"display_name":"San Jaisy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685518678,"creation_date":1685448337,"question_id":76364640,"body_markdown":"From the API gateway using the micronaut declarative HTTP client as below\r\n\r\n    @Client(id=&quot;fetebirdProductApi&quot;, path = &quot;/tag&quot;)\r\n    public interface ITagClient extends ITagOperation {\r\n    }\r\n\r\nIn one of the micro-service, there is a validation error on the controller and it is throwing a BAD Request with a message in the body as below\r\n\r\n    @Override\r\n    public Mono&lt;MutableHttpResponse&lt;?&gt;&gt; post(@Valid TagDto model) {\r\n        LOG.info(&quot;Creating a new tag&quot;);\r\n        return _iServiceBus.&lt;TagCreateCommand, Mono&lt;Result&lt;TagDto&gt;&gt;&gt;send(new TagCreateCommand(model)).flatMap(item -&gt; {\r\n                    if (Result.isSuccess.get()) {\r\n                        try {\r\n                            return Mono.just(HttpResponse.created(item.value(), new URI(String.format(&quot;/%s&quot;, item.value().id()))));\r\n                        } catch (URISyntaxException e) {\r\n                            return Mono.error(new GlobalException(e));\r\n                        }\r\n                    } else\r\n                        return Mono.just(HttpResponse.badRequest(item.exception().getMessage()));\r\n                }\r\n        );\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIn the API Gateway I am handling the HTTP response as below, it does catch the HTTP Bad Request, however the message is not be mapped \r\n\r\n    @Singleton\r\n    public class ClientResponseExceptionHandler implements ExceptionHandler&lt;HttpClientResponseException, MutableHttpResponse&lt;?&gt;&gt;{\r\n        private static final Logger LOG = LoggerFactory.getLogger(ClientResponseExceptionHandler.class);\r\n    \r\n        @Override\r\n        public MutableHttpResponse&lt;?&gt; handle(HttpRequest request, HttpClientResponseException exception) {\r\n            final HttpResponse&lt;?&gt; response = exception.getResponse();\r\n            if (response.status().getCode() &lt; 500) {\r\n                final JsonError error = new JsonError(exception.getMessage());\r\n                error.link(Link.SELF, request.getPath());\r\n                return HttpResponse.status(\r\n                        response.status(),\r\n                        response.reason()\r\n                ).body(error);\r\n            } else {\r\n                if (LOG.isErrorEnabled()) {\r\n                    LOG.error(&quot;Service responded with error &quot; + exception.getMessage(), exception);\r\n                }\r\n                final JsonError error = new JsonError(&quot;API currently unavailable due to error&quot;);\r\n                error.link(Link.SELF, request.getPath());\r\n                return HttpResponse.serverError(error);\r\n            }\r\n        }\r\n    }\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pV2U7.png\r\n  [2]: https://i.stack.imgur.com/DRRgQ.png","title":"ExceptionHandler not mapping the body message of the exception in micronaut","body":"<p>From the API gateway using the micronaut declarative HTTP client as below</p>\n<pre><code>@Client(id=&quot;fetebirdProductApi&quot;, path = &quot;/tag&quot;)\npublic interface ITagClient extends ITagOperation {\n}\n</code></pre>\n<p>In one of the micro-service, there is a validation error on the controller and it is throwing a BAD Request with a message in the body as below</p>\n<pre><code>@Override\npublic Mono&lt;MutableHttpResponse&lt;?&gt;&gt; post(@Valid TagDto model) {\n    LOG.info(&quot;Creating a new tag&quot;);\n    return _iServiceBus.&lt;TagCreateCommand, Mono&lt;Result&lt;TagDto&gt;&gt;&gt;send(new TagCreateCommand(model)).flatMap(item -&gt; {\n                if (Result.isSuccess.get()) {\n                    try {\n                        return Mono.just(HttpResponse.created(item.value(), new URI(String.format(&quot;/%s&quot;, item.value().id()))));\n                    } catch (URISyntaxException e) {\n                        return Mono.error(new GlobalException(e));\n                    }\n                } else\n                    return Mono.just(HttpResponse.badRequest(item.exception().getMessage()));\n            }\n    );\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/pV2U7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pV2U7.png\" alt=\"enter image description here\" /></a></p>\n<p>In the API Gateway I am handling the HTTP response as below, it does catch the HTTP Bad Request, however the message is not be mapped</p>\n<pre><code>@Singleton\npublic class ClientResponseExceptionHandler implements ExceptionHandler&lt;HttpClientResponseException, MutableHttpResponse&lt;?&gt;&gt;{\n    private static final Logger LOG = LoggerFactory.getLogger(ClientResponseExceptionHandler.class);\n\n    @Override\n    public MutableHttpResponse&lt;?&gt; handle(HttpRequest request, HttpClientResponseException exception) {\n        final HttpResponse&lt;?&gt; response = exception.getResponse();\n        if (response.status().getCode() &lt; 500) {\n            final JsonError error = new JsonError(exception.getMessage());\n            error.link(Link.SELF, request.getPath());\n            return HttpResponse.status(\n                    response.status(),\n                    response.reason()\n            ).body(error);\n        } else {\n            if (LOG.isErrorEnabled()) {\n                LOG.error(&quot;Service responded with error &quot; + exception.getMessage(), exception);\n            }\n            final JsonError error = new JsonError(&quot;API currently unavailable due to error&quot;);\n            error.link(Link.SELF, request.getPath());\n            return HttpResponse.serverError(error);\n        }\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/DRRgQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DRRgQ.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","file","sdk","external"],"comments":[{"owner":{"account_id":19819037,"reputation":868,"user_id":14516046,"display_name":"Andrey Bienkowski"},"score":0,"creation_date":1685606690,"post_id":76371151,"comment_id":134684387,"body_markdown":"1. Which line of code throws the exception? 2. Please provide a [mcve]. In particular: there is more work you can do on your end to reduce the example - make it more minimal - does a function that creates a new File object with a hardcoded path in an existing directory and calls file.createNewFile() produce the same error?","body":"1. Which line of code throws the exception? 2. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. In particular: there is more work you can do on your end to reduce the example - make it more minimal - does a function that creates a new File object with a hardcoded path in an existing directory and calls file.createNewFile() produce the same error?"}],"owner":{"account_id":23228993,"reputation":1,"user_id":20699566,"display_name":"Vฤn Mแบกnh Trแปnh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":207,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685518531,"creation_date":1685518531,"question_id":76371151,"body_markdown":"I&#39;m facing the problem of writing files to Android external storage here is my code:\r\n\r\n    public static File createFile(File path, String fileName) {\r\n        Timber.d(&quot;%s%s&quot;, path.getAbsolutePath(), fileName);\r\n\t\tif (path != null) {\r\n\t\t\tcreateDir(path);\r\n\t\t\tLog.d(LOG_TAG, &quot;createFile path = &quot; + path.getAbsolutePath() + &quot; fileName = &quot; + fileName);\r\n\t\t\tFile file = new File(path, fileName);\r\n\t\t\tif (!file.exists()) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (file.createNewFile()) {\r\n\t\t\t\t\t\tLog.i(LOG_TAG, &quot;The file was successfully created! - &quot; + file.getAbsolutePath());\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLog.i(LOG_TAG, &quot;The file exist! - &quot; + file.getAbsolutePath());\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (IOException e) {\r\n\t\t\t\t\tLog.e(LOG_TAG, &quot;Failed to create the file.&quot;, e);\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tLog.e(LOG_TAG, &quot;File already exists!! Please rename file!&quot;);\r\n\t\t\t\tLog.i(LOG_TAG, &quot;Renaming file&quot;);\r\n\t\t\t\treturn createFile(path, &quot;1&quot; + fileName);\r\n\t\t\t}\r\n\t\t\tif (!file.canWrite()) {\r\n\t\t\t\tLog.e(LOG_TAG, &quot;The file can not be written.&quot;);\r\n\t\t\t}\r\n\t\t\treturn file;\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static File createDir(File dir) {\r\n\t\tif (dir != null) {\r\n\t\t\tif (!dir.exists()) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (dir.mkdirs()) {\r\n\t\t\t\t\t\tLog.d(LOG_TAG, &quot;Dirs are successfully created&quot;);\r\n\t\t\t\t\t\treturn dir;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLog.e(LOG_TAG, &quot;Dirs are NOT created! Please check permission write to external storage!&quot;);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\tTimber.e(e);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tLog.d(LOG_TAG, &quot;Dir already exists&quot;);\r\n\t\t\t\treturn dir;\r\n\t\t\t}\r\n\t\t}\r\n\t\tLog.e(LOG_TAG, &quot;File is null or unable to create dirs&quot;);\r\n\t\treturn null;\r\n\t}\r\n\r\nthis is my Manifest:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;\r\n        tools:ignore=&quot;ScopedStorage&quot; /&gt;\r\n    &lt;uses-permission\r\n        android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;\r\n        android:maxSdkVersion=&quot;32&quot; /&gt;\r\n    &lt;uses-permission\r\n        android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;\r\n        tools:ignore=&quot;ScopedStorage&quot; /&gt;\r\n\r\nI granted permission and added *android:requestLegacyExternalStorage=&quot;true&quot;* \r\ni have learned many different ways, i tried on android API &lt; 29, it works fine, however i tried with API 32 i got the above error, hope anyone can help, thank you","title":"java.lang.RuntimeException: java.io.IOException: Operation not permitted","body":"<p>I'm facing the problem of writing files to Android external storage here is my code:</p>\n<pre><code>public static File createFile(File path, String fileName) {\n    Timber.d(&quot;%s%s&quot;, path.getAbsolutePath(), fileName);\n    if (path != null) {\n        createDir(path);\n        Log.d(LOG_TAG, &quot;createFile path = &quot; + path.getAbsolutePath() + &quot; fileName = &quot; + fileName);\n        File file = new File(path, fileName);\n        if (!file.exists()) {\n            try {\n                if (file.createNewFile()) {\n                    Log.i(LOG_TAG, &quot;The file was successfully created! - &quot; + file.getAbsolutePath());\n                } else {\n                    Log.i(LOG_TAG, &quot;The file exist! - &quot; + file.getAbsolutePath());\n                }\n            } catch (IOException e) {\n                Log.e(LOG_TAG, &quot;Failed to create the file.&quot;, e);\n                return null;\n            }\n        } else {\n            Log.e(LOG_TAG, &quot;File already exists!! Please rename file!&quot;);\n            Log.i(LOG_TAG, &quot;Renaming file&quot;);\n            return createFile(path, &quot;1&quot; + fileName);\n        }\n        if (!file.canWrite()) {\n            Log.e(LOG_TAG, &quot;The file can not be written.&quot;);\n        }\n        return file;\n    } else {\n        return null;\n    }\n}\n\npublic static File createDir(File dir) {\n    if (dir != null) {\n        if (!dir.exists()) {\n            try {\n                if (dir.mkdirs()) {\n                    Log.d(LOG_TAG, &quot;Dirs are successfully created&quot;);\n                    return dir;\n                } else {\n                    Log.e(LOG_TAG, &quot;Dirs are NOT created! Please check permission write to external storage!&quot;);\n                }\n            } catch (Exception e) {\n                Timber.e(e);\n            }\n        } else {\n            Log.d(LOG_TAG, &quot;Dir already exists&quot;);\n            return dir;\n        }\n    }\n    Log.e(LOG_TAG, &quot;File is null or unable to create dirs&quot;);\n    return null;\n}\n</code></pre>\n<p>this is my Manifest:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;\n    tools:ignore=&quot;ScopedStorage&quot; /&gt;\n&lt;uses-permission\n    android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;\n    android:maxSdkVersion=&quot;32&quot; /&gt;\n&lt;uses-permission\n    android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;\n    tools:ignore=&quot;ScopedStorage&quot; /&gt;\n</code></pre>\n<p>I granted permission and added <em>android:requestLegacyExternalStorage=&quot;true&quot;</em>\ni have learned many different ways, i tried on android API &lt; 29, it works fine, however i tried with API 32 i got the above error, hope anyone can help, thank you</p>\n"},{"tags":["java","datetime","jackson","objectmapper"],"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1676696848,"post_id":75484340,"comment_id":133194272,"body_markdown":"You are probably wrong. In your Java program you neither want epoch milliseconds nor a formatted date string. Just like you use `int` for a whole number and not a string, you want to use `ZonedDateTime` or `Instant` for your date and time. You only want to format it into a string when presenting it to your user in your UI.","body":"You are probably wrong. In your Java program you neither want epoch milliseconds nor a formatted date string. Just like you use <code>int</code> for a whole number and not a string, you want to use <code>ZonedDateTime</code> or <code>Instant</code> for your date and time. You only want to format it into a string when presenting it to your user in your UI."},{"owner":{"account_id":3794041,"reputation":15633,"user_id":3154233,"accept_rate":88,"display_name":"NoobEditor"},"score":0,"creation_date":1676712534,"post_id":75484340,"comment_id":133195752,"body_markdown":"@OleV.V. this POJO is being used for precisely that sir. it belongs to a service which is a _bridge_ and upstream is _dumb_ by design. hence it does all the parsing and downstream is not in my control! :)","body":"@OleV.V. this POJO is being used for precisely that sir. it belongs to a service which is a <i>bridge</i> and upstream is <i>dumb</i> by design. hence it does all the parsing and downstream is not in my control! :)"}],"answers":[{"comments":[{"owner":{"account_id":3794041,"reputation":15633,"user_id":3154233,"accept_rate":88,"display_name":"NoobEditor"},"score":0,"creation_date":1676639276,"post_id":75484561,"comment_id":133182810,"body_markdown":"tried this out without custom constructor with implemented builder already. now field is missing. i am not at liberty to expose custom single param constructor.","body":"tried this out without custom constructor with implemented builder already. now field is missing. i am not at liberty to expose custom single param constructor."},{"owner":{"account_id":22341068,"reputation":692,"user_id":16560836,"display_name":"yezper"},"score":0,"creation_date":1676640016,"post_id":75484561,"comment_id":133183029,"body_markdown":"just add the @Builder annotation to the constructor instead of on the class","body":"just add the @Builder annotation to the constructor instead of on the class"},{"owner":{"account_id":3794041,"reputation":15633,"user_id":3154233,"accept_rate":88,"display_name":"NoobEditor"},"score":0,"creation_date":1676641093,"post_id":75484561,"comment_id":133183372,"body_markdown":"ahh...ok..i got the confusion here, POJO i posted has minimalistic attributes mentioned. have updated the some more attribs. single param constructor wont solve! :)","body":"ahh...ok..i got the confusion here, POJO i posted has minimalistic attributes mentioned. have updated the some more attribs. single param constructor wont solve! :)"},{"owner":{"account_id":22341068,"reputation":692,"user_id":16560836,"display_name":"yezper"},"score":0,"creation_date":1676642499,"post_id":75484561,"comment_id":133183798,"body_markdown":"Updated my answer without custom constructor","body":"Updated my answer without custom constructor"},{"owner":{"account_id":3794041,"reputation":15633,"user_id":3154233,"accept_rate":88,"display_name":"NoobEditor"},"score":0,"creation_date":1676693605,"post_id":75484561,"comment_id":133193984,"body_markdown":"i missed this part completely where Jackson will parse it to string when sending data via api. such noob. thank u. accepted!","body":"i missed this part completely where Jackson will parse it to string when sending data via api. such noob. thank u. accepted!"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1676697097,"post_id":75484561,"comment_id":133194293,"body_markdown":"Using a proper date-time type for the field is a great step forward. I strongly recommend that you donโt use `Date`. That class is poorly designed, confusing and error-prone to work with and long outdated. Use for example `ZonedDateTime` or `Instant` from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/index.html).","body":"Using a proper date-time type for the field is a great step forward. I strongly recommend that you donโt use <code>Date</code>. That class is poorly designed, confusing and error-prone to work with and long outdated. Use for example <code>ZonedDateTime</code> or <code>Instant</code> from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>."}],"tags":[],"owner":{"account_id":22341068,"reputation":692,"user_id":16560836,"display_name":"yezper"},"comment_count":6,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1685518517,"creation_date":1676638335,"answer_id":75484561,"question_id":75484340,"body_markdown":"You&#39;re almost doing it right. However having a `@JsonFormat`-Annotation on a `String` field does not make to much sense, because if it already is String, there is nothing to convert for Jackson anymore. You can just make both fields of type `Date` and the `@JsonFormat` annotation on the `formattedDate` field will serialize it into the proper JSON String representation, exactly in the format you specified in the `pattern`. Jackson will by default serialize all `java.util.Date` Object of an object it needs to serialize into the epoch milliseconds as a regular JSON number. So this would work for you. However, as both fields in the final JSON will refer to the exact same Date object it feels weird to have them both as fields of the `CalendarData` object. I would suggest you just give `CalendarData` a single field `date` and then create a getter method for the `formattedDate` field. Here is what this could look like. By default Jackson will pick up all  getter functions and serialize their returned data into the generated json object.\r\n\r\n    @Data\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class CalendarData {\r\n    \r\n        CalendarData(final Date date) {\r\n            this.date = date;\r\n        }\r\n    \r\n        @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd/MM/yyyy HH:mm:ss&quot;)\r\n        private Date getFormattedDate(){\r\n            return this.date;\r\n        };\r\n    \r\n        private Date date;\r\n    }\r\n\r\n**UPDATE**\r\nAs you updated your question I also want to update my answer. I recommend to you the following (analogous to what I already explained above).\r\n\r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class CalendarData {\r\n    \r\n        private Date date;\r\n        private String errorCode;\r\n        private String subErrorCode;\r\n    \r\n        @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd/MM/yyyy HH:mm:ss&quot;)\r\n        // field to contain formatted date as per clients requirement - shud be mirror of &quot;date&quot;\r\n        private Date getFormattedDate(){\r\n            return this.date;\r\n        };\r\n    }\r\n\r\n **Then in my main I tried it out**\r\n    \r\n    public static void main(String[] args) throws JsonProcessingException {\r\n            ObjectMapper mapper = new ObjectMapper();\r\n    \r\n            CalendarData data  = CalendarData.builder()\r\n                    .errorCode(&quot;23&quot;)\r\n                    .subErrorCode(&quot;42&quot;)\r\n                    .date(new Date())\r\n                    .build();\r\n    \r\n            System.out.println(mapper.writeValueAsString(data));\r\n        }\r\n\r\nWhich perfectly prints out\r\n\r\n    {\r\n        &quot;date&quot;: 1676642216673,\r\n        &quot;errorCode&quot;: &quot;23&quot;,\r\n        &quot;subErrorCode&quot;: &quot;42&quot;,\r\n        &quot;formattedDate&quot;: &quot;17/02/2023 13:56:56&quot;\r\n    }","title":"Populating custom field through jackson","body":"<p>You're almost doing it right. However having a <code>@JsonFormat</code>-Annotation on a <code>String</code> field does not make to much sense, because if it already is String, there is nothing to convert for Jackson anymore. You can just make both fields of type <code>Date</code> and the <code>@JsonFormat</code> annotation on the <code>formattedDate</code> field will serialize it into the proper JSON String representation, exactly in the format you specified in the <code>pattern</code>. Jackson will by default serialize all <code>java.util.Date</code> Object of an object it needs to serialize into the epoch milliseconds as a regular JSON number. So this would work for you. However, as both fields in the final JSON will refer to the exact same Date object it feels weird to have them both as fields of the <code>CalendarData</code> object. I would suggest you just give <code>CalendarData</code> a single field <code>date</code> and then create a getter method for the <code>formattedDate</code> field. Here is what this could look like. By default Jackson will pick up all  getter functions and serialize their returned data into the generated json object.</p>\n<pre><code>@Data\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class CalendarData {\n\n    CalendarData(final Date date) {\n        this.date = date;\n    }\n\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd/MM/yyyy HH:mm:ss&quot;)\n    private Date getFormattedDate(){\n        return this.date;\n    };\n\n    private Date date;\n}\n</code></pre>\n<p><strong>UPDATE</strong>\nAs you updated your question I also want to update my answer. I recommend to you the following (analogous to what I already explained above).</p>\n<pre><code>@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class CalendarData {\n\n    private Date date;\n    private String errorCode;\n    private String subErrorCode;\n\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd/MM/yyyy HH:mm:ss&quot;)\n    // field to contain formatted date as per clients requirement - shud be mirror of &quot;date&quot;\n    private Date getFormattedDate(){\n        return this.date;\n    };\n}\n</code></pre>\n<p><strong>Then in my main I tried it out</strong></p>\n<pre><code>public static void main(String[] args) throws JsonProcessingException {\n        ObjectMapper mapper = new ObjectMapper();\n\n        CalendarData data  = CalendarData.builder()\n                .errorCode(&quot;23&quot;)\n                .subErrorCode(&quot;42&quot;)\n                .date(new Date())\n                .build();\n\n        System.out.println(mapper.writeValueAsString(data));\n    }\n</code></pre>\n<p>Which perfectly prints out</p>\n<pre><code>{\n    &quot;date&quot;: 1676642216673,\n    &quot;errorCode&quot;: &quot;23&quot;,\n    &quot;subErrorCode&quot;: &quot;42&quot;,\n    &quot;formattedDate&quot;: &quot;17/02/2023 13:56:56&quot;\n}\n</code></pre>\n"}],"owner":{"account_id":3794041,"reputation":15633,"user_id":3154233,"accept_rate":88,"display_name":"NoobEditor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75484561,"answer_count":1,"score":0,"last_activity_date":1685518517,"creation_date":1676637137,"question_id":75484340,"body_markdown":"I have a POJO as below:\r\n\r\n\r\n```\r\n@Data\r\n@Builder\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class CalendarData {\r\n\r\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd/MM/yyyy HH:mm:ss&quot;)\r\n    // field to contain formatted date as per clients requirement - shud be mirror of &quot;date&quot;\r\n    private String formattedDate;\r\n    private long date;\r\n    private String errorCode;\r\n    private String subErrorCode;\r\n}\r\n```\r\n\r\nDownstream service is only sending `date` field as epoch and i want to have the `formattedDate` populated in run time in given format.\r\n\r\nI can always write a custom function to format the data, but want to understand is there any _native jackson way_ or _custom setter_ to do that.\r\n","title":"Populating custom field through jackson","body":"<p>I have a POJO as below:</p>\n<pre><code>@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class CalendarData {\n\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd/MM/yyyy HH:mm:ss&quot;)\n    // field to contain formatted date as per clients requirement - shud be mirror of &quot;date&quot;\n    private String formattedDate;\n    private long date;\n    private String errorCode;\n    private String subErrorCode;\n}\n</code></pre>\n<p>Downstream service is only sending <code>date</code> field as epoch and i want to have the <code>formattedDate</code> populated in run time in given format.</p>\n<p>I can always write a custom function to format the data, but want to understand is there any <em>native jackson way</em> or <em>custom setter</em> to do that.</p>\n"},{"tags":["java","spring","spring-boot","utf-8","character-encoding"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1685520345,"post_id":76371149,"comment_id":134670001,"body_markdown":"I don&#39;t know this API but it looks like it is receiving corrupt content. Check that content","body":"I don&#39;t know this API but it looks like it is receiving corrupt content. Check that content"},{"owner":{"account_id":14762104,"reputation":197,"user_id":10661133,"display_name":"shruti garg"},"score":0,"creation_date":1685526899,"post_id":76371149,"comment_id":134671420,"body_markdown":"content is fine and API works fine , but it is not accepting special characters like &#241;, &#193;,\n&#194;, &#196;, &#198;, &#199;, &#200;,&#201;","body":"content is fine and API works fine , but it is not accepting special characters like &#241;, &#193;, &#194;, &#196;, &#198;, &#199;, &#200;,&#201;"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1685528557,"post_id":76371149,"comment_id":134671750,"body_markdown":"Take the very first of the above characters *only*. What is the error message with `&#241;`?","body":"Take the very first of the above characters <i>only</i>. What is the error message with <code>&#241;</code>?"},{"owner":{"account_id":3277167,"reputation":8773,"user_id":2758823,"display_name":"Giacomo Catenazzi"},"score":1,"creation_date":1685539983,"post_id":76371149,"comment_id":134674402,"body_markdown":"As far I can read from the error, the API want UTF-8, but you are not giving it a valid UTF-8 string. So check and encode properly the string. -- PS: declaring UTF-8 in all places, doesn&#39;t make a string UTF-8. Check that your data is UTF-8","body":"As far I can read from the error, the API want UTF-8, but you are not giving it a valid UTF-8 string. So check and encode properly the string. -- PS: declaring UTF-8 in all places, doesn&#39;t make a string UTF-8. Check that your data is UTF-8"},{"owner":{"account_id":14762104,"reputation":197,"user_id":10661133,"display_name":"shruti garg"},"score":0,"creation_date":1685632527,"post_id":76371149,"comment_id":134690567,"body_markdown":"if it could relate to spring boot version, because I tried a new POC with spring boot version 2.2.6.RELEASE. It worked. It accepted the UTF-8 chars with out any property addittion.","body":"if it could relate to spring boot version, because I tried a new POC with spring boot version 2.2.6.RELEASE. It worked. It accepted the UTF-8 chars with out any property addittion."}],"owner":{"account_id":14762104,"reputation":197,"user_id":10661133,"display_name":"shruti garg"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":457,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685518504,"creation_date":1685518504,"question_id":76371149,"body_markdown":"Rest controller is not accepting UTF-8 special characters in POST request body in spring boot. \r\nGiving below error:\r\n\r\n```JSON parse error: Invalid UTF-8 middle byte 0x6f; nested exception is com.fasterxml.jackson.databind.JsonMappingException: Invalid UTF-8 middle byte 0x6f```\r\n\r\n\r\nI have added below mapping in my controller\r\n\r\n```\r\nconsumes = MediaType.APPLICATION_JSON_UTF8_VALUE\r\nproduces = MediaType.APPLICATION_JSON_UTF8_VALUE\r\n```\r\n\r\nIn header I have added below:\r\n```\r\napplication/json; Charset=utf-8\r\n```\r\n\r\nand in application.properties I have added below options as well\r\n```\r\nserver.servlet.encoding.charset=UTF-8\r\nserver.servlet.encoding.force-response=true\r\nserver.servlet.encoding.enabled=true\r\nserver.servlet.encoding.force-request=true\r\nspring.mandatory_file_encoding=UTF-8\r\n```\r\n\r\nbut did not work.\r\n```\r\nmy spring boot version = 2.1.3.RELEASE \r\nJava version = 1.8\r\n```\r\n\r\nI have added below property in POM.xml \r\n\r\n```&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;```\r\n\r\nIf any body could provide any solution:\r\n","title":"Rest controller is not accepting UTF-8 special characters in POST request body in spring boot","body":"<p>Rest controller is not accepting UTF-8 special characters in POST request body in spring boot.\nGiving below error:</p>\n<p><code>JSON parse error: Invalid UTF-8 middle byte 0x6f; nested exception is com.fasterxml.jackson.databind.JsonMappingException: Invalid UTF-8 middle byte 0x6f</code></p>\n<p>I have added below mapping in my controller</p>\n<pre><code>consumes = MediaType.APPLICATION_JSON_UTF8_VALUE\nproduces = MediaType.APPLICATION_JSON_UTF8_VALUE\n</code></pre>\n<p>In header I have added below:</p>\n<pre><code>application/json; Charset=utf-8\n</code></pre>\n<p>and in application.properties I have added below options as well</p>\n<pre><code>server.servlet.encoding.charset=UTF-8\nserver.servlet.encoding.force-response=true\nserver.servlet.encoding.enabled=true\nserver.servlet.encoding.force-request=true\nspring.mandatory_file_encoding=UTF-8\n</code></pre>\n<p>but did not work.</p>\n<pre><code>my spring boot version = 2.1.3.RELEASE \nJava version = 1.8\n</code></pre>\n<p>I have added below property in POM.xml</p>\n<p><code>&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</code></p>\n<p>If any body could provide any solution:</p>\n"},{"tags":["java","executorservice","java.util.concurrent"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":4,"creation_date":1685473599,"post_id":76367775,"comment_id":134664238,"body_markdown":"Are you really so sure the tasks completed? Given the problem occurs when you have larger numbers of longer tasks, I suspect the submitted tasks have not completed.  Example: 60 tasks at one hour each with a thread pool of 6 will take at least 10 hours, using all of your 5 hour wait.","body":"Are you really so sure the tasks completed? Given the problem occurs when you have larger numbers of longer tasks, I suspect the submitted tasks have not completed.  Example: 60 tasks at one hour each with a thread pool of 6 will take at least 10 hours, using all of your 5 hour wait."},{"owner":{"account_id":16764362,"reputation":23,"user_id":12118365,"display_name":"ะะปะตะฝะฐ ะะพะฒะฐะปะธะฝัะบะฐั"},"score":0,"creation_date":1685481503,"post_id":76367775,"comment_id":134665643,"body_markdown":"Thanks for your reply. Yes, I mean &quot;increase&quot;. I am absolutely sure that all the tasks are completed.  I determine this by the logs inside the tasks.  All tasks are completed in approximately 3 hours and 50 minutes.","body":"Thanks for your reply. Yes, I mean &quot;increase&quot;. I am absolutely sure that all the tasks are completed.  I determine this by the logs inside the tasks.  All tasks are completed in approximately 3 hours and 50 minutes."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1685481648,"post_id":76367775,"comment_id":134665664,"body_markdown":"Check the threads if they are really all finished. Use a tool like VisualVM or on command line `jstack` to see the threads stack traces.","body":"Check the threads if they are really all finished. Use a tool like VisualVM or on command line <code>jstack</code> to see the threads stack traces."},{"owner":{"account_id":16764362,"reputation":23,"user_id":12118365,"display_name":"ะะปะตะฝะฐ ะะพะฒะฐะปะธะฝัะบะฐั"},"score":0,"creation_date":1685481789,"post_id":76367775,"comment_id":134665692,"body_markdown":"Anyway, if the tasks were interrupted by timeout, the code after awaitTermination would have been executed. Or am I still wrong?","body":"Anyway, if the tasks were interrupted by timeout, the code after awaitTermination would have been executed. Or am I still wrong?"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1685490759,"post_id":76367775,"comment_id":134666714,"body_markdown":"Also please clarify why the code after `pool.awaitTermination(5, TimeUnit.HOURS)` doesnโt execute: is it because `awaitTermination` throws or is it never returning? If youโre not sure, a thread dump will tell you that, too. Have you tested waiting the entire five hours?","body":"Also please clarify why the code after <code>pool.awaitTermination(5, TimeUnit.HOURS)</code> doesnโt execute: is it because <code>awaitTermination</code> throws or is it never returning? If youโre not sure, a thread dump will tell you that, too. Have you tested waiting the entire five hours?"},{"owner":{"account_id":16764362,"reputation":23,"user_id":12118365,"display_name":"ะะปะตะฝะฐ ะะพะฒะฐะปะธะฝัะบะฐั"},"score":0,"creation_date":1685517119,"post_id":76367775,"comment_id":134669335,"body_markdown":"Tim Moore, thank you for your answer. awaitTermination never retuns anything. I have tested waiting the entire 5 hours, but nothing happened. There was no any exception or awaitTermination result.","body":"Tim Moore, thank you for your answer. awaitTermination never retuns anything. I have tested waiting the entire 5 hours, but nothing happened. There was no any exception or awaitTermination result."}],"answers":[{"comments":[{"owner":{"account_id":16764362,"reputation":23,"user_id":12118365,"display_name":"ะะปะตะฝะฐ ะะพะฒะฐะปะธะฝัะบะฐั"},"score":0,"creation_date":1685519105,"post_id":76370624,"comment_id":134669722,"body_markdown":"Basil, thank you so much for your answer! I will definitely take your advice to properly shutdown your executor service. I tracked, what had happened to my awaitTermination. It turned out, that awaitTermination result is never got. I changed my code to print it to logs, but it is never printed to logs. And the InterruptedException is never thrown. It seems to me, that the main thread dies before all the tasks complete. Do you know why this might happen?","body":"Basil, thank you so much for your answer! I will definitely take your advice to properly shutdown your executor service. I tracked, what had happened to my awaitTermination. It turned out, that awaitTermination result is never got. I changed my code to print it to logs, but it is never printed to logs. And the InterruptedException is never thrown. It seems to me, that the main thread dies before all the tasks complete. Do you know why this might happen?"}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685513908,"creation_date":1685513555,"answer_id":76370624,"question_id":76367775,"body_markdown":"# Capture result of `awaitTermination`\r\n\r\nI suggest you do some debugging by recreating the scenario, as simply as possible. Add pieces to get closer to your current scenario.\r\n\r\nMost importantly, &#128073; track what is happening to your `awaitTermination`. Your code ignores its return value, a `boolean`. To quote [the Javadoc][1]:\r\n\r\n&gt;Returns: `true` if this executor terminated and `false` if the timeout elapsed before termination\r\n\r\nHere is some simplified code to begin with. \r\n\r\nBy the way, I recommend *not* using the term *pool* in regards to your executor service. An executor service may or may not involve a backing pool of threads. The point of the service is to let us ignore details of managing threads and thread pools. \r\n\r\n```java\r\nSystem.out.println ( &quot;Demo begins. &quot; + Instant.now ( ) );\r\nExecutorService executorService = Executors.newFixedThreadPool ( 6 );\r\n\r\nList &lt; Integer &gt; numbers = IntStream.rangeClosed ( 1 , 100 ).boxed ( ).toList ( );\r\nfor ( Integer number : numbers )\r\n{\r\n    executorService.submit ( ( ) -&gt;\r\n    {\r\n        Thread.currentThread ( ).setName ( &quot;Processing &quot; + number );\r\n        try\r\n        {\r\n            Thread.sleep ( Duration.ofMinutes ( 60 ) );\r\n        }\r\n        catch ( InterruptedException e )\r\n        {\r\n            System.out.println ( &quot;Sleep interrupted on thread: &quot; + Thread.currentThread ( ).getName ( ) );\r\n            return;\r\n        }\r\n        System.out.println ( &quot;Finished the run for # &quot; + number + &quot; on thread: &quot; + Thread.currentThread ( ).getName ( ) );\r\n    } );\r\n}\r\n\r\nexecutorService.shutdown ( );\r\ntry\r\n{\r\n    System.out.println ( &quot;Awaiting termination. &quot; + Instant.now ( ) );\r\n    boolean awaitTerminatedBeforeTimeLimit = executorService.awaitTermination ( 5 , TimeUnit.MINUTES );\r\n    System.out.println ( &quot;awaitTerminatedBeforeTimeLimit = &quot; + awaitTerminatedBeforeTimeLimit );\r\n}\r\ncatch ( InterruptedException e ) { e.printStackTrace ( ); }\r\nSystem.out.println ( &quot;Demo done. &quot; + Instant.now ( ) );\r\n```\r\n\r\nWhen run:\r\n\r\n```none\r\nDemo begins. 2023-05-30T23:20:47.255904Z\r\nAwaiting termination. 2023-05-30T23:20:47.263300Z\r\nawaitTerminatedBeforeTimeLimit = false\r\nDemo done. 2023-05-30T23:25:47.289905Z\r\n```\r\n\r\nNotice that `awaitTerminatedBeforeTimeLimit` is `false`. This means getting all our tasks done took more time than we allowed in our specified time limit passed to `awaitTermination`. \r\n\r\n## Improperly neglected shutdown of executor service\r\n\r\nAlso, very importantly, notice that the backing **thread pool of our executor service is still running** even though our app supposedly ended. \r\n\r\n- You can tell this in deployment because a Java process will still be running, unexpectedly. \r\n- Within in an IDE such as IntelliJ, you will see that the *Run* status of the app execution has not ceased. In IntelliJ that appears as red *Stop* button with the rounded square icon will still be active, still red, meaning the app has not entirely ended yet. \r\n\r\nTo avoid this zombie &#129503;โโ๏ธ thread pool, completely shut down your executor service.\r\n\r\nTo properly shutdown your executor service, see the boilerplate code given to you in the Javadoc of the [`ExecutorService`][2] interface. Look for the method named `shutdownAndAwaitTermination`. Here is my slightly modified version of that code.\r\n\r\n```java\r\nprivate void shutdownAndAwaitTermination ( final ExecutorService executorService , final Duration waitForTermination )\r\n{\r\n    executorService.shutdown ( ); // Disallow any more task submissions to this executor service.\r\n    try\r\n    {\r\n        // Wait a while for existing tasks to terminate.\r\n        if ( ! executorService.awaitTermination ( waitForTermination.toMillis ( ) , TimeUnit.MILLISECONDS ) )\r\n        {\r\n            executorService.shutdownNow ( ); // Cancel currently executing tasks\r\n            // Wait a while for tasks to respond to being cancelled.\r\n            if ( ! executorService.awaitTermination ( 60 , TimeUnit.SECONDS ) )\r\n                System.err.println ( &quot;Executor service did not terminate. &quot; + Instant.now ( ) );\r\n        }\r\n    }\r\n    catch ( InterruptedException ex )\r\n    {\r\n        // (Re-)Cancel if current thread also interrupted\r\n        executorService.shutdownNow ( );\r\n        // Preserve interrupt status\r\n        Thread.currentThread ( ).interrupt ( );\r\n    }\r\n}\r\n```\r\n\r\nLet&#39;s revise our code to call that method for graceful shutdown of the executor service.\r\n\r\n```java\r\nSystem.out.println ( &quot;Demo begins. &quot; + Instant.now ( ) );\r\nExecutorService executorService = Executors.newFixedThreadPool ( 6 );\r\n\r\nList &lt; Integer &gt; numbers = IntStream.rangeClosed ( 1 , 100 ).boxed ( ).toList ( );\r\nfor ( Integer number : numbers )\r\n{\r\n    executorService.submit ( ( ) -&gt;\r\n    {\r\n        Thread.currentThread ( ).setName ( &quot;Processing &quot; + number );\r\n        try\r\n        {\r\n            Thread.sleep ( Duration.ofMinutes ( 60 ) );\r\n        }\r\n        catch ( InterruptedException e )\r\n        {\r\n            System.out.println ( &quot;Sleep interrupted on thread: &quot; + Thread.currentThread ( ).getName ( ) );\r\n            return;\r\n        }\r\n        System.out.println ( &quot;Finished the run for # &quot; + number + &quot; on thread: &quot; + Thread.currentThread ( ).getName ( ) );\r\n    } );\r\n}\r\n\r\nthis.shutdownAndAwaitTermination ( executorService , Duration.ofMinutes ( 5 ) );\r\nSystem.out.println ( &quot;Demo done. &quot; + Instant.now ( ) );\r\n```\r\n\r\nWhen run:\r\n\r\n```none\r\nDemo begins. 2023-05-31T05:46:17.163745Z\r\nSleep interrupted on thread: Processing 3\r\nSleep interrupted on thread: Processing 1\r\nSleep interrupted on thread: Processing 4\r\nSleep interrupted on thread: Processing 5\r\nSleep interrupted on thread: Processing 6\r\nSleep interrupted on thread: Processing 2\r\nDemo done. 2023-05-31T05:51:17.182036Z\r\n```\r\n\r\nWe have the same situation, where our running tasks need more time than we allow. But now, notice (a) our executing tasks were interrupted successfully, and (b) the app has truly ended. Be sure to write your own tasks so that they properly look for the interrupt flag.\r\n\r\n\r\n----------\r\n\r\n\r\nTip: If you are sure your tasks will finish within a day, in modern Java you can use try-with-resources syntax to take advantage of `ExecutorService` now being `AutoCloseable`. \r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ExecutorService.html#awaitTermination(long,java.util.concurrent.TimeUnit)\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ExecutorService.html\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ExecutorService.html#close()\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/AutoCloseable.html\r\n  [5]: https://wiki.openjdk.org/display/loom/Main\r\n  [6]: https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/concurrent/ExecutorService.java","title":"java.util.concurrent.ExecutorService.awaitTermination() doesn&#39;t work as expected","body":"<h1>Capture result of <code>awaitTermination</code></h1>\n<p>I suggest you do some debugging by recreating the scenario, as simply as possible. Add pieces to get closer to your current scenario.</p>\n<p>Most importantly, ๐ track what is happening to your <code>awaitTermination</code>. Your code ignores its return value, a <code>boolean</code>. To quote <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ExecutorService.html#awaitTermination(long,java.util.concurrent.TimeUnit)\" rel=\"nofollow noreferrer\">the Javadoc</a>:</p>\n<blockquote>\n<p>Returns: <code>true</code> if this executor terminated and <code>false</code> if the timeout elapsed before termination</p>\n</blockquote>\n<p>Here is some simplified code to begin with.</p>\n<p>By the way, I recommend <em>not</em> using the term <em>pool</em> in regards to your executor service. An executor service may or may not involve a backing pool of threads. The point of the service is to let us ignore details of managing threads and thread pools.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println ( &quot;Demo begins. &quot; + Instant.now ( ) );\nExecutorService executorService = Executors.newFixedThreadPool ( 6 );\n\nList &lt; Integer &gt; numbers = IntStream.rangeClosed ( 1 , 100 ).boxed ( ).toList ( );\nfor ( Integer number : numbers )\n{\n    executorService.submit ( ( ) -&gt;\n    {\n        Thread.currentThread ( ).setName ( &quot;Processing &quot; + number );\n        try\n        {\n            Thread.sleep ( Duration.ofMinutes ( 60 ) );\n        }\n        catch ( InterruptedException e )\n        {\n            System.out.println ( &quot;Sleep interrupted on thread: &quot; + Thread.currentThread ( ).getName ( ) );\n            return;\n        }\n        System.out.println ( &quot;Finished the run for # &quot; + number + &quot; on thread: &quot; + Thread.currentThread ( ).getName ( ) );\n    } );\n}\n\nexecutorService.shutdown ( );\ntry\n{\n    System.out.println ( &quot;Awaiting termination. &quot; + Instant.now ( ) );\n    boolean awaitTerminatedBeforeTimeLimit = executorService.awaitTermination ( 5 , TimeUnit.MINUTES );\n    System.out.println ( &quot;awaitTerminatedBeforeTimeLimit = &quot; + awaitTerminatedBeforeTimeLimit );\n}\ncatch ( InterruptedException e ) { e.printStackTrace ( ); }\nSystem.out.println ( &quot;Demo done. &quot; + Instant.now ( ) );\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Demo begins. 2023-05-30T23:20:47.255904Z\nAwaiting termination. 2023-05-30T23:20:47.263300Z\nawaitTerminatedBeforeTimeLimit = false\nDemo done. 2023-05-30T23:25:47.289905Z\n</code></pre>\n<p>Notice that <code>awaitTerminatedBeforeTimeLimit</code> is <code>false</code>. This means getting all our tasks done took more time than we allowed in our specified time limit passed to <code>awaitTermination</code>.</p>\n<h2>Improperly neglected shutdown of executor service</h2>\n<p>Also, very importantly, notice that the backing <strong>thread pool of our executor service is still running</strong> even though our app supposedly ended.</p>\n<ul>\n<li>You can tell this in deployment because a Java process will still be running, unexpectedly.</li>\n<li>Within in an IDE such as IntelliJ, you will see that the <em>Run</em> status of the app execution has not ceased. In IntelliJ that appears as red <em>Stop</em> button with the rounded square icon will still be active, still red, meaning the app has not entirely ended yet.</li>\n</ul>\n<p>To avoid this zombie ๐งโโ๏ธ thread pool, completely shut down your executor service.</p>\n<p>To properly shutdown your executor service, see the boilerplate code given to you in the Javadoc of the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ExecutorService.html\" rel=\"nofollow noreferrer\"><code>ExecutorService</code></a> interface. Look for the method named <code>shutdownAndAwaitTermination</code>. Here is my slightly modified version of that code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void shutdownAndAwaitTermination ( final ExecutorService executorService , final Duration waitForTermination )\n{\n    executorService.shutdown ( ); // Disallow any more task submissions to this executor service.\n    try\n    {\n        // Wait a while for existing tasks to terminate.\n        if ( ! executorService.awaitTermination ( waitForTermination.toMillis ( ) , TimeUnit.MILLISECONDS ) )\n        {\n            executorService.shutdownNow ( ); // Cancel currently executing tasks\n            // Wait a while for tasks to respond to being cancelled.\n            if ( ! executorService.awaitTermination ( 60 , TimeUnit.SECONDS ) )\n                System.err.println ( &quot;Executor service did not terminate. &quot; + Instant.now ( ) );\n        }\n    }\n    catch ( InterruptedException ex )\n    {\n        // (Re-)Cancel if current thread also interrupted\n        executorService.shutdownNow ( );\n        // Preserve interrupt status\n        Thread.currentThread ( ).interrupt ( );\n    }\n}\n</code></pre>\n<p>Let's revise our code to call that method for graceful shutdown of the executor service.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println ( &quot;Demo begins. &quot; + Instant.now ( ) );\nExecutorService executorService = Executors.newFixedThreadPool ( 6 );\n\nList &lt; Integer &gt; numbers = IntStream.rangeClosed ( 1 , 100 ).boxed ( ).toList ( );\nfor ( Integer number : numbers )\n{\n    executorService.submit ( ( ) -&gt;\n    {\n        Thread.currentThread ( ).setName ( &quot;Processing &quot; + number );\n        try\n        {\n            Thread.sleep ( Duration.ofMinutes ( 60 ) );\n        }\n        catch ( InterruptedException e )\n        {\n            System.out.println ( &quot;Sleep interrupted on thread: &quot; + Thread.currentThread ( ).getName ( ) );\n            return;\n        }\n        System.out.println ( &quot;Finished the run for # &quot; + number + &quot; on thread: &quot; + Thread.currentThread ( ).getName ( ) );\n    } );\n}\n\nthis.shutdownAndAwaitTermination ( executorService , Duration.ofMinutes ( 5 ) );\nSystem.out.println ( &quot;Demo done. &quot; + Instant.now ( ) );\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Demo begins. 2023-05-31T05:46:17.163745Z\nSleep interrupted on thread: Processing 3\nSleep interrupted on thread: Processing 1\nSleep interrupted on thread: Processing 4\nSleep interrupted on thread: Processing 5\nSleep interrupted on thread: Processing 6\nSleep interrupted on thread: Processing 2\nDemo done. 2023-05-31T05:51:17.182036Z\n</code></pre>\n<p>We have the same situation, where our running tasks need more time than we allow. But now, notice (a) our executing tasks were interrupted successfully, and (b) the app has truly ended. Be sure to write your own tasks so that they properly look for the interrupt flag.</p>\n<hr />\n<p>Tip: If you are sure your tasks will finish within a day, in modern Java you can use try-with-resources syntax to take advantage of <code>ExecutorService</code> now being <code>AutoCloseable</code>.</p>\n"}],"owner":{"account_id":16764362,"reputation":23,"user_id":12118365,"display_name":"ะะปะตะฝะฐ ะะพะฒะฐะปะธะฝัะบะฐั"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1685518301,"creation_date":1685472462,"question_id":76367775,"body_markdown":"I have a problem. The code that follows pool.awaitTermination() is not executed.\r\n\r\n```\r\n        ExecutorService pool = Executors.newFixedThreadPool(6);\r\n\r\n        for (HierarchyItem rootItem : rootObjectItems) {\r\n            pool.submit(() -&gt; {\r\n                final Thread currentThread = Thread.currentThread();\r\n                currentThread.setName(&quot;Processing &quot; + rootItem.getName());\r\n                try {\r\n                    addressObjectProcessor.handle(rootItem);\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            });\r\n        }\r\n\r\n        pool.shutdown();\r\n        try {\r\n            boolean poolTermination = pool.awaitTermination(5, TimeUnit.HOURS);\r\n            System.out.println(poolTermination);\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        /// code after pool.awaitTermination. It&#39;s not executed\r\n         . . . . \r\n```\r\n\r\nI see in my logs, that all tasks are absolutely completed, but the code after ```pool.awaitTermination(5, TimeUnit.HOURS);``` doesnt execute. This problem appears when ```rootObjectItems``` size is 90. When the ```rootObjectItems``` size is 15, everything works fine, but when I increase ```rootObjectItems```, it looks like the main thread sleeps or stops running this method, and nothing happens even after timeout. Every task processing takes from 5 to 60 minutes. \r\n\r\n```pool.awaitTermination``` result is never printed to logs, and the InterruptedException is never thrown.\r\n\r\nI am new in concurrent, please, help me solve this problem. Many thanks in advance!","title":"java.util.concurrent.ExecutorService.awaitTermination() doesn&#39;t work as expected","body":"<p>I have a problem. The code that follows pool.awaitTermination() is not executed.</p>\n<pre><code>        ExecutorService pool = Executors.newFixedThreadPool(6);\n\n        for (HierarchyItem rootItem : rootObjectItems) {\n            pool.submit(() -&gt; {\n                final Thread currentThread = Thread.currentThread();\n                currentThread.setName(&quot;Processing &quot; + rootItem.getName());\n                try {\n                    addressObjectProcessor.handle(rootItem);\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            });\n        }\n\n        pool.shutdown();\n        try {\n            boolean poolTermination = pool.awaitTermination(5, TimeUnit.HOURS);\n            System.out.println(poolTermination);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n\n        /// code after pool.awaitTermination. It's not executed\n         . . . . \n</code></pre>\n<p>I see in my logs, that all tasks are absolutely completed, but the code after <code>pool.awaitTermination(5, TimeUnit.HOURS);</code> doesnt execute. This problem appears when <code>rootObjectItems</code> size is 90. When the <code>rootObjectItems</code> size is 15, everything works fine, but when I increase <code>rootObjectItems</code>, it looks like the main thread sleeps or stops running this method, and nothing happens even after timeout. Every task processing takes from 5 to 60 minutes.</p>\n<p><code>pool.awaitTermination</code> result is never printed to logs, and the InterruptedException is never thrown.</p>\n<p>I am new in concurrent, please, help me solve this problem. Many thanks in advance!</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":2379579,"reputation":2825,"user_id":2081889,"accept_rate":80,"display_name":"Taylor Hx"},"score":2,"creation_date":1385957911,"post_id":20320719,"comment_id":30325504,"body_markdown":"How do you define a sentence? Is it a string of characters ending with a punctuation mark, or do you have a stricter definition?","body":"How do you define a sentence? Is it a string of characters ending with a punctuation mark, or do you have a stricter definition?"},{"owner":{"account_id":2004971,"reputation":307,"user_id":1795126,"accept_rate":33,"display_name":"user1923"},"score":0,"creation_date":1385957958,"post_id":20320719,"comment_id":30325519,"body_markdown":"My sentence must start with either one or more whitespaces/tabs. (tabs and spaces can be bunched together before any non-whitespace phrase of characters appears). Each word after the first must be separated by a whitespace. And yes, the sentence must end with a punctuation.","body":"My sentence must start with either one or more whitespaces/tabs. (tabs and spaces can be bunched together before any non-whitespace phrase of characters appears). Each word after the first must be separated by a whitespace. And yes, the sentence must end with a punctuation."},{"owner":{"account_id":2367596,"reputation":14579,"user_id":2073001,"accept_rate":91,"display_name":"Steve P."},"score":1,"creation_date":1385958140,"post_id":20320719,"comment_id":30325574,"body_markdown":"@user1923 Your example sentence doesn&#39;t end in a period.","body":"@user1923 Your example sentence doesn&#39;t end in a period."},{"owner":{"account_id":2004971,"reputation":307,"user_id":1795126,"accept_rate":33,"display_name":"user1923"},"score":0,"creation_date":1385958210,"post_id":20320719,"comment_id":30325588,"body_markdown":"^ please look at the stricter definition i posed above.","body":"^ please look at the stricter definition i posed above."}],"answers":[{"comments":[{"owner":{"account_id":2367596,"reputation":14579,"user_id":2073001,"accept_rate":91,"display_name":"Steve P."},"score":0,"creation_date":1385958610,"post_id":20320820,"comment_id":30325685,"body_markdown":"You don&#39;t need to escape `.` in character classes.  Also, this doesn&#39;t guarantee anything about where this pattern occurs in the string.","body":"You don&#39;t need to escape <code>.</code> in character classes.  Also, this doesn&#39;t guarantee anything about where this pattern occurs in the string."},{"owner":{"account_id":1210225,"reputation":1401,"user_id":1178928,"accept_rate":80,"display_name":"wiktus239"},"score":0,"creation_date":1415872860,"post_id":20320820,"comment_id":42362648,"body_markdown":"That is not a good definition. What if we have a decimal number or a name initial in the sentence?","body":"That is not a good definition. What if we have a decimal number or a name initial in the sentence?"},{"owner":{"account_id":2379579,"reputation":2825,"user_id":2081889,"accept_rate":80,"display_name":"Taylor Hx"},"score":0,"creation_date":1415920311,"post_id":20320820,"comment_id":42388670,"body_markdown":"@wiktus239 You&#39;re right, it&#39;s not the best definition. Steve P&#39;s definition is better and thus his answer was accepted.","body":"@wiktus239 You&#39;re right, it&#39;s not the best definition. Steve P&#39;s definition is better and thus his answer was accepted."},{"owner":{"account_id":2672151,"reputation":862,"user_id":2309309,"accept_rate":43,"display_name":"fdrv"},"score":1,"creation_date":1458129550,"post_id":20320820,"comment_id":59718988,"body_markdown":"@TaylorHx But where you get this nice regExp visualization?","body":"@TaylorHx But where you get this nice regExp visualization?"},{"owner":{"account_id":12414541,"reputation":5811,"user_id":9051006,"display_name":"CJK"},"score":0,"creation_date":1560514550,"post_id":20320820,"comment_id":99771921,"body_markdown":"What was the source for that definition, and has the author ever read, say, a book ?  I would go as far to say that this not only fails as a definition, but doesn&#39;t even come satisfactorily close to an approximation, given that two out of its three assertions are demonstrably false in non-trivial cases both individually and together.","body":"What was the source for that definition, and has the author ever read, say, a book ?  I would go as far to say that this not only fails as a definition, but doesn&#39;t even come satisfactorily close to an approximation, given that two out of its three assertions are demonstrably false in non-trivial cases both individually and together."},{"owner":{"account_id":2682817,"reputation":2074,"user_id":3104887,"accept_rate":90,"display_name":"mattgabor"},"score":0,"creation_date":1653502446,"post_id":20320820,"comment_id":127870846,"body_markdown":"This also doesn&#39;t solve for &quot;...&quot;","body":"This also doesn&#39;t solve for &quot;...&quot;"}],"tags":[],"owner":{"account_id":2379579,"reputation":2825,"user_id":2081889,"accept_rate":80,"display_name":"Taylor Hx"},"comment_count":6,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1385958694,"creation_date":1385958239,"answer_id":20320820,"question_id":20320719,"body_markdown":"An example regex to match sentences by the definition: &quot;A sentence is a series of characters, starting with at lease one whitespace character, that ends in one of `.`, `!` or `?`&quot; is as follows:\r\n\r\n    \\s+[^.!?]*[.!?]\r\n\r\n![Regular expression visualization](https://www.debuggex.com/i/wLhujYNc2DYcbdSN.png)\r\n\r\nNote that newline characters will also be included in this match.","title":"Constructing regex pattern to match sentence","body":"<p>An example regex to match sentences by the definition: \"A sentence is a series of characters, starting with at lease one whitespace character, that ends in one of <code>.</code>, <code>!</code> or <code>?</code>\" is as follows:</p>\n\n<pre><code>\\s+[^.!?]*[.!?]\n</code></pre>\n\n<p><img src=\"https://www.debuggex.com/i/wLhujYNc2DYcbdSN.png\" alt=\"Regular expression visualization\"></p>\n\n<p>Note that newline characters will also be included in this match.</p>\n"},{"comments":[{"owner":{"account_id":2004971,"reputation":307,"user_id":1795126,"accept_rate":33,"display_name":"user1923"},"score":1,"creation_date":1385958574,"post_id":20320828,"comment_id":30325681,"body_markdown":"Thanks for your reply, but the regex you typed up won&#39;t compile. When I put it into eclipse, it gives me this error: &quot;Syntax error on tokens, ( expected instead&quot;. Do you know how to fix that without messing up your code?","body":"Thanks for your reply, but the regex you typed up won&#39;t compile. When I put it into eclipse, it gives me this error: &quot;Syntax error on tokens, ( expected instead&quot;. Do you know how to fix that without messing up your code?"},{"owner":{"account_id":2367596,"reputation":14579,"user_id":2073001,"accept_rate":91,"display_name":"Steve P."},"score":0,"creation_date":1385958684,"post_id":20320828,"comment_id":30325706,"body_markdown":"@user1923 fixed.  Sorry, missed escaping `&quot;`.","body":"@user1923 fixed.  Sorry, missed escaping <code>&quot;</code>."},{"owner":{"account_id":258774,"reputation":2282,"user_id":2742481,"accept_rate":69,"display_name":"Eric Uldall"},"score":6,"creation_date":1436457676,"post_id":20320828,"comment_id":50631952,"body_markdown":"Note: This regex does not scale. If you have senteces with M.D. in them or Mrs. Smith. It will not work.","body":"Note: This regex does not scale. If you have senteces with M.D. in them or Mrs. Smith. It will not work."},{"owner":{"account_id":2311015,"reputation":6227,"user_id":2029134,"display_name":"Dลฉng Trแบงn Trung"},"score":1,"creation_date":1461206409,"post_id":20320828,"comment_id":61096712,"body_markdown":"This solution doesn&#39;t seem to parse this example correctly: &quot;I have the chance to meet Dr. House. He was with Mr. Home.&quot;","body":"This solution doesn&#39;t seem to parse this example correctly: &quot;I have the chance to meet Dr. House. He was with Mr. Home.&quot;"},{"owner":{"account_id":12414541,"reputation":5811,"user_id":9051006,"display_name":"CJK"},"score":0,"creation_date":1560515372,"post_id":20320828,"comment_id":99772337,"body_markdown":"The flaw in this approach is in defining a set of character classes that one deems to be the only valid components of a sentence structure.  People have already noticed the issue with a non-terminating period, but even digits are excluded despite being institutionally advised in English-language prose (subject to context-specific exceptions) to use numerals to represent all (integer) numbers greater than ten, and only to spell out zero through ten.  A sentence can also end with a quotation mark, and in some formal styles of documents, a parenthesis, a square bracket or a line-break character.","body":"The flaw in this approach is in defining a set of character classes that one deems to be the only valid components of a sentence structure.  People have already noticed the issue with a non-terminating period, but even digits are excluded despite being institutionally advised in English-language prose (subject to context-specific exceptions) to use numerals to represent all (integer) numbers greater than ten, and only to spell out zero through ten.  A sentence can also end with a quotation mark, and in some formal styles of documents, a parenthesis, a square bracket or a line-break character."}],"tags":[],"owner":{"account_id":2367596,"reputation":14579,"user_id":2073001,"accept_rate":91,"display_name":"Steve P."},"comment_count":5,"down_vote_count":0,"up_vote_count":33,"is_accepted":true,"score":33,"last_activity_date":1385958587,"creation_date":1385958255,"answer_id":20320828,"question_id":20320719,"body_markdown":"    String regex = &quot;^\\\\s+[A-Za-z,;&#39;\\&quot;\\\\s]+[.?!]$&quot;\r\n\r\n`^` means &quot;begins with&quot;&lt;br&gt;\r\n`\\\\s` means white space&lt;br&gt;\r\n`+` means 1 or more&lt;br&gt;\r\n`[A-Za-z,;&#39;&quot;\\\\s]` means any letter, `,`, `;`, `&#39;`, `&quot;`, or whitespace character&lt;br&gt;\r\n`$` means &quot;ends with&quot;&lt;br&gt;","title":"Constructing regex pattern to match sentence","body":"<pre><code>String regex = \"^\\\\s+[A-Za-z,;'\\\"\\\\s]+[.?!]$\"\n</code></pre>\n\n<p><code>^</code> means \"begins with\"<br>\n<code>\\\\s</code> means white space<br>\n<code>+</code> means 1 or more<br>\n<code>[A-Za-z,;'\"\\\\s]</code> means any letter, <code>,</code>, <code>;</code>, <code>'</code>, <code>\"</code>, or whitespace character<br>\n<code>$</code> means \"ends with\"<br></p>\n"},{"comments":[{"owner":{"account_id":2367596,"reputation":14579,"user_id":2073001,"accept_rate":91,"display_name":"Steve P."},"score":0,"creation_date":1385958876,"post_id":20320840,"comment_id":30325758,"body_markdown":"Why are you using a look-ahead here?","body":"Why are you using a look-ahead here?"},{"owner":{"account_id":2367596,"reputation":14579,"user_id":2073001,"accept_rate":91,"display_name":"Steve P."},"score":0,"creation_date":1385959109,"post_id":20320840,"comment_id":30325829,"body_markdown":"It wasn&#39;t incorrect, there just didn&#39;t seem to be a use for it.  Wasn&#39;t sure if you thought it was an optimization or something.  It some cases using an atomic group can be an optimization, but not in this case (I think).","body":"It wasn&#39;t incorrect, there just didn&#39;t seem to be a use for it.  Wasn&#39;t sure if you thought it was an optimization or something.  It some cases using an atomic group can be an optimization, but not in this case (I think)."}],"tags":[],"owner":{"account_id":2540011,"reputation":70006,"user_id":2206004,"accept_rate":100,"display_name":"hwnd"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1385959143,"creation_date":1385958351,"answer_id":20320840,"question_id":20320719,"body_markdown":"Based upon what you desire and asked for, the following will work.\r\n\r\n    String s  = &quot;    hello there I like regex!&quot;;\r\n    Pattern p = Pattern.compile(&quot;^\\\\s+[a-zA-Z\\\\s]+[.?!]$&quot;);\r\n    Matcher m = p.matcher(s); \r\n    if (m.matches()) {\r\n        System.out.println(&quot;hurray!&quot;);\r\n    }\r\n\r\nSee [`working demo`][1]\r\n\r\n\r\n  [1]: http://ideone.com/Gx9m9k","title":"Constructing regex pattern to match sentence","body":"<p>Based upon what you desire and asked for, the following will work.</p>\n\n<pre><code>String s  = \"    hello there I like regex!\";\nPattern p = Pattern.compile(\"^\\\\s+[a-zA-Z\\\\s]+[.?!]$\");\nMatcher m = p.matcher(s); \nif (m.matches()) {\n    System.out.println(\"hurray!\");\n}\n</code></pre>\n\n<p>See <a href=\"http://ideone.com/Gx9m9k\" rel=\"nofollow\"><code>working demo</code></a></p>\n"},{"comments":[{"owner":{"account_id":6402640,"reputation":17528,"user_id":4964822,"display_name":"nice_dev"},"score":0,"creation_date":1442822547,"post_id":20320893,"comment_id":53223896,"body_markdown":"Your regex would only look for spaces","body":"Your regex would only look for spaces"}],"tags":[],"owner":{"account_id":3650433,"reputation":39,"user_id":3042755,"display_name":"Ashish"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1385958643,"creation_date":1385958643,"answer_id":20320893,"question_id":20320719,"body_markdown":"If you looking to match all strings starting with a white space you can try using &quot;^\\s+*&quot;\r\nregular expression.\r\n\r\nThis tool could help you to test your regular expression efficiently.\r\n\r\nhttp://www.rubular.com/\r\n","title":"Constructing regex pattern to match sentence","body":"<p>If you looking to match all strings starting with a white space you can try using \"^\\s+*\"\nregular expression.</p>\n\n<p>This tool could help you to test your regular expression efficiently.</p>\n\n<p><a href=\"http://www.rubular.com/\" rel=\"nofollow\">http://www.rubular.com/</a></p>\n"},{"tags":[],"owner":{"account_id":17550228,"reputation":11,"user_id":12730776,"display_name":"Eloi Montanaro"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1579257273,"creation_date":1579257273,"answer_id":59785646,"question_id":20320719,"body_markdown":"```\r\nString regex = &quot;(?&lt;=^|(\\.|!|\\?) |\\n|\\t|\\r|\\r\\n) *\\(?[A-Z][^.!?]*((\\.|!|\\?)(?! |\\n|\\r|\\r\\n)[^.!?]*)*(\\.|!|\\?)(?= |\\n|\\r|\\r\\n)&quot;\r\n```\r\nThis match any sentence following the definition &#39;a sentence start with a capital letter and end with a dot&#39;.","title":"Constructing regex pattern to match sentence","body":"<pre><code>String regex = \"(?&lt;=^|(\\.|!|\\?) |\\n|\\t|\\r|\\r\\n) *\\(?[A-Z][^.!?]*((\\.|!|\\?)(?! |\\n|\\r|\\r\\n)[^.!?]*)*(\\.|!|\\?)(?= |\\n|\\r|\\r\\n)\"\n</code></pre>\n\n<p>This match any sentence following the definition 'a sentence start with a capital letter and end with a dot'.</p>\n"},{"tags":[],"owner":{"account_id":183994,"reputation":19070,"user_id":419761,"accept_rate":86,"display_name":"l33t"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1611355378,"creation_date":1611355378,"answer_id":65853729,"question_id":20320719,"body_markdown":"A sentence starts with a *word boundary* (hence `\\b`) and ends with *one or more* terminators. Thus: \r\n\r\n```regex\r\n\\b[^.!?]+[.!?]+\r\n```\r\n\r\nhttps://regex101.com/r/7DdyM1/1\r\n\r\nThis gives pretty accurate results. However, it will **not** handle fractional numbers. E.g. This sentence will be interpreted as two sentences:\r\n```\r\nThe value of PI is 3.141...\r\n```","title":"Constructing regex pattern to match sentence","body":"<p>A sentence starts with a <em>word boundary</em> (hence <code>\\b</code>) and ends with <em>one or more</em> terminators. Thus:</p>\n<pre class=\"lang-regex prettyprint-override\"><code>\\b[^.!?]+[.!?]+\n</code></pre>\n<p><a href=\"https://regex101.com/r/7DdyM1/1\" rel=\"noreferrer\">https://regex101.com/r/7DdyM1/1</a></p>\n<p>This gives pretty accurate results. However, it will <strong>not</strong> handle fractional numbers. E.g. This sentence will be interpreted as two sentences:</p>\n<pre><code>The value of PI is 3.141...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1646920610,"post_id":71424502,"comment_id":126246687,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/71424502/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":4984101,"reputation":31,"user_id":4008235,"display_name":"John Kyalo"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646935684,"creation_date":1646916944,"answer_id":71424502,"question_id":20320719,"body_markdown":"The below regex pattern matches sentences in a paragraph.\r\n\r\n\r\n```Pattern pattern = Pattern.compile(&quot;\\\\b[\\\\w\\\\p{Space}โโโ\\\\p{Punct}&amp;&amp;[^.?!]]+[.?!]&quot;);```\r\n\r\nReference: https://devsought.com/regex-pattern-to-match-sentence","title":"Constructing regex pattern to match sentence","body":"<p>The below regex pattern matches sentences in a paragraph.</p>\n<p><code>Pattern pattern = Pattern.compile(&quot;\\\\b[\\\\w\\\\p{Space}โโโ\\\\p{Punct}&amp;&amp;[^.?!]]+[.?!]&quot;);</code></p>\n<p>Reference: <a href=\"https://devsought.com/regex-pattern-to-match-sentence\" rel=\"nofollow noreferrer\">https://devsought.com/regex-pattern-to-match-sentence</a></p>\n"},{"tags":[],"owner":{"account_id":1284397,"reputation":672,"user_id":1237786,"accept_rate":40,"display_name":"anefeletos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685518036,"creation_date":1685518036,"answer_id":76371083,"question_id":20320719,"body_markdown":"This pattern takes account abbrevations also, considering that next sentence also begins with capital letter:\r\n\r\n      ((?:[A-Zฮ-ฮฉ0-9][\\S\\s]+?)+?[a-zฮฌ-ฯ0-9][.!?;]+)(?= [A-Zฮ-ฮฉ0-9]|$)\r\n\r\nIncludes greek char range also. [Test Here][1].\r\n\r\n\r\n  [1]: https://regex101.com/r/PMJp2r/1","title":"Constructing regex pattern to match sentence","body":"<p>This pattern takes account abbrevations also, considering that next sentence also begins with capital letter:</p>\n<pre><code>  ((?:[A-Zฮ-ฮฉ0-9][\\S\\s]+?)+?[a-zฮฌ-ฯ0-9][.!?;]+)(?= [A-Zฮ-ฮฉ0-9]|$)\n</code></pre>\n<p>Includes greek char range also. <a href=\"https://regex101.com/r/PMJp2r/1\" rel=\"nofollow noreferrer\">Test Here</a>.</p>\n"}],"owner":{"account_id":2004971,"reputation":307,"user_id":1795126,"accept_rate":33,"display_name":"user1923"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132301,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":20320828,"answer_count":8,"score":17,"last_activity_date":1685518036,"creation_date":1385957683,"question_id":20320719,"body_markdown":"I&#39;m trying to write a regex pattern that will match any sentence that begins with multiple or one tab and/or whitespace.\r\nFor example, I want my regex pattern to be able to match &quot;    hello there I like regex!&quot; \r\nbut so I&#39;m scratching my head on how to match words after &quot;hello&quot;. So far I have this:\r\n\r\n        String REGEX = &quot;(?s)(\\\\p{Blank}+)([a-z][ ])*&quot;;\r\n\t    Pattern PATTERN = Pattern.compile(REGEX);\r\n\t    Matcher m = PATTERN.matcher(&quot;         asdsada  adf adfah.&quot;);\r\n\t    if (m.matches()) {\r\n\t        System.out.println(&quot;hurray!&quot;);\r\n\t    }\r\nAny help would be appreciated. Thanks.","title":"Constructing regex pattern to match sentence","body":"<p>I'm trying to write a regex pattern that will match any sentence that begins with multiple or one tab and/or whitespace.\nFor example, I want my regex pattern to be able to match \"    hello there I like regex!\" \nbut so I'm scratching my head on how to match words after \"hello\". So far I have this:</p>\n\n<pre><code>    String REGEX = \"(?s)(\\\\p{Blank}+)([a-z][ ])*\";\n    Pattern PATTERN = Pattern.compile(REGEX);\n    Matcher m = PATTERN.matcher(\"         asdsada  adf adfah.\");\n    if (m.matches()) {\n        System.out.println(\"hurray!\");\n    }\n</code></pre>\n\n<p>Any help would be appreciated. Thanks.</p>\n"},{"tags":["java","apache-poi","docx","apache-tika","tika-server"],"comments":[{"owner":{"account_id":9063580,"reputation":42,"user_id":6749289,"display_name":"DeadPool"},"score":0,"creation_date":1696656083,"post_id":76371078,"comment_id":136184402,"body_markdown":"Updating the reason behind this latency:- Files like docx, pptx are compressed formats, if we are creating a pure text file of lets say 2 MB for docx, its actual size can be identified via checking the byte Array and that coming as very large in length. So, a 2 MB text file and 2 MB docx file having only text cant be comparable to validate the response time.","body":"Updating the reason behind this latency:- Files like docx, pptx are compressed formats, if we are creating a pure text file of lets say 2 MB for docx, its actual size can be identified via checking the byte Array and that coming as very large in length. So, a 2 MB text file and 2 MB docx file having only text cant be comparable to validate the response time."}],"owner":{"account_id":9063580,"reputation":42,"user_id":6749289,"display_name":"DeadPool"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1685518005,"creation_date":1685518005,"question_id":76371078,"body_markdown":"I am using tika 2.6.x with java opts as XX:MaxMetaspaceSize=200M -Xss512K -XX:MaxDirectMemorySize=64M for below code. It seems that processing time is very high(around a minute) for a pure text containing docx file of size more than equals to 2 MB. Same code logic is working very efficient for 2 MB csv, pptx and other files and sending the response in less than 5seconds. Any more configuration needed? please suggest, thanks.\r\n\r\n    Parser pasrer=new AutoDetectParser()\r\n    BufferWriter=Files.newBufferedWriter(&quot;MyFile&quot;)\r\n    Handler handler=new BodyContentHandler(BufferWriter)\r\n    //some code logic for embdedded image\r\n    context.set(classOf[EmbeddedDocumentExtractor], imageChecker)\r\n    parse(TikaInputStreamObj, handler, Metadata, context)\r\n\r\n\r\n\r\n","title":"Tika Docx Scanning for 2 MB file (Pure text docx file) taking more than 30 seconds","body":"<p>I am using tika 2.6.x with java opts as XX:MaxMetaspaceSize=200M -Xss512K -XX:MaxDirectMemorySize=64M for below code. It seems that processing time is very high(around a minute) for a pure text containing docx file of size more than equals to 2 MB. Same code logic is working very efficient for 2 MB csv, pptx and other files and sending the response in less than 5seconds. Any more configuration needed? please suggest, thanks.</p>\n<pre><code>Parser pasrer=new AutoDetectParser()\nBufferWriter=Files.newBufferedWriter(&quot;MyFile&quot;)\nHandler handler=new BodyContentHandler(BufferWriter)\n//some code logic for embdedded image\ncontext.set(classOf[EmbeddedDocumentExtractor], imageChecker)\nparse(TikaInputStreamObj, handler, Metadata, context)\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":14500349,"reputation":118,"user_id":10473718,"display_name":"I_AM__PAUL"},"score":0,"creation_date":1614296464,"post_id":66375980,"comment_id":117350119,"body_markdown":"Are you trying to work with Actuator? If not then create a config with extend of WebSecurityConfigurerAdapter to adjust the secuity.","body":"Are you trying to work with Actuator? If not then create a config with extend of WebSecurityConfigurerAdapter to adjust the secuity."},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":4,"creation_date":1614296620,"post_id":66375980,"comment_id":117350150,"body_markdown":"you need to add `@EnableWebSecurity` https://stackoverflow.com/a/45682916/1840146","body":"you need to add <code>@EnableWebSecurity</code> <a href=\"https://stackoverflow.com/a/45682916/1840146\">stackoverflow.com/a/45682916/1840146</a>"},{"owner":{"account_id":15408092,"reputation":287,"user_id":11115666,"display_name":"Albin"},"score":0,"creation_date":1614352774,"post_id":66375980,"comment_id":117367616,"body_markdown":"@I_AM__PAUL\nExtend with WebSecurityConfigurerAdapter  and overriding the configure method is working. But my question is specifically based on the spring document I shared. In that it is talking about creating a bean for this. That way I added the code as I mentioned in the question, but it is not working","body":"@I_AM__PAUL Extend with WebSecurityConfigurerAdapter  and overriding the configure method is working. But my question is specifically based on the spring document I shared. In that it is talking about creating a bean for this. That way I added the code as I mentioned in the question, but it is not working"},{"owner":{"account_id":15408092,"reputation":287,"user_id":11115666,"display_name":"Albin"},"score":0,"creation_date":1614352836,"post_id":66375980,"comment_id":117367647,"body_markdown":"@Toerktumlare\nI tried that, still the same failure. Updated the change in the original question","body":"@Toerktumlare I tried that, still the same failure. Updated the change in the original question"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1614354086,"post_id":66375980,"comment_id":117368218,"body_markdown":"please post your full exception","body":"please post your full exception"},{"owner":{"account_id":15408092,"reputation":287,"user_id":11115666,"display_name":"Albin"},"score":0,"creation_date":1614356657,"post_id":66375980,"comment_id":117369401,"body_markdown":"@Toerktumlare\nPlease find the update added in the question","body":"@Toerktumlare Please find the update added in the question"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1614358808,"post_id":66375980,"comment_id":117370408,"body_markdown":"have you tried removing the `@Configuration`","body":"have you tried removing the <code>@Configuration</code>"},{"owner":{"account_id":15408092,"reputation":287,"user_id":11115666,"display_name":"Albin"},"score":0,"creation_date":1614360232,"post_id":66375980,"comment_id":117371006,"body_markdown":"@Toerktumlare I tried that now. Still the same failure.","body":"@Toerktumlare I tried that now. Still the same failure."}],"owner":{"account_id":15408092,"reputation":287,"user_id":11115666,"display_name":"Albin"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":6979,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":0,"score":5,"last_activity_date":1685517669,"creation_date":1614284823,"question_id":66375980,"body_markdown":"I am following the description in the link [Securing HTTP Endpoints][1] to add the security in my application. I am getting the error that HttpSecurity bean could not be found. The code I added is as below:\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfiguration {\r\n    \t\r\n    \t@Bean\r\n    \tpublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n    \t    http.requestMatcher(EndpointRequest.toAnyEndpoint()).authorizeRequests(requests -&gt;\r\n    \t        requests.anyRequest().hasRole(&quot;ENDPOINT_ADMIN&quot;));\r\n    \t    http.httpBasic();\r\n    \t    return http.build();\r\n    \t}\r\n    }\r\n\r\nNothing else added. I also have the spring-boot-starter-security added in the pom.xml. But if I extend the class with WebSecurityConfigurerAdapter and by using the overridden configure method, it is working. \r\n\r\nException is:\r\n\r\n```\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;securityFilterChain&#39; defined in class path resource [SecurityConfiguration.class]: Unsatisfied dependency expressed through method &#39;securityFilterChain&#39; parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.security.config.annotation.web.builders.HttpSecurity&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:797)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:538)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1336)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1176)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:556)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:897)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:879)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:551)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:315)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)\r\n\t... 65 common frames omitted\r\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.security.config.annotation.web.builders.HttpSecurity&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1717)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1273)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1227)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:884)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:788)\r\n```\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#production-ready-endpoints-security","title":"HttpSecurity bean could not be found when actuator securing","body":"<p>I am following the description in the link <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#production-ready-endpoints-security\" rel=\"nofollow noreferrer\">Securing HTTP Endpoints</a> to add the security in my application. I am getting the error that HttpSecurity bean could not be found. The code I added is as below:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfiguration {\n    \n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http.requestMatcher(EndpointRequest.toAnyEndpoint()).authorizeRequests(requests -&gt;\n            requests.anyRequest().hasRole(&quot;ENDPOINT_ADMIN&quot;));\n        http.httpBasic();\n        return http.build();\n    }\n}\n</code></pre>\n<p>Nothing else added. I also have the spring-boot-starter-security added in the pom.xml. But if I extend the class with WebSecurityConfigurerAdapter and by using the overridden configure method, it is working.</p>\n<p>Exception is:</p>\n<pre><code>Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityFilterChain' defined in class path resource [SecurityConfiguration.class]: Unsatisfied dependency expressed through method 'securityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:797)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:538)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1336)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1176)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:556)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:897)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:879)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:551)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:315)\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)\n    ... 65 common frames omitted\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1717)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1273)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1227)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:884)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:788)\n</code></pre>\n"},{"tags":["java","elasticsearch"],"owner":{"account_id":4227103,"reputation":1688,"user_id":3460387,"accept_rate":75,"display_name":"KiKo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1685517200,"creation_date":1685517200,"question_id":76370979,"body_markdown":"I&#39;m trying to delete documents on Elasticsearch. For this I&#39;m using `RestHighLevelClient`, then I&#39;m creating `DeleteByQueryRequest` and sending a request like this:\r\n\r\n    BulkByScrollResponse bulkResponse = client.deleteByQuery(deleteRequest, RequestOptions.DEFAULT)\r\n\r\nCurrently, I&#39;m logging documents like this:\r\n\r\n    System.out.println(&quot;Total documents processed: &quot; + bulkResponse.getTotal());\r\n    System.out.println(&quot;Total documents deleted: &quot; + bulkResponse.getDeleted());\r\n\r\n\r\nHow can I log all the documents that are processed / deleted ?","title":"Log result from BulkByScrollResponse Elasticsearch java api","body":"<p>I'm trying to delete documents on Elasticsearch. For this I'm using <code>RestHighLevelClient</code>, then I'm creating <code>DeleteByQueryRequest</code> and sending a request like this:</p>\n<pre><code>BulkByScrollResponse bulkResponse = client.deleteByQuery(deleteRequest, RequestOptions.DEFAULT)\n</code></pre>\n<p>Currently, I'm logging documents like this:</p>\n<pre><code>System.out.println(&quot;Total documents processed: &quot; + bulkResponse.getTotal());\nSystem.out.println(&quot;Total documents deleted: &quot; + bulkResponse.getDeleted());\n</code></pre>\n<p>How can I log all the documents that are processed / deleted ?</p>\n"},{"tags":["java","rabbitmq","amqp","spring-amqp","spring-rabbit"],"answers":[{"comments":[{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":1,"creation_date":1622125942,"post_id":67723563,"comment_id":119706248,"body_markdown":"See docs for more info: https://docs.spring.io/spring-amqp/docs/current/reference/html/#json-message-converter","body":"See docs for more info: <a href=\"https://docs.spring.io/spring-amqp/docs/current/reference/html/#json-message-converter\" rel=\"nofollow noreferrer\">docs.spring.io/spring-amqp/docs/current/reference/html/&hellip;</a>"},{"owner":{"account_id":19950030,"reputation":63,"user_id":14638259,"display_name":"Leandro Costa"},"score":0,"creation_date":1622126674,"post_id":67723563,"comment_id":119706659,"body_markdown":"thanks for the response! yes, I&#39;m using Jackson2JsonMessageConverter. So the type id was supposed to become &quot;created&quot; after setting the IdClassMapping? I added the line you wrote but the type id still is &quot;com.thesis.gamamicroservices.productservice.dto.ProductCreatedDTO&quot; so the error persists.","body":"thanks for the response! yes, I&#39;m using Jackson2JsonMessageConverter. So the type id was supposed to become &quot;created&quot; after setting the IdClassMapping? I added the line you wrote but the type id still is &quot;com.thesis.gamamicroservices.productservice.dto.ProductCrea&zwnj;&#8203;tedDTO&quot; so the error persists."},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1622127740,"post_id":67723563,"comment_id":119707240,"body_markdown":"Please edit the question to show your code/configuration.","body":"Please edit the question to show your code/configuration."},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":1,"creation_date":1622129196,"post_id":67723563,"comment_id":119708091,"body_markdown":"I usually use the `DefaultJackson2JavaTypeMapper` instead of a class mapper, but I see the `DefaultClassMapper` has similar logic; I suggest putting a breakpoint in `fromClass()` to see what&#39;s going on.","body":"I usually use the <code>DefaultJackson2JavaTypeMapper</code> instead of a class mapper, but I see the <code>DefaultClassMapper</code> has similar logic; I suggest putting a breakpoint in <code>fromClass()</code> to see what&#39;s going on."},{"owner":{"account_id":19950030,"reputation":63,"user_id":14638259,"display_name":"Leandro Costa"},"score":0,"creation_date":1622131404,"post_id":67723563,"comment_id":119709161,"body_markdown":"@GaryRussell DefaultJackson2JavaTypeMapper changed the typeid!","body":"@GaryRussell DefaultJackson2JavaTypeMapper changed the typeid!"},{"owner":{"account_id":19950030,"reputation":63,"user_id":14638259,"display_name":"Leandro Costa"},"score":0,"creation_date":1622133744,"post_id":67723563,"comment_id":119710190,"body_markdown":"@GaryRussell sorry for being out of the question context, but is it possible to have multiple RabbitHandler&#39;s receiving the same object type? If so, how do I differentiate them? Otherwise, I will have to encapsulate different classes with the same properties...","body":"@GaryRussell sorry for being out of the question context, but is it possible to have multiple RabbitHandler&#39;s receiving the same object type? If so, how do I differentiate them? Otherwise, I will have to encapsulate different classes with the same properties..."},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1622134318,"post_id":67723563,"comment_id":119710418,"body_markdown":"It&#39;s better to ask a new question - a comment doesn&#39;t help people find questions/answers. No; the payload type is used to chose the method we call; you will get this error `throw new AmqpException(&quot;Ambiguous methods for payload type: &quot; + payloadClass + &quot;: &quot; + result.getMethod().getName() + &quot; and &quot; + handler.getMethod().getName());`","body":"It&#39;s better to ask a new question - a comment doesn&#39;t help people find questions/answers. No; the payload type is used to chose the method we call; you will get this error <code>throw new AmqpException(&quot;Ambiguous methods for payload type: &quot; + payloadClass + &quot;: &quot; + result.getMethod().getName() + &quot; and &quot; + handler.getMethod().getName());</code>"},{"owner":{"account_id":19950030,"reputation":63,"user_id":14638259,"display_name":"Leandro Costa"},"score":0,"creation_date":1622134392,"post_id":67723563,"comment_id":119710455,"body_markdown":"@GaryRussell sure thing, I understand. Thanks a lot for the help!","body":"@GaryRussell sure thing, I understand. Thanks a lot for the help!"}],"tags":[],"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1622123388,"creation_date":1622123388,"answer_id":67723563,"question_id":67720604,"body_markdown":"I presume you are using the `Jackson2JsonMessageConverter`.\r\n\r\nYou can add type mappings to the converter&#39;s typeMapper.\r\n\r\nOn the producer side\r\n\r\n    mapper.setIdClassMapping(Map.of(ProductCreatedDTO.class, &quot;created&quot;));\r\n\r\nOn the consumer side map the target class to the same token.\r\n\r\nThe type mapper will consult the map using the type id header (`created` in this case) to determine which type to use.\r\n\r\n","title":"Java RabbitMQ: can&#39;t map message to corresponding class","body":"<p>I presume you are using the <code>Jackson2JsonMessageConverter</code>.</p>\n<p>You can add type mappings to the converter's typeMapper.</p>\n<p>On the producer side</p>\n<pre><code>mapper.setIdClassMapping(Map.of(ProductCreatedDTO.class, &quot;created&quot;));\n</code></pre>\n<p>On the consumer side map the target class to the same token.</p>\n<p>The type mapper will consult the map using the type id header (<code>created</code> in this case) to determine which type to use.</p>\n"},{"tags":[],"owner":{"account_id":15237833,"reputation":37,"user_id":10994988,"display_name":"winston"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685515896,"creation_date":1685515896,"answer_id":76370839,"question_id":67720604,"body_markdown":"I have faced the same issue. After investigating, I found that we can add the annotation @Payload to your parameter. With this annotation, this parameter will be treated as **inferredType**. And the priority of inferredType is higher than `__TypeId__` \r\n\r\nI think this is a better solution.\r\n\r\nRelated source code:\r\n\r\n```java\r\n\r\n@Override\r\n\tpublic JavaType toJavaType(MessageProperties properties) {\r\n        //inferredType\r\n\t\tJavaType inferredType = getInferredType(properties);\r\n\t\tif (inferredType != null &amp;&amp; canConvert(inferredType)) {\r\n\t\t\treturn inferredType;\r\n\t\t}\r\n\r\n\t\tString typeIdHeader = retrieveHeaderAsString(properties, getClassIdFieldName());\r\n\r\n\t\tif (typeIdHeader != null) {\r\n\t\t\treturn fromTypeHeader(properties, typeIdHeader);\r\n\t\t}\r\n\r\n\t\tif (hasInferredTypeHeader(properties)) {\r\n\t\t\treturn fromInferredTypeHeader(properties);\r\n\t\t}\r\n\r\n\t\treturn TypeFactory.defaultInstance().constructType(Object.class);\r\n\t}\r\n\r\n```","title":"Java RabbitMQ: can&#39;t map message to corresponding class","body":"<p>I have faced the same issue. After investigating, I found that we can add the annotation @Payload to your parameter. With this annotation, this parameter will be treated as <strong>inferredType</strong>. And the priority of inferredType is higher than <code>__TypeId__</code></p>\n<p>I think this is a better solution.</p>\n<p>Related source code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Override\n    public JavaType toJavaType(MessageProperties properties) {\n        //inferredType\n        JavaType inferredType = getInferredType(properties);\n        if (inferredType != null &amp;&amp; canConvert(inferredType)) {\n            return inferredType;\n        }\n\n        String typeIdHeader = retrieveHeaderAsString(properties, getClassIdFieldName());\n\n        if (typeIdHeader != null) {\n            return fromTypeHeader(properties, typeIdHeader);\n        }\n\n        if (hasInferredTypeHeader(properties)) {\n            return fromInferredTypeHeader(properties);\n        }\n\n        return TypeFactory.defaultInstance().constructType(Object.class);\n    }\n\n</code></pre>\n"}],"owner":{"account_id":19950030,"reputation":63,"user_id":14638259,"display_name":"Leandro Costa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2285,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":67723563,"answer_count":2,"score":1,"last_activity_date":1685515896,"creation_date":1622112585,"question_id":67720604,"body_markdown":"I have two different java spring projects that communicate through rabbitmq. I&#39;m trying to send a java object but I get this error message:\r\n\r\n    org.springframework.amqp.rabbit.support.ListenerExecutionFailedException: Listener threw exception\r\n    Caused by: org.springframework.amqp.support.converter.MessageConversionException: failed to resolve class name. Class not found [com.thesis.gamamicroservices.productservice.dto.ProductCreatedDTO]\r\n\r\nI&#39;m aware that the problem is in the classpath that should be the same in both producer and consumer, but since each project has a different name I can&#39;t make the classpath the same even though both have the exact same class inside the same packages.\r\n\r\nThe class path is present in the header:\r\n\r\n    headers={__TypeId__=com.thesis.gamamicroservices.productservice.dto.ProductCreatedDTO}\r\n\r\nThe only difference is that the consumer app is called inventoryservice and not productservice, so it always results in conversion error.\r\n\r\nIs there any workaround? My current provisory &quot;solution&quot; is using primitives or java.util classes that I later convert to the target class, but it&#39;s far from ideal since I have cases in which I need to send over 8 different types of objects, I ran out of primitives for my @RabbitHandler&#39;s...\r\n\r\nI&#39;ve also made it work by defining the target classpath in the producer but since the message is sent to multiple queues/services it&#39;s not a viable solution here. \r\n\r\nEdit:\r\n\r\nHere&#39;s my configuration:\r\n\r\nEvent producer:\r\n\r\n    @Configuration\r\n    public class EventProducerConfiguration {\r\n\r\n        @Bean(name=&quot;productCreatedDeletedExchange&quot;)\r\n        public Exchange createdDeletedExchange() {\r\n           return new FanoutExchange(&quot;productCreatedDeletedExchange&quot;);\r\n        }\r\n\r\n        @Bean\r\n        public RabbitTemplate rabbitTemplate(final ConnectionFactory connectionFactory) {\r\n            final var rabbitTemplate = new RabbitTemplate(connectionFactory);\r\n            rabbitTemplate.setMessageConverter(messageConverter());\r\n            return rabbitTemplate;\r\n        }\r\n    \r\n        @Bean\r\n        public MessageConverter messageConverter() {\r\n            Jackson2JsonMessageConverter messageConverter = new Jackson2JsonMessageConverter();\r\n            DefaultClassMapper classMapper = new DefaultClassMapper();\r\n            classMapper.setTrustedPackages(&quot;*&quot;);\r\n            classMapper.setIdClassMapping(Map.of(&quot;created&quot;, ProductCreatedDTO.class));\r\n            messageConverter.setClassMapper(classMapper);\r\n            return messageConverter;\r\n        }\r\n    \r\n    }\r\n\r\nHow I send messages:\r\n\r\n    rabbitTemplate.convertAndSend(deletedCreatedExchange.getName(), RoutingKeys.CREATED.getNotation(), new ProductCreatedDTO(p, brand.getId(), category.getId()));\r\n\r\n\r\nEvent consumer:\r\n\r\n    @Configuration\r\n    public class EventConsumerConfiguration {\r\n    \r\n        @Bean(name=&quot;productsExchange&quot;)\r\n        public FanoutExchange productsPubSubExchange() {\r\n            return new FanoutExchange(&quot;productCreatedDeletedExchange&quot;);\r\n        }\r\n    \r\n        @Bean\r\n        public Queue productsQueue() {\r\n            return new Queue(&quot;productsInventoryServiceQueue&quot;);\r\n        }\r\n        @Bean\r\n        public Binding bindingProducts(@Qualifier(&quot;productsExchange&quot;) FanoutExchange productsExchange) {\r\n            return BindingBuilder\r\n                    .bind(productsQueue())\r\n                    .to(productsExchange);\r\n        }\r\n        @Bean\r\n        public ProductOpsReceiver productEventsReceiver() {\r\n            return new ProductOpsReceiver();\r\n        }\r\n    }\r\n\r\nP.s.: I&#39;m not sure if I need to define rabbitTemaplate with the message converter inside the consumer config the same way I did on the producer config, but the two apps are both a consumer and a producer so those bean are defined nonetheless.\r\n\r\nHow I receive messages:\r\n\r\n    @RabbitListener(queues=&quot;productsInventoryServiceQueue&quot;)\r\n    public class ProductOpsReceiver {\r\n    \r\n          @RabbitHandler\r\n          public void productCreated(ProductCreatedDTO product) {\r\n    \r\n               logger.info(PRODUCT_CREATED_LOG, product.getId());\r\n    \r\n          }\r\n    }\r\n\r\n","title":"Java RabbitMQ: can&#39;t map message to corresponding class","body":"<p>I have two different java spring projects that communicate through rabbitmq. I'm trying to send a java object but I get this error message:</p>\n<pre><code>org.springframework.amqp.rabbit.support.ListenerExecutionFailedException: Listener threw exception\nCaused by: org.springframework.amqp.support.converter.MessageConversionException: failed to resolve class name. Class not found [com.thesis.gamamicroservices.productservice.dto.ProductCreatedDTO]\n</code></pre>\n<p>I'm aware that the problem is in the classpath that should be the same in both producer and consumer, but since each project has a different name I can't make the classpath the same even though both have the exact same class inside the same packages.</p>\n<p>The class path is present in the header:</p>\n<pre><code>headers={__TypeId__=com.thesis.gamamicroservices.productservice.dto.ProductCreatedDTO}\n</code></pre>\n<p>The only difference is that the consumer app is called inventoryservice and not productservice, so it always results in conversion error.</p>\n<p>Is there any workaround? My current provisory &quot;solution&quot; is using primitives or java.util classes that I later convert to the target class, but it's far from ideal since I have cases in which I need to send over 8 different types of objects, I ran out of primitives for my @RabbitHandler's...</p>\n<p>I've also made it work by defining the target classpath in the producer but since the message is sent to multiple queues/services it's not a viable solution here.</p>\n<p>Edit:</p>\n<p>Here's my configuration:</p>\n<p>Event producer:</p>\n<pre><code>@Configuration\npublic class EventProducerConfiguration {\n\n    @Bean(name=&quot;productCreatedDeletedExchange&quot;)\n    public Exchange createdDeletedExchange() {\n       return new FanoutExchange(&quot;productCreatedDeletedExchange&quot;);\n    }\n\n    @Bean\n    public RabbitTemplate rabbitTemplate(final ConnectionFactory connectionFactory) {\n        final var rabbitTemplate = new RabbitTemplate(connectionFactory);\n        rabbitTemplate.setMessageConverter(messageConverter());\n        return rabbitTemplate;\n    }\n\n    @Bean\n    public MessageConverter messageConverter() {\n        Jackson2JsonMessageConverter messageConverter = new Jackson2JsonMessageConverter();\n        DefaultClassMapper classMapper = new DefaultClassMapper();\n        classMapper.setTrustedPackages(&quot;*&quot;);\n        classMapper.setIdClassMapping(Map.of(&quot;created&quot;, ProductCreatedDTO.class));\n        messageConverter.setClassMapper(classMapper);\n        return messageConverter;\n    }\n\n}\n</code></pre>\n<p>How I send messages:</p>\n<pre><code>rabbitTemplate.convertAndSend(deletedCreatedExchange.getName(), RoutingKeys.CREATED.getNotation(), new ProductCreatedDTO(p, brand.getId(), category.getId()));\n</code></pre>\n<p>Event consumer:</p>\n<pre><code>@Configuration\npublic class EventConsumerConfiguration {\n\n    @Bean(name=&quot;productsExchange&quot;)\n    public FanoutExchange productsPubSubExchange() {\n        return new FanoutExchange(&quot;productCreatedDeletedExchange&quot;);\n    }\n\n    @Bean\n    public Queue productsQueue() {\n        return new Queue(&quot;productsInventoryServiceQueue&quot;);\n    }\n    @Bean\n    public Binding bindingProducts(@Qualifier(&quot;productsExchange&quot;) FanoutExchange productsExchange) {\n        return BindingBuilder\n                .bind(productsQueue())\n                .to(productsExchange);\n    }\n    @Bean\n    public ProductOpsReceiver productEventsReceiver() {\n        return new ProductOpsReceiver();\n    }\n}\n</code></pre>\n<p>P.s.: I'm not sure if I need to define rabbitTemaplate with the message converter inside the consumer config the same way I did on the producer config, but the two apps are both a consumer and a producer so those bean are defined nonetheless.</p>\n<p>How I receive messages:</p>\n<pre><code>@RabbitListener(queues=&quot;productsInventoryServiceQueue&quot;)\npublic class ProductOpsReceiver {\n\n      @RabbitHandler\n      public void productCreated(ProductCreatedDTO product) {\n\n           logger.info(PRODUCT_CREATED_LOG, product.getId());\n\n      }\n}\n</code></pre>\n"},{"tags":["java","google-maps","google-maps-api-3"],"comments":[{"owner":{"account_id":147587,"reputation":5293,"user_id":358804,"accept_rate":50,"display_name":"Aidan Feldman"},"score":1,"creation_date":1555079841,"post_id":55653800,"comment_id":97996818,"body_markdown":"While annoying, [the documentation you linked to](https://developers.google.com/maps/documentation/javascript/reference/places-autocomplete-service#AutocompletionRequest) for the `bounds` does say &quot;Predictions will be biased towards, but not restricted to, the given bounds.&quot;","body":"While annoying, <a href=\"https://developers.google.com/maps/documentation/javascript/reference/places-autocomplete-service#AutocompletionRequest\" rel=\"nofollow noreferrer\">the documentation you linked to</a> for the <code>bounds</code> does say &quot;Predictions will be biased towards, but not restricted to, the given bounds.&quot;"}],"answers":[{"comments":[{"owner":{"account_id":7831282,"reputation":3147,"user_id":5921203,"accept_rate":42,"display_name":"Steven Aguilar"},"score":0,"creation_date":1555084896,"post_id":55654123,"comment_id":97999811,"body_markdown":"The problem is that `Autocomplete` doesn&#39;t provide the `offset` option which I need.","body":"The problem is that <code>Autocomplete</code> doesn&#39;t provide the <code>offset</code> option which I need."},{"owner":{"account_id":147587,"reputation":5293,"user_id":358804,"accept_rate":50,"display_name":"Aidan Feldman"},"score":0,"creation_date":1555098533,"post_id":55654123,"comment_id":98005653,"body_markdown":"Have you tried passing in the needed option to one or the other? Possible it&#39;s supported even though it&#39;s not documented, since I bet `Autocomplete` is just passing to `AutocompleteService` under the hood.","body":"Have you tried passing in the needed option to one or the other? Possible it&#39;s supported even though it&#39;s not documented, since I bet <code>Autocomplete</code> is just passing to <code>AutocompleteService</code> under the hood."}],"tags":[],"owner":{"account_id":147587,"reputation":5293,"user_id":358804,"accept_rate":50,"display_name":"Aidan Feldman"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555080045,"creation_date":1555080045,"answer_id":55654123,"question_id":55653800,"body_markdown":"Especially since the `AutocompleteService` is `@private`, it seems like you should be using the [`Autocomplete`](https://developers.google.com/maps/documentation/javascript/places-autocomplete#add_autocomplete) class instead, which does support `strictBounds`.","title":"How to restrict Google Maps API AutocompleteService from giving out of bounds suggestions","body":"<p>Especially since the <code>AutocompleteService</code> is <code>@private</code>, it seems like you should be using the <a href=\"https://developers.google.com/maps/documentation/javascript/places-autocomplete#add_autocomplete\" rel=\"nofollow noreferrer\"><code>Autocomplete</code></a> class instead, which does support <code>strictBounds</code>.</p>\n"},{"tags":[],"owner":{"account_id":11711234,"reputation":1514,"user_id":8573097,"display_name":"rafon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1556076733,"creation_date":1556076733,"answer_id":55822010,"question_id":55653800,"body_markdown":"We have an entry for this feature request to add **strictBounds for Autocomplete Service** in our Google Public Issue Tracker.\r\n\r\nIssues in the Issue Tracker are directly curated by Google Maps Platform API specialists, who will provide updates in the Issue Tracker whenever there&#39;s news from the engineering team.\r\n\r\nWe would like to warmly invite you to view the issue in the Issue Tracker, and to star it to register your interest. This will subscribe you to receive technical updates on the issue. Starring the issue also provides us with valuable feedback on the importance of the issue to our customers, and increases the issue&#39;s priority with the product engineering team.\r\n\r\nYou can view and star the issue here:\r\n- https://issuetracker.google.com/36219203\r\n\r\nThis Issue Tracker entry is the authoritative source for public information regarding this issue, and all publicly-relevant updates will be posted there.","title":"How to restrict Google Maps API AutocompleteService from giving out of bounds suggestions","body":"<p>We have an entry for this feature request to add <strong>strictBounds for Autocomplete Service</strong> in our Google Public Issue Tracker.</p>\n\n<p>Issues in the Issue Tracker are directly curated by Google Maps Platform API specialists, who will provide updates in the Issue Tracker whenever there's news from the engineering team.</p>\n\n<p>We would like to warmly invite you to view the issue in the Issue Tracker, and to star it to register your interest. This will subscribe you to receive technical updates on the issue. Starring the issue also provides us with valuable feedback on the importance of the issue to our customers, and increases the issue's priority with the product engineering team.</p>\n\n<p>You can view and star the issue here:\n- <a href=\"https://issuetracker.google.com/36219203\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/36219203</a></p>\n\n<p>This Issue Tracker entry is the authoritative source for public information regarding this issue, and all publicly-relevant updates will be posted there.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1685515749,"post_id":76370821,"comment_id":134669081,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76370821/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":23031139,"reputation":1,"user_id":17150608,"display_name":"Kishan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685515739,"creation_date":1685515739,"answer_id":76370821,"question_id":55653800,"body_markdown":"bit late but if you are someone still looking for a solution as I was &#175;\\_(ใ)_/&#175;\r\n\r\nbounds, location, and radius are deprecated on May 2023 instead we can use **locationBias** and **locationRestriction** refer this link https://developers.google.com/maps/documentation/javascript/reference/places-autocomplete-service#AutocompletionRequest.locationRestriction\r\n\r\nWorked for me.","title":"How to restrict Google Maps API AutocompleteService from giving out of bounds suggestions","body":"<p>bit late but if you are someone still looking for a solution as I was ยฏ_(ใ)_/ยฏ</p>\n<p>bounds, location, and radius are deprecated on May 2023 instead we can use <strong>locationBias</strong> and <strong>locationRestriction</strong> refer this link <a href=\"https://developers.google.com/maps/documentation/javascript/reference/places-autocomplete-service#AutocompletionRequest.locationRestriction\" rel=\"nofollow noreferrer\">https://developers.google.com/maps/documentation/javascript/reference/places-autocomplete-service#AutocompletionRequest.locationRestriction</a></p>\n<p>Worked for me.</p>\n"}],"owner":{"account_id":7831282,"reputation":3147,"user_id":5921203,"accept_rate":42,"display_name":"Steven Aguilar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":611,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1685515739,"creation_date":1555078966,"question_id":55653800,"body_markdown":"Currently I&#39;m working with `AutocompleteService` class from the Google Maps API. From the [documentation][1] I&#39;m using the `bounds` to apply the bounds for New York City. However, I&#39;m getting results from NJ and PA. \n\nThere is no `strictBounds` option for the AutocompleteService class and this makes it hard to restrict results to only be within bounds. Here are the following bounds I&#39;m providing for NYC:\n\n    /**\n     * NYC Bound Parameters for Google Maps API\n     * @enum {object}\n     */\n     OfficeMap.NYC_BOUNDS = {\n       &#39;south&#39;: 40.4773991,\n       &#39;west&#39;: -74.25908989999999,\n       &#39;north&#39;: 40.9175771,\n       &#39;east&#39;: -73.7002721\n     };\n\nHowever, this is not completely working as expected since suggestions from outside New York have been showing:\n[![enter image description here][2]][2]\n\n\nAs you see from the image above suggestions from PA are shown.\n\n      /** @private {this._google.maps.places.Autocomplete}Autocomplete instance */\n        this._service = new this._google.maps.places.AutocompleteService();\n    \n      // Attach handler for the autocomplete search box. This updates the map\n        // position and re-sorts locations around that position.\n        this._searchEl.addEventListener(&#39;keyup&#39;, event =&gt; {\n          if(event.target.value) {\n            this._service.getPlacePredictions({\n               input: event.target.value,\n               offset: 3,\n               types: [&#39;geocode&#39;],\n               componentRestrictions: {country: &#39;us&#39;},\n               bounds: OfficeMap.NYC_BOUNDS\n            }, predictions =&gt; {\n              if(predictions) {\n                let results = predictions.map(e =&gt; [e[&#39;description&#39;]]);\n                this._inputAutocomplete._autocomplete.options = results;\n                const autocompleteSelf = this._inputAutocomplete._autocomplete;\n    \n                this._inputAutocomplete._autocomplete.select = () =&gt; {\n                    if (autocompleteSelf.highlightedIndex !== -1) {\n                      autocompleteSelf.input.value = autocompleteSelf\n                        .scoredOptions[autocompleteSelf.highlightedIndex]\n                        .displayValue;\n                      autocompleteSelf.removeDropdown();\n    \n                      let nameOfLocation = autocompleteSelf.input.value;\n                      let googlePlaceObj = this.getGooglePlaceByName(nameOfLocation,\n                                                                     predictions);\n    \n                      this.displayPlacesOnMap(googlePlaceObj);\n                    }\n                  };\n                }\n            });\n          }\n        });\n\nThe method `getPlacePredictions` should only give out NYC suggestions since is NYC bounds parameter which are passed. From the [documentation][3]\nthere is no way to restrict it.\n\nHow can I restrict to AutocompleteService `getPlacePredictions` to only return objects within bounds?\n\n  [1]: \nhttps://developers.google.com/maps/documentation/javascript/reference/places-autocomplete-service\n\n  [2]: https://i.stack.imgur.com/AGcP3.png\n  [3]: https://developers.google.com/maps/documentation/javascript/reference/places-autocomplete-service#AutocompleteService.getPlacePredictions","title":"How to restrict Google Maps API AutocompleteService from giving out of bounds suggestions","body":"<p>Currently I'm working with <code>AutocompleteService</code> class from the Google Maps API. From the <a href=\"https://developers.google.com/maps/documentation/javascript/reference/places-autocomplete-service\" rel=\"nofollow noreferrer\">documentation</a> I'm using the <code>bounds</code> to apply the bounds for New York City. However, I'm getting results from NJ and PA.</p>\n<p>There is no <code>strictBounds</code> option for the AutocompleteService class and this makes it hard to restrict results to only be within bounds. Here are the following bounds I'm providing for NYC:</p>\n<pre><code>/**\n * NYC Bound Parameters for Google Maps API\n * @enum {object}\n */\n OfficeMap.NYC_BOUNDS = {\n   'south': 40.4773991,\n   'west': -74.25908989999999,\n   'north': 40.9175771,\n   'east': -73.7002721\n };\n</code></pre>\n<p>However, this is not completely working as expected since suggestions from outside New York have been showing:\n<a href=\"https://i.stack.imgur.com/AGcP3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AGcP3.png\" alt=\"enter image description here\" /></a></p>\n<p>As you see from the image above suggestions from PA are shown.</p>\n<pre><code>  /** @private {this._google.maps.places.Autocomplete}Autocomplete instance */\n    this._service = new this._google.maps.places.AutocompleteService();\n\n  // Attach handler for the autocomplete search box. This updates the map\n    // position and re-sorts locations around that position.\n    this._searchEl.addEventListener('keyup', event =&gt; {\n      if(event.target.value) {\n        this._service.getPlacePredictions({\n           input: event.target.value,\n           offset: 3,\n           types: ['geocode'],\n           componentRestrictions: {country: 'us'},\n           bounds: OfficeMap.NYC_BOUNDS\n        }, predictions =&gt; {\n          if(predictions) {\n            let results = predictions.map(e =&gt; [e['description']]);\n            this._inputAutocomplete._autocomplete.options = results;\n            const autocompleteSelf = this._inputAutocomplete._autocomplete;\n\n            this._inputAutocomplete._autocomplete.select = () =&gt; {\n                if (autocompleteSelf.highlightedIndex !== -1) {\n                  autocompleteSelf.input.value = autocompleteSelf\n                    .scoredOptions[autocompleteSelf.highlightedIndex]\n                    .displayValue;\n                  autocompleteSelf.removeDropdown();\n\n                  let nameOfLocation = autocompleteSelf.input.value;\n                  let googlePlaceObj = this.getGooglePlaceByName(nameOfLocation,\n                                                                 predictions);\n\n                  this.displayPlacesOnMap(googlePlaceObj);\n                }\n              };\n            }\n        });\n      }\n    });\n</code></pre>\n<p>The method <code>getPlacePredictions</code> should only give out NYC suggestions since is NYC bounds parameter which are passed. From the <a href=\"https://developers.google.com/maps/documentation/javascript/reference/places-autocomplete-service#AutocompleteService.getPlacePredictions\" rel=\"nofollow noreferrer\">documentation</a>\nthere is no way to restrict it.</p>\n<p>How can I restrict to AutocompleteService <code>getPlacePredictions</code> to only return objects within bounds?</p>\n"},{"tags":["java","spring","spring-boot","message-queue","quarkus"],"comments":[{"owner":{"account_id":6179310,"reputation":2644,"user_id":4815321,"display_name":"mr mcwolf"},"score":0,"creation_date":1685512311,"post_id":76370492,"comment_id":134668554,"body_markdown":"The approach is right and the implementation is entirely your choice. You have the option of doing everything yourself, but using a message broker + MDB will give you a good asynchronous implementation.","body":"The approach is right and the implementation is entirely your choice. You have the option of doing everything yourself, but using a message broker + MDB will give you a good asynchronous implementation."},{"owner":{"account_id":4483663,"reputation":12326,"user_id":3647002,"accept_rate":47,"display_name":"Gayan Weerakutti"},"score":0,"creation_date":1685516362,"post_id":76370492,"comment_id":134669208,"body_markdown":"If these are processed in the background, I don&#39;t understand why you&#39;d need to block the user.","body":"If these are processed in the background, I don&#39;t understand why you&#39;d need to block the user."},{"owner":{"account_id":5290004,"reputation":577,"user_id":4222875,"display_name":"Yusuf Kapasi"},"score":0,"creation_date":1685544099,"post_id":76370492,"comment_id":134675535,"body_markdown":"Once you receive a request add it in a cache (NoSQL DBs are good choice) and return the accepted status to user, run a scheduler to pick pending requests from cache and run your job, don&#39;t run a new job if there are any job running at any point of time.","body":"Once you receive a request add it in a cache (NoSQL DBs are good choice) and return the accepted status to user, run a scheduler to pick pending requests from cache and run your job, don&#39;t run a new job if there are any job running at any point of time."}],"answers":[{"tags":[],"owner":{"account_id":5543478,"reputation":1188,"user_id":4399071,"accept_rate":50,"display_name":"Badr B"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1685513341,"creation_date":1685513341,"answer_id":76370608,"question_id":76370492,"body_markdown":"You definitely need a distributed queue if you wish to horizontally scale this service and if you want tasks to persist across reboots. What I would do is create 3 components: the backend application, the queue, and a database. Then the workflow will look something like this:\r\n\r\n1. User submits task through REST API. Backend application queries database to check if a task for the current user is already running. If not, submit the task to the queue and record the new task status in the database.\r\n\r\n2. Queue consumer picks up the task (the consumer can be the same application or a separate one). Consumer works on the task and updates database with task status (i.e. failed, running, at checkpoint 3, etc.).\r\n\r\n3. Optionally, the client can query the task status through the REST API.\r\n\r\n4. Task either completes successfully or fails. Exit status is persisted in database. Now there&#39;s no running task for the user, so the REST API will allow another submission per the logic in step 1. You can also do some things here like send an email, Slack notification, etc.\r\n\r\nThere may be some queue implementations that give you more freedom in querying task status, but I prefer this design since it offers a lot of flexibility and it&#39;s agnostic to the queue service used.","title":"Design Pattern to follow for long running rest API?","body":"<p>You definitely need a distributed queue if you wish to horizontally scale this service and if you want tasks to persist across reboots. What I would do is create 3 components: the backend application, the queue, and a database. Then the workflow will look something like this:</p>\n<ol>\n<li><p>User submits task through REST API. Backend application queries database to check if a task for the current user is already running. If not, submit the task to the queue and record the new task status in the database.</p>\n</li>\n<li><p>Queue consumer picks up the task (the consumer can be the same application or a separate one). Consumer works on the task and updates database with task status (i.e. failed, running, at checkpoint 3, etc.).</p>\n</li>\n<li><p>Optionally, the client can query the task status through the REST API.</p>\n</li>\n<li><p>Task either completes successfully or fails. Exit status is persisted in database. Now there's no running task for the user, so the REST API will allow another submission per the logic in step 1. You can also do some things here like send an email, Slack notification, etc.</p>\n</li>\n</ol>\n<p>There may be some queue implementations that give you more freedom in querying task status, but I prefer this design since it offers a lot of flexibility and it's agnostic to the queue service used.</p>\n"},{"tags":[],"owner":{"account_id":6592146,"reputation":136,"user_id":5093000,"display_name":"Aaron Chen"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1685514344,"creation_date":1685514344,"answer_id":76370690,"question_id":76370492,"body_markdown":"Using an external queue would be a better choice:\r\n\r\n1. Scalability and Performance: External message queues like RabbitMQ and Kafka are designed to handle large volumes of messages. They already deployed advanced techniques to optimize message delivery, such as batching, compression, and parallel processing.\r\n\r\n2. Durability: External queues provide durable message storage, meaning messages are stored on disk and can survive server crashes or restarts. This ensures that messages are not lost in case of system failures or unexpected errors.\r\n\r\n3. Decoupling: External queues provide a decoupling mechanism between the producer and consumer. This means that the REST API can produce messages to the queue without blocking, and the background task workers can consume messages from the queue at their own pace. This allows for better separation of concerns and reduces the risk of system failures due to bottlenecks or overloading.\r\n\r\n4. Integration with other systems: External message queues like RabbitMQ and Kafka provide APIs and integration points with other systems and frameworks, such as Spring Boot, Django, Express.js, Golang, etc. which can simplify the development and deployment process.","title":"Design Pattern to follow for long running rest API?","body":"<p>Using an external queue would be a better choice:</p>\n<ol>\n<li><p>Scalability and Performance: External message queues like RabbitMQ and Kafka are designed to handle large volumes of messages. They already deployed advanced techniques to optimize message delivery, such as batching, compression, and parallel processing.</p>\n</li>\n<li><p>Durability: External queues provide durable message storage, meaning messages are stored on disk and can survive server crashes or restarts. This ensures that messages are not lost in case of system failures or unexpected errors.</p>\n</li>\n<li><p>Decoupling: External queues provide a decoupling mechanism between the producer and consumer. This means that the REST API can produce messages to the queue without blocking, and the background task workers can consume messages from the queue at their own pace. This allows for better separation of concerns and reduces the risk of system failures due to bottlenecks or overloading.</p>\n</li>\n<li><p>Integration with other systems: External message queues like RabbitMQ and Kafka provide APIs and integration points with other systems and frameworks, such as Spring Boot, Django, Express.js, Golang, etc. which can simplify the development and deployment process.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":13474237,"reputation":137,"user_id":9721761,"display_name":"Roshni"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":434,"favorite_count":0,"down_vote_count":3,"up_vote_count":4,"closed_date":1685629876,"answer_count":2,"score":1,"last_activity_date":1685515164,"creation_date":1685511935,"question_id":76370492,"body_markdown":"I have a rest api which takes an input from user and executes a background task which runs for about 2-3 hours. User cannot make another call to this api till the first task completes.\r\n\r\nSo I am planning to use a queue to store the request as and when they come and not block the user.\r\n\r\nShould I use java inbuilt collection for it or external queues like RabbitMQ?\r\n\r\nNote : We are only going to store 3 messages in the queue and its not a distributed application.\r\nAny other suggestions are also welcome ","title":"Design Pattern to follow for long running rest API?","body":"<p>I have a rest api which takes an input from user and executes a background task which runs for about 2-3 hours. User cannot make another call to this api till the first task completes.</p>\n<p>So I am planning to use a queue to store the request as and when they come and not block the user.</p>\n<p>Should I use java inbuilt collection for it or external queues like RabbitMQ?</p>\n<p>Note : We are only going to store 3 messages in the queue and its not a distributed application.\nAny other suggestions are also welcome</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9824,"page":401,"page_size":100}
