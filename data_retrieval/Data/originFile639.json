{"items":[{"tags":["java"],"comments":[{"owner":{"account_id":13719289,"reputation":326,"user_id":9899672,"display_name":"Ayush ShaZz"},"score":0,"creation_date":1676708480,"post_id":75492044,"comment_id":133195279,"body_markdown":"Sorry Cannot provide the exact question link as this question was asked to me in an Online test.","body":"Sorry Cannot provide the exact question link as this question was asked to me in an Online test."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1676711464,"post_id":75492044,"comment_id":133195632,"body_markdown":"you most probably are not expected to use external libraries on such sites... (I would never allow including such libraries in any similar site, to start just because of security)","body":"you most probably are not expected to use external libraries on such sites... (I would never allow including such libraries in any similar site, to start just because of security)"}],"answers":[{"tags":[],"owner":{"account_id":2825991,"reputation":2000,"user_id":2428631,"display_name":"McPringle"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676721242,"creation_date":1676721242,"answer_id":75493152,"question_id":75492044,"body_markdown":"Well, you are not allowed to use libraries or frameworks in these challenges. The idea is to check how **you** would solve the problem, not the developer of a library. That&#39;s why these lessons are so challenging. Back to the roots: Use just the *Java API* itself to pass!","title":"Adding dependencies in Hackerrank","body":"<p>Well, you are not allowed to use libraries or frameworks in these challenges. The idea is to check how <strong>you</strong> would solve the problem, not the developer of a library. That's why these lessons are so challenging. Back to the roots: Use just the <em>Java API</em> itself to pass!</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676725949,"creation_date":1676725949,"answer_id":75493567,"question_id":75492044,"body_markdown":"According to the HackerRank Environment documentation, the following libraries are available:\r\n\r\nTestNG, **JSON Simple**, Tagsoup, **Google/Gson**, HTTPCore, HTTPClient, XMLResolver, Jing, JUnit, Hamcrest, Commons Lang3, Commons Logging.\r\n\r\nSource: https://support.hackerrank.com/hc/en-us/articles/1500002392722-Execution-Environment.  (Click on &quot;Coding and Database&quot; and scroll to the Java information ...)","title":"Adding dependencies in Hackerrank","body":"<p>According to the HackerRank Environment documentation, the following libraries are available:</p>\n<p>TestNG, <strong>JSON Simple</strong>, Tagsoup, <strong>Google/Gson</strong>, HTTPCore, HTTPClient, XMLResolver, Jing, JUnit, Hamcrest, Commons Lang3, Commons Logging.</p>\n<p>Source: <a href=\"https://support.hackerrank.com/hc/en-us/articles/1500002392722-Execution-Environment\" rel=\"nofollow noreferrer\">https://support.hackerrank.com/hc/en-us/articles/1500002392722-Execution-Environment</a>.  (Click on &quot;Coding and Database&quot; and scroll to the Java information ...)</p>\n"}],"owner":{"account_id":13719289,"reputation":326,"user_id":9899672,"display_name":"Ayush ShaZz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":897,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1676725949,"creation_date":1676708121,"question_id":75492044,"body_markdown":"I was solving a question on **Hackerrank** where I had to hit an API which was returning **Json**, then I had to map into Object. I had used Libraries like Gson and ObjectMapper to solve the question but the Hackerank IDE was not able to resolve Gson and ObjectMapper libraries even after adding gson and Object mapper libraries in import section. Is there any way to add dependencies in Hackerrank IDE and successfully submit it?  ","title":"Adding dependencies in Hackerrank","body":"<p>I was solving a question on <strong>Hackerrank</strong> where I had to hit an API which was returning <strong>Json</strong>, then I had to map into Object. I had used Libraries like Gson and ObjectMapper to solve the question but the Hackerank IDE was not able to resolve Gson and ObjectMapper libraries even after adding gson and Object mapper libraries in import section. Is there any way to add dependencies in Hackerrank IDE and successfully submit it?</p>\n"},{"tags":["java","csrf","owasp"],"owner":{"account_id":5583486,"reputation":2030,"user_id":4424680,"accept_rate":88,"display_name":"gringogordo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676725722,"creation_date":1676725722,"question_id":75493542,"body_markdown":"We are using the owasp csrf tool in our application.  It is quite an old java8 / Tomcat application but this aspect has worked without a problem for a long time.  We have 3 environments -\r\n\r\n - dev - local machine test \r\n - runs on remote servers as production\r\n   production \r\n - runs on remote servers\r\n\r\nWe recently changed the ip address of the test server and the OWASP protection no longer seems to trigger on this environment.  I don&#39;t believe there is anything in the code base to cause this change as it still works on dev.  I have checked and there is no hard coded reference to the old ip address in the code.\r\n\r\nThe token is still being injected into the form on test, and changes between initial set up and 2nd logon &amp; submit.  \r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe owasp_csrf.js file is still active as I put some alerts in there to check and they fire (I noticed on dev our warning  message appears before the alerts so I don&#39;t think this is where the main part of the token checking is happening).\r\n\r\nEverything seems to work as expected except the csrf check doesn&#39;t seem to fire.\r\n\r\nSo, my test is \r\n\r\n1) log in and enter data into a data entry form\r\n2) log out before submitting\r\n3) log back in (different user, although this isn&#39;t necessary on production)\r\n4) use back button to get to previous filled in form and submit\r\n5) on test this allows submission (on dev and production it triggers csrf alert).\r\n\r\nI don&#39;t think this has been tested on test for a while but but I know it as been in the past.  I believe the only significant difference is the IP address change but I can&#39;t find anywhere in the code base or Tomcat configs where this looks relevant.  (I&#39;ve double checked the hosts files and rebooted in case any aspect of (linux) server setup had missed the ip change). \r\n\r\nApologies if this is a little vague but I wondered if anyone had any ideas about where the ip address may be relevant to the OWASP csrf set up ?\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UtIVA.png","title":"Change of IP address has stopped OWASP CSRF from triggering","body":"<p>We are using the owasp csrf tool in our application.  It is quite an old java8 / Tomcat application but this aspect has worked without a problem for a long time.  We have 3 environments -</p>\n<ul>\n<li>dev - local machine test</li>\n<li>runs on remote servers as production\nproduction</li>\n<li>runs on remote servers</li>\n</ul>\n<p>We recently changed the ip address of the test server and the OWASP protection no longer seems to trigger on this environment.  I don't believe there is anything in the code base to cause this change as it still works on dev.  I have checked and there is no hard coded reference to the old ip address in the code.</p>\n<p>The token is still being injected into the form on test, and changes between initial set up and 2nd logon &amp; submit.</p>\n<p><a href=\"https://i.stack.imgur.com/UtIVA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UtIVA.png\" alt=\"enter image description here\" /></a></p>\n<p>The owasp_csrf.js file is still active as I put some alerts in there to check and they fire (I noticed on dev our warning  message appears before the alerts so I don't think this is where the main part of the token checking is happening).</p>\n<p>Everything seems to work as expected except the csrf check doesn't seem to fire.</p>\n<p>So, my test is</p>\n<ol>\n<li>log in and enter data into a data entry form</li>\n<li>log out before submitting</li>\n<li>log back in (different user, although this isn't necessary on production)</li>\n<li>use back button to get to previous filled in form and submit</li>\n<li>on test this allows submission (on dev and production it triggers csrf alert).</li>\n</ol>\n<p>I don't think this has been tested on test for a while but but I know it as been in the past.  I believe the only significant difference is the IP address change but I can't find anywhere in the code base or Tomcat configs where this looks relevant.  (I've double checked the hosts files and rebooted in case any aspect of (linux) server setup had missed the ip change).</p>\n<p>Apologies if this is a little vague but I wondered if anyone had any ideas about where the ip address may be relevant to the OWASP csrf set up ?</p>\n"},{"tags":["java","spring","spring-boot","exception","exceptionhandler"],"answers":[{"comments":[{"owner":{"display_name":"user21099360"},"score":0,"creation_date":1676734523,"post_id":75493408,"comment_id":133198772,"body_markdown":"Yes, veeerry veerry interesting., voted up ;)  But why? Did it changed in the last version(s)? And is it good to change HttpStatus --&gt; HttpStatusCode ? I mean the former and latter are the same type? Any idea?","body":"Yes, veeerry veerry interesting., voted up ;)  But why? Did it changed in the last version(s)? And is it good to change HttpStatus --&gt; HttpStatusCode ? I mean the former and latter are the same type? Any idea?"}],"tags":[],"owner":{"account_id":27252303,"reputation":76,"user_id":20776538,"display_name":"nadjagv"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676724066,"creation_date":1676724066,"answer_id":75493408,"question_id":75493219,"body_markdown":"The signature of the method is different so now you get that error. Check signature [here][1].\r\n\r\nBasically what you need to change is: `HttpStatus` --&gt; `HttpStatusCode`\r\n\r\nHere is an example of overriding this method:\r\n\r\n     @Override\r\n    protected ResponseEntity&lt;Object&gt; handleExceptionInternal(Exception ex,\r\n        Object body,\r\n        HttpHeaders headers,\r\n        HttpStatusCode statusCode,\r\n        WebRequest request){\r\n        \r\n        //your code here....\r\n\r\n    }\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/ResponseEntityExceptionHandler.html#handleExceptionInternal(java.lang.Exception,java.lang.Object,org.springframework.http.HttpHeaders,org.springframework.http.HttpStatusCode,org.springframework.web.context.request.WebRequest)","title":"ResponseEntityExceptionHandler error with new Spring Boot version","body":"<p>The signature of the method is different so now you get that error. Check signature <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/ResponseEntityExceptionHandler.html#handleExceptionInternal(java.lang.Exception,java.lang.Object,org.springframework.http.HttpHeaders,org.springframework.http.HttpStatusCode,org.springframework.web.context.request.WebRequest)\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Basically what you need to change is: <code>HttpStatus</code> --&gt; <code>HttpStatusCode</code></p>\n<p>Here is an example of overriding this method:</p>\n<pre><code> @Override\nprotected ResponseEntity&lt;Object&gt; handleExceptionInternal(Exception ex,\n    Object body,\n    HttpHeaders headers,\n    HttpStatusCode statusCode,\n    WebRequest request){\n    \n    //your code here....\n\n}\n</code></pre>\n"}],"owner":{"display_name":"user21099360"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1027,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":1,"score":0,"last_activity_date":1676724066,"creation_date":1676721863,"question_id":75493219,"body_markdown":"Although I could use `ResponseEntityExceptionHandler` with the previous Spring Boot versions as shown on [this](https://github.com/thombergs/code-examples/blob/master/spring-boot/exception-handling/src/main/java/io/reflectoring/exception/exception/GlobalExceptionHandler.java) example, I get the following error for the `handleExceptionInternal` method when I implement the same exception handler in my new app (Spring Boot version 3.0.2):\r\n\r\n&gt; Method does not override method from its superclass\r\n\r\nSo, I can fix the problem by not extending `ResponseEntityExceptionHandler`, but I am not sure if there is a better way to fix this problem. \r\n\r\nAny idea for this problem? ","title":"ResponseEntityExceptionHandler error with new Spring Boot version","body":"<p>Although I could use <code>ResponseEntityExceptionHandler</code> with the previous Spring Boot versions as shown on <a href=\"https://github.com/thombergs/code-examples/blob/master/spring-boot/exception-handling/src/main/java/io/reflectoring/exception/exception/GlobalExceptionHandler.java\" rel=\"nofollow noreferrer\">this</a> example, I get the following error for the <code>handleExceptionInternal</code> method when I implement the same exception handler in my new app (Spring Boot version 3.0.2):</p>\n<blockquote>\n<p>Method does not override method from its superclass</p>\n</blockquote>\n<p>So, I can fix the problem by not extending <code>ResponseEntityExceptionHandler</code>, but I am not sure if there is a better way to fix this problem.</p>\n<p>Any idea for this problem?</p>\n"},{"tags":["java","spring","thymeleaf"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1676723750,"post_id":75493318,"comment_id":133197054,"body_markdown":"What is `Inflater`? Is it actually a JPEG image you are sending?","body":"What is <code>Inflater</code>? Is it actually a JPEG image you are sending?"}],"answers":[{"tags":[],"owner":{"account_id":7718592,"reputation":119,"user_id":5845487,"display_name":"Hassan Golshani"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676724026,"creation_date":1676724026,"answer_id":75493405,"question_id":75493318,"body_markdown":"Using this sample\r\n\r\n    @ResponseBody\r\n    @GetMapping(value = &quot;/{id}&quot;)\r\n    public byte[] getImageAsByteArray(@PathVariable int id) {\r\n         return imageService.getOne(id).getImage();\r\n    }","title":"how insert image from db to page in thymeleaf","body":"<p>Using this sample</p>\n<pre><code>@ResponseBody\n@GetMapping(value = &quot;/{id}&quot;)\npublic byte[] getImageAsByteArray(@PathVariable int id) {\n     return imageService.getOne(id).getImage();\n}\n</code></pre>\n"}],"owner":{"account_id":19476628,"reputation":125,"user_id":14247913,"display_name":"TryHard"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75493405,"answer_count":1,"score":0,"last_activity_date":1676724026,"creation_date":1676723092,"question_id":75493318,"body_markdown":"I can&#39;t understand how send to browser my image from server. My code down below. Why it doesn&#39;t working? When I&#39;m getting bytes from DB and save them to disk image opens fine.\r\nIn html there is next code:\r\n\r\n    &lt;div th:fragment=&quot;image_list&quot;&gt;\r\n        image will be here\r\n        &lt;p&gt;\r\n            &lt;img class=&quot;picture&quot; th:src=&quot;@{/image/1}&quot;/&gt;\r\n    &lt;/div&gt;\r\n\r\nJava controller class:\r\n\r\n        @GetMapping(value = &quot;/{id}&quot;)\r\n        @ResponseBody\r\n        public ResponseEntity&lt;InputStreamResource&gt; getCarImage(@PathVariable Long id) {\r\n            var image = imageService.getOne(id);\r\n                \r\n            var imageDecompressed = decompressBytes(image.getImage());\r\n            InputStream inputStream = new ByteArrayInputStream(imageDecompressed);\r\n            return ResponseEntity.ok()\r\n                    .contentLength(image.getImage().length)\r\n                    .contentType(MediaType.IMAGE_JPEG)\r\n                    .body(new InputStreamResource(inputStream));\r\n        }\r\n    \r\n\r\n    \r\n        public static byte[] decompressBytes(byte[] data) {\r\n            Inflater inflater = new Inflater();\r\n            inflater.setInput(data);\r\n            ByteArrayOutputStream outputStream = new ByteArrayOutputStream(data.length);\r\n            byte[] buffer = new byte[1024];\r\n            try {\r\n                while (!inflater.finished()) {\r\n                    int count = inflater.inflate(buffer);\r\n                    outputStream.write(buffer, 0, count);\r\n                }\r\n                outputStream.close();\r\n            } catch (IOException ioe) {\r\n            } catch (DataFormatException e) {\r\n            }\r\n            return outputStream.toByteArray();\r\n        }\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/e0XFG.png","title":"how insert image from db to page in thymeleaf","body":"<p>I can't understand how send to browser my image from server. My code down below. Why it doesn't working? When I'm getting bytes from DB and save them to disk image opens fine.\nIn html there is next code:</p>\n<pre><code>&lt;div th:fragment=&quot;image_list&quot;&gt;\n    image will be here\n    &lt;p&gt;\n        &lt;img class=&quot;picture&quot; th:src=&quot;@{/image/1}&quot;/&gt;\n&lt;/div&gt;\n</code></pre>\n<p>Java controller class:</p>\n<pre><code>    @GetMapping(value = &quot;/{id}&quot;)\n    @ResponseBody\n    public ResponseEntity&lt;InputStreamResource&gt; getCarImage(@PathVariable Long id) {\n        var image = imageService.getOne(id);\n            \n        var imageDecompressed = decompressBytes(image.getImage());\n        InputStream inputStream = new ByteArrayInputStream(imageDecompressed);\n        return ResponseEntity.ok()\n                .contentLength(image.getImage().length)\n                .contentType(MediaType.IMAGE_JPEG)\n                .body(new InputStreamResource(inputStream));\n    }\n\n\n\n    public static byte[] decompressBytes(byte[] data) {\n        Inflater inflater = new Inflater();\n        inflater.setInput(data);\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream(data.length);\n        byte[] buffer = new byte[1024];\n        try {\n            while (!inflater.finished()) {\n                int count = inflater.inflate(buffer);\n                outputStream.write(buffer, 0, count);\n            }\n            outputStream.close();\n        } catch (IOException ioe) {\n        } catch (DataFormatException e) {\n        }\n        return outputStream.toByteArray();\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/e0XFG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e0XFG.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","spring-boot"],"owner":{"account_id":1093264,"reputation":6037,"user_id":1087407,"accept_rate":67,"display_name":"Piotr Olaszewski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676723974,"creation_date":1676723974,"question_id":75493401,"body_markdown":"I have a following bean&#39;s definition:\r\n\r\n    @Configuration\r\n    class PanelApiConfiguration {\r\n        @Bean\r\n        PanelApi panelApi(ServiceFactory.Builder&lt;EmptyContext&gt; serviceFactoryBuilder) {\r\n            ServiceFactory&lt;EmptyContext&gt; serviceFactory = serviceFactoryBuilder.build()\r\n    \r\n            return serviceFactory.create(PanelApi.class);\r\n        }\r\n    \r\n        @Bean\r\n        ServiceFactoryCustomizer&lt;EmptyContext&gt; emptyContextServiceFactoryCustomizer() {\r\n            return () -&gt; Duration.ZERO;\r\n        }\r\n    \r\n        @Bean\r\n        AnotherApi anotherApi(ServiceFactory.Builder&lt;AnotherContext&gt; serviceFactoryBuilder) {\r\n            ServiceFactory&lt;AnotherContext&gt; serviceFactory = serviceFactoryBuilder.build()\r\n    \r\n            return serviceFactory.create(AnotherApi.class);\r\n        }\r\n    \r\n        @Bean\r\n        ServiceFactoryCustomizer&lt;AnotherContext&gt; anotherContextServiceFactoryCustomizer() {\r\n            return () -&gt; Duration.ofSeconds(10);\r\n        }\r\n    }\r\n\r\nI would like to wire:\r\n\r\n*  `ServiceFactory.Builder&lt;EmptyContext&gt; serviceFactoryBuilder` with `ServiceFactoryCustomizer&lt;EmptyContext&gt; emptyContextServiceFactoryCustomizer`\r\n* `ServiceFactory.Builder&lt;AnotherContext&gt; serviceFactoryBuilder` with `ServiceFactoryCustomizer&lt;AnotherContext&gt; anotherContextServiceFactoryCustomizer` \r\n\r\nand so on. Each builder have his own customizer - based on the generic type.\r\n\r\n`ServiceFactory.Builder` is created as a auto-configuration bean:\r\n\r\n    @Bean\r\n    @Scope(scopeName = SCOPE_PROTOTYPE)\r\n    public ServiceFactory.Builder&lt;?&gt; serviceFactoryBuilder(\r\n            ObjectMapper objectMapper,\r\n            ClientHttpConnector clientHttpConnector\r\n    ) {\r\n        return builder()\r\n                .objectMapper(objectMapper)\r\n                .clientHttpConnector(clientHttpConnector);\r\n    }\r\n\r\nIs there any possibility to do that? Honestly, I don&#39;t have any idea how to wire this classes.","title":"Wire generic types in spring-boot configuration","body":"<p>I have a following bean's definition:</p>\n<pre><code>@Configuration\nclass PanelApiConfiguration {\n    @Bean\n    PanelApi panelApi(ServiceFactory.Builder&lt;EmptyContext&gt; serviceFactoryBuilder) {\n        ServiceFactory&lt;EmptyContext&gt; serviceFactory = serviceFactoryBuilder.build()\n\n        return serviceFactory.create(PanelApi.class);\n    }\n\n    @Bean\n    ServiceFactoryCustomizer&lt;EmptyContext&gt; emptyContextServiceFactoryCustomizer() {\n        return () -&gt; Duration.ZERO;\n    }\n\n    @Bean\n    AnotherApi anotherApi(ServiceFactory.Builder&lt;AnotherContext&gt; serviceFactoryBuilder) {\n        ServiceFactory&lt;AnotherContext&gt; serviceFactory = serviceFactoryBuilder.build()\n\n        return serviceFactory.create(AnotherApi.class);\n    }\n\n    @Bean\n    ServiceFactoryCustomizer&lt;AnotherContext&gt; anotherContextServiceFactoryCustomizer() {\n        return () -&gt; Duration.ofSeconds(10);\n    }\n}\n</code></pre>\n<p>I would like to wire:</p>\n<ul>\n<li><code>ServiceFactory.Builder&lt;EmptyContext&gt; serviceFactoryBuilder</code> with <code>ServiceFactoryCustomizer&lt;EmptyContext&gt; emptyContextServiceFactoryCustomizer</code></li>\n<li><code>ServiceFactory.Builder&lt;AnotherContext&gt; serviceFactoryBuilder</code> with <code>ServiceFactoryCustomizer&lt;AnotherContext&gt; anotherContextServiceFactoryCustomizer</code></li>\n</ul>\n<p>and so on. Each builder have his own customizer - based on the generic type.</p>\n<p><code>ServiceFactory.Builder</code> is created as a auto-configuration bean:</p>\n<pre><code>@Bean\n@Scope(scopeName = SCOPE_PROTOTYPE)\npublic ServiceFactory.Builder&lt;?&gt; serviceFactoryBuilder(\n        ObjectMapper objectMapper,\n        ClientHttpConnector clientHttpConnector\n) {\n    return builder()\n            .objectMapper(objectMapper)\n            .clientHttpConnector(clientHttpConnector);\n}\n</code></pre>\n<p>Is there any possibility to do that? Honestly, I don't have any idea how to wire this classes.</p>\n"},{"tags":["java","spring","jdbc","spring-batch","hsqldb"],"answers":[{"comments":[{"owner":{"account_id":27818433,"reputation":11,"user_id":21239360,"display_name":"arihant raj singh"},"score":0,"creation_date":1676726048,"post_id":75493140,"comment_id":133197384,"body_markdown":"Thankyou! I re-read the guide and saw that there is a SQL file that I forgot to add, now it works.","body":"Thankyou! I re-read the guide and saw that there is a SQL file that I forgot to add, now it works."}],"tags":[],"owner":{"account_id":1754145,"reputation":43960,"user_id":1602555,"display_name":"Karol Dowbecki"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676721095,"creation_date":1676721095,"answer_id":75493140,"question_id":75493091,"body_markdown":"There is nothing wrong with your code. If you look at the bottom of the stack trace it points that either the table `PEOPLE` doesn&#39;t exist or your user doesn&#39;t have permissions to access it.\r\n\r\n```\r\norg.hsqldb.HsqlException: user lacks privilege or object not found: PEOPLE\r\n```\r\n","title":"Bad SQL Grammar Exception","body":"<p>There is nothing wrong with your code. If you look at the bottom of the stack trace it points that either the table <code>PEOPLE</code> doesn't exist or your user doesn't have permissions to access it.</p>\n<pre><code>org.hsqldb.HsqlException: user lacks privilege or object not found: PEOPLE\n</code></pre>\n"}],"owner":{"account_id":27818433,"reputation":11,"user_id":21239360,"display_name":"arihant raj singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":527,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75493140,"answer_count":1,"score":0,"last_activity_date":1676723421,"creation_date":1676720621,"question_id":75493091,"body_markdown":"I&#39;m following [Getting Started Guide|Creating a Batch Service](https://spring.io/guides/gs/batch-processing/).\r\n\r\nIt uses HyperSQL database as given in the guide.\r\n\r\nI have followed the guide as is, but getting the following error:\r\n\r\n```none\r\norg.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad SQL grammar [INSERT INTO people(first_name,last_name) VALUES (?, ?)]\r\n\tat org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:101) ~[spring-jdbc-6.0.4.jar:6.0.4]\r\n\tat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70) ~[spring-jdbc-6.0.4.jar:6.0.4]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.translateException(JdbcTemplate.java:1538) ~[spring-jdbc-6.0.4.jar:6.0.4]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:667) ~[spring-jdbc-6.0.4.jar:6.0.4]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:691) ~[spring-jdbc-6.0.4.jar:6.0.4]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.batchUpdate(JdbcTemplate.java:1034) ~[spring-jdbc-6.0.4.jar:6.0.4]\r\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.batchUpdate(NamedParameterJdbcTemplate.java:373) ~[spring-jdbc-6.0.4.jar:6.0.4]\r\n\tat org.springframework.batch.item.database.JdbcBatchItemWriter.write(JdbcBatchItemWriter.java:190) ~[spring-batch-infrastructure-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.core.step.item.SimpleChunkProcessor.writeItems(SimpleChunkProcessor.java:203) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.core.step.item.SimpleChunkProcessor.doWrite(SimpleChunkProcessor.java:170) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.core.step.item.SimpleChunkProcessor.write(SimpleChunkProcessor.java:297) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:227) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:75) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:389) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:313) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.0.4.jar:6.0.4]\r\n\tat org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:256) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:362) ~[spring-batch-infrastructure-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:206) ~[spring-batch-infrastructure-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:139) ~[spring-batch-infrastructure-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:241) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:227) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:153) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:68) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:68) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:167) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:142) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:137) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:316) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:157) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50) ~[spring-core-6.0.4.jar:6.0.4]\r\n\tat org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:148) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.batch.core.launch.support.TaskExecutorJobLauncher.run(TaskExecutorJobLauncher.java:70) ~[spring-batch-core-5.0.0.jar:5.0.0]\r\n\tat org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199) ~[spring-boot-autoconfigure-3.0.2.jar:3.0.2]\r\n\tat org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:178) ~[spring-boot-autoconfigure-3.0.2.jar:3.0.2]\r\n\tat org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:166) ~[spring-boot-autoconfigure-3.0.2.jar:3.0.2]\r\n\tat org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:161) ~[spring-boot-autoconfigure-3.0.2.jar:3.0.2]\r\n\tat org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:156) ~[spring-boot-autoconfigure-3.0.2.jar:3.0.2]\r\n\tat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:758) ~[spring-boot-3.0.2.jar:3.0.2]\r\n\tat org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:748) ~[spring-boot-3.0.2.jar:3.0.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:315) ~[spring-boot-3.0.2.jar:3.0.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.2.jar:3.0.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.2.jar:3.0.2]\r\n\tat com.example.batchprocessing.DemoApplication.main(DemoApplication.java:10) ~[classes/:na]\r\nCaused by: java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: PEOPLE in statement [INSERT INTO people(first_name,last_name) VALUES (?, ?)]\r\n\tat org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\r\n\tat org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\r\n\tat org.hsqldb.jdbc.JDBCPreparedStatement.&lt;init&gt;(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\r\n\tat org.hsqldb.jdbc.JDBCConnection.prepareStatement(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\r\n\tat com.zaxxer.hikari.pool.ProxyConnection.prepareStatement(ProxyConnection.java:327) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariProxyConnection.prepareStatement(HikariProxyConnection.java) ~[HikariCP-5.0.1.jar:na]\r\n\tat org.springframework.jdbc.core.JdbcTemplate$SimplePreparedStatementCreator.createPreparedStatement(JdbcTemplate.java:1637) ~[spring-jdbc-6.0.4.jar:6.0.4]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:649) ~[spring-jdbc-6.0.4.jar:6.0.4]\r\n\t... 41 common frames omitted\r\nCaused by: org.hsqldb.HsqlException: user lacks privilege or object not found: PEOPLE\r\n\tat org.hsqldb.error.Error.error(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\r\n\tat org.hsqldb.error.Error.error(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\r\n\tat org.hsqldb.ParserDQL.readTableName(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\r\n\tat org.hsqldb.ParserDQL.readRangeVariableForDataChange(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\r\n\tat org.hsqldb.ParserDML.compileInsertStatement(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\r\n\tat org.hsqldb.ParserCommand.compilePart(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\r\n\tat org.hsqldb.ParserCommand.compileStatement(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\r\n\tat org.hsqldb.Session.compileStatement(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\r\n\tat org.hsqldb.StatementManager.compile(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\r\n\tat org.hsqldb.Session.execute(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\r\n\t... 47 common frames omitted\r\n```\r\n\r\nThis is the BatchConfiguration class.\r\n\r\n```java\r\npackage com.example.batchprocessing;\r\n\r\nimport org.springframework.batch.core.Job;\r\nimport org.springframework.batch.core.Step;\r\nimport org.springframework.batch.core.job.builder.JobBuilder;\r\nimport org.springframework.batch.core.launch.support.RunIdIncrementer;\r\nimport org.springframework.batch.core.repository.JobRepository;\r\nimport org.springframework.batch.core.step.builder.StepBuilder;\r\nimport org.springframework.batch.item.database.BeanPropertyItemSqlParameterSourceProvider;\r\nimport org.springframework.batch.item.database.JdbcBatchItemWriter;\r\nimport org.springframework.batch.item.database.builder.JdbcBatchItemWriterBuilder;\r\nimport org.springframework.batch.item.file.FlatFileItemReader;\r\nimport org.springframework.batch.item.file.builder.FlatFileItemReaderBuilder;\r\nimport org.springframework.batch.item.file.mapping.BeanWrapperFieldSetMapper;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.core.io.ClassPathResource;\r\nimport org.springframework.transaction.PlatformTransactionManager;\r\n\r\nimport javax.sql.DataSource;\r\n\r\n@Configuration\r\npublic class BatchConfiguration {\r\n\r\n    @Bean\r\n    public FlatFileItemReader&lt;Person&gt; reader() {\r\n        return new FlatFileItemReaderBuilder&lt;Person&gt;()\r\n                .name(&quot;personItemReader&quot;)\r\n                .resource(new ClassPathResource(&quot;sample-data.csv&quot;))\r\n                .delimited()\r\n                .names(new String[]{&quot;firstName&quot;, &quot;lastName&quot;})\r\n                .fieldSetMapper(new BeanWrapperFieldSetMapper&lt;Person&gt;() {{\r\n                    setTargetType(Person.class);\r\n                }})\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public PersonItemProcessor processor() {\r\n        return new PersonItemProcessor();\r\n    }\r\n\r\n    @Bean\r\n    public JdbcBatchItemWriter&lt;Person&gt; writer(DataSource dataSource) {\r\n        return new JdbcBatchItemWriterBuilder&lt;Person&gt;()\r\n                .itemSqlParameterSourceProvider(new BeanPropertyItemSqlParameterSourceProvider&lt;&gt;())\r\n                .sql(&quot;INSERT INTO people(first_name,last_name) VALUES (:firstName, :lastName)&quot;)//This is showing problem\r\n                .dataSource(dataSource)\r\n                .build();\r\n    }\r\n    \r\n    @Bean\r\n    public Job importUserJob(JobRepository jobRepository,\r\n                             JobCompletionNotificationListener listener, Step step1) {\r\n        return new JobBuilder(&quot;importUserJob&quot;, jobRepository)\r\n                .incrementer(new RunIdIncrementer())\r\n                .listener(listener)\r\n                .flow(step1)\r\n                .end()\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public Step step1(JobRepository jobRepository,\r\n                      PlatformTransactionManager transactionManager, JdbcBatchItemWriter&lt;Person&gt; writer) {\r\n        return new StepBuilder(&quot;step1&quot;, jobRepository)\r\n                .&lt;Person, Person&gt; chunk(10, transactionManager)\r\n                .reader(reader())\r\n                .processor(processor())\r\n                .writer(writer)\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\nI&#39;m a beginner and have tried searching for [related questions](https://stackoverflow.com/questions/12271064/bad-sql-grammar-exception-in-jdbc-spring) regarding BadSQLGrammarException, but haven&#39;t been able to find a solution to my problem.","title":"Bad SQL Grammar Exception","body":"<p>I'm following <a href=\"https://spring.io/guides/gs/batch-processing/\" rel=\"nofollow noreferrer\">Getting Started Guide|Creating a Batch Service</a>.</p>\n<p>It uses HyperSQL database as given in the guide.</p>\n<p>I have followed the guide as is, but getting the following error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad SQL grammar [INSERT INTO people(first_name,last_name) VALUES (?, ?)]\n    at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:101) ~[spring-jdbc-6.0.4.jar:6.0.4]\n    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70) ~[spring-jdbc-6.0.4.jar:6.0.4]\n    at org.springframework.jdbc.core.JdbcTemplate.translateException(JdbcTemplate.java:1538) ~[spring-jdbc-6.0.4.jar:6.0.4]\n    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:667) ~[spring-jdbc-6.0.4.jar:6.0.4]\n    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:691) ~[spring-jdbc-6.0.4.jar:6.0.4]\n    at org.springframework.jdbc.core.JdbcTemplate.batchUpdate(JdbcTemplate.java:1034) ~[spring-jdbc-6.0.4.jar:6.0.4]\n    at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.batchUpdate(NamedParameterJdbcTemplate.java:373) ~[spring-jdbc-6.0.4.jar:6.0.4]\n    at org.springframework.batch.item.database.JdbcBatchItemWriter.write(JdbcBatchItemWriter.java:190) ~[spring-batch-infrastructure-5.0.0.jar:5.0.0]\n    at org.springframework.batch.core.step.item.SimpleChunkProcessor.writeItems(SimpleChunkProcessor.java:203) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.batch.core.step.item.SimpleChunkProcessor.doWrite(SimpleChunkProcessor.java:170) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.batch.core.step.item.SimpleChunkProcessor.write(SimpleChunkProcessor.java:297) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:227) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:75) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:389) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:313) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.0.4.jar:6.0.4]\n    at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:256) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:362) ~[spring-batch-infrastructure-5.0.0.jar:5.0.0]\n    at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:206) ~[spring-batch-infrastructure-5.0.0.jar:5.0.0]\n    at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:139) ~[spring-batch-infrastructure-5.0.0.jar:5.0.0]\n    at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:241) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:227) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:153) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:68) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:68) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:167) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:142) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:137) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:316) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:157) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50) ~[spring-core-6.0.4.jar:6.0.4]\n    at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:148) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.batch.core.launch.support.TaskExecutorJobLauncher.run(TaskExecutorJobLauncher.java:70) ~[spring-batch-core-5.0.0.jar:5.0.0]\n    at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199) ~[spring-boot-autoconfigure-3.0.2.jar:3.0.2]\n    at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:178) ~[spring-boot-autoconfigure-3.0.2.jar:3.0.2]\n    at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:166) ~[spring-boot-autoconfigure-3.0.2.jar:3.0.2]\n    at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:161) ~[spring-boot-autoconfigure-3.0.2.jar:3.0.2]\n    at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:156) ~[spring-boot-autoconfigure-3.0.2.jar:3.0.2]\n    at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:758) ~[spring-boot-3.0.2.jar:3.0.2]\n    at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:748) ~[spring-boot-3.0.2.jar:3.0.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) ~[spring-boot-3.0.2.jar:3.0.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.2.jar:3.0.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.2.jar:3.0.2]\n    at com.example.batchprocessing.DemoApplication.main(DemoApplication.java:10) ~[classes/:na]\nCaused by: java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: PEOPLE in statement [INSERT INTO people(first_name,last_name) VALUES (?, ?)]\n    at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\n    at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\n    at org.hsqldb.jdbc.JDBCPreparedStatement.&lt;init&gt;(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\n    at org.hsqldb.jdbc.JDBCConnection.prepareStatement(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\n    at com.zaxxer.hikari.pool.ProxyConnection.prepareStatement(ProxyConnection.java:327) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariProxyConnection.prepareStatement(HikariProxyConnection.java) ~[HikariCP-5.0.1.jar:na]\n    at org.springframework.jdbc.core.JdbcTemplate$SimplePreparedStatementCreator.createPreparedStatement(JdbcTemplate.java:1637) ~[spring-jdbc-6.0.4.jar:6.0.4]\n    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:649) ~[spring-jdbc-6.0.4.jar:6.0.4]\n    ... 41 common frames omitted\nCaused by: org.hsqldb.HsqlException: user lacks privilege or object not found: PEOPLE\n    at org.hsqldb.error.Error.error(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\n    at org.hsqldb.error.Error.error(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\n    at org.hsqldb.ParserDQL.readTableName(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\n    at org.hsqldb.ParserDQL.readRangeVariableForDataChange(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\n    at org.hsqldb.ParserDML.compileInsertStatement(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\n    at org.hsqldb.ParserCommand.compilePart(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\n    at org.hsqldb.ParserCommand.compileStatement(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\n    at org.hsqldb.Session.compileStatement(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\n    at org.hsqldb.StatementManager.compile(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\n    at org.hsqldb.Session.execute(Unknown Source) ~[hsqldb-2.7.1.jar:2.7.1]\n    ... 47 common frames omitted\n</code></pre>\n<p>This is the BatchConfiguration class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.batchprocessing;\n\nimport org.springframework.batch.core.Job;\nimport org.springframework.batch.core.Step;\nimport org.springframework.batch.core.job.builder.JobBuilder;\nimport org.springframework.batch.core.launch.support.RunIdIncrementer;\nimport org.springframework.batch.core.repository.JobRepository;\nimport org.springframework.batch.core.step.builder.StepBuilder;\nimport org.springframework.batch.item.database.BeanPropertyItemSqlParameterSourceProvider;\nimport org.springframework.batch.item.database.JdbcBatchItemWriter;\nimport org.springframework.batch.item.database.builder.JdbcBatchItemWriterBuilder;\nimport org.springframework.batch.item.file.FlatFileItemReader;\nimport org.springframework.batch.item.file.builder.FlatFileItemReaderBuilder;\nimport org.springframework.batch.item.file.mapping.BeanWrapperFieldSetMapper;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.io.ClassPathResource;\nimport org.springframework.transaction.PlatformTransactionManager;\n\nimport javax.sql.DataSource;\n\n@Configuration\npublic class BatchConfiguration {\n\n    @Bean\n    public FlatFileItemReader&lt;Person&gt; reader() {\n        return new FlatFileItemReaderBuilder&lt;Person&gt;()\n                .name(&quot;personItemReader&quot;)\n                .resource(new ClassPathResource(&quot;sample-data.csv&quot;))\n                .delimited()\n                .names(new String[]{&quot;firstName&quot;, &quot;lastName&quot;})\n                .fieldSetMapper(new BeanWrapperFieldSetMapper&lt;Person&gt;() {{\n                    setTargetType(Person.class);\n                }})\n                .build();\n    }\n\n    @Bean\n    public PersonItemProcessor processor() {\n        return new PersonItemProcessor();\n    }\n\n    @Bean\n    public JdbcBatchItemWriter&lt;Person&gt; writer(DataSource dataSource) {\n        return new JdbcBatchItemWriterBuilder&lt;Person&gt;()\n                .itemSqlParameterSourceProvider(new BeanPropertyItemSqlParameterSourceProvider&lt;&gt;())\n                .sql(&quot;INSERT INTO people(first_name,last_name) VALUES (:firstName, :lastName)&quot;)//This is showing problem\n                .dataSource(dataSource)\n                .build();\n    }\n    \n    @Bean\n    public Job importUserJob(JobRepository jobRepository,\n                             JobCompletionNotificationListener listener, Step step1) {\n        return new JobBuilder(&quot;importUserJob&quot;, jobRepository)\n                .incrementer(new RunIdIncrementer())\n                .listener(listener)\n                .flow(step1)\n                .end()\n                .build();\n    }\n\n    @Bean\n    public Step step1(JobRepository jobRepository,\n                      PlatformTransactionManager transactionManager, JdbcBatchItemWriter&lt;Person&gt; writer) {\n        return new StepBuilder(&quot;step1&quot;, jobRepository)\n                .&lt;Person, Person&gt; chunk(10, transactionManager)\n                .reader(reader())\n                .processor(processor())\n                .writer(writer)\n                .build();\n    }\n}\n</code></pre>\n<p>I'm a beginner and have tried searching for <a href=\"https://stackoverflow.com/questions/12271064/bad-sql-grammar-exception-in-jdbc-spring\">related questions</a> regarding BadSQLGrammarException, but haven't been able to find a solution to my problem.</p>\n"},{"tags":["java","switch-statement"],"comments":[{"owner":{"account_id":3603873,"reputation":8295,"user_id":3006544,"display_name":"Ryan J"},"score":3,"creation_date":1423094681,"post_id":28333889,"comment_id":45014605,"body_markdown":"What happens when `n.nextLine()` returns an empty string?","body":"What happens when <code>n.nextLine()</code> returns an empty string?"},{"owner":{"account_id":5736990,"reputation":11,"user_id":4530812,"display_name":"Johnny Boy"},"score":0,"creation_date":1423094845,"post_id":28333889,"comment_id":45014653,"body_markdown":"Then charAt(0) would return an error since there is no character to obtain. It does not give me an option to input something in the next line, and instead gives the error straight away. This isn&#39;t the case for the default part of the code.","body":"Then charAt(0) would return an error since there is no character to obtain. It does not give me an option to input something in the next line, and instead gives the error straight away. This isn&#39;t the case for the default part of the code."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1423094988,"post_id":28333889,"comment_id":45014693,"body_markdown":"It won&#39;t &#39;return an error&#39;, it will *throw* the *exception you are getting.*","body":"It won&#39;t &#39;return an error&#39;, it will <i>throw</i> the <i>exception you are getting.</i>"},{"owner":{"account_id":3603873,"reputation":8295,"user_id":3006544,"display_name":"Ryan J"},"score":1,"creation_date":1423095253,"post_id":28333889,"comment_id":45014762,"body_markdown":"@JohnnyBoy The point of the comment was to get you to think about the line of code in question, and how it&#39;s written... Since you _can_ get an empty string from `n.nextLine()` and calling `charAt()` on it _will_ produce the above exception, you need to reconsider calling `.charAt(0)` on it until you&#39;ve validated the result.","body":"@JohnnyBoy The point of the comment was to get you to think about the line of code in question, and how it&#39;s written... Since you <i>can</i> get an empty string from <code>n.nextLine()</code> and calling <code>charAt()</code> on it <i>will</i> produce the above exception, you need to reconsider calling <code>.charAt(0)</code> on it until you&#39;ve validated the result."},{"owner":{"account_id":5736990,"reputation":11,"user_id":4530812,"display_name":"Johnny Boy"},"score":0,"creation_date":1423096244,"post_id":28333889,"comment_id":45015028,"body_markdown":"So what would be better to call for this situation?","body":"So what would be better to call for this situation?"},{"owner":{"account_id":3603873,"reputation":8295,"user_id":3006544,"display_name":"Ryan J"},"score":0,"creation_date":1423096475,"post_id":28333889,"comment_id":45015086,"body_markdown":"@JohnnyBoy you need to validate the returned string is not empty before you call `charAt()` on it. `String line = n.nextLine(); if ( !line.equals(&quot;&quot;) ) { char c = line.charAt(0); ... }`","body":"@JohnnyBoy you need to validate the returned string is not empty before you call <code>charAt()</code> on it. <code>String line = n.nextLine(); if ( !line.equals(&quot;&quot;) ) { char c = line.charAt(0); ... }</code>"},{"owner":{"account_id":5736990,"reputation":11,"user_id":4530812,"display_name":"Johnny Boy"},"score":0,"creation_date":1423097464,"post_id":28333889,"comment_id":45015327,"body_markdown":"Thank you for your help. My program can now run in a loop, free of errors. Testing it beforehand solved it.","body":"Thank you for your help. My program can now run in a loop, free of errors. Testing it beforehand solved it."}],"answers":[{"tags":[],"owner":{"account_id":25413546,"reputation":1,"user_id":19220924,"display_name":"Rudra prasad mohapatra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676723232,"creation_date":1676723232,"answer_id":75493328,"question_id":28333889,"body_markdown":" Please use `n.next().charAt(0)` instead of  `n.nextLine().charAt(0)`. I think beacuse our task is to read the first character why should I consider a whole line of text may contain many words, spaces, special characters etc. , while I can get the first character from the first word and it is efficient, that&#39;s why java does not allow. :)\r\n\r\nWelcome !","title":"nextLine().charAt(0) inside a switch statement","body":"<p>Please use <code>n.next().charAt(0)</code> instead of  <code>n.nextLine().charAt(0)</code>. I think beacuse our task is to read the first character why should I consider a whole line of text may contain many words, spaces, special characters etc. , while I can get the first character from the first word and it is efficient, that's why java does not allow. :)</p>\n<p>Welcome !</p>\n"}],"owner":{"account_id":5736990,"reputation":11,"user_id":4530812,"display_name":"Johnny Boy"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5022,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1676723232,"creation_date":1423094486,"question_id":28333889,"body_markdown":"I&#39;m making a very basic calculator program and ran into a problem that&#39;s baffled my mind the entire time.\r\n\r\nCode:\r\n\r\n    switch(operation){\r\n          case &#39;a&#39;:\r\n          case &#39;A&#39;:\r\n              addition(n);\r\n              operation = n.nextLine().charAt(0);\r\n              break;\r\nWhen I run the program and enter either characters (proceeding code uses Scanner object n to determine which char I type in), the method addition(n) works as intended. Basically the switch statement is inside a while loop so that it executes until I enter &#39;E&#39;, and the 5th line in the code I have above will change the char operation so that it does not execute the addition switch block over and over. The 5th line `operation = n.nextLine().charAt(0);` will give me an error:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.StringIndexOutOfBoundsException: String index out of range: 0\r\n\r\nWhy is it giving me this error? What troubles my mind more is my default inside the switch is structured similarily yet the exact same code will work for it.\r\n\r\n      default:\r\n          System.out.println(&quot;Invalid entry. Refer to above menu and input&quot;\r\n                  + &quot; your choice of operation.&quot;);\r\n          operation = n.nextLine().charAt(0);\r\n          break;\r\n\r\nMany thanks for your time.\r\n\r\nEDIT: If I comment out the method `addition(n)`, the 5th line will work as fine, allowing me to change my char operation. Why is the 4th line responsible for this?","title":"nextLine().charAt(0) inside a switch statement","body":"<p>I'm making a very basic calculator program and ran into a problem that's baffled my mind the entire time.</p>\n\n<p>Code:</p>\n\n<pre><code>switch(operation){\n      case 'a':\n      case 'A':\n          addition(n);\n          operation = n.nextLine().charAt(0);\n          break;\n</code></pre>\n\n<p>When I run the program and enter either characters (proceeding code uses Scanner object n to determine which char I type in), the method addition(n) works as intended. Basically the switch statement is inside a while loop so that it executes until I enter 'E', and the 5th line in the code I have above will change the char operation so that it does not execute the addition switch block over and over. The 5th line <code>operation = n.nextLine().charAt(0);</code> will give me an error:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.StringIndexOutOfBoundsException: String index out of range: 0\n</code></pre>\n\n<p>Why is it giving me this error? What troubles my mind more is my default inside the switch is structured similarily yet the exact same code will work for it.</p>\n\n<pre><code>  default:\n      System.out.println(\"Invalid entry. Refer to above menu and input\"\n              + \" your choice of operation.\");\n      operation = n.nextLine().charAt(0);\n      break;\n</code></pre>\n\n<p>Many thanks for your time.</p>\n\n<p>EDIT: If I comment out the method <code>addition(n)</code>, the 5th line will work as fine, allowing me to change my char operation. Why is the 4th line responsible for this?</p>\n"},{"tags":["java","floating-point","try-catch"],"comments":[{"owner":{"account_id":98304,"reputation":33355,"user_id":266198,"accept_rate":89,"display_name":"Nim"},"score":0,"creation_date":1322857083,"post_id":8362027,"comment_id":10316287,"body_markdown":"why the artificial constraint on no exceptions? AFAIK, you&#39;ll have to roll your own!","body":"why the artificial constraint on no exceptions? AFAIK, you&#39;ll have to roll your own!"},{"owner":{"account_id":1072940,"reputation":1307,"user_id":1071777,"display_name":"user1071777"},"score":0,"creation_date":1322857201,"post_id":8362027,"comment_id":10316316,"body_markdown":"Look at http://stackoverflow.com/a/1102916/1071777\nThe isNumeric method by CraigTP will basically be the tryParse (you can modify it according to your needs)","body":"Look at <a href=\"http://stackoverflow.com/a/1102916/1071777\">stackoverflow.com/a/1102916/1071777</a> The isNumeric method by CraigTP will basically be the tryParse (you can modify it according to your needs)"},{"owner":{"account_id":71015,"reputation":5191,"user_id":205463,"accept_rate":71,"display_name":"Vahid Hashemi"},"score":0,"creation_date":1322857216,"post_id":8362027,"comment_id":10316321,"body_markdown":"its not me to troll myself its an I/O based data coming from somewhere so I have to make it sane","body":"its not me to troll myself its an I/O based data coming from somewhere so I have to make it sane"},{"owner":{"account_id":98304,"reputation":33355,"user_id":266198,"accept_rate":89,"display_name":"Nim"},"score":0,"creation_date":1322857317,"post_id":8362027,"comment_id":10316355,"body_markdown":"question is: if it&#39;s dodgy, surely you want to fail fast and not proceed?","body":"question is: if it&#39;s dodgy, surely you want to fail fast and not proceed?"},{"owner":{"account_id":180632,"reputation":124566,"user_id":414076,"accept_rate":86,"display_name":"Anthony Pegram"},"score":0,"creation_date":1322857372,"post_id":8362027,"comment_id":10316374,"body_markdown":"@Nim, I wouldn&#39;t call it an artificial constraint at all, it&#39;s simply exploring to see if similar exception-avoiding functionality exists in Java as it does in .NET&#39;s TryParse.","body":"@Nim, I wouldn&#39;t call it an artificial constraint at all, it&#39;s simply exploring to see if similar exception-avoiding functionality exists in Java as it does in .NET&#39;s TryParse."},{"owner":{"account_id":74910,"reputation":24557,"user_id":215030,"accept_rate":85,"display_name":"Aaron McIver"},"score":0,"creation_date":1322857373,"post_id":8362027,"comment_id":10316376,"body_markdown":"@austinpowers Why not just use a regex to verify the string is what you want if you don&#39;t want to leverage the framework and catch the exception? The exception is explicitly defined to state that the number format is incorrect. Your fighting the framework here.","body":"@austinpowers Why not just use a regex to verify the string is what you want if you don&#39;t want to leverage the framework and catch the exception? The exception is explicitly defined to state that the number format is incorrect. Your fighting the framework here."},{"owner":{"account_id":98304,"reputation":33355,"user_id":266198,"accept_rate":89,"display_name":"Nim"},"score":0,"creation_date":1322857535,"post_id":8362027,"comment_id":10316421,"body_markdown":"@AnthonyPegram, hmm, seems a waste of time to me... catch the exception, and handle it - bound to be **much** quicker than any other hacky approach...","body":"@AnthonyPegram, hmm, seems a waste of time to me... catch the exception, and handle it - bound to be <b>much</b> quicker than any other hacky approach..."},{"owner":{"account_id":180632,"reputation":124566,"user_id":414076,"accept_rate":86,"display_name":"Anthony Pegram"},"score":4,"creation_date":1322858153,"post_id":8362027,"comment_id":10316644,"body_markdown":"@Nim, you would be wrong about the &quot;much quicker&quot; claim, if you keep in mind coming from a C# perspective. `float.TryParse` is *orders of magnitude* faster when dealing with an improper input. Exception handling is slow, and we also do not like relying upon exceptions for control flow. So since Austin is coming from a C# perspective, he&#39;s looking for that same fast, non-exceptional validation of the input while simultaneously providing the output. You only learn that it does not exist in Java by seeking guidance!","body":"@Nim, you would be wrong about the &quot;much quicker&quot; claim, if you keep in mind coming from a C# perspective. <code>float.TryParse</code> is <i>orders of magnitude</i> faster when dealing with an improper input. Exception handling is slow, and we also do not like relying upon exceptions for control flow. So since Austin is coming from a C# perspective, he&#39;s looking for that same fast, non-exceptional validation of the input while simultaneously providing the output. You only learn that it does not exist in Java by seeking guidance!"},{"owner":{"account_id":98304,"reputation":33355,"user_id":266198,"accept_rate":89,"display_name":"Nim"},"score":0,"creation_date":1322862224,"post_id":8362027,"comment_id":10317939,"body_markdown":"@Anthony really? Exception handling is slow? Well in an exceptional case yes, but to avoid, you&#39;d rather hit all operations with the same overhead?","body":"@Anthony really? Exception handling is slow? Well in an exceptional case yes, but to avoid, you&#39;d rather hit all operations with the same overhead?"},{"owner":{"account_id":180632,"reputation":124566,"user_id":414076,"accept_rate":86,"display_name":"Anthony Pegram"},"score":1,"creation_date":1322863400,"post_id":8362027,"comment_id":10318287,"body_markdown":"@Nim, why would you think TryParse in .NET comes with a lot of overhead? Have you run profiling comparisons for the happy path and exceptional paths between the various number parsing techniques in order to come away with that conclusion, or are you merely assuming?","body":"@Nim, why would you think TryParse in .NET comes with a lot of overhead? Have you run profiling comparisons for the happy path and exceptional paths between the various number parsing techniques in order to come away with that conclusion, or are you merely assuming?"},{"owner":{"account_id":180632,"reputation":124566,"user_id":414076,"accept_rate":86,"display_name":"Anthony Pegram"},"score":0,"creation_date":1322863447,"post_id":8362027,"comment_id":10318300,"body_markdown":"But consider the context, not all parsing in .NET would be done with TryParse. If, for example, the data was coming from a known system that could be trusted, then an invalid format would *truly* be exceptional and we would want to treat it as such. If, however, we were dealing with user input, then an invalid input is a much more regular event, and we would want to treat that accordingly. We would not do that by doing exception handling, we would simply validate and reprompt.","body":"But consider the context, not all parsing in .NET would be done with TryParse. If, for example, the data was coming from a known system that could be trusted, then an invalid format would <i>truly</i> be exceptional and we would want to treat it as such. If, however, we were dealing with user input, then an invalid input is a much more regular event, and we would want to treat that accordingly. We would not do that by doing exception handling, we would simply validate and reprompt."},{"owner":{"account_id":98304,"reputation":33355,"user_id":266198,"accept_rate":89,"display_name":"Nim"},"score":0,"creation_date":1322866199,"post_id":8362027,"comment_id":10318907,"body_markdown":"@AnthonyPegram, I didn&#39;t claim any such thing, I have no C# experience at all, but from the little Java and C++ knowledge I have, and the code (which I&#39;d consider as being of exceptional quality, that I have seen), I&#39;ve not seen a case where exceptions are avoided because they are &quot;expensive&quot;. Exceptions are abused, but used correctly, it&#39;s likely to be cheaper than running a regular expression to check first(?) Ofcourse context matters, but let me put this to you, if you were validating user input, does the &quot;cost&quot; of an exception matter?","body":"@AnthonyPegram, I didn&#39;t claim any such thing, I have no C# experience at all, but from the little Java and C++ knowledge I have, and the code (which I&#39;d consider as being of exceptional quality, that I have seen), I&#39;ve not seen a case where exceptions are avoided because they are &quot;expensive&quot;. Exceptions are abused, but used correctly, it&#39;s likely to be cheaper than running a regular expression to check first(?) Ofcourse context matters, but let me put this to you, if you were validating user input, does the &quot;cost&quot; of an exception matter?"},{"owner":{"account_id":180632,"reputation":124566,"user_id":414076,"accept_rate":86,"display_name":"Anthony Pegram"},"score":2,"creation_date":1322869285,"post_id":8362027,"comment_id":10319506,"body_markdown":"@Nim, that goes back to the second part. If I&#39;m validating user input, I&#39;m not going to let an exception drive my decision making. That&#39;s making exceptions part of the control flow, and that&#39;s bad programming practice in .NET. Again, if you&#39;re in an environment that does not have this approach, you use the tools you have. In .NET, we have TryParse, and it&#39;s fast, functional, and entirely appropriate for its typical usage. Your environment may differ, just as Java obviously does.","body":"@Nim, that goes back to the second part. If I&#39;m validating user input, I&#39;m not going to let an exception drive my decision making. That&#39;s making exceptions part of the control flow, and that&#39;s bad programming practice in .NET. Again, if you&#39;re in an environment that does not have this approach, you use the tools you have. In .NET, we have TryParse, and it&#39;s fast, functional, and entirely appropriate for its typical usage. Your environment may differ, just as Java obviously does."},{"owner":{"account_id":8888700,"reputation":543,"user_id":6636122,"display_name":"BertKing"},"score":0,"creation_date":1506322635,"post_id":8362027,"comment_id":79755523,"body_markdown":"I think it can help you [Click here](https://stackoverflow.com/a/16699049/6636122).","body":"I think it can help you <a href=\"https://stackoverflow.com/a/16699049/6636122\">Click here</a>."}],"answers":[{"comments":[{"owner":{"account_id":71015,"reputation":5191,"user_id":205463,"accept_rate":71,"display_name":"Vahid Hashemi"},"score":0,"creation_date":1322857156,"post_id":8362104,"comment_id":10316306,"body_markdown":"my point is : avoid using try/catch for parse such simple values , yet thanks for the approach","body":"my point is : avoid using try/catch for parse such simple values , yet thanks for the approach"},{"owner":{"account_id":277416,"reputation":681888,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1322857404,"post_id":8362104,"comment_id":10316381,"body_markdown":"Except by reimplementing parseFloat yourself, you won&#39;t be able to do it. If all your code uses the tryParseFloat method, it doesn&#39;t have to deal with exceptions. Only tryParseFloat does.","body":"Except by reimplementing parseFloat yourself, you won&#39;t be able to do it. If all your code uses the tryParseFloat method, it doesn&#39;t have to deal with exceptions. Only tryParseFloat does."},{"owner":{"account_id":98304,"reputation":33355,"user_id":266198,"accept_rate":89,"display_name":"Nim"},"score":0,"creation_date":1322857417,"post_id":8362104,"comment_id":10316384,"body_markdown":"can you not use a `Float`? (my java is a little rusty) - what&#39;s with the `FloatHolder`?","body":"can you not use a <code>Float</code>? (my java is a little rusty) - what&#39;s with the <code>FloatHolder</code>?"},{"owner":{"account_id":277416,"reputation":681888,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1322857607,"post_id":8362104,"comment_id":10316440,"body_markdown":"You can use a Float and return null to signal an error. I suggested it in my answer. The FloatHolder is a way to have a signature similar to C#&#39;s TryParse method.","body":"You can use a Float and return null to signal an error. I suggested it in my answer. The FloatHolder is a way to have a signature similar to C#&#39;s TryParse method."}],"tags":[],"owner":{"account_id":277416,"reputation":681888,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"comment_count":4,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1322857069,"creation_date":1322857069,"answer_id":8362104,"question_id":8362027,"body_markdown":"Unfortunately, there is no such method in Java. There is no out parameter in Java, so writing such a method would need to return a null Float to signal an error, or to pass a FloatHolder object which could be modified by the method:\r\n\r\n    public class FloatHolder {\r\n        private float value;\r\n\r\n        public void setValue(float value) {\r\n            this.value = value;\r\n        }\r\n\r\n        public float getValue() {\r\n            return this.value;\r\n        }\r\n    }\r\n\r\n    public static boolean tryParseFloat(String s, FloatHolder holder) {\r\n        try {\r\n            float value = Float.parseFloat(s);\r\n            holder.setValue(value);\r\n        }\r\n        catch (NumberFormatException e) {\r\n            return false;\r\n        }\r\n    }","title":"how to convert a string to float and avoid using try/catch in java?","body":"<p>Unfortunately, there is no such method in Java. There is no out parameter in Java, so writing such a method would need to return a null Float to signal an error, or to pass a FloatHolder object which could be modified by the method:</p>\n\n<pre><code>public class FloatHolder {\n    private float value;\n\n    public void setValue(float value) {\n        this.value = value;\n    }\n\n    public float getValue() {\n        return this.value;\n    }\n}\n\npublic static boolean tryParseFloat(String s, FloatHolder holder) {\n    try {\n        float value = Float.parseFloat(s);\n        holder.setValue(value);\n    }\n    catch (NumberFormatException e) {\n        return false;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1064217,"reputation":5914,"user_id":1065171,"accept_rate":93,"display_name":"Kamran Ali"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1322857457,"creation_date":1322857457,"answer_id":8362176,"question_id":8362027,"body_markdown":"Java does not provide some built in tryParse type of methods, on of the solutions you can try is to create your own tryParse Method and put try/catch code in this method and then you can easily use this method across your application very easily and without using try/catch at all the places you use the method.\r\n\r\nOne of the sample functions can have following code\r\n\r\n   \r\n\r\n \r\n\r\n    public static Long parseLong(String value) {\r\n        \r\n        \tif(isNullOrEmpty(value)) {\r\n        \t    return null;\r\n        \t}\r\n        \r\n        \ttry {\r\n        \t    return Long.valueOf(value);\r\n        \t}\r\n        \tcatch (NumberFormatException e) {\r\n        \t}\r\n        \r\n        \treturn null;\r\n        }","title":"how to convert a string to float and avoid using try/catch in java?","body":"<p>Java does not provide some built in tryParse type of methods, on of the solutions you can try is to create your own tryParse Method and put try/catch code in this method and then you can easily use this method across your application very easily and without using try/catch at all the places you use the method.</p>\n\n<p>One of the sample functions can have following code</p>\n\n<pre><code>public static Long parseLong(String value) {\n\n        if(isNullOrEmpty(value)) {\n            return null;\n        }\n\n        try {\n            return Long.valueOf(value);\n        }\n        catch (NumberFormatException e) {\n        }\n\n        return null;\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":71015,"reputation":5191,"user_id":205463,"accept_rate":71,"display_name":"Vahid Hashemi"},"score":0,"creation_date":1322860132,"post_id":8362267,"comment_id":10317237,"body_markdown":"and the regex is &quot;((-|\\\\+)?[0-9]+(\\\\.[0-9]+)?)+&quot;","body":"and the regex is &quot;((-|\\\\+)?[0-9]+(\\\\.[0-9]+)?)+&quot;"},{"owner":{"account_id":98304,"reputation":33355,"user_id":266198,"accept_rate":89,"display_name":"Nim"},"score":0,"creation_date":1322862099,"post_id":8362267,"comment_id":10317897,"body_markdown":"I&#39;m sorry, but I would argue that the regular expression check approach will be slower than simply catching a parse exception, seems like premature optimization to me.","body":"I&#39;m sorry, but I would argue that the regular expression check approach will be slower than simply catching a parse exception, seems like premature optimization to me."},{"owner":{"account_id":75323,"reputation":15516,"user_id":216111,"accept_rate":100,"display_name":"josefx"},"score":0,"creation_date":1322907084,"post_id":8362267,"comment_id":10323464,"body_markdown":"@Nim thats why I wrote last sentence and most likely the reason why java does not have a try parse, its slower when most values are valid.","body":"@Nim thats why I wrote last sentence and most likely the reason why java does not have a try parse, its slower when most values are valid."},{"owner":{"account_id":943967,"reputation":27613,"user_id":971592,"accept_rate":94,"display_name":"kentcdodds"},"score":0,"creation_date":1337169007,"post_id":8362267,"comment_id":13758989,"body_markdown":"In case anyone in the future wants a good solution for doubles, here&#39;s the regex for that: `^[-+]?[0-9]*\\.?[0-9]+$` and it wont allow for anything else in the string to be anything but numbers (so don&#39;t worry about the warning comment in the code above)","body":"In case anyone in the future wants a good solution for doubles, here&#39;s the regex for that: <code>^[-+]?[0-9]*\\.?[0-9]+$</code> and it wont allow for anything else in the string to be anything but numbers (so don&#39;t worry about the warning comment in the code above)"},{"owner":{"account_id":948242,"reputation":389,"user_id":975019,"accept_rate":60,"display_name":"Skystrider"},"score":0,"creation_date":1610989945,"post_id":8362267,"comment_id":116301562,"body_markdown":"Not sure if apache just uses a try-catch but for anyone looking here who just wants a utility method, there is NumberUtils.toInt(str, defaultValue): http://commons.apache.org/proper/commons-lang/javadocs/api-3.3.2/org/apache/commons/lang3/math/NumberUtils.html#toInt(java.lang.String,%20int)","body":"Not sure if apache just uses a try-catch but for anyone looking here who just wants a utility method, there is NumberUtils.toInt(str, defaultValue): <a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-3.3.2/org/apache/commons/lang3/math/NumberUtils.html#toInt(java.lang.String,%20int)\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-lang/javadocs/api-3.3.2/or&zwnj;&#8203;g/&hellip;</a>"},{"owner":{"account_id":948242,"reputation":389,"user_id":975019,"accept_rate":60,"display_name":"Skystrider"},"score":0,"creation_date":1610991002,"post_id":8362267,"comment_id":116302036,"body_markdown":"I confirmed, Apach is using try catch.","body":"I confirmed, Apach is using try catch."}],"tags":[],"owner":{"account_id":75323,"reputation":15516,"user_id":216111,"accept_rate":100,"display_name":"josefx"},"comment_count":6,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1322857871,"creation_date":1322857871,"answer_id":8362267,"question_id":8362027,"body_markdown":"The simplest thing I can think of is `java.util.Scanner` . However this approach requires a new Scanner instance for each String.\r\n\r\n    String data = ...;\r\n    Scanner n = new Scanner(data);\r\n    if(n.hasNextInt()){//check if the next chars are integer\r\n      int i = n.nextInt();   \r\n    }else{\r\n    \r\n    }\r\n\r\nNext you could write a regex pattern that you use to check the String (complex to fail too big values) and then call Integer.parseInt() after checking the string against it.\r\n\r\n    Pattern p = Pattern.compile(&quot;insert regex to test string here&quot;);\r\n    String data = ...;\r\n    Matcher m = p.matcher(data);\r\n    //warning depending on regex used this may \r\n    //only check part of the string\r\n    if(m.matches()){\r\n      int i = Integer.parseInt(data);\r\n    }\r\n\r\nHowever both of these parse the string twice, once to test the string and a second time to get the value. Depending on how often you get invalid strings catching an exception may be faster.","title":"how to convert a string to float and avoid using try/catch in java?","body":"<p>The simplest thing I can think of is <code>java.util.Scanner</code> . However this approach requires a new Scanner instance for each String.</p>\n\n<pre><code>String data = ...;\nScanner n = new Scanner(data);\nif(n.hasNextInt()){//check if the next chars are integer\n  int i = n.nextInt();   \n}else{\n\n}\n</code></pre>\n\n<p>Next you could write a regex pattern that you use to check the String (complex to fail too big values) and then call Integer.parseInt() after checking the string against it.</p>\n\n<pre><code>Pattern p = Pattern.compile(\"insert regex to test string here\");\nString data = ...;\nMatcher m = p.matcher(data);\n//warning depending on regex used this may \n//only check part of the string\nif(m.matches()){\n  int i = Integer.parseInt(data);\n}\n</code></pre>\n\n<p>However both of these parse the string twice, once to test the string and a second time to get the value. Depending on how often you get invalid strings catching an exception may be faster.</p>\n"},{"tags":[],"owner":{"account_id":80581,"reputation":3955,"user_id":227779,"accept_rate":38,"display_name":"Per Lundberg"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1550481775,"creation_date":1550481775,"answer_id":54743969,"question_id":8362027,"body_markdown":"This is an old question, but since all the answers fail to mention this (and I wasn&#39;t aware of it myself until seeing it in a merge request written by a colleague), I want to point potential readers to the [Guava](https://github.com/google/guava) `Floats` and `Ints` classes:\r\n\r\nWith the help of these classes, you can write code like this:\r\n\r\n        Integer i = Ints.tryParse(&quot;10&quot;);\r\n        Integer j = Ints.tryParse(&quot;invalid&quot;);\r\n        Float f = Floats.tryParse(&quot;10.1&quot;);\r\n        Float g = Floats.tryParse(&quot;invalid.value&quot;);\r\n\r\nThe result will be `null` if the value is an invalid `int` or `float`, and you can then handle it in any way you like. (Be careful to not just cast it to an `int`/`float`, since this will trigger a `NullPointerException` if the value is an invalid integer/floating point value.)\r\n\r\nNote that these methods are marked as &quot;beta&quot;, but they are quite useful anyway and we use them in production.\r\n\r\nFor reference, here are the Javadocs for these classes:\r\n\r\n- https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/primitives/Ints.html\r\n- https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/primitives/Floats.html","title":"how to convert a string to float and avoid using try/catch in java?","body":"<p>This is an old question, but since all the answers fail to mention this (and I wasn't aware of it myself until seeing it in a merge request written by a colleague), I want to point potential readers to the <a href=\"https://github.com/google/guava\" rel=\"nofollow noreferrer\">Guava</a> <code>Floats</code> and <code>Ints</code> classes:</p>\n\n<p>With the help of these classes, you can write code like this:</p>\n\n<pre><code>    Integer i = Ints.tryParse(\"10\");\n    Integer j = Ints.tryParse(\"invalid\");\n    Float f = Floats.tryParse(\"10.1\");\n    Float g = Floats.tryParse(\"invalid.value\");\n</code></pre>\n\n<p>The result will be <code>null</code> if the value is an invalid <code>int</code> or <code>float</code>, and you can then handle it in any way you like. (Be careful to not just cast it to an <code>int</code>/<code>float</code>, since this will trigger a <code>NullPointerException</code> if the value is an invalid integer/floating point value.)</p>\n\n<p>Note that these methods are marked as \"beta\", but they are quite useful anyway and we use them in production.</p>\n\n<p>For reference, here are the Javadocs for these classes:</p>\n\n<ul>\n<li><a href=\"https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/primitives/Ints.html\" rel=\"nofollow noreferrer\">https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/primitives/Ints.html</a></li>\n<li><a href=\"https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/primitives/Floats.html\" rel=\"nofollow noreferrer\">https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/primitives/Floats.html</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":8445437,"reputation":746,"user_id":6336270,"display_name":"Amjad Abujamous"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676721423,"creation_date":1676721423,"answer_id":75493165,"question_id":8362027,"body_markdown":"Regular expressions helped me solve this issue. Here is how:\r\n\r\n 1. Get the string input.\r\n 2. Use the expression that matches one or more digits.\r\n 3. Parse if it is a match.\r\n\r\n```java\r\nString s = &quot;1111&quot;;\r\nint i = s.matches(&quot;^[0-9]+$&quot;) ? Integer.parseInt(s) : -1;\r\nif(i != -1)\r\n  System.out.println(&quot;Integer&quot;);\r\nelse\r\n  System.out.println(&quot;Not an integer&quot;);\r\n```","title":"how to convert a string to float and avoid using try/catch in java?","body":"<p>Regular expressions helped me solve this issue. Here is how:</p>\n<ol>\n<li>Get the string input.</li>\n<li>Use the expression that matches one or more digits.</li>\n<li>Parse if it is a match.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>String s = &quot;1111&quot;;\nint i = s.matches(&quot;^[0-9]+$&quot;) ? Integer.parseInt(s) : -1;\nif(i != -1)\n  System.out.println(&quot;Integer&quot;);\nelse\n  System.out.println(&quot;Not an integer&quot;);\n</code></pre>\n"}],"owner":{"account_id":71015,"reputation":5191,"user_id":205463,"accept_rate":71,"display_name":"Vahid Hashemi"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13243,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":8362267,"answer_count":5,"score":11,"last_activity_date":1676721423,"creation_date":1322856650,"question_id":8362027,"body_markdown":"There are some situation that I need to convert string to float or some other numerical data-type but there is a probability of getting some nonconvertible values such as &quot;-&quot; or &quot;/&quot;  and I can&#39;t verify all the values beforehand to remove them.\r\nand I  want to avoid using try/catch for this matter , is there any other way of doing a proper conversion in java? something similar to C# `TryParse`?","title":"how to convert a string to float and avoid using try/catch in java?","body":"<p>There are some situation that I need to convert string to float or some other numerical data-type but there is a probability of getting some nonconvertible values such as \"-\" or \"/\"  and I can't verify all the values beforehand to remove them.\nand I  want to avoid using try/catch for this matter , is there any other way of doing a proper conversion in java? something similar to C# <code>TryParse</code>?</p>\n"},{"tags":["java","android"],"owner":{"account_id":27818460,"reputation":1,"user_id":21239383,"display_name":"ARafiY"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676720657,"creation_date":1676720657,"question_id":75493095,"body_markdown":"I am developing a java application. Its purpose is a program that calculates how many minutes you talk on the phone. However, when I start the chronometer when the phone is turned on, I cannot save the chronometer value as a string.\r\n\r\n```\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.os.SystemClock;\r\nimport android.support.v7.app.AppCompatActivity;\r\nimport android.os.Bundle;\r\nimport android.telephony.PhoneStateListener;\r\nimport android.telephony.TelephonyManager;\r\nimport android.widget.Chronometer;\r\nimport android.widget.TextView;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    TextView textOut;\r\n    TelephonyManager telephonyManager;\r\n    PhoneStateListener listener;\r\n    private Database database;\r\n    /** Called when the activity is first created. */\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        startService(new Intent(MainActivity.this,servis.class));\r\n        textOut = (TextView) findViewById(R.id.textOut);\r\n        telephonyManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);\r\n        final Chronometer kronometre = findViewById(R.id.ch);\r\n        int s&#252;re = (int)(SystemClock.elapsedRealtime()-kronometre.getBase());\r\n        listener = new PhoneStateListener() {\r\n            @Override\r\n            public void onCallStateChanged(int state, String incomingNumber) {\r\n                String stateString = &quot;N/A&quot;;\r\n                switch (state) {\r\n                    case TelephonyManager.CALL_STATE_IDLE:\r\n                        stateString = &quot;Idle&quot;;\r\n                        kronometre.stop();\r\n                        Database db = new Database(getApplicationContext());\r\n                        db.GelenArama(&quot;17.02.2023&quot;,s&#252;re,54);\r\n\r\n                        break;\r\n                    case TelephonyManager.CALL_STATE_OFFHOOK:\r\n                        stateString = &quot;Off Hook&quot;;\r\n                        kronometre.start();\r\n\r\n\r\n                        break;\r\n                    case TelephonyManager.CALL_STATE_RINGING:\r\n                        stateString = &quot;Ringing&quot;;\r\n                        kronometre.setBase(SystemClock.elapsedRealtime());\r\n                        break;\r\n                }\r\n                textOut.append(String.format(&quot;\\nonCallStateChanged: %s&quot;,\r\n                        stateString));\r\n            }\r\n        };\r\n        telephonyManager.listen(listener, PhoneStateListener.LISTEN_CALL_STATE);\r\n    }\r\n}\r\n```\r\n\r\nI got the stopwatch as an int but the recorded data was not what I wanted.","title":"Android studio save value of Chronometer as Integer","body":"<p>I am developing a java application. Its purpose is a program that calculates how many minutes you talk on the phone. However, when I start the chronometer when the phone is turned on, I cannot save the chronometer value as a string.</p>\n<pre><code>import android.content.Context;\nimport android.content.Intent;\nimport android.os.SystemClock;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.telephony.PhoneStateListener;\nimport android.telephony.TelephonyManager;\nimport android.widget.Chronometer;\nimport android.widget.TextView;\n\npublic class MainActivity extends AppCompatActivity {\n\n    TextView textOut;\n    TelephonyManager telephonyManager;\n    PhoneStateListener listener;\n    private Database database;\n    /** Called when the activity is first created. */\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        startService(new Intent(MainActivity.this,servis.class));\n        textOut = (TextView) findViewById(R.id.textOut);\n        telephonyManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);\n        final Chronometer kronometre = findViewById(R.id.ch);\n        int süre = (int)(SystemClock.elapsedRealtime()-kronometre.getBase());\n        listener = new PhoneStateListener() {\n            @Override\n            public void onCallStateChanged(int state, String incomingNumber) {\n                String stateString = &quot;N/A&quot;;\n                switch (state) {\n                    case TelephonyManager.CALL_STATE_IDLE:\n                        stateString = &quot;Idle&quot;;\n                        kronometre.stop();\n                        Database db = new Database(getApplicationContext());\n                        db.GelenArama(&quot;17.02.2023&quot;,süre,54);\n\n                        break;\n                    case TelephonyManager.CALL_STATE_OFFHOOK:\n                        stateString = &quot;Off Hook&quot;;\n                        kronometre.start();\n\n\n                        break;\n                    case TelephonyManager.CALL_STATE_RINGING:\n                        stateString = &quot;Ringing&quot;;\n                        kronometre.setBase(SystemClock.elapsedRealtime());\n                        break;\n                }\n                textOut.append(String.format(&quot;\\nonCallStateChanged: %s&quot;,\n                        stateString));\n            }\n        };\n        telephonyManager.listen(listener, PhoneStateListener.LISTEN_CALL_STATE);\n    }\n}\n</code></pre>\n<p>I got the stopwatch as an int but the recorded data was not what I wanted.</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"score":2,"creation_date":1676699029,"post_id":75491399,"comment_id":133194439,"body_markdown":"Semi-related, but you should ask yourself how an empty Optional is different from a zero-element array. Are you actually treating them differently? It&#39;s definitely possible you are —&#160;but if all of your non-empty Optionals are of arrays with at least one element (as it sounds like they are, since you&#39;re not checking the array length within your `map` lambda), then the most natural way to represent that could just be a &quot;naked&quot; `String[]` (not wrapped in an Optional), which you then check for `temp.length &gt; 0`. (You can search &quot;java collection optional&quot; for more details and insights.)","body":"Semi-related, but you should ask yourself how an empty Optional is different from a zero-element array. Are you actually treating them differently? It&#39;s definitely possible you are — but if all of your non-empty Optionals are of arrays with at least one element (as it sounds like they are, since you&#39;re not checking the array length within your <code>map</code> lambda), then the most natural way to represent that could just be a &quot;naked&quot; <code>String[]</code> (not wrapped in an Optional), which you then check for <code>temp.length &gt; 0</code>. (You can search &quot;java collection optional&quot; for more details and insights.)"},{"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"score":0,"creation_date":1676700019,"post_id":75491399,"comment_id":133194550,"body_markdown":"Oh, and as for &quot;it prints out a weird value&quot;: https://stackoverflow.com/q/29140402/1076640","body":"Oh, and as for &quot;it prints out a weird value&quot;: <a href=\"https://stackoverflow.com/q/29140402/1076640\">stackoverflow.com/q/29140402/1076640</a>"}],"answers":[{"comments":[{"owner":{"account_id":5339345,"reputation":2303,"user_id":4257073,"accept_rate":63,"display_name":"QWERTY"},"score":0,"creation_date":1676698689,"post_id":75491426,"comment_id":133194405,"body_markdown":"Is there any way I can use the second approach to get the value? the .stream().findFirst()","body":"Is there any way I can use the second approach to get the value? the .stream().findFirst()"},{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":0,"creation_date":1676698815,"post_id":75491426,"comment_id":133194415,"body_markdown":"I&#39;m not sure I understand what you&#39;re trying to do with a stream. an `Optional` is a stream of zero or one objects. `.stream` doesn&#39;t return a stream of the underlying data, it returns a stream whose *element* is the underlying data. You could [flatten](https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/stream/Stream.html#flatMap(java.util.function.Function)) the nested stream, but that&#39;s far less clear than just getting the element from the array in the first place.","body":"I&#39;m not sure I understand what you&#39;re trying to do with a stream. an <code>Optional</code> is a stream of zero or one objects. <code>.stream</code> doesn&#39;t return a stream of the underlying data, it returns a stream whose <i>element</i> is the underlying data. You could <a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/stream/Stream.html#flatMap(java.util.function.Function)\" rel=\"nofollow noreferrer\">flatten</a> the nested stream, but that&#39;s far less clear than just getting the element from the array in the first place."},{"owner":{"account_id":5339345,"reputation":2303,"user_id":4257073,"accept_rate":63,"display_name":"QWERTY"},"score":0,"creation_date":1676698916,"post_id":75491426,"comment_id":133194423,"body_markdown":"I am trying to achieve the same thing but instead of using the .map to get first element, I wanted to use the findFirst()","body":"I am trying to achieve the same thing but instead of using the .map to get first element, I wanted to use the findFirst()"},{"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"score":1,"creation_date":1676699188,"post_id":75491426,"comment_id":133194459,"body_markdown":"It sounds like you may want Streams ([`Stream.of(temp)`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#of(T...))) rather than Optionals.","body":"It sounds like you may want Streams (<a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#of(T...)\" rel=\"nofollow noreferrer\"><code>Stream.of(temp)</code></a>) rather than Optionals."},{"owner":{"account_id":5339345,"reputation":2303,"user_id":4257073,"accept_rate":63,"display_name":"QWERTY"},"score":0,"creation_date":1676699245,"post_id":75491426,"comment_id":133194468,"body_markdown":"No no it should be Optional because it may be null. I am just extracting out the portion to make the question simpler","body":"No no it should be Optional because it may be null. I am just extracting out the portion to make the question simpler"},{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":1,"creation_date":1676699347,"post_id":75491426,"comment_id":133194482,"body_markdown":"I think you&#39;re misunderstanding the point of `Optional`. If you want to stream over some data, then you want `Stream.of`. `Optional` isn&#39;t a magic wand you wave to eliminate the null problem in Java.","body":"I think you&#39;re misunderstanding the point of <code>Optional</code>. If you want to stream over some data, then you want <code>Stream.of</code>. <code>Optional</code> isn&#39;t a magic wand you wave to eliminate the null problem in Java."},{"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"score":0,"creation_date":1676699557,"post_id":75491426,"comment_id":133194511,"body_markdown":"You _could_ do something like `Optional.of(temp).map(Stream::of).orElse(Stream.empty()).findFirst()`... but that&#39;s a lot of hoops for what would otherwise be a couple pretty straightforward checks (one for null, one for length). What that chain does is: turn your maybe-null array into an `Optional&lt;String[]&gt;`, then maps that to an `Optional&lt;Stream&lt;String&gt;&gt;`, then gets that stream or an empty one if the Optional was empty, and then tries to get the first element from that stream. I would not suggest this.","body":"You <i>could</i> do something like <code>Optional.of(temp).map(Stream::of).orElse(Stream.empty()).fin&zwnj;&#8203;dFirst()</code>... but that&#39;s a lot of hoops for what would otherwise be a couple pretty straightforward checks (one for null, one for length). What that chain does is: turn your maybe-null array into an <code>Optional&lt;String[]&gt;</code>, then maps that to an <code>Optional&lt;Stream&lt;String&gt;&gt;</code>, then gets that stream or an empty one if the Optional was empty, and then tries to get the first element from that stream. I would not suggest this."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1676905423,"post_id":75491426,"comment_id":133226442,"body_markdown":"`Optional.of(temp).filter(a -&gt; a.length != 0).map(e -&gt; e[0])` or `Stream.ofNullable(temp).flatMap(Arrays::stream).findFirst()` In either case, there’s no need to switch between `Optional` and `Stream` API. And there’s no point in using an `Optional` “because it may be null”, followed by calling `get()` unconditionally.","body":"<code>Optional.of(temp).filter(a -&gt; a.length != 0).map(e -&gt; e[0])</code> or <code>Stream.ofNullable(temp).flatMap(Arrays::stream).findFirst()</code> In either case, there’s no need to switch between <code>Optional</code> and <code>Stream</code> API. And there’s no point in using an <code>Optional</code> “because it may be null”, followed by calling <code>get()</code> unconditionally."}],"tags":[],"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676698599,"creation_date":1676698599,"answer_id":75491426,"question_id":75491399,"body_markdown":"Arrays don&#39;t really have methods, per se. `.get` is something you call on a `Collection`, not a primitive array. Since the `Optional` contains an actual, primitive Java array, just use brackets `[]` to access the element.\r\n\r\n    System.out.println(email.map(e -&gt; e[0]).orElse(null));","title":"Java Get First Array Item from Optional","body":"<p>Arrays don't really have methods, per se. <code>.get</code> is something you call on a <code>Collection</code>, not a primitive array. Since the <code>Optional</code> contains an actual, primitive Java array, just use brackets <code>[]</code> to access the element.</p>\n<pre><code>System.out.println(email.map(e -&gt; e[0]).orElse(null));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676720322,"creation_date":1676711201,"answer_id":75492282,"question_id":75491399,"body_markdown":"An Optional works alike an if-else test but lay out inside a special object to carry a value and make comparison to an equivalent\r\n\r\nYou put an &quot;array&quot; as a value into the Optional, the only object get() could return is the array not any of it&#39;s elements, also, get() for Optional does not take an argument in it.\r\n\r\nThe isPresent() boolean and the void \r\n ifPresent(ConsumerAndItsValue cmv)   methods are a test to find if the &quot;VALUE&quot; is present, works much more like comparing using if object.equals(this object)\r\n\r\nSo of you want to use it for particular email addresses you simply put in each string , the tests cannot see into the array, those elements  are more objects.\r\n\r\nCreate a java.util.Consumer&amp;Lt;Anobject&amp;gt; the functional code assigned &quot;to a lambda&quot;, Anobject should be the type in accept method accept(T to) method.\r\nHere&#39;s a stack overflow page I found\r\nhttps://stackoverflow.com/questions/24228279/proper-usage-of-optional-ifpresent\r\n\r\nAnd it is possible to iterate over an array contents (external site example). https://mkyong.com/java8/java-8-consumer-examples/\r\n","title":"Java Get First Array Item from Optional","body":"<p>An Optional works alike an if-else test but lay out inside a special object to carry a value and make comparison to an equivalent</p>\n<p>You put an &quot;array&quot; as a value into the Optional, the only object get() could return is the array not any of it's elements, also, get() for Optional does not take an argument in it.</p>\n<p>The isPresent() boolean and the void\nifPresent(ConsumerAndItsValue cmv)   methods are a test to find if the &quot;VALUE&quot; is present, works much more like comparing using if object.equals(this object)</p>\n<p>So of you want to use it for particular email addresses you simply put in each string , the tests cannot see into the array, those elements  are more objects.</p>\n<p>Create a java.util.Consumer≪Anobject&gt; the functional code assigned &quot;to a lambda&quot;, Anobject should be the type in accept method accept(T to) method.\nHere's a stack overflow page I found\n<a href=\"https://stackoverflow.com/questions/24228279/proper-usage-of-optional-ifpresent\">Proper usage of Optional.ifPresent()</a></p>\n<p>And it is possible to iterate over an array contents (external site example). <a href=\"https://mkyong.com/java8/java-8-consumer-examples/\" rel=\"nofollow noreferrer\">https://mkyong.com/java8/java-8-consumer-examples/</a></p>\n"}],"owner":{"account_id":5339345,"reputation":2303,"user_id":4257073,"accept_rate":63,"display_name":"QWERTY"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":205,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1676720322,"creation_date":1676698127,"question_id":75491399,"body_markdown":"I was having some problem when trying to get the first array item out of Optional. Following as my code:\r\n\r\n    String[] temp = new String[2];\r\n    temp[0] = &quot;email1&quot;;\r\n    temp[1] = &quot;email2&quot;;\r\n    Optional&lt;String[]&gt; email = Optional.of(temp);\r\n    System.out.println(email.map(e -&gt; e.get(0)).orElse(null));\r\n\r\nI am trying to get the first email, otherwise just return as null. However, when I run this, I am getting these error messages:\r\n\r\n    System.out.println(email.map(e -&gt; e.get(0)).orElse(null));\r\n                                           ^\r\n    symbol:   method get(int)\r\n    location: variable e of type String[]\r\n    1 error\r\n\r\nWhen I tried to do this:\r\n\r\n    System.out.println(email.stream().findFirst().get());\r\n\r\nIt prints out weird value:\r\n\r\n    [Ljava.lang.String;@7adf9f5f\r\n\r\nAny ideas? Thanks!","title":"Java Get First Array Item from Optional","body":"<p>I was having some problem when trying to get the first array item out of Optional. Following as my code:</p>\n<pre><code>String[] temp = new String[2];\ntemp[0] = &quot;email1&quot;;\ntemp[1] = &quot;email2&quot;;\nOptional&lt;String[]&gt; email = Optional.of(temp);\nSystem.out.println(email.map(e -&gt; e.get(0)).orElse(null));\n</code></pre>\n<p>I am trying to get the first email, otherwise just return as null. However, when I run this, I am getting these error messages:</p>\n<pre><code>System.out.println(email.map(e -&gt; e.get(0)).orElse(null));\n                                       ^\nsymbol:   method get(int)\nlocation: variable e of type String[]\n1 error\n</code></pre>\n<p>When I tried to do this:</p>\n<pre><code>System.out.println(email.stream().findFirst().get());\n</code></pre>\n<p>It prints out weird value:</p>\n<pre><code>[Ljava.lang.String;@7adf9f5f\n</code></pre>\n<p>Any ideas? Thanks!</p>\n"},{"tags":["java","spring","spring-boot","spring-cloud","spring-cloud-gateway"],"answers":[{"tags":[],"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674204410,"creation_date":1674204410,"answer_id":75181619,"question_id":75107139,"body_markdown":"In case if it helps any one to add dynamic query parameter and redirect page you can do it using below code:\r\n\r\n    @GetMapping(&quot;/user&quot;)\r\n    public Mono&lt;Void&gt; sendRedirect(ServerWebExchange exchange, Principal p) {\r\n    \r\n           // Here we can can create string which can have dynamic parameters\r\n           String responseData = &quot;e=&quot;+p..getName();\r\n    \r\n           return Mono.fromRunnable(() -&gt; {\r\n               ServerHttpResponse response = exchange.getResponse();\r\n               response.setStatusCode(HttpStatus.FOUND);\r\n    \r\n            // this used to get the base URL.\r\n    \r\n               UriComponents uriComponents = UriComponentsBuilder.fromUri(exchange.getRequest().getURI()).replacePath(exchange.getRequest().getPath().contextPath().value()).replaceQuery((String)null).fragment((String)null).build();\r\n    \r\n    // As below we can re-generate the URL and redirect it.\r\n               response.getHeaders().setLocation(URI.create(uriComponents.toUriString()+&quot;/app/Dept&quot;+&quot;/sso_login?&quot;+responseData));\r\n           });\r\n       }","title":"In Spring Cloud gateway API, how add dynamic headers or query parameter?","body":"<p>In case if it helps any one to add dynamic query parameter and redirect page you can do it using below code:</p>\n<pre><code>@GetMapping(&quot;/user&quot;)\npublic Mono&lt;Void&gt; sendRedirect(ServerWebExchange exchange, Principal p) {\n\n       // Here we can can create string which can have dynamic parameters\n       String responseData = &quot;e=&quot;+p..getName();\n\n       return Mono.fromRunnable(() -&gt; {\n           ServerHttpResponse response = exchange.getResponse();\n           response.setStatusCode(HttpStatus.FOUND);\n\n        // this used to get the base URL.\n\n           UriComponents uriComponents = UriComponentsBuilder.fromUri(exchange.getRequest().getURI()).replacePath(exchange.getRequest().getPath().contextPath().value()).replaceQuery((String)null).fragment((String)null).build();\n\n// As below we can re-generate the URL and redirect it.\n           response.getHeaders().setLocation(URI.create(uriComponents.toUriString()+&quot;/app/Dept&quot;+&quot;/sso_login?&quot;+responseData));\n       });\n   }\n</code></pre>\n"}],"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":555,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676719729,"creation_date":1673601684,"question_id":75107139,"body_markdown":"I am working on application in which I am using Spring Cloud gateway and in front-end Angular 2, for login I am using Keyclock SSO.\r\n\r\nHowever, after getting logged in I need to send some user information in front-end in some encrypted format, either via headers or query parameters. For that in Spring Cloud gateway I have written below code but it&#39;s not working.\r\n\r\nThis is my custom GlobalFilter where I try to add it headers and parameters but in front-end I am not getting it.\r\n\r\n    @Component\r\n    public class InterceptorFilterGatewayFilterFactory extends AbstractGatewayFilterFactory&lt;InterceptorFilterGatewayFilterFactory.Config&gt; {\r\n    \r\n    \r\n        public InterceptorFilterGatewayFilterFactory() {\r\n            super(Config.class);\r\n        }\r\n        @Override\r\n        public Config newConfig() {\r\n            return new Config();\r\n        }\r\n    \r\n        public static class Config {\r\n            private String value;\r\n    \r\n            public String getValue() {\r\n                return value;\r\n            }\r\n    \r\n            public void setValue(String value) {\r\n                this.value = value;\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public GatewayFilter apply(Config config) {\r\n    \r\n            return (exchange, chain) -&gt; {\r\n                ServerHttpRequest sr = exchange.getRequest();\r\n                Mono var10000 = exchange.getPrincipal().filter((principal) -&gt; principal instanceof OAuth2AuthenticationToken)\r\n                        .map(p -&gt; p).map((p) -&gt; {\r\n                            LinkedHashSet&lt;URI&gt; attr = exchange.getAttribute(ServerWebExchangeUtils.GATEWAY_ORIGINAL_REQUEST_URL_ATTR);\r\n                            ServerHttpRequest request = exchange.getRequest();\r\n    \r\n                          // Here I try to add query parameter\r\n    \r\n                            MultiValueMap&lt;String, String&gt; queryParams = new LinkedMultiValueMap&lt;&gt;();\r\n                            queryParams.put(&quot;e&quot;, Collections.singletonList(toHexString(ja.toString().getBytes())));\r\n                          \r\n                            URI newUri = UriComponentsBuilder.fromUri(request.getURI())\r\n                                    .replaceQueryParams(unmodifiableMultiValueMap(queryParams))\r\n                                    .build(true).toUri();\r\n                            \r\n                            ServerHttpRequest updatedRequest = exchange.getRequest().mutate().uri(newUri)\r\n                                    .build();\r\n                           // Here I add header\r\n                            updatedRequest.mutate().header(&quot;e&quot;, toHexString(ja.toString().getBytes())).build();\r\n    \r\n    \r\n                            return exchange.mutate().request(updatedRequest).build();\r\n    \r\n                }).defaultIfEmpty(exchange).flatMap(chain::filter);\r\n    \r\n    }\r\n\r\n            return var10000;\r\n        };\r\n    }\r\n\r\nAnd in application yml file I am providing route as follow:\r\n\r\n    - id: appDepartmentWise\r\n              predicates:\r\n                - Path=/app/*/sso_login\r\n                - Method=GET,POST\r\n              uri: http://localhost:9000/app/\r\n              filters:\r\n                - PreserveHostHeader\r\n                - RewritePath=/.*, /app/index.html\r\n                - InterceptorFilter\r\n                - AddRequestParameter=e,*\r\n\r\nWhat configuration is missing, and how to add dynamic Header or Query Parameters?\r\n","title":"In Spring Cloud gateway API, how add dynamic headers or query parameter?","body":"<p>I am working on application in which I am using Spring Cloud gateway and in front-end Angular 2, for login I am using Keyclock SSO.</p>\n<p>However, after getting logged in I need to send some user information in front-end in some encrypted format, either via headers or query parameters. For that in Spring Cloud gateway I have written below code but it's not working.</p>\n<p>This is my custom GlobalFilter where I try to add it headers and parameters but in front-end I am not getting it.</p>\n<pre><code>@Component\npublic class InterceptorFilterGatewayFilterFactory extends AbstractGatewayFilterFactory&lt;InterceptorFilterGatewayFilterFactory.Config&gt; {\n\n\n    public InterceptorFilterGatewayFilterFactory() {\n        super(Config.class);\n    }\n    @Override\n    public Config newConfig() {\n        return new Config();\n    }\n\n    public static class Config {\n        private String value;\n\n        public String getValue() {\n            return value;\n        }\n\n        public void setValue(String value) {\n            this.value = value;\n        }\n    }\n\n    @Override\n    public GatewayFilter apply(Config config) {\n\n        return (exchange, chain) -&gt; {\n            ServerHttpRequest sr = exchange.getRequest();\n            Mono var10000 = exchange.getPrincipal().filter((principal) -&gt; principal instanceof OAuth2AuthenticationToken)\n                    .map(p -&gt; p).map((p) -&gt; {\n                        LinkedHashSet&lt;URI&gt; attr = exchange.getAttribute(ServerWebExchangeUtils.GATEWAY_ORIGINAL_REQUEST_URL_ATTR);\n                        ServerHttpRequest request = exchange.getRequest();\n\n                      // Here I try to add query parameter\n\n                        MultiValueMap&lt;String, String&gt; queryParams = new LinkedMultiValueMap&lt;&gt;();\n                        queryParams.put(&quot;e&quot;, Collections.singletonList(toHexString(ja.toString().getBytes())));\n                      \n                        URI newUri = UriComponentsBuilder.fromUri(request.getURI())\n                                .replaceQueryParams(unmodifiableMultiValueMap(queryParams))\n                                .build(true).toUri();\n                        \n                        ServerHttpRequest updatedRequest = exchange.getRequest().mutate().uri(newUri)\n                                .build();\n                       // Here I add header\n                        updatedRequest.mutate().header(&quot;e&quot;, toHexString(ja.toString().getBytes())).build();\n\n\n                        return exchange.mutate().request(updatedRequest).build();\n\n            }).defaultIfEmpty(exchange).flatMap(chain::filter);\n\n}\n\n        return var10000;\n    };\n}\n</code></pre>\n<p>And in application yml file I am providing route as follow:</p>\n<pre><code>- id: appDepartmentWise\n          predicates:\n            - Path=/app/*/sso_login\n            - Method=GET,POST\n          uri: http://localhost:9000/app/\n          filters:\n            - PreserveHostHeader\n            - RewritePath=/.*, /app/index.html\n            - InterceptorFilter\n            - AddRequestParameter=e,*\n</code></pre>\n<p>What configuration is missing, and how to add dynamic Header or Query Parameters?</p>\n"},{"tags":["java","regex","spring","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"score":0,"creation_date":1676131932,"post_id":75421348,"comment_id":133077982,"body_markdown":"Thank you but I don&#39;t want it to come inside method else it will become circular loop, not allowed url should not be ignored it has some other use.","body":"Thank you but I don&#39;t want it to come inside method else it will become circular loop, not allowed url should not be ignored it has some other use."},{"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"score":0,"creation_date":1676132688,"post_id":75421348,"comment_id":133078111,"body_markdown":"Also URl is correct it is not mixing path variable and query string parameter URL is generated in such a way only.","body":"Also URl is correct it is not mixing path variable and query string parameter URL is generated in such a way only."}],"tags":[],"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676130556,"creation_date":1676130556,"answer_id":75421348,"question_id":75421147,"body_markdown":"I think you are mixing your path variable &quot;/embed/{numericId}/{apSomething}&quot; with an optional parameter (/the/path?optionalParam).\r\n\r\n    handleRequest(\r\n       @PathVariable String numericId,\r\n       @PathVariable String apSomething,\r\n       @RequestParam(value = &quot;e&quot;, required = false) Boolean e\r\n    ) {\r\n      if(e!=null) {\r\n         &quot;return 400;?&quot;\r\n      }\r\n      . . .\r\n    }","title":"Spring GetMapping regex expression","body":"<p>I think you are mixing your path variable &quot;/embed/{numericId}/{apSomething}&quot; with an optional parameter (/the/path?optionalParam).</p>\n<pre><code>handleRequest(\n   @PathVariable String numericId,\n   @PathVariable String apSomething,\n   @RequestParam(value = &quot;e&quot;, required = false) Boolean e\n) {\n  if(e!=null) {\n     &quot;return 400;?&quot;\n  }\n  . . .\n}\n</code></pre>\n"}],"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":226,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676719528,"creation_date":1676128589,"question_id":75421147,"body_markdown":"We are trying to write a GetMapping in the Spring application, but it&#39;s not working as required. Below is the my code:\r\n\r\n    @RequestMapping(&quot;/app&quot;)\r\n    public class UserController {\r\n        @GetMapping(&quot;/embed/{numericId:^((?!e=.*).)*$}&quot;)\r\n        public String sendEmbedRedirect() {\r\n          //Code\r\n        }\r\n    }\r\n\r\nSo as per above code I am trying to allow and reject below type of URL:\r\n\r\n    Allowed: http://localhost:9001/app/embed/external/517331346b7357374a4b415038305770743555636c30516d2532466f464b2532467944356b4c4c6a7666306f385a51253344/a_p__Got&amp;a_f__true/param_1\r\n\r\n    Not Allowed: http://localhost:9001/app/embed/external/517331346b7357374a4b415038305770743555636c30516d2532466f464b2532467944356b4c4c6a7666306f385a51253344/a_p__Got&amp;a_f__true?e=L90\r\n\r\nSo as per above example only URL which does not contain &quot;e&quot; parameter should be allowed and URL with &quot;e&quot; parameter should be rejected.\r\n\r\nAllowed link is accessed and interrupted by back-end.\r\n\r\nNot Allowed link is accessed by Front-end directly. \r\n","title":"Spring GetMapping regex expression","body":"<p>We are trying to write a GetMapping in the Spring application, but it's not working as required. Below is the my code:</p>\n<pre><code>@RequestMapping(&quot;/app&quot;)\npublic class UserController {\n    @GetMapping(&quot;/embed/{numericId:^((?!e=.*).)*$}&quot;)\n    public String sendEmbedRedirect() {\n      //Code\n    }\n}\n</code></pre>\n<p>So as per above code I am trying to allow and reject below type of URL:</p>\n<pre><code>Allowed: http://localhost:9001/app/embed/external/517331346b7357374a4b415038305770743555636c30516d2532466f464b2532467944356b4c4c6a7666306f385a51253344/a_p__Got&amp;a_f__true/param_1\n\nNot Allowed: http://localhost:9001/app/embed/external/517331346b7357374a4b415038305770743555636c30516d2532466f464b2532467944356b4c4c6a7666306f385a51253344/a_p__Got&amp;a_f__true?e=L90\n</code></pre>\n<p>So as per above example only URL which does not contain &quot;e&quot; parameter should be allowed and URL with &quot;e&quot; parameter should be rejected.</p>\n<p>Allowed link is accessed and interrupted by back-end.</p>\n<p>Not Allowed link is accessed by Front-end directly.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9725613,"reputation":53332,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"score":0,"creation_date":1676718326,"post_id":75492888,"comment_id":133196409,"body_markdown":"Maybe you could explain the problem ? Rather than posting your homework, your code and expect someone to fix it","body":"Maybe you could explain the problem ? Rather than posting your homework, your code and expect someone to fix it"},{"owner":{"account_id":3023214,"reputation":20361,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":0,"creation_date":1676718472,"post_id":75492888,"comment_id":133196428,"body_markdown":"An abstract method is a method without a method body. Yet, your abstract method has a body. This is invalid syntax, as the compiler surely has told you.","body":"An abstract method is a method without a method body. Yet, your abstract method has a body. This is invalid syntax, as the compiler surely has told you."},{"owner":{"account_id":26768049,"reputation":7,"user_id":20364883,"display_name":"Raduci"},"score":0,"creation_date":1676718736,"post_id":75492888,"comment_id":133196454,"body_markdown":"I removed the body from the abstract method and its still the same error, also i tried to override the method and it gives me another error :&quot;Method does not override method from its superclass&quot;","body":"I removed the body from the abstract method and its still the same error, also i tried to override the method and it gives me another error :&quot;Method does not override method from its superclass&quot;"}],"answers":[{"tags":[],"owner":{"account_id":9725613,"reputation":53332,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676718842,"creation_date":1676718842,"answer_id":75492950,"question_id":75492888,"body_markdown":"As the method is abstract, it shouldn&#39;t have a body **and** should be implemented in each instance : each season\r\n\r\n```java\r\nenum Season {\r\n    WINTER(-5.0) {\r\n        @Override\r\n        public void printMonths() {\r\n            System.out.println(&quot;December, January and February&quot;);\r\n        }\r\n    },\r\n    SPRING(15.0) {\r\n        @Override\r\n        public void printMonths() {\r\n            System.out.println(&quot;March, April and May&quot;);\r\n        }\r\n    },\r\n    SUMMER(25.0) {\r\n        @Override\r\n        public void printMonths() {\r\n            System.out.println(&quot;June, July and August&quot;);\r\n        }\r\n    },\r\n    FALL(10.0) {\r\n        @Override\r\n        public void printMonths() {\r\n            System.out.println(&quot;Septembre, October and November&quot;);\r\n        }\r\n    };\r\n\r\n    private final double averageTemperature;\r\n\r\n    Season(double averageTemperature) {\r\n        this.averageTemperature = averageTemperature;\r\n    }\r\n\r\n    public abstract void printMonths();\r\n\r\n    public double getAverageTemperature() {\r\n        return averageTemperature;\r\n    }\r\n\r\n    public void printInfo() {\r\n        System.out.println(&quot;Season: &quot; + this.name());\r\n        System.out.println(&quot;Average temperature: &quot; + this.getAverageTemperature() + &quot; degrees Celsius&quot;);\r\n        System.out.print(&quot;Months: &quot;);\r\n        this.printMonths();\r\n        System.out.println();\r\n    }\r\n}\r\n```\r\n\r\nThen use like\r\n\r\n    for (Season s : Season.values()) {\r\n        s.printInfo();\r\n    }\r\n\r\n&lt;!-- --&gt;\r\n\r\n    Season: WINTER\r\n    Average temperature: -5.0 degrees Celsius\r\n    Months: December, January and February\r\n    \r\n    Season: SPRING\r\n    Average temperature: 15.0 degrees Celsius\r\n    Months: March, April and May\r\n    \r\n    Season: SUMMER\r\n    Average temperature: 25.0 degrees Celsius\r\n    Months: June, July and August\r\n    \r\n    Season: FALL\r\n    Average temperature: 10.0 degrees Celsius\r\n    Months: Septembre, October and November\r\n\r\n","title":"Season is not abstract and does not override abstract method printMonths() in Season","body":"<p>As the method is abstract, it shouldn't have a body <strong>and</strong> should be implemented in each instance : each season</p>\n<pre class=\"lang-java prettyprint-override\"><code>enum Season {\n    WINTER(-5.0) {\n        @Override\n        public void printMonths() {\n            System.out.println(&quot;December, January and February&quot;);\n        }\n    },\n    SPRING(15.0) {\n        @Override\n        public void printMonths() {\n            System.out.println(&quot;March, April and May&quot;);\n        }\n    },\n    SUMMER(25.0) {\n        @Override\n        public void printMonths() {\n            System.out.println(&quot;June, July and August&quot;);\n        }\n    },\n    FALL(10.0) {\n        @Override\n        public void printMonths() {\n            System.out.println(&quot;Septembre, October and November&quot;);\n        }\n    };\n\n    private final double averageTemperature;\n\n    Season(double averageTemperature) {\n        this.averageTemperature = averageTemperature;\n    }\n\n    public abstract void printMonths();\n\n    public double getAverageTemperature() {\n        return averageTemperature;\n    }\n\n    public void printInfo() {\n        System.out.println(&quot;Season: &quot; + this.name());\n        System.out.println(&quot;Average temperature: &quot; + this.getAverageTemperature() + &quot; degrees Celsius&quot;);\n        System.out.print(&quot;Months: &quot;);\n        this.printMonths();\n        System.out.println();\n    }\n}\n</code></pre>\n<p>Then use like</p>\n<pre><code>for (Season s : Season.values()) {\n    s.printInfo();\n}\n</code></pre>\n\n<pre><code>Season: WINTER\nAverage temperature: -5.0 degrees Celsius\nMonths: December, January and February\n\nSeason: SPRING\nAverage temperature: 15.0 degrees Celsius\nMonths: March, April and May\n\nSeason: SUMMER\nAverage temperature: 25.0 degrees Celsius\nMonths: June, July and August\n\nSeason: FALL\nAverage temperature: 10.0 degrees Celsius\nMonths: Septembre, October and November\n</code></pre>\n"}],"owner":{"account_id":26768049,"reputation":7,"user_id":20364883,"display_name":"Raduci"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75492950,"answer_count":1,"score":0,"last_activity_date":1676718842,"creation_date":1676718238,"question_id":75492888,"body_markdown":"&quot;Write an enum named Season with 4 constants: WINTER, SPRING, SUMMER, FALL. It contains a final field named averageTemperature, initialized by a constructor and with a getter method. Additionally, it also contains an abstract method named printMonths() which will display the months in that respective season. Traverse all values of this enum and display the season, average temperature, and the months of that season.&quot;\r\n\r\n```\r\npublic enum Season {\r\n    WINTER(-5.0, new String[]{&quot;December&quot;, &quot;January&quot;, &quot;February&quot;}),\r\n    SPRING(15.0, new String[]{&quot;March&quot;, &quot;April&quot;, &quot;May&quot;}),\r\n    SUMMER(25.0, new String[]{&quot;June&quot;, &quot;July&quot;, &quot;August&quot;}),\r\n    FALL(10.0, new String[]{&quot;September&quot;, &quot;October&quot;, &quot;November&quot;});\r\n    @Override\r\n    public abstract void printMonths(){\r\n        this.months = months;\r\n        this.averageTemperature = averageTemperature;\r\n    };\r\n    private final double averageTemperature;\r\n    private final String[] months;\r\n\r\n    Season(double averageTemperature, String[] months) {\r\n        this.averageTemperature = averageTemperature;\r\n        this.months = months;\r\n    }\r\n\r\n    public double getAverageTemperature() {\r\n\r\n        return averageTemperature;\r\n    }\r\n\r\n    public void printInfo() {\r\n        System.out.println(&quot;Season: &quot; + this.name());\r\n        System.out.println(&quot;Average temperature: &quot; + this.getAverageTemperature() + &quot; degrees Celsius&quot;);\r\n        System.out.print(&quot;Months: &quot;);\r\n        this.printMonths();\r\n        System.out.println();\r\n    }\r\n}\r\n```\r\n","title":"Season is not abstract and does not override abstract method printMonths() in Season","body":"<p>&quot;Write an enum named Season with 4 constants: WINTER, SPRING, SUMMER, FALL. It contains a final field named averageTemperature, initialized by a constructor and with a getter method. Additionally, it also contains an abstract method named printMonths() which will display the months in that respective season. Traverse all values of this enum and display the season, average temperature, and the months of that season.&quot;</p>\n<pre><code>public enum Season {\n    WINTER(-5.0, new String[]{&quot;December&quot;, &quot;January&quot;, &quot;February&quot;}),\n    SPRING(15.0, new String[]{&quot;March&quot;, &quot;April&quot;, &quot;May&quot;}),\n    SUMMER(25.0, new String[]{&quot;June&quot;, &quot;July&quot;, &quot;August&quot;}),\n    FALL(10.0, new String[]{&quot;September&quot;, &quot;October&quot;, &quot;November&quot;});\n    @Override\n    public abstract void printMonths(){\n        this.months = months;\n        this.averageTemperature = averageTemperature;\n    };\n    private final double averageTemperature;\n    private final String[] months;\n\n    Season(double averageTemperature, String[] months) {\n        this.averageTemperature = averageTemperature;\n        this.months = months;\n    }\n\n    public double getAverageTemperature() {\n\n        return averageTemperature;\n    }\n\n    public void printInfo() {\n        System.out.println(&quot;Season: &quot; + this.name());\n        System.out.println(&quot;Average temperature: &quot; + this.getAverageTemperature() + &quot; degrees Celsius&quot;);\n        System.out.print(&quot;Months: &quot;);\n        this.printMonths();\n        System.out.println();\n    }\n}\n</code></pre>\n"},{"tags":["java","android","flutter","kotlin","kotlin-coroutines"],"comments":[{"owner":{"account_id":21390158,"reputation":801,"user_id":15754377,"display_name":"Vivek Gupta"},"score":1,"creation_date":1676663215,"post_id":75488620,"comment_id":133189855,"body_markdown":"Global Scopes are never intended to return any result. They are like fire and forget. Use withContext to return values but dont forget to make fun a suspend fun.","body":"Global Scopes are never intended to return any result. They are like fire and forget. Use withContext to return values but dont forget to make fun a suspend fun."},{"owner":{"account_id":238127,"reputation":86172,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1676664453,"post_id":75488620,"comment_id":133190202,"body_markdown":"I don’t know Flutter, but you need to find a way to get the result asynchronously instead of synchronously, such as using a callback. Or this function at least needs to be called from a thread other than the UI thread, in which case you could safely use `runBlocking` instead of `GlobalScope.launch`.","body":"I don’t know Flutter, but you need to find a way to get the result asynchronously instead of synchronously, such as using a callback. Or this function at least needs to be called from a thread other than the UI thread, in which case you could safely use <code>runBlocking</code> instead of <code>GlobalScope.launch</code>."},{"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"score":0,"creation_date":1676665853,"post_id":75488620,"comment_id":133190511,"body_markdown":"@VivekGupta I don&#39;t think `GlobalScope` has anything to do with returning or not returning. Use `GlobalScope.async()` and it is no longer a fire and forget, you can get the result. Use `myOwnScope.launch()` and do not store the resulting `Job` and this is a fire and (almost) forget.","body":"@VivekGupta I don&#39;t think <code>GlobalScope</code> has anything to do with returning or not returning. Use <code>GlobalScope.async()</code> and it is no longer a fire and forget, you can get the result. Use <code>myOwnScope.launch()</code> and do not store the resulting <code>Job</code> and this is a fire and (almost) forget."},{"owner":{"account_id":21390158,"reputation":801,"user_id":15754377,"display_name":"Vivek Gupta"},"score":0,"creation_date":1676790933,"post_id":75488620,"comment_id":133205884,"body_markdown":"@broot yes it should be lauch instead of Global scope","body":"@broot yes it should be lauch instead of Global scope"},{"owner":{"account_id":21390158,"reputation":801,"user_id":15754377,"display_name":"Vivek Gupta"},"score":3,"creation_date":1676791145,"post_id":75488620,"comment_id":133205902,"body_markdown":"@fetFrumos see this answer of how to call suspend function from java code bade https://stackoverflow.com/a/52887677/15754377","body":"@fetFrumos see this answer of how to call suspend function from java code bade <a href=\"https://stackoverflow.com/a/52887677/15754377\">stackoverflow.com/a/52887677/15754377</a>"}],"owner":{"account_id":315939,"reputation":5464,"user_id":631843,"accept_rate":65,"display_name":"FetFrumos"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":291,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676718798,"creation_date":1676662943,"question_id":75488620,"body_markdown":"I&#39;m writing an app on Flutter, but I use platform-dependent code on Kotlin (android) and Java. This is my code:\r\n\r\n\r\n      suspend fun check() : Boolean = withContext(Dispatchers.IO) \r\n      {\r\n         //some network logic\r\n         //init time value\r\n         return@withContext time != -1L;\r\n       }\r\n\r\nnext i need to call this function in java code but i don&#39;t know how to do it.  I tried it, but I have error :\r\n\r\n      if(call.method.equals(&quot;check&quot;)){   \r\n         //issue in this line - check()                            \r\n         final state = ServiceManager.INSTANCE.check();\r\n         result.success(state);\r\n      }      \r\n\r\nI&#39;m new to Kotlin, how do I return the value from withContext(Dispatchers.IO) and using it in Java code?\r\n\r\nI will be very grateful\r\n\r\n","title":"Kotlin - how return value from withContext to java code?","body":"<p>I'm writing an app on Flutter, but I use platform-dependent code on Kotlin (android) and Java. This is my code:</p>\n<pre><code>  suspend fun check() : Boolean = withContext(Dispatchers.IO) \n  {\n     //some network logic\n     //init time value\n     return@withContext time != -1L;\n   }\n</code></pre>\n<p>next i need to call this function in java code but i don't know how to do it.  I tried it, but I have error :</p>\n<pre><code>  if(call.method.equals(&quot;check&quot;)){   \n     //issue in this line - check()                            \n     final state = ServiceManager.INSTANCE.check();\n     result.success(state);\n  }      \n</code></pre>\n<p>I'm new to Kotlin, how do I return the value from withContext(Dispatchers.IO) and using it in Java code?</p>\n<p>I will be very grateful</p>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1676636760,"post_id":75484100,"comment_id":133182060,"body_markdown":"Note that the duplicate contains *both* Java 9+ answers and answers for previous versions.","body":"Note that the duplicate contains <i>both</i> Java 9+ answers and answers for previous versions."},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1676638104,"post_id":75484100,"comment_id":133182453,"body_markdown":"For example, [this one](https://stackoverflow.com/a/53388438/507738) is for Java 8.","body":"For example, <a href=\"https://stackoverflow.com/a/53388438/507738\">this one</a> is for Java 8."}],"owner":{"account_id":20195407,"reputation":21,"user_id":14830185,"display_name":"Vitalij Victor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1676636069,"answer_count":0,"score":0,"last_activity_date":1676718372,"creation_date":1676635811,"question_id":75484100,"body_markdown":"Unfortunately I am limited to Java 8 in my application and cannot use newer versions. I can&#39;t find any documentation on how to move a file to the recycle bin in Java 8.\r\n\r\nI know about \r\n```\r\ndesktop.moveToTrash(srcFile);\r\n``` \r\nbut this is not for Java 8.","title":"desktop.moveToTrash(srcFile); not for Java 8","body":"<p>Unfortunately I am limited to Java 8 in my application and cannot use newer versions. I can't find any documentation on how to move a file to the recycle bin in Java 8.</p>\n<p>I know about</p>\n<pre><code>desktop.moveToTrash(srcFile);\n</code></pre>\n<p>but this is not for Java 8.</p>\n"},{"tags":["java","design-patterns","information-hiding"],"comments":[{"owner":{"account_id":2825991,"reputation":2000,"user_id":2428631,"display_name":"McPringle"},"score":1,"creation_date":1676720123,"post_id":75492883,"comment_id":133196629,"body_markdown":"You should take a look at the *Java Module System* introduced with Java 9.","body":"You should take a look at the <i>Java Module System</i> introduced with Java 9."}],"owner":{"account_id":17087029,"reputation":67,"user_id":12363996,"display_name":"David O&#39;Loughlin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1676718189,"creation_date":1676718189,"question_id":75492883,"body_markdown":"The pattern I&#39;m aiming for is to put all the classes that I want clients to use - like model objects, interfaces and factories - in a &quot;client&quot; package and put the private implementation in an impl package that is inaccessible to clients.\r\n\r\nI only want clients to access my API using interfaces and I want to prevent them from instantiating private implementation classes directly.\r\n\r\nWhat follows is a simple example. It works but am wondering if there&#39;s a better way - I&#39;d imagine that this is a commonly used pattern?\r\n\r\n```\r\npackage client;\r\n\r\npublic interface Plant {\r\n    String getScientificName();\r\n\r\n    String getCommonName();\r\n}\r\n\r\npackage client;\r\n\r\nimport impl.PlantImpl;\r\n\r\nimport java.util.function.BiFunction;\r\n\r\npublic final class PlantFactory {\r\n    private BiFunction&lt;String, String, Plant&gt; delegate;\r\n\r\n    public PlantFactory() {\r\n        PlantImpl.registerFactory(this);\r\n    }\r\n\r\n    public void setFactory(BiFunction&lt;String, String, Plant&gt; factory) {\r\n        delegate = factory;\r\n    }\r\n\r\n    public Plant newInstance(String scientificName, String commonName) {\r\n        return delegate.apply(scientificName, commonName);\r\n    }\r\n}\r\n\r\npackage impl;\r\n\r\nimport client.Plant;\r\nimport client.PlantFactory;\r\n\r\nimport java.util.function.BiFunction;\r\n\r\npublic final class PlantImpl implements Plant {\r\n\r\n    private final String scientificName;\r\n    private final String commonName;\r\n\r\n    private PlantImpl(String scientificName, String commonName) {\r\n        this.scientificName = scientificName;\r\n        this.commonName = commonName;\r\n    }\r\n\r\n    @Override\r\n    public String getScientificName() {\r\n        return scientificName;\r\n    }\r\n\r\n    @Override\r\n    public String getCommonName() {\r\n        return commonName;\r\n    }\r\n\r\n    public static void registerFactory(PlantFactory plantFactory) {\r\n        plantFactory.setFactory(new Factory());\r\n    }\r\n\r\n    static class Factory implements BiFunction&lt;String, String, Plant&gt; {\r\n\r\n        @Override\r\n        public Plant apply(String scientificName, String commonName) {\r\n            return new PlantImpl(scientificName, commonName);\r\n        }\r\n    }\r\n}\r\n\r\nimport client.Plant;\r\nimport client.PlantFactory;\r\n\r\npublic final class PlantViewer {\r\n\r\n    public static void main(String[] args) {\r\n        // Doesn&#39;t compile due to private constructor\r\n        // Plant wattle = new PlantImpl(&quot;Acacia longifolia&quot;, &quot;Sydney Golden Wattle&quot;);\r\n\r\n        PlantFactory plantFactory = new PlantFactory();\r\n        Plant grevillea = plantFactory.newInstance(&quot;Grevillea caleyi&quot;, &quot;Caley&#39;s Grevillea&quot;);\r\n        System.out.println(&quot;Plant name is &quot; + grevillea.getCommonName());\r\n    }\r\n}\r\n```\r\n","title":"Limit instance construction to an external factory","body":"<p>The pattern I'm aiming for is to put all the classes that I want clients to use - like model objects, interfaces and factories - in a &quot;client&quot; package and put the private implementation in an impl package that is inaccessible to clients.</p>\n<p>I only want clients to access my API using interfaces and I want to prevent them from instantiating private implementation classes directly.</p>\n<p>What follows is a simple example. It works but am wondering if there's a better way - I'd imagine that this is a commonly used pattern?</p>\n<pre><code>package client;\n\npublic interface Plant {\n    String getScientificName();\n\n    String getCommonName();\n}\n\npackage client;\n\nimport impl.PlantImpl;\n\nimport java.util.function.BiFunction;\n\npublic final class PlantFactory {\n    private BiFunction&lt;String, String, Plant&gt; delegate;\n\n    public PlantFactory() {\n        PlantImpl.registerFactory(this);\n    }\n\n    public void setFactory(BiFunction&lt;String, String, Plant&gt; factory) {\n        delegate = factory;\n    }\n\n    public Plant newInstance(String scientificName, String commonName) {\n        return delegate.apply(scientificName, commonName);\n    }\n}\n\npackage impl;\n\nimport client.Plant;\nimport client.PlantFactory;\n\nimport java.util.function.BiFunction;\n\npublic final class PlantImpl implements Plant {\n\n    private final String scientificName;\n    private final String commonName;\n\n    private PlantImpl(String scientificName, String commonName) {\n        this.scientificName = scientificName;\n        this.commonName = commonName;\n    }\n\n    @Override\n    public String getScientificName() {\n        return scientificName;\n    }\n\n    @Override\n    public String getCommonName() {\n        return commonName;\n    }\n\n    public static void registerFactory(PlantFactory plantFactory) {\n        plantFactory.setFactory(new Factory());\n    }\n\n    static class Factory implements BiFunction&lt;String, String, Plant&gt; {\n\n        @Override\n        public Plant apply(String scientificName, String commonName) {\n            return new PlantImpl(scientificName, commonName);\n        }\n    }\n}\n\nimport client.Plant;\nimport client.PlantFactory;\n\npublic final class PlantViewer {\n\n    public static void main(String[] args) {\n        // Doesn't compile due to private constructor\n        // Plant wattle = new PlantImpl(&quot;Acacia longifolia&quot;, &quot;Sydney Golden Wattle&quot;);\n\n        PlantFactory plantFactory = new PlantFactory();\n        Plant grevillea = plantFactory.newInstance(&quot;Grevillea caleyi&quot;, &quot;Caley's Grevillea&quot;);\n        System.out.println(&quot;Plant name is &quot; + grevillea.getCommonName());\n    }\n}\n</code></pre>\n"},{"tags":["java","inheritance","interface","java-8","abstract"],"comments":[{"owner":{"account_id":8995972,"reputation":1638,"user_id":6706381,"display_name":"Asanka"},"score":0,"creation_date":1538548655,"post_id":52620936,"comment_id":92175789,"body_markdown":":) i am asking it is not allowed to implement to 2 inherit 2 abstract classes. but allowed implement interface with default methods.  If it allowed to this, it  should also allowed to multiple inheritance.","body":":) i am asking it is not allowed to implement to 2 inherit 2 abstract classes. but allowed implement interface with default methods.  If it allowed to this, it  should also allowed to multiple inheritance."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":3,"creation_date":1538548907,"post_id":52620936,"comment_id":92175914,"body_markdown":"yes, but you are asking it to a community that can only guess for the motives of those who implemented it. Why is it allowed? because someone at Oracle decided so. Though I haven&#39;t used default methods (yet), I understood there &#39;s somewhat an order in which method to use if there are several ones, but I&#39;m not sure which one gets favoured.","body":"yes, but you are asking it to a community that can only guess for the motives of those who implemented it. Why is it allowed? because someone at Oracle decided so. Though I haven&#39;t used default methods (yet), I understood there &#39;s somewhat an order in which method to use if there are several ones, but I&#39;m not sure which one gets favoured."},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":1,"creation_date":1538549450,"post_id":52620936,"comment_id":92176188,"body_markdown":"You should make your question clearer. You&#39;re asking twice (in the title and the body) &quot;why java not allowed to multiple inheritance but allowed to implemented to interfaces which are already implemented?&quot; - and the duplicate that you mention yourself is a duplicate of that. Somehow you manage to mention default methods but it&#39;s unclear what your question is. Also, your comments are not part of your question - if you feel your comment clarifies your question, edit it **into** your question please.","body":"You should make your question clearer. You&#39;re asking twice (in the title and the body) &quot;why java not allowed to multiple inheritance but allowed to implemented to interfaces which are already implemented?&quot; - and the duplicate that you mention yourself is a duplicate of that. Somehow you manage to mention default methods but it&#39;s unclear what your question is. Also, your comments are not part of your question - if you feel your comment clarifies your question, edit it <b>into</b> your question please."},{"owner":{"account_id":8995972,"reputation":1638,"user_id":6706381,"display_name":"Asanka"},"score":0,"creation_date":1538549704,"post_id":52620936,"comment_id":92176316,"body_markdown":"ok, i&#39;ll edit it. :)","body":"ok, i&#39;ll edit it. :)"},{"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"score":2,"creation_date":1538574241,"post_id":52620936,"comment_id":92190382,"body_markdown":"@Asanka With multiple inheritance you will also have problem with inherited fields and that&#39;s a bigger problem.","body":"@Asanka With multiple inheritance you will also have problem with inherited fields and that&#39;s a bigger problem."},{"owner":{"account_id":232826,"reputation":24369,"user_id":497934,"accept_rate":100,"display_name":"Maxpm"},"score":0,"creation_date":1538598037,"post_id":52620936,"comment_id":92203400,"body_markdown":"@Stultuske One would hope that Oracle isn&#39;t *totally* divorced from the needs of Java programmers.  Language changes aren&#39;t just made on the whims of mercurial designers; they are responses to pressures from the community, and to perceived deficiencies that are only manifested by the community bumping into them.  So, even though the community can&#39;t read minds, it can do more than just &quot;guess.&quot;  There&#39;s a historical context to everything, and you don&#39;t necessarily need to work at Oracle to see it.","body":"@Stultuske One would hope that Oracle isn&#39;t <i>totally</i> divorced from the needs of Java programmers.  Language changes aren&#39;t just made on the whims of mercurial designers; they are responses to pressures from the community, and to perceived deficiencies that are only manifested by the community bumping into them.  So, even though the community can&#39;t read minds, it can do more than just &quot;guess.&quot;  There&#39;s a historical context to everything, and you don&#39;t necessarily need to work at Oracle to see it."},{"owner":{"account_id":8995972,"reputation":1638,"user_id":6706381,"display_name":"Asanka"},"score":0,"creation_date":1538626388,"post_id":52620936,"comment_id":92210392,"body_markdown":"can anyone tell what is unclear in this question. why do put on hold?","body":"can anyone tell what is unclear in this question. why do put on hold?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1538632312,"post_id":52620936,"comment_id":92212066,"body_markdown":"@Maxpm partly, yes, then again, I don&#39;t know many Java developers who are thrilled about, let alone asking party for the introduction of modular concepts. They indeed respond to the [current] needs (or let us at least hope they do), but it is them who decide yes or no. Multiple Inheritance would work with some changes to the language, yet they decide not to allow this. After all, if they can implement an &#39;order&#39; for default methods, they could for inherited methods as well. The questionis: why the default methods but not multiple inheritance, and that choice is purely with Oracle atm","body":"@Maxpm partly, yes, then again, I don&#39;t know many Java developers who are thrilled about, let alone asking party for the introduction of modular concepts. They indeed respond to the [current] needs (or let us at least hope they do), but it is them who decide yes or no. Multiple Inheritance would work with some changes to the language, yet they decide not to allow this. After all, if they can implement an &#39;order&#39; for default methods, they could for inherited methods as well. The questionis: why the default methods but not multiple inheritance, and that choice is purely with Oracle atm"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1538639868,"post_id":52620936,"comment_id":92215795,"body_markdown":"Perhaps [this one](https://stackoverflow.com/a/41259925/2711488) helps…","body":"Perhaps <a href=\"https://stackoverflow.com/a/41259925/2711488\">this one</a> helps…"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1538679018,"post_id":52620936,"comment_id":92238160,"body_markdown":"@Eugene I have seen too many good answers without an accept. And I think all the top answers here are worth accepting ;-)","body":"@Eugene I have seen too many good answers without an accept. And I think all the top answers here are worth accepting ;-)"}],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1538549060,"creation_date":1538549060,"answer_id":52621156,"question_id":52620936,"body_markdown":"Java doesn&#39;t allow multiple inheritance for fields. This would be difficult to support in the JVM as you can only have references to the start of an object where the header is, not arbitrary memory locations.\n\nIn Oracle/Openjdk, objects have a header followed by the fields of the most super class, then the next most super class, etc. It would be a significant change to allow the fields of a class to appear at different offsets relative to the header of an object for different subclasses. Most likely object references would have to become a reference to the object header and a reference to the fields to support this.\n","title":"Why does Java not allow multiple inheritance but does allow conforming to multiple interfaces with default implementations","body":"<p>Java doesn't allow multiple inheritance for fields. This would be difficult to support in the JVM as you can only have references to the start of an object where the header is, not arbitrary memory locations.</p>\n\n<p>In Oracle/Openjdk, objects have a header followed by the fields of the most super class, then the next most super class, etc. It would be a significant change to allow the fields of a class to appear at different offsets relative to the header of an object for different subclasses. Most likely object references would have to become a reference to the object header and a reference to the fields to support this.</p>\n"},{"comments":[{"owner":{"account_id":13951057,"reputation":409,"user_id":10074551,"display_name":"UbuntuCore"},"score":0,"creation_date":1538560147,"post_id":52621193,"comment_id":92181858,"body_markdown":"``how to inherit multiple fields? `` what&#39;s the problem? You&#39;re just using the instance&#39;s one. But if you wanted to use ``A .foo`` from ``B`` then first tests should show that there&#39;s something wrong.","body":"<code>how to inherit multiple fields? </code> what&#39;s the problem? You&#39;re just using the instance&#39;s one. But if you wanted to use <code>A .foo</code> from <code>B</code> then first tests should show that there&#39;s something wrong."},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":3,"creation_date":1538561803,"post_id":52621193,"comment_id":92182841,"body_markdown":"@UbuntuCore it is possible to disambiguate these things, for example by issuing an error and forcing the programmer to explicitly choose one of them, or (much worse) to define some implicit rule which one to pick, but it leads to tricky issues in the classic diamond case. It is very easy to get confused and make the wrong choice with such a construct. One aim of language design is to make wrong code look wrong, and multiple inheritance (if not extremely carefully designed) makes it easy to write correct-looking code which is wrong.","body":"@UbuntuCore it is possible to disambiguate these things, for example by issuing an error and forcing the programmer to explicitly choose one of them, or (much worse) to define some implicit rule which one to pick, but it leads to tricky issues in the classic diamond case. It is very easy to get confused and make the wrong choice with such a construct. One aim of language design is to make wrong code look wrong, and multiple inheritance (if not extremely carefully designed) makes it easy to write correct-looking code which is wrong."}],"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"comment_count":2,"down_vote_count":0,"up_vote_count":43,"is_accepted":true,"score":43,"last_activity_date":1561059074,"creation_date":1538549218,"answer_id":52621193,"question_id":52620936,"body_markdown":"Things are not so simple.  \r\nIf a class implements multiple interfaces that defines default methods with the same signature the compiler will force you to override this method for the class.   \r\n\r\n\r\nFor example with these two interfaces : \r\n\r\n\r\n    public interface Foo {\r\n    \tdefault void doThat() {\r\n    \t\t// ...\r\n    \t}\r\n    }\r\n    \r\n    public interface Bar {    \r\n    \tdefault void doThat() {\r\n    \t\t// ...\r\n    \t}    \t\r\n    }\r\n\r\nIt will not compile : \r\n\r\n    public class FooBar implements Foo, Bar{\r\n    }\r\n\r\nYou should define/override the method to remove the ambiguity.   \r\nYou could for example delegate to the `Bar` implementation such as : \r\n\r\n    public class FooBar implements Foo, Bar{    \r\n    \t@Override\r\n    \tpublic void doThat() {\r\n    \t\tBar.super.doThat();\r\n    \t}    \r\n    }\r\n\r\nor  delegate to the `Foo` implementation such as : : \r\n\r\n    public class FooBar implements Foo, Bar {\r\n    \t@Override\r\n    \tpublic void doThat() {\r\n    \t\tFoo.super.doThat();\r\n    \t}\r\n    }\r\n\r\nor still define another behavior : \r\n\r\n    public class FooBar implements Foo, Bar {\r\n    \t@Override\r\n    \tpublic void doThat() {\r\n    \t\t// ... \r\n    \t}\r\n    }\r\n\r\nThat constraint shows that Java doesn&#39;t allow multiple inheritancy even for interface default methods.   \r\n\r\n\r\n----------\r\n\r\n\r\nI think that we cannot apply the same logic for multiple inheritances because multiples issues could occur which the main are : \r\n\r\n- overriding/removing the ambiguity for a method in both inherited classes could introduce side effects and change the overall behavior of the inherited classes if they rely on this method internally.  With default interfaces this risk is also around but it should be much less rare since default methods are not designed to introduce complex processings such as multiple internal invocations inside the class or to be stateful (indeed interfaces cannot host instance field).    \r\n- how to inherit multiple fields ?  And even if the language allowed it you would have exactly the same issue as this previously quoted : side effect in the behavior of the inherited class : a `int foo` field defined in a `A` and `B` class that you want to subclass doesn&#39;t have the same meaning and intention.\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Why does Java not allow multiple inheritance but does allow conforming to multiple interfaces with default implementations","body":"<p>Things are not so simple.<br>\nIf a class implements multiple interfaces that defines default methods with the same signature the compiler will force you to override this method for the class.   </p>\n\n<p>For example with these two interfaces : </p>\n\n<pre><code>public interface Foo {\n    default void doThat() {\n        // ...\n    }\n}\n\npublic interface Bar {    \n    default void doThat() {\n        // ...\n    }       \n}\n</code></pre>\n\n<p>It will not compile : </p>\n\n<pre><code>public class FooBar implements Foo, Bar{\n}\n</code></pre>\n\n<p>You should define/override the method to remove the ambiguity.<br>\nYou could for example delegate to the <code>Bar</code> implementation such as : </p>\n\n<pre><code>public class FooBar implements Foo, Bar{    \n    @Override\n    public void doThat() {\n        Bar.super.doThat();\n    }    \n}\n</code></pre>\n\n<p>or  delegate to the <code>Foo</code> implementation such as : : </p>\n\n<pre><code>public class FooBar implements Foo, Bar {\n    @Override\n    public void doThat() {\n        Foo.super.doThat();\n    }\n}\n</code></pre>\n\n<p>or still define another behavior : </p>\n\n<pre><code>public class FooBar implements Foo, Bar {\n    @Override\n    public void doThat() {\n        // ... \n    }\n}\n</code></pre>\n\n<p>That constraint shows that Java doesn't allow multiple inheritancy even for interface default methods.   </p>\n\n<hr>\n\n<p>I think that we cannot apply the same logic for multiple inheritances because multiples issues could occur which the main are : </p>\n\n<ul>\n<li>overriding/removing the ambiguity for a method in both inherited classes could introduce side effects and change the overall behavior of the inherited classes if they rely on this method internally.  With default interfaces this risk is also around but it should be much less rare since default methods are not designed to introduce complex processings such as multiple internal invocations inside the class or to be stateful (indeed interfaces cannot host instance field).    </li>\n<li>how to inherit multiple fields ?  And even if the language allowed it you would have exactly the same issue as this previously quoted : side effect in the behavior of the inherited class : a <code>int foo</code> field defined in a <code>A</code> and <code>B</code> class that you want to subclass doesn't have the same meaning and intention.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":13752363,"reputation":552,"user_id":9924134,"display_name":"Mershel"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1538549349,"creation_date":1538549349,"answer_id":52621220,"question_id":52620936,"body_markdown":"That is mostly related to &quot;diamonds problem&quot; i think. Right now if you implement multiple interfaces with the same method, compiler forces you to override method the one you want to implement, because it don&#39;t know which on to use. I guess Java creators wanted to remove this problem back when interfaces couldn&#39;t use default methods. Now they came up with idea, that is good to be able to have methods with implementation in interfaces, as you can still use those as functional interfaces in streams / lambda expressions and utilize their default methods in processing. You cannot do that with classes but diamond problem still exist there. That is my guess :)","title":"Why does Java not allow multiple inheritance but does allow conforming to multiple interfaces with default implementations","body":"<p>That is mostly related to \"diamonds problem\" i think. Right now if you implement multiple interfaces with the same method, compiler forces you to override method the one you want to implement, because it don't know which on to use. I guess Java creators wanted to remove this problem back when interfaces couldn't use default methods. Now they came up with idea, that is good to be able to have methods with implementation in interfaces, as you can still use those as functional interfaces in streams / lambda expressions and utilize their default methods in processing. You cannot do that with classes but diamond problem still exist there. That is my guess :)</p>\n"},{"tags":[],"owner":{"account_id":5648618,"reputation":3627,"user_id":4469944,"accept_rate":50,"display_name":"S.K."},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1538549475,"creation_date":1538549475,"answer_id":52621255,"question_id":52620936,"body_markdown":"`default` methods in interfaces pose a problem that :\r\n\r\n&gt; If both of the implemented interfaces define a default method with\r\n&gt; same method signature, then the implementation class does not know\r\n&gt; which default method to use.\r\n\r\nThe implementation class should define explicitly specify which default method to use or define it&#39;s own one. \r\n\r\nThus `default` methods in Java-8 do not facilitate multiple inheritance. The main motivation behind default methods is that if at some point we need to add a method to an existing interface, we can add a method without changing the existing implementation classes. In this way, the interface is still compatible with older versions. However, we should remember the motivation of using Default Methods and should keep the separation of interface and implementation.\r\n\r\n","title":"Why does Java not allow multiple inheritance but does allow conforming to multiple interfaces with default implementations","body":"<p><code>default</code> methods in interfaces pose a problem that :</p>\n\n<blockquote>\n  <p>If both of the implemented interfaces define a default method with\n  same method signature, then the implementation class does not know\n  which default method to use.</p>\n</blockquote>\n\n<p>The implementation class should define explicitly specify which default method to use or define it's own one. </p>\n\n<p>Thus <code>default</code> methods in Java-8 do not facilitate multiple inheritance. The main motivation behind default methods is that if at some point we need to add a method to an existing interface, we can add a method without changing the existing implementation classes. In this way, the interface is still compatible with older versions. However, we should remember the motivation of using Default Methods and should keep the separation of interface and implementation.</p>\n"},{"tags":[],"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"comment_count":0,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1538557674,"creation_date":1538557674,"answer_id":52623486,"question_id":52620936,"body_markdown":"The language designers already thought about that, so these things are enforced by the compiler. So if you define:\r\n\r\n\r\n    interface First {\r\n        default void go() {\r\n        }\r\n    }\r\n\r\n    interface Second {\r\n        default void go() {\r\n        }\r\n    }\r\n\r\nAnd you implement a class for both interfaces:\r\n\r\n\r\n    static class Impl implements First, Second {\r\n\r\n    }\r\n\r\nyou will get a compilation error; and you would need to override `go` to not create the ambiguity around it. \r\n\r\nBut you could be thinking that you can trick the compiler here, by doing:\r\n\r\n    interface First {\r\n        public default void go() {\r\n        }\r\n    }\r\n\r\n    static abstract class Second {\r\n        abstract void go();\r\n    }\r\n\r\n    static class Impl extends Second implements First {\r\n    }\r\n\r\nYou could think that `First::go` already provides an implementation for `Second::go` and it should be fine. This is too taken care of, thus this does not compile either.\r\n\r\n\r\n&gt; JLS 9.4.1.3 : Similarly, when an abstract and a default method with matching signatures are inherited, **we produce an error**. In this case, it would be possible to give priority to one or the other - perhaps we would assume that the default method provides a reasonable implementation for the abstract method, too. But this is risky, since other than the coincidental name and signature, we have no reason to believe that the default method behaves consistently with the abstract method&#39;s contract - **the default method may not have even existed when the subinterface was originally developed**. It is safer in this situation to ask the user to actively assert that the default implementation is appropriate (via an overriding declaration).\r\n\r\n\r\nThe last point I would bring in, to solidify that multiple inheritance is not allowed even with new additions in java, is that static methods from interfaces are not inherited. static methods *are inherited* by default:\r\n\r\n\r\n    static class Bug {\r\n        static void printIt() {\r\n            System.out.println(&quot;Bug...&quot;);\r\n        }\r\n    }\r\n\r\n    static class Spectre extends Bug {\r\n        static void test() {\r\n            printIt(); // this will work just fine\r\n        }\r\n    }\r\n\r\nBut if we change that for an interface (and you can implement multiple interfaces, unlike classes):\r\n\r\n\r\n    interface Bug {\r\n        static void printIt() {\r\n            System.out.println(&quot;Bug...&quot;);\r\n        }\r\n    }\r\n\r\n    static class Spectre implements Bug {\r\n        static void test() {\r\n            printIt(); // this will not compile\r\n        }\r\n    }\r\n\r\nNow, this is prohibited by the compiler and `JLS` too:\r\n\r\n&gt; JLS 8.4.8 : A class&#160;does not inherit static methods&#160;from its superinterfaces.\r\n\r\n\r\n\r\n","title":"Why does Java not allow multiple inheritance but does allow conforming to multiple interfaces with default implementations","body":"<p>The language designers already thought about that, so these things are enforced by the compiler. So if you define:</p>\n\n<pre><code>interface First {\n    default void go() {\n    }\n}\n\ninterface Second {\n    default void go() {\n    }\n}\n</code></pre>\n\n<p>And you implement a class for both interfaces:</p>\n\n<pre><code>static class Impl implements First, Second {\n\n}\n</code></pre>\n\n<p>you will get a compilation error; and you would need to override <code>go</code> to not create the ambiguity around it. </p>\n\n<p>But you could be thinking that you can trick the compiler here, by doing:</p>\n\n<pre><code>interface First {\n    public default void go() {\n    }\n}\n\nstatic abstract class Second {\n    abstract void go();\n}\n\nstatic class Impl extends Second implements First {\n}\n</code></pre>\n\n<p>You could think that <code>First::go</code> already provides an implementation for <code>Second::go</code> and it should be fine. This is too taken care of, thus this does not compile either.</p>\n\n<blockquote>\n  <p>JLS 9.4.1.3 : Similarly, when an abstract and a default method with matching signatures are inherited, <strong>we produce an error</strong>. In this case, it would be possible to give priority to one or the other - perhaps we would assume that the default method provides a reasonable implementation for the abstract method, too. But this is risky, since other than the coincidental name and signature, we have no reason to believe that the default method behaves consistently with the abstract method's contract - <strong>the default method may not have even existed when the subinterface was originally developed</strong>. It is safer in this situation to ask the user to actively assert that the default implementation is appropriate (via an overriding declaration).</p>\n</blockquote>\n\n<p>The last point I would bring in, to solidify that multiple inheritance is not allowed even with new additions in java, is that static methods from interfaces are not inherited. static methods <em>are inherited</em> by default:</p>\n\n<pre><code>static class Bug {\n    static void printIt() {\n        System.out.println(\"Bug...\");\n    }\n}\n\nstatic class Spectre extends Bug {\n    static void test() {\n        printIt(); // this will work just fine\n    }\n}\n</code></pre>\n\n<p>But if we change that for an interface (and you can implement multiple interfaces, unlike classes):</p>\n\n<pre><code>interface Bug {\n    static void printIt() {\n        System.out.println(\"Bug...\");\n    }\n}\n\nstatic class Spectre implements Bug {\n    static void test() {\n        printIt(); // this will not compile\n    }\n}\n</code></pre>\n\n<p>Now, this is prohibited by the compiler and <code>JLS</code> too:</p>\n\n<blockquote>\n  <p>JLS 8.4.8 : A class does not inherit static methods from its superinterfaces.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":523757,"reputation":60391,"user_id":3141234,"accept_rate":76,"display_name":"Alexander"},"score":0,"creation_date":1538586441,"post_id":52631780,"comment_id":92197796,"body_markdown":"Interesting, although I&#39;m proficient with Swift, I have no idea how it solves these issues. It allows interfaces to declare getters, setters, constructors, static/class methods, and instance methods.","body":"Interesting, although I&#39;m proficient with Swift, I have no idea how it solves these issues. It allows interfaces to declare getters, setters, constructors, static/class methods, and instance methods."}],"tags":[],"owner":{"account_id":188605,"reputation":5059,"user_id":427413,"accept_rate":71,"display_name":"marcus"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1673286865,"creation_date":1538584406,"answer_id":52631780,"question_id":52620936,"body_markdown":"The main issues with multiple inheritance are **ordering** (for overriding and calls to *super*), **fields** and **constructors**; interfaces don&#39;t have fields or constructors, so they don&#39;t cause problems. \r\n\r\nIf you look at other languages they usually fall in two broad categories:\r\n\r\n1. Languages with multiple inheritance plus a few features to disambiguate special cases: virtual inheritance [C++], direct calls to all superconstructors in the most-derived class [C++], linearization of superclasses [Python], complex rules for *super* [Python], etc.\r\n\r\n2. Languages with a differente concept, usually called *interfaces*, *traits*, *mixins*, *modules*, etc. that impose some limitations such as: no constructors [Java] or no constructors with parameters [Scala until very recently], no mutable fields [Java], specific rules for overriding (e.g. mixins take precedence over base classes [Ruby] so you can include them when you need a bunch of utility methods), etc. Java has become a language like these.\r\n\r\n**Why just by disallowing fields and constructors you solve many issues related to multiple inheritance?**\r\n\r\n- You can&#39;t have duplicated fields in duplicated base classes.\r\n    - The main class hierarchy is still linear.\r\n- You can&#39;t construct your base objects the wrong way.\r\n    - Imagine if Object had public/protected fields and all subclasses had constructors setting those fields. When you inherit from more than one class (all of them derived from Object), which one gets to set the fields? The last class? They become siblings in the hierarchy, so they know nothing about each other. Should you have multiple copies of Object to avoid this? Would all classes interoperate correctly?\r\n- Remember that fields in Java are not virtual (overridable), they are simply data storage.\r\n    - You could make a language where fields behave like methods and could be overridden (the actual storage would be always private), but that would be a much bigger change and problably wouldn&#39;t be called Java anymore.\r\n- Interfaces can&#39;t be instantiated by themselves.\r\n    - You should always combine them with a concrete class. That eliminates the need for constructors and makes the programmer&#39;s intent clearer too (that is, what is meant to be a concrete class and what&#39;s an accessory interface/mixin). This also provides a well-defined place to solve all ambiguities: the concrete class.\r\n","title":"Why does Java not allow multiple inheritance but does allow conforming to multiple interfaces with default implementations","body":"<p>The main issues with multiple inheritance are <strong>ordering</strong> (for overriding and calls to <em>super</em>), <strong>fields</strong> and <strong>constructors</strong>; interfaces don't have fields or constructors, so they don't cause problems.</p>\n<p>If you look at other languages they usually fall in two broad categories:</p>\n<ol>\n<li><p>Languages with multiple inheritance plus a few features to disambiguate special cases: virtual inheritance [C++], direct calls to all superconstructors in the most-derived class [C++], linearization of superclasses [Python], complex rules for <em>super</em> [Python], etc.</p>\n</li>\n<li><p>Languages with a differente concept, usually called <em>interfaces</em>, <em>traits</em>, <em>mixins</em>, <em>modules</em>, etc. that impose some limitations such as: no constructors [Java] or no constructors with parameters [Scala until very recently], no mutable fields [Java], specific rules for overriding (e.g. mixins take precedence over base classes [Ruby] so you can include them when you need a bunch of utility methods), etc. Java has become a language like these.</p>\n</li>\n</ol>\n<p><strong>Why just by disallowing fields and constructors you solve many issues related to multiple inheritance?</strong></p>\n<ul>\n<li>You can't have duplicated fields in duplicated base classes.\n<ul>\n<li>The main class hierarchy is still linear.</li>\n</ul>\n</li>\n<li>You can't construct your base objects the wrong way.\n<ul>\n<li>Imagine if Object had public/protected fields and all subclasses had constructors setting those fields. When you inherit from more than one class (all of them derived from Object), which one gets to set the fields? The last class? They become siblings in the hierarchy, so they know nothing about each other. Should you have multiple copies of Object to avoid this? Would all classes interoperate correctly?</li>\n</ul>\n</li>\n<li>Remember that fields in Java are not virtual (overridable), they are simply data storage.\n<ul>\n<li>You could make a language where fields behave like methods and could be overridden (the actual storage would be always private), but that would be a much bigger change and problably wouldn't be called Java anymore.</li>\n</ul>\n</li>\n<li>Interfaces can't be instantiated by themselves.\n<ul>\n<li>You should always combine them with a concrete class. That eliminates the need for constructors and makes the programmer's intent clearer too (that is, what is meant to be a concrete class and what's an accessory interface/mixin). This also provides a well-defined place to solve all ambiguities: the concrete class.</li>\n</ul>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":21696470,"reputation":1,"user_id":16010296,"display_name":"Krish Jaiswal"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1621869131,"creation_date":1621798655,"answer_id":67663657,"question_id":52620936,"body_markdown":"JAVA DOES SUPPORT MULTIPLE INHERITANCE.\r\nIf you make a OVERALL COMPARISON OF THE PROGRAMMING LANGUAGE,JAVA,THEN YOU COME TO KNOW THAT I AM TRUE.\r\n\r\nJava&#39;s topclass or the root class in the Ancestor Hierarchy is the Object class.\r\nThis class is a Superclass of all other classes. Hence, each class in Java that we declare or is predefined in the API itself inherits this Object class.\r\n\r\nMoreover, Java provides us to inherit one more class of our choice.\r\n\r\nHence, we can say that we are performing INTERLOCKED BUT MULTIPLE INHERITANCE.\r\n\r\n\r\n2ND Way\r\n\r\nJava supports Multiple Inheritance of Interfaces. So you can use as many interface implementations you want. But note, implementing an interface does not define IS A relationship as in case of Inheritance of Classes is possible.\r\n\r\n","title":"Why does Java not allow multiple inheritance but does allow conforming to multiple interfaces with default implementations","body":"<p>JAVA DOES SUPPORT MULTIPLE INHERITANCE.\nIf you make a OVERALL COMPARISON OF THE PROGRAMMING LANGUAGE,JAVA,THEN YOU COME TO KNOW THAT I AM TRUE.</p>\n<p>Java's topclass or the root class in the Ancestor Hierarchy is the Object class.\nThis class is a Superclass of all other classes. Hence, each class in Java that we declare or is predefined in the API itself inherits this Object class.</p>\n<p>Moreover, Java provides us to inherit one more class of our choice.</p>\n<p>Hence, we can say that we are performing INTERLOCKED BUT MULTIPLE INHERITANCE.</p>\n<p>2ND Way</p>\n<p>Java supports Multiple Inheritance of Interfaces. So you can use as many interface implementations you want. But note, implementing an interface does not define IS A relationship as in case of Inheritance of Classes is possible.</p>\n"},{"tags":[],"owner":{"account_id":14064729,"reputation":111,"user_id":10159895,"display_name":"Jayant"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676717182,"creation_date":1676717182,"answer_id":75492793,"question_id":52620936,"body_markdown":"\r\n\r\n    class A{\r\n       void m1(){\r\n            System.out.println(&quot;m1-A&quot;);\r\n       }\r\n    }\r\n    class B{\r\n        void m1(){\r\n           System.out.println(&quot;m1-B&quot;);\r\n       }\r\n    }\r\n    class C extends A, B{    // this will give an error\r\n      // inheritance means making all variables and/or methods available to the child class, here child class will get confused as which m1() method to inherit, hence an error\r\n    }\r\n\r\n","title":"Why does Java not allow multiple inheritance but does allow conforming to multiple interfaces with default implementations","body":"<pre><code>class A{\n   void m1(){\n        System.out.println(&quot;m1-A&quot;);\n   }\n}\nclass B{\n    void m1(){\n       System.out.println(&quot;m1-B&quot;);\n   }\n}\nclass C extends A, B{    // this will give an error\n  // inheritance means making all variables and/or methods available to the child class, here child class will get confused as which m1() method to inherit, hence an error\n}\n</code></pre>\n"}],"owner":{"account_id":8995972,"reputation":1638,"user_id":6706381,"display_name":"Asanka"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24545,"favorite_count":0,"down_vote_count":2,"up_vote_count":53,"accepted_answer_id":52621193,"answer_count":8,"score":51,"last_activity_date":1676717182,"creation_date":1538548173,"question_id":52620936,"body_markdown":"I am not asking this -&gt; [Why is there no multiple inheritance in Java, but implementing multiple interfaces is allowed?][1]\r\n\r\nIn Java, multiple inheritance isn&#39;t allowed, but, after Java 8, Interfaces can have *default methods* (can implement methods itself), just like abstract classes. Within this context, it multiple inheritance should also be allowed.\r\n\r\n    interface TestInterface \r\n    { \r\n        // abstract method \r\n        public void square(int a); \r\n      \r\n        // default method \r\n        default void show() \r\n        { \r\n          System.out.println(&quot;Default Method Executed&quot;); \r\n        } \r\n    } \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/2515477/why-is-there-no-multiple-inheritance-in-java-but-implementing-multiple-interfac","title":"Why does Java not allow multiple inheritance but does allow conforming to multiple interfaces with default implementations","body":"<p>I am not asking this -> <a href=\"https://stackoverflow.com/questions/2515477/why-is-there-no-multiple-inheritance-in-java-but-implementing-multiple-interfac\">Why is there no multiple inheritance in Java, but implementing multiple interfaces is allowed?</a></p>\n\n<p>In Java, multiple inheritance isn't allowed, but, after Java 8, Interfaces can have <em>default methods</em> (can implement methods itself), just like abstract classes. Within this context, it multiple inheritance should also be allowed.</p>\n\n<pre><code>interface TestInterface \n{ \n    // abstract method \n    public void square(int a); \n\n    // default method \n    default void show() \n    { \n      System.out.println(\"Default Method Executed\"); \n    } \n} \n</code></pre>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":4728704,"reputation":17032,"user_id":3824919,"display_name":"Tom"},"score":0,"creation_date":1676689752,"post_id":75490935,"comment_id":133193721,"body_markdown":"Wait, when you never add an item to the list it won&#39;t contain any items? That weird, isn&#39;t it? Have you tried to add items instead?","body":"Wait, when you never add an item to the list it won&#39;t contain any items? That weird, isn&#39;t it? Have you tried to add items instead?"},{"owner":{"account_id":27743543,"reputation":11,"user_id":21179478,"display_name":"Baxter"},"score":0,"creation_date":1676689951,"post_id":75490935,"comment_id":133193726,"body_markdown":"fc.getMyList().add(&quot;Test&quot;); this is not adding to the list ?","body":"fc.getMyList().add(&quot;Test&quot;); this is not adding to the list ?"},{"owner":{"account_id":4728704,"reputation":17032,"user_id":3824919,"display_name":"Tom"},"score":0,"creation_date":1676690034,"post_id":75490935,"comment_id":133193732,"body_markdown":"It would when you would call that main method, but you don&#39;t. You call that other main method in the OtherClass instead.","body":"It would when you would call that main method, but you don&#39;t. You call that other main method in the OtherClass instead."},{"owner":{"account_id":27743543,"reputation":11,"user_id":21179478,"display_name":"Baxter"},"score":0,"creation_date":1676690053,"post_id":75490935,"comment_id":133193735,"body_markdown":"I&#39;ve also tried:  fc.myList.add(&quot;Test&quot;); still not printing anything in the 2nd class","body":"I&#39;ve also tried:  fc.myList.add(&quot;Test&quot;); still not printing anything in the 2nd class"},{"owner":{"account_id":27743543,"reputation":11,"user_id":21179478,"display_name":"Baxter"},"score":0,"creation_date":1676690368,"post_id":75490935,"comment_id":133193759,"body_markdown":"So how my code should look to work?","body":"So how my code should look to work?"},{"owner":{"account_id":27743543,"reputation":11,"user_id":21179478,"display_name":"Baxter"},"score":0,"creation_date":1676690466,"post_id":75490935,"comment_id":133193765,"body_markdown":"public static void main(String[] args) {\n        FirstClass fc = new FirstClass();\n        System.out.println(fc.getMyList());\n\n    } still printing empty array","body":"public static void main(String[] args) {         FirstClass fc = new FirstClass();         System.out.println(fc.getMyList());      } still printing empty array"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1676690721,"post_id":75490935,"comment_id":133193789,"body_markdown":"But think about the flow of execution. Why would there be anything in that list? Nothing is executed during the instantiation of `FirstClass` that would add to its list.","body":"But think about the flow of execution. Why would there be anything in that list? Nothing is executed during the instantiation of <code>FirstClass</code> that would add to its list."},{"owner":{"account_id":4728704,"reputation":17032,"user_id":3824919,"display_name":"Tom"},"score":0,"creation_date":1676690760,"post_id":75490935,"comment_id":133193793,"body_markdown":"I wonder why you keep adding main methods which just do one thing and not everything you want it to do. You want it do add stuff to a list and then print it, like you did in your first example, so do the same in your second one. Spread different steps to different main methods which have no relation doesn&#39;t work, they don&#39;t interact with each other.","body":"I wonder why you keep adding main methods which just do one thing and not everything you want it to do. You want it do add stuff to a list and then print it, like you did in your first example, so do the same in your second one. Spread different steps to different main methods which have no relation doesn&#39;t work, they don&#39;t interact with each other."}],"answers":[{"tags":[],"owner":{"account_id":2926221,"reputation":727,"user_id":2507462,"display_name":"Daniel Sobrado"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1676690666,"creation_date":1676690666,"answer_id":75490989,"question_id":75490935,"body_markdown":"Because a new instance of `FirstClass` is being created inside of `OtherClass`, `otherList` in `OtherClass` is empty.\r\n\r\nThe ArrayList that `oc.otherList` refers to is different from the one that you populated for `FirstClass` in the main method.\r\n\r\nYou can edit your `OtherClass` to work:\r\n\r\n```\r\npublic class OtherClass {\r\n   private FirstClass csv;\r\n   public ArrayList&lt;String&gt; otherList;\r\n\r\n   public OtherClass(FirstClass fc) {\r\n       this.csv = fc;\r\n       this.otherList = fc.getMyList();\r\n   }\r\n\r\n   public static void main(String[] args) {\r\n       FirstClass fc = new FirstClass();\r\n       fc.getMyList().add(&quot;Test&quot;);\r\n       OtherClass oc = new OtherClass(fc);\r\n       System.out.println(oc.otherList);\r\n   }\r\n}\r\n```","title":"ArrayList empty","body":"<p>Because a new instance of <code>FirstClass</code> is being created inside of <code>OtherClass</code>, <code>otherList</code> in <code>OtherClass</code> is empty.</p>\n<p>The ArrayList that <code>oc.otherList</code> refers to is different from the one that you populated for <code>FirstClass</code> in the main method.</p>\n<p>You can edit your <code>OtherClass</code> to work:</p>\n<pre><code>public class OtherClass {\n   private FirstClass csv;\n   public ArrayList&lt;String&gt; otherList;\n\n   public OtherClass(FirstClass fc) {\n       this.csv = fc;\n       this.otherList = fc.getMyList();\n   }\n\n   public static void main(String[] args) {\n       FirstClass fc = new FirstClass();\n       fc.getMyList().add(&quot;Test&quot;);\n       OtherClass oc = new OtherClass(fc);\n       System.out.println(oc.otherList);\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14429279,"reputation":130,"user_id":10423076,"display_name":"Govil Kumar"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1676693796,"creation_date":1676693796,"answer_id":75491152,"question_id":75490935,"body_markdown":"You can do something like below.\r\n\r\n```java\r\npublic class FirstClass {\r\n\r\n    private List&lt;String&gt; myList;\r\n\r\n    // Instance block: will executed the moment you create object\r\n    // of FirstClass\r\n    {\r\n        myList = new ArrayList&lt;&gt;();\r\n        myList.add(&quot;Test String&quot;);\r\n    }\r\n\r\n    public List&lt;String&gt; getMyList() {\r\n        return myList;\r\n    }\r\n}\r\n```\r\n\r\n```java\r\npublic class OtherClass {\r\n\r\n    private static List&lt;String&gt; otherList;\r\n\r\n    public static void main(String[] args) {\r\n        FirstClass fc = new FirstClass();\r\n        otherList = fc.getMyList();\r\n        System.out.println(otherList); //iterate if want to check specific elements in the list\r\n    }\r\n}\r\n```\r\n\r\nOr a better way would be to create a method which will add elements to the list and read it in the otherclass by calling the method using firstclass&#39;s object.","title":"ArrayList empty","body":"<p>You can do something like below.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class FirstClass {\n\n    private List&lt;String&gt; myList;\n\n    // Instance block: will executed the moment you create object\n    // of FirstClass\n    {\n        myList = new ArrayList&lt;&gt;();\n        myList.add(&quot;Test String&quot;);\n    }\n\n    public List&lt;String&gt; getMyList() {\n        return myList;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class OtherClass {\n\n    private static List&lt;String&gt; otherList;\n\n    public static void main(String[] args) {\n        FirstClass fc = new FirstClass();\n        otherList = fc.getMyList();\n        System.out.println(otherList); //iterate if want to check specific elements in the list\n    }\n}\n</code></pre>\n<p>Or a better way would be to create a method which will add elements to the list and read it in the otherclass by calling the method using firstclass's object.</p>\n"},{"tags":[],"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676710131,"creation_date":1676710131,"answer_id":75492197,"question_id":75490935,"body_markdown":"OtherClass creates the FirstClass without FirstClass main method, so it does not add() to the list.","title":"ArrayList empty","body":"<p>OtherClass creates the FirstClass without FirstClass main method, so it does not add() to the list.</p>\n"}],"owner":{"account_id":27743543,"reputation":11,"user_id":21179478,"display_name":"Baxter"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1676716614,"creation_date":1676689659,"question_id":75490935,"body_markdown":"I think it&#39;s a simple question but keeps me from moving forward in the project. Why, when I use the `ArrayList` as a reference from a class to another, it is empty?\r\n```java\r\npublic class FirstClass {\r\n    private ArrayList&lt;String&gt; myList = new ArrayList&lt;&gt;();\r\n\r\n    public ArrayList&lt;String&gt; getMyList() {\r\n        return myList;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        FirstClass fc = new FirstClass();\r\n        fc.getMyList().add(&quot;Test&quot;);\r\n        System.out.println(fc.getMyList());\r\n    }\r\n}\r\n```\r\nOutput when I run `FirstClass.main`:\r\n```none\r\n[Test]\r\n```\r\n--------------------------------\r\n```java\r\npublic class OtherClass {\r\n    FirstClass csv = new FirstClass();\r\n    public ArrayList&lt;String&gt; otherList = csv.getMyList();\r\n\r\n    public static void main(String[] args) {\r\n        OtherClass oc = new OtherClass();\r\n        System.out.println(oc.otherList);\r\n    }\r\n}\r\n```\r\nOutput when running the `OtherClass.main`:\r\n```none\r\n[]\r\n```\r\nI&#39;ve Googled so many time and the solutions that I found are not working. I followed step by step, creating a *getter* method in the class that is populating the `ArrayList`, use the method to populate it, use the `print` method to make sure the array is populated at the end of the `main` method. All good, `ArrayList` is full and ready to be used but when used as reference is empty.\r\n","title":"ArrayList empty","body":"<p>I think it's a simple question but keeps me from moving forward in the project. Why, when I use the <code>ArrayList</code> as a reference from a class to another, it is empty?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class FirstClass {\n    private ArrayList&lt;String&gt; myList = new ArrayList&lt;&gt;();\n\n    public ArrayList&lt;String&gt; getMyList() {\n        return myList;\n    }\n\n    public static void main(String[] args) {\n        FirstClass fc = new FirstClass();\n        fc.getMyList().add(&quot;Test&quot;);\n        System.out.println(fc.getMyList());\n    }\n}\n</code></pre>\n<p>Output when I run <code>FirstClass.main</code>:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[Test]\n</code></pre>\n<hr />\n<pre class=\"lang-java prettyprint-override\"><code>public class OtherClass {\n    FirstClass csv = new FirstClass();\n    public ArrayList&lt;String&gt; otherList = csv.getMyList();\n\n    public static void main(String[] args) {\n        OtherClass oc = new OtherClass();\n        System.out.println(oc.otherList);\n    }\n}\n</code></pre>\n<p>Output when running the <code>OtherClass.main</code>:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[]\n</code></pre>\n<p>I've Googled so many time and the solutions that I found are not working. I followed step by step, creating a <em>getter</em> method in the class that is populating the <code>ArrayList</code>, use the method to populate it, use the <code>print</code> method to make sure the array is populated at the end of the <code>main</code> method. All good, <code>ArrayList</code> is full and ready to be used but when used as reference is empty.</p>\n"},{"tags":["java","yaml","configuration-files","spring-boot","properties-file"],"answers":[{"comments":[{"owner":{"account_id":2706870,"reputation":3712,"user_id":2336284,"accept_rate":100,"display_name":"Scott C."},"score":4,"creation_date":1407855414,"post_id":25232720,"comment_id":39371328,"body_markdown":"I would suggest the reference documentation be updated to clarify if this answer is correct.  Right now the language in the guide makes it sound like its either or but not both.   Let me know if I should open up a JIRA ticket to get this updated.","body":"I would suggest the reference documentation be updated to clarify if this answer is correct.  Right now the language in the guide makes it sound like its either or but not both.   Let me know if I should open up a JIRA ticket to get this updated."},{"owner":{"account_id":2244667,"reputation":4001,"user_id":1978330,"accept_rate":50,"display_name":"theadam"},"score":0,"creation_date":1422836656,"post_id":25232720,"comment_id":44895027,"body_markdown":"I concur, this is why I have decided to Google the matter and hence arrived here :)","body":"I concur, this is why I have decided to Google the matter and hence arrived here :)"},{"owner":{"account_id":1979561,"reputation":567,"user_id":1776489,"accept_rate":94,"display_name":"Arunprasad"},"score":0,"creation_date":1484897481,"post_id":25232720,"comment_id":70708174,"body_markdown":"@ScottC. is correct .both application.yml and application-{profile}.properties are getting merged.","body":"@ScottC. is correct .both application.yml and application-{profile}.properties are getting merged."},{"owner":{"account_id":219684,"reputation":37267,"user_id":476716,"accept_rate":77,"display_name":"OrangeDog"},"score":5,"creation_date":1544096607,"post_id":25232720,"comment_id":94159415,"body_markdown":"What about if you have both `application.yml` and `application.properties`?","body":"What about if you have both <code>application.yml</code> and <code>application.properties</code>?"},{"owner":{"account_id":4294116,"reputation":140,"user_id":3509606,"display_name":"Gautam Tyagi"},"score":6,"creation_date":1579778201,"post_id":25232720,"comment_id":105884272,"body_markdown":"u can keep both files but the properties files loads later and can overwrite the values if same is defined in the yml file as well.","body":"u can keep both files but the properties files loads later and can overwrite the values if same is defined in the yml file as well."},{"owner":{"account_id":1632225,"reputation":1661,"user_id":1506545,"display_name":"Avec"},"score":4,"creation_date":1640168711,"post_id":25232720,"comment_id":124530009,"body_markdown":"@OrangeDog `application.properties` &gt; `application.yml`, meaning yml loads first and properties later. Any `application-profile.properties` will be added even later. This is a nice way to override values in `application.properties` IMO.","body":"@OrangeDog <code>application.properties</code> &gt; <code>application.yml</code>, meaning yml loads first and properties later. Any <code>application-profile.properties</code> will be added even later. This is a nice way to override values in <code>application.properties</code> IMO."}],"tags":[],"owner":{"account_id":2706870,"reputation":3712,"user_id":2336284,"accept_rate":100,"display_name":"Scott C."},"comment_count":6,"down_vote_count":0,"up_vote_count":66,"is_accepted":true,"score":66,"last_activity_date":1639766783,"creation_date":1407702582,"answer_id":25232720,"question_id":25231918,"body_markdown":"I can answer my own question, as it just works as you would expect.  The application.yml file and the appropriate application-${profile}.properties both get loaded and merged into the environment. Spring boot just makes this work naturally.","title":"Does spring boot support using both properties and yml files at the same time?","body":"<p>I can answer my own question, as it just works as you would expect.  The application.yml file and the appropriate application-${profile}.properties both get loaded and merged into the environment. Spring boot just makes this work naturally.</p>\n"},{"comments":[{"owner":{"account_id":1632225,"reputation":1661,"user_id":1506545,"display_name":"Avec"},"score":4,"creation_date":1640168539,"post_id":48237104,"comment_id":124529947,"body_markdown":"This is only correct in order of priority but not in order of what is loaded first. Any application-profile.properties is loaded after application.properties. This is how you override values. Also yml is read before properties if you so happens to have both.  Example application-profile.properties &gt; application.properties &gt; application.yml, where &gt; (greater than) means left side is greater than right side.","body":"This is only correct in order of priority but not in order of what is loaded first. Any application-profile.properties is loaded after application.properties. This is how you override values. Also yml is read before properties if you so happens to have both.  Example application-profile.properties &gt; application.properties &gt; application.yml, where &gt; (greater than) means left side is greater than right side."}],"tags":[],"owner":{"account_id":5605036,"reputation":2440,"user_id":4439996,"accept_rate":80,"display_name":"Akshay Pethani"},"comment_count":1,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1582718023,"creation_date":1515820308,"answer_id":48237104,"question_id":25231918,"body_markdown":"Yes, you can run both without doing any configuration.\r\n\r\nIn Spring Boot, it picks .properties or .yaml files in the following sequences :\r\n\r\n1. application-{profile}.{properties|yml}\r\n\r\n2. application.{properties|yml}\r\n","title":"Does spring boot support using both properties and yml files at the same time?","body":"<p>Yes, you can run both without doing any configuration.</p>\n\n<p>In Spring Boot, it picks .properties or .yaml files in the following sequences :</p>\n\n<ol>\n<li><p>application-{profile}.{properties|yml}</p></li>\n<li><p>application.{properties|yml}</p></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":14284626,"reputation":695,"user_id":10318272,"display_name":"S. Doe"},"score":2,"creation_date":1642595248,"post_id":55843152,"comment_id":125111326,"body_markdown":"Your sentence &quot;first application.yml will be loaded **later**, application.properties will be loaded.&quot; should be &quot;first application.yml will be loaded, application.properties will be loaded **later**.&quot;, right?","body":"Your sentence &quot;first application.yml will be loaded <b>later</b>, application.properties will be loaded.&quot; should be &quot;first application.yml will be loaded, application.properties will be loaded <b>later</b>.&quot;, right?"},{"owner":{"account_id":7588399,"reputation":679,"user_id":5756749,"accept_rate":0,"display_name":"Gowri Sundar"},"score":0,"creation_date":1643765626,"post_id":55843152,"comment_id":125425122,"body_markdown":"Yes you are right","body":"Yes you are right"}],"tags":[],"owner":{"account_id":7588399,"reputation":679,"user_id":5756749,"accept_rate":0,"display_name":"Gowri Sundar"},"comment_count":2,"down_vote_count":0,"up_vote_count":50,"is_accepted":false,"score":50,"last_activity_date":1676716491,"creation_date":1556174027,"answer_id":55843152,"question_id":25231918,"body_markdown":"**Yes You can use both at same time in same project.**\r\n\r\n - When you use both YML and properties at same time, say for example   \r\n   application.yml and application.properties at same time in same   \r\n   project, **first application.yml will be loaded, later   \r\n   application.properties will be loaded**.\r\n - Important point to be noted is that if application.yml and\r\n   application.properties have **same keys** for example in\r\n   **application.yml** has **spring.app.name = testYML** and\r\n   **application.properties** has **spring.app.name = testProperties** **at same\r\n   time in same project**, then application.yml value will be overwritten\r\n   by application.properties value since it is loading at last.\r\n - And the    value in **spring.app.name = testProperties**.","title":"Does spring boot support using both properties and yml files at the same time?","body":"<p><strong>Yes You can use both at same time in same project.</strong></p>\n<ul>\n<li>When you use both YML and properties at same time, say for example<br />\napplication.yml and application.properties at same time in same<br />\nproject, <strong>first application.yml will be loaded, later<br />\napplication.properties will be loaded</strong>.</li>\n<li>Important point to be noted is that if application.yml and\napplication.properties have <strong>same keys</strong> for example in\n<strong>application.yml</strong> has <strong>spring.app.name = testYML</strong> and\n<strong>application.properties</strong> has <strong>spring.app.name = testProperties</strong> <strong>at same\ntime in same project</strong>, then application.yml value will be overwritten\nby application.properties value since it is loading at last.</li>\n<li>And the    value in <strong>spring.app.name = testProperties</strong>.</li>\n</ul>\n"}],"owner":{"account_id":2706870,"reputation":3712,"user_id":2336284,"accept_rate":100,"display_name":"Scott C."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34781,"favorite_count":0,"down_vote_count":1,"up_vote_count":57,"accepted_answer_id":25232720,"answer_count":3,"score":56,"last_activity_date":1676716491,"creation_date":1407696730,"question_id":25231918,"body_markdown":"I have a spring boot application and I want to use both a yml file for my application properties and also a plain application-${profile}.properties file set to configure my application. \r\n\r\nSo my question is can this be done and if so, how do you configure spring boot to look for both the yml file and the properties and merge them into one set per environment?\r\n\r\nAs to why I want/need to use both, it is because I like the flexibility and ease of use of yml files but an internal component (for encryption) requires using the properties file set.  \r\n\r\nI did see this point being made [YAML files can’t be loaded via the @PropertySource annotation][1]\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config-yaml-shortcomings\r\n\r\nbut nothing stating whether both can be used together.   \r\n\r\nPlease provide detailed configuration (XML or Java config) on how to get this working.\r\n\r\nTIA,\r\n\r\nScott","title":"Does spring boot support using both properties and yml files at the same time?","body":"<p>I have a spring boot application and I want to use both a yml file for my application properties and also a plain application-${profile}.properties file set to configure my application. </p>\n\n<p>So my question is can this be done and if so, how do you configure spring boot to look for both the yml file and the properties and merge them into one set per environment?</p>\n\n<p>As to why I want/need to use both, it is because I like the flexibility and ease of use of yml files but an internal component (for encryption) requires using the properties file set.  </p>\n\n<p>I did see this point being made <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config-yaml-shortcomings\">YAML files can’t be loaded via the @PropertySource annotation</a></p>\n\n<p>but nothing stating whether both can be used together.   </p>\n\n<p>Please provide detailed configuration (XML or Java config) on how to get this working.</p>\n\n<p>TIA,</p>\n\n<p>Scott</p>\n"},{"tags":["java","spring-boot","swagger","openapi"],"comments":[{"owner":{"account_id":6518557,"reputation":2810,"user_id":5043481,"display_name":"zforgo"},"score":0,"creation_date":1676665153,"post_id":75488819,"comment_id":133190358,"body_markdown":"Please take a look at this: https://github.com/springdoc/springdoc-openapi/issues/2028","body":"Please take a look at this: <a href=\"https://github.com/springdoc/springdoc-openapi/issues/2028\" rel=\"nofollow noreferrer\">github.com/springdoc/springdoc-openapi/issues/2028</a>"},{"owner":{"account_id":12518321,"reputation":168,"user_id":9110651,"display_name":"Marius Pop"},"score":0,"creation_date":1676666090,"post_id":75488819,"comment_id":133190550,"body_markdown":"I did look at that but there it said to modify a property in the controller method. Here I dont even have a controller to modify in. Everything is back-office generated","body":"I did look at that but there it said to modify a property in the controller method. Here I dont even have a controller to modify in. Everything is back-office generated"},{"owner":{"account_id":6518557,"reputation":2810,"user_id":5043481,"display_name":"zforgo"},"score":0,"creation_date":1676670788,"post_id":75488819,"comment_id":133191505,"body_markdown":"It also said to pass ```-parameters```  as compiler argument to ```javac```. Hope it helps.","body":"It also said to pass <code>-parameters</code>  as compiler argument to <code>javac</code>. Hope it helps."}],"answers":[{"tags":[],"owner":{"account_id":12518321,"reputation":168,"user_id":9110651,"display_name":"Marius Pop"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676716267,"creation_date":1676716267,"answer_id":75492720,"question_id":75488819,"body_markdown":"Solved: I added -parameters as compiler argument to javac. \r\nHow to do that: \r\n\r\n\r\nhttps://stackoverflow.com/questions/39217830/how-to-use-parameters-javac-option-in-intellij#:~:text=The%20correct%20place%20to%20enter,Compiler%20%3E%20Additional%20command%20line%20parameters.&amp;text=remember%20to%20rebuild%20your%20project%2C%20or%20it%20may%20not%20work.\r\n","title":"How to customize swagger generated entity controller?","body":"<p>Solved: I added -parameters as compiler argument to javac.\nHow to do that:</p>\n<p><a href=\"https://stackoverflow.com/questions/39217830/how-to-use-parameters-javac-option-in-intellij#:%7E:text=The%20correct%20place%20to%20enter,Compiler%20%3E%20Additional%20command%20line%20parameters.&amp;text=remember%20to%20rebuild%20your%20project%2C%20or%20it%20may%20not%20work\">https://stackoverflow.com/questions/39217830/how-to-use-parameters-javac-option-in-intellij#:~:text=The%20correct%20place%20to%20enter,Compiler%20%3E%20Additional%20command%20line%20parameters.&amp;text=remember%20to%20rebuild%20your%20project%2C%20or%20it%20may%20not%20work</a>.</p>\n"}],"owner":{"account_id":12518321,"reputation":168,"user_id":9110651,"display_name":"Marius Pop"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":431,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676716267,"creation_date":1676664467,"question_id":75488819,"body_markdown":"I am running a spring-boot 3 application with 1 controller class (that has only one method) defined by myself and one entity class. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThe entity class is **EvalPeriod**:\r\n```@Entity\r\n@Table(name = &quot;eval_period&quot;)\r\npublic class EvalPeriod {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    Long id;\r\n\r\n    @Column(name = &quot;date_from&quot;)\r\n    public LocalDate evalDateFrom;\r\n\r\n    @Column(name = &quot;date_to&quot;)\r\n    public LocalDate evalDateTo;\r\n}\r\n```\r\n\r\nFor swagger generation I am using this dependency:\r\n```\r\n&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\nThe problem is that whenever I am trying to access the swagger-generated apis for the entity, the datatype of the Id si not long anymore but String (I dont know the reason)\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CSR3Y.png\r\n  [2]: https://i.stack.imgur.com/fbVHT.png\r\n\r\nAnd if I try to pass the id as String so I just go ahead and type the id as a long/int for instance 1 and I get the error in the logs: \r\n```\r\norg.springframework.core.convert.ConverterNotFoundException: No converter found capable of converting from type [java.lang.String] to type [jakarta.persistence.Id]\r\n\tat org.springframework.core.convert.support.GenericConversionService.handleConverterNotFound(GenericConversionService.java:322) ~[spring-core-6.0.4.jar:6.0.4]\r\n\tat org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:195) ~[spring-core-6.0.4.jar:6.0.4]\r\n\tat org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.0.1.jar:3.0.1]\r\n\tat org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.0.1.jar:3.0.1]\r\n\tat org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.0.1.jar:4.0.1]\r\n\tat org.springframework.data.rest.webmvc.config.PersistentEntityResourceHandlerMethodArgumentResolver.lambda$resolveArgument$1(PersistentEntityResourceHandlerMethodArgumentResolver.java:124) ~[spring-data-rest-webmvc-4.0.1.jar:4.0.1]\r\n\tat java.base/java.util.Optional.flatMap(Optional.java:289) ~[na:na]\r\n\tat org.springframework.data.rest.webmvc.config.PersistentEntityResourceHandlerMethodArgumentResolver.resolveArgument(PersistentEntityResourceHandlerMethodArgumentResolver.java:124) ~[spring-data-rest-webmvc-4.0.1.jar:4.0.1]\r\n\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122) ~[spring-web-6.0.4.jar:6.0.4]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:181) ~[spring-web-6.0.4.jar:6.0.4]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:148) ~[spring-web-6.0.4.jar:6.0.4]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-6.0.4.jar:6.0.4]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.4.jar:6.0.4]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.4.jar:6.0.4]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.4.jar:6.0.4]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080) ~[spring-webmvc-6.0.4.jar:6.0.4]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973) ~[spring-webmvc-6.0.4.jar:6.0.4]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.4.jar:6.0.4]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925) ~[spring-webmvc-6.0.4.jar:6.0.4]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:734) ~[tomcat-embed-core-10.1.5.jar:6.0]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.4.jar:6.0.4]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814) ~[tomcat-embed-core-10.1.5.jar:6.0]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.4.jar:6.0.4]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.4.jar:6.0.4]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.4.jar:6.0.4]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n```\r\n\r\nAny suggestions please ? Thank you.","title":"How to customize swagger generated entity controller?","body":"<p>I am running a spring-boot 3 application with 1 controller class (that has only one method) defined by myself and one entity class.</p>\n<p><a href=\"https://i.stack.imgur.com/CSR3Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CSR3Y.png\" alt=\"enter image description here\" /></a></p>\n<p>The entity class is <strong>EvalPeriod</strong>:</p>\n<pre><code>@Table(name = &quot;eval_period&quot;)\npublic class EvalPeriod {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    Long id;\n\n    @Column(name = &quot;date_from&quot;)\n    public LocalDate evalDateFrom;\n\n    @Column(name = &quot;date_to&quot;)\n    public LocalDate evalDateTo;\n}\n</code></pre>\n<p>For swagger generation I am using this dependency:</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n            &lt;version&gt;2.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>The problem is that whenever I am trying to access the swagger-generated apis for the entity, the datatype of the Id si not long anymore but String (I dont know the reason)</p>\n<p><a href=\"https://i.stack.imgur.com/fbVHT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fbVHT.png\" alt=\"enter image description here\" /></a></p>\n<p>And if I try to pass the id as String so I just go ahead and type the id as a long/int for instance 1 and I get the error in the logs:</p>\n<pre><code>org.springframework.core.convert.ConverterNotFoundException: No converter found capable of converting from type [java.lang.String] to type [jakarta.persistence.Id]\n    at org.springframework.core.convert.support.GenericConversionService.handleConverterNotFound(GenericConversionService.java:322) ~[spring-core-6.0.4.jar:6.0.4]\n    at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:195) ~[spring-core-6.0.4.jar:6.0.4]\n    at org.springframework.data.repository.support.ReflectionRepositoryInvoker.convertId(ReflectionRepositoryInvoker.java:258) ~[spring-data-commons-3.0.1.jar:3.0.1]\n    at org.springframework.data.repository.support.CrudRepositoryInvoker.invokeFindById(CrudRepositoryInvoker.java:80) ~[spring-data-commons-3.0.1.jar:3.0.1]\n    at org.springframework.data.rest.core.support.UnwrappingRepositoryInvokerFactory$UnwrappingRepositoryInvoker.invokeFindById(UnwrappingRepositoryInvokerFactory.java:91) ~[spring-data-rest-core-4.0.1.jar:4.0.1]\n    at org.springframework.data.rest.webmvc.config.PersistentEntityResourceHandlerMethodArgumentResolver.lambda$resolveArgument$1(PersistentEntityResourceHandlerMethodArgumentResolver.java:124) ~[spring-data-rest-webmvc-4.0.1.jar:4.0.1]\n    at java.base/java.util.Optional.flatMap(Optional.java:289) ~[na:na]\n    at org.springframework.data.rest.webmvc.config.PersistentEntityResourceHandlerMethodArgumentResolver.resolveArgument(PersistentEntityResourceHandlerMethodArgumentResolver.java:124) ~[spring-data-rest-webmvc-4.0.1.jar:4.0.1]\n    at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122) ~[spring-web-6.0.4.jar:6.0.4]\n    at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:181) ~[spring-web-6.0.4.jar:6.0.4]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:148) ~[spring-web-6.0.4.jar:6.0.4]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-6.0.4.jar:6.0.4]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.4.jar:6.0.4]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.4.jar:6.0.4]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.4.jar:6.0.4]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080) ~[spring-webmvc-6.0.4.jar:6.0.4]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973) ~[spring-webmvc-6.0.4.jar:6.0.4]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.4.jar:6.0.4]\n    at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925) ~[spring-webmvc-6.0.4.jar:6.0.4]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:734) ~[tomcat-embed-core-10.1.5.jar:6.0]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.4.jar:6.0.4]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814) ~[tomcat-embed-core-10.1.5.jar:6.0]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-10.1.5.jar:10.1.5]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.4.jar:6.0.4]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.4.jar:6.0.4]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.4.jar:6.0.4]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n</code></pre>\n<p>Any suggestions please ? Thank you.</p>\n"},{"tags":["java","rest","resttemplate","content-type","media-type"],"answers":[{"tags":[],"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676715926,"creation_date":1676715926,"answer_id":75492684,"question_id":75492555,"body_markdown":"Then postman is broken if it allows it because `:` is not valid in a type.\r\n\r\nSee [RFC 6838][1] and [RFC 3986][2]\r\n\r\n\r\n  [1]: https://www.rfc-editor.org/rfc/rfc6838#page-8\r\n  [2]: https://www.rfc-editor.org/rfc/rfc3986#section-3.5","title":"Invalid token character &#39;:&#39; in org.springframework.http.MediaType","body":"<p>Then postman is broken if it allows it because <code>:</code> is not valid in a type.</p>\n<p>See <a href=\"https://www.rfc-editor.org/rfc/rfc6838#page-8\" rel=\"nofollow noreferrer\">RFC 6838</a> and <a href=\"https://www.rfc-editor.org/rfc/rfc3986#section-3.5\" rel=\"nofollow noreferrer\">RFC 3986</a></p>\n"}],"owner":{"account_id":26757645,"reputation":11,"user_id":20356033,"display_name":"Dest511"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1676930132,"answer_count":1,"score":0,"last_activity_date":1676715926,"creation_date":1676714623,"question_id":75492555,"body_markdown":"I have a basic SpringBoot 2.3.4.RELEASE app. Using Spring Initializer, JPA, embedded Tomcat;\r\n\r\nI want to create this MediaType\r\n\r\n```\r\nMediaType customMediaType = MediaType.parseMediaType(&quot;application/json; profile=http://realtime-listings.webservices.zpg.co.uk/docs/v2.0/schemas/listing/list.json&quot;);\r\n```\r\n\r\nthat in PostMan works fine, but not in RestTemplate\r\n\r\n```\r\nERROR at org.apache.juli.logging.DirectJDKLog.log(DirectJDKLog.java:175) \r\n- Servlet.service() for servlet [dispatcherServlet] in context with path [/zoopla] threw exception [common.exception.BusinessException: \r\nInvalid mime type &quot;application/json; profile=http://test.com/docs/v2.0/schemas/listing/list.json&quot;: \r\nInvalid token character &#39;:&#39; in token &quot;http://test.com/docs/v2.0/schemas/listing/list.json&quot;\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/L7m2B.png","title":"Invalid token character &#39;:&#39; in org.springframework.http.MediaType","body":"<p>I have a basic SpringBoot 2.3.4.RELEASE app. Using Spring Initializer, JPA, embedded Tomcat;</p>\n<p>I want to create this MediaType</p>\n<pre><code>MediaType customMediaType = MediaType.parseMediaType(&quot;application/json; profile=http://realtime-listings.webservices.zpg.co.uk/docs/v2.0/schemas/listing/list.json&quot;);\n</code></pre>\n<p>that in PostMan works fine, but not in RestTemplate</p>\n<pre><code>ERROR at org.apache.juli.logging.DirectJDKLog.log(DirectJDKLog.java:175) \n- Servlet.service() for servlet [dispatcherServlet] in context with path [/zoopla] threw exception [common.exception.BusinessException: \nInvalid mime type &quot;application/json; profile=http://test.com/docs/v2.0/schemas/listing/list.json&quot;: \nInvalid token character ':' in token &quot;http://test.com/docs/v2.0/schemas/listing/list.json&quot;\n</code></pre>\n"},{"tags":["java","android","json","retrofit"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1471979434,"post_id":39108922,"comment_id":65565263,"body_markdown":"Why not just use the [Places Android API](https://developers.google.com/places/android-api/)?","body":"Why not just use the <a href=\"https://developers.google.com/places/android-api/\" rel=\"nofollow noreferrer\">Places Android API</a>?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1471979505,"post_id":39108922,"comment_id":65565285,"body_markdown":"And this website exists to create Java code from JSON. http://www.jsonschema2pojo.org/","body":"And this website exists to create Java code from JSON. <a href=\"http://www.jsonschema2pojo.org/\" rel=\"nofollow noreferrer\">jsonschema2pojo.org</a>"},{"owner":{"account_id":4765333,"reputation":2366,"user_id":3851567,"accept_rate":64,"display_name":"David Velasquez"},"score":0,"creation_date":1471979835,"post_id":39108922,"comment_id":65565465,"body_markdown":"@cricket_007 woah for some reason I did not come across this! I will use this thanks! But still, I would like to know the answer to my questions :] And I knew that website existed but it still creates all those classes for you which was the point of my question.","body":"@cricket_007 woah for some reason I did not come across this! I will use this thanks! But still, I would like to know the answer to my questions :] And I knew that website existed but it still creates all those classes for you which was the point of my question."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1471979909,"post_id":39108922,"comment_id":65565519,"body_markdown":"I think you would need separate classes, yes. Not sure about including all the attributes","body":"I think you would need separate classes, yes. Not sure about including all the attributes"}],"answers":[{"tags":[],"owner":{"account_id":18813117,"reputation":462,"user_id":13720928,"display_name":"Iglesias Leonardo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676715292,"creation_date":1676715292,"answer_id":75492623,"question_id":39108922,"body_markdown":"//You can ignoreUnknown keys like this\r\n    fun toGooglePredictionsResponse(string: String): GooglePredictionsResponse =\r\n        Json { ignoreUnknownKeys = true }.decodeFromString(string)\r\n    \r\n    //bstrings\r\n    @Serializable\r\n    data class GooglePredictionsResponse(\r\n        val predictions: List&lt;GooglePrediction&gt;\r\n    )\r\n    \r\n    @Serializable\r\n    data class StructuredFormating(\r\n        @SerialName(&quot;main_text&quot;)\r\n        val mainText: String,\r\n        @SerialName(&quot;secondary_text&quot;)\r\n        val secondaryText: String\r\n    )\r\n    \r\n    @Serializable\r\n    data class GooglePrediction(\r\n        val place_id: String,\r\n        @SerialName(&quot;structured_formatting&quot;)\r\n        val structuredFormating: StructuredFormating\r\n    )","title":"Using Retrofit to get data from Autocomplete Google Places API","body":"<p>//You can ignoreUnknown keys like this\nfun toGooglePredictionsResponse(string: String): GooglePredictionsResponse =\nJson { ignoreUnknownKeys = true }.decodeFromString(string)</p>\n<pre><code>//bstrings\n@Serializable\ndata class GooglePredictionsResponse(\n    val predictions: List&lt;GooglePrediction&gt;\n)\n\n@Serializable\ndata class StructuredFormating(\n    @SerialName(&quot;main_text&quot;)\n    val mainText: String,\n    @SerialName(&quot;secondary_text&quot;)\n    val secondaryText: String\n)\n\n@Serializable\ndata class GooglePrediction(\n    val place_id: String,\n    @SerialName(&quot;structured_formatting&quot;)\n    val structuredFormating: StructuredFormating\n)\n</code></pre>\n"}],"owner":{"account_id":4765333,"reputation":2366,"user_id":3851567,"accept_rate":64,"display_name":"David Velasquez"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":907,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676715292,"creation_date":1471979286,"question_id":39108922,"body_markdown":"I&#39;ve been reading multiple tutorials (since it&#39;s my first time using Retrofit and the Google Places API) and I noticed the pattern of making a POJO class that you create so Retrofit can map the JSON response data to your POJO. Is it possible to create POJOs with only some of the fields, or must I include every single field in a JSON response when creating my POJO? For example, if I have a JSON response structure like this (taken from [Google Places Autocomplete API](https://developers.google.com/places/web-service/autocomplete)):\r\n\r\n    {\r\n      &quot;status&quot;: &quot;OK&quot;,\r\n      &quot;predictions&quot; : [\r\n          {\r\n             &quot;description&quot; : &quot;Paris, France&quot;,\r\n             &quot;id&quot; : &quot;691b237b0322f28988f3ce03e321ff72a12167fd&quot;,\r\n             &quot;matched_substrings&quot; : [\r\n                {\r\n                   &quot;length&quot; : 5,\r\n                   &quot;offset&quot; : 0\r\n                }\r\n             ],\r\n             &quot;place_id&quot; : &quot;ChIJD7fiBh9u5kcRYJSMaMOCCwQ&quot;,\r\n             &quot;reference&quot; : &quot;CjQlAAAA_KB6EEceSTfkteSSF6U0pvumHCoLUboRcDlAH05N1pZJLmOQbYmboEi0SwXBSoI2EhAhj249tFDCVh4R-PXZkPK8GhTBmp_6_lWljaf1joVs1SH2ttB_tw&quot;,\r\n             &quot;terms&quot; : [\r\n                {\r\n                   &quot;offset&quot; : 0,\r\n                   &quot;value&quot; : &quot;Paris&quot;\r\n                },\r\n                {\r\n                   &quot;offset&quot; : 7,\r\n                   &quot;value&quot; : &quot;France&quot;\r\n                }\r\n             ],\r\n             &quot;types&quot; : [ &quot;locality&quot;, &quot;political&quot;, &quot;geocode&quot; ]\r\n          },\r\n      ...additional results ...\r\n    }\r\n\r\nObviously I would need a class to hold the values for `status` and `predictions`:\r\n\r\n    public class Result\r\n    {\r\n    \tString status;\r\n    \r\n    \t@SerializedName(&quot;predictions&quot;)\r\n    \tList&lt;Prediction&gt; predictionList;\r\n    }\r\n\r\nThen for the `Prediction` class, I could have members such as:\r\n\r\n    public class Prediction\r\n    {\r\n    \tString description;\r\n    \tString id;\r\n    \r\n    \t@SerializedName(&quot;place_id&quot;)\r\n    \tString placeID;\r\n    \t\r\n    \tString reference;\r\n    \tList&lt;String&gt; types;\r\n    }\r\n\r\n But would I *need* to include separate objects (ie, create separate classes) for `matched_substrings`, and `terms` even though I plan not to use those values?\r\n\r\nA second question I have is how can I only get the JSON response string so I can parse through it myself using Gson. This would help in avoiding having to create a bunch of classes for a large JSON response. I&#39;m just curious in case I ever want to do this. Thanks.","title":"Using Retrofit to get data from Autocomplete Google Places API","body":"<p>I've been reading multiple tutorials (since it's my first time using Retrofit and the Google Places API) and I noticed the pattern of making a POJO class that you create so Retrofit can map the JSON response data to your POJO. Is it possible to create POJOs with only some of the fields, or must I include every single field in a JSON response when creating my POJO? For example, if I have a JSON response structure like this (taken from <a href=\"https://developers.google.com/places/web-service/autocomplete\" rel=\"nofollow\">Google Places Autocomplete API</a>):</p>\n\n<pre><code>{\n  \"status\": \"OK\",\n  \"predictions\" : [\n      {\n         \"description\" : \"Paris, France\",\n         \"id\" : \"691b237b0322f28988f3ce03e321ff72a12167fd\",\n         \"matched_substrings\" : [\n            {\n               \"length\" : 5,\n               \"offset\" : 0\n            }\n         ],\n         \"place_id\" : \"ChIJD7fiBh9u5kcRYJSMaMOCCwQ\",\n         \"reference\" : \"CjQlAAAA_KB6EEceSTfkteSSF6U0pvumHCoLUboRcDlAH05N1pZJLmOQbYmboEi0SwXBSoI2EhAhj249tFDCVh4R-PXZkPK8GhTBmp_6_lWljaf1joVs1SH2ttB_tw\",\n         \"terms\" : [\n            {\n               \"offset\" : 0,\n               \"value\" : \"Paris\"\n            },\n            {\n               \"offset\" : 7,\n               \"value\" : \"France\"\n            }\n         ],\n         \"types\" : [ \"locality\", \"political\", \"geocode\" ]\n      },\n  ...additional results ...\n}\n</code></pre>\n\n<p>Obviously I would need a class to hold the values for <code>status</code> and <code>predictions</code>:</p>\n\n<pre><code>public class Result\n{\n    String status;\n\n    @SerializedName(\"predictions\")\n    List&lt;Prediction&gt; predictionList;\n}\n</code></pre>\n\n<p>Then for the <code>Prediction</code> class, I could have members such as:</p>\n\n<pre><code>public class Prediction\n{\n    String description;\n    String id;\n\n    @SerializedName(\"place_id\")\n    String placeID;\n\n    String reference;\n    List&lt;String&gt; types;\n}\n</code></pre>\n\n<p>But would I <em>need</em> to include separate objects (ie, create separate classes) for <code>matched_substrings</code>, and <code>terms</code> even though I plan not to use those values?</p>\n\n<p>A second question I have is how can I only get the JSON response string so I can parse through it myself using Gson. This would help in avoiding having to create a bunch of classes for a large JSON response. I'm just curious in case I ever want to do this. Thanks.</p>\n"},{"tags":["java","android","google-sheets-api","credentials"],"comments":[{"owner":{"account_id":14694206,"reputation":18740,"user_id":10612011,"display_name":"Iamblichus"},"score":0,"creation_date":1600426119,"post_id":63942012,"comment_id":113091523,"body_markdown":"What quickstart are you following? [This one](https://developers.google.com/calendar/quickstart/java)? If that&#39;s the case, the file should be in `src/main/resources/`, as explained there.","body":"What quickstart are you following? <a href=\"https://developers.google.com/calendar/quickstart/java\" rel=\"nofollow noreferrer\">This one</a>? If that&#39;s the case, the file should be in <code>src&#47;main&#47;resources&#47;</code>, as explained there."},{"owner":{"account_id":12802735,"reputation":79,"user_id":9263520,"display_name":"Penny Chen"},"score":0,"creation_date":1600430182,"post_id":63942012,"comment_id":113093294,"body_markdown":"Hi, I follow the Google Sheets v4, but I&#39;m developing an app in the android studio.I thought just put in my app folder. is it wrong?","body":"Hi, I follow the Google Sheets v4, but I&#39;m developing an app in the android studio.I thought just put in my app folder. is it wrong?"},{"owner":{"account_id":14694206,"reputation":18740,"user_id":10612011,"display_name":"Iamblichus"},"score":0,"creation_date":1600431326,"post_id":63942012,"comment_id":113093844,"body_markdown":"Sorry I meant to reference the sheet one: [Java quickstart](https://developers.google.com/sheets/api/quickstart/java). But that doesn&#39;t change the point, the OAuth process is the same for both APIs. The credentials should be in `src/main/resources/`. That&#39;s where the app is looking for it.","body":"Sorry I meant to reference the sheet one: <a href=\"https://developers.google.com/sheets/api/quickstart/java\" rel=\"nofollow noreferrer\">Java quickstart</a>. But that doesn&#39;t change the point, the OAuth process is the same for both APIs. The credentials should be in <code>src&#47;main&#47;resources&#47;</code>. That&#39;s where the app is looking for it."}],"answers":[{"comments":[{"owner":{"account_id":12802735,"reputation":79,"user_id":9263520,"display_name":"Penny Chen"},"score":0,"creation_date":1600432368,"post_id":63955677,"comment_id":113094377,"body_markdown":"I move to src/main/res, still the same. or I should create an asset folder call &quot;resourcrs&quot;?? I update the picture on the post.","body":"I move to src/main/res, still the same. or I should create an asset folder call &quot;resourcrs&quot;?? I update the picture on the post."},{"owner":{"account_id":14694206,"reputation":18740,"user_id":10612011,"display_name":"Iamblichus"},"score":0,"creation_date":1600433230,"post_id":63955677,"comment_id":113094794,"body_markdown":"Are you following the referenced quickstart? Did you build the project via `gradle run`? Can you provide the code related to the authorization process?","body":"Are you following the referenced quickstart? Did you build the project via <code>gradle run</code>? Can you provide the code related to the authorization process?"},{"owner":{"account_id":12802735,"reputation":79,"user_id":9263520,"display_name":"Penny Chen"},"score":0,"creation_date":1600434356,"post_id":63955677,"comment_id":113095360,"body_markdown":"Sorry, no. I do it and then show the error in terminal: Task &#39;run&#39; not found in root project &#39;PhoneCallReminder&#39;.","body":"Sorry, no. I do it and then show the error in terminal: Task &#39;run&#39; not found in root project &#39;PhoneCallReminder&#39;."},{"owner":{"account_id":14694206,"reputation":18740,"user_id":10612011,"display_name":"Iamblichus"},"score":0,"creation_date":1600435682,"post_id":63955677,"comment_id":113096005,"body_markdown":"@PennyChen I thought you were following the `google Sheets quickstart`? https://developers.google.com/sheets/api/quickstart/java","body":"@PennyChen I thought you were following the <code>google Sheets quickstart</code>? <a href=\"https://developers.google.com/sheets/api/quickstart/java\" rel=\"nofollow noreferrer\">developers.google.com/sheets/api/quickstart/java</a>"},{"owner":{"account_id":8460261,"reputation":101,"user_id":6604675,"display_name":"Murilo Melo"},"score":0,"creation_date":1652713136,"post_id":63955677,"comment_id":127666181,"body_markdown":"How can I do it in Python? Having the same issue, downloaded the credencials to my main project folder","body":"How can I do it in Python? Having the same issue, downloaded the credencials to my main project folder"}],"tags":[],"owner":{"account_id":14694206,"reputation":18740,"user_id":10612011,"display_name":"Iamblichus"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1600431577,"creation_date":1600431577,"answer_id":63955677,"question_id":63942012,"body_markdown":"You are storing the `credentials.json` file in the main app folder but, as you can see in the corresponding [Java Quickstart](https://developers.google.com/sheets/api/quickstart/java) for Sheets API, this file should be in `src/main/resources/`. \r\n\r\nYour issue should be solved by moving the file to the specified location.","title":"Resource not found: /credentials.json Google Sheets API","body":"<p>You are storing the <code>credentials.json</code> file in the main app folder but, as you can see in the corresponding <a href=\"https://developers.google.com/sheets/api/quickstart/java\" rel=\"nofollow noreferrer\">Java Quickstart</a> for Sheets API, this file should be in <code>src/main/resources/</code>.</p>\n<p>Your issue should be solved by moving the file to the specified location.</p>\n"},{"tags":[],"owner":{"account_id":6456197,"reputation":107,"user_id":5001503,"display_name":"Null Bite"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676715277,"creation_date":1676715277,"answer_id":75492620,"question_id":63942012,"body_markdown":"I use the android studio, and I solved it by created a res/raw folder.\r\n\r\nThen moved the credential.json into it.\r\n\r\nAnd use the following code instead to access it.\r\n``` java\r\nInputStream in = this.getResources().openRawResource(R.raw.credentials);\r\n\r\n```","title":"Resource not found: /credentials.json Google Sheets API","body":"<p>I use the android studio, and I solved it by created a res/raw folder.</p>\n<p>Then moved the credential.json into it.</p>\n<p>And use the following code instead to access it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>InputStream in = this.getResources().openRawResource(R.raw.credentials);\n\n</code></pre>\n"}],"owner":{"account_id":12802735,"reputation":79,"user_id":9263520,"display_name":"Penny Chen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1661,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":63955677,"answer_count":2,"score":1,"last_activity_date":1676715277,"creation_date":1600358818,"question_id":63942012,"body_markdown":"I follow the google Sheets quickstart and download the `credentials.json` put in my project main/res.\r\nNo matter how I change the place, it always shows the error `java.io.FileNotFoundException: Resource not found: /credentials.json`\r\n\r\nI have tried the other way that I found in this post:\r\n[https://stackoverflow.com/questions/59292883/java-io-filenotfoundexception-resource-not-found-credentials-json-on-java-qui][1]\r\n\r\n\r\nBut still the same.\r\nCan anyone tell me how to fix it? I google it for a long time. Thanks\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/59292883/java-io-filenotfoundexception-resource-not-found-credentials-json-on-java-qui\r\n  [2]: https://i.stack.imgur.com/pbOQy.png","title":"Resource not found: /credentials.json Google Sheets API","body":"<p>I follow the google Sheets quickstart and download the <code>credentials.json</code> put in my project main/res.\nNo matter how I change the place, it always shows the error <code>java.io.FileNotFoundException: Resource not found: /credentials.json</code></p>\n<p>I have tried the other way that I found in this post:\n<a href=\"https://stackoverflow.com/questions/59292883/java-io-filenotfoundexception-resource-not-found-credentials-json-on-java-qui\">java.io.FileNotFoundException: Resource not found: /credentials.json on Java QuickStart for Classroom API</a></p>\n<p>But still the same.\nCan anyone tell me how to fix it? I google it for a long time. Thanks\n<a href=\"https://i.stack.imgur.com/pbOQy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pbOQy.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","spring-boot","api","spring-security"],"answers":[{"comments":[{"owner":{"account_id":21274254,"reputation":407,"user_id":15653306,"display_name":"Routfin"},"score":0,"creation_date":1676731888,"post_id":75489533,"comment_id":133198309,"body_markdown":"if you can contribute","body":"if you can contribute"}],"tags":[],"owner":{"account_id":10637559,"reputation":2455,"user_id":7833793,"display_name":"R4N"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676715145,"creation_date":1676670697,"answer_id":75489533,"question_id":75489158,"body_markdown":"Without seeing your Postman request, my initial guess would be that it&#39;s the lack of CSRF (from your Postman request) which is causing the 401. You can read more about CSRF within Spring here: https://docs.spring.io/spring-security/site/docs/5.0.x/reference/html/csrf.html\r\n\r\nFrom that document:\r\n\r\n&gt; As of Spring Security 4.0, CSRF protection is enabled by default\r\n\r\nYou can test this theory by temporarily disabling CSRF as shown in the example configuration here:\r\n\r\nhttps://docs.spring.io/spring-security/site/docs/5.0.x/reference/html/csrf.html#csrf-configure\r\n\r\ni.e.:\r\n\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig {\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http\r\n            .csrf().disable()\r\n            .authorizeRequests()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n            .httpBasic();\r\n        return http.build();\r\n    }\r\n}\r\n```\r\n\r\nI&#39;d highly recommend reading the rest of the documentation to familiarize yourself with what CSRF protects against and whether it&#39;s an acceptable risk to turn it off (or selectively turn disable for certain paths) prior to disabling it in a production environment though.","title":"401 unauthorized even with correct username and password","body":"<p>Without seeing your Postman request, my initial guess would be that it's the lack of CSRF (from your Postman request) which is causing the 401. You can read more about CSRF within Spring here: <a href=\"https://docs.spring.io/spring-security/site/docs/5.0.x/reference/html/csrf.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/site/docs/5.0.x/reference/html/csrf.html</a></p>\n<p>From that document:</p>\n<blockquote>\n<p>As of Spring Security 4.0, CSRF protection is enabled by default</p>\n</blockquote>\n<p>You can test this theory by temporarily disabling CSRF as shown in the example configuration here:</p>\n<p><a href=\"https://docs.spring.io/spring-security/site/docs/5.0.x/reference/html/csrf.html#csrf-configure\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/site/docs/5.0.x/reference/html/csrf.html#csrf-configure</a></p>\n<p>i.e.:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n            .csrf().disable()\n            .authorizeRequests()\n                .anyRequest().authenticated()\n                .and()\n            .httpBasic();\n        return http.build();\n    }\n}\n</code></pre>\n<p>I'd highly recommend reading the rest of the documentation to familiarize yourself with what CSRF protects against and whether it's an acceptable risk to turn it off (or selectively turn disable for certain paths) prior to disabling it in a production environment though.</p>\n"}],"owner":{"account_id":21274254,"reputation":407,"user_id":15653306,"display_name":"Routfin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":243,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75489533,"answer_count":1,"score":0,"last_activity_date":1676715145,"creation_date":1676667263,"question_id":75489158,"body_markdown":"I&#39;m creating an user API and trying to implement an authentication method through Spring Boot security.\r\n\r\nEven using the correct password and the default Spring Security user `user`, my Postman still gives me an authorization error. I can&#39;t see where the problem is in this code.\r\n\r\n\r\nSecurity config:\r\n\r\n```java \r\npackage com.api.business_products_management.config;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig {\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http\r\n            .authorizeRequests()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n            .httpBasic();\r\n        return http.build();\r\n    }\r\n}\r\n```\r\n\r\nController:\r\n\r\n```java\r\npackage com.api.business_products_management.controllers;\r\n\r\nimport com.api.business_products_management.dtos.UserDto;\r\nimport com.api.business_products_management.models.UserModel;\r\nimport com.api.business_products_management.services.UserService;\r\nimport jakarta.validation.Valid;\r\nimport org.springframework.beans.BeanUtils;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\n@RestController\r\n@CrossOrigin(origins = &quot;*&quot;, maxAge = 3600)\r\n@RequestMapping(&quot;/user&quot;)\r\npublic class UserController {\r\n\r\n    private BCryptPasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n    final UserService userService;\r\n\r\n    public UserController(UserService userService) {\r\n        this.userService = userService;\r\n    }\r\n\r\n    @PostMapping\r\n    public ResponseEntity&lt;Object&gt; saveUser(@RequestBody @Valid UserDto userDto) {\r\n        var userModel = new UserModel();\r\n        BeanUtils.copyProperties(userDto, userModel);\r\n        userModel.setPassword(passwordEncoder().encode(userModel.getPassword()));\r\n        return ResponseEntity.status(HttpStatus.CREATED).body(userService.save(userModel));\r\n    }\r\n}\r\n```\r\n\r\nConsole:\r\n\r\n```\r\n2023-02-17T18:24:13.152-03:00  INFO 8418 --- [nio-8099-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;\r\n2023-02-17T18:24:13.152-03:00  INFO 8418 --- [nio-8099-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n2023-02-17T18:24:13.154-03:00  INFO 8418 --- [nio-8099-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\r\n```","title":"401 unauthorized even with correct username and password","body":"<p>I'm creating an user API and trying to implement an authentication method through Spring Boot security.</p>\n<p>Even using the correct password and the default Spring Security user <code>user</code>, my Postman still gives me an authorization error. I can't see where the problem is in this code.</p>\n<p>Security config:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.api.business_products_management.config;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.web.SecurityFilterChain;\n\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n            .authorizeRequests()\n                .anyRequest().authenticated()\n                .and()\n            .httpBasic();\n        return http.build();\n    }\n}\n</code></pre>\n<p>Controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.api.business_products_management.controllers;\n\nimport com.api.business_products_management.dtos.UserDto;\nimport com.api.business_products_management.models.UserModel;\nimport com.api.business_products_management.services.UserService;\nimport jakarta.validation.Valid;\nimport org.springframework.beans.BeanUtils;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\n@CrossOrigin(origins = &quot;*&quot;, maxAge = 3600)\n@RequestMapping(&quot;/user&quot;)\npublic class UserController {\n\n    private BCryptPasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n    final UserService userService;\n\n    public UserController(UserService userService) {\n        this.userService = userService;\n    }\n\n    @PostMapping\n    public ResponseEntity&lt;Object&gt; saveUser(@RequestBody @Valid UserDto userDto) {\n        var userModel = new UserModel();\n        BeanUtils.copyProperties(userDto, userModel);\n        userModel.setPassword(passwordEncoder().encode(userModel.getPassword()));\n        return ResponseEntity.status(HttpStatus.CREATED).body(userService.save(userModel));\n    }\n}\n</code></pre>\n<p>Console:</p>\n<pre><code>2023-02-17T18:24:13.152-03:00  INFO 8418 --- [nio-8099-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2023-02-17T18:24:13.152-03:00  INFO 8418 --- [nio-8099-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2023-02-17T18:24:13.154-03:00  INFO 8418 --- [nio-8099-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\n</code></pre>\n"},{"tags":["java","jpa","db2"],"comments":[{"owner":{"account_id":7888554,"reputation":3920,"user_id":5959625,"display_name":"MichaelTiefenbacher"},"score":0,"creation_date":1676660513,"post_id":75478418,"comment_id":133189156,"body_markdown":"Check out Db2 Sequences - they will generate the numbers for you and will not create such a &quot;hot spot&quot; causing locking problems.","body":"Check out Db2 Sequences - they will generate the numbers for you and will not create such a &quot;hot spot&quot; causing locking problems."},{"owner":{"account_id":4408873,"reputation":6996,"user_id":3592396,"display_name":"Lennart - Slava Ukraini"},"score":0,"creation_date":1676712916,"post_id":75478418,"comment_id":133195798,"body_markdown":"Do you have a relatively static number of types?","body":"Do you have a relatively static number of types?"}],"answers":[{"tags":[],"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676587875,"creation_date":1676587875,"answer_id":75478688,"question_id":75478418,"body_markdown":"You are locking the table, you should be doing a transaction.\r\n\r\n    BEGIN ATOMIC\r\n        SET OPERATION_NUMBER = (SELECT R08NRO + 1 FROM SMPORDD.R08FNTR where R08IDT = TYPE);\r\n        UPDATE SMPORDD.R08FNTR SET R08NRO = OPERATION_NUMBER  WHERE R08IDT = TYPE; \r\n        COMMIT;\r\n    END","title":"db2 create stored procedure to increment number","body":"<p>You are locking the table, you should be doing a transaction.</p>\n<pre><code>BEGIN ATOMIC\n    SET OPERATION_NUMBER = (SELECT R08NRO + 1 FROM SMPORDD.R08FNTR where R08IDT = TYPE);\n    UPDATE SMPORDD.R08FNTR SET R08NRO = OPERATION_NUMBER  WHERE R08IDT = TYPE; \n    COMMIT;\nEND\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14422603,"reputation":11689,"user_id":10418264,"display_name":"Mark Barinstein"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676611379,"creation_date":1676611379,"answer_id":75480525,"question_id":75478418,"body_markdown":"SQLCODE = [-913](https://www.ibm.com/docs/en/SSEPEK_12.0.0/codes/src/tpc/n913.html) is deadlock or timeout.  \r\nThe concurrency issue.\r\n\r\n&gt; **Explanation**  \r\n&gt; The application was the victim in a deadlock or\r\n&gt; experienced a timeout. The reason code indicates whether a deadlock or\r\n&gt; timeout occurred.\r\n&gt; \r\n&gt; ***reason-code***  \r\n&gt; The Db2 reason code value that indicates the reason for\r\n&gt; the failure. For explanations of reason codes, see Db2 reason codes.  \r\n&gt; \r\n&gt; ***resource-type and resource-name***  \r\n&gt; The type and name of the resource that\r\n&gt; the message identifies. For an explanation of resource-type and\r\n&gt; resource-name values, see Resource types.","title":"db2 create stored procedure to increment number","body":"<p>SQLCODE = <a href=\"https://www.ibm.com/docs/en/SSEPEK_12.0.0/codes/src/tpc/n913.html\" rel=\"nofollow noreferrer\">-913</a> is deadlock or timeout.<br />\nThe concurrency issue.</p>\n<blockquote>\n<p><strong>Explanation</strong><br />\nThe application was the victim in a deadlock or\nexperienced a timeout. The reason code indicates whether a deadlock or\ntimeout occurred.</p>\n<p><em><strong>reason-code</strong></em><br />\nThe Db2 reason code value that indicates the reason for\nthe failure. For explanations of reason codes, see Db2 reason codes.</p>\n<p><em><strong>resource-type and resource-name</strong></em><br />\nThe type and name of the resource that\nthe message identifies. For an explanation of resource-type and\nresource-name values, see Resource types.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4408873,"reputation":6996,"user_id":3592396,"display_name":"Lennart - Slava Ukraini"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676714950,"creation_date":1676714950,"answer_id":75492582,"question_id":75478418,"body_markdown":"As others have mentioned, using one or more sequence(s) will cause less lock contention. In addition, I&#39;m not 100% sure that your semaphore will work unless you use serializable isolation level (I think snapshot isolation level will also guarantee that, but it is not implemented in Db2).\r\n\r\nIf you don&#39;t mind gaps and that types get mixed from the same sequence, one sequence is the easiest possible scenario:\r\n\r\n    SELECT R08NRO AS OPERATION_NUMBER\r\n    FROM FINAL TABLE (\r\n        UPDATE SMPORDD.R08FNTR \r\n            SET R08NRO = NEXT VAL FOR &lt;THE_SEQUENCE&gt;\r\n        WHERE R08IDT = TYPE\r\n    );\r\n\r\nIf needed, you can create one sequence per type and use dynamic sql to construct the name of the sequence (still wont prevent gaps though, a sequence number is consumed when it is pulled from the sequence, say in case of rollback)\r\n\r\nWhat you are trying to do was a popular pattern in the beginning of the Java EE era. I get the impression that it was massively abandoned due to the problems it caused.  ","title":"db2 create stored procedure to increment number","body":"<p>As others have mentioned, using one or more sequence(s) will cause less lock contention. In addition, I'm not 100% sure that your semaphore will work unless you use serializable isolation level (I think snapshot isolation level will also guarantee that, but it is not implemented in Db2).</p>\n<p>If you don't mind gaps and that types get mixed from the same sequence, one sequence is the easiest possible scenario:</p>\n<pre><code>SELECT R08NRO AS OPERATION_NUMBER\nFROM FINAL TABLE (\n    UPDATE SMPORDD.R08FNTR \n        SET R08NRO = NEXT VAL FOR &lt;THE_SEQUENCE&gt;\n    WHERE R08IDT = TYPE\n);\n</code></pre>\n<p>If needed, you can create one sequence per type and use dynamic sql to construct the name of the sequence (still wont prevent gaps though, a sequence number is consumed when it is pulled from the sequence, say in case of rollback)</p>\n<p>What you are trying to do was a popular pattern in the beginning of the Java EE era. I get the impression that it was massively abandoned due to the problems it caused.</p>\n"}],"owner":{"account_id":27806816,"reputation":1,"user_id":21230026,"display_name":"ca_san_sal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1676714950,"creation_date":1676585427,"question_id":75478418,"body_markdown":"I need create a new stored to increment a number, but I need what the table is locked before.\r\n\r\n\r\n\r\nI coded this code:\r\n\r\n```\r\nCREATE OR REPLACE PROCEDURE GET_NEXT_OPERATION_NUMBER (\r\n\t\tIN TYPE INTEGER,\r\n\t\tOUT OPERATION_NUMBER INTEGER\r\n)\r\n\tDYNAMIC RESULT SETS 1 \r\n\tLANGUAGE SQL \r\n\tNOT DETERMINISTIC \r\n\tMODIFIES SQL DATA \r\n\tCALLED ON NULL INPUT \r\n\tSET OPTION  ALWBLK = *ALLREAD , \r\n\tALWCPYDTA = *OPTIMIZE , \r\n\tCOMMIT = *CS , \r\n\tDECRESULT = (31, 31, 00) , \r\n\tDFTRDBCOL = *NONE , \r\n\tDYNDFTCOL = *NO , \r\n\tDYNUSRPRF = *USER , \r\n\tSRTSEQ = *HEX \r\nP1: BEGIN\r\n\r\n    LOCK TABLE SMPORDD.R08FNTR IN EXCLUSIVE MODE;\r\n\r\n    SET OPERATION_NUMBER = (SELECT R08NRO FROM SMPORDD.R08FNTR where R08IDT = TYPE);\r\n \r\n    SET OPERATION_NUMBER = OPERATION_NUMBER + 1;\r\n   \r\n    UPDATE SMPORDD.R08FNTR SET R08NRO = OPERATION_NUMBER  WHERE R08IDT = TYPE; \r\n \r\n    COMMIT;\r\nEND P1\r\n```\r\n\r\nSomeone can validate that?\r\n\r\nI get this error when I execute in java jpa.\r\n\r\n`11:47:50,828 WARN  [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] (default task-11) SQL Error: -913, SQLState: 57033\r\n11:47:50,831 ERROR [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] (default task-11) [SQL0913] Fila u objeto R08FNTR en SMPORDD tipo *FILE utiliz&#225;ndose.`","title":"db2 create stored procedure to increment number","body":"<p>I need create a new stored to increment a number, but I need what the table is locked before.</p>\n<p>I coded this code:</p>\n<pre><code>CREATE OR REPLACE PROCEDURE GET_NEXT_OPERATION_NUMBER (\n        IN TYPE INTEGER,\n        OUT OPERATION_NUMBER INTEGER\n)\n    DYNAMIC RESULT SETS 1 \n    LANGUAGE SQL \n    NOT DETERMINISTIC \n    MODIFIES SQL DATA \n    CALLED ON NULL INPUT \n    SET OPTION  ALWBLK = *ALLREAD , \n    ALWCPYDTA = *OPTIMIZE , \n    COMMIT = *CS , \n    DECRESULT = (31, 31, 00) , \n    DFTRDBCOL = *NONE , \n    DYNDFTCOL = *NO , \n    DYNUSRPRF = *USER , \n    SRTSEQ = *HEX \nP1: BEGIN\n\n    LOCK TABLE SMPORDD.R08FNTR IN EXCLUSIVE MODE;\n\n    SET OPERATION_NUMBER = (SELECT R08NRO FROM SMPORDD.R08FNTR where R08IDT = TYPE);\n \n    SET OPERATION_NUMBER = OPERATION_NUMBER + 1;\n   \n    UPDATE SMPORDD.R08FNTR SET R08NRO = OPERATION_NUMBER  WHERE R08IDT = TYPE; \n \n    COMMIT;\nEND P1\n</code></pre>\n<p>Someone can validate that?</p>\n<p>I get this error when I execute in java jpa.</p>\n<p><code>11:47:50,828 WARN  [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] (default task-11) SQL Error: -913, SQLState: 57033 11:47:50,831 ERROR [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] (default task-11) [SQL0913] Fila u objeto R08FNTR en SMPORDD tipo *FILE utilizándose.</code></p>\n"},{"tags":["java","spring-boot","openid-connect","siteminder","oauth2client"],"comments":[{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1676716178,"post_id":75492560,"comment_id":133196178,"body_markdown":"Which OIDC provider? If you deploy it to your &quot;server&quot; then the redirect has to be to &quot;https://yourserver/. . . .&quot;.","body":"Which OIDC provider? If you deploy it to your &quot;server&quot; then the redirect has to be to &quot;<a href=\"https://yourserver/\" rel=\"nofollow noreferrer\">yourserver</a>. . . .&quot;."},{"owner":{"account_id":26350,"reputation":17454,"user_id":68490,"accept_rate":20,"display_name":"Tore Nestenius"},"score":0,"creation_date":1676882526,"post_id":75492560,"comment_id":133219907,"body_markdown":"also, often you will have problems with your cookies if you are using HTTP, HTTPS is today less problematic.","body":"also, often you will have problems with your cookies if you are using HTTP, HTTPS is today less problematic."}],"owner":{"account_id":1329874,"reputation":370,"user_id":1274000,"display_name":"Aghil Varghese"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":181,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1676714665,"creation_date":1676714665,"question_id":75492560,"body_markdown":"Creating a Springboot oauth2 client to integrate an OIDC provider login in the application.\r\nBut the OIDC provider not allowing redirect URLs (working on authorization code flow) with the format of http://localhost:&lt;port&gt; or http://localhost\r\n\r\nSo every time I want to deploy the code changes to the server to check its working and not able to debug in my development environment.\r\n\r\nI&#39;m using my company-provided machine for the development, which not allow to install ngrok.\r\n\r\nCan someone please help me to find a way to do the development and debug in my dev machine.","title":"OAuth2 client - redirect url not allow localhost","body":"<p>Creating a Springboot oauth2 client to integrate an OIDC provider login in the application.\nBut the OIDC provider not allowing redirect URLs (working on authorization code flow) with the format of http://localhost: or http://localhost</p>\n<p>So every time I want to deploy the code changes to the server to check its working and not able to debug in my development environment.</p>\n<p>I'm using my company-provided machine for the development, which not allow to install ngrok.</p>\n<p>Can someone please help me to find a way to do the development and debug in my dev machine.</p>\n"},{"tags":["java","google-cloud-platform","google-cloud-tasks"],"owner":{"account_id":110626,"reputation":7192,"user_id":292662,"accept_rate":90,"display_name":"3urdoch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1676713164,"creation_date":1676713164,"question_id":75492443,"body_markdown":"I have some code in a Cloud Run-hosted service which sends a scheduled request back to itself via Cloud Tasks. As with all Google java libraries, the cloud tasks library quite happily authenticates via the application default credentials provided via Cloud Run.\r\n\r\nHowever, in order for the scheduled request to then authenticate, I&#39;d need to configure the authentication in the request back to the endpoint that is requested via cloud tasks, the cloud tasks SDK provides such a facility, like in the example below.\r\n\r\n               // Construct the task body.\r\n               Task.Builder taskBuilder = Task.newBuilder()\r\n                        .setHttpRequest(\r\n                                 HttpRequest.newBuilder()\r\n                                          .setUrl( endpoint )\r\n                                          .setHttpMethod( HttpMethod.GET )\r\n                                          .setOidcToken( OidcToken.newBuilder()\r\n                                                   .setServiceAccountEmail( requestServiceAccountEmail )\r\n                                                   .setAudience( audience ).build() )\r\n                                          .build() )\r\n                        .setScheduleTime( Timestamp.newBuilder().setSeconds( taskTime.getEpochSecond() ) );\r\n\r\n               // Send create task request.\r\n               client.createTask( queuePath, taskBuilder.build() );\r\n\r\n\r\nThis works perfectly, however its having to specify `requestServiceAccountEmail` means I need to pass in the service account email via an environment variable or via application config, which feels a but un-neccesary as we can get the credentials for most services via the application-default credentials.\r\n\r\nIs there a better method to authenticate the request here, or at the a convenient method to determine the current service-account email that the service is running as via the google cloud auth library?\r\n\r\nI&#39;ve checked the `GoogleCredentials.getApplicationDefault()` API which doesn&#39;t appear to provide the email address of the default credentials.","title":"Get application-default service account email in java","body":"<p>I have some code in a Cloud Run-hosted service which sends a scheduled request back to itself via Cloud Tasks. As with all Google java libraries, the cloud tasks library quite happily authenticates via the application default credentials provided via Cloud Run.</p>\n<p>However, in order for the scheduled request to then authenticate, I'd need to configure the authentication in the request back to the endpoint that is requested via cloud tasks, the cloud tasks SDK provides such a facility, like in the example below.</p>\n<pre><code>           // Construct the task body.\n           Task.Builder taskBuilder = Task.newBuilder()\n                    .setHttpRequest(\n                             HttpRequest.newBuilder()\n                                      .setUrl( endpoint )\n                                      .setHttpMethod( HttpMethod.GET )\n                                      .setOidcToken( OidcToken.newBuilder()\n                                               .setServiceAccountEmail( requestServiceAccountEmail )\n                                               .setAudience( audience ).build() )\n                                      .build() )\n                    .setScheduleTime( Timestamp.newBuilder().setSeconds( taskTime.getEpochSecond() ) );\n\n           // Send create task request.\n           client.createTask( queuePath, taskBuilder.build() );\n</code></pre>\n<p>This works perfectly, however its having to specify <code>requestServiceAccountEmail</code> means I need to pass in the service account email via an environment variable or via application config, which feels a but un-neccesary as we can get the credentials for most services via the application-default credentials.</p>\n<p>Is there a better method to authenticate the request here, or at the a convenient method to determine the current service-account email that the service is running as via the google cloud auth library?</p>\n<p>I've checked the <code>GoogleCredentials.getApplicationDefault()</code> API which doesn't appear to provide the email address of the default credentials.</p>\n"},{"tags":["java","sql","spring-boot"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1676571816,"post_id":75476428,"comment_id":133168734,"body_markdown":"You only select some columns, not the complete object of type `OSColab` which you exect as the result. Try changing `List&lt;OSColab&gt; getOSColabSumBetweenDates`to `List&lt;Object[]&gt; getOSColabSumBetweenDates`","body":"You only select some columns, not the complete object of type <code>OSColab</code> which you exect as the result. Try changing <code>List&lt;OSColab&gt; getOSColabSumBetweenDates</code>to <code>List&lt;Object[]&gt; getOSColabSumBetweenDates</code>"},{"owner":{"account_id":24186002,"reputation":3,"user_id":18852868,"display_name":"Joao Ortega"},"score":0,"creation_date":1676683808,"post_id":75476428,"comment_id":133193294,"body_markdown":"@Jens That&#39;s it! That is exactly what I needed to do. Now I see what was wrong with my code. If you write it as a reply I&#39;ll flag it as the solution. Thank you very much.","body":"@Jens That&#39;s it! That is exactly what I needed to do. Now I see what was wrong with my code. If you write it as a reply I&#39;ll flag it as the solution. Thank you very much."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1676712752,"post_id":75476428,"comment_id":133195779,"body_markdown":"You are welcome. I have added it as answer.","body":"You are welcome. I have added it as answer."}],"answers":[{"comments":[{"owner":{"account_id":24186002,"reputation":3,"user_id":18852868,"display_name":"Joao Ortega"},"score":0,"creation_date":1676582735,"post_id":75477429,"comment_id":133171672,"body_markdown":"But tb_oscolab.id will never be equals to tb_os.id\nThe reference to tb_os in tb_oscolab is os_id, not tb_oscolab.id","body":"But tb_oscolab.id will never be equals to tb_os.id The reference to tb_os in tb_oscolab is os_id, not tb_oscolab.id"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1676979372,"post_id":75477429,"comment_id":133241929,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/75477429/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":9780343,"reputation":1,"user_id":21157488,"display_name":"Prateek Garg"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1676671190,"creation_date":1676578306,"answer_id":75477429,"question_id":75476428,"body_markdown":"try doing this\r\n\r\n     @Query(value = &quot;SELECT colaborador_id, SUM(totalareceber) FROM tb_oscolab INNER JOIN tb_os ON tb_oscolab.id = tb_os.id WHERE tb_os.data_inicio BETWEEN :startDate AND :endDate GROUP BY colaborador_id&quot;, nativeQuery = true) ","title":"SQL Query error message showing &#39;id not found&#39; in Spring Boot","body":"<p>try doing this</p>\n<pre><code> @Query(value = &quot;SELECT colaborador_id, SUM(totalareceber) FROM tb_oscolab INNER JOIN tb_os ON tb_oscolab.id = tb_os.id WHERE tb_os.data_inicio BETWEEN :startDate AND :endDate GROUP BY colaborador_id&quot;, nativeQuery = true) \n</code></pre>\n"},{"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676712713,"creation_date":1676712713,"answer_id":75492405,"question_id":75476428,"body_markdown":"You only select some columns, not the complete object of type `OSColab` which you exect as the result. Changing `List&lt;OSColab&gt; getOSColabSumBetweenDates` to `List&lt;Object[]&gt; getOSColabSumBetweenDates`","title":"SQL Query error message showing &#39;id not found&#39; in Spring Boot","body":"<p>You only select some columns, not the complete object of type <code>OSColab</code> which you exect as the result. Changing <code>List&lt;OSColab&gt; getOSColabSumBetweenDates</code> to <code>List&lt;Object[]&gt; getOSColabSumBetweenDates</code></p>\n"}],"owner":{"account_id":24186002,"reputation":3,"user_id":18852868,"display_name":"Joao Ortega"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":387,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75492405,"answer_count":2,"score":-1,"last_activity_date":1676712713,"creation_date":1676571661,"question_id":75476428,"body_markdown":"I don&#39;t know what may be causing this error.\r\nI need to sum all the values of column totalareceber from tb_oscolab in a way that each line contains a colaborador_id and its total value. The period must be within the dates from another table named tb_os as data_inicio.\r\nThis is my query in Spring boot and it seems to be correct:\r\n\r\n```\r\npublic interface OSColabRepository extends JpaRepository&lt;OSColab, Long&gt; {\r\n\r\n\t@Query(value = &quot;SELECT colaborador_id, SUM(totalareceber) FROM tb_oscolab INNER JOIN tb_os ON tb_oscolab.os_id = tb_os.id WHERE tb_os.data_inicio BETWEEN :startDate AND :endDate GROUP BY colaborador_id&quot;, nativeQuery = true) \r\n\tList&lt;OSColab&gt; getOSColabSumBetweenDates(@Param(&quot;startDate&quot;) Date startDate, @Param(&quot;endDate&quot;) Date endDate);\r\n\r\n}\r\n```\r\n\r\nBut it is returning:\r\nSQL Error: 0, SQLState: S0022\r\njava.sql.SQLException: Column &#39;id&#39; not found.\r\n\r\nBut there is a column id in both tb_os and tb_oscolab\r\n\r\nOS\r\n```\r\n\t@Id\r\n\t@Column(name=&quot;id&quot;)\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n```\r\n\r\nOSCOLAB\r\n```\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n```\r\n\r\n\r\n\r\n\r\nI found these articles, but I could not understand the solution very well as I&#39;m a starter:\r\nhttps://stackoverflow.com/questions/36913095/sql-query-returning-column-id-not-found-in-spring-boot\r\nhttps://pt.stackoverflow.com/questions/473427/java-sql-sqlexception-column-id-not-found\r\n\r\nCould someone please help me to identify the problem here?","title":"SQL Query error message showing &#39;id not found&#39; in Spring Boot","body":"<p>I don't know what may be causing this error.\nI need to sum all the values of column totalareceber from tb_oscolab in a way that each line contains a colaborador_id and its total value. The period must be within the dates from another table named tb_os as data_inicio.\nThis is my query in Spring boot and it seems to be correct:</p>\n<pre><code>public interface OSColabRepository extends JpaRepository&lt;OSColab, Long&gt; {\n\n    @Query(value = &quot;SELECT colaborador_id, SUM(totalareceber) FROM tb_oscolab INNER JOIN tb_os ON tb_oscolab.os_id = tb_os.id WHERE tb_os.data_inicio BETWEEN :startDate AND :endDate GROUP BY colaborador_id&quot;, nativeQuery = true) \n    List&lt;OSColab&gt; getOSColabSumBetweenDates(@Param(&quot;startDate&quot;) Date startDate, @Param(&quot;endDate&quot;) Date endDate);\n\n}\n</code></pre>\n<p>But it is returning:\nSQL Error: 0, SQLState: S0022\njava.sql.SQLException: Column 'id' not found.</p>\n<p>But there is a column id in both tb_os and tb_oscolab</p>\n<p>OS</p>\n<pre><code>    @Id\n    @Column(name=&quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n</code></pre>\n<p>OSCOLAB</p>\n<pre><code>    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n</code></pre>\n<p>I found these articles, but I could not understand the solution very well as I'm a starter:\n<a href=\"https://stackoverflow.com/questions/36913095/sql-query-returning-column-id-not-found-in-spring-boot\">SQL Query returning column &#39;id&#39; not found in Spring Boot</a>\n<a href=\"https://pt.stackoverflow.com/questions/473427/java-sql-sqlexception-column-id-not-found\">https://pt.stackoverflow.com/questions/473427/java-sql-sqlexception-column-id-not-found</a></p>\n<p>Could someone please help me to identify the problem here?</p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"answers":[{"comments":[{"owner":{"account_id":9909099,"reputation":11,"user_id":7336539,"display_name":"Huỳnh Nguyễn Ngọc Hải"},"score":0,"creation_date":1676713567,"post_id":75492376,"comment_id":133195877,"body_markdown":"I assume that there is only 1 field name but when there are more fields such as date of birth, country, etc... then JPA keep creating new entity with every field will be the same. Can I use equals() to let JPA know there is already an existing author ?","body":"I assume that there is only 1 field name but when there are more fields such as date of birth, country, etc... then JPA keep creating new entity with every field will be the same. Can I use equals() to let JPA know there is already an existing author ?"},{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1676713832,"post_id":75492376,"comment_id":133195916,"body_markdown":"If you have other identifiers (DoB, etc.) then they can be used in searching the database for a matching entity. You still have to search yourself, `Object.equals` can&#39;t do it.","body":"If you have other identifiers (DoB, etc.) then they can be used in searching the database for a matching entity. You still have to search yourself, <code>Object.equals</code> can&#39;t do it."}],"tags":[],"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676712444,"creation_date":1676712444,"answer_id":75492376,"question_id":75492302,"body_markdown":"How can JPA know if there aren&#39;t 2 authors with the same name? It can&#39;t.\r\n\r\nIf you want to &#39;reuse&#39; an existing author then you have to locate and set that yourself.\r\n\r\nA little tip, do NOT use the classes in your database model for your DTOs.","title":"Add an existing entity instead of creating new entity in a many-to-many relationship in Spring JPA","body":"<p>How can JPA know if there aren't 2 authors with the same name? It can't.</p>\n<p>If you want to 'reuse' an existing author then you have to locate and set that yourself.</p>\n<p>A little tip, do NOT use the classes in your database model for your DTOs.</p>\n"}],"owner":{"account_id":9909099,"reputation":11,"user_id":7336539,"display_name":"Huỳnh Nguyễn Ngọc Hải"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":238,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676712444,"creation_date":1676711470,"question_id":75492302,"body_markdown":"I have Book entity and Author entity having many-to-many relationship. I have a book like this: (**author A has id=1** in database and I use @GeneratedValue(strategy = GenerationType.IDENTITY) so I don&#39;t want to add id)\r\n``` json\r\n{\r\n  &quot;id&quot;: 1,\r\n  &quot;name&quot;: &quot;Spring Boot 1&quot;\r\n  &quot;authors&quot;: [\r\n     {\r\n        &quot;name&quot;: &quot;A&quot;\r\n     }\r\n  ]\r\n}\r\n```\r\nThen I create another book like this\r\n``` json\r\n{\r\n  &quot;id&quot;: 2,\r\n  &quot;name&quot;: &quot;Spring Boot 2&quot;\r\n  &quot;authors&quot;: [\r\n     {\r\n        &quot;name&quot;: &quot;A&quot;\r\n     },\r\n     {\r\n        &quot;name&quot;: &quot;B&quot;\r\n     }\r\n  ]\r\n}\r\n```\r\nThe problem is Spring JPA will create another **author &quot;A&quot; with id=2** in the database and **author &quot;B&quot; with id=3**. &lt;br&gt;\r\nWhat I want is JPA use **existing author &quot;A&quot;** and create an **author &quot;B&quot; with id = 2**. &lt;br&gt; &lt;br&gt;\r\n**Book**\r\n```java\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;book&quot;)\r\npublic class Book {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    @Column\r\n    private String name;\r\n    @Column\r\n    private double price;\r\n    @ManyToMany(\r\n            cascade = CascadeType.ALL,\r\n            fetch = FetchType.LAZY\r\n    )\r\n    @JoinTable(\r\n            name = &quot;book_author&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;book_id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;author_id&quot;)\r\n    )\r\n    @JsonIgnoreProperties(&quot;books&quot;)\r\n    private List&lt;Author&gt; authors = new ArrayList&lt;&gt;();\r\n}\r\n```\r\n**BookService**\r\n```java\r\n@Service\r\n\r\npublic class BookService {\r\n    @Autowired\r\n    BookRepository bookRepository;\r\n\r\n    public List&lt;Book&gt; getAllBook() {\r\n        return bookRepository.findAll();\r\n    }\r\n\r\n    public Book saveBook (Book book) {\r\n        return bookRepository.save(book);\r\n    }\r\n\r\n    public void deleteBook(Long id) {\r\n        bookRepository.deleteBookById(id);\r\n    }\r\n}\r\n```\r\n**BookController**\r\n```java\r\n@RestController\r\n@RequestMapping(&quot;/book&quot;)\r\npublic class BookController {\r\n    @Autowired\r\n    BookService bookService;\r\n    @GetMapping\r\n    public ResponseEntity&lt;List&lt;Book&gt;&gt; getAllBook() {\r\n        return new ResponseEntity&lt;List&lt;Book&gt;&gt;(bookService.getAllBook(), HttpStatus.OK);\r\n    }\r\n    @PostMapping\r\n    public ResponseEntity&lt;Book&gt; saveBook(@RequestBody Book book) {\r\n        return new ResponseEntity&lt;Book&gt;(bookService.saveBook(book), HttpStatus.CREATED);\r\n    }\r\n}\r\n```\r\n**Author**\r\n```java\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;author&quot;)\r\npublic class Author {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    @Column\r\n    private String name;\r\n\r\n    @ManyToMany(mappedBy = &quot;authors&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n    @JsonIgnoreProperties(&quot;authors&quot;)\r\n    private List&lt;Book&gt; books = new ArrayList&lt;&gt;();\r\n}\r\n```\r\n**AuthorService and AuthorController are similar to Book** &lt;br&gt; &lt;br&gt;\r\n**Is there any annotations or query available to fix this problem ? ? Or what is the most efficient way to do it ?** &lt;br&gt; &lt;br&gt;\r\nI don&#39;t want to use this solution below because I think there is a solution available in JPA, shorter and more efficient than this and I just don&#39;t know &lt;br&gt;\r\nI illustrate this method using ChatGPT\r\n``` java\r\npublic ResponseEntity&lt;Book&gt; createBook(@RequestBody Book book) {\r\n        for (Author author : book.getAuthors()) {\r\n            Optional&lt;Author&gt; existingAuthor = authorRepository.findOne(\r\n                Example.of(author, ExampleMatcher.matching().withIgnorePaths(&quot;id&quot;))\r\n            );\r\n            if (existingAuthor.isPresent()) {\r\n                book.addAuthor(existingAuthor.get());\r\n            }\r\n        }\r\n        Book savedBook = bookService.save(book);\r\n        return ResponseEntity.created(URI.create(&quot;/books/&quot; + savedBook.getId())).body(savedBook);\r\n    }\r\n```\r\n\r\n\r\n\r\n \r\n","title":"Add an existing entity instead of creating new entity in a many-to-many relationship in Spring JPA","body":"<p>I have Book entity and Author entity having many-to-many relationship. I have a book like this: (<strong>author A has id=1</strong> in database and I use @GeneratedValue(strategy = GenerationType.IDENTITY) so I don't want to add id)</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;id&quot;: 1,\n  &quot;name&quot;: &quot;Spring Boot 1&quot;\n  &quot;authors&quot;: [\n     {\n        &quot;name&quot;: &quot;A&quot;\n     }\n  ]\n}\n</code></pre>\n<p>Then I create another book like this</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;id&quot;: 2,\n  &quot;name&quot;: &quot;Spring Boot 2&quot;\n  &quot;authors&quot;: [\n     {\n        &quot;name&quot;: &quot;A&quot;\n     },\n     {\n        &quot;name&quot;: &quot;B&quot;\n     }\n  ]\n}\n</code></pre>\n<p>The problem is Spring JPA will create another <strong>author &quot;A&quot; with id=2</strong> in the database and <strong>author &quot;B&quot; with id=3</strong>. <br>\nWhat I want is JPA use <strong>existing author &quot;A&quot;</strong> and create an <strong>author &quot;B&quot; with id = 2</strong>. <br> <br>\n<strong>Book</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;book&quot;)\npublic class Book {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    @Column\n    private String name;\n    @Column\n    private double price;\n    @ManyToMany(\n            cascade = CascadeType.ALL,\n            fetch = FetchType.LAZY\n    )\n    @JoinTable(\n            name = &quot;book_author&quot;,\n            joinColumns = @JoinColumn(name = &quot;book_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;author_id&quot;)\n    )\n    @JsonIgnoreProperties(&quot;books&quot;)\n    private List&lt;Author&gt; authors = new ArrayList&lt;&gt;();\n}\n</code></pre>\n<p><strong>BookService</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n\npublic class BookService {\n    @Autowired\n    BookRepository bookRepository;\n\n    public List&lt;Book&gt; getAllBook() {\n        return bookRepository.findAll();\n    }\n\n    public Book saveBook (Book book) {\n        return bookRepository.save(book);\n    }\n\n    public void deleteBook(Long id) {\n        bookRepository.deleteBookById(id);\n    }\n}\n</code></pre>\n<p><strong>BookController</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(&quot;/book&quot;)\npublic class BookController {\n    @Autowired\n    BookService bookService;\n    @GetMapping\n    public ResponseEntity&lt;List&lt;Book&gt;&gt; getAllBook() {\n        return new ResponseEntity&lt;List&lt;Book&gt;&gt;(bookService.getAllBook(), HttpStatus.OK);\n    }\n    @PostMapping\n    public ResponseEntity&lt;Book&gt; saveBook(@RequestBody Book book) {\n        return new ResponseEntity&lt;Book&gt;(bookService.saveBook(book), HttpStatus.CREATED);\n    }\n}\n</code></pre>\n<p><strong>Author</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;author&quot;)\npublic class Author {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    @Column\n    private String name;\n\n    @ManyToMany(mappedBy = &quot;authors&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n    @JsonIgnoreProperties(&quot;authors&quot;)\n    private List&lt;Book&gt; books = new ArrayList&lt;&gt;();\n}\n</code></pre>\n<p><strong>AuthorService and AuthorController are similar to Book</strong> <br> <br>\n<strong>Is there any annotations or query available to fix this problem ? ? Or what is the most efficient way to do it ?</strong> <br> <br>\nI don't want to use this solution below because I think there is a solution available in JPA, shorter and more efficient than this and I just don't know <br>\nI illustrate this method using ChatGPT</p>\n<pre class=\"lang-java prettyprint-override\"><code>public ResponseEntity&lt;Book&gt; createBook(@RequestBody Book book) {\n        for (Author author : book.getAuthors()) {\n            Optional&lt;Author&gt; existingAuthor = authorRepository.findOne(\n                Example.of(author, ExampleMatcher.matching().withIgnorePaths(&quot;id&quot;))\n            );\n            if (existingAuthor.isPresent()) {\n                book.addAuthor(existingAuthor.get());\n            }\n        }\n        Book savedBook = bookService.save(book);\n        return ResponseEntity.created(URI.create(&quot;/books/&quot; + savedBook.getId())).body(savedBook);\n    }\n</code></pre>\n"},{"tags":["java","arrays","java-stream","hashset"],"answers":[{"tags":[],"owner":{"account_id":27817642,"reputation":21,"user_id":21238702,"display_name":"pitpet"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1676709392,"creation_date":1676709365,"answer_id":75492135,"question_id":75492125,"body_markdown":"Try to convert IntStream:\r\n```\r\nSet&lt;Integer&gt; orderSet = Arrays.stream(arr).boxed().collect(Collectors.toSet());\r\n\r\n```","title":"java Failed to convert int array to Set using Collectors.toSet()","body":"<p>Try to convert IntStream:</p>\n<pre><code>Set&lt;Integer&gt; orderSet = Arrays.stream(arr).boxed().collect(Collectors.toSet());\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1676711011,"creation_date":1676711011,"answer_id":75492263,"question_id":75492125,"body_markdown":"Your `arr` is an `int[]`. That means you&#39;re calling [`Arrays#stream(int[])`][1], which returns an [`IntStream`][2]. But none of the primitive stream interfaces&lt;sup&gt;**1**&lt;/sup&gt; have a `#collect(Collector)` method. You have to convert the `IntStream` into a `Stream&lt;Integer&gt;`. The easiest way to do that is with the [`IntStream#boxed()`][3] method.\r\n\r\n```lang-java\r\nint[] arr = {2, 5, 2, 4, 6, 6, 1, 5, 4};\r\n\r\nSet&lt;Integer&gt; set =\r\n        Arrays.stream(arr)                  // IntStream\r\n              .boxed()                      // Stream&lt;Integer&gt;\r\n              .collect(Collectors.toSet()); // Set&lt;Integer&gt;\r\n```\r\n\r\nAs for why the following doesn&#39;t work:\r\n\r\n```lang-java\r\nSet&lt;Integer&gt; set = new HashSet&lt;&gt;(Arrays.asList(arr));\r\n```\r\n\r\nThat&#39;s due to `Arrays.asList(arr)` returning a `List&lt;int[]&gt;` rather than a `List&lt;Integer&gt;`. \r\n\r\nNeither primitives nor arrays work especially well with generics. Arrays of primitives are worse. A primitive can at least be auto-boxed to the reference type (and vice versa, i.e., unboxed) when appropriate. But primitive arrays have no such special treatment.\r\n\r\n---\r\n\r\n&lt;sup&gt;**1.** The primitive stream interfaces include `IntStream`, `LongStream`, and `DoubleStream`.&lt;/sup&gt;\r\n\r\n\r\n\r\n\r\n\r\n\r\n   [1]: https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Arrays.html#stream(int[])\r\n   [2]: https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/stream/IntStream.html\r\n   [3]: https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/stream/IntStream.html#boxed()","title":"java Failed to convert int array to Set using Collectors.toSet()","body":"<p>Your <code>arr</code> is an <code>int[]</code>. That means you're calling <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Arrays.html#stream(int%5B%5D)\" rel=\"nofollow noreferrer\"><code>Arrays#stream(int[])</code></a>, which returns an <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/stream/IntStream.html\" rel=\"nofollow noreferrer\"><code>IntStream</code></a>. But none of the primitive stream interfaces<sup><strong>1</strong></sup> have a <code>#collect(Collector)</code> method. You have to convert the <code>IntStream</code> into a <code>Stream&lt;Integer&gt;</code>. The easiest way to do that is with the <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/stream/IntStream.html#boxed()\" rel=\"nofollow noreferrer\"><code>IntStream#boxed()</code></a> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] arr = {2, 5, 2, 4, 6, 6, 1, 5, 4};\n\nSet&lt;Integer&gt; set =\n        Arrays.stream(arr)                  // IntStream\n              .boxed()                      // Stream&lt;Integer&gt;\n              .collect(Collectors.toSet()); // Set&lt;Integer&gt;\n</code></pre>\n<p>As for why the following doesn't work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Set&lt;Integer&gt; set = new HashSet&lt;&gt;(Arrays.asList(arr));\n</code></pre>\n<p>That's due to <code>Arrays.asList(arr)</code> returning a <code>List&lt;int[]&gt;</code> rather than a <code>List&lt;Integer&gt;</code>.</p>\n<p>Neither primitives nor arrays work especially well with generics. Arrays of primitives are worse. A primitive can at least be auto-boxed to the reference type (and vice versa, i.e., unboxed) when appropriate. But primitive arrays have no such special treatment.</p>\n<hr />\n<p><sup><strong>1.</strong> The primitive stream interfaces include <code>IntStream</code>, <code>LongStream</code>, and <code>DoubleStream</code>.</sup></p>\n"}],"owner":{"account_id":24987,"reputation":30045,"user_id":63898,"accept_rate":64,"display_name":"user63898"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":224,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1676711017,"accepted_answer_id":75492263,"answer_count":2,"score":0,"last_activity_date":1676711348,"creation_date":1676709134,"question_id":75492125,"body_markdown":"i can&#39;t understand basic thing here i have : \r\n\r\n     int[] arr = {2,5,2,4,6,6,1,5,4};\r\n            Set&lt;Integer&gt; orederSet  = new HashSet&lt;Integer&gt;(Arrays.stream(arr).collect(Collectors.toSet()));\r\n\r\nside note : \r\nalso this not working : \r\n\r\n    Set&lt;Integer&gt; orederSet  = new HashSet&lt;Integer&gt;(Arrays.asList(arr));\r\n\r\nwhich gives me compile error :\r\n\r\n    java: method collect in interface java.util.stream.IntStream cannot be applied to given types;\r\n      required: java.util.function.Supplier&lt;R&gt;,java.util.function.ObjIntConsumer&lt;R&gt;,java.util.function.BiConsumer&lt;R,R&gt;\r\n      found: java.util.stream.Collector&lt;java.lang.Object,capture#1 of ?,java.util.Set&lt;java.lang.Object&gt;&gt;\r\n      reason: cannot infer type-variable(s) R\r\n        (actual and formal argument lists differ in length) \r\n\r\nI dont understand what is wrong in my code .. ","title":"java Failed to convert int array to Set using Collectors.toSet()","body":"<p>i can't understand basic thing here i have :</p>\n<pre><code> int[] arr = {2,5,2,4,6,6,1,5,4};\n        Set&lt;Integer&gt; orederSet  = new HashSet&lt;Integer&gt;(Arrays.stream(arr).collect(Collectors.toSet()));\n</code></pre>\n<p>side note :\nalso this not working :</p>\n<pre><code>Set&lt;Integer&gt; orederSet  = new HashSet&lt;Integer&gt;(Arrays.asList(arr));\n</code></pre>\n<p>which gives me compile error :</p>\n<pre><code>java: method collect in interface java.util.stream.IntStream cannot be applied to given types;\n  required: java.util.function.Supplier&lt;R&gt;,java.util.function.ObjIntConsumer&lt;R&gt;,java.util.function.BiConsumer&lt;R,R&gt;\n  found: java.util.stream.Collector&lt;java.lang.Object,capture#1 of ?,java.util.Set&lt;java.lang.Object&gt;&gt;\n  reason: cannot infer type-variable(s) R\n    (actual and formal argument lists differ in length) \n</code></pre>\n<p>I dont understand what is wrong in my code ..</p>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1676711702,"post_id":75492258,"comment_id":133195661,"body_markdown":"Start learning here: https://spring.io/projects/spring-data","body":"Start learning here: <a href=\"https://spring.io/projects/spring-data\" rel=\"nofollow noreferrer\">spring.io/projects/spring-data</a>"},{"owner":{"account_id":22149354,"reputation":347,"user_id":16398144,"display_name":"ASIF KAIF"},"score":0,"creation_date":1676712299,"post_id":75492258,"comment_id":133195720,"body_markdown":"can you write the code to save it.","body":"can you write the code to save it."}],"owner":{"account_id":22149354,"reputation":347,"user_id":16398144,"display_name":"ASIF KAIF"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1676710946,"creation_date":1676710946,"question_id":75492258,"body_markdown":"I want to save data to database by taking data from postman. i dont know how to save this and how to map this. \r\nEntities\r\n```\r\n@NoArgsConstructor @AllArgsConstructor@ Data\r\n@Entity\r\npublic class user{\t\r\n\t@Id\r\n\t@GeneratedValue(strategy=GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\tprivate String name;\r\n    private String mobileno;\r\n    private String role;\r\n   @OneToMany(mappedBy = &quot;bill&quot;, cascade = CascadeType.ALL)\r\n\tprivate List&lt;Bill&gt; bill;\r\n}\r\n```\r\n```\r\n@NoArgsConstructor @AllArgsConstructor@ Data\r\n@Entity\r\npublic class Bill{\t\r\n\t@Id\r\n\t@GeneratedValue(strategy=GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\tprivate String billno;\r\n    private Integer amount;\r\n    private Integer qtyinbill;\r\n   @ManyToOne\r\n\tprivate User user;\r\n}\r\n```\r\n repo\r\n```\r\npublic interface UserRepository extends JpaRepository&lt;User, Long&gt; {\r\n    \r\n}\r\n```\r\ndata fro postman\r\n```\r\n{\r\n&quot;name&quot;:&#39;&quot;jack&quot;, &quot;mobile&quot;:&quot;1234567890&quot;, &quot;role&quot;:&quot;ROLE_ADMIN&quot;,\r\n&quot;bills&quot;:[{&quot;billno&quot;:&#39;&quot;st1001&quot;, &quot;amount&quot;:10000, &quot;qtyinbill&quot;:4},{&quot;billno&quot;:&#39;&quot;st1002&quot;, &quot;amount&quot;:4000, &quot;qtyinbill&quot;:7}]}\r\n\r\n```\r\nController\r\n```\r\n@PostMapping(&quot;/bill&quot;)\r\n    public String saveBill(@RequestBody User user) {\r\n// how t0 save to database\r\n}\r\n```\r\n","title":"how to save data received form postman OneToMany and ManyToOne using lombok in Sprngboot jpa","body":"<p>I want to save data to database by taking data from postman. i dont know how to save this and how to map this.\nEntities</p>\n<pre><code>@NoArgsConstructor @AllArgsConstructor@ Data\n@Entity\npublic class user{  \n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    private Long id;\n    private String name;\n    private String mobileno;\n    private String role;\n   @OneToMany(mappedBy = &quot;bill&quot;, cascade = CascadeType.ALL)\n    private List&lt;Bill&gt; bill;\n}\n</code></pre>\n<pre><code>@NoArgsConstructor @AllArgsConstructor@ Data\n@Entity\npublic class Bill{  \n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    private Long id;\n    private String billno;\n    private Integer amount;\n    private Integer qtyinbill;\n   @ManyToOne\n    private User user;\n}\n</code></pre>\n<p>repo</p>\n<pre><code>public interface UserRepository extends JpaRepository&lt;User, Long&gt; {\n    \n}\n</code></pre>\n<p>data fro postman</p>\n<pre><code>{\n&quot;name&quot;:'&quot;jack&quot;, &quot;mobile&quot;:&quot;1234567890&quot;, &quot;role&quot;:&quot;ROLE_ADMIN&quot;,\n&quot;bills&quot;:[{&quot;billno&quot;:'&quot;st1001&quot;, &quot;amount&quot;:10000, &quot;qtyinbill&quot;:4},{&quot;billno&quot;:'&quot;st1002&quot;, &quot;amount&quot;:4000, &quot;qtyinbill&quot;:7}]}\n\n</code></pre>\n<p>Controller</p>\n<pre><code>@PostMapping(&quot;/bill&quot;)\n    public String saveBill(@RequestBody User user) {\n// how t0 save to database\n}\n</code></pre>\n"},{"tags":["java","android"],"owner":{"account_id":17671587,"reputation":1,"user_id":21238733,"display_name":"Kirill"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676710180,"creation_date":1676710180,"question_id":75492200,"body_markdown":"I have such a problem when I click on a button, I need to create a media player and put a url in it, on each individual button\r\n\r\nPlease help me understand\r\n\r\n\r\nhere is an example\r\n\r\n```\r\n private List&lt;String&gt; mData;\r\n private List&lt;String&gt; mSata;\r\n\r\n    public MyAdapter(List&lt;String&gt; data, List&lt;String&gt; data1) {\r\n        mData = data;\r\n        mSata = data1;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.text, parent, false);\r\n        String stream = toString();\r\n        return new ViewHolder(view, stream);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\r\n        String item = mData.get(position);\r\n        holder.textView.setText(item);\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return mData.size() ;\r\n    }\r\n\r\n    public void onReturnStream(ViewHolder stream, int position) throws IOException {\r\n        String item1 = mSata.get(position);\r\n        stream.mediaPlayer.setDataSource(item1);\r\n        return;\r\n    }\r\n\r\n\r\n    public static class ViewHolder extends RecyclerView.ViewHolder {\r\n        public TextView textView;\r\n        public MediaPlayer mediaPlayer;\r\n\r\n        public ViewHolder(View view, String stream) {\r\n            super(view);\r\n            textView = view.findViewById(R.id.button);\r\n            mediaPlayer = new MediaPlayer();\r\n            mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);\r\n            textView.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    mediaPlayer.reset();\r\n                    try {\r\n                        mediaPlayer.setDataSource(stream);\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                    mediaPlayer.start();\r\n                    textView.setText(&quot;Play&quot;);\r\n                }\r\n            });\r\n\r\n        }\r\n```\r\n\r\n\r\nI tried in different ways it doesn’t work, I don’t have enough logic))","title":"Android java data entry RecyclerView from media player url","body":"<p>I have such a problem when I click on a button, I need to create a media player and put a url in it, on each individual button</p>\n<p>Please help me understand</p>\n<p>here is an example</p>\n<pre><code> private List&lt;String&gt; mData;\n private List&lt;String&gt; mSata;\n\n    public MyAdapter(List&lt;String&gt; data, List&lt;String&gt; data1) {\n        mData = data;\n        mSata = data1;\n    }\n\n    @NonNull\n    @Override\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.text, parent, false);\n        String stream = toString();\n        return new ViewHolder(view, stream);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\n        String item = mData.get(position);\n        holder.textView.setText(item);\n    }\n\n    @Override\n    public int getItemCount() {\n        return mData.size() ;\n    }\n\n    public void onReturnStream(ViewHolder stream, int position) throws IOException {\n        String item1 = mSata.get(position);\n        stream.mediaPlayer.setDataSource(item1);\n        return;\n    }\n\n\n    public static class ViewHolder extends RecyclerView.ViewHolder {\n        public TextView textView;\n        public MediaPlayer mediaPlayer;\n\n        public ViewHolder(View view, String stream) {\n            super(view);\n            textView = view.findViewById(R.id.button);\n            mediaPlayer = new MediaPlayer();\n            mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);\n            textView.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View view) {\n                    mediaPlayer.reset();\n                    try {\n                        mediaPlayer.setDataSource(stream);\n                    } catch (IOException e) {\n                        e.printStackTrace();\n                    }\n                    mediaPlayer.start();\n                    textView.setText(&quot;Play&quot;);\n                }\n            });\n\n        }\n</code></pre>\n<p>I tried in different ways it doesn’t work, I don’t have enough logic))</p>\n"},{"tags":["java","android","flutter","dart","mediastore"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1676709717,"post_id":75492089,"comment_id":133195412,"body_markdown":"Where did you get that content scheme from? And where is your code where you try to use it?? A content scheme is no file system path.","body":"Where did you get that content scheme from? And where is your code where you try to use it?? A content scheme is no file system path."},{"owner":{"account_id":18804905,"reputation":648,"user_id":13714466,"display_name":"Archit Dandavate"},"score":0,"creation_date":1676710038,"post_id":75492089,"comment_id":133195443,"body_markdown":"@blackapps just added the code where i try to use it","body":"@blackapps just added the code where i try to use it"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1676710390,"post_id":75492089,"comment_id":133195492,"body_markdown":"I do noty see what you use where. And you also did not tell where you got that content scheme from although i asked you to tell.","body":"I do noty see what you use where. And you also did not tell where you got that content scheme from although i asked you to tell."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1676710475,"post_id":75492089,"comment_id":133195500,"body_markdown":"From `Uri albumArtUri = Uri.withAppendedPath(MediaStore.Audio.Albums.EXTERNAL_CONTENT_URI, Long.toString(albumId));`? Then why not mention?","body":"From <code>Uri albumArtUri = Uri.withAppendedPath(MediaStore.Audio.Albums.EXTERNAL_CONTEN&zwnj;&#8203;T_URI, Long.toString(albumId));</code>? Then why not mention?"},{"owner":{"account_id":2600198,"reputation":24052,"user_id":2252830,"display_name":"pskink"},"score":3,"creation_date":1676713873,"post_id":75492089,"comment_id":133195921,"body_markdown":"`content://media/external/audio/albums/89` is an `Uri` that can only be used with native android code (`ContentResolver`), more: https://developer.android.com/topic/security/risks/content-resolver","body":"<code>content:&#47;&#47;media&#47;external&#47;audio&#47;albums&#47;89</code> is an <code>Uri</code> that can only be used with native android code (<code>ContentResolver</code>), more: <a href=\"https://developer.android.com/topic/security/risks/content-resolver\" rel=\"nofollow noreferrer\">developer.android.com/topic/security/risks/content-resolver</a>"}],"owner":{"account_id":18804905,"reputation":648,"user_id":13714466,"display_name":"Archit Dandavate"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676710005,"creation_date":1676708668,"question_id":75492089,"body_markdown":"I am building a simple music player app in which I want to fetch all songs available on the users device. I am doing this with my custom method in java\r\n\r\n    private static List&lt;Map&lt;String, String&gt;&gt; getAllSongs(Context context) {\r\n        List&lt;Map&lt;String, String&gt;&gt; songs = new ArrayList&lt;&gt;();\r\n    \r\n        // Set up query to get all audio files\r\n        String[] projection = new String[] {\r\n                MediaStore.Audio.Media._ID,\r\n                MediaStore.Audio.Media.TITLE,\r\n                MediaStore.Audio.Media.ARTIST,\r\n                MediaStore.Audio.Media.ALBUM,\r\n                MediaStore.Audio.Media.DURATION,\r\n                MediaStore.Audio.Media.DATA,\r\n                MediaStore.Audio.Media.ALBUM_ID\r\n        };\r\n        String selection = MediaStore.Audio.Media.IS_MUSIC + &quot; != 0&quot;;\r\n        String sortOrder = MediaStore.Audio.Media.TITLE + &quot; ASC&quot;;\r\n    \r\n        // Execute query\r\n        Cursor cursor = context.getContentResolver().query(\r\n                MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,\r\n                projection,\r\n                selection,\r\n                null,\r\n                sortOrder\r\n        );\r\n    \r\n        // Extract metadata from query result\r\n        if (cursor != null &amp;&amp; cursor.moveToFirst()) {\r\n            int idColumnIndex = cursor.getColumnIndex(MediaStore.Audio.Media._ID);\r\n            int titleColumnIndex = cursor.getColumnIndex(MediaStore.Audio.Media.TITLE);\r\n            int artistColumnIndex = cursor.getColumnIndex(MediaStore.Audio.Media.ARTIST);\r\n            int albumColumnIndex = cursor.getColumnIndex(MediaStore.Audio.Media.ALBUM);\r\n            int durationColumnIndex = cursor.getColumnIndex(MediaStore.Audio.Media.DURATION);\r\n            int pathColumnIndex = cursor.getColumnIndex(MediaStore.Audio.Media.DATA);\r\n            int albumIdColumnIndex = cursor.getColumnIndex(MediaStore.Audio.Media.ALBUM_ID);\r\n    \r\n            do {\r\n                Map&lt;String, String&gt; song = new HashMap&lt;&gt;();\r\n    \r\n                song.put(&quot;id&quot;, cursor.getString(idColumnIndex));\r\n                song.put(&quot;title&quot;, cursor.getString(titleColumnIndex));\r\n                song.put(&quot;artist&quot;, cursor.getString(artistColumnIndex));\r\n                song.put(&quot;album&quot;, cursor.getString(albumColumnIndex));\r\n                song.put(&quot;duration&quot;, cursor.getString(durationColumnIndex));\r\n                song.put(&quot;path&quot;, cursor.getString(pathColumnIndex));\r\n    \r\n                long albumId = cursor.getLong(albumIdColumnIndex);\r\n                Uri albumArtUri = Uri.withAppendedPath(MediaStore.Audio.Albums.EXTERNAL_CONTENT_URI, Long.toString(albumId));\r\n                song.put(&quot;albumArt&quot;, albumArtUri.toString());\r\n    \r\n                songs.add(song);\r\n            } while (cursor.moveToNext());\r\n    \r\n            cursor.close();\r\n        }\r\n    \r\n        return songs;\r\n    }\r\n\r\nThis is then handled in flutter by -&gt;\r\n\r\n    class Song {\r\n      String id;\r\n      String title;\r\n      String artist;\r\n      String album;\r\n      String path;\r\n      String albumArt;\r\n    \r\n      Song(\r\n          {required this.id,\r\n          required this.title,\r\n          required this.artist,\r\n          required this.album,\r\n          required this.path,\r\n          required this.albumArt});\r\n    }\r\n    \r\n    class MusicService {\r\n      static const MethodChannel _channel = const MethodChannel(&#39;com.mybea.ah&#39;);\r\n    \r\n      static Future&lt;List&lt;Song&gt;&gt; getAllSongs() async {\r\n        List&lt;Song&gt; songs = [];\r\n    \r\n        try {\r\n          final List&lt;dynamic&gt; result = await _channel.invokeMethod(&#39;getAllSongs&#39;);\r\n          if (result.isNotEmpty) {\r\n            for (int i = 0; i &lt; result.length; i++) {\r\n              songs.add(Song(\r\n                id: result[i][&#39;id&#39;],\r\n                title: result[i][&#39;title&#39;],\r\n                artist: result[i][&#39;artist&#39;],\r\n                album: result[i][&#39;album&#39;],\r\n                path: result[i][&#39;path&#39;],\r\n                albumArt: result[i][&#39;albumArt&#39;],\r\n              ));\r\n            }\r\n          }\r\n        } on PlatformException catch (e) {\r\n          print(&quot;Failed to get all songs: &#39;${e.message}&#39;.&quot;);\r\n        }\r\n    \r\n        return songs;\r\n      }\r\n    }\r\nWhen I fetch the songs from the method all is fetched properly but when I try to display the artwork I get the following error-&gt;\r\n\r\n&gt; ════════ Exception caught by image resource service\r\n&gt; ════════════════════════════ Cannot retrieve length of file, path =\r\n&gt; &#39;content://media/external/audio/albums/89&#39; (OS Error: No such file or\r\n&gt; directory, errno = 2)\r\nThis is the code where I try to use the method -&gt; \r\n\r\n          Future&lt;void&gt; _loadSongs() async {\r\n            if (await Permission.storage.request().isGranted) {\r\n              List&lt;Song&gt; songs = await MusicService.getAllSongs();\r\n              setState(() {\r\n                _songs = songs;\r\n            } else {\r\n              return;\r\n            }\r\n          }\r\n    _songs.length == 0\r\n              ? Center(\r\n                  child: Text(&quot;No Songs Found&quot;),\r\n                )\r\n              : ListView.builder(\r\n                  itemCount: _songs.length,\r\n                  itemBuilder: (context, index) {\r\n                    Song song = _songs[index];\r\n                    return ListTile(\r\n                      onTap: () {\r\n                        debugPrint(song.path);\r\n                      },\r\n                      leading: CircleAvatar(\r\n                        backgroundImage: FileImage(File(song.albumArt)),\r\n                      ),\r\n                      title: Text(song.title),\r\n                      subtitle: Text(song.artist),\r\n                      trailing: Icon(Icons.play_arrow),\r\n                    );\r\n                  },\r\n                ),\r\n\r\nI tried displaying the image by Image.file() and Image.network() but nothing seemed to work and gave the same error. \r\nPlease Help\r\n\r\n\r\n","title":"How to solve &#39;Cannot retrieve length of file, path (OS Error: No such file or directory, errno = 2) &#39; in flutter","body":"<p>I am building a simple music player app in which I want to fetch all songs available on the users device. I am doing this with my custom method in java</p>\n<pre><code>private static List&lt;Map&lt;String, String&gt;&gt; getAllSongs(Context context) {\n    List&lt;Map&lt;String, String&gt;&gt; songs = new ArrayList&lt;&gt;();\n\n    // Set up query to get all audio files\n    String[] projection = new String[] {\n            MediaStore.Audio.Media._ID,\n            MediaStore.Audio.Media.TITLE,\n            MediaStore.Audio.Media.ARTIST,\n            MediaStore.Audio.Media.ALBUM,\n            MediaStore.Audio.Media.DURATION,\n            MediaStore.Audio.Media.DATA,\n            MediaStore.Audio.Media.ALBUM_ID\n    };\n    String selection = MediaStore.Audio.Media.IS_MUSIC + &quot; != 0&quot;;\n    String sortOrder = MediaStore.Audio.Media.TITLE + &quot; ASC&quot;;\n\n    // Execute query\n    Cursor cursor = context.getContentResolver().query(\n            MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,\n            projection,\n            selection,\n            null,\n            sortOrder\n    );\n\n    // Extract metadata from query result\n    if (cursor != null &amp;&amp; cursor.moveToFirst()) {\n        int idColumnIndex = cursor.getColumnIndex(MediaStore.Audio.Media._ID);\n        int titleColumnIndex = cursor.getColumnIndex(MediaStore.Audio.Media.TITLE);\n        int artistColumnIndex = cursor.getColumnIndex(MediaStore.Audio.Media.ARTIST);\n        int albumColumnIndex = cursor.getColumnIndex(MediaStore.Audio.Media.ALBUM);\n        int durationColumnIndex = cursor.getColumnIndex(MediaStore.Audio.Media.DURATION);\n        int pathColumnIndex = cursor.getColumnIndex(MediaStore.Audio.Media.DATA);\n        int albumIdColumnIndex = cursor.getColumnIndex(MediaStore.Audio.Media.ALBUM_ID);\n\n        do {\n            Map&lt;String, String&gt; song = new HashMap&lt;&gt;();\n\n            song.put(&quot;id&quot;, cursor.getString(idColumnIndex));\n            song.put(&quot;title&quot;, cursor.getString(titleColumnIndex));\n            song.put(&quot;artist&quot;, cursor.getString(artistColumnIndex));\n            song.put(&quot;album&quot;, cursor.getString(albumColumnIndex));\n            song.put(&quot;duration&quot;, cursor.getString(durationColumnIndex));\n            song.put(&quot;path&quot;, cursor.getString(pathColumnIndex));\n\n            long albumId = cursor.getLong(albumIdColumnIndex);\n            Uri albumArtUri = Uri.withAppendedPath(MediaStore.Audio.Albums.EXTERNAL_CONTENT_URI, Long.toString(albumId));\n            song.put(&quot;albumArt&quot;, albumArtUri.toString());\n\n            songs.add(song);\n        } while (cursor.moveToNext());\n\n        cursor.close();\n    }\n\n    return songs;\n}\n</code></pre>\n<p>This is then handled in flutter by -&gt;</p>\n<pre><code>class Song {\n  String id;\n  String title;\n  String artist;\n  String album;\n  String path;\n  String albumArt;\n\n  Song(\n      {required this.id,\n      required this.title,\n      required this.artist,\n      required this.album,\n      required this.path,\n      required this.albumArt});\n}\n\nclass MusicService {\n  static const MethodChannel _channel = const MethodChannel('com.mybea.ah');\n\n  static Future&lt;List&lt;Song&gt;&gt; getAllSongs() async {\n    List&lt;Song&gt; songs = [];\n\n    try {\n      final List&lt;dynamic&gt; result = await _channel.invokeMethod('getAllSongs');\n      if (result.isNotEmpty) {\n        for (int i = 0; i &lt; result.length; i++) {\n          songs.add(Song(\n            id: result[i]['id'],\n            title: result[i]['title'],\n            artist: result[i]['artist'],\n            album: result[i]['album'],\n            path: result[i]['path'],\n            albumArt: result[i]['albumArt'],\n          ));\n        }\n      }\n    } on PlatformException catch (e) {\n      print(&quot;Failed to get all songs: '${e.message}'.&quot;);\n    }\n\n    return songs;\n  }\n}\n</code></pre>\n<p>When I fetch the songs from the method all is fetched properly but when I try to display the artwork I get the following error-&gt;</p>\n<blockquote>\n<p>════════ Exception caught by image resource service\n════════════════════════════ Cannot retrieve length of file, path =\n'content://media/external/audio/albums/89' (OS Error: No such file or\ndirectory, errno = 2)\nThis is the code where I try to use the method -&gt;</p>\n</blockquote>\n<pre><code>      Future&lt;void&gt; _loadSongs() async {\n        if (await Permission.storage.request().isGranted) {\n          List&lt;Song&gt; songs = await MusicService.getAllSongs();\n          setState(() {\n            _songs = songs;\n        } else {\n          return;\n        }\n      }\n_songs.length == 0\n          ? Center(\n              child: Text(&quot;No Songs Found&quot;),\n            )\n          : ListView.builder(\n              itemCount: _songs.length,\n              itemBuilder: (context, index) {\n                Song song = _songs[index];\n                return ListTile(\n                  onTap: () {\n                    debugPrint(song.path);\n                  },\n                  leading: CircleAvatar(\n                    backgroundImage: FileImage(File(song.albumArt)),\n                  ),\n                  title: Text(song.title),\n                  subtitle: Text(song.artist),\n                  trailing: Icon(Icons.play_arrow),\n                );\n              },\n            ),\n</code></pre>\n<p>I tried displaying the image by Image.file() and Image.network() but nothing seemed to work and gave the same error.\nPlease Help</p>\n"},{"tags":["java","spring-boot","junit5","cucumber-junit","junit-jupiter"],"comments":[{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1676673492,"post_id":75488577,"comment_id":133191987,"body_markdown":"If you have two separate suites, can you get Gradle to run them in alphabetical order?","body":"If you have two separate suites, can you get Gradle to run them in alphabetical order?"},{"owner":{"account_id":15361,"reputation":4976,"user_id":32352,"accept_rate":62,"display_name":"johanneslink"},"score":1,"creation_date":1676701216,"post_id":75488577,"comment_id":133194640,"body_markdown":"junit.jupiter.testclass.order.default is only for the Jupiter engine. In your case, however, three engines are involved: Jupiter, Cucumber and Suite.","body":"junit.jupiter.testclass.order.default is only for the Jupiter engine. In your case, however, three engines are involved: Jupiter, Cucumber and Suite."}],"answers":[{"comments":[{"owner":{"account_id":3683051,"reputation":6733,"user_id":3067542,"accept_rate":85,"display_name":"Vincent F"},"score":1,"creation_date":1676708980,"post_id":75490683,"comment_id":133195332,"body_markdown":"Thanks, I&#39;ve updated your code with what I ended up with - it gets the job done nicely for investigating !","body":"Thanks, I&#39;ve updated your code with what I ended up with - it gets the job done nicely for investigating !"}],"tags":[],"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676708885,"creation_date":1676684948,"answer_id":75490683,"question_id":75488577,"body_markdown":"Gradle uses the [JUnit Platform Launcher API][1] to run the tests. You can do the same thing. And to ensure the order remains the same, you would invoke the platform twice within the same JVM.\r\n\r\nThis should allow you to reproduce your problem as Spring keeps the application running until the JVM exits.\r\n\r\n```java\r\nimport static org.junit.platform.engine.discovery.DiscoverySelectors.selectClass;\r\n\r\nimport my.project.spring.MySpringBootTest;\r\nimport my.project.cucumber.MyCucumberTest;\r\nimport org.junit.platform.launcher.Launcher;\r\nimport org.junit.platform.launcher.LauncherDiscoveryRequest;\r\nimport org.junit.platform.launcher.core.LauncherDiscoveryRequestBuilder;\r\nimport org.junit.platform.launcher.core.LauncherFactory;\r\nimport org.junit.platform.launcher.listeners.SummaryGeneratingListener;\r\nimport org.junit.platform.launcher.listeners.TestExecutionSummary;\r\n\r\npublic class ManualLaunch {\r\n\r\n  public static void main(String[] args) {\r\n\r\n    var cucumberSummary= runCucumberTest();\r\n    var jupiterSummary= runJupiterTest();\r\n    \r\n    System.out.println(&quot;Jupiter failures : &quot;+jupiterSummary.getTestsFailedCount());\r\n    System.out.println(&quot;Cucumber failures : &quot;+cucumberSummary.getTestsFailedCount());\r\n\r\n  }\r\n\r\n  private static TestExecutionSummary runCucumberTest() {\r\n\r\n    LauncherDiscoveryRequest request = LauncherDiscoveryRequestBuilder.request()\r\n        // Configure the request for Cucumber here\r\n        .selectors(\r\n            selectClass(MyCucumberTest.class)\r\n        )\r\n        .build();\r\n\r\n    return launchAndGetSummary(request);\r\n  }\r\n\r\n    private static TestExecutionSummary runJupiterTest() {\r\n      LauncherDiscoveryRequest request = LauncherDiscoveryRequestBuilder.request()\r\n          .selectors(\r\n              selectClass(MySpringBootTest.class)\r\n          )\r\n          .build();\r\n      \r\n      return launchAndGetSummary(request);\r\n    }\r\n    \r\n    private static TestExecutionSummary launchAndGetSummary(LauncherDiscoveryRequest request){\r\n      Launcher launcher = LauncherFactory.create();\r\n      SummaryGeneratingListener listener = new SummaryGeneratingListener();\r\n      launcher.registerTestExecutionListeners(listener);\r\n      launcher.execute(request);\r\n\r\n      return listener.getSummary();\r\n      \r\n    }\r\n\r\n}\r\n```\r\n\r\nIf you don&#39;t know how to run a main method from Gradle, you could also use JUnit to run JUnit. But then you do have to make sure the tests don&#39;t target themselves.\r\n\r\n  [1]: https://junit.org/junit5/docs/current/user-guide/#launcher-api","title":"order execution of Junit5 tests by launcher / engine","body":"<p>Gradle uses the <a href=\"https://junit.org/junit5/docs/current/user-guide/#launcher-api\" rel=\"nofollow noreferrer\">JUnit Platform Launcher API</a> to run the tests. You can do the same thing. And to ensure the order remains the same, you would invoke the platform twice within the same JVM.</p>\n<p>This should allow you to reproduce your problem as Spring keeps the application running until the JVM exits.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static org.junit.platform.engine.discovery.DiscoverySelectors.selectClass;\n\nimport my.project.spring.MySpringBootTest;\nimport my.project.cucumber.MyCucumberTest;\nimport org.junit.platform.launcher.Launcher;\nimport org.junit.platform.launcher.LauncherDiscoveryRequest;\nimport org.junit.platform.launcher.core.LauncherDiscoveryRequestBuilder;\nimport org.junit.platform.launcher.core.LauncherFactory;\nimport org.junit.platform.launcher.listeners.SummaryGeneratingListener;\nimport org.junit.platform.launcher.listeners.TestExecutionSummary;\n\npublic class ManualLaunch {\n\n  public static void main(String[] args) {\n\n    var cucumberSummary= runCucumberTest();\n    var jupiterSummary= runJupiterTest();\n    \n    System.out.println(&quot;Jupiter failures : &quot;+jupiterSummary.getTestsFailedCount());\n    System.out.println(&quot;Cucumber failures : &quot;+cucumberSummary.getTestsFailedCount());\n\n  }\n\n  private static TestExecutionSummary runCucumberTest() {\n\n    LauncherDiscoveryRequest request = LauncherDiscoveryRequestBuilder.request()\n        // Configure the request for Cucumber here\n        .selectors(\n            selectClass(MyCucumberTest.class)\n        )\n        .build();\n\n    return launchAndGetSummary(request);\n  }\n\n    private static TestExecutionSummary runJupiterTest() {\n      LauncherDiscoveryRequest request = LauncherDiscoveryRequestBuilder.request()\n          .selectors(\n              selectClass(MySpringBootTest.class)\n          )\n          .build();\n      \n      return launchAndGetSummary(request);\n    }\n    \n    private static TestExecutionSummary launchAndGetSummary(LauncherDiscoveryRequest request){\n      Launcher launcher = LauncherFactory.create();\n      SummaryGeneratingListener listener = new SummaryGeneratingListener();\n      launcher.registerTestExecutionListeners(listener);\n      launcher.execute(request);\n\n      return listener.getSummary();\n      \n    }\n\n}\n</code></pre>\n<p>If you don't know how to run a main method from Gradle, you could also use JUnit to run JUnit. But then you do have to make sure the tests don't target themselves.</p>\n"}],"owner":{"account_id":3683051,"reputation":6733,"user_id":3067542,"accept_rate":85,"display_name":"Vincent F"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75490683,"answer_count":1,"score":1,"last_activity_date":1676709102,"creation_date":1676662578,"question_id":75488577,"body_markdown":"I have a Spring Boot 2.5.4 project with some `@SpringBootTest` tests and some `@Cucumber` tests. I am using gradle to build.  \r\n\r\nI have noticed that my build is failing depending on where it&#39;s executed, and I found that it actually depended on the order the tests get executed, so I have a problem in my tests : if `@SpringBootTest` runs first then it&#39;s passing. if `@Cucumber` tests run first then it fails - probably because the H2 DB doesn&#39;t get fully reset in between.\r\n\r\nNow, I would like to temporarily control the execution order, so that I can reproduce the issue consistently to fix the data dependency between my tests. \r\n\r\nI am trying to use `junit.jupiter.testclass.order.default` property with value `org.junit.jupiter.api.ClassOrderer$ClassName` but it&#39;s not working. \r\n\r\nI&#39;ve put my 2 tests in a Juint5 `@Suite` mentioning the 2 tests in the `@SelectClasses` and changing their order, but even like that, it&#39;s not working - my feeling is that it&#39;s because there are actually 2 test runners, Junit Jupiter and Cucumber. Sometimes when I change something that doesn&#39;t seem related, the execution order changes :\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI&#39;m overriding Junit version to latest, hoping that it helps (and Junit5 Suite is available), but it doesn&#39;t help :\r\n\r\n    ext[&#39;junit-jupiter.version&#39;]=&#39;5.9.2&#39;\r\n\r\nI am using `Cucumber` 6.11.0.\r\n\r\nMy gradle test task is simply \r\n\r\n    test {\r\n        useJUnitPlatform()\r\n        finalizedBy(project.tasks.jacocoTestReport)\r\n    }\r\n\r\n\r\nIs there a way to configure in my build the order in which the test runners get executed, in a consistent and reproduceable manner ?\r\n\r\nThanks \r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/R2fcV.png\r\n  [2]: https://i.stack.imgur.com/YZNYl.png","title":"order execution of Junit5 tests by launcher / engine","body":"<p>I have a Spring Boot 2.5.4 project with some <code>@SpringBootTest</code> tests and some <code>@Cucumber</code> tests. I am using gradle to build.</p>\n<p>I have noticed that my build is failing depending on where it's executed, and I found that it actually depended on the order the tests get executed, so I have a problem in my tests : if <code>@SpringBootTest</code> runs first then it's passing. if <code>@Cucumber</code> tests run first then it fails - probably because the H2 DB doesn't get fully reset in between.</p>\n<p>Now, I would like to temporarily control the execution order, so that I can reproduce the issue consistently to fix the data dependency between my tests.</p>\n<p>I am trying to use <code>junit.jupiter.testclass.order.default</code> property with value <code>org.junit.jupiter.api.ClassOrderer$ClassName</code> but it's not working.</p>\n<p>I've put my 2 tests in a Juint5 <code>@Suite</code> mentioning the 2 tests in the <code>@SelectClasses</code> and changing their order, but even like that, it's not working - my feeling is that it's because there are actually 2 test runners, Junit Jupiter and Cucumber. Sometimes when I change something that doesn't seem related, the execution order changes :</p>\n<p><a href=\"https://i.stack.imgur.com/R2fcV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/R2fcV.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/YZNYl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YZNYl.png\" alt=\"enter image description here\" /></a></p>\n<p>I'm overriding Junit version to latest, hoping that it helps (and Junit5 Suite is available), but it doesn't help :</p>\n<pre><code>ext['junit-jupiter.version']='5.9.2'\n</code></pre>\n<p>I am using <code>Cucumber</code> 6.11.0.</p>\n<p>My gradle test task is simply</p>\n<pre><code>test {\n    useJUnitPlatform()\n    finalizedBy(project.tasks.jacocoTestReport)\n}\n</code></pre>\n<p>Is there a way to configure in my build the order in which the test runners get executed, in a consistent and reproduceable manner ?</p>\n<p>Thanks</p>\n"},{"tags":["java","visual-studio-code"],"answers":[{"comments":[{"owner":{"account_id":27686149,"reputation":23,"user_id":21133868,"display_name":"Vindhya1103"},"score":0,"creation_date":1676736881,"post_id":75492111,"comment_id":133199196,"body_markdown":"Thanks for your help! It worked and made my programming much easier on vscode.","body":"Thanks for your help! It worked and made my programming much easier on vscode."},{"owner":{"account_id":2691023,"reputation":16196,"user_id":2324388,"accept_rate":41,"display_name":"Marian Kl&#252;hspies"},"score":0,"creation_date":1679217797,"post_id":75492111,"comment_id":133678845,"body_markdown":"Is &quot;java.home&quot; even a valid setting? I don&#39;t find it anywhere","body":"Is &quot;java.home&quot; even a valid setting? I don&#39;t find it anywhere"}],"tags":[],"owner":{"account_id":27797446,"reputation":28,"user_id":21222571,"display_name":"Learner"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676708979,"creation_date":1676708979,"answer_id":75492111,"question_id":75491786,"body_markdown":"It seems you are using two different jdk, keep both same and try.\r\n\r\n  &quot;java.jdt.ls.java.home&quot;: &quot;c:\\\\Program Files\\\\Java\\\\**jdk-19**&quot;,\r\n\r\n  &quot;java.home&quot;: &quot;c:\\\\Users\\\\Vindhya Sree\\\\.vscode\\\\Microsoft VS Code\\\\**jdk-17**&quot; ","title":"Invalid runtime for JavaSE-19: The path points to a missing or inaccessible folder (/path/to/jdk-19)","body":"<p>It seems you are using two different jdk, keep both same and try.</p>\n<p>&quot;java.jdt.ls.java.home&quot;: &quot;c:\\Program Files\\Java\\<strong>jdk-19</strong>&quot;,</p>\n<p>&quot;java.home&quot;: &quot;c:\\Users\\Vindhya Sree\\.vscode\\Microsoft VS Code\\<strong>jdk-17</strong>&quot;</p>\n"}],"owner":{"account_id":27686149,"reputation":23,"user_id":21133868,"display_name":"Vindhya1103"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":338,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75492111,"answer_count":1,"score":1,"last_activity_date":1676708979,"creation_date":1676704642,"question_id":75491786,"body_markdown":"How do I fix this runtime error in VSCODE 1.75.1? The JDK installed is jdk-19 in Windows C: location.\r\n\r\n- settings.json\r\n\r\n```\r\n{\r\n  &quot;java.configuration.runtimes&quot;: [\r\n  \r\n    {},\r\n    {\r\n      &quot;name&quot;: &quot;JavaSE-19&quot;,\r\n      &quot;path&quot;: &quot;/path/to/jdk-19&quot;,\r\n      &quot;default&quot;: true\r\n    }\r\n  ],\r\n  &quot;workbench.colorTheme&quot;: &quot;GitHub Dark Default&quot;,\r\n  &quot;security.workspace.trust.untrustedFiles&quot;: &quot;open&quot;,\r\n  &quot;debug.onTaskErrors&quot;: &quot;debugAnyway&quot;,\r\n  &quot;files.autoSave&quot;: &quot;afterDelay&quot;,\r\n  &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;,\r\n  &quot;editor.formatOnSave&quot;: true,\r\n  &quot;[c]&quot;: {\r\n    &quot;editor.defaultFormatter&quot;: &quot;ms-vscode.cpptools&quot;\r\n  },\r\n  &quot;code-runner.runInTerminal&quot;: true,\r\n  &quot;[cpp]&quot;: {\r\n    &quot;editor.defaultFormatter&quot;: &quot;ms-vscode.cpptools&quot;\r\n  },\r\n  &quot;editor.wordWrap&quot;: &quot;on&quot;,\r\n  &quot;workbench.view.alwaysShowHeaderActions&quot;: true,\r\n  &quot;zenMode.fullScreen&quot;: false,\r\n  &quot;workbench.editor.untitled.hint&quot;: &quot;hidden&quot;,\r\n  &quot;window.zoomLevel&quot;: 1,\r\n  &quot;editor.accessibilitySupport&quot;: &quot;on&quot;,\r\n  &quot;java.jdt.ls.java.home&quot;: &quot;c:\\\\Program Files\\\\Java\\\\jdk-19&quot;,\r\n  &quot;java.home&quot;: &quot;c:\\\\Users\\\\Vindhya Sree\\\\.vscode\\\\Microsoft VS Code\\\\jdk-17&quot;\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\nI tried setting the environment variables and successfully set JAVA_HOME location as well. After doing that, I have this recurring problem of runtime errors.  I was using them normally as i installed the extension pack of Java from VSCODE itself and the previous version of JDK 17 but after a few months of programming with them, i got a message of updating the JDK to 17+ and configuring Java runtime as per the same and now after doing it all, it doesn&#39;t work on the same projects anymore.","title":"Invalid runtime for JavaSE-19: The path points to a missing or inaccessible folder (/path/to/jdk-19)","body":"<p>How do I fix this runtime error in VSCODE 1.75.1? The JDK installed is jdk-19 in Windows C: location.</p>\n<ul>\n<li>settings.json</li>\n</ul>\n<pre><code>{\n  &quot;java.configuration.runtimes&quot;: [\n  \n    {},\n    {\n      &quot;name&quot;: &quot;JavaSE-19&quot;,\n      &quot;path&quot;: &quot;/path/to/jdk-19&quot;,\n      &quot;default&quot;: true\n    }\n  ],\n  &quot;workbench.colorTheme&quot;: &quot;GitHub Dark Default&quot;,\n  &quot;security.workspace.trust.untrustedFiles&quot;: &quot;open&quot;,\n  &quot;debug.onTaskErrors&quot;: &quot;debugAnyway&quot;,\n  &quot;files.autoSave&quot;: &quot;afterDelay&quot;,\n  &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;,\n  &quot;editor.formatOnSave&quot;: true,\n  &quot;[c]&quot;: {\n    &quot;editor.defaultFormatter&quot;: &quot;ms-vscode.cpptools&quot;\n  },\n  &quot;code-runner.runInTerminal&quot;: true,\n  &quot;[cpp]&quot;: {\n    &quot;editor.defaultFormatter&quot;: &quot;ms-vscode.cpptools&quot;\n  },\n  &quot;editor.wordWrap&quot;: &quot;on&quot;,\n  &quot;workbench.view.alwaysShowHeaderActions&quot;: true,\n  &quot;zenMode.fullScreen&quot;: false,\n  &quot;workbench.editor.untitled.hint&quot;: &quot;hidden&quot;,\n  &quot;window.zoomLevel&quot;: 1,\n  &quot;editor.accessibilitySupport&quot;: &quot;on&quot;,\n  &quot;java.jdt.ls.java.home&quot;: &quot;c:\\\\Program Files\\\\Java\\\\jdk-19&quot;,\n  &quot;java.home&quot;: &quot;c:\\\\Users\\\\Vindhya Sree\\\\.vscode\\\\Microsoft VS Code\\\\jdk-17&quot;\n}\n\n</code></pre>\n<p>I tried setting the environment variables and successfully set JAVA_HOME location as well. After doing that, I have this recurring problem of runtime errors.  I was using them normally as i installed the extension pack of Java from VSCODE itself and the previous version of JDK 17 but after a few months of programming with them, i got a message of updating the JDK to 17+ and configuring Java runtime as per the same and now after doing it all, it doesn't work on the same projects anymore.</p>\n"},{"tags":["java","spring-boot","jpa","properties","yaml"],"comments":[{"owner":{"display_name":"user21099360"},"score":0,"creation_date":1676708709,"post_id":75491955,"comment_id":133195309,"body_markdown":"Does anybody else have never used these features?","body":"Does anybody else have never used these features?"},{"owner":{"display_name":"user21099360"},"score":0,"creation_date":1676710890,"post_id":75491955,"comment_id":133195556,"body_markdown":"Instead of testing everything one by one with some combinations, I would generally prefer to know the meaning of them.","body":"Instead of testing everything one by one with some combinations, I would generally prefer to know the meaning of them."},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1676713319,"post_id":75491955,"comment_id":133195847,"body_markdown":"REFERENCE: https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#appendix.application-properties.data","body":"REFERENCE: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#appendix.application-properties.data\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a>"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1676714609,"post_id":75491955,"comment_id":133196008,"body_markdown":"Please Referemce `Accessing Data with JPA` (https://spring.io/guides/gs/accessing-data-jpa/) , you can find source, you can find `pom.xml` only assign database `&lt;dependency&gt;\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\n\t\t&lt;/dependency&gt;` , then `spring-boot-starter-data-jpa` will know you are using h2 database. no more config. Only if your settings are different from the default ones, you need to add the settings manually.","body":"Please Referemce <code>Accessing Data with JPA</code> (<a href=\"https://spring.io/guides/gs/accessing-data-jpa/\" rel=\"nofollow noreferrer\">spring.io/guides/gs/accessing-data-jpa</a>) , you can find source, you can find <code>pom.xml</code> only assign database <code>&lt;dependency&gt; \t\t\t&lt;groupId&gt;com.h2database&lt;&#47;groupId&gt; \t\t\t&lt;artifactId&gt;h2&lt;&#47;artifactId&gt; \t\t\t&lt;scope&gt;runtime&lt;&#47;scope&gt; \t\t&lt;&#47;dependency&gt;</code> , then <code>spring-boot-starter-data-jpa</code> will know you are using h2 database. no more config. Only if your settings are different from the default ones, you need to add the settings manually."},{"owner":{"display_name":"user21099360"},"score":0,"creation_date":1676714821,"post_id":75491955,"comment_id":133196031,"body_markdown":"I already add it to my pom.xml, but trying to understand if I have to use these annotations and what is the purpose of using them. If you have any idea, could you clarify me?","body":"I already add it to my pom.xml, but trying to understand if I have to use these annotations and what is the purpose of using them. If you have any idea, could you clarify me?"},{"owner":{"display_name":"user21099360"},"score":0,"creation_date":1676714849,"post_id":75491955,"comment_id":133196034,"body_markdown":"And as far as I know, dialect property is needed and important","body":"And as far as I know, dialect property is needed and important"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1676719324,"post_id":75491955,"comment_id":133196524,"body_markdown":"unzip `Accessing Data with JPA` example, goto gs-accessing-data-jpa-main, goto sub dir `complete` , you can run, `mvn spring-boot:run` , and you can find therre are no `application.properties` file existing. But it can running normally. It means spring-boot data jpa starter find database dependency (H2) and use default value.","body":"unzip <code>Accessing Data with JPA</code> example, goto gs-accessing-data-jpa-main, goto sub dir <code>complete</code> , you can run, <code>mvn spring-boot:run</code> , and you can find therre are no <code>application.properties</code> file existing. But it can running normally. It means spring-boot data jpa starter find database dependency (H2) and use default value."}],"owner":{"display_name":"user21099360"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676708135,"creation_date":1676706984,"question_id":75491955,"body_markdown":"I am trying to use necessary fields and remove unnecessary or redundant fields in my `application.yml`, but there are some properties that seem to be duplicate or same features. \r\n\r\nHere is an example features below. \r\n\r\n**1.** I think I should use dialect property, but which one should I use (`jpa.properties.dialect` or `jpa.database-platform`) or both?\r\n\r\n**2.** As far as I see from [Common Application Properties](https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html), it seems optional to use `jpa.database` property. But not sure if I can omit `jpa.database` and `jpa.properties.dialect` properties both. Any idea for this?\r\n\r\n\r\n```\r\nspring:\r\n  datasource:\r\n    driver-class-name: org.h2.Driver\r\n    url: jdbc:h2:mem:${DB_NAME};DATABASE_TO_UPPER=false\r\n    username: ${DB_USERNAME}\r\n    password: \r\n  jpa:\r\n    properties:\r\n      dialect: org.hibernate.dialect.H2Dialect         // ???\r\n    database: h2                                       // ???\r\n    database-platform: org.hibernate.dialect.H2Dialect // ???\r\n```","title":"Spring Boot redundant application properties in Java","body":"<p>I am trying to use necessary fields and remove unnecessary or redundant fields in my <code>application.yml</code>, but there are some properties that seem to be duplicate or same features.</p>\n<p>Here is an example features below.</p>\n<p><strong>1.</strong> I think I should use dialect property, but which one should I use (<code>jpa.properties.dialect</code> or <code>jpa.database-platform</code>) or both?</p>\n<p><strong>2.</strong> As far as I see from <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html\" rel=\"nofollow noreferrer\">Common Application Properties</a>, it seems optional to use <code>jpa.database</code> property. But not sure if I can omit <code>jpa.database</code> and <code>jpa.properties.dialect</code> properties both. Any idea for this?</p>\n<pre><code>spring:\n  datasource:\n    driver-class-name: org.h2.Driver\n    url: jdbc:h2:mem:${DB_NAME};DATABASE_TO_UPPER=false\n    username: ${DB_USERNAME}\n    password: \n  jpa:\n    properties:\n      dialect: org.hibernate.dialect.H2Dialect         // ???\n    database: h2                                       // ???\n    database-platform: org.hibernate.dialect.H2Dialect // ???\n</code></pre>\n"},{"tags":["java","android","webrtc","xmpp","apprtc"],"owner":{"account_id":7999117,"reputation":135,"user_id":6034522,"display_name":"Praveen Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":480,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1676707927,"creation_date":1570093300,"question_id":58215693,"body_markdown":"I am building a video calling app, for our team personnels.\r\n\r\nSo after sometime spent in stack overflow, I made the background service self-starting and alive, for most of the application part.\r\n\r\nI kept my phone connected to android studio for quite sometime like 3 hours, and after that when I tried calling user. in android studio I could see that XMPP service tried to start the activity, but was unable to because application wasn&#39;t open anymore.\r\n\r\n[![Logs when i tried to call][1]][1]\r\n\r\nAt precisely 13:08 I tried calling, and service tried to initiate call activity class. it crashed. \r\n\r\nI am attaching code of my XMPP Service, Broadcast Receiver, Manifest, and example of how call Activity Service can be started. \r\n\r\nXMPP Service\r\n```\r\npackage com.medimetry.partner_app;\r\n\r\nimport android.app.Service;\r\nimport android.content.Intent;\r\nimport android.net.Uri;\r\nimport android.os.AsyncTask;\r\nimport android.os.IBinder;\r\nimport android.support.annotation.Nullable;\r\nimport android.util.Log;\r\nimport com.medimetry.partner_app.utils.Class_SharedPreferences;\r\nimport com.medimetry.partner_app.webRTC.ServerPingWithAlarmManager;\r\nimport com.medimetry.partner_app.webRTC.XmppRTCClient;\r\nimport org.jivesoftware.smack.*;\r\nimport org.jivesoftware.smack.filter.AndFilter;\r\nimport org.jivesoftware.smack.packet.Stanza;\r\nimport org.jivesoftware.smack.tcp.XMPPTCPConnection;\r\nimport org.jivesoftware.smack.tcp.XMPPTCPConnectionConfiguration;\r\nimport org.jivesoftware.smackx.iqregister.AccountManager;\r\nimport org.jivesoftware.smackx.ping.PingFailedListener;\r\nimport org.jivesoftware.smackx.ping.PingManager;\r\nimport org.w3c.dom.Document;\r\nimport org.w3c.dom.Element;\r\nimport org.xml.sax.InputSource;\r\nimport org.xml.sax.SAXException;\r\n\r\nimport javax.xml.parsers.DocumentBuilder;\r\nimport javax.xml.parsers.DocumentBuilderFactory;\r\nimport javax.xml.parsers.ParserConfigurationException;\r\nimport java.io.IOException;\r\nimport java.io.StringReader;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\nimport static com.medimetry.partner_app.CallActivity.EXTRA_CAPTURETOTEXTURE_ENABLED;\r\nimport static com.medimetry.partner_app.CallActivity.EXTRA_ROOMID;\r\n\r\npublic class XMPPService extends Service {\r\n    private Intent intent;\r\n    private Class_SharedPreferences sharedPreferences;\r\n    private XmppAsyncConnection xmppAsyncConnection;\r\n    public XMPPTCPConnection conn1;\r\n    private static XMPPService self;\r\n    private XMPPEventsListener eventsListener;\r\n\r\n    public static Boolean connected = false;\r\n    public static String TAG = &quot;xmppservice&quot;;\r\n\r\n    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();\r\n    DocumentBuilder dBuilder = null;\r\n    private String uid;\r\n    private boolean shouldSendPresence = false;\r\n\r\n    public static XMPPService instance() {\r\n        return self;\r\n    }\r\n\r\n    @Nullable\r\n    @Override\r\n    public IBinder onBind(Intent intent) {\r\n        this.intent = intent;\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate() {\r\n        super.onCreate();\r\n        self = this;\r\n\r\n        sharedPreferences = new Class_SharedPreferences(this);\r\n\r\n        if (sharedPreferences.getWpUserId().equals(&quot;0&quot;)) return;\r\n\r\n        this.xmppAsyncConnection = new XmppAsyncConnection();\r\n        this.xmppAsyncConnection.execute();\r\n\r\n        XmppRTCClient.instance(null, sharedPreferences.getWpUserId()).xmppServiceInitiated();\r\n\r\n        if (dBuilder == null) {\r\n            try {\r\n                dBuilder = dbFactory.newDocumentBuilder();\r\n\r\n            } catch (ParserConfigurationException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n    public void setEventsListener(XMPPEventsListener eventsListener) {\r\n        this.eventsListener = eventsListener;\r\n    }\r\n\r\n    public void setConnected(boolean isConnected) {\r\n        connected = isConnected;\r\n\r\n        Log.i(TAG, &quot;IsConnected status change: &quot; + (isConnected ? &quot;true&quot; : &quot;false&quot;));\r\n    }\r\n\r\n    public void sendPresence() {\r\n        if ( ! connected) return;\r\n\r\n        new android.os.Handler().postDelayed(\r\n                new Runnable() {\r\n                    public void run() {\r\n\r\n                        Log.i(TAG, &quot;Sending presence from xmpp&quot;);\r\n                    }\r\n                },\r\n                30000); // 30 seconds\r\n    }\r\n\r\n    class XmppAsyncConnection extends AsyncTask {\r\n\r\n        @Override\r\n        protected Object doInBackground(Object[] objects) {\r\n\r\n            uid = sharedPreferences.getWpUserId();\r\n            // uid = &quot;100111&quot;;\r\n\r\n            try {\r\n                XMPPTCPConnectionConfiguration config = XMPPTCPConnectionConfiguration.builder()\r\n                        .setUsernameAndPassword(uid + &quot;@&quot; + XmppRTCClient.EJABBERD_SERVICE_NAME, uid)\r\n                        .setHost(XmppRTCClient.EJABBERD_TURN_SERVER_HOST)\r\n                        .setSecurityMode(ConnectionConfiguration.SecurityMode.disabled)\r\n                        .setServiceName(XmppRTCClient.EJABBERD_SERVICE_NAME)\r\n                        .setDebuggerEnabled(true) // to view what&#39;s happening in detail\r\n                        .setConnectTimeout(1000000)\r\n                        .setCompressionEnabled(false)\r\n                        .setDebuggerEnabled(true)\r\n                        .setSendPresence(true)\r\n                        .build();\r\n\r\n                SASLAuthentication.blacklistSASLMechanism(&quot;SCRAM-SHA-1&quot;);\r\n                SASLAuthentication.blacklistSASLMechanism(&quot;DIGEST-MD5&quot;);\r\n                SASLAuthentication.unBlacklistSASLMechanism(&quot;PLAIN&quot;);\r\n\r\n                conn1 = new XMPPTCPConnection(config);\r\n\r\n                conn1.addConnectionListener(new ConnectionListener() {\r\n                    @Override\r\n                    public void connected(XMPPConnection connection) {\r\n                        Log.e(&quot;Connected&quot;,&quot;&quot;+connection.getHost());\r\n                        sendPresence();\r\n                        setConnected(true);\r\n                    }\r\n\r\n                    @Override\r\n                    public void authenticated(XMPPConnection connection, boolean resumed) {\r\n                        Log.e(&quot;Authenticated&quot;,&quot;&quot;+connection.getHost());\r\n\r\n                        if(connection.isAuthenticated()) {\r\n\r\n                            ServerPingWithAlarmManager.getInstanceFor(connection).setEnabled(true);\r\n\r\n                            PingManager pingManager = PingManager.getInstanceFor(connection);\r\n                            pingManager.setPingInterval(10);\r\n\r\n                            try {\r\n                                pingManager.pingMyServer();\r\n                                pingManager.pingMyServer(true, 10);\r\n                                pingManager.pingServerIfNecessary();\r\n                                pingManager.registerPingFailedListener(new PingFailedListener() {\r\n                                    @Override\r\n                                    public void pingFailed() {\r\n                                        Log.i(TAG, &quot;pingFailed&quot;);\r\n\r\n                                        conn1.disconnect();\r\n                                        try {\r\n                                            conn1.connect();\r\n                                        } catch (SmackException | IOException | XMPPException e) {\r\n                                            e.printStackTrace();\r\n                                        }\r\n                                    }\r\n                                });\r\n\r\n                            } catch (SmackException.NotConnectedException e) {\r\n                                Log.e(TAG, e.getMessage());\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void connectionClosed() {\r\n                        Log.e(&quot;Connection Closed&quot;,&quot;Connection Closed&quot;);\r\n                        setConnected(false);\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void connectionClosedOnError(Exception e) {\r\n                        Log.e(&quot;Connection Close Error&quot;,&quot;&quot;+e);\r\n\r\n                        // createConnection();\r\n                        setConnected(false);\r\n                    }\r\n\r\n                    @Override\r\n                    public void reconnectionSuccessful() {\r\n                        Log.e(&quot;Reconnection Success&quot;,&quot;Success&quot;);\r\n\r\n                        setConnected(true);\r\n                    }\r\n\r\n                    @Override\r\n                    public void reconnectingIn(int seconds) {\r\n                        setConnected(false);\r\n                    }\r\n\r\n                    @Override\r\n                    public void reconnectionFailed(Exception e) {\r\n                        Log.e(&quot;Reconnection Failed&quot;,&quot;&quot; + e);\r\n\r\n                        setConnected(false);\r\n                        tryRegisteringUser(conn1, uid);\r\n                    }\r\n                });\r\n\r\n                ReconnectionManager.getInstanceFor(conn1).enableAutomaticReconnection();\r\n                ReconnectionManager.setEnabledPerDefault(true);\r\n\r\n                conn1.connect();\r\n                if( conn1.isConnected() ) {\r\n                    Log.w(&quot;xmpp&quot;, &quot;conn done&quot;);\r\n\r\n                    setConnected(false);\r\n                }\r\n\r\n                conn1.login();\r\n\r\n                if(conn1.isAuthenticated()) {\r\n                    Log.w(&quot;xmpp&quot;, &quot;Auth done&quot;);\r\n                }\r\n\r\n\r\n                conn1.addAsyncStanzaListener(new StanzaListener() {\r\n\r\n                    @Override\r\n                    public void processPacket(Stanza packet) {\r\n                        Log.w(&quot;xmpp&quot;, &quot;received packet, &quot; + packet);\r\n\r\n                        try {\r\n                            Document doc = dBuilder.parse(new InputSource(new StringReader(packet.toXML().toString())));\r\n                            Element element = doc.getDocumentElement();\r\n\r\n                            String stanzaIdentifier = element.getTagName() + &quot;-&quot; + element.getAttribute(&quot;type&quot;);\r\n                            if (stanzaIdentifier.equals(&quot;message-groupchat&quot;)) { // initial call request, get the app on top\r\n                                if (CallActivity.active) {\r\n                                    CallActivity.getInstance().bringToFront();\r\n                                } else {\r\n                                    Intent webViewAppIntent = new Intent(getApplicationContext(), CallActivity.class);\r\n                                    Uri uri = Uri.parse(getString(R.string.base_url));\r\n                                    webViewAppIntent.setData(uri);\r\n                                    webViewAppIntent.putExtra(EXTRA_ROOMID, sharedPreferences.getWpUserId());\r\n                                    webViewAppIntent.putExtra(EXTRA_CAPTURETOTEXTURE_ENABLED, true);\r\n                                    webViewAppIntent.putExtra(&quot;IncomingCall&quot;, true);\r\n\r\n                                    webViewAppIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);\r\n\r\n                                    startActivity(webViewAppIntent);\r\n                                }\r\n                            }\r\n\r\n                            if (eventsListener == null) {\r\n                                Log.e(&quot;xmpp&quot;, &quot;Event listener is null&quot;);\r\n                            } else {\r\n                                eventsListener.processStanza(doc, packet);\r\n                            }\r\n\r\n                        } catch (SAXException e) {\r\n                            e.printStackTrace();\r\n                        } catch (IOException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                }, new AndFilter());\r\n\r\n                eventsListener.setConnection(conn1);\r\n\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n            return null;\r\n        }\r\n    }\r\n\r\n    private void tryRegisteringUser(XMPPTCPConnection conn1, String uid) {\r\n        try {\r\n            if (conn1.isConnected())\r\n            {\r\n                AccountManager accountManager = AccountManager.getInstance(conn1);\r\n\r\n                Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\n                map.put(&quot;username&quot;, uid);\r\n                map.put(&quot;name&quot;, uid);\r\n                map.put(&quot;password&quot;, uid);\r\n                map.put(&quot;email&quot;, &quot;abc@gmail.com&quot;);\r\n                map.put(&quot;creationDate&quot;, &quot;&quot; + System.currentTimeMillis() / 1000L);\r\n\r\n                accountManager.createAccount(uid, uid, map);\r\n\r\n                conn1.connect();\r\n                conn1.login();\r\n\r\n            } else {\r\n                conn1.connect();\r\n            }\r\n        } catch ( Exception e) {\r\n            Log.e(TAG, &quot;Something went wrong while registering user: &quot; + e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nNetwork Detector Reciever\r\n```\r\npackage com.medimetry.partner_app;\r\n\r\nimport android.content.BroadcastReceiver;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.net.ConnectivityManager;\r\nimport android.net.NetworkInfo;\r\nimport android.os.CountDownTimer;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport org.jivesoftware.smack.SmackException;\r\nimport org.jivesoftware.smack.XMPPException;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class NetworkDetectorReceiver extends BroadcastReceiver {\r\n\r\n    private static final String TAG = &quot;NetworkDetector&quot;;\r\n\r\n    Context mContext;\r\n    private boolean isNetworkConnected;\r\n\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n        Log.i(TAG, &quot;Wokring&quot;);\r\n\r\n        mContext = context;\r\n\r\n        ConnectivityManager connectivityManager\r\n                = (ConnectivityManager) mContext.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        NetworkInfo activeNetworkInfo = connectivityManager != null ? connectivityManager.getActiveNetworkInfo() : null;\r\n        isNetworkConnected = activeNetworkInfo != null &amp;&amp; activeNetworkInfo.isConnected();\r\n        Log.i(TAG, &quot;Is network connected: &quot; + isNetworkConnected);\r\n\r\n        new CountDownTimer(400, 1000) {\r\n            @Override\r\n            public void onTick(long millisUntilFinished) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onFinish() {\r\n\r\n                if (WebViewClass.getInstance() != null) {\r\n                    if (!isNetworkConnected) {\r\n                        WebViewClass.getInstance().offlineRibbon.setVisibility(View.VISIBLE);\r\n                    } else {\r\n                        WebViewClass.getInstance().offlineRibbon.setVisibility(View.GONE);\r\n                        if (WebViewClass.getInstance().errorOnStartup) {\r\n                            WebViewClass.getInstance().errorOnStartup = false;\r\n                            WebViewClass.getInstance().initFunction();\r\n                        }\r\n\r\n                    }\r\n                }\r\n                Log.e(&quot;Is Connected&quot;, &quot;&quot; + isNetworkConnected);\r\n            }\r\n        }.start();\r\n\r\n        // check if XMPP is connected.\r\n        Log.w(TAG, &quot;checking if XMPP is connected: &quot; + XMPPService.connected);\r\n\r\n        Intent serviceIntent = new Intent(mContext, XMPPService.class);\r\n\r\n        // if xmpp is connected, return\r\n        if (XMPPService.connected || !isNetworkConnected) return;\r\n\r\n        if ((XMPPService.instance() != null) &amp;&amp; (XMPPService.instance().conn1 != null)) {\r\n            Log.i(TAG, &quot;XMPP conn1 is actually Connected? &quot; + XMPPService.instance().conn1.isConnected());\r\n        }\r\n\r\n        if ((XMPPService.instance() != null) &amp;&amp; (XMPPService.instance().conn1 != null) &amp;&amp; !XMPPService.instance().conn1.isConnected()) {\r\n            try {\r\n                XMPPService.instance().conn1.connect();\r\n\r\n                return;\r\n            } catch (SmackException | IOException | XMPPException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n        mContext.stopService(serviceIntent);\r\n        mContext.startService(serviceIntent);\r\n    }\r\n}\r\n```\r\n\r\nManifest file for Receiving broadcast\r\n```\r\n&lt;receiver android:name=&quot;.NetworkDetectorReceiver&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.ACTION_POWER_CONNECTED&quot; /&gt;\r\n                &lt;action android:name=&quot;android.intent.action.ACTION_POWER_DISCONNECTED&quot;/&gt;\r\n                &lt;action android:name=&quot;android.intent.action.NEW_OUTGOING_CALL&quot;/&gt;\r\n                &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;\r\n                &lt;action android:name=&quot;android.intent.action.PROVIDER_CHANGED&quot;/&gt;\r\n                &lt;action android:name=&quot;android.intent.action.SCREEN_ON&quot;/&gt;\r\n                &lt;action android:name=&quot;android.intent.action.USER_UNLOCKED&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n\r\n&lt;service\r\n                android:name=&quot;.XMPPService&quot;\r\n                android:enabled=&quot;true&quot;\r\n                android:stopWithTask=&quot;false&quot; /&gt;\r\n```\r\n\r\nand How Call activity is started\r\n\r\nin XMPP Service\r\n```\r\n                            if (CallActivity.active) {\r\n                                CallActivity.getInstance().bringToFront();\r\n                            } else {\r\n                                Intent incomingCallViewIntent = new Intent(getApplicationContext(), CallActivity.class);\r\n                                Uri uri = Uri.parse(getString(R.string.base_url));\r\n                                incomingCallViewIntent.setData(uri);\r\n                                incomingCallViewIntent.putExtra(EXTRA_ROOMID, sharedPreferences.getWpUserId());\r\n                                incomingCallViewIntent.putExtra(EXTRA_CAPTURETOTEXTURE_ENABLED, true);\r\n                                incomingCallViewIntent.putExtra(&quot;IncomingCall&quot;, true);\r\n\r\n                                incomingCallViewIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);\r\n\r\n                                startActivity(incomingCallViewIntent);\r\n                            }\r\n```\r\n\r\nOkay, so my questions are:\r\n\r\n1. Is my broadcast receivers correct, I want this service be running every time. Have I overdone anything or underdone. Kindly let me know I am not sure about how to receive wifi connect / disconnect or mobile network on / off action.\r\n\r\n2. After 2-3 hours when my phone is in sleep mode, when calling I get this error\r\n```\r\n10-03 13:08:16.385 20956-21199/com.medimetry.partner_app E/AndroidRuntime: FATAL EXCEPTION: Smack Packet Reader (1)\r\n    Process: com.medimetry.partner_app, PID: 20956\r\n    java.lang.InternalError: Thread starting during runtime shutdown\r\n        at java.lang.Thread.nativeCreate(Native Method)\r\n        at java.lang.Thread.start(Thread.java:733)\r\n        at java.util.concurrent.ThreadPoolExecutor.addWorker(ThreadPoolExecutor.java:975)\r\n        at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1382)\r\n        at org.jivesoftware.smack.util.BoundedThreadPoolExecutor.executeBlocking(BoundedThreadPoolExecutor.java:44)\r\n        at org.jivesoftware.smack.AbstractXMPPConnection.processPacket(AbstractXMPPConnection.java:984)\r\n        at org.jivesoftware.smack.AbstractXMPPConnection.parseAndProcessStanza(AbstractXMPPConnection.java:968)\r\n        at org.jivesoftware.smack.tcp.XMPPTCPConnection.access$500(XMPPTCPConnection.java:140)\r\n        at org.jivesoftware.smack.tcp.XMPPTCPConnection$PacketReader.parsePackets(XMPPTCPConnection.java:997)\r\n        at org.jivesoftware.smack.tcp.XMPPTCPConnection$PacketReader.access$300(XMPPTCPConnection.java:952)\r\n        at org.jivesoftware.smack.tcp.XMPPTCPConnection$PacketReader$1.run(XMPPTCPConnection.java:967)\r\n        at java.lang.Thread.run(Thread.java:764)\r\n```\r\n as also mentioned in screenshot.\r\n\r\nWhat will be the best to start activity on call request.\r\nWe are targeting for a reliability like google duo.\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9rVYk.png","title":"Start incoming call activity from background service XMPP smack webRTC","body":"<p>I am building a video calling app, for our team personnels.</p>\n<p>So after sometime spent in stack overflow, I made the background service self-starting and alive, for most of the application part.</p>\n<p>I kept my phone connected to android studio for quite sometime like 3 hours, and after that when I tried calling user. in android studio I could see that XMPP service tried to start the activity, but was unable to because application wasn't open anymore.</p>\n<p><a href=\"https://i.stack.imgur.com/9rVYk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9rVYk.png\" alt=\"Logs when i tried to call\" /></a></p>\n<p>At precisely 13:08 I tried calling, and service tried to initiate call activity class. it crashed.</p>\n<p>I am attaching code of my XMPP Service, Broadcast Receiver, Manifest, and example of how call Activity Service can be started.</p>\n<p>XMPP Service</p>\n<pre><code>package com.medimetry.partner_app;\n\nimport android.app.Service;\nimport android.content.Intent;\nimport android.net.Uri;\nimport android.os.AsyncTask;\nimport android.os.IBinder;\nimport android.support.annotation.Nullable;\nimport android.util.Log;\nimport com.medimetry.partner_app.utils.Class_SharedPreferences;\nimport com.medimetry.partner_app.webRTC.ServerPingWithAlarmManager;\nimport com.medimetry.partner_app.webRTC.XmppRTCClient;\nimport org.jivesoftware.smack.*;\nimport org.jivesoftware.smack.filter.AndFilter;\nimport org.jivesoftware.smack.packet.Stanza;\nimport org.jivesoftware.smack.tcp.XMPPTCPConnection;\nimport org.jivesoftware.smack.tcp.XMPPTCPConnectionConfiguration;\nimport org.jivesoftware.smackx.iqregister.AccountManager;\nimport org.jivesoftware.smackx.ping.PingFailedListener;\nimport org.jivesoftware.smackx.ping.PingManager;\nimport org.w3c.dom.Document;\nimport org.w3c.dom.Element;\nimport org.xml.sax.InputSource;\nimport org.xml.sax.SAXException;\n\nimport javax.xml.parsers.DocumentBuilder;\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport javax.xml.parsers.ParserConfigurationException;\nimport java.io.IOException;\nimport java.io.StringReader;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport static com.medimetry.partner_app.CallActivity.EXTRA_CAPTURETOTEXTURE_ENABLED;\nimport static com.medimetry.partner_app.CallActivity.EXTRA_ROOMID;\n\npublic class XMPPService extends Service {\n    private Intent intent;\n    private Class_SharedPreferences sharedPreferences;\n    private XmppAsyncConnection xmppAsyncConnection;\n    public XMPPTCPConnection conn1;\n    private static XMPPService self;\n    private XMPPEventsListener eventsListener;\n\n    public static Boolean connected = false;\n    public static String TAG = &quot;xmppservice&quot;;\n\n    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();\n    DocumentBuilder dBuilder = null;\n    private String uid;\n    private boolean shouldSendPresence = false;\n\n    public static XMPPService instance() {\n        return self;\n    }\n\n    @Nullable\n    @Override\n    public IBinder onBind(Intent intent) {\n        this.intent = intent;\n        return null;\n    }\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n        self = this;\n\n        sharedPreferences = new Class_SharedPreferences(this);\n\n        if (sharedPreferences.getWpUserId().equals(&quot;0&quot;)) return;\n\n        this.xmppAsyncConnection = new XmppAsyncConnection();\n        this.xmppAsyncConnection.execute();\n\n        XmppRTCClient.instance(null, sharedPreferences.getWpUserId()).xmppServiceInitiated();\n\n        if (dBuilder == null) {\n            try {\n                dBuilder = dbFactory.newDocumentBuilder();\n\n            } catch (ParserConfigurationException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n    public void setEventsListener(XMPPEventsListener eventsListener) {\n        this.eventsListener = eventsListener;\n    }\n\n    public void setConnected(boolean isConnected) {\n        connected = isConnected;\n\n        Log.i(TAG, &quot;IsConnected status change: &quot; + (isConnected ? &quot;true&quot; : &quot;false&quot;));\n    }\n\n    public void sendPresence() {\n        if ( ! connected) return;\n\n        new android.os.Handler().postDelayed(\n                new Runnable() {\n                    public void run() {\n\n                        Log.i(TAG, &quot;Sending presence from xmpp&quot;);\n                    }\n                },\n                30000); // 30 seconds\n    }\n\n    class XmppAsyncConnection extends AsyncTask {\n\n        @Override\n        protected Object doInBackground(Object[] objects) {\n\n            uid = sharedPreferences.getWpUserId();\n            // uid = &quot;100111&quot;;\n\n            try {\n                XMPPTCPConnectionConfiguration config = XMPPTCPConnectionConfiguration.builder()\n                        .setUsernameAndPassword(uid + &quot;@&quot; + XmppRTCClient.EJABBERD_SERVICE_NAME, uid)\n                        .setHost(XmppRTCClient.EJABBERD_TURN_SERVER_HOST)\n                        .setSecurityMode(ConnectionConfiguration.SecurityMode.disabled)\n                        .setServiceName(XmppRTCClient.EJABBERD_SERVICE_NAME)\n                        .setDebuggerEnabled(true) // to view what's happening in detail\n                        .setConnectTimeout(1000000)\n                        .setCompressionEnabled(false)\n                        .setDebuggerEnabled(true)\n                        .setSendPresence(true)\n                        .build();\n\n                SASLAuthentication.blacklistSASLMechanism(&quot;SCRAM-SHA-1&quot;);\n                SASLAuthentication.blacklistSASLMechanism(&quot;DIGEST-MD5&quot;);\n                SASLAuthentication.unBlacklistSASLMechanism(&quot;PLAIN&quot;);\n\n                conn1 = new XMPPTCPConnection(config);\n\n                conn1.addConnectionListener(new ConnectionListener() {\n                    @Override\n                    public void connected(XMPPConnection connection) {\n                        Log.e(&quot;Connected&quot;,&quot;&quot;+connection.getHost());\n                        sendPresence();\n                        setConnected(true);\n                    }\n\n                    @Override\n                    public void authenticated(XMPPConnection connection, boolean resumed) {\n                        Log.e(&quot;Authenticated&quot;,&quot;&quot;+connection.getHost());\n\n                        if(connection.isAuthenticated()) {\n\n                            ServerPingWithAlarmManager.getInstanceFor(connection).setEnabled(true);\n\n                            PingManager pingManager = PingManager.getInstanceFor(connection);\n                            pingManager.setPingInterval(10);\n\n                            try {\n                                pingManager.pingMyServer();\n                                pingManager.pingMyServer(true, 10);\n                                pingManager.pingServerIfNecessary();\n                                pingManager.registerPingFailedListener(new PingFailedListener() {\n                                    @Override\n                                    public void pingFailed() {\n                                        Log.i(TAG, &quot;pingFailed&quot;);\n\n                                        conn1.disconnect();\n                                        try {\n                                            conn1.connect();\n                                        } catch (SmackException | IOException | XMPPException e) {\n                                            e.printStackTrace();\n                                        }\n                                    }\n                                });\n\n                            } catch (SmackException.NotConnectedException e) {\n                                Log.e(TAG, e.getMessage());\n                            }\n                        }\n                    }\n\n                    @Override\n                    public void connectionClosed() {\n                        Log.e(&quot;Connection Closed&quot;,&quot;Connection Closed&quot;);\n                        setConnected(false);\n\n                    }\n\n                    @Override\n                    public void connectionClosedOnError(Exception e) {\n                        Log.e(&quot;Connection Close Error&quot;,&quot;&quot;+e);\n\n                        // createConnection();\n                        setConnected(false);\n                    }\n\n                    @Override\n                    public void reconnectionSuccessful() {\n                        Log.e(&quot;Reconnection Success&quot;,&quot;Success&quot;);\n\n                        setConnected(true);\n                    }\n\n                    @Override\n                    public void reconnectingIn(int seconds) {\n                        setConnected(false);\n                    }\n\n                    @Override\n                    public void reconnectionFailed(Exception e) {\n                        Log.e(&quot;Reconnection Failed&quot;,&quot;&quot; + e);\n\n                        setConnected(false);\n                        tryRegisteringUser(conn1, uid);\n                    }\n                });\n\n                ReconnectionManager.getInstanceFor(conn1).enableAutomaticReconnection();\n                ReconnectionManager.setEnabledPerDefault(true);\n\n                conn1.connect();\n                if( conn1.isConnected() ) {\n                    Log.w(&quot;xmpp&quot;, &quot;conn done&quot;);\n\n                    setConnected(false);\n                }\n\n                conn1.login();\n\n                if(conn1.isAuthenticated()) {\n                    Log.w(&quot;xmpp&quot;, &quot;Auth done&quot;);\n                }\n\n\n                conn1.addAsyncStanzaListener(new StanzaListener() {\n\n                    @Override\n                    public void processPacket(Stanza packet) {\n                        Log.w(&quot;xmpp&quot;, &quot;received packet, &quot; + packet);\n\n                        try {\n                            Document doc = dBuilder.parse(new InputSource(new StringReader(packet.toXML().toString())));\n                            Element element = doc.getDocumentElement();\n\n                            String stanzaIdentifier = element.getTagName() + &quot;-&quot; + element.getAttribute(&quot;type&quot;);\n                            if (stanzaIdentifier.equals(&quot;message-groupchat&quot;)) { // initial call request, get the app on top\n                                if (CallActivity.active) {\n                                    CallActivity.getInstance().bringToFront();\n                                } else {\n                                    Intent webViewAppIntent = new Intent(getApplicationContext(), CallActivity.class);\n                                    Uri uri = Uri.parse(getString(R.string.base_url));\n                                    webViewAppIntent.setData(uri);\n                                    webViewAppIntent.putExtra(EXTRA_ROOMID, sharedPreferences.getWpUserId());\n                                    webViewAppIntent.putExtra(EXTRA_CAPTURETOTEXTURE_ENABLED, true);\n                                    webViewAppIntent.putExtra(&quot;IncomingCall&quot;, true);\n\n                                    webViewAppIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);\n\n                                    startActivity(webViewAppIntent);\n                                }\n                            }\n\n                            if (eventsListener == null) {\n                                Log.e(&quot;xmpp&quot;, &quot;Event listener is null&quot;);\n                            } else {\n                                eventsListener.processStanza(doc, packet);\n                            }\n\n                        } catch (SAXException e) {\n                            e.printStackTrace();\n                        } catch (IOException e) {\n                            e.printStackTrace();\n                        }\n                    }\n                }, new AndFilter());\n\n                eventsListener.setConnection(conn1);\n\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n\n            return null;\n        }\n    }\n\n    private void tryRegisteringUser(XMPPTCPConnection conn1, String uid) {\n        try {\n            if (conn1.isConnected())\n            {\n                AccountManager accountManager = AccountManager.getInstance(conn1);\n\n                Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\n                map.put(&quot;username&quot;, uid);\n                map.put(&quot;name&quot;, uid);\n                map.put(&quot;password&quot;, uid);\n                map.put(&quot;email&quot;, &quot;abc@gmail.com&quot;);\n                map.put(&quot;creationDate&quot;, &quot;&quot; + System.currentTimeMillis() / 1000L);\n\n                accountManager.createAccount(uid, uid, map);\n\n                conn1.connect();\n                conn1.login();\n\n            } else {\n                conn1.connect();\n            }\n        } catch ( Exception e) {\n            Log.e(TAG, &quot;Something went wrong while registering user: &quot; + e);\n        }\n    }\n}\n</code></pre>\n<p>Network Detector Reciever</p>\n<pre><code>package com.medimetry.partner_app;\n\nimport android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.net.ConnectivityManager;\nimport android.net.NetworkInfo;\nimport android.os.CountDownTimer;\nimport android.util.Log;\nimport android.view.View;\nimport org.jivesoftware.smack.SmackException;\nimport org.jivesoftware.smack.XMPPException;\n\nimport java.io.IOException;\n\npublic class NetworkDetectorReceiver extends BroadcastReceiver {\n\n    private static final String TAG = &quot;NetworkDetector&quot;;\n\n    Context mContext;\n    private boolean isNetworkConnected;\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        Log.i(TAG, &quot;Wokring&quot;);\n\n        mContext = context;\n\n        ConnectivityManager connectivityManager\n                = (ConnectivityManager) mContext.getSystemService(Context.CONNECTIVITY_SERVICE);\n        NetworkInfo activeNetworkInfo = connectivityManager != null ? connectivityManager.getActiveNetworkInfo() : null;\n        isNetworkConnected = activeNetworkInfo != null &amp;&amp; activeNetworkInfo.isConnected();\n        Log.i(TAG, &quot;Is network connected: &quot; + isNetworkConnected);\n\n        new CountDownTimer(400, 1000) {\n            @Override\n            public void onTick(long millisUntilFinished) {\n\n            }\n\n            @Override\n            public void onFinish() {\n\n                if (WebViewClass.getInstance() != null) {\n                    if (!isNetworkConnected) {\n                        WebViewClass.getInstance().offlineRibbon.setVisibility(View.VISIBLE);\n                    } else {\n                        WebViewClass.getInstance().offlineRibbon.setVisibility(View.GONE);\n                        if (WebViewClass.getInstance().errorOnStartup) {\n                            WebViewClass.getInstance().errorOnStartup = false;\n                            WebViewClass.getInstance().initFunction();\n                        }\n\n                    }\n                }\n                Log.e(&quot;Is Connected&quot;, &quot;&quot; + isNetworkConnected);\n            }\n        }.start();\n\n        // check if XMPP is connected.\n        Log.w(TAG, &quot;checking if XMPP is connected: &quot; + XMPPService.connected);\n\n        Intent serviceIntent = new Intent(mContext, XMPPService.class);\n\n        // if xmpp is connected, return\n        if (XMPPService.connected || !isNetworkConnected) return;\n\n        if ((XMPPService.instance() != null) &amp;&amp; (XMPPService.instance().conn1 != null)) {\n            Log.i(TAG, &quot;XMPP conn1 is actually Connected? &quot; + XMPPService.instance().conn1.isConnected());\n        }\n\n        if ((XMPPService.instance() != null) &amp;&amp; (XMPPService.instance().conn1 != null) &amp;&amp; !XMPPService.instance().conn1.isConnected()) {\n            try {\n                XMPPService.instance().conn1.connect();\n\n                return;\n            } catch (SmackException | IOException | XMPPException e) {\n                e.printStackTrace();\n            }\n        }\n\n        mContext.stopService(serviceIntent);\n        mContext.startService(serviceIntent);\n    }\n}\n</code></pre>\n<p>Manifest file for Receiving broadcast</p>\n<pre><code>&lt;receiver android:name=&quot;.NetworkDetectorReceiver&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.ACTION_POWER_CONNECTED&quot; /&gt;\n                &lt;action android:name=&quot;android.intent.action.ACTION_POWER_DISCONNECTED&quot;/&gt;\n                &lt;action android:name=&quot;android.intent.action.NEW_OUTGOING_CALL&quot;/&gt;\n                &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;\n                &lt;action android:name=&quot;android.intent.action.PROVIDER_CHANGED&quot;/&gt;\n                &lt;action android:name=&quot;android.intent.action.SCREEN_ON&quot;/&gt;\n                &lt;action android:name=&quot;android.intent.action.USER_UNLOCKED&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n\n&lt;service\n                android:name=&quot;.XMPPService&quot;\n                android:enabled=&quot;true&quot;\n                android:stopWithTask=&quot;false&quot; /&gt;\n</code></pre>\n<p>and How Call activity is started</p>\n<p>in XMPP Service</p>\n<pre><code>                            if (CallActivity.active) {\n                                CallActivity.getInstance().bringToFront();\n                            } else {\n                                Intent incomingCallViewIntent = new Intent(getApplicationContext(), CallActivity.class);\n                                Uri uri = Uri.parse(getString(R.string.base_url));\n                                incomingCallViewIntent.setData(uri);\n                                incomingCallViewIntent.putExtra(EXTRA_ROOMID, sharedPreferences.getWpUserId());\n                                incomingCallViewIntent.putExtra(EXTRA_CAPTURETOTEXTURE_ENABLED, true);\n                                incomingCallViewIntent.putExtra(&quot;IncomingCall&quot;, true);\n\n                                incomingCallViewIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);\n\n                                startActivity(incomingCallViewIntent);\n                            }\n</code></pre>\n<p>Okay, so my questions are:</p>\n<ol>\n<li><p>Is my broadcast receivers correct, I want this service be running every time. Have I overdone anything or underdone. Kindly let me know I am not sure about how to receive wifi connect / disconnect or mobile network on / off action.</p>\n</li>\n<li><p>After 2-3 hours when my phone is in sleep mode, when calling I get this error</p>\n</li>\n</ol>\n<pre><code>10-03 13:08:16.385 20956-21199/com.medimetry.partner_app E/AndroidRuntime: FATAL EXCEPTION: Smack Packet Reader (1)\n    Process: com.medimetry.partner_app, PID: 20956\n    java.lang.InternalError: Thread starting during runtime shutdown\n        at java.lang.Thread.nativeCreate(Native Method)\n        at java.lang.Thread.start(Thread.java:733)\n        at java.util.concurrent.ThreadPoolExecutor.addWorker(ThreadPoolExecutor.java:975)\n        at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1382)\n        at org.jivesoftware.smack.util.BoundedThreadPoolExecutor.executeBlocking(BoundedThreadPoolExecutor.java:44)\n        at org.jivesoftware.smack.AbstractXMPPConnection.processPacket(AbstractXMPPConnection.java:984)\n        at org.jivesoftware.smack.AbstractXMPPConnection.parseAndProcessStanza(AbstractXMPPConnection.java:968)\n        at org.jivesoftware.smack.tcp.XMPPTCPConnection.access$500(XMPPTCPConnection.java:140)\n        at org.jivesoftware.smack.tcp.XMPPTCPConnection$PacketReader.parsePackets(XMPPTCPConnection.java:997)\n        at org.jivesoftware.smack.tcp.XMPPTCPConnection$PacketReader.access$300(XMPPTCPConnection.java:952)\n        at org.jivesoftware.smack.tcp.XMPPTCPConnection$PacketReader$1.run(XMPPTCPConnection.java:967)\n        at java.lang.Thread.run(Thread.java:764)\n</code></pre>\n<p>as also mentioned in screenshot.</p>\n<p>What will be the best to start activity on call request.\nWe are targeting for a reliability like google duo.</p>\n"},{"tags":["java","date","datetime","timezone"],"comments":[{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":4,"creation_date":1676556772,"post_id":75473410,"comment_id":133163683,"body_markdown":"Is there a reason you&#39;re using the outdated date classes instead of the newer, more feature-rich classes from the `java.time` package, such as `LocalDate`?","body":"Is there a reason you&#39;re using the outdated date classes instead of the newer, more feature-rich classes from the <code>java.time</code> package, such as <code>LocalDate</code>?"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":1,"creation_date":1676556954,"post_id":75473410,"comment_id":133163739,"body_markdown":"You input - `25/12/2021` contains no time, only a date. So are we assuming `25/12/2021 00:00` UTC?","body":"You input - <code>25&#47;12&#47;2021</code> contains no time, only a date. So are we assuming <code>25&#47;12&#47;2021 00:00</code> UTC?"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":2,"creation_date":1676557049,"post_id":75473410,"comment_id":133163770,"body_markdown":"Typo: `dd/MM/yyy` should be `dd/MM/yyyy`. And, yes, please avoid `Date` and `SimpleDateFormat`.","body":"Typo: <code>dd&#47;MM&#47;yyy</code> should be <code>dd&#47;MM&#47;yyyy</code>. And, yes, please avoid <code>Date</code> and <code>SimpleDateFormat</code>."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1676575693,"post_id":75473410,"comment_id":133169894,"body_markdown":"I strongly recommend that you don’t touch `SimpleDateFormat`, `TimeZone` and `Date`. Those classes are poorly designed and long outdated, the first in particular notoriously troublesome. Use [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/index.html). See [the answer by deHaar](https://stackoverflow.com/a/75473651/5772882).","body":"I strongly recommend that you don’t touch <code>SimpleDateFormat</code>, <code>TimeZone</code> and <code>Date</code>. Those classes are poorly designed and long outdated, the first in particular notoriously troublesome. Use <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>. See <a href=\"https://stackoverflow.com/a/75473651/5772882\">the answer by deHaar</a>."}],"answers":[{"comments":[{"owner":{"account_id":27600747,"reputation":3,"user_id":21066027,"display_name":"Mortifer"},"score":1,"creation_date":1676568077,"post_id":75473451,"comment_id":133167654,"body_markdown":"Yeah, that was a typo. corrected the question","body":"Yeah, that was a typo. corrected the question"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1676615651,"post_id":75473451,"comment_id":133176559,"body_markdown":"This does not answer the question. `SimpleDateFormat` would ignore the number of letters for parsing. Yes, its confusing and unsafe. I said don’t use that class.","body":"This does not answer the question. <code>SimpleDateFormat</code> would ignore the number of letters for parsing. Yes, its confusing and unsafe. I said don’t use that class."}],"tags":[],"owner":{"account_id":27803447,"reputation":1,"user_id":21227452,"display_name":"Upwork Linked Test"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1676556621,"creation_date":1676556621,"answer_id":75473451,"question_id":75473410,"body_markdown":"    SimpleDateFormat zdate = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n    zdate.setTimeZone(TimeZone.getTimeZone(&quot;America/New_York&quot;));\r\n    \r\n    Date zdate2 = zdate.parse(&quot;25/12/2021&quot;)\r\n\r\nRemember the four &#39;y&#39; letters in format","title":"How do i get a date object for a specific timezone from a string date in Java?","body":"<pre><code>SimpleDateFormat zdate = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\nzdate.setTimeZone(TimeZone.getTimeZone(&quot;America/New_York&quot;));\n\nDate zdate2 = zdate.parse(&quot;25/12/2021&quot;)\n</code></pre>\n<p>Remember the four 'y' letters in format</p>\n"},{"comments":[{"owner":{"account_id":27600747,"reputation":3,"user_id":21066027,"display_name":"Mortifer"},"score":0,"creation_date":1676558001,"post_id":75473651,"comment_id":133164126,"body_markdown":"Actually I am connecting to an old api which accepts only java.util.Date as an argument. Can Passing LocaleDate cause any issue in such case?","body":"Actually I am connecting to an old api which accepts only java.util.Date as an argument. Can Passing LocaleDate cause any issue in such case?"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1676558906,"post_id":75473651,"comment_id":133164471,"body_markdown":"There are methods for legacy compatibility, but you cannot use them with a plain `LocalDate`, you will have to provide a time of day and a zone or offset from utc, too. What are you doing with this API? Are you only receiving `Date`s or do you intend to send anything to the API?","body":"There are methods for legacy compatibility, but you cannot use them with a plain <code>LocalDate</code>, you will have to provide a time of day and a zone or offset from utc, too. What are you doing with this API? Are you only receiving <code>Date</code>s or do you intend to send anything to the API?"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1676559085,"post_id":75473651,"comment_id":133164526,"body_markdown":"The most important thing here is to understand that a `Date` does not have any zone. It is basically a wrapper around epoch milliseconds. There`s an equivalent in `java.time` with the (more suitable) name `Instant`. You can convert a `ZonedDateTime` to an `Instant` and use `Date.from(Instant)` or `Date.toInstant()` in order to establish compatibility with legacy code.","body":"The most important thing here is to understand that a <code>Date</code> does not have any zone. It is basically a wrapper around epoch milliseconds. There<code>s an equivalent in </code>java.time` with the (more suitable) name <code>Instant</code>. You can convert a <code>ZonedDateTime</code> to an <code>Instant</code> and use <code>Date.from(Instant)</code> or <code>Date.toInstant()</code> in order to establish compatibility with legacy code."},{"owner":{"account_id":27600747,"reputation":3,"user_id":21066027,"display_name":"Mortifer"},"score":1,"creation_date":1676567358,"post_id":75473651,"comment_id":133167422,"body_markdown":"The Api basically accepted 2 parameters of java.util.date and returned some data for that date range. And it required date in New York time zone to as to send back the relevant data that i need. I tried using `Instant` and this worked. As you suggested, What I did basically was create a ZonedDateTime, converted it to Instant and used `Date.from(Instant)` and got the date that I wanted. So thanks a lot for the solution. I&#39;ll mark your response as the accepted answer. :)","body":"The Api basically accepted 2 parameters of java.util.date and returned some data for that date range. And it required date in New York time zone to as to send back the relevant data that i need. I tried using <code>Instant</code> and this worked. As you suggested, What I did basically was create a ZonedDateTime, converted it to Instant and used <code>Date.from(Instant)</code> and got the date that I wanted. So thanks a lot for the solution. I&#39;ll mark your response as the accepted answer. :)"},{"owner":{"account_id":27600747,"reputation":3,"user_id":21066027,"display_name":"Mortifer"},"score":1,"creation_date":1676567975,"post_id":75473651,"comment_id":133167623,"body_markdown":"`Date zonedDate = Date.from(result.toInstant());` Added this post following the Answer by deHaar","body":"<code>Date zonedDate = Date.from(result.toInstant());</code> Added this post following the Answer by deHaar"}],"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1676557591,"creation_date":1676557591,"answer_id":75473651,"question_id":75473410,"body_markdown":"If you are not forced to use `java.util.Date`, which itself does not have any zone, you could have your requirement met by implementing with `java.time`:\r\n\r\nYou just have to\r\n- parse it to a `LocalDate`, a class only having year, month of year and day of month\r\n- append a time of day \r\n- append the zone\r\n\r\nHere&#39;s an example…\r\n\r\n```Java\r\npublic static void main(String[] args) throws ParseException {\r\n\t// example input\r\n\tString input = &quot;25/12/2021&quot;;\r\n\t// create a pattern handler for parsing\r\n\tDateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;dd/MM/uuuu&quot;);\r\n\t// create the zone\r\n\tZoneId americaNewYork = ZoneId.of(&quot;America/New_York&quot;);\r\n\t// parse the String to a LocalDate, then add time of day and zone\r\n\tZonedDateTime result = LocalDate.parse(input, dtf)\r\n\t\t\t\t\t\t\t\t\t.atStartOfDay(americaNewYork);\r\n\tSystem.out.println(result);\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```none\r\n2021-12-25T00:00-05:00[America/New_York]\r\n```","title":"How do i get a date object for a specific timezone from a string date in Java?","body":"<p>If you are not forced to use <code>java.util.Date</code>, which itself does not have any zone, you could have your requirement met by implementing with <code>java.time</code>:</p>\n<p>You just have to</p>\n<ul>\n<li>parse it to a <code>LocalDate</code>, a class only having year, month of year and day of month</li>\n<li>append a time of day</li>\n<li>append the zone</li>\n</ul>\n<p>Here's an example…</p>\n<pre><code>public static void main(String[] args) throws ParseException {\n    // example input\n    String input = &quot;25/12/2021&quot;;\n    // create a pattern handler for parsing\n    DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;dd/MM/uuuu&quot;);\n    // create the zone\n    ZoneId americaNewYork = ZoneId.of(&quot;America/New_York&quot;);\n    // parse the String to a LocalDate, then add time of day and zone\n    ZonedDateTime result = LocalDate.parse(input, dtf)\n                                    .atStartOfDay(americaNewYork);\n    System.out.println(result);\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2021-12-25T00:00-05:00[America/New_York]\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1676575491,"post_id":75476142,"comment_id":133169829,"body_markdown":"A sympathetic attempt. It gives *java.time.format.DateTimeParseException: Text &#39;25/12/2021&#39; could not be parsed at index 0*. :-(","body":"A sympathetic attempt. It gives <i>java.time.format.DateTimeParseException: Text &#39;25/12/2021&#39; could not be parsed at index 0</i>. :-("},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1676706410,"post_id":75476142,"comment_id":133195092,"body_markdown":"I hate to say it, parse() on any of the time objects could well be something to remove from the APIs , it consume too much time by wasting time to get it to operate.","body":"I hate to say it, parse() on any of the time objects could well be something to remove from the APIs , it consume too much time by wasting time to get it to operate."}],"tags":[],"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676707899,"creation_date":1676569824,"answer_id":75476142,"question_id":75473410,"body_markdown":"Small protest about parse() on time objects, the following is what it really takes to assure creation from String information that parse() methods continually reject !!! \r\n\r\nbash-5.1$ javac ZoneParse.java\r\n\r\nNote: ZoneParse.java uses or overrides a deprecated API.\r\n\r\nNote: Recompile with -Xlint:deprecation for details.\r\n\r\nbash-5.1$ java ZoneParse\r\n\r\n24 Dec 2021 13:00:00 GMT\r\n\r\nbash-5.1$ \r\n\r\nIt will be something alike the following if safe...\r\n\r\n\r\n    import java.time.*;\r\n    \r\n    public class ZoneParse{\r\n    \r\n    public ZoneParse(){\r\n    String[] dt = (&quot;25/12/2021&quot;).split(&quot;/&quot;);\r\n    ZonedDateTime ztm = (LocalDate.of(new Integer(dt[2]).intValue(),new Integer(dt[1]).intValue(),new Integer(dt[0]).intValue())).atStartOfDay(ZoneId.systemDefault());\r\n    System.out.println((java.util.Date.from(  (ztm.withZoneSameInstant((ZoneId)ZoneId.of(&quot;America/New_York&quot;)).toInstant()))).toGMTString());\r\n    }//enconstr\r\n    \r\n    public static void main(String[] args){\r\n    new ZoneParse();\r\n    }//enmain\r\n    \r\n    }//enclss\r\n\r\n\r\n\r\nNOTE withZoneSameInstant() changes both the time and the zone.\r\n\r\nwithZoneSameLocal() only retags the time as belonging as another time zone\r\n\r\nThe updated time library since around java 8 is quicker\r\nThis following link is a library with some time assistance under construction avoids parse() as much as possible including a pair of methods of String fill in arguments to create a timedate.\r\n   https://drive.google.com/file/d/1gjHmdC-BW0Q2vXiQYmp1rzPU497sybNy/view?usp=share_link\r\n\r\n\r\n*The below erroneous code is because parse() is probably one of the WORST explained methods in the docs, it generally requires a few different pages each of different sections to get any explanation of how to use it.\r\n    ZonedDateTime ztm = ZonedDateTime.parse(&quot;25/12/2021&quot;);\r\n    Instant it = (ztm.withZoneSameInstant((ZoneId)ZoneId.of(&quot;America/New_York&quot;))).toInstant();\r\n    java.util.Date date = java.util.Date.from(it);*\r\n\r\n\r\n","title":"How do i get a date object for a specific timezone from a string date in Java?","body":"<p>Small protest about parse() on time objects, the following is what it really takes to assure creation from String information that parse() methods continually reject !!!</p>\n<p>bash-5.1$ javac ZoneParse.java</p>\n<p>Note: ZoneParse.java uses or overrides a deprecated API.</p>\n<p>Note: Recompile with -Xlint:deprecation for details.</p>\n<p>bash-5.1$ java ZoneParse</p>\n<p>24 Dec 2021 13:00:00 GMT</p>\n<p>bash-5.1$</p>\n<p>It will be something alike the following if safe...</p>\n<pre><code>import java.time.*;\n\npublic class ZoneParse{\n\npublic ZoneParse(){\nString[] dt = (&quot;25/12/2021&quot;).split(&quot;/&quot;);\nZonedDateTime ztm = (LocalDate.of(new Integer(dt[2]).intValue(),new Integer(dt[1]).intValue(),new Integer(dt[0]).intValue())).atStartOfDay(ZoneId.systemDefault());\nSystem.out.println((java.util.Date.from(  (ztm.withZoneSameInstant((ZoneId)ZoneId.of(&quot;America/New_York&quot;)).toInstant()))).toGMTString());\n}//enconstr\n\npublic static void main(String[] args){\nnew ZoneParse();\n}//enmain\n\n}//enclss\n</code></pre>\n<p>NOTE withZoneSameInstant() changes both the time and the zone.</p>\n<p>withZoneSameLocal() only retags the time as belonging as another time zone</p>\n<p>The updated time library since around java 8 is quicker\nThis following link is a library with some time assistance under construction avoids parse() as much as possible including a pair of methods of String fill in arguments to create a timedate.\n<a href=\"https://drive.google.com/file/d/1gjHmdC-BW0Q2vXiQYmp1rzPU497sybNy/view?usp=share_link\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/1gjHmdC-BW0Q2vXiQYmp1rzPU497sybNy/view?usp=share_link</a></p>\n<p><em>The below erroneous code is because parse() is probably one of the WORST explained methods in the docs, it generally requires a few different pages each of different sections to get any explanation of how to use it.\nZonedDateTime ztm = ZonedDateTime.parse(&quot;25/12/2021&quot;);\nInstant it = (ztm.withZoneSameInstant((ZoneId)ZoneId.of(&quot;America/New_York&quot;))).toInstant();\njava.util.Date date = java.util.Date.from(it);</em></p>\n"}],"owner":{"account_id":27600747,"reputation":3,"user_id":21066027,"display_name":"Mortifer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1676583886,"accepted_answer_id":75473651,"answer_count":3,"score":-2,"last_activity_date":1676707899,"creation_date":1676556411,"question_id":75473410,"body_markdown":"I have a string with value &quot;25/12/2021&quot; and I want to convert this string into a date format which has a New York timezone.\r\n\r\nI am new to Java dates\r\n\r\nI tried the below:\r\n\r\n```\r\nSimpleDateFormat zdate = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\nzdate.setTimeZone(TimeZone.getTimeZone(&quot;America/New_York&quot;));\r\n\r\nDate zdate2 = zdate.parse(&quot;25/12/2021&quot;)\r\n```\r\n\r\nbut the zdate2 object has the date in my local timezone rather than the New_York timezone.\r\n\r\nWhat am I doing wrong here?","title":"How do i get a date object for a specific timezone from a string date in Java?","body":"<p>I have a string with value &quot;25/12/2021&quot; and I want to convert this string into a date format which has a New York timezone.</p>\n<p>I am new to Java dates</p>\n<p>I tried the below:</p>\n<pre><code>SimpleDateFormat zdate = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\nzdate.setTimeZone(TimeZone.getTimeZone(&quot;America/New_York&quot;));\n\nDate zdate2 = zdate.parse(&quot;25/12/2021&quot;)\n</code></pre>\n<p>but the zdate2 object has the date in my local timezone rather than the New_York timezone.</p>\n<p>What am I doing wrong here?</p>\n"},{"tags":["java","module","serviceloader"],"answers":[{"comments":[{"owner":{"account_id":27816064,"reputation":1,"user_id":21237421,"display_name":"Wexalian"},"score":0,"creation_date":1676826752,"post_id":75492021,"comment_id":133211234,"body_markdown":"That&#39;s not my problem. I&#39;m writing a program which uses a library which calls ServiceLoader. ServiceLoader is activaly checking the caller class, e.g. one in the library, to see if it uses the interface. Which it can&#39;t because it&#39;s from a different module, my program.","body":"That&#39;s not my problem. I&#39;m writing a program which uses a library which calls ServiceLoader. ServiceLoader is activaly checking the caller class, e.g. one in the library, to see if it uses the interface. Which it can&#39;t because it&#39;s from a different module, my program."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1685451194,"post_id":75492021,"comment_id":134659090,"body_markdown":"@Wexalian then it would be the duty of that library to call [`addUses`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Module.html#addUses(java.lang.Class)) before calling into `ServiceLoader`.","body":"@Wexalian then it would be the duty of that library to call <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Module.html#addUses(java.lang.Class)\" rel=\"nofollow noreferrer\"><code>addUses</code></a> before calling into <code>ServiceLoader</code>."}],"tags":[],"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676707765,"creation_date":1676707765,"answer_id":75492021,"question_id":75490730,"body_markdown":"When using the ModuleLayer system, you also have to define the `uses` and `provides` in your and the various plugin module definitions.\r\n\r\nYour module:\r\n\r\n    uses com.wexalian.common.plugin.IAbstractPlugin;\r\n\r\nAnd in your plugin modules:\r\n\r\n    provides com.wexalian.common.plugin.IAbstractPlugin with some.plugin.PluginFactory;\r\n\r\nSee [ServiceLoader][1] and [ServiceLoader.Provider][2], this is how the service loader in one module knows about loaders in other modules.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ServiceLoader.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ServiceLoader.Provider.html","title":"Java ServiceLoader wrapper not working, internally using calling class","body":"<p>When using the ModuleLayer system, you also have to define the <code>uses</code> and <code>provides</code> in your and the various plugin module definitions.</p>\n<p>Your module:</p>\n<pre><code>uses com.wexalian.common.plugin.IAbstractPlugin;\n</code></pre>\n<p>And in your plugin modules:</p>\n<pre><code>provides com.wexalian.common.plugin.IAbstractPlugin with some.plugin.PluginFactory;\n</code></pre>\n<p>See <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ServiceLoader.html\" rel=\"nofollow noreferrer\">ServiceLoader</a> and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ServiceLoader.Provider.html\" rel=\"nofollow noreferrer\">ServiceLoader.Provider</a>, this is how the service loader in one module knows about loaders in other modules.</p>\n"}],"owner":{"account_id":27816064,"reputation":1,"user_id":21237421,"display_name":"Wexalian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676707765,"creation_date":1676685765,"question_id":75490730,"body_markdown":"So, I&#39;ve been trying to make a small `PluginLoader` in my library which allows you to load `JAR` files into a custom `ModuleLayer` and use the layer to load services using `ServiceLoader.load(ModuleLayer, Class&lt;?&gt;)`.\r\n\r\nHowever, when calling `ServiceProvider.load`, it internally uses `Reflection.getCallerClass` to get the, duhh, class calling the code, so it can load the services from it&#39;s module.\r\n\r\nPluginLoader.java\r\n```java\r\npackage com.wexalian.common.plugin;\r\n\r\nimport com.wexalian.common.collection.wrapper.StreamWrapper;\r\nimport com.wexalian.nullability.annotations.Nonnull;\r\n\r\nimport java.nio.file.Path;\r\nimport java.util.ServiceLoader;\r\nimport java.util.stream.Stream;\r\n\r\n@FunctionalInterface\r\npublic interface PluginLoader&lt;T extends IAbstractPlugin&gt; extends StreamWrapper.Iterable&lt;T&gt; {\r\n    @Nonnull\r\n    @Override\r\n    Stream&lt;T&gt; get();\r\n    \r\n    static void init(@Nonnull ServiceLoaderLayerFunction serviceLoaderFunc) {\r\n        PluginLoaderImpl.init(serviceLoaderFunc);\r\n    }\r\n    \r\n    static void loadPlugins(@Nonnull Path path) {\r\n        PluginLoaderImpl.loadPlugins(path);\r\n    }\r\n    \r\n    @Nonnull\r\n    static &lt;T extends IAbstractPlugin&gt; PluginLoader&lt;T&gt; load(@Nonnull Class&lt;T&gt; pluginClass) {\r\n        return load(pluginClass, null);\r\n    }\r\n    \r\n    @Nonnull\r\n    static &lt;T extends IAbstractPlugin&gt; PluginLoader&lt;T&gt; load(@Nonnull Class&lt;T&gt; pluginClass, ServiceLoaderFallbackFunction fallbackServiceProvider) {\r\n        return PluginLoaderImpl.load(pluginClass, fallbackServiceProvider);\r\n    }\r\n    \r\n    @FunctionalInterface\r\n    interface ServiceLoaderLayerFunction {\r\n        @Nonnull\r\n        &lt;T&gt; ServiceLoader&lt;T&gt; load(@Nonnull ModuleLayer layer, @Nonnull Class&lt;T&gt; clazz);\r\n        \r\n        @Nonnull\r\n        default &lt;T&gt; Stream&lt;T&gt; stream(@Nonnull ModuleLayer layer, @Nonnull Class&lt;T&gt; clazz) {\r\n            return load(layer, clazz).stream().map(ServiceLoader.Provider::get);\r\n        }\r\n    }\r\n    \r\n    @FunctionalInterface\r\n    interface ServiceLoaderFallbackFunction {\r\n        @Nonnull\r\n        &lt;T&gt; ServiceLoader&lt;T&gt; load(@Nonnull Class&lt;T&gt; clazz);\r\n        \r\n        @Nonnull\r\n        default &lt;T&gt; Stream&lt;T&gt; stream(@Nonnull Class&lt;T&gt; clazz) {\r\n            return load(clazz).stream().map(ServiceLoader.Provider::get);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nPluginLoaderImpl.java\r\n```java\r\npackage com.wexalian.common.plugin;\r\n\r\nimport com.wexalian.nullability.annotations.Nonnull;\r\n\r\nimport java.io.IOException;\r\nimport java.lang.module.Configuration;\r\nimport java.lang.module.ModuleFinder;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Path;\r\nimport java.util.HashSet;\r\nimport java.util.List;\r\nimport java.util.Set;\r\nimport java.util.stream.Stream;\r\n\r\nfinal class PluginLoaderImpl {\r\n    private static final Set&lt;ModuleLayer&gt; pluginLayerSet = new HashSet&lt;&gt;();\r\n    \r\n    private static PluginLoader.ServiceLoaderLayerFunction serviceLoaderLayer;\r\n    private static ModuleLayer coreLayer;\r\n    private static ClassLoader coreLoader;\r\n    \r\n    private static boolean init = false;\r\n    \r\n    private PluginLoaderImpl() {}\r\n    \r\n    static void init(@Nonnull PluginLoader.ServiceLoaderLayerFunction serviceLoaderFunc) {\r\n        if (!init) {\r\n            serviceLoaderLayer = serviceLoaderFunc;\r\n            \r\n            Class&lt;?&gt; coreClass = StackWalker.getInstance(StackWalker.Option.RETAIN_CLASS_REFERENCE).getCallerClass();\r\n            coreLayer = coreClass.getModule().getLayer();\r\n            coreLoader = coreClass.getClassLoader();\r\n            \r\n            if (coreLayer == null) {\r\n                throw new IllegalStateException(&quot;PluginLoaderImpl can only be initialized from a named module!&quot;);\r\n            }\r\n            else init = true;\r\n        }\r\n        else throw new IllegalStateException(&quot;PluginLoaderImpl can only be initialized once!&quot;);\r\n    }\r\n    \r\n    static void loadPlugins(@Nonnull Path path) {\r\n        if (init) {\r\n            if (Files.exists(path)) {\r\n                try (Stream&lt;Path&gt; paths = Files.list(path)) {\r\n                    ModuleFinder moduleFinder = ModuleFinder.of(paths.toArray(Path[]::new));\r\n                    List&lt;String&gt; moduleNames = moduleFinder.findAll().stream().map(ref -&gt; ref.descriptor().name()).toList();\r\n                    Configuration configuration = coreLayer.configuration().resolveAndBind(moduleFinder, ModuleFinder.of(), moduleNames);\r\n                    ModuleLayer pluginLayer = coreLayer.defineModulesWithOneLoader(configuration, coreLoader);\r\n                    pluginLayerSet.add(pluginLayer);\r\n                }\r\n                catch (IOException e) {\r\n                    throw new IllegalStateException(&quot;Error loading plugins from path &quot; + path, e);\r\n                }\r\n            }\r\n        }\r\n        else throw new IllegalStateException(&quot;PluginLoaderImpl has to be initialized before you can load plugins!&quot;);\r\n    }\r\n    \r\n    static &lt;T extends IAbstractPlugin&gt; PluginLoader&lt;T&gt; load(Class&lt;T&gt; clazz, PluginLoader.ServiceLoaderFallbackFunction serviceLoader) {\r\n        if (init) {\r\n            if (!pluginLayerSet.isEmpty()) {\r\n                return () -&gt; pluginLayerSet.stream().flatMap(layer -&gt; serviceLoaderLayer.stream(layer, clazz)).filter(IAbstractPlugin::isEnabled);\r\n            }\r\n            else {\r\n                return () -&gt; serviceLoaderLayer.stream(coreLayer, clazz).filter(IAbstractPlugin::isEnabled);\r\n            }\r\n        }\r\n        else if (serviceLoader != null) {\r\n            return () -&gt; serviceLoader.stream(clazz);\r\n        }\r\n        else throw new IllegalStateException(&quot;PluginLoaderImpl has to be initialized before you can load services from plugins!&quot;);\r\n    }\r\n}\r\n```\r\n\r\nNow my problem is:\r\nI am currently writing a program with some services, and using that library to load JAR files and load them. However, it recognizes the `PluginLoader` as the caller class, which &quot;does not declare uses&quot;, because the library doesn&#39;t actually have the service I want.\r\n\r\nI have found a work around, which is accepting a `Function&lt;ModuleLayer, Class&lt;?&gt;, ServiceProvider&lt;?&gt;`, which redirects all the calls to the proper module, but I&#39;d rather not do that everywhere I use my `PluginLoader`.\r\n\r\nOther than this I wouldn&#39;t know any other solution, so maybe one of you knows.\r\n\r\nThanks in advance,\r\nWexalian","title":"Java ServiceLoader wrapper not working, internally using calling class","body":"<p>So, I've been trying to make a small <code>PluginLoader</code> in my library which allows you to load <code>JAR</code> files into a custom <code>ModuleLayer</code> and use the layer to load services using <code>ServiceLoader.load(ModuleLayer, Class&lt;?&gt;)</code>.</p>\n<p>However, when calling <code>ServiceProvider.load</code>, it internally uses <code>Reflection.getCallerClass</code> to get the, duhh, class calling the code, so it can load the services from it's module.</p>\n<p>PluginLoader.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.wexalian.common.plugin;\n\nimport com.wexalian.common.collection.wrapper.StreamWrapper;\nimport com.wexalian.nullability.annotations.Nonnull;\n\nimport java.nio.file.Path;\nimport java.util.ServiceLoader;\nimport java.util.stream.Stream;\n\n@FunctionalInterface\npublic interface PluginLoader&lt;T extends IAbstractPlugin&gt; extends StreamWrapper.Iterable&lt;T&gt; {\n    @Nonnull\n    @Override\n    Stream&lt;T&gt; get();\n    \n    static void init(@Nonnull ServiceLoaderLayerFunction serviceLoaderFunc) {\n        PluginLoaderImpl.init(serviceLoaderFunc);\n    }\n    \n    static void loadPlugins(@Nonnull Path path) {\n        PluginLoaderImpl.loadPlugins(path);\n    }\n    \n    @Nonnull\n    static &lt;T extends IAbstractPlugin&gt; PluginLoader&lt;T&gt; load(@Nonnull Class&lt;T&gt; pluginClass) {\n        return load(pluginClass, null);\n    }\n    \n    @Nonnull\n    static &lt;T extends IAbstractPlugin&gt; PluginLoader&lt;T&gt; load(@Nonnull Class&lt;T&gt; pluginClass, ServiceLoaderFallbackFunction fallbackServiceProvider) {\n        return PluginLoaderImpl.load(pluginClass, fallbackServiceProvider);\n    }\n    \n    @FunctionalInterface\n    interface ServiceLoaderLayerFunction {\n        @Nonnull\n        &lt;T&gt; ServiceLoader&lt;T&gt; load(@Nonnull ModuleLayer layer, @Nonnull Class&lt;T&gt; clazz);\n        \n        @Nonnull\n        default &lt;T&gt; Stream&lt;T&gt; stream(@Nonnull ModuleLayer layer, @Nonnull Class&lt;T&gt; clazz) {\n            return load(layer, clazz).stream().map(ServiceLoader.Provider::get);\n        }\n    }\n    \n    @FunctionalInterface\n    interface ServiceLoaderFallbackFunction {\n        @Nonnull\n        &lt;T&gt; ServiceLoader&lt;T&gt; load(@Nonnull Class&lt;T&gt; clazz);\n        \n        @Nonnull\n        default &lt;T&gt; Stream&lt;T&gt; stream(@Nonnull Class&lt;T&gt; clazz) {\n            return load(clazz).stream().map(ServiceLoader.Provider::get);\n        }\n    }\n}\n</code></pre>\n<p>PluginLoaderImpl.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.wexalian.common.plugin;\n\nimport com.wexalian.nullability.annotations.Nonnull;\n\nimport java.io.IOException;\nimport java.lang.module.Configuration;\nimport java.lang.module.ModuleFinder;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Set;\nimport java.util.stream.Stream;\n\nfinal class PluginLoaderImpl {\n    private static final Set&lt;ModuleLayer&gt; pluginLayerSet = new HashSet&lt;&gt;();\n    \n    private static PluginLoader.ServiceLoaderLayerFunction serviceLoaderLayer;\n    private static ModuleLayer coreLayer;\n    private static ClassLoader coreLoader;\n    \n    private static boolean init = false;\n    \n    private PluginLoaderImpl() {}\n    \n    static void init(@Nonnull PluginLoader.ServiceLoaderLayerFunction serviceLoaderFunc) {\n        if (!init) {\n            serviceLoaderLayer = serviceLoaderFunc;\n            \n            Class&lt;?&gt; coreClass = StackWalker.getInstance(StackWalker.Option.RETAIN_CLASS_REFERENCE).getCallerClass();\n            coreLayer = coreClass.getModule().getLayer();\n            coreLoader = coreClass.getClassLoader();\n            \n            if (coreLayer == null) {\n                throw new IllegalStateException(&quot;PluginLoaderImpl can only be initialized from a named module!&quot;);\n            }\n            else init = true;\n        }\n        else throw new IllegalStateException(&quot;PluginLoaderImpl can only be initialized once!&quot;);\n    }\n    \n    static void loadPlugins(@Nonnull Path path) {\n        if (init) {\n            if (Files.exists(path)) {\n                try (Stream&lt;Path&gt; paths = Files.list(path)) {\n                    ModuleFinder moduleFinder = ModuleFinder.of(paths.toArray(Path[]::new));\n                    List&lt;String&gt; moduleNames = moduleFinder.findAll().stream().map(ref -&gt; ref.descriptor().name()).toList();\n                    Configuration configuration = coreLayer.configuration().resolveAndBind(moduleFinder, ModuleFinder.of(), moduleNames);\n                    ModuleLayer pluginLayer = coreLayer.defineModulesWithOneLoader(configuration, coreLoader);\n                    pluginLayerSet.add(pluginLayer);\n                }\n                catch (IOException e) {\n                    throw new IllegalStateException(&quot;Error loading plugins from path &quot; + path, e);\n                }\n            }\n        }\n        else throw new IllegalStateException(&quot;PluginLoaderImpl has to be initialized before you can load plugins!&quot;);\n    }\n    \n    static &lt;T extends IAbstractPlugin&gt; PluginLoader&lt;T&gt; load(Class&lt;T&gt; clazz, PluginLoader.ServiceLoaderFallbackFunction serviceLoader) {\n        if (init) {\n            if (!pluginLayerSet.isEmpty()) {\n                return () -&gt; pluginLayerSet.stream().flatMap(layer -&gt; serviceLoaderLayer.stream(layer, clazz)).filter(IAbstractPlugin::isEnabled);\n            }\n            else {\n                return () -&gt; serviceLoaderLayer.stream(coreLayer, clazz).filter(IAbstractPlugin::isEnabled);\n            }\n        }\n        else if (serviceLoader != null) {\n            return () -&gt; serviceLoader.stream(clazz);\n        }\n        else throw new IllegalStateException(&quot;PluginLoaderImpl has to be initialized before you can load services from plugins!&quot;);\n    }\n}\n</code></pre>\n<p>Now my problem is:\nI am currently writing a program with some services, and using that library to load JAR files and load them. However, it recognizes the <code>PluginLoader</code> as the caller class, which &quot;does not declare uses&quot;, because the library doesn't actually have the service I want.</p>\n<p>I have found a work around, which is accepting a <code>Function&lt;ModuleLayer, Class&lt;?&gt;, ServiceProvider&lt;?&gt;</code>, which redirects all the calls to the proper module, but I'd rather not do that everywhere I use my <code>PluginLoader</code>.</p>\n<p>Other than this I wouldn't know any other solution, so maybe one of you knows.</p>\n<p>Thanks in advance,\nWexalian</p>\n"},{"tags":["java","android","linear-programming","scpsolver"],"comments":[{"owner":{"account_id":111736,"reputation":11811,"user_id":295004,"display_name":"Morrison Chang"},"score":0,"creation_date":1676697021,"post_id":75491100,"comment_id":133194286,"body_markdown":"1) You have missing dependency. 2) Checking the README.md on https://bitbucket.org/hplanatscher/scpsolver/src/master/ states &quot;3 steps to start (works for Windows, Linux and Mac) Download the SCPSolver.jar and a solver pack:&quot; 3) As the README states different architectures, a look in the `externaltools` directory shows various C files. So you&#39;ll have to port it to Android if you want to use that library.","body":"1) You have missing dependency. 2) Checking the README.md on <a href=\"https://bitbucket.org/hplanatscher/scpsolver/src/master/\" rel=\"nofollow noreferrer\">bitbucket.org/hplanatscher/scpsolver/src/master</a> states &quot;3 steps to start (works for Windows, Linux and Mac) Download the SCPSolver.jar and a solver pack:&quot; 3) As the README states different architectures, a look in the <code>externaltools</code> directory shows various C files. So you&#39;ll have to port it to Android if you want to use that library."},{"owner":{"account_id":5162157,"reputation":109,"user_id":10217723,"display_name":"Abdalnassir Ghzawi  "},"score":0,"creation_date":1676704014,"post_id":75491100,"comment_id":133194896,"body_markdown":"I did that now I am getting :Installation failed due to: &#39;INSTALL_FAILED_NO_MATCHING_ABIS: Failed to extract native libraries, res=-113&#39;","body":"I did that now I am getting :Installation failed due to: &#39;INSTALL_FAILED_NO_MATCHING_ABIS: Failed to extract native libraries, res=-113&#39;"}],"answers":[{"comments":[{"owner":{"account_id":111736,"reputation":11811,"user_id":295004,"display_name":"Morrison Chang"},"score":0,"creation_date":1676708506,"post_id":75491914,"comment_id":133195283,"body_markdown":"For reference one of the external dependencies for SCPSolver appears to exist for Android: https://github.com/leonardodalinky/lpsolve-android While it is relatively recent it is unclear if it works or not.","body":"For reference one of the external dependencies for SCPSolver appears to exist for Android: <a href=\"https://github.com/leonardodalinky/lpsolve-android\" rel=\"nofollow noreferrer\">github.com/leonardodalinky/lpsolve-android</a> While it is relatively recent it is unclear if it works or not."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676706707,"creation_date":1676706396,"answer_id":75491914,"question_id":75491100,"body_markdown":"&gt; I did that now I am getting :\r\n&gt;\r\n&gt;      Installation failed due to: &#39;INSTALL_FAILED_NO_MATCHING_ABIS: \r\n&gt;      Failed to extract native libraries, res=-113&#39;\r\n\r\nThe standard SCPSolver JARs do not contain native libraries for Android platforms.  The [Website][1] says that the downloadables support &quot;Linux, Mac Os X and Windows&quot;.  Android is not listed.\r\n\r\nYou could attempt to port SCPSolver to Android:\r\n\r\n  - fetch the source code from BitBucket (https://bitbucket.org/hplanatscher/scpsolver.git) \r\n  - modify one of the existing solver build script to work with Android\r\n  - run it.\r\n\r\nYou would also need to deal with any Java(TM) vs Android incompatibilities that affect the codebase.\r\n\r\nHowever ... my Googling didn&#39;t reveal any evidence that anyone has *succeeded* in doing that, so there could be technical problems that need to be overcome.  \r\n\r\nThe other possibility would be to **pay** someone to do the porting work for you.  Note that you / they would need to comply with the terms of the applicable copyright licenses.  See the Website for details.\r\n\r\n\r\n  [1]: http://scpsolver.org/","title":"Using SCPSolver in Android","body":"<blockquote>\n<p>I did that now I am getting :</p>\n<pre><code> Installation failed due to: 'INSTALL_FAILED_NO_MATCHING_ABIS: \n Failed to extract native libraries, res=-113'\n</code></pre>\n</blockquote>\n<p>The standard SCPSolver JARs do not contain native libraries for Android platforms.  The <a href=\"http://scpsolver.org/\" rel=\"nofollow noreferrer\">Website</a> says that the downloadables support &quot;Linux, Mac Os X and Windows&quot;.  Android is not listed.</p>\n<p>You could attempt to port SCPSolver to Android:</p>\n<ul>\n<li>fetch the source code from BitBucket (<a href=\"https://bitbucket.org/hplanatscher/scpsolver.git\" rel=\"nofollow noreferrer\">https://bitbucket.org/hplanatscher/scpsolver.git</a>)</li>\n<li>modify one of the existing solver build script to work with Android</li>\n<li>run it.</li>\n</ul>\n<p>You would also need to deal with any Java(TM) vs Android incompatibilities that affect the codebase.</p>\n<p>However ... my Googling didn't reveal any evidence that anyone has <em>succeeded</em> in doing that, so there could be technical problems that need to be overcome.</p>\n<p>The other possibility would be to <strong>pay</strong> someone to do the porting work for you.  Note that you / they would need to comply with the terms of the applicable copyright licenses.  See the Website for details.</p>\n"}],"owner":{"account_id":5162157,"reputation":109,"user_id":10217723,"display_name":"Abdalnassir Ghzawi  "},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676706707,"creation_date":1676693029,"question_id":75491100,"body_markdown":"I am trying to use [SCPSolver][1] in Android project to solve linear programming problem.\r\nI have downloaded the Jar file and added it to the lib folder. Everything works seemingly fine until I invodel the solve method; I get a null pointer exception.\r\nThis is my code:\r\n\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    import android.os.Bundle;\r\n    import android.widget.Toast;\r\n    \r\n    import scpsolver.constraints.LinearBiggerThanEqualsConstraint;\r\n    import scpsolver.constraints.LinearSmallerThanEqualsConstraint;\r\n    import scpsolver.lpsolver.LinearProgramSolver;\r\n    import scpsolver.lpsolver.SolverFactory;\r\n    import scpsolver.problems.LinearProgram;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            LinearProgram lp = new LinearProgram(new double[]{5.0,10.0});\r\n            lp.addConstraint(new LinearBiggerThanEqualsConstraint(new double[]{3.0,1.0}, 8.0, &quot;c1&quot;));\r\n            lp.addConstraint(new LinearBiggerThanEqualsConstraint(new double[]{0.0,4.0}, 4.0, &quot;c2&quot;));\r\n            lp.addConstraint(new LinearSmallerThanEqualsConstraint(new double[]{2.0,0.0}, 2.0, &quot;c3&quot;));\r\n            lp.setMinProblem(true);\r\n            LinearProgramSolver solver  = SolverFactory.newDefault();\r\n            double[] sol = solver.solve(lp);\r\n    \r\n    \r\n        }\r\n    }\r\n\r\nThis is the error I get:\r\n\r\n                                                                                                \r\n\r\n        java.lang.RuntimeException: Unable to start activity \r\n    Attempt to invoke interface method &#39;double[] scpsolver.lpsolver.LinearProgramSolver.solve(scpsolver.problems.LinearProgram)&#39; on a null object reference\r\n    ....\r\n    Caused by: java.lang.NullPointerException: Attempt to invoke interface method &#39;double[] scpsolver.lpsolver.LinearProgramSolver.solve(scpsolver.problems.LinearProgram)&#39; on a null object reference\r\n\r\n\r\n\r\n  [1]: http://scpsolver.org/","title":"Using SCPSolver in Android","body":"<p>I am trying to use <a href=\"http://scpsolver.org/\" rel=\"nofollow noreferrer\">SCPSolver</a> in Android project to solve linear programming problem.\nI have downloaded the Jar file and added it to the lib folder. Everything works seemingly fine until I invodel the solve method; I get a null pointer exception.\nThis is my code:</p>\n<pre><code>import androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.widget.Toast;\n\nimport scpsolver.constraints.LinearBiggerThanEqualsConstraint;\nimport scpsolver.constraints.LinearSmallerThanEqualsConstraint;\nimport scpsolver.lpsolver.LinearProgramSolver;\nimport scpsolver.lpsolver.SolverFactory;\nimport scpsolver.problems.LinearProgram;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        LinearProgram lp = new LinearProgram(new double[]{5.0,10.0});\n        lp.addConstraint(new LinearBiggerThanEqualsConstraint(new double[]{3.0,1.0}, 8.0, &quot;c1&quot;));\n        lp.addConstraint(new LinearBiggerThanEqualsConstraint(new double[]{0.0,4.0}, 4.0, &quot;c2&quot;));\n        lp.addConstraint(new LinearSmallerThanEqualsConstraint(new double[]{2.0,0.0}, 2.0, &quot;c3&quot;));\n        lp.setMinProblem(true);\n        LinearProgramSolver solver  = SolverFactory.newDefault();\n        double[] sol = solver.solve(lp);\n\n\n    }\n}\n</code></pre>\n<p>This is the error I get:</p>\n<pre><code>    java.lang.RuntimeException: Unable to start activity \nAttempt to invoke interface method 'double[] scpsolver.lpsolver.LinearProgramSolver.solve(scpsolver.problems.LinearProgram)' on a null object reference\n....\nCaused by: java.lang.NullPointerException: Attempt to invoke interface method 'double[] scpsolver.lpsolver.LinearProgramSolver.solve(scpsolver.problems.LinearProgram)' on a null object reference\n</code></pre>\n"},{"tags":["java","json","jolt"],"answers":[{"tags":[],"owner":{"account_id":11500422,"reputation":2541,"user_id":8428397,"display_name":"Mohammadreza Khedri"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675689135,"creation_date":1675689135,"answer_id":75361763,"question_id":75361703,"body_markdown":"You can use this spec:\r\n\r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: {\r\n        &quot;@&quot;: &quot;&amp;1&quot;,\r\n        &quot;0&quot;: {\r\n          &quot;#startDate&quot;: &quot;date[0].name&quot;,\r\n          &quot;start&quot;: &quot;date[0].value&quot;,\r\n          &quot;#endDate&quot;: &quot;date[1].name&quot;,\r\n          &quot;end&quot;: &quot;date[1].value&quot;\r\n        }\r\n      }\r\n    }\r\n  }\r\n]\r\n```\r\n\r\nYou can use `@` to get the `steps` array and put it into the `steps` key with `&amp;1`.","title":"Jolt transform array into multiple Objects","body":"<p>You can use this spec:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;@&quot;: &quot;&amp;1&quot;,\n        &quot;0&quot;: {\n          &quot;#startDate&quot;: &quot;date[0].name&quot;,\n          &quot;start&quot;: &quot;date[0].value&quot;,\n          &quot;#endDate&quot;: &quot;date[1].name&quot;,\n          &quot;end&quot;: &quot;date[1].value&quot;\n        }\n      }\n    }\n  }\n]\n</code></pre>\n<p>You can use <code>@</code> to get the <code>steps</code> array and put it into the <code>steps</code> key with <code>&amp;1</code>.</p>\n"},{"tags":[],"owner":{"account_id":7712415,"reputation":60542,"user_id":5841306,"display_name":"Barbaros &#214;zhan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675691135,"creation_date":1675691135,"answer_id":75362116,"question_id":75361703,"body_markdown":"One option is to conditionally pick by the existing(`steps`) array&#39;s indexes  while walking through it such as\r\n\r\n```json \r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;steps&quot;: {\r\n        &quot;@1&quot;: &quot;&quot;,// derive the whole value from the upper level, eg. replicate it  \r\n        &quot;0&quot;: {// the first index\r\n          &quot;#startDate&quot;: &quot;date[&amp;1].name&quot;,\r\n          &quot;start&quot;: &quot;date[&amp;1].value&quot;\r\n        },\r\n        &quot;*&quot;: {// the other index(this case there&#39;s only one)\r\n          &quot;#endDate&quot;: &quot;date[&amp;1].name&quot;,// bring the value of the wrapper object&#39;S index by using &amp;1(going up one level the tree) \r\n          &quot;end&quot;: &quot;date[&amp;1].value&quot;\r\n        }\r\n      }\r\n    }\r\n  }\r\n]\r\n```\r\n\r\nthe ***demo*** on the site http://jolt-demo.appspot.com/ is\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/C8p5h.jpg","title":"Jolt transform array into multiple Objects","body":"<p>One option is to conditionally pick by the existing(<code>steps</code>) array's indexes  while walking through it such as</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;steps&quot;: {\n        &quot;@1&quot;: &quot;&quot;,// derive the whole value from the upper level, eg. replicate it  \n        &quot;0&quot;: {// the first index\n          &quot;#startDate&quot;: &quot;date[&amp;1].name&quot;,\n          &quot;start&quot;: &quot;date[&amp;1].value&quot;\n        },\n        &quot;*&quot;: {// the other index(this case there's only one)\n          &quot;#endDate&quot;: &quot;date[&amp;1].name&quot;,// bring the value of the wrapper object'S index by using &amp;1(going up one level the tree) \n          &quot;end&quot;: &quot;date[&amp;1].value&quot;\n        }\n      }\n    }\n  }\n]\n</code></pre>\n<p>the <em><strong>demo</strong></em> on the site <a href=\"http://jolt-demo.appspot.com/\" rel=\"nofollow noreferrer\">http://jolt-demo.appspot.com/</a> is</p>\n<p><a href=\"https://i.stack.imgur.com/C8p5h.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C8p5h.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":9939406,"reputation":33,"user_id":7356532,"display_name":"Akshay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1676706580,"creation_date":1675688768,"question_id":75361703,"body_markdown":"I am trying to transform the below JSON:\r\n\r\n**Input:**\r\n\r\n```json\r\n{\r\n  &quot;steps&quot;: [\r\n    {\r\n      &quot;end&quot;: &quot;2023-01-27T09:19:29.849298Z&quot;,\r\n      &quot;id&quot;: &quot;1&quot;,\r\n      &quot;start&quot;: &quot;2023-01-27T09:18:24.59325Z&quot;,\r\n      &quot;name&quot;: &quot;foo&quot;\r\n    },\r\n    {\r\n      &quot;end&quot;: &quot;2023-01-28T09:19:29.849298Z&quot;,\r\n      &quot;id&quot;: &quot;2&quot;,\r\n      &quot;start&quot;: &quot;2023-01-28T09:18:24.59325Z&quot;,\r\n      &quot;name&quot;: &quot;bar&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n**Output:**\r\n\r\n```json\r\n{\r\n  &quot;steps&quot;: [\r\n    {\r\n      &quot;end&quot;: &quot;2023-01-27T09:19:29.849298Z&quot;,\r\n      &quot;id&quot;: &quot;1&quot;,\r\n      &quot;name&quot;: &quot;foo&quot;,\r\n      &quot;start&quot;: &quot;2023-01-27T09:18:24.59325Z&quot;\r\n    },\r\n    {\r\n      &quot;end&quot;: &quot;2023-01-28T09:19:29.849298Z&quot;,\r\n      &quot;id&quot;: &quot;2&quot;,\r\n      &quot;name&quot;: &quot;bar&quot;,\r\n      &quot;start&quot;: &quot;2023-01-28T09:18:24.59325Z&quot;\r\n    }\r\n  ],\r\n  &quot;date&quot;: [\r\n    {\r\n      &quot;name&quot;: &quot;startDate&quot;,\r\n      &quot;value&quot;: &quot;2023-01-27T09:18:24.59325Z&quot; //steps[0].start\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;endDate&quot;,\r\n      &quot;value&quot;: &quot;2023-01-27T09:19:29.849298Z&quot; //steps[0].end\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n\r\nI **tried** using the below spec: \r\n\r\n```json \r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;steps&quot;: {\r\n        &quot;*&quot;: &quot;steps[]&quot;,\r\n        &quot;0&quot;: {\r\n          &quot;#startDate&quot;: &quot;date[0].name&quot;,\r\n          &quot;start&quot;: &quot;date[0].value&quot;,\r\n          &quot;end&quot;: &quot;date[1].value&quot;,\r\n          &quot;#endDate&quot;: &quot;date[1].name&quot;\r\n        }\r\n      }\r\n    }\r\n  }\r\n]\r\n```\r\n\r\nBut **`&quot;*&quot;: &quot;steps[]&quot;`** only transforms the last element of the array steps. Please guide me as to what is wrong with the above spec, as I am new to jolt. Also, any pointers to the correct operations needed to achieve the above output will be greatly appreciated.","title":"Jolt transform array into multiple Objects","body":"<p>I am trying to transform the below JSON:</p>\n<p><strong>Input:</strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;steps&quot;: [\n    {\n      &quot;end&quot;: &quot;2023-01-27T09:19:29.849298Z&quot;,\n      &quot;id&quot;: &quot;1&quot;,\n      &quot;start&quot;: &quot;2023-01-27T09:18:24.59325Z&quot;,\n      &quot;name&quot;: &quot;foo&quot;\n    },\n    {\n      &quot;end&quot;: &quot;2023-01-28T09:19:29.849298Z&quot;,\n      &quot;id&quot;: &quot;2&quot;,\n      &quot;start&quot;: &quot;2023-01-28T09:18:24.59325Z&quot;,\n      &quot;name&quot;: &quot;bar&quot;\n    }\n  ]\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;steps&quot;: [\n    {\n      &quot;end&quot;: &quot;2023-01-27T09:19:29.849298Z&quot;,\n      &quot;id&quot;: &quot;1&quot;,\n      &quot;name&quot;: &quot;foo&quot;,\n      &quot;start&quot;: &quot;2023-01-27T09:18:24.59325Z&quot;\n    },\n    {\n      &quot;end&quot;: &quot;2023-01-28T09:19:29.849298Z&quot;,\n      &quot;id&quot;: &quot;2&quot;,\n      &quot;name&quot;: &quot;bar&quot;,\n      &quot;start&quot;: &quot;2023-01-28T09:18:24.59325Z&quot;\n    }\n  ],\n  &quot;date&quot;: [\n    {\n      &quot;name&quot;: &quot;startDate&quot;,\n      &quot;value&quot;: &quot;2023-01-27T09:18:24.59325Z&quot; //steps[0].start\n    },\n    {\n      &quot;name&quot;: &quot;endDate&quot;,\n      &quot;value&quot;: &quot;2023-01-27T09:19:29.849298Z&quot; //steps[0].end\n    }\n  ]\n}\n</code></pre>\n<p>I <strong>tried</strong> using the below spec:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;steps&quot;: {\n        &quot;*&quot;: &quot;steps[]&quot;,\n        &quot;0&quot;: {\n          &quot;#startDate&quot;: &quot;date[0].name&quot;,\n          &quot;start&quot;: &quot;date[0].value&quot;,\n          &quot;end&quot;: &quot;date[1].value&quot;,\n          &quot;#endDate&quot;: &quot;date[1].name&quot;\n        }\n      }\n    }\n  }\n]\n</code></pre>\n<p>But <strong><code>&quot;*&quot;: &quot;steps[]&quot;</code></strong> only transforms the last element of the array steps. Please guide me as to what is wrong with the above spec, as I am new to jolt. Also, any pointers to the correct operations needed to achieve the above output will be greatly appreciated.</p>\n"},{"tags":["java","android","android-livedata","lint"],"comments":[{"owner":{"account_id":11439016,"reputation":1,"user_id":21238498,"display_name":"Guy Ferguson"},"score":0,"creation_date":1682725215,"post_id":75491923,"comment_id":134266093,"body_markdown":"My first SO question - was it too hard - or too dull - or too long?","body":"My first SO question - was it too hard - or too dull - or too long?"}],"owner":{"account_id":11439016,"reputation":1,"user_id":21238498,"display_name":"Guy Ferguson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676706471,"creation_date":1676706471,"question_id":75491923,"body_markdown":"I have built an Android Java MVVM app, based on some google codelabs no longer published. \r\nBut to demonstrate my issue, I found that Google currently has &#39;Room With a View&#39; app [https://github.com/googlecodelabs/android-room-with-a-view](https://www.stackoverflow.com/), so I cloned it and it exhibits the issue I am experiencing.\r\n\r\nIn the Activity or Fragment, google suggest to Observe Livedata with a construct like:\r\n    \r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n...\r\n  protected void onCreate(Bundle savedInstanceState) {\r\n...\r\n    mWordViewModel.getAllWords().observe(this, words -&gt; {\r\n            // Update the cached copy of the words in the adapter.\r\n            adapter.submitList(words);\r\n        });\r\n    }\r\n}\r\n```\r\nWhich is communicating with a ViewModel :\r\n\r\n```\r\npublic class WordViewModel extends AndroidViewModel {\r\n  ....\r\n    LiveData&lt;List&lt;Word&gt;&gt; getAllWords() {\r\n        return mAllWords;\r\n    }\r\n}\r\n```\r\n\r\nAnd all works nicely.\r\nHowever, if I annotate the Activity with @UiThread, and the ViewModel with @WorkerThread, **most** of my observe methods, asuch as the one above in MainAvtivity, I am told (by lint):\r\n\r\n&gt; Method getAllWords must be called from the worker thread, currently inferred thread is main thread \r\n&gt; Inspection info:Ensures that a method which expects to be called on a specific thread, is actually called from that thread. For example, calls on methods in widgets should always be made on the UI thread.\r\n\r\nI see three options:\r\n- My Observes and VM are badly constructed and need re-work\r\n- I can ignore Lint&#39;s warning in this case\r\n- I have erred in useing @UiThread on MainActivity and @WorkerThread on ViewModel?\r\n\r\nHappy to hear which it is. First SO question, so apologies if I have fumbled in my submission.\r\n\r\nI tried an Observe on Livedata as listed above, and I annotated MainActivity @UiThread and ViewModel @WorkerThread. I expected to not see a lint warning on the Observes.","title":"Should I be worried about lint Warnings &quot;Method X must be called from the worker thread..&quot; on LiveData?","body":"<p>I have built an Android Java MVVM app, based on some google codelabs no longer published.\nBut to demonstrate my issue, I found that Google currently has 'Room With a View' app <a href=\"https://www.stackoverflow.com/\">https://github.com/googlecodelabs/android-room-with-a-view</a>, so I cloned it and it exhibits the issue I am experiencing.</p>\n<p>In the Activity or Fragment, google suggest to Observe Livedata with a construct like:</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n...\n  protected void onCreate(Bundle savedInstanceState) {\n...\n    mWordViewModel.getAllWords().observe(this, words -&gt; {\n            // Update the cached copy of the words in the adapter.\n            adapter.submitList(words);\n        });\n    }\n}\n</code></pre>\n<p>Which is communicating with a ViewModel :</p>\n<pre><code>public class WordViewModel extends AndroidViewModel {\n  ....\n    LiveData&lt;List&lt;Word&gt;&gt; getAllWords() {\n        return mAllWords;\n    }\n}\n</code></pre>\n<p>And all works nicely.\nHowever, if I annotate the Activity with @UiThread, and the ViewModel with @WorkerThread, <strong>most</strong> of my observe methods, asuch as the one above in MainAvtivity, I am told (by lint):</p>\n<blockquote>\n<p>Method getAllWords must be called from the worker thread, currently inferred thread is main thread\nInspection info:Ensures that a method which expects to be called on a specific thread, is actually called from that thread. For example, calls on methods in widgets should always be made on the UI thread.</p>\n</blockquote>\n<p>I see three options:</p>\n<ul>\n<li>My Observes and VM are badly constructed and need re-work</li>\n<li>I can ignore Lint's warning in this case</li>\n<li>I have erred in useing @UiThread on MainActivity and @WorkerThread on ViewModel?</li>\n</ul>\n<p>Happy to hear which it is. First SO question, so apologies if I have fumbled in my submission.</p>\n<p>I tried an Observe on Livedata as listed above, and I annotated MainActivity @UiThread and ViewModel @WorkerThread. I expected to not see a lint warning on the Observes.</p>\n"},{"tags":["java","spring","spring-boot","rabbitmq","spring-amqp"],"answers":[{"comments":[{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":1,"creation_date":1605541139,"post_id":64857322,"comment_id":114674590,"body_markdown":"The connection will only be established when you first need it; either when you send a message or by configuring a listener container (e.g. `@RabbitListener`) which will automatically start, by default.","body":"The connection will only be established when you first need it; either when you send a message or by configuring a listener container (e.g. <code>@RabbitListener</code>) which will automatically start, by default."},{"owner":{"account_id":13866737,"reputation":654,"user_id":10540846,"display_name":"Thanos M"},"score":0,"creation_date":1605542074,"post_id":64857322,"comment_id":114675026,"body_markdown":"by adding the above dependency the connection is established on the startup which is what I need. I don&#39;t need to configure a listener container since I won&#39;t have any consumers on my application. I want the queues to be created on the application startup because on my consumer application I don&#39;t want a scenario where my consumer will try to consume from a queue that not exists.","body":"by adding the above dependency the connection is established on the startup which is what I need. I don&#39;t need to configure a listener container since I won&#39;t have any consumers on my application. I want the queues to be created on the application startup because on my consumer application I don&#39;t want a scenario where my consumer will try to consume from a queue that not exists."},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1605542586,"post_id":64857322,"comment_id":114675268,"body_markdown":"If you don&#39;t need the actuator, another solution would be to add an `ApplicationRunner` bean. `@Bean ApplicationRunner runner(ConnectionFactory cf) { cf.createConnection(); };`","body":"If you don&#39;t need the actuator, another solution would be to add an <code>ApplicationRunner</code> bean. <code>@Bean ApplicationRunner runner(ConnectionFactory cf) { cf.createConnection(); };</code>"},{"owner":{"account_id":13866737,"reputation":654,"user_id":10540846,"display_name":"Thanos M"},"score":0,"creation_date":1605604637,"post_id":64857322,"comment_id":114694570,"body_markdown":"Works too, you can post it as an answer so people can find it easier. I think your solution is more robust cause adding the actuator dependency just for that is not good I guess.","body":"Works too, you can post it as an answer so people can find it easier. I think your solution is more robust cause adding the actuator dependency just for that is not good I guess."}],"tags":[],"owner":{"account_id":13866737,"reputation":654,"user_id":10540846,"display_name":"Thanos M"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1605526840,"creation_date":1605526840,"answer_id":64857322,"question_id":64857283,"body_markdown":"After some digging, I have found out that I was missing the actuator dependency.\r\nSo adding this dependency solved my issue\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIt is weird that the connection is not opened on application startup unless the actuator dependency is present.","title":"Spring AMQP - RabbitMQ connection is not created on application startup","body":"<p>After some digging, I have found out that I was missing the actuator dependency.\nSo adding this dependency solved my issue</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>It is weird that the connection is not opened on application startup unless the actuator dependency is present.</p>\n"},{"tags":[],"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1605624019,"creation_date":1605624019,"answer_id":64877380,"question_id":64857283,"body_markdown":"If you want to force declaration during app startup and don&#39;t have any consumers, you can either add the actuator starter to the classpath, or simply create the shared connection yourself.\r\n\r\n```java\r\n@Bean\r\nApplicationRunner runner(ConnectionFactory cf) {\r\n    return args -&gt; cf.createConnection().close();\r\n}\r\n```\r\n\r\nThis won&#39;t close the connection; if you want to do that, call `cf.resetConnection()`.\r\n\r\nIf you want the app to start if the broker is down, do something like this.\r\n\r\n```java\r\n@Bean\r\nApplicationRunner runner(ConnectionFactory cf) {\r\n    return args -&gt; {\r\n        boolean open = false;\r\n        while(!open) {\r\n            try {\r\n                cf.createConnection().close();\r\n                open = true;\r\n            }\r\n            catch (Exception e) {\r\n                Thread.sleep(5000);\r\n            }\r\n        }\r\n    };\r\n}\r\n```\r\n","title":"Spring AMQP - RabbitMQ connection is not created on application startup","body":"<p>If you want to force declaration during app startup and don't have any consumers, you can either add the actuator starter to the classpath, or simply create the shared connection yourself.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\nApplicationRunner runner(ConnectionFactory cf) {\n    return args -&gt; cf.createConnection().close();\n}\n</code></pre>\n<p>This won't close the connection; if you want to do that, call <code>cf.resetConnection()</code>.</p>\n<p>If you want the app to start if the broker is down, do something like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\nApplicationRunner runner(ConnectionFactory cf) {\n    return args -&gt; {\n        boolean open = false;\n        while(!open) {\n            try {\n                cf.createConnection().close();\n                open = true;\n            }\n            catch (Exception e) {\n                Thread.sleep(5000);\n            }\n        }\n    };\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9124665,"reputation":29,"user_id":6788917,"display_name":"walkwolf"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650512404,"creation_date":1650512404,"answer_id":71948661,"question_id":64857283,"body_markdown":"You can use\r\n```\r\n@Component\r\npublic class QueueConfig {\r\n\r\n    private AmqpAdmin amqpAdmin;\r\n\r\n    public QueueConfig(AmqpAdmin amqpAdmin) {\r\n        this.amqpAdmin = amqpAdmin;\r\n    }\r\n\r\n    @PostConstruct\r\n    public void createQueues() {\r\n        amqpAdmin.declareQueue(new Queue(&quot;q1&quot;, true));\r\n        amqpAdmin.declareQueue(new Queue(&quot;q2&quot;, true));\r\n    }\r\n}\r\n```","title":"Spring AMQP - RabbitMQ connection is not created on application startup","body":"<p>You can use</p>\n<pre><code>@Component\npublic class QueueConfig {\n\n    private AmqpAdmin amqpAdmin;\n\n    public QueueConfig(AmqpAdmin amqpAdmin) {\n        this.amqpAdmin = amqpAdmin;\n    }\n\n    @PostConstruct\n    public void createQueues() {\n        amqpAdmin.declareQueue(new Queue(&quot;q1&quot;, true));\n        amqpAdmin.declareQueue(new Queue(&quot;q2&quot;, true));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":13866737,"reputation":654,"user_id":10540846,"display_name":"Thanos M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6028,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":64877380,"answer_count":3,"score":2,"last_activity_date":1676705261,"creation_date":1605526692,"question_id":64857283,"body_markdown":"I have a Spring Boot application and my goal is to declare queues, exchanges, and bindings on application startup. The application will produce messages to various queues there will be no consumers on the application.\r\n\r\nI have included those dependencies on my `pom.xml`\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.5.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-rabbit&lt;/artifactId&gt;\r\n        &lt;version&gt;2.2.12.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nmy configuration class\r\n\r\n    @Configuration\r\n    public class RabbitConfiguration {\r\n    \r\n        @Bean\r\n        public ConnectionFactory connectionFactory() {\r\n            CachingConnectionFactory connectionFactory = new CachingConnectionFactory(&quot;myhost&quot;, 5672);\r\n            connectionFactory.setUsername(&quot;example_name&quot;);\r\n            connectionFactory.setPassword(&quot;example_pass&quot;);\r\n            return connectionFactory;\r\n        }\r\n    \r\n        @Bean\r\n        public AmqpAdmin rabbitAdmin(ConnectionFactory connectionFactory) {\r\n            return new RabbitAdmin(connectionFactory);\r\n        }\r\n    \r\n        @Bean\r\n        public Queue declareQueue() {\r\n            return new Queue(&quot;test_queue&quot;, true, false, false);\r\n        }\r\n    \r\n        @Bean\r\n        public DirectExchange declareDirectExchange() {\r\n            return new DirectExchange(&quot;test_direct_exchange&quot;, true, false);\r\n        }\r\n    \r\n        @Bean\r\n        public Declarables declareBindings() {\r\n            return new Declarables(\r\n                new Binding(&quot;test_queue&quot;, DestinationType.QUEUE, &quot;test_direct_exchange&quot;, &quot;test_routing_key&quot;, null)\r\n            );\r\n        }\r\n    }\r\n\r\nMy problem is that queues, exchanges, and bindings are not created on the application startup. Spring boot does not even open the connection. The connection, queues, etc are created only when I produce messages to the queues.\r\n","title":"Spring AMQP - RabbitMQ connection is not created on application startup","body":"<p>I have a Spring Boot application and my goal is to declare queues, exchanges, and bindings on application startup. The application will produce messages to various queues there will be no consumers on the application.</p>\n<p>I have included those dependencies on my <code>pom.xml</code></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;version&gt;2.3.5.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-rabbit&lt;/artifactId&gt;\n    &lt;version&gt;2.2.12.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>my configuration class</p>\n<pre><code>@Configuration\npublic class RabbitConfiguration {\n\n    @Bean\n    public ConnectionFactory connectionFactory() {\n        CachingConnectionFactory connectionFactory = new CachingConnectionFactory(&quot;myhost&quot;, 5672);\n        connectionFactory.setUsername(&quot;example_name&quot;);\n        connectionFactory.setPassword(&quot;example_pass&quot;);\n        return connectionFactory;\n    }\n\n    @Bean\n    public AmqpAdmin rabbitAdmin(ConnectionFactory connectionFactory) {\n        return new RabbitAdmin(connectionFactory);\n    }\n\n    @Bean\n    public Queue declareQueue() {\n        return new Queue(&quot;test_queue&quot;, true, false, false);\n    }\n\n    @Bean\n    public DirectExchange declareDirectExchange() {\n        return new DirectExchange(&quot;test_direct_exchange&quot;, true, false);\n    }\n\n    @Bean\n    public Declarables declareBindings() {\n        return new Declarables(\n            new Binding(&quot;test_queue&quot;, DestinationType.QUEUE, &quot;test_direct_exchange&quot;, &quot;test_routing_key&quot;, null)\n        );\n    }\n}\n</code></pre>\n<p>My problem is that queues, exchanges, and bindings are not created on the application startup. Spring boot does not even open the connection. The connection, queues, etc are created only when I produce messages to the queues.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3187884,"reputation":3146,"user_id":2693006,"accept_rate":43,"display_name":"Ceiling Gecko"},"score":9,"creation_date":1437726219,"post_id":31605536,"comment_id":51161559,"body_markdown":"We have a different site for this [Code Review SE](http://codereview.stackexchange.com)","body":"We have a different site for this <a href=\"http://codereview.stackexchange.com\">Code Review SE</a>"},{"owner":{"account_id":6525428,"reputation":1,"user_id":5048334,"display_name":"Alex Wormbs"},"score":0,"creation_date":1437726337,"post_id":31605536,"comment_id":51161641,"body_markdown":"Oh, should I just re-post or could anyone move this over to the appropriate forum?","body":"Oh, should I just re-post or could anyone move this over to the appropriate forum?"},{"owner":{"account_id":6102174,"reputation":1735,"user_id":4760884,"accept_rate":80,"display_name":"Horatio"},"score":0,"creation_date":1437726459,"post_id":31605536,"comment_id":51161706,"body_markdown":"switch statements https://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html","body":"switch statements <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.htm&zwnj;&#8203;l</a>"},{"owner":{"account_id":5955901,"reputation":10524,"user_id":4682610,"accept_rate":29,"display_name":"Florian Schaetz"},"score":0,"creation_date":1437726482,"post_id":31605536,"comment_id":51161718,"body_markdown":"Personally, I would probably refactor most of the ifs als enum constants, one for each possible config value. Enum constants are real objects, they can have methods, members, etc. so they can do stuff, for example set variables in another object. But of course reading should be separated from that, parsing, too, etc.","body":"Personally, I would probably refactor most of the ifs als enum constants, one for each possible config value. Enum constants are real objects, they can have methods, members, etc. so they can do stuff, for example set variables in another object. But of course reading should be separated from that, parsing, too, etc."},{"owner":{"account_id":1521272,"reputation":1659,"user_id":1420839,"accept_rate":80,"display_name":"Dragondraikk"},"score":0,"creation_date":1437727556,"post_id":31605536,"comment_id":51162377,"body_markdown":"@Horatio String switch checks for `equals`, not `contains`","body":"@Horatio String switch checks for <code>equals</code>, not <code>contains</code>"}],"answers":[{"comments":[{"owner":{"account_id":6525428,"reputation":1,"user_id":5048334,"display_name":"Alex Wormbs"},"score":0,"creation_date":1437728118,"post_id":31605793,"comment_id":51162692,"body_markdown":"Thanks for your answer. I haven&#39;t implemented strategy before so I&#39;m still not exactly comfortable with it. What do you mean by &quot;pluggable&quot;, and &quot;some class where you can dynamically register and remove these matcher objects&quot;?\nDo I need to create a specific class for each line in the config file (i.e each case)?","body":"Thanks for your answer. I haven&#39;t implemented strategy before so I&#39;m still not exactly comfortable with it. What do you mean by &quot;pluggable&quot;, and &quot;some class where you can dynamically register and remove these matcher objects&quot;? Do I need to create a specific class for each line in the config file (i.e each case)?"},{"owner":{"display_name":"user4948585"},"score":0,"creation_date":1437734000,"post_id":31605793,"comment_id":51166341,"body_markdown":"Pluggable means create the matchers programmatically, that you can add at run time without need to restart. No i am not saying to create specific class for each line, instead encapsulate the sequence of operations and create single method like doOperation above instead of doAdd, doSubstract or doMultiply...","body":"Pluggable means create the matchers programmatically, that you can add at run time without need to restart. No i am not saying to create specific class for each line, instead encapsulate the sequence of operations and create single method like doOperation above instead of doAdd, doSubstract or doMultiply..."}],"tags":[],"owner":{"display_name":"user4948585"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1437726889,"creation_date":1437726889,"answer_id":31605793,"question_id":31605536,"body_markdown":"As i see most of your code is doing repetitive work ( check if like has some text and perform some action on it.) \r\nI suggest you create pluggable matchAndPerform methods. i.e. encapsulate string matching and related method calls into a class (strategy pattern) and have some class where you can dynamically register and remove these matcher objects. \r\n\r\nexample of strategy pattern:\r\n\r\n    public class Context {\r\n       private Strategy strategy;\r\n       public Context(Strategy strategy){\r\n          this.strategy = strategy;\r\n       }\r\n       public int executeStrategy(int num1, int num2){\r\n          return strategy.doOperation(num1, num2);\r\n       }\r\n    }\r\n    public class OperationMultiply implements Strategy{\r\n       @Override\r\n       public int doOperation(int num1, int num2) {\r\n          return num1 * num2;\r\n       }\r\n    }","title":"How to refactor this messy code","body":"<p>As i see most of your code is doing repetitive work ( check if like has some text and perform some action on it.) \nI suggest you create pluggable matchAndPerform methods. i.e. encapsulate string matching and related method calls into a class (strategy pattern) and have some class where you can dynamically register and remove these matcher objects. </p>\n\n<p>example of strategy pattern:</p>\n\n<pre><code>public class Context {\n   private Strategy strategy;\n   public Context(Strategy strategy){\n      this.strategy = strategy;\n   }\n   public int executeStrategy(int num1, int num2){\n      return strategy.doOperation(num1, num2);\n   }\n}\npublic class OperationMultiply implements Strategy{\n   @Override\n   public int doOperation(int num1, int num2) {\n      return num1 * num2;\n   }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1676988450,"post_id":75491789,"comment_id":133244884,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/75491789/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":27817308,"reputation":1,"user_id":21238431,"display_name":"Refractor boss"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1676704676,"creation_date":1676704676,"answer_id":75491789,"question_id":31605536,"body_markdown":"    well, I hope this helps\r\n    \r\n        try (BufferedReader reader = new BufferedReader(new FileReader(pathToConfig))) {\r\n        String line;\r\n        while ((line = reader.readLine()) != null) {\r\n            if (line.contains(&quot;//&quot;) || line.isEmpty()) {\r\n                continue;\r\n            }\r\n            String[] parts = line.split(&quot;=&quot;, 2);\r\n            String key = parts[0].trim();\r\n            String value = parts[1].trim();\r\n            switch (key) {\r\n                case &quot;inputFolderPath&quot;:\r\n                    pathToFolder = value;\r\n                    break;\r\n                case &quot;defaultOutputPath&quot;:\r\n                    defaultOutputPath = value;\r\n                    break;\r\n                case &quot;checkStyleAttribute&quot;:\r\n                    if (!value.contains(&quot;Path&quot;)) {\r\n                        checkStyle = Boolean.parseBoolean(value);\r\n                        errorListStyleAttribute = new ArrayList&lt;&gt;();\r\n                    }\r\n                    break;\r\n                case &quot;checkXrefAndNormalLinks&quot;:\r\n                    if (!value.contains(&quot;Path&quot;)) {\r\n                        checkXref = Boolean.parseBoolean(value);\r\n                        errorListXref = new ArrayList&lt;&gt;();\r\n                    }\r\n                    break;\r\n                case &quot;checkThatAllTopicsHaveConceptKeywords&quot;:\r\n                    if (!value.contains(&quot;Path&quot;)) {\r\n                        checkThatAllTopicsHaveConceptKeywords = Boolean.parseBoolean(value);\r\n                        errorListConceptKeywords = new ArrayList&lt;&gt;();\r\n                    }\r\n                    break;\r\n                case &quot;checkThatAllTopicsHaveIndexKeywords&quot;:\r\n                    if (!value.contains(&quot;Path&quot;)) {\r\n                        checkThatAllTopicsHaveIndexKeywords = Boolean.parseBoolean(value);\r\n                        errorListIndexKeywords = new ArrayList&lt;&gt;();\r\n                    }\r\n                    break;\r\n                case &quot;checkForNoUIElementsInHeadings&quot;:\r\n                    if (!value.contains(&quot;Path&quot;)) {\r\n                        checkForNoUIElementsInHeadings = Boolean.parseBoolean(value);\r\n                        errorListUiElements = new ArrayList&lt;&gt;();\r\n                    }\r\n                    break;\r\n                case &quot;whatElementToCheckForStyle&quot;:\r\n                    tag = value;\r\n                    if (tag.charAt(0) == &#39;[&#39;) {\r\n                        tag = tag.substring(1, tag.length() - 1);\r\n                        String[] tags = tag.split(&quot;,&quot;);\r\n                        for (String t : tags) {\r\n                            tagsToCheck.add(t.trim());\r\n                        }\r\n                    } else if (tag.equals(&quot;all&quot;)) {\r\n                        checkEveryTag = true;\r\n                    } else {\r\n                        tagsToCheck.add(tag);\r\n                    }\r\n                    break;\r\n                case &quot;checkForProductNamesWithoutDNTTag&quot;:\r\n                    if (!value.contains(&quot;Path&quot;)) {\r\n                        checkForProductNamesWithoutDNTTag = Boolean.parseBoolean(value);\r\n                        errorProductNamesWithoutDNTTag = new ArrayList&lt;&gt;();\r\n                    }\r\n                    break;\r\n                default:\r\n                    // ignore unrecognized keys\r\n                    break;\r\n            }\r\n        }\r\n    } catch (IOException e) {\r\n        // handle exception\r\n    }\r\n\r\n","title":"How to refactor this messy code","body":"<pre><code>well, I hope this helps\n\n    try (BufferedReader reader = new BufferedReader(new FileReader(pathToConfig))) {\n    String line;\n    while ((line = reader.readLine()) != null) {\n        if (line.contains(&quot;//&quot;) || line.isEmpty()) {\n            continue;\n        }\n        String[] parts = line.split(&quot;=&quot;, 2);\n        String key = parts[0].trim();\n        String value = parts[1].trim();\n        switch (key) {\n            case &quot;inputFolderPath&quot;:\n                pathToFolder = value;\n                break;\n            case &quot;defaultOutputPath&quot;:\n                defaultOutputPath = value;\n                break;\n            case &quot;checkStyleAttribute&quot;:\n                if (!value.contains(&quot;Path&quot;)) {\n                    checkStyle = Boolean.parseBoolean(value);\n                    errorListStyleAttribute = new ArrayList&lt;&gt;();\n                }\n                break;\n            case &quot;checkXrefAndNormalLinks&quot;:\n                if (!value.contains(&quot;Path&quot;)) {\n                    checkXref = Boolean.parseBoolean(value);\n                    errorListXref = new ArrayList&lt;&gt;();\n                }\n                break;\n            case &quot;checkThatAllTopicsHaveConceptKeywords&quot;:\n                if (!value.contains(&quot;Path&quot;)) {\n                    checkThatAllTopicsHaveConceptKeywords = Boolean.parseBoolean(value);\n                    errorListConceptKeywords = new ArrayList&lt;&gt;();\n                }\n                break;\n            case &quot;checkThatAllTopicsHaveIndexKeywords&quot;:\n                if (!value.contains(&quot;Path&quot;)) {\n                    checkThatAllTopicsHaveIndexKeywords = Boolean.parseBoolean(value);\n                    errorListIndexKeywords = new ArrayList&lt;&gt;();\n                }\n                break;\n            case &quot;checkForNoUIElementsInHeadings&quot;:\n                if (!value.contains(&quot;Path&quot;)) {\n                    checkForNoUIElementsInHeadings = Boolean.parseBoolean(value);\n                    errorListUiElements = new ArrayList&lt;&gt;();\n                }\n                break;\n            case &quot;whatElementToCheckForStyle&quot;:\n                tag = value;\n                if (tag.charAt(0) == '[') {\n                    tag = tag.substring(1, tag.length() - 1);\n                    String[] tags = tag.split(&quot;,&quot;);\n                    for (String t : tags) {\n                        tagsToCheck.add(t.trim());\n                    }\n                } else if (tag.equals(&quot;all&quot;)) {\n                    checkEveryTag = true;\n                } else {\n                    tagsToCheck.add(tag);\n                }\n                break;\n            case &quot;checkForProductNamesWithoutDNTTag&quot;:\n                if (!value.contains(&quot;Path&quot;)) {\n                    checkForProductNamesWithoutDNTTag = Boolean.parseBoolean(value);\n                    errorProductNamesWithoutDNTTag = new ArrayList&lt;&gt;();\n                }\n                break;\n            default:\n                // ignore unrecognized keys\n                break;\n        }\n    }\n} catch (IOException e) {\n    // handle exception\n}\n</code></pre>\n"}],"owner":{"account_id":6525428,"reputation":1,"user_id":5048334,"display_name":"Alex Wormbs"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":552,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":31605793,"answer_count":2,"score":-2,"last_activity_date":1676704676,"creation_date":1437726022,"question_id":31605536,"body_markdown":"I have this code that I need to re-write and make a little prettier. It reads lines from a config.txt file and sets variables based on the contents of the file. As you can see, the code is ugly in many ways. There is a lot of duplicated code and the way the program checks the contents of the file is not very elegant (it should probably iterate over the lines instead of checking if the file contains a specific text). Overall, I think it would be nice to avoid having a huge wall of if/else blocks, which actually continues further down but I felt no need to include all of it.\r\n\r\nAll the program code is written in one main method and I would like to create some classes. I was thinking of a Config class that should handle reading from a config file, and it would have a list of lines (Line objects maybe?) and handle them in order. I&#39;ve been reading about things like [Strategy pattern](https://en.wikipedia.org/wiki/Strategy_pattern) and [Command pattern](https://en.wikipedia.org/wiki/Command_pattern) recently and would like to apply something like that to this case, but I&#39;m unsure any of that is appropriate here. If anyone experienced has any input on this I would greatly appreciate it!\r\n\r\n        ...\r\n\t\ttry {\r\n\t\t\treader = new BufferedReader(new FileReader(pathToConfig));\r\n\t\t\tline = reader.readLine();\r\n\t\t\twhile(line!=null){\r\n\t\t\t\tif(line.contains(&quot;//&quot;)|| line.equals(&quot;&quot;));\r\n\t\t\t\telse{\r\n\t\t\t\t\tif(line.contains(&quot;inputFolderPath&quot;))\t{\r\n\t\t\t\t\t\tpathToFolder=line.split(&quot;=&quot;)[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(line.contains(&quot;defaultOutputPath&quot;)){\r\n\t\t\t\t\t\tdefaultOutputPath=line.split(&quot;=&quot;)[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(line.contains(&quot;checkStyleAttribute&quot;)&amp;&amp;!line.contains(&quot;Path&quot;)){\r\n\t\t\t\t\t\tlineAfterSplit=line.split(&quot;=&quot;)[1];\r\n\t\t\t\t\t\tcheckStyle=Boolean.parseBoolean(lineAfterSplit);\r\n\t\t\t\t\t\terrorListStyleAttribute=new ArrayList&lt;String&gt;();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(line.contains(&quot;checkXrefAndNormalLinks&quot;)&amp;&amp;!line.contains(&quot;Path&quot;)){\r\n\t\t\t\t\t\tlineAfterSplit=line.split(&quot;=&quot;)[1];\r\n\t\t\t\t\t\tcheckXref=Boolean.parseBoolean(lineAfterSplit);\r\n\t\t\t\t\t\terrorListXref = new ArrayList&lt;String&gt;();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(line.contains(&quot;checkThatAllTopicsHaveConceptKeywords&quot;)&amp;&amp;!line.contains(&quot;Path&quot;)){\r\n\t\t\t\t\t\tlineAfterSplit=line.split(&quot;=&quot;)[1];\r\n\t\t\t\t\t\tcheckThatAllTopicsHaveConceptKeywords=Boolean.parseBoolean(lineAfterSplit);\r\n\t\t\t\t\t\terrorListConceptKeywords=new ArrayList&lt;String&gt;();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(line.contains(&quot;checkThatAllTopicsHaveIndexKeywords&quot;)&amp;&amp;!line.contains(&quot;Path&quot;)){\r\n\t\t\t\t\t\tlineAfterSplit=line.split(&quot;=&quot;)[1];\r\n\t\t\t\t\t\tcheckThatAllTopicsHaveIndexKeywords=Boolean.parseBoolean(lineAfterSplit);\r\n\t\t\t\t\t\terrorListIndexKeywords=new ArrayList&lt;String&gt;();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(line.contains(&quot;checkForNoUIElementsInHeadings&quot;)&amp;&amp;!line.contains(&quot;Path&quot;)){\r\n\r\n\t\t\t\t\t\tlineAfterSplit=line.split(&quot;=&quot;)[1];\r\n\t\t\t\t\t\tcheckForNoUIElementsInHeadings=Boolean.parseBoolean(lineAfterSplit);\r\n\t\t\t\t\t\terrorListUiElements=new ArrayList&lt;String&gt;();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(line.contains(&quot;whatElementToCheckForStyle&quot;)){\r\n\t\t\t\t\t\ttag=line.split(&quot;=&quot;)[1];\r\n\t\t\t\t\t\tif(tag.charAt(0)==&#39;[&#39;){\r\n\t\t\t\t\t\t\ttag=tag.substring(1, tag.length()-1);\r\n\t\t\t\t\t\t\tString[] tags = tag.split(&quot;,&quot;);\r\n\t\t\t\t\t\t\tfor(int i=0;i&lt;tags.length;i++){\r\n\t\t\t\t\t\t\t\ttagsToCheck.add(tags[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\telse if(tag.equals(&quot;all&quot;)){\r\n\t\t\t\t\t\t\tcheckEveryTag=true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\ttagsToCheck.add(tag);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(line.contains(&quot;checkForProductNamesWithoutDNTTag&quot;)&amp;&amp;!line.contains(&quot;Path&quot;)){\r\n\t\t\t\t\t\tlineAfterSplit=line.split(&quot;=&quot;)[1];\r\n\t\t\t\t\t\tcheckForProductNamesWithoutDNTTag=Boolean.parseBoolean(lineAfterSplit);\r\n\t\t\t\t\t\terrorProductNamesWithoutDNTTag=new ArrayList&lt;String&gt;();\r\n\t\t\t\t\t}\r\n         ... and it just goes on","title":"How to refactor this messy code","body":"<p>I have this code that I need to re-write and make a little prettier. It reads lines from a config.txt file and sets variables based on the contents of the file. As you can see, the code is ugly in many ways. There is a lot of duplicated code and the way the program checks the contents of the file is not very elegant (it should probably iterate over the lines instead of checking if the file contains a specific text). Overall, I think it would be nice to avoid having a huge wall of if/else blocks, which actually continues further down but I felt no need to include all of it.</p>\n\n<p>All the program code is written in one main method and I would like to create some classes. I was thinking of a Config class that should handle reading from a config file, and it would have a list of lines (Line objects maybe?) and handle them in order. I've been reading about things like <a href=\"https://en.wikipedia.org/wiki/Strategy_pattern\" rel=\"nofollow\">Strategy pattern</a> and <a href=\"https://en.wikipedia.org/wiki/Command_pattern\" rel=\"nofollow\">Command pattern</a> recently and would like to apply something like that to this case, but I'm unsure any of that is appropriate here. If anyone experienced has any input on this I would greatly appreciate it!</p>\n\n<pre><code>    ...\n    try {\n        reader = new BufferedReader(new FileReader(pathToConfig));\n        line = reader.readLine();\n        while(line!=null){\n            if(line.contains(\"//\")|| line.equals(\"\"));\n            else{\n                if(line.contains(\"inputFolderPath\"))    {\n                    pathToFolder=line.split(\"=\")[1];\n                }\n                else if(line.contains(\"defaultOutputPath\")){\n                    defaultOutputPath=line.split(\"=\")[1];\n                }\n                else if(line.contains(\"checkStyleAttribute\")&amp;&amp;!line.contains(\"Path\")){\n                    lineAfterSplit=line.split(\"=\")[1];\n                    checkStyle=Boolean.parseBoolean(lineAfterSplit);\n                    errorListStyleAttribute=new ArrayList&lt;String&gt;();\n                }\n                else if(line.contains(\"checkXrefAndNormalLinks\")&amp;&amp;!line.contains(\"Path\")){\n                    lineAfterSplit=line.split(\"=\")[1];\n                    checkXref=Boolean.parseBoolean(lineAfterSplit);\n                    errorListXref = new ArrayList&lt;String&gt;();\n                }\n                else if(line.contains(\"checkThatAllTopicsHaveConceptKeywords\")&amp;&amp;!line.contains(\"Path\")){\n                    lineAfterSplit=line.split(\"=\")[1];\n                    checkThatAllTopicsHaveConceptKeywords=Boolean.parseBoolean(lineAfterSplit);\n                    errorListConceptKeywords=new ArrayList&lt;String&gt;();\n                }\n                else if(line.contains(\"checkThatAllTopicsHaveIndexKeywords\")&amp;&amp;!line.contains(\"Path\")){\n                    lineAfterSplit=line.split(\"=\")[1];\n                    checkThatAllTopicsHaveIndexKeywords=Boolean.parseBoolean(lineAfterSplit);\n                    errorListIndexKeywords=new ArrayList&lt;String&gt;();\n                }\n                else if(line.contains(\"checkForNoUIElementsInHeadings\")&amp;&amp;!line.contains(\"Path\")){\n\n                    lineAfterSplit=line.split(\"=\")[1];\n                    checkForNoUIElementsInHeadings=Boolean.parseBoolean(lineAfterSplit);\n                    errorListUiElements=new ArrayList&lt;String&gt;();\n                }\n                else if(line.contains(\"whatElementToCheckForStyle\")){\n                    tag=line.split(\"=\")[1];\n                    if(tag.charAt(0)=='['){\n                        tag=tag.substring(1, tag.length()-1);\n                        String[] tags = tag.split(\",\");\n                        for(int i=0;i&lt;tags.length;i++){\n                            tagsToCheck.add(tags[i]);\n                        }\n                    }\n\n\n                    else if(tag.equals(\"all\")){\n                        checkEveryTag=true;\n                    }\n                    else{\n                        tagsToCheck.add(tag);\n                    }\n                }\n                else if(line.contains(\"checkForProductNamesWithoutDNTTag\")&amp;&amp;!line.contains(\"Path\")){\n                    lineAfterSplit=line.split(\"=\")[1];\n                    checkForProductNamesWithoutDNTTag=Boolean.parseBoolean(lineAfterSplit);\n                    errorProductNamesWithoutDNTTag=new ArrayList&lt;String&gt;();\n                }\n     ... and it just goes on\n</code></pre>\n"},{"tags":["java","spring","jsp","spring-mvc"],"comments":[{"owner":{"account_id":1566138,"reputation":192,"user_id":1454898,"display_name":"Xenson"},"score":0,"creation_date":1571350694,"post_id":42198050,"comment_id":103222379,"body_markdown":"You can run into the same problem if you have the ModelAttribute all setup then are silly enough to call model.clear() without adding the attribute manually. In my case I say the name of my ModelAttribute rather than &#39;command&#39; in the exception message.","body":"You can run into the same problem if you have the ModelAttribute all setup then are silly enough to call model.clear() without adding the attribute manually. In my case I say the name of my ModelAttribute rather than &#39;command&#39; in the exception message."}],"answers":[{"comments":[{"owner":{"account_id":1566138,"reputation":192,"user_id":1454898,"display_name":"Xenson"},"score":0,"creation_date":1571350412,"post_id":42198051,"comment_id":103222335,"body_markdown":"I ran into the error even though I had the MethodAttribute setup up correctly in my FormTag an in the controller for a GET endpoint and a POST endpoint. It was on the POST that I ran into the same error message, but it turned out to be a self induced injury. I had called clear() on the Model which removed the attribute that was expected when the response was redirected to the same form. I removed the call to clear() to fix the problem.","body":"I ran into the error even though I had the MethodAttribute setup up correctly in my FormTag an in the controller for a GET endpoint and a POST endpoint. It was on the POST that I ran into the same error message, but it turned out to be a self induced injury. I had called clear() on the Model which removed the attribute that was expected when the response was redirected to the same form. I removed the call to clear() to fix the problem."},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1590897117,"post_id":42198051,"comment_id":109852512,"body_markdown":"I got this error after refactoring a SpringBoot app, and it turned out to be due to some classes referenced in the view template being accidentally taken out of scope of the implicit `@ComponentScan`.","body":"I got this error after refactoring a SpringBoot app, and it turned out to be due to some classes referenced in the view template being accidentally taken out of scope of the implicit <code>@ComponentScan</code>."}],"tags":[],"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"comment_count":2,"down_vote_count":0,"up_vote_count":48,"is_accepted":true,"score":48,"last_activity_date":1624550007,"creation_date":1486968199,"answer_id":42198051,"question_id":42198050,"body_markdown":"You&#39;re trying to use [Spring MVC&#39;s form tag][1].\r\n\r\n&gt; This tag renders an HTML `form` tag and exposes a binding path to\r\n&gt; inner tags for binding. It puts the command object in the `PageContext`\r\n&gt; so that the command object can be accessed by inner tags.  [..]\r\n&gt; \r\n&gt; Let’s assume we have a domain object called `User`. It is a JavaBean\r\n&gt; with properties such as `firstName` and `lastName`. We will use it as the\r\n&gt; **form backing object** of our form controller which returns `form.jsp`.\r\n\r\nIn other words, Spring MVC will extract a _command object_ and use its type as a blueprint for binding `path` expressions for `form`&#39;s inner tags, like [`input`][2] or [`checkbox`][3], to render an HTML `form` element. \r\n\r\nThis _command object_ is also called a model attribute and its name is specified in the `form` tag&#39;s `modelAttribute` or `commandName` attributes. You&#39;ve omitted it in your JSP\r\n\r\n    &lt;form:form&gt; \r\n\r\nYou could&#39;ve specified a name explicitly. Both of these are equivalent.\r\n\r\n    &lt;form:form modelAttribute=&quot;some-example-name&quot;&gt;\r\n    &lt;form:form commandName=&quot;some-example-name&quot;&gt;\r\n\r\n**NOTE**: Spring 5 has removed the `commandName` attribute, see the upgrade notes, [here][4].\r\n\r\nThe [default attribute name is `command`][5] (what you see in error message). A model attribute is an object, typically a POJO or collection of POJOs, that your application supplies to the Spring MVC stack and which the Spring MVC stack exposes to your view (ie. the M to the V in MVC). \r\n\r\nSpring MVC collects all model attributes in a [`ModelMap`][6] (they all have names) and, in the case of JSPs, transfers them to the [`HttpServletRequest`][7] attributes, where JSP tags and EL expressions have access to them.\r\n\r\nIn your example, your `@Controller` handler method which handles a `GET` to the path `/movies` adds a single model attribute\r\n\r\n    model.addAttribute(&quot;movies&quot;, movies); // not named &#39;command&#39;\r\n\r\nand then forwards to the `index.jsp`. This JSP then tries to render\r\n \r\n    &lt;form:form&gt;\r\n        ...\r\n        &lt;form:input path=&quot;name&quot; type=&quot;text&quot; id=&quot;name&quot; /&gt;\r\n        ...\r\n    &lt;/form:form&gt;\r\n\r\nWhile rendering this, [`FormTag`][8] (in reality, the [`InputTag`][9]) tries to find a model attribute named `command` (the default attribute name) so that it can produce an HTML `&lt;input&gt;` element with a `name` attribute constructed from the `path` expression and the corresponding property value, ie. the result of `Movie#getFilmName()`.\r\n\r\nSince it cannot find it, it throws the exception you see\r\n\r\n    java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;command&#39; available as request attribute\r\n\r\nThe JSP engine catches it and responds with a 500 status code. If you want to take advantage of a `Movie` POJO to simply construct your form correctly, you can add a model attribute explicitly with\r\n\r\n    model.addAttribute(&quot;movie&quot;, new Movie());\r\n\r\nor have Spring MVC create and add one for you (must have an accessible parameterless constructor)\r\n\r\n    @RequestMapping(path = &quot;/movies&quot;, method = RequestMethod.GET)\r\n    public String homePage(@ModelAttribute(&quot;command&quot;) Movie movie, Model model) {...}\r\n   \r\nAlternatively, include a `@ModelAttribute` annotated method in your `@Controller` class\r\n\r\n    @ModelAttribute(&quot;command&quot;)\r\n    public Movie defaultInstance() {\r\n        Movie movie = new Movie();\r\n        movie.setFilmName(&quot;Rocky II&quot;);\r\n        return movie;\r\n    }\r\n\r\nNote that Spring MVC will call this method and implicitly add the object returned to its model attributes for each request handled by the enclosing `@Controller`.\r\n\r\nYou may have guessed from this description that Spring&#39;s `form` tag is more suited for rendering an HTML `&lt;form&gt;` from an existing object, with actual values. If you want to simply create a blank `&lt;form&gt;`, it may be more appropriate to construct it yourself and not rely on any model attributes.\r\n\r\n\t&lt;form method=&quot;post&quot; action=&quot;${pageContext.request.contextPath}/movies&quot;&gt;\r\n\t\t&lt;input name=&quot;filmName&quot; type=&quot;text&quot; /&gt;\r\n\t\t&lt;input type=&quot;submit&quot; value=&quot;Upload&quot; /&gt;\r\n\t&lt;/form&gt;\r\n\r\nOn the receiving side, your `POST` handler method, will still be able to extract the `filmName` input value and use it to initialize a `Movie` object.\r\n\r\n## Common Errors\r\n\r\nAs we&#39;ve seen, `FormTag` looks for a model attribute named `command` by default or with the name specified in either `modelAttribute` or `commandName`. Make sure you&#39;re using the right name.\r\n\r\n`ModelMap` has a [`addAttribute(Object)`][10] method which adds\r\n\r\n&gt; the supplied attribute to this `Map` using a [generated][11] name. \r\n\r\nwhere the general convention is to\r\n\r\n&gt; return the uncapitalized short name of the [attribute&#39;s] `Class`, according to\r\n&gt; JavaBeans property naming rules: So, `com.myapp.Product` becomes\r\n&gt; `product`; `com.myapp.MyProduct` becomes `myProduct`; `com.myapp.UKProduct`\r\n&gt; becomes `UKProduct`\r\n\r\nIf you&#39;re using this (or a similar) method or if you&#39;re using one of the `@RequestMapping` [supported return types][12] that represents a model attribute, make sure the generated name is what you expect.\r\n\r\nAnother common error is to bypass your `@Controller` method altogether. A typical Spring MVC application follows this pattern:\r\n\r\n 1. Send HTTP GET request\r\n 2. `DispatcherServlet` selects `@RequestMapping` method to handle request\r\n 3. Handler method generates some model attributes and returns view name\r\n 4. `DispatcherServlet` adds model attributes to `HttpServletRequest` and forwards request to JSP corresponding to view name\r\n 5. JSP renders response\r\n\r\nIf, by some misconfiguration, you skip the `@RequestMapping` method altogether, the attributes will not have been added. This can happen \r\n\r\n- if your HTTP request URI accesses your JSP resources directly, eg. because they are accessible, ie. outside `WEB-INF`, or\r\n- if the `welcome-list` of your `web.xml` contains your JSP resource, the Servlet container will render it directly, bypassing the Spring MVC stack entirely\r\n\r\nOne way or another, you want your `@Controller` to be invoked so that the model attributes are added appropriately.\r\n\r\n## What does `BindingResult` have to do with this?\r\n\r\nA [`BindingResult`][13] is a container for initialization or validation of model attributes. The [Spring MVC documentation][14] states\r\n\r\n&gt; The `Errors` or `BindingResult` parameters have to follow the model object\r\n&gt; that is being bound immediately as the method signature might have\r\n&gt; more than one model object and Spring will create a separate\r\n&gt; `BindingResult` instance for each of them [...]\r\n\r\nIn other words, if you want to use `BindingResult`, it has to follow the corresponding model attribute parameter in a `@RequestMapping` method\r\n\r\n    @RequestMapping(path = &quot;/movies&quot;, method = RequestMethod.POST)\r\n    public String upload(@ModelAttribute(&quot;movie&quot;) Movie movie, BindingResult errors) {\r\n\r\n`BindingResult` objects are also considered model attributes. Spring MVC uses a simple naming convention to manage them, making it easy to find a corresponding regular model attribute. Since the `BindingResult` contains more data about the model attribute (eg. validation errors), the `FormTag` attempts to bind to it first. However, since they go hand in hand, it&#39;s unlikely one will exist without the other.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-view-jsp-formtaglib-formtag\r\n  [2]: https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-view-jsp-formtaglib-inputtag\r\n  [3]: https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-view-jsp-formtaglib-checkboxtag\r\n  [4]: https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-5.x#removed-packages-classes-and-methods\r\n  [5]: http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/tags/form/FormTag.html#DEFAULT_COMMAND_NAME\r\n  [6]: http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/ui/ModelMap.html\r\n  [7]: http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html\r\n  [8]: http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/tags/form/FormTag.html\r\n  [9]: http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/tags/form/InputTag.html\r\n  [10]: http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/ui/ModelMap.html#addAttribute-java.lang.Object-\r\n  [11]: http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/Conventions.html#getVariableName-java.lang.Object-\r\n  [12]: http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-return-types\r\n  [13]: http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/validation/BindingResult.html\r\n  [14]: http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-arguments","title":"What causes &quot;java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;command&#39; available as request attribute&quot;?","body":"<p>You're trying to use <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-view-jsp-formtaglib-formtag\" rel=\"noreferrer\">Spring MVC's form tag</a>.</p>\n<blockquote>\n<p>This tag renders an HTML <code>form</code> tag and exposes a binding path to\ninner tags for binding. It puts the command object in the <code>PageContext</code>\nso that the command object can be accessed by inner tags.  [..]</p>\n<p>Let’s assume we have a domain object called <code>User</code>. It is a JavaBean\nwith properties such as <code>firstName</code> and <code>lastName</code>. We will use it as the\n<strong>form backing object</strong> of our form controller which returns <code>form.jsp</code>.</p>\n</blockquote>\n<p>In other words, Spring MVC will extract a <em>command object</em> and use its type as a blueprint for binding <code>path</code> expressions for <code>form</code>'s inner tags, like <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-view-jsp-formtaglib-inputtag\" rel=\"noreferrer\"><code>input</code></a> or <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-view-jsp-formtaglib-checkboxtag\" rel=\"noreferrer\"><code>checkbox</code></a>, to render an HTML <code>form</code> element.</p>\n<p>This <em>command object</em> is also called a model attribute and its name is specified in the <code>form</code> tag's <code>modelAttribute</code> or <code>commandName</code> attributes. You've omitted it in your JSP</p>\n<pre><code>&lt;form:form&gt; \n</code></pre>\n<p>You could've specified a name explicitly. Both of these are equivalent.</p>\n<pre><code>&lt;form:form modelAttribute=&quot;some-example-name&quot;&gt;\n&lt;form:form commandName=&quot;some-example-name&quot;&gt;\n</code></pre>\n<p><strong>NOTE</strong>: Spring 5 has removed the <code>commandName</code> attribute, see the upgrade notes, <a href=\"https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-5.x#removed-packages-classes-and-methods\" rel=\"noreferrer\">here</a>.</p>\n<p>The <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/tags/form/FormTag.html#DEFAULT_COMMAND_NAME\" rel=\"noreferrer\">default attribute name is <code>command</code></a> (what you see in error message). A model attribute is an object, typically a POJO or collection of POJOs, that your application supplies to the Spring MVC stack and which the Spring MVC stack exposes to your view (ie. the M to the V in MVC).</p>\n<p>Spring MVC collects all model attributes in a <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/ui/ModelMap.html\" rel=\"noreferrer\"><code>ModelMap</code></a> (they all have names) and, in the case of JSPs, transfers them to the <a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html\" rel=\"noreferrer\"><code>HttpServletRequest</code></a> attributes, where JSP tags and EL expressions have access to them.</p>\n<p>In your example, your <code>@Controller</code> handler method which handles a <code>GET</code> to the path <code>/movies</code> adds a single model attribute</p>\n<pre><code>model.addAttribute(&quot;movies&quot;, movies); // not named 'command'\n</code></pre>\n<p>and then forwards to the <code>index.jsp</code>. This JSP then tries to render</p>\n<pre><code>&lt;form:form&gt;\n    ...\n    &lt;form:input path=&quot;name&quot; type=&quot;text&quot; id=&quot;name&quot; /&gt;\n    ...\n&lt;/form:form&gt;\n</code></pre>\n<p>While rendering this, <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/tags/form/FormTag.html\" rel=\"noreferrer\"><code>FormTag</code></a> (in reality, the <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/tags/form/InputTag.html\" rel=\"noreferrer\"><code>InputTag</code></a>) tries to find a model attribute named <code>command</code> (the default attribute name) so that it can produce an HTML <code>&lt;input&gt;</code> element with a <code>name</code> attribute constructed from the <code>path</code> expression and the corresponding property value, ie. the result of <code>Movie#getFilmName()</code>.</p>\n<p>Since it cannot find it, it throws the exception you see</p>\n<pre><code>java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'command' available as request attribute\n</code></pre>\n<p>The JSP engine catches it and responds with a 500 status code. If you want to take advantage of a <code>Movie</code> POJO to simply construct your form correctly, you can add a model attribute explicitly with</p>\n<pre><code>model.addAttribute(&quot;movie&quot;, new Movie());\n</code></pre>\n<p>or have Spring MVC create and add one for you (must have an accessible parameterless constructor)</p>\n<pre><code>@RequestMapping(path = &quot;/movies&quot;, method = RequestMethod.GET)\npublic String homePage(@ModelAttribute(&quot;command&quot;) Movie movie, Model model) {...}\n</code></pre>\n<p>Alternatively, include a <code>@ModelAttribute</code> annotated method in your <code>@Controller</code> class</p>\n<pre><code>@ModelAttribute(&quot;command&quot;)\npublic Movie defaultInstance() {\n    Movie movie = new Movie();\n    movie.setFilmName(&quot;Rocky II&quot;);\n    return movie;\n}\n</code></pre>\n<p>Note that Spring MVC will call this method and implicitly add the object returned to its model attributes for each request handled by the enclosing <code>@Controller</code>.</p>\n<p>You may have guessed from this description that Spring's <code>form</code> tag is more suited for rendering an HTML <code>&lt;form&gt;</code> from an existing object, with actual values. If you want to simply create a blank <code>&lt;form&gt;</code>, it may be more appropriate to construct it yourself and not rely on any model attributes.</p>\n<pre><code>&lt;form method=&quot;post&quot; action=&quot;${pageContext.request.contextPath}/movies&quot;&gt;\n    &lt;input name=&quot;filmName&quot; type=&quot;text&quot; /&gt;\n    &lt;input type=&quot;submit&quot; value=&quot;Upload&quot; /&gt;\n&lt;/form&gt;\n</code></pre>\n<p>On the receiving side, your <code>POST</code> handler method, will still be able to extract the <code>filmName</code> input value and use it to initialize a <code>Movie</code> object.</p>\n<h2>Common Errors</h2>\n<p>As we've seen, <code>FormTag</code> looks for a model attribute named <code>command</code> by default or with the name specified in either <code>modelAttribute</code> or <code>commandName</code>. Make sure you're using the right name.</p>\n<p><code>ModelMap</code> has a <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/ui/ModelMap.html#addAttribute-java.lang.Object-\" rel=\"noreferrer\"><code>addAttribute(Object)</code></a> method which adds</p>\n<blockquote>\n<p>the supplied attribute to this <code>Map</code> using a <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/Conventions.html#getVariableName-java.lang.Object-\" rel=\"noreferrer\">generated</a> name.</p>\n</blockquote>\n<p>where the general convention is to</p>\n<blockquote>\n<p>return the uncapitalized short name of the [attribute's] <code>Class</code>, according to\nJavaBeans property naming rules: So, <code>com.myapp.Product</code> becomes\n<code>product</code>; <code>com.myapp.MyProduct</code> becomes <code>myProduct</code>; <code>com.myapp.UKProduct</code>\nbecomes <code>UKProduct</code></p>\n</blockquote>\n<p>If you're using this (or a similar) method or if you're using one of the <code>@RequestMapping</code> <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-return-types\" rel=\"noreferrer\">supported return types</a> that represents a model attribute, make sure the generated name is what you expect.</p>\n<p>Another common error is to bypass your <code>@Controller</code> method altogether. A typical Spring MVC application follows this pattern:</p>\n<ol>\n<li>Send HTTP GET request</li>\n<li><code>DispatcherServlet</code> selects <code>@RequestMapping</code> method to handle request</li>\n<li>Handler method generates some model attributes and returns view name</li>\n<li><code>DispatcherServlet</code> adds model attributes to <code>HttpServletRequest</code> and forwards request to JSP corresponding to view name</li>\n<li>JSP renders response</li>\n</ol>\n<p>If, by some misconfiguration, you skip the <code>@RequestMapping</code> method altogether, the attributes will not have been added. This can happen</p>\n<ul>\n<li>if your HTTP request URI accesses your JSP resources directly, eg. because they are accessible, ie. outside <code>WEB-INF</code>, or</li>\n<li>if the <code>welcome-list</code> of your <code>web.xml</code> contains your JSP resource, the Servlet container will render it directly, bypassing the Spring MVC stack entirely</li>\n</ul>\n<p>One way or another, you want your <code>@Controller</code> to be invoked so that the model attributes are added appropriately.</p>\n<h2>What does <code>BindingResult</code> have to do with this?</h2>\n<p>A <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/validation/BindingResult.html\" rel=\"noreferrer\"><code>BindingResult</code></a> is a container for initialization or validation of model attributes. The <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-arguments\" rel=\"noreferrer\">Spring MVC documentation</a> states</p>\n<blockquote>\n<p>The <code>Errors</code> or <code>BindingResult</code> parameters have to follow the model object\nthat is being bound immediately as the method signature might have\nmore than one model object and Spring will create a separate\n<code>BindingResult</code> instance for each of them [...]</p>\n</blockquote>\n<p>In other words, if you want to use <code>BindingResult</code>, it has to follow the corresponding model attribute parameter in a <code>@RequestMapping</code> method</p>\n<pre><code>@RequestMapping(path = &quot;/movies&quot;, method = RequestMethod.POST)\npublic String upload(@ModelAttribute(&quot;movie&quot;) Movie movie, BindingResult errors) {\n</code></pre>\n<p><code>BindingResult</code> objects are also considered model attributes. Spring MVC uses a simple naming convention to manage them, making it easy to find a corresponding regular model attribute. Since the <code>BindingResult</code> contains more data about the model attribute (eg. validation errors), the <code>FormTag</code> attempts to bind to it first. However, since they go hand in hand, it's unlikely one will exist without the other.</p>\n"},{"tags":[],"owner":{"account_id":410311,"reputation":41,"user_id":782084,"display_name":"Pasha Utt"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1514900536,"creation_date":1514900536,"answer_id":48062093,"question_id":42198050,"body_markdown":"To make things simple with the form tag just add a &quot;commandName&quot; which is a horrible name for what it is actually looking for...it wants the object you named in the MdelAttribute annotation. So in this case commandName=&quot;movie&quot;.\r\n\r\nThat&#39;ll save you reading long winded explanations friend. ","title":"What causes &quot;java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;command&#39; available as request attribute&quot;?","body":"<p>To make things simple with the form tag just add a \"commandName\" which is a horrible name for what it is actually looking for...it wants the object you named in the MdelAttribute annotation. So in this case commandName=\"movie\".</p>\n\n<p>That'll save you reading long winded explanations friend. </p>\n"},{"tags":[],"owner":{"account_id":3737292,"reputation":1907,"user_id":3107952,"display_name":"Pedro Madrid"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536083021,"creation_date":1536083021,"answer_id":52171528,"question_id":42198050,"body_markdown":"In my case, it worked by adding `modelAttribute=&quot;movie&quot;` to the form tag, and prepending the model name to the attribute, something like `&lt;form:input path=&quot;filmName&quot; type=&quot;text&quot; id=&quot;movie.name&quot; /&gt;`","title":"What causes &quot;java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;command&#39; available as request attribute&quot;?","body":"<p>In my case, it worked by adding <code>modelAttribute=\"movie\"</code> to the form tag, and prepending the model name to the attribute, something like <code>&lt;form:input path=\"filmName\" type=\"text\" id=\"movie.name\" /&gt;</code></p>\n"},{"tags":[],"owner":{"account_id":14217417,"reputation":1,"user_id":10270901,"display_name":"shaqer74"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1543604023,"creation_date":1543601188,"answer_id":53562692,"question_id":42198050,"body_markdown":"Updating from Spring version 3 to Spring version 5, produces the same error. All answers were satisfied already in my code. Adding the annotation `@ControllerAdvice` solved the problem for me.","title":"What causes &quot;java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;command&#39; available as request attribute&quot;?","body":"<p>Updating from Spring version 3 to Spring version 5, produces the same error. All answers were satisfied already in my code. Adding the annotation <code>@ControllerAdvice</code> solved the problem for me.</p>\n"},{"tags":[],"owner":{"account_id":12429820,"reputation":21,"user_id":9052869,"display_name":"Dotard"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1553867586,"creation_date":1553824881,"answer_id":55409498,"question_id":42198050,"body_markdown":"I had this error on a screen with multiple forms that do a search. Each form posts to its own controller method with results shown on same screen.\r\n\r\nProblem: I missed adding the other two forms as model attributes in each controller method causing that error when screen renders with results.\r\n\r\n    Form1 -&gt; bound to Bean1 (bean1) -&gt; Posting to /action1\r\n    Form2 -&gt; bound to Bean2 (bean2) -&gt; Posting to /action2\r\n    Form3 -&gt; bound to Bean3 (bean2) -&gt; Posting to /action3\r\n\r\n```\r\n@PostMapping\r\npublic String blah(@ModelAttribute(&quot;bean1&quot;) Bean1 bean, Model model){\r\n// do something with bean object\r\n\r\n// do not miss adding other 2 beans as model attributes like below. \r\nmodel.addAttribute(&quot;bean2&quot;, new Bean2()); \r\nmodel.addAttribute(&quot;bean3&quot;, new Bean3());\r\nreturn &quot;screen&quot;;\r\n}\r\n\r\n@PostMapping\r\npublic String blahBlah(@ModelAttribute(&quot;bean2&quot;) Bean2 bean, Model model){\r\n// do something with bean object\r\n// do not miss adding other 2 beans as model attributes like below. \r\nmodel.addAttribute(&quot;bean1&quot;, new Bean1()); \r\nmodel.addAttribute(&quot;bean3&quot;, new Bean3());\r\nreturn &quot;screen&quot;;\r\n}\r\n\r\n@PostMapping\r\npublic String blahBlahBlah(@ModelAttribute(&quot;bean3&quot;) Bean3 bean, Model model){\r\n// do something with bean object\r\n// do not miss adding other 2 beans as model attributes like below. \r\nmodel.addAttribute(&quot;bean1&quot;, new Bean1()); \r\nmodel.addAttribute(&quot;bean2&quot;, new Bean2());\r\nreturn &quot;screen&quot;;\r\n}\r\n```","title":"What causes &quot;java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;command&#39; available as request attribute&quot;?","body":"<p>I had this error on a screen with multiple forms that do a search. Each form posts to its own controller method with results shown on same screen.</p>\n\n<p>Problem: I missed adding the other two forms as model attributes in each controller method causing that error when screen renders with results.</p>\n\n<pre><code>Form1 -&gt; bound to Bean1 (bean1) -&gt; Posting to /action1\nForm2 -&gt; bound to Bean2 (bean2) -&gt; Posting to /action2\nForm3 -&gt; bound to Bean3 (bean2) -&gt; Posting to /action3\n</code></pre>\n\n<pre><code>@PostMapping\npublic String blah(@ModelAttribute(\"bean1\") Bean1 bean, Model model){\n// do something with bean object\n\n// do not miss adding other 2 beans as model attributes like below. \nmodel.addAttribute(\"bean2\", new Bean2()); \nmodel.addAttribute(\"bean3\", new Bean3());\nreturn \"screen\";\n}\n\n@PostMapping\npublic String blahBlah(@ModelAttribute(\"bean2\") Bean2 bean, Model model){\n// do something with bean object\n// do not miss adding other 2 beans as model attributes like below. \nmodel.addAttribute(\"bean1\", new Bean1()); \nmodel.addAttribute(\"bean3\", new Bean3());\nreturn \"screen\";\n}\n\n@PostMapping\npublic String blahBlahBlah(@ModelAttribute(\"bean3\") Bean3 bean, Model model){\n// do something with bean object\n// do not miss adding other 2 beans as model attributes like below. \nmodel.addAttribute(\"bean1\", new Bean1()); \nmodel.addAttribute(\"bean2\", new Bean2());\nreturn \"screen\";\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7480597,"reputation":304,"user_id":5685534,"display_name":"Kanaris007"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1624520341,"creation_date":1624519952,"answer_id":68111380,"question_id":42198050,"body_markdown":"I tried to migrate my application to Spring5 and noticed the same issue. It was caused by the moment that the &#39;commandName&#39; attribute is not supported anymore and I had to use &#39;modelAttribute&#39; instead.","title":"What causes &quot;java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;command&#39; available as request attribute&quot;?","body":"<p>I tried to migrate my application to Spring5 and noticed the same issue. It was caused by the moment that the 'commandName' attribute is not supported anymore and I had to use 'modelAttribute' instead.</p>\n"},{"tags":[],"owner":{"account_id":14393876,"reputation":167,"user_id":10397782,"display_name":"Aman_Bhala"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1676703288,"creation_date":1676703288,"answer_id":75491705,"question_id":42198050,"body_markdown":"If your Model object is correctly being passed to the GET API call but still have this error, you may look at the html or jsp page also to check whether correct variables names are provided and tags are used correctly. In my case, I forgot to include the objects under the closing ```&lt;form&gt;``` tag.","title":"What causes &quot;java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;command&#39; available as request attribute&quot;?","body":"<p>If your Model object is correctly being passed to the GET API call but still have this error, you may look at the html or jsp page also to check whether correct variables names are provided and tags are used correctly. In my case, I forgot to include the objects under the closing <code>&lt;form&gt;</code> tag.</p>\n"}],"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23637,"favorite_count":0,"down_vote_count":6,"up_vote_count":43,"accepted_answer_id":42198051,"answer_count":7,"score":37,"last_activity_date":1676703288,"creation_date":1486968199,"question_id":42198050,"body_markdown":"&lt;sub&gt;This is meant to be an extensive canonical question &amp; answer post for these types of questions.&lt;/sub&gt; \r\n\r\n\r\n---\r\n\r\nI&#39;m trying to write a Spring MVC web application where users can add movie names to an in-memory collection. It&#39;s configured like so\r\n\r\n    public class Application extends AbstractAnnotationConfigDispatcherServletInitializer {\r\n        protected Class&lt;?&gt;[] getRootConfigClasses() {\r\n            return new Class&lt;?&gt;[] {};\r\n        }\r\n        protected Class&lt;?&gt;[] getServletConfigClasses() {\r\n            return new Class&lt;?&gt;[] { SpringServletConfig.class };\r\n        }\r\n        protected String[] getServletMappings() {\r\n            return new String[] { &quot;/&quot; };\r\n        }\r\n    }\r\n\r\nand\r\n\r\n    @Configuration\r\n    @ComponentScan(&quot;com.example&quot;)\r\n    public class SpringServletConfig extends WebMvcConfigurationSupport {\r\n        @Bean\r\n        public InternalResourceViewResolver resolver() {\r\n            InternalResourceViewResolver vr = new InternalResourceViewResolver();\r\n            vr.setPrefix(&quot;WEB-INF/jsps/&quot;);\r\n            vr.setSuffix(&quot;.jsp&quot;);\r\n            return vr;\r\n        }\r\n    }\r\n\r\nThere&#39;s a single `@Controller` class in the `com.example` package\r\n\r\n    @Controller\r\n    public class MovieController {\r\n        private final CopyOnWriteArrayList&lt;Movie&gt; movies = new CopyOnWriteArrayList&lt;&gt;();\r\n        @RequestMapping(path = &quot;/movies&quot;, method = RequestMethod.GET)\r\n        public String homePage(Model model) {\r\n            model.addAttribute(&quot;movies&quot;, movies);\r\n            return &quot;index&quot;;\r\n        }\r\n        @RequestMapping(path = &quot;/movies&quot;, method = RequestMethod.POST)\r\n        public String upload(@ModelAttribute(&quot;movie&quot;) Movie movie, BindingResult errors) {\r\n            if (!errors.hasErrors()) {\r\n                movies.add(movie);\r\n            }\r\n            return &quot;redirect:/movies&quot;;\r\n        }\r\n        public static class Movie {\r\n            private String filmName;\r\n            public String getFilmName() {\r\n                return filmName;\r\n            }\r\n            public void setFilmName(String filmName) {\r\n                this.filmName = filmName;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n`WEB-INF/jsps/index.jsp` contains\r\n\r\n    &lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot;%&gt;\r\n    &lt;%@ taglib prefix=&quot;form&quot; uri=&quot;http://www.springframework.org/tags/form&quot;%&gt;\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;\r\n    &lt;title&gt;Movies&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    \tCurrent Movies:\r\n    \t&lt;c:forEach items=&quot;${movies}&quot; var=&quot;movieItem&quot;&gt;\r\n    \t\t&lt;ul&gt;\r\n    \t\t\t&lt;li&gt;${movieItem.filmName}&lt;/li&gt;\r\n    \t\t&lt;/ul&gt;\r\n    \t&lt;/c:forEach&gt;\r\n    \t&lt;form:form&gt;\r\n    \t\t&lt;div&gt;Movie name:&lt;/div&gt;\r\n    \t\t&lt;form:input path=&quot;filmName&quot; type=&quot;text&quot; id=&quot;name&quot; /&gt;\r\n    \t\t&lt;input type=&quot;submit&quot; value=&quot;Upload&quot;&gt;\r\n    \t&lt;/form:form&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nThe application is configured with context path `/Example`. When I send a GET request to\r\n\r\n    http://localhost:8080/Example/movies\r\n\r\nthe request fails, Spring MVC responds with a 500 status code, and reports the following exception and stack trace\r\n\r\n    java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;command&#39; available as request attribute\r\n    \torg.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:144)\r\n    \torg.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:168)\r\n    \torg.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:188)\r\n    \torg.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:154)\r\n    \torg.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag.java:117)\r\n    \torg.springframework.web.servlet.tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:422)\r\n    \torg.springframework.web.servlet.tags.form.InputTag.writeTagContent(InputTag.java:142)\r\n    \torg.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:84)\r\n    \torg.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:80)\r\n    \torg.apache.jsp.WEB_002dINF.jsps.index_jsp._jspx_meth_form_005finput_005f0(index_jsp.java:267)\r\n    \torg.apache.jsp.WEB_002dINF.jsps.index_jsp._jspx_meth_form_005fform_005f0(index_jsp.java:227)\r\n    \torg.apache.jsp.WEB_002dINF.jsps.index_jsp._jspService(index_jsp.java:142)\r\n    \torg.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n    \torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:438)\r\n    \torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:396)\r\n    \torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:340)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n    \torg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n    \torg.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:168)\r\n    \torg.springframework.web.servlet.view.AbstractView.render(AbstractView.java:303)\r\n    \torg.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1257)\r\n    \torg.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1037)\r\n    \torg.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:980)\r\n    \torg.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897)\r\n    \torg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\r\n    \torg.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:622)\r\n    \torg.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n    \torg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n\r\nI expected the JSP to generate an HTML `&lt;form&gt;` with a single text input, for a `Movie` name, and a submit button, that I can use to send a POST request with a new `Movie`. Why does the JSP servlet instead fail to render Spring&#39;s `&lt;form:form&gt;` tag?","title":"What causes &quot;java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;command&#39; available as request attribute&quot;?","body":"<p><sub>This is meant to be an extensive canonical question &amp; answer post for these types of questions.</sub></p>\n<hr />\n<p>I'm trying to write a Spring MVC web application where users can add movie names to an in-memory collection. It's configured like so</p>\n<pre><code>public class Application extends AbstractAnnotationConfigDispatcherServletInitializer {\n    protected Class&lt;?&gt;[] getRootConfigClasses() {\n        return new Class&lt;?&gt;[] {};\n    }\n    protected Class&lt;?&gt;[] getServletConfigClasses() {\n        return new Class&lt;?&gt;[] { SpringServletConfig.class };\n    }\n    protected String[] getServletMappings() {\n        return new String[] { &quot;/&quot; };\n    }\n}\n</code></pre>\n<p>and</p>\n<pre><code>@Configuration\n@ComponentScan(&quot;com.example&quot;)\npublic class SpringServletConfig extends WebMvcConfigurationSupport {\n    @Bean\n    public InternalResourceViewResolver resolver() {\n        InternalResourceViewResolver vr = new InternalResourceViewResolver();\n        vr.setPrefix(&quot;WEB-INF/jsps/&quot;);\n        vr.setSuffix(&quot;.jsp&quot;);\n        return vr;\n    }\n}\n</code></pre>\n<p>There's a single <code>@Controller</code> class in the <code>com.example</code> package</p>\n<pre><code>@Controller\npublic class MovieController {\n    private final CopyOnWriteArrayList&lt;Movie&gt; movies = new CopyOnWriteArrayList&lt;&gt;();\n    @RequestMapping(path = &quot;/movies&quot;, method = RequestMethod.GET)\n    public String homePage(Model model) {\n        model.addAttribute(&quot;movies&quot;, movies);\n        return &quot;index&quot;;\n    }\n    @RequestMapping(path = &quot;/movies&quot;, method = RequestMethod.POST)\n    public String upload(@ModelAttribute(&quot;movie&quot;) Movie movie, BindingResult errors) {\n        if (!errors.hasErrors()) {\n            movies.add(movie);\n        }\n        return &quot;redirect:/movies&quot;;\n    }\n    public static class Movie {\n        private String filmName;\n        public String getFilmName() {\n            return filmName;\n        }\n        public void setFilmName(String filmName) {\n            this.filmName = filmName;\n        }\n    }\n}\n</code></pre>\n<p><code>WEB-INF/jsps/index.jsp</code> contains</p>\n<pre><code>&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot;%&gt;\n&lt;%@ taglib prefix=&quot;form&quot; uri=&quot;http://www.springframework.org/tags/form&quot;%&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;\n&lt;title&gt;Movies&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    Current Movies:\n    &lt;c:forEach items=&quot;${movies}&quot; var=&quot;movieItem&quot;&gt;\n        &lt;ul&gt;\n            &lt;li&gt;${movieItem.filmName}&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/c:forEach&gt;\n    &lt;form:form&gt;\n        &lt;div&gt;Movie name:&lt;/div&gt;\n        &lt;form:input path=&quot;filmName&quot; type=&quot;text&quot; id=&quot;name&quot; /&gt;\n        &lt;input type=&quot;submit&quot; value=&quot;Upload&quot;&gt;\n    &lt;/form:form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>The application is configured with context path <code>/Example</code>. When I send a GET request to</p>\n<pre><code>http://localhost:8080/Example/movies\n</code></pre>\n<p>the request fails, Spring MVC responds with a 500 status code, and reports the following exception and stack trace</p>\n<pre><code>java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'command' available as request attribute\n    org.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:144)\n    org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:168)\n    org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:188)\n    org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:154)\n    org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag.java:117)\n    org.springframework.web.servlet.tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:422)\n    org.springframework.web.servlet.tags.form.InputTag.writeTagContent(InputTag.java:142)\n    org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:84)\n    org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:80)\n    org.apache.jsp.WEB_002dINF.jsps.index_jsp._jspx_meth_form_005finput_005f0(index_jsp.java:267)\n    org.apache.jsp.WEB_002dINF.jsps.index_jsp._jspx_meth_form_005fform_005f0(index_jsp.java:227)\n    org.apache.jsp.WEB_002dINF.jsps.index_jsp._jspService(index_jsp.java:142)\n    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:438)\n    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:396)\n    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:340)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n    org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:168)\n    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:303)\n    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1257)\n    org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1037)\n    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:980)\n    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897)\n    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\n    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:622)\n    org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n</code></pre>\n<p>I expected the JSP to generate an HTML <code>&lt;form&gt;</code> with a single text input, for a <code>Movie</code> name, and a submit button, that I can use to send a POST request with a new <code>Movie</code>. Why does the JSP servlet instead fail to render Spring's <code>&lt;form:form&gt;</code> tag?</p>\n"},{"tags":["java","spring","database","oracle","datapump"],"comments":[{"owner":{"account_id":27814361,"reputation":1,"user_id":21236107,"display_name":"Ram"},"score":0,"creation_date":1676750894,"post_id":75488389,"comment_id":133201751,"body_markdown":"Data from the Mutiples tables are required and size of these tables is very big","body":"Data from the Mutiples tables are required and size of these tables is very big"}],"answers":[{"tags":[],"owner":{"account_id":26978029,"reputation":6997,"user_id":20542862,"display_name":"Paul W"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676661778,"creation_date":1676661778,"answer_id":75488481,"question_id":75488389,"body_markdown":"There are numerous ways to do this, but the most straightforward is to use **materialized views** with queries that involve dblinks, which you can schedule refreshes for by using **dbms_scheduler**. There are a lot of docs online to help you. Here&#39;s one:\r\n\r\n[Working with Materialized Views][1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/database/oracle/oracle-database/19/dwhsg/part-optimizing-dw.html#GUID-9A97B601-4BD2-40B6-81F5-44F679F82C6F","title":"Data refresh from one oracle db to another oracle db","body":"<p>There are numerous ways to do this, but the most straightforward is to use <strong>materialized views</strong> with queries that involve dblinks, which you can schedule refreshes for by using <strong>dbms_scheduler</strong>. There are a lot of docs online to help you. Here's one:</p>\n<p><a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/19/dwhsg/part-optimizing-dw.html#GUID-9A97B601-4BD2-40B6-81F5-44F679F82C6F\" rel=\"nofollow noreferrer\">Working with Materialized Views</a></p>\n"},{"tags":[],"owner":{"account_id":12498833,"reputation":135427,"user_id":9097906,"display_name":"Littlefoot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676661800,"creation_date":1676661800,"answer_id":75488484,"question_id":75488389,"body_markdown":"I don&#39;t know Java so I can&#39;t comment it.\r\n\r\nAs far as database is concerned, one option is to create database link between these two databases and a **materialized view** in one of them which *fetches* data over the database link from another database.\r\n\r\nYou can schedule refresh; there are various options. Read documentation to pick the right one for your situation. Have a *quick* look at Tim Hall&#39;s &lt;a href=&quot;https://oracle-base.com/articles/misc/materialized-views&quot;&gt;materialized views&lt;/a&gt; article; if you find it interesting, search Oracle documentation (related to version you use) for more info.\r\n","title":"Data refresh from one oracle db to another oracle db","body":"<p>I don't know Java so I can't comment it.</p>\n<p>As far as database is concerned, one option is to create database link between these two databases and a <strong>materialized view</strong> in one of them which <em>fetches</em> data over the database link from another database.</p>\n<p>You can schedule refresh; there are various options. Read documentation to pick the right one for your situation. Have a <em>quick</em> look at Tim Hall's <a href=\"https://oracle-base.com/articles/misc/materialized-views\" rel=\"nofollow noreferrer\">materialized views</a> article; if you find it interesting, search Oracle documentation (related to version you use) for more info.</p>\n"},{"comments":[{"owner":{"account_id":27814361,"reputation":1,"user_id":21236107,"display_name":"Ram"},"score":0,"creation_date":1676916389,"post_id":75491519,"comment_id":133229570,"body_markdown":"Thank you but with out database link we can establish a connection if we have host ,port and SID details?","body":"Thank you but with out database link we can establish a connection if we have host ,port and SID details?"}],"tags":[],"owner":{"account_id":27816988,"reputation":1,"user_id":21238173,"display_name":"Lokesh Gurram"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676700310,"creation_date":1676700310,"answer_id":75491519,"question_id":75488389,"body_markdown":"create a database link between source and target databases and follow any of these native tool options.\r\n1. Create a materialized view using query that points to source database.\r\n2. Write a procedure in target site using select queries to read data from source site and update/insert the target tables accordingly.Later schedule those procedures using scheduler jobs.\r\n3. Use the Golden gate provided if table you chosen should have primary key or unique key.\r\n4. you can write your own Java or python code which works like PUB and SUB mode to publish the data into target site.\r\n","title":"Data refresh from one oracle db to another oracle db","body":"<p>create a database link between source and target databases and follow any of these native tool options.</p>\n<ol>\n<li>Create a materialized view using query that points to source database.</li>\n<li>Write a procedure in target site using select queries to read data from source site and update/insert the target tables accordingly.Later schedule those procedures using scheduler jobs.</li>\n<li>Use the Golden gate provided if table you chosen should have primary key or unique key.</li>\n<li>you can write your own Java or python code which works like PUB and SUB mode to publish the data into target site.</li>\n</ol>\n"}],"owner":{"account_id":27814361,"reputation":1,"user_id":21236107,"display_name":"Ram"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1676700310,"creation_date":1676661100,"question_id":75488389,"body_markdown":"I want to get some filtered data from one oracle db and refresh tables in other oracle db and this refresh needs to be done frequently. So what are best possible ways to do it? \r\n\r\nPlease suggest the optimal way to do it. \r\nUsing db links or using oracle schedule jobs or write java code.","title":"Data refresh from one oracle db to another oracle db","body":"<p>I want to get some filtered data from one oracle db and refresh tables in other oracle db and this refresh needs to be done frequently. So what are best possible ways to do it?</p>\n<p>Please suggest the optimal way to do it.\nUsing db links or using oracle schedule jobs or write java code.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"answers":[{"comments":[{"owner":{"account_id":362188,"reputation":29,"user_id":705249,"display_name":"ebilly"},"score":0,"creation_date":1676825330,"post_id":75491514,"comment_id":133210903,"body_markdown":"Thank you.  This seems to be the answer but I’m required to upgrade my Spring version to use query DSL.  I’m using 2.7.2 and needed 3.0 to compile and run which caused a bunch of other issues. ;)  Brilliant solution though.  I’ll have to look for something else until I’m ready to upgrade. Sigh.","body":"Thank you.  This seems to be the answer but I’m required to upgrade my Spring version to use query DSL.  I’m using 2.7.2 and needed 3.0 to compile and run which caused a bunch of other issues. ;)  Brilliant solution though.  I’ll have to look for something else until I’m ready to upgrade. Sigh."},{"owner":{"account_id":14429279,"reputation":130,"user_id":10423076,"display_name":"Govil Kumar"},"score":1,"creation_date":1676862179,"post_id":75491514,"comment_id":133216672,"body_markdown":"Check this out https://zetcode.com/springboot/querydsl/ might help you.","body":"Check this out <a href=\"https://zetcode.com/springboot/querydsl/\" rel=\"nofollow noreferrer\">zetcode.com/springboot/querydsl</a> might help you."}],"tags":[],"owner":{"account_id":14429279,"reputation":130,"user_id":10423076,"display_name":"Govil Kumar"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676700271,"creation_date":1676700271,"answer_id":75491514,"question_id":75491144,"body_markdown":"I would suggest to use QueryDSL for filter based search as it&#39;s much more readable than Spring data Specifications or Criteria API.\r\n1) Add dependencies\r\n\r\n    &lt;querydsl.version&gt;5.0.0&lt;/querydsl.version&gt;\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.querydsl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;querydsl-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${querydsl.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.querydsl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;querydsl-jpa&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${querydsl.version}&lt;/version&gt;\r\n\t\t\t&lt;classifier&gt;jakarta&lt;/classifier&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.querydsl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;querydsl-sql&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${querydsl.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.querydsl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;querydsl-sql-spring&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${querydsl.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.querydsl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;querydsl-apt&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${querydsl.version}&lt;/version&gt;\r\n\t\t\t&lt;classifier&gt;jakarta&lt;/classifier&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\n\r\nRun mvn clean install - it will generate querydsl model classes. \r\n\r\n2) Create a search param pojo\r\nBelow example is using **record**\r\n\r\n```java\r\n@Builder(toBuilder = true)\r\npublic record UserProfileFilterParam(String city, String country, String state, Integer pincode) {}\r\n```\r\n\r\n3) Create a search repository interface\r\n\r\n```java\r\npublic interface UserProfileFilterRepository {\r\n\r\n    List&lt;UserProfile&gt; fetchAll(UserProfileFilterParam filter);\r\n\r\n    //Add methods if needed\r\n}\r\n```\r\n\r\n4) Create an implementation of repo in step 3\r\n\r\n```java\r\n@Repository\r\npublic class UserProfileFilterRepositoryImpl extends QuerydslRepositorySupport implements UserProfileFilterRepository {\r\n\r\n    public UserProfileFilterRepositoryImpl() {\r\n        super(UserProfile.class);\r\n    }\r\n\r\n    @Override\r\n    public List&lt;UserProfile&gt; fetchAll(UserProfileFilterParam filter) {\r\n        //Classes started with &#39;Q&#39; are autogenerated by QueryDSL when executed maven build command.\r\n        QUserProfile userProfile = QUserProfile.userProfile; //root\r\n        QAddress address = QAddress.address; //foreign keys\r\n        JPQLQuery&lt;UserProfile&gt; query = from(userProfile)\r\n                .join(address).on(userProfile.address.id.eq(address.id));\r\n\r\n        if(filter.city() != null) {\r\n            query = query.where(address.city.likeIgnoreCase(filter.city()));\r\n        }\r\n\r\n        if(filter.country() != null) {\r\n            query = query.where(address.country.likeIgnoreCase(filter.country()));\r\n        }\r\n\r\n        if(filter.state() != null) {\r\n            query = query.where(address.state.likeIgnoreCase(filter.state()));\r\n        }\r\n\r\n        if(filter.pincode() != null) {\r\n            query = query.where(address.pinCode.likeIgnoreCase(Integer.toString(filter.pincode())));\r\n        }\r\n        return query.orderBy(userProfile.id.asc()).fetch();\r\n    }\r\n}\r\n```\r\n\r\nMore details: https://spring.io/blog/2011/04/26/advanced-spring-data-jpa-specifications-and-querydsl\r\nhttps://www.baeldung.com/rest-api-search-language-spring-data-querydsl","title":"searching related entity columns for matching keyword with Spring JPA","body":"<p>I would suggest to use QueryDSL for filter based search as it's much more readable than Spring data Specifications or Criteria API.</p>\n<ol>\n<li><p>Add dependencies</p>\n<p>&lt;querydsl.version&gt;5.0.0&lt;/querydsl.version&gt;</p>\n</li>\n</ol>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n            &lt;groupId&gt;com.querydsl&lt;/groupId&gt;\n            &lt;artifactId&gt;querydsl-core&lt;/artifactId&gt;\n            &lt;version&gt;${querydsl.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.querydsl&lt;/groupId&gt;\n            &lt;artifactId&gt;querydsl-jpa&lt;/artifactId&gt;\n            &lt;version&gt;${querydsl.version}&lt;/version&gt;\n            &lt;classifier&gt;jakarta&lt;/classifier&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.querydsl&lt;/groupId&gt;\n            &lt;artifactId&gt;querydsl-sql&lt;/artifactId&gt;\n            &lt;version&gt;${querydsl.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.querydsl&lt;/groupId&gt;\n            &lt;artifactId&gt;querydsl-sql-spring&lt;/artifactId&gt;\n            &lt;version&gt;${querydsl.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.querydsl&lt;/groupId&gt;\n            &lt;artifactId&gt;querydsl-apt&lt;/artifactId&gt;\n            &lt;version&gt;${querydsl.version}&lt;/version&gt;\n            &lt;classifier&gt;jakarta&lt;/classifier&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Run mvn clean install - it will generate querydsl model classes.</p>\n<ol start=\"2\">\n<li>Create a search param pojo\nBelow example is using <strong>record</strong></li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@Builder(toBuilder = true)\npublic record UserProfileFilterParam(String city, String country, String state, Integer pincode) {}\n</code></pre>\n<ol start=\"3\">\n<li>Create a search repository interface</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>public interface UserProfileFilterRepository {\n\n    List&lt;UserProfile&gt; fetchAll(UserProfileFilterParam filter);\n\n    //Add methods if needed\n}\n</code></pre>\n<ol start=\"4\">\n<li>Create an implementation of repo in step 3</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic class UserProfileFilterRepositoryImpl extends QuerydslRepositorySupport implements UserProfileFilterRepository {\n\n    public UserProfileFilterRepositoryImpl() {\n        super(UserProfile.class);\n    }\n\n    @Override\n    public List&lt;UserProfile&gt; fetchAll(UserProfileFilterParam filter) {\n        //Classes started with 'Q' are autogenerated by QueryDSL when executed maven build command.\n        QUserProfile userProfile = QUserProfile.userProfile; //root\n        QAddress address = QAddress.address; //foreign keys\n        JPQLQuery&lt;UserProfile&gt; query = from(userProfile)\n                .join(address).on(userProfile.address.id.eq(address.id));\n\n        if(filter.city() != null) {\n            query = query.where(address.city.likeIgnoreCase(filter.city()));\n        }\n\n        if(filter.country() != null) {\n            query = query.where(address.country.likeIgnoreCase(filter.country()));\n        }\n\n        if(filter.state() != null) {\n            query = query.where(address.state.likeIgnoreCase(filter.state()));\n        }\n\n        if(filter.pincode() != null) {\n            query = query.where(address.pinCode.likeIgnoreCase(Integer.toString(filter.pincode())));\n        }\n        return query.orderBy(userProfile.id.asc()).fetch();\n    }\n}\n</code></pre>\n<p>More details: <a href=\"https://spring.io/blog/2011/04/26/advanced-spring-data-jpa-specifications-and-querydsl\" rel=\"nofollow noreferrer\">https://spring.io/blog/2011/04/26/advanced-spring-data-jpa-specifications-and-querydsl</a>\n<a href=\"https://www.baeldung.com/rest-api-search-language-spring-data-querydsl\" rel=\"nofollow noreferrer\">https://www.baeldung.com/rest-api-search-language-spring-data-querydsl</a></p>\n"}],"owner":{"account_id":362188,"reputation":29,"user_id":705249,"display_name":"ebilly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75491514,"answer_count":1,"score":0,"last_activity_date":1676700271,"creation_date":1676693672,"question_id":75491144,"body_markdown":"I&#39;ve used the following previously asked [question](https://stackoverflow.com/questions/58691666/search-all-columns-for-matching-keyword-with-spring-jpa) to develop a nice enough solution to search across most of my columns by keyword.  My issue is I have columns that are foreign keys to other entities and I&#39;d like to include them in the search.  \r\n\r\nNeither of the following work:\r\n\r\n`SearchSpecification byBedroom = \r\n              new SearchSpecification(new SearchCriteria(&quot;masterBedroom&quot;, &quot;:&quot;, &quot;searchVal&quot;));\r\n`\r\nExecutes but returns only non-foreign entities OR \r\n\r\n`SearchSpecification byBedroom = \r\n              new SearchSpecification(new SearchCriteria(&quot;masterBedroom.roomName&quot;, &quot;:&quot;, &quot;searchVal&quot;));\r\n`\r\nthrows an exception - org.springframework.dao.InvalidDataAccessApiUsageException: Unable to locate Attribute  with the the given name [masterBedroom.roomName] on this ManagedType.\r\n\r\nWhat am I missing here?","title":"searching related entity columns for matching keyword with Spring JPA","body":"<p>I've used the following previously asked <a href=\"https://stackoverflow.com/questions/58691666/search-all-columns-for-matching-keyword-with-spring-jpa\">question</a> to develop a nice enough solution to search across most of my columns by keyword.  My issue is I have columns that are foreign keys to other entities and I'd like to include them in the search.</p>\n<p>Neither of the following work:</p>\n<p><code>SearchSpecification byBedroom =  new SearchSpecification(new SearchCriteria(&quot;masterBedroom&quot;, &quot;:&quot;, &quot;searchVal&quot;)); </code>\nExecutes but returns only non-foreign entities OR</p>\n<p><code>SearchSpecification byBedroom =  new SearchSpecification(new SearchCriteria(&quot;masterBedroom.roomName&quot;, &quot;:&quot;, &quot;searchVal&quot;)); </code>\nthrows an exception - org.springframework.dao.InvalidDataAccessApiUsageException: Unable to locate Attribute  with the the given name [masterBedroom.roomName] on this ManagedType.</p>\n<p>What am I missing here?</p>\n"},{"tags":["java","jar","minecraft-forge"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1676641132,"post_id":75484943,"comment_id":133183389,"body_markdown":"Looks like you&#39;ve got a space in the path of the command. That&#39;s not going to fly without quoting it `javaw -jar &quot;D:\\foo\\bar\\path with space\\x.jar&quot;`","body":"Looks like you&#39;ve got a space in the path of the command. That&#39;s not going to fly without quoting it <code>javaw -jar &quot;D:\\foo\\bar\\path with space\\x.jar&quot;</code>"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1676641671,"post_id":75484943,"comment_id":133183574,"body_markdown":"What happens when you run that command without the &quot;start&quot; at the beginning?","body":"What happens when you run that command without the &quot;start&quot; at the beginning?"},{"owner":{"account_id":27811947,"reputation":1,"user_id":21234176,"display_name":"somerandomperson "},"score":0,"creation_date":1676646208,"post_id":75484943,"comment_id":133184862,"body_markdown":"@g00se I quoted the path, but it still doesn’t work and doesn’t run the jar.","body":"@g00se I quoted the path, but it still doesn’t work and doesn’t run the jar."},{"owner":{"account_id":27811947,"reputation":1,"user_id":21234176,"display_name":"somerandomperson "},"score":0,"creation_date":1676646229,"post_id":75484943,"comment_id":133184872,"body_markdown":"@f1sh it still doesn’t load the jar","body":"@f1sh it still doesn’t load the jar"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1676646333,"post_id":75484943,"comment_id":133184903,"body_markdown":"Start by executing the command on its own, *manually* at the command line. Let us know what happens","body":"Start by executing the command on its own, <i>manually</i> at the command line. Let us know what happens"},{"owner":{"account_id":27811947,"reputation":1,"user_id":21234176,"display_name":"somerandomperson "},"score":0,"creation_date":1676647262,"post_id":75484943,"comment_id":133185198,"body_markdown":"Still the same issue. I press enter and it moves to the next command line without opening the ui.","body":"Still the same issue. I press enter and it moves to the next command line without opening the ui."},{"owner":{"account_id":27811947,"reputation":1,"user_id":21234176,"display_name":"somerandomperson "},"score":0,"creation_date":1676647435,"post_id":75484943,"comment_id":133185250,"body_markdown":"When I run the same command in powershell, it returns “a parameter cannot be found that matches parameter name ‘jar’.","body":"When I run the same command in powershell, it returns “a parameter cannot be found that matches parameter name ‘jar’."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1676648741,"post_id":75484943,"comment_id":133185669,"body_markdown":"Sounds like a problem with `javaw`. Is it even installed? You might start with `java -jar`","body":"Sounds like a problem with <code>javaw</code>. Is it even installed? You might start with <code>java -jar</code>"},{"owner":{"account_id":27811947,"reputation":1,"user_id":21234176,"display_name":"somerandomperson "},"score":0,"creation_date":1676684951,"post_id":75484943,"comment_id":133193382,"body_markdown":"It is installed. I set a path to the jre\\bin folder","body":"It is installed. I set a path to the jre\\bin folder"},{"owner":{"account_id":27811947,"reputation":1,"user_id":21234176,"display_name":"somerandomperson "},"score":0,"creation_date":1676686263,"post_id":75484943,"comment_id":133193468,"body_markdown":"Is it probably because of a duplicate javaw installation?","body":"Is it probably because of a duplicate javaw installation?"}],"answers":[{"tags":[],"owner":{"account_id":27811947,"reputation":1,"user_id":21234176,"display_name":"somerandomperson "},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676700258,"creation_date":1676700258,"answer_id":75491513,"question_id":75484943,"body_markdown":"Problem solved. There was a duplicate java folder in Oracle-&gt;Java, which I promptly deleted.","title":"My batch file isn’t executing the .jar file like it’s supposed to","body":"<p>Problem solved. There was a duplicate java folder in Oracle-&gt;Java, which I promptly deleted.</p>\n"}],"owner":{"account_id":27811947,"reputation":1,"user_id":21234176,"display_name":"somerandomperson "},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1676700258,"creation_date":1676640688,"question_id":75484943,"body_markdown":"[enter image description here](https://i.stack.imgur.com/mFbmn.jpg)I tried to run a jar file through a batch file, but it closes without opening the UI that is meant to run with the file.\r\n\r\nI tried downloading Jarfix, but could not double-click to run the jar file in question. Instead, it did nothing. I also tried opening with javaw, but it also did nothing. I’ve done the same thing a year ago and it ran fine. I also tried updating the Java version to the latest one. The jar file was expected to run and open a UI. Please help","title":"My batch file isn’t executing the .jar file like it’s supposed to","body":"<p><a href=\"https://i.stack.imgur.com/mFbmn.jpg\" rel=\"nofollow noreferrer\">enter image description here</a>I tried to run a jar file through a batch file, but it closes without opening the UI that is meant to run with the file.</p>\n<p>I tried downloading Jarfix, but could not double-click to run the jar file in question. Instead, it did nothing. I also tried opening with javaw, but it also did nothing. I’ve done the same thing a year ago and it ran fine. I also tried updating the Java version to the latest one. The jar file was expected to run and open a UI. Please help</p>\n"},{"tags":["java","binary-tree"],"comments":[{"owner":{"account_id":2513781,"reputation":1109,"user_id":2185630,"display_name":"dbl"},"score":5,"creation_date":1600935631,"post_id":64042143,"comment_id":113247768,"body_markdown":"The problem you are facing is that you are replacing left with right and then replacing right with the new left(current right). Same problem as swapping `x` and `y` values without using a temp variable.","body":"The problem you are facing is that you are replacing left with right and then replacing right with the new left(current right). Same problem as swapping <code>x</code> and <code>y</code> values without using a temp variable."}],"answers":[{"comments":[{"owner":{"account_id":14428029,"reputation":37,"user_id":11178048,"display_name":"Av&#233;-Maria Nlandou"},"score":0,"creation_date":1600936324,"post_id":64042341,"comment_id":113248099,"body_markdown":"Oh wow. Yeah, that makes a lot of sense. I was under the impression that you couldn&#39;t do such a thing with a tree. Thank you so much! It&#39;s been fixed and the solution works.","body":"Oh wow. Yeah, that makes a lot of sense. I was under the impression that you couldn&#39;t do such a thing with a tree. Thank you so much! It&#39;s been fixed and the solution works."}],"tags":[],"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1600936868,"creation_date":1600935792,"answer_id":64042341,"question_id":64042143,"body_markdown":"`newTree = root` means that if you now change `newTree.left` you change `root.left` as well, you do not have an actual new tree, you just manipulate one tree in place. If you want to do that you must be careful not to overwrite stuff that you need later on. If you want to swap two numbers you cannot write `a=b; b=a;` since at the second assignment `a` would have already been changed. But you do just that with `left` and `right`.  \r\nBasically you should write:\r\n\r\n    public void invertTree(TreeNode node) {\r\n       if (node == null)\r\n           return; \r\n        TreeNode tmp = node.left;\r\n        node.left = node.right\r\n        node.right = tmp;\r\n        invertTree(node.left);\r\n        invertTree(node.right);\r\n    }\r\n\r\nAlternatively you can actually create a new tree and then you do not need to worry about the `tmp` part but you would need quite a few `new TreeNode` statements at the right places, then you must not use a node in both the original and the new tree.","title":"Inverse A Tree LeetCode","body":"<p><code>newTree = root</code> means that if you now change <code>newTree.left</code> you change <code>root.left</code> as well, you do not have an actual new tree, you just manipulate one tree in place. If you want to do that you must be careful not to overwrite stuff that you need later on. If you want to swap two numbers you cannot write <code>a=b; b=a;</code> since at the second assignment <code>a</code> would have already been changed. But you do just that with <code>left</code> and <code>right</code>.<br />\nBasically you should write:</p>\n<pre><code>public void invertTree(TreeNode node) {\n   if (node == null)\n       return; \n    TreeNode tmp = node.left;\n    node.left = node.right\n    node.right = tmp;\n    invertTree(node.left);\n    invertTree(node.right);\n}\n</code></pre>\n<p>Alternatively you can actually create a new tree and then you do not need to worry about the <code>tmp</code> part but you would need quite a few <code>new TreeNode</code> statements at the right places, then you must not use a node in both the original and the new tree.</p>\n"},{"tags":[],"owner":{"account_id":27810006,"reputation":1,"user_id":21232579,"display_name":"Sumit Balani"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1676700053,"creation_date":1676700053,"answer_id":75491498,"question_id":64042143,"body_markdown":"Heres my solution from leetcode. Its a simple recursion problem with a postorder traversal. Soln is 0(n) and it ranks top 1% in runtime and top 3% in memory on leetcode\r\n\r\n```\r\n/**\r\n * Definition for a binary tree node.\r\n * public class TreeNode {\r\n *     int val;\r\n *     TreeNode left;\r\n *     TreeNode right;\r\n *     TreeNode() {}\r\n *     TreeNode(int val) { this.val = val; }\r\n *     TreeNode(int val, TreeNode left, TreeNode right) {\r\n *         this.val = val;\r\n *         this.left = left;\r\n *         this.right = right;\r\n *     }\r\n * }\r\n */\r\n //recursion problem, swap every left with the right node in postorder \r\nclass Solution {\r\n    public TreeNode invertTree(TreeNode root) {\r\n        if (root == null) return null;\r\n        if(root.left == null &amp;&amp; root.right == null) {\r\n            return root;\r\n        }\r\n        invertTree(root.left);\r\n        invertTree(root.right);\r\n        TreeNode temp = root.left;\r\n        root.left = root.right;\r\n        root.right = temp;\r\n        return root;\r\n    }\r\n}","title":"Inverse A Tree LeetCode","body":"<p>Heres my solution from leetcode. Its a simple recursion problem with a postorder traversal. Soln is 0(n) and it ranks top 1% in runtime and top 3% in memory on leetcode</p>\n<pre><code>/**\n * Definition for a binary tree node.\n * public class TreeNode {\n *     int val;\n *     TreeNode left;\n *     TreeNode right;\n *     TreeNode() {}\n *     TreeNode(int val) { this.val = val; }\n *     TreeNode(int val, TreeNode left, TreeNode right) {\n *         this.val = val;\n *         this.left = left;\n *         this.right = right;\n *     }\n * }\n */\n //recursion problem, swap every left with the right node in postorder \nclass Solution {\n    public TreeNode invertTree(TreeNode root) {\n        if (root == null) return null;\n        if(root.left == null &amp;&amp; root.right == null) {\n            return root;\n        }\n        invertTree(root.left);\n        invertTree(root.right);\n        TreeNode temp = root.left;\n        root.left = root.right;\n        root.right = temp;\n        return root;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":14428029,"reputation":37,"user_id":11178048,"display_name":"Av&#233;-Maria Nlandou"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":64042341,"answer_count":2,"score":2,"last_activity_date":1676700053,"creation_date":1600935063,"question_id":64042143,"body_markdown":"So I am working on a problem on LeetCode where I must invert a binary tree. \r\n\r\nProblem: \r\n\r\n[![image of the problem][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5uDYe.png\r\n\r\nand here&#39;s my solution: \r\n```\r\nclass Solution {\r\n    public TreeNode invertTree(TreeNode root) {\r\n        TreeNode newTree = root;\r\n        return invertTreeHelper(root, newTree);\r\n    }\r\n\r\n    public TreeNode invertTreeHelper(TreeNode root, TreeNode newTree)\r\n    {\r\n       if(root == null)\r\n           return null; \r\n        \r\n       newTree.val = root.val;         \r\n       newTree.left = invertTreeHelper(root.right, newTree.left); \r\n       newTree.right = invertTreeHelper(root.left, newTree.right); \r\n       return newTree; \r\n    }\r\n}\r\n```\r\nThe given input is:\r\n\r\n    [4,2,7,1,3,6,9]\r\n\r\nMy expected output is:\r\n\r\n    [4,7,2,9,6,3,1]\r\n\r\nHowever, my output is: \r\n\r\n    [4,7,7,9,6,6,9]\r\n \r\nSo clearly, my output does not work for the left side of the tree. I want to know where I went wrong. Is anyone please able to help me with this? \r\n","title":"Inverse A Tree LeetCode","body":"<p>So I am working on a problem on LeetCode where I must invert a binary tree.</p>\n<p>Problem:</p>\n<p><a href=\"https://i.stack.imgur.com/5uDYe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5uDYe.png\" alt=\"image of the problem\" /></a></p>\n<p>and here's my solution:</p>\n<pre><code>class Solution {\n    public TreeNode invertTree(TreeNode root) {\n        TreeNode newTree = root;\n        return invertTreeHelper(root, newTree);\n    }\n\n    public TreeNode invertTreeHelper(TreeNode root, TreeNode newTree)\n    {\n       if(root == null)\n           return null; \n        \n       newTree.val = root.val;         \n       newTree.left = invertTreeHelper(root.right, newTree.left); \n       newTree.right = invertTreeHelper(root.left, newTree.right); \n       return newTree; \n    }\n}\n</code></pre>\n<p>The given input is:</p>\n<pre><code>[4,2,7,1,3,6,9]\n</code></pre>\n<p>My expected output is:</p>\n<pre><code>[4,7,2,9,6,3,1]\n</code></pre>\n<p>However, my output is:</p>\n<pre><code>[4,7,7,9,6,6,9]\n</code></pre>\n<p>So clearly, my output does not work for the left side of the tree. I want to know where I went wrong. Is anyone please able to help me with this?</p>\n"},{"tags":["java","android","react-native","kotlin","gradle"],"answers":[{"tags":[],"owner":{"display_name":"user18899735"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1664766749,"creation_date":1664766749,"answer_id":73930787,"question_id":73912390,"body_markdown":"Apparently, the current version of expo-modules are incompatible with the latest version of React Native (0.70.0) and how it compiles Android Builds. I downgraded react-native to 0.69.5. This ultimately led **me** to other issues but hopefully this can help somebody else.","title":"The Android Gradle plugin supports only kotlin-android-extensions Gradle plugin version 1.6.20 and higher","body":"<p>Apparently, the current version of expo-modules are incompatible with the latest version of React Native (0.70.0) and how it compiles Android Builds. I downgraded react-native to 0.69.5. This ultimately led <strong>me</strong> to other issues but hopefully this can help somebody else.</p>\n"}],"owner":{"display_name":"user18899735"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2689,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73930787,"answer_count":1,"score":2,"last_activity_date":1676698706,"creation_date":1664560726,"question_id":73912390,"body_markdown":"I am trying tog get my React Native app (with expo modules, but not built on expo) deployed to the Google Play Store, and I keep getting this error when I try to build...\r\n```\r\nThe Android Gradle plugin supports only kotlin-android-extensions Gradle plugin version 1.6.20 and higher.\r\nThe following dependencies do not satisfy the required version:\r\nproject &#39;:expo&#39; -&gt; org.jetbrains.kotlin:kotlin-gradle-plugin:1.6.10\r\n```\r\n\r\nMy issue us, the line that it seems to be referencing, `project &#39;:expo&#39; -&gt; org.jetbrains.kotlin:kotlin-gradle-plugin:1.6.10` doesn&#39;t exist anywhere in my code, maybe in the node modules but I have no way of knowing. \r\nI have absolutely no idea what kotlin is and never heard of it before this. I tried looking around for where to upgrade by kotlin-gradle-plugin, but thats nowhere in my app.json or package.json or any other config files. I saw some message boards with similar issues telling me to change this line inside of build.gradle \r\n```\r\nclasspath(&#39;com.android.tools.build:gradle:7.3.0&#39;)\r\n```\r\nto make `7.3.0` match the version I need, but I firmly believe 7.3.0 is greater than 1.6.20, so I highly doubt that solution has any actual merits","title":"The Android Gradle plugin supports only kotlin-android-extensions Gradle plugin version 1.6.20 and higher","body":"<p>I am trying tog get my React Native app (with expo modules, but not built on expo) deployed to the Google Play Store, and I keep getting this error when I try to build...</p>\n<pre><code>The Android Gradle plugin supports only kotlin-android-extensions Gradle plugin version 1.6.20 and higher.\nThe following dependencies do not satisfy the required version:\nproject ':expo' -&gt; org.jetbrains.kotlin:kotlin-gradle-plugin:1.6.10\n</code></pre>\n<p>My issue us, the line that it seems to be referencing, <code>project ':expo' -&gt; org.jetbrains.kotlin:kotlin-gradle-plugin:1.6.10</code> doesn't exist anywhere in my code, maybe in the node modules but I have no way of knowing.\nI have absolutely no idea what kotlin is and never heard of it before this. I tried looking around for where to upgrade by kotlin-gradle-plugin, but thats nowhere in my app.json or package.json or any other config files. I saw some message boards with similar issues telling me to change this line inside of build.gradle</p>\n<pre><code>classpath('com.android.tools.build:gradle:7.3.0')\n</code></pre>\n<p>to make <code>7.3.0</code> match the version I need, but I firmly believe 7.3.0 is greater than 1.6.20, so I highly doubt that solution has any actual merits</p>\n"},{"tags":["java","android","calendarview"],"owner":{"account_id":16114085,"reputation":563,"user_id":13452141,"display_name":"JP711"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676697534,"creation_date":1676689409,"question_id":75490919,"body_markdown":"I am using CalendarView, I enable a range of dates but the date closest to the current day is always selected. I don&#39;t want any date selected, is it possible to disable date selection? In other words I don&#39;t want any date highlighted\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThis is what I have: Currently it is February 17 and when I enable the range from 22 to 28 it selects me 22\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8a4vb.jpg","title":"I need to disable date selection from CalendarView in Android","body":"<p>I am using CalendarView, I enable a range of dates but the date closest to the current day is always selected. I don't want any date selected, is it possible to disable date selection? In other words I don't want any date highlighted</p>\n<p><a href=\"https://i.stack.imgur.com/8a4vb.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8a4vb.jpg\" alt=\"enter image description here\" /></a></p>\n<p>This is what I have: Currently it is February 17 and when I enable the range from 22 to 28 it selects me 22</p>\n"},{"tags":["java","dependencies","repository","maven-3"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1676696706,"post_id":75491065,"comment_id":133194263,"body_markdown":"boot 2.3 was released back in 2020. Why trying to use a release-candidate? Why using such an old version at all?","body":"boot 2.3 was released back in 2020. Why trying to use a release-candidate? Why using such an old version at all?"},{"owner":{"account_id":208136,"reputation":850,"user_id":458437,"accept_rate":75,"display_name":"oortcloud_domicile"},"score":0,"creation_date":1676713335,"post_id":75491065,"comment_id":133195849,"body_markdown":"yes i just noticed, i downloaded a reactive project from online and working through it for my own project. thank you","body":"yes i just noticed, i downloaded a reactive project from online and working through it for my own project. thank you"}],"answers":[{"comments":[{"owner":{"account_id":208136,"reputation":850,"user_id":458437,"accept_rate":75,"display_name":"oortcloud_domicile"},"score":0,"creation_date":1676713115,"post_id":75491333,"comment_id":133195824,"body_markdown":"i used java for 10 years and always thought having https://repo.maven.apache.org/maven2 in the repository section is enough, i learn new things every day or never learned a thing in 10 years :)","body":"i used java for 10 years and always thought having <a href=\"https://repo.maven.apache.org/maven2\" rel=\"nofollow noreferrer\">repo.maven.apache.org/maven2</a> in the repository section is enough, i learn new things every day or never learned a thing in 10 years :)"}],"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676696978,"creation_date":1676696978,"answer_id":75491333,"question_id":75491065,"body_markdown":"If you are trying to pull a dependency (not a plugin), define an entry in `repositories` (not `pluginRepositories`). That easy.\r\n```xml\r\n\t&lt;repositories&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;spring-snapshots&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t\t&lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t\t&lt;releases&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t\t&lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\r\n\t\t\t&lt;/releases&gt;\r\n\t\t&lt;/repository&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Milestones&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t\t&lt;releases&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t&lt;/releases&gt;\r\n\t\t&lt;/repository&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;repository.spring.release&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring GA Repository&lt;/name&gt;\r\n\t\t\t&lt;url&gt;http://repo.spring.io/release&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t\t&lt;releases&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t\t&lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\r\n\t\t\t&lt;/releases&gt;\r\n\t\t&lt;/repository&gt;\r\n\t&lt;/repositories&gt;\r\n\t&lt;pluginRepositories&gt;\r\n\t\t&lt;pluginRepository&gt;\r\n\t\t\t&lt;id&gt;spring-snapshots&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/plugins-snapshot&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t\t&lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t\t&lt;releases&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t\t&lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\r\n\t\t\t&lt;/releases&gt;\r\n\t\t&lt;/pluginRepository&gt;\r\n\t\t&lt;pluginRepository&gt;\r\n\t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Milestones&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/plugins-milestone&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t\t&lt;releases&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t&lt;/releases&gt;\r\n\t\t&lt;/pluginRepository&gt;\r\n\t\t&lt;pluginRepository&gt;\r\n\t\t\t&lt;id&gt;repository.spring.release&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring GA Repository&lt;/name&gt;\r\n\t\t\t&lt;url&gt;http://repo.spring.io/plugins-release&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t\t&lt;releases&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t\t&lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\r\n\t\t\t&lt;/releases&gt;\r\n\t\t&lt;/pluginRepository&gt;\r\n\t&lt;/pluginRepositories&gt;\r\n```","title":"unabel to resolve dependencies using maven","body":"<p>If you are trying to pull a dependency (not a plugin), define an entry in <code>repositories</code> (not <code>pluginRepositories</code>). That easy.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\n            &lt;/snapshots&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\n            &lt;/releases&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/releases&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;repository.spring.release&lt;/id&gt;\n            &lt;name&gt;Spring GA Repository&lt;/name&gt;\n            &lt;url&gt;http://repo.spring.io/release&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\n            &lt;/releases&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/plugins-snapshot&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\n            &lt;/snapshots&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\n            &lt;/releases&gt;\n        &lt;/pluginRepository&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/plugins-milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/releases&gt;\n        &lt;/pluginRepository&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;repository.spring.release&lt;/id&gt;\n            &lt;name&gt;Spring GA Repository&lt;/name&gt;\n            &lt;url&gt;http://repo.spring.io/plugins-release&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;\n            &lt;/releases&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n</code></pre>\n"}],"owner":{"account_id":208136,"reputation":850,"user_id":458437,"accept_rate":75,"display_name":"oortcloud_domicile"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75491333,"answer_count":1,"score":0,"last_activity_date":1676696978,"creation_date":1676692406,"question_id":75491065,"body_markdown":"I am running maven 3.8.9 and this is what i have in pom.xml\r\n\r\n     &lt;repositories&gt;\r\n            &lt;repository&gt;\r\n                &lt;id&gt;central&lt;/id&gt;\r\n                &lt;name&gt;Maven Repository Switchboard&lt;/name&gt;\r\n                &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;\r\n            &lt;/repository&gt;\r\n        &lt;/repositories&gt;\r\n        &lt;pluginRepositories&gt;\r\n            &lt;pluginRepository&gt;\r\n                &lt;id&gt;spring-milestones&lt;/id&gt;\r\n                &lt;name&gt;Spring Milestones&lt;/name&gt;\r\n                &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n            &lt;/pluginRepository&gt;\r\n        &lt;/pluginRepositories&gt;\r\n\r\n\r\nThis is what i have in settings.xml\r\n\r\n       &lt;mirror&gt;\r\n          &lt;id&gt;maven-default-http-blocker&lt;/id&gt;\r\n          &lt;mirrorOf&gt;external:http:*&lt;/mirrorOf&gt;\r\n          &lt;name&gt;Pseudo repository to mirror external repositories initially using HTTP.&lt;/name&gt;\r\n          &lt;url&gt;http://0.0.0.0/&lt;/url&gt;\r\n          &lt;blocked&gt;true&lt;/blocked&gt;\r\n        &lt;/mirror&gt;\r\n\r\nI get Below error not sure what i am missing\r\n\r\n            Failed to collect dependencies at org.springframework.boot:spring-boot-starter-oauth2-client:jar:2.3.0.RC1\r\n         -&gt; org.springframework.security:spring-security-oauth2-client:jar:5.3.1.RELEASE \r\n    -&gt; com.nimbusds:oauth2-oidc-sdk:jar:7.1.1 -&gt; com.nimbusds:nimbus-jose-jwt:jar:8.8\r\n     -&gt; net.minidev:json-smart:jar:[1.3.1,2.3]: No versions available for net.minidev:json-smart:jar:[1.3.1,2.3] within specified range -&gt; [Help 1]\r\n\r\n","title":"unabel to resolve dependencies using maven","body":"<p>I am running maven 3.8.9 and this is what i have in pom.xml</p>\n<pre><code> &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;central&lt;/id&gt;\n            &lt;name&gt;Maven Repository Switchboard&lt;/name&gt;\n            &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n</code></pre>\n<p>This is what i have in settings.xml</p>\n<pre><code>   &lt;mirror&gt;\n      &lt;id&gt;maven-default-http-blocker&lt;/id&gt;\n      &lt;mirrorOf&gt;external:http:*&lt;/mirrorOf&gt;\n      &lt;name&gt;Pseudo repository to mirror external repositories initially using HTTP.&lt;/name&gt;\n      &lt;url&gt;http://0.0.0.0/&lt;/url&gt;\n      &lt;blocked&gt;true&lt;/blocked&gt;\n    &lt;/mirror&gt;\n</code></pre>\n<p>I get Below error not sure what i am missing</p>\n<pre><code>        Failed to collect dependencies at org.springframework.boot:spring-boot-starter-oauth2-client:jar:2.3.0.RC1\n     -&gt; org.springframework.security:spring-security-oauth2-client:jar:5.3.1.RELEASE \n-&gt; com.nimbusds:oauth2-oidc-sdk:jar:7.1.1 -&gt; com.nimbusds:nimbus-jose-jwt:jar:8.8\n -&gt; net.minidev:json-smart:jar:[1.3.1,2.3]: No versions available for net.minidev:json-smart:jar:[1.3.1,2.3] within specified range -&gt; [Help 1]\n</code></pre>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1676663146,"post_id":75488497,"comment_id":133189841,"body_markdown":"You might be able to inject a reference to the JPA `EntityManager` and call `flush()` on it in between saving the two entities. I&#39;m not positive that will resolve the identity conflict, but it might.","body":"You might be able to inject a reference to the JPA <code>EntityManager</code> and call <code>flush()</code> on it in between saving the two entities. I&#39;m not positive that will resolve the identity conflict, but it might."},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1676663667,"post_id":75488497,"comment_id":133189983,"body_markdown":"@Andrei, what DB are you on? would you mind providing corresponding table DDL?","body":"@Andrei, what DB are you on? would you mind providing corresponding table DDL?"},{"owner":{"account_id":2991960,"reputation":51,"user_id":2539361,"display_name":"Andrei"},"score":0,"creation_date":1676664026,"post_id":75488497,"comment_id":133190069,"body_markdown":"Injecting EntityManager and flush() doesn&#39;t help. Database will generate new ID&#39;s only on transaction end. I use the MSSQL.","body":"Injecting EntityManager and flush() doesn&#39;t help. Database will generate new ID&#39;s only on transaction end. I use the MSSQL."},{"owner":{"account_id":2991960,"reputation":51,"user_id":2539361,"display_name":"Andrei"},"score":0,"creation_date":1676664367,"post_id":75488497,"comment_id":133190173,"body_markdown":"CREATE TABLE [dbo].[Customer]\n(\n    [id] [int] IDENTITY (1,1) NOT NULL,\n    ...\n    CONSTRAINT  [PK_Customer] PRIMARY KEY CLUSTERED ([id] ASC) \n        WITH (PAD_INDEX = OFF\n                , STATISTICS_NORECOMPUTE = OFF\n                , IGNORE_DUP_KEY = OFF\n                , ALLOW_ROW_LOCKS = ON\n                , ALLOW_PAGE_LOCKS = ON\n                , OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [DATA]\n)","body":"CREATE TABLE [dbo].[Customer] (     [id] [int] IDENTITY (1,1) NOT NULL,     ...     CONSTRAINT  [PK_Customer] PRIMARY KEY CLUSTERED ([id] ASC)          WITH (PAD_INDEX = OFF                 , STATISTICS_NORECOMPUTE = OFF                 , IGNORE_DUP_KEY = OFF                 , ALLOW_ROW_LOCKS = ON                 , ALLOW_PAGE_LOCKS = ON                 , OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [DATA] )"},{"owner":{"account_id":13737609,"reputation":50,"user_id":12114118,"display_name":"Vikram"},"score":0,"creation_date":1676665666,"post_id":75488497,"comment_id":133190471,"body_markdown":"This might be the answer for your question, it basically discard the possibility what you want to achieve https://stackoverflow.com/questions/27697810/why-does-hibernate-disable-insert-batching-when-using-an-identity-identifier-gen","body":"This might be the answer for your question, it basically discard the possibility what you want to achieve <a href=\"https://stackoverflow.com/questions/27697810/why-does-hibernate-disable-insert-batching-when-using-an-identity-identifier-gen\" title=\"why does hibernate disable insert batching when using an identity identifier gen\">stackoverflow.com/questions/27697810/&hellip;</a>"},{"owner":{"account_id":2991960,"reputation":51,"user_id":2539361,"display_name":"Andrei"},"score":0,"creation_date":1676666478,"post_id":75488497,"comment_id":133190630,"body_markdown":"@Vikram, thanks, But in the statement log I can see the insert, so insert not batched. But the zero identifier is returned from DB and I got an exception. Maybe I have to tune something in application.properties?","body":"@Vikram, thanks, But in the statement log I can see the insert, so insert not batched. But the zero identifier is returned from DB and I got an exception. Maybe I have to tune something in application.properties?"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1676667176,"post_id":75488497,"comment_id":133190787,"body_markdown":"The database should not be generating new IDs only when the transaction ends - it must generate IDs after each insert statement, and your JPA provider will have to check with the database after each insert statement to determine what that ID was: a huge performance weakness of identity when compared to sequences or other strategies that allow pre-allocation. But it does work; if you are getting 0 or other issues, show the exception and SQL logged too. I&#39;m not a DBA who understands the settings you&#39;ve used on your table, but try simplifying it","body":"The database should not be generating new IDs only when the transaction ends - it must generate IDs after each insert statement, and your JPA provider will have to check with the database after each insert statement to determine what that ID was: a huge performance weakness of identity when compared to sequences or other strategies that allow pre-allocation. But it does work; if you are getting 0 or other issues, show the exception and SQL logged too. I&#39;m not a DBA who understands the settings you&#39;ve used on your table, but try simplifying it"},{"owner":{"account_id":13737609,"reputation":50,"user_id":12114118,"display_name":"Vikram"},"score":0,"creation_date":1676667333,"post_id":75488497,"comment_id":133190820,"body_markdown":"@Andrei did you try removing Transactional annotation from your brokenCode method? i think it should work, since save method is also Transactional method and default propagation for Transactional is REQUIRED which mean same transaction (declared by brokenCode method ) will be used for two consecutive save method calls, let me know if it works","body":"@Andrei did you try removing Transactional annotation from your brokenCode method? i think it should work, since save method is also Transactional method and default propagation for Transactional is REQUIRED which mean same transaction (declared by brokenCode method ) will be used for two consecutive save method calls, let me know if it works"},{"owner":{"account_id":2991960,"reputation":51,"user_id":2539361,"display_name":"Andrei"},"score":0,"creation_date":1676668090,"post_id":75488497,"comment_id":133190974,"body_markdown":"Seems like my problem in one concrete table, guys, need time to research more. Thanks you all, especially @Vikram. Love you! Tomorrow i will write the update for this topic!","body":"Seems like my problem in one concrete table, guys, need time to research more. Thanks you all, especially @Vikram. Love you! Tomorrow i will write the update for this topic!"},{"owner":{"account_id":2991960,"reputation":51,"user_id":2539361,"display_name":"Andrei"},"score":0,"creation_date":1676693523,"post_id":75488497,"comment_id":133193978,"body_markdown":"updated, the reason is - trigger","body":"updated, the reason is - trigger"}],"owner":{"account_id":2991960,"reputation":51,"user_id":2539361,"display_name":"Andrei"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676693472,"creation_date":1676661886,"question_id":75488497,"body_markdown":"Is it possible to use GenerationType.IDENTITY with Transaction in Hibernate/Spring data?\r\n\r\nI have an existing database, with an identity column in all tables. So, I have to use GenerationType.IDENTITY for it. But, when I create a new entity instance and change its state to managed with someRepository.save(...) method, the persistence provider can&#39;t acquire a new ID for that entity, because it must happen on flush time, at the end of the transaction.\r\n\r\nIf I create one entity, all works as expected. After save(), the entity goes to the managed state, the id is changed from NULL to 0 (zero), and at the flush time, the new ID for the row is generated by the database.\r\n\r\nBut what if we create two instances of the same entity class inside one transaction? The exception will be thrown, and this is justly because we have two different objects with same ID = 0. So, is there a way to deal with it without change strategy from IDENTITY to something else?\r\n\r\n    @Entity\r\n    public class Customer {\r\n        @Id \r\n        @GeneratedValue(strategy=GenerationType.IDENTITY)\r\n        Long id;\r\n        ...\r\n    }\r\n\r\n    @Transactional\r\n    public void brokenCode() {\r\n        Customer one = new Customer();\r\n        Customer two = new Customer();\r\n        someRepository.save(one);\r\n        someRepository.save(two); &lt;--- org.springframework.dao.DataIntegrityViolationException: A different object with the same identifier value was already associated with the session\r\n   \r\n    }\r\n\r\n    CREATE TABLE [dbo].[Customer] \r\n    (\r\n        [id] [int] IDENTITY (1,1) NOT NULL,\r\n        ...\r\n        CONSTRAINT  [PK_Customer] PRIMARY KEY CLUSTERED ([id] ASC) \r\n            WITH (PAD_INDEX = OFF\r\n                    , STATISTICS_NORECOMPUTE = OFF\r\n                    , IGNORE_DUP_KEY = OFF\r\n                    , ALLOW_ROW_LOCKS = ON\r\n                    , ALLOW_PAGE_LOCKS = ON\r\n                    , OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [DATA]\r\n    )\r\n\r\n\r\n**UPD!**\r\n\r\nThe reason is the table has &quot;trigger instead of insert&quot;. In that trigger some fields are calculated based on other fields. And the identity doesn&#39;t return to Hibernate.\r\n\r\n    ALTER trigger [dbo].[Customer] on [dbo].[Customer]\r\n    instead of insert\r\n    as\r\n    if @@rowcount = 0 return\r\n\r\n    set nocount on\r\n    Set dateformat dmy\r\n\r\n    Insert into dbo.Customer\r\n    (f1, f2, ....)\r\n    Select \r\n           I.f1,\r\n           isnull(f2,newid()),\r\n           ...\r\n    from Inserted I\r\n\r\nSo. Is there a way to somehow return identity to Hibernate from that trigger?\r\n\r\nThanks in advance!\r\n","title":"GenerationType.IDENTITY with transaction","body":"<p>Is it possible to use GenerationType.IDENTITY with Transaction in Hibernate/Spring data?</p>\n<p>I have an existing database, with an identity column in all tables. So, I have to use GenerationType.IDENTITY for it. But, when I create a new entity instance and change its state to managed with someRepository.save(...) method, the persistence provider can't acquire a new ID for that entity, because it must happen on flush time, at the end of the transaction.</p>\n<p>If I create one entity, all works as expected. After save(), the entity goes to the managed state, the id is changed from NULL to 0 (zero), and at the flush time, the new ID for the row is generated by the database.</p>\n<p>But what if we create two instances of the same entity class inside one transaction? The exception will be thrown, and this is justly because we have two different objects with same ID = 0. So, is there a way to deal with it without change strategy from IDENTITY to something else?</p>\n<pre><code>@Entity\npublic class Customer {\n    @Id \n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    Long id;\n    ...\n}\n\n@Transactional\npublic void brokenCode() {\n    Customer one = new Customer();\n    Customer two = new Customer();\n    someRepository.save(one);\n    someRepository.save(two); &lt;--- org.springframework.dao.DataIntegrityViolationException: A different object with the same identifier value was already associated with the session\n\n}\n\nCREATE TABLE [dbo].[Customer] \n(\n    [id] [int] IDENTITY (1,1) NOT NULL,\n    ...\n    CONSTRAINT  [PK_Customer] PRIMARY KEY CLUSTERED ([id] ASC) \n        WITH (PAD_INDEX = OFF\n                , STATISTICS_NORECOMPUTE = OFF\n                , IGNORE_DUP_KEY = OFF\n                , ALLOW_ROW_LOCKS = ON\n                , ALLOW_PAGE_LOCKS = ON\n                , OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [DATA]\n)\n</code></pre>\n<p><strong>UPD!</strong></p>\n<p>The reason is the table has &quot;trigger instead of insert&quot;. In that trigger some fields are calculated based on other fields. And the identity doesn't return to Hibernate.</p>\n<pre><code>ALTER trigger [dbo].[Customer] on [dbo].[Customer]\ninstead of insert\nas\nif @@rowcount = 0 return\n\nset nocount on\nSet dateformat dmy\n\nInsert into dbo.Customer\n(f1, f2, ....)\nSelect \n       I.f1,\n       isnull(f2,newid()),\n       ...\nfrom Inserted I\n</code></pre>\n<p>So. Is there a way to somehow return identity to Hibernate from that trigger?</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","android"],"owner":{"account_id":27816469,"reputation":11,"user_id":21237750,"display_name":"developer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1676692220,"creation_date":1676692142,"question_id":75491054,"body_markdown":"    E/dalvikvm: Could not find class &#39;android.view.WindowInsets&#39;, referenced from method androidx.core.view.WindowInsetsCompat.toWindowInsetsCompat\r\n    E/dalvikvm: Could not find class &#39;android.os.LocaleList&#39;, referenced from method androidx.core.os.LocaleListCompat.wrap\r\n\r\ni want to socket connect and sendmsg in android java \r\n\r\n\r\n\r\nthis is error name what can i do?\r\n","title":"How to android java socket connect?","body":"<pre><code>E/dalvikvm: Could not find class 'android.view.WindowInsets', referenced from method androidx.core.view.WindowInsetsCompat.toWindowInsetsCompat\nE/dalvikvm: Could not find class 'android.os.LocaleList', referenced from method androidx.core.os.LocaleListCompat.wrap\n</code></pre>\n<p>i want to socket connect and sendmsg in android java</p>\n<p>this is error name what can i do?</p>\n"},{"tags":["java","android","kotlin","base64"],"owner":{"account_id":27816269,"reputation":11,"user_id":21237593,"display_name":"Loonk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1676691940,"creation_date":1676691940,"question_id":75491040,"body_markdown":"I can&#39;t convert picture taken to readable base64, while starts the same as online converters, it&#39;s shorter and about half-way through becomes different.\r\n\r\n\r\nCode\r\n```\r\nimageReader = ImageReader.newInstance(600,600, ImageFormat.JPEG, 1)\r\n        //Was switched to lambda\r\n        //imageReader.setOnImageAvailableListener(object: ImageReader.OnImageAvailableListener{\r\n        //            override fun onImageAvailable(reader: ImageReader?) {\r\n        imageReader.setOnImageAvailableListener({ reader -&gt;\r\n            val image = reader?.acquireLatestImage()\r\n\r\n            val buffer = image!!.planes[0].buffer\r\n            val bytes = ByteArray(buffer.remaining())\r\n            buffer.get(bytes)\r\n\r\n            var file = File(requireActivity().getExternalFilesDir(Environment.DIRECTORY_PICTURES),&quot;img.jpeg&quot;)\r\n            var output = FileOutputStream(file)\r\n            output.write(bytes)\r\n            output.close()\r\n            image.close()\r\n            val encodedString: String = Base64.encodeToString(bytes, Base64.DEFAULT);\r\n            println(encodedString)\r\n\r\n            pictures.add(encodedString)\r\n\r\n            val sound = MediaActionSound()\r\n            sound.play(MediaActionSound.SHUTTER_CLICK)\r\n        }, handler)\r\n```\r\n","title":"Can&#39;t convert ByteArray from Camera2 to Base64","body":"<p>I can't convert picture taken to readable base64, while starts the same as online converters, it's shorter and about half-way through becomes different.</p>\n<p>Code</p>\n<pre><code>imageReader = ImageReader.newInstance(600,600, ImageFormat.JPEG, 1)\n        //Was switched to lambda\n        //imageReader.setOnImageAvailableListener(object: ImageReader.OnImageAvailableListener{\n        //            override fun onImageAvailable(reader: ImageReader?) {\n        imageReader.setOnImageAvailableListener({ reader -&gt;\n            val image = reader?.acquireLatestImage()\n\n            val buffer = image!!.planes[0].buffer\n            val bytes = ByteArray(buffer.remaining())\n            buffer.get(bytes)\n\n            var file = File(requireActivity().getExternalFilesDir(Environment.DIRECTORY_PICTURES),&quot;img.jpeg&quot;)\n            var output = FileOutputStream(file)\n            output.write(bytes)\n            output.close()\n            image.close()\n            val encodedString: String = Base64.encodeToString(bytes, Base64.DEFAULT);\n            println(encodedString)\n\n            pictures.add(encodedString)\n\n            val sound = MediaActionSound()\n            sound.play(MediaActionSound.SHUTTER_CLICK)\n        }, handler)\n</code></pre>\n"},{"tags":["java","loops","break"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1676680711,"post_id":75490336,"comment_id":133192974,"body_markdown":"You need to use curly braces around a multi-line if statement in Java. Indentation is not significant. This code will unconditionally break at the end of the first iteration.","body":"You need to use curly braces around a multi-line if statement in Java. Indentation is not significant. This code will unconditionally break at the end of the first iteration."}],"answers":[{"tags":[],"owner":{"account_id":9144834,"reputation":4430,"user_id":6801443,"display_name":"Sean F"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676681107,"creation_date":1676680766,"answer_id":75490421,"question_id":75490336,"body_markdown":"Yes, there is a way to tell if the loop ends up completing without finding the String being searched.\r\n```java\r\nString x = &quot;Hello&quot;;\r\nString searchForThis = &quot;e&quot;; // Something to search for\r\nint i = 0;\r\nfor (; i &lt; x.length(); i++) {\r\n  if (x.startsWith(searchForThis, i) {\r\n    System.out.println(&quot;I found it&quot;);\r\n    break;\r\n   }\r\n}\r\nif(i == x.length()) {\r\n   System.out.println(&quot;I couldn&#39;t find it&quot;);\r\n}\r\n```\r\nHowever, the search condition is all wrong, I changed it to make sense, but all you really need is no loop at all with a single call to &quot;contains&quot;.","title":"Java, detect whether loop stopped because of an unmet condition or break","body":"<p>Yes, there is a way to tell if the loop ends up completing without finding the String being searched.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String x = &quot;Hello&quot;;\nString searchForThis = &quot;e&quot;; // Something to search for\nint i = 0;\nfor (; i &lt; x.length(); i++) {\n  if (x.startsWith(searchForThis, i) {\n    System.out.println(&quot;I found it&quot;);\n    break;\n   }\n}\nif(i == x.length()) {\n   System.out.println(&quot;I couldn't find it&quot;);\n}\n</code></pre>\n<p>However, the search condition is all wrong, I changed it to make sense, but all you really need is no loop at all with a single call to &quot;contains&quot;.</p>\n"},{"tags":[],"owner":{"account_id":4433743,"reputation":2585,"user_id":3610183,"accept_rate":87,"display_name":"rainman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676691669,"creation_date":1676691669,"answer_id":75491023,"question_id":75490336,"body_markdown":"I would add a boolean and initialize it to false, and change it to true only if the \r\n\r\n    searchForThis \r\nis found.\r\n\r\nSomething like this:\r\n\r\n    String x = &quot;Hello&quot;;\r\n    \t\tString searchForThis = &quot;i&quot;; // Something to search for\r\n    \t\tboolean found = false;\r\n    \t\tfor (int i = 0; i &lt; x.length(); i++) {\r\n    \t\t\tif (x.contains(searchForThis)) {\r\n    \t\t\t\tSystem.out.println(&quot;I found it&quot;);\r\n    \t\t\t\tfound = true;\r\n    \t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tif (found) {\r\n    \t\t\t// Do something\r\n\r\n    \t\t}\r\n    \r\n    \t\telse {\r\n              //Do something else\r\n    \t\t}","title":"Java, detect whether loop stopped because of an unmet condition or break","body":"<p>I would add a boolean and initialize it to false, and change it to true only if the</p>\n<pre><code>searchForThis \n</code></pre>\n<p>is found.</p>\n<p>Something like this:</p>\n<pre><code>String x = &quot;Hello&quot;;\n        String searchForThis = &quot;i&quot;; // Something to search for\n        boolean found = false;\n        for (int i = 0; i &lt; x.length(); i++) {\n            if (x.contains(searchForThis)) {\n                System.out.println(&quot;I found it&quot;);\n                found = true;\n                break;\n            }\n        }\n\n        if (found) {\n            // Do something\n\n        }\n\n        else {\n          //Do something else\n        }\n</code></pre>\n"}],"owner":{"account_id":27660478,"reputation":1,"user_id":21113418,"display_name":"AlxV05"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1676691669,"creation_date":1676679621,"question_id":75490336,"body_markdown":"I have a `for` loop that iterates through a `String`, `x`, that if `x` contains a specified `String`. If `x` does contain that `String`, the loop will `break`. It looks something like this:\r\n```\r\nString x = &quot;Hello&quot;;\r\nString searchForThis = &quot;e&quot;; // Something to search for\r\nfor (int i = 0; i &lt; x.length(); i++) {\r\n  if (x.contains(searchForThis)\r\n    System.out.println(&quot;I found it&quot;);\r\n    break;\r\n}\r\n```\r\nNow, what I want to do is if the loop ends up completing without finding the `String` to search for, it prints out that the `String` was not found.\r\n\r\nI came up with this solution; to check if the loop was iterating for the last time (`i+1 == x.length()`), but it seemed a bit inefficient to me.\r\n```\r\nfor (int i = 0; i &lt; x.length(); i++) {\r\n  if (i+1 == x.length() &amp;&amp; !x.contains(searchForThis))\r\n    System.out.println(&quot;I couldn&#39;t find it)&quot;;\r\n  else if (x.contains(searchForThis) {\r\n    System.out.println(&quot;I found it&quot;);\r\n    break;\r\n  }\r\n}\r\n```\r\nI was wondering if there was a way to tell, when a looped stopped, whether it had exited because its condition was no longer `true`, or if it had been stopped because of a `break`; maybe something like this:\r\n```\r\nif (loopStoppedDueToUnmetCondition)\r\n  // Do something\r\nelse if (loopStoppedDueToBreakStatement)\r\n  // Do something else\r\nelse\r\n  // Do yet another something\r\n```\r\nIf there isn&#39;t such as thing as this, then I would still greatly appreciate any suggestions on how I could &quot;better&quot; solve my problem mentioned above.\r\nThanks!","title":"Java, detect whether loop stopped because of an unmet condition or break","body":"<p>I have a <code>for</code> loop that iterates through a <code>String</code>, <code>x</code>, that if <code>x</code> contains a specified <code>String</code>. If <code>x</code> does contain that <code>String</code>, the loop will <code>break</code>. It looks something like this:</p>\n<pre><code>String x = &quot;Hello&quot;;\nString searchForThis = &quot;e&quot;; // Something to search for\nfor (int i = 0; i &lt; x.length(); i++) {\n  if (x.contains(searchForThis)\n    System.out.println(&quot;I found it&quot;);\n    break;\n}\n</code></pre>\n<p>Now, what I want to do is if the loop ends up completing without finding the <code>String</code> to search for, it prints out that the <code>String</code> was not found.</p>\n<p>I came up with this solution; to check if the loop was iterating for the last time (<code>i+1 == x.length()</code>), but it seemed a bit inefficient to me.</p>\n<pre><code>for (int i = 0; i &lt; x.length(); i++) {\n  if (i+1 == x.length() &amp;&amp; !x.contains(searchForThis))\n    System.out.println(&quot;I couldn't find it)&quot;;\n  else if (x.contains(searchForThis) {\n    System.out.println(&quot;I found it&quot;);\n    break;\n  }\n}\n</code></pre>\n<p>I was wondering if there was a way to tell, when a looped stopped, whether it had exited because its condition was no longer <code>true</code>, or if it had been stopped because of a <code>break</code>; maybe something like this:</p>\n<pre><code>if (loopStoppedDueToUnmetCondition)\n  // Do something\nelse if (loopStoppedDueToBreakStatement)\n  // Do something else\nelse\n  // Do yet another something\n</code></pre>\n<p>If there isn't such as thing as this, then I would still greatly appreciate any suggestions on how I could &quot;better&quot; solve my problem mentioned above.\nThanks!</p>\n"},{"tags":["java","android","security","payment","upi"],"owner":{"account_id":18118213,"reputation":1,"user_id":13174621,"display_name":"Ratnadeep Parya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":243,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676691287,"creation_date":1676691287,"question_id":75491007,"body_markdown":"UPI payment failed in PhonePe while testing my android application.\r\nThe error it is showing is - For security reasons, you are not allowed to send money from your bank account for this payment. You don&#39;t have to enter UPI PIN to receive money/cashback.\r\n\r\nMainActivity.java contains - \r\n\r\n```\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.net.ConnectivityManager;\r\nimport android.net.NetworkInfo;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private Button pay_btn;\r\n\r\n    final int UPI_PAYMENT = 0;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        pay_btn = (Button) findViewById(R.id.pay_btn);\r\n\r\n        pay_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                payUsingUpi(&quot;1&quot;,&quot;Test Payment&quot;,&quot;Ratnadeep Parya&quot;,&quot;parya.ratnadeep125@okaxis&quot;);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void payUsingUpi(String amounttxt, String notetxt, String nametxt, String upitxt) {\r\n\r\n        Uri uri = Uri.parse(&quot;upi://pay&quot;).buildUpon()\r\n                .appendQueryParameter(&quot;pa&quot;,upitxt)\r\n                .appendQueryParameter(&quot;pn&quot;,nametxt)\r\n                .appendQueryParameter(&quot;tn&quot;,notetxt)\r\n                .appendQueryParameter(&quot;am&quot;,amounttxt)\r\n                .appendQueryParameter(&quot;cu&quot;,&quot;INR&quot;)\r\n                .build();\r\n\r\n        Intent upi_payment = new Intent(Intent.ACTION_VIEW);\r\n        upi_payment.setData(uri);\r\n        Intent chooser = Intent.createChooser(upi_payment,&quot;Pay with&quot;);\r\n        if (null!=chooser.resolveActivity(getPackageManager())){\r\n            startActivityForResult(chooser,UPI_PAYMENT);\r\n        }\r\n        else {\r\n            Toast.makeText(this, &quot;No UPI app found!&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n\r\n        switch (requestCode){\r\n            case UPI_PAYMENT:\r\n                if ((RESULT_OK==resultCode|| (resultCode==11))){\r\n                    if (data!=null){\r\n                        String txt = data.getStringExtra(&quot;response&quot;);\r\n                        Log.d(&quot;UPI&quot;, &quot;onActivityResult: &quot;+ txt);\r\n                        ArrayList&lt;String&gt;dataLst=new ArrayList&lt;&gt;();\r\n                        dataLst.add(&quot;Nothing&quot;);\r\n                        upipaymentdataoperation(dataLst);\r\n                    }\r\n                    else {\r\n                        Log.d(&quot;UPI&quot;, &quot;onActivityResult: &quot;+ &quot;Return data is null!&quot;);\r\n                        ArrayList&lt;String&gt;dataLst=new ArrayList&lt;&gt;();\r\n                        dataLst.add(&quot;Nothing&quot;);\r\n                        upipaymentdataoperation(dataLst);\r\n                    }\r\n                }\r\n                else {\r\n                    Log.d(&quot;UPI&quot;, &quot;onActivityResult: &quot;+ &quot;Return data is null!&quot;);\r\n                    ArrayList&lt;String&gt;dataLst=new ArrayList&lt;&gt;();\r\n                    dataLst.add(&quot;Nothing&quot;);\r\n                    upipaymentdataoperation(dataLst);\r\n                }\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n    private void upipaymentdataoperation(ArrayList&lt;String&gt; data) {\r\n\r\n        if (isConnectionAvailable(MainActivity.this)){\r\n            String str = data.get(0);\r\n            Log.d(&quot;UPIPAY&quot;, &quot;upipaymentdataoperation: &quot;+str);\r\n            String paymentCancel=&quot;&quot;;\r\n            if (str==null)str=&quot;discard&quot;;\r\n            String status = &quot;&quot;;\r\n            String approvalref = &quot;&quot;;\r\n            String response[]=str.split(&quot;&amp;&quot;);\r\n            for (int i=0;i&lt;response.length;i++){\r\n                String equalStr[]=response[i].split(&quot;=&quot;);\r\n                if (equalStr.length&gt;=2){\r\n                    if (equalStr[0].toLowerCase().equals(&quot;Status&quot;.toLowerCase())){\r\n                        status=equalStr[1].toLowerCase();\r\n                    }\r\n                    else if(equalStr[0].toLowerCase().equals(&quot;approval Ref&quot;.toLowerCase())||\r\n                        equalStr[0].toLowerCase().equals(&quot;txnRef&quot;.toLowerCase()))\r\n                    {\r\n                        approvalref=equalStr[1];\r\n                    }\r\n                }\r\n                else {\r\n                    paymentCancel=&quot;Payment cancelled by user&quot;;\r\n                    if (status.equals(&quot;success&quot;)){\r\n                        Toast.makeText(this, &quot;Transaction success&quot;, Toast.LENGTH_SHORT).show();\r\n                        Log.d(&quot;UPI&quot;, &quot;responsestr: &quot;+approvalref);\r\n                    }\r\n                    else if (&quot;Payment cancelled by user&quot;.equals(paymentCancel)){\r\n                        Toast.makeText(this, &quot;Payment cancelled by user&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                    else {\r\n                        Toast.makeText(this, &quot;Transaction failed&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            Toast.makeText(this, &quot;No internet&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n\r\n    }\r\n\r\n    private boolean isConnectionAvailable(Context context) {\r\n        ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        if (connectivityManager!=null){\r\n            NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\r\n            if (networkInfo!=null &amp;&amp; networkInfo.isConnected() &amp;&amp; networkInfo.isConnectedOrConnecting() &amp;&amp; networkInfo.isAvailable()){\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nAndroidManifest.xml contains -\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_STATE&quot;/&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.UpiTesting&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\n\r\n\r\nactivity_main.xml contains -\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:background=&quot;@color/white&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/pay_btn&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/pay_with_upi&quot;\r\n        android:backgroundTint=&quot;@android:color/holo_green_dark&quot;\r\n        android:layout_centerInParent=&quot;true&quot;\r\n        android:textSize=&quot;20sp&quot;/&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n```\r\n\r\n\r\n\r\nPlease assist me to get rid of this issue.\r\n\r\nI was trying to test UPI payment by sending request in UPI application.\r\n\r\nIn PhonePe it is showing that - For security reasons, you are not allowed to send money from your bank account for this payment. You don&#39;t have to enter UPI PIN to receive money/cashback.","title":"Issue in making UPI payment request from android","body":"<p>UPI payment failed in PhonePe while testing my android application.\nThe error it is showing is - For security reasons, you are not allowed to send money from your bank account for this payment. You don't have to enter UPI PIN to receive money/cashback.</p>\n<p>MainActivity.java contains -</p>\n<pre><code>import androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Context;\nimport android.content.Intent;\nimport android.net.ConnectivityManager;\nimport android.net.NetworkInfo;\nimport android.net.Uri;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.Toast;\n\nimport java.util.ArrayList;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private Button pay_btn;\n\n    final int UPI_PAYMENT = 0;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        pay_btn = (Button) findViewById(R.id.pay_btn);\n\n        pay_btn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                payUsingUpi(&quot;1&quot;,&quot;Test Payment&quot;,&quot;Ratnadeep Parya&quot;,&quot;parya.ratnadeep125@okaxis&quot;);\n            }\n        });\n    }\n\n    private void payUsingUpi(String amounttxt, String notetxt, String nametxt, String upitxt) {\n\n        Uri uri = Uri.parse(&quot;upi://pay&quot;).buildUpon()\n                .appendQueryParameter(&quot;pa&quot;,upitxt)\n                .appendQueryParameter(&quot;pn&quot;,nametxt)\n                .appendQueryParameter(&quot;tn&quot;,notetxt)\n                .appendQueryParameter(&quot;am&quot;,amounttxt)\n                .appendQueryParameter(&quot;cu&quot;,&quot;INR&quot;)\n                .build();\n\n        Intent upi_payment = new Intent(Intent.ACTION_VIEW);\n        upi_payment.setData(uri);\n        Intent chooser = Intent.createChooser(upi_payment,&quot;Pay with&quot;);\n        if (null!=chooser.resolveActivity(getPackageManager())){\n            startActivityForResult(chooser,UPI_PAYMENT);\n        }\n        else {\n            Toast.makeText(this, &quot;No UPI app found!&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n\n        switch (requestCode){\n            case UPI_PAYMENT:\n                if ((RESULT_OK==resultCode|| (resultCode==11))){\n                    if (data!=null){\n                        String txt = data.getStringExtra(&quot;response&quot;);\n                        Log.d(&quot;UPI&quot;, &quot;onActivityResult: &quot;+ txt);\n                        ArrayList&lt;String&gt;dataLst=new ArrayList&lt;&gt;();\n                        dataLst.add(&quot;Nothing&quot;);\n                        upipaymentdataoperation(dataLst);\n                    }\n                    else {\n                        Log.d(&quot;UPI&quot;, &quot;onActivityResult: &quot;+ &quot;Return data is null!&quot;);\n                        ArrayList&lt;String&gt;dataLst=new ArrayList&lt;&gt;();\n                        dataLst.add(&quot;Nothing&quot;);\n                        upipaymentdataoperation(dataLst);\n                    }\n                }\n                else {\n                    Log.d(&quot;UPI&quot;, &quot;onActivityResult: &quot;+ &quot;Return data is null!&quot;);\n                    ArrayList&lt;String&gt;dataLst=new ArrayList&lt;&gt;();\n                    dataLst.add(&quot;Nothing&quot;);\n                    upipaymentdataoperation(dataLst);\n                }\n                break;\n        }\n\n    }\n\n    private void upipaymentdataoperation(ArrayList&lt;String&gt; data) {\n\n        if (isConnectionAvailable(MainActivity.this)){\n            String str = data.get(0);\n            Log.d(&quot;UPIPAY&quot;, &quot;upipaymentdataoperation: &quot;+str);\n            String paymentCancel=&quot;&quot;;\n            if (str==null)str=&quot;discard&quot;;\n            String status = &quot;&quot;;\n            String approvalref = &quot;&quot;;\n            String response[]=str.split(&quot;&amp;&quot;);\n            for (int i=0;i&lt;response.length;i++){\n                String equalStr[]=response[i].split(&quot;=&quot;);\n                if (equalStr.length&gt;=2){\n                    if (equalStr[0].toLowerCase().equals(&quot;Status&quot;.toLowerCase())){\n                        status=equalStr[1].toLowerCase();\n                    }\n                    else if(equalStr[0].toLowerCase().equals(&quot;approval Ref&quot;.toLowerCase())||\n                        equalStr[0].toLowerCase().equals(&quot;txnRef&quot;.toLowerCase()))\n                    {\n                        approvalref=equalStr[1];\n                    }\n                }\n                else {\n                    paymentCancel=&quot;Payment cancelled by user&quot;;\n                    if (status.equals(&quot;success&quot;)){\n                        Toast.makeText(this, &quot;Transaction success&quot;, Toast.LENGTH_SHORT).show();\n                        Log.d(&quot;UPI&quot;, &quot;responsestr: &quot;+approvalref);\n                    }\n                    else if (&quot;Payment cancelled by user&quot;.equals(paymentCancel)){\n                        Toast.makeText(this, &quot;Payment cancelled by user&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                    else {\n                        Toast.makeText(this, &quot;Transaction failed&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                }\n            }\n        }\n        else {\n            Toast.makeText(this, &quot;No internet&quot;, Toast.LENGTH_SHORT).show();\n        }\n\n    }\n\n    private boolean isConnectionAvailable(Context context) {\n        ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n        if (connectivityManager!=null){\n            NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\n            if (networkInfo!=null &amp;&amp; networkInfo.isConnected() &amp;&amp; networkInfo.isConnectedOrConnecting() &amp;&amp; networkInfo.isAvailable()){\n                return true;\n            }\n        }\n        return false;\n    }\n}\n</code></pre>\n<p>AndroidManifest.xml contains -</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_STATE&quot;/&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.UpiTesting&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>activity_main.xml contains -</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:background=&quot;@color/white&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/pay_btn&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/pay_with_upi&quot;\n        android:backgroundTint=&quot;@android:color/holo_green_dark&quot;\n        android:layout_centerInParent=&quot;true&quot;\n        android:textSize=&quot;20sp&quot;/&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>Please assist me to get rid of this issue.</p>\n<p>I was trying to test UPI payment by sending request in UPI application.</p>\n<p>In PhonePe it is showing that - For security reasons, you are not allowed to send money from your bank account for this payment. You don't have to enter UPI PIN to receive money/cashback.</p>\n"},{"tags":["java","maven","kotlin","okhttp","snyk"],"answers":[{"tags":[],"owner":{"account_id":3808391,"reputation":4885,"user_id":3160089,"accept_rate":77,"display_name":"Endzeit"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1676690737,"creation_date":1676686226,"answer_id":75490754,"question_id":75486505,"body_markdown":"As with all vulnerable software libraries, you need to assess whether or not you&#39;re actually affected by the vulnerability that is included.\r\n\r\nDetails on the vulnerability are listed in your Snyk report.\r\nThe problematic functions are `createTempDir` and `createTempFile` from the package `kotlin.io`. As outlined in your report as well as [the Kotlin documentation](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/create-temp-dir.html), these functions are a possible source of leaking information, due to the created file / directory having having too wide permissions; that is, everyone with access to the file system can read the files.\r\n\r\nIs this a problem?  \r\nIf you (and any dependencies you&#39;re including in your software) is NOT using one of the aforementioned functions, you&#39;re not vulnerable.  \r\nAlso, if you (or the dependency) is adjusting the file permissions after calling one of these functions and before inserting any information, you&#39;re not affected.  \r\nIn case the functions are used and the permissions are not adjusted, still that might not pose a problem, as long as the data stored in the files do not need to be protected, e.g. are NOT secrets or personal information.\r\n\r\nTo address your questions directly:\r\n1. Unfortunately, there is not easy way to fix this. You either would have to use a version of `kotlin-stdlib` where the function was not introduced yet, exclude the `kotlin-stdlib` from your classpath entirely or use a version where the functions are no longer included; which is not released yet. However, options 1 and 2 do not make any sense, because if the software keeps working, that means noone is using the functions and you&#39;re not affected anyway. \r\n2. No and yes. Everyone relying on the `kotlin-stdlib` in one of the affected versions, has the function on its classpath. However, as long as it is not used, or the usage does not pose a problem as explained above, the software is not vulnerable.\r\n\r\nThe OkHttp project [seems to know](https://github.com/square/okhttp/issues/7423) of the vulnerability, but seems not to be affected.","title":"Is it possible to solve org.jetbrains.kotlin:kotlin-stdlib vulnerability from OkHttp?","body":"<p>As with all vulnerable software libraries, you need to assess whether or not you're actually affected by the vulnerability that is included.</p>\n<p>Details on the vulnerability are listed in your Snyk report.\nThe problematic functions are <code>createTempDir</code> and <code>createTempFile</code> from the package <code>kotlin.io</code>. As outlined in your report as well as <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/create-temp-dir.html\" rel=\"nofollow noreferrer\">the Kotlin documentation</a>, these functions are a possible source of leaking information, due to the created file / directory having having too wide permissions; that is, everyone with access to the file system can read the files.</p>\n<p>Is this a problem?<br />\nIf you (and any dependencies you're including in your software) is NOT using one of the aforementioned functions, you're not vulnerable.<br />\nAlso, if you (or the dependency) is adjusting the file permissions after calling one of these functions and before inserting any information, you're not affected.<br />\nIn case the functions are used and the permissions are not adjusted, still that might not pose a problem, as long as the data stored in the files do not need to be protected, e.g. are NOT secrets or personal information.</p>\n<p>To address your questions directly:</p>\n<ol>\n<li>Unfortunately, there is not easy way to fix this. You either would have to use a version of <code>kotlin-stdlib</code> where the function was not introduced yet, exclude the <code>kotlin-stdlib</code> from your classpath entirely or use a version where the functions are no longer included; which is not released yet. However, options 1 and 2 do not make any sense, because if the software keeps working, that means noone is using the functions and you're not affected anyway.</li>\n<li>No and yes. Everyone relying on the <code>kotlin-stdlib</code> in one of the affected versions, has the function on its classpath. However, as long as it is not used, or the usage does not pose a problem as explained above, the software is not vulnerable.</li>\n</ol>\n<p>The OkHttp project <a href=\"https://github.com/square/okhttp/issues/7423\" rel=\"nofollow noreferrer\">seems to know</a> of the vulnerability, but seems not to be affected.</p>\n"}],"owner":{"account_id":27812898,"reputation":65,"user_id":21234935,"display_name":"Yevhen Vasyliev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":397,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":75490754,"answer_count":1,"score":5,"last_activity_date":1676690737,"creation_date":1676649197,"question_id":75486505,"body_markdown":"I&#39;m using `Snyk` service to check my projects for vulnerabilities.\r\n\r\nProjects with `OkHttp` dependency have one common vulnerability:\r\n```\r\nVulnerable module: org.jetbrains.kotlin:kotlin-stdlib\r\nIntroduced through: com.squareup.okhttp3:okhttp@4.10.0\r\n```\r\n\r\nYou can check the full report here: https://snyk.io/test/github/yvasyliev/deezer-api\r\n\r\nIn **Overview** section there is a note:\r\n&gt; Note: As of version 1.4.21, the vulnerable functions have been marked as deprecated. Due to still being useable, this advisory is kept as &quot;unfixed&quot;.\r\n\r\nI have two questions:\r\n\r\n1. Can I fix this vulnerability in Maven project and how?\r\n2. If vulnerability cannot be fixed, then does it mean that every signle Kotlin application has this vulnerability by default (since it&#39;s comming from kotlin-stdlib)?\r\n\r\nThe latest stable version of `OkHttp` is added to project by `Maven`:\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\r\n    &lt;artifactId&gt;okhttp&lt;/artifactId&gt;\r\n    &lt;version&gt;4.10.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Is it possible to solve org.jetbrains.kotlin:kotlin-stdlib vulnerability from OkHttp?","body":"<p>I'm using <code>Snyk</code> service to check my projects for vulnerabilities.</p>\n<p>Projects with <code>OkHttp</code> dependency have one common vulnerability:</p>\n<pre><code>Vulnerable module: org.jetbrains.kotlin:kotlin-stdlib\nIntroduced through: com.squareup.okhttp3:okhttp@4.10.0\n</code></pre>\n<p>You can check the full report here: <a href=\"https://snyk.io/test/github/yvasyliev/deezer-api\" rel=\"noreferrer\">https://snyk.io/test/github/yvasyliev/deezer-api</a></p>\n<p>In <strong>Overview</strong> section there is a note:</p>\n<blockquote>\n<p>Note: As of version 1.4.21, the vulnerable functions have been marked as deprecated. Due to still being useable, this advisory is kept as &quot;unfixed&quot;.</p>\n</blockquote>\n<p>I have two questions:</p>\n<ol>\n<li>Can I fix this vulnerability in Maven project and how?</li>\n<li>If vulnerability cannot be fixed, then does it mean that every signle Kotlin application has this vulnerability by default (since it's comming from kotlin-stdlib)?</li>\n</ol>\n<p>The latest stable version of <code>OkHttp</code> is added to project by <code>Maven</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\n    &lt;artifactId&gt;okhttp&lt;/artifactId&gt;\n    &lt;version&gt;4.10.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","gradle","intellij-idea"],"answers":[{"comments":[{"owner":{"account_id":2816973,"reputation":598,"user_id":4818123,"accept_rate":61,"display_name":"Takeshi Tokugawa YD"},"score":0,"creation_date":1676689560,"post_id":75480192,"comment_id":133193709,"body_markdown":"Thank you for the answer! I have understood how to act in the similar situations. Unfortunately I have got another error related with breaking changes, but I&#39;ll consider it in [the other topics](https://stackoverflow.com/q/75490926/4818123).","body":"Thank you for the answer! I have understood how to act in the similar situations. Unfortunately I have got another error related with breaking changes, but I&#39;ll consider it in <a href=\"https://stackoverflow.com/q/75490926/4818123\">the other topics</a>."}],"tags":[],"owner":{"account_id":27560193,"reputation":491,"user_id":21033369,"display_name":"LJ replica"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676607424,"creation_date":1676607424,"answer_id":75480192,"question_id":75479185,"body_markdown":"&gt; An exception occurred applying plugin request [id: &#39;org.jetbrains.intellij&#39;, version: &#39;1.12.0&#39;] Failed to apply plugin &#39;org.jetbrains.intellij&#39;. Gradle IntelliJ Plugin requires Gradle 7.3 and higher\r\n\r\nPlease open the gradle/wrapper/gradle-wrapper.properties, and check what version is there. \r\nYou could change the old Gradle version to any version new than 7.3 in that file&#39;s `distributionUrl` part to fix this problem and click the Gradle reload button to reload this project.\r\n\r\nOr run something like `gradle wrapper --gradle-version 8.0` from the command line to update the Gradle version.","title":"How to deal with &quot;Failed to apply plugin &#39;org.jetbrains.intellij&#39;. Gradle IntelliJ Plugin requires Gradle X.X and higher&quot; error","body":"<blockquote>\n<p>An exception occurred applying plugin request [id: 'org.jetbrains.intellij', version: '1.12.0'] Failed to apply plugin 'org.jetbrains.intellij'. Gradle IntelliJ Plugin requires Gradle 7.3 and higher</p>\n</blockquote>\n<p>Please open the gradle/wrapper/gradle-wrapper.properties, and check what version is there.\nYou could change the old Gradle version to any version new than 7.3 in that file's <code>distributionUrl</code> part to fix this problem and click the Gradle reload button to reload this project.</p>\n<p>Or run something like <code>gradle wrapper --gradle-version 8.0</code> from the command line to update the Gradle version.</p>\n"}],"owner":{"account_id":2816973,"reputation":598,"user_id":4818123,"accept_rate":61,"display_name":"Takeshi Tokugawa YD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1163,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75480192,"answer_count":1,"score":0,"last_activity_date":1676689774,"creation_date":1676593296,"question_id":75479185,"body_markdown":"My plugin is based on official Jet Brains template, however Java one, not Kotlin.\r\n\r\nWhen I opened my project, I got the error\r\n\r\n&gt; An exception occurred applying plugin request [id:\r\n&gt; &#39;org.jetbrains.intellij&#39;, version: &#39;1.12.0&#39;]\r\n&gt; Failed to apply plugin &#39;org.jetbrains.intellij&#39;.\r\n&gt; Gradle IntelliJ Plugin requires Gradle 7.3 and higher\r\n\r\nThe dependencies in build.gradle.kts are\r\n\r\n    plugins {\r\n        // Java support\r\n        id(&quot;java&quot;)\r\n        // Kotlin support\r\n        id(&quot;org.jetbrains.kotlin.jvm&quot;) version &quot;1.7.10&quot;\r\n        // gradle-intellij-plugin - read more: https://github.com/JetBrains/gradle-intellij-plugin\r\n        id(&quot;org.jetbrains.intellij&quot;) version &quot;1.12.0&quot;\r\n        // gradle-changelog-plugin - read more: https://github.com/JetBrains/gradle-changelog-plugin\r\n        id(&quot;org.jetbrains.changelog&quot;) version &quot;1.3.0&quot;\r\n        // detekt linter - read more: https://detekt.github.io/detekt/gradle.html\r\n        id(&quot;io.gitlab.arturbosch.detekt&quot;) version &quot;1.17.1&quot;\r\n        // ktlint linter - read more: https://github.com/JLLeitschuh/ktlint-gradle\r\n        id(&quot;org.jlleitschuh.gradle.ktlint&quot;) version &quot;10.0.0&quot;\r\n    }\r\n\r\nWould you please no teach me how to deal with this error? I understand that I need to update the Grade, however how to do it with IntelliJ IDEA for current project?\r\n\r\nMy Project configuration is:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n  [1]: https://i.stack.imgur.com/Z9p0b.png\r\n  [2]: https://i.stack.imgur.com/wkVvY.png","title":"How to deal with &quot;Failed to apply plugin &#39;org.jetbrains.intellij&#39;. Gradle IntelliJ Plugin requires Gradle X.X and higher&quot; error","body":"<p>My plugin is based on official Jet Brains template, however Java one, not Kotlin.</p>\n<p>When I opened my project, I got the error</p>\n<blockquote>\n<p>An exception occurred applying plugin request [id:\n'org.jetbrains.intellij', version: '1.12.0']\nFailed to apply plugin 'org.jetbrains.intellij'.\nGradle IntelliJ Plugin requires Gradle 7.3 and higher</p>\n</blockquote>\n<p>The dependencies in build.gradle.kts are</p>\n<pre><code>plugins {\n    // Java support\n    id(&quot;java&quot;)\n    // Kotlin support\n    id(&quot;org.jetbrains.kotlin.jvm&quot;) version &quot;1.7.10&quot;\n    // gradle-intellij-plugin - read more: https://github.com/JetBrains/gradle-intellij-plugin\n    id(&quot;org.jetbrains.intellij&quot;) version &quot;1.12.0&quot;\n    // gradle-changelog-plugin - read more: https://github.com/JetBrains/gradle-changelog-plugin\n    id(&quot;org.jetbrains.changelog&quot;) version &quot;1.3.0&quot;\n    // detekt linter - read more: https://detekt.github.io/detekt/gradle.html\n    id(&quot;io.gitlab.arturbosch.detekt&quot;) version &quot;1.17.1&quot;\n    // ktlint linter - read more: https://github.com/JLLeitschuh/ktlint-gradle\n    id(&quot;org.jlleitschuh.gradle.ktlint&quot;) version &quot;10.0.0&quot;\n}\n</code></pre>\n<p>Would you please no teach me how to deal with this error? I understand that I need to update the Grade, however how to do it with IntelliJ IDEA for current project?</p>\n<p>My Project configuration is:</p>\n<p><a href=\"https://i.stack.imgur.com/Z9p0b.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Z9p0b.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/wkVvY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wkVvY.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","spring-boot","security","spring-security"],"answers":[{"comments":[{"owner":{"account_id":27803235,"reputation":21,"user_id":21227277,"display_name":"univ27all"},"score":0,"creation_date":1676646564,"post_id":75480146,"comment_id":133184988,"body_markdown":"Can you please elaborate on the auth provider part of the solution you&#39;re suggesting?","body":"Can you please elaborate on the auth provider part of the solution you&#39;re suggesting?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1676987623,"post_id":75480146,"comment_id":133244569,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/75480146/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":3010530,"reputation":1,"user_id":2554175,"display_name":"sunjing21"},"comment_count":2,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1676606514,"creation_date":1676606514,"answer_id":75480146,"question_id":75479807,"body_markdown":"you should look spring-security-lambda-dsl,add filter,add auth provider","title":"Spring Security Custom Auth Manager approach","body":"<p>you should look spring-security-lambda-dsl,add filter,add auth provider</p>\n"},{"comments":[{"owner":{"account_id":27803235,"reputation":21,"user_id":21227277,"display_name":"univ27all"},"score":0,"creation_date":1676689740,"post_id":75490739,"comment_id":133193719,"body_markdown":"Thanks a lot for suggesting the approach and I get it now how it&#39;ll work. I missed to look at the BearerToken auth filter and that&#39;s where I&#39;m going next!  \n\nI have some experience with Spring Security but it has always been straight forward using JWT so far. \nFor this ask, I&#39;ve spent quite some time going through spring security courses to actually understand the concepts in detail and dig deeper into the framework. I&#39;ve read the documentation in parts but never fully gone through all of it. May be now&#39;s the time.\nAppreciate your time and the details in your answer.","body":"Thanks a lot for suggesting the approach and I get it now how it&#39;ll work. I missed to look at the BearerToken auth filter and that&#39;s where I&#39;m going next!    I have some experience with Spring Security but it has always been straight forward using JWT so far.  For this ask, I&#39;ve spent quite some time going through spring security courses to actually understand the concepts in detail and dig deeper into the framework. I&#39;ve read the documentation in parts but never fully gone through all of it. May be now&#39;s the time. Appreciate your time and the details in your answer."},{"owner":{"account_id":27803235,"reputation":21,"user_id":21227277,"display_name":"univ27all"},"score":0,"creation_date":1676690160,"post_id":75490739,"comment_id":133193742,"body_markdown":"And doesn&#39;t look like I need the http basic filter so will remove it.","body":"And doesn&#39;t look like I need the http basic filter so will remove it."}],"tags":[],"owner":{"account_id":15272916,"reputation":630,"user_id":13018875,"display_name":"neofelis"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676685976,"creation_date":1676685976,"answer_id":75490739,"question_id":75479807,"body_markdown":"You&#39;re right, this isn&#39;t a good way to do it. (It&#39;s great you noticed -- too few people care whether their code is idiomatic.)\r\n\r\nA better way would be to start by writing your own filter that actually just... does the authentication. You can extend `OncePerRequestFilter` rather than something more specific. That&#39;s what Spring Security itself does, both for basic authentication ([BasicAuthenticationFilter](https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/authentication/www/BasicAuthenticationFilter.html)) and for OAuth bearer tokens ([BearerTokenAuthenticationFilter](https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/oauth2/server/resource/web/BearerTokenAuthenticationFilter.html)). You may want to take a careful look at the [code](https://github.com/spring-projects/spring-security/blob/625a1cdca2a34b6de1154ceda52e0e1d893993da/oauth2/oauth2-resource-server/src/main/java/org/springframework/security/oauth2/server/resource/web/authentication/BearerTokenAuthenticationFilter.java) for `BearerTokenAuthenticationFilter` since the problem it solves is very similar to yours. (I wouldn&#39;t extend it, though, since it&#39;s very clearly intended to do OAuth specifically. I wouldn&#39;t straight up copy the code either -- it&#39;s fairly simple as Spring Security filters go but probably still does more than you need. Try to understand the code instead; that will help a lot with your understanding of Spring Security in general.)\r\n\r\nOkay, so you have a filter which looks a lot like `BearerTokenAuthenticationFilter`. That is, it contains an `AuthenticationManager` and its `doFilter` method consists of extracting the token from the request, passing that into the `AuthenticationManager` and then doing some `SecurityContext`-related stuff. Except, problem: `AuthenticationManager.authenticate()` expects an `Authentication`, not a String, and the token is a String.\r\n\r\nThe solution is to write a wrapper object for your token which implements `Authentication`. You can do this a couple of ways. Personally, what I&#39;d do is use two classes: one which you pass into `AuthenticationManager.authenticate()`, and one which you get back. So we have, say, `CustomTokenAuthenticationRequest implements Authentication` and `CustomTokenAuthentication implements Authentication`. Both are immutable. \r\n\r\n`CustomTokenAuthenticationRequest` basically just contains the token; its `isAuthenticated()` is `return false`, its `getPrincipal()` returns the token and its `getCredentials()` also returns the token. This is essentially what Spring Security itself does with [BearerTokenAuthenticationToken](https://github.com/spring-projects/spring-security/blob/625a1cdca2a34b6de1154ceda52e0e1d893993da/oauth2/oauth2-resource-server/src/main/java/org/springframework/security/oauth2/server/resource/authentication/BearerTokenAuthenticationToken.java).\r\n\r\n`CustomTokenAuthentication`, on the other hand, probably contains a `UserDetails` of some sort; its `isAuthenticated()` is `return true`, its `getName()` is a username or user id or something, etc.\r\n\r\nNow you need to teach the `AuthenticationManager` to authenticate `CustomTokenAuthenticationRequest`s. The way to do this isn&#39;t to implement `AuthenticationManager`, it&#39;s to implement `AuthenticationProvider`. So you write a class that looks roughly like\r\n\r\n```java\r\npublic class CustomTokenAuthenticationProvider implements AuthenticationProvider {\r\n  @Override\r\n  public Authentication authenticate(Authentication a) {\r\n    String token = ((CustomTokenAuthenticationRequest) a).getToken();\r\n    if (/* the token is valid */) {\r\n      CustomTokenAuthentication returnValue = // whatever you want it to be\r\n      return returnValue;\r\n    }\r\n    throw new BadCredentialsException(&quot;Invalid token&quot;);\r\n  }\r\n\r\n  @Override\r\n  public boolean supports(Class&lt;?&gt; authClass) {\r\n    return authClass == CustomTokenAuthenticationRequest.class;\r\n  }\r\n}\r\n```\r\n\r\nFinally, wire it all up. Add the authentication provider to your `HttpSecurity` using its `authenticationProvider()` method. (If you do this, and you don&#39;t change the default authentication manager configuration, `authenticationProvider()` results in your authentication provider getting added to an `AuthenticationManager` which Spring Security configures _for you_ -- an instance of `ProviderManager`.) Add the filter using `addFilterAt(BasicAuthenticationFilter.class)`. Also, don&#39;t call `httpBasic()` because this adds a `BasicAuthenticationFilter` which I am guessing you don&#39;t want. Or maybe you want basic authentication _and also_ your custom token authentication? But you didn&#39;t say that. If you do want both, you&#39;ll want to add your filter with `addFilterBefore` or `addFilterAfter`, and you need to think about ordering. Generally filter ordering is important in Spring Security.\r\n\r\nI glossed over a _lot_ of stuff here, barely gave you any code, and still wrote something of blog post length. Spring Security is very complex, and the thing you&#39;re trying to do isn&#39;t easily done in an idiomatic manner if you don&#39;t have much experience. I highly recommend just reading the Spring Security reference documentation from start to finish before you try implementing any of my suggestions. You&#39;ll also need to read quite a lot of Javadoc and tutorials and/or framework code. If there&#39;s something specific you want to follow up on I might respond to a comment, but I don&#39;t promise it; I had to do some research for this answer and have already spent more time on it than I planned to.","title":"Spring Security Custom Auth Manager approach","body":"<p>You're right, this isn't a good way to do it. (It's great you noticed -- too few people care whether their code is idiomatic.)</p>\n<p>A better way would be to start by writing your own filter that actually just... does the authentication. You can extend <code>OncePerRequestFilter</code> rather than something more specific. That's what Spring Security itself does, both for basic authentication (<a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/authentication/www/BasicAuthenticationFilter.html\" rel=\"nofollow noreferrer\">BasicAuthenticationFilter</a>) and for OAuth bearer tokens (<a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/oauth2/server/resource/web/BearerTokenAuthenticationFilter.html\" rel=\"nofollow noreferrer\">BearerTokenAuthenticationFilter</a>). You may want to take a careful look at the <a href=\"https://github.com/spring-projects/spring-security/blob/625a1cdca2a34b6de1154ceda52e0e1d893993da/oauth2/oauth2-resource-server/src/main/java/org/springframework/security/oauth2/server/resource/web/authentication/BearerTokenAuthenticationFilter.java\" rel=\"nofollow noreferrer\">code</a> for <code>BearerTokenAuthenticationFilter</code> since the problem it solves is very similar to yours. (I wouldn't extend it, though, since it's very clearly intended to do OAuth specifically. I wouldn't straight up copy the code either -- it's fairly simple as Spring Security filters go but probably still does more than you need. Try to understand the code instead; that will help a lot with your understanding of Spring Security in general.)</p>\n<p>Okay, so you have a filter which looks a lot like <code>BearerTokenAuthenticationFilter</code>. That is, it contains an <code>AuthenticationManager</code> and its <code>doFilter</code> method consists of extracting the token from the request, passing that into the <code>AuthenticationManager</code> and then doing some <code>SecurityContext</code>-related stuff. Except, problem: <code>AuthenticationManager.authenticate()</code> expects an <code>Authentication</code>, not a String, and the token is a String.</p>\n<p>The solution is to write a wrapper object for your token which implements <code>Authentication</code>. You can do this a couple of ways. Personally, what I'd do is use two classes: one which you pass into <code>AuthenticationManager.authenticate()</code>, and one which you get back. So we have, say, <code>CustomTokenAuthenticationRequest implements Authentication</code> and <code>CustomTokenAuthentication implements Authentication</code>. Both are immutable.</p>\n<p><code>CustomTokenAuthenticationRequest</code> basically just contains the token; its <code>isAuthenticated()</code> is <code>return false</code>, its <code>getPrincipal()</code> returns the token and its <code>getCredentials()</code> also returns the token. This is essentially what Spring Security itself does with <a href=\"https://github.com/spring-projects/spring-security/blob/625a1cdca2a34b6de1154ceda52e0e1d893993da/oauth2/oauth2-resource-server/src/main/java/org/springframework/security/oauth2/server/resource/authentication/BearerTokenAuthenticationToken.java\" rel=\"nofollow noreferrer\">BearerTokenAuthenticationToken</a>.</p>\n<p><code>CustomTokenAuthentication</code>, on the other hand, probably contains a <code>UserDetails</code> of some sort; its <code>isAuthenticated()</code> is <code>return true</code>, its <code>getName()</code> is a username or user id or something, etc.</p>\n<p>Now you need to teach the <code>AuthenticationManager</code> to authenticate <code>CustomTokenAuthenticationRequest</code>s. The way to do this isn't to implement <code>AuthenticationManager</code>, it's to implement <code>AuthenticationProvider</code>. So you write a class that looks roughly like</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CustomTokenAuthenticationProvider implements AuthenticationProvider {\n  @Override\n  public Authentication authenticate(Authentication a) {\n    String token = ((CustomTokenAuthenticationRequest) a).getToken();\n    if (/* the token is valid */) {\n      CustomTokenAuthentication returnValue = // whatever you want it to be\n      return returnValue;\n    }\n    throw new BadCredentialsException(&quot;Invalid token&quot;);\n  }\n\n  @Override\n  public boolean supports(Class&lt;?&gt; authClass) {\n    return authClass == CustomTokenAuthenticationRequest.class;\n  }\n}\n</code></pre>\n<p>Finally, wire it all up. Add the authentication provider to your <code>HttpSecurity</code> using its <code>authenticationProvider()</code> method. (If you do this, and you don't change the default authentication manager configuration, <code>authenticationProvider()</code> results in your authentication provider getting added to an <code>AuthenticationManager</code> which Spring Security configures <em>for you</em> -- an instance of <code>ProviderManager</code>.) Add the filter using <code>addFilterAt(BasicAuthenticationFilter.class)</code>. Also, don't call <code>httpBasic()</code> because this adds a <code>BasicAuthenticationFilter</code> which I am guessing you don't want. Or maybe you want basic authentication <em>and also</em> your custom token authentication? But you didn't say that. If you do want both, you'll want to add your filter with <code>addFilterBefore</code> or <code>addFilterAfter</code>, and you need to think about ordering. Generally filter ordering is important in Spring Security.</p>\n<p>I glossed over a <em>lot</em> of stuff here, barely gave you any code, and still wrote something of blog post length. Spring Security is very complex, and the thing you're trying to do isn't easily done in an idiomatic manner if you don't have much experience. I highly recommend just reading the Spring Security reference documentation from start to finish before you try implementing any of my suggestions. You'll also need to read quite a lot of Javadoc and tutorials and/or framework code. If there's something specific you want to follow up on I might respond to a comment, but I don't promise it; I had to do some research for this answer and have already spent more time on it than I planned to.</p>\n"}],"owner":{"account_id":27803235,"reputation":21,"user_id":21227277,"display_name":"univ27all"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":959,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":75490739,"answer_count":2,"score":1,"last_activity_date":1676685976,"creation_date":1676601761,"question_id":75479807,"body_markdown":"I would like to access the http request, specifically auth header in AuthenticationManager.authenticate() context. \r\n\r\nRequirement is to authenticate a custom token. There is an external library which does that and so I don&#39;t have the luxury to read out principal from the token. Hence, in the custom filter, I am returning the full token in the getPreAuthenticatedPrincipal() method. This seems borderline incorrect and I would like to not pass the token pretending it to be principal.\r\n\r\nIs there any way I can get it without violating any framework constraints? \r\nOr is there a better way to handle the scenario which I&#39;m trying to achieve?\r\n\r\nHere&#39;s the config class:\r\n\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity(debug = true)\r\n@EnableGlobalMethodSecurity(securedEnabled = true)\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    protected void configure(HttpSecurity httpSecurity) throws Exception{\r\n\r\n        CustomTokenFilter customTokenFilter = new CustomTokenFilter();\r\n        customTokenFilter.setAuthenticationManager(new CustomAuthenticationMgr());\r\n\r\n        httpSecurity\r\n                 // csrf etc etc\r\n                .addFilter(customTokenFilter)\r\n                .authorizeRequests()\r\n                .mvcMatchers(&quot;/users/**&quot;)\r\n                .authenticated()\r\n                .and()\r\n                .authorizeRequests()\r\n                .mvcMatchers(&quot;/other-api/**&quot;)\r\n                .permitAll()\r\n                .and()\r\n                .httpBasic();\r\n    }\r\n```\r\n\r\nHere&#39;s the custom token filter class:\r\n\r\n\r\n```\r\npublic class CustomTokenFilter extends AbstractPreAuthenticatedProcessingFilter {\r\n    @Override\r\n    protected Object getPreAuthenticatedPrincipal(HttpServletRequest request) {\r\n        String authorization = request.getHeader(&quot;authorization&quot;);\r\n\r\n        if(authorization.indexOf(&quot;Custom&quot;) == 0){\r\n            return Map.of(&quot;Custom&quot;,authorization.split(&quot; &quot;)[1]);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    protected Object getPreAuthenticatedCredentials(HttpServletRequest request) {\r\n        return &quot;&quot;;\r\n    }\r\n}\r\n```\r\nAnd finally, the custom authentication manager class:\r\n\r\n\r\n```\r\npublic class CustomAuthenticationMgr implements AuthenticationManager {\r\n    @Override\r\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\r\n\r\n        Map&lt;String,String&gt; map = (Map) authentication.getPrincipal();\r\n        String token = map.get(&quot;Custom&quot;);\r\n\r\n        // Custom validation - checking length here just to simplify\r\n        if(token.length() &gt; 0)\r\n            authentication.setAuthenticated(true);\r\n\r\n        return authentication;\r\n    }\r\n}\r\n```\r\n\r\n**Version**: Spring Boot 2.6.7 (transitive: spring-core 5.3.19)\r\n\r\n**Constraints**: Cannot upgrade to other versions at the moment\r\n\r\nThanks in advance!\r\n","title":"Spring Security Custom Auth Manager approach","body":"<p>I would like to access the http request, specifically auth header in AuthenticationManager.authenticate() context.</p>\n<p>Requirement is to authenticate a custom token. There is an external library which does that and so I don't have the luxury to read out principal from the token. Hence, in the custom filter, I am returning the full token in the getPreAuthenticatedPrincipal() method. This seems borderline incorrect and I would like to not pass the token pretending it to be principal.</p>\n<p>Is there any way I can get it without violating any framework constraints?\nOr is there a better way to handle the scenario which I'm trying to achieve?</p>\n<p>Here's the config class:</p>\n<pre><code>@Configuration\n@EnableWebSecurity(debug = true)\n@EnableGlobalMethodSecurity(securedEnabled = true)\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    protected void configure(HttpSecurity httpSecurity) throws Exception{\n\n        CustomTokenFilter customTokenFilter = new CustomTokenFilter();\n        customTokenFilter.setAuthenticationManager(new CustomAuthenticationMgr());\n\n        httpSecurity\n                 // csrf etc etc\n                .addFilter(customTokenFilter)\n                .authorizeRequests()\n                .mvcMatchers(&quot;/users/**&quot;)\n                .authenticated()\n                .and()\n                .authorizeRequests()\n                .mvcMatchers(&quot;/other-api/**&quot;)\n                .permitAll()\n                .and()\n                .httpBasic();\n    }\n</code></pre>\n<p>Here's the custom token filter class:</p>\n<pre><code>public class CustomTokenFilter extends AbstractPreAuthenticatedProcessingFilter {\n    @Override\n    protected Object getPreAuthenticatedPrincipal(HttpServletRequest request) {\n        String authorization = request.getHeader(&quot;authorization&quot;);\n\n        if(authorization.indexOf(&quot;Custom&quot;) == 0){\n            return Map.of(&quot;Custom&quot;,authorization.split(&quot; &quot;)[1]);\n        }\n        return null;\n    }\n\n    @Override\n    protected Object getPreAuthenticatedCredentials(HttpServletRequest request) {\n        return &quot;&quot;;\n    }\n}\n</code></pre>\n<p>And finally, the custom authentication manager class:</p>\n<pre><code>public class CustomAuthenticationMgr implements AuthenticationManager {\n    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n\n        Map&lt;String,String&gt; map = (Map) authentication.getPrincipal();\n        String token = map.get(&quot;Custom&quot;);\n\n        // Custom validation - checking length here just to simplify\n        if(token.length() &gt; 0)\n            authentication.setAuthenticated(true);\n\n        return authentication;\n    }\n}\n</code></pre>\n<p><strong>Version</strong>: Spring Boot 2.6.7 (transitive: spring-core 5.3.19)</p>\n<p><strong>Constraints</strong>: Cannot upgrade to other versions at the moment</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","json"],"owner":{"account_id":25041781,"reputation":1,"user_id":18898581,"display_name":"Taras"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676685804,"creation_date":1676685463,"question_id":75490716,"body_markdown":"Im trying to add jsonObject to an existing JSON file in &quot;raw&quot; folder. \r\n\r\nEvery time the button pressed it should add to the JSON file two new variables from the plainText input. I cant figure out how to do that because I cant properly get the path of the &quot;raw&quot; folder. \r\n\r\nthe code that I wrote without the &quot;adding to JSON&quot; part\r\n\r\n     public void submit(View view) {\r\n        EditText editAmount;\r\n        EditText editReason;\r\n\r\n        Log.d(&quot;Smth&quot;, &quot;Submit!&quot;);\r\n\r\n        editAmount = (EditText)findViewById(R.id.editAmount);\r\n        editReason = (EditText)findViewById(R.id.editReason);\r\n\r\n        String amount = editAmount.getText().toString();\r\n        String date = &quot;18.02.2023&quot;;\r\n        String reason = editReason.getText().toString();\r\n\r\n        Log.d(&quot;Smth&quot;, amount);\r\n        Log.d(&quot;Smth&quot;, reason);\r\n\r\n        try {\r\n            JSONObject jsonObject = new JSONObject();\r\n\r\n            jsonObject.put(&quot;amount&quot;, amount);\r\n            jsonObject.put(&quot;reason&quot;, reason);\r\n            jsonObject.put(&quot;date&quot;, &quot;18.02.2023&quot;);\r\n\r\n        } catch (JSONException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n\r\nI have tried a lot of other solutions on StackOverFlow, but all of them give me errors.\r\n\r\nI hope you will help me with this problem of editing JSON file) Thank you","title":"How to add jsonObject to an existing JSON file in the &quot;raw&quot; folder Android Studio? (Java)","body":"<p>Im trying to add jsonObject to an existing JSON file in &quot;raw&quot; folder.</p>\n<p>Every time the button pressed it should add to the JSON file two new variables from the plainText input. I cant figure out how to do that because I cant properly get the path of the &quot;raw&quot; folder.</p>\n<p>the code that I wrote without the &quot;adding to JSON&quot; part</p>\n<pre><code> public void submit(View view) {\n    EditText editAmount;\n    EditText editReason;\n\n    Log.d(&quot;Smth&quot;, &quot;Submit!&quot;);\n\n    editAmount = (EditText)findViewById(R.id.editAmount);\n    editReason = (EditText)findViewById(R.id.editReason);\n\n    String amount = editAmount.getText().toString();\n    String date = &quot;18.02.2023&quot;;\n    String reason = editReason.getText().toString();\n\n    Log.d(&quot;Smth&quot;, amount);\n    Log.d(&quot;Smth&quot;, reason);\n\n    try {\n        JSONObject jsonObject = new JSONObject();\n\n        jsonObject.put(&quot;amount&quot;, amount);\n        jsonObject.put(&quot;reason&quot;, reason);\n        jsonObject.put(&quot;date&quot;, &quot;18.02.2023&quot;);\n\n    } catch (JSONException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>I have tried a lot of other solutions on StackOverFlow, but all of them give me errors.</p>\n<p>I hope you will help me with this problem of editing JSON file) Thank you</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1676683585,"post_id":75490570,"comment_id":133193269,"body_markdown":"I don&#39;t think you want to use `startsWith` here.  For example, `&quot;1.11.0&quot;` starts with `&quot;1.1&quot;`, but I don&#39;t think you want to mark `&quot;1.11.0&quot;` as accepted when `&quot;1.1&quot;` is in the list.  A better algorithm might be to check separately whether the provided value is in the list, and then check whether everything up to the last decimal point is in the list.  I&#39;m happy to provide an answer if you can&#39;t work this out for yourself.","body":"I don&#39;t think you want to use <code>startsWith</code> here.  For example, <code>&quot;1.11.0&quot;</code> starts with <code>&quot;1.1&quot;</code>, but I don&#39;t think you want to mark <code>&quot;1.11.0&quot;</code> as accepted when <code>&quot;1.1&quot;</code> is in the list.  A better algorithm might be to check separately whether the provided value is in the list, and then check whether everything up to the last decimal point is in the list.  I&#39;m happy to provide an answer if you can&#39;t work this out for yourself."}],"answers":[{"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1676684938,"post_id":75490573,"comment_id":133193381,"body_markdown":"As @Dawood suggested in a comment on the original post, `startsWith` is not appropriate for this task.","body":"As @Dawood suggested in a comment on the original post, <code>startsWith</code> is not appropriate for this task."},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1676687674,"post_id":75490573,"comment_id":133193580,"body_markdown":"@JimGarrison Just answering the title: &quot;How to use startsWith and contains within a List of String&quot;","body":"@JimGarrison Just answering the title: &quot;How to use startsWith and contains within a List of String&quot;"}],"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1676683020,"creation_date":1676683020,"answer_id":75490573,"question_id":75490570,"body_markdown":"You can use `Stream#anyMatch` to check if the input starts with any of the values in the `List`.\r\n\r\n```java\r\nreturn acceptedVersions.stream().anyMatch(version::startsWith);\r\n```","title":"How to use startsWith and contains within a List of String","body":"<p>You can use <code>Stream#anyMatch</code> to check if the input starts with any of the values in the <code>List</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>return acceptedVersions.stream().anyMatch(version::startsWith);\n</code></pre>\n"}],"owner":{"account_id":27438952,"reputation":43,"user_id":20934246,"display_name":"Repins Star"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75490573,"answer_count":1,"score":0,"last_activity_date":1676683020,"creation_date":1676682886,"question_id":75490570,"body_markdown":"i have this implementation that I need to check whether the version with x.x.x format is accepted based on accepted version in the list with just a format of x.x.\r\n\r\nFor example, if 1.3 is in the accepted version list. then 1.3.1, 1.3.2 or simply 1.3.x is accepted. As if 1.2 is not in the list then 1.2.x is not accepted.\r\n\r\n     @Test \r\n     public test() {\r\n         Assert.assertTrue(isVersionAccepted(&quot;1.3.2&quot;));\r\n         Assert.assertFalse(isVersionAccepted(&quot;1.2.1&quot;));\r\n     }\r\n    \r\n     public static boolean isVersionAccepted(String version) {\r\n            List&lt;String&gt; acceptedVersions = Arrays.asList(&quot;1.1&quot;, &quot;1.3&quot;, &quot;1.5&quot;, &quot;2.5&quot;, &quot;2.7&quot;, &quot;3.1&quot;, &quot;3.2&quot;);\r\n             \r\n           // process\r\n            \r\n     }","title":"How to use startsWith and contains within a List of String","body":"<p>i have this implementation that I need to check whether the version with x.x.x format is accepted based on accepted version in the list with just a format of x.x.</p>\n<p>For example, if 1.3 is in the accepted version list. then 1.3.1, 1.3.2 or simply 1.3.x is accepted. As if 1.2 is not in the list then 1.2.x is not accepted.</p>\n<pre><code> @Test \n public test() {\n     Assert.assertTrue(isVersionAccepted(&quot;1.3.2&quot;));\n     Assert.assertFalse(isVersionAccepted(&quot;1.2.1&quot;));\n }\n\n public static boolean isVersionAccepted(String version) {\n        List&lt;String&gt; acceptedVersions = Arrays.asList(&quot;1.1&quot;, &quot;1.3&quot;, &quot;1.5&quot;, &quot;2.5&quot;, &quot;2.7&quot;, &quot;3.1&quot;, &quot;3.2&quot;);\n         \n       // process\n        \n }\n</code></pre>\n"},{"tags":["java","arrays","for-loop","local-variables","private-methods"],"answers":[{"comments":[{"owner":{"account_id":16929446,"reputation":7,"user_id":12244159,"display_name":"Ozakriid"},"score":0,"creation_date":1677092625,"post_id":75490473,"comment_id":133271329,"body_markdown":"Thank you so much! I wasn&#39;t aware it destroyed the variable, but that does make sense now considering it is instantiated in the loop.","body":"Thank you so much! I wasn&#39;t aware it destroyed the variable, but that does make sense now considering it is instantiated in the loop."}],"tags":[],"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1676681491,"creation_date":1676681491,"answer_id":75490473,"question_id":75490388,"body_markdown":"&gt; ```java\r\n&gt; for (int i : valueArr) {\r\n&gt;  .... CODE HERE ...\r\n&gt; }\r\n&gt; ```\r\n\r\nThis sets up a loop which will run `CODE HERE` a certain number of times. Inside this loop, at the start of every loop, an entirely new variable is created named `i`, containing one of the values in `valueArr`. _Once the loop ends this variable __is destroyed___. Notably, `i` is _not_ directly the value in `valueArr` - modifying it __does nothing__ - other than affect this one loop if you use `i` later in within the block. It _does not_ modify the contents of `valueArr`.\r\n\r\nHence why you get the warning: `i = -1` does nothing - you change what `i` is, and then the loop ends, which means `i` __goes away__ and your code hasn&#39;t changed anything or done anything, which surely you didn&#39;t intend. Hence, warning.\r\n\r\nIt&#39;s not entirely clear what you want to do here. If you intend to set all values in `valueArr` to -1, you want:\r\n\r\n```\r\nfor (int i = 0; i &lt; valueArr.length; i++) valueArr[i] = -1;\r\n```\r\n\r\nOr, actually, you can do that more simply:\r\n\r\n```\r\nArrays.fill(valueArr, -1);\r\n```\r\n\r\n`valueArr[i] = -1` changes the value of the `i`-th value in the `valueArr` array to `-1`. `for (int i : valueArr) i = -1;` does _nothing_.\r\n","title":"Variable in for loop is giving a message that &quot;The value of the local variable i is not used&quot;","body":"<blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i : valueArr) {\n .... CODE HERE ...\n}\n</code></pre>\n</blockquote>\n<p>This sets up a loop which will run <code>CODE HERE</code> a certain number of times. Inside this loop, at the start of every loop, an entirely new variable is created named <code>i</code>, containing one of the values in <code>valueArr</code>. <em>Once the loop ends this variable <strong>is destroyed</strong></em>. Notably, <code>i</code> is <em>not</em> directly the value in <code>valueArr</code> - modifying it <strong>does nothing</strong> - other than affect this one loop if you use <code>i</code> later in within the block. It <em>does not</em> modify the contents of <code>valueArr</code>.</p>\n<p>Hence why you get the warning: <code>i = -1</code> does nothing - you change what <code>i</code> is, and then the loop ends, which means <code>i</code> <strong>goes away</strong> and your code hasn't changed anything or done anything, which surely you didn't intend. Hence, warning.</p>\n<p>It's not entirely clear what you want to do here. If you intend to set all values in <code>valueArr</code> to -1, you want:</p>\n<pre><code>for (int i = 0; i &lt; valueArr.length; i++) valueArr[i] = -1;\n</code></pre>\n<p>Or, actually, you can do that more simply:</p>\n<pre><code>Arrays.fill(valueArr, -1);\n</code></pre>\n<p><code>valueArr[i] = -1</code> changes the value of the <code>i</code>-th value in the <code>valueArr</code> array to <code>-1</code>. <code>for (int i : valueArr) i = -1;</code> does <em>nothing</em>.</p>\n"}],"owner":{"account_id":16929446,"reputation":7,"user_id":12244159,"display_name":"Ozakriid"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":75490473,"answer_count":1,"score":-2,"last_activity_date":1676681491,"creation_date":1676680348,"question_id":75490388,"body_markdown":"I wrote a for loop that is supposed to determine if there is user input. If there is, it sets the 6 elements of `int[] valueArr` to the input, a vararg `int[] statValue`. If there is no input, it sets all elements equal to -1.\r\n\r\n```\r\nif (statValue.length == 6) {\r\n    for (int i = 0; i &lt; 6; i++) {\r\n        valueArr[i] = statValue[i];\r\n    }\r\n\r\n} else {\r\n    for (int i : valueArr) {\r\n        i = -1;\r\n    }\r\n}\r\n```\r\n\r\nI am using Visual Studio Code, and it is giving me a message in `for (int i : valueArr)` :\r\n\r\n&gt; &quot;The value of the local variable i is not used.&quot;\r\n\r\nThat particular for loop syntax is still new to me, so I may be very well blind, but it was working in another file:\r\n\r\n```\r\nfor(int i : rollResults) {\r\n    sum = sum + i;\r\n}\r\n```\r\n\r\nI feel that I should also mention that the for loop giving me trouble is in a `private void` method. I&#39;m still fairly new and just recently started using private methods. I noticed the method would give the same message when not used elsewhere, but I do not see why it would appear here.\r\n\r\nI tried closing and reopening Visual Studio Code, deleting and retyping the code, and other forms of that. In my short experience, I&#39;ve had times where I received errors and messages that should not be there and fixed them with what I mentioned, but none of that worked here.","title":"Variable in for loop is giving a message that &quot;The value of the local variable i is not used&quot;","body":"<p>I wrote a for loop that is supposed to determine if there is user input. If there is, it sets the 6 elements of <code>int[] valueArr</code> to the input, a vararg <code>int[] statValue</code>. If there is no input, it sets all elements equal to -1.</p>\n<pre><code>if (statValue.length == 6) {\n    for (int i = 0; i &lt; 6; i++) {\n        valueArr[i] = statValue[i];\n    }\n\n} else {\n    for (int i : valueArr) {\n        i = -1;\n    }\n}\n</code></pre>\n<p>I am using Visual Studio Code, and it is giving me a message in <code>for (int i : valueArr)</code> :</p>\n<blockquote>\n<p>&quot;The value of the local variable i is not used.&quot;</p>\n</blockquote>\n<p>That particular for loop syntax is still new to me, so I may be very well blind, but it was working in another file:</p>\n<pre><code>for(int i : rollResults) {\n    sum = sum + i;\n}\n</code></pre>\n<p>I feel that I should also mention that the for loop giving me trouble is in a <code>private void</code> method. I'm still fairly new and just recently started using private methods. I noticed the method would give the same message when not used elsewhere, but I do not see why it would appear here.</p>\n<p>I tried closing and reopening Visual Studio Code, deleting and retyping the code, and other forms of that. In my short experience, I've had times where I received errors and messages that should not be there and fixed them with what I mentioned, but none of that worked here.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1676679580,"post_id":75490311,"comment_id":133192866,"body_markdown":"I fixed your example code formatting. In the future, either indent all lines by 4 spaces, *or* wrap in a pair of triple back-ticks.","body":"I fixed your example code formatting. In the future, either indent all lines by 4 spaces, <i>or</i> wrap in a pair of triple back-ticks."}],"answers":[{"comments":[{"owner":{"account_id":27716543,"reputation":1,"user_id":21158127,"display_name":"gone4-1000"},"score":0,"creation_date":1676681495,"post_id":75490403,"comment_id":133193052,"body_markdown":"ok but it counts 1 the nimbers as a word wich they are not ?","body":"ok but it counts 1 the nimbers as a word wich they are not ?"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1676702276,"post_id":75490403,"comment_id":133194737,"body_markdown":"@gone4-1000 So modify the code to count how many of the `w` strings have only letters and no digits.","body":"@gone4-1000 So modify the code to count how many of the <code>w</code> strings have only letters and no digits."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676680529,"creation_date":1676680529,"answer_id":75490403,"question_id":75490311,"body_markdown":"By calling `str.split(` inside your `for` loop, you are needlessly splitting the entire string over and over again. This is awkward. \r\n\r\nFirst [split][1] on spaces. \r\n\r\n    String[] words = input.split( &quot; &quot; ) ;\r\n    int countWords = words.length ;\r\n\r\nLoop that array to do your analysis. Start by [stripping][2] away [whitespace][3].\r\n\r\n    for( String word : words ) \r\n    {\r\n        String w = word.strip() ;\r\n        …\r\n    }\r\n\r\nTo work with individual characters, avoid `char`. That 16-bit value is physically incapable of representing most characters. Instead, use [code point][4] integer numbers. \r\n\r\nFor each word, get the code point integers assigned by the Unicode Consortium to each of the characters in your string. \r\n\r\n    int[] codePoints = w.codePoints().toArray();\r\n\r\nLoop those code points. Ask if the code point is a digit or a letter. If neither, let&#39;s count that too.\r\n\r\n```java\r\n{\r\n    if ( Character.isLetter( codePoint ) ) { countLetters++; }\r\n    else if ( Character.isDigit( codePoint ) ) { countDigits++; }\r\n    else countOther++ ;\r\n}\r\n```\r\n\r\nPull all that code together.\r\n\r\n```java\r\npackage work.basil.example.text;\r\n\r\nimport java.util.Arrays;\r\n\r\npublic class Words\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        Words app = new Words();\r\n        app.demo();\r\n    }\r\n\r\n    private void demo ( )\r\n    {\r\n        String input = &quot;Testing, testing, 1, 2, 3.&quot;;\r\n\r\n        String[] words = input.split( &quot; &quot; );\r\n        int countWords = words.length;\r\n        System.out.println( &quot;Arrays.toString( words ) = &quot; + Arrays.toString( words ) );\r\n\r\n        int countLetters = 0;\r\n        int countDigits = 0;\r\n        int countOther = 0;  // Punctuation, etc.\r\n        for ( String word : words )\r\n        {\r\n            String w = word.strip();\r\n            int[] codePoints = w.codePoints().toArray();\r\n            for ( int codePoint : codePoints )\r\n            {\r\n                if ( Character.isLetter( codePoint ) ) { countLetters++; }\r\n                else if ( Character.isDigit( codePoint ) ) { countDigits++; }\r\n                else { countOther++; }\r\n            }\r\n        }\r\n\r\n        System.out.println( &quot;countWords = &quot; + countWords );\r\n        System.out.println( &quot;countLetters = &quot; + countLetters );\r\n        System.out.println( &quot;countDigits = &quot; + countDigits );\r\n        System.out.println( &quot;countOther = &quot; + countOther );\r\n    }\r\n}\r\n```\r\n\r\nWhen run.\r\n\r\n```none\r\nArrays.toString( words ) = [Testing,, testing,, 1,, 2,, 3.]\r\ncountWords = 5\r\ncountLetters = 14\r\ncountDigits = 3\r\ncountOther = 5\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html#split(java.lang.String)\r\n  [2]: https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html#strip()\r\n  [3]: https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Character.html#isWhitespace(int)\r\n  [4]: https://en.wikipedia.org/wiki/Code_point","title":"how do i count words of an String input if i have already counted letters and numbers using Charact method, also count characters i have com this far?","body":"<p>By calling <code>str.split(</code> inside your <code>for</code> loop, you are needlessly splitting the entire string over and over again. This is awkward.</p>\n<p>First <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html#split(java.lang.String)\" rel=\"nofollow noreferrer\">split</a> on spaces.</p>\n<pre><code>String[] words = input.split( &quot; &quot; ) ;\nint countWords = words.length ;\n</code></pre>\n<p>Loop that array to do your analysis. Start by <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html#strip()\" rel=\"nofollow noreferrer\">stripping</a> away <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Character.html#isWhitespace(int)\" rel=\"nofollow noreferrer\">whitespace</a>.</p>\n<pre><code>for( String word : words ) \n{\n    String w = word.strip() ;\n    …\n}\n</code></pre>\n<p>To work with individual characters, avoid <code>char</code>. That 16-bit value is physically incapable of representing most characters. Instead, use <a href=\"https://en.wikipedia.org/wiki/Code_point\" rel=\"nofollow noreferrer\">code point</a> integer numbers.</p>\n<p>For each word, get the code point integers assigned by the Unicode Consortium to each of the characters in your string.</p>\n<pre><code>int[] codePoints = w.codePoints().toArray();\n</code></pre>\n<p>Loop those code points. Ask if the code point is a digit or a letter. If neither, let's count that too.</p>\n<pre class=\"lang-java prettyprint-override\"><code>{\n    if ( Character.isLetter( codePoint ) ) { countLetters++; }\n    else if ( Character.isDigit( codePoint ) ) { countDigits++; }\n    else countOther++ ;\n}\n</code></pre>\n<p>Pull all that code together.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.text;\n\nimport java.util.Arrays;\n\npublic class Words\n{\n    public static void main ( String[] args )\n    {\n        Words app = new Words();\n        app.demo();\n    }\n\n    private void demo ( )\n    {\n        String input = &quot;Testing, testing, 1, 2, 3.&quot;;\n\n        String[] words = input.split( &quot; &quot; );\n        int countWords = words.length;\n        System.out.println( &quot;Arrays.toString( words ) = &quot; + Arrays.toString( words ) );\n\n        int countLetters = 0;\n        int countDigits = 0;\n        int countOther = 0;  // Punctuation, etc.\n        for ( String word : words )\n        {\n            String w = word.strip();\n            int[] codePoints = w.codePoints().toArray();\n            for ( int codePoint : codePoints )\n            {\n                if ( Character.isLetter( codePoint ) ) { countLetters++; }\n                else if ( Character.isDigit( codePoint ) ) { countDigits++; }\n                else { countOther++; }\n            }\n        }\n\n        System.out.println( &quot;countWords = &quot; + countWords );\n        System.out.println( &quot;countLetters = &quot; + countLetters );\n        System.out.println( &quot;countDigits = &quot; + countDigits );\n        System.out.println( &quot;countOther = &quot; + countOther );\n    }\n}\n</code></pre>\n<p>When run.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Arrays.toString( words ) = [Testing,, testing,, 1,, 2,, 3.]\ncountWords = 5\ncountLetters = 14\ncountDigits = 3\ncountOther = 5\n</code></pre>\n"}],"owner":{"account_id":27716543,"reputation":1,"user_id":21158127,"display_name":"gone4-1000"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676680529,"creation_date":1676679090,"question_id":75490311,"body_markdown":"```java\r\npackage Shak;\r\n\r\nimport java.util.Iterator;\r\nimport java.util.Scanner;\r\n\r\npublic class Lesseon {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\tString str = sc.nextLine();\r\n\r\n\t\tSystem.out.println(str.length());\r\n\t\tint charc = 0;\r\n\t\tint numbers = 0;\r\n\t\tint alphabets = 0;\r\n\t\tint words = 0;\r\n\t\tfor (int i = 0; i &lt; str.length(); i++) {\r\n\t\t\tif (Character.isLetter(str.charAt(i))) {\r\n\t\t\t\talphabets++;\r\n\r\n\t\t\t}\r\n\t\t\tif (Character.isDigit(str.charAt(i))) {\r\n\t\t\t\tnumbers++;\r\n\r\n\t\t\t}\r\n\t\t\tstr.split(&quot;\\\\s++&quot;); //trying to split to remove the white space and then `your text`count the characters \r\n\t\t\tif (str.length()&lt;0) {\r\n\t\t\t\tcharc= (alphabets+numbers)-str.length();\r\n\t\t\t}\r\n\t\t\telse {\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tSystem.out.println(alphabets);\r\n\t\tSystem.out.println(numbers);\r\n\t\tSystem.out.println(charc);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nI thought spliting would remove the white spaces and then i coud use my alphabet counter and number together minus the lenght and would get the odd characters, i have no idea how to count the words","title":"how do i count words of an String input if i have already counted letters and numbers using Charact method, also count characters i have com this far?","body":"<pre class=\"lang-java prettyprint-override\"><code>package Shak;\n\nimport java.util.Iterator;\nimport java.util.Scanner;\n\npublic class Lesseon {\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        String str = sc.nextLine();\n\n        System.out.println(str.length());\n        int charc = 0;\n        int numbers = 0;\n        int alphabets = 0;\n        int words = 0;\n        for (int i = 0; i &lt; str.length(); i++) {\n            if (Character.isLetter(str.charAt(i))) {\n                alphabets++;\n\n            }\n            if (Character.isDigit(str.charAt(i))) {\n                numbers++;\n\n            }\n            str.split(&quot;\\\\s++&quot;); //trying to split to remove the white space and then `your text`count the characters \n            if (str.length()&lt;0) {\n                charc= (alphabets+numbers)-str.length();\n            }\n            else {\n\n            }\n\n        }\n\n        System.out.println(alphabets);\n        System.out.println(numbers);\n        System.out.println(charc);\n    }\n\n}\n</code></pre>\n<p>I thought spliting would remove the white spaces and then i coud use my alphabet counter and number together minus the lenght and would get the odd characters, i have no idea how to count the words</p>\n"},{"tags":["java","file"],"comments":[{"owner":{"account_id":5120989,"reputation":6044,"user_id":4104555,"display_name":"ProgrammersBlock"},"score":0,"creation_date":1676680125,"post_id":75490310,"comment_id":133192917,"body_markdown":"Could you try adding System.out.println(&quot;Position:&quot; + i + &quot; Line &#39;&quot; + line.charAt(i) + &quot;&#39; LineToAdd &#39;&quot; + lineToAdd.charAt(i) + &quot;&#39;&quot;);  above the &quot;variable changed&quot;?","body":"Could you try adding System.out.println(&quot;Position:&quot; + i + &quot; Line &#39;&quot; + line.charAt(i) + &quot;&#39; LineToAdd &#39;&quot; + lineToAdd.charAt(i) + &quot;&#39;&quot;);  above the &quot;variable changed&quot;?"},{"owner":{"account_id":26162526,"reputation":11,"user_id":19848808,"display_name":"Abriel "},"score":0,"creation_date":1676681326,"post_id":75490310,"comment_id":133193036,"body_markdown":"@ProgrammersBlock Thank you, using that console log actually helped me find the error. My approach for this method was bad because after each line of the txt file got scanned it would check if that individual line is the duplicate, and if it was, it would still move on to check to the next line. Then since the next line was not a duplicate, the SongAlreadyExists variable was changed to false, completely disregarding the previous lines.","body":"@ProgrammersBlock Thank you, using that console log actually helped me find the error. My approach for this method was bad because after each line of the txt file got scanned it would check if that individual line is the duplicate, and if it was, it would still move on to check to the next line. Then since the next line was not a duplicate, the SongAlreadyExists variable was changed to false, completely disregarding the previous lines."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1676712034,"post_id":75490310,"comment_id":133195692,"body_markdown":"Watch your [naming](https://technojeeves.com/index.php/aliasjava1/106-java-style-conventions)\n- your code is hard to read as a result","body":"Watch your <a href=\"https://technojeeves.com/index.php/aliasjava1/106-java-style-conventions\" rel=\"nofollow noreferrer\">naming</a> - your code is hard to read as a result"}],"owner":{"account_id":26162526,"reputation":11,"user_id":19848808,"display_name":"Abriel "},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676679078,"creation_date":1676679078,"question_id":75490310,"body_markdown":"This method is supposed to add a song&#39;s information to a txt file, but first it needs to check if a song with the same name and artist already exists. \r\n\r\n```\r\nstatic void addSong(Song song){\r\n        Boolean SongAlreadyExists = true;\r\n\r\n        // variable is to compare if song already exists char by char up to artist\r\n        String lineToAdd = &quot;NAME:&quot; + song.name + &quot;|ARTIST:&quot; + song.artist;\r\n        \r\n        try {\r\n            FileReader fReader = new FileReader(&quot;songs.txt&quot;);\r\n            BufferedReader bReader = new BufferedReader(fReader);\r\n            String line;             \r\n\r\n            while((line = bReader.readLine()) != null){\r\n                for (int i=0; i &lt; lineToAdd.length(); i++){\r\n                    if (line.charAt(i) != lineToAdd.charAt(i)){\r\n                        SongAlreadyExists = false;\r\n                        System.out.println(&quot;variable changed&quot;);\r\n                    }\r\n                }\r\n            }\r\n            bReader.close();\r\n            fReader.close();\r\n\r\n        } catch (IOException exception){\r\n            System.out.println(&quot;file not found&quot;);\r\n        }\r\n\r\n        //add song to the text file with all songs if song doesnt exist        \r\n        if (! (SongAlreadyExists)){\r\n           System.out.println(&quot;Adding song&quot;);\r\n            try {\r\n                FileWriter fileWriter = new FileWriter(&quot;songs.txt&quot;, true);\r\n                fileWriter.write(&quot;\\nNAME:&quot; + song.name + &quot;|ARTIST:&quot; + song.artist + &quot;|ALBUM:&quot; + song.album + &quot;|YEAR:&quot; + song.year + &quot;|&quot;);\r\n                fileWriter.close();\r\n            } catch (Exception exception){\r\n                System.out.println(&quot;error&quot;);\r\n            }\r\n        }\r\n\r\n```\r\n\r\nAnd this is the data in the txt file using the same data from the object I am testing\r\n```\r\nNAME:TestName|ARTIST:TestArtist|ALBUM:TestAlbum|YEAR:2005|\r\n```\r\n\r\nFor some reason I keep running the code with the same test song object and it keeps saying that a duplicate does not exist, but in the text file I clearly see the duplicates being added. In the console, the &quot;variable changed&quot; keeps getting outputted multiple times every time even though it is the same test object being used. How can I check if the information of an object is already stored in a txt file?","title":"Having trouble comparing a Java string with a line from a txt file","body":"<p>This method is supposed to add a song's information to a txt file, but first it needs to check if a song with the same name and artist already exists.</p>\n<pre><code>static void addSong(Song song){\n        Boolean SongAlreadyExists = true;\n\n        // variable is to compare if song already exists char by char up to artist\n        String lineToAdd = &quot;NAME:&quot; + song.name + &quot;|ARTIST:&quot; + song.artist;\n        \n        try {\n            FileReader fReader = new FileReader(&quot;songs.txt&quot;);\n            BufferedReader bReader = new BufferedReader(fReader);\n            String line;             \n\n            while((line = bReader.readLine()) != null){\n                for (int i=0; i &lt; lineToAdd.length(); i++){\n                    if (line.charAt(i) != lineToAdd.charAt(i)){\n                        SongAlreadyExists = false;\n                        System.out.println(&quot;variable changed&quot;);\n                    }\n                }\n            }\n            bReader.close();\n            fReader.close();\n\n        } catch (IOException exception){\n            System.out.println(&quot;file not found&quot;);\n        }\n\n        //add song to the text file with all songs if song doesnt exist        \n        if (! (SongAlreadyExists)){\n           System.out.println(&quot;Adding song&quot;);\n            try {\n                FileWriter fileWriter = new FileWriter(&quot;songs.txt&quot;, true);\n                fileWriter.write(&quot;\\nNAME:&quot; + song.name + &quot;|ARTIST:&quot; + song.artist + &quot;|ALBUM:&quot; + song.album + &quot;|YEAR:&quot; + song.year + &quot;|&quot;);\n                fileWriter.close();\n            } catch (Exception exception){\n                System.out.println(&quot;error&quot;);\n            }\n        }\n\n</code></pre>\n<p>And this is the data in the txt file using the same data from the object I am testing</p>\n<pre><code>NAME:TestName|ARTIST:TestArtist|ALBUM:TestAlbum|YEAR:2005|\n</code></pre>\n<p>For some reason I keep running the code with the same test song object and it keeps saying that a duplicate does not exist, but in the text file I clearly see the duplicates being added. In the console, the &quot;variable changed&quot; keeps getting outputted multiple times every time even though it is the same test object being used. How can I check if the information of an object is already stored in a txt file?</p>\n"},{"tags":["java","android","string","textview"],"comments":[{"owner":{"account_id":7006298,"reputation":2021,"user_id":5370550,"accept_rate":22,"display_name":"Nik"},"score":0,"creation_date":1521106650,"post_id":49295758,"comment_id":85593795,"body_markdown":"You can take two different textview and set first textview gravity to center","body":"You can take two different textview and set first textview gravity to center"},{"owner":{"account_id":5212777,"reputation":20542,"user_id":4168607,"accept_rate":28,"display_name":"ADM"},"score":0,"creation_date":1521106798,"post_id":49295758,"comment_id":85593906,"body_markdown":"If this is the only case then you can use Two `TextView` for it . If this can multiple times like a paragraph then you should go with `HTML` text . Or you can directly use HTML for this scenario too .","body":"If this is the only case then you can use Two <code>TextView</code> for it . If this can multiple times like a paragraph then you should go with <code>HTML</code> text . Or you can directly use HTML for this scenario too ."},{"owner":{"account_id":10753028,"reputation":90,"user_id":7911746,"display_name":"Manpreet Matharu"},"score":0,"creation_date":1521106840,"post_id":49295758,"comment_id":85593936,"body_markdown":"You can refer this [link](https://stackoverflow.com/questions/432037/how-do-i-center-text-horizontally-and-vertically-in-a-textview-on-android) for making text align center in a textview.","body":"You can refer this <a href=\"https://stackoverflow.com/questions/432037/how-do-i-center-text-horizontally-and-vertically-in-a-textview-on-android\">link</a> for making text align center in a textview."},{"owner":{"display_name":"user9458976"},"score":0,"creation_date":1521110852,"post_id":49295758,"comment_id":85596655,"body_markdown":"I have long paragraph actually and some text of the paragraph needs to be aligned center only. Multiple TextView makes the whole purpose more complicated in my case.","body":"I have long paragraph actually and some text of the paragraph needs to be aligned center only. Multiple TextView makes the whole purpose more complicated in my case."}],"answers":[{"comments":[{"owner":{"display_name":"user9458976"},"score":0,"creation_date":1521110624,"post_id":49295909,"comment_id":85596509,"body_markdown":"I tried this but  the heading didn&#39;t take position at the center.","body":"I tried this but  the heading didn&#39;t take position at the center."},{"owner":{"account_id":10895208,"reputation":5019,"user_id":8009433,"display_name":"Navneet Krishna"},"score":0,"creation_date":1521110851,"post_id":49295909,"comment_id":85596654,"body_markdown":"it will take the center position, iam attaching a screenshot of the result in my answer","body":"it will take the center position, iam attaching a screenshot of the result in my answer"},{"owner":{"display_name":"user9458976"},"score":1,"creation_date":1521111347,"post_id":49295909,"comment_id":85596982,"body_markdown":"Please check my result.  would you please share your xml code for textview?  \n\nhttps://prnt.sc/iri6vn \n\nIt seems to me from your pic that you have aligned the whole TextView as center. So, rest of the text gets also aligned center. But I need only heading at the center.","body":"Please check my result.  would you please share your xml code for textview?    <a href=\"https://prnt.sc/iri6vn\" rel=\"nofollow noreferrer\">prnt.sc/iri6vn</a>   It seems to me from your pic that you have aligned the whole TextView as center. So, rest of the text gets also aligned center. But I need only heading at the center."}],"tags":[],"owner":{"account_id":10895208,"reputation":5019,"user_id":8009433,"display_name":"Navneet Krishna"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1521110915,"creation_date":1521106747,"answer_id":49295909,"question_id":49295758,"body_markdown":"You can use `Html.fromHtml`.Using this you only need single `textview`. Just do this, it should work perfectly\r\n    \r\n     your_textview.setText(Html.fromHtml(&quot;&lt;h&gt;&lt;center&gt;&lt;b&gt;&lt;u&gt;SYRIA&lt;/u&gt;&lt;/b&gt;&lt;/center&gt;&lt;/h&gt;\\n&quot; +\r\n                &quot;    &lt;p&gt;Syria oh Syria why do you bleed?&lt;/p&gt; &lt;/br&gt;\\n&quot; +\r\n                &quot;    &lt;p&gt;Brother fights brother without thought or need&lt;/p&gt; &lt;/br&gt;\\n&quot; +\r\n                &quot;    &lt;p&gt;Ruled by a tyrant for so many years&lt;/p&gt; &lt;/br&gt;\\n&quot; +\r\n                &quot;    &lt;p&gt;And now the split blood is washed away by tears&lt;/p&gt; &lt;/br&gt;&quot;));\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Xikku.png","title":"set some text of a string at the center of a TextView","body":"<p>You can use <code>Html.fromHtml</code>.Using this you only need single <code>textview</code>. Just do this, it should work perfectly</p>\n\n<pre><code> your_textview.setText(Html.fromHtml(\"&lt;h&gt;&lt;center&gt;&lt;b&gt;&lt;u&gt;SYRIA&lt;/u&gt;&lt;/b&gt;&lt;/center&gt;&lt;/h&gt;\\n\" +\n            \"    &lt;p&gt;Syria oh Syria why do you bleed?&lt;/p&gt; &lt;/br&gt;\\n\" +\n            \"    &lt;p&gt;Brother fights brother without thought or need&lt;/p&gt; &lt;/br&gt;\\n\" +\n            \"    &lt;p&gt;Ruled by a tyrant for so many years&lt;/p&gt; &lt;/br&gt;\\n\" +\n            \"    &lt;p&gt;And now the split blood is washed away by tears&lt;/p&gt; &lt;/br&gt;\"));\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Xikku.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Xikku.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":7006298,"reputation":2021,"user_id":5370550,"accept_rate":22,"display_name":"Nik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1521106905,"creation_date":1521106905,"answer_id":49295965,"question_id":49295758,"body_markdown":"    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/textView1&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:text=&quot;seria&quot;\r\n            android:textSize=&quot;20sp&quot;\r\n            /&gt;\r\n    \r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/textView2&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:text=&quot;Syria oh Syria why do you bleed?\r\n            \\nBrother fights brother without thought or need\r\n        \\nRuled by a tyrant for so many years\r\n        \\nAnd now the spilt blood is washed away by tears&quot;\r\n            /&gt;\r\n    \r\n    &lt;/LinearLayout&gt;","title":"set some text of a string at the center of a TextView","body":"<pre><code>&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_height=\"match_parent\"\n    android:layout_width=\"match_parent\"\n    android:orientation=\"vertical\"&gt;\n\n\n    &lt;TextView\n        android:id=\"@+id/textView1\"\n        android:layout_height=\"wrap_content\"\n        android:layout_width=\"wrap_content\"\n        android:layout_gravity=\"center\"\n        android:text=\"seria\"\n        android:textSize=\"20sp\"\n        /&gt;\n\n\n    &lt;TextView\n        android:id=\"@+id/textView2\"\n        android:layout_height=\"match_parent\"\n        android:layout_width=\"wrap_content\"\n        android:text=\"Syria oh Syria why do you bleed?\n        \\nBrother fights brother without thought or need\n    \\nRuled by a tyrant for so many years\n    \\nAnd now the spilt blood is washed away by tears\"\n        /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6349133,"reputation":934,"user_id":4928762,"accept_rate":31,"display_name":"Siraj Sumra"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676678634,"creation_date":1521107905,"answer_id":49296355,"question_id":49295758,"body_markdown":"You can wither use 2 different Textviews or If there is single textview, you can use HTML or Spannable String for that. Spannable can be used as follows:\r\n\r\n\r\n    TextView resultView = new TextView(this);\r\n    final String SyriaText = &quot;Syria&quot;;\r\n    final String OtherText = &quot;Other Text&quot;;\r\n    final String result = SyriaText + &quot;  &quot; + OtherText;\r\n    final SpannableString finalResult = new SpannableString(result);\r\n    finalResult.setSpan(new AlignmentSpan.Standard(Alignment.ALIGN_CENTER), 0, SyriaText.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);\r\n    resultView.setText(finalResult);\r\n\r\nAlso you can style it with Spannable. You can learn more from : https://developer.android.com/reference/android/text/Spannable.html","title":"set some text of a string at the center of a TextView","body":"<p>You can wither use 2 different Textviews or If there is single textview, you can use HTML or Spannable String for that. Spannable can be used as follows:</p>\n<pre><code>TextView resultView = new TextView(this);\nfinal String SyriaText = &quot;Syria&quot;;\nfinal String OtherText = &quot;Other Text&quot;;\nfinal String result = SyriaText + &quot;  &quot; + OtherText;\nfinal SpannableString finalResult = new SpannableString(result);\nfinalResult.setSpan(new AlignmentSpan.Standard(Alignment.ALIGN_CENTER), 0, SyriaText.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);\nresultView.setText(finalResult);\n</code></pre>\n<p>Also you can style it with Spannable. You can learn more from : <a href=\"https://developer.android.com/reference/android/text/Spannable.html\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/text/Spannable.html</a></p>\n"}],"owner":{"display_name":"user9458976"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2431,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":49296355,"answer_count":3,"score":1,"last_activity_date":1676678634,"creation_date":1521106364,"question_id":49295758,"body_markdown":"I want to fix some text of string in the center. How can I do that? \r\nFor example, take a look on this photo\r\n\r\n[![Heading at the center][1]][1]\r\n\r\nI have a string like that. Now I want some words (Heading) of my string to be shown in a `TextView` at the center horizontally but others word will remain as usual. How can I do that?\r\n\r\nI have tried the following code but it doesn&#39;t work for various dimension&#39;s devices.\r\n\r\n              String string= &quot;                 SYRIA\r\n    \\n\\nSyria oh Syria why do you bleed?\r\n            \\nBrother fights brother without thought or need\r\n        \\nRuled by a tyrant for so many years\r\n        \\nAnd now the split blood is washed away by tears\\n&quot;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EE5R1.jpg","title":"set some text of a string at the center of a TextView","body":"<p>I want to fix some text of string in the center. How can I do that? \nFor example, take a look on this photo</p>\n\n<p><a href=\"https://i.stack.imgur.com/EE5R1.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EE5R1.jpg\" alt=\"Heading at the center\"></a></p>\n\n<p>I have a string like that. Now I want some words (Heading) of my string to be shown in a <code>TextView</code> at the center horizontally but others word will remain as usual. How can I do that?</p>\n\n<p>I have tried the following code but it doesn't work for various dimension's devices.</p>\n\n<pre><code>          String string= \"                 SYRIA\n\\n\\nSyria oh Syria why do you bleed?\n        \\nBrother fights brother without thought or need\n    \\nRuled by a tyrant for so many years\n    \\nAnd now the split blood is washed away by tears\\n\"\n</code></pre>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":6,"creation_date":1676675499,"post_id":75489880,"comment_id":133192326,"body_markdown":"`getChildren().clear(); // Clear the pane` - this clears all the hard work done to get the numbers to display - followed by the adding of the clock and hands which are displayed.  Move the clear to just prior to the &quot;Draw hour markers&quot;.  Couldn&#39;t help myself and I verified your math on the hour markers - looks good!","body":"<code>getChildren().clear(); &#47;&#47; Clear the pane</code> - this clears all the hard work done to get the numbers to display - followed by the adding of the clock and hands which are displayed.  Move the clear to just prior to the &quot;Draw hour markers&quot;.  Couldn&#39;t help myself and I verified your math on the hour markers - looks good!"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":6,"creation_date":1676675905,"post_id":75489880,"comment_id":133192396,"body_markdown":"You don&#39;t have to clear, recreate and add all new nodes to the clock every time you want to update it.  You can just add everything once and update the properties of the things that need to change when they need to change. [sample clock code](https://gist.github.com/jewelsea/3388637) (the sample is a bit outdated and would need to be updated slightly to work in a modern JavaFX version).","body":"You don&#39;t have to clear, recreate and add all new nodes to the clock every time you want to update it.  You can just add everything once and update the properties of the things that need to change when they need to change. <a href=\"https://gist.github.com/jewelsea/3388637\" rel=\"nofollow noreferrer\">sample clock code</a> (the sample is a bit outdated and would need to be updated slightly to work in a modern JavaFX version)."}],"owner":{"account_id":26744898,"reputation":1,"user_id":20345094,"display_name":"annie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676675641,"creation_date":1676673831,"question_id":75489880,"body_markdown":"I am trying to add numbers around the clock from 1 to 12. The clock is not drawing the numbers. I have the clock drawn and the hour, minute, and second hands drawn. \r\n\r\n    import java.util.Calendar;\r\n    import java.util.GregorianCalendar;\r\n    import javafx.scene.layout.Pane;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.scene.shape.Circle;\r\n    import javafx.scene.shape.Line;\r\n    import javafx.scene.text.Text;\r\n    \r\n    public class ClockPane extends Pane {\r\n        private int hour;\r\n        private int minute;\r\n        private int second;\r\n    \r\n        /** Construct a default clock with the current time */\r\n        public ClockPane() {\r\n            setCurrentTime();\r\n        }\r\n    \r\n        /** Construct a clock with specified hour, minute, and second */\r\n        public ClockPane(int hour, int minute, int second) {\r\n            this.hour = hour;\r\n            this.minute = minute;\r\n            this.second = second;\r\n        }\r\n    \r\n        /** Return hour */\r\n        public int getHour() {\r\n            return hour;\r\n        }\r\n    \r\n        /** Set a new hour */\r\n        public void setHour(int hour) {\r\n            this.hour = hour;\r\n            paintClock();\r\n        }\r\n    \r\n        /** Return minute */\r\n        public int getMinute() {\r\n            return minute;\r\n        }\r\n    \r\n        /** Set a new minute */\r\n        public void setMinute(int minute) {\r\n            this.minute = minute;\r\n            paintClock();\r\n        }\r\n    \r\n        /** Return second */\r\n        public int getSecond() {\r\n            return second;\r\n        }\r\n    \r\n        /** Set a new second */\r\n        public void setSecond(int second) {\r\n            this.second = second;\r\n            paintClock();\r\n        }\r\n    \r\n        /* Set the current time for the clock */\r\n        public void setCurrentTime() {\r\n            // Construct a calendar for the current date and time\r\n            Calendar calendar = new GregorianCalendar();\r\n    \r\n            // Set current hour, minute and second\r\n            this.hour = calendar.get(Calendar.HOUR_OF_DAY);\r\n            this.minute = calendar.get(Calendar.MINUTE);\r\n            this.second = calendar.get(Calendar.SECOND);\r\n    \r\n            paintClock(); // Repaint the clock\r\n        }\r\n    \r\n        private void paintClock() {\r\n            // Initialize clock parameters\r\n            double clockRadius = Math.min(getWidth(), getHeight()) * 0.8 * 0.5;\r\n            double centerX = getWidth() / 2;\r\n            double centerY = getHeight() / 2;\r\n        \r\n            // Draw circle\r\n            Circle circle = new Circle(centerX, centerY, clockRadius);\r\n            circle.setFill(Color.WHITE);\r\n            circle.setStroke(Color.BLACK);\r\n        \r\n            // Draw hour markers\r\n            double numberRadius = clockRadius * 0.85;  \r\n            for (int i = 1; i &lt;= 12; i++) {\r\n                double numberX = centerX + numberRadius * Math.sin(i * 2 * Math.PI / 12);\r\n                double numberY = centerY - numberRadius * Math.cos(i * 2 * Math.PI / 12);\r\n                Text number = new Text(numberX - 5, numberY + 5, &quot;&quot; + i);\r\n                number.setFill(Color.BLACK);\r\n                getChildren().addAll(number);\r\n            }\r\n        \r\n            // Draw second hand\r\n            double sLength = clockRadius * 0.8;\r\n            double secondX = centerX + sLength * Math.sin(second * (2 * Math.PI / 60));\r\n            double secondY = centerY - sLength * Math.cos(second * (2 * Math.PI / 60));\r\n            Line sLine = new Line(centerX, centerY, secondX, secondY);\r\n            sLine.setStroke(Color.RED);\r\n        \r\n            // Draw minute hand\r\n            double mLength = clockRadius * 0.65;\r\n            double xMinute = centerX + mLength * Math.sin(minute * (2 * Math.PI / 60));\r\n            double minuteY = centerY - mLength * Math.cos(minute * (2 * Math.PI / 60));\r\n            Line mLine = new Line(centerX, centerY, xMinute, minuteY);\r\n            mLine.setStroke(Color.BLUE);\r\n        \r\n            // Draw hour hand\r\n            double hLength = clockRadius * 0.5;\r\n            double hourX =\r\n                    centerX + hLength * Math.sin((hour % 12 + minute / 60.0) * (2 * Math.PI / 12));\r\n            double hourY =\r\n                    centerY - hLength * Math.cos((hour % 12 + minute / 60.0) * (2 * Math.PI / 12));\r\n            Line hLine = new Line(centerX, centerY, hourX, hourY);\r\n            hLine.setStroke(Color.GREEN);\r\n        \r\n            getChildren().clear(); // Clear the pane\r\n            getChildren().addAll(circle, sLine, mLine, hLine);\r\n        }\r\n        \r\n        \r\n    \r\n        @Override\r\n        public void setWidth(double width) {\r\n            super.setWidth(width);\r\n            paintClock();\r\n        }\r\n    \r\n        @Override\r\n        public void setHeight(double height) {\r\n            super.setHeight(height);\r\n            paintClock();\r\n        }\r\n    }\r\n\r\n```\r\nimport javafx.application.Application;\r\nimport javafx.geometry.Pos;\r\nimport javafx.stage.Stage;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.Label;\r\nimport javafx.scene.layout.BorderPane;\r\n\r\npublic class DisplayClock extends Application {\r\n\r\n    @Override // Override the start method in the Application class\r\n    public void start(Stage primaryStage) {\r\n\r\n        // Create a clock and a label\r\n        ClockPane clock = new ClockPane();\r\n        String timeString = clock.getHour() + &quot;:&quot; + clock.getMinute() + &quot;:&quot; + clock.getSecond();\r\n        Label lblCurrentTime = new Label(timeString);\r\n\r\n        // Place clock and label in border pane\r\n        BorderPane pane = new BorderPane();\r\n        pane.setCenter(clock);\r\n        pane.setBottom(lblCurrentTime);\r\n        BorderPane.setAlignment(lblCurrentTime, Pos.TOP_CENTER);\r\n\r\n        // Create a scene and place it in the stage\r\n        Scene scene = new Scene(pane, 250, 250);\r\n        primaryStage.setTitle(&quot;DisplayClock&quot;); // Set the stage title\r\n        primaryStage.setScene(scene); // Place the scene in the stage\r\n        primaryStage.show(); // Display the stage\r\n    }\r\n\r\n    /**\r\n     * The main method is only needed for the IDE with limited\r\n     * JavaFX support. Not needed for running from the command line.\r\n     */\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n}\r\n```\r\n\r\nWhen I run the program the numbers are not showing on the clock. I check the imports. It&#39;s correct. The code is also correct. I don&#39;t know why it&#39;s not showing. What should I do to fix it?","title":"the clock not displaying the numbers 1 to 12 around the clock","body":"<p>I am trying to add numbers around the clock from 1 to 12. The clock is not drawing the numbers. I have the clock drawn and the hour, minute, and second hands drawn.</p>\n<pre><code>import java.util.Calendar;\nimport java.util.GregorianCalendar;\nimport javafx.scene.layout.Pane;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.Circle;\nimport javafx.scene.shape.Line;\nimport javafx.scene.text.Text;\n\npublic class ClockPane extends Pane {\n    private int hour;\n    private int minute;\n    private int second;\n\n    /** Construct a default clock with the current time */\n    public ClockPane() {\n        setCurrentTime();\n    }\n\n    /** Construct a clock with specified hour, minute, and second */\n    public ClockPane(int hour, int minute, int second) {\n        this.hour = hour;\n        this.minute = minute;\n        this.second = second;\n    }\n\n    /** Return hour */\n    public int getHour() {\n        return hour;\n    }\n\n    /** Set a new hour */\n    public void setHour(int hour) {\n        this.hour = hour;\n        paintClock();\n    }\n\n    /** Return minute */\n    public int getMinute() {\n        return minute;\n    }\n\n    /** Set a new minute */\n    public void setMinute(int minute) {\n        this.minute = minute;\n        paintClock();\n    }\n\n    /** Return second */\n    public int getSecond() {\n        return second;\n    }\n\n    /** Set a new second */\n    public void setSecond(int second) {\n        this.second = second;\n        paintClock();\n    }\n\n    /* Set the current time for the clock */\n    public void setCurrentTime() {\n        // Construct a calendar for the current date and time\n        Calendar calendar = new GregorianCalendar();\n\n        // Set current hour, minute and second\n        this.hour = calendar.get(Calendar.HOUR_OF_DAY);\n        this.minute = calendar.get(Calendar.MINUTE);\n        this.second = calendar.get(Calendar.SECOND);\n\n        paintClock(); // Repaint the clock\n    }\n\n    private void paintClock() {\n        // Initialize clock parameters\n        double clockRadius = Math.min(getWidth(), getHeight()) * 0.8 * 0.5;\n        double centerX = getWidth() / 2;\n        double centerY = getHeight() / 2;\n    \n        // Draw circle\n        Circle circle = new Circle(centerX, centerY, clockRadius);\n        circle.setFill(Color.WHITE);\n        circle.setStroke(Color.BLACK);\n    \n        // Draw hour markers\n        double numberRadius = clockRadius * 0.85;  \n        for (int i = 1; i &lt;= 12; i++) {\n            double numberX = centerX + numberRadius * Math.sin(i * 2 * Math.PI / 12);\n            double numberY = centerY - numberRadius * Math.cos(i * 2 * Math.PI / 12);\n            Text number = new Text(numberX - 5, numberY + 5, &quot;&quot; + i);\n            number.setFill(Color.BLACK);\n            getChildren().addAll(number);\n        }\n    \n        // Draw second hand\n        double sLength = clockRadius * 0.8;\n        double secondX = centerX + sLength * Math.sin(second * (2 * Math.PI / 60));\n        double secondY = centerY - sLength * Math.cos(second * (2 * Math.PI / 60));\n        Line sLine = new Line(centerX, centerY, secondX, secondY);\n        sLine.setStroke(Color.RED);\n    \n        // Draw minute hand\n        double mLength = clockRadius * 0.65;\n        double xMinute = centerX + mLength * Math.sin(minute * (2 * Math.PI / 60));\n        double minuteY = centerY - mLength * Math.cos(minute * (2 * Math.PI / 60));\n        Line mLine = new Line(centerX, centerY, xMinute, minuteY);\n        mLine.setStroke(Color.BLUE);\n    \n        // Draw hour hand\n        double hLength = clockRadius * 0.5;\n        double hourX =\n                centerX + hLength * Math.sin((hour % 12 + minute / 60.0) * (2 * Math.PI / 12));\n        double hourY =\n                centerY - hLength * Math.cos((hour % 12 + minute / 60.0) * (2 * Math.PI / 12));\n        Line hLine = new Line(centerX, centerY, hourX, hourY);\n        hLine.setStroke(Color.GREEN);\n    \n        getChildren().clear(); // Clear the pane\n        getChildren().addAll(circle, sLine, mLine, hLine);\n    }\n    \n    \n\n    @Override\n    public void setWidth(double width) {\n        super.setWidth(width);\n        paintClock();\n    }\n\n    @Override\n    public void setHeight(double height) {\n        super.setHeight(height);\n        paintClock();\n    }\n}\n</code></pre>\n<pre><code>import javafx.application.Application;\nimport javafx.geometry.Pos;\nimport javafx.stage.Stage;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Label;\nimport javafx.scene.layout.BorderPane;\n\npublic class DisplayClock extends Application {\n\n    @Override // Override the start method in the Application class\n    public void start(Stage primaryStage) {\n\n        // Create a clock and a label\n        ClockPane clock = new ClockPane();\n        String timeString = clock.getHour() + &quot;:&quot; + clock.getMinute() + &quot;:&quot; + clock.getSecond();\n        Label lblCurrentTime = new Label(timeString);\n\n        // Place clock and label in border pane\n        BorderPane pane = new BorderPane();\n        pane.setCenter(clock);\n        pane.setBottom(lblCurrentTime);\n        BorderPane.setAlignment(lblCurrentTime, Pos.TOP_CENTER);\n\n        // Create a scene and place it in the stage\n        Scene scene = new Scene(pane, 250, 250);\n        primaryStage.setTitle(&quot;DisplayClock&quot;); // Set the stage title\n        primaryStage.setScene(scene); // Place the scene in the stage\n        primaryStage.show(); // Display the stage\n    }\n\n    /**\n     * The main method is only needed for the IDE with limited\n     * JavaFX support. Not needed for running from the command line.\n     */\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n<p>When I run the program the numbers are not showing on the clock. I check the imports. It's correct. The code is also correct. I don't know why it's not showing. What should I do to fix it?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":7512472,"reputation":687,"user_id":5706996,"display_name":"KoalaKoalified"},"score":0,"creation_date":1628014883,"post_id":68641037,"comment_id":121307885,"body_markdown":"When an image / video goes into the documents folder is it doomed to remain however it is named for all time?","body":"When an image / video goes into the documents folder is it doomed to remain however it is named for all time?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1628015217,"post_id":68641037,"comment_id":121307984,"body_markdown":"First tell how you created that file. The code you posted mixes File and MediaStore class and can never work certainly where you also use a FileProvider. All makes no sense.","body":"First tell how you created that file. The code you posted mixes File and MediaStore class and can never work certainly where you also use a FileProvider. All makes no sense."},{"owner":{"account_id":7512472,"reputation":687,"user_id":5706996,"display_name":"KoalaKoalified"},"score":0,"creation_date":1628015265,"post_id":68641037,"comment_id":121308009,"body_markdown":"The old code works fine and the file creation has no issues. The problem occurs when renaming the file. Also the videos are dropped into the documents folder","body":"The old code works fine and the file creation has no issues. The problem occurs when renaming the file. Also the videos are dropped into the documents folder"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1628016491,"post_id":68641037,"comment_id":121308432,"body_markdown":"Your code dies not make sense. And you did not even show how you called renameVideoFile.","body":"Your code dies not make sense. And you did not even show how you called renameVideoFile."},{"owner":{"account_id":7512472,"reputation":687,"user_id":5706996,"display_name":"KoalaKoalified"},"score":0,"creation_date":1628016594,"post_id":68641037,"comment_id":121308470,"body_markdown":"contentValues.put(MediaStore.Files.FileColumns.DISPLAY_NAME, to.getName());\nrenames the video","body":"contentValues.put(MediaStore.Files.FileColumns.DISPLAY_NAME, to.getName()); renames the video"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1628020882,"post_id":68641037,"comment_id":121309759,"body_markdown":"That code makes no sense and you did not give the info i asked for.","body":"That code makes no sense and you did not give the info i asked for."}],"answers":[{"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1628060037,"post_id":68643545,"comment_id":121317324,"body_markdown":"`Uri fromUri = FileProvider.getUriForFile(context, context.getPackageName() + &quot;.provider&quot;, file);\n\n            if (getRealPathFromURI(context, fromUri) == null) {\n` That code makes no sense. Of course it returns null. For al uries you might invent. Call it several times and it stays null.","body":"<code>Uri fromUri = FileProvider.getUriForFile(context, context.getPackageName() + &quot;.provider&quot;, file);              if (getRealPathFromURI(context, fromUri) == null) { </code> That code makes no sense. Of course it returns null. For al uries you might invent. Call it several times and it stays null."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1628060144,"post_id":68643545,"comment_id":121317359,"body_markdown":"And again you are not showing how you call renameVideoFile(). And wasnt this post about renaming?","body":"And again you are not showing how you call renameVideoFile(). And wasnt this post about renaming?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1628060720,"post_id":68643545,"comment_id":121317575,"body_markdown":"`I wish I could just do a whole folder of` It is a pitty that you did not give a small introduction to what you do in your code like adding to mediastore and catching a securityException which is the way to go. And further google promised to add a function to handle a batch of uries in one go. Pretty possible it is already there.","body":"<code>I wish I could just do a whole folder of</code> It is a pitty that you did not give a small introduction to what you do in your code like adding to mediastore and catching a securityException which is the way to go. And further google promised to add a function to handle a batch of uries in one go. Pretty possible it is already there."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1628060850,"post_id":68643545,"comment_id":121317630,"body_markdown":"And you could have used SAF to let the user choose the directory. After that you would have full access to all files and in a small loop you could rename all.","body":"And you could have used SAF to let the user choose the directory. After that you would have full access to all files and in a small loop you could rename all."},{"owner":{"account_id":7512472,"reputation":687,"user_id":5706996,"display_name":"KoalaKoalified"},"score":0,"creation_date":1628062644,"post_id":68643545,"comment_id":121318240,"body_markdown":"And that snippet does exactly what it&#39;s supposed to do. It renames files that were not added by my app","body":"And that snippet does exactly what it&#39;s supposed to do. It renames files that were not added by my app"},{"owner":{"account_id":15431364,"reputation":770,"user_id":11132702,"display_name":"private static"},"score":0,"creation_date":1641723835,"post_id":68643545,"comment_id":124875734,"body_markdown":"Appreciate your effort because I&#39;m having trouble renaming videos on Android 11. But this was not helpful. A lot of undefined codes which seem to be your own implementation.","body":"Appreciate your effort because I&#39;m having trouble renaming videos on Android 11. But this was not helpful. A lot of undefined codes which seem to be your own implementation."},{"owner":{"account_id":19210762,"reputation":331,"user_id":14036612,"display_name":"swiftbegineer"},"score":0,"creation_date":1660970298,"post_id":68643545,"comment_id":129664717,"body_markdown":"Can you tell me about the presenter.getFromFilePath() function?","body":"Can you tell me about the presenter.getFromFilePath() function?"}],"tags":[],"owner":{"account_id":7512472,"reputation":687,"user_id":5706996,"display_name":"KoalaKoalified"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628031832,"creation_date":1628030719,"answer_id":68643545,"question_id":68641037,"body_markdown":"EDIT: The external folder I chose was the documents folder FYI\r\n\r\nSo I did finally get it working. Here is the code to rename a video (it may not be the best but it does the trick!)\r\n\r\n    private static void tryAddVideosToMediaStore(Activity context) {\r\n        List&lt;File&gt; files = MediaUtils.getVideoFilesFromDirectory();\r\n        for (File file : files) {\r\n            try {\r\n                Uri fromUri = FileProvider.getUriForFile(context, context.getPackageName() + &quot;.provider&quot;, file);\r\n\r\n                if (getRealPathFromURI(context, fromUri) == null) {\r\n\r\n                    String nameWoExtension = MediaUtils.getNameWithoutStatus(file.getAbsolutePath());\r\n                    ContentValues values = new ContentValues(3);\r\n                    values.put(MediaStore.Video.Media.TITLE, nameWoExtension);\r\n                    values.put(MediaStore.Video.Media.MIME_TYPE, &quot;video/mp4&quot;);\r\n                    values.put(MediaStore.Video.Media.DATA, file.getAbsolutePath());\r\n                    context.getContentResolver().insert(MediaStore.Video.Media.EXTERNAL_CONTENT_URI, values);\r\n                }\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    public static String getRealPathFromURI(Context context, Uri contentUri) {\r\n        Cursor cursor = null;\r\n        try {\r\n            String[] proj = {MediaStore.Images.Media.DATA};\r\n            cursor = context.getContentResolver().query(contentUri, proj, null, null, null);\r\n            int column_index = cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATA);\r\n            cursor.moveToFirst();\r\n            return cursor.getString(column_index);\r\n        } catch(Exception e) {\r\n            return null;\r\n        }finally {\r\n            if (cursor != null) {\r\n                cursor.close();\r\n            }\r\n        }\r\n    }\r\n\r\nAnd then the calling methods\r\n\r\n    \r\n    public static String getVideoNameFromPath(String path) {\r\n        return path.substring(path.lastIndexOf(&quot;/&quot;) + 1, path.indexOf(&quot;.mp4&quot;));\r\n    }\r\n\r\n    public static boolean renameVideoFile(MainActivityViewModel viewModel, SharedPreferenceHelper sharedPreferenceHelper, Activity c, File from, File to) {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\r\n            tryAddVideosToMediaStore(c);\r\n            Uri fromUri = MediaUtils.getVideoUriFromFS(c, from);\r\n            try {\r\n                ContentResolver contentResolver = c.getContentResolver();\r\n                ContentValues contentValues = new ContentValues();\r\n\r\n                contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 1);\r\n                contentResolver.update(fromUri, contentValues, null, null);\r\n                contentValues.clear();\r\n                contentValues.put(MediaStore.Files.FileColumns.DISPLAY_NAME, to.getName());\r\n                contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 0);\r\n                contentResolver.update(fromUri, contentValues, null, null);\r\n                return true;\r\n            } catch (Exception securityException) {\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n                    sharedPreferenceHelper.get().edit().putString(&quot;from&quot;, from.getAbsolutePath()).putString(&quot;to&quot;, to.getAbsolutePath()).apply();\r\n                    RecoverableSecurityException recoverableSecurityException;\r\n                    viewModel.setContentUri(fromUri);\r\n\r\n                    if (securityException instanceof RecoverableSecurityException) {\r\n                        recoverableSecurityException =\r\n                                (RecoverableSecurityException) securityException;\r\n                    } else {\r\n                        requestVideoWritePermissions(c, Uri.parse(MediaStore.Video.Media.EXTERNAL_CONTENT_URI + &quot;/&quot; + MediaUtils.getVideoId(c, from)));\r\n                        return false;\r\n                    }\r\n                    IntentSender intentSender = recoverableSecurityException.getUserAction()\r\n                            .getActionIntent().getIntentSender();\r\n\r\n                    try {\r\n                        c.startIntentSenderForResult(intentSender, 55,\r\n                                null, 0, 0, 0);\r\n                    } catch (Exception e) {\r\n                        e.printStackTrace();\r\n                        return false;\r\n                    }\r\n                } else {\r\n                    throw new RuntimeException(\r\n                            securityException.getMessage(), securityException);\r\n                }\r\n            }\r\n            return false;\r\n        } else {\r\n            if (from.renameTo(to)) {\r\n                removeMedia(c, from);\r\n                addMedia(c, to);\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n    \r\n    public static Uri getVideoUriFromFS(Context c, File file) {\r\n        long id = getFilePathToMediaID(file, c);\r\n        Uri fromUri = ContentUris.withAppendedId( MediaStore.Video.Media.EXTERNAL_CONTENT_URI,id);\r\n        return fromUri;\r\n    }\r\n\r\n\r\n    \r\n    public static long getFilePathToMediaID(File videoPath, Context context)\r\n    {\r\n        Uri mainUri;\r\n        Cursor cursor1 = context.getContentResolver().query(\r\n                MediaStore.Video.Media.EXTERNAL_CONTENT_URI,\r\n                new String[]{MediaStore.Video.Media._ID},\r\n                MediaStore.Video.Media.DATA + &quot;=? &quot;,\r\n                new String[]{videoPath.getAbsolutePath()}, null);\r\n        long id = 0;\r\n        if (cursor1 != null &amp;&amp; cursor1.moveToFirst()) {\r\n\r\n            id = cursor1.getLong(cursor1.getColumnIndex(MediaStore.MediaColumns._ID));\r\n            cursor1.close();\r\n        }\r\n        return id;\r\n    }\r\n\r\n    \r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n    if (requestCode == 55) { //rename video request code\r\n            if (resultCode == RESULT_OK) {\r\n                //update UI\r\n                String from = presenter.getFromFilePath();\r\n                String to = presenter.getToFilePath();\r\n                if (from != null &amp;&amp; to != null) {\r\n                    Uri fromUri = MediaUtils.getVideoUriFromFS(this, new File(from));\r\n                    ContentResolver contentResolver = getContentResolver();\r\n                        ContentValues contentValues = new ContentValues();\r\n\r\n                        contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 1);\r\n                        contentResolver.update(fromUri, contentValues, null, null);\r\n                        contentValues.clear();\r\n                        contentValues.put(MediaStore.Files.FileColumns.DISPLAY_NAME, new File(to).getName());\r\n                        contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 0);\r\n                        contentResolver.update(fromUri, contentValues, null, null);\r\n                        //update UI\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nIf I forgot something please let me know and I will post it here. It took literally hours of searching to find this solution. I&#39;m quite upset at the simplicity vs the complexity that google has introduced.\r\n\r\nEDIT: I Think I forgot this method which was very important\r\n\r\n    \r\n    public static boolean requestVideoWritePermissions(Activity activity, Uri fromUri) {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\r\n\r\n            boolean hasPermission = true;\r\n            if (activity.checkUriPermission(fromUri, Binder.getCallingPid(), Binder.getCallingUid(),\r\n                    Intent.FLAG_GRANT_WRITE_URI_PERMISSION) != PackageManager.PERMISSION_GRANTED) {\r\n                hasPermission = false;\r\n            }\r\n\r\n            List&lt;Uri&gt; uriList = new ArrayList&lt;&gt;();\r\n            uriList.add(fromUri);\r\n\r\n            if (!hasPermission) {\r\n                PendingIntent pi = MediaStore.createWriteRequest(activity.getContentResolver(), uriList);\r\n                try {\r\n                    activity.startIntentSenderForResult(pi.getIntentSender(), 55, null, 0, 0, 0);\r\n                } catch (IntentSender.SendIntentException e) {\r\n                    e.printStackTrace();\r\n                }\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n        return true;\r\n    }\r\n\r\nI should also mention each video is a prompt this way. The user chooses whether or not to allow you to overwrite each video which was less than optimal. I wish I could just do a whole folder of external access but I&#39;m guessing that&#39;s not going to happen with scoped storage changes.","title":"Renaming Video / Image While Targeting Android 11 (Api 30)","body":"<p>EDIT: The external folder I chose was the documents folder FYI</p>\n<p>So I did finally get it working. Here is the code to rename a video (it may not be the best but it does the trick!)</p>\n<pre><code>private static void tryAddVideosToMediaStore(Activity context) {\n    List&lt;File&gt; files = MediaUtils.getVideoFilesFromDirectory();\n    for (File file : files) {\n        try {\n            Uri fromUri = FileProvider.getUriForFile(context, context.getPackageName() + &quot;.provider&quot;, file);\n\n            if (getRealPathFromURI(context, fromUri) == null) {\n\n                String nameWoExtension = MediaUtils.getNameWithoutStatus(file.getAbsolutePath());\n                ContentValues values = new ContentValues(3);\n                values.put(MediaStore.Video.Media.TITLE, nameWoExtension);\n                values.put(MediaStore.Video.Media.MIME_TYPE, &quot;video/mp4&quot;);\n                values.put(MediaStore.Video.Media.DATA, file.getAbsolutePath());\n                context.getContentResolver().insert(MediaStore.Video.Media.EXTERNAL_CONTENT_URI, values);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n\npublic static String getRealPathFromURI(Context context, Uri contentUri) {\n    Cursor cursor = null;\n    try {\n        String[] proj = {MediaStore.Images.Media.DATA};\n        cursor = context.getContentResolver().query(contentUri, proj, null, null, null);\n        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATA);\n        cursor.moveToFirst();\n        return cursor.getString(column_index);\n    } catch(Exception e) {\n        return null;\n    }finally {\n        if (cursor != null) {\n            cursor.close();\n        }\n    }\n}\n</code></pre>\n<p>And then the calling methods</p>\n<pre><code>public static String getVideoNameFromPath(String path) {\n    return path.substring(path.lastIndexOf(&quot;/&quot;) + 1, path.indexOf(&quot;.mp4&quot;));\n}\n\npublic static boolean renameVideoFile(MainActivityViewModel viewModel, SharedPreferenceHelper sharedPreferenceHelper, Activity c, File from, File to) {\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\n        tryAddVideosToMediaStore(c);\n        Uri fromUri = MediaUtils.getVideoUriFromFS(c, from);\n        try {\n            ContentResolver contentResolver = c.getContentResolver();\n            ContentValues contentValues = new ContentValues();\n\n            contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 1);\n            contentResolver.update(fromUri, contentValues, null, null);\n            contentValues.clear();\n            contentValues.put(MediaStore.Files.FileColumns.DISPLAY_NAME, to.getName());\n            contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 0);\n            contentResolver.update(fromUri, contentValues, null, null);\n            return true;\n        } catch (Exception securityException) {\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n                sharedPreferenceHelper.get().edit().putString(&quot;from&quot;, from.getAbsolutePath()).putString(&quot;to&quot;, to.getAbsolutePath()).apply();\n                RecoverableSecurityException recoverableSecurityException;\n                viewModel.setContentUri(fromUri);\n\n                if (securityException instanceof RecoverableSecurityException) {\n                    recoverableSecurityException =\n                            (RecoverableSecurityException) securityException;\n                } else {\n                    requestVideoWritePermissions(c, Uri.parse(MediaStore.Video.Media.EXTERNAL_CONTENT_URI + &quot;/&quot; + MediaUtils.getVideoId(c, from)));\n                    return false;\n                }\n                IntentSender intentSender = recoverableSecurityException.getUserAction()\n                        .getActionIntent().getIntentSender();\n\n                try {\n                    c.startIntentSenderForResult(intentSender, 55,\n                            null, 0, 0, 0);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                    return false;\n                }\n            } else {\n                throw new RuntimeException(\n                        securityException.getMessage(), securityException);\n            }\n        }\n        return false;\n    } else {\n        if (from.renameTo(to)) {\n            removeMedia(c, from);\n            addMedia(c, to);\n            return true;\n        } else {\n            return false;\n        }\n    }\n}\n\n\npublic static Uri getVideoUriFromFS(Context c, File file) {\n    long id = getFilePathToMediaID(file, c);\n    Uri fromUri = ContentUris.withAppendedId( MediaStore.Video.Media.EXTERNAL_CONTENT_URI,id);\n    return fromUri;\n}\n\n\n\npublic static long getFilePathToMediaID(File videoPath, Context context)\n{\n    Uri mainUri;\n    Cursor cursor1 = context.getContentResolver().query(\n            MediaStore.Video.Media.EXTERNAL_CONTENT_URI,\n            new String[]{MediaStore.Video.Media._ID},\n            MediaStore.Video.Media.DATA + &quot;=? &quot;,\n            new String[]{videoPath.getAbsolutePath()}, null);\n    long id = 0;\n    if (cursor1 != null &amp;&amp; cursor1.moveToFirst()) {\n\n        id = cursor1.getLong(cursor1.getColumnIndex(MediaStore.MediaColumns._ID));\n        cursor1.close();\n    }\n    return id;\n}\n\n\n@Override\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\nif (requestCode == 55) { //rename video request code\n        if (resultCode == RESULT_OK) {\n            //update UI\n            String from = presenter.getFromFilePath();\n            String to = presenter.getToFilePath();\n            if (from != null &amp;&amp; to != null) {\n                Uri fromUri = MediaUtils.getVideoUriFromFS(this, new File(from));\n                ContentResolver contentResolver = getContentResolver();\n                    ContentValues contentValues = new ContentValues();\n\n                    contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 1);\n                    contentResolver.update(fromUri, contentValues, null, null);\n                    contentValues.clear();\n                    contentValues.put(MediaStore.Files.FileColumns.DISPLAY_NAME, new File(to).getName());\n                    contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 0);\n                    contentResolver.update(fromUri, contentValues, null, null);\n                    //update UI\n            }\n        }\n    }\n}\n</code></pre>\n<p>If I forgot something please let me know and I will post it here. It took literally hours of searching to find this solution. I'm quite upset at the simplicity vs the complexity that google has introduced.</p>\n<p>EDIT: I Think I forgot this method which was very important</p>\n<pre><code>public static boolean requestVideoWritePermissions(Activity activity, Uri fromUri) {\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\n\n        boolean hasPermission = true;\n        if (activity.checkUriPermission(fromUri, Binder.getCallingPid(), Binder.getCallingUid(),\n                Intent.FLAG_GRANT_WRITE_URI_PERMISSION) != PackageManager.PERMISSION_GRANTED) {\n            hasPermission = false;\n        }\n\n        List&lt;Uri&gt; uriList = new ArrayList&lt;&gt;();\n        uriList.add(fromUri);\n\n        if (!hasPermission) {\n            PendingIntent pi = MediaStore.createWriteRequest(activity.getContentResolver(), uriList);\n            try {\n                activity.startIntentSenderForResult(pi.getIntentSender(), 55, null, 0, 0, 0);\n            } catch (IntentSender.SendIntentException e) {\n                e.printStackTrace();\n            }\n            return false;\n        }\n        return true;\n    }\n    return true;\n}\n</code></pre>\n<p>I should also mention each video is a prompt this way. The user chooses whether or not to allow you to overwrite each video which was less than optimal. I wish I could just do a whole folder of external access but I'm guessing that's not going to happen with scoped storage changes.</p>\n"},{"tags":[],"owner":{"account_id":7512472,"reputation":687,"user_id":5706996,"display_name":"KoalaKoalified"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676674710,"creation_date":1676671399,"answer_id":75489613,"question_id":68641037,"body_markdown":"Since I see this is a very popular question, I&#39;m going to go ahead and update what I changed to be doing since some of this code is deprecated or not working.\r\n\r\nFirst In Your build.gradle file, implement the SAF framework&#39;s DocumentFile class:\r\n\r\n    implementation &#39;androidx.documentfile:documentfile:1.0.1&#39;\r\n\r\nNext Call this method which request permissions for the SAF to operate (You will only need to do this once on user install):\r\n\r\n     private void requestDocumentTreePermissions() {\r\n        // Choose a directory using the system&#39;s file picker.\r\n        new AlertDialog.Builder(this)\r\n                .setMessage(&quot;*Please Select A Folder For The App To Organize The Videos*&quot;)\r\n                .setPositiveButton(&quot;Ok&quot;, new DialogInterface.OnClickListener() {\r\n                    @RequiresApi(api = Build.VERSION_CODES.Q)\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n                        StorageManager sm = (StorageManager) getSystemService(Context.STORAGE_SERVICE);\r\n                        Intent intent = sm.getPrimaryStorageVolume().createOpenDocumentTreeIntent();\r\n\r\n                        String startDir = &quot;Documents&quot;;\r\n                        Uri uri = intent.getParcelableExtra(&quot;android.provider.extra.INITIAL_URI&quot;);\r\n\r\n                        String scheme = uri.toString();\r\n\r\n\r\n                        scheme = scheme.replace(&quot;/root/&quot;, &quot;/document/&quot;);\r\n                        scheme += &quot;%3A&quot; + startDir;\r\n\r\n                        uri = Uri.parse(scheme);\r\n                        Uri rootUri = DocumentsContract.buildDocumentUri(\r\n                                EXTERNAL_STORAGE_PROVIDER_AUTHORITY,\r\n                                uri.toString()\r\n                        );\r\n                        Uri treeUri = DocumentsContract.buildTreeDocumentUri(\r\n                                EXTERNAL_STORAGE_PROVIDER_AUTHORITY,\r\n                                uri.toString()\r\n                        );\r\n                        uri = Uri.parse(scheme);\r\n                        Uri treeUri2 = DocumentsContract.buildTreeDocumentUri(\r\n                                EXTERNAL_STORAGE_PROVIDER_AUTHORITY,\r\n                                uri.toString()\r\n                        );\r\n                        List&lt;Uri&gt; uriTreeList = new ArrayList&lt;&gt;();\r\n                        uriTreeList.add(treeUri);\r\n                        uriTreeList.add(treeUri2);\r\n                        getPrimaryVolume().createOpenDocumentTreeIntent()\r\n                                .putExtra(EXTRA_INITIAL_URI, rootUri);\r\n                        Intent intent2 = new Intent(Intent.ACTION_OPEN_DOCUMENT_TREE);\r\n                        // Optionally, specify a URI for the directory that should be opened in\r\n                        // the system file picker when it loads.\r\n                        intent2.addFlags(\r\n                                Intent.FLAG_GRANT_READ_URI_PERMISSION\r\n                                        | Intent.FLAG_GRANT_WRITE_URI_PERMISSION\r\n                                        | Intent.FLAG_GRANT_PERSISTABLE_URI_PERMISSION\r\n                                        | Intent.FLAG_GRANT_PREFIX_URI_PERMISSION);\r\n                        intent2.putExtra(EXTRA_INITIAL_URI, rootUri);\r\n                        startActivityForResult(intent2, 99);\r\n                    }\r\n                })\r\n                .setCancelable(false)\r\n                .show();\r\n\r\n\r\n    }\r\n\r\nNext Store some Persistant Permissions:\r\n\r\n        @Override\r\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode == 99 &amp;&amp; resultCode == RESULT_OK) {\r\n            //get back the document tree URI (in this case we expect the documents root directory)\r\n            Uri uri = data.getData();\r\n            //now we grant permanent persistant permissions to our contentResolver and we are free to open up sub directory Uris as we please until the app is uninstalled\r\n            getSharedPreferences().edit().putString(ACCESS_FOLDER, uri.toString()).apply();\r\n            final int takeFlags = (Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_GRANT_WRITE_URI_PERMISSION);\r\n            getApplicationContext().getContentResolver().takePersistableUriPermission(uri, takeFlags);\r\n            //simply recreate the activity although you could call some function at this point\r\n            recreate();\r\n        }\r\n    }\r\n\r\nFinally call the documentFile&#39;s rename method on the correct file\r\n\r\n    DocumentFile df = DocumentFile.fromTreeUri(MainActivity.this, uri);\r\n    df = df.findFile(&quot;CurrentName&quot;)\r\n    df.renameTo(&quot;NewName&quot;);\r\n\r\nYou Can also open InputStreams and OutputStreams using your content resolver because of the persistant URI permissions granted to your content resolver for that DocumentFile using the following snippet:\r\n\r\n    getContentResolver().openInputStream(df.getUri());\r\n    getContentResolver().openOutputStream(df.getUri());\r\n\r\nYou can list files using\r\n\r\n    df.listFiles();\r\n\r\nOr You can list out files using:\r\n\r\n    \r\n    public static DocumentFile findFileInDirectoryMatchingName(Context mContext, Uri mUri, String name) {\r\n        final ContentResolver resolver = mContext.getContentResolver();\r\n        final Uri childrenUri = DocumentsContract.buildChildDocumentsUriUsingTree(mUri,\r\n                DocumentsContract.getDocumentId(mUri));\r\n        Cursor c = null;\r\n        try {\r\n            c = resolver.query(childrenUri, new String[]{\r\n                    DocumentsContract.Document.COLUMN_DOCUMENT_ID,\r\n                    DocumentsContract.Document.COLUMN_DISPLAY_NAME,\r\n                    DocumentsContract.Document.COLUMN_MIME_TYPE,\r\n                    DocumentsContract.Document.COLUMN_LAST_MODIFIED\r\n\r\n            }, DocumentsContract.Document.COLUMN_DISPLAY_NAME + &quot; LIKE &#39;?%&#39;&quot;, new String[]{name}, null);\r\n            c.moveToFirst();\r\n            while (!c.isAfterLast()) {\r\n                final String filename = c.getString(1);\r\n                final String mimeType = c.getString(2);\r\n                final Long lastModified = c.getLong(3);\r\n                if (filename.contains(name)) {\r\n                    final String documentId = c.getString(0);\r\n                    final Uri documentUri = DocumentsContract.buildDocumentUriUsingTree(mUri,\r\n                            documentId);\r\n\r\n                    return DocumentFile.fromTreeUri(mContext, documentUri);\r\n                }\r\n                c.moveToNext();\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            if (c != null) {\r\n                c.close();\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\nWhich will run faster than the df.listFiles() method\r\n\r\n","title":"Renaming Video / Image While Targeting Android 11 (Api 30)","body":"<p>Since I see this is a very popular question, I'm going to go ahead and update what I changed to be doing since some of this code is deprecated or not working.</p>\n<p>First In Your build.gradle file, implement the SAF framework's DocumentFile class:</p>\n<pre><code>implementation 'androidx.documentfile:documentfile:1.0.1'\n</code></pre>\n<p>Next Call this method which request permissions for the SAF to operate (You will only need to do this once on user install):</p>\n<pre><code> private void requestDocumentTreePermissions() {\n    // Choose a directory using the system's file picker.\n    new AlertDialog.Builder(this)\n            .setMessage(&quot;*Please Select A Folder For The App To Organize The Videos*&quot;)\n            .setPositiveButton(&quot;Ok&quot;, new DialogInterface.OnClickListener() {\n                @RequiresApi(api = Build.VERSION_CODES.Q)\n                @Override\n                public void onClick(DialogInterface dialog, int which) {\n                    StorageManager sm = (StorageManager) getSystemService(Context.STORAGE_SERVICE);\n                    Intent intent = sm.getPrimaryStorageVolume().createOpenDocumentTreeIntent();\n\n                    String startDir = &quot;Documents&quot;;\n                    Uri uri = intent.getParcelableExtra(&quot;android.provider.extra.INITIAL_URI&quot;);\n\n                    String scheme = uri.toString();\n\n\n                    scheme = scheme.replace(&quot;/root/&quot;, &quot;/document/&quot;);\n                    scheme += &quot;%3A&quot; + startDir;\n\n                    uri = Uri.parse(scheme);\n                    Uri rootUri = DocumentsContract.buildDocumentUri(\n                            EXTERNAL_STORAGE_PROVIDER_AUTHORITY,\n                            uri.toString()\n                    );\n                    Uri treeUri = DocumentsContract.buildTreeDocumentUri(\n                            EXTERNAL_STORAGE_PROVIDER_AUTHORITY,\n                            uri.toString()\n                    );\n                    uri = Uri.parse(scheme);\n                    Uri treeUri2 = DocumentsContract.buildTreeDocumentUri(\n                            EXTERNAL_STORAGE_PROVIDER_AUTHORITY,\n                            uri.toString()\n                    );\n                    List&lt;Uri&gt; uriTreeList = new ArrayList&lt;&gt;();\n                    uriTreeList.add(treeUri);\n                    uriTreeList.add(treeUri2);\n                    getPrimaryVolume().createOpenDocumentTreeIntent()\n                            .putExtra(EXTRA_INITIAL_URI, rootUri);\n                    Intent intent2 = new Intent(Intent.ACTION_OPEN_DOCUMENT_TREE);\n                    // Optionally, specify a URI for the directory that should be opened in\n                    // the system file picker when it loads.\n                    intent2.addFlags(\n                            Intent.FLAG_GRANT_READ_URI_PERMISSION\n                                    | Intent.FLAG_GRANT_WRITE_URI_PERMISSION\n                                    | Intent.FLAG_GRANT_PERSISTABLE_URI_PERMISSION\n                                    | Intent.FLAG_GRANT_PREFIX_URI_PERMISSION);\n                    intent2.putExtra(EXTRA_INITIAL_URI, rootUri);\n                    startActivityForResult(intent2, 99);\n                }\n            })\n            .setCancelable(false)\n            .show();\n\n\n}\n</code></pre>\n<p>Next Store some Persistant Permissions:</p>\n<pre><code>    @Override\npublic void onActivityResult(int requestCode, int resultCode, Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n    if (requestCode == 99 &amp;&amp; resultCode == RESULT_OK) {\n        //get back the document tree URI (in this case we expect the documents root directory)\n        Uri uri = data.getData();\n        //now we grant permanent persistant permissions to our contentResolver and we are free to open up sub directory Uris as we please until the app is uninstalled\n        getSharedPreferences().edit().putString(ACCESS_FOLDER, uri.toString()).apply();\n        final int takeFlags = (Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_GRANT_WRITE_URI_PERMISSION);\n        getApplicationContext().getContentResolver().takePersistableUriPermission(uri, takeFlags);\n        //simply recreate the activity although you could call some function at this point\n        recreate();\n    }\n}\n</code></pre>\n<p>Finally call the documentFile's rename method on the correct file</p>\n<pre><code>DocumentFile df = DocumentFile.fromTreeUri(MainActivity.this, uri);\ndf = df.findFile(&quot;CurrentName&quot;)\ndf.renameTo(&quot;NewName&quot;);\n</code></pre>\n<p>You Can also open InputStreams and OutputStreams using your content resolver because of the persistant URI permissions granted to your content resolver for that DocumentFile using the following snippet:</p>\n<pre><code>getContentResolver().openInputStream(df.getUri());\ngetContentResolver().openOutputStream(df.getUri());\n</code></pre>\n<p>You can list files using</p>\n<pre><code>df.listFiles();\n</code></pre>\n<p>Or You can list out files using:</p>\n<pre><code>public static DocumentFile findFileInDirectoryMatchingName(Context mContext, Uri mUri, String name) {\n    final ContentResolver resolver = mContext.getContentResolver();\n    final Uri childrenUri = DocumentsContract.buildChildDocumentsUriUsingTree(mUri,\n            DocumentsContract.getDocumentId(mUri));\n    Cursor c = null;\n    try {\n        c = resolver.query(childrenUri, new String[]{\n                DocumentsContract.Document.COLUMN_DOCUMENT_ID,\n                DocumentsContract.Document.COLUMN_DISPLAY_NAME,\n                DocumentsContract.Document.COLUMN_MIME_TYPE,\n                DocumentsContract.Document.COLUMN_LAST_MODIFIED\n\n        }, DocumentsContract.Document.COLUMN_DISPLAY_NAME + &quot; LIKE '?%'&quot;, new String[]{name}, null);\n        c.moveToFirst();\n        while (!c.isAfterLast()) {\n            final String filename = c.getString(1);\n            final String mimeType = c.getString(2);\n            final Long lastModified = c.getLong(3);\n            if (filename.contains(name)) {\n                final String documentId = c.getString(0);\n                final Uri documentUri = DocumentsContract.buildDocumentUriUsingTree(mUri,\n                        documentId);\n\n                return DocumentFile.fromTreeUri(mContext, documentUri);\n            }\n            c.moveToNext();\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n    } finally {\n        if (c != null) {\n            c.close();\n        }\n    }\n\n    return null;\n}\n</code></pre>\n<p>Which will run faster than the df.listFiles() method</p>\n"}],"owner":{"account_id":7512472,"reputation":687,"user_id":5706996,"display_name":"KoalaKoalified"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1929,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":75489613,"answer_count":2,"score":4,"last_activity_date":1676674710,"creation_date":1628014837,"question_id":68641037,"body_markdown":"I&#39;m having difficulty simply renaming a file created by the app but was put into the documents folder.\r\n\r\nEDIT:\r\n\r\nAs it so happens the videos are not created by the application but are expected to be renamed by the application. The user drops the videos into the documents folder manually at the start. My mistake.\r\n\r\nHere is my code:\r\n\r\n    public static boolean renameVideoFile(Context c, File from, File to) {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\r\n            try {\r\n                Uri fromUri = FileProvider.getUriForFile(c, c.getPackageName() + &quot;.provider&quot;, new File(FileUtils.getVideosDir(), from.getName()));\r\n                ContentResolver contentResolver = c.getContentResolver();\r\n                ContentValues contentValues = new ContentValues();\r\n\r\n                contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 1);\r\n                contentResolver.update(fromUri, contentValues, null, null);\r\n                contentValues.clear();\r\n                contentValues.put(MediaStore.Files.FileColumns.DISPLAY_NAME, to.getName());\r\n                contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 0);\r\n                contentResolver.update(fromUri, contentValues, null, null);\r\n                return true;\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n            return false;\r\n        } else {\r\n            if (from.renameTo(to)) {\r\n                removeMedia(c, from);\r\n                addMedia(c, to);\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\nI progressed through a few errors but my final error is:\r\n\r\njava.lang.UnsupportedOperationException: No external updates\r\n\r\nWhich is an internal problem with the FileProvider at\r\n\r\nat androidx.core.content.FileProvider.update(FileProvider.java:523)\r\n\r\nEDIT #2\r\nAlso here are my provider declarations in the manifest:\r\n\r\n     &lt;provider\r\n            android:name=&quot;androidx.core.content.FileProvider&quot;\r\n            android:authorities=&quot;${applicationId}.provider&quot;\r\n            android:exported=&quot;false&quot;\r\n            android:grantUriPermissions=&quot;true&quot;&gt;\r\n            &lt;meta-data\r\n                android:name=&quot;android.support.FILE_PROVIDER_PATHS&quot;\r\n                android:resource=&quot;@xml/file_paths&quot;&gt;\r\n            &lt;/meta-data&gt;\r\n        &lt;/provider&gt;\r\n\r\nAnd here is my pathing declarations. Again this is causing no issues for saving: \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;paths xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n    &lt;external-files-path\r\n        name=&quot;internal_images&quot;\r\n        path=&quot;files/Pictures&quot; /&gt;\r\n    &lt;external-files-path\r\n        name=&quot;internal_images_alternate&quot;\r\n        path=&quot;Pictures&quot; /&gt;\r\n    &lt;external-path\r\n        name=&quot;external&quot;\r\n        path=&quot;.&quot; /&gt;\r\n    &lt;external-files-path\r\n        name=&quot;external_files&quot;\r\n        path=&quot;.&quot; /&gt;\r\n    &lt;cache-path\r\n        name=&quot;cache&quot;\r\n        path=&quot;.&quot; /&gt;\r\n    &lt;external-cache-path\r\n        name=&quot;external_cache&quot;\r\n        path=&quot;.&quot; /&gt;\r\n    &lt;files-path\r\n        name=&quot;files&quot;\r\n        path=&quot;.&quot; /&gt;\r\n    &lt;/paths&gt;\r\n\r\n","title":"Renaming Video / Image While Targeting Android 11 (Api 30)","body":"<p>I'm having difficulty simply renaming a file created by the app but was put into the documents folder.</p>\n<p>EDIT:</p>\n<p>As it so happens the videos are not created by the application but are expected to be renamed by the application. The user drops the videos into the documents folder manually at the start. My mistake.</p>\n<p>Here is my code:</p>\n<pre><code>public static boolean renameVideoFile(Context c, File from, File to) {\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\n        try {\n            Uri fromUri = FileProvider.getUriForFile(c, c.getPackageName() + &quot;.provider&quot;, new File(FileUtils.getVideosDir(), from.getName()));\n            ContentResolver contentResolver = c.getContentResolver();\n            ContentValues contentValues = new ContentValues();\n\n            contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 1);\n            contentResolver.update(fromUri, contentValues, null, null);\n            contentValues.clear();\n            contentValues.put(MediaStore.Files.FileColumns.DISPLAY_NAME, to.getName());\n            contentValues.put(MediaStore.Files.FileColumns.IS_PENDING, 0);\n            contentResolver.update(fromUri, contentValues, null, null);\n            return true;\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return false;\n    } else {\n        if (from.renameTo(to)) {\n            removeMedia(c, from);\n            addMedia(c, to);\n            return true;\n        } else {\n            return false;\n        }\n    }\n}\n</code></pre>\n<p>I progressed through a few errors but my final error is:</p>\n<p>java.lang.UnsupportedOperationException: No external updates</p>\n<p>Which is an internal problem with the FileProvider at</p>\n<p>at androidx.core.content.FileProvider.update(FileProvider.java:523)</p>\n<p>EDIT #2\nAlso here are my provider declarations in the manifest:</p>\n<pre><code> &lt;provider\n        android:name=&quot;androidx.core.content.FileProvider&quot;\n        android:authorities=&quot;${applicationId}.provider&quot;\n        android:exported=&quot;false&quot;\n        android:grantUriPermissions=&quot;true&quot;&gt;\n        &lt;meta-data\n            android:name=&quot;android.support.FILE_PROVIDER_PATHS&quot;\n            android:resource=&quot;@xml/file_paths&quot;&gt;\n        &lt;/meta-data&gt;\n    &lt;/provider&gt;\n</code></pre>\n<p>And here is my pathing declarations. Again this is causing no issues for saving:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;paths xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n&lt;external-files-path\n    name=&quot;internal_images&quot;\n    path=&quot;files/Pictures&quot; /&gt;\n&lt;external-files-path\n    name=&quot;internal_images_alternate&quot;\n    path=&quot;Pictures&quot; /&gt;\n&lt;external-path\n    name=&quot;external&quot;\n    path=&quot;.&quot; /&gt;\n&lt;external-files-path\n    name=&quot;external_files&quot;\n    path=&quot;.&quot; /&gt;\n&lt;cache-path\n    name=&quot;cache&quot;\n    path=&quot;.&quot; /&gt;\n&lt;external-cache-path\n    name=&quot;external_cache&quot;\n    path=&quot;.&quot; /&gt;\n&lt;files-path\n    name=&quot;files&quot;\n    path=&quot;.&quot; /&gt;\n&lt;/paths&gt;\n</code></pre>\n"},{"tags":["java","android","android-11"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1615837657,"post_id":66642726,"comment_id":117811067,"body_markdown":"`path2 = path2.replaceAll(&quot;/&quot; + nome, &quot;&quot;);` You are messing around with building up a path. Nobody can follow you and i think you lost sight too. Further check the return value of mkdirs and if false handle accordingly. Remove the .createNewFile call. Rewrite your code please. Also here.","body":"<code>path2 = path2.replaceAll(&quot;&#47;&quot; + nome, &quot;&quot;);</code> You are messing around with building up a path. Nobody can follow you and i think you lost sight too. Further check the return value of mkdirs and if false handle accordingly. Remove the .createNewFile call. Rewrite your code please. Also here."},{"owner":{"account_id":6850340,"reputation":6801,"user_id":6021469,"accept_rate":29,"display_name":"Shweta Chauhan"},"score":0,"creation_date":1620390389,"post_id":66642726,"comment_id":119193505,"body_markdown":"did you get solution?? I don&#39;t want to use android:requestLegacyExternalStorage","body":"did you get solution?? I don&#39;t want to use android:requestLegacyExternalStorage"}],"answers":[{"comments":[{"owner":{"account_id":1681927,"reputation":6195,"user_id":1545993,"accept_rate":80,"display_name":"Taifun"},"score":1,"creation_date":1645033092,"post_id":66645800,"comment_id":125765033,"body_markdown":"As far as I understand... a subdirectory of /Download is shared storage and shared storage should be possible to access without MANAGE_EXTERNAL_STORAGE permission or SAF. I currently have a similar issue for subdirectories of shared storage and I&#39;m looking for a solution...","body":"As far as I understand... a subdirectory of /Download is shared storage and shared storage should be possible to access without MANAGE_EXTERNAL_STORAGE permission or SAF. I currently have a similar issue for subdirectories of shared storage and I&#39;m looking for a solution..."},{"owner":{"account_id":19615181,"reputation":732,"user_id":15394019,"display_name":"mindoverflow"},"score":0,"creation_date":1656512468,"post_id":66645800,"comment_id":128591680,"body_markdown":"It&#39;s been a while since I worked on Android, but accessing the download storage without SAF would require us to use the ROOM persistence framework, which would be a great hassle if i&#39;m only accessing very rarely. the last time i had worked on android, there was this very odd thing happening that if you called ```getFilesDir()``` to access ```Downloads```, it would simply create a folder names such in the app&#39;s internal storage directory. i would probably advise anyone who isn&#39;t working on file manager apps to move away from accessing local directly as with every iteration Android messes it up","body":"It&#39;s been a while since I worked on Android, but accessing the download storage without SAF would require us to use the ROOM persistence framework, which would be a great hassle if i&#39;m only accessing very rarely. the last time i had worked on android, there was this very odd thing happening that if you called <code>getFilesDir()</code> to access <code>Downloads</code>, it would simply create a folder names such in the app&#39;s internal storage directory. i would probably advise anyone who isn&#39;t working on file manager apps to move away from accessing local directly as with every iteration Android messes it up"},{"owner":{"account_id":17937083,"reputation":71,"user_id":13033210,"display_name":"jack-wilson"},"score":0,"creation_date":1662124313,"post_id":66645800,"comment_id":129939738,"body_markdown":"I have the same issue: I would like to create a file into a folder, for which I have granted the persmission before (by `ACTION_OPEN_DOCUMENT_TREE`), but it works upredictable.\nFor example with file name: &quot;demoobstacle.kml&quot; it is ok, but with file name: &quot;DemoObstacle.kml&quot; it throws the same exception as in the question.\nBy using the permission `ACTION_MANAGE_ALL_FILES_ACCESS_PERMISSION` it works, but I don&#39;t understand what the problem is.\n(I tried it on other devices (other android versions) and it worked perfectly with any file name.)\nAny idea?","body":"I have the same issue: I would like to create a file into a folder, for which I have granted the persmission before (by <code>ACTION_OPEN_DOCUMENT_TREE</code>), but it works upredictable. For example with file name: &quot;demoobstacle.kml&quot; it is ok, but with file name: &quot;DemoObstacle.kml&quot; it throws the same exception as in the question. By using the permission <code>ACTION_MANAGE_ALL_FILES_ACCESS_PERMISSION</code> it works, but I don&#39;t understand what the problem is. (I tried it on other devices (other android versions) and it worked perfectly with any file name.) Any idea?"},{"owner":{"account_id":19615181,"reputation":732,"user_id":15394019,"display_name":"mindoverflow"},"score":0,"creation_date":1662222466,"post_id":66645800,"comment_id":129958560,"body_markdown":"i believe for single file creation we should use ```ACTION_OPEN_DOCUMENT```. but at one point in time i used to be heavily involved in android, and i would suggest you use their room persistence api to do everything. i dont knkw what their end goal is, but theyre trying to restrict everything like IOS in the name of security. as of now file access has 2 methods. 1 applies to pre 10 and one post. but overall i&#39;ll bet future iterations will get rid of SAF as well any manual non-MIME type access. if we want apps to not get ruined after each android release best to use what they recommend. :(","body":"i believe for single file creation we should use <code>ACTION_OPEN_DOCUMENT</code>. but at one point in time i used to be heavily involved in android, and i would suggest you use their room persistence api to do everything. i dont knkw what their end goal is, but theyre trying to restrict everything like IOS in the name of security. as of now file access has 2 methods. 1 applies to pre 10 and one post. but overall i&#39;ll bet future iterations will get rid of SAF as well any manual non-MIME type access. if we want apps to not get ruined after each android release best to use what they recommend. :("},{"owner":{"account_id":10470352,"reputation":679,"user_id":7738516,"display_name":"Vishnu Satheesh"},"score":0,"creation_date":1694269061,"post_id":66645800,"comment_id":135870762,"body_markdown":"@mindoverflow Call requires API level 30 (current min is 23): android.os.Environment#isExternalStorageManager how to achieve this in lower android versions","body":"@mindoverflow Call requires API level 30 (current min is 23): android.os.Environment#isExternalStorageManager how to achieve this in lower android versions"},{"owner":{"account_id":19615181,"reputation":732,"user_id":15394019,"display_name":"mindoverflow"},"score":0,"creation_date":1695964339,"post_id":66645800,"comment_id":136096022,"body_markdown":"Hello friend, this is out of the scope of the original question, but the method for API &lt;= 30 is very common and easily found on SO. However, seeing as you do not know this leads me to believe that you are possibly designing a new application. If that is the case, please refrain from accessing storage directly for lower level API. Use SAF instead for those cases. Google has completely flipped the model and does this almost every iteration, and it is truly a __HASSLE__ to maintain apps published on the play store as Google constantly demands extensive rework or risk removal...","body":"Hello friend, this is out of the scope of the original question, but the method for API &lt;= 30 is very common and easily found on SO. However, seeing as you do not know this leads me to believe that you are possibly designing a new application. If that is the case, please refrain from accessing storage directly for lower level API. Use SAF instead for those cases. Google has completely flipped the model and does this almost every iteration, and it is truly a <b>HASSLE</b> to maintain apps published on the play store as Google constantly demands extensive rework or risk removal..."}],"tags":[],"owner":{"account_id":19615181,"reputation":732,"user_id":15394019,"display_name":"mindoverflow"},"comment_count":6,"down_vote_count":1,"up_vote_count":14,"is_accepted":true,"score":13,"last_activity_date":1615843532,"creation_date":1615843034,"answer_id":66645800,"question_id":66642726,"body_markdown":"In Android 11 ```android:requestLegacyExternalStorage=&quot;true&quot;``` will simply be ignored, since it was an ad-hoc solution for Android &lt; 11 to not break old apps.\r\nNow, you must use\r\n```\r\n&lt;uses-permission android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;/&gt;\r\n```\r\nAlso you could just use SAF to avoid all this &#39;permissions&#39; hassle. This is what Google recommends for apps that do not need to manage most internal storage data. Refer to:\r\nhttps://developer.android.com/guide/topics/providers/document-provider\r\n\r\nHowever, if you don&#39;t want to break you app and lose all your hard work, consider\r\n```\r\nif(Environment.isExternalStorageManager())\r\n{\r\n\tinternal = new File(&quot;/sdcard&quot;);\r\n\tinternalContents = internal.listFiles();\r\n}\r\nelse\r\n{\r\n\tIntent permissionIntent = new Intent(Settings.ACTION_MANAGE_ALL_FILES_ACCESS_PERMISSION);\r\n\tstartActivity(permissionIntent);\r\n}\r\n```\r\nThis will bring up a settings page where you will be able to give storage access to your app. If the app already has permission, then you will be able to access the directory. Place this at the very beginning of ```onCreate()``` method *after* setting layout resource.\r\n\r\nIt&#39;s best not to do this for any future apps you build.","title":"java.io.FileNotFoundException open failed: EEXIST (File exists) Android 11","body":"<p>In Android 11 <code>android:requestLegacyExternalStorage=&quot;true&quot;</code> will simply be ignored, since it was an ad-hoc solution for Android &lt; 11 to not break old apps.\nNow, you must use</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;/&gt;\n</code></pre>\n<p>Also you could just use SAF to avoid all this 'permissions' hassle. This is what Google recommends for apps that do not need to manage most internal storage data. Refer to:\n<a href=\"https://developer.android.com/guide/topics/providers/document-provider\" rel=\"noreferrer\">https://developer.android.com/guide/topics/providers/document-provider</a></p>\n<p>However, if you don't want to break you app and lose all your hard work, consider</p>\n<pre><code>if(Environment.isExternalStorageManager())\n{\n    internal = new File(&quot;/sdcard&quot;);\n    internalContents = internal.listFiles();\n}\nelse\n{\n    Intent permissionIntent = new Intent(Settings.ACTION_MANAGE_ALL_FILES_ACCESS_PERMISSION);\n    startActivity(permissionIntent);\n}\n</code></pre>\n<p>This will bring up a settings page where you will be able to give storage access to your app. If the app already has permission, then you will be able to access the directory. Place this at the very beginning of <code>onCreate()</code> method <em>after</em> setting layout resource.</p>\n<p>It's best not to do this for any future apps you build.</p>\n"},{"tags":[],"owner":{"account_id":21576422,"reputation":39,"user_id":15908471,"display_name":"Getenet Adamneh"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1620834441,"creation_date":1620834441,"answer_id":67506932,"question_id":66642726,"body_markdown":"Go to your mobile setting -&gt; apps -&gt; select your app -&gt; permissions -&gt; storage -&gt; select Allow managment of all files\r\n\r\nIt works for me.","title":"java.io.FileNotFoundException open failed: EEXIST (File exists) Android 11","body":"<p>Go to your mobile setting -&gt; apps -&gt; select your app -&gt; permissions -&gt; storage -&gt; select Allow managment of all files</p>\n<p>It works for me.</p>\n"},{"tags":[],"owner":{"account_id":5736115,"reputation":632,"user_id":4530241,"display_name":"Carlos Leonardo Camilo Vargas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676674527,"creation_date":1676674527,"answer_id":75489942,"question_id":66642726,"body_markdown":"Android has become too complex when it comes to creating folders.\r\n\r\nIf you want to avoid so many problems and not use things like `android:requestLegacyExternalStorage=&quot;true&quot;` and adding many permissions like `MANAGE_EXTERNAL_STORAGE`, `READ_EXTERNAL_STORAGE`, `WRITE_EXTERNAL_STORAGE` which can be a nightmare, even when it comes to publishing your app to the marketplace.\r\n\r\nIn addition to that, from Android version 30 onwards, you ca **NOT** extend `android:requestLegacyExternalStorage=&quot;true&quot;`. So you will have problems again.\r\n\r\nWhat is recommended is to start to save your recordings inside applications dedicated folder, because *in the future Android will no longer let you create folders anymore*, even with legacy methods. You can use **standard directories** in which to place any file like ***DIRECTORY_MUSIC***, ***DIRECTORY_PICTURES***, etc.\r\n\r\nFor instance, I created my own method for saving audio recording in **Android 33** and it works perfectly. I don&#39;t need to add anything to my `Manifest`.\r\n\r\n    override fun startRecording(): Boolean {\r\n        try {\r\n            val recordingStoragePath = &quot;${app.getExternalFilesDir(Environment.DIRECTORY_MUSIC)}&quot;\r\n            recordingFilePath = &quot;$recordingStoragePath/${fileRecordingUtils.generateFileName()}&quot;\r\n            mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC)\r\n            mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP)\r\n            // Audio Quality Normal\r\n            mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB)\r\n            mediaRecorder.setAudioSamplingRate(8000)\r\n            // Set path\r\n            mediaRecorder.setOutputFile(recordingFilePath)\r\n            mediaRecorder.prepare()\r\n            mediaRecorder.start()\r\n            Toast.makeText(app, &quot;Recording Started&quot;, Toast.LENGTH_SHORT).show()\r\n        } catch (e: IOException) {\r\n            Toast.makeText(app, &quot;Recording Failed. Problem accessing storage.&quot;, Toast.LENGTH_SHORT).show()\r\n            mediaRecorder.reset()\r\n            return false\r\n        } catch (e: Exception) {\r\n            mediaRecorder.reset()\r\n            return false\r\n        }\r\n        return true\r\n    }\r\n\r\n","title":"java.io.FileNotFoundException open failed: EEXIST (File exists) Android 11","body":"<p>Android has become too complex when it comes to creating folders.</p>\n<p>If you want to avoid so many problems and not use things like <code>android:requestLegacyExternalStorage=&quot;true&quot;</code> and adding many permissions like <code>MANAGE_EXTERNAL_STORAGE</code>, <code>READ_EXTERNAL_STORAGE</code>, <code>WRITE_EXTERNAL_STORAGE</code> which can be a nightmare, even when it comes to publishing your app to the marketplace.</p>\n<p>In addition to that, from Android version 30 onwards, you ca <strong>NOT</strong> extend <code>android:requestLegacyExternalStorage=&quot;true&quot;</code>. So you will have problems again.</p>\n<p>What is recommended is to start to save your recordings inside applications dedicated folder, because <em>in the future Android will no longer let you create folders anymore</em>, even with legacy methods. You can use <strong>standard directories</strong> in which to place any file like <em><strong>DIRECTORY_MUSIC</strong></em>, <em><strong>DIRECTORY_PICTURES</strong></em>, etc.</p>\n<p>For instance, I created my own method for saving audio recording in <strong>Android 33</strong> and it works perfectly. I don't need to add anything to my <code>Manifest</code>.</p>\n<pre><code>override fun startRecording(): Boolean {\n    try {\n        val recordingStoragePath = &quot;${app.getExternalFilesDir(Environment.DIRECTORY_MUSIC)}&quot;\n        recordingFilePath = &quot;$recordingStoragePath/${fileRecordingUtils.generateFileName()}&quot;\n        mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC)\n        mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP)\n        // Audio Quality Normal\n        mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB)\n        mediaRecorder.setAudioSamplingRate(8000)\n        // Set path\n        mediaRecorder.setOutputFile(recordingFilePath)\n        mediaRecorder.prepare()\n        mediaRecorder.start()\n        Toast.makeText(app, &quot;Recording Started&quot;, Toast.LENGTH_SHORT).show()\n    } catch (e: IOException) {\n        Toast.makeText(app, &quot;Recording Failed. Problem accessing storage.&quot;, Toast.LENGTH_SHORT).show()\n        mediaRecorder.reset()\n        return false\n    } catch (e: Exception) {\n        mediaRecorder.reset()\n        return false\n    }\n    return true\n}\n</code></pre>\n"}],"owner":{"account_id":20142209,"reputation":139,"user_id":14771662,"display_name":"TheAppleGeeK"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17093,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":66645800,"answer_count":3,"score":10,"last_activity_date":1676674527,"creation_date":1615829203,"question_id":66642726,"body_markdown":"I was trying to download an image from a server and save it in the external memory, but in Android 11 it gives me an error when I try to create the file.\r\nI have granted permission to access the external storage.\r\n\r\ni searched a bit on the internet and they suggested me to put this code in the manifest, but it didn&#39;t work for android 11\r\n\r\n```\r\nandroid:requestLegacyExternalStorage=&quot;true&quot;\r\n```\r\n\r\nmanifest\r\n```\r\n&lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:requestLegacyExternalStorage=&quot;true&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.TestDwonloadImgApp&quot;\r\n        android:usesCleartextTraffic=&quot;true&quot;&gt;\r\n        &lt;activity android:name=&quot;.MainActivity2&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n        &lt;activity android:name=&quot;.MainActivity&quot;&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n```\r\n\r\nMainActivity\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        ImageView img = findViewById(R.id.img);\r\n\r\n        ImmagineInterface ii = RetrofitManager.retrofit.create(ImmagineInterface.class);\r\n        Call&lt;ResponseBody&gt; call = ii.downloadFile(&quot;/immaginimusei/arte-scienza.jpg&quot;);\r\n        call.enqueue(new Callback&lt;ResponseBody&gt;() {\r\n            @Override\r\n            public void onResponse(Call&lt;ResponseBody&gt; call, Response&lt;ResponseBody&gt; response) {\r\n                if (response.code() == 200) {\r\n                    boolean result = writeResponseBody(response.body(), &quot;/immaginimusei/arte-scienza.jpg&quot;);\r\n                    if(result) {\r\n                        Bitmap bitmap = BitmapFactory.decodeFile(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).toString() + &quot;/ArtHunter/immaginimusei/arte-scienza.jpg&quot;);\r\n                        img.setImageBitmap(bitmap);\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onFailure(Call&lt;ResponseBody&gt; call, Throwable t) {\r\n                Bitmap bitmap = BitmapFactory.decodeFile(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).toString() + &quot;/ArtHunter/immaginimusei/arte-scienza.jpg&quot;);\r\n                img.setImageBitmap(bitmap);\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\n\r\nwriteResponseBody\r\n```\r\npublic static boolean writeResponseBody(ResponseBody body, String dir1) {\r\n        try {\r\n            String state = Environment.getExternalStorageState();\r\n            if (Environment.MEDIA_MOUNTED.equals(state)) {\r\n                // todo change the file location/name according to your needs\r\n\r\n                String path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).toString() + &quot;/ArtHunter&quot;;\r\n\r\n                String path1 = path + dir1;\r\n                File f = new File(path1);\r\n                String path2 = f.getPath();\r\n                String nome = f.getName();\r\n                path2 = path2.replaceAll(&quot;/&quot; + nome, &quot;&quot;);\r\n\r\n                File directory = new File(path2);\r\n                if (!directory.exists())\r\n                    directory.mkdirs();\r\n\r\n                File img = new File(path2, nome);\r\n                if (img.exists())\r\n                    return true;\r\n                img.createNewFile();\r\n\r\n                InputStream inputStream = null;\r\n                FileOutputStream outputStream = null;\r\n\r\n                try {\r\n                    byte[] fileReader = new byte[4096];\r\n\r\n                    inputStream = body.byteStream();\r\n                    outputStream = new FileOutputStream(img); //error here!\r\n\r\n                    while (true) {\r\n                        int read = inputStream.read(fileReader);\r\n\r\n                        if (read == -1) {\r\n                            break;\r\n                        }\r\n\r\n                        outputStream.write(fileReader, 0, read);\r\n\r\n                    }\r\n\r\n                    outputStream.flush();\r\n\r\n                    return true;\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                    return false;\r\n                } finally {\r\n                    if (inputStream != null) {\r\n                        inputStream.close();\r\n                    }\r\n\r\n                    if (outputStream != null) {\r\n                        outputStream.close();\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            return false;\r\n        }\r\n    }\r\n```\r\n\r\nerror\r\n```\r\n/System.err: java.io.FileNotFoundException: /storage/emulated/0/Download/ArtHunter/immaginimusei/arte-scienza.jpg: open failed: EEXIST (File exists)\r\nW/System.err:     at libcore.io.IoBridge.open(IoBridge.java:492)\r\n        at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:236)\r\n        at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:186)\r\n        at com.theapplegeek.testdwonloadimgapp.MainActivity.writeResponseBody(MainActivity.java:93)\r\n        at com.theapplegeek.testdwonloadimgapp.MainActivity$1.onResponse(MainActivity.java:47)\r\n        at retrofit2.DefaultCallAdapterFactory$ExecutorCallbackCall$1.lambda$onResponse$0$DefaultCallAdapterFactory$ExecutorCallbackCall$1(DefaultCallAdapterFactory.java:89)\r\n        at retrofit2.-$$Lambda$DefaultCallAdapterFactory$ExecutorCallbackCall$1$hVGjmafRi6VitDIrPNdoFizVAdk.run(Unknown Source:6)\r\n        at android.os.Handler.handleCallback(Handler.java:938)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loop(Looper.java:245)\r\n        at android.app.ActivityThread.main(ActivityThread.java:8004)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:631)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:978)\r\n    Caused by: android.system.ErrnoException: open failed: EEXIST (File exists)\r\n        at libcore.io.Linux.open(Native Method)\r\n        at libcore.io.ForwardingOs.open(ForwardingOs.java:166)\r\n        at libcore.io.BlockGuardOs.open(BlockGuardOs.java:254)\r\nW/System.err:     at libcore.io.ForwardingOs.open(ForwardingOs.java:166)\r\n        at android.app.ActivityThread$AndroidOs.open(ActivityThread.java:7865)\r\n        at libcore.io.IoBridge.open(IoBridge.java:478)\r\n    \t... 13 more\r\n```","title":"java.io.FileNotFoundException open failed: EEXIST (File exists) Android 11","body":"<p>I was trying to download an image from a server and save it in the external memory, but in Android 11 it gives me an error when I try to create the file.\nI have granted permission to access the external storage.</p>\n<p>i searched a bit on the internet and they suggested me to put this code in the manifest, but it didn't work for android 11</p>\n<pre><code>android:requestLegacyExternalStorage=&quot;true&quot;\n</code></pre>\n<p>manifest</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:requestLegacyExternalStorage=&quot;true&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.TestDwonloadImgApp&quot;\n        android:usesCleartextTraffic=&quot;true&quot;&gt;\n        &lt;activity android:name=&quot;.MainActivity2&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n        &lt;activity android:name=&quot;.MainActivity&quot;&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n</code></pre>\n<p>MainActivity</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        ImageView img = findViewById(R.id.img);\n\n        ImmagineInterface ii = RetrofitManager.retrofit.create(ImmagineInterface.class);\n        Call&lt;ResponseBody&gt; call = ii.downloadFile(&quot;/immaginimusei/arte-scienza.jpg&quot;);\n        call.enqueue(new Callback&lt;ResponseBody&gt;() {\n            @Override\n            public void onResponse(Call&lt;ResponseBody&gt; call, Response&lt;ResponseBody&gt; response) {\n                if (response.code() == 200) {\n                    boolean result = writeResponseBody(response.body(), &quot;/immaginimusei/arte-scienza.jpg&quot;);\n                    if(result) {\n                        Bitmap bitmap = BitmapFactory.decodeFile(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).toString() + &quot;/ArtHunter/immaginimusei/arte-scienza.jpg&quot;);\n                        img.setImageBitmap(bitmap);\n                    }\n                }\n            }\n\n            @Override\n            public void onFailure(Call&lt;ResponseBody&gt; call, Throwable t) {\n                Bitmap bitmap = BitmapFactory.decodeFile(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).toString() + &quot;/ArtHunter/immaginimusei/arte-scienza.jpg&quot;);\n                img.setImageBitmap(bitmap);\n            }\n        });\n    }\n}\n</code></pre>\n<p>writeResponseBody</p>\n<pre><code>public static boolean writeResponseBody(ResponseBody body, String dir1) {\n        try {\n            String state = Environment.getExternalStorageState();\n            if (Environment.MEDIA_MOUNTED.equals(state)) {\n                // todo change the file location/name according to your needs\n\n                String path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).toString() + &quot;/ArtHunter&quot;;\n\n                String path1 = path + dir1;\n                File f = new File(path1);\n                String path2 = f.getPath();\n                String nome = f.getName();\n                path2 = path2.replaceAll(&quot;/&quot; + nome, &quot;&quot;);\n\n                File directory = new File(path2);\n                if (!directory.exists())\n                    directory.mkdirs();\n\n                File img = new File(path2, nome);\n                if (img.exists())\n                    return true;\n                img.createNewFile();\n\n                InputStream inputStream = null;\n                FileOutputStream outputStream = null;\n\n                try {\n                    byte[] fileReader = new byte[4096];\n\n                    inputStream = body.byteStream();\n                    outputStream = new FileOutputStream(img); //error here!\n\n                    while (true) {\n                        int read = inputStream.read(fileReader);\n\n                        if (read == -1) {\n                            break;\n                        }\n\n                        outputStream.write(fileReader, 0, read);\n\n                    }\n\n                    outputStream.flush();\n\n                    return true;\n                } catch (IOException e) {\n                    e.printStackTrace();\n                    return false;\n                } finally {\n                    if (inputStream != null) {\n                        inputStream.close();\n                    }\n\n                    if (outputStream != null) {\n                        outputStream.close();\n                    }\n                }\n            }\n            return false;\n        } catch (IOException e) {\n            e.printStackTrace();\n            return false;\n        }\n    }\n</code></pre>\n<p>error</p>\n<pre><code>/System.err: java.io.FileNotFoundException: /storage/emulated/0/Download/ArtHunter/immaginimusei/arte-scienza.jpg: open failed: EEXIST (File exists)\nW/System.err:     at libcore.io.IoBridge.open(IoBridge.java:492)\n        at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:236)\n        at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:186)\n        at com.theapplegeek.testdwonloadimgapp.MainActivity.writeResponseBody(MainActivity.java:93)\n        at com.theapplegeek.testdwonloadimgapp.MainActivity$1.onResponse(MainActivity.java:47)\n        at retrofit2.DefaultCallAdapterFactory$ExecutorCallbackCall$1.lambda$onResponse$0$DefaultCallAdapterFactory$ExecutorCallbackCall$1(DefaultCallAdapterFactory.java:89)\n        at retrofit2.-$$Lambda$DefaultCallAdapterFactory$ExecutorCallbackCall$1$hVGjmafRi6VitDIrPNdoFizVAdk.run(Unknown Source:6)\n        at android.os.Handler.handleCallback(Handler.java:938)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loop(Looper.java:245)\n        at android.app.ActivityThread.main(ActivityThread.java:8004)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:631)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:978)\n    Caused by: android.system.ErrnoException: open failed: EEXIST (File exists)\n        at libcore.io.Linux.open(Native Method)\n        at libcore.io.ForwardingOs.open(ForwardingOs.java:166)\n        at libcore.io.BlockGuardOs.open(BlockGuardOs.java:254)\nW/System.err:     at libcore.io.ForwardingOs.open(ForwardingOs.java:166)\n        at android.app.ActivityThread$AndroidOs.open(ActivityThread.java:7865)\n        at libcore.io.IoBridge.open(IoBridge.java:478)\n        ... 13 more\n</code></pre>\n"},{"tags":["java","logging","slf4j","dropwizard","datadog"],"owner":{"account_id":2546573,"reputation":1284,"user_id":2211267,"accept_rate":58,"display_name":"Whizzil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676673474,"creation_date":1676673474,"question_id":75489837,"body_markdown":"I&#39;m trying to integrate my Dropwizard Kotlin app with DataDog, and DataDog requires JSON logs for JVM apps: https://docs.datadoghq.com/logs/log_collection/java/?tab=log4j\r\n\r\nNow this is how currently my `config.yml` looks like:\r\n```\r\nlogging:\r\n  level: INFO\r\n  loggers:\r\n    &quot;org.eclipse.jetty&quot;: INFO\r\n    &quot;io.swagger&quot;: INFO\r\n  appenders:\r\n    - type: console\r\n      logFormat: &quot;%-6level [%d{HH:mm:ss.SSS}] [%t] %logger{5} - %X{code} %msg %n&quot;\r\n\r\nserver:\r\n  requestLog:\r\n    appenders:\r\n      - type: console\r\n        layout:\r\n          type: access-json\r\n          timestampFormat: &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&#39;Z&#39;&quot;\r\n```\r\n\r\nAnd in the app, I use this logger:\r\n```\r\nimport mu.KotlinLogging\r\n\r\nprivate val logger = KotlinLogging.logger { }\r\n```\r\n\r\nand this is the logging dependencies that I have:\r\n```\r\n    api &quot;io.github.microutils:kotlin-logging-jvm:$kotlinLoggingVersion&quot;\r\n    api &quot;org.apache.logging.log4j:log4j-core:$apacheLoggingVersion&quot;\r\n    api &quot;org.slf4j:slf4j-api:$slf4jVersion&quot;\r\n```\r\n\r\nHowever, this still doesn&#39;t log as JSON. Any ideas how to fix that?","title":"Dropwizard Kotlin JSON logging","body":"<p>I'm trying to integrate my Dropwizard Kotlin app with DataDog, and DataDog requires JSON logs for JVM apps: <a href=\"https://docs.datadoghq.com/logs/log_collection/java/?tab=log4j\" rel=\"nofollow noreferrer\">https://docs.datadoghq.com/logs/log_collection/java/?tab=log4j</a></p>\n<p>Now this is how currently my <code>config.yml</code> looks like:</p>\n<pre><code>logging:\n  level: INFO\n  loggers:\n    &quot;org.eclipse.jetty&quot;: INFO\n    &quot;io.swagger&quot;: INFO\n  appenders:\n    - type: console\n      logFormat: &quot;%-6level [%d{HH:mm:ss.SSS}] [%t] %logger{5} - %X{code} %msg %n&quot;\n\nserver:\n  requestLog:\n    appenders:\n      - type: console\n        layout:\n          type: access-json\n          timestampFormat: &quot;yyyy-MM-dd'T'HH:mm:ss.SSS'Z'&quot;\n</code></pre>\n<p>And in the app, I use this logger:</p>\n<pre><code>import mu.KotlinLogging\n\nprivate val logger = KotlinLogging.logger { }\n</code></pre>\n<p>and this is the logging dependencies that I have:</p>\n<pre><code>    api &quot;io.github.microutils:kotlin-logging-jvm:$kotlinLoggingVersion&quot;\n    api &quot;org.apache.logging.log4j:log4j-core:$apacheLoggingVersion&quot;\n    api &quot;org.slf4j:slf4j-api:$slf4jVersion&quot;\n</code></pre>\n<p>However, this still doesn't log as JSON. Any ideas how to fix that?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","oauth-2.0"],"answers":[{"tags":[],"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676672751,"creation_date":1676672751,"answer_id":75489777,"question_id":75489659,"body_markdown":"If you look at it from another perspective, anyone able to modify your service will also have access to the key that you use to decode your encrypted database entries.\r\n\r\nIt doesn&#39;t matter where you get your keys from, Hashicorp Vault, Kubernetes etcd (as a Secret), your service still has to have access to some kind of secret (private key, password, keytab) to access the rest of the data\r\n\r\nA best practice is to use files to store the secrets and not to use environment variables, don&#39;t do something like evn DB_DECODE_PASSWORD=verySecret. Put ot in a file that you can read.\r\n\r\nSo, you either trust your runtime environment or you don&#39;t, it really is that simple.","title":"Does using Spring&#39;s Oauth2 InMemoryClientRegistrationRepository represent a security risk?","body":"<p>If you look at it from another perspective, anyone able to modify your service will also have access to the key that you use to decode your encrypted database entries.</p>\n<p>It doesn't matter where you get your keys from, Hashicorp Vault, Kubernetes etcd (as a Secret), your service still has to have access to some kind of secret (private key, password, keytab) to access the rest of the data</p>\n<p>A best practice is to use files to store the secrets and not to use environment variables, don't do something like evn DB_DECODE_PASSWORD=verySecret. Put ot in a file that you can read.</p>\n<p>So, you either trust your runtime environment or you don't, it really is that simple.</p>\n"}],"owner":{"account_id":4423351,"reputation":314,"user_id":3602557,"display_name":"franky duke"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":174,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75489777,"answer_count":1,"score":0,"last_activity_date":1676672751,"creation_date":1676671787,"question_id":75489659,"body_markdown":"***TL;DR:*** \r\nIs it ok (..against potential attacks / secured-enough) for a backend application to store sensible information in-memory in clear text (such as oauth2 token uri+credentials of external authz servers), for caching / performance optimization?\r\n\r\n----\r\n\r\n***My setup:***\r\nI am using Spring Boot 3 with Spring Security 6, and Spring Webflux for its webclient in order to call external web services.\r\n\r\nI have configured my Spring Security configuration to inject an OAuth2 filter into the spring webflux.webclient in order to authenticate against external authorization servers. So far so good, everything was tested and working as expected.\r\n\r\n***My concern:***\r\nWhen looking at my setup from a security standpoint, under the hood, Spring defaults to using &quot;InMemoryClientRegistrationRepository&quot; for all &quot;[web] client [oauth2 configuration] registrations&quot;, which means that it stores in-memory all my configured oauth2 client configurations, that I ensure in the first place to be well secured when persisted, e.g. all my oauth2 credentials are strongly encrypted strings using AES/GCM in my database.\r\n\r\nBut once I read those oauth2 configs from my db (and decrypt), and send that over to Spring Webclient (through for instance ServletOAuth2AuthorizedClientExchangeFilterFunction), those oauth2 configs end up being stored by Spring in-memory, in clear text; it is easy to inject spring&#39;s &quot;OAuth2AuthorizedClientRepository&quot; instance in any other app bean such as any of my controller/service, to debug and see all my oauth2 credentials cached in-memory by spring (clientId, clientSecret, tokenUri, etc) in clear text, and that info. actually points to many external systems that will eventually end up be all customers&#39;/external systems&#39; authz servers:S ..so I absolutely need to take some good care of those credentials.\r\n\r\nAm I right to be concerned by such in-memory caching of that oauth2 sensitive information, and should I work toward replacing it with perhaps a custom client repository that also does caching like spring for performance optimization, but at the same time encrypts at least the oauth2 client secrets before storing in-memory, to prevent some very unlikely in-memory attacks (perhaps an attack that would force app. to do some kind of thread+memory dump, to then access the memory dump on disk and get those oauth2 credentials..), or am I way over-thinking all this, and if we can&#39;t even store sensisble information in application cache/memory (which is very different than storing on disk), then it might be just better to never go out and just stay home?..!\r\n\r\nI would appreciate some feedback from folks considering themselves great at dealing with application security in general:) What do you think?!\r\n\r\nthanks!","title":"Does using Spring&#39;s Oauth2 InMemoryClientRegistrationRepository represent a security risk?","body":"<p><em><strong>TL;DR:</strong></em>\nIs it ok (..against potential attacks / secured-enough) for a backend application to store sensible information in-memory in clear text (such as oauth2 token uri+credentials of external authz servers), for caching / performance optimization?</p>\n<hr />\n<p><em><strong>My setup:</strong></em>\nI am using Spring Boot 3 with Spring Security 6, and Spring Webflux for its webclient in order to call external web services.</p>\n<p>I have configured my Spring Security configuration to inject an OAuth2 filter into the spring webflux.webclient in order to authenticate against external authorization servers. So far so good, everything was tested and working as expected.</p>\n<p><em><strong>My concern:</strong></em>\nWhen looking at my setup from a security standpoint, under the hood, Spring defaults to using &quot;InMemoryClientRegistrationRepository&quot; for all &quot;[web] client [oauth2 configuration] registrations&quot;, which means that it stores in-memory all my configured oauth2 client configurations, that I ensure in the first place to be well secured when persisted, e.g. all my oauth2 credentials are strongly encrypted strings using AES/GCM in my database.</p>\n<p>But once I read those oauth2 configs from my db (and decrypt), and send that over to Spring Webclient (through for instance ServletOAuth2AuthorizedClientExchangeFilterFunction), those oauth2 configs end up being stored by Spring in-memory, in clear text; it is easy to inject spring's &quot;OAuth2AuthorizedClientRepository&quot; instance in any other app bean such as any of my controller/service, to debug and see all my oauth2 credentials cached in-memory by spring (clientId, clientSecret, tokenUri, etc) in clear text, and that info. actually points to many external systems that will eventually end up be all customers'/external systems' authz servers:S ..so I absolutely need to take some good care of those credentials.</p>\n<p>Am I right to be concerned by such in-memory caching of that oauth2 sensitive information, and should I work toward replacing it with perhaps a custom client repository that also does caching like spring for performance optimization, but at the same time encrypts at least the oauth2 client secrets before storing in-memory, to prevent some very unlikely in-memory attacks (perhaps an attack that would force app. to do some kind of thread+memory dump, to then access the memory dump on disk and get those oauth2 credentials..), or am I way over-thinking all this, and if we can't even store sensisble information in application cache/memory (which is very different than storing on disk), then it might be just better to never go out and just stay home?..!</p>\n<p>I would appreciate some feedback from folks considering themselves great at dealing with application security in general:) What do you think?!</p>\n<p>thanks!</p>\n"},{"tags":["java","spring","spring-mvc","junit","integration-testing"],"answers":[{"tags":[],"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"comment_count":0,"down_vote_count":0,"up_vote_count":61,"is_accepted":false,"score":61,"last_activity_date":1676672573,"creation_date":1410997447,"answer_id":25902063,"question_id":25901985,"body_markdown":"With `MockMvc`, you&#39;re typically setting up a whole web application context and mocking the HTTP requests and responses. So, although a fake `DispatcherServlet` is up and running, simulating how your MVC stack will function, there are no real network connections made.\r\n\r\n`RestTemplate` can conveniently be [initialized][1] with a custom [`ClientHttpRequestFactory`][2]. Implementations usually create `ClientHttpRequest` objects that open actual TCP/HTTP(s) connections. But you don&#39;t have to. You can provide a mock implementation where you can do whatever you want. In fact, this is how the [`MockRestServiceServer`][3] utility operates, you could use that.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html#%3Cinit%3E(org.springframework.http.client.ClientHttpRequestFactory)\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/client/ClientHttpRequestFactory.html\r\n  [3]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/client/MockRestServiceServer.html","title":"Difference between MockMvc and RestTemplate in integration tests","body":"<p>With <code>MockMvc</code>, you're typically setting up a whole web application context and mocking the HTTP requests and responses. So, although a fake <code>DispatcherServlet</code> is up and running, simulating how your MVC stack will function, there are no real network connections made.</p>\n<p><code>RestTemplate</code> can conveniently be <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html#%3Cinit%3E(org.springframework.http.client.ClientHttpRequestFactory)\" rel=\"nofollow noreferrer\">initialized</a> with a custom <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/client/ClientHttpRequestFactory.html\" rel=\"nofollow noreferrer\"><code>ClientHttpRequestFactory</code></a>. Implementations usually create <code>ClientHttpRequest</code> objects that open actual TCP/HTTP(s) connections. But you don't have to. You can provide a mock implementation where you can do whatever you want. In fact, this is how the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/client/MockRestServiceServer.html\" rel=\"nofollow noreferrer\"><code>MockRestServiceServer</code></a> utility operates, you could use that.</p>\n"},{"comments":[{"owner":{"account_id":1532531,"reputation":36089,"user_id":1429387,"accept_rate":63,"display_name":"naXa stands with Ukraine"},"score":0,"creation_date":1538303075,"post_id":35603473,"comment_id":92089217,"body_markdown":"where do you prepare mock entity with name `Lee`? I think `andExpect(jsonPath(&quot;$.name&quot;).value(&quot;Lee&quot;))` validation will fail.","body":"where do you prepare mock entity with name <code>Lee</code>? I think <code>andExpect(jsonPath(&quot;$.name&quot;).value(&quot;Lee&quot;))</code> validation will fail."},{"owner":{"account_id":4188794,"reputation":951,"user_id":3431849,"display_name":"nivash"},"score":1,"creation_date":1538382150,"post_id":35603473,"comment_id":92109216,"body_markdown":"@naXa, these are integration tests, so we assume that corresponding data is stored in the database or populated before the test. Spring MVC Test &quot;mocks&quot; servlet container only but build application context with real beans, db connections, etc.","body":"@naXa, these are integration tests, so we assume that corresponding data is stored in the database or populated before the test. Spring MVC Test &quot;mocks&quot; servlet container only but build application context with real beans, db connections, etc."},{"owner":{"account_id":11764939,"reputation":3827,"user_id":8609847,"display_name":"Satish Patro"},"score":0,"creation_date":1566793904,"post_id":35603473,"comment_id":101753784,"body_markdown":"But, mockmvc can&#39;t handle custom exception(for testing negative scenario) which are stored in a file. It catched with &quot;throws Exception&quot; of Test Case function. How to handle this in MockMvc?","body":"But, mockmvc can&#39;t handle custom exception(for testing negative scenario) which are stored in a file. It catched with &quot;throws Exception&quot; of Test Case function. How to handle this in MockMvc?"}],"tags":[],"owner":{"account_id":4188794,"reputation":951,"user_id":3431849,"display_name":"nivash"},"comment_count":3,"down_vote_count":0,"up_vote_count":69,"is_accepted":true,"score":69,"last_activity_date":1647924375,"creation_date":1456320276,"answer_id":35603473,"question_id":25901985,"body_markdown":"As said in [this][1] \r\narticle you should use `MockMvc` when you want to test **Server-side** of application:\r\n\r\n\r\n&gt; Spring MVC Test builds on the mock request and response from `spring-test` and does not require a running servlet container. The main difference is that actual Spring MVC configuration is loaded through the TestContext framework and that the request is performed by actually invoking the `DispatcherServlet` and all the same Spring MVC infrastructure that is used at runtime.\r\n\r\nfor example:\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @WebAppConfiguration\r\n    @ContextConfiguration(&quot;servlet-context.xml&quot;)\r\n    public class SampleTests {\r\n    \r\n      @Autowired\r\n      private WebApplicationContext wac;\r\n    \r\n      private MockMvc mockMvc;\r\n    \r\n      @Before\r\n      public void setup() {\r\n        this.mockMvc = webAppContextSetup(this.wac).build();\r\n      }\r\n    \r\n      @Test\r\n      public void getFoo() throws Exception {\r\n        this.mockMvc.perform(get(&quot;/foo&quot;).accept(&quot;application/json&quot;))\r\n            .andExpect(status().isOk())\r\n            .andExpect(content().contentType(&quot;application/json&quot;))\r\n            .andExpect(jsonPath(&quot;$.name&quot;).value(&quot;Lee&quot;));\r\n      }}\r\n\r\n And `RestTemplate` you should use when you want to test **Rest Client-side** application:\r\n\r\n&gt; If you have code using the `RestTemplate`, you’ll probably want to test it and to that you can target a running server or mock the RestTemplate. The client-side REST test support offers a third alternative, which is to use the actual `RestTemplate` but configure it with a custom `ClientHttpRequestFactory` that checks expectations against actual requests and returns stub responses.\r\n\r\nexample:\r\n\r\n    RestTemplate restTemplate = new RestTemplate();\r\n    MockRestServiceServer mockServer = MockRestServiceServer.createServer(restTemplate);\r\n    \r\n    mockServer.expect(requestTo(&quot;/greeting&quot;))\r\n      .andRespond(withSuccess(&quot;Hello world&quot;, &quot;text/plain&quot;));\r\n    \r\n    // use RestTemplate ...\r\n    \r\n    mockServer.verify();\r\n\r\nalso read [this example][2]\r\n\r\n\r\n  [1]: https://spring.io/blog/2012/11/12/spring-framework-3-2-rc1-spring-mvc-test-framework\r\n  [2]: http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/client/MockRestServiceServer.html","title":"Difference between MockMvc and RestTemplate in integration tests","body":"<p>As said in <a href=\"https://spring.io/blog/2012/11/12/spring-framework-3-2-rc1-spring-mvc-test-framework\" rel=\"noreferrer\">this</a>\narticle you should use <code>MockMvc</code> when you want to test <strong>Server-side</strong> of application:</p>\n<blockquote>\n<p>Spring MVC Test builds on the mock request and response from <code>spring-test</code> and does not require a running servlet container. The main difference is that actual Spring MVC configuration is loaded through the TestContext framework and that the request is performed by actually invoking the <code>DispatcherServlet</code> and all the same Spring MVC infrastructure that is used at runtime.</p>\n</blockquote>\n<p>for example:</p>\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@WebAppConfiguration\n@ContextConfiguration(&quot;servlet-context.xml&quot;)\npublic class SampleTests {\n\n  @Autowired\n  private WebApplicationContext wac;\n\n  private MockMvc mockMvc;\n\n  @Before\n  public void setup() {\n    this.mockMvc = webAppContextSetup(this.wac).build();\n  }\n\n  @Test\n  public void getFoo() throws Exception {\n    this.mockMvc.perform(get(&quot;/foo&quot;).accept(&quot;application/json&quot;))\n        .andExpect(status().isOk())\n        .andExpect(content().contentType(&quot;application/json&quot;))\n        .andExpect(jsonPath(&quot;$.name&quot;).value(&quot;Lee&quot;));\n  }}\n</code></pre>\n<p>And <code>RestTemplate</code> you should use when you want to test <strong>Rest Client-side</strong> application:</p>\n<blockquote>\n<p>If you have code using the <code>RestTemplate</code>, you’ll probably want to test it and to that you can target a running server or mock the RestTemplate. The client-side REST test support offers a third alternative, which is to use the actual <code>RestTemplate</code> but configure it with a custom <code>ClientHttpRequestFactory</code> that checks expectations against actual requests and returns stub responses.</p>\n</blockquote>\n<p>example:</p>\n<pre><code>RestTemplate restTemplate = new RestTemplate();\nMockRestServiceServer mockServer = MockRestServiceServer.createServer(restTemplate);\n\nmockServer.expect(requestTo(&quot;/greeting&quot;))\n  .andRespond(withSuccess(&quot;Hello world&quot;, &quot;text/plain&quot;));\n\n// use RestTemplate ...\n\nmockServer.verify();\n</code></pre>\n<p>also read <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/client/MockRestServiceServer.html\" rel=\"noreferrer\">this example</a></p>\n"},{"comments":[{"owner":{"account_id":1978216,"reputation":548,"user_id":1775492,"display_name":"fquinner"},"score":3,"creation_date":1492704558,"post_id":42372950,"comment_id":74102705,"body_markdown":"For my use case, I think this is the best approach since RestTemplate makes ORM mapping of the response much more straightforward when HATEOS (in particular) comes into play.","body":"For my use case, I think this is the best approach since RestTemplate makes ORM mapping of the response much more straightforward when HATEOS (in particular) comes into play."},{"owner":{"account_id":11764939,"reputation":3827,"user_id":8609847,"display_name":"Satish Patro"},"score":0,"creation_date":1566794037,"post_id":42372950,"comment_id":101753814,"body_markdown":"@fquinner, but it can&#39;t be rollback as it behaves like client and runs in different thread, rollback is not possible. You need to maintain another testDb then","body":"@fquinner, but it can&#39;t be rollback as it behaves like client and runs in different thread, rollback is not possible. You need to maintain another testDb then"}],"tags":[],"owner":{"account_id":23506,"reputation":7505,"user_id":58962,"accept_rate":65,"display_name":"Michael B&#246;ckling"},"comment_count":2,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1487694882,"creation_date":1487694882,"answer_id":42372950,"question_id":25901985,"body_markdown":"It is possible to use both RestTemplate and MockMvc!\r\n\r\nThis is useful if you have a separate client where you already do the tedious mapping of Java objects to URLs and converting to and from Json, and you want to reuse that for your MockMVC tests. \r\n\r\nHere is how to do it:\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @ActiveProfiles(&quot;integration&quot;)\r\n    @WebMvcTest(ControllerUnderTest.class)\r\n    public class MyTestShould {\r\n\r\n        @Autowired\r\n        private MockMvc mockMvc;\r\n\r\n        @Test\r\n        public void verify_some_condition() throws Exception {\r\n\r\n            MockMvcClientHttpRequestFactory requestFactory = new MockMvcClientHttpRequestFactory(mockMvc);\r\n            RestTemplate restTemplate = new RestTemplate(requestFactory);\r\n\r\n            ResponseEntity&lt;SomeClass&gt; result = restTemplate.getForEntity(&quot;/my/url&quot;, SomeClass.class);\r\n        \r\n            [...]\r\n        }\r\n\r\n    }\r\n","title":"Difference between MockMvc and RestTemplate in integration tests","body":"<p>It is possible to use both RestTemplate and MockMvc!</p>\n\n<p>This is useful if you have a separate client where you already do the tedious mapping of Java objects to URLs and converting to and from Json, and you want to reuse that for your MockMVC tests. </p>\n\n<p>Here is how to do it:</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@ActiveProfiles(\"integration\")\n@WebMvcTest(ControllerUnderTest.class)\npublic class MyTestShould {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Test\n    public void verify_some_condition() throws Exception {\n\n        MockMvcClientHttpRequestFactory requestFactory = new MockMvcClientHttpRequestFactory(mockMvc);\n        RestTemplate restTemplate = new RestTemplate(requestFactory);\n\n        ResponseEntity&lt;SomeClass&gt; result = restTemplate.getForEntity(\"/my/url\", SomeClass.class);\n\n        [...]\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":250567,"reputation":6295,"user_id":2056394,"accept_rate":50,"display_name":"Denis C de Azevedo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40755,"favorite_count":0,"down_vote_count":1,"up_vote_count":90,"accepted_answer_id":35603473,"answer_count":3,"score":89,"last_activity_date":1676672573,"creation_date":1410996891,"question_id":25901985,"body_markdown":"Both [MockMvc](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/client/MockRestServiceServer.html) and [RestTemplate](http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html) are used for integration tests with Spring and JUnit.\r\n\r\nQuestion is: what&#39;s the difference between them and when we should choose one over another?\r\n\r\nHere are just examples of both options:\r\n\r\n    //MockMVC example\r\n    mockMvc.perform(get(&quot;/api/users&quot;))\r\n                .andExpect(status().isOk())\r\n                (...)\r\n\r\n    //RestTemplate example\r\n    ResponseEntity&lt;User&gt; entity = restTemplate.exchange(&quot;/api/users&quot;,\r\n                HttpMethod.GET,\r\n                new HttpEntity&lt;String&gt;(...),\r\n                User.class);\r\n    assertEquals(HttpStatus.OK, entity.getStatusCode());\r\n","title":"Difference between MockMvc and RestTemplate in integration tests","body":"<p>Both <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/client/MockRestServiceServer.html\" rel=\"noreferrer\">MockMvc</a> and <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html\" rel=\"noreferrer\">RestTemplate</a> are used for integration tests with Spring and JUnit.</p>\n<p>Question is: what's the difference between them and when we should choose one over another?</p>\n<p>Here are just examples of both options:</p>\n<pre><code>//MockMVC example\nmockMvc.perform(get(&quot;/api/users&quot;))\n            .andExpect(status().isOk())\n            (...)\n\n//RestTemplate example\nResponseEntity&lt;User&gt; entity = restTemplate.exchange(&quot;/api/users&quot;,\n            HttpMethod.GET,\n            new HttpEntity&lt;String&gt;(...),\n            User.class);\nassertEquals(HttpStatus.OK, entity.getStatusCode());\n</code></pre>\n"},{"tags":["java","sql","spring","database","namedparameterjdbctemplate"],"comments":[{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1676666926,"post_id":75489105,"comment_id":133190721,"body_markdown":"I don&#39;t think you can use named parameters as column name placeholders (as opposed, for example, to values in a `where` clause). But, regardless, in this case, why can&#39;t you just change `:joiningDate as EMP_FIRST_DATE` to `EMP_JOINING_DATE as EMP_FIRST_DATE`?","body":"I don&#39;t think you can use named parameters as column name placeholders (as opposed, for example, to values in a <code>where</code> clause). But, regardless, in this case, why can&#39;t you just change <code>:joiningDate as EMP_FIRST_DATE</code> to <code>EMP_JOINING_DATE as EMP_FIRST_DATE</code>?"},{"owner":{"account_id":14921587,"reputation":277,"user_id":10773697,"display_name":"San4musa"},"score":0,"creation_date":1676671651,"post_id":75489105,"comment_id":133191662,"body_markdown":"Actually I simplied the query just to give the example but I have a complex query where I&#39;m using the named parameter in multiple places in WHERE clause, INNER/OUTER join to compare (greater/less than equal) with different column so no specific column I can use in place of the named parameter.","body":"Actually I simplied the query just to give the example but I have a complex query where I&#39;m using the named parameter in multiple places in WHERE clause, INNER/OUTER join to compare (greater/less than equal) with different column so no specific column I can use in place of the named parameter."}],"owner":{"account_id":14921587,"reputation":277,"user_id":10773697,"display_name":"San4musa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676672400,"creation_date":1676666659,"question_id":75489105,"body_markdown":"Here is the query-\r\n\r\n    sql = &quot;SELECT EMP_NAME, EMP_NUMBER, EMP_JOINING_DATE, :joiningDate as NAMED_PARAM_DATE from EMP_TABLE where EMP_JOINING_DATE&gt;:joiningDate&quot;\r\n\r\ncode:\r\n\r\n    NamedParameterJdbcTemplate jdbcTemplate;\r\n    .....\r\n    MapSqlParameterSource sqlParams = new MapSqlParameterSource();\r\n    sqlParams.addValue(&quot;joiningDate&quot;, System.getenv(&quot;JOIN_DATE&quot;), Types.DATE);\r\n    results = this.jdbcTemplate.query(sql, sqlParams, new BeanPropertyRowMapper&lt;Employee.class&gt;(Employee.class))\r\n\r\nThis gives me below error\r\n\r\n&gt; nested exception is com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2\r\n&gt; SQL Error: SQLCODE=-418, SQLSTATE=42610, SQLERRMC=unresolved untyped\r\n&gt; expression, DRIVER=4.25.1301\r\n\r\nIs it possible to do that? I can do it alternate way but just wanted to check from Query perspective as we can select any hard-coded value in SQL query using any DB client.\r\n\r\nNote: Updated the query for more clarity, also this code works fine when I take out joiningDate from SELECT statement.\r\n","title":"How to use named paramater in SELECT query statement in NamedParameterJdbcTemplate","body":"<p>Here is the query-</p>\n<pre><code>sql = &quot;SELECT EMP_NAME, EMP_NUMBER, EMP_JOINING_DATE, :joiningDate as NAMED_PARAM_DATE from EMP_TABLE where EMP_JOINING_DATE&gt;:joiningDate&quot;\n</code></pre>\n<p>code:</p>\n<pre><code>NamedParameterJdbcTemplate jdbcTemplate;\n.....\nMapSqlParameterSource sqlParams = new MapSqlParameterSource();\nsqlParams.addValue(&quot;joiningDate&quot;, System.getenv(&quot;JOIN_DATE&quot;), Types.DATE);\nresults = this.jdbcTemplate.query(sql, sqlParams, new BeanPropertyRowMapper&lt;Employee.class&gt;(Employee.class))\n</code></pre>\n<p>This gives me below error</p>\n<blockquote>\n<p>nested exception is com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2\nSQL Error: SQLCODE=-418, SQLSTATE=42610, SQLERRMC=unresolved untyped\nexpression, DRIVER=4.25.1301</p>\n</blockquote>\n<p>Is it possible to do that? I can do it alternate way but just wanted to check from Query perspective as we can select any hard-coded value in SQL query using any DB client.</p>\n<p>Note: Updated the query for more clarity, also this code works fine when I take out joiningDate from SELECT statement.</p>\n"},{"tags":["java","lombok"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1651331156,"post_id":72061139,"comment_id":127341915,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":16139017,"reputation":129,"user_id":15817444,"display_name":"Mazhar Ibna Zahur"},"score":0,"creation_date":1651341096,"post_id":72061139,"comment_id":127349547,"body_markdown":"I have used Lombok 1.18.22 for jdk17 and spring boot 2.6.2. it works fine for me. can you please share your Lombok version?","body":"I have used Lombok 1.18.22 for jdk17 and spring boot 2.6.2. it works fine for me. can you please share your Lombok version?"}],"answers":[{"tags":[],"owner":{"account_id":27815181,"reputation":11,"user_id":21236733,"display_name":"MRoose"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676672342,"creation_date":1676672283,"answer_id":75489721,"question_id":72061139,"body_markdown":"Liberica JDK is only JDK like OpenJDK and so on.\r\nLombok support Java 17.\r\nAccordingly, it will work with Liberica JDK.\r\nI myself use Liberica JDK 17 full (with JavaFX) on home development with Spring Boot and Lombok ;)","title":"Lombok works on Liberica JDK 17?","body":"<p>Liberica JDK is only JDK like OpenJDK and so on.\nLombok support Java 17.\nAccordingly, it will work with Liberica JDK.\nI myself use Liberica JDK 17 full (with JavaFX) on home development with Spring Boot and Lombok ;)</p>\n"}],"owner":{"account_id":25144480,"reputation":11,"user_id":18990456,"display_name":"jonatan.bermudezgbl"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3286,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1676672342,"creation_date":1651250389,"question_id":72061139,"body_markdown":"I&#39;ve been working on a project using BellSoft Liberica JDK v17, IntelliJ 2022.1 and SpringBoot 2.6.7. I have noticed that he has not recognized my entries from Lombok. I have searched for information and it seems that in version 16 of this JDK with external libraries such as Lombok. But I can&#39;t find anything for 17.\r\n\r\nCould you tell me if the incompatibility exists and if I should use another version? Thanks to everyone for your support.","title":"Lombok works on Liberica JDK 17?","body":"<p>I've been working on a project using BellSoft Liberica JDK v17, IntelliJ 2022.1 and SpringBoot 2.6.7. I have noticed that he has not recognized my entries from Lombok. I have searched for information and it seems that in version 16 of this JDK with external libraries such as Lombok. But I can't find anything for 17.</p>\n<p>Could you tell me if the incompatibility exists and if I should use another version? Thanks to everyone for your support.</p>\n"},{"tags":["java","android","google-play","amazon-in-app-purchase"],"comments":[{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":0,"creation_date":1382712770,"post_id":19592927,"comment_id":29080287,"body_markdown":"Do you have a problem with using two separate binaries? It&#39;s literally a matter of changing a SINGLE line of code.","body":"Do you have a problem with using two separate binaries? It&#39;s literally a matter of changing a SINGLE line of code."},{"owner":{"account_id":1776934,"reputation":2275,"user_id":1620542,"display_name":"Eluvatar"},"score":0,"creation_date":1382712772,"post_id":19592927,"comment_id":29080290,"body_markdown":"consider how you would detect the source store on a device with both? remember you can install the amazon store on any device and therefore you would have no way of knowing where it came from.","body":"consider how you would detect the source store on a device with both? remember you can install the amazon store on any device and therefore you would have no way of knowing where it came from."},{"owner":{"account_id":560010,"reputation":17004,"user_id":922200,"accept_rate":58,"display_name":"Alfie Hanssen"},"score":0,"creation_date":1382714569,"post_id":19592927,"comment_id":29081460,"body_markdown":"@Cruncher, I can go the two separate binaries approach but it&#39;s a unique setup where a single binary is preferred.","body":"@Cruncher, I can go the two separate binaries approach but it&#39;s a unique setup where a single binary is preferred."},{"owner":{"account_id":560010,"reputation":17004,"user_id":922200,"accept_rate":58,"display_name":"Alfie Hanssen"},"score":0,"creation_date":1382714657,"post_id":19592927,"comment_id":29081521,"body_markdown":"@Eluvatar, if two stores were installed on the same device, I&#39;d still need to know which store installed the App so that I can communicate with that store for IAP, no?","body":"@Eluvatar, if two stores were installed on the same device, I&#39;d still need to know which store installed the App so that I can communicate with that store for IAP, no?"},{"owner":{"account_id":1776934,"reputation":2275,"user_id":1620542,"display_name":"Eluvatar"},"score":0,"creation_date":1382738249,"post_id":19592927,"comment_id":29092992,"body_markdown":"yes you would, I&#39;d say if you want something reliable use separate builds, I suppose you could try to figure out the installer, but what if someone side loads the app (takes the apk from another device)? then what store would you use if you were trying to figure it out at runtime?","body":"yes you would, I&#39;d say if you want something reliable use separate builds, I suppose you could try to figure out the installer, but what if someone side loads the app (takes the apk from another device)? then what store would you use if you were trying to figure it out at runtime?"},{"owner":{"account_id":560010,"reputation":17004,"user_id":922200,"accept_rate":58,"display_name":"Alfie Hanssen"},"score":0,"creation_date":1382797823,"post_id":19592927,"comment_id":29105498,"body_markdown":"Gotcha, that makes a lot of sense (I&#39;m relatively new to the Android world, coming from iOS). Do you want to post some version of this an the answer so I can accept it?","body":"Gotcha, that makes a lot of sense (I&#39;m relatively new to the Android world, coming from iOS). Do you want to post some version of this an the answer so I can accept it?"}],"answers":[{"tags":[],"owner":{"account_id":501891,"reputation":8060,"user_id":1569675,"display_name":"Offbeatmammal"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1414822361,"creation_date":1382989808,"answer_id":19643816,"question_id":19592927,"body_markdown":"two binaries would be the most robust method but checking both the Build.MANUFACTURER and the installerName should get you pretty close (though assuming yo want to check for the Amazon AppStore if the user has installed an old version of the installer on their non-Kindle device and not updated the installerName might report null)\r\n\r\n    boolean isAmazonDevice = Build.MANUFACTURER.equalsIgnoreCase(&quot;amazon&quot;);\r\n\r\n    final Application application = getApplication();\r\n    String installerName = application.getPackageManager().getInstallerPackageName(application.getPackageName());\r\n    boolean fromAmazonStore = installerName != null &amp;&amp; installerName.equalsIgnoreCase(&quot;com.amazon.venezia&quot;);\r\n\r\nand then checking the value for:\r\n\r\n    isAmazonDevice || fromAmazonStore\r\n\r\nshould get you what you need for a significant amount of the time.\r\n\r\nOne scenario where this can confuse matters is if you are sideloading your apk for testing - in that case it wouldn&#39;t have the correct InstallerPackageName. You can fake that by sideloading the apk using:\r\n\r\n    adb install -i com.amazon.venezia APK_NAME","title":"Is it possible to reliably detect at runtime which store installed an Android App (Google Play or Amazon Market)?","body":"<p>two binaries would be the most robust method but checking both the Build.MANUFACTURER and the installerName should get you pretty close (though assuming yo want to check for the Amazon AppStore if the user has installed an old version of the installer on their non-Kindle device and not updated the installerName might report null)</p>\n\n<pre><code>boolean isAmazonDevice = Build.MANUFACTURER.equalsIgnoreCase(\"amazon\");\n\nfinal Application application = getApplication();\nString installerName = application.getPackageManager().getInstallerPackageName(application.getPackageName());\nboolean fromAmazonStore = installerName != null &amp;&amp; installerName.equalsIgnoreCase(\"com.amazon.venezia\");\n</code></pre>\n\n<p>and then checking the value for:</p>\n\n<pre><code>isAmazonDevice || fromAmazonStore\n</code></pre>\n\n<p>should get you what you need for a significant amount of the time.</p>\n\n<p>One scenario where this can confuse matters is if you are sideloading your apk for testing - in that case it wouldn't have the correct InstallerPackageName. You can fake that by sideloading the apk using:</p>\n\n<pre><code>adb install -i com.amazon.venezia APK_NAME\n</code></pre>\n"}],"owner":{"account_id":560010,"reputation":17004,"user_id":922200,"accept_rate":58,"display_name":"Alfie Hanssen"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1525,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":19643816,"answer_count":1,"score":8,"last_activity_date":1676672130,"creation_date":1382712285,"question_id":19592927,"body_markdown":"I need to know which store is the App&#39;s installer so that I know which store to communicate with for in-App purchase functionality.\r\n\r\nIs the definitive *100% reliable* approach to generate two separate binaries? Or is there a *100% reliable* code-based runtime approach?\r\n\r\nThere are many similar Stackoverflow questions. All have answers that suggest using methods like `getInstallerPackageName` on the `PackageManager` class. All also have comments or conflicting answers saying that this is not a reliable approach, suggesting that the only way to reliably check which store installed a given App is to generate two separate binaries, each with a `storeFlag` set, and upload one binary to Amazon and one to Google Play.","title":"Is it possible to reliably detect at runtime which store installed an Android App (Google Play or Amazon Market)?","body":"<p>I need to know which store is the App's installer so that I know which store to communicate with for in-App purchase functionality.</p>\n<p>Is the definitive <em>100% reliable</em> approach to generate two separate binaries? Or is there a <em>100% reliable</em> code-based runtime approach?</p>\n<p>There are many similar Stackoverflow questions. All have answers that suggest using methods like <code>getInstallerPackageName</code> on the <code>PackageManager</code> class. All also have comments or conflicting answers saying that this is not a reliable approach, suggesting that the only way to reliably check which store installed a given App is to generate two separate binaries, each with a <code>storeFlag</code> set, and upload one binary to Amazon and one to Google Play.</p>\n"},{"tags":["java","arrays","oop","object","arraylist"],"comments":[{"owner":{"account_id":4471477,"reputation":407,"user_id":3637689,"display_name":"mark"},"score":1,"creation_date":1612117129,"post_id":65982518,"comment_id":116660620,"body_markdown":"First of all, did you try to debug the code? is that reading file contents? and where exactly you are trying to print values","body":"First of all, did you try to debug the code? is that reading file contents? and where exactly you are trying to print values"},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":3,"creation_date":1612117380,"post_id":65982518,"comment_id":116660709,"body_markdown":"You have a method `toString()` where the comment clearly tells you you have to complete the implementation using `String.format` instead of just returning `&quot;&quot;`. Do that.","body":"You have a method <code>toString()</code> where the comment clearly tells you you have to complete the implementation using <code>String.format</code> instead of just returning <code>&quot;&quot;</code>. Do that."},{"owner":{"account_id":18394167,"reputation":19,"user_id":13399090,"display_name":"RideTheLightning343"},"score":0,"creation_date":1612117553,"post_id":65982518,"comment_id":116660746,"body_markdown":"Yes, i`m able to print the data from the arrays in the while loop. Im just trying to print the data(The objects i`m still trying to create) to the screen now.(I will format later). I just need to create an arraylist of Hurricane objects then display the objects and thier attributes.","body":"Yes, i<code>m able to print the data from the arrays in the while loop. Im just trying to print the data(The objects i</code>m still trying to create) to the screen now.(I will format later). I just need to create an arraylist of Hurricane objects then display the objects and thier attributes."},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":1,"creation_date":1612117676,"post_id":65982518,"comment_id":116660778,"body_markdown":"You will be able to print them as soon as you have a proper implementation of the `toString` method.","body":"You will be able to print them as soon as you have a proper implementation of the <code>toString</code> method."},{"owner":{"account_id":18394167,"reputation":19,"user_id":13399090,"display_name":"RideTheLightning343"},"score":0,"creation_date":1612118568,"post_id":65982518,"comment_id":116661040,"body_markdown":"@RealSkeptic, I need to create the objects beforehand then use my getter methods to display the output from there right? (I&#39;m completing the method you suggested now.)","body":"@RealSkeptic, I need to create the objects beforehand then use my getter methods to display the output from there right? (I&#39;m completing the method you suggested now.)"},{"owner":{"account_id":18394167,"reputation":19,"user_id":13399090,"display_name":"RideTheLightning343"},"score":0,"creation_date":1612118880,"post_id":65982518,"comment_id":116661143,"body_markdown":"Thanks, @RealSkeptic, I&#39;m just working out some bugs now","body":"Thanks, @RealSkeptic, I&#39;m just working out some bugs now"},{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":0,"creation_date":1612169981,"post_id":65982518,"comment_id":116672781,"body_markdown":"Why do you need all those temporary arrays if you have defined `Hurricane` class?  You can create instances of `Hurricane` while you are reading the file and add them to ArrayList.  It&#39;s a bit redundant to read the file just to count the lines to define the size of temporary arrays, then populate the arrays (which is likely to fail because `hasNext` is not called before each `next()/nextInt()`), then loop through arrays (and fail on `ArrayOutOfBoundsException` because of condition `i &lt;= numValues`) and add `Hurricane` instances in the third round.","body":"Why do you need all those temporary arrays if you have defined <code>Hurricane</code> class?  You can create instances of <code>Hurricane</code> while you are reading the file and add them to ArrayList.  It&#39;s a bit redundant to read the file just to count the lines to define the size of temporary arrays, then populate the arrays (which is likely to fail because <code>hasNext</code> is not called before each <code>next()&#47;nextInt()</code>), then loop through arrays (and fail on <code>ArrayOutOfBoundsException</code> because of condition <code>i &lt;= numValues</code>) and add <code>Hurricane</code> instances in the third round."}],"owner":{"account_id":18394167,"reputation":19,"user_id":13399090,"display_name":"RideTheLightning343"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":213,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676671447,"creation_date":1612116246,"question_id":65982518,"body_markdown":"```\r\npublic class Hurricane\r\n{\r\n   private String name, month;\r\n   private int year;\r\n   private int cat;\r\n   private int pressure;\r\n   private double windspeed;\r\n\r\n     \r\n   \r\n   //constructor - all private instance variables initialized\r\n   public Hurricane(int y, String n, String m, int c, int p, double w) {\r\n      this.year = y;\r\n      this.name = n;\r\n      this.month = m;\r\n      this.cat = c;\r\n      this.pressure = p;\r\n      this.windspeed = w;\r\n   }\r\n\r\n   //accessor for year\r\n   public int getYear() {\r\n      return year; \r\n   }\r\n\r\n   //accessor for name\r\n   public String getName() {\r\n      return name; \r\n   }\r\n   \r\n   //accessor for month\r\n   public String getMonth() {\r\n      return month;  \r\n   }\r\n   \r\n   //accessor for category\r\n   public int getCat() {\r\n      return cat;  \r\n   }\r\n   \r\n   //accessor for pressure\r\n   public int getPressure() {\r\n      return pressure;\r\n   }\r\n   \r\n   //accessor for windspeed\r\n   public double getWindspeed() {\r\n      return windspeed;\r\n   }\r\n   \r\n   //mutator for year\r\n   public void setYear(int y) {\r\n      year = y;\r\n   }\r\n   \r\n   //mutator for name\r\n   public void setName(String n) {\r\n      name = n;\r\n   }\r\n   \r\n   //mutator for month\r\n   public void setMonth(String m) {\r\n      month = m;\r\n   }\r\n   \r\n   //mutator for category\r\n   public void setCat(int c) {\r\n      cat = c;\r\n   }\r\n   \r\n   //mutator for pressure\r\n   public void setPressure(int p) {\r\n      pressure = p;\r\n   }\r\n   \r\n   //mutator for windspeed\r\n   public void setWindspeed (double w) {\r\n      windspeed = w;\r\n   }\r\n\r\n\r\n   public String toString() {\r\n       return &quot;&quot;;\r\n      // complete the toString method using String.format()  \r\n   }\r\n    \r\n}\r\n```\r\nAnd Here is my Main method: \r\n```\r\nimport java.io.IOException;\r\nimport java.io.PrintWriter;\r\nimport java.io.File;\r\nimport java.util.Scanner;\r\nimport java.util.ArrayList;\r\npublic class HurricaneTester\r\n\r\n{\r\n\r\n    public static void main(String[] args) throws IOException\r\n    {\r\n        //read data from text file &amp; put in an array\r\n        File fileName = new File(&quot;hurricanedata.txt&quot;);\r\n        Scanner inFile = new Scanner(fileName);\r\n        int numValues = 0;\r\n        \r\n        //count number of lines in text file\r\n        while (inFile.hasNextLine() )\r\n        {\r\n            inFile.nextLine();\r\n            numValues++;\r\n        }\r\n        inFile.close();\r\n        \r\n        \r\n        //initialize arrays based on lines counted in text file\r\n        int [] years = new int[numValues];\r\n        String [] months = new String[numValues];\r\n        int [] pressures = new int[numValues];\r\n        double [] windSpeeds = new double[numValues];\r\n        String [] names = new String[numValues];\r\n        \r\n        //read and assign data from text file to the arrays\r\n        inFile = new Scanner(fileName);\r\n        int index = 0;\r\n        while(inFile.hasNext() )\r\n        {\r\n            years[index] = inFile.nextInt();\r\n            months[index] = inFile.next();\r\n            pressures[index] = inFile.nextInt();\r\n            windSpeeds[index] = inFile.nextDouble();\r\n            names[index] = inFile.next();\r\n            index++;\r\n        }\r\n        inFile.close();\r\n        //convert the windspeed, determine categories, calculate sums\r\n        int [] cat = new int [numValues];\r\n        int f = 0;\r\n        for(double y : windSpeeds){// converts windspeed to mph\r\n        y = y * 1.15078;\r\n            if ((y &gt;=74) &amp;&amp; (y &lt;= 98)){//Finds category of hurricane\r\n            cat[f] = 1;\r\n        }\r\n        else if ((y &gt;=99) &amp;&amp; (y &lt;= 110)){\r\n            cat[f] = 2;\r\n        }\r\n        else if ((y &gt;=111) &amp;&amp; (y &lt;= 129)){\r\n            cat[f] = 3;\r\n        }\r\n        else if ((y &gt;=130) &amp;&amp; (y &lt;= 156)){\r\n            cat[f] = 4;\r\n        }\r\n        else if (y &gt;=157){\r\n            cat[f] =5;\r\n        }\r\n        else{\r\n        System.out.println(&quot;Errors =&quot;);\r\n        System.out.print(y);\r\n        System.out.println(&quot;=&quot;);\r\n        }\r\n        f++;\r\n        }\r\n        //create a Hurricane ArrayList using the data above\r\n        //Need to create Arraylist of obejcts \r\n        ArrayList&lt;Hurricane&gt; list = new ArrayList();\r\n        for (int i = 0;i &lt;= numValues; i++){\r\n        list.add(new Hurricane(years[i],names[i],months[i],cat[i],pressures[i],windSpeeds[i]));\r\n        //System.out.println(list);\r\n        i++;\r\n        }\r\n        for (Hurricane ef: list) {//Prints Items from list\r\n            System.out.println(ef);\r\n        }\r\n        //user prompted for range of years - not completed yet\r\n        \r\n        \r\n        //print the data - not completed yet\r\n     }\r\n}\r\n```\r\nI`ve searched around on stack overflow and looked over many tutorials, my code just returns nothing after I try to print objects from it. The overall program goal is to take information from a file about hurricanes and depending on the year, display output from that time period. Thanks for any help! If you need clarification or more info, just let me know!","title":"How to create and print objects(with several attributes) from arraylist in java?","body":"<pre><code>public class Hurricane\n{\n   private String name, month;\n   private int year;\n   private int cat;\n   private int pressure;\n   private double windspeed;\n\n     \n   \n   //constructor - all private instance variables initialized\n   public Hurricane(int y, String n, String m, int c, int p, double w) {\n      this.year = y;\n      this.name = n;\n      this.month = m;\n      this.cat = c;\n      this.pressure = p;\n      this.windspeed = w;\n   }\n\n   //accessor for year\n   public int getYear() {\n      return year; \n   }\n\n   //accessor for name\n   public String getName() {\n      return name; \n   }\n   \n   //accessor for month\n   public String getMonth() {\n      return month;  \n   }\n   \n   //accessor for category\n   public int getCat() {\n      return cat;  \n   }\n   \n   //accessor for pressure\n   public int getPressure() {\n      return pressure;\n   }\n   \n   //accessor for windspeed\n   public double getWindspeed() {\n      return windspeed;\n   }\n   \n   //mutator for year\n   public void setYear(int y) {\n      year = y;\n   }\n   \n   //mutator for name\n   public void setName(String n) {\n      name = n;\n   }\n   \n   //mutator for month\n   public void setMonth(String m) {\n      month = m;\n   }\n   \n   //mutator for category\n   public void setCat(int c) {\n      cat = c;\n   }\n   \n   //mutator for pressure\n   public void setPressure(int p) {\n      pressure = p;\n   }\n   \n   //mutator for windspeed\n   public void setWindspeed (double w) {\n      windspeed = w;\n   }\n\n\n   public String toString() {\n       return &quot;&quot;;\n      // complete the toString method using String.format()  \n   }\n    \n}\n</code></pre>\n<p>And Here is my Main method:</p>\n<pre><code>import java.io.IOException;\nimport java.io.PrintWriter;\nimport java.io.File;\nimport java.util.Scanner;\nimport java.util.ArrayList;\npublic class HurricaneTester\n\n{\n\n    public static void main(String[] args) throws IOException\n    {\n        //read data from text file &amp; put in an array\n        File fileName = new File(&quot;hurricanedata.txt&quot;);\n        Scanner inFile = new Scanner(fileName);\n        int numValues = 0;\n        \n        //count number of lines in text file\n        while (inFile.hasNextLine() )\n        {\n            inFile.nextLine();\n            numValues++;\n        }\n        inFile.close();\n        \n        \n        //initialize arrays based on lines counted in text file\n        int [] years = new int[numValues];\n        String [] months = new String[numValues];\n        int [] pressures = new int[numValues];\n        double [] windSpeeds = new double[numValues];\n        String [] names = new String[numValues];\n        \n        //read and assign data from text file to the arrays\n        inFile = new Scanner(fileName);\n        int index = 0;\n        while(inFile.hasNext() )\n        {\n            years[index] = inFile.nextInt();\n            months[index] = inFile.next();\n            pressures[index] = inFile.nextInt();\n            windSpeeds[index] = inFile.nextDouble();\n            names[index] = inFile.next();\n            index++;\n        }\n        inFile.close();\n        //convert the windspeed, determine categories, calculate sums\n        int [] cat = new int [numValues];\n        int f = 0;\n        for(double y : windSpeeds){// converts windspeed to mph\n        y = y * 1.15078;\n            if ((y &gt;=74) &amp;&amp; (y &lt;= 98)){//Finds category of hurricane\n            cat[f] = 1;\n        }\n        else if ((y &gt;=99) &amp;&amp; (y &lt;= 110)){\n            cat[f] = 2;\n        }\n        else if ((y &gt;=111) &amp;&amp; (y &lt;= 129)){\n            cat[f] = 3;\n        }\n        else if ((y &gt;=130) &amp;&amp; (y &lt;= 156)){\n            cat[f] = 4;\n        }\n        else if (y &gt;=157){\n            cat[f] =5;\n        }\n        else{\n        System.out.println(&quot;Errors =&quot;);\n        System.out.print(y);\n        System.out.println(&quot;=&quot;);\n        }\n        f++;\n        }\n        //create a Hurricane ArrayList using the data above\n        //Need to create Arraylist of obejcts \n        ArrayList&lt;Hurricane&gt; list = new ArrayList();\n        for (int i = 0;i &lt;= numValues; i++){\n        list.add(new Hurricane(years[i],names[i],months[i],cat[i],pressures[i],windSpeeds[i]));\n        //System.out.println(list);\n        i++;\n        }\n        for (Hurricane ef: list) {//Prints Items from list\n            System.out.println(ef);\n        }\n        //user prompted for range of years - not completed yet\n        \n        \n        //print the data - not completed yet\n     }\n}\n</code></pre>\n<p>I`ve searched around on stack overflow and looked over many tutorials, my code just returns nothing after I try to print objects from it. The overall program goal is to take information from a file about hurricanes and depending on the year, display output from that time period. Thanks for any help! If you need clarification or more info, just let me know!</p>\n"},{"tags":["java","aeron"],"comments":[{"owner":{"account_id":4276,"reputation":14213,"user_id":6365,"accept_rate":65,"display_name":"Michael Barker"},"score":0,"creation_date":1677142815,"post_id":75489604,"comment_id":133280484,"body_markdown":"I think these should be presented as two separate questions as they are unrelated.  For the first one it would be useful if you could narrow it down to a simple example.  For the 2nd part, providing the JDK version would also be useful (along with the command line used to set the javaagent).","body":"I think these should be presented as two separate questions as they are unrelated.  For the first one it would be useful if you could narrow it down to a simple example.  For the 2nd part, providing the JDK version would also be useful (along with the command line used to set the javaagent)."}],"owner":{"account_id":62847,"reputation":5047,"user_id":186429,"accept_rate":62,"display_name":"Galder Zamarre&#241;o"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676671345,"creation_date":1676671345,"question_id":75489604,"body_markdown":"I&#39;m toying with a websocket server that sends messages to an aeron publication. These get consumed by a subscription and this normally works fine. Published messages are consumed by an Agent backed subscription. However, when 2 messages are sent concurrently to the publication, I can see one of the messages consumed twice while the other is not. Any ideas what could be causing this?\r\n\r\nI&#39;ve tried to enable the Aeron Agent but setting it up with the same 1.40 version as the dependencies the project has, it throws this error:\r\n\r\n```\r\nException in thread &quot;[sender,receiver,driver-conductor]&quot; java.lang.LinkageError: loader constraint violation: when resolving method &#39;void io.aeron.agent.DriverEventLogger.log(io.aeron.agent.DriverEventCode, org.agrona.DirectBuffer, int, int)&#39; the class loader io.quarkus.bootstrap.classloading.QuarkusClassLoader @3e6f3bae of the current class, io/aeron/driver/ClientCommandAdapter, and the class loader &#39;app&#39; for the method&#39;s defining class, io/aeron/agent/DriverEventLogger, have different Class objects for the type org/agrona/DirectBuffer used in the signature (io.aeron.driver.ClientCommandAdapter is in unnamed module of loader io.quarkus.bootstrap.classloading.QuarkusClassLoader @3e6f3bae, parent loader &#39;app&#39;; io.aeron.agent.DriverEventLogger is in unnamed module of loader &#39;app&#39;)\r\n\tat io.aeron.driver.ClientCommandAdapter.onMessage(ClientCommandAdapter.java:75)\r\n\tat org.agrona.concurrent.ringbuffer.ManyToOneRingBuffer.read(ManyToOneRingBuffer.java:201)\r\n\tat io.aeron.driver.ClientCommandAdapter.receive(ClientCommandAdapter.java:66)\r\n\tat io.aeron.driver.DriverConductor.doWork(DriverConductor.java:216)\r\n\tat org.agrona.concurrent.CompositeAgent.doWork(CompositeAgent.java:120)\r\n\tat org.agrona.concurrent.AgentRunner.doWork(AgentRunner.java:304)\r\n\tat org.agrona.concurrent.AgentRunner.workLoop(AgentRunner.java:296)\r\n\tat org.agrona.concurrent.AgentRunner.run(AgentRunner.java:162)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1589)\r\n```\r\n\r\nI&#39;ve also tried to hook to a running process using the instructions [here](https://aeroncookbook.com/aeron/aeron-agent/) but it fails saying dynamic agent cannot be found:\r\n\r\n```\r\n$ java -cp ./aeron-all-1.40.0.jar io.aeron.agent.DynamicLoggingAgent ./aeron-agent-1.40.0.jar 61616 start\r\nError: Could not find or load main class io.aeron.agent.DynamicLoggingAgent\r\n```\r\n\r\nThanks","title":"Aeron messaged consumed twice when concurrent messages published","body":"<p>I'm toying with a websocket server that sends messages to an aeron publication. These get consumed by a subscription and this normally works fine. Published messages are consumed by an Agent backed subscription. However, when 2 messages are sent concurrently to the publication, I can see one of the messages consumed twice while the other is not. Any ideas what could be causing this?</p>\n<p>I've tried to enable the Aeron Agent but setting it up with the same 1.40 version as the dependencies the project has, it throws this error:</p>\n<pre><code>Exception in thread &quot;[sender,receiver,driver-conductor]&quot; java.lang.LinkageError: loader constraint violation: when resolving method 'void io.aeron.agent.DriverEventLogger.log(io.aeron.agent.DriverEventCode, org.agrona.DirectBuffer, int, int)' the class loader io.quarkus.bootstrap.classloading.QuarkusClassLoader @3e6f3bae of the current class, io/aeron/driver/ClientCommandAdapter, and the class loader 'app' for the method's defining class, io/aeron/agent/DriverEventLogger, have different Class objects for the type org/agrona/DirectBuffer used in the signature (io.aeron.driver.ClientCommandAdapter is in unnamed module of loader io.quarkus.bootstrap.classloading.QuarkusClassLoader @3e6f3bae, parent loader 'app'; io.aeron.agent.DriverEventLogger is in unnamed module of loader 'app')\n    at io.aeron.driver.ClientCommandAdapter.onMessage(ClientCommandAdapter.java:75)\n    at org.agrona.concurrent.ringbuffer.ManyToOneRingBuffer.read(ManyToOneRingBuffer.java:201)\n    at io.aeron.driver.ClientCommandAdapter.receive(ClientCommandAdapter.java:66)\n    at io.aeron.driver.DriverConductor.doWork(DriverConductor.java:216)\n    at org.agrona.concurrent.CompositeAgent.doWork(CompositeAgent.java:120)\n    at org.agrona.concurrent.AgentRunner.doWork(AgentRunner.java:304)\n    at org.agrona.concurrent.AgentRunner.workLoop(AgentRunner.java:296)\n    at org.agrona.concurrent.AgentRunner.run(AgentRunner.java:162)\n    at java.base/java.lang.Thread.run(Thread.java:1589)\n</code></pre>\n<p>I've also tried to hook to a running process using the instructions <a href=\"https://aeroncookbook.com/aeron/aeron-agent/\" rel=\"nofollow noreferrer\">here</a> but it fails saying dynamic agent cannot be found:</p>\n<pre><code>$ java -cp ./aeron-all-1.40.0.jar io.aeron.agent.DynamicLoggingAgent ./aeron-agent-1.40.0.jar 61616 start\nError: Could not find or load main class io.aeron.agent.DynamicLoggingAgent\n</code></pre>\n<p>Thanks</p>\n"},{"tags":["java","database","multithreading"],"comments":[{"owner":{"account_id":20782878,"reputation":893,"user_id":15982771,"display_name":"Blue Robin"},"score":0,"creation_date":1676657234,"post_id":75487831,"comment_id":133188307,"body_markdown":"Asking what the common approach for something may be seen as subjective.","body":"Asking what the common approach for something may be seen as subjective."},{"owner":{"account_id":21601781,"reputation":55,"user_id":15929801,"display_name":"Neran"},"score":0,"creation_date":1676657422,"post_id":75487831,"comment_id":133188367,"body_markdown":"@BlueRobin well I am just looking for a solution, but probably this title sounds better now?","body":"@BlueRobin well I am just looking for a solution, but probably this title sounds better now?"},{"owner":{"account_id":20782878,"reputation":893,"user_id":15982771,"display_name":"Blue Robin"},"score":0,"creation_date":1676657472,"post_id":75487831,"comment_id":133188383,"body_markdown":"Just to be cautious, as some may not read the post fully. Thanks!","body":"Just to be cautious, as some may not read the post fully. Thanks!"},{"owner":{"account_id":7123163,"reputation":359,"user_id":5447035,"display_name":"Diego Ferruchelli"},"score":1,"creation_date":1676659968,"post_id":75487831,"comment_id":133189033,"body_markdown":"About &quot;database is locked&quot;, how many concurrent transactions do you have? SQLite is not designed for heavy use. Have you seen [this thread](https://stackoverflow.com/questions/3172929/operationalerror-database-is-locked) and [this documentation](https://www.sqlite.org/lockingv3.html])?","body":"About &quot;database is locked&quot;, how many concurrent transactions do you have? SQLite is not designed for heavy use. Have you seen <a href=\"https://stackoverflow.com/questions/3172929/operationalerror-database-is-locked\">this thread</a> and <a href=\"https://www.sqlite.org/lockingv3.html%5D\" rel=\"nofollow noreferrer\">this documentation</a>?"},{"owner":{"account_id":21601781,"reputation":55,"user_id":15929801,"display_name":"Neran"},"score":0,"creation_date":1676660193,"post_id":75487831,"comment_id":133189081,"body_markdown":"@DiegoFerruchelli in my test program there are 10 client threads","body":"@DiegoFerruchelli in my test program there are 10 client threads"},{"owner":{"account_id":7123163,"reputation":359,"user_id":5447035,"display_name":"Diego Ferruchelli"},"score":0,"creation_date":1676660493,"post_id":75487831,"comment_id":133189151,"body_markdown":"That&#39;s not too many, but we should see what are they doing on the DB. Anyway, the &quot;unique constraint failed&quot; says you&#39;re trying to insert an already existing ID, which is related to the logic of your code. Could you post something more?","body":"That&#39;s not too many, but we should see what are they doing on the DB. Anyway, the &quot;unique constraint failed&quot; says you&#39;re trying to insert an already existing ID, which is related to the logic of your code. Could you post something more?"},{"owner":{"account_id":21601781,"reputation":55,"user_id":15929801,"display_name":"Neran"},"score":0,"creation_date":1676660831,"post_id":75487831,"comment_id":133189239,"body_markdown":"@DiegoFerruchelli added some snippets that are executed by the server threads","body":"@DiegoFerruchelli added some snippets that are executed by the server threads"},{"owner":{"account_id":7123163,"reputation":359,"user_id":5447035,"display_name":"Diego Ferruchelli"},"score":0,"creation_date":1676668121,"post_id":75487831,"comment_id":133190982,"body_markdown":"The code seems ok. There may be a problem with the `ObjectInputStream`. Are you writing the file (or whatever it is) from several threads at the same time? Does it look ok when you open it from the operating system? Try dumping the content of the variables (`userName`, etc) before looking for each record in the DB. If it&#39;s not much trouble, also show some ID for the running thread.","body":"The code seems ok. There may be a problem with the <code>ObjectInputStream</code>. Are you writing the file (or whatever it is) from several threads at the same time? Does it look ok when you open it from the operating system? Try dumping the content of the variables (<code>userName</code>, etc) before looking for each record in the DB. If it&#39;s not much trouble, also show some ID for the running thread."},{"owner":{"account_id":21601781,"reputation":55,"user_id":15929801,"display_name":"Neran"},"score":0,"creation_date":1676670265,"post_id":75487831,"comment_id":133191409,"body_markdown":"@DiegoFerruchelli The server has a run method. In the run method it accepts connections from clients with accept method using its server socket obeject. A new thread is then created on the server with this socket object + a new connection object to the database. The run method of those threads then process the client requests (the snippets i posted here). I get the OIS also from that socket.","body":"@DiegoFerruchelli The server has a run method. In the run method it accepts connections from clients with accept method using its server socket obeject. A new thread is then created on the server with this socket object + a new connection object to the database. The run method of those threads then process the client requests (the snippets i posted here). I get the OIS also from that socket."},{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":0,"creation_date":1676726284,"post_id":75487831,"comment_id":133197418,"body_markdown":"SQLite is a **single client** database and will have trouble with concurrency. If you need concurrency then change to another database that supports this natively. There are easy to install, free options out there, such as PostgreSQL, MariaDB, MySQL. If you don&#39;t want to install a remote datbase, you can use H2 &quot;persistence mode&quot;.","body":"SQLite is a <b>single client</b> database and will have trouble with concurrency. If you need concurrency then change to another database that supports this natively. There are easy to install, free options out there, such as PostgreSQL, MariaDB, MySQL. If you don&#39;t want to install a remote datbase, you can use H2 &quot;persistence mode&quot;."},{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":0,"creation_date":1676726441,"post_id":75487831,"comment_id":133197447,"body_markdown":"Also, in this day and age, you should be using connection pool. SpringBoot implements them by default.","body":"Also, in this day and age, you should be using connection pool. SpringBoot implements them by default."}],"answers":[{"comments":[{"owner":{"account_id":21601781,"reputation":55,"user_id":15929801,"display_name":"Neran"},"score":0,"creation_date":1676659171,"post_id":75487933,"comment_id":133188830,"body_markdown":"I do have 3 static methods (addEntry, existsEntry, getPassword). No im not using begin and commit, im using a prepared statement for the db interactions and then executing it.","body":"I do have 3 static methods (addEntry, existsEntry, getPassword). No im not using begin and commit, im using a prepared statement for the db interactions and then executing it."},{"owner":{"account_id":200481,"reputation":5196,"user_id":446357,"accept_rate":64,"display_name":"MTilsted"},"score":0,"creation_date":1676659535,"post_id":75487933,"comment_id":133188931,"body_markdown":"Have you disabled auto commit?","body":"Have you disabled auto commit?"},{"owner":{"account_id":21601781,"reputation":55,"user_id":15929801,"display_name":"Neran"},"score":0,"creation_date":1676660943,"post_id":75487933,"comment_id":133189264,"body_markdown":"I added some code snippets, hope this clarifies how the threads operate","body":"I added some code snippets, hope this clarifies how the threads operate"},{"owner":{"account_id":21601781,"reputation":55,"user_id":15929801,"display_name":"Neran"},"score":0,"creation_date":1676725790,"post_id":75487933,"comment_id":133197348,"body_markdown":"I have tried disabling and then reenabling auto commit after the transaction. The exceptions are still thrown. I think this is because I use different connection objects to the database for each thread. If I use only one connection WITH MY CODE, I only get the &quot;unique constraint&quot; error. If I additionally disable autocommit, I get in addition more errors like &quot;sql error or missing db (cannot commit - no transaction is active)&quot; or &quot;cannot start a transaction within a transaction&quot;.\n\nI think that I have to use Locks here.","body":"I have tried disabling and then reenabling auto commit after the transaction. The exceptions are still thrown. I think this is because I use different connection objects to the database for each thread. If I use only one connection WITH MY CODE, I only get the &quot;unique constraint&quot; error. If I additionally disable autocommit, I get in addition more errors like &quot;sql error or missing db (cannot commit - no transaction is active)&quot; or &quot;cannot start a transaction within a transaction&quot;.  I think that I have to use Locks here."}],"tags":[],"owner":{"account_id":200481,"reputation":5196,"user_id":446357,"accept_rate":64,"display_name":"MTilsted"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1676658424,"creation_date":1676657761,"answer_id":75487933,"question_id":75487831,"body_markdown":"No you should not thread synchronization for this. There are many reasons this will newer work.\r\n\r\nDo you explicit start and commit each transactions with begin() and commit()?\r\n\r\nBut it sounds to me like you have transactions running for to long. You should newer have a transaction open, while communication with the client over the network. So what you should do is: \r\n\r\nGet all the data you need from the client. Call Begin() on the database. \r\nDo all needed sql on the database. \r\nThen commit() \r\nand then send the reply back to the client so the transaction is open as little time as possible.\r\n\r\nUpdated:\r\nThis also depend on the transaction isolation level. There is description of these is sqllite here:\r\n\r\nBtw: You can set sqllite to work in exclusive mode, which might be a good test for you. If you do that and transactions begin to hang, then your problem is that you have open transactions which you don&#39;t close.\r\n\r\nsee: \r\nhttps://dba.stackexchange.com/questions/258003/what-standard-sql-isolation-levels-do-the-sqlite-isolation-levels-correspond-to","title":"How to handle concurrent operations on relational databases?","body":"<p>No you should not thread synchronization for this. There are many reasons this will newer work.</p>\n<p>Do you explicit start and commit each transactions with begin() and commit()?</p>\n<p>But it sounds to me like you have transactions running for to long. You should newer have a transaction open, while communication with the client over the network. So what you should do is:</p>\n<p>Get all the data you need from the client. Call Begin() on the database.\nDo all needed sql on the database.\nThen commit()\nand then send the reply back to the client so the transaction is open as little time as possible.</p>\n<p>Updated:\nThis also depend on the transaction isolation level. There is description of these is sqllite here:</p>\n<p>Btw: You can set sqllite to work in exclusive mode, which might be a good test for you. If you do that and transactions begin to hang, then your problem is that you have open transactions which you don't close.</p>\n<p>see:\n<a href=\"https://dba.stackexchange.com/questions/258003/what-standard-sql-isolation-levels-do-the-sqlite-isolation-levels-correspond-to\">https://dba.stackexchange.com/questions/258003/what-standard-sql-isolation-levels-do-the-sqlite-isolation-levels-correspond-to</a></p>\n"}],"owner":{"account_id":21601781,"reputation":55,"user_id":15929801,"display_name":"Neran"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1676670755,"creation_date":1676657129,"question_id":75487831,"body_markdown":"I have a client / server application (local) where several clients perform operations concurrently on the server. The server creates a separate thread for each client in which the desired operations (register/login) are then processed. Each thread has its own connection to the database and communicates with the client via its own socket that i get from ServerSocket.accept(). The operations from the client require read and write access to a database (sqlite) on the server. The register op checks whether the entry already exists, if not it gets added. And the login op is just checking passwords. The thread will then tell the client whether the operation was successful or not.\r\nWhen a client is finished, it sends a message to the server to close the connection. The thread on the server interrupts its loop and then closes its socket and its connection to the database.\r\n\r\nWhen there is just one client, there are no problems with the program. If There are multiple clients concurrently, then i get 2 types of SQLExceptions, &quot;database is locked&quot; and &quot;unique constraint failed&quot;. The former might happen, because there are concurrent transactions being performed on the database. And this is prevented, because of ACID. The latter might happen, because of concurrency (before inserting a new entry into the DB I check whether the primary key is already used, the primary key is a username). Correct me if im wrong.\r\nRight now I am not using thread synchronization or disabling auto commit when doing the operations on the database.\r\n\r\nI thought that the transactions on ACID DBs are automatically queued up if new ones are invoked while the current one has not finished yet. But this does not seem to be the case. So am I supposed to actively prevent these exceptions by using thread synchronization (e.g. by using Locks) when executing queries/updates or perhaps just retry until the operations succeed? What are common approaches to handle the exceptions? I know that its problematic that the thread wait for a message to end but this is another topic. This is just a program to learn about working with databases.\r\n\r\nHere are some snippets of code that runs on the server&#39;s threads. When a thread using this runnable is created I create a new Socket from ServerSocket.accept() and a new Connection object from the driver and pass both to it.\r\n\r\n    public class ConnectionHandler implements Runnable {\r\n    \r\n        private final Socket socket;\r\n        private final Connection dbConnection;\r\n    \r\n        public ConnectionHandler(Socket socket, Connection databaseConnection) {\r\n            this.socket = socket;\r\n            this.dbConnection = databaseConnection;\r\n        }\r\n    \r\n        @Override\r\n        public void run() {\r\n            try (socket; dbConnection;\r\n                 ObjectInputStream ois = new ObjectInputStream(socket.getInputStream());\r\n                 ObjectOutputStream oos = new ObjectOutputStream(socket.getOutputStream()); )\r\n            {\r\n                boolean shouldClose = false;\r\n                while (!shouldClose)\r\n                {\r\n                    Actions action = (Actions) ois.readObject();\r\n    \r\n                    boolean success = false;\r\n                    if (action == Actions.REGISTER)\r\n                    {\r\n                        success = performClientRegistration(ois, dbConnection);\r\n                    }\r\n                    else if (action == Actions.LOGIN)\r\n                    {\r\n                        success = performClientLogin(ois, dbConnection);\r\n                    }\r\n                    else if(action == Actions.SHUTDOWN)\r\n                    {\r\n                        shouldClose = true;\r\n                    }\r\n    \r\n                    if (success) {\r\n                        oos.writeObject(Response.SUCCESS);\r\n                    } else {\r\n                        oos.writeObject(Response.FAILURE);\r\n                    }\r\n                }\r\n            }\r\n            catch (ClassNotFoundException | IOException | SQLException e) {\r\n                e.printStackTrace();\r\n            }\r\n            System.out.println(&quot;Socket to &quot; + socket + &quot; closed.&quot;);\r\n        }\r\n\r\n    private boolean performClientRegistration(ObjectInputStream ois, Connection dbConnection) throws IOException, ClassNotFoundException {\r\n            String userName = (String)ois.readObject();\r\n            String pwd = (String)ois.readObject();\r\n            String firstName = (String)ois.readObject();\r\n            String lastName = (String)ois.readObject();\r\n    \r\n            try\r\n            {\r\n                boolean isClientRegistrationPossible = !DBHelper.existsEntry(dbConnection, userName);\r\n                if(isClientRegistrationPossible) {\r\n                    DBHelper.addEntry(dbConnection, userName, pwd, firstName, lastName);\r\n                    return true;\r\n                }\r\n            }\r\n            catch (SQLException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            return false;\r\n        }\r\n    } // END OF CLASS\r\n\r\n\r\n    public static void addEntry(Connection connection, String userName, String pwd, String firstName, String lastName) throws SQLException {\r\n        PreparedStatement statement = connection.prepareStatement(&quot;INSERT INTO users &quot; +\r\n            &quot;(userName, pwd, lastName, firstName) VALUES (?, ?, ?, ?)&quot;);\r\n        statement.setString(1, userName);\r\n        statement.setString(2, pwd);\r\n        statement.setString(3, lastName);\r\n        statement.setString(4, firstName);\r\n        statement.executeUpdate();\r\n    }\r\n\r\n    public static boolean existsEntry(Connection connection, String userName) throws SQLException {\r\n        PreparedStatement statement = connection.prepareStatement(&quot;SELECT 1 FROM users WHERE userName = ?&quot;);\r\n        statement.setString(1, userName);\r\n        ResultSet result = statement.executeQuery();\r\n\r\n        if(result.next()) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }","title":"How to handle concurrent operations on relational databases?","body":"<p>I have a client / server application (local) where several clients perform operations concurrently on the server. The server creates a separate thread for each client in which the desired operations (register/login) are then processed. Each thread has its own connection to the database and communicates with the client via its own socket that i get from ServerSocket.accept(). The operations from the client require read and write access to a database (sqlite) on the server. The register op checks whether the entry already exists, if not it gets added. And the login op is just checking passwords. The thread will then tell the client whether the operation was successful or not.\nWhen a client is finished, it sends a message to the server to close the connection. The thread on the server interrupts its loop and then closes its socket and its connection to the database.</p>\n<p>When there is just one client, there are no problems with the program. If There are multiple clients concurrently, then i get 2 types of SQLExceptions, &quot;database is locked&quot; and &quot;unique constraint failed&quot;. The former might happen, because there are concurrent transactions being performed on the database. And this is prevented, because of ACID. The latter might happen, because of concurrency (before inserting a new entry into the DB I check whether the primary key is already used, the primary key is a username). Correct me if im wrong.\nRight now I am not using thread synchronization or disabling auto commit when doing the operations on the database.</p>\n<p>I thought that the transactions on ACID DBs are automatically queued up if new ones are invoked while the current one has not finished yet. But this does not seem to be the case. So am I supposed to actively prevent these exceptions by using thread synchronization (e.g. by using Locks) when executing queries/updates or perhaps just retry until the operations succeed? What are common approaches to handle the exceptions? I know that its problematic that the thread wait for a message to end but this is another topic. This is just a program to learn about working with databases.</p>\n<p>Here are some snippets of code that runs on the server's threads. When a thread using this runnable is created I create a new Socket from ServerSocket.accept() and a new Connection object from the driver and pass both to it.</p>\n<pre><code>public class ConnectionHandler implements Runnable {\n\n    private final Socket socket;\n    private final Connection dbConnection;\n\n    public ConnectionHandler(Socket socket, Connection databaseConnection) {\n        this.socket = socket;\n        this.dbConnection = databaseConnection;\n    }\n\n    @Override\n    public void run() {\n        try (socket; dbConnection;\n             ObjectInputStream ois = new ObjectInputStream(socket.getInputStream());\n             ObjectOutputStream oos = new ObjectOutputStream(socket.getOutputStream()); )\n        {\n            boolean shouldClose = false;\n            while (!shouldClose)\n            {\n                Actions action = (Actions) ois.readObject();\n\n                boolean success = false;\n                if (action == Actions.REGISTER)\n                {\n                    success = performClientRegistration(ois, dbConnection);\n                }\n                else if (action == Actions.LOGIN)\n                {\n                    success = performClientLogin(ois, dbConnection);\n                }\n                else if(action == Actions.SHUTDOWN)\n                {\n                    shouldClose = true;\n                }\n\n                if (success) {\n                    oos.writeObject(Response.SUCCESS);\n                } else {\n                    oos.writeObject(Response.FAILURE);\n                }\n            }\n        }\n        catch (ClassNotFoundException | IOException | SQLException e) {\n            e.printStackTrace();\n        }\n        System.out.println(&quot;Socket to &quot; + socket + &quot; closed.&quot;);\n    }\n\nprivate boolean performClientRegistration(ObjectInputStream ois, Connection dbConnection) throws IOException, ClassNotFoundException {\n        String userName = (String)ois.readObject();\n        String pwd = (String)ois.readObject();\n        String firstName = (String)ois.readObject();\n        String lastName = (String)ois.readObject();\n\n        try\n        {\n            boolean isClientRegistrationPossible = !DBHelper.existsEntry(dbConnection, userName);\n            if(isClientRegistrationPossible) {\n                DBHelper.addEntry(dbConnection, userName, pwd, firstName, lastName);\n                return true;\n            }\n        }\n        catch (SQLException e) {\n            e.printStackTrace();\n        }\n\n        return false;\n    }\n} // END OF CLASS\n\n\npublic static void addEntry(Connection connection, String userName, String pwd, String firstName, String lastName) throws SQLException {\n    PreparedStatement statement = connection.prepareStatement(&quot;INSERT INTO users &quot; +\n        &quot;(userName, pwd, lastName, firstName) VALUES (?, ?, ?, ?)&quot;);\n    statement.setString(1, userName);\n    statement.setString(2, pwd);\n    statement.setString(3, lastName);\n    statement.setString(4, firstName);\n    statement.executeUpdate();\n}\n\npublic static boolean existsEntry(Connection connection, String userName) throws SQLException {\n    PreparedStatement statement = connection.prepareStatement(&quot;SELECT 1 FROM users WHERE userName = ?&quot;);\n    statement.setString(1, userName);\n    ResultSet result = statement.executeQuery();\n\n    if(result.next()) {\n        return true;\n    }\n\n    return false;\n}\n</code></pre>\n"},{"tags":["java","sql","sql-server","mybatis","mybatis-mapper"],"comments":[{"owner":{"account_id":1314580,"reputation":3299,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1676668043,"post_id":75488941,"comment_id":133190965,"body_markdown":"With [`&lt;foreach&gt;`](https://mybatis.org/mybatis-3/dynamic-sql.html#foreach), you can iterate the parameter (e.g. `List&lt;Entry&lt;String, String&gt;&gt;`) to build the condition.","body":"With <a href=\"https://mybatis.org/mybatis-3/dynamic-sql.html#foreach\" rel=\"nofollow noreferrer\"><code>&lt;foreach&gt;</code></a>, you can iterate the parameter (e.g. <code>List&lt;Entry&lt;String, String&gt;&gt;</code>) to build the condition."},{"owner":{"account_id":873828,"reputation":19233,"user_id":924077,"display_name":"Bogdan Sahlean"},"score":0,"creation_date":1676767374,"post_id":75488941,"comment_id":133203990,"body_markdown":"Clause WHERE Col1 = # AND Col2 = #","body":"Clause WHERE Col1 = # AND Col2 = #"}],"answers":[{"tags":[],"owner":{"account_id":17433686,"reputation":5235,"user_id":12637193,"display_name":"T N"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676670584,"creation_date":1676670070,"answer_id":75489472,"question_id":75488941,"body_markdown":"If your calling application can combine the keys into a single delimited string, the query can split the values back out into individual search values. Since your use case involves multiple key columns, you will need two different delimiters - one to separate tuples, and one to separate keys within a tuple.\r\n\r\nFor example, if you can build a parameter like:\r\n```\r\nDECLARE @SearchIDs VARCHAR(MAX) = &#39;1a,1b;2a,2b;3a,3b&#39;\r\n```\r\n\r\nThe following will separate the keys and perform an efficient key lookup:\r\n```\r\nSELECT *\r\nFROM (\r\n    SELECT\r\n        MAX(CASE WHEN S2.ordinal = 1 THEN S2.value END) AS search_id_1,\r\n        MAX(CASE WHEN S2.ordinal = 2 THEN S2.value END) AS search_id_2\r\n    FROM STRING_SPLIT(@SearchIDs, &#39;;&#39;, 1) S1\r\n    CROSS APPLY STRING_SPLIT(S1.value, &#39;,&#39;, 1) S2\r\n    GROUP BY S1.ordinal\r\n) P\r\nJOIN foo f\r\n    ON f.foo_id_1 = P.search_id_1 and f.foo_id_2 = P.search_id_2\r\n```\r\n\r\nSample results:\r\n\r\n| search_id_1 | search_id_2 | foo_id_1 | foo_id_2 | foo_name |\r\n| - | - | - | - | - |\r\n| 1a | 1b | 1a | 1b | A |\r\n| 2a | 2b | 2a | 2b | CCC |\r\n| 3a | 3b | 3a | 3b | EEEEE |\r\n\r\nIn you actual code, you should cast the `search_id_1` and `search_id_2` values to the proper data type.\r\n\r\n```\r\n        CAST(MAX(...) AS UNIQUEIDENTIFIER) AS search_id_1,\r\n        CAST(MAX(...) AS UNIQUEIDENTIFIER) AS search_id_2\r\n```\r\n\r\nSee [this db&lt;&gt;fiddle](https://dbfiddle.uk/_kwSWsLU).\r\n\r\nOther more formal ways to pass multiple repeating values in a parameter  involve constructing XML or JSON, but sometimes a plain string is the simplest as long as you can guarantee that the values cannot themselves contain any delimiters.","title":"Querying multiple records using composite key in the mybatis","body":"<p>If your calling application can combine the keys into a single delimited string, the query can split the values back out into individual search values. Since your use case involves multiple key columns, you will need two different delimiters - one to separate tuples, and one to separate keys within a tuple.</p>\n<p>For example, if you can build a parameter like:</p>\n<pre><code>DECLARE @SearchIDs VARCHAR(MAX) = '1a,1b;2a,2b;3a,3b'\n</code></pre>\n<p>The following will separate the keys and perform an efficient key lookup:</p>\n<pre><code>SELECT *\nFROM (\n    SELECT\n        MAX(CASE WHEN S2.ordinal = 1 THEN S2.value END) AS search_id_1,\n        MAX(CASE WHEN S2.ordinal = 2 THEN S2.value END) AS search_id_2\n    FROM STRING_SPLIT(@SearchIDs, ';', 1) S1\n    CROSS APPLY STRING_SPLIT(S1.value, ',', 1) S2\n    GROUP BY S1.ordinal\n) P\nJOIN foo f\n    ON f.foo_id_1 = P.search_id_1 and f.foo_id_2 = P.search_id_2\n</code></pre>\n<p>Sample results:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>search_id_1</th>\n<th>search_id_2</th>\n<th>foo_id_1</th>\n<th>foo_id_2</th>\n<th>foo_name</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1a</td>\n<td>1b</td>\n<td>1a</td>\n<td>1b</td>\n<td>A</td>\n</tr>\n<tr>\n<td>2a</td>\n<td>2b</td>\n<td>2a</td>\n<td>2b</td>\n<td>CCC</td>\n</tr>\n<tr>\n<td>3a</td>\n<td>3b</td>\n<td>3a</td>\n<td>3b</td>\n<td>EEEEE</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>In you actual code, you should cast the <code>search_id_1</code> and <code>search_id_2</code> values to the proper data type.</p>\n<pre><code>        CAST(MAX(...) AS UNIQUEIDENTIFIER) AS search_id_1,\n        CAST(MAX(...) AS UNIQUEIDENTIFIER) AS search_id_2\n</code></pre>\n<p>See <a href=\"https://dbfiddle.uk/_kwSWsLU\" rel=\"nofollow noreferrer\">this db&lt;&gt;fiddle</a>.</p>\n<p>Other more formal ways to pass multiple repeating values in a parameter  involve constructing XML or JSON, but sometimes a plain string is the simplest as long as you can guarantee that the values cannot themselves contain any delimiters.</p>\n"}],"owner":{"account_id":13048203,"reputation":113,"user_id":9429422,"display_name":"Anmol Garg"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676670584,"creation_date":1676665320,"question_id":75488941,"body_markdown":"I have a table with composite key. I want to query it in bulk in mybatis. Is it possible? if yes, how?\r\n\r\nTable structure of table Foo with foo_id_1 and foo_id_2 as composite primary key.\r\n\r\n```\r\n{\r\n foo_id_1 uniqueIdentifier,\r\n foo_id_2 uniqueIdentifier,\r\n foo_name nvarchar\r\n}\r\n```\r\n\r\nI will have a list of foo POJOs and I want to query them to check if they exist or not.\r\nBelow is for getting a single object \r\n\r\n```\r\n&lt;select id=&quot;getFooList&quot; resultMap=&quot;foo&quot;&gt;\r\n        SELECT\r\n            f.foo_id_1,\r\n            f.foo_id_2,\r\n            f.foo_name\r\n        FROM foo f\r\n        WHERE f.foo_id_1 = #{foo_id_1} and f.foo_id_2 = #{foo_id_2}\r\n    &lt;/select&gt;\r\n\r\n    &lt;resultMap id=&quot;foo&quot; type=&quot;Foo&quot;&gt;\r\n        &lt;id property=&quot;fooId1&quot; column=&quot;foo_id_1&quot;/&gt;\r\n        &lt;id property=&quot;fooId2&quot; column=&quot;foo_id_2&quot;/&gt;\r\n        &lt;result property=&quot;fooName&quot; column=&quot;foo_name&quot;/&gt;\r\n    &lt;/resultMap&gt;\r\n```\r\n\r\nBut I want to fetch in bulk.\r\nCorresponding SQL query would be\r\n\r\n```\r\nSelect *\r\nFrom foo\r\nWhere (foo_id_1 = &#39;1a&#39; and foo_id_2 = &#39;1b&#39;) or\r\n      (foo_id_1 = &#39;2a&#39; and foo_id_2 = &#39;2b&#39;) or\r\n      (foo_id_1 = &#39;3a&#39; and foo_id_2 = &#39;3b&#39;);\r\n \r\n```\r\n\r\n","title":"Querying multiple records using composite key in the mybatis","body":"<p>I have a table with composite key. I want to query it in bulk in mybatis. Is it possible? if yes, how?</p>\n<p>Table structure of table Foo with foo_id_1 and foo_id_2 as composite primary key.</p>\n<pre><code>{\n foo_id_1 uniqueIdentifier,\n foo_id_2 uniqueIdentifier,\n foo_name nvarchar\n}\n</code></pre>\n<p>I will have a list of foo POJOs and I want to query them to check if they exist or not.\nBelow is for getting a single object</p>\n<pre><code>&lt;select id=&quot;getFooList&quot; resultMap=&quot;foo&quot;&gt;\n        SELECT\n            f.foo_id_1,\n            f.foo_id_2,\n            f.foo_name\n        FROM foo f\n        WHERE f.foo_id_1 = #{foo_id_1} and f.foo_id_2 = #{foo_id_2}\n    &lt;/select&gt;\n\n    &lt;resultMap id=&quot;foo&quot; type=&quot;Foo&quot;&gt;\n        &lt;id property=&quot;fooId1&quot; column=&quot;foo_id_1&quot;/&gt;\n        &lt;id property=&quot;fooId2&quot; column=&quot;foo_id_2&quot;/&gt;\n        &lt;result property=&quot;fooName&quot; column=&quot;foo_name&quot;/&gt;\n    &lt;/resultMap&gt;\n</code></pre>\n<p>But I want to fetch in bulk.\nCorresponding SQL query would be</p>\n<pre><code>Select *\nFrom foo\nWhere (foo_id_1 = '1a' and foo_id_2 = '1b') or\n      (foo_id_1 = '2a' and foo_id_2 = '2b') or\n      (foo_id_1 = '3a' and foo_id_2 = '3b');\n \n</code></pre>\n"},{"tags":["java","reactjs","postgresql","axios","derived"],"answers":[{"comments":[{"owner":{"account_id":27814774,"reputation":3,"user_id":21236413,"display_name":"Bester"},"score":0,"creation_date":1676668638,"post_id":75489140,"comment_id":133191062,"body_markdown":"ERROR:  operator does not exist: character varying = integer\nLINE 2: (SELECT MAX(id) FROM priorityprogress WHERE asms=188660)\n                                                        ^\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\nSQL state: 42883\nCharacter: 98","body":"ERROR:  operator does not exist: character varying = integer LINE 2: (SELECT MAX(id) FROM priorityprogress WHERE asms=188660)                                                         ^ HINT:  No operator matches the given name and argument types. You might need to add explicit type casts. SQL state: 42883 Character: 98"},{"owner":{"account_id":27814774,"reputation":3,"user_id":21236413,"display_name":"Bester"},"score":0,"creation_date":1676669280,"post_id":75489140,"comment_id":133191198,"body_markdown":"SORTED. Thank you VERY much. Worked first time. I just had to create a duplicate column that was of type Int to match the ID and sorted :)","body":"SORTED. Thank you VERY much. Worked first time. I just had to create a duplicate column that was of type Int to match the ID and sorted :)"},{"owner":{"account_id":15035959,"reputation":307,"user_id":10852370,"display_name":"Hao Zhang"},"score":0,"creation_date":1676670277,"post_id":75489140,"comment_id":133191413,"body_markdown":"My bad, I didn&#39;t notice asms is a text column. Just try the statement above, and you won&#39;t need a duplicate column.","body":"My bad, I didn&#39;t notice asms is a text column. Just try the statement above, and you won&#39;t need a duplicate column."}],"tags":[],"owner":{"account_id":15035959,"reputation":307,"user_id":10852370,"display_name":"Hao Zhang"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676670224,"creation_date":1676667038,"answer_id":75489140,"question_id":75489049,"body_markdown":"Try this:\r\n\r\n    SELECT pprecord FROM YourTable WHERE id =\r\n    (SELECT MAX(id) FROM YourTable WHERE asms = &#39;188660&#39;)\r\n\r\nExplanation:\r\n\r\nFirst line select pprecord, second line select the id\r\n\r\nI&#39;ll improve the answer if any additional question. Upvotes and acceptions are appreciated~","title":"Simple SQL query on highest ID","body":"<p>Try this:</p>\n<pre><code>SELECT pprecord FROM YourTable WHERE id =\n(SELECT MAX(id) FROM YourTable WHERE asms = '188660')\n</code></pre>\n<p>Explanation:</p>\n<p>First line select pprecord, second line select the id</p>\n<p>I'll improve the answer if any additional question. Upvotes and acceptions are appreciated~</p>\n"}],"owner":{"account_id":27814774,"reputation":3,"user_id":21236413,"display_name":"Bester"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75489140,"answer_count":1,"score":0,"last_activity_date":1676670224,"creation_date":1676666178,"question_id":75489049,"body_markdown":"I unsuccessfully attempted to leverage Java&#39;s DerivedQueries but cannot accomplish the required result so I have to manually write a SELECT Statement.\r\n\r\nI want to display one single record in my UI. This should be the most recently generated record (which means it has the highest ID Number) associated with a category that we call &quot;ASMS&quot;. In other words, look through all the rows that have ASMS#123, find the one that has the highest ID and then return the contents of one column cell. \r\n\r\nASMS: Entries are classified by 11 specific ASMS numbers.\r\nID: AutoGenerated\r\nPPRECORD: New entries being inserted each day\r\n\r\nI hope the image makes more sense.\r\n\r\n```java\r\n//RETURN ONLY THE LATEST RECORD\r\n//https://besterdev-api.apps.pcfepg3mi.gm.com/api/v1/pprecords/latest/{asmsnumber}\r\n@RequestMapping(&quot;/pprecords/latest/{asmsNumber}&quot;)\r\npublic List&lt;Optional&lt;PriorityProgressEntity&gt;&gt; getLatestRecord(@PathVariable(value = &quot;asmsNumber&quot;) String asmsNumber) {\r\n    List&lt;Optional&lt;PriorityProgressEntity&gt;&gt; asms_number = priorityprogressrepo.findFirst1ByAsmsNumber(asmsNumber);\r\n    return asms_number;}\r\n```\r\nThe ReactJS FE makes an AXIOS.get and I can retrieve all the records associated with the ASMS, but I do not have the skill to display only JSON object that has the highest ID value. I&#39;m happy to do this in the FE also.\r\n\r\n![Requirement](https://i.stack.imgur.com/r4XYq.png)\r\n\r\nI tried Derived Queries. `.findFirst1ByAsmsNumber(asmsNumber)` does not consider the highest ID number.","title":"Simple SQL query on highest ID","body":"<p>I unsuccessfully attempted to leverage Java's DerivedQueries but cannot accomplish the required result so I have to manually write a SELECT Statement.</p>\n<p>I want to display one single record in my UI. This should be the most recently generated record (which means it has the highest ID Number) associated with a category that we call &quot;ASMS&quot;. In other words, look through all the rows that have ASMS#123, find the one that has the highest ID and then return the contents of one column cell.</p>\n<p>ASMS: Entries are classified by 11 specific ASMS numbers.\nID: AutoGenerated\nPPRECORD: New entries being inserted each day</p>\n<p>I hope the image makes more sense.</p>\n<pre class=\"lang-java prettyprint-override\"><code>//RETURN ONLY THE LATEST RECORD\n//https://besterdev-api.apps.pcfepg3mi.gm.com/api/v1/pprecords/latest/{asmsnumber}\n@RequestMapping(&quot;/pprecords/latest/{asmsNumber}&quot;)\npublic List&lt;Optional&lt;PriorityProgressEntity&gt;&gt; getLatestRecord(@PathVariable(value = &quot;asmsNumber&quot;) String asmsNumber) {\n    List&lt;Optional&lt;PriorityProgressEntity&gt;&gt; asms_number = priorityprogressrepo.findFirst1ByAsmsNumber(asmsNumber);\n    return asms_number;}\n</code></pre>\n<p>The ReactJS FE makes an AXIOS.get and I can retrieve all the records associated with the ASMS, but I do not have the skill to display only JSON object that has the highest ID value. I'm happy to do this in the FE also.</p>\n<p><img src=\"https://i.stack.imgur.com/r4XYq.png\" alt=\"Requirement\" /></p>\n<p>I tried Derived Queries. <code>.findFirst1ByAsmsNumber(asmsNumber)</code> does not consider the highest ID number.</p>\n"},{"tags":["java","amazon-web-services","amazon-s3","consistency"],"comments":[{"owner":{"account_id":1845098,"reputation":171677,"user_id":1695906,"display_name":"Michael - sqlbot"},"score":0,"creation_date":1500584220,"post_id":45222819,"comment_id":77416437,"body_markdown":"Good answer, below, from @stdunbar.  For locking the **name** of an S3 object key (or the name of anything, really... basically a named semaphore), consider the possibility of using [consistent conditional writes](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/WorkingWithItems.html#WorkingWithItems.ConditionalUpdate) to a DynamoDB table created for the purpose of lock management.","body":"Good answer, below, from @stdunbar.  For locking the <b>name</b> of an S3 object key (or the name of anything, really... basically a named semaphore), consider the possibility of using <a href=\"http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/WorkingWithItems.html#WorkingWithItems.ConditionalUpdate\" rel=\"nofollow noreferrer\">consistent conditional writes</a> to a DynamoDB table created for the purpose of lock management."}],"answers":[{"tags":[],"owner":{"account_id":3509196,"reputation":16493,"user_id":2933977,"display_name":"stdunbar"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1500576944,"creation_date":1500576944,"answer_id":45223108,"question_id":45222819,"body_markdown":"No, unfortunately it won&#39;t.  From the S3 &lt;a href=&quot;http://docs.aws.amazon.com/AmazonS3/latest/dev/Introduction.html#ConsistencyModel&quot;&gt;consistency model&lt;/a&gt;:\r\n\r\n&gt; A process writes a new object to Amazon S3 and immediately lists keys\r\n&gt; within its bucket. Until the change is fully propagated, the object\r\n&gt; might not appear in the list.\r\n\r\nand:\r\n\r\n&gt; Amazon S3 does not currently support object locking. If two PUT\r\n&gt; requests are simultaneously made to the same key, the request with the\r\n&gt; latest time stamp wins. If this is an issue, you will need to build an\r\n&gt; object-locking mechanism into your application.\r\n\r\nSo if both of your threads or processes try to create the lock in S3 they will be allowed to but last write wins so you haven&#39;t really locked anything.  Something else needs to happen for your locking to work\r\n","title":"Can pseudo &quot;lock&quot; objects be used in the Amazon S3 API?","body":"<p>No, unfortunately it won't.  From the S3 <a href=\"http://docs.aws.amazon.com/AmazonS3/latest/dev/Introduction.html#ConsistencyModel\" rel=\"nofollow noreferrer\">consistency model</a>:</p>\n\n<blockquote>\n  <p>A process writes a new object to Amazon S3 and immediately lists keys\n  within its bucket. Until the change is fully propagated, the object\n  might not appear in the list.</p>\n</blockquote>\n\n<p>and:</p>\n\n<blockquote>\n  <p>Amazon S3 does not currently support object locking. If two PUT\n  requests are simultaneously made to the same key, the request with the\n  latest time stamp wins. If this is an issue, you will need to build an\n  object-locking mechanism into your application.</p>\n</blockquote>\n\n<p>So if both of your threads or processes try to create the lock in S3 they will be allowed to but last write wins so you haven't really locked anything.  Something else needs to happen for your locking to work</p>\n"},{"tags":[],"owner":{"account_id":25563016,"reputation":106,"user_id":19345335,"display_name":"Keyless"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1655305928,"creation_date":1655305928,"answer_id":72633822,"question_id":45222819,"body_markdown":"Normally, I would recommend a database, but you mention that is not an option in this case.\r\n\r\nAs an alternative, you can use something like [lockable](https://lockable.dev). They provide advisory locks which can be used to control e.g. resource access like in your case.\r\n\r\nThe solution would have to use their HTTPS endpoints (as far as I can&#39;t tell they only have a Python client):\r\n\r\n```\r\n1. Acquire lock by making a request to https://lockable.dev/api/acquire/my-lock-name\r\n2. Work on your object (read, edit, write)\r\n3. Release the lock by making a request to https://lockable.dev/api/release/my-lock-name\r\n```","title":"Can pseudo &quot;lock&quot; objects be used in the Amazon S3 API?","body":"<p>Normally, I would recommend a database, but you mention that is not an option in this case.</p>\n<p>As an alternative, you can use something like <a href=\"https://lockable.dev\" rel=\"nofollow noreferrer\">lockable</a>. They provide advisory locks which can be used to control e.g. resource access like in your case.</p>\n<p>The solution would have to use their HTTPS endpoints (as far as I can't tell they only have a Python client):</p>\n<pre><code>1. Acquire lock by making a request to https://lockable.dev/api/acquire/my-lock-name\n2. Work on your object (read, edit, write)\n3. Release the lock by making a request to https://lockable.dev/api/release/my-lock-name\n</code></pre>\n"},{"tags":[],"owner":{"account_id":99935,"reputation":501,"user_id":1128790,"accept_rate":86,"display_name":"John Stephenson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665101700,"creation_date":1660139665,"answer_id":73307585,"question_id":45222819,"body_markdown":"This bit me too, and it wasn&#39;t feasible to use a database at that time, so we came up with https://github.com/jfstephe/aws-s3-lock. This is a javascript implementation, but perhaps could inspire a java version if needed.","title":"Can pseudo &quot;lock&quot; objects be used in the Amazon S3 API?","body":"<p>This bit me too, and it wasn't feasible to use a database at that time, so we came up with <a href=\"https://github.com/jfstephe/aws-s3-lock\" rel=\"nofollow noreferrer\">https://github.com/jfstephe/aws-s3-lock</a>. This is a javascript implementation, but perhaps could inspire a java version if needed.</p>\n"},{"comments":[{"owner":{"account_id":15182009,"reputation":81,"user_id":10955067,"display_name":"melvin"},"score":0,"creation_date":1679896852,"post_id":75347123,"comment_id":133796527,"body_markdown":"thank you, your suggestion validates my idea. Of course, this solution requires each client to be a good citizen and respect the rules.","body":"thank you, your suggestion validates my idea. Of course, this solution requires each client to be a good citizen and respect the rules."},{"owner":{"account_id":992128,"reputation":551,"user_id":1009106,"display_name":"keitwb"},"score":0,"creation_date":1700789582,"post_id":75347123,"comment_id":136699456,"body_markdown":"If `ModifiedTime` represents the initial upload time of the lock object and s3 were experiencing significant delays that resulted in the second client&#39;s PUT to have a later timestamp but return a successful response and show up in the subsequent LIST response used in step 4 _before_ the object from the first client, it is possible that both clients could think they have the lock. Unless S3 makes certain guarantees about the ordering of `ModifiedTime` between separate objects I don&#39;t see any way to avoid this problem with this method.","body":"If <code>ModifiedTime</code> represents the initial upload time of the lock object and s3 were experiencing significant delays that resulted in the second client&#39;s PUT to have a later timestamp but return a successful response and show up in the subsequent LIST response used in step 4 <i>before</i> the object from the first client, it is possible that both clients could think they have the lock. Unless S3 makes certain guarantees about the ordering of <code>ModifiedTime</code> between separate objects I don&#39;t see any way to avoid this problem with this method."},{"owner":{"account_id":1026503,"reputation":3508,"user_id":1035698,"display_name":"misberner"},"score":0,"creation_date":1700904784,"post_id":75347123,"comment_id":136711286,"body_markdown":"I haven’t tested this, but I would strongly assume that the modified time is not the initial upload time. Strong consistency means guaranteed results based on happens-before constraints, I would be surprised if S3 claims strong consistency but has no record of a key to establish the total happens-before ordering.","body":"I haven’t tested this, but I would strongly assume that the modified time is not the initial upload time. Strong consistency means guaranteed results based on happens-before constraints, I would be surprised if S3 claims strong consistency but has no record of a key to establish the total happens-before ordering."}],"tags":[],"owner":{"account_id":1026503,"reputation":3508,"user_id":1035698,"display_name":"misberner"},"comment_count":3,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1675532963,"creation_date":1675532963,"answer_id":75347123,"question_id":45222819,"body_markdown":"If you come here in 2023 and still think it&#39;s a good idea to use S3 for locks, this _is_ possible in a guaranteed race-condition free way thanks to the strengthened consistency model, and without any forced waiting periods during lock acquisition.\r\n\r\n1. Determine basename for the lock (e.g., `some-dir/interesting-object.lock`)\r\n2. Writer creates empty object `some-dir/interesting-object.lock.&lt;uuid&gt;` in bucket. The `&lt;uuid&gt;` can either be generated for each lock, or once for each writer (we assume a writer doesn&#39;t write concurrently), it doesn&#39;t matter.\r\n3. List objects with prefix `some-dir/interesting-object.lock.`\r\n4. Check if file with &quot;our&quot; UUID is the oldest per `ModifiedTime`. In the extremely unlikely scenario that two `ModifiedTime`s are equal, break ties based on lexicographical ordering of UUIDs.\r\n5. If aforementioned check succeeds, you have acquired the lock. You can now do the work. Otherwise, someone beat you to it.\r\n6. Remove lock file (note: this means that if the acquisition failed, you should remove the lock file immediately).\r\n\r\nThis works because it&#39;s guaranteed that once a put succeeds, it will immediately show up in list calls, and each worker does list after put. If another writer even writes the object one nanosecond after us, they are still 100% guaranteed to see in their list call that our object was there first.\r\n\r\nIn order to allow removing stale/expired locks (those should be excluded in the check in step 4, and the files be deleted), this requires placing an upper bound on the duration of the critical section, although it&#39;s possible to arbitrary extend the lock time by creating new lock files with different UUIDs (some limits apply on when you can remove the old ones, but I&#39;m too lazy to think this through right now). Also, for determining whether a lock is stale/expired, do not rely on the local machine&#39;s time, instead, use the `ModifiedTime` of the newly created lock object as a calibrated clock source.\r\n\r\n\r\nI&#39;m not saying it&#39;s a good idea to use lockfiles in S3, but that doesn&#39;t change the fact that it is possible.\r\n","title":"Can pseudo &quot;lock&quot; objects be used in the Amazon S3 API?","body":"<p>If you come here in 2023 and still think it's a good idea to use S3 for locks, this <em>is</em> possible in a guaranteed race-condition free way thanks to the strengthened consistency model, and without any forced waiting periods during lock acquisition.</p>\n<ol>\n<li>Determine basename for the lock (e.g., <code>some-dir/interesting-object.lock</code>)</li>\n<li>Writer creates empty object <code>some-dir/interesting-object.lock.&lt;uuid&gt;</code> in bucket. The <code>&lt;uuid&gt;</code> can either be generated for each lock, or once for each writer (we assume a writer doesn't write concurrently), it doesn't matter.</li>\n<li>List objects with prefix <code>some-dir/interesting-object.lock.</code></li>\n<li>Check if file with &quot;our&quot; UUID is the oldest per <code>ModifiedTime</code>. In the extremely unlikely scenario that two <code>ModifiedTime</code>s are equal, break ties based on lexicographical ordering of UUIDs.</li>\n<li>If aforementioned check succeeds, you have acquired the lock. You can now do the work. Otherwise, someone beat you to it.</li>\n<li>Remove lock file (note: this means that if the acquisition failed, you should remove the lock file immediately).</li>\n</ol>\n<p>This works because it's guaranteed that once a put succeeds, it will immediately show up in list calls, and each worker does list after put. If another writer even writes the object one nanosecond after us, they are still 100% guaranteed to see in their list call that our object was there first.</p>\n<p>In order to allow removing stale/expired locks (those should be excluded in the check in step 4, and the files be deleted), this requires placing an upper bound on the duration of the critical section, although it's possible to arbitrary extend the lock time by creating new lock files with different UUIDs (some limits apply on when you can remove the old ones, but I'm too lazy to think this through right now). Also, for determining whether a lock is stale/expired, do not rely on the local machine's time, instead, use the <code>ModifiedTime</code> of the newly created lock object as a calibrated clock source.</p>\n<p>I'm not saying it's a good idea to use lockfiles in S3, but that doesn't change the fact that it is possible.</p>\n"}],"owner":{"account_id":4666627,"reputation":132,"user_id":3779543,"accept_rate":0,"display_name":"Azzip"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2319,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":4,"score":7,"last_activity_date":1676669966,"creation_date":1500576050,"question_id":45222819,"body_markdown":"I&#39;m thinking about using &quot;lock&quot; S3 objects in order to prevent simultaneous identical operations on a given S3 object. But I have great doubts about the validity of this technical solution.\r\n\r\nMore precisely, at the beginning of an operation on an object, a lock file corresponding to the name of the object and the type of operation being done would be created. \r\n\r\nExample: at the beginning of myOperation on myObject, lck/myObject/myOperation object would be looked for and created if it does not exist.\r\n\r\nThis &quot;lock&quot; object would be destroyed at the end of the operation, whether it is successful or not.\r\n\r\nI know the standard solution would be to use a database, but the application currently does not have one. Thus, if I could handle consistency with S3 only, this would be sufficient.\r\n\r\nMy concern is that this lock object system will run in a multi-threaded / and possibly multi-nodes architecture. Now, I&#39;ve read that Amazon S3 support &quot;read after write consistency&quot;.\r\n\r\nDoes it mean that if my application 1 (node 1) / thread 2 puts a lock object on a given bucket through the Java Amazon S3 API, this lock object will be instantaneously visible to other threads and other applications using the same API?","title":"Can pseudo &quot;lock&quot; objects be used in the Amazon S3 API?","body":"<p>I'm thinking about using &quot;lock&quot; S3 objects in order to prevent simultaneous identical operations on a given S3 object. But I have great doubts about the validity of this technical solution.</p>\n<p>More precisely, at the beginning of an operation on an object, a lock file corresponding to the name of the object and the type of operation being done would be created.</p>\n<p>Example: at the beginning of myOperation on myObject, lck/myObject/myOperation object would be looked for and created if it does not exist.</p>\n<p>This &quot;lock&quot; object would be destroyed at the end of the operation, whether it is successful or not.</p>\n<p>I know the standard solution would be to use a database, but the application currently does not have one. Thus, if I could handle consistency with S3 only, this would be sufficient.</p>\n<p>My concern is that this lock object system will run in a multi-threaded / and possibly multi-nodes architecture. Now, I've read that Amazon S3 support &quot;read after write consistency&quot;.</p>\n<p>Does it mean that if my application 1 (node 1) / thread 2 puts a lock object on a given bucket through the Java Amazon S3 API, this lock object will be instantaneously visible to other threads and other applications using the same API?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":7547772,"reputation":8593,"user_id":5730279,"display_name":"hc_dev"},"score":0,"creation_date":1676664324,"post_id":75488400,"comment_id":133190156,"body_markdown":"Please post the complete error-output (including stack trace) for &quot;resulting in null pointer exception&quot;, also show what did not work when filtering with Java&#39;s Streaming API.","body":"Please post the complete error-output (including stack trace) for &quot;resulting in null pointer exception&quot;, also show what did not work when filtering with Java&#39;s Streaming API."}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676669896,"creation_date":1676665015,"answer_id":75488890,"question_id":75488400,"body_markdown":"&gt; I want to remove the null value of company ID.\r\n\r\nI presume you mean remove the list element if the Id is null. So It&#39;s not the bean that is null, it is the `companyId`.  Assuming you have getters, try it like this.  If the Id is not null, let it pass thru.\r\n```\r\n\r\nList&lt;NewSRMAPIResponseBean&gt; finalList=newSRMAPIResponseBeanList.parallelStream()\r\n        .filter(bean-&gt;bean.getCompanyId() != null)\r\n        .collect(Collectors.toList());\r\n```\r\nYou can also do it in a simple loop.\r\nTo avoid a `ConurrentModificationException`, use an iterator.\r\n```\r\nIterator&lt;NewSRMAPIResponseBean&gt; iter =  newSRMAPIResponseBeanList.iterator();\r\nwhile (iter.hasNext()) {\r\n    if (iter.next().getCompanyId() == null) {\r\n        iter.remove();\r\n    }\r\n}","title":"Not able to remove null from a list in Java","body":"<blockquote>\n<p>I want to remove the null value of company ID.</p>\n</blockquote>\n<p>I presume you mean remove the list element if the Id is null. So It's not the bean that is null, it is the <code>companyId</code>.  Assuming you have getters, try it like this.  If the Id is not null, let it pass thru.</p>\n<pre><code>\nList&lt;NewSRMAPIResponseBean&gt; finalList=newSRMAPIResponseBeanList.parallelStream()\n        .filter(bean-&gt;bean.getCompanyId() != null)\n        .collect(Collectors.toList());\n</code></pre>\n<p>You can also do it in a simple loop.\nTo avoid a <code>ConurrentModificationException</code>, use an iterator.</p>\n<pre><code>Iterator&lt;NewSRMAPIResponseBean&gt; iter =  newSRMAPIResponseBeanList.iterator();\nwhile (iter.hasNext()) {\n    if (iter.next().getCompanyId() == null) {\n        iter.remove();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27528457,"reputation":39,"user_id":21007380,"display_name":"Pratik"},"comment_count":1,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1676666008,"accepted_answer_id":75488890,"answer_count":1,"score":0,"last_activity_date":1676669896,"creation_date":1676661169,"question_id":75488400,"body_markdown":"I have a list of a bean class newSRMAPIResponseBeanList wherein I am always getting a null object at last which I am trying to remove but it is resulting in null pointer exception if I handle the exception, it is not removing that null value. Below is my code.\r\n\r\n    for (int i = 0; i &lt; newSRMAPIResponseBeanList.size(); i++) {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tif (newSRMAPIResponseBeanList.get(i).getCompanyId().equals(null)) {\r\n    \t\t\t\t\t\tnewSRMAPIResponseBeanList.remove(i);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}catch(Exception e) {\r\n    \t\t\t\t\te.printStackTrace();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n\r\nIn the if condition itself it is failing. I want to remove the null value of company ID. Actually newSRMAPIResponseBeanList is a list of `List&lt;NewSRMAPIResponseBean&gt; newSRMAPIResponseBeanList = new ArrayList&lt;&gt;();` and the bean class is as follows.\r\n\r\n    public class NewSRMAPIResponseBean {\r\n    \tprivate String companyId;\r\n    \tprivate String investmentId;\r\n    \tprivate String performanceId;\r\n    \tprivate List&lt;String&gt; values;\r\n    }\r\n\r\nIs there any way I can remove that null value? I also tried using Java streams as follows.\r\n\r\n    List&lt;NewSRMAPIResponseBean&gt; finalList=newSRMAPIResponseBeanList.parallelStream()\r\n    \t\t\t      .filter(Objects::nonNull)\r\n    \t\t\t      .collect(Collectors.toList());\r\n\r\nThis too did not work.","title":"Not able to remove null from a list in Java","body":"<p>I have a list of a bean class newSRMAPIResponseBeanList wherein I am always getting a null object at last which I am trying to remove but it is resulting in null pointer exception if I handle the exception, it is not removing that null value. Below is my code.</p>\n<pre><code>for (int i = 0; i &lt; newSRMAPIResponseBeanList.size(); i++) {\n                try {\n                    if (newSRMAPIResponseBeanList.get(i).getCompanyId().equals(null)) {\n                        newSRMAPIResponseBeanList.remove(i);\n                    }\n                }catch(Exception e) {\n                    e.printStackTrace();\n                }\n            }\n</code></pre>\n<p>In the if condition itself it is failing. I want to remove the null value of company ID. Actually newSRMAPIResponseBeanList is a list of <code>List&lt;NewSRMAPIResponseBean&gt; newSRMAPIResponseBeanList = new ArrayList&lt;&gt;();</code> and the bean class is as follows.</p>\n<pre><code>public class NewSRMAPIResponseBean {\n    private String companyId;\n    private String investmentId;\n    private String performanceId;\n    private List&lt;String&gt; values;\n}\n</code></pre>\n<p>Is there any way I can remove that null value? I also tried using Java streams as follows.</p>\n<pre><code>List&lt;NewSRMAPIResponseBean&gt; finalList=newSRMAPIResponseBeanList.parallelStream()\n                  .filter(Objects::nonNull)\n                  .collect(Collectors.toList());\n</code></pre>\n<p>This too did not work.</p>\n"},{"tags":["java","amazon-web-services","amazon-s3","sdk"],"answers":[{"tags":[],"owner":{"account_id":3963723,"reputation":1327,"user_id":3270254,"accept_rate":62,"display_name":"scalauser"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1417502460,"creation_date":1417502460,"answer_id":27243350,"question_id":27242297,"body_markdown":"Only thing I can see is getting connection to your S3 bucket.Try the following and it may help\r\n\r\n    AWSCredentials credentials = new BasicAWSCredentials(accessKeyId,secretAccessKey);\r\n    \t\tAmazonS3 s3Client = new AmazonS3Client(credentials);\r\n    \r\n    ObjectListing objects = s3Client.listObjects(listobjectrequest);\r\n\r\n","title":"List all the zip files recursively within S3 bucket using Java API","body":"<p>Only thing I can see is getting connection to your S3 bucket.Try the following and it may help</p>\n\n<pre><code>AWSCredentials credentials = new BasicAWSCredentials(accessKeyId,secretAccessKey);\n        AmazonS3 s3Client = new AmazonS3Client(credentials);\n\nObjectListing objects = s3Client.listObjects(listobjectrequest);\n</code></pre>\n"}],"owner":{"account_id":69592,"reputation":53841,"user_id":202375,"accept_rate":62,"display_name":"Saurabh Gokhale"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1276,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1676669729,"creation_date":1417497164,"question_id":27242297,"body_markdown":"I&#39;ve a S3 bucket on the Amazon and trying to get the list of all the zip files located within folders under the bucket recursively.\r\n\r\nFor e.g, my zip files are located as shown below :\r\n\r\n    bucket1/${user1}/${date1}/abc.zip\r\n    bucket1/${user2}/${date2}/xyz.zip\r\n    bucket1/${user3}/${date3}/mno.zip\r\n\r\n    bucketName=bucket1\r\n    prefix=bucket1/\r\n\r\nBelow is my code : \r\n\r\n    final AmazonS3 amazonS3 = AmazonS3Utils.getAmazonS3Client();\r\n    final ListObjectsRequest listObjectsRequest = new ListObjectsRequest().withBucketName(&quot;bucket1&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.withPrefix(&quot;bucket1/&quot;);\r\n    \t\t\r\n    ObjectListing current = amazonS3.listObjects(listObjectsRequest);\r\n    final List&lt;S3ObjectSummary&gt; keyList = current.getObjectSummaries();\r\n    \r\n    while (current.isTruncated()) \r\n    {\r\n       keyList.addAll(current.getObjectSummaries());\r\n       current = amazonS3.listNextBatchOfObjects(current);\r\n    }\r\n    \t\r\n    keyList.addAll(current.getObjectSummaries());\r\n    for(S3ObjectSummary summary : keyList)\r\n    {\r\n    \tSystem.out.println(summary.getKey());\r\n    }\r\n\r\nBut I get back an empty list.\r\n\r\nAm I doing anything wrong? Is there any way to recursively get list of zip files from the bucket?","title":"List all the zip files recursively within S3 bucket using Java API","body":"<p>I've a S3 bucket on the Amazon and trying to get the list of all the zip files located within folders under the bucket recursively.</p>\n<p>For e.g, my zip files are located as shown below :</p>\n<pre><code>bucket1/${user1}/${date1}/abc.zip\nbucket1/${user2}/${date2}/xyz.zip\nbucket1/${user3}/${date3}/mno.zip\n\nbucketName=bucket1\nprefix=bucket1/\n</code></pre>\n<p>Below is my code :</p>\n<pre><code>final AmazonS3 amazonS3 = AmazonS3Utils.getAmazonS3Client();\nfinal ListObjectsRequest listObjectsRequest = new ListObjectsRequest().withBucketName(&quot;bucket1&quot;)\n                                                                            .withPrefix(&quot;bucket1/&quot;);\n        \nObjectListing current = amazonS3.listObjects(listObjectsRequest);\nfinal List&lt;S3ObjectSummary&gt; keyList = current.getObjectSummaries();\n\nwhile (current.isTruncated()) \n{\n   keyList.addAll(current.getObjectSummaries());\n   current = amazonS3.listNextBatchOfObjects(current);\n}\n    \nkeyList.addAll(current.getObjectSummaries());\nfor(S3ObjectSummary summary : keyList)\n{\n    System.out.println(summary.getKey());\n}\n</code></pre>\n<p>But I get back an empty list.</p>\n<p>Am I doing anything wrong? Is there any way to recursively get list of zip files from the bucket?</p>\n"},{"tags":["java","arrays","loops"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1676648179,"post_id":75486282,"comment_id":133185478,"body_markdown":"Please [edit] your question to include a [example]. It would be helpful to also see your inputs, expected output and actual output.","body":"Please <a href=\"https://stackoverflow.com/posts/75486282/edit\">edit</a> your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. It would be helpful to also see your inputs, expected output and actual output."}],"answers":[{"tags":[],"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676669464,"creation_date":1676669464,"answer_id":75489398,"question_id":75486282,"body_markdown":"We can&#39;t tell what&#39;s wrong with your code as we can&#39;t see all those supporting functions and whether they are implemented correctly, as well as how you&#39;re testing the results to see if they are correct.\r\n\r\nI&#39;d start, though, with re-writing your `getAdjacent()` function so it&#39;s easier to read and understand:\r\n\r\n    public ArrayList&lt;GridCell&gt; getAdjacent() {\r\n        ArrayList&lt;GridCell&gt; results = new ArrayList&lt;GridCell&gt;();\r\n\r\n        int curRow = this.getRow();\r\n        int r1 = Math.Max(0, curRow-1);\r\n        int r2 = Math.Min(grid.getHeight()-1, curRow+1);\r\n      \r\n        int curCol = this.getColumn();\r\n        int c1 = Math.Max(0, curCol-1);\r\n        int c2 = Math.Min(grid.getWidth()-1, curCol+1);\r\n      \r\n        for (int r = r1; r &lt;= r2; r++) {\r\n            for(int c = c1; c &lt;= c2; c++) {\r\n                if ( !(r == curRow &amp;&amp; c == curCol) ) {\r\n                    results.add(grid.get(r,c));\r\n                }\r\n            }\r\n        }\r\n      \r\n        return results;\r\n    }\r\n\r\nIf `getRow()` or `getColumn()` give coordinates that are NOT within the bounds of the array, should it return an empty ArrayList? What if those coords are just outside the bounds and some the adjacent neighbors are within bounds? Should those coords within the bounds still be returned even when the starting coords are outside bounds?\r\n\r\nThis version has the benefit that you can now inspect `curRow`, `curCol`, `r1`, `r2`, `c1`, and `c2` to see if those values are what you&#39;re expecting. This will tell you if those supporting functions are working correctly.","title":"Trying to output all the adjacent elements in a 2d array but only output is the size of the array","body":"<p>We can't tell what's wrong with your code as we can't see all those supporting functions and whether they are implemented correctly, as well as how you're testing the results to see if they are correct.</p>\n<p>I'd start, though, with re-writing your <code>getAdjacent()</code> function so it's easier to read and understand:</p>\n<pre><code>public ArrayList&lt;GridCell&gt; getAdjacent() {\n    ArrayList&lt;GridCell&gt; results = new ArrayList&lt;GridCell&gt;();\n\n    int curRow = this.getRow();\n    int r1 = Math.Max(0, curRow-1);\n    int r2 = Math.Min(grid.getHeight()-1, curRow+1);\n  \n    int curCol = this.getColumn();\n    int c1 = Math.Max(0, curCol-1);\n    int c2 = Math.Min(grid.getWidth()-1, curCol+1);\n  \n    for (int r = r1; r &lt;= r2; r++) {\n        for(int c = c1; c &lt;= c2; c++) {\n            if ( !(r == curRow &amp;&amp; c == curCol) ) {\n                results.add(grid.get(r,c));\n            }\n        }\n    }\n  \n    return results;\n}\n</code></pre>\n<p>If <code>getRow()</code> or <code>getColumn()</code> give coordinates that are NOT within the bounds of the array, should it return an empty ArrayList? What if those coords are just outside the bounds and some the adjacent neighbors are within bounds? Should those coords within the bounds still be returned even when the starting coords are outside bounds?</p>\n<p>This version has the benefit that you can now inspect <code>curRow</code>, <code>curCol</code>, <code>r1</code>, <code>r2</code>, <code>c1</code>, and <code>c2</code> to see if those values are what you're expecting. This will tell you if those supporting functions are working correctly.</p>\n"}],"owner":{"account_id":19699900,"reputation":13,"user_id":14422938,"display_name":"Jojo Fan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676669464,"creation_date":1676648018,"question_id":75486282,"body_markdown":"```\r\n\tpublic ArrayList&lt;GridCell&gt; getAdjacent() {\r\n\t\tArrayList&lt;GridCell&gt; results = new ArrayList&lt;GridCell&gt;();\r\n\t\t\r\n\t\tfor (int r = this.getRow()-1; r&lt;= this.getRow()+1; r++ ) {\r\n\t\t\tfor(int c = this.getColumn() -1 ; c&lt;= this.getColumn() +1 ;c++) {\r\n\t\t\t\tif (r == this.getRow()  &amp;&amp;  c == this.getColumn()) {\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\telse if (r &lt; 0 ||  r &gt; grid.getHeight() - 1 || c &lt; 0 || c &gt; grid.getWidth() - 1) {\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tresults.add(grid.get(r,c));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn results;\r\n\t}\r\n```\r\n\r\n\r\nI tried to create a nested for loop to go on the adjacent rows and columns of the element and see if they are not out of bound or the actual element. It should output the locations of the elements but just output the size of the 2d array e.g 4x3. \r\n\r\nthis.getRows() and this.getColumns() repesents the coorditnated of the location of the element in the array that i want to find the adjacent elements of. for example (3,1) is the element to find the adjacent and the size of the array is 4 rows by 3 colunms and currenlty  the ouput is currently an arraylist with 1 value of (4,3) but i expect it to be an arraylist with the values (3,0)(3,2)(2,0)(2,1)(2,2).","title":"Trying to output all the adjacent elements in a 2d array but only output is the size of the array","body":"<pre><code>    public ArrayList&lt;GridCell&gt; getAdjacent() {\n        ArrayList&lt;GridCell&gt; results = new ArrayList&lt;GridCell&gt;();\n        \n        for (int r = this.getRow()-1; r&lt;= this.getRow()+1; r++ ) {\n            for(int c = this.getColumn() -1 ; c&lt;= this.getColumn() +1 ;c++) {\n                if (r == this.getRow()  &amp;&amp;  c == this.getColumn()) {\n                    \n                }\n                else if (r &lt; 0 ||  r &gt; grid.getHeight() - 1 || c &lt; 0 || c &gt; grid.getWidth() - 1) {\n                    \n                }\n                else {\n                    results.add(grid.get(r,c));\n                }\n            }\n        }\n        return results;\n    }\n</code></pre>\n<p>I tried to create a nested for loop to go on the adjacent rows and columns of the element and see if they are not out of bound or the actual element. It should output the locations of the elements but just output the size of the 2d array e.g 4x3.</p>\n<p>this.getRows() and this.getColumns() repesents the coorditnated of the location of the element in the array that i want to find the adjacent elements of. for example (3,1) is the element to find the adjacent and the size of the array is 4 rows by 3 colunms and currenlty  the ouput is currently an arraylist with 1 value of (4,3) but i expect it to be an arraylist with the values (3,0)(3,2)(2,0)(2,1)(2,2).</p>\n"},{"tags":["java","spring","mongodb","mongo-shell","mongotemplate"],"answers":[{"tags":[],"owner":{"account_id":18482495,"reputation":14167,"user_id":13464279,"display_name":"J.F."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676669000,"creation_date":1676669000,"answer_id":75489355,"question_id":75487361,"body_markdown":"According to [docs](https://docs.spring.io/spring-data/data-document/docs/jdiff-mongo-m2-m3/mongo-report/Version%201.0.0%20M3/org/springframework/data/document/mongodb/MongoTemplate.html) you can call `executeCommand` using `DBObject` or `String` as a parameter.\r\n\r\nSo one option is simply get the JSON as String:\r\n\r\n```java\r\nString jsonCommand = &quot;{compact: &quot; + collectionName + &quot;}&quot;;\r\nmongoTemplate.executeCommand(jsonCommand);\r\n```\r\n\r\nOr create the `DBObject`:\r\n\r\n```java\r\nDBObject dbObject = new BasicDBObject(&quot;compact&quot;, collectionName );\r\nmongoTemplate.executeCommand(dbObject);\r\n```\r\n\r\nOr even, according to [this answer](https://stackoverflow.com/a/60717743/13464279) you can create the `DBObject` from a JSON:\r\n\r\n```java\r\nBasicDBObject dbObject = com.mongodb.BasicDBObject.parse(jsonCommand)\r\nmongoTemplate.executeCommand(dbObject);\r\n```","title":"MongoDb compact command using spring boot MongoTemplate","body":"<p>According to <a href=\"https://docs.spring.io/spring-data/data-document/docs/jdiff-mongo-m2-m3/mongo-report/Version%201.0.0%20M3/org/springframework/data/document/mongodb/MongoTemplate.html\" rel=\"nofollow noreferrer\">docs</a> you can call <code>executeCommand</code> using <code>DBObject</code> or <code>String</code> as a parameter.</p>\n<p>So one option is simply get the JSON as String:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String jsonCommand = &quot;{compact: &quot; + collectionName + &quot;}&quot;;\nmongoTemplate.executeCommand(jsonCommand);\n</code></pre>\n<p>Or create the <code>DBObject</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DBObject dbObject = new BasicDBObject(&quot;compact&quot;, collectionName );\nmongoTemplate.executeCommand(dbObject);\n</code></pre>\n<p>Or even, according to <a href=\"https://stackoverflow.com/a/60717743/13464279\">this answer</a> you can create the <code>DBObject</code> from a JSON:</p>\n<pre class=\"lang-java prettyprint-override\"><code>BasicDBObject dbObject = com.mongodb.BasicDBObject.parse(jsonCommand)\nmongoTemplate.executeCommand(dbObject);\n</code></pre>\n"}],"owner":{"account_id":27813606,"reputation":13,"user_id":21235505,"display_name":"LuMa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":254,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75489355,"answer_count":1,"score":1,"last_activity_date":1676669000,"creation_date":1676654148,"question_id":75487361,"body_markdown":"Mongo shell command:\r\n\r\n    db.runCommand({compact: &lt;collection name&gt;})\r\n\r\n**How can I run same command using `MongoTemplate `in Spring Boot project?**\r\n\r\nI tried with:\r\n\r\n    @Autowired\r\n    private MongoTemplate mongoTemplate;\r\n    ...\r\n    mongoTemplate.executeCommand(jsonCommand);\r\n    ...\r\n\r\nbut it supports only commands in json.","title":"MongoDb compact command using spring boot MongoTemplate","body":"<p>Mongo shell command:</p>\n<pre><code>db.runCommand({compact: &lt;collection name&gt;})\n</code></pre>\n<p><strong>How can I run same command using <code>MongoTemplate </code>in Spring Boot project?</strong></p>\n<p>I tried with:</p>\n<pre><code>@Autowired\nprivate MongoTemplate mongoTemplate;\n...\nmongoTemplate.executeCommand(jsonCommand);\n...\n</code></pre>\n<p>but it supports only commands in json.</p>\n"},{"tags":["java","spring","apache-kafka","apache-kafka-streams","spring-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1600721109,"post_id":63994444,"comment_id":113171676,"body_markdown":"Similar: https://stackoverflow.com/q/63992538/2308683","body":"Similar: <a href=\"https://stackoverflow.com/q/63992538/2308683\">stackoverflow.com/q/63992538/2308683</a>"},{"owner":{"account_id":10400131,"reputation":343,"user_id":7668695,"display_name":"Vinicius Santos"},"score":0,"creation_date":1600732998,"post_id":63994444,"comment_id":113174703,"body_markdown":"@OneCricketeer It is not so similar because in my case I have a chain of microservices, I don&#39;t just need the consumer&#39;s processing time, but anyway it was useful knowledge thanks","body":"@OneCricketeer It is not so similar because in my case I have a chain of microservices, I don&#39;t just need the consumer&#39;s processing time, but anyway it was useful knowledge thanks"}],"answers":[{"tags":[],"owner":{"account_id":10400131,"reputation":343,"user_id":7668695,"display_name":"Vinicius Santos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676668891,"creation_date":1676668891,"answer_id":75489343,"question_id":63994444,"body_markdown":"In this case I solved it using [opentelemetry](https://opentelemetry.io/)","title":"How to measure the total time of an asynchronous process using Kafka topics?","body":"<p>In this case I solved it using <a href=\"https://opentelemetry.io/\" rel=\"nofollow noreferrer\">opentelemetry</a></p>\n"}],"owner":{"account_id":10400131,"reputation":343,"user_id":7668695,"display_name":"Vinicius Santos"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":328,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75489343,"answer_count":1,"score":0,"last_activity_date":1676668891,"creation_date":1600698857,"question_id":63994444,"body_markdown":"\r\nI have the following microservices scenario\r\n\r\nMicroservice 1\r\n\r\n1 - Collect a `System.getCurrentTimeMillis`\r\n\r\n2 - Generate an id after an operation in the DB\r\n\r\n3 - Send an object in json in the format below to the topic INICIO_PROCESSAMENTO\r\n\r\n```json\r\n{\r\n   &quot;uuid&quot;: &quot;b45ebe6f-d59a-4e37-9706-f546b32c68c3&quot;,\r\n   &quot;milliSeconds&quot;: 1600258507450\r\n}\r\n```\r\n\r\nMicroservice 7\r\n\r\n1 - Finish processing the message with the ID generated in the first microservice\r\n\r\n2 - Collect a `System.getCurrentTimeMillis`\r\n\r\n3 - Send Json below for the topic FIM_PROCESSAMENTO\r\n\r\n```json\r\n{\r\n   &quot;uuid&quot;: &quot;b45ebe6f-d59a-4e37-9706-f546b32c68c3&quot;,\r\n   &quot;milliSeconds&quot;: 1600258508980\r\n}\r\n\r\n```\r\n\r\nIn this case, how can I measure the total time of the asynchronous transaction? One suggestion was to use Kafka Streams and maybe KTables, but I didn&#39;t understand how that would work.\r\n\r\nAn important point the message ID in Kafka is a long generated by Kafka / Driver. The ID of my operation exists only within the body of messages sent to topics.\r\n\r\nThe final objective is to be able to collect the total time of the process for analysis, initially we would use opentracing for this, but as we have an integration with third parties in the middle of the process and we depend on their return that comes without the transaction id we were unable to follow that way.","title":"How to measure the total time of an asynchronous process using Kafka topics?","body":"<p>I have the following microservices scenario</p>\n<p>Microservice 1</p>\n<p>1 - Collect a <code>System.getCurrentTimeMillis</code></p>\n<p>2 - Generate an id after an operation in the DB</p>\n<p>3 - Send an object in json in the format below to the topic INICIO_PROCESSAMENTO</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n   &quot;uuid&quot;: &quot;b45ebe6f-d59a-4e37-9706-f546b32c68c3&quot;,\n   &quot;milliSeconds&quot;: 1600258507450\n}\n</code></pre>\n<p>Microservice 7</p>\n<p>1 - Finish processing the message with the ID generated in the first microservice</p>\n<p>2 - Collect a <code>System.getCurrentTimeMillis</code></p>\n<p>3 - Send Json below for the topic FIM_PROCESSAMENTO</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n   &quot;uuid&quot;: &quot;b45ebe6f-d59a-4e37-9706-f546b32c68c3&quot;,\n   &quot;milliSeconds&quot;: 1600258508980\n}\n\n</code></pre>\n<p>In this case, how can I measure the total time of the asynchronous transaction? One suggestion was to use Kafka Streams and maybe KTables, but I didn't understand how that would work.</p>\n<p>An important point the message ID in Kafka is a long generated by Kafka / Driver. The ID of my operation exists only within the body of messages sent to topics.</p>\n<p>The final objective is to be able to collect the total time of the process for analysis, initially we would use opentracing for this, but as we have an integration with third parties in the middle of the process and we depend on their return that comes without the transaction id we were unable to follow that way.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1586709486,"post_id":61174769,"comment_id":108222200,"body_markdown":"The best way to do this would be to get a library that specifically does OAuth.  Why do you want to use `HTTPClient`?","body":"The best way to do this would be to get a library that specifically does OAuth.  Why do you want to use <code>HTTPClient</code>?"},{"owner":{"account_id":10400131,"reputation":343,"user_id":7668695,"display_name":"Vinicius Santos"},"score":0,"creation_date":1586710002,"post_id":61174769,"comment_id":108222428,"body_markdown":"Because it is already the standard implementation of java, I would just like to decorate this class and use it, theoretically just add an Authorization header with the token, I don&#39;t think an extra lib is necessary for this.","body":"Because it is already the standard implementation of java, I would just like to decorate this class and use it, theoretically just add an Authorization header with the token, I don&#39;t think an extra lib is necessary for this."},{"owner":{"account_id":10400131,"reputation":343,"user_id":7668695,"display_name":"Vinicius Santos"},"score":0,"creation_date":1586787764,"post_id":61174769,"comment_id":108248517,"body_markdown":"I researched some more and I think the best way to solve the authentication problem is to create an Authentication and add it to the http client through the builder, the problem is that I have no idea how to set up Authentication using token.","body":"I researched some more and I think the best way to solve the authentication problem is to create an Authentication and add it to the http client through the builder, the problem is that I have no idea how to set up Authentication using token."}],"answers":[{"tags":[],"owner":{"account_id":10400131,"reputation":343,"user_id":7668695,"display_name":"Vinicius Santos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676668738,"creation_date":1676668738,"answer_id":75489316,"question_id":61174769,"body_markdown":"Instead of creating a decorator for the class, I created another class responsible for managing the access token, so when I do a getAccessToken() this method already performs the necessary validations and refreshes the token if necessary, so I only have than adding the Authorization header to the requests I want and calling my method to get an updated token.","title":"How to decorate the httpclient to send requests with oauth authentication?","body":"<p>Instead of creating a decorator for the class, I created another class responsible for managing the access token, so when I do a getAccessToken() this method already performs the necessary validations and refreshes the token if necessary, so I only have than adding the Authorization header to the requests I want and calling my method to get an updated token.</p>\n"}],"owner":{"account_id":10400131,"reputation":343,"user_id":7668695,"display_name":"Vinicius Santos"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":301,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75489316,"answer_count":1,"score":0,"last_activity_date":1676668738,"creation_date":1586709384,"question_id":61174769,"body_markdown":"I&#39;m creating a HttpClient bean (Java 11 - httpclient) using a new class that decorates HttpClient, so that I can solve\r\n&#160;the following two problems:\r\n\r\n1- Add a standard timeout on request (resolved)\r\n\r\n2 - Add authorization headers automatically in the request to use Oauth tokens (The problem to be solved)\r\n\r\nWe can see the status of the code below:\r\n\r\n    @ToString\r\n    @AllArgsConstructor\r\n    public class HttpRequest extends java.net.http.HttpRequest {\r\n    \r\n        protected final java.net.http.HttpRequest delegate;\r\n    \r\n        private final HttpClientConfig config;\r\n    \r\n        @Override\r\n        public Optional&lt;BodyPublisher&gt; bodyPublisher() {\r\n            return delegate.bodyPublisher();\r\n        }\r\n    \r\n        @Override\r\n        public String method() {\r\n            return delegate.method();\r\n        }\r\n    \r\n        @Override\r\n        public Optional&lt;Duration&gt; timeout() {\r\n            return delegate.timeout().isEmpty() ?\r\n                    Optional.of(config.getDefaultTimeout()) : delegate.timeout();\r\n        }\r\n    \r\n        @Override\r\n        public boolean expectContinue() {\r\n            return delegate.expectContinue();\r\n        }\r\n    \r\n        @Override\r\n        public URI uri() {\r\n            return delegate.uri();\r\n        }\r\n    \r\n        @Override\r\n        public Optional&lt;HttpClient.Version&gt; version() {\r\n            return delegate.version();\r\n        }\r\n    \r\n        @Override\r\n        public HttpHeaders headers() {\r\n            //TODO How to return an HttpHeaders with new headers if it is built during Request and Response and is immutable?\r\n            return delegate.headers();\r\n        }\r\n    }\r\n\r\nThe big problem is how can I return HttpHeaders with the addition of the header authorization, it is an immutable object and is only created during the resquest and resonse build?","title":"How to decorate the httpclient to send requests with oauth authentication?","body":"<p>I'm creating a HttpClient bean (Java 11 - httpclient) using a new class that decorates HttpClient, so that I can solve\n the following two problems:</p>\n\n<p>1- Add a standard timeout on request (resolved)</p>\n\n<p>2 - Add authorization headers automatically in the request to use Oauth tokens (The problem to be solved)</p>\n\n<p>We can see the status of the code below:</p>\n\n<pre><code>@ToString\n@AllArgsConstructor\npublic class HttpRequest extends java.net.http.HttpRequest {\n\n    protected final java.net.http.HttpRequest delegate;\n\n    private final HttpClientConfig config;\n\n    @Override\n    public Optional&lt;BodyPublisher&gt; bodyPublisher() {\n        return delegate.bodyPublisher();\n    }\n\n    @Override\n    public String method() {\n        return delegate.method();\n    }\n\n    @Override\n    public Optional&lt;Duration&gt; timeout() {\n        return delegate.timeout().isEmpty() ?\n                Optional.of(config.getDefaultTimeout()) : delegate.timeout();\n    }\n\n    @Override\n    public boolean expectContinue() {\n        return delegate.expectContinue();\n    }\n\n    @Override\n    public URI uri() {\n        return delegate.uri();\n    }\n\n    @Override\n    public Optional&lt;HttpClient.Version&gt; version() {\n        return delegate.version();\n    }\n\n    @Override\n    public HttpHeaders headers() {\n        //TODO How to return an HttpHeaders with new headers if it is built during Request and Response and is immutable?\n        return delegate.headers();\n    }\n}\n</code></pre>\n\n<p>The big problem is how can I return HttpHeaders with the addition of the header authorization, it is an immutable object and is only created during the resquest and resonse build?</p>\n"},{"tags":["java","jsf-2","java-ee-6","cdi","weld"],"answers":[{"comments":[{"owner":{"account_id":1072308,"reputation":1659,"user_id":1071289,"accept_rate":70,"display_name":"pWoz"},"score":0,"creation_date":1380806034,"post_id":19160052,"comment_id":28342320,"body_markdown":"I would like to configure this component (set starting value for `text`) in external properties file. Thus Your answer does not meet my requirements. Maybe You know another way to do such a configuration?","body":"I would like to configure this component (set starting value for <code>text</code>) in external properties file. Thus Your answer does not meet my requirements. Maybe You know another way to do such a configuration?"},{"owner":{"account_id":1031744,"reputation":27054,"user_id":1039952,"accept_rate":81,"display_name":"Petr Mensik"},"score":0,"creation_date":1380806597,"post_id":19160052,"comment_id":28342648,"body_markdown":"I know but like I said, I doubt that there is any other option which `CDI`. Anyway, where did you get the syntax of `&lt;res:Sample&gt;` in `beans.xml`?","body":"I know but like I said, I doubt that there is any other option which <code>CDI</code>. Anyway, where did you get the syntax of <code>&lt;res:Sample&gt;</code> in <code>beans.xml</code>?"},{"owner":{"account_id":159105,"reputation":5318,"user_id":378185,"display_name":"LightGuard"},"score":0,"creation_date":1380837828,"post_id":19160052,"comment_id":28360018,"body_markdown":"That&#39;s an old reference. That will not work. There is nothing in CDI, or any implementations that will allow you to do this. You could write an extension to allow you to do it, but it&#39;s messy.","body":"That&#39;s an old reference. That will not work. There is nothing in CDI, or any implementations that will allow you to do this. You could write an extension to allow you to do it, but it&#39;s messy."},{"owner":{"account_id":1072308,"reputation":1659,"user_id":1071289,"accept_rate":70,"display_name":"pWoz"},"score":0,"creation_date":1380874126,"post_id":19160052,"comment_id":28370234,"body_markdown":"So is there any other way to  fulfill my requirement? To configure CDI beans in external files. Similar like in JSF Managed Beans ( faces-config.xml file)?","body":"So is there any other way to  fulfill my requirement? To configure CDI beans in external files. Similar like in JSF Managed Beans ( faces-config.xml file)?"},{"owner":{"account_id":1996471,"reputation":3425,"user_id":1789351,"accept_rate":100,"display_name":"rdcrng"},"score":1,"creation_date":1381059678,"post_id":19160052,"comment_id":28424564,"body_markdown":"@pWoz I think Apache DeltaSpike has a `@ConfigValue` feature implemented but last I checked it wasn&#39;t documented. Try emailing the user list with your requirements, they are usually pretty quick at answering.","body":"@pWoz I think Apache DeltaSpike has a <code>@ConfigValue</code> feature implemented but last I checked it wasn&#39;t documented. Try emailing the user list with your requirements, they are usually pretty quick at answering."}],"tags":[],"owner":{"account_id":1031744,"reputation":27054,"user_id":1039952,"accept_rate":81,"display_name":"Petr Mensik"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380805688,"creation_date":1380805688,"answer_id":19160052,"question_id":19159918,"body_markdown":"I am really not aware that this kind of configuration can be made in `beans.xml` (this probably works just in Spring but maybe somebody will correct me). The CDI way of initializing the values is the method annotated with `@PostConstruct`, so try this\r\n\r\n    public class Sample {\r\n\r\n        private String text;\r\n\r\n        @PostConstruct\r\n        public void init() {\r\n             this.text = &quot;aaa&quot;;\r\n        }\r\n    }","title":"CDI bean configuration using beans.xml file","body":"<p>I am really not aware that this kind of configuration can be made in <code>beans.xml</code> (this probably works just in Spring but maybe somebody will correct me). The CDI way of initializing the values is the method annotated with <code>@PostConstruct</code>, so try this</p>\n\n<pre><code>public class Sample {\n\n    private String text;\n\n    @PostConstruct\n    public void init() {\n         this.text = \"aaa\";\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1072308,"reputation":1659,"user_id":1071289,"accept_rate":70,"display_name":"pWoz"},"score":0,"creation_date":1381323431,"post_id":19241812,"comment_id":28533619,"body_markdown":"I haven&#39;t yet. I thought that there is a built-in solution for my problem. But probably I will have to implement it by my own.","body":"I haven&#39;t yet. I thought that there is a built-in solution for my problem. But probably I will have to implement it by my own."}],"tags":[],"owner":{"account_id":3402640,"reputation":91,"user_id":2854470,"display_name":"jboz"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1381217861,"creation_date":1381217861,"answer_id":19241812,"question_id":19159918,"body_markdown":"Have you try to implement a javax.enterprise.inject.spi.Extension that @Observes ProcessInjectionTarget like this [Wrapping an InjectionTarget][1] ?\r\n\r\n\r\n  [1]: http://docs.jboss.org/weld/reference/latest/en-US/html/extend.html#d0e5267\r\n\r\nThis example inject bean values from resource bundle.","title":"CDI bean configuration using beans.xml file","body":"<p>Have you try to implement a javax.enterprise.inject.spi.Extension that @Observes ProcessInjectionTarget like this <a href=\"http://docs.jboss.org/weld/reference/latest/en-US/html/extend.html#d0e5267\" rel=\"nofollow\">Wrapping an InjectionTarget</a> ?</p>\n\n<p>This example inject bean values from resource bundle.</p>\n"},{"tags":[],"owner":{"account_id":1072308,"reputation":1659,"user_id":1071289,"accept_rate":70,"display_name":"pWoz"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1382011854,"creation_date":1382011854,"answer_id":19426399,"question_id":19159918,"body_markdown":"There is no built-in solution for this problem. You can use some third party solutions like Apache DeltaSpike http://deltaspike.apache.org/ or implement it by Your own using CDI extensions for example.","title":"CDI bean configuration using beans.xml file","body":"<p>There is no built-in solution for this problem. You can use some third party solutions like Apache DeltaSpike <a href=\"http://deltaspike.apache.org/\" rel=\"nofollow\">http://deltaspike.apache.org/</a> or implement it by Your own using CDI extensions for example.</p>\n"},{"tags":[],"owner":{"account_id":3791308,"reputation":1,"user_id":3147769,"display_name":"Dimitris"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1388442500,"creation_date":1388442500,"answer_id":20848593,"question_id":19159918,"body_markdown":"In the sample link that you posted if you see the .xml file it uses the package name and then the class name so if you try to change from `&lt;ress:Sample&gt;` to `&lt;ress:net.resourceAuth.Sample&gt;` it might work.","title":"CDI bean configuration using beans.xml file","body":"<p>In the sample link that you posted if you see the .xml file it uses the package name and then the class name so if you try to change from <code>&lt;ress:Sample&gt;</code> to <code>&lt;ress:net.resourceAuth.Sample&gt;</code> it might work.</p>\n"},{"tags":[],"owner":{"account_id":2324029,"reputation":172,"user_id":2038948,"display_name":"Andr&#233;"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676668642,"creation_date":1676668642,"answer_id":75489303,"question_id":19159918,"body_markdown":"EJB&#180;s can be configured via XML ..it is the ejb-jar.xml","title":"CDI bean configuration using beans.xml file","body":"<p>EJB´s can be configured via XML ..it is the ejb-jar.xml</p>\n"}],"owner":{"account_id":1072308,"reputation":1659,"user_id":1071289,"accept_rate":70,"display_name":"pWoz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14995,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":19426399,"answer_count":5,"score":1,"last_activity_date":1676668642,"creation_date":1380805315,"question_id":19159918,"body_markdown":"I have very simple CDI bean:\r\n\r\n    package net.resourceAuth;\r\n\r\n    public class Sample {\r\n\r\n\t   private String text;\r\n\t\r\n\t   public String getText() {\r\n\t\treturn text;\r\n\t   }\r\n\t\r\n\t   public void setText(String text) {\r\n\t\tthis.text = text;\r\n\t   }\r\n    }\r\n\r\nAnd now I would like to initialize `text` variable using `beans.xml`. I&#39;m trying with `beans.xml` file like this one:\r\n\r\n    &lt;beans xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n        xmlns:res=&quot;urn:java:net.resourceAuth&quot;\r\n        xsi:schemaLocation=&quot;\r\n        http://java.sun.com/xml/ns/javaee \r\n        http://java.sun.com/xml/ns/javaee/beans_1_0.xsd&quot;&gt;\r\n\r\n\t    &lt;res:Sample&gt;\r\n\t\t  &lt;res:text&gt;test123&lt;/res:text&gt;\r\n  \t    &lt;/res:Sample&gt;\r\n\t\r\n    &lt;/beans&gt;\r\n\r\nBut it does not work. `text` is always null. Can You help me figure out what is wrong here?\r\n\r\nIn other words: I am looking for a similar solution as it is used in the JSF  faces-config.xml described for example here: http://www.mkyong.com/jsf2/configure-managed-beans-in-jsf-2-0/","title":"CDI bean configuration using beans.xml file","body":"<p>I have very simple CDI bean:</p>\n\n<pre><code>package net.resourceAuth;\n\npublic class Sample {\n\n   private String text;\n\n   public String getText() {\n    return text;\n   }\n\n   public void setText(String text) {\n    this.text = text;\n   }\n}\n</code></pre>\n\n<p>And now I would like to initialize <code>text</code> variable using <code>beans.xml</code>. I'm trying with <code>beans.xml</code> file like this one:</p>\n\n<pre><code>&lt;beans xmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:res=\"urn:java:net.resourceAuth\"\n    xsi:schemaLocation=\"\n    http://java.sun.com/xml/ns/javaee \n    http://java.sun.com/xml/ns/javaee/beans_1_0.xsd\"&gt;\n\n    &lt;res:Sample&gt;\n      &lt;res:text&gt;test123&lt;/res:text&gt;\n    &lt;/res:Sample&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>But it does not work. <code>text</code> is always null. Can You help me figure out what is wrong here?</p>\n\n<p>In other words: I am looking for a similar solution as it is used in the JSF  faces-config.xml described for example here: <a href=\"http://www.mkyong.com/jsf2/configure-managed-beans-in-jsf-2-0/\" rel=\"nofollow\">http://www.mkyong.com/jsf2/configure-managed-beans-in-jsf-2-0/</a></p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1676988478,"post_id":75488899,"comment_id":133244896,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/75488899/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":18657561,"reputation":1,"user_id":13599591,"display_name":"k0rd"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676665121,"creation_date":1676665072,"answer_id":75488899,"question_id":73093116,"body_markdown":"I had this same problem when I tried to deploy my program to Glassfish. You need to specify a location on the file system like ```~``` and place your .env file there.\r\n\r\nHere is an example on how to do this:\r\n```java\r\nDotenv env = Dotenv.configure().directory(System.getProperty(&quot;user.home&quot;)).load();\r\n```\r\n\r\nDotenv should now be able to find the file if you&#39;ve placed it at ~/.env.","title":"How do I build my maven project that includes my environment variables","body":"<p>I had this same problem when I tried to deploy my program to Glassfish. You need to specify a location on the file system like <code>~</code> and place your .env file there.</p>\n<p>Here is an example on how to do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Dotenv env = Dotenv.configure().directory(System.getProperty(&quot;user.home&quot;)).load();\n</code></pre>\n<p>Dotenv should now be able to find the file if you've placed it at ~/.env.</p>\n"}],"owner":{"account_id":25878822,"reputation":1,"user_id":19608301,"display_name":"ArcaliteGames"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":363,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676668373,"creation_date":1658599583,"question_id":73093116,"body_markdown":"please I need help. I&#39;m trying to package my maven build and also include environment variables but my program cannot find the .env file. How can I resolve this issue? I have been using eclipse, but I don&#39;t know where I can configure the path to the .env file. I used io.github.cdimascio to read environment variables. The program works fine on my IDE. The trouble starts when I run the program outside the IDE. What should I do?\r\n\r\n    Exception in thread &quot;Thread-1&quot; Exception in thread &quot;Thread-0&quot; java.lang.ExceptionInInitializerError\r\n            at com.arcalitegames.Main$2.run(Main.java:29)\r\n            at java.lang.Thread.run(Unknown Source)\r\n    Caused by: io.github.cdimascio.dotenv.DotEnvException: Could not find ./.env on the classpath\r\n            at io.github.cdimascio.dotenv.internal.ClasspathHelper.loadFileFromClasspath(ClassPathHelper.kt:37)\r\n            at io.github.cdimascio.dotenv.internal.DotenvReader.read(DotenvReader.kt:36)\r\n            at io.github.cdimascio.dotenv.internal.DotenvParser.parse(DotenvParser.kt:26)\r\n            at io.github.cdimascio.dotenv.DotenvBuilder.load(Dotenv.kt:119)\r\n            at com.arcalitegames.connector.Devs.getDotenv(Devs.java:10)\r\n            at com.arcalitegames.connector.Connector.&lt;clinit&gt;(Connector.java:14)\r\n            ... 2 more","title":"How do I build my maven project that includes my environment variables","body":"<p>please I need help. I'm trying to package my maven build and also include environment variables but my program cannot find the .env file. How can I resolve this issue? I have been using eclipse, but I don't know where I can configure the path to the .env file. I used io.github.cdimascio to read environment variables. The program works fine on my IDE. The trouble starts when I run the program outside the IDE. What should I do?</p>\n<pre><code>Exception in thread &quot;Thread-1&quot; Exception in thread &quot;Thread-0&quot; java.lang.ExceptionInInitializerError\n        at com.arcalitegames.Main$2.run(Main.java:29)\n        at java.lang.Thread.run(Unknown Source)\nCaused by: io.github.cdimascio.dotenv.DotEnvException: Could not find ./.env on the classpath\n        at io.github.cdimascio.dotenv.internal.ClasspathHelper.loadFileFromClasspath(ClassPathHelper.kt:37)\n        at io.github.cdimascio.dotenv.internal.DotenvReader.read(DotenvReader.kt:36)\n        at io.github.cdimascio.dotenv.internal.DotenvParser.parse(DotenvParser.kt:26)\n        at io.github.cdimascio.dotenv.DotenvBuilder.load(Dotenv.kt:119)\n        at com.arcalitegames.connector.Devs.getDotenv(Devs.java:10)\n        at com.arcalitegames.connector.Connector.&lt;clinit&gt;(Connector.java:14)\n        ... 2 more\n</code></pre>\n"},{"tags":["java","spring","spring-boot","generics"],"comments":[{"owner":{"account_id":4561654,"reputation":3050,"user_id":3703819,"display_name":"dey"},"score":0,"creation_date":1676671867,"post_id":75489250,"comment_id":133191697,"body_markdown":"did you tried to generify the `MovieService.get()` method? `public &lt;A extends Genre&gt;  MovieData get( GenreType type, A genre)`. Hmm... but there might be still the problem with return type of `movieRegistry.get`","body":"did you tried to generify the <code>MovieService.get()</code> method? <code>public &lt;A extends Genre&gt;  MovieData get( GenreType type, A genre)</code>. Hmm... but there might be still the problem with return type of <code>movieRegistry.get</code>"},{"owner":{"account_id":27794495,"reputation":31,"user_id":21226282,"display_name":"TheSQLGoat"},"score":0,"creation_date":1676715228,"post_id":75489250,"comment_id":133196068,"body_markdown":"Yes, makes no difference.","body":"Yes, makes no difference."}],"owner":{"account_id":27794495,"reputation":31,"user_id":21226282,"display_name":"TheSQLGoat"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676668285,"creation_date":1676668285,"question_id":75489250,"body_markdown":"I&#39;m trying to create a service similiar to this example that fetches data. Since the `GenreType` can be anything I created a `Registry` that maps each `GenreType` to a specific class. \r\n\r\nIgnore the obvious flaw on this example of not being possible to have movies with the same type and the naming not being the most correct but it&#39;s just a example to show my problem.\r\n\r\nThen I&#39;m levaring `Spring` to fill this registry but the issues comes when I call the method `getData()`. It&#39;s expecting `A extends Genre` and I&#39;m passing a `Genre` so it fails to compile.\r\n\r\n\r\nIs there a better approach to this?\r\n\r\nThanks\r\n\r\n\r\n```\r\npubic enum GenreType \r\n{\r\n    ACTION,\r\n    COMEDY\r\n}\r\n\r\npublic interface Genre \r\n{\r\n}\r\n\r\npublic class ActionMovie implements Genre\r\n{\r\n}\r\n\r\npublic class ComedyMovie implements Genre\r\n{\r\n}\r\n\r\npublic interface Movie&lt;A extends Genre&gt;\r\n{\r\n    MovieData getData( A genre );\r\n\r\n    GenreType getType();\r\n}\r\n\r\n@Service\r\npublic class Borat implements Movie&lt;ComedyMovie&gt;\r\n{\r\n    public MovieData getData( ComedyMovie genre )\r\n    {\r\n         //...\r\n    }\r\n\r\n\r\n    @Override\r\n    public GenreType getType() \r\n    {\r\n        return GenreType.COMEDY;\r\n    }\r\n}\r\n\r\n@Service\r\npublic class MovieRegistry\r\n{\r\n    private final Map&lt;GenreType, Movie&lt;?&gt;&gt; movies = new EnumMap&lt;&gt;( GenreType.class );\r\n\r\n    public MovieRegistry( List&lt;Movie&lt;?&gt;&gt; movies )\r\n    {\r\n        movies .forEach( movie -&gt; this.movies.putIfAbsent( movie.getType(), movie ) );\r\n    }\r\n\r\n    public Movie&lt;?&gt; get( GenreType genreType )\r\n    {\r\n        return movies.get( genreType );\r\n    }\r\n}\r\n\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class MovieService\r\n{\r\n    private final MovieRegistry movieRegistry;\r\n\r\n    public MovieData get( GenreType type, Genre genre)\r\n    {\r\n         Movie&lt;?&gt; movie = movieRegistry.get(type);\r\n         return movie.getData( genre ); //Problem here\r\n    }\r\n}\r\n```","title":"Java - Spring - Call method with generic parameter","body":"<p>I'm trying to create a service similiar to this example that fetches data. Since the <code>GenreType</code> can be anything I created a <code>Registry</code> that maps each <code>GenreType</code> to a specific class.</p>\n<p>Ignore the obvious flaw on this example of not being possible to have movies with the same type and the naming not being the most correct but it's just a example to show my problem.</p>\n<p>Then I'm levaring <code>Spring</code> to fill this registry but the issues comes when I call the method <code>getData()</code>. It's expecting <code>A extends Genre</code> and I'm passing a <code>Genre</code> so it fails to compile.</p>\n<p>Is there a better approach to this?</p>\n<p>Thanks</p>\n<pre><code>pubic enum GenreType \n{\n    ACTION,\n    COMEDY\n}\n\npublic interface Genre \n{\n}\n\npublic class ActionMovie implements Genre\n{\n}\n\npublic class ComedyMovie implements Genre\n{\n}\n\npublic interface Movie&lt;A extends Genre&gt;\n{\n    MovieData getData( A genre );\n\n    GenreType getType();\n}\n\n@Service\npublic class Borat implements Movie&lt;ComedyMovie&gt;\n{\n    public MovieData getData( ComedyMovie genre )\n    {\n         //...\n    }\n\n\n    @Override\n    public GenreType getType() \n    {\n        return GenreType.COMEDY;\n    }\n}\n\n@Service\npublic class MovieRegistry\n{\n    private final Map&lt;GenreType, Movie&lt;?&gt;&gt; movies = new EnumMap&lt;&gt;( GenreType.class );\n\n    public MovieRegistry( List&lt;Movie&lt;?&gt;&gt; movies )\n    {\n        movies .forEach( movie -&gt; this.movies.putIfAbsent( movie.getType(), movie ) );\n    }\n\n    public Movie&lt;?&gt; get( GenreType genreType )\n    {\n        return movies.get( genreType );\n    }\n}\n\n@Service\n@RequiredArgsConstructor\npublic class MovieService\n{\n    private final MovieRegistry movieRegistry;\n\n    public MovieData get( GenreType type, Genre genre)\n    {\n         Movie&lt;?&gt; movie = movieRegistry.get(type);\n         return movie.getData( genre ); //Problem here\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","freemarker"],"comments":[{"owner":{"account_id":24400,"reputation":2982,"user_id":62032,"accept_rate":93,"display_name":"tinkertime"},"score":0,"creation_date":1259179790,"post_id":1799614,"comment_id":1687514,"body_markdown":"how are you setting the &#39;configuration&#39; object?","body":"how are you setting the &#39;configuration&#39; object?"},{"owner":{"account_id":566059,"reputation":165,"user_id":201213,"display_name":"brock"},"score":0,"creation_date":1259197415,"post_id":1799614,"comment_id":1689054,"body_markdown":"I&#39;m getting the configuration object from Spring.There is a getConfiguration method from the FreeMarkerConfigurer","body":"I&#39;m getting the configuration object from Spring.There is a getConfiguration method from the FreeMarkerConfigurer"}],"answers":[{"comments":[{"owner":{"account_id":566059,"reputation":165,"user_id":201213,"display_name":"brock"},"score":0,"creation_date":1259197360,"post_id":1800222,"comment_id":1689050,"body_markdown":"Thanks for the response!  I thought there was some kind of path issue....so I&#39;m trying to use freemarker to help send emails by using templates.  I was originally thinking that the ViewResolver was a little to much.  So I thought it would be better to use the configuration instead...not sure if that is the correct thing to do.  As for the IOException, the message coming back is template not found.","body":"Thanks for the response!  I thought there was some kind of path issue....so I&#39;m trying to use freemarker to help send emails by using templates.  I was originally thinking that the ViewResolver was a little to much.  So I thought it would be better to use the configuration instead...not sure if that is the correct thing to do.  As for the IOException, the message coming back is template not found."},{"owner":{"account_id":566059,"reputation":165,"user_id":201213,"display_name":"brock"},"score":0,"creation_date":1259197617,"post_id":1800222,"comment_id":1689061,"body_markdown":"Oh and I am configuring the bean in the applicationContext.xml file.  I did not put that in the DispatchServlet.","body":"Oh and I am configuring the bean in the applicationContext.xml file.  I did not put that in the DispatchServlet."},{"owner":{"account_id":44712,"reputation":99796,"user_id":131368,"accept_rate":78,"display_name":"ChssPly76"},"score":0,"creation_date":1259202659,"post_id":1800222,"comment_id":1689303,"body_markdown":"How is context created for that &quot;applicationContext.xml&quot; (what Spring class is used to create it)? If it does **not** descend from WebApplicationContext, it will **not** be able to get anything from &quot;/WEB-INF&quot; - not unless you specify an absolute filesystem url.","body":"How is context created for that &quot;applicationContext.xml&quot; (what Spring class is used to create it)? If it does <b>not</b> descend from WebApplicationContext, it will <b>not</b> be able to get anything from &quot;/WEB-INF&quot; - not unless you specify an absolute filesystem url."},{"owner":{"account_id":566059,"reputation":165,"user_id":201213,"display_name":"brock"},"score":0,"creation_date":1259334352,"post_id":1800222,"comment_id":1697828,"body_markdown":"Thanks ChssPly76.  I&#39;m using the Classpath Application context to load my applicationContext.xml.  How would I load the WebApplicationContext?  Is that the right context to use in a web application?","body":"Thanks ChssPly76.  I&#39;m using the Classpath Application context to load my applicationContext.xml.  How would I load the WebApplicationContext?  Is that the right context to use in a web application?"},{"owner":{"account_id":44712,"reputation":99796,"user_id":131368,"accept_rate":78,"display_name":"ChssPly76"},"score":0,"creation_date":1259344590,"post_id":1800222,"comment_id":1698702,"body_markdown":"It&#39;s normally loaded by `DispatcherServlet` (http://static.springsource.org/spring/docs/2.5.x/reference/mvc.html#mvc-servlet) but you can create it manually (http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/context/support/GenericWebApplicationContext.html) and pass servlet context to it.","body":"It&#39;s normally loaded by <code>DispatcherServlet</code> (<a href=\"http://static.springsource.org/spring/docs/2.5.x/reference/mvc.html#mvc-servlet\" rel=\"nofollow noreferrer\">static.springsource.org/spring/docs/2.5.x/reference/&hellip;</a>) but you can create it manually (<a href=\"http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/context/support/GenericWebApplicationContext.html\" rel=\"nofollow noreferrer\">static.springsource.org/spring/docs/2.5.x/api/org/&hellip;</a>) and pass servlet context to it."},{"owner":{"account_id":1469094,"reputation":11033,"user_id":1381093,"accept_rate":52,"display_name":"JackDev"},"score":0,"creation_date":1413414889,"post_id":1800222,"comment_id":41439804,"body_markdown":"Hi @Brock, did you solve your problem in the end? What fixed it?","body":"Hi @Brock, did you solve your problem in the end? What fixed it?"}],"tags":[],"owner":{"account_id":44712,"reputation":99796,"user_id":131368,"accept_rate":78,"display_name":"ChssPly76"},"comment_count":6,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1259186109,"creation_date":1259186109,"answer_id":1800222,"question_id":1799614,"body_markdown":"First of all, `/WEB-INF/freemarker` would only work as a path from within `WebApplicationContext`; otherwise Spring would attempt to resolve it as file system path rather than servlet context path. Is the excerpt you&#39;ve posted above from the context being loaded by `DispatcherServlet`?\r\n\r\nSecondly, is there any reason why are you using `configuration` directly instead of using Spring&#39;s `ViewResolver`?\r\n\r\nFinally, `IOException` can mean many different things. Can you post a full stack trace?","title":"Freemarker template not found","body":"<p>First of all, <code>/WEB-INF/freemarker</code> would only work as a path from within <code>WebApplicationContext</code>; otherwise Spring would attempt to resolve it as file system path rather than servlet context path. Is the excerpt you've posted above from the context being loaded by <code>DispatcherServlet</code>?</p>\n\n<p>Secondly, is there any reason why are you using <code>configuration</code> directly instead of using Spring's <code>ViewResolver</code>?</p>\n\n<p>Finally, <code>IOException</code> can mean many different things. Can you post a full stack trace?</p>\n"},{"comments":[{"owner":{"account_id":175694,"reputation":16729,"user_id":450148,"accept_rate":82,"display_name":"Felipe"},"score":0,"creation_date":1343173868,"post_id":2793579,"comment_id":15421016,"body_markdown":"I tried it but did not work for me. I am receiving yet the exception java.io.FileNotFoundException above a existent path. That is really crazy!","body":"I tried it but did not work for me. I am receiving yet the exception java.io.FileNotFoundException above a existent path. That is really crazy!"}],"tags":[],"owner":{"account_id":610881,"reputation":41,"user_id":336097,"display_name":"Luismy"},"comment_count":1,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1345455334,"creation_date":1273311985,"answer_id":2793579,"question_id":1799614,"body_markdown":"I&#39;ve just had the same kind of problem and, at the end, I decide to use the approach below:\r\n\r\n    Configuration configuration = new Configuration();\r\n    FileTemplateLoader templateLoader = new FileTemplateLoader(new File(YOUR_BASE_TEMPLATE_DIR));\r\n    configuration.setTemplateLoader(templateLoader);\r\n    freemarker.template.Template template = configuration.getTemplate(YOUR_TEMPLATE_NAME);\r\n    template.process(datamodel, writer);","title":"Freemarker template not found","body":"<p>I've just had the same kind of problem and, at the end, I decide to use the approach below:</p>\n\n<pre><code>Configuration configuration = new Configuration();\nFileTemplateLoader templateLoader = new FileTemplateLoader(new File(YOUR_BASE_TEMPLATE_DIR));\nconfiguration.setTemplateLoader(templateLoader);\nfreemarker.template.Template template = configuration.getTemplate(YOUR_TEMPLATE_NAME);\ntemplate.process(datamodel, writer);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1765349,"reputation":1,"user_id":1611342,"display_name":"Sunset Fun"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1348991374,"creation_date":1345454108,"answer_id":12035007,"question_id":1799614,"body_markdown":"I think you must make sure that the file &quot;testTemplate.ftl&quot; is in the folder &quot;/WEB-INF/freemarker/&quot;\r\n","title":"Freemarker template not found","body":"<p>I think you must make sure that the file \"testTemplate.ftl\" is in the folder \"/WEB-INF/freemarker/\"</p>\n"},{"tags":[],"owner":{"account_id":941858,"reputation":2136,"user_id":969812,"accept_rate":90,"display_name":"Alex"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1552046297,"creation_date":1552046297,"answer_id":55062794,"question_id":1799614,"body_markdown":"you can also set it like \r\n\r\n```\r\n    @Bean\r\n    public FreeMarkerConfigurationFactoryBean freemarkerConfiguration() {\r\n        FreeMarkerConfigurationFactoryBean bean = new FreeMarkerConfigurationFactoryBean();\r\n        bean.setTemplateLoaderPath(&quot;classpath:/templates/&quot;);\r\n        return bean;\r\n    }\r\n```\r\n\r\nIn your case: \r\n```\r\n    &lt;property name=&quot;templateLoaderPath&quot; value=&quot;classpath:/WEB-INF/freemarker/&quot;/&gt;\r\n```","title":"Freemarker template not found","body":"<p>you can also set it like </p>\n\n<pre><code>    @Bean\n    public FreeMarkerConfigurationFactoryBean freemarkerConfiguration() {\n        FreeMarkerConfigurationFactoryBean bean = new FreeMarkerConfigurationFactoryBean();\n        bean.setTemplateLoaderPath(\"classpath:/templates/\");\n        return bean;\n    }\n</code></pre>\n\n<p>In your case: </p>\n\n<pre><code>    &lt;property name=\"templateLoaderPath\" value=\"classpath:/WEB-INF/freemarker/\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3737292,"reputation":1907,"user_id":3107952,"display_name":"Pedro Madrid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676668108,"creation_date":1676668108,"answer_id":75489230,"question_id":1799614,"body_markdown":"This worked for me:\r\n\r\n    configuration.setClassLoaderForTemplateLoading(this.getClass().getClassLoader(), &quot;/templates&quot;);","title":"Freemarker template not found","body":"<p>This worked for me:</p>\n<pre><code>configuration.setClassLoaderForTemplateLoading(this.getClass().getClassLoader(), &quot;/templates&quot;);\n</code></pre>\n"}],"owner":{"account_id":566059,"reputation":165,"user_id":201213,"display_name":"brock"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20799,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":1800222,"answer_count":5,"score":4,"last_activity_date":1676668108,"creation_date":1259179453,"question_id":1799614,"body_markdown":"I&#39;m currently trying to get Freemarker to work with my application using Spring.  No matter what I try I keep getting template not found.  I am not sure if I have the configuration set up properly, but it never finds my template.  Here is my spring bean config:\r\n\r\n\t&lt;bean id=&quot;freemarkerConfig&quot; class=&quot;org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer&quot;&gt;\r\n  \t\t&lt;property name=&quot;templateLoaderPath&quot; value=&quot;/WEB-INF/freemarker/&quot;/&gt;\r\n\t&lt;/bean&gt;\r\n\r\nWhenever I try to call getTemplate on the freemaker configuration it always sends back a template not found error.  So if I do \r\n\r\n    configuration.getTemplate(&quot;testTemplate.ftl&quot;) \r\n\r\nit always throws an IOException.  \r\n\r\nI&#39;m not sure if anyone has an idea of what I&#39;m doing wrong.\r\n\r\nThanks for all your help!","title":"Freemarker template not found","body":"<p>I'm currently trying to get Freemarker to work with my application using Spring.  No matter what I try I keep getting template not found.  I am not sure if I have the configuration set up properly, but it never finds my template.  Here is my spring bean config:</p>\n\n<pre><code>&lt;bean id=\"freemarkerConfig\" class=\"org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer\"&gt;\n    &lt;property name=\"templateLoaderPath\" value=\"/WEB-INF/freemarker/\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Whenever I try to call getTemplate on the freemaker configuration it always sends back a template not found error.  So if I do </p>\n\n<pre><code>configuration.getTemplate(\"testTemplate.ftl\") \n</code></pre>\n\n<p>it always throws an IOException.  </p>\n\n<p>I'm not sure if anyone has an idea of what I'm doing wrong.</p>\n\n<p>Thanks for all your help!</p>\n"},{"tags":["java","gluon-mobile"],"comments":[{"owner":{"account_id":4910667,"reputation":44671,"user_id":3956070,"display_name":"Jos&#233; Pereda"},"score":0,"creation_date":1676662814,"post_id":75488291,"comment_id":133189754,"body_markdown":"Maybe you can try AudioService and moving the [volume handler](https://github.com/gluonhq/attach/blob/master/modules/video/src/main/native/android/dalvik/DalvikVideoService.java#L725) in VideoService to the [MainActivity](https://github.com/gluonhq/substrate/blob/master/src/main/resources/native/android/android_project/app/src/main/java/com/gluonhq/helloandroid/MainActivity.java#L466)? You can give it a try (manually packing the apk after modifying it, as explained [here](https://stackoverflow.com/a/68685263/3956070)).","body":"Maybe you can try AudioService and moving the <a href=\"https://github.com/gluonhq/attach/blob/master/modules/video/src/main/native/android/dalvik/DalvikVideoService.java#L725\" rel=\"nofollow noreferrer\">volume handler</a> in VideoService to the <a href=\"https://github.com/gluonhq/substrate/blob/master/src/main/resources/native/android/android_project/app/src/main/java/com/gluonhq/helloandroid/MainActivity.java#L466\" rel=\"nofollow noreferrer\">MainActivity</a>? You can give it a try (manually packing the apk after modifying it, as explained <a href=\"https://stackoverflow.com/a/68685263/3956070\">here</a>)."},{"owner":{"account_id":2016330,"reputation":13111,"user_id":1803551,"accept_rate":67,"display_name":"user1803551"},"score":0,"creation_date":1676667938,"post_id":75488291,"comment_id":133190943,"body_markdown":"@Jos&#233;Pereda At this point it&#39;s easier to add a custom volume controller to the [`volume`](https://docs.gluonhq.com/attach/javadoc/4.0.16/com.gluonhq.attach.audio/com/gluonhq/attach/audio/Audio.html#setVolume(double)) setting.","body":"@Jos&#233;Pereda At this point it&#39;s easier to add a custom volume controller to the <a href=\"https://docs.gluonhq.com/attach/javadoc/4.0.16/com.gluonhq.attach.audio/com/gluonhq/attach/audio/Audio.html#setVolume(double)\" rel=\"nofollow noreferrer\"><code>volume</code></a> setting."},{"owner":{"account_id":4910667,"reputation":44671,"user_id":3956070,"display_name":"Jos&#233; Pereda"},"score":0,"creation_date":1676668399,"post_id":75488291,"comment_id":133191026,"body_markdown":"Not really, since the keyEvents are dispatched by the TextureView (video) or the SurfaceView (mainActivity), while AudioService doesn&#39;t have access to any of those in order to override `dispatchKeyEvent`.","body":"Not really, since the keyEvents are dispatched by the TextureView (video) or the SurfaceView (mainActivity), while AudioService doesn&#39;t have access to any of those in order to override <code>dispatchKeyEvent</code>."},{"owner":{"account_id":2016330,"reputation":13111,"user_id":1803551,"accept_rate":67,"display_name":"user1803551"},"score":0,"creation_date":1676671360,"post_id":75488291,"comment_id":133191604,"body_markdown":"@Jos&#233;Pereda I mean a custom controller as an in-app one, like a slider, without using the volume buttons. It&#39;s not as convenient, but it&#39;s a fraction of the hassle.","body":"@Jos&#233;Pereda I mean a custom controller as an in-app one, like a slider, without using the volume buttons. It&#39;s not as convenient, but it&#39;s a fraction of the hassle."}],"owner":{"account_id":2016330,"reputation":13111,"user_id":1803551,"accept_rate":67,"display_name":"user1803551"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676667959,"creation_date":1676660194,"question_id":75488291,"body_markdown":"The class that uses the `VideoService`:\r\n\r\n\tprivate final class MobileNotifier {\r\n\r\n\t    private static final String SHORT_BEEP_PATH = &quot;/sounds/ShortBeep.wav&quot;;\r\n\t    private static final String LONG_BEEP_PATH = &quot;/sounds/LongBeep.wav&quot;;\r\n\r\n\t\tVideoService service;\r\n\r\n\t\tMobileNotifier() {\r\n\t\t\tthis.service = VideoService.create().get();\r\n\t\t\tservice.getPlaylist().add(SHORT_BEEP_PATH);\r\n\t\t}\r\n\r\n\t\tpublic void alert(Alert alert) {\r\n\t\t\tswitch (alert) {\r\n\t\t\t\tcase NONE -&gt; {\r\n\t\t\t\t\tSystem.out.println(&quot;NONE: stopping&quot;);\r\n\t\t\t\t\tservice.stop();\r\n\t\t\t\t\tSystem.out.println(&quot;NONE: stopped&quot;);\r\n\t\t\t\t}\r\n\t\t\t\tcase ORANGE -&gt; play(alert, SHORT_BEEP_PATH);\r\n\t\t\t\tcase RED -&gt; play(alert, LONG_BEEP_PATH);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tprivate void play(Alert alert, String audioPath) {\r\n\t\t\tSystem.out.println(alert);\r\n\t\t\tif (!audioPath.equals(service.getPlaylist().get(0))) {\r\n\t\t\t\tif (service.statusProperty().get() != Status.PLAYING) {\r\n\t\t\t\t\tSystem.out.println(alert + &quot;: not being played - stopping&quot;);\r\n\t\t\t\t\tservice.stop();\r\n\t\t\t\t\tSystem.out.println(alert + &quot;: not being played - stopped&quot;);\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.println(alert + &quot;: setting&quot;);\r\n\t\t\t\tservice.getPlaylist().set(0, audioPath);\r\n\t\t\t\tSystem.out.println(alert + &quot;: set&quot;);\r\n\t\t\t}\r\n\t\t\tSystem.out.println(alert + &quot;: playing&quot;);\r\n\t\t\tservice.play();\r\n\t\t\tSystem.out.println(alert + &quot;: played&quot;);\r\n\t\t}\r\n\t}\r\n\r\nThe code switches between audio files to play based on the input it gets. `void alert(Alert alert)` is called about once per second. After a while, the app crashes on Android.\r\n\r\nOne time the crash produced this output with `adb logcat -v brief -v color GraalCompiled:V GraalActivity:V GraalGluon:V GluonAttach:V AndroidRuntime:E ActivityManager:W *:S`:\r\n```\r\nE/AndroidRuntime(29381): FATAL EXCEPTION: main\r\nE/AndroidRuntime(29381): Process: com.gps.demo, PID: 29381\r\nE/AndroidRuntime(29381): java.lang.NullPointerException: Attempt to invoke virtual method &#39;void android.media.MediaPlayer.setSurface(android.view.Surface)&#39; on a null object reference\r\nE/AndroidRuntime(29381):        at com.gluonhq.helloandroid.DalvikVideoService.onSurfaceTextureAvailable(DalvikVideoService.java:381)\r\nE/AndroidRuntime(29381):        at android.view.TextureView.getHardwareLayer(TextureView.java:390)\r\nE/AndroidRuntime(29381):        at android.view.TextureView.draw(TextureView.java:339)\r\nE/AndroidRuntime(29381):        at android.view.View.updateDisplayListIfDirty(View.java:19315)\r\nE/AndroidRuntime(29381):        at android.view.View.draw(View.java:20093)\r\nE/AndroidRuntime(29381):        at android.view.ViewGroup.drawChild(ViewGroup.java:4421)\r\nE/AndroidRuntime(29381):        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:4207)\r\nE/AndroidRuntime(29381):        at android.view.View.draw(View.java:20373)\r\nE/AndroidRuntime(29381):        at android.view.View.updateDisplayListIfDirty(View.java:19315)\r\nE/AndroidRuntime(29381):        at android.view.View.draw(View.java:20093)\r\nE/AndroidRuntime(29381):        at android.view.ViewGroup.drawChild(ViewGroup.java:4421)\r\nE/AndroidRuntime(29381):        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:4207)\r\nE/AndroidRuntime(29381):        at android.view.View.draw(View.java:20373)\r\nE/AndroidRuntime(29381):        at com.android.internal.policy.DecorView.draw(DecorView.java:980)\r\nE/AndroidRuntime(29381):        at android.view.View.updateDisplayListIfDirty(View.java:19315)\r\nE/AndroidRuntime(29381):        at android.view.ThreadedRenderer.updateViewTreeDisplayList(ThreadedRenderer.java:686)\r\nE/AndroidRuntime(29381):        at android.view.ThreadedRenderer.updateRootDisplayList(ThreadedRenderer.java:692)\r\nE/AndroidRuntime(29381):        at android.view.ThreadedRenderer.draw(ThreadedRenderer.java:800)\r\nE/AndroidRuntime(29381):        at android.view.ViewRootImpl.draw(ViewRootImpl.java:3496)\r\nE/AndroidRuntime(29381):        at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:3283)\r\nE/AndroidRuntime(29381):        at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2818)\r\nE/AndroidRuntime(29381):        at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1780)\r\nE/AndroidRuntime(29381):        at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:7827)\r\nE/AndroidRuntime(29381):        at android.view.Choreographer$CallbackRecord.run(Choreographer.java:911)\r\nE/AndroidRuntime(29381):        at android.view.Choreographer.doCallbacks(Choreographer.java:723)\r\nE/AndroidRuntime(29381):        at android.view.Choreographer.doFrame(Choreographer.java:658)\r\nE/AndroidRuntime(29381):        at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:897)\r\nE/AndroidRuntime(29381):        at android.os.Handler.handleCallback(Handler.java:789)\r\nE/AndroidRuntime(29381):        at android.os.Handler.dispatchMessage(Handler.java:98)\r\nE/AndroidRuntime(29381):        at android.os.Looper.loop(Looper.java:164)\r\nE/AndroidRuntime(29381):        at android.app.ActivityThread.main(ActivityThread.java:6944)\r\nE/AndroidRuntime(29381):        at java.lang.reflect.Method.invoke(Native Method)\r\nE/AndroidRuntime(29381):        at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:327)\r\nE/AndroidRuntime(29381):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1374)\r\nW/ActivityManager( 1525): crash : com.gps.demo,0\r\nW/ActivityManager( 1525):   Force finishing activity com.gps.demo/com.gluonhq.helloandroid.MainActivity\r\n```\r\n\r\nWhen trying to look deeper with `adb logcat -v color` a couple of times, I got the crash detailed here: https://pastebin.com/2dLmHaQX (the log is too long to post here).\r\n\r\nIt seems that at some point the video service enters an illegal state. I did not get a crash when using `AudioService`, but that service does not allow changing the volume with the volume keys.\r\n\r\nUsing\r\n```\r\n\t\t&lt;gluonfx-maven-plugin-version&gt;1.0.15&lt;/gluonfx-maven-plugin-version&gt;\r\n\t\t&lt;java-version&gt;17&lt;/java-version&gt;\r\n\t\t&lt;javafx-version&gt;19&lt;/javafx-version&gt;\r\n\t\t&lt;charm-version&gt;6.2.2&lt;/charm-version&gt;\r\n\t\t&lt;attach-version&gt;4.0.15&lt;/attach-version&gt;\r\n```\r\nWith `javafxStaticSdkVersion` 19 and using graalvm-svm-java17-linux-gluon-22.1.0.1-Final.\r\nRunning on Android 8 through 12.","title":"Crash with Gluon Attach Video Service","body":"<p>The class that uses the <code>VideoService</code>:</p>\n<pre><code>private final class MobileNotifier {\n\n    private static final String SHORT_BEEP_PATH = &quot;/sounds/ShortBeep.wav&quot;;\n    private static final String LONG_BEEP_PATH = &quot;/sounds/LongBeep.wav&quot;;\n\n    VideoService service;\n\n    MobileNotifier() {\n        this.service = VideoService.create().get();\n        service.getPlaylist().add(SHORT_BEEP_PATH);\n    }\n\n    public void alert(Alert alert) {\n        switch (alert) {\n            case NONE -&gt; {\n                System.out.println(&quot;NONE: stopping&quot;);\n                service.stop();\n                System.out.println(&quot;NONE: stopped&quot;);\n            }\n            case ORANGE -&gt; play(alert, SHORT_BEEP_PATH);\n            case RED -&gt; play(alert, LONG_BEEP_PATH);\n        };\n    }\n\n    private void play(Alert alert, String audioPath) {\n        System.out.println(alert);\n        if (!audioPath.equals(service.getPlaylist().get(0))) {\n            if (service.statusProperty().get() != Status.PLAYING) {\n                System.out.println(alert + &quot;: not being played - stopping&quot;);\n                service.stop();\n                System.out.println(alert + &quot;: not being played - stopped&quot;);\n            }\n            System.out.println(alert + &quot;: setting&quot;);\n            service.getPlaylist().set(0, audioPath);\n            System.out.println(alert + &quot;: set&quot;);\n        }\n        System.out.println(alert + &quot;: playing&quot;);\n        service.play();\n        System.out.println(alert + &quot;: played&quot;);\n    }\n}\n</code></pre>\n<p>The code switches between audio files to play based on the input it gets. <code>void alert(Alert alert)</code> is called about once per second. After a while, the app crashes on Android.</p>\n<p>One time the crash produced this output with <code>adb logcat -v brief -v color GraalCompiled:V GraalActivity:V GraalGluon:V GluonAttach:V AndroidRuntime:E ActivityManager:W *:S</code>:</p>\n<pre><code>E/AndroidRuntime(29381): FATAL EXCEPTION: main\nE/AndroidRuntime(29381): Process: com.gps.demo, PID: 29381\nE/AndroidRuntime(29381): java.lang.NullPointerException: Attempt to invoke virtual method 'void android.media.MediaPlayer.setSurface(android.view.Surface)' on a null object reference\nE/AndroidRuntime(29381):        at com.gluonhq.helloandroid.DalvikVideoService.onSurfaceTextureAvailable(DalvikVideoService.java:381)\nE/AndroidRuntime(29381):        at android.view.TextureView.getHardwareLayer(TextureView.java:390)\nE/AndroidRuntime(29381):        at android.view.TextureView.draw(TextureView.java:339)\nE/AndroidRuntime(29381):        at android.view.View.updateDisplayListIfDirty(View.java:19315)\nE/AndroidRuntime(29381):        at android.view.View.draw(View.java:20093)\nE/AndroidRuntime(29381):        at android.view.ViewGroup.drawChild(ViewGroup.java:4421)\nE/AndroidRuntime(29381):        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:4207)\nE/AndroidRuntime(29381):        at android.view.View.draw(View.java:20373)\nE/AndroidRuntime(29381):        at android.view.View.updateDisplayListIfDirty(View.java:19315)\nE/AndroidRuntime(29381):        at android.view.View.draw(View.java:20093)\nE/AndroidRuntime(29381):        at android.view.ViewGroup.drawChild(ViewGroup.java:4421)\nE/AndroidRuntime(29381):        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:4207)\nE/AndroidRuntime(29381):        at android.view.View.draw(View.java:20373)\nE/AndroidRuntime(29381):        at com.android.internal.policy.DecorView.draw(DecorView.java:980)\nE/AndroidRuntime(29381):        at android.view.View.updateDisplayListIfDirty(View.java:19315)\nE/AndroidRuntime(29381):        at android.view.ThreadedRenderer.updateViewTreeDisplayList(ThreadedRenderer.java:686)\nE/AndroidRuntime(29381):        at android.view.ThreadedRenderer.updateRootDisplayList(ThreadedRenderer.java:692)\nE/AndroidRuntime(29381):        at android.view.ThreadedRenderer.draw(ThreadedRenderer.java:800)\nE/AndroidRuntime(29381):        at android.view.ViewRootImpl.draw(ViewRootImpl.java:3496)\nE/AndroidRuntime(29381):        at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:3283)\nE/AndroidRuntime(29381):        at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2818)\nE/AndroidRuntime(29381):        at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1780)\nE/AndroidRuntime(29381):        at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:7827)\nE/AndroidRuntime(29381):        at android.view.Choreographer$CallbackRecord.run(Choreographer.java:911)\nE/AndroidRuntime(29381):        at android.view.Choreographer.doCallbacks(Choreographer.java:723)\nE/AndroidRuntime(29381):        at android.view.Choreographer.doFrame(Choreographer.java:658)\nE/AndroidRuntime(29381):        at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:897)\nE/AndroidRuntime(29381):        at android.os.Handler.handleCallback(Handler.java:789)\nE/AndroidRuntime(29381):        at android.os.Handler.dispatchMessage(Handler.java:98)\nE/AndroidRuntime(29381):        at android.os.Looper.loop(Looper.java:164)\nE/AndroidRuntime(29381):        at android.app.ActivityThread.main(ActivityThread.java:6944)\nE/AndroidRuntime(29381):        at java.lang.reflect.Method.invoke(Native Method)\nE/AndroidRuntime(29381):        at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:327)\nE/AndroidRuntime(29381):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1374)\nW/ActivityManager( 1525): crash : com.gps.demo,0\nW/ActivityManager( 1525):   Force finishing activity com.gps.demo/com.gluonhq.helloandroid.MainActivity\n</code></pre>\n<p>When trying to look deeper with <code>adb logcat -v color</code> a couple of times, I got the crash detailed here: <a href=\"https://pastebin.com/2dLmHaQX\" rel=\"nofollow noreferrer\">https://pastebin.com/2dLmHaQX</a> (the log is too long to post here).</p>\n<p>It seems that at some point the video service enters an illegal state. I did not get a crash when using <code>AudioService</code>, but that service does not allow changing the volume with the volume keys.</p>\n<p>Using</p>\n<pre><code>        &lt;gluonfx-maven-plugin-version&gt;1.0.15&lt;/gluonfx-maven-plugin-version&gt;\n        &lt;java-version&gt;17&lt;/java-version&gt;\n        &lt;javafx-version&gt;19&lt;/javafx-version&gt;\n        &lt;charm-version&gt;6.2.2&lt;/charm-version&gt;\n        &lt;attach-version&gt;4.0.15&lt;/attach-version&gt;\n</code></pre>\n<p>With <code>javafxStaticSdkVersion</code> 19 and using graalvm-svm-java17-linux-gluon-22.1.0.1-Final.\nRunning on Android 8 through 12.</p>\n"},{"tags":["java","android","xml","android-layout","android-constraintlayout"],"comments":[{"owner":{"account_id":20029443,"reputation":297,"user_id":14682570,"display_name":"Dev007"},"score":0,"creation_date":1675925506,"post_id":75394974,"comment_id":133033365,"body_markdown":"Hi, you need to add AdView as a last item right? For example if you have 20 items in list and the 21st item is adview? If yea, you can do with list or recycler adapter add the last item as null or empty value and you have to add all ads related logic in adapter class.","body":"Hi, you need to add AdView as a last item right? For example if you have 20 items in list and the 21st item is adview? If yea, you can do with list or recycler adapter add the last item as null or empty value and you have to add all ads related logic in adapter class."},{"owner":{"account_id":4526516,"reputation":208,"user_id":4013399,"accept_rate":39,"display_name":"Zac1"},"score":0,"creation_date":1675925853,"post_id":75394974,"comment_id":133033446,"body_markdown":"Thanks, but I don&#39;t want that. I actually want the adView in the container activity (activity_results, which contains that listView) - so one adView per page regardless of whether the listView has items or not.","body":"Thanks, but I don&#39;t want that. I actually want the adView in the container activity (activity_results, which contains that listView) - so one adView per page regardless of whether the listView has items or not."},{"owner":{"account_id":20029443,"reputation":297,"user_id":14682570,"display_name":"Dev007"},"score":0,"creation_date":1675939237,"post_id":75394974,"comment_id":133037187,"body_markdown":"In that case, the adview won’t show after the last time. It will show once the activity open…. You can your linear layout or constraint layout.","body":"In that case, the adview won’t show after the last time. It will show once the activity open…. You can your linear layout or constraint layout."},{"owner":{"account_id":26359116,"reputation":585,"user_id":20015640,"display_name":"Urvish Shiroya"},"score":0,"creation_date":1676299653,"post_id":75394974,"comment_id":133104054,"body_markdown":"Is your &quot;adView&quot; covered by &quot;listView&quot;?","body":"Is your &quot;adView&quot; covered by &quot;listView&quot;?"},{"owner":{"account_id":4526516,"reputation":208,"user_id":4013399,"accept_rate":39,"display_name":"Zac1"},"score":0,"creation_date":1676343628,"post_id":75394974,"comment_id":133113997,"body_markdown":"@UrvishShiroya I&#39;d say the adView is on top of the last item of the listView.","body":"@UrvishShiroya I&#39;d say the adView is on top of the last item of the listView."}],"answers":[{"tags":[],"owner":{"account_id":16418059,"reputation":84,"user_id":12038445,"display_name":"Claudio Galv&#227;o"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1676328082,"creation_date":1676328082,"answer_id":75441864,"question_id":75394974,"body_markdown":"I have two pieces of advice for you:\r\n\r\n 1. **Avoid using ListView** (unless you have a fixed amount and few items). Prefer RecyclerView which is so much more performative. Basically, if you have so many items, with RecyclerView, just a certain amount of items will have the layout rendered. With ListView, even the hundredth item will have the layout rendered (even if you can see just the first four items on your screen at a certain moment).\r\n\r\n 2. **Take care about using several nested view groups**. It impacts the performance to render the layout on the device. In general, just a root ConstraintLayout solves all the problems you can face to align the elements.\r\nFor the first layout, because the AppBarLayout needs the CoordinatorLayout to work properly, you can keep the CoordinatorLayout as root and use ConstraintLayout after the AppBarLayout. For the second layout, the same thing. Here is an example:\r\n```\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    android:padding=&quot;10dp&quot;&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/abc&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        android:paddingBottom=&quot;10dp&quot;\r\n        android:textColor=&quot;@color/design_default_color_primary&quot;\r\n        android:textSize=&quot;14sp&quot;\r\n        android:textStyle=&quot;bold&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/def&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@id/abc&quot;\r\n        android:textColor=&quot;@color/design_default_color_primary&quot;\r\n        android:textSize=&quot;14sp&quot;\r\n        android:textStyle=&quot;bold&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/ghi&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@id/def&quot;\r\n        android:text=&quot;&quot;\r\n        android:textColor=&quot;@color/design_default_color_primary&quot;\r\n        android:textSize=&quot;14sp&quot;\r\n        android:textStyle=&quot;bold&quot; /&gt;\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\nAbout your problem with the AdView position, try something like this:\r\n```\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;fill_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    android:padding=&quot;10dp&quot;&gt;\r\n\r\n    &lt;androidx.recyclerview.widget.RecyclerView\r\n        android:id=&quot;@+id/recyclerview&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        tools:itemCount=&quot;@integer/material_motion_duration_long_2&quot;\r\n        tools:layout_editor_absoluteX=&quot;3dp&quot; /&gt;\r\n\r\n    &lt;com.google.android.gms.ads.AdView\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/recyclerview&quot;/&gt;\r\n\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\nLet me know if it worked. If you need some more help, contact me.","title":"How to ensure that the Android adView is always displayed after the bottom of the last item in my Android listView?","body":"<p>I have two pieces of advice for you:</p>\n<ol>\n<li><p><strong>Avoid using ListView</strong> (unless you have a fixed amount and few items). Prefer RecyclerView which is so much more performative. Basically, if you have so many items, with RecyclerView, just a certain amount of items will have the layout rendered. With ListView, even the hundredth item will have the layout rendered (even if you can see just the first four items on your screen at a certain moment).</p>\n</li>\n<li><p><strong>Take care about using several nested view groups</strong>. It impacts the performance to render the layout on the device. In general, just a root ConstraintLayout solves all the problems you can face to align the elements.\nFor the first layout, because the AppBarLayout needs the CoordinatorLayout to work properly, you can keep the CoordinatorLayout as root and use ConstraintLayout after the AppBarLayout. For the second layout, the same thing. Here is an example:</p>\n</li>\n</ol>\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:padding=&quot;10dp&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/abc&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        android:paddingBottom=&quot;10dp&quot;\n        android:textColor=&quot;@color/design_default_color_primary&quot;\n        android:textSize=&quot;14sp&quot;\n        android:textStyle=&quot;bold&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/def&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@id/abc&quot;\n        android:textColor=&quot;@color/design_default_color_primary&quot;\n        android:textSize=&quot;14sp&quot;\n        android:textStyle=&quot;bold&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/ghi&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@id/def&quot;\n        android:text=&quot;&quot;\n        android:textColor=&quot;@color/design_default_color_primary&quot;\n        android:textSize=&quot;14sp&quot;\n        android:textStyle=&quot;bold&quot; /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>About your problem with the AdView position, try something like this:</p>\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;fill_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:orientation=&quot;vertical&quot;\n    android:padding=&quot;10dp&quot;&gt;\n\n    &lt;androidx.recyclerview.widget.RecyclerView\n        android:id=&quot;@+id/recyclerview&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        tools:itemCount=&quot;@integer/material_motion_duration_long_2&quot;\n        tools:layout_editor_absoluteX=&quot;3dp&quot; /&gt;\n\n    &lt;com.google.android.gms.ads.AdView\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/recyclerview&quot;/&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>Let me know if it worked. If you need some more help, contact me.</p>\n"},{"comments":[{"owner":{"account_id":21390158,"reputation":801,"user_id":15754377,"display_name":"Vivek Gupta"},"score":0,"creation_date":1676570266,"post_id":75476191,"comment_id":133168272,"body_markdown":"if still overlaps , use margins accordingly on co-ordinator layout (marginBottom =&quot;10dp&quot; for example)","body":"if still overlaps , use margins accordingly on co-ordinator layout (marginBottom =&quot;10dp&quot; for example)"}],"tags":[],"owner":{"account_id":21390158,"reputation":801,"user_id":15754377,"display_name":"Vivek Gupta"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676570089,"creation_date":1676570089,"answer_id":75476191,"question_id":75394974,"body_markdown":"How about wrapping up co-ordinator view group with constraintLayout and putting adview outside of this co-ordinator viewgroup and constrain adview to bottom to the activity layout so that ad view is independent of list view&#39;s data. \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;com.test.test.ResultsActivity&quot;&gt;\r\n    \r\n        &lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n            xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n            xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            app:layout_constraintBottom_toTopOf=&quot;@+id/adView&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n    \r\n            &lt;com.google.android.material.appbar.AppBarLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:theme=&quot;@style/AppTheme.AppBarOverlay&quot;&gt;\r\n    \r\n                &lt;androidx.appcompat.widget.Toolbar\r\n                    android:id=&quot;@+id/toolbar&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;?attr/actionBarSize&quot;\r\n                    android:background=&quot;?attr/colorPrimary&quot;\r\n                    app:popupTheme=&quot;@style/AppTheme.PopupOverlay&quot;\r\n                    app:titleTextAppearance=&quot;@style/ToolbarTitle&quot; /&gt;\r\n    \r\n                &lt;com.google.android.material.tabs.TabLayout\r\n                    android:id=&quot;@+id/tabs&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_centerHorizontal=&quot;true&quot;\r\n                    android:layout_gravity=&quot;center_horizontal&quot;\r\n                    app:tabMaxWidth=&quot;0dp&quot;&gt;\r\n    \r\n                    &lt;com.google.android.material.tabs.TabItem\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:text=&quot;@string/tab_text_1&quot; /&gt;\r\n    \r\n                    &lt;com.google.android.material.tabs.TabItem\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:text=&quot;@string/tab_text_2&quot; /&gt;\r\n                &lt;/com.google.android.material.tabs.TabLayout&gt;\r\n    \r\n            &lt;/com.google.android.material.appbar.AppBarLayout&gt;\r\n    \r\n            &lt;androidx.viewpager.widget.ViewPager\r\n                android:id=&quot;@+id/container&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot; /&gt;\r\n    \r\n            &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n                xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n                xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;\r\n                tools:context=&quot;com.test.test.ResultsActivity&quot;&gt;\r\n    \r\n                &lt;ListView\r\n                    android:id=&quot;@+id/listView&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    app:layout_constraintBottom_toTopOf=&quot;@+id/adView&quot;&gt;&lt;/ListView&gt;\r\n    \r\n                \r\n            &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n        &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\r\n    &lt;com.google.android.gms.ads.AdView \r\n                    android:id=&quot;@+id/adView&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    ads:adSize=&quot;SMART_BANNER&quot;\r\n                    ads:adUnitId=&quot;@string/banner_ad_unit_id&quot;\r\n                    app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;\r\n    &lt;/ConstraintLayout&gt;","title":"How to ensure that the Android adView is always displayed after the bottom of the last item in my Android listView?","body":"<p>How about wrapping up co-ordinator view group with constraintLayout and putting adview outside of this co-ordinator viewgroup and constrain adview to bottom to the activity layout so that ad view is independent of list view's data.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;com.test.test.ResultsActivity&quot;&gt;\n\n    &lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n        android:layout_width=&quot;match_parent&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@+id/adView&quot;\n        android:layout_height=&quot;wrap_content&quot;&gt;\n\n        &lt;com.google.android.material.appbar.AppBarLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:theme=&quot;@style/AppTheme.AppBarOverlay&quot;&gt;\n\n            &lt;androidx.appcompat.widget.Toolbar\n                android:id=&quot;@+id/toolbar&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;?attr/actionBarSize&quot;\n                android:background=&quot;?attr/colorPrimary&quot;\n                app:popupTheme=&quot;@style/AppTheme.PopupOverlay&quot;\n                app:titleTextAppearance=&quot;@style/ToolbarTitle&quot; /&gt;\n\n            &lt;com.google.android.material.tabs.TabLayout\n                android:id=&quot;@+id/tabs&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_centerHorizontal=&quot;true&quot;\n                android:layout_gravity=&quot;center_horizontal&quot;\n                app:tabMaxWidth=&quot;0dp&quot;&gt;\n\n                &lt;com.google.android.material.tabs.TabItem\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:text=&quot;@string/tab_text_1&quot; /&gt;\n\n                &lt;com.google.android.material.tabs.TabItem\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:text=&quot;@string/tab_text_2&quot; /&gt;\n            &lt;/com.google.android.material.tabs.TabLayout&gt;\n\n        &lt;/com.google.android.material.appbar.AppBarLayout&gt;\n\n        &lt;androidx.viewpager.widget.ViewPager\n            android:id=&quot;@+id/container&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot; /&gt;\n\n        &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n            xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n            xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;\n            tools:context=&quot;com.test.test.ResultsActivity&quot;&gt;\n\n            &lt;ListView\n                android:id=&quot;@+id/listView&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                app:layout_constraintBottom_toTopOf=&quot;@+id/adView&quot;&gt;&lt;/ListView&gt;\n\n            \n        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n    &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n&lt;com.google.android.gms.ads.AdView \n                android:id=&quot;@+id/adView&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                ads:adSize=&quot;SMART_BANNER&quot;\n                ads:adUnitId=&quot;@string/banner_ad_unit_id&quot;\n                app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;\n&lt;/ConstraintLayout&gt;\n</code></pre>\n"}],"owner":{"account_id":4526516,"reputation":208,"user_id":4013399,"accept_rate":39,"display_name":"Zac1"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1676667747,"creation_date":1675924068,"question_id":75394974,"body_markdown":"Here&#39;s the `activity_results` XML layout:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;com.test.test.ResultsActivity&quot;&gt;\r\n    \r\n        &lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n            xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n            xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n            &lt;com.google.android.material.appbar.AppBarLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:theme=&quot;@style/AppTheme.AppBarOverlay&quot;&gt;\r\n    \r\n                &lt;androidx.appcompat.widget.Toolbar\r\n                    android:id=&quot;@+id/toolbar&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;?attr/actionBarSize&quot;\r\n                    android:background=&quot;?attr/colorPrimary&quot;\r\n                    app:popupTheme=&quot;@style/AppTheme.PopupOverlay&quot;\r\n                    app:titleTextAppearance=&quot;@style/ToolbarTitle&quot; /&gt;\r\n    \r\n                &lt;com.google.android.material.tabs.TabLayout\r\n                    android:id=&quot;@+id/tabs&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_centerHorizontal=&quot;true&quot;\r\n                    android:layout_gravity=&quot;center_horizontal&quot;\r\n                    app:tabMaxWidth=&quot;0dp&quot;&gt;\r\n    \r\n                    &lt;com.google.android.material.tabs.TabItem\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:text=&quot;@string/tab_text_1&quot; /&gt;\r\n    \r\n                    &lt;com.google.android.material.tabs.TabItem\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:text=&quot;@string/tab_text_2&quot; /&gt;\r\n                &lt;/com.google.android.material.tabs.TabLayout&gt;\r\n    \r\n            &lt;/com.google.android.material.appbar.AppBarLayout&gt;\r\n    \r\n            &lt;androidx.viewpager.widget.ViewPager\r\n                android:id=&quot;@+id/container&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot; /&gt;\r\n    \r\n            &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n                xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n                xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;\r\n                tools:context=&quot;com.test.test.ResultsActivity&quot;&gt;\r\n    \r\n                &lt;ListView\r\n                    android:id=&quot;@+id/listView&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    app:layout_constraintBottom_toTopOf=&quot;@+id/adView&quot;&gt;&lt;/ListView&gt;\r\n    \r\n                &lt;com.google.android.gms.ads.AdView xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n                    android:id=&quot;@+id/adView&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_alignParentBottom=&quot;true&quot;\r\n                    android:layout_gravity=&quot;center|bottom&quot;\r\n                    ads:adSize=&quot;SMART_BANNER&quot;\r\n                    ads:adUnitId=&quot;@string/banner_ad_unit_id&quot;\r\n                    app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;\r\n            &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n        &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\r\n    \r\n    &lt;/RelativeLayout&gt;\r\n\r\nAnd, here&#39;s the `content_results.xml` layout:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:layout_width=&quot;fill_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:padding=&quot;@dimen/activity_horizontal_margin&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/abc&quot;\r\n            android:layout_width=&quot;fill_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:paddingBottom=&quot;10dip&quot;\r\n            android:textColor=&quot;@color/colorAccent&quot;\r\n            android:textSize=&quot;14sp&quot;\r\n            android:textStyle=&quot;bold&quot; /&gt;\r\n    \r\n        &lt;RelativeLayout\r\n            android:layout_width=&quot;fill_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/def&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;&quot;\r\n                android:textColor=&quot;@color/colorPrimary&quot;\r\n                android:textSize=&quot;14sp&quot;\r\n                android:textStyle=&quot;bold&quot; /&gt;\r\n        &lt;/RelativeLayout&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/ghi&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;&quot;\r\n            android:textColor=&quot;@color/colorPrimary&quot;\r\n            android:textSize=&quot;14sp&quot;\r\n            android:textStyle=&quot;bold&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\n\r\nI want to have the `adView` item at the bottom of the last element of the `listView`. Is this possible with the layouts I currently have? Because it looks like the `adView` in the `activity_results` has no relation to the list items in the `content_results` file?\r\n\r\nI&#39;ve also tried `app:layout_constraintBottom_toTopOf` attribute to position the `adView` below the `ListView`, but there seems to be no change.\r\n\r\nPlease let me know if you can catch any other basic errors in these layouts? ","title":"How to ensure that the Android adView is always displayed after the bottom of the last item in my Android listView?","body":"<p>Here's the <code>activity_results</code> XML layout:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;com.test.test.ResultsActivity&quot;&gt;\n\n    &lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;&gt;\n\n        &lt;com.google.android.material.appbar.AppBarLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:theme=&quot;@style/AppTheme.AppBarOverlay&quot;&gt;\n\n            &lt;androidx.appcompat.widget.Toolbar\n                android:id=&quot;@+id/toolbar&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;?attr/actionBarSize&quot;\n                android:background=&quot;?attr/colorPrimary&quot;\n                app:popupTheme=&quot;@style/AppTheme.PopupOverlay&quot;\n                app:titleTextAppearance=&quot;@style/ToolbarTitle&quot; /&gt;\n\n            &lt;com.google.android.material.tabs.TabLayout\n                android:id=&quot;@+id/tabs&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_centerHorizontal=&quot;true&quot;\n                android:layout_gravity=&quot;center_horizontal&quot;\n                app:tabMaxWidth=&quot;0dp&quot;&gt;\n\n                &lt;com.google.android.material.tabs.TabItem\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:text=&quot;@string/tab_text_1&quot; /&gt;\n\n                &lt;com.google.android.material.tabs.TabItem\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:text=&quot;@string/tab_text_2&quot; /&gt;\n            &lt;/com.google.android.material.tabs.TabLayout&gt;\n\n        &lt;/com.google.android.material.appbar.AppBarLayout&gt;\n\n        &lt;androidx.viewpager.widget.ViewPager\n            android:id=&quot;@+id/container&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot; /&gt;\n\n        &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n            xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n            xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;\n            tools:context=&quot;com.test.test.ResultsActivity&quot;&gt;\n\n            &lt;ListView\n                android:id=&quot;@+id/listView&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                app:layout_constraintBottom_toTopOf=&quot;@+id/adView&quot;&gt;&lt;/ListView&gt;\n\n            &lt;com.google.android.gms.ads.AdView xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\n                android:id=&quot;@+id/adView&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_alignParentBottom=&quot;true&quot;\n                android:layout_gravity=&quot;center|bottom&quot;\n                ads:adSize=&quot;SMART_BANNER&quot;\n                ads:adUnitId=&quot;@string/banner_ad_unit_id&quot;\n                app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;\n        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n    &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>And, here's the <code>content_results.xml</code> layout:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:layout_width=&quot;fill_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:orientation=&quot;vertical&quot;\n    android:padding=&quot;@dimen/activity_horizontal_margin&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/abc&quot;\n        android:layout_width=&quot;fill_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:paddingBottom=&quot;10dip&quot;\n        android:textColor=&quot;@color/colorAccent&quot;\n        android:textSize=&quot;14sp&quot;\n        android:textStyle=&quot;bold&quot; /&gt;\n\n    &lt;RelativeLayout\n        android:layout_width=&quot;fill_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/def&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;&quot;\n            android:textColor=&quot;@color/colorPrimary&quot;\n            android:textSize=&quot;14sp&quot;\n            android:textStyle=&quot;bold&quot; /&gt;\n    &lt;/RelativeLayout&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/ghi&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;&quot;\n        android:textColor=&quot;@color/colorPrimary&quot;\n        android:textSize=&quot;14sp&quot;\n        android:textStyle=&quot;bold&quot; /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>I want to have the <code>adView</code> item at the bottom of the last element of the <code>listView</code>. Is this possible with the layouts I currently have? Because it looks like the <code>adView</code> in the <code>activity_results</code> has no relation to the list items in the <code>content_results</code> file?</p>\n<p>I've also tried <code>app:layout_constraintBottom_toTopOf</code> attribute to position the <code>adView</code> below the <code>ListView</code>, but there seems to be no change.</p>\n<p>Please let me know if you can catch any other basic errors in these layouts?</p>\n"},{"tags":["java","selenium-webdriver","action"],"comments":[{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1676666180,"post_id":75489020,"comment_id":133190573,"body_markdown":"I don&#39;t find the element with text as **Tickets** in the spashot. Additionally, please read why a [screenshot of HTML or code or error is a bad idea](https://meta.stackoverflow.com/questions/303812/discourage-screenshots-of-code-and-or-errors). You may like to consider updating the Question with formatted text based relevant HTML, code trials and error stack trace.","body":"I don&#39;t find the element with text as <b>Tickets</b> in the spashot. Additionally, please read why a <a href=\"https://meta.stackoverflow.com/questions/303812/discourage-screenshots-of-code-and-or-errors\">screenshot of HTML or code or error is a bad idea</a>. You may like to consider updating the Question with formatted text based relevant HTML, code trials and error stack trace."},{"owner":{"account_id":9014912,"reputation":398,"user_id":6718145,"accept_rate":33,"display_name":"RAHUL"},"score":0,"creation_date":1676666339,"post_id":75489020,"comment_id":133190603,"body_markdown":"added the html for &quot;tickets&quot;","body":"added the html for &quot;tickets&quot;"}],"answers":[{"comments":[{"owner":{"account_id":9014912,"reputation":398,"user_id":6718145,"accept_rate":33,"display_name":"RAHUL"},"score":0,"creation_date":1676670466,"post_id":75489141,"comment_id":133191453,"body_markdown":"i am getting an error:-\njava: incompatible types: java.time.Duration cannot be converted to long","body":"i am getting an error:- java: incompatible types: java.time.Duration cannot be converted to long"},{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1676670750,"post_id":75489141,"comment_id":133191496,"body_markdown":"Nopes, why would you convert it to `Duration.ofLong()`? Not needed really, use as it is `Duration.ofSeconds(5)`. Seems your framework issue.","body":"Nopes, why would you convert it to <code>Duration.ofLong()</code>? Not needed really, use as it is <code>Duration.ofSeconds(5)</code>. Seems your framework issue."}],"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676667580,"creation_date":1676667050,"answer_id":75489141,"question_id":75489020,"body_markdown":"To [_**Mouse Hover**_](https://stackoverflow.com/a/47261894/7429447) over the element with text as _**Tickets**_ and then to click on the element with text as _**Statuses**_ you can use the following [_locator strategies_](https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver):\r\n\r\n\tWebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(5));\r\n\tWebElement tickets = wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//span[@title=&#39;Tickets&#39;]&quot;)));\r\n\tActions actions = new Actions(driver);\r\n\tactions.moveToElement(tickets).build().perform();\r\n\twait.until(ExpectedConditions.elementToBeClickable(By.linkText(&quot;Statuses&quot;))).click();\r\n\r\nOptimizing the code you can use:\r\n\r\n\tnew Actions(driver).moveToElement(new WebDriverWait(driver, Duration.ofSeconds(5)).until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//span[@title=&#39;Tickets&#39;]&quot;)))).build().perform();\r\n\tnew WebDriverWait(driver, Duration.ofSeconds(5)).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[@class=&#39;ember-view&#39; and text()=&#39;Statuses&#39;]&quot;))).click();","title":"Selenium Webriver:- How to click on this link?","body":"<p>To <a href=\"https://stackoverflow.com/a/47261894/7429447\"><em><strong>Mouse Hover</strong></em></a> over the element with text as <em><strong>Tickets</strong></em> and then to click on the element with text as <em><strong>Statuses</strong></em> you can use the following <a href=\"https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver\"><em>locator strategies</em></a>:</p>\n<pre><code>WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(5));\nWebElement tickets = wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//span[@title='Tickets']&quot;)));\nActions actions = new Actions(driver);\nactions.moveToElement(tickets).build().perform();\nwait.until(ExpectedConditions.elementToBeClickable(By.linkText(&quot;Statuses&quot;))).click();\n</code></pre>\n<p>Optimizing the code you can use:</p>\n<pre><code>new Actions(driver).moveToElement(new WebDriverWait(driver, Duration.ofSeconds(5)).until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//span[@title='Tickets']&quot;)))).build().perform();\nnew WebDriverWait(driver, Duration.ofSeconds(5)).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[@class='ember-view' and text()='Statuses']&quot;))).click();\n</code></pre>\n"}],"owner":{"account_id":9014912,"reputation":398,"user_id":6718145,"accept_rate":33,"display_name":"RAHUL"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676667580,"creation_date":1676665962,"question_id":75489020,"body_markdown":"[![enter image description here][1]][1]\r\n\r\nI have to take cursor on &quot;Tickets&quot; link and then click on the &quot;Statuses&quot;.\r\nAs soon as i take cursor outside this window/frame this screen gets closes and i again have to take cursor on &quot;Tickets&quot; link.\r\n\r\nHTML is:-\r\n[![enter image description here][2]][2]\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2i1rg.png\r\n  [2]: https://i.stack.imgur.com/yXqVB.png\r\n  [3]: https://i.stack.imgur.com/AbdRy.png","title":"Selenium Webriver:- How to click on this link?","body":"<p><a href=\"https://i.stack.imgur.com/2i1rg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2i1rg.png\" alt=\"enter image description here\" /></a></p>\n<p>I have to take cursor on &quot;Tickets&quot; link and then click on the &quot;Statuses&quot;.\nAs soon as i take cursor outside this window/frame this screen gets closes and i again have to take cursor on &quot;Tickets&quot; link.</p>\n<p>HTML is:-\n<a href=\"https://i.stack.imgur.com/yXqVB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yXqVB.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/AbdRy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AbdRy.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","mediastore"],"comments":[{"owner":{"account_id":1155018,"reputation":573,"user_id":1135866,"accept_rate":92,"display_name":"VCODE"},"score":0,"creation_date":1676668744,"post_id":75489153,"comment_id":133191091,"body_markdown":"I don&#39;t think there&#39;s a way around it, i.e: without asking for permission from the user. Also, check this answer: https://stackoverflow.com/a/28183933/1135866","body":"I don&#39;t think there&#39;s a way around it, i.e: without asking for permission from the user. Also, check this answer: <a href=\"https://stackoverflow.com/a/28183933/1135866\">stackoverflow.com/a/28183933/1135866</a>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1676672544,"post_id":75489153,"comment_id":133191815,"body_markdown":"`However, on Android &lt; 10, the download URI is not avaiable in the MediaStore API,` ? Which uri?  What do you mean? Where are you talking about?","body":"<code>However, on Android &lt; 10, the download URI is not avaiable in the MediaStore API,</code> ? Which uri?  What do you mean? Where are you talking about?"},{"owner":{"account_id":15206457,"reputation":133,"user_id":10972726,"display_name":"MichiBros"},"score":0,"creation_date":1676673143,"post_id":75489153,"comment_id":133191918,"body_markdown":"The entire MediaStore.Downloads class was added only in API 29. Check this out: https://developer.android.com/reference/android/provider/MediaStore.Downloads","body":"The entire MediaStore.Downloads class was added only in API 29. Check this out: <a href=\"https://developer.android.com/reference/android/provider/MediaStore.Downloads\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/provider/&hellip;</a>"}],"owner":{"account_id":15206457,"reputation":133,"user_id":10972726,"display_name":"MichiBros"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":447,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1676667201,"creation_date":1676667201,"question_id":75489153,"body_markdown":"I have a file transfer app that needs to save the files it received in the Download folder.\r\nOn Android &gt;= 10, MediaStore makes this extremely easy, since it provides a direct method for creating entries in the download folder, without any special permission.\r\n\r\nHowever, on Android &lt; 10, the download URI is not avaiable in the MediaStore API, and I have to rely on the old method for saving files, which requires the WRITE_EXTERNAL_STORAGE permission with consequent popup for asking it.\r\n\r\nIs there any way around this? Maybe some kind of support library that brings the Download URI back to older versions of Android?","title":"Save file in Downloads folder without WRITE_STORAGE permission on Android &lt; 10","body":"<p>I have a file transfer app that needs to save the files it received in the Download folder.\nOn Android &gt;= 10, MediaStore makes this extremely easy, since it provides a direct method for creating entries in the download folder, without any special permission.</p>\n<p>However, on Android &lt; 10, the download URI is not avaiable in the MediaStore API, and I have to rely on the old method for saving files, which requires the WRITE_EXTERNAL_STORAGE permission with consequent popup for asking it.</p>\n<p>Is there any way around this? Maybe some kind of support library that brings the Download URI back to older versions of Android?</p>\n"},{"tags":["java","debugging","intellij-idea"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1320875530,"post_id":8072189,"comment_id":9891185,"body_markdown":"Haven&#39;t seen that behavior; have you tried a complete clean &amp; rebuild?","body":"Haven&#39;t seen that behavior; have you tried a complete clean &amp; rebuild?"},{"owner":{"account_id":242066,"reputation":17256,"user_id":513342,"accept_rate":85,"display_name":"Oleg Mikheev"},"score":3,"creation_date":1320875867,"post_id":8072189,"comment_id":9891270,"body_markdown":"are you tracing your own source, or the sources of some library? the problem could be several versions of the same library in the classpath","body":"are you tracing your own source, or the sources of some library? the problem could be several versions of the same library in the classpath"},{"owner":{"account_id":6121142,"reputation":1811,"user_id":7338454,"accept_rate":88,"display_name":"johnny_mac"},"score":0,"creation_date":1570330197,"post_id":8072189,"comment_id":102877549,"body_markdown":"Have you confirmed it is actually not linking to the correct source, or is it linking but skipping over certain code you are trying to debug? I ask as I experienced the same due to intellij not stepping into lambda functions. Some code refactoring made stepping through easier. If however, you do not see any changes reflected at all, feel free to disregard this comment.","body":"Have you confirmed it is actually not linking to the correct source, or is it linking but skipping over certain code you are trying to debug? I ask as I experienced the same due to intellij not stepping into lambda functions. Some code refactoring made stepping through easier. If however, you do not see any changes reflected at all, feel free to disregard this comment."}],"answers":[{"comments":[{"owner":{"account_id":940484,"reputation":22724,"user_id":968632,"accept_rate":100,"display_name":"Guillaume"},"score":1,"creation_date":1320917157,"post_id":8072224,"comment_id":9898397,"body_markdown":"I agree, it&#39;s probably the problem - I&#39;d try to check the &quot;make&quot; checkbox on the run configuration (&quot;Before launch&quot; section) used to debug","body":"I agree, it&#39;s probably the problem - I&#39;d try to check the &quot;make&quot; checkbox on the run configuration (&quot;Before launch&quot; section) used to debug"},{"owner":{"account_id":332582,"reputation":1197,"user_id":657970,"display_name":"MalsR"},"score":1,"creation_date":1320938671,"post_id":8072224,"comment_id":9904920,"body_markdown":"@pcalcao Yeah your right, I also had similar issues sometime back with this where the debugger complained that no source can be found. It is similar to starting the debugger and then changing some code when the mismatch happens. I think as the guys suggested build the project and this will solve it.","body":"@pcalcao Yeah your right, I also had similar issues sometime back with this where the debugger complained that no source can be found. It is similar to starting the debugger and then changing some code when the mismatch happens. I think as the guys suggested build the project and this will solve it."}],"tags":[],"owner":{"account_id":191938,"reputation":15835,"user_id":432806,"accept_rate":100,"display_name":"pcalcao"},"comment_count":2,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1320875509,"creation_date":1320875509,"answer_id":8072224,"question_id":8072189,"body_markdown":"The only thing I can think of is that the current compiled classes don&#39;t match the Source you&#39;re using to debug.\r\nWhat happens in this circumstances is that IntelliJ (or any other IDE), gets the debug information from the classes, regarding things like line numbers, and then maps it to the current source you&#39;re viewing, to show you what code is being executed. \r\n\r\nIf the code is outdated, or the versions (the source code and the compiled class) mismatch in any way, it can happen that the debugged is giving the IDE information to show a certain line, but that information is not correct giving the current source code, which might cause what appears to be the debugged &quot;jumping&quot; lines or simply stopping in places that don&#39;t make much sense. \r\n\r\nHave you rebuilt your project? Are those sources from classes in a Jar, and are you sure the versions match?\r\n\r\nHope it helps!","title":"Why does IntelliJ debugger skip lines when debugging?","body":"<p>The only thing I can think of is that the current compiled classes don't match the Source you're using to debug.\nWhat happens in this circumstances is that IntelliJ (or any other IDE), gets the debug information from the classes, regarding things like line numbers, and then maps it to the current source you're viewing, to show you what code is being executed. </p>\n\n<p>If the code is outdated, or the versions (the source code and the compiled class) mismatch in any way, it can happen that the debugged is giving the IDE information to show a certain line, but that information is not correct giving the current source code, which might cause what appears to be the debugged \"jumping\" lines or simply stopping in places that don't make much sense. </p>\n\n<p>Have you rebuilt your project? Are those sources from classes in a Jar, and are you sure the versions match?</p>\n\n<p>Hope it helps!</p>\n"},{"tags":[],"owner":{"account_id":3801282,"reputation":4355,"user_id":3154872,"accept_rate":25,"display_name":"mancini0"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1468338139,"creation_date":1468337721,"answer_id":38333291,"question_id":8072189,"body_markdown":"You can configure IntelliJ to use the Eclipse java compiler, which may solve your issue. From the below link:\r\n\r\nhttps://youtrack.jetbrains.com/issue/IDEA-8021\r\n\r\n&quot;\r\nThis is not the first report about well-known old javac problem: for some try/catch and if/else structures it generates several bytecode instructions, which are wrongly associated with line numbers. So when stepping, debugger encounters jump instruction with the different line number and decides to stop at it (because the line number has changed). The javac shouldn&#39;t have assigned the different line number to that instruction. \r\n\r\nYou see different behaviour in Eclipse only because it uses its own compiler which is free from this problem. You&#39;ll see exactly the described behavour if you configure Eclipse to use javac for compilation. Alternatively, you can set IDEA to use eclipse compiler to workaround the problem (applicable only to current EAP version - builds 5xxx - which has integration with eclipse compiler)&quot;\r\n\r\nAlso see this Q regarding configuring Maven to use the Eclipse compiler:\r\n\r\nhttps://stackoverflow.com/questions/33164976/using-eclipse-java-compiler-ecj-in-maven-builds\r\n\r\n","title":"Why does IntelliJ debugger skip lines when debugging?","body":"<p>You can configure IntelliJ to use the Eclipse java compiler, which may solve your issue. From the below link:</p>\n\n<p><a href=\"https://youtrack.jetbrains.com/issue/IDEA-8021\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/IDEA-8021</a></p>\n\n<p>\"\nThis is not the first report about well-known old javac problem: for some try/catch and if/else structures it generates several bytecode instructions, which are wrongly associated with line numbers. So when stepping, debugger encounters jump instruction with the different line number and decides to stop at it (because the line number has changed). The javac shouldn't have assigned the different line number to that instruction. </p>\n\n<p>You see different behaviour in Eclipse only because it uses its own compiler which is free from this problem. You'll see exactly the described behavour if you configure Eclipse to use javac for compilation. Alternatively, you can set IDEA to use eclipse compiler to workaround the problem (applicable only to current EAP version - builds 5xxx - which has integration with eclipse compiler)\"</p>\n\n<p>Also see this Q regarding configuring Maven to use the Eclipse compiler:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/33164976/using-eclipse-java-compiler-ecj-in-maven-builds\">Using Eclipse Java Compiler (ecj) in maven builds</a></p>\n"},{"tags":[],"owner":{"account_id":192101,"reputation":1554,"user_id":433061,"accept_rate":100,"display_name":"bdetweiler"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1549906625,"creation_date":1546533121,"answer_id":54026264,"question_id":8072189,"body_markdown":"I&#39;ve been fighting with a similar issue with a Gradle-based project. I have tried every combination of File -&gt; Synchronize, Build -&gt; Clean project, `gradle clean build`, etc. Deleted the .gradle cache. Decompiled the .class file and it looked like the correct version.\r\n\r\nUltimately, I just ended up removing all the `build` and `out` directories in the project, tried running the test again and finally picked up the current source version.\r\n\r\nI remember in Eclipse I always had to deal with the [Eclipse Dance](http://underlap.blogspot.com/2011/10/eclipse-dance-steps.html). I guess this is IntelliJ&#39;s version of that.\r\n\r\nUPDATE: I&#39;ve found this to be a randomly recurring issue so I created an alias to do the deletes if you&#39;re running a Bash-equivalent. Just set the alias in your `.bashrc` or `.zshrc` and run `deletebuilds` within your project directory:\r\n\r\n```\r\nalias deletebuilds=&#39;find . | egrep &quot;\\.class$&quot; | sed -e &quot;s/\\/build\\/.*/\\/build\\//&quot; | sort | uniq | xargs rm -rf&#39;\r\n```\r\n\r\nThis assumes your compiled class files are going into a `build` directory. Modify the `sed` part if they&#39;re going somewhere else.","title":"Why does IntelliJ debugger skip lines when debugging?","body":"<p>I've been fighting with a similar issue with a Gradle-based project. I have tried every combination of File -> Synchronize, Build -> Clean project, <code>gradle clean build</code>, etc. Deleted the .gradle cache. Decompiled the .class file and it looked like the correct version.</p>\n\n<p>Ultimately, I just ended up removing all the <code>build</code> and <code>out</code> directories in the project, tried running the test again and finally picked up the current source version.</p>\n\n<p>I remember in Eclipse I always had to deal with the <a href=\"http://underlap.blogspot.com/2011/10/eclipse-dance-steps.html\" rel=\"nofollow noreferrer\">Eclipse Dance</a>. I guess this is IntelliJ's version of that.</p>\n\n<p>UPDATE: I've found this to be a randomly recurring issue so I created an alias to do the deletes if you're running a Bash-equivalent. Just set the alias in your <code>.bashrc</code> or <code>.zshrc</code> and run <code>deletebuilds</code> within your project directory:</p>\n\n<pre><code>alias deletebuilds='find . | egrep \"\\.class$\" | sed -e \"s/\\/build\\/.*/\\/build\\//\" | sort | uniq | xargs rm -rf'\n</code></pre>\n\n<p>This assumes your compiled class files are going into a <code>build</code> directory. Modify the <code>sed</code> part if they're going somewhere else.</p>\n"},{"tags":[],"owner":{"account_id":3210182,"reputation":535,"user_id":2710335,"display_name":"Northnroro"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1552896444,"creation_date":1552896444,"answer_id":55216946,"question_id":8072189,"body_markdown":"This problem could be similar to this issue [https://intellij-support.jetbrains.com/hc/en-us/community/posts/206170749-IDEA-14-1-1-debugger-using-decompiled-code-instead-of-source-code][1].\r\n\r\nIn `Project Structure (Ctrl+Alt+Shift+S) &gt; Modules`, if you have added any jar of the debugged module to any another module&#39;s dependencies, Intellij might use the decompiled version of that jar instead of the latest source code, so the execution will pause at a breakpoint in the decompiled version instead. This problem can occur even when the debugged module is called from other modules that do not depend on the debugged one.\r\n\r\nTo solve this, simply remove the jar of the debugged module from all modules&#39; dependencies in the Project Structure. If you do not know which modules have the debugged module jar as dependencies, you can use some tools (Eg. Sublime Text, bash, ...) to search for the module name which is stored in Intellij `*.iml` file in each module. Once removing, you may need to `Sync the project` and do `Maven &gt; Reimport`.\r\n\r\n\r\n  [1]: https://intellij-support.jetbrains.com/hc/en-us/community/posts/206170749-IDEA-14-1-1-debugger-using-decompiled-code-instead-of-source-code","title":"Why does IntelliJ debugger skip lines when debugging?","body":"<p>This problem could be similar to this issue <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/206170749-IDEA-14-1-1-debugger-using-decompiled-code-instead-of-source-code\" rel=\"nofollow noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/community/posts/206170749-IDEA-14-1-1-debugger-using-decompiled-code-instead-of-source-code</a>.</p>\n\n<p>In <code>Project Structure (Ctrl+Alt+Shift+S) &gt; Modules</code>, if you have added any jar of the debugged module to any another module's dependencies, Intellij might use the decompiled version of that jar instead of the latest source code, so the execution will pause at a breakpoint in the decompiled version instead. This problem can occur even when the debugged module is called from other modules that do not depend on the debugged one.</p>\n\n<p>To solve this, simply remove the jar of the debugged module from all modules' dependencies in the Project Structure. If you do not know which modules have the debugged module jar as dependencies, you can use some tools (Eg. Sublime Text, bash, ...) to search for the module name which is stored in Intellij <code>*.iml</code> file in each module. Once removing, you may need to <code>Sync the project</code> and do <code>Maven &gt; Reimport</code>.</p>\n"},{"tags":[],"owner":{"account_id":3691447,"reputation":6845,"user_id":3073945,"accept_rate":90,"display_name":"Md. Sajedul Karim"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1595227185,"creation_date":1595227185,"answer_id":62989865,"question_id":8072189,"body_markdown":"I fetched same problem. You can follow bellow steps:\r\n\r\n 1. Delete Build/Target folder\r\n 2. Close project from file and \r\n 3. Open project from Recent projects.\r\n 4. Debug again. Now debugger will hit your debug pointer location\r\n\r\nThanks :)","title":"Why does IntelliJ debugger skip lines when debugging?","body":"<p>I fetched same problem. You can follow bellow steps:</p>\n<ol>\n<li>Delete Build/Target folder</li>\n<li>Close project from file and</li>\n<li>Open project from Recent projects.</li>\n<li>Debug again. Now debugger will hit your debug pointer location</li>\n</ol>\n<p>Thanks :)</p>\n"},{"tags":[],"owner":{"account_id":8607564,"reputation":912,"user_id":6447189,"display_name":"Melissa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667429099,"creation_date":1667429099,"answer_id":74296380,"question_id":8072189,"body_markdown":"In my case, breakpoint/debugger wasn&#39;t working for Foo.java only. Turns out Foo.java was mocked in my test (`@MockBean`).","title":"Why does IntelliJ debugger skip lines when debugging?","body":"<p>In my case, breakpoint/debugger wasn't working for Foo.java only. Turns out Foo.java was mocked in my test (<code>@MockBean</code>).</p>\n"},{"tags":[],"owner":{"account_id":4234133,"reputation":323,"user_id":3465795,"display_name":"Steve T"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676067926,"creation_date":1676052786,"answer_id":75414724,"question_id":8072189,"body_markdown":"I am working on a project that has multiple modules. The test class in module B is used to run a test, during which code found in module A is invoked. My problem was that when I added new code to a class in module A, and I tried to debug the new code, the debugger would instead use a .class file, and my changes were ignored by the debugger. I tried many things, but it turned out to be a rather simple resolution. First, I went to File &gt; Project Structure &gt; Project Settings &gt; Modules. In the list of modules, I selected module B. Then I selected the Dependencies tab. There is a list of dependencies in this tab. In order for the test class in module B to see the class under test in module A, I had to click the plus sign (+), to add a new dependency to the list. A list of modules and submodules were shown. I selected the submodule in module A that contained the class I wanted to debug, and I clicked ok. Now the submodule that I selected was shown in the dependencies list. I moved this submodule to just below where it says &quot;module source&quot;, then I clicked apply and ok to close the Project Settings. When I reran the debugger, now the test in module B could &quot;see&quot; the code changes in module A, and after the debug action did a rebuild, I could proceed to debug as normal. ","title":"Why does IntelliJ debugger skip lines when debugging?","body":"<p>I am working on a project that has multiple modules. The test class in module B is used to run a test, during which code found in module A is invoked. My problem was that when I added new code to a class in module A, and I tried to debug the new code, the debugger would instead use a .class file, and my changes were ignored by the debugger. I tried many things, but it turned out to be a rather simple resolution. First, I went to File &gt; Project Structure &gt; Project Settings &gt; Modules. In the list of modules, I selected module B. Then I selected the Dependencies tab. There is a list of dependencies in this tab. In order for the test class in module B to see the class under test in module A, I had to click the plus sign (+), to add a new dependency to the list. A list of modules and submodules were shown. I selected the submodule in module A that contained the class I wanted to debug, and I clicked ok. Now the submodule that I selected was shown in the dependencies list. I moved this submodule to just below where it says &quot;module source&quot;, then I clicked apply and ok to close the Project Settings. When I reran the debugger, now the test in module B could &quot;see&quot; the code changes in module A, and after the debug action did a rebuild, I could proceed to debug as normal.</p>\n"}],"owner":{"account_id":951375,"reputation":391,"user_id":977463,"display_name":"jkarm"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43312,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":7,"score":14,"last_activity_date":1676666086,"creation_date":1320875336,"question_id":8072189,"body_markdown":"I am trying to switch to over to IntelliJ but when I load up my projects the debugger appear to be skipping lines and not tracking the actual source when I try to step through. I know this is a vague problem but does anyone know about issues that cause IntelliJ to link improperly to source code when debugging?","title":"Why does IntelliJ debugger skip lines when debugging?","body":"<p>I am trying to switch to over to IntelliJ but when I load up my projects the debugger appear to be skipping lines and not tracking the actual source when I try to step through. I know this is a vague problem but does anyone know about issues that cause IntelliJ to link improperly to source code when debugging?</p>\n"},{"tags":["java","spring","spring-boot","gradle","spring-test"],"answers":[{"tags":[],"owner":{"account_id":16812688,"reputation":142,"user_id":12155325,"display_name":"dilbert2219"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676665730,"creation_date":1676665730,"answer_id":75488998,"question_id":75479290,"body_markdown":"So, I added ```testImplementation &#39;com.h2database:h2&#39; ``` and everything came to order.\r\n\r\nI was getting datasource dependency issue before.","title":"Spring Boot Actuators and CORS Configuration test failing because DB Props are not provided","body":"<p>So, I added <code>testImplementation 'com.h2database:h2' </code> and everything came to order.</p>\n<p>I was getting datasource dependency issue before.</p>\n"}],"owner":{"account_id":16812688,"reputation":142,"user_id":12155325,"display_name":"dilbert2219"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676665730,"creation_date":1676594675,"question_id":75479290,"body_markdown":"My Spring Boot application is configured with a Datasource and I have implemented CORS Configs and HttpSecurity .antMatchers for authorizing request.\r\n\r\nThe application seemed to have been working fine - i.e building and testing and launching when I put plain text db passwords in the props file.\r\n\r\nEver since I moved the creds into a [CREDHUB][1] service - the builds fail locally (```I remediated that by adding a test active profile in my gradle file which uses an uncommited props file - which actually has the plain text db user and pwd```) which uses  on Jenkins because the actuator and CORS tests started failing, as Jenkins is not configured to access CREDHUB.\r\n\r\nSo, my question is:\r\n\r\nWith this setup, the test seems to bring up the whole application, thus trying to connect to a running database - whose credentials are unavailable locally.\r\nThe test won&#39;t start properly because the datasource properties prefixed with db are not provided.\r\nHow can I start this test without bringing up the database connection?\r\n\r\n\r\n```app.yml ```\r\n```\r\nspring:\r\n  datasource:\r\n    driver-class-name: org.abc.jdbc.Driver\r\n    username: ${db.username}\r\n    password: ${db.password}\r\n    url: jdbc:abc://${db.host}:${db.port}/${db.schema}\r\n```\r\n\r\n```ActuatorSecurityTest.Java```\r\n\r\n```\r\n@ExtendWith(SpringExtension.class)\r\n@SpringBootTest(webEnvironment = RANDOM_PORT)\r\n@Import(ExceptionHandlerConfiguration.class)\r\n@AutoConfigureWebTestClient(timeout = &quot;30000&quot;)\r\nclass ActuatorsSecurityTest {\r\n    @Autowired\r\n    private WebTestClient webClient;\r\n\r\n    /***********************************************************************************************\r\n     * ENDPOINTS: Actuator\r\n     ***********************************************************************************************/\r\n\r\n    @Test\r\n    void should_allowActuatorInfoEndpoint_withoutAuthentication() {\r\n        webClient.get().uri(&quot;/actuator/info&quot;).exchange().expectStatus().is2xxSuccessful();\r\n    }\r\n\r\n    @Test\r\n    void should_notAllowSensitiveActuatorEndpoints_withInValidAuthentication() {\r\n        webClient.get().uri(&quot;/actuator/env&quot;).header(&quot;Authorization&quot;, &quot;Basic xxx&quot;).exchange().expectStatus().is4xxClientError();\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.cloudfoundry.org/credhub/","title":"Spring Boot Actuators and CORS Configuration test failing because DB Props are not provided","body":"<p>My Spring Boot application is configured with a Datasource and I have implemented CORS Configs and HttpSecurity .antMatchers for authorizing request.</p>\n<p>The application seemed to have been working fine - i.e building and testing and launching when I put plain text db passwords in the props file.</p>\n<p>Ever since I moved the creds into a <a href=\"https://docs.cloudfoundry.org/credhub/\" rel=\"nofollow noreferrer\">CREDHUB</a> service - the builds fail locally (<code>I remediated that by adding a test active profile in my gradle file which uses an uncommited props file - which actually has the plain text db user and pwd</code>) which uses  on Jenkins because the actuator and CORS tests started failing, as Jenkins is not configured to access CREDHUB.</p>\n<p>So, my question is:</p>\n<p>With this setup, the test seems to bring up the whole application, thus trying to connect to a running database - whose credentials are unavailable locally.\nThe test won't start properly because the datasource properties prefixed with db are not provided.\nHow can I start this test without bringing up the database connection?</p>\n<p><code>app.yml </code></p>\n<pre><code>spring:\n  datasource:\n    driver-class-name: org.abc.jdbc.Driver\n    username: ${db.username}\n    password: ${db.password}\n    url: jdbc:abc://${db.host}:${db.port}/${db.schema}\n</code></pre>\n<p><code>ActuatorSecurityTest.Java</code></p>\n<pre><code>@ExtendWith(SpringExtension.class)\n@SpringBootTest(webEnvironment = RANDOM_PORT)\n@Import(ExceptionHandlerConfiguration.class)\n@AutoConfigureWebTestClient(timeout = &quot;30000&quot;)\nclass ActuatorsSecurityTest {\n    @Autowired\n    private WebTestClient webClient;\n\n    /***********************************************************************************************\n     * ENDPOINTS: Actuator\n     ***********************************************************************************************/\n\n    @Test\n    void should_allowActuatorInfoEndpoint_withoutAuthentication() {\n        webClient.get().uri(&quot;/actuator/info&quot;).exchange().expectStatus().is2xxSuccessful();\n    }\n\n    @Test\n    void should_notAllowSensitiveActuatorEndpoints_withInValidAuthentication() {\n        webClient.get().uri(&quot;/actuator/env&quot;).header(&quot;Authorization&quot;, &quot;Basic xxx&quot;).exchange().expectStatus().is4xxClientError();\n    }\n}\n</code></pre>\n"},{"tags":["java","sql","database","random","h2"],"comments":[{"owner":{"account_id":161745,"reputation":49245,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"score":1,"creation_date":1358167129,"post_id":14316500,"comment_id":19894599,"body_markdown":"H2 does support row ids (`select _rowid_ from sample`, same as SQLite). But using the ID column works with all databases, so this is the preferred solution.","body":"H2 does support row ids (<code>select _rowid_ from sample</code>, same as SQLite). But using the ID column works with all databases, so this is the preferred solution."}],"answers":[{"tags":[],"owner":{"account_id":67756,"reputation":5083,"user_id":198087,"accept_rate":70,"display_name":"Archer"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1358158846,"creation_date":1358158846,"answer_id":14316597,"question_id":14316500,"body_markdown":"You should use column `id` instead of `rowid`. Column `id` exists in your table and is `auto_increment`.","title":"Selecting random rows from a big table in H2 database","body":"<p>You should use column <code>id</code> instead of <code>rowid</code>. Column <code>id</code> exists in your table and is <code>auto_increment</code>.</p>\n"},{"tags":[],"owner":{"account_id":161745,"reputation":49245,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1358168135,"creation_date":1358168135,"answer_id":14318824,"question_id":14316500,"body_markdown":"The following script selects every nth row quite efficiently. It assumes there are no gaps in the ids. If gaps are possible, then you might want to increase the range(1, 100) to range(1, 200) or so. To get random rows, the formula at the very end would need to be changed a bit:\r\n\r\n    drop table test;\r\n\r\n    create table test(\r\n      id bigint auto_increment primary key, \r\n      name varchar(255));\r\n\r\n    insert into test \r\n    select x, &#39;Hello &#39; || x from system_range(50, 1200);\r\n\r\n    select * from test t, system_range(1, 100) range\r\n    where t.id = x * (select max(id)-min(id) from test) / 100 + \r\n    (select min(id) from test);\r\n","title":"Selecting random rows from a big table in H2 database","body":"<p>The following script selects every nth row quite efficiently. It assumes there are no gaps in the ids. If gaps are possible, then you might want to increase the range(1, 100) to range(1, 200) or so. To get random rows, the formula at the very end would need to be changed a bit:</p>\n\n<pre><code>drop table test;\n\ncreate table test(\n  id bigint auto_increment primary key, \n  name varchar(255));\n\ninsert into test \nselect x, 'Hello ' || x from system_range(50, 1200);\n\nselect * from test t, system_range(1, 100) range\nwhere t.id = x * (select max(id)-min(id) from test) / 100 + \n(select min(id) from test);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7442150,"reputation":1,"user_id":5659595,"display_name":"Aviral Sawani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1449670601,"creation_date":1449670601,"answer_id":34181025,"question_id":14316500,"body_markdown":"You can Rank your table and select Random 50 ranks out of it, avoid sorting or grouping in any way to keep it optimized.","title":"Selecting random rows from a big table in H2 database","body":"<p>You can Rank your table and select Random 50 ranks out of it, avoid sorting or grouping in any way to keep it optimized.</p>\n"},{"tags":[],"owner":{"account_id":9002055,"reputation":1145,"user_id":6710305,"display_name":"M T Head"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1499808161,"creation_date":1499807565,"answer_id":45044546,"question_id":14316500,"body_markdown":"What I do for this is create a temp table.  Generate random numbers from 1 to greatest identity value in the table.  Then select from the table where their identity value is in the temp table.\r\n\r\n&quot;Single query way of doing this&quot;\r\n\r\nCreate temp table (I don&#39;t know the h2 syntax for this but it supports temp tables with a field name of DesiredIdentity)\r\n\r\nSelect max identity value from the table.\r\n\r\nLoop through with the rand command to insert random numbers into a temp table from 1 to the number of random rows you want.  Set the range for random from 1 to max row count.  Insure the same random number is not selected.\r\n\r\nThen select from the table where the identity value is in the identity temp table.\r\n","title":"Selecting random rows from a big table in H2 database","body":"<p>What I do for this is create a temp table.  Generate random numbers from 1 to greatest identity value in the table.  Then select from the table where their identity value is in the temp table.</p>\n\n<p>\"Single query way of doing this\"</p>\n\n<p>Create temp table (I don't know the h2 syntax for this but it supports temp tables with a field name of DesiredIdentity)</p>\n\n<p>Select max identity value from the table.</p>\n\n<p>Loop through with the rand command to insert random numbers into a temp table from 1 to the number of random rows you want.  Set the range for random from 1 to max row count.  Insure the same random number is not selected.</p>\n\n<p>Then select from the table where the identity value is in the identity temp table.</p>\n"},{"tags":[],"owner":{"account_id":27785438,"reputation":1,"user_id":21212995,"display_name":"yelgazin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676665594,"creation_date":1676391582,"answer_id":75450574,"question_id":14316500,"body_markdown":"I use following approach:\r\n\r\n 1. `SELECT COUNT(*) FROM TABLE1...` then calculate **random value** from 1 to\r\n    `COUNT` (inclusive). \r\n \r\n 2. `SELECT * \r\n    FROM (SELECT ROWNUM() AS NUM, ID AS ID FROM TABLE1) AS T1 WHERE T1.NUM =` **random value**","title":"Selecting random rows from a big table in H2 database","body":"<p>I use following approach:</p>\n<ol>\n<li><p><code>SELECT COUNT(*) FROM TABLE1...</code> then calculate <strong>random value</strong> from 1 to\n<code>COUNT</code> (inclusive).</p>\n</li>\n<li><p><code>SELECT *  FROM (SELECT ROWNUM() AS NUM, ID AS ID FROM TABLE1) AS T1 WHERE T1.NUM =</code> <strong>random value</strong></p>\n</li>\n</ol>\n"}],"owner":{"account_id":94649,"reputation":8697,"user_id":258289,"accept_rate":95,"display_name":"Luigi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3844,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":14318824,"answer_count":5,"score":2,"last_activity_date":1676665594,"creation_date":1358158512,"question_id":14316500,"body_markdown":"I have a big table in my database (potentially millions of records) and I need to select #X random rows (let&#39;s say #X between 10 and 50) , but I need this query to be as optimal as possible.\r\n\r\nThe table looks like this:\r\n\r\n    CREATE TABLE sample (\r\n        id bigint auto_increment PRIMARY KEY,\r\n        user_id bigint NOT NULL,\r\n        screen_name VARCHAR NOT NULL,\r\n        ...\r\n    );\r\n\r\nI&#39;ve searched around and I found answers like this:\r\n\r\n    SELECT * FROM sample ORDER BY RAND() limit X.\r\n\r\nBut It looks to me that this will fetch the full table then sort it, isn&#39;t it?\r\n\r\nI think it would be best to generate 10 or 50 random integers and do a `select * from sample where rowid in (&lt;random integer list&gt;)`. But afaik, rowid concept is missing in H2, so I may opt for using the ID column in my table. \r\n\r\nIt would be awesome if I can do this task with a single SQL query.\r\n\r\nAny better advice?","title":"Selecting random rows from a big table in H2 database","body":"<p>I have a big table in my database (potentially millions of records) and I need to select #X random rows (let's say #X between 10 and 50) , but I need this query to be as optimal as possible.</p>\n\n<p>The table looks like this:</p>\n\n<pre><code>CREATE TABLE sample (\n    id bigint auto_increment PRIMARY KEY,\n    user_id bigint NOT NULL,\n    screen_name VARCHAR NOT NULL,\n    ...\n);\n</code></pre>\n\n<p>I've searched around and I found answers like this:</p>\n\n<pre><code>SELECT * FROM sample ORDER BY RAND() limit X.\n</code></pre>\n\n<p>But It looks to me that this will fetch the full table then sort it, isn't it?</p>\n\n<p>I think it would be best to generate 10 or 50 random integers and do a <code>select * from sample where rowid in (&lt;random integer list&gt;)</code>. But afaik, rowid concept is missing in H2, so I may opt for using the ID column in my table. </p>\n\n<p>It would be awesome if I can do this task with a single SQL query.</p>\n\n<p>Any better advice?</p>\n"},{"tags":["java","android","android-package-managers","android-12"],"answers":[{"tags":[],"owner":{"account_id":27250627,"reputation":1,"user_id":20775159,"display_name":"Max Devtec"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676665328,"creation_date":1676665328,"answer_id":75488946,"question_id":72689812,"body_markdown":"I suggest you try adding QUERY_ALL_PACKAGES permission to manifest.\r\nThis issue might be related to packagemanager changes in newer android versions for privacy improvements. Im onto a similar issue for quite a while.","title":"Android PackageManager getChangedPackages - Android 12","body":"<p>I suggest you try adding QUERY_ALL_PACKAGES permission to manifest.\nThis issue might be related to packagemanager changes in newer android versions for privacy improvements. Im onto a similar issue for quite a while.</p>\n"}],"owner":{"account_id":11493879,"reputation":11,"user_id":8423874,"display_name":"S_B_S"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":541,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1676665328,"creation_date":1655740533,"question_id":72689812,"body_markdown":"We are trying to get a list of all updated packages using Android Package Manager [getChangedPackages](https://developer.android.google.cn/reference/android/content/pm/PackageManager#getChangedPackages(int)) function. \r\n\r\nThis is the code we use:\r\n\r\n```\r\nimport android.content.pm.PackageManager;\r\nimport android.content.pm.ChangedPackages;\r\nPackageManager pm;\r\npm = getApplicationContext().getPackageManager();\r\nChangedPackages changedPackages = pm.getChangedPackages(0);\r\n```\r\nThis code works well on Android 10 &amp; 11 and is detecting installed / updated / deleted packages.\r\n\r\nHowever, the same code detects **only** deleted packages when running on Android 12 devices. We&#39;ve installed some applications and those were not detected at all by the getChangedPackages application. Only after deleting the applications then the package names appeared in the list of changed packages returned from function. \r\n\r\nWe&#39;ve also tried to use `changedPackages.getSequenceNumber();` or even `Settings.Global.getInt(getApplicationContext().getContentResolver(), Settings.Global.BOOT_COUNT);` as the *from* parameter sent to getChangedPackages but with no success. \r\n\r\nWe couldn&#39;t find any documented changes that can explain this behavioral change.\r\n[Android12 changes](https://developer.android.com/about/versions/12/behavior-changes-12)\r\n\r\nHave you experienced similar thing or have any idea how it can be solved? \r\nWe will appreciate every piece of data or advice.\r\n\r\nThank you!","title":"Android PackageManager getChangedPackages - Android 12","body":"<p>We are trying to get a list of all updated packages using Android Package Manager <a href=\"https://developer.android.google.cn/reference/android/content/pm/PackageManager#getChangedPackages(int)\" rel=\"nofollow noreferrer\">getChangedPackages</a> function.</p>\n<p>This is the code we use:</p>\n<pre><code>import android.content.pm.PackageManager;\nimport android.content.pm.ChangedPackages;\nPackageManager pm;\npm = getApplicationContext().getPackageManager();\nChangedPackages changedPackages = pm.getChangedPackages(0);\n</code></pre>\n<p>This code works well on Android 10 &amp; 11 and is detecting installed / updated / deleted packages.</p>\n<p>However, the same code detects <strong>only</strong> deleted packages when running on Android 12 devices. We've installed some applications and those were not detected at all by the getChangedPackages application. Only after deleting the applications then the package names appeared in the list of changed packages returned from function.</p>\n<p>We've also tried to use <code>changedPackages.getSequenceNumber();</code> or even <code>Settings.Global.getInt(getApplicationContext().getContentResolver(), Settings.Global.BOOT_COUNT);</code> as the <em>from</em> parameter sent to getChangedPackages but with no success.</p>\n<p>We couldn't find any documented changes that can explain this behavioral change.\n<a href=\"https://developer.android.com/about/versions/12/behavior-changes-12\" rel=\"nofollow noreferrer\">Android12 changes</a></p>\n<p>Have you experienced similar thing or have any idea how it can be solved?\nWe will appreciate every piece of data or advice.</p>\n<p>Thank you!</p>\n"},{"tags":["java","hashmap","java-stream","grouping","collectors"],"comments":[{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1553151141,"post_id":55275129,"comment_id":97280519,"body_markdown":"Use concrete objects! Another way, try and share the type of your output and look at the complexity driven there.","body":"Use concrete objects! Another way, try and share the type of your output and look at the complexity driven there."},{"owner":{"account_id":15452950,"reputation":4661,"user_id":11147851,"display_name":"Pavel Smirnov"},"score":0,"creation_date":1553151472,"post_id":55275129,"comment_id":97280624,"body_markdown":"Could you use nested Maps? Map&lt;String, Map&lt;String, Map&lt;String, String&gt;&gt;&gt; where the first Map&#39;s key is a country, second Map&#39;s is a company and the last one stores models?","body":"Could you use nested Maps? Map&lt;String, Map&lt;String, Map&lt;String, String&gt;&gt;&gt; where the first Map&#39;s key is a country, second Map&#39;s is a company and the last one stores models?"},{"owner":{"account_id":314561,"reputation":6333,"user_id":629804,"accept_rate":70,"display_name":"Pradeep"},"score":0,"creation_date":1553151548,"post_id":55275129,"comment_id":97280651,"body_markdown":"yeah I can,  Can I derive it based on the nature of keys automatically, the nesting will increase based on number of grouping keys,  I can&#39;t  assume it&#39;s just two levels of nesting","body":"yeah I can,  Can I derive it based on the nature of keys automatically, the nesting will increase based on number of grouping keys,  I can&#39;t  assume it&#39;s just two levels of nesting"},{"owner":{"account_id":314561,"reputation":6333,"user_id":629804,"accept_rate":70,"display_name":"Pradeep"},"score":0,"creation_date":1553151651,"post_id":55275129,"comment_id":97280683,"body_markdown":"@Naman,  the input is of type Map&lt;String, String&gt; , I can not make assumptions about data, creating concrete class would require me to specify field names?","body":"@Naman,  the input is of type Map&lt;String, String&gt; , I can not make assumptions about data, creating concrete class would require me to specify field names?"}],"answers":[{"comments":[{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":1,"creation_date":1553151980,"post_id":55275307,"comment_id":97280813,"body_markdown":"Poor naming convention! Agreed, yet it&#39;s more about portraying the approach here.","body":"Poor naming convention! Agreed, yet it&#39;s more about portraying the approach here."},{"owner":{"account_id":314561,"reputation":6333,"user_id":629804,"accept_rate":70,"display_name":"Pradeep"},"score":0,"creation_date":1553152082,"post_id":55275307,"comment_id":97280852,"body_markdown":"Are you saying from given input of  Map&lt;String,String&gt; --&gt; derive class ThrowAway ? \n\nThe input will change, we can&#39;t map everything to ThrowAway ?","body":"Are you saying from given input of  Map&lt;String,String&gt; --&gt; derive class ThrowAway ?   The input will change, we can&#39;t map everything to ThrowAway ?"},{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1553153136,"post_id":55275307,"comment_id":97281222,"body_markdown":"@Pradeep What I am trying to convey is that there are certain guarantees assumed as per the question itself. For e.g. is it possible to have the input in the form `[\n {\n    &#39;a&#39;: &#39;German&#39;,\n    &#39;b&#39;: &#39;Audi&#39;,\n    &#39;e&#39;: &#39;T3&#39;\n },\n {\n    &#39;a&#39;: &#39;German&#39;,\n    &#39;b&#39;: &#39;BMW&#39;,\n    &#39;c&#39;: &#39;T6&#39;\n },\n {\n    &#39;d&#39;: &#39;American&#39;,\n    &#39;e&#39;: &#39;Tesla&#39;,\n    &#39;f&#39;: &#39;T6&#39;\n }\n]` and then what do you expect the output to be? There has to be some kind of contracts to determine the keys to group with at least.","body":"@Pradeep What I am trying to convey is that there are certain guarantees assumed as per the question itself. For e.g. is it possible to have the input in the form <code>[  {     &#39;a&#39;: &#39;German&#39;,     &#39;b&#39;: &#39;Audi&#39;,     &#39;e&#39;: &#39;T3&#39;  },  {     &#39;a&#39;: &#39;German&#39;,     &#39;b&#39;: &#39;BMW&#39;,     &#39;c&#39;: &#39;T6&#39;  },  {     &#39;d&#39;: &#39;American&#39;,     &#39;e&#39;: &#39;Tesla&#39;,     &#39;f&#39;: &#39;T6&#39;  } ]</code> and then what do you expect the output to be? There has to be some kind of contracts to determine the keys to group with at least."},{"owner":{"account_id":314561,"reputation":6333,"user_id":629804,"accept_rate":70,"display_name":"Pradeep"},"score":0,"creation_date":1553153912,"post_id":55275307,"comment_id":97281511,"body_markdown":"we can not assume input form but I can ask caller to preregister the grouping keys, the output is always nested based on the grouping keys","body":"we can not assume input form but I can ask caller to preregister the grouping keys, the output is always nested based on the grouping keys"},{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1553154026,"post_id":55275307,"comment_id":97281560,"body_markdown":"@Pradeep and preregistering the keys is defining a concrete object in my understanding. Also, seems like you&#39;re ignoring the kind of role inheritance can play in here.","body":"@Pradeep and preregistering the keys is defining a concrete object in my understanding. Also, seems like you&#39;re ignoring the kind of role inheritance can play in here."},{"owner":{"account_id":314561,"reputation":6333,"user_id":629804,"accept_rate":70,"display_name":"Pradeep"},"score":0,"creation_date":1553155426,"post_id":55275307,"comment_id":97282108,"body_markdown":"so System A is running somewhere, System B is running somewhere, we get these grouping keys at runtime,  by registering means we store somewhere in storage that the keys a and b will be required from grouping, keys can change at runtime","body":"so System A is running somewhere, System B is running somewhere, we get these grouping keys at runtime,  by registering means we store somewhere in storage that the keys a and b will be required from grouping, keys can change at runtime"}],"tags":[],"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1553151946,"creation_date":1553151946,"answer_id":55275307,"question_id":55275129,"body_markdown":"Just to double click on the representation of the input as concrete class. It would look much simpler and clean as :\r\n\r\n    Map&lt;String, Map&lt;String, List&lt;ThrowAway&gt;&gt;&gt; multipleGrouping(List&lt;ThrowAway&gt; inputData) {\r\n        return inputData.stream()\r\n                .collect(Collectors.groupingBy(ThrowAway::getA,\r\n                        Collectors.groupingBy(ThrowAway::getB)));\r\n    }\r\n\r\n\r\nwhere I just created a sample class same as your map representation:\r\n\r\n\r\n    class ThrowAway {\r\n        String a;\r\n        String b;\r\n        String c;\r\n\r\n        String getA() {\r\n            return a;\r\n        }\r\n\r\n        String getB() {\r\n            return b;\r\n        }\r\n    }","title":"Group List of Map Data into Nested HashMap in Java","body":"<p>Just to double click on the representation of the input as concrete class. It would look much simpler and clean as :</p>\n\n<pre><code>Map&lt;String, Map&lt;String, List&lt;ThrowAway&gt;&gt;&gt; multipleGrouping(List&lt;ThrowAway&gt; inputData) {\n    return inputData.stream()\n            .collect(Collectors.groupingBy(ThrowAway::getA,\n                    Collectors.groupingBy(ThrowAway::getB)));\n}\n</code></pre>\n\n<p>where I just created a sample class same as your map representation:</p>\n\n<pre><code>class ThrowAway {\n    String a;\n    String b;\n    String c;\n\n    String getA() {\n        return a;\n    }\n\n    String getB() {\n        return b;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13389989,"reputation":10689,"user_id":9662601,"display_name":"Samuel Philipp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553388563,"creation_date":1553388563,"answer_id":55319760,"question_id":55275129,"body_markdown":"Since you are looking for a dynamic solution, here is another approach:\r\n\r\nYou can use the following grouping method to pass two keys for:\r\n\r\n    public Map&lt;String, Map&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt;&gt; group(List&lt;Map&lt;String, String&gt;&gt; list, String key1, String key2) {\r\n        return list.stream().collect(\r\n                Collectors.groupingBy(m -&gt; m.get(key1),\r\n                        Collectors.groupingBy(m -&gt; m.get(key2))\r\n                )\r\n        );\r\n    }\r\n\r\nThe problem here is if the key does not exist in the map you are getting a `NullPointerException`. To prevent this you can use `map.getOrDefault()` with a default key:\r\n\r\n    public Map&lt;String, Map&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt;&gt; group(List&lt;Map&lt;String, String&gt;&gt; list, String key1, String key2, String noneKey) {\r\n        return list.stream().collect(\r\n                Collectors.groupingBy(m -&gt; m.getOrDefault(key1, noneKey),\r\n                        Collectors.groupingBy(m -&gt; m.getOrDefault(key2, noneKey))\r\n                )\r\n        );\r\n    }\r\n\r\nCall one of the methods with the following options:\r\n\r\n    Map&lt;String, Map&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt;&gt; result = group(list, &quot;a&quot;, &quot;b&quot;);\r\n\r\nOr\r\n\r\n    Map&lt;String, Map&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt;&gt; result = group(list, &quot;a&quot;, &quot;b&quot;, &quot;none&quot;);","title":"Group List of Map Data into Nested HashMap in Java","body":"<p>Since you are looking for a dynamic solution, here is another approach:</p>\n\n<p>You can use the following grouping method to pass two keys for:</p>\n\n<pre><code>public Map&lt;String, Map&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt;&gt; group(List&lt;Map&lt;String, String&gt;&gt; list, String key1, String key2) {\n    return list.stream().collect(\n            Collectors.groupingBy(m -&gt; m.get(key1),\n                    Collectors.groupingBy(m -&gt; m.get(key2))\n            )\n    );\n}\n</code></pre>\n\n<p>The problem here is if the key does not exist in the map you are getting a <code>NullPointerException</code>. To prevent this you can use <code>map.getOrDefault()</code> with a default key:</p>\n\n<pre><code>public Map&lt;String, Map&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt;&gt; group(List&lt;Map&lt;String, String&gt;&gt; list, String key1, String key2, String noneKey) {\n    return list.stream().collect(\n            Collectors.groupingBy(m -&gt; m.getOrDefault(key1, noneKey),\n                    Collectors.groupingBy(m -&gt; m.getOrDefault(key2, noneKey))\n            )\n    );\n}\n</code></pre>\n\n<p>Call one of the methods with the following options:</p>\n\n<pre><code>Map&lt;String, Map&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt;&gt; result = group(list, \"a\", \"b\");\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>Map&lt;String, Map&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt;&gt; result = group(list, \"a\", \"b\", \"none\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676665045,"creation_date":1676665045,"answer_id":75488892,"question_id":55275129,"body_markdown":"You can use JSON library such as _Josson_ to do the transformation.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n    Josson josson = Josson.fromJsonString(\r\n        &quot;[&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;        \\&quot;a\\&quot;: \\&quot;German\\&quot;,&quot; +\r\n        &quot;        \\&quot;b\\&quot;: \\&quot;Audi\\&quot;,&quot; +\r\n        &quot;        \\&quot;e\\&quot;: \\&quot;T3\\&quot;&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;        \\&quot;a\\&quot;: \\&quot;German\\&quot;,&quot; +\r\n        &quot;        \\&quot;b\\&quot;: \\&quot;BMW\\&quot;,&quot; +\r\n        &quot;        \\&quot;c\\&quot;: \\&quot;T6\\&quot;&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;        \\&quot;a\\&quot;: \\&quot;American\\&quot;,&quot; +\r\n        &quot;        \\&quot;b\\&quot;: \\&quot;Tesla\\&quot;,&quot; +\r\n        &quot;        \\&quot;c\\&quot;: \\&quot;T6\\&quot;&quot; +\r\n        &quot;    }&quot; +\r\n        &quot;]&quot;);\r\n    JsonNode node = josson.getNode(\r\n        &quot;group(a).map(a::elements.group(b).map(b::elements).mergeObjects()).mergeObjects()&quot;);\r\n    System.out.println(node.toPrettyString());\r\n\r\n__Output__\r\n        \r\n    {\r\n      &quot;German&quot; : {\r\n        &quot;Audi&quot; : [ {\r\n          &quot;a&quot; : &quot;German&quot;,\r\n          &quot;b&quot; : &quot;Audi&quot;,\r\n          &quot;e&quot; : &quot;T3&quot;\r\n        } ],\r\n        &quot;BMW&quot; : [ {\r\n          &quot;a&quot; : &quot;German&quot;,\r\n          &quot;b&quot; : &quot;BMW&quot;,\r\n          &quot;c&quot; : &quot;T6&quot;\r\n        } ]\r\n      },\r\n      &quot;American&quot; : {\r\n        &quot;Tesla&quot; : [ {\r\n          &quot;a&quot; : &quot;American&quot;,\r\n          &quot;b&quot; : &quot;Tesla&quot;,\r\n          &quot;c&quot; : &quot;T6&quot;\r\n        } ]\r\n      }\r\n    }","title":"Group List of Map Data into Nested HashMap in Java","body":"<p>You can use JSON library such as <em>Josson</em> to do the transformation.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<pre><code>Josson josson = Josson.fromJsonString(\n    &quot;[&quot; +\n    &quot;    {&quot; +\n    &quot;        \\&quot;a\\&quot;: \\&quot;German\\&quot;,&quot; +\n    &quot;        \\&quot;b\\&quot;: \\&quot;Audi\\&quot;,&quot; +\n    &quot;        \\&quot;e\\&quot;: \\&quot;T3\\&quot;&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;        \\&quot;a\\&quot;: \\&quot;German\\&quot;,&quot; +\n    &quot;        \\&quot;b\\&quot;: \\&quot;BMW\\&quot;,&quot; +\n    &quot;        \\&quot;c\\&quot;: \\&quot;T6\\&quot;&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;        \\&quot;a\\&quot;: \\&quot;American\\&quot;,&quot; +\n    &quot;        \\&quot;b\\&quot;: \\&quot;Tesla\\&quot;,&quot; +\n    &quot;        \\&quot;c\\&quot;: \\&quot;T6\\&quot;&quot; +\n    &quot;    }&quot; +\n    &quot;]&quot;);\nJsonNode node = josson.getNode(\n    &quot;group(a).map(a::elements.group(b).map(b::elements).mergeObjects()).mergeObjects()&quot;);\nSystem.out.println(node.toPrettyString());\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>{\n  &quot;German&quot; : {\n    &quot;Audi&quot; : [ {\n      &quot;a&quot; : &quot;German&quot;,\n      &quot;b&quot; : &quot;Audi&quot;,\n      &quot;e&quot; : &quot;T3&quot;\n    } ],\n    &quot;BMW&quot; : [ {\n      &quot;a&quot; : &quot;German&quot;,\n      &quot;b&quot; : &quot;BMW&quot;,\n      &quot;c&quot; : &quot;T6&quot;\n    } ]\n  },\n  &quot;American&quot; : {\n    &quot;Tesla&quot; : [ {\n      &quot;a&quot; : &quot;American&quot;,\n      &quot;b&quot; : &quot;Tesla&quot;,\n      &quot;c&quot; : &quot;T6&quot;\n    } ]\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":314561,"reputation":6333,"user_id":629804,"accept_rate":70,"display_name":"Pradeep"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":812,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1676665045,"creation_date":1553150982,"question_id":55275129,"body_markdown":"Input: I have a list of Map (Key - Value pairs) and grouping keys\r\n\r\ne.g.`List&lt;Map&lt;String,String&gt;&gt; inputData` json\r\n\r\n    [\r\n     {\r\n        &#39;a&#39;: &#39;German&#39;,\r\n        &#39;b&#39;: &#39;Audi&#39;,\r\n        &#39;e&#39;: &#39;T3&#39;\r\n     },\r\n     {\r\n        &#39;a&#39;: &#39;German&#39;,\r\n        &#39;b&#39;: &#39;BMW&#39;,\r\n        &#39;c&#39;: &#39;T6&#39;\r\n     },\r\n     {\r\n        &#39;a&#39;: &#39;American&#39;,\r\n        &#39;b&#39;: &#39;Tesla&#39;,\r\n        &#39;c&#39;: &#39;T6&#39;\r\n     }\r\n    ]\r\n\r\nand groupingKeys= `a and b`\r\n\r\nFor Grouping key a -&gt; I will create two buckets, one for German and other American and in each bucket I will again create bucket for value of b, check following\r\n\r\nI want to produce following:  `Map&lt;String, Map&lt;String, List&lt;Map&gt;&gt;` - the nesting of maps  == number of grouping keys, here it&#39;s 2\r\n\r\n\r\n    {\r\n       German: {\r\n           Audi: [\r\n                {\r\n                   &#39;a&#39;: &#39;German&#39;,\r\n                   &#39;b&#39;: &#39;Audi&#39;,\r\n                   &#39;e&#39;: &#39;T3&#39;\r\n                }\r\n           ],\r\n           BMW: [\r\n                {\r\n                   &#39;a&#39;: &#39;German&#39;,\r\n                   &#39;b&#39;: &#39;BMW&#39;,\r\n                   &#39;c&#39;: &#39;T6&#39;\r\n                }\r\n           ]\r\n       },\r\n       American: {\r\n          Tesla: [\r\n              {\r\n                &#39;a&#39;: &#39;American&#39;,\r\n                &#39;b&#39;: &#39;Tesla&#39;,\r\n                &#39;c&#39;: &#39;T6&#39;\r\n              }\r\n          ]\r\n       }\r\n    }\r\n\r\nThings I tried:\r\n\r\n    inputData.stream().collect(Collectors.groupingBy(mapItem -&gt; this.constructGroupingKey(groupingKeys, mapItem)));\r\n\r\n    //constructGroupingKey - this joins the values of of given grouping keys\r\n\r\nThis way I can construct concatenated key e.g German-Audi OR German-BMW  and save the matching item against it but it&#39;s not what I want exactly.\r\n\r\nAs @Naman said here about concrete class - following makes it one liner but I can&#39;t make assumptions about data, it&#39;s of type Map&lt;String,String&gt;\r\n\r\n```Map&lt;String, Map&lt;String, List&lt;ConcreteClass&gt;&gt;&gt; output = inputData.stream().collect(Collectors.groupingBy(ConcreteClass::getCountry, Collectors.groupingBy(ConcreteClass::getCarType)));```\r\n\r\n\r\nWould appreciate other ideas, thanks. I am also curious if I can derive grouping based on given data without specification of grouping keys.\r\n\r\nInput is of dynamic nature, key and value are defined by the input","title":"Group List of Map Data into Nested HashMap in Java","body":"<p>Input: I have a list of Map (Key - Value pairs) and grouping keys</p>\n\n<p>e.g.<code>List&lt;Map&lt;String,String&gt;&gt; inputData</code> json</p>\n\n<pre><code>[\n {\n    'a': 'German',\n    'b': 'Audi',\n    'e': 'T3'\n },\n {\n    'a': 'German',\n    'b': 'BMW',\n    'c': 'T6'\n },\n {\n    'a': 'American',\n    'b': 'Tesla',\n    'c': 'T6'\n }\n]\n</code></pre>\n\n<p>and groupingKeys= <code>a and b</code></p>\n\n<p>For Grouping key a -> I will create two buckets, one for German and other American and in each bucket I will again create bucket for value of b, check following</p>\n\n<p>I want to produce following:  <code>Map&lt;String, Map&lt;String, List&lt;Map&gt;&gt;</code> - the nesting of maps  == number of grouping keys, here it's 2</p>\n\n<pre><code>{\n   German: {\n       Audi: [\n            {\n               'a': 'German',\n               'b': 'Audi',\n               'e': 'T3'\n            }\n       ],\n       BMW: [\n            {\n               'a': 'German',\n               'b': 'BMW',\n               'c': 'T6'\n            }\n       ]\n   },\n   American: {\n      Tesla: [\n          {\n            'a': 'American',\n            'b': 'Tesla',\n            'c': 'T6'\n          }\n      ]\n   }\n}\n</code></pre>\n\n<p>Things I tried:</p>\n\n<pre><code>inputData.stream().collect(Collectors.groupingBy(mapItem -&gt; this.constructGroupingKey(groupingKeys, mapItem)));\n\n//constructGroupingKey - this joins the values of of given grouping keys\n</code></pre>\n\n<p>This way I can construct concatenated key e.g German-Audi OR German-BMW  and save the matching item against it but it's not what I want exactly.</p>\n\n<p>As @Naman said here about concrete class - following makes it one liner but I can't make assumptions about data, it's of type Map</p>\n\n<p><code>Map&lt;String, Map&lt;String, List&lt;ConcreteClass&gt;&gt;&gt; output = inputData.stream().collect(Collectors.groupingBy(ConcreteClass::getCountry, Collectors.groupingBy(ConcreteClass::getCarType)));</code></p>\n\n<p>Would appreciate other ideas, thanks. I am also curious if I can derive grouping based on given data without specification of grouping keys.</p>\n\n<p>Input is of dynamic nature, key and value are defined by the input</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9584,"page":639,"page_size":100}
