{"items":[{"tags":["java","awt"],"answers":[{"tags":[],"owner":{"account_id":6309043,"reputation":1,"user_id":8618440,"display_name":"apppelll"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1505556616,"creation_date":1505556616,"answer_id":46252699,"question_id":46252556,"body_markdown":"Try it with that little code:\r\n\r\n    this.addWindowListener(new WindowAdapter() {\r\n            \r\n            public void windowClosing(WindowEvent evt) {\r\n                System.exit(0);\r\n            }\r\n            \r\n    }); \r\n\r\nYou have to insert it in &quot;App()&quot;. It will close the program &quot;System.exit(0);&quot;\r\nwhen you press the close button.","title":"Close Java Frame by clicking X button","body":"<p>Try it with that little code:</p>\n\n<pre><code>this.addWindowListener(new WindowAdapter() {\n\n        public void windowClosing(WindowEvent evt) {\n            System.exit(0);\n        }\n\n}); \n</code></pre>\n\n<p>You have to insert it in \"App()\". It will close the program \"System.exit(0);\"\nwhen you press the close button.</p>\n"},{"tags":[],"owner":{"account_id":1189417,"reputation":30924,"user_id":1162620,"accept_rate":70,"display_name":"Ravi"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1687810607,"creation_date":1505556627,"answer_id":46252700,"question_id":46252556,"body_markdown":"You need to add Listener and call dispose while initializing your applet. \r\n\r\n    addWindowListener(new WindowAdapter() {\r\n        public void windowClosing(WindowEvent e) {\r\n            dispose();\r\n        }\r\n    });\r\n\r\nYou need to add above line of code inside the constructor.","title":"Close Java Frame by clicking X button","body":"<p>You need to add Listener and call dispose while initializing your applet.</p>\n<pre><code>addWindowListener(new WindowAdapter() {\n    public void windowClosing(WindowEvent e) {\n        dispose();\n    }\n});\n</code></pre>\n<p>You need to add above line of code inside the constructor.</p>\n"},{"tags":[],"owner":{"account_id":9527062,"reputation":50,"user_id":7079986,"accept_rate":50,"display_name":"Ice"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1505556660,"creation_date":1505556660,"answer_id":46252704,"question_id":46252556,"body_markdown":"im not using AWT often but heres my Solution :)\r\n\r\n    addWindowListener(new WindowAdapter(){\r\n        @Override\r\n        public void windowClosing(WindowEvent we){\r\n    \tSystem.exit(0);\r\n        }\r\n    });\r\n\r\n\r\nAdd a new WindowAdapter to your App Constructor and call system.exit(0) on the Window Close Event ","title":"Close Java Frame by clicking X button","body":"<p>im not using AWT often but heres my Solution :)</p>\n\n<pre><code>addWindowListener(new WindowAdapter(){\n    @Override\n    public void windowClosing(WindowEvent we){\n    System.exit(0);\n    }\n});\n</code></pre>\n\n<p>Add a new WindowAdapter to your App Constructor and call system.exit(0) on the Window Close Event </p>\n"},{"tags":[],"owner":{"display_name":"user4668606"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1505557086,"creation_date":1505557086,"answer_id":46252770,"question_id":46252556,"body_markdown":"You can use [WindowContants][1] on [JFrame#setDefaultCloseOperation][2] to achieve the desired action. This allows you to dispose the frame, entirely terminate the application and a few more with a single line in the constructor:\r\n\r\n    this.setDefaultCloseOperation(WindowContants.DISPOSE_ON_CLOSE);\r\n\r\nwill dispose the frame containing the app. This is sufficient to terminate the program you presented.\r\n\r\nThis approach doesn&#39;t allow handling any events though, but simply closes the frame.\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/javax/swing/WindowConstants.html\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/javax/swing/JFrame.html#setDefaultCloseOperation-int-","title":"Close Java Frame by clicking X button","body":"<p>You can use <a href=\"http://docs.oracle.com/javase/8/docs/api/javax/swing/WindowConstants.html\" rel=\"nofollow noreferrer\">WindowContants</a> on <a href=\"http://docs.oracle.com/javase/8/docs/api/javax/swing/JFrame.html#setDefaultCloseOperation-int-\" rel=\"nofollow noreferrer\">JFrame#setDefaultCloseOperation</a> to achieve the desired action. This allows you to dispose the frame, entirely terminate the application and a few more with a single line in the constructor:</p>\n\n<pre><code>this.setDefaultCloseOperation(WindowContants.DISPOSE_ON_CLOSE);\n</code></pre>\n\n<p>will dispose the frame containing the app. This is sufficient to terminate the program you presented.</p>\n\n<p>This approach doesn't allow handling any events though, but simply closes the frame.</p>\n"}],"owner":{"account_id":4446166,"reputation":3,"user_id":3619379,"display_name":"Aritro01"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3789,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":46252700,"answer_count":4,"score":-1,"last_activity_date":1687810607,"creation_date":1505555684,"question_id":46252556,"body_markdown":"Here is a piece of code that I wrote but the close button on the top of the application doesn&#39;t work please help\r\n\r\nCode:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n\r\n    public class App extends Frame implements MouseMotionListener {\r\n    \tApp() {\r\n    \t\taddMouseMotionListener(this);\r\n    \t\tsetSize(200, 200);\r\n    \t\tsetVisible(true);\r\n    \t}\r\n\r\n    \tpublic void mouseDragged(MouseEvent e) {\r\n    \t\tGraphics g = getGraphics();\r\n    \t\tg.setColor(Color.RED);\r\n    \t\tg.fillRect(e.getX(),  e.getY(),10, 10);\r\n    \t}\r\n\r\n    \tpublic void mouseMoved(MouseEvent e) {\r\n    \t}\r\n\r\n    \tpublic static void main(String[] args)throws Exception {\r\n    \t\tApp a = new App();\r\n    \t}\r\n\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nImage:\r\n\r\n![Application Screenshot The close button is not working][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MDUci.png","title":"Close Java Frame by clicking X button","body":"<p>Here is a piece of code that I wrote but the close button on the top of the application doesn't work please help</p>\n\n<p>Code:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>import java.awt.*;\r\nimport java.awt.event.*;\r\n\r\npublic class App extends Frame implements MouseMotionListener {\r\n\tApp() {\r\n\t\taddMouseMotionListener(this);\r\n\t\tsetSize(200, 200);\r\n\t\tsetVisible(true);\r\n\t}\r\n\r\n\tpublic void mouseDragged(MouseEvent e) {\r\n\t\tGraphics g = getGraphics();\r\n\t\tg.setColor(Color.RED);\r\n\t\tg.fillRect(e.getX(),  e.getY(),10, 10);\r\n\t}\r\n\r\n\tpublic void mouseMoved(MouseEvent e) {\r\n\t}\r\n\r\n\tpublic static void main(String[] args)throws Exception {\r\n\t\tApp a = new App();\r\n\t}\r\n\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Image:</p>\n\n<p><img src=\"https://i.stack.imgur.com/MDUci.png\" alt=\"Application Screenshot The close button is not working\"></p>\n"},{"tags":["java","multithreading","deprecated"],"comments":[{"owner":{"account_id":8666367,"reputation":9194,"user_id":6486738,"accept_rate":100,"display_name":"Ted Klein Bergman"},"score":0,"creation_date":1675364339,"post_id":75327715,"comment_id":132918752,"body_markdown":"I guess they want you to `join`, as `stop` is quite ambiguous. Maybe `cancel` or `terminate` is a better word? I&#39;m just guessing, but this seems like the terminology is open for interpretation, so they deprecated it to encourage people to use a more descriptive API, but don&#39;t want to remove it completely due to many people already using it.","body":"I guess they want you to <code>join</code>, as <code>stop</code> is quite ambiguous. Maybe <code>cancel</code> or <code>terminate</code> is a better word? I&#39;m just guessing, but this seems like the terminology is open for interpretation, so they deprecated it to encourage people to use a more descriptive API, but don&#39;t want to remove it completely due to many people already using it."},{"owner":{"account_id":1633614,"reputation":7209,"user_id":1507691,"accept_rate":83,"display_name":"Zak"},"score":0,"creation_date":1675364562,"post_id":75327715,"comment_id":132918824,"body_markdown":"My assumption (and that&#39;s all it is) is that older devices that may still be around that use  deprecated code  -- Including older medical devices, and infrastructure that&#39;s been around since the 90&#39;s -- If these devices are still in active use, it&#39;s probably best that developers can just work on them without having to rewrite them ..  Just a thought ..","body":"My assumption (and that&#39;s all it is) is that older devices that may still be around that use  deprecated code  -- Including older medical devices, and infrastructure that&#39;s been around since the 90&#39;s -- If these devices are still in active use, it&#39;s probably best that developers can just work on them without having to rewrite them ..  Just a thought .."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":4,"creation_date":1675367370,"post_id":75327715,"comment_id":132919548,"body_markdown":"@TedKleinBergman, `t.join()` is in no way a substitute for `t.stop()`. It should be obvious that `t.stop()` does something rather drastic to thread `t`, while `t.join()` does absolutely nothing at all to the thread. Also note: `t.stop()` is not deprecated because somebody thought &quot;stop&quot; was a bad name. It is deprecated because of what it does.","body":"@TedKleinBergman, <code>t.join()</code> is in no way a substitute for <code>t.stop()</code>. It should be obvious that <code>t.stop()</code> does something rather drastic to thread <code>t</code>, while <code>t.join()</code> does absolutely nothing at all to the thread. Also note: <code>t.stop()</code> is not deprecated because somebody thought &quot;stop&quot; was a bad name. It is deprecated because of what it does."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1675367827,"post_id":75327715,"comment_id":132919683,"body_markdown":"They only rather recently invented the “for removal” option for deprecated methods and classes. The `stop` method has only been marked so in either Java 18 or 19, so I would not expect it to be removed until either *in* the next LTS version (is that 20?) or perhaps rather *after* it (so in version 21). Nothing I know.","body":"They only rather recently invented the “for removal” option for deprecated methods and classes. The <code>stop</code> method has only been marked so in either Java 18 or 19, so I would not expect it to be removed until either <i>in</i> the next LTS version (is that 20?) or perhaps rather <i>after</i> it (so in version 21). Nothing I know."}],"answers":[{"tags":[],"owner":{"account_id":8197608,"reputation":822,"user_id":6169894,"display_name":"AminM"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675380624,"creation_date":1675380624,"answer_id":75330001,"question_id":75327715,"body_markdown":"Because there could be old code that still executes it. Removing it would cause old code to no longer compile.\r\n\r\nSun and now Oracle have been cautious in terms of removing code that could require recompiles. Though lately they are slowly cleaning these things up. Because as you state, decades have passed, so its time.","title":"Thread.stop() deprecated almost 25 years back but never removed - Why?","body":"<p>Because there could be old code that still executes it. Removing it would cause old code to no longer compile.</p>\n<p>Sun and now Oracle have been cautious in terms of removing code that could require recompiles. Though lately they are slowly cleaning these things up. Because as you state, decades have passed, so its time.</p>\n"}],"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":163,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1687810473,"creation_date":1675363834,"question_id":75327715,"body_markdown":"I could not find any documentation, reference or rationale for this.\r\n\r\n\r\n\r\n&gt; **`Thread.stop()` has been deprecated since 1.2, almost quarter of a century back but has never been removed from JDK**\r\n\r\nWhy?\r\n\r\n        @Deprecated(since=&quot;1.2&quot;, forRemoval=true)\r\n         public final void stop() {","title":"Thread.stop() deprecated almost 25 years back but never removed - Why?","body":"<p>I could not find any documentation, reference or rationale for this.</p>\n<blockquote>\n<p><strong><code>Thread.stop()</code> has been deprecated since 1.2, almost quarter of a century back but has never been removed from JDK</strong></p>\n</blockquote>\n<p>Why?</p>\n<pre><code>    @Deprecated(since=&quot;1.2&quot;, forRemoval=true)\n     public final void stop() {\n</code></pre>\n"},{"tags":["java","c#","oop","design-patterns"],"comments":[{"owner":{"account_id":152519,"reputation":535,"user_id":367111,"accept_rate":83,"display_name":"obivandamme"},"score":0,"creation_date":1686519399,"post_id":76452237,"comment_id":134805779,"body_markdown":"Which code do you not want to change? The code in the factory or somewhere else? The point of the factory should be to make sure it is the only thing that needs to change when you add a new type of button. That is the S in solid. In addition you should be able to add the functionality by only adding a few lines to the factory to get your new button. That is the O in solid. The rest of you code should remain unchanged. And using a primitive like a string as paramater already makes sure that nothing else needs to know about the new button type.","body":"Which code do you not want to change? The code in the factory or somewhere else? The point of the factory should be to make sure it is the only thing that needs to change when you add a new type of button. That is the S in solid. In addition you should be able to add the functionality by only adding a few lines to the factory to get your new button. That is the O in solid. The rest of you code should remain unchanged. And using a primitive like a string as paramater already makes sure that nothing else needs to know about the new button type."},{"owner":{"account_id":17293107,"reputation":55,"user_id":21057359,"display_name":"LightSouls"},"score":0,"creation_date":1686520126,"post_id":76452237,"comment_id":134805846,"body_markdown":"adding a few lines to the factory violates OCP","body":"adding a few lines to the factory violates OCP"},{"owner":{"account_id":1455702,"reputation":15684,"user_id":1371329,"accept_rate":64,"display_name":"jaco0646"},"score":0,"creation_date":1686535256,"post_id":76452237,"comment_id":134806926,"body_markdown":"There are several different Factory design patterns, some of which violate the OCP and some which do not. In particular, the [two patterns](https://stackoverflow.com/a/50786084/1371329) defined in the GoF book do _not_.","body":"There are several different Factory design patterns, some of which violate the OCP and some which do not. In particular, the <a href=\"https://stackoverflow.com/a/50786084/1371329\">two patterns</a> defined in the GoF book do <i>not</i>."},{"owner":{"account_id":17293107,"reputation":55,"user_id":21057359,"display_name":"LightSouls"},"score":0,"creation_date":1686558883,"post_id":76452237,"comment_id":134809521,"body_markdown":"I still don&#39;t get it, how you can i add new type without modifiying existing factory class?","body":"I still don&#39;t get it, how you can i add new type without modifiying existing factory class?"},{"owner":{"account_id":5752896,"reputation":1937,"user_id":4541936,"accept_rate":33,"display_name":"brads3290"},"score":0,"creation_date":1686877327,"post_id":76452237,"comment_id":134862198,"body_markdown":"Why do you think this question belongs under the `c#` and `java` tags? It seems to be a question about OOP and design patterns, and nothing to do with either of those languages specifically.","body":"Why do you think this question belongs under the <code>c#</code> and <code>java</code> tags? It seems to be a question about OOP and design patterns, and nothing to do with either of those languages specifically."},{"owner":{"account_id":17293107,"reputation":55,"user_id":21057359,"display_name":"LightSouls"},"score":0,"creation_date":1686919601,"post_id":76452237,"comment_id":134868427,"body_markdown":"beacuse i am looking for the solution in these languages. not all languages has OOP, interfaces, ...","body":"beacuse i am looking for the solution in these languages. not all languages has OOP, interfaces, ..."}],"answers":[{"comments":[{"owner":{"account_id":17293107,"reputation":55,"user_id":21057359,"display_name":"LightSouls"},"score":0,"creation_date":1687538696,"post_id":76533146,"comment_id":134956230,"body_markdown":"yes it&#39;s correct , my question mainly was about  if statements in configuration or as you said main method.. i thought that configuration could be in factory direclty","body":"yes it&#39;s correct , my question mainly was about  if statements in configuration or as you said main method.. i thought that configuration could be in factory direclty"},{"owner":{"account_id":23218021,"reputation":26,"user_id":17310684,"display_name":"refactorer"},"score":0,"creation_date":1687810040,"post_id":76533146,"comment_id":134985996,"body_markdown":"@LightSouls I added two new samples above. See **EDIT1**","body":"@LightSouls I added two new samples above. See <b>EDIT1</b>"}],"tags":[],"owner":{"account_id":23218021,"reputation":26,"user_id":17310684,"display_name":"refactorer"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687810282,"creation_date":1687445330,"answer_id":76533146,"question_id":76452237,"body_markdown":"The Open/Close Principle does not mean that you must not change the factory code. It requests you to only extend, but not modify the factory&#39;s interface and behavior.\r\n\r\nHowever, implementing [Abstract Factory Pattern][1] like this will come closest to your desire:\r\n\r\n    public interface ButtonFactory {\r\n        Button createButton();\r\n    }\r\n    \r\n    public class IosButtonFactory implements ButtonFactory {\r\n        public Button createButton() {\r\n            return new IosButton();\r\n        }\r\n    }\r\n    \r\n    public class AndroidButtonFactory implements ButtonFactory {\r\n        public Button createButton() {\r\n            return new AndroidButton();\r\n        }\r\n    }\r\nNow. if you have to provide a new button type, you only have to add a new implementation like this:\r\n\r\n    public class WindowsButtonFactory implements ButtonFactory {\r\n        public Button createButton() {\r\n            return new WindowsButton();\r\n        }\r\n    }\r\nThis way, your factory is free of conditional statements.\r\n\r\nConsider that there must be a location, where a condition decides, which of the concrete implementation is used related to the provided `string os`. This can be in your bootstrapper, where you configure your IoC container, or in your main method, as shown in this really neat [sample][2].\r\n\r\nThis way, your Factory is free of conditional statements, as it was your request by your initial question.\r\n\r\n**EDIT1** Concerning @LightSoul &#39;s 1st comment below\r\n\r\nThere are some other designs of the Factory Pattern, however, then, it&#39;s not longer an Abstract Factory, it&#39;s a simple Factory.\r\n\r\nHere, once again, we start with the interface:\r\n\r\n    public interface ButtonFactory {\r\n        Button createButton(String token);\r\n    }\r\n\r\nThe implementation might look something like:\r\n\r\n    public class ButtonFactoryImpl implements ButtonFactory {\r\n        private final Map&lt;String, Supplier&lt;Button&gt;&gt; factoryMethods = new HashMap&lt;&gt;();\r\n    \r\n        public ButtonFactoryImpl() {\r\n            factoryMethods.put(&quot;ios&quot;, this::createIosButton);\r\n            factoryMethods.put(&quot;android&quot;, this::createAndroidButton);\r\n        }\r\n    \r\n        @Override\r\n        public Button createButton(String token) {\r\n            if (factoryMethods.containsKey(token)) {\r\n                return factoryMethods.get(token).get();\r\n            }\r\n    \r\n            throw new IllegalArgumentException(&quot;Token %s not configured&quot;.formatted(token);\r\n        }\r\n    \r\n        private Button createIosButton() {\r\n            return new IosButton();\r\n        }\r\n    \r\n        private Button createAndroidButton() {\r\n            return new AndroidButton();\r\n        }\r\n    }\r\n\r\nRead [this article][3] to learn why token must be a primitive datatype.\r\n\r\nThis design fits to the OpenClosed Principle since you have only to extend, but not modify code, once you introduce the WindowsButton mentioned above.\r\n\r\nIf you like, and need not to consider speed and other drawbacks, you may want to use reflection:\r\n\r\nFirst, create a new annotation:\r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(ElementType.METHOD)\r\n    public @interface Token {\r\n        public String value();\r\n    }\r\n\r\nThen our factory might look like this:\r\n\r\n    public class ButtonFactoryImpl implements ButtonFactory {\r\n    \r\n        @Override\r\n        public Button createButton(String token) {\r\n            for(Method method : getType().getDeclaredMethods()) {\r\n                Annotation annotation = method.getDeclaredAnnotation(Token.class);\r\n                if (annotation instanceof Token t &amp;&amp; t.value().equals(token)) {\r\n                   method.setAccessible(true);\r\n                   Button button = (Button) method.invoke(this, null);\r\n                   method.setAccessible(false)\r\n                   return button;\r\n                }\r\n            }\r\n    \r\n            throw new IllegalArgumentException(&quot;Token %s not configured&quot;.formatted(token);\r\n        }\r\n        \r\n    \r\n        @Token(&quot;ios&quot;)\r\n        private Button createIosButton() {\r\n            return new IosButton();\r\n        }\r\n    \r\n        @Token(&quot;android&quot;)\r\n        private Button createAndroidButton() {\r\n            return new AndroidButton();\r\n        }\r\n    }\r\n\r\nNow, you don&#39;t longer have a need to adjust any dispatch code, like switch/if or Map initializing, if you have to extend the factory with a new private method for the @Token(&quot;windows&quot;). But, as mentioned above, reflection has some serious impacts to consider. Take care and good luck.\r\n\r\n(Disclaimer: the code above is not tested and might require some small changes to run. It does not contain error handling for easy readability and understandability.)\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Abstract_factory_pattern\r\n  [2]: https://refactoring.guru/design-patterns/abstract-factory\r\n  [3]: https://blog.cleancoder.com/uncle-bob/2021/03/06/ifElseSwitch.html","title":"How to avoid conditional statements in Factory?","body":"<p>The Open/Close Principle does not mean that you must not change the factory code. It requests you to only extend, but not modify the factory's interface and behavior.</p>\n<p>However, implementing <a href=\"https://en.wikipedia.org/wiki/Abstract_factory_pattern\" rel=\"nofollow noreferrer\">Abstract Factory Pattern</a> like this will come closest to your desire:</p>\n<pre><code>public interface ButtonFactory {\n    Button createButton();\n}\n\npublic class IosButtonFactory implements ButtonFactory {\n    public Button createButton() {\n        return new IosButton();\n    }\n}\n\npublic class AndroidButtonFactory implements ButtonFactory {\n    public Button createButton() {\n        return new AndroidButton();\n    }\n}\n</code></pre>\n<p>Now. if you have to provide a new button type, you only have to add a new implementation like this:</p>\n<pre><code>public class WindowsButtonFactory implements ButtonFactory {\n    public Button createButton() {\n        return new WindowsButton();\n    }\n}\n</code></pre>\n<p>This way, your factory is free of conditional statements.</p>\n<p>Consider that there must be a location, where a condition decides, which of the concrete implementation is used related to the provided <code>string os</code>. This can be in your bootstrapper, where you configure your IoC container, or in your main method, as shown in this really neat <a href=\"https://refactoring.guru/design-patterns/abstract-factory\" rel=\"nofollow noreferrer\">sample</a>.</p>\n<p>This way, your Factory is free of conditional statements, as it was your request by your initial question.</p>\n<p><strong>EDIT1</strong> Concerning @LightSoul 's 1st comment below</p>\n<p>There are some other designs of the Factory Pattern, however, then, it's not longer an Abstract Factory, it's a simple Factory.</p>\n<p>Here, once again, we start with the interface:</p>\n<pre><code>public interface ButtonFactory {\n    Button createButton(String token);\n}\n</code></pre>\n<p>The implementation might look something like:</p>\n<pre><code>public class ButtonFactoryImpl implements ButtonFactory {\n    private final Map&lt;String, Supplier&lt;Button&gt;&gt; factoryMethods = new HashMap&lt;&gt;();\n\n    public ButtonFactoryImpl() {\n        factoryMethods.put(&quot;ios&quot;, this::createIosButton);\n        factoryMethods.put(&quot;android&quot;, this::createAndroidButton);\n    }\n\n    @Override\n    public Button createButton(String token) {\n        if (factoryMethods.containsKey(token)) {\n            return factoryMethods.get(token).get();\n        }\n\n        throw new IllegalArgumentException(&quot;Token %s not configured&quot;.formatted(token);\n    }\n\n    private Button createIosButton() {\n        return new IosButton();\n    }\n\n    private Button createAndroidButton() {\n        return new AndroidButton();\n    }\n}\n</code></pre>\n<p>Read <a href=\"https://blog.cleancoder.com/uncle-bob/2021/03/06/ifElseSwitch.html\" rel=\"nofollow noreferrer\">this article</a> to learn why token must be a primitive datatype.</p>\n<p>This design fits to the OpenClosed Principle since you have only to extend, but not modify code, once you introduce the WindowsButton mentioned above.</p>\n<p>If you like, and need not to consider speed and other drawbacks, you may want to use reflection:</p>\n<p>First, create a new annotation:</p>\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.METHOD)\npublic @interface Token {\n    public String value();\n}\n</code></pre>\n<p>Then our factory might look like this:</p>\n<pre><code>public class ButtonFactoryImpl implements ButtonFactory {\n\n    @Override\n    public Button createButton(String token) {\n        for(Method method : getType().getDeclaredMethods()) {\n            Annotation annotation = method.getDeclaredAnnotation(Token.class);\n            if (annotation instanceof Token t &amp;&amp; t.value().equals(token)) {\n               method.setAccessible(true);\n               Button button = (Button) method.invoke(this, null);\n               method.setAccessible(false)\n               return button;\n            }\n        }\n\n        throw new IllegalArgumentException(&quot;Token %s not configured&quot;.formatted(token);\n    }\n    \n\n    @Token(&quot;ios&quot;)\n    private Button createIosButton() {\n        return new IosButton();\n    }\n\n    @Token(&quot;android&quot;)\n    private Button createAndroidButton() {\n        return new AndroidButton();\n    }\n}\n</code></pre>\n<p>Now, you don't longer have a need to adjust any dispatch code, like switch/if or Map initializing, if you have to extend the factory with a new private method for the @Token(&quot;windows&quot;). But, as mentioned above, reflection has some serious impacts to consider. Take care and good luck.</p>\n<p>(Disclaimer: the code above is not tested and might require some small changes to run. It does not contain error handling for easy readability and understandability.)</p>\n"}],"owner":{"account_id":17293107,"reputation":55,"user_id":21057359,"display_name":"LightSouls"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":144,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76533146,"answer_count":1,"score":-1,"last_activity_date":1687810282,"creation_date":1686512383,"question_id":76452237,"body_markdown":"Imagine we have `interface Button{ void Click(); }`   and its implementations:  `AndroidButton` and `IOSButton`. Is it possible to create appropriate button based on input like `string os = &quot;ios&quot;` without violating the sOlid ?  Like when a new type of &#39;os&#39; appeared, we would not have to change the existing code  ","title":"How to avoid conditional statements in Factory?","body":"<p>Imagine we have <code>interface Button{ void Click(); }</code>   and its implementations:  <code>AndroidButton</code> and <code>IOSButton</code>. Is it possible to create appropriate button based on input like <code>string os = &quot;ios&quot;</code> without violating the sOlid ?  Like when a new type of 'os' appeared, we would not have to change the existing code</p>\n"},{"tags":["java","validation","vaadin","styling","error-messaging"],"answers":[{"comments":[{"owner":{"account_id":23419629,"reputation":81,"user_id":17480047,"display_name":"AleXeNoN"},"score":0,"creation_date":1687812730,"post_id":76559932,"comment_id":134986389,"body_markdown":"This question is not about the saving and validation process on a component, but more on highlighting the required components, so it will be easier for user to understand what fields he should fill.","body":"This question is not about the saving and validation process on a component, but more on highlighting the required components, so it will be easier for user to understand what fields he should fill."},{"owner":{"account_id":1831742,"reputation":1989,"user_id":1662997,"display_name":"Knoobie"},"score":2,"creation_date":1687814038,"post_id":76559932,"comment_id":134986577,"body_markdown":"The answer still stands. Call Binder::validate. This can also be done while you init the form and highlight all fields / mark them as required.","body":"The answer still stands. Call Binder::validate. This can also be done while you init the form and highlight all fields / mark them as required."}],"tags":[],"owner":{"account_id":1831742,"reputation":1989,"user_id":1662997,"display_name":"Knoobie"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1687810090,"creation_date":1687810090,"answer_id":76559932,"question_id":76559830,"body_markdown":"Instead of manually adding required and other validations to your fields, it&#39;s recommended to use the `Binder`.\r\n\r\nhttps://vaadin.com/docs/latest/binding-data/components-binder\r\n\r\nOnce the user pressed save and you check whether or not the form is valid. The validate method of the binder also displays all fields as invalid, like shown in your requirement once you let it validate the form on save. ","title":"Vaadin: Highlight empty components with error message on submitting","body":"<p>Instead of manually adding required and other validations to your fields, it's recommended to use the <code>Binder</code>.</p>\n<p><a href=\"https://vaadin.com/docs/latest/binding-data/components-binder\" rel=\"nofollow noreferrer\">https://vaadin.com/docs/latest/binding-data/components-binder</a></p>\n<p>Once the user pressed save and you check whether or not the form is valid. The validate method of the binder also displays all fields as invalid, like shown in your requirement once you let it validate the form on save.</p>\n"}],"owner":{"account_id":23419629,"reputation":81,"user_id":17480047,"display_name":"AleXeNoN"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687810090,"creation_date":1687809003,"question_id":76559830,"body_markdown":"I have a question on how does the vaadin framework work with `setRequired(true)`. What I found is when user focuses the component field and then exiting it, the error message appears. Here are the fields that are in my `Dialog`.\r\n\r\n```\r\n    private final TextField nameField = new TextField(&quot;Expense Name&quot;);\r\n    private final TextArea descriptionField = new TextArea(&quot;Description&quot;);\r\n    private final NumberField amountField = new NumberField(&quot;Amount&quot;);\r\n    private final ComboBox&lt;String&gt; intervalField = new ComboBox&lt;&gt;(&quot;Interval&quot;);\r\n    private final ComboBox&lt;String&gt; categoryField = new ComboBox&lt;&gt;(&quot;Category&quot;);\r\n    private final DatePicker dateField = new DatePicker(&quot;Date&quot;);\r\n\r\n    private final Component[] requiredComponents = {nameField, amountField, categoryField, intervalField};\r\n\r\n    //...\r\n\r\n    private List&lt;Component&gt; getListOfEmptyComponents() {\r\n        return Arrays.stream(requiredComponents)\r\n                .filter(component -&gt; component instanceof HasValue&lt;?, ?&gt; &amp;&amp; ((HasValue&lt;?, ?&gt;) component).isEmpty())\r\n                .collect(Collectors.toList());\r\n    }\r\n\r\n    private void setupRequiredComponents() {\r\n        Arrays.stream(requiredComponents).forEach(c -&gt; {\r\n            ((HasValue&lt;?, ?&gt;) c).setRequiredIndicatorVisible(true);\r\n            ((HasValidationProperties) c).setErrorMessage(&quot;Please fill this field&quot;);\r\n        });\r\n    }\r\n```\r\n\r\nI want, after the user presses the &quot;Save&quot; button, all the empty required fields to be like the screenshot below.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThese error messages are gain after I click (focus) the field and left it, and the components have the `setRequiredIndicatorVisible(true);`, but I want them to be visible after user clicks on Save button. Is this possible without me adding my own error messages and styling them ? Any help will be great!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sJlhe.png","title":"Vaadin: Highlight empty components with error message on submitting","body":"<p>I have a question on how does the vaadin framework work with <code>setRequired(true)</code>. What I found is when user focuses the component field and then exiting it, the error message appears. Here are the fields that are in my <code>Dialog</code>.</p>\n<pre><code>    private final TextField nameField = new TextField(&quot;Expense Name&quot;);\n    private final TextArea descriptionField = new TextArea(&quot;Description&quot;);\n    private final NumberField amountField = new NumberField(&quot;Amount&quot;);\n    private final ComboBox&lt;String&gt; intervalField = new ComboBox&lt;&gt;(&quot;Interval&quot;);\n    private final ComboBox&lt;String&gt; categoryField = new ComboBox&lt;&gt;(&quot;Category&quot;);\n    private final DatePicker dateField = new DatePicker(&quot;Date&quot;);\n\n    private final Component[] requiredComponents = {nameField, amountField, categoryField, intervalField};\n\n    //...\n\n    private List&lt;Component&gt; getListOfEmptyComponents() {\n        return Arrays.stream(requiredComponents)\n                .filter(component -&gt; component instanceof HasValue&lt;?, ?&gt; &amp;&amp; ((HasValue&lt;?, ?&gt;) component).isEmpty())\n                .collect(Collectors.toList());\n    }\n\n    private void setupRequiredComponents() {\n        Arrays.stream(requiredComponents).forEach(c -&gt; {\n            ((HasValue&lt;?, ?&gt;) c).setRequiredIndicatorVisible(true);\n            ((HasValidationProperties) c).setErrorMessage(&quot;Please fill this field&quot;);\n        });\n    }\n</code></pre>\n<p>I want, after the user presses the &quot;Save&quot; button, all the empty required fields to be like the screenshot below.</p>\n<p><a href=\"https://i.stack.imgur.com/sJlhe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sJlhe.png\" alt=\"enter image description here\" /></a></p>\n<p>These error messages are gain after I click (focus) the field and left it, and the components have the <code>setRequiredIndicatorVisible(true);</code>, but I want them to be visible after user clicks on Save button. Is this possible without me adding my own error messages and styling them ? Any help will be great!</p>\n"},{"tags":["java","dictionary","generics","types"],"comments":[{"owner":{"account_id":8153102,"reputation":15213,"user_id":6139527,"display_name":"Nicholas K"},"score":1,"creation_date":1546929385,"post_id":54086274,"comment_id":95005523,"body_markdown":"`?` is the *unknown* type is java. You cannot add to what is unknown.","body":"<code>?</code> is the <i>unknown</i> type is java. You cannot add to what is unknown."}],"answers":[{"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1546932180,"post_id":54086396,"comment_id":95006500,"body_markdown":"Please don&#39;t refer to the wildcard-bounded map as &quot;read-only&quot;. For one thing, you can remove elements; for another, you can add elements (see my answer).","body":"Please don&#39;t refer to the wildcard-bounded map as &quot;read-only&quot;. For one thing, you can remove elements; for another, you can add elements (see my answer)."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1546932281,"post_id":54086396,"comment_id":95006543,"body_markdown":"@Andy You&#39;re quite right.  I was just reading (and upvoting) your answer.  I&#39;d never thought about adding a value that had come from the map itself.  I&#39;ll re-word that part.","body":"@Andy You&#39;re quite right.  I was just reading (and upvoting) your answer.  I&#39;d never thought about adding a value that had come from the map itself.  I&#39;ll re-word that part."},{"owner":{"account_id":1459950,"reputation":3567,"user_id":1374536,"accept_rate":72,"display_name":"tgr"},"score":0,"creation_date":1546933120,"post_id":54086396,"comment_id":95006857,"body_markdown":"I wonder what use this construct has. I could imagine an abstract class defining a method with this as return type, but any implementation I can come up with would violate either the liskov-substitution-principle or the open-closed principle. (https://en.wikipedia.org/wiki/SOLID)","body":"I wonder what use this construct has. I could imagine an abstract class defining a method with this as return type, but any implementation I can come up with would violate either the liskov-substitution-principle or the open-closed principle. (<a href=\"https://en.wikipedia.org/wiki/SOLID\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/SOLID</a>)"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1546933275,"post_id":54086396,"comment_id":95006913,"body_markdown":"Well, @tgr, you can write methods which treat the map as read-only.  For example, you could write a method that prints all the values in the map.","body":"Well, @tgr, you can write methods which treat the map as read-only.  For example, you could write a method that prints all the values in the map."},{"owner":{"account_id":1459950,"reputation":3567,"user_id":1374536,"accept_rate":72,"display_name":"tgr"},"score":0,"creation_date":1546933533,"post_id":54086396,"comment_id":95007015,"body_markdown":"Agreed, printing is a mechanism, that would work without taking any assumptions on the value types. But besides that? I cannot see much value of a read-only map, whose values need to be casted for further use.","body":"Agreed, printing is a mechanism, that would work without taking any assumptions on the value types. But besides that? I cannot see much value of a read-only map, whose values need to be casted for further use."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1546933731,"post_id":54086396,"comment_id":95007090,"body_markdown":"@tgr If you were developing a library full of utility methods that operate on maps, you might use this kind of construction in much of the API.","body":"@tgr If you were developing a library full of utility methods that operate on maps, you might use this kind of construction in much of the API."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1546935328,"post_id":54086396,"comment_id":95007757,"body_markdown":"@tgr `?` is merely a shortened form of the upper bound `? extends Object`. If you were to define a different upper bound, for example `Map&lt;String, ? extends List&lt;Integer&gt;&gt;`, you could use the values of that map without explicit casting. That `?` has very limited uses - in the same way that `Object` has very limited uses - does not mean that wildcards are limited in their usefulness.","body":"@tgr <code>?</code> is merely a shortened form of the upper bound <code>? extends Object</code>. If you were to define a different upper bound, for example <code>Map&lt;String, ? extends List&lt;Integer&gt;&gt;</code>, you could use the values of that map without explicit casting. That <code>?</code> has very limited uses - in the same way that <code>Object</code> has very limited uses - does not mean that wildcards are limited in their usefulness."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1546935462,"post_id":54086396,"comment_id":95007803,"body_markdown":"@tgr it is also worth noting that wildcards should pretty much only occur in method parameters, in order to increase the flexibility of the API with respect to the parameters it accepts. You wouldn&#39;t define a class with a wildcard, so LSP and OCP aren&#39;t really relevant.","body":"@tgr it is also worth noting that wildcards should pretty much only occur in method parameters, in order to increase the flexibility of the API with respect to the parameters it accepts. You wouldn&#39;t define a class with a wildcard, so LSP and OCP aren&#39;t really relevant."}],"tags":[],"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"comment_count":8,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1546932625,"creation_date":1546929389,"answer_id":54086396,"question_id":54086274,"body_markdown":"`Map&lt;String,?&gt;` is an abstract type.  If a variable has this type, it could reference an object with any of the following types (and others).\r\n\r\n- `HashMap&lt;String,Integer&gt;`\r\n- `TreeMap&lt;String,String&gt;`\r\n- `HashMap&lt;String,ArrayList&lt;Boolean&gt;&gt;`\r\n- `TreeMap&lt;String,Throwable&gt;`\r\n\r\nObviously, the possibilities are basically endless.  If you have a variable of this type, you know that it refers to a map whose keys are `String`, but you really know nothing else.  In particular, you don&#39;t know what type of object you&#39;ll end up with when you do a `get` on that `Map`.\r\n \r\nMore importantly though, you will never be able to `put` anything into the map, without some kind of nasty, unsafe casting operation.  The compiler will stop you.  So in the examples you&#39;ve given -\r\n\r\n\r\n- `map.put(&quot;abc&quot;, Optional.of(5));` won&#39;t compile, because `map` could be a `HashMap&lt;String,String&gt;`, into which you can&#39;t put an `Optional`.\r\n- `map.put(&quot;kk&quot;, &quot;xyz&quot;);` won&#39;t compile, because `map` could be a `TreeMap&lt;String,Integer&gt;`, into which you can&#39;t put a `String`.\r\n\r\nThe exceptions would be `null`, or any value that has come from the map itself - see Andy Turner&#39;s excellent answer for more detail about those possibilities.\r\n\r\nIn short, if you have a variable of type `Map&lt;String,?&gt;`, the operations that the compiler will let you do to it are a bit limited.  You can&#39;t put anything into the map, unless it&#39;s `null` or it&#39;s already in the map.  All you can do is get values from the map, and remove values from the map.  \r\n\r\nSo using a `Map&lt;String,?&gt;` variable is very limiting.  If all you want to do with the map is read values from it, this is just fine, of course.  But don&#39;t expect to be able to insert arbitrary values into the map, unless you use a different expression to refer to the map.","title":"How to add values for Java generic Map with undetermined &quot;?&quot; value type?","body":"<p><code>Map&lt;String,?&gt;</code> is an abstract type.  If a variable has this type, it could reference an object with any of the following types (and others).</p>\n\n<ul>\n<li><code>HashMap&lt;String,Integer&gt;</code></li>\n<li><code>TreeMap&lt;String,String&gt;</code></li>\n<li><code>HashMap&lt;String,ArrayList&lt;Boolean&gt;&gt;</code></li>\n<li><code>TreeMap&lt;String,Throwable&gt;</code></li>\n</ul>\n\n<p>Obviously, the possibilities are basically endless.  If you have a variable of this type, you know that it refers to a map whose keys are <code>String</code>, but you really know nothing else.  In particular, you don't know what type of object you'll end up with when you do a <code>get</code> on that <code>Map</code>.</p>\n\n<p>More importantly though, you will never be able to <code>put</code> anything into the map, without some kind of nasty, unsafe casting operation.  The compiler will stop you.  So in the examples you've given -</p>\n\n<ul>\n<li><code>map.put(\"abc\", Optional.of(5));</code> won't compile, because <code>map</code> could be a <code>HashMap&lt;String,String&gt;</code>, into which you can't put an <code>Optional</code>.</li>\n<li><code>map.put(\"kk\", \"xyz\");</code> won't compile, because <code>map</code> could be a <code>TreeMap&lt;String,Integer&gt;</code>, into which you can't put a <code>String</code>.</li>\n</ul>\n\n<p>The exceptions would be <code>null</code>, or any value that has come from the map itself - see Andy Turner's excellent answer for more detail about those possibilities.</p>\n\n<p>In short, if you have a variable of type <code>Map&lt;String,?&gt;</code>, the operations that the compiler will let you do to it are a bit limited.  You can't put anything into the map, unless it's <code>null</code> or it's already in the map.  All you can do is get values from the map, and remove values from the map.  </p>\n\n<p>So using a <code>Map&lt;String,?&gt;</code> variable is very limiting.  If all you want to do with the map is read values from it, this is just fine, of course.  But don't expect to be able to insert arbitrary values into the map, unless you use a different expression to refer to the map.</p>\n"},{"tags":[],"owner":{"account_id":4566292,"reputation":655,"user_id":3707223,"display_name":"malvern dongeni"},"comment_count":0,"down_vote_count":1,"up_vote_count":7,"is_accepted":true,"score":6,"last_activity_date":1546931194,"creation_date":1546931194,"answer_id":54086770,"question_id":54086274,"body_markdown":"\r\n\r\n**Question (1)** \r\n\r\n    ? is called wildcard generic type.It can be used with any type,\r\n    but you need to specify type fist as Map is an abstract class.\r\n\r\n**Question (2)**\r\n\r\n**for  you to give value to this map its either you use Upper bound or Lower bound.**\r\n\r\nThe following are guidelines when using upper bound or lower bound\r\n\r\n    ? extends Type   - is used for read access only\r\n    ? super Type     - is used for write access only.\r\n\r\n**PECS** in short **Produces**(write acccess) -uses  **Extends** while **Consumes**(read access) - **uses Super**\r\n\r\n    Map&lt;String, ? super Object&gt; map = new HashMap&lt;&gt;(3);//OK\r\n        map.put(&quot;abc&quot;,Optional.of(5));\r\n        map.put(&quot;kk&quot;,&quot;xyz&quot;);\r\n    map.forEach((k,v)-&gt;System.out.println(k+&quot;\\t&quot;+v));\r\n\r\n\r\n\r\nOutput\r\n\r\n    \r\n    kk\txyz\r\n    abc\tOptional[5]\r\n\r\n    Process finished with exit code 0\r\n\r\n\r\n**Additional Notes**\r\n\r\n**Unbounded wildcard** ?\r\n\r\n     List&lt;?&gt; l = new ArrayList&lt;String&gt;();\r\n**Wildcard with an upper bound** ? extends type\r\n\r\n     List&lt;? extends Exception&gt; l = new ArrayList&lt;RuntimeException&gt;();\r\n\r\n**Wildcard with a lower bound** ? super type\r\n\r\n     List&lt;? super Exception&gt; l = new ArrayList&lt;Object&gt;();\r\n\r\n\r\n","title":"How to add values for Java generic Map with undetermined &quot;?&quot; value type?","body":"<p><strong>Question (1)</strong> </p>\n\n<pre><code>? is called wildcard generic type.It can be used with any type,\nbut you need to specify type fist as Map is an abstract class.\n</code></pre>\n\n<p><strong>Question (2)</strong></p>\n\n<p><strong>for  you to give value to this map its either you use Upper bound or Lower bound.</strong></p>\n\n<p>The following are guidelines when using upper bound or lower bound</p>\n\n<pre><code>? extends Type   - is used for read access only\n? super Type     - is used for write access only.\n</code></pre>\n\n<p><strong>PECS</strong> in short <strong>Produces</strong>(write acccess) -uses  <strong>Extends</strong> while <strong>Consumes</strong>(read access) - <strong>uses Super</strong></p>\n\n<pre><code>Map&lt;String, ? super Object&gt; map = new HashMap&lt;&gt;(3);//OK\n    map.put(\"abc\",Optional.of(5));\n    map.put(\"kk\",\"xyz\");\nmap.forEach((k,v)-&gt;System.out.println(k+\"\\t\"+v));\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>kk  xyz\nabc Optional[5]\n\nProcess finished with exit code 0\n</code></pre>\n\n<p><strong>Additional Notes</strong></p>\n\n<p><strong>Unbounded wildcard</strong> ?</p>\n\n<pre><code> List&lt;?&gt; l = new ArrayList&lt;String&gt;();\n</code></pre>\n\n<p><strong>Wildcard with an upper bound</strong> ? extends type</p>\n\n<pre><code> List&lt;? extends Exception&gt; l = new ArrayList&lt;RuntimeException&gt;();\n</code></pre>\n\n<p><strong>Wildcard with a lower bound</strong> ? super type</p>\n\n<pre><code> List&lt;? super Exception&gt; l = new ArrayList&lt;Object&gt;();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1546932462,"creation_date":1546931953,"answer_id":54086929,"question_id":54086274,"body_markdown":"`?` is an unknown type: you don&#39;t know exactly what it is at that point in the code.\n\nBecause of that, you cannot safely add any value to the map, with a couple of exceptions.\n\nYou can add literal `null` (because `null` can be cast to any type):\n\n    map.put(&quot;abc&quot;, null); // compiles\n\nAlso, you can add a value to the map which you obtain from the map:\n\n    &lt;T&gt; void reAdd(Map&lt;String, T&gt; map) {\n      T value = map.get(&quot;123&quot;);\n      map.put(&quot;456&quot;, value);\n    }\n\n    // Call with\n    reAdd(map); // compiles","title":"How to add values for Java generic Map with undetermined &quot;?&quot; value type?","body":"<p><code>?</code> is an unknown type: you don't know exactly what it is at that point in the code.</p>\n\n<p>Because of that, you cannot safely add any value to the map, with a couple of exceptions.</p>\n\n<p>You can add literal <code>null</code> (because <code>null</code> can be cast to any type):</p>\n\n<pre><code>map.put(\"abc\", null); // compiles\n</code></pre>\n\n<p>Also, you can add a value to the map which you obtain from the map:</p>\n\n<pre><code>&lt;T&gt; void reAdd(Map&lt;String, T&gt; map) {\n  T value = map.get(\"123\");\n  map.put(\"456\", value);\n}\n\n// Call with\nreAdd(map); // compiles\n</code></pre>\n"}],"owner":{"account_id":7785919,"reputation":9887,"user_id":5890784,"accept_rate":90,"display_name":"Hind Forsum"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3051,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":54086770,"answer_count":3,"score":5,"last_activity_date":1687809717,"creation_date":1546928781,"question_id":54086274,"body_markdown":"I&#39;ve seen this kind of declaration in JDK 8 sample:\r\n\r\n    Map&lt;String, ?&gt; map = new HashMap&lt;&gt;(3);   // OK\r\n\r\nBut when I tried to add value to `map`, I didn&#39;t succeed:\r\n\r\n    map.put(&quot;abc&quot;, Optional.of(5));\r\n    map.put(&quot;kk&quot;, &quot;xyz&quot;);\r\n\r\nBoth fail to compile. I wish to know:\r\n\r\n1\\) What does `?`indicate in `Map` declaration above?\r\n\r\n2\\) How to give values to this `map`?\r\n","title":"How to add values for Java generic Map with undetermined &quot;?&quot; value type?","body":"<p>I've seen this kind of declaration in JDK 8 sample:</p>\n<pre><code>Map&lt;String, ?&gt; map = new HashMap&lt;&gt;(3);   // OK\n</code></pre>\n<p>But when I tried to add value to <code>map</code>, I didn't succeed:</p>\n<pre><code>map.put(&quot;abc&quot;, Optional.of(5));\nmap.put(&quot;kk&quot;, &quot;xyz&quot;);\n</code></pre>\n<p>Both fail to compile. I wish to know:</p>\n<p>1) What does <code>?</code>indicate in <code>Map</code> declaration above?</p>\n<p>2) How to give values to this <code>map</code>?</p>\n"},{"tags":["java","apache-spark"],"owner":{"account_id":7739148,"reputation":3345,"user_id":5859654,"display_name":"Nemanja"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687809267,"creation_date":1687809267,"question_id":76559864,"body_markdown":"I&#39;m using spark java to create serval xml files from large dataset.\r\n\r\nSo far I have a code like this :\r\n\r\n    dataframe\r\n                    .repartition(partitions)\r\n                    .write()\r\n                    .mode(SaveMode.Overwrite)\r\n                    .format(&quot;com.databricks.spark.xml&quot;)\r\n                    .option(&quot;rootTag&quot;, &quot;citations&quot;)\r\n                    .option(&quot;rowTag&quot;, &quot;citation&quot;)\r\n                    .mode(&quot;overwrite&quot;)\r\n                    .save(&quot;s3a://myfolder/output&quot;);\r\n\r\nThis code creates serval output files, and the number of that files is equal to `partitions`.\r\n\r\nThe problem is that these files are named like this:  `part-0000.xml, part-0001.xml, etc`\r\n\r\nI want to rename this files, but I **don&#39;t want** to use `.repartition(1)`, because I need output to be in multiple files.\r\n\r\nI know there are similar questions on stackoverflow like this : https://stackoverflow.com/questions/46703623/how-to-rename-spark-data-frame-output-file-in-aws-in-spark-scala\r\nbut none of them solves my problem.\r\n\r\nAny help would be highly appreciated.\r\n\r\nThanks","title":"Renaming all otput files in Spark","body":"<p>I'm using spark java to create serval xml files from large dataset.</p>\n<p>So far I have a code like this :</p>\n<pre><code>dataframe\n                .repartition(partitions)\n                .write()\n                .mode(SaveMode.Overwrite)\n                .format(&quot;com.databricks.spark.xml&quot;)\n                .option(&quot;rootTag&quot;, &quot;citations&quot;)\n                .option(&quot;rowTag&quot;, &quot;citation&quot;)\n                .mode(&quot;overwrite&quot;)\n                .save(&quot;s3a://myfolder/output&quot;);\n</code></pre>\n<p>This code creates serval output files, and the number of that files is equal to <code>partitions</code>.</p>\n<p>The problem is that these files are named like this:  <code>part-0000.xml, part-0001.xml, etc</code></p>\n<p>I want to rename this files, but I <strong>don't want</strong> to use <code>.repartition(1)</code>, because I need output to be in multiple files.</p>\n<p>I know there are similar questions on stackoverflow like this : <a href=\"https://stackoverflow.com/questions/46703623/how-to-rename-spark-data-frame-output-file-in-aws-in-spark-scala\">How to rename spark data frame output file in AWS in spark SCALA</a>\nbut none of them solves my problem.</p>\n<p>Any help would be highly appreciated.</p>\n<p>Thanks</p>\n"},{"tags":["java","android","null","viewstub"],"owner":{"account_id":20995350,"reputation":77,"user_id":15427321,"display_name":"Jason W"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687809052,"creation_date":1687809052,"question_id":76559833,"body_markdown":"I&#39;m a self taught Android developer, I want to use a ViewStub in my (live) app, but I&#39;m not sure what to do in the null case. \r\n\r\nMy XML - you_win_overlay.xml:\r\n```\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout\r\n        android:id=&quot;@+id/stub&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/title&quot;\r\n            style=&quot;@style/title_style&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;/&gt;\r\n\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\n\r\nMy Main Activity XML\r\n```\r\n&lt;ViewStub\r\n            android:id=&quot;@+id/you_win_stub&quot;\r\n            android:inflatedId=&quot;@+id/you_win_stub_inflated&quot;\r\n            android:layout=&quot;@layout/you_win_overlay&quot;\r\n            android:layout_width=&quot;fill_parent&quot;\r\n            android:layout_height=&quot;fill_parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;&gt;\r\n&lt;/ViewStub&gt;\r\n```\r\n\r\nIn my Main Activity I call a method that uses the ViewStub to show the player the win game display. So the method looks like so: \r\n\r\n```\r\nshowTheEndGameOverlay(SharedPreferences memory, ViewStub viewStub, Animation slide) {\r\n\r\n     View inflated;\r\n\r\n     if(viewStub != null) {\r\n   \r\n          inflated = viewStub.inflate();\r\n          inflated.setZ(12);\r\n\r\n          TextView theTitle = (TextView) inflated.findViewById(R.id.title);\r\n          theTitle.setText(memory.getString(&quot;currentTitle&quot;, &quot;Default Title&quot;));\r\n\r\n     } else {\r\n\r\n         WHAT WOULD I DO HERE???\r\n         WHAT WOULD I DO HERE???\r\n         WHAT WOULD I DO HERE???\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\nI&#39;m not sure what to do here for the null case. I copied this code from a couple of examples, and in each one they test for viewStub != null. In testing the code in my game it works perfectly OK, each time the viewStub is not null and everything executes as expected. Every time I test, I win a game and the &quot;showTheEndGameOverlay&quot; method executes the viewStub is not null. So I&#39;m not sure I even need to do this null check, the viewStub will always be in the Main Activity&#39;s XML file...so how could be ever be null?. \r\n\r\nHowever, since this is new to me, I don&#39;t want to make a mistake and overlook handling a null case if I need to. Can anyone assist? Thanks. ","title":"Android - How to Handle Null Case for ViewStubs","body":"<p>I'm a self taught Android developer, I want to use a ViewStub in my (live) app, but I'm not sure what to do in the null case.</p>\n<p>My XML - you_win_overlay.xml:</p>\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout\n        android:id=&quot;@+id/stub&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;&gt;\n\n\n        &lt;TextView\n            android:id=&quot;@+id/title&quot;\n            style=&quot;@style/title_style&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;/&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>My Main Activity XML</p>\n<pre><code>&lt;ViewStub\n            android:id=&quot;@+id/you_win_stub&quot;\n            android:inflatedId=&quot;@+id/you_win_stub_inflated&quot;\n            android:layout=&quot;@layout/you_win_overlay&quot;\n            android:layout_width=&quot;fill_parent&quot;\n            android:layout_height=&quot;fill_parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;&gt;\n&lt;/ViewStub&gt;\n</code></pre>\n<p>In my Main Activity I call a method that uses the ViewStub to show the player the win game display. So the method looks like so:</p>\n<pre><code>showTheEndGameOverlay(SharedPreferences memory, ViewStub viewStub, Animation slide) {\n\n     View inflated;\n\n     if(viewStub != null) {\n   \n          inflated = viewStub.inflate();\n          inflated.setZ(12);\n\n          TextView theTitle = (TextView) inflated.findViewById(R.id.title);\n          theTitle.setText(memory.getString(&quot;currentTitle&quot;, &quot;Default Title&quot;));\n\n     } else {\n\n         WHAT WOULD I DO HERE???\n         WHAT WOULD I DO HERE???\n         WHAT WOULD I DO HERE???\n\n    }\n}\n\n</code></pre>\n<p>I'm not sure what to do here for the null case. I copied this code from a couple of examples, and in each one they test for viewStub != null. In testing the code in my game it works perfectly OK, each time the viewStub is not null and everything executes as expected. Every time I test, I win a game and the &quot;showTheEndGameOverlay&quot; method executes the viewStub is not null. So I'm not sure I even need to do this null check, the viewStub will always be in the Main Activity's XML file...so how could be ever be null?.</p>\n<p>However, since this is new to me, I don't want to make a mistake and overlook handling a null case if I need to. Can anyone assist? Thanks.</p>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":129540,"reputation":210839,"user_id":328193,"accept_rate":91,"display_name":"David"},"score":4,"creation_date":1687790604,"post_id":76557732,"comment_id":134982266,"body_markdown":"This is a good opportunity for you to start familiarizing yourself with [using a debugger](https://stackoverflow.com/q/25385173/328193).  When you step through the code in a debugger, which operation first produces an unexpected result?  What were the values used in that operation?  What was the result?  What result was expected?  Why?  To learn more about this community and how we can help you, please start with the [tour] and read [ask] and its linked resources.","body":"This is a good opportunity for you to start familiarizing yourself with <a href=\"https://stackoverflow.com/q/25385173/328193\">using a debugger</a>.  When you step through the code in a debugger, which operation first produces an unexpected result?  What were the values used in that operation?  What was the result?  What result was expected?  Why?  To learn more about this community and how we can help you, please start with the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and its linked resources."},{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":3,"creation_date":1687790783,"post_id":76557732,"comment_id":134982305,"body_markdown":"[`getYears()`](https://docs.oracle.com/javase/8/docs/api/java/time/Period.html#getYears--) returns an `int` so 75 years + 2 days has 75 years.","body":"<a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Period.html#getYears--\" rel=\"nofollow noreferrer\"><code>getYears()</code></a> returns an <code>int</code> so 75 years + 2 days has 75 years."},{"owner":{"account_id":28825887,"reputation":1,"user_id":22077302,"display_name":"Nani K"},"score":1,"creation_date":1687791225,"post_id":76557732,"comment_id":134982406,"body_markdown":"for 24-06-2948 is more than 75 (75 + 2days) - for this returns false. but in the above code it is returning true. Please suggest","body":"for 24-06-2948 is more than 75 (75 + 2days) - for this returns false. but in the above code it is returning true. Please suggest"},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1687791487,"post_id":76557732,"comment_id":134982483,"body_markdown":"@NaniK read `001`&#39;s comment. 75 is less than or equal to 75, so true. Now rethink whether there is anything else you can do with the Period.","body":"@NaniK read <code>001</code>&#39;s comment. 75 is less than or equal to 75, so true. Now rethink whether there is anything else you can do with the Period."},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1687793278,"post_id":76557732,"comment_id":134982880,"body_markdown":"If you obviously want to involve fractions of years, too, why don&#39;t you check months and days of the `Period`, too?","body":"If you obviously want to involve fractions of years, too, why don&#39;t you check months and days of the <code>Period</code>, too?"}],"answers":[{"comments":[{"owner":{"account_id":28825887,"reputation":1,"user_id":22077302,"display_name":"Nani K"},"score":0,"creation_date":1687794310,"post_id":76557875,"comment_id":134983108,"body_markdown":"if we give dob as 25-05-2005  (exact 18 years)\nit is also failing with above code","body":"if we give dob as 25-05-2005  (exact 18 years) it is also failing with above code"},{"owner":{"account_id":28825887,"reputation":1,"user_id":22077302,"display_name":"Nani K"},"score":0,"creation_date":1687796586,"post_id":76557875,"comment_id":134983629,"body_markdown":"DateTimeFormatter dobFormat = DateTimeFormatter.ofPattern(&quot;dd-MM-yyyy&quot;);\nLocalDate inputDate = LocalDate.parse(dob,dobFormat);\nLocalDate minDate = LocalDate.now().minusYears(18).minusDays(1);\n LocalDate maxDate = LocalDate.now().plusYears(57).plusDays(1);\nif(minDate.isBefore(toDayDate) &amp;&amp; maxDate.isAfter(toDayDate)){\nreturn true;\n} else {\nreturn false;\n}\n\n\n///Still it is failing if we give 26-06-1948 ///exact 75 years, still it is failing","body":"DateTimeFormatter dobFormat = DateTimeFormatter.ofPattern(&quot;dd-MM-yyyy&quot;); LocalDate inputDate = LocalDate.parse(dob,dobFormat); LocalDate minDate = LocalDate.now().minusYears(18).minusDays(1);  LocalDate maxDate = LocalDate.now().plusYears(57).plusDays(1); if(minDate.isBefore(toDayDate) &amp;&amp; maxDate.isAfter(toDayDate)){ return true; } else { return false; }   ///Still it is failing if we give 26-06-1948 ///exact 75 years, still it is failing"}],"tags":[],"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687791557,"creation_date":1687791557,"answer_id":76557875,"question_id":76557732,"body_markdown":"I will recommend to use [LocalDate][1], you can create two local date objects one with minimum date and another with maximum date\r\n\r\n     LocalDate minDate = LocalDate.now().minusYears(18).minusDays(1);\r\n     LocalDate maxDate = LocalDate.now().plusYears(57).plusDays(1);\r\n\r\nConsidering today&#39;s date as center point, you can create `minDate` with subtracting `18` years and `1` day, and the same way for  `maxDate` of `75` years\r\n\r\nNow you can use `isBefore` and `isAfter` methods to check in between condition\r\n\r\n    if(minDate.isBefore(toDayDate) &amp;&amp; maxDate.isAfter(toDayDate))\r\n\r\nNote : If you are looking for DOB check, always take DOB as center point\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html","title":"How to check the age is between 18 and 75 years from today","body":"<p>I will recommend to use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\" rel=\"nofollow noreferrer\">LocalDate</a>, you can create two local date objects one with minimum date and another with maximum date</p>\n<pre><code> LocalDate minDate = LocalDate.now().minusYears(18).minusDays(1);\n LocalDate maxDate = LocalDate.now().plusYears(57).plusDays(1);\n</code></pre>\n<p>Considering today's date as center point, you can create <code>minDate</code> with subtracting <code>18</code> years and <code>1</code> day, and the same way for  <code>maxDate</code> of <code>75</code> years</p>\n<p>Now you can use <code>isBefore</code> and <code>isAfter</code> methods to check in between condition</p>\n<pre><code>if(minDate.isBefore(toDayDate) &amp;&amp; maxDate.isAfter(toDayDate))\n</code></pre>\n<p>Note : If you are looking for DOB check, always take DOB as center point</p>\n"},{"comments":[{"owner":{"account_id":28825887,"reputation":1,"user_id":22077302,"display_name":"Nani K"},"score":0,"creation_date":1687797170,"post_id":76557931,"comment_id":134983755,"body_markdown":"we need to return true if age is in between 18 and 75, otherwise we needs to return false","body":"we need to return true if age is in between 18 and 75, otherwise we needs to return false"},{"owner":{"account_id":7547772,"reputation":8593,"user_id":5730279,"display_name":"hc_dev"},"score":0,"creation_date":1687801831,"post_id":76557931,"comment_id":134984696,"body_markdown":"I agree to most of your 3 meta-points. Still they distract from the answer. You could add a comment or [flag](https://stackoverflow.com/help/privileges/flag-posts) to the question directly. Not sure what&#39;s the specific issue in regards to SO&#39;s code of conduct.","body":"I agree to most of your 3 meta-points. Still they distract from the answer. You could add a comment or <a href=\"https://stackoverflow.com/help/privileges/flag-posts\">flag</a> to the question directly. Not sure what&#39;s the specific issue in regards to SO&#39;s code of conduct."}],"tags":[],"owner":{"account_id":15222298,"reputation":181,"user_id":10983863,"display_name":"mapawa"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1687791933,"creation_date":1687791933,"answer_id":76557931,"question_id":76557732,"body_markdown":"The issue is that `getYears()` returns the rounded number of full years, which is 75 in this case. So what you should really do is `if (age &gt;= 18 &amp;&amp; age &lt; 75)`.\r\n\r\n\r\nThat said, I have a few more remarks:\r\n\r\n1. Your question should not have syntax errors.\r\n2. You should really, really, learn to use a debugger if you want to pursue any form of professional software development career. It is a fundamental and essential skill.\r\n3. For future questions, please have a look at the StackOverflow [code of conduct][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/conduct","title":"How to check the age is between 18 and 75 years from today","body":"<p>The issue is that <code>getYears()</code> returns the rounded number of full years, which is 75 in this case. So what you should really do is <code>if (age &gt;= 18 &amp;&amp; age &lt; 75)</code>.</p>\n<p>That said, I have a few more remarks:</p>\n<ol>\n<li>Your question should not have syntax errors.</li>\n<li>You should really, really, learn to use a debugger if you want to pursue any form of professional software development career. It is a fundamental and essential skill.</li>\n<li>For future questions, please have a look at the StackOverflow <a href=\"https://stackoverflow.com/conduct\">code of conduct</a></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687800559,"creation_date":1687800559,"answer_id":76558967,"question_id":76557732,"body_markdown":"You can create new _Period_ objects, and utilize the _[isZero](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Period.html#isZero())_ and _[isNegative](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Period.html#isNegative())_ methods, to determine comparison.\r\n\r\n```java\r\nPeriod minus18 = period.minusYears(18);\r\nboolean gte18 = minus18.isZero() || !minus18.isNegative();\r\nPeriod minus75 = period.minusYears(75);\r\nboolean lte75 = minus75.isZero() || minus75.isNegative();\r\nif (gte18 &amp;&amp; lte75) {\r\n\r\n} else {\r\n\r\n}\r\n```\r\n\r\nHere is an example.\r\n\r\n```java\r\nLocalDate today = LocalDate.now(ZoneId.systemDefault());\r\nLocalDate[] dates = {\r\n    LocalDate.of(1948, 6, 25), LocalDate.of(1948, 6, 26), LocalDate.of(1948, 6, 27),\r\n    LocalDate.of(2005, 6, 25), LocalDate.of(2005, 6, 26), LocalDate.of(2005, 6, 27) };\r\nPeriod period, minus18, minus75;\r\nboolean gte18, lte75;\r\nfor (LocalDate inputdate : dates) {\r\n    period = Period.between(inputdate, today);\r\n    minus18 = period.minusYears(18);\r\n    gte18 = minus18.isZero() || !minus18.isNegative();\r\n    System.out.printf(&quot;%-12s - 18 = %-12s &gt;= 18 = %b%n&quot;, period, minus18, gte18);\r\n    minus75 = period.minusYears(75);\r\n    lte75 = minus75.isZero() || minus75.isNegative();\r\n    System.out.printf(&quot;%-12s - 75 = %-12s &lt;= 75 = %b%n&quot;, period, minus75, lte75);\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nP75Y1D       - 18 = P57Y1D       &gt;= 18 = true\r\nP75Y1D       - 75 = P1D          &lt;= 75 = false\r\nP75Y         - 18 = P57Y         &gt;= 18 = true\r\nP75Y         - 75 = P0D          &lt;= 75 = true\r\nP74Y11M30D   - 18 = P56Y11M30D   &gt;= 18 = true\r\nP74Y11M30D   - 75 = P-1Y11M30D   &lt;= 75 = true\r\nP18Y1D       - 18 = P1D          &gt;= 18 = true\r\nP18Y1D       - 75 = P-57Y1D      &lt;= 75 = true\r\nP18Y         - 18 = P0D          &gt;= 18 = true\r\nP18Y         - 75 = P-57Y        &lt;= 75 = true\r\nP17Y11M30D   - 18 = P-1Y11M30D   &gt;= 18 = false\r\nP17Y11M30D   - 75 = P-58Y11M30D  &lt;= 75 = true\r\n```","title":"How to check the age is between 18 and 75 years from today","body":"<p>You can create new <em>Period</em> objects, and utilize the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Period.html#isZero()\" rel=\"nofollow noreferrer\">isZero</a></em> and <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Period.html#isNegative()\" rel=\"nofollow noreferrer\">isNegative</a></em> methods, to determine comparison.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Period minus18 = period.minusYears(18);\nboolean gte18 = minus18.isZero() || !minus18.isNegative();\nPeriod minus75 = period.minusYears(75);\nboolean lte75 = minus75.isZero() || minus75.isNegative();\nif (gte18 &amp;&amp; lte75) {\n\n} else {\n\n}\n</code></pre>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LocalDate today = LocalDate.now(ZoneId.systemDefault());\nLocalDate[] dates = {\n    LocalDate.of(1948, 6, 25), LocalDate.of(1948, 6, 26), LocalDate.of(1948, 6, 27),\n    LocalDate.of(2005, 6, 25), LocalDate.of(2005, 6, 26), LocalDate.of(2005, 6, 27) };\nPeriod period, minus18, minus75;\nboolean gte18, lte75;\nfor (LocalDate inputdate : dates) {\n    period = Period.between(inputdate, today);\n    minus18 = period.minusYears(18);\n    gte18 = minus18.isZero() || !minus18.isNegative();\n    System.out.printf(&quot;%-12s - 18 = %-12s &gt;= 18 = %b%n&quot;, period, minus18, gte18);\n    minus75 = period.minusYears(75);\n    lte75 = minus75.isZero() || minus75.isNegative();\n    System.out.printf(&quot;%-12s - 75 = %-12s &lt;= 75 = %b%n&quot;, period, minus75, lte75);\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>P75Y1D       - 18 = P57Y1D       &gt;= 18 = true\nP75Y1D       - 75 = P1D          &lt;= 75 = false\nP75Y         - 18 = P57Y         &gt;= 18 = true\nP75Y         - 75 = P0D          &lt;= 75 = true\nP74Y11M30D   - 18 = P56Y11M30D   &gt;= 18 = true\nP74Y11M30D   - 75 = P-1Y11M30D   &lt;= 75 = true\nP18Y1D       - 18 = P1D          &gt;= 18 = true\nP18Y1D       - 75 = P-57Y1D      &lt;= 75 = true\nP18Y         - 18 = P0D          &gt;= 18 = true\nP18Y         - 75 = P-57Y        &lt;= 75 = true\nP17Y11M30D   - 18 = P-1Y11M30D   &gt;= 18 = false\nP17Y11M30D   - 75 = P-58Y11M30D  &lt;= 75 = true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7547772,"reputation":8593,"user_id":5730279,"display_name":"hc_dev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687808642,"creation_date":1687805305,"answer_id":76559448,"question_id":76557732,"body_markdown":"Former library Joda-time had the solution. See https://stackoverflow.com/questions/1116123/how-do-i-calculate-someones-age-in-java.\r\n\r\nWith the new Java-Time API we have two options:\r\n* `Duration` with `compareTo`, not suitable for months and years\r\n* `Period` with arithmetic, see [Reilas &#39;s answer](https://stackoverflow.com/a/76558967/5730279)\r\n* compare different `LocalDate`s\r\n\r\n\r\n\r\n### `Duration` for short and precise (weeks, days, milli-/nano-seconds)\r\nUsually we can use `Duration` when we need to compare objects to express temporal distance like *age*. The Duration class implements the `Comparable` interface and has a method `compareTo(otherDuration)`.\r\n\r\nThis would work for approximate relative events like:\r\n* updated 5 minutes ago\r\n* next run in 2 weeks and 4 days\r\n\r\nSo, in theory we could compare the actual-age to a boundary like 18 years like `actualAge.compareTo(AGE_18_YEARS)` and evaluate the returned `-1`, `0` or `1`.\r\nIn practice the age-reference of `AGE_18_YEARS` must be specified as `Duration` which only allows `ChronoUnit.Days` as largest unit. How many days would be 18 years ?\r\n\r\n\r\n### `Period` based on calendar for long (especially months and years)\r\nUnfortunately distant events like the age of a person take months and years. Both chrono-units depend on a calendar and their relative position. Months can be 28, 29, 30 or 31 days. Years can be 365, even 366 days for a leap-year.\r\n\r\n### `LocalDate` orientation within a calendar of birthdays\r\nThe age is special for any person, it has a special day and comprises a special number of days (depending on the birthday and leap-years). \r\n\r\nLet&#39;s use the birthday to evaluate if someone is 18, in between or 75 years old.\r\n\r\nUsing a single concept like calendar, birthdays and date-comparison leads to a meaningful and readable solution.\r\n\r\nTest the [demo on IDEone](https://ideone.com/rnSjlh):\r\n\r\n```java\r\n// DOB: 2000-12-24\r\nvar dob =  LocalDate.of(2000, 12, 24);\r\n\r\n\r\n// Minimum age: 18 years\r\nvar birthdayAge18years = dob.plusYears(18);\r\n// Maximum age: 75 years\r\nvar birthdayAge75years = dob.plusYears(75);\r\n\r\nvar today = LocalDate.now();\r\n\r\n// is today\r\n//      on or after  18th birthday \r\n//  and on or before 75th birthday\r\nvar olderThanOr18 = today.equals(birthdayAge18years) || today.isAfter(birthdayAge18years);\r\nvar youngerThanOr75 = today.equals(birthdayAge75years) || today.isBefore(birthdayAge75years);\r\n\r\n// test\r\nSystem.out.println(birthdayAge18years + &quot; &gt; older than or exactly 18 years: &quot; + olderThanOr18);\r\nSystem.out.println(birthdayAge75years + &quot; &gt; younger than or exactly 75 years: &quot; + youngerThanOr75);\r\n```","title":"How to check the age is between 18 and 75 years from today","body":"<p>Former library Joda-time had the solution. See <a href=\"https://stackoverflow.com/questions/1116123/how-do-i-calculate-someones-age-in-java\">How do I calculate someone&#39;s age in Java?</a>.</p>\n<p>With the new Java-Time API we have two options:</p>\n<ul>\n<li><code>Duration</code> with <code>compareTo</code>, not suitable for months and years</li>\n<li><code>Period</code> with arithmetic, see <a href=\"https://stackoverflow.com/a/76558967/5730279\">Reilas 's answer</a></li>\n<li>compare different <code>LocalDate</code>s</li>\n</ul>\n<h3><code>Duration</code> for short and precise (weeks, days, milli-/nano-seconds)</h3>\n<p>Usually we can use <code>Duration</code> when we need to compare objects to express temporal distance like <em>age</em>. The Duration class implements the <code>Comparable</code> interface and has a method <code>compareTo(otherDuration)</code>.</p>\n<p>This would work for approximate relative events like:</p>\n<ul>\n<li>updated 5 minutes ago</li>\n<li>next run in 2 weeks and 4 days</li>\n</ul>\n<p>So, in theory we could compare the actual-age to a boundary like 18 years like <code>actualAge.compareTo(AGE_18_YEARS)</code> and evaluate the returned <code>-1</code>, <code>0</code> or <code>1</code>.\nIn practice the age-reference of <code>AGE_18_YEARS</code> must be specified as <code>Duration</code> which only allows <code>ChronoUnit.Days</code> as largest unit. How many days would be 18 years ?</p>\n<h3><code>Period</code> based on calendar for long (especially months and years)</h3>\n<p>Unfortunately distant events like the age of a person take months and years. Both chrono-units depend on a calendar and their relative position. Months can be 28, 29, 30 or 31 days. Years can be 365, even 366 days for a leap-year.</p>\n<h3><code>LocalDate</code> orientation within a calendar of birthdays</h3>\n<p>The age is special for any person, it has a special day and comprises a special number of days (depending on the birthday and leap-years).</p>\n<p>Let's use the birthday to evaluate if someone is 18, in between or 75 years old.</p>\n<p>Using a single concept like calendar, birthdays and date-comparison leads to a meaningful and readable solution.</p>\n<p>Test the <a href=\"https://ideone.com/rnSjlh\" rel=\"nofollow noreferrer\">demo on IDEone</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// DOB: 2000-12-24\nvar dob =  LocalDate.of(2000, 12, 24);\n\n\n// Minimum age: 18 years\nvar birthdayAge18years = dob.plusYears(18);\n// Maximum age: 75 years\nvar birthdayAge75years = dob.plusYears(75);\n\nvar today = LocalDate.now();\n\n// is today\n//      on or after  18th birthday \n//  and on or before 75th birthday\nvar olderThanOr18 = today.equals(birthdayAge18years) || today.isAfter(birthdayAge18years);\nvar youngerThanOr75 = today.equals(birthdayAge75years) || today.isBefore(birthdayAge75years);\n\n// test\nSystem.out.println(birthdayAge18years + &quot; &gt; older than or exactly 18 years: &quot; + olderThanOr18);\nSystem.out.println(birthdayAge75years + &quot; &gt; younger than or exactly 75 years: &quot; + youngerThanOr75);\n</code></pre>\n"}],"owner":{"account_id":28825887,"reputation":1,"user_id":22077302,"display_name":"Nani K"},"comment_count":5,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1687831383,"answer_count":4,"score":0,"last_activity_date":1687808642,"creation_date":1687790492,"question_id":76557732,"body_markdown":"I have written the code like below, but it it is not working in below case.\r\n\r\n```\r\nLocalDate today = LocalDate.now(ZoneId.systemDefault());\r\nDateTimrFormatter dobFormat = DateTimeFormatter.ofPattern(&quot;dd-MM-uuuu&quot;);\r\nint age = Period.between(inputdate, today).getYears();\r\nif (age &gt;= 18 &amp;&amp; age &lt;= 75) {\r\n    return true;\r\n} else {\r\n    return false\r\n}\r\n```\r\n\r\n\r\n\r\nIt is not checking age including days i.e. if we give input date as 24-06-1948, then age is 75 years + 2 days (greater than 75), but it returns true.","title":"How to check the age is between 18 and 75 years from today","body":"<p>I have written the code like below, but it it is not working in below case.</p>\n<pre><code>LocalDate today = LocalDate.now(ZoneId.systemDefault());\nDateTimrFormatter dobFormat = DateTimeFormatter.ofPattern(&quot;dd-MM-uuuu&quot;);\nint age = Period.between(inputdate, today).getYears();\nif (age &gt;= 18 &amp;&amp; age &lt;= 75) {\n    return true;\n} else {\n    return false\n}\n</code></pre>\n<p>It is not checking age including days i.e. if we give input date as 24-06-1948, then age is 75 years + 2 days (greater than 75), but it returns true.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1687162506,"post_id":76504782,"comment_id":134892949,"body_markdown":"Is it always one or two digits followed by a letter? Or could it be something like 1A3?","body":"Is it always one or two digits followed by a letter? Or could it be something like 1A3?"},{"owner":{"account_id":19870679,"reputation":3,"user_id":14556896,"display_name":"noobcoder"},"score":0,"creation_date":1687162585,"post_id":76504782,"comment_id":134892963,"body_markdown":"@FedericoklezCulloca Its always one or two digits followed by a letter. it cant be 1A3","body":"@FedericoklezCulloca Its always one or two digits followed by a letter. it cant be 1A3"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1687162712,"post_id":76504782,"comment_id":134892985,"body_markdown":"What are `1A` and `34F`? Hexadecimal strings or just strings and you have to extract the numbers from them?","body":"What are <code>1A</code> and <code>34F</code>? Hexadecimal strings or just strings and you have to extract the numbers from them?"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":2,"creation_date":1687162779,"post_id":76504782,"comment_id":134893001,"body_markdown":"parseInt needs the whole string to be the integer. If you know it is always 1 letter you can do `Integer.parseInt( input.subString(0, input.length() - 1))`","body":"parseInt needs the whole string to be the integer. If you know it is always 1 letter you can do <code>Integer.parseInt( input.subString(0, input.length() - 1))</code>"},{"owner":{"account_id":9241611,"reputation":277,"user_id":6864750,"display_name":"DasBoot"},"score":0,"creation_date":1687162900,"post_id":76504782,"comment_id":134893030,"body_markdown":"You have to split the input into the string part and the integer part and test for both conditions (integerPart &gt; 34 11 stringPart &gt; &quot;E&quot;) separately.\nIf the letters can be lowercase, be careful about that.","body":"You have to split the input into the string part and the integer part and test for both conditions (integerPart &gt; 34 11 stringPart &gt; &quot;E&quot;) separately. If the letters can be lowercase, be careful about that."},{"owner":{"account_id":19870679,"reputation":3,"user_id":14556896,"display_name":"noobcoder"},"score":0,"creation_date":1687163165,"post_id":76504782,"comment_id":134893087,"body_markdown":"@Chaosfire its just a string.","body":"@Chaosfire its just a string."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687165841,"post_id":76504782,"comment_id":134893649,"body_markdown":"*The input given is Integer + String, however I want to set a range of integer input (1~34) and String (A~F).* In that case, why are you yoking the two tokens together with the likes of 34F instead of passing the two tokens as two ranges, e.g. `1..34 A..F` ?","body":"<i>The input given is Integer + String, however I want to set a range of integer input (1~34) and String (A~F).</i> In that case, why are you yoking the two tokens together with the likes of 34F instead of passing the two tokens as two ranges, e.g. <code>1..34 A..F</code> ?"}],"answers":[{"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1687162869,"post_id":76504833,"comment_id":134893025,"body_markdown":"That would parse `1A3` as well, which they say in the comments would not be valid.","body":"That would parse <code>1A3</code> as well, which they say in the comments would not be valid."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1687162953,"post_id":76504833,"comment_id":134893039,"body_markdown":"@FedericoklezCulloca All relevant information should be added to the question","body":"@FedericoklezCulloca All relevant information should be added to the question"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":1,"creation_date":1687163123,"post_id":76504833,"comment_id":134893079,"body_markdown":"They did say what the options are, the very first line of the question. How is your example going to limit the range to 34 for the integer part and A-F for the &quot;String&quot; part.","body":"They did say what the options are, the very first line of the question. How is your example going to limit the range to 34 for the integer part and A-F for the &quot;String&quot; part."}],"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687162887,"creation_date":1687162753,"answer_id":76504833,"question_id":76504782,"body_markdown":"If you are trying to parse a hexadecimal string, pass a radix argument:\r\n\r\n`Integer.parseInt(input, 16)`\r\n\r\nIf it&#39;s not hexadecimal, you need to separate the String into the number part and other part first (can&#39;t tell you how since you haven&#39;t told us what the options are), and then only pass the String containing numbers to `Integer.parseInt`.","title":"How to set integer and string range from string in Java","body":"<p>If you are trying to parse a hexadecimal string, pass a radix argument:</p>\n<p><code>Integer.parseInt(input, 16)</code></p>\n<p>If it's not hexadecimal, you need to separate the String into the number part and other part first (can't tell you how since you haven't told us what the options are), and then only pass the String containing numbers to <code>Integer.parseInt</code>.</p>\n"},{"tags":[],"owner":{"account_id":8517137,"reputation":835,"user_id":6385232,"display_name":"geanakuch"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687163566,"creation_date":1687163566,"answer_id":76504934,"question_id":76504782,"body_markdown":"You could first split the String into number and letter\r\n\r\n    String[] split = n.split(&quot;(?=[A-Z])&quot;);\r\n\r\nthen check if the two parts fit your needs\r\n\r\n    if(Integer.parseInt(split[0]) &gt; 34 || split[1].charAt(0) &gt; &#39;F&#39;) {\r\n        System.out.println(&quot;number too high&quot;);\r\n    }\r\n\r\nYou&#39;d have to check beforehand that your String actually conforms to that pattern but you said in the comments that it&#39;s always in that format, so it should work. Also if lowercase letters are possible you have to change the regex and condition or simply call ```toUppercase()``` on the input String.","title":"How to set integer and string range from string in Java","body":"<p>You could first split the String into number and letter</p>\n<pre><code>String[] split = n.split(&quot;(?=[A-Z])&quot;);\n</code></pre>\n<p>then check if the two parts fit your needs</p>\n<pre><code>if(Integer.parseInt(split[0]) &gt; 34 || split[1].charAt(0) &gt; 'F') {\n    System.out.println(&quot;number too high&quot;);\n}\n</code></pre>\n<p>You'd have to check beforehand that your String actually conforms to that pattern but you said in the comments that it's always in that format, so it should work. Also if lowercase letters are possible you have to change the regex and condition or simply call <code>toUppercase()</code> on the input String.</p>\n"},{"tags":[],"owner":{"account_id":2297089,"reputation":3607,"user_id":2018278,"accept_rate":53,"display_name":"The KNVB"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687165360,"creation_date":1687163955,"answer_id":76504974,"question_id":76504782,"body_markdown":"I am using the regular expression to solve the problem:\r\n\r\n\r\n     String patternString=&quot;(0{0,1}[1-9][A-F])|([1-2]{1}\\\\d{1}[A-F]{1})|(3{1}[0-4]{1}[A-F]{1})&quot;;\r\n        String data[]={&quot;34f&quot;,&quot;00F&quot;,&quot;01F&quot;,&quot;1a&quot;,&quot;1A&quot;,&quot;26b&quot;};\r\n        \r\n        for (int i=0;i &lt; data.length;i++){\r\n            System.out.println(data[i]+&quot;:&quot;+Pattern.matches(patternString, data[i]));\r\n        }\r\n\r\n     //expected result&quot;\r\n     //34f:false\r\n     //00F:false\r\n     //01F:true\r\n     //1a:false\r\n     //1A:true\r\n     //26b:false\r\n","title":"How to set integer and string range from string in Java","body":"<p>I am using the regular expression to solve the problem:</p>\n<pre><code> String patternString=&quot;(0{0,1}[1-9][A-F])|([1-2]{1}\\\\d{1}[A-F]{1})|(3{1}[0-4]{1}[A-F]{1})&quot;;\n    String data[]={&quot;34f&quot;,&quot;00F&quot;,&quot;01F&quot;,&quot;1a&quot;,&quot;1A&quot;,&quot;26b&quot;};\n    \n    for (int i=0;i &lt; data.length;i++){\n        System.out.println(data[i]+&quot;:&quot;+Pattern.matches(patternString, data[i]));\n    }\n\n //expected result&quot;\n //34f:false\n //00F:false\n //01F:true\n //1a:false\n //1A:true\n //26b:false\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2297089,"reputation":3607,"user_id":2018278,"accept_rate":53,"display_name":"The KNVB"},"score":1,"creation_date":1687164459,"post_id":76504980,"comment_id":134893373,"body_markdown":"Have you tested the &quot;15A&quot; and &quot;6B&quot;?","body":"Have you tested the &quot;15A&quot; and &quot;6B&quot;?"}],"tags":[],"owner":{"account_id":28779768,"reputation":1,"user_id":22041612,"display_name":"Santosh Tamang"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687164036,"creation_date":1687163997,"answer_id":76504980,"question_id":76504782,"body_markdown":"I would recommend you to use regex.\r\n\r\n    boolean result2 = Pattern.matches(&quot;[0-3][0-4]?[A-F]&quot;, &quot;34A&quot;); // Compiles and matches pattern\r\n\r\n    System.out.println(result2);\r\n\r\nThis pattern will fulfill your requirement.","title":"How to set integer and string range from string in Java","body":"<p>I would recommend you to use regex.</p>\n<pre><code>boolean result2 = Pattern.matches(&quot;[0-3][0-4]?[A-F]&quot;, &quot;34A&quot;); // Compiles and matches pattern\n\nSystem.out.println(result2);\n</code></pre>\n<p>This pattern will fulfill your requirement.</p>\n"},{"comments":[{"owner":{"account_id":19870679,"reputation":3,"user_id":14556896,"display_name":"noobcoder"},"score":0,"creation_date":1687165413,"post_id":76505070,"comment_id":134893560,"body_markdown":"wow thank you!!","body":"wow thank you!!"}],"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687808395,"creation_date":1687164777,"answer_id":76505070,"question_id":76504782,"body_markdown":"You can use regex with grouping to easily extract data from the string:\r\n```\r\npublic class RandomStuff {\r\n\r\n  public static void main(String[] args) {\r\n    String string = &quot;34F&quot;;\r\n    Pattern pattern = Pattern.compile(&quot;(\\\\d{1,2})([A-F])&quot;);\r\n    Matcher matcher = pattern.matcher(string);\r\n    if (!matcher.find()) {\r\n      System.out.println(&quot;does not match pattern, do whatever is needed&quot;);\r\n      //stop execution however applicable for use case\r\n    }\r\n    int number = Integer.parseInt(matcher.group(1));\r\n    if (number &lt; 1 || number &gt; 34) {\r\n      System.out.println(&quot;number not in range&quot;);//or other message\r\n    }\r\n    // no need to validate letters\r\n  }\r\n}\r\n```\r\n`(\\\\d{1,2})` - matches 1 or 2 numbers (0 to 99) and captures it as group 1.\r\n\r\n`([A-F])` matches a single letter (A, B, C, D, E or F) and captures result as group 2. If lower case letters are valid as well, you can add a case insensitive flag or add character set for lower letters as well - `[a-f]`, to this group.","title":"How to set integer and string range from string in Java","body":"<p>You can use regex with grouping to easily extract data from the string:</p>\n<pre><code>public class RandomStuff {\n\n  public static void main(String[] args) {\n    String string = &quot;34F&quot;;\n    Pattern pattern = Pattern.compile(&quot;(\\\\d{1,2})([A-F])&quot;);\n    Matcher matcher = pattern.matcher(string);\n    if (!matcher.find()) {\n      System.out.println(&quot;does not match pattern, do whatever is needed&quot;);\n      //stop execution however applicable for use case\n    }\n    int number = Integer.parseInt(matcher.group(1));\n    if (number &lt; 1 || number &gt; 34) {\n      System.out.println(&quot;number not in range&quot;);//or other message\n    }\n    // no need to validate letters\n  }\n}\n</code></pre>\n<p><code>(\\\\d{1,2})</code> - matches 1 or 2 numbers (0 to 99) and captures it as group 1.</p>\n<p><code>([A-F])</code> matches a single letter (A, B, C, D, E or F) and captures result as group 2. If lower case letters are valid as well, you can add a case insensitive flag or add character set for lower letters as well - <code>[a-f]</code>, to this group.</p>\n"},{"tags":[],"owner":{"account_id":28849164,"reputation":1,"user_id":22095425,"display_name":"wonglonglong"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687175951,"creation_date":1687175951,"answer_id":76506414,"question_id":76504782,"body_markdown":"Check the last character.And you can catch NumberFormatException when the parseInt gets an exception without last character.\r\n\r\n        String input = &quot;34F&quot;;\r\n        char lastc = input.charAt(input.length()-1);\r\n\r\n        if(lastc &gt;= &#39;A&#39; &amp;&amp; lastc &lt;= &#39;F&#39;){\r\n            try{\r\n                int n = (Integer.parseInt(input.substring(0,input.length()-1)));\r\n\r\n                if (n &gt; 34 || n &lt; 1) {\r\n                    System.out.println(&quot;number not in range&quot;);\r\n                }\r\n            } catch(NumberFormatException e1){\r\n                System.err.println(&quot;input error.check it.&quot;);\r\n            }\r\n        }else{\r\n            System.err.println(&quot;input error.check it.&quot;);\r\n        }","title":"How to set integer and string range from string in Java","body":"<p>Check the last character.And you can catch NumberFormatException when the parseInt gets an exception without last character.</p>\n<pre><code>    String input = &quot;34F&quot;;\n    char lastc = input.charAt(input.length()-1);\n\n    if(lastc &gt;= 'A' &amp;&amp; lastc &lt;= 'F'){\n        try{\n            int n = (Integer.parseInt(input.substring(0,input.length()-1)));\n\n            if (n &gt; 34 || n &lt; 1) {\n                System.out.println(&quot;number not in range&quot;);\n            }\n        } catch(NumberFormatException e1){\n            System.err.println(&quot;input error.check it.&quot;);\n        }\n    }else{\n        System.err.println(&quot;input error.check it.&quot;);\n    }\n</code></pre>\n"}],"owner":{"account_id":19870679,"reputation":3,"user_id":14556896,"display_name":"noobcoder"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76505070,"answer_count":6,"score":0,"last_activity_date":1687808395,"creation_date":1687162339,"question_id":76504782,"body_markdown":"The input given is `Integer` + `String`, however I want to set a range of integer input (1~34) and `String` (A~F).\r\nif I do, \r\n```Java   \r\nint i = (Integer.parseInt(input));\r\n\r\nif (n &gt; 34) {\r\n    System.out.println(&quot;number too high&quot;);\r\n}\r\n```\r\n\r\nit gives me \r\n\r\n```none\r\nException in thread &quot;main&quot; java.lang.NumberFormatException: For input string: &quot;35A&quot;\r\n```\r\nis there any way to make this work? thanks in advace :(\r\n\r\nif the string is 1A to 34F it should pass, anything over that should fail.. please help!","title":"How to set integer and string range from string in Java","body":"<p>The input given is <code>Integer</code> + <code>String</code>, however I want to set a range of integer input (1~34) and <code>String</code> (A~F).\nif I do,</p>\n<pre><code>int i = (Integer.parseInt(input));\n\nif (n &gt; 34) {\n    System.out.println(&quot;number too high&quot;);\n}\n</code></pre>\n<p>it gives me</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.NumberFormatException: For input string: &quot;35A&quot;\n</code></pre>\n<p>is there any way to make this work? thanks in advace :(</p>\n<p>if the string is 1A to 34F it should pass, anything over that should fail.. please help!</p>\n"},{"tags":["java","linked-list","nodes"],"answers":[{"comments":[{"owner":{"account_id":22308809,"reputation":3,"user_id":16533087,"display_name":"RudyDaCoder20"},"score":1,"creation_date":1687891013,"post_id":76559710,"comment_id":134999728,"body_markdown":"Thank you, this helps a lot !","body":"Thank you, this helps a lot !"},{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1687891049,"post_id":76559710,"comment_id":134999736,"body_markdown":"Glad to hear it helps!","body":"Glad to hear it helps!"}],"tags":[],"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687807880,"creation_date":1687807880,"answer_id":76559710,"question_id":76558326,"body_markdown":"&gt; After list1.next is ran, list1 will be: 2 -&gt; 4 from 1 -&gt; 2 -&gt; 4 After list2.next is ran, list2 will be 3 - &gt; 4 from 1 -&gt; 3 -&gt; 4\r\n\r\nYes, `list1` and `list2` are references that walk forward and thereby reference linked lists that are shorter and shorter...\r\n\r\n&gt; What I am confused about is when tempFinalHead.next is ran, wouldnt the previous nodes that it was holding be gone? How is it mainting the nodes previous?\r\n\r\nIndeed, if we only could rely on `tempFinalHead` those nodes would be lost forever. But... we still have `finalHead`! That node reference has not moved, and allows us to traverse the merged list.\r\n\r\nIt may help to visualise the process for the example input you have given. When the loop starts, we have `list1`, `list2` and a newly created node, referenced by both `finalHead` and `tempFinalHead`: \r\n\r\n```none\r\n                    list1\r\n                      ↓\r\n                    ┌───────────┐    ┌───────────┐    ┌───────────┐\r\ntempFinalHead       │ val:  1   │    │ val:  2   │    │ val:  4   │\r\nfinalHead           │ next: ────────►│ next: ────────►│ next:null │\r\n  ↓                 └───────────┘    └───────────┘    └───────────┘\r\n┌───────────┐\r\n│ val: 0    │\r\n│ next:null │\r\n└───────────┘\r\n                    ┌───────────┐    ┌───────────┐    ┌───────────┐\r\n                    │ val:  1   │    │ val:  3   │    │ val:  4   │\r\n                    │ next: ────────►│ next: ────────►│ next:null │\r\n                    └───────────┘    └───────────┘    └───────────┘\r\n                      ↑\r\n                    list2\r\n```\r\n\r\nAfter the first iteration, in which the `else` block was executed, three of the four references moved, and one `next` property was updated (rewired):\r\n\r\n```none\r\n                    list1\r\n                      ↓\r\n                    ┌───────────┐    ┌───────────┐    ┌───────────┐\r\n                    │ val:  1   │    │ val:  2   │    │ val:  4   │\r\nfinalHead           │ next: ────────►│ next: ────────►│ next:null │\r\n  ↓                 └───────────┘    └───────────┘    └───────────┘\r\n┌───────────┐\r\n│ val: 0    │\r\n│ next: ────────┐\r\n└───────────┘   │\r\n                │   ┌───────────┐    ┌───────────┐    ┌───────────┐\r\n                │   │ val:  1   │    │ val:  3   │    │ val:  4   │\r\n                └──►│ next: ────────►│ next: ────────►│ next:null │\r\n                    └───────────┘    └───────────┘    └───────────┘\r\n                      ↑                ↑\r\n                    tempFinalHead    list2\r\n```\r\n\r\nIt is important to see that when `list2` was assigned to the 0-node&#39;s `next` property, this instantly made the list that starts at `finalHead` longer!\r\n\r\nWe can look at the second iteration now. This time the `if` block executes, and we arrive in this situation:\r\n\r\n```none\r\n                    tempFinalHead    list1\r\n                      ↓                ↓\r\n                    ┌───────────┐    ┌───────────┐    ┌───────────┐\r\n                    │ val:  1   │    │ val:  2   │    │ val:  4   │\r\nfinalHead         ┌►│ next: ────────►│ next: ────────►│ next:null │\r\n  ↓               │ └───────────┘    └───────────┘    └───────────┘\r\n┌───────────┐     │\r\n│ val: 0    │     └──────────────┐\r\n│ next: ────────┐                │\r\n└───────────┘   │                │\r\n                │   ┌───────────┐│   ┌───────────┐    ┌───────────┐\r\n                │   │ val:  1   ││   │ val:  3   │    │ val:  4   │\r\n                └──►│ next: ─────┘   │ next: ────────►│ next:null │\r\n                    └───────────┘    └───────────┘    └───────────┘\r\n                                       ↑\r\n                                     list2\r\n```\r\n\r\nAt this point we can also see that `tempFinalHead` references the last node that was linked into its final position. We can traverse the list from `finalHead` -- which never moves -- and visit some nodes (0, 1, 1) which are in their final position. The first of these does not belong to the real data, and will be discarded at the end.\r\n\r\nThe above process continues until all nodes have been wired into their correct position. Once the loop completes and also one of the two `if` blocks after it executes, we end with this:\r\n\r\n```none\r\n                                                      tempFinalHead  list1 = null\r\n                                                        ↓\r\n                    ┌───────────┐    ┌───────────┐    ┌───────────┐\r\n                    │ val:  1   │    │ val:  2   │    │ val:  4   │\r\nfinalHead         ┌►│ next: ────────►│ next: ─────┐ ┌►│ next:null │\r\n  ↓               │ └───────────┘    └───────────┘│ │ └───────────┘\r\n┌───────────┐     │                               │ │\r\n│ val: 0    │     └──────────────┐ ┌──────────────┘ └──────────────┐\r\n│ next: ────────┐                │ │                               │\r\n└───────────┘   │                │ │                               │\r\n                │   ┌───────────┐│ │ ┌───────────┐    ┌───────────┐│ list2 = null\r\n                │   │ val:  1   ││ │ │ val:  3   │    │ val:  4   ││\r\n                └──►│ next: ─────┘ └►│ next: ────────►│ next: ─────┘\r\n                    └───────────┘    └───────────┘    └───────────┘\r\n```\r\n\r\nAnd finally `finalHead` moves one step forward, which results in discarding the dummy node that was created at the start (as it becomes unreachable). That reference is returned, and so the caller sees this:\r\n\r\n```none\r\n                    ┌───────────┐    ┌───────────┐    ┌───────────┐\r\n                    │ val:  1   │    │ val:  2   │    │ val:  4   │\r\n                  ┌►│ next: ────────►│ next: ─────┐ ┌►│ next:null │\r\n                  │ └───────────┘    └───────────┘│ │ └───────────┘\r\n                  │                               │ │\r\n                  └──────────────┐ ┌──────────────┘ └──────────────┐\r\n                                 │ │                               │\r\n                                 │ │                               │\r\n                    ┌───────────┐│ │ ┌───────────┐    ┌───────────┐│\r\n                    │ val:  1   ││ │ │ val:  3   │    │ val:  4   ││\r\n       (returned)──►│ next: ─────┘ └►│ next: ────────►│ next: ─────┘\r\n                    └───────────┘    └───────────┘    └───────────┘                     \r\n```","title":"How does .next work for Nodes? How does in some instance maintain its previous nodes and sometimes it does not?","body":"<blockquote>\n<p>After list1.next is ran, list1 will be: 2 -&gt; 4 from 1 -&gt; 2 -&gt; 4 After list2.next is ran, list2 will be 3 - &gt; 4 from 1 -&gt; 3 -&gt; 4</p>\n</blockquote>\n<p>Yes, <code>list1</code> and <code>list2</code> are references that walk forward and thereby reference linked lists that are shorter and shorter...</p>\n<blockquote>\n<p>What I am confused about is when tempFinalHead.next is ran, wouldnt the previous nodes that it was holding be gone? How is it mainting the nodes previous?</p>\n</blockquote>\n<p>Indeed, if we only could rely on <code>tempFinalHead</code> those nodes would be lost forever. But... we still have <code>finalHead</code>! That node reference has not moved, and allows us to traverse the merged list.</p>\n<p>It may help to visualise the process for the example input you have given. When the loop starts, we have <code>list1</code>, <code>list2</code> and a newly created node, referenced by both <code>finalHead</code> and <code>tempFinalHead</code>:</p>\n<pre class=\"lang-none prettyprint-override\"><code>                    list1\n                      ↓\n                    ┌───────────┐    ┌───────────┐    ┌───────────┐\ntempFinalHead       │ val:  1   │    │ val:  2   │    │ val:  4   │\nfinalHead           │ next: ────────►│ next: ────────►│ next:null │\n  ↓                 └───────────┘    └───────────┘    └───────────┘\n┌───────────┐\n│ val: 0    │\n│ next:null │\n└───────────┘\n                    ┌───────────┐    ┌───────────┐    ┌───────────┐\n                    │ val:  1   │    │ val:  3   │    │ val:  4   │\n                    │ next: ────────►│ next: ────────►│ next:null │\n                    └───────────┘    └───────────┘    └───────────┘\n                      ↑\n                    list2\n</code></pre>\n<p>After the first iteration, in which the <code>else</code> block was executed, three of the four references moved, and one <code>next</code> property was updated (rewired):</p>\n<pre class=\"lang-none prettyprint-override\"><code>                    list1\n                      ↓\n                    ┌───────────┐    ┌───────────┐    ┌───────────┐\n                    │ val:  1   │    │ val:  2   │    │ val:  4   │\nfinalHead           │ next: ────────►│ next: ────────►│ next:null │\n  ↓                 └───────────┘    └───────────┘    └───────────┘\n┌───────────┐\n│ val: 0    │\n│ next: ────────┐\n└───────────┘   │\n                │   ┌───────────┐    ┌───────────┐    ┌───────────┐\n                │   │ val:  1   │    │ val:  3   │    │ val:  4   │\n                └──►│ next: ────────►│ next: ────────►│ next:null │\n                    └───────────┘    └───────────┘    └───────────┘\n                      ↑                ↑\n                    tempFinalHead    list2\n</code></pre>\n<p>It is important to see that when <code>list2</code> was assigned to the 0-node's <code>next</code> property, this instantly made the list that starts at <code>finalHead</code> longer!</p>\n<p>We can look at the second iteration now. This time the <code>if</code> block executes, and we arrive in this situation:</p>\n<pre class=\"lang-none prettyprint-override\"><code>                    tempFinalHead    list1\n                      ↓                ↓\n                    ┌───────────┐    ┌───────────┐    ┌───────────┐\n                    │ val:  1   │    │ val:  2   │    │ val:  4   │\nfinalHead         ┌►│ next: ────────►│ next: ────────►│ next:null │\n  ↓               │ └───────────┘    └───────────┘    └───────────┘\n┌───────────┐     │\n│ val: 0    │     └──────────────┐\n│ next: ────────┐                │\n└───────────┘   │                │\n                │   ┌───────────┐│   ┌───────────┐    ┌───────────┐\n                │   │ val:  1   ││   │ val:  3   │    │ val:  4   │\n                └──►│ next: ─────┘   │ next: ────────►│ next:null │\n                    └───────────┘    └───────────┘    └───────────┘\n                                       ↑\n                                     list2\n</code></pre>\n<p>At this point we can also see that <code>tempFinalHead</code> references the last node that was linked into its final position. We can traverse the list from <code>finalHead</code> -- which never moves -- and visit some nodes (0, 1, 1) which are in their final position. The first of these does not belong to the real data, and will be discarded at the end.</p>\n<p>The above process continues until all nodes have been wired into their correct position. Once the loop completes and also one of the two <code>if</code> blocks after it executes, we end with this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>                                                      tempFinalHead  list1 = null\n                                                        ↓\n                    ┌───────────┐    ┌───────────┐    ┌───────────┐\n                    │ val:  1   │    │ val:  2   │    │ val:  4   │\nfinalHead         ┌►│ next: ────────►│ next: ─────┐ ┌►│ next:null │\n  ↓               │ └───────────┘    └───────────┘│ │ └───────────┘\n┌───────────┐     │                               │ │\n│ val: 0    │     └──────────────┐ ┌──────────────┘ └──────────────┐\n│ next: ────────┐                │ │                               │\n└───────────┘   │                │ │                               │\n                │   ┌───────────┐│ │ ┌───────────┐    ┌───────────┐│ list2 = null\n                │   │ val:  1   ││ │ │ val:  3   │    │ val:  4   ││\n                └──►│ next: ─────┘ └►│ next: ────────►│ next: ─────┘\n                    └───────────┘    └───────────┘    └───────────┘\n</code></pre>\n<p>And finally <code>finalHead</code> moves one step forward, which results in discarding the dummy node that was created at the start (as it becomes unreachable). That reference is returned, and so the caller sees this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>                    ┌───────────┐    ┌───────────┐    ┌───────────┐\n                    │ val:  1   │    │ val:  2   │    │ val:  4   │\n                  ┌►│ next: ────────►│ next: ─────┐ ┌►│ next:null │\n                  │ └───────────┘    └───────────┘│ │ └───────────┘\n                  │                               │ │\n                  └──────────────┐ ┌──────────────┘ └──────────────┐\n                                 │ │                               │\n                                 │ │                               │\n                    ┌───────────┐│ │ ┌───────────┐    ┌───────────┐│\n                    │ val:  1   ││ │ │ val:  3   │    │ val:  4   ││\n       (returned)──►│ next: ─────┘ └►│ next: ────────►│ next: ─────┘\n                    └───────────┘    └───────────┘    └───────────┘                     \n</code></pre>\n"}],"owner":{"account_id":22308809,"reputation":3,"user_id":16533087,"display_name":"RudyDaCoder20"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76559710,"answer_count":1,"score":-1,"last_activity_date":1687807880,"creation_date":1687794868,"question_id":76558326,"body_markdown":"I am a beginner in programming and I have a quick question on how the .next works for ListNodes. Here is my code below for one of the LeetCode problems: \r\n\r\n\r\n    class Solution \r\n    {\r\n        public ListNode mergeTwoLists(ListNode list1, ListNode list2) \r\n        {\r\n            ListNode finalHead = new ListNode(0);\r\n            ListNode tempFinalHead = finalHead;\r\n    \r\n            while(list1 != null &amp;&amp; list2 != null)\r\n            {\r\n                if(list1.val &lt; list2.val)\r\n                {\r\n                    tempFinalHead.next = list1;\r\n                    list1 = list1.next; //this line\r\n                }\r\n                else\r\n                {\r\n                    tempFinalHead.next = list2;\r\n                    list2 = list2.next; //this line\r\n                }\r\n    \r\n                tempFinalHead = tempFinalHead.next; //this line\r\n            }\r\n    \r\n            if(list1 != null)\r\n            {\r\n                tempFinalHead.next = list1;\r\n                list1 = list1.next;\r\n            }\r\n    \r\n            if(list2 != null)\r\n            {\r\n                tempFinalHead.next = list2;\r\n                list2 = list2.next;\r\n            }\r\n    \r\n            return finalHead.next;\r\n        }\r\n    }\r\n\r\nI commented on 3 instances where we are updating the ListNode using .next. I was wondering, how is the tempFinalHead of code for &quot;tempFinalHead = tempFinalHead.next;&quot; previous nodes being maintained? To elaborate here is an example:\r\n\r\nSay this is my input: \r\nInput: list1 = [1,2,4], list2 = [1,3,4]\r\nOutput: [1,1,2,3,4,4]\r\n\r\nAfter list1.next is ran, list1 will be: 2 -&gt; 4 from 1 -&gt; 2 -&gt; 4\r\nAfter list2.next is ran, list2 will be 3 - &gt; 4 from 1 -&gt; 3 -&gt; 4\r\n\r\nWhat I am confused about is when tempFinalHead.next is ran, wouldnt the previous nodes that it was holding be gone? How is it mainting the nodes previous? \r\n\r\n\r\nThe output ended up being correct but just don&#39;t understand how tempFinalHead.next maintains all previous nodes since we are replacing it everytime with .next.","title":"How does .next work for Nodes? How does in some instance maintain its previous nodes and sometimes it does not?","body":"<p>I am a beginner in programming and I have a quick question on how the .next works for ListNodes. Here is my code below for one of the LeetCode problems:</p>\n<pre><code>class Solution \n{\n    public ListNode mergeTwoLists(ListNode list1, ListNode list2) \n    {\n        ListNode finalHead = new ListNode(0);\n        ListNode tempFinalHead = finalHead;\n\n        while(list1 != null &amp;&amp; list2 != null)\n        {\n            if(list1.val &lt; list2.val)\n            {\n                tempFinalHead.next = list1;\n                list1 = list1.next; //this line\n            }\n            else\n            {\n                tempFinalHead.next = list2;\n                list2 = list2.next; //this line\n            }\n\n            tempFinalHead = tempFinalHead.next; //this line\n        }\n\n        if(list1 != null)\n        {\n            tempFinalHead.next = list1;\n            list1 = list1.next;\n        }\n\n        if(list2 != null)\n        {\n            tempFinalHead.next = list2;\n            list2 = list2.next;\n        }\n\n        return finalHead.next;\n    }\n}\n</code></pre>\n<p>I commented on 3 instances where we are updating the ListNode using .next. I was wondering, how is the tempFinalHead of code for &quot;tempFinalHead = tempFinalHead.next;&quot; previous nodes being maintained? To elaborate here is an example:</p>\n<p>Say this is my input:\nInput: list1 = [1,2,4], list2 = [1,3,4]\nOutput: [1,1,2,3,4,4]</p>\n<p>After list1.next is ran, list1 will be: 2 -&gt; 4 from 1 -&gt; 2 -&gt; 4\nAfter list2.next is ran, list2 will be 3 - &gt; 4 from 1 -&gt; 3 -&gt; 4</p>\n<p>What I am confused about is when tempFinalHead.next is ran, wouldnt the previous nodes that it was holding be gone? How is it mainting the nodes previous?</p>\n<p>The output ended up being correct but just don't understand how tempFinalHead.next maintains all previous nodes since we are replacing it everytime with .next.</p>\n"},{"tags":["java","spring","spring-integration"],"answers":[{"comments":[{"owner":{"account_id":1299567,"reputation":51,"user_id":1249779,"accept_rate":38,"display_name":"mr.ANDREW"},"score":0,"creation_date":1687955707,"post_id":76559664,"comment_id":135008816,"body_markdown":"thanks for you quick answer ! Perhaps you could suggest how to call several procedures through the same gateway. I have seen in the documentation about BeanPropertySqlParameterSourceFactory using payload as input parameters to a procedure. But what about mapping, If I need different RowMapper ? Or should I create multiple StoredProcExecutor beans and pass them to the StoredProcOutboundGateway ?","body":"thanks for you quick answer ! Perhaps you could suggest how to call several procedures through the same gateway. I have seen in the documentation about BeanPropertySqlParameterSourceFactory using payload as input parameters to a procedure. But what about mapping, If I need different RowMapper ? Or should I create multiple StoredProcExecutor beans and pass them to the StoredProcOutboundGateway ?"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1687960161,"post_id":76559664,"comment_id":135009961,"body_markdown":"I see what you mean, but no: even if we can determine the procedure at runtime against request message, we still cannot have dynamic `RowMapper`. You have to create several `StoredProcOutboundGateway`  service activators.","body":"I see what you mean, but no: even if we can determine the procedure at runtime against request message, we still cannot have dynamic <code>RowMapper</code>. You have to create several <code>StoredProcOutboundGateway</code>  service activators."},{"owner":{"account_id":1299567,"reputation":51,"user_id":1249779,"accept_rate":38,"display_name":"mr.ANDREW"},"score":0,"creation_date":1687971771,"post_id":76559664,"comment_id":135012623,"body_markdown":"Thank you very much, I will try!\nThere are many unclear points for me.","body":"Thank you very much, I will try! There are many unclear points for me."}],"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687807383,"creation_date":1687807383,"answer_id":76559664,"question_id":76559211,"body_markdown":"Spring Integration with its loosely-coupled architecture based on messaging is really suitable for any tasks. Plus luckily there are already out-of-the-box components to help you to build the solution. And you are really on the right track: to send request and receive replies over TCP/IP you indeed need the pair of those gateways: \r\n\r\nhttps://docs.spring.io/spring-integration/docs/current/reference/html/ip.html#tcp-gateways\r\n\r\nAnd yes, the `StoredProcOutboundGateway` is exactly for use-case where we would like to perform some RDBMS stored procedure and get some result from there:\r\nhttps://docs.spring.io/spring-integration/docs/current/reference/html/jdbc.html#stored-procedure-outbound-gateway\r\n\r\nI don&#39;t see a reason, though, in calling several procedures sequentially from the application, where we can simply do that on DB side with one procedure all together.","title":"Sending request from tcp client to server with spring integration and receiving data from stored procedure","body":"<p>Spring Integration with its loosely-coupled architecture based on messaging is really suitable for any tasks. Plus luckily there are already out-of-the-box components to help you to build the solution. And you are really on the right track: to send request and receive replies over TCP/IP you indeed need the pair of those gateways:</p>\n<p><a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/ip.html#tcp-gateways\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/docs/current/reference/html/ip.html#tcp-gateways</a></p>\n<p>And yes, the <code>StoredProcOutboundGateway</code> is exactly for use-case where we would like to perform some RDBMS stored procedure and get some result from there:\n<a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/jdbc.html#stored-procedure-outbound-gateway\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/docs/current/reference/html/jdbc.html#stored-procedure-outbound-gateway</a></p>\n<p>I don't see a reason, though, in calling several procedures sequentially from the application, where we can simply do that on DB side with one procedure all together.</p>\n"}],"owner":{"account_id":1299567,"reputation":51,"user_id":1249779,"accept_rate":38,"display_name":"mr.ANDREW"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":76559664,"answer_count":1,"score":-3,"last_activity_date":1687807383,"creation_date":1687802793,"question_id":76559211,"body_markdown":"I&#39;m a new in Spring Integration framework and want to realize some scheme.\r\n\r\n    Spring Tcp client -&gt; Spring Tcp Server -&gt; Database\r\n\r\nSeveral clients periodically send their configuration and receive information from the database in response. The server contains some logic by calling several stored procedures in sequence. For example, the data from the DB cursor can be input parameters to another stored procedure.\r\n\r\nHelp me please, Is this framework suitable for such tasks ?\r\n\r\nDo I understand correctly that I need to implement a TCP gateway in the client, a TCP gateway and a JDBC gateway in the server ?\r\n\r\nAnd maybe you can tell what difficulties I will have to face with such an implementation?","title":"Sending request from tcp client to server with spring integration and receiving data from stored procedure","body":"<p>I'm a new in Spring Integration framework and want to realize some scheme.</p>\n<pre><code>Spring Tcp client -&gt; Spring Tcp Server -&gt; Database\n</code></pre>\n<p>Several clients periodically send their configuration and receive information from the database in response. The server contains some logic by calling several stored procedures in sequence. For example, the data from the DB cursor can be input parameters to another stored procedure.</p>\n<p>Help me please, Is this framework suitable for such tasks ?</p>\n<p>Do I understand correctly that I need to implement a TCP gateway in the client, a TCP gateway and a JDBC gateway in the server ?</p>\n<p>And maybe you can tell what difficulties I will have to face with such an implementation?</p>\n"},{"tags":["java","xml","encoding"],"answers":[{"comments":[{"owner":{"account_id":6328,"reputation":10132,"user_id":10592,"accept_rate":79,"display_name":"Tim Cooper"},"score":28,"creation_date":1258352622,"post_id":439311,"comment_id":1621290,"body_markdown":"Can you recommend such a library?  (I find it surprising that this is not a standard part of Java edition 5...such a common task).","body":"Can you recommend such a library?  (I find it surprising that this is not a standard part of Java edition 5...such a common task)."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1258352912,"post_id":439311,"comment_id":1621310,"body_markdown":"XML *is* part of the standard Java framework - look in org.w3c.sax and org.w3c.dom. However, there are some easier-to-use framework around as well, such as JDom. Note that there may not be an &quot;encoding strings for XML output&quot; method - I was more recommending that the whole XML task should be done with a library rather than just doing bits at a time with string manipulation.","body":"XML <i>is</i> part of the standard Java framework - look in org.w3c.sax and org.w3c.dom. However, there are some easier-to-use framework around as well, such as JDom. Note that there may not be an &quot;encoding strings for XML output&quot; method - I was more recommending that the whole XML task should be done with a library rather than just doing bits at a time with string manipulation."},{"owner":{"account_id":16868,"reputation":19586,"user_id":37193,"accept_rate":64,"display_name":"Stephen"},"score":1,"creation_date":1263379504,"post_id":439311,"comment_id":1983586,"body_markdown":"This is not such useful advice when outputting XHTML - FlyingSaucer requires XML, but there ain&#39;t no way I&#39;m templating through an XML lib :).  Thankfully StringTemplate allows me to quickly escape all String objects.","body":"This is not such useful advice when outputting XHTML - FlyingSaucer requires XML, but there ain&#39;t no way I&#39;m templating through an XML lib :).  Thankfully StringTemplate allows me to quickly escape all String objects."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1263381554,"post_id":439311,"comment_id":1983743,"body_markdown":"@Stephen: I would expect an XHTML library to use an XML library to keep everything sane, but expose an XHTML-centric API. Having to do escaping manually (and make sure you get it right *everywhere*) is not a great idea IMO.","body":"@Stephen: I would expect an XHTML library to use an XML library to keep everything sane, but expose an XHTML-centric API. Having to do escaping manually (and make sure you get it right <i>everywhere</i>) is not a great idea IMO."},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1274255705,"post_id":439311,"comment_id":2908356,"body_markdown":"To convert a DOM tree to an XML-string, use a transformer without a style sheet.","body":"To convert a DOM tree to an XML-string, use a transformer without a style sheet."},{"owner":{"account_id":539739,"reputation":39728,"user_id":907695,"accept_rate":71,"display_name":"Pointer Null"},"score":0,"creation_date":1333655406,"post_id":439311,"comment_id":12836308,"body_markdown":"I wouldn&#39;t call it &quot;Very simply&quot;. Some platforms don&#39;t have xml generation library, yet you may need to encode some text into xml. Adding few hundreds KB of lib just due to this task is not simple, and not wanted. I wouln&#39;t accept this answer.","body":"I wouldn&#39;t call it &quot;Very simply&quot;. Some platforms don&#39;t have xml generation library, yet you may need to encode some text into xml. Adding few hundreds KB of lib just due to this task is not simple, and not wanted. I wouln&#39;t accept this answer."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":5,"creation_date":1333655578,"post_id":439311,"comment_id":12836374,"body_markdown":"@mice: The question is tagged Java, and Java has *lots* of XML libraries. Indeed, there are XML APIs baked into Java, so there&#39;d be no need to add *anything* else... but even if you did, a few hundred K is rarely a problem outside mobile these days. Even if it weren&#39;t Java, I&#39;d be very wary of developing on a platform which didn&#39;t have any XML APIs...","body":"@mice: The question is tagged Java, and Java has <i>lots</i> of XML libraries. Indeed, there are XML APIs baked into Java, so there&#39;d be no need to add <i>anything</i> else... but even if you did, a few hundred K is rarely a problem outside mobile these days. Even if it weren&#39;t Java, I&#39;d be very wary of developing on a platform which didn&#39;t have any XML APIs..."},{"owner":{"account_id":539739,"reputation":39728,"user_id":907695,"accept_rate":71,"display_name":"Pointer Null"},"score":0,"creation_date":1333655754,"post_id":439311,"comment_id":12836436,"body_markdown":"I&#39;m considering Android. It uses Java, and Apps have to be small. It has xml parsers, but I&#39;m not aware of opposite (is it called &quot;xml serializer&quot;?).","body":"I&#39;m considering Android. It uses Java, and Apps have to be small. It has xml parsers, but I&#39;m not aware of opposite (is it called &quot;xml serializer&quot;?)."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1333656193,"post_id":439311,"comment_id":12836579,"body_markdown":"@mice: The DOM API is perfectly capable of generating XML. Or there are fairly small third-party libraries. (JDom&#39;s jar file is 114K for example.) **Using an XML API is still the recommended way of creating XML.**","body":"@mice: The DOM API is perfectly capable of generating XML. Or there are fairly small third-party libraries. (JDom&#39;s jar file is 114K for example.) <b>Using an XML API is still the recommended way of creating XML.</b>"},{"owner":{"account_id":539739,"reputation":39728,"user_id":907695,"accept_rate":71,"display_name":"Pointer Null"},"score":0,"creation_date":1333657079,"post_id":439311,"comment_id":12836872,"body_markdown":"What about this: http://stackoverflow.com/questions/439298/best-way-to-encode-text-data-for-xml-in-java/10035382#10035382 for simple purpose of escaping xml text (not building xml).","body":"What about this: <a href=\"http://stackoverflow.com/questions/439298/best-way-to-encode-text-data-for-xml-in-java/10035382#10035382\" title=\"best way to encode text data for xml in java\">stackoverflow.com/questions/439298/&hellip;</a> for simple purpose of escaping xml text (not building xml)."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1333657602,"post_id":439311,"comment_id":12837027,"body_markdown":"@mice: I think I&#39;ve made my position pretty clear. If I want to do anything with XML, I&#39;ll use an XML API. That&#39;s what they&#39;re good at. In my experience it&#39;s pretty rare to need to escape XML when you&#39;re not *building* XML. I&#39;m not going to comment on the suitability of some code I wouldn&#39;t use in principle. (EDIT: Actually, I will in this case. I&#39;ll comment directly.)","body":"@mice: I think I&#39;ve made my position pretty clear. If I want to do anything with XML, I&#39;ll use an XML API. That&#39;s what they&#39;re good at. In my experience it&#39;s pretty rare to need to escape XML when you&#39;re not <i>building</i> XML. I&#39;m not going to comment on the suitability of some code I wouldn&#39;t use in principle. (EDIT: Actually, I will in this case. I&#39;ll comment directly.)"},{"owner":{"account_id":539739,"reputation":39728,"user_id":907695,"accept_rate":71,"display_name":"Pointer Null"},"score":0,"creation_date":1333657905,"post_id":439311,"comment_id":12837121,"body_markdown":"No problem with your approach. However I use such code, which creates xml by String.printf and filling in some text in pre-constructed xml string. You may use xml lib, I can&#39;t in my specific case.","body":"No problem with your approach. However I use such code, which creates xml by String.printf and filling in some text in pre-constructed xml string. You may use xml lib, I can&#39;t in my specific case."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1333658153,"post_id":439311,"comment_id":12837188,"body_markdown":"@mice: It sounds like you may have picked a bad tool to start with then. Any library which is creating XML for me and inserting bits of text into it should be doing the escaping itself. It&#39;s not easy getting the full picture of what your specific requirements are in comments, but I certainly stand by my answer.","body":"@mice: It sounds like you may have picked a bad tool to start with then. Any library which is creating XML for me and inserting bits of text into it should be doing the escaping itself. It&#39;s not easy getting the full picture of what your specific requirements are in comments, but I certainly stand by my answer."},{"owner":{"account_id":19380,"reputation":2903,"user_id":45390,"accept_rate":81,"display_name":"Hannes de Jager"},"score":1,"creation_date":1347263127,"post_id":439311,"comment_id":16578281,"body_markdown":"Just a general observation seeing that the word &quot;right&quot; is emphasized: By just using any XML library it doesn&#39;t guarantee that it will be right ;-). Library developers are also human. Of course you&#39;b be pretty safe with standard stuff or something like Apache Commons Lang... just ever so often amazed by how people just trust other people&#39;s code blindly...","body":"Just a general observation seeing that the word &quot;right&quot; is emphasized: By just using any XML library it doesn&#39;t guarantee that it will be right ;-). Library developers are also human. Of course you&#39;b be pretty safe with standard stuff or something like Apache Commons Lang... just ever so often amazed by how people just trust other people&#39;s code blindly..."},{"owner":{"account_id":2111435,"reputation":4511,"user_id":1876644,"accept_rate":71,"display_name":"Charu Khurana"},"score":0,"creation_date":1398104459,"post_id":439311,"comment_id":35492278,"body_markdown":"@JonSkeet I am converting csv file to xml just using Java (no groovy). What kind of XML libraries are out there for such conversion? Thanks!","body":"@JonSkeet I am converting csv file to xml just using Java (no groovy). What kind of XML libraries are out there for such conversion? Thanks!"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1398104574,"post_id":439311,"comment_id":35492343,"body_markdown":"@Learner: There are loads. You might want to start with jdom.","body":"@Learner: There are loads. You might want to start with jdom."},{"owner":{"account_id":239789,"reputation":29819,"user_id":509627,"accept_rate":63,"display_name":"David Thielen"},"score":0,"creation_date":1528663549,"post_id":439311,"comment_id":88582082,"body_markdown":"We are using the woodstox stax library and it does not have a way of writing text where it will encode the special characters. It has the call writeCharacters but it doesn&#39;t encode &gt; (does encode &lt;).","body":"We are using the woodstox stax library and it does not have a way of writing text where it will encode the special characters. It has the call writeCharacters but it doesn&#39;t encode &gt; (does encode &lt;)."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1528685039,"post_id":439311,"comment_id":88585854,"body_markdown":"@DavidThielen That doesn&#39;t need to be encoded. It often is, but IIRC the XML spec calls it out as being okay not to be encoded.","body":"@DavidThielen That doesn&#39;t need to be encoded. It often is, but IIRC the XML spec calls it out as being okay not to be encoded."},{"owner":{"account_id":4808299,"reputation":1399,"user_id":3882565,"accept_rate":81,"display_name":"stonar96"},"score":0,"creation_date":1577278304,"post_id":439311,"comment_id":105134090,"body_markdown":"Be carefully! XML and therefore also the DOM API only supports characters in the ranges #x9 | #xA | #xD | [#x20-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF]. If you want to use characters outside of this ranges you have to escape them with an own escaping system additionally. You can use my methods here https://stackoverflow.com/a/59475093/3882565.","body":"Be carefully! XML and therefore also the DOM API only supports characters in the ranges #x9 | #xA | #xD | [#x20-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF]. If you want to use characters outside of this ranges you have to escape them with an own escaping system additionally. You can use my methods here <a href=\"https://stackoverflow.com/a/59475093/3882565\">stackoverflow.com/a/59475093/3882565</a>."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1577351302,"post_id":439311,"comment_id":105147391,"body_markdown":"@stonar96 Yes, I&#39;ve been assuming that a valid XML document is the desired result. If you need to express things that can&#39;t be expressed in XML, that&#39;s a bigger problem. It&#39;s a shame that XML 1.1 never really took off, as that fixes this problem.","body":"@stonar96 Yes, I&#39;ve been assuming that a valid XML document is the desired result. If you need to express things that can&#39;t be expressed in XML, that&#39;s a bigger problem. It&#39;s a shame that XML 1.1 never really took off, as that fixes this problem."},{"owner":{"account_id":241158,"reputation":9333,"user_id":511804,"accept_rate":56,"display_name":"Alexandr"},"score":0,"creation_date":1585328551,"post_id":439311,"comment_id":107730230,"body_markdown":"Sorry man, I downvoted it and was wrong. Now cannot change it back. This answer is correct","body":"Sorry man, I downvoted it and was wrong. Now cannot change it back. This answer is correct"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1585332769,"post_id":439311,"comment_id":107732165,"body_markdown":"@Alexandr: Really not a problem :)","body":"@Alexandr: Really not a problem :)"}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":22,"down_vote_count":15,"up_vote_count":52,"is_accepted":true,"score":37,"last_activity_date":1231859913,"creation_date":1231859913,"answer_id":439311,"question_id":439298,"body_markdown":"Very simply: use an XML library. That way it will actually be *right* instead of requiring detailed knowledge of bits of the XML spec.","title":"Best way to encode text data for XML in Java?","body":"<p>Very simply: use an XML library. That way it will actually be <em>right</em> instead of requiring detailed knowledge of bits of the XML spec.</p>\n"},{"comments":[{"owner":{"account_id":3444525,"reputation":3069,"user_id":2885656,"accept_rate":94,"display_name":"Software Craftsman"},"score":0,"creation_date":1520413267,"post_id":439315,"comment_id":85300145,"body_markdown":"Your link is in Spanish, which is not so helpful for the most of us. Better is [this one](http://en.wikipedia.org/wiki/JAXP).","body":"Your link is in Spanish, which is not so helpful for the most of us. Better is <a href=\"http://en.wikipedia.org/wiki/JAXP\" rel=\"nofollow noreferrer\">this one</a>."}],"tags":[],"owner":{"account_id":16147,"reputation":11216,"user_id":34880,"accept_rate":73,"display_name":"Fernando Migu&#233;lez"},"comment_count":1,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1231859937,"creation_date":1231859937,"answer_id":439315,"question_id":439298,"body_markdown":"Use [JAXP][1] and forget about text handling it will be done for you automatically.\r\n\r\n\r\n  [1]: http://es.wikipedia.org/wiki/JAXP","title":"Best way to encode text data for XML in Java?","body":"<p>Use <a href=\"http://es.wikipedia.org/wiki/JAXP\" rel=\"nofollow noreferrer\">JAXP</a> and forget about text handling it will be done for you automatically.</p>\n"},{"comments":[{"owner":{"account_id":8112,"reputation":64602,"user_id":14419,"accept_rate":100,"display_name":"Mads Hansen"},"score":12,"creation_date":1242489913,"post_id":439459,"comment_id":680156,"body_markdown":"In most cases, that is not what you should do.  Too many people abuse the CDATA tags.  The intent of the CDATA is to tell the processor not to process it as XML and just pass it through.  If you are trying to create an XML file, then you should be creating XML, not just passing bytes through some wrapping element.","body":"In most cases, that is not what you should do.  Too many people abuse the CDATA tags.  The intent of the CDATA is to tell the processor not to process it as XML and just pass it through.  If you are trying to create an XML file, then you should be creating XML, not just passing bytes through some wrapping element."},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":2,"creation_date":1274255805,"post_id":439459,"comment_id":2908368,"body_markdown":"@Mads, using CDATA results in a valid XML file so it is just as fine as doing it the &quot;right way&quot;.  If you dislike it, then parse it afterwards, identity transform it, and print it.","body":"@Mads, using CDATA results in a valid XML file so it is just as fine as doing it the &quot;right way&quot;.  If you dislike it, then parse it afterwards, identity transform it, and print it."},{"owner":{"account_id":107907,"reputation":40512,"user_id":286685,"accept_rate":56,"display_name":"Stijn de Witt"},"score":26,"creation_date":1292330367,"post_id":439459,"comment_id":4846564,"body_markdown":"If you wrap text in a CDATA element you have to escape the CDATA closing marker: &quot;]]&gt;&quot;... except you cannot escape that. So instead you have to break your code into pieces where you put half of the data in one CDATA element and the other half in a second: &lt;![CDATA[This data contain a CDATA closing marker: &quot;]]]]&gt;&lt;![CDATA[&gt;&quot; that is why it had to be split up.]]&gt;   ... In the end it may be a lot simpler to just escape &#39;&lt;&#39;, &#39;&gt;&#39; and &#39;&amp;&#39; instead. Of course many apps ignore the potential problem with CDATA closing markers in the data. Ignorance is bliss I guess. :)","body":"If you wrap text in a CDATA element you have to escape the CDATA closing marker: &quot;]]&gt;&quot;... except you cannot escape that. So instead you have to break your code into pieces where you put half of the data in one CDATA element and the other half in a second: &lt;![CDATA[This data contain a CDATA closing marker: &quot;]]]]&gt;&lt;![CDATA[&gt;&quot; that is why it had to be split up.]]&gt;   ... In the end it may be a lot simpler to just escape &#39;&lt;&#39;, &#39;&gt;&#39; and &#39;&amp;&#39; instead. Of course many apps ignore the potential problem with CDATA closing markers in the data. Ignorance is bliss I guess. :)"},{"owner":{"account_id":303087,"reputation":8621,"user_id":611819,"accept_rate":100,"display_name":"dnault"},"score":3,"creation_date":1417819960,"post_id":439459,"comment_id":43111031,"body_markdown":"@StijndeWitt is absolutely correct. CDATA is not a panacea for escaping special characters.","body":"@StijndeWitt is absolutely correct. CDATA is not a panacea for escaping special characters."},{"owner":{"account_id":3116542,"reputation":1299,"user_id":3450840,"accept_rate":56,"display_name":"Florian F"},"score":0,"creation_date":1582192276,"post_id":439459,"comment_id":106695344,"body_markdown":"This is a bad idea.  CDATA does not allow any character outside of the XML&#39;s encoding.","body":"This is a bad idea.  CDATA does not allow any character outside of the XML&#39;s encoding."},{"owner":{"account_id":5428050,"reputation":103,"user_id":4319757,"accept_rate":25,"display_name":"Rohit Kumar"},"score":0,"creation_date":1596696437,"post_id":439459,"comment_id":111894828,"body_markdown":"In XML file (Java and DOM Parser), &quot;&amp;lt;&quot; is present as node text value but when node.getContentType is used for this node then this is converted to &quot;&lt;&quot;. Is there anyway to retrieve &quot;&amp;lt;&quot; itself, instead of  &quot;&lt;&quot;?","body":"In XML file (Java and DOM Parser), &quot;&amp;lt;&quot; is present as node text value but when node.getContentType is used for this node then this is converted to &quot;&lt;&quot;. Is there anyway to retrieve &quot;&amp;lt;&quot; itself, instead of  &quot;&lt;&quot;?"}],"tags":[],"owner":{"account_id":11372,"reputation":7119,"user_id":21896,"accept_rate":40,"display_name":"ng."},"comment_count":6,"down_vote_count":6,"up_vote_count":26,"is_accepted":false,"score":20,"last_activity_date":1231861700,"creation_date":1231861700,"answer_id":439459,"question_id":439298,"body_markdown":"Just use.\r\n\r\n    &lt;![CDATA[ your text here ]]&gt;\r\n\r\nThis will allow any characters except the ending \r\n\r\n    ]]&gt;\r\n\r\nSo you can include characters that would be illegal such as &amp; and &gt;. For example.\r\n\r\n    &lt;element&gt;&lt;![CDATA[ characters such as &amp; and &gt; are allowed ]]&gt;&lt;/element&gt;\r\n\r\nHowever, attributes will need to be escaped as CDATA blocks can not be used for them.\r\n","title":"Best way to encode text data for XML in Java?","body":"<p>Just use.</p>\n\n<pre><code>&lt;![CDATA[ your text here ]]&gt;\n</code></pre>\n\n<p>This will allow any characters except the ending </p>\n\n<pre><code>]]&gt;\n</code></pre>\n\n<p>So you can include characters that would be illegal such as &amp; and >. For example.</p>\n\n<pre><code>&lt;element&gt;&lt;![CDATA[ characters such as &amp; and &gt; are allowed ]]&gt;&lt;/element&gt;\n</code></pre>\n\n<p>However, attributes will need to be escaped as CDATA blocks can not be used for them.</p>\n"},{"comments":[{"owner":{"account_id":4942,"reputation":15741,"user_id":7679,"accept_rate":100,"display_name":"Chase Seibert"},"score":0,"creation_date":1231871548,"post_id":439494,"comment_id":262297,"body_markdown":"This could be the way to go if you don&#39;t care about absolute correctness, for example if you are putting together a prototype.","body":"This could be the way to go if you don&#39;t care about absolute correctness, for example if you are putting together a prototype."},{"owner":{"account_id":306937,"reputation":464,"user_id":617969,"display_name":"Oleg K"},"score":3,"creation_date":1297796644,"post_id":439494,"comment_id":74462213,"body_markdown":"Use `StringEscapeUtils.escapeXml(str)` from [`commons-lang`](http://commons.apache.org/proper/commons-lang/). I use it in App Engine application - work like a charm. Here is the [Java Doc](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringEscapeUtils.html) for this function:","body":"Use <code>StringEscapeUtils.escapeXml(str)</code> from <a href=\"http://commons.apache.org/proper/commons-lang/\" rel=\"nofollow noreferrer\"><code>commons-lang</code></a>. I use it in App Engine application - work like a charm. Here is the <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringEscapeUtils.html\" rel=\"nofollow noreferrer\">Java Doc</a> for this function:"},{"owner":{"account_id":428023,"reputation":15099,"user_id":810077,"accept_rate":83,"display_name":"Chetan Kinger"},"score":0,"creation_date":1347519630,"post_id":439494,"comment_id":16664240,"body_markdown":"The escapeXml method of StringEscapeUtils seems to be a bit costly. Is there a more efficient method that operates on a StringBuffer instead of a String?","body":"The escapeXml method of StringEscapeUtils seems to be a bit costly. Is there a more efficient method that operates on a StringBuffer instead of a String?"},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":1,"creation_date":1506512382,"post_id":439494,"comment_id":79849492,"body_markdown":"Do this method work for both XML content and attributes? To me it seems like it doesn&#39;t work for attributes. It doesn&#39;t seem to escape `\\t`, `\\n` and `\\r`.","body":"Do this method work for both XML content and attributes? To me it seems like it doesn&#39;t work for attributes. It doesn&#39;t seem to escape <code>\\t</code>, <code>\\n</code> and <code>\\r</code>."},{"owner":{"account_id":162901,"reputation":10387,"user_id":384674,"accept_rate":69,"display_name":"Betlista"},"score":0,"creation_date":1587030446,"post_id":439494,"comment_id":108350546,"body_markdown":"@Lii and `\\t`, `\\n` or `\\r` needs to be escaped ?","body":"@Lii and <code>\\t</code>, <code>\\n</code> or <code>\\r</code> needs to be escaped ?"},{"owner":{"account_id":1788150,"reputation":19947,"user_id":1748450,"accept_rate":79,"display_name":"Chin"},"score":0,"creation_date":1606421618,"post_id":439494,"comment_id":114965417,"body_markdown":"Note that `StringEscapeUtils.escapeXml()` does not escape control characters, which are invalid in XML in many situations","body":"Note that <code>StringEscapeUtils.escapeXml()</code> does not escape control characters, which are invalid in XML in many situations"},{"owner":{"account_id":692122,"reputation":608,"user_id":557270,"display_name":"Gregor"},"score":4,"creation_date":1611933100,"post_id":439494,"comment_id":116616771,"body_markdown":"Note that it has been moved from `commons-lang` to `commons-text`","body":"Note that it has been moved from <code>commons-lang</code> to <code>commons-text</code>"}],"tags":[],"owner":{"account_id":9757,"reputation":45128,"user_id":18154,"accept_rate":100,"display_name":"Fabian Steeg"},"comment_count":7,"down_vote_count":2,"up_vote_count":132,"is_accepted":false,"score":130,"last_activity_date":1508200984,"creation_date":1231862013,"answer_id":439494,"question_id":439298,"body_markdown":"As others have mentioned, using an XML library is the easiest way. If you do want to escape yourself, you could look into [`StringEscapeUtils`][1] from the [Apache Commons Lang][2] library.\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringEscapeUtils.html\r\n  [2]: http://commons.apache.org/lang/","title":"Best way to encode text data for XML in Java?","body":"<p>As others have mentioned, using an XML library is the easiest way. If you do want to escape yourself, you could look into <a href=\"https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringEscapeUtils.html\" rel=\"noreferrer\"><code>StringEscapeUtils</code></a> from the <a href=\"http://commons.apache.org/lang/\" rel=\"noreferrer\">Apache Commons Lang</a> library.</p>\n"},{"tags":[],"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1231863090,"creation_date":1231863090,"answer_id":439596,"question_id":439298,"body_markdown":"Note: Your question is about *escaping*, not *encoding*. Escaping is using &amp;lt;, etc. to allow the parser to distinguish between &quot;this is an XML command&quot; and &quot;this is some text&quot;. Encoding is the stuff you specify in the XML header (UTF-8, ISO-8859-1, etc).\r\n\r\nFirst of all, like everyone else said, use an XML library. XML looks simple but the encoding+escaping stuff is dark voodoo (which you&#39;ll notice as soon as you encounter umlauts and Japanese and other weird stuff like &quot;[full width digits](http://msdn.microsoft.com/en-us/library/w1c0s6bb.aspx)&quot; (&amp;#FF11; is 1)). Keeping XML human readable is a Sisyphus&#39; task.\r\n\r\nI suggest never to try to be clever about text encoding and escaping in XML. But don&#39;t let that stop you from trying; just remember when it bites you (and it will).\r\n\r\nThat said, if you use only UTF-8, to make things more readable you can consider this strategy:\r\n\r\n- If the text does contain &#39;&lt;&#39;, &#39;&gt;&#39; or &#39;&amp;&#39;, wrap it in `&lt;![CDATA[ ... ]]&gt;`\r\n- If the text doesn&#39;t contain these three characters, don&#39;t warp it.\r\n\r\nI&#39;m using this in an SQL editor and it allows the developers to cut&amp;paste SQL from a third party SQL tool into the XML without worrying about escaping. This works because the SQL can&#39;t contain umlauts in our case, so I&#39;m safe.","title":"Best way to encode text data for XML in Java?","body":"<p>Note: Your question is about <em>escaping</em>, not <em>encoding</em>. Escaping is using &lt;, etc. to allow the parser to distinguish between \"this is an XML command\" and \"this is some text\". Encoding is the stuff you specify in the XML header (UTF-8, ISO-8859-1, etc).</p>\n\n<p>First of all, like everyone else said, use an XML library. XML looks simple but the encoding+escaping stuff is dark voodoo (which you'll notice as soon as you encounter umlauts and Japanese and other weird stuff like \"<a href=\"http://msdn.microsoft.com/en-us/library/w1c0s6bb.aspx\" rel=\"noreferrer\">full width digits</a>\" (&amp;#FF11; is 1)). Keeping XML human readable is a Sisyphus' task.</p>\n\n<p>I suggest never to try to be clever about text encoding and escaping in XML. But don't let that stop you from trying; just remember when it bites you (and it will).</p>\n\n<p>That said, if you use only UTF-8, to make things more readable you can consider this strategy:</p>\n\n<ul>\n<li>If the text does contain '&lt;', '>' or '&amp;', wrap it in <code>&lt;![CDATA[ ... ]]&gt;</code></li>\n<li>If the text doesn't contain these three characters, don't warp it.</li>\n</ul>\n\n<p>I'm using this in an SQL editor and it allows the developers to cut&amp;paste SQL from a third party SQL tool into the XML without worrying about escaping. This works because the SQL can't contain umlauts in our case, so I'm safe.</p>\n"},{"comments":[{"owner":{"account_id":80795,"reputation":8986,"user_id":228208,"accept_rate":88,"display_name":"Kylar"},"score":1,"creation_date":1323966019,"post_id":440296,"comment_id":10553765,"body_markdown":"stringBuffer.append(&quot;&amp;#&quot; + (int) ch + &quot;;&quot;);\nThis won&#39;t work for multibyte characters. I&#39;m running into this right now with an emoji character, UTF8 sequence F0 9F 98 8D.","body":"stringBuffer.append(&quot;&amp;#&quot; + (int) ch + &quot;;&quot;); This won&#39;t work for multibyte characters. I&#39;m running into this right now with an emoji character, UTF8 sequence F0 9F 98 8D."}],"tags":[],"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"comment_count":1,"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1287443424,"creation_date":1231873222,"answer_id":440296,"question_id":439298,"body_markdown":"This has worked well for me to provide an escaped version of a text string:\r\n\r\n    public class XMLHelper {\r\n\r\n\t/**\r\n\t * Returns the string where all non-ascii and &lt;, &amp;, &gt; are encoded as numeric entities. I.e. &quot;&amp;lt;A &amp;amp; B &amp;gt;&quot;\r\n\t * .... (insert result here). The result is safe to include anywhere in a text field in an XML-string. If there was\r\n\t * no characters to protect, the original string is returned.\r\n\t * \r\n\t * @param originalUnprotectedString\r\n\t *            original string which may contain characters either reserved in XML or with different representation\r\n\t *            in different encodings (like 8859-1 and UFT-8)\r\n\t * @return\r\n\t */\r\n\tpublic static String protectSpecialCharacters(String originalUnprotectedString) {\r\n\t\tif (originalUnprotectedString == null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tboolean anyCharactersProtected = false;\r\n\r\n\t\tStringBuffer stringBuffer = new StringBuffer();\r\n\t\tfor (int i = 0; i &lt; originalUnprotectedString.length(); i++) {\r\n\t\t\tchar ch = originalUnprotectedString.charAt(i);\r\n\r\n\t\t\tboolean controlCharacter = ch &lt; 32;\r\n\t\t\tboolean unicodeButNotAscii = ch &gt; 126;\r\n\t\t\tboolean characterWithSpecialMeaningInXML = ch == &#39;&lt;&#39; || ch == &#39;&amp;&#39; || ch == &#39;&gt;&#39;;\r\n\r\n\t\t\tif (characterWithSpecialMeaningInXML || unicodeButNotAscii || controlCharacter) {\r\n\t\t\t\tstringBuffer.append(&quot;&amp;#&quot; + (int) ch + &quot;;&quot;);\r\n\t\t\t\tanyCharactersProtected = true;\r\n\t\t\t} else {\r\n\t\t\t\tstringBuffer.append(ch);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (anyCharactersProtected == false) {\r\n\t\t\treturn originalUnprotectedString;\r\n\t\t}\r\n\r\n\t\treturn stringBuffer.toString();\r\n\t}\r\n\r\n    }","title":"Best way to encode text data for XML in Java?","body":"<p>This has worked well for me to provide an escaped version of a text string:</p>\n\n<pre><code>public class XMLHelper {\n\n/**\n * Returns the string where all non-ascii and &lt;, &amp;, &gt; are encoded as numeric entities. I.e. \"&amp;lt;A &amp;amp; B &amp;gt;\"\n * .... (insert result here). The result is safe to include anywhere in a text field in an XML-string. If there was\n * no characters to protect, the original string is returned.\n * \n * @param originalUnprotectedString\n *            original string which may contain characters either reserved in XML or with different representation\n *            in different encodings (like 8859-1 and UFT-8)\n * @return\n */\npublic static String protectSpecialCharacters(String originalUnprotectedString) {\n    if (originalUnprotectedString == null) {\n        return null;\n    }\n    boolean anyCharactersProtected = false;\n\n    StringBuffer stringBuffer = new StringBuffer();\n    for (int i = 0; i &lt; originalUnprotectedString.length(); i++) {\n        char ch = originalUnprotectedString.charAt(i);\n\n        boolean controlCharacter = ch &lt; 32;\n        boolean unicodeButNotAscii = ch &gt; 126;\n        boolean characterWithSpecialMeaningInXML = ch == '&lt;' || ch == '&amp;' || ch == '&gt;';\n\n        if (characterWithSpecialMeaningInXML || unicodeButNotAscii || controlCharacter) {\n            stringBuffer.append(\"&amp;#\" + (int) ch + \";\");\n            anyCharactersProtected = true;\n        } else {\n            stringBuffer.append(ch);\n        }\n    }\n    if (anyCharactersProtected == false) {\n        return originalUnprotectedString;\n    }\n\n    return stringBuffer.toString();\n}\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18840,"reputation":23337,"user_id":43597,"display_name":"Amr Mostafa"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1274254125,"creation_date":1274252424,"answer_id":2863461,"question_id":439298,"body_markdown":"While idealism says use an XML library, IMHO if you have a basic idea of XML then common sense and performance says template it all the way. It&#39;s arguably more readable too. Though using the escaping routines of a library is probably a good idea.\r\n\r\nConsider this: XML *was* meant to be written by humans.\r\n\r\nUse libraries for generating XML when having your XML as an &quot;object&quot; better models your problem. For example, if pluggable modules participate in the process of building this XML.\r\n\r\nEdit: as for how to actually escape XML in templates, use of CDATA or `escapeXml(string)` from JSTL are two good solutions, `escapeXml(string)` can be used like this:\r\n\r\n    &lt;%@taglib prefix=&quot;fn&quot; uri=&quot;http://java.sun.com/jsp/jstl/functions&quot;%&gt;\r\n\r\n    &lt;item&gt;${fn:escapeXml(value)}&lt;/item&gt;\r\n","title":"Best way to encode text data for XML in Java?","body":"<p>While idealism says use an XML library, IMHO if you have a basic idea of XML then common sense and performance says template it all the way. It's arguably more readable too. Though using the escaping routines of a library is probably a good idea.</p>\n\n<p>Consider this: XML <em>was</em> meant to be written by humans.</p>\n\n<p>Use libraries for generating XML when having your XML as an \"object\" better models your problem. For example, if pluggable modules participate in the process of building this XML.</p>\n\n<p>Edit: as for how to actually escape XML in templates, use of CDATA or <code>escapeXml(string)</code> from JSTL are two good solutions, <code>escapeXml(string)</code> can be used like this:</p>\n\n<pre><code>&lt;%@taglib prefix=\"fn\" uri=\"http://java.sun.com/jsp/jstl/functions\"%&gt;\n\n&lt;item&gt;${fn:escapeXml(value)}&lt;/item&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":57717,"reputation":2764,"user_id":172885,"display_name":"Daniel"},"score":0,"creation_date":1501557547,"post_id":7264268,"comment_id":77817836,"body_markdown":"Update: escapeXml is now deprecated - use escapeXml10. Ref https://commons.apache.org/proper/commons-lang/javadocs/api-3.3/org/apache/commons/lang3/StringEscapeUtils.html#escapeXml(java.lang.String)","body":"Update: escapeXml is now deprecated - use escapeXml10. Ref <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-3.3/org/apache/commons/lang3/StringEscapeUtils.html#escapeXml(java.lang.String)\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-lang/javadocs/api-3.3/org/&zwnj;&#8203;&hellip;</a>"}],"tags":[],"owner":{"account_id":871894,"reputation":191,"user_id":922556,"display_name":"Greg Burdett"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1314830108,"creation_date":1314830108,"answer_id":7264268,"question_id":439298,"body_markdown":"To escape XML characters, the easiest way is to use the Apache Commons Lang project, JAR downloadable from: http://commons.apache.org/lang/\r\n\r\nThe class is this: org.apache.commons.lang3.StringEscapeUtils;\r\n\r\nIt has a method named &quot;escapeXml&quot;, that will return an appropriately escaped String. ","title":"Best way to encode text data for XML in Java?","body":"<p>To escape XML characters, the easiest way is to use the Apache Commons Lang project, JAR downloadable from: <a href=\"http://commons.apache.org/lang/\" rel=\"nofollow\">http://commons.apache.org/lang/</a></p>\n\n<p>The class is this: org.apache.commons.lang3.StringEscapeUtils;</p>\n\n<p>It has a method named \"escapeXml\", that will return an appropriately escaped String. </p>\n"},{"comments":[{"owner":{"account_id":395228,"reputation":2513,"user_id":758067,"display_name":"jhclark"},"score":1,"creation_date":1327946402,"post_id":8345820,"comment_id":11382381,"body_markdown":"Here&#39;s Guava&#39;s XML escaper: http://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/xml/XmlEscapers.java?r=8124eb561b979c5d4300f5694f8871d1d7a5619e. In general, I&#39;ve found Guava to be better architected than Apache Commons.","body":"Here&#39;s Guava&#39;s XML escaper: <a href=\"http://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/xml/XmlEscapers.java?r=8124eb561b979c5d4300f5694f8871d1d7a5619e\" rel=\"nofollow noreferrer\">code.google.com/p/guava-libraries/source/browse/guava/src/co&zwnj;&#8203;m/&hellip;</a>. In general, I&#39;ve found Guava to be better architected than Apache Commons."},{"owner":{"account_id":297814,"reputation":25324,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":0,"creation_date":1524690707,"post_id":8345820,"comment_id":87078878,"body_markdown":"https://google.github.io/guava/releases/23.0/api/docs/com/google/common/xml/XmlEscapers.html","body":"<a href=\"https://google.github.io/guava/releases/23.0/api/docs/com/google/common/xml/XmlEscapers.html\" rel=\"nofollow noreferrer\">google.github.io/guava/releases/23.0/api/docs/com/google/com&zwnj;&#8203;mon/&hellip;</a>"}],"tags":[],"owner":{"account_id":287668,"reputation":1028,"user_id":587630,"display_name":"Jasper Krijgsman"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1322761331,"creation_date":1322761331,"answer_id":8345820,"question_id":439298,"body_markdown":"The behavior of StringEscapeUtils.escapeXml() has changed from Commons Lang 2.5 to 3.0.\r\nIt now no longer escapes Unicode characters greater than 0x7f.\r\n\r\nThis is a good thing, the old method was to be a bit to eager to escape entities that could just be inserted into a utf8 document.\r\n\r\nThe new escapers to be included in Google Guava 11.0 also seem promising:\r\nhttp://code.google.com/p/guava-libraries/issues/detail?id=799","title":"Best way to encode text data for XML in Java?","body":"<p>The behavior of StringEscapeUtils.escapeXml() has changed from Commons Lang 2.5 to 3.0.\nIt now no longer escapes Unicode characters greater than 0x7f.</p>\n\n<p>This is a good thing, the old method was to be a bit to eager to escape entities that could just be inserted into a utf8 document.</p>\n\n<p>The new escapers to be included in Google Guava 11.0 also seem promising:\n<a href=\"http://code.google.com/p/guava-libraries/issues/detail?id=799\" rel=\"noreferrer\">http://code.google.com/p/guava-libraries/issues/detail?id=799</a></p>\n"},{"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":9,"creation_date":1333657746,"post_id":10035382,"comment_id":12837077,"body_markdown":"You&#39;ve got at least two bugs that I can see. One is subtle, the other isn&#39;t. I wouldn&#39;t have such a bug - because I wouldn&#39;t reinvent the wheel in the first place.","body":"You&#39;ve got at least two bugs that I can see. One is subtle, the other isn&#39;t. I wouldn&#39;t have such a bug - because I wouldn&#39;t reinvent the wheel in the first place."},{"owner":{"account_id":173557,"reputation":22258,"user_id":402322,"accept_rate":67,"display_name":"ceving"},"score":1,"creation_date":1348677202,"post_id":10035382,"comment_id":16992669,"body_markdown":"And iterating through Unicode strings is a bit more complicated. See here: http://stackoverflow.com/q/1527856/402322","body":"And iterating through Unicode strings is a bit more complicated. See here: <a href=\"http://stackoverflow.com/q/1527856/402322\">stackoverflow.com/q/1527856/402322</a>"},{"owner":{"account_id":1634,"reputation":21693,"user_id":2194,"accept_rate":75,"display_name":"Guy Starbuck"},"score":0,"creation_date":1355327325,"post_id":10035382,"comment_id":19055014,"body_markdown":"I assume the non-subtle bug is the &quot;guot&quot; which was corrected - I also get a warning on the appending concatenated strings in the StringBuilder.  What is the subtle bug?  I honestly like a stand-alone solution like this for my current implementation, embedded where we can&#39;t import apache libraries.","body":"I assume the non-subtle bug is the &quot;guot&quot; which was corrected - I also get a warning on the appending concatenated strings in the StringBuilder.  What is the subtle bug?  I honestly like a stand-alone solution like this for my current implementation, embedded where we can&#39;t import apache libraries."},{"owner":{"account_id":147226,"reputation":1347,"user_id":358197,"accept_rate":50,"display_name":"Myobis"},"score":1,"creation_date":1386889704,"post_id":10035382,"comment_id":30742767,"body_markdown":"Not sure it is _subtle_ but It&#39;d better consider the case where `t==null`.","body":"Not sure it is <i>subtle</i> but It&#39;d better consider the case where <code>t==null</code>."},{"owner":{"account_id":147226,"reputation":1347,"user_id":358197,"accept_rate":50,"display_name":"Myobis"},"score":0,"creation_date":1386890241,"post_id":10035382,"comment_id":30742952,"body_markdown":"As a comparison, \norg.apache.commons.lang3.StringEscapeUtils.escapeXml\nsupports only the five basic XML entities (gt, lt, quot, amp, apos).\nNote that Unicode characters greater than 0x7f are no longer escaped. ([source](http://bit.ly/19FpMvH))","body":"As a comparison,  org.apache.commons.lang3.StringEscapeUtils.escapeXml supports only the five basic XML entities (gt, lt, quot, amp, apos). Note that Unicode characters greater than 0x7f are no longer escaped. (<a href=\"http://bit.ly/19FpMvH\" rel=\"nofollow noreferrer\">source</a>)"},{"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"score":0,"creation_date":1387490745,"post_id":10035382,"comment_id":30990633,"body_markdown":"Shouldn&#39;t your default case&#39;s if condition read &quot;if (c&lt;32 || c&gt;0x7e) {&quot;? Otherwise, you are encoding all characters less than space as just themselves which is invalid XML content, right?","body":"Shouldn&#39;t your default case&#39;s if condition read &quot;if (c&lt;32 || c&gt;0x7e) {&quot;? Otherwise, you are encoding all characters less than space as just themselves which is invalid XML content, right?"},{"owner":{"account_id":539739,"reputation":39728,"user_id":907695,"accept_rate":71,"display_name":"Pointer Null"},"score":0,"creation_date":1387528524,"post_id":10035382,"comment_id":31002050,"body_markdown":"@chaotic3quilibrium: expected chars &lt;32 are only new-lines or tabs, and these are not escaped.","body":"@chaotic3quilibrium: expected chars &lt;32 are only new-lines or tabs, and these are not escaped."},{"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"score":0,"creation_date":1387551696,"post_id":10035382,"comment_id":31014642,"body_markdown":"@PointerNull Are you sure about that?! I&#39;ve read MANY other places that those are to be escaped, too. Do you have an official reference you can cite which explicitly states they are not to be escaped? If so, I&#39;d really appreciate it (and perhaps it would begin to stem the vast number of suggestions to encode this space).","body":"@PointerNull Are you sure about that?! I&#39;ve read MANY other places that those are to be escaped, too. Do you have an official reference you can cite which explicitly states they are not to be escaped? If so, I&#39;d really appreciate it (and perhaps it would begin to stem the vast number of suggestions to encode this space)."},{"owner":{"account_id":114991,"reputation":69738,"user_id":302139,"accept_rate":75,"display_name":"Edwin Buck"},"score":0,"creation_date":1415903477,"post_id":10035382,"comment_id":42380445,"body_markdown":"@PointerNull Ok, It&#39;s an old thing to mention now, but a lot of the non-printable Unicode characters that map to ASCII for compatibility are going to be passed along with this routine.  I&#39;m thinking of things like embedded null values `0x00`, embedded &quot;start of text&quot; `0x02`, &quot;end of transmission&quot; `0x04`, and so on.  Certainly not to be expected in your typical Java string, but it&#39;s funny how such things get slipped in.","body":"@PointerNull Ok, It&#39;s an old thing to mention now, but a lot of the non-printable Unicode characters that map to ASCII for compatibility are going to be passed along with this routine.  I&#39;m thinking of things like embedded null values <code>0x00</code>, embedded &quot;start of text&quot; <code>0x02</code>, &quot;end of transmission&quot; <code>0x04</code>, and so on.  Certainly not to be expected in your typical Java string, but it&#39;s funny how such things get slipped in."},{"owner":{"account_id":985244,"reputation":1312,"user_id":1003916,"accept_rate":38,"display_name":"cowsay"},"score":0,"creation_date":1418832380,"post_id":10035382,"comment_id":43488171,"body_markdown":"This is a terrible solution, anyone reading do not use this.  This will convert &quot;&amp;amp;&quot; into &quot;&amp;ampamp;&quot; and whatnot.  .","body":"This is a terrible solution, anyone reading do not use this.  This will convert &quot;&amp;amp;&quot; into &quot;&amp;ampamp;&quot; and whatnot.  ."},{"owner":{"account_id":539739,"reputation":39728,"user_id":907695,"accept_rate":71,"display_name":"Pointer Null"},"score":1,"creation_date":1418981636,"post_id":10035382,"comment_id":43551773,"body_markdown":"@user1003916: XML escaping is designed to convert any &amp; occurrence into &amp;amp; so that&#39;s how it has to work. If you excape already escaped string, that&#39;s your fault.","body":"@user1003916: XML escaping is designed to convert any &amp; occurrence into &amp;amp; so that&#39;s how it has to work. If you excape already escaped string, that&#39;s your fault."},{"owner":{"account_id":228285,"reputation":1880,"user_id":490484,"accept_rate":94,"display_name":"Roger F. Gay"},"score":3,"creation_date":1447173642,"post_id":10035382,"comment_id":55043862,"body_markdown":"I&#39;m happy with the final version. Java SE is compact, fast, and efficient. Doing just what needs to be done rather than downloading another 100 MB of bloatware is always better in my book.","body":"I&#39;m happy with the final version. Java SE is compact, fast, and efficient. Doing just what needs to be done rather than downloading another 100 MB of bloatware is always better in my book."},{"owner":{"account_id":74797,"reputation":1629,"user_id":214756,"display_name":"Mike B"},"score":2,"creation_date":1479465602,"post_id":10035382,"comment_id":68579952,"body_markdown":"All characters below 0x20  except 0x09, 0x0A and 0x0D are invalid in XML. This applies whether they are escaped or not. The only correct way to handle those is to skip them or throw an Exception. Other than that, this is a good solution and similar to the one we&#39;d typically use.","body":"All characters below 0x20  except 0x09, 0x0A and 0x0D are invalid in XML. This applies whether they are escaped or not. The only correct way to handle those is to skip them or throw an Exception. Other than that, this is a good solution and similar to the one we&#39;d typically use."},{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":0,"creation_date":1570857365,"post_id":10035382,"comment_id":103056458,"body_markdown":"@ceving You don&#39;t have to deal with Unicode here as all characters outside the BMP can be simply copied as they are. The only five codepoints needing processing are in the BMP.","body":"@ceving You don&#39;t have to deal with Unicode here as all characters outside the BMP can be simply copied as they are. The only five codepoints needing processing are in the BMP."},{"owner":{"account_id":4808299,"reputation":1399,"user_id":3882565,"accept_rate":81,"display_name":"stonar96"},"score":0,"creation_date":1577277343,"post_id":10035382,"comment_id":105133908,"body_markdown":"For a method which also supports invalid XML characters like ```&#39;\\u0000&#39;``` see my answer here https://stackoverflow.com/a/59475093/3882565.","body":"For a method which also supports invalid XML characters like <code>&#39;\\u0000&#39;</code> see my answer here <a href=\"https://stackoverflow.com/a/59475093/3882565\">stackoverflow.com/a/59475093/3882565</a>."},{"owner":{"account_id":3116542,"reputation":1299,"user_id":3450840,"accept_rate":56,"display_name":"Florian F"},"score":0,"creation_date":1582192568,"post_id":10035382,"comment_id":106695523,"body_markdown":"The question was &quot;what is the recommended way&quot;.  Writing your own method for a common task isn&#39;t.","body":"The question was &quot;what is the recommended way&quot;.  Writing your own method for a common task isn&#39;t."}],"tags":[],"owner":{"account_id":539739,"reputation":39728,"user_id":907695,"accept_rate":71,"display_name":"Pointer Null"},"comment_count":16,"down_vote_count":3,"up_vote_count":16,"is_accepted":false,"score":13,"last_activity_date":1348727524,"creation_date":1333657040,"answer_id":10035382,"question_id":439298,"body_markdown":"Try this:\r\n\r\n    String xmlEscapeText(String t) {\r\n       StringBuilder sb = new StringBuilder();\r\n       for(int i = 0; i &lt; t.length(); i++){\r\n          char c = t.charAt(i);\r\n          switch(c){\r\n          case &#39;&lt;&#39;: sb.append(&quot;&amp;lt;&quot;); break;\r\n          case &#39;&gt;&#39;: sb.append(&quot;&amp;gt;&quot;); break;\r\n          case &#39;\\&quot;&#39;: sb.append(&quot;&amp;quot;&quot;); break;\r\n          case &#39;&amp;&#39;: sb.append(&quot;&amp;amp;&quot;); break;\r\n          case &#39;\\&#39;&#39;: sb.append(&quot;&amp;apos;&quot;); break;\r\n          default:\r\n             if(c&gt;0x7e) {\r\n                sb.append(&quot;&amp;#&quot;+((int)c)+&quot;;&quot;);\r\n             }else\r\n                sb.append(c);\r\n          }\r\n       }\r\n       return sb.toString();\r\n    }","title":"Best way to encode text data for XML in Java?","body":"<p>Try this:</p>\n\n<pre><code>String xmlEscapeText(String t) {\n   StringBuilder sb = new StringBuilder();\n   for(int i = 0; i &lt; t.length(); i++){\n      char c = t.charAt(i);\n      switch(c){\n      case '&lt;': sb.append(\"&amp;lt;\"); break;\n      case '&gt;': sb.append(\"&amp;gt;\"); break;\n      case '\\\"': sb.append(\"&amp;quot;\"); break;\n      case '&amp;': sb.append(\"&amp;amp;\"); break;\n      case '\\'': sb.append(\"&amp;apos;\"); break;\n      default:\n         if(c&gt;0x7e) {\n            sb.append(\"&amp;#\"+((int)c)+\";\");\n         }else\n            sb.append(c);\n      }\n   }\n   return sb.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":899108,"reputation":1915,"user_id":935715,"display_name":"Steve Mitchell"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1346376606,"creation_date":1346376606,"answer_id":12207820,"question_id":439298,"body_markdown":"`StringEscapeUtils.escapeXml()` does not escape control characters (&lt; 0x20).  XML 1.1 allows control characters; XML 1.0 does not.  For example, `XStream.toXML()` will happily serialize a Java object&#39;s control characters into XML, which an XML 1.0 parser will reject.\r\n\r\nTo escape control characters with Apache commons-lang, use\r\n\r\n    NumericEntityEscaper.below(0x20).translate(StringEscapeUtils.escapeXml(str))","title":"Best way to encode text data for XML in Java?","body":"<p><code>StringEscapeUtils.escapeXml()</code> does not escape control characters (&lt; 0x20).  XML 1.1 allows control characters; XML 1.0 does not.  For example, <code>XStream.toXML()</code> will happily serialize a Java object's control characters into XML, which an XML 1.0 parser will reject.</p>\n\n<p>To escape control characters with Apache commons-lang, use</p>\n\n<pre><code>NumericEntityEscaper.below(0x20).translate(StringEscapeUtils.escapeXml(str))\n</code></pre>\n"},{"comments":[{"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"score":0,"creation_date":1387490623,"post_id":13088777,"comment_id":30990566,"body_markdown":"Shouldn&#39;t the &quot;31&quot; in the first line of the &quot;if&quot; be &quot;32&quot;; i.e. less than the space character? And if &quot;31&quot; must remain, then shouldn&#39;t it be corrected to read &quot;if (c &lt;= 31 ||...&quot; (additional equals sign following the less than sign)?","body":"Shouldn&#39;t the &quot;31&quot; in the first line of the &quot;if&quot; be &quot;32&quot;; i.e. less than the space character? And if &quot;31&quot; must remain, then shouldn&#39;t it be corrected to read &quot;if (c &lt;= 31 ||...&quot; (additional equals sign following the less than sign)?"}],"tags":[],"owner":{"account_id":231645,"reputation":1390,"user_id":495987,"accept_rate":50,"display_name":"Mike"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1351261456,"creation_date":1351261456,"answer_id":13088777,"question_id":439298,"body_markdown":"Here&#39;s an easy solution and it&#39;s great for encoding accented characters too!\r\n\r\n\r\n    String in = &quot;Hi L&#226;rry &amp; M&#244;e!&quot;;\r\n    \r\n    StringBuilder out = new StringBuilder();\r\n    for(int i = 0; i &lt; in.length(); i++) {\r\n        char c = in.charAt(i);\r\n        if(c &lt; 31 || c &gt; 126 || &quot;&lt;&gt;\\&quot;&#39;\\\\&amp;&quot;.indexOf(c) &gt;= 0) {\r\n            out.append(&quot;&amp;#&quot; + (int) c + &quot;;&quot;);\r\n        } else {\r\n            out.append(c);\r\n        }\r\n    }\r\n    \r\n    System.out.printf(&quot;%s%n&quot;, out);\r\n\r\nOutputs\r\n\r\n    Hi L&amp;#226;rry &amp;#38; M&amp;#244;e!","title":"Best way to encode text data for XML in Java?","body":"<p>Here's an easy solution and it's great for encoding accented characters too!</p>\n\n<pre><code>String in = \"Hi Lârry &amp; Môe!\";\n\nStringBuilder out = new StringBuilder();\nfor(int i = 0; i &lt; in.length(); i++) {\n    char c = in.charAt(i);\n    if(c &lt; 31 || c &gt; 126 || \"&lt;&gt;\\\"'\\\\&amp;\".indexOf(c) &gt;= 0) {\n        out.append(\"&amp;#\" + (int) c + \";\");\n    } else {\n        out.append(c);\n    }\n}\n\nSystem.out.printf(\"%s%n\", out);\n</code></pre>\n\n<p>Outputs</p>\n\n<pre><code>Hi L&amp;#226;rry &amp;#38; M&amp;#244;e!\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8695,"reputation":1603,"user_id":15789,"accept_rate":75,"display_name":"RuntimeException"},"score":0,"creation_date":1390482944,"post_id":20693473,"comment_id":32116373,"body_markdown":"Looks pretty good to me. I do not wish to add another jar to my project for only one method. If you please grant permission, may I copy paste your code in mine?","body":"Looks pretty good to me. I do not wish to add another jar to my project for only one method. If you please grant permission, may I copy paste your code in mine?"},{"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"score":1,"creation_date":1390488400,"post_id":20693473,"comment_id":32120314,"body_markdown":"@SatishMotwani Of course you can take the above code and do with it as you like. It&#39;s my understanding that any code published on StackOverflow is assumed to be copyright free (isn&#39;t covered as a work in totality). On the flip side, it would be exceedingly difficult for someone to press any sort of copyright claim and expect an sort of outcome for themselves.","body":"@SatishMotwani Of course you can take the above code and do with it as you like. It&#39;s my understanding that any code published on StackOverflow is assumed to be copyright free (isn&#39;t covered as a work in totality). On the flip side, it would be exceedingly difficult for someone to press any sort of copyright claim and expect an sort of outcome for themselves."},{"owner":{"account_id":8695,"reputation":1603,"user_id":15789,"accept_rate":75,"display_name":"RuntimeException"},"score":1,"creation_date":1391010106,"post_id":20693473,"comment_id":32341639,"body_markdown":"Thanks for permitting :-) I will use it.","body":"Thanks for permitting :-) I will use it."},{"owner":{"account_id":435987,"reputation":1349,"user_id":822870,"accept_rate":33,"display_name":"David Balažic"},"score":1,"creation_date":1542046249,"post_id":20693473,"comment_id":93419665,"body_markdown":"You forgot to handle NUL characters. And maybe other things too.","body":"You forgot to handle NUL characters. And maybe other things too."},{"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"score":0,"creation_date":1598717929,"post_id":20693473,"comment_id":112552769,"body_markdown":"@DavidBalažic Okay, please explain in more detail what I might have missed it? Please read through the code more closely. I handled EVERY SINGLE Unicode character (of the 1,111,998), including the `null` character. Can you explain the definition of the two values, `UNICODE_LOW` and `UNICODE_HIGH`? Please reread the `if` that uses those two values. Notice `null` (`\\u0000` which is `(int)0`) doesn&#39;t fall between these two values. Read out how it becomes properly &quot;escaped&quot; just like ALL Unicode characters existing outside the `UNICODE_LOW` and `UNICODE_HIGH` range, by using the `&amp;#` technique.","body":"@DavidBalažic Okay, please explain in more detail what I might have missed it? Please read through the code more closely. I handled EVERY SINGLE Unicode character (of the 1,111,998), including the <code>null</code> character. Can you explain the definition of the two values, <code>UNICODE_LOW</code> and <code>UNICODE_HIGH</code>? Please reread the <code>if</code> that uses those two values. Notice <code>null</code> (<code>\\u0000</code> which is <code>(int)0</code>) doesn&#39;t fall between these two values. Read out how it becomes properly &quot;escaped&quot; just like ALL Unicode characters existing outside the <code>UNICODE_LOW</code> and <code>UNICODE_HIGH</code> range, by using the <code>&amp;#</code> technique."},{"owner":{"account_id":435987,"reputation":1349,"user_id":822870,"accept_rate":33,"display_name":"David Balažic"},"score":1,"creation_date":1598724898,"post_id":20693473,"comment_id":112554952,"body_markdown":"@chaotic3quilibrium NULL is illegal in XML (and some other characters too). Doesn&#39;t matter how you encode it. It is illegal. (also: there is really no need to escape Unicode characters, they are nicely supported in XML, except if the XML document has a non-Unicode encoding itself)","body":"@chaotic3quilibrium NULL is illegal in XML (and some other characters too). Doesn&#39;t matter how you encode it. It is illegal. (also: there is really no need to escape Unicode characters, they are nicely supported in XML, except if the XML document has a non-Unicode encoding itself)"},{"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"score":0,"creation_date":1598740563,"post_id":20693473,"comment_id":112558793,"body_markdown":"@DavidBalažic Ah. Tysvm for your explanation. I found a reference document that explicitly identifies what you are asserting about Unicode `null`. However, that is literally the ONLY character not allowed. There are many which are strongly discouraged, but NUL is the only one explicitly unreservedly restricted: https://en.wikipedia.org/wiki/Valid_characters_in_XML","body":"@DavidBalažic Ah. Tysvm for your explanation. I found a reference document that explicitly identifies what you are asserting about Unicode <code>null</code>. However, that is literally the ONLY character not allowed. There are many which are strongly discouraged, but NUL is the only one explicitly unreservedly restricted: <a href=\"https://en.wikipedia.org/wiki/Valid_characters_in_XML\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Valid_characters_in_XML</a>"},{"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"score":0,"creation_date":1598741170,"post_id":20693473,"comment_id":112558892,"body_markdown":"@DavidBalažic I have updated the answer to now incorporate the restriction cited in the reference I shared in my last comment. I added a comment and logic to correctly handle this case. Again, tysvm for your precise feedback.","body":"@DavidBalažic I have updated the answer to now incorporate the restriction cited in the reference I shared in my last comment. I added a comment and logic to correctly handle this case. Again, tysvm for your precise feedback."}],"tags":[],"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"comment_count":8,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1598741079,"creation_date":1387494578,"answer_id":20693473,"question_id":439298,"body_markdown":"While I agree with Jon Skeet in principle, sometimes I don&#39;t have the option to use an external XML library. And I find it peculiar the two functions to escape/unescape a simple value (attribute or tag, not full document) are not available in the standard XML libraries included with Java.\r\n\r\nAs a result and based on the different answers I have seen posted here and elsewhere, here is the solution I&#39;ve ended up creating (nothing worked as a simple copy/paste):\r\n\r\n      public final static String ESCAPE_CHARS = &quot;&lt;&gt;&amp;\\&quot;\\&#39;&quot;;\r\n      public final static List&lt;String&gt; ESCAPE_STRINGS = Collections.unmodifiableList(Arrays.asList(new String[] {\r\n          &quot;&amp;lt;&quot;\r\n        , &quot;&amp;gt;&quot;\r\n        , &quot;&amp;amp;&quot;\r\n        , &quot;&amp;quot;&quot;\r\n        , &quot;&amp;apos;&quot;\r\n      }));\r\n\r\n      private static String UNICODE_NULL = &quot;&quot; + ((char)0x00); //null\r\n      private static String UNICODE_LOW =  &quot;&quot; + ((char)0x20); //space\r\n      private static String UNICODE_HIGH = &quot;&quot; + ((char)0x7f);\r\n\r\n      //should only be used for the content of an attribute or tag      \r\n      public static String toEscaped(String content) {\r\n        String result = content;\r\n        \r\n        if ((content != null) &amp;&amp; (content.length() &gt; 0)) {\r\n          boolean modified = false;\r\n          StringBuilder stringBuilder = new StringBuilder(content.length());\r\n          for (int i = 0, count = content.length(); i &lt; count; ++i) {\r\n            String character = content.substring(i, i + 1);\r\n            int pos = ESCAPE_CHARS.indexOf(character);\r\n            if (pos &gt; -1) {\r\n              stringBuilder.append(ESCAPE_STRINGS.get(pos));\r\n              modified = true;\r\n            }\r\n            else {\r\n              if (    (character.compareTo(UNICODE_LOW) &gt; -1)\r\n                   &amp;&amp; (character.compareTo(UNICODE_HIGH) &lt; 1)\r\n                 ) {\r\n                stringBuilder.append(character);\r\n              }\r\n              else {\r\n                //Per URL reference below, Unicode null character is always restricted from XML\r\n                //URL: https://en.wikipedia.org/wiki/Valid_characters_in_XML\r\n                if (character.compareTo(UNICODE_NULL) != 0) {\r\n                  stringBuilder.append(&quot;&amp;#&quot; + ((int)character.charAt(0)) + &quot;;&quot;);\r\n                }\r\n                modified = true;\r\n              }\r\n            }\r\n          }\r\n          if (modified) {\r\n            result = stringBuilder.toString();\r\n          }\r\n        }\r\n        \r\n        return result;\r\n      }\r\n\r\nThe above accommodates several different things:\r\n\r\n 1. avoids using char based logic until it absolutely has to - improves unicode compatibility\r\n 2. attempts to be as efficient as possible given the probability is the second &quot;if&quot; condition is likely the most used pathway\r\n 3. is a pure function; i.e. is thread-safe\r\n 4. optimizes nicely with the garbage collector by only returning the contents of the StringBuilder if something actually changed - otherwise, the original string is returned\r\n\r\n\r\nAt some point, I will write the inversion of this function, toUnescaped(). I just don&#39;t have time to do that today. When I do, I will come update this answer with the code. :)","title":"Best way to encode text data for XML in Java?","body":"<p>While I agree with Jon Skeet in principle, sometimes I don't have the option to use an external XML library. And I find it peculiar the two functions to escape/unescape a simple value (attribute or tag, not full document) are not available in the standard XML libraries included with Java.</p>\n<p>As a result and based on the different answers I have seen posted here and elsewhere, here is the solution I've ended up creating (nothing worked as a simple copy/paste):</p>\n<pre><code>  public final static String ESCAPE_CHARS = &quot;&lt;&gt;&amp;\\&quot;\\'&quot;;\n  public final static List&lt;String&gt; ESCAPE_STRINGS = Collections.unmodifiableList(Arrays.asList(new String[] {\n      &quot;&amp;lt;&quot;\n    , &quot;&amp;gt;&quot;\n    , &quot;&amp;amp;&quot;\n    , &quot;&amp;quot;&quot;\n    , &quot;&amp;apos;&quot;\n  }));\n\n  private static String UNICODE_NULL = &quot;&quot; + ((char)0x00); //null\n  private static String UNICODE_LOW =  &quot;&quot; + ((char)0x20); //space\n  private static String UNICODE_HIGH = &quot;&quot; + ((char)0x7f);\n\n  //should only be used for the content of an attribute or tag      \n  public static String toEscaped(String content) {\n    String result = content;\n    \n    if ((content != null) &amp;&amp; (content.length() &gt; 0)) {\n      boolean modified = false;\n      StringBuilder stringBuilder = new StringBuilder(content.length());\n      for (int i = 0, count = content.length(); i &lt; count; ++i) {\n        String character = content.substring(i, i + 1);\n        int pos = ESCAPE_CHARS.indexOf(character);\n        if (pos &gt; -1) {\n          stringBuilder.append(ESCAPE_STRINGS.get(pos));\n          modified = true;\n        }\n        else {\n          if (    (character.compareTo(UNICODE_LOW) &gt; -1)\n               &amp;&amp; (character.compareTo(UNICODE_HIGH) &lt; 1)\n             ) {\n            stringBuilder.append(character);\n          }\n          else {\n            //Per URL reference below, Unicode null character is always restricted from XML\n            //URL: https://en.wikipedia.org/wiki/Valid_characters_in_XML\n            if (character.compareTo(UNICODE_NULL) != 0) {\n              stringBuilder.append(&quot;&amp;#&quot; + ((int)character.charAt(0)) + &quot;;&quot;);\n            }\n            modified = true;\n          }\n        }\n      }\n      if (modified) {\n        result = stringBuilder.toString();\n      }\n    }\n    \n    return result;\n  }\n</code></pre>\n<p>The above accommodates several different things:</p>\n<ol>\n<li>avoids using char based logic until it absolutely has to - improves unicode compatibility</li>\n<li>attempts to be as efficient as possible given the probability is the second &quot;if&quot; condition is likely the most used pathway</li>\n<li>is a pure function; i.e. is thread-safe</li>\n<li>optimizes nicely with the garbage collector by only returning the contents of the StringBuilder if something actually changed - otherwise, the original string is returned</li>\n</ol>\n<p>At some point, I will write the inversion of this function, toUnescaped(). I just don't have time to do that today. When I do, I will come update this answer with the code. :)</p>\n"},{"tags":[],"owner":{"account_id":4300937,"reputation":1,"user_id":3514662,"display_name":"K Victor Rajan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1397038403,"creation_date":1397037218,"answer_id":22958900,"question_id":439298,"body_markdown":" Try to encode the XML using Apache XML serializer \r\n\r\n    //Serialize DOM\r\n    OutputFormat format    = new OutputFormat (doc); \r\n    // as a String\r\n    StringWriter stringOut = new StringWriter ();    \r\n    XMLSerializer serial   = new XMLSerializer (stringOut, \r\n                                              format);\r\n    serial.serialize(doc);\r\n    // Display the XML\r\n    System.out.println(stringOut.toString());\r\n","title":"Best way to encode text data for XML in Java?","body":"<p>Try to encode the XML using Apache XML serializer </p>\n\n<pre><code>//Serialize DOM\nOutputFormat format    = new OutputFormat (doc); \n// as a String\nStringWriter stringOut = new StringWriter ();    \nXMLSerializer serial   = new XMLSerializer (stringOut, \n                                          format);\nserial.serialize(doc);\n// Display the XML\nSystem.out.println(stringOut.toString());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":477853,"reputation":11601,"user_id":889583,"accept_rate":80,"display_name":"daiscog"},"score":7,"creation_date":1422370612,"post_id":25865742,"comment_id":44715855,"body_markdown":"Chaining `replaceAll` calls is very inefficient, especially for large strings.  Every call results in a new String object being created, which will hang around until garbage collected.  Also, each call requires looping through the string again.  This could be consolidated into one single manual loop with comparisons against each target char in every iteration.","body":"Chaining <code>replaceAll</code> calls is very inefficient, especially for large strings.  Every call results in a new String object being created, which will hang around until garbage collected.  Also, each call requires looping through the string again.  This could be consolidated into one single manual loop with comparisons against each target char in every iteration."},{"owner":{"account_id":3076776,"reputation":1444,"user_id":2605902,"accept_rate":62,"display_name":"Stimpson Cat"},"score":2,"creation_date":1518509751,"post_id":25865742,"comment_id":84524695,"body_markdown":"This should be the accepted answer, even if it is inefficient. It solves the problem in a single line.","body":"This should be the accepted answer, even if it is inefficient. It solves the problem in a single line."},{"owner":{"account_id":435987,"reputation":1349,"user_id":822870,"accept_rate":33,"display_name":"David Balažic"},"score":0,"creation_date":1542046090,"post_id":25865742,"comment_id":93419583,"body_markdown":"And it has many bugs. See [this comment above](https://stackoverflow.com/questions/439298/best-way-to-encode-text-data-for-xml-in-java#comment68579952_10035382)","body":"And it has many bugs. See <a href=\"https://stackoverflow.com/questions/439298/best-way-to-encode-text-data-for-xml-in-java#comment68579952_10035382\">this comment above</a>"},{"owner":{"account_id":4808299,"reputation":1399,"user_id":3882565,"accept_rate":81,"display_name":"stonar96"},"score":0,"creation_date":1577277820,"post_id":25865742,"comment_id":105133987,"body_markdown":"To fix these bugs you can additionally use my method here https://stackoverflow.com/a/59475093/3882565. Note that this is not a replacement but it can be used additionally.","body":"To fix these bugs you can additionally use my method here <a href=\"https://stackoverflow.com/a/59475093/3882565\">stackoverflow.com/a/59475093/3882565</a>. Note that this is not a replacement but it can be used additionally."}],"tags":[],"owner":{"account_id":1579630,"reputation":3005,"user_id":1465252,"accept_rate":25,"display_name":"iCrazybest"},"comment_count":4,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1410861408,"creation_date":1410861408,"answer_id":25865742,"question_id":439298,"body_markdown":"\r\n\r\n    public String escapeXml(String s) {\r\n        return s.replaceAll(&quot;&amp;&quot;, &quot;&amp;amp;&quot;).replaceAll(&quot;&gt;&quot;, &quot;&amp;gt;&quot;).replaceAll(&quot;&lt;&quot;, &quot;&amp;lt;&quot;).replaceAll(&quot;\\&quot;&quot;, &quot;&amp;quot;&quot;).replaceAll(&quot;&#39;&quot;, &quot;&amp;apos;&quot;);\r\n    }\r\n\r\n","title":"Best way to encode text data for XML in Java?","body":"<pre><code>public String escapeXml(String s) {\n    return s.replaceAll(\"&amp;\", \"&amp;amp;\").replaceAll(\"&gt;\", \"&amp;gt;\").replaceAll(\"&lt;\", \"&amp;lt;\").replaceAll(\"\\\"\", \"&amp;quot;\").replaceAll(\"'\", \"&amp;apos;\");\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":322429,"reputation":5774,"user_id":641833,"accept_rate":82,"display_name":"Trisped"},"score":0,"creation_date":1630540798,"post_id":43047555,"comment_id":121986654,"body_markdown":"Note that it has been moved from commons-lang to commons-text","body":"Note that it has been moved from commons-lang to commons-text"}],"tags":[],"owner":{"account_id":2222583,"reputation":21731,"user_id":1961634,"accept_rate":81,"display_name":"Dariusz"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1490620612,"creation_date":1490620612,"answer_id":43047555,"question_id":439298,"body_markdown":"For those looking for the quickest-to-write solution: use methods from [apache commons-lang](http://commons.apache.org/proper/commons-lang/):\r\n\r\n - [`StringEscapeUtils.escapeXml10()`](https://commons.apache.org/proper/commons-lang/javadocs/api-3.3/org/apache/commons/lang3/StringEscapeUtils.html#escapeXml10(java.lang.String)) for xml 1.0\r\n - [`StringEscapeUtils.escapeXml11()`](https://commons.apache.org/proper/commons-lang/javadocs/api-3.3/org/apache/commons/lang3/StringEscapeUtils.html#escapeXml11(java.lang.String)) for xml 1.1\r\n - [`StringEscapeUtils.escapeXml()`](https://commons.apache.org/proper/commons-lang/javadocs/api-3.3/org/apache/commons/lang3/StringEscapeUtils.html#escapeXml(java.lang.String)) is now deprecated, but was used commonly in the past\r\n\r\nRemember to include dependency:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n      &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n      &lt;version&gt;3.5&lt;/version&gt; &lt;!--check current version! --&gt;\r\n    &lt;/dependency&gt;","title":"Best way to encode text data for XML in Java?","body":"<p>For those looking for the quickest-to-write solution: use methods from <a href=\"http://commons.apache.org/proper/commons-lang/\" rel=\"noreferrer\">apache commons-lang</a>:</p>\n\n<ul>\n<li><a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-3.3/org/apache/commons/lang3/StringEscapeUtils.html#escapeXml10(java.lang.String)\" rel=\"noreferrer\"><code>StringEscapeUtils.escapeXml10()</code></a> for xml 1.0</li>\n<li><a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-3.3/org/apache/commons/lang3/StringEscapeUtils.html#escapeXml11(java.lang.String)\" rel=\"noreferrer\"><code>StringEscapeUtils.escapeXml11()</code></a> for xml 1.1</li>\n<li><a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-3.3/org/apache/commons/lang3/StringEscapeUtils.html#escapeXml(java.lang.String)\" rel=\"noreferrer\"><code>StringEscapeUtils.escapeXml()</code></a> is now deprecated, but was used commonly in the past</li>\n</ul>\n\n<p>Remember to include dependency:</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n  &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n  &lt;version&gt;3.5&lt;/version&gt; &lt;!--check current version! --&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1605316,"reputation":8784,"user_id":1485527,"accept_rate":100,"display_name":"jschnasse"},"score":0,"creation_date":1537177895,"post_id":48588062,"comment_id":91674218,"body_markdown":"+1 for standalone code. Just comparing your code with [guava implementation](https://google.github.io/guava/releases/26.0-jre/api/docs/src-html/com/google/common/xml/XmlEscapers.html#line.75), I&#39;m wondering what about &#39;\\t&#39;,&#39;\\n&#39;,&#39;\\r&#39; ? See also notes at [guava docs](https://google.github.io/guava/releases/26.0-jre/api/docs/com/google/common/xml/XmlEscapers.html#xmlContentEscaper--)","body":"+1 for standalone code. Just comparing your code with <a href=\"https://google.github.io/guava/releases/26.0-jre/api/docs/src-html/com/google/common/xml/XmlEscapers.html#line.75\" rel=\"nofollow noreferrer\">guava implementation</a>, I&#39;m wondering what about &#39;\\t&#39;,&#39;\\n&#39;,&#39;\\r&#39; ? See also notes at <a href=\"https://google.github.io/guava/releases/26.0-jre/api/docs/com/google/common/xml/XmlEscapers.html#xmlContentEscaper--\" rel=\"nofollow noreferrer\">guava docs</a>"},{"owner":{"account_id":74797,"reputation":1629,"user_id":214756,"display_name":"Mike B"},"score":2,"creation_date":1545135281,"post_id":48588062,"comment_id":94513726,"body_markdown":"There&#39;s no need to escape \\n, \\r and \\t, they are valid, although they do make formatting a bit ugly. I&#39;ve modified the code to show how to escsape them if that&#39;s what you want.","body":"There&#39;s no need to escape \\n, \\r and \\t, they are valid, although they do make formatting a bit ugly. I&#39;ve modified the code to show how to escsape them if that&#39;s what you want."},{"owner":{"account_id":21062,"reputation":18735,"user_id":50902,"accept_rate":100,"display_name":"kmkaplan"},"score":2,"creation_date":1571726533,"post_id":48588062,"comment_id":103325826,"body_markdown":"There is *no* way to &quot;escape ]]&gt;&quot; in CDATA.","body":"There is <i>no</i> way to &quot;escape ]]&gt;&quot; in CDATA."},{"owner":{"account_id":74797,"reputation":1629,"user_id":214756,"display_name":"Mike B"},"score":1,"creation_date":1571829600,"post_id":48588062,"comment_id":103368505,"body_markdown":"Then it should reject the content by throwing an IllegalArgumentException. Under no circumstances should it claim to succeed but still output invalid XML.","body":"Then it should reject the content by throwing an IllegalArgumentException. Under no circumstances should it claim to succeed but still output invalid XML."},{"owner":{"account_id":4808299,"reputation":1399,"user_id":3882565,"accept_rate":81,"display_name":"stonar96"},"score":0,"creation_date":1577277673,"post_id":48588062,"comment_id":105133961,"body_markdown":"Instead of replacing illegal characters in XML 1.0 with the Unicode substitution character you can use my methods here https://stackoverflow.com/a/59475093/3882565.","body":"Instead of replacing illegal characters in XML 1.0 with the Unicode substitution character you can use my methods here <a href=\"https://stackoverflow.com/a/59475093/3882565\">stackoverflow.com/a/59475093/3882565</a>."},{"owner":{"account_id":11445067,"reputation":512,"user_id":8389244,"display_name":"Max M"},"score":0,"creation_date":1654786716,"post_id":48588062,"comment_id":128180061,"body_markdown":"Useful and appreciated! Nevertheless hard to read code.","body":"Useful and appreciated! Nevertheless hard to read code."}],"tags":[],"owner":{"account_id":74797,"reputation":1629,"user_id":214756,"display_name":"Mike B"},"comment_count":6,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1687807233,"creation_date":1517593013,"answer_id":48588062,"question_id":439298,"body_markdown":"This question is eight years old and still not a fully correct answer! No, you should not have to import an entire third party API to do this simple task. Bad advice.\r\n\r\nThe following method will:\r\n\r\n* correctly handle characters outside the basic multilingual plane\r\n* escape characters required in XML\r\n* escape any non-ASCII characters, which is optional but common\r\n* replace *illegal* characters in XML 1.0 with the Unicode substitution character. There is no best option here - removing them is just as valid.\r\n\r\nI&#39;ve tried to optimise for the most common case, while still ensuring you could pipe /dev/random through this and get a valid string in XML.\r\n\r\n    public static String encodeXML(String s) {\r\n        StringBuilder sb = new StringBuilder();\r\n        int len = s.length();\r\n        for (int i=0;i&lt;len;) {\r\n            int c = s.codePointAt(i);\r\n            if (c &lt; 0x80) {      // ASCII range: test most common case first\r\n                if (c &lt; 0x20 &amp;&amp; (c != &#39;\\t&#39; &amp;&amp; c != &#39;\\r&#39; &amp;&amp; c != &#39;\\n&#39;)) {\r\n                    // Illegal XML character, even encoded. Skip or substitute\r\n                    sb.append(&quot;&amp;#xfffd;&quot;);   // Unicode replacement character\r\n                } else {\r\n                    switch(c) {\r\n                      case &#39;&amp;&#39;:  sb.append(&quot;&amp;amp;&quot;); break;\r\n                      case &#39;&gt;&#39;:  sb.append(&quot;&amp;gt;&quot;); break;\r\n                      case &#39;&lt;&#39;:  sb.append(&quot;&amp;lt;&quot;); break;\r\n                      // Uncomment next two if encoding for an XML attribute\r\n    //                  case &#39;\\&#39;&#39;  sb.append(&quot;&amp;apos;&quot;); break;\r\n    //                  case &#39;\\&quot;&#39;  sb.append(&quot;&amp;quot;&quot;); break;\r\n                      // Uncomment next three if you prefer, but not required\r\n    //                  case &#39;\\n&#39;  sb.append(&quot;&amp;#10;&quot;); break;\r\n    //                  case &#39;\\r&#39;  sb.append(&quot;&amp;#13;&quot;); break;\r\n    //                  case &#39;\\t&#39;  sb.append(&quot;&amp;#9;&quot;); break;\r\n\r\n                      default:   sb.append((char)c);\r\n                    }\r\n                }\r\n            } else if ((c &gt;= 0xd800 &amp;&amp; c &lt;= 0xdfff) || c == 0xfffe || c == 0xffff) {\r\n                // Illegal XML character, even encoded. Skip or substitute\r\n                sb.append(&quot;&amp;#xfffd;&quot;);   // Unicode replacement character\r\n            } else {\r\n                sb.append(&quot;&amp;#x&quot;);\r\n                sb.append(Integer.toHexString(c));\r\n                sb.append(&#39;;&#39;);\r\n            }\r\n            i += c &lt;= 0xffff ? 1 : 2;\r\n        }\r\n        return sb.toString();\r\n    }\r\n\r\n*Edit: for those who continue to insist it foolish to write your own code for this when there are perfectly good Java APIs to deal with XML, you might like to know that the StAX API included with Oracle Java 8 (I haven&#39;t tested others) fails to encode CDATA content correctly: it doesn&#39;t escape ]]&gt; sequences in the content. A third party library, even one that&#39;s part of the Java core, is not always the best option.*","title":"Best way to encode text data for XML in Java?","body":"<p>This question is eight years old and still not a fully correct answer! No, you should not have to import an entire third party API to do this simple task. Bad advice.</p>\n<p>The following method will:</p>\n<ul>\n<li>correctly handle characters outside the basic multilingual plane</li>\n<li>escape characters required in XML</li>\n<li>escape any non-ASCII characters, which is optional but common</li>\n<li>replace <em>illegal</em> characters in XML 1.0 with the Unicode substitution character. There is no best option here - removing them is just as valid.</li>\n</ul>\n<p>I've tried to optimise for the most common case, while still ensuring you could pipe /dev/random through this and get a valid string in XML.</p>\n<pre><code>public static String encodeXML(String s) {\n    StringBuilder sb = new StringBuilder();\n    int len = s.length();\n    for (int i=0;i&lt;len;) {\n        int c = s.codePointAt(i);\n        if (c &lt; 0x80) {      // ASCII range: test most common case first\n            if (c &lt; 0x20 &amp;&amp; (c != '\\t' &amp;&amp; c != '\\r' &amp;&amp; c != '\\n')) {\n                // Illegal XML character, even encoded. Skip or substitute\n                sb.append(&quot;&amp;#xfffd;&quot;);   // Unicode replacement character\n            } else {\n                switch(c) {\n                  case '&amp;':  sb.append(&quot;&amp;amp;&quot;); break;\n                  case '&gt;':  sb.append(&quot;&amp;gt;&quot;); break;\n                  case '&lt;':  sb.append(&quot;&amp;lt;&quot;); break;\n                  // Uncomment next two if encoding for an XML attribute\n//                  case '\\''  sb.append(&quot;&amp;apos;&quot;); break;\n//                  case '\\&quot;'  sb.append(&quot;&amp;quot;&quot;); break;\n                  // Uncomment next three if you prefer, but not required\n//                  case '\\n'  sb.append(&quot;&amp;#10;&quot;); break;\n//                  case '\\r'  sb.append(&quot;&amp;#13;&quot;); break;\n//                  case '\\t'  sb.append(&quot;&amp;#9;&quot;); break;\n\n                  default:   sb.append((char)c);\n                }\n            }\n        } else if ((c &gt;= 0xd800 &amp;&amp; c &lt;= 0xdfff) || c == 0xfffe || c == 0xffff) {\n            // Illegal XML character, even encoded. Skip or substitute\n            sb.append(&quot;&amp;#xfffd;&quot;);   // Unicode replacement character\n        } else {\n            sb.append(&quot;&amp;#x&quot;);\n            sb.append(Integer.toHexString(c));\n            sb.append(';');\n        }\n        i += c &lt;= 0xffff ? 1 : 2;\n    }\n    return sb.toString();\n}\n</code></pre>\n<p><em>Edit: for those who continue to insist it foolish to write your own code for this when there are perfectly good Java APIs to deal with XML, you might like to know that the StAX API included with Oracle Java 8 (I haven't tested others) fails to encode CDATA content correctly: it doesn't escape ]]&gt; sequences in the content. A third party library, even one that's part of the Java core, is not always the best option.</em></p>\n"},{"tags":[],"owner":{"account_id":3444525,"reputation":3069,"user_id":2885656,"accept_rate":94,"display_name":"Software Craftsman"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1520413996,"creation_date":1520413996,"answer_id":49148032,"question_id":439298,"body_markdown":"You could use the [Enterprise Security API (ESAPI) library][1], which provides methods like `encodeForXML` and `encodeForXMLAttribute`. Take a look at the documentation of the [Encoder][2] interface; it also contains examples of how to create an instance of [DefaultEncoder][3].\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.owasp.esapi/esapi\r\n  [2]: https://static.javadoc.io/org.owasp.esapi/esapi/2.0.1/org/owasp/esapi/Encoder.html\r\n  [3]: https://static.javadoc.io/org.owasp.esapi/esapi/2.0.1/org/owasp/esapi/reference/DefaultEncoder.html","title":"Best way to encode text data for XML in Java?","body":"<p>You could use the <a href=\"https://mvnrepository.com/artifact/org.owasp.esapi/esapi\" rel=\"nofollow noreferrer\">Enterprise Security API (ESAPI) library</a>, which provides methods like <code>encodeForXML</code> and <code>encodeForXMLAttribute</code>. Take a look at the documentation of the <a href=\"https://static.javadoc.io/org.owasp.esapi/esapi/2.0.1/org/owasp/esapi/Encoder.html\" rel=\"nofollow noreferrer\">Encoder</a> interface; it also contains examples of how to create an instance of <a href=\"https://static.javadoc.io/org.owasp.esapi/esapi/2.0.1/org/owasp/esapi/reference/DefaultEncoder.html\" rel=\"nofollow noreferrer\">DefaultEncoder</a>.</p>\n"},{"tags":[],"owner":{"account_id":2276132,"reputation":404,"user_id":2002340,"accept_rate":100,"display_name":"raman rayat"},"comment_count":0,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1534491219,"creation_date":1534491219,"answer_id":51890452,"question_id":439298,"body_markdown":"Just replace\r\n\r\n     &amp; with &amp;amp;\r\n\r\nAnd for other characters: \r\n\r\n    &gt; with &amp;gt;\r\n    &lt; with &amp;lt;\r\n    \\&quot; with &amp;quot;\r\n    &#39; with &amp;apos;\r\n\r\n","title":"Best way to encode text data for XML in Java?","body":"<p>Just replace</p>\n\n<pre><code> &amp; with &amp;amp;\n</code></pre>\n\n<p>And for other characters: </p>\n\n<pre><code>&gt; with &amp;gt;\n&lt; with &amp;lt;\n\\\" with &amp;quot;\n' with &amp;apos;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1605316,"reputation":8784,"user_id":1485527,"accept_rate":100,"display_name":"jschnasse"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1537178660,"creation_date":1537177587,"answer_id":52364912,"question_id":439298,"body_markdown":"If you are looking for a library to get the job done, try:\r\n\r\n1. [Guava 26.0](https://mvnrepository.com/artifact/com.google.guava/guava/26.0-jre) documented [here](https://google.github.io/guava/releases/26.0-jre/api/docs/com/google/common/xml/XmlEscapers.html#xmlContentEscaper)\r\n\r\n    `return XmlEscapers.xmlContentEscaper().escape(text);`\r\n&gt;Note: There is also an `xmlAttributeEscaper()`\r\n\r\n2. [Apache Commons Text 1.4](https://mvnrepository.com/artifact/org.apache.commons/commons-text/1.4) documented [here](https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringEscapeUtils.html#escapeXml11-java.lang.String-)\r\n\r\n    `StringEscapeUtils.escapeXml11(text)`\r\n&gt;Note: There is also an `escapeXml10()` method\r\n\r\n","title":"Best way to encode text data for XML in Java?","body":"<p>If you are looking for a library to get the job done, try:</p>\n\n<ol>\n<li><p><a href=\"https://mvnrepository.com/artifact/com.google.guava/guava/26.0-jre\" rel=\"nofollow noreferrer\">Guava 26.0</a> documented <a href=\"https://google.github.io/guava/releases/26.0-jre/api/docs/com/google/common/xml/XmlEscapers.html#xmlContentEscaper\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p><code>return XmlEscapers.xmlContentEscaper().escape(text);</code></p>\n\n<blockquote>\n  <p>Note: There is also an <code>xmlAttributeEscaper()</code></p>\n</blockquote></li>\n<li><p><a href=\"https://mvnrepository.com/artifact/org.apache.commons/commons-text/1.4\" rel=\"nofollow noreferrer\">Apache Commons Text 1.4</a> documented <a href=\"https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringEscapeUtils.html#escapeXml11-java.lang.String-\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p><code>StringEscapeUtils.escapeXml11(text)</code></p>\n\n<blockquote>\n  <p>Note: There is also an <code>escapeXml10()</code> method</p>\n</blockquote></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4118435,"reputation":31,"user_id":3379447,"display_name":"wizston"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579779488,"creation_date":1579779488,"answer_id":59877700,"question_id":439298,"body_markdown":"Here&#39;s what I found after searching everywhere looking for a solution:\r\n\r\nGet the Jsoup library:\r\n\r\n```\r\n&lt;!-- https://mvnrepository.com/artifact/org.jsoup/jsoup --&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.jsoup&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jsoup&lt;/artifactId&gt;\r\n    &lt;version&gt;1.12.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n```\r\n\r\nThen:\r\n\r\n````\r\nimport org.jsoup.Jsoup\r\nimport org.jsoup.nodes.Document\r\nimport org.jsoup.nodes.Entities\r\nimport org.jsoup.parser.Parser\r\n\r\nString xml = &#39;&#39;&#39;&lt;?xml version = &quot;1.0&quot;?&gt;\r\n&lt;SOAP-ENV:Envelope\r\n   xmlns:SOAP-ENV = &quot;http://www.w3.org/2001/12/soap-envelope&quot;\r\n   SOAP-ENV:encodingStyle = &quot;http://www.w3.org/2001/12/soap-encoding&quot;&gt;\r\n\r\n   &lt;SOAP-ENV:Body xmlns:m = &quot;http://www.example.org/quotations&quot;&gt;\r\n      &lt;m:GetQuotation&gt;\r\n         &lt;m:QuotationsName&gt; MiscroSoft@G&gt;&gt;gle.com &lt;/m:QuotationsName&gt;\r\n      &lt;/m:GetQuotation&gt;\r\n   &lt;/SOAP-ENV:Body&gt;\r\n&lt;/SOAP-ENV:Envelope&gt;&#39;&#39;&#39;\r\n\r\n\r\n\r\nDocument doc = Jsoup.parse(new ByteArrayInputStream(xml.getBytes(&quot;UTF-8&quot;)), &quot;UTF-8&quot;, &quot;&quot;, Parser.xmlParser())\r\ndoc.outputSettings().charset(&quot;UTF-8&quot;)\r\ndoc.outputSettings().escapeMode(Entities.EscapeMode.base)\r\n\r\nprintln doc.toString()\r\n\r\n````\r\n\r\nHope this helps someone","title":"Best way to encode text data for XML in Java?","body":"<p>Here's what I found after searching everywhere looking for a solution:</p>\n\n<p>Get the Jsoup library:</p>\n\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.jsoup/jsoup --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.jsoup&lt;/groupId&gt;\n    &lt;artifactId&gt;jsoup&lt;/artifactId&gt;\n    &lt;version&gt;1.12.1&lt;/version&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>import org.jsoup.Jsoup\nimport org.jsoup.nodes.Document\nimport org.jsoup.nodes.Entities\nimport org.jsoup.parser.Parser\n\nString xml = '''&lt;?xml version = \"1.0\"?&gt;\n&lt;SOAP-ENV:Envelope\n   xmlns:SOAP-ENV = \"http://www.w3.org/2001/12/soap-envelope\"\n   SOAP-ENV:encodingStyle = \"http://www.w3.org/2001/12/soap-encoding\"&gt;\n\n   &lt;SOAP-ENV:Body xmlns:m = \"http://www.example.org/quotations\"&gt;\n      &lt;m:GetQuotation&gt;\n         &lt;m:QuotationsName&gt; MiscroSoft@G&gt;&gt;gle.com &lt;/m:QuotationsName&gt;\n      &lt;/m:GetQuotation&gt;\n   &lt;/SOAP-ENV:Body&gt;\n&lt;/SOAP-ENV:Envelope&gt;'''\n\n\n\nDocument doc = Jsoup.parse(new ByteArrayInputStream(xml.getBytes(\"UTF-8\")), \"UTF-8\", \"\", Parser.xmlParser())\ndoc.outputSettings().charset(\"UTF-8\")\ndoc.outputSettings().escapeMode(Entities.EscapeMode.base)\n\nprintln doc.toString()\n\n</code></pre>\n\n<p>Hope this helps someone</p>\n"},{"tags":[],"owner":{"account_id":9925001,"reputation":1047,"user_id":7346931,"display_name":"Dharmendrasinh Chudasama"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1604897881,"creation_date":1604897881,"answer_id":64746092,"question_id":439298,"body_markdown":"&gt; I have created my wrapper here, hope it will helps a lot, [Click here][1] You can modify depends on your requirements\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/51833809/7346931","title":"Best way to encode text data for XML in Java?","body":"<blockquote>\n<p>I have created my wrapper here, hope it will helps a lot, <a href=\"https://stackoverflow.com/a/51833809/7346931\">Click here</a> You can modify depends on your requirements</p>\n</blockquote>\n"}],"owner":{"account_id":4400,"reputation":38401,"user_id":6583,"accept_rate":90,"display_name":"Epaga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":217486,"favorite_count":0,"down_vote_count":2,"up_vote_count":108,"accepted_answer_id":439311,"answer_count":22,"score":106,"last_activity_date":1687807233,"creation_date":1231859730,"question_id":439298,"body_markdown":"Very similar to [this question][1], except for Java.\r\n\r\nWhat is the recommended way of encoding strings for an XML output in Java. The strings might contain characters like &quot;&amp;&quot;, &quot;&lt;&quot;, etc.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/157646/best-way-to-encode-text-data-for-xml","title":"Best way to encode text data for XML in Java?","body":"<p>Very similar to <a href=\"https://stackoverflow.com/questions/157646/best-way-to-encode-text-data-for-xml\">this question</a>, except for Java.</p>\n\n<p>What is the recommended way of encoding strings for an XML output in Java. The strings might contain characters like \"&amp;\", \"&lt;\", etc.</p>\n"},{"tags":["java","spring","google-cloud-functions","spring-cloud-function"],"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1686874338,"post_id":76485152,"comment_id":134861961,"body_markdown":"What makes you think the problem is due to connection difficulties? What does `org.hibernate.HibernateException: Access to DialectResolutionInfo cannot be null when &#39;hibernate.dialect&#39; not set` mean to you?","body":"What makes you think the problem is due to connection difficulties? What does <code>org.hibernate.HibernateException: Access to DialectResolutionInfo cannot be null when &#39;hibernate.dialect&#39; not set</code> mean to you?"},{"owner":{"account_id":24448556,"reputation":69,"user_id":18371113,"display_name":"Przemek Grabarek"},"score":0,"creation_date":1686898272,"post_id":76485152,"comment_id":134864149,"body_markdown":"Correct me if I&#39;m wrong but in Spring Boot Hibernate can determine the correct dialect to use automatically, but in order to do this, it needs a live connection to the database. When the Spring Cloud Function application is run on localhost, the application is able to connect to the database on Cloud SQL using SQL instance&#39;s public IP address. The issue occurs when the Spring Cloud Function application is being deployed to Google Cloud.","body":"Correct me if I&#39;m wrong but in Spring Boot Hibernate can determine the correct dialect to use automatically, but in order to do this, it needs a live connection to the database. When the Spring Cloud Function application is run on localhost, the application is able to connect to the database on Cloud SQL using SQL instance&#39;s public IP address. The issue occurs when the Spring Cloud Function application is being deployed to Google Cloud."},{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":1,"creation_date":1686955277,"post_id":76485152,"comment_id":134874781,"body_markdown":"https://cloud.google.com/sql/docs/debugging-connectivity","body":"<a href=\"https://cloud.google.com/sql/docs/debugging-connectivity\" rel=\"nofollow noreferrer\">cloud.google.com/sql/docs/debugging-connectivity</a>"}],"answers":[{"tags":[],"owner":{"account_id":8860806,"reputation":316,"user_id":6617075,"display_name":"Michael C"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1687806839,"creation_date":1687806839,"answer_id":76559615,"question_id":76485152,"body_markdown":"Posting this as a community wiki for everyone&#39;s visibility.\r\n\r\nAs mentioned by the OP, Spring Boot Hibernate can determine the correct dialect to use automatically, but it needs a live connection to the database. Since the issue is non-existent when running locally. You can try to debug your connectivity with [this documentation][1]. \r\n\r\n\r\n  [1]: https://cloud.google.com/sql/docs/debugging-connectivity","title":"Communication link failure: Google Cloud Function app can&#39;t connect to Google Cloud SQL instance","body":"<p>Posting this as a community wiki for everyone's visibility.</p>\n<p>As mentioned by the OP, Spring Boot Hibernate can determine the correct dialect to use automatically, but it needs a live connection to the database. Since the issue is non-existent when running locally. You can try to debug your connectivity with <a href=\"https://cloud.google.com/sql/docs/debugging-connectivity\" rel=\"nofollow noreferrer\">this documentation</a>.</p>\n"}],"owner":{"account_id":24448556,"reputation":69,"user_id":18371113,"display_name":"Przemek Grabarek"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687806839,"creation_date":1686859204,"question_id":76485152,"body_markdown":"# Problem statement #\r\n\r\nA Java Spring Cloud Functions application deployed to Google Cloud Function instance doesn&#39;t recognize a database setup on Google Cloud SQL instance. Deploying the application to Cloud Function service using:\r\n\r\n    gcloud alpha functions deploy function-sample-gcp-background  \\\r\n    --entry-point org.springframework.cloud.function.adapter.gcp.GcfJarLauncher \\\r\n    --runtime java17 \\\r\n    --trigger-topic  example-functions-app \\\r\n    --source target/deploy \\\r\n    --memory 512MB \\\r\n    --region europe-central2\r\n\r\nreturns error in cloud function instance log:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.RuntimeException: Could not construct an instance of org.springframework.cloud.function.adapter.gcp.GcfJarLauncher: java.lang.reflect.InvocationTargetException\r\n    \tat com.google.cloud.functions.invoker.BackgroundFunctionExecutor.forClass(BackgroundFunctionExecutor.java:125)\r\n    \tat com.google.cloud.functions.invoker.BackgroundFunctionExecutor.forClass(BackgroundFunctionExecutor.java:115)\r\n    \tat com.google.cloud.functions.invoker.runner.Invoker.startServer(Invoker.java:304)\r\n    \tat com.google.cloud.functions.invoker.runner.Invoker.startServer(Invoker.java:241)\r\n    \tat com.google.cloud.functions.invoker.runner.Invoker.main(Invoker.java:124)\r\n    Caused by: java.lang.reflect.InvocationTargetException\r\n    \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n    \tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n    \tat com.google.cloud.functions.invoker.BackgroundFunctionExecutor.forClass(BackgroundFunctionExecutor.java:122)\r\n    \t... 4 more\r\n    Caused by: java.lang.reflect.InvocationTargetException\r\n    \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n    \tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n    \tat org.springframework.cloud.function.adapter.gcp.GcfJarLauncher.&lt;init&gt;(GcfJarLauncher.java:48)\r\n    \t... 10 more\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:910)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:307)\r\n    \tat org.springframework.cloud.function.adapter.gcp.FunctionInvoker.init(FunctionInvoker.java:97)\r\n    \tat org.springframework.cloud.function.adapter.gcp.FunctionInvoker.&lt;init&gt;(FunctionInvoker.java:84)\r\n    \tat org.springframework.cloud.function.adapter.gcp.FunctionInvoker.&lt;init&gt;(FunctionInvoker.java:80)\r\n    \t... 16 more\r\n    Caused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:284)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:223)\r\n    \tat org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:175)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:295)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:252)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:223)\r\n    \tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:173)\r\n    \tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:127)\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460)\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494)\r\n    \tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58)\r\n    \tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365)\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)\r\n    \tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)\r\n    \t... 31 more\r\n    Caused by: org.hibernate.HibernateException: Access to DialectResolutionInfo cannot be null when &#39;hibernate.dialect&#39; not set\r\n    \tat org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.determineDialect(DialectFactoryImpl.java:100)\r\n    \tat org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.buildDialect(DialectFactoryImpl.java:54)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:138)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\r\n    \tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:272)\r\n\r\nsome further runtime spring boot logs:\r\n\r\n \r\n\r\n    [function-sample-gcp-background] com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\r\n    [function-sample-gcp-background] The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n    [function-sample-gcp-background] at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\r\n    [function-sample-gcp-background] at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\r\n    [function-sample-gcp-background] at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:824) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\r\n    [function-sample-gcp-background] at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:444) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\r\n    [function-sample-gcp-background] at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:237) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\r\n    [function-sample-gcp-background] at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\r\n    [function-sample-gcp-background] at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-4.0.3.jar!/:na]\r\n    [function-sample-gcp-background] at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364) ~[HikariCP-4.0.3.jar!/:na]\r\n    [function-sample-gcp-background] at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206) ~[HikariCP-4.0.3.jar!/:na]\r\n    [function-sample-gcp-background] at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476) ~[HikariCP-4.0.3.jar!/:na]\r\n    [function-sample-gcp-background] at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-4.0.3.jar!/:na]\r\n    [function-sample-gcp-background] at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) ~[HikariCP-4.0.3.jar!/:na]\r\n    [function-sample-gcp-background] at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-4.0.3.jar!/:na]\r\n    [function-sample-gcp-background] at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\r\n    [function-sample-gcp-background] at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:181) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\r\n    [function-sample-gcp-background] at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68) ~[hibernate-core-\r\n     at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\r\n    [function-sample-gcp-background] at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\r\n    [function-sample-gcp-background] at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:272) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\r\n    [function-sample-gcp-background] at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\r\n    [function-sample-gcp-background] at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:223) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\r\n    [function-sample-gcp-background] at org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:175) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\r\n    [function-sample-gcp-background] at org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:295) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\r\n    [function-sample-gcp-background] at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:252) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\r\n    [function-sample-gcp-background] at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:223) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\r\n    [function-sample-gcp-background] at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:173) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\r\n    [function-sample-gcp-background] at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:127) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\r\n    [function-sample-gcp-background] at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\r\n    [function-sample-gcp-background] at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\r\n    [function-sample-gcp-background] at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.26.jar!/:5.3.26]\r\n    [function-sample-gcp-background] at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.26.jar!/:5.3.26]\r\n    [function-sample-gcp-background] at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.26.jar!/:5.3.26]\r\n    [function-sample-gcp-background] at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.26.jar!/:5.3.26]\r\n    [function-sample-gcp-background] at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.26.jar!/:5.3.26]\r\n    [function-sample-gcp-background] at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.26.jar!/:5.3.26]\r\n    [function-sample-gcp-background] at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.26.jar!/:5.3.26]\r\n    [function-sample-gcp-background] at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.26.jar!/:5.3.26]\r\n    [function-sample-gcp-background] at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.26.jar!/:5.3.26]\r\n    [function-sample-gcp-background] at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.26.jar!/:5.3.26]\r\n    [function-sample-gcp-background] at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.26.jar!/:5.3.26]\r\n    [function-sample-gcp-background] at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.26.jar!/:5.3.26]\r\n    [function-sample-gcp-background] at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156) ~[spring-context-5.3.26.jar!/:5.3.26]\r\n    [function-sample-gcp-background] at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:910) ~[spring-context-5.3.26.jar!/:5.3.26]\r\n    [function-sample-gcp-background] at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.26.jar!/:5.3.26]\r\n    [function-sample-gcp-background] at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731) ~[spring-boot-2.7.10.jar!/:2.7.10]\r\n    [function-sample-gcp-background] at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.10.jar!/:2.7.10]\r\n    [function-sample-gcp-background] at org.springframework.boot.SpringApplication.run(SpringApplication.java:307) ~[spring-boot-2.7.10.jar!/:2.7.10]\r\n    [function-sample-gcp-background] at org.springframework.cloud.function.adapter.gcp.FunctionInvoker.init(FunctionInvoker.java:97) ~[spring-cloud-function-adapter-gcp-4.0.1.jar!/:na]\r\n    [function-sample-gcp-background] at org.springframework.cloud.function.adapter.gcp.FunctionInvoker.&lt;init&gt;(FunctionInvoker.java:84) ~[spring-cloud-function-adapter-gcp-4.0.1.jar!/:na]\r\n    [function-sample-gcp-background] at org.springframework.cloud.function.adapter.gcp.FunctionInvoker.&lt;init&gt;(FunctionInvoker.java:80) ~[spring-cloud-function-adapter-gcp-4.0.1.jar!/:na]\r\n    [function-sample-gcp-background] at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]\r\n    [function-sample-gcp-background] at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]\r\n    [function-sample-gcp-background] at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\r\n    [function-sample-gcp-background] at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]\r\n    [function-sample-gcp-background] at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]\r\n    [function-sample-gcp-background] at org.springframework.cloud.function.adapter.gcp.GcfJarLauncher.&lt;init&gt;(GcfJarLauncher.java:48) ~[video-stream-function-0.0.1-SNAPSHOT\r\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]\r\n    [function-sample-gcp-background] at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]\r\n    [function-sample-gcp-background] at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\r\n    [function-sample-gcp-background] at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]\r\n    [function-sample-gcp-background] at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]\r\n    [function-sample-gcp-background] at com.google.cloud.functions.invoker.BackgroundFunctionExecutor.forClass(BackgroundFunctionExecutor.java:122) ~[na:na]\r\n    [function-sample-gcp-background] at com.google.cloud.functions.invoker.BackgroundFunctionExecutor.forClass(BackgroundFunctionExecutor.java:115) ~[na:na]\r\n    [function-sample-gcp-background] at com.google.cloud.functions.invoker.runner.Invoker.startServer(Invoker.java:304) ~[na:na]\r\n    [function-sample-gcp-background] at com.google.cloud.functions.invoker.runner.Invoker.startServer(Invoker.java:241) ~[na:na]\r\n    [function-sample-gcp-background] at com.google.cloud.functions.invoker.runner.Invoker.main(Invoker.java:124) ~[na:na]\r\n    [function-sample-gcp-background] Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\r\n    [function-sample-gcp-background] The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n    [function-sample-gcp-background] at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]\r\n    [function-sample-gcp-background] at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]\r\n    [function-sample-gcp-background] at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\r\n    [function-sample-gcp-background] at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]\r\n    [function-sample-gcp-background] at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]\r\n    [function-sample-gcp-background] at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\r\n    [function-sample-gcp-background] at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\r\n    [function-sample-gcp-background] at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\r\n\r\n**How do I manage this issue where I can&#39;t connect the database that is setup on Google Cloud SQL instance with Cloud Function instance?**\r\n\r\n# Relevant Data #\r\n\r\n[![GCloud Service Infrastracture Diagram showing connection between instances][1]][1]\r\nThe Diagram above shows infrastracture of a google cloud setup of a Spring Cloud Functions application. \r\nThe application has an sql database setup with jpa implementation, the configuration is stored in application.yml as followed:\r\n\r\n    spring:\r\n      datasource:\r\n        username: username\r\n        password: password\r\n        driver-class-name: com.mysql.cj.jdbc.Driver\r\n        url: jdbc:mysql://99.999.999.9/db-name\r\n    \r\n      jpa:\r\n        hibernate:\r\n          ddl-auto: update\r\n        default:\r\n          properties:\r\n            hibernate:\r\n              bytecode:\r\n                provider: none\r\n      cloud:\r\n        gcp:\r\n          sql:\r\n            instance-connection-name: instance-connection-name\r\n            database-name: db-name\r\n          config:\r\n            credentials:\r\n              location: service-account-ceredntials.json\r\n\r\nFor the purpose of anonymity I renamed values of above configurations. \r\nservice-account-credentials.json contain service-account key. That service account has roles of:\r\n\r\n    Cloud Functions Developer\r\n    Cloud SQL Editor\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZL8EH.png\r\n\r\n## Important Note ##\r\n\r\nWhen the Spring Cloud Function application is run on localhost, the application is able to connect to the database on Cloud SQL using SQL instance&#39;s public IP address. The issue occurs when the Spring Cloud Function application is being deployed to Google Cloud.","title":"Communication link failure: Google Cloud Function app can&#39;t connect to Google Cloud SQL instance","body":"<h1>Problem statement</h1>\n<p>A Java Spring Cloud Functions application deployed to Google Cloud Function instance doesn't recognize a database setup on Google Cloud SQL instance. Deploying the application to Cloud Function service using:</p>\n<pre><code>gcloud alpha functions deploy function-sample-gcp-background  \\\n--entry-point org.springframework.cloud.function.adapter.gcp.GcfJarLauncher \\\n--runtime java17 \\\n--trigger-topic  example-functions-app \\\n--source target/deploy \\\n--memory 512MB \\\n--region europe-central2\n</code></pre>\n<p>returns error in cloud function instance log:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.RuntimeException: Could not construct an instance of org.springframework.cloud.function.adapter.gcp.GcfJarLauncher: java.lang.reflect.InvocationTargetException\n    at com.google.cloud.functions.invoker.BackgroundFunctionExecutor.forClass(BackgroundFunctionExecutor.java:125)\n    at com.google.cloud.functions.invoker.BackgroundFunctionExecutor.forClass(BackgroundFunctionExecutor.java:115)\n    at com.google.cloud.functions.invoker.runner.Invoker.startServer(Invoker.java:304)\n    at com.google.cloud.functions.invoker.runner.Invoker.startServer(Invoker.java:241)\n    at com.google.cloud.functions.invoker.runner.Invoker.main(Invoker.java:124)\nCaused by: java.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n    at com.google.cloud.functions.invoker.BackgroundFunctionExecutor.forClass(BackgroundFunctionExecutor.java:122)\n    ... 4 more\nCaused by: java.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n    at org.springframework.cloud.function.adapter.gcp.GcfJarLauncher.&lt;init&gt;(GcfJarLauncher.java:48)\n    ... 10 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:910)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)\n    at org.springframework.cloud.function.adapter.gcp.FunctionInvoker.init(FunctionInvoker.java:97)\n    at org.springframework.cloud.function.adapter.gcp.FunctionInvoker.&lt;init&gt;(FunctionInvoker.java:84)\n    at org.springframework.cloud.function.adapter.gcp.FunctionInvoker.&lt;init&gt;(FunctionInvoker.java:80)\n    ... 16 more\nCaused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:284)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:223)\n    at org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:175)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:295)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:252)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:223)\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:173)\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:127)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494)\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58)\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365)\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)\n    ... 31 more\nCaused by: org.hibernate.HibernateException: Access to DialectResolutionInfo cannot be null when 'hibernate.dialect' not set\n    at org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.determineDialect(DialectFactoryImpl.java:100)\n    at org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.buildDialect(DialectFactoryImpl.java:54)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:138)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:272)\n</code></pre>\n<p>some further runtime spring boot logs:</p>\n<pre><code>[function-sample-gcp-background] com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\n[function-sample-gcp-background] The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n[function-sample-gcp-background] at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\n[function-sample-gcp-background] at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\n[function-sample-gcp-background] at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:824) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\n[function-sample-gcp-background] at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:444) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\n[function-sample-gcp-background] at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:237) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\n[function-sample-gcp-background] at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\n[function-sample-gcp-background] at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-4.0.3.jar!/:na]\n[function-sample-gcp-background] at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364) ~[HikariCP-4.0.3.jar!/:na]\n[function-sample-gcp-background] at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206) ~[HikariCP-4.0.3.jar!/:na]\n[function-sample-gcp-background] at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476) ~[HikariCP-4.0.3.jar!/:na]\n[function-sample-gcp-background] at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-4.0.3.jar!/:na]\n[function-sample-gcp-background] at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) ~[HikariCP-4.0.3.jar!/:na]\n[function-sample-gcp-background] at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-4.0.3.jar!/:na]\n[function-sample-gcp-background] at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\n[function-sample-gcp-background] at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:181) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\n[function-sample-gcp-background] at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68) ~[hibernate-core-\n at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\n[function-sample-gcp-background] at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\n[function-sample-gcp-background] at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:272) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\n[function-sample-gcp-background] at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\n[function-sample-gcp-background] at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:223) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\n[function-sample-gcp-background] at org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:175) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\n[function-sample-gcp-background] at org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:295) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\n[function-sample-gcp-background] at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:252) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\n[function-sample-gcp-background] at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:223) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\n[function-sample-gcp-background] at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:173) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\n[function-sample-gcp-background] at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:127) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\n[function-sample-gcp-background] at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\n[function-sample-gcp-background] at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494) ~[hibernate-core-5.6.15.Final.jar!/:5.6.15.Final]\n[function-sample-gcp-background] at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.26.jar!/:5.3.26]\n[function-sample-gcp-background] at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.26.jar!/:5.3.26]\n[function-sample-gcp-background] at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.26.jar!/:5.3.26]\n[function-sample-gcp-background] at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.26.jar!/:5.3.26]\n[function-sample-gcp-background] at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.26.jar!/:5.3.26]\n[function-sample-gcp-background] at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.26.jar!/:5.3.26]\n[function-sample-gcp-background] at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.26.jar!/:5.3.26]\n[function-sample-gcp-background] at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.26.jar!/:5.3.26]\n[function-sample-gcp-background] at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.26.jar!/:5.3.26]\n[function-sample-gcp-background] at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.26.jar!/:5.3.26]\n[function-sample-gcp-background] at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.26.jar!/:5.3.26]\n[function-sample-gcp-background] at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.26.jar!/:5.3.26]\n[function-sample-gcp-background] at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156) ~[spring-context-5.3.26.jar!/:5.3.26]\n[function-sample-gcp-background] at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:910) ~[spring-context-5.3.26.jar!/:5.3.26]\n[function-sample-gcp-background] at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.26.jar!/:5.3.26]\n[function-sample-gcp-background] at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731) ~[spring-boot-2.7.10.jar!/:2.7.10]\n[function-sample-gcp-background] at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.10.jar!/:2.7.10]\n[function-sample-gcp-background] at org.springframework.boot.SpringApplication.run(SpringApplication.java:307) ~[spring-boot-2.7.10.jar!/:2.7.10]\n[function-sample-gcp-background] at org.springframework.cloud.function.adapter.gcp.FunctionInvoker.init(FunctionInvoker.java:97) ~[spring-cloud-function-adapter-gcp-4.0.1.jar!/:na]\n[function-sample-gcp-background] at org.springframework.cloud.function.adapter.gcp.FunctionInvoker.&lt;init&gt;(FunctionInvoker.java:84) ~[spring-cloud-function-adapter-gcp-4.0.1.jar!/:na]\n[function-sample-gcp-background] at org.springframework.cloud.function.adapter.gcp.FunctionInvoker.&lt;init&gt;(FunctionInvoker.java:80) ~[spring-cloud-function-adapter-gcp-4.0.1.jar!/:na]\n[function-sample-gcp-background] at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]\n[function-sample-gcp-background] at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]\n[function-sample-gcp-background] at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\n[function-sample-gcp-background] at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]\n[function-sample-gcp-background] at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]\n[function-sample-gcp-background] at org.springframework.cloud.function.adapter.gcp.GcfJarLauncher.&lt;init&gt;(GcfJarLauncher.java:48) ~[video-stream-function-0.0.1-SNAPSHOT\nat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]\n[function-sample-gcp-background] at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]\n[function-sample-gcp-background] at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\n[function-sample-gcp-background] at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]\n[function-sample-gcp-background] at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]\n[function-sample-gcp-background] at com.google.cloud.functions.invoker.BackgroundFunctionExecutor.forClass(BackgroundFunctionExecutor.java:122) ~[na:na]\n[function-sample-gcp-background] at com.google.cloud.functions.invoker.BackgroundFunctionExecutor.forClass(BackgroundFunctionExecutor.java:115) ~[na:na]\n[function-sample-gcp-background] at com.google.cloud.functions.invoker.runner.Invoker.startServer(Invoker.java:304) ~[na:na]\n[function-sample-gcp-background] at com.google.cloud.functions.invoker.runner.Invoker.startServer(Invoker.java:241) ~[na:na]\n[function-sample-gcp-background] at com.google.cloud.functions.invoker.runner.Invoker.main(Invoker.java:124) ~[na:na]\n[function-sample-gcp-background] Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\n[function-sample-gcp-background] The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n[function-sample-gcp-background] at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]\n[function-sample-gcp-background] at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]\n[function-sample-gcp-background] at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\n[function-sample-gcp-background] at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]\n[function-sample-gcp-background] at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]\n[function-sample-gcp-background] at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\n[function-sample-gcp-background] at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\n[function-sample-gcp-background] at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\n</code></pre>\n<p><strong>How do I manage this issue where I can't connect the database that is setup on Google Cloud SQL instance with Cloud Function instance?</strong></p>\n<h1>Relevant Data</h1>\n<p><a href=\"https://i.stack.imgur.com/ZL8EH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZL8EH.png\" alt=\"GCloud Service Infrastracture Diagram showing connection between instances\" /></a>\nThe Diagram above shows infrastracture of a google cloud setup of a Spring Cloud Functions application.\nThe application has an sql database setup with jpa implementation, the configuration is stored in application.yml as followed:</p>\n<pre><code>spring:\n  datasource:\n    username: username\n    password: password\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    url: jdbc:mysql://99.999.999.9/db-name\n\n  jpa:\n    hibernate:\n      ddl-auto: update\n    default:\n      properties:\n        hibernate:\n          bytecode:\n            provider: none\n  cloud:\n    gcp:\n      sql:\n        instance-connection-name: instance-connection-name\n        database-name: db-name\n      config:\n        credentials:\n          location: service-account-ceredntials.json\n</code></pre>\n<p>For the purpose of anonymity I renamed values of above configurations.\nservice-account-credentials.json contain service-account key. That service account has roles of:</p>\n<pre><code>Cloud Functions Developer\nCloud SQL Editor\n</code></pre>\n<h2>Important Note</h2>\n<p>When the Spring Cloud Function application is run on localhost, the application is able to connect to the database on Cloud SQL using SQL instance's public IP address. The issue occurs when the Spring Cloud Function application is being deployed to Google Cloud.</p>\n"},{"tags":["java","swing","user-interface","components","focus"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1687807258,"post_id":76559483,"comment_id":134985572,"body_markdown":"*Oh, and my example doesn&#39;t have a main class, it is added to the toolbar of my application if that matters...* - Yes it matters. We can&#39;t test the posted code to see the described behaviour. Also, you should be using `Key Binding` not a KeyListener to control the functionality of your popup.","body":"<i>Oh, and my example doesn&#39;t have a main class, it is added to the toolbar of my application if that matters...</i> - Yes it matters. We can&#39;t test the posted code to see the described behaviour. Also, you should be using <code>Key Binding</code> not a KeyListener to control the functionality of your popup."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1687811279,"post_id":76559483,"comment_id":134986166,"body_markdown":"*It also uses other look and feel,  I hope that should not affect focus handling though?* - Well that is easy enough to test. Don&#39;t use the other LAF. If this code works, then you&#39;ve proven the basic concept works. The point of creating an [mre] is to isolate the problem in your real application. So this means adding code in the code posted here until it stops working again. Then you know what you changed and can ask a specific question.","body":"<i>It also uses other look and feel,  I hope that should not affect focus handling though?</i> - Well that is easy enough to test. Don&#39;t use the other LAF. If this code works, then you&#39;ve proven the basic concept works. The point of creating an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is to isolate the problem in your real application. So this means adding code in the code posted here until it stops working again. Then you know what you changed and can ask a specific question."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1687816047,"post_id":76559483,"comment_id":134986870,"body_markdown":"From very old and vague memory, when I was doing simular things, I found `JPopupMenu` unsuited for the task and instead had to use a undecorated`JFrame` [for example](https://stackoverflow.com/questions/36352707/actions-inside-of-another-action-like-netbeans/36353275#36353275) and [example](https://stackoverflow.com/questions/36535835/button-with-image-text-arrow-and-menu/36536607#36536607)","body":"From very old and vague memory, when I was doing simular things, I found <code>JPopupMenu</code> unsuited for the task and instead had to use a undecorated<code>JFrame</code> <a href=\"https://stackoverflow.com/questions/36352707/actions-inside-of-another-action-like-netbeans/36353275#36353275\">for example</a> and <a href=\"https://stackoverflow.com/questions/36535835/button-with-image-text-arrow-and-menu/36536607#36536607\">example</a>"}],"owner":{"account_id":7033480,"reputation":257,"user_id":5388414,"accept_rate":80,"display_name":"UglyBob"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687806631,"creation_date":1687805631,"question_id":76559483,"body_markdown":"I try to basically implement my own combobox for Swing, because JComboBox has some behavior that doesn&#39;t suit my requirements and what I need to override is private, so...\r\n\r\nAnyway, I tried making a small example to test it out, by extending JComponent with a JTextField inside and a dropdown menu overriding JPopupMenu. I want the dropdown to come down in different cases, but for the test I trigger it with the up and down keys (listening on the text field). The popup has a JList inside a JScrollPane and the problem is that this list doesn&#39;t always get focus. I&#39;ve been fighting with it for days, trying various combinations of show() / setVisible() / requestFocus() and requestFocusInWindow() on every involved component, with and without SwingUtilities.invokeLater(). And in my pasted code is the best attempt, BUT even if the list seem to get focus almost every time, it happens it only selects the item showing it gray (which I assume means it doesnt really have focus). Any ideas? \r\n\r\nOh, and my example doesn&#39;t have a main class, it is added to the toolbar of my application if that matters...\r\n\r\nEdit: I added a main for testing and of course it seem to work then. So it&#39;s just with my real application it doesn&#39;t work and it&#39;s a pretty complicated gui, to large to post here. It also uses other look and feel, I hope that should not affect focus handling though?\r\n\r\n```\r\npackage com.sdi.cmsanalyzer.gui;\r\n\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\n\r\npublic class CustomComboBox extends JComponent {\r\n    private final JTextField textField;\r\n    private final DropdownMenu dropdown;\r\n\r\n    public CustomComboBox() {\r\n        setLayout(new BorderLayout());\r\n\r\n        textField = new JTextField();\r\n\r\n        textField.addKeyListener(new KeyAdapter() {\r\n            @Override\r\n            public void keyPressed(KeyEvent e) {\r\n                int keyCode = e.getKeyCode();\r\n                if (keyCode == KeyEvent.VK_DOWN) {\r\n                    System.out.println(&quot;DOWN&quot;);\r\n                    showDropdown();\r\n                    dropdown.selectFirstItem();\r\n                } else if (keyCode == KeyEvent.VK_UP) {\r\n                    System.out.println(&quot;UP&quot;);\r\n                    showDropdown();\r\n                    dropdown.selectLastItem();\r\n                } else if (keyCode == KeyEvent.VK_ENTER) {\r\n                    System.out.println(&quot;ENTER&quot;);\r\n                }\r\n            }\r\n        });\r\n\r\n        add(textField, BorderLayout.CENTER);\r\n\r\n        dropdown = new DropdownMenu();\r\n    }\r\n\r\n    public JTextField getEditor() {\r\n        return this.textField;\r\n    }\r\n\r\n    private void showDropdown() {\r\n        dropdown.updateItems(getDropdownItems());\r\n\r\n        dropdown.setSize(new Dimension(textField.getWidth(), dropdown.getPreferredSize().height));\r\n\r\n        int x = 0;\r\n        int y = textField.getHeight();\r\n\r\n        Container parent = textField.getParent();\r\n        if (parent != null) {\r\n            Point textFieldLocation = textField.getLocation();\r\n            SwingUtilities.convertPointToScreen(textFieldLocation, textField);\r\n            SwingUtilities.convertPointFromScreen(textFieldLocation, parent);\r\n            x = textFieldLocation.x;\r\n            y = textFieldLocation.y + textField.getHeight();\r\n        }\r\n\r\n        dropdown.show(textField, x, y);\r\n    }\r\n\r\n    private String[] getDropdownItems() {\r\n        // Replace with your logic to retrieve the dropdown items\r\n        return new String[]{&quot;Option 1&quot;, &quot;Option 2&quot;, &quot;Option 3&quot;, &quot;Option 4&quot;, &quot;Option 5&quot;, &quot;Option 6&quot;, &quot;Option 7&quot;, &quot;Option 8&quot;, &quot;Option 9&quot;, &quot;Option 10&quot;};\r\n    }\r\n\r\n    private static class DropdownMenu extends JPopupMenu {\r\n        DefaultListModel&lt;String&gt; listModel = new DefaultListModel&lt;&gt;();\r\n        JScrollPane scrollPane;\r\n        JList&lt;String&gt; list;\r\n\r\n        public DropdownMenu() {\r\n            // Create a JList with the list model\r\n            list = new JList&lt;&gt;(listModel);\r\n\r\n            // Create a scroll pane and add the list to it\r\n            scrollPane = new JScrollPane(list,\r\n                    ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED,\r\n                    ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);\r\n\r\n            add(scrollPane);\r\n            pack();\r\n        }\r\n\r\n        public void updateItems(String[] items) {\r\n            listModel.clear();\r\n            for (String item : items) {\r\n                listModel.addElement(item);\r\n            }\r\n        }\r\n\r\n        protected void selectFirstItem() {\r\n            SwingUtilities.invokeLater(() -&gt; {\r\n                list.setSelectedIndex(0);\r\n                list.ensureIndexIsVisible(0);\r\n                list.requestFocus();\r\n            });\r\n        }\r\n\r\n        protected void selectLastItem() {\r\n            SwingUtilities.invokeLater(() -&gt; {\r\n                list.setSelectedIndex(listModel.getSize() - 1);\r\n                list.ensureIndexIsVisible(listModel.getSize() - 1);\r\n                list.requestFocus();\r\n            });\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        SwingUtilities.invokeLater(() -&gt; createAndShowGUI());\r\n    }\r\n\r\n    private static void createAndShowGUI() {\r\n        // Create the main frame\r\n        JFrame frame = new JFrame(&quot;Custom ComboBox Example&quot;);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\r\n        // Create a toolbar\r\n        JToolBar toolBar = new JToolBar();\r\n\r\n        // Create an instance of your CustomComboBox\r\n        CustomComboBox customComboBox = new CustomComboBox();\r\n\r\n        // Add the CustomComboBox to the toolbar\r\n        toolBar.add(customComboBox);\r\n\r\n        // Add the toolbar to the frame\r\n        frame.add(toolBar, BorderLayout.NORTH);\r\n\r\n        // Create a center panel\r\n        JPanel centerPanel = new JPanel();\r\n        frame.add(centerPanel, BorderLayout.CENTER);\r\n\r\n        // Set the frame size and make it visible\r\n        frame.setSize(400, 200);\r\n        frame.setVisible(true);\r\n    }\r\n}\r\n```","title":"Custom popup don&#39;t always get focus","body":"<p>I try to basically implement my own combobox for Swing, because JComboBox has some behavior that doesn't suit my requirements and what I need to override is private, so...</p>\n<p>Anyway, I tried making a small example to test it out, by extending JComponent with a JTextField inside and a dropdown menu overriding JPopupMenu. I want the dropdown to come down in different cases, but for the test I trigger it with the up and down keys (listening on the text field). The popup has a JList inside a JScrollPane and the problem is that this list doesn't always get focus. I've been fighting with it for days, trying various combinations of show() / setVisible() / requestFocus() and requestFocusInWindow() on every involved component, with and without SwingUtilities.invokeLater(). And in my pasted code is the best attempt, BUT even if the list seem to get focus almost every time, it happens it only selects the item showing it gray (which I assume means it doesnt really have focus). Any ideas?</p>\n<p>Oh, and my example doesn't have a main class, it is added to the toolbar of my application if that matters...</p>\n<p>Edit: I added a main for testing and of course it seem to work then. So it's just with my real application it doesn't work and it's a pretty complicated gui, to large to post here. It also uses other look and feel, I hope that should not affect focus handling though?</p>\n<pre><code>package com.sdi.cmsanalyzer.gui;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.*;\n\npublic class CustomComboBox extends JComponent {\n    private final JTextField textField;\n    private final DropdownMenu dropdown;\n\n    public CustomComboBox() {\n        setLayout(new BorderLayout());\n\n        textField = new JTextField();\n\n        textField.addKeyListener(new KeyAdapter() {\n            @Override\n            public void keyPressed(KeyEvent e) {\n                int keyCode = e.getKeyCode();\n                if (keyCode == KeyEvent.VK_DOWN) {\n                    System.out.println(&quot;DOWN&quot;);\n                    showDropdown();\n                    dropdown.selectFirstItem();\n                } else if (keyCode == KeyEvent.VK_UP) {\n                    System.out.println(&quot;UP&quot;);\n                    showDropdown();\n                    dropdown.selectLastItem();\n                } else if (keyCode == KeyEvent.VK_ENTER) {\n                    System.out.println(&quot;ENTER&quot;);\n                }\n            }\n        });\n\n        add(textField, BorderLayout.CENTER);\n\n        dropdown = new DropdownMenu();\n    }\n\n    public JTextField getEditor() {\n        return this.textField;\n    }\n\n    private void showDropdown() {\n        dropdown.updateItems(getDropdownItems());\n\n        dropdown.setSize(new Dimension(textField.getWidth(), dropdown.getPreferredSize().height));\n\n        int x = 0;\n        int y = textField.getHeight();\n\n        Container parent = textField.getParent();\n        if (parent != null) {\n            Point textFieldLocation = textField.getLocation();\n            SwingUtilities.convertPointToScreen(textFieldLocation, textField);\n            SwingUtilities.convertPointFromScreen(textFieldLocation, parent);\n            x = textFieldLocation.x;\n            y = textFieldLocation.y + textField.getHeight();\n        }\n\n        dropdown.show(textField, x, y);\n    }\n\n    private String[] getDropdownItems() {\n        // Replace with your logic to retrieve the dropdown items\n        return new String[]{&quot;Option 1&quot;, &quot;Option 2&quot;, &quot;Option 3&quot;, &quot;Option 4&quot;, &quot;Option 5&quot;, &quot;Option 6&quot;, &quot;Option 7&quot;, &quot;Option 8&quot;, &quot;Option 9&quot;, &quot;Option 10&quot;};\n    }\n\n    private static class DropdownMenu extends JPopupMenu {\n        DefaultListModel&lt;String&gt; listModel = new DefaultListModel&lt;&gt;();\n        JScrollPane scrollPane;\n        JList&lt;String&gt; list;\n\n        public DropdownMenu() {\n            // Create a JList with the list model\n            list = new JList&lt;&gt;(listModel);\n\n            // Create a scroll pane and add the list to it\n            scrollPane = new JScrollPane(list,\n                    ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED,\n                    ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);\n\n            add(scrollPane);\n            pack();\n        }\n\n        public void updateItems(String[] items) {\n            listModel.clear();\n            for (String item : items) {\n                listModel.addElement(item);\n            }\n        }\n\n        protected void selectFirstItem() {\n            SwingUtilities.invokeLater(() -&gt; {\n                list.setSelectedIndex(0);\n                list.ensureIndexIsVisible(0);\n                list.requestFocus();\n            });\n        }\n\n        protected void selectLastItem() {\n            SwingUtilities.invokeLater(() -&gt; {\n                list.setSelectedIndex(listModel.getSize() - 1);\n                list.ensureIndexIsVisible(listModel.getSize() - 1);\n                list.requestFocus();\n            });\n        }\n    }\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(() -&gt; createAndShowGUI());\n    }\n\n    private static void createAndShowGUI() {\n        // Create the main frame\n        JFrame frame = new JFrame(&quot;Custom ComboBox Example&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        // Create a toolbar\n        JToolBar toolBar = new JToolBar();\n\n        // Create an instance of your CustomComboBox\n        CustomComboBox customComboBox = new CustomComboBox();\n\n        // Add the CustomComboBox to the toolbar\n        toolBar.add(customComboBox);\n\n        // Add the toolbar to the frame\n        frame.add(toolBar, BorderLayout.NORTH);\n\n        // Create a center panel\n        JPanel centerPanel = new JPanel();\n        frame.add(centerPanel, BorderLayout.CENTER);\n\n        // Set the frame size and make it visible\n        frame.setSize(400, 200);\n        frame.setVisible(true);\n    }\n}\n</code></pre>\n"},{"tags":["java","xml","xml-parsing","cdata"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1687801088,"post_id":76558893,"comment_id":134984569,"body_markdown":"Please, take some time to read [how to ask](/help/how-to-ask) and [How to create a Minimal, Reproducible Example](/help/minimal-reproducible-example). Parsing with jaxB is an option. Please add  your java code so far and expected output.","body":"Please, take some time to read <a href=\"/help/how-to-ask\">how to ask</a> and <a href=\"/help/minimal-reproducible-example\">How to create a Minimal, Reproducible Example</a>. Parsing with jaxB is an option. Please add  your java code so far and expected output."}],"answers":[{"comments":[{"owner":{"account_id":4904476,"reputation":4812,"user_id":3951576,"accept_rate":50,"display_name":"eastwater"},"score":0,"creation_date":1687818765,"post_id":76559434,"comment_id":134987172,"body_markdown":"Thanks for detail response. The content inside the foo element is an arbitrary text  that contains XML fragments. The text and XML fragments will be further processed by a processor, and the XML fragments will be parsed as XML documents later.","body":"Thanks for detail response. The content inside the foo element is an arbitrary text  that contains XML fragments. The text and XML fragments will be further processed by a processor, and the XML fragments will be parsed as XML documents later."},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1687866849,"post_id":76559434,"comment_id":134993833,"body_markdown":"@eastwater, if you plan to parse this with a standard XML parser, and if the content of the `&lt;foo&gt;` is meant to be taken, in its entirety, as text input to a second level of XML parsing, then it that content needs to be properly escaped with respect to the initial parse.  That *should* be be done when the data are written, though it *could* be done in some kind of non-XML-based post-processing step.  It *cannot* be done by any standard XML parser at the time the data are being parsed.","body":"@eastwater, if you plan to parse this with a standard XML parser, and if the content of the <code>&lt;foo&gt;</code> is meant to be taken, in its entirety, as text input to a second level of XML parsing, then it that content needs to be properly escaped with respect to the initial parse.  That <i>should</i> be be done when the data are written, though it <i>could</i> be done in some kind of non-XML-based post-processing step.  It <i>cannot</i> be done by any standard XML parser at the time the data are being parsed."},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1687867146,"post_id":76559434,"comment_id":134993907,"body_markdown":"Putting the whole thing in a CDATA section would be one way to do that, *provided* the data do not contain any CDATA sections of their own, because these do not nest.  If the data may contain CDATA sections then you can still make it work, but it&#39;s more complicated.  For example: https://stackoverflow.com/a/13562589.","body":"Putting the whole thing in a CDATA section would be one way to do that, <i>provided</i> the data do not contain any CDATA sections of their own, because these do not nest.  If the data may contain CDATA sections then you can still make it work, but it&#39;s more complicated.  For example: <a href=\"https://stackoverflow.com/a/13562589\">stackoverflow.com/a/13562589</a>."},{"owner":{"account_id":4904476,"reputation":4812,"user_id":3951576,"accept_rate":50,"display_name":"eastwater"},"score":0,"creation_date":1687928554,"post_id":76559434,"comment_id":135003856,"body_markdown":"We changed file format to avoid nested CDATA. thanks.","body":"We changed file format to avoid nested CDATA. thanks."}],"tags":[],"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687806337,"creation_date":1687805115,"answer_id":76559434,"question_id":76558893,"body_markdown":"You ask ...\r\n\r\n&gt; Is there a way to tell XML parser to treat everything inside an element as TEXT? can xml schema do it?\r\n\r\n... by which you seem to mean\r\n\r\n&gt; How to parse everything inside the &amp;lt;foo&gt; as text as if it is wrapped with `&lt;![CDATA[  ]]&gt;`.\r\n\r\n. That would mean that you get a result String with this literal content:&lt;sup&gt;*&lt;/sup&gt;\r\n```\r\n    text\r\n    &lt;bar&gt;\r\n        &lt;![CDATA[ ... ]]&gt;\r\n        &lt;hello&gt;&lt;world&gt;&lt;/world&gt;\r\n        &lt;/hello&gt; \r\n    &lt;/bar\r\n    text\r\n```\r\nThat is, including all whitespace and a text representation of all tags, comments, processing instructions, and CDATA sections.  I&#39;m having trouble aligning that with ...\r\n\r\n&gt; The reason for this is it has nested `&lt;![CDATA[  ]]&gt;`.. Nesting CDATA\r\n&gt; makes it harder to read/write by human.\r\n\r\n.  That is, I don&#39;t disagree about CDATA sections being hard-ish to read, but I don&#39;t see how that suggests creating strings that contain textual versions of CDATA sections.\r\n\r\nI&#39;m also having trouble squaring that with ...\r\n\r\n&gt; SAXParser/StreamParser use callbacks or events, and elements/attributes/texts need to be concatenated together. Is there a more efficient way?\r\n\r\n... because a SAXParser won&#39;t allow you to do what you asked.  Although you could use SAX callbacks to reconstruct a text representation of the XML that has been parsed, that would not\r\n\r\n - reproduce CDATA sections as text (only their contents),\r\n - ensure that tags are reproduced verbatim (internal whitespace, type of attribute quotation marks, and representation style for empty tags are not conveyed by SAX),\r\n - avoid expanding at least some of the entity references in text and attribute values (but outside CDATA sections), or\r\n - preserve comments.\r\n\r\nThere might be other issues.  And if your goal happens to be to perform some kind of XML cleanup to improve human readability then note well that there is a fairly high risk that the string emitted by such a process will not constitute well-formed XML element content.  After all, one of the purposes of CDATA sections and many entity references is exactly to express content that would render the document ill-formed if it were expressed literally.  That escaping function would be lost, so you would need to re-escape the content if you wanted to be able to re-parse it as XML.\r\n\r\n----\r\nIf you really do want to extract the raw text of an XML element then ***no***, no XML API I know of provides for it, and XML Schema cannot do it.  XML technologies work *with* document structure, but you seem to want to override document structure.  You&#39;ll probably need to write your own XML parser if that&#39;s in fact what you want to do.\r\n\r\n----\r\n&lt;sup&gt;*&lt;/sup&gt; Or at least, that&#39;s my best guess at what you mean.  CDATA sections do not nest, so if you literally wrapped the CDATA-including raw element text inside a CDATA section then the XML interpretation of the result would be different, and not likely what you&#39;re really after.\r\n\r\n\r\n  [1]: https://download.java.net/java/early_access/loom/docs/api/java.xml/org/w3c/dom/Node.html#getTextContent()","title":"XML parser: quick way to parse everything inside an element as text?","body":"<p>You ask ...</p>\n<blockquote>\n<p>Is there a way to tell XML parser to treat everything inside an element as TEXT? can xml schema do it?</p>\n</blockquote>\n<p>... by which you seem to mean</p>\n<blockquote>\n<p>How to parse everything inside the &lt;foo&gt; as text as if it is wrapped with <code>&lt;![CDATA[  ]]&gt;</code>.</p>\n</blockquote>\n<p>. That would mean that you get a result String with this literal content:<sup>*</sup></p>\n<pre><code>    text\n    &lt;bar&gt;\n        &lt;![CDATA[ ... ]]&gt;\n        &lt;hello&gt;&lt;world&gt;&lt;/world&gt;\n        &lt;/hello&gt; \n    &lt;/bar\n    text\n</code></pre>\n<p>That is, including all whitespace and a text representation of all tags, comments, processing instructions, and CDATA sections.  I'm having trouble aligning that with ...</p>\n<blockquote>\n<p>The reason for this is it has nested <code>&lt;![CDATA[  ]]&gt;</code>.. Nesting CDATA\nmakes it harder to read/write by human.</p>\n</blockquote>\n<p>.  That is, I don't disagree about CDATA sections being hard-ish to read, but I don't see how that suggests creating strings that contain textual versions of CDATA sections.</p>\n<p>I'm also having trouble squaring that with ...</p>\n<blockquote>\n<p>SAXParser/StreamParser use callbacks or events, and elements/attributes/texts need to be concatenated together. Is there a more efficient way?</p>\n</blockquote>\n<p>... because a SAXParser won't allow you to do what you asked.  Although you could use SAX callbacks to reconstruct a text representation of the XML that has been parsed, that would not</p>\n<ul>\n<li>reproduce CDATA sections as text (only their contents),</li>\n<li>ensure that tags are reproduced verbatim (internal whitespace, type of attribute quotation marks, and representation style for empty tags are not conveyed by SAX),</li>\n<li>avoid expanding at least some of the entity references in text and attribute values (but outside CDATA sections), or</li>\n<li>preserve comments.</li>\n</ul>\n<p>There might be other issues.  And if your goal happens to be to perform some kind of XML cleanup to improve human readability then note well that there is a fairly high risk that the string emitted by such a process will not constitute well-formed XML element content.  After all, one of the purposes of CDATA sections and many entity references is exactly to express content that would render the document ill-formed if it were expressed literally.  That escaping function would be lost, so you would need to re-escape the content if you wanted to be able to re-parse it as XML.</p>\n<hr />\n<p>If you really do want to extract the raw text of an XML element then <em><strong>no</strong></em>, no XML API I know of provides for it, and XML Schema cannot do it.  XML technologies work <em>with</em> document structure, but you seem to want to override document structure.  You'll probably need to write your own XML parser if that's in fact what you want to do.</p>\n<hr />\n<p><sup>*</sup> Or at least, that's my best guess at what you mean.  CDATA sections do not nest, so if you literally wrapped the CDATA-including raw element text inside a CDATA section then the XML interpretation of the result would be different, and not likely what you're really after.</p>\n"}],"owner":{"account_id":4904476,"reputation":4812,"user_id":3951576,"accept_rate":50,"display_name":"eastwater"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76559434,"answer_count":1,"score":0,"last_activity_date":1687806337,"creation_date":1687799699,"question_id":76558893,"body_markdown":"XML parser: quick way to parse everything inside an element as text? e.g.,\r\n\r\n    &lt;foo&gt;\r\n        text\r\n        &lt;bar&gt;\r\n            &lt;![CDATA[ ... ]]&gt;\r\n            &lt;hello&gt;&lt;world&gt;&lt;/world&gt;\r\n            &lt;/hello&gt; \r\n        &lt;/bar\r\n        text\r\n    &lt;/foo&gt;\r\n\r\nHow to parse everything inside the `&lt;foo&gt;` as text as if it is wrapped with `&lt;![CDATA[  ]]&gt;.`\r\n\r\nThe reason for this is it has nested `&lt;![CDATA[  ]]&gt;.`. Nesting CDATA makes it harder to read/write by human.\r\n\r\nSAXParser/StreamParser use callbacks or events, and elements/attributes/texts need to be concatenated together. Is there a more efficient way?\r\n\r\nIs there a way to tell XML parser to treat everything inside an element as TEXT? can xml schema do it?\r\n\r\n","title":"XML parser: quick way to parse everything inside an element as text?","body":"<p>XML parser: quick way to parse everything inside an element as text? e.g.,</p>\n<pre><code>&lt;foo&gt;\n    text\n    &lt;bar&gt;\n        &lt;![CDATA[ ... ]]&gt;\n        &lt;hello&gt;&lt;world&gt;&lt;/world&gt;\n        &lt;/hello&gt; \n    &lt;/bar\n    text\n&lt;/foo&gt;\n</code></pre>\n<p>How to parse everything inside the <code>&lt;foo&gt;</code> as text as if it is wrapped with <code>&lt;![CDATA[  ]]&gt;.</code></p>\n<p>The reason for this is it has nested <code>&lt;![CDATA[  ]]&gt;.</code>. Nesting CDATA makes it harder to read/write by human.</p>\n<p>SAXParser/StreamParser use callbacks or events, and elements/attributes/texts need to be concatenated together. Is there a more efficient way?</p>\n<p>Is there a way to tell XML parser to treat everything inside an element as TEXT? can xml schema do it?</p>\n"},{"tags":["java","spring","spring-properties"],"comments":[{"owner":{"account_id":8395915,"reputation":644,"user_id":6302996,"accept_rate":9,"display_name":"Nikhil Kulkarni"},"score":0,"creation_date":1611122578,"post_id":12576156,"comment_id":116345439,"body_markdown":"how to read List&lt;int[]&gt; range using @value","body":"how to read List&lt;int[]&gt; range using @value"}],"answers":[{"tags":[],"owner":{"account_id":138557,"reputation":42623,"user_id":343568,"accept_rate":100,"display_name":"nicholas.hauschild"},"comment_count":0,"down_vote_count":2,"up_vote_count":22,"is_accepted":false,"score":20,"last_activity_date":1348579178,"creation_date":1348548173,"answer_id":12576308,"question_id":12576156,"body_markdown":"Have you considered `@Autowired`ing the constructor or a setter and `String.split()`ing in the body?\r\n\r\n    class MyClass {\r\n        private List&lt;String&gt; myList;\r\n        \r\n        @Autowired\r\n        public MyClass(@Value(&quot;${my.list.of.strings}&quot;) final String strs) {\r\n            myList = Arrays.asList(strs.split(&quot;,&quot;));\r\n        }\r\n        \r\n        //or\r\n        \r\n        @Autowired\r\n        public void setMyList(@Value(&quot;${my.list.of.strings}&quot;) final String strs) {\r\n            myList = Arrays.asList(strs.split(&quot;,&quot;));\r\n        }\r\n    }\r\n\r\nI tend to prefer doing my autowiring in one of these ways to enhance the testability of my code.","title":"Reading a List from properties file and load with Spring annotation @Value","body":"<p>Have you considered <code>@Autowired</code>ing the constructor or a setter and <code>String.split()</code>ing in the body?</p>\n\n<pre><code>class MyClass {\n    private List&lt;String&gt; myList;\n\n    @Autowired\n    public MyClass(@Value(\"${my.list.of.strings}\") final String strs) {\n        myList = Arrays.asList(strs.split(\",\"));\n    }\n\n    //or\n\n    @Autowired\n    public void setMyList(@Value(\"${my.list.of.strings}\") final String strs) {\n        myList = Arrays.asList(strs.split(\",\"));\n    }\n}\n</code></pre>\n\n<p>I tend to prefer doing my autowiring in one of these ways to enhance the testability of my code.</p>\n"},{"comments":[{"owner":{"account_id":462781,"reputation":576,"user_id":865285,"display_name":"Osama Abdulsattar"},"score":0,"creation_date":1573210543,"post_id":12576394,"comment_id":103816302,"body_markdown":"I get only the first String &quot;ABC&quot;","body":"I get only the first String &quot;ABC&quot;"}],"tags":[],"owner":{"account_id":472179,"reputation":955,"user_id":880503,"accept_rate":42,"display_name":"Mukesh Kumar"},"comment_count":1,"down_vote_count":1,"up_vote_count":48,"is_accepted":false,"score":47,"last_activity_date":1348549960,"creation_date":1348549035,"answer_id":12576394,"question_id":12576156,"body_markdown":"By specifying the the `my.list.of.strings=ABC,CDE,EFG` in .properties file and using \r\n\r\n`@Value(&quot;${my.list.of.strings}&quot;)`\r\n`private String[] myString;`\r\n\r\nYou can get the arrays of strings. And using `CollectionUtils.addAll(myList, myString)`, you can get the list of strings.","title":"Reading a List from properties file and load with Spring annotation @Value","body":"<p>By specifying the the <code>my.list.of.strings=ABC,CDE,EFG</code> in .properties file and using </p>\n\n<p><code>@Value(\"${my.list.of.strings}\")</code>\n<code>private String[] myString;</code></p>\n\n<p>You can get the arrays of strings. And using <code>CollectionUtils.addAll(myList, myString)</code>, you can get the list of strings.</p>\n"},{"comments":[{"owner":{"account_id":287724,"reputation":920,"user_id":587723,"display_name":"Steven"},"score":2,"creation_date":1465413919,"post_id":12577682,"comment_id":62896246,"body_markdown":"This worked for me, but I had to phrase the annotation like this: `@Value(&quot;#{T(java.util.Arrays).asList(&#39;${my.list.of.strings}&#39;)}&quot;)`","body":"This worked for me, but I had to phrase the annotation like this: <code>@Value(&quot;#{T(java.util.Arrays).asList(&#39;${my.list.of.strings}&#39;&zwnj;&#8203;)}&quot;)</code>"}],"tags":[],"owner":{"account_id":910060,"reputation":4453,"user_id":944108,"accept_rate":100,"display_name":"Japan Trivedi"},"comment_count":1,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1348558339,"creation_date":1348556238,"answer_id":12577682,"question_id":12576156,"body_markdown":"All the above answers are correct. But you can achieve this in just one line.\r\nPlease try following declaration and you will get all the comma separated values in a String list.\r\n\r\n    private @Value(&quot;#{T(java.util.Arrays).asList(projectProperties[&#39;my.list.of.strings&#39;])}&quot;) List&lt;String&gt; myList;\r\n\r\nAnd also you need to have the following line defined in your xml configuration.\r\n\r\n    &lt;util:properties id=&quot;projectProperties&quot; location=&quot;/project.properties&quot;/&gt;\r\n\r\njust replace the path and file name of your properties file. And you are good to go. :)\r\n\r\nHope this helps you. Cheers.","title":"Reading a List from properties file and load with Spring annotation @Value","body":"<p>All the above answers are correct. But you can achieve this in just one line.\nPlease try following declaration and you will get all the comma separated values in a String list.</p>\n\n<pre><code>private @Value(\"#{T(java.util.Arrays).asList(projectProperties['my.list.of.strings'])}\") List&lt;String&gt; myList;\n</code></pre>\n\n<p>And also you need to have the following line defined in your xml configuration.</p>\n\n<pre><code>&lt;util:properties id=\"projectProperties\" location=\"/project.properties\"/&gt;\n</code></pre>\n\n<p>just replace the path and file name of your properties file. And you are good to go. :)</p>\n\n<p>Hope this helps you. Cheers.</p>\n"},{"comments":[{"owner":{"account_id":1469094,"reputation":11033,"user_id":1381093,"accept_rate":52,"display_name":"JackDev"},"score":0,"creation_date":1349231161,"post_id":12580260,"comment_id":17147414,"body_markdown":"Gave me a &quot;Caused by: javax.el.ELException: Failed to parse the expression [#{&#39;${my.list.of.strings}&#39;.split(&#39;,&#39;)}&quot;]\nDid it work for you? Maybe I did something incorrectly.","body":"Gave me a &quot;Caused by: javax.el.ELException: Failed to parse the expression [#{&#39;${my.list.of.strings}&#39;.split(&#39;,&#39;)}&quot;] Did it work for you? Maybe I did something incorrectly."},{"owner":{"account_id":34522,"reputation":10891,"user_id":97641,"accept_rate":74,"display_name":"Wilhelm Kleu"},"score":0,"creation_date":1349244520,"post_id":12580260,"comment_id":17149993,"body_markdown":"Works perfectly when I try it. What Spring version are you using?","body":"Works perfectly when I try it. What Spring version are you using?"},{"owner":{"account_id":34522,"reputation":10891,"user_id":97641,"accept_rate":74,"display_name":"Wilhelm Kleu"},"score":1,"creation_date":1351152323,"post_id":12580260,"comment_id":17743976,"body_markdown":"I checked it again using the same version you are using. Copied the Spring EL exactly as in the post and it works.\nWhat is different though is if I make an error in my EL I get a `org.springframework.expression.spel.SpelEvaluationException` exception and not `javax.el.ELException`.\nIs your objected created by Spring?","body":"I checked it again using the same version you are using. Copied the Spring EL exactly as in the post and it works. What is different though is if I make an error in my EL I get a <code>org.springframework.expression.spel.SpelEvaluationException</code> exception and not <code>javax.el.ELException</code>. Is your objected created by Spring?"},{"owner":{"account_id":176507,"reputation":5460,"user_id":407249,"accept_rate":86,"display_name":"ehsanullahjan"},"score":1,"creation_date":1362708749,"post_id":12580260,"comment_id":21568532,"body_markdown":"Works perfectly with Spring 3.2.","body":"Works perfectly with Spring 3.2."},{"owner":{"account_id":296495,"reputation":17580,"user_id":601493,"accept_rate":73,"display_name":"Jan Zyka"},"score":25,"creation_date":1409321344,"post_id":12580260,"comment_id":39933205,"body_markdown":"How about empty property `my.list.of.strings=`? I would expect such functionality retruning empty list where here it will be one item (empty string), wouldn&#39;t it?","body":"How about empty property <code>my.list.of.strings=</code>? I would expect such functionality retruning empty list where here it will be one item (empty string), wouldn&#39;t it?"},{"owner":{"account_id":296495,"reputation":17580,"user_id":601493,"accept_rate":73,"display_name":"Jan Zyka"},"score":1,"creation_date":1441703951,"post_id":12580260,"comment_id":52769996,"body_markdown":"I created custom static method to do that. First checking whether the input String is null or empty, in that case return empty list. Otherwise do the split. You can call static methods in EL easily.","body":"I created custom static method to do that. First checking whether the input String is null or empty, in that case return empty list. Otherwise do the split. You can call static methods in EL easily."},{"owner":{"account_id":296495,"reputation":17580,"user_id":601493,"accept_rate":73,"display_name":"Jan Zyka"},"score":5,"creation_date":1441704004,"post_id":12580260,"comment_id":52770026,"body_markdown":"Also note that the suggested solution doesn&#39;t do trimming so values like `item1, item2,    item3` may give you result you don&#39;t really expect (hint: spaces).","body":"Also note that the suggested solution doesn&#39;t do trimming so values like <code>item1, item2,    item3</code> may give you result you don&#39;t really expect (hint: spaces)."},{"owner":{"account_id":1756589,"reputation":3204,"user_id":1604480,"accept_rate":50,"display_name":"Stackee007"},"score":12,"creation_date":1492636857,"post_id":12580260,"comment_id":74067294,"body_markdown":"If you need to trim empty spaces use regex for split argument.. something like `@Value(&quot;#{&#39;${my.list.of.strings}&#39;.split(&#39;,\\\\s*&#39;)}&quot;) `","body":"If you need to trim empty spaces use regex for split argument.. something like <code>@Value(&quot;#{&#39;${my.list.of.strings}&#39;.split(&#39;,\\\\s*&#39;)}&quot;) </code>"},{"owner":{"account_id":2814590,"reputation":1225,"user_id":2420028,"accept_rate":50,"display_name":"Danny Dan"},"score":1,"creation_date":1522753899,"post_id":12580260,"comment_id":86263994,"body_markdown":"Be careful not to put space before `#{` e.g. `@Value(&quot; #{&#39;${my.list.of.strings}&#39;.split(&#39;,&#39;)}&quot;)` or it won&#39;t split property just provide list with one non splitted element.","body":"Be careful not to put space before <code>#{</code> e.g. <code>@Value(&quot; #{&#39;${my.list.of.strings}&#39;.split(&#39;,&#39;)}&quot;)</code> or it won&#39;t split property just provide list with one non splitted element."},{"owner":{"account_id":418941,"reputation":814,"user_id":795827,"accept_rate":62,"display_name":"Xiaokun"},"score":0,"creation_date":1595931044,"post_id":12580260,"comment_id":111637546,"body_markdown":"Does it support in XML?","body":"Does it support in XML?"},{"owner":{"account_id":4581535,"reputation":387,"user_id":3718338,"accept_rate":75,"display_name":"Anurag"},"score":0,"creation_date":1598947702,"post_id":12580260,"comment_id":112613709,"body_markdown":"How can one read similar property and create a list of String in applicationContext.xml?","body":"How can one read similar property and create a list of String in applicationContext.xml?"},{"owner":{"account_id":6009919,"reputation":547,"user_id":4720669,"display_name":"Aakash Patel"},"score":0,"creation_date":1606132066,"post_id":12580260,"comment_id":114858608,"body_markdown":"This does not work with `@CrossOrigin(origins = {&quot;${allowed.cors.urls}&quot;})` Anyone has solution for annotation level?","body":"This does not work with <code>@CrossOrigin(origins = {&quot;${allowed.cors.urls}&quot;})</code> Anyone has solution for annotation level?"},{"owner":{"account_id":11450905,"reputation":499,"user_id":8393315,"accept_rate":47,"display_name":"TomJava"},"score":0,"creation_date":1627645345,"post_id":12580260,"comment_id":121217716,"body_markdown":"Can set be used here in place of list?","body":"Can set be used here in place of list?"},{"owner":{"account_id":10116472,"reputation":284,"user_id":7474991,"display_name":"Praneeth Kumar"},"score":0,"creation_date":1665578983,"post_id":12580260,"comment_id":130733268,"body_markdown":"when I try to keep a default value for empty list by adding &#39;: &#39;. there&#39;s still one element in the list with value of null when i print the list. how to resolve this. @Value(&quot;#{&#39;${list.whitelist: }&#39;.split(&#39;,&#39;)}&quot;) List&lt;UUID&gt; WhiteList","body":"when I try to keep a default value for empty list by adding &#39;: &#39;. there&#39;s still one element in the list with value of null when i print the list. how to resolve this. @Value(&quot;#{&#39;${list.whitelist: }&#39;.split(&#39;,&#39;)}&quot;) List&lt;UUID&gt; WhiteList"},{"owner":{"account_id":1429360,"reputation":4094,"user_id":1352127,"accept_rate":45,"display_name":"Shailesh Pratapwar"},"score":0,"creation_date":1684503631,"post_id":12580260,"comment_id":134530976,"body_markdown":"my.list.of.strings={&#39;ABC&#39;,&#39;CDE&#39;,&#39;EFG&#39;}  If you use this syntax, then you don&#39;t need to use custom expression to split.","body":"my.list.of.strings={&#39;ABC&#39;,&#39;CDE&#39;,&#39;EFG&#39;}  If you use this syntax, then you don&#39;t need to use custom expression to split."}],"tags":[],"owner":{"account_id":34522,"reputation":10891,"user_id":97641,"accept_rate":74,"display_name":"Wilhelm Kleu"},"comment_count":15,"down_vote_count":3,"up_vote_count":599,"is_accepted":true,"score":596,"last_activity_date":1521209978,"creation_date":1348566070,"answer_id":12580260,"question_id":12576156,"body_markdown":"Using Spring EL:\r\n\r\n    @Value(&quot;#{&#39;${my.list.of.strings}&#39;.split(&#39;,&#39;)}&quot;) \r\n    private List&lt;String&gt; myList;\r\n\r\nAssuming your properties file is loaded correctly with the following:\r\n\r\n    my.list.of.strings=ABC,CDE,EFG\r\n","title":"Reading a List from properties file and load with Spring annotation @Value","body":"<p>Using Spring EL:</p>\n\n<pre><code>@Value(\"#{'${my.list.of.strings}'.split(',')}\") \nprivate List&lt;String&gt; myList;\n</code></pre>\n\n<p>Assuming your properties file is loaded correctly with the following:</p>\n\n<pre><code>my.list.of.strings=ABC,CDE,EFG\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1469094,"reputation":11033,"user_id":1381093,"accept_rate":52,"display_name":"JackDev"},"score":0,"creation_date":1349236952,"post_id":12668007,"comment_id":17148392,"body_markdown":"could you be more specific about the method and class to use, and actual sample code sniplet would be great.","body":"could you be more specific about the method and class to use, and actual sample code sniplet would be great."}],"tags":[],"owner":{"account_id":169237,"reputation":39170,"user_id":395202,"accept_rate":59,"display_name":"Adrian Shum"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1409713598,"creation_date":1349069998,"answer_id":12668007,"question_id":12576156,"body_markdown":"Consider using Commons Configuration. It have built in feature to break an entry in properties file to array/list. Combing with SpEL and @Value should give what you want\r\n\r\n\r\n----------\r\n\r\nAs requested, here is what you need (Haven&#39;t really tried the code, may got some typoes, please bear with me):\r\n\r\nIn Apache Commons Configuration, there is PropertiesConfiguration.  It supports the feature of converting delimited string to array/list.\r\n\r\nFor example, if you have a properties file\r\n\r\n    #Foo.properties\r\n    foo=bar1, bar2, bar3\r\n\r\nWith the below code:\r\n\r\n    PropertiesConfiguration config = new PropertiesConfiguration(&quot;Foo.properties&quot;);\r\n    String[] values = config.getStringArray(&quot;foo&quot;);\r\n\r\nwill give you a string array of `[&quot;bar1&quot;, &quot;bar2&quot;, &quot;bar3&quot;]`\r\n\r\nTo use with Spring, have this in your app context xml:\r\n\r\n    &lt;bean id=&quot;fooConfig&quot; class=&quot;org.apache.commons.configuration.PropertiesConfiguration&quot;&gt;\r\n        &lt;constructor-arg type=&quot;java.lang.String&quot; value=&quot;classpath:/Foo.properties&quot;/&gt;\r\n    &lt;/bean&gt;\r\n\r\nand have this in your spring bean:\r\n\r\n    public class SomeBean {\r\n    \r\n        @Value(&quot;fooConfig.getStringArray(&#39;foo&#39;)&quot;)\r\n        private String[] fooArray;\r\n    }\r\n\r\nI believe this should work  :P","title":"Reading a List from properties file and load with Spring annotation @Value","body":"<p>Consider using Commons Configuration. It have built in feature to break an entry in properties file to array/list. Combing with SpEL and @Value should give what you want</p>\n\n<hr>\n\n<p>As requested, here is what you need (Haven't really tried the code, may got some typoes, please bear with me):</p>\n\n<p>In Apache Commons Configuration, there is PropertiesConfiguration.  It supports the feature of converting delimited string to array/list.</p>\n\n<p>For example, if you have a properties file</p>\n\n<pre><code>#Foo.properties\nfoo=bar1, bar2, bar3\n</code></pre>\n\n<p>With the below code:</p>\n\n<pre><code>PropertiesConfiguration config = new PropertiesConfiguration(\"Foo.properties\");\nString[] values = config.getStringArray(\"foo\");\n</code></pre>\n\n<p>will give you a string array of <code>[\"bar1\", \"bar2\", \"bar3\"]</code></p>\n\n<p>To use with Spring, have this in your app context xml:</p>\n\n<pre><code>&lt;bean id=\"fooConfig\" class=\"org.apache.commons.configuration.PropertiesConfiguration\"&gt;\n    &lt;constructor-arg type=\"java.lang.String\" value=\"classpath:/Foo.properties\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>and have this in your spring bean:</p>\n\n<pre><code>public class SomeBean {\n\n    @Value(\"fooConfig.getStringArray('foo')\")\n    private String[] fooArray;\n}\n</code></pre>\n\n<p>I believe this should work  :P</p>\n"},{"tags":[],"owner":{"account_id":469395,"reputation":753,"user_id":875962,"display_name":"verma"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1378760702,"creation_date":1378760318,"answer_id":18706918,"question_id":12576156,"body_markdown":"you can do this with annotations like this\r\n\r\n\r\n\r\n     @Value(&quot;#{T(java.util.Arrays).asList(&#39;${my.list.of.strings:a,b,c}&#39;)}&quot;) \r\n        private List&lt;String&gt; mylist;\r\n\r\nhere my.list.of.strings will be picked from the properties file, if its not there, then the defaults a,b,c will be used\r\n\r\nand in your properties file, you can have something like this\r\n\r\nmy.list.of.strings=d,e,f\r\n","title":"Reading a List from properties file and load with Spring annotation @Value","body":"<p>you can do this with annotations like this</p>\n\n<pre><code> @Value(\"#{T(java.util.Arrays).asList('${my.list.of.strings:a,b,c}')}\") \n    private List&lt;String&gt; mylist;\n</code></pre>\n\n<p>here my.list.of.strings will be picked from the properties file, if its not there, then the defaults a,b,c will be used</p>\n\n<p>and in your properties file, you can have something like this</p>\n\n<p>my.list.of.strings=d,e,f</p>\n"},{"comments":[{"owner":{"account_id":1568833,"reputation":189,"user_id":1457011,"display_name":"Karlik_B"},"score":0,"creation_date":1544118263,"post_id":19765680,"comment_id":94172342,"body_markdown":"The split() method uses internally regex as delimiter, so your example can be simplified:\n&lt;br/&gt;\n`@Value(&quot;#{&#39;${foobar}&#39;.trim().split( *, *)}&quot;)`","body":"The split() method uses internally regex as delimiter, so your example can be simplified: &lt;br/&gt; <code>@Value(&quot;#{&#39;${foobar}&#39;.trim().split( *, *)}&quot;)</code>"}],"tags":[],"owner":{"account_id":1882731,"reputation":71,"user_id":1702544,"display_name":"DAMungra"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1383560574,"creation_date":1383560574,"answer_id":19765680,"question_id":12576156,"body_markdown":"*Beware of spaces in the values.* I could be wrong, but I think spaces in the comma-separated list are not truncated using @Value and Spel. The list\r\n\r\n    foobar=a, b, c\r\n\r\nwould be read in as a list of strings\r\n\r\n    &quot;a&quot;, &quot; b&quot;, &quot; c&quot;\r\n\r\nIn most cases you would probably not want the spaces!\r\n\r\nThe expression\r\n\r\n    @Value(&quot;#{&#39;${foobar}&#39;.trim().replaceAll(\\&quot;\\\\s*(?=,)|(?&lt;=,)\\\\s*\\&quot;, \\&quot;\\&quot;).split(&#39;,&#39;)}&quot;)\r\n    private List&lt;String&gt; foobarList;\r\n\r\nwould give you a list of strings:\r\n\r\n    &quot;a&quot;, &quot;b&quot;, &quot;c&quot;.\r\n\r\nThe regular expression removes all spaces just before and just after a comma. Spaces inside of the values are not removed. So\r\n\r\n    foobar = AA, B B, CCC\r\n\r\nshould result in values\r\n\r\n    &quot;AA&quot;, &quot;B B&quot;, &quot;CCC&quot;.\r\n\r\n","title":"Reading a List from properties file and load with Spring annotation @Value","body":"<p><em>Beware of spaces in the values.</em> I could be wrong, but I think spaces in the comma-separated list are not truncated using @Value and Spel. The list</p>\n\n<pre><code>foobar=a, b, c\n</code></pre>\n\n<p>would be read in as a list of strings</p>\n\n<pre><code>\"a\", \" b\", \" c\"\n</code></pre>\n\n<p>In most cases you would probably not want the spaces!</p>\n\n<p>The expression</p>\n\n<pre><code>@Value(\"#{'${foobar}'.trim().replaceAll(\\\"\\\\s*(?=,)|(?&lt;=,)\\\\s*\\\", \\\"\\\").split(',')}\")\nprivate List&lt;String&gt; foobarList;\n</code></pre>\n\n<p>would give you a list of strings:</p>\n\n<pre><code>\"a\", \"b\", \"c\".\n</code></pre>\n\n<p>The regular expression removes all spaces just before and just after a comma. Spaces inside of the values are not removed. So</p>\n\n<pre><code>foobar = AA, B B, CCC\n</code></pre>\n\n<p>should result in values</p>\n\n<pre><code>\"AA\", \"B B\", \"CCC\".\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2714849,"reputation":45,"user_id":2342448,"display_name":"cgull"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1386323097,"creation_date":1386323097,"answer_id":20420695,"question_id":12576156,"body_markdown":"if using property placeholders then ser1702544 example would become \r\n\r\n    @Value(&quot;#{myConfigProperties[&#39;myproperty&#39;].trim().replaceAll(\\&quot;\\\\s*(?=,)|(?&lt;=,)\\\\s*\\&quot;, \\&quot;\\&quot;).split(&#39;,&#39;)}&quot;) \r\n\t\r\nWith placeholder xml:\r\n\r\n    &lt;bean class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;\t\r\n\t\t&lt;property name=&quot;properties&quot; ref=&quot;myConfigProperties&quot; /&gt;\r\n        &lt;property name=&quot;placeholderPrefix&quot;&gt;&lt;value&gt;$myConfigProperties{&lt;/value&gt;&lt;/property&gt;\r\n    &lt;/bean&gt;    \r\n\t\r\n\t&lt;bean id=&quot;myConfigProperties&quot; class=&quot;org.springframework.beans.factory.config.PropertiesFactoryBean&quot;&gt;\r\n         &lt;property name=&quot;locations&quot;&gt;\r\n             &lt;list&gt;\r\n                    &lt;value&gt;classpath:myprops.properties&lt;/value&gt;\r\n             &lt;/list&gt;\r\n         &lt;/property&gt;\r\n\t&lt;/bean&gt;\t","title":"Reading a List from properties file and load with Spring annotation @Value","body":"<p>if using property placeholders then ser1702544 example would become </p>\n\n<pre><code>@Value(\"#{myConfigProperties['myproperty'].trim().replaceAll(\\\"\\\\s*(?=,)|(?&lt;=,)\\\\s*\\\", \\\"\\\").split(',')}\") \n</code></pre>\n\n<p>With placeholder xml:</p>\n\n<pre><code>&lt;bean class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;   \n    &lt;property name=\"properties\" ref=\"myConfigProperties\" /&gt;\n    &lt;property name=\"placeholderPrefix\"&gt;&lt;value&gt;$myConfigProperties{&lt;/value&gt;&lt;/property&gt;\n&lt;/bean&gt;    \n\n&lt;bean id=\"myConfigProperties\" class=\"org.springframework.beans.factory.config.PropertiesFactoryBean\"&gt;\n     &lt;property name=\"locations\"&gt;\n         &lt;list&gt;\n                &lt;value&gt;classpath:myprops.properties&lt;/value&gt;\n         &lt;/list&gt;\n     &lt;/property&gt;\n&lt;/bean&gt; \n</code></pre>\n"},{"comments":[{"owner":{"account_id":74527,"reputation":1841,"user_id":214091,"accept_rate":94,"display_name":"Dmitry Chornyi"},"score":8,"creation_date":1447901360,"post_id":29970335,"comment_id":55355502,"body_markdown":"Java configuration:\n\n\t@Bean\n\tpublic ConversionService conversionService() {\n\t\treturn new DefaultConversionService();\n\t}","body":"Java configuration:  \t@Bean \tpublic ConversionService conversionService() { \t\treturn new DefaultConversionService(); \t}"},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":2,"creation_date":1507630937,"post_id":29970335,"comment_id":80276745,"body_markdown":"Outside avoiding to repeat yourself with `split()` in every expression, it also properly handles an empty list instead of giving you `[null]`","body":"Outside avoiding to repeat yourself with <code>split()</code> in every expression, it also properly handles an empty list instead of giving you <code>[null]</code>"},{"owner":{"account_id":1476678,"reputation":7374,"user_id":1386911,"accept_rate":56,"display_name":"Daniel H&#225;ri"},"score":0,"creation_date":1518970191,"post_id":29970335,"comment_id":84710830,"body_markdown":"It is not working if the property is overrided (Exists in multiple property sources.)","body":"It is not working if the property is overrided (Exists in multiple property sources.)"}],"tags":[],"owner":{"account_id":2326045,"reputation":3457,"user_id":2040545,"display_name":"Clemens Klein-Robbenhaar"},"comment_count":3,"down_vote_count":1,"up_vote_count":113,"is_accepted":false,"score":112,"last_activity_date":1461326026,"creation_date":1430403795,"answer_id":29970335,"question_id":12576156,"body_markdown":"Since Spring 3.0, you can add a line like\r\n\r\n    &lt;bean id=&quot;conversionService&quot; \r\n        class=&quot;org.springframework.context.support.ConversionServiceFactoryBean&quot; /&gt;\r\n\r\nto your `applicationContext.xml` (or where you configure things).\r\nAs Dmitry Chornyi points out in a comment, Java based configuration looks like:\r\n\r\n    @Bean public ConversionService conversionService() {\r\n        return new DefaultConversionService();\r\n    }\r\n\r\nThis activates the new configuration service which supports converting `String` to `Collection` types.\r\nIf you do not activate this configuration service, Spring falls back on its legacy property editors as configuration services, which do not support this kind of conversion.\r\n\r\nConverting to collections of other types works, too:\r\n\r\n    @Value(&quot;${my.list.of.ints}&quot;)\r\n    private List&lt;Integer&gt; myList\r\n\r\nwill work with a line like\r\n\r\n     my.list.of.ints= 1, 2, 3, 4\r\n\r\nNo problems with whitespace there, the `ConversionServiceFactoryBean` takes care of it.\r\n\r\nSee http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#core-convert-Spring-config\r\n\r\n&gt;  In a Spring application, you typically configure a ConversionService instance per Spring container (or ApplicationContext). That ConversionService will be picked up by Spring and then used whenever a type conversion needs to be performed by the framework.\r\n&gt; [...]\r\n&gt; If no ConversionService is registered with Spring, the original PropertyEditor-based system is used.","title":"Reading a List from properties file and load with Spring annotation @Value","body":"<p>Since Spring 3.0, you can add a line like</p>\n\n<pre><code>&lt;bean id=\"conversionService\" \n    class=\"org.springframework.context.support.ConversionServiceFactoryBean\" /&gt;\n</code></pre>\n\n<p>to your <code>applicationContext.xml</code> (or where you configure things).\nAs Dmitry Chornyi points out in a comment, Java based configuration looks like:</p>\n\n<pre><code>@Bean public ConversionService conversionService() {\n    return new DefaultConversionService();\n}\n</code></pre>\n\n<p>This activates the new configuration service which supports converting <code>String</code> to <code>Collection</code> types.\nIf you do not activate this configuration service, Spring falls back on its legacy property editors as configuration services, which do not support this kind of conversion.</p>\n\n<p>Converting to collections of other types works, too:</p>\n\n<pre><code>@Value(\"${my.list.of.ints}\")\nprivate List&lt;Integer&gt; myList\n</code></pre>\n\n<p>will work with a line like</p>\n\n<pre><code> my.list.of.ints= 1, 2, 3, 4\n</code></pre>\n\n<p>No problems with whitespace there, the <code>ConversionServiceFactoryBean</code> takes care of it.</p>\n\n<p>See <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#core-convert-Spring-config\" rel=\"noreferrer\">http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#core-convert-Spring-config</a></p>\n\n<blockquote>\n  <p>In a Spring application, you typically configure a ConversionService instance per Spring container (or ApplicationContext). That ConversionService will be picked up by Spring and then used whenever a type conversion needs to be performed by the framework.\n  [...]\n  If no ConversionService is registered with Spring, the original PropertyEditor-based system is used.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":1031235,"reputation":1587,"user_id":1039517,"accept_rate":73,"display_name":"sandrozbinden"},"score":0,"creation_date":1532002240,"post_id":47586180,"comment_id":89815531,"body_markdown":"I have a problem where the other solutions described here do not work due to escaped commas not beeing recognized. Is there a way to do this solution with Spring 4?","body":"I have a problem where the other solutions described here do not work due to escaped commas not beeing recognized. Is there a way to do this solution with Spring 4?"}],"tags":[],"owner":{"account_id":8631943,"reputation":4386,"user_id":6463291,"display_name":"Ng Sek Long"},"comment_count":1,"down_vote_count":0,"up_vote_count":60,"is_accepted":false,"score":60,"last_activity_date":1512098635,"creation_date":1512098635,"answer_id":47586180,"question_id":12576156,"body_markdown":"If you are reading this and you are using **Spring Boot**, you have 1 more option for this feature\r\n\r\nUsually comma separated list are very clumsy for real world use case \r\n(And sometime not even feasible, if you want to use commas in your config):\r\n\r\n    email.sendTo=somebody@example.com,somebody2@example.com,somebody3@example.com,.....\r\n\r\nWith **Spring Boot**, you can write it like these (Index start at 0):\r\n\r\n    email.sendTo[0]=somebody@example.com\r\n    email.sendTo[1]=somebody2@example.com\r\n    email.sendTo[2]=somebody3@example.com\r\n\r\nAnd use it like these:\r\n\r\n    @Component\r\n    @ConfigurationProperties(&quot;email&quot;)\r\n    public class EmailProperties {\r\n\r\n    \tprivate List&lt;String&gt; sendTo;\r\n    \t\r\n    \tpublic List&lt;String&gt; getSendTo() {\r\n    \t\treturn sendTo;\r\n    \t}\r\n\r\n    \tpublic void setSendTo(List&lt;String&gt; sendTo) {\r\n    \t\tthis.sendTo = sendTo;\r\n    \t}\r\n\r\n    }\r\n\r\n\r\n    @Component\r\n    public class EmailModel {\r\n\r\n      @Autowired\r\n      private EmailProperties emailProperties;\r\n      \r\n      //Use the sendTo List by \r\n      //emailProperties.getSendTo()\r\n\r\n    }\r\n\r\n\r\n\r\n    @Configuration\r\n    public class YourConfiguration {\r\n    \t@Bean\r\n      public EmailProperties emailProperties(){\r\n    \t\treturn new EmailProperties();\r\n      }\r\n\r\n    }\r\n\r\n\r\n    #Put this in src/main/resource/META-INF/spring.factories\r\n      org.springframework.boot.autoconfigure.EnableAutoConfiguration=example.compackage.YourConfiguration","title":"Reading a List from properties file and load with Spring annotation @Value","body":"<p>If you are reading this and you are using <strong>Spring Boot</strong>, you have 1 more option for this feature</p>\n\n<p>Usually comma separated list are very clumsy for real world use case \n(And sometime not even feasible, if you want to use commas in your config):</p>\n\n<pre><code>email.sendTo=somebody@example.com,somebody2@example.com,somebody3@example.com,.....\n</code></pre>\n\n<p>With <strong>Spring Boot</strong>, you can write it like these (Index start at 0):</p>\n\n<pre><code>email.sendTo[0]=somebody@example.com\nemail.sendTo[1]=somebody2@example.com\nemail.sendTo[2]=somebody3@example.com\n</code></pre>\n\n<p>And use it like these:</p>\n\n<pre><code>@Component\n@ConfigurationProperties(\"email\")\npublic class EmailProperties {\n\n    private List&lt;String&gt; sendTo;\n\n    public List&lt;String&gt; getSendTo() {\n        return sendTo;\n    }\n\n    public void setSendTo(List&lt;String&gt; sendTo) {\n        this.sendTo = sendTo;\n    }\n\n}\n\n\n@Component\npublic class EmailModel {\n\n  @Autowired\n  private EmailProperties emailProperties;\n\n  //Use the sendTo List by \n  //emailProperties.getSendTo()\n\n}\n\n\n\n@Configuration\npublic class YourConfiguration {\n    @Bean\n  public EmailProperties emailProperties(){\n        return new EmailProperties();\n  }\n\n}\n\n\n#Put this in src/main/resource/META-INF/spring.factories\n  org.springframework.boot.autoconfigure.EnableAutoConfiguration=example.compackage.YourConfiguration\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6920492,"reputation":376,"user_id":5313322,"display_name":"Mike Samaras"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1538487651,"creation_date":1538487651,"answer_id":52609601,"question_id":12576156,"body_markdown":"I think this is simpler for grabbing the array and stripping spaces:\r\n\r\n\r\n    @Value(&quot;#{&#39;${my.array}&#39;.replace(&#39; &#39;, &#39;&#39;).split(&#39;,&#39;)}&quot;)\r\n    private List&lt;String&gt; array;","title":"Reading a List from properties file and load with Spring annotation @Value","body":"<p>I think this is simpler for grabbing the array and stripping spaces:</p>\n\n<pre><code>@Value(\"#{'${my.array}'.replace(' ', '').split(',')}\")\nprivate List&lt;String&gt; array;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5295180,"reputation":192,"user_id":4226541,"display_name":"ad3luc"},"score":0,"creation_date":1559816428,"post_id":53331312,"comment_id":99541372,"body_markdown":"The adding of this configuration is working but something strange happens:\nI cannot use @Value for File type, I must change File with Resource.","body":"The adding of this configuration is working but something strange happens: I cannot use @Value for File type, I must change File with Resource."}],"tags":[],"owner":{"account_id":2368861,"reputation":1591,"user_id":2073963,"display_name":"wonhee"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1542341317,"creation_date":1542341317,"answer_id":53331312,"question_id":12576156,"body_markdown":"If you are using latest Spring framework version(Spring 3.1+ I believe), you don&#39;t need to those string split stuff in SpringEL,\r\n\r\nSimply add PropertySourcesPlaceholderConfigurer and DefaultConversionService in your Spring&#39;s Configuration class ( the one with annotated with Configuration ) e.g, \r\n\r\n    @Configuration\r\n    public class AppConfiguration {\r\n    \r\n    \t@Bean\r\n    \tpublic static PropertySourcesPlaceholderConfigurer propertyPlaceholderConfigurer() {\r\n    \t\treturn new PropertySourcesPlaceholderConfigurer();\r\n    \t}\r\n    \r\n        @Bean public ConversionService conversionService() {\r\n            return new DefaultConversionService();\r\n        }\r\n    }\r\n\r\nand in your class \r\n\r\n    @Value(&quot;${list}&quot;)\r\n    private List&lt;String&gt; list;\r\n\r\nand in the properties file\r\n\r\n    list=A,B,C,D,E\r\n\r\nWithout DefaultConversionService, you can only take comma separated String into String array when you inject the value into your field, but DefaultConversionService does a few convenient magic for you and will add those into Collection, Array, etc. ( check the implementation if you&#39;d like to know more about it )\r\n\r\nWith these two, it even handles all the redundant whitespaces including newline, so you don&#39;t need to add additional logics to trim them.","title":"Reading a List from properties file and load with Spring annotation @Value","body":"<p>If you are using latest Spring framework version(Spring 3.1+ I believe), you don't need to those string split stuff in SpringEL,</p>\n\n<p>Simply add PropertySourcesPlaceholderConfigurer and DefaultConversionService in your Spring's Configuration class ( the one with annotated with Configuration ) e.g, </p>\n\n<pre><code>@Configuration\npublic class AppConfiguration {\n\n    @Bean\n    public static PropertySourcesPlaceholderConfigurer propertyPlaceholderConfigurer() {\n        return new PropertySourcesPlaceholderConfigurer();\n    }\n\n    @Bean public ConversionService conversionService() {\n        return new DefaultConversionService();\n    }\n}\n</code></pre>\n\n<p>and in your class </p>\n\n<pre><code>@Value(\"${list}\")\nprivate List&lt;String&gt; list;\n</code></pre>\n\n<p>and in the properties file</p>\n\n<pre><code>list=A,B,C,D,E\n</code></pre>\n\n<p>Without DefaultConversionService, you can only take comma separated String into String array when you inject the value into your field, but DefaultConversionService does a few convenient magic for you and will add those into Collection, Array, etc. ( check the implementation if you'd like to know more about it )</p>\n\n<p>With these two, it even handles all the redundant whitespaces including newline, so you don't need to add additional logics to trim them.</p>\n"},{"comments":[{"owner":{"account_id":372117,"reputation":2909,"user_id":1486762,"accept_rate":47,"display_name":"Bilbo Baggins"},"score":1,"creation_date":1559998505,"post_id":53638956,"comment_id":99600626,"body_markdown":"didn&#39;t work for me, I have to use the Spring EL as shown above.","body":"didn&#39;t work for me, I have to use the Spring EL as shown above."},{"owner":{"account_id":5111999,"reputation":7665,"user_id":4098311,"accept_rate":80,"display_name":"Halayem Anis"},"score":0,"creation_date":1576270611,"post_id":53638956,"comment_id":104858746,"body_markdown":"or even `private List&lt;String&gt; myList;`","body":"or even <code>private List&lt;String&gt; myList;</code>"},{"owner":{"account_id":659270,"reputation":4476,"user_id":901798,"accept_rate":67,"display_name":"Ankit"},"score":2,"creation_date":1587364050,"post_id":53638956,"comment_id":108471628,"body_markdown":"Yes it worked for me as well: I am using Spring Boot 2.2.6","body":"Yes it worked for me as well: I am using Spring Boot 2.2.6"}],"tags":[],"owner":{"account_id":1127001,"reputation":4228,"user_id":1436491,"display_name":"Bienvenido David"},"comment_count":3,"down_vote_count":0,"up_vote_count":55,"is_accepted":false,"score":55,"last_activity_date":1544036039,"creation_date":1544036039,"answer_id":53638956,"question_id":12576156,"body_markdown":"If you are using Spring Boot 2, it works as is, without any additional configuration.\r\n\r\n    my.list.of.strings=ABC,CDE,EFG\r\n\r\n    @Value(&quot;${my.list.of.strings}&quot;)\r\n    private List&lt;String&gt; myList;","title":"Reading a List from properties file and load with Spring annotation @Value","body":"<p>If you are using Spring Boot 2, it works as is, without any additional configuration.</p>\n\n<pre><code>my.list.of.strings=ABC,CDE,EFG\n\n@Value(\"${my.list.of.strings}\")\nprivate List&lt;String&gt; myList;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9829227,"reputation":424,"user_id":7281453,"display_name":"Alexey Simonov"},"score":0,"creation_date":1571213375,"post_id":58181973,"comment_id":103161035,"body_markdown":"or @Value(&quot;#{${my.set.of.integers}}&quot;) private Set&lt;Integer&gt; setOfIntegers;","body":"or @Value(&quot;#{${my.set.of.integers}}&quot;) private Set&lt;Integer&gt; setOfIntegers;"}],"tags":[],"owner":{"account_id":10168350,"reputation":1388,"user_id":7666239,"display_name":"Sergey Nemchinov"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1569922538,"creation_date":1569922538,"answer_id":58181973,"question_id":12576156,"body_markdown":"In my case of a list of integers works this:\r\n\r\n````\r\n@Value(&quot;#{${my.list.of.integers}}&quot;)\r\nprivate List&lt;Integer&gt; listOfIntegers;\r\n````\r\n\r\nProperty file:\r\n\r\n````\r\nmy.list.of.integers={100,200,300,400,999}\r\n````","title":"Reading a List from properties file and load with Spring annotation @Value","body":"<p>In my case of a list of integers works this:</p>\n\n<pre><code>@Value(\"#{${my.list.of.integers}}\")\nprivate List&lt;Integer&gt; listOfIntegers;\n</code></pre>\n\n<p>Property file:</p>\n\n<pre><code>my.list.of.integers={100,200,300,400,999}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9890449,"reputation":814,"user_id":7323578,"display_name":"Toofy"},"score":0,"creation_date":1597398421,"post_id":59969974,"comment_id":112125904,"body_markdown":"What/where is the underlying code that does this conversion for Spring?","body":"What/where is the underlying code that does this conversion for Spring?"},{"owner":{"account_id":391375,"reputation":1507,"user_id":751992,"display_name":"Sampisa"},"score":0,"creation_date":1663233853,"post_id":59969974,"comment_id":130192750,"body_markdown":"It&#39;s SpELl that reads property admin.user ( the &#39;${admin.user}&#39;, see https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#expressions) and then parses what is inside ( the &#39;#{....}&#39; syntax, see https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-value-annotations).","body":"It&#39;s SpELl that reads property admin.user ( the &#39;${admin.user}&#39;, see <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#expressions\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/reference/html/&zwnj;&#8203;&hellip;</a>) and then parses what is inside ( the &#39;#{....}&#39; syntax, see <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-value-annotations\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/reference/html/&zwnj;&#8203;&hellip;</a>)."}],"tags":[],"owner":{"account_id":391375,"reputation":1507,"user_id":751992,"display_name":"Sampisa"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1580310412,"creation_date":1580310412,"answer_id":59969974,"question_id":12576156,"body_markdown":"My preferred way (for strings, in particular), is the following one:\r\n\r\n    admin.user={&#39;Doe, John&#39;,&#39;Headroom, Max&#39;,&#39;Mouse, Micky&#39;}\r\n\r\nand use \r\n\r\n    @Value(&quot;#{${admin.user}}&quot;)\r\n    private List&lt;String&gt; userList;\r\n\r\nIn this way, you can include also commas in your parameter. It works also for Sets.","title":"Reading a List from properties file and load with Spring annotation @Value","body":"<p>My preferred way (for strings, in particular), is the following one:</p>\n\n<pre><code>admin.user={'Doe, John','Headroom, Max','Mouse, Micky'}\n</code></pre>\n\n<p>and use </p>\n\n<pre><code>@Value(\"#{${admin.user}}\")\nprivate List&lt;String&gt; userList;\n</code></pre>\n\n<p>In this way, you can include also commas in your parameter. It works also for Sets.</p>\n"},{"tags":[],"owner":{"account_id":659270,"reputation":4476,"user_id":901798,"accept_rate":67,"display_name":"Ankit"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1587364294,"creation_date":1587364294,"answer_id":61316361,"question_id":12576156,"body_markdown":"I am using Spring Boot 2.2.6\r\n\r\nMy property file:\r\n\r\n    usa.big.banks= JP Morgan, Wells Fargo, Citigroup, Morgan Stanley, Goldman Sachs\r\n\r\nMy code:\r\n\r\n    @Value(&quot;${usa.big.banks}&quot;)\r\n    \tprivate List&lt;String&gt; bigBanks;\r\n    \r\n    @RequestMapping(&quot;/bigbanks&quot;)\r\n    \tpublic String getBanks() {\r\n    \t\tSystem.out.println(&quot;bigBanks = &quot; + bigBanks);\r\n    \t\treturn bigBanks.toString();\r\n    \t}\r\n\r\nIt works fine","title":"Reading a List from properties file and load with Spring annotation @Value","body":"<p>I am using Spring Boot 2.2.6</p>\n\n<p>My property file:</p>\n\n<pre><code>usa.big.banks= JP Morgan, Wells Fargo, Citigroup, Morgan Stanley, Goldman Sachs\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>@Value(\"${usa.big.banks}\")\n    private List&lt;String&gt; bigBanks;\n\n@RequestMapping(\"/bigbanks\")\n    public String getBanks() {\n        System.out.println(\"bigBanks = \" + bigBanks);\n        return bigBanks.toString();\n    }\n</code></pre>\n\n<p>It works fine</p>\n"},{"tags":[],"owner":{"account_id":20243773,"reputation":11,"user_id":14846897,"display_name":"trumanu1"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1620843304,"creation_date":1620840402,"answer_id":67508368,"question_id":12576156,"body_markdown":"The Answer \r\n\r\n    @Value(&quot;#{&#39;${my.list.of.strings}&#39;.split(&#39;,&#39;)}&quot;) \r\n    private List&lt;String&gt; myList; \r\n\r\nworks as expected for the comma separated values. \r\nTo handle null (when property not specified) added the default value(`&#39;: &#39;`after the property name) as empty string as below:\r\n\r\n    @Value(&quot;#{&#39;${my.list.of.strings: }&#39;.split(&#39;,&#39;)}&quot;)\r\n","title":"Reading a List from properties file and load with Spring annotation @Value","body":"<p>The Answer</p>\n<pre><code>@Value(&quot;#{'${my.list.of.strings}'.split(',')}&quot;) \nprivate List&lt;String&gt; myList; \n</code></pre>\n<p>works as expected for the comma separated values.\nTo handle null (when property not specified) added the default value(<code>': '</code>after the property name) as empty string as below:</p>\n<pre><code>@Value(&quot;#{'${my.list.of.strings: }'.split(',')}&quot;)\n</code></pre>\n"}],"owner":{"account_id":1469094,"reputation":11033,"user_id":1381093,"accept_rate":52,"display_name":"JackDev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":470497,"favorite_count":0,"down_vote_count":0,"up_vote_count":322,"accepted_answer_id":12580260,"answer_count":17,"score":322,"last_activity_date":1687806209,"creation_date":1348546740,"question_id":12576156,"body_markdown":"I want to have a list of values in a `.properties` file, i.e.:\r\n\r\n    my.list.of.strings=ABC,CDE,EFG\r\n\r\nAnd to load it in my class directly, i.e.:\r\n\r\n    @Value(&quot;${my.list.of.strings}&quot;)\r\n    private List&lt;String&gt; myList;\r\n\r\nAs I understand, an alternative of doing this is to have it in the Spring *config file*, and load it as a *bean* reference (correct me if I&#39;m wrong), i.e.\r\n\r\n    &lt;bean name=&quot;list&quot;&gt;\r\n     &lt;list&gt;\r\n      &lt;value&gt;ABC&lt;/value&gt;\r\n      &lt;value&gt;CDE&lt;/value&gt;\r\n      &lt;value&gt;EFG&lt;/value&gt;\r\n     &lt;/list&gt;\r\n    &lt;/bean&gt;\r\n\r\nBut is there any way of doing this using a `.properties` file? \r\n\r\n### P.S.\r\nI would like to do this without any custom code if possible.","title":"Reading a List from properties file and load with Spring annotation @Value","body":"<p>I want to have a list of values in a <code>.properties</code> file, i.e.:</p>\n<pre><code>my.list.of.strings=ABC,CDE,EFG\n</code></pre>\n<p>And to load it in my class directly, i.e.:</p>\n<pre><code>@Value(&quot;${my.list.of.strings}&quot;)\nprivate List&lt;String&gt; myList;\n</code></pre>\n<p>As I understand, an alternative of doing this is to have it in the Spring <em>config file</em>, and load it as a <em>bean</em> reference (correct me if I'm wrong), i.e.</p>\n<pre><code>&lt;bean name=&quot;list&quot;&gt;\n &lt;list&gt;\n  &lt;value&gt;ABC&lt;/value&gt;\n  &lt;value&gt;CDE&lt;/value&gt;\n  &lt;value&gt;EFG&lt;/value&gt;\n &lt;/list&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>But is there any way of doing this using a <code>.properties</code> file?</p>\n<h3>P.S.</h3>\n<p>I would like to do this without any custom code if possible.</p>\n"},{"tags":["java","junit","mockito"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1687763281,"post_id":76546154,"comment_id":134976523,"body_markdown":"What failure do you get? What makes you think that Mockito has &quot;created the same mock object&quot;?","body":"What failure do you get? What makes you think that Mockito has &quot;created the same mock object&quot;?"}],"owner":{"account_id":21831314,"reputation":1,"user_id":18754015,"display_name":"Mohammad"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687806081,"creation_date":1687611180,"question_id":76546154,"body_markdown":"I have a generic class and I want to to Mock 2 different type of objects from this class in order to use in my test.\r\n\r\nhere is My sample class :\r\n\r\n\r\n```java\r\npublic class A&lt;T&gt; {\r\n   T field;\r\n\r\n   // getters, setters , etc...\r\n\r\n}\r\n```\r\n\r\nand another class like this:\r\n\r\n```java\r\npublic class B {\r\n   A&lt;String&gt; a1;\r\n   A&lt;Long&gt; a2;\r\n\r\n   // Constructors\r\n\r\n   // getters, setters , etc...\r\n\r\n}\r\n```\r\n\r\n\r\nnow I have a test class which I want to mock 2 objects from this class. something like this :\r\n\r\n\r\n```java\r\nclass Test {\r\n   @Mock\r\n   private A&lt;String&gt; a1;\r\n\r\n   @Mock\r\n   private A&lt;Long&gt; a2;\r\n\r\n   @InjectMocks\r\n   private B b;\r\n\r\n\r\n   // tests\r\n\r\n}\r\n```\r\n\r\nthe problem I have encountered is that Mockito will create same mock object for both a1 and a2 and this will result in failure in my tests. I need 2 different mock object(with respect to their generic type of course!) \r\n\r\n\r\n\r\n\r\nMy attempts :\r\n\r\nif I write something like this it will work properly:\r\n\r\n```java\r\nclass Test {\r\n   @Test\r\n   void test1(){\r\n   A&lt;String&gt; a1 = Mockito.mock(A.class);\r\n   A&lt;Long&gt; a2 = Mockito.mock(A.class);\r\n\r\n   B b = new B(a1 , a2);\r\n\r\n   // rest of the test...\r\n   }\r\n\r\n}\r\n```\r\n\r\nbut is there any way to just declare a1 and a2 as class fields with @Mock annotation(like the code Block I mentioned before) without any problems and get 2 different mock objects ? ( I have read some related or similar question on stackoverflow, but none of them was useful for me :(  )\r\n\r\nP.s : I am using Junit with Mocktio.","title":"Mock 2 Objects of the same generic class","body":"<p>I have a generic class and I want to to Mock 2 different type of objects from this class in order to use in my test.</p>\n<p>here is My sample class :</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class A&lt;T&gt; {\n   T field;\n\n   // getters, setters , etc...\n\n}\n</code></pre>\n<p>and another class like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class B {\n   A&lt;String&gt; a1;\n   A&lt;Long&gt; a2;\n\n   // Constructors\n\n   // getters, setters , etc...\n\n}\n</code></pre>\n<p>now I have a test class which I want to mock 2 objects from this class. something like this :</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Test {\n   @Mock\n   private A&lt;String&gt; a1;\n\n   @Mock\n   private A&lt;Long&gt; a2;\n\n   @InjectMocks\n   private B b;\n\n\n   // tests\n\n}\n</code></pre>\n<p>the problem I have encountered is that Mockito will create same mock object for both a1 and a2 and this will result in failure in my tests. I need 2 different mock object(with respect to their generic type of course!)</p>\n<p>My attempts :</p>\n<p>if I write something like this it will work properly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Test {\n   @Test\n   void test1(){\n   A&lt;String&gt; a1 = Mockito.mock(A.class);\n   A&lt;Long&gt; a2 = Mockito.mock(A.class);\n\n   B b = new B(a1 , a2);\n\n   // rest of the test...\n   }\n\n}\n</code></pre>\n<p>but is there any way to just declare a1 and a2 as class fields with @Mock annotation(like the code Block I mentioned before) without any problems and get 2 different mock objects ? ( I have read some related or similar question on stackoverflow, but none of them was useful for me :(  )</p>\n<p>P.s : I am using Junit with Mocktio.</p>\n"},{"tags":["java","spring","spring-boot","kotlin","spring-webflux"],"comments":[{"owner":{"account_id":8023174,"reputation":9194,"user_id":6051176,"display_name":"Martin Tarj&#225;nyi"},"score":2,"creation_date":1687816656,"post_id":76559510,"comment_id":134986969,"body_markdown":"It&#39;s because `chain.filter(exchange)` returns a `Mono&lt;Void&gt;` which is an empty Mono. If you want a non-empty Mono inside the flatMap, you can consider using `thenReturn` operator for example.","body":"It&#39;s because <code>chain.filter(exchange)</code> returns a <code>Mono&lt;Void&gt;</code> which is an empty Mono. If you want a non-empty Mono inside the flatMap, you can consider using <code>thenReturn</code> operator for example."},{"owner":{"account_id":3168631,"reputation":3561,"user_id":2678097,"display_name":"amanin"},"score":1,"creation_date":1687845672,"post_id":76559510,"comment_id":134989602,"body_markdown":"Either @MartinTarj&#225;nyi suggestion, or just simplify. Instead of filter + flatMap + switchIfEmpty, just flatMap directly, and put validation condition inside it `if (validated) { /* continue filter chain */ } else { /* unauthorized */ }`","body":"Either @MartinTarj&#225;nyi suggestion, or just simplify. Instead of filter + flatMap + switchIfEmpty, just flatMap directly, and put validation condition inside it <code>if (validated) { &#47;* continue filter chain *&#47; } else { &#47;* unauthorized *&#47; }</code>"},{"owner":{"account_id":25939300,"reputation":31,"user_id":19659058,"display_name":"gearbase"},"score":0,"creation_date":1687850431,"post_id":76559510,"comment_id":134990413,"body_markdown":"[@Martin Tarj&#225;nyi](https://stackoverflow.com/users/6051176/martin-tarj%c3%a1nyi) \nThank you! I thought it was `Mono&lt;Void&gt;.` However, I imagined that the `Mono&lt;Void&gt;` returned by `chain.filter(exchange)` is not equal to `Mono.empty()`, because that `Mono&lt;Void&gt;` has a signal that the filter chain has executed successfully.","body":"<a href=\"https://stackoverflow.com/users/6051176/martin-tarj%c3%a1nyi\">@Martin Tarj&#225;nyi</a>  Thank you! I thought it was <code>Mono&lt;Void&gt;.</code> However, I imagined that the <code>Mono&lt;Void&gt;</code> returned by <code>chain.filter(exchange)</code> is not equal to <code>Mono.empty()</code>, because that <code>Mono&lt;Void&gt;</code> has a signal that the filter chain has executed successfully."},{"owner":{"account_id":25939300,"reputation":31,"user_id":19659058,"display_name":"gearbase"},"score":1,"creation_date":1687850598,"post_id":76559510,"comment_id":134990452,"body_markdown":"@amanin Thank you! I did just that. I needed to understand the reason why `switchIfEmpty` is always executed.","body":"@amanin Thank you! I did just that. I needed to understand the reason why <code>switchIfEmpty</code> is always executed."}],"owner":{"account_id":25939300,"reputation":31,"user_id":19659058,"display_name":"gearbase"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1687805920,"creation_date":1687805920,"question_id":76559510,"body_markdown":"My SpringBoot application has a WebFilter that works with the incoming request. The request is validated If the check is passed, then the authentication object is added to the context. If the check fails, further processing of the filter chain is aborted and a 401 code is set in response.\r\n\r\nBut in my case, the **switchIfEmpty** block is always called. Regardless of what the check method returned.\r\n\r\nPlease tell me what could be the problem?\r\n\r\n\r\n```kotlin\r\nclass MyFilter : WebFilter {\r\n\r\n        override fun filter(exchange: ServerWebExchange, chain: WebFilterChain): Mono&lt;Void&gt; {\r\n            val validate: Mono&lt;Boolean&gt; = Mono.just(true) //function that validates an incoming request and returns a Mono&lt;Boolean&gt;. For example Mono.just(true)\r\n            return validate\r\n                .filter { it }\r\n                .flatMap {\r\n                    log.info(&quot;Token verification passed&quot;)\r\n                    val auth = UsernamePasswordAuthenticationToken(&quot;user&quot;, &quot;&quot;, listOf())//create an authentication object based on the request. For example, a user token\r\n                    chain.filter(exchange)\r\n                        .contextWrite(ReactiveSecurityContextHolder.withAuthentication(auth))\r\n                }\r\n                .switchIfEmpty {\r\n                    Mono.defer {\r\n                        log.warn(&quot;Token verification failed&quot;)\r\n                        val response = exchange.response\r\n                        response.statusCode = HttpStatus.UNAUTHORIZED\r\n                        response.setComplete()\r\n                    }\r\n                }\r\n        }\r\n    }\r\n```\r\n\r\nP.S. Unfortunately, this [answer](https://stackoverflow.com/questions/54373920/mono-switchifempty-is-always-called) did not help me.  \r\nWithin **MonoExtensions**, the *switchIfEmpty* function already calls *Mono.defer* internally.\r\n```kotlin\r\nfun &lt;T&gt; Mono&lt;T&gt;.switchIfEmpty(s: () -&gt; Mono&lt;T&gt;): Mono&lt;T&gt; = this.switchIfEmpty(Mono.defer { s() })\r\n```","title":"WebFlux Mono switchIfEmpty() is always called in WebFilter","body":"<p>My SpringBoot application has a WebFilter that works with the incoming request. The request is validated If the check is passed, then the authentication object is added to the context. If the check fails, further processing of the filter chain is aborted and a 401 code is set in response.</p>\n<p>But in my case, the <strong>switchIfEmpty</strong> block is always called. Regardless of what the check method returned.</p>\n<p>Please tell me what could be the problem?</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class MyFilter : WebFilter {\n\n        override fun filter(exchange: ServerWebExchange, chain: WebFilterChain): Mono&lt;Void&gt; {\n            val validate: Mono&lt;Boolean&gt; = Mono.just(true) //function that validates an incoming request and returns a Mono&lt;Boolean&gt;. For example Mono.just(true)\n            return validate\n                .filter { it }\n                .flatMap {\n                    log.info(&quot;Token verification passed&quot;)\n                    val auth = UsernamePasswordAuthenticationToken(&quot;user&quot;, &quot;&quot;, listOf())//create an authentication object based on the request. For example, a user token\n                    chain.filter(exchange)\n                        .contextWrite(ReactiveSecurityContextHolder.withAuthentication(auth))\n                }\n                .switchIfEmpty {\n                    Mono.defer {\n                        log.warn(&quot;Token verification failed&quot;)\n                        val response = exchange.response\n                        response.statusCode = HttpStatus.UNAUTHORIZED\n                        response.setComplete()\n                    }\n                }\n        }\n    }\n</code></pre>\n<p>P.S. Unfortunately, this <a href=\"https://stackoverflow.com/questions/54373920/mono-switchifempty-is-always-called\">answer</a> did not help me.<br />\nWithin <strong>MonoExtensions</strong>, the <em>switchIfEmpty</em> function already calls <em>Mono.defer</em> internally.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun &lt;T&gt; Mono&lt;T&gt;.switchIfEmpty(s: () -&gt; Mono&lt;T&gt;): Mono&lt;T&gt; = this.switchIfEmpty(Mono.defer { s() })\n</code></pre>\n"},{"tags":["java","nlp"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":3,"creation_date":1336547210,"post_id":10511202,"comment_id":13590985,"body_markdown":"In the general sense, I can think of no good reason why you cannot use &quot;methods&quot; from different libraries.","body":"In the general sense, I can think of no good reason why you cannot use &quot;methods&quot; from different libraries."}],"answers":[{"tags":[],"owner":{"account_id":461144,"reputation":1546,"user_id":862666,"accept_rate":67,"display_name":"S Gaber"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1336560906,"creation_date":1336560906,"answer_id":10514646,"question_id":10511202,"body_markdown":"There are several tools which are in able to do all these, [gate](http://gate.ac.uk/) is one of them as well as [weka](http://www.cs.waikato.ac.nz/ml/weka/) \r\n","title":"open source tools for AI","body":"<p>There are several tools which are in able to do all these, <a href=\"http://gate.ac.uk/\" rel=\"nofollow\">gate</a> is one of them as well as <a href=\"http://www.cs.waikato.ac.nz/ml/weka/\" rel=\"nofollow\">weka</a> </p>\n"}],"owner":{"account_id":461144,"reputation":1546,"user_id":862666,"accept_rate":67,"display_name":"S Gaber"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":276,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"closed_date":1687817457,"accepted_answer_id":10514646,"answer_count":1,"score":-4,"last_activity_date":1687805648,"creation_date":1336546732,"question_id":10511202,"body_markdown":"I&#39;m through AI project which contain some methods that i have to apply in the project, the methods have some open source. but each method has different open source, i would like to have one open source and it&#39;s documentation which contain all the methods in it \r\nthe methods are \r\n\r\n    Stemming \r\n    extracting Stopwords\r\n    Latent Semantic Analysis LSA\r\n    K nearest neighbor KNN\r\n    Support Vector Machine SVM","title":"open source tools for AI","body":"<p>I'm through AI project which contain some methods that i have to apply in the project, the methods have some open source. but each method has different open source, i would like to have one open source and it's documentation which contain all the methods in it \nthe methods are </p>\n\n<pre><code>Stemming \nextracting Stopwords\nLatent Semantic Analysis LSA\nK nearest neighbor KNN\nSupport Vector Machine SVM\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":2,"creation_date":1687799780,"post_id":76558887,"comment_id":134984269,"body_markdown":"Does this answer your question? [Get generic type of class at runtime](https://stackoverflow.com/questions/3403909/get-generic-type-of-class-at-runtime)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/3403909/get-generic-type-of-class-at-runtime\">Get generic type of class at runtime</a>"},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1687799964,"post_id":76558887,"comment_id":134984306,"body_markdown":"Short answer: you can&#39;t. Worth looking into Kotlin&#39;s reified generic type that attempts to solve this issue.","body":"Short answer: you can&#39;t. Worth looking into Kotlin&#39;s reified generic type that attempts to solve this issue."},{"owner":{"account_id":4019407,"reputation":11310,"user_id":3310334,"accept_rate":64,"display_name":"theonlygusti"},"score":0,"creation_date":1687800107,"post_id":76558887,"comment_id":134984334,"body_markdown":"@m0skit0 what if the class&#39; own method doesn&#39;t have to do it? Can a consumer of a `List&lt;HasList&lt;?&gt;&gt;` figure out what each `HasList`&#39;s type is?","body":"@m0skit0 what if the class&#39; own method doesn&#39;t have to do it? Can a consumer of a <code>List&lt;HasList&lt;?&gt;&gt;</code> figure out what each <code>HasList</code>&#39;s type is?"},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":2,"creation_date":1687800150,"post_id":76558887,"comment_id":134984346,"body_markdown":"Generic types exist only during compilation for the compiler to check but not at runtime (it&#39;s basically a `List&lt;Object&gt;` or actually a simple `List` at that point). So there&#39;s no way to return a type in this way. The type is kept for reflection purposes if you have a subclass of a generic class which is what e.g. https://www.javadoc.io/doc/com.google.code.gson/gson/2.6.2/com/google/gson/reflect/TypeToken.html does. The other way to do that is to explicitly require a type / class in the constructor so you can return that (`HasList&lt;String&gt;(String.class)`)","body":"Generic types exist only during compilation for the compiler to check but not at runtime (it&#39;s basically a <code>List&lt;Object&gt;</code> or actually a simple <code>List</code> at that point). So there&#39;s no way to return a type in this way. The type is kept for reflection purposes if you have a subclass of a generic class which is what e.g. <a href=\"https://www.javadoc.io/doc/com.google.code.gson/gson/2.6.2/com/google/gson/reflect/TypeToken.html\" rel=\"nofollow noreferrer\">javadoc.io/doc/com.google.code.gson/gson/2.6.2/com/google/gs&zwnj;&#8203;on/&hellip;</a> does. The other way to do that is to explicitly require a type / class in the constructor so you can return that (<code>HasList&lt;String&gt;(String.class)</code>)"}],"answers":[{"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1687801277,"post_id":76558931,"comment_id":134984617,"body_markdown":"This works provided `T` is not itself generic.","body":"This works provided <code>T</code> is not itself generic."}],"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1687801674,"creation_date":1687800041,"answer_id":76558931,"question_id":76558887,"body_markdown":"Due to [type erasure][1] you couldn&#39;t get that type in runtime.\r\nIf `T` is not a generic itself, typical workaround works: demand class object at the constructor:\r\n\r\n    public class HasList&lt;T&gt; {\r\n        private final Class&lt;T&gt; type;\r\n        private List&lt;T&gt; list;\r\n\r\n        public HasList(Class&lt;T&gt; type) {\r\n            this.type = type;\r\n        }\r\n\r\n        public Class&lt;T&gt; getType() {\r\n            return type;\r\n        }\r\n    }\r\n\r\n\r\n\r\n  [1]: https://www.baeldung.com/java-type-erasure#1-class-type-erasure","title":"Return nested type parameter from method of generic class?","body":"<p>Due to <a href=\"https://www.baeldung.com/java-type-erasure#1-class-type-erasure\" rel=\"nofollow noreferrer\">type erasure</a> you couldn't get that type in runtime.\nIf <code>T</code> is not a generic itself, typical workaround works: demand class object at the constructor:</p>\n<pre><code>public class HasList&lt;T&gt; {\n    private final Class&lt;T&gt; type;\n    private List&lt;T&gt; list;\n\n    public HasList(Class&lt;T&gt; type) {\n        this.type = type;\n    }\n\n    public Class&lt;T&gt; getType() {\n        return type;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":26385561,"reputation":109,"user_id":20038123,"display_name":"Twisted Tea"},"score":0,"creation_date":1687805488,"post_id":76559095,"comment_id":134985322,"body_markdown":"I love `TypeToken`, but it’s just messy if the types youre passing dont take class parameter(s). IMO the best solution is overloading and giving the option to pass a `Class&lt;T&gt;` or  `TypeToken` (or something similar  to TypeToken)","body":"I love <code>TypeToken</code>, but it’s just messy if the types youre passing dont take class parameter(s). IMO the best solution is overloading and giving the option to pass a <code>Class&lt;T&gt;</code> or  <code>TypeToken</code> (or something similar  to TypeToken)"}],"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1687804151,"creation_date":1687801754,"answer_id":76559095,"question_id":76558887,"body_markdown":"If you want to do this in a way that supports all `T`, including generic types, you need to use something like a type token.\r\n\r\nFor example, Guava has [`TypeToken`](https://guava.dev/releases/21.0/api/docs/com/google/common/reflect/TypeToken.html), which is an abstract class that you have to subclass in order to get an instance of it:\r\n\r\n```\r\nTypeToken&lt;String&gt; stringTypeToken = new TypeToken&lt;String&gt;() {};\r\nTypeToken&lt;Integer&gt; integerTypeToken = new TypeToken&lt;Integer&gt;() {};\r\nTypeToken&lt;List&lt;String&gt;&gt; listOfStringTypeToken = new TypeToken&lt;List&lt;String&gt;&gt;() {};\r\n```\r\n\r\nThe `{}` is important here: it&#39;s creating an instance of an anonymous class, which is a subclass of `TypeToken`.\r\n\r\nYou can pass a `TypeToken` into the constructor of your `HasList` class, and return it from the getter.\r\n\r\n----\r\n\r\nOf course, you may not want to take a dependency on an external library for this; it&#39;s not hard to implement something similar yourself:\r\n\r\n```\r\npublic abstract class HasList&lt;T&gt; {\r\n  // ...\r\n\r\n  public Type getType() {\r\n    Type type = getClass().getGenericSuperclass();\r\n    ParameterizedType paramType = (ParameterizedType) type;\r\n    return paramType.getActualTypeArguments()[0];\r\n  }\r\n}\r\n```","title":"Return nested type parameter from method of generic class?","body":"<p>If you want to do this in a way that supports all <code>T</code>, including generic types, you need to use something like a type token.</p>\n<p>For example, Guava has <a href=\"https://guava.dev/releases/21.0/api/docs/com/google/common/reflect/TypeToken.html\" rel=\"nofollow noreferrer\"><code>TypeToken</code></a>, which is an abstract class that you have to subclass in order to get an instance of it:</p>\n<pre><code>TypeToken&lt;String&gt; stringTypeToken = new TypeToken&lt;String&gt;() {};\nTypeToken&lt;Integer&gt; integerTypeToken = new TypeToken&lt;Integer&gt;() {};\nTypeToken&lt;List&lt;String&gt;&gt; listOfStringTypeToken = new TypeToken&lt;List&lt;String&gt;&gt;() {};\n</code></pre>\n<p>The <code>{}</code> is important here: it's creating an instance of an anonymous class, which is a subclass of <code>TypeToken</code>.</p>\n<p>You can pass a <code>TypeToken</code> into the constructor of your <code>HasList</code> class, and return it from the getter.</p>\n<hr />\n<p>Of course, you may not want to take a dependency on an external library for this; it's not hard to implement something similar yourself:</p>\n<pre><code>public abstract class HasList&lt;T&gt; {\n  // ...\n\n  public Type getType() {\n    Type type = getClass().getGenericSuperclass();\n    ParameterizedType paramType = (ParameterizedType) type;\n    return paramType.getActualTypeArguments()[0];\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":4019407,"reputation":11310,"user_id":3310334,"accept_rate":64,"display_name":"theonlygusti"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76559095,"answer_count":2,"score":-1,"last_activity_date":1687804151,"creation_date":1687799669,"question_id":76558887,"body_markdown":"How can I get the type of the type parameter of the class or the (same) type parameter of a List instance variable of the class?\r\n\r\n```java\r\npublic class HasList&lt;T&gt; {\r\n    private List&lt;T&gt; list;\r\n\r\n    public ? getType() {\r\n        return // ??\r\n    }\r\n\r\n}\r\n```\r\n\r\nI think normally types are represented by `Class&lt;?&gt;`, e.g. via the `.class` property, but there might be a better way to represent them in order to solve this question well.\r\n\r\n```java\r\nvar hasListString = HasList&lt;String&gt;();\r\nvar hasListInteger = HasList&lt;Integer&gt;();\r\nhasListString.getType() // -&gt; something representing the String type\r\nhasListInteger.getType() // -&gt; something representing the Integer type\r\n```","title":"Return nested type parameter from method of generic class?","body":"<p>How can I get the type of the type parameter of the class or the (same) type parameter of a List instance variable of the class?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class HasList&lt;T&gt; {\n    private List&lt;T&gt; list;\n\n    public ? getType() {\n        return // ??\n    }\n\n}\n</code></pre>\n<p>I think normally types are represented by <code>Class&lt;?&gt;</code>, e.g. via the <code>.class</code> property, but there might be a better way to represent them in order to solve this question well.</p>\n<pre class=\"lang-java prettyprint-override\"><code>var hasListString = HasList&lt;String&gt;();\nvar hasListInteger = HasList&lt;Integer&gt;();\nhasListString.getType() // -&gt; something representing the String type\nhasListInteger.getType() // -&gt; something representing the Integer type\n</code></pre>\n"},{"tags":["java","json","object","indexing","json-arrayagg"],"comments":[{"owner":{"account_id":10933290,"reputation":2086,"user_id":8035759,"display_name":"Asgar"},"score":1,"creation_date":1687791028,"post_id":76557776,"comment_id":134982362,"body_markdown":"what have you tried so far? Where did you fail?","body":"what have you tried so far? Where did you fail?"}],"answers":[{"comments":[{"owner":{"account_id":16967946,"reputation":238,"user_id":12273325,"display_name":"Sahithi Y"},"score":0,"creation_date":1688564409,"post_id":76559339,"comment_id":135090303,"body_markdown":"this is nice , but i want it for bigger problem i simplified as this. any how i replace JSONArray with List and used the get functions of it, later converted it to JSONArray. I do agree internally it will loop","body":"this is nice , but i want it for bigger problem i simplified as this. any how i replace JSONArray with List and used the get functions of it, later converted it to JSONArray. I do agree internally it will loop"}],"tags":[],"owner":{"account_id":15533133,"reputation":45,"user_id":11206012,"display_name":"Dave Peters"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687804004,"creation_date":1687804004,"answer_id":76559339,"question_id":76557776,"body_markdown":"I may be wrong, but unfortunately, if you keep the objects representing each manager inside of an array, I don&#39;t believe you can achieve your desired outcome without looping through every manager (even if there is a built-in function that may make it seem like you&#39;re not looping, it will probably still be doing a loop under the hood).\r\n\r\nHowever, if you&#39;re able to modify the data structure a bit, it can be done quite easily!\r\n\r\nI would implement it in the following way:\r\n\r\n```\r\nmanagers = {\r\n&quot;Ram&quot;: {\r\n    employees: [&quot;Shyam&quot;, &quot;bhavya&quot;]\r\n},\r\n&quot;Ramya&quot;: {\r\n    employees: [&quot;Keerthi&quot;, &quot;suresh&quot;]\r\n}\r\n}\r\n```\r\n\r\nIf you do it this way, you can easily modify the employee information of each manager without having to loop through existing managers.\r\n\r\nFor example:\r\n\r\n```\r\nmanager = &quot;Ram&quot;;\r\nnewEmployees = [&quot;John&quot;, &quot;Steven&quot;, &quot;Katie&quot;]\r\n\r\n// manager doesn&#39;t yet exist\r\nif (!managers[manager]) {\r\n// create new manager and their employee info\r\nmanagers[manager] = { employees: newEmployees }\r\n}\r\n// manager already exists\r\nelse {\r\n// get existing employees and update them\r\nexistingEmployees = managers[manager].employees;\r\nexistingEmployees = [...existingEmployees, ...newEmployees];\r\n}\r\n```\r\n\r\nI hope this helps!","title":"find the JSONObject in JSONArray based on key-value of JSONObject","body":"<p>I may be wrong, but unfortunately, if you keep the objects representing each manager inside of an array, I don't believe you can achieve your desired outcome without looping through every manager (even if there is a built-in function that may make it seem like you're not looping, it will probably still be doing a loop under the hood).</p>\n<p>However, if you're able to modify the data structure a bit, it can be done quite easily!</p>\n<p>I would implement it in the following way:</p>\n<pre><code>managers = {\n&quot;Ram&quot;: {\n    employees: [&quot;Shyam&quot;, &quot;bhavya&quot;]\n},\n&quot;Ramya&quot;: {\n    employees: [&quot;Keerthi&quot;, &quot;suresh&quot;]\n}\n}\n</code></pre>\n<p>If you do it this way, you can easily modify the employee information of each manager without having to loop through existing managers.</p>\n<p>For example:</p>\n<pre><code>manager = &quot;Ram&quot;;\nnewEmployees = [&quot;John&quot;, &quot;Steven&quot;, &quot;Katie&quot;]\n\n// manager doesn't yet exist\nif (!managers[manager]) {\n// create new manager and their employee info\nmanagers[manager] = { employees: newEmployees }\n}\n// manager already exists\nelse {\n// get existing employees and update them\nexistingEmployees = managers[manager].employees;\nexistingEmployees = [...existingEmployees, ...newEmployees];\n}\n</code></pre>\n<p>I hope this helps!</p>\n"}],"owner":{"account_id":16967946,"reputation":238,"user_id":12273325,"display_name":"Sahithi Y"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687804004,"creation_date":1687790786,"question_id":76557776,"body_markdown":"I have a JSONArray with JSONObjects , i want the find a JSONObject based on condition and update it . Consider my json as below\r\n```\r\nManagerArr = [\r\n{\r\n    name : &quot;Ram&quot;,\r\n    employees: [&quot;Shyam&quot;,&quot;bhavya&quot;]\r\n},\r\n{\r\n    name: &quot;Ramya&quot;,\r\n    employees: [&quot;Keerthi&quot;, &quot;suresh&quot;]\r\n}\r\n```\r\n\r\nI want to update above array when i get new list of employees, i have to find the json object by validating manager name and then add them to employees array. \r\ni can iterate on whole jsonArray for every new employee, but do we have any in-built method to do so. \r\ni don&#39;t want to iterate the whole array every time, can i get the index of JSONObject in JSONArray by any chance\r\n\r\n\r\n","title":"find the JSONObject in JSONArray based on key-value of JSONObject","body":"<p>I have a JSONArray with JSONObjects , i want the find a JSONObject based on condition and update it . Consider my json as below</p>\n<pre><code>ManagerArr = [\n{\n    name : &quot;Ram&quot;,\n    employees: [&quot;Shyam&quot;,&quot;bhavya&quot;]\n},\n{\n    name: &quot;Ramya&quot;,\n    employees: [&quot;Keerthi&quot;, &quot;suresh&quot;]\n}\n</code></pre>\n<p>I want to update above array when i get new list of employees, i have to find the json object by validating manager name and then add them to employees array.\ni can iterate on whole jsonArray for every new employee, but do we have any in-built method to do so.\ni don't want to iterate the whole array every time, can i get the index of JSONObject in JSONArray by any chance</p>\n"},{"tags":["java","spring-boot","spring-data","spring-data-cassandra","spring-webflux"],"comments":[{"owner":{"account_id":11818,"reputation":57413,"user_id":22982,"accept_rate":100,"display_name":"Brian Clozel"},"score":0,"creation_date":1513279081,"post_id":47820325,"comment_id":82603509,"body_markdown":"could you provide more information? Your repository interface looks strange (declaring two times the extended interface?) and you&#39;re not showing the test class that you&#39;re running. Also, why adding spring-data-jpa in the mix?","body":"could you provide more information? Your repository interface looks strange (declaring two times the extended interface?) and you&#39;re not showing the test class that you&#39;re running. Also, why adding spring-data-jpa in the mix?"},{"owner":{"account_id":5550987,"reputation":205,"user_id":4404062,"accept_rate":50,"display_name":"jovannypcg"},"score":0,"creation_date":1513279706,"post_id":47820325,"comment_id":82603825,"body_markdown":"@BrianClozel Oh I forgot to remove a commented line. Just updated it. Thanks for the observation. Included spring-data-jpa to create another repository that is not reactive. I included the test, but actually all the tests fail, since none bean is found for that repository.","body":"@BrianClozel Oh I forgot to remove a commented line. Just updated it. Thanks for the observation. Included spring-data-jpa to create another repository that is not reactive. I included the test, but actually all the tests fail, since none bean is found for that repository."},{"owner":{"account_id":325446,"reputation":17129,"user_id":646634,"accept_rate":100,"display_name":"Brian"},"score":0,"creation_date":1513280221,"post_id":47820325,"comment_id":82604092,"body_markdown":"@Jovanny Did you add `@Enable*Repositories` anywhere? E.g. like [this example](https://spring.io/blog/2016/11/28/going-reactive-with-spring-data#reactive-configuration)?","body":"@Jovanny Did you add <code>@Enable*Repositories</code> anywhere? E.g. like <a href=\"https://spring.io/blog/2016/11/28/going-reactive-with-spring-data#reactive-configuration\" rel=\"nofollow noreferrer\">this example</a>?"},{"owner":{"account_id":5550987,"reputation":205,"user_id":4404062,"accept_rate":50,"display_name":"jovannypcg"},"score":0,"creation_date":1513288032,"post_id":47820325,"comment_id":82607772,"body_markdown":"@Brian, yeah, I have a configuration class which is marked with `@Configuration` and `@EnableReactiveCassandraRepositories`","body":"@Brian, yeah, I have a configuration class which is marked with <code>@Configuration</code> and <code>@EnableReactiveCassandraRepositories</code>"}],"answers":[{"tags":[],"owner":{"account_id":11818,"reputation":57413,"user_id":22982,"accept_rate":100,"display_name":"Brian Clozel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1513325164,"creation_date":1513325164,"answer_id":47828140,"question_id":47820325,"body_markdown":"It seems you&#39;re using an `@WebMvcTest` annotated class to test this case (I&#39;m not sure though, that part is missing from your question).\r\n\r\nTo test Spring WebFlux applications, you should use `@WebFluxTest` (see [reference documentation][1]). Even if you do, the `ContributorStatRepository` bean won&#39;t be there since the web test slice will only consider the web parts of your application and you usually need to mock this one with `@MockBean`.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/2.0.0.M7/reference/html/boot-features-testing.html#boot-features-testing-spring-boot-applications-testing-autoconfigured-webflux-tests","title":"Spring Boot: ReactiveCrudRepository is not being implemented by any bean","body":"<p>It seems you're using an <code>@WebMvcTest</code> annotated class to test this case (I'm not sure though, that part is missing from your question).</p>\n\n<p>To test Spring WebFlux applications, you should use <code>@WebFluxTest</code> (see <a href=\"https://docs.spring.io/spring-boot/docs/2.0.0.M7/reference/html/boot-features-testing.html#boot-features-testing-spring-boot-applications-testing-autoconfigured-webflux-tests\" rel=\"nofollow noreferrer\">reference documentation</a>). Even if you do, the <code>ContributorStatRepository</code> bean won't be there since the web test slice will only consider the web parts of your application and you usually need to mock this one with <code>@MockBean</code>.</p>\n"},{"tags":[],"owner":{"account_id":8436933,"reputation":67,"user_id":6330806,"display_name":"Andres Camilo Sierra Hormiga"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687803920,"creation_date":1687803920,"answer_id":76559334,"question_id":47820325,"body_markdown":"Steps to solve that:\r\n\r\n 1. Check if interface ClientRepository has @Repository annotation\r\n 2. Check @EnableJpaRepositories\r\n 3. Use\r\n\r\n     @MockBean\r\n        private ContributorStatRepository interface;\r\n\r\nThis case is when you&#39;re not going to implement the interface in a concrete class implementation.\r\n\r\nEnjoy","title":"Spring Boot: ReactiveCrudRepository is not being implemented by any bean","body":"<p>Steps to solve that:</p>\n<ol>\n<li><p>Check if interface ClientRepository has @Repository annotation</p>\n</li>\n<li><p>Check @EnableJpaRepositories</p>\n</li>\n<li><p>Use</p>\n<p>@MockBean\nprivate ContributorStatRepository interface;</p>\n</li>\n</ol>\n<p>This case is when you're not going to implement the interface in a concrete class implementation.</p>\n<p>Enjoy</p>\n"}],"owner":{"account_id":5550987,"reputation":205,"user_id":4404062,"accept_rate":50,"display_name":"jovannypcg"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1925,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1687803920,"creation_date":1513277812,"question_id":47820325,"body_markdown":"I plan to use Cassandra to save data reactively. To do that, I wrote the following interface:\r\n\r\n    @Repository\r\n    public interface ContributorStatRepository extends ReactiveCrudRepository&lt;ContributorStat, Long&gt; {\r\n        Flux&lt;ContributorStat&gt; findByAkonId(String akonId);\r\n    }\r\n\r\nThe exception above is thrown:\r\n\r\n    com.example.sample.controller.ContributorStatControllerTest &gt; shouldReturnBadRequestWithBlankContributorStat FAILED\r\n        java.lang.IllegalStateException\r\n            Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException\r\n                Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException\r\n                    Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException\r\n\r\n**Do you know why the appropiate bean for `ContributorStatRepository` is not being created?**\r\n\r\nI am using Spring boot 2.0.0.M7 and these dependencies:\r\n\r\n    dependencies {\r\n        compile(&#39;org.springframework.boot:spring-boot-starter-actuator&#39;)\r\n        compile(&#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;)\r\n        compile(&#39;javax.xml.bind:jaxb-api:2.3.0&#39;)\r\n        compile(&#39;org.springframework.boot:spring-boot-starter-webflux&#39;)\r\n        compile(&#39;org.springframework.boot:spring-boot-starter-data-cassandra-reactive&#39;)\r\n        testCompile(&#39;org.springframework.boot:spring-boot-starter-test&#39;)\r\n        testCompile(&#39;io.projectreactor:reactor-test&#39;)\r\n    }\r\n\r\n**Updated**:\r\nRunning test:\r\n\r\n    @Test\r\n    public void shouldReturnBadRequestWithBlankContributorStat() throws Exception {\r\n        requestPayload = mapper.writeValueAsString(new ContributorStatDTO());\r\n\r\n        this.mockMvc.perform(post(CONTRIBUTOR_STATS_ROUTE)\r\n                .contentType(MediaType.APPLICATION_JSON)\r\n                .accept(MediaType.APPLICATION_JSON)\r\n                .content(requestPayload)).andDo(print())\r\n                .andExpect(status().isBadRequest());\r\n    }","title":"Spring Boot: ReactiveCrudRepository is not being implemented by any bean","body":"<p>I plan to use Cassandra to save data reactively. To do that, I wrote the following interface:</p>\n\n<pre><code>@Repository\npublic interface ContributorStatRepository extends ReactiveCrudRepository&lt;ContributorStat, Long&gt; {\n    Flux&lt;ContributorStat&gt; findByAkonId(String akonId);\n}\n</code></pre>\n\n<p>The exception above is thrown:</p>\n\n<pre><code>com.example.sample.controller.ContributorStatControllerTest &gt; shouldReturnBadRequestWithBlankContributorStat FAILED\n    java.lang.IllegalStateException\n        Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException\n            Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException\n                Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException\n</code></pre>\n\n<p><strong>Do you know why the appropiate bean for <code>ContributorStatRepository</code> is not being created?</strong></p>\n\n<p>I am using Spring boot 2.0.0.M7 and these dependencies:</p>\n\n<pre><code>dependencies {\n    compile('org.springframework.boot:spring-boot-starter-actuator')\n    compile('org.springframework.boot:spring-boot-starter-data-jpa')\n    compile('javax.xml.bind:jaxb-api:2.3.0')\n    compile('org.springframework.boot:spring-boot-starter-webflux')\n    compile('org.springframework.boot:spring-boot-starter-data-cassandra-reactive')\n    testCompile('org.springframework.boot:spring-boot-starter-test')\n    testCompile('io.projectreactor:reactor-test')\n}\n</code></pre>\n\n<p><strong>Updated</strong>:\nRunning test:</p>\n\n<pre><code>@Test\npublic void shouldReturnBadRequestWithBlankContributorStat() throws Exception {\n    requestPayload = mapper.writeValueAsString(new ContributorStatDTO());\n\n    this.mockMvc.perform(post(CONTRIBUTOR_STATS_ROUTE)\n            .contentType(MediaType.APPLICATION_JSON)\n            .accept(MediaType.APPLICATION_JSON)\n            .content(requestPayload)).andDo(print())\n            .andExpect(status().isBadRequest());\n}\n</code></pre>\n"},{"tags":["javascript","java","selenium-webdriver","firefox","selenium-firefoxdriver"],"comments":[{"owner":{"account_id":7991,"reputation":205509,"user_id":14104,"display_name":"epascarello"},"score":0,"creation_date":1687805902,"post_id":76559316,"comment_id":134985383,"body_markdown":"It is not pointless. I am amazed it is not erroring out in the other browsers.","body":"It is not pointless. I am amazed it is not erroring out in the other browsers."}],"owner":{"account_id":18835352,"reputation":314,"user_id":13738146,"display_name":"Kel Varnsen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687803821,"creation_date":1687803821,"question_id":76559316,"body_markdown":"I have a simple web application with a set of accompanying Selenium tests. Before each test runs, I do a fetch of the user object by running `executeAsyncScript` as shown here:\r\n\r\n```java\r\nString getUserScript = &quot;const callback = arguments.at(-1);\\n&quot; +\r\n                       &quot;const user = await fetch(&#39;/user&#39;);\\n&quot; +\r\n                       &quot;callback(user);&quot;;\r\njsExecutor.executeAsyncScript(getUserScript);\r\n```\r\n\r\nThis works perfectly fine when run with Chrome or Edge as the browsers, but as soon as I try it with Firefox, the test fails with this error:\r\n\r\n*SyntaxError: await is only valid in async functions, async generators and modules*\r\n\r\nI understand that in general, you need to mark a function as `async` in order to use `await` inside of it. But in this case, it works fine without wrapping my script in a pointless extra `async` function when using Chrome or Edge. Firefox is the only one that complains about it, so I was wondering if there are any Firefox WebDriver preferences or settings I may be missing that allow that script to work as-is? Thanks.","title":"Firefox WebDriver not allowing await&#39;s in asynchronous scripts","body":"<p>I have a simple web application with a set of accompanying Selenium tests. Before each test runs, I do a fetch of the user object by running <code>executeAsyncScript</code> as shown here:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String getUserScript = &quot;const callback = arguments.at(-1);\\n&quot; +\n                       &quot;const user = await fetch('/user');\\n&quot; +\n                       &quot;callback(user);&quot;;\njsExecutor.executeAsyncScript(getUserScript);\n</code></pre>\n<p>This works perfectly fine when run with Chrome or Edge as the browsers, but as soon as I try it with Firefox, the test fails with this error:</p>\n<p><em>SyntaxError: await is only valid in async functions, async generators and modules</em></p>\n<p>I understand that in general, you need to mark a function as <code>async</code> in order to use <code>await</code> inside of it. But in this case, it works fine without wrapping my script in a pointless extra <code>async</code> function when using Chrome or Edge. Firefox is the only one that complains about it, so I was wondering if there are any Firefox WebDriver preferences or settings I may be missing that allow that script to work as-is? Thanks.</p>\n"},{"tags":["java","spring","state-machine","spring-statemachine"],"owner":{"account_id":28898537,"reputation":1,"user_id":22134027,"display_name":"Vladimir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687803658,"creation_date":1687803495,"question_id":76559286,"body_markdown":"I&#39;m new to State machine. Could you explain, it&#39;s possible to create dynamic sub-states (pseudo states) in @Configuration classes with application context, or it&#39;s possible only by Builder? \r\n\r\nFor example: I have initial state READY, fork state FORK, parent state TASK and several sub-task states, the number of which is dynamic (T1-T1E, T2-T2E, ...). Sub tasks are executed in parallel.\r\n\r\n```\r\n@Override\r\npublic void configure(StateMachineStateConfigurer&lt;States, Events&gt; states)\r\n\t\tthrows Exception {\r\n\tstates\r\n\t\t.withStates()\r\n\t\t\t.initial(States.READY)\r\n\t\t\t.fork(States.FORK)\r\n\t\t\t.state(States.TASKS)\r\n\t\t\t.join(States.JOIN)\t\t\t\r\n\t\t\t.state(States.ERROR)\r\n\t\t\t.and()\r\n\t\t\t.withStates()\r\n\t\t\t\t.parent(States.TASKS)\r\n\t\t\t\t.initial(States.T1)\r\n\t\t\t\t.end(States.T1E)\r\n\t\t\t\t.and()\r\n\t\t\t.withStates()\r\n\t\t\t\t.parent(States.TASKS)\r\n\t\t\t\t.initial(States.T2)\r\n\t\t\t\t.end(States.T2E)\r\n\t\t\t\t.and()\r\n\t\t\t.withStates()\r\n\t\t\t\t.parent(States.TASKS)\r\n\t\t\t\t.initial(States.T3)\r\n\t\t\t\t.end(States.T3E)\r\n\t\t\t\t.and()\r\n                                 ....\r\n                              // dynamic sub-task\r\n                                 ....  \r\n \r\n}\r\n```\r\nIn a moment when State machine hasn&#39;t started I have no information, how many sub-states (sub tasks T1-T1E....)I have to create. I will get this information, when be on FORK state.\r\nHow to configure that in Spring context?\r\n\r\n\r\n\r\nI&#39;ve found an [example](https://stackoverflow.com/questions/48830885/spring-state-machine-dynamic-fork) when configuration was creating by Builder, outside the Spring application context.\r\n\r\n\r\nIf you know how to do that in Spring context, I will be grateful for your help.\r\n ","title":"How to create dynamic sub-states in state machine?","body":"<p>I'm new to State machine. Could you explain, it's possible to create dynamic sub-states (pseudo states) in @Configuration classes with application context, or it's possible only by Builder?</p>\n<p>For example: I have initial state READY, fork state FORK, parent state TASK and several sub-task states, the number of which is dynamic (T1-T1E, T2-T2E, ...). Sub tasks are executed in parallel.</p>\n<pre><code>@Override\npublic void configure(StateMachineStateConfigurer&lt;States, Events&gt; states)\n        throws Exception {\n    states\n        .withStates()\n            .initial(States.READY)\n            .fork(States.FORK)\n            .state(States.TASKS)\n            .join(States.JOIN)          \n            .state(States.ERROR)\n            .and()\n            .withStates()\n                .parent(States.TASKS)\n                .initial(States.T1)\n                .end(States.T1E)\n                .and()\n            .withStates()\n                .parent(States.TASKS)\n                .initial(States.T2)\n                .end(States.T2E)\n                .and()\n            .withStates()\n                .parent(States.TASKS)\n                .initial(States.T3)\n                .end(States.T3E)\n                .and()\n                                 ....\n                              // dynamic sub-task\n                                 ....  \n \n}\n</code></pre>\n<p>In a moment when State machine hasn't started I have no information, how many sub-states (sub tasks T1-T1E....)I have to create. I will get this information, when be on FORK state.\nHow to configure that in Spring context?</p>\n<p>I've found an <a href=\"https://stackoverflow.com/questions/48830885/spring-state-machine-dynamic-fork\">example</a> when configuration was creating by Builder, outside the Spring application context.</p>\n<p>If you know how to do that in Spring context, I will be grateful for your help.</p>\n"},{"tags":["java","mysql","spring","spring-webflux","spring-data-r2dbc"],"comments":[{"owner":{"account_id":10838690,"reputation":3209,"user_id":7970787,"display_name":"Alex R"},"score":0,"creation_date":1672851755,"post_id":75004504,"comment_id":132367624,"body_markdown":"What&#39;s the problem with getting a duplicate key error? If that error happens you can catch it and continue normally as you would do in the case in which the object already existed.","body":"What&#39;s the problem with getting a duplicate key error? If that error happens you can catch it and continue normally as you would do in the case in which the object already existed."},{"owner":{"account_id":2316968,"reputation":2119,"user_id":2033800,"accept_rate":38,"display_name":"nicholasnet"},"score":0,"creation_date":1672867791,"post_id":75004504,"comment_id":132372720,"body_markdown":"Can&#39;t you use `insert ignore` statement for this.","body":"Can&#39;t you use <code>insert ignore</code> statement for this."},{"owner":{"account_id":9879959,"reputation":421,"user_id":7316385,"accept_rate":50,"display_name":"Can Cinar"},"score":0,"creation_date":1672949816,"post_id":75004504,"comment_id":132394452,"body_markdown":"The problem is that I miss the update coming from the second request. The first request will be saved, and for the second request, an update will be ignored due to the exception. The application tries to create the entity for the second time for the reason I have explained above. I think there is no solution to that...","body":"The problem is that I miss the update coming from the second request. The first request will be saved, and for the second request, an update will be ignored due to the exception. The application tries to create the entity for the second time for the reason I have explained above. I think there is no solution to that..."}],"answers":[{"comments":[{"owner":{"account_id":9879959,"reputation":421,"user_id":7316385,"accept_rate":50,"display_name":"Can Cinar"},"score":0,"creation_date":1674135100,"post_id":75039094,"comment_id":132653019,"body_markdown":"This answer is not relevant to what I have asked, unfortunately. Of course, I have a unique constraint already. It is not about having a constant, it is more about reactive programming.","body":"This answer is not relevant to what I have asked, unfortunately. Of course, I have a unique constraint already. It is not about having a constant, it is more about reactive programming."}],"tags":[],"owner":{"account_id":24934734,"reputation":36,"user_id":18801459,"display_name":"Unbreathable"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673081327,"creation_date":1673081327,"answer_id":75039094,"question_id":75004504,"body_markdown":"You&#39;re gonna have the same problem with pretty much any entity system. Let me explain: Let&#39;s say we have a register endpoint. Two people register at the exact same time using the exact same email address. Then both are gonna be saved to the database since R2DBC does the same flow taking the exact same time for both requests.\r\n\r\nThe simplest solution for this problem is not checking the email at all and just accepting that you&#39;re not gonna deal with it with your own code. Instead you can change the database schema for your table. I don&#39;t know how you create your table but I just use a sql file with the code for it inside. In my case by making the email column `UNIQUE` we can prevent this problem in the database instead of preventing it using our own logic. My schema file for the accounts table looks like this:\r\n\r\n`create table if not exists accounts (id SERIAL NOT NULL, username VARCHAR(32), rank VARCHAR(32), email VARCHAR(32) UNIQUE, password VARCHAR(512), invitor INT, data TEXT, PRIMARY KEY (id));`\r\n\r\nYou can also check out [the w3schools article][1] about the `UNIQUE` constraint.\r\n\r\n\r\n  [1]: https://www.w3schools.com/mysql/mysql_unique.asp","title":"Parallel save giving a duplicate key error in Spring R2DBC","body":"<p>You're gonna have the same problem with pretty much any entity system. Let me explain: Let's say we have a register endpoint. Two people register at the exact same time using the exact same email address. Then both are gonna be saved to the database since R2DBC does the same flow taking the exact same time for both requests.</p>\n<p>The simplest solution for this problem is not checking the email at all and just accepting that you're not gonna deal with it with your own code. Instead you can change the database schema for your table. I don't know how you create your table but I just use a sql file with the code for it inside. In my case by making the email column <code>UNIQUE</code> we can prevent this problem in the database instead of preventing it using our own logic. My schema file for the accounts table looks like this:</p>\n<p><code>create table if not exists accounts (id SERIAL NOT NULL, username VARCHAR(32), rank VARCHAR(32), email VARCHAR(32) UNIQUE, password VARCHAR(512), invitor INT, data TEXT, PRIMARY KEY (id));</code></p>\n<p>You can also check out <a href=\"https://www.w3schools.com/mysql/mysql_unique.asp\" rel=\"nofollow noreferrer\">the w3schools article</a> about the <code>UNIQUE</code> constraint.</p>\n"},{"tags":[],"owner":{"account_id":16040505,"reputation":63,"user_id":11577026,"display_name":"richardstone"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678714869,"creation_date":1678714869,"answer_id":75722680,"question_id":75004504,"body_markdown":"I use a pre-query and hold the result with a hot publisher. You could see there has another way with &quot;brandRepo.existsById&quot; without a pre-query, it is also worked but slower, so I comment it. flatmap is more faster and async but in my business I need concatMap.\r\n\r\n        Mono&lt;List&lt;Brand&gt;&gt; existedBrands = brandRepo.findAll().collectList().cache(); // hot source\r\n        SenderRecord&lt;String, String, String&gt; senderRecord = SenderRecord.create(\r\n                    new ProducerRecord&lt;&gt;(topic, &quot;refresh-brand-finished&quot;, dateStr(YYYY_MM_DD_UD)), dateStr(YYYY_MM_DD_UD));\r\n        return Mono.fromCallable(commonService::parseProduct)\r\n                    .subscribeOn(Schedulers.boundedElastic()) // sync operation\r\n                    .publishOn(Schedulers.parallel())\r\n                    .flatMapMany(Flux::fromIterable)\r\n                    .concatMap(this::fetchBrandsWithWebClient) // we need one by one concat\r\n                    .filter(Brand::isNotEmptyBrand)\r\n                    .concatMap(brand -&gt; this.setBrandNew(brand, existedBrands))\r\n    //                .flatMap(brand -&gt; brandRepo.existsById(brand.getId())\r\n    //                        .map(b -&gt; b ? brand.setBrandNew(false) : brand.setBrandNew(true)))\r\n                    .collectList()\r\n                    .flatMapMany(brandRepo::saveAll)\r\n                    .thenMany(kafkaSender.send(Mono.just(senderRecord)))\r\n                    .then(Mono.just(&quot;success&quot;));","title":"Parallel save giving a duplicate key error in Spring R2DBC","body":"<p>I use a pre-query and hold the result with a hot publisher. You could see there has another way with &quot;brandRepo.existsById&quot; without a pre-query, it is also worked but slower, so I comment it. flatmap is more faster and async but in my business I need concatMap.</p>\n<pre><code>    Mono&lt;List&lt;Brand&gt;&gt; existedBrands = brandRepo.findAll().collectList().cache(); // hot source\n    SenderRecord&lt;String, String, String&gt; senderRecord = SenderRecord.create(\n                new ProducerRecord&lt;&gt;(topic, &quot;refresh-brand-finished&quot;, dateStr(YYYY_MM_DD_UD)), dateStr(YYYY_MM_DD_UD));\n    return Mono.fromCallable(commonService::parseProduct)\n                .subscribeOn(Schedulers.boundedElastic()) // sync operation\n                .publishOn(Schedulers.parallel())\n                .flatMapMany(Flux::fromIterable)\n                .concatMap(this::fetchBrandsWithWebClient) // we need one by one concat\n                .filter(Brand::isNotEmptyBrand)\n                .concatMap(brand -&gt; this.setBrandNew(brand, existedBrands))\n//                .flatMap(brand -&gt; brandRepo.existsById(brand.getId())\n//                        .map(b -&gt; b ? brand.setBrandNew(false) : brand.setBrandNew(true)))\n                .collectList()\n                .flatMapMany(brandRepo::saveAll)\n                .thenMany(kafkaSender.send(Mono.just(senderRecord)))\n                .then(Mono.just(&quot;success&quot;));\n</code></pre>\n"}],"owner":{"account_id":9879959,"reputation":421,"user_id":7316385,"accept_rate":50,"display_name":"Can Cinar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":432,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1687802824,"creation_date":1672830393,"question_id":75004504,"body_markdown":"I am getting a duplicate key error from the database (MySQL) for the scenario I have explained below.\r\n\r\n### Background ###\r\n\r\nI need to save an entity to my database, but the entity id is not managed/generated by my system, so it comes from 3rd party with an id and I need to save it with its id. When our application does not manage its id, Spring Data(R2DBC) cannot know if it is a new entity or not because there will be an id on it all the time. According to their documentation, there are several ways to tell Spring if it is a new entity or not, so I have chosen to implement a Persistable entity so that I can tell Spring if it is a new entity. However, I need to query DB to understand if it exists or not. Please note that I am using Spring reactive so putting a synchronized keyword is not a solution for me...\r\n\r\n### Here is the problem ###\r\nImagine that 2 requests come almost at a time. For the second request, it will query the DB and get nothing since the first request has not been saved yet. It will decide to create the second request, but at that point, the first request is committed to DB, and as a result, the second request will get a duplicate key error since I told Spring that it is a new one.\r\n\r\nI have been thinking of solutions to solve this problem but I couldn&#39;t find any yet... I would really appreciate it if you could help me on this matter.\r\n\r\nThank you in advance!","title":"Parallel save giving a duplicate key error in Spring R2DBC","body":"<p>I am getting a duplicate key error from the database (MySQL) for the scenario I have explained below.</p>\n<h3>Background</h3>\n<p>I need to save an entity to my database, but the entity id is not managed/generated by my system, so it comes from 3rd party with an id and I need to save it with its id. When our application does not manage its id, Spring Data(R2DBC) cannot know if it is a new entity or not because there will be an id on it all the time. According to their documentation, there are several ways to tell Spring if it is a new entity or not, so I have chosen to implement a Persistable entity so that I can tell Spring if it is a new entity. However, I need to query DB to understand if it exists or not. Please note that I am using Spring reactive so putting a synchronized keyword is not a solution for me...</p>\n<h3>Here is the problem</h3>\n<p>Imagine that 2 requests come almost at a time. For the second request, it will query the DB and get nothing since the first request has not been saved yet. It will decide to create the second request, but at that point, the first request is committed to DB, and as a result, the second request will get a duplicate key error since I told Spring that it is a new one.</p>\n<p>I have been thinking of solutions to solve this problem but I couldn't find any yet... I would really appreciate it if you could help me on this matter.</p>\n<p>Thank you in advance!</p>\n"},{"tags":["java","json","jackson","jackson-databind"],"answers":[{"comments":[{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":1,"creation_date":1687810437,"post_id":76559162,"comment_id":134986047,"body_markdown":"Ah, that&#39;s it! It&#39;s coming back to me now—I had forgotten I needed to put that in a module. Thanks for taking the time to post this.","body":"Ah, that&#39;s it! It&#39;s coming back to me now—I had forgotten I needed to put that in a module. Thanks for taking the time to post this."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":1,"creation_date":1687813986,"post_id":76559162,"comment_id":134986567,"body_markdown":"I added follow-up question https://stackoverflow.com/q/76560273 .","body":"I added follow-up question <a href=\"https://stackoverflow.com/q/76560273\">stackoverflow.com/q/76560273</a> ."}],"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1687802346,"creation_date":1687802346,"answer_id":76559162,"question_id":76559047,"body_markdown":"Just use `com.fasterxml.jackson.databind.ser.std.ToStringSerializer` as a custom deserializer for the `FooBar` class:\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    \r\n    SimpleModule module = new SimpleModule();\r\n    module.addSerializer(FooBar.class, new ToStringSerializer());\r\n    mapper.registerModule(module);","title":"Set Jackson JSON serialization for specific type to use toString() using ObjectMapper","body":"<p>Just use <code>com.fasterxml.jackson.databind.ser.std.ToStringSerializer</code> as a custom deserializer for the <code>FooBar</code> class:</p>\n<pre><code>ObjectMapper mapper = new ObjectMapper();\n\nSimpleModule module = new SimpleModule();\nmodule.addSerializer(FooBar.class, new ToStringSerializer());\nmapper.registerModule(module);\n</code></pre>\n"}],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76559162,"answer_count":1,"score":1,"last_activity_date":1687802346,"creation_date":1687801212,"question_id":76559047,"body_markdown":"Using Java 17 I have a `FooBar` type I want serialized to JSON using its `toString()` method. I&#39;m serializing using a Jackson `ObjectMapper` (created via a `JsonMapper.Builder`).\r\n\r\nI read that I can use the `@JsonValue` annotation on the `FooBar` class `FooBar.toString()` method. But is there a way to configure the `ObjectMapper` instead, without creating some special factory class specifically for `FooBar`? (I did this years ago but I don&#39;t remember if I created a separate factory implementation or what.)\r\n\r\nI was expecting (hoping for) something like this:\r\n\r\n```java\r\nobjectMapperBuilder.serializerFor(FooBar.class, ToStringSerializer.instance());\r\n```","title":"Set Jackson JSON serialization for specific type to use toString() using ObjectMapper","body":"<p>Using Java 17 I have a <code>FooBar</code> type I want serialized to JSON using its <code>toString()</code> method. I'm serializing using a Jackson <code>ObjectMapper</code> (created via a <code>JsonMapper.Builder</code>).</p>\n<p>I read that I can use the <code>@JsonValue</code> annotation on the <code>FooBar</code> class <code>FooBar.toString()</code> method. But is there a way to configure the <code>ObjectMapper</code> instead, without creating some special factory class specifically for <code>FooBar</code>? (I did this years ago but I don't remember if I created a separate factory implementation or what.)</p>\n<p>I was expecting (hoping for) something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>objectMapperBuilder.serializerFor(FooBar.class, ToStringSerializer.instance());\n</code></pre>\n"},{"tags":["java","selenium-webdriver","google-chrome-devtools"],"answers":[{"tags":[],"owner":{"account_id":490432,"reputation":493,"user_id":3468218,"accept_rate":90,"display_name":"Zoran"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687802020,"creation_date":1687802020,"answer_id":76559121,"question_id":76559074,"body_markdown":"Found incorrect if clause query. \r\nHere is correct one:\r\n\r\n    if (localStorrageValue != &quot;en&quot;) {\r\n            JavascriptExecutor js1 = (JavascriptExecutor) driver;\r\n            js1.executeScript(&quot;window.localStorage.setItem(&quot;nextLang&quot;, &quot;en&quot;)&quot;);\r\n            driver.navigate().refresh();\r\n        }","title":"Chrome DevTools - Application tab - change key in Local Storage","body":"<p>Found incorrect if clause query.\nHere is correct one:</p>\n<pre><code>if (localStorrageValue != &quot;en&quot;) {\n        JavascriptExecutor js1 = (JavascriptExecutor) driver;\n        js1.executeScript(&quot;window.localStorage.setItem(&quot;nextLang&quot;, &quot;en&quot;)&quot;);\n        driver.navigate().refresh();\n    }\n</code></pre>\n"}],"owner":{"account_id":490432,"reputation":493,"user_id":3468218,"accept_rate":90,"display_name":"Zoran"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76559121,"answer_count":1,"score":0,"last_activity_date":1687802020,"creation_date":1687801529,"question_id":76559074,"body_markdown":"Can someone assist in following case:\r\n\r\nI want to change language value from **&quot;Application&quot;** tab in **DevTools**, but got stack.\r\n\r\nWhat I archived so far is, that can get value from chosen key (in **Local Storage**) - **nextLang** key\r\n\r\n\r\n```\r\nJavascriptExecutor js = (JavascriptExecutor) driver;\r\nString localStorrageValue = (String) js.executeScript(&quot;return window.localStorage.getItem(&#39;nextLang&#39;)&quot;);\r\nSystem.out.println(localStorrageValue);\r\n        if (localStorrageValue == &quot;it&quot;) {\r\n            JavascriptExecutor js1 = (JavascriptExecutor) driver;\r\n            js1.executeScript(&quot;window.localStorage.setItem(arguments[0], argumets[i]):&quot;, &quot;nextLang&quot;, &quot;en&quot;);\r\n            driver.navigate().refresh();\r\n        }\r\n```\r\nUnfortunately, does not change language, as I expected (if clause)\r\nWhat am I doing wrong?\r\n\r\nThank you in advance\r\n\r\nExpecting to change language key","title":"Chrome DevTools - Application tab - change key in Local Storage","body":"<p>Can someone assist in following case:</p>\n<p>I want to change language value from <strong>&quot;Application&quot;</strong> tab in <strong>DevTools</strong>, but got stack.</p>\n<p>What I archived so far is, that can get value from chosen key (in <strong>Local Storage</strong>) - <strong>nextLang</strong> key</p>\n<pre><code>JavascriptExecutor js = (JavascriptExecutor) driver;\nString localStorrageValue = (String) js.executeScript(&quot;return window.localStorage.getItem('nextLang')&quot;);\nSystem.out.println(localStorrageValue);\n        if (localStorrageValue == &quot;it&quot;) {\n            JavascriptExecutor js1 = (JavascriptExecutor) driver;\n            js1.executeScript(&quot;window.localStorage.setItem(arguments[0], argumets[i]):&quot;, &quot;nextLang&quot;, &quot;en&quot;);\n            driver.navigate().refresh();\n        }\n</code></pre>\n<p>Unfortunately, does not change language, as I expected (if clause)\nWhat am I doing wrong?</p>\n<p>Thank you in advance</p>\n<p>Expecting to change language key</p>\n"},{"tags":["java","php","mysql","flutter","kotlin"],"owner":{"account_id":23879344,"reputation":1,"user_id":17880227,"display_name":"Mr. President"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":247,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687802010,"creation_date":1687790544,"question_id":76557741,"body_markdown":"can anyone please help me, i want to retrieve current user data with shared preferences in flutter application, after login in successfully i have stored my session id in shared preferences, \r\n\r\n\r\nthen i want to retrieve current user data from api , the api scripts is written in php script, \r\n\r\ni cannot figure it out that what is happening, but data is not retrieving , only showing the session id as i mentioned it in text format, so please help me with it\r\n\r\n\r\n\r\nwith this code i stored session id \r\n```\r\nif (success) {\r\n        // Login successful\r\n        // Save idNo to session\r\n        SharedPreferences prefs = await SharedPreferences.getInstance();\r\n        await prefs.setString(&#39;idNo&#39;, idNo);\r\n\r\n        // Navigate to the next screen or perform desired actions\r\n        Navigator.pushReplacement(\r\n          context,\r\n          MaterialPageRoute(builder: (context) =&gt; WelcomeScreen()),\r\n        );\r\n      }\r\n```\r\n\r\n\r\n\r\n```\r\n\r\ni am using this in api\r\n\r\n\r\n&lt;?php\r\n// Establish database connection\r\n$servername = &quot;localhost&quot;;\r\n$username = &quot;test_user&quot;;\r\n$password = &quot;test123456&quot;;\r\n$dbname = &quot;test_user&quot;;\r\n\r\n$conn = new mysqli($servername, $username, $password, $dbname);\r\n\r\nif ($conn-&gt;connect_error) {\r\n    die(&quot;Connection failed: &quot; . $conn-&gt;connect_error);\r\n}\r\n\r\n// Get input from the Flutter app\r\n$idNo = $_POST[&#39;session_id&#39;]; // Update the key to match the Flutter code\r\n\r\n// Prepare and execute the SQL query\r\n$stmt = $conn-&gt;prepare(&quot;SELECT * FROM retailer_details WHERE retailer_id = ?&quot;);\r\n$stmt-&gt;bind_param(&quot;s&quot;, $idNo);\r\n$stmt-&gt;execute();\r\n\r\n$result = $stmt-&gt;get_result();\r\n\r\nif ($result-&gt;num_rows &gt; 0) {\r\n    // User data found\r\n    $userData = $result-&gt;fetch_assoc();\r\n\r\n    // Send response back to the Flutter app\r\n    $response = array(&quot;success&quot; =&gt; true, &quot;message&quot; =&gt; &quot;User data retrieved&quot;, &quot;data&quot; =&gt; $userData);\r\n} else {\r\n    // User data not found\r\n    $response = array(&quot;success&quot; =&gt; false, &quot;message&quot; =&gt; &quot;User data not found&quot;);\r\n}\r\n\r\n// Send response back to the Flutter app\r\necho json_encode($response);\r\n\r\n// Close database connection\r\n$stmt-&gt;close();\r\n$conn-&gt;close();\r\n?&gt;\r\n\r\n```\r\n\r\n\r\nand the profile.dart code is \r\n\r\n\r\n```\r\nimport &#39;package:flutter/material.dart&#39;;\r\nimport &#39;package:shared_preferences/shared_preferences.dart&#39;;\r\nimport &#39;package:http/http.dart&#39; as http;\r\nimport &#39;dart:convert&#39;;\r\n\r\nclass ProfileScreen extends StatefulWidget {\r\n  @override\r\n  _ProfileScreenState createState() =&gt; _ProfileScreenState();\r\n}\r\n\r\nclass _ProfileScreenState extends State&lt;ProfileScreen&gt; {\r\n  String sessionId = &#39;&#39;;\r\n  Map&lt;String, dynamic&gt;? userData;\r\n\r\n  @override\r\n  void initState() {\r\n    super.initState();\r\n    fetchSessionId().then((_) {\r\n      fetchUserData();\r\n    });\r\n  }\r\n\r\n  Future&lt;void&gt; fetchSessionId() async {\r\n    SharedPreferences prefs = await SharedPreferences.getInstance();\r\n    String? idNo = prefs.getString(&#39;idNo&#39;);\r\n    if (idNo != null) {\r\n      setState(() {\r\n        sessionId = idNo;\r\n      });\r\n    }\r\n  }\r\n\r\n  Future&lt;void&gt; fetchUserData() async {\r\n    try {\r\n      if (sessionId.isEmpty) {\r\n        throw Exception(&#39;Session ID not available&#39;);\r\n      }\r\n      Map&lt;String, dynamic&gt; data = await getUserData(sessionId);\r\n      setState(() {\r\n        userData = data;\r\n      });\r\n    } catch (e) {\r\n      print(&#39;Failed to fetch user data: $e&#39;);\r\n      showDialog(\r\n        context: context,\r\n        builder: (BuildContext context) {\r\n          return AlertDialog(\r\n            title: Text(&#39;Error&#39;),\r\n            content: Text(&#39;Failed to fetch user data: $e&#39;),\r\n            actions: [\r\n              TextButton(\r\n                child: Text(&#39;OK&#39;),\r\n                onPressed: () {\r\n                  Navigator.of(context).pop();\r\n                },\r\n              ),\r\n            ],\r\n          );\r\n        },\r\n      );\r\n    }\r\n  }\r\n\r\n  static Future&lt;Map&lt;String, dynamic&gt;&gt; getUserData(String sessionId) async {\r\n    var url = Uri.parse(&#39;https://hidden_domain.com/api/user_data.php&#39;);\r\n    var response = await http.post(\r\n      url,\r\n      body: {\r\n        &#39;session_id&#39;: sessionId,\r\n      },\r\n    );\r\n\r\n    if (response.statusCode == 200) {\r\n      var data = jsonDecode(response.body);\r\n      if (data[&#39;success&#39;]) {\r\n        return data[&#39;data&#39;][0] as Map&lt;String, dynamic&gt;;\r\n      } else {\r\n        throw Exception(data[&#39;message&#39;]);\r\n      }\r\n    } else {\r\n      throw Exception(&#39;Failed to fetch user data&#39;);\r\n    }\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        title: Text(&#39;Profile&#39;),\r\n      ),\r\n      body: Padding(\r\n        padding: EdgeInsets.all(16.0),\r\n        child: Column(\r\n          crossAxisAlignment: CrossAxisAlignment.start,\r\n          children: [\r\n            Text(&#39;Session ID: $sessionId&#39;),\r\n            SizedBox(height: 16.0),\r\n            if (userData != null) ...[\r\n              Text(&#39;Name: ${userData![&#39;retailer_id&#39;]}&#39;),\r\n              Text(&#39;Email: ${userData![&#39;retailer_name&#39;]}&#39;),\r\n              // Display other user data fields as needed\r\n            ] else ...[\r\n              Text(&#39;Fetching user data...&#39;),\r\n            ],\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n","title":"Trying to retrieve current user data in profile in flutter application, but fetching problem","body":"<p>can anyone please help me, i want to retrieve current user data with shared preferences in flutter application, after login in successfully i have stored my session id in shared preferences,</p>\n<p>then i want to retrieve current user data from api , the api scripts is written in php script,</p>\n<p>i cannot figure it out that what is happening, but data is not retrieving , only showing the session id as i mentioned it in text format, so please help me with it</p>\n<p>with this code i stored session id</p>\n<pre><code>if (success) {\n        // Login successful\n        // Save idNo to session\n        SharedPreferences prefs = await SharedPreferences.getInstance();\n        await prefs.setString('idNo', idNo);\n\n        // Navigate to the next screen or perform desired actions\n        Navigator.pushReplacement(\n          context,\n          MaterialPageRoute(builder: (context) =&gt; WelcomeScreen()),\n        );\n      }\n</code></pre>\n<pre><code>\ni am using this in api\n\n\n&lt;?php\n// Establish database connection\n$servername = &quot;localhost&quot;;\n$username = &quot;test_user&quot;;\n$password = &quot;test123456&quot;;\n$dbname = &quot;test_user&quot;;\n\n$conn = new mysqli($servername, $username, $password, $dbname);\n\nif ($conn-&gt;connect_error) {\n    die(&quot;Connection failed: &quot; . $conn-&gt;connect_error);\n}\n\n// Get input from the Flutter app\n$idNo = $_POST['session_id']; // Update the key to match the Flutter code\n\n// Prepare and execute the SQL query\n$stmt = $conn-&gt;prepare(&quot;SELECT * FROM retailer_details WHERE retailer_id = ?&quot;);\n$stmt-&gt;bind_param(&quot;s&quot;, $idNo);\n$stmt-&gt;execute();\n\n$result = $stmt-&gt;get_result();\n\nif ($result-&gt;num_rows &gt; 0) {\n    // User data found\n    $userData = $result-&gt;fetch_assoc();\n\n    // Send response back to the Flutter app\n    $response = array(&quot;success&quot; =&gt; true, &quot;message&quot; =&gt; &quot;User data retrieved&quot;, &quot;data&quot; =&gt; $userData);\n} else {\n    // User data not found\n    $response = array(&quot;success&quot; =&gt; false, &quot;message&quot; =&gt; &quot;User data not found&quot;);\n}\n\n// Send response back to the Flutter app\necho json_encode($response);\n\n// Close database connection\n$stmt-&gt;close();\n$conn-&gt;close();\n?&gt;\n\n</code></pre>\n<p>and the profile.dart code is</p>\n<pre><code>import 'package:flutter/material.dart';\nimport 'package:shared_preferences/shared_preferences.dart';\nimport 'package:http/http.dart' as http;\nimport 'dart:convert';\n\nclass ProfileScreen extends StatefulWidget {\n  @override\n  _ProfileScreenState createState() =&gt; _ProfileScreenState();\n}\n\nclass _ProfileScreenState extends State&lt;ProfileScreen&gt; {\n  String sessionId = '';\n  Map&lt;String, dynamic&gt;? userData;\n\n  @override\n  void initState() {\n    super.initState();\n    fetchSessionId().then((_) {\n      fetchUserData();\n    });\n  }\n\n  Future&lt;void&gt; fetchSessionId() async {\n    SharedPreferences prefs = await SharedPreferences.getInstance();\n    String? idNo = prefs.getString('idNo');\n    if (idNo != null) {\n      setState(() {\n        sessionId = idNo;\n      });\n    }\n  }\n\n  Future&lt;void&gt; fetchUserData() async {\n    try {\n      if (sessionId.isEmpty) {\n        throw Exception('Session ID not available');\n      }\n      Map&lt;String, dynamic&gt; data = await getUserData(sessionId);\n      setState(() {\n        userData = data;\n      });\n    } catch (e) {\n      print('Failed to fetch user data: $e');\n      showDialog(\n        context: context,\n        builder: (BuildContext context) {\n          return AlertDialog(\n            title: Text('Error'),\n            content: Text('Failed to fetch user data: $e'),\n            actions: [\n              TextButton(\n                child: Text('OK'),\n                onPressed: () {\n                  Navigator.of(context).pop();\n                },\n              ),\n            ],\n          );\n        },\n      );\n    }\n  }\n\n  static Future&lt;Map&lt;String, dynamic&gt;&gt; getUserData(String sessionId) async {\n    var url = Uri.parse('https://hidden_domain.com/api/user_data.php');\n    var response = await http.post(\n      url,\n      body: {\n        'session_id': sessionId,\n      },\n    );\n\n    if (response.statusCode == 200) {\n      var data = jsonDecode(response.body);\n      if (data['success']) {\n        return data['data'][0] as Map&lt;String, dynamic&gt;;\n      } else {\n        throw Exception(data['message']);\n      }\n    } else {\n      throw Exception('Failed to fetch user data');\n    }\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Profile'),\n      ),\n      body: Padding(\n        padding: EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.start,\n          children: [\n            Text('Session ID: $sessionId'),\n            SizedBox(height: 16.0),\n            if (userData != null) ...[\n              Text('Name: ${userData!['retailer_id']}'),\n              Text('Email: ${userData!['retailer_name']}'),\n              // Display other user data fields as needed\n            ] else ...[\n              Text('Fetching user data...'),\n            ],\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n</code></pre>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"score":0,"creation_date":1687800116,"post_id":76558665,"comment_id":134984336,"body_markdown":"It seems that your `value` is already a ValueNode that contains `10`, `&quot;Random namd&quot;` and `false`.","body":"It seems that your <code>value</code> is already a ValueNode that contains <code>10</code>, <code>&quot;Random namd&quot;</code> and <code>false</code>."},{"owner":{"account_id":22959374,"reputation":21,"user_id":17089505,"display_name":"Raccoon21"},"score":0,"creation_date":1687800824,"post_id":76558665,"comment_id":134984517,"body_markdown":"Yes, but I do not understand how to be in this case...\n\nNo single argument put method for\n`((ObjectNode) myObject.getValue).put(&quot;new name&quot;)`","body":"Yes, but I do not understand how to be in this case...  No single argument put method for <code>((ObjectNode) myObject.getValue).put(&quot;new name&quot;)</code>"}],"answers":[{"comments":[{"owner":{"account_id":22959374,"reputation":21,"user_id":17089505,"display_name":"Raccoon21"},"score":0,"creation_date":1687804555,"post_id":76559075,"comment_id":134985160,"body_markdown":"Thanks! It works! \nBut I don&#39;t understand how, because JsonNode is immutable, but  &#39;myObject.value = &#39; - value change action.","body":"Thanks! It works!  But I don&#39;t understand how, because JsonNode is immutable, but  &#39;myObject.value = &#39; - value change action."},{"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"score":0,"creation_date":1687828208,"post_id":76559075,"comment_id":134987985,"body_markdown":"The deserialization process has already extracted `Random name` from `{&quot;value&quot;: &quot;Random name&quot;}` and stored `Random name` in `MyObject.value`.  You might wrongly think that `MyObject.value` is storing `{&quot;value&quot;: &quot;Random name&quot;}`.","body":"The deserialization process has already extracted <code>Random name</code> from <code>{&quot;value&quot;: &quot;Random name&quot;}</code> and stored <code>Random name</code> in <code>MyObject.value</code>.  You might wrongly think that <code>MyObject.value</code> is storing <code>{&quot;value&quot;: &quot;Random name&quot;}</code>."},{"owner":{"account_id":22959374,"reputation":21,"user_id":17089505,"display_name":"Raccoon21"},"score":0,"creation_date":1687849412,"post_id":76559075,"comment_id":134990216,"body_markdown":"MyObject.value does not store {&quot;value&quot;: &quot;Random name&quot;}?","body":"MyObject.value does not store {&quot;value&quot;: &quot;Random name&quot;}?"},{"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"score":0,"creation_date":1687855558,"post_id":76559075,"comment_id":134991450,"body_markdown":"To verify, you can examine the output of `myObject.value.toString()`.","body":"To verify, you can examine the output of <code>myObject.value.toString()</code>."},{"owner":{"account_id":22959374,"reputation":21,"user_id":17089505,"display_name":"Raccoon21"},"score":0,"creation_date":1687860907,"post_id":76559075,"comment_id":134992595,"body_markdown":"code:\n`if (myObject.getFieldId.equals(&quot;Random name&quot;)) {\n  log.info(&quot;value before: {}&quot;, myObject.getValue().toString());\n  myObject.setValue(TextNode.valueOf(&quot;new name&quot;));\n  log.info(&quot;value after: {}&quot;, myObject.getValue().toString());\n}`\noutput:\n`Random name`\n`new_name`","body":"code: <code>if (myObject.getFieldId.equals(&quot;Random name&quot;)) {   log.info(&quot;value before: {}&quot;, myObject.getValue().toString());   myObject.setValue(TextNode.valueOf(&quot;new name&quot;));   log.info(&quot;value after: {}&quot;, myObject.getValue().toString()); }</code> output: <code>Random name</code> <code>new_name</code>"}],"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687801549,"creation_date":1687801549,"answer_id":76559075,"question_id":76558665,"body_markdown":"    for (MyObject myObject: array) {\r\n        if (myObject.getFieldId.equals(&quot;name&quot;)) {\r\n            myObject.value = TextNode.valueOf(&quot;new name&quot;);\r\n        }\r\n    }\r\n","title":"How set value in JsonNode (Convert to ObjectNode)?","body":"<pre><code>for (MyObject myObject: array) {\n    if (myObject.getFieldId.equals(&quot;name&quot;)) {\n        myObject.value = TextNode.valueOf(&quot;new name&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":22959374,"reputation":21,"user_id":17089505,"display_name":"Raccoon21"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687801549,"creation_date":1687797619,"question_id":76558665,"body_markdown":"Sorry, this is a dumb question, but I really can&#39;t figure out why I&#39;m getting an error\r\n\r\nMy imports: \r\n\r\n    import com.fasterxml.jackson.databind.JsonNode;\r\n    import com.fasterxml.jackson.databind.node.ObjectNode;\r\n\r\nI have: \r\n\r\n    Class MyObject {\r\n      private String fieldId;\r\n      private JsonNode value;\r\n    }\r\n\r\nAnd:\r\n\r\n    List&lt;MyObject&gt;;\r\n\r\nJson with List of MyObject-s:\r\n\r\n    &quot;array&quot;: [\r\n                    {\r\n                        &quot;fieldId&quot;: &quot;id&quot;,\r\n                        &quot;value&quot;: 10\r\n                    },\r\n                    {\r\n                        &quot;fieldId&quot;: &quot;name&quot;,\r\n                        &quot;value&quot;: &quot;Random name&quot;\r\n                    },\r\n                    {\r\n                        &quot;fieldId&quot;: &quot;can anything&quot;,\r\n                        &quot;value&quot;: false\r\n                    }...\r\n    \r\ni need to rewrite some values:\r\n\r\n    for(MyObject myObject: array){\r\n              if(myObject.getFieldId.equals(&quot;name&quot;))\r\n              ((ObjectNode) myObject.getValue).put(&quot;value&quot;, &quot;new name&quot;);\r\n    }\r\n\r\nbut, I get:\r\n\r\n    java.lang.ClassCastException: class com.fasterxml.jackson.databind.node.TextNode cannot be cast to class com.fasterxml.jackson.databind.node.ObjectNode (com.fasterxml.jackson.databind.node.TextNode and com.fasterxml.jackson.databind.node.ObjectNode are in unnamed module of loader &#39;app&#39;)\r\n\r\nPlease tell me where I&#39;m wrong.","title":"How set value in JsonNode (Convert to ObjectNode)?","body":"<p>Sorry, this is a dumb question, but I really can't figure out why I'm getting an error</p>\n<p>My imports:</p>\n<pre><code>import com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.node.ObjectNode;\n</code></pre>\n<p>I have:</p>\n<pre><code>Class MyObject {\n  private String fieldId;\n  private JsonNode value;\n}\n</code></pre>\n<p>And:</p>\n<pre><code>List&lt;MyObject&gt;;\n</code></pre>\n<p>Json with List of MyObject-s:</p>\n<pre><code>&quot;array&quot;: [\n                {\n                    &quot;fieldId&quot;: &quot;id&quot;,\n                    &quot;value&quot;: 10\n                },\n                {\n                    &quot;fieldId&quot;: &quot;name&quot;,\n                    &quot;value&quot;: &quot;Random name&quot;\n                },\n                {\n                    &quot;fieldId&quot;: &quot;can anything&quot;,\n                    &quot;value&quot;: false\n                }...\n</code></pre>\n<p>i need to rewrite some values:</p>\n<pre><code>for(MyObject myObject: array){\n          if(myObject.getFieldId.equals(&quot;name&quot;))\n          ((ObjectNode) myObject.getValue).put(&quot;value&quot;, &quot;new name&quot;);\n}\n</code></pre>\n<p>but, I get:</p>\n<pre><code>java.lang.ClassCastException: class com.fasterxml.jackson.databind.node.TextNode cannot be cast to class com.fasterxml.jackson.databind.node.ObjectNode (com.fasterxml.jackson.databind.node.TextNode and com.fasterxml.jackson.databind.node.ObjectNode are in unnamed module of loader 'app')\n</code></pre>\n<p>Please tell me where I'm wrong.</p>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver","browser-automation"],"answers":[{"tags":[],"owner":{"account_id":26472150,"reputation":76,"user_id":20112601,"display_name":"AbdeLhalimSB"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686843296,"creation_date":1686843296,"answer_id":76483300,"question_id":76471550,"body_markdown":"**I had this problem after too many tests, i just passed it with that way :**\r\n\r\n    import selenium.webdriver\r\n    import time\r\n    from selenium.webdriver.common.desired_capabilities import DesiredCapabilities\r\n    from selenium.webdriver.chrome.options import Options\r\n    from selenium.webdriver.common.action_chains import ActionChains\r\n    from selenium.webdriver.common.keys import Keys\r\n    import random\r\n    from selenium.webdriver.common.by import By\r\n    from selenium.webdriver.support.ui import WebDriverWait\r\n    from selenium.webdriver.support import expected_conditions as EC\r\n    from selenium_stealth import stealth\r\n\r\n    def get_random_language():\r\n        languages = [&quot;en-US&quot;, &quot;en&quot;, &quot;fr&quot;, &quot;es&quot;, &quot;de&quot;, &quot;ja&quot;]  # Add more languages as needed\r\n        return random.choice(languages)\r\n\r\n    def get_random_vendor():\r\n        vendors = [\r\n            &quot;Google Inc.&quot;,\r\n            &quot;Mozilla Foundation&quot;,\r\n            &quot;Microsoft Corporation&quot;,\r\n            &quot;Apple Inc.&quot;,\r\n            &quot;Samsung Electronics&quot;,\r\n            &quot;IBM Corporation&quot;,\r\n            &quot;Facebook, Inc.&quot;,\r\n            &quot;Amazon.com, Inc.&quot;,\r\n            &quot;Twitter, Inc.&quot;,\r\n            &quot;Intel Corporation&quot;,\r\n            &quot;Oracle Corporation&quot;,\r\n            &quot;Adobe Systems Incorporated&quot;,\r\n            &quot;Netflix, Inc.&quot;,\r\n            &quot;PayPal Holdings, Inc.&quot;,\r\n            &quot;Salesforce.com, Inc.&quot;,\r\n            &quot;Uber Technologies, Inc.&quot;\r\n        ]\r\n        return random.choice(vendors)\r\n\r\n    def get_random_platform():\r\n        platforms = [\r\n            &quot;Win32&quot;,\r\n            &quot;Linux x86_64&quot;,\r\n            &quot;Macintosh&quot;,\r\n            &quot;Android&quot;,\r\n            &quot;iOS&quot;,\r\n            &quot;Windows NT&quot;,\r\n            &quot;Ubuntu&quot;,\r\n            &quot;Fedora&quot;,\r\n            &quot;Chrome OS&quot;,\r\n            &quot;Raspbian&quot;,\r\n            &quot;FreeBSD&quot;,\r\n            &quot;OpenBSD&quot;,\r\n            &quot;Solaris&quot;,\r\n            &quot;PlayStation&quot;,\r\n            &quot;Xbox&quot;\r\n        ]\r\n        return random.choice(platforms)\r\n\r\n    def get_random_webgl_vendor():\r\n        webgl_vendors = [\r\n            &quot;Intel Inc.&quot;,\r\n            &quot;NVIDIA Corporation&quot;,\r\n            &quot;AMD&quot;,\r\n            &quot;ARM&quot;,\r\n            &quot;Qualcomm&quot;,\r\n            &quot;Apple Inc.&quot;,\r\n            &quot;Broadcom&quot;,\r\n            &quot;Imagination Technologies&quot;,\r\n            &quot;Vivante Corporation&quot;,\r\n            &quot;Mali Technologies&quot;\r\n        ]\r\n        return random.choice(webgl_vendors)\r\n\r\n    def get_random_renderer():\r\n        renderers = [\r\n            &quot;Intel Iris OpenGL Engine&quot;,\r\n            &quot;NVIDIA GeForce GTX&quot;,\r\n            &quot;AMD Radeon&quot;,\r\n            &quot;ARM Mali&quot;,\r\n            &quot;Qualcomm Adreno&quot;,\r\n            &quot;Apple A12 Bionic&quot;,\r\n            &quot;Broadcom VideoCore&quot;,\r\n            &quot;Imagination PowerVR&quot;,\r\n            &quot;Vivante GC Series&quot;,\r\n            &quot;Mali-G77&quot;,\r\n            &quot;Intel UHD Graphics&quot;,\r\n            &quot;AMD Radeon Pro&quot;,\r\n            &quot;NVIDIA Quadro&quot;\r\n        ]\r\n        return random.choice(renderers)\r\n\r\n    def get_random_timezone():\r\n        timezones = [&#39;US/Pacific&#39;, &#39;US/Mountain&#39;, &#39;US/Central&#39;, &#39;US/Eastern&#39;, &#39;Canada/Pacific&#39;, &#39;Canada/Mountain&#39;, &#39;Canada/Central&#39;, &#39;Canada/Eastern&#39;]\r\n        random_timezone = random.choice(timezones)\r\n        return random_timezone\r\n\r\n    def get_random_window_size():\r\n        width = random.randint(1024, 1920)\r\n        height = random.randint(768, 1080)\r\n        return f&quot;{width}x{height}&quot;\r\n\r\n\r\n    chrome_options = selenium.webdriver.ChromeOptions()\r\n    chrome_options.add_argument(&#39;start-maximized&#39;)\r\n    chrome_options.add_argument(&quot;--disable-plugins&quot;)\r\n    chrome_options.add_argument(&quot;--disable-extensions-file-access-check&quot;)\r\n    chrome_options.add_argument(&#39;--disable-popup-blocking&#39;)\r\n    chrome_options.add_argument(&#39;--disable-blink-features=AutomationControlled&#39;)\r\n    chrome_options.add_experimental_option(&quot;excludeSwitches&quot;, [&quot;enable-automation&quot;])\r\n    prefs = {&#39;profile.managed_default_content_settings.images&#39;: 2, &#39;profile.managed_default_content_settings.video&#39;: 2}\r\n    chrome_options.add_experimental_option(&#39;prefs&#39;, prefs)\r\n    chrome_options.add_experimental_option(&#39;useAutomationExtension&#39;, False)\r\n    chrome_options.add_experimental_option(&quot;prefs&quot;, {&quot;javascript.enabled&quot;: True})\r\n    chrome_options.add_argument(&#39;--window-size=&#39; + get_random_window_size())\r\n    chrome_options.add_argument(&#39;--force-timezone=&#39; + get_random_timezone())\r\n    driver = selenium.webdriver.Chrome(chrome_options=chrome_options)\r\n    stealth(driver,\r\n        languages=[get_random_language()],\r\n        vendor=get_random_vendor(),\r\n        platform=get_random_platform(),\r\n        webgl_vendor=get_random_webgl_vendor(),\r\n        renderer=get_random_renderer()\r\n    )\r\n\r\n    wait = WebDriverWait(driver, 20)\r\n    driver.get(&#39;https://github.com/&#39;) # better to do here random website function\r\n    driver.implicitly_wait(time_to_wait=10)\r\n    time.sleep(1)\r\n    driver.execute_script(&#39;&#39;&#39;window.open(&quot;https://www.google.com/intl/en/gmail/about/&quot;,&quot;_blank&quot;);&#39;&#39;&#39;)\r\n    driver.switch_to.window(driver.window_handles[0])\r\n    driver.close()\r\n    driver.implicitly_wait(time_to_wait=10)\r\n    driver.switch_to.window(driver.window_handles[0])\r\n    driver.implicitly_wait(time_to_wait=10)\r\n    time.sleep(1)\r\n    driver.find_element(&#39;xpath&#39;,&#39;//* [@data-action=\\&#39;sign in\\&#39;]&#39;).click()\r\n    driver.implicitly_wait(time_to_wait=10)\r\n    driver.find_element(&#39;id&#39;,&#39;identifierId&#39;).send_keys(&#39;email&#39;)\r\n    driver.find_element(&#39;id&#39;,&#39;identifierNext&#39;).click()\r\n    driver.implicitly_wait(time_to_wait=10)\r\n\r\n    wait = WebDriverWait(driver, 10)  # Maximum wait time of 10 seconds\r\n    element = wait.until(EC.presence_of_element_located((By.NAME, &quot;Passwd&quot;)))\r\n    time.sleep(2)\r\n\r\n    driver.find_element(&#39;name&#39;,&#39;Passwd&#39;).send_keys(&#39;password&#39;)\r\n    driver.find_element(&#39;id&#39;,&#39;passwordNext&#39;).click()\r\n    driver.implicitly_wait(time_to_wait=10)\r\n    # Your code here","title":"cannot log in to google with selenium webdrive","body":"<p><strong>I had this problem after too many tests, i just passed it with that way :</strong></p>\n<pre><code>import selenium.webdriver\nimport time\nfrom selenium.webdriver.common.desired_capabilities import DesiredCapabilities\nfrom selenium.webdriver.chrome.options import Options\nfrom selenium.webdriver.common.action_chains import ActionChains\nfrom selenium.webdriver.common.keys import Keys\nimport random\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium_stealth import stealth\n\ndef get_random_language():\n    languages = [&quot;en-US&quot;, &quot;en&quot;, &quot;fr&quot;, &quot;es&quot;, &quot;de&quot;, &quot;ja&quot;]  # Add more languages as needed\n    return random.choice(languages)\n\ndef get_random_vendor():\n    vendors = [\n        &quot;Google Inc.&quot;,\n        &quot;Mozilla Foundation&quot;,\n        &quot;Microsoft Corporation&quot;,\n        &quot;Apple Inc.&quot;,\n        &quot;Samsung Electronics&quot;,\n        &quot;IBM Corporation&quot;,\n        &quot;Facebook, Inc.&quot;,\n        &quot;Amazon.com, Inc.&quot;,\n        &quot;Twitter, Inc.&quot;,\n        &quot;Intel Corporation&quot;,\n        &quot;Oracle Corporation&quot;,\n        &quot;Adobe Systems Incorporated&quot;,\n        &quot;Netflix, Inc.&quot;,\n        &quot;PayPal Holdings, Inc.&quot;,\n        &quot;Salesforce.com, Inc.&quot;,\n        &quot;Uber Technologies, Inc.&quot;\n    ]\n    return random.choice(vendors)\n\ndef get_random_platform():\n    platforms = [\n        &quot;Win32&quot;,\n        &quot;Linux x86_64&quot;,\n        &quot;Macintosh&quot;,\n        &quot;Android&quot;,\n        &quot;iOS&quot;,\n        &quot;Windows NT&quot;,\n        &quot;Ubuntu&quot;,\n        &quot;Fedora&quot;,\n        &quot;Chrome OS&quot;,\n        &quot;Raspbian&quot;,\n        &quot;FreeBSD&quot;,\n        &quot;OpenBSD&quot;,\n        &quot;Solaris&quot;,\n        &quot;PlayStation&quot;,\n        &quot;Xbox&quot;\n    ]\n    return random.choice(platforms)\n\ndef get_random_webgl_vendor():\n    webgl_vendors = [\n        &quot;Intel Inc.&quot;,\n        &quot;NVIDIA Corporation&quot;,\n        &quot;AMD&quot;,\n        &quot;ARM&quot;,\n        &quot;Qualcomm&quot;,\n        &quot;Apple Inc.&quot;,\n        &quot;Broadcom&quot;,\n        &quot;Imagination Technologies&quot;,\n        &quot;Vivante Corporation&quot;,\n        &quot;Mali Technologies&quot;\n    ]\n    return random.choice(webgl_vendors)\n\ndef get_random_renderer():\n    renderers = [\n        &quot;Intel Iris OpenGL Engine&quot;,\n        &quot;NVIDIA GeForce GTX&quot;,\n        &quot;AMD Radeon&quot;,\n        &quot;ARM Mali&quot;,\n        &quot;Qualcomm Adreno&quot;,\n        &quot;Apple A12 Bionic&quot;,\n        &quot;Broadcom VideoCore&quot;,\n        &quot;Imagination PowerVR&quot;,\n        &quot;Vivante GC Series&quot;,\n        &quot;Mali-G77&quot;,\n        &quot;Intel UHD Graphics&quot;,\n        &quot;AMD Radeon Pro&quot;,\n        &quot;NVIDIA Quadro&quot;\n    ]\n    return random.choice(renderers)\n\ndef get_random_timezone():\n    timezones = ['US/Pacific', 'US/Mountain', 'US/Central', 'US/Eastern', 'Canada/Pacific', 'Canada/Mountain', 'Canada/Central', 'Canada/Eastern']\n    random_timezone = random.choice(timezones)\n    return random_timezone\n\ndef get_random_window_size():\n    width = random.randint(1024, 1920)\n    height = random.randint(768, 1080)\n    return f&quot;{width}x{height}&quot;\n\n\nchrome_options = selenium.webdriver.ChromeOptions()\nchrome_options.add_argument('start-maximized')\nchrome_options.add_argument(&quot;--disable-plugins&quot;)\nchrome_options.add_argument(&quot;--disable-extensions-file-access-check&quot;)\nchrome_options.add_argument('--disable-popup-blocking')\nchrome_options.add_argument('--disable-blink-features=AutomationControlled')\nchrome_options.add_experimental_option(&quot;excludeSwitches&quot;, [&quot;enable-automation&quot;])\nprefs = {'profile.managed_default_content_settings.images': 2, 'profile.managed_default_content_settings.video': 2}\nchrome_options.add_experimental_option('prefs', prefs)\nchrome_options.add_experimental_option('useAutomationExtension', False)\nchrome_options.add_experimental_option(&quot;prefs&quot;, {&quot;javascript.enabled&quot;: True})\nchrome_options.add_argument('--window-size=' + get_random_window_size())\nchrome_options.add_argument('--force-timezone=' + get_random_timezone())\ndriver = selenium.webdriver.Chrome(chrome_options=chrome_options)\nstealth(driver,\n    languages=[get_random_language()],\n    vendor=get_random_vendor(),\n    platform=get_random_platform(),\n    webgl_vendor=get_random_webgl_vendor(),\n    renderer=get_random_renderer()\n)\n\nwait = WebDriverWait(driver, 20)\ndriver.get('https://github.com/') # better to do here random website function\ndriver.implicitly_wait(time_to_wait=10)\ntime.sleep(1)\ndriver.execute_script('''window.open(&quot;https://www.google.com/intl/en/gmail/about/&quot;,&quot;_blank&quot;);''')\ndriver.switch_to.window(driver.window_handles[0])\ndriver.close()\ndriver.implicitly_wait(time_to_wait=10)\ndriver.switch_to.window(driver.window_handles[0])\ndriver.implicitly_wait(time_to_wait=10)\ntime.sleep(1)\ndriver.find_element('xpath','//* [@data-action=\\'sign in\\']').click()\ndriver.implicitly_wait(time_to_wait=10)\ndriver.find_element('id','identifierId').send_keys('email')\ndriver.find_element('id','identifierNext').click()\ndriver.implicitly_wait(time_to_wait=10)\n\nwait = WebDriverWait(driver, 10)  # Maximum wait time of 10 seconds\nelement = wait.until(EC.presence_of_element_located((By.NAME, &quot;Passwd&quot;)))\ntime.sleep(2)\n\ndriver.find_element('name','Passwd').send_keys('password')\ndriver.find_element('id','passwordNext').click()\ndriver.implicitly_wait(time_to_wait=10)\n# Your code here\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9494775,"reputation":11207,"user_id":7058266,"display_name":"Michael Mintz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687801488,"creation_date":1687801488,"answer_id":76559073,"question_id":76471550,"body_markdown":"You can bypass bot detection with [SeleniumBase](https://github.com/seleniumbase/SeleniumBase) in ``uc`` mode.\r\n\r\nFirst ``pip install seleniumbase``. Then you can run:\r\n\r\n```python\r\nfrom seleniumbase import SB\r\n\r\nwith SB(uc=True) as sb:\r\n    sb.open(&quot;https://www.google.com/gmail/about/&quot;)\r\n    sb.click(&#39;a[data-action=&quot;sign in&quot;]&#39;)\r\n    sb.type(&#39;input[type=&quot;email&quot;]&#39;, &quot;test123@gmail.com&quot;)\r\n    sb.click(&#39;button:contains(&quot;Next&quot;)&#39;)\r\n    sb.sleep(5)\r\n    # sb.type(&#39;input[type=&quot;password&quot;]&#39;, PASSWORD)\r\n    # sb.click(&#39;button:contains(&quot;Next&quot;)&#39;)\r\n```\r\n\r\nUpdate the script with the info you need, then run with ``python``. To access the raw driver from the script, use ``sb.driver``.","title":"cannot log in to google with selenium webdrive","body":"<p>You can bypass bot detection with <a href=\"https://github.com/seleniumbase/SeleniumBase\" rel=\"nofollow noreferrer\">SeleniumBase</a> in <code>uc</code> mode.</p>\n<p>First <code>pip install seleniumbase</code>. Then you can run:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from seleniumbase import SB\n\nwith SB(uc=True) as sb:\n    sb.open(&quot;https://www.google.com/gmail/about/&quot;)\n    sb.click('a[data-action=&quot;sign in&quot;]')\n    sb.type('input[type=&quot;email&quot;]', &quot;test123@gmail.com&quot;)\n    sb.click('button:contains(&quot;Next&quot;)')\n    sb.sleep(5)\n    # sb.type('input[type=&quot;password&quot;]', PASSWORD)\n    # sb.click('button:contains(&quot;Next&quot;)')\n</code></pre>\n<p>Update the script with the info you need, then run with <code>python</code>. To access the raw driver from the script, use <code>sb.driver</code>.</p>\n"}],"owner":{"account_id":22882396,"reputation":25,"user_id":17023812,"display_name":"Dinuka Gunarathne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":635,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76559073,"answer_count":2,"score":1,"last_activity_date":1687801488,"creation_date":1686731403,"question_id":76471550,"body_markdown":"so i want to automate a specific scenario where i have to access gmail. but unfortunately once i enter the email address the following error appears.\r\n\r\n[![enter image description here](https://i.stack.imgur.com/RO1VV.png)]\r\n\r\nin text: \r\nCouldn’t sign you in\r\nThis browser or app may not be secure. Learn more\r\nTry using a different browser. If you’re already using a supported browser, you can try again to sign in.\r\n\r\nwhat can i do to get past this error ? and there is another gmail address i use but i can logged in to that account without any issue but i cant use that address to my purpose \r\n\r\ntried using a different browser(edge) but still the issue presents\r\n","title":"cannot log in to google with selenium webdrive","body":"<p>so i want to automate a specific scenario where i have to access gmail. but unfortunately once i enter the email address the following error appears.</p>\n<p>[<img src=\"https://i.stack.imgur.com/RO1VV.png\" alt=\"enter image description here\" />]</p>\n<p>in text:\nCouldn’t sign you in\nThis browser or app may not be secure. Learn more\nTry using a different browser. If you’re already using a supported browser, you can try again to sign in.</p>\n<p>what can i do to get past this error ? and there is another gmail address i use but i can logged in to that account without any issue but i cant use that address to my purpose</p>\n<p>tried using a different browser(edge) but still the issue presents</p>\n"},{"tags":["java","spring-boot","error-handling","resttemplate"],"owner":{"account_id":1615315,"reputation":7242,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687800958,"creation_date":1687800958,"question_id":76559012,"body_markdown":"I wrote a Service in Spring Boot that executes the `getForObject(URI url, Class&lt;T&gt; responseType)` method. I implemented a dedicated RestTemplate, the restTemplateWithErrorHandler, to handle any errors:\r\n\r\n    @Configuration\r\n    public class RestTemplateWithErrorHandlerConfig {\r\n    \r\n        @Bean\r\n        public RestTemplate restTemplateWithErrorHandler() {\r\n            return new RestTemplateBuilder()\r\n                    .errorHandler(new RestTemplateResponseErrorHandler())\r\n                    .build();\r\n        }\r\n    }\r\n\r\nwhere:\r\n\r\n    public class RestTemplateResponseErrorHandler implements ResponseErrorHandler {\r\n    \r\n    \r\n        @Override\r\n        public boolean hasError(ClientHttpResponse clientHttpResponse)\r\n                throws IOException {\r\n            return clientHttpResponse.getStatusCode().is4xxClientError()\r\n                    || clientHttpResponse.getStatusCode().is5xxServerError();\r\n        }\r\n    \r\n        @Override\r\n        public void handleError(ClientHttpResponse response) throws IOException {\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public void handleError(\r\n                URI url,\r\n                HttpMethod method,\r\n                ClientHttpResponse clientHttpResponse\r\n        ) throws IOException {\r\n    \r\n            HttpStatusCode statusCode = clientHttpResponse.getStatusCode();\r\n    \r\n            if (statusCode.isSameCodeAs(HttpStatus.SERVICE_UNAVAILABLE)) {\r\n                throw new RestTemplateException(statusCode, &quot;Service Unavailable&quot;);\r\n            }\r\n    \r\n            if (statusCode.isSameCodeAs(HttpStatus.INTERNAL_SERVER_ERROR)) {\r\n                throw new RestTemplateException(statusCode, &quot;Internal Server Error&quot;);\r\n            }\r\n    \r\n            if (statusCode.isSameCodeAs(HttpStatus.UNAUTHORIZED)) {\r\n                throw new RestTemplateException(statusCode, &quot;Unauthorized access&quot;);\r\n            }\r\n    \r\n            if (statusCode.isSameCodeAs(HttpStatus.BAD_REQUEST)) {\r\n                throw new RestTemplateException(statusCode, &quot;Bad Request&quot;);\r\n            }\r\n    \r\n            if (statusCode.isSameCodeAs(HttpStatus.NOT_FOUND)) {\r\n                throw new RestTemplateException(statusCode, &quot;Not Found&quot;);\r\n            }\r\n    \r\n            throw new RestTemplateException(statusCode, &quot;Unknown status code&quot;);\r\n    \r\n        }\r\n    }\r\n\r\nand \r\n\r\n    public class RestTemplateException extends RuntimeException  {\r\n    \r\n        private HttpStatusCode statusCode;\r\n        private String error;\r\n    \r\n    \r\n        public RestTemplateException(HttpStatusCode statusCode, String error) {\r\n            super(error);\r\n            this.statusCode = statusCode;\r\n            this.error = error;\r\n        }\r\n    \r\n    \r\n        public HttpStatusCode getStatusCode() {\r\n            return statusCode;\r\n        }\r\n    \r\n        public String getError() {\r\n            return error;\r\n        }\r\n    \r\n        public void setStatusCode(HttpStatusCode statusCode) {\r\n            this.statusCode = statusCode;\r\n        }\r\n    \r\n        public void setError(String error) {\r\n            this.error = error;\r\n        }\r\n    }\r\n\r\nSo when an error occurs, I can return a response that illustrates to the client, in a neat way, that an error has occurred in the service case.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Zgkv1.png\r\n\r\nHowever, there are cases where the request succeeds on the third-party API but returns a responseType that is not the one in (i.e., `EnsembleForecastResponseDTO.class`):\r\n\r\n    public EnsembleForecastResponseDTO callResponse(\r\n            EnsembleForecastRequestDTO requestDTO\r\n        ){\r\n            String url = OpenMeteoUrlEncoder\r\n                    .getQuery(requestDTO);\r\n            return restTemplateWithErrorHandler\r\n                    .getForObject(\r\n                            url,\r\n                            EnsembleForecastResponseDTO.class);\r\n        }\r\n\r\nThe call to the service returns an error JSON, developed by the third-party API of the type:\r\n\r\n    // 20230626132612\r\n    // https://climate-api.open-meteo.com/v1/climate?latitude=52.52&amp;longitude=13.41&amp;start_date=1750-01-01&amp;end_date=2050-11-23&amp;daily=temperature_2m_mean&amp;models=CMCC_CM2_VHR4,FGOALS_f3_H,HiRAM_SIT_HR,MRI_AGCM3_2_S,EC_Earth3P_HR,MPI_ESM1_2_XR,NICAM16_8S\r\n    \r\n    {\r\n      &quot;reason&quot;: &quot;Invalid date&quot;,\r\n      &quot;error&quot;: true\r\n    }\r\n\r\nMy question is whether it is possible to handle this by extracting the error message (i.e. `Invalid date`) issued by the third party and pass it to my client","title":"Spring boot RestTemplate handle different responseType and get error message from third-party API","body":"<p>I wrote a Service in Spring Boot that executes the <code>getForObject(URI url, Class&lt;T&gt; responseType)</code> method. I implemented a dedicated RestTemplate, the restTemplateWithErrorHandler, to handle any errors:</p>\n<pre><code>@Configuration\npublic class RestTemplateWithErrorHandlerConfig {\n\n    @Bean\n    public RestTemplate restTemplateWithErrorHandler() {\n        return new RestTemplateBuilder()\n                .errorHandler(new RestTemplateResponseErrorHandler())\n                .build();\n    }\n}\n</code></pre>\n<p>where:</p>\n<pre><code>public class RestTemplateResponseErrorHandler implements ResponseErrorHandler {\n\n\n    @Override\n    public boolean hasError(ClientHttpResponse clientHttpResponse)\n            throws IOException {\n        return clientHttpResponse.getStatusCode().is4xxClientError()\n                || clientHttpResponse.getStatusCode().is5xxServerError();\n    }\n\n    @Override\n    public void handleError(ClientHttpResponse response) throws IOException {\n\n    }\n\n    @Override\n    public void handleError(\n            URI url,\n            HttpMethod method,\n            ClientHttpResponse clientHttpResponse\n    ) throws IOException {\n\n        HttpStatusCode statusCode = clientHttpResponse.getStatusCode();\n\n        if (statusCode.isSameCodeAs(HttpStatus.SERVICE_UNAVAILABLE)) {\n            throw new RestTemplateException(statusCode, &quot;Service Unavailable&quot;);\n        }\n\n        if (statusCode.isSameCodeAs(HttpStatus.INTERNAL_SERVER_ERROR)) {\n            throw new RestTemplateException(statusCode, &quot;Internal Server Error&quot;);\n        }\n\n        if (statusCode.isSameCodeAs(HttpStatus.UNAUTHORIZED)) {\n            throw new RestTemplateException(statusCode, &quot;Unauthorized access&quot;);\n        }\n\n        if (statusCode.isSameCodeAs(HttpStatus.BAD_REQUEST)) {\n            throw new RestTemplateException(statusCode, &quot;Bad Request&quot;);\n        }\n\n        if (statusCode.isSameCodeAs(HttpStatus.NOT_FOUND)) {\n            throw new RestTemplateException(statusCode, &quot;Not Found&quot;);\n        }\n\n        throw new RestTemplateException(statusCode, &quot;Unknown status code&quot;);\n\n    }\n}\n</code></pre>\n<p>and</p>\n<pre><code>public class RestTemplateException extends RuntimeException  {\n\n    private HttpStatusCode statusCode;\n    private String error;\n\n\n    public RestTemplateException(HttpStatusCode statusCode, String error) {\n        super(error);\n        this.statusCode = statusCode;\n        this.error = error;\n    }\n\n\n    public HttpStatusCode getStatusCode() {\n        return statusCode;\n    }\n\n    public String getError() {\n        return error;\n    }\n\n    public void setStatusCode(HttpStatusCode statusCode) {\n        this.statusCode = statusCode;\n    }\n\n    public void setError(String error) {\n        this.error = error;\n    }\n}\n</code></pre>\n<p>So when an error occurs, I can return a response that illustrates to the client, in a neat way, that an error has occurred in the service case.</p>\n<p><a href=\"https://i.stack.imgur.com/Zgkv1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zgkv1.png\" alt=\"enter image description here\" /></a></p>\n<p>However, there are cases where the request succeeds on the third-party API but returns a responseType that is not the one in (i.e., <code>EnsembleForecastResponseDTO.class</code>):</p>\n<pre><code>public EnsembleForecastResponseDTO callResponse(\n        EnsembleForecastRequestDTO requestDTO\n    ){\n        String url = OpenMeteoUrlEncoder\n                .getQuery(requestDTO);\n        return restTemplateWithErrorHandler\n                .getForObject(\n                        url,\n                        EnsembleForecastResponseDTO.class);\n    }\n</code></pre>\n<p>The call to the service returns an error JSON, developed by the third-party API of the type:</p>\n<pre><code>// 20230626132612\n// https://climate-api.open-meteo.com/v1/climate?latitude=52.52&amp;longitude=13.41&amp;start_date=1750-01-01&amp;end_date=2050-11-23&amp;daily=temperature_2m_mean&amp;models=CMCC_CM2_VHR4,FGOALS_f3_H,HiRAM_SIT_HR,MRI_AGCM3_2_S,EC_Earth3P_HR,MPI_ESM1_2_XR,NICAM16_8S\n\n{\n  &quot;reason&quot;: &quot;Invalid date&quot;,\n  &quot;error&quot;: true\n}\n</code></pre>\n<p>My question is whether it is possible to handle this by extracting the error message (i.e. <code>Invalid date</code>) issued by the third party and pass it to my client</p>\n"},{"tags":["java","spring-boot","unit-testing","integration-testing","spring-boot-test"],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687800862,"creation_date":1687800862,"answer_id":76558998,"question_id":76558778,"body_markdown":"You can first configure `@PropertySource` &#39;s `ignoreResourceNotFound` as true such that the test can still continue executing in case of failure to load the  properties file :\r\n\r\n``` java\r\n@PropertySource(value = { &quot;file:/config/appconfig.properties&quot; }, ignoreResourceNotFound = true)\r\npublic class ExternalProperties {\r\n\r\n}\r\n```\r\n\r\nThen use `@TestPropertySource` to configure a properties file just for that test class such as :\r\n\r\n``` java\r\n@ExtendWith(SpringExtension.class)\r\n@TestPropertySource(&quot;classpath:test.properties&quot;)\r\npublic class FooTest {\r\n\r\n}\r\n```\r\n\r\n","title":"Mocking propertysource for integration test","body":"<p>You can first configure <code>@PropertySource</code> 's <code>ignoreResourceNotFound</code> as true such that the test can still continue executing in case of failure to load the  properties file :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PropertySource(value = { &quot;file:/config/appconfig.properties&quot; }, ignoreResourceNotFound = true)\npublic class ExternalProperties {\n\n}\n</code></pre>\n<p>Then use <code>@TestPropertySource</code> to configure a properties file just for that test class such as :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@TestPropertySource(&quot;classpath:test.properties&quot;)\npublic class FooTest {\n\n}\n</code></pre>\n"}],"owner":{"account_id":1135793,"reputation":4285,"user_id":1120878,"accept_rate":36,"display_name":"dead programmer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1687800862,"creation_date":1687798611,"question_id":76558778,"body_markdown":"I have a configuration class as \r\n\r\n    @Configuration\r\n    @Getter\r\n    @Setter\r\n    @PropertySource(value = { &quot;file:/config/appconfig.properties&quot; })\r\n    public class ExternalProperties {\r\n    // varibles which get initize with @Value\r\n    }\r\n\r\n\r\n\r\nwhich reads value from a file. But When I am trying to write integration test cases so at the time of initalization its failed as the appconfig.properties in present in the test env. And I am getting below error\r\n&gt; \r\n&gt; Caused by: java.io.FileNotFoundException: /config/appconfig.properties (No such file or directory)\r\n&gt; \tat java.base/java.io.FileInputStream.open0(Native Method)\r\n\r\nHow to initizae the test enviroment in this case. what is the way we can point the PropertySouce to some other temp location?","title":"Mocking propertysource for integration test","body":"<p>I have a configuration class as</p>\n<pre><code>@Configuration\n@Getter\n@Setter\n@PropertySource(value = { &quot;file:/config/appconfig.properties&quot; })\npublic class ExternalProperties {\n// varibles which get initize with @Value\n}\n</code></pre>\n<p>which reads value from a file. But When I am trying to write integration test cases so at the time of initalization its failed as the appconfig.properties in present in the test env. And I am getting below error</p>\n<blockquote>\n<p>Caused by: java.io.FileNotFoundException: /config/appconfig.properties (No such file or directory)\nat java.base/java.io.FileInputStream.open0(Native Method)</p>\n</blockquote>\n<p>How to initizae the test enviroment in this case. what is the way we can point the PropertySouce to some other temp location?</p>\n"},{"tags":["java","jms","spring-ws"],"answers":[{"tags":[],"owner":{"account_id":926117,"reputation":2025,"user_id":956884,"display_name":"evandongen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1358934923,"creation_date":1358934923,"answer_id":14476793,"question_id":14390474,"body_markdown":"I&#39;m not sure how your complete Endpoint looks, but the class should be annotated with `@Endpoint` or it should implement `MessageHandler` or `PayloadEndpoint`.\r\n\r\nOn other thing you can play with is the method signature. Spring-WS&#39; endpoint mapping is pretty intelligent: it tries to map input and output classes from your method signature with the WSDL file. Are you sure a String is the @ResponsePayLoad, not a `StoreImageResponse`?\r\n\r\nFor example, here&#39;s the method signature of one of my endpoint\r\n\r\n    @PayloadRoot(\r\n    \tlocalPart = &quot;GetHiredCandidatesRequest&quot;, \r\n    \tnamespace = DEFAULT_NAMESPACE\r\n    )\r\n    @ResponsePayload\r\n    public GetHiredCandidatesResponse getCandidates (\r\n    \t@RequestPayload GetHiredCandidatesRequest getCandidate,\r\n    \tMessageContext messageContext) {\r\n    \t...\r\n    }\r\n\r\nWhich is defined in my WSDL like this:\r\n\r\n    &lt;wsdl:operation name=&quot;GetHiredCandidates&quot;&gt;\r\n    \t&lt;wsdl:input message=&quot;tns:GetHiredCandidatesRequest&quot; name=&quot;GetHiredCandidatesRequest&quot;&gt;&lt;/wsdl:input&gt;\r\n    \t&lt;wsdl:output message=&quot;tns:GetHiredCandidatesResponse&quot; name=&quot;GetHiredCandidatesResponse&quot;&gt;&lt;/wsdl:output&gt;\r\n    &lt;/wsdl:operation&gt;\r\n\r\nDo you see how it&#39;s mapped? Perhaps you&#39;re missing something like that in your signature.","title":"No adapter for endpoint; Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?","body":"<p>I'm not sure how your complete Endpoint looks, but the class should be annotated with <code>@Endpoint</code> or it should implement <code>MessageHandler</code> or <code>PayloadEndpoint</code>.</p>\n\n<p>On other thing you can play with is the method signature. Spring-WS' endpoint mapping is pretty intelligent: it tries to map input and output classes from your method signature with the WSDL file. Are you sure a String is the @ResponsePayLoad, not a <code>StoreImageResponse</code>?</p>\n\n<p>For example, here's the method signature of one of my endpoint</p>\n\n<pre><code>@PayloadRoot(\n    localPart = \"GetHiredCandidatesRequest\", \n    namespace = DEFAULT_NAMESPACE\n)\n@ResponsePayload\npublic GetHiredCandidatesResponse getCandidates (\n    @RequestPayload GetHiredCandidatesRequest getCandidate,\n    MessageContext messageContext) {\n    ...\n}\n</code></pre>\n\n<p>Which is defined in my WSDL like this:</p>\n\n<pre><code>&lt;wsdl:operation name=\"GetHiredCandidates\"&gt;\n    &lt;wsdl:input message=\"tns:GetHiredCandidatesRequest\" name=\"GetHiredCandidatesRequest\"&gt;&lt;/wsdl:input&gt;\n    &lt;wsdl:output message=\"tns:GetHiredCandidatesResponse\" name=\"GetHiredCandidatesResponse\"&gt;&lt;/wsdl:output&gt;\n&lt;/wsdl:operation&gt;\n</code></pre>\n\n<p>Do you see how it's mapped? Perhaps you're missing something like that in your signature.</p>\n"},{"tags":[],"owner":{"account_id":1128460,"reputation":2054,"user_id":1115122,"accept_rate":56,"display_name":"anshulkatta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476715766,"creation_date":1360836767,"answer_id":14872376,"question_id":14390474,"body_markdown":"First, as per the guidelines, there should be an **Endpoint** class\r\n\r\n    @Endpoint\r\n    public class EmpEndpoint {\r\n    \r\n        @Autowired\r\n        private EmpService empService;\r\n    \r\n        //This is like @RequestMapping of Spring MVC\t\r\n        @PayloadRoot(localPart = &quot;EmpServiceRequest&quot;, namespace = &quot;http://www.example.org/&quot;)\r\n        @ResponsePayload\r\n        public EmpServiceResponse getemployeeDetails(@RequestPayload EmpServiceRequest request) {\r\n            EmpServiceResponse response = new ObjectFactory().createEmpServiceResponse();\r\n            List&lt;Employee&gt; l = empService.getemployeeDetails(request.getName());\r\n            response.setName(l.get(0).getName());\r\n            response.setEmail(l.get(0).getEmail());\r\n            return response;\r\n        }\r\n    }\r\n\r\nAnd one **Service** and its  **implementation** class which will have **PayloadRoot** and other **Annotations (Request and Response)**\r\n\r\nAnd place this in your spring-servlet.xml \r\n\r\n      &lt;!-- To detect @Endpoint --&gt;\r\n    &lt;sws:annotation-driven/&gt;\r\n    \r\n    &lt;!-- To detect @Service, @Component etc --&gt;\r\n    &lt;context:component-scan base-package=&quot;your package for eg com.employee&quot; /&gt;","title":"No adapter for endpoint; Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?","body":"<p>First, as per the guidelines, there should be an <strong>Endpoint</strong> class</p>\n\n<pre><code>@Endpoint\npublic class EmpEndpoint {\n\n    @Autowired\n    private EmpService empService;\n\n    //This is like @RequestMapping of Spring MVC    \n    @PayloadRoot(localPart = \"EmpServiceRequest\", namespace = \"http://www.example.org/\")\n    @ResponsePayload\n    public EmpServiceResponse getemployeeDetails(@RequestPayload EmpServiceRequest request) {\n        EmpServiceResponse response = new ObjectFactory().createEmpServiceResponse();\n        List&lt;Employee&gt; l = empService.getemployeeDetails(request.getName());\n        response.setName(l.get(0).getName());\n        response.setEmail(l.get(0).getEmail());\n        return response;\n    }\n}\n</code></pre>\n\n<p>And one <strong>Service</strong> and its  <strong>implementation</strong> class which will have <strong>PayloadRoot</strong> and other <strong>Annotations (Request and Response)</strong></p>\n\n<p>And place this in your spring-servlet.xml </p>\n\n<pre><code>  &lt;!-- To detect @Endpoint --&gt;\n&lt;sws:annotation-driven/&gt;\n\n&lt;!-- To detect @Service, @Component etc --&gt;\n&lt;context:component-scan base-package=\"your package for eg com.employee\" /&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":459272,"reputation":21232,"user_id":859640,"accept_rate":100,"display_name":"John S"},"score":0,"creation_date":1406167336,"post_id":22228014,"comment_id":38727472,"body_markdown":"Thanks. This might not be the OP&#39;s issue, but it was mine.","body":"Thanks. This might not be the OP&#39;s issue, but it was mine."},{"owner":{"account_id":1030287,"reputation":549,"user_id":1038733,"accept_rate":0,"display_name":"Erikson"},"score":9,"creation_date":1423245318,"post_id":22228014,"comment_id":45084100,"body_markdown":"Worked for me too. Here&#39;s example of my code:\n`code`\t@PayloadRoot(namespace = NAMESPACE_URI, localPart = &quot;ServiceCheckRequest&quot;)\n\t@ResponsePayload\n\tpublic JAXBElement&lt;ServiceCheckResponseType&gt; serviceCheckRequest(\n\t@RequestPayload ServiceCheckRequestType request) {\n\t\tServiceCheckResponseType response = new ServiceCheckResponseType();\n\t\tresponse.setSystem(&quot;Testing system&quot;);\n\t\tQName qname = new QName(&quot;ServiceCheckRequest&quot;);\n\t\tJAXBElement&lt;ServiceCheckResponseType&gt; jaxbElement = new JAXBElement&lt;ServiceCheckResponseType&gt;(\n\t\t\t\tqname, ServiceCheckResponseType.class, response);\n\t\treturn jaxbElement;\n\t}","body":"Worked for me too. Here&#39;s example of my code: <code>code</code>\t@PayloadRoot(namespace = NAMESPACE_URI, localPart = &quot;ServiceCheckRequest&quot;) \t@ResponsePayload \tpublic JAXBElement&lt;ServiceCheckResponseType&gt; serviceCheckRequest( \t@RequestPayload ServiceCheckRequestType request) { \t\tServiceCheckResponseType response = new ServiceCheckResponseType(); \t\tresponse.setSystem(&quot;Testing system&quot;); \t\tQName qname = new QName(&quot;ServiceCheckRequest&quot;); \t\tJAXBElement&lt;ServiceCheckResponseType&gt; jaxbElement = new JAXBElement&lt;ServiceCheckResponseType&gt;( \t\t\t\tqname, ServiceCheckResponseType.class, response); \t\treturn jaxbElement; \t}"},{"owner":{"account_id":5996,"reputation":1508,"user_id":9910,"accept_rate":43,"display_name":"KC Baltz"},"score":0,"creation_date":1433899299,"post_id":22228014,"comment_id":49546422,"body_markdown":"I don&#39;t see what @XMLRootElement has to do with the solution.  I also found that wrapping my response with JAXBElement helped, but that doesn&#39;t seem like something I should have to do in a simple framework like Spring.","body":"I don&#39;t see what @XMLRootElement has to do with the solution.  I also found that wrapping my response with JAXBElement helped, but that doesn&#39;t seem like something I should have to do in a simple framework like Spring."},{"owner":{"account_id":6672489,"reputation":341,"user_id":5148216,"display_name":"Sandeep Salian"},"score":1,"creation_date":1485252046,"post_id":22228014,"comment_id":70837420,"body_markdown":"Thanks, adding the @XMLRootElement to the JaxB Class generated from XSD worked for me.","body":"Thanks, adding the @XMLRootElement to the JaxB Class generated from XSD worked for me."},{"owner":{"account_id":5974421,"reputation":981,"user_id":4695799,"display_name":"Padvinder"},"score":0,"creation_date":1563368688,"post_id":22228014,"comment_id":100676265,"body_markdown":"Thanks a million, wrapping response in JAXBElement solved it for me. My example: QName qname = new QName(&quot;ResponseElement&quot;); JAXBElement&lt;ResponseElement&gt; jaxbElement = new JAXBElement&lt;&gt;(qname, ResponseElement.class, response);","body":"Thanks a million, wrapping response in JAXBElement solved it for me. My example: QName qname = new QName(&quot;ResponseElement&quot;); JAXBElement&lt;ResponseElement&gt; jaxbElement = new JAXBElement&lt;&gt;(qname, ResponseElement.class, response);"},{"owner":{"account_id":1379869,"reputation":81,"user_id":1313116,"display_name":"Webchen"},"score":0,"creation_date":1579000965,"post_id":22228014,"comment_id":105614386,"body_markdown":"Wrapping the response in the JAXBELement solved it as well for me!","body":"Wrapping the response in the JAXBELement solved it as well for me!"},{"owner":{"account_id":1464832,"reputation":186,"user_id":1378018,"display_name":"David Bradley"},"score":0,"creation_date":1685463853,"post_id":22228014,"comment_id":134662367,"body_markdown":"With newer Java and the change in namespace for Jakarta from javax-&gt;jakarta can be an issue. I have the XmlRootElement specified, but it&#39;s the jakarta.xml.bind.annotation namespace not the javax.xml.bind.annotation namespace. I&#39;m in kind of a catch 22 situation with this one","body":"With newer Java and the change in namespace for Jakarta from javax-&gt;jakarta can be an issue. I have the XmlRootElement specified, but it&#39;s the jakarta.xml.bind.annotation namespace not the javax.xml.bind.annotation namespace. I&#39;m in kind of a catch 22 situation with this one"}],"tags":[],"owner":{"account_id":3965245,"reputation":4105,"user_id":3271406,"accept_rate":25,"display_name":"lu_ko"},"comment_count":7,"down_vote_count":0,"up_vote_count":87,"is_accepted":false,"score":87,"last_activity_date":1475078034,"creation_date":1394117643,"answer_id":22228014,"question_id":14390474,"body_markdown":"I had a similar error message. My problem was in request and response class that I generated from XSD. It missed @XMLRootElement annotation. This caused that description of operation (in WSDL) and description of implemented method (in Endpoint) did not match. **Adding JAXBElement to my endpoint method solved my problem.**\r\n\r\n    import javax.xml.bind.JAXBElement;\r\n\r\n    @PayloadRoot(namespace = &quot;http://foo.bar/books&quot;, localPart = &quot;GetBook&quot;)\r\n    @ResponsePayload\r\n    public JAXBElement&lt;MyReponse&gt; getBook(@RequestPayload JAXBElement&lt;MyRequest&gt; myRequest) {\r\n        ...\r\n\r\nSee this blog for more details: [spring-ws: No adapter for endpoint][1]\r\n\r\n\r\n  [1]: https://jbossadventure.wordpress.com/2013/04/16/spring-ws-no-adapter-for-endpoint/","title":"No adapter for endpoint; Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?","body":"<p>I had a similar error message. My problem was in request and response class that I generated from XSD. It missed @XMLRootElement annotation. This caused that description of operation (in WSDL) and description of implemented method (in Endpoint) did not match. <strong>Adding JAXBElement to my endpoint method solved my problem.</strong></p>\n\n<pre><code>import javax.xml.bind.JAXBElement;\n\n@PayloadRoot(namespace = \"http://foo.bar/books\", localPart = \"GetBook\")\n@ResponsePayload\npublic JAXBElement&lt;MyReponse&gt; getBook(@RequestPayload JAXBElement&lt;MyRequest&gt; myRequest) {\n    ...\n</code></pre>\n\n<p>See this blog for more details: <a href=\"https://jbossadventure.wordpress.com/2013/04/16/spring-ws-no-adapter-for-endpoint/\" rel=\"noreferrer\">spring-ws: No adapter for endpoint</a></p>\n"},{"tags":[],"owner":{"account_id":3906953,"reputation":11659,"user_id":3233398,"accept_rate":9,"display_name":"EliuX"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1492023070,"creation_date":1492023070,"answer_id":43377443,"question_id":14390474,"body_markdown":"Same problem but in my case was because I forgot to place the annotations `@ResponsePayload` and `@RequestPayload` in the handler function. Just check it! It&#39;s probably all it&#39;s needed.","title":"No adapter for endpoint; Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?","body":"<p>Same problem but in my case was because I forgot to place the annotations <code>@ResponsePayload</code> and <code>@RequestPayload</code> in the handler function. Just check it! It's probably all it's needed.</p>\n"},{"comments":[{"owner":{"account_id":2084279,"reputation":1181,"user_id":1855579,"accept_rate":67,"display_name":"Vlad Dinulescu"},"score":1,"creation_date":1580211498,"post_id":55272820,"comment_id":106015686,"body_markdown":"This doesn&#39;t even compile.","body":"This doesn&#39;t even compile."},{"owner":{"account_id":3740643,"reputation":935,"user_id":3110488,"display_name":"m.nguyencntt"},"score":0,"creation_date":1580395565,"post_id":55272820,"comment_id":106090428,"body_markdown":"@VladDinulescu you have to add lib for JAXBElment, and create 2 objects: QueryRequest &amp; QueryResponse. Complie will be fine after this. The code I copy from my sample which worked for me already :)","body":"@VladDinulescu you have to add lib for JAXBElment, and create 2 objects: QueryRequest &amp; QueryResponse. Complie will be fine after this. The code I copy from my sample which worked for me already :)"},{"owner":{"account_id":2084279,"reputation":1181,"user_id":1855579,"accept_rate":67,"display_name":"Vlad Dinulescu"},"score":1,"creation_date":1580474339,"post_id":55272820,"comment_id":106118626,"body_markdown":"If you return a QueryResponse and the method&#39;s return type is JAXBElement&lt;QueryResponse&gt;, no, it won&#39;t compile.","body":"If you return a QueryResponse and the method&#39;s return type is JAXBElement&lt;QueryResponse&gt;, no, it won&#39;t compile."},{"owner":{"account_id":3740643,"reputation":935,"user_id":3110488,"display_name":"m.nguyencntt"},"score":0,"creation_date":1580552920,"post_id":55272820,"comment_id":106140871,"body_markdown":"Updated the return as JAXBElement&lt;QueryResponse&gt;. Thanks @VladDinulescu","body":"Updated the return as JAXBElement&lt;QueryResponse&gt;. Thanks @VladDinulescu"}],"tags":[],"owner":{"account_id":3740643,"reputation":935,"user_id":3110488,"display_name":"m.nguyencntt"},"comment_count":4,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1580552875,"creation_date":1553134332,"answer_id":55272820,"question_id":14390474,"body_markdown":"I was using WSDL file and did as below, then it worked.\r\n\r\n      @PayloadRoot(namespace = &quot;http://www.myservice/v1.0/query&quot;, localPart = &quot;queryRequest&quot;)\r\n      @ResponsePayload\r\n      public JAXBElement&lt;QueryResponse&gt; queryAddrLocation(@RequestPayload JAXBElement&lt;QueryRequest&gt; queryRequest) {\r\n        System.out.println(&quot;Welcome to &quot; + queryRequest);\r\n        return createJaxbElement(new QueryResponse(), QueryResponse.class);\r\n      }\r\n    \r\n      private &lt;T&gt; JAXBElement&lt;T&gt; createJaxbElement(T object, Class&lt;T&gt; clazz) {\r\n        return new JAXBElement&lt;&gt;(new QName(clazz.getSimpleName()), clazz, object);\r\n      }","title":"No adapter for endpoint; Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?","body":"<p>I was using WSDL file and did as below, then it worked.</p>\n\n<pre><code>  @PayloadRoot(namespace = \"http://www.myservice/v1.0/query\", localPart = \"queryRequest\")\n  @ResponsePayload\n  public JAXBElement&lt;QueryResponse&gt; queryAddrLocation(@RequestPayload JAXBElement&lt;QueryRequest&gt; queryRequest) {\n    System.out.println(\"Welcome to \" + queryRequest);\n    return createJaxbElement(new QueryResponse(), QueryResponse.class);\n  }\n\n  private &lt;T&gt; JAXBElement&lt;T&gt; createJaxbElement(T object, Class&lt;T&gt; clazz) {\n    return new JAXBElement&lt;&gt;(new QName(clazz.getSimpleName()), clazz, object);\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2774008,"reputation":18025,"user_id":2387977,"accept_rate":69,"display_name":"Dherik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559768621,"creation_date":1559768621,"answer_id":56467985,"question_id":14390474,"body_markdown":"I had the same error, but only running my Spring Web Service integration tests.\r\n\r\nThe problem was that I setup the `Jaxb2Marshaller` with a different configuration if compared with `Jaxb2Marshaller` inside the test. I was not using the same Bean for the application and test.\r\n\r\nMy `Jaxb2Marshaller` with the application running is:\r\n\r\n    private Jaxb2Marshaller marshaller() {\r\n\t\tJaxb2Marshaller marshaller = new Jaxb2Marshaller();\r\n\t\tmarshaller.setContextPath(&quot;com.company.application&quot;);\r\n\t\tmarshaller.setMtomEnabled(true);\r\n\t\treturn marshaller;\r\n\t}\r\n\r\nBut on my tests, I was using:\r\n\r\n    @Before\r\n\tpublic void init() throws Exception {\r\n\t\tmarshaller.setPackagesToScan(ClassUtils.getPackageName(Order.class));\r\n\t\tmarshaller.afterPropertiesSet();\r\n\t}\r\n\r\nTo make the test work, I just defined the two missing properties:\r\n\r\n    @Before\r\n\tpublic void init() throws Exception {\r\n\t\tmarshaller.setPackagesToScan(ClassUtils.getPackageName(Order.class));\r\n\t\tmarshaller.afterPropertiesSet();\r\n\t\tmarshaller.setContextPath(&quot;com.company.application&quot;);\r\n\t\tmarshaller.setMtomEnabled(true);\r\n\t}","title":"No adapter for endpoint; Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?","body":"<p>I had the same error, but only running my Spring Web Service integration tests.</p>\n\n<p>The problem was that I setup the <code>Jaxb2Marshaller</code> with a different configuration if compared with <code>Jaxb2Marshaller</code> inside the test. I was not using the same Bean for the application and test.</p>\n\n<p>My <code>Jaxb2Marshaller</code> with the application running is:</p>\n\n<pre><code>private Jaxb2Marshaller marshaller() {\n    Jaxb2Marshaller marshaller = new Jaxb2Marshaller();\n    marshaller.setContextPath(\"com.company.application\");\n    marshaller.setMtomEnabled(true);\n    return marshaller;\n}\n</code></pre>\n\n<p>But on my tests, I was using:</p>\n\n<pre><code>@Before\npublic void init() throws Exception {\n    marshaller.setPackagesToScan(ClassUtils.getPackageName(Order.class));\n    marshaller.afterPropertiesSet();\n}\n</code></pre>\n\n<p>To make the test work, I just defined the two missing properties:</p>\n\n<pre><code>@Before\npublic void init() throws Exception {\n    marshaller.setPackagesToScan(ClassUtils.getPackageName(Order.class));\n    marshaller.afterPropertiesSet();\n    marshaller.setContextPath(\"com.company.application\");\n    marshaller.setMtomEnabled(true);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1568317,"reputation":303,"user_id":1456612,"accept_rate":20,"display_name":"Shahriar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1571418809,"creation_date":1571408680,"answer_id":58452826,"question_id":14390474,"body_markdown":"This method works when called from SOAPUI:\r\n\r\n    @PayloadRoot(namespace = NAMESPACE_URI, localPart = &quot;getOrderDetail&quot;)\r\n    public @ResponsePayload JAXBElement&lt;OrderDetailResponse&gt; getOrderDetail(@RequestPayload JAXBElement&lt;String&gt; customerId, @RequestPayload JAXBElement&lt;String&gt; promoCode)\r\n\r\nIn the method below, the values inside the customerStatusRequest are coming in null even though from SOAPUI I am populating them.\r\n\r\n    @PayloadRoot(namespace = NAMESPACE_URI, localPart = &quot;getCustomerStatus&quot;)\r\n    public @ResponsePayload\r\n    JAXBElement&lt;CustomerStatusResponse&gt; getCustomerStatus(@RequestPayload JAXBElement&lt;CustomerStatusRequest&gt; customerStatusRequest)\r\n\r\n(CustomerStatusRequest implements Serializable)\r\n\r\nIt appears String parameter values are making it through the call. But not a custom class.\r\nI annotated the CustomerStatusRequest class in this manner:\r\n\r\n    @XmlRootElement\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(name = &quot;CustomerStatusRequest&quot;, propOrder = {\r\n\t\t&quot;customerId&quot;,\r\n\t\t&quot;gender&quot;,\r\n\t\t&quot;dob&quot;,\r\n\t\t&quot;lastName&quot;,\r\n\t\t&quot;sourceSystemId&quot;\r\n    },namespace=&quot;http://www.mycompany.com/webservices&quot;)\r\n\r\nand also each field in the CustomerStatusRequest this way:\r\n    \r\n    @XmlElement(name = &quot;customerId&quot;, required = true, nillable = true)\r\n\r\nThe method is called but the values for customerId, etc... are still coming in as null. Are additional annotations needed for a custom class?\r\n\r\n--Thanks","title":"No adapter for endpoint; Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?","body":"<p>This method works when called from SOAPUI:</p>\n\n<pre><code>@PayloadRoot(namespace = NAMESPACE_URI, localPart = \"getOrderDetail\")\npublic @ResponsePayload JAXBElement&lt;OrderDetailResponse&gt; getOrderDetail(@RequestPayload JAXBElement&lt;String&gt; customerId, @RequestPayload JAXBElement&lt;String&gt; promoCode)\n</code></pre>\n\n<p>In the method below, the values inside the customerStatusRequest are coming in null even though from SOAPUI I am populating them.</p>\n\n<pre><code>@PayloadRoot(namespace = NAMESPACE_URI, localPart = \"getCustomerStatus\")\npublic @ResponsePayload\nJAXBElement&lt;CustomerStatusResponse&gt; getCustomerStatus(@RequestPayload JAXBElement&lt;CustomerStatusRequest&gt; customerStatusRequest)\n</code></pre>\n\n<p>(CustomerStatusRequest implements Serializable)</p>\n\n<p>It appears String parameter values are making it through the call. But not a custom class.\nI annotated the CustomerStatusRequest class in this manner:</p>\n\n<pre><code>@XmlRootElement\n@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = \"CustomerStatusRequest\", propOrder = {\n    \"customerId\",\n    \"gender\",\n    \"dob\",\n    \"lastName\",\n    \"sourceSystemId\"\n},namespace=\"http://www.mycompany.com/webservices\")\n</code></pre>\n\n<p>and also each field in the CustomerStatusRequest this way:</p>\n\n<pre><code>@XmlElement(name = \"customerId\", required = true, nillable = true)\n</code></pre>\n\n<p>The method is called but the values for customerId, etc... are still coming in as null. Are additional annotations needed for a custom class?</p>\n\n<p>--Thanks</p>\n"},{"comments":[{"owner":{"account_id":2932924,"reputation":405,"user_id":2512629,"display_name":"Vincent Guyard"},"score":0,"creation_date":1591918661,"post_id":59071235,"comment_id":110245777,"body_markdown":"I have done that but gave me another error: &quot;Implementation of JAXB-API has not been found on module path or classpath.&quot;","body":"I have done that but gave me another error: &quot;Implementation of JAXB-API has not been found on module path or classpath.&quot;"},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1614340750,"post_id":59071235,"comment_id":117362360,"body_markdown":"@VincentGuyard to fix that you need to do this: https://stackoverflow.com/a/51916222/912829","body":"@VincentGuyard to fix that you need to do this: <a href=\"https://stackoverflow.com/a/51916222/912829\">stackoverflow.com/a/51916222/912829</a>"}],"tags":[],"owner":{"account_id":6298072,"reputation":69,"user_id":4893560,"display_name":"oussama khachiai"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1574861044,"creation_date":1574861044,"answer_id":59071235,"question_id":14390474,"body_markdown":"I had a similar error. the problem is that the request and response generated from XSD/WSDL missed the @XMLRootElement annotation. By adding JAXBElement to the endpoint solved the problem.\r\n\r\n    private static final String NAMESPACE_URI = &quot;&lt;targetNamespace&gt;&quot;;\r\n\r\n    @Autowired\r\n    Service   service;\r\n\r\n    @PayloadRoot ( namespace = Endpoint.NAMESPACE_URI, localPart = &quot;name&quot; )\r\n    @ResponsePayload\r\n    public JAXBElement &lt; Response &gt; Create ( @RequestPayload JAXBElement &lt; Request&gt; request ) throws Exception\r\n    {\r\n    ObjectFactory factory = new ObjectFactory ( );\r\n    Response response = new Response ( );\r\n    Request req = request.getValue ( );\r\n\r\n    response  = this.service.call( req);\r\n\r\n    return factory.createResponse ( response );\r\n    }","title":"No adapter for endpoint; Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?","body":"<p>I had a similar error. the problem is that the request and response generated from XSD/WSDL missed the @XMLRootElement annotation. By adding JAXBElement to the endpoint solved the problem.</p>\n\n<pre><code>private static final String NAMESPACE_URI = \"&lt;targetNamespace&gt;\";\n\n@Autowired\nService   service;\n\n@PayloadRoot ( namespace = Endpoint.NAMESPACE_URI, localPart = \"name\" )\n@ResponsePayload\npublic JAXBElement &lt; Response &gt; Create ( @RequestPayload JAXBElement &lt; Request&gt; request ) throws Exception\n{\nObjectFactory factory = new ObjectFactory ( );\nResponse response = new Response ( );\nRequest req = request.getValue ( );\n\nresponse  = this.service.call( req);\n\nreturn factory.createResponse ( response );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20985136,"reputation":21,"user_id":15419121,"display_name":"yasin cakmak"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621728009,"creation_date":1621728009,"answer_id":67655078,"question_id":14390474,"body_markdown":"I added property    &lt;property name=&quot;supportJaxbElementClass&quot; value = &quot;true&quot;/&gt; in beanXml file\r\n\r\nAnd it is work.\r\n\r\n    &lt;bean id=&quot;marshaller&quot;\r\n\t\tclass=&quot;org.springframework.oxm.jaxb.Jaxb2Marshaller&quot;&gt;\r\n\t\t &lt;property name=&quot;supportJaxbElementClass&quot; value = &quot;true&quot;/&gt;\r\n\t\t&lt;property name=&quot;contextPaths&quot;&gt;\r\n\t\t\t&lt;list&gt;\r\n\t\t\t\t&lt;value&gt;com.xxx&lt;/value&gt;\r\n\t\t\t&lt;/list&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;schemas&quot;&gt;\r\n\t\t\t&lt;list&gt;\r\n\t\t\t\t&lt;value&gt;classpath:/xsd/service.xsd&lt;/value&gt;\r\n\t\t\t&lt;/list&gt;\r\n\t\t&lt;/property&gt;\r\n\t&lt;/bean&gt;","title":"No adapter for endpoint; Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?","body":"<p>I added property     in beanXml file</p>\n<p>And it is work.</p>\n<pre><code>&lt;bean id=&quot;marshaller&quot;\n    class=&quot;org.springframework.oxm.jaxb.Jaxb2Marshaller&quot;&gt;\n     &lt;property name=&quot;supportJaxbElementClass&quot; value = &quot;true&quot;/&gt;\n    &lt;property name=&quot;contextPaths&quot;&gt;\n        &lt;list&gt;\n            &lt;value&gt;com.xxx&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;schemas&quot;&gt;\n        &lt;list&gt;\n            &lt;value&gt;classpath:/xsd/service.xsd&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8362258,"reputation":1639,"user_id":6280135,"display_name":"Maninder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649998433,"creation_date":1649981068,"answer_id":71878765,"question_id":14390474,"body_markdown":"I was also facing the same issue. Attaching the wsdl that is working fine for me.\r\n\r\n~~~\r\n&lt;wsdl:definitions xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:soap=&quot;http://schemas.xmlsoap.org/wsdl/soap/&quot; xmlns:wsdl=&quot;http://schemas.xmlsoap.org/wsdl/&quot; xmlns:ns1=&quot;http://services.reactivestax.io/&quot; name=&quot;UberPortType&quot; targetNamespace=&quot;http://services.reactivestax.io/&quot;&gt;\r\n    &lt;wsdl:types&gt;\r\n        &lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:tns=&quot;http://services.reactivestax.io/&quot; elementFormDefault=&quot;unqualified&quot; targetNamespace=&quot;http://services.reactivestax.io/&quot; version=&quot;1.0&quot;&gt;\r\n            &lt;xs:element name=&quot;updateRequest&quot;&gt;\r\n                &lt;xs:complexType&gt;\r\n                    &lt;xs:sequence&gt;\r\n                        &lt;xs:element minOccurs=&quot;0&quot; name=&quot;id&quot; type=&quot;xs:long&quot;/&gt;\r\n                    &lt;/xs:sequence&gt;\r\n                &lt;/xs:complexType&gt;\r\n            &lt;/xs:element&gt;\r\n\r\n            &lt;xs:element name=&quot;updateResponse&quot;&gt;\r\n                &lt;xs:complexType&gt;\r\n                    &lt;xs:sequence&gt;\r\n                        &lt;xs:element minOccurs=&quot;0&quot; name=&quot;result&quot; type=&quot;tns:orders&quot;/&gt;\r\n                    &lt;/xs:sequence&gt;\r\n                &lt;/xs:complexType&gt;\r\n            &lt;/xs:element&gt;\r\n\r\n\r\n            &lt;xs:complexType name=&quot;orders&quot;&gt;\r\n                &lt;xs:sequence&gt;\r\n                    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;customerId&quot; type=&quot;xs:long&quot;/&gt;\r\n                    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;driverId&quot; type=&quot;xs:long&quot;/&gt;\r\n                    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;orderId&quot; type=&quot;xs:long&quot;/&gt;\r\n                    &lt;xs:element maxOccurs=&quot;unbounded&quot; minOccurs=&quot;0&quot; name=&quot;orderList&quot; nillable=&quot;true&quot; type=&quot;tns:orderDish&quot;/&gt;\r\n                    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;orderPrice&quot; type=&quot;xs:double&quot;/&gt;\r\n                    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;orderStatus&quot; type=&quot;tns:orderStatus&quot;/&gt;\r\n                    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;paymentStatus&quot; type=&quot;xs:string&quot;/&gt;\r\n                &lt;/xs:sequence&gt;\r\n            &lt;/xs:complexType&gt;\r\n            &lt;xs:complexType name=&quot;orderDish&quot;&gt;\r\n                &lt;xs:sequence&gt;\r\n                    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;customerId&quot; type=&quot;xs:long&quot;/&gt;\r\n                    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;dishId&quot; type=&quot;xs:long&quot;/&gt;\r\n                    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;dishPrice&quot; type=&quot;xs:double&quot;/&gt;\r\n                    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;id&quot; type=&quot;xs:long&quot;/&gt;\r\n                &lt;/xs:sequence&gt;\r\n            &lt;/xs:complexType&gt;\r\n            &lt;xs:simpleType name=&quot;orderStatus&quot;&gt;\r\n                &lt;xs:restriction base=&quot;xs:string&quot;&gt;\r\n                    &lt;xs:enumeration value=&quot;ORDER_STARTED&quot;/&gt;\r\n                    &lt;xs:enumeration value=&quot;ORDER_ACCEPTED&quot;/&gt;\r\n                    &lt;xs:enumeration value=&quot;ORDER_READY&quot;/&gt;\r\n                    &lt;xs:enumeration value=&quot;ORDER_PICKED&quot;/&gt;\r\n                    &lt;xs:enumeration value=&quot;ORDER_DELIVERED&quot;/&gt;\r\n                &lt;/xs:restriction&gt;\r\n            &lt;/xs:simpleType&gt;\r\n        &lt;/xs:schema&gt;\r\n    &lt;/wsdl:types&gt;\r\n    &lt;wsdl:message name=&quot;updateStatusResponse&quot;&gt;\r\n        &lt;wsdl:part element=&quot;ns1:updateResponse&quot; name=&quot;parameters&quot;&gt; &lt;/wsdl:part&gt;\r\n    &lt;/wsdl:message&gt;\r\n    &lt;wsdl:message name=&quot;updateStatus&quot;&gt;\r\n        &lt;wsdl:part element=&quot;ns1:updateRequest&quot; name=&quot;parameters&quot;&gt; &lt;/wsdl:part&gt;\r\n    &lt;/wsdl:message&gt;\r\n    &lt;wsdl:portType name=&quot;UberPortType&quot;&gt;\r\n        &lt;wsdl:operation name=&quot;updateStatus&quot;&gt;\r\n            &lt;wsdl:input message=&quot;ns1:updateStatus&quot; name=&quot;updateStatus&quot;&gt; &lt;/wsdl:input&gt;\r\n            &lt;wsdl:output message=&quot;ns1:updateStatusResponse&quot; name=&quot;updateStatusResponse&quot;&gt; &lt;/wsdl:output&gt;\r\n        &lt;/wsdl:operation&gt;\r\n    &lt;/wsdl:portType&gt;\r\n\r\n    &lt;wsdl:binding name=&quot;OrderStatusUpdateServiceSoapBinding&quot; type=&quot;ns1:UberPortType&quot;&gt;\r\n        &lt;soap:binding style=&quot;document&quot; transport=&quot;http://schemas.xmlsoap.org/soap/http&quot;/&gt;\r\n        &lt;wsdl:operation name=&quot;updateStatus&quot;&gt;\r\n            &lt;soap:operation soapAction=&quot;urn:updateStatus&quot; style=&quot;document&quot;/&gt;\r\n            &lt;wsdl:input name=&quot;updateStatus&quot;&gt;\r\n                &lt;soap:body use=&quot;literal&quot;/&gt;\r\n            &lt;/wsdl:input&gt;\r\n            &lt;wsdl:output name=&quot;updateStatusResponse&quot;&gt;\r\n                &lt;soap:body use=&quot;literal&quot;/&gt;\r\n            &lt;/wsdl:output&gt;\r\n        &lt;/wsdl:operation&gt;\r\n    &lt;/wsdl:binding&gt;\r\n    &lt;wsdl:service name=&quot;OrderStatusUpdateService&quot;&gt;\r\n        &lt;wsdl:port binding=&quot;tns:OrderStatusUpdateServiceSoapBinding&quot; name=&quot;OrderStatusUpdatePort&quot;&gt;\r\n            &lt;soap:address location=&quot;http://localhost:8091/service/uber-springws&quot;/&gt;\r\n        &lt;/wsdl:port&gt;\r\n    &lt;/wsdl:service&gt;\r\n\r\n\r\n&lt;/wsdl:definitions&gt;\r\n~~~","title":"No adapter for endpoint; Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?","body":"<p>I was also facing the same issue. Attaching the wsdl that is working fine for me.</p>\n<pre><code>&lt;wsdl:definitions xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:soap=&quot;http://schemas.xmlsoap.org/wsdl/soap/&quot; xmlns:wsdl=&quot;http://schemas.xmlsoap.org/wsdl/&quot; xmlns:ns1=&quot;http://services.reactivestax.io/&quot; name=&quot;UberPortType&quot; targetNamespace=&quot;http://services.reactivestax.io/&quot;&gt;\n    &lt;wsdl:types&gt;\n        &lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:tns=&quot;http://services.reactivestax.io/&quot; elementFormDefault=&quot;unqualified&quot; targetNamespace=&quot;http://services.reactivestax.io/&quot; version=&quot;1.0&quot;&gt;\n            &lt;xs:element name=&quot;updateRequest&quot;&gt;\n                &lt;xs:complexType&gt;\n                    &lt;xs:sequence&gt;\n                        &lt;xs:element minOccurs=&quot;0&quot; name=&quot;id&quot; type=&quot;xs:long&quot;/&gt;\n                    &lt;/xs:sequence&gt;\n                &lt;/xs:complexType&gt;\n            &lt;/xs:element&gt;\n\n            &lt;xs:element name=&quot;updateResponse&quot;&gt;\n                &lt;xs:complexType&gt;\n                    &lt;xs:sequence&gt;\n                        &lt;xs:element minOccurs=&quot;0&quot; name=&quot;result&quot; type=&quot;tns:orders&quot;/&gt;\n                    &lt;/xs:sequence&gt;\n                &lt;/xs:complexType&gt;\n            &lt;/xs:element&gt;\n\n\n            &lt;xs:complexType name=&quot;orders&quot;&gt;\n                &lt;xs:sequence&gt;\n                    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;customerId&quot; type=&quot;xs:long&quot;/&gt;\n                    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;driverId&quot; type=&quot;xs:long&quot;/&gt;\n                    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;orderId&quot; type=&quot;xs:long&quot;/&gt;\n                    &lt;xs:element maxOccurs=&quot;unbounded&quot; minOccurs=&quot;0&quot; name=&quot;orderList&quot; nillable=&quot;true&quot; type=&quot;tns:orderDish&quot;/&gt;\n                    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;orderPrice&quot; type=&quot;xs:double&quot;/&gt;\n                    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;orderStatus&quot; type=&quot;tns:orderStatus&quot;/&gt;\n                    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;paymentStatus&quot; type=&quot;xs:string&quot;/&gt;\n                &lt;/xs:sequence&gt;\n            &lt;/xs:complexType&gt;\n            &lt;xs:complexType name=&quot;orderDish&quot;&gt;\n                &lt;xs:sequence&gt;\n                    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;customerId&quot; type=&quot;xs:long&quot;/&gt;\n                    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;dishId&quot; type=&quot;xs:long&quot;/&gt;\n                    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;dishPrice&quot; type=&quot;xs:double&quot;/&gt;\n                    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;id&quot; type=&quot;xs:long&quot;/&gt;\n                &lt;/xs:sequence&gt;\n            &lt;/xs:complexType&gt;\n            &lt;xs:simpleType name=&quot;orderStatus&quot;&gt;\n                &lt;xs:restriction base=&quot;xs:string&quot;&gt;\n                    &lt;xs:enumeration value=&quot;ORDER_STARTED&quot;/&gt;\n                    &lt;xs:enumeration value=&quot;ORDER_ACCEPTED&quot;/&gt;\n                    &lt;xs:enumeration value=&quot;ORDER_READY&quot;/&gt;\n                    &lt;xs:enumeration value=&quot;ORDER_PICKED&quot;/&gt;\n                    &lt;xs:enumeration value=&quot;ORDER_DELIVERED&quot;/&gt;\n                &lt;/xs:restriction&gt;\n            &lt;/xs:simpleType&gt;\n        &lt;/xs:schema&gt;\n    &lt;/wsdl:types&gt;\n    &lt;wsdl:message name=&quot;updateStatusResponse&quot;&gt;\n        &lt;wsdl:part element=&quot;ns1:updateResponse&quot; name=&quot;parameters&quot;&gt; &lt;/wsdl:part&gt;\n    &lt;/wsdl:message&gt;\n    &lt;wsdl:message name=&quot;updateStatus&quot;&gt;\n        &lt;wsdl:part element=&quot;ns1:updateRequest&quot; name=&quot;parameters&quot;&gt; &lt;/wsdl:part&gt;\n    &lt;/wsdl:message&gt;\n    &lt;wsdl:portType name=&quot;UberPortType&quot;&gt;\n        &lt;wsdl:operation name=&quot;updateStatus&quot;&gt;\n            &lt;wsdl:input message=&quot;ns1:updateStatus&quot; name=&quot;updateStatus&quot;&gt; &lt;/wsdl:input&gt;\n            &lt;wsdl:output message=&quot;ns1:updateStatusResponse&quot; name=&quot;updateStatusResponse&quot;&gt; &lt;/wsdl:output&gt;\n        &lt;/wsdl:operation&gt;\n    &lt;/wsdl:portType&gt;\n\n    &lt;wsdl:binding name=&quot;OrderStatusUpdateServiceSoapBinding&quot; type=&quot;ns1:UberPortType&quot;&gt;\n        &lt;soap:binding style=&quot;document&quot; transport=&quot;http://schemas.xmlsoap.org/soap/http&quot;/&gt;\n        &lt;wsdl:operation name=&quot;updateStatus&quot;&gt;\n            &lt;soap:operation soapAction=&quot;urn:updateStatus&quot; style=&quot;document&quot;/&gt;\n            &lt;wsdl:input name=&quot;updateStatus&quot;&gt;\n                &lt;soap:body use=&quot;literal&quot;/&gt;\n            &lt;/wsdl:input&gt;\n            &lt;wsdl:output name=&quot;updateStatusResponse&quot;&gt;\n                &lt;soap:body use=&quot;literal&quot;/&gt;\n            &lt;/wsdl:output&gt;\n        &lt;/wsdl:operation&gt;\n    &lt;/wsdl:binding&gt;\n    &lt;wsdl:service name=&quot;OrderStatusUpdateService&quot;&gt;\n        &lt;wsdl:port binding=&quot;tns:OrderStatusUpdateServiceSoapBinding&quot; name=&quot;OrderStatusUpdatePort&quot;&gt;\n            &lt;soap:address location=&quot;http://localhost:8091/service/uber-springws&quot;/&gt;\n        &lt;/wsdl:port&gt;\n    &lt;/wsdl:service&gt;\n\n\n&lt;/wsdl:definitions&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20080813,"reputation":29,"user_id":14723490,"display_name":"Shubham Mokashi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686028217,"creation_date":1686028217,"answer_id":76411588,"question_id":14390474,"body_markdown":"What creating a problem for me is imports :\r\n\r\nold imports are from javax\r\n\r\n    import javax.xml.bind.annotation.XmlAccessType;\r\n    import javax.xml.bind.annotation.XmlAccessorType;\r\n    import javax.xml.bind.annotation.XmlElement;\r\n    import javax.xml.bind.annotation.XmlRootElement;\r\n    import javax.xml.bind.annotation.XmlType;\r\n\r\nchanged imports are from jakarta:\r\n\r\n    import jakarta.xml.bind.annotation.XmlAccessType;\r\n    import jakarta.xml.bind.annotation.XmlAccessorType;\r\n    import jakarta.xml.bind.annotation.XmlElement;\r\n    import jakarta.xml.bind.annotation.XmlRootElement;\r\n    import jakarta.xml.bind.annotation.XmlType;\r\n\r\njust by replacing the javax to jakarta it worked for me...","title":"No adapter for endpoint; Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?","body":"<p>What creating a problem for me is imports :</p>\n<p>old imports are from javax</p>\n<pre><code>import javax.xml.bind.annotation.XmlAccessType;\nimport javax.xml.bind.annotation.XmlAccessorType;\nimport javax.xml.bind.annotation.XmlElement;\nimport javax.xml.bind.annotation.XmlRootElement;\nimport javax.xml.bind.annotation.XmlType;\n</code></pre>\n<p>changed imports are from jakarta:</p>\n<pre><code>import jakarta.xml.bind.annotation.XmlAccessType;\nimport jakarta.xml.bind.annotation.XmlAccessorType;\nimport jakarta.xml.bind.annotation.XmlElement;\nimport jakarta.xml.bind.annotation.XmlRootElement;\nimport jakarta.xml.bind.annotation.XmlType;\n</code></pre>\n<p>just by replacing the javax to jakarta it worked for me...</p>\n"},{"tags":[],"owner":{"account_id":3111257,"reputation":97,"user_id":2632932,"display_name":"Varun"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687800726,"creation_date":1687800726,"answer_id":76558984,"question_id":14390474,"body_markdown":"In my case, using jakarta.xml.bind.JAXBElement in place of javax.xml.bind.JAXBElement for both @ResponsePayload and @RequestPayload worked.","title":"No adapter for endpoint; Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?","body":"<p>In my case, using jakarta.xml.bind.JAXBElement in place of javax.xml.bind.JAXBElement for both @ResponsePayload and @RequestPayload worked.</p>\n"}],"owner":{"account_id":2258155,"reputation":321,"user_id":1988865,"display_name":"user1988865"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39339,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"answer_count":12,"score":32,"last_activity_date":1687800726,"creation_date":1358468018,"question_id":14390474,"body_markdown":"I am struggling with an Spring-WS with JMS example. I set the Spring-WS and JMS wiring as per the Spring recommendations. But I kept getting following error. I dont know how to bypass this issue, any help will be highly appreciated:\r\n\r\n\r\n    [org.springframework.ws.soap.server.endpoint.SoapFaultAnnotationExceptionResolver] - \r\n    Resolving exception from endpoint \r\n    [org.springframework.ws.samples.mtom.ws.ImageRepositoryEndpoint@1c8b0b1]: \r\n    java.lang.IllegalStateException: No adapter for endpoint \r\n    [org.springframework.ws.samples.mtom.ws.ImageRepositoryEndpoint@1c8b0b1]: \r\n    Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?\r\n\r\n    [org.springframework.ws.soap.server.endpoint.SimpleSoapExceptionResolver] - Resolving exception from endpoint\r\n    [org.springframework.ws.samples.mtom.ws.ImageRepositoryEndpoint@1c8b0b1]: \r\n    java.lang.IllegalStateException: No adapter for endpoint [org.springframework.ws.samples.mtom.ws.ImageRepositoryEndpoint@1c8b0b1]: \r\n    Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?\r\n    \r\n    [org.springframework.ws.soap.server.SoapMessageDispatcher] - \r\n    Endpoint invocation resulted in exception - responding with Fault\r\n    java.lang.IllegalStateException: No adapter for endpoint  [org.springframework.ws.samples.mtom.ws.ImageRepositoryEndpoint@1c8b0b1]: \r\n    Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?\r\n\r\n\r\nMy Web Service Wiring is\r\n\r\n\r\n    &lt;bean id=&quot;imageRepository&quot;\r\n        class=&quot;org.springframework.ws.samples.mtom.service.StubImageRepository&quot; /&gt;\r\n\r\n    &lt;!-- JMS WIRING TO WS START --&gt;\r\n    &lt;bean id=&quot;messageFactory&quot; class=&quot;org.springframework.ws.soap.saaj.SaajSoapMessageFactory&quot; /&gt;\r\n\r\n    &lt;bean id=&quot;messageDispatcher&quot;\r\n        class=&quot;org.springframework.ws.soap.server.SoapMessageDispatcher&quot;&gt;\r\n        &lt;property name=&quot;endpointMappings&quot;&gt;\r\n            &lt;bean\r\n                class=&quot;org.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping&quot;&gt;\r\n                &lt;property name=&quot;defaultEndpoint&quot;&gt;\r\n                    &lt;bean\r\n                        class=&quot;org.springframework.ws.samples.mtom.ws.ImageRepositoryEndpoint&quot;&gt;\r\n                        &lt;constructor-arg ref=&quot;imageRepository&quot; /&gt;\r\n                    &lt;/bean&gt;\r\n                &lt;/property&gt;\r\n            &lt;/bean&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\n    &lt;bean\r\n        class=&quot;org.springframework.jms.listener.DefaultMessageListenerContainer&quot;&gt;\r\n        &lt;property name=&quot;connectionFactory&quot; ref=&quot;jmsConnectionFactory&quot; /&gt;\r\n        &lt;property name=&quot;destinationName&quot; value=&quot;WS.JMS.EXAMPLE.V1.IMAGE.REPO.REQUEST&quot; /&gt;\r\n        &lt;property name=&quot;messageListener&quot;&gt;\r\n            &lt;bean\r\n                class=&quot;org.springframework.ws.transport.jms.WebServiceMessageListener&quot;&gt;\r\n                &lt;property name=&quot;messageFactory&quot; ref=&quot;messageFactory&quot; /&gt;\r\n                &lt;property name=&quot;messageReceiver&quot; ref=&quot;messageDispatcher&quot; /&gt;\r\n            &lt;/bean&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\n\r\nMy End point code is\r\n\r\n\r\n    @PayloadRoot(localPart = &quot;StoreImageRequest&quot;, namespace = &quot;http://www.springframework.org/spring-ws/samples/mtom&quot;)\r\n    @ResponsePayload\r\n    public String  store(@RequestPayload JAXBElement&lt;Image&gt; requestElement) throws IOException {\r\n        Image request = requestElement.getValue();\r\n        return imageRepository.storeImage(request.getName());\r\n    }\r\n\r\nMy Schema is\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;schema xmlns=&quot;http://www.w3.org/2001/XMLSchema&quot; targetNamespace=&quot;http://www.springframework.org/spring-ws/samples/mtom&quot;\r\n        xmlns:tns=&quot;http://www.springframework.org/spring-ws/samples/mtom&quot;\r\n        xmlns:xmime=&quot;http://www.w3.org/2005/05/xmlmime&quot; elementFormDefault=&quot;qualified&quot;&gt;\r\n        &lt;element name=&quot;StoreImageRequest&quot; type=&quot;tns:Image&quot;/&gt;\r\n        &lt;element name=&quot;LoadImageRequest&quot; type=&quot;string&quot;/&gt;\r\n        &lt;element name=&quot;LoadImageResponse&quot; type=&quot;tns:Image&quot;/&gt;\r\n        &lt;complexType name=&quot;Image&quot;&gt;\r\n            &lt;sequence&gt;\r\n                &lt;element name=&quot;name&quot; type=&quot;string&quot;/&gt;\r\n            &lt;/sequence&gt;\r\n        &lt;/complexType&gt;\r\n    &lt;/schema&gt;\r\n\r\n\r\nMy Client Request is\r\n\r\n    &lt;ns2:StoreImageRequest xmlns:ns2=&quot;http://www.springframework.org/spring-ws/samples/mtom&quot;&gt;&lt;ns2:name&gt;spring-ws-logo.png&lt;/ns2:name&gt;&lt;/ns2:StoreImageRequest&gt;\r\n\r\nCan some one help?\r\n","title":"No adapter for endpoint; Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?","body":"<p>I am struggling with an Spring-WS with JMS example. I set the Spring-WS and JMS wiring as per the Spring recommendations. But I kept getting following error. I dont know how to bypass this issue, any help will be highly appreciated:</p>\n\n<pre><code>[org.springframework.ws.soap.server.endpoint.SoapFaultAnnotationExceptionResolver] - \nResolving exception from endpoint \n[org.springframework.ws.samples.mtom.ws.ImageRepositoryEndpoint@1c8b0b1]: \njava.lang.IllegalStateException: No adapter for endpoint \n[org.springframework.ws.samples.mtom.ws.ImageRepositoryEndpoint@1c8b0b1]: \nIs your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?\n\n[org.springframework.ws.soap.server.endpoint.SimpleSoapExceptionResolver] - Resolving exception from endpoint\n[org.springframework.ws.samples.mtom.ws.ImageRepositoryEndpoint@1c8b0b1]: \njava.lang.IllegalStateException: No adapter for endpoint [org.springframework.ws.samples.mtom.ws.ImageRepositoryEndpoint@1c8b0b1]: \nIs your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?\n\n[org.springframework.ws.soap.server.SoapMessageDispatcher] - \nEndpoint invocation resulted in exception - responding with Fault\njava.lang.IllegalStateException: No adapter for endpoint  [org.springframework.ws.samples.mtom.ws.ImageRepositoryEndpoint@1c8b0b1]: \nIs your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?\n</code></pre>\n\n<p>My Web Service Wiring is</p>\n\n<pre><code>&lt;bean id=\"imageRepository\"\n    class=\"org.springframework.ws.samples.mtom.service.StubImageRepository\" /&gt;\n\n&lt;!-- JMS WIRING TO WS START --&gt;\n&lt;bean id=\"messageFactory\" class=\"org.springframework.ws.soap.saaj.SaajSoapMessageFactory\" /&gt;\n\n&lt;bean id=\"messageDispatcher\"\n    class=\"org.springframework.ws.soap.server.SoapMessageDispatcher\"&gt;\n    &lt;property name=\"endpointMappings\"&gt;\n        &lt;bean\n            class=\"org.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping\"&gt;\n            &lt;property name=\"defaultEndpoint\"&gt;\n                &lt;bean\n                    class=\"org.springframework.ws.samples.mtom.ws.ImageRepositoryEndpoint\"&gt;\n                    &lt;constructor-arg ref=\"imageRepository\" /&gt;\n                &lt;/bean&gt;\n            &lt;/property&gt;\n        &lt;/bean&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean\n    class=\"org.springframework.jms.listener.DefaultMessageListenerContainer\"&gt;\n    &lt;property name=\"connectionFactory\" ref=\"jmsConnectionFactory\" /&gt;\n    &lt;property name=\"destinationName\" value=\"WS.JMS.EXAMPLE.V1.IMAGE.REPO.REQUEST\" /&gt;\n    &lt;property name=\"messageListener\"&gt;\n        &lt;bean\n            class=\"org.springframework.ws.transport.jms.WebServiceMessageListener\"&gt;\n            &lt;property name=\"messageFactory\" ref=\"messageFactory\" /&gt;\n            &lt;property name=\"messageReceiver\" ref=\"messageDispatcher\" /&gt;\n        &lt;/bean&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>My End point code is</p>\n\n<pre><code>@PayloadRoot(localPart = \"StoreImageRequest\", namespace = \"http://www.springframework.org/spring-ws/samples/mtom\")\n@ResponsePayload\npublic String  store(@RequestPayload JAXBElement&lt;Image&gt; requestElement) throws IOException {\n    Image request = requestElement.getValue();\n    return imageRepository.storeImage(request.getName());\n}\n</code></pre>\n\n<p>My Schema is</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;schema xmlns=\"http://www.w3.org/2001/XMLSchema\" targetNamespace=\"http://www.springframework.org/spring-ws/samples/mtom\"\n    xmlns:tns=\"http://www.springframework.org/spring-ws/samples/mtom\"\n    xmlns:xmime=\"http://www.w3.org/2005/05/xmlmime\" elementFormDefault=\"qualified\"&gt;\n    &lt;element name=\"StoreImageRequest\" type=\"tns:Image\"/&gt;\n    &lt;element name=\"LoadImageRequest\" type=\"string\"/&gt;\n    &lt;element name=\"LoadImageResponse\" type=\"tns:Image\"/&gt;\n    &lt;complexType name=\"Image\"&gt;\n        &lt;sequence&gt;\n            &lt;element name=\"name\" type=\"string\"/&gt;\n        &lt;/sequence&gt;\n    &lt;/complexType&gt;\n&lt;/schema&gt;\n</code></pre>\n\n<p>My Client Request is</p>\n\n<pre><code>&lt;ns2:StoreImageRequest xmlns:ns2=\"http://www.springframework.org/spring-ws/samples/mtom\"&gt;&lt;ns2:name&gt;spring-ws-logo.png&lt;/ns2:name&gt;&lt;/ns2:StoreImageRequest&gt;\n</code></pre>\n\n<p>Can some one help?</p>\n"},{"tags":["java","android","security","jwt"],"answers":[{"comments":[{"owner":{"account_id":10516436,"reputation":653,"user_id":7752551,"display_name":"Adrien H"},"score":0,"creation_date":1687800055,"post_id":35000567,"comment_id":134984323,"body_markdown":"It won&#39;t work if the JWT is expired, which might be desirable or not, depending on your use case.","body":"It won&#39;t work if the JWT is expired, which might be desirable or not, depending on your use case."}],"tags":[],"owner":{"account_id":4378093,"reputation":869,"user_id":3570570,"display_name":"Delta"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1453749564,"creation_date":1453749564,"answer_id":35000567,"question_id":34998859,"body_markdown":"Well the answer was pretty simple although in my opinion should be in the framework. But a simple non signed JWT still has the 2 required periods in it but there is nothing after the last one, so i split my JWT on the periods and combined the first and second one with periods and put a period at the end.\r\n\r\n    String[] splitToken = result.Value.Content.AuthorizationJWTToken.split(&quot;\\\\.&quot;);\r\n\tJwt parsedToken = Jwts.parser().parse(splitToken[0] + &quot;.&quot; + splitToken[1] + &quot;.&quot;);\r\n\t\t\t\t\t\r\n\r\nThis was usings the https://github.com/jwtk/jjwt library.","title":"Android JWT parsing payload/claims when signed","body":"<p>Well the answer was pretty simple although in my opinion should be in the framework. But a simple non signed JWT still has the 2 required periods in it but there is nothing after the last one, so i split my JWT on the periods and combined the first and second one with periods and put a period at the end.</p>\n\n<pre><code>String[] splitToken = result.Value.Content.AuthorizationJWTToken.split(\"\\\\.\");\nJwt parsedToken = Jwts.parser().parse(splitToken[0] + \".\" + splitToken[1] + \".\");\n</code></pre>\n\n<p>This was usings the <a href=\"https://github.com/jwtk/jjwt\" rel=\"nofollow\">https://github.com/jwtk/jjwt</a> library.</p>\n"},{"tags":[],"owner":{"account_id":6729166,"reputation":2331,"user_id":5186159,"display_name":"Brian Campbell"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1453815014,"creation_date":1453815014,"answer_id":35014952,"question_id":34998859,"body_markdown":"You can use [jose4j&#39;s JWT consumer][1] to do parsing only and not check the claims or signature. Something like the following will parse the token and compare the expiration time to the current time to see if it&#39;s expired.    \r\n\r\n    String jwt = &quot;eyJhbGciOiJIUzI1NiJ9&quot; +\r\n            &quot;.eyJzdWIiOiIxMjM0NTY3ODkwIiwiZXhwIjoxNDUzODE0NjA0LCJuYW1lIjoiSm9obiBEb2UifQ&quot; +\r\n            &quot;.IXcDDLXEpGN9Po5C-Mz88jUCNYrHxu6TVJLavf0NgT8&quot;;\r\n\r\n    JwtConsumer consumer = new JwtConsumerBuilder()\r\n            .setSkipAllValidators()\r\n            .setDisableRequireSignature()\r\n            .setSkipSignatureVerification()\r\n            .build();\r\n    JwtClaims claims = consumer.processToClaims(jwt);\r\n    NumericDate expirationTime = claims.getExpirationTime();\r\n\r\n    if (NumericDate.now().isAfter(expirationTime))\r\n    {\r\n        System.out.println(&quot;Token expired at &quot; + expirationTime);\r\n    }\r\n    else\r\n    {\r\n        System.out.println(&quot;Token is still good until &quot; + expirationTime);\r\n    }\r\n\r\n\r\n  [1]: https://bitbucket.org/b_c/jose4j/wiki/JWT%20Examples","title":"Android JWT parsing payload/claims when signed","body":"<p>You can use <a href=\"https://bitbucket.org/b_c/jose4j/wiki/JWT%20Examples\" rel=\"nofollow\">jose4j's JWT consumer</a> to do parsing only and not check the claims or signature. Something like the following will parse the token and compare the expiration time to the current time to see if it's expired.    </p>\n\n<pre><code>String jwt = \"eyJhbGciOiJIUzI1NiJ9\" +\n        \".eyJzdWIiOiIxMjM0NTY3ODkwIiwiZXhwIjoxNDUzODE0NjA0LCJuYW1lIjoiSm9obiBEb2UifQ\" +\n        \".IXcDDLXEpGN9Po5C-Mz88jUCNYrHxu6TVJLavf0NgT8\";\n\nJwtConsumer consumer = new JwtConsumerBuilder()\n        .setSkipAllValidators()\n        .setDisableRequireSignature()\n        .setSkipSignatureVerification()\n        .build();\nJwtClaims claims = consumer.processToClaims(jwt);\nNumericDate expirationTime = claims.getExpirationTime();\n\nif (NumericDate.now().isAfter(expirationTime))\n{\n    System.out.println(\"Token expired at \" + expirationTime);\n}\nelse\n{\n    System.out.println(\"Token is still good until \" + expirationTime);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11300620,"reputation":634,"user_id":8286652,"display_name":"Ujjwal Jung Thapa"},"score":0,"creation_date":1557740938,"post_id":41782048,"comment_id":98853173,"body_markdown":"yes this works. but instead of                                          \nJwt&lt;Header,Claims&gt; untrusted = Jwts.parser().parseClaimsJwt(withoutSignature);     we can use\nClaims untrusted = Jwts.parser().parseClaimsJwt(withoutSignature).getBody();","body":"yes this works. but instead of                                           Jwt&lt;Header,Claims&gt; untrusted = Jwts.parser().parseClaimsJwt(withoutSignature);     we can use Claims untrusted = Jwts.parser().parseClaimsJwt(withoutSignature).getBody();"}],"tags":[],"owner":{"account_id":4066266,"reputation":2101,"user_id":3341089,"display_name":"oguzhan"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1485017959,"creation_date":1485017959,"answer_id":41782048,"question_id":34998859,"body_markdown":"If you wanna parse signatured text without using signature :\r\n\r\n1- add below dependency :\r\n\r\n    //JWT\r\n    compile &#39;io.jsonwebtoken:jjwt:0.7.0&#39;\r\n\r\n2 - Add below imports :\r\n \r\n\r\n    import io.jsonwebtoken.Claims;\r\n    import io.jsonwebtoken.Header;\r\n    import io.jsonwebtoken.Jwt;\r\n    import io.jsonwebtoken.Jwts;\r\n\r\n3- Use below code block :\r\n\r\n    //ref : https://github.com/jwtk/jjwt/issues/135\r\n    //you can put your signatured text instead of jws variable.\r\n    String jws = &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ&quot;;\r\n    int i = jws.lastIndexOf(&#39;.&#39;)\r\n    String withoutSignature = jws.substring(0, i+1);\r\n    Jwt&lt;Header,Claims&gt; untrusted = Jwts.parser().parseClaimsJwt(withoutSignature);\r\n    /*untrusted.getBody().getSubject();\r\n      untrusted.getBody().getExpiration();\r\n      etc.\r\n    */","title":"Android JWT parsing payload/claims when signed","body":"<p>If you wanna parse signatured text without using signature :</p>\n\n<p>1- add below dependency :</p>\n\n<pre><code>//JWT\ncompile 'io.jsonwebtoken:jjwt:0.7.0'\n</code></pre>\n\n<p>2 - Add below imports :</p>\n\n<pre><code>import io.jsonwebtoken.Claims;\nimport io.jsonwebtoken.Header;\nimport io.jsonwebtoken.Jwt;\nimport io.jsonwebtoken.Jwts;\n</code></pre>\n\n<p>3- Use below code block :</p>\n\n<pre><code>//ref : https://github.com/jwtk/jjwt/issues/135\n//you can put your signatured text instead of jws variable.\nString jws = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ\";\nint i = jws.lastIndexOf('.')\nString withoutSignature = jws.substring(0, i+1);\nJwt&lt;Header,Claims&gt; untrusted = Jwts.parser().parseClaimsJwt(withoutSignature);\n/*untrusted.getBody().getSubject();\n  untrusted.getBody().getExpiration();\n  etc.\n*/\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5261108,"reputation":364,"user_id":4202629,"display_name":"Rodrigo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1580323581,"creation_date":1580323581,"answer_id":59973659,"question_id":34998859,"body_markdown":"***parseClaimsJwt()*** method of Jwt will require a signature. So, right way to do it is:\r\n\r\n``` java\r\nString jws = &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ&quot;;\r\nint i = jws.lastIndexOf(&#39;.&#39;)\r\nString withoutSignature = jws.substring(0, i+1);\r\n\r\nClaims claims = (Claims) = Jwts.parser().parse(withoutSignature).getBody();\r\n```","title":"Android JWT parsing payload/claims when signed","body":"<p><strong><em>parseClaimsJwt()</em></strong> method of Jwt will require a signature. So, right way to do it is:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>String jws = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ\";\nint i = jws.lastIndexOf('.')\nString withoutSignature = jws.substring(0, i+1);\n\nClaims claims = (Claims) = Jwts.parser().parse(withoutSignature).getBody();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10516436,"reputation":653,"user_id":7752551,"display_name":"Adrien H"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687800599,"creation_date":1687799963,"answer_id":76558923,"question_id":34998859,"body_markdown":"A JWT is just a pair of base 64 encoded JSON objects followed by a signature.\r\n\r\nYou can simply:\r\n\r\n 1. Extract the header or claims, delimited by the &#39;.&#39; character\r\n 2. Decode the base 64 string into a byte[]\r\n 3. Deserialize the byte[] into a Map or POJO\r\n\r\nFor example, here I&#39;m interested in reading the &quot;sub&quot; claim of a JWT that failed validation:\r\n\r\n    \r\n    import com.fasterxml.jackson.core.type.TypeReference;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;    \r\n    import io.jsonwebtoken.io.Decoders;\r\n    // ...\r\n    private static final ObjectMapper MAPPER = new ObjectMapper();\r\n    // ...\r\n\r\n    /**\r\n     * Returns the username claimed in the JWT if possible.\r\n     *\r\n     * @param jwt an invalid jwt, possibly malformed\r\n     * @return the value of the &quot;sub&quot; claim if the jwt was parsable, empty otherwise\r\n     */\r\n    public Optional&lt;String&gt; untrustedUsername(String jwt) {\r\n        var claimsBase64 = jwt.substring(jwt.indexOf(&#39;.&#39;) + 1, jwt.lastIndexOf(&#39;.&#39;));\r\n\r\n        try {\r\n            var claimsByte = Decoders.BASE64.decode(claimsBase64);\r\n            var claimsMap = MAPPER.readValue(claimsByte, new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {\r\n            });\r\n            return Optional.of((String) claimsMap.get(&quot;sub&quot;));\r\n        } catch (Exception exception) {\r\n            return Optional.empty();\r\n        }\r\n    }\r\n\r\nI think it&#39;s a good idea that such code isn&#39;t integrated in a JWT library to avoid confusing users with an insecure API.","title":"Android JWT parsing payload/claims when signed","body":"<p>A JWT is just a pair of base 64 encoded JSON objects followed by a signature.</p>\n<p>You can simply:</p>\n<ol>\n<li>Extract the header or claims, delimited by the '.' character</li>\n<li>Decode the base 64 string into a byte[]</li>\n<li>Deserialize the byte[] into a Map or POJO</li>\n</ol>\n<p>For example, here I'm interested in reading the &quot;sub&quot; claim of a JWT that failed validation:</p>\n<pre><code>import com.fasterxml.jackson.core.type.TypeReference;\nimport com.fasterxml.jackson.databind.ObjectMapper;    \nimport io.jsonwebtoken.io.Decoders;\n// ...\nprivate static final ObjectMapper MAPPER = new ObjectMapper();\n// ...\n\n/**\n * Returns the username claimed in the JWT if possible.\n *\n * @param jwt an invalid jwt, possibly malformed\n * @return the value of the &quot;sub&quot; claim if the jwt was parsable, empty otherwise\n */\npublic Optional&lt;String&gt; untrustedUsername(String jwt) {\n    var claimsBase64 = jwt.substring(jwt.indexOf('.') + 1, jwt.lastIndexOf('.'));\n\n    try {\n        var claimsByte = Decoders.BASE64.decode(claimsBase64);\n        var claimsMap = MAPPER.readValue(claimsByte, new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {\n        });\n        return Optional.of((String) claimsMap.get(&quot;sub&quot;));\n    } catch (Exception exception) {\n        return Optional.empty();\n    }\n}\n</code></pre>\n<p>I think it's a good idea that such code isn't integrated in a JWT library to avoid confusing users with an insecure API.</p>\n"}],"owner":{"account_id":4378093,"reputation":869,"user_id":3570570,"display_name":"Delta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9687,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":35000567,"answer_count":5,"score":5,"last_activity_date":1687800599,"creation_date":1453743862,"question_id":34998859,"body_markdown":"I have a signed JWT String that i get from the server. I do not know the key or rather I don&#39;t want to put the key on the client/device.\r\n\r\nWhen using this site with my token: https://jwt.io/ I get the desired result it tells me the Header and payload information.\r\n\r\nI cannot find a library on android that does what this website does and i have tried all of them that i could find. The most recognized one to use is: https://github.com/jwtk/jjwt \r\n\r\nBut this gives me an exception that i cannot parse a signed token which as proven by the other website above is false. another resource i have used is: https://bitbucket.org/b_c/jose4j/wiki/Home\r\n\r\nThis one at least gave me the header information which is the furthest i have been able to get. \r\n\r\nTo give context why it is the way it is, the payload contains an expiration time and on the device when the token is about to expire i should prompt the user to re enter their credentials to get a new token. Now this might seem like a security threat because a hacker could manipulate the token on the device, but the server checks the token to make sure it is authentic which is why i do not want the key on the device because this can be mined by a hacker, and make the entire application vulnerable.","title":"Android JWT parsing payload/claims when signed","body":"<p>I have a signed JWT String that i get from the server. I do not know the key or rather I don't want to put the key on the client/device.</p>\n\n<p>When using this site with my token: <a href=\"https://jwt.io/\" rel=\"noreferrer\">https://jwt.io/</a> I get the desired result it tells me the Header and payload information.</p>\n\n<p>I cannot find a library on android that does what this website does and i have tried all of them that i could find. The most recognized one to use is: <a href=\"https://github.com/jwtk/jjwt\" rel=\"noreferrer\">https://github.com/jwtk/jjwt</a> </p>\n\n<p>But this gives me an exception that i cannot parse a signed token which as proven by the other website above is false. another resource i have used is: <a href=\"https://bitbucket.org/b_c/jose4j/wiki/Home\" rel=\"noreferrer\">https://bitbucket.org/b_c/jose4j/wiki/Home</a></p>\n\n<p>This one at least gave me the header information which is the furthest i have been able to get. </p>\n\n<p>To give context why it is the way it is, the payload contains an expiration time and on the device when the token is about to expire i should prompt the user to re enter their credentials to get a new token. Now this might seem like a security threat because a hacker could manipulate the token on the device, but the server checks the token to make sure it is authentic which is why i do not want the key on the device because this can be mined by a hacker, and make the entire application vulnerable.</p>\n"},{"tags":["java","eclipse","gradle","build","ide"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":1,"creation_date":1687668670,"post_id":76548768,"comment_id":134967589,"body_markdown":"Have you looked at the other error messages? What have you already tried? Can you expand the Project and External Dependencies node? It&#39;s probably very relevant.","body":"Have you looked at the other error messages? What have you already tried? Can you expand the Project and External Dependencies node? It&#39;s probably very relevant."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1687677093,"post_id":76548768,"comment_id":134968073,"body_markdown":"Which is the exact error message of the root problem shown in the _Problems_ view? Also you should always provide a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example). In your linked `build.gradle` you set Java 20 to be used in your project, but maybe you missed to configured a Java 20 JRE/JDK in the preferences _Java &gt; Installed JREs_.","body":"Which is the exact error message of the root problem shown in the <i>Problems</i> view? Also you should always provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. In your linked <code>build.gradle</code> you set Java 20 to be used in your project, but maybe you missed to configured a Java 20 JRE/JDK in the preferences <i>Java &gt; Installed JREs</i>."},{"owner":{"account_id":5737580,"reputation":724,"user_id":4531180,"display_name":"Nicholas Saunders"},"score":0,"creation_date":1687799458,"post_id":76548768,"comment_id":134984192,"body_markdown":"I don&#39;t know how to expand the Project and External Dependencies node @nitind","body":"I don&#39;t know how to expand the Project and External Dependencies node @nitind"},{"owner":{"account_id":5737580,"reputation":724,"user_id":4531180,"display_name":"Nicholas Saunders"},"score":0,"creation_date":1687800465,"post_id":76548768,"comment_id":134984426,"body_markdown":"added the exact error message @howlger and get the gist of what you&#39;re suggesting but am not entirely familiar with Eclipse and finding those specific configurations.  Looking for Installed JRE&#39;s.  (On the system the javac and java --version commands are shown).","body":"added the exact error message @howlger and get the gist of what you&#39;re suggesting but am not entirely familiar with Eclipse and finding those specific configurations.  Looking for Installed JRE&#39;s.  (On the system the javac and java --version commands are shown)."},{"owner":{"account_id":5737580,"reputation":724,"user_id":4531180,"display_name":"Nicholas Saunders"},"score":0,"creation_date":1687800665,"post_id":76548768,"comment_id":134984474,"body_markdown":"the linked sample code @howlger is quite minimal -- not sure how it could be further pared down.  As it&#39;s on git, should be reproducible, yes?  If there&#39;s better sample code for this purpose, totally open -- but that code is as bare-bones as it gets.","body":"the linked sample code @howlger is quite minimal -- not sure how it could be further pared down.  As it&#39;s on git, should be reproducible, yes?  If there&#39;s better sample code for this purpose, totally open -- but that code is as bare-bones as it gets."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1687801891,"post_id":76548768,"comment_id":134984710,"body_markdown":"Make sure your Eclipse is up to date (2023-06), and also make sure in the preferences _Java &gt; Installed JREs_ a Java 20 JDK is configured: see [e.g. my video](https://youtu.be/OQe_hafeuz8).","body":"Make sure your Eclipse is up to date (2023-06), and also make sure in the preferences <i>Java &gt; Installed JREs</i> a Java 20 JDK is configured: see <a href=\"https://youtu.be/OQe_hafeuz8\" rel=\"nofollow noreferrer\">e.g. my video</a>."}],"owner":{"account_id":5737580,"reputation":724,"user_id":4531180,"display_name":"Nicholas Saunders"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":216,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687800556,"creation_date":1687663033,"question_id":76548768,"body_markdown":"From the bash console, [this hello world project][1] builds with gradle fine.  However, [the IDE][2] shows:\r\n\r\n[![build path][3]][3]\r\n\r\n\r\nclicking on line 1 gives:\r\n\r\n&gt; Configure build path...\r\n&gt; \r\n&gt; Open the Java build path properties of project &#39;app&#39;\r\n\r\nAgain, [builds fine from the console][4] with gradle:\r\n\r\n(too long, see above link for the build file.)\r\n\r\n\r\n    \r\n\r\nsystem info:\r\n\r\n\r\n    nicholas@mordor:~$ \r\n    nicholas@mordor:~$ snap info eclipse\r\n    name:      eclipse\r\n    summary:   Extensible Tool Platform and Java IDE\r\n    publisher: Snapcrafters✪\r\n    store-url: https://snapcraft.io/eclipse\r\n    contact:   https://github.com/snapcrafters/eclipse/issues\r\n    license:   unset\r\n    description: |\r\n      Eclipse provides IDEs and platforms for nearly every language and architecture. We are famous for\r\n      our Java IDE, C/C++, JavaScript and PHP IDEs built on extensible platforms for creating desktop,\r\n      Web and cloud IDEs. These platforms deliver the most extensive collection of add-on tools\r\n      available for software developers.\r\n      \r\n      This snap is maintained by the Snapcrafters community, and is not necessarily endorsed or\r\n      officially maintained by the upstream developers.\r\n    commands:\r\n      - eclipse\r\n    snap-id:      QzFGHW76hR3cZjpcuHt4sAjj5KZbd05T\r\n    tracking:     latest/stable\r\n    refresh-date: today at 14:20 PDT\r\n    channels:\r\n      latest/stable:    2022-12 2023-06-16 (67) 329MB classic\r\n      latest/candidate: 2023-03 2023-06-16 (68) 333MB classic\r\n      latest/beta:      ↑                             \r\n      latest/edge:      2023-03 2023-06-16 (69) 333MB classic\r\n    installed:          2022-12            (67) 329MB classic\r\n    nicholas@mordor:~$ \r\n    nicholas@mordor:~$ gradle --version\r\n    \r\n    ------------------------------------------------------------\r\n    Gradle 8.1.1\r\n    ------------------------------------------------------------\r\n    \r\n    Build time:   2023-04-21 12:31:26 UTC\r\n    Revision:     1cf537a851c635c364a4214885f8b9798051175b\r\n    \r\n    Kotlin:       1.8.10\r\n    Groovy:       3.0.15\r\n    Ant:          Apache Ant(TM) version 1.10.11 compiled on July 10 2021\r\n    JVM:          20.0.1 (Oracle Corporation 20.0.1+9-29)\r\n    OS:           Linux 5.19.0-45-generic amd64\r\n    \r\n    nicholas@mordor:~$ \r\n    nicholas@mordor:~$ javac --version\r\n    javac 20.0.1\r\n    nicholas@mordor:~$ \r\n    nicholas@mordor:~$ java --version\r\n    java 20.0.1 2023-04-18\r\n    Java(TM) SE Runtime Environment (build 20.0.1+9-29)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 20.0.1+9-29, mixed mode, sharing)\r\n    nicholas@mordor:~$ \r\n    nicholas@mordor:~$ lsb_release -a\r\n    No LSB modules are available.\r\n    Distributor ID:\tUbuntu\r\n    Description:\tUbuntu 22.04 LTS\r\n    Release:\t22.04\r\n    Codename:\tjammy\r\n    nicholas@mordor:~$ \r\n\r\n\r\n\r\nscreenshots:\r\n\r\n[![a][5]][5]\r\n\r\n\r\n[![b][6]][6]\r\n\r\n\r\nerror message:\r\n\r\n[![error1][7]][7]\r\n\r\n[![enter image description here][8]][8]\r\n\r\n\r\n  [1]: https://github.com/NICKSAUNDERS/sheets\r\n  [2]: https://stackoverflow.com/q/76547949/4531180\r\n  [3]: https://i.stack.imgur.com/UAlsP.png\r\n  [4]: https://github.com/NICKSAUNDERS/sheets/blob/main/app/build.gradle\r\n  [5]: https://i.stack.imgur.com/Rn2rC.png\r\n  [6]: https://i.stack.imgur.com/0o1uh.png\r\n  [7]: https://i.stack.imgur.com/1pymp.jpg\r\n  [8]: https://i.stack.imgur.com/l1X8k.jpg","title":"How to configure the build path, JDK and JRE for Eclipse?","body":"<p>From the bash console, <a href=\"https://github.com/NICKSAUNDERS/sheets\" rel=\"nofollow noreferrer\">this hello world project</a> builds with gradle fine.  However, <a href=\"https://stackoverflow.com/q/76547949/4531180\">the IDE</a> shows:</p>\n<p><a href=\"https://i.stack.imgur.com/UAlsP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UAlsP.png\" alt=\"build path\" /></a></p>\n<p>clicking on line 1 gives:</p>\n<blockquote>\n<p>Configure build path...</p>\n<p>Open the Java build path properties of project 'app'</p>\n</blockquote>\n<p>Again, <a href=\"https://github.com/NICKSAUNDERS/sheets/blob/main/app/build.gradle\" rel=\"nofollow noreferrer\">builds fine from the console</a> with gradle:</p>\n<p>(too long, see above link for the build file.)</p>\n<p>system info:</p>\n<pre><code>nicholas@mordor:~$ \nnicholas@mordor:~$ snap info eclipse\nname:      eclipse\nsummary:   Extensible Tool Platform and Java IDE\npublisher: Snapcrafters✪\nstore-url: https://snapcraft.io/eclipse\ncontact:   https://github.com/snapcrafters/eclipse/issues\nlicense:   unset\ndescription: |\n  Eclipse provides IDEs and platforms for nearly every language and architecture. We are famous for\n  our Java IDE, C/C++, JavaScript and PHP IDEs built on extensible platforms for creating desktop,\n  Web and cloud IDEs. These platforms deliver the most extensive collection of add-on tools\n  available for software developers.\n  \n  This snap is maintained by the Snapcrafters community, and is not necessarily endorsed or\n  officially maintained by the upstream developers.\ncommands:\n  - eclipse\nsnap-id:      QzFGHW76hR3cZjpcuHt4sAjj5KZbd05T\ntracking:     latest/stable\nrefresh-date: today at 14:20 PDT\nchannels:\n  latest/stable:    2022-12 2023-06-16 (67) 329MB classic\n  latest/candidate: 2023-03 2023-06-16 (68) 333MB classic\n  latest/beta:      ↑                             \n  latest/edge:      2023-03 2023-06-16 (69) 333MB classic\ninstalled:          2022-12            (67) 329MB classic\nnicholas@mordor:~$ \nnicholas@mordor:~$ gradle --version\n\n------------------------------------------------------------\nGradle 8.1.1\n------------------------------------------------------------\n\nBuild time:   2023-04-21 12:31:26 UTC\nRevision:     1cf537a851c635c364a4214885f8b9798051175b\n\nKotlin:       1.8.10\nGroovy:       3.0.15\nAnt:          Apache Ant(TM) version 1.10.11 compiled on July 10 2021\nJVM:          20.0.1 (Oracle Corporation 20.0.1+9-29)\nOS:           Linux 5.19.0-45-generic amd64\n\nnicholas@mordor:~$ \nnicholas@mordor:~$ javac --version\njavac 20.0.1\nnicholas@mordor:~$ \nnicholas@mordor:~$ java --version\njava 20.0.1 2023-04-18\nJava(TM) SE Runtime Environment (build 20.0.1+9-29)\nJava HotSpot(TM) 64-Bit Server VM (build 20.0.1+9-29, mixed mode, sharing)\nnicholas@mordor:~$ \nnicholas@mordor:~$ lsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 22.04 LTS\nRelease:    22.04\nCodename:   jammy\nnicholas@mordor:~$ \n</code></pre>\n<p>screenshots:</p>\n<p><a href=\"https://i.stack.imgur.com/Rn2rC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Rn2rC.png\" alt=\"a\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/0o1uh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0o1uh.png\" alt=\"b\" /></a></p>\n<p>error message:</p>\n<p><a href=\"https://i.stack.imgur.com/1pymp.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1pymp.jpg\" alt=\"error1\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/l1X8k.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/l1X8k.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","maven","intellij-idea","netbeans","build"],"answers":[{"comments":[{"owner":{"account_id":5741366,"reputation":719,"user_id":4533984,"accept_rate":50,"display_name":"Sajad NasiriNezhad"},"score":2,"creation_date":1455713437,"post_id":35442639,"comment_id":58610738,"body_markdown":"Thanks for your answer. but i think rebuild project is so different with clean or clean build. is that true?","body":"Thanks for your answer. but i think rebuild project is so different with clean or clean build. is that true?"},{"owner":{"account_id":7853907,"reputation":114,"user_id":5936475,"display_name":"jolle93"},"score":0,"creation_date":1455820202,"post_id":35442639,"comment_id":58672173,"body_markdown":"Yes, I think it is very different. But these two things are the only suggestions I found after hours of research and none of them are working as expected.","body":"Yes, I think it is very different. But these two things are the only suggestions I found after hours of research and none of them are working as expected."}],"tags":[],"owner":{"account_id":7853907,"reputation":114,"user_id":5936475,"display_name":"jolle93"},"comment_count":2,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1505299912,"creation_date":1455655653,"answer_id":35442639,"question_id":35409788,"body_markdown":"I have the same problem. I found some suggestions but nothing get me to an acceptable solution. Here are some things I found maybe it will help you:\r\n\r\nFile -&gt; Invalidate caches / restart\r\n\r\nor just rebuild the project: Build -&gt; Rebuild project (Shift+F11)  \r\nBut it&#39;s nothing like Clean or Clean and Build from netbeans.\r\n\r\nBy the way I use intellij-15.\r\n\r\n**Edit:** Finally, Build-&gt;Build Artifacts-&gt;Build or Rebuild works for me.\r\n\r\n","title":"How to clean or clean build my Maven project in IntelliJ IDEA?","body":"<p>I have the same problem. I found some suggestions but nothing get me to an acceptable solution. Here are some things I found maybe it will help you:</p>\n\n<p>File -> Invalidate caches / restart</p>\n\n<p>or just rebuild the project: Build -> Rebuild project (Shift+F11)<br>\nBut it's nothing like Clean or Clean and Build from netbeans.</p>\n\n<p>By the way I use intellij-15.</p>\n\n<p><strong>Edit:</strong> Finally, Build->Build Artifacts->Build or Rebuild works for me.</p>\n"},{"tags":[],"owner":{"account_id":337009,"reputation":327,"user_id":665014,"accept_rate":55,"display_name":"Rebeccah"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1495781637,"creation_date":1495781637,"answer_id":44195414,"question_id":35409788,"body_markdown":"So far, the best I can come up with (for a non-Maven project) would be to manually delete the target folder and then do your build.  But I&#39;m still looking for a better answer, myself.\r\n\r\nI&#39;m building a Maven project, and I discovered if I run the Maven Clean phase from the IntelliJ &quot;Maven Projects&quot; pane, it deletes the target folder.  The target folder itself (without subfolders) corresponds to NetBeans&#39; dist folder, and the subfolders in target have corresponding subfolders of the build folder in NetBeans.  When you clean and build in NetBeans, the first thing that happens is the build folder and dist folder are deleted, and this corresponds to deleting the target folder in IntelliJ, so that&#39;s why I suggest it.\r\n\r\nNote that just as you get an error if you try to clean and build in NetBeans while holding open a file that happens to be in the build or dist directory, you will similarly get an error in IntelliJ if you try to execute the Maven Clean phase while a file is open in the target folder - the difference is, if you are doing this in Windows, IntelliJ will half-way delete the folder and there isn&#39;t a simple straightforward way to clean up the mess even after you close the program that is holding the file open.  Probably if you reboot it will clean up, but who wants to do that?  I ended up identifying the culprit process (processes, actually - two copies of explorer.exe) with Sysinternals Process Explorer, killing all instances of explorer (killing only the two culprits didn&#39;t seem to work), then starting explorer back up via Task Manager, and everything was fine.","title":"How to clean or clean build my Maven project in IntelliJ IDEA?","body":"<p>So far, the best I can come up with (for a non-Maven project) would be to manually delete the target folder and then do your build.  But I'm still looking for a better answer, myself.</p>\n\n<p>I'm building a Maven project, and I discovered if I run the Maven Clean phase from the IntelliJ \"Maven Projects\" pane, it deletes the target folder.  The target folder itself (without subfolders) corresponds to NetBeans' dist folder, and the subfolders in target have corresponding subfolders of the build folder in NetBeans.  When you clean and build in NetBeans, the first thing that happens is the build folder and dist folder are deleted, and this corresponds to deleting the target folder in IntelliJ, so that's why I suggest it.</p>\n\n<p>Note that just as you get an error if you try to clean and build in NetBeans while holding open a file that happens to be in the build or dist directory, you will similarly get an error in IntelliJ if you try to execute the Maven Clean phase while a file is open in the target folder - the difference is, if you are doing this in Windows, IntelliJ will half-way delete the folder and there isn't a simple straightforward way to clean up the mess even after you close the program that is holding the file open.  Probably if you reboot it will clean up, but who wants to do that?  I ended up identifying the culprit process (processes, actually - two copies of explorer.exe) with Sysinternals Process Explorer, killing all instances of explorer (killing only the two culprits didn't seem to work), then starting explorer back up via Task Manager, and everything was fine.</p>\n"},{"comments":[{"owner":{"account_id":2892194,"reputation":6142,"user_id":2480714,"accept_rate":67,"display_name":"PGMacDesign"},"score":3,"creation_date":1523993091,"post_id":45870989,"comment_id":86788039,"body_markdown":"You can also invoke this from the intelij terminal by typing &#39;mvn clean&#39;","body":"You can also invoke this from the intelij terminal by typing &#39;mvn clean&#39;"},{"owner":{"account_id":74886,"reputation":26643,"user_id":214977,"accept_rate":69,"display_name":"granadaCoder"},"score":2,"creation_date":1547655972,"post_id":45870989,"comment_id":95268396,"body_markdown":"And the terminal window can be made visible by &quot;Select --  View | Tool Windows | Terminal from the main menu.&quot;   Upvote for answer and comment.","body":"And the terminal window can be made visible by &quot;Select --  View | Tool Windows | Terminal from the main menu.&quot;   Upvote for answer and comment."},{"owner":{"account_id":4195217,"reputation":555,"user_id":3436782,"accept_rate":85,"display_name":"jason adams"},"score":0,"creation_date":1555696155,"post_id":45870989,"comment_id":98205970,"body_markdown":"@Silmarilos your comment should be made an answer, imo your method is much more accessible.","body":"@Silmarilos your comment should be made an answer, imo your method is much more accessible."},{"owner":{"account_id":11140257,"reputation":1,"user_id":8177126,"accept_rate":0,"display_name":"Vander Ig"},"score":0,"creation_date":1665460266,"post_id":45870989,"comment_id":130699492,"body_markdown":"You can find a video on Rebuild Project here: https://youtu.be/UqvHA-E5Jyw","body":"You can find a video on Rebuild Project here: <a href=\"https://youtu.be/UqvHA-E5Jyw\" rel=\"nofollow noreferrer\">youtu.be/UqvHA-E5Jyw</a>"}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":4,"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1561992797,"creation_date":1503609252,"answer_id":45870989,"question_id":35409788,"body_markdown":"# Maven &gt; Lifecycle &gt; clean\r\n\r\nOpen the `Maven Projects` panel. Click lower-left corner for pop-up menu if that panel is not already visible.\r\n\r\nIn that panel, open the `Lifecycle` item. There you will find `clean` and `install` items for you to run. \r\n\r\n[![Screenshot of IntelliJ &gt; Maven &gt; Lifecycle &gt; clean][1]][1]\r\n\r\nAs commented, you can also invoke this by command-line/console. But if already using IntelliJ, I do not see the point. Just show/hide this pane as you work. I use it countless times a day to hit `install` to build complete app, and hit `clean` whenever I suspect not all of the project is up-to-date in the build-results.\r\n\r\n# `Build` &gt; `Rebuild Project`\r\n\r\nIf you are having weird problems in running the app in development also try the menu item `Build` &gt; `Rebuild Project`.\r\n\r\nI have asked [what is the difference between a `Build` &gt; `Rebuild Project` versus doing a Maven `clean`][2]. But I still do not understand the precise details. So when things seem wonky, I do both to right the ship.\n\nTips:\n\n - Restarting IntelliJ may help when behavior seems odd.  \n - Keep Intellij updated. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jaAN9.png\r\n  [2]: https://stackoverflow.com/q/50283035/642706","title":"How to clean or clean build my Maven project in IntelliJ IDEA?","body":"<h1>Maven > Lifecycle > clean</h1>\n\n<p>Open the <code>Maven Projects</code> panel. Click lower-left corner for pop-up menu if that panel is not already visible.</p>\n\n<p>In that panel, open the <code>Lifecycle</code> item. There you will find <code>clean</code> and <code>install</code> items for you to run. </p>\n\n<p><a href=\"https://i.stack.imgur.com/jaAN9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jaAN9.png\" alt=\"Screenshot of IntelliJ &gt; Maven &gt; Lifecycle &gt; clean\"></a></p>\n\n<p>As commented, you can also invoke this by command-line/console. But if already using IntelliJ, I do not see the point. Just show/hide this pane as you work. I use it countless times a day to hit <code>install</code> to build complete app, and hit <code>clean</code> whenever I suspect not all of the project is up-to-date in the build-results.</p>\n\n<h1><code>Build</code> > <code>Rebuild Project</code></h1>\n\n<p>If you are having weird problems in running the app in development also try the menu item <code>Build</code> > <code>Rebuild Project</code>.</p>\n\n<p>I have asked <a href=\"https://stackoverflow.com/q/50283035/642706\">what is the difference between a <code>Build</code> > <code>Rebuild Project</code> versus doing a Maven <code>clean</code></a>. But I still do not understand the precise details. So when things seem wonky, I do both to right the ship.</p>\n\n<p>Tips:</p>\n\n<ul>\n<li>Restarting IntelliJ may help when behavior seems odd.  </li>\n<li>Keep Intellij updated. </li>\n</ul>\n"},{"tags":[],"owner":{"account_id":10242927,"reputation":31,"user_id":7559738,"display_name":"x-max"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634928872,"creation_date":1512636230,"answer_id":47690900,"question_id":35409788,"body_markdown":"If it&#39;s a Maven project: \r\n\r\n 1. Go to your project&#39;s root folder (where your pom.xml is located)\r\n 2. In address bar of **windows** explorer type **cmd**\r\n 3. You should be prompted with **cmd** window where you should type `mvn clean` \r\n 4. That will clean your target folder which is getting created after build\r\n\r\nMake sure you have your system variables set so `mvn` commands can work (otherwise you will get &quot;`mvn is not recognized` as an internal or external command&quot;)\r\n\r\nThis is how it should look:\r\n![screenshotCMD][1]\r\n\r\nHope this helps.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PDMiu.jpg","title":"How to clean or clean build my Maven project in IntelliJ IDEA?","body":"<p>If it's a Maven project:</p>\n<ol>\n<li>Go to your project's root folder (where your pom.xml is located)</li>\n<li>In address bar of <strong>windows</strong> explorer type <strong>cmd</strong></li>\n<li>You should be prompted with <strong>cmd</strong> window where you should type <code>mvn clean</code></li>\n<li>That will clean your target folder which is getting created after build</li>\n</ol>\n<p>Make sure you have your system variables set so <code>mvn</code> commands can work (otherwise you will get &quot;<code>mvn is not recognized</code> as an internal or external command&quot;)</p>\n<p>This is how it should look:\n<img src=\"https://i.stack.imgur.com/PDMiu.jpg\" alt=\"screenshotCMD\" /></p>\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":5779604,"reputation":103,"user_id":4560682,"display_name":"Farai Mugaviri"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1569509148,"creation_date":1569504364,"answer_id":58117877,"question_id":35409788,"body_markdown":"In IntelliJ, go to your Toobar, **View**&gt;**Tools Windows**&gt;**Maven Projects**\r\n\r\nFrom there, you can click Clean to clean the project\r\n\r\n[![][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Zqy5S.png","title":"How to clean or clean build my Maven project in IntelliJ IDEA?","body":"<p>In IntelliJ, go to your Toobar, <strong>View</strong>><strong>Tools Windows</strong>><strong>Maven Projects</strong></p>\n\n<p>From there, you can click Clean to clean the project</p>\n\n<p><a href=\"https://i.stack.imgur.com/Zqy5S.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Zqy5S.png\" alt=\"\"></a></p>\n"},{"tags":[],"owner":{"account_id":10794010,"reputation":1606,"user_id":7940437,"display_name":"Majid Roustaei"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1590159806,"creation_date":1590159806,"answer_id":61957976,"question_id":35409788,"body_markdown":"Here is a faster way to do that:\r\n\r\nin IntelliJ IDEA window hit `Ctrl` key twice, then a pop-up window appears like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nthere you can enter your command and use recommendation tools, too.\r\nincluding template commands and the list of your previous ones:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/V3LY1.png\r\n  [2]: https://i.stack.imgur.com/lazFb.png","title":"How to clean or clean build my Maven project in IntelliJ IDEA?","body":"<p>Here is a faster way to do that:</p>\n\n<p>in IntelliJ IDEA window hit <code>Ctrl</code> key twice, then a pop-up window appears like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/V3LY1.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/V3LY1.png\" alt=\"enter image description here\"></a></p>\n\n<p>there you can enter your command and use recommendation tools, too.\nincluding template commands and the list of your previous ones:</p>\n\n<p><a href=\"https://i.stack.imgur.com/lazFb.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/lazFb.png\" alt=\"enter image description here\"></a></p>\n"},{"comments":[{"owner":{"account_id":9845313,"reputation":105,"user_id":7293057,"display_name":"Manohar Bhat"},"score":0,"creation_date":1699166966,"post_id":63362869,"comment_id":136495662,"body_markdown":"should the configuration be created for each project/module?\nOR is there any variable we can use for &quot;Working directory&quot; which resolves to current active project/module path? using things like $MODULE_IML_DIR$, $MODULE_WORKING_DIR$ didn&#39;t work for me","body":"should the configuration be created for each project/module? OR is there any variable we can use for &quot;Working directory&quot; which resolves to current active project/module path? using things like $MODULE_IML_DIR$, $MODULE_WORKING_DIR$ didn&#39;t work for me"}],"tags":[],"owner":{"account_id":4104221,"reputation":3989,"user_id":3368818,"accept_rate":75,"display_name":"Woodchuck"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1635900863,"creation_date":1597164952,"answer_id":63362869,"question_id":35409788,"body_markdown":"The answer here with the most votes suggests running the `clean` and `install` Lifecycle items separately in IntelliJ, which is easy enough and works. But it’s worth mentioning that you can combine these steps (and/or others) by instead creating a new *Run/Debug Configuration* of type `maven` and adding the command `clean install` (or whichever combination of maven lifecycle methods you run on a recurring basis). \r\n\r\nThereafter, running a `mvn clean install` is as simple as clicking the green button to run that *Run/Debug Configuration*.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IgxvM.png","title":"How to clean or clean build my Maven project in IntelliJ IDEA?","body":"<p>The answer here with the most votes suggests running the <code>clean</code> and <code>install</code> Lifecycle items separately in IntelliJ, which is easy enough and works. But it’s worth mentioning that you can combine these steps (and/or others) by instead creating a new <em>Run/Debug Configuration</em> of type <code>maven</code> and adding the command <code>clean install</code> (or whichever combination of maven lifecycle methods you run on a recurring basis).</p>\n<p>Thereafter, running a <code>mvn clean install</code> is as simple as clicking the green button to run that <em>Run/Debug Configuration</em>.</p>\n<p><a href=\"https://i.stack.imgur.com/IgxvM.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/IgxvM.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":14396250,"reputation":412,"user_id":10399467,"display_name":"qingmu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1623652258,"creation_date":1623652258,"answer_id":67965734,"question_id":35409788,"body_markdown":"You can use the terminal to switch to the current project directory and use `mvn clean install`","title":"How to clean or clean build my Maven project in IntelliJ IDEA?","body":"<p>You can use the terminal to switch to the current project directory and use <code>mvn clean install</code></p>\n"},{"tags":[],"owner":{"account_id":3077176,"reputation":178,"user_id":2606228,"display_name":"nikhil2000"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1629784237,"creation_date":1629784237,"answer_id":68902348,"question_id":35409788,"body_markdown":"click on maven panel --&gt; select project--&gt; lifecycle --&gt; double click clean.\r\n\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VSpH3.jpg\r\nsource: vaadin.com","title":"How to clean or clean build my Maven project in IntelliJ IDEA?","body":"<p>click on maven panel --&gt; select project--&gt; lifecycle --&gt; double click clean.</p>\n<p><a href=\"https://i.stack.imgur.com/VSpH3.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VSpH3.jpg\" alt=\"enter image description here\" /></a></p>\n<p>source: vaadin.com</p>\n"},{"tags":[],"owner":{"account_id":10466881,"reputation":166,"user_id":7716050,"display_name":"hugoalexandremf"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1687798980,"creation_date":1635420739,"answer_id":69753330,"question_id":35409788,"body_markdown":"As explained in [Jetbrains help][1] there are three ways to execute maven goals in IntelliJ.\r\nOne simple way to execute clean and install and also save the configuration is to select with CTRL button the goals &quot;clean&quot; and &quot;install&quot; from the maven tab -&gt; Right click in one of the selected -&gt; Modify Run Configuration -&gt; check all the fields -&gt; click OK. Then you can execute this configuration in order to clean and install.\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/work-with-maven-goals.html#run_goal","title":"How to clean or clean build my Maven project in IntelliJ IDEA?","body":"<p>As explained in <a href=\"https://www.jetbrains.com/help/idea/work-with-maven-goals.html#run_goal\" rel=\"nofollow noreferrer\">Jetbrains help</a> there are three ways to execute maven goals in IntelliJ.\nOne simple way to execute clean and install and also save the configuration is to select with CTRL button the goals &quot;clean&quot; and &quot;install&quot; from the maven tab -&gt; Right click in one of the selected -&gt; Modify Run Configuration -&gt; check all the fields -&gt; click OK. Then you can execute this configuration in order to clean and install.</p>\n"},{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1650969862,"creation_date":1650969862,"answer_id":72012604,"question_id":35409788,"body_markdown":"This way works for the `InteliJ IDEA 14` upwards not exceeding `InteliJ IDEA 20`:\r\n\r\n    Click Run -&gt; Edit Configurations -&gt; Press + -&gt; Search for &quot;Maven&quot; -&gt; Locate &quot;Command Line&quot; field and enter in following maven commands &quot;clean install&quot; -&gt;  Press OK.\r\n\r\nNow click the green button to run that Run/Debug Configuration, this will `maven clean install` the module/project. \r\n\r\nThe output of the module if you are to deploy somewhere can be seen in the `target` directory in the project. \r\n\r\n`Maven Clean Install` refers to clear any compiled files you have, making sure that you&#39;re really compiling each module from scratch","title":"How to clean or clean build my Maven project in IntelliJ IDEA?","body":"<p>This way works for the <code>InteliJ IDEA 14</code> upwards not exceeding <code>InteliJ IDEA 20</code>:</p>\n<pre><code>Click Run -&gt; Edit Configurations -&gt; Press + -&gt; Search for &quot;Maven&quot; -&gt; Locate &quot;Command Line&quot; field and enter in following maven commands &quot;clean install&quot; -&gt;  Press OK.\n</code></pre>\n<p>Now click the green button to run that Run/Debug Configuration, this will <code>maven clean install</code> the module/project.</p>\n<p>The output of the module if you are to deploy somewhere can be seen in the <code>target</code> directory in the project.</p>\n<p><code>Maven Clean Install</code> refers to clear any compiled files you have, making sure that you're really compiling each module from scratch</p>\n"}],"owner":{"account_id":5741366,"reputation":719,"user_id":4533984,"accept_rate":50,"display_name":"Sajad NasiriNezhad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130115,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":63362869,"answer_count":11,"score":25,"last_activity_date":1687798980,"creation_date":1455540420,"question_id":35409788,"body_markdown":"I&#39;m using [Apache Maven][1] in my Java project. in [NetBeans][2] there are build and clean build icons but there aren&#39;t in [IntellIJ IDEA][3]. How can I clean or clean build my project in it?\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Apache_Maven\r\n  [2]: https://en.wikipedia.org/wiki/NetBeans\r\n  [3]: https://en.wikipedia.org/wiki/IntelliJ_IDEA","title":"How to clean or clean build my Maven project in IntelliJ IDEA?","body":"<p>I'm using <a href=\"https://en.wikipedia.org/wiki/Apache_Maven\" rel=\"noreferrer\">Apache Maven</a> in my Java project. in <a href=\"https://en.wikipedia.org/wiki/NetBeans\" rel=\"noreferrer\">NetBeans</a> there are build and clean build icons but there aren't in <a href=\"https://en.wikipedia.org/wiki/IntelliJ_IDEA\" rel=\"noreferrer\">IntellIJ IDEA</a>. How can I clean or clean build my project in it?</p>\n"},{"tags":["java","gradle","visual-studio-code"],"comments":[{"owner":{"account_id":413995,"reputation":28249,"user_id":787968,"accept_rate":25,"display_name":"Rene Groeschke"},"score":0,"creation_date":1516013481,"post_id":48260426,"comment_id":83505604,"body_markdown":"you need to configure your VS code to take `src/main/java` as the source root folder instead of just `src`. That should do the trick","body":"you need to configure your VS code to take <code>src&#47;main&#47;java</code> as the source root folder instead of just <code>src</code>. That should do the trick"}],"answers":[{"comments":[{"owner":{"account_id":435566,"reputation":984,"user_id":822223,"display_name":"DiamondDrake"},"score":0,"creation_date":1576636664,"post_id":50308584,"comment_id":104961062,"body_markdown":"This doesn&#39;t seem to work, as workspaces aren&#39;t required. If you open the folder as a project you shouldn&#39;t need a workspace","body":"This doesn&#39;t seem to work, as workspaces aren&#39;t required. If you open the folder as a project you shouldn&#39;t need a workspace"},{"owner":{"account_id":2271700,"reputation":2123,"user_id":1998918,"accept_rate":74,"display_name":"user0000001"},"score":0,"creation_date":1579307580,"post_id":50308584,"comment_id":105734753,"body_markdown":"@DiamondDrake Have you figured this out? I have a multi-module maven project and VSCode cannot render the sub modules to save its life. I have to open the project in its own VSCode window. This is insane because I have over 20+ sub modules in this project.","body":"@DiamondDrake Have you figured this out? I have a multi-module maven project and VSCode cannot render the sub modules to save its life. I have to open the project in its own VSCode window. This is insane because I have over 20+ sub modules in this project."},{"owner":{"account_id":435566,"reputation":984,"user_id":822223,"display_name":"DiamondDrake"},"score":0,"creation_date":1579391121,"post_id":50308584,"comment_id":105751897,"body_markdown":"@user0000001 for me it was a parent pom that changed the src root","body":"@user0000001 for me it was a parent pom that changed the src root"},{"owner":{"account_id":2271700,"reputation":2123,"user_id":1998918,"accept_rate":74,"display_name":"user0000001"},"score":0,"creation_date":1579446693,"post_id":50308584,"comment_id":105761303,"body_markdown":"@DiamondDrake Thank you for taking the time to reply. Mine was simply clearing the `workspaceStorage` directory in the VSCode installation.","body":"@DiamondDrake Thank you for taking the time to reply. Mine was simply clearing the <code>workspaceStorage</code> directory in the VSCode installation."},{"owner":{"account_id":69707,"reputation":41791,"user_id":202694,"accept_rate":88,"display_name":"Pace"},"score":1,"creation_date":1605666788,"post_id":50308584,"comment_id":114719427,"body_markdown":"FWIW I also had to right click the main folder (just the blank space where top level files go) and choose &quot;remove folder from the java source path&quot;","body":"FWIW I also had to right click the main folder (just the blank space where top level files go) and choose &quot;remove folder from the java source path&quot;"}],"tags":[],"owner":{"account_id":13559005,"reputation":71,"user_id":9781437,"display_name":"sybes"},"comment_count":5,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1542899940,"creation_date":1526143736,"answer_id":50308584,"question_id":48260426,"body_markdown":"To get things right, add the root folder of you project in workspace. To do this in VS Code, go to File -&gt; &quot;Add folder to workspace&quot; and then select the root folder (source folder).","title":"vs code - Expected java package name error","body":"<p>To get things right, add the root folder of you project in workspace. To do this in VS Code, go to File -> \"Add folder to workspace\" and then select the root folder (source folder).</p>\n"},{"comments":[{"owner":{"account_id":435566,"reputation":984,"user_id":822223,"display_name":"DiamondDrake"},"score":1,"creation_date":1576636702,"post_id":56273776,"comment_id":104961069,"body_markdown":"Doesn&#39;t work with the plugin OP is using, throws a warning that says use the pom to configure src root","body":"Doesn&#39;t work with the plugin OP is using, throws a warning that says use the pom to configure src root"},{"owner":{"account_id":3000661,"reputation":457,"user_id":2546231,"accept_rate":83,"display_name":"Pavel.Zh"},"score":0,"creation_date":1580546459,"post_id":56273776,"comment_id":106139622,"body_markdown":"Does not work when I use Java Dependency Viewer extention.","body":"Does not work when I use Java Dependency Viewer extention."},{"owner":{"account_id":13677323,"reputation":3369,"user_id":9868445,"display_name":"aderchox"},"score":0,"creation_date":1613642253,"post_id":56273776,"comment_id":117140026,"body_markdown":"This answer helped me amazingly, thanks! Just for anyone who bumps into this error (maybe when using the Java Project Manager extension): `Cannot add to source path because parent is already...` just right click on the previous root of your sources (e.g.: src folder) and remove it from source path, then add the new root to the source path. Hope that helps :)","body":"This answer helped me amazingly, thanks! Just for anyone who bumps into this error (maybe when using the Java Project Manager extension): <code>Cannot add to source path because parent is already...</code> just right click on the previous root of your sources (e.g.: src folder) and remove it from source path, then add the new root to the source path. Hope that helps :)"}],"tags":[],"owner":{"account_id":15057229,"reputation":543,"user_id":10867166,"display_name":"Alexander"},"comment_count":3,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1558609174,"creation_date":1558609174,"answer_id":56273776,"question_id":48260426,"body_markdown":"Because `vscode` set the `src folder` as the default `Java Source Path`, you should change it to folder `src/main/java`. Just right click the folder `src/main/java` in `vscode` and click the option `Add Folder to Java Source Path`, then reopen the file, and the error is gone.","title":"vs code - Expected java package name error","body":"<p>Because <code>vscode</code> set the <code>src folder</code> as the default <code>Java Source Path</code>, you should change it to folder <code>src/main/java</code>. Just right click the folder <code>src/main/java</code> in <code>vscode</code> and click the option <code>Add Folder to Java Source Path</code>, then reopen the file, and the error is gone.</p>\n"},{"tags":[],"owner":{"account_id":13408063,"reputation":11,"user_id":9675498,"display_name":"Carlos Lorca"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591119796,"creation_date":1591118898,"answer_id":62157825,"question_id":48260426,"body_markdown":"In my case, the problem was `faustinoaq.javac-linter` extension. I uninstall the linter extension and everything works.","title":"vs code - Expected java package name error","body":"<p>In my case, the problem was <code>faustinoaq.javac-linter</code> extension. I uninstall the linter extension and everything works.</p>\n"},{"comments":[{"owner":{"account_id":14975017,"reputation":93,"user_id":10810701,"display_name":"antonio vazquez"},"score":0,"creation_date":1619078912,"post_id":63313494,"comment_id":118797317,"body_markdown":"The easiest way to fix it, i was getting crazy","body":"The easiest way to fix it, i was getting crazy"}],"tags":[],"owner":{"account_id":16961879,"reputation":311,"user_id":12268817,"display_name":"Jirayu S"},"comment_count":1,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1596876739,"creation_date":1596876739,"answer_id":63313494,"question_id":48260426,"body_markdown":"If your files are already in the correct directory, press F1 and type in &quot;Clean the Java Language Server Workspace&quot;","title":"vs code - Expected java package name error","body":"<p>If your files are already in the correct directory, press F1 and type in &quot;Clean the Java Language Server Workspace&quot;</p>\n"},{"tags":[],"owner":{"account_id":19226580,"reputation":61,"user_id":14049344,"display_name":"San M"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1618931708,"creation_date":1618931358,"answer_id":67181619,"question_id":48260426,"body_markdown":"Project Root --&gt; .vscode --&gt; settings.json\r\n\r\nchanged below entry to point to my root source folder. This was set to src/pkg1.  Changed to src and it started working.\n\r\n{\r\n    &quot;java.project.sourcePaths&quot;: [\r\n        &quot;src&quot;\r\n    ]\r\n}\r\n","title":"vs code - Expected java package name error","body":"<p>Project Root --&gt; .vscode --&gt; settings.json</p>\n<p>changed below entry to point to my root source folder. This was set to src/pkg1.  Changed to src and it started working.</p>\n<p>{\n&quot;java.project.sourcePaths&quot;: [\n&quot;src&quot;\n]\n}</p>\n"}],"owner":{"account_id":5962522,"reputation":527,"user_id":4687256,"accept_rate":88,"display_name":"x.projekt"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23891,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":5,"score":14,"last_activity_date":1687798704,"creation_date":1516009772,"question_id":48260426,"body_markdown":"I have a java project with the following directory structure (as required by Gradle&#39;s `&#39;java&#39;` plugin, assuming all defaults).\r\n\r\n    projectRootDir\r\n     - src/main/java/com/myproj/Sample.java\r\n     - build.gradle\r\nAnd\r\n\r\n    // Sample.java code\r\n    package com.myproj;\r\n    \r\n    public class Sample{\r\n        ...\r\n    }\r\n\r\nOpening `projectRootDir` folder in VS Code shows the following package naming error in Sample.java:\r\n\r\n`The declared package &quot;com.myproj&quot; doesn&#39;t match the expected package &quot;main.java.com.myproj&quot;`\r\n\r\nHow to make VS Code recognise/use the package mentioned in the code?\r\n\r\n**Note:** I am using the following extensions: **Language Support for Java(TM) by RedHat** and **Debugger for Java** by Microsoft.","title":"vs code - Expected java package name error","body":"<p>I have a java project with the following directory structure (as required by Gradle's <code>'java'</code> plugin, assuming all defaults).</p>\n\n<pre><code>projectRootDir\n - src/main/java/com/myproj/Sample.java\n - build.gradle\n</code></pre>\n\n<p>And</p>\n\n<pre><code>// Sample.java code\npackage com.myproj;\n\npublic class Sample{\n    ...\n}\n</code></pre>\n\n<p>Opening <code>projectRootDir</code> folder in VS Code shows the following package naming error in Sample.java:</p>\n\n<p><code>The declared package \"com.myproj\" doesn't match the expected package \"main.java.com.myproj\"</code></p>\n\n<p>How to make VS Code recognise/use the package mentioned in the code?</p>\n\n<p><strong>Note:</strong> I am using the following extensions: <strong>Language Support for Java(TM) by RedHat</strong> and <strong>Debugger for Java</strong> by Microsoft.</p>\n"},{"tags":["java","apache-kafka","spring-cloud-stream-binder-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1687798679,"post_id":76558085,"comment_id":134984028,"body_markdown":"Kafka doesn&#39;t use Schema Registry on its own, and neither should Cloud Streams; only if you have defined serializer/deserializer for it, will it be used","body":"Kafka doesn&#39;t use Schema Registry on its own, and neither should Cloud Streams; only if you have defined serializer/deserializer for it, will it be used"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1687798779,"post_id":76558085,"comment_id":134984049,"body_markdown":"Also, that property you&#39;ve listed is not mentioned in the docs - https://docs.spring.io/spring-cloud-stream/docs/current/reference/html/spring-cloud-stream-binder-kafka.html#_configuration_options","body":"Also, that property you&#39;ve listed is not mentioned in the docs - <a href=\"https://docs.spring.io/spring-cloud-stream/docs/current/reference/html/spring-cloud-stream-binder-kafka.html#_configuration_options\" rel=\"nofollow noreferrer\">docs.spring.io/spring-cloud-stream/docs/current/reference/ht&zwnj;&#8203;ml/&hellip;</a>"}],"owner":{"account_id":28898710,"reputation":1,"user_id":22134172,"display_name":"mrcornel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687798632,"creation_date":1687792929,"question_id":76558085,"body_markdown":"im trying to configure my spring application to use kafka without Schema Registry.\r\nFor sending messages im using StreamBridge.\r\nIs there any way to configure StreamBridge work without schema registry?\r\n\r\n\r\nI have tried to set auto.schema.registry=false but it wont help.\r\nI think i need to make my own StreamBridge bean","title":"Disable schema registry in StreamBridge","body":"<p>im trying to configure my spring application to use kafka without Schema Registry.\nFor sending messages im using StreamBridge.\nIs there any way to configure StreamBridge work without schema registry?</p>\n<p>I have tried to set auto.schema.registry=false but it wont help.\nI think i need to make my own StreamBridge bean</p>\n"},{"tags":["java","spring","spring-boot","elasticsearch","spring-data-elasticsearch"],"comments":[{"owner":{"account_id":5843921,"reputation":210875,"user_id":4604579,"display_name":"Val"},"score":1,"creation_date":1647331287,"post_id":71478330,"comment_id":126337840,"body_markdown":"ConnectionClosedException seems to hint at the fac that your Spring Boot application cannot establish a connection to your ES cluster, maybe?","body":"ConnectionClosedException seems to hint at the fac that your Spring Boot application cannot establish a connection to your ES cluster, maybe?"},{"owner":{"account_id":21985071,"reputation":3,"user_id":16259477,"display_name":"Siddhant Sharma"},"score":1,"creation_date":1647332293,"post_id":71478330,"comment_id":126338177,"body_markdown":"When I run the app, on cmd window where ES is running I get &quot;received plaintext http traffic on an https channel, closing connection&quot; message. Is this helpful?","body":"When I run the app, on cmd window where ES is running I get &quot;received plaintext http traffic on an https channel, closing connection&quot; message. Is this helpful?"},{"owner":{"account_id":5843921,"reputation":210875,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1647332437,"post_id":71478330,"comment_id":126338224,"body_markdown":"Yes, it looks like you&#39;re using ES8, so you can find the answer to your question in this thread: https://stackoverflow.com/q/71469707/4604579 (hint: SSL/TLS is on by default in ES8)","body":"Yes, it looks like you&#39;re using ES8, so you can find the answer to your question in this thread: <a href=\"https://stackoverflow.com/q/71469707/4604579\">stackoverflow.com/q/71469707/4604579</a> (hint: SSL/TLS is on by default in ES8)"},{"owner":{"account_id":21985071,"reputation":3,"user_id":16259477,"display_name":"Siddhant Sharma"},"score":0,"creation_date":1647332898,"post_id":71478330,"comment_id":126338378,"body_markdown":"Yes I can access through https but I want the application to run. The application is not running and when I run I get the above exception in eclipse and the plaintext message on the cmd window.","body":"Yes I can access through https but I want the application to run. The application is not running and when I run I get the above exception in eclipse and the plaintext message on the cmd window."},{"owner":{"account_id":5843921,"reputation":210875,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1647332988,"post_id":71478330,"comment_id":126338417,"body_markdown":"...which means the application is accessing ES using http instead of https","body":"...which means the application is accessing ES using http instead of https"},{"owner":{"account_id":21985071,"reputation":3,"user_id":16259477,"display_name":"Siddhant Sharma"},"score":0,"creation_date":1647333023,"post_id":71478330,"comment_id":126338430,"body_markdown":"Exactly, how do I change such that it uses https?","body":"Exactly, how do I change such that it uses https?"}],"answers":[{"comments":[{"owner":{"account_id":21985071,"reputation":3,"user_id":16259477,"display_name":"Siddhant Sharma"},"score":0,"creation_date":1647334489,"post_id":71479222,"comment_id":126338979,"body_markdown":"I changed the elasticsearch.url as you said but now I get:  Caused by: org.springframework.data.elasticsearch.UncategorizedElasticsearchException: java.util.concurrent.ExecutionException: java.net.UnknownHostException: No such host is known (https://localhost:9200); nested exception is ElasticsearchException[java.util.concurrent.ExecutionException: java.net.UnknownHostException: No such host is known (https://localhost:9200)];","body":"I changed the elasticsearch.url as you said but now I get:  Caused by: org.springframework.data.elasticsearch.UncategorizedElastics&zwnj;&#8203;earchException: java.util.concurrent.ExecutionException: java.net.UnknownHostException: No such host is known (<a href=\"https://localhost:9200\" rel=\"nofollow noreferrer\">localhost:9200</a>); nested exception is ElasticsearchException[java.util.concurrent.ExecutionExcepti&zwnj;&#8203;on: java.net.UnknownHostException: No such host is known (<a href=\"https://localhost:9200)]\" rel=\"nofollow noreferrer\">localhost:9200)]</a>;"},{"owner":{"account_id":5843921,"reputation":210875,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1647334720,"post_id":71479222,"comment_id":126339077,"body_markdown":"Can you update your question with your `elasticsearch.yml` configuration?","body":"Can you update your question with your <code>elasticsearch.yml</code> configuration?"},{"owner":{"account_id":21985071,"reputation":3,"user_id":16259477,"display_name":"Siddhant Sharma"},"score":0,"creation_date":1647334923,"post_id":71479222,"comment_id":126339162,"body_markdown":"I have added my config file.","body":"I have added my config file."},{"owner":{"account_id":5843921,"reputation":210875,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1647335078,"post_id":71479222,"comment_id":126339236,"body_markdown":"Which Spring Boot and Spring Data ES versions do you use?","body":"Which Spring Boot and Spring Data ES versions do you use?"},{"owner":{"account_id":21985071,"reputation":3,"user_id":16259477,"display_name":"Siddhant Sharma"},"score":0,"creation_date":1647335516,"post_id":71479222,"comment_id":126339394,"body_markdown":"spring boot: 2.6.4, spring data ES: 4.3.2","body":"spring boot: 2.6.4, spring data ES: 4.3.2"},{"owner":{"account_id":5843921,"reputation":210875,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1647336351,"post_id":71479222,"comment_id":126339701,"body_markdown":"According to the [version matrix](https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#preface.versions), Spring Data ES does not yet support Elasticsearch 8. Also see [this issue](https://github.com/spring-projects/spring-data-elasticsearch/issues/2108#issuecomment-1067578984), you might need to use an earlier version of ES in the meantime.","body":"According to the <a href=\"https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#preface.versions\" rel=\"nofollow noreferrer\">version matrix</a>, Spring Data ES does not yet support Elasticsearch 8. Also see <a href=\"https://github.com/spring-projects/spring-data-elasticsearch/issues/2108#issuecomment-1067578984\" rel=\"nofollow noreferrer\">this issue</a>, you might need to use an earlier version of ES in the meantime."},{"owner":{"account_id":21985071,"reputation":3,"user_id":16259477,"display_name":"Siddhant Sharma"},"score":0,"creation_date":1647337482,"post_id":71479222,"comment_id":126340110,"body_markdown":"OMG I downloaded ES 7.15.2 and it Worked! Thank you so much!","body":"OMG I downloaded ES 7.15.2 and it Worked! Thank you so much!"},{"owner":{"account_id":5843921,"reputation":210875,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1647337584,"post_id":71479222,"comment_id":126340137,"body_markdown":"Awesome, glad it finally worked out! I think even 7.17.1 would work out","body":"Awesome, glad it finally worked out! I think even 7.17.1 would work out"}],"tags":[],"owner":{"account_id":5843921,"reputation":210875,"user_id":4604579,"display_name":"Val"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1647337625,"creation_date":1647333678,"answer_id":71479222,"question_id":71478330,"body_markdown":"ConnectionClosedException seems to hint at the fact that your Spring Boot application cannot establish a connection to your ES cluster.\r\n\r\nIt looks like you&#39;re using ES8, which has SSL/TLS on by default, so you would need to configure your Spring Boot application to use SSL instead.\r\n\r\nAt 6:00 into the video, `elasticsearch.url` in `application.properties` should be `https://localhost:9200` instead of just `localhost:9200`.\r\n\r\nHowever, as of March 15th 2022, it doesn&#39;t seem like [ES 8 is supported by Spring Data ES](https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#preface.versions) yet, you might need to revert to the ES 7.15+ release.","title":"Getting Exceptions while running a Spring boot app with elasticsearch","body":"<p>ConnectionClosedException seems to hint at the fact that your Spring Boot application cannot establish a connection to your ES cluster.</p>\n<p>It looks like you're using ES8, which has SSL/TLS on by default, so you would need to configure your Spring Boot application to use SSL instead.</p>\n<p>At 6:00 into the video, <code>elasticsearch.url</code> in <code>application.properties</code> should be <code>https://localhost:9200</code> instead of just <code>localhost:9200</code>.</p>\n<p>However, as of March 15th 2022, it doesn't seem like <a href=\"https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#preface.versions\" rel=\"nofollow noreferrer\">ES 8 is supported by Spring Data ES</a> yet, you might need to revert to the ES 7.15+ release.</p>\n"},{"tags":[],"owner":{"account_id":10464171,"reputation":41,"user_id":7714014,"display_name":"zenuve"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659373093,"creation_date":1659373093,"answer_id":73197139,"question_id":71478330,"body_markdown":"A working spring boot client config with SpringBoot 2.7.1 and Elastic 8.3.3\r\n\r\n```\r\n//Below 3 lines are added to make elastic client version 7.17.4 compatible with elastic server version 8x\r\n HttpHeaders compatibilityHeaders = new HttpHeaders();\r\n        compatibilityHeaders.add(&quot;Accept&quot;, &quot;application/vnd.elasticsearch+json;compatible-with=7&quot;);\r\n        compatibilityHeaders.add(&quot;Content-Type&quot;, &quot;application/vnd.elasticsearch+json;&quot;\r\n                + &quot;compatible-with=7&quot;);\r\n\r\n        final ClientConfiguration clientConfiguration =\r\n                ClientConfiguration\r\n                        .builder()\r\n                        .connectedTo(&lt;HostName without https://&gt; + &quot;:&quot; + &lt;Port&gt;)\r\n                        .usingSsl()\r\n                        .withBasicAuth(esConnectionDetails.getUsername(), esConnectionDetails.getPassword())\r\n                        .withDefaultHeaders(compatibilityHeaders)    // this variant for imperative code\r\n                        .build();\r\n\r\nRestHighLevelClient = RestClients.create(clientConfiguration).rest();\r\n```\r\n\r\n\r\nReference:- https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#elasticsearch.clients.rest","title":"Getting Exceptions while running a Spring boot app with elasticsearch","body":"<p>A working spring boot client config with SpringBoot 2.7.1 and Elastic 8.3.3</p>\n<pre><code>//Below 3 lines are added to make elastic client version 7.17.4 compatible with elastic server version 8x\n HttpHeaders compatibilityHeaders = new HttpHeaders();\n        compatibilityHeaders.add(&quot;Accept&quot;, &quot;application/vnd.elasticsearch+json;compatible-with=7&quot;);\n        compatibilityHeaders.add(&quot;Content-Type&quot;, &quot;application/vnd.elasticsearch+json;&quot;\n                + &quot;compatible-with=7&quot;);\n\n        final ClientConfiguration clientConfiguration =\n                ClientConfiguration\n                        .builder()\n                        .connectedTo(&lt;HostName without https://&gt; + &quot;:&quot; + &lt;Port&gt;)\n                        .usingSsl()\n                        .withBasicAuth(esConnectionDetails.getUsername(), esConnectionDetails.getPassword())\n                        .withDefaultHeaders(compatibilityHeaders)    // this variant for imperative code\n                        .build();\n\nRestHighLevelClient = RestClients.create(clientConfiguration).rest();\n</code></pre>\n<p>Reference:- <a href=\"https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#elasticsearch.clients.rest\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#elasticsearch.clients.rest</a></p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1687876559,"post_id":76558725,"comment_id":134996437,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/76558725/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":28899240,"reputation":1,"user_id":22134596,"display_name":"Sabab Ali Khan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687798264,"creation_date":1687798108,"answer_id":76558725,"question_id":71478330,"body_markdown":"    Above will get issue related to SSL certificates. To configure SSL in configuration use the below code.\r\n    \r\n                  @Bean\r\n                  @Override\r\n                  public RestHighLevelClient elasticsearchClient() {\r\n                  RestHighLevelClient client = null;\r\n                  try {\r\n                      final CredentialsProvider credentialsProvider = new BasicCredentialsProvider();\r\n                      credentialsProvider.setCredentials(AuthScope.ANY, new UsernamePasswordCredentials(&quot;elastic&quot;, &quot;fdfd65645thtyhu768&quot;));\r\n        \r\n                      SSLContextBuilder sslBuilder = SSLContexts.custom().loadTrustMaterial(null, (x509Certificates, s) -&gt; true);\r\n                      final SSLContext sslContext = sslBuilder.build();\r\n                      client = new RestHighLevelClient(RestClient.builder(new HttpHost(&quot;localhost&quot;, 9200, &quot;https&quot;))\r\n                                .setHttpClientConfigCallback(new HttpClientConfigCallback() {\r\n                                     @Override\r\n                                     public HttpAsyncClientBuilder customizeHttpClient(HttpAsyncClientBuilder httpClientBuilder) {\r\n                                          return httpClientBuilder.setSSLContext(sslContext)\r\n                                                   .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n                                                   .setDefaultCredentialsProvider(credentialsProvider);\r\n                                     }\r\n                                }).setRequestConfigCallback(new RestClientBuilder.RequestConfigCallback() {\r\n                                     @Override\r\n                                     public RequestConfig.Builder customizeRequestConfig(\r\n                                              RequestConfig.Builder requestConfigBuilder) {\r\n                                          return requestConfigBuilder.setConnectTimeout(5000).setSocketTimeout(120000);\r\n                                     }\r\n                                }));\r\n                       System.out.println(&quot;elasticsearch client created&quot;);\r\n                      return client;\r\n                  } catch (Exception exp) {\r\n                       System.out.println(&quot;Exception while client init {}&quot;, exp.getMessage());\r\n                  }\r\n                  return client;\r\n             }\r\n\r\n","title":"Getting Exceptions while running a Spring boot app with elasticsearch","body":"<pre><code>Above will get issue related to SSL certificates. To configure SSL in configuration use the below code.\n\n              @Bean\n              @Override\n              public RestHighLevelClient elasticsearchClient() {\n              RestHighLevelClient client = null;\n              try {\n                  final CredentialsProvider credentialsProvider = new BasicCredentialsProvider();\n                  credentialsProvider.setCredentials(AuthScope.ANY, new UsernamePasswordCredentials(&quot;elastic&quot;, &quot;fdfd65645thtyhu768&quot;));\n    \n                  SSLContextBuilder sslBuilder = SSLContexts.custom().loadTrustMaterial(null, (x509Certificates, s) -&gt; true);\n                  final SSLContext sslContext = sslBuilder.build();\n                  client = new RestHighLevelClient(RestClient.builder(new HttpHost(&quot;localhost&quot;, 9200, &quot;https&quot;))\n                            .setHttpClientConfigCallback(new HttpClientConfigCallback() {\n                                 @Override\n                                 public HttpAsyncClientBuilder customizeHttpClient(HttpAsyncClientBuilder httpClientBuilder) {\n                                      return httpClientBuilder.setSSLContext(sslContext)\n                                               .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n                                               .setDefaultCredentialsProvider(credentialsProvider);\n                                 }\n                            }).setRequestConfigCallback(new RestClientBuilder.RequestConfigCallback() {\n                                 @Override\n                                 public RequestConfig.Builder customizeRequestConfig(\n                                          RequestConfig.Builder requestConfigBuilder) {\n                                      return requestConfigBuilder.setConnectTimeout(5000).setSocketTimeout(120000);\n                                 }\n                            }));\n                   System.out.println(&quot;elasticsearch client created&quot;);\n                  return client;\n              } catch (Exception exp) {\n                   System.out.println(&quot;Exception while client init {}&quot;, exp.getMessage());\n              }\n              return client;\n         }\n</code></pre>\n"}],"owner":{"account_id":21985071,"reputation":3,"user_id":16259477,"display_name":"Siddhant Sharma"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10783,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71479222,"answer_count":3,"score":0,"last_activity_date":1687798264,"creation_date":1647329096,"question_id":71478330,"body_markdown":"I was following this tutorial: https://www.youtube.com/watch?v=IiZZAu2Qtp0&amp;ab_channel=LiliumCode\r\n\r\nand the only changes I made were that I was using maven with eclipse instead. The rest of the code is exactly the same. When I run the app I get:\r\n\r\n        org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;personController&#39; defined in file [D:\\Java Programs\\Spring\\elasticsearch\\target\\classes\\com\\elastic\\elasticsearch\\controller\\PersonController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;personService&#39; defined in file [D:\\Java Programs\\Spring\\elasticsearch\\target\\classes\\com\\elastic\\elasticsearch\\service\\PersonService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;personRepository&#39; defined in com.elastic.elasticsearch.repository.PersonRepository defined in @EnableElasticsearchRepositories declared on Config: Invocation of init method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception; nested exception is org.springframework.data.elasticsearch.UncategorizedElasticsearchException: java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed; nested exception is ElasticsearchException[java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed]; nested: ExecutionException[org.apache.http.ConnectionClosedException: Connection is closed]; nested: ConnectionClosedException[Connection is closed];\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.4.jar:2.6.4]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740) ~[spring-boot-2.6.4.jar:2.6.4]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415) ~[spring-boot-2.6.4.jar:2.6.4]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:303) ~[spring-boot-2.6.4.jar:2.6.4]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1312) ~[spring-boot-2.6.4.jar:2.6.4]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.4.jar:2.6.4]\r\n    \tat com.elastic.elasticsearch.ElasticsearchApplication.main(ElasticsearchApplication.java:10) ~[classes/:na]\r\n    Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;personService&#39; defined in file [D:\\Java Programs\\Spring\\elasticsearch\\target\\classes\\com\\elastic\\elasticsearch\\service\\PersonService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;personRepository&#39; defined in com.elastic.elasticsearch.repository.PersonRepository defined in @EnableElasticsearchRepositories declared on Config: Invocation of init method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception; nested exception is org.springframework.data.elasticsearch.UncategorizedElasticsearchException: java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed; nested exception is ElasticsearchException[java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed]; nested: ExecutionException[org.apache.http.ConnectionClosedException: Connection is closed]; nested: ConnectionClosedException[Connection is closed];\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \t... 19 common frames omitted\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;personRepository&#39; defined in com.elastic.elasticsearch.repository.PersonRepository defined in @EnableElasticsearchRepositories declared on Config: Invocation of init method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception; nested exception is org.springframework.data.elasticsearch.UncategorizedElasticsearchException: java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed; nested exception is ElasticsearchException[java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed]; nested: ExecutionException[org.apache.http.ConnectionClosedException: Connection is closed]; nested: ConnectionClosedException[Connection is closed];\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \t... 33 common frames omitted\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception; nested exception is org.springframework.data.elasticsearch.UncategorizedElasticsearchException: java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed; nested exception is ElasticsearchException[java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed]; nested: ExecutionException[org.apache.http.ConnectionClosedException: Connection is closed]; nested: ConnectionClosedException[Connection is closed];\r\n    \tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:224) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.data.repository.core.support.RepositoryFactorySupport.lambda$instantiateClass$5(RepositoryFactorySupport.java:578) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n    \tat java.base/java.util.Optional.map(Optional.java:260) ~[na:na]\r\n    \tat org.springframework.data.repository.core.support.RepositoryFactorySupport.instantiateClass(RepositoryFactorySupport.java:578) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n    \tat org.springframework.data.repository.core.support.RepositoryFactorySupport.getTargetRepositoryViaReflection(RepositoryFactorySupport.java:543) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n    \tat org.springframework.data.elasticsearch.repository.support.ElasticsearchRepositoryFactory.getTargetRepository(ElasticsearchRepositoryFactory.java:74) ~[spring-data-elasticsearch-4.3.2.jar:4.3.2]\r\n    \tat org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:324) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n    \tat org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:322) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n    \tat org.springframework.data.util.Lazy.getNullable(Lazy.java:230) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n    \tat org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n    \tat org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:328) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n    \tat org.springframework.data.elasticsearch.repository.support.ElasticsearchRepositoryFactoryBean.afterPropertiesSet(ElasticsearchRepositoryFactoryBean.java:69) ~[spring-data-elasticsearch-4.3.2.jar:4.3.2]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \t... 44 common frames omitted\r\n    Caused by: org.springframework.data.elasticsearch.UncategorizedElasticsearchException: java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed; nested exception is ElasticsearchException[java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed]; nested: ExecutionException[org.apache.http.ConnectionClosedException: Connection is closed]; nested: ConnectionClosedException[Connection is closed];\r\n    \tat org.springframework.data.elasticsearch.core.ElasticsearchExceptionTranslator.translateExceptionIfPossible(ElasticsearchExceptionTranslator.java:72) ~[spring-data-elasticsearch-4.3.2.jar:4.3.2]\r\n    \tat org.springframework.data.elasticsearch.core.ElasticsearchRestTemplate.translateException(ElasticsearchRestTemplate.java:427) ~[spring-data-elasticsearch-4.3.2.jar:4.3.2]\r\n    \tat org.springframework.data.elasticsearch.core.ElasticsearchRestTemplate.execute(ElasticsearchRestTemplate.java:410) ~[spring-data-elasticsearch-4.3.2.jar:4.3.2]\r\n    \tat org.springframework.data.elasticsearch.core.RestIndexTemplate.doExists(RestIndexTemplate.java:103) ~[spring-data-elasticsearch-4.3.2.jar:4.3.2]\r\n    \tat org.springframework.data.elasticsearch.core.AbstractIndexTemplate.exists(AbstractIndexTemplate.java:134) ~[spring-data-elasticsearch-4.3.2.jar:4.3.2]\r\n    \tat org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository.&lt;init&gt;(SimpleElasticsearchRepository.java:92) ~[spring-data-elasticsearch-4.3.2.jar:4.3.2]\r\n    \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]\r\n    \tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:211) ~[spring-beans-5.3.16.jar:5.3.16]\r\n    \t... 57 common frames omitted\r\n    Caused by: org.elasticsearch.ElasticsearchException: java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed\r\n    \tat org.elasticsearch.client.RestHighLevelClient.performClientRequest(RestHighLevelClient.java:2078) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\r\n    \tat org.elasticsearch.client.RestHighLevelClient.internalPerformRequest(RestHighLevelClient.java:1732) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\r\n    \tat org.elasticsearch.client.RestHighLevelClient.performRequest(RestHighLevelClient.java:1717) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\r\n    \tat org.elasticsearch.client.IndicesClient.exists(IndicesClient.java:963) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\r\n    \tat org.springframework.data.elasticsearch.core.RestIndexTemplate.lambda$doExists$2(RestIndexTemplate.java:103) ~[spring-data-elasticsearch-4.3.2.jar:4.3.2]\r\n    \tat org.springframework.data.elasticsearch.core.ElasticsearchRestTemplate.execute(ElasticsearchRestTemplate.java:408) ~[spring-data-elasticsearch-4.3.2.jar:4.3.2]\r\n    \t... 66 common frames omitted\r\n    Caused by: java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed\r\n    \tat org.elasticsearch.common.util.concurrent.BaseFuture$Sync.getValue(BaseFuture.java:262) ~[elasticsearch-7.15.2.jar:7.15.2]\r\n    \tat org.elasticsearch.common.util.concurrent.BaseFuture$Sync.get(BaseFuture.java:249) ~[elasticsearch-7.15.2.jar:7.15.2]\r\n    \tat org.elasticsearch.common.util.concurrent.BaseFuture.get(BaseFuture.java:76) ~[elasticsearch-7.15.2.jar:7.15.2]\r\n    \tat org.elasticsearch.client.RestHighLevelClient.performClientRequest(RestHighLevelClient.java:2075) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\r\n    \t... 71 common frames omitted\r\n    Caused by: org.apache.http.ConnectionClosedException: Connection is closed\r\n    \tat org.apache.http.nio.protocol.HttpAsyncRequestExecutor.endOfInput(HttpAsyncRequestExecutor.java:356) ~[httpcore-nio-4.4.15.jar:4.4.15]\r\n    \tat org.apache.http.impl.nio.DefaultNHttpClientConnection.consumeInput(DefaultNHttpClientConnection.java:261) ~[httpcore-nio-4.4.15.jar:4.4.15]\r\n    \tat org.apache.http.impl.nio.client.InternalIODispatch.onInputReady(InternalIODispatch.java:87) ~[httpasyncclient-4.1.5.jar:4.1.5]\r\n    \tat org.apache.http.impl.nio.client.InternalIODispatch.onInputReady(InternalIODispatch.java:40) ~[httpasyncclient-4.1.5.jar:4.1.5]\r\n    \tat org.apache.http.impl.nio.reactor.AbstractIODispatch.inputReady(AbstractIODispatch.java:114) ~[httpcore-nio-4.4.15.jar:4.4.15]\r\n    \tat org.apache.http.impl.nio.reactor.BaseIOReactor.readable(BaseIOReactor.java:162) ~[httpcore-nio-4.4.15.jar:4.4.15]\r\n    \tat org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvent(AbstractIOReactor.java:337) ~[httpcore-nio-4.4.15.jar:4.4.15]\r\n    \tat org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvents(AbstractIOReactor.java:315) ~[httpcore-nio-4.4.15.jar:4.4.15]\r\n    \tat org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:276) ~[httpcore-nio-4.4.15.jar:4.4.15]\r\n    \tat org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104) ~[httpcore-nio-4.4.15.jar:4.4.15]\r\n    \tat org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591) ~[httpcore-nio-4.4.15.jar:4.4.15]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\nMy elasticsearch.yml:\r\n\r\n    # ======================== Elasticsearch Configuration =========================\r\n    #\r\n    # NOTE: Elasticsearch comes with reasonable defaults for most settings.\r\n    #       Before you set out to tweak and tune the configuration, make sure you\r\n    #       understand what are you trying to accomplish and the consequences.\r\n    #\r\n    # The primary way of configuring a node is via this file. This template lists\r\n    # the most important settings you may want to configure for a production cluster.\r\n    #\r\n    # Please consult the documentation for further information on configuration options:\r\n    # https://www.elastic.co/guide/en/elasticsearch/reference/index.html\r\n    #\r\n    # ---------------------------------- Cluster -----------------------------------\r\n    #\r\n    # Use a descriptive name for your cluster:\r\n    #\r\n    cluster.name: elastic_course\r\n    #\r\n    # ------------------------------------ Node ------------------------------------\r\n    #\r\n    # Use a descriptive name for the node:\r\n    #\r\n    node.name: crud_node\r\n    #\r\n    # Add custom attributes to the node:\r\n    #\r\n    #node.attr.rack: r1\r\n    #\r\n    # ----------------------------------- Paths ------------------------------------\r\n    #\r\n    # Path to directory where to store the data (separate multiple locations by comma):\r\n    #\r\n    #path.data: /path/to/data\r\n    #\r\n    # Path to log files:\r\n    #\r\n    #path.logs: /path/to/logs\r\n    #\r\n    # ----------------------------------- Memory -----------------------------------\r\n    #\r\n    # Lock the memory on startup:\r\n    #\r\n    #bootstrap.memory_lock: true\r\n    #\r\n    # Make sure that the heap size is set to about half the memory available\r\n    # on the system and that the owner of the process is allowed to use this\r\n    # limit.\r\n    #\r\n    # Elasticsearch performs poorly when the system is swapping the memory.\r\n    #\r\n    # ---------------------------------- Network -----------------------------------\r\n    #\r\n    # By default Elasticsearch is only accessible on localhost. Set a different\r\n    # address here to expose this node on the network:\r\n    #\r\n    #network.host: 192.168.0.1\r\n    #\r\n    # By default Elasticsearch listens for HTTP traffic on the first free port it\r\n    # finds starting at 9200. Set a specific HTTP port here:\r\n    #\r\n    #http.port: 9200\r\n    #\r\n    # For more information, consult the network module documentation.\r\n    #\r\n    # --------------------------------- Discovery ----------------------------------\r\n    #\r\n    # Pass an initial list of hosts to perform discovery when this node is started:\r\n    # The default list of hosts is [&quot;127.0.0.1&quot;, &quot;[::1]&quot;]\r\n    #\r\n    #discovery.seed_hosts: [&quot;host1&quot;]\r\n    #\r\n    #discovery.type: single-node\r\n    #\r\n    # Bootstrap the cluster using an initial set of master-eligible nodes:\r\n    #\r\n    #cluster.initial_master_nodes: [&quot;node-1&quot;]\r\n    #\r\n    # For more information, consult the discovery and cluster formation module documentation.\r\n    #\r\n    # ---------------------------------- Various -----------------------------------\r\n    #\r\n    # Allow wildcard deletion of indices:\r\n    #\r\n    #action.destructive_requires_name: false\r\n    \r\n    #----------------------- BEGIN SECURITY AUTO CONFIGURATION -----------------------\r\n    #\r\n    # The following settings, TLS certificates, and keys have been automatically\r\n    # generated to configure Elasticsearch security features on 10-03-2022 10:08:43\r\n    #\r\n    # --------------------------------------------------------------------------------\r\n    \r\n    # Enable security features\r\n    xpack.security.enabled: true\r\n    \r\n    xpack.security.enrollment.enabled: true\r\n    \r\n    # Enable encryption for HTTP API client connections, such as Kibana, Logstash, and Agents\r\n    xpack.security.http.ssl:\r\n      enabled: true\r\n      keystore.path: certs/http.p12\r\n    \r\n    # Enable encryption and mutual authentication between cluster nodes\r\n    xpack.security.transport.ssl:\r\n      enabled: true\r\n      verification_mode: certificate\r\n      keystore.path: certs/transport.p12\r\n      truststore.path: certs/transport.p12\r\n    # Create a new cluster with the current node only\r\n    # Additional nodes can still join the cluster later\r\n    cluster.initial_master_nodes: [&quot;DESKTOP-0O0S7HQ&quot;]\r\n    \r\n    # Allow HTTP API connections from localhost and local networks\r\n    # Connections are encrypted and require user authentication\r\n    http.host: [_local_, _site_]\r\n    \r\n    # Allow other nodes to join the cluster from localhost and local networks\r\n    # Connections are encrypted and mutually authenticated\r\n    #transport.host: [_local_, _site_]\r\n    \r\n    #----------------------- END SECURITY AUTO CONFIGURATION -------------------------\r\n\r\nI have tried out searching the exceptions online but nothing seems to work. Please help me in figuring this out. Thank you.","title":"Getting Exceptions while running a Spring boot app with elasticsearch","body":"<p>I was following this tutorial: <a href=\"https://www.youtube.com/watch?v=IiZZAu2Qtp0&amp;ab_channel=LiliumCode\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=IiZZAu2Qtp0&amp;ab_channel=LiliumCode</a></p>\n<p>and the only changes I made were that I was using maven with eclipse instead. The rest of the code is exactly the same. When I run the app I get:</p>\n<pre><code>    org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'personController' defined in file [D:\\Java Programs\\Spring\\elasticsearch\\target\\classes\\com\\elastic\\elasticsearch\\controller\\PersonController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'personService' defined in file [D:\\Java Programs\\Spring\\elasticsearch\\target\\classes\\com\\elastic\\elasticsearch\\service\\PersonService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'personRepository' defined in com.elastic.elasticsearch.repository.PersonRepository defined in @EnableElasticsearchRepositories declared on Config: Invocation of init method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception; nested exception is org.springframework.data.elasticsearch.UncategorizedElasticsearchException: java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed; nested exception is ElasticsearchException[java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed]; nested: ExecutionException[org.apache.http.ConnectionClosedException: Connection is closed]; nested: ConnectionClosedException[Connection is closed];\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.16.jar:5.3.16]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.16.jar:5.3.16]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.4.jar:2.6.4]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740) ~[spring-boot-2.6.4.jar:2.6.4]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415) ~[spring-boot-2.6.4.jar:2.6.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:303) ~[spring-boot-2.6.4.jar:2.6.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1312) ~[spring-boot-2.6.4.jar:2.6.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.4.jar:2.6.4]\n    at com.elastic.elasticsearch.ElasticsearchApplication.main(ElasticsearchApplication.java:10) ~[classes/:na]\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'personService' defined in file [D:\\Java Programs\\Spring\\elasticsearch\\target\\classes\\com\\elastic\\elasticsearch\\service\\PersonService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'personRepository' defined in com.elastic.elasticsearch.repository.PersonRepository defined in @EnableElasticsearchRepositories declared on Config: Invocation of init method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception; nested exception is org.springframework.data.elasticsearch.UncategorizedElasticsearchException: java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed; nested exception is ElasticsearchException[java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed]; nested: ExecutionException[org.apache.http.ConnectionClosedException: Connection is closed]; nested: ConnectionClosedException[Connection is closed];\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.16.jar:5.3.16]\n    ... 19 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'personRepository' defined in com.elastic.elasticsearch.repository.PersonRepository defined in @EnableElasticsearchRepositories declared on Config: Invocation of init method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception; nested exception is org.springframework.data.elasticsearch.UncategorizedElasticsearchException: java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed; nested exception is ElasticsearchException[java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed]; nested: ExecutionException[org.apache.http.ConnectionClosedException: Connection is closed]; nested: ConnectionClosedException[Connection is closed];\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.16.jar:5.3.16]\n    ... 33 common frames omitted\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception; nested exception is org.springframework.data.elasticsearch.UncategorizedElasticsearchException: java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed; nested exception is ElasticsearchException[java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed]; nested: ExecutionException[org.apache.http.ConnectionClosedException: Connection is closed]; nested: ConnectionClosedException[Connection is closed];\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:224) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport.lambda$instantiateClass$5(RepositoryFactorySupport.java:578) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at java.base/java.util.Optional.map(Optional.java:260) ~[na:na]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport.instantiateClass(RepositoryFactorySupport.java:578) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getTargetRepositoryViaReflection(RepositoryFactorySupport.java:543) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.elasticsearch.repository.support.ElasticsearchRepositoryFactory.getTargetRepository(ElasticsearchRepositoryFactory.java:74) ~[spring-data-elasticsearch-4.3.2.jar:4.3.2]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:324) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:322) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.util.Lazy.getNullable(Lazy.java:230) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:328) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.elasticsearch.repository.support.ElasticsearchRepositoryFactoryBean.afterPropertiesSet(ElasticsearchRepositoryFactoryBean.java:69) ~[spring-data-elasticsearch-4.3.2.jar:4.3.2]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.16.jar:5.3.16]\n    ... 44 common frames omitted\nCaused by: org.springframework.data.elasticsearch.UncategorizedElasticsearchException: java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed; nested exception is ElasticsearchException[java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed]; nested: ExecutionException[org.apache.http.ConnectionClosedException: Connection is closed]; nested: ConnectionClosedException[Connection is closed];\n    at org.springframework.data.elasticsearch.core.ElasticsearchExceptionTranslator.translateExceptionIfPossible(ElasticsearchExceptionTranslator.java:72) ~[spring-data-elasticsearch-4.3.2.jar:4.3.2]\n    at org.springframework.data.elasticsearch.core.ElasticsearchRestTemplate.translateException(ElasticsearchRestTemplate.java:427) ~[spring-data-elasticsearch-4.3.2.jar:4.3.2]\n    at org.springframework.data.elasticsearch.core.ElasticsearchRestTemplate.execute(ElasticsearchRestTemplate.java:410) ~[spring-data-elasticsearch-4.3.2.jar:4.3.2]\n    at org.springframework.data.elasticsearch.core.RestIndexTemplate.doExists(RestIndexTemplate.java:103) ~[spring-data-elasticsearch-4.3.2.jar:4.3.2]\n    at org.springframework.data.elasticsearch.core.AbstractIndexTemplate.exists(AbstractIndexTemplate.java:134) ~[spring-data-elasticsearch-4.3.2.jar:4.3.2]\n    at org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository.&lt;init&gt;(SimpleElasticsearchRepository.java:92) ~[spring-data-elasticsearch-4.3.2.jar:4.3.2]\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:211) ~[spring-beans-5.3.16.jar:5.3.16]\n    ... 57 common frames omitted\nCaused by: org.elasticsearch.ElasticsearchException: java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed\n    at org.elasticsearch.client.RestHighLevelClient.performClientRequest(RestHighLevelClient.java:2078) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\n    at org.elasticsearch.client.RestHighLevelClient.internalPerformRequest(RestHighLevelClient.java:1732) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\n    at org.elasticsearch.client.RestHighLevelClient.performRequest(RestHighLevelClient.java:1717) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\n    at org.elasticsearch.client.IndicesClient.exists(IndicesClient.java:963) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\n    at org.springframework.data.elasticsearch.core.RestIndexTemplate.lambda$doExists$2(RestIndexTemplate.java:103) ~[spring-data-elasticsearch-4.3.2.jar:4.3.2]\n    at org.springframework.data.elasticsearch.core.ElasticsearchRestTemplate.execute(ElasticsearchRestTemplate.java:408) ~[spring-data-elasticsearch-4.3.2.jar:4.3.2]\n    ... 66 common frames omitted\nCaused by: java.util.concurrent.ExecutionException: org.apache.http.ConnectionClosedException: Connection is closed\n    at org.elasticsearch.common.util.concurrent.BaseFuture$Sync.getValue(BaseFuture.java:262) ~[elasticsearch-7.15.2.jar:7.15.2]\n    at org.elasticsearch.common.util.concurrent.BaseFuture$Sync.get(BaseFuture.java:249) ~[elasticsearch-7.15.2.jar:7.15.2]\n    at org.elasticsearch.common.util.concurrent.BaseFuture.get(BaseFuture.java:76) ~[elasticsearch-7.15.2.jar:7.15.2]\n    at org.elasticsearch.client.RestHighLevelClient.performClientRequest(RestHighLevelClient.java:2075) ~[elasticsearch-rest-high-level-client-7.15.2.jar:7.15.2]\n    ... 71 common frames omitted\nCaused by: org.apache.http.ConnectionClosedException: Connection is closed\n    at org.apache.http.nio.protocol.HttpAsyncRequestExecutor.endOfInput(HttpAsyncRequestExecutor.java:356) ~[httpcore-nio-4.4.15.jar:4.4.15]\n    at org.apache.http.impl.nio.DefaultNHttpClientConnection.consumeInput(DefaultNHttpClientConnection.java:261) ~[httpcore-nio-4.4.15.jar:4.4.15]\n    at org.apache.http.impl.nio.client.InternalIODispatch.onInputReady(InternalIODispatch.java:87) ~[httpasyncclient-4.1.5.jar:4.1.5]\n    at org.apache.http.impl.nio.client.InternalIODispatch.onInputReady(InternalIODispatch.java:40) ~[httpasyncclient-4.1.5.jar:4.1.5]\n    at org.apache.http.impl.nio.reactor.AbstractIODispatch.inputReady(AbstractIODispatch.java:114) ~[httpcore-nio-4.4.15.jar:4.4.15]\n    at org.apache.http.impl.nio.reactor.BaseIOReactor.readable(BaseIOReactor.java:162) ~[httpcore-nio-4.4.15.jar:4.4.15]\n    at org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvent(AbstractIOReactor.java:337) ~[httpcore-nio-4.4.15.jar:4.4.15]\n    at org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvents(AbstractIOReactor.java:315) ~[httpcore-nio-4.4.15.jar:4.4.15]\n    at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:276) ~[httpcore-nio-4.4.15.jar:4.4.15]\n    at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104) ~[httpcore-nio-4.4.15.jar:4.4.15]\n    at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591) ~[httpcore-nio-4.4.15.jar:4.4.15]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n<p>My elasticsearch.yml:</p>\n<pre><code># ======================== Elasticsearch Configuration =========================\n#\n# NOTE: Elasticsearch comes with reasonable defaults for most settings.\n#       Before you set out to tweak and tune the configuration, make sure you\n#       understand what are you trying to accomplish and the consequences.\n#\n# The primary way of configuring a node is via this file. This template lists\n# the most important settings you may want to configure for a production cluster.\n#\n# Please consult the documentation for further information on configuration options:\n# https://www.elastic.co/guide/en/elasticsearch/reference/index.html\n#\n# ---------------------------------- Cluster -----------------------------------\n#\n# Use a descriptive name for your cluster:\n#\ncluster.name: elastic_course\n#\n# ------------------------------------ Node ------------------------------------\n#\n# Use a descriptive name for the node:\n#\nnode.name: crud_node\n#\n# Add custom attributes to the node:\n#\n#node.attr.rack: r1\n#\n# ----------------------------------- Paths ------------------------------------\n#\n# Path to directory where to store the data (separate multiple locations by comma):\n#\n#path.data: /path/to/data\n#\n# Path to log files:\n#\n#path.logs: /path/to/logs\n#\n# ----------------------------------- Memory -----------------------------------\n#\n# Lock the memory on startup:\n#\n#bootstrap.memory_lock: true\n#\n# Make sure that the heap size is set to about half the memory available\n# on the system and that the owner of the process is allowed to use this\n# limit.\n#\n# Elasticsearch performs poorly when the system is swapping the memory.\n#\n# ---------------------------------- Network -----------------------------------\n#\n# By default Elasticsearch is only accessible on localhost. Set a different\n# address here to expose this node on the network:\n#\n#network.host: 192.168.0.1\n#\n# By default Elasticsearch listens for HTTP traffic on the first free port it\n# finds starting at 9200. Set a specific HTTP port here:\n#\n#http.port: 9200\n#\n# For more information, consult the network module documentation.\n#\n# --------------------------------- Discovery ----------------------------------\n#\n# Pass an initial list of hosts to perform discovery when this node is started:\n# The default list of hosts is [&quot;127.0.0.1&quot;, &quot;[::1]&quot;]\n#\n#discovery.seed_hosts: [&quot;host1&quot;]\n#\n#discovery.type: single-node\n#\n# Bootstrap the cluster using an initial set of master-eligible nodes:\n#\n#cluster.initial_master_nodes: [&quot;node-1&quot;]\n#\n# For more information, consult the discovery and cluster formation module documentation.\n#\n# ---------------------------------- Various -----------------------------------\n#\n# Allow wildcard deletion of indices:\n#\n#action.destructive_requires_name: false\n\n#----------------------- BEGIN SECURITY AUTO CONFIGURATION -----------------------\n#\n# The following settings, TLS certificates, and keys have been automatically\n# generated to configure Elasticsearch security features on 10-03-2022 10:08:43\n#\n# --------------------------------------------------------------------------------\n\n# Enable security features\nxpack.security.enabled: true\n\nxpack.security.enrollment.enabled: true\n\n# Enable encryption for HTTP API client connections, such as Kibana, Logstash, and Agents\nxpack.security.http.ssl:\n  enabled: true\n  keystore.path: certs/http.p12\n\n# Enable encryption and mutual authentication between cluster nodes\nxpack.security.transport.ssl:\n  enabled: true\n  verification_mode: certificate\n  keystore.path: certs/transport.p12\n  truststore.path: certs/transport.p12\n# Create a new cluster with the current node only\n# Additional nodes can still join the cluster later\ncluster.initial_master_nodes: [&quot;DESKTOP-0O0S7HQ&quot;]\n\n# Allow HTTP API connections from localhost and local networks\n# Connections are encrypted and require user authentication\nhttp.host: [_local_, _site_]\n\n# Allow other nodes to join the cluster from localhost and local networks\n# Connections are encrypted and mutually authenticated\n#transport.host: [_local_, _site_]\n\n#----------------------- END SECURITY AUTO CONFIGURATION -------------------------\n</code></pre>\n<p>I have tried out searching the exceptions online but nothing seems to work. Please help me in figuring this out. Thank you.</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":10075353,"reputation":1753,"user_id":7447660,"display_name":"Koenigsberg"},"score":0,"creation_date":1629808114,"post_id":68907511,"comment_id":121780109,"body_markdown":"You cannot have two different values mapped to the same key in a simple `Map`.","body":"You cannot have two different values mapped to the same key in a simple <code>Map</code>."},{"owner":{"account_id":2629478,"reputation":7504,"user_id":2275818,"accept_rate":100,"display_name":"Anthony Raymond"},"score":0,"creation_date":1629808115,"post_id":68907511,"comment_id":121780111,"body_markdown":"I believe that it will need a pre-process. But what do YOU want to do with the duplicated value? sum the cableType, keep the first one , keep the last, ...","body":"I believe that it will need a pre-process. But what do YOU want to do with the duplicated value? sum the cableType, keep the first one , keep the last, ..."}],"answers":[{"comments":[{"owner":{"account_id":2629478,"reputation":7504,"user_id":2275818,"accept_rate":100,"display_name":"Anthony Raymond"},"score":3,"creation_date":1629808299,"post_id":68907612,"comment_id":121780181,"body_markdown":"Nice one, didn&#39;t knew the collector could take a lambda to fix duplicate keys","body":"Nice one, didn&#39;t knew the collector could take a lambda to fix duplicate keys"},{"owner":{"account_id":190956,"reputation":316,"user_id":431214,"display_name":"EndlessLoop"},"score":2,"creation_date":1647552547,"post_id":68907612,"comment_id":126406905,"body_markdown":"API Docs [here](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-).","body":"API Docs <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-\" rel=\"nofollow noreferrer\">here</a>."}],"tags":[],"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"comment_count":2,"down_vote_count":0,"up_vote_count":38,"is_accepted":true,"score":38,"last_activity_date":1629808163,"creation_date":1629808163,"answer_id":68907612,"question_id":68907511,"body_markdown":"To avoid this error, you need to take one of the duplicate entries for example, to do this you need:\r\n\r\n    .collect(Collectors.toMap(Rule::getId, Rule::getCableType, (r1, r2) -&gt; r1));","title":"Duplicate key (attempted merging values x and x)","body":"<p>To avoid this error, you need to take one of the duplicate entries for example, to do this you need:</p>\n<pre><code>.collect(Collectors.toMap(Rule::getId, Rule::getCableType, (r1, r2) -&gt; r1));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5679776,"reputation":51,"user_id":4491418,"display_name":"Steven Dewey"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684984831,"creation_date":1684984831,"answer_id":76328699,"question_id":68907511,"body_markdown":"It is also worth noting that prior to the `.collect` you may want to consider a `.sorted(Comparator.comparing(rule -&gt; rule.cableType))` or something like that, so that way you can be intentional about which values are kept in a duplicate key situation. \r\n\r\nThe answer from @Youcef above surely gets rid of the exception, but the value selected for the duplicate key is based on whatever order the list is in currently. ","title":"Duplicate key (attempted merging values x and x)","body":"<p>It is also worth noting that prior to the <code>.collect</code> you may want to consider a <code>.sorted(Comparator.comparing(rule -&gt; rule.cableType))</code> or something like that, so that way you can be intentional about which values are kept in a duplicate key situation.</p>\n<p>The answer from @Youcef above surely gets rid of the exception, but the value selected for the duplicate key is based on whatever order the list is in currently.</p>\n"},{"comments":[{"owner":{"account_id":22506547,"reputation":980,"user_id":16702058,"display_name":"Hi computer"},"score":0,"creation_date":1700132757,"post_id":76558668,"comment_id":136618346,"body_markdown":"How to distinguish different Rule object? Aren\\`t they all unique for data like OP offered `(1, 10), (1,40)`? So I don\\`t think this will work.","body":"How to distinguish different Rule object? Aren`t they all unique for data like OP offered <code>(1, 10), (1,40)</code>? So I don`t think this will work."}],"tags":[],"owner":{"account_id":3829184,"reputation":649,"user_id":3175251,"display_name":"RoyalBigMack"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687797654,"creation_date":1687797654,"answer_id":76558668,"question_id":68907511,"body_markdown":"I know the question is already solved but i just found out of this cool `.distinct()` operator.\r\n\r\nso my suggestion is to use:\r\n\r\n    Map&lt;Integer, Long&gt; map = ruleList.stream().distinct().collect(Collectors.toMap(Rule::getId, Rule::getCableType));\r\n\r\n","title":"Duplicate key (attempted merging values x and x)","body":"<p>I know the question is already solved but i just found out of this cool <code>.distinct()</code> operator.</p>\n<p>so my suggestion is to use:</p>\n<pre><code>Map&lt;Integer, Long&gt; map = ruleList.stream().distinct().collect(Collectors.toMap(Rule::getId, Rule::getCableType));\n</code></pre>\n"}],"owner":{"display_name":"user13034249"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20517,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":68907612,"answer_count":3,"score":19,"last_activity_date":1687797654,"creation_date":1629807746,"question_id":68907511,"body_markdown":"I have a simple class:\r\n```\r\npublic class Rule {\r\n    int id;\r\n    long cableType;\r\n}\r\n```\r\nI want to convert a list with objects of this class to `Map&lt;Integer, Long&gt;`, so I wrote code:\r\n```\r\nMap&lt;Integer, Long&gt; map = ruleList.stream().collect(Collectors.toMap(Rule::getId, Rule::getCableType));\r\n```\r\nThe list has a duplication like `(1, 10), (1,40)` and when I&#39;m running this code I get this exception:\r\n```\r\nException in thread &quot;main&quot; java.lang.IllegalStateException: Duplicate key 21 (attempted merging values 31 and 30)\r\n```\r\n\r\nHow can I fix this? ","title":"Duplicate key (attempted merging values x and x)","body":"<p>I have a simple class:</p>\n<pre><code>public class Rule {\n    int id;\n    long cableType;\n}\n</code></pre>\n<p>I want to convert a list with objects of this class to <code>Map&lt;Integer, Long&gt;</code>, so I wrote code:</p>\n<pre><code>Map&lt;Integer, Long&gt; map = ruleList.stream().collect(Collectors.toMap(Rule::getId, Rule::getCableType));\n</code></pre>\n<p>The list has a duplication like <code>(1, 10), (1,40)</code> and when I'm running this code I get this exception:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.IllegalStateException: Duplicate key 21 (attempted merging values 31 and 30)\n</code></pre>\n<p>How can I fix this?</p>\n"},{"tags":["java","netbeans","ide","config"],"comments":[{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":1,"creation_date":1687810070,"post_id":76558635,"comment_id":134985999,"body_markdown":"Do either of the answers to [How to change the color of NetBeans cursor?](https://superuser.com/q/1368052) over on superuser help you?","body":"Do either of the answers to <a href=\"https://superuser.com/q/1368052\">How to change the color of NetBeans cursor?</a> over on superuser help you?"},{"owner":{"account_id":27638660,"reputation":1,"user_id":22134494,"display_name":"Yb-M"},"score":0,"creation_date":1687985967,"post_id":76558635,"comment_id":135015043,"body_markdown":"I tried what it says, but it doesn&#39;t work for me either. :(","body":"I tried what it says, but it doesn&#39;t work for me either. :("},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1687989747,"post_id":76558635,"comment_id":135015569,"body_markdown":"OK. I just tried [the answer posted by user Mart&#237;](https://superuser.com/a/1376250) and it didn&#39;t work for me either. But then I followed the advice in Mart&#237;&#39;s comment below their answer and it worked! Did you specifically try the suggestions in that comment? If you are still stuck I will post a step-by-step answer because changing the cursor color is definitely possible.","body":"OK. I just tried <a href=\"https://superuser.com/a/1376250\">the answer posted by user Mart&#237;</a> and it didn&#39;t work for me either. But then I followed the advice in Mart&#237;&#39;s comment below their answer and it worked! Did you specifically try the suggestions in that comment? If you are still stuck I will post a step-by-step answer because changing the cursor color is definitely possible."}],"owner":{"account_id":27638660,"reputation":1,"user_id":22134494,"display_name":"Yb-M"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687797598,"creation_date":1687797439,"question_id":76558635,"body_markdown":"I want to change the color of the line that appears while I am typing to indicate where in the text I am (current line marker). I&#39;m using NetBeans  18 and it currently has a dark color and I can&#39;t see it with the naked eye. What part of the configuration is that part of.\r\n\r\n[Capture of how the current line marker is](https://i.stack.imgur.com/CPGfC.png)\r\n\r\nI expected to find it in the part of Fonts &amp; Color, but it was not like that.","title":"How can I change the color of the current line marker in NetBeans 18?","body":"<p>I want to change the color of the line that appears while I am typing to indicate where in the text I am (current line marker). I'm using NetBeans  18 and it currently has a dark color and I can't see it with the naked eye. What part of the configuration is that part of.</p>\n<p><a href=\"https://i.stack.imgur.com/CPGfC.png\" rel=\"nofollow noreferrer\">Capture of how the current line marker is</a></p>\n<p>I expected to find it in the part of Fonts &amp; Color, but it was not like that.</p>\n"},{"tags":["java","package","java-17"],"comments":[{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":1,"creation_date":1687713554,"post_id":76550233,"comment_id":134971727,"body_markdown":"Have you tried with add-opens for that package name as well?","body":"Have you tried with add-opens for that package name as well?"},{"owner":{"account_id":9893206,"reputation":791,"user_id":7325581,"accept_rate":20,"display_name":"Michael Tsai"},"score":0,"creation_date":1687743864,"post_id":76550233,"comment_id":134974549,"body_markdown":"@DuncG tried but not work","body":"@DuncG tried but not work"}],"answers":[{"comments":[{"owner":{"account_id":9893206,"reputation":791,"user_id":7325581,"accept_rate":20,"display_name":"Michael Tsai"},"score":0,"creation_date":1687764258,"post_id":76553520,"comment_id":134976733,"body_markdown":"it still not work","body":"it still not work"},{"owner":{"account_id":9893206,"reputation":791,"user_id":7325581,"accept_rate":20,"display_name":"Michael Tsai"},"score":0,"creation_date":1687764603,"post_id":76553520,"comment_id":134976810,"body_markdown":"After I clicked maven install, it shows &quot;error: package com.sun.tools.javac.code is not visible&quot;","body":"After I clicked maven install, it shows &quot;error: package com.sun.tools.javac.code is not visible&quot;"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1687776193,"post_id":76553520,"comment_id":134979035,"body_markdown":"@MichaelTsai do you expect us to write a new answer for every package you are using?","body":"@MichaelTsai do you expect us to write a new answer for every package you are using?"},{"owner":{"account_id":9893206,"reputation":791,"user_id":7325581,"accept_rate":20,"display_name":"Michael Tsai"},"score":0,"creation_date":1687782051,"post_id":76553520,"comment_id":134980233,"body_markdown":"@Holger no, I already added all using package but it still show using packages is not visible.","body":"@Holger no, I already added all using package but it still show using packages is not visible."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1687787520,"post_id":76553520,"comment_id":134981471,"body_markdown":"What this answer is telling you, is that you are using `--add-opens` but not `--add-exports`. Regardless of which package.","body":"What this answer is telling you, is that you are using <code>--add-opens</code> but not <code>--add-exports</code>. Regardless of which package."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1687797488,"post_id":76553520,"comment_id":134983802,"body_markdown":"@MichaelTsai, interesting, as I thought that would work.  Try the following question and answer, _https://stackoverflow.com/questions/10667187/error-package-com-sun-tools-javac-util-does-not-exist_.","body":"@MichaelTsai, interesting, as I thought that would work.  Try the following question and answer, <i><a href=\"https://stackoverflow.com/questions/10667187/error-package-com-sun-tools-javac-util-does-not-exist\" title=\"error package com sun tools javac util does not exist\">stackoverflow.com/questions/10667187/&hellip;</a></i>."},{"owner":{"account_id":9893206,"reputation":791,"user_id":7325581,"accept_rate":20,"display_name":"Michael Tsai"},"score":0,"creation_date":1687834166,"post_id":76553520,"comment_id":134988470,"body_markdown":"@Holger I actually used --add-exports","body":"@Holger I actually used --add-exports"},{"owner":{"account_id":9893206,"reputation":791,"user_id":7325581,"accept_rate":20,"display_name":"Michael Tsai"},"score":1,"creation_date":1687834212,"post_id":76553520,"comment_id":134988475,"body_markdown":"@Reilas I&#39;ve found the reason. I should not use &lt;fork&gt;true&lt;/fork&gt;. After I removed this, everything works. Thanks","body":"@Reilas I&#39;ve found the reason. I should not use &lt;fork&gt;true&lt;/fork&gt;. After I removed this, everything works. Thanks"}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687797544,"creation_date":1687753746,"answer_id":76553520,"question_id":76550233,"body_markdown":"You&#39;ll need to add the _--add-exports_ switch.  \r\nSpecifically, _&quot;--add-exports jdk.compiler/com.sun.tools.javac.api=ALL-UNNAMED&quot;_.\r\n\r\n_[Migrating From JDK 8 to Later JDK Releases](https://docs.oracle.com/en/java/javase/20/migrate/migrating-jdk-8-later-jdk-releases.html#GUID-2F61F3A9-0979-46A4-8B49-325BA0EE8B66)_.\r\n\r\nIf that does not work, try referring to the following question.  \r\n_[StackOverflow &amp;ndash; error: package com.sun.tools.javac.util does not exist](https://stackoverflow.com/questions/10667187/error-package-com-sun-tools-javac-util-does-not-exist)_.","title":"package com.sun.tools.javac.code is not visible in JDK17","body":"<p>You'll need to add the <em>--add-exports</em> switch.<br />\nSpecifically, <em>&quot;--add-exports jdk.compiler/com.sun.tools.javac.api=ALL-UNNAMED&quot;</em>.</p>\n<p><em><a href=\"https://docs.oracle.com/en/java/javase/20/migrate/migrating-jdk-8-later-jdk-releases.html#GUID-2F61F3A9-0979-46A4-8B49-325BA0EE8B66\" rel=\"nofollow noreferrer\">Migrating From JDK 8 to Later JDK Releases</a></em>.</p>\n<p>If that does not work, try referring to the following question.<br />\n<em><a href=\"https://stackoverflow.com/questions/10667187/error-package-com-sun-tools-javac-util-does-not-exist\">StackOverflow – error: package com.sun.tools.javac.util does not exist</a></em>.</p>\n"}],"owner":{"account_id":9893206,"reputation":791,"user_id":7325581,"accept_rate":20,"display_name":"Michael Tsai"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1381,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76553520,"answer_count":1,"score":1,"last_activity_date":1687797544,"creation_date":1687693601,"question_id":76550233,"body_markdown":"I tried to access the package com.sun.tools.javac.code in JDK17. Someone said can add the VM args as below:\r\n\r\n                    &lt;compilerArgs&gt;\r\n                        &lt;arg&gt;-Werror&lt;/arg&gt;\r\n                        &lt;arg&gt;-Xlint:all&lt;/arg&gt;\r\n                        &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED&lt;/arg&gt;\r\n                        &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED&lt;/arg&gt;\r\n                        &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED&lt;/arg&gt;\r\n                        &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED&lt;/arg&gt;\r\n                        &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.model=ALL-UNNAMED&lt;/arg&gt;\r\n                        &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED&lt;/arg&gt;\r\n                        &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED&lt;/arg&gt;\r\n                        &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED&lt;/arg&gt;\r\n                        &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED&lt;/arg&gt;\r\n                    &lt;/compilerArgs&gt;\r\n\r\n\r\npom.xml\r\n\r\n\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;${java.version}&lt;/source&gt;\r\n                    &lt;target&gt;${java.version}&lt;/target&gt;\r\n                    &lt;showDeprecation&gt;true&lt;/showDeprecation&gt;\r\n                    &lt;showWarnings&gt;true&lt;/showWarnings&gt;\r\n                    &lt;fork&gt;true&lt;/fork&gt;\r\n                    &lt;compilerArgs&gt;\r\n                        &lt;arg&gt;-Werror&lt;/arg&gt;\r\n                        &lt;arg&gt;-Xlint:all&lt;/arg&gt;\r\n                        &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED&lt;/arg&gt;\r\n                        &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED&lt;/arg&gt;\r\n                        &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED&lt;/arg&gt;\r\n                        &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED&lt;/arg&gt;\r\n                        &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.model=ALL-UNNAMED&lt;/arg&gt;\r\n                        &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED&lt;/arg&gt;\r\n                        &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED&lt;/arg&gt;\r\n                        &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED&lt;/arg&gt;\r\n                        &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED&lt;/arg&gt;\r\n                    &lt;/compilerArgs&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\nHowever, I still got a compiler error:  \r\n`error: package com.sun.tools.javac.code is not visible`\r\n\r\nHow can I access the com.sun.tools.javac.code in jdk17?  \r\nI must access this API and don&#39;t want use other ways.\r\n","title":"package com.sun.tools.javac.code is not visible in JDK17","body":"<p>I tried to access the package com.sun.tools.javac.code in JDK17. Someone said can add the VM args as below:</p>\n<pre><code>                &lt;compilerArgs&gt;\n                    &lt;arg&gt;-Werror&lt;/arg&gt;\n                    &lt;arg&gt;-Xlint:all&lt;/arg&gt;\n                    &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED&lt;/arg&gt;\n                    &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED&lt;/arg&gt;\n                    &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED&lt;/arg&gt;\n                    &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED&lt;/arg&gt;\n                    &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.model=ALL-UNNAMED&lt;/arg&gt;\n                    &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED&lt;/arg&gt;\n                    &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED&lt;/arg&gt;\n                    &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED&lt;/arg&gt;\n                    &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED&lt;/arg&gt;\n                &lt;/compilerArgs&gt;\n</code></pre>\n<p>pom.xml</p>\n<pre><code>&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;groupId&gt;org.example&lt;/groupId&gt;\n&lt;artifactId&gt;demo&lt;/artifactId&gt;\n&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n&lt;properties&gt;\n    &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.8.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;${java.version}&lt;/source&gt;\n                &lt;target&gt;${java.version}&lt;/target&gt;\n                &lt;showDeprecation&gt;true&lt;/showDeprecation&gt;\n                &lt;showWarnings&gt;true&lt;/showWarnings&gt;\n                &lt;fork&gt;true&lt;/fork&gt;\n                &lt;compilerArgs&gt;\n                    &lt;arg&gt;-Werror&lt;/arg&gt;\n                    &lt;arg&gt;-Xlint:all&lt;/arg&gt;\n                    &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED&lt;/arg&gt;\n                    &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED&lt;/arg&gt;\n                    &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED&lt;/arg&gt;\n                    &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED&lt;/arg&gt;\n                    &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.model=ALL-UNNAMED&lt;/arg&gt;\n                    &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED&lt;/arg&gt;\n                    &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED&lt;/arg&gt;\n                    &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED&lt;/arg&gt;\n                    &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED&lt;/arg&gt;\n                &lt;/compilerArgs&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>However, I still got a compiler error:<br />\n<code>error: package com.sun.tools.javac.code is not visible</code></p>\n<p>How can I access the com.sun.tools.javac.code in jdk17?<br />\nI must access this API and don't want use other ways.</p>\n"},{"tags":["java","android","cordova","gradle"],"answers":[{"comments":[{"owner":{"account_id":5750624,"reputation":171,"user_id":4927757,"accept_rate":100,"display_name":"samheihey"},"score":0,"creation_date":1692972858,"post_id":76548615,"comment_id":135701987,"body_markdown":"which version of Java is in the path you mentioned?","body":"which version of Java is in the path you mentioned?"},{"owner":{"account_id":36145,"reputation":4527,"user_id":102960,"accept_rate":71,"display_name":"igorsantos07"},"score":0,"creation_date":1694922174,"post_id":76548615,"comment_id":135954156,"body_markdown":"if that&#39;s the file under `/platform`, you shouldn&#39;t be messing with generated files and this is not a solution","body":"if that&#39;s the file under <code>&#47;platform</code>, you shouldn&#39;t be messing with generated files and this is not a solution"}],"tags":[],"owner":{"account_id":3486333,"reputation":1,"user_id":2917173,"display_name":"Manfred Schmidbartl"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687797004,"creation_date":1687658219,"answer_id":76548615,"question_id":76483427,"body_markdown":"I fixed it by adding this in `gradle.properties`:\r\n\r\n    org.gradle.java.home=C\\:\\\\Program Files\\\\Android\\\\Android Studio\\\\jbr","title":"Gradle and Cordova trouble building","body":"<p>I fixed it by adding this in <code>gradle.properties</code>:</p>\n<pre><code>org.gradle.java.home=C\\:\\\\Program Files\\\\Android\\\\Android Studio\\\\jbr\n</code></pre>\n"}],"owner":{"account_id":28828245,"reputation":11,"user_id":22079297,"display_name":"Yun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":341,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1687797004,"creation_date":1686844199,"question_id":76483427,"body_markdown":"Here is the error I got when trying to build my project.\r\n\r\n```\r\nSubproject Path: CordovaLib\r\nSubproject Path: app\r\nStarting a Gradle Daemon, 3 busy and 2 incompatible and 2 stopped Daemons could not be reused, use --status for details\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nA problem occurred configuring root project &#39;HelloCordova&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:classpath&#39;.\r\n   &gt; Could not resolve com.android.tools.build:gradle:7.4.2.\r\n     Required by:\r\n         project :\r\n      &gt; No matching variant of com.android.tools.build:gradle:7.4.2 was found. The consumer was configured to find a runtime of a library compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute &#39;org.gradle.plugin.api-version&#39; with value &#39;7.6&#39; but:\r\n          - Variant &#39;apiElements&#39; capability com.android.tools.build:gradle:7.4.2 declares a library, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares an API of a component compatible with Java 11 and the consumer needed a runtime of a component compatible with Java 8\r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6&#39;)\r\n          - Variant &#39;javadocElements&#39; capability com.android.tools.build:gradle:7.4.2 declares a runtime of a component, and its dependencies declared externally:\r\n              - Incompatible because this component declares documentation and the consumer needed a library\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n                  - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6&#39;)\r\n          - Variant &#39;runtimeElements&#39; capability com.android.tools.build:gradle:7.4.2 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares a component compatible with Java 11 and the consumer needed a component compatible with Java 8\r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6&#39;)\r\n          - Variant &#39;sourcesElements&#39; capability com.android.tools.build:gradle:7.4.2 declares a runtime of a component, and its dependencies declared externally:\r\n              - Incompatible because this component declares documentation and the consumer needed a library\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n                  - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6&#39;)\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.\r\n\r\nYou can use &#39;--warning-mode all&#39; to show the individual deprecation warnings and determine if they come from your own scripts or plugins.\r\n\r\nSee https://docs.gradle.org/7.6/userguide/command_line_interface.html#sec:command_line_warnings\r\n\r\nBUILD FAILED in 4s\r\n\r\n\r\n\r\n```\r\ncordova requirements is saying that everything is fine :\r\n\r\n\r\n```\r\nRequirements check results for android:\r\nJava JDK: installed 1.8.0\r\nAndroid SDK: installed true\r\nAndroid target: installed android-34,android-33\r\nGradle: installed /home/yuniemos/T&#233;l&#233;chargements/gradle-7.6.1/bin/gradle\r\n```\r\n\r\nI&#39;ve tried changing java sdk and gradle version (gradle was originally 8.1.1 and I came back to 7.6.1). I&#39;ve looking at so much forums and yet I found nothing to help solve my problem. It&#39;s been an entire day of looking and I still didn&#39;t manage to make it build.\r\n\r\nIs there something I missed ?\r\n","title":"Gradle and Cordova trouble building","body":"<p>Here is the error I got when trying to build my project.</p>\n<pre><code>Subproject Path: CordovaLib\nSubproject Path: app\nStarting a Gradle Daemon, 3 busy and 2 incompatible and 2 stopped Daemons could not be reused, use --status for details\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nA problem occurred configuring root project 'HelloCordova'.\n&gt; Could not resolve all files for configuration ':classpath'.\n   &gt; Could not resolve com.android.tools.build:gradle:7.4.2.\n     Required by:\n         project :\n      &gt; No matching variant of com.android.tools.build:gradle:7.4.2 was found. The consumer was configured to find a runtime of a library compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute 'org.gradle.plugin.api-version' with value '7.6' but:\n          - Variant 'apiElements' capability com.android.tools.build:gradle:7.4.2 declares a library, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares an API of a component compatible with Java 11 and the consumer needed a runtime of a component compatible with Java 8\n              - Other compatible attribute:\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')\n          - Variant 'javadocElements' capability com.android.tools.build:gradle:7.4.2 declares a runtime of a component, and its dependencies declared externally:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about its target Java version (required compatibility with Java 8)\n                  - Doesn't say anything about its elements (required them packaged as a jar)\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')\n          - Variant 'runtimeElements' capability com.android.tools.build:gradle:7.4.2 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares a component compatible with Java 11 and the consumer needed a component compatible with Java 8\n              - Other compatible attribute:\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')\n          - Variant 'sourcesElements' capability com.android.tools.build:gradle:7.4.2 declares a runtime of a component, and its dependencies declared externally:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about its target Java version (required compatibility with Java 8)\n                  - Doesn't say anything about its elements (required them packaged as a jar)\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.\n\nYou can use '--warning-mode all' to show the individual deprecation warnings and determine if they come from your own scripts or plugins.\n\nSee https://docs.gradle.org/7.6/userguide/command_line_interface.html#sec:command_line_warnings\n\nBUILD FAILED in 4s\n\n\n\n</code></pre>\n<p>cordova requirements is saying that everything is fine :</p>\n<pre><code>Requirements check results for android:\nJava JDK: installed 1.8.0\nAndroid SDK: installed true\nAndroid target: installed android-34,android-33\nGradle: installed /home/yuniemos/Téléchargements/gradle-7.6.1/bin/gradle\n</code></pre>\n<p>I've tried changing java sdk and gradle version (gradle was originally 8.1.1 and I came back to 7.6.1). I've looking at so much forums and yet I found nothing to help solve my problem. It's been an entire day of looking and I still didn't manage to make it build.</p>\n<p>Is there something I missed ?</p>\n"},{"tags":["java","vsphere"],"answers":[{"tags":[],"owner":{"account_id":28896561,"reputation":21,"user_id":22132433,"display_name":"Dimitar Gradev"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1687796907,"creation_date":1687772043,"answer_id":76555396,"question_id":73650206,"body_markdown":"Most probably it&#39;s due to the fact that from vSphere 8.0 local plug-ins need changes to support their library isolation.\r\nMore about the topic can be read here:\r\n\r\nhttps://communities.vmware.com/t5/vSphere-Client-SDK-Discussions/Failed-to-deploy-a-local-plugin-on-vSphere-8-0/td-p/2932206\r\n\r\nLocal plug-ins are also deprecated so migrating to a remote plug-in architecture is something to consider going forward.","title":"Deploying vSphere client plugin on vCenter 8.0 is failed","body":"<p>Most probably it's due to the fact that from vSphere 8.0 local plug-ins need changes to support their library isolation.\nMore about the topic can be read here:</p>\n<p><a href=\"https://communities.vmware.com/t5/vSphere-Client-SDK-Discussions/Failed-to-deploy-a-local-plugin-on-vSphere-8-0/td-p/2932206\" rel=\"nofollow noreferrer\">https://communities.vmware.com/t5/vSphere-Client-SDK-Discussions/Failed-to-deploy-a-local-plugin-on-vSphere-8-0/td-p/2932206</a></p>\n<p>Local plug-ins are also deprecated so migrating to a remote plug-in architecture is something to consider going forward.</p>\n"}],"owner":{"account_id":26281943,"reputation":21,"user_id":19950304,"display_name":"Meenakshi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":291,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1687796907,"creation_date":1662645114,"question_id":73650206,"body_markdown":"vSphere Client plugin Name is appeared on the vCenter with &quot;failed&quot; status with below failure message. I am looking for a solution to resolve this issue.\r\n\r\n&gt; &quot;Error deploying plug-in.\r\n&gt; org.osgi.service.subsystem.SubsystemException: Framework could not\r\n&gt; resolve the bundles: [vcplugin-ui_1.2.1 [358],\r\n&gt; vcplugin-controller_1.2.1 [360],\r\n&gt; org.osgi.service.subsystem.region.context.9_1.0.0 [357],\r\n&gt; com.vmware.wsvim25_8.0.0 [359], org.eclipse.virgo.web.dm_1.0.0 [361]]\r\n&gt; org.apache.aries.subsystem.core.internal.StartAction.handleFailedResolution(StartAction.java:643)&quot;","title":"Deploying vSphere client plugin on vCenter 8.0 is failed","body":"<p>vSphere Client plugin Name is appeared on the vCenter with &quot;failed&quot; status with below failure message. I am looking for a solution to resolve this issue.</p>\n<blockquote>\n<p>&quot;Error deploying plug-in.\norg.osgi.service.subsystem.SubsystemException: Framework could not\nresolve the bundles: [vcplugin-ui_1.2.1 [358],\nvcplugin-controller_1.2.1 [360],\norg.osgi.service.subsystem.region.context.9_1.0.0 [357],\ncom.vmware.wsvim25_8.0.0 [359], org.eclipse.virgo.web.dm_1.0.0 [361]]\norg.apache.aries.subsystem.core.internal.StartAction.handleFailedResolution(StartAction.java:643)&quot;</p>\n</blockquote>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":1573445,"reputation":4861,"user_id":1460591,"accept_rate":79,"display_name":"Youans"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687796431,"creation_date":1687796431,"answer_id":76558524,"question_id":76558344,"body_markdown":"What hibernate does when doing `orphanRemoval` is the following:\r\n\r\nAssume you have a video with 2 comments [comment id=1] [comment id=2]\r\n\r\nSo when you delete the video, Hibernate issues delete stmt on that video\r\ne.g `delete from video where id=1`\r\nafter that all comments become orphans, since their parent (video) is deleted\r\nSo hibernate checks if `orphanRemoval` feature is enabled, if so, it issues a delete stmt for all children one by one so for that example it will execute the following:\r\n\r\n```\r\ndelete from comment where id=1;\r\ndelete from comment where id=2;\r\n```\r\n\r\nSo this is what happens under the hood.\r\n\r\nSo you might ask why you need to sync the bidirectional entities, and whether hibernate will call these functions, and the answer to that is No, remember hibernate proxy the entity and does its magic with that proxy\r\n\r\nHibernate will not use these adders/removals functions. So what the heck is entity sync and why it is important, to give you a simple answer is that you need to simulate what hibernate going to do, in your code since you don&#39;t know for sure when exactly hibernate will run these queries since hibernate has an auto flush mode\r\n\r\nFor the above example:\r\nImagine you don&#39;t do the sync part so you have just setters and getters and you deleted the video, and then you did anything with `video.getComments()` like for example imagine following code\r\n\r\n```\r\nrepo.delete(video);\r\nif (video.getComments().size() == 0) {\r\n    // blabla\r\n}\r\n```\r\n\r\nSo if you have not removed these comments yourself via syncing, `video.getComments()` will still contain data thus you could have faced wrong code decisions.\r\n","title":"State Propagation Good Practices and &quot;orphanRemoval&quot; relation","body":"<p>What hibernate does when doing <code>orphanRemoval</code> is the following:</p>\n<p>Assume you have a video with 2 comments [comment id=1] [comment id=2]</p>\n<p>So when you delete the video, Hibernate issues delete stmt on that video\ne.g <code>delete from video where id=1</code>\nafter that all comments become orphans, since their parent (video) is deleted\nSo hibernate checks if <code>orphanRemoval</code> feature is enabled, if so, it issues a delete stmt for all children one by one so for that example it will execute the following:</p>\n<pre><code>delete from comment where id=1;\ndelete from comment where id=2;\n</code></pre>\n<p>So this is what happens under the hood.</p>\n<p>So you might ask why you need to sync the bidirectional entities, and whether hibernate will call these functions, and the answer to that is No, remember hibernate proxy the entity and does its magic with that proxy</p>\n<p>Hibernate will not use these adders/removals functions. So what the heck is entity sync and why it is important, to give you a simple answer is that you need to simulate what hibernate going to do, in your code since you don't know for sure when exactly hibernate will run these queries since hibernate has an auto flush mode</p>\n<p>For the above example:\nImagine you don't do the sync part so you have just setters and getters and you deleted the video, and then you did anything with <code>video.getComments()</code> like for example imagine following code</p>\n<pre><code>repo.delete(video);\nif (video.getComments().size() == 0) {\n    // blabla\n}\n</code></pre>\n<p>So if you have not removed these comments yourself via syncing, <code>video.getComments()</code> will still contain data thus you could have faced wrong code decisions.</p>\n"}],"owner":{"account_id":24238273,"reputation":3,"user_id":18191048,"display_name":"Henrique Delben"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687796431,"creation_date":1687795007,"question_id":76558344,"body_markdown":"I saw when working with bidirectional relationships, it is a good practice to create add and remove methods on the referenced/not owning side of the relationship because the database only works with unidirectional relationships and that allows to avoid propagation state problems (ie: when the state of database and object model are unsynced).\r\n\r\nSo, when having for example: A video can have any comments and a comment can belong to a single video\r\n\r\nMapped this way:\r\n- A video entity (OneToMany): not owning side and also the parent entity/table\r\n- A comment entity (ManyToOne): owning side and also the children table\r\n\r\nThis definitions above implicitly imply that (with Hibernate) we have:\r\n- A video class with a List of comments annotated with @OneToMany(mappedBy = &quot;video&quot;)\r\n- A comment class with a property type Video named &quot;video&quot; annotated with @ManyToOne and @JoinColumn\r\n\r\nWould be a good practice to add on the Video entity:\r\n\r\n    addComment(Comment c) {\r\n    // adds to the list\r\n    c.setVideo(this) // updates the comment &quot;c&quot;\r\n    } \r\n    \r\n    removeComment(Comment c) {\r\n    // removes from the list\r\n    c.setVideo(null)\r\n    }\r\n\r\n\r\n\r\n\r\n\r\nNow here comes the question:\r\n\r\nIf the necessity of add and remove methods on the Video entity is to make sure the Comment object is synced and therefore the database (because the database works only from owning side -&gt; not owning side), when using the &quot;orphanRemoval&quot; argument on the @OneToMany side does the Hibernate performs this under the hood (sync Comment object with the changes performed in the Video entity)?\r\n\r\nBecause orphanRemoval = true says to Hibernate to delete all the children rows of the Children entity/table (comment entity) that its FK field (ie parent&#39;s table reference) is null (basically a ON SET NULL DELETE (i know this trigger doesn&#39;t exist)) So if a video sets its  list of comments to null, all comments that were on this list are also set to null and would be deleted. \r\n\r\nSo, does hibernate implement a sort of &quot;removeComment&quot; (specially the &quot;c.setVideo(this) // updates the comment &quot;c&quot;&quot; part) method under the hood to implement this the same way and method the good practice mentions to do?","title":"State Propagation Good Practices and &quot;orphanRemoval&quot; relation","body":"<p>I saw when working with bidirectional relationships, it is a good practice to create add and remove methods on the referenced/not owning side of the relationship because the database only works with unidirectional relationships and that allows to avoid propagation state problems (ie: when the state of database and object model are unsynced).</p>\n<p>So, when having for example: A video can have any comments and a comment can belong to a single video</p>\n<p>Mapped this way:</p>\n<ul>\n<li>A video entity (OneToMany): not owning side and also the parent entity/table</li>\n<li>A comment entity (ManyToOne): owning side and also the children table</li>\n</ul>\n<p>This definitions above implicitly imply that (with Hibernate) we have:</p>\n<ul>\n<li>A video class with a List of comments annotated with @OneToMany(mappedBy = &quot;video&quot;)</li>\n<li>A comment class with a property type Video named &quot;video&quot; annotated with @ManyToOne and @JoinColumn</li>\n</ul>\n<p>Would be a good practice to add on the Video entity:</p>\n<pre><code>addComment(Comment c) {\n// adds to the list\nc.setVideo(this) // updates the comment &quot;c&quot;\n} \n\nremoveComment(Comment c) {\n// removes from the list\nc.setVideo(null)\n}\n</code></pre>\n<p>Now here comes the question:</p>\n<p>If the necessity of add and remove methods on the Video entity is to make sure the Comment object is synced and therefore the database (because the database works only from owning side -&gt; not owning side), when using the &quot;orphanRemoval&quot; argument on the @OneToMany side does the Hibernate performs this under the hood (sync Comment object with the changes performed in the Video entity)?</p>\n<p>Because orphanRemoval = true says to Hibernate to delete all the children rows of the Children entity/table (comment entity) that its FK field (ie parent's table reference) is null (basically a ON SET NULL DELETE (i know this trigger doesn't exist)) So if a video sets its  list of comments to null, all comments that were on this list are also set to null and would be deleted.</p>\n<p>So, does hibernate implement a sort of &quot;removeComment&quot; (specially the &quot;c.setVideo(this) // updates the comment &quot;c&quot;&quot; part) method under the hood to implement this the same way and method the good practice mentions to do?</p>\n"},{"tags":["java","tomcat"],"answers":[{"tags":[],"owner":{"account_id":7298037,"reputation":500,"user_id":10660307,"display_name":" RichardFeynman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687796148,"creation_date":1687796148,"answer_id":76558489,"question_id":76540879,"body_markdown":"The above jar index error was cause by incompatible jars in the tomcat/lib directory.  \r\n\r\nOnce the offending jar was removed the InvalidJarIndexError: Invalid index was resolved. ","title":"Apache Tomcat cannot start due to InvalidJarIndexError: Invalid index","body":"<p>The above jar index error was cause by incompatible jars in the tomcat/lib directory.</p>\n<p>Once the offending jar was removed the InvalidJarIndexError: Invalid index was resolved.</p>\n"}],"owner":{"account_id":7298037,"reputation":500,"user_id":10660307,"display_name":" RichardFeynman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76558489,"answer_count":1,"score":0,"last_activity_date":1687796148,"creation_date":1687529180,"question_id":76540879,"body_markdown":"I am migrating an Apache Tomcat application from being generated by a build.xml to a Maven project. \r\n\r\nAfter installing the new jars I am getting an `InvalidJarIndexError: Invalid index` error on Tomcat start up.  \r\n\r\nI can see in catalina.log that Tomcat Native library cannot be found right before the sever error, however I can also see older logs that it cannot be found when Tomcat was able to start up.  Previously it was not for openSLL however. \r\n\r\nI have already check for any corrupted jars on the system and cannot find any.\r\n\r\nI also added tried adding tomcat-native-2.0.4.jar to /usr/local but still get the same error. \r\n\r\n```\r\n05-Mar-2019 13:56:15.236 INFO [main] org.apache.catalina.core.AprLifecycleListener.lifecycleEvent The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib\r\n```\r\n\r\nvs\r\n\r\n```\r\n22-Jun-2023 18:36:02.206 INFO [main] org.apache.catalina.core.AprLifecycleListener.lifecycleEvent The Apache Tomcat Native library which allows using OpenSSL was not found on the java.library.path: [/usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib]\r\n```\r\nThis is the full stack trace of the error I am getting.  I am not sure if this is related the the Tomcat Native library or if there is some other problem given that it was previously not able to find it.  \r\n\r\n```\r\n23-Jun-2023 09:37:19.274 INFO [main] org.apache.catalina.core.AprLifecycleListener.lifecycleEvent The Apache Tomcat Native library which allows using OpenSSL was not found on the java.library.path: [/usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib]\r\n23-Jun-2023 09:37:19.799 SEVERE [main] org.apache.catalina.startup.Catalina.load Error initializing Catalina\r\n        org.apache.catalina.LifecycleException: Failed to initialize component [StandardServer[8005]]\r\n                at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\r\n                at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:139)\r\n                at org.apache.catalina.startup.Catalina.load(Catalina.java:724)\r\n                at org.apache.catalina.startup.Catalina.load(Catalina.java:746)\r\n                at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n                at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n                at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n                at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n                at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:305)\r\n                at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:475)\r\n        Caused by: jdk.internal.util.jar.InvalidJarIndexError: Invalid index\r\n                at java.base/jdk.internal.loader.URLClassPath$JarLoader.getResource(URLClassPath.java:1051)\r\n                at java.base/jdk.internal.loader.URLClassPath$JarLoader.getResource(URLClassPath.java:962)\r\n                at java.base/jdk.internal.loader.URLClassPath$JarLoader.findResource(URLClassPath.java:937)\r\n                at java.base/jdk.internal.loader.URLClassPath.findResource(URLClassPath.java:296)\r\n                at java.base/java.net.URLClassLoader$2.run(URLClassLoader.java:629)\r\n                at java.base/java.net.URLClassLoader$2.run(URLClassLoader.java:627)\r\n                at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n                at java.base/java.net.URLClassLoader.findResource(URLClassLoader.java:626)\r\n                at java.base/java.lang.ClassLoader.getResource(ClassLoader.java:1403)\r\n                at org.apache.tomcat.util.modeler.Registry.loadDescriptors(Registry.java:678)\r\n                at org.apache.tomcat.util.modeler.Registry.findDescriptor(Registry.java:724)\r\n                at org.apache.tomcat.util.modeler.Registry.findManagedBean(Registry.java:504)\r\n                at org.apache.tomcat.util.modeler.Registry.registerComponent(Registry.java:639)\r\n                at org.apache.catalina.util.LifecycleMBeanBase.register(LifecycleMBeanBase.java:156)\r\n                at org.apache.catalina.util.LifecycleMBeanBase.initInternal(LifecycleMBeanBase.java:57)\r\n                at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:994)\r\n                at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:136)\r\n                ... 8 more\r\n\r\n```","title":"Apache Tomcat cannot start due to InvalidJarIndexError: Invalid index","body":"<p>I am migrating an Apache Tomcat application from being generated by a build.xml to a Maven project.</p>\n<p>After installing the new jars I am getting an <code>InvalidJarIndexError: Invalid index</code> error on Tomcat start up.</p>\n<p>I can see in catalina.log that Tomcat Native library cannot be found right before the sever error, however I can also see older logs that it cannot be found when Tomcat was able to start up.  Previously it was not for openSLL however.</p>\n<p>I have already check for any corrupted jars on the system and cannot find any.</p>\n<p>I also added tried adding tomcat-native-2.0.4.jar to /usr/local but still get the same error.</p>\n<pre><code>05-Mar-2019 13:56:15.236 INFO [main] org.apache.catalina.core.AprLifecycleListener.lifecycleEvent The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib\n</code></pre>\n<p>vs</p>\n<pre><code>22-Jun-2023 18:36:02.206 INFO [main] org.apache.catalina.core.AprLifecycleListener.lifecycleEvent The Apache Tomcat Native library which allows using OpenSSL was not found on the java.library.path: [/usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib]\n</code></pre>\n<p>This is the full stack trace of the error I am getting.  I am not sure if this is related the the Tomcat Native library or if there is some other problem given that it was previously not able to find it.</p>\n<pre><code>23-Jun-2023 09:37:19.274 INFO [main] org.apache.catalina.core.AprLifecycleListener.lifecycleEvent The Apache Tomcat Native library which allows using OpenSSL was not found on the java.library.path: [/usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib]\n23-Jun-2023 09:37:19.799 SEVERE [main] org.apache.catalina.startup.Catalina.load Error initializing Catalina\n        org.apache.catalina.LifecycleException: Failed to initialize component [StandardServer[8005]]\n                at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\n                at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:139)\n                at org.apache.catalina.startup.Catalina.load(Catalina.java:724)\n                at org.apache.catalina.startup.Catalina.load(Catalina.java:746)\n                at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n                at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n                at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n                at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n                at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:305)\n                at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:475)\n        Caused by: jdk.internal.util.jar.InvalidJarIndexError: Invalid index\n                at java.base/jdk.internal.loader.URLClassPath$JarLoader.getResource(URLClassPath.java:1051)\n                at java.base/jdk.internal.loader.URLClassPath$JarLoader.getResource(URLClassPath.java:962)\n                at java.base/jdk.internal.loader.URLClassPath$JarLoader.findResource(URLClassPath.java:937)\n                at java.base/jdk.internal.loader.URLClassPath.findResource(URLClassPath.java:296)\n                at java.base/java.net.URLClassLoader$2.run(URLClassLoader.java:629)\n                at java.base/java.net.URLClassLoader$2.run(URLClassLoader.java:627)\n                at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n                at java.base/java.net.URLClassLoader.findResource(URLClassLoader.java:626)\n                at java.base/java.lang.ClassLoader.getResource(ClassLoader.java:1403)\n                at org.apache.tomcat.util.modeler.Registry.loadDescriptors(Registry.java:678)\n                at org.apache.tomcat.util.modeler.Registry.findDescriptor(Registry.java:724)\n                at org.apache.tomcat.util.modeler.Registry.findManagedBean(Registry.java:504)\n                at org.apache.tomcat.util.modeler.Registry.registerComponent(Registry.java:639)\n                at org.apache.catalina.util.LifecycleMBeanBase.register(LifecycleMBeanBase.java:156)\n                at org.apache.catalina.util.LifecycleMBeanBase.initInternal(LifecycleMBeanBase.java:57)\n                at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:994)\n                at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:136)\n                ... 8 more\n\n</code></pre>\n"},{"tags":["python","java","android","object-detection","ncnn"],"owner":{"account_id":18724602,"reputation":1,"user_id":13651583,"display_name":"Harsh Thakkar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687796006,"creation_date":1687795869,"question_id":76558459,"body_markdown":"I am using nanodet as object detection library in my Android (java) application, here is the example of Android app: https://github.com/RangiLyu/nanodet/tree/main/demo_android_ncnn\r\n\r\n\r\nMy goal is to train and build new data model on top of existing one: by taking single image, and providing label name; I want to send these data to Python server, which is expected to respond .bin and .param file (NCNN type)\r\n\r\nI want to add new labels (class_names) included into my existing Android app dynamically by taking new .bin and .param file into consideration.\r\n\r\nMy question is: how should I add these new labels (class_names) into my Android app dynamically without rebuilding the application or modifying the code?\r\n\r\nI also tried this Android nanodet project: https://github.com/nihui/ncnn-android-nanodet but was unable to figure out how can I achieve the end result.\r\n","title":"Train existing object detection nanodet model - (Android App/Python Server)","body":"<p>I am using nanodet as object detection library in my Android (java) application, here is the example of Android app: <a href=\"https://github.com/RangiLyu/nanodet/tree/main/demo_android_ncnn\" rel=\"nofollow noreferrer\">https://github.com/RangiLyu/nanodet/tree/main/demo_android_ncnn</a></p>\n<p>My goal is to train and build new data model on top of existing one: by taking single image, and providing label name; I want to send these data to Python server, which is expected to respond .bin and .param file (NCNN type)</p>\n<p>I want to add new labels (class_names) included into my existing Android app dynamically by taking new .bin and .param file into consideration.</p>\n<p>My question is: how should I add these new labels (class_names) into my Android app dynamically without rebuilding the application or modifying the code?</p>\n<p>I also tried this Android nanodet project: <a href=\"https://github.com/nihui/ncnn-android-nanodet\" rel=\"nofollow noreferrer\">https://github.com/nihui/ncnn-android-nanodet</a> but was unable to figure out how can I achieve the end result.</p>\n"},{"tags":["java","postgresql","entitymanager","hibernate-native-query"],"comments":[{"owner":{"account_id":1018432,"reputation":21783,"user_id":1029453,"accept_rate":100,"display_name":"Richard Huxton"},"score":0,"creation_date":1687799339,"post_id":76558389,"comment_id":134984169,"body_markdown":"Do it in your application and supply the correct type. I suspect you database adapter code is translating `getCode` as a byte array.","body":"Do it in your application and supply the correct type. I suspect you database adapter code is translating <code>getCode</code> as a byte array."},{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":0,"creation_date":1687799822,"post_id":76558389,"comment_id":134984276,"body_markdown":"There seems to be issues with double-quotes and missing parentheses in this code sample","body":"There seems to be issues with double-quotes and missing parentheses in this code sample"},{"owner":{"account_id":27089847,"reputation":17,"user_id":20637812,"display_name":"pawello12"},"score":0,"creation_date":1687802254,"post_id":76558389,"comment_id":134984785,"body_markdown":"the problem is that I have int2 in the database and Short in the entity, so the types should match","body":"the problem is that I have int2 in the database and Short in the entity, so the types should match"},{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":0,"creation_date":1687809423,"post_id":76558389,"comment_id":134985903,"body_markdown":"Does `getCode()` return a `Short`? It would be good if you cleaned up those few lines of code. As it stands, it would have syntax errors, so it makes it harder to know where the problem could come from.","body":"Does <code>getCode()</code> return a <code>Short</code>? It would be good if you cleaned up those few lines of code. As it stands, it would have syntax errors, so it makes it harder to know where the problem could come from."}],"owner":{"account_id":27089847,"reputation":17,"user_id":20637812,"display_name":"pawello12"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687795377,"creation_date":1687795377,"question_id":76558389,"body_markdown":"i try to use native query and i get above error: `column &quot;code&quot; is of type smallint but expression is of type bytea`, does anyone know how to fix it? i tried to use CAST to numeric but it doesn&#39;t work.\r\n\r\n        entityManager.createQuery(\r\n                        &quot;INSERT INTO car(&quot;http_code) &quot; +\r\n                                &quot;VALUES(&quot;:httpCode)&quot;)\r\n                .setParameter(&quot;code&quot;, entity.getCode)\r\n                .executeUpdate();\r\n\r\n\r\n\r\n\r\n","title":"How convert bytea to smallint in postgres native query","body":"<p>i try to use native query and i get above error: <code>column &quot;code&quot; is of type smallint but expression is of type bytea</code>, does anyone know how to fix it? i tried to use CAST to numeric but it doesn't work.</p>\n<pre><code>    entityManager.createQuery(\n                    &quot;INSERT INTO car(&quot;http_code) &quot; +\n                            &quot;VALUES(&quot;:httpCode)&quot;)\n            .setParameter(&quot;code&quot;, entity.getCode)\n            .executeUpdate();\n</code></pre>\n"},{"tags":["java","log4j2"],"comments":[{"owner":{"account_id":1573445,"reputation":4861,"user_id":1460591,"accept_rate":79,"display_name":"Youans"},"score":0,"creation_date":1687795065,"post_id":76558195,"comment_id":134983298,"body_markdown":"Are you using Spring Boot?","body":"Are you using Spring Boot?"}],"answers":[{"tags":[],"owner":{"account_id":195691,"reputation":28439,"user_id":438742,"accept_rate":73,"display_name":"kan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687794702,"creation_date":1687794702,"answer_id":76558304,"question_id":76558195,"body_markdown":"I doubt there is an easy documented way to do that. The pattern is quite strict. However, there are %X and %x which are supposed to be used for custom user defined data.","title":"How to make Log4j Custom Patterns","body":"<p>I doubt there is an easy documented way to do that. The pattern is quite strict. However, there are %X and %x which are supposed to be used for custom user defined data.</p>\n"}],"owner":{"account_id":17019559,"reputation":15,"user_id":19583397,"display_name":"Will W."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687794702,"creation_date":1687793830,"question_id":76558195,"body_markdown":"Is there some way I can set up my logging in a way such that when it&#39;s putting data into my database through the appender that I can have a custom pattern that is storing some value like an id? Like for example I want to be able to do something like \r\n\r\n`&lt;Column name=&quot;special_id&quot; pattern=&quot;%something&quot; /&gt;`\r\n\r\nI was looking through the api and I couldn&#39;t find anything like this.","title":"How to make Log4j Custom Patterns","body":"<p>Is there some way I can set up my logging in a way such that when it's putting data into my database through the appender that I can have a custom pattern that is storing some value like an id? Like for example I want to be able to do something like</p>\n<p><code>&lt;Column name=&quot;special_id&quot; pattern=&quot;%something&quot; /&gt;</code></p>\n<p>I was looking through the api and I couldn't find anything like this.</p>\n"},{"tags":["java","postgresql","elasticsearch","optimization","logstash"],"comments":[{"owner":{"account_id":5742767,"reputation":9245,"user_id":4534923,"display_name":"Paulo"},"score":0,"creation_date":1687522351,"post_id":76538425,"comment_id":134952458,"body_markdown":"Sound like this issue is with the database no ? My understanding is that the database slows down when you start to paginate the data ?\n\nFor elasticsearch you may want to look at esRally, it will allow you to run benchmark and see if you ES cluster is able to handle more incoming data.","body":"Sound like this issue is with the database no ? My understanding is that the database slows down when you start to paginate the data ?  For elasticsearch you may want to look at esRally, it will allow you to run benchmark and see if you ES cluster is able to handle more incoming data."},{"owner":{"account_id":1812750,"reputation":376,"user_id":1648484,"accept_rate":62,"display_name":"fmakawa"},"score":0,"creation_date":1687528827,"post_id":76538425,"comment_id":134954015,"body_markdown":"Elastic hasn&#39;t had any issue consuming the data. This is about the logstash query with the DB.","body":"Elastic hasn&#39;t had any issue consuming the data. This is about the logstash query with the DB."},{"owner":{"account_id":5742767,"reputation":9245,"user_id":4534923,"display_name":"Paulo"},"score":0,"creation_date":1687530704,"post_id":76538425,"comment_id":134954542,"body_markdown":"Yes, my first assumption is that the postgres DB is not able to deliver the data faster ...","body":"Yes, my first assumption is that the postgres DB is not able to deliver the data faster ..."},{"owner":{"account_id":1906465,"reputation":39489,"user_id":1721239,"display_name":"jjanes"},"score":0,"creation_date":1687553442,"post_id":76538425,"comment_id":134958719,"body_markdown":"&quot;I cannot use keyset pagination since I cannot dynamically set a key for each page as logstash runs the query.&quot;  But logstash can run the query with :sql_last_value. Isn&#39;t that just what you need?","body":"&quot;I cannot use keyset pagination since I cannot dynamically set a key for each page as logstash runs the query.&quot;  But logstash can run the query with :sql_last_value. Isn&#39;t that just what you need?"},{"owner":{"account_id":1906465,"reputation":39489,"user_id":1721239,"display_name":"jjanes"},"score":0,"creation_date":1687553950,"post_id":76538425,"comment_id":134958775,"body_markdown":"You describe this as a one time thing, but your `schedule` setting says otherwise.","body":"You describe this as a one time thing, but your <code>schedule</code> setting says otherwise."},{"owner":{"account_id":1812750,"reputation":376,"user_id":1648484,"accept_rate":62,"display_name":"fmakawa"},"score":0,"creation_date":1687562295,"post_id":76538425,"comment_id":134959518,"body_markdown":"@jjanes the schedule was meant to be commented out. Corrected.  :sql_last_value is only written after the pipeline runs to completion and essentially what you are now consuming is what comes after. In a clean run you do not have a sql_last_valule","body":"@jjanes the schedule was meant to be commented out. Corrected.  :sql_last_value is only written after the pipeline runs to completion and essentially what you are now consuming is what comes after. In a clean run you do not have a sql_last_valule"},{"owner":{"account_id":1906465,"reputation":39489,"user_id":1721239,"display_name":"jjanes"},"score":0,"creation_date":1687794091,"post_id":76538425,"comment_id":134983045,"body_markdown":"I don&#39;t use logstash, but I thought you could get :sql_last_value to be used between pages, not just between schedules, if you set other parameters the right way.","body":"I don&#39;t use logstash, but I thought you could get :sql_last_value to be used between pages, not just between schedules, if you set other parameters the right way."},{"owner":{"account_id":1812750,"reputation":376,"user_id":1648484,"accept_rate":62,"display_name":"fmakawa"},"score":0,"creation_date":1687879915,"post_id":76538425,"comment_id":134997256,"body_markdown":"@jjanes ah, I see. Unfortunately, it does not seem I can set that value between pages. If I could then I could use keyset pagination which would hasten the process significantly","body":"@jjanes ah, I see. Unfortunately, it does not seem I can set that value between pages. If I could then I could use keyset pagination which would hasten the process significantly"}],"answers":[{"tags":[],"owner":{"account_id":1906465,"reputation":39489,"user_id":1721239,"display_name":"jjanes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687794505,"creation_date":1687794505,"answer_id":76558282,"question_id":76538425,"body_markdown":"When you talk about crash from higher values of jdbc_page_size, I assume that is a memory issue in the jdbc driver (but you should really investigate the logs to describe what it is that is going on more precisely).  I think that you should be able to avoid the memory issue while keeping the performance improvement by setting jdbc_page_size to a large value while setting jdbc_fetch_size to a smaller (but nonzero) value.","title":"How to optimise large data ingestion from database by Logstash and reduce ingestion time","body":"<p>When you talk about crash from higher values of jdbc_page_size, I assume that is a memory issue in the jdbc driver (but you should really investigate the logs to describe what it is that is going on more precisely).  I think that you should be able to avoid the memory issue while keeping the performance improvement by setting jdbc_page_size to a large value while setting jdbc_fetch_size to a smaller (but nonzero) value.</p>\n"}],"owner":{"account_id":1812750,"reputation":376,"user_id":1648484,"accept_rate":62,"display_name":"fmakawa"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1687794505,"creation_date":1687509718,"question_id":76538425,"body_markdown":"I am trying to pull data in Logstash from a Postgres DB. The data is monthly, with approximately 140 000 000 records each month. I need to ingest this data in one go and not every 5 few minutes for updates etc or weekly. It&#39;s a fresh batch each time.  There are several problems:\r\n1. The ingestion takes too long, 140 000 000 records initially took 48hrs and now takes approx 17hrs\r\n2. The select query pagination takes longer for each subsequent page it ingests. The first page takes 8 secs but by the time we get to 40 000 000 records, it takes 120 secs per page (now) and eventually gets to almost 15 minutes.\r\n\r\nHow can I optimize this?\r\n\r\nI increased the number of workers to match the number of cores of the machine which improved performance significantly. But it is recommended that I should not go above that since it is advised not to and with it running CPU usage is quite high so adding more workers is likely to crash the system. Should I?\r\n\r\nI also increased the pagination from 100 000 to 150 000 to 200 000. All with improved times. Much higher numbers crashed the system. I am currently incrementing by 50 000 in my tests but I know I have a limit to this.\r\n\r\nI cannot use keyset pagination since I cannot dynamically set a key for each page as logstash runs the query. \r\n\r\nI have played with the pipeline batch size increasing to 1250 to 2500 and now 5000 with no noticeable impact on speed/performance. Should I be using much larger amounts?\r\n\r\nThe machines are dedicated to logstash and we are already using all the ram we can use.\r\n\r\nExample Query:\r\n\r\n    input {\r\n    \r\n      jdbc {\r\n    \r\n        jdbc_driver_library =&gt; &quot;/usr/share/logstash/postgresql-42.3.1.jar&quot;\r\n        jdbc_driver_class =&gt; &quot;org.postgresql.Driver&quot;\r\n        jdbc_connection_string =&gt; &quot;jdbc:postgresql://@host:$port/MYDB&quot;\r\n        jdbc_user =&gt; &quot;user&quot;\r\n        jdbc_password =&gt; &quot;password&quot;\r\n        #schedule =&gt; &quot;* * * * *&quot;\r\n        statement =&gt; &quot;SELECT date_tranc(&#39;hour&#39;, client_received_timestamp) as client_received_timestamp, is_error, httpsStatusCode from MYSCHEMA.MY_TABLE WHERE client_received_timestamp &gt;= &#39;2023-05-01 00:0:0&#39; AND client_received_timestamp &lt; &#39;2023-06-01 00:0:0&#39; UNION ALL SELECT date_tranc(&#39;hour&#39;, client_received_timestamp) as client_received_timestamp, is_error, httpsStatusCode from MYSCHEMA.MY_SECOND_TABLE WHERE client_received_timestamp &gt;= &#39;2023-05-01 00:0:0&#39; AND client_received_timestamp &lt; &#39;2023-06-01 00:0:0&#39; UNION ALL SELECT date_tranc(&#39;hour&#39;, client_received_timestamp) as client_received_timestamp, is_error, httpsStatusCode from MYSCHEMA.MY_THIRD_TABLE WHERE client_received_timestamp &gt;= &#39;2023-05-01 00:0:0&#39; AND client_received_timestamp &lt; &#39;2023-06-01 00:0:0&#39;&quot;\r\n        tracking_column =&gt; client_received_timestamp\r\n        clean_run =&gt; false\r\n        last_run_metadata_path =&gt; &quot;/usr/share/logstash/queues/last_run_update_time&quot;\r\n        jdbc_page_size =&gt; 250000\r\n        jdbc_paging_enabled =&gt; true\r\n      }\r\n    \r\n    }\r\n    \r\n    filter {\r\n    \r\n      mutate {\r\n        add_field =&gt; { &quot;SCHEMA&quot; =&gt; &quot;MYSCHEMA&quot; }\r\n        add_field =&gt; { &quot;TABLE&quot; =&gt; &quot;MY_TABLE&quot; }\r\n      }\r\n    }\r\n    \r\n    output {\r\n        elasticsearch {\r\n            hosts       =&gt; [&quot;https://elasticsearch:9200&quot;]\r\n            user        =&gt; &quot;user&quot;\r\n            password    =&gt; &quot;pass&quot;\r\n            index       =&gt; &quot;logs-from-db-v1-%{+YYYY.MM.dd}&quot;\r\n        }\r\n    }\r\n    \r\n    \r\nPipeline config:\r\n\r\n    - pipeline.id: my-db-pipeline\r\n      path.config: &quot;/etc/path/to/db-v1.config&quot;\r\n      pipeline.workers: 8\r\n      pipeline.batch.size: 5000\r\n\r\n\r\nAny other ideas?","title":"How to optimise large data ingestion from database by Logstash and reduce ingestion time","body":"<p>I am trying to pull data in Logstash from a Postgres DB. The data is monthly, with approximately 140 000 000 records each month. I need to ingest this data in one go and not every 5 few minutes for updates etc or weekly. It's a fresh batch each time.  There are several problems:</p>\n<ol>\n<li>The ingestion takes too long, 140 000 000 records initially took 48hrs and now takes approx 17hrs</li>\n<li>The select query pagination takes longer for each subsequent page it ingests. The first page takes 8 secs but by the time we get to 40 000 000 records, it takes 120 secs per page (now) and eventually gets to almost 15 minutes.</li>\n</ol>\n<p>How can I optimize this?</p>\n<p>I increased the number of workers to match the number of cores of the machine which improved performance significantly. But it is recommended that I should not go above that since it is advised not to and with it running CPU usage is quite high so adding more workers is likely to crash the system. Should I?</p>\n<p>I also increased the pagination from 100 000 to 150 000 to 200 000. All with improved times. Much higher numbers crashed the system. I am currently incrementing by 50 000 in my tests but I know I have a limit to this.</p>\n<p>I cannot use keyset pagination since I cannot dynamically set a key for each page as logstash runs the query.</p>\n<p>I have played with the pipeline batch size increasing to 1250 to 2500 and now 5000 with no noticeable impact on speed/performance. Should I be using much larger amounts?</p>\n<p>The machines are dedicated to logstash and we are already using all the ram we can use.</p>\n<p>Example Query:</p>\n<pre><code>input {\n\n  jdbc {\n\n    jdbc_driver_library =&gt; &quot;/usr/share/logstash/postgresql-42.3.1.jar&quot;\n    jdbc_driver_class =&gt; &quot;org.postgresql.Driver&quot;\n    jdbc_connection_string =&gt; &quot;jdbc:postgresql://@host:$port/MYDB&quot;\n    jdbc_user =&gt; &quot;user&quot;\n    jdbc_password =&gt; &quot;password&quot;\n    #schedule =&gt; &quot;* * * * *&quot;\n    statement =&gt; &quot;SELECT date_tranc('hour', client_received_timestamp) as client_received_timestamp, is_error, httpsStatusCode from MYSCHEMA.MY_TABLE WHERE client_received_timestamp &gt;= '2023-05-01 00:0:0' AND client_received_timestamp &lt; '2023-06-01 00:0:0' UNION ALL SELECT date_tranc('hour', client_received_timestamp) as client_received_timestamp, is_error, httpsStatusCode from MYSCHEMA.MY_SECOND_TABLE WHERE client_received_timestamp &gt;= '2023-05-01 00:0:0' AND client_received_timestamp &lt; '2023-06-01 00:0:0' UNION ALL SELECT date_tranc('hour', client_received_timestamp) as client_received_timestamp, is_error, httpsStatusCode from MYSCHEMA.MY_THIRD_TABLE WHERE client_received_timestamp &gt;= '2023-05-01 00:0:0' AND client_received_timestamp &lt; '2023-06-01 00:0:0'&quot;\n    tracking_column =&gt; client_received_timestamp\n    clean_run =&gt; false\n    last_run_metadata_path =&gt; &quot;/usr/share/logstash/queues/last_run_update_time&quot;\n    jdbc_page_size =&gt; 250000\n    jdbc_paging_enabled =&gt; true\n  }\n\n}\n\nfilter {\n\n  mutate {\n    add_field =&gt; { &quot;SCHEMA&quot; =&gt; &quot;MYSCHEMA&quot; }\n    add_field =&gt; { &quot;TABLE&quot; =&gt; &quot;MY_TABLE&quot; }\n  }\n}\n\noutput {\n    elasticsearch {\n        hosts       =&gt; [&quot;https://elasticsearch:9200&quot;]\n        user        =&gt; &quot;user&quot;\n        password    =&gt; &quot;pass&quot;\n        index       =&gt; &quot;logs-from-db-v1-%{+YYYY.MM.dd}&quot;\n    }\n}\n</code></pre>\n<p>Pipeline config:</p>\n<pre><code>- pipeline.id: my-db-pipeline\n  path.config: &quot;/etc/path/to/db-v1.config&quot;\n  pipeline.workers: 8\n  pipeline.batch.size: 5000\n</code></pre>\n<p>Any other ideas?</p>\n"},{"tags":["java","spring-webflux","project-reactor"],"comments":[{"owner":{"account_id":16075620,"reputation":33,"user_id":11602890,"display_name":"veenatic"},"score":0,"creation_date":1687379897,"post_id":76526961,"comment_id":134930355,"body_markdown":"Here the flux is not doing anything but say, flux after receiving from the sink does some processing which can take time (5ms for example)","body":"Here the flux is not doing anything but say, flux after receiving from the sink does some processing which can take time (5ms for example)"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1687381587,"post_id":76526961,"comment_id":134930628,"body_markdown":"How about `Mono.or()` instead? See its JavaDocs: `Emit the first available signal from this mono or the other mono.`","body":"How about <code>Mono.or()</code> instead? See its JavaDocs: <code>Emit the first available signal from this mono or the other mono.</code>"},{"owner":{"account_id":16075620,"reputation":33,"user_id":11602890,"display_name":"veenatic"},"score":0,"creation_date":1687408008,"post_id":76526961,"comment_id":134933144,"body_markdown":"since the mono (mainWork) supplier emits to the flux. Doing the mono.or will immediately get the value from flux and subscription stops. I need something which egarly subscribes to both flux and mono, waits for them to complete and then allows me to get the value from mono.","body":"since the mono (mainWork) supplier emits to the flux. Doing the mono.or will immediately get the value from flux and subscription stops. I need something which egarly subscribes to both flux and mono, waits for them to complete and then allows me to get the value from mono."},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":1,"creation_date":1687441338,"post_id":76526961,"comment_id":134939729,"body_markdown":"`Mono.zipWith(Mono)` then? In the result `Tuple2` you&#39;ll have both values from both your monos.","body":"<code>Mono.zipWith(Mono)</code> then? In the result <code>Tuple2</code> you&#39;ll have both values from both your monos."},{"owner":{"account_id":16075620,"reputation":33,"user_id":11602890,"display_name":"veenatic"},"score":0,"creation_date":1687456113,"post_id":76526961,"comment_id":134942947,"body_markdown":"zipWith does work but looks like it emits everything then flux is processing it which means everythings is getting bufferred  which is not good. I experimented and found that: Mono.zip(flux.then(Mono.just(1)), mainWork).block() is working. we need to do this workaround to convert the flux to mono. As I dont care about the output of flux, i did a dummy mono. This way, the flux is subscribed immediately and it starts consuming as soon as the mono (mainWork) emits. This is good. thanks for suggestions.","body":"zipWith does work but looks like it emits everything then flux is processing it which means everythings is getting bufferred  which is not good. I experimented and found that: Mono.zip(flux.then(Mono.just(1)), mainWork).block() is working. we need to do this workaround to convert the flux to mono. As I dont care about the output of flux, i did a dummy mono. This way, the flux is subscribed immediately and it starts consuming as soon as the mono (mainWork) emits. This is good. thanks for suggestions."}],"answers":[{"tags":[],"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687794138,"creation_date":1687794138,"answer_id":76558234,"question_id":76526961,"body_markdown":"It really depends what data you need from `Flux` and how do you want to resolve them (sequentially or in parallel). \r\n\r\nFor sequential processing you can use \r\n```\r\nflux.then(mono)\r\n``` \r\n\r\nTo resolve in parallel, you can convert `Flux` to `Mono` and then use `Mono.zip`\r\n\r\n```\r\nMono.zip(flux.last(), mono)\r\n```","title":"How to wait for two different publishers to finish and return value from one of them in reactor application","body":"<p>It really depends what data you need from <code>Flux</code> and how do you want to resolve them (sequentially or in parallel).</p>\n<p>For sequential processing you can use</p>\n<pre><code>flux.then(mono)\n</code></pre>\n<p>To resolve in parallel, you can convert <code>Flux</code> to <code>Mono</code> and then use <code>Mono.zip</code></p>\n<pre><code>Mono.zip(flux.last(), mono)\n</code></pre>\n"}],"owner":{"account_id":16075620,"reputation":33,"user_id":11602890,"display_name":"veenatic"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687794138,"creation_date":1687379778,"question_id":76526961,"body_markdown":"I have a flux which is from a sink.\r\n\r\n```java\r\nScheduler s = Schedulers.parallel();\r\nLong[] data = new Long[10]{10, 20,...};\r\n\r\nSinks.Many&lt;Long&gt; dataSink = Sinks.many().unicast().onBackpressureBuffer();\r\nvar flux = dataSink.asFlux().publishOn(s).doOnNext(d -&gt; log.info(&quot;got {}&quot;, d));\r\n\r\nvar mono = Mono.fromSupplier(() -&gt; {\r\n  val map = new HashSet&lt;Long&gt;();\r\n  for (int i = 0; i &lt; data.length; i++) {\r\n    Long datum = data[i];\r\n    map.add(datum);\r\n    log.info(&quot;sending....{}&quot;, i);\r\n    dataSink.tryEmitNext(datum);\r\n  }\r\n  return map;\r\n});\r\n```\r\n\r\nHow to wait for both flux and mono, and then return the value from mono. Note that the flux depends on the mono since the sink is emitting inside the supplier of the mono.\r\n\r\nOne option is:\r\n\r\n```java\r\nMono.when(flux, mono).block();\r\nreturn mono.block();\r\n```\r\n\r\nBut I dont want to block as I will have to return the mono from the function which will be later subscribed by the client. Another option is to use Flux.merge, but that returns a serializable and I dont know how to get back the value from mono.","title":"How to wait for two different publishers to finish and return value from one of them in reactor application","body":"<p>I have a flux which is from a sink.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scheduler s = Schedulers.parallel();\nLong[] data = new Long[10]{10, 20,...};\n\nSinks.Many&lt;Long&gt; dataSink = Sinks.many().unicast().onBackpressureBuffer();\nvar flux = dataSink.asFlux().publishOn(s).doOnNext(d -&gt; log.info(&quot;got {}&quot;, d));\n\nvar mono = Mono.fromSupplier(() -&gt; {\n  val map = new HashSet&lt;Long&gt;();\n  for (int i = 0; i &lt; data.length; i++) {\n    Long datum = data[i];\n    map.add(datum);\n    log.info(&quot;sending....{}&quot;, i);\n    dataSink.tryEmitNext(datum);\n  }\n  return map;\n});\n</code></pre>\n<p>How to wait for both flux and mono, and then return the value from mono. Note that the flux depends on the mono since the sink is emitting inside the supplier of the mono.</p>\n<p>One option is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Mono.when(flux, mono).block();\nreturn mono.block();\n</code></pre>\n<p>But I dont want to block as I will have to return the mono from the function which will be later subscribed by the client. Another option is to use Flux.merge, but that returns a serializable and I dont know how to get back the value from mono.</p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1687793833,"post_id":76557533,"comment_id":134982998,"body_markdown":"as I see your `results` string is a single object, not an array as it expected according to `MyObject` having `results` defined as `Set`. Does `readValue` if you change either value to an json-array or field tipe to single object?","body":"as I see your <code>results</code> string is a single object, not an array as it expected according to <code>MyObject</code> having <code>results</code> defined as <code>Set</code>. Does <code>readValue</code> if you change either value to an json-array or field tipe to single object?"},{"owner":{"account_id":7905847,"reputation":29,"user_id":11648257,"display_name":"Maxwell Newberry"},"score":0,"creation_date":1687794107,"post_id":76557533,"comment_id":134983049,"body_markdown":"@gdomo Sorry, that was just poor example making on my part. In the real results, it is returned as an array but still string format as shown now.","body":"@gdomo Sorry, that was just poor example making on my part. In the real results, it is returned as an array but still string format as shown now."},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1687800622,"post_id":76557533,"comment_id":134984467,"body_markdown":"A bit better solution: use custom [converter](https://stackoverflow.com/a/63556792/8357251) instead of deseralizer","body":"A bit better solution: use custom <a href=\"https://stackoverflow.com/a/63556792/8357251\">converter</a> instead of deseralizer"}],"owner":{"account_id":7905847,"reputation":29,"user_id":11648257,"display_name":"Maxwell Newberry"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687794066,"creation_date":1687788958,"question_id":76557533,"body_markdown":"I am storing an object that is built similarly to:\r\n\r\n```java\r\npublic class MyObject {\r\n\r\n    int portalId;\r\n    int userId;\r\n    Set&lt;CustomObject&gt; results;\r\n}\r\n\r\npublic class CustomObject {\r\n    int objectId;\r\n    String objectInfo;\r\n}\r\n```\r\n\r\nSo when I retrieve my object from my datastore, it&#39;s returned as a Map that we can use Jackson to build to a JSON string similarly to:\r\n\r\n```json\r\n{\r\n   &quot;portalId&quot;:&quot;123&quot;,\r\n   &quot;userId&quot;:&quot;123&quot;,\r\n   &quot;results&quot;:&quot;[{\\&quot;objectId\\&quot;:\\&quot;123\\&quot;,\\&quot;objectInfo\\&quot;:\\&quot;test\\&quot;}]&quot;\r\n}\r\n```\r\n\r\nSubsequently, when I take this JSON string and try to `readValue` to `MyObject`, I get an error due to the nested JSON string for &quot;results&quot;. I am able to circumvent this issue by creating a custom deserializer, but I am wondering if there&#39;s not a simpler solution?\r\n","title":"Deserializing nested JSON string using Jackson (without custom deserializer?)","body":"<p>I am storing an object that is built similarly to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyObject {\n\n    int portalId;\n    int userId;\n    Set&lt;CustomObject&gt; results;\n}\n\npublic class CustomObject {\n    int objectId;\n    String objectInfo;\n}\n</code></pre>\n<p>So when I retrieve my object from my datastore, it's returned as a Map that we can use Jackson to build to a JSON string similarly to:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n   &quot;portalId&quot;:&quot;123&quot;,\n   &quot;userId&quot;:&quot;123&quot;,\n   &quot;results&quot;:&quot;[{\\&quot;objectId\\&quot;:\\&quot;123\\&quot;,\\&quot;objectInfo\\&quot;:\\&quot;test\\&quot;}]&quot;\n}\n</code></pre>\n<p>Subsequently, when I take this JSON string and try to <code>readValue</code> to <code>MyObject</code>, I get an error due to the nested JSON string for &quot;results&quot;. I am able to circumvent this issue by creating a custom deserializer, but I am wondering if there's not a simpler solution?</p>\n"},{"tags":["java","json","serialization","jsonpath","jayway"],"answers":[{"comments":[{"owner":{"account_id":15519832,"reputation":1026,"user_id":11478354,"display_name":"dcolazin"},"score":0,"creation_date":1687850216,"post_id":76558213,"comment_id":134990374,"body_markdown":"Josson looks exactly what I need. The issue now is to convert jsonpath to josson notation. I will play around a bit, thank you.","body":"Josson looks exactly what I need. The issue now is to convert jsonpath to josson notation. I will play around a bit, thank you."}],"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687793955,"creation_date":1687793955,"answer_id":76558213,"question_id":76554716,"body_markdown":"You may try another JSON library _Josson_ using query expression with function `map()`.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n    Josson josson = Josson.fromJsonString(\r\n        &quot;{&quot; +\r\n        &quot;    \\&quot;a\\&quot;: {\\&quot;a1\\&quot;: 1, \\&quot;a2\\&quot;: 2},&quot; +\r\n        &quot;    \\&quot;b\\&quot;: \\&quot;foo\\&quot;,&quot; +\r\n        &quot;    \\&quot;c\\&quot;: []&quot; +\r\n        &quot;}&quot;);\r\n    JsonNode node = josson.getNode(&quot;map(a.map(a2), c)&quot;);\r\n    System.out.println(node.toPrettyString());\r\n\r\n__Output__\r\n\r\n    {\r\n      &quot;a&quot; : {\r\n        &quot;a2&quot; : 2\r\n      },\r\n      &quot;c&quot; : [ ]\r\n    }\r\n\r\nYou can compare the structure of the JSON output with this re-formatted query expression:\r\n\r\n    map(\r\n      a.map(\r\n        a2\r\n      ),\r\n      c\r\n    )\r\n","title":"Filter object elements with Jayway Jsonpath","body":"<p>You may try another JSON library <em>Josson</em> using query expression with function <code>map()</code>.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<pre><code>Josson josson = Josson.fromJsonString(\n    &quot;{&quot; +\n    &quot;    \\&quot;a\\&quot;: {\\&quot;a1\\&quot;: 1, \\&quot;a2\\&quot;: 2},&quot; +\n    &quot;    \\&quot;b\\&quot;: \\&quot;foo\\&quot;,&quot; +\n    &quot;    \\&quot;c\\&quot;: []&quot; +\n    &quot;}&quot;);\nJsonNode node = josson.getNode(&quot;map(a.map(a2), c)&quot;);\nSystem.out.println(node.toPrettyString());\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>{\n  &quot;a&quot; : {\n    &quot;a2&quot; : 2\n  },\n  &quot;c&quot; : [ ]\n}\n</code></pre>\n<p>You can compare the structure of the JSON output with this re-formatted query expression:</p>\n<pre><code>map(\n  a.map(\n    a2\n  ),\n  c\n)\n</code></pre>\n"}],"owner":{"account_id":15519832,"reputation":1026,"user_id":11478354,"display_name":"dcolazin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687793955,"creation_date":1687766729,"question_id":76554716,"body_markdown":"I have a list of (somehow &quot;well-behaved&quot;) jsonpaths and I have to return an object which contains only the elements described in the list. For example, given the list `[&quot;$.a.a2&quot;, $.c]` and the object\r\n\r\n\t{\r\n\t\t&quot;a&quot;: {&quot;a1&quot;: 1, &quot;a2&quot;: 2},\r\n\t\t&quot;b&quot;: foo,\r\n\t\t&quot;c&quot;: []\r\n\t}\r\n\r\nthe desired result is \r\n\r\n\t{\r\n\t\t&quot;a&quot;: {&quot;a2&quot;: 2},\r\n\t\t&quot;c&quot;: []\r\n\t}\r\n\r\nI&#39;m using [Jayway Jsonpath](https://github.com/json-path/JsonPath), but I&#39;m open to use other libraries. My current solution is the following:\r\n\r\n* find the minimal jsonpath list that describe the same set of elements (i.e. remove `&quot;$.a.a2&quot;` if `&quot;$.a&quot;` is present);\r\n* determine the leaf objects (in the first example `a2` and `c`) and build a map that is capable to contain them, as creation of deep nodes is still [not supported](https://github.com/json-path/JsonPath/issues/83): in the first example, after this step I&#39;m creating a map `{&quot;a&quot;: {}}`;\r\n* read the values from the initial object and copy them in the map with the provided methods `read`/`set`.\r\n\r\nI&#39;m quite surprised that such feature is not present. Is there a better way to filter properties in an object? [Squiggly](https://stackoverflow.com/a/64577801/11478354) might be a suitable solution, but is not maintained.","title":"Filter object elements with Jayway Jsonpath","body":"<p>I have a list of (somehow &quot;well-behaved&quot;) jsonpaths and I have to return an object which contains only the elements described in the list. For example, given the list <code>[&quot;$.a.a2&quot;, $.c]</code> and the object</p>\n<pre><code>{\n    &quot;a&quot;: {&quot;a1&quot;: 1, &quot;a2&quot;: 2},\n    &quot;b&quot;: foo,\n    &quot;c&quot;: []\n}\n</code></pre>\n<p>the desired result is</p>\n<pre><code>{\n    &quot;a&quot;: {&quot;a2&quot;: 2},\n    &quot;c&quot;: []\n}\n</code></pre>\n<p>I'm using <a href=\"https://github.com/json-path/JsonPath\" rel=\"nofollow noreferrer\">Jayway Jsonpath</a>, but I'm open to use other libraries. My current solution is the following:</p>\n<ul>\n<li>find the minimal jsonpath list that describe the same set of elements (i.e. remove <code>&quot;$.a.a2&quot;</code> if <code>&quot;$.a&quot;</code> is present);</li>\n<li>determine the leaf objects (in the first example <code>a2</code> and <code>c</code>) and build a map that is capable to contain them, as creation of deep nodes is still <a href=\"https://github.com/json-path/JsonPath/issues/83\" rel=\"nofollow noreferrer\">not supported</a>: in the first example, after this step I'm creating a map <code>{&quot;a&quot;: {}}</code>;</li>\n<li>read the values from the initial object and copy them in the map with the provided methods <code>read</code>/<code>set</code>.</li>\n</ul>\n<p>I'm quite surprised that such feature is not present. Is there a better way to filter properties in an object? <a href=\"https://stackoverflow.com/a/64577801/11478354\">Squiggly</a> might be a suitable solution, but is not maintained.</p>\n"},{"tags":["java","json","spring","endpoint"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1687793856,"post_id":76558173,"comment_id":134983000,"body_markdown":"I think your image is of the Chrome debug console. It&#39;s showing a rendered view of your JSON, not the raw text. There&#39;s another tab in the debug console to do that.","body":"I think your image is of the Chrome debug console. It&#39;s showing a rendered view of your JSON, not the raw text. There&#39;s another tab in the debug console to do that."},{"owner":{"account_id":15033093,"reputation":1,"user_id":10850479,"display_name":"chambers91"},"score":0,"creation_date":1687794104,"post_id":76558173,"comment_id":134983046,"body_markdown":"Thanks for the quick response, this is my second time ever dealing with Stack Overflow to ask a question and it seems more difficult than expected to share screenshots and details like I want to.","body":"Thanks for the quick response, this is my second time ever dealing with Stack Overflow to ask a question and it seems more difficult than expected to share screenshots and details like I want to."},{"owner":{"account_id":15033093,"reputation":1,"user_id":10850479,"display_name":"chambers91"},"score":0,"creation_date":1687794148,"post_id":76558173,"comment_id":134983058,"body_markdown":"Here is how my data displays within any browser right now:\n\n[{&quot;email&quot;:&quot;Terence@aol.com + /n&quot;,&quot;password&quot;:&quot;test123&quot;}]","body":"Here is how my data displays within any browser right now:  [{&quot;email&quot;:&quot;Terence@aol.com + /n&quot;,&quot;password&quot;:&quot;test123&quot;}]"},{"owner":{"account_id":15033093,"reputation":1,"user_id":10850479,"display_name":"chambers91"},"score":0,"creation_date":1687794197,"post_id":76558173,"comment_id":134983076,"body_markdown":"This is my current code within my controller:\n\n @GetMapping()\n    public List&lt;User&gt; getUsers(){\n    return List.of(\n        new User(\n                1L,\n                 &quot;Terence@aol.com&quot; ,\n            &quot;test123&quot;\n        )\n        );\n\n        }","body":"This is my current code within my controller:   @GetMapping()     public List&lt;User&gt; getUsers(){     return List.of(         new User(                 1L,                  &quot;Terence@aol.com&quot; ,             &quot;test123&quot;         )         );          }"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1687794334,"post_id":76558173,"comment_id":134983114,"body_markdown":"If you are looking for a line break, that&#39;s `\\n`, not `/n`.","body":"If you are looking for a line break, that&#39;s <code>\\n</code>, not <code>&#47;n</code>."},{"owner":{"account_id":15033093,"reputation":1,"user_id":10850479,"display_name":"chambers91"},"score":0,"creation_date":1687795265,"post_id":76558173,"comment_id":134983339,"body_markdown":"Thank you for noticing that error, I have made that modification and instead of the data going to the next line, &quot;\\n&quot; has been added within the same string.","body":"Thank you for noticing that error, I have made that modification and instead of the data going to the next line, &quot;\\n&quot; has been added within the same string."},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1687795879,"post_id":76558173,"comment_id":134983456,"body_markdown":"There is an extension for Chrome: https://chrome.google.com/webstore/detail/json-formatter/bcjindcccaagfpapjjmafapmmgkkhgoa","body":"There is an extension for Chrome: <a href=\"https://chrome.google.com/webstore/detail/json-formatter/bcjindcccaagfpapjjmafapmmgkkhgoa\" rel=\"nofollow noreferrer\">chrome.google.com/webstore/detail/json-formatter/&hellip;</a>"},{"owner":{"account_id":15033093,"reputation":1,"user_id":10850479,"display_name":"chambers91"},"score":0,"creation_date":1687802629,"post_id":76558173,"comment_id":134984865,"body_markdown":"@Mar-Z I knew it had to be an easy solution thank you for the guidance, that worked!","body":"@Mar-Z I knew it had to be an easy solution thank you for the guidance, that worked!"},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1687804334,"post_id":76558173,"comment_id":134985119,"body_markdown":"Cool. Thanks for feedback.","body":"Cool. Thanks for feedback."}],"owner":{"account_id":15033093,"reputation":1,"user_id":10850479,"display_name":"chambers91"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687793933,"creation_date":1687793632,"question_id":76558173,"body_markdown":"I am trying to format the data received from my API so that each value populates on its own individual line. Currently the data returns horizontal within my Safari and Chrome browser. I have tried to add  &quot; +/n&quot; to my API and that did not work. I have attempted to search for a solution on Stack Overflow as well as on Google, neither resource provides a solution for my task. Below is the details of the IDE version I am working on:\r\n\r\n```none\r\nIntelliJ IDEA 2023.2 EAP (Community Edition)\r\nBuild #IC-232.7754.73, built on June 15, 2023\r\nRuntime version: 17.0.7+7-b985.2 aarch64\r\nVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o.\r\nmacOS 13.4.1\r\nGC: G1 Young Generation, G1 Old Generation\r\nMemory: 2048M\r\nCores: 10\r\nMetal Rendering is ON\r\nRegistry:\r\n    ide.experimental.ui=true\r\n\r\n\r\nKotlin: 232-1.8.21-release-380-IJ7754.73\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zXyfo.png","title":"How can i get my API data to display vertically instead of horizontally in Intellij?","body":"<p>I am trying to format the data received from my API so that each value populates on its own individual line. Currently the data returns horizontal within my Safari and Chrome browser. I have tried to add  &quot; +/n&quot; to my API and that did not work. I have attempted to search for a solution on Stack Overflow as well as on Google, neither resource provides a solution for my task. Below is the details of the IDE version I am working on:</p>\n<pre class=\"lang-none prettyprint-override\"><code>IntelliJ IDEA 2023.2 EAP (Community Edition)\nBuild #IC-232.7754.73, built on June 15, 2023\nRuntime version: 17.0.7+7-b985.2 aarch64\nVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o.\nmacOS 13.4.1\nGC: G1 Young Generation, G1 Old Generation\nMemory: 2048M\nCores: 10\nMetal Rendering is ON\nRegistry:\n    ide.experimental.ui=true\n\n\nKotlin: 232-1.8.21-release-380-IJ7754.73\n</code></pre>\n"},{"tags":["java","selenium-webdriver","webdriver"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1687768899,"post_id":76554886,"comment_id":134977590,"body_markdown":"What do you think does *Unable to find executable for: C:\\selenium\\chrome* mean? There is either no chrome driver installed or it is installed to a different path. That seems to be the root cause of the `SessionNotCreatedException`, which says *Possible causes are invalid address of the remote server or browser start-up failure*…","body":"What do you think does <i>Unable to find executable for: C:\\selenium\\chrome</i> mean? There is either no chrome driver installed or it is installed to a different path. That seems to be the root cause of the <code>SessionNotCreatedException</code>, which says <i>Possible causes are invalid address of the remote server or browser start-up failure</i>…"}],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687772754,"creation_date":1687772754,"answer_id":76555488,"question_id":76554886,"body_markdown":"This error message...\r\n\r\n\tException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.\r\n\r\n...implies that [Selenium](https://stackoverflow.com/a/54482491/7429447) driven [ChromeDriver](https://stackoverflow.com/a/48080871/7429447) initiated [tag:google-chrome] _browsing context failed to open.\r\n\r\n\r\n----------\r\n\r\n\r\nRoot Cause\r\n----------\r\nConsidering [Selenium](https://stackoverflow.com/a/54482491/7429447) version to be _**4.10.0**_ the _`java.version`_ _**1.8.0_212**_ is too _old_ and _ancient_.\r\n\r\n\r\n----------\r\n\r\n\r\nSolution\r\n--------\r\nEnsure that:\r\n\r\n- _JDK_ is upgraded to current levels [JDK 8u361](https://www.oracle.com/java/technologies/javase/javase8u211-later-archive-downloads.html).","title":"What does SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server error means?","body":"<p>This error message...</p>\n<pre><code>Exception in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.\n</code></pre>\n<p>...implies that <a href=\"https://stackoverflow.com/a/54482491/7429447\">Selenium</a> driven <a href=\"https://stackoverflow.com/a/48080871/7429447\">ChromeDriver</a> initiated <a href=\"/questions/tagged/google-chrome\" class=\"post-tag\" title=\"show questions tagged &#39;google-chrome&#39;\" aria-label=\"show questions tagged &#39;google-chrome&#39;\" rel=\"tag\" aria-labelledby=\"tag-google-chrome-tooltip-container\">google-chrome</a> _browsing context failed to open.</p>\n<hr />\n<h2>Root Cause</h2>\n<p>Considering <a href=\"https://stackoverflow.com/a/54482491/7429447\">Selenium</a> version to be <em><strong>4.10.0</strong></em> the <em><code>java.version</code></em> <em><strong>1.8.0_212</strong></em> is too <em>old</em> and <em>ancient</em>.</p>\n<hr />\n<h2>Solution</h2>\n<p>Ensure that:</p>\n<ul>\n<li><em>JDK</em> is upgraded to current levels <a href=\"https://www.oracle.com/java/technologies/javase/javase8u211-later-archive-downloads.html\" rel=\"nofollow noreferrer\">JDK 8u361</a>.</li>\n</ul>\n"}],"owner":{"account_id":28891256,"reputation":1,"user_id":22128371,"display_name":"אפרת לנג"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":281,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687793922,"creation_date":1687768119,"question_id":76554886,"body_markdown":"I&#39;m facing an error in Selenium Java. I don&#39;t understand what this means. What does this error mean in Selenium Java?\r\n````\r\nיונ 26, 2023 11:22:49 AM org.openqa.selenium.remote.service.DriverService$Builder getLogOutput\r\nINFO: Driver logs no longer sent to console by default; https://www.selenium.dev/documentation/webdriver/drivers/service/#setting-log-output\r\nSLF4J: No SLF4J providers were found.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\r\nException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure. \r\nHost info: host: &#39;DESKTOP-LDB7RDR&#39;, ip: &#39;192.168.181.1&#39;\r\nBuild info: version: &#39;4.10.0&#39;, revision: &#39;c14d967899&#39;\r\nSystem info: os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;1.8.0_212&#39;\r\nDriver info: org.openqa.selenium.chrome.ChromeDriver\r\nCommand: [null, newSession {capabilities=[Capabilities {browserName: chrome, goog:chromeOptions: {args: [--remote-allow-origins=*], extensions: []}}]}]\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:549)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:227)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:154)\r\n\tat org.openqa.selenium.chromium.ChromiumDriver.&lt;init&gt;(ChromiumDriver.java:107)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:87)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:82)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:50)\r\n\tat selenium.Selenium.main(Selenium.java:40)\r\nCaused by: java.lang.IllegalStateException: Actual executable Unable to find executable for: C:\\selenium\\chrome\r\n\tat org.openqa.selenium.internal.Require$StateChecker.nonNull(Require.java:314)\r\n\tat org.openqa.selenium.os.OsProcess.&lt;init&gt;(OsProcess.java:65)\r\n\tat org.openqa.selenium.os.CommandLine.&lt;init&gt;(CommandLine.java:35)\r\n\tat org.openqa.selenium.remote.service.DriverService.start(DriverService.java:210)\r\n\tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:119)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:531)\r\n\t... 7 more\r\nC:\\Users\\שם לא ידוע\\AppData\\Local\\NetBeans\\Cache\\8.2\\executor-snippets\\run.xml:53: Java returned: 1\r\nBUILD FAILED (total time: 1 second)\r\n````","title":"What does SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server error means?","body":"<p>I'm facing an error in Selenium Java. I don't understand what this means. What does this error mean in Selenium Java?</p>\n<pre><code>יונ 26, 2023 11:22:49 AM org.openqa.selenium.remote.service.DriverService$Builder getLogOutput\nINFO: Driver logs no longer sent to console by default; https://www.selenium.dev/documentation/webdriver/drivers/service/#setting-log-output\nSLF4J: No SLF4J providers were found.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\nException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure. \nHost info: host: 'DESKTOP-LDB7RDR', ip: '192.168.181.1'\nBuild info: version: '4.10.0', revision: 'c14d967899'\nSystem info: os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_212'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCommand: [null, newSession {capabilities=[Capabilities {browserName: chrome, goog:chromeOptions: {args: [--remote-allow-origins=*], extensions: []}}]}]\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:549)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:227)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:154)\n    at org.openqa.selenium.chromium.ChromiumDriver.&lt;init&gt;(ChromiumDriver.java:107)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:87)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:82)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:50)\n    at selenium.Selenium.main(Selenium.java:40)\nCaused by: java.lang.IllegalStateException: Actual executable Unable to find executable for: C:\\selenium\\chrome\n    at org.openqa.selenium.internal.Require$StateChecker.nonNull(Require.java:314)\n    at org.openqa.selenium.os.OsProcess.&lt;init&gt;(OsProcess.java:65)\n    at org.openqa.selenium.os.CommandLine.&lt;init&gt;(CommandLine.java:35)\n    at org.openqa.selenium.remote.service.DriverService.start(DriverService.java:210)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:119)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:531)\n    ... 7 more\nC:\\Users\\שם לא ידוע\\AppData\\Local\\NetBeans\\Cache\\8.2\\executor-snippets\\run.xml:53: Java returned: 1\nBUILD FAILED (total time: 1 second)\n</code></pre>\n"},{"tags":["java","spring","spring-boot","multipartform-data"],"comments":[{"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"score":0,"creation_date":1687788797,"post_id":76557426,"comment_id":134981785,"body_markdown":"You may try to specify the character encoding explicitly for the start:\n`spring.http.encoding.charset=UTF-8`;\n`spring.http.encoding.force=true`","body":"You may try to specify the character encoding explicitly for the start: <code>spring.http.encoding.charset=UTF-8</code>; <code>spring.http.encoding.force=true</code>"},{"owner":{"account_id":13236506,"reputation":17,"user_id":9558500,"display_name":"Mudabbir Pasha"},"score":0,"creation_date":1687791041,"post_id":76557426,"comment_id":134982365,"body_markdown":"@yahorbarkouski after adding the UTF-8 encoding property, the issue still exists.\nthe image part is empty","body":"@yahorbarkouski after adding the UTF-8 encoding property, the issue still exists. the image part is empty"},{"owner":{"account_id":1573445,"reputation":4861,"user_id":1460591,"accept_rate":79,"display_name":"Youans"},"score":0,"creation_date":1687794279,"post_id":76557426,"comment_id":134983098,"body_markdown":"Could be the image file is corrupted, Did you try a png and see the result","body":"Could be the image file is corrupted, Did you try a png and see the result"},{"owner":{"account_id":1573445,"reputation":4861,"user_id":1460591,"accept_rate":79,"display_name":"Youans"},"score":0,"creation_date":1687794557,"post_id":76557426,"comment_id":134983185,"body_markdown":"For example you can use this https://codebeautify.org/base64-to-image-converter to paste the encoded 64 base content to convert into image file. So the base64 should be valid when you log it","body":"For example you can use this <a href=\"https://codebeautify.org/base64-to-image-converter\" rel=\"nofollow noreferrer\">codebeautify.org/base64-to-image-converter</a> to paste the encoded 64 base content to convert into image file. So the base64 should be valid when you log it"},{"owner":{"account_id":13236506,"reputation":17,"user_id":9558500,"display_name":"Mudabbir Pasha"},"score":0,"creation_date":1687816626,"post_id":76557426,"comment_id":134986964,"body_markdown":"@Youans I was able to decode the base64 encoded image file present in request body. So the image is not corrupted. But for some reason the content is not coming in the Part.","body":"@Youans I was able to decode the base64 encoded image file present in request body. So the image is not corrupted. But for some reason the content is not coming in the Part."}],"owner":{"account_id":13236506,"reputation":17,"user_id":9558500,"display_name":"Mudabbir Pasha"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687793888,"creation_date":1687788243,"question_id":76557426,"body_markdown":"I have a Spring Application with REST API to accept MMS and the API structure is like\r\n````\r\npublic ResponseEntity&lt;String&gt; forwardMMS(@RequestParam(name = &quot;recipients&quot;) @NotBlank String recipients,\r\n                                             @RequestParam(name = &quot;sender&quot;) @NotBlank String sender,\r\n                                             @RequestParam(name = &quot;subject&quot;, required = false) String subject,\r\n                                             @RequestHeader(name = &quot;X-Transaction-ID&quot;, required = false) String uuidFromHeader,\r\n                                             MultipartHttpServletRequest multipartHttpServletRequest) \r\n````\r\n\r\nI have issues when trying to retrieve the parts from the multipartHttpServletRequest for Image or gif files.\r\n\r\nbelow is the code:\r\n````\r\nprivate List&lt;Part&gt; getMmsContentParts(MultipartHttpServletRequest multipartHttpServletRequest) {\r\n        List&lt;Part&gt; attachments = new ArrayList&lt;&gt;();\r\n        try {\r\n            for (Part part : multipartHttpServletRequest.getParts()) {\r\n                if (part.getName().equals(&quot;mmsContent&quot;)) {\r\n                    attachments.add(part);\r\n                }\r\n            }\r\n        } catch (IOException | ServletException e) {\r\n            LOGGER.error(&quot;Error getting Parts&quot;, e);\r\n        }\r\n        logContentToDebug(attachments);\r\n        return attachments;\r\n    }\r\n\r\n    private void logContentToDebug(List&lt;Part&gt; attachments) {\r\n        for (Part part : attachments) {\r\n            String contentType = part.getContentType();\r\n            LOGGER.debug(&quot;File contentType : {} and its content size is : {}&quot;, contentType, part.getSize());\r\n        }\r\n    }\r\n````\r\n\r\nLogs from My code for the above code\r\n\r\n 1. For a smil and image file\r\n````\r\n&quot;message&quot;:&quot;File contentType : application/smil;charset=UTF-8 and its content size is : 301&quot;\r\n&quot;message&quot;:&quot;File contentType : image/jpeg; name=709055746.jpg and its content size is : 0&quot;\r\n````\r\n\r\n 2. For a smil and video file in 3gp format\r\n````\r\n&quot;message&quot;:&quot;File contentType : application/smil;charset=UTF-8 and its content size is : 302&quot;\r\n&quot;message&quot;:&quot;File contentType : video/3gpp; name=709048525.3gp and its content size is : 1045&quot;\r\n````\r\n\r\n\r\nI logged the request body using the Filter to check if I&#39;m actually receiving the image file or not. In request body the image file content in base64 format is present.\r\n\r\n````\r\n@Override\r\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\r\n        HttpServletRequest httpRequest = (HttpServletRequest) servletRequest;\r\n        String requestBody = IOUtils.toString(httpRequest.getInputStream(), StandardCharsets.UTF_8);\r\n        LOGGER.info(&quot;Request Body {}: &quot;, requestBody);\r\n    }\r\n````\r\n\r\nrequest body log for both image and Video requests\r\n\r\n 1. Request body with Image\r\n````\r\nRequest Body: \r\n------=_Part_22_1815075090.1687446854525\r\nContent-Type: application/smil;charset=UTF-8\r\nContent-Transfer-Encoding: 7bit\r\nContent-ID: 0.smil\r\nContent-Disposition: form-data; name=mmsContent\r\n\r\n&lt;smil&gt;\r\n&lt;head&gt;\r\n&lt;layout&gt;\r\n &lt;root-layout/&gt;\r\n&lt;region id=&quot;Text&quot; top=&quot;70%&quot; left=&quot;0%&quot; height=&quot;30%&quot; width=&quot;100%&quot; fit=&quot;scroll&quot;/&gt;\r\n&lt;region id=&quot;Image&quot; top=&quot;0%&quot; left=&quot;0%&quot; height=&quot;70%&quot; width=&quot;100%&quot; fit=&quot;meet&quot;/&gt;\r\n&lt;/layout&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;par dur=&quot;10s&quot;&gt;\r\n&lt;img src=&quot;709055746.jpg&quot; region=&quot;Image&quot;/&gt;\r\n&lt;/par&gt;\r\n&lt;/body&gt;\r\n&lt;/smil&gt;\r\n\r\n------=_Part_22_1815075090.1687446854525\r\nContent-Type: image/jpeg; name=709055746.jpg\r\nContent-Transfer-Encoding: base64\r\nContent-ID: 0\r\nContent-Disposition: form-data; filename=709055746.jpg; name=mmsContent\r\n\r\n/9j/4AAUSkZJRgABAQEBLAEsAABBTVBG/+EAvkV4aWYAAE1NACoAAAAIAAUBGgAFAAAAAQAAAEoB\r\nGwAFAAAAAQAAAFIBKAADAAAAAQACAAACEwADAAAAAQABAACHaQAEAAAAAQAAAFoAAAAAAAAASAAA\r\nrPeA7CR1FZcmT8uKIxhAsnArk/EPjfQvCsqwanuC4++oyBXyp8bfjhYXtgum+Ejkv9+Tpivje41e\r\n7uEP2htxJ5Jro/CGsvbX6W0n3W4r6x8IWMdy4dh1r0i48HyS5KDrXn+veC5Z0OBhl9q8lvNL1DT3\r\nKSKRjvUMOpSRYUdR3rVh1xzhmOGAratfFIKeXPw1WjrUTuCDtr134dXMPiKwvfDEpDNt82MeuBhg\r\nPwr5s8YaHLoWszafIMbT8v07VxEjtH04xV+01LYuTWkNaXoTV2LWSF+U5rOuNWLHcarLeggydqia\r\n6Mn3SaiXDrhzirUFo90wUdvSu00jw0zsAFz9a9T07wyoVUaPOB+Vdf8A8K08O6pBv1G2Qkcbh8rf\r\nmuDXH61+z/pj/Po1+0bn+CUb19uVwQPwNeK+JPht4j8L7XvER43bYrRNuyT0AU4b9K//2Q==\r\n------=_Part_22_1815075090.1687446854525\r\nContent-Type: text/plain;charset=UTF-8\r\nContent-Transfer-Encoding: 7bit\r\nContent-Disposition: form-data; name=&quot;recipients&quot;\r\n\r\n1234\r\n------=_Part_22_1815075090.1687446854525\r\nContent-Type: text/plain;charset=UTF-8\r\nContent-Transfer-Encoding: 7bit\r\nContent-Disposition: form-data; name=&quot;sender&quot;\r\n\r\n45678\r\n------=_Part_22_1815075090.1687446854525--\r\n````\r\n\r\n 2. request body with video file\r\n````\r\nRequest Body: \r\n------=_Part_18_1310706778.1687446631068\r\nContent-Type: application/smil;charset=UTF-8\r\nContent-Transfer-Encoding: 7bit\r\nContent-ID: 0.smil\r\nContent-Disposition: form-data; name=mmsContent\r\n\r\n&lt;smil&gt;\r\n&lt;head&gt;\r\n&lt;layout&gt;\r\n &lt;root-layout/&gt;\r\n&lt;region id=&quot;Text&quot; top=&quot;70%&quot; left=&quot;0%&quot; height=&quot;30%&quot; width=&quot;100%&quot; fit=&quot;scroll&quot;/&gt;\r\n&lt;region id=&quot;Image&quot; top=&quot;0%&quot; left=&quot;0%&quot; height=&quot;70%&quot; width=&quot;100%&quot; fit=&quot;meet&quot;/&gt;\r\n&lt;/layout&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;par dur=&quot;2s&quot;&gt;\r\n&lt;video src=&quot;709048525.3gp&quot; region=&quot;Image&quot;/&gt;\r\n&lt;text src=&quot;text_1.txt&quot; region=&quot;Text&quot;/&gt;\r\n&lt;/par&gt;\r\n&lt;/body&gt;\r\n&lt;/smil&gt;\r\n\r\n------=_Part_18_1310706778.1687446631068\r\nContent-Type: video/3gpp; name=709048525.3gp\r\nContent-Transfer-Encoding: base64\r\nContent-ID: 0\r\nContent-Disposition: form-data; filename=709048525.3gp; name=mmsContent\r\n\r\nAAAAHGZ0eXAzZ3A1AAABAGlzb20zZ3A1M2dwNAAABPRtb292AAAAbG12aGQAAAAA4LoU5eC6FOYA\r\nxxxxxx\r\nCgM7Gda2z+LyUU7wX7IzwAAAhB/62/AAAIgetkjGM1sWCTB8QEkfYwG8AACMHp6YF8HxADUAJ4oH\r\nJ1fB6f9ED0gKmCekBLR4XrAtSstTkaHg9oCCahYPiAg9n/wAAJAelxcD3f5pfBfAnAPqfF4kgwQO\r\nXD8GADgDviUJPy4GBCoPx6DBA0HSoRy4f+L8oiqWzdeJYQwg+H4KDyoSADL5R/QDlV3gKPw7t/85\r\nUKhJAM9VXgYANCEEMfj8D/gUECCEPwIQIYKS/VFxcxWAcH9pggKy8S/QGB9QQAYAPBQl0ioeiWP1\r\nYlF/wUymQf+9/Izi2kr+nIn5TEEhbQjcMEWNKuH7Rsw3oXN4CsAAAJQexhZay0Fmly0yUNnuhhbz\r\nnAAAmB//AACcH9rJvgAAoB/1NzuAAAA=\r\n------=_Part_18_1310706778.1687446631068\r\nContent-Type: text/plain;charset=UTF-8\r\nContent-Transfer-Encoding: 7bit\r\nContent-Disposition: form-data; name=&quot;recipients&quot;\r\n\r\n1234\r\n------=_Part_18_1310706778.1687446631068\r\nContent-Type: text/plain;charset=UTF-8\r\nContent-Transfer-Encoding: 7bit\r\nContent-Disposition: form-data; name=&quot;sender&quot;\r\n\r\n45678\r\n------=_Part_18_1310706778.1687446631068--\r\n````\r\n\r\nthe application properties for multipart handling is \r\n````\r\nspring.servlet.multipart.max-file-size=10MB\r\nspring.servlet.multipart.max-request-size=50MB\r\n````\r\n\r\nI&#39;m out of ideas of what might be the exact problem, can you please help me in solving the issue.\r\n\r\nMany thanks in advance.\r\n\r\nPS: the API works well for txt files.\r\n\r\n**UPDATE :**\r\nI added the below code to print the content of file parts received.\r\n````\r\nHttpServletRequest httpRequest = (HttpServletRequest) servletRequest;\r\n\r\n        List&lt;Part&gt; fileParts = new ArrayList&lt;&gt;();\r\n\r\n        for (Part part : httpRequest.getParts()) {\r\n            if (part.getName().equals(&quot;mmsContent&quot;)) {\r\n                fileParts.add(part);\r\n            }\r\n        }\r\n\r\n        for (Part part : fileParts) {\r\n            String contentType = part.getContentType();\r\n\r\n            try {\r\n                InputStream inputStream = part.getInputStream();\r\n                BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));\r\n                String line;\r\n                StringBuilder content = new StringBuilder();\r\n                while ((line = bufferedReader.readLine()) != null) {\r\n                    content.append(line);\r\n                }\r\n                LOGGER.info(&quot;File contentType : {} and its content is : {}&quot;, contentType, content);\r\n            } catch (IOException e) {\r\n                LOGGER.error(&quot;Error getting Parts content&quot;, e);\r\n            }\r\n        }\r\n````\r\n\r\n[![Log][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/A5I7t.png","title":"MultipartHttpServletRequest.getParts() return partial data (Image or gif content is null/empty)","body":"<p>I have a Spring Application with REST API to accept MMS and the API structure is like</p>\n<pre><code>public ResponseEntity&lt;String&gt; forwardMMS(@RequestParam(name = &quot;recipients&quot;) @NotBlank String recipients,\n                                             @RequestParam(name = &quot;sender&quot;) @NotBlank String sender,\n                                             @RequestParam(name = &quot;subject&quot;, required = false) String subject,\n                                             @RequestHeader(name = &quot;X-Transaction-ID&quot;, required = false) String uuidFromHeader,\n                                             MultipartHttpServletRequest multipartHttpServletRequest) \n</code></pre>\n<p>I have issues when trying to retrieve the parts from the multipartHttpServletRequest for Image or gif files.</p>\n<p>below is the code:</p>\n<pre><code>private List&lt;Part&gt; getMmsContentParts(MultipartHttpServletRequest multipartHttpServletRequest) {\n        List&lt;Part&gt; attachments = new ArrayList&lt;&gt;();\n        try {\n            for (Part part : multipartHttpServletRequest.getParts()) {\n                if (part.getName().equals(&quot;mmsContent&quot;)) {\n                    attachments.add(part);\n                }\n            }\n        } catch (IOException | ServletException e) {\n            LOGGER.error(&quot;Error getting Parts&quot;, e);\n        }\n        logContentToDebug(attachments);\n        return attachments;\n    }\n\n    private void logContentToDebug(List&lt;Part&gt; attachments) {\n        for (Part part : attachments) {\n            String contentType = part.getContentType();\n            LOGGER.debug(&quot;File contentType : {} and its content size is : {}&quot;, contentType, part.getSize());\n        }\n    }\n</code></pre>\n<p>Logs from My code for the above code</p>\n<ol>\n<li>For a smil and image file</li>\n</ol>\n<pre><code>&quot;message&quot;:&quot;File contentType : application/smil;charset=UTF-8 and its content size is : 301&quot;\n&quot;message&quot;:&quot;File contentType : image/jpeg; name=709055746.jpg and its content size is : 0&quot;\n</code></pre>\n<ol start=\"2\">\n<li>For a smil and video file in 3gp format</li>\n</ol>\n<pre><code>&quot;message&quot;:&quot;File contentType : application/smil;charset=UTF-8 and its content size is : 302&quot;\n&quot;message&quot;:&quot;File contentType : video/3gpp; name=709048525.3gp and its content size is : 1045&quot;\n</code></pre>\n<p>I logged the request body using the Filter to check if I'm actually receiving the image file or not. In request body the image file content in base64 format is present.</p>\n<pre><code>@Override\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\n        HttpServletRequest httpRequest = (HttpServletRequest) servletRequest;\n        String requestBody = IOUtils.toString(httpRequest.getInputStream(), StandardCharsets.UTF_8);\n        LOGGER.info(&quot;Request Body {}: &quot;, requestBody);\n    }\n</code></pre>\n<p>request body log for both image and Video requests</p>\n<ol>\n<li>Request body with Image</li>\n</ol>\n<pre><code>Request Body: \n------=_Part_22_1815075090.1687446854525\nContent-Type: application/smil;charset=UTF-8\nContent-Transfer-Encoding: 7bit\nContent-ID: 0.smil\nContent-Disposition: form-data; name=mmsContent\n\n&lt;smil&gt;\n&lt;head&gt;\n&lt;layout&gt;\n &lt;root-layout/&gt;\n&lt;region id=&quot;Text&quot; top=&quot;70%&quot; left=&quot;0%&quot; height=&quot;30%&quot; width=&quot;100%&quot; fit=&quot;scroll&quot;/&gt;\n&lt;region id=&quot;Image&quot; top=&quot;0%&quot; left=&quot;0%&quot; height=&quot;70%&quot; width=&quot;100%&quot; fit=&quot;meet&quot;/&gt;\n&lt;/layout&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;par dur=&quot;10s&quot;&gt;\n&lt;img src=&quot;709055746.jpg&quot; region=&quot;Image&quot;/&gt;\n&lt;/par&gt;\n&lt;/body&gt;\n&lt;/smil&gt;\n\n------=_Part_22_1815075090.1687446854525\nContent-Type: image/jpeg; name=709055746.jpg\nContent-Transfer-Encoding: base64\nContent-ID: 0\nContent-Disposition: form-data; filename=709055746.jpg; name=mmsContent\n\n/9j/4AAUSkZJRgABAQEBLAEsAABBTVBG/+EAvkV4aWYAAE1NACoAAAAIAAUBGgAFAAAAAQAAAEoB\nGwAFAAAAAQAAAFIBKAADAAAAAQACAAACEwADAAAAAQABAACHaQAEAAAAAQAAAFoAAAAAAAAASAAA\nrPeA7CR1FZcmT8uKIxhAsnArk/EPjfQvCsqwanuC4++oyBXyp8bfjhYXtgum+Ejkv9+Tpivje41e\n7uEP2htxJ5Jro/CGsvbX6W0n3W4r6x8IWMdy4dh1r0i48HyS5KDrXn+veC5Z0OBhl9q8lvNL1DT3\nKSKRjvUMOpSRYUdR3rVh1xzhmOGAratfFIKeXPw1WjrUTuCDtr134dXMPiKwvfDEpDNt82MeuBhg\nPwr5s8YaHLoWszafIMbT8v07VxEjtH04xV+01LYuTWkNaXoTV2LWSF+U5rOuNWLHcarLeggydqia\n6Mn3SaiXDrhzirUFo90wUdvSu00jw0zsAFz9a9T07wyoVUaPOB+Vdf8A8K08O6pBv1G2Qkcbh8rf\nmuDXH61+z/pj/Po1+0bn+CUb19uVwQPwNeK+JPht4j8L7XvER43bYrRNuyT0AU4b9K//2Q==\n------=_Part_22_1815075090.1687446854525\nContent-Type: text/plain;charset=UTF-8\nContent-Transfer-Encoding: 7bit\nContent-Disposition: form-data; name=&quot;recipients&quot;\n\n1234\n------=_Part_22_1815075090.1687446854525\nContent-Type: text/plain;charset=UTF-8\nContent-Transfer-Encoding: 7bit\nContent-Disposition: form-data; name=&quot;sender&quot;\n\n45678\n------=_Part_22_1815075090.1687446854525--\n</code></pre>\n<ol start=\"2\">\n<li>request body with video file</li>\n</ol>\n<pre><code>Request Body: \n------=_Part_18_1310706778.1687446631068\nContent-Type: application/smil;charset=UTF-8\nContent-Transfer-Encoding: 7bit\nContent-ID: 0.smil\nContent-Disposition: form-data; name=mmsContent\n\n&lt;smil&gt;\n&lt;head&gt;\n&lt;layout&gt;\n &lt;root-layout/&gt;\n&lt;region id=&quot;Text&quot; top=&quot;70%&quot; left=&quot;0%&quot; height=&quot;30%&quot; width=&quot;100%&quot; fit=&quot;scroll&quot;/&gt;\n&lt;region id=&quot;Image&quot; top=&quot;0%&quot; left=&quot;0%&quot; height=&quot;70%&quot; width=&quot;100%&quot; fit=&quot;meet&quot;/&gt;\n&lt;/layout&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;par dur=&quot;2s&quot;&gt;\n&lt;video src=&quot;709048525.3gp&quot; region=&quot;Image&quot;/&gt;\n&lt;text src=&quot;text_1.txt&quot; region=&quot;Text&quot;/&gt;\n&lt;/par&gt;\n&lt;/body&gt;\n&lt;/smil&gt;\n\n------=_Part_18_1310706778.1687446631068\nContent-Type: video/3gpp; name=709048525.3gp\nContent-Transfer-Encoding: base64\nContent-ID: 0\nContent-Disposition: form-data; filename=709048525.3gp; name=mmsContent\n\nAAAAHGZ0eXAzZ3A1AAABAGlzb20zZ3A1M2dwNAAABPRtb292AAAAbG12aGQAAAAA4LoU5eC6FOYA\nxxxxxx\nCgM7Gda2z+LyUU7wX7IzwAAAhB/62/AAAIgetkjGM1sWCTB8QEkfYwG8AACMHp6YF8HxADUAJ4oH\nJ1fB6f9ED0gKmCekBLR4XrAtSstTkaHg9oCCahYPiAg9n/wAAJAelxcD3f5pfBfAnAPqfF4kgwQO\nXD8GADgDviUJPy4GBCoPx6DBA0HSoRy4f+L8oiqWzdeJYQwg+H4KDyoSADL5R/QDlV3gKPw7t/85\nUKhJAM9VXgYANCEEMfj8D/gUECCEPwIQIYKS/VFxcxWAcH9pggKy8S/QGB9QQAYAPBQl0ioeiWP1\nYlF/wUymQf+9/Izi2kr+nIn5TEEhbQjcMEWNKuH7Rsw3oXN4CsAAAJQexhZay0Fmly0yUNnuhhbz\nnAAAmB//AACcH9rJvgAAoB/1NzuAAAA=\n------=_Part_18_1310706778.1687446631068\nContent-Type: text/plain;charset=UTF-8\nContent-Transfer-Encoding: 7bit\nContent-Disposition: form-data; name=&quot;recipients&quot;\n\n1234\n------=_Part_18_1310706778.1687446631068\nContent-Type: text/plain;charset=UTF-8\nContent-Transfer-Encoding: 7bit\nContent-Disposition: form-data; name=&quot;sender&quot;\n\n45678\n------=_Part_18_1310706778.1687446631068--\n</code></pre>\n<p>the application properties for multipart handling is</p>\n<pre><code>spring.servlet.multipart.max-file-size=10MB\nspring.servlet.multipart.max-request-size=50MB\n</code></pre>\n<p>I'm out of ideas of what might be the exact problem, can you please help me in solving the issue.</p>\n<p>Many thanks in advance.</p>\n<p>PS: the API works well for txt files.</p>\n<p><strong>UPDATE :</strong>\nI added the below code to print the content of file parts received.</p>\n<pre><code>HttpServletRequest httpRequest = (HttpServletRequest) servletRequest;\n\n        List&lt;Part&gt; fileParts = new ArrayList&lt;&gt;();\n\n        for (Part part : httpRequest.getParts()) {\n            if (part.getName().equals(&quot;mmsContent&quot;)) {\n                fileParts.add(part);\n            }\n        }\n\n        for (Part part : fileParts) {\n            String contentType = part.getContentType();\n\n            try {\n                InputStream inputStream = part.getInputStream();\n                BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));\n                String line;\n                StringBuilder content = new StringBuilder();\n                while ((line = bufferedReader.readLine()) != null) {\n                    content.append(line);\n                }\n                LOGGER.info(&quot;File contentType : {} and its content is : {}&quot;, contentType, content);\n            } catch (IOException e) {\n                LOGGER.error(&quot;Error getting Parts content&quot;, e);\n            }\n        }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/A5I7t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A5I7t.png\" alt=\"Log\" /></a></p>\n"},{"tags":["java","android","mp4box"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1687801152,"post_id":76558117,"comment_id":134984583,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":28898682,"reputation":1,"user_id":22134147,"display_name":"meme sheshe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687793251,"creation_date":1687793156,"question_id":76558117,"body_markdown":"Can some one give me a guide on how to use mp4parser to edit the mp4boxes?\r\n\r\nI tried\r\n\r\n\r\n    MP4Edit edit = new MP4Edit();\r\n    edit.open(inputFile);\r\n    edit.editBox(&quot;moov&quot;, newBoxContents);\r\n    edit.close();\r\n\r\nbut I want the detailed solution for all the boxes.","title":"use mp4parser to edit the mp4boxes","body":"<p>Can some one give me a guide on how to use mp4parser to edit the mp4boxes?</p>\n<p>I tried</p>\n<pre><code>MP4Edit edit = new MP4Edit();\nedit.open(inputFile);\nedit.editBox(&quot;moov&quot;, newBoxContents);\nedit.close();\n</code></pre>\n<p>but I want the detailed solution for all the boxes.</p>\n"},{"tags":["java","java-stream","java-11"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":5,"creation_date":1687785516,"post_id":76557016,"comment_id":134981005,"body_markdown":"&quot;this exception only occurs once in a while in my multi thread application&quot; Then I expect there&#39;s another thread modifying your HashMap.","body":"&quot;this exception only occurs once in a while in my multi thread application&quot; Then I expect there&#39;s another thread modifying your HashMap."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1687786522,"post_id":76557016,"comment_id":134981248,"body_markdown":"BTW `findAny` is just the method *starting* the whole stream evaluation || &quot;as you can see&quot;?!!   not really - that for sure is not the whole code! Better post a [mre]. || [documentation](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/ConcurrentModificationException.html): &quot;*thrown by methods that have detected concurrent modification of an object when such modification is not permissible . . . it is not generally permissible for one thread to modify a Collection while another thread is iterating over it*&quot;","body":"BTW <code>findAny</code> is just the method <i>starting</i> the whole stream evaluation || &quot;as you can see&quot;?!!   not really - that for sure is not the whole code! Better post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. || <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/ConcurrentModificationException.html\" rel=\"nofollow noreferrer\">documentation</a>: &quot;<i>thrown by methods that have detected concurrent modification of an object when such modification is not permissible . . . it is not generally permissible for one thread to modify a Collection while another thread is iterating over it</i>&quot;"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":4,"creation_date":1687786527,"post_id":76557016,"comment_id":134981251,"body_markdown":"This code is looping over the elements of the map. At each step of the loop, it checks if the map has been modified. If the map has been modified, then you get a CME. You&#39;re not getting the exception because this loop modified it, something else modified it while this loop was running.","body":"This code is looping over the elements of the map. At each step of the loop, it checks if the map has been modified. If the map has been modified, then you get a CME. You&#39;re not getting the exception because this loop modified it, something else modified it while this loop was running."},{"owner":{"account_id":3446101,"reputation":11395,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"score":0,"creation_date":1687789060,"post_id":76557016,"comment_id":134981851,"body_markdown":"How is your `getProblemItemsMap()` implemented? What happens if this is called from multiple threads, doesn&#39;t it share some objects which it at the same time modifies?","body":"How is your <code>getProblemItemsMap()</code> implemented? What happens if this is called from multiple threads, doesn&#39;t it share some objects which it at the same time modifies?"},{"owner":{"account_id":2290787,"reputation":4289,"user_id":2013672,"accept_rate":72,"display_name":"Sadık"},"score":0,"creation_date":1687790520,"post_id":76557016,"comment_id":134982244,"body_markdown":"As I understand from your comments, some other part of the software is modifying the map while this part iterates over it and it&#39;s hard to understand which part. Of course this is not &quot;the whole code&quot; (hundreds of placed where this map is modified) and it&#39;s not helpful to ask for a &quot;minimal reproducible example&quot; here. Unfortunately the stacktrace shows the location where the iteration takes place and not the location with the modification.","body":"As I understand from your comments, some other part of the software is modifying the map while this part iterates over it and it&#39;s hard to understand which part. Of course this is not &quot;the whole code&quot; (hundreds of placed where this map is modified) and it&#39;s not helpful to ask for a &quot;minimal reproducible example&quot; here. Unfortunately the stacktrace shows the location where the iteration takes place and not the location with the modification."},{"owner":{"account_id":2290787,"reputation":4289,"user_id":2013672,"accept_rate":72,"display_name":"Sadık"},"score":1,"creation_date":1687790634,"post_id":76557016,"comment_id":134982273,"body_markdown":"I am unsure what the comments are suggesting. To lock the map when modifying it or when iterating over it or both or maybe another solution?","body":"I am unsure what the comments are suggesting. To lock the map when modifying it or when iterating over it or both or maybe another solution?"},{"owner":{"account_id":1303659,"reputation":2036,"user_id":1253088,"display_name":"Vaibs"},"score":2,"creation_date":1687792594,"post_id":76557016,"comment_id":134982722,"body_markdown":"I would have gone for the &quot;ConcurrentHashMap &quot; instead of the &quot;Hashmap&quot; in your case.","body":"I would have gone for the &quot;ConcurrentHashMap &quot; instead of the &quot;Hashmap&quot; in your case."}],"answers":[{"comments":[{"owner":{"account_id":61566,"reputation":68934,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"score":1,"creation_date":1687792708,"post_id":76557936,"comment_id":134982751,"body_markdown":"... and how do you ensure the copying doesn&#39;t fail with a ConcurrentModificationException? After all, copying its contents uses the Map, too ...","body":"... and how do you ensure the copying doesn&#39;t fail with a ConcurrentModificationException? After all, copying its contents uses the Map, too ..."},{"owner":{"account_id":3446101,"reputation":11395,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"score":0,"creation_date":1687792901,"post_id":76557936,"comment_id":134982789,"body_markdown":"@meriton haha, that&#39;s a valid point :) Actually, I am not sure how `copyOf` is implemented, maybe it&#39;s more tolerant than the stream processing.","body":"@meriton haha, that&#39;s a valid point :) Actually, I am not sure how <code>copyOf</code> is implemented, maybe it&#39;s more tolerant than the stream processing."},{"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":0,"creation_date":1687792932,"post_id":76557936,"comment_id":134982798,"body_markdown":"In addition, Copying the map is likely not good for performance. Best suggestion so far was to use ConcurrentHashMap.","body":"In addition, Copying the map is likely not good for performance. Best suggestion so far was to use ConcurrentHashMap."},{"owner":{"account_id":3446101,"reputation":11395,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"score":0,"creation_date":1687793006,"post_id":76557936,"comment_id":134982821,"body_markdown":"@NathanHughes I somehow expected that the OP does not have control over `getProblemItemsMap()`. Of course the re-implementation of this method is the best solution.","body":"@NathanHughes I somehow expected that the OP does not have control over <code>getProblemItemsMap()</code>. Of course the re-implementation of this method is the best solution."},{"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":0,"creation_date":1687793172,"post_id":76557936,"comment_id":134982856,"body_markdown":"Seems likely to me too.","body":"Seems likely to me too."}],"tags":[],"owner":{"account_id":3446101,"reputation":11395,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687793192,"creation_date":1687791953,"answer_id":76557936,"question_id":76557016,"body_markdown":"EDIT: I suspect that what we are solving is a typical instance of [the X-Y problem][1]. Probably the whole code needs refactoring, as it probably does not make much sense working with a map which is constantly changing in the backrgound. What is the expected *overall* behaviour?\r\n\r\n---\r\n\r\nIt seems like there are bad guys around conspiring against your thread, modifying the map in the background :)\r\n\r\n1. The best solution, if you can change the code of `getProblemItemsMap()` or implement your own, would be to reimplement it completely so no one changes it while you use it.\r\n\r\n**Anyway, from the business logic point of view, how is the behaviour of your code defined if the underlying map is constantly changing?**\r\n\r\n2. Copy the map before use:\r\n```\r\nproblemItemsMap = Map.copyOf(getProblemItemsMap());\r\n```\r\nThe [documentation][2] says:\r\n&gt; Returns an unmodifiable Map containing the entries of the given Map. The given Map must not be null, and it must not contain any null keys or values. **If the given Map is subsequently modified, the returned Map will not reflect such modifications**.\r\n\r\nI am not sure how `copyOf` is implemented, *maybe* it will be able to catch a snapshot of the underlying map. I don&#39;t know how tolerant it is.\r\n\r\n\r\n  [1]: https://xyproblem.info/\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#copyOf(java.util.Map)","title":"ConcurrentModificationException when using java streams without modification","body":"<p>EDIT: I suspect that what we are solving is a typical instance of <a href=\"https://xyproblem.info/\" rel=\"nofollow noreferrer\">the X-Y problem</a>. Probably the whole code needs refactoring, as it probably does not make much sense working with a map which is constantly changing in the backrgound. What is the expected <em>overall</em> behaviour?</p>\n<hr />\n<p>It seems like there are bad guys around conspiring against your thread, modifying the map in the background :)</p>\n<ol>\n<li>The best solution, if you can change the code of <code>getProblemItemsMap()</code> or implement your own, would be to reimplement it completely so no one changes it while you use it.</li>\n</ol>\n<p><strong>Anyway, from the business logic point of view, how is the behaviour of your code defined if the underlying map is constantly changing?</strong></p>\n<ol start=\"2\">\n<li>Copy the map before use:</li>\n</ol>\n<pre><code>problemItemsMap = Map.copyOf(getProblemItemsMap());\n</code></pre>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#copyOf(java.util.Map)\" rel=\"nofollow noreferrer\">documentation</a> says:</p>\n<blockquote>\n<p>Returns an unmodifiable Map containing the entries of the given Map. The given Map must not be null, and it must not contain any null keys or values. <strong>If the given Map is subsequently modified, the returned Map will not reflect such modifications</strong>.</p>\n</blockquote>\n<p>I am not sure how <code>copyOf</code> is implemented, <em>maybe</em> it will be able to catch a snapshot of the underlying map. I don't know how tolerant it is.</p>\n"}],"owner":{"account_id":2290787,"reputation":4289,"user_id":2013672,"accept_rate":72,"display_name":"Sadık"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76557936,"answer_count":1,"score":0,"last_activity_date":1687793192,"creation_date":1687785030,"question_id":76557016,"body_markdown":"I get a ConcurrentModificationException although the piece of code that is listed in the stacktrace doesn&#39;t do any modification:\r\n\r\n    Map&lt;String, ProblemItem&gt; problemItemsMap = getProblemItemsMap();\r\n    Optional&lt;ProblemItem&gt; findAny =\r\n        problemItemsMap.values().stream()\r\n        .filter(pi -&gt; pi.getId().equals(id))\r\n        .findAny();\r\n\r\nI understand from [this answer][1] that it has to do with the HashMap. But as you can see, there is no add or remove or any other modification on the map at this location. I assume the problem occurs because of a modification somewhere else that just happen to be at the same time as the iteration.\r\n\r\nThe stacktrace looks like this:\r\n\r\n     Uncaught exception in thread &#39;pool-10-thread-1&#39;.java.util.ConcurrentModificationException: null\r\n    \tat java.base/java.util.HashMap$ValueSpliterator.tryAdvance(HashMap.java:1698)\r\n    \tat java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:127)\r\n    \tat java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:502)\r\n    \tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:488)\r\n    \tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n    \tat java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)\r\n    \tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n    \tat java.base/java.util.stream.ReferencePipeline.findAny(ReferencePipeline.java:548)\r\n\r\nSo I have no clue where the modification takes place and it confuses me that the stacktrace shows the iteration and not the modification.\r\n\r\nIt&#39;s worth mentioning that this exception only occurs once in a while in my multi thread application.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/32580801/concurrentmodificationexception-when-using-stream-with-maps-key-set","title":"ConcurrentModificationException when using java streams without modification","body":"<p>I get a ConcurrentModificationException although the piece of code that is listed in the stacktrace doesn't do any modification:</p>\n<pre><code>Map&lt;String, ProblemItem&gt; problemItemsMap = getProblemItemsMap();\nOptional&lt;ProblemItem&gt; findAny =\n    problemItemsMap.values().stream()\n    .filter(pi -&gt; pi.getId().equals(id))\n    .findAny();\n</code></pre>\n<p>I understand from <a href=\"https://stackoverflow.com/questions/32580801/concurrentmodificationexception-when-using-stream-with-maps-key-set\">this answer</a> that it has to do with the HashMap. But as you can see, there is no add or remove or any other modification on the map at this location. I assume the problem occurs because of a modification somewhere else that just happen to be at the same time as the iteration.</p>\n<p>The stacktrace looks like this:</p>\n<pre><code> Uncaught exception in thread 'pool-10-thread-1'.java.util.ConcurrentModificationException: null\n    at java.base/java.util.HashMap$ValueSpliterator.tryAdvance(HashMap.java:1698)\n    at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:127)\n    at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:502)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:488)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n    at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)\n    at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.base/java.util.stream.ReferencePipeline.findAny(ReferencePipeline.java:548)\n</code></pre>\n<p>So I have no clue where the modification takes place and it confuses me that the stacktrace shows the iteration and not the modification.</p>\n<p>It's worth mentioning that this exception only occurs once in a while in my multi thread application.</p>\n"},{"tags":["java","generics","casting"],"comments":[{"owner":{"display_name":"user6073886"},"score":2,"creation_date":1687793060,"post_id":76558070,"comment_id":134982834,"body_markdown":"There is no such thing as &quot;automatic&quot; casting. You are asking the impossible. You should rather question your design if you think you need this feature. For example why not just declare `Boy father = new Boy();`","body":"There is no such thing as &quot;automatic&quot; casting. You are asking the impossible. You should rather question your design if you think you need this feature. For example why not just declare <code>Boy father = new Boy();</code>"},{"owner":{"account_id":7361553,"reputation":8401,"user_id":5604676,"accept_rate":69,"display_name":"Sergii Bishyr"},"score":1,"creation_date":1687793211,"post_id":76558070,"comment_id":134982866,"body_markdown":"&lt;P extends Parent&gt; P downcast(Parent p) {\n  return (P) p;\n}","body":"&lt;P extends Parent&gt; P downcast(Parent p) {   return (P) p; }"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1687796678,"post_id":76558070,"comment_id":134983645,"body_markdown":"instead of writing `(Boy)father`, you want `downcast(father)` - no great gain, actually one additional method call (and maybe a warning)...","body":"instead of writing <code>(Boy)father</code>, you want <code>downcast(father)</code> - no great gain, actually one additional method call (and maybe a warning)..."}],"answers":[{"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":2,"creation_date":1687793309,"post_id":76558123,"comment_id":134982893,"body_markdown":"I was about to post something similar. You can even make the cast even more unsafe: `private static &lt;T&gt; T cast(Object value)`. You can then get zero compiler errors when calling `Boy boy = cast(&quot;I&#39;m a String, not a Boy!&quot;)`. However, there will still be a `ClassCastException`. The compiler is warning about that (the unchecked cast warning), so it&#39;s your own fault if you run into it.","body":"I was about to post something similar. You can even make the cast even more unsafe: <code>private static &lt;T&gt; T cast(Object value)</code>. You can then get zero compiler errors when calling <code>Boy boy = cast(&quot;I&#39;m a String, not a Boy!&quot;)</code>. However, there will still be a <code>ClassCastException</code>. The compiler is warning about that (the unchecked cast warning), so it&#39;s your own fault if you run into it."},{"owner":{"account_id":1387645,"reputation":7926,"user_id":1319284,"accept_rate":69,"display_name":"kutschkem"},"score":0,"creation_date":1687793392,"post_id":76558123,"comment_id":134982909,"body_markdown":"Also, what&#39;s the point? Simply avoiding to write the class name again?","body":"Also, what&#39;s the point? Simply avoiding to write the class name again?"}],"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":2,"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1687793188,"creation_date":1687793188,"answer_id":76558123,"question_id":76558070,"body_markdown":"You can abuse generics to achieve something like this:\r\n\r\n```\r\nprivate static &lt;F, T extends F&gt; T cast(F value) {\r\n    return (T) value;\r\n}\r\n```\r\n\r\nNow you can do\r\n```\r\nParent father = new Boy();\r\nParent mother = new Girl();\r\nBoy kid = cast(father);\r\nGirl kiddette = cast(mother);\r\n```\r\n\r\nThis works because the compiler infers the target type from the `kid` variables. It&#39;s also dangerous, as evidenced by the generated warning on `(T) value`: &quot;Unchecked cast: &#39;F&#39; to &#39;T&#39;&quot;. In general, you don&#39;t want to do this. All you are doing is tricking the compiler into casts that normally wouldn&#39;t be allowed.\r\n","title":"How to automatically downcast classes in java?","body":"<p>You can abuse generics to achieve something like this:</p>\n<pre><code>private static &lt;F, T extends F&gt; T cast(F value) {\n    return (T) value;\n}\n</code></pre>\n<p>Now you can do</p>\n<pre><code>Parent father = new Boy();\nParent mother = new Girl();\nBoy kid = cast(father);\nGirl kiddette = cast(mother);\n</code></pre>\n<p>This works because the compiler infers the target type from the <code>kid</code> variables. It's also dangerous, as evidenced by the generated warning on <code>(T) value</code>: &quot;Unchecked cast: 'F' to 'T'&quot;. In general, you don't want to do this. All you are doing is tricking the compiler into casts that normally wouldn't be allowed.</p>\n"}],"owner":{"account_id":22825676,"reputation":387,"user_id":16974979,"display_name":"KRISTIJAN TOMASINI"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":76558123,"answer_count":1,"score":-3,"last_activity_date":1687793188,"creation_date":1687792848,"question_id":76558070,"body_markdown":"How would you automatically downcast in Java?\r\n\r\nLook at this example:\r\n```java\r\npublic class Parent {}\r\n\r\npublic class Boy extends Parent {}\r\n\r\npublic class Girl extends Parent {}\r\n\r\nParent father = new Boy();\r\nParent mother = new Girl();\r\n\r\nBoy kid = (Boy)father;\r\nGirl kiddette = (Girl)mother;\r\n```\r\n\r\nI know I can downcast manually like in example above, but, how would I do it automatically?\r\n\r\nSo, what I want is a autocast method, something like this:\r\n```Java\r\npublic ? downcast(? parent) { return ? parent; }\r\n```\r\nwhich I would use like this:\r\n```java\r\nBoy kid = downcast(father);\r\nGirl kiddette = downcast(mother);\r\n```\r\nSo, I do not want to perform any explicit casting in the caller&#39;s method. I need ```downcast``` to hide the casting within itself. Preferrably, I would like to avoid type checks (```instanceof```) within the ```downcast``` method, so, if downcasting can be generalized, that would be great.\r\n\r\nWhat do I need to place instead of ```?```, ```?``` and ```?``` to make it work.\r\n\r\nI remember that I did this exact same thing 10 or so years ago in Java, and I remember that I was puzzled by the code, but it worked and I did not understand how it works just that it does, but I did not need to do this thing in Java again in the last 10 years, so I forgot what I did. And I remember that I managed to solve it without type checks. So, one line of code that worked for no matter how many child classes parrent class had.","title":"How to automatically downcast classes in java?","body":"<p>How would you automatically downcast in Java?</p>\n<p>Look at this example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Parent {}\n\npublic class Boy extends Parent {}\n\npublic class Girl extends Parent {}\n\nParent father = new Boy();\nParent mother = new Girl();\n\nBoy kid = (Boy)father;\nGirl kiddette = (Girl)mother;\n</code></pre>\n<p>I know I can downcast manually like in example above, but, how would I do it automatically?</p>\n<p>So, what I want is a autocast method, something like this:</p>\n<pre><code>public ? downcast(? parent) { return ? parent; }\n</code></pre>\n<p>which I would use like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Boy kid = downcast(father);\nGirl kiddette = downcast(mother);\n</code></pre>\n<p>So, I do not want to perform any explicit casting in the caller's method. I need <code>downcast</code> to hide the casting within itself. Preferrably, I would like to avoid type checks (<code>instanceof</code>) within the <code>downcast</code> method, so, if downcasting can be generalized, that would be great.</p>\n<p>What do I need to place instead of <code>?</code>, <code>?</code> and <code>?</code> to make it work.</p>\n<p>I remember that I did this exact same thing 10 or so years ago in Java, and I remember that I was puzzled by the code, but it worked and I did not understand how it works just that it does, but I did not need to do this thing in Java again in the last 10 years, so I forgot what I did. And I remember that I managed to solve it without type checks. So, one line of code that worked for no matter how many child classes parrent class had.</p>\n"},{"tags":["java","android-gradle-plugin","react-native"],"comments":[{"owner":{"account_id":9641289,"reputation":2833,"user_id":7155440,"display_name":"Sandy....."},"score":0,"creation_date":1537647282,"post_id":52459693,"comment_id":91862981,"body_markdown":"Can you please share your android/build.gradle file code, just want to confirm whether you have maven related changes.","body":"Can you please share your android/build.gradle file code, just want to confirm whether you have maven related changes."},{"owner":{"account_id":13910891,"reputation":136,"user_id":10044118,"display_name":"Selim Mıdıkoğlu"},"score":0,"creation_date":1537648277,"post_id":52459693,"comment_id":91863242,"body_markdown":"@Sandy updated. Added build.gradle as well. Maven url directory is correct I think. I saw a lot of solutions related to maven. But my build.gradle is the  same with solution.","body":"@Sandy updated. Added build.gradle as well. Maven url directory is correct I think. I saw a lot of solutions related to maven. But my build.gradle is the  same with solution."}],"answers":[{"comments":[{"owner":{"account_id":13910891,"reputation":136,"user_id":10044118,"display_name":"Selim Mıdıkoğlu"},"score":0,"creation_date":1537650532,"post_id":52460734,"comment_id":91863805,"body_markdown":"I have updated the question. Added package.json and android/app/build.gradle. I have no idea how can I find RN version in build.gradle. Can you please check the file above and if you have any idea it woudl be apreciated.","body":"I have updated the question. Added package.json and android/app/build.gradle. I have no idea how can I find RN version in build.gradle. Can you please check the file above and if you have any idea it woudl be apreciated."},{"owner":{"account_id":4594694,"reputation":576,"user_id":9821453,"display_name":"Anurag Chutani"},"score":0,"creation_date":1537694320,"post_id":52460734,"comment_id":91871255,"body_markdown":"Change implementation &quot;com.facebook.react:react-native:+&quot;  to implementation &quot;com.facebook.react:react-native:0.57.1&quot;","body":"Change implementation &quot;com.facebook.react:react-native:+&quot;  to implementation &quot;com.facebook.react:react-native:0.57.1&quot;"},{"owner":{"account_id":13910891,"reputation":136,"user_id":10044118,"display_name":"Selim Mıdıkoğlu"},"score":1,"creation_date":1537812332,"post_id":52460734,"comment_id":91911440,"body_markdown":"Thank You so much. I forgot to reply but your solution worked.","body":"Thank You so much. I forgot to reply but your solution worked."}],"tags":[],"owner":{"account_id":4594694,"reputation":576,"user_id":9821453,"display_name":"Anurag Chutani"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1537649164,"creation_date":1537649164,"answer_id":52460734,"question_id":52459693,"body_markdown":"Check your react-native version in package.json and android/app/build.gradle.","title":"npm run android commad gives cannot find symbol errors","body":"<p>Check your react-native version in package.json and android/app/build.gradle.</p>\n"},{"tags":[],"owner":{"account_id":28886032,"reputation":1,"user_id":22124332,"display_name":"Ashik Ibrahim"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687793035,"creation_date":1687604339,"answer_id":76545735,"question_id":52459693,"body_markdown":"i have tried all this but this error occurred now.\r\n Failed to install the app. Make sure you have the Android development environment set up: https://reactnative.dev/docs/environment-setup.\r\nError: Command failed: ./gradlew app:installStageDebug -PreactNativeDevServerPort=8081\r\n\r\nFAILURE: Build completed with 2 failures.\r\n\r\n1: Task failed with an exception.\r\n-----------\r\n* What went wrong:\r\nExecution failed for task &#39;:app:compileStageDebugJavaWithJavac&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:app:stageDebugCompileClasspath&#39;.\r\n   &gt; Failed to transform react-native-0.70.5-0.70.5.jar (com.facebook.react:react-native:0.70.5) to match attributes {artifactType=android-classes-jar, org.gradle.libraryelements=jar, org.gradle.status=release, org.gradle.usage=java-runtime}.\r\n      &gt; Could not find react-native-0.70.5-0.70.5.jar (com.facebook.react:react-native:0.70.5).\r\n        Searched in the following locations:\r\n            file:/home/abs-lt-567/Desktop/TonalProject/unison-appcode/node_modules/react-native/android/com/facebook/react/react-native/0.70.5/react-native-0.70.5-0.70.5.jar\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n==============================================================================\r\n\r\n2: Task failed with an exception.\r\n-----------\r\n* What went wrong:\r\njava.lang.StackOverflowError (no error message)","title":"npm run android commad gives cannot find symbol errors","body":"<p>i have tried all this but this error occurred now.\nFailed to install the app. Make sure you have the Android development environment set up: <a href=\"https://reactnative.dev/docs/environment-setup\" rel=\"nofollow noreferrer\">https://reactnative.dev/docs/environment-setup</a>.\nError: Command failed: ./gradlew app:installStageDebug -PreactNativeDevServerPort=8081</p>\n<p>FAILURE: Build completed with 2 failures.</p>\n<h2>1: Task failed with an exception.</h2>\n<ul>\n<li>What went wrong:\nExecution failed for task ':app:compileStageDebugJavaWithJavac'.</li>\n</ul>\n<blockquote>\n<p>Could not resolve all files for configuration ':app:stageDebugCompileClasspath'.\nFailed to transform react-native-0.70.5-0.70.5.jar (com.facebook.react:react-native:0.70.5) to match attributes {artifactType=android-classes-jar, org.gradle.libraryelements=jar, org.gradle.status=release, org.gradle.usage=java-runtime}.\n&gt; Could not find react-native-0.70.5-0.70.5.jar (com.facebook.react:react-native:0.70.5).\nSearched in the following locations:\nfile:/home/abs-lt-567/Desktop/TonalProject/unison-appcode/node_modules/react-native/android/com/facebook/react/react-native/0.70.5/react-native-0.70.5-0.70.5.jar</p>\n</blockquote>\n<ul>\n<li>Try:</li>\n</ul>\n<blockquote>\n<p>Run with --stacktrace option to get the stack trace.\nRun with --info or --debug option to get more log output.\nRun with --scan to get full insights.\n==============================================================================</p>\n</blockquote>\n<h2>2: Task failed with an exception.</h2>\n<ul>\n<li>What went wrong:\njava.lang.StackOverflowError (no error message)</li>\n</ul>\n"}],"owner":{"account_id":13910891,"reputation":136,"user_id":10044118,"display_name":"Selim Mıdıkoğlu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3273,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":52460734,"answer_count":2,"score":2,"last_activity_date":1687793035,"creation_date":1537641157,"question_id":52459693,"body_markdown":"While I was able to create my app with CRNA and eject it with npm run eject, and run it with npm run android, after three weeks this happened. For last 20 hours I deleted node,android studio,android sdk and downloaded all of them again. Still same errors occur. I quite do not understand if these are occur because of gradle or java or android. I have two questions.\r\n###Questions\r\n1.How can I solve this problem?\r\n\r\n2.\r\n\r\na) crna myApp -&gt; cd myApp -&gt; npm run eject -&gt; npm run android | \r\n\r\nb) react-native init myApp -&gt; cd myApp -&gt; react-native run-android\r\n\r\nSecond one works good, but I do not like expo. It seems ıt compiles and runs more slowly and creates a lot of errors with react-native link. I want to know in which circumstances I have to use one of them relatedly. I am about to kill myself so any help will be appreciated with best. \r\n\r\n    :app:compileDebugJavaWithJavac\r\n\r\n    :app:compileDebugJavaWithJavac - is not incremental (e.g. outputs have changed, no previous execution, etc.).\r\n\r\n    \\android\\app\\src\\main\\java\\com\\biktim\\MainApplication.java:5: error: cannot find symbol\r\n    import com.facebook.react.ReactApplication;\r\n                         ^\r\n    symbol:   class ReactApplication\r\n    location: package com.facebook.react\r\n\r\n    \\android\\app\\src\\main\\java\\com\\biktim\\MainApplication.java:6: error: cannot find symbol\r\n    import com.facebook.react.ReactNativeHost;\r\n                         ^\r\n    symbol:   class ReactNativeHost\r\n    location: package com.facebook.react\r\n\r\n    \\android\\app\\src\\main\\java\\com\\biktim\\MainApplication.java:14: error: cannot find symbol\r\n    public class MainApplication extends Application implements ReactApplication \r\n    {\r\n                                                            ^\r\n    symbol: class ReactApplication\r\n\r\n    \\android\\app\\src\\main\\java\\com\\biktim\\MainApplication.java:16: error: cannot find symbol\r\n    private final ReactNativeHost mReactNativeHost = new ReactNativeHost(this) {\r\n                ^\r\n    symbol:   class ReactNativeHost\r\n    location: class MainApplication\r\n\r\n    \\android\\app\\src\\main\\java\\com\\biktim\\MainApplication.java:36: error: cannot find symbol\r\n    public ReactNativeHost getReactNativeHost() {\r\n         ^\r\n    symbol:   class ReactNativeHost\r\n    location: class MainApplication\r\n\r\n    \\android\\app\\src\\main\\java\\com\\biktim\\MainActivity.java:5: error: MainActivity is not abstract and does not override abstract method getPackages() in ReactActivity\r\n    public class MainActivity extends ReactActivity {\r\n       ^\r\n    \\android\\app\\src\\main\\java\\com\\biktim\\MainApplication.java:16: error: cannot find symbol\r\n    private final ReactNativeHost mReactNativeHost = new ReactNativeHost(this) {\r\n                                                       ^\r\n    symbol:   class ReactNativeHost\r\n    location: class MainApplication\r\n\r\n    \\android\\app\\src\\main\\java\\com\\biktim\\MainApplication.java:35: error: method does not override or implement a method from a supertype\r\n     @Override\r\n      ^\r\n    8 errors\r\n    :app:compileDebugJavaWithJavac FAILED\r\n\r\n    FAILURE: Build failed with an exception.\r\n\r\n###MainApplication.java\r\n\r\n   \r\n\r\n     package com.biktim;\r\n    \r\n    import android.app.Application;\r\n    \r\n    import com.facebook.react.ReactApplication;\r\n    import com.facebook.react.ReactNativeHost;\r\n    import com.facebook.react.ReactPackage;\r\n    import com.facebook.react.shell.MainReactPackage;\r\n    import com.facebook.soloader.SoLoader;\r\n    \r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    public class MainApplication extends Application implements ReactApplication {\r\n    \r\n      private final ReactNativeHost mReactNativeHost = new ReactNativeHost(this) {\r\n        @Override\r\n        public boolean getUseDeveloperSupport() {\r\n          return BuildConfig.DEBUG;\r\n        }\r\n    \r\n        @Override\r\n        protected List&lt;ReactPackage&gt; getPackages() {\r\n          return Arrays.&lt;ReactPackage&gt;asList(\r\n              new MainReactPackage()\r\n          );\r\n        }\r\n    \r\n        @Override\r\n        protected String getJSMainModuleName() {\r\n          return &quot;index&quot;;\r\n        }\r\n      };\r\n    \r\n      @Override\r\n      public ReactNativeHost getReactNativeHost() {\r\n        return mReactNativeHost;\r\n      }\r\n    \r\n      @Override\r\n      public void onCreate() {\r\n        super.onCreate();\r\n        SoLoader.init(this, /* native exopackage */ false);\r\n      }\r\n    }\r\n###MainActivity.java\r\n    package com.biktim;\r\n\r\n    import com.facebook.react.ReactActivity;\r\n\r\n    public class MainActivity extends ReactActivity {\r\n\r\n    /**\r\n     * Returns the name of the main component registered from JavaScript.\r\n     * This is used to schedule rendering of the component.\r\n     */\r\n    @Override\r\n    protected String getMainComponentName() {\r\n        return &quot;biktim&quot;;\r\n    }\r\n}\r\n###android/build.gradle\r\n\r\n    // Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n    \r\n    buildscript {\r\n        repositories {\r\n            jcenter()\r\n        }\r\n        dependencies {\r\n            classpath &#39;com.android.tools.build:gradle:2.2.3&#39;\r\n    \r\n            // NOTE: Do not place your application dependencies here; they belong\r\n            // in the individual module build.gradle files\r\n        }\r\n    }\r\n    \r\n    allprojects {\r\n        repositories {\r\n            mavenLocal()\r\n            jcenter()\r\n            maven {\r\n                // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm\r\n                url &quot;$rootDir/../node_modules/react-native/android&quot;\r\n            }\r\n        }\r\n    }\r\n\r\n###android/app/build.gradle\r\n\r\n    apply plugin: &quot;com.android.application&quot;\r\n\r\n    import com.android.build.OutputFile\r\n\r\n\r\n\r\n    project.ext.react = [\r\n       entryFile: &quot;index.js&quot;\r\n    ]\r\n\r\n    apply from: &quot;../../node_modules/react-native/react.gradle&quot;\r\n\r\n    /**\r\n    * Set this to true to create two separate APKs instead of one:\r\n    *   - An APK that only works on ARM devices\r\n    *   - An APK that only works on x86 devices\r\n    * The advantage is the size of the APK is reduced by about 4MB.\r\n    * Upload all the APKs to the Play Store and people will download\r\n    * the correct one based on the CPU architecture of their device.\r\n    */\r\n    def enableSeparateBuildPerCPUArchitecture = false\r\n\r\n    /**\r\n    * Run Proguard to shrink the Java bytecode in release builds.\r\n    */\r\n    def enableProguardInReleaseBuilds = false\r\n\r\n    android {\r\n    compileSdkVersion rootProject.ext.compileSdkVersion\r\n    buildToolsVersion rootProject.ext.buildToolsVersion\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.biktim2&quot;\r\n        minSdkVersion rootProject.ext.minSdkVersion\r\n        targetSdkVersion rootProject.ext.targetSdkVersion\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n        ndk {\r\n            abiFilters &quot;armeabi-v7a&quot;, &quot;x86&quot;\r\n        }\r\n    }\r\n    splits {\r\n        abi {\r\n            reset()\r\n            enable enableSeparateBuildPerCPUArchitecture\r\n            universalApk false  // If true, also generate a universal APK\r\n            include &quot;armeabi-v7a&quot;, &quot;x86&quot;\r\n        }\r\n    }\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled enableProguardInReleaseBuilds\r\n            proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot;\r\n        }\r\n    }\r\n    // applicationVariants are e.g. debug, release\r\n    applicationVariants.all { variant -&gt;\r\n        variant.outputs.each { output -&gt;\r\n            // For each separate APK per architecture, set a unique version code as described here:\r\n            // http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits\r\n            def versionCodes = [&quot;armeabi-v7a&quot;:1, &quot;x86&quot;:2]\r\n            def abi = output.getFilter(OutputFile.ABI)\r\n            if (abi != null) {  // null for the universal-debug, universal-release variants\r\n                output.versionCodeOverride =\r\n                        versionCodes.get(abi) * 1048576 + \r\n    defaultConfig.versionCode\r\n            }\r\n        }\r\n    }\r\n    }\r\n\r\n    dependencies {\r\n    implementation fileTree(dir: &quot;libs&quot;, include: [&quot;*.jar&quot;])\r\n    implementation &quot;com.android.support:appcompat- \r\n     v7:${rootProject.ext.supportLibVersion}&quot;\r\n    implementation &quot;com.facebook.react:react-native:+&quot;  // From node_modules\r\n    }\r\n\r\n    // Run this once to be able to run the application with BUCK\r\n    // puts all compile dependencies into folder libs for BUCK to use\r\n    task copyDownloadableDepsToLibs(type: Copy) {\r\n    from configurations.compile\r\n    into &#39;libs&#39;\r\n    }\r\n###package.json\r\n\r\n    {\r\n      &quot;name&quot;: &quot;biktim2&quot;,\r\n      &quot;version&quot;: &quot;0.0.1&quot;,\r\n      &quot;private&quot;: true,\r\n      &quot;scripts&quot;: {\r\n        &quot;start&quot;: &quot;node node_modules/react-native/local-cli/cli.js start&quot;,\r\n        &quot;test&quot;: &quot;jest&quot;\r\n      },\r\n      &quot;dependencies&quot;: {\r\n        &quot;react&quot;: &quot;16.5.0&quot;,\r\n        &quot;react-native&quot;: &quot;0.57.1&quot;\r\n      },\r\n      &quot;devDependencies&quot;: {\r\n        &quot;babel-jest&quot;: &quot;23.6.0&quot;,\r\n        &quot;jest&quot;: &quot;23.6.0&quot;,\r\n        &quot;metro-react-native-babel-preset&quot;: &quot;0.45.6&quot;,\r\n        &quot;react-test-renderer&quot;: &quot;16.5.0&quot;\r\n      },\r\n      &quot;jest&quot;: {\r\n        &quot;preset&quot;: &quot;react-native&quot;\r\n      }\r\n    }","title":"npm run android commad gives cannot find symbol errors","body":"<p>While I was able to create my app with CRNA and eject it with npm run eject, and run it with npm run android, after three weeks this happened. For last 20 hours I deleted node,android studio,android sdk and downloaded all of them again. Still same errors occur. I quite do not understand if these are occur because of gradle or java or android. I have two questions.</p>\n\n<h3>Questions</h3>\n\n<p>1.How can I solve this problem?</p>\n\n<p>2.</p>\n\n<p>a) crna myApp -> cd myApp -> npm run eject -> npm run android | </p>\n\n<p>b) react-native init myApp -> cd myApp -> react-native run-android</p>\n\n<p>Second one works good, but I do not like expo. It seems ıt compiles and runs more slowly and creates a lot of errors with react-native link. I want to know in which circumstances I have to use one of them relatedly. I am about to kill myself so any help will be appreciated with best. </p>\n\n<pre><code>:app:compileDebugJavaWithJavac\n\n:app:compileDebugJavaWithJavac - is not incremental (e.g. outputs have changed, no previous execution, etc.).\n\n\\android\\app\\src\\main\\java\\com\\biktim\\MainApplication.java:5: error: cannot find symbol\nimport com.facebook.react.ReactApplication;\n                     ^\nsymbol:   class ReactApplication\nlocation: package com.facebook.react\n\n\\android\\app\\src\\main\\java\\com\\biktim\\MainApplication.java:6: error: cannot find symbol\nimport com.facebook.react.ReactNativeHost;\n                     ^\nsymbol:   class ReactNativeHost\nlocation: package com.facebook.react\n\n\\android\\app\\src\\main\\java\\com\\biktim\\MainApplication.java:14: error: cannot find symbol\npublic class MainApplication extends Application implements ReactApplication \n{\n                                                        ^\nsymbol: class ReactApplication\n\n\\android\\app\\src\\main\\java\\com\\biktim\\MainApplication.java:16: error: cannot find symbol\nprivate final ReactNativeHost mReactNativeHost = new ReactNativeHost(this) {\n            ^\nsymbol:   class ReactNativeHost\nlocation: class MainApplication\n\n\\android\\app\\src\\main\\java\\com\\biktim\\MainApplication.java:36: error: cannot find symbol\npublic ReactNativeHost getReactNativeHost() {\n     ^\nsymbol:   class ReactNativeHost\nlocation: class MainApplication\n\n\\android\\app\\src\\main\\java\\com\\biktim\\MainActivity.java:5: error: MainActivity is not abstract and does not override abstract method getPackages() in ReactActivity\npublic class MainActivity extends ReactActivity {\n   ^\n\\android\\app\\src\\main\\java\\com\\biktim\\MainApplication.java:16: error: cannot find symbol\nprivate final ReactNativeHost mReactNativeHost = new ReactNativeHost(this) {\n                                                   ^\nsymbol:   class ReactNativeHost\nlocation: class MainApplication\n\n\\android\\app\\src\\main\\java\\com\\biktim\\MainApplication.java:35: error: method does not override or implement a method from a supertype\n @Override\n  ^\n8 errors\n:app:compileDebugJavaWithJavac FAILED\n\nFAILURE: Build failed with an exception.\n</code></pre>\n\n<h3>MainApplication.java</h3>\n\n<pre><code> package com.biktim;\n\nimport android.app.Application;\n\nimport com.facebook.react.ReactApplication;\nimport com.facebook.react.ReactNativeHost;\nimport com.facebook.react.ReactPackage;\nimport com.facebook.react.shell.MainReactPackage;\nimport com.facebook.soloader.SoLoader;\n\nimport java.util.Arrays;\nimport java.util.List;\n\npublic class MainApplication extends Application implements ReactApplication {\n\n  private final ReactNativeHost mReactNativeHost = new ReactNativeHost(this) {\n    @Override\n    public boolean getUseDeveloperSupport() {\n      return BuildConfig.DEBUG;\n    }\n\n    @Override\n    protected List&lt;ReactPackage&gt; getPackages() {\n      return Arrays.&lt;ReactPackage&gt;asList(\n          new MainReactPackage()\n      );\n    }\n\n    @Override\n    protected String getJSMainModuleName() {\n      return \"index\";\n    }\n  };\n\n  @Override\n  public ReactNativeHost getReactNativeHost() {\n    return mReactNativeHost;\n  }\n\n  @Override\n  public void onCreate() {\n    super.onCreate();\n    SoLoader.init(this, /* native exopackage */ false);\n  }\n}\n</code></pre>\n\n<h3>MainActivity.java</h3>\n\n<pre><code>package com.biktim;\n\nimport com.facebook.react.ReactActivity;\n\npublic class MainActivity extends ReactActivity {\n\n/**\n * Returns the name of the main component registered from JavaScript.\n * This is used to schedule rendering of the component.\n */\n@Override\nprotected String getMainComponentName() {\n    return \"biktim\";\n}\n</code></pre>\n\n<p>}</p>\n\n<h3>android/build.gradle</h3>\n\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.2.3'\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        mavenLocal()\n        jcenter()\n        maven {\n            // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm\n            url \"$rootDir/../node_modules/react-native/android\"\n        }\n    }\n}\n</code></pre>\n\n<h3>android/app/build.gradle</h3>\n\n<pre><code>apply plugin: \"com.android.application\"\n\nimport com.android.build.OutputFile\n\n\n\nproject.ext.react = [\n   entryFile: \"index.js\"\n]\n\napply from: \"../../node_modules/react-native/react.gradle\"\n\n/**\n* Set this to true to create two separate APKs instead of one:\n*   - An APK that only works on ARM devices\n*   - An APK that only works on x86 devices\n* The advantage is the size of the APK is reduced by about 4MB.\n* Upload all the APKs to the Play Store and people will download\n* the correct one based on the CPU architecture of their device.\n*/\ndef enableSeparateBuildPerCPUArchitecture = false\n\n/**\n* Run Proguard to shrink the Java bytecode in release builds.\n*/\ndef enableProguardInReleaseBuilds = false\n\nandroid {\ncompileSdkVersion rootProject.ext.compileSdkVersion\nbuildToolsVersion rootProject.ext.buildToolsVersion\n\ndefaultConfig {\n    applicationId \"com.biktim2\"\n    minSdkVersion rootProject.ext.minSdkVersion\n    targetSdkVersion rootProject.ext.targetSdkVersion\n    versionCode 1\n    versionName \"1.0\"\n    ndk {\n        abiFilters \"armeabi-v7a\", \"x86\"\n    }\n}\nsplits {\n    abi {\n        reset()\n        enable enableSeparateBuildPerCPUArchitecture\n        universalApk false  // If true, also generate a universal APK\n        include \"armeabi-v7a\", \"x86\"\n    }\n}\nbuildTypes {\n    release {\n        minifyEnabled enableProguardInReleaseBuilds\n        proguardFiles getDefaultProguardFile(\"proguard-android.txt\"), \"proguard-rules.pro\"\n    }\n}\n// applicationVariants are e.g. debug, release\napplicationVariants.all { variant -&gt;\n    variant.outputs.each { output -&gt;\n        // For each separate APK per architecture, set a unique version code as described here:\n        // http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits\n        def versionCodes = [\"armeabi-v7a\":1, \"x86\":2]\n        def abi = output.getFilter(OutputFile.ABI)\n        if (abi != null) {  // null for the universal-debug, universal-release variants\n            output.versionCodeOverride =\n                    versionCodes.get(abi) * 1048576 + \ndefaultConfig.versionCode\n        }\n    }\n}\n}\n\ndependencies {\nimplementation fileTree(dir: \"libs\", include: [\"*.jar\"])\nimplementation \"com.android.support:appcompat- \n v7:${rootProject.ext.supportLibVersion}\"\nimplementation \"com.facebook.react:react-native:+\"  // From node_modules\n}\n\n// Run this once to be able to run the application with BUCK\n// puts all compile dependencies into folder libs for BUCK to use\ntask copyDownloadableDepsToLibs(type: Copy) {\nfrom configurations.compile\ninto 'libs'\n}\n</code></pre>\n\n<h3>package.json</h3>\n\n<pre><code>{\n  \"name\": \"biktim2\",\n  \"version\": \"0.0.1\",\n  \"private\": true,\n  \"scripts\": {\n    \"start\": \"node node_modules/react-native/local-cli/cli.js start\",\n    \"test\": \"jest\"\n  },\n  \"dependencies\": {\n    \"react\": \"16.5.0\",\n    \"react-native\": \"0.57.1\"\n  },\n  \"devDependencies\": {\n    \"babel-jest\": \"23.6.0\",\n    \"jest\": \"23.6.0\",\n    \"metro-react-native-babel-preset\": \"0.45.6\",\n    \"react-test-renderer\": \"16.5.0\"\n  },\n  \"jest\": {\n    \"preset\": \"react-native\"\n  }\n}\n</code></pre>\n"},{"tags":["java","spring","transactions","spring-transactions"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1687765355,"post_id":76553075,"comment_id":134976950,"body_markdown":"It is because you are catching and swallow the exception. Transaction management thus doesn&#39;t see this exception and will try to commit, this isn&#39;t possible because the transaction is already marked for rollback. Hence the exception. Rule of thumb never catch and swallow an exception.","body":"It is because you are catching and swallow the exception. Transaction management thus doesn&#39;t see this exception and will try to commit, this isn&#39;t possible because the transaction is already marked for rollback. Hence the exception. Rule of thumb never catch and swallow an exception."},{"owner":{"account_id":4508336,"reputation":15533,"user_id":3665178,"accept_rate":73,"display_name":"Manuel Jordan"},"score":0,"creation_date":1687785758,"post_id":76553075,"comment_id":134981051,"body_markdown":"Therefore should be _re-throw_ from the _try/catch_ block, right? There are some projects that use the `try/catch` block to handle the flow process and can&#39;t be edited.","body":"Therefore should be <i>re-throw</i> from the <i>try/catch</i> block, right? There are some projects that use the <code>try&#47;catch</code> block to handle the flow process and can&#39;t be edited."},{"owner":{"account_id":4508336,"reputation":15533,"user_id":3665178,"accept_rate":73,"display_name":"Manuel Jordan"},"score":0,"creation_date":1687785789,"post_id":76553075,"comment_id":134981058,"body_markdown":"_Transaction management thus doesn&#39;t see this exception and will try to commit_ - it is about the Proxy with the Transaction support.","body":"<i>Transaction management thus doesn&#39;t see this exception and will try to commit</i> - it is about the Proxy with the Transaction support."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1687785834,"post_id":76553075,"comment_id":134981071,"body_markdown":"THe proxy doesn&#39;t see the exception because you catch it, hence for the transaction management it is unexpected because there was no exception.","body":"THe proxy doesn&#39;t see the exception because you catch it, hence for the transaction management it is unexpected because there was no exception."},{"owner":{"account_id":4508336,"reputation":15533,"user_id":3665178,"accept_rate":73,"display_name":"Manuel Jordan"},"score":0,"creation_date":1687792516,"post_id":76553075,"comment_id":134982710,"body_markdown":"@M.Deinum see the _updated_ section.","body":"@M.Deinum see the <i>updated</i> section."},{"owner":{"account_id":4508336,"reputation":15533,"user_id":3665178,"accept_rate":73,"display_name":"Manuel Jordan"},"score":0,"creation_date":1687815262,"post_id":76553075,"comment_id":134986731,"body_markdown":"@M.Deinum about &quot;_this isn&#39;t possible because the transaction is already marked for rollback_&quot; - By whom is marked if the _Proxy_ (therefore the _Transaction Management_) is not aware about the _caught_ and _swallowed_ exception?","body":"@M.Deinum about &quot;<i>this isn&#39;t possible because the transaction is already marked for rollback</i>&quot; - By whom is marked if the <i>Proxy</i> (therefore the <i>Transaction Management</i>) is not aware about the <i>caught</i> and <i>swallowed</i> exception?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1687843684,"post_id":76553075,"comment_id":134989355,"body_markdown":"You have multiple `@Transactional` annotations, each of those creates a proxy. Although it detects that it isn&#39;t the most outer method being called upon the throwing of the `RuntimeException` your `BusinessRuntimeExceptionV2ServiceImpl` marks the transaction for rollback only (while not yet rolling back the whole transaction). The configuration belongs on the method/transaction that is actually handling that exception.","body":"You have multiple <code>@Transactional</code> annotations, each of those creates a proxy. Although it detects that it isn&#39;t the most outer method being called upon the throwing of the <code>RuntimeException</code> your <code>BusinessRuntimeExceptionV2ServiceImpl</code> marks the transaction for rollback only (while not yet rolling back the whole transaction). The configuration belongs on the method/transaction that is actually handling that exception."},{"owner":{"account_id":4508336,"reputation":15533,"user_id":3665178,"accept_rate":73,"display_name":"Manuel Jordan"},"score":0,"creation_date":1687873084,"post_id":76553075,"comment_id":134995475,"body_markdown":"Your explanation has sense, Just in case: a `@Service` as process using multiple `@Service`  is valid, and because each nested `@Service` can be called directly by a `@Controller`, therefore is valid that them use `@Transactional` too. It with the purpose to keep the logic about of the most outer method that defines the main settings of transactions","body":"Your explanation has sense, Just in case: a <code>@Service</code> as process using multiple <code>@Service</code>  is valid, and because each nested <code>@Service</code> can be called directly by a <code>@Controller</code>, therefore is valid that them use <code>@Transactional</code> too. It with the purpose to keep the logic about of the most outer method that defines the main settings of transactions"}],"owner":{"account_id":4508336,"reputation":15533,"user_id":3665178,"accept_rate":73,"display_name":"Manuel Jordan"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":258,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687792527,"creation_date":1687743643,"question_id":76553075,"body_markdown":"In Spring Framework, about Transactions _by default_:\r\n\r\n* When a `RuntimeException` (**unchecked** type) is thrown then is triggered automatically a _Rollback_ process \r\n* When an `Exception` (**checked** type) is thrown then is **not** triggered a _Rollback_ process. \r\n\r\nUntil here it is very clear. Now see the following code:\r\n\r\n    @Transactional //declared on class level, but copy here to avoid confusions\r\n\tpublic void createProcessV2(Ciencia ciencia, Cientifico cientifico) {\r\n\t\r\n\t\ttry {\r\n\t\t\tcienciaService.save(ciencia);\r\n\t\t\tbusinessService.doBusiness();\r\n\t\t\tcientificoService.save(cientifico);\r\n\t\t}\r\n\t\tcatch(Throwable t) {\r\n\t\t\tSystem.out.println(&quot; createProcess V2...&quot;);\r\n\t\t\tSystem.out.println(&quot;  Catching and Handling Throwable&quot;);\r\n\t\t\tSystem.out.println(&quot;   Type   : &quot; + t.getClass());\r\n\t\t\tSystem.out.println(&quot;   Message: &quot; + t.getMessage());\r\n\t\t}\r\n\r\n\t}\r\n\r\nWhere `cienciaService` and `cientificoService` are `@Service` classes and they have access to a DB through their respective `@Repository` dependencies. Now about `businessService` can be any of the following: \r\n\r\n    @Service\r\n    @Transactional\r\n    @Profile(&quot;exception-checked-try-catch-non&quot;)\r\n    class BusinessExceptionV2ServiceImpl implements BusinessService {\r\n    \r\n    \t@Override\r\n    \tpublic void doBusiness() throws Exception {\r\n    \t\tSystem.out.println(&quot; doBusiness ...&quot;);\r\n    \t\tSystem.out.println(&quot;  Throwing Exception ...&quot;);\r\n    \t\tthrow new BusinessException(&quot;It is a Business Exception&quot;);\r\n    \t}\r\n    \r\n    }\r\n\r\nor\r\n\r\n    @Service\r\n    @Transactional\r\n    @Profile(&quot;exception-unchecked-try-catch-non&quot;)\r\n    class BusinessRuntimeExceptionV2ServiceImpl implements BusinessService {\r\n    \r\n    \t@Override\r\n    \tpublic void doBusiness() {\r\n    \t\tSystem.out.println(&quot; doBusiness ...&quot;);\r\n    \t\tSystem.out.println(&quot;  Throwing RuntimeException ...&quot;);\r\n    \t\tthrow new BusinessRuntimeException(&quot;It is a Business Runtime Exception&quot;);\r\n    \t}\r\n    \r\n    }\r\n\r\nBoth `@Service` classes are based on `@Profile`, to only enable one at runtime, and they don&#39;t have a `@Repository` access, and they thrown a custom exception as _checked_ and _unchecked_ according the case.\r\n\r\nFinally in the `Main` class exists:\r\n\r\n\tProcessService processService = ctx.getBean(ProcessService.class);\r\n\r\n\ttry {\r\n\t\tCiencia ciencia = CienciaFactory.createCienciaWithId10();\r\n\t\tCientifico cientifico = CientificoFactory.createCientificoWithId14(ciencia);\r\n\t\tprocessService.createProcessV2(ciencia, cientifico);\r\n\t}\r\n\tcatch(Throwable t) {\r\n\t\tSystem.out.println(&quot; Main...&quot;);\r\n\t\tSystem.out.println(&quot;  Catching and Handling Throwable&quot;);\r\n\t\tSystem.out.println(&quot;   Type   : &quot; + t.getClass());\r\n\t\tSystem.out.println(&quot;   Message: &quot; + t.getMessage());\r\n\t}\r\n\r\nWhen the app is executed with the _exception-checked-try-catch-non_ profile it happens\r\n\r\n    cienciaService.save(ciencia); //run \r\n    businessService.doBusiness(); //run and is thrown a **checked** exception\r\n    cientificoService.save(cientifico); //never executed\r\n\r\nand the output is\r\n\r\n     doBusiness ...\r\n      Throwing Exception ...\r\n     createProcess V2...\r\n      Catching and Handling Throwable\r\n       Type   : class com.manuel.jordan.exception.BusinessException\r\n       Message: It is a Business Exception\r\n\r\nBecause `cienciaService.save(ciencia)` was executed and did **not** happen a _Rollback_ because `businessService.doBusiness()` thrown an _checked_ exception: then the DB passes to a not valid integrity state. It is expected - of course it is not a valid scenario but for academic purposes has sense use this scenario. Therefore until here it is ok.\r\n\r\nWhen the app is executed with the _exception-unchecked-try-catch-non_ profile it happens\r\n\r\n    cienciaService.save(ciencia); //run \r\n    businessService.doBusiness(); //run and is thrown an **unchecked** exception\r\n    cientificoService.save(cientifico); //never executed\r\n\r\nand the output is\r\n\r\n\r\n     doBusiness ...\r\n      Throwing RuntimeException ...\r\n     createProcess V2...\r\n      Catching and Handling Throwable\r\n       Type   : class com.manuel.jordan.exception.BusinessRuntimeException\r\n       Message: It is a Business Runtime Exception\r\n     Main...\r\n      Catching and Handling Throwable\r\n       Type   : class org.springframework.transaction.UnexpectedRollbackException\r\n       Message: Transaction rolled back because it has been marked as rollback-only\r\n\r\n\r\nBecause `cienciaService.save(ciencia)` was executed and happened a _Rollback_ because `businessService.doBusiness()` thrown an _**un**checked_ exception: then the DB does **not** pass to a not valid integrity state. It is expected - it is the desirable scenario.\r\n\r\n**But** Why was thrown `UnexpectedRollbackException`?. The rollback is expected because an unchecked exception was thrown. This situation generates some failures in some `@Test` methods and if the `Main` class does not have that _try/catch_ block it ends in error\r\n\r\n**Note**\r\n\r\nThis situation happens even with:\r\n\r\n\t@Override\r\n\t@Transactional(rollbackFor = BusinessRuntimeException.class)\r\n\tpublic void createProcessV2(Ciencia ciencia, Cientifico cientifico) {\r\n       ...\r\n\r\nand (just in case)\r\n\r\n\t@Override\r\n\t@Transactional(noRollbackFor = BusinessRuntimeException.class)\r\n\tpublic void createProcessV2(Ciencia ciencia, Cientifico cientifico) {\r\n       ... \r\n\r\n**Update**\r\n\r\nAbout the _Proxy_ with _Spring&#39;s Transaction_ support, if is used:\r\n\r\n\t@Override\r\n    @Transactional\r\n\tpublic void createProcessV2(Ciencia ciencia, Cientifico cientifico) throws Throwable {\r\n\r\n\t\ttry {\r\n\t\t\tcienciaService.save(ciencia);\r\n\t\t\tbusinessService.doBusiness();\r\n\t\t\tcientificoService.save(cientifico);\r\n\t\t}\r\n\t\tcatch(Throwable t) {\r\n\t\t\tSystem.out.println(&quot; createProcess V2...&quot;);\r\n\t\t\tSystem.out.println(&quot;  Catching and Handling Throwable&quot;);\r\n\t\t\tSystem.out.println(&quot;   Type   : &quot; + t.getClass());\r\n\t\t\tSystem.out.println(&quot;   Message: &quot; + t.getMessage());\r\n\t\t\tthrow t; // &lt;--------\r\n\t\t}\r\n\r\n\t}\r\n\r\nFrom above observe the addition of the `throw t;` sentence in _catch_  the block. Therefore the output is:\r\n\r\n     doBusiness ...\r\n      Throwing RuntimeException ...\r\n     createProcess V2...\r\n      Catching and Handling Throwable\r\n       Type   : class com.manuel.jordan.exception.BusinessRuntimeException\r\n       Message: It is a Business Runtime Exception\r\n     Main...\r\n      Catching and Handling Throwable\r\n       Type   : class com.manuel.jordan.exception.BusinessRuntimeException\r\n       Message: It is a Business Runtime Exception\r\n\r\nTherefore now all is solved and the _Rollback_ works fine for the 2 tables in the DB. Now due **academic** purposes, observe now the following:\r\n\r\n\t@Override\r\n    @Transactional(noRollbackFor={BusinessRuntimeException.class}) // &lt;--------\r\n\tpublic void createProcessV2(Ciencia ciencia, Cientifico cientifico) throws Throwable {\r\n\r\n\t\ttry {\r\n\t\t\tcienciaService.save(ciencia);\r\n\t\t\tbusinessService.doBusiness();\r\n\t\t\tcientificoService.save(cientifico);\r\n\t\t}\r\n\t\tcatch(Throwable t) {\r\n\t\t\tSystem.out.println(&quot; createProcess V2...&quot;);\r\n\t\t\tSystem.out.println(&quot;  Catching and Handling Throwable&quot;);\r\n\t\t\tSystem.out.println(&quot;   Type   : &quot; + t.getClass());\r\n\t\t\tSystem.out.println(&quot;   Message: &quot; + t.getMessage());\r\n\t\t\tthrow t; // &lt;--------\r\n\t\t}\r\n\r\n\t}\r\n\r\nThe goal is that even if the `BusinessRuntimeException` is re-thrown and therefore it must be detected by the _Proxy_ with _Spring&#39;s Transaction_ support, the _Rollback_ must be **not** applied due the `noRollbackFor={BusinessRuntimeException.class}` declaration. Therefore the `cienciaService.save(ciencia)` execution must remain in the DB and left the DB with a _not_ valid integrity state. Remember it is an academic purpose.\r\n\r\nBut\r\n\r\n     doBusiness ...\r\n      Throwing RuntimeException ...\r\n     createProcess V2...\r\n      Catching and Handling Throwable\r\n       Type   : class com.manuel.jordan.exception.BusinessRuntimeException\r\n       Message: It is a Business Runtime Exception\r\n    Jun 26, 2023 9:00:09 AM org.springframework.transaction.interceptor.TransactionAspectSupport completeTransactionAfterThrowing\r\n    SEVERE: Application exception overridden by commit exception\r\n    com.manuel.jordan.exception.BusinessRuntimeException: It is a Business Runtime Exception\r\n    \tat com.manuel.jordan.service.impl.BusinessRuntimeExceptionV2ServiceImpl.doBusiness(BusinessRuntimeExceptionV2ServiceImpl.java:24)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n    \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)\r\n    \tat jdk.proxy3/jdk.proxy3.$Proxy50.doBusiness(Unknown Source)\r\n    \tat com.manuel.jordan.service.impl.ProcessServiceImpl.createProcessV2(ProcessServiceImpl.java:72)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n    \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)\r\n    \tat jdk.proxy3/jdk.proxy3.$Proxy54.createProcessV2(Unknown Source)\r\n    \tat com.manuel.jordan.main.Main.main(Main.java:120)\r\n    \tat org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:279)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n    \r\n     Main...\r\n      Catching and Handling Throwable\r\n       Type   : class org.springframework.transaction.UnexpectedRollbackException\r\n       Message: Transaction rolled back because it has been marked as rollback-only\r\n\r\nWhy does `noRollbackFor` no work as expected?\r\n\r\nand arises: \r\n\r\n    SEVERE: Application exception overridden by commit exception","title":"Why is thrown UnexpectedRollbackException for a RuntimeException?","body":"<p>In Spring Framework, about Transactions <em>by default</em>:</p>\n<ul>\n<li>When a <code>RuntimeException</code> (<strong>unchecked</strong> type) is thrown then is triggered automatically a <em>Rollback</em> process</li>\n<li>When an <code>Exception</code> (<strong>checked</strong> type) is thrown then is <strong>not</strong> triggered a <em>Rollback</em> process.</li>\n</ul>\n<p>Until here it is very clear. Now see the following code:</p>\n<pre><code>@Transactional //declared on class level, but copy here to avoid confusions\npublic void createProcessV2(Ciencia ciencia, Cientifico cientifico) {\n\n    try {\n        cienciaService.save(ciencia);\n        businessService.doBusiness();\n        cientificoService.save(cientifico);\n    }\n    catch(Throwable t) {\n        System.out.println(&quot; createProcess V2...&quot;);\n        System.out.println(&quot;  Catching and Handling Throwable&quot;);\n        System.out.println(&quot;   Type   : &quot; + t.getClass());\n        System.out.println(&quot;   Message: &quot; + t.getMessage());\n    }\n\n}\n</code></pre>\n<p>Where <code>cienciaService</code> and <code>cientificoService</code> are <code>@Service</code> classes and they have access to a DB through their respective <code>@Repository</code> dependencies. Now about <code>businessService</code> can be any of the following:</p>\n<pre><code>@Service\n@Transactional\n@Profile(&quot;exception-checked-try-catch-non&quot;)\nclass BusinessExceptionV2ServiceImpl implements BusinessService {\n\n    @Override\n    public void doBusiness() throws Exception {\n        System.out.println(&quot; doBusiness ...&quot;);\n        System.out.println(&quot;  Throwing Exception ...&quot;);\n        throw new BusinessException(&quot;It is a Business Exception&quot;);\n    }\n\n}\n</code></pre>\n<p>or</p>\n<pre><code>@Service\n@Transactional\n@Profile(&quot;exception-unchecked-try-catch-non&quot;)\nclass BusinessRuntimeExceptionV2ServiceImpl implements BusinessService {\n\n    @Override\n    public void doBusiness() {\n        System.out.println(&quot; doBusiness ...&quot;);\n        System.out.println(&quot;  Throwing RuntimeException ...&quot;);\n        throw new BusinessRuntimeException(&quot;It is a Business Runtime Exception&quot;);\n    }\n\n}\n</code></pre>\n<p>Both <code>@Service</code> classes are based on <code>@Profile</code>, to only enable one at runtime, and they don't have a <code>@Repository</code> access, and they thrown a custom exception as <em>checked</em> and <em>unchecked</em> according the case.</p>\n<p>Finally in the <code>Main</code> class exists:</p>\n<pre><code>ProcessService processService = ctx.getBean(ProcessService.class);\n\ntry {\n    Ciencia ciencia = CienciaFactory.createCienciaWithId10();\n    Cientifico cientifico = CientificoFactory.createCientificoWithId14(ciencia);\n    processService.createProcessV2(ciencia, cientifico);\n}\ncatch(Throwable t) {\n    System.out.println(&quot; Main...&quot;);\n    System.out.println(&quot;  Catching and Handling Throwable&quot;);\n    System.out.println(&quot;   Type   : &quot; + t.getClass());\n    System.out.println(&quot;   Message: &quot; + t.getMessage());\n}\n</code></pre>\n<p>When the app is executed with the <em>exception-checked-try-catch-non</em> profile it happens</p>\n<pre><code>cienciaService.save(ciencia); //run \nbusinessService.doBusiness(); //run and is thrown a **checked** exception\ncientificoService.save(cientifico); //never executed\n</code></pre>\n<p>and the output is</p>\n<pre><code> doBusiness ...\n  Throwing Exception ...\n createProcess V2...\n  Catching and Handling Throwable\n   Type   : class com.manuel.jordan.exception.BusinessException\n   Message: It is a Business Exception\n</code></pre>\n<p>Because <code>cienciaService.save(ciencia)</code> was executed and did <strong>not</strong> happen a <em>Rollback</em> because <code>businessService.doBusiness()</code> thrown an <em>checked</em> exception: then the DB passes to a not valid integrity state. It is expected - of course it is not a valid scenario but for academic purposes has sense use this scenario. Therefore until here it is ok.</p>\n<p>When the app is executed with the <em>exception-unchecked-try-catch-non</em> profile it happens</p>\n<pre><code>cienciaService.save(ciencia); //run \nbusinessService.doBusiness(); //run and is thrown an **unchecked** exception\ncientificoService.save(cientifico); //never executed\n</code></pre>\n<p>and the output is</p>\n<pre><code> doBusiness ...\n  Throwing RuntimeException ...\n createProcess V2...\n  Catching and Handling Throwable\n   Type   : class com.manuel.jordan.exception.BusinessRuntimeException\n   Message: It is a Business Runtime Exception\n Main...\n  Catching and Handling Throwable\n   Type   : class org.springframework.transaction.UnexpectedRollbackException\n   Message: Transaction rolled back because it has been marked as rollback-only\n</code></pre>\n<p>Because <code>cienciaService.save(ciencia)</code> was executed and happened a <em>Rollback</em> because <code>businessService.doBusiness()</code> thrown an <em><strong>un</strong>checked</em> exception: then the DB does <strong>not</strong> pass to a not valid integrity state. It is expected - it is the desirable scenario.</p>\n<p><strong>But</strong> Why was thrown <code>UnexpectedRollbackException</code>?. The rollback is expected because an unchecked exception was thrown. This situation generates some failures in some <code>@Test</code> methods and if the <code>Main</code> class does not have that <em>try/catch</em> block it ends in error</p>\n<p><strong>Note</strong></p>\n<p>This situation happens even with:</p>\n<pre><code>@Override\n@Transactional(rollbackFor = BusinessRuntimeException.class)\npublic void createProcessV2(Ciencia ciencia, Cientifico cientifico) {\n   ...\n</code></pre>\n<p>and (just in case)</p>\n<pre><code>@Override\n@Transactional(noRollbackFor = BusinessRuntimeException.class)\npublic void createProcessV2(Ciencia ciencia, Cientifico cientifico) {\n   ... \n</code></pre>\n<p><strong>Update</strong></p>\n<p>About the <em>Proxy</em> with <em>Spring's Transaction</em> support, if is used:</p>\n<pre><code>@Override\n@Transactional\npublic void createProcessV2(Ciencia ciencia, Cientifico cientifico) throws Throwable {\n\n    try {\n        cienciaService.save(ciencia);\n        businessService.doBusiness();\n        cientificoService.save(cientifico);\n    }\n    catch(Throwable t) {\n        System.out.println(&quot; createProcess V2...&quot;);\n        System.out.println(&quot;  Catching and Handling Throwable&quot;);\n        System.out.println(&quot;   Type   : &quot; + t.getClass());\n        System.out.println(&quot;   Message: &quot; + t.getMessage());\n        throw t; // &lt;--------\n    }\n\n}\n</code></pre>\n<p>From above observe the addition of the <code>throw t;</code> sentence in <em>catch</em>  the block. Therefore the output is:</p>\n<pre><code> doBusiness ...\n  Throwing RuntimeException ...\n createProcess V2...\n  Catching and Handling Throwable\n   Type   : class com.manuel.jordan.exception.BusinessRuntimeException\n   Message: It is a Business Runtime Exception\n Main...\n  Catching and Handling Throwable\n   Type   : class com.manuel.jordan.exception.BusinessRuntimeException\n   Message: It is a Business Runtime Exception\n</code></pre>\n<p>Therefore now all is solved and the <em>Rollback</em> works fine for the 2 tables in the DB. Now due <strong>academic</strong> purposes, observe now the following:</p>\n<pre><code>@Override\n@Transactional(noRollbackFor={BusinessRuntimeException.class}) // &lt;--------\npublic void createProcessV2(Ciencia ciencia, Cientifico cientifico) throws Throwable {\n\n    try {\n        cienciaService.save(ciencia);\n        businessService.doBusiness();\n        cientificoService.save(cientifico);\n    }\n    catch(Throwable t) {\n        System.out.println(&quot; createProcess V2...&quot;);\n        System.out.println(&quot;  Catching and Handling Throwable&quot;);\n        System.out.println(&quot;   Type   : &quot; + t.getClass());\n        System.out.println(&quot;   Message: &quot; + t.getMessage());\n        throw t; // &lt;--------\n    }\n\n}\n</code></pre>\n<p>The goal is that even if the <code>BusinessRuntimeException</code> is re-thrown and therefore it must be detected by the <em>Proxy</em> with <em>Spring's Transaction</em> support, the <em>Rollback</em> must be <strong>not</strong> applied due the <code>noRollbackFor={BusinessRuntimeException.class}</code> declaration. Therefore the <code>cienciaService.save(ciencia)</code> execution must remain in the DB and left the DB with a <em>not</em> valid integrity state. Remember it is an academic purpose.</p>\n<p>But</p>\n<pre><code> doBusiness ...\n  Throwing RuntimeException ...\n createProcess V2...\n  Catching and Handling Throwable\n   Type   : class com.manuel.jordan.exception.BusinessRuntimeException\n   Message: It is a Business Runtime Exception\nJun 26, 2023 9:00:09 AM org.springframework.transaction.interceptor.TransactionAspectSupport completeTransactionAfterThrowing\nSEVERE: Application exception overridden by commit exception\ncom.manuel.jordan.exception.BusinessRuntimeException: It is a Business Runtime Exception\n    at com.manuel.jordan.service.impl.BusinessRuntimeExceptionV2ServiceImpl.doBusiness(BusinessRuntimeExceptionV2ServiceImpl.java:24)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)\n    at jdk.proxy3/jdk.proxy3.$Proxy50.doBusiness(Unknown Source)\n    at com.manuel.jordan.service.impl.ProcessServiceImpl.createProcessV2(ProcessServiceImpl.java:72)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)\n    at jdk.proxy3/jdk.proxy3.$Proxy54.createProcessV2(Unknown Source)\n    at com.manuel.jordan.main.Main.main(Main.java:120)\n    at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:279)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n\n Main...\n  Catching and Handling Throwable\n   Type   : class org.springframework.transaction.UnexpectedRollbackException\n   Message: Transaction rolled back because it has been marked as rollback-only\n</code></pre>\n<p>Why does <code>noRollbackFor</code> no work as expected?</p>\n<p>and arises:</p>\n<pre><code>SEVERE: Application exception overridden by commit exception\n</code></pre>\n"},{"tags":["java","tomcat9"],"answers":[{"tags":[],"owner":{"account_id":2509409,"reputation":1675,"user_id":2187053,"accept_rate":47,"display_name":"HockChai Lim"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687792443,"creation_date":1687792443,"answer_id":76558007,"question_id":76543601,"body_markdown":"Turns out to be case sensitive issue.  The actual file named is &#39;MyAccount.properties&#39;.  But the code uses &#39;myAccount.properties&#39;.  I change the code to below and it works:\r\n\r\n    URL url = MyClass.class.getClassLoader().getResource( &quot;MyAccount.properties&quot; );\r\n\r\nWeird behavior though:\r\n1) The code is running in Windows OS, which is a case insensitive.\r\n2) The code works fine in TOMCAT 7 under java 8.  But failed in TOMCAT 8 under java 11.","title":"how to get the URL of an external properties file in classpath in TOMCAT 10","body":"<p>Turns out to be case sensitive issue.  The actual file named is 'MyAccount.properties'.  But the code uses 'myAccount.properties'.  I change the code to below and it works:</p>\n<pre><code>URL url = MyClass.class.getClassLoader().getResource( &quot;MyAccount.properties&quot; );\n</code></pre>\n<p>Weird behavior though:</p>\n<ol>\n<li>The code is running in Windows OS, which is a case insensitive.</li>\n<li>The code works fine in TOMCAT 7 under java 8.  But failed in TOMCAT 8 under java 11.</li>\n</ol>\n"}],"owner":{"account_id":2509409,"reputation":1675,"user_id":2187053,"accept_rate":47,"display_name":"HockChai Lim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76558007,"answer_count":1,"score":-1,"last_activity_date":1687792443,"creation_date":1687556280,"question_id":76543601,"body_markdown":"\r\nI have an external properties file named myAccount.properties.  This file resides in a folder called `${catalina.home}/usmo/MyAccount/resources/properties`.  This folder is being added to the class path thru context.xml using configuration below:\r\n\r\n    &lt;Resources className=&quot;org.apache.catalina.webresources.StandardRoot&quot;&gt;\r\n        &lt;PostResources className=&quot;org.apache.catalina.webresources.DirResourceSet&quot;\r\n            base=&quot;${catalina.home}/usmo/MyAccount/resources/properties&quot;\r\n            internalPath=&quot;/&quot;\r\n            webAppMount=&quot;/WEB-INF/classes&quot; /&gt;\r\n\t&lt;/Resources&gt;\r\n\r\nI am expecting code below to return the URL or absolute path of this file.  Sadly,  it is returning a null. Any help would be appreciated.\r\n\r\n    URL url = MyClass.class.getClassLoader().getResource( &quot;myAccount.properties&quot; );\r\n\r\n\r\n\t\t\t\t\r\n\r\n\r\n","title":"how to get the URL of an external properties file in classpath in TOMCAT 10","body":"<p>I have an external properties file named myAccount.properties.  This file resides in a folder called <code>${catalina.home}/usmo/MyAccount/resources/properties</code>.  This folder is being added to the class path thru context.xml using configuration below:</p>\n<pre><code>&lt;Resources className=&quot;org.apache.catalina.webresources.StandardRoot&quot;&gt;\n    &lt;PostResources className=&quot;org.apache.catalina.webresources.DirResourceSet&quot;\n        base=&quot;${catalina.home}/usmo/MyAccount/resources/properties&quot;\n        internalPath=&quot;/&quot;\n        webAppMount=&quot;/WEB-INF/classes&quot; /&gt;\n&lt;/Resources&gt;\n</code></pre>\n<p>I am expecting code below to return the URL or absolute path of this file.  Sadly,  it is returning a null. Any help would be appreciated.</p>\n<pre><code>URL url = MyClass.class.getClassLoader().getResource( &quot;myAccount.properties&quot; );\n\n\n            \n</code></pre>\n"},{"tags":["java","image","javafx","imageview","resize"],"answers":[{"comments":[{"owner":{"account_id":28898321,"reputation":13,"user_id":22133856,"display_name":"Acheros"},"score":0,"creation_date":1687793978,"post_id":76557911,"comment_id":134983017,"body_markdown":"It doesn&#39;t solve the issue in my project, probably due to bindings of other classes higher in the container hierarchy. The example provided by you does indeed work as intended, even when changing the image  after stage.show(). I will try to apply the same idea to the other classes that use binding to determine their size and hope that solves the issue. Thanks for your help!","body":"It doesn&#39;t solve the issue in my project, probably due to bindings of other classes higher in the container hierarchy. The example provided by you does indeed work as intended, even when changing the image  after stage.show(). I will try to apply the same idea to the other classes that use binding to determine their size and hope that solves the issue. Thanks for your help!"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1687844987,"post_id":76557911,"comment_id":134989521,"body_markdown":"@Acheros while binding can be used to help solve some layout problems, it is sometimes not the best way to handle layout.  When you look at the JavaFX library source code, most layout problems are solved through layoutChildren, not binding.  Such solutions aren’t widely demonstrated or documented outside the JavaFX code base and can be tricky to implement.  Usually it is best to let combinations of inbuilt layout panes handle layout, falling back to custom layout using layout children overrides (or very carefully binding), only when necessary.","body":"@Acheros while binding can be used to help solve some layout problems, it is sometimes not the best way to handle layout.  When you look at the JavaFX library source code, most layout problems are solved through layoutChildren, not binding.  Such solutions aren’t widely demonstrated or documented outside the JavaFX code base and can be tricky to implement.  Usually it is best to let combinations of inbuilt layout panes handle layout, falling back to custom layout using layout children overrides (or very carefully binding), only when necessary."}],"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1687792235,"creation_date":1687791797,"answer_id":76557911,"question_id":76557706,"body_markdown":"When you try to shrink it, the container is (probably) going to remain large enough to hold the `ImageView` at its current size, and will be clipped by its container just to show the visible portion. Binding to dimensions is never a particularly good approach; to create custom layouts, subclass `Region` and override `layoutChildren()`.\r\n\r\nHere is a quick example:\r\n\r\n\r\n    import javafx.scene.image.ImageView;\r\n    import javafx.scene.layout.Region;\r\n    \r\n    public class ImageContainer extends Region {\r\n        private final ImageView imageView ;\r\n    \r\n        public ImageContainer(ImageView imageView) {\r\n            this.imageView = imageView;\r\n            getChildren().add(imageView);\r\n        }\r\n    \r\n        @Override\r\n        protected void layoutChildren() {\r\n            // usable width and height:\r\n            double width = getWidth() - snappedLeftInset() - snappedRightInset();\r\n            double height = getHeight() - snappedTopInset() - snappedBottomInset();\r\n            imageView.setFitWidth(Math.max(1, width));\r\n            imageView.setFitHeight(Math.max(1, height));\r\n            double imageWidth = imageView.getBoundsInLocal().getWidth();\r\n            double imageHeight = imageView.getBoundsInLocal().getHeight();\r\n            // center image (can also make this more complex and support alignment):\r\n            double x = snappedLeftInset() + (width - imageWidth) / 2;\r\n            double y = snappedTopInset() + (height - imageHeight) / 2;\r\n            imageView.relocate(x , y);\r\n        }\r\n\r\n    }\r\n\r\nand\r\n\r\n\r\n    import javafx.application.Application;\r\n    import javafx.fxml.FXMLLoader;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.SplitPane;\r\n    import javafx.scene.image.ImageView;\r\n    import javafx.stage.Stage;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    public class HelloApplication extends Application {\r\n    \r\n        private final String ioColor = &quot;https://images-assets.nasa.gov/image/PIA00738/PIA00738~orig.jpg&quot;;\r\n        private final String ioBW = &quot;https://images-assets.nasa.gov/image/PIA01217/PIA01217~orig.jpg&quot;;\r\n    \r\n        @Override\r\n        public void start(Stage stage) throws IOException {\r\n            ImageView leftImage = new ImageView(ioBW);\r\n            leftImage.setPreserveRatio(true);\r\n            ImageView rightImage = new ImageView(ioColor);\r\n            rightImage.setPreserveRatio(true);\r\n            SplitPane splitter = new SplitPane(new ImageContainer(leftImage), new ImageContainer(rightImage));\r\n            Scene scene = new Scene(splitter, 800, 500);\r\n            stage.setScene(scene);\r\n            stage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    }\r\n\r\n\r\n\r\n","title":"Binding child width and height to parents makes it unable to become smaller when resizing","body":"<p>When you try to shrink it, the container is (probably) going to remain large enough to hold the <code>ImageView</code> at its current size, and will be clipped by its container just to show the visible portion. Binding to dimensions is never a particularly good approach; to create custom layouts, subclass <code>Region</code> and override <code>layoutChildren()</code>.</p>\n<p>Here is a quick example:</p>\n<pre><code>import javafx.scene.image.ImageView;\nimport javafx.scene.layout.Region;\n\npublic class ImageContainer extends Region {\n    private final ImageView imageView ;\n\n    public ImageContainer(ImageView imageView) {\n        this.imageView = imageView;\n        getChildren().add(imageView);\n    }\n\n    @Override\n    protected void layoutChildren() {\n        // usable width and height:\n        double width = getWidth() - snappedLeftInset() - snappedRightInset();\n        double height = getHeight() - snappedTopInset() - snappedBottomInset();\n        imageView.setFitWidth(Math.max(1, width));\n        imageView.setFitHeight(Math.max(1, height));\n        double imageWidth = imageView.getBoundsInLocal().getWidth();\n        double imageHeight = imageView.getBoundsInLocal().getHeight();\n        // center image (can also make this more complex and support alignment):\n        double x = snappedLeftInset() + (width - imageWidth) / 2;\n        double y = snappedTopInset() + (height - imageHeight) / 2;\n        imageView.relocate(x , y);\n    }\n\n}\n</code></pre>\n<p>and</p>\n<pre><code>import javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Scene;\nimport javafx.scene.control.SplitPane;\nimport javafx.scene.image.ImageView;\nimport javafx.stage.Stage;\n\nimport java.io.IOException;\n\npublic class HelloApplication extends Application {\n\n    private final String ioColor = &quot;https://images-assets.nasa.gov/image/PIA00738/PIA00738~orig.jpg&quot;;\n    private final String ioBW = &quot;https://images-assets.nasa.gov/image/PIA01217/PIA01217~orig.jpg&quot;;\n\n    @Override\n    public void start(Stage stage) throws IOException {\n        ImageView leftImage = new ImageView(ioBW);\n        leftImage.setPreserveRatio(true);\n        ImageView rightImage = new ImageView(ioColor);\n        rightImage.setPreserveRatio(true);\n        SplitPane splitter = new SplitPane(new ImageContainer(leftImage), new ImageContainer(rightImage));\n        Scene scene = new Scene(splitter, 800, 500);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28898321,"reputation":13,"user_id":22133856,"display_name":"Acheros"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76557911,"answer_count":1,"score":1,"last_activity_date":1687792235,"creation_date":1687790287,"question_id":76557706,"body_markdown":"When I bind an `ImageView` to it&#39;s container:\r\n\r\n```\r\nimageView.fitWidthProperty().bind(widthProperty());\r\nimageView.fitHeightProperty().bind(heightProperty());\r\n```\r\n\r\nIt functions as intended when making the container bigger (the `imageview` scales accordingly), but when I try to make the container smaller, neither the container or the `imageview` becomes smaller. Strangely, when I set the imageview&#39;s image before the `stage.show()` method, it does function as intended, but again faces the same issue when changing the image after the `stage.show()` method.\r\n\r\nInstead of bindings i&#39;ve tried using listeners (both `ChangeListener` and `InvalidationListener`), changing the `layoutChildren()` method in the container/parent class and making a wrapperclass for the imageview, but they didn&#39;t solve the issue.\r\n\r\nMy project doesn&#39;t use FXML, so I would like to find a solution that doesn&#39;t need it.","title":"Binding child width and height to parents makes it unable to become smaller when resizing","body":"<p>When I bind an <code>ImageView</code> to it's container:</p>\n<pre><code>imageView.fitWidthProperty().bind(widthProperty());\nimageView.fitHeightProperty().bind(heightProperty());\n</code></pre>\n<p>It functions as intended when making the container bigger (the <code>imageview</code> scales accordingly), but when I try to make the container smaller, neither the container or the <code>imageview</code> becomes smaller. Strangely, when I set the imageview's image before the <code>stage.show()</code> method, it does function as intended, but again faces the same issue when changing the image after the <code>stage.show()</code> method.</p>\n<p>Instead of bindings i've tried using listeners (both <code>ChangeListener</code> and <code>InvalidationListener</code>), changing the <code>layoutChildren()</code> method in the container/parent class and making a wrapperclass for the imageview, but they didn't solve the issue.</p>\n<p>My project doesn't use FXML, so I would like to find a solution that doesn't need it.</p>\n"},{"tags":["java","maven","build","compiler-errors","snapshot"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1687766331,"post_id":76554575,"comment_id":134977116,"body_markdown":"`so I guess he can find the folder and the file but still prefer to use the older (not SNAPSHOT) version that it gets from my nexus server.` You have defined a SNAPSHOT version and not a release version.. as your build fails it means the SNAPSHOT is presumably removed from your repository manager...","body":"<code>so I guess he can find the folder and the file but still prefer to use the older (not SNAPSHOT) version that it gets from my nexus server.</code> You have defined a SNAPSHOT version and not a release version.. as your build fails it means the SNAPSHOT is presumably removed from your repository manager..."},{"owner":{"account_id":20906298,"reputation":332,"user_id":15358155,"display_name":"chameerar"},"score":0,"creation_date":1687766427,"post_id":76554575,"comment_id":134977133,"body_markdown":"Try to do a `mvn clean install` in your `project-name` project with the snapshot and then try what you have done again.","body":"Try to do a <code>mvn clean install</code> in your <code>project-name</code> project with the snapshot and then try what you have done again."}],"answers":[{"tags":[],"owner":{"account_id":28654196,"reputation":1,"user_id":21940585,"display_name":"Simone Rega"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687791709,"creation_date":1687791709,"answer_id":76557902,"question_id":76554575,"body_markdown":"I post an answer myself in case someone will have the same problem. Apparently if you use IntelliJ is just an IDE bug, to resolve the problem just press right-click on the outer pom file -&gt; Maven -&gt; Reload","title":"Can&#39;t compile my project with Maven using local repository snapshot","body":"<p>I post an answer myself in case someone will have the same problem. Apparently if you use IntelliJ is just an IDE bug, to resolve the problem just press right-click on the outer pom file -&gt; Maven -&gt; Reload</p>\n"}],"owner":{"account_id":28654196,"reputation":1,"user_id":21940585,"display_name":"Simone Rega"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687791709,"creation_date":1687765663,"question_id":76554575,"body_markdown":"I&#39;m trying to execute the command &quot;mvn clean install&quot; on my Java project. Some classes have dependency to a SNAPSHOT project that it&#39;s in my local repo.\r\n\r\nThis is the dependency tag in my project pom\r\n\r\n    &lt;dependency&gt;   \r\n      &lt;groupId&gt;my-package&lt;/groupId&gt;  \r\n      &lt;artifactId&gt;project-name&lt;/artifactId&gt;   \r\n      &lt;version&gt;3.0.0.0000-SNAPSHOT&lt;/version&gt;   \r\n      &lt;scope&gt;compile&lt;/scope&gt; \r\n    &lt;/dependency&gt;\r\n\r\nEven though I see there is a jar in my maven local repo called &quot;project-version&quot;-SNAPSHOT.jar maven gives me the error &quot;Compilation Error&quot; on those lines that contains a reference to the snapshot jar.\r\nI tried run the command &quot;mvn -U clean install&quot; but doesn&#39;t work; I tryed with mvn dependency:tree and it founds the dependency and finish with a BUILD SUCCESS, so I guess he can find the folder and the file but still prefer to use the older (not SNAPSHOT) version that it gets from my nexus server.\r\n\r\nEDIT: I can&#39;t creare a release on my nexus server, I need to test the jar before a deploy, never add problems doing so\r\n\r\nEDIT 2: I tried to remove the keyword &quot;Snapshot&quot; (try&amp;error approach, I know I shouldn&#39;t do that), now it gives me an error more pertinent to my problem\r\n\r\n`Could not resolve dependencies for project project-name:pom:3.0.0.0000-SNAPSHOT: The following artifacts could not be resolved: my-package:project-name-client:jar:3.0.0.0000, my-package:project-name-server:jar:3.0.0.0000: Could not find artifact my-package:project-name-client:jar:3.0.0.0000 in nexus`","title":"Can&#39;t compile my project with Maven using local repository snapshot","body":"<p>I'm trying to execute the command &quot;mvn clean install&quot; on my Java project. Some classes have dependency to a SNAPSHOT project that it's in my local repo.</p>\n<p>This is the dependency tag in my project pom</p>\n<pre><code>&lt;dependency&gt;   \n  &lt;groupId&gt;my-package&lt;/groupId&gt;  \n  &lt;artifactId&gt;project-name&lt;/artifactId&gt;   \n  &lt;version&gt;3.0.0.0000-SNAPSHOT&lt;/version&gt;   \n  &lt;scope&gt;compile&lt;/scope&gt; \n&lt;/dependency&gt;\n</code></pre>\n<p>Even though I see there is a jar in my maven local repo called &quot;project-version&quot;-SNAPSHOT.jar maven gives me the error &quot;Compilation Error&quot; on those lines that contains a reference to the snapshot jar.\nI tried run the command &quot;mvn -U clean install&quot; but doesn't work; I tryed with mvn dependency:tree and it founds the dependency and finish with a BUILD SUCCESS, so I guess he can find the folder and the file but still prefer to use the older (not SNAPSHOT) version that it gets from my nexus server.</p>\n<p>EDIT: I can't creare a release on my nexus server, I need to test the jar before a deploy, never add problems doing so</p>\n<p>EDIT 2: I tried to remove the keyword &quot;Snapshot&quot; (try&amp;error approach, I know I shouldn't do that), now it gives me an error more pertinent to my problem</p>\n<p><code>Could not resolve dependencies for project project-name:pom:3.0.0.0000-SNAPSHOT: The following artifacts could not be resolved: my-package:project-name-client:jar:3.0.0.0000, my-package:project-name-server:jar:3.0.0.0000: Could not find artifact my-package:project-name-client:jar:3.0.0.0000 in nexus</code></p>\n"},{"tags":["java","rest-assured"],"comments":[{"owner":{"account_id":14202984,"reputation":1214,"user_id":10260396,"display_name":"Qingfei Yuan"},"score":1,"creation_date":1560965396,"post_id":56673018,"comment_id":99913359,"body_markdown":"make sure this class in classpath","body":"make sure this class in classpath"},{"owner":{"account_id":16167223,"reputation":1,"user_id":11671921,"display_name":"Vandita Sharma"},"score":0,"creation_date":1561011657,"post_id":56673018,"comment_id":99926138,"body_markdown":"yes, it is there in classpath.","body":"yes, it is there in classpath."},{"owner":{"account_id":3850681,"reputation":2684,"user_id":3190953,"accept_rate":62,"display_name":"Wilfred Clement"},"score":2,"creation_date":1561028724,"post_id":56673018,"comment_id":99934797,"body_markdown":"Have you added &lt;scope&gt;test&lt;/scope&gt; in pom.xml ? Try removing it","body":"Have you added &lt;scope&gt;test&lt;/scope&gt; in pom.xml ? Try removing it"}],"answers":[{"tags":[],"owner":{"account_id":22368361,"reputation":1,"user_id":17741163,"display_name":"Srujan Gowda"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687791557,"creation_date":1687791557,"answer_id":76557876,"question_id":56673018,"body_markdown":"This error occurs when you update the Java version (usually to a version greater than 8). The solution to this is adding a dependency for groovy as well as rest-assured in your pom.xml file. The below version works for java 17 and below:\r\n\r\n        &lt;dependency&gt;\r\n         &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\r\n         &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\r\n         &lt;version&gt;5.3.0&lt;/version&gt; \r\n      &lt;/dependency&gt;\r\n\r\n      &lt;dependency&gt;\r\n       &lt;groupId&gt;org.apache.groovy&lt;/groupId&gt;\r\n       &lt;artifactId&gt;groovy&lt;/artifactId&gt;\r\n       &lt;version&gt;4.0.9&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n\r\nAlso make sure to change the .classPath file. You have to change the rest-assured and groovy versions to the versions specified in pom.xml        ","title":"java.lang.NoClassDefFoundError: Could not initialize class io.restassured.RestAssured","body":"<p>This error occurs when you update the Java version (usually to a version greater than 8). The solution to this is adding a dependency for groovy as well as rest-assured in your pom.xml file. The below version works for java 17 and below:</p>\n<pre><code>    &lt;dependency&gt;\n     &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\n     &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\n     &lt;version&gt;5.3.0&lt;/version&gt; \n  &lt;/dependency&gt;\n\n  &lt;dependency&gt;\n   &lt;groupId&gt;org.apache.groovy&lt;/groupId&gt;\n   &lt;artifactId&gt;groovy&lt;/artifactId&gt;\n   &lt;version&gt;4.0.9&lt;/version&gt;\n  &lt;/dependency&gt;\n</code></pre>\n<p>Also make sure to change the .classPath file. You have to change the rest-assured and groovy versions to the versions specified in pom.xml</p>\n"}],"owner":{"account_id":16167223,"reputation":1,"user_id":11671921,"display_name":"Vandita Sharma"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2705,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687791557,"creation_date":1560965145,"question_id":56673018,"body_markdown":"I am getting the below error. Kindly, help. \r\n\r\nStack trace:\r\n```\r\njava.lang.NoClassDefFoundError: Could not initialize class io.restassured.RestAssured\r\n  at netbanking.pages.APIResponsePages.&lt;init&gt;(APIResponsePages.java:24)\r\n  at netbanking.module.PassbookModule.validateUITransactionsWithAPI(PassbookModule.java:219)\r\n  at testcases.singleuser.PassbookTest.test8validateAPIresponse(PassbookTest.java:157)\r\n  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n  at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n  at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n  at java.lang.reflect.Method.invoke(Unknown Source)\r\n  at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:108)\r\n```\r\n\r\nI tried to update &lt;scope&gt;compile&lt;/scope&gt; in pom.XML file dependencies with no effect.\r\nAlso, uploaded all the jars for restAssured, also with no effect.","title":"java.lang.NoClassDefFoundError: Could not initialize class io.restassured.RestAssured","body":"<p>I am getting the below error. Kindly, help. </p>\n\n<p>Stack trace:</p>\n\n<pre><code>java.lang.NoClassDefFoundError: Could not initialize class io.restassured.RestAssured\n  at netbanking.pages.APIResponsePages.&lt;init&gt;(APIResponsePages.java:24)\n  at netbanking.module.PassbookModule.validateUITransactionsWithAPI(PassbookModule.java:219)\n  at testcases.singleuser.PassbookTest.test8validateAPIresponse(PassbookTest.java:157)\n  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n  at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n  at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n  at java.lang.reflect.Method.invoke(Unknown Source)\n  at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:108)\n</code></pre>\n\n<p>I tried to update compile in pom.XML file dependencies with no effect.\nAlso, uploaded all the jars for restAssured, also with no effect.</p>\n"},{"tags":["java","jooq"],"answers":[{"comments":[{"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"score":0,"creation_date":1687791506,"post_id":76554193,"comment_id":134982493,"body_markdown":"I made a typo in my original question. Changing now.","body":"I made a typo in my original question. Changing now."},{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1687854828,"post_id":76554193,"comment_id":134991305,"body_markdown":"@Oliver: It doesn&#39;t really change anything though, does it?","body":"@Oliver: It doesn&#39;t really change anything though, does it?"},{"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"score":1,"creation_date":1687888080,"post_id":76554193,"comment_id":134999154,"body_markdown":"No, it doesn&#39;t. Multiset was the way to go.","body":"No, it doesn&#39;t. Multiset was the way to go."}],"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687772495,"creation_date":1687762533,"answer_id":76554193,"question_id":76542175,"body_markdown":"Why not just use the [`MULTISET` operator][1] to nest your data directly in SQL? It&#39;s all type safe and supported in a variety of RDBMS:\r\n\r\n```java\r\nList&lt;Dto&gt; list =\r\ndsl.select(\r\n        TABLE_1,\r\n        TABLE_2,\r\n        multiset(\r\n            select(TABLE_3)\r\n            .from(TABLE_3)\r\n            .where(TABLE_3.TABLE_1_ID.eq(TABLE_1.ID)\r\n        ).convertFrom(r -&gt; r.collect(Records.intoSet())),\r\n        TABLE_4\r\n    )\r\n   .from(TABLE_1)\r\n   .leftJoin(TABLE_2).on(TABLE_2.TABLE_1_ID.eq(TABLE_1.ID))\r\n   .leftJoin(TABLE_2).on(TABLE_2.TABLE_1_ID.eq(TABLE_1.ID))\r\n   .where(...)\r\n   .fetch(Records.mapping(Dto::new));\r\n```\r\n\r\nThis makes use of the following features:\r\n\r\n- [`MULTISET` value constructor][1]\r\n- [Ad-hoc conversion][2] (`convertFrom(..)` converts from a `List&lt;R&gt;` to a `Set&lt;R&gt;`)\r\n- [Projecting `Table` as `SelectField`][3] (since you want the `TableNRecord` type in your Dto anyway. If not, just use ad-hoc conversion again)\r\n\r\nOf course, you can always flatten (denormalise) your results using joins and then [collect them again into groups][4], but that&#39;s a lot of manual work every time you do this.\r\n\r\n\r\n  [1]: https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/multiset-value-constructor/\r\n  [2]: https://www.jooq.org/doc/latest/manual/sql-execution/fetching/ad-hoc-converter/\r\n  [3]: https://www.jooq.org/doc/latest/manual/sql-building/sql-statements/select-statement/select-clause/select-clause-table/\r\n  [4]: https://blog.jooq.org/use-resultquery-collect-to-implement-powerful-mappings/","title":"jOOQ fetch into DTO with Set of joined records","body":"<p>Why not just use the <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/multiset-value-constructor/\" rel=\"nofollow noreferrer\"><code>MULTISET</code> operator</a> to nest your data directly in SQL? It's all type safe and supported in a variety of RDBMS:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Dto&gt; list =\ndsl.select(\n        TABLE_1,\n        TABLE_2,\n        multiset(\n            select(TABLE_3)\n            .from(TABLE_3)\n            .where(TABLE_3.TABLE_1_ID.eq(TABLE_1.ID)\n        ).convertFrom(r -&gt; r.collect(Records.intoSet())),\n        TABLE_4\n    )\n   .from(TABLE_1)\n   .leftJoin(TABLE_2).on(TABLE_2.TABLE_1_ID.eq(TABLE_1.ID))\n   .leftJoin(TABLE_2).on(TABLE_2.TABLE_1_ID.eq(TABLE_1.ID))\n   .where(...)\n   .fetch(Records.mapping(Dto::new));\n</code></pre>\n<p>This makes use of the following features:</p>\n<ul>\n<li><a href=\"https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/multiset-value-constructor/\" rel=\"nofollow noreferrer\"><code>MULTISET</code> value constructor</a></li>\n<li><a href=\"https://www.jooq.org/doc/latest/manual/sql-execution/fetching/ad-hoc-converter/\" rel=\"nofollow noreferrer\">Ad-hoc conversion</a> (<code>convertFrom(..)</code> converts from a <code>List&lt;R&gt;</code> to a <code>Set&lt;R&gt;</code>)</li>\n<li><a href=\"https://www.jooq.org/doc/latest/manual/sql-building/sql-statements/select-statement/select-clause/select-clause-table/\" rel=\"nofollow noreferrer\">Projecting <code>Table</code> as <code>SelectField</code></a> (since you want the <code>TableNRecord</code> type in your Dto anyway. If not, just use ad-hoc conversion again)</li>\n</ul>\n<p>Of course, you can always flatten (denormalise) your results using joins and then <a href=\"https://blog.jooq.org/use-resultquery-collect-to-implement-powerful-mappings/\" rel=\"nofollow noreferrer\">collect them again into groups</a>, but that's a lot of manual work every time you do this.</p>\n"}],"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":217,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76554193,"answer_count":1,"score":0,"last_activity_date":1687791538,"creation_date":1687539709,"question_id":76542175,"body_markdown":"I am working with jOOQ. I want to perform a select and joins to fetch into a DTO. My DTO has an instance of `Table1Record`, `Table2Record`, a set of `Table3Record`s, and one `Table4Record`.\r\n\r\n```\r\npublic class Dto {\r\n  private Table1Record table1;\r\n  private Table2Record table2;\r\n  private Set&lt;Table1Record&gt; subTable1s;\r\n  private Table4Record table4;\r\n\r\n  // All arg constructor and getters/setters.\r\n}\r\n```\r\n\r\nI start my query with:\r\n\r\n```\r\ndsl\r\n    .select()\r\n    .from(TABLE_1)\r\n    .leftJoin(TABLE_2).on(TABLE_2.TABLE_1_ID.eq(TABLE_1.ID)\r\n```\r\n\r\nI know that I need to do something like `.fetch(record -&gt; `, and then use `record.into(TABLE_1)`, etc, but I don&#39;t know how to do it for the set of `Table1Records`s. Assume that there is a join table.","title":"jOOQ fetch into DTO with Set of joined records","body":"<p>I am working with jOOQ. I want to perform a select and joins to fetch into a DTO. My DTO has an instance of <code>Table1Record</code>, <code>Table2Record</code>, a set of <code>Table3Record</code>s, and one <code>Table4Record</code>.</p>\n<pre><code>public class Dto {\n  private Table1Record table1;\n  private Table2Record table2;\n  private Set&lt;Table1Record&gt; subTable1s;\n  private Table4Record table4;\n\n  // All arg constructor and getters/setters.\n}\n</code></pre>\n<p>I start my query with:</p>\n<pre><code>dsl\n    .select()\n    .from(TABLE_1)\n    .leftJoin(TABLE_2).on(TABLE_2.TABLE_1_ID.eq(TABLE_1.ID)\n</code></pre>\n<p>I know that I need to do something like <code>.fetch(record -&gt; </code>, and then use <code>record.into(TABLE_1)</code>, etc, but I don't know how to do it for the set of <code>Table1Records</code>s. Assume that there is a join table.</p>\n"},{"tags":["java","regex","replaceall"],"comments":[{"owner":{"account_id":101585,"reputation":107721,"user_id":273200,"accept_rate":100,"display_name":"Bala R"},"score":0,"creation_date":1276719180,"post_id":3056834,"comment_id":3129664,"body_markdown":"I also tried `&quot;(\\\\r\\\\n|\\\\n)&quot;`","body":"I also tried <code>&quot;(\\\\r\\\\n|\\\\n)&quot;</code>"},{"owner":{"account_id":24377,"reputation":818073,"user_id":61974,"display_name":"Mark Byers"},"score":2,"creation_date":1276719717,"post_id":3056834,"comment_id":3129747,"body_markdown":"Could you post a more complete example? I think the error is not in the code you posted.","body":"Could you post a more complete example? I think the error is not in the code you posted."},{"owner":{"account_id":101585,"reputation":107721,"user_id":273200,"accept_rate":100,"display_name":"Bala R"},"score":1,"creation_date":1276720570,"post_id":3056834,"comment_id":3129862,"body_markdown":"I pretty much have the same two lines and I was testing it in debug mode in eclipse with a break-point after `replaceAll()` .","body":"I pretty much have the same two lines and I was testing it in debug mode in eclipse with a break-point after <code>replaceAll()</code> ."},{"owner":{"account_id":4788747,"reputation":465,"user_id":3868505,"display_name":"amarjeetAnand"},"score":0,"creation_date":1526033158,"post_id":3056834,"comment_id":87595772,"body_markdown":"[\\r?\\n] can also work.","body":"[\\r?\\n] can also work."}],"answers":[{"comments":[{"owner":{"account_id":20937,"reputation":167576,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"score":0,"creation_date":1276719754,"post_id":3056846,"comment_id":3129754,"body_markdown":"If you&#39;re going to do two replacements, then regex is not needed and one could simply do: `str = str.replace(&quot;\\r\\n&quot;, &quot;&lt;br /&gt;&quot;).replace(&quot;\\n&quot;, &quot;&lt;br /&gt;&quot;);`","body":"If you&#39;re going to do two replacements, then regex is not needed and one could simply do: <code>str = str.replace(&quot;\\r\\n&quot;, &quot;&lt;br &#47;&gt;&quot;).replace(&quot;\\n&quot;, &quot;&lt;br &#47;&gt;&quot;);</code>"},{"owner":{"account_id":101585,"reputation":107721,"user_id":273200,"accept_rate":100,"display_name":"Bala R"},"score":0,"creation_date":1276720692,"post_id":3056846,"comment_id":3129879,"body_markdown":"@BartK I don&#39;t think there is a `replace(String,String)` in String class.\nI was only able to find `replace(Char, Char)`","body":"@BartK I don&#39;t think there is a <code>replace(String,String)</code> in String class. I was only able to find <code>replace(Char, Char)</code>"},{"owner":{"account_id":20937,"reputation":167576,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"score":5,"creation_date":1276720770,"post_id":3056846,"comment_id":3129889,"body_markdown":"@Bala correct, there is no such method. But there is a `replace(CharSequence, CharSequence)`. Note that `String` **is** a  `CharSequence`.","body":"@Bala correct, there is no such method. But there is a <code>replace(CharSequence, CharSequence)</code>. Note that <code>String</code> <b>is</b> a  <code>CharSequence</code>."}],"tags":[],"owner":{"account_id":18462,"reputation":52969,"user_id":42304,"accept_rate":98,"display_name":"Byron Whitlock"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1276719275,"creation_date":1276719275,"answer_id":3056846,"question_id":3056834,"body_markdown":"That should work, but don&#39;t kill yourself trying to figure it out. Just use 2 passes.\r\n\r\n    str  = str.replaceAll(&quot;(\\r\\n)&quot;, &quot;&lt;br /&gt;&quot;);\r\n    str  = str.replaceAll(&quot;(\\n)&quot;, &quot;&lt;br /&gt;&quot;);\r\n\r\nDisclaimer: this is not very efficient.","title":"replace \\n and \\r\\n with &lt;br /&gt; in java","body":"<p>That should work, but don't kill yourself trying to figure it out. Just use 2 passes.</p>\n\n<pre><code>str  = str.replaceAll(\"(\\r\\n)\", \"&lt;br /&gt;\");\nstr  = str.replaceAll(\"(\\n)\", \"&lt;br /&gt;\");\n</code></pre>\n\n<p>Disclaimer: this is not very efficient.</p>\n"},{"comments":[{"owner":{"account_id":24377,"reputation":818073,"user_id":61974,"display_name":"Mark Byers"},"score":2,"creation_date":1276719524,"post_id":3056855,"comment_id":3129715,"body_markdown":"Actually you don&#39;t need two slashes.","body":"Actually you don&#39;t need two slashes."},{"owner":{"account_id":20937,"reputation":167576,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"score":0,"creation_date":1276720011,"post_id":3056855,"comment_id":3129789,"body_markdown":"not sure what your reference has to do with the rest of your answer. The part *&quot;You need to put in two slashes&quot;* is even plain wrong, to be honest.","body":"not sure what your reference has to do with the rest of your answer. The part <i>&quot;You need to put in two slashes&quot;</i> is even plain wrong, to be honest."},{"owner":{"account_id":20937,"reputation":167576,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"score":0,"creation_date":1276720533,"post_id":3056855,"comment_id":3129859,"body_markdown":"like I said: both work (neither did Mark say your suggestion did not work, you just don&#39;t need the two backslashes: one will do). The point is: your comment that is **needs** two back slashes (opposed to just one) is still wrong. And `\\\\d` inside a string literal becomes `\\d` while `\\n` inside a string literal is still just `\\n` (a line break), in other words: you can&#39;t compare the two.","body":"like I said: both work (neither did Mark say your suggestion did not work, you just don&#39;t need the two backslashes: one will do). The point is: your comment that is <b>needs</b> two back slashes (opposed to just one) is still wrong. And <code>\\\\d</code> inside a string literal becomes <code>\\d</code> while <code>\\n</code> inside a string literal is still just <code>\\n</code> (a line break), in other words: you can&#39;t compare the two."},{"owner":{"account_id":20937,"reputation":167576,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"score":2,"creation_date":1276721114,"post_id":3056855,"comment_id":3129939,"body_markdown":"I see you removed all of your comments, which leads me to believe you understand my remarks. I suggest you remove your answer as well since the majority of your answer in not correct (don&#39;t worry, you won&#39;t loose your points by doing so). If you leave it out here (with the incorrect claims), it is likely it will draw more down-votes.","body":"I see you removed all of your comments, which leads me to believe you understand my remarks. I suggest you remove your answer as well since the majority of your answer in not correct (don&#39;t worry, you won&#39;t loose your points by doing so). If you leave it out here (with the incorrect claims), it is likely it will draw more down-votes."}],"tags":[],"owner":{"account_id":112789,"reputation":3335,"user_id":297376,"accept_rate":83,"display_name":"Kasturi"},"comment_count":4,"down_vote_count":4,"up_vote_count":2,"is_accepted":false,"score":-2,"last_activity_date":1276720260,"creation_date":1276719345,"answer_id":3056855,"question_id":3056834,"body_markdown":"This should work. You need to put in two slashes\r\n\r\n    str = str.replaceAll(&quot;(\\\\r\\\\n|\\\\n)&quot;, &quot;&lt;br /&gt;&quot;);\r\n\r\nIn this [Reference][1], there is an example which shows\r\n\r\n    private final String REGEX = &quot;\\\\d&quot;; // a single digit\r\n\r\nI have used two slashes in many of my projects and it seems to work fine!\r\n\r\n\r\n\r\n\r\n  [1]: http://java.sun.com/docs/books/tutorial/essential/regex/pre_char_classes.html","title":"replace \\n and \\r\\n with &lt;br /&gt; in java","body":"<p>This should work. You need to put in two slashes</p>\n\n<pre><code>str = str.replaceAll(\"(\\\\r\\\\n|\\\\n)\", \"&lt;br /&gt;\");\n</code></pre>\n\n<p>In this <a href=\"http://java.sun.com/docs/books/tutorial/essential/regex/pre_char_classes.html\" rel=\"nofollow noreferrer\">Reference</a>, there is an example which shows</p>\n\n<pre><code>private final String REGEX = \"\\\\d\"; // a single digit\n</code></pre>\n\n<p>I have used two slashes in many of my projects and it seems to work fine!</p>\n"},{"tags":[],"owner":{"account_id":24377,"reputation":818073,"user_id":61974,"display_name":"Mark Byers"},"comment_count":0,"down_vote_count":0,"up_vote_count":123,"is_accepted":true,"score":123,"last_activity_date":1276719471,"creation_date":1276719471,"answer_id":3056864,"question_id":3056834,"body_markdown":"It works for me.\r\n\r\n    public class Program\r\n    {\r\n        public static void main(String[] args) {\r\n            String str = &quot;This is a string.\\nThis is a long string.&quot;;\r\n            str = str.replaceAll(&quot;(\\r\\n|\\n)&quot;, &quot;&lt;br /&gt;&quot;);\r\n            System.out.println(str);\r\n        }\r\n    }\r\n\r\nResult:\r\n\r\n&lt;pre&gt;\r\nThis is a string.&amp;lt;br /&amp;gt;This is a long string.\r\n&lt;/pre&gt;\r\n\r\nYour problem is somewhere else.","title":"replace \\n and \\r\\n with &lt;br /&gt; in java","body":"<p>It works for me.</p>\n\n<pre><code>public class Program\n{\n    public static void main(String[] args) {\n        String str = \"This is a string.\\nThis is a long string.\";\n        str = str.replaceAll(\"(\\r\\n|\\n)\", \"&lt;br /&gt;\");\n        System.out.println(str);\n    }\n}\n</code></pre>\n\n<p>Result:</p>\n\n<pre>\nThis is a string.&lt;br /&gt;This is a long string.\n</pre>\n\n<p>Your problem is somewhere else.</p>\n"},{"comments":[{"owner":{"account_id":20937,"reputation":167576,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"score":4,"creation_date":1276720279,"post_id":3056868,"comment_id":3129826,"body_markdown":"There&#39;s no need to do the more lengthy method. `String`&#39;s `replaceAll(...)` does exactly that behind the scenes. This is its method body: `return Pattern.compile(expr).matcher(this).replaceAll(substitute)`: http://www.docjar.com/html/api/java/lang/String.java.html","body":"There&#39;s no need to do the more lengthy method. <code>String</code>&#39;s <code>replaceAll(...)</code> does exactly that behind the scenes. This is its method body: <code>return Pattern.compile(expr).matcher(this).replaceAll(substitute)</code>: <a href=\"http://www.docjar.com/html/api/java/lang/String.java.html\" rel=\"nofollow noreferrer\">docjar.com/html/api/java/lang/String.java.html</a>"}],"tags":[],"owner":{"account_id":59056,"reputation":50006,"user_id":176741,"accept_rate":90,"display_name":"Dolph"},"comment_count":1,"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1276720889,"creation_date":1276719487,"answer_id":3056868,"question_id":3056834,"body_markdown":"A little more robust version of what you&#39;re attempting:\r\n\r\n    str = str.replaceAll(&quot;(\\r\\n|\\n\\r|\\r|\\n)&quot;, &quot;&lt;br /&gt;&quot;);","title":"replace \\n and \\r\\n with &lt;br /&gt; in java","body":"<p>A little more robust version of what you're attempting:</p>\n\n<pre><code>str = str.replaceAll(\"(\\r\\n|\\n\\r|\\r|\\n)\", \"&lt;br /&gt;\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10959,"reputation":74232,"user_id":20938,"display_name":"Alan Moore"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1276720859,"creation_date":1276720859,"answer_id":3057010,"question_id":3056834,"body_markdown":"It works for me.  The Java code works exactly as you wrote it.  In the tester, the input string should be:\r\n\r\n    This is a string.\r\n    This is a long string.\r\n\r\n...with a real linefeed.  You can&#39;t use:\r\n\r\n    This is a string.\\nThis is a long string.\r\n\r\n...because it treats `\\n` as the literal sequence *backslash &#39;n&#39;*.\r\n    \r\n\r\n","title":"replace \\n and \\r\\n with &lt;br /&gt; in java","body":"<p>It works for me.  The Java code works exactly as you wrote it.  In the tester, the input string should be:</p>\n\n<pre><code>This is a string.\nThis is a long string.\n</code></pre>\n\n<p>...with a real linefeed.  You can't use:</p>\n\n<pre><code>This is a string.\\nThis is a long string.\n</code></pre>\n\n<p>...because it treats <code>\\n</code> as the literal sequence <em>backslash 'n'</em>.</p>\n"},{"comments":[{"owner":{"account_id":188548,"reputation":55127,"user_id":427309,"accept_rate":95,"display_name":"Richard J. Ross III"},"score":20,"creation_date":1362581154,"post_id":12053430,"comment_id":21505912,"body_markdown":"I don&#39;t think you have enough backslashes there :)","body":"I don&#39;t think you have enough backslashes there :)"},{"owner":{"account_id":131106,"reputation":39102,"user_id":330867,"accept_rate":79,"display_name":"Cyril N."},"score":1,"creation_date":1375177116,"post_id":12053430,"comment_id":26220599,"body_markdown":"I had the same problem. Thing was the output was showing &quot;\\n&quot; but for this to work, it was a string of &quot;\\\\\\\\n&quot; wich the output resulted as &quot;\\n&quot;, hence the wrong interpretation :)","body":"I had the same problem. Thing was the output was showing &quot;\\n&quot; but for this to work, it was a string of &quot;\\\\\\\\n&quot; wich the output resulted as &quot;\\n&quot;, hence the wrong interpretation :)"},{"owner":{"account_id":2432331,"reputation":391,"user_id":2122977,"display_name":"Iefimenko Ievgen"},"score":0,"creation_date":1569792751,"post_id":12053430,"comment_id":102701023,"body_markdown":"You need to use this code: rawText.replaceAll(&quot;(\\\\\\\\r\\\\\\\\n|\\\\\\\\n)&quot;, &quot;\\\\\\\\n&quot;);","body":"You need to use this code: rawText.replaceAll(&quot;(\\\\\\\\r\\\\\\\\n|\\\\\\\\n)&quot;, &quot;\\\\\\\\n&quot;);"}],"tags":[],"owner":{"account_id":873155,"reputation":3719,"user_id":923557,"accept_rate":62,"display_name":"Nino van Hooff"},"comment_count":3,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1345546841,"creation_date":1345546841,"answer_id":12053430,"question_id":3056834,"body_markdown":"For me, this worked:\r\n\r\n    rawText.replaceAll(&quot;(\\\\\\\\r\\\\\\\\n|\\\\\\\\n)&quot;, &quot;\\\\\\n&quot;);\r\n\r\nTip: use [regex tester][1] for quick testing without compiling in your environment\r\n\r\n\r\n  [1]: http://www.regexplanet.com/advanced/java/index.html\r\n\r\n","title":"replace \\n and \\r\\n with &lt;br /&gt; in java","body":"<p>For me, this worked:</p>\n\n<pre><code>rawText.replaceAll(\"(\\\\\\\\r\\\\\\\\n|\\\\\\\\n)\", \"\\\\\\n\");\n</code></pre>\n\n<p>Tip: use <a href=\"http://www.regexplanet.com/advanced/java/index.html\" rel=\"noreferrer\">regex tester</a> for quick testing without compiling in your environment</p>\n"},{"tags":[],"owner":{"account_id":4693043,"reputation":111,"user_id":3798668,"display_name":"user3798668"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1404324456,"creation_date":1404322195,"answer_id":24537430,"question_id":3056834,"body_markdown":"Since my account is new I can&#39;t up-vote Nino van Hooff&#39;s answer. If your strings are coming from a Windows based source such as an aspx based server, this solution does work:\r\n\r\n    rawText.replaceAll(&quot;(\\\\\\\\r\\\\\\\\n|\\\\\\\\n)&quot;, &quot;&lt;br /&gt;&quot;);\r\n\r\nSeems to be a weird character set issue as the double back-slashes are being interpreted as single slash escape characters. Hence the need for the quadruple slashes above.\r\n\r\nAgain, under most circumstances `&quot;(\\\\r\\\\n|\\\\n)&quot;` should work, but if your strings are coming from a Windows based source try the above.\r\n\r\nJust an FYI tried everything to correct the issue I was having replacing those line endings. Thought at first was failed conversion from `Windows-1252` to `UTF-8`. But that didn&#39;t working either. This solution is what finally did the trick. :)\r\n\r\n","title":"replace \\n and \\r\\n with &lt;br /&gt; in java","body":"<p>Since my account is new I can't up-vote Nino van Hooff's answer. If your strings are coming from a Windows based source such as an aspx based server, this solution does work:</p>\n\n<pre><code>rawText.replaceAll(\"(\\\\\\\\r\\\\\\\\n|\\\\\\\\n)\", \"&lt;br /&gt;\");\n</code></pre>\n\n<p>Seems to be a weird character set issue as the double back-slashes are being interpreted as single slash escape characters. Hence the need for the quadruple slashes above.</p>\n\n<p>Again, under most circumstances <code>\"(\\\\r\\\\n|\\\\n)\"</code> should work, but if your strings are coming from a Windows based source try the above.</p>\n\n<p>Just an FYI tried everything to correct the issue I was having replacing those line endings. Thought at first was failed conversion from <code>Windows-1252</code> to <code>UTF-8</code>. But that didn't working either. This solution is what finally did the trick. :)</p>\n"}],"owner":{"account_id":101585,"reputation":107721,"user_id":273200,"accept_rate":100,"display_name":"Bala R"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":167991,"favorite_count":0,"down_vote_count":0,"up_vote_count":74,"accepted_answer_id":3056864,"answer_count":7,"score":74,"last_activity_date":1687791460,"creation_date":1276719143,"question_id":3056834,"body_markdown":"This has been asked several times for several languages but I can&#39;t get it to work.\r\nI have a string like this\r\n\r\n    String str = &quot;This is a string.\\nThis is a long string.&quot;;\r\nAnd I&#39;m trying to replace the `\\n` with `&lt;br /&gt;` using\r\n\r\n    str = str.replaceAll(&quot;(\\r\\n|\\n)&quot;, &quot;&lt;br /&gt;&quot;);\r\nbut the `\\n` is not getting replaced.\r\nI tried to use this [RegEx Tool][1] to verify and I see the same result. The input string does not have a match for `&quot;(\\r\\n|\\n)&quot;`. What am i doing wrong ?\r\n\r\n\r\n\r\n  [1]: http://www.regexplanet.com/simple/index.html","title":"replace \\n and \\r\\n with &lt;br /&gt; in java","body":"<p>This has been asked several times for several languages but I can't get it to work.\nI have a string like this</p>\n\n<pre><code>String str = \"This is a string.\\nThis is a long string.\";\n</code></pre>\n\n<p>And I'm trying to replace the <code>\\n</code> with <code>&lt;br /&gt;</code> using</p>\n\n<pre><code>str = str.replaceAll(\"(\\r\\n|\\n)\", \"&lt;br /&gt;\");\n</code></pre>\n\n<p>but the <code>\\n</code> is not getting replaced.\nI tried to use this <a href=\"http://www.regexplanet.com/simple/index.html\" rel=\"noreferrer\">RegEx Tool</a> to verify and I see the same result. The input string does not have a match for <code>\"(\\r\\n|\\n)\"</code>. What am i doing wrong ?</p>\n"},{"tags":["java","html","spring-mvc","spring-data-jpa","thymeleaf"],"comments":[{"owner":{"account_id":2119809,"reputation":50969,"user_id":1883316,"display_name":"Tim Roberts"},"score":0,"creation_date":1687734859,"post_id":76552740,"comment_id":134973884,"body_markdown":"WHERE do you see gibberish?  Which button triggered that?","body":"WHERE do you see gibberish?  Which button triggered that?"},{"owner":{"account_id":9527087,"reputation":324,"user_id":7080004,"display_name":"azer-p"},"score":0,"creation_date":1687737432,"post_id":76552740,"comment_id":134974060,"body_markdown":"Why upload an image in the DB? It&#39;s a bad practice.","body":"Why upload an image in the DB? It&#39;s a bad practice."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1687741908,"post_id":76552740,"comment_id":134974401,"body_markdown":"@azer-p why do you say that?","body":"@azer-p why do you say that?"},{"owner":{"account_id":9527087,"reputation":324,"user_id":7080004,"display_name":"azer-p"},"score":0,"creation_date":1687751977,"post_id":76552740,"comment_id":134975126,"body_markdown":"@tgdavies correction, not a bad practice but there&#39;s a lot of disadvantages","body":"@tgdavies correction, not a bad practice but there&#39;s a lot of disadvantages"},{"owner":{"account_id":28893839,"reputation":1,"user_id":22130334,"display_name":"user22130334"},"score":0,"creation_date":1687876606,"post_id":76552740,"comment_id":134996453,"body_markdown":"@TimRoberts no a bottom, when i click over the image","body":"@TimRoberts no a bottom, when i click over the image"},{"owner":{"account_id":28893839,"reputation":1,"user_id":22130334,"display_name":"user22130334"},"score":0,"creation_date":1687876645,"post_id":76552740,"comment_id":134996461,"body_markdown":"@azer-p sorry I specified wrong, i upload a reference to the location of the file in the database.","body":"@azer-p sorry I specified wrong, i upload a reference to the location of the file in the database."},{"owner":{"account_id":2119809,"reputation":50969,"user_id":1883316,"display_name":"Tim Roberts"},"score":0,"creation_date":1687888230,"post_id":76552740,"comment_id":134999186,"body_markdown":"So, are you saying that the `&lt;img&gt;` displays correctly, but when you click on it, the exact same URL does not display correctly?  Does your `rutaPortada` include the file&#39;s extension?","body":"So, are you saying that the <code>&lt;img&gt;</code> displays correctly, but when you click on it, the exact same URL does not display correctly?  Does your <code>rutaPortada</code> include the file&#39;s extension?"}],"owner":{"account_id":28893839,"reputation":1,"user_id":22130334,"display_name":"user22130334"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687790804,"creation_date":1687734595,"question_id":76552740,"body_markdown":"I&#39;m trying to upload a image using forms and then i need to keep it in the DB and see it later in a table.\r\nThe image displays correctly  when i run the localhost, the problem is when i click on the image and it show me gibberish instead of the image in format JPEG. i&#39;m using thymeleaf and springboot.\r\n\r\n\r\nthis is the part of the code in the html file \r\n\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;es&quot;\r\n      xmlns:th=&quot;http://www.thymeleaf.org&quot;\r\n      xmlns:layout=&quot;http://www.ultraq.net.nz/thymeleaf/layout&quot;\r\n      layout:decorate=&quot;~{master.html}&quot;&gt;\r\n&lt;head&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    &lt;title&gt;Administrar pel&#237;culas | Trailers &lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;div layout:fragment=&quot;content&quot;&gt;\r\n    &lt;h2&gt; Peliculas&lt;/h2&gt;\r\n\r\n    &lt;div class=&quot;text-end&quot;&gt;\r\n        &lt;a href=&quot;/admin/peliculas/nuevo&quot; class=&quot;btn btn-secondary mb-3&quot;&gt;\r\n            Nueva Pel&#237;cula\r\n        &lt;/a&gt;\r\n    &lt;/div&gt;\r\n\r\n    &lt;table class=&quot;table table-hover&quot;&gt;\r\n        &lt;thead&gt;\r\n        &lt;tr&gt;\r\n            &lt;th&gt;&lt;/th&gt;\r\n            &lt;th&gt;Pelicula&lt;/th&gt;\r\n            &lt;th&gt;Fecha de estreno&lt;/th&gt;\r\n            &lt;th&gt;&lt;/th&gt;\r\n        &lt;/tr&gt;\r\n        &lt;/thead&gt;\r\n        &lt;tbody&gt;\r\n        &lt;tr th:each=&quot;pelicula : ${peliculas}&quot; th:object=&quot;${pelicula}&quot;&gt;\r\n        &lt;td style=&quot;width: 150px;&quot;&gt;\r\n            &lt;a th:href=&quot;@{/assets/{filename}(filename=*{rutaPortada})}&quot; class=&quot;img-thumbnail w-100&quot; data-fancybox&gt;\r\n                &lt;img th:src=&quot;@{/assets/{filename}(filename=*{rutaPortada})}&quot; alt=&quot;&quot; class=&quot;img-thumbnail w-100&quot; &gt;\r\n            &lt;/a&gt;\r\n            &lt;/td&gt;\r\n            &lt;td&gt;\r\n                &lt;div th:text=&quot;*{titulo}&quot; class=&quot;fs-5 fw-bold&quot;&gt;&lt;/div&gt;\r\n                &lt;p th:text=&quot;*{sinopsis}&quot;&gt;&lt;/p&gt;\r\n                &lt;div&gt;\r\n                    &lt;span class=&quot;badge rounded-pill bg-light text-dark me-1&quot;\r\n                          th:each=&quot;genero : *{generos}&quot;\r\n                             th:text=&quot;${genero.titulo}&quot;&gt;&lt;/span&gt;\r\n                &lt;/div&gt;\r\n            &lt;/td&gt;\r\n            &lt;td th:text=&quot;*{#temporals.format(fechaEstreno, &#39;dd/MM/yyyy&#39;)}&quot;&gt;&lt;/td&gt;\r\n            &lt;td class=&quot;text-end&quot;&gt;\r\n                &lt;a th:href=&quot;@{/admin/peliculas/{id}/editar(id=*{id})}&quot;&gt;Editar&lt;/a&gt;\r\n            &lt;/td&gt;\r\n        &lt;/tr&gt;\r\n        &lt;/tbody&gt;\r\n    &lt;/table&gt;\r\n&lt;/div&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n\r\nand this it the part of the code from the controller\r\n\r\n\r\n\r\npackage com.cinetrailer.trailer.controller;\r\n\r\nimport com.cinetrailer.trailer.model.Genero;\r\nimport com.cinetrailer.trailer.model.Pelicula;\r\nimport com.cinetrailer.trailer.repo.GeneroRepository;\r\nimport com.cinetrailer.trailer.repo.PeliculaRepository;\r\nimport com.cinetrailer.trailer.service.FileSystemStorageService;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.data.domain.Page;\r\nimport org.springframework.data.domain.Pageable;\r\nimport org.springframework.data.domain.Sort;\r\nimport org.springframework.data.web.PageableDefault;\r\nimport org.springframework.http.HttpHeaders;\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.validation.BindingResult;\r\nimport org.springframework.validation.annotation.Validated;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.servlet.ModelAndView;\r\n\r\nimport java.util.List;\r\nimport java.util.Optional;\r\n\r\n@Controller\r\n@RequestMapping(&quot;/admin&quot;)\r\npublic class AdminController {\r\n\r\n    @Autowired\r\n    private PeliculaRepository peliculaRepository;\r\n    @Autowired\r\n    private GeneroRepository generoRepository;\r\n    @Autowired\r\n    private FileSystemStorageService fileSystemStorageService;\r\n\r\n    @GetMapping(&quot;&quot;)\r\n    ModelAndView index(@PageableDefault(sort = &quot;titulo&quot;, size = 5) Pageable pageable) {\r\n        Page&lt;Pelicula&gt; peliculas = peliculaRepository.findAll(pageable);\r\n        return new ModelAndView(&quot;admin/index&quot;).addObject(&quot;peliculas&quot;, peliculas);\r\n    }\r\n\r\n    @GetMapping(&quot;/peliculas/nuevo&quot;)\r\n    ModelAndView nuevaPelicula() {\r\n        List&lt;Genero&gt; generos = generoRepository.findAll(Sort.by(&quot;titulo&quot;));\r\n\r\n        return new ModelAndView(&quot;admin/nueva-pelicula&quot;).addObject(&quot;pelicula&quot;, new Pelicula()).addObject(&quot;generos&quot;, generos);\r\n    }\r\n\r\n    @PostMapping(&quot;/peliculas/nuevo&quot;)\r\n    ModelAndView crearPelicula(@Validated Pelicula pelicula, BindingResult bindingResult) {\r\n\r\n        if (bindingResult.hasErrors() || pelicula.getPortada().isEmpty()) {\r\n            if (pelicula.getPortada().isEmpty()) {\r\n                bindingResult.rejectValue(&quot;portada&quot;, &quot;MultipartNotEmpty&quot;);\r\n            }\r\n            List&lt;Genero&gt; generos = generoRepository.findAll(Sort.by(&quot;titulo&quot;));\r\n            return new ModelAndView(&quot;admin/nueva-pelicula&quot;).addObject(&quot;pelicula&quot;, pelicula).addObject(&quot;generos&quot;, generos);\r\n        }\r\n        String rutaPortada = fileSystemStorageService.storage(pelicula.getPortada());\r\n        pelicula.setRutaPortada(rutaPortada);\r\n\r\n        peliculaRepository.save(pelicula);\r\n\r\n        return new ModelAndView(&quot;redirect:/admin&quot;);\r\n//        return new ModelAndView(&quot;redirect:/admin&quot;);\r\n    }\r\n\r\n    @GetMapping(&quot;/peliculas/{id}/editar&quot;)\r\n    ModelAndView editarPelicula(@PathVariable Integer id) {\r\n        Optional&lt;Pelicula&gt; optionalPelicula = peliculaRepository.findById(id);\r\n        if (optionalPelicula.isPresent()) {\r\n            Pelicula pelicula = optionalPelicula.get();\r\n            List&lt;Genero&gt; generos = generoRepository.findAll(Sort.by(&quot;titulo&quot;));\r\n//        Pelicula pelicula = peliculaRepository.getOne(id);\r\n//        List&lt;Genero&gt; generos = generoRepository.findAll(Sort.by(&quot;titulo&quot;));\r\n\r\n            return new ModelAndView(&quot;admin/editar-pelicula&quot;)\r\n                    .addObject(&quot;pelicula&quot;, pelicula).addObject(&quot;generos&quot;, generos);\r\n        }\r\n        else {\r\n            return new ModelAndView(&quot;error&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n","title":"why do i get gibberish when i click on my image?","body":"<p>I'm trying to upload a image using forms and then i need to keep it in the DB and see it later in a table.\nThe image displays correctly  when i run the localhost, the problem is when i click on the image and it show me gibberish instead of the image in format JPEG. i'm using thymeleaf and springboot.</p>\n<p>this is the part of the code in the html file</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;es&quot;\n      xmlns:th=&quot;http://www.thymeleaf.org&quot;\n      xmlns:layout=&quot;http://www.ultraq.net.nz/thymeleaf/layout&quot;\n      layout:decorate=&quot;~{master.html}&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;title&gt;Administrar películas | Trailers &lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div layout:fragment=&quot;content&quot;&gt;\n    &lt;h2&gt; Peliculas&lt;/h2&gt;\n\n    &lt;div class=&quot;text-end&quot;&gt;\n        &lt;a href=&quot;/admin/peliculas/nuevo&quot; class=&quot;btn btn-secondary mb-3&quot;&gt;\n            Nueva Película\n        &lt;/a&gt;\n    &lt;/div&gt;\n\n    &lt;table class=&quot;table table-hover&quot;&gt;\n        &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt;&lt;/th&gt;\n            &lt;th&gt;Pelicula&lt;/th&gt;\n            &lt;th&gt;Fecha de estreno&lt;/th&gt;\n            &lt;th&gt;&lt;/th&gt;\n        &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n        &lt;tr th:each=&quot;pelicula : ${peliculas}&quot; th:object=&quot;${pelicula}&quot;&gt;\n        &lt;td style=&quot;width: 150px;&quot;&gt;\n            &lt;a th:href=&quot;@{/assets/{filename}(filename=*{rutaPortada})}&quot; class=&quot;img-thumbnail w-100&quot; data-fancybox&gt;\n                &lt;img th:src=&quot;@{/assets/{filename}(filename=*{rutaPortada})}&quot; alt=&quot;&quot; class=&quot;img-thumbnail w-100&quot; &gt;\n            &lt;/a&gt;\n            &lt;/td&gt;\n            &lt;td&gt;\n                &lt;div th:text=&quot;*{titulo}&quot; class=&quot;fs-5 fw-bold&quot;&gt;&lt;/div&gt;\n                &lt;p th:text=&quot;*{sinopsis}&quot;&gt;&lt;/p&gt;\n                &lt;div&gt;\n                    &lt;span class=&quot;badge rounded-pill bg-light text-dark me-1&quot;\n                          th:each=&quot;genero : *{generos}&quot;\n                             th:text=&quot;${genero.titulo}&quot;&gt;&lt;/span&gt;\n                &lt;/div&gt;\n            &lt;/td&gt;\n            &lt;td th:text=&quot;*{#temporals.format(fechaEstreno, 'dd/MM/yyyy')}&quot;&gt;&lt;/td&gt;\n            &lt;td class=&quot;text-end&quot;&gt;\n                &lt;a th:href=&quot;@{/admin/peliculas/{id}/editar(id=*{id})}&quot;&gt;Editar&lt;/a&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\nand this it the part of the code from the controller\n\n\n\npackage com.cinetrailer.trailer.controller;\n\nimport com.cinetrailer.trailer.model.Genero;\nimport com.cinetrailer.trailer.model.Pelicula;\nimport com.cinetrailer.trailer.repo.GeneroRepository;\nimport com.cinetrailer.trailer.repo.PeliculaRepository;\nimport com.cinetrailer.trailer.service.FileSystemStorageService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.data.domain.Sort;\nimport org.springframework.data.web.PageableDefault;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.validation.BindingResult;\nimport org.springframework.validation.annotation.Validated;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.servlet.ModelAndView;\n\nimport java.util.List;\nimport java.util.Optional;\n\n@Controller\n@RequestMapping(&quot;/admin&quot;)\npublic class AdminController {\n\n    @Autowired\n    private PeliculaRepository peliculaRepository;\n    @Autowired\n    private GeneroRepository generoRepository;\n    @Autowired\n    private FileSystemStorageService fileSystemStorageService;\n\n    @GetMapping(&quot;&quot;)\n    ModelAndView index(@PageableDefault(sort = &quot;titulo&quot;, size = 5) Pageable pageable) {\n        Page&lt;Pelicula&gt; peliculas = peliculaRepository.findAll(pageable);\n        return new ModelAndView(&quot;admin/index&quot;).addObject(&quot;peliculas&quot;, peliculas);\n    }\n\n    @GetMapping(&quot;/peliculas/nuevo&quot;)\n    ModelAndView nuevaPelicula() {\n        List&lt;Genero&gt; generos = generoRepository.findAll(Sort.by(&quot;titulo&quot;));\n\n        return new ModelAndView(&quot;admin/nueva-pelicula&quot;).addObject(&quot;pelicula&quot;, new Pelicula()).addObject(&quot;generos&quot;, generos);\n    }\n\n    @PostMapping(&quot;/peliculas/nuevo&quot;)\n    ModelAndView crearPelicula(@Validated Pelicula pelicula, BindingResult bindingResult) {\n\n        if (bindingResult.hasErrors() || pelicula.getPortada().isEmpty()) {\n            if (pelicula.getPortada().isEmpty()) {\n                bindingResult.rejectValue(&quot;portada&quot;, &quot;MultipartNotEmpty&quot;);\n            }\n            List&lt;Genero&gt; generos = generoRepository.findAll(Sort.by(&quot;titulo&quot;));\n            return new ModelAndView(&quot;admin/nueva-pelicula&quot;).addObject(&quot;pelicula&quot;, pelicula).addObject(&quot;generos&quot;, generos);\n        }\n        String rutaPortada = fileSystemStorageService.storage(pelicula.getPortada());\n        pelicula.setRutaPortada(rutaPortada);\n\n        peliculaRepository.save(pelicula);\n\n        return new ModelAndView(&quot;redirect:/admin&quot;);\n//        return new ModelAndView(&quot;redirect:/admin&quot;);\n    }\n\n    @GetMapping(&quot;/peliculas/{id}/editar&quot;)\n    ModelAndView editarPelicula(@PathVariable Integer id) {\n        Optional&lt;Pelicula&gt; optionalPelicula = peliculaRepository.findById(id);\n        if (optionalPelicula.isPresent()) {\n            Pelicula pelicula = optionalPelicula.get();\n            List&lt;Genero&gt; generos = generoRepository.findAll(Sort.by(&quot;titulo&quot;));\n//        Pelicula pelicula = peliculaRepository.getOne(id);\n//        List&lt;Genero&gt; generos = generoRepository.findAll(Sort.by(&quot;titulo&quot;));\n\n            return new ModelAndView(&quot;admin/editar-pelicula&quot;)\n                    .addObject(&quot;pelicula&quot;, pelicula).addObject(&quot;generos&quot;, generos);\n        }\n        else {\n            return new ModelAndView(&quot;error&quot;);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","datetime","karate"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1687530822,"post_id":76540842,"comment_id":134954575,"body_markdown":"You don&#39;t need to create an instance. You have a `static` method. You should probably be using `java.time` though","body":"You don&#39;t need to create an instance. You have a <code>static</code> method. You should probably be using <code>java.time</code> though"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1687531215,"post_id":76540842,"comment_id":134954688,"body_markdown":"All you need is `return ZonedDateTime.now().format(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd hh:mm:ss&#39;Z&#39;&quot;));` And presumably `def effectiveDate = Datetime.getNowDate()`","body":"All you need is <code>return ZonedDateTime.now().format(DateTimeFormatter.ofPattern(&quot;yyyy&zwnj;&#8203;-MM-dd hh:mm:ss&#39;Z&#39;&quot;));</code> And presumably <code>def effectiveDate = Datetime.getNowDate()</code>"},{"owner":{"account_id":3483162,"reputation":456,"user_id":2914693,"accept_rate":48,"display_name":"j8d"},"score":0,"creation_date":1687531461,"post_id":76540842,"comment_id":134954735,"body_markdown":"That did the trick. Thank you!","body":"That did the trick. Thank you!"}],"answers":[{"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1687531910,"post_id":76541213,"comment_id":134954830,"body_markdown":"That&#39;s good but are you sure that sdf code is right?","body":"That&#39;s good but are you sure that sdf code is right?"},{"owner":{"account_id":3483162,"reputation":456,"user_id":2914693,"accept_rate":48,"display_name":"j8d"},"score":0,"creation_date":1687532447,"post_id":76541213,"comment_id":134954945,"body_markdown":"Good eye. Fixed it","body":"Good eye. Fixed it"}],"tags":[],"owner":{"account_id":3483162,"reputation":456,"user_id":2914693,"accept_rate":48,"display_name":"j8d"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1687790734,"creation_date":1687531707,"answer_id":76541213,"question_id":76540842,"body_markdown":"Solution thanks to g00se...\r\n\r\n**Datetime.java**\r\n    \r\n    package com.org.unit.automation.utils;\r\n    \r\n    import java.time.ZonedDateTime;\r\n    import java.time.format.DateTimeFormatter;\r\n    public class Datetime {  \r\n        public static String getNowDate() {\r\n    \t\treturn ZonedDateTime.now().format(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd hh:mm:ss&#39;Z&#39;&quot;));\r\n    \t}\r\n    }\r\n\r\n**sdf.feature**\r\n\r\n    Feature: Print current ISO datetime\r\n      Background:\r\n        * def Datetime = Java.type(&#39;com.org.unit.automation.utils.Datetime&#39;)\r\n        * def effectiveDate = Datetime.getNowDate()\r\n        * print effectiveDate\r\n\r\n**Result**\r\n\r\n&quot;2023-06-23 10:45:50Z&quot;\r\n","title":"Datetime function in Karate","body":"<p>Solution thanks to g00se...</p>\n<p><strong>Datetime.java</strong></p>\n<pre><code>package com.org.unit.automation.utils;\n\nimport java.time.ZonedDateTime;\nimport java.time.format.DateTimeFormatter;\npublic class Datetime {  \n    public static String getNowDate() {\n        return ZonedDateTime.now().format(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd hh:mm:ss'Z'&quot;));\n    }\n}\n</code></pre>\n<p><strong>sdf.feature</strong></p>\n<pre><code>Feature: Print current ISO datetime\n  Background:\n    * def Datetime = Java.type('com.org.unit.automation.utils.Datetime')\n    * def effectiveDate = Datetime.getNowDate()\n    * print effectiveDate\n</code></pre>\n<p><strong>Result</strong></p>\n<p>&quot;2023-06-23 10:45:50Z&quot;</p>\n"}],"owner":{"account_id":3483162,"reputation":456,"user_id":2914693,"accept_rate":48,"display_name":"j8d"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1687790734,"creation_date":1687528764,"question_id":76540842,"body_markdown":"Need to insert datetime in my tests. This is what I tried:\r\n\r\n**Datetime.java**\r\n    \r\n    package com.org.unit.automation.utils;\r\n    \r\n    import java.text.SimpleDateFormat;  \r\n    import java.util.Date;  \r\n    public class Datetime {  \r\n        public static String getNowDate() {\r\n    \t\tDate nowDate = new Date();\r\n    \t\tSimpleDateFormat nowDateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&#39;Z&#39;&quot;);\r\n    \t\treturn nowDateFormat.format(nowDate);\r\n    \t}\r\n    }\r\n\r\n**sdf.feature**\r\n\r\n    Feature: Print current ISO datetime\r\n      Background:\r\n        * def Datetime = Java.type(&#39;com.org.unit.automation.utils.Datetime&#39;)\r\n        * def date = new Datetime()\r\n        * def effectiveDate = date.getNowDate()\r\n        * print effectiveDate\r\n\r\n**Result**\r\n\r\n[ERROR]   KarateRunner.test:11 js failed:\r\n01: date.getNowDate()\r\norg.graalvm.polyglot.PolyglotException: TypeError: invokeMember (getNowDate) on com.resmed.patientcore.automation.utils.Datetime failed due to: Unknown identifier: getNowDate\r\n\r\n","title":"Datetime function in Karate","body":"<p>Need to insert datetime in my tests. This is what I tried:</p>\n<p><strong>Datetime.java</strong></p>\n<pre><code>package com.org.unit.automation.utils;\n\nimport java.text.SimpleDateFormat;  \nimport java.util.Date;  \npublic class Datetime {  \n    public static String getNowDate() {\n        Date nowDate = new Date();\n        SimpleDateFormat nowDateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss'Z'&quot;);\n        return nowDateFormat.format(nowDate);\n    }\n}\n</code></pre>\n<p><strong>sdf.feature</strong></p>\n<pre><code>Feature: Print current ISO datetime\n  Background:\n    * def Datetime = Java.type('com.org.unit.automation.utils.Datetime')\n    * def date = new Datetime()\n    * def effectiveDate = date.getNowDate()\n    * print effectiveDate\n</code></pre>\n<p><strong>Result</strong></p>\n<p>[ERROR]   KarateRunner.test:11 js failed:\n01: date.getNowDate()\norg.graalvm.polyglot.PolyglotException: TypeError: invokeMember (getNowDate) on com.resmed.patientcore.automation.utils.Datetime failed due to: Unknown identifier: getNowDate</p>\n"},{"tags":["java","jar","jvm"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1687791424,"post_id":76557739,"comment_id":134982466,"body_markdown":"If at all possible, don&#39;t. Just upgrade your existing code to work with the new version. It&#39;s only a few minor versions, so how hard could it be?","body":"If at all possible, don&#39;t. Just upgrade your existing code to work with the new version. It&#39;s only a few minor versions, so how hard could it be?"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1687794210,"post_id":76557739,"comment_id":134983079,"body_markdown":"@Jorn normally you&#39;re right - just use the new version everywhere. However, I&#39;ve had issues with BC before where something that _looked like_ a minor version had breaking changes.","body":"@Jorn normally you&#39;re right - just use the new version everywhere. However, I&#39;ve had issues with BC before where something that <i>looked like</i> a minor version had breaking changes."},{"owner":{"account_id":23477086,"reputation":5,"user_id":17529749,"display_name":"yang37"},"score":0,"creation_date":1687827526,"post_id":76557739,"comment_id":134987923,"body_markdown":"@Jorn@Rob Spoor\nThank you for your comments.\nIf it were me, I would try to make the dependencies in the project not conflict. Actually, this is not my project, and there are other reasons why I can&#39;t do it now. I mainly want to know if there are any good solutions under the current background.","body":"@Jorn@Rob Spoor Thank you for your comments. If it were me, I would try to make the dependencies in the project not conflict. Actually, this is not my project, and there are other reasons why I can&#39;t do it now. I mainly want to know if there are any good solutions under the current background."}],"owner":{"account_id":23477086,"reputation":5,"user_id":17529749,"display_name":"yang37"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687790531,"creation_date":1687790531,"question_id":76557739,"body_markdown":"## 1. Background\r\n\r\n`bcprov-jdk15on-1.54.jar`has been introduced into the project and is used in many places.\r\n\r\nNow the partner has sent a new set of access information, which contains the following jar packages.\r\n\r\n```bash\r\nbcprov-jdk15on-1.69.jar\r\nfintech-java-sdk-core-3.1.0.jar\r\nfintech-java-sdk-kdft-3.1.0.jar\r\n```\r\n\r\n## 2. Questions\r\n\r\nThere are two versions of bcprov-jdk15on in the project, the old one is&#39; 1.54 &#39;and the new one is&#39; 1.69&#39;.\r\n\r\nSomething like this:\r\n\r\n[demo](https://i.stack.imgur.com/uMJ1J.png)\r\n\r\nSince the &#39;1.54&#39; version is used in many places, it is not possible to upgrade directly to &#39;1.69&#39;.\r\n\r\nNow I want to achieve the following two points:\r\n\\`\r\n\r\n- For the new version, `bcprov-jdk15on-1.69.jar` must be used for `fintech-java-sdk-core-3.1.0.jar` and `fintech-java-sdk-kdft-3.1.0.jar`\r\n- For previous versions, leave `bcprov-jdk15on-1.54.jar` unchanged and use this version.\r\n\r\nThat is, the upgrade does not affect the historical function.\r\n\r\n## 3 My analysis\r\n\r\nIf you do not consider the conflict case, the new jar is used normally, the example code is as follows:\r\n\r\n```java\r\nDefaultKdClient defaultKdClient = KdSdkConfig.getDefaultClient();\r\n\r\nDemoApiInfo demoApiInfo = new DemoApiInfo();\r\nMap&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\nDefaultKdRequest&lt;Object&gt; kdRequest = new DefaultKdRequest&lt;&gt;(demoApiInfo,\r\nparams);\r\n```\r\n\r\nI have thought about using class loaders, may be understanding is not yet in place, I think it is more troublesome to introduce every class like &#39;DefaultKdClient&#39;\r\n\r\n```java\r\n// custom class loader: CustomClassLoader\r\nCustomClassLoader classLoader = new CustomClassLoader();\r\nClass&lt;? &gt; defaultKdClient = classLoader.loadClass(&quot;xx.DefaultKdClient&quot;);\r\n```\r\n\r\nAnd I&#39;m not sure that this will ensure that the `bcprov-jdk15on` dependencies in `fintech-java-sdk-core-3.1.0.jar` and `fintech-java-sdk-kdft-3.1.0.jar` will be version `1.69`.\r\n\r\nIn addition, I also thought about creating a new project, keeping different JVMS, so that bcprov-jdk15on no longer conflicts, but new projects require new maintenance costs, and this approach does not feel good.\r\n\r\n## 4. Questions\r\n\r\nThe above scene, what is the better solution, thank you\\~","title":"How to use both versions of jar in a Java project?","body":"<h2>1. Background</h2>\n<p><code>bcprov-jdk15on-1.54.jar</code>has been introduced into the project and is used in many places.</p>\n<p>Now the partner has sent a new set of access information, which contains the following jar packages.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>bcprov-jdk15on-1.69.jar\nfintech-java-sdk-core-3.1.0.jar\nfintech-java-sdk-kdft-3.1.0.jar\n</code></pre>\n<h2>2. Questions</h2>\n<p>There are two versions of bcprov-jdk15on in the project, the old one is' 1.54 'and the new one is' 1.69'.</p>\n<p>Something like this:</p>\n<p><a href=\"https://i.stack.imgur.com/uMJ1J.png\" rel=\"nofollow noreferrer\">demo</a></p>\n<p>Since the '1.54' version is used in many places, it is not possible to upgrade directly to '1.69'.</p>\n<p>Now I want to achieve the following two points:\n`</p>\n<ul>\n<li>For the new version, <code>bcprov-jdk15on-1.69.jar</code> must be used for <code>fintech-java-sdk-core-3.1.0.jar</code> and <code>fintech-java-sdk-kdft-3.1.0.jar</code></li>\n<li>For previous versions, leave <code>bcprov-jdk15on-1.54.jar</code> unchanged and use this version.</li>\n</ul>\n<p>That is, the upgrade does not affect the historical function.</p>\n<h2>3 My analysis</h2>\n<p>If you do not consider the conflict case, the new jar is used normally, the example code is as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DefaultKdClient defaultKdClient = KdSdkConfig.getDefaultClient();\n\nDemoApiInfo demoApiInfo = new DemoApiInfo();\nMap&lt;String, String&gt; params = new HashMap&lt;&gt;();\nDefaultKdRequest&lt;Object&gt; kdRequest = new DefaultKdRequest&lt;&gt;(demoApiInfo,\nparams);\n</code></pre>\n<p>I have thought about using class loaders, may be understanding is not yet in place, I think it is more troublesome to introduce every class like 'DefaultKdClient'</p>\n<pre class=\"lang-java prettyprint-override\"><code>// custom class loader: CustomClassLoader\nCustomClassLoader classLoader = new CustomClassLoader();\nClass&lt;? &gt; defaultKdClient = classLoader.loadClass(&quot;xx.DefaultKdClient&quot;);\n</code></pre>\n<p>And I'm not sure that this will ensure that the <code>bcprov-jdk15on</code> dependencies in <code>fintech-java-sdk-core-3.1.0.jar</code> and <code>fintech-java-sdk-kdft-3.1.0.jar</code> will be version <code>1.69</code>.</p>\n<p>In addition, I also thought about creating a new project, keeping different JVMS, so that bcprov-jdk15on no longer conflicts, but new projects require new maintenance costs, and this approach does not feel good.</p>\n<h2>4. Questions</h2>\n<p>The above scene, what is the better solution, thank you~</p>\n"},{"tags":["javascript","java","graalvm","graaljs"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1687706020,"post_id":69263736,"comment_id":134970836,"body_markdown":"Given that the &quot;real&quot; JS import statement [needs a path](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import), that error is entirely expected. `import v4 from &#39;uuid&#39;;` looks like Node.js code, and you&#39;re not calling an exec for Node to handle this script. Either rewrite the JAva code to invoke Node.js, or rewrite the JS to use a proper `import` statement.","body":"Given that the &quot;real&quot; JS import statement <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import\" rel=\"nofollow noreferrer\">needs a path</a>, that error is entirely expected. <code>import v4 from &#39;uuid&#39;;</code> looks like Node.js code, and you&#39;re not calling an exec for Node to handle this script. Either rewrite the JAva code to invoke Node.js, or rewrite the JS to use a proper <code>import</code> statement."}],"answers":[{"tags":[],"owner":{"account_id":1883557,"reputation":316,"user_id":1791306,"display_name":"Plamen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687790490,"creation_date":1687685139,"answer_id":76549735,"question_id":69263736,"body_markdown":"In case somebody is still interested, the code below is tested with Eclipse running on Windows 10. (Note double escaped backslashes)\r\nOf course, you should have both [GraalVM][1] and [GraalJS][2] installed.\r\n\r\n    import java.io.IOException;\r\n    import org.graalvm.polyglot.*;\r\n    \r\n    public class testGraalJS {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t System.out.println(&quot;Hello Java!&quot;);\r\n    \t\t \r\n    \t\t String src = &quot;import {Foo} from &#39;C:\\\\\\\\Other\\\\\\\\foo.mjs&#39;;&quot; +\r\n                     &quot;const foo = new Foo();&quot; +\r\n                     &quot;console.log(&#39;Hello JavaScript!&#39;);&quot; +\r\n                     &quot;console.log(&#39;Square of 42 is: &#39; + foo.square(42));&quot;;\r\n    \t\t \r\n    \t\t Engine engine = Engine.newBuilder()\r\n    \t             .option(&quot;engine.WarnInterpreterOnly&quot;, &quot;false&quot;)\r\n    \t             .build();\r\n    \t\t \r\n    \t\t Context ctx = Context.newBuilder(&quot;js&quot;)\r\n    \t\t\t\t .engine(engine)\r\n    \t\t\t\t //.allowHostAccess(HostAccess.ALL) /*not needed for this example */\r\n    \t\t\t\t .allowHostClassLookup(className -&gt; true)\r\n    \t\t\t\t .allowIO(true)\r\n    \t\t\t\t .build();\r\n    \t\t \r\n    \t\t try {\r\n    \t\t\tSource source =  Source.newBuilder(&quot;js&quot;, src, &quot;script.mjs&quot;).build();\r\n    \t\t\tctx.eval(source);\r\n    \t\t} catch (IOException e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n             \r\n    \t}\r\n    \r\n    }\r\n\r\nWhere `foo.mjs` is located in folder `C:/Other` with the following content:\r\n\r\n    export class Foo {\r\n    \r\n        square(x) {\r\n            return x * x;\r\n        }\r\n    }\r\n\r\nOutput:\r\n\r\n    Hello Java!\r\n    Hello JavaScript!\r\n    Square of 42 is: 1764\r\n\r\nClasspath in Eclipse:\r\n\r\n[![Eclipse classpath][3]][3]\r\n\r\nWhere graal-sdk-xx.x.x.jar is downloaded separately from [maven][4] repo.\r\n\r\n[Docs][5].\r\n\r\n**Part 2.** In case you want to source Javascript from a file:\r\n\r\n    import java.io.*;\r\n    import java.io.IOException;\r\n    import org.graalvm.polyglot.*;\r\n    \r\n    public class testGraalJSfile {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSystem.out.println(&quot;Hello Java!&quot;);\r\n    \r\n    \t\t// Therefore, any ECMAScript module should have file name extension .mjs \r\n    \t\t// Option 1: \r\n    \t\t// Use source file with extension .mjs like \r\n    \t\t// File file = new File(&quot;C:\\\\Other&quot;, &quot;source.mjs&quot;);\r\n    \t\t//\r\n    \t\t// In case file is with extension .js see Option 2 below\r\n    \t\t\r\n    \t\tFile file = new File(&quot;C:\\\\Other&quot;, &quot;source.js&quot;);\r\n    \r\n    \t\tString language;\r\n    \t\tSource source = null;\r\n    \t\t\r\n    \t\t// Alternatively, the module Source should have Mime type &quot;application/javascript+module&quot; \r\n    \t\t// Option 2: \r\n    \t\t// add following line: Source.mimeType(&quot;application/javascript+module&quot;)\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\tlanguage = Source.findLanguage(file);\r\n    \t\t\tsource = Source.newBuilder(language, file)\r\n    \t\t\t\t\t.mimeType(&quot;application/javascript+module&quot;)\r\n    \t\t\t\t\t.build();\r\n    \t\t} catch (IOException e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\t\r\n    \t\tEngine eng = Engine.newBuilder()\r\n    \t             .option(&quot;engine.WarnInterpreterOnly&quot;, &quot;false&quot;)\r\n    \t             .build();\r\n    \t\t \r\n    \t\tContext ctx = Context.newBuilder(&quot;js&quot;)\r\n    \t\t\t\t .engine(eng)\r\n    \t\t\t\t .allowHostAccess(HostAccess.ALL)\r\n    \t\t\t\t .allowHostClassLookup(className -&gt; true)\r\n    \t\t\t\t .allowIO(true)\r\n    \t\t\t\t .build();\r\n    \t\t \r\n    \t\t ctx.eval(source);\r\n    \t\t ctx.close();\r\n             \r\n    \t}\r\n    \r\n    }\r\n\r\nSee [here][6].\r\n\r\n\r\n  [1]: https://www.graalvm.org/\r\n  [2]: https://www.graalvm.org/latest/reference-manual/js/\r\n  [3]: https://i.stack.imgur.com/R5xyH.png\r\n  [4]: https://mvnrepository.com/artifact/org.graalvm.sdk/graal-sdk\r\n  [5]: https://github.com/oracle/graaljs/blob/8044a00ed7d2015beecd8bdef07669650b8ec818/docs/user/Modules.md?plain=1#L135\r\n  [6]: https://www.graalvm.org/22.0/reference-manual/js/Modules/#ecmascript-modules-esm","title":"Use import in javascript being called from Java program through graalvm","body":"<p>In case somebody is still interested, the code below is tested with Eclipse running on Windows 10. (Note double escaped backslashes)\nOf course, you should have both <a href=\"https://www.graalvm.org/\" rel=\"nofollow noreferrer\">GraalVM</a> and <a href=\"https://www.graalvm.org/latest/reference-manual/js/\" rel=\"nofollow noreferrer\">GraalJS</a> installed.</p>\n<pre><code>import java.io.IOException;\nimport org.graalvm.polyglot.*;\n\npublic class testGraalJS {\n\n    public static void main(String[] args) {\n         System.out.println(&quot;Hello Java!&quot;);\n         \n         String src = &quot;import {Foo} from 'C:\\\\\\\\Other\\\\\\\\foo.mjs';&quot; +\n                 &quot;const foo = new Foo();&quot; +\n                 &quot;console.log('Hello JavaScript!');&quot; +\n                 &quot;console.log('Square of 42 is: ' + foo.square(42));&quot;;\n         \n         Engine engine = Engine.newBuilder()\n                 .option(&quot;engine.WarnInterpreterOnly&quot;, &quot;false&quot;)\n                 .build();\n         \n         Context ctx = Context.newBuilder(&quot;js&quot;)\n                 .engine(engine)\n                 //.allowHostAccess(HostAccess.ALL) /*not needed for this example */\n                 .allowHostClassLookup(className -&gt; true)\n                 .allowIO(true)\n                 .build();\n         \n         try {\n            Source source =  Source.newBuilder(&quot;js&quot;, src, &quot;script.mjs&quot;).build();\n            ctx.eval(source);\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n         \n    }\n\n}\n</code></pre>\n<p>Where <code>foo.mjs</code> is located in folder <code>C:/Other</code> with the following content:</p>\n<pre><code>export class Foo {\n\n    square(x) {\n        return x * x;\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Hello Java!\nHello JavaScript!\nSquare of 42 is: 1764\n</code></pre>\n<p>Classpath in Eclipse:</p>\n<p><a href=\"https://i.stack.imgur.com/R5xyH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/R5xyH.png\" alt=\"Eclipse classpath\" /></a></p>\n<p>Where graal-sdk-xx.x.x.jar is downloaded separately from <a href=\"https://mvnrepository.com/artifact/org.graalvm.sdk/graal-sdk\" rel=\"nofollow noreferrer\">maven</a> repo.</p>\n<p><a href=\"https://github.com/oracle/graaljs/blob/8044a00ed7d2015beecd8bdef07669650b8ec818/docs/user/Modules.md?plain=1#L135\" rel=\"nofollow noreferrer\">Docs</a>.</p>\n<p><strong>Part 2.</strong> In case you want to source Javascript from a file:</p>\n<pre><code>import java.io.*;\nimport java.io.IOException;\nimport org.graalvm.polyglot.*;\n\npublic class testGraalJSfile {\n\n    public static void main(String[] args) {\n        System.out.println(&quot;Hello Java!&quot;);\n\n        // Therefore, any ECMAScript module should have file name extension .mjs \n        // Option 1: \n        // Use source file with extension .mjs like \n        // File file = new File(&quot;C:\\\\Other&quot;, &quot;source.mjs&quot;);\n        //\n        // In case file is with extension .js see Option 2 below\n        \n        File file = new File(&quot;C:\\\\Other&quot;, &quot;source.js&quot;);\n\n        String language;\n        Source source = null;\n        \n        // Alternatively, the module Source should have Mime type &quot;application/javascript+module&quot; \n        // Option 2: \n        // add following line: Source.mimeType(&quot;application/javascript+module&quot;)\n        \n        try {\n            language = Source.findLanguage(file);\n            source = Source.newBuilder(language, file)\n                    .mimeType(&quot;application/javascript+module&quot;)\n                    .build();\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        \n        Engine eng = Engine.newBuilder()\n                 .option(&quot;engine.WarnInterpreterOnly&quot;, &quot;false&quot;)\n                 .build();\n         \n        Context ctx = Context.newBuilder(&quot;js&quot;)\n                 .engine(eng)\n                 .allowHostAccess(HostAccess.ALL)\n                 .allowHostClassLookup(className -&gt; true)\n                 .allowIO(true)\n                 .build();\n         \n         ctx.eval(source);\n         ctx.close();\n         \n    }\n\n}\n</code></pre>\n<p>See <a href=\"https://www.graalvm.org/22.0/reference-manual/js/Modules/#ecmascript-modules-esm\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":5397605,"reputation":587,"user_id":4298311,"accept_rate":25,"display_name":"Swapnil Pandey"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":466,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1687790490,"creation_date":1632201768,"question_id":69263736,"body_markdown":"I am trying out Graalvm for a use case and I was wondering if I can use import statements in the **javascript being called from java**. I have tried both:\r\n\r\n```\r\ncontext.eval(&quot;js&quot;, &quot;import v4 from &#39;uuid&#39;;var o = v4();&quot;);\r\n```\r\nwhich gives the error \r\n`Expected an operand but found import\r\nimport v4 from &#39;uuid&#39;;var o = v4();`\r\n\r\n\r\nand \r\n\r\ncreating a separate script containing \r\n```\r\nimport v4 from &#39;uuid&#39;;\r\nvar uu = v4();\r\n```\r\n\r\nthen running the script via\r\n```\r\nInputStream inputStream = Controller.class.getResourceAsStream(&quot;/script.js&quot;);\r\nString script = IOUtils.toString(inputStream, StandardCharsets.UTF_8);\r\ncontext.eval(&quot;js&quot;, script);\r\n```\r\n\r\nwhich returns the same error: `Expected an operand but found import\r\nimport v4 from &#39;uuid&#39;;`\r\n\r\nI went through the docs and it seems like it is possible. Can someone please guide me towards the correct approach?\r\n","title":"Use import in javascript being called from Java program through graalvm","body":"<p>I am trying out Graalvm for a use case and I was wondering if I can use import statements in the <strong>javascript being called from java</strong>. I have tried both:</p>\n<pre><code>context.eval(&quot;js&quot;, &quot;import v4 from 'uuid';var o = v4();&quot;);\n</code></pre>\n<p>which gives the error\n<code>Expected an operand but found import import v4 from 'uuid';var o = v4();</code></p>\n<p>and</p>\n<p>creating a separate script containing</p>\n<pre><code>import v4 from 'uuid';\nvar uu = v4();\n</code></pre>\n<p>then running the script via</p>\n<pre><code>InputStream inputStream = Controller.class.getResourceAsStream(&quot;/script.js&quot;);\nString script = IOUtils.toString(inputStream, StandardCharsets.UTF_8);\ncontext.eval(&quot;js&quot;, script);\n</code></pre>\n<p>which returns the same error: <code>Expected an operand but found import import v4 from 'uuid';</code></p>\n<p>I went through the docs and it seems like it is possible. Can someone please guide me towards the correct approach?</p>\n"},{"tags":["java","spring-integration"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681568327,"creation_date":1681483204,"answer_id":76016286,"question_id":76015958,"body_markdown":"Please, read this doc: https://docs.spring.io/spring-integration/docs/current/reference/html/message-routing.html#splitter.\r\n\r\nSo, whatever you say about your `List&lt;MiniJob&gt;` is really a splitter feature. And since there is one-to-one relationship between `Message` and its `payload`, you don&#39;t need any extra headers like you mention that `job-info-uuid`. The splitter will populate `CORRELATION_ID`, `SEQUENCE_SIZE`, and `SEQUENCE_NUMBER` headers into splitted item when you return your `List&lt;MiniJob&gt;` from `split(Function)`. \r\n\r\nThen when you move on into an `Aggregator` section you&#39;ll see a mirroring functionality where, by default` the aggregator really consults with those mentioned headers from splitter and collects groups respectively. \r\n\r\nWhat you will need in the end is just a custom:\r\n\r\n    .aggregate(a -&gt; a\r\n\t\t\t\t.outputProcessor((group) -&gt; group\r\n\r\nTo be build a new `JobInfo` from a released group.\r\n\r\nSee a `groupTimeout()` option for those groups which cannot be gathered in time. \r\n\r\nThere is also a `MessageGroupStoreReaper` to be scheduled externally since you talk about 24 hours: https://docs.spring.io/spring-integration/docs/current/reference/html/message-routing.html#reaper\r\n\r\nSo, in the end what you need is just something like this:\r\n\r\n\t\t\t\t\t.split(JobInfo.class, JobInfo::getMiniJobs)\r\n\t\t\t\t\t.channel(c -&gt; c.executor(...))\r\n\t\t\t\t\t.handle(...)\r\n\t\t\t\t\t.aggregate(a -&gt; a\r\n\t\t\t\t\t\t\t.outputProcessor((group) -&gt; {\r\n\t\t\t\t\t\t\t\tList&lt;MiniJob&gt; miniJobs =\r\n\t\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\t\t\t\t.getMessages()\r\n\t\t\t\t\t\t\t\t\t\t\t\t.stream()\r\n\t\t\t\t\t\t\t\t\t\t\t\t.map(m -&gt; (MiniJob) m.getPayload())\r\n\t\t\t\t\t\t\t\t\t\t\t\t.toList();\r\n\t\t\t\t\t\t\t\t...\r\n\t\t\t\t\t\t\t\treturn new JobInfo();\r\n\t\t\t\t\t\t\t}))\r\n","title":"Spring Integration Java DSL Aggregator by Example","body":"<p>Please, read this doc: <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/message-routing.html#splitter\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/docs/current/reference/html/message-routing.html#splitter</a>.</p>\n<p>So, whatever you say about your <code>List&lt;MiniJob&gt;</code> is really a splitter feature. And since there is one-to-one relationship between <code>Message</code> and its <code>payload</code>, you don't need any extra headers like you mention that <code>job-info-uuid</code>. The splitter will populate <code>CORRELATION_ID</code>, <code>SEQUENCE_SIZE</code>, and <code>SEQUENCE_NUMBER</code> headers into splitted item when you return your <code>List&lt;MiniJob&gt;</code> from <code>split(Function)</code>.</p>\n<p>Then when you move on into an <code>Aggregator</code> section you'll see a mirroring functionality where, by default` the aggregator really consults with those mentioned headers from splitter and collects groups respectively.</p>\n<p>What you will need in the end is just a custom:</p>\n<pre><code>.aggregate(a -&gt; a\n            .outputProcessor((group) -&gt; group\n</code></pre>\n<p>To be build a new <code>JobInfo</code> from a released group.</p>\n<p>See a <code>groupTimeout()</code> option for those groups which cannot be gathered in time.</p>\n<p>There is also a <code>MessageGroupStoreReaper</code> to be scheduled externally since you talk about 24 hours: <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/message-routing.html#reaper\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/docs/current/reference/html/message-routing.html#reaper</a></p>\n<p>So, in the end what you need is just something like this:</p>\n<pre><code>                .split(JobInfo.class, JobInfo::getMiniJobs)\n                .channel(c -&gt; c.executor(...))\n                .handle(...)\n                .aggregate(a -&gt; a\n                        .outputProcessor((group) -&gt; {\n                            List&lt;MiniJob&gt; miniJobs =\n                                    group\n                                            .getMessages()\n                                            .stream()\n                                            .map(m -&gt; (MiniJob) m.getPayload())\n                                            .toList();\n                            ...\n                            return new JobInfo();\n                        }))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11424132,"reputation":1,"user_id":8374739,"display_name":"Simon Syn Franchina"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687790352,"creation_date":1687790352,"answer_id":76557715,"question_id":76015958,"body_markdown":"groupTimeout works for me injecting a taskScheduler. I declared a bean in  a configuration class:\r\n\r\n    @Bean\r\n    public ThreadPoolTaskScheduler threadPoolTaskScheduler() {\r\n        ThreadPoolTaskScheduler threadPoolTaskScheduler = new TaskSchedulerBuilder().build();\r\n        threadPoolTaskScheduler.setThreadNamePrefix(&quot;threadPoolTaskScheduler &quot;);\r\n        return threadPoolTaskScheduler;\r\n    }\r\n\r\nthen i get it in Flow class with @Autowired annotation and inject it into .taskScheduler() aggregationSpec option\r\n\r\n    @Autowired\r\n    ThreadPoolTaskScheduler threadPoolTaskScheduler;\r\n    ...\r\n    return IntegrationFlows.from(MY_CHANNEL)\r\n            .aggregate(aggregatorSpec -&gt; aggregatorSpec\r\n                    .groupTimeout(10000L)\r\n                    .taskScheduler(this.dequeuerTaskScheduler)\r\n    ...\r\nHope this can help you","title":"Spring Integration Java DSL Aggregator by Example","body":"<p>groupTimeout works for me injecting a taskScheduler. I declared a bean in  a configuration class:</p>\n<pre><code>@Bean\npublic ThreadPoolTaskScheduler threadPoolTaskScheduler() {\n    ThreadPoolTaskScheduler threadPoolTaskScheduler = new TaskSchedulerBuilder().build();\n    threadPoolTaskScheduler.setThreadNamePrefix(&quot;threadPoolTaskScheduler &quot;);\n    return threadPoolTaskScheduler;\n}\n</code></pre>\n<p>then i get it in Flow class with @Autowired annotation and inject it into .taskScheduler() aggregationSpec option</p>\n<pre><code>@Autowired\nThreadPoolTaskScheduler threadPoolTaskScheduler;\n...\nreturn IntegrationFlows.from(MY_CHANNEL)\n        .aggregate(aggregatorSpec -&gt; aggregatorSpec\n                .groupTimeout(10000L)\n                .taskScheduler(this.dequeuerTaskScheduler)\n...\n</code></pre>\n<p>Hope this can help you</p>\n"}],"owner":{"account_id":6802882,"reputation":175,"user_id":5235665,"display_name":"hotmeatballsoup"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":236,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76016286,"answer_count":2,"score":0,"last_activity_date":1687790352,"creation_date":1681481147,"question_id":76015958,"body_markdown":"Spring Integration 5.x and Java (not XML) DSL here. I have the following object that will be on the message payload:\r\n```\r\n@Data // lombok is used for convenience\r\npublic class JobInfo {\r\n\r\n    private String trackingId;\r\n    private JobMeta metadata;\r\n    private List&lt;MiniJob&gt; miniJobs;\r\n    // lots of other fields as well (outside of scope)\r\n\r\n}\r\n\r\n@Data\r\npublic class MiniJob {\r\n\r\n    private MiniJobStatus status;\r\n    // lots of other fields as well (outside of scope)\r\n\r\n}\r\n\r\n@Data\r\npublic class MiniJobStatus {\r\n\r\n    private String label; // ex: RECEIVED, IN_PROGRESS, COMPLETED, FAILED, etc.\r\n    // lots of other fields as well (outside of scope)\r\n\r\n}\r\n```\r\n\r\nIn my integration flow, these `MiniJobs` are created and sent out over various channels/pathways. I need to implement an `Aggregator` that will wait until all of the `MiniJobs` for a given `JobInfo` are received. Once they are all received I need the aggregator to create a new `JobInfo` out of them and send that `JobInfo` along.\r\n\r\n**Every `JobInfo` consists of exactly 4 `MiniJobs`.** So I&#39;m thinking that when I create each `MiniJob` earlier in the flow, I could add a `job-info-uuid` header on their respective `Messages`. That way, when the `Aggregator` receives 4 `Messages` that all have matching `job-info-uuid` header values, it uses those 4 messages to create the `JobInfo` from.\r\n\r\nSomewhat out of scope for this, but if someone could provide it in their solution I&#39;d be eternally grateful, would be to introduce the concept of a `MiniJob` _expiry_. Meaning if the `Aggregator` doesn&#39;t receive all 4 `job-info-uuids` within, say, 24 hours, it will delete/purge them from whatever it uses to store messages that are awaiting aggregation.\r\n\r\nI&#39;ve been pouring over the Aggregator docs and looked at countless examples, but I&#39;m just not seeing the forrest through the trees here. Do I create a `Consumer&lt;AggregatorSpec&gt;` implementation and define all this aggregation logic inside its `accept(...)` method, and then subsequently, add it to my flow like so:\r\n```\r\n.aggregate(myAggregatorSpecConsumer)\r\n```\r\n\r\nOr is that the wrong approach? If anyone could use my example above and help me craft that into a working example, even using pseudo-code, I&#39;d appreciate it so much! Thanks in advance!","title":"Spring Integration Java DSL Aggregator by Example","body":"<p>Spring Integration 5.x and Java (not XML) DSL here. I have the following object that will be on the message payload:</p>\n<pre><code>@Data // lombok is used for convenience\npublic class JobInfo {\n\n    private String trackingId;\n    private JobMeta metadata;\n    private List&lt;MiniJob&gt; miniJobs;\n    // lots of other fields as well (outside of scope)\n\n}\n\n@Data\npublic class MiniJob {\n\n    private MiniJobStatus status;\n    // lots of other fields as well (outside of scope)\n\n}\n\n@Data\npublic class MiniJobStatus {\n\n    private String label; // ex: RECEIVED, IN_PROGRESS, COMPLETED, FAILED, etc.\n    // lots of other fields as well (outside of scope)\n\n}\n</code></pre>\n<p>In my integration flow, these <code>MiniJobs</code> are created and sent out over various channels/pathways. I need to implement an <code>Aggregator</code> that will wait until all of the <code>MiniJobs</code> for a given <code>JobInfo</code> are received. Once they are all received I need the aggregator to create a new <code>JobInfo</code> out of them and send that <code>JobInfo</code> along.</p>\n<p><strong>Every <code>JobInfo</code> consists of exactly 4 <code>MiniJobs</code>.</strong> So I'm thinking that when I create each <code>MiniJob</code> earlier in the flow, I could add a <code>job-info-uuid</code> header on their respective <code>Messages</code>. That way, when the <code>Aggregator</code> receives 4 <code>Messages</code> that all have matching <code>job-info-uuid</code> header values, it uses those 4 messages to create the <code>JobInfo</code> from.</p>\n<p>Somewhat out of scope for this, but if someone could provide it in their solution I'd be eternally grateful, would be to introduce the concept of a <code>MiniJob</code> <em>expiry</em>. Meaning if the <code>Aggregator</code> doesn't receive all 4 <code>job-info-uuids</code> within, say, 24 hours, it will delete/purge them from whatever it uses to store messages that are awaiting aggregation.</p>\n<p>I've been pouring over the Aggregator docs and looked at countless examples, but I'm just not seeing the forrest through the trees here. Do I create a <code>Consumer&lt;AggregatorSpec&gt;</code> implementation and define all this aggregation logic inside its <code>accept(...)</code> method, and then subsequently, add it to my flow like so:</p>\n<pre><code>.aggregate(myAggregatorSpecConsumer)\n</code></pre>\n<p>Or is that the wrong approach? If anyone could use my example above and help me craft that into a working example, even using pseudo-code, I'd appreciate it so much! Thanks in advance!</p>\n"},{"tags":["java","spring-boot","dependency-injection"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1687788159,"post_id":76557385,"comment_id":134981644,"body_markdown":"I appreciate the attempt at an MCVE, but you seem to have left out the code that actually generates the error. Does your original `ThirdService` have a `getId()` method which is called in `FirstService`&#39;s constructor?","body":"I appreciate the attempt at an MCVE, but you seem to have left out the code that actually generates the error. Does your original <code>ThirdService</code> have a <code>getId()</code> method which is called in <code>FirstService</code>&#39;s constructor?"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1687788357,"post_id":76557385,"comment_id":134981692,"body_markdown":"Are you mocking the services? Returning null from method calls of mocks is perfectly normal, when you have not mocked that particular method - `ThirdService.getId()` in your case.","body":"Are you mocking the services? Returning null from method calls of mocks is perfectly normal, when you have not mocked that particular method - <code>ThirdService.getId()</code> in your case."},{"owner":{"account_id":5596641,"reputation":1936,"user_id":4434202,"accept_rate":54,"display_name":"Akinn"},"score":0,"creation_date":1687789153,"post_id":76557385,"comment_id":134981880,"body_markdown":"@Jorn you&#39;re right, I&#39;ve added more details. Indeed, in FirstService&#39;s constructor I use some of the methods of SecondService: those in turn use some of the methods of ThirdService.","body":"@Jorn you&#39;re right, I&#39;ve added more details. Indeed, in FirstService&#39;s constructor I use some of the methods of SecondService: those in turn use some of the methods of ThirdService."},{"owner":{"account_id":5596641,"reputation":1936,"user_id":4434202,"accept_rate":54,"display_name":"Akinn"},"score":0,"creation_date":1687789170,"post_id":76557385,"comment_id":134981886,"body_markdown":"@Chaosfire All tests are failing, even those that have nothing to do with the services involved.","body":"@Chaosfire All tests are failing, even those that have nothing to do with the services involved."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1687789346,"post_id":76557385,"comment_id":134981932,"body_markdown":"I&#39;m not convinced that this code shows the full problem. The error mentions a `toString()` invocation *directly* on a `thirdService.getId()` call. You need to figure out where this happens. Perhaps the stack trace of the exception can help?","body":"I&#39;m not convinced that this code shows the full problem. The error mentions a <code>toString()</code> invocation <i>directly</i> on a <code>thirdService.getId()</code> call. You need to figure out where this happens. Perhaps the stack trace of the exception can help?"},{"owner":{"account_id":5596641,"reputation":1936,"user_id":4434202,"accept_rate":54,"display_name":"Akinn"},"score":0,"creation_date":1687789791,"post_id":76557385,"comment_id":134982031,"body_markdown":"Sorry. I&#39;ve updated the code. Check again please, that should be it: the error occurs in SecondService when it is making use of the method of ThirdService.","body":"Sorry. I&#39;ve updated the code. Check again please, that should be it: the error occurs in SecondService when it is making use of the method of ThirdService."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1687789893,"post_id":76557385,"comment_id":134982052,"body_markdown":"@Akinn That&#39;s to be expected, creating the application context fails for every test, because instantiating `FirstService` fails every time. You need to figure out why `thirdService.getId()` returns null. That&#39;s why i asked, if you are mocking the services for your tests.","body":"@Akinn That&#39;s to be expected, creating the application context fails for every test, because instantiating <code>FirstService</code> fails every time. You need to figure out why <code>thirdService.getId()</code> returns null. That&#39;s why i asked, if you are mocking the services for your tests."},{"owner":{"account_id":5596641,"reputation":1936,"user_id":4434202,"accept_rate":54,"display_name":"Akinn"},"score":0,"creation_date":1687790381,"post_id":76557385,"comment_id":134982188,"body_markdown":"I see ThirdService is always mocked in pre-existing tests and all of them working perfectly until I&#39;ve added FirstService. Before that, ThirdService and SecondService existed and worked fine together with their test. I do not understand what this FirstService class introduced that breaks all tests though: I didn&#39;t even wrote the test class for FirstService yet... I rerun everything without FirstService and indeed it work.","body":"I see ThirdService is always mocked in pre-existing tests and all of them working perfectly until I&#39;ve added FirstService. Before that, ThirdService and SecondService existed and worked fine together with their test. I do not understand what this FirstService class introduced that breaks all tests though: I didn&#39;t even wrote the test class for FirstService yet... I rerun everything without FirstService and indeed it work."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1687791339,"post_id":76557385,"comment_id":134982437,"body_markdown":"@Akinn Before adding `FirstService`, `SecondService.getId()` was never invoked, thus `ThirdService.getId()` was never invoked and tests were fine. After adding `FirstService`, `ThirdService.getId()` eventually is invoked and this leads to NPE. Since you say the service is mocked, you need to mock the behaviour of `ThirdService.getId()`, since returning `null` is the default behaviour for method invocations of mocks.","body":"@Akinn Before adding <code>FirstService</code>, <code>SecondService.getId()</code> was never invoked, thus <code>ThirdService.getId()</code> was never invoked and tests were fine. After adding <code>FirstService</code>, <code>ThirdService.getId()</code> eventually is invoked and this leads to NPE. Since you say the service is mocked, you need to mock the behaviour of <code>ThirdService.getId()</code>, since returning <code>null</code> is the default behaviour for method invocations of mocks."}],"answers":[{"comments":[{"owner":{"account_id":5596641,"reputation":1936,"user_id":4434202,"accept_rate":54,"display_name":"Akinn"},"score":0,"creation_date":1687790846,"post_id":76557705,"comment_id":134982321,"body_markdown":"Thanks. I&#39;ve tried this approach but doesn&#39;t seem to solve the issue. I still get the same error: Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;firstService&#39;: Invocation of init method failed. Caused by: java.lang.NullPointerException: Cannot invoke &quot;java.util.UUID.toString()&quot; because the return value of &quot;xxx.xxx.xxx.ThirdService.getId()&quot; is null","body":"Thanks. I&#39;ve tried this approach but doesn&#39;t seem to solve the issue. I still get the same error: Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;firstService&#39;: Invocation of init method failed. Caused by: java.lang.NullPointerException: Cannot invoke &quot;java.util.UUID.toString()&quot; because the return value of &quot;xxx.xxx.xxx.ThirdService.getId()&quot; is null"},{"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"score":0,"creation_date":1687791062,"post_id":76557705,"comment_id":134982370,"body_markdown":"If you are mocking ThirdService in your tests, please ensure that the mock returns a non-null UUID when getId() is called. It&#39;s not an error of bean init anymore at least","body":"If you are mocking ThirdService in your tests, please ensure that the mock returns a non-null UUID when getId() is called. It&#39;s not an error of bean init anymore at least"}],"tags":[],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687790274,"creation_date":1687790274,"answer_id":76557705,"question_id":76557385,"body_markdown":"At the time of `SecondService` construction, the `ThirdService` bean is not been fully initialized yet, and it&#39;s generally not a good idea to perform logic in constructors of beans that depends on other beans. \r\n\r\nYou may want to use a `@PostConstruct` method to perform initialization after all dependencies have been injected and are ready to use:\r\n```java\r\n@Service\r\npublic class FirstService {\r\n\r\n    private final SecondService secondService;\r\n    private Client client;\r\n\r\n    public FirstService(SecondService secondService) {\r\n        this.secondService = secondService;\r\n    }\r\n\r\n    @PostConstruct\r\n    public void init() {\r\n        this.client = Client.builder().setId(secondService.getId()).build();\r\n    }\r\n}\r\n```","title":"BeanInstantiationException when injecting @Service into other @Service","body":"<p>At the time of <code>SecondService</code> construction, the <code>ThirdService</code> bean is not been fully initialized yet, and it's generally not a good idea to perform logic in constructors of beans that depends on other beans.</p>\n<p>You may want to use a <code>@PostConstruct</code> method to perform initialization after all dependencies have been injected and are ready to use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class FirstService {\n\n    private final SecondService secondService;\n    private Client client;\n\n    public FirstService(SecondService secondService) {\n        this.secondService = secondService;\n    }\n\n    @PostConstruct\n    public void init() {\n        this.client = Client.builder().setId(secondService.getId()).build();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5596641,"reputation":1936,"user_id":4434202,"accept_rate":54,"display_name":"Akinn"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687790274,"creation_date":1687787932,"question_id":76557385,"body_markdown":"I have the following `@Service` class to my code:\r\n\r\n    @Service\r\n    public class FirstService {\r\n    \r\n        private final SecondService secondService;\r\n        private final Client client;\r\n    \r\n        public FirstService(SecondService secondService) {\r\n            this.secondService = secondService;\r\n            this.client = Client.builder().setId(secondService.getId()).build();\r\n        }\r\n    }\r\n    \r\n    \r\n       \r\n    \r\n     @Service\r\n     public class SecondService {\r\n          \r\n        private final ThirdService thirdService;\r\n        \r\n        public SecondService(ThirdService thirdService) {\r\n            this.thirdService = thirdService;\r\n        }\r\n        \r\n        public Id getId() {\r\n           return new Id(thirdService.getId().toString());\r\n        }\r\n    }\r\n\r\n`ThirdService` is a `@Component` itself.\r\n\r\n    @Component\r\n    @RequiredArgsContructor\r\n    public class ThirdService {\r\n    \r\n        public UUID getId() {\r\n           return UUID.randomUUID();\r\n        }\r\n    }\r\n        \r\n\r\nSince I&#39;ve added `FirstService`, all my tests start failing with the error:\r\n\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [xxx.xxx.xxx.FirstService]: Constructor threw exception\r\n    Caused by: java.lang.NullPointerException: Cannot invoke &quot;java.util.UUID.toString()&quot; because the return value of &quot;xxx.xxx.xxx.ThirdService.getId()&quot; is null\r\n\r\nBefore that, tests worked fine. I&#39;m guessing there is something wrong with how I&#39;ve created `FirstService` but can&#39;t see what: looks like some error when injecting `SecondService` Can someone please help?\r\n\r\nI&#39;m using Spring boot 3.\r\n","title":"BeanInstantiationException when injecting @Service into other @Service","body":"<p>I have the following <code>@Service</code> class to my code:</p>\n<pre><code>@Service\npublic class FirstService {\n\n    private final SecondService secondService;\n    private final Client client;\n\n    public FirstService(SecondService secondService) {\n        this.secondService = secondService;\n        this.client = Client.builder().setId(secondService.getId()).build();\n    }\n}\n\n\n   \n\n @Service\n public class SecondService {\n      \n    private final ThirdService thirdService;\n    \n    public SecondService(ThirdService thirdService) {\n        this.thirdService = thirdService;\n    }\n    \n    public Id getId() {\n       return new Id(thirdService.getId().toString());\n    }\n}\n</code></pre>\n<p><code>ThirdService</code> is a <code>@Component</code> itself.</p>\n<pre><code>@Component\n@RequiredArgsContructor\npublic class ThirdService {\n\n    public UUID getId() {\n       return UUID.randomUUID();\n    }\n}\n    \n</code></pre>\n<p>Since I've added <code>FirstService</code>, all my tests start failing with the error:</p>\n<pre><code>Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [xxx.xxx.xxx.FirstService]: Constructor threw exception\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;java.util.UUID.toString()&quot; because the return value of &quot;xxx.xxx.xxx.ThirdService.getId()&quot; is null\n</code></pre>\n<p>Before that, tests worked fine. I'm guessing there is something wrong with how I've created <code>FirstService</code> but can't see what: looks like some error when injecting <code>SecondService</code> Can someone please help?</p>\n<p>I'm using Spring boot 3.</p>\n"},{"tags":["java","spring","spring-data-rest","cglib"],"answers":[{"comments":[{"owner":{"account_id":556436,"reputation":2953,"user_id":300986,"accept_rate":89,"display_name":"bmauter"},"score":0,"creation_date":1687900354,"post_id":76557572,"comment_id":135001347,"body_markdown":"Nice! I don’t have access to that project anymore since I’ve switched employers. I love the approach though and I’m going to mark this answered until someone else objects. Nice to see a newcomer here. Welcome!","body":"Nice! I don’t have access to that project anymore since I’ve switched employers. I love the approach though and I’m going to mark this answered until someone else objects. Nice to see a newcomer here. Welcome!"}],"tags":[],"owner":{"account_id":24364052,"reputation":26,"user_id":18298024,"display_name":"Goll"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687789205,"creation_date":1687789205,"answer_id":76557572,"question_id":70073612,"body_markdown":"I had the same problem as you and I solved it by creating a function `findByIdOrThrowError(Integer id)` that get the `Customer` from the Controller, and check if there is no result to throw an error with `.orElseThrow()`.\r\n\r\nThen you call the function inside your `linkTo()`.","title":"How to use WebMvcLinkBuilder with repository&#39;s findById?","body":"<p>I had the same problem as you and I solved it by creating a function <code>findByIdOrThrowError(Integer id)</code> that get the <code>Customer</code> from the Controller, and check if there is no result to throw an error with <code>.orElseThrow()</code>.</p>\n<p>Then you call the function inside your <code>linkTo()</code>.</p>\n"}],"owner":{"account_id":556436,"reputation":2953,"user_id":300986,"accept_rate":89,"display_name":"bmauter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76557572,"answer_count":1,"score":1,"last_activity_date":1687789205,"creation_date":1637623819,"question_id":70073612,"body_markdown":"I&#39;m trying to use Spring Data Rest to implement a full set of services for about 60 entities.  Right now, I&#39;m getting by with just letting Spring use my repositories rather than implementing controllers, which is great!\r\n\r\nThe data I&#39;m having to model isn&#39;t ideal--I&#39;d prefer to have `customerId` come as part of the `order` object.\r\n\r\n```json\r\n{\r\n  &quot;tenantId&quot;: 42,\r\n  &quot;id&quot;: &quot;00000001&quot;,\r\n  &quot;customer&quot;: {\r\n    &quot;tenantId&quot;: 42,\r\n    &quot;id&quot;: &quot;CUST001&quot;,\r\n    &quot;name&quot;: &quot;Arthur Dent&quot;\r\n  }\r\n}\r\n```\r\n\r\nI have the ID for a related entity as a property on my JSON object.\r\n\r\n```java\r\npublic class Order {\r\n  Long tenantId;\r\n  String id;\r\n  String customerId;\r\n}\r\n```\r\n\r\nI don&#39;t really want to pull the full `Customer` entity and all of the other related entities and place them as members on my Order object.  Instead, I&#39;d just like to add some links to the `_links` collection.\r\n\r\nI believe I&#39;ve figured out `WebMvcLinkBuilder` finally and I have the basic idea in place.  However, `JpaRepository.findById` returns a `java.util.Optional`.\r\n\r\n```java\r\n@Bean\r\npublic RepresentationModelProcessor&lt;EntityModel&lt;Order&gt;&gt; orderProcessor() {\r\n  return new RepresentationModelProcessor&lt;EntityModel&lt;Order&gt;&gt;() {\r\n    @Override\r\n    public EntityModel&lt;Order&gt; process(final EntityModel&lt;Order&gt; model) {\r\n      final CustomerRepository controller = WebMvcLinkBuilder.methodOn(CustomerRepository);\r\n      final CustomerId id = new CustomerId(model.getContent().getTenantId(), model.getContent().getCustomerId());\r\n      model.add(WebMvcLinkBuilder.linkTo(controller.findById(id)).withRel(&quot;customer&quot;));\r\n      return model;\r\n    }\r\n  };\r\n}\r\n```\r\n\r\nThe error I get is:\r\n\r\n&gt; Could not generate CGLIB subclass of class java.util.Optional: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: Cannot subclass final class java.util.Optional\r\n\r\nHow can I add a link to my resource?","title":"How to use WebMvcLinkBuilder with repository&#39;s findById?","body":"<p>I'm trying to use Spring Data Rest to implement a full set of services for about 60 entities.  Right now, I'm getting by with just letting Spring use my repositories rather than implementing controllers, which is great!</p>\n<p>The data I'm having to model isn't ideal--I'd prefer to have <code>customerId</code> come as part of the <code>order</code> object.</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;tenantId&quot;: 42,\n  &quot;id&quot;: &quot;00000001&quot;,\n  &quot;customer&quot;: {\n    &quot;tenantId&quot;: 42,\n    &quot;id&quot;: &quot;CUST001&quot;,\n    &quot;name&quot;: &quot;Arthur Dent&quot;\n  }\n}\n</code></pre>\n<p>I have the ID for a related entity as a property on my JSON object.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Order {\n  Long tenantId;\n  String id;\n  String customerId;\n}\n</code></pre>\n<p>I don't really want to pull the full <code>Customer</code> entity and all of the other related entities and place them as members on my Order object.  Instead, I'd just like to add some links to the <code>_links</code> collection.</p>\n<p>I believe I've figured out <code>WebMvcLinkBuilder</code> finally and I have the basic idea in place.  However, <code>JpaRepository.findById</code> returns a <code>java.util.Optional</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic RepresentationModelProcessor&lt;EntityModel&lt;Order&gt;&gt; orderProcessor() {\n  return new RepresentationModelProcessor&lt;EntityModel&lt;Order&gt;&gt;() {\n    @Override\n    public EntityModel&lt;Order&gt; process(final EntityModel&lt;Order&gt; model) {\n      final CustomerRepository controller = WebMvcLinkBuilder.methodOn(CustomerRepository);\n      final CustomerId id = new CustomerId(model.getContent().getTenantId(), model.getContent().getCustomerId());\n      model.add(WebMvcLinkBuilder.linkTo(controller.findById(id)).withRel(&quot;customer&quot;));\n      return model;\n    }\n  };\n}\n</code></pre>\n<p>The error I get is:</p>\n<blockquote>\n<p>Could not generate CGLIB subclass of class java.util.Optional: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: Cannot subclass final class java.util.Optional</p>\n</blockquote>\n<p>How can I add a link to my resource?</p>\n"},{"tags":["c#","java","image-processing"],"answers":[{"comments":[{"owner":{"account_id":1590410,"reputation":1573,"user_id":1473841,"accept_rate":65,"display_name":"tnchalise"},"score":0,"creation_date":1344457005,"post_id":11872436,"comment_id":15795303,"body_markdown":"I am so far suggested to find vertical and horizontal edges, but indeed where is the solution because the lines from the edges are neither completely vertical nor completely horizontal.","body":"I am so far suggested to find vertical and horizontal edges, but indeed where is the solution because the lines from the edges are neither completely vertical nor completely horizontal."},{"owner":{"account_id":682132,"reputation":1994,"user_id":527304,"accept_rate":89,"display_name":"TheBoss"},"score":0,"creation_date":1344457423,"post_id":11872436,"comment_id":15795481,"body_markdown":"Canny&#39;s edge detector algorithm is capable of detecting edges regardless of whether they are horizontal/vertical. If you just want to detect horizontal/vertical edges you can run 2 filters across the image; the matrices are: [0, 1, 0; 0, 1, 0; 0, 1, 0] for vertical detection and [0, 0, 0; 1, 1, 1; 0, 0, 0] for horizontal edges. If it&#39;s more information about Canny&#39;s algorithm that you need, then http://en.wikipedia.org/wiki/Canny_edge_detector is a good source or I&#39;d recommend a book called &quot;Digital Image Processing&quot; by Gonzalez and Woods.","body":"Canny&#39;s edge detector algorithm is capable of detecting edges regardless of whether they are horizontal/vertical. If you just want to detect horizontal/vertical edges you can run 2 filters across the image; the matrices are: [0, 1, 0; 0, 1, 0; 0, 1, 0] for vertical detection and [0, 0, 0; 1, 1, 1; 0, 0, 0] for horizontal edges. If it&#39;s more information about Canny&#39;s algorithm that you need, then <a href=\"http://en.wikipedia.org/wiki/Canny_edge_detector\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Canny_edge_detector</a> is a good source or I&#39;d recommend a book called &quot;Digital Image Processing&quot; by Gonzalez and Woods."},{"owner":{"account_id":682132,"reputation":1994,"user_id":527304,"accept_rate":89,"display_name":"TheBoss"},"score":0,"creation_date":1344457564,"post_id":11872436,"comment_id":15795536,"body_markdown":"Be aware that these filters are to be used for grayscale images only, not colour. You should first convert the images to grayscale before operating on them.","body":"Be aware that these filters are to be used for grayscale images only, not colour. You should first convert the images to grayscale before operating on them."},{"owner":{"account_id":1590410,"reputation":1573,"user_id":1473841,"accept_rate":65,"display_name":"tnchalise"},"score":0,"creation_date":1344457880,"post_id":11872436,"comment_id":15795682,"body_markdown":"canny for the best, i appreciate that. What would be my next possible step to find out the lines exactly (heart, fate) because edge detected image also include small patches too.","body":"canny for the best, i appreciate that. What would be my next possible step to find out the lines exactly (heart, fate) because edge detected image also include small patches too."},{"owner":{"account_id":682132,"reputation":1994,"user_id":527304,"accept_rate":89,"display_name":"TheBoss"},"score":0,"creation_date":1344466455,"post_id":11872436,"comment_id":15798723,"body_markdown":"For the small patches you can configure the Canny algorithm - play around with the variables. As for the palm reading, that is your project so you must work that out yourself ;)","body":"For the small patches you can configure the Canny algorithm - play around with the variables. As for the palm reading, that is your project so you must work that out yourself ;)"}],"tags":[],"owner":{"account_id":682132,"reputation":1994,"user_id":527304,"accept_rate":89,"display_name":"TheBoss"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1344456875,"creation_date":1344456875,"answer_id":11872436,"question_id":11872411,"body_markdown":"Look up Canny&#39;s edge detector algorithm. It&#39;s arguably the best edge detector out there thus far.","title":"Edge detection for palm reader","body":"<p>Look up Canny's edge detector algorithm. It's arguably the best edge detector out there thus far.</p>\n"}],"owner":{"account_id":1590410,"reputation":1573,"user_id":1473841,"accept_rate":65,"display_name":"tnchalise"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":690,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":11872436,"answer_count":1,"score":1,"last_activity_date":1687788928,"creation_date":1344456748,"question_id":11872411,"body_markdown":"I am totally strange to how the lines (heart line, fate line) of palm are detected so that I can access then to analyse. I am going to build a program that analyses palms and predicts accordingly.  \r\nIt&#39;s totally edge detection but how can I find the separate lines? Any suggestions?","title":"Edge detection for palm reader","body":"<p>I am totally strange to how the lines (heart line, fate line) of palm are detected so that I can access then to analyse. I am going to build a program that analyses palms and predicts accordingly.<br>\nIt's totally edge detection but how can I find the separate lines? Any suggestions?</p>\n"},{"tags":["java","android","kotlin"],"answers":[{"comments":[{"owner":{"account_id":2296790,"reputation":91,"user_id":2018042,"display_name":"Microkid"},"score":0,"creation_date":1687789312,"post_id":76557523,"comment_id":134981921,"body_markdown":"So If I start a scan I can do this still (WiFiManager &gt; startscan)?","body":"So If I start a scan I can do this still (WiFiManager &gt; startscan)?"},{"owner":{"account_id":11483863,"reputation":23,"user_id":8417406,"display_name":"Crawk"},"score":0,"creation_date":1687789589,"post_id":76557523,"comment_id":134981989,"body_markdown":"You should can.","body":"You should can."},{"owner":{"account_id":2296790,"reputation":91,"user_id":2018042,"display_name":"Microkid"},"score":0,"creation_date":1687795369,"post_id":76557523,"comment_id":134983356,"body_markdown":"It just seems odd that is startscan is the way to go why its depreciated and just controlled differently. However running a quick test is not returning any networks.","body":"It just seems odd that is startscan is the way to go why its depreciated and just controlled differently. However running a quick test is not returning any networks."}],"tags":[],"owner":{"account_id":11483863,"reputation":23,"user_id":8417406,"display_name":"Crawk"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687788870,"creation_date":1687788870,"answer_id":76557523,"question_id":76557445,"body_markdown":"Starting from Android 9 (API level 28), accessing a list of available Wi-Fi networks without starting a scan is restricted for privacy and security reasons.","title":"How to get a list of wifi networks in an Android App","body":"<p>Starting from Android 9 (API level 28), accessing a list of available Wi-Fi networks without starting a scan is restricted for privacy and security reasons.</p>\n"}],"owner":{"account_id":2296790,"reputation":91,"user_id":2018042,"display_name":"Microkid"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687788870,"creation_date":1687788320,"question_id":76557445,"body_markdown":"I&#39;m trying to include a list of WiFi networks in an Android App to allow the user to select one to connect a physical device to. In the past I have used `WiFiManager` class startscan &amp; scanresults to do this. But startscan is now deprecated (and doesn&#39;t seem to work for me). I have looked around but can not seem to find any alternatives to this.\r\n\r\nHow can I get a list of WiFi networks without using deprecated api calls? \r\n\r\nIf the above is not possible can I search for a specific network - for example one that starts ABCD? ","title":"How to get a list of wifi networks in an Android App","body":"<p>I'm trying to include a list of WiFi networks in an Android App to allow the user to select one to connect a physical device to. In the past I have used <code>WiFiManager</code> class startscan &amp; scanresults to do this. But startscan is now deprecated (and doesn't seem to work for me). I have looked around but can not seem to find any alternatives to this.</p>\n<p>How can I get a list of WiFi networks without using deprecated api calls?</p>\n<p>If the above is not possible can I search for a specific network - for example one that starts ABCD?</p>\n"},{"tags":["java","server","client","nio"],"comments":[{"owner":{"account_id":6388606,"reputation":589,"user_id":4955612,"accept_rate":60,"display_name":"Andrew Kor"},"score":0,"creation_date":1687789501,"post_id":76557444,"comment_id":134981965,"body_markdown":"@user16320675 yup that fixed it!","body":"@user16320675 yup that fixed it!"},{"owner":{"account_id":6388606,"reputation":589,"user_id":4955612,"accept_rate":60,"display_name":"Andrew Kor"},"score":0,"creation_date":1687791440,"post_id":76557444,"comment_id":134982471,"body_markdown":"@user16320675 Hi would you mind with one more question? The server accepts the connection made and then writes to the client, saying &quot;Connection established&quot;. For some reason though, the server attempts to write a second time. Since the array of `byte[] data` is null, the Thread throws an exception. How is that possible? It&#39;s like the first `write` key is never removed even though `key.remove` is called (I removed `key.interestOps(OP_READ)` in the `write` method. This is for sure the issue, since when I leave the `OP_read`, it just keeps reading an infinite number of times.","body":"@user16320675 Hi would you mind with one more question? The server accepts the connection made and then writes to the client, saying &quot;Connection established&quot;. For some reason though, the server attempts to write a second time. Since the array of <code>byte[] data</code> is null, the Thread throws an exception. How is that possible? It&#39;s like the first <code>write</code> key is never removed even though <code>key.remove</code> is called (I removed <code>key.interestOps(OP_READ)</code> in the <code>write</code> method. This is for sure the issue, since when I leave the <code>OP_read</code>, it just keeps reading an infinite number of times."}],"owner":{"account_id":6388606,"reputation":589,"user_id":4955612,"accept_rate":60,"display_name":"Andrew Kor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687788319,"creation_date":1687788319,"question_id":76557444,"body_markdown":"Using [this example][1] of a non-blocking NIO server, the non-blocking client is able to connect to the non-blocking NIO server. Even when the server stops running, the client repeats &quot;broken pipe&quot;, which indicates that the client WAS connected. On the server-side, however, the `accept` `SelectionKey` is never &quot;found&quot; (i.e, in the loop, the `accept` method is never called). How is this possible? I even send requests to the server while the client is connected and the `read` and `write` methods aren&#39;t called either. \r\n\r\nMy code below is almost the same as the example:\r\n\r\nSERVER\r\n\r\n\r\n     package GameEngine;\r\n    \r\n    import GameEngine.PlayerActions.PlayerAction;\r\n    \r\n    import java.io.DataInputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.net.*;\r\n    \r\n    import java.nio.*;\r\n    import java.nio.channels.SelectionKey;\r\n    import java.nio.channels.Selector;\r\n    import java.nio.channels.ServerSocketChannel;\r\n    import java.nio.channels.SocketChannel;\r\n    import java.util.ArrayList;\r\n    import java.util.HashMap;\r\n    import java.util.Iterator;\r\n    import java.util.Map;\r\n    \r\n    \r\n    /**\r\n     * Receives input from clients\r\n     */\r\n    public class InputReceiver extends Thread{ //  A separate thread.\r\n    \r\n        final String HOSTNAME = &quot;localhost&quot;;\r\n        final int PORT = 6666;\r\n        private ServerSocketChannel serverChannel;\r\n        private Selector selector;\r\n        public static HashMap&lt;String,ArrayList&lt;PlayerAction&gt;&gt; inputsForNextTick = new HashMap&lt;String, ArrayList&lt;PlayerAction&gt;&gt;();\r\n        private Map&lt;SocketChannel, byte[]&gt; dataTracking = new HashMap&lt;&gt;();\r\n        private Map&lt;SocketAddress,SocketChannel&gt; clientSocketAddressToSocketChannel = new HashMap&lt;&gt;();\r\n        private static boolean tickHappened = false;\r\n    \r\n        public static void notifyOfTick(){\r\n            tickHappened = true;\r\n        }\r\n    \r\n    \r\n        public void run(){\r\n                try {\r\n                    System.out.println(&quot;Registering server..&quot;);\r\n                    serverChannel = ServerSocketChannel.open();\r\n                    serverChannel.configureBlocking(false);\r\n                    serverChannel.socket().bind(new InetSocketAddress(HOSTNAME, PORT));\r\n                    selector = Selector.open();\r\n                    serverChannel.register(selector, SelectionKey.OP_ACCEPT);\r\n                    System.out.println(&quot;Server registered.&quot;);\r\n                    while (!Thread.currentThread().isInterrupted()) {\r\n    \r\n                        Iterator&lt;SelectionKey&gt; keys = selector.selectedKeys().iterator();\r\n    \r\n                        while (keys.hasNext()) {\r\n                            System.out.println(&quot;Key found. Choosing operation.&quot;);\r\n                            SelectionKey key = keys.next();\r\n                            keys.remove();\r\n    \r\n                            if (!key.isValid()) {\r\n                                continue;\r\n                            }\r\n    \r\n                            if (key.isAcceptable()) {\r\n                                System.out.println(&quot;Accepting connection&quot;);\r\n                                accept(key);\r\n    \r\n                            }\r\n                            if (key.isWritable()) {\r\n                                System.out.println(&quot;Writing...&quot;);\r\n                                write(key);\r\n                            }\r\n    \r\n                            if (key.isReadable()) {\r\n                                System.out.println(&quot;Reading..&quot;);\r\n                                read(key);\r\n                            }\r\n                        }\r\n                    }\r\n                } catch (IOException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n    \r\n        private void accept(SelectionKey key) throws IOException {\r\n            ServerSocketChannel serverSocketChannel = (ServerSocketChannel) key.channel();\r\n            SocketChannel socketChannel = serverSocketChannel.accept();\r\n            socketChannel.configureBlocking(false);\r\n            byte[] hello = &quot;Connection established.&quot;.getBytes();\r\n            dataTracking.put(socketChannel, hello);\r\n            socketChannel.register(selector, SelectionKey.OP_WRITE);\r\n            clientSocketAddressToSocketChannel.put(socketChannel.getRemoteAddress(), socketChannel);\r\n            System.out.println(&quot;New connection made from address: &quot; + socketChannel.getRemoteAddress());\r\n    \r\n        }\r\n        private void read(SelectionKey key){\r\n    \r\n        }\r\n        private void write(SelectionKey key) throws IOException\r\n        {\r\n            SocketChannel channel = (SocketChannel) key.channel();\r\n    \r\n            byte[] data = dataTracking.get(channel);\r\n            dataTracking.remove(channel);\r\n            channel.write(ByteBuffer.wrap(data));\r\n            key.interestOps(SelectionKey.OP_READ);\r\n        }\r\n        private void writeToSocketAddress(){\r\n    \r\n        }\r\n    \r\n    }\r\n\r\nCLIENT\r\n\r\n\r\n    import java.io.IOException;\r\n    import java.net.InetSocketAddress;\r\n    import java.nio.ByteBuffer;\r\n    import java.nio.channels.SelectionKey;\r\n    import java.nio.channels.Selector;\r\n    import java.nio.channels.SocketChannel;\r\n    import java.util.Iterator;\r\n    \r\n    import static java.nio.channels.SelectionKey.OP_READ;\r\n    import static java.nio.channels.SelectionKey.OP_WRITE;\r\n    public class ClientToServerCommunications implements Runnable\r\n    {\r\n        private final static String HOSTNAME = &quot;127.0.0.1&quot;;\r\n        private final static int PORT = 6666;\r\n    \r\n        private Selector selector;\r\n    \r\n        public ClientToServerCommunications()\r\n        {\r\n        }\r\n    \r\n        @Override\r\n        public void run()\r\n        {\r\n            SocketChannel channel;\r\n            try {\r\n                selector = Selector.open();\r\n                channel = SocketChannel.open();\r\n                channel.configureBlocking(false);\r\n    \r\n                channel.register(selector, SelectionKey.OP_CONNECT);\r\n                channel.connect(new InetSocketAddress(HOSTNAME, PORT));\r\n    \r\n                while (!Thread.interrupted()) {\r\n                    //selector.select(1000);\r\n    \r\n                    Iterator&lt;SelectionKey&gt; keys = selector.selectedKeys().iterator();\r\n    \r\n                    while (keys.hasNext()) {\r\n                        SelectionKey key = keys.next();\r\n                        keys.remove();\r\n    \r\n                        if (!key.isValid()) continue;\r\n    \r\n                        if (key.isConnectable()) {\r\n                            System.out.println(&quot;Connecting..&quot;);\r\n                            connect(key);\r\n                        }\r\n                        if (key.isWritable()) {\r\n                            write(key);\r\n                        }\r\n                        if (key.isReadable()) {\r\n                            read(key);\r\n                        }\r\n                    }\r\n                }\r\n            } catch (IOException e1) {\r\n                e1.printStackTrace();\r\n            } finally {\r\n                close();\r\n            }\r\n        }\r\n    \r\n        private void close()\r\n        {\r\n            try {\r\n                selector.close();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        private void read(SelectionKey key) throws IOException\r\n        {\r\n            SocketChannel channel = (SocketChannel) key.channel();\r\n            ByteBuffer readBuffer = ByteBuffer.allocate(1000);\r\n            readBuffer.clear();\r\n            int length;\r\n            try {\r\n                length = channel.read(readBuffer);\r\n            } catch (IOException e) {\r\n                System.out.println(&quot;Reading problem, closing connection&quot;);\r\n                key.cancel();\r\n                channel.close();\r\n                return;\r\n            }\r\n            if (length == -1) {\r\n                System.out.println(&quot;Nothing was read from server&quot;);\r\n                channel.close();\r\n                key.cancel();\r\n                return;\r\n            }\r\n            readBuffer.flip();\r\n            byte[] buff = new byte[1024];\r\n            readBuffer.get(buff, 0, length);\r\n            System.out.println(&quot;Server said: &quot; + new String(buff));\r\n        }\r\n    \r\n        private void write(SelectionKey key) throws IOException\r\n        {\r\n            SocketChannel channel = (SocketChannel) key.channel();\r\n            channel.write(ByteBuffer.wrap(&quot;TEST MESSAGE&quot;.getBytes()));\r\n    \r\n            // Lets get ready to read.\r\n            key.interestOps(OP_READ);\r\n        }\r\n    \r\n        private void connect(SelectionKey key) throws IOException\r\n        {\r\n            SocketChannel channel = (SocketChannel) key.channel();\r\n            if (channel.isConnectionPending()) {\r\n                channel.finishConnect();\r\n            }\r\n            channel.configureBlocking(false);\r\n            channel.register(selector, OP_WRITE);\r\n        }\r\n    }\r\n\r\n  [1]: https://github.com/teocci/NioSocketCodeSample/blob/master/src/com/github/teocci/nio/socket/nio/NonBlockingWRServer.java","title":"Java NIO server never finds any SelectionKey","body":"<p>Using <a href=\"https://github.com/teocci/NioSocketCodeSample/blob/master/src/com/github/teocci/nio/socket/nio/NonBlockingWRServer.java\" rel=\"nofollow noreferrer\">this example</a> of a non-blocking NIO server, the non-blocking client is able to connect to the non-blocking NIO server. Even when the server stops running, the client repeats &quot;broken pipe&quot;, which indicates that the client WAS connected. On the server-side, however, the <code>accept</code> <code>SelectionKey</code> is never &quot;found&quot; (i.e, in the loop, the <code>accept</code> method is never called). How is this possible? I even send requests to the server while the client is connected and the <code>read</code> and <code>write</code> methods aren't called either.</p>\n<p>My code below is almost the same as the example:</p>\n<p>SERVER</p>\n<pre><code> package GameEngine;\n\nimport GameEngine.PlayerActions.PlayerAction;\n\nimport java.io.DataInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.*;\n\nimport java.nio.*;\nimport java.nio.channels.SelectionKey;\nimport java.nio.channels.Selector;\nimport java.nio.channels.ServerSocketChannel;\nimport java.nio.channels.SocketChannel;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.Iterator;\nimport java.util.Map;\n\n\n/**\n * Receives input from clients\n */\npublic class InputReceiver extends Thread{ //  A separate thread.\n\n    final String HOSTNAME = &quot;localhost&quot;;\n    final int PORT = 6666;\n    private ServerSocketChannel serverChannel;\n    private Selector selector;\n    public static HashMap&lt;String,ArrayList&lt;PlayerAction&gt;&gt; inputsForNextTick = new HashMap&lt;String, ArrayList&lt;PlayerAction&gt;&gt;();\n    private Map&lt;SocketChannel, byte[]&gt; dataTracking = new HashMap&lt;&gt;();\n    private Map&lt;SocketAddress,SocketChannel&gt; clientSocketAddressToSocketChannel = new HashMap&lt;&gt;();\n    private static boolean tickHappened = false;\n\n    public static void notifyOfTick(){\n        tickHappened = true;\n    }\n\n\n    public void run(){\n            try {\n                System.out.println(&quot;Registering server..&quot;);\n                serverChannel = ServerSocketChannel.open();\n                serverChannel.configureBlocking(false);\n                serverChannel.socket().bind(new InetSocketAddress(HOSTNAME, PORT));\n                selector = Selector.open();\n                serverChannel.register(selector, SelectionKey.OP_ACCEPT);\n                System.out.println(&quot;Server registered.&quot;);\n                while (!Thread.currentThread().isInterrupted()) {\n\n                    Iterator&lt;SelectionKey&gt; keys = selector.selectedKeys().iterator();\n\n                    while (keys.hasNext()) {\n                        System.out.println(&quot;Key found. Choosing operation.&quot;);\n                        SelectionKey key = keys.next();\n                        keys.remove();\n\n                        if (!key.isValid()) {\n                            continue;\n                        }\n\n                        if (key.isAcceptable()) {\n                            System.out.println(&quot;Accepting connection&quot;);\n                            accept(key);\n\n                        }\n                        if (key.isWritable()) {\n                            System.out.println(&quot;Writing...&quot;);\n                            write(key);\n                        }\n\n                        if (key.isReadable()) {\n                            System.out.println(&quot;Reading..&quot;);\n                            read(key);\n                        }\n                    }\n                }\n            } catch (IOException e) {\n                throw new RuntimeException(e);\n            }\n        }\n\n    private void accept(SelectionKey key) throws IOException {\n        ServerSocketChannel serverSocketChannel = (ServerSocketChannel) key.channel();\n        SocketChannel socketChannel = serverSocketChannel.accept();\n        socketChannel.configureBlocking(false);\n        byte[] hello = &quot;Connection established.&quot;.getBytes();\n        dataTracking.put(socketChannel, hello);\n        socketChannel.register(selector, SelectionKey.OP_WRITE);\n        clientSocketAddressToSocketChannel.put(socketChannel.getRemoteAddress(), socketChannel);\n        System.out.println(&quot;New connection made from address: &quot; + socketChannel.getRemoteAddress());\n\n    }\n    private void read(SelectionKey key){\n\n    }\n    private void write(SelectionKey key) throws IOException\n    {\n        SocketChannel channel = (SocketChannel) key.channel();\n\n        byte[] data = dataTracking.get(channel);\n        dataTracking.remove(channel);\n        channel.write(ByteBuffer.wrap(data));\n        key.interestOps(SelectionKey.OP_READ);\n    }\n    private void writeToSocketAddress(){\n\n    }\n\n}\n</code></pre>\n<p>CLIENT</p>\n<pre><code>import java.io.IOException;\nimport java.net.InetSocketAddress;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.SelectionKey;\nimport java.nio.channels.Selector;\nimport java.nio.channels.SocketChannel;\nimport java.util.Iterator;\n\nimport static java.nio.channels.SelectionKey.OP_READ;\nimport static java.nio.channels.SelectionKey.OP_WRITE;\npublic class ClientToServerCommunications implements Runnable\n{\n    private final static String HOSTNAME = &quot;127.0.0.1&quot;;\n    private final static int PORT = 6666;\n\n    private Selector selector;\n\n    public ClientToServerCommunications()\n    {\n    }\n\n    @Override\n    public void run()\n    {\n        SocketChannel channel;\n        try {\n            selector = Selector.open();\n            channel = SocketChannel.open();\n            channel.configureBlocking(false);\n\n            channel.register(selector, SelectionKey.OP_CONNECT);\n            channel.connect(new InetSocketAddress(HOSTNAME, PORT));\n\n            while (!Thread.interrupted()) {\n                //selector.select(1000);\n\n                Iterator&lt;SelectionKey&gt; keys = selector.selectedKeys().iterator();\n\n                while (keys.hasNext()) {\n                    SelectionKey key = keys.next();\n                    keys.remove();\n\n                    if (!key.isValid()) continue;\n\n                    if (key.isConnectable()) {\n                        System.out.println(&quot;Connecting..&quot;);\n                        connect(key);\n                    }\n                    if (key.isWritable()) {\n                        write(key);\n                    }\n                    if (key.isReadable()) {\n                        read(key);\n                    }\n                }\n            }\n        } catch (IOException e1) {\n            e1.printStackTrace();\n        } finally {\n            close();\n        }\n    }\n\n    private void close()\n    {\n        try {\n            selector.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void read(SelectionKey key) throws IOException\n    {\n        SocketChannel channel = (SocketChannel) key.channel();\n        ByteBuffer readBuffer = ByteBuffer.allocate(1000);\n        readBuffer.clear();\n        int length;\n        try {\n            length = channel.read(readBuffer);\n        } catch (IOException e) {\n            System.out.println(&quot;Reading problem, closing connection&quot;);\n            key.cancel();\n            channel.close();\n            return;\n        }\n        if (length == -1) {\n            System.out.println(&quot;Nothing was read from server&quot;);\n            channel.close();\n            key.cancel();\n            return;\n        }\n        readBuffer.flip();\n        byte[] buff = new byte[1024];\n        readBuffer.get(buff, 0, length);\n        System.out.println(&quot;Server said: &quot; + new String(buff));\n    }\n\n    private void write(SelectionKey key) throws IOException\n    {\n        SocketChannel channel = (SocketChannel) key.channel();\n        channel.write(ByteBuffer.wrap(&quot;TEST MESSAGE&quot;.getBytes()));\n\n        // Lets get ready to read.\n        key.interestOps(OP_READ);\n    }\n\n    private void connect(SelectionKey key) throws IOException\n    {\n        SocketChannel channel = (SocketChannel) key.channel();\n        if (channel.isConnectionPending()) {\n            channel.finishConnect();\n        }\n        channel.configureBlocking(false);\n        channel.register(selector, OP_WRITE);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1651127092,"post_id":72038844,"comment_id":127289751,"body_markdown":"Well ... you shouldn&#39;t be upgrading to Java 16 because Java 16 is already end-of-life.","body":"Well ... you shouldn&#39;t be upgrading to Java 16 because Java 16 is already end-of-life."}],"answers":[{"comments":[{"owner":{"account_id":4587942,"reputation":11,"user_id":3722075,"display_name":"user3722075"},"score":0,"creation_date":1651318858,"post_id":72041265,"comment_id":127339356,"body_markdown":"If possible can you please explain in detail about the fix can be implemented for this castor issue.","body":"If possible can you please explain in detail about the fix can be implemented for this castor issue."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1651323951,"post_id":72041265,"comment_id":127340320,"body_markdown":"Well ... given that I haven&#39;t done it myself, no I can&#39;t.   But you need the code that is trying to create an instance of `com.sun.org.apache.xml.internal.serialize.XMLSerializer` with something that uses an `XMLSerializer` that is ... not part of the the JDK internals.","body":"Well ... given that I haven&#39;t done it myself, no I can&#39;t.   But you need the code that is trying to create an instance of <code>com.sun.org.apache.xml.internal.serialize.XMLSerializer</code> with something that uses an <code>XMLSerializer</code> that is ... not part of the the JDK internals."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651138459,"creation_date":1651138143,"answer_id":72041265,"question_id":72038844,"body_markdown":"It looks like you have encountered another manifestation of https://github.com/castor-data-binding/castor/issues/76 (closed).\r\n\r\nThis kind of thing is caused by application code (e.g. Castor) directly referring to internal JDK classes (in this case `com.sun.org.apache.xml.internal.serialize.XMLSerializer`).   This should be raised as an Castor issue.\r\n\r\nUnfortunately, it looks like Castor data bindings is a moribund project, so you may need to develop your own fix to get it to work on Java 16 and later.\r\n\r\nIf you are going to do that, this is where the JDK internal package name is injected:\r\n\r\nhttps://github.com/castor-data-binding/castor/blob/master/xml/src/main/java/org/exolab/castor/xml/\r\n\r\nLook at `XercesJDK5Serializer.java` `BaseXercesJDK5Serializer.java`","title":"how to solve the Java upgrade 15 to 16 issue with Castor - XML","body":"<p>It looks like you have encountered another manifestation of <a href=\"https://github.com/castor-data-binding/castor/issues/76\" rel=\"nofollow noreferrer\">https://github.com/castor-data-binding/castor/issues/76</a> (closed).</p>\n<p>This kind of thing is caused by application code (e.g. Castor) directly referring to internal JDK classes (in this case <code>com.sun.org.apache.xml.internal.serialize.XMLSerializer</code>).   This should be raised as an Castor issue.</p>\n<p>Unfortunately, it looks like Castor data bindings is a moribund project, so you may need to develop your own fix to get it to work on Java 16 and later.</p>\n<p>If you are going to do that, this is where the JDK internal package name is injected:</p>\n<p><a href=\"https://github.com/castor-data-binding/castor/blob/master/xml/src/main/java/org/exolab/castor/xml/\" rel=\"nofollow noreferrer\">https://github.com/castor-data-binding/castor/blob/master/xml/src/main/java/org/exolab/castor/xml/</a></p>\n<p>Look at <code>XercesJDK5Serializer.java</code> <code>BaseXercesJDK5Serializer.java</code></p>\n"},{"tags":[],"owner":{"account_id":25637094,"reputation":31,"user_id":19406538,"display_name":"Miriam"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1656203758,"creation_date":1656062245,"answer_id":72741744,"question_id":72038844,"body_markdown":"You can set the property to use own Xerces to prevent the problem.\r\n\r\n```java\r\ncontext.setProperty(org.castor.xml.XMLProperties.SERIALIZER_FACTORY,\r\n    org.exolab.castor.xml.XercesXMLSerializerFactory.class.getName());\r\n```\r\n\r\nChange \r\n\r\n```java\r\nMarshaller marshaller = new Marshaller(myWriter);\r\n```\r\n\r\nto something like this:\r\n\r\n```java\r\nStringWriter myWriter= new StringWriter(); \r\nXMLContext xmlContext = new XMLContext();\r\nxmlContext.setProperty(org.castor.xml.XMLProperties.SERIALIZER_FACTORY, \r\n    org.exolab.castor.xml.XercesXMLSerializerFactory.class.getName());\r\nMarshaller marshaller = xmlContext.createMarshaller();\r\nmarshaller.setWriter(myWriter);\r\n```","title":"how to solve the Java upgrade 15 to 16 issue with Castor - XML","body":"<p>You can set the property to use own Xerces to prevent the problem.</p>\n<pre class=\"lang-java prettyprint-override\"><code>context.setProperty(org.castor.xml.XMLProperties.SERIALIZER_FACTORY,\n    org.exolab.castor.xml.XercesXMLSerializerFactory.class.getName());\n</code></pre>\n<p>Change</p>\n<pre class=\"lang-java prettyprint-override\"><code>Marshaller marshaller = new Marshaller(myWriter);\n</code></pre>\n<p>to something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>StringWriter myWriter= new StringWriter(); \nXMLContext xmlContext = new XMLContext();\nxmlContext.setProperty(org.castor.xml.XMLProperties.SERIALIZER_FACTORY, \n    org.exolab.castor.xml.XercesXMLSerializerFactory.class.getName());\nMarshaller marshaller = xmlContext.createMarshaller();\nmarshaller.setWriter(myWriter);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2091022,"reputation":856,"user_id":1860867,"accept_rate":40,"display_name":"ptha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687787781,"creation_date":1687350572,"answer_id":76523304,"question_id":72038844,"body_markdown":"Try adding the [--add-exports][1] JVM option:\r\n\r\n    --add-exports java.xml/com.sun.org.apache.xml.internal.serialize=ALL-UNNAMED\r\n\r\nWe did a JDK 8 -&gt; 17 migration, and the error message can indicate the solution. In your case:\r\n\r\n*java.lang.RuntimeException: Could not instantiate serializer com.sun.org.apache.xml.internal.serialize.XMLSerializer: java.lang.IllegalAccessException: class org.exolab.castor.xml.BaseXercesJDK5Serializer cannot access class com.sun.org.apache.xml.internal.serialize.XMLSerializer (in module java.xml) **because module java.xml does not export com.sun.org.apache.xml.internal.serialize to unnamed module** @646cb2e*\r\n\r\nIf the error contained: **module java.base does not opens java.lang to unnamed module**\r\n\r\nYou would use `--add-opens` instead of `--add-exports`:\r\n\r\n    --add-opens java.base/java.lang=ALL-UNNAMED\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/migrate/migrating-jdk-8-later-jdk-releases.html#GUID-2F61F3A9-0979-46A4-8B49-325BA0EE8B66","title":"how to solve the Java upgrade 15 to 16 issue with Castor - XML","body":"<p>Try adding the <a href=\"https://docs.oracle.com/en/java/javase/17/migrate/migrating-jdk-8-later-jdk-releases.html#GUID-2F61F3A9-0979-46A4-8B49-325BA0EE8B66\" rel=\"nofollow noreferrer\">--add-exports</a> JVM option:</p>\n<pre><code>--add-exports java.xml/com.sun.org.apache.xml.internal.serialize=ALL-UNNAMED\n</code></pre>\n<p>We did a JDK 8 -&gt; 17 migration, and the error message can indicate the solution. In your case:</p>\n<p><em>java.lang.RuntimeException: Could not instantiate serializer com.sun.org.apache.xml.internal.serialize.XMLSerializer: java.lang.IllegalAccessException: class org.exolab.castor.xml.BaseXercesJDK5Serializer cannot access class com.sun.org.apache.xml.internal.serialize.XMLSerializer (in module java.xml) <strong>because module java.xml does not export com.sun.org.apache.xml.internal.serialize to unnamed module</strong> @646cb2e</em></p>\n<p>If the error contained: <strong>module java.base does not opens java.lang to unnamed module</strong></p>\n<p>You would use <code>--add-opens</code> instead of <code>--add-exports</code>:</p>\n<pre><code>--add-opens java.base/java.lang=ALL-UNNAMED\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7622474,"reputation":43,"user_id":5780131,"display_name":"Zsolt Kov&#225;cs"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687430598,"creation_date":1687430598,"answer_id":76531074,"question_id":72038844,"body_markdown":"I run into the same issue when I was migrating to openjdk17 from 8. @Miriam answer was the key, but it was not enough as I am also using Casor XML Schema. The solution was to add latest xerces jar and castor.properties to the classpath containing this single line (in my case):\r\n\r\n`org.exolab.castor.xml.serializer.factory=org.exolab.castor.xml.XercesXMLSerializerFactory`\r\n\r\nThis documentation might be useful for further help:\r\nhttps://castor-data-binding.github.io/castor/reference-guide/reference/xml/xml-properties.html","title":"how to solve the Java upgrade 15 to 16 issue with Castor - XML","body":"<p>I run into the same issue when I was migrating to openjdk17 from 8. @Miriam answer was the key, but it was not enough as I am also using Casor XML Schema. The solution was to add latest xerces jar and castor.properties to the classpath containing this single line (in my case):</p>\n<p><code>org.exolab.castor.xml.serializer.factory=org.exolab.castor.xml.XercesXMLSerializerFactory</code></p>\n<p>This documentation might be useful for further help:\n<a href=\"https://castor-data-binding.github.io/castor/reference-guide/reference/xml/xml-properties.html\" rel=\"nofollow noreferrer\">https://castor-data-binding.github.io/castor/reference-guide/reference/xml/xml-properties.html</a></p>\n"}],"owner":{"account_id":4587942,"reputation":11,"user_id":3722075,"display_name":"user3722075"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1636,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1687787781,"creation_date":1651126601,"question_id":72038844,"body_markdown":"I have upgraded the java version from 15 to 16 and getting the below error on runtime. \r\n\r\njava.lang.RuntimeException: Could not instantiate serializer com.sun.org.apache.xml.internal.serialize.XMLSerializer: java.lang.IllegalAccessException: class org.exolab.castor.xml.BaseXercesJDK5Serializer cannot access class com.sun.org.apache.xml.internal.serialize.XMLSerializer (in module java.xml) because module java.xml does not  export com.sun.org.apache.xml.internal.serialize to unnamed module @646cb2e","title":"how to solve the Java upgrade 15 to 16 issue with Castor - XML","body":"<p>I have upgraded the java version from 15 to 16 and getting the below error on runtime.</p>\n<p>java.lang.RuntimeException: Could not instantiate serializer com.sun.org.apache.xml.internal.serialize.XMLSerializer: java.lang.IllegalAccessException: class org.exolab.castor.xml.BaseXercesJDK5Serializer cannot access class com.sun.org.apache.xml.internal.serialize.XMLSerializer (in module java.xml) because module java.xml does not  export com.sun.org.apache.xml.internal.serialize to unnamed module @646cb2e</p>\n"},{"tags":["java","graph","bar-chart","awt","jfreechart"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1687799185,"post_id":76557278,"comment_id":134984135,"body_markdown":"You might explore relevant margins, as suggested [here](https://stackoverflow.com/a/9667294/230513); you can experiment with this complete [example](https://stackoverflow.com/a/17342522/230513).","body":"You might explore relevant margins, as suggested <a href=\"https://stackoverflow.com/a/9667294/230513\">here</a>; you can experiment with this complete <a href=\"https://stackoverflow.com/a/17342522/230513\">example</a>."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1687801413,"post_id":76557278,"comment_id":134984637,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687787681,"creation_date":1687787681,"answer_id":76557350,"question_id":76557278,"body_markdown":"The `setCategoryMargin(float)` is used to adjust the space between categories and accepts a value between 0.0 and 1.0 (where 1.0 means 100% of the available space is used as the margin(!)). So using a negative value (-2) may not give the expected result.\r\n\r\nRead more: https://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/axis/CategoryAxis.html#setCategoryMargin-double-\r\n\r\nYou can try setting different lower positive margin to to see what suits your needs.\r\n","title":"JFreeChart align Bar Chart left","body":"<p>The <code>setCategoryMargin(float)</code> is used to adjust the space between categories and accepts a value between 0.0 and 1.0 (where 1.0 means 100% of the available space is used as the margin(!)). So using a negative value (-2) may not give the expected result.</p>\n<p>Read more: <a href=\"https://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/axis/CategoryAxis.html#setCategoryMargin-double-\" rel=\"nofollow noreferrer\">https://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/axis/CategoryAxis.html#setCategoryMargin-double-</a></p>\n<p>You can try setting different lower positive margin to to see what suits your needs.</p>\n"}],"owner":{"account_id":28833424,"reputation":3,"user_id":22083353,"display_name":"matteo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1687878359,"accepted_answer_id":76557350,"answer_count":1,"score":0,"last_activity_date":1687787681,"creation_date":1687787113,"question_id":76557278,"body_markdown":"I printed a bar chart using JFreeChart. But if I want to make the bars closer to each other using `setCategoryMargin(-2)` on my `CategoryAxis`, the Bar Chart appears to align in the center.\r\n\r\nIs there a way to align the entire graph to the left, so it&#39;s directly next to the y-axis ? Or reduce the space between the bars without the chart getting centered ?\r\n\r\n","title":"JFreeChart align Bar Chart left","body":"<p>I printed a bar chart using JFreeChart. But if I want to make the bars closer to each other using <code>setCategoryMargin(-2)</code> on my <code>CategoryAxis</code>, the Bar Chart appears to align in the center.</p>\n<p>Is there a way to align the entire graph to the left, so it's directly next to the y-axis ? Or reduce the space between the bars without the chart getting centered ?</p>\n"},{"tags":["java","tomcat"],"answers":[{"comments":[{"owner":{"account_id":13508,"reputation":30357,"user_id":27198,"accept_rate":72,"display_name":"Itay Maman"},"score":0,"creation_date":1274377581,"post_id":2876355,"comment_id":2922345,"body_markdown":"Thanks, but this does not help me. The parameter you&#39;re referring to affects server-side caching. I want the server to tell all clients (browsers) not to use their own cache and to always fetch the content from the server. And, I want to do it for all resources at once.","body":"Thanks, but this does not help me. The parameter you&#39;re referring to affects server-side caching. I want the server to tell all clients (browsers) not to use their own cache and to always fetch the content from the server. And, I want to do it for all resources at once."},{"owner":{"account_id":127604,"reputation":2939,"user_id":324888,"accept_rate":93,"display_name":"Inv3r53"},"score":0,"creation_date":1274378807,"post_id":2876355,"comment_id":2922543,"body_markdown":"ah ok..afaik implementing a filter is one way of doing it.","body":"ah ok..afaik implementing a filter is one way of doing it."},{"owner":{"account_id":127604,"reputation":2939,"user_id":324888,"accept_rate":93,"display_name":"Inv3r53"},"score":0,"creation_date":1274379636,"post_id":2876355,"comment_id":2922685,"body_markdown":"Seems like There is not built-in cache control in Tomcat.","body":"Seems like There is not built-in cache control in Tomcat."}],"tags":[],"owner":{"account_id":127604,"reputation":2939,"user_id":324888,"accept_rate":93,"display_name":"Inv3r53"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1274377124,"creation_date":1274377124,"answer_id":2876355,"question_id":2876250,"body_markdown":"may be this what you are looking for :\r\n\r\nhttp://tomcat.apache.org/tomcat-6.0-doc/config/context.html#Context%20Parameters\r\n\r\n        cachingAllowed : If the value of this flag is true, the cache for static\r\n    \r\n     resources will be used. If not specified, the default value of the flag is true.\r\n\r\nAlso delete the application cache folder in /work/Catalina/localhost after changing this flag.","title":"Tomcat: Cache-Control","body":"<p>may be this what you are looking for :</p>\n\n<p><a href=\"http://tomcat.apache.org/tomcat-6.0-doc/config/context.html#Context%20Parameters\" rel=\"nofollow noreferrer\">http://tomcat.apache.org/tomcat-6.0-doc/config/context.html#Context%20Parameters</a></p>\n\n<pre><code>    cachingAllowed : If the value of this flag is true, the cache for static\n\n resources will be used. If not specified, the default value of the flag is true.\n</code></pre>\n\n<p>Also delete the application cache folder in /work/Catalina/localhost after changing this flag.</p>\n"},{"comments":[{"owner":{"account_id":20530,"reputation":263492,"user_id":49153,"accept_rate":91,"display_name":"Ali"},"score":0,"creation_date":1399394223,"post_id":2876899,"comment_id":36039251,"body_markdown":"Will this apply only to servlets, or also to static files, e.g css / images, which are served by Tomcat?","body":"Will this apply only to servlets, or also to static files, e.g css / images, which are served by Tomcat?"}],"tags":[],"owner":{"account_id":2147,"reputation":38490,"user_id":2961,"accept_rate":79,"display_name":"Stu Thompson"},"comment_count":1,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1467112909,"creation_date":1274381675,"answer_id":2876899,"question_id":2876250,"body_markdown":"I don&#39;t believe there is a configuration to do this.  But it should not be much of an effort to write a filter to set the Cache-Control header on a per webapp-basis.  E.g.:\r\n\r\n    public class test implements Filter {\r\n    \t   \r\n    \t    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\r\n                    throws IOException, ServletException {\r\n\r\n    \t        chain.doFilter(request, response);\r\n                ((StatusResponse)response).setHeader(&quot;Cache-Control&quot;,\r\n                        &quot;max-age=0, private, must-revalidate&quot;);\r\n    \t    }\r\n    \r\n    \t\tpublic void destroy() {}\r\n    \r\n    \t\tpublic void init(FilterConfig arg0) throws ServletException {}\r\n    }\r\n\r\nAnd you&#39;d place this snippet into your webapp&#39;s `web.xml` file.\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;filter&gt;\r\n        &lt;filter-name&gt;SetCacheControl&lt;/filter-name&gt;\r\n        &lt;filter-class&gt;ch.dietpizza.cacheControlFilter&lt;/filter-class&gt;\r\n    &lt;/filter&gt;                       \r\n    &lt;filter-mapping&gt;\r\n        &lt;filter-name&gt;SetCacheControl&lt;/filter-name&gt;\r\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n    &lt;/filter-mapping&gt;\r\n","title":"Tomcat: Cache-Control","body":"<p>I don't believe there is a configuration to do this.  But it should not be much of an effort to write a filter to set the Cache-Control header on a per webapp-basis.  E.g.:</p>\n\n<pre><code>public class test implements Filter {\n\n        public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\n                throws IOException, ServletException {\n\n            chain.doFilter(request, response);\n            ((StatusResponse)response).setHeader(\"Cache-Control\",\n                    \"max-age=0, private, must-revalidate\");\n        }\n\n        public void destroy() {}\n\n        public void init(FilterConfig arg0) throws ServletException {}\n}\n</code></pre>\n\n<p>And you'd place this snippet into your webapp's <code>web.xml</code> file.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;filter&gt;\n    &lt;filter-name&gt;SetCacheControl&lt;/filter-name&gt;\n    &lt;filter-class&gt;ch.dietpizza.cacheControlFilter&lt;/filter-class&gt;\n&lt;/filter&gt;                       \n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;SetCacheControl&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25066,"reputation":66292,"user_id":64174,"accept_rate":100,"display_name":"Sean Owen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1274713660,"creation_date":1274713660,"answer_id":2897932,"question_id":2876250,"body_markdown":"The only param I know of is `disableProxyCaching` on `&lt;Valve&gt;` elements. See [here][1].\r\n\r\n\r\n  [1]: http://daveharris.wordpress.com/2007/07/09/how-to-configure-cache-control-in-tomcat/","title":"Tomcat: Cache-Control","body":"<p>The only param I know of is <code>disableProxyCaching</code> on <code>&lt;Valve&gt;</code> elements. See <a href=\"http://daveharris.wordpress.com/2007/07/09/how-to-configure-cache-control-in-tomcat/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"comments":[{"owner":{"account_id":23591,"reputation":11260,"user_id":59202,"accept_rate":86,"display_name":"cbmeeks"},"score":0,"creation_date":1352235336,"post_id":4997498,"comment_id":18069923,"body_markdown":"This solved the problem for me.  Safari 6 (iOS) caches POST requests and this was killing me!  Thanks!","body":"This solved the problem for me.  Safari 6 (iOS) caches POST requests and this was killing me!  Thanks!"},{"owner":{"account_id":414474,"reputation":1900,"user_id":788711,"accept_rate":58,"display_name":"Apoorva sahay"},"score":0,"creation_date":1571774710,"post_id":4997498,"comment_id":103350582,"body_markdown":"@whitey I am seeing Cache-control: private is added by default in my response. I am using tomcat as container. Can you help?","body":"@whitey I am seeing Cache-control: private is added by default in my response. I am using tomcat as container. Can you help?"},{"owner":{"account_id":963148,"reputation":794,"user_id":987044,"accept_rate":50,"display_name":"ledlogic"},"score":0,"creation_date":1574140875,"post_id":4997498,"comment_id":104114965,"body_markdown":"System.currentTimeMillis() is faster and less garbage collection than new Date().getTime() according to https://stackoverflow.com/a/16249959/987044","body":"System.currentTimeMillis() is faster and less garbage collection than new Date().getTime() according to <a href=\"https://stackoverflow.com/a/16249959/987044\">stackoverflow.com/a/16249959/987044</a>"}],"tags":[],"owner":{"account_id":138794,"reputation":536,"user_id":343960,"display_name":"whitey"},"comment_count":3,"down_vote_count":0,"up_vote_count":41,"is_accepted":true,"score":41,"last_activity_date":1441730305,"creation_date":1297719056,"answer_id":4997498,"question_id":2876250,"body_markdown":"Similar to the post above, except there are some issues with that code.  This will disable all browser caching:\r\n\r\n    import javax.servlet.*;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    import java.io.IOException;\r\n    import java.util.Date;\r\n    \r\n    public class CacheControlFilter implements Filter {\r\n    \r\n        public void doFilter(ServletRequest request, ServletResponse response,\r\n                             FilterChain chain) throws IOException, ServletException {\r\n    \r\n            HttpServletResponse resp = (HttpServletResponse) response;\r\n            resp.setHeader(&quot;Expires&quot;, &quot;Tue, 03 Jul 2001 06:00:00 GMT&quot;);\r\n            resp.setDateHeader(&quot;Last-Modified&quot;, new Date().getTime());\r\n            resp.setHeader(&quot;Cache-Control&quot;, &quot;no-store, no-cache, must-revalidate, max-age=0, post-check=0, pre-check=0&quot;);\r\n            resp.setHeader(&quot;Pragma&quot;, &quot;no-cache&quot;);\r\n    \r\n            chain.doFilter(request, response);\r\n        }\r\n    \r\n    }\r\n\r\nand then map in web.xml as described in [Stu Thompson&#39;s answer][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/2876899/569101","title":"Tomcat: Cache-Control","body":"<p>Similar to the post above, except there are some issues with that code.  This will disable all browser caching:</p>\n\n<pre><code>import javax.servlet.*;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\nimport java.util.Date;\n\npublic class CacheControlFilter implements Filter {\n\n    public void doFilter(ServletRequest request, ServletResponse response,\n                         FilterChain chain) throws IOException, ServletException {\n\n        HttpServletResponse resp = (HttpServletResponse) response;\n        resp.setHeader(\"Expires\", \"Tue, 03 Jul 2001 06:00:00 GMT\");\n        resp.setDateHeader(\"Last-Modified\", new Date().getTime());\n        resp.setHeader(\"Cache-Control\", \"no-store, no-cache, must-revalidate, max-age=0, post-check=0, pre-check=0\");\n        resp.setHeader(\"Pragma\", \"no-cache\");\n\n        chain.doFilter(request, response);\n    }\n\n}\n</code></pre>\n\n<p>and then map in web.xml as described in <a href=\"https://stackoverflow.com/a/2876899/569101\">Stu Thompson's answer</a>.</p>\n"},{"tags":[],"owner":{"account_id":1104938,"reputation":4361,"user_id":1382828,"accept_rate":78,"display_name":"CXJ"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1336501307,"creation_date":1336501307,"answer_id":10504217,"question_id":2876250,"body_markdown":"There actually are several &lt;Valve&gt; elements in the Tomcat configuration which directly affect this.  See documentation at http://tomcat.apache.org/tomcat-6.0-doc/config/valve.html for example.\r\n\r\nAtlassian recommends the following two statements to ENABLE browser-side caching so that Microsoft Internet Explorer will be able to correctly download and view attached documents:\r\n\r\n    &lt;Valve className=&quot;org.apache.catalina.authenticator.FormAuthenticator&quot; securePagesWithPragma=&quot;false&quot; /&gt;\r\n    &lt;Valve className=&quot;org.apache.catalina.authenticator.NonLoginAuthenticator&quot; securePagesWithPragma=&quot;false&quot; /&gt;\r\n\r\n","title":"Tomcat: Cache-Control","body":"<p>There actually are several  elements in the Tomcat configuration which directly affect this.  See documentation at <a href=\"http://tomcat.apache.org/tomcat-6.0-doc/config/valve.html\" rel=\"nofollow\">http://tomcat.apache.org/tomcat-6.0-doc/config/valve.html</a> for example.</p>\n\n<p>Atlassian recommends the following two statements to ENABLE browser-side caching so that Microsoft Internet Explorer will be able to correctly download and view attached documents:</p>\n\n<pre><code>&lt;Valve className=\"org.apache.catalina.authenticator.FormAuthenticator\" securePagesWithPragma=\"false\" /&gt;\n&lt;Valve className=\"org.apache.catalina.authenticator.NonLoginAuthenticator\" securePagesWithPragma=\"false\" /&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2466488,"reputation":441,"user_id":2149459,"accept_rate":78,"display_name":"Arjun"},"score":4,"creation_date":1426241305,"post_id":15326364,"comment_id":46300257,"body_markdown":"Can ExpiresFilter be used to set cache-control to &quot;no-cache&quot; and &quot;no-store&quot; at the same time?\n\nIf yes, how do you achieve it in above code? This&#39;d be great help.","body":"Can ExpiresFilter be used to set cache-control to &quot;no-cache&quot; and &quot;no-store&quot; at the same time?  If yes, how do you achieve it in above code? This&#39;d be great help."},{"owner":{"account_id":1614179,"reputation":1881,"user_id":1492329,"accept_rate":60,"display_name":"Jack"},"score":5,"creation_date":1426304946,"post_id":15326364,"comment_id":46329815,"body_markdown":"I don&#39;t think so. From the documentation: `To modify Cache-Control directives other than max-age (see RFC 2616 section 14.9), you can use other servlet filters or Apache Httpd mod_headers module.`","body":"I don&#39;t think so. From the documentation: <code>To modify Cache-Control directives other than max-age (see RFC 2616 section 14.9), you can use other servlet filters or Apache Httpd mod_headers module.</code>"},{"owner":{"account_id":1884636,"reputation":784,"user_id":1704104,"display_name":"Bruno Negr&#227;o Zica"},"score":0,"creation_date":1493154829,"post_id":15326364,"comment_id":74291238,"body_markdown":"I ported the ExpiresFilter to Tomcat 6. See https://github.com/bnegrao/ExpiresFilter","body":"I ported the ExpiresFilter to Tomcat 6. See <a href=\"https://github.com/bnegrao/ExpiresFilter\" rel=\"nofollow noreferrer\">github.com/bnegrao/ExpiresFilter</a>"}],"tags":[],"owner":{"account_id":1614179,"reputation":1881,"user_id":1492329,"accept_rate":60,"display_name":"Jack"},"comment_count":3,"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1614815931,"creation_date":1362942846,"answer_id":15326364,"question_id":2876250,"body_markdown":"&lt;!-- language-all: lang-xml --&gt;\r\nSince Tomcat 7 there is a container provided expires filter that may help. See:\r\n\r\n* Tomcat 10: https://tomcat.apache.org/tomcat-10.0-doc/config/filter.html#Expires_Filter\r\n* Tomcat 9: https://tomcat.apache.org/tomcat-9.0-doc/config/filter.html#Expires_Filter\r\n* Tomcat 8: https://tomcat.apache.org/tomcat-8.0-doc/config/filter.html#Expires_Filter\r\n* Tomcat 7: https://tomcat.apache.org/tomcat-7.0-doc/config/filter.html#Expires_Filter\r\n* Tomcat 6 (unofficial backport): https://github.com/bnegrao/ExpiresFilter\r\n\r\n&gt; ExpiresFilter is a Java Servlet API port of [Apache mod_expires][1]. This filter controls the setting of the `Expires` HTTP header and the `max-age` directive of the `Cache-Control` HTTP header in server responses. The expiration date can set to be relative to either the time the source file was last modified, or to the time of the client access.\r\n\r\n&lt;pre&gt;&lt;code&gt;&amp;lt;filter&amp;gt;\r\n\t&amp;lt;filter-name&amp;gt;ExpiresFilter&amp;lt;/filter-name&amp;gt;\r\n\t&amp;lt;filter-class&amp;gt;org.apache.catalina.filters.ExpiresFilter&amp;lt;/filter-class&amp;gt;\r\n\t&amp;lt;init-param&amp;gt;\r\n\t\t&amp;lt;param-name&amp;gt;ExpiresByType image&amp;lt;/param-name&amp;gt;\r\n\t\t&amp;lt;param-value&amp;gt;access plus 10 days&amp;lt;/param-value&amp;gt;\r\n\t&amp;lt;/init-param&amp;gt;\r\n\t&amp;lt;init-param&amp;gt;\r\n\t\t&amp;lt;param-name&amp;gt;ExpiresByType text/css&amp;lt;/param-name&amp;gt;\r\n\t\t&amp;lt;param-value&amp;gt;access plus 10 hours&amp;lt;/param-value&amp;gt;\r\n\t&amp;lt;/init-param&amp;gt;\r\n\t&amp;lt;init-param&amp;gt;\r\n\t\t&amp;lt;param-name&amp;gt;ExpiresByType application/javascript&amp;lt;/param-name&amp;gt;\r\n\t\t&amp;lt;param-value&amp;gt;access plus 10 minutes&amp;lt;/param-value&amp;gt;\r\n\t&amp;lt;/init-param&amp;gt;\r\n\t&amp;lt;!-- Let everything else expire immediately --&amp;gt;\r\n\t&amp;lt;init-param&amp;gt;\r\n\t\t&amp;lt;param-name&amp;gt;ExpiresDefault&amp;lt;/param-name&amp;gt;\r\n\t\t&amp;lt;param-value&amp;gt;access plus 0 seconds&amp;lt;/param-value&amp;gt;\r\n\t&amp;lt;/init-param&amp;gt;\r\n&amp;lt;/filter&amp;gt;\r\n\r\n&amp;lt;filter-mapping&amp;gt;\r\n\t&amp;lt;filter-name&amp;gt;ExpiresFilter&amp;lt;/filter-name&amp;gt;\r\n\t&amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;\r\n\t&amp;lt;dispatcher&amp;gt;REQUEST&amp;lt;/dispatcher&amp;gt;\r\n&amp;lt;/filter-mapping&amp;gt;\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\n  [1]: http://httpd.apache.org/docs/2.2/mod/mod_expires.html","title":"Tomcat: Cache-Control","body":"\n<p>Since Tomcat 7 there is a container provided expires filter that may help. See:</p>\n<ul>\n<li>Tomcat 10: <a href=\"https://tomcat.apache.org/tomcat-10.0-doc/config/filter.html#Expires_Filter\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/tomcat-10.0-doc/config/filter.html#Expires_Filter</a></li>\n<li>Tomcat 9: <a href=\"https://tomcat.apache.org/tomcat-9.0-doc/config/filter.html#Expires_Filter\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/tomcat-9.0-doc/config/filter.html#Expires_Filter</a></li>\n<li>Tomcat 8: <a href=\"https://tomcat.apache.org/tomcat-8.0-doc/config/filter.html#Expires_Filter\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/tomcat-8.0-doc/config/filter.html#Expires_Filter</a></li>\n<li>Tomcat 7: <a href=\"https://tomcat.apache.org/tomcat-7.0-doc/config/filter.html#Expires_Filter\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/tomcat-7.0-doc/config/filter.html#Expires_Filter</a></li>\n<li>Tomcat 6 (unofficial backport): <a href=\"https://github.com/bnegrao/ExpiresFilter\" rel=\"nofollow noreferrer\">https://github.com/bnegrao/ExpiresFilter</a></li>\n</ul>\n<blockquote>\n<p>ExpiresFilter is a Java Servlet API port of <a href=\"http://httpd.apache.org/docs/2.2/mod/mod_expires.html\" rel=\"nofollow noreferrer\">Apache mod_expires</a>. This filter controls the setting of the <code>Expires</code> HTTP header and the <code>max-age</code> directive of the <code>Cache-Control</code> HTTP header in server responses. The expiration date can set to be relative to either the time the source file was last modified, or to the time of the client access.</p>\n</blockquote>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;filter&gt;\n    &lt;filter-name&gt;ExpiresFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.apache.catalina.filters.ExpiresFilter&lt;/filter-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;ExpiresByType image&lt;/param-name&gt;\n        &lt;param-value&gt;access plus 10 days&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;ExpiresByType text/css&lt;/param-name&gt;\n        &lt;param-value&gt;access plus 10 hours&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;ExpiresByType application/javascript&lt;/param-name&gt;\n        &lt;param-value&gt;access plus 10 minutes&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;!-- Let everything else expire immediately --&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;ExpiresDefault&lt;/param-name&gt;\n        &lt;param-value&gt;access plus 0 seconds&lt;/param-value&gt;\n    &lt;/init-param&gt;\n&lt;/filter&gt;\n\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;ExpiresFilter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2543653,"reputation":1780,"user_id":2208909,"display_name":"Feng Zhang"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687787191,"creation_date":1687787191,"answer_id":76557289,"question_id":2876250,"body_markdown":"Almost all answers I researched are from server side, actually client side needs to be worked on as well. In jsp/html need to add below in header.\r\n\r\n    &lt;META http-equiv=&quot;Expires&quot; CONTENT=&quot;0&quot;&gt;  \r\n    &lt;META http-equiv=&quot;Cache-Control&quot; CONTENT=&quot;no-cache&quot;&gt;  \r\n    &lt;META http-equiv=&quot;Pragma&quot; CONTENT=&quot;no-cache&quot;&gt;  ","title":"Tomcat: Cache-Control","body":"<p>Almost all answers I researched are from server side, actually client side needs to be worked on as well. In jsp/html need to add below in header.</p>\n<pre><code>&lt;META http-equiv=&quot;Expires&quot; CONTENT=&quot;0&quot;&gt;  \n&lt;META http-equiv=&quot;Cache-Control&quot; CONTENT=&quot;no-cache&quot;&gt;  \n&lt;META http-equiv=&quot;Pragma&quot; CONTENT=&quot;no-cache&quot;&gt;  \n</code></pre>\n"}],"owner":{"account_id":13508,"reputation":30357,"user_id":27198,"accept_rate":72,"display_name":"Itay Maman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108728,"favorite_count":0,"down_vote_count":0,"up_vote_count":50,"accepted_answer_id":4997498,"answer_count":7,"score":50,"last_activity_date":1687787191,"creation_date":1274376398,"question_id":2876250,"body_markdown":"Jetty has a [CacheControl parameter][1] (can be specified webdefault.xml) that determines the caching behavior of clients (by affecting headers sent to clients).\r\n\r\nDoes Tomcat has a similar option?\r\nIn short, I want to turn off caching of all pages delivered by a tomcat server and/or by a specific webapp?\r\n\r\n\r\n  [1]: http://christiansons.net/mike/blog/2009/09/jetty-browser-cache-control/\r\n\r\n\r\n\r\n**Update**\r\n\r\nPlease note that I am not referring to server-side caching. I want the server to tell all clients (browsers) not to use their own cache and to always fetch the content from the server. I want to do it for all resources, including static resources (.css, .js, etc.)  at once.\r\n","title":"Tomcat: Cache-Control","body":"<p>Jetty has a <a href=\"http://christiansons.net/mike/blog/2009/09/jetty-browser-cache-control/\" rel=\"noreferrer\">CacheControl parameter</a> (can be specified webdefault.xml) that determines the caching behavior of clients (by affecting headers sent to clients).</p>\n\n<p>Does Tomcat has a similar option?\nIn short, I want to turn off caching of all pages delivered by a tomcat server and/or by a specific webapp?</p>\n\n<p><strong>Update</strong></p>\n\n<p>Please note that I am not referring to server-side caching. I want the server to tell all clients (browsers) not to use their own cache and to always fetch the content from the server. I want to do it for all resources, including static resources (.css, .js, etc.)  at once.</p>\n"},{"tags":["java","android","android-studio","kotlin"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1687632392,"post_id":76547530,"comment_id":134965098,"body_markdown":"&quot;it&#39;s only supporting Kotlin and not java presently&quot; -- Android Studio supports both Java and Kotlin.","body":"&quot;it&#39;s only supporting Kotlin and not java presently&quot; -- Android Studio supports both Java and Kotlin."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1687632538,"post_id":76547530,"comment_id":134965111,"body_markdown":"Why are you trying to open a Kotlin generated class as Java? Sounds like an XY Problem.","body":"Why are you trying to open a Kotlin generated class as Java? Sounds like an XY Problem."},{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":0,"creation_date":1687641849,"post_id":76547530,"comment_id":134966014,"body_markdown":"Try looking at [Converting a Kotlin File to Java](https://www.baeldung.com/kotlin/convert-to-java).","body":"Try looking at <a href=\"https://www.baeldung.com/kotlin/convert-to-java\" rel=\"nofollow noreferrer\">Converting a Kotlin File to Java</a>."},{"owner":{"account_id":27648043,"reputation":11,"user_id":21103521,"display_name":"Pranjali Srivastava"},"score":0,"creation_date":1687644870,"post_id":76547530,"comment_id":134966266,"body_markdown":"Due to the above issue, I can&#39;t find activity_main.xml or MainActivity.java                             Where to write their respective codes?","body":"Due to the above issue, I can&#39;t find activity_main.xml or MainActivity.java                             Where to write their respective codes?"},{"owner":{"account_id":11091407,"reputation":152,"user_id":8143136,"display_name":"Sidnio"},"score":0,"creation_date":1687688341,"post_id":76547530,"comment_id":134968977,"body_markdown":"Android Studio supports Java","body":"Android Studio supports Java"},{"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"score":0,"creation_date":1687693940,"post_id":76547530,"comment_id":134969515,"body_markdown":"It&#39;s hard to understand what do you mean. First, as others said, Java is supported by Android Studio. Second, if it wouldn&#39;t, then how would it make sense to convert from a supported language to an unsupported one? I guess you mean something much different.","body":"It&#39;s hard to understand what do you mean. First, as others said, Java is supported by Android Studio. Second, if it wouldn&#39;t, then how would it make sense to convert from a supported language to an unsupported one? I guess you mean something much different."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1687776536,"post_id":76547530,"comment_id":134979105,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":27648043,"reputation":11,"user_id":21103521,"display_name":"Pranjali Srivastava"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1687786999,"creation_date":1687632150,"question_id":76547530,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\nHow to find activity main.Xml and Activity main.xml in android studio? Previously it was there but after the update I can&#39;t find it. A screenshot of Android studio is attached below.\r\n\r\nHow to convert a Kotlin source file to a Java source file?? Tools&gt;&gt;Kotlin&gt;&gt;Kotlin bytecode is not accessible as of now.\r\n\r\nI wanted to write code in java in android studio\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1ndZb.png","title":"How to convert a Kotlin source file to a Java source file. (Kotlin Bytecode from tools is hidden) any other way will be quite helpful","body":"<p><a href=\"https://i.stack.imgur.com/1ndZb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1ndZb.png\" alt=\"enter image description here\" /></a></p>\n<p>How to find activity main.Xml and Activity main.xml in android studio? Previously it was there but after the update I can't find it. A screenshot of Android studio is attached below.</p>\n<p>How to convert a Kotlin source file to a Java source file?? Tools&gt;&gt;Kotlin&gt;&gt;Kotlin bytecode is not accessible as of now.</p>\n<p>I wanted to write code in java in android studio</p>\n"},{"tags":["java","encryption","vigenere"],"comments":[{"owner":{"account_id":5168089,"reputation":26701,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"score":0,"creation_date":1687786231,"post_id":76557117,"comment_id":134981176,"body_markdown":"Please provide a complete, minimal and verifiable example, so that we can reproduce your problem. As your example stands now, I have no idea what the input and expected output should be.","body":"Please provide a complete, minimal and verifiable example, so that we can reproduce your problem. As your example stands now, I have no idea what the input and expected output should be."}],"owner":{"account_id":26440042,"reputation":1,"user_id":20084724,"display_name":"Parcival"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687786555,"creation_date":1687785783,"question_id":76557117,"body_markdown":"I am programming an automatic Vigenere Cipher decoder using a frequency analysis. To be able to do that, I need the length of the key used. I am programming in Java.\r\n\r\nMy program works perfectly fine, but only with key lengths that are prime numbers.\r\nExample: The key has a length of 6. My program detects a key length of 3, as it is the smallest factor. \r\n\r\n\r\nMy input would look like this: [196, 231, 15, 67, 93, 26]. These are the distances between matching substrings in the ciphered text. These are only example numbers, not sure if they would work.\r\nThe output should be a single number, the key length associated to the numbers.\r\n\r\nThis is my code for determining the key length: \r\n\r\n```\r\npublic class LengthDeterminer {\r\n     public static int getLength(int[] matchDistances) {\r\n         if (matchDistances == null) return -1;\r\n         Map&lt;Integer, Integer&gt; factorsToOccurency = factorsToOccurency(matchDistances); // Collect factors with occurency count\r\n         if (VigenereDecipher.debugMode()) {\r\n             System.out.println(factorsToOccurency);\r\n         }\r\n         return Collections.max(factorsToOccurency.entrySet(), Map.Entry.comparingByValue()).getKey();\r\n\r\n    }\r\n\r\n    private static Map&lt;Integer, Integer&gt; factorsToOccurency (int[] matchDistances) {\r\n        Map&lt;Integer, Integer&gt; returnMap = new HashMap&lt;&gt;();\r\n\r\n        for (int i = 0; i &lt; matchDistances.length; i++) { \r\n\r\n            if (matchDistances[i] &lt;= 1) continue; // Negative distances would only double every number, maybe a problem of a other part of my program\r\n\r\n            int smallFactor = smallestFactor(matchDistances[i]);\r\n\r\n            if (returnMap.containsKey(smallFactor)) {\r\n                returnMap.put(smallFactor, returnMap.get(smallFactor) +1);\r\n            } else {\r\n                returnMap.put(smallFactor, 1);\r\n            }\r\n        }\r\n\r\n        return returnMap;\r\n\r\n    }\r\n\r\n    private static int smallestFactor(int x)\r\n    {\r\n        if(x &lt; 1)  return -1;\r\n        if(x == 1) return  1;\r\n\r\n        for(int i=3; i&lt;=x; i++)\r\n            if(x % i == 0)\r\n                return i;\r\n\r\n        return -1; // To stop compiler&#39;s complaints.\r\n    }\r\n}\r\n```\r\n\r\nThe getLength() class is the one being initially called. I input the distances between matching substrings in the ciphered text. When using non-prime keys it doesnt work, it just spits out the smallest prime factor of the key length. \r\n\r\nCan anybody help me?","title":"Finding the key length of a Vigenere cipher when it is even","body":"<p>I am programming an automatic Vigenere Cipher decoder using a frequency analysis. To be able to do that, I need the length of the key used. I am programming in Java.</p>\n<p>My program works perfectly fine, but only with key lengths that are prime numbers.\nExample: The key has a length of 6. My program detects a key length of 3, as it is the smallest factor.</p>\n<p>My input would look like this: [196, 231, 15, 67, 93, 26]. These are the distances between matching substrings in the ciphered text. These are only example numbers, not sure if they would work.\nThe output should be a single number, the key length associated to the numbers.</p>\n<p>This is my code for determining the key length:</p>\n<pre><code>public class LengthDeterminer {\n     public static int getLength(int[] matchDistances) {\n         if (matchDistances == null) return -1;\n         Map&lt;Integer, Integer&gt; factorsToOccurency = factorsToOccurency(matchDistances); // Collect factors with occurency count\n         if (VigenereDecipher.debugMode()) {\n             System.out.println(factorsToOccurency);\n         }\n         return Collections.max(factorsToOccurency.entrySet(), Map.Entry.comparingByValue()).getKey();\n\n    }\n\n    private static Map&lt;Integer, Integer&gt; factorsToOccurency (int[] matchDistances) {\n        Map&lt;Integer, Integer&gt; returnMap = new HashMap&lt;&gt;();\n\n        for (int i = 0; i &lt; matchDistances.length; i++) { \n\n            if (matchDistances[i] &lt;= 1) continue; // Negative distances would only double every number, maybe a problem of a other part of my program\n\n            int smallFactor = smallestFactor(matchDistances[i]);\n\n            if (returnMap.containsKey(smallFactor)) {\n                returnMap.put(smallFactor, returnMap.get(smallFactor) +1);\n            } else {\n                returnMap.put(smallFactor, 1);\n            }\n        }\n\n        return returnMap;\n\n    }\n\n    private static int smallestFactor(int x)\n    {\n        if(x &lt; 1)  return -1;\n        if(x == 1) return  1;\n\n        for(int i=3; i&lt;=x; i++)\n            if(x % i == 0)\n                return i;\n\n        return -1; // To stop compiler's complaints.\n    }\n}\n</code></pre>\n<p>The getLength() class is the one being initially called. I input the distances between matching substrings in the ciphered text. When using non-prime keys it doesnt work, it just spits out the smallest prime factor of the key length.</p>\n<p>Can anybody help me?</p>\n"},{"tags":["java","spring","spring-el"],"answers":[{"comments":[{"owner":{"account_id":107780,"reputation":5081,"user_id":286419,"accept_rate":79,"display_name":"Alex Florescu"},"score":0,"creation_date":1376588180,"post_id":18258299,"comment_id":26776258,"body_markdown":"Also see another approach presented here: \nhttp://stackoverflow.com/questions/7909475/how-to-do-arithmetic-in-spring-properties","body":"Also see another approach presented here:  <a href=\"http://stackoverflow.com/questions/7909475/how-to-do-arithmetic-in-spring-properties\" title=\"how to do arithmetic in spring properties\">stackoverflow.com/questions/7909475/&hellip;</a>"}],"tags":[],"owner":{"account_id":107780,"reputation":5081,"user_id":286419,"accept_rate":79,"display_name":"Alex Florescu"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1376588052,"creation_date":1376588052,"answer_id":18258299,"question_id":18258298,"body_markdown":"If you&#39;re using Spring 3.0 or later, you can use the property inside the SpEL expression like this: \r\n\t\t\r\n       &lt;property name=&quot;validationQueryTimeout&quot; value=&quot;#{${jdbc.timeout}/1000}&quot; /&gt;\r\n","title":"How to do arithmetic in Spring properties, with values from a properties file?","body":"<p>If you're using Spring 3.0 or later, you can use the property inside the SpEL expression like this: </p>\n\n<pre><code>   &lt;property name=\"validationQueryTimeout\" value=\"#{${jdbc.timeout}/1000}\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9540097,"reputation":1519,"user_id":7088682,"display_name":"Nisarg Patil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687786417,"creation_date":1687786417,"answer_id":76557204,"question_id":18258298,"body_markdown":"If anyone is looking for similar arithmetic operation in `@Value`, can be done by `#{${someProperty} + 2}`. &lt;br&gt;\r\nIn this case `@Value(#{${jdbc.timeout} / 1000})`","title":"How to do arithmetic in Spring properties, with values from a properties file?","body":"<p>If anyone is looking for similar arithmetic operation in <code>@Value</code>, can be done by <code>#{${someProperty} + 2}</code>. <br>\nIn this case <code>@Value(#{${jdbc.timeout} / 1000})</code></p>\n"}],"owner":{"account_id":107780,"reputation":5081,"user_id":286419,"accept_rate":79,"display_name":"Alex Florescu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4514,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":18258299,"answer_count":2,"score":3,"last_activity_date":1687786417,"creation_date":1376588052,"question_id":18258298,"body_markdown":"Example use-case: properties file passes in a numeric value in millis, and you want to use it in seconds. \r\n\r\nYour .properties file:\r\n\r\n&gt; jdbc.timeout= 2000\r\n\r\nYour applicationContext.xml currently\r\n\r\n    &lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&gt; \t\t\r\n       &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt; \t\t\r\n       &lt;property name=&quot;url&quot;value=&quot;jdbc:mysql://myserver/mydb&quot; /&gt;\r\n       &lt;property name=&quot;username&quot; value=&quot;user&quot; /&gt; \t\t\r\n       &lt;property name=&quot;password&quot; value=&quot;changeme&quot; /&gt; \t\t\r\n       &lt;property name=&quot;validationQuery&quot; value=&quot;SELECT 1;&quot;/&gt; \t\t\r\n       &lt;property name=&quot;validationQueryTimeout&quot; value=&quot;${jdbc.timeout}&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\nYou want the validationQueryTimeout value to be in seconds, how do you convert it? ","title":"How to do arithmetic in Spring properties, with values from a properties file?","body":"<p>Example use-case: properties file passes in a numeric value in millis, and you want to use it in seconds. </p>\n\n<p>Your .properties file:</p>\n\n<blockquote>\n  <p>jdbc.timeout= 2000</p>\n</blockquote>\n\n<p>Your applicationContext.xml currently</p>\n\n<pre><code>&lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\" destroy-method=\"close\"&gt;       \n   &lt;property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" /&gt;        \n   &lt;property name=\"url\"value=\"jdbc:mysql://myserver/mydb\" /&gt;\n   &lt;property name=\"username\" value=\"user\" /&gt;        \n   &lt;property name=\"password\" value=\"changeme\" /&gt;        \n   &lt;property name=\"validationQuery\" value=\"SELECT 1;\"/&gt;         \n   &lt;property name=\"validationQueryTimeout\" value=\"${jdbc.timeout}\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>You want the validationQueryTimeout value to be in seconds, how do you convert it? </p>\n"},{"tags":["java","spring","http","log4j2"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1687787179,"post_id":76557182,"comment_id":134981399,"body_markdown":"Ehrm, you are just sending them out? I assume something is actually listening on that URL else it would be pretty useless.","body":"Ehrm, you are just sending them out? I assume something is actually listening on that URL else it would be pretty useless."}],"owner":{"account_id":22843757,"reputation":29,"user_id":16990363,"display_name":"kev0"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1687786249,"creation_date":1687786249,"question_id":76557182,"body_markdown":"In my `log4j2.xml`, my HTTPAppender is configured to send out the logs to a url on my localhost. I would just like to read the logs whenever my HTTPAppender sends them out. How can I achieve this?\r\n\r\nI can see through the console the HTTPAppender is working and logs are going out. Just not sure how to retrieve them after.\r\n\r\n`&lt;Http name=&quot;Http&quot; url=&quot;https://localhost:8080/myUrl/&quot;&gt;`\r\n\r\nThat is the url my log4j2.xml is sending the logs to. What is the easiest way for me to retrieve the logs? \r\n\r\nThanks","title":"How do I read the log4j2 logs my HTTPAppender is sending to the url?","body":"<p>In my <code>log4j2.xml</code>, my HTTPAppender is configured to send out the logs to a url on my localhost. I would just like to read the logs whenever my HTTPAppender sends them out. How can I achieve this?</p>\n<p>I can see through the console the HTTPAppender is working and logs are going out. Just not sure how to retrieve them after.</p>\n<p><code>&lt;Http name=&quot;Http&quot; url=&quot;https://localhost:8080/myUrl/&quot;&gt;</code></p>\n<p>That is the url my log4j2.xml is sending the logs to. What is the easiest way for me to retrieve the logs?</p>\n<p>Thanks</p>\n"},{"tags":["java","mysql","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1687785517,"post_id":76557043,"comment_id":134981006,"body_markdown":"Well don&#39;t use `getResultList`, increase the  fetch size through a query hint. I also don&#39;t really get the use of a `Page` here as you always retrieve everything.","body":"Well don&#39;t use <code>getResultList</code>, increase the  fetch size through a query hint. I also don&#39;t really get the use of a <code>Page</code> here as you always retrieve everything."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1687785694,"post_id":76557043,"comment_id":134981037,"body_markdown":"Get a DBA to look at the execution of the query and see whether any indexes should be added.","body":"Get a DBA to look at the execution of the query and see whether any indexes should be added."},{"owner":{"account_id":4931096,"reputation":77,"user_id":3970855,"accept_rate":50,"display_name":"Najeeba Saidalavi"},"score":0,"creation_date":1687786200,"post_id":76557043,"comment_id":134981170,"body_markdown":"@tgdavies I have added index to the entities. I got a bit faster, but not as fast as expected.","body":"@tgdavies I have added index to the entities. I got a bit faster, but not as fast as expected."},{"owner":{"account_id":4931096,"reputation":77,"user_id":3970855,"accept_rate":50,"display_name":"Najeeba Saidalavi"},"score":0,"creation_date":1687786292,"post_id":76557043,"comment_id":134981196,"body_markdown":"@M.Deinum I have changed the code to get a sublist of the List based on the pagination. Haven&#39;t added the change here. Adding fetch size - since this is a report, I need to get all values for the filters provided. So, will adding fetch size help?","body":"@M.Deinum I have changed the code to get a sublist of the List based on the pagination. Haven&#39;t added the change here. Adding fetch size - since this is a report, I need to get all values for the filters provided. So, will adding fetch size help?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1687786842,"post_id":76557043,"comment_id":134981319,"body_markdown":"Fetch size reduces the number of round trips, thus network calls. The default is 10 (which is low) use something like 1000 or 500 to reduce the network roundtrips. Also if you get a sublist this is is even worse, you get everything and then ditch 80% because you don&#39;t need it.","body":"Fetch size reduces the number of round trips, thus network calls. The default is 10 (which is low) use something like 1000 or 500 to reduce the network roundtrips. Also if you get a sublist this is is even worse, you get everything and then ditch 80% because you don&#39;t need it."},{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":0,"creation_date":1687787830,"post_id":76557043,"comment_id":134981552,"body_markdown":"It will be very difficult to answer your question, because (1) it is not a single query. Depending on which conditions get activated, the resulting queries, as well as their performance will differ wildly, (2) looking at the query alone is not enough, we would need to see what indices exist on the tables, a ballpark figure of the number of records in each table etc. a query plan would also help","body":"It will be very difficult to answer your question, because (1) it is not a single query. Depending on which conditions get activated, the resulting queries, as well as their performance will differ wildly, (2) looking at the query alone is not enough, we would need to see what indices exist on the tables, a ballpark figure of the number of records in each table etc. a query plan would also help"},{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":1,"creation_date":1687787886,"post_id":76557043,"comment_id":134981564,"body_markdown":"Also, have you tried executing the query against the DB directly? JPA likely isn&#39;t the issue","body":"Also, have you tried executing the query against the DB directly? JPA likely isn&#39;t the issue"},{"owner":{"account_id":4931096,"reputation":77,"user_id":3970855,"accept_rate":50,"display_name":"Najeeba Saidalavi"},"score":0,"creation_date":1687834531,"post_id":76557043,"comment_id":134988497,"body_markdown":"Yes @crizzis, it takes around 1-2 minutes.","body":"Yes @crizzis, it takes around 1-2 minutes."}],"owner":{"account_id":4931096,"reputation":77,"user_id":3970855,"accept_rate":50,"display_name":"Najeeba Saidalavi"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687786094,"creation_date":1687785300,"question_id":76557043,"body_markdown":"I have a requirement to generate a report from db, to get the transactions done by each supplier for a particular buyer. Below is the code to get the details:\r\n \r\n\r\n \r\n\r\n        public Page&lt;TopSupplierItemsDTO&gt; getTopSuppliers(BusinessReportRequestDTO businessReportRequestDTO, Long buyerId, Pageable pageable) {\r\n            StringBuilder stringBuilder = new StringBuilder(); public Page&lt;TopSupplierItemsDTO&gt; getTopSuppliers(BusinessReportRequestDTO businessReportRequestDTO, Long buyerId, Pageable pageable) {\r\n            StringBuilder stringBuilder = new StringBuilder();\r\n    stringBuilder.append(&quot;SELECT sum(amount),supplier.company_name &quot;+\r\n                &quot;FROM purchase_order\\n&quot; +\r\n                &quot;LEFT JOIN process_order ON process_order.id=purchase_order.process_order_id &quot; +\r\n                &quot;LEFT JOIN items ON items.id=process_order.items_id &quot;) ;\r\n            if(businessReportRequestDTO.getItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getItemGroupIdList().isEmpty()) {\r\n                stringBuilder.append(&quot;LEFT JOIN item_group ON items.item_group_id=item_group.id  &quot;);\r\n            }\r\n            if(businessReportRequestDTO.getMainItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getMainItemGroupIdList().isEmpty()) {\r\n                stringBuilder.append(&quot;LEFT JOIN main_item_group ON item_group.main_item_group_id=main_item_group.id  &quot;);\r\n            }\r\n            stringBuilder.append(&quot;LEFT JOIN supplier ON items.supplier_id=supplier.id  &quot; +\r\n                &quot;LEFT JOIN buyer_business ON process_order.buyer_business_id = buyer_business.id   &quot;);\r\n            stringBuilder.append(&quot;LEFT JOIN business_supplier_mapping on business_supplier_mapping.supplier_id=supplier.id and business_supplier_mapping.buyer_business_id=process_order.buyer_business_id &quot;);\r\n            if(businessReportRequestDTO.getFromDate()!=null &amp;&amp; businessReportRequestDTO.getToDate()!=null)\r\n            {\r\n                stringBuilder.append(&quot; WHERE (purchase_order.deleted is null OR purchase_order.deleted is false) AND purchase_order.received_date BETWEEN &#39;&quot;+businessReportRequestDTO.getFromDate()+&quot;&#39; AND  &#39;&quot;+businessReportRequestDTO.getToDate()+&quot;&#39;&quot;);\r\n            }\r\n            stringBuilder.append(&quot; and buyer_business.buyer_id =  &quot;+&quot; &quot;+buyerId+&quot; &quot;);\r\n            stringBuilder.append(&quot; and purchase_order.purchase_order_status = &#39;PROCESSED&#39; &quot;);\r\n            stringBuilder.append(&quot; and business_supplier_mapping.deleted is false &quot;);\r\n            if(businessReportRequestDTO.getItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getItemGroupIdList().isEmpty()){\r\n                String itemGroupIds = businessReportRequestDTO.getItemGroupIdList().stream().map(Object::toString)\r\n                    .collect(Collectors.joining(&quot;,&quot;));\r\n                stringBuilder.append(&quot; and items.item_group_id in ( &quot;+itemGroupIds+&quot; )&quot;);\r\n            }\r\n            if(businessReportRequestDTO.getMainItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getMainItemGroupIdList().isEmpty()){\r\n                String mainItemGroupIds = businessReportRequestDTO.getMainItemGroupIdList().stream().map(Object::toString)\r\n                    .collect(Collectors.joining(&quot;,&quot;));\r\n                stringBuilder.append(&quot; and item_group.main_item_group_id in ( &quot;+mainItemGroupIds+&quot; )&quot;);\r\n            }\r\n            if (businessReportRequestDTO.getSupplierIdList()!=null &amp;&amp; !businessReportRequestDTO.getSupplierIdList().isEmpty()) {\r\n                String supplierIds = businessReportRequestDTO.getSupplierIdList().stream().map(Object::toString)\r\n                    .collect(Collectors.joining(&quot;,&quot;));\r\n                stringBuilder.append(&quot; and items.supplier_id in ( &quot; + supplierIds + &quot; )&quot;);\r\n            }\r\n            if (businessReportRequestDTO.getBuyerBusinessIdList()!=null &amp;&amp; !businessReportRequestDTO.getBuyerBusinessIdList().isEmpty()) {\r\n                String businessIds = businessReportRequestDTO.getBuyerBusinessIdList().stream().map(Object::toString)\r\n                    .collect(Collectors.joining(&quot;,&quot;));\r\n                stringBuilder.append(&quot; and buyer_business.id in ( &quot; + businessIds + &quot; ) &quot;);\r\n            }\r\n            stringBuilder.append(&quot;   group by items.supplier_id&quot;);\r\n            Query resultQuery = em.createNativeQuery(stringBuilder.toString());\r\n            List&lt;Object[]&gt; result = resultQuery.getResultList();\r\n            //Query countQuery = em.createNativeQuery(stringBuilder.toString());\r\n            int count= result.size();\r\n            log.info(&quot; SIZE &quot;+count);\r\n            List&lt;TopSupplierItemsDTO&gt; topSupplierItemsDTOList = this.setTopSupplierItemsDTO(result); stringBuilder.append(&quot;SELECT sum(amount),supplier.company_name &quot;+\r\n                &quot;FROM purchase_order\\n&quot; +\r\n                &quot;LEFT JOIN process_order ON process_order.id=purchase_order.process_order_id &quot; +\r\n                &quot;LEFT JOIN items ON items.id=process_order.items_id &quot;) ;\r\n            if(businessReportRequestDTO.getItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getItemGroupIdList().isEmpty()) {\r\n                stringBuilder.append(&quot;LEFT JOIN item_group ON items.item_group_id=item_group.id  &quot;);\r\n            }\r\n            if(businessReportRequestDTO.getMainItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getMainItemGroupIdList().isEmpty()) {\r\n                stringBuilder.append(&quot;LEFT JOIN main_item_group ON item_group.main_item_group_id=main_item_group.id  &quot;);\r\n            }\r\n            stringBuilder.append(&quot;LEFT JOIN supplier ON items.supplier_id=supplier.id  &quot; +\r\n                &quot;LEFT JOIN buyer_business ON process_order.buyer_business_id = buyer_business.id   &quot;);\r\n            stringBuilder.append(&quot;LEFT JOIN business_supplier_mapping on business_supplier_mapping.supplier_id=supplier.id and business_supplier_mapping.buyer_business_id=process_order.buyer_business_id &quot;);\r\n            if(businessReportRequestDTO.getFromDate()!=null &amp;&amp; businessReportRequestDTO.getToDate()!=null)\r\n            {\r\n                stringBuilder.append(&quot; WHERE (purchase_order.deleted is null OR purchase_order.deleted is false) AND purchase_order.received_date BETWEEN &#39;&quot;+businessReportRequestDTO.getFromDate()+&quot;&#39; AND  &#39;&quot;+businessReportRequestDTO.getToDate()+&quot;&#39;&quot;);\r\n            }\r\n            stringBuilder.append(&quot; and buyer_business.buyer_id =  &quot;+&quot; &quot;+buyerId+&quot; &quot;);\r\n            stringBuilder.append(&quot; and purchase_order.purchase_order_status = &#39;PROCESSED&#39; &quot;);\r\n            stringBuilder.append(&quot; and business_supplier_mapping.deleted is false &quot;);\r\n            if(businessReportRequestDTO.getItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getItemGroupIdList().isEmpty()){\r\n                String itemGroupIds = businessReportRequestDTO.getItemGroupIdList().stream().map(Object::toString)\r\n                    .collect(Collectors.joining(&quot;,&quot;));\r\n                stringBuilder.append(&quot; and items.item_group_id in ( &quot;+itemGroupIds+&quot; )&quot;);\r\n            }\r\n            if(businessReportRequestDTO.getMainItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getMainItemGroupIdList().isEmpty()){\r\n                String mainItemGroupIds = businessReportRequestDTO.getMainItemGroupIdList().stream().map(Object::toString)\r\n                    .collect(Collectors.joining(&quot;,&quot;));\r\n                stringBuilder.append(&quot; and item_group.main_item_group_id in ( &quot;+mainItemGroupIds+&quot; )&quot;);\r\n            }\r\n            if (businessReportRequestDTO.getSupplierIdList()!=null &amp;&amp; !businessReportRequestDTO.getSupplierIdList().isEmpty()) {\r\n                String supplierIds = businessReportRequestDTO.getSupplierIdList().stream().map(Object::toString)\r\n                    .collect(Collectors.joining(&quot;,&quot;));\r\n                stringBuilder.append(&quot; and items.supplier_id in ( &quot; + supplierIds + &quot; )&quot;);\r\n            }\r\n            if (businessReportRequestDTO.getBuyerBusinessIdList()!=null &amp;&amp; !businessReportRequestDTO.getBuyerBusinessIdList().isEmpty()) {\r\n                String businessIds = businessReportRequestDTO.getBuyerBusinessIdList().stream().map(Object::toString)\r\n                    .collect(Collectors.joining(&quot;,&quot;));\r\n                stringBuilder.append(&quot; and buyer_business.id in ( &quot; + businessIds + &quot; ) &quot;);\r\n            }\r\n            stringBuilder.append(&quot;   group by items.supplier_id&quot;);\r\n            Query resultQuery = em.createNativeQuery(stringBuilder.toString());\r\n            List&lt;Object[]&gt; result = resultQuery.getResultList();\r\n            //Query countQuery = em.createNativeQuery(stringBuilder.toString());\r\n            int count= result.size();\r\n            log.info(&quot; SIZE &quot;+count);\r\n            List&lt;TopSupplierItemsDTO&gt; topSupplierItemsDTOList = this.setTopSupplierItemsDTO(result); stringBuilder.append(&quot;SELECT sum(amount),supplier.company_name &quot;+\r\n                &quot;FROM purchase_order\\n&quot; +\r\n                &quot;LEFT JOIN process_order ON process_order.id=purchase_order.process_order_id &quot; +\r\n                &quot;LEFT JOIN items ON items.id=process_order.items_id &quot;) ;\r\n            if(businessReportRequestDTO.getItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getItemGroupIdList().isEmpty()) {\r\n                stringBuilder.append(&quot;LEFT JOIN item_group ON items.item_group_id=item_group.id  &quot;);\r\n            }\r\n            if(businessReportRequestDTO.getMainItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getMainItemGroupIdList().isEmpty()) {\r\n                stringBuilder.append(&quot;LEFT JOIN main_item_group ON item_group.main_item_group_id=main_item_group.id  &quot;);\r\n            }\r\n            stringBuilder.append(&quot;LEFT JOIN supplier ON items.supplier_id=supplier.id  &quot; +\r\n                &quot;LEFT JOIN buyer_business ON process_order.buyer_business_id = buyer_business.id   &quot;);\r\n            stringBuilder.append(&quot;LEFT JOIN business_supplier_mapping on business_supplier_mapping.supplier_id=supplier.id and business_supplier_mapping.buyer_business_id=process_order.buyer_business_id &quot;);\r\n            if(businessReportRequestDTO.getFromDate()!=null &amp;&amp; businessReportRequestDTO.getToDate()!=null)\r\n            {\r\n                stringBuilder.append(&quot; WHERE (purchase_order.deleted is null OR purchase_order.deleted is false) AND purchase_order.received_date BETWEEN &#39;&quot;+businessReportRequestDTO.getFromDate()+&quot;&#39; AND  &#39;&quot;+businessReportRequestDTO.getToDate()+&quot;&#39;&quot;);\r\n            }\r\n            stringBuilder.append(&quot; and buyer_business.buyer_id =  &quot;+&quot; &quot;+buyerId+&quot; &quot;);\r\n            stringBuilder.append(&quot; and purchase_order.purchase_order_status = &#39;PROCESSED&#39; &quot;);\r\n            stringBuilder.append(&quot; and business_supplier_mapping.deleted is false &quot;);\r\n            if(businessReportRequestDTO.getItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getItemGroupIdList().isEmpty()){\r\n                String itemGroupIds = businessReportRequestDTO.getItemGroupIdList().stream().map(Object::toString)\r\n                    .collect(Collectors.joining(&quot;,&quot;));\r\n                stringBuilder.append(&quot; and items.item_group_id in ( &quot;+itemGroupIds+&quot; )&quot;);\r\n            }\r\n            if(businessReportRequestDTO.getMainItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getMainItemGroupIdList().isEmpty()){\r\n                String mainItemGroupIds = businessReportRequestDTO.getMainItemGroupIdList().stream().map(Object::toString)\r\n                    .collect(Collectors.joining(&quot;,&quot;));\r\n                stringBuilder.append(&quot; and item_group.main_item_group_id in ( &quot;+mainItemGroupIds+&quot; )&quot;);\r\n            }\r\n            if (businessReportRequestDTO.getSupplierIdList()!=null &amp;&amp; !businessReportRequestDTO.getSupplierIdList().isEmpty()) {\r\n                String supplierIds = businessReportRequestDTO.getSupplierIdList().stream().map(Object::toString)\r\n                    .collect(Collectors.joining(&quot;,&quot;));\r\n                stringBuilder.append(&quot; and items.supplier_id in ( &quot; + supplierIds + &quot; )&quot;);\r\n            }\r\n            if (businessReportRequestDTO.getBuyerBusinessIdList()!=null &amp;&amp; !businessReportRequestDTO.getBuyerBusinessIdList().isEmpty()) {\r\n                String businessIds = businessReportRequestDTO.getBuyerBusinessIdList().stream().map(Object::toString)\r\n                    .collect(Collectors.joining(&quot;,&quot;));\r\n                stringBuilder.append(&quot; and buyer_business.id in ( &quot; + businessIds + &quot; ) &quot;);\r\n            }\r\n            stringBuilder.append(&quot;   group by items.supplier_id&quot;);\r\n            Query resultQuery = em.createNativeQuery(stringBuilder.toString());\r\n            List&lt;Object[]&gt; result = resultQuery.getResultList();\r\n            //Query countQuery = em.createNativeQuery(stringBuilder.toString());\r\n            int count= result.size();\r\n            log.info(&quot; SIZE &quot;+count);\r\n            List&lt;TopSupplierItemsDTO&gt; topSupplierItemsDTOList = setTopSupplierItemsDTO(result);\r\n            return new PageImpl&lt;&gt;(topSupplierItemsDTOList, pageable, count);\r\n    }\r\n\r\nThe issue is this query takes around 1-2 minutes to execute, which makes it slower. The responsse time is between 1.7 - 1.9 minutes for 6 months range. Is there a way to make it quicker? I heard that using spring data will reduce the speed, but I don&#39;t know how to implement it when there is if condition in the query implementation. \r\nThanks in advance.","title":"How to increase query speed with multiple joins and if conditions","body":"<p>I have a requirement to generate a report from db, to get the transactions done by each supplier for a particular buyer. Below is the code to get the details:</p>\n<pre><code>    public Page&lt;TopSupplierItemsDTO&gt; getTopSuppliers(BusinessReportRequestDTO businessReportRequestDTO, Long buyerId, Pageable pageable) {\n        StringBuilder stringBuilder = new StringBuilder(); public Page&lt;TopSupplierItemsDTO&gt; getTopSuppliers(BusinessReportRequestDTO businessReportRequestDTO, Long buyerId, Pageable pageable) {\n        StringBuilder stringBuilder = new StringBuilder();\nstringBuilder.append(&quot;SELECT sum(amount),supplier.company_name &quot;+\n            &quot;FROM purchase_order\\n&quot; +\n            &quot;LEFT JOIN process_order ON process_order.id=purchase_order.process_order_id &quot; +\n            &quot;LEFT JOIN items ON items.id=process_order.items_id &quot;) ;\n        if(businessReportRequestDTO.getItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getItemGroupIdList().isEmpty()) {\n            stringBuilder.append(&quot;LEFT JOIN item_group ON items.item_group_id=item_group.id  &quot;);\n        }\n        if(businessReportRequestDTO.getMainItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getMainItemGroupIdList().isEmpty()) {\n            stringBuilder.append(&quot;LEFT JOIN main_item_group ON item_group.main_item_group_id=main_item_group.id  &quot;);\n        }\n        stringBuilder.append(&quot;LEFT JOIN supplier ON items.supplier_id=supplier.id  &quot; +\n            &quot;LEFT JOIN buyer_business ON process_order.buyer_business_id = buyer_business.id   &quot;);\n        stringBuilder.append(&quot;LEFT JOIN business_supplier_mapping on business_supplier_mapping.supplier_id=supplier.id and business_supplier_mapping.buyer_business_id=process_order.buyer_business_id &quot;);\n        if(businessReportRequestDTO.getFromDate()!=null &amp;&amp; businessReportRequestDTO.getToDate()!=null)\n        {\n            stringBuilder.append(&quot; WHERE (purchase_order.deleted is null OR purchase_order.deleted is false) AND purchase_order.received_date BETWEEN '&quot;+businessReportRequestDTO.getFromDate()+&quot;' AND  '&quot;+businessReportRequestDTO.getToDate()+&quot;'&quot;);\n        }\n        stringBuilder.append(&quot; and buyer_business.buyer_id =  &quot;+&quot; &quot;+buyerId+&quot; &quot;);\n        stringBuilder.append(&quot; and purchase_order.purchase_order_status = 'PROCESSED' &quot;);\n        stringBuilder.append(&quot; and business_supplier_mapping.deleted is false &quot;);\n        if(businessReportRequestDTO.getItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getItemGroupIdList().isEmpty()){\n            String itemGroupIds = businessReportRequestDTO.getItemGroupIdList().stream().map(Object::toString)\n                .collect(Collectors.joining(&quot;,&quot;));\n            stringBuilder.append(&quot; and items.item_group_id in ( &quot;+itemGroupIds+&quot; )&quot;);\n        }\n        if(businessReportRequestDTO.getMainItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getMainItemGroupIdList().isEmpty()){\n            String mainItemGroupIds = businessReportRequestDTO.getMainItemGroupIdList().stream().map(Object::toString)\n                .collect(Collectors.joining(&quot;,&quot;));\n            stringBuilder.append(&quot; and item_group.main_item_group_id in ( &quot;+mainItemGroupIds+&quot; )&quot;);\n        }\n        if (businessReportRequestDTO.getSupplierIdList()!=null &amp;&amp; !businessReportRequestDTO.getSupplierIdList().isEmpty()) {\n            String supplierIds = businessReportRequestDTO.getSupplierIdList().stream().map(Object::toString)\n                .collect(Collectors.joining(&quot;,&quot;));\n            stringBuilder.append(&quot; and items.supplier_id in ( &quot; + supplierIds + &quot; )&quot;);\n        }\n        if (businessReportRequestDTO.getBuyerBusinessIdList()!=null &amp;&amp; !businessReportRequestDTO.getBuyerBusinessIdList().isEmpty()) {\n            String businessIds = businessReportRequestDTO.getBuyerBusinessIdList().stream().map(Object::toString)\n                .collect(Collectors.joining(&quot;,&quot;));\n            stringBuilder.append(&quot; and buyer_business.id in ( &quot; + businessIds + &quot; ) &quot;);\n        }\n        stringBuilder.append(&quot;   group by items.supplier_id&quot;);\n        Query resultQuery = em.createNativeQuery(stringBuilder.toString());\n        List&lt;Object[]&gt; result = resultQuery.getResultList();\n        //Query countQuery = em.createNativeQuery(stringBuilder.toString());\n        int count= result.size();\n        log.info(&quot; SIZE &quot;+count);\n        List&lt;TopSupplierItemsDTO&gt; topSupplierItemsDTOList = this.setTopSupplierItemsDTO(result); stringBuilder.append(&quot;SELECT sum(amount),supplier.company_name &quot;+\n            &quot;FROM purchase_order\\n&quot; +\n            &quot;LEFT JOIN process_order ON process_order.id=purchase_order.process_order_id &quot; +\n            &quot;LEFT JOIN items ON items.id=process_order.items_id &quot;) ;\n        if(businessReportRequestDTO.getItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getItemGroupIdList().isEmpty()) {\n            stringBuilder.append(&quot;LEFT JOIN item_group ON items.item_group_id=item_group.id  &quot;);\n        }\n        if(businessReportRequestDTO.getMainItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getMainItemGroupIdList().isEmpty()) {\n            stringBuilder.append(&quot;LEFT JOIN main_item_group ON item_group.main_item_group_id=main_item_group.id  &quot;);\n        }\n        stringBuilder.append(&quot;LEFT JOIN supplier ON items.supplier_id=supplier.id  &quot; +\n            &quot;LEFT JOIN buyer_business ON process_order.buyer_business_id = buyer_business.id   &quot;);\n        stringBuilder.append(&quot;LEFT JOIN business_supplier_mapping on business_supplier_mapping.supplier_id=supplier.id and business_supplier_mapping.buyer_business_id=process_order.buyer_business_id &quot;);\n        if(businessReportRequestDTO.getFromDate()!=null &amp;&amp; businessReportRequestDTO.getToDate()!=null)\n        {\n            stringBuilder.append(&quot; WHERE (purchase_order.deleted is null OR purchase_order.deleted is false) AND purchase_order.received_date BETWEEN '&quot;+businessReportRequestDTO.getFromDate()+&quot;' AND  '&quot;+businessReportRequestDTO.getToDate()+&quot;'&quot;);\n        }\n        stringBuilder.append(&quot; and buyer_business.buyer_id =  &quot;+&quot; &quot;+buyerId+&quot; &quot;);\n        stringBuilder.append(&quot; and purchase_order.purchase_order_status = 'PROCESSED' &quot;);\n        stringBuilder.append(&quot; and business_supplier_mapping.deleted is false &quot;);\n        if(businessReportRequestDTO.getItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getItemGroupIdList().isEmpty()){\n            String itemGroupIds = businessReportRequestDTO.getItemGroupIdList().stream().map(Object::toString)\n                .collect(Collectors.joining(&quot;,&quot;));\n            stringBuilder.append(&quot; and items.item_group_id in ( &quot;+itemGroupIds+&quot; )&quot;);\n        }\n        if(businessReportRequestDTO.getMainItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getMainItemGroupIdList().isEmpty()){\n            String mainItemGroupIds = businessReportRequestDTO.getMainItemGroupIdList().stream().map(Object::toString)\n                .collect(Collectors.joining(&quot;,&quot;));\n            stringBuilder.append(&quot; and item_group.main_item_group_id in ( &quot;+mainItemGroupIds+&quot; )&quot;);\n        }\n        if (businessReportRequestDTO.getSupplierIdList()!=null &amp;&amp; !businessReportRequestDTO.getSupplierIdList().isEmpty()) {\n            String supplierIds = businessReportRequestDTO.getSupplierIdList().stream().map(Object::toString)\n                .collect(Collectors.joining(&quot;,&quot;));\n            stringBuilder.append(&quot; and items.supplier_id in ( &quot; + supplierIds + &quot; )&quot;);\n        }\n        if (businessReportRequestDTO.getBuyerBusinessIdList()!=null &amp;&amp; !businessReportRequestDTO.getBuyerBusinessIdList().isEmpty()) {\n            String businessIds = businessReportRequestDTO.getBuyerBusinessIdList().stream().map(Object::toString)\n                .collect(Collectors.joining(&quot;,&quot;));\n            stringBuilder.append(&quot; and buyer_business.id in ( &quot; + businessIds + &quot; ) &quot;);\n        }\n        stringBuilder.append(&quot;   group by items.supplier_id&quot;);\n        Query resultQuery = em.createNativeQuery(stringBuilder.toString());\n        List&lt;Object[]&gt; result = resultQuery.getResultList();\n        //Query countQuery = em.createNativeQuery(stringBuilder.toString());\n        int count= result.size();\n        log.info(&quot; SIZE &quot;+count);\n        List&lt;TopSupplierItemsDTO&gt; topSupplierItemsDTOList = this.setTopSupplierItemsDTO(result); stringBuilder.append(&quot;SELECT sum(amount),supplier.company_name &quot;+\n            &quot;FROM purchase_order\\n&quot; +\n            &quot;LEFT JOIN process_order ON process_order.id=purchase_order.process_order_id &quot; +\n            &quot;LEFT JOIN items ON items.id=process_order.items_id &quot;) ;\n        if(businessReportRequestDTO.getItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getItemGroupIdList().isEmpty()) {\n            stringBuilder.append(&quot;LEFT JOIN item_group ON items.item_group_id=item_group.id  &quot;);\n        }\n        if(businessReportRequestDTO.getMainItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getMainItemGroupIdList().isEmpty()) {\n            stringBuilder.append(&quot;LEFT JOIN main_item_group ON item_group.main_item_group_id=main_item_group.id  &quot;);\n        }\n        stringBuilder.append(&quot;LEFT JOIN supplier ON items.supplier_id=supplier.id  &quot; +\n            &quot;LEFT JOIN buyer_business ON process_order.buyer_business_id = buyer_business.id   &quot;);\n        stringBuilder.append(&quot;LEFT JOIN business_supplier_mapping on business_supplier_mapping.supplier_id=supplier.id and business_supplier_mapping.buyer_business_id=process_order.buyer_business_id &quot;);\n        if(businessReportRequestDTO.getFromDate()!=null &amp;&amp; businessReportRequestDTO.getToDate()!=null)\n        {\n            stringBuilder.append(&quot; WHERE (purchase_order.deleted is null OR purchase_order.deleted is false) AND purchase_order.received_date BETWEEN '&quot;+businessReportRequestDTO.getFromDate()+&quot;' AND  '&quot;+businessReportRequestDTO.getToDate()+&quot;'&quot;);\n        }\n        stringBuilder.append(&quot; and buyer_business.buyer_id =  &quot;+&quot; &quot;+buyerId+&quot; &quot;);\n        stringBuilder.append(&quot; and purchase_order.purchase_order_status = 'PROCESSED' &quot;);\n        stringBuilder.append(&quot; and business_supplier_mapping.deleted is false &quot;);\n        if(businessReportRequestDTO.getItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getItemGroupIdList().isEmpty()){\n            String itemGroupIds = businessReportRequestDTO.getItemGroupIdList().stream().map(Object::toString)\n                .collect(Collectors.joining(&quot;,&quot;));\n            stringBuilder.append(&quot; and items.item_group_id in ( &quot;+itemGroupIds+&quot; )&quot;);\n        }\n        if(businessReportRequestDTO.getMainItemGroupIdList()!=null &amp;&amp; !businessReportRequestDTO.getMainItemGroupIdList().isEmpty()){\n            String mainItemGroupIds = businessReportRequestDTO.getMainItemGroupIdList().stream().map(Object::toString)\n                .collect(Collectors.joining(&quot;,&quot;));\n            stringBuilder.append(&quot; and item_group.main_item_group_id in ( &quot;+mainItemGroupIds+&quot; )&quot;);\n        }\n        if (businessReportRequestDTO.getSupplierIdList()!=null &amp;&amp; !businessReportRequestDTO.getSupplierIdList().isEmpty()) {\n            String supplierIds = businessReportRequestDTO.getSupplierIdList().stream().map(Object::toString)\n                .collect(Collectors.joining(&quot;,&quot;));\n            stringBuilder.append(&quot; and items.supplier_id in ( &quot; + supplierIds + &quot; )&quot;);\n        }\n        if (businessReportRequestDTO.getBuyerBusinessIdList()!=null &amp;&amp; !businessReportRequestDTO.getBuyerBusinessIdList().isEmpty()) {\n            String businessIds = businessReportRequestDTO.getBuyerBusinessIdList().stream().map(Object::toString)\n                .collect(Collectors.joining(&quot;,&quot;));\n            stringBuilder.append(&quot; and buyer_business.id in ( &quot; + businessIds + &quot; ) &quot;);\n        }\n        stringBuilder.append(&quot;   group by items.supplier_id&quot;);\n        Query resultQuery = em.createNativeQuery(stringBuilder.toString());\n        List&lt;Object[]&gt; result = resultQuery.getResultList();\n        //Query countQuery = em.createNativeQuery(stringBuilder.toString());\n        int count= result.size();\n        log.info(&quot; SIZE &quot;+count);\n        List&lt;TopSupplierItemsDTO&gt; topSupplierItemsDTOList = setTopSupplierItemsDTO(result);\n        return new PageImpl&lt;&gt;(topSupplierItemsDTOList, pageable, count);\n}\n</code></pre>\n<p>The issue is this query takes around 1-2 minutes to execute, which makes it slower. The responsse time is between 1.7 - 1.9 minutes for 6 months range. Is there a way to make it quicker? I heard that using spring data will reduce the speed, but I don't know how to implement it when there is if condition in the query implementation.\nThanks in advance.</p>\n"},{"tags":["java","string","java-stream","collectors"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1664098264,"post_id":73843343,"comment_id":130389598,"body_markdown":"Are you required to implement your own Collector?  I doubt it’s the easiest way to solve this.","body":"Are you required to implement your own Collector?  I doubt it’s the easiest way to solve this."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1664119684,"post_id":73843343,"comment_id":130393569,"body_markdown":"@Abra Your edit changed the numbers from left-justified to (sort of) right-justified.  Are you sure that didn’t change the meaning of the task?","body":"@Abra Your edit changed the numbers from left-justified to (sort of) right-justified.  Are you sure that didn’t change the meaning of the task?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1664179848,"post_id":73843343,"comment_id":130403607,"body_markdown":"“*I have been trying to write…*”—I don’t see an honest attempt here, just an empty method and a “write the code for me”.","body":"“<i>I have been trying to write…</i>”—I don’t see an honest attempt here, just an empty method and a “write the code for me”."}],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664102516,"creation_date":1664102516,"answer_id":73843854,"question_id":73843343,"body_markdown":"Most of the time, when I need to create a custom collector, I create a new class for it and give it methods `accumulate`, `combine` and `finish`, to match the operators in a collector. That class can do whatever is needed. For instance, where the `finish` is optional:\r\n```java\r\nCollector&lt;T, ?, R&gt; collector = Collector.of(\r\n        MyCollector::new,\r\n        MyCollector::accumulate,\r\n        MyCollector::combine,\r\n        MyCollector::finish);\r\n```\r\n\r\nIn your case you will have to stream twice though, as the collector needs to have seen the length of each student name before it can output anything. The collector would store its `CourseResult` instances, as well as the maximum length(s). It would then stream again, and use `String.format` to do all the hard work in adding padding (e.g. `&quot;%&quot; + maxNameLength + &quot;s | %10s | ...&quot;`).\r\n\r\nThe `finish` method would look like this (simplified):\r\n```java\r\npublic String finish() {\r\n    String header = &quot;...\\n&quot;; // use same padding\r\n    String pattern = &quot;...&quot;;\r\n    return results.stream()\r\n            .map(result -&gt; String.format(pattern, result.getPerson().getName(), ...)\r\n            .collect(Collectors.joining(&quot;\\n&quot;, header, &quot;&quot;));\r\n}\r\n```\r\nI wouldn&#39;t use the exact same pattern for the header, because the rows contain numbers where the header does not.","title":"How to return a Collector in Java, that forms a special printable sting?","body":"<p>Most of the time, when I need to create a custom collector, I create a new class for it and give it methods <code>accumulate</code>, <code>combine</code> and <code>finish</code>, to match the operators in a collector. That class can do whatever is needed. For instance, where the <code>finish</code> is optional:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Collector&lt;T, ?, R&gt; collector = Collector.of(\n        MyCollector::new,\n        MyCollector::accumulate,\n        MyCollector::combine,\n        MyCollector::finish);\n</code></pre>\n<p>In your case you will have to stream twice though, as the collector needs to have seen the length of each student name before it can output anything. The collector would store its <code>CourseResult</code> instances, as well as the maximum length(s). It would then stream again, and use <code>String.format</code> to do all the hard work in adding padding (e.g. <code>&quot;%&quot; + maxNameLength + &quot;s | %10s | ...&quot;</code>).</p>\n<p>The <code>finish</code> method would look like this (simplified):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String finish() {\n    String header = &quot;...\\n&quot;; // use same padding\n    String pattern = &quot;...&quot;;\n    return results.stream()\n            .map(result -&gt; String.format(pattern, result.getPerson().getName(), ...)\n            .collect(Collectors.joining(&quot;\\n&quot;, header, &quot;&quot;));\n}\n</code></pre>\n<p>I wouldn't use the exact same pattern for the header, because the rows contain numbers where the header does not.</p>\n"}],"owner":{"account_id":26436503,"reputation":17,"user_id":20081790,"display_name":"Khabju"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":312,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":1,"score":0,"last_activity_date":1687785884,"creation_date":1664097433,"question_id":73843343,"body_markdown":"I have been trying to write a method called `printableStringCollector`, which basically returns a collector that forms a special printable String as described below - \r\n\r\nPrintable String spec\r\n\r\nIt is a multi-line String containing a formatted table of all results and total values and marks.\r\nThe format of your table should meet the following requirements:\r\n\r\n* Headers are required.\r\n* Column width depends on values lengths.\r\n* Rows are sorted by students&#39; last names.\r\n* Columns are sorted by the names of tasks.\r\n* Double values are displayed with 2 digits after the decimal point.\r\n* Values of the column &quot;Mark&quot; are defined by the average total score.\r\n\r\n\r\nExample:\r\n```none\r\nStudent........|Phalaxing |Shieldwalling |Tercioing |Wedging |Total |Mark |\r\nEco Betty......|0 ........|83............|89........|59......|57.75 |F ...|\r\nLodbrok Johnny |61 .......|92............|67........|0.......|55.00 |F....|\r\nPaige Umberto..|75....... |94............|0.........|52......|55.25 |F....|\r\nAverage........|45.33.....|89.67.........|52.00.....|37.00...|56.00 |F....|\r\n```\r\n* wrote the dots for better visual representation\r\n\r\nCan anyone help me implement this method?\r\n\r\n    public Collector&lt;CourseResult, ?, String&gt; printableStringCollector() {\r\n\r\n    }\r\n\r\n`CourseResult` class:\r\n\r\n    public class CourseResult {\r\n        private final Person person;\r\n        private final Map&lt;String, Integer&gt; taskResults;\r\n\r\n        public CourseResult(final Person person, final Map&lt;String, Integer&gt; taskResults) {\r\n            this.person = person;\r\n            this.taskResults = taskResults;\r\n        }\r\n\r\n        public Person getPerson() {\r\n            return person;\r\n        }\r\n\r\n        public Map&lt;String, Integer&gt; getTaskResults() {\r\n            return taskResults;\r\n        }\r\n    }\r\n\r\n`Person` class:\r\n\r\n    public class Person {\r\n        private final String firstName;\r\n        private final String lastName;\r\n        private final int age;\r\n\r\n        public Person(String firstName, String lastName, int age) {\r\n            this.firstName = firstName;\r\n            this.lastName = lastName;\r\n            this.age = age;\r\n        }\r\n\r\n        public String getFirstName() {\r\n            return firstName;\r\n        }\r\n\r\n        public String getLastName() {\r\n            return lastName;\r\n        }\r\n\r\n        public int getAge() {\r\n            return age;\r\n        }\r\n\r\n        @Override\r\n        public boolean equals(final Object o) {\r\n            if (this == o) return true;\r\n            if (o == null || getClass() != o.getClass()) return false;\r\n            final Person person = (Person) o;\r\n            return age == person.age &amp;&amp;\r\n                          Objects.equals(firstName, person.firstName) &amp;&amp;\r\n                          Objects.equals(lastName, person.lastName);\r\n        }\r\n\r\n        @Override\r\n        public int hashCode() {\r\n            return Objects.hash(firstName, lastName, age);\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return new StringJoiner(&quot;, &quot;, Person.class.getSimpleName() + &quot;[&quot;, &quot;]&quot;)\r\n                    .add(&quot;firstName=&#39;&quot; + firstName + &quot;&#39;&quot;)\r\n                    .add(&quot;lastName=&#39;&quot; + lastName + &quot;&#39;&quot;)\r\n                    .add(&quot;age=&quot; + age)\r\n                    .toString();\r\n        }\r\n    }\r\n","title":"How to return a Collector in Java, that forms a special printable sting?","body":"<p>I have been trying to write a method called <code>printableStringCollector</code>, which basically returns a collector that forms a special printable String as described below -</p>\n<p>Printable String spec</p>\n<p>It is a multi-line String containing a formatted table of all results and total values and marks.\nThe format of your table should meet the following requirements:</p>\n<ul>\n<li>Headers are required.</li>\n<li>Column width depends on values lengths.</li>\n<li>Rows are sorted by students' last names.</li>\n<li>Columns are sorted by the names of tasks.</li>\n<li>Double values are displayed with 2 digits after the decimal point.</li>\n<li>Values of the column &quot;Mark&quot; are defined by the average total score.</li>\n</ul>\n<p>Example:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Student........|Phalaxing |Shieldwalling |Tercioing |Wedging |Total |Mark |\nEco Betty......|0 ........|83............|89........|59......|57.75 |F ...|\nLodbrok Johnny |61 .......|92............|67........|0.......|55.00 |F....|\nPaige Umberto..|75....... |94............|0.........|52......|55.25 |F....|\nAverage........|45.33.....|89.67.........|52.00.....|37.00...|56.00 |F....|\n</code></pre>\n<ul>\n<li>wrote the dots for better visual representation</li>\n</ul>\n<p>Can anyone help me implement this method?</p>\n<pre><code>public Collector&lt;CourseResult, ?, String&gt; printableStringCollector() {\n\n}\n</code></pre>\n<p><code>CourseResult</code> class:</p>\n<pre><code>public class CourseResult {\n    private final Person person;\n    private final Map&lt;String, Integer&gt; taskResults;\n\n    public CourseResult(final Person person, final Map&lt;String, Integer&gt; taskResults) {\n        this.person = person;\n        this.taskResults = taskResults;\n    }\n\n    public Person getPerson() {\n        return person;\n    }\n\n    public Map&lt;String, Integer&gt; getTaskResults() {\n        return taskResults;\n    }\n}\n</code></pre>\n<p><code>Person</code> class:</p>\n<pre><code>public class Person {\n    private final String firstName;\n    private final String lastName;\n    private final int age;\n\n    public Person(String firstName, String lastName, int age) {\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.age = age;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    @Override\n    public boolean equals(final Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        final Person person = (Person) o;\n        return age == person.age &amp;&amp;\n                      Objects.equals(firstName, person.firstName) &amp;&amp;\n                      Objects.equals(lastName, person.lastName);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(firstName, lastName, age);\n    }\n\n    @Override\n    public String toString() {\n        return new StringJoiner(&quot;, &quot;, Person.class.getSimpleName() + &quot;[&quot;, &quot;]&quot;)\n                .add(&quot;firstName='&quot; + firstName + &quot;'&quot;)\n                .add(&quot;lastName='&quot; + lastName + &quot;'&quot;)\n                .add(&quot;age=&quot; + age)\n                .toString();\n    }\n}\n</code></pre>\n"},{"tags":["java","mocking","jms","message-queue","provider"],"comments":[{"owner":{"account_id":74767,"reputation":31622,"user_id":214668,"accept_rate":100,"display_name":"T.Rob"},"score":1,"creation_date":1287507224,"post_id":3970567,"comment_id":4245936,"body_markdown":"Why go to all that trouble?  Why not just install a local JMS provider on your workstation and use it?  You can download open source ones and trial versions of vendor JMS providers.  Since it&#39;s JMS, any compliant implementation will work for unit testing.","body":"Why go to all that trouble?  Why not just install a local JMS provider on your workstation and use it?  You can download open source ones and trial versions of vendor JMS providers.  Since it&#39;s JMS, any compliant implementation will work for unit testing."},{"owner":{"account_id":57024,"reputation":13340,"user_id":170830,"accept_rate":90,"display_name":"sergionni"},"score":0,"creation_date":1287507458,"post_id":3970567,"comment_id":4245975,"body_markdown":"That is i ask, so i need install JMS provider. What could you advise me? thank you","body":"That is i ask, so i need install JMS provider. What could you advise me? thank you"},{"owner":{"account_id":74767,"reputation":31622,"user_id":214668,"accept_rate":100,"display_name":"T.Rob"},"score":0,"creation_date":1287531901,"post_id":3970567,"comment_id":4249965,"body_markdown":"Well, I&#39;m an IBMer so I have to suggest the trial of WMQ.  :-)  But I see you&#39;ve already found ActiveMQ which you can use for development without it expiring.  On the other hand, whatever you use in production would be best to develop on so move to that once you know what it will be.","body":"Well, I&#39;m an IBMer so I have to suggest the trial of WMQ.  :-)  But I see you&#39;ve already found ActiveMQ which you can use for development without it expiring.  On the other hand, whatever you use in production would be best to develop on so move to that once you know what it will be."},{"owner":{"account_id":9173604,"reputation":243,"user_id":6820091,"display_name":"Yallaling Goudar"},"score":2,"creation_date":1480589376,"post_id":3970567,"comment_id":69029948,"body_markdown":"Easy way to mock a JMS Queue. Refer below website https://dzone.com/articles/mockrunner-jms-spring-unit","body":"Easy way to mock a JMS Queue. Refer below website <a href=\"https://dzone.com/articles/mockrunner-jms-spring-unit\" rel=\"nofollow noreferrer\">dzone.com/articles/mockrunner-jms-spring-unit</a>"}],"answers":[{"comments":[{"owner":{"account_id":166831,"reputation":3471,"user_id":391231,"display_name":"Andres Kievsky"},"score":45,"creation_date":1348711788,"post_id":3970715,"comment_id":17003809,"body_markdown":"I completely disagree. Mocking an external system is critical for unit tests, especially if you rely on an external interface and don&#39;t want to turn your unit tests into integration tests.","body":"I completely disagree. Mocking an external system is critical for unit tests, especially if you rely on an external interface and don&#39;t want to turn your unit tests into integration tests."},{"owner":{"account_id":24289,"reputation":2187,"user_id":61673,"accept_rate":86,"display_name":"Ickster"},"score":1,"creation_date":1432315091,"post_id":3970715,"comment_id":48892475,"body_markdown":"@ank - It *is* a bad practice to mock an external system. The solution is to create an interface to that system within your own application (the bean that Eugene Kuleshov is referring to) which handles communication to the outside system, and then in test, you mock *that*. Trying to mock the whole external system is expensive and messy.","body":"@ank - It <i>is</i> a bad practice to mock an external system. The solution is to create an interface to that system within your own application (the bean that Eugene Kuleshov is referring to) which handles communication to the outside system, and then in test, you mock <i>that</i>. Trying to mock the whole external system is expensive and messy."},{"owner":{"account_id":46575,"reputation":2511,"user_id":137641,"accept_rate":86,"display_name":"davemyron"},"score":2,"creation_date":1457729743,"post_id":3970715,"comment_id":59555759,"body_markdown":"@Ickster that&#39;s the definition of a mock… (I know this is rather old, but) can you provide an example to the distinction you believe you&#39;re making?","body":"@Ickster that&#39;s the definition of a mock… (I know this is rather old, but) can you provide an example to the distinction you believe you&#39;re making?"},{"owner":{"account_id":24289,"reputation":2187,"user_id":61673,"accept_rate":86,"display_name":"Ickster"},"score":0,"creation_date":1457730257,"post_id":3970715,"comment_id":59556022,"body_markdown":"@davemyron -- Good question. I know I was working on something at the time that I wrote that that&#39;s a perfect example of what I was trying to get at, but darned if I can remember exactly what it was. If I think of it, I&#39;ll let you know.","body":"@davemyron -- Good question. I know I was working on something at the time that I wrote that that&#39;s a perfect example of what I was trying to get at, but darned if I can remember exactly what it was. If I think of it, I&#39;ll let you know."},{"owner":{"account_id":81793,"reputation":1032,"user_id":230452,"display_name":"Mykel Alvis"},"score":0,"creation_date":1464385810,"post_id":3970715,"comment_id":62481763,"body_markdown":"JMS is, almost in it&#39;s entirely, an interface.  So mocking it, while non-trivial, is certainly within the realm of acceptable-but-painful practices. If you&#39;re using something specific from an implementation, which it seems many people do, then better advice might be &quot;stop doing that&quot;.","body":"JMS is, almost in it&#39;s entirely, an interface.  So mocking it, while non-trivial, is certainly within the realm of acceptable-but-painful practices. If you&#39;re using something specific from an implementation, which it seems many people do, then better advice might be &quot;stop doing that&quot;."},{"owner":{"account_id":3177957,"reputation":1440,"user_id":2685402,"accept_rate":53,"display_name":"Wojtek"},"score":3,"creation_date":1512740411,"post_id":3970715,"comment_id":82391136,"body_markdown":"Recently tools like http://wiremock.org, https://hoverfly.io/ and http://www.mbtest.org/ are becoming increasingly popular for creating out-of-process (over-the-wire) mocks for HTTP APIs. The same principle of out-of-process mocking can be applied to JMS APIs as well with API simulation tools that support JMS https://en.wikipedia.org/wiki/Comparison_of_API_simulation_tools I have mentioned HTTP here because it is more popular than JMS and its easier to see the market trends there.","body":"Recently tools like <a href=\"http://wiremock.org\" rel=\"nofollow noreferrer\">wiremock.org</a>, <a href=\"https://hoverfly.io/\" rel=\"nofollow noreferrer\">hoverfly.io</a> and <a href=\"http://www.mbtest.org/\" rel=\"nofollow noreferrer\">mbtest.org</a> are becoming increasingly popular for creating out-of-process (over-the-wire) mocks for HTTP APIs. The same principle of out-of-process mocking can be applied to JMS APIs as well with API simulation tools that support JMS <a href=\"https://en.wikipedia.org/wiki/Comparison_of_API_simulation_tools\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Comparison_of_API_simulation_tools</a> I have mentioned HTTP here because it is more popular than JMS and its easier to see the market trends there."}],"tags":[],"owner":{"account_id":78522,"reputation":31537,"user_id":223429,"display_name":"Eugene Kuleshov"},"comment_count":6,"down_vote_count":11,"up_vote_count":10,"is_accepted":false,"score":-1,"last_activity_date":1287507193,"creation_date":1287507193,"answer_id":3970715,"question_id":3970567,"body_markdown":"Generally it is a bad practice to mock or simulate an external system, such as JMS. A better idea would be to abstract your logic into a standalone bean, implement a delegation layer that would bridge JMS with your bean. With such design you can test your bean in isolation from JMS and then have system test that would test the whole integration with real JMS system.\r\n\r\nAs for in-process JMS you can look at [SomnifugiJMS][1].\r\n\r\n\r\n  [1]: https://somnifugijms.dev.java.net/","title":"Mock or simulate Message Queue (JMS)","body":"<p>Generally it is a bad practice to mock or simulate an external system, such as JMS. A better idea would be to abstract your logic into a standalone bean, implement a delegation layer that would bridge JMS with your bean. With such design you can test your bean in isolation from JMS and then have system test that would test the whole integration with real JMS system.</p>\n\n<p>As for in-process JMS you can look at <a href=\"https://somnifugijms.dev.java.net/\" rel=\"nofollow\">SomnifugiJMS</a>.</p>\n"},{"tags":[],"owner":{"account_id":177464,"reputation":3638,"user_id":408815,"display_name":"jcalvert"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1287511477,"creation_date":1287511477,"answer_id":3971269,"question_id":3970567,"body_markdown":"If you use [Spring Integration][1], you can do this pretty easily. It has a very basic, abstract &quot;Channel&quot; implementation. You can create and test your producers and consumers, and when you&#39;re ready to move a step further, you just specify a JMS adapter on top of your Channel. \r\n\r\n  [1]: http://www.springsource.org/spring-integration","title":"Mock or simulate Message Queue (JMS)","body":"<p>If you use <a href=\"http://www.springsource.org/spring-integration\" rel=\"noreferrer\">Spring Integration</a>, you can do this pretty easily. It has a very basic, abstract \"Channel\" implementation. You can create and test your producers and consumers, and when you're ready to move a step further, you just specify a JMS adapter on top of your Channel. </p>\n"},{"comments":[{"owner":{"account_id":57024,"reputation":13340,"user_id":170830,"accept_rate":90,"display_name":"sergionni"},"score":0,"creation_date":1287518621,"post_id":3971715,"comment_id":4248098,"body_markdown":"I&#39;ve just found Apache ActiveMQ. Trying this for first.","body":"I&#39;ve just found Apache ActiveMQ. Trying this for first."},{"owner":{"account_id":119118,"reputation":6072,"user_id":310606,"accept_rate":74,"display_name":"John Deverall"},"score":0,"creation_date":1653368380,"post_id":3971715,"comment_id":127828401,"body_markdown":"I agree with Eugene Kuleshov also. I think Dan North (founder of BDD probably agrees with him too) and probably anyone else with any design nous also agrees I imagine. If you&#39;ve tangled up your business logic in your application up with the entry point for a JMS queue, then you&#39;ve made a design mistake in your application. The better option is to fix the design mistake (if you can). However, sometimes that is not possible. You may be working with a large legacy code base responsible for a mission critical system that can&#39;t easily be fixed without change risk. Eugene Kuleshov is still right.","body":"I agree with Eugene Kuleshov also. I think Dan North (founder of BDD probably agrees with him too) and probably anyone else with any design nous also agrees I imagine. If you&#39;ve tangled up your business logic in your application up with the entry point for a JMS queue, then you&#39;ve made a design mistake in your application. The better option is to fix the design mistake (if you can). However, sometimes that is not possible. You may be working with a large legacy code base responsible for a mission critical system that can&#39;t easily be fixed without change risk. Eugene Kuleshov is still right."}],"tags":[],"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"comment_count":2,"down_vote_count":4,"up_vote_count":2,"is_accepted":false,"score":-2,"last_activity_date":1287514839,"creation_date":1287514839,"answer_id":3971715,"question_id":3970567,"body_markdown":"Generally I agree with Eugene Kuleshov. But if you still need such mocking I&#39;d suggest you to use BlckingQueue from java.util.concurent package. I think it is not a big problem to wrap it with javax.jms.Queue interface. BTW it is a good idea for some kind of open-source project.","title":"Mock or simulate Message Queue (JMS)","body":"<p>Generally I agree with Eugene Kuleshov. But if you still need such mocking I'd suggest you to use BlckingQueue from java.util.concurent package. I think it is not a big problem to wrap it with javax.jms.Queue interface. BTW it is a good idea for some kind of open-source project.</p>\n"},{"tags":[],"owner":{"account_id":3177957,"reputation":1440,"user_id":2685402,"accept_rate":53,"display_name":"Wojtek"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1578023152,"creation_date":1512738405,"answer_id":47715031,"question_id":3970567,"body_markdown":"To test an application in isolation when the real production JMS provider is not available you can use one of: \r\n\r\n 1. **JMS mock:**  \r\nWhen testing your applications you can simulate the non-existing dependencies using [test doubles][1]. You can use a JMS mock which will simulate the behaviour of a real JMS provider. [API simulation tools][2] will allow you to create JMS mocks (just choose a tool that supports JMS, for example [Traffic Parrot][3]). Using a JMS mock will allow you for a high level of flexibility during testing. You will be able to test typical production-like test scenarios but also hypothetical situations by setting up your mock to return almost any type of message. You will also be able to simulate different types of errors, which is often hard to do with real JMS providers. Have a look at [this introduction video to JMS service virtualization for ActiveMq][4] (service virtualization is a different name for a mock) or [this one for IBM MQ][5]. Note, these videos are from Traffic Parrot, but the principle described there will apply to any tool you choose.\r\n\r\n 2. **JMS provider test instance:**  \r\nYou can run a JMS provider on your laptop or in one of your test environments and connect your application to it instead of the production provider. When you use open source providers in production like ActiveMQ or RabbitMQ, it should be easy to run one of them on your laptop as well because they are lightweight and free. For IBM Websphere MQ, you can use the free [IBM MQ for Developers][6].\r\n\r\n 3. **JMS class mock:**  \r\nYou can use [Mockito][7] in unit tests to mock interactions with JMS classes. This solution comes with all the trade-offs of unit testing. For more information on those see [testing pyramid][8].\r\n\r\nIf you would like to black box test your application, use one of the solutions I have described above. \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Test_double\r\n  [2]: https://en.wikipedia.org/wiki/Comparison_of_API_simulation_tools\r\n  [3]: http://trafficparrot.com/\r\n  [4]: https://www.youtube.com/watch?v=ag8QxEmKsZs\r\n  [5]: https://www.youtube.com/watch?v=mWxSuVWnv1M\r\n  [6]: https://hub.docker.com/r/ibmcom/mq/\r\n  [7]: http://site.mockito.org/\r\n  [8]: https://testing.googleblog.com/2015/04/just-say-no-to-more-end-to-end-tests.html","title":"Mock or simulate Message Queue (JMS)","body":"<p>To test an application in isolation when the real production JMS provider is not available you can use one of: </p>\n\n<ol>\n<li><p><strong>JMS mock:</strong><br>\nWhen testing your applications you can simulate the non-existing dependencies using <a href=\"https://en.wikipedia.org/wiki/Test_double\" rel=\"noreferrer\">test doubles</a>. You can use a JMS mock which will simulate the behaviour of a real JMS provider. <a href=\"https://en.wikipedia.org/wiki/Comparison_of_API_simulation_tools\" rel=\"noreferrer\">API simulation tools</a> will allow you to create JMS mocks (just choose a tool that supports JMS, for example <a href=\"http://trafficparrot.com/\" rel=\"noreferrer\">Traffic Parrot</a>). Using a JMS mock will allow you for a high level of flexibility during testing. You will be able to test typical production-like test scenarios but also hypothetical situations by setting up your mock to return almost any type of message. You will also be able to simulate different types of errors, which is often hard to do with real JMS providers. Have a look at <a href=\"https://www.youtube.com/watch?v=ag8QxEmKsZs\" rel=\"noreferrer\">this introduction video to JMS service virtualization for ActiveMq</a> (service virtualization is a different name for a mock) or <a href=\"https://www.youtube.com/watch?v=mWxSuVWnv1M\" rel=\"noreferrer\">this one for IBM MQ</a>. Note, these videos are from Traffic Parrot, but the principle described there will apply to any tool you choose.</p></li>\n<li><p><strong>JMS provider test instance:</strong><br>\nYou can run a JMS provider on your laptop or in one of your test environments and connect your application to it instead of the production provider. When you use open source providers in production like ActiveMQ or RabbitMQ, it should be easy to run one of them on your laptop as well because they are lightweight and free. For IBM Websphere MQ, you can use the free <a href=\"https://hub.docker.com/r/ibmcom/mq/\" rel=\"noreferrer\">IBM MQ for Developers</a>.</p></li>\n<li><p><strong>JMS class mock:</strong><br>\nYou can use <a href=\"http://site.mockito.org/\" rel=\"noreferrer\">Mockito</a> in unit tests to mock interactions with JMS classes. This solution comes with all the trade-offs of unit testing. For more information on those see <a href=\"https://testing.googleblog.com/2015/04/just-say-no-to-more-end-to-end-tests.html\" rel=\"noreferrer\">testing pyramid</a>.</p></li>\n</ol>\n\n<p>If you would like to black box test your application, use one of the solutions I have described above. </p>\n"},{"tags":[],"owner":{"account_id":7712763,"reputation":628,"user_id":5841551,"accept_rate":50,"display_name":"kladderradatsch"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687785435,"creation_date":1687785435,"answer_id":76557064,"question_id":3970567,"body_markdown":"In the meantime almost every Message Broker has an embedded version which runs within the JVM only. Thus you can use this for tests instead of a dependent external JMS Broker. ","title":"Mock or simulate Message Queue (JMS)","body":"<p>In the meantime almost every Message Broker has an embedded version which runs within the JVM only. Thus you can use this for tests instead of a dependent external JMS Broker.</p>\n"}],"owner":{"account_id":57024,"reputation":13340,"user_id":170830,"accept_rate":90,"display_name":"sergionni"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59499,"favorite_count":0,"down_vote_count":0,"up_vote_count":28,"accepted_answer_id":3971269,"answer_count":5,"score":28,"last_activity_date":1687785435,"creation_date":1287506064,"question_id":3970567,"body_markdown":"There is a message(text), which format and content i definitely know.&lt;br/&gt;\r\nFor now,class in Java,that parses and reads this message from file,is implemented.\r\n\r\nIn real world, this message will come from Message Queue.\r\n\r\nFor now I should simulate, mock or generate Message Queue on my local PC for testing purposes.\r\n\r\nJava spec([java jms][1]):\r\n\r\n    JMS provider: A messaging system that implements the JMS specification.\r\n    JMS clients: Java applications that send and receive messages.\r\n    Messages: Objects that are used to communicate information between JMS clients.\r\n\r\nConcerning this specification, i need ***JMS provider***.\r\n\r\n*JMS client*-it&#39;s my class that reads message.&lt;br/&gt;\r\n*Message* itself i know.\r\n\r\nSo the question is how to start message queue?&lt;br/&gt;\r\nHow can i simulate it programmaticaly from Java code? Can i mock it somehow?\r\n\r\nThanks.\r\n\r\n\r\n  [1]: http://java.sun.com/developer/technicalArticles/Ecommerce/jms/index.html","title":"Mock or simulate Message Queue (JMS)","body":"<p>There is a message(text), which format and content i definitely know.<br/>\nFor now,class in Java,that parses and reads this message from file,is implemented.</p>\n\n<p>In real world, this message will come from Message Queue.</p>\n\n<p>For now I should simulate, mock or generate Message Queue on my local PC for testing purposes.</p>\n\n<p>Java spec(<a href=\"http://java.sun.com/developer/technicalArticles/Ecommerce/jms/index.html\" rel=\"noreferrer\">java jms</a>):</p>\n\n<pre><code>JMS provider: A messaging system that implements the JMS specification.\nJMS clients: Java applications that send and receive messages.\nMessages: Objects that are used to communicate information between JMS clients.\n</code></pre>\n\n<p>Concerning this specification, i need <strong><em>JMS provider</em></strong>.</p>\n\n<p><em>JMS client</em>-it's my class that reads message.<br/>\n<em>Message</em> itself i know.</p>\n\n<p>So the question is how to start message queue?<br/>\nHow can i simulate it programmaticaly from Java code? Can i mock it somehow?</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring-boot","intellij-idea","spring-test","intellij-plugin"],"answers":[{"tags":[],"owner":{"account_id":28877964,"reputation":581,"user_id":22118035,"display_name":"Dhruman Desai"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687784864,"creation_date":1687784864,"answer_id":76556997,"question_id":76501020,"body_markdown":"Go to settings and choose the junit 4 OR junit 5 and set the test tyle **Brief**","title":"JUnit tests class not generated by diffblue intellij","body":"<p>Go to settings and choose the junit 4 OR junit 5 and set the test tyle <strong>Brief</strong></p>\n"}],"owner":{"account_id":8331264,"reputation":509,"user_id":6259603,"accept_rate":65,"display_name":"Joe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":593,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1687784864,"creation_date":1687098262,"question_id":76501020,"body_markdown":"I installed diffblue plugin in intelliJ IDE and have spring boot with java 11 project. Here I tried to generate test class/cases for one service class.\r\n\r\n        @Service\r\n        public class MyService {\r\n        \t@Autowired\r\n        \tOrderRepo orderRepo;\r\n        \t@Autowired\r\n        \tProductRepo productRepo;\r\n    \t\r\n    \t\r\n    \t@Transactional(rollbackFor = Exception.class)\r\n    \tpublic Order mapping() throws Exception {\r\n    \t\tOrder order = new Order();\r\n    \t\torder.setOrderDate(new Date());\r\n    \t\torder.setTransaction(new Transaction(new Date(), 11.0, order));\r\n    \t\torder.setOrderItems(Arrays.asList(new OrderItem(order), new OrderItem(order), new OrderItem(order)));\r\n    \r\n    \t\tProduct p=productRepo.save(new Product(1, &quot;P1&quot;));\r\n    \t\tOrder o=orderRepo.save(order);\r\n    \t\tboolean b=checkOrder(o);\r\n    \t\treturn o;\r\n    \t}\r\n    }\r\n\r\nwhen trying to generate test case from diffblue icon its not generating. message as :\r\n\r\n    Tests written: 0\r\n    Cover was unable to write any tests for the reasons listed below.\r\n    Change what sort of tests Cover writes in **Change Settings**.\r\n    Methods without tests: 1\r\n    Diffblue AI was unable to find a test: 1\r\n\r\nlog:\r\n\r\n    --monitoring-service-port 54013 --debug-log\r\n    18:56:26.010 [INFO]  [Creating] Server started. Waiting up to 300 seconds for a connection to be established...\r\n    18:56:42.979 [INFO]  [Creating] Starting new remote monitor client\r\n    18:56:55.299 [INFO]  [Creating] Attempting to start remote server.\r\n    18:56:58.951 [INFO]  [Creating] Server started, listening on localhost/127.0.0.1:54028\r\n    18:57:00.046 [INFO]  [Creating] Expect analyzer service to be listening on port 54028.\r\n    18:57:06.357 [INFO]  [Creating] Started analyzer service and client retrieved.\r\n    18:58:04.361 [INFO]  [Creating] \r\n    ================================================================================\r\n    = Creating tests for &#39;com.spring.controller.MyController.batchProcessing:()V&#39; using &#39;SCo[SB] (sp, !fnm, df, !ris)&#39;\r\n    ================================================================================\r\n    19:03:08.041 [INFO]  [Creating] Service shutdown due to watchdog timeout\r\n    19:03:08.215 [INFO]  [Creating] \r\n    == begin thread dump ==\r\n    \r\n    27 threads\r\n    \r\n    Thread 1 &#39;main&#39;:\r\n      java.base@11.0.18/java.lang.Thread.dumpThreads(Native Method)\r\n      java.base@11.0.18/java.lang.Thread.getAllStackTraces(Thread.java:1657)\r\n      com.diffblue.cover.service.a.a.a.d(SourceFile:1164)\r\n      com.diffblue.cover.service.a.a.b.a(SourceFile:151)\r\n      com.diffblue.cover.service.analyzer.Main.main(SourceFile:46)\r\n      java.base@11.0.18/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n      java.base@11.0.18/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n      java.base@11.0.18/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n      java.base@11.0.18/java.lang.reflect.Method.invoke(Method.java:566)\r\n      com.diffblue.cover.launcher.Launcher.invokeMainMethod(Launcher.java:116)\r\n      com.diffblue.cover.launcher.Launcher.main(Launcher.java:72)\r\n    Thread 2728 &#39;ClassGraph-worker-15&#39;:\r\n      java.base@11.0.18/jdk.internal.misc.Unsafe.park(Native Method)\r\n      java.base@11.0.18/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)\r\n      java.base@11.0.18/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2081)\r\n      java.base@11.0.18/java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:433)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1054)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n      java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\r\n    Thread 26 &#39;grpc-default-executor-2&#39;:\r\n      java.base@11.0.18/jdk.internal.misc.Unsafe.park(Native Method)\r\n      java.base@11.0.18/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:234)\r\n      java.base@11.0.18/java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:462)\r\n      java.base@11.0.18/java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:361)\r\n      java.base@11.0.18/java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:937)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1053)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n      java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\r\n    Thread 2729 &#39;grpc-default-executor-3&#39;:\r\n      java.base@11.0.18/jdk.internal.misc.Unsafe.park(Native Method)\r\n      java.base@11.0.18/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:234)\r\n      java.base@11.0.18/java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:462)\r\n      java.base@11.0.18/java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:361)\r\n      java.base@11.0.18/java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:937)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1053)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n      java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\r\n    Thread 2721 &#39;ClassGraph-worker-8&#39;:\r\n      java.base@11.0.18/jdk.internal.misc.Unsafe.park(Native Method)\r\n      java.base@11.0.18/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)\r\n      java.base@11.0.18/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2081)\r\n      java.base@11.0.18/java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:433)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1054)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n      java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\r\n    Thread 2723 &#39;ClassGraph-worker-10&#39;:\r\n      java.base@11.0.18/jdk.internal.misc.Unsafe.park(Native Method)\r\n      java.base@11.0.18/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)\r\n      java.base@11.0.18/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2081)\r\n      java.base@11.0.18/java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:433)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1054)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n      java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\r\n    Thread 16 &#39;grpc-nio-worker-ELG-1-2&#39;:\r\n      java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl$SubSelector.poll0(Native Method)\r\n      java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl$SubSelector.poll(WindowsSelectorImpl.java:357)\r\n      java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl.doSelect(WindowsSelectorImpl.java:182)\r\n      java.base@11.0.18/sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:124)\r\n      java.base@11.0.18/sun.nio.ch.SelectorImpl.select(SelectorImpl.java:141)\r\n      io.grpc.netty.shaded.io.netty.channel.nio.SelectedSelectionKeySetSelector.select(SourceFile:68)\r\n      io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.select(SourceFile:813)\r\n      io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.run(SourceFile:460)\r\n      io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SourceFile:997)\r\n      io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(SourceFile:74)\r\n      io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(SourceFile:30)\r\n      java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\r\n    Thread 2727 &#39;ClassGraph-worker-14&#39;:\r\n      java.base@11.0.18/jdk.internal.misc.Unsafe.park(Native Method)\r\n      java.base@11.0.18/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)\r\n      java.base@11.0.18/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2081)\r\n      java.base@11.0.18/java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:433)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1054)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n      java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\r\n    Thread 11 &#39;Common-Cleaner&#39;:\r\n      java.base@11.0.18/java.lang.Object.wait(Native Method)\r\n      java.base@11.0.18/java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:155)\r\n      java.base@11.0.18/jdk.internal.ref.CleanerImpl.run(CleanerImpl.java:148)\r\n      java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\r\n      java.base@11.0.18/jdk.internal.misc.InnocuousThread.run(InnocuousThread.java:134)\r\n    Thread 2722 &#39;ClassGraph-worker-9&#39;:\r\n      java.base@11.0.18/jdk.internal.misc.Unsafe.park(Native Method)\r\n      java.base@11.0.18/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)\r\n      java.base@11.0.18/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2081)\r\n      java.base@11.0.18/java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:433)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1054)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n      java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\r\n    Thread 5 &#39;Attach Listener&#39;:\r\n    Thread 13 &#39;logback-1&#39;:\r\n      java.base@11.0.18/jdk.internal.misc.Unsafe.park(Native Method)\r\n      java.base@11.0.18/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)\r\n      java.base@11.0.18/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2081)\r\n      java.base@11.0.18/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1170)\r\n      java.base@11.0.18/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:899)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1054)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n      java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\r\n    Thread 12 &#39;Service log dispatcher&#39;:\r\n      java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl.setWakeupSocket0(Native Method)\r\n      java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl.setWakeupSocket(WindowsSelectorImpl.java:504)\r\n      java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl.wakeup(WindowsSelectorImpl.java:625)\r\n      io.grpc.netty.shaded.io.netty.channel.nio.SelectedSelectionKeySetSelector.wakeup(SourceFile:73)\r\n      io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.wakeup(SourceFile:787)\r\n      io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor.execute(SourceFile:857)\r\n      io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor.execute0(SourceFile:827)\r\n      io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor.execute(SourceFile:817)\r\n      io.grpc.netty.shaded.io.grpc.netty.NettyClientStream$TransportState.runOnTransportThread(SourceFile:321)\r\n      io.grpc.internal.AbstractStream$TransportState.requestMessagesFromDeframer(SourceFile:245)\r\n      io.grpc.internal.AbstractStream$TransportState.access$000(SourceFile:111)\r\n      io.grpc.internal.AbstractStream.request(SourceFile:57)\r\n      io.grpc.internal.ForwardingClientStream.request(SourceFile:32)\r\n      io.grpc.internal.RetriableStream$1RequestEntry.runWith(SourceFile:574)\r\n      io.grpc.internal.RetriableStream.delayOrExecute(SourceFile:529)\r\n      io.grpc.internal.RetriableStream.request(SourceFile:578)\r\n      io.grpc.internal.ClientCallImpl.request(SourceFile:440)\r\n      io.grpc.stub.ClientCalls$UnaryStreamToFuture.onStart(SourceFile:550)\r\n      io.grpc.stub.ClientCalls.startCall(SourceFile:342)\r\n      io.grpc.stub.ClientCalls.asyncUnaryRequestCall(SourceFile:315)\r\n      io.grpc.stub.ClientCalls.futureUnaryCall(SourceFile:227)\r\n      com.diffblue.cover.service.a.b.a.a(SourceFile:1440)\r\n      com.diffblue.cover.logging.RemoteLogAppender$a.run(SourceFile:204)\r\n    Thread 17 &#39;grpc-default-executor-0&#39;:\r\n      java.base@11.0.18/java.lang.Object.wait(Native Method)\r\n      java.base@11.0.18/java.lang.Thread.join(Thread.java:1305)\r\n      java.base@11.0.18/java.lang.Thread.join(Thread.java:1379)\r\n      com.diffblue.cover.sandbox.execution.WorkerThread.callWorkerThread(SourceFile:155)\r\n      com.diffblue.cover.sandbox.a.a.a(SourceFile:61)\r\n      com.diffblue.fuzztest.f.c.r(SourceFile:425)\r\n      com.diffblue.fuzztest.f.c$$Lambda$389/0x00000001005a1440.call(Unknown Source)\r\n      com.diffblue.cover.sandbox.execution.WrapExceptionsInBaseException.handleException(SourceFile:57)\r\n      com.diffblue.cover.sandbox.execution.WrapThrowableInBaseException.lambda$run$0(SourceFile:23)\r\n      com.diffblue.cover.sandbox.execution.WrapThrowableInBaseException$$Lambda$264/0x0000000100499440.call(Unknown Source)\r\n      com.diffblue.cover.sandbox.execution.WrapThrowableInBaseException.handleThrowable(SourceFile:34)\r\n      com.diffblue.cover.sandbox.execution.WrapThrowableInBaseException.run(SourceFile:23)\r\n      com.diffblue.fuzztest.f.c.d(SourceFile:424)\r\n      com.diffblue.fuzztest.f.t.d(SourceFile:136)\r\n      com.diffblue.cover.analysis.a.b$a$$Lambda$388/0x00000001005a1040.get(Unknown Source)\r\n      com.diffblue.cover.analysis.a.b$a.a(SourceFile:99)\r\n      com.diffblue.cover.analysis.a.b$a.tryAdvance(SourceFile:246)\r\n      com.diffblue.cover.service.analyzer.a.c$a.a(SourceFile:2037)\r\n      com.diffblue.cover.service.analyzer.a.a.i$h.invoke(SourceFile:638)\r\n      io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(SourceFile:182)\r\n      io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(SourceFile:355)\r\n      io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(SourceFile:867)\r\n      io.grpc.internal.ContextRunnable.run(SourceFile:37)\r\n      io.grpc.internal.SerializingExecutor.run(SourceFile:133)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n      java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n      java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\r\n    Thread 2731 &#39;TimedExecutor-9&#39;:\r\n      java.base@11.0.18/java.lang.StackTraceElement.initStackTraceElements(Native Method)\r\n      java.base@11.0.18/java.lang.StackTraceElement.of(StackTraceElement.java:526)\r\n      java.base@11.0.18/java.lang.Throwable.getOurStackTrace(Throwable.java:828)\r\n      java.base@11.0.18/java.lang.Throwable.getStackTrace(Throwable.java:820)\r\n      org.mockito.internal.exceptions.stacktrace.StackTraceFilter.filterFirst(StackTraceFilter.java:109)\r\n      org.mockito.internal.debugging.LocationImpl.computeStackTraceInformation(LocationImpl.java:50)\r\n      org.mockito.internal.debugging.LocationImpl.&lt;init&gt;(LocationImpl.java:35)\r\n      org.mockito.internal.debugging.LocationImpl.&lt;init&gt;(LocationImpl.java:26)\r\n      org.mockito.internal.debugging.LocationImpl.&lt;init&gt;(LocationImpl.java:22)\r\n      org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:56)\r\n      org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptAbstract(MockMethodInterceptor.java:161)\r\n      org.mockito.codegen.ProductRepo$MockitoMock$iJkinF5x.save(Unknown Source)\r\n      org.mockito.codegen.ProductRepo$MockitoMock$iJkinF5x.save(Unknown Source)\r\n      com.spring.service.MyService.batchProcessing(MyService.java:89)\r\n      com.spring.controller.MyController.batchProcessing(MyController.java:27)\r\n      java.base@11.0.18/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n      java.base@11.0.18/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n      java.base@11.0.18/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n      java.base@11.0.18/java.lang.reflect.Method.invoke(Method.java:566)\r\n      org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n      org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\r\n      org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n      org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\r\n      org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\r\n      org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n      org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)\r\n      org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)\r\n      org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n      org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\r\n      javax.servlet.http.HttpServlet.service(HttpServlet.java:529)\r\n      org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n      org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)\r\n      javax.servlet.http.HttpServlet.service(HttpServlet.java:623)\r\n      org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:167)\r\n      org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)\r\n      org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)\r\n      java.base@11.0.18/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n      java.base@11.0.18/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n      java.base@11.0.18/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n      java.base@11.0.18/java.lang.reflect.Method.invoke(Method.java:566)\r\n      com.diffblue.tir.a.h.a(SourceFile:78)\r\n      com.diffblue.tir.a.a.e.a(SourceFile:741)\r\n      com.diffblue.tir.a.f.a(SourceFile:421)\r\n      com.diffblue.tir.a.f.b(SourceFile:80)\r\n      com.diffblue.tir.d.e.a(SourceFile:38)\r\n      com.diffblue.tir.a.g.a(SourceFile:221)\r\n      com.diffblue.tir.a.g.b(SourceFile:88)\r\n      com.diffblue.tir.a.g$$Lambda$1283/0x000000010094f040.call(Unknown Source)\r\n      com.diffblue.cover.sandbox.execution.SafeTimedExecutor$$Lambda$654/0x000000010063b040.call(Unknown Source)\r\n      com.diffblue.cover.sandbox.execution.TimedCallableExecutor$CallableFuture.executeTask(SourceFile:28)\r\n      com.diffblue.cover.sandbox.execution.TimedExecutor$TaskQueueRunner.run(SourceFile:78)\r\n      com.diffblue.cover.sandbox.execution.WorkerThread.run(SourceFile:216)\r\n    Thread 18 &#39;grpc-nio-boss-ELG-3-1&#39;:\r\n      java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl$SubSelector.poll0(Native Method)\r\n      java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl$SubSelector.poll(WindowsSelectorImpl.java:357)\r\n      java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl.doSelect(WindowsSelectorImpl.java:182)\r\n      java.base@11.0.18/sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:124)\r\n      java.base@11.0.18/sun.nio.ch.SelectorImpl.select(SelectorImpl.java:141)\r\n      io.grpc.netty.shaded.io.netty.channel.nio.SelectedSelectionKeySetSelector.select(SourceFile:68)\r\n      io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.select(SourceFile:813)\r\n      io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.run(SourceFile:460)\r\n      io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SourceFile:997)\r\n      io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(SourceFile:74)\r\n      io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(SourceFile:30)\r\n      java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\r\n    Thread 3 &#39;Finalizer&#39;:\r\n      java.base@11.0.18/java.lang.Object.wait(Native Method)\r\n      java.base@11.0.18/java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:155)\r\n      java.base@11.0.18/java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:176)\r\n      java.base@11.0.18/java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:170)\r\n    Thread 2725 &#39;ClassGraph-worker-12&#39;:\r\n      java.base@11.0.18/jdk.internal.misc.Unsafe.park(Native Method)\r\n      java.base@11.0.18/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)\r\n      java.base@11.0.18/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2081)\r\n\r\n      **removed due to limit**\r\n      io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SourceFile:997)\r\n      io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(SourceFile:74)\r\n      io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(SourceFile:30)\r\n      java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\r\n    Thread 4 &#39;Signal Dispatcher&#39;:\r\n    Thread 15 &#39;grpc-nio-worker-ELG-1-1&#39;:\r\n      java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl$SubSelector.poll0(Native Method)\r\n      java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl$SubSelector.poll(WindowsSelectorImpl.java:357)\r\n      java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl.doSelect(WindowsSelectorImpl.java:182)\r\n      java.base@11.0.18/sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:124)\r\n      java.base@11.0.18/sun.nio.ch.SelectorImpl.select(SelectorImpl.java:136)\r\n      io.grpc.netty.shaded.io.netty.channel.nio.SelectedSelectionKeySetSelector.select(SourceFile:62)\r\n      io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.select(SourceFile:817)\r\n      io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.run(SourceFile:460)\r\n      io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SourceFile:997)\r\n      io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(SourceFile:74)\r\n      io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(SourceFile:30)\r\n      java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\r\n    == end thread dump ==\r\n    \r\n    19:03:10.150 [INFO]  [Creating] Exiting service.\r\n    19:03:18.401 [INFO]  [Creating]     [1/1] com.spring.controller.MyController.batchProcessing\r\n    19:03:18.401 [INFO]  [Creating]     [1/1]   Diffblue AI was unable to find a test\r\n    19:03:18.435 [INFO]  [Creating] [1/1] com.spring.controller.MyController\r\n    19:03:18.435 [INFO]  [Creating] [1/1]   Tests created: 0\r\n    19:03:19.179 [INFO]  [Reporting] \r\n    19:03:19.179 [INFO]  [Reporting] Summary:\r\n    19:03:19.179 [INFO]  [Reporting] --------\r\n    19:03:19.179 [INFO]  [Reporting] Total:                                               1 method\r\n    19:03:19.180 [INFO]  [Reporting] \r\n    19:03:19.180 [INFO]  [Reporting] No tests created for:                                1 method\r\n    19:03:28.675 [INFO]  [Reporting] License doesn&#39;t allow multiple classes\r\n    19:03:28.693 [INFO]  [Reporting] License doesn&#39;t allow creating report.json\r\n\r\n\r\nany special settings required? I am using all community edition.","title":"JUnit tests class not generated by diffblue intellij","body":"<p>I installed diffblue plugin in intelliJ IDE and have spring boot with java 11 project. Here I tried to generate test class/cases for one service class.</p>\n<pre><code>    @Service\n    public class MyService {\n        @Autowired\n        OrderRepo orderRepo;\n        @Autowired\n        ProductRepo productRepo;\n    \n    \n    @Transactional(rollbackFor = Exception.class)\n    public Order mapping() throws Exception {\n        Order order = new Order();\n        order.setOrderDate(new Date());\n        order.setTransaction(new Transaction(new Date(), 11.0, order));\n        order.setOrderItems(Arrays.asList(new OrderItem(order), new OrderItem(order), new OrderItem(order)));\n\n        Product p=productRepo.save(new Product(1, &quot;P1&quot;));\n        Order o=orderRepo.save(order);\n        boolean b=checkOrder(o);\n        return o;\n    }\n}\n</code></pre>\n<p>when trying to generate test case from diffblue icon its not generating. message as :</p>\n<pre><code>Tests written: 0\nCover was unable to write any tests for the reasons listed below.\nChange what sort of tests Cover writes in **Change Settings**.\nMethods without tests: 1\nDiffblue AI was unable to find a test: 1\n</code></pre>\n<p>log:</p>\n<pre><code>--monitoring-service-port 54013 --debug-log\n18:56:26.010 [INFO]  [Creating] Server started. Waiting up to 300 seconds for a connection to be established...\n18:56:42.979 [INFO]  [Creating] Starting new remote monitor client\n18:56:55.299 [INFO]  [Creating] Attempting to start remote server.\n18:56:58.951 [INFO]  [Creating] Server started, listening on localhost/127.0.0.1:54028\n18:57:00.046 [INFO]  [Creating] Expect analyzer service to be listening on port 54028.\n18:57:06.357 [INFO]  [Creating] Started analyzer service and client retrieved.\n18:58:04.361 [INFO]  [Creating] \n================================================================================\n= Creating tests for 'com.spring.controller.MyController.batchProcessing:()V' using 'SCo[SB] (sp, !fnm, df, !ris)'\n================================================================================\n19:03:08.041 [INFO]  [Creating] Service shutdown due to watchdog timeout\n19:03:08.215 [INFO]  [Creating] \n== begin thread dump ==\n\n27 threads\n\nThread 1 'main':\n  java.base@11.0.18/java.lang.Thread.dumpThreads(Native Method)\n  java.base@11.0.18/java.lang.Thread.getAllStackTraces(Thread.java:1657)\n  com.diffblue.cover.service.a.a.a.d(SourceFile:1164)\n  com.diffblue.cover.service.a.a.b.a(SourceFile:151)\n  com.diffblue.cover.service.analyzer.Main.main(SourceFile:46)\n  java.base@11.0.18/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n  java.base@11.0.18/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n  java.base@11.0.18/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n  java.base@11.0.18/java.lang.reflect.Method.invoke(Method.java:566)\n  com.diffblue.cover.launcher.Launcher.invokeMainMethod(Launcher.java:116)\n  com.diffblue.cover.launcher.Launcher.main(Launcher.java:72)\nThread 2728 'ClassGraph-worker-15':\n  java.base@11.0.18/jdk.internal.misc.Unsafe.park(Native Method)\n  java.base@11.0.18/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)\n  java.base@11.0.18/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2081)\n  java.base@11.0.18/java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:433)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1054)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n  java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\nThread 26 'grpc-default-executor-2':\n  java.base@11.0.18/jdk.internal.misc.Unsafe.park(Native Method)\n  java.base@11.0.18/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:234)\n  java.base@11.0.18/java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:462)\n  java.base@11.0.18/java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:361)\n  java.base@11.0.18/java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:937)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1053)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n  java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\nThread 2729 'grpc-default-executor-3':\n  java.base@11.0.18/jdk.internal.misc.Unsafe.park(Native Method)\n  java.base@11.0.18/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:234)\n  java.base@11.0.18/java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:462)\n  java.base@11.0.18/java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:361)\n  java.base@11.0.18/java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:937)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1053)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n  java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\nThread 2721 'ClassGraph-worker-8':\n  java.base@11.0.18/jdk.internal.misc.Unsafe.park(Native Method)\n  java.base@11.0.18/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)\n  java.base@11.0.18/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2081)\n  java.base@11.0.18/java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:433)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1054)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n  java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\nThread 2723 'ClassGraph-worker-10':\n  java.base@11.0.18/jdk.internal.misc.Unsafe.park(Native Method)\n  java.base@11.0.18/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)\n  java.base@11.0.18/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2081)\n  java.base@11.0.18/java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:433)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1054)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n  java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\nThread 16 'grpc-nio-worker-ELG-1-2':\n  java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl$SubSelector.poll0(Native Method)\n  java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl$SubSelector.poll(WindowsSelectorImpl.java:357)\n  java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl.doSelect(WindowsSelectorImpl.java:182)\n  java.base@11.0.18/sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:124)\n  java.base@11.0.18/sun.nio.ch.SelectorImpl.select(SelectorImpl.java:141)\n  io.grpc.netty.shaded.io.netty.channel.nio.SelectedSelectionKeySetSelector.select(SourceFile:68)\n  io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.select(SourceFile:813)\n  io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.run(SourceFile:460)\n  io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SourceFile:997)\n  io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(SourceFile:74)\n  io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(SourceFile:30)\n  java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\nThread 2727 'ClassGraph-worker-14':\n  java.base@11.0.18/jdk.internal.misc.Unsafe.park(Native Method)\n  java.base@11.0.18/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)\n  java.base@11.0.18/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2081)\n  java.base@11.0.18/java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:433)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1054)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n  java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\nThread 11 'Common-Cleaner':\n  java.base@11.0.18/java.lang.Object.wait(Native Method)\n  java.base@11.0.18/java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:155)\n  java.base@11.0.18/jdk.internal.ref.CleanerImpl.run(CleanerImpl.java:148)\n  java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\n  java.base@11.0.18/jdk.internal.misc.InnocuousThread.run(InnocuousThread.java:134)\nThread 2722 'ClassGraph-worker-9':\n  java.base@11.0.18/jdk.internal.misc.Unsafe.park(Native Method)\n  java.base@11.0.18/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)\n  java.base@11.0.18/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2081)\n  java.base@11.0.18/java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:433)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1054)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n  java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\nThread 5 'Attach Listener':\nThread 13 'logback-1':\n  java.base@11.0.18/jdk.internal.misc.Unsafe.park(Native Method)\n  java.base@11.0.18/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)\n  java.base@11.0.18/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2081)\n  java.base@11.0.18/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1170)\n  java.base@11.0.18/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:899)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1054)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n  java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\nThread 12 'Service log dispatcher':\n  java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl.setWakeupSocket0(Native Method)\n  java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl.setWakeupSocket(WindowsSelectorImpl.java:504)\n  java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl.wakeup(WindowsSelectorImpl.java:625)\n  io.grpc.netty.shaded.io.netty.channel.nio.SelectedSelectionKeySetSelector.wakeup(SourceFile:73)\n  io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.wakeup(SourceFile:787)\n  io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor.execute(SourceFile:857)\n  io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor.execute0(SourceFile:827)\n  io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor.execute(SourceFile:817)\n  io.grpc.netty.shaded.io.grpc.netty.NettyClientStream$TransportState.runOnTransportThread(SourceFile:321)\n  io.grpc.internal.AbstractStream$TransportState.requestMessagesFromDeframer(SourceFile:245)\n  io.grpc.internal.AbstractStream$TransportState.access$000(SourceFile:111)\n  io.grpc.internal.AbstractStream.request(SourceFile:57)\n  io.grpc.internal.ForwardingClientStream.request(SourceFile:32)\n  io.grpc.internal.RetriableStream$1RequestEntry.runWith(SourceFile:574)\n  io.grpc.internal.RetriableStream.delayOrExecute(SourceFile:529)\n  io.grpc.internal.RetriableStream.request(SourceFile:578)\n  io.grpc.internal.ClientCallImpl.request(SourceFile:440)\n  io.grpc.stub.ClientCalls$UnaryStreamToFuture.onStart(SourceFile:550)\n  io.grpc.stub.ClientCalls.startCall(SourceFile:342)\n  io.grpc.stub.ClientCalls.asyncUnaryRequestCall(SourceFile:315)\n  io.grpc.stub.ClientCalls.futureUnaryCall(SourceFile:227)\n  com.diffblue.cover.service.a.b.a.a(SourceFile:1440)\n  com.diffblue.cover.logging.RemoteLogAppender$a.run(SourceFile:204)\nThread 17 'grpc-default-executor-0':\n  java.base@11.0.18/java.lang.Object.wait(Native Method)\n  java.base@11.0.18/java.lang.Thread.join(Thread.java:1305)\n  java.base@11.0.18/java.lang.Thread.join(Thread.java:1379)\n  com.diffblue.cover.sandbox.execution.WorkerThread.callWorkerThread(SourceFile:155)\n  com.diffblue.cover.sandbox.a.a.a(SourceFile:61)\n  com.diffblue.fuzztest.f.c.r(SourceFile:425)\n  com.diffblue.fuzztest.f.c$$Lambda$389/0x00000001005a1440.call(Unknown Source)\n  com.diffblue.cover.sandbox.execution.WrapExceptionsInBaseException.handleException(SourceFile:57)\n  com.diffblue.cover.sandbox.execution.WrapThrowableInBaseException.lambda$run$0(SourceFile:23)\n  com.diffblue.cover.sandbox.execution.WrapThrowableInBaseException$$Lambda$264/0x0000000100499440.call(Unknown Source)\n  com.diffblue.cover.sandbox.execution.WrapThrowableInBaseException.handleThrowable(SourceFile:34)\n  com.diffblue.cover.sandbox.execution.WrapThrowableInBaseException.run(SourceFile:23)\n  com.diffblue.fuzztest.f.c.d(SourceFile:424)\n  com.diffblue.fuzztest.f.t.d(SourceFile:136)\n  com.diffblue.cover.analysis.a.b$a$$Lambda$388/0x00000001005a1040.get(Unknown Source)\n  com.diffblue.cover.analysis.a.b$a.a(SourceFile:99)\n  com.diffblue.cover.analysis.a.b$a.tryAdvance(SourceFile:246)\n  com.diffblue.cover.service.analyzer.a.c$a.a(SourceFile:2037)\n  com.diffblue.cover.service.analyzer.a.a.i$h.invoke(SourceFile:638)\n  io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(SourceFile:182)\n  io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(SourceFile:355)\n  io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(SourceFile:867)\n  io.grpc.internal.ContextRunnable.run(SourceFile:37)\n  io.grpc.internal.SerializingExecutor.run(SourceFile:133)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n  java.base@11.0.18/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n  java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\nThread 2731 'TimedExecutor-9':\n  java.base@11.0.18/java.lang.StackTraceElement.initStackTraceElements(Native Method)\n  java.base@11.0.18/java.lang.StackTraceElement.of(StackTraceElement.java:526)\n  java.base@11.0.18/java.lang.Throwable.getOurStackTrace(Throwable.java:828)\n  java.base@11.0.18/java.lang.Throwable.getStackTrace(Throwable.java:820)\n  org.mockito.internal.exceptions.stacktrace.StackTraceFilter.filterFirst(StackTraceFilter.java:109)\n  org.mockito.internal.debugging.LocationImpl.computeStackTraceInformation(LocationImpl.java:50)\n  org.mockito.internal.debugging.LocationImpl.&lt;init&gt;(LocationImpl.java:35)\n  org.mockito.internal.debugging.LocationImpl.&lt;init&gt;(LocationImpl.java:26)\n  org.mockito.internal.debugging.LocationImpl.&lt;init&gt;(LocationImpl.java:22)\n  org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:56)\n  org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptAbstract(MockMethodInterceptor.java:161)\n  org.mockito.codegen.ProductRepo$MockitoMock$iJkinF5x.save(Unknown Source)\n  org.mockito.codegen.ProductRepo$MockitoMock$iJkinF5x.save(Unknown Source)\n  com.spring.service.MyService.batchProcessing(MyService.java:89)\n  com.spring.controller.MyController.batchProcessing(MyController.java:27)\n  java.base@11.0.18/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n  java.base@11.0.18/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n  java.base@11.0.18/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n  java.base@11.0.18/java.lang.reflect.Method.invoke(Method.java:566)\n  org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\n  org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\n  org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\n  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\n  org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n  org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)\n  org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)\n  org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n  org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n  javax.servlet.http.HttpServlet.service(HttpServlet.java:529)\n  org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n  org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)\n  javax.servlet.http.HttpServlet.service(HttpServlet.java:623)\n  org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:167)\n  org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)\n  org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)\n  java.base@11.0.18/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n  java.base@11.0.18/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n  java.base@11.0.18/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n  java.base@11.0.18/java.lang.reflect.Method.invoke(Method.java:566)\n  com.diffblue.tir.a.h.a(SourceFile:78)\n  com.diffblue.tir.a.a.e.a(SourceFile:741)\n  com.diffblue.tir.a.f.a(SourceFile:421)\n  com.diffblue.tir.a.f.b(SourceFile:80)\n  com.diffblue.tir.d.e.a(SourceFile:38)\n  com.diffblue.tir.a.g.a(SourceFile:221)\n  com.diffblue.tir.a.g.b(SourceFile:88)\n  com.diffblue.tir.a.g$$Lambda$1283/0x000000010094f040.call(Unknown Source)\n  com.diffblue.cover.sandbox.execution.SafeTimedExecutor$$Lambda$654/0x000000010063b040.call(Unknown Source)\n  com.diffblue.cover.sandbox.execution.TimedCallableExecutor$CallableFuture.executeTask(SourceFile:28)\n  com.diffblue.cover.sandbox.execution.TimedExecutor$TaskQueueRunner.run(SourceFile:78)\n  com.diffblue.cover.sandbox.execution.WorkerThread.run(SourceFile:216)\nThread 18 'grpc-nio-boss-ELG-3-1':\n  java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl$SubSelector.poll0(Native Method)\n  java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl$SubSelector.poll(WindowsSelectorImpl.java:357)\n  java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl.doSelect(WindowsSelectorImpl.java:182)\n  java.base@11.0.18/sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:124)\n  java.base@11.0.18/sun.nio.ch.SelectorImpl.select(SelectorImpl.java:141)\n  io.grpc.netty.shaded.io.netty.channel.nio.SelectedSelectionKeySetSelector.select(SourceFile:68)\n  io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.select(SourceFile:813)\n  io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.run(SourceFile:460)\n  io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SourceFile:997)\n  io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(SourceFile:74)\n  io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(SourceFile:30)\n  java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\nThread 3 'Finalizer':\n  java.base@11.0.18/java.lang.Object.wait(Native Method)\n  java.base@11.0.18/java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:155)\n  java.base@11.0.18/java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:176)\n  java.base@11.0.18/java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:170)\nThread 2725 'ClassGraph-worker-12':\n  java.base@11.0.18/jdk.internal.misc.Unsafe.park(Native Method)\n  java.base@11.0.18/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)\n  java.base@11.0.18/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2081)\n\n  **removed due to limit**\n  io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SourceFile:997)\n  io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(SourceFile:74)\n  io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(SourceFile:30)\n  java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\nThread 4 'Signal Dispatcher':\nThread 15 'grpc-nio-worker-ELG-1-1':\n  java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl$SubSelector.poll0(Native Method)\n  java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl$SubSelector.poll(WindowsSelectorImpl.java:357)\n  java.base@11.0.18/sun.nio.ch.WindowsSelectorImpl.doSelect(WindowsSelectorImpl.java:182)\n  java.base@11.0.18/sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:124)\n  java.base@11.0.18/sun.nio.ch.SelectorImpl.select(SelectorImpl.java:136)\n  io.grpc.netty.shaded.io.netty.channel.nio.SelectedSelectionKeySetSelector.select(SourceFile:62)\n  io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.select(SourceFile:817)\n  io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.run(SourceFile:460)\n  io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SourceFile:997)\n  io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(SourceFile:74)\n  io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(SourceFile:30)\n  java.base@11.0.18/java.lang.Thread.run(Thread.java:834)\n== end thread dump ==\n\n19:03:10.150 [INFO]  [Creating] Exiting service.\n19:03:18.401 [INFO]  [Creating]     [1/1] com.spring.controller.MyController.batchProcessing\n19:03:18.401 [INFO]  [Creating]     [1/1]   Diffblue AI was unable to find a test\n19:03:18.435 [INFO]  [Creating] [1/1] com.spring.controller.MyController\n19:03:18.435 [INFO]  [Creating] [1/1]   Tests created: 0\n19:03:19.179 [INFO]  [Reporting] \n19:03:19.179 [INFO]  [Reporting] Summary:\n19:03:19.179 [INFO]  [Reporting] --------\n19:03:19.179 [INFO]  [Reporting] Total:                                               1 method\n19:03:19.180 [INFO]  [Reporting] \n19:03:19.180 [INFO]  [Reporting] No tests created for:                                1 method\n19:03:28.675 [INFO]  [Reporting] License doesn't allow multiple classes\n19:03:28.693 [INFO]  [Reporting] License doesn't allow creating report.json\n</code></pre>\n<p>any special settings required? I am using all community edition.</p>\n"},{"tags":["java","keycloak"],"comments":[{"owner":{"account_id":2864238,"reputation":10897,"user_id":2458858,"accept_rate":85,"display_name":"tryingToLearn"},"score":0,"creation_date":1566198676,"post_id":57551173,"comment_id":101566141,"body_markdown":"did below answer resolve your problem?","body":"did below answer resolve your problem?"}],"answers":[{"comments":[{"owner":{"account_id":6863633,"reputation":231,"user_id":5276822,"display_name":"Paul"},"score":2,"creation_date":1566285265,"post_id":57551447,"comment_id":101597555,"body_markdown":"Thanks, this gave me a right direction but I ended up using a method called searchUserByAttribute(), which takes three parameters namely attr name, attr value and Realm. thanks","body":"Thanks, this gave me a right direction but I ended up using a method called searchUserByAttribute(), which takes three parameters namely attr name, attr value and Realm. thanks"}],"tags":[],"owner":{"account_id":2864238,"reputation":10897,"user_id":2458858,"accept_rate":85,"display_name":"tryingToLearn"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1566196003,"creation_date":1566196003,"answer_id":57551447,"question_id":57551173,"body_markdown":"You can retrieve all user attributes from `AccessToken` / `IdToken` (object not string).\r\n\r\nFor e.g. :\r\n\r\n    KeycloakSecurityContext keycloakSecurityContext = (KeycloakSecurityContext)(request.getAttribute(KeycloakSecurityContext.class.getName()));\t\r\n    AccessToken token = keycloakSecurityContext.getToken();\r\n\r\n\r\nThis token object contains all fields for user model:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IYULQ.png","title":"how to get user mobile number in keycloak","body":"<p>You can retrieve all user attributes from <code>AccessToken</code> / <code>IdToken</code> (object not string).</p>\n\n<p>For e.g. :</p>\n\n<pre><code>KeycloakSecurityContext keycloakSecurityContext = (KeycloakSecurityContext)(request.getAttribute(KeycloakSecurityContext.class.getName())); \nAccessToken token = keycloakSecurityContext.getToken();\n</code></pre>\n\n<p>This token object contains all fields for user model:</p>\n\n<p><a href=\"https://i.stack.imgur.com/IYULQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IYULQ.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":3236717,"reputation":1785,"user_id":2730735,"display_name":"aelkz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687784717,"creation_date":1687784717,"answer_id":76556976,"question_id":57551173,"body_markdown":"Updated to Keycloak 21.1.1:\r\n\r\n    List&lt;UserModel&gt; users = context.getSession().users().searchForUserByUserAttributeStream(context.getRealm(), MOBILE_NUMBER_ATTR, &quot;999999999&quot;)...collect(Collectors.toList());\r\n\r\nwhere **`MOBILE_NUMBER_ATTR`** is the key attribute you&#39;re looking for and **`999999999`** is the value.\r\n\r\ninterface:\r\nhttps://github.com/keycloak/keycloak/blob/21.1.1/server-spi/src/main/java/org/keycloak/storage/user/UserQueryProvider.java","title":"how to get user mobile number in keycloak","body":"<p>Updated to Keycloak 21.1.1:</p>\n<pre><code>List&lt;UserModel&gt; users = context.getSession().users().searchForUserByUserAttributeStream(context.getRealm(), MOBILE_NUMBER_ATTR, &quot;999999999&quot;)...collect(Collectors.toList());\n</code></pre>\n<p>where <strong><code>MOBILE_NUMBER_ATTR</code></strong> is the key attribute you're looking for and <strong><code>999999999</code></strong> is the value.</p>\n<p>interface:\n<a href=\"https://github.com/keycloak/keycloak/blob/21.1.1/server-spi/src/main/java/org/keycloak/storage/user/UserQueryProvider.java\" rel=\"nofollow noreferrer\">https://github.com/keycloak/keycloak/blob/21.1.1/server-spi/src/main/java/org/keycloak/storage/user/UserQueryProvider.java</a></p>\n"}],"owner":{"account_id":6863633,"reputation":231,"user_id":5276822,"display_name":"Paul"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1080,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":57551447,"answer_count":2,"score":1,"last_activity_date":1687784717,"creation_date":1566194589,"question_id":57551173,"body_markdown":"I am trying to get user registered mobile number in keycloak. \r\nI am not sure if keycloak does have a method called `getUserByMobileNumber()`, which I can use to get the user mobile number. I have seen people using `getUserById`, `getUserByUsername` and etc.\r\n\r\n    UserModel numberExisting = context.getSession().users().getUserByMobileNumber(mobileNumber, context.getRealm());","title":"how to get user mobile number in keycloak","body":"<p>I am trying to get user registered mobile number in keycloak. \nI am not sure if keycloak does have a method called <code>getUserByMobileNumber()</code>, which I can use to get the user mobile number. I have seen people using <code>getUserById</code>, <code>getUserByUsername</code> and etc.</p>\n\n<pre><code>UserModel numberExisting = context.getSession().users().getUserByMobileNumber(mobileNumber, context.getRealm());\n</code></pre>\n"},{"tags":["java","newrelic","nrql"],"comments":[{"owner":{"account_id":11288679,"reputation":923,"user_id":8278630,"display_name":"Farkhod Abdukodirov"},"score":0,"creation_date":1687753567,"post_id":76548306,"comment_id":134975253,"body_markdown":"Hi there, can you also share your code","body":"Hi there, can you also share your code"},{"owner":{"account_id":198515,"reputation":819,"user_id":2132930,"accept_rate":100,"display_name":"Prabodh Mhalgi"},"score":0,"creation_date":1692216296,"post_id":76548306,"comment_id":135595079,"body_markdown":"One thing that jumps out is that the query if not GraphQL format. It is a simple nrql.","body":"One thing that jumps out is that the query if not GraphQL format. It is a simple nrql."}],"owner":{"account_id":28888733,"reputation":1,"user_id":22126408,"display_name":"Pavani Sandhya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687784589,"creation_date":1687648453,"question_id":76548306,"body_markdown":"I have written a Java Program to connect to `NewRelic Graphql API` end point https://api.newrelic.com/graphql and successfully able to connect.\r\n\r\n- However getting parsing error for the NRQL query.\r\n\r\n      Query is {&quot;query&quot;: &quot;SELECT average(duration) FROM Transaction \r\n      WHERE appName = &#39;My_Application&#39;&quot;}\r\n      Response Code: 200\r\n      Response Body:\r\n      {&quot;errors&quot;:[{&quot;locations&quot;:\r\n      [{&quot;column&quot;:59,&quot;line&quot;:1}],&quot;message&quot;:&quot;Parsing failed at `&#39;My_Applic`&quot;}]}\r\n\r\nI am expecting the output, but getting parsing error\r\n","title":"Getting &quot;Parsing failed&quot; Error for all NRQL queries while posting via HttpURLConnection in Java program","body":"<p>I have written a Java Program to connect to <code>NewRelic Graphql API</code> end point <a href=\"https://api.newrelic.com/graphql\" rel=\"nofollow noreferrer\">https://api.newrelic.com/graphql</a> and successfully able to connect.</p>\n<ul>\n<li><p>However getting parsing error for the NRQL query.</p>\n<pre><code>Query is {&quot;query&quot;: &quot;SELECT average(duration) FROM Transaction \nWHERE appName = 'My_Application'&quot;}\nResponse Code: 200\nResponse Body:\n{&quot;errors&quot;:[{&quot;locations&quot;:\n[{&quot;column&quot;:59,&quot;line&quot;:1}],&quot;message&quot;:&quot;Parsing failed at `'My_Applic`&quot;}]}\n</code></pre>\n</li>\n</ul>\n<p>I am expecting the output, but getting parsing error</p>\n"},{"tags":["java","for-loop"],"owner":{"account_id":28594992,"reputation":13,"user_id":21893370,"display_name":"Zhikeng Kong"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1687753554,"answer_count":0,"score":0,"last_activity_date":1687784565,"creation_date":1687753204,"question_id":76553491,"body_markdown":"`pairRemoval(String, String, String)`  \r\nThis is a public static function that takes three Strings as arguments and returns a String.\r\n\r\nYou will be given three strings, the first string is a sentence known as text that contains at least one occurrence of left pattern and right pattern. The second and third arguments of the function are the left and right patterns respectively. Left pattern and right pattern are single characters strings that you are attempting to remove from the string. Your goal is to remove only the patterns when the left pattern has an equal number of corresponding right patterns. The patterns are removed in pairs only when there is a balanced number of left and right patterns. The patterns may be nested within the text and there is no guarantee that a left pattern will occur before the right pattern.   \r\n\r\nArguments:\r\nString text - The string with the substring to be removed\r\n\r\nString leftPattern - A pattern that the substring must start with\r\n\r\nString rightPattern -  A pattern that the substring must end with\r\n\r\nreturns String -  The given text with the paired patterns removed\r\n\r\nExample:\r\nExample 1: \r\n\r\n`text = { { Muscat } } { } mecum tollgate } poultry quarrymen pantheon asteria`\r\n\r\nleftPattern =  {\r\n\r\nrightPattern = }\r\n\r\n`return = Muscat     mecum tollgate } poultry quarrymen pantheon asteria`\r\n\r\nExample 2: \r\n\r\ntext = merioneth ( smickly helotage yarr ) ethmoidal ) ) ) digitinervate\r\n\r\nleftPattern =  (\r\n\r\nrightPattern = )\r\n\r\n`return =. merioneth  smickly helotage yarr  ethmoidal ) ) ) digitinervate`\r\n\r\nExample 3: \r\n\r\n`text = southland palladic } { pasillo { } seeableness } { { normanesque`\r\n\r\nleftPattern =  {\r\n\r\nrightPattern = }\r\n\r\n`return = southland palladic   pasillo   seeableness   { normanesque`\r\n\r\nThis is what I tried\r\n```\r\npublic static String pairRemoval(String text, String leftPattern, String rightPattern) {\r\n        String finalText = &quot;&quot;\r\n\r\n        int indexOf1LeftP = text.indexOf(leftPattern)\r\n\r\n        int indexOfLastLeftP = text.lastIndexOf(leftPattern)\r\n\r\n        int indexOf1RightP = text.indexOf(rightPattern)\r\n\r\n        int indexOfLastRightP = text.lastIndexOf(rightPattern)\r\n\r\n        for (int i = indexOf1LeftP; i &lt;= indexOfLastLeftP; i++) {\r\n            for (int j = indexOf1RightP; j &lt;= indexOfLastRightP; j++){\r\n            String leftChar = text.substring(i, i + 1)\r\n            String rightChar = text.substring(j, j + 1)\r\n                if (leftChar.equals(leftPattern) &amp;&amp; rightChar.equals(rightPattern)) {\r\n               finalText = text.replaceFirst(rightChar, &quot;&quot;).replaceFirst(leftChar, &quot;&quot;)\r\n            }\r\n        }\r\n    }\r\n\r\n    return finalText;\r\n}\r\n```\r\nAnd I got this error:\r\n\r\n&gt; Exception in thread &quot;main&quot; java.util.regex.PatternSyntaxException:\r\n&gt; Illegal repetition near index 1","title":"How can remove a pair of chars from a string in java","body":"<p><code>pairRemoval(String, String, String)</code><br />\nThis is a public static function that takes three Strings as arguments and returns a String.</p>\n<p>You will be given three strings, the first string is a sentence known as text that contains at least one occurrence of left pattern and right pattern. The second and third arguments of the function are the left and right patterns respectively. Left pattern and right pattern are single characters strings that you are attempting to remove from the string. Your goal is to remove only the patterns when the left pattern has an equal number of corresponding right patterns. The patterns are removed in pairs only when there is a balanced number of left and right patterns. The patterns may be nested within the text and there is no guarantee that a left pattern will occur before the right pattern.</p>\n<p>Arguments:\nString text - The string with the substring to be removed</p>\n<p>String leftPattern - A pattern that the substring must start with</p>\n<p>String rightPattern -  A pattern that the substring must end with</p>\n<p>returns String -  The given text with the paired patterns removed</p>\n<p>Example:\nExample 1:</p>\n<p><code>text = { { Muscat } } { } mecum tollgate } poultry quarrymen pantheon asteria</code></p>\n<p>leftPattern =  {</p>\n<p>rightPattern = }</p>\n<p><code>return = Muscat     mecum tollgate } poultry quarrymen pantheon asteria</code></p>\n<p>Example 2:</p>\n<p>text = merioneth ( smickly helotage yarr ) ethmoidal ) ) ) digitinervate</p>\n<p>leftPattern =  (</p>\n<p>rightPattern = )</p>\n<p><code>return =. merioneth  smickly helotage yarr  ethmoidal ) ) ) digitinervate</code></p>\n<p>Example 3:</p>\n<p><code>text = southland palladic } { pasillo { } seeableness } { { normanesque</code></p>\n<p>leftPattern =  {</p>\n<p>rightPattern = }</p>\n<p><code>return = southland palladic   pasillo   seeableness   { normanesque</code></p>\n<p>This is what I tried</p>\n<pre><code>public static String pairRemoval(String text, String leftPattern, String rightPattern) {\n        String finalText = &quot;&quot;\n\n        int indexOf1LeftP = text.indexOf(leftPattern)\n\n        int indexOfLastLeftP = text.lastIndexOf(leftPattern)\n\n        int indexOf1RightP = text.indexOf(rightPattern)\n\n        int indexOfLastRightP = text.lastIndexOf(rightPattern)\n\n        for (int i = indexOf1LeftP; i &lt;= indexOfLastLeftP; i++) {\n            for (int j = indexOf1RightP; j &lt;= indexOfLastRightP; j++){\n            String leftChar = text.substring(i, i + 1)\n            String rightChar = text.substring(j, j + 1)\n                if (leftChar.equals(leftPattern) &amp;&amp; rightChar.equals(rightPattern)) {\n               finalText = text.replaceFirst(rightChar, &quot;&quot;).replaceFirst(leftChar, &quot;&quot;)\n            }\n        }\n    }\n\n    return finalText;\n}\n</code></pre>\n<p>And I got this error:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.util.regex.PatternSyntaxException:\nIllegal repetition near index 1</p>\n</blockquote>\n"},{"tags":["java","spring-boot","spring-webflux","reactive-programming"],"comments":[{"owner":{"account_id":11818,"reputation":57413,"user_id":22982,"accept_rate":100,"display_name":"Brian Clozel"},"score":0,"creation_date":1687782043,"post_id":76556530,"comment_id":134980229,"body_markdown":"could you show a code snippet for the StockResponse class? It&#39;s not clear why each stock is stored as a StockResponse instances and why there is another independent instance for the total amount.","body":"could you show a code snippet for the StockResponse class? It&#39;s not clear why each stock is stored as a StockResponse instances and why there is another independent instance for the total amount."},{"owner":{"account_id":4397755,"reputation":790,"user_id":3584279,"accept_rate":100,"display_name":"RVA"},"score":0,"creation_date":1687782233,"post_id":76556530,"comment_id":134980273,"body_markdown":"StockResponse class contain a value of stock and a reference of product. The StockResponse is just a DTO because this method will be exposed to an UI","body":"StockResponse class contain a value of stock and a reference of product. The StockResponse is just a DTO because this method will be exposed to an UI"},{"owner":{"account_id":11818,"reputation":57413,"user_id":22982,"accept_rate":100,"display_name":"Brian Clozel"},"score":0,"creation_date":1687782442,"post_id":76556530,"comment_id":134980318,"body_markdown":"then this sample doesn&#39;t compile as `new StockResponse(0)` won&#39;t work for this record class","body":"then this sample doesn&#39;t compile as <code>new StockResponse(0)</code> won&#39;t work for this record class"},{"owner":{"account_id":4397755,"reputation":790,"user_id":3584279,"accept_rate":100,"display_name":"RVA"},"score":0,"creation_date":1687783250,"post_id":76556530,"comment_id":134980483,"body_markdown":"It was a simplified code, I may have slipped some typo errors, sorry, I&#39;ve updated it and it should be ok now","body":"It was a simplified code, I may have slipped some typo errors, sorry, I&#39;ve updated it and it should be ok now"}],"answers":[{"comments":[{"owner":{"account_id":4397755,"reputation":790,"user_id":3584279,"accept_rate":100,"display_name":"RVA"},"score":0,"creation_date":1687852175,"post_id":76556954,"comment_id":134990772,"body_markdown":"I&#39;ve finally adopt your proposition by creating another class with the details and a specific property for total","body":"I&#39;ve finally adopt your proposition by creating another class with the details and a specific property for total"}],"tags":[],"owner":{"account_id":11818,"reputation":57413,"user_id":22982,"accept_rate":100,"display_name":"Brian Clozel"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687784556,"creation_date":1687784556,"answer_id":76556954,"question_id":76556530,"body_markdown":"I find it a bit odd to add the total result as the last element in the list instead of having a dedicated class containing the total on one side and the elements on the other).\r\n\r\nBut here&#39;s a code snippet anyway:\r\n\r\n```\r\nMono&lt;List&lt;StockResponse&gt;&gt; responses = findAll()\r\n    .map(StockResponse::new).collectList().map(allStock -&gt; {\r\n\t    StockResponse total = new StockResponse(0, &quot;Total&quot;);\r\n    \tallStock.forEach(stock -&gt; total.add(stock.value));\r\n\t    List&lt;StockResponse&gt; result = new ArrayList&lt;&gt;(allStock);\r\n        result.add(total);\r\n    \treturn result;\r\n});\r\n```","title":"Webflux : Accumulate &amp; details","body":"<p>I find it a bit odd to add the total result as the last element in the list instead of having a dedicated class containing the total on one side and the elements on the other).</p>\n<p>But here's a code snippet anyway:</p>\n<pre><code>Mono&lt;List&lt;StockResponse&gt;&gt; responses = findAll()\n    .map(StockResponse::new).collectList().map(allStock -&gt; {\n        StockResponse total = new StockResponse(0, &quot;Total&quot;);\n        allStock.forEach(stock -&gt; total.add(stock.value));\n        List&lt;StockResponse&gt; result = new ArrayList&lt;&gt;(allStock);\n        result.add(total);\n        return result;\n});\n</code></pre>\n"}],"owner":{"account_id":4397755,"reputation":790,"user_id":3584279,"accept_rate":100,"display_name":"RVA"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76556954,"answer_count":1,"score":1,"last_activity_date":1687784556,"creation_date":1687781298,"question_id":76556530,"body_markdown":"I&#39;m new to webflux and I&#39;m trying to transform this code : \r\n\r\n    @Getter\r\n    public class Stock {\r\n        private int value;\r\n        private String productNumber;\r\n        public Stock(int value, String productNumber){\r\n            this.value = value;\r\n            this.productNumber = productNumber;\r\n        }\r\n    }\r\n\r\n\r\n    @Getter\r\n    public class StockResponse {\r\n        private int value;\r\n        private String productNumber;\r\n        public StockResponse(int value, String productNumber){\r\n            this.value = value;\r\n            this.productNumber = productNumber;\r\n        }\r\n        public StockResponse(Stock stock){\r\n            this.value = stock.getValue();\r\n            this.productNumber = stock.getProductNumber();\r\n        }\r\n\r\n        public void add(int value){\r\n            this.value += value;\r\n        }\r\n        \r\n    }\r\n\r\n    public List&lt;StockResponse&gt; findStockResponsesDetailsAndTotal() {\r\n        List&lt;StockResponse&gt; stocksResponses = new ArrayList();\r\n        List&lt;Stock&gt; stocks = stockRepository.findAll();\r\n        StockResponse total = new StockResponse(0, &quot;Total&quot;);\r\n        stocks.forEach(stock -&gt; {\r\n            total.add(stock.getValue());\r\n            stocksResponses.add(new StockResponse(stock));\r\n        });\r\n        stocksResponses.add(total);\r\n        return stocksResponses;\r\n    }\r\n\r\ninto a &quot;flux phylosophy&quot;\r\nHere is my code so far : \r\n\r\n    stockRepository.findAll()\r\n      .map(StockResponse::convert)\r\n\r\nI&#39;m kinda lost about the &quot;total&quot;, I know that I can do a reduce on the Flux but i&#39;ll lose all the details in doing so\r\n\r\n","title":"Webflux : Accumulate &amp; details","body":"<p>I'm new to webflux and I'm trying to transform this code :</p>\n<pre><code>@Getter\npublic class Stock {\n    private int value;\n    private String productNumber;\n    public Stock(int value, String productNumber){\n        this.value = value;\n        this.productNumber = productNumber;\n    }\n}\n\n\n@Getter\npublic class StockResponse {\n    private int value;\n    private String productNumber;\n    public StockResponse(int value, String productNumber){\n        this.value = value;\n        this.productNumber = productNumber;\n    }\n    public StockResponse(Stock stock){\n        this.value = stock.getValue();\n        this.productNumber = stock.getProductNumber();\n    }\n\n    public void add(int value){\n        this.value += value;\n    }\n    \n}\n\npublic List&lt;StockResponse&gt; findStockResponsesDetailsAndTotal() {\n    List&lt;StockResponse&gt; stocksResponses = new ArrayList();\n    List&lt;Stock&gt; stocks = stockRepository.findAll();\n    StockResponse total = new StockResponse(0, &quot;Total&quot;);\n    stocks.forEach(stock -&gt; {\n        total.add(stock.getValue());\n        stocksResponses.add(new StockResponse(stock));\n    });\n    stocksResponses.add(total);\n    return stocksResponses;\n}\n</code></pre>\n<p>into a &quot;flux phylosophy&quot;\nHere is my code so far :</p>\n<pre><code>stockRepository.findAll()\n  .map(StockResponse::convert)\n</code></pre>\n<p>I'm kinda lost about the &quot;total&quot;, I know that I can do a reduce on the Flux but i'll lose all the details in doing so</p>\n"},{"tags":["java","vert.x","graalvm","graalvm-native-image"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1687785042,"post_id":76556941,"comment_id":134980882,"body_markdown":"Read the error message. It explains how to find out what path is leading to this problem, and suggests a couple of solutions.","body":"Read the error message. It explains how to find out what path is leading to this problem, and suggests a couple of solutions."},{"owner":{"account_id":175525,"reputation":1174,"user_id":405613,"display_name":"Oliver Marienfeld"},"score":0,"creation_date":1688223963,"post_id":76556941,"comment_id":135046831,"body_markdown":"Hazelcast exposes JMX beans, so that&#39;s probably the library you&#39;re looking for. Maybe this how-to does also help: https://how-to.vertx.io/graal-native-image-howto/","body":"Hazelcast exposes JMX beans, so that&#39;s probably the library you&#39;re looking for. Maybe this how-to does also help: <a href=\"https://how-to.vertx.io/graal-native-image-howto/\" rel=\"nofollow noreferrer\">how-to.vertx.io/graal-native-image-howto</a>"},{"owner":{"account_id":3737361,"reputation":479,"user_id":3108006,"accept_rate":38,"display_name":"Qeychon"},"score":0,"creation_date":1691406326,"post_id":76556941,"comment_id":135482477,"body_markdown":"@OliverMarienfeld Thank you, this helps a lot. So the Logging Framework log4j2 are not supported, so I will remove it.","body":"@OliverMarienfeld Thank you, this helps a lot. So the Logging Framework log4j2 are not supported, so I will remove it."},{"owner":{"account_id":3737361,"reputation":479,"user_id":3108006,"accept_rate":38,"display_name":"Qeychon"},"score":0,"creation_date":1695240779,"post_id":76556941,"comment_id":135999804,"body_markdown":"unfortunately all the examples does not work. Because the use the old version of graalvm and if I use the old version, then OSX throw an exception application is defect. Does someone has an example code in Github who works?","body":"unfortunately all the examples does not work. Because the use the old version of graalvm and if I use the old version, then OSX throw an exception application is defect. Does someone has an example code in Github who works?"}],"owner":{"account_id":3737361,"reputation":479,"user_id":3108006,"accept_rate":38,"display_name":"Qeychon"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":262,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687784444,"creation_date":1687784444,"question_id":76556941,"body_markdown":"I want to convert the executable jar file to the native image via GraalVM. \r\nI use the command: \r\n\r\n    native-image --initialize-at-build-time=com.sun.jmx.mbeanserver.JmxMBeanServer -jar target/resource-1.0-SNAPSHOT-jar-with-dependencies.jar\r\n\r\nThen the process will be stopped with following exception:\r\n\r\n    Error: java.util.concurrent.ExecutionException: com.oracle.graal.pointsto.constraints.UnsupportedFeatureException: Detected a MBean server in the image heap. This is currently not supported, but could be changed in the future. Management beans are registered in many global caches that would need to be cleared and properly re-built at image build time. Class of disallowed object: com.sun.jmx.mbeanserver.JmxMBeanServer  To see how this object got instantiated use --trace-object-instantiation=com.sun.jmx.mbeanserver.JmxMBeanServer. The object was probably created by a class initializer and is reachable from a static field. You can request class initialization at image runtime by using the option --initialize-at-run-time=&lt;class-name&gt;. Or you can write your own initialization methods and call them explicitly from your main entry point.\r\n    Error: Use -H:+ReportExceptionStackTraces to print stacktrace of underlying exception\r\n\r\nI use following dependencies:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.vertx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;vertx-web&lt;/artifactId&gt;\r\n            &lt;version&gt;${vertx}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.vertx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;vertx-web-client&lt;/artifactId&gt;\r\n            &lt;version&gt;${vertx}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\r\n            &lt;version&gt;0.9.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4.0-b180830.0359&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-cloud-secretmanager&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.vertx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;vertx-hazelcast&lt;/artifactId&gt;\r\n            &lt;version&gt;${vertx}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nI guess some libraries are not supported. But how can I find out, which libraries.\r\nSo is there some tools ore commands to find out, which library I have to replace?\r\nOr Im on the wrong way and the problem is not the library?","title":"GraalVM native image does not support MBean server","body":"<p>I want to convert the executable jar file to the native image via GraalVM.\nI use the command:</p>\n<pre><code>native-image --initialize-at-build-time=com.sun.jmx.mbeanserver.JmxMBeanServer -jar target/resource-1.0-SNAPSHOT-jar-with-dependencies.jar\n</code></pre>\n<p>Then the process will be stopped with following exception:</p>\n<pre><code>Error: java.util.concurrent.ExecutionException: com.oracle.graal.pointsto.constraints.UnsupportedFeatureException: Detected a MBean server in the image heap. This is currently not supported, but could be changed in the future. Management beans are registered in many global caches that would need to be cleared and properly re-built at image build time. Class of disallowed object: com.sun.jmx.mbeanserver.JmxMBeanServer  To see how this object got instantiated use --trace-object-instantiation=com.sun.jmx.mbeanserver.JmxMBeanServer. The object was probably created by a class initializer and is reachable from a static field. You can request class initialization at image runtime by using the option --initialize-at-run-time=&lt;class-name&gt;. Or you can write your own initialization methods and call them explicitly from your main entry point.\nError: Use -H:+ReportExceptionStackTraces to print stacktrace of underlying exception\n</code></pre>\n<p>I use following dependencies:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;io.vertx&lt;/groupId&gt;\n        &lt;artifactId&gt;vertx-web&lt;/artifactId&gt;\n        &lt;version&gt;${vertx}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.vertx&lt;/groupId&gt;\n        &lt;artifactId&gt;vertx-web-client&lt;/artifactId&gt;\n        &lt;version&gt;${vertx}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n        &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n        &lt;version&gt;0.9.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n        &lt;version&gt;2.4.0-b180830.0359&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;google-cloud-secretmanager&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.vertx&lt;/groupId&gt;\n        &lt;artifactId&gt;vertx-hazelcast&lt;/artifactId&gt;\n        &lt;version&gt;${vertx}&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>I guess some libraries are not supported. But how can I find out, which libraries.\nSo is there some tools ore commands to find out, which library I have to replace?\nOr Im on the wrong way and the problem is not the library?</p>\n"},{"tags":["java","css","vaadin"],"owner":{"account_id":4544346,"reputation":47,"user_id":3691373,"display_name":"fraaanz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687784342,"creation_date":1687784342,"question_id":76556929,"body_markdown":"I&#39;m just trying to center a label in a GridLayout that is inside a popUP:\r\n\r\n        public class PopUpAlert extends  Window implements View{\r\n        \t\r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \t\r\n    \tpublic PopUpAlert() {\r\n    \t\t\r\n    \t\tsuper(&quot;Inserimento&quot;); \r\n    \t\tcenter();\r\n    \t\tsetWidth(&quot;1500px&quot;);\r\n    \t\t\r\n    \t\tGridLayout layoutpopUp = new GridLayout(2, 2);\r\n        \t\r\n        \tfinal TextField textDescrizione3 = new TextField(&quot;Descrizione3&quot;);\r\n        \tfinal TextField textDescrizione4 = new TextField(&quot;Descrizione4&quot;);\r\n        \tLabel label = new Label(&quot;label&quot;);\r\n        \tlabel.setSizeUndefined();\r\n        \tlayoutpopUp.addComponent(label, 0,0,1,0);\t\r\n        \tlayoutpopUp.addComponent(textDescrizione3,0,1); \r\n        \tlayoutpopUp.addComponent(textDescrizione4,1,1); \r\n        \t\r\n        \tlayoutpopUp.setMargin(true);\r\n        \t\r\n        \tlayoutpopUp.setSpacing(true);\r\n        \tsetContent(layoutpopUp);\r\n    }\r\n\r\n\r\nThe result is this one:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zpITW.png\r\n\r\n\r\n\r\nWhat I want is just center label in the center of the cell area that is identified by \r\nlayoutpopUp.addComponent(label, 0,0,1,0);\t\r\n\r\n\r\nI&#39;ve tried almost everything\r\n\r\n - layoutpopUp.setComponentAlignment(label, Alignment.MIDDLE_CENTER);\r\n - Component c = layoutpopUp.getComponent(1,0);\r\n   layoutpopUp.setComponentAlignment(c, Alignment.TOP_CENTER);\r\n - as indicated in\r\n   https://stackoverflow.com/questions/31755012/vaadin-alignment-with-gridlayout-to-center-over-cells\r\n\r\nbut no one will center the label above and in the center of Descrizione3 and Descrizione4;\r\n\r\nAlso I have copied the example at https://vaadin.com/docs/v7/framework/layout/layout-gridlayout, but to me the button 3x1 is on the left side of the cell;\r\nI&#39;m going to get crazy;","title":"center a label in an area inside a GridLayout","body":"<p>I'm just trying to center a label in a GridLayout that is inside a popUP:</p>\n<pre><code>    public class PopUpAlert extends  Window implements View{\n        \n    private static final long serialVersionUID = 1L;\n    \n    public PopUpAlert() {\n        \n        super(&quot;Inserimento&quot;); \n        center();\n        setWidth(&quot;1500px&quot;);\n        \n        GridLayout layoutpopUp = new GridLayout(2, 2);\n        \n        final TextField textDescrizione3 = new TextField(&quot;Descrizione3&quot;);\n        final TextField textDescrizione4 = new TextField(&quot;Descrizione4&quot;);\n        Label label = new Label(&quot;label&quot;);\n        label.setSizeUndefined();\n        layoutpopUp.addComponent(label, 0,0,1,0);   \n        layoutpopUp.addComponent(textDescrizione3,0,1); \n        layoutpopUp.addComponent(textDescrizione4,1,1); \n        \n        layoutpopUp.setMargin(true);\n        \n        layoutpopUp.setSpacing(true);\n        setContent(layoutpopUp);\n}\n</code></pre>\n<p>The result is this one:\n<a href=\"https://i.stack.imgur.com/zpITW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zpITW.png\" alt=\"enter image description here\" /></a></p>\n<p>What I want is just center label in the center of the cell area that is identified by\nlayoutpopUp.addComponent(label, 0,0,1,0);</p>\n<p>I've tried almost everything</p>\n<ul>\n<li>layoutpopUp.setComponentAlignment(label, Alignment.MIDDLE_CENTER);</li>\n<li>Component c = layoutpopUp.getComponent(1,0);\nlayoutpopUp.setComponentAlignment(c, Alignment.TOP_CENTER);</li>\n<li>as indicated in\n<a href=\"https://stackoverflow.com/questions/31755012/vaadin-alignment-with-gridlayout-to-center-over-cells\">Vaadin Alignment with GridLayout to center over cells</a></li>\n</ul>\n<p>but no one will center the label above and in the center of Descrizione3 and Descrizione4;</p>\n<p>Also I have copied the example at <a href=\"https://vaadin.com/docs/v7/framework/layout/layout-gridlayout\" rel=\"nofollow noreferrer\">https://vaadin.com/docs/v7/framework/layout/layout-gridlayout</a>, but to me the button 3x1 is on the left side of the cell;\nI'm going to get crazy;</p>\n"},{"tags":["java","json","gson"],"comments":[{"owner":{"account_id":422778,"reputation":6427,"user_id":801751,"accept_rate":60,"display_name":"Tom Carchrae"},"score":0,"creation_date":1371136979,"post_id":17090589,"comment_id":81837032,"body_markdown":"Jackson does a much better job at detecting types for maps, and it is far easier to configure than GSON: https://github.com/FasterXML/jackson-databind","body":"Jackson does a much better job at detecting types for maps, and it is far easier to configure than GSON: <a href=\"https://github.com/FasterXML/jackson-databind\" rel=\"nofollow noreferrer\">github.com/FasterXML/jackson-databind</a>"},{"owner":{"account_id":3649634,"reputation":766,"user_id":3042124,"accept_rate":100,"display_name":"Megakoresh"},"score":2,"creation_date":1470999148,"post_id":17090589,"comment_id":81837033,"body_markdown":"The question explicitly asked for Gson implementation. Please stick to the question.","body":"The question explicitly asked for Gson implementation. Please stick to the question."},{"owner":{"account_id":60183,"reputation":4029,"user_id":179864,"accept_rate":67,"display_name":"aditsu quit because SE is EVIL"},"score":0,"creation_date":1491916680,"post_id":17090589,"comment_id":73757354,"body_markdown":"Also see [this answer](http://stackoverflow.com/a/43346123/179864) I wrote for a similar question; the catch is that you would have to parse the data as an `Object` and then cast to whatever you need.","body":"Also see <a href=\"http://stackoverflow.com/a/43346123/179864\">this answer</a> I wrote for a similar question; the catch is that you would have to parse the data as an <code>Object</code> and then cast to whatever you need."}],"answers":[{"comments":[{"owner":{"account_id":2026878,"reputation":1243,"user_id":1823997,"accept_rate":55,"display_name":"Moses"},"score":4,"creation_date":1371136640,"post_id":17090690,"comment_id":24721568,"body_markdown":"But in java there are Integers and Doubles. And it&#39;s easy to deserialize {&quot;num&quot;:1} to Integer if I have a class with Integer field &quot;num&quot;, but when gson deserializes json to Map&lt;String, Object&gt; it desides to use Double. So I&#39;am seeking the way to disable this approach.","body":"But in java there are Integers and Doubles. And it&#39;s easy to deserialize {&quot;num&quot;:1} to Integer if I have a class with Integer field &quot;num&quot;, but when gson deserializes json to Map&lt;String, Object&gt; it desides to use Double. So I&#39;am seeking the way to disable this approach."},{"owner":{"account_id":65386,"reputation":39895,"user_id":192444,"accept_rate":100,"display_name":"John Vint"},"score":0,"creation_date":1371144533,"post_id":17090690,"comment_id":24725874,"body_markdown":"@Moses define a Map&lt;String, Integer&gt;","body":"@Moses define a Map&lt;String, Integer&gt;"},{"owner":{"account_id":2026878,"reputation":1243,"user_id":1823997,"accept_rate":55,"display_name":"Moses"},"score":4,"creation_date":1371192997,"post_id":17090690,"comment_id":24741933,"body_markdown":"Map should contain not only integers.","body":"Map should contain not only integers."}],"tags":[],"owner":{"account_id":1190755,"reputation":48912,"user_id":1163607,"accept_rate":97,"display_name":"AllTooSir"},"comment_count":3,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1371136295,"creation_date":1371136295,"answer_id":17090690,"question_id":17090589,"body_markdown":"There are no integer type in JSON. 1 and 1.0 are the same. You need to parse that 1.0 to 1 in your code. Or you need to map the JSON to some VO class and define the type of fields of the class explicitly , so that GSON can understand what you are looking for.","title":"Gson. Deserialize integers as integers and not as doubles","body":"<p>There are no integer type in JSON. 1 and 1.0 are the same. You need to parse that 1.0 to 1 in your code. Or you need to map the JSON to some VO class and define the type of fields of the class explicitly , so that GSON can understand what you are looking for.</p>\n"},{"tags":[],"owner":{"account_id":246,"reputation":107913,"user_id":304,"accept_rate":40,"display_name":"McDowell"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1371136864,"creation_date":1371136864,"answer_id":17090885,"question_id":17090589,"body_markdown":"JSON only has a single Number type and there is no way for the parser to automatically tell what type  to convert it to.\r\n\r\nIf you aren&#39;t going to use a strongly typed object graph, consider using the [JsonElement][1] types:\r\n\r\n    JsonObject root = new Gson().fromJson(json, JsonObject.class);\r\n    int num = root.getAsJsonObject(&quot;inner_obj&quot;).get(&quot;num&quot;).getAsInt();\r\n\r\n\r\n  [1]: http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonElement.html","title":"Gson. Deserialize integers as integers and not as doubles","body":"<p>JSON only has a single Number type and there is no way for the parser to automatically tell what type  to convert it to.</p>\n\n<p>If you aren't going to use a strongly typed object graph, consider using the <a href=\"http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonElement.html\" rel=\"nofollow\">JsonElement</a> types:</p>\n\n<pre><code>JsonObject root = new Gson().fromJson(json, JsonObject.class);\nint num = root.getAsJsonObject(\"inner_obj\").get(\"num\").getAsInt();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3064040,"reputation":31,"user_id":2596147,"display_name":"이종은"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1421054952,"creation_date":1421054952,"answer_id":27898782,"question_id":17090589,"body_markdown":"It&#39;s my code\r\n\r\n    private static class MapDeserializer implements JsonDeserializer&lt;Map&lt;String,Object&gt;&gt; {\r\n        public Map&lt;String,Object&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context)  throws JsonParseException {\r\n        \tMap&lt;String,Object&gt; m  = new LinkedHashMap&lt;String, Object&gt;();\r\n        \tJsonObject jo = json.getAsJsonObject();\r\n        \tfor (Entry&lt;String, JsonElement&gt;  mx : jo.entrySet()){\r\n        \t\tString key = mx.getKey();\r\n        \t\tJsonElement v = mx.getValue();\r\n        \t\tif(v.isJsonArray()){\r\n        \t\t\tm.put(key, g.fromJson(v, List.class));\r\n        \t\t}else if(v.isJsonPrimitive()){\r\n        \t\t\t Number num = null;\r\n        \t          try {\r\n        \t              num = NumberFormat.getInstance().parse(v.getAsString());\r\n        \t          } catch (Exception e) {\r\n        \t        \t  e.printStackTrace();\r\n        \t          }\r\n        \t\t\tm.put(key,num);\r\n        \t\t}else if(v.isJsonObject()){\r\n        \t\t\tm.put(key,g.fromJson(v, Map.class));\t\r\n        \t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n          return m;\r\n       }\r\n\t}\r\n\r\n    private static class ListDeserializer implements JsonDeserializer&lt;List&lt;Object&gt;&gt; {\r\n        public List&lt;Object&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context)  throws JsonParseException {\r\n        \tList&lt;Object&gt; m  = new ArrayList&lt;Object&gt;();\r\n        \tJsonArray arr = json.getAsJsonArray();\r\n        \tfor (JsonElement jsonElement : arr) {\r\n\t\t\t\tif(jsonElement.isJsonObject()){\r\n\t\t\t\t\tm.add(g.fromJson(jsonElement, Map.class));\r\n\t\t\t\t}else if(jsonElement.isJsonArray()){\r\n\t\t\t\t\tm.add(g.fromJson(jsonElement, List.class));\r\n\t\t\t\t}else if(jsonElement.isJsonPrimitive()){\r\n\t\t\t\t\tNumber num = null;\r\n       \t          \ttry {\r\n       \t              num = NumberFormat.getInstance().parse(jsonElement.getAsString());\r\n       \t          \t} catch (Exception e) {\r\n       \t          \t}\r\n       \t          \tm.add(num);\r\n\t\t\t\t}\r\n\t\t\t}\r\n          return m;\r\n       }\r\n\t}\r\n\r\n    private static Gson g = new GsonBuilder().registerTypeAdapter(Map.class, new MapDeserializer()).registerTypeAdapter(List.class, new ListDeserializer()).setDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;).serializeNulls().create();\r\n ","title":"Gson. Deserialize integers as integers and not as doubles","body":"<p>It's my code</p>\n\n<pre><code>private static class MapDeserializer implements JsonDeserializer&lt;Map&lt;String,Object&gt;&gt; {\n    public Map&lt;String,Object&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context)  throws JsonParseException {\n        Map&lt;String,Object&gt; m  = new LinkedHashMap&lt;String, Object&gt;();\n        JsonObject jo = json.getAsJsonObject();\n        for (Entry&lt;String, JsonElement&gt;  mx : jo.entrySet()){\n            String key = mx.getKey();\n            JsonElement v = mx.getValue();\n            if(v.isJsonArray()){\n                m.put(key, g.fromJson(v, List.class));\n            }else if(v.isJsonPrimitive()){\n                 Number num = null;\n                  try {\n                      num = NumberFormat.getInstance().parse(v.getAsString());\n                  } catch (Exception e) {\n                      e.printStackTrace();\n                  }\n                m.put(key,num);\n            }else if(v.isJsonObject()){\n                m.put(key,g.fromJson(v, Map.class));    \n            }\n\n        }\n      return m;\n   }\n}\n\nprivate static class ListDeserializer implements JsonDeserializer&lt;List&lt;Object&gt;&gt; {\n    public List&lt;Object&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context)  throws JsonParseException {\n        List&lt;Object&gt; m  = new ArrayList&lt;Object&gt;();\n        JsonArray arr = json.getAsJsonArray();\n        for (JsonElement jsonElement : arr) {\n            if(jsonElement.isJsonObject()){\n                m.add(g.fromJson(jsonElement, Map.class));\n            }else if(jsonElement.isJsonArray()){\n                m.add(g.fromJson(jsonElement, List.class));\n            }else if(jsonElement.isJsonPrimitive()){\n                Number num = null;\n                try {\n                  num = NumberFormat.getInstance().parse(jsonElement.getAsString());\n                } catch (Exception e) {\n                }\n                m.add(num);\n            }\n        }\n      return m;\n   }\n}\n\nprivate static Gson g = new GsonBuilder().registerTypeAdapter(Map.class, new MapDeserializer()).registerTypeAdapter(List.class, new ListDeserializer()).setDateFormat(\"yyyy-MM-dd HH:mm:ss\").serializeNulls().create();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":274541,"reputation":327,"user_id":566839,"accept_rate":80,"display_name":"peanutman"},"score":0,"creation_date":1511177338,"post_id":32235713,"comment_id":81734754,"body_markdown":"This helped me a lot! I would just like a point out a small bug. In the ListDeserializer you should remove &quot;m.add(num)&quot; in the try{ } block, because it will be added anyway after the try/catch. If you use the code as-is, it will add each number to the result twice.","body":"This helped me a lot! I would just like a point out a small bug. In the ListDeserializer you should remove &quot;m.add(num)&quot; in the try{ } block, because it will be added anyway after the try/catch. If you use the code as-is, it will add each number to the result twice."},{"owner":{"account_id":178371,"reputation":511,"user_id":410308,"display_name":"David"},"score":1,"creation_date":1518740705,"post_id":32235713,"comment_id":84640690,"body_markdown":"I think you can replace the calls to g.fromJson(...) to context.deserialize(...) to avoid the need for a static instance of gson (at least it works for me  for gson 2.6.2)","body":"I think you can replace the calls to g.fromJson(...) to context.deserialize(...) to avoid the need for a static instance of gson (at least it works for me  for gson 2.6.2)"}],"tags":[],"owner":{"account_id":5689309,"reputation":51,"user_id":4497813,"display_name":"Erik Calissendorff"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1511339263,"creation_date":1440619445,"answer_id":32235713,"question_id":17090589,"body_markdown":"Been searching for a solution to the nested Map&lt;String,Object&gt; problem myself and &quot;이종은&quot; above was the first answer that actually helped in the non trivial use cases.\r\n\r\nSince the solution above only handled Number I updated the solution to provide generic parsing capability for String and booleans also, see the updated code below:\r\n\r\n\r\n\tprivate static class MapDeserializer implements JsonDeserializer&lt;Map&lt;String, Object&gt;&gt; {\r\n\r\n\t\tpublic Map&lt;String, Object&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\r\n\t\t\tMap&lt;String, Object&gt; m = new LinkedHashMap&lt;String, Object&gt;();\r\n\t\t\tJsonObject jo = json.getAsJsonObject();\r\n\t\t\tfor (Entry&lt;String, JsonElement&gt; mx : jo.entrySet()) {\r\n\t\t\t\tString key = mx.getKey();\r\n\t\t\t\tJsonElement v = mx.getValue();\r\n\t\t\t\tif (v.isJsonArray()) {\r\n\t\t\t\t\tm.put(key, g.fromJson(v, List.class));\r\n\t\t\t\t} else if (v.isJsonPrimitive()) {\r\n\t\t\t\t\tNumber num = null;\r\n\t\t\t\t\tParsePosition position=new ParsePosition(0);\r\n\t\t\t\t\tString vString=v.getAsString();\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t  num = NumberFormat.getInstance(Locale.ROOT).parse(vString,position);\r\n\t\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//Check if the position corresponds to the length of the string\r\n\t\t\t\t\tif(position.getErrorIndex() &lt; 0 &amp;&amp; vString.length() == position.getIndex()) {\r\n\t\t\t\t\t  if (num != null) {\r\n\t\t\t\t\t    m.put(key, num);\r\n\t\t\t\t\t    continue;\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tJsonPrimitive prim = v.getAsJsonPrimitive();\r\n\t\t\t\t\tif (prim.isBoolean()) {\r\n\t\t\t\t\t\tm.put(key, prim.getAsBoolean());\r\n\t\t\t\t\t} else if (prim.isString()) {\r\n\t\t\t\t\t\tm.put(key, prim.getAsString());\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tm.put(key, null);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if (v.isJsonObject()) {\r\n\t\t\t\t\tm.put(key, g.fromJson(v, Map.class));\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\treturn m;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static class ListDeserializer implements JsonDeserializer&lt;List&lt;Object&gt;&gt; {\r\n\r\n\t\tpublic List&lt;Object&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\r\n\t\t\tList&lt;Object&gt; m = new ArrayList&lt;Object&gt;();\r\n\t\t\tJsonArray arr = json.getAsJsonArray();\r\n\t\t\tfor (JsonElement jsonElement : arr) {\r\n\t\t\t\tif (jsonElement.isJsonObject()) {\r\n\t\t\t\t\tm.add(g.fromJson(jsonElement, Map.class));\r\n\t\t\t\t} else if (jsonElement.isJsonArray()) {\r\n\t\t\t\t\tm.add(g.fromJson(jsonElement, List.class));\r\n\t\t\t\t} else if (jsonElement.isJsonPrimitive()) {\r\n\t\t\t\t\tNumber num = null;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tnum = NumberFormat.getInstance().parse(jsonElement.getAsString());\r\n\t\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (num != null) {\r\n\t\t\t\t\t\tm.add(num);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tJsonPrimitive prim = jsonElement.getAsJsonPrimitive();\r\n\t\t\t\t\tif (prim.isBoolean()) {\r\n\t\t\t\t\t\tm.add(prim.getAsBoolean());\r\n\t\t\t\t\t} else if (prim.isString()) {\r\n\t\t\t\t\t\tm.add(prim.getAsString());\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tm.add(null);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn m;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static Gson g = new GsonBuilder().registerTypeAdapter(Map.class, new MapDeserializer()).registerTypeAdapter(List.class, new ListDeserializer()).setDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;).create();","title":"Gson. Deserialize integers as integers and not as doubles","body":"<p>Been searching for a solution to the nested Map problem myself and \"이종은\" above was the first answer that actually helped in the non trivial use cases.</p>\n\n<p>Since the solution above only handled Number I updated the solution to provide generic parsing capability for String and booleans also, see the updated code below:</p>\n\n<pre><code>private static class MapDeserializer implements JsonDeserializer&lt;Map&lt;String, Object&gt;&gt; {\n\n    public Map&lt;String, Object&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\n        Map&lt;String, Object&gt; m = new LinkedHashMap&lt;String, Object&gt;();\n        JsonObject jo = json.getAsJsonObject();\n        for (Entry&lt;String, JsonElement&gt; mx : jo.entrySet()) {\n            String key = mx.getKey();\n            JsonElement v = mx.getValue();\n            if (v.isJsonArray()) {\n                m.put(key, g.fromJson(v, List.class));\n            } else if (v.isJsonPrimitive()) {\n                Number num = null;\n                ParsePosition position=new ParsePosition(0);\n                String vString=v.getAsString();\n                try {\n                  num = NumberFormat.getInstance(Locale.ROOT).parse(vString,position);\n                } catch (Exception e) {\n                }\n                //Check if the position corresponds to the length of the string\n                if(position.getErrorIndex() &lt; 0 &amp;&amp; vString.length() == position.getIndex()) {\n                  if (num != null) {\n                    m.put(key, num);\n                    continue;\n                  }\n                }\n                JsonPrimitive prim = v.getAsJsonPrimitive();\n                if (prim.isBoolean()) {\n                    m.put(key, prim.getAsBoolean());\n                } else if (prim.isString()) {\n                    m.put(key, prim.getAsString());\n                } else {\n                    m.put(key, null);\n                }\n\n            } else if (v.isJsonObject()) {\n                m.put(key, g.fromJson(v, Map.class));\n            }\n\n        }\n        return m;\n    }\n}\n\nprivate static class ListDeserializer implements JsonDeserializer&lt;List&lt;Object&gt;&gt; {\n\n    public List&lt;Object&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\n        List&lt;Object&gt; m = new ArrayList&lt;Object&gt;();\n        JsonArray arr = json.getAsJsonArray();\n        for (JsonElement jsonElement : arr) {\n            if (jsonElement.isJsonObject()) {\n                m.add(g.fromJson(jsonElement, Map.class));\n            } else if (jsonElement.isJsonArray()) {\n                m.add(g.fromJson(jsonElement, List.class));\n            } else if (jsonElement.isJsonPrimitive()) {\n                Number num = null;\n                try {\n                    num = NumberFormat.getInstance().parse(jsonElement.getAsString());\n                } catch (Exception e) {\n                }\n                if (num != null) {\n                    m.add(num);\n                    continue;\n                }\n                JsonPrimitive prim = jsonElement.getAsJsonPrimitive();\n                if (prim.isBoolean()) {\n                    m.add(prim.getAsBoolean());\n                } else if (prim.isString()) {\n                    m.add(prim.getAsString());\n                } else {\n                    m.add(null);\n                }\n            }\n        }\n        return m;\n    }\n}\n\nprivate static Gson g = new GsonBuilder().registerTypeAdapter(Map.class, new MapDeserializer()).registerTypeAdapter(List.class, new ListDeserializer()).setDateFormat(\"yyyy-MM-dd HH:mm:ss\").create();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2748644,"reputation":6153,"user_id":2368492,"display_name":"Zephyr"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1441294771,"creation_date":1441294771,"answer_id":32380014,"question_id":17090589,"body_markdown":"Here is my example, the first part is the definition of the class that has an int type field.\r\n\r\n    import com.google.api.client.util.Key;\r\n    \r\n    public class Folder {\r\n    \r\n        public static final String FIELD_NAME_CHILD_COUNT = &quot;childCount&quot;;\r\n    \r\n        @Key(FIELD_NAME_CHILD_COUNT)\r\n        public final int childCount;\r\n    \r\n        public Folder(int aChildCount) {\r\n            childCount = aChildCount;\r\n        }\r\n    }\r\n\r\nThen the TypeAdapter to convert the number type in Gson to a Java object.\r\n\r\n    GsonBuilder gsb = new GsonBuilder();\r\n\r\n    gsb.registerTypeAdapter(Folder.class, new JsonDeserializer&lt;Folder&gt;() {\r\n\r\n                @Override\r\n                public Folder deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\r\n\r\n                    int value = json.getAsJsonObject().get(&quot;childCount&quot;).getAsJsonPrimitive().getAsInt();\r\n\r\n                    return new Folder(value);\r\n\r\n                }\r\n            }\r\n    );\r\n\r\nThe third part is the test data, and it works.\r\n\r\n    String gsonData =  new String(&quot;\\&quot;folder\\&quot;:{\\&quot;childCount\\&quot;:0}&quot;);","title":"Gson. Deserialize integers as integers and not as doubles","body":"<p>Here is my example, the first part is the definition of the class that has an int type field.</p>\n\n<pre><code>import com.google.api.client.util.Key;\n\npublic class Folder {\n\n    public static final String FIELD_NAME_CHILD_COUNT = \"childCount\";\n\n    @Key(FIELD_NAME_CHILD_COUNT)\n    public final int childCount;\n\n    public Folder(int aChildCount) {\n        childCount = aChildCount;\n    }\n}\n</code></pre>\n\n<p>Then the TypeAdapter to convert the number type in Gson to a Java object.</p>\n\n<pre><code>GsonBuilder gsb = new GsonBuilder();\n\ngsb.registerTypeAdapter(Folder.class, new JsonDeserializer&lt;Folder&gt;() {\n\n            @Override\n            public Folder deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\n\n                int value = json.getAsJsonObject().get(\"childCount\").getAsJsonPrimitive().getAsInt();\n\n                return new Folder(value);\n\n            }\n        }\n);\n</code></pre>\n\n<p>The third part is the test data, and it works.</p>\n\n<pre><code>String gsonData =  new String(\"\\\"folder\\\":{\\\"childCount\\\":0}\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":136011,"reputation":1123,"user_id":339246,"accept_rate":70,"display_name":"hrzafer"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1518048375,"creation_date":1518048375,"answer_id":48675366,"question_id":17090589,"body_markdown":"To avoid possible ClassCastException, it is better to cast to `Number` first. In the following code `map` was deserialized from JSON as a `Map` with no generics.\r\n\r\n    int numberOfPages = ((Number) map.get(&quot;number_of_pages&quot;)).intValue();","title":"Gson. Deserialize integers as integers and not as doubles","body":"<p>To avoid possible ClassCastException, it is better to cast to <code>Number</code> first. In the following code <code>map</code> was deserialized from JSON as a <code>Map</code> with no generics.</p>\n\n<pre><code>int numberOfPages = ((Number) map.get(\"number_of_pages\")).intValue();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1831862,"reputation":930,"user_id":1663094,"accept_rate":0,"display_name":"Oleksandr Tsurika"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574797303,"creation_date":1574797303,"answer_id":59058304,"question_id":17090589,"body_markdown":"Register type adapter for `Map`:\r\n \r\n\r\n       Gson gson = new GsonBuilder()\r\n                .registerTypeAdapter(Map.class, new JsonDeserializer&lt;Map&gt;() {\r\n                    @Override\r\n                    public Map deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\r\n                        LinkedTreeMap&lt;String,Object&gt; m  = new LinkedTreeMap&lt;String, Object&gt;();\r\n                        JsonObject jo = json.getAsJsonObject();\r\n                        for (Map.Entry&lt;String, JsonElement&gt; mx : jo.entrySet()){\r\n                            String key = mx.getKey();\r\n                            JsonElement v = mx.getValue();\r\n                            if(v.isJsonArray()){\r\n                                m.put(key, context.deserialize(v, List.class));\r\n                            }else if(v.isJsonPrimitive()){\r\n                                Object value = v.getAsString();\r\n                                try {\r\n                                    Object numValue = NumberFormat.getInstance().parse((String)value);\r\n                                    if (numValue != null &amp;&amp; numValue.toString().equals(value)) {\r\n                                        value = numValue;\r\n                                    }\r\n                                } catch (Exception e) {\r\n                                }\r\n                                m.put(key, value);\r\n                            }else if(v.isJsonObject()){\r\n                                m.put(key,context.deserialize(v, Map.class));\r\n                            }\r\n                        }\r\n                        return m;\r\n                    }\r\n                })\r\n                .create();\r\n     \r\n\r\nand deserialize using it like: `gson.fromJson(instanceJson, Map.class)`, where `instanceJson` is an `json` of object which should be deserialized into `Map`.","title":"Gson. Deserialize integers as integers and not as doubles","body":"<p>Register type adapter for <code>Map</code>:</p>\n\n<pre><code>   Gson gson = new GsonBuilder()\n            .registerTypeAdapter(Map.class, new JsonDeserializer&lt;Map&gt;() {\n                @Override\n                public Map deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\n                    LinkedTreeMap&lt;String,Object&gt; m  = new LinkedTreeMap&lt;String, Object&gt;();\n                    JsonObject jo = json.getAsJsonObject();\n                    for (Map.Entry&lt;String, JsonElement&gt; mx : jo.entrySet()){\n                        String key = mx.getKey();\n                        JsonElement v = mx.getValue();\n                        if(v.isJsonArray()){\n                            m.put(key, context.deserialize(v, List.class));\n                        }else if(v.isJsonPrimitive()){\n                            Object value = v.getAsString();\n                            try {\n                                Object numValue = NumberFormat.getInstance().parse((String)value);\n                                if (numValue != null &amp;&amp; numValue.toString().equals(value)) {\n                                    value = numValue;\n                                }\n                            } catch (Exception e) {\n                            }\n                            m.put(key, value);\n                        }else if(v.isJsonObject()){\n                            m.put(key,context.deserialize(v, Map.class));\n                        }\n                    }\n                    return m;\n                }\n            })\n            .create();\n</code></pre>\n\n<p>and deserialize using it like: <code>gson.fromJson(instanceJson, Map.class)</code>, where <code>instanceJson</code> is an <code>json</code> of object which should be deserialized into <code>Map</code>.</p>\n"},{"tags":[],"owner":{"account_id":17385796,"reputation":219,"user_id":12597147,"display_name":"CodingSamples"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617983472,"creation_date":1617983107,"answer_id":67024244,"question_id":17090589,"body_markdown":"here is my solution to solve the Problem. I tried to implement it as clean as possible. I didn&#39; t find a better easy solution to check if a number is an integer.\r\n\r\n```\r\npublic final class GSONUtil {\r\n\r\n    private GSONUtil() {\r\n    }\r\n\r\n    public static Gson createGson() {\r\n\r\n        // @formatter:off\r\n        return new GsonBuilder()\r\n                .registerTypeAdapter(Map.class, createMapDeserializer())\r\n                .registerTypeAdapter(List.class, createListDeserializer())\r\n                .create();\r\n        // @formatter:on\r\n    }\r\n\r\n    private static JsonDeserializer&lt;Map&lt;String,Object&gt;&gt; createMapDeserializer() {\r\n        return new JsonDeserializer&lt;Map&lt;String,Object&gt;&gt;() {\r\n\r\n            @Override\r\n            public Map&lt;String, Object&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context)\r\n                    throws JsonParseException {\r\n\r\n                return json.getAsJsonObject().entrySet().stream() // stream\r\n                        .collect(Collectors.toMap(Entry::getKey, (e) -&gt; JSONUtil.deserialize(e.getValue(), context)));\r\n            }\r\n        };\r\n    }\r\n\r\n    private static JsonDeserializer&lt;List&lt;Object&gt;&gt; createListDeserializer() {\r\n        return new JsonDeserializer&lt;List&lt;Object&gt;&gt;() {\r\n\r\n            @Override\r\n            public List&lt;Object&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context)\r\n                    throws JsonParseException {\r\n\r\n                return StreamSupport.stream(json.getAsJsonArray().spliterator(), false) // stream\r\n                        .map((e) -&gt; JSONUtil.deserialize(e, context)).collect(Collectors.toList());\r\n            }\r\n        };\r\n    }\r\n\r\n    private static Object deserialize(JsonElement value, JsonDeserializationContext context) {\r\n\r\n        if (value.isJsonNull()) {\r\n            return null;\r\n        }\r\n        if (value.isJsonObject()) {\r\n            return context.deserialize(value, Map.class);\r\n        }\r\n        if (value.isJsonArray()) {\r\n            return context.deserialize(value, List.class);\r\n        }\r\n        if (value.isJsonPrimitive()) {\r\n            return parsePrimitive(value);\r\n        }\r\n\r\n        throw new IllegalStateException(&quot;This exception should never be thrown!&quot;);\r\n    }\r\n\r\n    private static Object parsePrimitive(JsonElement value) {\r\n\r\n        final JsonPrimitive jsonPrimitive = value.getAsJsonPrimitive();\r\n\r\n        if (jsonPrimitive.isString()) {\r\n            return jsonPrimitive.getAsString();\r\n        }\r\n\r\n        if (jsonPrimitive.isBoolean()) {\r\n            return jsonPrimitive.getAsBoolean();\r\n        }\r\n\r\n        if (jsonPrimitive.isNumber()) {\r\n            return parseNumber(jsonPrimitive);\r\n        }\r\n\r\n        throw new IllegalStateException(&quot;This exception should never be thrown!&quot;);\r\n    }\r\n\r\n    private static Number parseNumber(JsonPrimitive jsonPrimitive) {\r\n\r\n        if (isInteger(jsonPrimitive)) {\r\n            return jsonPrimitive.getAsLong();\r\n        }\r\n\r\n        return jsonPrimitive.getAsDouble();\r\n    }\r\n\r\n    private static boolean isInteger(final JsonPrimitive jsonPrimitive) {\r\n        return jsonPrimitive.getAsString().matches(&quot;[-]?\\\\d+&quot;);\r\n    }\r\n}\r\n```","title":"Gson. Deserialize integers as integers and not as doubles","body":"<p>here is my solution to solve the Problem. I tried to implement it as clean as possible. I didn' t find a better easy solution to check if a number is an integer.</p>\n<pre><code>public final class GSONUtil {\n\n    private GSONUtil() {\n    }\n\n    public static Gson createGson() {\n\n        // @formatter:off\n        return new GsonBuilder()\n                .registerTypeAdapter(Map.class, createMapDeserializer())\n                .registerTypeAdapter(List.class, createListDeserializer())\n                .create();\n        // @formatter:on\n    }\n\n    private static JsonDeserializer&lt;Map&lt;String,Object&gt;&gt; createMapDeserializer() {\n        return new JsonDeserializer&lt;Map&lt;String,Object&gt;&gt;() {\n\n            @Override\n            public Map&lt;String, Object&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context)\n                    throws JsonParseException {\n\n                return json.getAsJsonObject().entrySet().stream() // stream\n                        .collect(Collectors.toMap(Entry::getKey, (e) -&gt; JSONUtil.deserialize(e.getValue(), context)));\n            }\n        };\n    }\n\n    private static JsonDeserializer&lt;List&lt;Object&gt;&gt; createListDeserializer() {\n        return new JsonDeserializer&lt;List&lt;Object&gt;&gt;() {\n\n            @Override\n            public List&lt;Object&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context)\n                    throws JsonParseException {\n\n                return StreamSupport.stream(json.getAsJsonArray().spliterator(), false) // stream\n                        .map((e) -&gt; JSONUtil.deserialize(e, context)).collect(Collectors.toList());\n            }\n        };\n    }\n\n    private static Object deserialize(JsonElement value, JsonDeserializationContext context) {\n\n        if (value.isJsonNull()) {\n            return null;\n        }\n        if (value.isJsonObject()) {\n            return context.deserialize(value, Map.class);\n        }\n        if (value.isJsonArray()) {\n            return context.deserialize(value, List.class);\n        }\n        if (value.isJsonPrimitive()) {\n            return parsePrimitive(value);\n        }\n\n        throw new IllegalStateException(&quot;This exception should never be thrown!&quot;);\n    }\n\n    private static Object parsePrimitive(JsonElement value) {\n\n        final JsonPrimitive jsonPrimitive = value.getAsJsonPrimitive();\n\n        if (jsonPrimitive.isString()) {\n            return jsonPrimitive.getAsString();\n        }\n\n        if (jsonPrimitive.isBoolean()) {\n            return jsonPrimitive.getAsBoolean();\n        }\n\n        if (jsonPrimitive.isNumber()) {\n            return parseNumber(jsonPrimitive);\n        }\n\n        throw new IllegalStateException(&quot;This exception should never be thrown!&quot;);\n    }\n\n    private static Number parseNumber(JsonPrimitive jsonPrimitive) {\n\n        if (isInteger(jsonPrimitive)) {\n            return jsonPrimitive.getAsLong();\n        }\n\n        return jsonPrimitive.getAsDouble();\n    }\n\n    private static boolean isInteger(final JsonPrimitive jsonPrimitive) {\n        return jsonPrimitive.getAsString().matches(&quot;[-]?\\\\d+&quot;);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13450560,"reputation":456,"user_id":9705503,"display_name":"Mohammad hp"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687783965,"creation_date":1687783965,"answer_id":76556876,"question_id":17090589,"body_markdown":"This bug has been solved in gson 2.8.9. Look at [This PR].\r\n\r\nBasically you can define object to number strategy as follows:\r\n\r\n    GsonBuilder gsonBuilder = new GsonBuilder().setObjectToNumberStrategy(ToNumberPolicy.LONG_OR_DOUBLE);\r\n    Gson gson = gsonBuilder.create();\r\n\r\n\r\n  [This PR]: https://github.com/google/gson/pull/1290","title":"Gson. Deserialize integers as integers and not as doubles","body":"<p>This bug has been solved in gson 2.8.9. Look at <a href=\"https://github.com/google/gson/pull/1290\" rel=\"nofollow noreferrer\">This PR</a>.</p>\n<p>Basically you can define object to number strategy as follows:</p>\n<pre><code>GsonBuilder gsonBuilder = new GsonBuilder().setObjectToNumberStrategy(ToNumberPolicy.LONG_OR_DOUBLE);\nGson gson = gsonBuilder.create();\n</code></pre>\n"}],"owner":{"account_id":2026878,"reputation":1243,"user_id":1823997,"accept_rate":55,"display_name":"Moses"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26210,"favorite_count":0,"down_vote_count":1,"up_vote_count":18,"answer_count":9,"score":17,"last_activity_date":1687783965,"creation_date":1371136061,"question_id":17090589,"body_markdown":"I have json object with arbitary values inside. And I want to deserialize it in a Map&lt;String, Object&gt;. Everything is ok except converting integers to a doubles. See example:\r\n\r\n    {&quot;id&quot;:1, &quot;inner_obj&quot;:{&quot;key&quot;:&quot;value&quot;,&quot;num&quot;:666,&quot;map&quot;:{&quot;key&quot;:&quot;value&quot;}}}\r\n\r\ndeserializes to this(map.toString()):\r\n\r\n    {id=1.0, inner_obj={key=value, num=666.0, map={key=value}}}\r\n\r\nIs there some easy way to deserialize &quot;id&quot; and &quot;num&quot; as Integers and not as Doubles?","title":"Gson. Deserialize integers as integers and not as doubles","body":"<p>I have json object with arbitary values inside. And I want to deserialize it in a Map. Everything is ok except converting integers to a doubles. See example:</p>\n\n<pre><code>{\"id\":1, \"inner_obj\":{\"key\":\"value\",\"num\":666,\"map\":{\"key\":\"value\"}}}\n</code></pre>\n\n<p>deserializes to this(map.toString()):</p>\n\n<pre><code>{id=1.0, inner_obj={key=value, num=666.0, map={key=value}}}\n</code></pre>\n\n<p>Is there some easy way to deserialize \"id\" and \"num\" as Integers and not as Doubles?</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":3,"creation_date":1687782310,"post_id":76556508,"comment_id":134980293,"body_markdown":"`currentDate` is a `LocalDate` - that does not have a format - it only has a default format used when it is converted to `String` using its `toString()` method - you need to use the `DateTimeFormatter` to `format` the `LocalDate` as required","body":"<code>currentDate</code> is a <code>LocalDate</code> - that does not have a format - it only has a default format used when it is converted to <code>String</code> using its <code>toString()</code> method - you need to use the <code>DateTimeFormatter</code> to <code>format</code> the <code>LocalDate</code> as required"}],"answers":[{"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687783655,"creation_date":1687783655,"answer_id":76556839,"question_id":76556508,"body_markdown":"## tl;dr \r\n### the today&#39;s date in the desired format\r\n```Java\r\nSystem.out.println(\r\n    LocalDate.now().format(\r\n        DateTimeFormatter.ofPattern(\r\n            &quot;MMMM, d uuuu&quot;,\r\n            Locale.ENGLISH\r\n        )\r\n    )\r\n);\r\n```\r\n\r\n---\r\n### Explanation\r\n\r\nYou&#39;re attempt to retrieve *the currentDate in the format MMMM d, YYYY* does not work because you don&#39;t produce the `String` output.  \r\nInstead, you try to `parse(currentDate, formatter)`, wich cannot won&#39;t be working either due to an unexpected type of the first parameter/argument (expects a `String`, you pass a `LocalDate`), or — if `LocalDate.toString()` is used implicitly — it won&#39;t have your custom format.\r\n\r\n## Demo\r\n### Code\r\n```Java\r\npublic static void main(String[] args) {\r\n\t// get today&#39;s date as LocalDate\r\n\tLocalDate today = LocalDate.now();\r\n\t// provide a DateTimeFormatter for the desired OUTPUT\r\n\tDateTimeFormatter formatter = DateTimeFormatter.ofPattern(\r\n\t\t\t\t\t\t\t\t\t\t&quot;MMMM d, uuuu&quot;,\r\n\t\t\t\t\t\t\t\t\t\tLocale.ENGLISH\r\n\t\t\t\t\t\t\t\t  );\r\n\t// print the resulting LocalDate&#39;s toString() (implicitly)\r\n\tSystem.out.println(&quot;toString(): &quot; + today);\r\n\t// print the resulting LocalDate formatted by the formatter\r\n\tSystem.out.println(&quot;formatted:  &quot; + today.format(formatter));\r\n}\r\n```\r\n\r\n### Output\r\n```none\r\ntoString(): 2023-06-26\r\nformatted:  June 26, 2023\r\n```","title":"how to parse a LocaleDate to a specific pattern mentioned in the DateTimeFormatter","body":"<h2>tl;dr</h2>\n<h3>the today's date in the desired format</h3>\n<pre><code>System.out.println(\n    LocalDate.now().format(\n        DateTimeFormatter.ofPattern(\n            &quot;MMMM, d uuuu&quot;,\n            Locale.ENGLISH\n        )\n    )\n);\n</code></pre>\n<hr />\n<h3>Explanation</h3>\n<p>You're attempt to retrieve <em>the currentDate in the format MMMM d, YYYY</em> does not work because you don't produce the <code>String</code> output.<br />\nInstead, you try to <code>parse(currentDate, formatter)</code>, wich cannot won't be working either due to an unexpected type of the first parameter/argument (expects a <code>String</code>, you pass a <code>LocalDate</code>), or — if <code>LocalDate.toString()</code> is used implicitly — it won't have your custom format.</p>\n<h2>Demo</h2>\n<h3>Code</h3>\n<pre><code>public static void main(String[] args) {\n    // get today's date as LocalDate\n    LocalDate today = LocalDate.now();\n    // provide a DateTimeFormatter for the desired OUTPUT\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\n                                        &quot;MMMM d, uuuu&quot;,\n                                        Locale.ENGLISH\n                                  );\n    // print the resulting LocalDate's toString() (implicitly)\n    System.out.println(&quot;toString(): &quot; + today);\n    // print the resulting LocalDate formatted by the formatter\n    System.out.println(&quot;formatted:  &quot; + today.format(formatter));\n}\n</code></pre>\n<h3>Output</h3>\n<pre class=\"lang-none prettyprint-override\"><code>toString(): 2023-06-26\nformatted:  June 26, 2023\n</code></pre>\n"}],"owner":{"account_id":28897411,"reputation":1,"user_id":22133135,"display_name":"Greeshma Gangamma M.C"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1687793058,"answer_count":1,"score":0,"last_activity_date":1687783655,"creation_date":1687781115,"question_id":76556508,"body_markdown":"I want the currentDate in the format `MMMM d, YYYY`\r\n\r\n```Java\r\nLocalDate currentDate = LocalDate.now();\r\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;MMMM d, yyyy&quot;);\r\nString createdOnDate = alertspage.createdondate().trim();\r\nLocalDate Date = LocalDate.parse(currentDate, formatter);\r\n```","title":"how to parse a LocaleDate to a specific pattern mentioned in the DateTimeFormatter","body":"<p>I want the currentDate in the format <code>MMMM d, YYYY</code></p>\n<pre><code>LocalDate currentDate = LocalDate.now();\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;MMMM d, yyyy&quot;);\nString createdOnDate = alertspage.createdondate().trim();\nLocalDate Date = LocalDate.parse(currentDate, formatter);\n</code></pre>\n"},{"tags":["java","android","qr-code","barcode-scanner"],"owner":{"account_id":24211306,"reputation":1,"user_id":18167801,"display_name":"Khushi A M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687783407,"creation_date":1687702890,"question_id":76550857,"body_markdown":"Is it possible to open an activity after scanning a QR code?\r\nand How to create QR CODE for an Activity so that When i scan that activity should open\r\nplease help me with my project\r\n\r\n\r\nI Don&#39;t know how to create QR code for an activity","title":"is it possible to open an activity after scanning a QR code?","body":"<p>Is it possible to open an activity after scanning a QR code?\nand How to create QR CODE for an Activity so that When i scan that activity should open\nplease help me with my project</p>\n<p>I Don't know how to create QR code for an activity</p>\n"},{"tags":["java","spring","load-balancing","feign"],"answers":[{"tags":[],"owner":{"account_id":11554395,"reputation":94,"user_id":8465978,"display_name":"Badr Kacimi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687783293,"creation_date":1687783293,"answer_id":76556787,"question_id":76530895,"body_markdown":"This issue is an open bug in the spring cloud Feign :\r\nhttps://github.com/spring-cloud/spring-cloud-openfeign/issues/475\r\n\r\nThese are the version numbers of my project dependencies :\r\n\r\n    Spring boot 3.1.0\r\n    spring-cloud 2022.0.3\r\n    Java 17\r\n\r\nThis workaround works for me (I added this method in my WebclientConfiguration class)  :\r\n\r\n    @Configuration\r\n    @Slf4j\r\n    public class WebclientConfiguration {\r\n    ...\r\n    \r\n     @Bean\r\n      @ConditionalOnMissingBean\r\n      public LoadBalancerClientFactory loadBalancerClientFactory(LoadBalancerClientsProperties properties) {\r\n        return new LoadBalancerClientFactory(properties) {\r\n          @Override public AnnotationConfigApplicationContext createContext(String name) {\r\n            ClassLoader originalClassLoader = Thread.currentThread().getContextClassLoader();\r\n            Thread.currentThread().setContextClassLoader(this.getClass().getClassLoader());\r\n            AnnotationConfigApplicationContext context = (AnnotationConfigApplicationContext) super.createContext(name);\r\n            Thread.currentThread().setContextClassLoader(originalClassLoader);\r\n            return context;\r\n          }\r\n        };\r\n      }\r\n    }","title":"Issue when using openfeign client called within an asynchronous method","body":"<p>This issue is an open bug in the spring cloud Feign :\n<a href=\"https://github.com/spring-cloud/spring-cloud-openfeign/issues/475\" rel=\"nofollow noreferrer\">https://github.com/spring-cloud/spring-cloud-openfeign/issues/475</a></p>\n<p>These are the version numbers of my project dependencies :</p>\n<pre><code>Spring boot 3.1.0\nspring-cloud 2022.0.3\nJava 17\n</code></pre>\n<p>This workaround works for me (I added this method in my WebclientConfiguration class)  :</p>\n<pre><code>@Configuration\n@Slf4j\npublic class WebclientConfiguration {\n...\n\n @Bean\n  @ConditionalOnMissingBean\n  public LoadBalancerClientFactory loadBalancerClientFactory(LoadBalancerClientsProperties properties) {\n    return new LoadBalancerClientFactory(properties) {\n      @Override public AnnotationConfigApplicationContext createContext(String name) {\n        ClassLoader originalClassLoader = Thread.currentThread().getContextClassLoader();\n        Thread.currentThread().setContextClassLoader(this.getClass().getClassLoader());\n        AnnotationConfigApplicationContext context = (AnnotationConfigApplicationContext) super.createContext(name);\n        Thread.currentThread().setContextClassLoader(originalClassLoader);\n        return context;\n      }\n    };\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":11554395,"reputation":94,"user_id":8465978,"display_name":"Badr Kacimi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":451,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76556787,"answer_count":1,"score":0,"last_activity_date":1687783293,"creation_date":1687429264,"question_id":76530895,"body_markdown":"I encounter this error when calling a service asynchronously using Feign after a migration from Java 8 to Java 17 and to spring 3\r\n\r\n        {\r\n          &quot;code&quot;: &quot;SI-SERVICE-ERROR-000500&quot;,\r\n          &quot;message&quot;: &quot;org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration   class [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientConfiguration]\r\n    Caused by: java.lang.ClassNotFoundException: org.springframework.boot.autoconfigure.condition.OnPropertyCondition\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n        }\r\n\r\nMy Feign and Main class :\r\n\r\n    @Service\r\n    @FeignClient(name = &quot;si-booking-service&quot;, path = &quot;/si-booking-service/bookings&quot;)\r\n    public interface SIBookingServiceClient {...}\r\n\r\n\r\n    @EnableFeignClients\r\n    @EnableDiscoveryClient\r\n    public class MainApplication {..}\r\n","title":"Issue when using openfeign client called within an asynchronous method","body":"<p>I encounter this error when calling a service asynchronously using Feign after a migration from Java 8 to Java 17 and to spring 3</p>\n<pre><code>    {\n      &quot;code&quot;: &quot;SI-SERVICE-ERROR-000500&quot;,\n      &quot;message&quot;: &quot;org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration   class [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientConfiguration]\nCaused by: java.lang.ClassNotFoundException: org.springframework.boot.autoconfigure.condition.OnPropertyCondition\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    }\n</code></pre>\n<p>My Feign and Main class :</p>\n<pre><code>@Service\n@FeignClient(name = &quot;si-booking-service&quot;, path = &quot;/si-booking-service/bookings&quot;)\npublic interface SIBookingServiceClient {...}\n\n\n@EnableFeignClients\n@EnableDiscoveryClient\npublic class MainApplication {..}\n</code></pre>\n"},{"tags":["java","testing","jaxb","java-17","jakarta-migration"],"comments":[{"owner":{"account_id":10769785,"reputation":341,"user_id":7923565,"display_name":"Markus Schreiber"},"score":0,"creation_date":1687178451,"post_id":76506647,"comment_id":134896188,"body_markdown":"Just as sanity check did you try to use `api` instead of `implementation` be be sure it is this module which misses the dependency and not some sub module which would not be covered by `implementation`.","body":"Just as sanity check did you try to use <code>api</code> instead of <code>implementation</code> be be sure it is this module which misses the dependency and not some sub module which would not be covered by <code>implementation</code>."},{"owner":{"account_id":5596641,"reputation":1936,"user_id":4434202,"accept_rate":54,"display_name":"Akinn"},"score":0,"creation_date":1687179011,"post_id":76506647,"comment_id":134896311,"body_markdown":"I&#39;ve tried. Same failure.","body":"I&#39;ve tried. Same failure."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":1,"creation_date":1687691026,"post_id":76506647,"comment_id":134969257,"body_markdown":"jakarta.xml.bind is the successor library auf jaxb but it is not directly compatible as the package name has changed. So each library and you code has to be migrated to this new library. `javax.xml.bind`-&gt; `jakarta.xml.bind`.","body":"jakarta.xml.bind is the successor library auf jaxb but it is not directly compatible as the package name has changed. So each library and you code has to be migrated to this new library. <code>javax.xml.bind</code>-&gt; <code>jakarta.xml.bind</code>."}],"answers":[{"tags":[],"owner":{"account_id":5596641,"reputation":1936,"user_id":4434202,"accept_rate":54,"display_name":"Akinn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687783248,"creation_date":1687783248,"answer_id":76556780,"question_id":76506647,"body_markdown":"There was another dependency which was pulling up javax modules. Refactoring dependencies solved the issue","title":"Java 17 - java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlElement","body":"<p>There was another dependency which was pulling up javax modules. Refactoring dependencies solved the issue</p>\n"}],"owner":{"account_id":5596641,"reputation":1936,"user_id":4434202,"accept_rate":54,"display_name":"Akinn"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3239,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687783248,"creation_date":1687177800,"question_id":76506647,"body_markdown":"I have a gradle project in Java17 and when running a test I&#39;m getting the following error:\r\n\r\n    java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlElement\r\n\r\n\r\nThis is how the test look like:\r\n\r\n    public class SettingsServiceTest extends AbstractIntegrationTest {\r\n    @Autowired\r\n    private SettingsService settingsService;\r\n\r\n\r\n    @Test\r\n    void shouldReturnMandatorySetting() {\r\n        wireMockGetConfig();\r\n     \r\n        String res = settingsService.getMandatorySetting();\r\n        Assertions.assertEquals(res, &quot;setting&quot;);\r\n    }\r\n\r\nThe `wiremockGetConfig` method:\r\n\r\n     protected void wireMockGetConfig() {\r\n        givenThat(get(urlPathEqualTo(&quot;/settings/appid&quot;))\r\n                .willReturn(aResponse()\r\n                        .withHeader(CONTENT_TYPE, APPLICATION_JSON_VALUE)\r\n                        .withBody(readResource(SETTINGS_JSON_FILE))\r\n                        .withStatus((Response.SC_OK))));\r\n    }\r\n\r\nAs you can see I&#39;m trying to mock the response of a client. The response is going to be a json file.\r\nI&#39;ve used this pattern multiple times and it always worked perfectly. Recently we migrated our apps to Java17 and after looking at [this older thread][1] I&#39;m starting to think I need to configure something. I&#39;ve no references to javax in the code (we already migrated for Java17).\r\n\r\nI&#39;ve already tried to add the dependencies mentioned in the accepted answer of the above thread:\r\n\r\n    implementation &quot;jakarta.xml.bind:jakarta.xml.bind-api:2.3.2&quot;\r\n    implementation &quot;org.glassfish.jaxb:jaxb-runtime:2.3.2&quot;\r\n\r\nwith no changes/success.\r\nI&#39;ve also tried using version 4.0.0 with no difference.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/43574426/how-to-resolve-java-lang-noclassdeffounderror-javax-xml-bind-jaxbexception\r\n\r\n\r\n","title":"Java 17 - java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlElement","body":"<p>I have a gradle project in Java17 and when running a test I'm getting the following error:</p>\n<pre><code>java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlElement\n</code></pre>\n<p>This is how the test look like:</p>\n<pre><code>public class SettingsServiceTest extends AbstractIntegrationTest {\n@Autowired\nprivate SettingsService settingsService;\n\n\n@Test\nvoid shouldReturnMandatorySetting() {\n    wireMockGetConfig();\n \n    String res = settingsService.getMandatorySetting();\n    Assertions.assertEquals(res, &quot;setting&quot;);\n}\n</code></pre>\n<p>The <code>wiremockGetConfig</code> method:</p>\n<pre><code> protected void wireMockGetConfig() {\n    givenThat(get(urlPathEqualTo(&quot;/settings/appid&quot;))\n            .willReturn(aResponse()\n                    .withHeader(CONTENT_TYPE, APPLICATION_JSON_VALUE)\n                    .withBody(readResource(SETTINGS_JSON_FILE))\n                    .withStatus((Response.SC_OK))));\n}\n</code></pre>\n<p>As you can see I'm trying to mock the response of a client. The response is going to be a json file.\nI've used this pattern multiple times and it always worked perfectly. Recently we migrated our apps to Java17 and after looking at <a href=\"https://stackoverflow.com/questions/43574426/how-to-resolve-java-lang-noclassdeffounderror-javax-xml-bind-jaxbexception\">this older thread</a> I'm starting to think I need to configure something. I've no references to javax in the code (we already migrated for Java17).</p>\n<p>I've already tried to add the dependencies mentioned in the accepted answer of the above thread:</p>\n<pre><code>implementation &quot;jakarta.xml.bind:jakarta.xml.bind-api:2.3.2&quot;\nimplementation &quot;org.glassfish.jaxb:jaxb-runtime:2.3.2&quot;\n</code></pre>\n<p>with no changes/success.\nI've also tried using version 4.0.0 with no difference.</p>\n"},{"tags":["java","android","generics","android-databinding"],"answers":[{"comments":[{"owner":{"account_id":27028627,"reputation":3,"user_id":20585429,"display_name":"Bukrek35TR"},"score":0,"creation_date":1687781657,"post_id":76556382,"comment_id":134980140,"body_markdown":"Thanks, this method worked. My approach was wrong, now I understand it, I was always trying to access the binding inside the class, I didn&#39;t think to send it directly from outside.","body":"Thanks, this method worked. My approach was wrong, now I understand it, I was always trying to access the binding inside the class, I didn&#39;t think to send it directly from outside."},{"owner":{"account_id":1261134,"reputation":8171,"user_id":1219389,"accept_rate":100,"display_name":"PPartisan"},"score":0,"creation_date":1687782214,"post_id":76556382,"comment_id":134980271,"body_markdown":"That&#39;s good, I did add an example too of how you could create a class for this","body":"That&#39;s good, I did add an example too of how you could create a class for this"}],"tags":[],"owner":{"account_id":1261134,"reputation":8171,"user_id":1219389,"accept_rate":100,"display_name":"PPartisan"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687782200,"creation_date":1687780053,"answer_id":76556382,"question_id":76556275,"body_markdown":"Couldn&#39;t you just pass in the `View` or `MaterialShapeDrawable` instead of the binding?\r\n``` \r\npublic static void applyRadiusCorner(View v) {\r\n   if(!(v.getBackground() instanceof MaterialShapeDrawable)\r\n     throw new IllegalArgumentException();\r\n   applyRadiusCorner((MaterialShapeDrawable) v.getBackground());\r\n}\r\n\r\npublic static void applyRadiusCorner(MaterialShapeDrawable drawable) {\r\n  final float radius = getResources().getDimension(R.dimen.default_corner_radius);\r\n  drawable.setShapeAppearanceModel(drawable.getShapeAppearanceModel()\r\n    .toBuilder()\r\n    .setAllCorners(ROUNDED,radius)\r\n    .build());\r\n}\r\n```\r\nAnd use it as `applyRadiusCorner(binding.toolbar)`.\r\n\r\n**Edit:** \r\n\r\nWrapping this in a class:\r\n\r\n```\r\nclass StyleableToolbar {\r\n\r\n  private final Toolbar;\r\n  private final MaterialShapeDrawable background;\r\n  private final Resources res;\r\n  \r\n  private StyleableToolbar(Toolbar toolbar) {\r\n     this.toolbar = toolbar;\r\n     this.background = (MaterialShapeDrawable) toolbar.getBackground();\r\n     this.res = toolbar.getResources();\r\n  }\r\n \r\n  static Optional&lt;StyleableToolbar&gt; from(Toolbar toolbar) {\r\n    return (toolbar.getBackground() instanceof MaterialShapeDrawable) \r\n      ? Optional.of(new StyleableToolbar(toolbar)) \r\n      : Optional.empty()\r\n  }\r\n\r\n  void applyRadiusCorner() {\r\n    final float radius = res.getDimension(R.dimen.default_corner_radius); \r\n    final ShapeAppearanceModel sam = background\r\n      .getShapeAppearanceModel()\r\n      .toBuilder()\r\n      .setAllCorners(ROUNDED,radius)\r\n      .build();\r\n    background.setShapeAppearanceModel(sam);\r\n  }\r\n\r\n}\r\n```\r\nWith usage `StyleableToolbar.from(binding.toolbar).ifPresent(StyleableToolbar::applyRadiusCorner);`","title":"Running the same code in three different fragments under the common class","body":"<p>Couldn't you just pass in the <code>View</code> or <code>MaterialShapeDrawable</code> instead of the binding?</p>\n<pre><code>public static void applyRadiusCorner(View v) {\n   if(!(v.getBackground() instanceof MaterialShapeDrawable)\n     throw new IllegalArgumentException();\n   applyRadiusCorner((MaterialShapeDrawable) v.getBackground());\n}\n\npublic static void applyRadiusCorner(MaterialShapeDrawable drawable) {\n  final float radius = getResources().getDimension(R.dimen.default_corner_radius);\n  drawable.setShapeAppearanceModel(drawable.getShapeAppearanceModel()\n    .toBuilder()\n    .setAllCorners(ROUNDED,radius)\n    .build());\n}\n</code></pre>\n<p>And use it as <code>applyRadiusCorner(binding.toolbar)</code>.</p>\n<p><strong>Edit:</strong></p>\n<p>Wrapping this in a class:</p>\n<pre><code>class StyleableToolbar {\n\n  private final Toolbar;\n  private final MaterialShapeDrawable background;\n  private final Resources res;\n  \n  private StyleableToolbar(Toolbar toolbar) {\n     this.toolbar = toolbar;\n     this.background = (MaterialShapeDrawable) toolbar.getBackground();\n     this.res = toolbar.getResources();\n  }\n \n  static Optional&lt;StyleableToolbar&gt; from(Toolbar toolbar) {\n    return (toolbar.getBackground() instanceof MaterialShapeDrawable) \n      ? Optional.of(new StyleableToolbar(toolbar)) \n      : Optional.empty()\n  }\n\n  void applyRadiusCorner() {\n    final float radius = res.getDimension(R.dimen.default_corner_radius); \n    final ShapeAppearanceModel sam = background\n      .getShapeAppearanceModel()\n      .toBuilder()\n      .setAllCorners(ROUNDED,radius)\n      .build();\n    background.setShapeAppearanceModel(sam);\n  }\n\n}\n</code></pre>\n<p>With usage <code>StyleableToolbar.from(binding.toolbar).ifPresent(StyleableToolbar::applyRadiusCorner);</code></p>\n"}],"owner":{"account_id":27028627,"reputation":3,"user_id":20585429,"display_name":"Bukrek35TR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76556382,"answer_count":1,"score":0,"last_activity_date":1687782200,"creation_date":1687779146,"question_id":76556275,"body_markdown":"I am using databinding in my application.\r\nI have three different fragments, all three have toolbars with the same id.\r\nI have code that is the same in three toolbars.\r\n```\r\n        float radius = getResources().getDimension(R.dimen.default_corner_radius); //32dp\r\n        MaterialShapeDrawable materialShapeDrawable = (MaterialShapeDrawable) binding.toolbar.getBackground();\r\n        materialShapeDrawable.setShapeAppearanceModel(materialShapeDrawable.getShapeAppearanceModel()\r\n                .toBuilder()\r\n                .setAllCorners(CornerFamily.ROUNDED,radius)\r\n                .build());\r\n```\r\n\r\n\r\nI want to create a common class as below and run the same code from here, but I couldn&#39;t figure out how to transfer the binding structure.\r\n\r\n```\r\npublic class MenuFragmentsToolbar&lt;T&gt; {\r\n\r\n    public void applyRadiusCorner(T binding){\r\n\r\n        float radius = getResources().getDimension(R.dimen.default_corner_radius); //32dp\r\n        MaterialShapeDrawable materialShapeDrawable = (MaterialShapeDrawable) binding.toolbar.getBackground();\r\n        materialShapeDrawable.setShapeAppearanceModel(materialShapeDrawable.getShapeAppearanceModel()\r\n                .toBuilder()\r\n                .setAllCorners(CornerFamily.ROUNDED,radius)\r\n                .build());\r\n    }\r\n}\r\n```","title":"Running the same code in three different fragments under the common class","body":"<p>I am using databinding in my application.\nI have three different fragments, all three have toolbars with the same id.\nI have code that is the same in three toolbars.</p>\n<pre><code>        float radius = getResources().getDimension(R.dimen.default_corner_radius); //32dp\n        MaterialShapeDrawable materialShapeDrawable = (MaterialShapeDrawable) binding.toolbar.getBackground();\n        materialShapeDrawable.setShapeAppearanceModel(materialShapeDrawable.getShapeAppearanceModel()\n                .toBuilder()\n                .setAllCorners(CornerFamily.ROUNDED,radius)\n                .build());\n</code></pre>\n<p>I want to create a common class as below and run the same code from here, but I couldn't figure out how to transfer the binding structure.</p>\n<pre><code>public class MenuFragmentsToolbar&lt;T&gt; {\n\n    public void applyRadiusCorner(T binding){\n\n        float radius = getResources().getDimension(R.dimen.default_corner_radius); //32dp\n        MaterialShapeDrawable materialShapeDrawable = (MaterialShapeDrawable) binding.toolbar.getBackground();\n        materialShapeDrawable.setShapeAppearanceModel(materialShapeDrawable.getShapeAppearanceModel()\n                .toBuilder()\n                .setAllCorners(CornerFamily.ROUNDED,radius)\n                .build());\n    }\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":7816,"page":347,"page_size":100}
