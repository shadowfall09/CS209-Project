{"items":[{"tags":["java","spring-boot","intellij-idea","openapi","openapi-generator"],"answers":[{"tags":[],"owner":{"account_id":13010918,"reputation":442,"user_id":11532975,"display_name":"Adrian Lagartera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692863597,"creation_date":1692863597,"answer_id":76967233,"question_id":76967131,"body_markdown":"Well, I recommend you use a plugin for Maven and Gradle, called scs-multiapi-plugin. Have support for OpenAPI and AsyncAPI, and I think it&#39;s your ideal solution since you can choose what you want generate.\r\n\r\nhttps://github.com/sngular/scs-multiapi-plugin\r\n\r\nI was a developer from there for a few months, so I think that plugin could solve your problem\r\n\r\nIf not you can try OpenAPI generator too, you have a few solutions for your problem\r\n\r\nhttps://github.com/OpenAPITools/openapi-generator","title":"Generating REST Controller Interfaces and DTO Models from API First Approach in Intellij IDEA","body":"<p>Well, I recommend you use a plugin for Maven and Gradle, called scs-multiapi-plugin. Have support for OpenAPI and AsyncAPI, and I think it's your ideal solution since you can choose what you want generate.</p>\n<p><a href=\"https://github.com/sngular/scs-multiapi-plugin\" rel=\"nofollow noreferrer\">https://github.com/sngular/scs-multiapi-plugin</a></p>\n<p>I was a developer from there for a few months, so I think that plugin could solve your problem</p>\n<p>If not you can try OpenAPI generator too, you have a few solutions for your problem</p>\n<p><a href=\"https://github.com/OpenAPITools/openapi-generator\" rel=\"nofollow noreferrer\">https://github.com/OpenAPITools/openapi-generator</a></p>\n"}],"owner":{"account_id":5532523,"reputation":53,"user_id":4392067,"display_name":"plex88"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":174,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692871922,"creation_date":1692862686,"question_id":76967131,"body_markdown":"**Question:**\r\nI&#39;m using the latest version of Intellij Ultimate IDE and I&#39;m looking to develop a REST API based on Spring Boot. I&#39;m open to using either Maven or Gradle as the build system. My intention is to follow an API-first approach, wherein I want to generate the REST controller interfaces and DTO models.\r\n\r\nI&#39;ve placed my own `api.yaml` file in `*/src/main/resources` and attempted to generate the code, but this process generates a multitude of files, including Gradle build files, etc. What I&#39;m aiming for is to have only the controller interfaces and DTO models generated, and I want them to be placed in the directory `*/src/main/java/de/test/restapi/gen`. This folder would be situated hierarchically within the same project, alongside my existing codebase.\r\n\r\nFurthermore, it&#39;s crucial that the generation process occurs before the actual compilation during the build process. Despite my efforts to find a solution online, I haven&#39;t been able to locate a suitable method. Could you please assist me with this? Thank you very much.\r\n\r\nEDIT:\r\nI bootstrapped a demo project to clarify my problem:\r\n[GitHub][1]\r\n\r\n[![I generate the files with the OpenAPI Generator 6][2]][2]\r\n\r\n\r\n[![You see the unneccesary files. The generator is creating an whole project][3]][3]\r\n\r\n\r\n  [1]: https://github.com/pboehm90/spring-openapi-template\r\n  [2]: https://i.stack.imgur.com/Wm3Zn.png\r\n  [3]: https://i.stack.imgur.com/7xigU.png","title":"Generating REST Controller Interfaces and DTO Models from API First Approach in Intellij IDEA","body":"<p><strong>Question:</strong>\nI'm using the latest version of Intellij Ultimate IDE and I'm looking to develop a REST API based on Spring Boot. I'm open to using either Maven or Gradle as the build system. My intention is to follow an API-first approach, wherein I want to generate the REST controller interfaces and DTO models.</p>\n<p>I've placed my own <code>api.yaml</code> file in <code>*/src/main/resources</code> and attempted to generate the code, but this process generates a multitude of files, including Gradle build files, etc. What I'm aiming for is to have only the controller interfaces and DTO models generated, and I want them to be placed in the directory <code>*/src/main/java/de/test/restapi/gen</code>. This folder would be situated hierarchically within the same project, alongside my existing codebase.</p>\n<p>Furthermore, it's crucial that the generation process occurs before the actual compilation during the build process. Despite my efforts to find a solution online, I haven't been able to locate a suitable method. Could you please assist me with this? Thank you very much.</p>\n<p>EDIT:\nI bootstrapped a demo project to clarify my problem:\n<a href=\"https://github.com/pboehm90/spring-openapi-template\" rel=\"nofollow noreferrer\">GitHub</a></p>\n<p><a href=\"https://i.stack.imgur.com/Wm3Zn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wm3Zn.png\" alt=\"I generate the files with the OpenAPI Generator 6\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/7xigU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7xigU.png\" alt=\"You see the unneccesary files. The generator is creating an whole project\" /></a></p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":0,"creation_date":1387766254,"post_id":20736288,"comment_id":31070142,"body_markdown":"What exactly is your question?","body":"What exactly is your question?"},{"owner":{"account_id":3200341,"reputation":12790,"user_id":2702504,"accept_rate":68,"display_name":"Keerthivasan"},"score":0,"creation_date":1387766378,"post_id":20736288,"comment_id":31070161,"body_markdown":"Will all these be in a single line or as it is in pic?","body":"Will all these be in a single line or as it is in pic?"},{"owner":{"account_id":2987002,"reputation":345,"user_id":2535542,"accept_rate":29,"display_name":"Brandon Nguyen"},"score":0,"creation_date":1387766421,"post_id":20736288,"comment_id":31070174,"body_markdown":"@PM77-1 How do I make it so it matches instead of returning a &quot;No matches.&quot; method?","body":"@PM77-1 How do I make it so it matches instead of returning a &quot;No matches.&quot; method?"},{"owner":{"account_id":2987002,"reputation":345,"user_id":2535542,"accept_rate":29,"display_name":"Brandon Nguyen"},"score":0,"creation_date":1387766458,"post_id":20736288,"comment_id":31070179,"body_markdown":"@Octopus Multiple lines. Exactly as posted.","body":"@Octopus Multiple lines. Exactly as posted."},{"owner":{"account_id":1795339,"reputation":627,"user_id":1634855,"accept_rate":78,"display_name":"Sam G-H"},"score":0,"creation_date":1387766500,"post_id":20736288,"comment_id":31070183,"body_markdown":"Are you actually reading in all of the lines?","body":"Are you actually reading in all of the lines?"},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1387766542,"post_id":20736288,"comment_id":31070191,"body_markdown":"Have you tried `join`ing the lines?","body":"Have you tried <code>join</code>ing the lines?"},{"owner":{"account_id":323244,"reputation":11569,"user_id":643141,"display_name":"Hauke Ingmar Schmidt"},"score":0,"creation_date":1387766725,"post_id":20736288,"comment_id":31070219,"body_markdown":"You read the file into an ArrayList `input` but match onto a variable `readLines`? Either the first is superfluous or the second probably empty.","body":"You read the file into an ArrayList <code>input</code> but match onto a variable <code>readLines</code>? Either the first is superfluous or the second probably empty."}],"answers":[{"tags":[],"owner":{"account_id":86571,"reputation":42635,"user_id":240646,"accept_rate":89,"display_name":"Szymon"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1387767041,"creation_date":1387766541,"answer_id":20736326,"question_id":20736288,"body_markdown":"You don&#39;t need regex for that. It&#39;s enough to loop through the array and compare items line by line, taking those between the start and end tags.\r\n\r\n    ArrayList&lt;String&gt; input = (ArrayList&lt;String&gt;) Files.readAllLines(f.toPath(), StandardCharsets.US_ASCII);\r\n    ArrayList&lt;String&gt; output = new ArrayList&lt;String&gt;();\r\n\r\n    boolean matched = false;\r\n    for (String line : input) {\r\n        if (line.equals(&quot;###---###&quot;) &amp;&amp; matched) matched = false; //needed parentheses\r\n        if (matched) output.add(line);\r\n        if (line.equals(&quot;###Test File###&quot;) &amp;&amp; !matched) matched = true;\r\n    }","title":"Java Matcher: How to match multiple lines with one regex","body":"<p>You don't need regex for that. It's enough to loop through the array and compare items line by line, taking those between the start and end tags.</p>\n\n<pre><code>ArrayList&lt;String&gt; input = (ArrayList&lt;String&gt;) Files.readAllLines(f.toPath(), StandardCharsets.US_ASCII);\nArrayList&lt;String&gt; output = new ArrayList&lt;String&gt;();\n\nboolean matched = false;\nfor (String line : input) {\n    if (line.equals(\"###---###\") &amp;&amp; matched) matched = false; //needed parentheses\n    if (matched) output.add(line);\n    if (line.equals(\"###Test File###\") &amp;&amp; !matched) matched = true;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3200341,"reputation":12790,"user_id":2702504,"accept_rate":68,"display_name":"Keerthivasan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1387766800,"creation_date":1387766800,"answer_id":20736349,"question_id":20736288,"body_markdown":"As per your comment, if they are going to be in the same way as posted, then i don&#39;t think `regex` is needed for this requirement. You can read line by line and do a contains of &#39;###&#39;\r\n\r\n    public static void main(String args[])\r\n      {\r\n      ArrayList&lt;String&gt; dataList = new ArrayList&lt;String&gt;();\r\n      try{\r\n      // Open the file that is the first \r\n      // command line parameter\r\n      FileInputStream fstream = new FileInputStream(&quot;textfile.txt&quot;);\r\n      // Get the object of DataInputStream\r\n      DataInputStream in = new DataInputStream(fstream);\r\n      BufferedReader br = new BufferedReader(new InputStreamReader(in));\r\n      String strLine;\r\n      //Read File Line By Line\r\n      while ((strLine = br.readLine()) != null)   {\r\n      // this line will skip the header and footer with &#39;###&#39;\r\n      if(!strLine.contains(&quot;###&quot;);\r\n       dataList.add(strLine);\r\n      }\r\n      //Close the input stream\r\n      in.close();\r\n        }catch (Exception e){//Catch exception if any\r\n      System.err.println(&quot;Error: &quot; + e.getMessage());\r\n      }\r\n      }\r\n    //Now dataList has all the data between ###Test File### and ###---###\r\n    }\r\n\r\nYou can also change the *contains* method *parameter* according to your requirement to ignore lines!","title":"Java Matcher: How to match multiple lines with one regex","body":"<p>As per your comment, if they are going to be in the same way as posted, then i don't think <code>regex</code> is needed for this requirement. You can read line by line and do a contains of '###'</p>\n\n<pre><code>public static void main(String args[])\n  {\n  ArrayList&lt;String&gt; dataList = new ArrayList&lt;String&gt;();\n  try{\n  // Open the file that is the first \n  // command line parameter\n  FileInputStream fstream = new FileInputStream(\"textfile.txt\");\n  // Get the object of DataInputStream\n  DataInputStream in = new DataInputStream(fstream);\n  BufferedReader br = new BufferedReader(new InputStreamReader(in));\n  String strLine;\n  //Read File Line By Line\n  while ((strLine = br.readLine()) != null)   {\n  // this line will skip the header and footer with '###'\n  if(!strLine.contains(\"###\");\n   dataList.add(strLine);\n  }\n  //Close the input stream\n  in.close();\n    }catch (Exception e){//Catch exception if any\n  System.err.println(\"Error: \" + e.getMessage());\n  }\n  }\n//Now dataList has all the data between ###Test File### and ###---###\n}\n</code></pre>\n\n<p>You can also change the <em>contains</em> method <em>parameter</em> according to your requirement to ignore lines!</p>\n"}],"owner":{"account_id":2987002,"reputation":345,"user_id":2535542,"accept_rate":29,"display_name":"Brandon Nguyen"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":931,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":20736326,"answer_count":2,"score":0,"last_activity_date":1692871903,"creation_date":1387766116,"question_id":20736288,"body_markdown":"My method takes a file, and tries to extract the text between the header `###Title###` and closing `###---###`. I need it to extract multiple lines and put each line into an array. But since `readAllLines()` converts all lines into an array, I don&#39;t know how to compare and match it.\r\n\r\n    public static ArrayList&lt;String&gt; getData(File f, String title) throws IOException {\r\n        ArrayList&lt;String&gt; input = (ArrayList&lt;String&gt;) Files.readAllLines(f.toPath(), StandardCharsets.US_ASCII);\r\n        ArrayList&lt;String&gt; output = new ArrayList&lt;String&gt;();\r\n        \r\n        //String? readLines = somehow make it possible to match\r\n        System.out.println(&quot;Checking entry.&quot;);\r\n        \r\n        Pattern p = Pattern.compile(&quot;###&quot; + title + &quot;###(.*)###---###&quot;, Pattern.DOTALL);\r\n        Matcher m = p.matcher(readLines);\r\n        if (m.matches()) {\r\n            m.matches();\r\n            String matched = m.group(1);\r\n            System.out.println(&quot;Contents: &quot; + matched);\r\n            String[] array = matched.split(&quot;\\n&quot;);\r\n            ArrayList&lt;String&gt; array2 = new ArrayList&lt;String&gt;();\r\n            for (String j:array) {\r\n                array2.add(j);\r\n            }\r\n            output = array2;\r\n        } else {\r\n            System.out.println(&quot;No matches.&quot;);\r\n        }\r\n        return output;\r\n    }\r\n\r\nHere is my file, and I&#39;m 100% sure that the compiler is reading the correct one.\r\n\r\n    ###Test File###\r\n    Entry 1\r\n    Entry 2\r\n    Data 1\r\n    Data 2\r\n    Test 1\r\n    Test 2\r\n    ###---###\r\n\r\nThe output says *&quot;No matches.&quot;* instead of the entries.","title":"Java Matcher: How to match multiple lines with one regex","body":"<p>My method takes a file, and tries to extract the text between the header <code>###Title###</code> and closing <code>###---###</code>. I need it to extract multiple lines and put each line into an array. But since <code>readAllLines()</code> converts all lines into an array, I don't know how to compare and match it.</p>\n\n<pre><code>public static ArrayList&lt;String&gt; getData(File f, String title) throws IOException {\n    ArrayList&lt;String&gt; input = (ArrayList&lt;String&gt;) Files.readAllLines(f.toPath(), StandardCharsets.US_ASCII);\n    ArrayList&lt;String&gt; output = new ArrayList&lt;String&gt;();\n\n    //String? readLines = somehow make it possible to match\n    System.out.println(\"Checking entry.\");\n\n    Pattern p = Pattern.compile(\"###\" + title + \"###(.*)###---###\", Pattern.DOTALL);\n    Matcher m = p.matcher(readLines);\n    if (m.matches()) {\n        m.matches();\n        String matched = m.group(1);\n        System.out.println(\"Contents: \" + matched);\n        String[] array = matched.split(\"\\n\");\n        ArrayList&lt;String&gt; array2 = new ArrayList&lt;String&gt;();\n        for (String j:array) {\n            array2.add(j);\n        }\n        output = array2;\n    } else {\n        System.out.println(\"No matches.\");\n    }\n    return output;\n}\n</code></pre>\n\n<p>Here is my file, and I'm 100% sure that the compiler is reading the correct one.</p>\n\n<pre><code>###Test File###\nEntry 1\nEntry 2\nData 1\nData 2\nTest 1\nTest 2\n###---###\n</code></pre>\n\n<p>The output says <em>\"No matches.\"</em> instead of the entries.</p>\n"},{"tags":["java","regex"],"answers":[{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1386633965,"creation_date":1386633520,"answer_id":20483371,"question_id":20483349,"body_markdown":"Empty strings are allowed by `\\\\d*` since it means zero or more digits. If you don&#39;t want to find strings that have zero digits (are empty) change `\\\\d*` to `\\\\d+`.\r\n\r\nDemo\r\n\r\n    String s = &quot;2+30*4+(5+6)*7&quot;;        \r\n    Pattern p = Pattern.compile(&quot;\\\\d+|[()+*-]&quot;);\r\n    Matcher m = p.matcher(s);\r\n    while (m.find()) {\r\n          System.out.print(&quot;Start index: &quot; + m.start());\r\n          System.out.print(&quot; End index: &quot; + m.end() + &quot; &quot;);\r\n          System.out.println(&quot;-----&gt; &quot; + m.group());\r\n    }\r\n\r\nOutput:\r\n\r\n    Start index: 0 End index: 1 -----&gt; 2\r\n    Start index: 1 End index: 2 -----&gt; +\r\n    Start index: 2 End index: 4 -----&gt; 30\r\n    Start index: 4 End index: 5 -----&gt; *\r\n    Start index: 5 End index: 6 -----&gt; 4\r\n    Start index: 6 End index: 7 -----&gt; +\r\n    Start index: 7 End index: 8 -----&gt; (\r\n    Start index: 8 End index: 9 -----&gt; 5\r\n    Start index: 9 End index: 10 -----&gt; +\r\n    Start index: 10 End index: 11 -----&gt; 6\r\n    Start index: 11 End index: 12 -----&gt; )\r\n\r\n---\r\nIf you are not interested in positions of your tokens you can also `split` before or after each of `+` `-` `*` `/` `(` `)` like\r\n\r\n    String s = &quot;2+30*4+(5+6)*7&quot;;\r\n    String[] tokens = s.split(&quot;(?&lt;=[+\\\\-*/()])|(?=[+\\\\-*/()])&quot;);\r\n    for (String token : tokens)\r\n    \tSystem.out.println(token);\r\n\r\noutput:\r\n\r\n    2\r\n    +\r\n    30\r\n    *\r\n    4\r\n    +\r\n    (\r\n    5\r\n    +\r\n    6\r\n    )\r\n    *\r\n    7\r\n\r\n","title":"Java regex pattern&amp;matcher","body":"<p>Empty strings are allowed by <code>\\\\d*</code> since it means zero or more digits. If you don't want to find strings that have zero digits (are empty) change <code>\\\\d*</code> to <code>\\\\d+</code>.</p>\n\n<p>Demo</p>\n\n<pre><code>String s = \"2+30*4+(5+6)*7\";        \nPattern p = Pattern.compile(\"\\\\d+|[()+*-]\");\nMatcher m = p.matcher(s);\nwhile (m.find()) {\n      System.out.print(\"Start index: \" + m.start());\n      System.out.print(\" End index: \" + m.end() + \" \");\n      System.out.println(\"-----&gt; \" + m.group());\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Start index: 0 End index: 1 -----&gt; 2\nStart index: 1 End index: 2 -----&gt; +\nStart index: 2 End index: 4 -----&gt; 30\nStart index: 4 End index: 5 -----&gt; *\nStart index: 5 End index: 6 -----&gt; 4\nStart index: 6 End index: 7 -----&gt; +\nStart index: 7 End index: 8 -----&gt; (\nStart index: 8 End index: 9 -----&gt; 5\nStart index: 9 End index: 10 -----&gt; +\nStart index: 10 End index: 11 -----&gt; 6\nStart index: 11 End index: 12 -----&gt; )\n</code></pre>\n\n<hr>\n\n<p>If you are not interested in positions of your tokens you can also <code>split</code> before or after each of <code>+</code> <code>-</code> <code>*</code> <code>/</code> <code>(</code> <code>)</code> like</p>\n\n<pre><code>String s = \"2+30*4+(5+6)*7\";\nString[] tokens = s.split(\"(?&lt;=[+\\\\-*/()])|(?=[+\\\\-*/()])\");\nfor (String token : tokens)\n    System.out.println(token);\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>2\n+\n30\n*\n4\n+\n(\n5\n+\n6\n)\n*\n7\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1386633620,"creation_date":1386633620,"answer_id":20483385,"question_id":20483349,"body_markdown":"`\\\\d*` matches zero or more digits.  So after the first match, the matcher is looking at `&quot;+30*4+(5+6)*7&quot;`, and the first thing the matcher asks is, &quot;Does this string begin with zero or more digits?  By golly, yes it does!&quot;  (It checks this first, because `\\\\d*` appears first in the pattern.)  So that&#39;s why the matcher is returning an empty string (a string of zero digits).\r\n\r\nChanging it to `\\\\d+`, which matches *one* or more digits, should work.","title":"Java regex pattern&amp;matcher","body":"<p><code>\\\\d*</code> matches zero or more digits.  So after the first match, the matcher is looking at <code>\"+30*4+(5+6)*7\"</code>, and the first thing the matcher asks is, \"Does this string begin with zero or more digits?  By golly, yes it does!\"  (It checks this first, because <code>\\\\d*</code> appears first in the pattern.)  So that's why the matcher is returning an empty string (a string of zero digits).</p>\n\n<p>Changing it to <code>\\\\d+</code>, which matches <em>one</em> or more digits, should work.</p>\n"},{"tags":[],"owner":{"account_id":3106249,"reputation":6417,"user_id":2628956,"accept_rate":100,"display_name":"Rakesh KR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1386645150,"creation_date":1386645150,"answer_id":20485312,"question_id":20483349,"body_markdown":"What you tried with your regix `\\\\d*|[()+*-]` can be represented as\r\n\r\n![enter image description here][1]\r\n\r\nIt matches Zero or more digits.\r\n\r\nYou need to change it as one or more with the regix `\\\\d+|[()+*-]` and can be represented as\r\n\r\n![enter image description here][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/N2W3Z.png\r\n  [2]: http://i.stack.imgur.com/VDi5F.png","title":"Java regex pattern&amp;matcher","body":"<p>What you tried with your regix <code>\\\\d*|[()+*-]</code> can be represented as</p>\n\n<p><img src=\"https://i.stack.imgur.com/N2W3Z.png\" alt=\"enter image description here\"></p>\n\n<p>It matches Zero or more digits.</p>\n\n<p>You need to change it as one or more with the regix <code>\\\\d+|[()+*-]</code> and can be represented as</p>\n\n<p><img src=\"https://i.stack.imgur.com/VDi5F.png\" alt=\"enter image description here\"></p>\n"}],"owner":{"account_id":1017505,"reputation":2745,"user_id":1028741,"accept_rate":60,"display_name":"user1028741"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":20483371,"answer_count":3,"score":0,"last_activity_date":1692871895,"creation_date":1386633373,"question_id":20483349,"body_markdown":"I try to resolve this String using a Mathcer: &quot;2+30*4+(5+6)*7&quot;\r\n\r\nusing this Pattern: &quot;\\\\d*|[()+*-]&quot;\r\n\r\nfor some reason, the Matcher splits the string correctly, but when going over the splitted strings, it doesn&#39;t divide them correctly, leaving empty strings for anything but the digits:\r\n\r\n    String s = &quot;2+30*4+(5+6)*7&quot;;\t\t\r\n\t\tPattern p = Pattern.compile(&quot;\\\\d*|[()+*-]&quot;);\r\n\t\tMatcher m = p.matcher(s);\r\n\t\twhile (m.find()) {\r\n\t\t      System.out.print(&quot;Start index: &quot; + m.start());\r\n\t\t      System.out.print(&quot; End index: &quot; + m.end() + &quot; &quot;);\r\n\t\t      System.out.println(&quot;-----&gt; &quot; + m.group());\r\n\t\t}\r\n\r\nThis gives the following output:\r\n\r\n    Start index: 0 End index: 1 -----&gt; 2\r\n    Start index: 1 End index: 1 -----&gt; \r\n    Start index: 2 End index: 4 -----&gt; 30\r\n    Start index: 4 End index: 4 -----&gt; \r\n    Start index: 5 End index: 6 -----&gt; 4\r\n    Start index: 6 End index: 6 -----&gt; \r\n    Start index: 7 End index: 7 -----&gt; \r\n    Start index: 8 End index: 9 -----&gt; 5\r\n    Start index: 9 End index: 9 -----&gt; \r\n    Start index: 10 End index: 11 -----&gt; 6\r\n    Start index: 11 End index: 11 -----&gt; \r\n    Start index: 12 End index: 12 -----&gt; \r\n    Start index: 13 End index: 14 -----&gt; 7\r\n    Start index: 14 End index: 14 -----&gt; \r\n\r\nI don&#39;t understand why, for example in the second line the end index is 1 (and not 2) resulting an empty string:\r\n    Start index: 1 End index: 1 -----&gt; \r\n\r\nBy the way, when I change the pattern&#39;s order to &quot;[()+*-]|\\\\d*&quot; it works fine...","title":"Java regex pattern&amp;matcher","body":"<p>I try to resolve this String using a Mathcer: \"2+30*4+(5+6)*7\"</p>\n\n<p>using this Pattern: \"\\d*|[()+*-]\"</p>\n\n<p>for some reason, the Matcher splits the string correctly, but when going over the splitted strings, it doesn't divide them correctly, leaving empty strings for anything but the digits:</p>\n\n<pre><code>String s = \"2+30*4+(5+6)*7\";        \n    Pattern p = Pattern.compile(\"\\\\d*|[()+*-]\");\n    Matcher m = p.matcher(s);\n    while (m.find()) {\n          System.out.print(\"Start index: \" + m.start());\n          System.out.print(\" End index: \" + m.end() + \" \");\n          System.out.println(\"-----&gt; \" + m.group());\n    }\n</code></pre>\n\n<p>This gives the following output:</p>\n\n<pre><code>Start index: 0 End index: 1 -----&gt; 2\nStart index: 1 End index: 1 -----&gt; \nStart index: 2 End index: 4 -----&gt; 30\nStart index: 4 End index: 4 -----&gt; \nStart index: 5 End index: 6 -----&gt; 4\nStart index: 6 End index: 6 -----&gt; \nStart index: 7 End index: 7 -----&gt; \nStart index: 8 End index: 9 -----&gt; 5\nStart index: 9 End index: 9 -----&gt; \nStart index: 10 End index: 11 -----&gt; 6\nStart index: 11 End index: 11 -----&gt; \nStart index: 12 End index: 12 -----&gt; \nStart index: 13 End index: 14 -----&gt; 7\nStart index: 14 End index: 14 -----&gt; \n</code></pre>\n\n<p>I don't understand why, for example in the second line the end index is 1 (and not 2) resulting an empty string:\n    Start index: 1 End index: 1 -----> </p>\n\n<p>By the way, when I change the pattern's order to \"[()+<em>-]|\\d</em>\" it works fine...</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":31518,"reputation":36053,"user_id":86604,"accept_rate":80,"display_name":"Ingo"},"score":0,"creation_date":1385921816,"post_id":20315241,"comment_id":30316141,"body_markdown":"`flagga == true` are you really sure it is true? You better write `(flagga==true)==true &amp;&amp; (flagga!=false) != false`","body":"<code>flagga == true</code> are you really sure it is true? You better write <code>(flagga==true)==true &amp;&amp; (flagga!=false) != false</code>"}],"answers":[{"tags":[],"owner":{"account_id":419033,"reputation":715,"user_id":795972,"display_name":"Dejan Pekter"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1385921423,"creation_date":1385921423,"answer_id":20315467,"question_id":20315241,"body_markdown":"Your problem is that you never call find before trying to get group, that is why you don&#39;t have match. \r\n\r\nYou need this line of code: \r\n\r\n    m.find();\r\n\r\nBefore you do \r\n\r\n    String fromMatcher = m.group(0); //first word surrounded by hash, without the hash\r\n\r\nBut even then, you will get it all with hash tags around, to avoid that you should create group only for inner text around hash tags like this:\r\n\r\n     Pattern ptrn = Pattern.compile(&quot;#([^#]+)#&quot;);\r\n\r\nAnd when you are accessing your group it will be group number 1 (because 0 is whole pattern). So change getting group like this:\r\n\r\n    String fromMatcher = m.group(1); //first word surrounded by hash, without the hash","title":"Matcher: &quot;No match found...&quot;","body":"<p>Your problem is that you never call find before trying to get group, that is why you don't have match. </p>\n\n<p>You need this line of code: </p>\n\n<pre><code>m.find();\n</code></pre>\n\n<p>Before you do </p>\n\n<pre><code>String fromMatcher = m.group(0); //first word surrounded by hash, without the hash\n</code></pre>\n\n<p>But even then, you will get it all with hash tags around, to avoid that you should create group only for inner text around hash tags like this:</p>\n\n<pre><code> Pattern ptrn = Pattern.compile(\"#([^#]+)#\");\n</code></pre>\n\n<p>And when you are accessing your group it will be group number 1 (because 0 is whole pattern). So change getting group like this:</p>\n\n<pre><code>String fromMatcher = m.group(1); //first word surrounded by hash, without the hash\n</code></pre>\n"}],"owner":{"account_id":3660571,"reputation":31,"user_id":3050502,"accept_rate":75,"display_name":"the weakest link"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1204,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":20315467,"answer_count":1,"score":0,"last_activity_date":1692871890,"creation_date":1385920049,"question_id":20315241,"body_markdown":"I&#39;m getting an error in matcher saying &quot;No match found\r\n\tat java.util.regex.Matcher.group(Matcher.java:468)&quot;.\r\n\r\nMy commented code&#39;s below.  I&#39;ve been changing the number within m.group, so I now suspect something&#39;s up with my regex.  Archetype&#39;s a string like this: We #plan_to# #deliver# #highly_effective# #esolutions# for today&#39;s #data_driven# #market_leaders#.\r\n\r\n    List&lt;String&gt; phraseCollection = parserHelper.getPhrases(fileKontent,&quot;phrases:&quot;);\r\n\t\tString archetype = parserHelper.getRandomElement(phraseCollection);\r\n\t\tboolean flagga = true;\r\n\t\twhile(flagga == true){\r\n\t\tPattern ptrn = Pattern.compile(&quot;#[^#]+#&quot;);\r\n\t\tMatcher m = ptrn.matcher(archetype);\r\n\t\tString fromMatcher = m.group(0);//first word surrounded by hash, without the hash\r\n\t\tString col = &quot;:&quot;;\r\n\t\tString token = fromMatcher+col;//token to pass to getPhrase\r\n\t\tList&lt;String&gt; pCol = parserHelper.getPhrases(fileKontent, token);\r\n\t\tString repl = parserHelper.getRandomElement(pCol); //new word to replace with\r\n\t\tString hash = &quot;#&quot;;\r\n\t\tString tk2 = hash + fromMatcher + hash;  //word surrounded by hash to be replaced, hash and all\r\n\t\tarchetype = parserHelper.replace(archetype, tk2, repl);  //now archetype should have 1 less hashed word\r\n\t\tflagga = m.find();  //false when all hash gone\r\n\t\t}\r\n\t\tString theArcha = archetype;\r\n\t\t\r\n\t\treturn theArcha;","title":"Matcher: &quot;No match found...&quot;","body":"<p>I'm getting an error in matcher saying \"No match found\n    at java.util.regex.Matcher.group(Matcher.java:468)\".</p>\n\n<p>My commented code's below.  I've been changing the number within m.group, so I now suspect something's up with my regex.  Archetype's a string like this: We #plan_to# #deliver# #highly_effective# #esolutions# for today's #data_driven# #market_leaders#.</p>\n\n<pre><code>List&lt;String&gt; phraseCollection = parserHelper.getPhrases(fileKontent,\"phrases:\");\n    String archetype = parserHelper.getRandomElement(phraseCollection);\n    boolean flagga = true;\n    while(flagga == true){\n    Pattern ptrn = Pattern.compile(\"#[^#]+#\");\n    Matcher m = ptrn.matcher(archetype);\n    String fromMatcher = m.group(0);//first word surrounded by hash, without the hash\n    String col = \":\";\n    String token = fromMatcher+col;//token to pass to getPhrase\n    List&lt;String&gt; pCol = parserHelper.getPhrases(fileKontent, token);\n    String repl = parserHelper.getRandomElement(pCol); //new word to replace with\n    String hash = \"#\";\n    String tk2 = hash + fromMatcher + hash;  //word surrounded by hash to be replaced, hash and all\n    archetype = parserHelper.replace(archetype, tk2, repl);  //now archetype should have 1 less hashed word\n    flagga = m.find();  //false when all hash gone\n    }\n    String theArcha = archetype;\n\n    return theArcha;\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":2078312,"reputation":16240,"user_id":1851024,"accept_rate":82,"display_name":"Andrey Chaschev"},"score":0,"creation_date":1385399865,"post_id":20198771,"comment_id":30115790,"body_markdown":"Possible answer: [RegEx match open tags except XHTML self-contained tags](http://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)","body":"Possible answer: <a href=\"http://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454\">RegEx match open tags except XHTML self-contained tags</a>"}],"answers":[{"tags":[],"owner":{"account_id":3490280,"reputation":5883,"user_id":2920151,"display_name":"pobrelkey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1385425745,"creation_date":1385400591,"answer_id":20199416,"question_id":20198771,"body_markdown":"Using regular expressions to parse XML is evil, and [may incur the Wrath of the One whose Name cannot be expressed in the Basic Multilingual Plane.][1]  If you need to parse XML, use an actual XML parser - that&#39;s what it&#39;s there for.  And situations like this are what XPath expressions are for, too:\r\n \r\n    javax.xml.xpath.XPath xpath = javax.xml.xpath.XPathFactory.newInstance().newXPath();\r\n    xpath.setNamespaceContext(new NamespaceContextMap(\r\n        &quot;s&quot;, &quot;http://schemas.xmlsoap.org/soap/envelope/&quot;,\r\n        &quot;a&quot;, &quot;http://www.w3.org/2005/08/addressing&quot;));\r\n    javax.xml.xpath.XPathExpression expression = xpath.compile(&quot;//s:Header/a:Action&quot;);\r\n    String result = expression.evaluate(new org.xml.sax.InputSource(new FileReader(&quot;c:\\\\temp\\\\DialogUdenBilag.xml&quot;)));\r\n\r\n(Note that `NamespaceContextMap` isn&#39;t a standard class - see [here][2] for the implementation.)\r\n\r\n----------\r\n\r\nAs for your regexp: it&#39;s written to unnecessarily match the entire input string, and doing lots of maximal rather than minimal matching.  You&#39;d chew through a lot less CPU if you had an expression more tightly focused on just the relevant bit of the document (for example, `&quot;&lt;((?:\\\\w+:)?)?Header\\\\b[^&gt;]*&gt;.*?&lt;((?:\\\\w+:)?)Action\\\\b[^&gt;]*&gt;(.*?)&lt;/\\\\2Action&gt;.*?&lt;/\\\\1Header&gt;&quot;`), and called `Matcher.find()` to do a substring match.  That said, parsing XML with a regexp is bad practice - you really should be using an XML parser instead!\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454\r\n  [2]: http://illegalargumentexception.blogspot.co.uk/2009/05/java-using-xpath-with-namespaces-and.html","title":"Using java Pattern and Matcher, how to get first matching tag content","body":"<p>Using regular expressions to parse XML is evil, and <a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454\">may incur the Wrath of the One whose Name cannot be expressed in the Basic Multilingual Plane.</a>  If you need to parse XML, use an actual XML parser - that's what it's there for.  And situations like this are what XPath expressions are for, too:</p>\n\n<pre><code>javax.xml.xpath.XPath xpath = javax.xml.xpath.XPathFactory.newInstance().newXPath();\nxpath.setNamespaceContext(new NamespaceContextMap(\n    \"s\", \"http://schemas.xmlsoap.org/soap/envelope/\",\n    \"a\", \"http://www.w3.org/2005/08/addressing\"));\njavax.xml.xpath.XPathExpression expression = xpath.compile(\"//s:Header/a:Action\");\nString result = expression.evaluate(new org.xml.sax.InputSource(new FileReader(\"c:\\\\temp\\\\DialogUdenBilag.xml\")));\n</code></pre>\n\n<p>(Note that <code>NamespaceContextMap</code> isn't a standard class - see <a href=\"http://illegalargumentexception.blogspot.co.uk/2009/05/java-using-xpath-with-namespaces-and.html\" rel=\"nofollow noreferrer\">here</a> for the implementation.)</p>\n\n<hr>\n\n<p>As for your regexp: it's written to unnecessarily match the entire input string, and doing lots of maximal rather than minimal matching.  You'd chew through a lot less CPU if you had an expression more tightly focused on just the relevant bit of the document (for example, <code>\"&lt;((?:\\\\w+:)?)?Header\\\\b[^&gt;]*&gt;.*?&lt;((?:\\\\w+:)?)Action\\\\b[^&gt;]*&gt;(.*?)&lt;/\\\\2Action&gt;.*?&lt;/\\\\1Header&gt;\"</code>), and called <code>Matcher.find()</code> to do a substring match.  That said, parsing XML with a regexp is bad practice - you really should be using an XML parser instead!</p>\n"},{"tags":[],"owner":{"account_id":150404,"reputation":42099,"user_id":363573,"accept_rate":97,"display_name":"Stephan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1385409594,"creation_date":1385400866,"answer_id":20199516,"question_id":20198771,"body_markdown":"###Solution\r\nYou want to use an XML parser for a more CPU friendly solution.\r\n\r\n     XMLInputFactory factory = XMLInputFactory.newInstance();\r\n     XMLStreamReader reader = factory.createXMLStreamReader(new FileInputStream(&quot;c:\\\\temp\\\\DialogUdenBilag.xml&quot;));\r\n\r\n     boolean found=false;\r\n     boolean inHeader=false;\r\n     String actionContent = &quot;&quot;;\r\n\r\n     while(!found &amp;&amp; reader.hasNext()){\r\n        if(reader.next() == XMLStreamConstants.START_ELEMENT) {\r\n            String localName=reader.getLocalName());\r\n\r\n            if (&quot;Header&quot;.equalsIgnoreCase(localName) {\r\n                inHeader = true;\r\n            }\r\n\r\n            if(inHeader &amp;&amp; &quot;Action&quot;.equalsIgnoreCase(localName) {\r\n      \r\n                int evt=reader.next();\r\n                do {\r\n                   if (evt==XMLStreamConstants.CHARACTERS) {\r\n                       actionContent = reader.getText().trim();\r\n                       found=true;\r\n                       break;\r\n                   }\r\n\r\n                   evt=reader.next();\r\n                } while(evt != XMLStreamConstants.END_ELEMENT);\r\n \r\n            }\r\n        }\r\n     }\r\n\r\n     if (found) {\r\n         System.out.println(actionContent);\r\n     } else {\r\n         System.out.println(&quot;SaopAction not found&quot;);\r\n     }\r\n\r\n###Discussion\r\nThis little snippet is a little bit lengthy but you&#39;ll get your answer **without looking inside the whole** XML code. In fact, the snippet stops when it find the `soap:Action` tag and then returns the text content of this tag.","title":"Using java Pattern and Matcher, how to get first matching tag content","body":"<h3>Solution</h3>\n\n<p>You want to use an XML parser for a more CPU friendly solution.</p>\n\n<pre><code> XMLInputFactory factory = XMLInputFactory.newInstance();\n XMLStreamReader reader = factory.createXMLStreamReader(new FileInputStream(\"c:\\\\temp\\\\DialogUdenBilag.xml\"));\n\n boolean found=false;\n boolean inHeader=false;\n String actionContent = \"\";\n\n while(!found &amp;&amp; reader.hasNext()){\n    if(reader.next() == XMLStreamConstants.START_ELEMENT) {\n        String localName=reader.getLocalName());\n\n        if (\"Header\".equalsIgnoreCase(localName) {\n            inHeader = true;\n        }\n\n        if(inHeader &amp;&amp; \"Action\".equalsIgnoreCase(localName) {\n\n            int evt=reader.next();\n            do {\n               if (evt==XMLStreamConstants.CHARACTERS) {\n                   actionContent = reader.getText().trim();\n                   found=true;\n                   break;\n               }\n\n               evt=reader.next();\n            } while(evt != XMLStreamConstants.END_ELEMENT);\n\n        }\n    }\n }\n\n if (found) {\n     System.out.println(actionContent);\n } else {\n     System.out.println(\"SaopAction not found\");\n }\n</code></pre>\n\n<h3>Discussion</h3>\n\n<p>This little snippet is a little bit lengthy but you'll get your answer <strong>without looking inside the whole</strong> XML code. In fact, the snippet stops when it find the <code>soap:Action</code> tag and then returns the text content of this tag.</p>\n"}],"owner":{"account_id":3638374,"reputation":11,"user_id":3033204,"display_name":"user3033204"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1396,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1692871885,"creation_date":1385398669,"question_id":20198771,"body_markdown":"I have at SoapMessage that looks like this:\r\n\r\n    &lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\r\n\t&lt;soap:Header&gt;\r\n\t\t&lt;Action xmlns=&quot;http://www.w3.org/2005/08/addressing&quot;&gt;http://service.xxx.dk/DialogModtag&lt;/Action&gt;\r\n\t\t&lt;MessageID xmlns=&quot;http://www.w3.org/2005/08/addressing&quot;&gt;urn:uuid:382b4943-26e8-4698-a275-c3149d2d889e&lt;/MessageID&gt;\r\n\t\t&lt;To xmlns=&quot;http://www.w3.org/2005/08/addressing&quot;&gt;http://xxx.dk/12345678&lt;/To&gt;\r\n\t\t&lt;RelatesTo xmlns=&quot;http://www.w3.org/2005/08/addressing&quot;&gt;uuid:cb2320dc-c8ab-4880-94cb-2ab68129216f&lt;/RelatesTo&gt;\r\n\t&lt;/soap:Header&gt;\r\n\t&lt;soap:Body xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; wsu:Id=&quot;id-2515&quot;&gt;\r\n\t\tSome content ...\r\n\t&lt;/soap:Body&gt;\r\n&lt;/soap:Envelope&gt;\r\n\r\nand I am trying to extract the contents of the &amp;lt;Action&amp;gt; tag within the &amp;lt;Header&amp;gt; tag using code like this:\r\n\r\n    Pattern PATTERN_SOAP_ACTION = \r\n        Pattern.compile(&quot;.*Header.*Action.*&gt;(.*)&lt;.*Action.*Header.*&quot;, Pattern.DOTALL);\r\n\r\n    String text = readFile(&quot;c:\\\\temp\\\\DialogUdenBilag.xml&quot;);\r\n    Matcher matcherSoapAction = PATTERN_SOAP_ACTION.matcher(text);\r\n    if (matcherSoapAction.matches()) { System.out.println(matcherSoapAction.group(1)); }\r\n    else { System.out.println(&quot;SaopAction not found&quot;); }\r\n\r\nThis seems to be working OK for small soap messages. But when the soap:Body grows to +1MB, then the matches() function call takes minutes to complete.\r\n\r\nAny ideas for making my regex pattern more CPU friendly?","title":"Using java Pattern and Matcher, how to get first matching tag content","body":"<p>I have at SoapMessage that looks like this:</p>\n\n<pre><code>&lt;soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\n&lt;soap:Header&gt;\n    &lt;Action xmlns=\"http://www.w3.org/2005/08/addressing\"&gt;http://service.xxx.dk/DialogModtag&lt;/Action&gt;\n    &lt;MessageID xmlns=\"http://www.w3.org/2005/08/addressing\"&gt;urn:uuid:382b4943-26e8-4698-a275-c3149d2d889e&lt;/MessageID&gt;\n    &lt;To xmlns=\"http://www.w3.org/2005/08/addressing\"&gt;http://xxx.dk/12345678&lt;/To&gt;\n    &lt;RelatesTo xmlns=\"http://www.w3.org/2005/08/addressing\"&gt;uuid:cb2320dc-c8ab-4880-94cb-2ab68129216f&lt;/RelatesTo&gt;\n&lt;/soap:Header&gt;\n&lt;soap:Body xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\" wsu:Id=\"id-2515\"&gt;\n    Some content ...\n&lt;/soap:Body&gt;\n</code></pre>\n\n<p></p>\n\n<p>and I am trying to extract the contents of the &lt;Action&gt; tag within the &lt;Header&gt; tag using code like this:</p>\n\n<pre><code>Pattern PATTERN_SOAP_ACTION = \n    Pattern.compile(\".*Header.*Action.*&gt;(.*)&lt;.*Action.*Header.*\", Pattern.DOTALL);\n\nString text = readFile(\"c:\\\\temp\\\\DialogUdenBilag.xml\");\nMatcher matcherSoapAction = PATTERN_SOAP_ACTION.matcher(text);\nif (matcherSoapAction.matches()) { System.out.println(matcherSoapAction.group(1)); }\nelse { System.out.println(\"SaopAction not found\"); }\n</code></pre>\n\n<p>This seems to be working OK for small soap messages. But when the soap:Body grows to +1MB, then the matches() function call takes minutes to complete.</p>\n\n<p>Any ideas for making my regex pattern more CPU friendly?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1807633,"reputation":2510,"user_id":1644401,"accept_rate":40,"display_name":"atomman"},"score":2,"creation_date":1385378929,"post_id":20190880,"comment_id":30103359,"body_markdown":"Try rewriting your second question, as it is hard to understand what you are asking. As for you first question, if you remove your first `find()` you will see that the `find()` within your while returns true. From the javadocs: &quot;Attempts to find the next subsequence of the input sequence that matches the pattern&quot; - [javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html). Your regex will however never yield `true` twice because of your start/end anchors, which forces the full match.","body":"Try rewriting your second question, as it is hard to understand what you are asking. As for you first question, if you remove your first <code>find()</code> you will see that the <code>find()</code> within your while returns true. From the javadocs: &quot;Attempts to find the next subsequence of the input sequence that matches the pattern&quot; - <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html\" rel=\"nofollow noreferrer\">javadoc</a>. Your regex will however never yield <code>true</code> twice because of your start/end anchors, which forces the full match."},{"owner":{"account_id":537054,"reputation":32561,"user_id":905762,"accept_rate":77,"display_name":"John B"},"score":0,"creation_date":1385379086,"post_id":20190880,"comment_id":30103432,"body_markdown":"atomman has the answer to part 1. With part 2, try using lazy quantifier instead of greedy - `(\\\\w+)\\\\.(\\\\w+?)` The fact that you are using a greedy quantifier means that it will try to get everything possible.","body":"atomman has the answer to part 1. With part 2, try using lazy quantifier instead of greedy - <code>(\\\\w+)\\\\.(\\\\w+?)</code> The fact that you are using a greedy quantifier means that it will try to get everything possible."}],"answers":[{"tags":[],"owner":{"account_id":3481005,"reputation":3302,"user_id":2913064,"display_name":"kviiri"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1385379102,"creation_date":1385379102,"answer_id":20192010,"question_id":20190880,"body_markdown":"&gt; m.find() return true when called it independently(#1), why it return false called in while()(#2).\r\n\r\nSee `Matcher`&#39;s Javadoc: http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html\r\n\r\n&gt; This method [find] starts at the beginning of this matcher&#39;s region, or, if a previous invocation of the method was successful and the matcher has not since been reset, at the first character not matched by the previous match.\r\n\r\nAs for the second question, the reason why your `Matcher` is dividing it so is greedy matching: the `Matcher` tries to get as much characters as possible when matching each part of the regex. `NOT_` is consumed not by the `(EQUALS|NOT_EQUALS)` part of the expression but the earlier wildcards. Use the reluctant quantifiers (see Javadoc on [Pattern][1]) instead of the greedy ones to fix this.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html","title":"Matcher.find() in Java has an error result when group an regular expression","body":"<blockquote>\n  <p>m.find() return true when called it independently(#1), why it return false called in while()(#2).</p>\n</blockquote>\n\n<p>See <code>Matcher</code>'s Javadoc: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html</a></p>\n\n<blockquote>\n  <p>This method [find] starts at the beginning of this matcher's region, or, if a previous invocation of the method was successful and the matcher has not since been reset, at the first character not matched by the previous match.</p>\n</blockquote>\n\n<p>As for the second question, the reason why your <code>Matcher</code> is dividing it so is greedy matching: the <code>Matcher</code> tries to get as much characters as possible when matching each part of the regex. <code>NOT_</code> is consumed not by the <code>(EQUALS|NOT_EQUALS)</code> part of the expression but the earlier wildcards. Use the reluctant quantifiers (see Javadoc on <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html\" rel=\"nofollow\">Pattern</a>) instead of the greedy ones to fix this.</p>\n"}],"owner":{"account_id":3047127,"reputation":3,"user_id":2582436,"display_name":"user2582436"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1436,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":20192010,"answer_count":1,"score":0,"last_activity_date":1692871865,"creation_date":1385378361,"question_id":20190880,"body_markdown":"My code is as follows:\r\n   \r\n\r\n     @Test\r\n     public void testMatcher2(){\r\n        String pa2 = &quot;^\\\\s*(\\\\w+)\\\\.(\\\\w+)\\\\s*(EQUALS|NOT_EQUALS)\\\\s*(.*$)&quot;;\r\n    \r\n        Pattern p = Pattern.compile(pa2, Pattern.CASE_INSENSITIVE);\r\n        Matcher m = p.matcher(&quot;Class.fieldNOT_EQUALS&#39;someval&#39;&quot;);\r\n        boolean bb = m.find();\r\n        System.out.println(bb);   //#1\r\n        System.out.printf(&quot;A=%s. B=%s. C=%s\\n&quot;, m.group(1),m.group(2),m.group(3));\r\n        \r\n        while (m.find()){          //#2\r\n            System.out.println(&quot;a&quot;);\r\n    \t\tString a = m.group(1);\r\n    \t\tString b = m.group(2);\r\n    \t\tString c = m.group(3);\r\n    \t\tSystem.out.printf(&quot;a=%s. b=%s. c=%s\\n&quot;, a,b,c);\r\n    \t}\r\n     }\r\n\r\n\r\nand the result is like below:\r\n&gt;true  \r\n&gt;A=Class. B=fieldNOT_. C=EQUALS\r\n\r\nMy questions are:\r\n\r\n 1. m.find() returns true when called independently(#1), why does it return false when called in while()(#2)?\r\n\r\n 2. In this regexp, `Class.fieldNOT_EQUALS&#39;someval&#39;` can be grouped in 2 results (I think):\r\n`Class/field/NOT_EQUALS/&#39;someval&#39;` (R1, that&#39;s what i want) and `Class/fieldNOT_/EQUALS/&#39;someval&#39;` (R2, the result of program), why does the `Matcher` divide the exp into to R2? If I want to get the R1 without changing the exp, how do I get it?\r\n\r\nAny answers are appreciated.\r\n\r\n","title":"Matcher.find() in Java has an error result when group an regular expression","body":"<p>My code is as follows:</p>\n\n<pre><code> @Test\n public void testMatcher2(){\n    String pa2 = \"^\\\\s*(\\\\w+)\\\\.(\\\\w+)\\\\s*(EQUALS|NOT_EQUALS)\\\\s*(.*$)\";\n\n    Pattern p = Pattern.compile(pa2, Pattern.CASE_INSENSITIVE);\n    Matcher m = p.matcher(\"Class.fieldNOT_EQUALS'someval'\");\n    boolean bb = m.find();\n    System.out.println(bb);   //#1\n    System.out.printf(\"A=%s. B=%s. C=%s\\n\", m.group(1),m.group(2),m.group(3));\n\n    while (m.find()){          //#2\n        System.out.println(\"a\");\n        String a = m.group(1);\n        String b = m.group(2);\n        String c = m.group(3);\n        System.out.printf(\"a=%s. b=%s. c=%s\\n\", a,b,c);\n    }\n }\n</code></pre>\n\n<p>and the result is like below:</p>\n\n<blockquote>\n  <p>true<br>\n  A=Class. B=fieldNOT_. C=EQUALS</p>\n</blockquote>\n\n<p>My questions are:</p>\n\n<ol>\n<li><p>m.find() returns true when called independently(#1), why does it return false when called in while()(#2)?</p></li>\n<li><p>In this regexp, <code>Class.fieldNOT_EQUALS'someval'</code> can be grouped in 2 results (I think):\n<code>Class/field/NOT_EQUALS/'someval'</code> (R1, that's what i want) and <code>Class/fieldNOT_/EQUALS/'someval'</code> (R2, the result of program), why does the <code>Matcher</code> divide the exp into to R2? If I want to get the R1 without changing the exp, how do I get it?</p></li>\n</ol>\n\n<p>Any answers are appreciated.</p>\n"},{"tags":["java","regex","performance"],"comments":[{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":0,"creation_date":1385045570,"post_id":20124113,"comment_id":29989169,"body_markdown":"By looking at your regexp, probably you want/need to parse the String by hand instead.","body":"By looking at your regexp, probably you want/need to parse the String by hand instead."},{"owner":{"account_id":196298,"reputation":19258,"user_id":439667,"accept_rate":86,"display_name":"Ibrahim Najjar"},"score":0,"creation_date":1385045630,"post_id":20124113,"comment_id":29989215,"body_markdown":"Excessive acktracking. Your regular expression is overly complex. Parse manually as @LuiggiMendoza said.","body":"Excessive acktracking. Your regular expression is overly complex. Parse manually as @LuiggiMendoza said."},{"owner":{"account_id":1004204,"reputation":135,"user_id":1018368,"accept_rate":40,"display_name":"Phoenix the II"},"score":0,"creation_date":1385045689,"post_id":20124113,"comment_id":29989254,"body_markdown":"First part the (?=) is assertion that the string contains at max these characters\n\nThe 2nd part is assertion that the string doesn&#39;t exceed syntax for example on this case to prevent --&#39;s and end at least in [a-z0-9]","body":"First part the (?=) is assertion that the string contains at max these characters  The 2nd part is assertion that the string doesn&#39;t exceed syntax for example on this case to prevent --&#39;s and end at least in [a-z0-9]"},{"owner":{"account_id":2985220,"reputation":5535,"user_id":2534236,"accept_rate":72,"display_name":"Suganthan Madhavan Pillai"},"score":0,"creation_date":1385045967,"post_id":20124113,"comment_id":29989483,"body_markdown":"Backtrack limit was exhausted. Please review your expression.","body":"Backtrack limit was exhausted. Please review your expression."},{"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"score":0,"creation_date":1385046340,"post_id":20124113,"comment_id":29989752,"body_markdown":"Related: http://en.wikipedia.org/wiki/ReDoS","body":"Related: <a href=\"http://en.wikipedia.org/wiki/ReDoS\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/ReDoS</a>"}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1385049118,"creation_date":1385045800,"answer_id":20124273,"question_id":20124113,"body_markdown":"I tried to guess your intention but it was not easy:\r\n\r\n`(?=[a-z0-9-]{1,63})` this look-ahead seem to intend to require the next up to 63 characters to be lowercase ASCII letters or numbers, but in fact, it will succeed even if there’s only one letter followed by anything. So maybe you meant `(?=[a-z0-9-]{1,63}$)` to forbid anything else after the legal up to 63 characters.\r\n\r\nYou seem to want groups of at least one letter or number between the `-` but you made the `-` optional not really creating a constraint and allowing way to much possibilities which created the overhead of your expression. You can simply say: `([a-z0-9]++-){0,63}[a-z0-9]+`. The groups within the braces require at least one letter or number and require the minus after that, the expression at the end requires at least one letter or number at the end of the expression but will also match the last group without a following `-` at the same time. This last group might also be the only one if no `-` is contained in your text at all.\r\n\r\nPutting it all together you regex becomes: `(?=[a-z0-9-]{1,63}$)([a-z0-9]++-){0,63}[a-z0-9]+`. Note that you don’t need a leading `^` or trailing `$` if you use the `matches` method; it already implies that the string bounds must match the expression bounds.\r\n\r\nI hope I got your intention right…\r\n","title":"Java Matcher slow regex","body":"<p>I tried to guess your intention but it was not easy:</p>\n\n<p><code>(?=[a-z0-9-]{1,63})</code> this look-ahead seem to intend to require the next up to 63 characters to be lowercase ASCII letters or numbers, but in fact, it will succeed even if there’s only one letter followed by anything. So maybe you meant <code>(?=[a-z0-9-]{1,63}$)</code> to forbid anything else after the legal up to 63 characters.</p>\n\n<p>You seem to want groups of at least one letter or number between the <code>-</code> but you made the <code>-</code> optional not really creating a constraint and allowing way to much possibilities which created the overhead of your expression. You can simply say: <code>([a-z0-9]++-){0,63}[a-z0-9]+</code>. The groups within the braces require at least one letter or number and require the minus after that, the expression at the end requires at least one letter or number at the end of the expression but will also match the last group without a following <code>-</code> at the same time. This last group might also be the only one if no <code>-</code> is contained in your text at all.</p>\n\n<p>Putting it all together you regex becomes: <code>(?=[a-z0-9-]{1,63}$)([a-z0-9]++-){0,63}[a-z0-9]+</code>. Note that you don’t need a leading <code>^</code> or trailing <code>$</code> if you use the <code>matches</code> method; it already implies that the string bounds must match the expression bounds.</p>\n\n<p>I hope I got your intention right…</p>\n"},{"tags":[],"owner":{"account_id":1004204,"reputation":135,"user_id":1018368,"accept_rate":40,"display_name":"Phoenix the II"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385046298,"creation_date":1385046088,"answer_id":20124397,"question_id":20124113,"body_markdown":"I have fixed this regex replacing it as follows:\r\n\r\n    ^(?=[a-z0-9-]{1,63})([a-z0-9]{0,1}|[-]{0,1}){1,63}[a-z0-9]{1}$\r\n\r\nThe section `([a-z0-9]+[-]{0,1}){1,63}` became: `([a-z0-9]{0,1}|[-]{0,1}){1,63}`\r\n","title":"Java Matcher slow regex","body":"<p>I have fixed this regex replacing it as follows:</p>\n\n<pre><code>^(?=[a-z0-9-]{1,63})([a-z0-9]{0,1}|[-]{0,1}){1,63}[a-z0-9]{1}$\n</code></pre>\n\n<p>The section <code>([a-z0-9]+[-]{0,1}){1,63}</code> became: <code>([a-z0-9]{0,1}|[-]{0,1}){1,63}</code></p>\n"},{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385048947,"creation_date":1385047541,"answer_id":20124947,"question_id":20124113,"body_markdown":" - If you want to make sure that there is no `--` in your string just use negative look ahead `(?!.*--)`. \r\n - Also there is no point in writing `{1}`. \r\n - Another thing is if you want to ensure that string has max 63 characters then in your look-ahead you need to add `$` at the end `(?=[a-z0-9-]{1,63}$)`.\r\n\r\nSo maybe `^(?=[a-z0-9-]{1,63}$)(?!.*--)[a-z0-9-]+[a-z0-9]$`","title":"Java Matcher slow regex","body":"<ul>\n<li>If you want to make sure that there is no <code>--</code> in your string just use negative look ahead <code>(?!.*--)</code>. </li>\n<li>Also there is no point in writing <code>{1}</code>. </li>\n<li>Another thing is if you want to ensure that string has max 63 characters then in your look-ahead you need to add <code>$</code> at the end <code>(?=[a-z0-9-]{1,63}$)</code>.</li>\n</ul>\n\n<p>So maybe <code>^(?=[a-z0-9-]{1,63}$)(?!.*--)[a-z0-9-]+[a-z0-9]$</code></p>\n"},{"tags":[],"owner":{"display_name":"user557597"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385077876,"creation_date":1385051069,"answer_id":20126440,"question_id":20124113,"body_markdown":"I think from what you say, your regex can be simplified to this  \r\nEdit - (For posterity) After reading @Holger&#39;s post, I am changing this to fix possible catastrophic backtracking, and to speed it up, which as my benches show is possibly the fastest way to do it.\r\n\r\n     #  ^(?=[a-z0-9-]{1,63}$)[a-z0-9]++(?:-[a-z0-9]+)*+$\r\n     \r\n     ^                                    # BOL\r\n     (?= [a-z0-9-]{1,63} $ )              # max 1 - 63 of these characters\r\n     [a-z0-9]++ (?: - [a-z0-9]+ )*+       # consume the characters in this order\r\n     $                                    # EOL\r\n ","title":"Java Matcher slow regex","body":"<p>I think from what you say, your regex can be simplified to this<br>\nEdit - (For posterity) After reading @Holger's post, I am changing this to fix possible catastrophic backtracking, and to speed it up, which as my benches show is possibly the fastest way to do it.</p>\n\n<pre><code> #  ^(?=[a-z0-9-]{1,63}$)[a-z0-9]++(?:-[a-z0-9]+)*+$\n\n ^                                    # BOL\n (?= [a-z0-9-]{1,63} $ )              # max 1 - 63 of these characters\n [a-z0-9]++ (?: - [a-z0-9]+ )*+       # consume the characters in this order\n $                                    # EOL\n</code></pre>\n"}],"owner":{"account_id":1004204,"reputation":135,"user_id":1018368,"accept_rate":40,"display_name":"Phoenix the II"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1436,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":20124273,"answer_count":4,"score":1,"last_activity_date":1692871859,"creation_date":1385045421,"question_id":20124113,"body_markdown":"This is very simple regex yet, it runs for over 30 seconds on a very short string: (`i7 3970k @ 3.4ghz`)\r\n\r\n\r\n    Pattern compile = Pattern.compile(&quot;^(?=[a-z0-9-]{1,63})([a-z0-9]+[-]{0,1}){1,63}[a-z0-9]{1}$&quot;);\r\n    Matcher matcher = compile.matcher(&quot;test-metareg-rw40lntknahvpseba32c&#223;&#225;&#224;&#226;&#229;&#228;&#230;&#231;.nl&quot;);\r\n    boolean matches = matcher.matches(); //Takes 30+ seconds\r\n\r\nFirst part the (?=) is assertion that the string contains at max these characters\r\n\r\nThe 2nd part is assertion that the string doesn&#39;t exceed syntax for example on this case to prevent --&#39;s and end at least in [a-z0-9]","title":"Java Matcher slow regex","body":"<p>This is very simple regex yet, it runs for over 30 seconds on a very short string: (<code>i7 3970k @ 3.4ghz</code>)</p>\n\n<pre><code>Pattern compile = Pattern.compile(\"^(?=[a-z0-9-]{1,63})([a-z0-9]+[-]{0,1}){1,63}[a-z0-9]{1}$\");\nMatcher matcher = compile.matcher(\"test-metareg-rw40lntknahvpseba32cßáàâåäæç.nl\");\nboolean matches = matcher.matches(); //Takes 30+ seconds\n</code></pre>\n\n<p>First part the (?=) is assertion that the string contains at max these characters</p>\n\n<p>The 2nd part is assertion that the string doesn't exceed syntax for example on this case to prevent --'s and end at least in [a-z0-9]</p>\n"},{"tags":["java","regex","string"],"answers":[{"tags":[],"owner":{"account_id":262968,"reputation":767110,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1385028016,"creation_date":1385028016,"answer_id":20117701,"question_id":20116903,"body_markdown":"I believe you have lot of redundant code. You definitely don&#39;t need a list of `Pattern` objects.\r\n\r\nConsider this code:\r\n\r\n    String output = new Scanner(new File(&quot;C:/file.in&quot;)).useDelimiter(&quot;\\\\Z&quot;).next();\r\n    String repl = output.replaceAll(&quot;\\b(Shannon|Sperling|Kim|Tammy|Nancy|Lana)\\b&quot;, \r\n                  &lt;span style=&#39;background-color:red;&#39;&gt;$1&lt;/span&gt;&quot;); \r\n    \r\n    File file = new File(&quot;C:/data/filename.in&quot;);\r\n    FileWriter fw = new FileWriter(file.getAbsoluteFile());\r\n    BufferedWriter bw = new BufferedWriter(fw);\r\n    bw.write( repl );\r\n    bw.close();","title":"Replacing all matched strings in a file with matcher.replaceall in Java","body":"<p>I believe you have lot of redundant code. You definitely don't need a list of <code>Pattern</code> objects.</p>\n\n<p>Consider this code:</p>\n\n<pre><code>String output = new Scanner(new File(\"C:/file.in\")).useDelimiter(\"\\\\Z\").next();\nString repl = output.replaceAll(\"\\b(Shannon|Sperling|Kim|Tammy|Nancy|Lana)\\b\", \n              &lt;span style='background-color:red;'&gt;$1&lt;/span&gt;\"); \n\nFile file = new File(\"C:/data/filename.in\");\nFileWriter fw = new FileWriter(file.getAbsoluteFile());\nBufferedWriter bw = new BufferedWriter(fw);\nbw.write( repl );\nbw.close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3600785,"reputation":21,"user_id":3004131,"display_name":"user3004131"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385282832,"creation_date":1385282263,"answer_id":20172640,"question_id":20116903,"body_markdown":"I am able to solve the problem after changing `s2` to `output`.Assign the result(`matcher.replaceAll`) to `output` instead of `s2`. Now all the matched strings replaced with color tag.\r\n\r\n    public static void main(String[] args) throws IOException, BadLocationException {\r\n    FileInputStream fis = null;\r\n      String output = new Scanner(new File(&quot;C:/file.in&quot;)).useDelimiter(&quot;\\\\Z&quot;).next();//file.in contains HTML text\r\n      String s2 = null;\r\n      StringWriter writer = new StringWriter();\r\n      for (int i=0; i&lt;patternList.size(); i++)//PatternList contains names to be extracted from file\r\n      {\r\n          Matcher matcher = patternList.get(i).matcher(output);\r\n          while (matcher.find()) \r\n          {\r\n                String matched = matcher.group();//I need to replace only matched strings returned by matcher\r\n                output=matcher.replaceAll(&quot;&lt;span style=&#39;background-color:red;&#39;&gt;&quot;+matched+&quot;&lt;/span&gt;&quot;);\r\n      File file = new File(&quot;C:/data/filename.in&quot;);\r\n      FileWriter fw = new FileWriter(file.getAbsoluteFile());\r\n        BufferedWriter bw = new BufferedWriter(fw);\r\n        bw.write(output);\r\n        bw.close();\r\n          }   \r\n      }","title":"Replacing all matched strings in a file with matcher.replaceall in Java","body":"<p>I am able to solve the problem after changing <code>s2</code> to <code>output</code>.Assign the result(<code>matcher.replaceAll</code>) to <code>output</code> instead of <code>s2</code>. Now all the matched strings replaced with color tag.</p>\n\n<pre><code>public static void main(String[] args) throws IOException, BadLocationException {\nFileInputStream fis = null;\n  String output = new Scanner(new File(\"C:/file.in\")).useDelimiter(\"\\\\Z\").next();//file.in contains HTML text\n  String s2 = null;\n  StringWriter writer = new StringWriter();\n  for (int i=0; i&lt;patternList.size(); i++)//PatternList contains names to be extracted from file\n  {\n      Matcher matcher = patternList.get(i).matcher(output);\n      while (matcher.find()) \n      {\n            String matched = matcher.group();//I need to replace only matched strings returned by matcher\n            output=matcher.replaceAll(\"&lt;span style='background-color:red;'&gt;\"+matched+\"&lt;/span&gt;\");\n  File file = new File(\"C:/data/filename.in\");\n  FileWriter fw = new FileWriter(file.getAbsoluteFile());\n    BufferedWriter bw = new BufferedWriter(fw);\n    bw.write(output);\n    bw.close();\n      }   \n  }\n</code></pre>\n"}],"owner":{"account_id":3600785,"reputation":21,"user_id":3004131,"display_name":"user3004131"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":653,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":2,"score":0,"last_activity_date":1692871852,"creation_date":1385025830,"question_id":20116903,"body_markdown":"I am trying to replace **only matched strings** in a file by using `matcher.replaceAll()`.Like below\r\n\r\n    public static void main(String[] args) throws IOException, BadLocationException {\r\n\t      \r\n\t      FileInputStream fis = null;\r\n\t      String output = new Scanner(new File(&quot;C:/file.in&quot;)).useDelimiter(&quot;\\\\Z&quot;).next();//file.in contains HTML text\r\n\t      String s2 = null;\r\n\t      StringWriter writer = new StringWriter();\r\n\t      for (int i=0; i&lt;patternList.size(); i++)//PatternList contains names to be extracted from file\r\n\t      {\r\n\t    \t  Matcher matcher = patternList.get(i).matcher(output);\r\n\t    \t  while (matcher.find()) \r\n\t          {\r\n\t    \t\t    String matched = matcher.group();//I need to replace only matched strings returned by matcher\r\n\t    \t\t    s2=matcher.replaceAll(&quot;&lt;span style=&#39;background-color:red;&#39;&gt;&quot;+matched+&quot;&lt;/span&gt;&quot;);\r\n\t      File file = new File(&quot;C:/data/filename.in&quot;);\r\n\t      FileWriter fw = new FileWriter(file.getAbsoluteFile());\r\n\t\t\tBufferedWriter bw = new BufferedWriter(fw);\r\n\t\t\tbw.write(s2);\r\n\t\t\tbw.close();\r\n\t          }   \r\n\t      }\r\n\r\nThe resulting string `s2` updated with only last string in PatternList.Each time i am overwriting the string with newly matched string. How can i get the final big string which is updated with all matched strings(names in patternlist).","title":"Replacing all matched strings in a file with matcher.replaceall in Java","body":"<p>I am trying to replace <strong>only matched strings</strong> in a file by using <code>matcher.replaceAll()</code>.Like below</p>\n\n<pre><code>public static void main(String[] args) throws IOException, BadLocationException {\n\n      FileInputStream fis = null;\n      String output = new Scanner(new File(\"C:/file.in\")).useDelimiter(\"\\\\Z\").next();//file.in contains HTML text\n      String s2 = null;\n      StringWriter writer = new StringWriter();\n      for (int i=0; i&lt;patternList.size(); i++)//PatternList contains names to be extracted from file\n      {\n          Matcher matcher = patternList.get(i).matcher(output);\n          while (matcher.find()) \n          {\n                String matched = matcher.group();//I need to replace only matched strings returned by matcher\n                s2=matcher.replaceAll(\"&lt;span style='background-color:red;'&gt;\"+matched+\"&lt;/span&gt;\");\n      File file = new File(\"C:/data/filename.in\");\n      FileWriter fw = new FileWriter(file.getAbsoluteFile());\n        BufferedWriter bw = new BufferedWriter(fw);\n        bw.write(s2);\n        bw.close();\n          }   \n      }\n</code></pre>\n\n<p>The resulting string <code>s2</code> updated with only last string in PatternList.Each time i am overwriting the string with newly matched string. How can i get the final big string which is updated with all matched strings(names in patternlist).</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":1,"creation_date":1384897917,"post_id":20082746,"comment_id":29919516,"body_markdown":"Not sure I understand your goal here. Could you post some examples of your input -&gt; output?","body":"Not sure I understand your goal here. Could you post some examples of your input -&gt; output?"}],"answers":[{"tags":[],"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1384905440,"creation_date":1384903681,"answer_id":20084395,"question_id":20082746,"body_markdown":"Maybe I misunderstand the principle, but that looks rather trivial now that you added the example. \r\n\r\nConsider this for instance: \r\n\r\n    String input = &quot;&#39;qty&#39;=&gt;&#39;&lt;input type=\\&quot;text\\&quot; maxlength=\\&quot;3\\&quot; class=\\&quot;qty_text\\&quot; id=&#39;.$key.&#39; value =&#39;&quot;;\r\n    String otherInput = &quot;&#39; onkeyup=\\&quot;this.value = this.value.replace (/\\\\D/, \\&#39;\\&#39;)\\&quot;&gt;&#39;&quot;;\r\n    // matching anything starting with single quote and ending with single quote \r\n    // included, reluctant quantified\r\n    Pattern p = Pattern.compile(&quot;&#39;.+?&#39;&quot;);\r\n    Matcher m = p.matcher(input);\r\n    while (m.find()) {\r\n    \tSystem.out.println(m.group());\r\n    }\r\n    m = p.matcher(otherInput);\r\n    System.out.println();\r\n\twhile (m.find()) {\r\n\t\tSystem.out.println(m.group());\r\n\t}\r\n\r\nOutput: \r\n\r\n\r\n    &#39;qty&#39;\r\n    &#39;&lt;input type=&quot;text&quot; maxlength=&quot;3&quot; class=&quot;qty_text&quot; id=&#39;\r\n    &#39; value =&#39;\r\n\r\n    &#39; onkeyup=&quot;this.value = this.value.replace (/\\D/, &#39;\r\n    &#39;)&quot;&gt;&#39;\r\n\r\nSee the Java `Pattern` [documentation][1] for more detailed explanations. \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html","title":"Java regexp in matcher input","body":"<p>Maybe I misunderstand the principle, but that looks rather trivial now that you added the example. </p>\n\n<p>Consider this for instance: </p>\n\n<pre><code>String input = \"'qty'=&gt;'&lt;input type=\\\"text\\\" maxlength=\\\"3\\\" class=\\\"qty_text\\\" id='.$key.' value ='\";\nString otherInput = \"' onkeyup=\\\"this.value = this.value.replace (/\\\\D/, \\'\\')\\\"&gt;'\";\n// matching anything starting with single quote and ending with single quote \n// included, reluctant quantified\nPattern p = Pattern.compile(\"'.+?'\");\nMatcher m = p.matcher(input);\nwhile (m.find()) {\n    System.out.println(m.group());\n}\nm = p.matcher(otherInput);\nSystem.out.println();\nwhile (m.find()) {\n    System.out.println(m.group());\n}\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>'qty'\n'&lt;input type=\"text\" maxlength=\"3\" class=\"qty_text\" id='\n' value ='\n\n' onkeyup=\"this.value = this.value.replace (/\\D/, '\n')\"&gt;'\n</code></pre>\n\n<p>See the Java <code>Pattern</code> <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html\" rel=\"nofollow\">documentation</a> for more detailed explanations. </p>\n"},{"tags":[],"owner":{"account_id":3490280,"reputation":5883,"user_id":2920151,"display_name":"pobrelkey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1384968400,"creation_date":1384904518,"answer_id":20084571,"question_id":20082746,"body_markdown":"The character groups that match neither backslashes nor quotes shouldn&#39;t be followed by a `+`.  Remove the `+`es to fix the hang (which was due to [catastrophic backtracking][1]).\r\n\r\nAlso, your original regex wasn&#39;t recognizing `\\D` as a valid backslash escape - therefore the string constant in your test input containing `\\D` wasn&#39;t being matched.  If you make the rules of your regex more liberal to recognize any character immediately following a backslash as part of the string constant, it will behave the way you expect.\r\n\r\n    &quot;(&#39;([^\\\\\\\\&#39;]|\\\\\\\\.)*&#39;|\\&quot;([^\\\\\\\\\\&quot;]|\\\\\\\\.)*\\&quot;)&quot;\r\n\r\n\r\n  [1]: http://www.regular-expressions.info/catastrophic.html","title":"Java regexp in matcher input","body":"<p>The character groups that match neither backslashes nor quotes shouldn't be followed by a <code>+</code>.  Remove the <code>+</code>es to fix the hang (which was due to <a href=\"http://www.regular-expressions.info/catastrophic.html\" rel=\"nofollow\">catastrophic backtracking</a>).</p>\n\n<p>Also, your original regex wasn't recognizing <code>\\D</code> as a valid backslash escape - therefore the string constant in your test input containing <code>\\D</code> wasn't being matched.  If you make the rules of your regex more liberal to recognize any character immediately following a backslash as part of the string constant, it will behave the way you expect.</p>\n\n<pre><code>\"('([^\\\\\\\\']|\\\\\\\\.)*'|\\\"([^\\\\\\\\\\\"]|\\\\\\\\.)*\\\")\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10959,"reputation":74232,"user_id":20938,"display_name":"Alan Moore"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1384975350,"creation_date":1384906375,"answer_id":20084926,"question_id":20082746,"body_markdown":"Your regex seems to work okay when presented with a string it matches; it&#39;s when it *can&#39;t* match that it goes into the endless loop.  (In this case it&#39;s the `\\D` that&#39;s causing it to choke.)  But that regex is much more complicated than it needs to be; you&#39;re trying to *match* them, not validate them.  Here&#39;s the quintessential regex for a string literal in C-style languages:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    &quot;[^&quot;\\\\\\r\\n]*(?:\\\\.[^&quot;\\\\\\r\\n]*)*&quot;\r\n\r\n...and the single-quoted version, for languages that support that style:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    &#39;[^&#39;\\\\\\r\\n]*(?:\\\\.[^&#39;\\\\\\r\\n]*)*&#39;\r\n\r\nIt uses Friedl&#39;s &quot;unrolled loop&quot; technique for maximum efficiency.  Here&#39;s the Java code for it, as generated by RegexBuddy 4:\r\n\r\n    Pattern regex = Pattern.compile(\r\n        &quot;\\&quot;[^\\&quot;\\\\\\\\\\r\\n]*(?:\\\\\\\\.[^\\&quot;\\\\\\\\\\r\\n]*)*\\&quot;|&#39;[^&#39;\\\\\\\\\\r\\n]*(?:\\\\\\\\.[^&#39;\\\\\\\\\\r\\n]*)*&#39;&quot;\r\n    );\r\n\r\n","title":"Java regexp in matcher input","body":"<p>Your regex seems to work okay when presented with a string it matches; it's when it <em>can't</em> match that it goes into the endless loop.  (In this case it's the <code>\\D</code> that's causing it to choke.)  But that regex is much more complicated than it needs to be; you're trying to <em>match</em> them, not validate them.  Here's the quintessential regex for a string literal in C-style languages:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>\"[^\"\\\\\\r\\n]*(?:\\\\.[^\"\\\\\\r\\n]*)*\"\n</code></pre>\n\n<p>...and the single-quoted version, for languages that support that style:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>'[^'\\\\\\r\\n]*(?:\\\\.[^'\\\\\\r\\n]*)*'\n</code></pre>\n\n<p>It uses Friedl's \"unrolled loop\" technique for maximum efficiency.  Here's the Java code for it, as generated by RegexBuddy 4:</p>\n\n<pre><code>Pattern regex = Pattern.compile(\n    \"\\\"[^\\\"\\\\\\\\\\r\\n]*(?:\\\\\\\\.[^\\\"\\\\\\\\\\r\\n]*)*\\\"|'[^'\\\\\\\\\\r\\n]*(?:\\\\\\\\.[^'\\\\\\\\\\r\\n]*)*'\"\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1384978093,"creation_date":1384954949,"answer_id":20097595,"question_id":20082746,"body_markdown":"You can do it all in one line using `split()` with the right regex:\r\n\r\n    String[] array = source.replaceAll(&quot;^[^&#39;]+&quot;, &quot;&quot;).split(&quot;(?&lt;!\\\\G.)(?&lt;=&#39;).*?(?=&#39;|$)&quot;);\r\n\r\nThere&#39;s a reasonable amount of regex kung fu going on here, so I&#39;ll break it down:\r\n\r\n- The delimiter is wrapped by even/odd quotes, but can not *contain* the quotes because `split()` *consumes* the delimiter, so a look behind `(?&lt;=&#39;)` and look ahead `(?=&#39;)` (which are non-consuming) is used to match the quotes instead of a literal quote in the regex\r\n- a reluctant match `.*?` for characters between the quotes ensures that it stops at the next quote (instead of matching through to the last quote)\r\n- I added an alternate match for end of input tot he look ahead `(?=&#39;|$)` in case there&#39;s no trailing close quote\r\n- And saving the best for last, the regex that is key to making this all work is the negative look behind `(?&lt;!\\\\G.)` which means &quot;don&#39;t match on the end of the previous match&quot; and ensures the next match advances past the end of the previous delimiter, without which you would end up with just the quote characters in your array. `\\G` matches the *end* of the previous match, but also matches start of input for the first match, so it rather neatly automatically handles *not* matching on the first quote - thus making the delimiter wrapped in even/odd quote instead of odd/even as it would be otherwise.\r\n- To cater for the input&#39;s first character not being a quote, you need to strip off the leading characters before splitting - that&#39;s why the `replaceAll()` is needed\r\n\r\n---\r\n\r\nHere&#39;s some test code using your sample input:\r\n\r\n    String source = &quot;&#39;qty&#39;=&gt;&#39;&lt;input type=\\&quot;text\\&quot; maxlength=\\&quot;3\\&quot; class=\\&quot;qty_text\\&quot; id=&#39;.$key.&#39; value =&#39;&quot;;\r\n    String[] array = source.replaceAll(&quot;^[^&#39;]+&quot;, &quot;&quot;).split(&quot;(?&lt;!\\\\G.)(?&lt;=&#39;).*?(?=&#39;|$)&quot;);\r\n    System.out.println(Arrays.toString(array));\r\n\r\nOutput:\r\n\r\n    [&#39;qty&#39;, &#39;&lt;input type=&quot;text&quot; maxlength=&quot;3&quot; class=&quot;qty_text&quot; id=&#39;, &#39; value =&#39;]\r\n\r\n","title":"Java regexp in matcher input","body":"<p>You can do it all in one line using <code>split()</code> with the right regex:</p>\n\n<pre><code>String[] array = source.replaceAll(\"^[^']+\", \"\").split(\"(?&lt;!\\\\G.)(?&lt;=').*?(?='|$)\");\n</code></pre>\n\n<p>There's a reasonable amount of regex kung fu going on here, so I'll break it down:</p>\n\n<ul>\n<li>The delimiter is wrapped by even/odd quotes, but can not <em>contain</em> the quotes because <code>split()</code> <em>consumes</em> the delimiter, so a look behind <code>(?&lt;=')</code> and look ahead <code>(?=')</code> (which are non-consuming) is used to match the quotes instead of a literal quote in the regex</li>\n<li>a reluctant match <code>.*?</code> for characters between the quotes ensures that it stops at the next quote (instead of matching through to the last quote)</li>\n<li>I added an alternate match for end of input tot he look ahead <code>(?='|$)</code> in case there's no trailing close quote</li>\n<li>And saving the best for last, the regex that is key to making this all work is the negative look behind <code>(?&lt;!\\\\G.)</code> which means \"don't match on the end of the previous match\" and ensures the next match advances past the end of the previous delimiter, without which you would end up with just the quote characters in your array. <code>\\G</code> matches the <em>end</em> of the previous match, but also matches start of input for the first match, so it rather neatly automatically handles <em>not</em> matching on the first quote - thus making the delimiter wrapped in even/odd quote instead of odd/even as it would be otherwise.</li>\n<li>To cater for the input's first character not being a quote, you need to strip off the leading characters before splitting - that's why the <code>replaceAll()</code> is needed</li>\n</ul>\n\n<hr>\n\n<p>Here's some test code using your sample input:</p>\n\n<pre><code>String source = \"'qty'=&gt;'&lt;input type=\\\"text\\\" maxlength=\\\"3\\\" class=\\\"qty_text\\\" id='.$key.' value ='\";\nString[] array = source.replaceAll(\"^[^']+\", \"\").split(\"(?&lt;!\\\\G.)(?&lt;=').*?(?='|$)\");\nSystem.out.println(Arrays.toString(array));\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['qty', '&lt;input type=\"text\" maxlength=\"3\" class=\"qty_text\" id=', ' value =']\n</code></pre>\n"}],"owner":{"account_id":3609157,"reputation":98,"user_id":3010618,"display_name":"s0ph1e"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":20084926,"answer_count":4,"score":2,"last_activity_date":1692871846,"creation_date":1384897528,"question_id":20082746,"body_markdown":"I&#39;m trying to get quoted strings using regexp.\r\n\r\n    String regexp = &quot;(&#39;([^\\\\\\\\&#39;]+|\\\\\\\\([btnfr\\&quot;&#39;\\\\\\\\]|[0-3]?[0-7]{1,2}|u[0-9a-fA-F]{4}))*&#39;|\\&quot;([^\\\\\\\\\\&quot;]+|\\\\\\\\([btnfr\\&quot;&#39;\\\\\\\\]|[0-3]?[0-7]{1,2}|u[0-9a-fA-F]{4}))*\\&quot;)&quot;;\r\n    Pattern p = Pattern.compile(regexp);\r\n    Matcher m = p.matcher(source); \r\n    while (m.find()) {\r\n        String newElement = m.group(1);\r\n        //...\r\n    }\r\n\r\nIt works well, but if source text contains\r\n\r\n`&#39; onkeyup=&quot;this.value = this.value.replace (/\\D/, \\&#39;\\&#39;)&quot;&gt;&#39;`\r\n\r\nprogram goes into eternal loop.\r\n\r\nHow can I correctly get this string?\r\n\r\nFor example, I have a text(php code):\r\n\r\n    &#39;qty&#39;=&gt;&#39;&lt;input type=&quot;text&quot; maxlength=&quot;3&quot; class=&quot;qty_text&quot; id=&#39;.$key.&#39; value =&#39;\r\n\r\nThe result should be\r\n\r\n    &#39;qty&#39;\r\n    &#39;&lt;input type=&quot;text&quot; maxlength=&quot;3&quot; class=&quot;qty_text&quot; id=&#39;\r\n    &#39; value =&#39;\r\n\r\n\r\n    ","title":"Java regexp in matcher input","body":"<p>I'm trying to get quoted strings using regexp.</p>\n\n<pre><code>String regexp = \"('([^\\\\\\\\']+|\\\\\\\\([btnfr\\\"'\\\\\\\\]|[0-3]?[0-7]{1,2}|u[0-9a-fA-F]{4}))*'|\\\"([^\\\\\\\\\\\"]+|\\\\\\\\([btnfr\\\"'\\\\\\\\]|[0-3]?[0-7]{1,2}|u[0-9a-fA-F]{4}))*\\\")\";\nPattern p = Pattern.compile(regexp);\nMatcher m = p.matcher(source); \nwhile (m.find()) {\n    String newElement = m.group(1);\n    //...\n}\n</code></pre>\n\n<p>It works well, but if source text contains</p>\n\n<p><code>' onkeyup=\"this.value = this.value.replace (/\\D/, \\'\\')\"&gt;'</code></p>\n\n<p>program goes into eternal loop.</p>\n\n<p>How can I correctly get this string?</p>\n\n<p>For example, I have a text(php code):</p>\n\n<pre><code>'qty'=&gt;'&lt;input type=\"text\" maxlength=\"3\" class=\"qty_text\" id='.$key.' value ='\n</code></pre>\n\n<p>The result should be</p>\n\n<pre><code>'qty'\n'&lt;input type=\"text\" maxlength=\"3\" class=\"qty_text\" id='\n' value ='\n</code></pre>\n"},{"tags":["java","spring-boot","aws-code-deploy","nohup"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1692871732,"post_id":76968237,"comment_id":135684024,"body_markdown":"Out of curiosity, are you *assuming* the file isn&#39;t created because it prints that message or is the file not actually there? Because in the former case I would try to add a delay before checking whether the file exists.","body":"Out of curiosity, are you <i>assuming</i> the file isn&#39;t created because it prints that message or is the file not actually there? Because in the former case I would try to add a delay before checking whether the file exists."},{"owner":{"account_id":8776074,"reputation":8345,"user_id":6561309,"accept_rate":42,"display_name":"Richard"},"score":0,"creation_date":1692871845,"post_id":76968237,"comment_id":135684050,"body_markdown":"Hi Federico, the `nohup.out` never gets added. Even if I go look after the process has run, it does not exist.","body":"Hi Federico, the <code>nohup.out</code> never gets added. Even if I go look after the process has run, it does not exist."},{"owner":{"account_id":8776074,"reputation":8345,"user_id":6561309,"accept_rate":42,"display_name":"Richard"},"score":0,"creation_date":1692871952,"post_id":76968237,"comment_id":135684075,"body_markdown":"I have tried adding `-u` parameter, but it just got an error saying it&#39;s an invalid parameter.  i.e. `nohup java -u -jar -Dspring.profiles.active=uat target/pow-wow-0.0.2-SNAPSHOT.jar &amp;`.  People were suggesting that https://stackoverflow.com/questions/12919980/nohup-is-not-writing-log-to-output-file.","body":"I have tried adding <code>-u</code> parameter, but it just got an error saying it&#39;s an invalid parameter.  i.e. <code>nohup java -u -jar -Dspring.profiles.active=uat target&#47;pow-wow-0.0.2-SNAPSHOT.jar &amp;</code>.  People were suggesting that <a href=\"https://stackoverflow.com/questions/12919980/nohup-is-not-writing-log-to-output-file\" title=\"nohup is not writing log to output file\">stackoverflow.com/questions/12919980/&hellip;</a>."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1692872588,"post_id":76968237,"comment_id":135684196,"body_markdown":"That&#39;s a python option, not a `nohup` one. So you&#39;re passing it to java. It may be a problem with writing permissions in the current directory. Check whether it created `nohup.out` inside the user&#39;s home directory instead. As a last ditch effort, try `nohup java -u -jar -Dspring.profiles.active=uat target/pow-wow-0.0.2-SNAPSHOT.jar &gt; nohup.out &amp;`.","body":"That&#39;s a python option, not a <code>nohup</code> one. So you&#39;re passing it to java. It may be a problem with writing permissions in the current directory. Check whether it created <code>nohup.out</code> inside the user&#39;s home directory instead. As a last ditch effort, try <code>nohup java -u -jar -Dspring.profiles.active=uat target&#47;pow-wow-0.0.2-SNAPSHOT.jar &gt; nohup.out &amp;</code>."},{"owner":{"account_id":8776074,"reputation":8345,"user_id":6561309,"accept_rate":42,"display_name":"Richard"},"score":0,"creation_date":1692872832,"post_id":76968237,"comment_id":135684234,"body_markdown":"CodeDeploy executes its own process, and is logging to its own deployment, e.g. /opt/codedeploy-agent/deployment-root/xxxx/yyyy/logs/scripts.log. However, the `deploy.sh` is starting the application, so I would have thought it would output the logs.","body":"CodeDeploy executes its own process, and is logging to its own deployment, e.g. /opt/codedeploy-agent/deployment-root/xxxx/yyyy/logs/scripts&zwnj;&#8203;.log. However, the <code>deploy.sh</code> is starting the application, so I would have thought it would output the logs."},{"owner":{"account_id":8776074,"reputation":8345,"user_id":6561309,"accept_rate":42,"display_name":"Richard"},"score":0,"creation_date":1692873836,"post_id":76968237,"comment_id":135684440,"body_markdown":"Thanks, adding `&gt; nohup.out` did create the file: `root  root      0 Aug 24 10:33 nohup.out`.  However, it is empty.","body":"Thanks, adding <code>&gt; nohup.out</code> did create the file: <code>root  root      0 Aug 24 10:33 nohup.out</code>.  However, it is empty."},{"owner":{"account_id":8776074,"reputation":8345,"user_id":6561309,"accept_rate":42,"display_name":"Richard"},"score":0,"creation_date":1692874029,"post_id":76968237,"comment_id":135684477,"body_markdown":"I think the logs cannot be outputted to `nohup.out`. I am going to find a solution using Couldwatch: https://docs.aws.amazon.com/codedeploy/latest/userguide/codedeploy-agent-operations-cloudwatch-agent.html","body":"I think the logs cannot be outputted to <code>nohup.out</code>. I am going to find a solution using Couldwatch: <a href=\"https://docs.aws.amazon.com/codedeploy/latest/userguide/codedeploy-agent-operations-cloudwatch-agent.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/codedeploy/latest/userguide/&hellip;</a>"},{"owner":{"account_id":8776074,"reputation":8345,"user_id":6561309,"accept_rate":42,"display_name":"Richard"},"score":0,"creation_date":1692875046,"post_id":76968237,"comment_id":135684671,"body_markdown":"Hi @ Federico klez Culloca, I was wring, the `&gt; nohup.out` works, it is now writing to the file.  You did answer my question, thank you.","body":"Hi @ Federico klez Culloca, I was wring, the <code>&gt; nohup.out</code> works, it is now writing to the file.  You did answer my question, thank you."},{"owner":{"account_id":29214968,"reputation":186,"user_id":22381995,"display_name":"cant-code"},"score":0,"creation_date":1693070029,"post_id":76968237,"comment_id":135712618,"body_markdown":"Why not just modify java logging to log to a file instead of the console?","body":"Why not just modify java logging to log to a file instead of the console?"}],"owner":{"account_id":8776074,"reputation":8345,"user_id":6561309,"accept_rate":42,"display_name":"Richard"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692871471,"creation_date":1692871471,"question_id":76968237,"body_markdown":"I have a Spring Boot Java20 application that I have set up to run on a Linux server using AWS CodeDeploy. Everything works as expected, except when CodeDeploy runs the following command from the `deploy.sh`:\r\n\r\n    nohup java -jar -Dspring.profiles.active=uat target/pow-wow-0.0.2-SNAPSHOT.jar &amp;\r\n\r\n**Problem**\r\n\r\nIt does not create an expected `nohup.out` file.\r\n\r\nWhen I run the `deploy.sh` manually it does create the `nohup.out` file.\r\n\r\n**Question**\r\n\r\nHow do I get the `deploy.sh` to create the `nohup.out` file?\r\n\r\n**More Info**\r\n\r\nWhen CodeDeploy executes the `deploy.sh` it does so using the `root` user.  When I run it manually, I use my own user.\r\n\r\n**deploy.sh**\r\n\r\n    echo &quot;about to deploy to pow-wow ($USER) ...&quot;\r\n    export JAVA_HOME=/home/jboss/.sdkman/candidates/java/current\r\n    echo $JAVA_HOME\r\n    export PATH=$JAVA_HOME/bin:$PATH\r\n    cd /home/jboss/bitbucket/pow-wow\r\n    pwd\r\n    echo &quot;stopping pow-wow ...&quot;\r\n    echo | lsof -t -i tcp:8080\r\n    kill -9 $(lsof -t -i tcp:8080)\r\n    mv pow-wow-0.0.2-SNAPSHOT.jar target/\r\n    echo &quot;Sorting logs  ...&quot;\r\n    cd /home/jboss/bitbucket/pow-wow/logs\r\n    pwd\r\n    if [ -e nohup.out ]\r\n    then\r\n      cat nohup.out &gt;&gt; nohup-$(date --iso).out\r\n      echo &quot;archive logs to nohup-date.out and remove nohup.out&quot;\r\n      rm nohup.out\r\n    else\r\n      echo &quot;could not find /home/jboss/bitbucket/pow-wow/logs/nohup.out&quot;\r\n      ls\r\n    fi\r\n    echo &quot;starting pow-wow ...&quot;\r\n    cd /home/jboss/bitbucket/pow-wow\r\n    nohup java -jar -Dspring.profiles.active=uat target/pow-wow-0.0.2-SNAPSHOT.jar &amp;\r\n    if [ -e nohup.out ]\r\n    then\r\n      mv nohup.out logs/\r\n      echo &quot;Created /home/jboss/bitbucket/pow-wow/logs/nohup.out&quot;\r\n    else\r\n      echo &quot;Could not find nohup.out that should have been created from nohup java -jar&quot;\r\n      pwd\r\n      ls\r\n    fi\r\n    echo &quot;Run Start pow-wow.&quot;\r\n\r\n**Output**\r\n\r\n    [stdout]Could not find nohup.out that should have been created from nohup java -jar","title":"nohup not writing to nohup.out on CodeDeploy","body":"<p>I have a Spring Boot Java20 application that I have set up to run on a Linux server using AWS CodeDeploy. Everything works as expected, except when CodeDeploy runs the following command from the <code>deploy.sh</code>:</p>\n<pre><code>nohup java -jar -Dspring.profiles.active=uat target/pow-wow-0.0.2-SNAPSHOT.jar &amp;\n</code></pre>\n<p><strong>Problem</strong></p>\n<p>It does not create an expected <code>nohup.out</code> file.</p>\n<p>When I run the <code>deploy.sh</code> manually it does create the <code>nohup.out</code> file.</p>\n<p><strong>Question</strong></p>\n<p>How do I get the <code>deploy.sh</code> to create the <code>nohup.out</code> file?</p>\n<p><strong>More Info</strong></p>\n<p>When CodeDeploy executes the <code>deploy.sh</code> it does so using the <code>root</code> user.  When I run it manually, I use my own user.</p>\n<p><strong>deploy.sh</strong></p>\n<pre><code>echo &quot;about to deploy to pow-wow ($USER) ...&quot;\nexport JAVA_HOME=/home/jboss/.sdkman/candidates/java/current\necho $JAVA_HOME\nexport PATH=$JAVA_HOME/bin:$PATH\ncd /home/jboss/bitbucket/pow-wow\npwd\necho &quot;stopping pow-wow ...&quot;\necho | lsof -t -i tcp:8080\nkill -9 $(lsof -t -i tcp:8080)\nmv pow-wow-0.0.2-SNAPSHOT.jar target/\necho &quot;Sorting logs  ...&quot;\ncd /home/jboss/bitbucket/pow-wow/logs\npwd\nif [ -e nohup.out ]\nthen\n  cat nohup.out &gt;&gt; nohup-$(date --iso).out\n  echo &quot;archive logs to nohup-date.out and remove nohup.out&quot;\n  rm nohup.out\nelse\n  echo &quot;could not find /home/jboss/bitbucket/pow-wow/logs/nohup.out&quot;\n  ls\nfi\necho &quot;starting pow-wow ...&quot;\ncd /home/jboss/bitbucket/pow-wow\nnohup java -jar -Dspring.profiles.active=uat target/pow-wow-0.0.2-SNAPSHOT.jar &amp;\nif [ -e nohup.out ]\nthen\n  mv nohup.out logs/\n  echo &quot;Created /home/jboss/bitbucket/pow-wow/logs/nohup.out&quot;\nelse\n  echo &quot;Could not find nohup.out that should have been created from nohup java -jar&quot;\n  pwd\n  ls\nfi\necho &quot;Run Start pow-wow.&quot;\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>[stdout]Could not find nohup.out that should have been created from nohup java -jar\n</code></pre>\n"},{"tags":["java","javafx","textarea"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1484506273,"post_id":41664796,"comment_id":70528150,"body_markdown":"If the user is pressing enter to create new lines, then those new line characters (`&quot;\\n&quot;`) will be part of what you receive from `getText()`. If the text area is just wrapping words at the physical edge of the text area, there are no line breaks (which makes sense, as it just depends on the size of the text area, not on the what the user has actually typed). Can you explain more thoroughly what is happening and why you think there are new line characters missing?","body":"If the user is pressing enter to create new lines, then those new line characters (<code>&quot;\\n&quot;</code>) will be part of what you receive from <code>getText()</code>. If the text area is just wrapping words at the physical edge of the text area, there are no line breaks (which makes sense, as it just depends on the size of the text area, not on the what the user has actually typed). Can you explain more thoroughly what is happening and why you think there are new line characters missing?"},{"owner":{"account_id":9021843,"reputation":1728,"user_id":6722667,"display_name":"Bo Halim"},"score":0,"creation_date":1484507437,"post_id":41664796,"comment_id":70528588,"body_markdown":"Where you put this extracted text ?","body":"Where you put this extracted text ?"},{"owner":{"display_name":"user6469344"},"score":0,"creation_date":1484511567,"post_id":41664796,"comment_id":70529909,"body_markdown":"The new line characters are missing exactly when text is moved to another line because of set wrap, but not because of user pressed enter.","body":"The new line characters are missing exactly when text is moved to another line because of set wrap, but not because of user pressed enter."},{"owner":{"display_name":"user6469344"},"score":0,"creation_date":1484511586,"post_id":41664796,"comment_id":70529915,"body_markdown":"I put extracted text into String variable.","body":"I put extracted text into String variable."},{"owner":{"display_name":"user6469344"},"score":0,"creation_date":1484512126,"post_id":41664796,"comment_id":70530098,"body_markdown":"So how can i get the number of characters in every line of the TextArea?","body":"So how can i get the number of characters in every line of the TextArea?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1484518544,"post_id":41664796,"comment_id":70531957,"body_markdown":"If the lines are simply due to wrapping, you can&#39;t. The text is just the text that the user entered (or that was set programmatically). The line breaks created by word wrapping are simply aspects of the display. If you want the displayed lines to exactly match the text data, then you should turn wrapping off, so the user is forced to break lines where they intend. It&#39;s not really clear what you are trying to do, or why.","body":"If the lines are simply due to wrapping, you can&#39;t. The text is just the text that the user entered (or that was set programmatically). The line breaks created by word wrapping are simply aspects of the display. If you want the displayed lines to exactly match the text data, then you should turn wrapping off, so the user is forced to break lines where they intend. It&#39;s not really clear what you are trying to do, or why."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1484529567,"post_id":41664796,"comment_id":70534482,"body_markdown":"But to answer the question in the previous comment, the lengths of the actual lines of text entered by the user (i.e. not due to wrapping) is given by `List&lt;Integer&gt; lineLengths = Stream.of(textArea.getText().split(&quot;\\n&quot;)).map(String::length).collect(Collectors.toList());`","body":"But to answer the question in the previous comment, the lengths of the actual lines of text entered by the user (i.e. not due to wrapping) is given by <code>List&lt;Integer&gt; lineLengths = Stream.of(textArea.getText().split(&quot;\\n&quot;)).map(String::length&zwnj;&#8203;).collect(Collectors&zwnj;&#8203;.toList());</code>"},{"owner":{"display_name":"user6469344"},"score":0,"creation_date":1484547646,"post_id":41664796,"comment_id":70538691,"body_markdown":"I`m trying to do so that user don`t have to explicitly enter line break every time he or she is typing into textarea. But I want line breaks to appear in the String extracted from textarea.","body":"I<code>m trying to do so that user don</code>t have to explicitly enter line break every time he or she is typing into textarea. But I want line breaks to appear in the String extracted from textarea."}],"answers":[{"tags":[],"owner":{"account_id":11481949,"reputation":56,"user_id":8415722,"display_name":"Pascal Msoka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507196285,"creation_date":1507196285,"answer_id":46582392,"question_id":41664796,"body_markdown":"Use the **.replaceAll** like this,\r\n\r\n    //replace the line breaks &quot;\\n&quot; with System line separator...\r\n    //replace &quot;yourTextAreaVariabe&quot; with your own...\r\n    yourTextAreaVariable.getText().replaceAll(&quot;\\n&quot;, System.getProperty(&quot;line.separator&quot;));","title":"How to get text from TextArea in JavaFX saving line breaks?","body":"<p>Use the <strong>.replaceAll</strong> like this,</p>\n\n<pre><code>//replace the line breaks \"\\n\" with System line separator...\n//replace \"yourTextAreaVariabe\" with your own...\nyourTextAreaVariable.getText().replaceAll(\"\\n\", System.getProperty(\"line.separator\"));\n</code></pre>\n"}],"owner":{"display_name":"user6469344"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8528,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1692871450,"creation_date":1484505427,"question_id":41664796,"body_markdown":"I have a TextArea and a few lines of text in it. When I extract String by getText() method what I`m getting is a line of text instead of really written few lines. So what can I do to distinguishevery line in TextArea?","title":"How to get text from TextArea in JavaFX saving line breaks?","body":"<p>I have a TextArea and a few lines of text in it. When I extract String by getText() method what I`m getting is a line of text instead of really written few lines. So what can I do to distinguishevery line in TextArea?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":37482,"reputation":33416,"user_id":107152,"accept_rate":87,"display_name":"Qtax"},"score":2,"creation_date":1384525716,"post_id":20003320,"comment_id":29783164,"body_markdown":"You could use: `(\\d+)K`","body":"You could use: <code>(\\d+)K</code>"}],"answers":[{"tags":[],"owner":{"account_id":155533,"reputation":90025,"user_id":372239,"accept_rate":80,"display_name":"Toto"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1384525714,"creation_date":1384525714,"answer_id":20003347,"question_id":20003320,"body_markdown":"I&#39;d use something like this:\r\n\r\n    \\d+K\r\nIf you want to capture the digits:\r\n\r\n    (\\d+)K","title":"How to match any digits in front of a certain character?","body":"<p>I'd use something like this:</p>\n\n<pre><code>\\d+K\n</code></pre>\n\n<p>If you want to capture the digits:</p>\n\n<pre><code>(\\d+)K\n</code></pre>\n"},{"tags":[],"owner":{"account_id":262968,"reputation":767110,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1384525797,"creation_date":1384525797,"answer_id":20003374,"question_id":20003320,"body_markdown":"&gt; `I&#39;d like to match all digits that are in front of the character K and extract that value.`\r\n\r\nYou should use:\r\n\r\n    \\d+(?=K)\r\n\r\n`(?=K)` is positive lookahead that makes sure that digits are followed by `K`","title":"How to match any digits in front of a certain character?","body":"<blockquote>\n  <p><code>I'd like to match all digits that are in front of the character K and extract that value.</code></p>\n</blockquote>\n\n<p>You should use:</p>\n\n<pre><code>\\d+(?=K)\n</code></pre>\n\n<p><code>(?=K)</code> is positive lookahead that makes sure that digits are followed by <code>K</code></p>\n"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":20003374,"answer_count":2,"score":1,"last_activity_date":1692871357,"creation_date":1384525662,"question_id":20003320,"body_markdown":"I&#39;d like to match all digits that are in front of the character `K` and extract that value.\r\n\r\nIn the example `CARRY18K` it would match the `18`.\r\n\r\nProbably I can only achive this with regex, but how?\r\nIs `\\d+K` the right expression here?","title":"How to match any digits in front of a certain character?","body":"<p>I'd like to match all digits that are in front of the character <code>K</code> and extract that value.</p>\n\n<p>In the example <code>CARRY18K</code> it would match the <code>18</code>.</p>\n\n<p>Probably I can only achive this with regex, but how?\nIs <code>\\d+K</code> the right expression here?</p>\n"},{"tags":["java","regex"],"answers":[{"tags":[],"owner":{"account_id":3526709,"reputation":16307,"user_id":2947592,"accept_rate":71,"display_name":"wvdz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1384293851,"creation_date":1384293851,"answer_id":19940876,"question_id":19940573,"body_markdown":"This will never give more than one result because of the .* which eats every character that is preceded by the closing tag.\r\n\r\ngroupCount() doesn&#39;t return the number of matches, but the _number of capturing groups_. Also explained here: https://stackoverflow.com/a/2989061/2947592","title":"Matcher groupCount() and find() do not add up","body":"<p>This will never give more than one result because of the .* which eats every character that is preceded by the closing tag.</p>\n\n<p>groupCount() doesn't return the number of matches, but the <em>number of capturing groups</em>. Also explained here: <a href=\"https://stackoverflow.com/a/2989061/2947592\">https://stackoverflow.com/a/2989061/2947592</a></p>\n"},{"tags":[],"owner":{"account_id":2008878,"reputation":15778,"user_id":1797912,"accept_rate":60,"display_name":"Chriki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1384294560,"creation_date":1384294560,"answer_id":19941075,"question_id":19940573,"body_markdown":"In general, your code works for me, at least for this test call:\r\n\r\n    addBlocks(&quot;foo bar \\\\begin{vers}bla\\\\end{vers}foo bar baz \\\\begin{refr}bla2\\\\end{refr} bla&quot;);\r\n\r\nHowever, your regular expression will call `addBlock()` at most once because of the greedy `*` quantifier. You might rather want to use the `*?` quantifier:\r\n\r\n    Pattern p = Pattern.compile(&quot;\\\\\\\\begin\\\\{(vers|refr|block)\\\\}.*?\\\\\\\\end\\\\{(vers|refr|block)\\\\}&quot;);\r\n\r\nWith the `*?` quantifier you’ll get two matches for the above test call.\r\n\r\nIf there is no match on some input, then `m.find()` will correctly return `false` and `m.group()` will not be called (and thus won’t throw any `IllegalStateException`). Independent of the input string, `m.groupCount()` will always be 2 for your particular regular expression, as there are 2 capturing groups *in the pattern*.","title":"Matcher groupCount() and find() do not add up","body":"<p>In general, your code works for me, at least for this test call:</p>\n\n<pre><code>addBlocks(\"foo bar \\\\begin{vers}bla\\\\end{vers}foo bar baz \\\\begin{refr}bla2\\\\end{refr} bla\");\n</code></pre>\n\n<p>However, your regular expression will call <code>addBlock()</code> at most once because of the greedy <code>*</code> quantifier. You might rather want to use the <code>*?</code> quantifier:</p>\n\n<pre><code>Pattern p = Pattern.compile(\"\\\\\\\\begin\\\\{(vers|refr|block)\\\\}.*?\\\\\\\\end\\\\{(vers|refr|block)\\\\}\");\n</code></pre>\n\n<p>With the <code>*?</code> quantifier you’ll get two matches for the above test call.</p>\n\n<p>If there is no match on some input, then <code>m.find()</code> will correctly return <code>false</code> and <code>m.group()</code> will not be called (and thus won’t throw any <code>IllegalStateException</code>). Independent of the input string, <code>m.groupCount()</code> will always be 2 for your particular regular expression, as there are 2 capturing groups <em>in the pattern</em>.</p>\n"}],"owner":{"account_id":3416066,"reputation":117,"user_id":2871949,"display_name":"Gustaphe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1135,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":19941075,"answer_count":2,"score":0,"last_activity_date":1692871350,"creation_date":1384292827,"question_id":19940573,"body_markdown":"I want to split an input string into blocks starting with `\\begin{&lt;word&gt;}` and ending with `\\end{&lt;word&gt;}` where &amp;lt;word&amp;gt; can be &quot;block&quot;, &quot;vers&quot; or &quot;refr&quot; and do addBlock() on each block. When trying this method on a string containing two of these blocks, `m.groupCount()` correctly returns 2, but `m.find()` returns false. How can this be? `m.group()` throws an exception.\r\n\r\n    private void addBlocks(String in) {\r\n        Pattern p = Pattern.compile(&quot;\\\\\\\\begin\\\\{(vers|refr|block)\\\\}.*\\\\\\\\end\\\\{(vers|refr|block)\\\\}&quot;);\r\n        Matcher m = p.matcher(in);\r\n        while (m.find()) {\r\n            addBlock(m.group());\r\n        }\r\n    }\r\n\r\nEdit:\r\nYep, there were several things wrong there. Regex is a pain in the ass, it isn&#39;t very intuitive, and there is not that much sensible help online. Here is the code that finally worked:\r\n\r\n    private void addBlocks(String in) {\r\n        Pattern p = Pattern.compile(&quot;\\\\\\\\begin\\{(block|vers|refr)\\\\}(.|$)*?\\\\\\\\end\\\\{(block|vers|refr)\\\\}&quot;, Pattern.DOTALL);\r\n        Matcher m = p.matcher(in);\r\n        while (m.find()) {\r\n             addBlock(m.group());\r\n        }\r\n    }","title":"Matcher groupCount() and find() do not add up","body":"<p>I want to split an input string into blocks starting with <code>\\begin{&lt;word&gt;}</code> and ending with <code>\\end{&lt;word&gt;}</code> where &lt;word&gt; can be \"block\", \"vers\" or \"refr\" and do addBlock() on each block. When trying this method on a string containing two of these blocks, <code>m.groupCount()</code> correctly returns 2, but <code>m.find()</code> returns false. How can this be? <code>m.group()</code> throws an exception.</p>\n\n<pre><code>private void addBlocks(String in) {\n    Pattern p = Pattern.compile(\"\\\\\\\\begin\\\\{(vers|refr|block)\\\\}.*\\\\\\\\end\\\\{(vers|refr|block)\\\\}\");\n    Matcher m = p.matcher(in);\n    while (m.find()) {\n        addBlock(m.group());\n    }\n}\n</code></pre>\n\n<p>Edit:\nYep, there were several things wrong there. Regex is a pain in the ass, it isn't very intuitive, and there is not that much sensible help online. Here is the code that finally worked:</p>\n\n<pre><code>private void addBlocks(String in) {\n    Pattern p = Pattern.compile(\"\\\\\\\\begin\\{(block|vers|refr)\\\\}(.|$)*?\\\\\\\\end\\\\{(block|vers|refr)\\\\}\", Pattern.DOTALL);\n    Matcher m = p.matcher(in);\n    while (m.find()) {\n         addBlock(m.group());\n    }\n}\n</code></pre>\n"},{"tags":["java","regex","string"],"comments":[{"owner":{"account_id":3490280,"reputation":5883,"user_id":2920151,"display_name":"pobrelkey"},"score":0,"creation_date":1383763426,"post_id":19820121,"comment_id":29469494,"body_markdown":"Does the first group have to be optional?","body":"Does the first group have to be optional?"}],"answers":[{"tags":[],"owner":{"account_id":262968,"reputation":767110,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1383763391,"creation_date":1383763391,"answer_id":19820163,"question_id":19820121,"body_markdown":"You can add negative lookahead like this:\r\n\r\n    (?!^\\\\d+$)","title":"Regular Expression too general","body":"<p>You can add negative lookahead like this:</p>\n\n<pre><code>(?!^\\\\d+$)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":205662,"reputation":189572,"user_id":454533,"accept_rate":74,"display_name":"Explosion Pills"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1383763411,"creation_date":1383763411,"answer_id":19820167,"question_id":19820121,"body_markdown":"The `?` and `*` parts are optional, so the only required part of the regex is\r\n\r\n    \\d{3,6}\\w{1,4}\r\n\r\n`\\w` includes digits, so it passes because 2001 is 3 `\\d` and 1 `\\w`.","title":"Regular Expression too general","body":"<p>The <code>?</code> and <code>*</code> parts are optional, so the only required part of the regex is</p>\n\n<pre><code>\\d{3,6}\\w{1,4}\n</code></pre>\n\n<p><code>\\w</code> includes digits, so it passes because 2001 is 3 <code>\\d</code> and 1 <code>\\w</code>.</p>\n"}],"owner":{"account_id":2789385,"reputation":7148,"user_id":2399935,"accept_rate":86,"display_name":"Brian"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":19820167,"answer_count":2,"score":-1,"last_activity_date":1692871340,"creation_date":1383763215,"question_id":19820121,"body_markdown":"I have the regular expression:\r\n\r\n    &quot;(al|sf|sa|sc|nrc|nrc form|doe|doe f|lsi|doe form psd f|doe al f)?[\\\\s\\\\-\\\\.]*[\\\\d]{3,6}[\\\\s\\\\-\\\\.]*[\\\\w]{1,4}&quot;\r\n\r\nI do not want purely numeric strings such as &quot;2001&quot; to pass this test, but &quot;2001&quot; is passing for this regular expression. Why? How can I fix this?","title":"Regular Expression too general","body":"<p>I have the regular expression:</p>\n\n<pre><code>\"(al|sf|sa|sc|nrc|nrc form|doe|doe f|lsi|doe form psd f|doe al f)?[\\\\s\\\\-\\\\.]*[\\\\d]{3,6}[\\\\s\\\\-\\\\.]*[\\\\w]{1,4}\"\n</code></pre>\n\n<p>I do not want purely numeric strings such as \"2001\" to pass this test, but \"2001\" is passing for this regular expression. Why? How can I fix this?</p>\n"},{"tags":["java","smartgwt","sqldatasource"],"owner":{"account_id":19326316,"reputation":201,"user_id":14128881,"display_name":"Christopher Chua"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692871190,"creation_date":1692871190,"question_id":76968198,"body_markdown":"     &lt;field name=&quot;application_id&quot; foreignKey=&quot;Application.application_id&quot; displayField=&quot;ref_number&quot; keyField=application_id&quot;&gt;\r\n    \t\t\t\r\n    \t\t&lt;/field&gt;\r\n    \r\n    &lt;field name=&quot;ref_number&quot; length=&quot;35&quot; type=&quot;text&quot; customSQL=&quot;true&quot; foreignKey=&quot;Application.application_id&quot;&gt;\r\n   \r\n    \t\t&lt;/field&gt;\r\n    \r\n    &lt;binding operationType=&quot;fetch&quot; operationId=&quot;fetchAppl&quot;&gt;\r\n    \t\t\t&lt;selectClause&gt;$defaultSelectClause&lt;selectClause&gt;\r\n               &lt;whereClause&gt; $defaultWhereClause&lt;/whereClause&gt;\r\n    \r\n    \t\t&lt;/binding&gt;\r\n\r\nI am trying to sort with smartgwt 6.1, but I noticed that when I try to sort with the ref_number which is a customSQL (not a column in this ds.xml file), I am getting error where no data is found. When I check the sql generated by smartGWT 6.1, I can see that the ref_number is not included in the query, I have tried to use orderClause, but it is not working as well. How can I do so\r\n","title":"Sorting a customSQL column in smartGWT","body":"<pre><code> &lt;field name=&quot;application_id&quot; foreignKey=&quot;Application.application_id&quot; displayField=&quot;ref_number&quot; keyField=application_id&quot;&gt;\n            \n        &lt;/field&gt;\n\n&lt;field name=&quot;ref_number&quot; length=&quot;35&quot; type=&quot;text&quot; customSQL=&quot;true&quot; foreignKey=&quot;Application.application_id&quot;&gt;\n\n        &lt;/field&gt;\n\n&lt;binding operationType=&quot;fetch&quot; operationId=&quot;fetchAppl&quot;&gt;\n            &lt;selectClause&gt;$defaultSelectClause&lt;selectClause&gt;\n           &lt;whereClause&gt; $defaultWhereClause&lt;/whereClause&gt;\n\n        &lt;/binding&gt;\n</code></pre>\n<p>I am trying to sort with smartgwt 6.1, but I noticed that when I try to sort with the ref_number which is a customSQL (not a column in this ds.xml file), I am getting error where no data is found. When I check the sql generated by smartGWT 6.1, I can see that the ref_number is not included in the query, I have tried to use orderClause, but it is not working as well. How can I do so</p>\n"},{"tags":["java","selenium-webdriver","ssl-certificate"],"comments":[{"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1692871242,"post_id":76968178,"comment_id":135683937,"body_markdown":"You can use default browser profile to launch browser where the certificate is already selected, so it won&#39;t ask each time you open the browser.","body":"You can use default browser profile to launch browser where the certificate is already selected, so it won&#39;t ask each time you open the browser."},{"owner":{"account_id":26682848,"reputation":3533,"user_id":20292589,"display_name":"Yaroslavm"},"score":0,"creation_date":1692873320,"post_id":76968178,"comment_id":135684339,"body_markdown":"Does https://stackoverflow.com/questions/24507078/how-to-deal-with-certificates-using-selenium this answer your question?","body":"Does <a href=\"https://stackoverflow.com/questions/24507078/how-to-deal-with-certificates-using-selenium\" title=\"how to deal with certificates using selenium\">stackoverflow.com/questions/24507078/&hellip;</a> this answer your question?"}],"owner":{"account_id":12706527,"reputation":999,"user_id":9231614,"display_name":"kris82pl"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692871026,"creation_date":1692871026,"question_id":76968178,"body_markdown":"I have skip certificate method:\r\n\r\n    private void skipCertificateSelection() throws AWTException, InterruptedException {\r\n        LOGGER.info(&quot;Timeout (5s) before closing certificate popup...&quot;);\r\n        Thread.sleep(5000);\r\n        Robot robot = new Robot();\r\n        robot.keyPress(KeyEvent.VK_ENTER);\r\n        robot.keyRelease(KeyEvent.VK_ENTER);\r\n    }\r\n\r\nIt used to work but now certificate selection pop up is displayed while executing \r\n\r\n        driver.get(url);\r\n\r\nso I&#39;m not able to skip it.\r\n\r\nHow to handle skipping certificate while opening page from URL ?","title":"How to skip certificate selection while opening URL","body":"<p>I have skip certificate method:</p>\n<pre><code>private void skipCertificateSelection() throws AWTException, InterruptedException {\n    LOGGER.info(&quot;Timeout (5s) before closing certificate popup...&quot;);\n    Thread.sleep(5000);\n    Robot robot = new Robot();\n    robot.keyPress(KeyEvent.VK_ENTER);\n    robot.keyRelease(KeyEvent.VK_ENTER);\n}\n</code></pre>\n<p>It used to work but now certificate selection pop up is displayed while executing</p>\n<pre><code>    driver.get(url);\n</code></pre>\n<p>so I'm not able to skip it.</p>\n<p>How to handle skipping certificate while opening page from URL ?</p>\n"},{"tags":["java","spring","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":20066694,"reputation":86,"user_id":14712267,"display_name":"Interact"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692870946,"creation_date":1692870946,"answer_id":76968165,"question_id":71143429,"body_markdown":"Just a follow-up post with a possible solution I came up with in the end.\r\n\r\nI used custom JPA repositories described [here][1]. For example, the base repository is UserRepository, the custom is UserRepositoryCustom and the corresponding class implementing it is UserRepositoryCustomImpl. The queries are defined in the following style:\r\n\r\n    select * from users u order by u.firstname collate _COLLATION_\r\n\r\nUserRepositoryCustomImpl, apart from implementing the UserRepositoryCustom interface, extends an AbstractCustomImpl class where the _COLLATION_ placeholder replacement happens. In this way, any other repositories that need collations can implement this abstract class as well.\r\n\r\n    public abstract class AbstractCustomImpl {\r\n\r\n        @PersistenceContext\r\n        private EntityManager entityManager;\r\n\r\n        @Value( &quot;${...}&quot; )\r\n        private String defaultCollation;\r\n\r\n        @Value( &quot;${...}&quot; )\r\n        private String hungarianCollation;\r\n\r\n        private static final String COLLATION_REGEX = &quot;_COLLATION_&quot;;\r\n        private static final String HUNGARIAN_LANGUAGE_CODE = &quot;hu&quot;;\r\n\r\n        public Query createCollatedQueryFromQueryString(String queryString, Locale locale, Class&lt;?&gt; resultClass){\r\n            queryString = replaceTokensWithCollationString(queryString, locale);\r\n            return entityManager.createNativeQuery(queryString, resultClass);\r\n        }\r\n\r\n        private String replaceTokensWithCollationString(String queryString, Locale locale){\r\n            if(Objects.equals(locale.getLanguage().toLowerCase(), HUNGARIAN_LANGUAGE_CODE)){\r\n                return queryString.replace(COLLATION_REGEX, hungarianCollation);\r\n            } else {\r\n                return queryString.replace(COLLATION_REGEX, defaultCollation);\r\n            }\r\n        }\r\n    }\r\n\r\nThen, in UserRepositoryCustomImpl, make use of the createCollatedQueryFromQueryString method.\r\n\r\n        @Override\r\n        public List&lt;User&gt; findAllByOrderByLastnameAscFirstnameAsc(..., Locale locale) {\r\n            Query query = createCollatedQueryFromQueryString(FIND_BY_QUERY, locale, *.class);\r\n            return query.getResultList();\r\n        }\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.custom-implementations","title":"Adding COLLATE to Spring Data JPA Query","body":"<p>Just a follow-up post with a possible solution I came up with in the end.</p>\n<p>I used custom JPA repositories described <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.custom-implementations\" rel=\"nofollow noreferrer\">here</a>. For example, the base repository is UserRepository, the custom is UserRepositoryCustom and the corresponding class implementing it is UserRepositoryCustomImpl. The queries are defined in the following style:</p>\n<pre><code>select * from users u order by u.firstname collate _COLLATION_\n</code></pre>\n<p>UserRepositoryCustomImpl, apart from implementing the UserRepositoryCustom interface, extends an AbstractCustomImpl class where the <em>COLLATION</em> placeholder replacement happens. In this way, any other repositories that need collations can implement this abstract class as well.</p>\n<pre><code>public abstract class AbstractCustomImpl {\n\n    @PersistenceContext\n    private EntityManager entityManager;\n\n    @Value( &quot;${...}&quot; )\n    private String defaultCollation;\n\n    @Value( &quot;${...}&quot; )\n    private String hungarianCollation;\n\n    private static final String COLLATION_REGEX = &quot;_COLLATION_&quot;;\n    private static final String HUNGARIAN_LANGUAGE_CODE = &quot;hu&quot;;\n\n    public Query createCollatedQueryFromQueryString(String queryString, Locale locale, Class&lt;?&gt; resultClass){\n        queryString = replaceTokensWithCollationString(queryString, locale);\n        return entityManager.createNativeQuery(queryString, resultClass);\n    }\n\n    private String replaceTokensWithCollationString(String queryString, Locale locale){\n        if(Objects.equals(locale.getLanguage().toLowerCase(), HUNGARIAN_LANGUAGE_CODE)){\n            return queryString.replace(COLLATION_REGEX, hungarianCollation);\n        } else {\n            return queryString.replace(COLLATION_REGEX, defaultCollation);\n        }\n    }\n}\n</code></pre>\n<p>Then, in UserRepositoryCustomImpl, make use of the createCollatedQueryFromQueryString method.</p>\n<pre><code>    @Override\n    public List&lt;User&gt; findAllByOrderByLastnameAscFirstnameAsc(..., Locale locale) {\n        Query query = createCollatedQueryFromQueryString(FIND_BY_QUERY, locale, *.class);\n        return query.getResultList();\n    }\n</code></pre>\n"}],"owner":{"account_id":20066694,"reputation":86,"user_id":14712267,"display_name":"Interact"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1388,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1692870946,"creation_date":1645020667,"question_id":71143429,"body_markdown":"I have a simple JPA Repository with both derived and native queries. Now, I have to (or at least I want to) specify collation for a given query, something like:\r\n```\r\npublic interface UserRepository extends JpaRepository&lt;User, Long&gt; {\r\n\r\n    @Query(value = &quot;select * from users u order by u.firstname collate :language&quot;, nativeQuery = true)\r\n    List&lt;User&gt; findAllUsersCollate(@Param(&quot;language&quot;) String language);\r\n\r\n}\r\n```\r\nAs far as I&#39;m concerned, derived queries do not support collations.\r\n\r\nThe problem arises when I try to use parameters to specify the collation name. Using hard-coded collations\r\n\r\n```\r\n@Query(value = &quot;select * from users u order by u.firstname collate hun&quot;, nativeQuery = true)\r\n```\r\n\r\nworks fine, but not suitable.\r\n\r\nNote: In the example, &#39;hun&#39; is a custom collation name with hu_HU locale.\r\n\r\nI think the problem is with parameter substitution. Is there a way to specify collation for a given query using one of [Spring Data JPA Query Methods][1]? If not, how can I create a query that accepts a collation parameter and translates into a valid SQL query?\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods","title":"Adding COLLATE to Spring Data JPA Query","body":"<p>I have a simple JPA Repository with both derived and native queries. Now, I have to (or at least I want to) specify collation for a given query, something like:</p>\n<pre><code>public interface UserRepository extends JpaRepository&lt;User, Long&gt; {\n\n    @Query(value = &quot;select * from users u order by u.firstname collate :language&quot;, nativeQuery = true)\n    List&lt;User&gt; findAllUsersCollate(@Param(&quot;language&quot;) String language);\n\n}\n</code></pre>\n<p>As far as I'm concerned, derived queries do not support collations.</p>\n<p>The problem arises when I try to use parameters to specify the collation name. Using hard-coded collations</p>\n<pre><code>@Query(value = &quot;select * from users u order by u.firstname collate hun&quot;, nativeQuery = true)\n</code></pre>\n<p>works fine, but not suitable.</p>\n<p>Note: In the example, 'hun' is a custom collation name with hu_HU locale.</p>\n<p>I think the problem is with parameter substitution. Is there a way to specify collation for a given query using one of <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods\" rel=\"nofollow noreferrer\">Spring Data JPA Query Methods</a>? If not, how can I create a query that accepts a collation parameter and translates into a valid SQL query?</p>\n"},{"tags":["java","regex"],"answers":[{"tags":[],"owner":{"account_id":149843,"reputation":16106,"user_id":362634,"accept_rate":97,"display_name":"Marius Schulz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1382704498,"creation_date":1382704169,"answer_id":19589921,"question_id":19589626,"body_markdown":"I recommend you split your validation into two separate regular expressions: one for the *valid-so-far* validation and one for the final check.\r\n\r\nEven then, it&#39;s not trivial to validate that e.g. *ABC1* is valid so far. A pattern like `(\\\\w{0,3})(\\\\d{0,7})(\\\\w{0,3})` won&#39;t cut it because *X0C* would be incorrectly considered valid. I therefore recommend you don&#39;t try to solve this problem with regular expressions alone, but with some coded logic.\r\n\r\n(It is possible to squeeze all the validation logic into a single regular expression using either [lookbehinds](http://www.regular-expressions.info/lookaround.html) or [if-then-else conditionals](http://www.regular-expressions.info/conditional.html), but I suggest not to do that. It&#39;s unreadable and unmaintainable.)","title":"java regex input shorter than pattern","body":"<p>I recommend you split your validation into two separate regular expressions: one for the <em>valid-so-far</em> validation and one for the final check.</p>\n\n<p>Even then, it's not trivial to validate that e.g. <em>ABC1</em> is valid so far. A pattern like <code>(\\\\w{0,3})(\\\\d{0,7})(\\\\w{0,3})</code> won't cut it because <em>X0C</em> would be incorrectly considered valid. I therefore recommend you don't try to solve this problem with regular expressions alone, but with some coded logic.</p>\n\n<p>(It is possible to squeeze all the validation logic into a single regular expression using either <a href=\"http://www.regular-expressions.info/lookaround.html\" rel=\"nofollow\">lookbehinds</a> or <a href=\"http://www.regular-expressions.info/conditional.html\" rel=\"nofollow\">if-then-else conditionals</a>, but I suggest not to do that. It's unreadable and unmaintainable.)</p>\n"},{"tags":[],"owner":{"account_id":3295353,"reputation":4907,"user_id":2772755,"display_name":"Admit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1382707414,"creation_date":1382704254,"answer_id":19589948,"question_id":19589626,"body_markdown":"You could change the pattern to simpler one `([a-zA-Z]+)(\\d+)([a-zA-Z]+)`\r\n\r\nThen you could check how many letters was in each group:\r\n\r\n    Pattern p = Pattern.compile(&quot;([a-zA-Z]+)(\\d+)([a-zA-Z]+)&quot;);\r\n    Matcher matcher = p.matcher(&quot;ABC1234567XYZ&quot;);\r\n    if (matcher.find()) {\r\n        String firstLetters = matcher.group(1);\r\n        String digits = matcher.group(2);\r\n        String lastLetters = matcher.group(3);\r\n\r\n        //any checks here\r\n    }","title":"java regex input shorter than pattern","body":"<p>You could change the pattern to simpler one <code>([a-zA-Z]+)(\\d+)([a-zA-Z]+)</code></p>\n\n<p>Then you could check how many letters was in each group:</p>\n\n<pre><code>Pattern p = Pattern.compile(\"([a-zA-Z]+)(\\d+)([a-zA-Z]+)\");\nMatcher matcher = p.matcher(\"ABC1234567XYZ\");\nif (matcher.find()) {\n    String firstLetters = matcher.group(1);\n    String digits = matcher.group(2);\n    String lastLetters = matcher.group(3);\n\n    //any checks here\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1382705783,"creation_date":1382704440,"answer_id":19590009,"question_id":19589626,"body_markdown":"I would use a combination of &quot;once or not at all&quot; quantifier for the each following part after the first letters, and lookbehinds to validate the previous parts of the input. \r\n\r\nFor instance: \r\n\r\n    //                           |first letters (1 to 3)\r\n    //                                        | if 3 letters precede...\r\n    //                                                         | digits (1 to 7)\r\n    //                                                                   | if 7 digits precede...\r\n    //                                                                               | 3 letters\r\n    Pattern p = Pattern.compile(&quot;[a-zA-Z]{1,3}((?&lt;=[a-zA-Z]{3})\\\\d{1,7})?((?&lt;=\\\\d{7})[a-zA-Z]{3})?&quot;);\r\n    String[] inputs = {&quot;XYZ0001112CCC&quot;, &quot;A&quot;, &quot;AB&quot;, &quot;ABC&quot;, &quot;ABC12&quot;, &quot;ABC123&quot;, &quot;A1&quot;, &quot;AB2&quot;, &quot;ABCD123&quot;,&quot;ABC1234567XY1&quot;};\r\n    Matcher m;\r\n    for (String input: inputs) {\r\n    \tm = p.matcher(input);\r\n    \tSystem.out.println(&quot;Input: &quot; + input + &quot; --&gt; Matches? &quot; + m.matches());\r\n    }\r\n\r\nOutput: \r\n\r\n    Input: XYZ0001112CCC --&gt; Matches? true\r\n    Input: A --&gt; Matches? true\r\n    Input: AB --&gt; Matches? true\r\n    Input: ABC --&gt; Matches? true\r\n    Input: ABC12 --&gt; Matches? true\r\n    Input: ABC123 --&gt; Matches? true\r\n    Input: A1 --&gt; Matches? false\r\n    Input: AB2 --&gt; Matches? false\r\n    Input: ABCD123 --&gt; Matches? false\r\n    Input: ABC1234567XY1 --&gt; Matches? false\r\n\r\n**Note**\r\n\r\nI&#39;ve changed your `\\\\w` expression to character class `[a-zA-Z]` because `\\\\w` also validates digits. \r\nAlternatives to `[a-zA-Z]` are: \r\n\r\n - `\\\\p{Alpha}`\r\n - `[a-z]` with `Pattern.CASE_INSENSITIVE` flag on\r\n\r\n**Final note**\r\n\r\nMy `Pattern` takes the last letters as a 3-letter group. \r\nIf you would also accept 1 or 2 letters, you only need to change the last quantifier expression `{3}` with `{1,3}`.\r\n","title":"java regex input shorter than pattern","body":"<p>I would use a combination of \"once or not at all\" quantifier for the each following part after the first letters, and lookbehinds to validate the previous parts of the input. </p>\n\n<p>For instance: </p>\n\n<pre><code>//                           |first letters (1 to 3)\n//                                        | if 3 letters precede...\n//                                                         | digits (1 to 7)\n//                                                                   | if 7 digits precede...\n//                                                                               | 3 letters\nPattern p = Pattern.compile(\"[a-zA-Z]{1,3}((?&lt;=[a-zA-Z]{3})\\\\d{1,7})?((?&lt;=\\\\d{7})[a-zA-Z]{3})?\");\nString[] inputs = {\"XYZ0001112CCC\", \"A\", \"AB\", \"ABC\", \"ABC12\", \"ABC123\", \"A1\", \"AB2\", \"ABCD123\",\"ABC1234567XY1\"};\nMatcher m;\nfor (String input: inputs) {\n    m = p.matcher(input);\n    System.out.println(\"Input: \" + input + \" --&gt; Matches? \" + m.matches());\n}\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>Input: XYZ0001112CCC --&gt; Matches? true\nInput: A --&gt; Matches? true\nInput: AB --&gt; Matches? true\nInput: ABC --&gt; Matches? true\nInput: ABC12 --&gt; Matches? true\nInput: ABC123 --&gt; Matches? true\nInput: A1 --&gt; Matches? false\nInput: AB2 --&gt; Matches? false\nInput: ABCD123 --&gt; Matches? false\nInput: ABC1234567XY1 --&gt; Matches? false\n</code></pre>\n\n<p><strong>Note</strong></p>\n\n<p>I've changed your <code>\\\\w</code> expression to character class <code>[a-zA-Z]</code> because <code>\\\\w</code> also validates digits. \nAlternatives to <code>[a-zA-Z]</code> are: </p>\n\n<ul>\n<li><code>\\\\p{Alpha}</code></li>\n<li><code>[a-z]</code> with <code>Pattern.CASE_INSENSITIVE</code> flag on</li>\n</ul>\n\n<p><strong>Final note</strong></p>\n\n<p>My <code>Pattern</code> takes the last letters as a 3-letter group. \nIf you would also accept 1 or 2 letters, you only need to change the last quantifier expression <code>{3}</code> with <code>{1,3}</code>.</p>\n"},{"tags":[],"owner":{"account_id":310699,"reputation":3995,"user_id":623827,"accept_rate":62,"display_name":"markijbema"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1382706403,"creation_date":1382706403,"answer_id":19590735,"question_id":19589626,"body_markdown":"Since the format is rather easy, you could do something like this (I don&#39;t know the exact java syntax, but I think the idea is clear):\r\n\r\n\r\n    String input = &quot;DEF3&quot;;\r\n    String example = &quot;ABC1234567XY&quot;;\r\n    Pattern regex = Pattern.compile(&quot;(\\\\w{3})(\\\\d{7})(\\\\w{3})&quot;);\r\n    \r\n    String test_input = input + example.last_digits(example.length-input.length);\r\n    Matcher matcher = p.matcher(test_input);\r\n    return matcher.find();\r\n    \r\n\r\nThis way the only duplication you have is between the example and the regex.","title":"java regex input shorter than pattern","body":"<p>Since the format is rather easy, you could do something like this (I don't know the exact java syntax, but I think the idea is clear):</p>\n\n<pre><code>String input = \"DEF3\";\nString example = \"ABC1234567XY\";\nPattern regex = Pattern.compile(\"(\\\\w{3})(\\\\d{7})(\\\\w{3})\");\n\nString test_input = input + example.last_digits(example.length-input.length);\nMatcher matcher = p.matcher(test_input);\nreturn matcher.find();\n</code></pre>\n\n<p>This way the only duplication you have is between the example and the regex.</p>\n"}],"owner":{"account_id":221813,"reputation":4653,"user_id":480007,"accept_rate":100,"display_name":"Timu&#231;in"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":315,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":19590009,"answer_count":4,"score":1,"last_activity_date":1692870604,"creation_date":1382703329,"question_id":19589626,"body_markdown":"By using regex, I am trying to validate a user input as he types.\r\n\r\nMy pattern is this: `&quot;(\\\\w{3})(\\\\d{7})(\\\\w{3})&quot;.`\r\nA valid input can be `&quot;XYZ0001112CCC&quot;`.\r\n\r\nI want to validate it as user types. I mean `&quot;A&quot;, &quot;AB&quot;, &quot;ABC&quot;, &quot;ABC12&quot;, &quot;ABC123&quot;, ..., &quot;ABC1234567XY&quot;` should also not fail. But `&quot;A1&quot;, &quot;AB2&quot;, &quot;ABCD123&quot;, ..., &quot;ABC1234567XY1&quot;` must fail. As long as the input doesn&#39;t break the rule, I want to assume it as &quot;valid so far&quot;. Is this possible with regex?","title":"java regex input shorter than pattern","body":"<p>By using regex, I am trying to validate a user input as he types.</p>\n\n<p>My pattern is this: <code>\"(\\\\w{3})(\\\\d{7})(\\\\w{3})\".</code>\nA valid input can be <code>\"XYZ0001112CCC\"</code>.</p>\n\n<p>I want to validate it as user types. I mean <code>\"A\", \"AB\", \"ABC\", \"ABC12\", \"ABC123\", ..., \"ABC1234567XY\"</code> should also not fail. But <code>\"A1\", \"AB2\", \"ABCD123\", ..., \"ABC1234567XY1\"</code> must fail. As long as the input doesn't break the rule, I want to assume it as \"valid so far\". Is this possible with regex?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1380662789,"post_id":19126096,"comment_id":28284246,"body_markdown":"You may wish to read http://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454 before continuing.","body":"You may wish to read <a href=\"http://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454\" title=\"regex match open tags except xhtml self contained tags\">stackoverflow.com/questions/1732348/&hellip;</a> before continuing."},{"owner":{"account_id":10959,"reputation":74232,"user_id":20938,"display_name":"Alan Moore"},"score":0,"creation_date":1380664610,"post_id":19126096,"comment_id":28285000,"body_markdown":"Duplicate of http://stackoverflow.com/a/2408599/20938)  Never, ever use `(.|\\s)` in a regex.  Just specify DOTALL mode and use `.` by itself.","body":"Duplicate of <a href=\"http://stackoverflow.com/a/2408599/20938\">stackoverflow.com/a/2408599/20938</a>)  Never, ever use <code>(.|\\s)</code> in a regex.  Just specify DOTALL mode and use <code>.</code> by itself."},{"owner":{"account_id":10959,"reputation":74232,"user_id":20938,"display_name":"Alan Moore"},"score":0,"creation_date":1380665025,"post_id":19126096,"comment_id":28285186,"body_markdown":"The attribute values in your example are missing the opening quotes.  I hope that&#39;s just a typo you introduced in the question.","body":"The attribute values in your example are missing the opening quotes.  I hope that&#39;s just a typo you introduced in the question."},{"owner":{"account_id":1685442,"reputation":2743,"user_id":1548853,"accept_rate":29,"display_name":"Firas Dib"},"score":0,"creation_date":1380665053,"post_id":19126096,"comment_id":28285202,"body_markdown":"Regex is not suited to parse HTML; use a htmlparser.","body":"Regex is not suited to parse HTML; use a htmlparser."},{"owner":{"account_id":3379026,"reputation":31,"user_id":2836528,"display_name":"user2836528"},"score":0,"creation_date":1380665434,"post_id":19126096,"comment_id":28285343,"body_markdown":"@Alan ... yes the example is missing quotes and that&#39;s why the regex should not find the src and other attributes. But it hangs up.","body":"@Alan ... yes the example is missing quotes and that&#39;s why the regex should not find the src and other attributes. But it hangs up."}],"answers":[{"tags":[],"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1380666418,"creation_date":1380663231,"answer_id":19126352,"question_id":19126096,"body_markdown":"A workaround is to use a HTML parser such as [`JSoup`][1], for example\r\n\r\n    Document doc = \r\n          Jsoup.parse(&quot;&lt;html&gt;&lt;img src=\\&quot;src1\\&quot;/&gt; &lt;img src=\\&quot;src2\\&quot;/&gt;&lt;/html&gt;&quot;);\r\n    Elements elements = doc.select(&quot;img[src]&quot;);\r\n    for (Element element: elements) {\r\n    \tSystem.out.println(element.attr(&quot;src&quot;));\r\n    \tSystem.out.println(element.attr(&quot;alt&quot;));\r\n    \tSystem.out.println(element.attr(&quot;height&quot;));\r\n    \tSystem.out.println(element.attr(&quot;width&quot;));\r\n    }\r\n\r\n\r\n  [1]: http://jsoup.org/","title":"attributes pattern matcher takes a long time","body":"<p>A workaround is to use a HTML parser such as <a href=\"http://jsoup.org/\" rel=\"nofollow\"><code>JSoup</code></a>, for example</p>\n\n<pre><code>Document doc = \n      Jsoup.parse(\"&lt;html&gt;&lt;img src=\\\"src1\\\"/&gt; &lt;img src=\\\"src2\\\"/&gt;&lt;/html&gt;\");\nElements elements = doc.select(\"img[src]\");\nfor (Element element: elements) {\n    System.out.println(element.attr(\"src\"));\n    System.out.println(element.attr(\"alt\"));\n    System.out.println(element.attr(\"height\"));\n    System.out.println(element.attr(\"width\"));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1234669,"reputation":26982,"user_id":1198509,"accept_rate":53,"display_name":"Ethan Brown"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380670064,"creation_date":1380663629,"answer_id":19126447,"question_id":19126096,"body_markdown":"It looks like what you&#39;ve got is an &quot;[evil regex][1]&quot;, which is not uncommon when you try to construct a complicated regex to match one thing (src) within another thing (img).  In particular, evil regexs usually happen when you try to apply repetition to a complex subexpression, which you are doing with `(.|\\s)*?`.\r\n\r\n\r\nA better approach would be to use *two* regexes; one to match all `&lt;img&gt;` tags, and then another to match the `src` attribute within it.\r\n\r\nMy Java&#39;s rusty, so I&#39;ll just give you the pseudocode solution:\r\n\r\n    foreach( imgTag in input.match( /&lt;img .*?&gt;/ig ) ) {\r\n        src = imgTag.match( /\\bsrc *= *([&#39;\\&quot;])(.*?)\\1/i );\r\n        // if you want to get other attributes, you can do that the same way:\r\n        alt = imgTag.match( /\\balt *= *([&#39;\\&quot;])(.*?)\\1/i );\r\n        // even better, you can get all the attributes in one go:\r\n        attrs = imgTag.match( /\\b(\\w+) *= *([&#39;\\&quot;])(.*?)\\2/g );\r\n        // attrs is now an array where the first group is the attr name\r\n        // (alt, height, width, src, etc.) and the second group is the\r\n        // attr value\r\n    }\r\n\r\nNote the use of a backreference to match the appropriate type of closing quote (i.e., this will match `src=&#39;abc&#39;` and `src=&quot;abc&quot;`.  Also note that the quantifiers are lazy here (`*?` instead of just `*`); this is necessary to prevent too much from being consumed.\r\n\r\nEDIT: even though my Java&#39;s rusty, I was able to crank out an example.  Here&#39;s the solution in Java:\r\n\r\n    import java.util.regex.*;\r\n\r\n    public class Regex {\r\n\r\n        public static void main( String[] args ) {\r\n            String input = &quot;&lt;img alt=\\&quot;altText\\&quot; src=\\&quot;src\\&quot; height=\\&quot;50\\&quot; width=\\&quot;50\\&quot;/&gt; &lt;img alt=&#39;another image&#39; src=\\&quot;foo.jpg\\&quot; /&gt;&quot;;\r\n            Pattern attrPat = Pattern.compile( &quot;\\\\b(\\\\w+) *= *([&#39;\\&quot;])(.*?)\\\\2&quot; );\r\n            Matcher imgMatcher = Pattern.compile( &quot;&lt;img .*?&gt;&quot; ).matcher( input );\r\n            while( imgMatcher.find() ) {\r\n                String imgTag = imgMatcher.group();\r\n                System.out.println( imgTag );\r\n                Matcher attrMatcher = attrPat.matcher( imgTag );\r\n                while( attrMatcher.find() ) {\r\n                    String attr = attrMatcher.group(1);\r\n                    System.out.format( &quot;\\tattr: %s, value: %s\\n&quot;, attrMatcher.group(1), attrMatcher.group(3) );\r\n                }\r\n            }\r\n        }\r\n    }\r\n        \r\n\r\n  [1]: http://en.wikipedia.org/wiki/ReDoS#Evil_regexes","title":"attributes pattern matcher takes a long time","body":"<p>It looks like what you've got is an \"<a href=\"http://en.wikipedia.org/wiki/ReDoS#Evil_regexes\" rel=\"nofollow\">evil regex</a>\", which is not uncommon when you try to construct a complicated regex to match one thing (src) within another thing (img).  In particular, evil regexs usually happen when you try to apply repetition to a complex subexpression, which you are doing with <code>(.|\\s)*?</code>.</p>\n\n<p>A better approach would be to use <em>two</em> regexes; one to match all <code>&lt;img&gt;</code> tags, and then another to match the <code>src</code> attribute within it.</p>\n\n<p>My Java's rusty, so I'll just give you the pseudocode solution:</p>\n\n<pre><code>foreach( imgTag in input.match( /&lt;img .*?&gt;/ig ) ) {\n    src = imgTag.match( /\\bsrc *= *(['\\\"])(.*?)\\1/i );\n    // if you want to get other attributes, you can do that the same way:\n    alt = imgTag.match( /\\balt *= *(['\\\"])(.*?)\\1/i );\n    // even better, you can get all the attributes in one go:\n    attrs = imgTag.match( /\\b(\\w+) *= *(['\\\"])(.*?)\\2/g );\n    // attrs is now an array where the first group is the attr name\n    // (alt, height, width, src, etc.) and the second group is the\n    // attr value\n}\n</code></pre>\n\n<p>Note the use of a backreference to match the appropriate type of closing quote (i.e., this will match <code>src='abc'</code> and <code>src=\"abc\"</code>.  Also note that the quantifiers are lazy here (<code>*?</code> instead of just <code>*</code>); this is necessary to prevent too much from being consumed.</p>\n\n<p>EDIT: even though my Java's rusty, I was able to crank out an example.  Here's the solution in Java:</p>\n\n<pre><code>import java.util.regex.*;\n\npublic class Regex {\n\n    public static void main( String[] args ) {\n        String input = \"&lt;img alt=\\\"altText\\\" src=\\\"src\\\" height=\\\"50\\\" width=\\\"50\\\"/&gt; &lt;img alt='another image' src=\\\"foo.jpg\\\" /&gt;\";\n        Pattern attrPat = Pattern.compile( \"\\\\b(\\\\w+) *= *(['\\\"])(.*?)\\\\2\" );\n        Matcher imgMatcher = Pattern.compile( \"&lt;img .*?&gt;\" ).matcher( input );\n        while( imgMatcher.find() ) {\n            String imgTag = imgMatcher.group();\n            System.out.println( imgTag );\n            Matcher attrMatcher = attrPat.matcher( imgTag );\n            while( attrMatcher.find() ) {\n                String attr = attrMatcher.group(1);\n                System.out.format( \"\\tattr: %s, value: %s\\n\", attrMatcher.group(1), attrMatcher.group(3) );\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3379026,"reputation":31,"user_id":2836528,"display_name":"user2836528"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":646,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1692870600,"creation_date":1380662209,"question_id":19126096,"body_markdown":"I have a regex to get the src and the remaining attributes for all the images present in the content.\r\n\r\n    &lt;img *((.|\\s)*?) *src *= *[&#39;&quot;]([^&#39;&quot;]*)[&#39;&quot;] *((.|\\s)*?) */*&gt;\r\n\r\nIf the content I am matching against is like\r\n\r\n    &lt;img src=src1&quot;/&gt; &lt;img src=src2&quot;/&gt;\r\n\r\nthe find(index) hangs and I see the following in the thread dump\r\n\r\n    at java.util.regex.Pattern$LazyLoop.match(Pattern.java:4357)\r\n    \tat java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)\r\n    \tat java.util.regex.Pattern$BranchConn.match(Pattern.java:4078)\r\n    \tat java.util.regex.Pattern$CharProperty.match(Pattern.java:3345)\r\n    \tat java.util.regex.Pattern$Branch.match(Pattern.java:4114)\r\n    \tat java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)\r\n    \tat java.util.regex.Pattern$LazyLoop.match(Pattern.java:4357)\r\n    \tat java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)\r\n    \tat java.util.regex.Pattern$BranchConn.match(Pattern.java:4078)\r\n    \tat java.util.regex.Pattern$CharProperty.match(Pattern.java:3345)\r\n    \tat java.util.regex.Pattern$Branch.match(Pattern.java:4114)\r\n    \tat java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)\r\n    \tat java.util.regex.Pattern$LazyLoop.match(Pattern.java:4357)\r\n    \tat java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)\r\n    \tat java.util.regex.Pattern$BranchConn.match(Pattern.java:4078)\r\n    \tat java.util.regex.Pattern$CharProperty.match(Pattern.java:3345)\r\n    \tat java.util.regex.Pattern$Branch.match(Pattern.java:4114)\r\n    \tat java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)\r\n    \tat java.util.regex.Pattern$LazyLoop.match(Pattern.java:4357)\r\n    \tat java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)\r\n    \tat java.util.regex.Pattern$BranchConn.match(Pattern.java:4078)\r\n    \tat java.util.regex.Pattern$CharProperty.match(Pattern.java:3345) \r\n\r\nIs there a solution or a workaround for solving this issue?\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"attributes pattern matcher takes a long time","body":"<p>I have a regex to get the src and the remaining attributes for all the images present in the content.</p>\n\n<pre><code>&lt;img *((.|\\s)*?) *src *= *['\"]([^'\"]*)['\"] *((.|\\s)*?) */*&gt;\n</code></pre>\n\n<p>If the content I am matching against is like</p>\n\n<pre><code>&lt;img src=src1\"/&gt; &lt;img src=src2\"/&gt;\n</code></pre>\n\n<p>the find(index) hangs and I see the following in the thread dump</p>\n\n<pre><code>at java.util.regex.Pattern$LazyLoop.match(Pattern.java:4357)\n    at java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)\n    at java.util.regex.Pattern$BranchConn.match(Pattern.java:4078)\n    at java.util.regex.Pattern$CharProperty.match(Pattern.java:3345)\n    at java.util.regex.Pattern$Branch.match(Pattern.java:4114)\n    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)\n    at java.util.regex.Pattern$LazyLoop.match(Pattern.java:4357)\n    at java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)\n    at java.util.regex.Pattern$BranchConn.match(Pattern.java:4078)\n    at java.util.regex.Pattern$CharProperty.match(Pattern.java:3345)\n    at java.util.regex.Pattern$Branch.match(Pattern.java:4114)\n    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)\n    at java.util.regex.Pattern$LazyLoop.match(Pattern.java:4357)\n    at java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)\n    at java.util.regex.Pattern$BranchConn.match(Pattern.java:4078)\n    at java.util.regex.Pattern$CharProperty.match(Pattern.java:3345)\n    at java.util.regex.Pattern$Branch.match(Pattern.java:4114)\n    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)\n    at java.util.regex.Pattern$LazyLoop.match(Pattern.java:4357)\n    at java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)\n    at java.util.regex.Pattern$BranchConn.match(Pattern.java:4078)\n    at java.util.regex.Pattern$CharProperty.match(Pattern.java:3345) \n</code></pre>\n\n<p>Is there a solution or a workaround for solving this issue?</p>\n"},{"tags":["java","android","mobile","android-webview","screenshot"],"answers":[{"tags":[],"owner":{"account_id":29212915,"reputation":29,"user_id":22380473,"display_name":"Johannes Schidlowski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692870463,"creation_date":1692870463,"answer_id":76968107,"question_id":76944511,"body_markdown":"DRM content viewers may invalidate the cache beforehand capturing the screen. This is done in order to prevent capturing DRM protected material from the lowest level. Some software is more intelligent about it, but most are denying access to the view right-out.","title":"Android Java Webview: The webview screenshot function works on all content, but when it comes to videos, it will take a blank screenshot","body":"<p>DRM content viewers may invalidate the cache beforehand capturing the screen. This is done in order to prevent capturing DRM protected material from the lowest level. Some software is more intelligent about it, but most are denying access to the view right-out.</p>\n"}],"owner":{"account_id":15589705,"reputation":300,"user_id":11247153,"display_name":"Vimukthi Shohan Jayawardana"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692870463,"creation_date":1692614491,"question_id":76944511,"body_markdown":"In my Android Java app, I&#39;m trying to take a screenshot on WebView and send the image to the API for proof functionality. The current function works with all contents loaded to webview, but when it comes to video, it takes a blank screenshot or just takes the background without the video.\r\n\r\nCan someone help me figure out how to take screenshots of videos in WebView as well?\r\n\r\nCurrently, I&#39;m using the below code to take screenshots.\r\n\r\n\r\n```\r\npublic void takeScreenshot() {\r\n        String fileName = generateScreenshotFilename();\r\n        try {\r\n            // wait for the view to be fully drawn\r\n            Thread.sleep(500);\r\n\r\n            // create bitmap screen capture\r\n            View v1 = this.activity.getWindow().getDecorView().getRootView();\r\n            Bitmap bitmap = Bitmap.createBitmap(\r\n                    v1.getWidth(), v1.getHeight(), Bitmap.Config.ARGB_8888\r\n            );\r\n            Canvas canvas = new Canvas(bitmap);\r\n            v1.draw(canvas);\r\n\r\n            // Start of API call\r\n            OkHttpClient client = new OkHttpClient();\r\n            MultipartBody.Builder requestBodyBuilder = new MultipartBody.Builder()\r\n                    .setType(MultipartBody.FORM);\r\n            String macAddress = Constants.getMacAddress(this.activity);\r\n\r\n            if (bitmap != null) {\r\n                ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\r\n                bitmap.compress(Bitmap.CompressFormat.PNG, 100, byteArrayOutputStream);\r\n                byte[] byteArray = byteArrayOutputStream.toByteArray();\r\n\r\n                requestBodyBuilder.addFormDataPart(&quot;image&quot;, fileName,\r\n                        RequestBody.create(byteArray, MEDIA_TYPE_PNG));\r\n            }\r\n\r\n            Request request = new Request.Builder()\r\n                    .url(Constants.API_URL + &quot;/capture/upload/snap/&quot; + macAddress)\r\n                    .post(requestBodyBuilder.build())\r\n                    .build();\r\n\r\n            if (duplicatedScreenshotCall) {\r\n                return;\r\n            }\r\n\r\n            duplicatedScreenshotCall = true;\r\n            SendScreenshotAPI sendScreenshotAPI = new SendScreenshotAPI(client, request);\r\n            sendScreenshotAPI.execute();\r\n\r\n            // Check if the looper is already prepared for this thread\r\n            if (Looper.myLooper() == null) {\r\n                // Prepare the looper for the background thread\r\n                Looper.prepare();\r\n            }\r\n            new Handler().postDelayed(() -&gt; duplicatedScreenshotCall = false, Constants.DOUBLE_PRESS_INTERVAL);\r\n            // Start the message loop for the background thread if it wasn&#39;t prepared before\r\n            if (Looper.myLooper() == null) {\r\n                Looper.loop();\r\n            }\r\n        } catch (Throwable e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```\r\n\r\nI have used the below code as well, and it also results in the above code. The above code is more reliable because of the Android API 28 `view.getDrawingCache()` has been deprecated.\r\n\r\n```\r\nView v1 = this.activity.getWindow().getDecorView().getRootView();\r\nv1.setDrawingCacheEnabled(true);\r\nBitmap bitmap = Bitmap.createBitmap(v1.getDrawingCache());\r\nv1.setDrawingCacheEnabled(false);\r\n```\r\n","title":"Android Java Webview: The webview screenshot function works on all content, but when it comes to videos, it will take a blank screenshot","body":"<p>In my Android Java app, I'm trying to take a screenshot on WebView and send the image to the API for proof functionality. The current function works with all contents loaded to webview, but when it comes to video, it takes a blank screenshot or just takes the background without the video.</p>\n<p>Can someone help me figure out how to take screenshots of videos in WebView as well?</p>\n<p>Currently, I'm using the below code to take screenshots.</p>\n<pre><code>public void takeScreenshot() {\n        String fileName = generateScreenshotFilename();\n        try {\n            // wait for the view to be fully drawn\n            Thread.sleep(500);\n\n            // create bitmap screen capture\n            View v1 = this.activity.getWindow().getDecorView().getRootView();\n            Bitmap bitmap = Bitmap.createBitmap(\n                    v1.getWidth(), v1.getHeight(), Bitmap.Config.ARGB_8888\n            );\n            Canvas canvas = new Canvas(bitmap);\n            v1.draw(canvas);\n\n            // Start of API call\n            OkHttpClient client = new OkHttpClient();\n            MultipartBody.Builder requestBodyBuilder = new MultipartBody.Builder()\n                    .setType(MultipartBody.FORM);\n            String macAddress = Constants.getMacAddress(this.activity);\n\n            if (bitmap != null) {\n                ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n                bitmap.compress(Bitmap.CompressFormat.PNG, 100, byteArrayOutputStream);\n                byte[] byteArray = byteArrayOutputStream.toByteArray();\n\n                requestBodyBuilder.addFormDataPart(&quot;image&quot;, fileName,\n                        RequestBody.create(byteArray, MEDIA_TYPE_PNG));\n            }\n\n            Request request = new Request.Builder()\n                    .url(Constants.API_URL + &quot;/capture/upload/snap/&quot; + macAddress)\n                    .post(requestBodyBuilder.build())\n                    .build();\n\n            if (duplicatedScreenshotCall) {\n                return;\n            }\n\n            duplicatedScreenshotCall = true;\n            SendScreenshotAPI sendScreenshotAPI = new SendScreenshotAPI(client, request);\n            sendScreenshotAPI.execute();\n\n            // Check if the looper is already prepared for this thread\n            if (Looper.myLooper() == null) {\n                // Prepare the looper for the background thread\n                Looper.prepare();\n            }\n            new Handler().postDelayed(() -&gt; duplicatedScreenshotCall = false, Constants.DOUBLE_PRESS_INTERVAL);\n            // Start the message loop for the background thread if it wasn't prepared before\n            if (Looper.myLooper() == null) {\n                Looper.loop();\n            }\n        } catch (Throwable e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>I have used the below code as well, and it also results in the above code. The above code is more reliable because of the Android API 28 <code>view.getDrawingCache()</code> has been deprecated.</p>\n<pre><code>View v1 = this.activity.getWindow().getDecorView().getRootView();\nv1.setDrawingCacheEnabled(true);\nBitmap bitmap = Bitmap.createBitmap(v1.getDrawingCache());\nv1.setDrawingCacheEnabled(false);\n</code></pre>\n"},{"tags":["java","gradle","quarkus"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1692875157,"post_id":76967933,"comment_id":135684699,"body_markdown":"What does your `build.gradle` look like?","body":"What does your <code>build.gradle</code> look like?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1692877607,"post_id":76967933,"comment_id":135685193,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":8522579,"reputation":1,"user_id":22440162,"display_name":"gaurav sharma"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692869014,"creation_date":1692869014,"question_id":76967933,"body_markdown":"Execution failed for task &#39;:quarkusGenerateCode&#39;.\r\n&gt; Could not resolve all dependencies for configuration &#39;:quarkusDependency&#39;.\r\n   &gt; Could not resolve io.quarkus.platform:quarkus-bom:2.7.2.Final.\r\n     Required by:\r\n         project :\r\n      &gt; Cannot find a version of &#39;io.quarkus.platform:quarkus-bom&#39; that satisfies the version constraints:\r\n\r\nBuild successful expected","title":"Cannot find a version of &#39;io.quarkus.platform:quarkus-bom&#39; that satisfies the version constraints ,getting this error when i use my custom package","body":"<p>Execution failed for task ':quarkusGenerateCode'.</p>\n<blockquote>\n<p>Could not resolve all dependencies for configuration ':quarkusDependency'.\nCould not resolve io.quarkus.platform:quarkus-bom:2.7.2.Final.\nRequired by:\nproject :\n&gt; Cannot find a version of 'io.quarkus.platform:quarkus-bom' that satisfies the version constraints:</p>\n</blockquote>\n<p>Build successful expected</p>\n"},{"tags":["java","spring-boot","cookies","spring-webflux"],"comments":[{"owner":{"account_id":9419109,"reputation":675,"user_id":7005973,"accept_rate":0,"display_name":"Dil1y_reddy"},"score":2,"creation_date":1557311763,"post_id":56037851,"comment_id":98719692,"body_markdown":"use `exchange` method instead `retrieve` to consume web service response, so you can get access to `clientResponse` object from which you can access `cookies`. It is never advisable to block the reactive call.","body":"use <code>exchange</code> method instead <code>retrieve</code> to consume web service response, so you can get access to <code>clientResponse</code> object from which you can access <code>cookies</code>. It is never advisable to block the reactive call."}],"answers":[{"tags":[],"owner":{"account_id":3575276,"reputation":2943,"user_id":2984693,"display_name":"Xarvalus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692868618,"creation_date":1557522826,"answer_id":56084907,"question_id":56037851,"body_markdown":"You can access the response&#39;s cookies via consuming the response:\r\n\r\n    final String cookieName = &quot;cookie_name&quot;;\r\n        \r\n    // Retrieves cookie from WebClient\r\n    ResponseCookie cookie = webClient.post()\r\n            .uri(PWD_AUTH_URI)\r\n            .contentType(MediaType.APPLICATION_JSON)\r\n            .syncBody(request)\r\n            .exchange()\r\n            .map(response -&gt; response.cookies().getFirst(cookieName))\r\n            .block();\r\n\r\n    // Set ResponseCookie as new cookie for response\r\n    res.addCookie(new Cookie(cookieName, cookie.getValue()));\r\n\r\nAs [akreddy.21](https://stackoverflow.com/users/7005973/akreddy-21) suggested in his comment. \r\n\r\nUpdate: For more recent versions of WebClient, use:\r\n\r\n            .exchangeToMono { response -&gt;\r\n                Mono.just(response.cookies().getFirst(cookieName))\r\n            }\r\n\r\ninstead of the calls to `exchange().map()` above.","title":"Get cookie from after calling a POST end point","body":"<p>You can access the response's cookies via consuming the response:</p>\n<pre><code>final String cookieName = &quot;cookie_name&quot;;\n    \n// Retrieves cookie from WebClient\nResponseCookie cookie = webClient.post()\n        .uri(PWD_AUTH_URI)\n        .contentType(MediaType.APPLICATION_JSON)\n        .syncBody(request)\n        .exchange()\n        .map(response -&gt; response.cookies().getFirst(cookieName))\n        .block();\n\n// Set ResponseCookie as new cookie for response\nres.addCookie(new Cookie(cookieName, cookie.getValue()));\n</code></pre>\n<p>As <a href=\"https://stackoverflow.com/users/7005973/akreddy-21\">akreddy.21</a> suggested in his comment.</p>\n<p>Update: For more recent versions of WebClient, use:</p>\n<pre><code>        .exchangeToMono { response -&gt;\n            Mono.just(response.cookies().getFirst(cookieName))\n        }\n</code></pre>\n<p>instead of the calls to <code>exchange().map()</code> above.</p>\n"}],"owner":{"account_id":9892245,"reputation":95,"user_id":7324873,"display_name":"Bal Vikash Sharma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5639,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692868618,"creation_date":1557308847,"question_id":56037851,"body_markdown":"I am calling a POST end point from my controller. The POST end point validate the user and return a cookie. I am new to the Spring web-flux so, need to get the cookie and send it back.\r\n\r\n    @PostMapping(value = &quot;/valid&quot;)\r\n    public ResponseWrapper&lt;UserResponseDTO&gt; validate(\r\n\t    @RequestBody @Valid RequestWrapper&lt;UserRequestDTO&gt; request,\r\n\t    HttpServletResponse res) {\r\n\r\n\tWebClient webClient = WebClient.builder()\r\n\t\t.baseUrl(BASE_URI)\r\n\t\t.defaultHeader(HttpHeaders.CONTENT_TYPE,\r\n\t\t\tMediaType.APPLICATION_JSON_VALUE)\r\n\t\t.build();\r\n\r\n\tMono&lt;ResponseWrapper&gt; response = webClient.post()\r\n\t\t.uri(PWD_AUTH_URI)\r\n\t\t.contentType(MediaType.APPLICATION_JSON)\r\n\t\t.syncBody(request)\r\n\t\t.retrieve()\r\n\t\t.bodyToMono(ResponseWrapper.class);\r\n\r\n\tResponseWrapper&lt;UserResponseDTO&gt; wr = response.block();\r\n        // how to get cookie from the webClient \r\n        // set into the &quot;res&quot; that cookie \r\n\r\n\treturn wr;\r\n    }","title":"Get cookie from after calling a POST end point","body":"<p>I am calling a POST end point from my controller. The POST end point validate the user and return a cookie. I am new to the Spring web-flux so, need to get the cookie and send it back.</p>\n\n<pre><code>@PostMapping(value = \"/valid\")\npublic ResponseWrapper&lt;UserResponseDTO&gt; validate(\n    @RequestBody @Valid RequestWrapper&lt;UserRequestDTO&gt; request,\n    HttpServletResponse res) {\n\nWebClient webClient = WebClient.builder()\n    .baseUrl(BASE_URI)\n    .defaultHeader(HttpHeaders.CONTENT_TYPE,\n        MediaType.APPLICATION_JSON_VALUE)\n    .build();\n\nMono&lt;ResponseWrapper&gt; response = webClient.post()\n    .uri(PWD_AUTH_URI)\n    .contentType(MediaType.APPLICATION_JSON)\n    .syncBody(request)\n    .retrieve()\n    .bodyToMono(ResponseWrapper.class);\n\nResponseWrapper&lt;UserResponseDTO&gt; wr = response.block();\n    // how to get cookie from the webClient \n    // set into the \"res\" that cookie \n\nreturn wr;\n}\n</code></pre>\n"},{"tags":["java","fortify"],"comments":[{"owner":{"account_id":2803864,"reputation":990,"user_id":2411506,"display_name":"DanielCuadra"},"score":0,"creation_date":1554926064,"post_id":12898142,"comment_id":97933744,"body_markdown":"Did you even find how to workaround this without needing to get rid of your `isNull` method?","body":"Did you even find how to workaround this without needing to get rid of your <code>isNull</code> method?"},{"owner":{"account_id":11564221,"reputation":5963,"user_id":8473028,"accept_rate":94,"display_name":"DodgyCodeException"},"score":0,"creation_date":1559726362,"post_id":12898142,"comment_id":99507097,"body_markdown":"Possible duplicate of https://stackoverflow.com/questions/56448074/java-null-dereference-when-setting-a-field-to-null-fortify","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/56448074/java-null-dereference-when-setting-a-field-to-null-fortify\" title=\"java null dereference when setting a field to null fortify\">stackoverflow.com/questions/56448074/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":27098,"reputation":526,"user_id":71129,"display_name":"lavamunky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385638389,"creation_date":1385638389,"answer_id":20265080,"question_id":12898142,"body_markdown":"This looks more like an SCA issue that you should take to their support team. Alternatively just audit it as not an issue. This isn&#39;t something that can be fixed with a custom rule. ","title":"How to avoid false positive &quot;Null Dereference&quot; error in Fortify","body":"<p>This looks more like an SCA issue that you should take to their support team. Alternatively just audit it as not an issue. This isn't something that can be fixed with a custom rule. </p>\n"},{"tags":[],"owner":{"account_id":4132315,"reputation":273,"user_id":3389865,"display_name":"WaltHouser"},"down_vote_count":6,"up_vote_count":0,"is_accepted":false,"score":-6,"last_activity_date":1429822571,"creation_date":1429822571,"answer_id":29834153,"question_id":12898142,"body_markdown":"Dereferencing a null pointer or entering an infinite loop could enable a denial-of-service attack, but it could also create the conditions necessary for an attacker to take advantage of some poorly thought-out error handling code.\r\n\r\nSee https://cwe.mitre.org/data/definitions/476.html and https://www.owasp.org/index.php/Null_Dereference ","title":"How to avoid false positive &quot;Null Dereference&quot; error in Fortify","body":"<p>Dereferencing a null pointer or entering an infinite loop could enable a denial-of-service attack, but it could also create the conditions necessary for an attacker to take advantage of some poorly thought-out error handling code.</p>\n\n<p>See <a href=\"https://cwe.mitre.org/data/definitions/476.html\" rel=\"nofollow\">https://cwe.mitre.org/data/definitions/476.html</a> and <a href=\"https://www.owasp.org/index.php/Null_Dereference\" rel=\"nofollow\">https://www.owasp.org/index.php/Null_Dereference</a> </p>\n"}],"owner":{"account_id":1934394,"reputation":998,"user_id":1743029,"accept_rate":44,"display_name":"Duccio Fabbri"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16982,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1692868005,"creation_date":1350312453,"question_id":12898142,"body_markdown":"I&#39;m using &quot;HP Fortify v3.50&quot; on a java project and I find lots of false positive on  &quot;Null Dereference&quot;, because Fortify doesn&#39;t see the control against null is in another method.\r\nHow can I reduce false positives and maintain the rule?\r\n\r\nHere is a POC\r\n        \r\n    public class MyClass {\r\n        public static void main(String[] args) {\r\n            String string01 = null;\r\n            String string02 = null;\t\t\r\n            int i;\r\n    \r\n            if (args[0].equals(&quot;A&quot;)) {\r\n                string01 = &quot;X&quot;;\r\n                string02 = &quot;Y&quot;;\r\n            }\r\n    \r\n            if (!isNull(string02)){\r\n                i = string02.length();} //False Positive\r\n            else {\r\n                i = string02.length();\r\n            } // Yes, it is an error!\r\n        }\r\n    \r\n        public static boolean isNull(Object toBeTested){\r\n            return (null == toBeTested);\t\t\r\n        }\r\n    }\r\n\r\n&lt;/&gt;\r\n\r\nResult:\r\n\r\n    [E8837DB548E01DB5794FA71F3D5F51C8 : medium : Null Dereference : controlflow ]\r\n        MyClass.java(13) : Assigned null : string02\r\n        MyClass.java(16) : Branch not taken: (!args[0].equals(&quot;A&quot;))\r\n        MyClass.java(20) : Branch taken: (!isNull(string02))           //False Positive\r\n        MyClass.java(21) : Dereferenced : string02\r\n    \r\n    [E8837DB548E01DB5794FA71F3D5F51C9 : medium : Null Dereference : controlflow ]\r\n        MyClass.java(13) : Assigned null : string02\r\n        MyClass.java(16) : Branch not taken: (!args[0].equals(&quot;A&quot;))\r\n        MyClass.java(20) : Branch not taken: isNull(string02)\r\n        MyClass.java(23) : Dereferenced : string02\r\n","title":"How to avoid false positive &quot;Null Dereference&quot; error in Fortify","body":"<p>I'm using \"HP Fortify v3.50\" on a java project and I find lots of false positive on  \"Null Dereference\", because Fortify doesn't see the control against null is in another method.\nHow can I reduce false positives and maintain the rule?</p>\n\n<p>Here is a POC</p>\n\n<pre><code>public class MyClass {\n    public static void main(String[] args) {\n        String string01 = null;\n        String string02 = null;     \n        int i;\n\n        if (args[0].equals(\"A\")) {\n            string01 = \"X\";\n            string02 = \"Y\";\n        }\n\n        if (!isNull(string02)){\n            i = string02.length();} //False Positive\n        else {\n            i = string02.length();\n        } // Yes, it is an error!\n    }\n\n    public static boolean isNull(Object toBeTested){\n        return (null == toBeTested);        \n    }\n}\n</code></pre>\n\n<p></p>\n\n<p>Result:</p>\n\n<pre><code>[E8837DB548E01DB5794FA71F3D5F51C8 : medium : Null Dereference : controlflow ]\n    MyClass.java(13) : Assigned null : string02\n    MyClass.java(16) : Branch not taken: (!args[0].equals(\"A\"))\n    MyClass.java(20) : Branch taken: (!isNull(string02))           //False Positive\n    MyClass.java(21) : Dereferenced : string02\n\n[E8837DB548E01DB5794FA71F3D5F51C9 : medium : Null Dereference : controlflow ]\n    MyClass.java(13) : Assigned null : string02\n    MyClass.java(16) : Branch not taken: (!args[0].equals(\"A\"))\n    MyClass.java(20) : Branch not taken: isNull(string02)\n    MyClass.java(23) : Dereferenced : string02\n</code></pre>\n"},{"tags":["java","android","kotlin","android-custom-view","android-seekbar"],"owner":{"account_id":25989896,"reputation":35,"user_id":19702262,"display_name":"Shaheer Ilyas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692867643,"creation_date":1692863619,"question_id":76967237,"body_markdown":"i am working on a custom view for my android application. i am trying to create a custom view for my seekbar. i have extended my custom view class from androidx.appcompat.widget.AppCompatSeekBar\r\n\r\nHowever i&#39;m not getting any success to get my exact design. the design i need is as follows\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nhowever what i&#39;m getting  through my code is as follows\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/in5d1.png\r\n  [2]: https://i.stack.imgur.com/tb4yl.png\r\nhere is my code\r\n   \r\n\r\n     override fun onDraw(canvas: Canvas) {\r\n        super.onDraw(canvas)\r\n\r\n        val totalWidth = width.toFloat()\r\n        val totalHeight = height.toFloat()\r\n        val segmentWidth = totalWidth / colors.size\r\n        val verticalPaddingPercent = 0.4f // Increase this value to adjust padding\r\n\r\n        val paddingHeight = totalHeight * verticalPaddingPercent\r\n\r\n        val thumbHeight = totalHeight - 2 * paddingHeight\r\n        val thumbWidth = thumb?.intrinsicWidth ?: 0 // Get thumb drawable width\r\n\r\n        // Calculate thumb position outside of the other drawables\r\n        val thumbTopOffset = thumbHeight * 0.2f // Offset of 10% of thumb height\r\n        val thumbBottomOffset = thumbHeight * 0.2f // Offset of 10% of thumb height\r\n        val thumbTop = thumbTopOffset\r\n        val thumbBottom = totalHeight - thumbBottomOffset\r\n        val range = if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n            max - min\r\n        } else {\r\n            TODO(&quot;TBD&quot;)\r\n        }\r\n        val adjustedProgress = if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n            progress - min\r\n        } else {\r\n            TODO(&quot;VERSION.SDK_INT &lt; O&quot;)\r\n        }\r\n        thumbLeft = (paddingStart + (width - paddingStart - paddingEnd - thumbWidth) * adjustedProgress / range).toFloat()\r\n\r\n        // Calculate the starting point of the text box\r\n        val text = &quot;This is test&quot; // Text for the text box\r\n        val textPaint = Paint(Paint.ANTI_ALIAS_FLAG).apply {\r\n            textSize = 12f//resources.getDimension(R.dimen.text_size) // Define your desired text size\r\n            color = Color.BLACK // Define your desired text color\r\n        }\r\n        val textWidth = textPaint.measureText(text)\r\n        val textHeight = textPaint.fontMetrics.bottom - textPaint.fontMetrics.top\r\n\r\n        val textBoxWidth = textWidth + 40 // Adding padding for the text box\r\n        val textBoxLeft = thumbLeft - textBoxWidth / 2\r\n        val textBoxTop = paddingHeight - (textHeight + 40) - 10 // Adjust this value as needed\r\n\r\n        // Draw rectangles\r\n        for (i in colors.indices) {\r\n            val left = i * segmentWidth\r\n            val right = (i + 1) * segmentWidth\r\n\r\n            val spacing = segmentWidth * spacingFactor\r\n\r\n            // Calculate top and bottom based on available height and padding\r\n            val top = paddingHeight\r\n            val bottom = top + thumbHeight\r\n\r\n            // Draw color segment or rounded segment\r\n            if (i == 0 || i == colors.size - 1) {\r\n                val rectF = RectF(left, top, right - spacing, bottom)\r\n                val path = Path()\r\n                val cornerRadius = resources.getDimension(R.dimen.rounded_corner_radius)\r\n\r\n                if (i == 0) {\r\n                    path.addRoundRect(rectF, floatArrayOf(cornerRadius, cornerRadius, 0f, 0f, 0f, 0f, cornerRadius, cornerRadius), Path.Direction.CW)\r\n                } else {\r\n                    path.addRoundRect(rectF, floatArrayOf(0f, 0f, cornerRadius, cornerRadius, cornerRadius, cornerRadius, 0f, 0f), Path.Direction.CW)\r\n                }\r\n\r\n                canvas.drawPath(path, colors[i])\r\n            } else {\r\n                canvas.drawRect(left, top, right - spacing, bottom, colors[i])\r\n            }\r\n        }\r\n\r\n        // Draw the rectangular square box with rounded corners and black boundary\r\n        val textBoxRect = RectF(textBoxLeft, textBoxTop, textBoxLeft + textBoxWidth, textBoxTop + textHeight + 40)\r\n        val textBoxPaint = Paint(Paint.ANTI_ALIAS_FLAG).apply {\r\n            color = Color.WHITE // White background color\r\n            style = Paint.Style.FILL\r\n        }\r\n        val borderPaint = Paint(Paint.ANTI_ALIAS_FLAG).apply {\r\n            color = Color.BLACK // Black border color\r\n            style = Paint.Style.STROKE\r\n            strokeWidth = 2f // Define your desired border width\r\n        }\r\n        canvas.drawRoundRect(textBoxRect, 10f, 10f, textBoxPaint)\r\n        canvas.drawRoundRect(textBoxRect, 10f, 10f, borderPaint)\r\n\r\n        // Draw the inverted triangle cutout\r\n        val pointerPath = Path().apply {\r\n            moveTo(thumbLeft, textBoxTop + textHeight + 40)\r\n            lineTo(thumbLeft - 20f, textBoxTop + textHeight + 40 - 20f) // Adjust these values to position the triangle\r\n            lineTo(thumbLeft + 20f, textBoxTop + textHeight + 40 - 20f) // Adjust these values to position the triangle\r\n            close()\r\n        }\r\n        canvas.drawPath(pointerPath, textBoxPaint)\r\n\r\n        // Draw the text\r\n        canvas.drawText(text, textBoxLeft + 20, textBoxTop + textHeight + 20, textPaint)\r\n\r\n        // Draw thumb drawable\r\n        thumb?.let { thumbDrawable -&gt;\r\n            thumbDrawable.setBounds(thumbLeft.toInt(), thumbTop.toInt(), thumbLeft.toInt() + thumbWidth, thumbBottom.toInt())\r\n            thumbDrawable.draw(canvas)\r\n        }\r\n    }","title":"Custom View Seekbar in android","body":"<p>i am working on a custom view for my android application. i am trying to create a custom view for my seekbar. i have extended my custom view class from androidx.appcompat.widget.AppCompatSeekBar</p>\n<p>However i'm not getting any success to get my exact design. the design i need is as follows</p>\n<p><a href=\"https://i.stack.imgur.com/in5d1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/in5d1.png\" alt=\"enter image description here\" /></a></p>\n<p>however what i'm getting  through my code is as follows</p>\n<p><a href=\"https://i.stack.imgur.com/tb4yl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tb4yl.png\" alt=\"enter image description here\" /></a></p>\n<p>here is my code</p>\n<pre><code> override fun onDraw(canvas: Canvas) {\n    super.onDraw(canvas)\n\n    val totalWidth = width.toFloat()\n    val totalHeight = height.toFloat()\n    val segmentWidth = totalWidth / colors.size\n    val verticalPaddingPercent = 0.4f // Increase this value to adjust padding\n\n    val paddingHeight = totalHeight * verticalPaddingPercent\n\n    val thumbHeight = totalHeight - 2 * paddingHeight\n    val thumbWidth = thumb?.intrinsicWidth ?: 0 // Get thumb drawable width\n\n    // Calculate thumb position outside of the other drawables\n    val thumbTopOffset = thumbHeight * 0.2f // Offset of 10% of thumb height\n    val thumbBottomOffset = thumbHeight * 0.2f // Offset of 10% of thumb height\n    val thumbTop = thumbTopOffset\n    val thumbBottom = totalHeight - thumbBottomOffset\n    val range = if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n        max - min\n    } else {\n        TODO(&quot;TBD&quot;)\n    }\n    val adjustedProgress = if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n        progress - min\n    } else {\n        TODO(&quot;VERSION.SDK_INT &lt; O&quot;)\n    }\n    thumbLeft = (paddingStart + (width - paddingStart - paddingEnd - thumbWidth) * adjustedProgress / range).toFloat()\n\n    // Calculate the starting point of the text box\n    val text = &quot;This is test&quot; // Text for the text box\n    val textPaint = Paint(Paint.ANTI_ALIAS_FLAG).apply {\n        textSize = 12f//resources.getDimension(R.dimen.text_size) // Define your desired text size\n        color = Color.BLACK // Define your desired text color\n    }\n    val textWidth = textPaint.measureText(text)\n    val textHeight = textPaint.fontMetrics.bottom - textPaint.fontMetrics.top\n\n    val textBoxWidth = textWidth + 40 // Adding padding for the text box\n    val textBoxLeft = thumbLeft - textBoxWidth / 2\n    val textBoxTop = paddingHeight - (textHeight + 40) - 10 // Adjust this value as needed\n\n    // Draw rectangles\n    for (i in colors.indices) {\n        val left = i * segmentWidth\n        val right = (i + 1) * segmentWidth\n\n        val spacing = segmentWidth * spacingFactor\n\n        // Calculate top and bottom based on available height and padding\n        val top = paddingHeight\n        val bottom = top + thumbHeight\n\n        // Draw color segment or rounded segment\n        if (i == 0 || i == colors.size - 1) {\n            val rectF = RectF(left, top, right - spacing, bottom)\n            val path = Path()\n            val cornerRadius = resources.getDimension(R.dimen.rounded_corner_radius)\n\n            if (i == 0) {\n                path.addRoundRect(rectF, floatArrayOf(cornerRadius, cornerRadius, 0f, 0f, 0f, 0f, cornerRadius, cornerRadius), Path.Direction.CW)\n            } else {\n                path.addRoundRect(rectF, floatArrayOf(0f, 0f, cornerRadius, cornerRadius, cornerRadius, cornerRadius, 0f, 0f), Path.Direction.CW)\n            }\n\n            canvas.drawPath(path, colors[i])\n        } else {\n            canvas.drawRect(left, top, right - spacing, bottom, colors[i])\n        }\n    }\n\n    // Draw the rectangular square box with rounded corners and black boundary\n    val textBoxRect = RectF(textBoxLeft, textBoxTop, textBoxLeft + textBoxWidth, textBoxTop + textHeight + 40)\n    val textBoxPaint = Paint(Paint.ANTI_ALIAS_FLAG).apply {\n        color = Color.WHITE // White background color\n        style = Paint.Style.FILL\n    }\n    val borderPaint = Paint(Paint.ANTI_ALIAS_FLAG).apply {\n        color = Color.BLACK // Black border color\n        style = Paint.Style.STROKE\n        strokeWidth = 2f // Define your desired border width\n    }\n    canvas.drawRoundRect(textBoxRect, 10f, 10f, textBoxPaint)\n    canvas.drawRoundRect(textBoxRect, 10f, 10f, borderPaint)\n\n    // Draw the inverted triangle cutout\n    val pointerPath = Path().apply {\n        moveTo(thumbLeft, textBoxTop + textHeight + 40)\n        lineTo(thumbLeft - 20f, textBoxTop + textHeight + 40 - 20f) // Adjust these values to position the triangle\n        lineTo(thumbLeft + 20f, textBoxTop + textHeight + 40 - 20f) // Adjust these values to position the triangle\n        close()\n    }\n    canvas.drawPath(pointerPath, textBoxPaint)\n\n    // Draw the text\n    canvas.drawText(text, textBoxLeft + 20, textBoxTop + textHeight + 20, textPaint)\n\n    // Draw thumb drawable\n    thumb?.let { thumbDrawable -&gt;\n        thumbDrawable.setBounds(thumbLeft.toInt(), thumbTop.toInt(), thumbLeft.toInt() + thumbWidth, thumbBottom.toInt())\n        thumbDrawable.draw(canvas)\n    }\n}\n</code></pre>\n"},{"tags":["java","memory","arraylist","data-structures","subset"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":2,"creation_date":1692831938,"post_id":76965278,"comment_id":135679247,"body_markdown":"Try running the code in a debugger.  Set a breakpoint early. This will pause execution at the breakpoint. Then, run the code one-step-at-a-time. At each step, monitor the variables.","body":"Try running the code in a debugger.  Set a breakpoint early. This will pause execution at the breakpoint. Then, run the code one-step-at-a-time. At each step, monitor the variables."}],"answers":[{"tags":[],"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692844771,"creation_date":1692844771,"answer_id":76965933,"question_id":76965278,"body_markdown":"In each step, you should copy each of the lists inside `ans`, append a new digit from array `a` to it and add that new list to `ans` again.\r\n\r\nYou have started correctly. But, it is better to use List instead of array list as the reference type.\r\n\r\n    List&lt;List&lt;Integer&gt; &gt; ans = new ArrayList&lt;&gt;();\r\n    ans.add(new ArrayList&lt;&gt;());\r\n\r\nAnd, in the for loop:\r\n\r\n1. Copy each element from the `ans`.\r\n2. Add the new element from array `a` which to create a new subset.\r\n3. Add the new subset created which is represented by `inner` to the `ans`\r\n\r\n       for (int elem : a) {\r\n           int n = ans.size();\r\n           for (int i = 0; i &lt; n; i++) {\r\n               // copy each element from the `ans` which is already populated.\r\n               List&lt;Integer&gt; inner = new ArrayList&lt;&gt;(ans.get(i));\r\n               // Add the new elment from array `a` which is basically a new \r\n               // subset\r\n               inner.add(elem);\r\n               // Add the new subset represented by `inner` to the ans\r\n               ans.add(inner);\r\n           }\r\n       }","title":"Program to find the Set of Subsets using Iteration in Java. Issue: Two ArrayLists happen to share the same Address. Help to Debug","body":"<p>In each step, you should copy each of the lists inside <code>ans</code>, append a new digit from array <code>a</code> to it and add that new list to <code>ans</code> again.</p>\n<p>You have started correctly. But, it is better to use List instead of array list as the reference type.</p>\n<pre><code>List&lt;List&lt;Integer&gt; &gt; ans = new ArrayList&lt;&gt;();\nans.add(new ArrayList&lt;&gt;());\n</code></pre>\n<p>And, in the for loop:</p>\n<ol>\n<li><p>Copy each element from the <code>ans</code>.</p>\n</li>\n<li><p>Add the new element from array <code>a</code> which to create a new subset.</p>\n</li>\n<li><p>Add the new subset created which is represented by <code>inner</code> to the <code>ans</code></p>\n<pre><code>for (int elem : a) {\n    int n = ans.size();\n    for (int i = 0; i &lt; n; i++) {\n        // copy each element from the `ans` which is already populated.\n        List&lt;Integer&gt; inner = new ArrayList&lt;&gt;(ans.get(i));\n        // Add the new elment from array `a` which is basically a new \n        // subset\n        inner.add(elem);\n        // Add the new subset represented by `inner` to the ans\n        ans.add(inner);\n    }\n}\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":28806158,"reputation":3,"user_id":22061992,"display_name":"Prashant Kumar Singh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1692867334,"creation_date":1692830081,"question_id":76965278,"body_markdown":"**Intro**: Below is the program to find the set of subsets, using iteration, in Java.\r\n\r\n**Issue**: The `ans` is also getting updated with the new value when only `ansCopy` is attempted to update. \r\n\r\nFor example, I take `a` value as {5,4,6}. In the first iteration, 5 gets appended in the first inner array list of `ansCopy`. But to the surprise the first inner array list of `ans` also gets appended by 5. \r\n\r\nMaybe, the two `ArrayList` `ans` and `ansCopy` happen to share the same address.\r\n\r\n**Requirement**: Can someone explain why this is happening and help me to debug it!\r\n```java\r\npublic static ArrayList&lt;ArrayList&lt;Integer&gt; &gt; subsetUsingIteration2(int[] a) {\r\n    ArrayList&lt;ArrayList&lt;Integer&gt; &gt; ans=new ArrayList&lt;ArrayList&lt;Integer&gt; &gt;();\r\n    ans.add(new ArrayList&lt;Integer&gt;()); \r\n    // ArrayList&lt;ArrayList&lt;Integer&gt; &gt; ans={{}};\r\n    ArrayList&lt;ArrayList&lt;Integer&gt; &gt; ansCopy=new ArrayList&lt;ArrayList&lt;Integer&gt; &gt;();\r\n    // ArrayList&lt;Integer&gt; ansCopy={};\r\n    for(int i=0; i&lt;a.length; i++) {\r\n      ansCopy.addAll(ans);      \r\n      for(int j=0; j&lt;ansCopy.size(); j++) \r\n        ansCopy.get(j).add(a[i]);\r\n      ans.addAll(ansCopy);\r\n      ansCopy.clear();      \r\n    }\r\n    return ans;\r\n  }\r\n```\r\n**Attempts**:\r\nWhen I take a={5,4,6} as the input, I am supposed to get this output\r\n \r\n&gt; [[], [5], [4], [6], [5,4], [4,6], [5,6], [5,4,6]]\r\n\r\ninstead I get this output\r\n\r\n&gt; [[5, 4, 4, 6, 6, 6, 6], [5, 4, 4, 6, 6, 6, 6], [5, 4, 4, 6, 6, 6, 6],\r\n&gt; [5, 4, 4, 6, 6, 6, 6], [5, 4, 4, 6, 6, 6, 6], [5, 4, 4, 6, 6, 6, 6],\r\n&gt; [5, 4, 4, 6, 6, 6, 6], [5, 4, 4, 6, 6, 6, 6]]\r\n\r\nTried to find the memory addresses of those two variables but could not find them.","title":"Program to find the Set of Subsets using Iteration in Java. Issue: Two ArrayLists happen to share the same Address. Help to Debug","body":"<p><strong>Intro</strong>: Below is the program to find the set of subsets, using iteration, in Java.</p>\n<p><strong>Issue</strong>: The <code>ans</code> is also getting updated with the new value when only <code>ansCopy</code> is attempted to update.</p>\n<p>For example, I take <code>a</code> value as {5,4,6}. In the first iteration, 5 gets appended in the first inner array list of <code>ansCopy</code>. But to the surprise the first inner array list of <code>ans</code> also gets appended by 5.</p>\n<p>Maybe, the two <code>ArrayList</code> <code>ans</code> and <code>ansCopy</code> happen to share the same address.</p>\n<p><strong>Requirement</strong>: Can someone explain why this is happening and help me to debug it!</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static ArrayList&lt;ArrayList&lt;Integer&gt; &gt; subsetUsingIteration2(int[] a) {\n    ArrayList&lt;ArrayList&lt;Integer&gt; &gt; ans=new ArrayList&lt;ArrayList&lt;Integer&gt; &gt;();\n    ans.add(new ArrayList&lt;Integer&gt;()); \n    // ArrayList&lt;ArrayList&lt;Integer&gt; &gt; ans={{}};\n    ArrayList&lt;ArrayList&lt;Integer&gt; &gt; ansCopy=new ArrayList&lt;ArrayList&lt;Integer&gt; &gt;();\n    // ArrayList&lt;Integer&gt; ansCopy={};\n    for(int i=0; i&lt;a.length; i++) {\n      ansCopy.addAll(ans);      \n      for(int j=0; j&lt;ansCopy.size(); j++) \n        ansCopy.get(j).add(a[i]);\n      ans.addAll(ansCopy);\n      ansCopy.clear();      \n    }\n    return ans;\n  }\n</code></pre>\n<p><strong>Attempts</strong>:\nWhen I take a={5,4,6} as the input, I am supposed to get this output</p>\n<blockquote>\n<p>[[], [5], [4], [6], [5,4], [4,6], [5,6], [5,4,6]]</p>\n</blockquote>\n<p>instead I get this output</p>\n<blockquote>\n<p>[[5, 4, 4, 6, 6, 6, 6], [5, 4, 4, 6, 6, 6, 6], [5, 4, 4, 6, 6, 6, 6],\n[5, 4, 4, 6, 6, 6, 6], [5, 4, 4, 6, 6, 6, 6], [5, 4, 4, 6, 6, 6, 6],\n[5, 4, 4, 6, 6, 6, 6], [5, 4, 4, 6, 6, 6, 6]]</p>\n</blockquote>\n<p>Tried to find the memory addresses of those two variables but could not find them.</p>\n"},{"tags":["java","algorithm","readfile"],"comments":[{"owner":{"account_id":21043997,"reputation":1,"user_id":15465716,"display_name":"Hải Đăng"},"score":0,"creation_date":1692863440,"post_id":76967197,"comment_id":135682357,"body_markdown":"All other ways I tried just read all records at once which not met the requirement. Appreciate all helps","body":"All other ways I tried just read all records at once which not met the requirement. Appreciate all helps"},{"owner":{"account_id":3755777,"reputation":499,"user_id":3122175,"accept_rate":92,"display_name":"D.T"},"score":0,"creation_date":1692864196,"post_id":76967197,"comment_id":135682507,"body_markdown":"what is your problem/error?","body":"what is your problem/error?"},{"owner":{"account_id":21043997,"reputation":1,"user_id":15465716,"display_name":"Hải Đăng"},"score":0,"creation_date":1692864344,"post_id":76967197,"comment_id":135682538,"body_markdown":"@D.T Thanks for your response, it&#39;s not an error, just need an algorithm but I figured it out","body":"@D.T Thanks for your response, it&#39;s not an error, just need an algorithm but I figured it out"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1692866688,"post_id":76967197,"comment_id":135683033,"body_markdown":"It looks very suspicious that you are passing `scanner` as an argument, and then treating it like an ordinary local variable by reassigning it to `new Scanner`. You should either create a local variable there and not pass the argument, or create the `new Scanner` in the caller of your method.","body":"It looks very suspicious that you are passing <code>scanner</code> as an argument, and then treating it like an ordinary local variable by reassigning it to <code>new Scanner</code>. You should either create a local variable there and not pass the argument, or create the <code>new Scanner</code> in the caller of your method."},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1692866706,"post_id":76967197,"comment_id":135683037,"body_markdown":"Also it&#39;s `line.separator`, not `line.operator`.","body":"Also it&#39;s <code>line.separator</code>, not <code>line.operator</code>."}],"answers":[{"tags":[],"owner":{"account_id":12414484,"reputation":131,"user_id":9044848,"display_name":"saw1k"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692864857,"creation_date":1692864857,"answer_id":76967372,"question_id":76967197,"body_markdown":"Create record like this\r\n\r\n    public record Employee(String id, String name, String date, String address) { }\r\n\r\nThen try function like this:\r\n\r\n    public List&lt;Employee&gt; getEmployeesFromFile(File file) {\r\n        Scanner scanner;\r\n        List&lt;Employee&gt; employees;\r\n        if (file.exists()) {\r\n            try {\r\n                scanner = new Scanner(file);\r\n                employees = new ArrayList&lt;&gt;();\r\n                while (scanner.hasNextLine()) {\r\n                    String[] splitedNewLine = scanner.nextLine().split(&quot;,&quot;);\r\n                    employees.add(\r\n                            new Employee(\r\n                                    splitedNewLine[0],\r\n                                    splitedNewLine[1],\r\n                                    splitedNewLine[2],\r\n                                    splitedNewLine[3]\r\n                            )\r\n                    );\r\n                }\r\n                return employees;\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n                return List.of();\r\n            }\r\n    \r\n        } else {\r\n            System.out.println(&quot;File not exists!!!&quot;);\r\n            return List.of();\r\n        }\r\n    }\r\n\r\nThis is only example how to read file and map lines to object employee. Try to adjust this code for you problem and data.","title":"How to read each line at once, save the information in that line and then move onto the next line in Java","body":"<p>Create record like this</p>\n<pre><code>public record Employee(String id, String name, String date, String address) { }\n</code></pre>\n<p>Then try function like this:</p>\n<pre><code>public List&lt;Employee&gt; getEmployeesFromFile(File file) {\n    Scanner scanner;\n    List&lt;Employee&gt; employees;\n    if (file.exists()) {\n        try {\n            scanner = new Scanner(file);\n            employees = new ArrayList&lt;&gt;();\n            while (scanner.hasNextLine()) {\n                String[] splitedNewLine = scanner.nextLine().split(&quot;,&quot;);\n                employees.add(\n                        new Employee(\n                                splitedNewLine[0],\n                                splitedNewLine[1],\n                                splitedNewLine[2],\n                                splitedNewLine[3]\n                        )\n                );\n            }\n            return employees;\n        } catch (Exception e) {\n            e.printStackTrace();\n            return List.of();\n        }\n\n    } else {\n        System.out.println(&quot;File not exists!!!&quot;);\n        return List.of();\n    }\n}\n</code></pre>\n<p>This is only example how to read file and map lines to object employee. Try to adjust this code for you problem and data.</p>\n"},{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692866867,"creation_date":1692866867,"answer_id":76967635,"question_id":76967197,"body_markdown":"You should use [Files.lines(Path path)][1] method. \r\n\r\n    public static Stream&lt;String&gt; lines(Path path) throws IOException\r\n\r\nIt gives you your solution in one line\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#lines-java.nio.file.Path-","title":"How to read each line at once, save the information in that line and then move onto the next line in Java","body":"<p>You should use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#lines-java.nio.file.Path-\" rel=\"nofollow noreferrer\">Files.lines(Path path)</a> method.</p>\n<pre><code>public static Stream&lt;String&gt; lines(Path path) throws IOException\n</code></pre>\n<p>It gives you your solution in one line</p>\n"}],"owner":{"account_id":21043997,"reputation":1,"user_id":15465716,"display_name":"Hải Đăng"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1692866867,"creation_date":1692863219,"question_id":76967197,"body_markdown":"I&#39;m having this problem, I think it&#39;s basically just algorithm but I can&#39;t figure it out though I try multiple ways. I have a file name &quot;employees.txt&quot;. Each line in this file is a record, what I want to do is read a line from this file, extract the information of an employee, save that record to a List, then move onto the next line, repeated till the end of the file.\r\n\r\nThis is what I tried so far. One more thing is that I have to use Scanner, not other stream readers\r\n\r\n```\r\n public void inputData(Scanner scanner) {\r\n        if (employeeFile.exists()){\r\n            try {\r\n                scanner = new Scanner(employeeFile);\r\n                String newLine = System.getProperty(&quot;line.operator&quot;);\r\n                StringBuilder str = new StringBuilder();\r\n//                ArrayList&lt;String&gt; data = new ArrayList&lt;&gt;();\r\n                int count = 0;\r\n                while (scanner.hasNextLine()){\r\n                    str.append(scanner.nextLine());\r\n                    System.out.printf(&quot;%s + %d\\n&quot;, str, count);\r\n                    count++;\r\n\r\n                }\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n        }else\r\n\r\n            System.out.println(&quot;File not exists!!!&quot;);\r\n    }\r\n```\r\nHere is the records in &quot;employees.txt&quot;, each record separated by a new line\r\n\r\n```\r\n\r\nD, 1, John Smith, 02-12-1971, 42 Victoria St. Hurstville NSW 2456, 10001, AVAILABLE\r\nD, 2, Peter Taylor, 01-12-1970, 42 Victoria St. Hurstville NSW 2456, 10008, ON LEAVE\r\nD, 3, John Doe, 03-23-1966, 12 Station St. Dapto NSW 2530, 10002, AVAILABLE\r\nD, 4, John Gray, 05-05-1988, 16 Station St. Dapto NSW 2530, 10004, AVAILABLE\r\nD, 5, Adam Taylor, 01-01-1980, 42 Church St. City NSW 2300, 10003, ON LEAVE\r\nD, 6, Michael Jones, 03-05-1975, 23 Waterloo Ave. Surry Hills NSW 2502, 10012, AVAILABLE\r\nD, 7, Frederic Jones, 02-10-1978, 3 Victoria St. Redfern NSW 2420, 20002, BUSY\r\nD, 8, Peter O&#39;Brien, 02-28-1983, 19 Lucas Dr. Horsley NSW 2530, 20003, &#39;BUSY&#39;\r\nA, 9, John Lucas, 12-16-1966, 20 Huxley St. Horsley NSW 2530, SUPPORT\r\nA, 10, John Fox, 10-15-1975, 18 Victoria St. Hurstville NSW 2456, DIRECTOR\r\nD, 11, Adam Fox, 08-10-1974, 45 Victoria St. Hurstville NSW 2456, 30005, BUSY\r\nD, 12, Phillip Cox, 12-12-1985, 5 The Avenue Rockdale NSW 2300, 40002, BUSY\r\nD, 13, Andrew K Smith, 04-04-1969, 42 Bambaramba Ave. Pennant Hills NSW 2556, 20045, AVAILABLE\r\nA, 14, Andrew R Smith, 04-01-1992, 67 King Cr. Hurstville NSW 2456, CEO\r\nA, 15, Michael Potter, 04-01-1995, 568 Bong Bong St. Horsley NSW 2530, SUPPORT\r\nD, 16, Harry Potter, 04-01-1987, 568 Bong Bong St. Horsley NSW 2530, 20055, AVAILABLE\r\nD, 17, James Bond, 02-14-1989, 7 Alan Bond St. Perth WA 6000, 20065, AVAILABLE\r\nD, 18, Paris Hilton, 05-01-1977, 1 Hilton St. Melbourne VIC 3000, 10305, AVAILABLE\r\nA, 19, Lady Gaga, 06-01-1992, 3 Pork st. Hobart TAS 7000, SUPPORT\r\nD, 20, Robin Hood, 05-23-1999, 6 Nottingham Pl. Sydney NSW 2000, 10345, AVAILABLE\r\n```\r\n","title":"How to read each line at once, save the information in that line and then move onto the next line in Java","body":"<p>I'm having this problem, I think it's basically just algorithm but I can't figure it out though I try multiple ways. I have a file name &quot;employees.txt&quot;. Each line in this file is a record, what I want to do is read a line from this file, extract the information of an employee, save that record to a List, then move onto the next line, repeated till the end of the file.</p>\n<p>This is what I tried so far. One more thing is that I have to use Scanner, not other stream readers</p>\n<pre><code> public void inputData(Scanner scanner) {\n        if (employeeFile.exists()){\n            try {\n                scanner = new Scanner(employeeFile);\n                String newLine = System.getProperty(&quot;line.operator&quot;);\n                StringBuilder str = new StringBuilder();\n//                ArrayList&lt;String&gt; data = new ArrayList&lt;&gt;();\n                int count = 0;\n                while (scanner.hasNextLine()){\n                    str.append(scanner.nextLine());\n                    System.out.printf(&quot;%s + %d\\n&quot;, str, count);\n                    count++;\n\n                }\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n\n        }else\n\n            System.out.println(&quot;File not exists!!!&quot;);\n    }\n</code></pre>\n<p>Here is the records in &quot;employees.txt&quot;, each record separated by a new line</p>\n<pre><code>\nD, 1, John Smith, 02-12-1971, 42 Victoria St. Hurstville NSW 2456, 10001, AVAILABLE\nD, 2, Peter Taylor, 01-12-1970, 42 Victoria St. Hurstville NSW 2456, 10008, ON LEAVE\nD, 3, John Doe, 03-23-1966, 12 Station St. Dapto NSW 2530, 10002, AVAILABLE\nD, 4, John Gray, 05-05-1988, 16 Station St. Dapto NSW 2530, 10004, AVAILABLE\nD, 5, Adam Taylor, 01-01-1980, 42 Church St. City NSW 2300, 10003, ON LEAVE\nD, 6, Michael Jones, 03-05-1975, 23 Waterloo Ave. Surry Hills NSW 2502, 10012, AVAILABLE\nD, 7, Frederic Jones, 02-10-1978, 3 Victoria St. Redfern NSW 2420, 20002, BUSY\nD, 8, Peter O'Brien, 02-28-1983, 19 Lucas Dr. Horsley NSW 2530, 20003, 'BUSY'\nA, 9, John Lucas, 12-16-1966, 20 Huxley St. Horsley NSW 2530, SUPPORT\nA, 10, John Fox, 10-15-1975, 18 Victoria St. Hurstville NSW 2456, DIRECTOR\nD, 11, Adam Fox, 08-10-1974, 45 Victoria St. Hurstville NSW 2456, 30005, BUSY\nD, 12, Phillip Cox, 12-12-1985, 5 The Avenue Rockdale NSW 2300, 40002, BUSY\nD, 13, Andrew K Smith, 04-04-1969, 42 Bambaramba Ave. Pennant Hills NSW 2556, 20045, AVAILABLE\nA, 14, Andrew R Smith, 04-01-1992, 67 King Cr. Hurstville NSW 2456, CEO\nA, 15, Michael Potter, 04-01-1995, 568 Bong Bong St. Horsley NSW 2530, SUPPORT\nD, 16, Harry Potter, 04-01-1987, 568 Bong Bong St. Horsley NSW 2530, 20055, AVAILABLE\nD, 17, James Bond, 02-14-1989, 7 Alan Bond St. Perth WA 6000, 20065, AVAILABLE\nD, 18, Paris Hilton, 05-01-1977, 1 Hilton St. Melbourne VIC 3000, 10305, AVAILABLE\nA, 19, Lady Gaga, 06-01-1992, 3 Pork st. Hobart TAS 7000, SUPPORT\nD, 20, Robin Hood, 05-23-1999, 6 Nottingham Pl. Sydney NSW 2000, 10345, AVAILABLE\n</code></pre>\n"},{"tags":["java","selenium-webdriver","webdriver-manager","seleniummanager"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1692865769,"post_id":76967473,"comment_id":135682839,"body_markdown":"Did you update the driver too? Those are tied to specific Chrome versions.","body":"Did you update the driver too? Those are tied to specific Chrome versions."},{"owner":{"account_id":27938804,"reputation":102,"user_id":21335232,"display_name":"Bhairu"},"score":0,"creation_date":1692865899,"post_id":76967473,"comment_id":135682864,"body_markdown":"I have tried that one, but not worked.","body":"I have tried that one, but not worked."},{"owner":{"account_id":15994883,"reputation":3427,"user_id":11543023,"display_name":"djmonki"},"score":0,"creation_date":1693295692,"post_id":76967473,"comment_id":135738240,"body_markdown":"This maybe the issue: https://stackoverflow.com/a/76998277/11543023https://stackoverflow.com/a/76998277/11543023","body":"This maybe the issue: <a href=\"https://stackoverflow.com/a/76998277/11543023https://stackoverflow.com/a/76998277/11543023\">stackoverflow.com/a/76998277/11543023https://stackoverflow.c&zwnj;&#8203;om/&hellip;</a>"}],"owner":{"account_id":27938804,"reputation":102,"user_id":21335232,"display_name":"Bhairu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692866758,"creation_date":1692865626,"question_id":76967473,"body_markdown":"Post updating the chrome version to 116, I am able to lauch the browser but not able to lauch the application.\r\n\r\nimage link- [![enter image description here][1]][1]\r\n\r\nBelow code logic, I have tried and also I have tried the setproperty but no luck.\r\n\r\n    if(BrowserName.contains(&quot;Chrome&quot;) || BrowserName.contains(&quot;chrome&quot;) || BrowserName.contains(&quot;Google Chrome&quot;) || BrowserName.contains(&quot;GC&quot;))\r\n\t\t{\r\n\t\t\t//System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Users\\\\37029\\\\Documents\\\\Auto\\\\chromedriver-win64\\\\chromedriver-win64\\\\chromedriver.exe&quot;);\r\n\t\t\t\r\n\t\t\tdriver=WebDriverManager.chromedriver().create();\r\n\t\t\t\r\n\t\t\tChromeOptions options=new ChromeOptions();\r\n\t\t\toptions.setBrowserVersion(&quot;116&quot;);\r\n\t\t\toptions.setHeadless(false);\r\n\t\t\toptions.addArguments(&quot;start-maximized&quot;);\r\n\t\t\toptions.addArguments(&quot;disable-infobars&quot;);\r\n\t\t\toptions.addArguments(&quot;--disable-extensions&quot;);\r\n\t\t\toptions.addArguments(&quot;--disable-gpu&quot;);\r\n\t\t\toptions.addArguments(&quot;--disable-dev-shm-usage&quot;);\r\n\t\t\toptions.addArguments(&quot;--no-sandbox&quot;);\r\n\t\t\toptions.addArguments(&quot;--disable-in-process-stack-traces&quot;);\r\n\t\t\toptions.addArguments(&quot;--disable-logging&quot;);\r\n\t\t\toptions.addArguments(&quot;--log-level=3&quot;);\r\n\t\t\toptions.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n\t\t\r\n\t\t\tdriver=new ChromeDriver(options);\r\n\r\nExpected:\r\nupon lauching the browser I can also access my application on the same go.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BYEF9.png","title":"Unable to access the application upon updating the chrome browser(v116)","body":"<p>Post updating the chrome version to 116, I am able to lauch the browser but not able to lauch the application.</p>\n<p>image link- <a href=\"https://i.stack.imgur.com/BYEF9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BYEF9.png\" alt=\"enter image description here\" /></a></p>\n<p>Below code logic, I have tried and also I have tried the setproperty but no luck.</p>\n<pre><code>if(BrowserName.contains(&quot;Chrome&quot;) || BrowserName.contains(&quot;chrome&quot;) || BrowserName.contains(&quot;Google Chrome&quot;) || BrowserName.contains(&quot;GC&quot;))\n    {\n        //System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Users\\\\37029\\\\Documents\\\\Auto\\\\chromedriver-win64\\\\chromedriver-win64\\\\chromedriver.exe&quot;);\n        \n        driver=WebDriverManager.chromedriver().create();\n        \n        ChromeOptions options=new ChromeOptions();\n        options.setBrowserVersion(&quot;116&quot;);\n        options.setHeadless(false);\n        options.addArguments(&quot;start-maximized&quot;);\n        options.addArguments(&quot;disable-infobars&quot;);\n        options.addArguments(&quot;--disable-extensions&quot;);\n        options.addArguments(&quot;--disable-gpu&quot;);\n        options.addArguments(&quot;--disable-dev-shm-usage&quot;);\n        options.addArguments(&quot;--no-sandbox&quot;);\n        options.addArguments(&quot;--disable-in-process-stack-traces&quot;);\n        options.addArguments(&quot;--disable-logging&quot;);\n        options.addArguments(&quot;--log-level=3&quot;);\n        options.addArguments(&quot;--remote-allow-origins=*&quot;);\n    \n        driver=new ChromeDriver(options);\n</code></pre>\n<p>Expected:\nupon lauching the browser I can also access my application on the same go.</p>\n"},{"tags":["java","amazon-web-services","amazon-s3","aws-sdk"],"answers":[{"tags":[],"owner":{"account_id":1845098,"reputation":171667,"user_id":1695906,"display_name":"Michael - sqlbot"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1563650912,"creation_date":1563650912,"answer_id":57127921,"question_id":57125114,"body_markdown":"`PUT` requests to S3 don&#39;t support `multipart/form-data`.  The request body needs to contain nothing but the binary object data.  If you download your existing file from S3 and open it with a text editor, you&#39;ll find that S3 has preserved the multipart form structure inside the file, instead of interpreting it as a wrapper for the actual payload.","title":"Unable to play mp4 video uploaded to AWS S3 using pre-signed URL","body":"<p><code>PUT</code> requests to S3 don't support <code>multipart/form-data</code>.  The request body needs to contain nothing but the binary object data.  If you download your existing file from S3 and open it with a text editor, you'll find that S3 has preserved the multipart form structure inside the file, instead of interpreting it as a wrapper for the actual payload.</p>\n"},{"tags":[],"owner":{"account_id":11458263,"reputation":809,"user_id":8398636,"display_name":"Osama Bin Saleem"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632674786,"creation_date":1632674786,"answer_id":69336960,"question_id":57125114,"body_markdown":"To add to the above answer (for future readers), I was using formData() like below to send the put request. Adding the file directly to the payload worked for me. \r\n\r\nDon&#39;t do this: \r\n```\r\nvar bodyData = new FormData();\r\nbodyData.append(&#39;file&#39;, video);\r\n\r\naxios.put(res?.data?.uploadURL, bodyData, {\r\n```\r\n\r\nInstead, do this: \r\n```\r\naxios.put(res?.data?.uploadURL, video, {\r\n```\r\n","title":"Unable to play mp4 video uploaded to AWS S3 using pre-signed URL","body":"<p>To add to the above answer (for future readers), I was using formData() like below to send the put request. Adding the file directly to the payload worked for me.</p>\n<p>Don't do this:</p>\n<pre><code>var bodyData = new FormData();\nbodyData.append('file', video);\n\naxios.put(res?.data?.uploadURL, bodyData, {\n</code></pre>\n<p>Instead, do this:</p>\n<pre><code>axios.put(res?.data?.uploadURL, video, {\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3154135,"reputation":76,"user_id":2666886,"display_name":"Frank"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692866748,"creation_date":1692866748,"answer_id":76967621,"question_id":57125114,"body_markdown":"1.generatePresignedUrlRequest.setContentType(&quot;video/mp4&quot;);\r\n\r\n2.for your http request,\r\nadd header, Content-Type:video/mp4\r\nand set your content to binary format\r\n\r\n","title":"Unable to play mp4 video uploaded to AWS S3 using pre-signed URL","body":"<p>1.generatePresignedUrlRequest.setContentType(&quot;video/mp4&quot;);</p>\n<p>2.for your http request,\nadd header, Content-Type:video/mp4\nand set your content to binary format</p>\n"}],"owner":{"account_id":16016319,"reputation":95,"user_id":11558955,"display_name":"Junes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2979,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":57127921,"answer_count":3,"score":6,"last_activity_date":1692866748,"creation_date":1563628627,"question_id":57125114,"body_markdown":"I&#39;m uploading a `mp4` video to AWS S3 using a pre-signed URL, the upload succeeds but when I try to download the video from S3 and play it in a media player (VLC or quickTime), it doesn&#39;t play!.\r\n\r\nGenerated pre-signed URL works fine with `mp3` but the same problem as above also occurs for `WAV` and `FLAC`. \r\n\r\nCode to generate the pre-signed url:\r\n\r\n```java\r\npublic String getPreSignedS3Url( final String userId, final String fileName )\r\n    {\r\n        Date expiration = new Date();\r\n        long expTimeMillis = expiration.getTime();\r\n        expTimeMillis += urlExpiry;\r\n        expiration.setTime(expTimeMillis);\r\n\r\n        String objectKey = StringUtils.getObjectKey( userId, fileName );\r\n\r\n        GeneratePresignedUrlRequest generatePresignedUrlRequest = new GeneratePresignedUrlRequest(\r\n                recordingBucketName, objectKey)\r\n                .withMethod(HttpMethod.PUT)\r\n                .withExpiration(expiration);\r\n\r\n        URL url = s3Client.generatePresignedUrl(generatePresignedUrlRequest);\r\n\r\n        return url.toString();\r\n\r\n    }\r\n```\r\nAfter I get the pre-signed URL from the method above, I make a HTTP PUT  request from Postman with the multipart/form-data in the request body like this:\r\n\r\n```curl\r\n-H &#39;content-type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW&#39; \\\r\n  -F &#39;file=@/Users/john/Downloads/sampleDemo.mp4&#39;\r\n\r\n```\r\n\r\npre-signed url looks like this:\r\n\r\n```curl\r\nhttps://meeting-recording.s3.eu-west-2.amazonaws.com/331902257/sampleDemo.mp4?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Date=20190720T125751Z&amp;X-Amz-SignedHeaders=host&amp;X-Amz-Expires=3599&amp;X-Amz-Credential=AKIAZDSMLZ3VDKNXQUXH%2F20190720%2Feu-west-2%2Fs3%2Faws4_request&amp;X-Amz-Signature=dfb8054f0738e07e925e9880e4a8e5ebba0a1bd3c84a3ec78913239f65221992\r\n```\r\n\r\nI tried to set the content type to mp4 in the `getPreSignedS3Url()` method using `generatePresignedUrlRequest.setContentType( &quot;video/mp4&quot;  );` and add `Content-Type : &quot;video/mp4&quot;` in the HTTP PUT request header but it didn&#39;t work and it fails with an error `Signature doesn&#39;t match`.\r\n\r\n\r\nI&#39;m using S3 as my personal back-up hard-drive, I expect to upload video and audio files to S3 using a pre-signed URL, download them at some point in the future and be able to play them, but I&#39;m unable to play them after I have downloaded them.\r\n\r\nDoes anyone know what could be causing this?\r\n","title":"Unable to play mp4 video uploaded to AWS S3 using pre-signed URL","body":"<p>I'm uploading a <code>mp4</code> video to AWS S3 using a pre-signed URL, the upload succeeds but when I try to download the video from S3 and play it in a media player (VLC or quickTime), it doesn't play!.</p>\n\n<p>Generated pre-signed URL works fine with <code>mp3</code> but the same problem as above also occurs for <code>WAV</code> and <code>FLAC</code>. </p>\n\n<p>Code to generate the pre-signed url:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public String getPreSignedS3Url( final String userId, final String fileName )\n    {\n        Date expiration = new Date();\n        long expTimeMillis = expiration.getTime();\n        expTimeMillis += urlExpiry;\n        expiration.setTime(expTimeMillis);\n\n        String objectKey = StringUtils.getObjectKey( userId, fileName );\n\n        GeneratePresignedUrlRequest generatePresignedUrlRequest = new GeneratePresignedUrlRequest(\n                recordingBucketName, objectKey)\n                .withMethod(HttpMethod.PUT)\n                .withExpiration(expiration);\n\n        URL url = s3Client.generatePresignedUrl(generatePresignedUrlRequest);\n\n        return url.toString();\n\n    }\n</code></pre>\n\n<p>After I get the pre-signed URL from the method above, I make a HTTP PUT  request from Postman with the multipart/form-data in the request body like this:</p>\n\n<pre><code>-H 'content-type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW' \\\n  -F 'file=@/Users/john/Downloads/sampleDemo.mp4'\n\n</code></pre>\n\n<p>pre-signed url looks like this:</p>\n\n<pre><code>https://meeting-recording.s3.eu-west-2.amazonaws.com/331902257/sampleDemo.mp4?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Date=20190720T125751Z&amp;X-Amz-SignedHeaders=host&amp;X-Amz-Expires=3599&amp;X-Amz-Credential=AKIAZDSMLZ3VDKNXQUXH%2F20190720%2Feu-west-2%2Fs3%2Faws4_request&amp;X-Amz-Signature=dfb8054f0738e07e925e9880e4a8e5ebba0a1bd3c84a3ec78913239f65221992\n</code></pre>\n\n<p>I tried to set the content type to mp4 in the <code>getPreSignedS3Url()</code> method using <code>generatePresignedUrlRequest.setContentType( \"video/mp4\"  );</code> and add <code>Content-Type : \"video/mp4\"</code> in the HTTP PUT request header but it didn't work and it fails with an error <code>Signature doesn't match</code>.</p>\n\n<p>I'm using S3 as my personal back-up hard-drive, I expect to upload video and audio files to S3 using a pre-signed URL, download them at some point in the future and be able to play them, but I'm unable to play them after I have downloaded them.</p>\n\n<p>Does anyone know what could be causing this?</p>\n"},{"tags":["java","optaplanner","timefold"],"comments":[{"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"score":0,"creation_date":1688195549,"post_id":76591299,"comment_id":135044172,"body_markdown":"This question is impossible to answer without knowing what your domain model looks like. Unless you are asking for a domain model design as well, of course.","body":"This question is impossible to answer without knowing what your domain model looks like. Unless you are asking for a domain model design as well, of course."},{"owner":{"account_id":4005154,"reputation":106,"user_id":3299989,"display_name":"MattWolc24"},"score":0,"creation_date":1688325656,"post_id":76591299,"comment_id":135055907,"body_markdown":"@Luk&#225;šPetrovick&#253; It is the same as the hello world quickstart. I&#39;ve just renamed the Lesson class to Job.","body":"@Luk&#225;šPetrovick&#253; It is the same as the hello world quickstart. I&#39;ve just renamed the Lesson class to Job."}],"answers":[{"tags":[],"owner":{"account_id":21124506,"reputation":66,"user_id":15529989,"display_name":"Nikolai Sitnikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692866561,"creation_date":1692866561,"answer_id":76967591,"question_id":76591299,"body_markdown":"I would say you should adjust your domain model to use PlanningListVariable to assign jobs to machine. This will provide you with previous/next element reference and allow to write filter in you constraint comparing widths of your job.","title":"Add soft score penalty for jobs whose next job has a different product width","body":"<p>I would say you should adjust your domain model to use PlanningListVariable to assign jobs to machine. This will provide you with previous/next element reference and allow to write filter in you constraint comparing widths of your job.</p>\n"}],"owner":{"account_id":4005154,"reputation":106,"user_id":3299989,"display_name":"MattWolc24"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692866561,"creation_date":1688148079,"question_id":76591299,"body_markdown":"I don&#39;t know a lot about Java Streams, I&#39;m learning about it right now but I&#39;m trying to solve this problem if anyone has advice:\r\n\r\nSay I&#39;m doing job scheduling, and each job has a width X. When we do a new job with a different width, the machine has to be reconfigured, so we prefer to do all jobs of width X in a row. I&#39;m trying to set up a soft score penalty if the next job in the queue has a different width.\r\n\r\n     private Constraint customConstraint(ConstraintFactory constraintFactory) {\r\n        return constraintFactory.forEach(Job.class)\r\n            //filter down to jobs whose next job has a different width\r\n            .penalize(HardSoftScore.ONE_SOFT)\r\n            .asConstraint(&quot;Width change&quot;);\r\n    }\r\n\r\nOr, if we use the hello world quickstart as an example, a penalty for when a teacher has to change rooms. Does anyone have advice? Thank you.","title":"Add soft score penalty for jobs whose next job has a different product width","body":"<p>I don't know a lot about Java Streams, I'm learning about it right now but I'm trying to solve this problem if anyone has advice:</p>\n<p>Say I'm doing job scheduling, and each job has a width X. When we do a new job with a different width, the machine has to be reconfigured, so we prefer to do all jobs of width X in a row. I'm trying to set up a soft score penalty if the next job in the queue has a different width.</p>\n<pre><code> private Constraint customConstraint(ConstraintFactory constraintFactory) {\n    return constraintFactory.forEach(Job.class)\n        //filter down to jobs whose next job has a different width\n        .penalize(HardSoftScore.ONE_SOFT)\n        .asConstraint(&quot;Width change&quot;);\n}\n</code></pre>\n<p>Or, if we use the hello world quickstart as an example, a penalty for when a teacher has to change rooms. Does anyone have advice? Thank you.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1690907895,"post_id":76813517,"comment_id":135417265,"body_markdown":"You very well could, but it will likely also load that entire data into memory in order to send the request. If that&#39;s acceptable, then by all means.","body":"You very well could, but it will likely also load that entire data into memory in order to send the request. If that&#39;s acceptable, then by all means."},{"owner":{"account_id":4668619,"reputation":442,"user_id":3781025,"accept_rate":75,"display_name":"Roger that"},"score":0,"creation_date":1690908278,"post_id":76813517,"comment_id":135417344,"body_markdown":"Thanks, just edited the question, in memory is not an option.","body":"Thanks, just edited the question, in memory is not an option."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1690908533,"post_id":76813517,"comment_id":135417403,"body_markdown":"In my mind, your current solution sounds feasible to me. I don&#39;t see any major advantage to be gained by changing how you&#39;re sending that data - you&#39;ll end up basically re-implementing file downloading on the front-end side, and streaming data to it using your service instead of letting apache do the file transfer. There&#39;s certainly ways to do this (websockets come to mind), but again I don&#39;t see any good reason to do so.","body":"In my mind, your current solution sounds feasible to me. I don&#39;t see any major advantage to be gained by changing how you&#39;re sending that data - you&#39;ll end up basically re-implementing file downloading on the front-end side, and streaming data to it using your service instead of letting apache do the file transfer. There&#39;s certainly ways to do this (websockets come to mind), but again I don&#39;t see any good reason to do so."},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1690935163,"post_id":76813517,"comment_id":135421380,"body_markdown":"If you already have working code, this wouldn&#39;t take long to test.  Have you tried it?","body":"If you already have working code, this wouldn&#39;t take long to test.  Have you tried it?"},{"owner":{"account_id":4668619,"reputation":442,"user_id":3781025,"accept_rate":75,"display_name":"Roger that"},"score":0,"creation_date":1690965464,"post_id":76813517,"comment_id":135424919,"body_markdown":"@Rogue the advantage is that I don&#39;t use server disk space, whch is currently a problem. I cannot generate the Excel in the client side eighter if that is what you are suggesting as per the client runs out of memory. My ideal scenario is o stream the bytes that describe the opening of the file, stream the data dynamically as soon as it is read from the database, not keeping it in memory for long and in small chunks and once done with the data send the bytes that close the file making it a valid xls file to be opened by the client.","body":"@Rogue the advantage is that I don&#39;t use server disk space, whch is currently a problem. I cannot generate the Excel in the client side eighter if that is what you are suggesting as per the client runs out of memory. My ideal scenario is o stream the bytes that describe the opening of the file, stream the data dynamically as soon as it is read from the database, not keeping it in memory for long and in small chunks and once done with the data send the bytes that close the file making it a valid xls file to be opened by the client."}],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691514765,"creation_date":1691514765,"answer_id":76861830,"question_id":76813517,"body_markdown":"No, you cannot do that. Why not? Because `.xls` and `.xlsx` formats are not streamable. The former is a binary format, the latter is a compressed ZIP archive of XML and binary files.","title":"Can I stream a Excel file row by row to the HttpRequest output stream?","body":"<p>No, you cannot do that. Why not? Because <code>.xls</code> and <code>.xlsx</code> formats are not streamable. The former is a binary format, the latter is a compressed ZIP archive of XML and binary files.</p>\n"},{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692866543,"creation_date":1692866543,"answer_id":76967589,"question_id":76813517,"body_markdown":"Excel file is a binary file and when you read/write its content you can not distinguish a row (where it starts or ends). So, no you can not send it row by row as you never tell how to split the file into separate rows. The only option is that you work with data that being written to excel and transfer data in textual format and on the receiving side the information will be written into excel. But I don&#39;t believe that that&#39;s what you want, as it looks like it is responsibility of your logic to create excel file. Once you have an excel file it is just a binary info that can not be analyzed. You can send it as a whole only","title":"Can I stream a Excel file row by row to the HttpRequest output stream?","body":"<p>Excel file is a binary file and when you read/write its content you can not distinguish a row (where it starts or ends). So, no you can not send it row by row as you never tell how to split the file into separate rows. The only option is that you work with data that being written to excel and transfer data in textual format and on the receiving side the information will be written into excel. But I don't believe that that's what you want, as it looks like it is responsibility of your logic to create excel file. Once you have an excel file it is just a binary info that can not be analyzed. You can send it as a whole only</p>\n"}],"owner":{"account_id":4668619,"reputation":442,"user_id":3781025,"accept_rate":75,"display_name":"Roger that"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1692866543,"creation_date":1690906604,"question_id":76813517,"body_markdown":"I am using the class org.apache.poi.xssf.streaming.SXSSWorkbook to generate a report in Excel format that is later downloaded. This class creates a temporary file to manipulate and once done I am sending the final file to the output stream of my HttpResponse.\r\n\r\nCan I stream the rows of the Excel file while they are being created directly to the outpuststream of the HttpResponse? In other works avoiding the creation of the temporary file?\r\n\r\nThe files are huge, so doing it all in memory is also not an option.","title":"Can I stream a Excel file row by row to the HttpRequest output stream?","body":"<p>I am using the class org.apache.poi.xssf.streaming.SXSSWorkbook to generate a report in Excel format that is later downloaded. This class creates a temporary file to manipulate and once done I am sending the final file to the output stream of my HttpResponse.</p>\n<p>Can I stream the rows of the Excel file while they are being created directly to the outpuststream of the HttpResponse? In other works avoiding the creation of the temporary file?</p>\n<p>The files are huge, so doing it all in memory is also not an option.</p>\n"},{"tags":["java","firebase","google-cloud-platform","google-cloud-firestore","java-17"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1692806561,"post_id":76963078,"comment_id":135675261,"body_markdown":"What is `DocumentSnapshot`? If this comes from an external framework not of your own creation, name the framework and provide a link.","body":"What is <code>DocumentSnapshot</code>? If this comes from an external framework not of your own creation, name the framework and provide a link."},{"owner":{"account_id":426109,"reputation":302012,"user_id":807126,"display_name":"Doug Stevenson"},"score":1,"creation_date":1692806584,"post_id":76963078,"comment_id":135675264,"body_markdown":"Would you like to show us `MyRecord`?  We should have enough information in the question to be able to duplicate the behavior you observe on our own.","body":"Would you like to show us <code>MyRecord</code>?  We should have enough information in the question to be able to duplicate the behavior you observe on our own."},{"owner":{"account_id":9292970,"reputation":179,"user_id":6900853,"accept_rate":86,"display_name":"JKawa"},"score":0,"creation_date":1692807261,"post_id":76963078,"comment_id":135675407,"body_markdown":"Updated the post.","body":"Updated the post."}],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1692866306,"creation_date":1692865748,"answer_id":76967490,"question_id":76963078,"body_markdown":"It doesn&#39;t make any difference if you&#39;re using a regular Java class or a record. You&#39;re getting the following error:\r\n\r\n&gt; java.lang.RuntimeException: No properties to serialize found on class com.comp.api.firestorerest.model.myrecord.MyRecord\r\n\r\nBecause the names of the fields inside the record class are different from the ones that exist in the database. To make things clear, I&#39;ll show you an example. Let&#39;s assume we have a collection of documents that contain a single field called `name` and a record class that looks like this:\r\n\r\n```\r\npublic record MyRecord(\r\n        String name\r\n) {}\r\n```\r\n\r\nSo when you try to map a Firestore document into an object of type `MyRecord` using the following line of code:\r\n\r\n    MyRecord myRecord = document.toObject(MyRecord.class);\r\n\r\nYou will indeed get the above error, and that&#39;s because in order to access the `name` field inside the record class, you&#39;ll have to call `name()`, which is actually the getter of the field. In order to deserialize such an object, the getter should be named `getName()` and not only `name()`, hence the error.\r\n\r\nBesides that, in order to create a new instance of the record class, Firestore SDK needs the no-argument constructor. Which in your `MyRecord` class is **not** present. That&#39;s because when you create a constructor with an argument, the no-argument constructor goes away. So to be able to deserialize such objects, it&#39;s mandatory to define the no-argument constructor. Besides that, you should also use an annotation so you can indicate the name of the field in class to exactly match the one in the database. So the above record class should be rewritten like this:\r\n\r\n```\r\npublic record MyRecord(\r\n        @PropertyName(&quot;name&quot;)\r\n        String getName\r\n) {\r\n    public MyRecord() {\r\n        this(&quot;&quot;);\r\n    }\r\n}\r\n```\r\n\r\nNow you&#39;ll be able to map a document into an object of a record class. To get the name, you can use the following line of code:\r\n\r\n    String name = document.toObject(MyRecord.class).getName();","title":"Converting POJO to &#39;record&quot; as a result of migrating from Java 8 to 17 causes error Firestore error","body":"<p>It doesn't make any difference if you're using a regular Java class or a record. You're getting the following error:</p>\n<blockquote>\n<p>java.lang.RuntimeException: No properties to serialize found on class com.comp.api.firestorerest.model.myrecord.MyRecord</p>\n</blockquote>\n<p>Because the names of the fields inside the record class are different from the ones that exist in the database. To make things clear, I'll show you an example. Let's assume we have a collection of documents that contain a single field called <code>name</code> and a record class that looks like this:</p>\n<pre><code>public record MyRecord(\n        String name\n) {}\n</code></pre>\n<p>So when you try to map a Firestore document into an object of type <code>MyRecord</code> using the following line of code:</p>\n<pre><code>MyRecord myRecord = document.toObject(MyRecord.class);\n</code></pre>\n<p>You will indeed get the above error, and that's because in order to access the <code>name</code> field inside the record class, you'll have to call <code>name()</code>, which is actually the getter of the field. In order to deserialize such an object, the getter should be named <code>getName()</code> and not only <code>name()</code>, hence the error.</p>\n<p>Besides that, in order to create a new instance of the record class, Firestore SDK needs the no-argument constructor. Which in your <code>MyRecord</code> class is <strong>not</strong> present. That's because when you create a constructor with an argument, the no-argument constructor goes away. So to be able to deserialize such objects, it's mandatory to define the no-argument constructor. Besides that, you should also use an annotation so you can indicate the name of the field in class to exactly match the one in the database. So the above record class should be rewritten like this:</p>\n<pre><code>public record MyRecord(\n        @PropertyName(&quot;name&quot;)\n        String getName\n) {\n    public MyRecord() {\n        this(&quot;&quot;);\n    }\n}\n</code></pre>\n<p>Now you'll be able to map a document into an object of a record class. To get the name, you can use the following line of code:</p>\n<pre><code>String name = document.toObject(MyRecord.class).getName();\n</code></pre>\n"}],"owner":{"account_id":9292970,"reputation":179,"user_id":6900853,"accept_rate":86,"display_name":"JKawa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76967490,"answer_count":1,"score":0,"last_activity_date":1692866306,"creation_date":1692806366,"question_id":76963078,"body_markdown":"Following migration from Java 8 to 17, I thought of converting POJO models to records for better readability. However, when making the call to `DocumentSnapshot.toObject(MyRecord.class)` in this block of code \r\n```\r\nDocumentSnapshot document = future.get();\r\nif (document.exists()) {\r\n    MyRecord myRecord = document.toObject(MyRecord.class);\r\n\r\n    if (myRecord != null) {\r\n        fetchData(myRecord);\r\n    }\r\n\r\n    return myRecord;\r\n}\r\n```\r\n, a RuntimeException is thrown: `java.lang.RuntimeException: No properties to serialize found on class com.comp.api.firestorerest.model.myrecord.MyRecord`.\r\n\r\nI did some research to learn more about records and Firestore, as I&#39;m trying to see if this can actually be accomplished by combining records with the Firestore library, but I haven&#39;t found much. Is there a way to use records this way? Otherwise, I&#39;ll just revert to POJO.\r\n\r\n`DocumentSnapshot` comes from the `google-cloud-firestore` [library][1].\r\n\r\nHere&#39;s a sample of `MyRecord`\r\n\r\n```\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\npublic record MyRecord(String aString1,\r\n                            String aString2,\r\n                            String aString3,\r\n                            String aString4,\r\n                            String aString5,\r\n                            String aString6,\r\n                            int anInt,\r\n                            Map&lt;String, List&lt;String&gt;&gt; services) {\r\n}\r\n```\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/com.google.cloud/google-cloud-firestore/3.14.0","title":"Converting POJO to &#39;record&quot; as a result of migrating from Java 8 to 17 causes error Firestore error","body":"<p>Following migration from Java 8 to 17, I thought of converting POJO models to records for better readability. However, when making the call to <code>DocumentSnapshot.toObject(MyRecord.class)</code> in this block of code</p>\n<pre><code>DocumentSnapshot document = future.get();\nif (document.exists()) {\n    MyRecord myRecord = document.toObject(MyRecord.class);\n\n    if (myRecord != null) {\n        fetchData(myRecord);\n    }\n\n    return myRecord;\n}\n</code></pre>\n<p>, a RuntimeException is thrown: <code>java.lang.RuntimeException: No properties to serialize found on class com.comp.api.firestorerest.model.myrecord.MyRecord</code>.</p>\n<p>I did some research to learn more about records and Firestore, as I'm trying to see if this can actually be accomplished by combining records with the Firestore library, but I haven't found much. Is there a way to use records this way? Otherwise, I'll just revert to POJO.</p>\n<p><code>DocumentSnapshot</code> comes from the <code>google-cloud-firestore</code> <a href=\"https://mvnrepository.com/artifact/com.google.cloud/google-cloud-firestore/3.14.0\" rel=\"nofollow noreferrer\">library</a>.</p>\n<p>Here's a sample of <code>MyRecord</code></p>\n<pre><code>@JsonInclude(JsonInclude.Include.NON_NULL)\npublic record MyRecord(String aString1,\n                            String aString2,\n                            String aString3,\n                            String aString4,\n                            String aString5,\n                            String aString6,\n                            int anInt,\n                            Map&lt;String, List&lt;String&gt;&gt; services) {\n}\n</code></pre>\n"},{"tags":["java","gradle","logging"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1692865999,"post_id":76967501,"comment_id":135682900,"body_markdown":"&quot;I haven&#39;t changed anything besides the build tool&quot;. So, you mean you have changed your whole dependency management, and the way your resources and configurations are included.","body":"&quot;I haven&#39;t changed anything besides the build tool&quot;. So, you mean you have changed your whole dependency management, and the way your resources and configurations are included."},{"owner":{"account_id":9183711,"reputation":25,"user_id":6826736,"display_name":"Nessarose"},"score":0,"creation_date":1692866746,"post_id":76967501,"comment_id":135683044,"body_markdown":"Yes, but no code or logging properties file, so my first thought was that it is something related to gradle, but I can&#39;t find any logging reference in it","body":"Yes, but no code or logging properties file, so my first thought was that it is something related to gradle, but I can&#39;t find any logging reference in it"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1692867021,"post_id":76967501,"comment_id":135683096,"body_markdown":"Gradle doesn&#39;t directly affect your logging. The libraries and their versions might, or which configuration file is found first.","body":"Gradle doesn&#39;t directly affect your logging. The libraries and their versions might, or which configuration file is found first."}],"owner":{"account_id":9183711,"reputation":25,"user_id":6826736,"display_name":"Nessarose"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692865813,"creation_date":1692865813,"question_id":76967501,"body_markdown":"Well, I changed my project from maven to gradle to be able to use some plugins that I can&#39;t find in maven.\r\nSince the moment I changed it, some logging messages are showing in the console.\r\nIt seems they are from JavaFX Launcher, but I don&#39;t know how to turn them off.\r\n\r\n    10:20:50.085 [JavaFX-Launcher] INFO net.fortuna.ical4j.util.Configurator -- ical4j.properties not found.\r\n    ago 24, 2023 10:20:49 A.�M. com.sun.javafx.application.PlatformImpl startup\r\n    WARNING: Unsupported JavaFX configuration: classes were loaded from &#39;unnamed module @2efff350&#39;\r\n    10:20:51.484 [JavaFX-Launcher] INFO org.hibernate.Version -- HHH000412: Hibernate ORM core version 6.2.7.Final\r\n\r\nThis are some of them but there are lots of info messages. I haven&#39;t changed anything besides the build tool.\r\nAny idea where are they coming from and how to change its level?\r\nThank you!","title":"JavaFX-Launcher? logger level","body":"<p>Well, I changed my project from maven to gradle to be able to use some plugins that I can't find in maven.\nSince the moment I changed it, some logging messages are showing in the console.\nIt seems they are from JavaFX Launcher, but I don't know how to turn them off.</p>\n<pre><code>10:20:50.085 [JavaFX-Launcher] INFO net.fortuna.ical4j.util.Configurator -- ical4j.properties not found.\nago 24, 2023 10:20:49 A.�M. com.sun.javafx.application.PlatformImpl startup\nWARNING: Unsupported JavaFX configuration: classes were loaded from 'unnamed module @2efff350'\n10:20:51.484 [JavaFX-Launcher] INFO org.hibernate.Version -- HHH000412: Hibernate ORM core version 6.2.7.Final\n</code></pre>\n<p>This are some of them but there are lots of info messages. I haven't changed anything besides the build tool.\nAny idea where are they coming from and how to change its level?\nThank you!</p>\n"},{"tags":["java","spring-boot","dependency-injection"],"comments":[{"owner":{"account_id":12259204,"reputation":2452,"user_id":8947430,"display_name":"Ismail"},"score":0,"creation_date":1692693248,"post_id":76951220,"comment_id":135655205,"body_markdown":"Are you testing your code only be using the above test class?","body":"Are you testing your code only be using the above test class?"},{"owner":{"account_id":29273197,"reputation":21,"user_id":22427515,"display_name":"Kashyap jalela"},"score":0,"creation_date":1692695380,"post_id":76951220,"comment_id":135655634,"body_markdown":"@Ismail Yes as of now. I thought it would be better idea to test using junit first","body":"@Ismail Yes as of now. I thought it would be better idea to test using junit first"},{"owner":{"account_id":12259204,"reputation":2452,"user_id":8947430,"display_name":"Ismail"},"score":1,"creation_date":1692704958,"post_id":76951220,"comment_id":135657664,"body_markdown":"In your test case, the spring context is not active, your are only mocking the dependencies using Mockito.","body":"In your test case, the spring context is not active, your are only mocking the dependencies using Mockito."}],"answers":[{"tags":[],"owner":{"account_id":970256,"reputation":892,"user_id":992940,"accept_rate":67,"display_name":"Dmitrii Bocharov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692865468,"creation_date":1692865468,"answer_id":76967457,"question_id":76951220,"body_markdown":"Your test doesn&#39;t &quot;turn on spring magic&quot;. As correctly pointed out in the comments, you need to activate the spring context.\r\n\r\nWhat&#39;s currently happening is that mockito takes the first suitable candidate to be injected into the Factory object. `@Qualifier` just doesn&#39;t play any role in this case. You can take a look here at how mockito does it: https://github.com/mockito/mockito/blob/87a99dd87a4b1ca1ed356c4bd691bf01f8efec77/src/main/java/org/mockito/internal/configuration/injection/ConstructorInjection.java#L81. You can prove it as well by moving `@Mock` fields in your factory - you&#39;ll have different result for your test.\r\n\r\nIn order to turn on the spring test context and its features in your test, you can for example annotate it with `@SpringBootTest` and `@RunWith(SpringRunner.class)`. Then you don&#39;t need to mock anything, you can just autowire everything.\r\n\r\n```java\r\nimport org.junit.Test;\r\nimport org.junit.runner.RunWith;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.annotation.Qualifier;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.test.context.junit4.SpringRunner;\r\n\r\nimport static org.junit.Assert.assertEquals;\r\n\r\n@RunWith(SpringRunner.class)\r\n@SpringBootTest\r\npublic class FactoryTest {\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;ChildClass&quot;)\r\n    private ChildClass childClass;\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;ParentClass&quot;)\r\n    private ParentClass parentClass;\r\n\r\n    @Autowired\r\n    private Factory factory;\r\n\r\n    @Test\r\n    public void getObjectTest() {\r\n        assertEquals(parentClass, factory.getObject(true));\r\n        assertEquals(childClass, factory.getObject(false));\r\n    }\r\n}\r\n```\r\n\r\nAnother option without spring context is to create Factory object yourself, without `@InjectMocks`. For example, like this:\r\n\r\n```java\r\nimport org.junit.Before;\r\nimport org.junit.Test;\r\nimport org.junit.runner.RunWith;\r\nimport org.mockito.Mock;\r\nimport org.mockito.junit.MockitoJUnitRunner;\r\n\r\nimport static org.junit.Assert.assertEquals;\r\n\r\n@RunWith(MockitoJUnitRunner.class)\r\npublic class FactoryTest {\r\n\r\n    @Mock(name = &quot;childClass&quot;)\r\n    private ChildClass childClass;\r\n\r\n    @Mock(name = &quot;parentClass&quot;)\r\n    private ParentClass parentClass;\r\n\r\n    private Factory factory;\r\n\r\n    @Before\r\n    public void init() {\r\n        factory = new Factory(parentClass, childClass);\r\n    }\r\n\r\n    @Test\r\n    public void getObjectTest() {\r\n        assertEquals(parentClass, factory.getObject(true));\r\n        assertEquals(childClass, factory.getObject(false));\r\n\r\n    }\r\n}\r\n```","title":"Spring Boot dependency injection sets object of childClass instead of parent Class","body":"<p>Your test doesn't &quot;turn on spring magic&quot;. As correctly pointed out in the comments, you need to activate the spring context.</p>\n<p>What's currently happening is that mockito takes the first suitable candidate to be injected into the Factory object. <code>@Qualifier</code> just doesn't play any role in this case. You can take a look here at how mockito does it: <a href=\"https://github.com/mockito/mockito/blob/87a99dd87a4b1ca1ed356c4bd691bf01f8efec77/src/main/java/org/mockito/internal/configuration/injection/ConstructorInjection.java#L81\" rel=\"nofollow noreferrer\">https://github.com/mockito/mockito/blob/87a99dd87a4b1ca1ed356c4bd691bf01f8efec77/src/main/java/org/mockito/internal/configuration/injection/ConstructorInjection.java#L81</a>. You can prove it as well by moving <code>@Mock</code> fields in your factory - you'll have different result for your test.</p>\n<p>In order to turn on the spring test context and its features in your test, you can for example annotate it with <code>@SpringBootTest</code> and <code>@RunWith(SpringRunner.class)</code>. Then you don't need to mock anything, you can just autowire everything.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.junit4.SpringRunner;\n\nimport static org.junit.Assert.assertEquals;\n\n@RunWith(SpringRunner.class)\n@SpringBootTest\npublic class FactoryTest {\n\n    @Autowired\n    @Qualifier(&quot;ChildClass&quot;)\n    private ChildClass childClass;\n\n    @Autowired\n    @Qualifier(&quot;ParentClass&quot;)\n    private ParentClass parentClass;\n\n    @Autowired\n    private Factory factory;\n\n    @Test\n    public void getObjectTest() {\n        assertEquals(parentClass, factory.getObject(true));\n        assertEquals(childClass, factory.getObject(false));\n    }\n}\n</code></pre>\n<p>Another option without spring context is to create Factory object yourself, without <code>@InjectMocks</code>. For example, like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.junit.Before;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.Mock;\nimport org.mockito.junit.MockitoJUnitRunner;\n\nimport static org.junit.Assert.assertEquals;\n\n@RunWith(MockitoJUnitRunner.class)\npublic class FactoryTest {\n\n    @Mock(name = &quot;childClass&quot;)\n    private ChildClass childClass;\n\n    @Mock(name = &quot;parentClass&quot;)\n    private ParentClass parentClass;\n\n    private Factory factory;\n\n    @Before\n    public void init() {\n        factory = new Factory(parentClass, childClass);\n    }\n\n    @Test\n    public void getObjectTest() {\n        assertEquals(parentClass, factory.getObject(true));\n        assertEquals(childClass, factory.getObject(false));\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29273197,"reputation":21,"user_id":22427515,"display_name":"Kashyap jalela"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1692865468,"creation_date":1692691189,"question_id":76951220,"body_markdown":"I am trying to implement the factory design pattern which returns different class object based on argument. I need parent class object for one argument and child class for another. \r\nparent class is extending one abstract class which in turn implementing the interface.\r\n\r\nI am passing the argument for parent class. But the object returned by factory is of childClass. I tried to debug and found that when factory constructor is called the object passed in parent class variable is of child class only. I am not able to rectify how same is happening and how to resolve the same. \r\nI also used lomboks @requiredArgsConstructor on factory to no avail.\r\n\r\nHere is sudo code for same. I am using Junit testing to test my code before going further with application testing\r\nspring-boot.version :- 2.3.9.RELEASE\r\nJDK :- 1.8\r\n\r\n\r\n\r\n```\r\npublic interface Interface {\r\n   \r\n}\r\n```\r\n\r\n```\r\n@RequiredArgsConstructor\r\n@Component\r\npublic abstract class AbstractClass implements Interface{\r\n\r\n}\r\n```\r\n\r\n\r\n```\r\n@Slf4j\r\n@Component(&quot;ParentClass&quot;)\r\npublic class ParentClass extends AbstractClass {\r\n\r\n}\r\n```\r\n\r\n\r\n```\r\n\r\n@Slf4j\r\n@Component(&quot;ChildClass&quot;)\r\npublic class ChildClass extends ParentClass {\r\n}\r\n```\r\n\r\n\r\n```\r\n@Component\r\n@Slf4j\r\npublic class Factory {\r\n\r\n\tprivate final ParentClass parentClass;\r\n    private final ChildClass childClass;\r\n\r\n\tFactory(@Qualifier(&quot;ParentClass&quot;) ParentClass parentClass,@Qualifier(&quot;ChildClass&quot;) ChildClass childClass) {\r\n      \r\n        this.ParentClass = parentClass;\r\n        this.ChildClass = childClass;\r\n    }\r\n\t \r\n\tpublic Interface getObject(boolean isParent){\r\n\t\t\tif(isParent)\r\n\t\t\t\treturn parentClass;\r\n\t\t\telse\r\n\t\t\t\treturn childClass;\r\n\t\r\n\t}\r\n}\r\n```\r\n\r\n\r\n```\r\n\r\n\r\n@RunWith(MockitoJUnitRunner.class)\r\npublic class FactoryTest {\r\n\t@InjectMocks\r\n    private Factory factory;\r\n\t\r\n\t@Mock\r\n    private ParentClass parentClass;\r\n    @Mock\r\n    private ChildClass childClass;\r\n\t\r\n\t@Test\r\n    public void getObjectTest() {\r\n       \r\n        assertEquals(parentClass, factory.getObject(true));\r\n\r\n    }\r\n}\r\n```\r\n\r\n\r\n","title":"Spring Boot dependency injection sets object of childClass instead of parent Class","body":"<p>I am trying to implement the factory design pattern which returns different class object based on argument. I need parent class object for one argument and child class for another.\nparent class is extending one abstract class which in turn implementing the interface.</p>\n<p>I am passing the argument for parent class. But the object returned by factory is of childClass. I tried to debug and found that when factory constructor is called the object passed in parent class variable is of child class only. I am not able to rectify how same is happening and how to resolve the same.\nI also used lomboks @requiredArgsConstructor on factory to no avail.</p>\n<p>Here is sudo code for same. I am using Junit testing to test my code before going further with application testing\nspring-boot.version :- 2.3.9.RELEASE\nJDK :- 1.8</p>\n<pre><code>public interface Interface {\n   \n}\n</code></pre>\n<pre><code>@RequiredArgsConstructor\n@Component\npublic abstract class AbstractClass implements Interface{\n\n}\n</code></pre>\n<pre><code>@Slf4j\n@Component(&quot;ParentClass&quot;)\npublic class ParentClass extends AbstractClass {\n\n}\n</code></pre>\n<pre><code>\n@Slf4j\n@Component(&quot;ChildClass&quot;)\npublic class ChildClass extends ParentClass {\n}\n</code></pre>\n<pre><code>@Component\n@Slf4j\npublic class Factory {\n\n    private final ParentClass parentClass;\n    private final ChildClass childClass;\n\n    Factory(@Qualifier(&quot;ParentClass&quot;) ParentClass parentClass,@Qualifier(&quot;ChildClass&quot;) ChildClass childClass) {\n      \n        this.ParentClass = parentClass;\n        this.ChildClass = childClass;\n    }\n     \n    public Interface getObject(boolean isParent){\n            if(isParent)\n                return parentClass;\n            else\n                return childClass;\n    \n    }\n}\n</code></pre>\n<pre><code>\n\n@RunWith(MockitoJUnitRunner.class)\npublic class FactoryTest {\n    @InjectMocks\n    private Factory factory;\n    \n    @Mock\n    private ParentClass parentClass;\n    @Mock\n    private ChildClass childClass;\n    \n    @Test\n    public void getObjectTest() {\n       \n        assertEquals(parentClass, factory.getObject(true));\n\n    }\n}\n</code></pre>\n"},{"tags":["java","string","algorithm","metrics"],"comments":[{"owner":{"account_id":12931984,"reputation":7896,"user_id":9350720,"display_name":"Abhinav Mathur"},"score":1,"creation_date":1662727013,"post_id":73662162,"comment_id":130078851,"body_markdown":"What is wrong with your approach?","body":"What is wrong with your approach?"}],"answers":[{"tags":[],"owner":{"account_id":1397805,"reputation":10162,"user_id":1327235,"display_name":"Juan Lopes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662729289,"creation_date":1662729289,"answer_id":73662744,"question_id":73662162,"body_markdown":"The code you provided does not seem related to the problem you described.\r\n\r\nThe problem asks to apply a simple rule for chars (Ai, Bi) from the original string to construct a new string C. There are only three rules:\r\n\r\n- If Ai == Bi, Ci = &quot;P&quot;\r\n- Otherwise, if A contains char Bi, Ci = &quot;S&quot;\r\n- Otherwise, Ci = &quot;I&quot;\r\n\r\nYou can do that in a simple way using stream API:\r\n\r\n```java\r\nString problem(String A, String B) {\r\n    // construct a set of all chars in A\r\n    Set&lt;Integer&gt; aChars = A.chars().boxed().collect(Collectors.toSet());\r\n\r\n    // apply rules for chars Ai, Bi\r\n    return IntStream.range(0, A.length())\r\n            .mapToObj(i -&gt; A.charAt(i) == B.charAt(i) ? &quot;P&quot; :\r\n                    aChars.contains((int) B.charAt(i)) ? &quot;S&quot; : &quot;I&quot;)\r\n            .collect(Collectors.joining());\r\n}\r\n```\r\n\r\nOr, more verbosely, without it:\r\n\r\n```java\r\nString problem(String A, String B) {\r\n    Set&lt;Character&gt; aChars = new HashSet&lt;&gt;();\r\n    for (int i = 0; i &lt; A.length(); i++) {\r\n        aChars.add(A.charAt(i));\r\n    }\r\n\r\n    StringBuilder builder = new StringBuilder();\r\n    for (int i = 0; i &lt; A.length(); i++) {\r\n        if (A.charAt(i) == B.charAt(i)) {\r\n            builder.append(&quot;P&quot;);\r\n        } else if (aChars.contains(B.charAt(i))) {\r\n            builder.append(&quot;S&quot;);\r\n        } else {\r\n            builder.append(&quot;I&quot;);\r\n        }\r\n    }\r\n    return builder.toString();\r\n}\r\n```\r\n","title":"String metrics alghoritms in Java","body":"<p>The code you provided does not seem related to the problem you described.</p>\n<p>The problem asks to apply a simple rule for chars (Ai, Bi) from the original string to construct a new string C. There are only three rules:</p>\n<ul>\n<li>If Ai == Bi, Ci = &quot;P&quot;</li>\n<li>Otherwise, if A contains char Bi, Ci = &quot;S&quot;</li>\n<li>Otherwise, Ci = &quot;I&quot;</li>\n</ul>\n<p>You can do that in a simple way using stream API:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String problem(String A, String B) {\n    // construct a set of all chars in A\n    Set&lt;Integer&gt; aChars = A.chars().boxed().collect(Collectors.toSet());\n\n    // apply rules for chars Ai, Bi\n    return IntStream.range(0, A.length())\n            .mapToObj(i -&gt; A.charAt(i) == B.charAt(i) ? &quot;P&quot; :\n                    aChars.contains((int) B.charAt(i)) ? &quot;S&quot; : &quot;I&quot;)\n            .collect(Collectors.joining());\n}\n</code></pre>\n<p>Or, more verbosely, without it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String problem(String A, String B) {\n    Set&lt;Character&gt; aChars = new HashSet&lt;&gt;();\n    for (int i = 0; i &lt; A.length(); i++) {\n        aChars.add(A.charAt(i));\n    }\n\n    StringBuilder builder = new StringBuilder();\n    for (int i = 0; i &lt; A.length(); i++) {\n        if (A.charAt(i) == B.charAt(i)) {\n            builder.append(&quot;P&quot;);\n        } else if (aChars.contains(B.charAt(i))) {\n            builder.append(&quot;S&quot;);\n        } else {\n            builder.append(&quot;I&quot;);\n        }\n    }\n    return builder.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26387165,"reputation":1,"user_id":20039522,"display_name":"Arifmmmdov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692865025,"creation_date":1692865025,"answer_id":76967393,"question_id":73662162,"body_markdown":"\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    public class CloudRecognition {\r\n        public static void main(String[] args) {\r\n            Scanner scanner = new Scanner(System.in);\r\n            String A = scanner.nextLine();\r\n            String B = scanner.nextLine();\r\n            \r\n            int n = A.length();\r\n            Map&lt;Character, Integer&gt; indexMap = new HashMap&lt;&gt;();\r\n            \r\n            for (int i = 0; i &lt; n; i++) {\r\n                char ai = A.charAt(i);\r\n                char bi = B.charAt(i);\r\n                \r\n                if (ai == bi) {\r\n                    System.out.print(&quot;P&quot;);\r\n                } else {\r\n                    // Check if ai is present in indexMap\r\n                    if (indexMap.containsKey(ai)) {\r\n                        System.out.print(&quot;S&quot;);\r\n                    } else {\r\n                        indexMap.put(ai, i);\r\n                        System.out.print(&quot;I&quot;);\r\n                    }\r\n                }\r\n            }\r\n            \r\n            scanner.close();\r\n        }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nHere&#39;s how the code works:\r\n\r\nIt reads the strings A and B from the input.\r\n\r\nFor each position i (1 ≤ i ≤ N), it compares the characters Ai and Bi.\r\n\r\nIf they are equal, it prints &quot;P&quot; (plagiarism).\r\n\r\nIf they are not equal, it checks whether the character Ai has appeared before. If it has, it prints &quot;S&quot; (suspicious). If it hasn&#39;t, it prints &quot;I&quot; (innocent) and adds Ai to the indexMap with the index i.\r\n\r\nThe indexMap is used to keep track of the positions where characters from string A have appeared before. This way, we prioritize the leftmost appearance for suspicious matches.","title":"String metrics alghoritms in Java","body":"<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>public class CloudRecognition {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        String A = scanner.nextLine();\n        String B = scanner.nextLine();\n        \n        int n = A.length();\n        Map&lt;Character, Integer&gt; indexMap = new HashMap&lt;&gt;();\n        \n        for (int i = 0; i &lt; n; i++) {\n            char ai = A.charAt(i);\n            char bi = B.charAt(i);\n            \n            if (ai == bi) {\n                System.out.print(\"P\");\n            } else {\n                // Check if ai is present in indexMap\n                if (indexMap.containsKey(ai)) {\n                    System.out.print(\"S\");\n                } else {\n                    indexMap.put(ai, i);\n                    System.out.print(\"I\");\n                }\n            }\n        }\n        \n        scanner.close();\n    }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Here's how the code works:</p>\n<p>It reads the strings A and B from the input.</p>\n<p>For each position i (1 ≤ i ≤ N), it compares the characters Ai and Bi.</p>\n<p>If they are equal, it prints &quot;P&quot; (plagiarism).</p>\n<p>If they are not equal, it checks whether the character Ai has appeared before. If it has, it prints &quot;S&quot; (suspicious). If it hasn't, it prints &quot;I&quot; (innocent) and adds Ai to the indexMap with the index i.</p>\n<p>The indexMap is used to keep track of the positions where characters from string A have appeared before. This way, we prioritize the leftmost appearance for suspicious matches.</p>\n"}],"owner":{"account_id":21559696,"reputation":29,"user_id":15894406,"display_name":"Pete Alexandrovich"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73662744,"answer_count":2,"score":0,"last_activity_date":1692865025,"creation_date":1662726606,"question_id":73662162,"body_markdown":"I am solving the problem of processing strings in Java. Please help me solve the problem.\r\n\r\nCondition of the problem: John has launched his new startup to recognize the clouds he has seen, which he called string A of length N . But suddenly he found out that Sam also launched his cloud recognition startup and called it string **B** of length **N**.\r\n\r\nMore formally, let there be strings **A**, the name of John&#39;s startup, and string **B**, the name of Sam&#39;s startup. Both strings are the same length\r\n**N**. For each position **1 ≤ i ≤ N** of string **B** , you need to calculate the type of match at this position with string **A** .\r\n\r\n```\r\nIf a\r\nBi=Ai, then in position i the match type must be equal to P (from the word plagiarism).\r\n\r\nIf Bi≠Ai, but there is another position 1≤j≤N such that Bi=Aj, then in position i\r\n  match type must be equal to S (from the word suspicious).\r\n\r\n```\r\n\r\n**Note:**\r\n\r\n     Letters within one line can be repeated.\r\n     Each letter of string A can be used in at most one plagiarism or suspicious match.\r\n     Preference is always given to the plagiarism type.\r\n     In the case of a suspicious match, the leftmost position in row A is always preferred.\r\n\r\n. In other positions, the match type must be equal to I (from the word innocent).\r\n\r\n\r\n**Input Format**\r\n\r\n```\r\nThe first line contains the string\r\n\r\nA(1≤∣∣A∣∣≤10^6) is the startup name chosen by John.\r\n\r\nThe second line contains the string B(|B|=|A|) — the name of Sam&#39;s startup.\r\n\r\nIt is guaranteed that strings A and B\r\n  contain only uppercase latin letters.\r\n```\r\n\r\n**Output Format**\r\n\r\n```\r\nOutput a single line\r\nC(|C|=|B|), where Ci is the match type of the character Bi(1≤i≤|B|):\r\nfor type plagiarism Ci= P.\r\n\r\nfor type suspicious Ci=S.\r\n\r\nfor type innocentCi=I.\r\n```\r\n**Example 1:**\r\n\r\n```\r\nInput      Output\r\n\r\nCLOUD     PSIIP\r\nCUPID\r\n```\r\n\r\n**Example 2:**\r\n\r\n```\r\nInput      Output\r\n\r\nALICE     SPII\r\nELIBO\r\n```\r\n\r\n\r\n**Example 3:**\r\n\r\n```\r\nInput       Output\r\n\r\nABCBCYA    IPSSPIP\r\nZBBACAA\r\n```\r\n\r\n**Notes:**\r\n\r\n```\r\n\r\nExplanation for the first test\r\n\r\n\r\nB1=A1 and B5=A5 , so for positions 1 and 5 the answer is P.\r\n\r\nB2≠A2 , but B2=A4, so for position 2 the answer is S.\r\n\r\nLetters P and I do not occur in string A, so for positions 3 and 4 the answer is I.\r\n\r\n\r\nExplanation for the second test:\r\n\r\n\r\nB2=A2 and B3=A3, so for positions 2 and 3 the answer is P.\r\n\r\nB1≠A1 , but B1=A5, so for position 1 the answer is S.\r\n\r\nLetters B and O do not occur in string A, so for positions 4 and 5 the answer is I.\r\n\r\n\r\nExplanation for the third test:\r\n\r\n\r\nB2=A2 , B5=A5 and B7=A7 so for positions 2, 5 and 7 the answer is P.\r\n\r\nB3≠A3 but B3=A2=A4. A2 is already enabled according to B2=A2,\r\n\r\ntherefore, the correspondence B3=A4 is chosen - for position 3 the answer is S.\r\n\r\nB4≠A4 and B6≠A6, but B4=B6=A1=A7.\r\n\r\nA7 is already enabled according to B7=A7;\r\n\r\n4&lt;6, therefore, for position 4, the correspondence B4=A1 (answer S) is selected;\r\n\r\nthere are no matches left for position 6 (answer I).\r\n\r\nThe letter Z does not occur in string A, so for position 1 the answer is I.\r\n\r\nA7 is already enabled according to B7=A7;\r\n\r\n4&lt;6, therefore, for position 4, the correspondence B4=A1 (answer S) is selected;\r\n\r\nthere are no matches left for position 6 (answer I).\r\n\r\nThe letter Z does not occur in string A, so for position 1 the answer is I.\r\n```\r\n\r\n**My solution:**\r\n\r\n```\r\npublic class Solution {\r\n  public boolean backspaceCompare(String s, String t) {\r\n    return formBackSpaceString(s).equals(formBackSpaceString(t));\r\n  }\r\n  \r\n  private String formBackSpaceString(String s) {\r\n    Stack&lt;Character&gt; stack = new Stack&lt;&gt;();\r\n    for (char c : s.toCharArray()) {\r\n      if (c == &#39;#&#39;) {\r\n        if (!stack.isEmpty()) {\r\n          stack.pop();\r\n        }\r\n      } else {\r\n        stack.push(c);\r\n      }\r\n    }\r\n    StringBuilder sb = new StringBuilder();\r\n    while (!stack.isEmpty()) {\r\n      sb.append(stack.pop());\r\n    }\r\n    return sb.toString();\r\n  }\r\npublic static void main (String[] args){\r\n }\r\n}\r\n```\r\n\r\nI am bogged down in the logic of this task. I would be grateful for help at least at the pseudocode level.","title":"String metrics alghoritms in Java","body":"<p>I am solving the problem of processing strings in Java. Please help me solve the problem.</p>\n<p>Condition of the problem: John has launched his new startup to recognize the clouds he has seen, which he called string A of length N . But suddenly he found out that Sam also launched his cloud recognition startup and called it string <strong>B</strong> of length <strong>N</strong>.</p>\n<p>More formally, let there be strings <strong>A</strong>, the name of John's startup, and string <strong>B</strong>, the name of Sam's startup. Both strings are the same length\n<strong>N</strong>. For each position <strong>1 ≤ i ≤ N</strong> of string <strong>B</strong> , you need to calculate the type of match at this position with string <strong>A</strong> .</p>\n<pre><code>If a\nBi=Ai, then in position i the match type must be equal to P (from the word plagiarism).\n\nIf Bi≠Ai, but there is another position 1≤j≤N such that Bi=Aj, then in position i\n  match type must be equal to S (from the word suspicious).\n\n</code></pre>\n<p><strong>Note:</strong></p>\n<pre><code> Letters within one line can be repeated.\n Each letter of string A can be used in at most one plagiarism or suspicious match.\n Preference is always given to the plagiarism type.\n In the case of a suspicious match, the leftmost position in row A is always preferred.\n</code></pre>\n<p>. In other positions, the match type must be equal to I (from the word innocent).</p>\n<p><strong>Input Format</strong></p>\n<pre><code>The first line contains the string\n\nA(1≤∣∣A∣∣≤10^6) is the startup name chosen by John.\n\nThe second line contains the string B(|B|=|A|) — the name of Sam's startup.\n\nIt is guaranteed that strings A and B\n  contain only uppercase latin letters.\n</code></pre>\n<p><strong>Output Format</strong></p>\n<pre><code>Output a single line\nC(|C|=|B|), where Ci is the match type of the character Bi(1≤i≤|B|):\nfor type plagiarism Ci= P.\n\nfor type suspicious Ci=S.\n\nfor type innocentCi=I.\n</code></pre>\n<p><strong>Example 1:</strong></p>\n<pre><code>Input      Output\n\nCLOUD     PSIIP\nCUPID\n</code></pre>\n<p><strong>Example 2:</strong></p>\n<pre><code>Input      Output\n\nALICE     SPII\nELIBO\n</code></pre>\n<p><strong>Example 3:</strong></p>\n<pre><code>Input       Output\n\nABCBCYA    IPSSPIP\nZBBACAA\n</code></pre>\n<p><strong>Notes:</strong></p>\n<pre><code>\nExplanation for the first test\n\n\nB1=A1 and B5=A5 , so for positions 1 and 5 the answer is P.\n\nB2≠A2 , but B2=A4, so for position 2 the answer is S.\n\nLetters P and I do not occur in string A, so for positions 3 and 4 the answer is I.\n\n\nExplanation for the second test:\n\n\nB2=A2 and B3=A3, so for positions 2 and 3 the answer is P.\n\nB1≠A1 , but B1=A5, so for position 1 the answer is S.\n\nLetters B and O do not occur in string A, so for positions 4 and 5 the answer is I.\n\n\nExplanation for the third test:\n\n\nB2=A2 , B5=A5 and B7=A7 so for positions 2, 5 and 7 the answer is P.\n\nB3≠A3 but B3=A2=A4. A2 is already enabled according to B2=A2,\n\ntherefore, the correspondence B3=A4 is chosen - for position 3 the answer is S.\n\nB4≠A4 and B6≠A6, but B4=B6=A1=A7.\n\nA7 is already enabled according to B7=A7;\n\n4&lt;6, therefore, for position 4, the correspondence B4=A1 (answer S) is selected;\n\nthere are no matches left for position 6 (answer I).\n\nThe letter Z does not occur in string A, so for position 1 the answer is I.\n\nA7 is already enabled according to B7=A7;\n\n4&lt;6, therefore, for position 4, the correspondence B4=A1 (answer S) is selected;\n\nthere are no matches left for position 6 (answer I).\n\nThe letter Z does not occur in string A, so for position 1 the answer is I.\n</code></pre>\n<p><strong>My solution:</strong></p>\n<pre><code>public class Solution {\n  public boolean backspaceCompare(String s, String t) {\n    return formBackSpaceString(s).equals(formBackSpaceString(t));\n  }\n  \n  private String formBackSpaceString(String s) {\n    Stack&lt;Character&gt; stack = new Stack&lt;&gt;();\n    for (char c : s.toCharArray()) {\n      if (c == '#') {\n        if (!stack.isEmpty()) {\n          stack.pop();\n        }\n      } else {\n        stack.push(c);\n      }\n    }\n    StringBuilder sb = new StringBuilder();\n    while (!stack.isEmpty()) {\n      sb.append(stack.pop());\n    }\n    return sb.toString();\n  }\npublic static void main (String[] args){\n }\n}\n</code></pre>\n<p>I am bogged down in the logic of this task. I would be grateful for help at least at the pseudocode level.</p>\n"},{"tags":["java","kotlin","gradle"],"answers":[{"tags":[],"owner":{"account_id":288740,"reputation":36420,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692863629,"creation_date":1692814406,"answer_id":76963937,"question_id":76925485,"body_markdown":"The error you showed is because of your `init.gradle` file.  \r\nIt sets the extra properties to GStrings (Groovy String with variable substitution).  \r\nThen by using the `val artifactory_contextUrl: String by project` you try to assign that `GString` instance to a `String` variable, with naturally fails outside of Groovy code.\r\n\r\nRemove the init script. Just having the values in `~/.gradle/gradle.properties` as you showed is enough. You said that also didn&#39;t work, but would be content for another question as you for sure would get a different error message as you can only get this error message when using Groovy somewhere.\r\n\r\nIf you would keep that strange init script, either make the lines like `artifactory_user = artifactory_user`, because it makes no sense to use a `GString` to insert one `String` when you already have it as `String`, or make it `artifactory_user  = &quot;${artifactory_user}&quot; as String` to make Groovy right away evaluate the `GString` to the end result and make it a plain old `String`.","title":"Why does my build.gradle.kts not read in values from build.properties correctly?","body":"<p>The error you showed is because of your <code>init.gradle</code> file.<br />\nIt sets the extra properties to GStrings (Groovy String with variable substitution).<br />\nThen by using the <code>val artifactory_contextUrl: String by project</code> you try to assign that <code>GString</code> instance to a <code>String</code> variable, with naturally fails outside of Groovy code.</p>\n<p>Remove the init script. Just having the values in <code>~/.gradle/gradle.properties</code> as you showed is enough. You said that also didn't work, but would be content for another question as you for sure would get a different error message as you can only get this error message when using Groovy somewhere.</p>\n<p>If you would keep that strange init script, either make the lines like <code>artifactory_user = artifactory_user</code>, because it makes no sense to use a <code>GString</code> to insert one <code>String</code> when you already have it as <code>String</code>, or make it <code>artifactory_user  = &quot;${artifactory_user}&quot; as String</code> to make Groovy right away evaluate the <code>GString</code> to the end result and make it a plain old <code>String</code>.</p>\n"}],"owner":{"account_id":2518215,"reputation":355,"user_id":2189108,"accept_rate":80,"display_name":"mdong"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692863629,"creation_date":1692311691,"question_id":76925485,"body_markdown":"I have a `~/.gradle/gradle.properties` file that looks like\r\n```\r\nartifactory_contextUrl=https://my.artifactory.com\r\nartifactory_user=user\r\nartifactory_password=pass\r\n```\r\n\r\nI have in my project a `build.gradle.kts` that looks like\r\n```\r\nplugins {\r\n    kotlin(&quot;jvm&quot;) version &quot;1.3.31&quot;\r\n}\r\n\r\ndependencies {\r\n ...\r\n}\r\nrepositories {\r\n    val artifactory_contextUrl: String by project\r\n    val artifactory_user: String by project\r\n    val artifactory_password: String by project\r\n    maven {\r\n        url = uri(&quot;${artifactory_contextUrl}/plugins-gradle-org-cache&quot;)\r\n        credentials {\r\n            username = &quot;${artifactory_user}&quot;\r\n            password = &quot;${artifactory_password}&quot;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI get the error\r\n```\r\n* Where:\r\nBuild file &#39;myProject/buildSrc/build.gradle.kts&#39; line: 15\r\n\r\n* What went wrong:\r\nclass org.codehaus.groovy.runtime.GStringImpl cannot be cast to class java.lang.String (org.codehaus.groovy.runtime.GStringImpl is in unnamed module of loader org.gradle.internal.classloader.VisitableURLClassLoader @b1a58a3; java.lang.String is in module java.base of loader &#39;bootstrap&#39;)\r\n```\r\n\r\nIf I try to add a debug println right after `val artifactory_contextUrl: String by project` I get\r\n\r\n```\r\n  Line 15:     println(&quot;Artifactory contextUrl (In repositories block): ${artifactory_contextUrl}&quot;)\r\n                                                                             ^ Unresolved reference: artifactory_contextUrl\r\n```\r\n\r\nWhy doesn&#39;t this work? I even tried passing the properties as `-Partifactory_user` etc on the command line to no effect.\r\n\r\nAnd I also tried adding a `~/.gradle/init.gradle` with\r\n\r\n```\r\nallprojects {\r\n\r\n    ext {\r\n        artifactory_user  = &quot;${artifactory_user}&quot;\r\n        artifactory_password  = &quot;${artifactory_password}&quot;\r\n        artifactory_contextUrl= &quot;${artifactory_contextUrl}&quot;\r\n    }\r\n}\r\n```\r\n\r\nWhich also fails even though I have the env vars for artifactory_user etc set. Is there something wrong with how I&#39;m doing `String by project`?","title":"Why does my build.gradle.kts not read in values from build.properties correctly?","body":"<p>I have a <code>~/.gradle/gradle.properties</code> file that looks like</p>\n<pre><code>artifactory_contextUrl=https://my.artifactory.com\nartifactory_user=user\nartifactory_password=pass\n</code></pre>\n<p>I have in my project a <code>build.gradle.kts</code> that looks like</p>\n<pre><code>plugins {\n    kotlin(&quot;jvm&quot;) version &quot;1.3.31&quot;\n}\n\ndependencies {\n ...\n}\nrepositories {\n    val artifactory_contextUrl: String by project\n    val artifactory_user: String by project\n    val artifactory_password: String by project\n    maven {\n        url = uri(&quot;${artifactory_contextUrl}/plugins-gradle-org-cache&quot;)\n        credentials {\n            username = &quot;${artifactory_user}&quot;\n            password = &quot;${artifactory_password}&quot;\n        }\n    }\n}\n</code></pre>\n<p>I get the error</p>\n<pre><code>* Where:\nBuild file 'myProject/buildSrc/build.gradle.kts' line: 15\n\n* What went wrong:\nclass org.codehaus.groovy.runtime.GStringImpl cannot be cast to class java.lang.String (org.codehaus.groovy.runtime.GStringImpl is in unnamed module of loader org.gradle.internal.classloader.VisitableURLClassLoader @b1a58a3; java.lang.String is in module java.base of loader 'bootstrap')\n</code></pre>\n<p>If I try to add a debug println right after <code>val artifactory_contextUrl: String by project</code> I get</p>\n<pre><code>  Line 15:     println(&quot;Artifactory contextUrl (In repositories block): ${artifactory_contextUrl}&quot;)\n                                                                             ^ Unresolved reference: artifactory_contextUrl\n</code></pre>\n<p>Why doesn't this work? I even tried passing the properties as <code>-Partifactory_user</code> etc on the command line to no effect.</p>\n<p>And I also tried adding a <code>~/.gradle/init.gradle</code> with</p>\n<pre><code>allprojects {\n\n    ext {\n        artifactory_user  = &quot;${artifactory_user}&quot;\n        artifactory_password  = &quot;${artifactory_password}&quot;\n        artifactory_contextUrl= &quot;${artifactory_contextUrl}&quot;\n    }\n}\n</code></pre>\n<p>Which also fails even though I have the env vars for artifactory_user etc set. Is there something wrong with how I'm doing <code>String by project</code>?</p>\n"},{"tags":["java","selenium-webdriver","cucumber","testng"],"comments":[{"owner":{"account_id":9568655,"reputation":131,"user_id":14412760,"display_name":"Funky Monkey"},"score":0,"creation_date":1693164944,"post_id":76967221,"comment_id":135720804,"body_markdown":"Hello, can you share your steps class so I can take a look. I think the issue is in there.","body":"Hello, can you share your steps class so I can take a look. I think the issue is in there."}],"owner":{"account_id":29288504,"reputation":1,"user_id":22439513,"display_name":"Jajaa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692863474,"creation_date":1692863474,"question_id":76967221,"body_markdown":" testng.xml : \r\n\r\n```\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\r\n    &lt;suite name=&quot;All Test Suite&quot;&gt;\r\n    &lt;test verbose=&quot;2&quot; preserve-order=&quot;true&quot; \r\n    name=&quot;C:/Users/onur.tarar/IdeaProjects/CucumberSample&quot;&gt;\r\n     &lt;classes&gt;\r\n      &lt;class name =&quot;Runner&quot;&gt;&lt;/class&gt;\r\n     &lt;/classes&gt;\r\n    &lt;/test&gt;\r\n&lt;/suite&gt;\r\n```\r\n\r\n\r\n\r\nThis is my runner file:   \r\n\r\n```\r\n import driver.DriverInit;\r\n    import io.cucumber.testng.AbstractTestNGCucumberTests;\r\n    import io.cucumber.testng.CucumberOptions;\r\n    import org.apache.commons.io.FileUtils;\r\n    import org.testng.annotations.AfterSuite;\r\n    import org.testng.annotations.BeforeSuite;\r\n    import utils.CucumberUtils;\r\n    import utils.Helper;\r\n           import java.io.File;\r\n           import java.io.FileNotFoundException;\r\n           import java.io.IOException;\r\n           @CucumberOptions(features = {&quot;src/test/java/features&quot;},\r\n           glue = {&quot;steps&quot;},\r\n           monochrome = true,\r\n           plugin = {&quot;pretty&quot;, &quot;json:target/cucumber.json&quot;, \r\n     &quot;html:target/site/cucumber-report.html&quot;})\r\n           public class Runner extends AbstractTestNGCucumberTests {\r\n\r\n           @BeforeSuite\r\n           public void deleteFile() throws IOException {\r\n           DriverInit driverInit = new DriverInit();\r\n           driverInit.initialize();\r\n\r\n           }\r\n           }\r\n\r\n\r\n           @AfterSuite\r\n           public void afterSuite() throws FileNotFoundException {\r\n           DriverInit.webDriver.quit();\r\n           }\r\n```\r\n\r\n\r\n\r\nError log:\r\n\r\n...\r\n\r\n    Step failed java.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.WebDriver.navigate()&quot; because &quot;pages.HomePage.webDriver&quot; is null\r\n\r\n... \r\n\r\n\r\n**\r\n           \r\n    \r\nWhen I used Junit before I had to initialize webdriver in steps package to solution. I cannot do that with testng because if I tried this way then I cannot use mvn test command. **\r\n\r\nI also use @FindBy for keeping the web elements, so if you&#39;re using @FindBy you have initialize your webdriver @BeforeSuite otherwise your all web elements getting null exception\r\n\r\nThank you for all answers already","title":"Cucumber cannot see driver when I build my project on cucumber-java(Scenario related build on feature file)","body":"<p>testng.xml :</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n    &lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\n    &lt;suite name=&quot;All Test Suite&quot;&gt;\n    &lt;test verbose=&quot;2&quot; preserve-order=&quot;true&quot; \n    name=&quot;C:/Users/onur.tarar/IdeaProjects/CucumberSample&quot;&gt;\n     &lt;classes&gt;\n      &lt;class name =&quot;Runner&quot;&gt;&lt;/class&gt;\n     &lt;/classes&gt;\n    &lt;/test&gt;\n&lt;/suite&gt;\n</code></pre>\n<p>This is my runner file:</p>\n<pre><code> import driver.DriverInit;\n    import io.cucumber.testng.AbstractTestNGCucumberTests;\n    import io.cucumber.testng.CucumberOptions;\n    import org.apache.commons.io.FileUtils;\n    import org.testng.annotations.AfterSuite;\n    import org.testng.annotations.BeforeSuite;\n    import utils.CucumberUtils;\n    import utils.Helper;\n           import java.io.File;\n           import java.io.FileNotFoundException;\n           import java.io.IOException;\n           @CucumberOptions(features = {&quot;src/test/java/features&quot;},\n           glue = {&quot;steps&quot;},\n           monochrome = true,\n           plugin = {&quot;pretty&quot;, &quot;json:target/cucumber.json&quot;, \n     &quot;html:target/site/cucumber-report.html&quot;})\n           public class Runner extends AbstractTestNGCucumberTests {\n\n           @BeforeSuite\n           public void deleteFile() throws IOException {\n           DriverInit driverInit = new DriverInit();\n           driverInit.initialize();\n\n           }\n           }\n\n\n           @AfterSuite\n           public void afterSuite() throws FileNotFoundException {\n           DriverInit.webDriver.quit();\n           }\n</code></pre>\n<p>Error log:</p>\n<p>...</p>\n<pre><code>Step failed java.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.WebDriver.navigate()&quot; because &quot;pages.HomePage.webDriver&quot; is null\n</code></pre>\n<p>...</p>\n<p>**</p>\n<p>When I used Junit before I had to initialize webdriver in steps package to solution. I cannot do that with testng because if I tried this way then I cannot use mvn test command. **</p>\n<p>I also use @FindBy for keeping the web elements, so if you're using @FindBy you have initialize your webdriver @BeforeSuite otherwise your all web elements getting null exception</p>\n<p>Thank you for all answers already</p>\n"},{"tags":["java","string","newline"],"comments":[{"owner":{"account_id":77004,"reputation":1349,"user_id":220070,"accept_rate":75,"display_name":"Joey"},"score":0,"creation_date":1423252629,"post_id":28373689,"comment_id":45087895,"body_markdown":"You are printing `txt` not text - is that intended?","body":"You are printing <code>txt</code> not text - is that intended?"},{"owner":{"account_id":453984,"reputation":142640,"user_id":851273,"display_name":"Jon Lin"},"score":3,"creation_date":1423252714,"post_id":28373689,"comment_id":45087940,"body_markdown":"`String text = &quot;\\\\n          texttexttext     \\\\n&quot;;`, &quot;\\\\n&quot; here isn&#39;t a newline, it is literally a &quot;\\n&quot;.","body":"<code>String text = &quot;\\\\n          texttexttext     \\\\n&quot;;</code>, &quot;\\\\n&quot; here isn&#39;t a newline, it is literally a &quot;\\n&quot;."},{"owner":{"account_id":4258169,"reputation":71,"user_id":3483257,"display_name":"kyle"},"score":0,"creation_date":1423252842,"post_id":28373689,"comment_id":45087998,"body_markdown":"Yeah, sorry. the name isn&#39;t the problem. I just changed some of my variable names in the post for clarity and made a mistake with one, I&#39;ll fix that. But I don&#39;t think your suggesting is fixing it for me. I&#39;ve tried it with using &quot;\\\\n&quot;, &quot;\\n&quot;, and even &quot;\\\\\\n&quot; but nothing can find it.","body":"Yeah, sorry. the name isn&#39;t the problem. I just changed some of my variable names in the post for clarity and made a mistake with one, I&#39;ll fix that. But I don&#39;t think your suggesting is fixing it for me. I&#39;ve tried it with using &quot;\\\\n&quot;, &quot;\\n&quot;, and even &quot;\\\\\\n&quot; but nothing can find it."}],"answers":[{"tags":[],"owner":{"account_id":1888343,"reputation":176597,"user_id":1707091,"display_name":"rgettman"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1423252783,"creation_date":1423252783,"answer_id":28373764,"question_id":28373689,"body_markdown":"You don&#39;t have a newline character in your original `text`.  You have escaped the backslash, not the `n`, so you have actual backslash `\\` and `n` characters in your `text` string.\r\n\r\nYou did have to escape the backslash character in your regular expression, but not in your literal string text.\r\n\r\nIf you initialize `text` as `&quot;\\n          texttexttext     \\n&quot;`, then it will find and replace those newlines as expected.","title":"Cannot remove newline characters (\\n) in a java String. is it even possible?","body":"<p>You don't have a newline character in your original <code>text</code>.  You have escaped the backslash, not the <code>n</code>, so you have actual backslash <code>\\</code> and <code>n</code> characters in your <code>text</code> string.</p>\n\n<p>You did have to escape the backslash character in your regular expression, but not in your literal string text.</p>\n\n<p>If you initialize <code>text</code> as <code>\"\\n          texttexttext     \\n\"</code>, then it will find and replace those newlines as expected.</p>\n"},{"tags":[],"owner":{"account_id":3444631,"reputation":8971,"user_id":3872976,"accept_rate":85,"display_name":"deathangel908"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1423252866,"creation_date":1423252866,"answer_id":28373788,"question_id":28373689,"body_markdown":"    String newLine = System.getProperty(&quot;line.separator&quot;)\r\n    System.out.println(newLine.contains(&quot;\\n&quot;)); // this is a new line\r\n    System.out.println(newLine.contains(&quot;\\\\n&quot;));\r\n\r\noutput:\r\n\r\n    true\r\n    false\r\n","title":"Cannot remove newline characters (\\n) in a java String. is it even possible?","body":"<pre><code>String newLine = System.getProperty(\"line.separator\")\nSystem.out.println(newLine.contains(\"\\n\")); // this is a new line\nSystem.out.println(newLine.contains(\"\\\\n\"));\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>true\nfalse\n</code></pre>\n"},{"tags":[],"owner":{"account_id":77004,"reputation":1349,"user_id":220070,"accept_rate":75,"display_name":"Joey"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1423262404,"creation_date":1423252978,"answer_id":28373818,"question_id":28373689,"body_markdown":"As commented by Jon Lin\r\n\r\nYour example text does not actually talk about newlines - `\\\\n` is the string `\\n`.\r\n\r\nThe other fallacy is that `replaceAll` expects a regular expression as the first input. So `\\\\n` is actually replaced to `\\n` as `\\` is the escaping character, which is then interpreted as a newline character - case of double escaping, thus in your input text `\\\\` is not matched.\r\n\r\nIf you try\r\n\r\n    text = text.replaceAll(&quot;\\\\\\\\n&quot;, &quot;&quot;);\r\n\r\nAt least you get the expected result, as it&#39;s both a Java string and a regular expression both interpret `\\` as escaping character.","title":"Cannot remove newline characters (\\n) in a java String. is it even possible?","body":"<p>As commented by Jon Lin</p>\n\n<p>Your example text does not actually talk about newlines - <code>\\\\n</code> is the string <code>\\n</code>.</p>\n\n<p>The other fallacy is that <code>replaceAll</code> expects a regular expression as the first input. So <code>\\\\n</code> is actually replaced to <code>\\n</code> as <code>\\</code> is the escaping character, which is then interpreted as a newline character - case of double escaping, thus in your input text <code>\\\\</code> is not matched.</p>\n\n<p>If you try</p>\n\n<pre><code>text = text.replaceAll(\"\\\\\\\\n\", \"\");\n</code></pre>\n\n<p>At least you get the expected result, as it's both a Java string and a regular expression both interpret <code>\\</code> as escaping character.</p>\n"},{"tags":[],"owner":{"account_id":5215471,"reputation":4961,"user_id":4170582,"accept_rate":91,"display_name":"Tarik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1423256178,"creation_date":1423256178,"answer_id":28374643,"question_id":28373689,"body_markdown":"In addition to @rgettman&#39;s answer and in order to make it useful for the community, below is an awesome Java program (For more informations, you can read the entire article from [here][1].) that replaces newline charachters.\r\n\r\n    public class StringReplaceTask{\r\n       \r\n       \r\n        public static void main(String args[]) {\r\n         \r\n            // Removing new line characters form Java String\r\n            String sample=&quot;We are going to replace newline character \\\\n &quot;\r\n                    + &quot;New line should start now if \\\\n \\n is working&quot;;\r\n\r\n            System.out.println(&quot;Original String: &quot; + sample);\r\n           \r\n            //replacing \\n or newline character so that all text come in one line\r\n            System.out.println(&quot;Escaped String: &quot; + sample.replaceAll(&quot;\\n&quot;, &quot;&quot;));\r\n    \r\n    \r\n            // removing line breaks from String read from text file in Java\r\n            String text = readFileAsString(&quot;words.txt&quot;);\r\n            text = text.replace(System.getProperty(&quot;line.separator&quot;), &quot;&quot;);\r\n           \r\n        }  \r\n      \r\n  [1]: http://javarevisited.blogspot.com/2014/04/how-to-replace-line-breaks-new-lines-windows-mac-linux.html","title":"Cannot remove newline characters (\\n) in a java String. is it even possible?","body":"<p>In addition to @rgettman's answer and in order to make it useful for the community, below is an awesome Java program (For more informations, you can read the entire article from <a href=\"http://javarevisited.blogspot.com/2014/04/how-to-replace-line-breaks-new-lines-windows-mac-linux.html\" rel=\"nofollow\">here</a>.) that replaces newline charachters.</p>\n\n<pre><code>public class StringReplaceTask{\n\n\n    public static void main(String args[]) {\n\n        // Removing new line characters form Java String\n        String sample=\"We are going to replace newline character \\\\n \"\n                + \"New line should start now if \\\\n \\n is working\";\n\n        System.out.println(\"Original String: \" + sample);\n\n        //replacing \\n or newline character so that all text come in one line\n        System.out.println(\"Escaped String: \" + sample.replaceAll(\"\\n\", \"\"));\n\n\n        // removing line breaks from String read from text file in Java\n        String text = readFileAsString(\"words.txt\");\n        text = text.replace(System.getProperty(\"line.separator\"), \"\");\n\n    }  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":18563766,"reputation":1,"user_id":13527209,"display_name":"Thanh Hải HUST"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1589304582,"creation_date":1589300213,"answer_id":61756639,"question_id":28373689,"body_markdown":"if `head = &#39;Hello&#39;` but when you `print(head)` -&gt; `&#39;Hello\\n&#39;` \r\nYou can remove `\\n` by `rstrip()` or `remove()`\r\n\r\nyou can use my code\r\n\r\n    **head=a[0:(len(head)-1)]**\r\n\r\nto remove `\\n` hidden in string.\r\n\r\n(test on py 3)\r\ngood luck!!\r\n\r\n","title":"Cannot remove newline characters (\\n) in a java String. is it even possible?","body":"<p>if <code>head = 'Hello'</code> but when you <code>print(head)</code> -> <code>'Hello\\n'</code> \nYou can remove <code>\\n</code> by <code>rstrip()</code> or <code>remove()</code></p>\n\n<p>you can use my code</p>\n\n<pre><code>**head=a[0:(len(head)-1)]**\n</code></pre>\n\n<p>to remove <code>\\n</code> hidden in string.</p>\n\n<p>(test on py 3)\ngood luck!!</p>\n"},{"tags":[],"owner":{"account_id":1355796,"reputation":7903,"user_id":1294213,"accept_rate":63,"display_name":"Nur Rony"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692863218,"creation_date":1692863218,"answer_id":76967196,"question_id":28373689,"body_markdown":"**Since Java 8**\r\n\r\nYou can do it as follows\r\n\r\n```java\r\ntext.replaceAll(&quot;\\\\R+&quot;, &quot; &quot;)\r\n```","title":"Cannot remove newline characters (\\n) in a java String. is it even possible?","body":"<p><strong>Since Java 8</strong></p>\n<p>You can do it as follows</p>\n<pre class=\"lang-java prettyprint-override\"><code>text.replaceAll(&quot;\\\\R+&quot;, &quot; &quot;)\n</code></pre>\n"}],"owner":{"account_id":4258169,"reputation":71,"user_id":3483257,"display_name":"kyle"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23037,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":6,"score":5,"last_activity_date":1692863218,"creation_date":1423252479,"question_id":28373689,"body_markdown":"Basically, all I&#39;m trying to do is remove the newline character from a String in Java. I&#39;ve looked at dozens of posts asking similar questions and they all say the same thing, but none of them seem to work for me. Here is all the code I have 3 lines:\r\n\r\n        String text = &quot;\\\\n          texttexttext     \\\\n&quot;;\r\n        text = text.replaceAll(&quot;\\\\n&quot;, &quot;&quot;);\r\n        System.out.println(text);\r\n\r\nThat string is similar to what I&#39;m actually trying to use, but even with this one I can&#39;t find the newline character and replace it. The replaceAll just won&#39;t see it and I don&#39;t know why. \r\n\r\nI&#39;ve tried plenty of other things too like\r\n\r\n        text = text.replaceAll(&quot;\\\\n&quot;, &quot;&quot;).replaceAll(&quot;\\\\r&quot;, &quot;&quot;);\r\nor\r\n\r\n        text = text.replaceAll(&quot;\\\\r\\\\n|\\\\r|\\\\n&quot;, &quot; &quot;);\r\n\r\nbut nothing can even find the character. I haven&#39;t even been able to find it using Regex Pattern and Matcher objects. The only thing slightly unusual I&#39;m doing is doing it in a Junit Test bean, but I cannot believe that would do anything.","title":"Cannot remove newline characters (\\n) in a java String. is it even possible?","body":"<p>Basically, all I'm trying to do is remove the newline character from a String in Java. I've looked at dozens of posts asking similar questions and they all say the same thing, but none of them seem to work for me. Here is all the code I have 3 lines:</p>\n\n<pre><code>    String text = \"\\\\n          texttexttext     \\\\n\";\n    text = text.replaceAll(\"\\\\n\", \"\");\n    System.out.println(text);\n</code></pre>\n\n<p>That string is similar to what I'm actually trying to use, but even with this one I can't find the newline character and replace it. The replaceAll just won't see it and I don't know why. </p>\n\n<p>I've tried plenty of other things too like</p>\n\n<pre><code>    text = text.replaceAll(\"\\\\n\", \"\").replaceAll(\"\\\\r\", \"\");\n</code></pre>\n\n<p>or</p>\n\n<pre><code>    text = text.replaceAll(\"\\\\r\\\\n|\\\\r|\\\\n\", \" \");\n</code></pre>\n\n<p>but nothing can even find the character. I haven't even been able to find it using Regex Pattern and Matcher objects. The only thing slightly unusual I'm doing is doing it in a Junit Test bean, but I cannot believe that would do anything.</p>\n"},{"tags":["java","scxml","apache-commons-scxml"],"answers":[{"tags":[],"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1282253326,"creation_date":1282253326,"answer_id":3526398,"question_id":3526307,"body_markdown":"In the general case it&#39;s a really bad idea to jump to a state without the state machine&#39;s being &quot;aware&quot; of it, because there may be preconditions for a particular state&#39;s execution that aren&#39;t satisfied (that would be if you reached the state the &quot;normal&quot;) way.  A better idea is to design the state machine with a &quot;restart&quot; capability, implemented as an input &quot;restart&quot; event and the states and transitions necessary to handle it.","title":"Commons SCXML - Force jump to a given state","body":"<p>In the general case it's a really bad idea to jump to a state without the state machine's being \"aware\" of it, because there may be preconditions for a particular state's execution that aren't satisfied (that would be if you reached the state the \"normal\") way.  A better idea is to design the state machine with a \"restart\" capability, implemented as an input \"restart\" event and the states and transitions necessary to handle it.</p>\n"},{"tags":[],"owner":{"account_id":2399180,"reputation":450,"user_id":3537074,"display_name":"Evan Reynolds"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1379018995,"creation_date":1379018995,"answer_id":18774078,"question_id":3526307,"body_markdown":"This is an old question, but I just hit this and needed an answer to it as well and thought it might help others to answer it. I am using this as part of unit testing, where it IS extremely useful to just get to a particular state (I want to be sure that if at state A, if a sequence of events happens, it goes to state B - and still goes there after I tinker with the state machine XML!)\r\n\r\nI finally found this code in SCXMLTestHelper and it worked. Just call it with the executor and the destination state.\r\n\r\n    public static void setCurrentState(SCXMLExecutor exec, final String id) throws IllegalArgumentException{\r\n        try {\r\n            exec.reset();\r\n        } catch (ModelException me) {\r\n            throw new IllegalArgumentException(&quot;Provided SCXMLExecutor &quot;\r\n                    + &quot;instance cannot be reset.&quot;);\r\n        }\r\n        TransitionTarget active = (TransitionTarget) exec.getStateMachine().\r\n                getTargets().get(id);\r\n        if (active == null) {\r\n            throw new IllegalArgumentException(&quot;No target with id &#39;&quot; + id\r\n                    + &quot;&#39; present in state machine.&quot;);\r\n        }\r\n        Set current = exec.getCurrentStatus().getStates();\r\n        current.clear();\r\n        current.add(active);\r\n    }","title":"Commons SCXML - Force jump to a given state","body":"<p>This is an old question, but I just hit this and needed an answer to it as well and thought it might help others to answer it. I am using this as part of unit testing, where it IS extremely useful to just get to a particular state (I want to be sure that if at state A, if a sequence of events happens, it goes to state B - and still goes there after I tinker with the state machine XML!)</p>\n\n<p>I finally found this code in SCXMLTestHelper and it worked. Just call it with the executor and the destination state.</p>\n\n<pre><code>public static void setCurrentState(SCXMLExecutor exec, final String id) throws IllegalArgumentException{\n    try {\n        exec.reset();\n    } catch (ModelException me) {\n        throw new IllegalArgumentException(\"Provided SCXMLExecutor \"\n                + \"instance cannot be reset.\");\n    }\n    TransitionTarget active = (TransitionTarget) exec.getStateMachine().\n            getTargets().get(id);\n    if (active == null) {\n        throw new IllegalArgumentException(\"No target with id '\" + id\n                + \"' present in state machine.\");\n    }\n    Set current = exec.getCurrentStatus().getStates();\n    current.clear();\n    current.add(active);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4849409,"reputation":89,"user_id":3912144,"display_name":"milchreis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692863124,"creation_date":1692792323,"answer_id":76961189,"question_id":3526307,"body_markdown":"It&#39;s an old question, but in [common-scxml2][1] the given code doesn&#39;t work anymore. I did some research and found a solution for the current version that works fine.\r\n\r\n```java\r\nimport org.apache.commons.scxml2.SCInstance;\r\nimport org.apache.commons.scxml2.SCXMLExecutor;\r\nimport org.apache.commons.scxml2.model.EnterableState;\r\nimport org.apache.commons.scxml2.model.TransitionTarget;\r\n\r\npublic class AccessibleSCXMLExecutor extends SCXMLExecutor {\r\n\r\n    public void setCurrentState(String targetId) {\r\n        final EnterableState targetState = getStateMachine().getChildren().stream()\r\n                .filter(s -&gt; s.getId().equals(targetId))\r\n                .findFirst()\r\n                .orElseThrow(() -&gt; new IllegalArgumentException(&quot;The state &#39;&quot; + targetId + &quot;&#39; is unknown&quot;));\r\n\r\n        final SCInstance scInstance = getSCInstance();\r\n        scInstance.getStateConfiguration().clear();\r\n        scInstance.getStateConfiguration().enterState(targetState);\r\n    }\r\n}\r\n```\r\n\r\nThe main problem is the inaccessible SCInstance which contains the running statemachine. Fortunately this object is `protected` and can be called by derived classes.\r\n\r\n\r\n  [1]: https://github.com/apache/commons-scxml","title":"Commons SCXML - Force jump to a given state","body":"<p>It's an old question, but in <a href=\"https://github.com/apache/commons-scxml\" rel=\"nofollow noreferrer\">common-scxml2</a> the given code doesn't work anymore. I did some research and found a solution for the current version that works fine.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.apache.commons.scxml2.SCInstance;\nimport org.apache.commons.scxml2.SCXMLExecutor;\nimport org.apache.commons.scxml2.model.EnterableState;\nimport org.apache.commons.scxml2.model.TransitionTarget;\n\npublic class AccessibleSCXMLExecutor extends SCXMLExecutor {\n\n    public void setCurrentState(String targetId) {\n        final EnterableState targetState = getStateMachine().getChildren().stream()\n                .filter(s -&gt; s.getId().equals(targetId))\n                .findFirst()\n                .orElseThrow(() -&gt; new IllegalArgumentException(&quot;The state '&quot; + targetId + &quot;' is unknown&quot;));\n\n        final SCInstance scInstance = getSCInstance();\n        scInstance.getStateConfiguration().clear();\n        scInstance.getStateConfiguration().enterState(targetState);\n    }\n}\n</code></pre>\n<p>The main problem is the inaccessible SCInstance which contains the running statemachine. Fortunately this object is <code>protected</code> and can be called by derived classes.</p>\n"}],"owner":{"account_id":7198,"reputation":46927,"user_id":12388,"accept_rate":82,"display_name":"Guido"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":616,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":3526398,"answer_count":3,"score":4,"last_activity_date":1692863124,"creation_date":1282252511,"question_id":3526307,"body_markdown":"I am using [Apache Commons SCXML][1], and I would like to know if it is possible to tell the state machine (SCXMLExecutor) to jump to a given state.\r\n\r\nI can not use the `initialstate` attribute, because I want the state machine to recover (i.e. from power failures), and the only thing I have is the last state.  That is why I was thinking about telling the state machine to make a direct jump to it.\r\n\r\n  [1]: http://commons.apache.org/scxml/","title":"Commons SCXML - Force jump to a given state","body":"<p>I am using <a href=\"http://commons.apache.org/scxml/\" rel=\"nofollow noreferrer\">Apache Commons SCXML</a>, and I would like to know if it is possible to tell the state machine (SCXMLExecutor) to jump to a given state.</p>\n\n<p>I can not use the <code>initialstate</code> attribute, because I want the state machine to recover (i.e. from power failures), and the only thing I have is the last state.  That is why I was thinking about telling the state machine to make a direct jump to it.</p>\n"},{"tags":["java","cmd","version"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692650156,"post_id":76948508,"comment_id":135650101,"body_markdown":"You can possibly start by trying `set PATH=&quot;%JAVA_HOME%\\bin;%PATH%&quot;;java -version` I would get rid of that Oracle Java path","body":"You can possibly start by trying <code>set PATH=&quot;%JAVA_HOME%\\bin;%PATH%&quot;;java -version</code> I would get rid of that Oracle Java path"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1692650334,"post_id":76948508,"comment_id":135650131,"body_markdown":"@g00se it&#39;s windows. You meant `set &quot;PATH=%JAVA_HOME%\\bin;%PATH%&quot;` (and yes, I know that *looks* wrong).","body":"@g00se it&#39;s windows. You meant <code>set &quot;PATH=%JAVA_HOME%\\bin;%PATH%&quot;</code> (and yes, I know that <i>looks</i> wrong)."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692650579,"post_id":76948508,"comment_id":135650172,"body_markdown":"I&#39;m referring to `C:\\Program Files...Oracle\\Java\\javapath` And yes, I probably *did* mean that","body":"I&#39;m referring to <code>C:\\Program Files...Oracle\\Java\\javapath</code> And yes, I probably <i>did</i> mean that"},{"owner":{"account_id":28793802,"reputation":1,"user_id":22052473,"display_name":"extenzzz136"},"score":0,"creation_date":1692651744,"post_id":76948508,"comment_id":135650356,"body_markdown":"thank you, everything works. I spent almost an hour on it..","body":"thank you, everything works. I spent almost an hour on it.."},{"owner":{"account_id":9045527,"reputation":37191,"user_id":6738015,"display_name":"Compo"},"score":1,"creation_date":1692653601,"post_id":76948508,"comment_id":135650629,"body_markdown":"There is never a need to add things to `Path`. All you needed to do was use proper code instead of lazy and inefficient shorthand. ```&quot;%JAVA_HOME%\\bin\\java.exe&quot; -version```. Also, if you should have a need you should not just blindly prepend the variable, you should append; ```Set &quot;Path=%Path%%JAVA_HOME%\\bin;&quot;```. Irrespective, the file has an extension, which you should **always** use.","body":"There is never a need to add things to <code>Path</code>. All you needed to do was use proper code instead of lazy and inefficient shorthand. <code>&quot;%JAVA_HOME%\\bin\\java.exe&quot; -version</code>. Also, if you should have a need you should not just blindly prepend the variable, you should append; <code>Set &quot;Path=%Path%%JAVA_HOME%\\bin;&quot;</code>. Irrespective, the file has an extension, which you should <b>always</b> use."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692653958,"post_id":76948508,"comment_id":135650679,"body_markdown":"?? I don&#39;t know where to start...","body":"?? I don&#39;t know where to start..."},{"owner":{"account_id":9045527,"reputation":37191,"user_id":6738015,"display_name":"Compo"},"score":0,"creation_date":1692654392,"post_id":76948508,"comment_id":135650742,"body_markdown":"Would you like assistance @g00se? BTW, I agree that the Oracle location could be problematic, because of its position, however, there cannot be a file with the basename `java` and any extension listed within the `PathExt` variable there, otherwise it&#39;s version would have been reported instead, _(not shown)_.","body":"Would you like assistance @g00se? BTW, I agree that the Oracle location could be problematic, because of its position, however, there cannot be a file with the basename <code>java</code> and any extension listed within the <code>PathExt</code> variable there, otherwise it&#39;s version would have been reported instead, <i>(not shown)</i>."},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1692666572,"post_id":76948508,"comment_id":135651911,"body_markdown":"@Compo you are being inappropriately pedantic and stating an exotic approach to command line management as gospel. Separate from the merits of your approach, yelling at g00se isn&#39;t an appropriate way to interact with others, and that dictatorial tone isn&#39;t helpful.","body":"@Compo you are being inappropriately pedantic and stating an exotic approach to command line management as gospel. Separate from the merits of your approach, yelling at g00se isn&#39;t an appropriate way to interact with others, and that dictatorial tone isn&#39;t helpful."},{"owner":{"account_id":9045527,"reputation":37191,"user_id":6738015,"display_name":"Compo"},"score":0,"creation_date":1692668446,"post_id":76948508,"comment_id":135652090,"body_markdown":"@rzwitserloot, my comment neither yelled nor dictated, it was a response to the their questioning. If they wished some form of clarification, they should have asked instead of insinuating. My comment part agreed with them, yet showed that based upon the OP information, their suggestion was not a fix, _(despite the OP&#39;s response to it)_, and explained why. Also, they&#39;d already been corrected by Elliott Frisch in a much less respectful way.","body":"@rzwitserloot, my comment neither yelled nor dictated, it was a response to the their questioning. If they wished some form of clarification, they should have asked instead of insinuating. My comment part agreed with them, yet showed that based upon the OP information, their suggestion was not a fix, <i>(despite the OP&#39;s response to it)</i>, and explained why. Also, they&#39;d already been corrected by Elliott Frisch in a much less respectful way."},{"owner":{"account_id":3692224,"reputation":46695,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1692684987,"post_id":76948508,"comment_id":135653622,"body_markdown":"Please take a look on [What is the reason for &quot;X is not recognized as an internal or external command, operable program or batch file&quot;?](https://stackoverflow.com/a/41461002/3074564) There is explained in full details how `cmd.exe` searches for a file of which just the file name without file extension and without path is entered by a user or specified in a batch file. The environment variable `JAVA_HOME` is not evaluated by `cmd.exe` at all. There can be executed `%SystemRoot%\\System32\\where.exe java` to find out which file is found on using just `java` by `where.exe` and also by `cmd.exe`.","body":"Please take a look on <a href=\"https://stackoverflow.com/a/41461002/3074564\">What is the reason for &quot;X is not recognized as an internal or external command, operable program or batch file&quot;?</a> There is explained in full details how <code>cmd.exe</code> searches for a file of which just the file name without file extension and without path is entered by a user or specified in a batch file. The environment variable <code>JAVA_HOME</code> is not evaluated by <code>cmd.exe</code> at all. There can be executed <code>%SystemRoot%\\System32\\where.exe java</code> to find out which file is found on using just <code>java</code> by <code>where.exe</code> and also by <code>cmd.exe</code>."},{"owner":{"account_id":3692224,"reputation":46695,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1692685741,"post_id":76948508,"comment_id":135653726,"body_markdown":"I recommend to read the Oracle documentation page [The java Command](https://docs.oracle.com/en/java/javase/20/docs/specs/man/java.html) and [Installation of the JDK on Microsoft Windows Platforms](https://docs.oracle.com/en/java/javase/20/install/installation-jdk-microsoft-windows-platforms.html). (Shame on Oracle writing `DOS Mode` and `MS-DOS shell` because of the __Windows Command Prompt__ is __not__ a `MS-DOS shell` or a `DOS Mode`.)","body":"I recommend to read the Oracle documentation page <a href=\"https://docs.oracle.com/en/java/javase/20/docs/specs/man/java.html\" rel=\"nofollow noreferrer\">The java Command</a> and <a href=\"https://docs.oracle.com/en/java/javase/20/install/installation-jdk-microsoft-windows-platforms.html\" rel=\"nofollow noreferrer\">Installation of the JDK on Microsoft Windows Platforms</a>. (Shame on Oracle writing <code>DOS Mode</code> and <code>MS-DOS shell</code> because of the <b>Windows Command Prompt</b> is <b>not</b> a <code>MS-DOS shell</code> or a <code>DOS Mode</code>.)"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1692868016,"post_id":76948508,"comment_id":135683318,"body_markdown":"BTW in windows command line we can use the `path %JAVA_HOME%;%PATH%` without `set` and `=`","body":"BTW in windows command line we can use the <code>path %JAVA_HOME%;%PATH%</code> without <code>set</code> and <code>=</code>"}],"answers":[{"tags":[],"owner":{"account_id":29271617,"reputation":62,"user_id":22426243,"display_name":"NsoundarMCA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692862799,"creation_date":1692678578,"answer_id":76950117,"question_id":76948508,"body_markdown":"First, try `&quot;java -version&quot;` command from the path `D:\\Documents\\java\\versions\\jdk20` where you have it. \r\n\r\nIf it shows the version set the environment variable as shown below in your machine:\r\n\r\n [![enter image description here][1]][1] \r\n  \r\nAfter that, try `&quot;java -version&quot;` from any location.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HKhZd.png","title":"java -version is not displayed in the console","body":"<p>First, try <code>&quot;java -version&quot;</code> command from the path <code>D:\\Documents\\java\\versions\\jdk20</code> where you have it.</p>\n<p>If it shows the version set the environment variable as shown below in your machine:</p>\n<p><a href=\"https://i.stack.imgur.com/HKhZd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HKhZd.png\" alt=\"enter image description here\" /></a></p>\n<p>After that, try <code>&quot;java -version&quot;</code> from any location.</p>\n"}],"owner":{"account_id":28793802,"reputation":1,"user_id":22052473,"display_name":"extenzzz136"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692862799,"creation_date":1692649401,"question_id":76948508,"body_markdown":"There was such a problem:\r\n```\r\nMicrosoft Windows [Version 10.0.22621.2134]\r\n(c) Microsoft Corporation. All rights reserved.\r\n\r\nC:\\Users\\Oleg&gt;echo %JAVA_HOME%\r\nD:\\Documents\\java\\versions\\jdk20\r\n\r\nC:\\Users\\Oleg&gt;java\r\n\r\nC:\\Users\\Oleg&gt;java -version\r\n\r\nC:\\Users\\Oleg&gt;java -v\r\n\r\nC:\\Users\\Oleg&gt;\r\n```\r\n The java version is not output, although JAVA_HOME is registered and defined in PATH\r\n[JAVA_HOME](https://i.stack.imgur.com/VCui1.png), [PATH](https://i.stack.imgur.com/SuTrc.png)\r\n\r\nMaybe someone has faced a similar problem? When deleting &#39;\\\\&#39; in PATH, nothing changes","title":"java -version is not displayed in the console","body":"<p>There was such a problem:</p>\n<pre><code>Microsoft Windows [Version 10.0.22621.2134]\n(c) Microsoft Corporation. All rights reserved.\n\nC:\\Users\\Oleg&gt;echo %JAVA_HOME%\nD:\\Documents\\java\\versions\\jdk20\n\nC:\\Users\\Oleg&gt;java\n\nC:\\Users\\Oleg&gt;java -version\n\nC:\\Users\\Oleg&gt;java -v\n\nC:\\Users\\Oleg&gt;\n</code></pre>\n<p>The java version is not output, although JAVA_HOME is registered and defined in PATH\n<a href=\"https://i.stack.imgur.com/VCui1.png\" rel=\"nofollow noreferrer\">JAVA_HOME</a>, <a href=\"https://i.stack.imgur.com/SuTrc.png\" rel=\"nofollow noreferrer\">PATH</a></p>\n<p>Maybe someone has faced a similar problem? When deleting '\\' in PATH, nothing changes</p>\n"},{"tags":["java","pdfbox","jpeg2000"],"answers":[{"tags":[],"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1692862788,"creation_date":1692815091,"answer_id":76964012,"question_id":76963762,"body_markdown":"AFAIK -cp and -jar can&#39;t be mixed. Here&#39;s what I just tried and it worked:\r\n\r\n    java -cp &quot;pdfbox-app-2.0.29.jar;lib/*&quot; org.apache.pdfbox.tools.PrintPDF -printerName &quot;Microsoft Print to PDF&quot; XXXX\\jpeg2000.pdf\r\n\r\n(On linux the &quot;;&quot; in the classpath needs to be replaced with &quot;:&quot;)","title":"Printing JPEG2000 with PDFBOX","body":"<p>AFAIK -cp and -jar can't be mixed. Here's what I just tried and it worked:</p>\n<pre><code>java -cp &quot;pdfbox-app-2.0.29.jar;lib/*&quot; org.apache.pdfbox.tools.PrintPDF -printerName &quot;Microsoft Print to PDF&quot; XXXX\\jpeg2000.pdf\n</code></pre>\n<p>(On linux the &quot;;&quot; in the classpath needs to be replaced with &quot;:&quot;)</p>\n"}],"owner":{"account_id":3858478,"reputation":7458,"user_id":3196753,"display_name":"tresf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76964012,"answer_count":1,"score":1,"last_activity_date":1692862788,"creation_date":1692812807,"question_id":76963762,"body_markdown":"I&#39;m testing the viability of [`jai-imageio-core`](https://github.com/jai-imageio/jai-imageio-core/releases/download/jai-imageio-core-1.4.0/jai-imageio-core-1.4.0.jar) and [`jai-imageio-jpeg2000`](https://github.com/jai-imageio/jai-imageio-jpeg2000/releases/download/jai-imageio-jpeg2000-1.4.0/jai-imageio-jpeg2000-1.4.0.jar) for a project that prints [a PDF containing a JPEG2000 encoded image(s)](https://github.com/qzind/tray/files/12421913/jpeg2000.pdf) using [`pdfbox-app`](https://repo1.maven.org/maven2/org/apache/pdfbox/pdfbox-app/2.0.29/pdfbox-app-2.0.29.jar).\r\n\r\nThe [docs for PDFBOX](https://pdfbox.apache.org/2.0/dependencies.html#optional-components) state the following:\r\n\r\n&gt; These [JPEG2000] libraries are optional and will be loaded if present on the classpath [...].\r\n\r\nAs a base-line, I&#39;m trying the following:\r\n\r\n```bash\r\n java -cp &quot;./jai-*.jar&quot; -jar pdfbox-app-2.0.29.jar PrintPDF jpeg2000.pdf\r\n```\r\n\r\nHowever, PDFBOX says:\r\n\r\n```\r\nAug 23, 2023 1:38:58 PM org.apache.pdfbox.contentstream.PDFStreamEngine operatorException\r\nSEVERE: Cannot read JPEG2000 image: Java Advanced Imaging (JAI) Image I/O Tools are not installed\r\n```\r\n\r\n... which is the same it says when the JPEG2000 libraries are NOT on the classpath.\r\n\r\nWhat am I doing wrong?\r\n","title":"Printing JPEG2000 with PDFBOX","body":"<p>I'm testing the viability of <a href=\"https://github.com/jai-imageio/jai-imageio-core/releases/download/jai-imageio-core-1.4.0/jai-imageio-core-1.4.0.jar\" rel=\"nofollow noreferrer\"><code>jai-imageio-core</code></a> and <a href=\"https://github.com/jai-imageio/jai-imageio-jpeg2000/releases/download/jai-imageio-jpeg2000-1.4.0/jai-imageio-jpeg2000-1.4.0.jar\" rel=\"nofollow noreferrer\"><code>jai-imageio-jpeg2000</code></a> for a project that prints <a href=\"https://github.com/qzind/tray/files/12421913/jpeg2000.pdf\" rel=\"nofollow noreferrer\">a PDF containing a JPEG2000 encoded image(s)</a> using <a href=\"https://repo1.maven.org/maven2/org/apache/pdfbox/pdfbox-app/2.0.29/pdfbox-app-2.0.29.jar\" rel=\"nofollow noreferrer\"><code>pdfbox-app</code></a>.</p>\n<p>The <a href=\"https://pdfbox.apache.org/2.0/dependencies.html#optional-components\" rel=\"nofollow noreferrer\">docs for PDFBOX</a> state the following:</p>\n<blockquote>\n<p>These [JPEG2000] libraries are optional and will be loaded if present on the classpath [...].</p>\n</blockquote>\n<p>As a base-line, I'm trying the following:</p>\n<pre class=\"lang-bash prettyprint-override\"><code> java -cp &quot;./jai-*.jar&quot; -jar pdfbox-app-2.0.29.jar PrintPDF jpeg2000.pdf\n</code></pre>\n<p>However, PDFBOX says:</p>\n<pre><code>Aug 23, 2023 1:38:58 PM org.apache.pdfbox.contentstream.PDFStreamEngine operatorException\nSEVERE: Cannot read JPEG2000 image: Java Advanced Imaging (JAI) Image I/O Tools are not installed\n</code></pre>\n<p>... which is the same it says when the JPEG2000 libraries are NOT on the classpath.</p>\n<p>What am I doing wrong?</p>\n"},{"tags":["java","spring","spring-websocket","task-queue"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1692874769,"post_id":76967106,"comment_id":135684619,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":20862207,"reputation":31,"user_id":15324143,"display_name":"Xan"},"score":0,"creation_date":1692963949,"post_id":76967106,"comment_id":135699825,"body_markdown":"I want to get information how to implement such a situation","body":"I want to get information how to implement such a situation"}],"owner":{"account_id":20862207,"reputation":31,"user_id":15324143,"display_name":"Xan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692862450,"creation_date":1692862450,"question_id":76967106,"body_markdown":"I have cases where I have to implement a queue service for Live-Chat application.\r\n\r\nI have operators to support clients via live chat, they communicate via websocket, but I need to define an operator for the client, in the first I solved this problem through an in-memory approach when the operator became online I added it to the list of available operators, but now the requirement has become much more difficult in chat support, each company will have a variant of directions, and it may also be that each direction will also have a direction, my main question is how to implement the queue in such situations, are there ready-made libraries?","title":"How to implement Live-chat queue management system?","body":"<p>I have cases where I have to implement a queue service for Live-Chat application.</p>\n<p>I have operators to support clients via live chat, they communicate via websocket, but I need to define an operator for the client, in the first I solved this problem through an in-memory approach when the operator became online I added it to the list of available operators, but now the requirement has become much more difficult in chat support, each company will have a variant of directions, and it may also be that each direction will also have a direction, my main question is how to implement the queue in such situations, are there ready-made libraries?</p>\n"},{"tags":["java","spring","hibernate"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692863725,"post_id":76967058,"comment_id":135682411,"body_markdown":"have you tried to add `cascade = CascadeType.ALL` param  in class `A` on`@ManyToMany` relation ?","body":"have you tried to add <code>cascade = CascadeType.ALL</code> param  in class <code>A</code> on<code>@ManyToMany</code> relation ?"},{"owner":{"account_id":29288425,"reputation":1,"user_id":22439445,"display_name":"Miruna Dinu"},"score":0,"creation_date":1692867834,"post_id":76967058,"comment_id":135683279,"body_markdown":"@AndreiLisa we tried it and it did not change anything. After we changed from List to Set , the problem was solved.","body":"@AndreiLisa we tried it and it did not change anything. After we changed from List to Set , the problem was solved."}],"owner":{"account_id":29288425,"reputation":1,"user_id":22439445,"display_name":"Miruna Dinu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692862015,"creation_date":1692862015,"question_id":76967058,"body_markdown":"I use Hibernate in a project and let it create my tables for all entities. My issue is:\r\n- I have a many-to-many relationship between entity A and entity B\r\n- The link table A_B is created but it is created as read-only\r\n\r\nFor entity A:\r\n\r\n```\r\n@Entity\r\n@Data\r\n@Table(name = &quot;A&quot;)\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class A{\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(unique = true, nullable = false)\r\n    private String name;\r\n\r\n    @ManyToMany(fetch = FetchType.EAGER)\r\n    @JoinTable(\r\n            name = &quot;A_B&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;A_id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;B_id&quot;)\r\n    )\r\n    private List&lt;B&gt; Bs= new ArrayList&lt;&gt;();\r\n}\r\n```\r\n\r\nFor entity B:\r\n\r\n```\r\n@Entity\r\n@Data\r\n@Table(name = &quot;B&quot;)\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class B {\r\n@Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(nullable = false)\r\n    private String name;\r\n\r\n    @ManyToMany(mappedBy = &quot;Bs&quot;)\r\n    @JsonIgnore\r\n    private List&lt;A&gt; As= new ArrayList&lt;&gt;();\r\n}\r\n```\r\n\r\nI have another many-to-many relationship and the link table is created fine.\r\nWhat could cause this?\r\n\r\nI tried to drop the schema and regerate it, but it did not fix anything. I also checked my rights, but everything seems fine there.","title":"Hibernate creates one table as read-only","body":"<p>I use Hibernate in a project and let it create my tables for all entities. My issue is:</p>\n<ul>\n<li>I have a many-to-many relationship between entity A and entity B</li>\n<li>The link table A_B is created but it is created as read-only</li>\n</ul>\n<p>For entity A:</p>\n<pre><code>@Entity\n@Data\n@Table(name = &quot;A&quot;)\n@NoArgsConstructor\n@AllArgsConstructor\npublic class A{\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(unique = true, nullable = false)\n    private String name;\n\n    @ManyToMany(fetch = FetchType.EAGER)\n    @JoinTable(\n            name = &quot;A_B&quot;,\n            joinColumns = @JoinColumn(name = &quot;A_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;B_id&quot;)\n    )\n    private List&lt;B&gt; Bs= new ArrayList&lt;&gt;();\n}\n</code></pre>\n<p>For entity B:</p>\n<pre><code>@Entity\n@Data\n@Table(name = &quot;B&quot;)\n@NoArgsConstructor\n@AllArgsConstructor\npublic class B {\n@Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(nullable = false)\n    private String name;\n\n    @ManyToMany(mappedBy = &quot;Bs&quot;)\n    @JsonIgnore\n    private List&lt;A&gt; As= new ArrayList&lt;&gt;();\n}\n</code></pre>\n<p>I have another many-to-many relationship and the link table is created fine.\nWhat could cause this?</p>\n<p>I tried to drop the schema and regerate it, but it did not fix anything. I also checked my rights, but everything seems fine there.</p>\n"},{"tags":["java","security","jsp","web-applications","session-cookies"],"comments":[{"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1348652905,"post_id":12598919,"comment_id":16980683,"body_markdown":"does your load balancer support sticky sessions (so that the same session always goes to the same server)?","body":"does your load balancer support sticky sessions (so that the same session always goes to the same server)?"}],"answers":[{"tags":[],"owner":{"account_id":299251,"reputation":335905,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1348652889,"creation_date":1348652889,"answer_id":12598976,"question_id":12598919,"body_markdown":"You have two options:\r\n\r\n* **sticky session** - once some user hits one server, load balancer makes sure she will always use the exact same server.\r\n\r\n* **session replication** - every change in HTTP session is migrated to another nodde in the cluster. Load balancer remains unaffected.\r\n\r\nBoth approaches are configuration only, no changes to your application are required.","title":"session not shared between two server","body":"<p>You have two options:</p>\n\n<ul>\n<li><p><strong>sticky session</strong> - once some user hits one server, load balancer makes sure she will always use the exact same server.</p></li>\n<li><p><strong>session replication</strong> - every change in HTTP session is migrated to another nodde in the cluster. Load balancer remains unaffected.</p></li>\n</ul>\n\n<p>Both approaches are configuration only, no changes to your application are required.</p>\n"}],"owner":{"account_id":1271562,"reputation":141,"user_id":1227688,"accept_rate":73,"display_name":"tulsi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4381,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":12598976,"answer_count":1,"score":4,"last_activity_date":1692862007,"creation_date":1348652703,"question_id":12598919,"body_markdown":"i  have big trouble with my application that web-application(jsp,java,servlet)  landed between  two server cause \r\nthere is load-sharing between server but unfortunately session not maintaining  between server now i am checking checking after login if session is there than ok otherwise i am taking all credential from url (visible encoded url with same key if somebody remember url then big mess  ) obviously its not secure at all ,SO how we can resolve this problame at application level please guide me....... \r\n","title":"session not shared between two server","body":"<p>i  have big trouble with my application that web-application(jsp,java,servlet)  landed between  two server cause \nthere is load-sharing between server but unfortunately session not maintaining  between server now i am checking checking after login if session is there than ok otherwise i am taking all credential from url (visible encoded url with same key if somebody remember url then big mess  ) obviously its not secure at all ,SO how we can resolve this problame at application level please guide me....... </p>\n"},{"tags":["java","node.js","code-coverage","automation-testing"],"answers":[{"tags":[],"owner":{"account_id":16378191,"reputation":1,"user_id":11829846,"display_name":"Andrei Popruha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675153192,"creation_date":1675153192,"answer_id":75294332,"question_id":74876124,"body_markdown":"Solution:\r\n\r\nUse a code coverage tool for Node.js such as Istanbul, NYC or Jest to instrument the code and collect coverage information during test runs.\r\n\r\nExport the coverage data in a format that can be used by other tools for analysis and reporting.\r\n\r\nIntegrate the coverage data with your existing Jacoco tool to have a unified coverage report for both development and automation projects.","title":"Code Coverage Instrumentation with different development and automation projects","body":"<p>Solution:</p>\n<p>Use a code coverage tool for Node.js such as Istanbul, NYC or Jest to instrument the code and collect coverage information during test runs.</p>\n<p>Export the coverage data in a format that can be used by other tools for analysis and reporting.</p>\n<p>Integrate the coverage data with your existing Jacoco tool to have a unified coverage report for both development and automation projects.</p>\n"}],"owner":{"account_id":3001560,"reputation":3651,"user_id":2546966,"accept_rate":60,"display_name":"Vivek Singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692861850,"creation_date":1671626023,"question_id":74876124,"body_markdown":"`Problem Statement`\r\n\r\n&gt; Development project: nodejs\r\n&gt; unit tests: available\r\n\r\n\r\n&gt; Automation project: java\r\n\r\n`Problem`: for our development project we already have unit test coverage. But to figure out automation coverage, we require a medium of instrumenting nodejs code (deployed on some env) while running autotests.\r\n\r\n`Need hints on how to achieve same?` Have worked already on jacoco with both development and automation codes in java. Jacoco instruments flow while code is deployed and helps in providing various dump mechanism.\r\n","title":"Code Coverage Instrumentation with different development and automation projects","body":"<p><code>Problem Statement</code></p>\n<blockquote>\n<p>Development project: nodejs\nunit tests: available</p>\n</blockquote>\n<blockquote>\n<p>Automation project: java</p>\n</blockquote>\n<p><code>Problem</code>: for our development project we already have unit test coverage. But to figure out automation coverage, we require a medium of instrumenting nodejs code (deployed on some env) while running autotests.</p>\n<p><code>Need hints on how to achieve same?</code> Have worked already on jacoco with both development and automation codes in java. Jacoco instruments flow while code is deployed and helps in providing various dump mechanism.</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":2710506,"reputation":4264,"user_id":2339071,"accept_rate":52,"display_name":"user2339071"},"score":0,"creation_date":1378312953,"post_id":18619425,"comment_id":27408330,"body_markdown":"Show some code. It&#39;s difficult to answer questions without seeing what you have actually tried..","body":"Show some code. It&#39;s difficult to answer questions without seeing what you have actually tried.."},{"owner":{"account_id":288478,"reputation":17040,"user_id":588916,"accept_rate":60,"display_name":"collapsar"},"score":0,"creation_date":1378312956,"post_id":18619425,"comment_id":27408334,"body_markdown":"is your `x` fixed or variable?","body":"is your <code>x</code> fixed or variable?"},{"owner":{"account_id":1045249,"reputation":3627,"user_id":1050389,"accept_rate":56,"display_name":"aclowkay"},"score":0,"creation_date":1378315771,"post_id":18619425,"comment_id":27409809,"body_markdown":"I&#39;ve added what I&#39;ve done, and yes x is a fixed variable","body":"I&#39;ve added what I&#39;ve done, and yes x is a fixed variable"}],"answers":[{"tags":[],"owner":{"account_id":3249338,"reputation":2505,"user_id":2740071,"accept_rate":80,"display_name":"Melih Altıntaş"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1378316161,"creation_date":1378316161,"answer_id":18620355,"question_id":18619425,"body_markdown":"    String text = &quot;Some 22 text with 44 characters&quot;;\r\n    Matcher matcher = Pattern.compile(&quot;(.{5})(\\\\d{2})(.{5})&quot;).matcher(text);\r\n\r\n    while (matcher.find()) {\r\n        System.out.println(matcher.group(1) + &quot; - &quot; + matcher.group(2) + &quot; - &quot; + matcher.group(3));\r\n    }\r\n\r\noutput : \r\n\r\n    Some  - 22 -  text\r\n    with  - 44 -  char\r\n\r\n","title":"Getting the &quot;context&quot; text of a matched group","body":"<pre><code>String text = \"Some 22 text with 44 characters\";\nMatcher matcher = Pattern.compile(\"(.{5})(\\\\d{2})(.{5})\").matcher(text);\n\nwhile (matcher.find()) {\n    System.out.println(matcher.group(1) + \" - \" + matcher.group(2) + \" - \" + matcher.group(3));\n}\n</code></pre>\n\n<p>output : </p>\n\n<pre><code>Some  - 22 -  text\nwith  - 44 -  char\n</code></pre>\n"}],"owner":{"account_id":1045249,"reputation":3627,"user_id":1050389,"accept_rate":56,"display_name":"aclowkay"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":509,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692861763,"creation_date":1378312872,"question_id":18619425,"body_markdown":"I&#39;m using the Matcher class of Java to get some strings, now when I get my matches, I also find their begin index and end index. Now what I want to do is get the **x** preceding and proceeding characters.\r\n\r\nSo what I did was just call the substring method on  the string with `{begin index minus `**x**`}` to `{end index plus `**x**`}`, but it seems to be a little heavy, for every match, I&#39;ll have to loop the string for it&#39;s context.\r\n\r\nI wanted to know whether there&#39;s a better way to do that.\r\n\r\nHere is what I&#39;ve done so far:\r\nThe part that bothers me is the `text.substring`, how expensive is it\r\n\r\n    \tString text = &quot;Some 22 text with 44 characters&quot;;\r\n\t\tMatcher matcher = Pattern.compile(&quot;\\\\d{2}&quot;).matcher(text);\r\n\t\tint x = 5;\r\n\t\twhile (matcher.find()) {\r\n\t\t\tString match = matcher.group();\r\n\t\t\tint start = matcher.start();\r\n\t\t\tint end = matcher.end();\r\n\t\t\tString pretext = text.substring(start - x, start);\r\n\t\t\tString postext = text.substring(end, end + x);\r\n\t\t\tSystem.out.println(pretext + &quot; - &quot; + match + &quot; - &quot; + postext);\r\n\t\t}\r\n\r\nSuggested answer of using grouping to solve this:\r\nusing the `regex (.{5})(\\d{2}(.{5})`.\r\nFirst of all, this wouldn&#39;t be able to captures ones without at least 5 characters before it. So the solution to that is `(.{0,5})(\\d{2})(.{0.5})`, very nice for that simple regex `(\\d{2}) `but for one like &quot;`c?at`&quot; and the given text &quot;cat&quot; this would match the groups\r\n\r\n 1. c\r\n 2. at\r\n 3. &amp;nbsp;\r\n\r\n","title":"Getting the &quot;context&quot; text of a matched group","body":"<p>I'm using the Matcher class of Java to get some strings, now when I get my matches, I also find their begin index and end index. Now what I want to do is get the <strong>x</strong> preceding and proceeding characters.</p>\n\n<p>So what I did was just call the substring method on  the string with <code>{begin index minus</code><strong>x</strong><code>}</code> to <code>{end index plus</code><strong>x</strong><code>}</code>, but it seems to be a little heavy, for every match, I'll have to loop the string for it's context.</p>\n\n<p>I wanted to know whether there's a better way to do that.</p>\n\n<p>Here is what I've done so far:\nThe part that bothers me is the <code>text.substring</code>, how expensive is it</p>\n\n<pre><code>    String text = \"Some 22 text with 44 characters\";\n    Matcher matcher = Pattern.compile(\"\\\\d{2}\").matcher(text);\n    int x = 5;\n    while (matcher.find()) {\n        String match = matcher.group();\n        int start = matcher.start();\n        int end = matcher.end();\n        String pretext = text.substring(start - x, start);\n        String postext = text.substring(end, end + x);\n        System.out.println(pretext + \" - \" + match + \" - \" + postext);\n    }\n</code></pre>\n\n<p>Suggested answer of using grouping to solve this:\nusing the <code>regex (.{5})(\\d{2}(.{5})</code>.\nFirst of all, this wouldn't be able to captures ones without at least 5 characters before it. So the solution to that is <code>(.{0,5})(\\d{2})(.{0.5})</code>, very nice for that simple regex <code>(\\d{2})</code>but for one like \"<code>c?at</code>\" and the given text \"cat\" this would match the groups</p>\n\n<ol>\n<li>c</li>\n<li>at</li>\n<li>&nbsp;</li>\n</ol>\n"},{"tags":["java","macos","selenium-webdriver","safari"],"answers":[{"tags":[],"owner":{"account_id":11307943,"reputation":527,"user_id":8291902,"display_name":"nosequeweaponer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1569949858,"creation_date":1569949858,"answer_id":58189469,"question_id":57617400,"body_markdown":"As the automation speed is very fast on Safari, the only solution for this was the &quot;old friend forever&quot;:\r\n\r\n    Thread.sleep\r\n\r\nThat was the only solution, because the Implicit and Explicit waits were not working.","title":"Selenium Java in Safari - Switch to new tab is not working","body":"<p>As the automation speed is very fast on Safari, the only solution for this was the \"old friend forever\":</p>\n\n<pre><code>Thread.sleep\n</code></pre>\n\n<p>That was the only solution, because the Implicit and Explicit waits were not working.</p>\n"},{"tags":[],"owner":{"account_id":28956620,"reputation":1,"user_id":22180041,"display_name":"erdemkiiliic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692861612,"creation_date":1692642033,"answer_id":76947844,"question_id":57617400,"body_markdown":"The issue arises from Safari not bringing the handles in the same order each time. The following if statement will solve the problem. **Note:** This method might not be practical for more than two windows. \r\n\r\nSometimes it comes like\r\n```none\r\n[14B5EF7BD89C54D7345C1AC97BFAA11E, AE475A81A928CAB4739975EA464408C4]\r\n```\r\nand other times it can come like\r\n```none\r\n[AE475A81A928CAB4739975EA464408C4, 14B5EF7BD89C54D7345C1AC97BFAA11E]\r\n```\r\n------------------------\r\n    String currentWindow = getWebDriver().getWindowHandle();\r\n    Set&lt;String&gt; handles = getWebDriver().getWindowHandles();\r\n    for (String strWinHandle : handles) {\r\n        if(!currentWindow.equals(strWinHandle)){\r\n            getWebDriver().switchTo().window(strWinHandle);\r\n        }\r\n    }\r\n","title":"Selenium Java in Safari - Switch to new tab is not working","body":"<p>The issue arises from Safari not bringing the handles in the same order each time. The following if statement will solve the problem. <strong>Note:</strong> This method might not be practical for more than two windows.</p>\n<p>Sometimes it comes like</p>\n<pre class=\"lang-none prettyprint-override\"><code>[14B5EF7BD89C54D7345C1AC97BFAA11E, AE475A81A928CAB4739975EA464408C4]\n</code></pre>\n<p>and other times it can come like</p>\n<pre class=\"lang-none prettyprint-override\"><code>[AE475A81A928CAB4739975EA464408C4, 14B5EF7BD89C54D7345C1AC97BFAA11E]\n</code></pre>\n<hr />\n<pre><code>String currentWindow = getWebDriver().getWindowHandle();\nSet&lt;String&gt; handles = getWebDriver().getWindowHandles();\nfor (String strWinHandle : handles) {\n    if(!currentWindow.equals(strWinHandle)){\n        getWebDriver().switchTo().window(strWinHandle);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11307943,"reputation":527,"user_id":8291902,"display_name":"nosequeweaponer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2601,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":58189469,"answer_count":2,"score":0,"last_activity_date":1692861612,"creation_date":1566510289,"question_id":57617400,"body_markdown":"I have the next situation:\r\n\r\nI&#39;m running Automation in MacOS with Selenium in Safari.\r\nI want to take control over a new tab opened (Switch to a new tab in Safari)\r\n\r\nI&#39;m able to do it with Chrome and Firefox, but in Safari does not work.\r\n\r\nThe next code is what I&#39;m using for that:\r\n\r\n        //Store the parent window\r\n        String parentWindow = driver.getWindowHandle();\r\n\r\n        //Open a new Windows(Mailtrap)\r\n        String a = &quot;window.open(&#39;https://mailtrap.io/signin&#39;,&#39;_blank&#39;);&quot;;\r\n        ((JavascriptExecutor)driver).executeScript(a);\r\n\r\n\r\n        //Take control over new browser\r\n        for(String handle: driver.getWindowHandles()){\r\n            driver.switchTo().window(handle);\r\n        }\r\n\r\n        //Make the same actions over new window\r\n        driver.manage().window().maximize();\r\n\r\n        driver.switchTo().defaultContent();\r\n\r\nAfter that...\r\n\r\n //Close window and back to the parent window\r\n        \r\n        driver.close();\r\n        driver.switchTo().window(parentWindow);\r\n        driver.switchTo().defaultContent();\r\n\r\nAs I told before: It works in Firefox, Chrome, IE11, but in Safari 12.0.3 this is the message when I do a manual click over a tab.\r\n\r\n&quot;This Safari window is remotely controlled by an automated test.&quot;\r\n\r\nTo interact with this Safari window, you need to stop the current automated test session.\r\nYou should not use this window for normal web browsing.\r\n\r\n&quot;Turn OFF All Automation&quot; , &quot;Stop Session&quot;, &quot;Continue Session&quot;\r\n\r\nCould anybody help me with this?\r\n\r\n\r\nPS: Develop --&gt; Allow remote automation is selected.","title":"Selenium Java in Safari - Switch to new tab is not working","body":"<p>I have the next situation:</p>\n\n<p>I'm running Automation in MacOS with Selenium in Safari.\nI want to take control over a new tab opened (Switch to a new tab in Safari)</p>\n\n<p>I'm able to do it with Chrome and Firefox, but in Safari does not work.</p>\n\n<p>The next code is what I'm using for that:</p>\n\n<pre><code>    //Store the parent window\n    String parentWindow = driver.getWindowHandle();\n\n    //Open a new Windows(Mailtrap)\n    String a = \"window.open('https://mailtrap.io/signin','_blank');\";\n    ((JavascriptExecutor)driver).executeScript(a);\n\n\n    //Take control over new browser\n    for(String handle: driver.getWindowHandles()){\n        driver.switchTo().window(handle);\n    }\n\n    //Make the same actions over new window\n    driver.manage().window().maximize();\n\n    driver.switchTo().defaultContent();\n</code></pre>\n\n<p>After that...</p>\n\n<p>//Close window and back to the parent window</p>\n\n<pre><code>    driver.close();\n    driver.switchTo().window(parentWindow);\n    driver.switchTo().defaultContent();\n</code></pre>\n\n<p>As I told before: It works in Firefox, Chrome, IE11, but in Safari 12.0.3 this is the message when I do a manual click over a tab.</p>\n\n<p>\"This Safari window is remotely controlled by an automated test.\"</p>\n\n<p>To interact with this Safari window, you need to stop the current automated test session.\nYou should not use this window for normal web browsing.</p>\n\n<p>\"Turn OFF All Automation\" , \"Stop Session\", \"Continue Session\"</p>\n\n<p>Could anybody help me with this?</p>\n\n<p>PS: Develop --> Allow remote automation is selected.</p>\n"},{"tags":["java","google-cloud-platform","deployment","google-cloud-functions","service-accounts"],"answers":[{"tags":[],"owner":{"account_id":15760814,"reputation":68963,"user_id":11372593,"display_name":"guillaume blaquiere"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692860485,"creation_date":1692860485,"answer_id":76966876,"question_id":76966184,"body_markdown":"In fact, there is no parameter for that. The GCLOUD CLI offers convenient feature but, as usual, nothing is magic!\r\n\r\nHave a try yourself. Perform your command with the `--allow-unauthenticated` flag and add the flag `--log-http`. This flag will display all the API calls performed by the CLI.\r\n\r\nAnd you will see that the CLI perform the function deployment AND another calls to grant the `allUsers` as Functions Invoker.\r\n\r\n----\r\n\r\nBecause of that, if you want to grant Function Invoker another account than `allUsers` you have to perform yourself this additional operation.\r\n\r\nUse `gcloud functions add-iam-policy-binding --member=...` or the new one `gcloud functions add-invoker-policy-binding --member=...` (same as before, but you haven&#39;t the role to mention)\r\n\r\n---\r\n\r\nIf you want to use the API it&#39;s a bit difficult. In fact, there is no API call to ADD a policy. Only a get and a set.\r\n\r\nTherefore, you need to [GET][1] all the policies on the Cloud Functions, add &quot;manually&quot; (programmatically) the account with its role in the JSON, and then [POST (set)][2] the whole JSON with the new policy.\r\n\r\n*It&#39;s exactly what the CLI do, if you have a closer look to the --log-http trace.*\r\n\r\n\r\n  [1]: https://cloud.google.com/functions/docs/reference/rest/v2/projects.locations.functions/getIamPolicy\r\n  [2]: https://cloud.google.com/functions/docs/reference/rest/v2/projects.locations.functions/setIamPolicy","title":"How to deploy gcloud function by setting service account as permission?","body":"<p>In fact, there is no parameter for that. The GCLOUD CLI offers convenient feature but, as usual, nothing is magic!</p>\n<p>Have a try yourself. Perform your command with the <code>--allow-unauthenticated</code> flag and add the flag <code>--log-http</code>. This flag will display all the API calls performed by the CLI.</p>\n<p>And you will see that the CLI perform the function deployment AND another calls to grant the <code>allUsers</code> as Functions Invoker.</p>\n<hr />\n<p>Because of that, if you want to grant Function Invoker another account than <code>allUsers</code> you have to perform yourself this additional operation.</p>\n<p>Use <code>gcloud functions add-iam-policy-binding --member=...</code> or the new one <code>gcloud functions add-invoker-policy-binding --member=...</code> (same as before, but you haven't the role to mention)</p>\n<hr />\n<p>If you want to use the API it's a bit difficult. In fact, there is no API call to ADD a policy. Only a get and a set.</p>\n<p>Therefore, you need to <a href=\"https://cloud.google.com/functions/docs/reference/rest/v2/projects.locations.functions/getIamPolicy\" rel=\"nofollow noreferrer\">GET</a> all the policies on the Cloud Functions, add &quot;manually&quot; (programmatically) the account with its role in the JSON, and then <a href=\"https://cloud.google.com/functions/docs/reference/rest/v2/projects.locations.functions/setIamPolicy\" rel=\"nofollow noreferrer\">POST (set)</a> the whole JSON with the new policy.</p>\n<p><em>It's exactly what the CLI do, if you have a closer look to the --log-http trace.</em></p>\n"},{"tags":[],"owner":{"account_id":8056024,"reputation":2595,"user_id":6073141,"display_name":"al-dann"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692861369,"creation_date":1692861369,"answer_id":76966986,"question_id":76966184,"body_markdown":"Not sure I understand your question, but from the best of my guesses of your concerns...\r\n\r\nYou might like to check the `gcloud functions deploy` CLI description here: [gcloud functions deploy][1]\r\n\r\nIn particular the parameter `--run-service-account` (for gen2 cloud functions) and `--service-account` (for the original cloud functions), which defines under which service account (and its IAM roles) the given cloud function is to be executed. Thus, what the code of the given cloud function is permitted to do with other APIs. The description is here: [--run-service-account][2] and [--service-account][3]\r\n\r\nYou also might like to decide what IAM roles should that service account have so that the cloud function can achieve what it is supposed to do, but won&#39;t get too wide permissions to avoid unnecessary security risks. And assign/manage the relevant roles to the service account independently from the cloud function deployment.\r\n\r\nThe details can be found at the [Function Identity][4] section of the documentation.\r\n\r\nHowever, all of the above has nothing to do with who and how triggers the cloud function. Not sure if you are interested in that area. \r\n\r\nIn case of gen2 cloud functions the CLI parameter might be `--trigger-service-account` with the description here: [--trigger-service-account][5]\r\n\r\nIf your use case is different and more complex, you might like to describe it in more details, so the requirements are clearly articulated.\r\n\r\n\r\n  [1]: https://cloud.google.com/sdk/gcloud/reference/functions/deploy\r\n  [2]: https://cloud.google.com/sdk/gcloud/reference/functions/deploy#--run-service-account\r\n  [3]: https://cloud.google.com/sdk/gcloud/reference/functions/deploy#--service-account\r\n  [4]: https://cloud.google.com/functions/docs/securing/function-identity\r\n  [5]: https://cloud.google.com/sdk/gcloud/reference/functions/deploy#--trigger-service-account","title":"How to deploy gcloud function by setting service account as permission?","body":"<p>Not sure I understand your question, but from the best of my guesses of your concerns...</p>\n<p>You might like to check the <code>gcloud functions deploy</code> CLI description here: <a href=\"https://cloud.google.com/sdk/gcloud/reference/functions/deploy\" rel=\"nofollow noreferrer\">gcloud functions deploy</a></p>\n<p>In particular the parameter <code>--run-service-account</code> (for gen2 cloud functions) and <code>--service-account</code> (for the original cloud functions), which defines under which service account (and its IAM roles) the given cloud function is to be executed. Thus, what the code of the given cloud function is permitted to do with other APIs. The description is here: <a href=\"https://cloud.google.com/sdk/gcloud/reference/functions/deploy#--run-service-account\" rel=\"nofollow noreferrer\">--run-service-account</a> and <a href=\"https://cloud.google.com/sdk/gcloud/reference/functions/deploy#--service-account\" rel=\"nofollow noreferrer\">--service-account</a></p>\n<p>You also might like to decide what IAM roles should that service account have so that the cloud function can achieve what it is supposed to do, but won't get too wide permissions to avoid unnecessary security risks. And assign/manage the relevant roles to the service account independently from the cloud function deployment.</p>\n<p>The details can be found at the <a href=\"https://cloud.google.com/functions/docs/securing/function-identity\" rel=\"nofollow noreferrer\">Function Identity</a> section of the documentation.</p>\n<p>However, all of the above has nothing to do with who and how triggers the cloud function. Not sure if you are interested in that area.</p>\n<p>In case of gen2 cloud functions the CLI parameter might be <code>--trigger-service-account</code> with the description here: <a href=\"https://cloud.google.com/sdk/gcloud/reference/functions/deploy#--trigger-service-account\" rel=\"nofollow noreferrer\">--trigger-service-account</a></p>\n<p>If your use case is different and more complex, you might like to describe it in more details, so the requirements are clearly articulated.</p>\n"}],"owner":{"account_id":14424776,"reputation":199,"user_id":10419901,"display_name":"Renee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":149,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1692861369,"creation_date":1692850493,"question_id":76966184,"body_markdown":"I want to deploy a Google cloud function. This cloud function needs to have service account as cloud function invoker. To set allUsers as permission, we use --allow-unauthenticated flag.\r\n\r\nThis is the command I am using for deploying:\r\n\r\ngcloud functions deploy functionTemp --entry-point functions.FunctionTemp --runtime java11 --trigger-http --memory 512MB --source=FunctionTemp\r\n\r\n\r\nAs mentioned adding --allow-unauthenticated adds allUsers as cloud invoker permission. If I want to sery default service account as cloud invoker and not allUsers, how do I change the command? I am not able to find proper solution for it\r\n\r\nI tried service-account flag but that&#39;s not used for the purpose I am using it and also if we are using default service account, we don&#39;t even have to specify this flag.\r\n\r\nWe can set the permission for this cloud function in the api service pages but I want to do it manually. I am stuck here. Any help would be appreciated.","title":"How to deploy gcloud function by setting service account as permission?","body":"<p>I want to deploy a Google cloud function. This cloud function needs to have service account as cloud function invoker. To set allUsers as permission, we use --allow-unauthenticated flag.</p>\n<p>This is the command I am using for deploying:</p>\n<p>gcloud functions deploy functionTemp --entry-point functions.FunctionTemp --runtime java11 --trigger-http --memory 512MB --source=FunctionTemp</p>\n<p>As mentioned adding --allow-unauthenticated adds allUsers as cloud invoker permission. If I want to sery default service account as cloud invoker and not allUsers, how do I change the command? I am not able to find proper solution for it</p>\n<p>I tried service-account flag but that's not used for the purpose I am using it and also if we are using default service account, we don't even have to specify this flag.</p>\n<p>We can set the permission for this cloud function in the api service pages but I want to do it manually. I am stuck here. Any help would be appreciated.</p>\n"},{"tags":["java","selenium-webdriver","testng","qaf"],"answers":[{"tags":[],"owner":{"account_id":460481,"reputation":5813,"user_id":861594,"display_name":"user861594"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692807709,"creation_date":1692807709,"answer_id":76963221,"question_id":76959048,"body_markdown":"Most likely because of [known bug][1]. It has been fixed and should be available in next release. You can try 4.0.0-SNAPSHOT from https://oss.sonatype.org/content/repositories/snapshots/ to make sure that issue is because of that bug.\r\n\r\n\r\n  [1]: https://github.com/qmetry/qaf/issues/444","title":"QAF | Desired capabilities not working with QAF 4.0.0RC1 &amp; Selenium 4","body":"<p>Most likely because of <a href=\"https://github.com/qmetry/qaf/issues/444\" rel=\"nofollow noreferrer\">known bug</a>. It has been fixed and should be available in next release. You can try 4.0.0-SNAPSHOT from <a href=\"https://oss.sonatype.org/content/repositories/snapshots/\" rel=\"nofollow noreferrer\">https://oss.sonatype.org/content/repositories/snapshots/</a> to make sure that issue is because of that bug.</p>\n"}],"owner":{"account_id":12044988,"reputation":17,"user_id":10069320,"display_name":"Renish K.R"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76963221,"answer_count":1,"score":0,"last_activity_date":1692861305,"creation_date":1692774518,"question_id":76959048,"body_markdown":"Desired capabilities are not working after upgrade to QAF 4.0.0RC1 with Selenium 4. I have tried below properties:\r\n\r\n    chrome.additional.capabilities​​={&quot;chromeOptions&quot;:{&quot;args&quot;:[&quot;--headless=new&quot;,&quot;--window-size=3000,1080&quot;]}}\r\n    driver.additional.capabilities={&quot;chromeOptions&quot;:{&quot;args&quot;:[&quot;--headless=new&quot;,&quot;--window-size=1920,1080&quot;]}\r\n    chrome.additional.capabilities​​={&quot;goog:chromeOptions&quot;:{&quot;args&quot;:[&quot;--headless=new&quot;,&quot;--window-size=3000,1080&quot;]}}\r\n    driver.additional.capabilities={&quot;goog:chromeOptions&quot;:{&quot;args&quot;:[&quot;--headless=new&quot;,&quot;--window-size=1920,1080&quot;]}\r\n\r\nI have referred below link and the desired capabilities are working for QAF 3.0.1 with Selenium 3.\r\nhttps://qmetry.github.io/qaf/qaf-2.1.15/setting_driver_capabilities.html\r\n\r\nChrome to accept the capabilities.","title":"QAF | Desired capabilities not working with QAF 4.0.0RC1 &amp; Selenium 4","body":"<p>Desired capabilities are not working after upgrade to QAF 4.0.0RC1 with Selenium 4. I have tried below properties:</p>\n<pre><code>chrome.additional.capabilities​​={&quot;chromeOptions&quot;:{&quot;args&quot;:[&quot;--headless=new&quot;,&quot;--window-size=3000,1080&quot;]}}\ndriver.additional.capabilities={&quot;chromeOptions&quot;:{&quot;args&quot;:[&quot;--headless=new&quot;,&quot;--window-size=1920,1080&quot;]}\nchrome.additional.capabilities​​={&quot;goog:chromeOptions&quot;:{&quot;args&quot;:[&quot;--headless=new&quot;,&quot;--window-size=3000,1080&quot;]}}\ndriver.additional.capabilities={&quot;goog:chromeOptions&quot;:{&quot;args&quot;:[&quot;--headless=new&quot;,&quot;--window-size=1920,1080&quot;]}\n</code></pre>\n<p>I have referred below link and the desired capabilities are working for QAF 3.0.1 with Selenium 3.\n<a href=\"https://qmetry.github.io/qaf/qaf-2.1.15/setting_driver_capabilities.html\" rel=\"nofollow noreferrer\">https://qmetry.github.io/qaf/qaf-2.1.15/setting_driver_capabilities.html</a></p>\n<p>Chrome to accept the capabilities.</p>\n"},{"tags":["java","spring","spring-cloud-sleuth","spring-micrometer","micrometer-tracing"],"comments":[{"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"score":0,"creation_date":1692780594,"post_id":76958644,"comment_id":135669656,"body_markdown":"I am not familiar with Spring, however, it looks like it adds custom headers. That can be achieved through custom interceptors, refer: https://stackoverflow.com/questions/48327796/apache-httpclient-custom-dynamic-header-on-every-request Far as I can recollect, there is nothing ready made for including trace headers","body":"I am not familiar with Spring, however, it looks like it adds custom headers. That can be achieved through custom interceptors, refer: <a href=\"https://stackoverflow.com/questions/48327796/apache-httpclient-custom-dynamic-header-on-every-request\" title=\"apache httpclient custom dynamic header on every request\">stackoverflow.com/questions/48327796/&hellip;</a> Far as I can recollect, there is nothing ready made for including trace headers"},{"owner":{"account_id":11296302,"reputation":2929,"user_id":8283737,"accept_rate":89,"display_name":"Arun Gowda"},"score":0,"creation_date":1692780680,"post_id":76958644,"comment_id":135669669,"body_markdown":"Yes. Writing custom interceptor is the last option I&#39;d be looking at.","body":"Yes. Writing custom interceptor is the last option I&#39;d be looking at."},{"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"score":0,"creation_date":1692781173,"post_id":76958644,"comment_id":135669755,"body_markdown":":) I suppose then you have to get on with it, there is really nothing ready made. You certainly could look at the Spring interceptor for the core mechanics, that would help","body":":) I suppose then you have to get on with it, there is really nothing ready made. You certainly could look at the Spring interceptor for the core mechanics, that would help"},{"owner":{"account_id":11296302,"reputation":2929,"user_id":8283737,"accept_rate":89,"display_name":"Arun Gowda"},"score":0,"creation_date":1692781756,"post_id":76958644,"comment_id":135669875,"body_markdown":"I&#39;ll take a look into that. Thanks.","body":"I&#39;ll take a look into that. Thanks."}],"answers":[{"tags":[],"owner":{"account_id":11296302,"reputation":2929,"user_id":8283737,"accept_rate":89,"display_name":"Arun Gowda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692861264,"creation_date":1692861264,"answer_id":76966971,"question_id":76958644,"body_markdown":"Alright so I am using Zipkin&#39;s brave as the tracing vendor. During my investigation into potential instrumentation support, I came across relevant information in [this resource][1]\r\n\r\nAlthough the documentation there gave me an idea on  how to use it, the code example was calling a wrong method.\r\n\r\nHere&#39;s how I configured my http client5.\r\n\r\n1. First add the dependency in pom.xml\r\n\r\n         &lt;dependency&gt;\r\n            &lt;groupId&gt;io.zipkin.brave&lt;/groupId&gt;\r\n            &lt;artifactId&gt;brave-instrumentation-httpclient5&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n\r\n2. Then Configure the Apache http client as below.\r\n\r\n        @Bean\r\n        public HttpTracing create(Tracing tracing) {\r\n            return HttpTracing\r\n                    .newBuilder(tracing)\r\n                    .build();\r\n        }\r\n\r\n        @Bean\r\n        public CloseableHttpClient httpClient(HttpTracing httpTracing) {\r\n            HttpClientBuilder httpClientBuilder = HttpClients.custom();\r\n\r\n            return HttpClient5Tracing.newBuilder(httpTracing)\r\n                    .build(httpClientBuilder);\r\n        }\r\nIn addition to Zipkin&#39;s &#39;brave,&#39; another recommended tracing vendor according to Spring is Opentelemetry. Nevertheless, as of now, it appears that their instrumentation libraries are still in the process of being developed, as indicated by [their maven repo][2].\r\n\r\n  [1]: https://github.com/openzipkin/brave/tree/master/instrumentation/httpclient5\r\n  [2]: https://mvnrepository.com/artifact/io.opentelemetry.instrumentation/opentelemetry-apache-httpclient-4.3/1.12.1-alpha","title":"TracingClientHttpRequestInterceptor equivalent for Apache http client","body":"<p>Alright so I am using Zipkin's brave as the tracing vendor. During my investigation into potential instrumentation support, I came across relevant information in <a href=\"https://github.com/openzipkin/brave/tree/master/instrumentation/httpclient5\" rel=\"nofollow noreferrer\">this resource</a></p>\n<p>Although the documentation there gave me an idea on  how to use it, the code example was calling a wrong method.</p>\n<p>Here's how I configured my http client5.</p>\n<ol>\n<li><p>First add the dependency in pom.xml</p>\n<pre><code>  &lt;dependency&gt;\n     &lt;groupId&gt;io.zipkin.brave&lt;/groupId&gt;\n     &lt;artifactId&gt;brave-instrumentation-httpclient5&lt;/artifactId&gt;\n &lt;/dependency&gt;\n</code></pre>\n</li>\n<li><p>Then Configure the Apache http client as below.</p>\n<pre><code> @Bean\n public HttpTracing create(Tracing tracing) {\n     return HttpTracing\n             .newBuilder(tracing)\n             .build();\n }\n\n @Bean\n public CloseableHttpClient httpClient(HttpTracing httpTracing) {\n     HttpClientBuilder httpClientBuilder = HttpClients.custom();\n\n     return HttpClient5Tracing.newBuilder(httpTracing)\n             .build(httpClientBuilder);\n }\n</code></pre>\n</li>\n</ol>\n<p>In addition to Zipkin's 'brave,' another recommended tracing vendor according to Spring is Opentelemetry. Nevertheless, as of now, it appears that their instrumentation libraries are still in the process of being developed, as indicated by <a href=\"https://mvnrepository.com/artifact/io.opentelemetry.instrumentation/opentelemetry-apache-httpclient-4.3/1.12.1-alpha\" rel=\"nofollow noreferrer\">their maven repo</a>.</p>\n"}],"owner":{"account_id":11296302,"reputation":2929,"user_id":8283737,"accept_rate":89,"display_name":"Arun Gowda"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":280,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76966971,"answer_count":1,"score":2,"last_activity_date":1692861264,"creation_date":1692770467,"question_id":76958644,"body_markdown":"I&#39;ve been attempting to set up distributed tracing using Spring Micrometer. To propagate the traceId across various services, it appears necessary to configure our HTTP clients to include this information in the headers.\r\n\r\nFor the `RestTemplate` client, Spring conveniently offers an interceptor that can be set up as shown below:\r\n\r\n    @Bean\r\n    public HttpTracing create(Tracing tracing) {\r\n        return HttpTracing\r\n                .newBuilder(tracing)\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public RestTemplate restTemplate(HttpTracing httpTracing) {\r\n        return new RestTemplateBuilder()\r\n                .interceptors(TracingClientHttpRequestInterceptor.create(httpTracing))\r\n                .build();\r\n    }\r\n\r\nBut I couldn&#39;t find a similar one for Apache http client. \r\nI am not sure if I should write my custom interceptor that does this? \r\n\r\nOr is one available already provided by a library.?\r\n","title":"TracingClientHttpRequestInterceptor equivalent for Apache http client","body":"<p>I've been attempting to set up distributed tracing using Spring Micrometer. To propagate the traceId across various services, it appears necessary to configure our HTTP clients to include this information in the headers.</p>\n<p>For the <code>RestTemplate</code> client, Spring conveniently offers an interceptor that can be set up as shown below:</p>\n<pre><code>@Bean\npublic HttpTracing create(Tracing tracing) {\n    return HttpTracing\n            .newBuilder(tracing)\n            .build();\n}\n\n@Bean\npublic RestTemplate restTemplate(HttpTracing httpTracing) {\n    return new RestTemplateBuilder()\n            .interceptors(TracingClientHttpRequestInterceptor.create(httpTracing))\n            .build();\n}\n</code></pre>\n<p>But I couldn't find a similar one for Apache http client.\nI am not sure if I should write my custom interceptor that does this?</p>\n<p>Or is one available already provided by a library.?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1306954,"reputation":11661,"user_id":1255746,"accept_rate":78,"display_name":"Josh M"},"score":0,"creation_date":1378899587,"post_id":18740122,"comment_id":27618683,"body_markdown":"So you want to print out all of the lines that end with aa or ee?","body":"So you want to print out all of the lines that end with aa or ee?"},{"owner":{"account_id":3289932,"reputation":746,"user_id":2768479,"display_name":"user2768479"},"score":0,"creation_date":1378900101,"post_id":18740122,"comment_id":27619009,"body_markdown":"Yes, that&#39;s about it!","body":"Yes, that&#39;s about it!"}],"answers":[{"tags":[],"owner":{"account_id":1577202,"reputation":377,"user_id":1621532,"display_name":"user71404"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1378900240,"creation_date":1378899756,"answer_id":18740207,"question_id":18740122,"body_markdown":"`Matcher.group()` only returns if there is a match already. You need to do something like this:-\r\n\r\n    if (m.matches()) {\r\n        return m.group();\r\n    } else {\r\n        return &quot;&quot;;\r\n    }","title":"Return the matches from one method to another","body":"<p><code>Matcher.group()</code> only returns if there is a match already. You need to do something like this:-</p>\n\n<pre><code>if (m.matches()) {\n    return m.group();\n} else {\n    return \"\";\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1378904929,"creation_date":1378899799,"answer_id":18740226,"question_id":18740122,"body_markdown":"The [`matches`][1] or [`find`][2] methods must precede the `group` method. Since `matches` attempts to match the entire region against the pattern, it is more appropriate here\r\n\r\n    public String matchEndings(String s){\r\n       Pattern p = Pattern.compile(&quot;(aa|ee)$&quot;);\r\n       Matcher m = p.matcher(s);\r\n    \r\n    if (m.matches) {\r\n       return m.group();\r\n    } else {\r\n       return &quot;&quot;\r\n    }\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#matches%28%29\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29\r\n","title":"Return the matches from one method to another","body":"<p>The <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#matches%28%29\" rel=\"nofollow\"><code>matches</code></a> or <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29\" rel=\"nofollow\"><code>find</code></a> methods must precede the <code>group</code> method. Since <code>matches</code> attempts to match the entire region against the pattern, it is more appropriate here</p>\n\n<pre><code>public String matchEndings(String s){\n   Pattern p = Pattern.compile(\"(aa|ee)$\");\n   Matcher m = p.matcher(s);\n\nif (m.matches) {\n   return m.group();\n} else {\n   return \"\"\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":203953,"reputation":5113,"user_id":451894,"accept_rate":53,"display_name":"upog"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1378900076,"creation_date":1378900076,"answer_id":18740325,"question_id":18740122,"body_markdown":"  \r\n\r\n    import java.util.ArrayList;\r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n    public class PotenssienSumma {\r\n    \tpublic static void main(String[] args) {\t\t\t\r\n    \t\tArrayList&lt;String&gt; sentences = new ArrayList&lt;&gt;(10);\r\n    \t\tsentences.add(&quot;aa&quot;);\r\n    \t\tsentences.add(&quot;1324&quot;);\r\n    \t\tfor (String sentence: sentences) {\r\n    \t\t\tString match = Matching.matchEndings(sentence);\r\n    \t\t\tif (match.length() &gt; 0) {\r\n    \t\t\t     System.out.println(match);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\t\r\n    class Matching{\t\t\t\r\n    \tpublic  static String matchEndings(String s){\r\n    \t\tPattern p = Pattern.compile(&quot;.*?(aa|ee)&quot;);\r\n    \t\tMatcher m = p.matcher(s);\r\n    \t\tif (m.matches()) {\r\n    \t\t    return m.group();\r\n    \t\t} else {\r\n    \t\t\treturn &quot;&quot;;\r\n    \t\t}\r\n    \t}\t\t\r\n    }","title":"Return the matches from one method to another","body":"<pre><code>import java.util.ArrayList;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\npublic class PotenssienSumma {\n    public static void main(String[] args) {            \n        ArrayList&lt;String&gt; sentences = new ArrayList&lt;&gt;(10);\n        sentences.add(\"aa\");\n        sentences.add(\"1324\");\n        for (String sentence: sentences) {\n            String match = Matching.matchEndings(sentence);\n            if (match.length() &gt; 0) {\n                 System.out.println(match);\n            }\n        }\n    }\n}   \nclass Matching{         \n    public  static String matchEndings(String s){\n        Pattern p = Pattern.compile(\".*?(aa|ee)\");\n        Matcher m = p.matcher(s);\n        if (m.matches()) {\n            return m.group();\n        } else {\n            return \"\";\n        }\n    }       \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1306954,"reputation":11661,"user_id":1255746,"accept_rate":78,"display_name":"Josh M"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1378900450,"creation_date":1378900450,"answer_id":18740475,"question_id":18740122,"body_markdown":"It seems like overkill to use RegEx when all you need is a simple `endsWith(String)`:\r\n\r\n    public void print(final List&lt;String&gt; sentences, final String... endings){\r\n        for(final String sentence : sentences){\r\n            for(final String ending : endings){\r\n                if(sentence.endsWith(ending)){\r\n                    System.out.println(sentence);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nThe method above will loop through a `List&lt;String&gt;` of sentences and print out all of the sentences that end with one of the elements in `endings`. For usage, you could try:\r\n\r\n    print(sentences, &quot;aa&quot;, &quot;ee&quot;);\r\n\r\nWhere `sentences` is your `ArrayList&lt;String&gt;` of sentences.","title":"Return the matches from one method to another","body":"<p>It seems like overkill to use RegEx when all you need is a simple <code>endsWith(String)</code>:</p>\n\n<pre><code>public void print(final List&lt;String&gt; sentences, final String... endings){\n    for(final String sentence : sentences){\n        for(final String ending : endings){\n            if(sentence.endsWith(ending)){\n                System.out.println(sentence);\n                break;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The method above will loop through a <code>List&lt;String&gt;</code> of sentences and print out all of the sentences that end with one of the elements in <code>endings</code>. For usage, you could try:</p>\n\n<pre><code>print(sentences, \"aa\", \"ee\");\n</code></pre>\n\n<p>Where <code>sentences</code> is your <code>ArrayList&lt;String&gt;</code> of sentences.</p>\n"},{"tags":[],"owner":{"account_id":411534,"reputation":2703,"user_id":784043,"accept_rate":50,"display_name":"RokL"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1378910602,"creation_date":1378908669,"answer_id":18743558,"question_id":18740122,"body_markdown":" - Don&#39;t construct Pattern in the method. That is expensive. Put the pattern object into a static final variable.\r\n\r\n - The correct use for patterns is the following:\r\n\r\n\r\n\r\n        while(matcher.find()) {\r\n            sysout(matcher.group());\r\n        }\r\n\r\nThis will print all matches, if you want just one match, replace the `while` with `if`.\r\n\r\n - I don&#39;t know if this is intentional but your regex doesn&#39;t match `ee|aa` to end of the string. It matches `ee` or `aa` anywhere in the string along with any characters preceeding it. For instance for string `Fox preens in front of a vixen` your regex returns string `Fox pree`. Don&#39;t know if that&#39;s intended.\r\n\r\nHere&#39;s a class that takes a list or a collection of strings as an argument and then lazily finds all words that end in `aa` or `ee`. It has a `main` method you can run to test.\r\n\r\n        public class Endings implements Iterable&lt;String&gt; {\r\n\t        private final Iterable&lt;String&gt; strings;\r\n\t        private static final Pattern pat = Pattern.compile(&quot;(?&lt;=^|\\\\s)\\\\S*(aa|ee)(?=\\\\s|$)&quot;);\r\n\r\n\t        public static void main(String[] args) {\r\n\t        \tEndings endings = new Endings(Arrays.asList(&quot;This testaabb testee testaa&quot;, &quot;Test2aa Test3ee &quot;, &quot;no match&quot;));\r\n\t        \tfor(String word : endings) {\r\n\t        \t\tSystem.out.println(word);\r\n\t        \t}\r\n\t        }\r\n\t\t\r\n\t        public Endings(Iterable&lt;String&gt; strings) {\r\n\t        \tthis.strings = strings;\r\n\t        }\r\n     \r\n\t        public Iterator&lt;String&gt; iterator() {\r\n\t        \treturn new Iterator&lt;String&gt;() {\r\n\t\t\t\tprivate Iterator&lt;String&gt; iter = strings.iterator();\r\n\t\t\t\tprivate Matcher m;\r\n\t\t\t\tprivate String result;\r\n\t\t\t\tpublic boolean hasNext() {\r\n\t\t\t\t\tif (result == null) {\r\n\t\t\t\t\t\tif (m == null) {\r\n\t\t\t\t\t\t\tif (iter.hasNext()) {\r\n\t\t\t\t\t\t\t\tm = pat.matcher(iter.next());\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (m.find()) {\r\n\t\t\t\t\t\t\tresult = m.group();\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tm = null;\r\n\t\t\t\t\t\t\treturn hasNext();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpublic String next() {\r\n\t\t\t\t\tif (result != null) {\r\n\t\t\t\t\t\tString ret = result;\r\n\t\t\t\t\t\tresult = null;\r\n\t\t\t\t\t\treturn ret;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new NoSuchElementException();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpublic void remove() {\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t        };\r\n\t\t}\r\n\t\t\r\n\t}\r\n","title":"Return the matches from one method to another","body":"<ul>\n<li><p>Don't construct Pattern in the method. That is expensive. Put the pattern object into a static final variable.</p></li>\n<li><p>The correct use for patterns is the following:</p>\n\n<pre><code>while(matcher.find()) {\n    sysout(matcher.group());\n}\n</code></pre></li>\n</ul>\n\n<p>This will print all matches, if you want just one match, replace the <code>while</code> with <code>if</code>.</p>\n\n<ul>\n<li>I don't know if this is intentional but your regex doesn't match <code>ee|aa</code> to end of the string. It matches <code>ee</code> or <code>aa</code> anywhere in the string along with any characters preceeding it. For instance for string <code>Fox preens in front of a vixen</code> your regex returns string <code>Fox pree</code>. Don't know if that's intended.</li>\n</ul>\n\n<p>Here's a class that takes a list or a collection of strings as an argument and then lazily finds all words that end in <code>aa</code> or <code>ee</code>. It has a <code>main</code> method you can run to test.</p>\n\n<pre><code>    public class Endings implements Iterable&lt;String&gt; {\n        private final Iterable&lt;String&gt; strings;\n        private static final Pattern pat = Pattern.compile(\"(?&lt;=^|\\\\s)\\\\S*(aa|ee)(?=\\\\s|$)\");\n\n        public static void main(String[] args) {\n            Endings endings = new Endings(Arrays.asList(\"This testaabb testee testaa\", \"Test2aa Test3ee \", \"no match\"));\n            for(String word : endings) {\n                System.out.println(word);\n            }\n        }\n\n        public Endings(Iterable&lt;String&gt; strings) {\n            this.strings = strings;\n        }\n\n        public Iterator&lt;String&gt; iterator() {\n            return new Iterator&lt;String&gt;() {\n            private Iterator&lt;String&gt; iter = strings.iterator();\n            private Matcher m;\n            private String result;\n            public boolean hasNext() {\n                if (result == null) {\n                    if (m == null) {\n                        if (iter.hasNext()) {\n                            m = pat.matcher(iter.next());\n                        } else {\n                            return false;\n                        }\n                    }\n                    if (m.find()) {\n                        result = m.group();\n                        return true;\n                    } else {\n                        m = null;\n                        return hasNext();\n                    }\n                } else {\n                    return true;\n                }\n            }\n\n            public String next() {\n                if (result != null) {\n                    String ret = result;\n                    result = null;\n                    return ret;\n                } else {\n                    throw new NoSuchElementException();\n                }\n            }\n\n            public void remove() {\n\n            }\n            };\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":3289932,"reputation":746,"user_id":2768479,"display_name":"user2768479"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2702,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":18740207,"answer_count":5,"score":1,"last_activity_date":1692861129,"creation_date":1378899485,"question_id":18740122,"body_markdown":"I&#39;m an absolute Java beginner. I&#39;ve searched on the forums, but couldn&#39;t find an answer to this question.\r\n\r\nI have two classes, one which browses through an arraylist of sentences. I only attach the for-each loop as seen below.\r\n&quot;Matching&quot; is the instance of the other class (containing the pattern/matcher code)\r\nmatchEndings is the method, attached below.\r\n\r\n\tfor (String sentence: sentences) {\r\n\t\tString match = matching.matchEndings(sentence);\r\n\t\tif (match.length() &gt; 0) {\r\n\t\t\tSystem.out.println(match);\r\n\t\t}\r\n\t}\r\n\r\nThis is the method.\r\n\r\n\tpublic String matchEndings(String s){\r\n\tPattern p = Pattern.compile(&quot;.*?(aa|ee)&quot;);\r\n\tMatcher m = p.matcher(s);\r\n\t\r\n\treturn m.group();\r\n\t\t\r\n\t}\r\n\r\nMy question is, how do I return the matched sentences, containing aa / ee endings, to the first class, and have it printed there? The code is compiled, but when I run I get  \r\n\r\n***********************************************\r\n\r\n    Exception in thread &quot;main&quot; java.lang.IllegalStateException: No match found\r\n            at java.util.regex.Matcher.group(Unknown Source)\r\n            at java.util.regex.Matcher.group(Unknown Source)\r\n","title":"Return the matches from one method to another","body":"<p>I'm an absolute Java beginner. I've searched on the forums, but couldn't find an answer to this question.</p>\n<p>I have two classes, one which browses through an arraylist of sentences. I only attach the for-each loop as seen below.\n&quot;Matching&quot; is the instance of the other class (containing the pattern/matcher code)\nmatchEndings is the method, attached below.</p>\n<pre><code>for (String sentence: sentences) {\n    String match = matching.matchEndings(sentence);\n    if (match.length() &gt; 0) {\n        System.out.println(match);\n    }\n}\n</code></pre>\n<p>This is the method.</p>\n<pre><code>public String matchEndings(String s){\nPattern p = Pattern.compile(&quot;.*?(aa|ee)&quot;);\nMatcher m = p.matcher(s);\n\nreturn m.group();\n    \n}\n</code></pre>\n<p>My question is, how do I return the matched sentences, containing aa / ee endings, to the first class, and have it printed there? The code is compiled, but when I run I get</p>\n<hr />\n<pre><code>Exception in thread &quot;main&quot; java.lang.IllegalStateException: No match found\n        at java.util.regex.Matcher.group(Unknown Source)\n        at java.util.regex.Matcher.group(Unknown Source)\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":0,"creation_date":1378759334,"post_id":18706652,"comment_id":27561907,"body_markdown":"What do you mean by &quot;not working&quot;?","body":"What do you mean by &quot;not working&quot;?"},{"owner":{"account_id":3152821,"reputation":2999,"user_id":2665890,"accept_rate":75,"display_name":"Obicere"},"score":0,"creation_date":1378759396,"post_id":18706652,"comment_id":27561926,"body_markdown":"You probably want a [matcher](http://docs.oracle.com/javase/tutorial/essential/regex/matcher.html) with a pattern.","body":"You probably want a <a href=\"http://docs.oracle.com/javase/tutorial/essential/regex/matcher.html\" rel=\"nofollow noreferrer\">matcher</a> with a pattern."},{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":0,"creation_date":1378759440,"post_id":18706652,"comment_id":27561943,"body_markdown":"@Obicere: No. `matches` is fine here, just a bit overkill (and less efficient) for finding a single keyword.","body":"@Obicere: No. <code>matches</code> is fine here, just a bit overkill (and less efficient) for finding a single keyword."},{"owner":{"account_id":3152821,"reputation":2999,"user_id":2665890,"accept_rate":75,"display_name":"Obicere"},"score":0,"creation_date":1378759513,"post_id":18706652,"comment_id":27561973,"body_markdown":"@nhahtdh because it&#39;s not like that&#39;s exactly how Java does it. Sorry, sarcasm doesn&#39;t go well through text.","body":"@nhahtdh because it&#39;s not like that&#39;s exactly how Java does it. Sorry, sarcasm doesn&#39;t go well through text."},{"owner":{"display_name":"user177800"},"score":0,"creation_date":1378759902,"post_id":18706652,"comment_id":27562137,"body_markdown":"Learn to use [RegEx101.com](http://regex101.com/r/nJ4nY5)","body":"Learn to use <a href=\"http://regex101.com/r/nJ4nY5\" rel=\"nofollow noreferrer\">RegEx101.com</a>"}],"answers":[{"tags":[],"owner":{"account_id":1626304,"reputation":169369,"user_id":1501794,"accept_rate":72,"display_name":"Rahul Tripathi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1378760394,"creation_date":1378759466,"answer_id":18706715,"question_id":18706652,"body_markdown":"How about using like this:-\r\n\r\n    Pattern p = Pattern.compile(&quot;Your string&quot;);\r\n    Matcher m = p.matcher(inputString);\r\n    while (m.find()) {\r\n       String matched = m.group(1);\r\n       // Do something\r\n    }\r\n\r\nEDIT:- After watching your string:-\r\n\r\n    String someString = &quot;lazy cat&quot;;\r\n    someString.matches(&quot;^.*azy.*$&quot;);","title":"Regex instead of String.contains(xyz) (Java 1.7)","body":"<p>How about using like this:-</p>\n\n<pre><code>Pattern p = Pattern.compile(\"Your string\");\nMatcher m = p.matcher(inputString);\nwhile (m.find()) {\n   String matched = m.group(1);\n   // Do something\n}\n</code></pre>\n\n<p>EDIT:- After watching your string:-</p>\n\n<pre><code>String someString = \"lazy cat\";\nsomeString.matches(\"^.*azy.*$\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1413084952,"creation_date":1378759590,"answer_id":18706749,"question_id":18706652,"body_markdown":"`\\b` means word boundary, which means that you are searching for the word `azy`&lt;sup&gt;1&lt;/sup&gt; instead of searching for `azy` as a substring.\r\n\r\nJust remove `\\b` to get the expected result.\r\n\r\n    someString.matches(&quot;^.*azy.*$&quot;);\r\n\r\nHowever, it is inefficient to use regex if you only want to search for substring. `String.contains` is the standard alternative for such use case:\r\n\r\n    someString.contains(&quot;azy&quot;);\r\n\r\n**Footnote**\r\n\r\nA ***word*** is defined as a sequence of (at least 1) *word characters*, that doesn&#39;t have any *word character* preceding or succeeding it.\r\n\r\n***Word character***, in default settings, is defined as `[a-zA-Z0-9_]`.","title":"Regex instead of String.contains(xyz) (Java 1.7)","body":"<p><code>\\b</code> means word boundary, which means that you are searching for the word <code>azy</code><sup>1</sup> instead of searching for <code>azy</code> as a substring.</p>\n\n<p>Just remove <code>\\b</code> to get the expected result.</p>\n\n<pre><code>someString.matches(\"^.*azy.*$\");\n</code></pre>\n\n<p>However, it is inefficient to use regex if you only want to search for substring. <code>String.contains</code> is the standard alternative for such use case:</p>\n\n<pre><code>someString.contains(\"azy\");\n</code></pre>\n\n<p><strong>Footnote</strong></p>\n\n<p>A <strong><em>word</em></strong> is defined as a sequence of (at least 1) <em>word characters</em>, that doesn't have any <em>word character</em> preceding or succeeding it.</p>\n\n<p><strong><em>Word character</em></strong>, in default settings, is defined as <code>[a-zA-Z0-9_]</code>.</p>\n"},{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1378759654,"creation_date":1378759654,"answer_id":18706773,"question_id":18706652,"body_markdown":"You surrounded `azy` with [word boundary][1] `\\b` so it means that before and after it cant be any word characters like `a-z` `A-Z` `0-9` or `_`.\r\n\r\n\r\n  [1]: http://www.regular-expressions.info/wordboundaries.html","title":"Regex instead of String.contains(xyz) (Java 1.7)","body":"<p>You surrounded <code>azy</code> with <a href=\"http://www.regular-expressions.info/wordboundaries.html\" rel=\"nofollow\">word boundary</a> <code>\\b</code> so it means that before and after it cant be any word characters like <code>a-z</code> <code>A-Z</code> <code>0-9</code> or <code>_</code>.</p>\n"}],"owner":{"account_id":2417303,"reputation":8587,"user_id":2111085,"accept_rate":64,"display_name":"Ernestas Gruodis"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":511,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"closed_date":1378848362,"accepted_answer_id":18706749,"answer_count":3,"score":0,"last_activity_date":1692861092,"creation_date":1378759207,"question_id":18706652,"body_markdown":"I have tried to find if `someString` contains someWord, but not working:\r\n\r\n    String someString = &quot;lazy cat&quot;;\r\n    \r\n    someString.matches(&quot;^.*\\\\bazy\\\\b.*$&quot;);//do not matches &quot;azy&quot;\r\n\r\nWhat&#39;s wrong here?","title":"Regex instead of String.contains(xyz) (Java 1.7)","body":"<p>I have tried to find if <code>someString</code> contains someWord, but not working:</p>\n\n<pre><code>String someString = \"lazy cat\";\n\nsomeString.matches(\"^.*\\\\bazy\\\\b.*$\");//do not matches \"azy\"\n</code></pre>\n\n<p>What's wrong here?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"score":2,"creation_date":1378456947,"post_id":18653464,"comment_id":27467359,"body_markdown":"Please google &quot;regex anchor&quot;.","body":"Please google &quot;regex anchor&quot;."}],"answers":[{"tags":[],"owner":{"account_id":3229433,"reputation":3236,"user_id":2725031,"display_name":"Marcin Łoś"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1378460227,"creation_date":1378456852,"answer_id":18653498,"question_id":18653464,"body_markdown":"`^` and `$` mean begin and end of the input, respectively. The `&quot;NAME &lt;...&gt;&quot;` surrounding the address causes the `Matcher` to ignore the potential match it could find it it wasn&#39;t for the `^` and `$`.","title":"java matcher doesn&#39;t process ^ and $ symbols","body":"<p><code>^</code> and <code>$</code> mean begin and end of the input, respectively. The <code>\"NAME &lt;...&gt;\"</code> surrounding the address causes the <code>Matcher</code> to ignore the potential match it could find it it wasn't for the <code>^</code> and <code>$</code>.</p>\n"},{"tags":[],"owner":{"account_id":350533,"reputation":10937,"user_id":686478,"accept_rate":59,"display_name":"Prashant Bhate"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1378460600,"creation_date":1378460600,"answer_id":18654739,"question_id":18653464,"body_markdown":"`^ &amp; $` matches beginning and end of String (either Line or Full text if MultiLine switch is turned on). You can trim them from the pattern if you need to extract email from a text.\r\n\r\n\r\n\t\tString EMAIL_PATTERN = &quot;^[a-zA-Z0-9][\\\\w.-]*[a-zA-Z0-9]@[a-zA-Z0-9][\\\\w.-]*[a-zA-Z0-9]\\\\.[a-zA-Z][a-zA-Z.]*[a-zA-Z]$&quot;;\r\n\t\tString email = &quot;NAME &lt;firstname_lastname@domain.com&gt;&quot;;\r\n\t\tPattern pattern = Pattern.compile(EMAIL_PATTERN.substring(1, EMAIL_PATTERN.length()-1));\r\n\t\tMatcher matcher = pattern.matcher(email);\r\n\t\t\r\n\t\tif (matcher.find()) {\r\n\t\t    System.out.println(matcher.group());\r\n\t\t}\r\n\r\n**Output**\r\n\r\n    firstname_lastname@domain.com\r\n\t","title":"java matcher doesn&#39;t process ^ and $ symbols","body":"<p><code>^ &amp; $</code> matches beginning and end of String (either Line or Full text if MultiLine switch is turned on). You can trim them from the pattern if you need to extract email from a text.</p>\n\n<pre><code>    String EMAIL_PATTERN = \"^[a-zA-Z0-9][\\\\w.-]*[a-zA-Z0-9]@[a-zA-Z0-9][\\\\w.-]*[a-zA-Z0-9]\\\\.[a-zA-Z][a-zA-Z.]*[a-zA-Z]$\";\n    String email = \"NAME &lt;firstname_lastname@domain.com&gt;\";\n    Pattern pattern = Pattern.compile(EMAIL_PATTERN.substring(1, EMAIL_PATTERN.length()-1));\n    Matcher matcher = pattern.matcher(email);\n\n    if (matcher.find()) {\n        System.out.println(matcher.group());\n    }\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>firstname_lastname@domain.com\n</code></pre>\n"}],"owner":{"account_id":2154709,"reputation":180,"user_id":2050632,"accept_rate":100,"display_name":"hard-code"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":18654739,"answer_count":2,"score":1,"last_activity_date":1692861075,"creation_date":1378456741,"question_id":18653464,"body_markdown":"There is email pattern: \r\n\r\n`^[a-zA-Z0-9][\\w.-]*[a-zA-Z0-9]@[a-zA-Z0-9][\\w.-]*[a-zA-Z0-9]\\.[a-zA-Z][a-zA-Z.]*[a-zA-Z]$`\r\n\r\nand the example code, that try to get email from string:\r\n\r\n    String email = &quot;NAME &lt;firstname_lastname@domain.com&gt;&quot;;\r\n\r\n    Pattern pattern = Pattern.compile(EMAIL_PATTERN);\r\n    Matcher matcher = pattern.matcher(email);\r\n\r\n    if (matcher.find()) {\r\n        System.out.println(matcher.group());\r\n    }\r\n\r\nWhen regexp contains `^` and `$` characters, `matcher.find()` returns false, but when regexp is without these characters, all is fine: I see `firstname_lastname@domain.com` in console.\r\n\r\nCould you please explain difference between regexp with and without `^` and `$`?\r\n\r\nHow can I force the Matcher to work with regexp that contains `^` and `$`?","title":"java matcher doesn&#39;t process ^ and $ symbols","body":"<p>There is email pattern: </p>\n\n<p><code>^[a-zA-Z0-9][\\w.-]*[a-zA-Z0-9]@[a-zA-Z0-9][\\w.-]*[a-zA-Z0-9]\\.[a-zA-Z][a-zA-Z.]*[a-zA-Z]$</code></p>\n\n<p>and the example code, that try to get email from string:</p>\n\n<pre><code>String email = \"NAME &lt;firstname_lastname@domain.com&gt;\";\n\nPattern pattern = Pattern.compile(EMAIL_PATTERN);\nMatcher matcher = pattern.matcher(email);\n\nif (matcher.find()) {\n    System.out.println(matcher.group());\n}\n</code></pre>\n\n<p>When regexp contains <code>^</code> and <code>$</code> characters, <code>matcher.find()</code> returns false, but when regexp is without these characters, all is fine: I see <code>firstname_lastname@domain.com</code> in console.</p>\n\n<p>Could you please explain difference between regexp with and without <code>^</code> and <code>$</code>?</p>\n\n<p>How can I force the Matcher to work with regexp that contains <code>^</code> and <code>$</code>?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1496066,"reputation":14731,"user_id":1401975,"display_name":"HamZa"},"score":1,"creation_date":1376043100,"post_id":18144162,"comment_id":26573884,"body_markdown":"Take 10mn to read about [repetition](http://www.regular-expressions.info/repeat.html).","body":"Take 10mn to read about <a href=\"http://www.regular-expressions.info/repeat.html\" rel=\"nofollow noreferrer\">repetition</a>."},{"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":1,"creation_date":1376043218,"post_id":18144162,"comment_id":26573937,"body_markdown":"@HamZa. He does know about repetition. Just is unable to apply it properly in his case. Still a tutorial is worth reading.","body":"@HamZa. He does know about repetition. Just is unable to apply it properly in his case. Still a tutorial is worth reading."}],"answers":[{"tags":[],"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1376042909,"creation_date":1376042558,"answer_id":18144208,"question_id":18144162,"body_markdown":"You can try this regex:\r\n\r\n    [+]?(?:[0-9]\\s*){4,7}\r\n\r\nExplanation:\r\n  \r\n    [+]?           // Optional + sign\r\n    (?:[0-9]\\s*)   // A single digit followed by 0 or more whitespaces\r\n    {4,7}          // 4 to 7 repetition of previous pattern\r\n\r\nSample tests:\r\n\r\n    String regex = &quot;[+]?(?:[0-9]\\\\s*){4,7}&quot;;\r\n\r\n    System.out.println(&quot;0045234&quot;.matches(regex));       // true\r\n    System.out.println(&quot;+004 5234&quot;.matches(regex));      // true\r\n    System.out.println(&quot;+00 452 34&quot;.matches(regex));    // true\r\n    System.out.println(&quot;0 0 4 5 2 3 4&quot;.matches(regex)); // true\r\n    System.out.println(&quot;004523434534&quot;.matches(regex));  // false\r\n    System.out.println(&quot;004&quot;.matches(regex));           // false","title":"How to set the minimum and maximum number of digit allowed in a regex expression for telephone number","body":"<p>You can try this regex:</p>\n\n<pre><code>[+]?(?:[0-9]\\s*){4,7}\n</code></pre>\n\n<p>Explanation:</p>\n\n<pre><code>[+]?           // Optional + sign\n(?:[0-9]\\s*)   // A single digit followed by 0 or more whitespaces\n{4,7}          // 4 to 7 repetition of previous pattern\n</code></pre>\n\n<p>Sample tests:</p>\n\n<pre><code>String regex = \"[+]?(?:[0-9]\\\\s*){4,7}\";\n\nSystem.out.println(\"0045234\".matches(regex));       // true\nSystem.out.println(\"+004 5234\".matches(regex));      // true\nSystem.out.println(\"+00 452 34\".matches(regex));    // true\nSystem.out.println(\"0 0 4 5 2 3 4\".matches(regex)); // true\nSystem.out.println(\"004523434534\".matches(regex));  // false\nSystem.out.println(\"004\".matches(regex));           // false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1376043434,"creation_date":1376042914,"answer_id":18144311,"question_id":18144162,"body_markdown":"`&quot;\\\\+?(\\\\d ?){3,6}\\\\d&quot;` is supposed to match an optional + sign followed with 4-7 numbers and optional white spaces in between digits.\r\n\r\n","title":"How to set the minimum and maximum number of digit allowed in a regex expression for telephone number","body":"<p><code>\"\\\\+?(\\\\d ?){3,6}\\\\d\"</code> is supposed to match an optional + sign followed with 4-7 numbers and optional white spaces in between digits.</p>\n"},{"tags":[],"owner":{"account_id":1053691,"reputation":1256,"user_id":1056904,"accept_rate":56,"display_name":"Juto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1376055184,"creation_date":1376055184,"answer_id":18147870,"question_id":18144162,"body_markdown":"Similar structure as above, but with: `:? taken off` (not sure why is it there?)\r\n\r\n    [+]?([0-9]\\s*){4,7}","title":"How to set the minimum and maximum number of digit allowed in a regex expression for telephone number","body":"<p>Similar structure as above, but with: <code>:? taken off</code> (not sure why is it there?)</p>\n\n<pre><code>[+]?([0-9]\\s*){4,7}\n</code></pre>\n"}],"owner":{"account_id":2272389,"reputation":1347,"user_id":1999453,"accept_rate":67,"display_name":"user1999453"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4772,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":18144208,"answer_count":3,"score":1,"last_activity_date":1692861021,"creation_date":1376042410,"question_id":18144162,"body_markdown":"I have the following Regex expression for java application:\r\n\r\n    [\\+0-9]+([\\s0-9]+)?\r\n\r\nHow to restrict the above expression of telephone number to a minimum of 4 digits and maximum of 7 digits? I thought it would be something like adding this {4,7} to the expression but it is not working.\r\n\r\nAny advice please?\r\n\r\nBasically my telephone number can either start with a + sign followed with numbers(+004...) or  with numbers only(004...) and can also contain white spaces in between any digits(0 0 4...).","title":"How to set the minimum and maximum number of digit allowed in a regex expression for telephone number","body":"<p>I have the following Regex expression for java application:</p>\n\n<pre><code>[\\+0-9]+([\\s0-9]+)?\n</code></pre>\n\n<p>How to restrict the above expression of telephone number to a minimum of 4 digits and maximum of 7 digits? I thought it would be something like adding this {4,7} to the expression but it is not working.</p>\n\n<p>Any advice please?</p>\n\n<p>Basically my telephone number can either start with a + sign followed with numbers(+004...) or  with numbers only(004...) and can also contain white spaces in between any digits(0 0 4...).</p>\n"},{"tags":["java","regex","parsing"],"answers":[{"tags":[],"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1374412842,"creation_date":1374412497,"answer_id":17772696,"question_id":17772677,"body_markdown":"You should use *reluctant quantifier* - `&quot;.+?&quot;` instead of *greedy* - `&quot;.+&quot;` :\r\n\r\n    &quot;(\\\\[\\\\$).+?(\\\\$\\\\])&quot;  // Note `?` after `.+`\r\n\r\nIf you use `.+`, it will match everything except the *line-terminator* till the last `$`. Note that a *dot (`.`)* matches everything except a newline. With *reluctant quantifier*, `.+?` matches only till the first `$]` it encounters.\r\n\r\nIn your given string, you got all those matches, because you had `\\r\\n` in between, where the `.+` stops matching. If you remove all those newlines, then you will just get a single match from 1&lt;sup&gt;st&lt;/sup&gt; `[$` to the last `$]`.","title":"(Pattern and Matcher) not discovering all pattern matches","body":"<p>You should use <em>reluctant quantifier</em> - <code>\".+?\"</code> instead of <em>greedy</em> - <code>\".+\"</code> :</p>\n\n<pre><code>\"(\\\\[\\\\$).+?(\\\\$\\\\])\"  // Note `?` after `.+`\n</code></pre>\n\n<p>If you use <code>.+</code>, it will match everything except the <em>line-terminator</em> till the last <code>$</code>. Note that a <em>dot (<code>.</code>)</em> matches everything except a newline. With <em>reluctant quantifier</em>, <code>.+?</code> matches only till the first <code>$]</code> it encounters.</p>\n\n<p>In your given string, you got all those matches, because you had <code>\\r\\n</code> in between, where the <code>.+</code> stops matching. If you remove all those newlines, then you will just get a single match from 1<sup>st</sup> <code>[$</code> to the last <code>$]</code>.</p>\n"},{"tags":[],"owner":{"account_id":2603307,"reputation":88305,"user_id":2255089,"display_name":"Casimir et Hippolyte"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1374415125,"creation_date":1374412689,"answer_id":17772728,"question_id":17772677,"body_markdown":"A good way is to replace the dot by a negated character class, example:\r\n\r\n    Pattern p = Pattern.compile(&quot;(\\\\[\\\\$)([^$]++)(\\\\$])&quot;);\r\n\r\n&lt;i&gt;(note that you don&#39;t need to escape closing square brackets)&lt;/i&gt;\r\n\r\nBut perhaps are you only interested by the content of the tags:\r\n\r\n    Pattern p = Pattern.compile(&quot;(?&lt;=\\\\[\\\\$)[^$]++(?=\\\\$])&quot;);\r\n\r\n&lt;i&gt;In this case the content is the whole match&lt;/i&gt;","title":"(Pattern and Matcher) not discovering all pattern matches","body":"<p>A good way is to replace the dot by a negated character class, example:</p>\n\n<pre><code>Pattern p = Pattern.compile(\"(\\\\[\\\\$)([^$]++)(\\\\$])\");\n</code></pre>\n\n<p><i>(note that you don't need to escape closing square brackets)</i></p>\n\n<p>But perhaps are you only interested by the content of the tags:</p>\n\n<pre><code>Pattern p = Pattern.compile(\"(?&lt;=\\\\[\\\\$)[^$]++(?=\\\\$])\");\n</code></pre>\n\n<p><i>In this case the content is the whole match</i></p>\n"}],"owner":{"account_id":3074397,"reputation":3,"user_id":2604175,"display_name":"user2604175"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":17772696,"answer_count":2,"score":0,"last_activity_date":1692861012,"creation_date":1374412358,"question_id":17772677,"body_markdown":"I have this string object which consists of tags(bounded by [$ and $]) and rest of the text. Im trying to isolate all of the tags. (Pattern-Matcher) recognize all of the tags properly, but two of them are combined into one. I dont have any idea why this is happening, probably some internal (Matcher-Pattern) bussiness. \r\n\r\n    String docBody = &quot;This is sample text.\\r\\n[$ FOR i 1 10 1 $]\\r\\n This is&quot; +\r\n\t\t\t\t&quot;[$ i $]-th time this message is generated.\\r\\n[$END$]\\r\\n&quot; +\r\n\t\t\t\t&quot;[$ FOR i 0 10 2 $]\\r\\n sin([$= i $]^2) = [$= i i * @sin \\&quot;0.000\\&quot;&quot; +\r\n\t\t\t\t&quot; @decfmt $]&quot; +\r\n\t\t\t\t&quot;\\r\\n[$END$] &quot;;\r\n\r\n    Pattern p = Pattern.compile(&quot;(\\\\[\\\\$)(.)+(\\\\$\\\\])&quot;);\r\n    Matcher m = p.matcher(docBody);\r\n\t\t\r\n\t\twhile(m.find()){\r\n\r\n\t\t\tSystem.out.println(m.group());\r\n\r\n                }\r\n\r\n    output:\r\n\r\n    [$ FOR i 1 10 1 $]\r\n    [$ i $]\r\n    [$END$]\r\n    [$ FOR i 0 10 2 $]\r\n    [$= i $]^2) = [$= i i * @sin &quot;0.000&quot; @decfmt $]\r\n    [$END$]` \r\n\r\nAs you can see, this part `[$= i $]^2) = [$= i i * @sin &quot;0.000&quot; @decfmt $]` is not split into these two tags `[$= i $]` and `[$= i i * @sin &quot;0.000&quot; @decfmt $]`\r\n\r\nAny suggestions why this is happening?\r\n","title":"(Pattern and Matcher) not discovering all pattern matches","body":"<p>I have this string object which consists of tags(bounded by [$ and $]) and rest of the text. Im trying to isolate all of the tags. (Pattern-Matcher) recognize all of the tags properly, but two of them are combined into one. I dont have any idea why this is happening, probably some internal (Matcher-Pattern) bussiness. </p>\n\n<pre><code>String docBody = \"This is sample text.\\r\\n[$ FOR i 1 10 1 $]\\r\\n This is\" +\n            \"[$ i $]-th time this message is generated.\\r\\n[$END$]\\r\\n\" +\n            \"[$ FOR i 0 10 2 $]\\r\\n sin([$= i $]^2) = [$= i i * @sin \\\"0.000\\\"\" +\n            \" @decfmt $]\" +\n            \"\\r\\n[$END$] \";\n\nPattern p = Pattern.compile(\"(\\\\[\\\\$)(.)+(\\\\$\\\\])\");\nMatcher m = p.matcher(docBody);\n\n    while(m.find()){\n\n        System.out.println(m.group());\n\n            }\n\noutput:\n\n[$ FOR i 1 10 1 $]\n[$ i $]\n[$END$]\n[$ FOR i 0 10 2 $]\n[$= i $]^2) = [$= i i * @sin \"0.000\" @decfmt $]\n[$END$]` \n</code></pre>\n\n<p>As you can see, this part <code>[$= i $]^2) = [$= i i * @sin \"0.000\" @decfmt $]</code> is not split into these two tags <code>[$= i $]</code> and <code>[$= i i * @sin \"0.000\" @decfmt $]</code></p>\n\n<p>Any suggestions why this is happening?</p>\n"},{"tags":["java","android","android-studio","android-recyclerview","seekbar"],"comments":[{"owner":{"account_id":952084,"reputation":9544,"user_id":978005,"accept_rate":82,"display_name":"Phix"},"score":0,"creation_date":1692846804,"post_id":76965991,"comment_id":135680419,"body_markdown":"Post your code. We can&#39;t debug a description of the problem.","body":"Post your code. We can&#39;t debug a description of the problem."},{"owner":{"account_id":26691682,"reputation":1,"user_id":20300170,"display_name":"kirubakaran"},"score":0,"creation_date":1692846893,"post_id":76965991,"comment_id":135680421,"body_markdown":"sure bro will post my code","body":"sure bro will post my code"},{"owner":{"account_id":26691682,"reputation":1,"user_id":20300170,"display_name":"kirubakaran"},"score":0,"creation_date":1692853195,"post_id":76965991,"comment_id":135680905,"body_markdown":"now You can check bro","body":"now You can check bro"},{"owner":{"account_id":19634805,"reputation":311,"user_id":14372265,"display_name":"Yogesh Rewani"},"score":0,"creation_date":1692853770,"post_id":76965991,"comment_id":135680946,"body_markdown":"Can&#39;t you think that you need to update the particular thing you are facing an issue with, or code where do you want help. Pasting 665 lines of code and expecting others to check the whole thing for you is not a good idea, I guess. it will be great you paste specific code","body":"Can&#39;t you think that you need to update the particular thing you are facing an issue with, or code where do you want help. Pasting 665 lines of code and expecting others to check the whole thing for you is not a good idea, I guess. it will be great you paste specific code"}],"answers":[{"tags":[],"owner":{"account_id":5783150,"reputation":158,"user_id":5340734,"display_name":"Umang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692856888,"creation_date":1692856888,"answer_id":76966565,"question_id":76965991,"body_markdown":"The issue you are facing because You are getting the current progress of ```seekbar``` by using ```messageInfoList.get(position).getSeekBarProgressValue()```  but you are not updating the value to the list.","title":"SeekBar progress changes while scrolling the RecyclerView In android","body":"<p>The issue you are facing because You are getting the current progress of <code>seekbar</code> by using <code>messageInfoList.get(position).getSeekBarProgressValue()</code>  but you are not updating the value to the list.</p>\n"}],"owner":{"account_id":26691682,"reputation":1,"user_id":20300170,"display_name":"kirubakaran"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1692860578,"creation_date":1692846125,"question_id":76965991,"body_markdown":"I&#39;m working on a chat application&#160;similar to What&#39;s Up. The issue I&#39;m having is that I have the seek bar as well as the play icon in the recycler view. When I click the play symbol, the song is played, and the seek bar moves along with it.  It was working perfectly till here. The issue is that when I scroll the `recyclerView` while playing some songs, the progress of the seek bar is set to end automatically. If I scroll again, the seek bar progress position changes to according to song duration. I&#39;m not sure why this is  happening. Does anyone have a solution for this? thanks in Advance :)\r\n\r\n\r\n    public class ChatContentAdapter extends RecyclerView.Adapter implements Handler.Callback {\r\n        private OnItemClickListener onItemClickListener;\r\n        public Handler handler;\r\n        private List&lt;MessageInfo&gt; messageInfoList = new ArrayList&lt;&gt;();\r\n        List&lt;ZIMGroupMemberInfo&gt; memberList = new ArrayList&lt;&gt;();\r\n        private Activity activity;\r\n        Context context;\r\n        String date = &quot;&quot;;\r\n        int count=0;\r\n        boolean isPost = false;\r\n        //boolean dateAvailable=false;\r\n        String urlRegex = &quot;^((https?|ftp)://|(www|ftp)\\\\.)?[a-z0-9-]+(\\\\.[a-z0-9-]+)+([/?].*)?$&quot;;\r\n        GetRequestWithEditPostGetDetailsModel.Data postData ;\r\n        BaseViewHolder baseViewHolder;\r\n        private int playingPosition;\r\n        MediaPlayer mediaPlayer;\r\n        Uri audioPathUri;\r\n         Handler uiUpdateHandler = new Handler(this::handleMessage);\r\n\r\n        private float denseness;\r\n        private int width;\r\n\r\n        private static final int MSG_UPDATE_SEEK_BAR = 1845;\r\n        public ChatContentAdapter (Activity activity,OnItemClickListener onItemClickListener){\r\n            this.activity = activity;\r\n            this.onItemClickListener = onItemClickListener;\r\n        }\r\n        @Override\r\n        public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\r\n            RecyclerView.ViewHolder viewHolder = null;\r\n            if (ChatItemType.CHAT_ITEM_TYPE_RIGHT.value == viewType) {\r\n                viewHolder = new ChatRightViewHolder(parent, onItemClickListener, activity);\r\n            } else if (ChatItemType.CHAT_ITEM_TYPE_LEFT.value == viewType) {\r\n                viewHolder = new ChatLeftViewHolder(parent, onItemClickListener, activity);\r\n            } else if (ChatItemType.CHAT_ITEM_TYPE_CENTER.value == viewType){\r\n                viewHolder = new ChatCenterViewHolder(parent,activity);\r\n            }\r\n            return viewHolder;\r\n        }\r\n\r\n        @Override\r\n        public void onBindViewHolder(@NonNull RecyclerView.ViewHolder holder, int position) {\r\n\r\n            holder.itemView.setTag(position);\r\n            MessageInfo messageInfo = messageInfoList.get(position);\r\n            Log.d(&quot;TAG&quot;, &quot;onBindViewHolder: &quot;+messageInfo.isPlay());\r\n\r\n\r\n            if(HomeActivity.homeActivity.cacheRepository.getMessageDate().equals(&quot;0&quot;)){\r\n                HomeActivity.homeActivity.cacheRepository.saveMessageDate(Utilities.INSTANCE.getDateinYmd(messageInfo.getZIMMessage().getTimestamp()));\r\n            }\r\n\r\n            if (holder instanceof ChatLeftViewHolder) {\r\n                ChatLeftViewHolder chat = (ChatLeftViewHolder) holder;\r\n                chat.setMessageInfo(messageInfo,date,memberList,position,postData,messageInfoList.size());\r\n                chat.seekBar.setProgress(messageInfoList.get(position).getSeekBarProgressValue());\r\n                Log.i(&quot;TAG&quot;, &quot;onBindViewHolder: &quot; +messageInfoList.get(position).getSeekBarProgressValue() );\r\n                if (messageInfo.isPlay()){\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\r\n\r\n                }else {\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_play);\r\n                    chat.seekBar.setProgress(0);\r\n                    chat.txtProcess.setText(&quot;00:00:00&quot;+ &quot;/&quot;+ &quot;00:00:00&quot;);\r\n                }\r\n\r\n                chat.ivPlayPause.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        SDKManager.sharedInstance().downloadMediaFile((ZIMMediaMessage) messageInfo.getZIMMessage(), ZIMMediaFileType.ORIGINAL_FILE, new ZIMMediaDownloadedCallback() {\r\n                            @Override\r\n                            public void onMediaDownloaded(ZIMMediaMessage message, ZIMError errorInfo) {\r\n                               String path = new File(message.getFileLocalPath()).getAbsolutePath();\r\n                                if (!path.isEmpty()){\r\n                                   Uri audioPath = Uri.parse(path);\r\n                                   setPlayer(audioPath,position,chat);\r\n                                }\r\n                            }\r\n\r\n                            @Override\r\n                            public void onMediaDownloadingProgress(ZIMMediaMessage message, long currentFileSize, long totalFileSize) {\r\n                                AppLogger.getInstance().d(&quot;[%s] [onMediaDownloadingProgress] [currentFileSize:%d, totalFileSize:%d, message: %s]&quot;,&quot;TAG&quot;, currentFileSize, currentFileSize, message.getMessageID());\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                });\r\n\r\n                chat.seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\r\n                    @SuppressLint(&quot;ResourceAsColor&quot;)\r\n                    @Override\r\n                    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\r\n\r\n                        if (fromUser) {\r\n                            if (mediaPlayer != null) {\r\n                                mediaPlayer.seekTo(progress);\r\n                                Log.i(&quot;TAG&quot;, &quot;onProgressChanged: &quot;+ progress);\r\n                            seekBar.setMax(mediaPlayer.getDuration()/1000);\r\n\r\n                            }\r\n\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onStartTrackingTouch(SeekBar seekBar) {\r\n                        if (((Activity)context)  != null) {\r\n                            ((Activity) context).runOnUiThread(new Runnable() {\r\n                                @Override\r\n                                public void run() {\r\n                                    chat.imgPause.setVisibility(View.GONE);\r\n                                    chat.ivPlayPause.setVisibility(View.VISIBLE);\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onStopTrackingTouch(SeekBar seekBar) {\r\n                        if (mediaPlayer != null) {\r\n                            ((Activity) context).runOnUiThread(new Runnable() {\r\n                                @Override\r\n                                public void run() {\r\n                                    chat.ivPlayPause.setVisibility(View.GONE);\r\n                                    chat.imgPause.setVisibility(View.VISIBLE);\r\n                                    try {\r\n                                        mediaPlayer.start();\r\n                                    } catch (Exception e) {\r\n                                        e.printStackTrace();\r\n                                    }\r\n\r\n                                }\r\n                            });\r\n\r\n                        }\r\n                    }\r\n\r\n                });\r\n            } else if (holder instanceof ChatRightViewHolder) {\r\n                ChatRightViewHolder chat = (ChatRightViewHolder) holder;\r\n\r\n                chat.setMessageInfo(messageInfo, date,memberList,position,postData, messageInfoList.size());\r\n\r\n                chat.seekBar.setProgress(messageInfoList.get(position).getSeekBarProgressValue());\r\n\r\n                if (messageInfo.isPlay()){\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\r\n\r\n                }else {\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_play);\r\n                    chat.seekBar.setProgress(0);\r\n                    chat.txtProcess.setText(&quot;00:00:00&quot;+ &quot; / &quot; + &quot;00:00:00&quot;);\r\n                }\r\n                chat.ivPlayPause.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        SDKManager.sharedInstance().downloadMediaFile((ZIMMediaMessage) messageInfo.getZIMMessage(), ZIMMediaFileType.ORIGINAL_FILE, new ZIMMediaDownloadedCallback() {\r\n                            @Override\r\n                            public void onMediaDownloaded(ZIMMediaMessage message, ZIMError errorInfo) {\r\n                                String path = new File(message.getFileLocalPath()).getAbsolutePath();\r\n                                if (!path.isEmpty()){\r\n                                    Uri audioPath = Uri.parse(path);\r\n                                    setPlayerRight(audioPath,position, chat);\r\n                                }\r\n                            }\r\n\r\n                            @Override\r\n                            public void onMediaDownloadingProgress(ZIMMediaMessage message, long currentFileSize, long totalFileSize) {\r\n                                AppLogger.getInstance().d(&quot;[%s] [onMediaDownloadingProgress] [currentFileSize:%d, totalFileSize:%d, message: %s]&quot;, &quot;TAG&quot;, currentFileSize, currentFileSize, message.getMessageID());\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n\r\n                chat.seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\r\n\r\n                    @Override\r\n                    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\r\n                        if (((Activity) context) != null) {\r\n                            if (fromUser) {\r\n                                if (mediaPlayer!=null){\r\n                                    mediaPlayer.seekTo(progress );\r\n                                    Log.i(&quot;TAG&quot;, &quot;run: &quot; + progress);\r\n                                    seekBar.setMax(mediaPlayer.getDuration()/1000);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    @Override\r\n                    public void onStartTrackingTouch(SeekBar seekBar) {\r\n\r\n                        if (((Activity)context)  != null) {\r\n                            ((Activity) context).runOnUiThread(new Runnable() {\r\n                                @Override\r\n                                public void run() {\r\n    //                                chat.ivPlayPause.setVisibility(View.GONE);\r\n    //                                chat.imgPause.setVisibility(View.VISIBLE);\r\n\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onStopTrackingTouch(SeekBar seekBar) {\r\n                        if (mediaPlayer != null) {\r\n                        if (((Activity)context)  != null) {\r\n                            ((Activity) context).runOnUiThread(new Runnable() {\r\n                                @Override\r\n                                public void run() {\r\n    //                                chat.ivPlayPause.setVisibility(View.GONE);\r\n    //                                chat.imgPause.setVisibility(View.VISIBLE);\r\n                                    try {\r\n                                        mediaPlayer.start();\r\n                                    } catch (Exception e) {\r\n                                        e.printStackTrace();\r\n                                    }\r\n                                }\r\n                            });\r\n                        }\r\n                        }\r\n                    }\r\n                });\r\n          }\r\n            }\r\n\r\n        }\r\n\r\n        private void updateForRightViewHolder(MediaPlayer mediaPlayer, ChatRightViewHolder chat, SeekBar seekBar, Context context) {\r\n\r\n            if (mediaPlayer.getDuration() - mediaPlayer.getCurrentPosition() &gt; 100) {\r\n                chat.txtProcess.setText(convertSecondsToHMmSs(mediaPlayer.getCurrentPosition() / 1000) + &quot; / &quot; + convertSecondsToHMmSs(this.mediaPlayer.getDuration() / 1000));\r\n    //            seekBar.setProgress(mediaPlayer.getCurrentPosition());\r\n                Log.i(&quot;TAG&quot;, &quot;updateForRightViewHolder: &quot; + playingPosition  + mediaPlayer.getCurrentPosition());\r\n                onItemClickListener.seekBarProgressValue(playingPosition,mediaPlayer.getCurrentPosition());\r\n\r\n            }else {\r\n                chat.txtProcess.setText(convertSecondsToHMmSs(mediaPlayer.getDuration() / 1000));\r\n    //            seekBar.setProgress(mediaPlayer.getCurrentPosition());\r\n                Log.i(&quot;TAG&quot;, &quot;updateForRightViewHolder: &quot; + playingPosition  + mediaPlayer.getCurrentPosition());\r\n                onItemClickListener.seekBarProgressValue(playingPosition,mediaPlayer.getCurrentPosition());\r\n            }\r\n            Handler handler = new Handler();\r\n\r\n            try{\r\n                Runnable runnable = new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        try{\r\n                            if (ChatContentAdapter.this.mediaPlayer.getCurrentPosition() &gt; -1) {\r\n                                try {\r\n                                    updateForRightViewHolder(mediaPlayer,chat, seekBar, context);\r\n                                } catch (Exception e) {\r\n                                    e.printStackTrace();\r\n                                }\r\n                            }\r\n                        }catch (Exception e){\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                };\r\n    //            handler.postDelayed(runnable, 100);\r\n                seekBar.postDelayed(runnable,100);\r\n            }catch (Exception e){\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n        private void setPlayerRight(Uri audioPath, int position, ChatRightViewHolder chat) {\r\n            if (position == playingPosition){\r\n                if (mediaPlayer.isPlaying()) {\r\n                    messageInfoList.get(position).setPlay(false);\r\n                    mediaPlayer.pause();\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_play);\r\n                } else {\r\n                    messageInfoList.get(position).setPlay(true);\r\n                    mediaPlayer.start();\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\r\n                }\r\n\r\n            }else {\r\n                if (playingPosition != -1) {\r\n                    onItemClickListener.getPosition(playingPosition);\r\n                }\r\n                playingPosition = position;\r\n                if (mediaPlayer != null) {\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_play);\r\n                    mediaPlayer.release();\r\n                }\r\n                startRightMediaPlayer(audioPath, chat);\r\n                messageInfoList.get(position).setPlay(true);\r\n                chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\r\n            }\r\n        }\r\n\r\n        private void startRightMediaPlayer(Uri audioPath, ChatRightViewHolder chat) {\r\n            mediaPlayer = MediaPlayer.create(getApplicationContext(),audioPath);\r\n\r\n            mediaPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {\r\n                @Override\r\n                public void onPrepared(MediaPlayer mp) {\r\n                    chat.seekBar.setMax(mp.getDuration());\r\n                    chat.txtProcess.setText(&quot;00:00:00/&quot;+convertSecondsToHMmSs(mp.getDuration() / 1000));\r\n                }\r\n            });\r\n\r\n            mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {\r\n                @Override\r\n                public void onCompletion(MediaPlayer mp) {\r\n                    releaseMediaPlayer();\r\n                }\r\n            });\r\n            mediaPlayer.start();\r\n            updateForRightViewHolder(mediaPlayer, chat, chat.seekBar, context);\r\n        }\r\n\r\n\r\n\r\n        private void setPlayer(Uri audioPath, int position, ChatLeftViewHolder chat) {\r\n            if (position == playingPosition){\r\n\r\n                if (mediaPlayer.isPlaying()) {\r\n                    mediaPlayer.pause();\r\n                    messageInfoList.get(position).setPlay(false);\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_play);\r\n                } else {\r\n                    messageInfoList.get(position).setPlay(true);\r\n                    mediaPlayer.start();\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\r\n                }\r\n            }else {\r\n                if (playingPosition != -1) {\r\n                    onItemClickListener.getPosition(playingPosition);\r\n                }\r\n                playingPosition = position;\r\n                if (mediaPlayer != null) {\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_play);\r\n\r\n                    mediaPlayer.release();\r\n                }\r\n\r\n                startMediaPlayer(audioPath,chat);\r\n                messageInfoList.get(position).setPlay(true);\r\n                chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\r\n            }\r\n        }\r\n\r\n        private void startMediaPlayer(Uri audioPathUri, ChatLeftViewHolder chat) {\r\n            mediaPlayer = MediaPlayer.create(getApplicationContext(),audioPathUri);\r\n            mediaPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {\r\n                @Override\r\n                public void onPrepared(MediaPlayer mp) {\r\n                    chat.seekBar.setMax(mp.getDuration());\r\n                    chat.txtProcess.setText(&quot;00:00:00/&quot;+convertSecondsToHMmSs(mp.getDuration() / 1000));\r\n                }\r\n            });\r\n\r\n            mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {\r\n                @Override\r\n                public void onCompletion(MediaPlayer mp) {\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_play);\r\n                    releaseMediaPlayer();\r\n                }\r\n            });\r\n                mediaPlayer.start();\r\n                update(mediaPlayer, chat, chat.seekBar, context);\r\n\r\n            chat.seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\r\n                @Override\r\n                public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\r\n\r\n                    if (((Activity) context) != null) {\r\n                        if (fromUser) {\r\n                            ((Activity) context).runOnUiThread(new Runnable() {\r\n                                @Override\r\n                                public void run() {\r\n                                    if (mediaPlayer != null) {\r\n                                        mediaPlayer.seekTo(progress);\r\n                                        Log.i(&quot;TAG&quot;, &quot;run: &quot; + progress);\r\n                                    }\r\n                                }\r\n                            });\r\n\r\n                        }\r\n                    }\r\n                }\r\n\r\n                @Override\r\n                public void onStartTrackingTouch(SeekBar seekBar) {\r\n\r\n                        if (((Activity)context)  != null) {\r\n                            ((Activity) context).runOnUiThread(new Runnable() {\r\n                                @Override\r\n                                public void run() {\r\n    //                                chat.ivPlayPause.setVisibility(View.GONE);\r\n    //                                chat.imgPause.setVisibility(View.VISIBLE);\r\n                                }\r\n                            });\r\n                        }\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onStopTrackingTouch(SeekBar seekBar) {\r\n                    if (mediaPlayer != null) {\r\n                    if (((Activity)context)  != null) {\r\n                        ((Activity) context).runOnUiThread(new Runnable() {\r\n                            @Override\r\n                            public void run() {\r\n    //                            chat.ivPlayPause.setVisibility(View.GONE);\r\n    //                            chat.imgPause.setVisibility(View.VISIBLE);\r\n                                try {\r\n                                    mediaPlayer.start();\r\n                                } catch (Exception e) {\r\n                                    e.printStackTrace();\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                    }\r\n                }\r\n            });\r\n            }\r\n        private void update(MediaPlayer mediaPlayer, ChatLeftViewHolder chat, SeekBar seekBar, Context context) {\r\n\r\n            if (mediaPlayer.getDuration() - mediaPlayer.getCurrentPosition() &gt; 100) {\r\n                chat.txtProcess.setText(convertSecondsToHMmSs(mediaPlayer.getCurrentPosition() / 1000) + &quot; / &quot; + convertSecondsToHMmSs(this.mediaPlayer.getDuration() / 1000));\r\n    //            seekBar.setProgress(mediaPlayer.getCurrentPosition());\r\n                onItemClickListener.seekBarProgressValue(playingPosition,mediaPlayer.getCurrentPosition());\r\n\r\n            }else {\r\n                chat.txtProcess.setText(convertSecondsToHMmSs(mediaPlayer.getDuration() / 1000));\r\n    //            seekBar.setProgress(mediaPlayer.getCurrentPosition());\r\n            }\r\n            Handler handler = new Handler();\r\n\r\n            try{\r\n                Runnable runnable = new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        try{\r\n                            if (ChatContentAdapter.this.mediaPlayer.getCurrentPosition() &gt; -1) {\r\n                                try {\r\n                                    update(mediaPlayer,chat, seekBar, context);\r\n                                } catch (Exception e) {\r\n                                    e.printStackTrace();\r\n                                }\r\n                            }\r\n                        }catch (Exception e){\r\n                            e.printStackTrace();\r\n                        }\r\n\r\n                    }\r\n                };\r\n                handler.postDelayed(runnable, 100);\r\n    //            seekBar.postDelayed(runnable,500);\r\n            }catch (Exception e){\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n\r\n        private static String convertSecondsToHMmSs(int seconds) {\r\n            long s = seconds % 60;\r\n            long m = (seconds / 60) % 60;\r\n            long h = (seconds / (60 * 60)) % 24;\r\n            return String.format(&quot;%02d:%02d:%02d&quot;, h,m,s);\r\n        }\r\n\r\n        public void releaseMediaPlayer() {\r\n    //        if (null != baseViewHolder) {\r\n    //            updateNonPlayingView(baseViewHolder);\r\n    //        }\r\n\r\n            mediaPlayer.release();\r\n\r\n            mediaPlayer = null;\r\n            playingPosition = -1;\r\n        }\r\n\r\n        public void updateNonPlayingView(BaseViewHolder holder) {\r\n            holder.ivPlayPause.setImageResource(R.drawable.ic_play_arrow);\r\n            holder.seekBar.setMax(mediaPlayer.getDuration());\r\n            holder.seekBar.setProgress(mediaPlayer.getCurrentPosition());\r\n            holder.seekBar.setEnabled(true);\r\n            if (mediaPlayer.isPlaying()){\r\n                uiUpdateHandler.sendEmptyMessageDelayed(MSG_UPDATE_SEEK_BAR, 100);\r\n                holder.ivPlayPause.setVisibility(View.GONE);\r\n                holder.imgPause.setVisibility(VISIBLE);\r\n            }else {\r\n                uiUpdateHandler.removeMessages(MSG_UPDATE_SEEK_BAR);\r\n                holder.imgPause.setVisibility(View.GONE);\r\n                holder.ivPlayPause.setVisibility(VISIBLE);\r\n            }\r\n        }\r\n\r\n         public   void stopPlayer(){\r\n            if (null != mediaPlayer) {\r\n                releaseMediaPlayer();\r\n            }\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n        @Override\r\n        public int getItemViewType(int position) {\r\n            return messageInfoList.get(position).getType().value;\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n        @Override\r\n        public int getItemCount() {\r\n            return messageInfoList.size();\r\n        }\r\n\r\n\r\n\r\n        @Override\r\n        public long getItemId(int position) {\r\n            return messageInfoList.get(position).hashCode();\r\n        }\r\n\r\n\r\n\r\n\r\n    //    @Override\r\n    //    public void onAttachedToRecyclerView(@NonNull RecyclerView recyclerView) {\r\n    //        super.onAttachedToRecyclerView(recyclerView);\r\n    //        recyclerView.smoothScrollToPosition(messageInfoList.size()-1);\r\n    //    }\r\n\r\n        public void add(MessageInfo messageInfo) {\r\n            messageInfoList.add(0,messageInfo);\r\n        }\r\n\r\n\r\n        public void setPlayPause(int pos){\r\n            messageInfoList.get(pos).setPlay(false);\r\n            notifyItemChanged(pos);\r\n        }\r\n\r\n        public void setSeekBar(int playingPosition ,int progressValue){\r\n            messageInfoList.get(playingPosition).setSeekBarProgressValue(progressValue);\r\n            notifyItemChanged(playingPosition);\r\n            Log.i(&quot;TAG&quot;, &quot;setSeekBarAdapter: &quot; + playingPosition + progressValue);\r\n        }\r\n\r\n        public void addMessageToBottom(MessageInfo messageInfo){\r\n            messageInfoList.add(messageInfo);\r\n        }\r\n\r\n        public void delete(MessageInfo info) {\r\n            MessageInfo tempInfo = info;\r\n            for (MessageInfo c : messageInfoList) {\r\n                if (c.getZIMMessage().getMessageID() == info.getZIMMessage().getMessageID()) {\r\n                    tempInfo = c;\r\n                }\r\n            }\r\n            messageInfoList.remove(tempInfo);\r\n        }\r\n\r\n        public void delete(long messageId) {\r\n            MessageInfo tempInfo = null;\r\n            int position = 0;\r\n            for (int i = 0; i &lt; messageInfoList.size(); i++) {\r\n                if (messageInfoList.get(i).getZIMMessage().getMessageID() == messageId) {\r\n                    tempInfo = messageInfoList.get(i);\r\n                    position = i;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (tempInfo!=null){\r\n                messageInfoList.remove(tempInfo);\r\n                notifyItemRemoved(position);\r\n            }\r\n        }\r\n\r\n        public void clearInfo() {\r\n            messageInfoList.clear();\r\n        }\r\n\r\n        public MessageInfo getMessage(int index) {\r\n            if (messageInfoList != null &amp;&amp; messageInfoList.size() &gt; 0) {\r\n                return messageInfoList.get(index);\r\n            }\r\n            return null;\r\n        }\r\n\r\n        public void set(MessageInfo info){\r\n            int position = 0;\r\n            for (int i = 0; i &lt; messageInfoList.size(); i++) {\r\n                if (messageInfoList.get(i).getZIMMessage().getLocalMessageID() == info.getZIMMessage().getLocalMessageID()) {\r\n                    position = i;\r\n                    break;\r\n                }\r\n            }\r\n            if (position!=0){\r\n                messageInfoList.set(position,info);\r\n                notifyItemChanged(position);\r\n            }\r\n\r\n        }\r\n\r\n        public void updateMessageWhenDiffSentStatus(MessageInfo info){\r\n            int position = 0;\r\n            for (int i = 0; i &lt; messageInfoList.size(); i++) {\r\n                ZIMMessage oldMessage = messageInfoList.get(i).getZIMMessage();\r\n                ZIMMessage newMessage = info.getZIMMessage();\r\n                if (oldMessage.getLocalMessageID() == info.getZIMMessage().getLocalMessageID() &amp;&amp; newMessage.getSentStatus() != oldMessage.getSentStatus()) {\r\n                    position = i;\r\n                    break;\r\n                }\r\n            }\r\n            if (position!=0){\r\n                messageInfoList.set(position,info);\r\n                notifyItemChanged(position);\r\n            }\r\n        }\r\n\r\n        public List&lt;MessageInfo&gt; getMessageInfoList(){\r\n            return messageInfoList;\r\n        }\r\n\r\n        public void setMemberList(List&lt;ZIMGroupMemberInfo&gt; memberList){\r\n            this.memberList = memberList;\r\n            notifyDataSetChanged();\r\n\r\n        }\r\n\r\n        public void setDetailsPost(GetRequestWithEditPostGetDetailsModel.Data data, int postPos) {\r\n            this.postData = data;\r\n            notifyItemChanged(postPos);\r\n        }\r\n\r\n        @Override\r\n        public boolean handleMessage(@NonNull Message msg ) {\r\n\r\n            switch (msg.what) {\r\n                case MSG_UPDATE_SEEK_BAR: {\r\n                    baseViewHolder.seekBar.setProgress(mediaPlayer.getCurrentPosition());\r\n                    uiUpdateHandler.sendEmptyMessageDelayed(MSG_UPDATE_SEEK_BAR, 100);\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n\r\nAfter scrolling the Recycler the position of seekbar thumb set to end.\r\n\r\n\r\n","title":"SeekBar progress changes while scrolling the RecyclerView In android","body":"<p>I'm working on a chat application similar to What's Up. The issue I'm having is that I have the seek bar as well as the play icon in the recycler view. When I click the play symbol, the song is played, and the seek bar moves along with it.  It was working perfectly till here. The issue is that when I scroll the <code>recyclerView</code> while playing some songs, the progress of the seek bar is set to end automatically. If I scroll again, the seek bar progress position changes to according to song duration. I'm not sure why this is  happening. Does anyone have a solution for this? thanks in Advance :)</p>\n<pre><code>public class ChatContentAdapter extends RecyclerView.Adapter implements Handler.Callback {\n    private OnItemClickListener onItemClickListener;\n    public Handler handler;\n    private List&lt;MessageInfo&gt; messageInfoList = new ArrayList&lt;&gt;();\n    List&lt;ZIMGroupMemberInfo&gt; memberList = new ArrayList&lt;&gt;();\n    private Activity activity;\n    Context context;\n    String date = &quot;&quot;;\n    int count=0;\n    boolean isPost = false;\n    //boolean dateAvailable=false;\n    String urlRegex = &quot;^((https?|ftp)://|(www|ftp)\\\\.)?[a-z0-9-]+(\\\\.[a-z0-9-]+)+([/?].*)?$&quot;;\n    GetRequestWithEditPostGetDetailsModel.Data postData ;\n    BaseViewHolder baseViewHolder;\n    private int playingPosition;\n    MediaPlayer mediaPlayer;\n    Uri audioPathUri;\n     Handler uiUpdateHandler = new Handler(this::handleMessage);\n\n    private float denseness;\n    private int width;\n\n    private static final int MSG_UPDATE_SEEK_BAR = 1845;\n    public ChatContentAdapter (Activity activity,OnItemClickListener onItemClickListener){\n        this.activity = activity;\n        this.onItemClickListener = onItemClickListener;\n    }\n    @Override\n    public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        RecyclerView.ViewHolder viewHolder = null;\n        if (ChatItemType.CHAT_ITEM_TYPE_RIGHT.value == viewType) {\n            viewHolder = new ChatRightViewHolder(parent, onItemClickListener, activity);\n        } else if (ChatItemType.CHAT_ITEM_TYPE_LEFT.value == viewType) {\n            viewHolder = new ChatLeftViewHolder(parent, onItemClickListener, activity);\n        } else if (ChatItemType.CHAT_ITEM_TYPE_CENTER.value == viewType){\n            viewHolder = new ChatCenterViewHolder(parent,activity);\n        }\n        return viewHolder;\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull RecyclerView.ViewHolder holder, int position) {\n\n        holder.itemView.setTag(position);\n        MessageInfo messageInfo = messageInfoList.get(position);\n        Log.d(&quot;TAG&quot;, &quot;onBindViewHolder: &quot;+messageInfo.isPlay());\n\n\n        if(HomeActivity.homeActivity.cacheRepository.getMessageDate().equals(&quot;0&quot;)){\n            HomeActivity.homeActivity.cacheRepository.saveMessageDate(Utilities.INSTANCE.getDateinYmd(messageInfo.getZIMMessage().getTimestamp()));\n        }\n\n        if (holder instanceof ChatLeftViewHolder) {\n            ChatLeftViewHolder chat = (ChatLeftViewHolder) holder;\n            chat.setMessageInfo(messageInfo,date,memberList,position,postData,messageInfoList.size());\n            chat.seekBar.setProgress(messageInfoList.get(position).getSeekBarProgressValue());\n            Log.i(&quot;TAG&quot;, &quot;onBindViewHolder: &quot; +messageInfoList.get(position).getSeekBarProgressValue() );\n            if (messageInfo.isPlay()){\n                chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\n\n            }else {\n                chat.ivPlayPause.setImageResource(R.drawable.ic_play);\n                chat.seekBar.setProgress(0);\n                chat.txtProcess.setText(&quot;00:00:00&quot;+ &quot;/&quot;+ &quot;00:00:00&quot;);\n            }\n\n            chat.ivPlayPause.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n                    SDKManager.sharedInstance().downloadMediaFile((ZIMMediaMessage) messageInfo.getZIMMessage(), ZIMMediaFileType.ORIGINAL_FILE, new ZIMMediaDownloadedCallback() {\n                        @Override\n                        public void onMediaDownloaded(ZIMMediaMessage message, ZIMError errorInfo) {\n                           String path = new File(message.getFileLocalPath()).getAbsolutePath();\n                            if (!path.isEmpty()){\n                               Uri audioPath = Uri.parse(path);\n                               setPlayer(audioPath,position,chat);\n                            }\n                        }\n\n                        @Override\n                        public void onMediaDownloadingProgress(ZIMMediaMessage message, long currentFileSize, long totalFileSize) {\n                            AppLogger.getInstance().d(&quot;[%s] [onMediaDownloadingProgress] [currentFileSize:%d, totalFileSize:%d, message: %s]&quot;,&quot;TAG&quot;, currentFileSize, currentFileSize, message.getMessageID());\n                        }\n                    });\n\n                }\n            });\n\n            chat.seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\n                @SuppressLint(&quot;ResourceAsColor&quot;)\n                @Override\n                public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\n\n                    if (fromUser) {\n                        if (mediaPlayer != null) {\n                            mediaPlayer.seekTo(progress);\n                            Log.i(&quot;TAG&quot;, &quot;onProgressChanged: &quot;+ progress);\n                        seekBar.setMax(mediaPlayer.getDuration()/1000);\n\n                        }\n\n                    }\n                }\n\n                @Override\n                public void onStartTrackingTouch(SeekBar seekBar) {\n                    if (((Activity)context)  != null) {\n                        ((Activity) context).runOnUiThread(new Runnable() {\n                            @Override\n                            public void run() {\n                                chat.imgPause.setVisibility(View.GONE);\n                                chat.ivPlayPause.setVisibility(View.VISIBLE);\n                            }\n                        });\n                    }\n                }\n\n                @Override\n                public void onStopTrackingTouch(SeekBar seekBar) {\n                    if (mediaPlayer != null) {\n                        ((Activity) context).runOnUiThread(new Runnable() {\n                            @Override\n                            public void run() {\n                                chat.ivPlayPause.setVisibility(View.GONE);\n                                chat.imgPause.setVisibility(View.VISIBLE);\n                                try {\n                                    mediaPlayer.start();\n                                } catch (Exception e) {\n                                    e.printStackTrace();\n                                }\n\n                            }\n                        });\n\n                    }\n                }\n\n            });\n        } else if (holder instanceof ChatRightViewHolder) {\n            ChatRightViewHolder chat = (ChatRightViewHolder) holder;\n\n            chat.setMessageInfo(messageInfo, date,memberList,position,postData, messageInfoList.size());\n\n            chat.seekBar.setProgress(messageInfoList.get(position).getSeekBarProgressValue());\n\n            if (messageInfo.isPlay()){\n                chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\n\n            }else {\n                chat.ivPlayPause.setImageResource(R.drawable.ic_play);\n                chat.seekBar.setProgress(0);\n                chat.txtProcess.setText(&quot;00:00:00&quot;+ &quot; / &quot; + &quot;00:00:00&quot;);\n            }\n            chat.ivPlayPause.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n                    SDKManager.sharedInstance().downloadMediaFile((ZIMMediaMessage) messageInfo.getZIMMessage(), ZIMMediaFileType.ORIGINAL_FILE, new ZIMMediaDownloadedCallback() {\n                        @Override\n                        public void onMediaDownloaded(ZIMMediaMessage message, ZIMError errorInfo) {\n                            String path = new File(message.getFileLocalPath()).getAbsolutePath();\n                            if (!path.isEmpty()){\n                                Uri audioPath = Uri.parse(path);\n                                setPlayerRight(audioPath,position, chat);\n                            }\n                        }\n\n                        @Override\n                        public void onMediaDownloadingProgress(ZIMMediaMessage message, long currentFileSize, long totalFileSize) {\n                            AppLogger.getInstance().d(&quot;[%s] [onMediaDownloadingProgress] [currentFileSize:%d, totalFileSize:%d, message: %s]&quot;, &quot;TAG&quot;, currentFileSize, currentFileSize, message.getMessageID());\n                        }\n                    });\n                }\n            });\n\n            chat.seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\n\n                @Override\n                public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\n                    if (((Activity) context) != null) {\n                        if (fromUser) {\n                            if (mediaPlayer!=null){\n                                mediaPlayer.seekTo(progress );\n                                Log.i(&quot;TAG&quot;, &quot;run: &quot; + progress);\n                                seekBar.setMax(mediaPlayer.getDuration()/1000);\n                            }\n                        }\n                    }\n                }\n                @Override\n                public void onStartTrackingTouch(SeekBar seekBar) {\n\n                    if (((Activity)context)  != null) {\n                        ((Activity) context).runOnUiThread(new Runnable() {\n                            @Override\n                            public void run() {\n//                                chat.ivPlayPause.setVisibility(View.GONE);\n//                                chat.imgPause.setVisibility(View.VISIBLE);\n\n                            }\n                        });\n                    }\n                }\n\n                @Override\n                public void onStopTrackingTouch(SeekBar seekBar) {\n                    if (mediaPlayer != null) {\n                    if (((Activity)context)  != null) {\n                        ((Activity) context).runOnUiThread(new Runnable() {\n                            @Override\n                            public void run() {\n//                                chat.ivPlayPause.setVisibility(View.GONE);\n//                                chat.imgPause.setVisibility(View.VISIBLE);\n                                try {\n                                    mediaPlayer.start();\n                                } catch (Exception e) {\n                                    e.printStackTrace();\n                                }\n                            }\n                        });\n                    }\n                    }\n                }\n            });\n      }\n        }\n\n    }\n\n    private void updateForRightViewHolder(MediaPlayer mediaPlayer, ChatRightViewHolder chat, SeekBar seekBar, Context context) {\n\n        if (mediaPlayer.getDuration() - mediaPlayer.getCurrentPosition() &gt; 100) {\n            chat.txtProcess.setText(convertSecondsToHMmSs(mediaPlayer.getCurrentPosition() / 1000) + &quot; / &quot; + convertSecondsToHMmSs(this.mediaPlayer.getDuration() / 1000));\n//            seekBar.setProgress(mediaPlayer.getCurrentPosition());\n            Log.i(&quot;TAG&quot;, &quot;updateForRightViewHolder: &quot; + playingPosition  + mediaPlayer.getCurrentPosition());\n            onItemClickListener.seekBarProgressValue(playingPosition,mediaPlayer.getCurrentPosition());\n\n        }else {\n            chat.txtProcess.setText(convertSecondsToHMmSs(mediaPlayer.getDuration() / 1000));\n//            seekBar.setProgress(mediaPlayer.getCurrentPosition());\n            Log.i(&quot;TAG&quot;, &quot;updateForRightViewHolder: &quot; + playingPosition  + mediaPlayer.getCurrentPosition());\n            onItemClickListener.seekBarProgressValue(playingPosition,mediaPlayer.getCurrentPosition());\n        }\n        Handler handler = new Handler();\n\n        try{\n            Runnable runnable = new Runnable() {\n                @Override\n                public void run() {\n                    try{\n                        if (ChatContentAdapter.this.mediaPlayer.getCurrentPosition() &gt; -1) {\n                            try {\n                                updateForRightViewHolder(mediaPlayer,chat, seekBar, context);\n                            } catch (Exception e) {\n                                e.printStackTrace();\n                            }\n                        }\n                    }catch (Exception e){\n                        e.printStackTrace();\n                    }\n                }\n            };\n//            handler.postDelayed(runnable, 100);\n            seekBar.postDelayed(runnable,100);\n        }catch (Exception e){\n            e.printStackTrace();\n        }\n    }\n\n    private void setPlayerRight(Uri audioPath, int position, ChatRightViewHolder chat) {\n        if (position == playingPosition){\n            if (mediaPlayer.isPlaying()) {\n                messageInfoList.get(position).setPlay(false);\n                mediaPlayer.pause();\n                chat.ivPlayPause.setImageResource(R.drawable.ic_play);\n            } else {\n                messageInfoList.get(position).setPlay(true);\n                mediaPlayer.start();\n                chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\n            }\n\n        }else {\n            if (playingPosition != -1) {\n                onItemClickListener.getPosition(playingPosition);\n            }\n            playingPosition = position;\n            if (mediaPlayer != null) {\n                chat.ivPlayPause.setImageResource(R.drawable.ic_play);\n                mediaPlayer.release();\n            }\n            startRightMediaPlayer(audioPath, chat);\n            messageInfoList.get(position).setPlay(true);\n            chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\n        }\n    }\n\n    private void startRightMediaPlayer(Uri audioPath, ChatRightViewHolder chat) {\n        mediaPlayer = MediaPlayer.create(getApplicationContext(),audioPath);\n\n        mediaPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {\n            @Override\n            public void onPrepared(MediaPlayer mp) {\n                chat.seekBar.setMax(mp.getDuration());\n                chat.txtProcess.setText(&quot;00:00:00/&quot;+convertSecondsToHMmSs(mp.getDuration() / 1000));\n            }\n        });\n\n        mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {\n            @Override\n            public void onCompletion(MediaPlayer mp) {\n                releaseMediaPlayer();\n            }\n        });\n        mediaPlayer.start();\n        updateForRightViewHolder(mediaPlayer, chat, chat.seekBar, context);\n    }\n\n\n\n    private void setPlayer(Uri audioPath, int position, ChatLeftViewHolder chat) {\n        if (position == playingPosition){\n\n            if (mediaPlayer.isPlaying()) {\n                mediaPlayer.pause();\n                messageInfoList.get(position).setPlay(false);\n                chat.ivPlayPause.setImageResource(R.drawable.ic_play);\n            } else {\n                messageInfoList.get(position).setPlay(true);\n                mediaPlayer.start();\n                chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\n            }\n        }else {\n            if (playingPosition != -1) {\n                onItemClickListener.getPosition(playingPosition);\n            }\n            playingPosition = position;\n            if (mediaPlayer != null) {\n                chat.ivPlayPause.setImageResource(R.drawable.ic_play);\n\n                mediaPlayer.release();\n            }\n\n            startMediaPlayer(audioPath,chat);\n            messageInfoList.get(position).setPlay(true);\n            chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\n        }\n    }\n\n    private void startMediaPlayer(Uri audioPathUri, ChatLeftViewHolder chat) {\n        mediaPlayer = MediaPlayer.create(getApplicationContext(),audioPathUri);\n        mediaPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {\n            @Override\n            public void onPrepared(MediaPlayer mp) {\n                chat.seekBar.setMax(mp.getDuration());\n                chat.txtProcess.setText(&quot;00:00:00/&quot;+convertSecondsToHMmSs(mp.getDuration() / 1000));\n            }\n        });\n\n        mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {\n            @Override\n            public void onCompletion(MediaPlayer mp) {\n                chat.ivPlayPause.setImageResource(R.drawable.ic_play);\n                releaseMediaPlayer();\n            }\n        });\n            mediaPlayer.start();\n            update(mediaPlayer, chat, chat.seekBar, context);\n\n        chat.seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\n            @Override\n            public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\n\n                if (((Activity) context) != null) {\n                    if (fromUser) {\n                        ((Activity) context).runOnUiThread(new Runnable() {\n                            @Override\n                            public void run() {\n                                if (mediaPlayer != null) {\n                                    mediaPlayer.seekTo(progress);\n                                    Log.i(&quot;TAG&quot;, &quot;run: &quot; + progress);\n                                }\n                            }\n                        });\n\n                    }\n                }\n            }\n\n            @Override\n            public void onStartTrackingTouch(SeekBar seekBar) {\n\n                    if (((Activity)context)  != null) {\n                        ((Activity) context).runOnUiThread(new Runnable() {\n                            @Override\n                            public void run() {\n//                                chat.ivPlayPause.setVisibility(View.GONE);\n//                                chat.imgPause.setVisibility(View.VISIBLE);\n                            }\n                        });\n                    }\n\n            }\n\n            @Override\n            public void onStopTrackingTouch(SeekBar seekBar) {\n                if (mediaPlayer != null) {\n                if (((Activity)context)  != null) {\n                    ((Activity) context).runOnUiThread(new Runnable() {\n                        @Override\n                        public void run() {\n//                            chat.ivPlayPause.setVisibility(View.GONE);\n//                            chat.imgPause.setVisibility(View.VISIBLE);\n                            try {\n                                mediaPlayer.start();\n                            } catch (Exception e) {\n                                e.printStackTrace();\n                            }\n                        }\n                    });\n                }\n                }\n            }\n        });\n        }\n    private void update(MediaPlayer mediaPlayer, ChatLeftViewHolder chat, SeekBar seekBar, Context context) {\n\n        if (mediaPlayer.getDuration() - mediaPlayer.getCurrentPosition() &gt; 100) {\n            chat.txtProcess.setText(convertSecondsToHMmSs(mediaPlayer.getCurrentPosition() / 1000) + &quot; / &quot; + convertSecondsToHMmSs(this.mediaPlayer.getDuration() / 1000));\n//            seekBar.setProgress(mediaPlayer.getCurrentPosition());\n            onItemClickListener.seekBarProgressValue(playingPosition,mediaPlayer.getCurrentPosition());\n\n        }else {\n            chat.txtProcess.setText(convertSecondsToHMmSs(mediaPlayer.getDuration() / 1000));\n//            seekBar.setProgress(mediaPlayer.getCurrentPosition());\n        }\n        Handler handler = new Handler();\n\n        try{\n            Runnable runnable = new Runnable() {\n                @Override\n                public void run() {\n                    try{\n                        if (ChatContentAdapter.this.mediaPlayer.getCurrentPosition() &gt; -1) {\n                            try {\n                                update(mediaPlayer,chat, seekBar, context);\n                            } catch (Exception e) {\n                                e.printStackTrace();\n                            }\n                        }\n                    }catch (Exception e){\n                        e.printStackTrace();\n                    }\n\n                }\n            };\n            handler.postDelayed(runnable, 100);\n//            seekBar.postDelayed(runnable,500);\n        }catch (Exception e){\n            e.printStackTrace();\n        }\n    }\n\n\n    private static String convertSecondsToHMmSs(int seconds) {\n        long s = seconds % 60;\n        long m = (seconds / 60) % 60;\n        long h = (seconds / (60 * 60)) % 24;\n        return String.format(&quot;%02d:%02d:%02d&quot;, h,m,s);\n    }\n\n    public void releaseMediaPlayer() {\n//        if (null != baseViewHolder) {\n//            updateNonPlayingView(baseViewHolder);\n//        }\n\n        mediaPlayer.release();\n\n        mediaPlayer = null;\n        playingPosition = -1;\n    }\n\n    public void updateNonPlayingView(BaseViewHolder holder) {\n        holder.ivPlayPause.setImageResource(R.drawable.ic_play_arrow);\n        holder.seekBar.setMax(mediaPlayer.getDuration());\n        holder.seekBar.setProgress(mediaPlayer.getCurrentPosition());\n        holder.seekBar.setEnabled(true);\n        if (mediaPlayer.isPlaying()){\n            uiUpdateHandler.sendEmptyMessageDelayed(MSG_UPDATE_SEEK_BAR, 100);\n            holder.ivPlayPause.setVisibility(View.GONE);\n            holder.imgPause.setVisibility(VISIBLE);\n        }else {\n            uiUpdateHandler.removeMessages(MSG_UPDATE_SEEK_BAR);\n            holder.imgPause.setVisibility(View.GONE);\n            holder.ivPlayPause.setVisibility(VISIBLE);\n        }\n    }\n\n     public   void stopPlayer(){\n        if (null != mediaPlayer) {\n            releaseMediaPlayer();\n        }\n\n    }\n\n\n\n\n    @Override\n    public int getItemViewType(int position) {\n        return messageInfoList.get(position).getType().value;\n    }\n\n\n\n\n\n    @Override\n    public int getItemCount() {\n        return messageInfoList.size();\n    }\n\n\n\n    @Override\n    public long getItemId(int position) {\n        return messageInfoList.get(position).hashCode();\n    }\n\n\n\n\n//    @Override\n//    public void onAttachedToRecyclerView(@NonNull RecyclerView recyclerView) {\n//        super.onAttachedToRecyclerView(recyclerView);\n//        recyclerView.smoothScrollToPosition(messageInfoList.size()-1);\n//    }\n\n    public void add(MessageInfo messageInfo) {\n        messageInfoList.add(0,messageInfo);\n    }\n\n\n    public void setPlayPause(int pos){\n        messageInfoList.get(pos).setPlay(false);\n        notifyItemChanged(pos);\n    }\n\n    public void setSeekBar(int playingPosition ,int progressValue){\n        messageInfoList.get(playingPosition).setSeekBarProgressValue(progressValue);\n        notifyItemChanged(playingPosition);\n        Log.i(&quot;TAG&quot;, &quot;setSeekBarAdapter: &quot; + playingPosition + progressValue);\n    }\n\n    public void addMessageToBottom(MessageInfo messageInfo){\n        messageInfoList.add(messageInfo);\n    }\n\n    public void delete(MessageInfo info) {\n        MessageInfo tempInfo = info;\n        for (MessageInfo c : messageInfoList) {\n            if (c.getZIMMessage().getMessageID() == info.getZIMMessage().getMessageID()) {\n                tempInfo = c;\n            }\n        }\n        messageInfoList.remove(tempInfo);\n    }\n\n    public void delete(long messageId) {\n        MessageInfo tempInfo = null;\n        int position = 0;\n        for (int i = 0; i &lt; messageInfoList.size(); i++) {\n            if (messageInfoList.get(i).getZIMMessage().getMessageID() == messageId) {\n                tempInfo = messageInfoList.get(i);\n                position = i;\n                break;\n            }\n        }\n\n        if (tempInfo!=null){\n            messageInfoList.remove(tempInfo);\n            notifyItemRemoved(position);\n        }\n    }\n\n    public void clearInfo() {\n        messageInfoList.clear();\n    }\n\n    public MessageInfo getMessage(int index) {\n        if (messageInfoList != null &amp;&amp; messageInfoList.size() &gt; 0) {\n            return messageInfoList.get(index);\n        }\n        return null;\n    }\n\n    public void set(MessageInfo info){\n        int position = 0;\n        for (int i = 0; i &lt; messageInfoList.size(); i++) {\n            if (messageInfoList.get(i).getZIMMessage().getLocalMessageID() == info.getZIMMessage().getLocalMessageID()) {\n                position = i;\n                break;\n            }\n        }\n        if (position!=0){\n            messageInfoList.set(position,info);\n            notifyItemChanged(position);\n        }\n\n    }\n\n    public void updateMessageWhenDiffSentStatus(MessageInfo info){\n        int position = 0;\n        for (int i = 0; i &lt; messageInfoList.size(); i++) {\n            ZIMMessage oldMessage = messageInfoList.get(i).getZIMMessage();\n            ZIMMessage newMessage = info.getZIMMessage();\n            if (oldMessage.getLocalMessageID() == info.getZIMMessage().getLocalMessageID() &amp;&amp; newMessage.getSentStatus() != oldMessage.getSentStatus()) {\n                position = i;\n                break;\n            }\n        }\n        if (position!=0){\n            messageInfoList.set(position,info);\n            notifyItemChanged(position);\n        }\n    }\n\n    public List&lt;MessageInfo&gt; getMessageInfoList(){\n        return messageInfoList;\n    }\n\n    public void setMemberList(List&lt;ZIMGroupMemberInfo&gt; memberList){\n        this.memberList = memberList;\n        notifyDataSetChanged();\n\n    }\n\n    public void setDetailsPost(GetRequestWithEditPostGetDetailsModel.Data data, int postPos) {\n        this.postData = data;\n        notifyItemChanged(postPos);\n    }\n\n    @Override\n    public boolean handleMessage(@NonNull Message msg ) {\n\n        switch (msg.what) {\n            case MSG_UPDATE_SEEK_BAR: {\n                baseViewHolder.seekBar.setProgress(mediaPlayer.getCurrentPosition());\n                uiUpdateHandler.sendEmptyMessageDelayed(MSG_UPDATE_SEEK_BAR, 100);\n                return true;\n            }\n        }\n        return false;\n    }\n}\n</code></pre>\n<p>After scrolling the Recycler the position of seekbar thumb set to end.</p>\n"},{"tags":["java","spring","spring-boot","dependency-injection","lombok"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1667728359,"post_id":74334609,"comment_id":131231740,"body_markdown":"When you use `@Bean`, you should also pass the required beans like \n`publ...authenticationJwtTokenFilter(JwtUtils j, UserService(Impl) us) { // ... use&#39;m in constructor: ...\n    return new AuthTokenFilter(j, us);\n}`","body":"When you use <code>@Bean</code>, you should also pass the required beans like  <code>publ...authenticationJwtTokenFilter(JwtUtils j, UserService(Impl) us) { &#47;&#47; ... use&#39;m in constructor: ...     return new AuthTokenFilter(j, us); }</code>"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1667728519,"post_id":74334609,"comment_id":131231760,"body_markdown":"Good point, then the cleanest way is using `@Autowired`? Or is there a better solution for that?","body":"Good point, then the cleanest way is using <code>@Autowired</code>? Or is there a better solution for that?"}],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667728506,"creation_date":1667727086,"answer_id":74334636,"question_id":74334609,"body_markdown":"Just use constructor injection. If your bean has exactly one constructor, spring will behave as if it has `@Autowired`, even if it&#39;s not added explicitly.\r\n```\r\n@AllArgsConstructor\r\n@Component\r\npublic class AuthTokenFilter extends OncePerRequestFilter {\r\n\r\n    private final JwtUtils jwtUtils;\r\n    private final UserDetailsServiceImpl userDetailsService;\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(AuthTokenFilter.class);\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n            throws ServletException, IOException {\r\n        //method implementation\r\n    }\r\n}\r\n```\r\n**Edit:** Add `@Component` on the class, spring will initialize the bean for you, no need to do it manually with `@Bean` (remove the entire method).","title":"Cannot get rid of @Autowired by using @RequiredArgsConstructor or @AllArgsConstructor","body":"<p>Just use constructor injection. If your bean has exactly one constructor, spring will behave as if it has <code>@Autowired</code>, even if it's not added explicitly.</p>\n<pre><code>@AllArgsConstructor\n@Component\npublic class AuthTokenFilter extends OncePerRequestFilter {\n\n    private final JwtUtils jwtUtils;\n    private final UserDetailsServiceImpl userDetailsService;\n\n    private static final Logger logger = LoggerFactory.getLogger(AuthTokenFilter.class);\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n        //method implementation\n    }\n}\n</code></pre>\n<p><strong>Edit:</strong> Add <code>@Component</code> on the class, spring will initialize the bean for you, no need to do it manually with <code>@Bean</code> (remove the entire method).</p>\n"},{"tags":[],"owner":{"account_id":2304856,"reputation":1,"user_id":2024310,"display_name":"Sandeep Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692860113,"creation_date":1692371379,"answer_id":76930570,"question_id":74334609,"body_markdown":"Starting with Spring version 4.3, the single bean constructor does not need to be annotated with the @Autowired annotation.\r\nWith Lombok, it&#39;s possible to generate a constructor for either all class&#39;s fields (with `@AllArgsConstructor`) or all final class&#39;s fields (with `@RequiredArgsConstructor`). ","title":"Cannot get rid of @Autowired by using @RequiredArgsConstructor or @AllArgsConstructor","body":"<p>Starting with Spring version 4.3, the single bean constructor does not need to be annotated with the @Autowired annotation.\nWith Lombok, it's possible to generate a constructor for either all class's fields (with <code>@AllArgsConstructor</code>) or all final class's fields (with <code>@RequiredArgsConstructor</code>).</p>\n"}],"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1014,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1692860113,"creation_date":1667726764,"question_id":74334609,"body_markdown":"I have the following code:\r\n\r\n```\r\n// @RequiredArgsConstructor\r\n// @AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class AuthTokenFilter extends OncePerRequestFilter {\r\n\r\n    @Autowired\r\n    private final JwtUtils jwtUtils;\r\n    // private final JwtUtils jwtUtils;\r\n\r\n    @Autowired\r\n    private UserDetailsServiceImpl userDetailsService;\r\n    // private final UserDetailsServiceImpl userDetailsService;\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(AuthTokenFilter.class);\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, \r\n        HttpServletResponse response, FilterChain filterChain)\r\n            throws ServletException, IOException {\r\n        try {\r\n            String jwt = parseJwt(request);\r\n            if (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\r\n                String username = jwtUtils.getUserNameFromJwtToken(jwt);\r\n\r\n                UserDetails userDetails = userDetailsService.loadUserByUsername(username);\r\n                UsernamePasswordAuthenticationToken authentication =\r\n                        new UsernamePasswordAuthenticationToken(\r\n                                userDetails,\r\n                                null,\r\n                                userDetails.getAuthorities());\r\n                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n\r\n                SecurityContextHolder.getContext().setAuthentication(authentication);\r\n            }\r\n        } catch (Exception e) {\r\n            logger.error(&quot;Cannot set user authentication: {}&quot;, e);\r\n        }\r\n\r\n        filterChain.doFilter(request, response);\r\n    }\r\n\r\n    private String parseJwt(HttpServletRequest request) {\r\n        String headerAuth = request.getHeader(&quot;Authorization&quot;);\r\n\r\n        if (StringUtils.hasText(headerAuth) &amp;&amp; headerAuth.startsWith(&quot;Bearer &quot;)) {\r\n            return headerAuth.substring(7, headerAuth.length());\r\n        }\r\n\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\nI am trying to get rid of `@Autowired` by using `@RequiredArgsConstructor` or `@AllArgsConstructor` as commented in the code. However, as the final fields may not been initialized, I get error indicating this problem. For that, I may also set `jwtUtils` and `userDetailsService` as null, but I am not sure if it is a good idea. So, can I use a constructor annotation (lombok) to get rid of `@Autowired` in this example?\r\n\r\n\r\n**Update:** When using the suggested approach, I get error in this bean in other class:\r\n\r\n```\r\n@Bean\r\npublic AuthTokenFilter authenticationJwtTokenFilter() {\r\n    return new AuthTokenFilter();\r\n}\r\n```\r\n\r\n**Expected 2 arguments but found 0** error","title":"Cannot get rid of @Autowired by using @RequiredArgsConstructor or @AllArgsConstructor","body":"<p>I have the following code:</p>\n<pre><code>// @RequiredArgsConstructor\n// @AllArgsConstructor\n@NoArgsConstructor\npublic class AuthTokenFilter extends OncePerRequestFilter {\n\n    @Autowired\n    private final JwtUtils jwtUtils;\n    // private final JwtUtils jwtUtils;\n\n    @Autowired\n    private UserDetailsServiceImpl userDetailsService;\n    // private final UserDetailsServiceImpl userDetailsService;\n\n    private static final Logger logger = LoggerFactory.getLogger(AuthTokenFilter.class);\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, \n        HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n        try {\n            String jwt = parseJwt(request);\n            if (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\n                String username = jwtUtils.getUserNameFromJwtToken(jwt);\n\n                UserDetails userDetails = userDetailsService.loadUserByUsername(username);\n                UsernamePasswordAuthenticationToken authentication =\n                        new UsernamePasswordAuthenticationToken(\n                                userDetails,\n                                null,\n                                userDetails.getAuthorities());\n                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n\n                SecurityContextHolder.getContext().setAuthentication(authentication);\n            }\n        } catch (Exception e) {\n            logger.error(&quot;Cannot set user authentication: {}&quot;, e);\n        }\n\n        filterChain.doFilter(request, response);\n    }\n\n    private String parseJwt(HttpServletRequest request) {\n        String headerAuth = request.getHeader(&quot;Authorization&quot;);\n\n        if (StringUtils.hasText(headerAuth) &amp;&amp; headerAuth.startsWith(&quot;Bearer &quot;)) {\n            return headerAuth.substring(7, headerAuth.length());\n        }\n\n        return null;\n    }\n}\n</code></pre>\n<p>I am trying to get rid of <code>@Autowired</code> by using <code>@RequiredArgsConstructor</code> or <code>@AllArgsConstructor</code> as commented in the code. However, as the final fields may not been initialized, I get error indicating this problem. For that, I may also set <code>jwtUtils</code> and <code>userDetailsService</code> as null, but I am not sure if it is a good idea. So, can I use a constructor annotation (lombok) to get rid of <code>@Autowired</code> in this example?</p>\n<p><strong>Update:</strong> When using the suggested approach, I get error in this bean in other class:</p>\n<pre><code>@Bean\npublic AuthTokenFilter authenticationJwtTokenFilter() {\n    return new AuthTokenFilter();\n}\n</code></pre>\n<p><strong>Expected 2 arguments but found 0</strong> error</p>\n"},{"tags":["java","windows","selenium","appium","appium-android"],"answers":[{"tags":[],"owner":{"account_id":5118808,"reputation":3538,"user_id":4103101,"display_name":"dmle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596023668,"creation_date":1596023668,"answer_id":63153038,"question_id":63140710,"body_markdown":"Check the original error in your logs:\r\n```\r\nOriginal error Command &#39;C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe&#39; not found. Is it installed?\r\n```\r\n\r\nMake sure you set [env variables][1] for Java\r\n\r\n\r\n  [1]: https://confluence.atlassian.com/conf59/setting-the-java_home-variable-in-windows-792499849.html","title":"Not able to run basic program on appium","body":"<p>Check the original error in your logs:</p>\n<pre><code>Original error Command 'C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe' not found. Is it installed?\n</code></pre>\n<p>Make sure you set <a href=\"https://confluence.atlassian.com/conf59/setting-the-java_home-variable-in-windows-792499849.html\" rel=\"nofollow noreferrer\">env variables</a> for Java</p>\n"},{"tags":[],"owner":{"account_id":29288150,"reputation":1,"user_id":22439220,"display_name":"Siri Chandana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692859173,"creation_date":1692859173,"answer_id":76966761,"question_id":63140710,"body_markdown":"    \tpackage SirichandanaAcademy.Appium;\r\n\t\r\n\timport java.io.IOException;\r\n\t//import java.net.MalformedURLException;\r\n\timport java.net.URL;\r\n\timport io.appium.java_client.AppiumDriver;\r\n\timport io.appium.java_client.android.*;\r\n\timport org.openqa.selenium.remote.DesiredCapabilities;\r\n\timport org.testng.annotations.Test;\r\n\timport io.appium.java_client.android.AndroidDriver;\r\n\timport io.appium.java_client.android.options.UiAutomator2Options;\r\n\timport org.openqa.selenium.By;\r\n\timport org.openqa.selenium.WebDriver;\r\n\timport org.openqa.selenium.remote.CapabilityType;\r\n\timport org.openqa.selenium.remote.DesiredCapabilities;\r\n\timport org.openqa.selenium.support.ui.ExpectedConditions;\r\n\timport org.openqa.selenium.support.ui.WebDriverWait;\r\n\timport org.testng.Assert;\r\n\timport org.testng.annotations.AfterMethod;\r\n\timport org.testng.annotations.BeforeMethod;\r\n\timport org.testng.annotations.Test;\r\n\timport io.appium.java_client.*;\r\n\t\r\n\tpublic class AppiumTest1 {\r\n\t\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t        public static void openCalculator(){\r\n\t        //\tpublic AndroidDriver&lt;MobileElement&gt; driver;\r\n\t\t\tDesiredCapabilities cap = new DesiredCapabilities();\r\n\t\t\tcap.setCapability(&quot;deviceName&quot;,&quot;Pixel 2 API UpsideDownCakePrivacySandbox&quot;);\r\n\t\t\tcap.setCapability(&quot;udid&quot;,&quot;emulator-5554&quot;);\r\n\t\t\tcap.setCapability(&quot;platformName&quot;,&quot;Android&quot;);\r\n\t\t\tcap.setCapability(&quot;platformVersion&quot;,&quot;14&quot;);\t\r\n\t\t\tcap.setCapability(&quot;appPackage&quot;, &quot;com.AndroidTest&quot;);\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t@Test\t\r\n\t\tpublic void appiumtest() throws IOException   \r\n\t\t{\r\n\t\t\t//androiddriver\r\n\t\t\t//appium code --&gt; appium server --&gt; mobile\r\n\t\t\tUiAutomator2Options options = new UiAutomator2Options();\r\n\t\t\toptions.setPlatformName(&quot;Android&quot;);\r\n\t\t\toptions.setDeviceName(&quot;Pixel 2 API UpsideDownCakePrivacySandbox&quot;);\r\n\t\t\toptions.setApp(&quot;//Appium//src//test//java//Resources//ApiDemos-debug.apk&quot;);\r\n\t\t\tAndroidDriver driver = new AndroidDriver(new URL(&quot;172.23.210.190:4723&quot;),options);\r\n\t\t\tdriver.getCapabilities();\r\n\t\t\t\r\n\t\t}\r\n\t\r\n\t}\r\n","title":"Not able to run basic program on appium","body":"<pre><code>    package SirichandanaAcademy.Appium;\n\nimport java.io.IOException;\n//import java.net.MalformedURLException;\nimport java.net.URL;\nimport io.appium.java_client.AppiumDriver;\nimport io.appium.java_client.android.*;\nimport org.openqa.selenium.remote.DesiredCapabilities;\nimport org.testng.annotations.Test;\nimport io.appium.java_client.android.AndroidDriver;\nimport io.appium.java_client.android.options.UiAutomator2Options;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.remote.CapabilityType;\nimport org.openqa.selenium.remote.DesiredCapabilities;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.WebDriverWait;\nimport org.testng.Assert;\nimport org.testng.annotations.AfterMethod;\nimport org.testng.annotations.BeforeMethod;\nimport org.testng.annotations.Test;\nimport io.appium.java_client.*;\n\npublic class AppiumTest1 {\n    \n    public static void main(String[] args) {\n        \n    }\n    \n        public static void openCalculator(){\n        //  public AndroidDriver&lt;MobileElement&gt; driver;\n        DesiredCapabilities cap = new DesiredCapabilities();\n        cap.setCapability(&quot;deviceName&quot;,&quot;Pixel 2 API UpsideDownCakePrivacySandbox&quot;);\n        cap.setCapability(&quot;udid&quot;,&quot;emulator-5554&quot;);\n        cap.setCapability(&quot;platformName&quot;,&quot;Android&quot;);\n        cap.setCapability(&quot;platformVersion&quot;,&quot;14&quot;);  \n        cap.setCapability(&quot;appPackage&quot;, &quot;com.AndroidTest&quot;);\n    }\n    \n    \n@Test   \n    public void appiumtest() throws IOException   \n    {\n        //androiddriver\n        //appium code --&gt; appium server --&gt; mobile\n        UiAutomator2Options options = new UiAutomator2Options();\n        options.setPlatformName(&quot;Android&quot;);\n        options.setDeviceName(&quot;Pixel 2 API UpsideDownCakePrivacySandbox&quot;);\n        options.setApp(&quot;//Appium//src//test//java//Resources//ApiDemos-debug.apk&quot;);\n        AndroidDriver driver = new AndroidDriver(new URL(&quot;172.23.210.190:4723&quot;),options);\n        driver.getCapabilities();\n        \n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":8033114,"reputation":13,"user_id":6057277,"display_name":"Rahul Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2060,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1692859173,"creation_date":1595961373,"question_id":63140710,"body_markdown":"   \r\n\r\n     package first;\r\n    \r\n    import java.io.File;\r\n    import java.net.MalformedURLException;\r\n    import java.net.URL;\r\n    \r\n    import org.openqa.selenium.remote.DesiredCapabilities;\r\n    \r\n    import io.appium.java_client.android.AndroidDriver;\r\n    import io.appium.java_client.android.AndroidElement;\r\n    import io.appium.java_client.remote.MobileCapabilityType;\r\n    \r\n    public class auto1 {\r\n    \r\n    \tpublic static void main(String[] args) throws MalformedURLException {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tFile f = new File(&quot;src&quot;);\r\n    \t\tFile fs = new File(f,&quot;DemoAndroid.apk&quot;);\r\n    \t\t\r\n    \t\tDesiredCapabilities cap = new DesiredCapabilities();\r\n    \t\tcap.setCapability(MobileCapabilityType.DEVICE_NAME,&quot;rahulemulator&quot;);\r\n    \t\tcap.setCapability(MobileCapabilityType.APP, fs.getAbsolutePath());\r\n    \t\tAndroidDriver&lt;AndroidElement&gt; ad = new AndroidDriver&lt;&gt;(new URL(&quot;http://127.0.0.1:4723/wd/hub&quot;),cap);\r\n    \r\n    \t}\r\n\r\n}\r\n\r\n=====================\r\n**Error**\r\n-----------------------\r\n\r\n    Exception in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Unable to create a new remote session. Please check the server log for more details. Original error: An unknown server-side error occurred while processing the command. Original error: Could not sign with default certificate. Original error Command &#39;C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe&#39; not found. Is it installed?\r\n    Build info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:25:48&#39;\r\n    System info: host: &#39;DESKTOP-JIA4NSC&#39;, ip: &#39;192.168.1.6&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;1.8.0_241&#39;\r\n    Driver info: driver.version: AndroidDriver\r\n    remote stacktrace: UnknownError: An unknown server-side error occurred while processing the command. Original error: Could not sign with default certificate. Original error Command &#39;C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe&#39; not found. Is it installed?\r\n        at getResponseForW3CError (C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\errors.js:804:9)\r\n        at asyncHandler (C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\protocol.js:392:37)\r\n    Build info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:25:48&#39;\r\n    System info: host: &#39;DESKTOP-JIA4NSC&#39;, ip: &#39;192.168.1.6&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;1.8.0_241&#39;\r\n    Driver info: driver.version: AndroidDriver\r\n    \tat io.appium.java_client.remote.AppiumCommandExecutor$1.createSession(AppiumCommandExecutor.java:208)\r\n    \tat io.appium.java_client.remote.AppiumCommandExecutor.createSession(AppiumCommandExecutor.java:217)\r\n    \tat io.appium.java_client.remote.AppiumCommandExecutor.execute(AppiumCommandExecutor.java:239)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\r\n    \tat io.appium.java_client.DefaultGenericMobileDriver.execute(DefaultGenericMobileDriver.java:41)\r\n    \tat io.appium.java_client.AppiumDriver.execute(AppiumDriver.java:1)\r\n    \tat io.appium.java_client.android.AndroidDriver.execute(AndroidDriver.java:1)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:213)\r\n    \tat io.appium.java_client.AppiumDriver.startSession(AppiumDriver.java:336)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:131)\r\n    \tat io.appium.java_client.DefaultGenericMobileDriver.&lt;init&gt;(DefaultGenericMobileDriver.java:37)\r\n    \tat io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:88)\r\n    \tat io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:98)\r\n    \tat io.appium.java_client.android.AndroidDriver.&lt;init&gt;(AndroidDriver.java:94)\r\n    \tat first.auto1.main(auto1.java:23)\r\n    Caused by: java.lang.reflect.InvocationTargetException\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source)\r\n    \tat io.appium.java_client.remote.AppiumCommandExecutor$1.createSession(AppiumCommandExecutor.java:186)\r\n    \t... 14 more\r\n    Caused by: org.openqa.selenium.WebDriverException: An unknown server-side error occurred while processing the command. Original error: Could not sign with default certificate. Original error Command &#39;C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe&#39; not found. Is it installed?\r\n    Build info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:25:48&#39;\r\n    System info: host: &#39;DESKTOP-JIA4NSC&#39;, ip: &#39;192.168.1.6&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;1.8.0_241&#39;\r\n    Driver info: driver.version: AndroidDriver\r\n    remote stacktrace: UnknownError: An unknown server-side error occurred while processing the command. Original error: Could not sign with default certificate. Original error Command &#39;C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe&#39; not found. Is it installed?\r\n        at getResponseForW3CError (C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\errors.js:804:9)\r\n        at asyncHandler (C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\protocol.js:392:37)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\r\n    \tat java.lang.reflect.Constructor.newInstance(Unknown Source)\r\n    \tat org.openqa.selenium.remote.W3CHandshakeResponse.lambda$errorHandler$0(W3CHandshakeResponse.java:62)\r\n    \tat org.openqa.selenium.remote.HandshakeResponse.lambda$getResponseFunction$0(HandshakeResponse.java:30)\r\n    \tat org.openqa.selenium.remote.ProtocolHandshake.lambda$createSession$0(ProtocolHandshake.java:126)\r\n    \tat java.util.stream.ReferencePipeline$3$1.accept(Unknown Source)\r\n    \tat java.util.Spliterators$ArraySpliterator.tryAdvance(Unknown Source)\r\n    \tat java.util.stream.ReferencePipeline.forEachWithCancel(Unknown Source)\r\n    \tat java.util.stream.AbstractPipeline.copyIntoWithCancel(Unknown Source)\r\n    \tat java.util.stream.AbstractPipeline.copyInto(Unknown Source)\r\n    \tat java.util.stream.AbstractPipeline.wrapAndCopyInto(Unknown Source)\r\n    \tat java.util.stream.FindOps$FindOp.evaluateSequential(Unknown Source)\r\n    \tat java.util.stream.AbstractPipeline.evaluate(Unknown Source)\r\n    \tat java.util.stream.ReferencePipeline.findFirst(Unknown Source)\r\n    \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:128)\r\n    \t... 19 more\r\n\r\n=======================\r\n\r\n\r\nAppium is also running  \r\n\r\ni tried with command appium --avd rahulandroid\r\nVirtual device is also running \r\ni also tried running appium on adminstrator \r\n\r\n\r\nlogs \r\n\r\n\r\n============\r\n\r\n\r\n \r\n\r\n    POST /wd/hub/session\r\n    [HTTP] {&quot;desiredCapabilities&quot;:{&quot;app&quot;:&quot;C:\\\\Users\\\\Akanksha Agarwal\\\\eclipse-workspace\\\\first\\\\src\\\\Spectra(Android).apk&quot;,&quot;platformName&quot;:&quot;Android&quot;,&quot;deviceName&quot;:&quot;rahulemulator&quot;},&quot;capabilities&quot;:{&quot;firstMatch&quot;:[{&quot;appium:app&quot;:&quot;C:\\\\Users\\\\Akanksha Agarwal\\\\eclipse-workspace\\\\first\\\\src\\\\Spectra(Android).apk&quot;,&quot;appium:deviceName&quot;:&quot;rahulemulator&quot;,&quot;platformName&quot;:&quot;android&quot;}]}}\r\n    [debug] [W3C] Calling AppiumDriver.createSession() with args: [{&quot;app&quot;:&quot;C:\\\\Users\\\\Akanksha Agarwal\\\\eclipse-workspace\\\\first\\\\src\\\\Spectra(Android).apk&quot;,&quot;platformName&quot;:&quot;Android&quot;,&quot;deviceName&quot;:&quot;rahulemulator&quot;},null,{&quot;firstMatch&quot;:[{&quot;appium:app&quot;:&quot;C:\\\\Users\\\\Akanksha Agarwal\\\\eclipse-workspace\\\\first\\\\src\\\\Spectra(Android).apk&quot;,&quot;appium:deviceName&quot;:&quot;rahulemulator&quot;,&quot;platformName&quot;:&quot;android&quot;}]}]\r\n    [debug] [BaseDriver] Event &#39;newSessionRequested&#39; logged at 1595960147399 (23:45:47 GMT+0530 (India Standard Time))\r\n    [BaseDriver] The following capabilities are not standard capabilities and should have an extension prefix:\r\n    [BaseDriver]   avd\r\n    [Appium]\r\n    [Appium] ======================================================================\r\n    [Appium]   DEPRECATION WARNING:\r\n    [Appium]\r\n    [Appium]   The &#39;automationName&#39; capability was not provided in the desired\r\n    [Appium]   capabilities for this Android session\r\n    [Appium]\r\n    [Appium]   Setting &#39;automationName=UiAutomator2&#39; by default and using the\r\n    [Appium]   UiAutomator2 Driver\r\n    [Appium]\r\n    [Appium]   The next major version of Appium (2.x) will **require** the\r\n    [Appium]   &#39;automationName&#39; capability to be set for all sessions on all\r\n    [Appium]   platforms\r\n    [Appium]\r\n    [Appium]   In previous versions (Appium &lt;= 1.13.x), the default was\r\n    [Appium]   &#39;automationName=UiAutomator1&#39;\r\n    [Appium]\r\n    [Appium]   If you wish to use that automation instead of UiAutomator2, please\r\n    [Appium]   add &#39;automationName=UiAutomator1&#39; to your desired capabilities\r\n    [Appium]\r\n    [Appium]   For more information about drivers, please visit\r\n    [Appium]   http://appium.io/docs/en/about-appium/intro/ and explore the\r\n    [Appium]   &#39;Drivers&#39; menu\r\n    [Appium]\r\n    [Appium] ======================================================================\r\n    [Appium]\r\n    [Appium] Appium v1.17.1 creating new AndroidUiautomator2Driver (v1.44.2) session\r\n    [debug] [BaseDriver] W3C capabilities and MJSONWP desired capabilities were provided\r\n    [debug] [BaseDriver] Creating session with W3C capabilities: {\r\n    [debug] [BaseDriver]   &quot;alwaysMatch&quot;: {\r\n    [debug] [BaseDriver]     &quot;platformName&quot;: &quot;android&quot;,\r\n    [debug] [BaseDriver]     &quot;appium:avd&quot;: &quot;rahulandroid&quot;,\r\n    [debug] [BaseDriver]     &quot;appium:app&quot;: &quot;C:\\\\Users\\\\Akanksha Agarwal\\\\eclipse-workspace\\\\first\\\\src\\\\Spectra(Android).apk&quot;,\r\n    [debug] [BaseDriver]     &quot;appium:deviceName&quot;: &quot;rahulemulator&quot;\r\n    [debug] [BaseDriver]   },\r\n    [debug] [BaseDriver]   &quot;firstMatch&quot;: [\r\n    [debug] [BaseDriver]     {}\r\n    [debug] [BaseDriver]   ]\r\n    [debug] [BaseDriver] }\r\n    [BaseDriver] Session created with session id: f540c68d-7e46-4e97-bc3d-0f419c9853df\r\n    [BaseDriver] Using local app &#39;C:\\Users\\Akanksha Agarwal\\eclipse-workspace\\first\\src\\Spectra(Android).apk&#39;\r\n    [debug] [UiAutomator2] Checking whether app is actually present\r\n    [ADB] Found 1 &#39;build-tools&#39; folders under &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk&#39; (newest first):\r\n    [ADB]     C:/Users/Akanksha Agarwal/AppData/Local/Android/Sdk/build-tools/30.0.0\r\n    [ADB] Using &#39;adb.exe&#39; from &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe&#39;\r\n    [debug] [ADB] Trying to find &#39;rahulandroid&#39; emulator\r\n    [debug] [ADB] Getting connected emulators\r\n    [debug] [ADB] Getting connected devices...\r\n    [debug] [ADB] Connected devices: [{&quot;udid&quot;:&quot;emulator-5556&quot;,&quot;state&quot;:&quot;device&quot;}]\r\n    [debug] [ADB] 1 emulator(s) connected\r\n    [debug] [ADB] Sending telnet command to device: avd name\r\n    [debug] [ADB] Getting running emulator port\r\n    [debug] [ADB] Socket connection to device created\r\n    [debug] [ADB] Socket connection to device ready\r\n    [debug] [ADB] Telnet command got response: rahulandroid\r\n    [debug] [ADB] Found emulator &#39;rahulandroid&#39; on port 5556\r\n    [debug] [ADB] Setting device id to emulator-5556\r\n    [debug] [AndroidDriver] Not launching AVD because it is already running.\r\n    [AndroidDriver] Using device: emulator-5556\r\n    [ADB] Using &#39;adb.exe&#39; from &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe&#39;\r\n    [debug] [ADB] Setting device id to emulator-5556\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell getprop ro.build.version.sdk&#39;\r\n    [debug] [ADB] Current device property &#39;ro.build.version.sdk&#39;: 28\r\n    [ADB] Getting device platform version\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell getprop ro.build.version.release&#39;\r\n    [debug] [ADB] Current device property &#39;ro.build.version.release&#39;: 9\r\n    [debug] [ADB] Device API level: 28\r\n    [UiAutomator2] Relaxing hidden api policy\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings put global hidden_api_policy_pre_p_apps 1&#39;\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings put global hidden_api_policy_p_apps 1&#39;\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings put global hidden_api_policy 1&#39;\r\n    [debug] [AndroidDriver] Parsing package and activity from app manifest\r\n    [ADB] Package name: &#39;com.spectra.consumer&#39;\r\n    [ADB] Main activity name: &#39;com.spectra.consumer.Activities.SplashActivity&#39;\r\n    [debug] [AndroidDriver] Parsed package and activity are: com.spectra.consumer/com.spectra.consumer.Activities.SplashActivity\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 wait-for-device&#39;\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell echo ping&#39;\r\n    [debug] [AndroidDriver] Pushing settings apk to device...\r\n    [debug] [ADB] Getting install status for io.appium.settings\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell dumpsys package io.appium.settings&#39;\r\n    [debug] [ADB] &#39;io.appium.settings&#39; is installed\r\n    [debug] [ADB] Getting package info for &#39;io.appium.settings&#39;\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell dumpsys package io.appium.settings&#39;\r\n    [debug] [ADB] The version name of the installed &#39;io.appium.settings&#39; is greater or equal to the application version name (&#39;3.1.0&#39; &gt;= &#39;3.1.0&#39;)\r\n    [debug] [ADB] There is no need to install/upgrade &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\io.appium.settings\\apks\\settings_apk-debug.apk&#39;\r\n    [debug] [ADB] Getting IDs of all &#39;io.appium.settings&#39; processes\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell &#39;pgrep --help; echo $?&#39;&#39;\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell pgrep -f io\\\\.appium\\\\.settings&#39;\r\n    [debug] [AndroidDriver] io.appium.settings is already running. There is no need to reset its permissions.\r\n    [debug] [Logcat] Starting logcat capture\r\n    [debug] [UiAutomator2] Forwarding UiAutomator2 Server port 6790 to 8200\r\n    [debug] [ADB] Forwarding system: 8200 to device: 6790\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 forward tcp\\:8200 tcp\\:6790&#39;\r\n    [debug] [ADB] Getting install status for io.appium.uiautomator2.server\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell dumpsys package io.appium.uiautomator2.server&#39;\r\n    [debug] [ADB] &#39;io.appium.uiautomator2.server&#39; is not installed\r\n    [debug] [ADB] App &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.5.5.apk&#39; is not installed\r\n    [debug] [UiAutomator2] io.appium.uiautomator2.server installation state: notInstalled\r\n    [debug] [ADB] Checking app cert for C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.5.5.apk\r\n    [ADB] Using &#39;apksigner.jar&#39; from &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\build-tools\\30.0.0\\lib\\apksigner.jar&#39;\r\n    [debug] [ADB] Starting apksigner: &#39;C:\\\\Windows\\\\system32\\\\&quot;C:\\\\Program Files\\\\Java\\\\jdk-12&quot;\\\\bin\\\\java.exe&#39; -Xmx1024M -Xss1m -jar &#39;C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\build-tools\\\\30.0.0\\\\lib\\\\apksigner.jar&#39; verify --print-certs &#39;C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-uiautomator2-server\\\\apks\\\\appium-uiautomator2-server-v4.5.5.apk&#39;\r\n    [ADB] Cannot use apksigner tool for signature verification. Original error: Command &#39;C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe&#39; not found. Is it installed?\r\n    [debug] [ADB] Defaulting to verify.jar\r\n    [debug] [ADB] &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.5.5.apk&#39; is not signed with the default certificate\r\n    [debug] [ADB] Command &#39;C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe&#39; not found. Is it installed?\r\n    [ADB] Using &#39;zipalign.exe&#39; from &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\build-tools\\30.0.0\\zipalign.exe&#39;\r\n    [debug] [ADB] C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.5.5.apk&#39; is already zip-aligned. Doing nothing\r\n    [debug] [ADB] Signing &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.5.5.apk&#39; with default cert\r\n    [debug] [ADB] Starting apksigner: &#39;C:\\\\Windows\\\\system32\\\\&quot;C:\\\\Program Files\\\\Java\\\\jdk-12&quot;\\\\bin\\\\java.exe&#39; -Xmx1024M -Xss1m -jar &#39;C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\build-tools\\\\30.0.0\\\\lib\\\\apksigner.jar&#39; sign --key &#39;C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-adb\\\\keys\\\\testkey.pk8&#39; --cert &#39;C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-adb\\\\keys\\\\testkey.x509.pem&#39; &#39;C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-uiautomator2-server\\\\apks\\\\appium-uiautomator2-server-v4.5.5.apk&#39;\r\n    [ADB] Cannot use apksigner tool for signing. Defaulting to sign.jar. Original error: Command &#39;C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe&#39; not found. Is it installed?\r\n    [debug] [ADB] Starting sign.jar: &#39;C:\\\\Windows\\\\system32\\\\&quot;C:\\\\Program Files\\\\Java\\\\jdk-12&quot;\\\\bin\\\\java.exe&#39; -jar &#39;C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-adb\\\\jars\\\\sign.jar&#39; &#39;C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-uiautomator2-server\\\\apks\\\\appium-uiautomator2-server-v4.5.5.apk&#39; --override\r\n    [debug] [UiAutomator2] Deleting UiAutomator2 session\r\n    [debug] [UiAutomator2] Deleting UiAutomator2 server session\r\n    [debug] [WD Proxy] Matched &#39;/&#39; to command name &#39;deleteSession&#39;\r\n    [UiAutomator2] Did not get confirmation UiAutomator2 deleteSession worked; Error was: UnknownError: An unknown server-side error occurred while processing the command. Original error: Trying to proxy a session command without session id\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell am force-stop com.spectra.consumer&#39;\r\n    [debug] [Logcat] Stopping logcat capture\r\n    [debug] [ADB] Removing forwarded port socket connection: 8200\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 forward --remove tcp\\:8200&#39;\r\n    [UiAutomator2] Restoring hidden api policy to the device default configuration\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings delete global hidden_api_policy_pre_p_apps&#39;\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings delete global hidden_api_policy_p_apps&#39;\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings delete global hidden_api_policy&#39;\r\n    [debug] [BaseDriver] Event &#39;newSessionStarted&#39; logged at 1595960150494 (23:45:50 GMT+0530 (India Standard Time))\r\n    [debug] [W3C] Encountered internal error running command: Error: Could not sign with default certificate. Original error Command &#39;C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe&#39; not found. Is it installed?\r\n    [debug] [W3C]     at ADB.signWithDefaultCert (C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-adb\\lib\\tools\\apk-signing.js:81:13)\r\n    [debug] [W3C] Destroying socket connection\r\n\r\n--------------------------------\r\n\r\n\r\n\r\nThese are the logs which are generated while running the script \r\ni am not able to understand the logs and error\r\n\r\n","title":"Not able to run basic program on appium","body":"<pre><code> package first;\n\nimport java.io.File;\nimport java.net.MalformedURLException;\nimport java.net.URL;\n\nimport org.openqa.selenium.remote.DesiredCapabilities;\n\nimport io.appium.java_client.android.AndroidDriver;\nimport io.appium.java_client.android.AndroidElement;\nimport io.appium.java_client.remote.MobileCapabilityType;\n\npublic class auto1 {\n\n    public static void main(String[] args) throws MalformedURLException {\n        // TODO Auto-generated method stub\n        File f = new File(&quot;src&quot;);\n        File fs = new File(f,&quot;DemoAndroid.apk&quot;);\n        \n        DesiredCapabilities cap = new DesiredCapabilities();\n        cap.setCapability(MobileCapabilityType.DEVICE_NAME,&quot;rahulemulator&quot;);\n        cap.setCapability(MobileCapabilityType.APP, fs.getAbsolutePath());\n        AndroidDriver&lt;AndroidElement&gt; ad = new AndroidDriver&lt;&gt;(new URL(&quot;http://127.0.0.1:4723/wd/hub&quot;),cap);\n\n    }\n</code></pre>\n<p>}</p>\n<h2>=====================\n<strong>Error</strong></h2>\n<pre><code>Exception in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Unable to create a new remote session. Please check the server log for more details. Original error: An unknown server-side error occurred while processing the command. Original error: Could not sign with default certificate. Original error Command 'C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe' not found. Is it installed?\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:25:48'\nSystem info: host: 'DESKTOP-JIA4NSC', ip: '192.168.1.6', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_241'\nDriver info: driver.version: AndroidDriver\nremote stacktrace: UnknownError: An unknown server-side error occurred while processing the command. Original error: Could not sign with default certificate. Original error Command 'C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe' not found. Is it installed?\n    at getResponseForW3CError (C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\errors.js:804:9)\n    at asyncHandler (C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\protocol.js:392:37)\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:25:48'\nSystem info: host: 'DESKTOP-JIA4NSC', ip: '192.168.1.6', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_241'\nDriver info: driver.version: AndroidDriver\n    at io.appium.java_client.remote.AppiumCommandExecutor$1.createSession(AppiumCommandExecutor.java:208)\n    at io.appium.java_client.remote.AppiumCommandExecutor.createSession(AppiumCommandExecutor.java:217)\n    at io.appium.java_client.remote.AppiumCommandExecutor.execute(AppiumCommandExecutor.java:239)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\n    at io.appium.java_client.DefaultGenericMobileDriver.execute(DefaultGenericMobileDriver.java:41)\n    at io.appium.java_client.AppiumDriver.execute(AppiumDriver.java:1)\n    at io.appium.java_client.android.AndroidDriver.execute(AndroidDriver.java:1)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:213)\n    at io.appium.java_client.AppiumDriver.startSession(AppiumDriver.java:336)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:131)\n    at io.appium.java_client.DefaultGenericMobileDriver.&lt;init&gt;(DefaultGenericMobileDriver.java:37)\n    at io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:88)\n    at io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:98)\n    at io.appium.java_client.android.AndroidDriver.&lt;init&gt;(AndroidDriver.java:94)\n    at first.auto1.main(auto1.java:23)\nCaused by: java.lang.reflect.InvocationTargetException\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at io.appium.java_client.remote.AppiumCommandExecutor$1.createSession(AppiumCommandExecutor.java:186)\n    ... 14 more\nCaused by: org.openqa.selenium.WebDriverException: An unknown server-side error occurred while processing the command. Original error: Could not sign with default certificate. Original error Command 'C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe' not found. Is it installed?\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:25:48'\nSystem info: host: 'DESKTOP-JIA4NSC', ip: '192.168.1.6', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_241'\nDriver info: driver.version: AndroidDriver\nremote stacktrace: UnknownError: An unknown server-side error occurred while processing the command. Original error: Could not sign with default certificate. Original error Command 'C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe' not found. Is it installed?\n    at getResponseForW3CError (C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\errors.js:804:9)\n    at asyncHandler (C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\protocol.js:392:37)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n    at java.lang.reflect.Constructor.newInstance(Unknown Source)\n    at org.openqa.selenium.remote.W3CHandshakeResponse.lambda$errorHandler$0(W3CHandshakeResponse.java:62)\n    at org.openqa.selenium.remote.HandshakeResponse.lambda$getResponseFunction$0(HandshakeResponse.java:30)\n    at org.openqa.selenium.remote.ProtocolHandshake.lambda$createSession$0(ProtocolHandshake.java:126)\n    at java.util.stream.ReferencePipeline$3$1.accept(Unknown Source)\n    at java.util.Spliterators$ArraySpliterator.tryAdvance(Unknown Source)\n    at java.util.stream.ReferencePipeline.forEachWithCancel(Unknown Source)\n    at java.util.stream.AbstractPipeline.copyIntoWithCancel(Unknown Source)\n    at java.util.stream.AbstractPipeline.copyInto(Unknown Source)\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(Unknown Source)\n    at java.util.stream.FindOps$FindOp.evaluateSequential(Unknown Source)\n    at java.util.stream.AbstractPipeline.evaluate(Unknown Source)\n    at java.util.stream.ReferencePipeline.findFirst(Unknown Source)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:128)\n    ... 19 more\n</code></pre>\n<p>=======================</p>\n<p>Appium is also running</p>\n<p>i tried with command appium --avd rahulandroid\nVirtual device is also running\ni also tried running appium on adminstrator</p>\n<p>logs</p>\n<p>============</p>\n<pre><code>POST /wd/hub/session\n[HTTP] {&quot;desiredCapabilities&quot;:{&quot;app&quot;:&quot;C:\\\\Users\\\\Akanksha Agarwal\\\\eclipse-workspace\\\\first\\\\src\\\\Spectra(Android).apk&quot;,&quot;platformName&quot;:&quot;Android&quot;,&quot;deviceName&quot;:&quot;rahulemulator&quot;},&quot;capabilities&quot;:{&quot;firstMatch&quot;:[{&quot;appium:app&quot;:&quot;C:\\\\Users\\\\Akanksha Agarwal\\\\eclipse-workspace\\\\first\\\\src\\\\Spectra(Android).apk&quot;,&quot;appium:deviceName&quot;:&quot;rahulemulator&quot;,&quot;platformName&quot;:&quot;android&quot;}]}}\n[debug] [W3C] Calling AppiumDriver.createSession() with args: [{&quot;app&quot;:&quot;C:\\\\Users\\\\Akanksha Agarwal\\\\eclipse-workspace\\\\first\\\\src\\\\Spectra(Android).apk&quot;,&quot;platformName&quot;:&quot;Android&quot;,&quot;deviceName&quot;:&quot;rahulemulator&quot;},null,{&quot;firstMatch&quot;:[{&quot;appium:app&quot;:&quot;C:\\\\Users\\\\Akanksha Agarwal\\\\eclipse-workspace\\\\first\\\\src\\\\Spectra(Android).apk&quot;,&quot;appium:deviceName&quot;:&quot;rahulemulator&quot;,&quot;platformName&quot;:&quot;android&quot;}]}]\n[debug] [BaseDriver] Event 'newSessionRequested' logged at 1595960147399 (23:45:47 GMT+0530 (India Standard Time))\n[BaseDriver] The following capabilities are not standard capabilities and should have an extension prefix:\n[BaseDriver]   avd\n[Appium]\n[Appium] ======================================================================\n[Appium]   DEPRECATION WARNING:\n[Appium]\n[Appium]   The 'automationName' capability was not provided in the desired\n[Appium]   capabilities for this Android session\n[Appium]\n[Appium]   Setting 'automationName=UiAutomator2' by default and using the\n[Appium]   UiAutomator2 Driver\n[Appium]\n[Appium]   The next major version of Appium (2.x) will **require** the\n[Appium]   'automationName' capability to be set for all sessions on all\n[Appium]   platforms\n[Appium]\n[Appium]   In previous versions (Appium &lt;= 1.13.x), the default was\n[Appium]   'automationName=UiAutomator1'\n[Appium]\n[Appium]   If you wish to use that automation instead of UiAutomator2, please\n[Appium]   add 'automationName=UiAutomator1' to your desired capabilities\n[Appium]\n[Appium]   For more information about drivers, please visit\n[Appium]   http://appium.io/docs/en/about-appium/intro/ and explore the\n[Appium]   'Drivers' menu\n[Appium]\n[Appium] ======================================================================\n[Appium]\n[Appium] Appium v1.17.1 creating new AndroidUiautomator2Driver (v1.44.2) session\n[debug] [BaseDriver] W3C capabilities and MJSONWP desired capabilities were provided\n[debug] [BaseDriver] Creating session with W3C capabilities: {\n[debug] [BaseDriver]   &quot;alwaysMatch&quot;: {\n[debug] [BaseDriver]     &quot;platformName&quot;: &quot;android&quot;,\n[debug] [BaseDriver]     &quot;appium:avd&quot;: &quot;rahulandroid&quot;,\n[debug] [BaseDriver]     &quot;appium:app&quot;: &quot;C:\\\\Users\\\\Akanksha Agarwal\\\\eclipse-workspace\\\\first\\\\src\\\\Spectra(Android).apk&quot;,\n[debug] [BaseDriver]     &quot;appium:deviceName&quot;: &quot;rahulemulator&quot;\n[debug] [BaseDriver]   },\n[debug] [BaseDriver]   &quot;firstMatch&quot;: [\n[debug] [BaseDriver]     {}\n[debug] [BaseDriver]   ]\n[debug] [BaseDriver] }\n[BaseDriver] Session created with session id: f540c68d-7e46-4e97-bc3d-0f419c9853df\n[BaseDriver] Using local app 'C:\\Users\\Akanksha Agarwal\\eclipse-workspace\\first\\src\\Spectra(Android).apk'\n[debug] [UiAutomator2] Checking whether app is actually present\n[ADB] Found 1 'build-tools' folders under 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk' (newest first):\n[ADB]     C:/Users/Akanksha Agarwal/AppData/Local/Android/Sdk/build-tools/30.0.0\n[ADB] Using 'adb.exe' from 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe'\n[debug] [ADB] Trying to find 'rahulandroid' emulator\n[debug] [ADB] Getting connected emulators\n[debug] [ADB] Getting connected devices...\n[debug] [ADB] Connected devices: [{&quot;udid&quot;:&quot;emulator-5556&quot;,&quot;state&quot;:&quot;device&quot;}]\n[debug] [ADB] 1 emulator(s) connected\n[debug] [ADB] Sending telnet command to device: avd name\n[debug] [ADB] Getting running emulator port\n[debug] [ADB] Socket connection to device created\n[debug] [ADB] Socket connection to device ready\n[debug] [ADB] Telnet command got response: rahulandroid\n[debug] [ADB] Found emulator 'rahulandroid' on port 5556\n[debug] [ADB] Setting device id to emulator-5556\n[debug] [AndroidDriver] Not launching AVD because it is already running.\n[AndroidDriver] Using device: emulator-5556\n[ADB] Using 'adb.exe' from 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe'\n[debug] [ADB] Setting device id to emulator-5556\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell getprop ro.build.version.sdk'\n[debug] [ADB] Current device property 'ro.build.version.sdk': 28\n[ADB] Getting device platform version\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell getprop ro.build.version.release'\n[debug] [ADB] Current device property 'ro.build.version.release': 9\n[debug] [ADB] Device API level: 28\n[UiAutomator2] Relaxing hidden api policy\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings put global hidden_api_policy_pre_p_apps 1'\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings put global hidden_api_policy_p_apps 1'\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings put global hidden_api_policy 1'\n[debug] [AndroidDriver] Parsing package and activity from app manifest\n[ADB] Package name: 'com.spectra.consumer'\n[ADB] Main activity name: 'com.spectra.consumer.Activities.SplashActivity'\n[debug] [AndroidDriver] Parsed package and activity are: com.spectra.consumer/com.spectra.consumer.Activities.SplashActivity\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 wait-for-device'\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell echo ping'\n[debug] [AndroidDriver] Pushing settings apk to device...\n[debug] [ADB] Getting install status for io.appium.settings\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell dumpsys package io.appium.settings'\n[debug] [ADB] 'io.appium.settings' is installed\n[debug] [ADB] Getting package info for 'io.appium.settings'\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell dumpsys package io.appium.settings'\n[debug] [ADB] The version name of the installed 'io.appium.settings' is greater or equal to the application version name ('3.1.0' &gt;= '3.1.0')\n[debug] [ADB] There is no need to install/upgrade 'C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\io.appium.settings\\apks\\settings_apk-debug.apk'\n[debug] [ADB] Getting IDs of all 'io.appium.settings' processes\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell 'pgrep --help; echo $?''\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell pgrep -f io\\\\.appium\\\\.settings'\n[debug] [AndroidDriver] io.appium.settings is already running. There is no need to reset its permissions.\n[debug] [Logcat] Starting logcat capture\n[debug] [UiAutomator2] Forwarding UiAutomator2 Server port 6790 to 8200\n[debug] [ADB] Forwarding system: 8200 to device: 6790\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 forward tcp\\:8200 tcp\\:6790'\n[debug] [ADB] Getting install status for io.appium.uiautomator2.server\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell dumpsys package io.appium.uiautomator2.server'\n[debug] [ADB] 'io.appium.uiautomator2.server' is not installed\n[debug] [ADB] App 'C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.5.5.apk' is not installed\n[debug] [UiAutomator2] io.appium.uiautomator2.server installation state: notInstalled\n[debug] [ADB] Checking app cert for C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.5.5.apk\n[ADB] Using 'apksigner.jar' from 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\build-tools\\30.0.0\\lib\\apksigner.jar'\n[debug] [ADB] Starting apksigner: 'C:\\\\Windows\\\\system32\\\\&quot;C:\\\\Program Files\\\\Java\\\\jdk-12&quot;\\\\bin\\\\java.exe' -Xmx1024M -Xss1m -jar 'C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\build-tools\\\\30.0.0\\\\lib\\\\apksigner.jar' verify --print-certs 'C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-uiautomator2-server\\\\apks\\\\appium-uiautomator2-server-v4.5.5.apk'\n[ADB] Cannot use apksigner tool for signature verification. Original error: Command 'C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe' not found. Is it installed?\n[debug] [ADB] Defaulting to verify.jar\n[debug] [ADB] 'C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.5.5.apk' is not signed with the default certificate\n[debug] [ADB] Command 'C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe' not found. Is it installed?\n[ADB] Using 'zipalign.exe' from 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\build-tools\\30.0.0\\zipalign.exe'\n[debug] [ADB] C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.5.5.apk' is already zip-aligned. Doing nothing\n[debug] [ADB] Signing 'C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.5.5.apk' with default cert\n[debug] [ADB] Starting apksigner: 'C:\\\\Windows\\\\system32\\\\&quot;C:\\\\Program Files\\\\Java\\\\jdk-12&quot;\\\\bin\\\\java.exe' -Xmx1024M -Xss1m -jar 'C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\build-tools\\\\30.0.0\\\\lib\\\\apksigner.jar' sign --key 'C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-adb\\\\keys\\\\testkey.pk8' --cert 'C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-adb\\\\keys\\\\testkey.x509.pem' 'C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-uiautomator2-server\\\\apks\\\\appium-uiautomator2-server-v4.5.5.apk'\n[ADB] Cannot use apksigner tool for signing. Defaulting to sign.jar. Original error: Command 'C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe' not found. Is it installed?\n[debug] [ADB] Starting sign.jar: 'C:\\\\Windows\\\\system32\\\\&quot;C:\\\\Program Files\\\\Java\\\\jdk-12&quot;\\\\bin\\\\java.exe' -jar 'C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-adb\\\\jars\\\\sign.jar' 'C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-uiautomator2-server\\\\apks\\\\appium-uiautomator2-server-v4.5.5.apk' --override\n[debug] [UiAutomator2] Deleting UiAutomator2 session\n[debug] [UiAutomator2] Deleting UiAutomator2 server session\n[debug] [WD Proxy] Matched '/' to command name 'deleteSession'\n[UiAutomator2] Did not get confirmation UiAutomator2 deleteSession worked; Error was: UnknownError: An unknown server-side error occurred while processing the command. Original error: Trying to proxy a session command without session id\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell am force-stop com.spectra.consumer'\n[debug] [Logcat] Stopping logcat capture\n[debug] [ADB] Removing forwarded port socket connection: 8200\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 forward --remove tcp\\:8200'\n[UiAutomator2] Restoring hidden api policy to the device default configuration\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings delete global hidden_api_policy_pre_p_apps'\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings delete global hidden_api_policy_p_apps'\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings delete global hidden_api_policy'\n[debug] [BaseDriver] Event 'newSessionStarted' logged at 1595960150494 (23:45:50 GMT+0530 (India Standard Time))\n[debug] [W3C] Encountered internal error running command: Error: Could not sign with default certificate. Original error Command 'C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe' not found. Is it installed?\n[debug] [W3C]     at ADB.signWithDefaultCert (C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-adb\\lib\\tools\\apk-signing.js:81:13)\n[debug] [W3C] Destroying socket connection\n</code></pre>\n<hr />\n<p>These are the logs which are generated while running the script\ni am not able to understand the logs and error</p>\n"},{"tags":["java","spring-boot","file-upload","vuejs3","multipartform-data"],"owner":{"account_id":18225653,"reputation":13,"user_id":13265507,"display_name":"ginbarca"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692859020,"creation_date":1692858981,"question_id":76966743,"body_markdown":"I run BE in localhost it worked but when deploy to server, it&#39;s not worked.\r\nHere is my API code:\r\n```java\r\n    @Validated\r\n    @PostMapping(value = &quot;/account-info/import&quot;, consumes = { MediaType.MULTIPART_FORM_DATA_VALUE, MediaType.APPLICATION_JSON_VALUE })\r\n    public ResponseEntity&lt;?&gt; importExcel(\r\n            HttpServletRequest servletRequest,\r\n            @ValidExcelFile @RequestPart(&quot;file&quot;) MultipartFile file\r\n    ) throws IOException {\r\n        // something\r\n        return ResponseEntity.noContent().build();\r\n    }\r\n```\r\nHere is `@ValidExcelFile` annotation:\r\n```java\r\n@Documented\r\n@Target({ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE, ElementType.CONSTRUCTOR, ElementType.PARAMETER, ElementType.TYPE_USE})\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Constraint(validatedBy = {FileValidator.class})\r\npublic @interface ValidExcelFile {\r\n    String message() default &quot;Only excel file are allowed&quot;;\r\n\r\n    Class&lt;?&gt;[] groups() default {};\r\n\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n}\r\n\r\nclass FileValidator implements ConstraintValidator&lt;ValidExcelFile, MultipartFile&gt; {\r\n\r\n    @Override\r\n    public void initialize(ValidExcelFile constraintAnnotation) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public boolean isValid(MultipartFile multipartFile, ConstraintValidatorContext context) {\r\n\r\n        boolean result = true;\r\n\r\n        String contentType = multipartFile.getContentType();\r\n        if (!isSupportedContentType(contentType)) {\r\n            result = false;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private boolean isSupportedContentType(String contentType) {\r\n        return contentType.equals(&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;);\r\n    }\r\n}\r\n```\r\nHere is my Vue3:\r\n```vue\r\n          &lt;form class=&quot;form row&quot; enctype=&quot;multipart/form-data&quot;&gt;\r\n            &lt;div class=&quot;row fv-row mb-5&quot;&gt;\r\n              &lt;el-upload\r\n                ref=&quot;uploadRef&quot;\r\n                class=&quot;upload-demo&quot;\r\n                action=&quot;http://localhost:8081/api/account-info/import&quot;\r\n                accept=&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;\r\n                drag\r\n                :limit=&quot;1&quot;\r\n                :headers=&quot;{ &#39;Content-Type&#39;: &#39;multipart/form-data;&#39; }&quot;\r\n                :on-exceed=&quot;handleExceed&quot;\r\n                :http-request=&quot;handleRequest&quot;\r\n              &gt;\r\n              &lt;/el-upload&gt;\r\n            &lt;/div&gt;\r\n          &lt;/form&gt;\r\n```\r\nI set the action is `localhost` then it worked, but if I change to server IP, it got error with status 400: `Current request is not a multipart request`.\r\nThis is request info: [request info][1]\r\n\r\nPlease help me fix this. Thanks!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jquqD.png","title":"Spring boot Current request is not a multipart request when deploy to server","body":"<p>I run BE in localhost it worked but when deploy to server, it's not worked.\nHere is my API code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Validated\n    @PostMapping(value = &quot;/account-info/import&quot;, consumes = { MediaType.MULTIPART_FORM_DATA_VALUE, MediaType.APPLICATION_JSON_VALUE })\n    public ResponseEntity&lt;?&gt; importExcel(\n            HttpServletRequest servletRequest,\n            @ValidExcelFile @RequestPart(&quot;file&quot;) MultipartFile file\n    ) throws IOException {\n        // something\n        return ResponseEntity.noContent().build();\n    }\n</code></pre>\n<p>Here is <code>@ValidExcelFile</code> annotation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Documented\n@Target({ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE, ElementType.CONSTRUCTOR, ElementType.PARAMETER, ElementType.TYPE_USE})\n@Retention(RetentionPolicy.RUNTIME)\n@Constraint(validatedBy = {FileValidator.class})\npublic @interface ValidExcelFile {\n    String message() default &quot;Only excel file are allowed&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n}\n\nclass FileValidator implements ConstraintValidator&lt;ValidExcelFile, MultipartFile&gt; {\n\n    @Override\n    public void initialize(ValidExcelFile constraintAnnotation) {\n\n    }\n\n    @Override\n    public boolean isValid(MultipartFile multipartFile, ConstraintValidatorContext context) {\n\n        boolean result = true;\n\n        String contentType = multipartFile.getContentType();\n        if (!isSupportedContentType(contentType)) {\n            result = false;\n        }\n\n        return result;\n    }\n\n    private boolean isSupportedContentType(String contentType) {\n        return contentType.equals(&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;);\n    }\n}\n</code></pre>\n<p>Here is my Vue3:</p>\n<pre class=\"lang-js prettyprint-override\"><code>          &lt;form class=&quot;form row&quot; enctype=&quot;multipart/form-data&quot;&gt;\n            &lt;div class=&quot;row fv-row mb-5&quot;&gt;\n              &lt;el-upload\n                ref=&quot;uploadRef&quot;\n                class=&quot;upload-demo&quot;\n                action=&quot;http://localhost:8081/api/account-info/import&quot;\n                accept=&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;\n                drag\n                :limit=&quot;1&quot;\n                :headers=&quot;{ 'Content-Type': 'multipart/form-data;' }&quot;\n                :on-exceed=&quot;handleExceed&quot;\n                :http-request=&quot;handleRequest&quot;\n              &gt;\n              &lt;/el-upload&gt;\n            &lt;/div&gt;\n          &lt;/form&gt;\n</code></pre>\n<p>I set the action is <code>localhost</code> then it worked, but if I change to server IP, it got error with status 400: <code>Current request is not a multipart request</code>.\nThis is request info: <a href=\"https://i.stack.imgur.com/jquqD.png\" rel=\"nofollow noreferrer\">request info</a></p>\n<p>Please help me fix this. Thanks!</p>\n"},{"tags":["java","spring","spring-aop","spring-bean"],"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":1,"creation_date":1539589807,"post_id":52811994,"comment_id":92541844,"body_markdown":"I give you a hint: `IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass` and `*private* FinalClass(String param) {`","body":"I give you a hint: <code>IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass</code> and <code>*private* FinalClass(String param) {</code>"},{"owner":{"account_id":2110692,"reputation":431,"user_id":1876040,"accept_rate":12,"display_name":"user1876040"},"score":0,"creation_date":1539590257,"post_id":52811994,"comment_id":92542087,"body_markdown":"Hi @zapl, Thanks, My requirement is the singleton FinalClass class will not have public constructor. So to inject it, creating the bean in the applicationContext.xml and need to use that qualified bean in all other places. If i add a public constructor then it will not meet the purpose of singleton. correct?","body":"Hi @zapl, Thanks, My requirement is the singleton FinalClass class will not have public constructor. So to inject it, creating the bean in the applicationContext.xml and need to use that qualified bean in all other places. If i add a public constructor then it will not meet the purpose of singleton. correct?"},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":1,"creation_date":1539591776,"post_id":52811994,"comment_id":92542813,"body_markdown":"The constructor visibility is irrelevant when nobody else uses it. Spring will use it only once, thus provide a single instance throughout your application. You can also use a `protected` constructor because https://stackoverflow.com/questions/3952815/extends-of-the-class-with-private-constructor is what happens","body":"The constructor visibility is irrelevant when nobody else uses it. Spring will use it only once, thus provide a single instance throughout your application. You can also use a <code>protected</code> constructor because <a href=\"https://stackoverflow.com/questions/3952815/extends-of-the-class-with-private-constructor\" title=\"extends of the class with private constructor\">stackoverflow.com/questions/3952815/&hellip;</a> is what happens"},{"owner":{"account_id":216950,"reputation":20103,"user_id":472495,"accept_rate":92,"display_name":"halfer"},"score":0,"creation_date":1539623863,"post_id":52811994,"comment_id":92560393,"body_markdown":"Please read [Under what circumstances may I add “urgent” or other similar phrases to my question, in order to obtain faster answers?](//meta.stackoverflow.com/q/326569) - the summary is that this is not an ideal way to address volunteers, and is probably counterproductive to obtaining answers. Please refrain from adding this to your questions.","body":"Please read <a href=\"//meta.stackoverflow.com/q/326569\">Under what circumstances may I add “urgent” or other similar phrases to my question, in order to obtain faster answers?</a> - the summary is that this is not an ideal way to address volunteers, and is probably counterproductive to obtaining answers. Please refrain from adding this to your questions."},{"owner":{"account_id":2110692,"reputation":431,"user_id":1876040,"accept_rate":12,"display_name":"user1876040"},"score":0,"creation_date":1539760738,"post_id":52811994,"comment_id":92614247,"body_markdown":"@zapl, I found another workaround to solve the issue, i used &amp;&amp; !within(Singleton class) from being injected and weaved in my LoggingAspect.java. So i will do my explicit logging in that file. Thanks for the suggestions.","body":"@zapl, I found another workaround to solve the issue, i used &amp;&amp; !within(Singleton class) from being injected and weaved in my LoggingAspect.java. So i will do my explicit logging in that file. Thanks for the suggestions."},{"owner":{"account_id":2110692,"reputation":431,"user_id":1876040,"accept_rate":12,"display_name":"user1876040"},"score":0,"creation_date":1539760800,"post_id":52811994,"comment_id":92614286,"body_markdown":"@halfer, Apologies for that. Will take an note on that.","body":"@halfer, Apologies for that. Will take an note on that."}],"answers":[{"tags":[],"owner":{"account_id":5866213,"reputation":970,"user_id":4620086,"display_name":"Michal"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1539589859,"creation_date":1539589859,"answer_id":52812048,"question_id":52811994,"body_markdown":"as your exception says itself \r\n\r\n    No visible constructors in class com.myprj.aop.service.FinalClass\r\n\r\nchange your private constructor to public.","title":"Issue with Spring AOP and Final class throwing &quot;Could not generate CGLIB subclass&quot;","body":"<p>as your exception says itself </p>\n\n<pre><code>No visible constructors in class com.myprj.aop.service.FinalClass\n</code></pre>\n\n<p>change your private constructor to public.</p>\n"},{"tags":[],"owner":{"account_id":7886651,"reputation":1376,"user_id":5958449,"display_name":"Yoav Gur"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1539590054,"creation_date":1539590054,"answer_id":52812090,"question_id":52811994,"body_markdown":"It tells you what the problem is: `No visible constructors in class com.myprj.aop.service.FinalClass`.  \r\n\r\nThere is no way for spring to &quot;guess&quot; which static getInstance() method to call to instantiate the singleton.  \r\nYou must provide a public empty c&#39;tor for it.  \r\n\r\nIf you use spring accross your application, you can define FinalClass as a singleton using the [@Scope][1] property.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring/docs/3.0.0.M3/reference/html/ch04s04.html","title":"Issue with Spring AOP and Final class throwing &quot;Could not generate CGLIB subclass&quot;","body":"<p>It tells you what the problem is: <code>No visible constructors in class com.myprj.aop.service.FinalClass</code>.  </p>\n\n<p>There is no way for spring to \"guess\" which static getInstance() method to call to instantiate the singleton.<br>\nYou must provide a public empty c'tor for it.  </p>\n\n<p>If you use spring accross your application, you can define FinalClass as a singleton using the <a href=\"https://docs.spring.io/spring/docs/3.0.0.M3/reference/html/ch04s04.html\" rel=\"nofollow noreferrer\">@Scope</a> property.</p>\n"},{"tags":[],"owner":{"account_id":594316,"reputation":3088,"user_id":1737590,"accept_rate":60,"display_name":"stenix"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692858963,"creation_date":1692858963,"answer_id":76966741,"question_id":52811994,"body_markdown":"I had the same issue with my service that was modularized. I solved the issue by adding the line \r\n\r\n      requires spring.aop;\r\n\r\nto `module-info.java`","title":"Issue with Spring AOP and Final class throwing &quot;Could not generate CGLIB subclass&quot;","body":"<p>I had the same issue with my service that was modularized. I solved the issue by adding the line</p>\n<pre><code>  requires spring.aop;\n</code></pre>\n<p>to <code>module-info.java</code></p>\n"}],"owner":{"account_id":2110692,"reputation":431,"user_id":1876040,"accept_rate":12,"display_name":"user1876040"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31014,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1692858963,"creation_date":1539589622,"question_id":52811994,"body_markdown":"1) Below is the small project I have where I do want logging with SpringAOP. Using spring-aop-4.1.6.RELEASE.jar and below is LoggingAspect.java with few point cuts. \r\n\r\n    package com.myprj.aop.aspect;\r\n    \r\n    import org.apache.commons.logging.Log;\r\n    import org.apache.commons.logging.LogFactory;\r\n    import org.aspectj.lang.JoinPoint;\r\n    import org.aspectj.lang.annotation.After;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    import org.aspectj.lang.annotation.Before;\r\n    import org.aspectj.lang.annotation.Pointcut;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Aspect\r\n    @Component\r\n    public class LoggingAspect {\r\n    \tprivate final Log log = LogFactory.getLog(getClass());\r\n    \r\n    \t@Before(&quot;logForAllMethods()&quot;) // after advice with name pointcut that declared as name logForAllMethods()\r\n    \tpublic void beforeAdviceForAllMethods(JoinPoint jp) throws Throwable {\r\n    \t\tObject clazz = jp.getTarget().getClass().getName();\r\n    \t\tString methodName = jp.getSignature().getName();\r\n    \t\tlog.info(&quot;Before Entering to Class &quot; + clazz + &quot; With Method Name &quot; + methodName);\r\n    \t\t// getting method parameter name\r\n    \t\tObject[] obj = jp.getArgs();\r\n    \t\tfor (Object o : obj) {\r\n    \t\t\tif (o != null) {\r\n    \t\t\t\tlog.info(&quot;Parameter Name...&quot; + o.toString());\r\n    \t\t\t} else {\r\n    \t\t\t\tlog.info(&quot;&quot;);\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \t@After(&quot;logForAllMethods()&quot;) // after advice with name pointcut that declared as name logForAllMethods()\r\n    \tpublic void afterAdviceForAllMethods(JoinPoint jp) throws Throwable {\r\n    \t\tObject clazz = jp.getTarget().getClass().getName();\r\n    \t\tString methodName = jp.getSignature().getName();\r\n    \t\tlog.info(&quot;After Entring to Method &quot; + methodName + &quot; in Calss &quot; + clazz);\r\n    \t}\r\n    \r\n    \t@Pointcut(&quot;execution(public * *(..))&quot;)\t\t// enable for all public methods\r\n    \tpublic void logForAllMethods() {\r\n    \t}\r\n    }\r\n\r\nAlso below is the sample Service and ServiceImpl classes I have \r\n\r\n    package com.myprj.aop.service;\r\n    \r\n    public interface TransferService {\r\n    \r\n    \tvoid transfer(String accountA, String accountB, Long amount);\r\n    \r\n    \tDouble checkBalance(String account);\r\n    \r\n    \tLong withdrawal(String account, Long amount);\r\n    \r\n    \tvoid diposite(String account, Long amount);\r\n    }\r\n\r\n\r\n    package com.myprj.aop.service;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.beans.factory.annotation.Qualifier;\r\n    import org.springframework.stereotype.Service;\r\n    \r\n    @Service\r\n    public class TransferServiceImpl implements TransferService {\r\n    \t\r\n    \t@Autowired\r\n    \t@Qualifier(&quot;finalClass&quot;)\r\n    \tFinalClass finalClass;\r\n    \r\n    \t@Override\r\n    \tpublic void transfer(String accountA, String accountB, Long amount) {\r\n    \t\tSystem.out.println(amount + &quot; Amount has been tranfered from &quot; + accountA + &quot; to &quot; + accountB);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Double checkBalance(String account) {\r\n    \t\tSystem.out.println(&quot;Available balance: 50000&quot;);\r\n    \t\tfinalClass.toString();\r\n    \t\treturn new Double(50000);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Long withdrawal(String account, Long amount) {\r\n    \t\tSystem.out.println(&quot;Withdrawal amount: &quot; + amount);\r\n    \t\tfinalClass.toString();\r\n    \t\treturn amount;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void diposite(String account, Long amount) {\r\n    \t\tSystem.out.println(amount + &quot; Amount has been diposited to &quot; + account);\r\n    \t\tfinalClass.toString();\r\n    \t}\r\n    \r\n    }\r\n\r\nAlso, I have a Singleton class where few methods need to be invoked like below.\r\n\r\n    package com.myprj.aop.service;\r\n    \r\n    public class FinalClass {\r\n    \t\r\n    \tprivate String constructorParam;\r\n    \t\r\n    \tprivate FinalClass(String param) {\r\n    \t\tconstructorParam = param;\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\tSystem.out.println(constructorParam);\r\n    \t\treturn constructorParam;\r\n    \t}\r\n    }\r\n\r\nBelow is applicationContext.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:util=&quot;http://www.springframework.org/schema/util&quot;\r\n    \txmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    \txmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\r\n    \txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n            http://www.springframework.org/schema/beans/spring-beans.xsd\r\n            http://www.springframework.org/schema/context\r\n            http://www.springframework.org/schema/context/spring-context.xsd\r\n            http://www.springframework.org/schema/util\r\n            http://www.springframework.org/schema/util/spring-util.xsd\r\n            http://www.springframework.org/schema/aop\r\n            http://www.springframework.org/schema/aop/spring-aop-3.0.xsd&quot;&gt;\r\n    \t&lt;context:component-scan base-package=&quot;com.myprj.aop.*&quot; /&gt;\t\t\r\n    \t&lt;bean id=&quot;finalClass&quot; class=&quot;com.myprj.aop.service.FinalClass&quot;&gt;\r\n    \t\t&lt;constructor-arg value=&quot;constructorArg&quot;&gt;&lt;/constructor-arg&gt;\r\n    \t&lt;/bean&gt;\r\n    \t&lt;aop:aspectj-autoproxy/&gt;\t\r\n    &lt;/beans&gt;\r\n\r\nMain class:\r\n\r\n    package com.myprj.aop.test;\r\n    \r\n    import org.springframework.context.ApplicationContext;\r\n    import org.springframework.context.ConfigurableApplicationContext;\r\n    import org.springframework.context.annotation.AnnotationConfigApplicationContext;\r\n    import org.springframework.context.support.ClassPathXmlApplicationContext;\r\n    \r\n    import com.myprj.aop.config.AppConfig;\r\n    import com.myprj.aop.service.TransferService;\r\n    \r\n    \r\n    public class Main {\r\n    \r\n    \t/**\r\n    \t * @param args\r\n    \t */\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// ConfigurableApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);\r\n    \t\tApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);\r\n    \t\tTransferService transferService = applicationContext.getBean(TransferService.class);\r\n    \t\ttransferService.transfer(&quot;accountA&quot;, &quot;accountB&quot;, 50000l);\r\n    \t\ttransferService.checkBalance(&quot;accountA&quot;);\r\n    \t\ttransferService.diposite(&quot;accountA&quot;, 50000l);\r\n    \t\ttransferService.withdrawal(&quot;accountB&quot;, 40000l);\r\n    \t\t//applicationContext.close();\r\n    \t}\r\n    \r\n    }\r\n\r\nGet below error\r\n\r\n    WARNING: Exception encountered during context initialization - cancelling refresh attempt\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;transferServiceImpl&#39;: Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.myprj.aop.service.FinalClass com.myprj.aop.service.TransferServiceImpl.finalClass; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;finalClass&#39; defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:334)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1210)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:755)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:757)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:480)\r\n    \tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:139)\r\n    \tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:83)\r\n    \tat com.myprj.aop.test.Main.main(Main.java:19)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.myprj.aop.service.FinalClass com.myprj.aop.service.TransferServiceImpl.finalClass; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;finalClass&#39; defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:561)\r\n    \tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:331)\r\n    \t... 13 more\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;finalClass&#39; defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:547)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1120)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1044)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:942)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:533)\r\n    \t... 15 more\r\n    Caused by: org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\r\n    \tat org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:212)\r\n    \tat org.springframework.aop.framework.ProxyFactory.getProxy(ProxyFactory.java:109)\r\n    \tat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.createProxy(AbstractAutoProxyCreator.java:447)\r\n    \tat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:333)\r\n    \tat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:293)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:422)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1579)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)\r\n    \t... 24 more\r\n    Caused by: java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\r\n    \tat org.springframework.cglib.proxy.Enhancer.filterConstructors(Enhancer.java:531)\r\n    \tat org.springframework.cglib.proxy.Enhancer.generateClass(Enhancer.java:448)\r\n    \tat org.springframework.cglib.transform.TransformingClassGenerator.generateClass(TransformingClassGenerator.java:33)\r\n    \tat org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\r\n    \tat org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)\r\n    \tat org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:377)\r\n    \tat org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:317)\r\n    \tat org.springframework.aop.framework.ObjenesisCglibAopProxy.createProxyClassAndInstance(ObjenesisCglibAopProxy.java:57)\r\n    \tat org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:202)\r\n    \t... 31 more\r\n    \r\n    Exception in thread &quot;main&quot; org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;transferServiceImpl&#39;: Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.myprj.aop.service.FinalClass com.myprj.aop.service.TransferServiceImpl.finalClass; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;finalClass&#39; defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:334)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1210)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:755)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:757)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:480)\r\n    \tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:139)\r\n    \tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:83)\r\n    \tat com.myprj.aop.test.Main.main(Main.java:19)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.myprj.aop.service.FinalClass com.myprj.aop.service.TransferServiceImpl.finalClass; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;finalClass&#39; defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:561)\r\n    \tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:331)\r\n    \t... 13 more\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;finalClass&#39; defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:547)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1120)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1044)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:942)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:533)\r\n    \t... 15 more\r\n    Caused by: org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\r\n    \tat org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:212)\r\n    \tat org.springframework.aop.framework.ProxyFactory.getProxy(ProxyFactory.java:109)\r\n    \tat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.createProxy(AbstractAutoProxyCreator.java:447)\r\n    \tat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:333)\r\n    \tat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:293)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:422)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1579)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)\r\n    \t... 24 more\r\n    Caused by: java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\r\n    \tat org.springframework.cglib.proxy.Enhancer.filterConstructors(Enhancer.java:531)\r\n    \tat org.springframework.cglib.proxy.Enhancer.generateClass(Enhancer.java:448)\r\n    \tat org.springframework.cglib.transform.TransformingClassGenerator.generateClass(TransformingClassGenerator.java:33)\r\n    \tat org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\r\n    \tat org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)\r\n    \tat org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:377)\r\n    \tat org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:317)\r\n    \tat org.springframework.aop.framework.ObjenesisCglibAopProxy.createProxyClassAndInstance(ObjenesisCglibAopProxy.java:57)\r\n    \tat org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:202)\r\n    \t... 31 more\r\n\r\nThe inject injection is failing. After googling, many have suggested setter based injection. But when singleton class is created more operations are done in actual code. Also as per below link, this has been fixed in [Spring 4.0][1]. What is wrong with my code?\r\n\r\n\r\n  [1]: http://blog.codeleak.pl/2014/07/spring-4-cglib-based-proxy-classes-with-no-default-ctor.html\r\n","title":"Issue with Spring AOP and Final class throwing &quot;Could not generate CGLIB subclass&quot;","body":"<p>1) Below is the small project I have where I do want logging with SpringAOP. Using spring-aop-4.1.6.RELEASE.jar and below is LoggingAspect.java with few point cuts. </p>\n\n<pre><code>package com.myprj.aop.aspect;\n\nimport org.apache.commons.logging.Log;\nimport org.apache.commons.logging.LogFactory;\nimport org.aspectj.lang.JoinPoint;\nimport org.aspectj.lang.annotation.After;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\nimport org.aspectj.lang.annotation.Pointcut;\nimport org.springframework.stereotype.Component;\n\n@Aspect\n@Component\npublic class LoggingAspect {\n    private final Log log = LogFactory.getLog(getClass());\n\n    @Before(\"logForAllMethods()\") // after advice with name pointcut that declared as name logForAllMethods()\n    public void beforeAdviceForAllMethods(JoinPoint jp) throws Throwable {\n        Object clazz = jp.getTarget().getClass().getName();\n        String methodName = jp.getSignature().getName();\n        log.info(\"Before Entering to Class \" + clazz + \" With Method Name \" + methodName);\n        // getting method parameter name\n        Object[] obj = jp.getArgs();\n        for (Object o : obj) {\n            if (o != null) {\n                log.info(\"Parameter Name...\" + o.toString());\n            } else {\n                log.info(\"\");\n            }\n        }\n\n    }\n\n    @After(\"logForAllMethods()\") // after advice with name pointcut that declared as name logForAllMethods()\n    public void afterAdviceForAllMethods(JoinPoint jp) throws Throwable {\n        Object clazz = jp.getTarget().getClass().getName();\n        String methodName = jp.getSignature().getName();\n        log.info(\"After Entring to Method \" + methodName + \" in Calss \" + clazz);\n    }\n\n    @Pointcut(\"execution(public * *(..))\")      // enable for all public methods\n    public void logForAllMethods() {\n    }\n}\n</code></pre>\n\n<p>Also below is the sample Service and ServiceImpl classes I have </p>\n\n<pre><code>package com.myprj.aop.service;\n\npublic interface TransferService {\n\n    void transfer(String accountA, String accountB, Long amount);\n\n    Double checkBalance(String account);\n\n    Long withdrawal(String account, Long amount);\n\n    void diposite(String account, Long amount);\n}\n\n\npackage com.myprj.aop.service;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class TransferServiceImpl implements TransferService {\n\n    @Autowired\n    @Qualifier(\"finalClass\")\n    FinalClass finalClass;\n\n    @Override\n    public void transfer(String accountA, String accountB, Long amount) {\n        System.out.println(amount + \" Amount has been tranfered from \" + accountA + \" to \" + accountB);\n    }\n\n    @Override\n    public Double checkBalance(String account) {\n        System.out.println(\"Available balance: 50000\");\n        finalClass.toString();\n        return new Double(50000);\n    }\n\n    @Override\n    public Long withdrawal(String account, Long amount) {\n        System.out.println(\"Withdrawal amount: \" + amount);\n        finalClass.toString();\n        return amount;\n    }\n\n    @Override\n    public void diposite(String account, Long amount) {\n        System.out.println(amount + \" Amount has been diposited to \" + account);\n        finalClass.toString();\n    }\n\n}\n</code></pre>\n\n<p>Also, I have a Singleton class where few methods need to be invoked like below.</p>\n\n<pre><code>package com.myprj.aop.service;\n\npublic class FinalClass {\n\n    private String constructorParam;\n\n    private FinalClass(String param) {\n        constructorParam = param;\n    }\n\n    @Override\n    public String toString() {\n        System.out.println(constructorParam);\n        return constructorParam;\n    }\n}\n</code></pre>\n\n<p>Below is applicationContext.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:util=\"http://www.springframework.org/schema/util\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:aop=\"http://www.springframework.org/schema/aop\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context\n        http://www.springframework.org/schema/context/spring-context.xsd\n        http://www.springframework.org/schema/util\n        http://www.springframework.org/schema/util/spring-util.xsd\n        http://www.springframework.org/schema/aop\n        http://www.springframework.org/schema/aop/spring-aop-3.0.xsd\"&gt;\n    &lt;context:component-scan base-package=\"com.myprj.aop.*\" /&gt;       \n    &lt;bean id=\"finalClass\" class=\"com.myprj.aop.service.FinalClass\"&gt;\n        &lt;constructor-arg value=\"constructorArg\"&gt;&lt;/constructor-arg&gt;\n    &lt;/bean&gt;\n    &lt;aop:aspectj-autoproxy/&gt;    \n&lt;/beans&gt;\n</code></pre>\n\n<p>Main class:</p>\n\n<pre><code>package com.myprj.aop.test;\n\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.ConfigurableApplicationContext;\nimport org.springframework.context.annotation.AnnotationConfigApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\nimport com.myprj.aop.config.AppConfig;\nimport com.myprj.aop.service.TransferService;\n\n\npublic class Main {\n\n    /**\n     * @param args\n     */\n    public static void main(String[] args) {\n        // ConfigurableApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);\n        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(\"applicationContext.xml\");\n        TransferService transferService = applicationContext.getBean(TransferService.class);\n        transferService.transfer(\"accountA\", \"accountB\", 50000l);\n        transferService.checkBalance(\"accountA\");\n        transferService.diposite(\"accountA\", 50000l);\n        transferService.withdrawal(\"accountB\", 40000l);\n        //applicationContext.close();\n    }\n\n}\n</code></pre>\n\n<p>Get below error</p>\n\n<pre><code>WARNING: Exception encountered during context initialization - cancelling refresh attempt\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transferServiceImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.myprj.aop.service.FinalClass com.myprj.aop.service.TransferServiceImpl.finalClass; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'finalClass' defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:334)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1210)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:755)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:757)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:480)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:139)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:83)\n    at com.myprj.aop.test.Main.main(Main.java:19)\nCaused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.myprj.aop.service.FinalClass com.myprj.aop.service.TransferServiceImpl.finalClass; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'finalClass' defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:561)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:331)\n    ... 13 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'finalClass' defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:547)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1120)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1044)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:942)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:533)\n    ... 15 more\nCaused by: org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\n    at org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:212)\n    at org.springframework.aop.framework.ProxyFactory.getProxy(ProxyFactory.java:109)\n    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.createProxy(AbstractAutoProxyCreator.java:447)\n    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:333)\n    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:293)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:422)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1579)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)\n    ... 24 more\nCaused by: java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\n    at org.springframework.cglib.proxy.Enhancer.filterConstructors(Enhancer.java:531)\n    at org.springframework.cglib.proxy.Enhancer.generateClass(Enhancer.java:448)\n    at org.springframework.cglib.transform.TransformingClassGenerator.generateClass(TransformingClassGenerator.java:33)\n    at org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\n    at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)\n    at org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:377)\n    at org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:317)\n    at org.springframework.aop.framework.ObjenesisCglibAopProxy.createProxyClassAndInstance(ObjenesisCglibAopProxy.java:57)\n    at org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:202)\n    ... 31 more\n\nException in thread \"main\" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transferServiceImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.myprj.aop.service.FinalClass com.myprj.aop.service.TransferServiceImpl.finalClass; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'finalClass' defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:334)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1210)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:755)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:757)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:480)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:139)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:83)\n    at com.myprj.aop.test.Main.main(Main.java:19)\nCaused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.myprj.aop.service.FinalClass com.myprj.aop.service.TransferServiceImpl.finalClass; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'finalClass' defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:561)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:331)\n    ... 13 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'finalClass' defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:547)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1120)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1044)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:942)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:533)\n    ... 15 more\nCaused by: org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\n    at org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:212)\n    at org.springframework.aop.framework.ProxyFactory.getProxy(ProxyFactory.java:109)\n    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.createProxy(AbstractAutoProxyCreator.java:447)\n    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:333)\n    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:293)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:422)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1579)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)\n    ... 24 more\nCaused by: java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\n    at org.springframework.cglib.proxy.Enhancer.filterConstructors(Enhancer.java:531)\n    at org.springframework.cglib.proxy.Enhancer.generateClass(Enhancer.java:448)\n    at org.springframework.cglib.transform.TransformingClassGenerator.generateClass(TransformingClassGenerator.java:33)\n    at org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\n    at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)\n    at org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:377)\n    at org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:317)\n    at org.springframework.aop.framework.ObjenesisCglibAopProxy.createProxyClassAndInstance(ObjenesisCglibAopProxy.java:57)\n    at org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:202)\n    ... 31 more\n</code></pre>\n\n<p>The inject injection is failing. After googling, many have suggested setter based injection. But when singleton class is created more operations are done in actual code. Also as per below link, this has been fixed in <a href=\"http://blog.codeleak.pl/2014/07/spring-4-cglib-based-proxy-classes-with-no-default-ctor.html\" rel=\"nofollow noreferrer\">Spring 4.0</a>. What is wrong with my code?</p>\n"},{"tags":["java","azure","azure-keyvault"],"answers":[{"tags":[],"owner":{"account_id":27055146,"reputation":11,"user_id":20607967,"display_name":"Referium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670269241,"creation_date":1670269241,"answer_id":74693523,"question_id":74693342,"body_markdown":"You can use a mocking framework such as Mockito to mock the SecretClient object and its methods. For example, you can create a mock object of the SecretClient class and set its getSecret method to return the expected string value. You can then use this mock object in your unit test instead of the actual SecretClient object.\r\n","title":"How to unit test Azure key vault (DefaultAzureCredentialBuilder) in java","body":"<p>You can use a mocking framework such as Mockito to mock the SecretClient object and its methods. For example, you can create a mock object of the SecretClient class and set its getSecret method to return the expected string value. You can then use this mock object in your unit test instead of the actual SecretClient object.</p>\n"},{"tags":[],"owner":{"account_id":1777043,"reputation":43,"user_id":1620629,"display_name":"Aron"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683119838,"creation_date":1683119838,"answer_id":76164315,"question_id":74693342,"body_markdown":"SecretClient is final, so you cannot mock it using Mockito.\r\nI did something like this:\r\n\r\n\r\n    @Bean\r\n    public SecretClient secretClient() {\r\n      return new SecretClientBuilder()\r\n              .vaultUrl(&quot;https://mycompany.com&quot;)\r\n              .pipeline(new HttpPipelineBuilder().httpClient() {\r\n          @Override\r\n          public Mono&lt;HttpResponse&gt; send(HttpRequest request) {\r\n              return null;\r\n          }\r\n      }).build()).buildClient();\r\n    }\r\n\r\n","title":"How to unit test Azure key vault (DefaultAzureCredentialBuilder) in java","body":"<p>SecretClient is final, so you cannot mock it using Mockito.\nI did something like this:</p>\n<pre><code>@Bean\npublic SecretClient secretClient() {\n  return new SecretClientBuilder()\n          .vaultUrl(&quot;https://mycompany.com&quot;)\n          .pipeline(new HttpPipelineBuilder().httpClient() {\n      @Override\n      public Mono&lt;HttpResponse&gt; send(HttpRequest request) {\n          return null;\n      }\n  }).build()).buildClient();\n}\n</code></pre>\n"}],"owner":{"account_id":9797098,"reputation":582,"user_id":7259705,"display_name":"Jonathan Hagen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":242,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1692858952,"creation_date":1670268144,"question_id":74693342,"body_markdown":"I have implemented key vault service for my java class like this:\r\n```\r\n    private final String keyVaultUrl;\r\n\r\n    public KeyVaultServiceImpl(String keyVaultUrl) {\r\n        this.keyVaultUrl = keyVaultUrl;\r\n    }\r\n\r\n    @Override\r\n    public Mono&lt;String&gt; getSecret(String key) {\r\n        SecretClient secretClient = new SecretClientBuilder()\r\n                .vaultUrl(keyVaultUrl)\r\n                .credential(new DefaultAzureCredentialBuilder().build())\r\n                .buildClient();\r\n        KeyVaultSecret retrievedSecret = secretClient.getSecret(key);\r\n        return Mono.just(retrievedSecret.getValue());\r\n    }\r\n```\r\nI am able to connect to my key vault in Azure and get the corresponding values. \r\n\r\nNow I want to unit test this. My approach is that when `secretClient.getSecret(someString)`, then it returns some expected string value I set in the unit test. However, I am not sure how to mock `SecretClient` object which I am building in the method. How should I approach this?","title":"How to unit test Azure key vault (DefaultAzureCredentialBuilder) in java","body":"<p>I have implemented key vault service for my java class like this:</p>\n<pre><code>    private final String keyVaultUrl;\n\n    public KeyVaultServiceImpl(String keyVaultUrl) {\n        this.keyVaultUrl = keyVaultUrl;\n    }\n\n    @Override\n    public Mono&lt;String&gt; getSecret(String key) {\n        SecretClient secretClient = new SecretClientBuilder()\n                .vaultUrl(keyVaultUrl)\n                .credential(new DefaultAzureCredentialBuilder().build())\n                .buildClient();\n        KeyVaultSecret retrievedSecret = secretClient.getSecret(key);\n        return Mono.just(retrievedSecret.getValue());\n    }\n</code></pre>\n<p>I am able to connect to my key vault in Azure and get the corresponding values.</p>\n<p>Now I want to unit test this. My approach is that when <code>secretClient.getSecret(someString)</code>, then it returns some expected string value I set in the unit test. However, I am not sure how to mock <code>SecretClient</code> object which I am building in the method. How should I approach this?</p>\n"},{"tags":["java","spring-boot","spring-security","saml","saml-2.0"],"owner":{"account_id":14924783,"reputation":161,"user_id":10776001,"display_name":"Heyyou"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":291,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":0,"score":6,"last_activity_date":1692858887,"creation_date":1692343902,"question_id":76927269,"body_markdown":"I am upgrading the current Spring Security SAML extension project to SAML2 authentication. I found a question where my sample existing security configuration looks like [Existing Security Configuration][1].\r\n\r\nThere is an official documentation from Spring which is mentioned in the answer. But, I would like to better understand which part of code is getting replaced by which part in the new implementation with some working examples.\r\n\r\nKindly please help. Thanks in advance.\r\n\r\n  [1]: https://stackoverflow.com/questions/75383326/spring-3-samlprocessingfilter-authenticationmanager-must-be-specified","title":"SAML2 Implementation with Spring Boot Version 3.X and Java 17","body":"<p>I am upgrading the current Spring Security SAML extension project to SAML2 authentication. I found a question where my sample existing security configuration looks like <a href=\"https://stackoverflow.com/questions/75383326/spring-3-samlprocessingfilter-authenticationmanager-must-be-specified\">Existing Security Configuration</a>.</p>\n<p>There is an official documentation from Spring which is mentioned in the answer. But, I would like to better understand which part of code is getting replaced by which part in the new implementation with some working examples.</p>\n<p>Kindly please help. Thanks in advance.</p>\n"},{"tags":["java","xml","cxf","quarkus","xml-dsig"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1692863805,"post_id":76966727,"comment_id":135682428,"body_markdown":"Have you tried passing `-Djava.util.logging.manager=org.jboss.logmanager.LogManager` ?","body":"Have you tried passing <code>-Djava.util.logging.manager=org.jboss.logmanager.LogManager</code> ?"},{"owner":{"account_id":8875620,"reputation":46,"user_id":6627867,"display_name":"xperjon"},"score":0,"creation_date":1692866630,"post_id":76966727,"comment_id":135683021,"body_markdown":"Hi! If I set the system property on command line I get: &quot;Could not load Logmanager &quot;org.jboss.logmanager.LogManager java.lang.ClassNotFoundException: org.jboss.logmanager.LogManager&quot;\nIf I set it programatically with System.setProperty(&quot;java.util.logging.manager&quot;, &quot;org.jboss.logmanager.LogManager&quot;); I still get no logs.","body":"Hi! If I set the system property on command line I get: &quot;Could not load Logmanager &quot;org.jboss.logmanager.LogManager java.lang.ClassNotFoundException: org.jboss.logmanager.LogManager&quot; If I set it programatically with System.setProperty(&quot;java.util.logging.manager&quot;, &quot;org.jboss.logmanager.LogManager&quot;); I still get no logs."},{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1692875200,"post_id":76966727,"comment_id":135684705,"body_markdown":"The CNFE is very odd...","body":"The CNFE is very odd..."}],"owner":{"account_id":8875620,"reputation":46,"user_id":6627867,"display_name":"xperjon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692858773,"creation_date":1692858773,"question_id":76966727,"body_markdown":"I&#39;m trying to use the Java XML Digital Signature API (https://www.oracle.com/technical-resources/articles/java/dig-signature-api.html) together with Quarkus 3.2.4. As stated in the Oracle article to enable debug logging you have to set the following log levels: \r\n\r\n```\r\norg.jcp.xml.dsig.internal.level = FINER\r\ncom.sun.org.apache.xml.internal.security.level = FINER\r\n```\r\n\r\nFrom that I assume JDK java.util.logging (JUL) is used. From the Quarkus logging documentation (https://quarkus.io/guides/logging) I understand that this should be handled by the JBoss Log Manager. No need for extra dependencies - just configure log levels in application.properties. \r\nBut when I try with the following:\r\n\r\n```\r\nquarkus.log.level=TRACE\r\nquarkus.log.min-level=TRACE\r\n\r\nquarkus.log.category.&quot;org.jcp.xml.dsig.internal&quot;.level=TRACE\r\nquarkus.log.category.&quot;org.jcp.xml.dsig.internal&quot;.min-level=TRACE\r\nquarkus.log.category.&quot;com.sun.org.apache.xml.internal.security&quot;.level=TRACE\r\nquarkus.log.category.&quot;com.sun.org.apache.xml.internal.security&quot;.min-level=TRACE\r\n```\r\nI only get debug logs from quarkus itself and nothing from org.jcp.xml.dsig.internal or com.sun.org.apache.xml.internal.security. \r\n\r\nI&#39;m using java 17.\r\n\r\nAnyone have an idea what could be the problem?\r\n\r\n\r\nI&#39;ve made a reproducer here: https://github.com/xperjon/quarkus-xml-dsig","title":"Quarkus - No DEBUG logs appear from Java XML Digital Signature API","body":"<p>I'm trying to use the Java XML Digital Signature API (<a href=\"https://www.oracle.com/technical-resources/articles/java/dig-signature-api.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/technical-resources/articles/java/dig-signature-api.html</a>) together with Quarkus 3.2.4. As stated in the Oracle article to enable debug logging you have to set the following log levels:</p>\n<pre><code>org.jcp.xml.dsig.internal.level = FINER\ncom.sun.org.apache.xml.internal.security.level = FINER\n</code></pre>\n<p>From that I assume JDK java.util.logging (JUL) is used. From the Quarkus logging documentation (<a href=\"https://quarkus.io/guides/logging\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/logging</a>) I understand that this should be handled by the JBoss Log Manager. No need for extra dependencies - just configure log levels in application.properties.\nBut when I try with the following:</p>\n<pre><code>quarkus.log.level=TRACE\nquarkus.log.min-level=TRACE\n\nquarkus.log.category.&quot;org.jcp.xml.dsig.internal&quot;.level=TRACE\nquarkus.log.category.&quot;org.jcp.xml.dsig.internal&quot;.min-level=TRACE\nquarkus.log.category.&quot;com.sun.org.apache.xml.internal.security&quot;.level=TRACE\nquarkus.log.category.&quot;com.sun.org.apache.xml.internal.security&quot;.min-level=TRACE\n</code></pre>\n<p>I only get debug logs from quarkus itself and nothing from org.jcp.xml.dsig.internal or com.sun.org.apache.xml.internal.security.</p>\n<p>I'm using java 17.</p>\n<p>Anyone have an idea what could be the problem?</p>\n<p>I've made a reproducer here: <a href=\"https://github.com/xperjon/quarkus-xml-dsig\" rel=\"nofollow noreferrer\">https://github.com/xperjon/quarkus-xml-dsig</a></p>\n"},{"tags":["java","android","cassandra"],"comments":[{"owner":{"account_id":5357170,"reputation":14233,"user_id":4269535,"display_name":"Erick Ramirez"},"score":0,"creation_date":1692825446,"post_id":76963278,"comment_id":135678514,"body_markdown":"To help understand the issue better, please post (1) the full error message + (2) the full stack trace. Cheers!","body":"To help understand the issue better, please post (1) the full error message + (2) the full stack trace. Cheers!"},{"owner":{"account_id":14411493,"reputation":946,"user_id":10410162,"display_name":"Madhavan"},"score":0,"creation_date":1692825467,"post_id":76963278,"comment_id":135678515,"body_markdown":"Did you try printing the full path, stacktrace, etc?","body":"Did you try printing the full path, stacktrace, etc?"},{"owner":{"account_id":14636270,"reputation":133,"user_id":10570318,"display_name":"BeatEngine"},"score":0,"creation_date":1692858266,"post_id":76963278,"comment_id":135681453,"body_markdown":"I edited my question and added the full stacktrace.","body":"I edited my question and added the full stacktrace."}],"owner":{"account_id":14636270,"reputation":133,"user_id":10570318,"display_name":"BeatEngine"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692858163,"creation_date":1692808208,"question_id":76963278,"body_markdown":"I have the problem in android, that I got a JKS not found (driver exception) for the same file, where a local UnitTest doesn&#39;t complain.\r\n\r\nVersion: **com.datastax.oss:java-driver-core:4.17.0** (older not working too)\r\n\r\nI think the problem could relate to the different location of JavaKeystore on both OS.\r\n\r\ncom.datastax.oss.driver.api.core.DriverExecutionException\r\ncause = java.security.KeyStoreException: JKS not found\r\n\r\ncom.datastax.oss.driver.internal.core.util.concurrent.CompletableFutures.getUninterruptibly(CompletableFutures.java:152)\r\ncom.datastax.oss.driver.api.core.session.SessionBuilder.build(SessionBuilder.java:835)\r\n...getSession(Datastax.java:105)\r\n\r\n\r\n\r\nThe following code only works on local machine not on android:\r\n\r\n\r\n    // Create the CqlSession object:\r\n        try {\r\n            CqlSession session = CqlSession.builder().withCloudSecureConnectBundle(bis)\r\n                    .withAuthCredentials(\r\n                      CryptoChain.byteArrayToString(CryptoChain.encryptBlockwise(Datastax.class.getName().getBytes(), ush))\r\n                     ,CryptoChain.byteArrayToString(CryptoChain.encryptBlockwise(Datastax.class.getName().getBytes(), pwh)))\r\n                    .build();\r\n            return session;\r\n        }catch (final Exception e)\r\n        {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\nThe full stacktrace:\r\n\r\n&gt; E/AndroidRuntime: FATAL EXCEPTION: main\r\n&gt;     Process: com.abc.testapp, PID: 13518\r\n&gt;     java.lang.RuntimeException: Unable to start activity ComponentInfo{com.abc.testapp/com.abc.testapp.MainActivity}:\r\n&gt; java.lang.RuntimeException:\r\n&gt; com.datastax.oss.driver.api.core.DriverExecutionException\r\n&gt;         at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3455)\r\n&gt;         at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3598)\r\n&gt;         at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83)\r\n&gt;         at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n&gt;         at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n&gt;         at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2164)\r\n&gt;         at android.os.Handler.dispatchMessage(Handler.java:107)\r\n&gt;         at android.os.Looper.loop(Looper.java:241)\r\n&gt;         at android.app.ActivityThread.main(ActivityThread.java:7582)\r\n&gt;         at java.lang.reflect.Method.invoke(Native Method)\r\n&gt;         at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\r\n&gt;         at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:941)\r\n&gt;      Caused by: java.lang.RuntimeException: com.datastax.oss.driver.api.core.DriverExecutionException\r\n&gt;         at com.abc.testapp.dataapi.Datastax.getSession(Datastax.java:116)\r\n&gt;         at com.abc.testapp.MainActivity.onCreate(MainActivity.java:636)\r\n&gt;         at android.app.Activity.performCreate(Activity.java:7822)\r\n&gt;         at android.app.Activity.performCreate(Activity.java:7811)\r\n&gt;         at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1328)\r\n&gt;         at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3430)\r\n&gt;         at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3598)&#160;\r\n&gt;         at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83)&#160;\r\n&gt;         at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)&#160;\r\n&gt;         at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)&#160;\r\n&gt;         at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2164)&#160;\r\n&gt;         at android.os.Handler.dispatchMessage(Handler.java:107)&#160;\r\n&gt;         at android.os.Looper.loop(Looper.java:241)&#160;\r\n&gt;         at android.app.ActivityThread.main(ActivityThread.java:7582)&#160;\r\n&gt;         at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n&gt;         at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)&#160;\r\n&gt;         at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:941)&#160;\r\n&gt;      Caused by: com.datastax.oss.driver.api.core.DriverExecutionException\r\n&gt;         at com.datastax.oss.driver.internal.core.util.concurrent.CompletableFutures.getUninterruptibly(CompletableFutures.java:152)\r\n&gt;         at com.datastax.oss.driver.api.core.session.SessionBuilder.build(SessionBuilder.java:835)\r\n&gt;         at com.abc.testapp.dataapi.Datastax.getSession(Datastax.java:111)\r\n&gt;         at com.abc.testapp.MainActivity.onCreate(MainActivity.java:636)&#160;\r\n&gt;         at android.app.Activity.performCreate(Activity.java:7822)&#160;\r\n&gt;         at android.app.Activity.performCreate(Activity.java:7811)&#160;\r\n&gt;         at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1328)&#160;\r\n&gt;         at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3430)&#160;\r\n&gt;         at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3598)&#160;\r\n&gt;         at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83)&#160;\r\n&gt;         at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)&#160;\r\n&gt;         at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)&#160;\r\n&gt;         at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2164)&#160;\r\n&gt;         at android.os.Handler.dispatchMessage(Handler.java:107)&#160;\r\n&gt;         at android.os.Looper.loop(Looper.java:241)&#160;\r\n&gt;         at android.app.ActivityThread.main(ActivityThread.java:7582)&#160;\r\n&gt;         at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n&gt;         at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)&#160;\r\n&gt;         at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:941)&#160;\r\n&gt;      Caused by: java.security.KeyStoreException: JKS not found\r\n&gt;         at java.security.KeyStore.getInstance(KeyStore.java:890)\r\n&gt;         at com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createKeyManagerFactory(CloudConfigFactory.java:202)\r\n&gt;         at com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createSslContext(CloudConfigFactory.java:191)\r\n&gt;         at com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createCloudConfig(CloudConfigFactory.java:129)\r\n&gt;         at com.datastax.oss.driver.api.core.session.SessionBuilder.buildDefaultSessionAsync(SessionBuilder.java:876)\r\n&gt;         at com.datastax.oss.driver.api.core.session.SessionBuilder.buildAsync(SessionBuilder.java:817)\r\n&gt;         at com.datastax.oss.driver.api.core.session.SessionBuilder.build(SessionBuilder.java:835)&#160;\r\n&gt;         at com.abc.testapp.dataapi.Datastax.getSession(Datastax.java:111)&#160;\r\n&gt;         at com.abc.testapp.MainActivity.onCreate(MainActivity.java:636)&#160;\r\n&gt;         at android.app.Activity.performCreate(Activity.java:7822)&#160;\r\n&gt;         at android.app.Activity.performCreate(Activity.java:7811)&#160;\r\n&gt;         at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1328)&#160;\r\n&gt;         at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3430)&#160;\r\n&gt;         at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3598)&#160;\r\n&gt;         at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83)&#160;\r\n&gt;         at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)&#160;\r\n&gt;         at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)&#160;\r\n&gt;         at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2164)&#160;\r\n&gt;         at android.os.Handler.dispatchMessage(Handler.java:107)&#160;\r\n&gt;         at android.os.Looper.loop(Looper.java:241)&#160;\r\n&gt;         at android.app.ActivityThread.main(ActivityThread.java:7582)&#160;\r\n&gt;         at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n&gt;         at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)&#160;\r\n&gt;         at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:941)&#160;\r\n&gt;      Caused by: java.security.NoSuchAlgorithmException: JKS KeyStore not available\r\n&gt;         at sun.security.jca.GetInstance.getInstance(GetInstance.java:159)\r\n&gt;         at java.security.Security.getImpl(Security.java:628)\r\n&gt;         at java.security.KeyStore.getInstance(KeyStore.java:887)\r\n&gt;         at com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createKeyManagerFactory(CloudConfigFactory.java:202)&#160;\r\n&gt;         at com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createSslContext(CloudConfigFactory.java:191)&#160;\r\n&gt;         at com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createCloudConfig(CloudConfigFactory.java:129)&#160;\r\n&gt;         at com.datastax.oss.driver.api.core.session.SessionBuilder.buildDefaultSessionAsync(SessionBuilder.java:876)&#160;\r\n&gt;         at com.datastax.oss.driver.api.core.session.SessionBuilder.buildAsync(SessionBuilder.java:817)&#160;\r\n&gt;         at com.datastax.oss.driver.api.core.session.SessionBuilder.build(SessionBuilder.java:835)&#160;\r\n&gt;         at com.abc.testapp.dataapi.Datastax.getSession(Datastax.java:111)&#160;\r\n&gt;         at com.abc.testapp.MainActivity.onCreate(MainActivity.java:636)&#160;\r\n&gt;         at android.app.Activity.performCreate(Activity.java:7822)&#160;\r\n&gt;         at android.app.Activity.performCreate(Activity.java:7811)&#160;\r\n&gt;         at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1328)&#160;\r\n&gt;         at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3430)&#160;\r\n&gt;         at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3598)&#160;\r\n&gt;         at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83)&#160;\r\n&gt;         at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)&#160;\r\n&gt;         at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)&#160;\r\n&gt;         at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2164)&#160;\r\n&gt;         at android.os.Handler.dispatchMessage(Handler.java:107)&#160;\r\n&gt;         at android.os.Looper.loop(Looper.java:241)&#160;\r\n&gt;         at android.app.ActivityThread.main(ActivityThread.java:7582)&#160;\r\n&gt;         at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n&gt;         at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)&#160;\r\n&gt;         at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:941)","title":"Different behaviour of Cassandra java driver on android and other os","body":"<p>I have the problem in android, that I got a JKS not found (driver exception) for the same file, where a local UnitTest doesn't complain.</p>\n<p>Version: <strong>com.datastax.oss:java-driver-core:4.17.0</strong> (older not working too)</p>\n<p>I think the problem could relate to the different location of JavaKeystore on both OS.</p>\n<p>com.datastax.oss.driver.api.core.DriverExecutionException\ncause = java.security.KeyStoreException: JKS not found</p>\n<p>com.datastax.oss.driver.internal.core.util.concurrent.CompletableFutures.getUninterruptibly(CompletableFutures.java:152)\ncom.datastax.oss.driver.api.core.session.SessionBuilder.build(SessionBuilder.java:835)\n...getSession(Datastax.java:105)</p>\n<p>The following code only works on local machine not on android:</p>\n<pre><code>// Create the CqlSession object:\n    try {\n        CqlSession session = CqlSession.builder().withCloudSecureConnectBundle(bis)\n                .withAuthCredentials(\n                  CryptoChain.byteArrayToString(CryptoChain.encryptBlockwise(Datastax.class.getName().getBytes(), ush))\n                 ,CryptoChain.byteArrayToString(CryptoChain.encryptBlockwise(Datastax.class.getName().getBytes(), pwh)))\n                .build();\n        return session;\n    }catch (final Exception e)\n    {\n        throw new RuntimeException(e);\n    }\n</code></pre>\n<p>The full stacktrace:</p>\n<blockquote>\n<p>E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: com.abc.testapp, PID: 13518\njava.lang.RuntimeException: Unable to start activity ComponentInfo{com.abc.testapp/com.abc.testapp.MainActivity}:\njava.lang.RuntimeException:\ncom.datastax.oss.driver.api.core.DriverExecutionException\nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3455)\nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3598)\nat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83)\nat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\nat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2164)\nat android.os.Handler.dispatchMessage(Handler.java:107)\nat android.os.Looper.loop(Looper.java:241)\nat android.app.ActivityThread.main(ActivityThread.java:7582)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:941)\nCaused by: java.lang.RuntimeException: com.datastax.oss.driver.api.core.DriverExecutionException\nat com.abc.testapp.dataapi.Datastax.getSession(Datastax.java:116)\nat com.abc.testapp.MainActivity.onCreate(MainActivity.java:636)\nat android.app.Activity.performCreate(Activity.java:7822)\nat android.app.Activity.performCreate(Activity.java:7811)\nat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1328)\nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3430)\nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3598) \nat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83) \nat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135) \nat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95) \nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2164) \nat android.os.Handler.dispatchMessage(Handler.java:107) \nat android.os.Looper.loop(Looper.java:241) \nat android.app.ActivityThread.main(ActivityThread.java:7582) \nat java.lang.reflect.Method.invoke(Native Method) \nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492) \nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:941) \nCaused by: com.datastax.oss.driver.api.core.DriverExecutionException\nat com.datastax.oss.driver.internal.core.util.concurrent.CompletableFutures.getUninterruptibly(CompletableFutures.java:152)\nat com.datastax.oss.driver.api.core.session.SessionBuilder.build(SessionBuilder.java:835)\nat com.abc.testapp.dataapi.Datastax.getSession(Datastax.java:111)\nat com.abc.testapp.MainActivity.onCreate(MainActivity.java:636) \nat android.app.Activity.performCreate(Activity.java:7822) \nat android.app.Activity.performCreate(Activity.java:7811) \nat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1328) \nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3430) \nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3598) \nat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83) \nat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135) \nat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95) \nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2164) \nat android.os.Handler.dispatchMessage(Handler.java:107) \nat android.os.Looper.loop(Looper.java:241) \nat android.app.ActivityThread.main(ActivityThread.java:7582) \nat java.lang.reflect.Method.invoke(Native Method) \nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492) \nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:941) \nCaused by: java.security.KeyStoreException: JKS not found\nat java.security.KeyStore.getInstance(KeyStore.java:890)\nat com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createKeyManagerFactory(CloudConfigFactory.java:202)\nat com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createSslContext(CloudConfigFactory.java:191)\nat com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createCloudConfig(CloudConfigFactory.java:129)\nat com.datastax.oss.driver.api.core.session.SessionBuilder.buildDefaultSessionAsync(SessionBuilder.java:876)\nat com.datastax.oss.driver.api.core.session.SessionBuilder.buildAsync(SessionBuilder.java:817)\nat com.datastax.oss.driver.api.core.session.SessionBuilder.build(SessionBuilder.java:835) \nat com.abc.testapp.dataapi.Datastax.getSession(Datastax.java:111) \nat com.abc.testapp.MainActivity.onCreate(MainActivity.java:636) \nat android.app.Activity.performCreate(Activity.java:7822) \nat android.app.Activity.performCreate(Activity.java:7811) \nat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1328) \nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3430) \nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3598) \nat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83) \nat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135) \nat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95) \nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2164) \nat android.os.Handler.dispatchMessage(Handler.java:107) \nat android.os.Looper.loop(Looper.java:241) \nat android.app.ActivityThread.main(ActivityThread.java:7582) \nat java.lang.reflect.Method.invoke(Native Method) \nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492) \nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:941) \nCaused by: java.security.NoSuchAlgorithmException: JKS KeyStore not available\nat sun.security.jca.GetInstance.getInstance(GetInstance.java:159)\nat java.security.Security.getImpl(Security.java:628)\nat java.security.KeyStore.getInstance(KeyStore.java:887)\nat com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createKeyManagerFactory(CloudConfigFactory.java:202) \nat com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createSslContext(CloudConfigFactory.java:191) \nat com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createCloudConfig(CloudConfigFactory.java:129) \nat com.datastax.oss.driver.api.core.session.SessionBuilder.buildDefaultSessionAsync(SessionBuilder.java:876) \nat com.datastax.oss.driver.api.core.session.SessionBuilder.buildAsync(SessionBuilder.java:817) \nat com.datastax.oss.driver.api.core.session.SessionBuilder.build(SessionBuilder.java:835) \nat com.abc.testapp.dataapi.Datastax.getSession(Datastax.java:111) \nat com.abc.testapp.MainActivity.onCreate(MainActivity.java:636) \nat android.app.Activity.performCreate(Activity.java:7822) \nat android.app.Activity.performCreate(Activity.java:7811) \nat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1328) \nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3430) \nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3598) \nat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83) \nat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135) \nat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95) \nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2164) \nat android.os.Handler.dispatchMessage(Handler.java:107) \nat android.os.Looper.loop(Looper.java:241) \nat android.app.ActivityThread.main(ActivityThread.java:7582) \nat java.lang.reflect.Method.invoke(Native Method) \nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492) \nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:941)</p>\n</blockquote>\n"},{"tags":["java","android","android-studio","github","dependencies"],"comments":[{"owner":{"account_id":1979244,"reputation":1418,"user_id":1776243,"display_name":"Ram"},"score":0,"creation_date":1625054890,"post_id":68030511,"comment_id":120524311,"body_markdown":"same problem any solution?","body":"same problem any solution?"},{"owner":{"account_id":17020516,"reputation":41,"user_id":12313222,"display_name":"Manav Dave"},"score":0,"creation_date":1625174063,"post_id":68030511,"comment_id":120564780,"body_markdown":"No, I just built my own Contact Picker","body":"No, I just built my own Contact Picker"}],"answers":[{"tags":[],"owner":{"account_id":13944493,"reputation":21,"user_id":10069562,"display_name":"Sebastian Koba"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626354228,"creation_date":1626354228,"answer_id":68394378,"question_id":68030511,"body_markdown":"I had the same problem but with [geok](https://github.com/piruin/geok) library. I checked syntax of dependencies declaration lines on [JitPack](https://jitpack.io/) website and there were different than I had on my build.gradle file. Finally I changed \r\n\r\nfrom:\r\n```\r\nimplementation &quot;com.github.piruin:geok:$geokVersion&quot;\r\nimplementation &quot;com.github.piruin.geok-gson:$geokVersion&quot;\r\n```\r\n\r\nto: \r\n```\r\nimplementation &quot;com.github.piruin.geok:geok:$geokVersion&quot;\r\nimplementation &quot;com.github.piruin.geok:geok:$geokVersion&quot;\r\n```\r\nand it works. ","title":"Execution failed for task &#39;:app:dataBindingMergeDependencyArtifactsDebug&#39;","body":"<p>I had the same problem but with <a href=\"https://github.com/piruin/geok\" rel=\"nofollow noreferrer\">geok</a> library. I checked syntax of dependencies declaration lines on <a href=\"https://jitpack.io/\" rel=\"nofollow noreferrer\">JitPack</a> website and there were different than I had on my build.gradle file. Finally I changed</p>\n<p>from:</p>\n<pre><code>implementation &quot;com.github.piruin:geok:$geokVersion&quot;\nimplementation &quot;com.github.piruin.geok-gson:$geokVersion&quot;\n</code></pre>\n<p>to:</p>\n<pre><code>implementation &quot;com.github.piruin.geok:geok:$geokVersion&quot;\nimplementation &quot;com.github.piruin.geok:geok:$geokVersion&quot;\n</code></pre>\n<p>and it works.</p>\n"}],"owner":{"account_id":17020516,"reputation":41,"user_id":12313222,"display_name":"Manav Dave"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12185,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1692857290,"creation_date":1623998616,"question_id":68030511,"body_markdown":"I added this library from GitHub into my android app:\r\n\r\n    implementation &#39;com.github.quiin:unifiedContactPicker:1.0&#39;\r\n\r\nNow, this library uses other libraries from GitHub.\r\nWhen I run my app, it tells me that these internal libraries are not found, so I dig them up and find their dependencies and add them to my app&#39;s Gradle file. But the problem is that they are not being detected and this is the error I am getting both times.\r\n\r\nExecution failed for task &#39;:app:dataBindingMergeDependencyArtifactsDebug&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:app:debugCompileClasspath&#39;.\r\n   &gt; Could not find com.hootsuite.android:nachos:1.0.0.\r\n     Required by:\r\n         project :app &gt; com.github.quiin:unifiedContactPicker:1.0\r\n\r\nPossible solution:\r\n - Declare repository providing the artifact, see the documentation at https://docs.gradle.org/current/userguide/declaring_repositories.html\r\n\r\nPlease help, I have been stuck at this for a long time and I need to use this dependency. I have also tried using similar dependencies that fulfil my purpose but they all seem to have the same problem. So I don&#39;t know if there&#39;s a problem with my project or the libraries.\r\n\r\n","title":"Execution failed for task &#39;:app:dataBindingMergeDependencyArtifactsDebug&#39;","body":"<p>I added this library from GitHub into my android app:</p>\n<pre><code>implementation 'com.github.quiin:unifiedContactPicker:1.0'\n</code></pre>\n<p>Now, this library uses other libraries from GitHub.\nWhen I run my app, it tells me that these internal libraries are not found, so I dig them up and find their dependencies and add them to my app's Gradle file. But the problem is that they are not being detected and this is the error I am getting both times.</p>\n<p>Execution failed for task ':app:dataBindingMergeDependencyArtifactsDebug'.</p>\n<blockquote>\n<p>Could not resolve all files for configuration ':app:debugCompileClasspath'.\nCould not find com.hootsuite.android:nachos:1.0.0.\nRequired by:\nproject :app &gt; com.github.quiin:unifiedContactPicker:1.0</p>\n</blockquote>\n<p>Possible solution:</p>\n<ul>\n<li>Declare repository providing the artifact, see the documentation at <a href=\"https://docs.gradle.org/current/userguide/declaring_repositories.html\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/declaring_repositories.html</a></li>\n</ul>\n<p>Please help, I have been stuck at this for a long time and I need to use this dependency. I have also tried using similar dependencies that fulfil my purpose but they all seem to have the same problem. So I don't know if there's a problem with my project or the libraries.</p>\n"},{"tags":["java","rest","jersey"],"answers":[{"tags":[],"owner":{"account_id":2770143,"reputation":1667,"user_id":2384902,"accept_rate":83,"display_name":"TinusSky"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1384271230,"creation_date":1384271230,"answer_id":19933604,"question_id":19933157,"body_markdown":"Found it :-)\r\n\r\n@RolesAllowed(&quot;admin&quot;) not @RolesAllowed(&quot;{admin}&quot;)\r\n\r\nand the most important one:\r\n\r\nregister(RolesAllowedDynamicFeature.class);","title":"@RolesAllowed is not working with custom SecurityContext in Jersey?","body":"<p>Found it :-)</p>\n\n<p>@RolesAllowed(\"admin\") not @RolesAllowed(\"{admin}\")</p>\n\n<p>and the most important one:</p>\n\n<p>register(RolesAllowedDynamicFeature.class);</p>\n"},{"tags":[],"owner":{"account_id":4800889,"reputation":99,"user_id":3877552,"display_name":"LeoMandrak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692855999,"creation_date":1417803754,"answer_id":27322308,"question_id":19933157,"body_markdown":"You can use this below in your web.xml\r\n\r\n```xml\r\n&lt;context-param&gt;\r\n    &lt;param-name&gt;resteasy.role.based.security&lt;/param-name&gt;\r\n    &lt;param-value&gt;true&lt;/param-value&gt;\r\n&lt;/context-param&gt;\r\n```","title":"@RolesAllowed is not working with custom SecurityContext in Jersey?","body":"<p>You can use this below in your web.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;context-param&gt;\n    &lt;param-name&gt;resteasy.role.based.security&lt;/param-name&gt;\n    &lt;param-value&gt;true&lt;/param-value&gt;\n&lt;/context-param&gt;\n</code></pre>\n"}],"owner":{"account_id":2770143,"reputation":1667,"user_id":2384902,"accept_rate":83,"display_name":"TinusSky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3305,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":19933604,"answer_count":2,"score":3,"last_activity_date":1692855999,"creation_date":1384270048,"question_id":19933157,"body_markdown":"I have a simple jersey 2.4 resource:\r\n\r\n    @RolesAllowed(&quot;admin&quot;)\r\n    public List&lt;Folder&gt; list(){}\r\n\r\nI also have a ContainerRequestFilter which sets custom securitycontext:\r\n\r\n    public void filter(ContainerRequestContext requestContext) throws IOException {\r\n    requestContext.setSecurityContext(new MySecurityContext(...));\r\n    }\r\n\r\nIn the list() function i do get the correct securitycontext: MySecurityContext. And a call &quot;securityContext.isUserInRole(&quot;admin&quot;)&quot; works. \r\n\r\nBut the annotation @RolesAllowed doesn&#39;t seem to do anything, the function isUserInRole of MySecurityContext is never called.\r\n\r\nDo i need to do something special to get the @RolesAllowed to work?\r\n\r\n","title":"@RolesAllowed is not working with custom SecurityContext in Jersey?","body":"<p>I have a simple jersey 2.4 resource:</p>\n\n<pre><code>@RolesAllowed(\"admin\")\npublic List&lt;Folder&gt; list(){}\n</code></pre>\n\n<p>I also have a ContainerRequestFilter which sets custom securitycontext:</p>\n\n<pre><code>public void filter(ContainerRequestContext requestContext) throws IOException {\nrequestContext.setSecurityContext(new MySecurityContext(...));\n}\n</code></pre>\n\n<p>In the list() function i do get the correct securitycontext: MySecurityContext. And a call \"securityContext.isUserInRole(\"admin\")\" works. </p>\n\n<p>But the annotation @RolesAllowed doesn't seem to do anything, the function isUserInRole of MySecurityContext is never called.</p>\n\n<p>Do i need to do something special to get the @RolesAllowed to work?</p>\n"},{"tags":["java","security","ejb","jax-rs","resteasy"],"answers":[{"tags":[],"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1411293853,"creation_date":1411293853,"answer_id":25958049,"question_id":25851374,"body_markdown":"I saw your post on my answer [here][1]. I&#39;m not very familiar with JBoss proprietary security, neither do I recommend having it embedded in the code, but I guess that&#39;s not my problem. From your code, I don&#39;t see `security-role` or `@DeclareRoles` present; it is clearly mentioned in my answer that you need either one for annotation-based security to work. DId you exclude that for brevity or did you miss it? In case of the later, add `@DeclareRoles` to `UserResource` class and see if that helps.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/20025434/839733","title":"How do I get the @RolesAllowed annotation to work for my Web application?","body":"<p>I saw your post on my answer <a href=\"https://stackoverflow.com/a/20025434/839733\">here</a>. I'm not very familiar with JBoss proprietary security, neither do I recommend having it embedded in the code, but I guess that's not my problem. From your code, I don't see <code>security-role</code> or <code>@DeclareRoles</code> present; it is clearly mentioned in my answer that you need either one for annotation-based security to work. DId you exclude that for brevity or did you miss it? In case of the later, add <code>@DeclareRoles</code> to <code>UserResource</code> class and see if that helps.</p>\n"},{"tags":[],"owner":{"account_id":2994769,"reputation":1310,"user_id":2541501,"accept_rate":78,"display_name":"PJvG"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1412688901,"creation_date":1411735312,"answer_id":26059850,"question_id":25851374,"body_markdown":"I found one solution to my problem. However, this isn&#39;t as much a solution to the problem as it is a `workaround`, because it does not use the *@RolesAllowed* annotation.\r\n\r\nSince I was unable to figure out how to define my deployment descriptors and server configuration exactly, I figured the problem would be solved much easier if I simply did not use the *@RolesAllowed* annotation.\r\n\r\nEven though other people might really want to use the `login-config` element in their *web.xml* file and not use any other means of authentication, this approach does not use that element but instead does authentication solely through [RESTful Web Services][1] (which means that nothing needs to change in the deployment descriptors or the server configuration).\r\n\r\nI created a new *Enterprise Java Bean (EJB)* called `SecurityFilter` which checks if a user has the required roles for certain functionalities. It is implemented as follows:\r\n\r\n    import java.util.Arrays;\r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    import javax.ejb.EJB;\r\n    import javax.ejb.Stateless;\r\n    import javax.ws.rs.core.HttpHeaders;\r\n    import org.profit.pgb.rest.user.UserService;\r\n    \r\n    @Stateless\r\n    public class SecurityFilter\r\n    {\r\n        @EJB(name = &quot;UserServiceImp&quot;)\r\n        UserService userService;\r\n        \r\n        public boolean isUserAllowed (String[] rolesArray, HttpHeaders hHeaders)\r\n        {\r\n            Set&lt;String&gt; rolesSet = new HashSet&lt;&gt;(Arrays.asList(rolesArray));\r\n            \r\n            String uuid = hHeaders.getRequestHeader(&quot;user&quot;).get(0);\r\n            String token = hHeaders.getRequestHeader(&quot;token&quot;).get(0);\r\n            \r\n            if (userService.isAuthorizationTokenValid(uuid, token))\r\n            {\r\n               if (userService.isUserAllowed(uuid, rolesSet))\r\n               {\r\n                   return true; // user allowed access\r\n               }\r\n            }   \r\n            return false; // 401\r\n        }\r\n    }\r\n\r\nThe method *isUserAllowed* is called in the *create* method of *UserResource.java*. The old implementation of this *create* method can be seen in the question above. The new implementation is as follows:\r\n\r\n    @PermitAll\r\n    @Path(&quot;create&quot;)\r\n    @POST\r\n    public Response create(CreateRequest request, @Context HttpHeaders hHeaders) {  \r\n        if (securityFilter.isUserAllowed(new String[]{&quot;admin&quot;}, hHeaders))\r\n        {\r\n            try {\r\n                System.out.println(&quot;Start of create method&quot;);\r\n                User user = userService.createUser(request);\r\n                return getCreateResponse(user);\r\n            }\r\n            catch (Exception e){\r\n                return Response.status(401).entity(&quot;Failed to create user&quot;).build();\r\n            }\r\n        }\r\n        else\r\n            return Response.status(401).entity(&quot;Access denied! User does not have permission to create user&quot;).build();\r\n    }\r\n\r\nAs you can see, an if-else statement replaces the *@RolesAllowed* annotation in this approach and my security filter is implemented slightly different.\r\n\r\nAlso, this approach uses [HttpHeaders][2] to get the request headers (in which the user ID and token are stored). [The accepted answer][3] on the SO question &quot;https://stackoverflow.com/questions/6503960/how-to-received-accept-header-in-rest-web-service-server-side/6504062#6504062&quot; helped me find [how to get the request headers][4].\r\n\r\nFurthermore, this approach works without changing anything in my *Backbone.js*- and *Bootstrap*-based web pages (i.e. my HTML and JavaScript files).\r\n\r\n\r\n  [1]: http://docs.oracle.com/javaee/6/tutorial/doc/gijqy.html\r\n  [2]: http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/HttpHeaders.html\r\n  [3]: https://stackoverflow.com/a/6504062/2541501\r\n  [4]: https://wikis.oracle.com/display/Jersey/Overview+of+JAX-RS+1.0+Features","title":"How do I get the @RolesAllowed annotation to work for my Web application?","body":"<p>I found one solution to my problem. However, this isn't as much a solution to the problem as it is a <code>workaround</code>, because it does not use the <em>@RolesAllowed</em> annotation.</p>\n\n<p>Since I was unable to figure out how to define my deployment descriptors and server configuration exactly, I figured the problem would be solved much easier if I simply did not use the <em>@RolesAllowed</em> annotation.</p>\n\n<p>Even though other people might really want to use the <code>login-config</code> element in their <em>web.xml</em> file and not use any other means of authentication, this approach does not use that element but instead does authentication solely through <a href=\"http://docs.oracle.com/javaee/6/tutorial/doc/gijqy.html\" rel=\"nofollow noreferrer\">RESTful Web Services</a> (which means that nothing needs to change in the deployment descriptors or the server configuration).</p>\n\n<p>I created a new <em>Enterprise Java Bean (EJB)</em> called <code>SecurityFilter</code> which checks if a user has the required roles for certain functionalities. It is implemented as follows:</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.HashSet;\nimport java.util.Set;\nimport javax.ejb.EJB;\nimport javax.ejb.Stateless;\nimport javax.ws.rs.core.HttpHeaders;\nimport org.profit.pgb.rest.user.UserService;\n\n@Stateless\npublic class SecurityFilter\n{\n    @EJB(name = \"UserServiceImp\")\n    UserService userService;\n\n    public boolean isUserAllowed (String[] rolesArray, HttpHeaders hHeaders)\n    {\n        Set&lt;String&gt; rolesSet = new HashSet&lt;&gt;(Arrays.asList(rolesArray));\n\n        String uuid = hHeaders.getRequestHeader(\"user\").get(0);\n        String token = hHeaders.getRequestHeader(\"token\").get(0);\n\n        if (userService.isAuthorizationTokenValid(uuid, token))\n        {\n           if (userService.isUserAllowed(uuid, rolesSet))\n           {\n               return true; // user allowed access\n           }\n        }   \n        return false; // 401\n    }\n}\n</code></pre>\n\n<p>The method <em>isUserAllowed</em> is called in the <em>create</em> method of <em>UserResource.java</em>. The old implementation of this <em>create</em> method can be seen in the question above. The new implementation is as follows:</p>\n\n<pre><code>@PermitAll\n@Path(\"create\")\n@POST\npublic Response create(CreateRequest request, @Context HttpHeaders hHeaders) {  \n    if (securityFilter.isUserAllowed(new String[]{\"admin\"}, hHeaders))\n    {\n        try {\n            System.out.println(\"Start of create method\");\n            User user = userService.createUser(request);\n            return getCreateResponse(user);\n        }\n        catch (Exception e){\n            return Response.status(401).entity(\"Failed to create user\").build();\n        }\n    }\n    else\n        return Response.status(401).entity(\"Access denied! User does not have permission to create user\").build();\n}\n</code></pre>\n\n<p>As you can see, an if-else statement replaces the <em>@RolesAllowed</em> annotation in this approach and my security filter is implemented slightly different.</p>\n\n<p>Also, this approach uses <a href=\"http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/HttpHeaders.html\" rel=\"nofollow noreferrer\">HttpHeaders</a> to get the request headers (in which the user ID and token are stored). <a href=\"https://stackoverflow.com/a/6504062/2541501\">The accepted answer</a> on the SO question \"<a href=\"https://stackoverflow.com/questions/6503960/how-to-received-accept-header-in-rest-web-service-server-side/6504062#6504062\">how to received &quot;Accept&quot; header in REST web service server side</a>\" helped me find <a href=\"https://wikis.oracle.com/display/Jersey/Overview+of+JAX-RS+1.0+Features\" rel=\"nofollow noreferrer\">how to get the request headers</a>.</p>\n\n<p>Furthermore, this approach works without changing anything in my <em>Backbone.js</em>- and <em>Bootstrap</em>-based web pages (i.e. my HTML and JavaScript files).</p>\n"},{"tags":[],"owner":{"account_id":1399470,"reputation":6117,"user_id":1328513,"accept_rate":53,"display_name":"Zhenya"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1692855936,"creation_date":1418993987,"answer_id":27566704,"question_id":25851374,"body_markdown":"Based on the error &quot;403&quot;, it seems to me that there is something wrong with your role query. Maybe, your login module doesn&#39;t assign &quot;admin&quot; role to your user. One thing you could do is implement a custom authentication mechanism http://undertow.io/undertow-docs/undertow-docs-1.3.0/#authentication-mechanisms (example: https://github.com/dstraub/spnego-wildfly), and modify it in such a way that you could check which roles your login module assigns to your user. Implementing custom authentication mechanism is going to take you some time, but it helps you understand better how security works in wildfly.\r\n\r\nOther thing I had to do for my Roles annotation to work is modify standalone.xml and set your security-domain as the default one.\r\n\r\nAlso, adding those lines is a step in the right direction, as for me. Without those lines annotations @RolesAllowed don&#39;t work for me.\r\n\r\n```xml\r\n&lt;context-param&gt;\r\n    &lt;param-name&gt;resteasy.role.based.security&lt;/param-name&gt;\r\n    &lt;param-value&gt;true&lt;/param-value&gt;\r\n&lt;/context-param&gt;\r\n```\r\n\r\nAlso, I would advice implementing security using web.xml only, and only after that is done, try adding @RolesAllowed. ","title":"How do I get the @RolesAllowed annotation to work for my Web application?","body":"<p>Based on the error &quot;403&quot;, it seems to me that there is something wrong with your role query. Maybe, your login module doesn't assign &quot;admin&quot; role to your user. One thing you could do is implement a custom authentication mechanism <a href=\"http://undertow.io/undertow-docs/undertow-docs-1.3.0/#authentication-mechanisms\" rel=\"nofollow noreferrer\">http://undertow.io/undertow-docs/undertow-docs-1.3.0/#authentication-mechanisms</a> (example: <a href=\"https://github.com/dstraub/spnego-wildfly\" rel=\"nofollow noreferrer\">https://github.com/dstraub/spnego-wildfly</a>), and modify it in such a way that you could check which roles your login module assigns to your user. Implementing custom authentication mechanism is going to take you some time, but it helps you understand better how security works in wildfly.</p>\n<p>Other thing I had to do for my Roles annotation to work is modify standalone.xml and set your security-domain as the default one.</p>\n<p>Also, adding those lines is a step in the right direction, as for me. Without those lines annotations @RolesAllowed don't work for me.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;context-param&gt;\n    &lt;param-name&gt;resteasy.role.based.security&lt;/param-name&gt;\n    &lt;param-value&gt;true&lt;/param-value&gt;\n&lt;/context-param&gt;\n</code></pre>\n<p>Also, I would advice implementing security using web.xml only, and only after that is done, try adding @RolesAllowed.</p>\n"},{"tags":[],"owner":{"account_id":9239413,"reputation":136,"user_id":6863070,"display_name":"tptptp"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1474534142,"creation_date":1474532386,"answer_id":39633782,"question_id":25851374,"body_markdown":"Just had the same problem. \r\n\r\nIt&#39;s the `@Stateless` annotation. The marks your class as an EJB and the container attempts to enforce EJB security.\r\n\r\nI discovered this by writing filters and my own SecurityContext, only to find that my `SecurityContext` was never referenced. \r\n\r\nRemoving `@Stateless` resulted in `getUserPrincipal()` being called on the `SecurityContext`.","title":"How do I get the @RolesAllowed annotation to work for my Web application?","body":"<p>Just had the same problem. </p>\n\n<p>It's the <code>@Stateless</code> annotation. The marks your class as an EJB and the container attempts to enforce EJB security.</p>\n\n<p>I discovered this by writing filters and my own SecurityContext, only to find that my <code>SecurityContext</code> was never referenced. </p>\n\n<p>Removing <code>@Stateless</code> resulted in <code>getUserPrincipal()</code> being called on the <code>SecurityContext</code>.</p>\n"},{"tags":[],"owner":{"account_id":9371453,"reputation":11,"user_id":6955311,"display_name":"user9371453"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645589352,"creation_date":1645526304,"answer_id":71219752,"question_id":25851374,"body_markdown":"You need to basically access the ejb from a web client\r\n\r\nYou need to add the following code to web.xml\r\n\r\n    &lt;login-config&gt;\r\n        &lt;auth-method&gt;BASIC&lt;/auth-method&gt;\r\n        &lt;realm-name&gt;ManagementRealm&lt;/realm-name&gt;\r\n    &lt;/login-config&gt;\r\n\r\nYou need to add the following code to standalone.xml\r\n\r\n     &lt;security-domain name=&quot;other&quot; cache-type=&quot;default&quot;&gt;\r\n                    &lt;authentication&gt;\r\n                        &lt;login-module code=&quot;Remoting&quot; flag=&quot;optional&quot;&gt;\r\n                            &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\r\n                        &lt;/login-module&gt;\r\n\t\t\t&lt;login-module code=&quot;RealmUsersRoles&quot; flag=&quot;required&quot;&gt;\r\n                    \t\t&lt;module-option name=&quot;usersProperties&quot; value=&quot;${jboss.server.config.dir}/application-users.properties&quot;/&gt;\r\n                    \t\t&lt;module-option name=&quot;rolesProperties&quot; value=&quot;${jboss.server.config.dir}/application-roles.properties&quot;/&gt;\r\n                    \t\t&lt;module-option name=&quot;realm&quot; value=&quot;ApplicationRealm&quot;/&gt;\r\n                    \t\t&lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\r\n                \t&lt;/login-module&gt;\r\n                        &lt;login-module code=&quot;RealmDirect&quot; flag=&quot;required&quot;&gt;\r\n                            &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\r\n                        &lt;/login-module&gt;\r\n                    &lt;/authentication&gt;\r\n                &lt;/security-domain&gt;\r\n\r\nYou can easily create an ejb bean and an ejb interface in an EJBproject\r\n\r\nThen you can access this ejb from a web project using a servlet\r\nMy servlet looks as follows:\r\n\r\n```\r\n@WebServlet(&quot;/JbossServlet&quot;)\r\npublic class JbossServlet extends HttpServlet {\r\n\tprivate static final long serialVersionUID = 1L;\r\n       \r\n    @EJB\r\n    Calculator1 calculator1;\r\n        \r\n    public JbossServlet() {}\r\n\t\r\n\tprotected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\t  \r\n        System.out.println(&quot;1 + 1 = &quot; + calculator1.add(1, 1));\r\n\t\tSystem.out.println(&quot;1 - 1 = &quot; + calculator1.subtract(1, 1));\r\n\t    System.out.println(&quot;4/2 = &quot; + calculator1.divide(4, 2));\r\n\t}\r\n\r\n\tprotected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n\t\tdoGet(request, response);\r\n\t} \t\r\n\r\n}\r\n\r\nDon&#39;t forget to create an application user using jboss-cli.bat before accessing it from the url\r\n    \r\nMy EJB3 bean looks as follows:\r\n\r\npackage org.jboss.tutorial.stateless.bean;\r\n\r\nimport java.security.Principal;\r\n\r\nimport javax.annotation.Resource;\r\nimport javax.annotation.security.PermitAll;\r\nimport javax.annotation.security.RolesAllowed;\r\nimport javax.ejb.Remote;\r\nimport javax.ejb.SessionContext;\r\nimport javax.ejb.Stateful;\r\nimport javax.ejb.TransactionAttribute;\r\nimport javax.ejb.TransactionAttributeType;\r\n\r\n\r\nimport org.jboss.logging.Logger;\r\nimport org.jboss.security.annotation.SecurityDomain;\r\n\r\n\r\n@Stateful\r\n@Remote(Calculator1.class)\r\n@SecurityDomain(&quot;Other&quot;)\r\npublic class CalculatorBean1 implements Calculator1 {\r\n\tprivate static Logger log = Logger.getLogger(CalculatorBean1.class.getName());\r\n\r\n\t  @Resource\r\n\t  private SessionContext ctx;\r\n\r\n\t  \r\n\t   @PermitAll\r\n\t   @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)\r\n\t   public int add(Integer x, Integer y)\r\n\t   {\r\n\t\t   log.info(&quot;ctx&quot;+ctx);\r\n\t      return x + y;\r\n\t   }\r\n\t   \r\n\t   @RolesAllowed({&quot;admin&quot;})\r\n\t   public int subtract(Integer x, Integer y)\r\n\t   {\r\n\t\t   log.info(&quot;inside subtract&quot;);\r\n\t\t   boolean callerInRole=ctx.isCallerInRole(&quot;admin&quot;);\r\n\t\t   Principal callerPrincipal = ctx.getCallerPrincipal();\r\n\t\t   String callerKey = callerPrincipal.getName();\r\n\t\t   log.info(&quot;callerPrincipal&quot;+callerPrincipal);\r\n\t\t   log.info(&quot;callerKey&quot;+callerKey);\r\n\t\t   log.info(&quot;callerInRole&quot;+callerInRole);\r\n\t\t   log.info(&quot;nt isCallerInRole(&#39;RoleOne&#39;): &quot; + callerInRole);\r\n\t\t   log.info(&quot;nnt CalculatorBean  subtract() called...substract= &quot;+(x-y));\r\n\t\t     return x - y;\r\n\t   }\r\n\t   \r\n\t   @RolesAllowed({&quot;admin&quot;})\r\n\t   public Integer divide(Integer x, Integer y)\r\n\t   {\r\n\t\t   log.info(&quot;inside divide&quot;);\r\n\t\t   boolean callerInRole=ctx.isCallerInRole(&quot;RoleTwo&quot;);\r\n\t\t   log.info(&quot;nt isCallerInRole(&#39;RoleTwo&#39;): &quot; + callerInRole);\r\n\t\t   log.info(&quot;nnt CalculatorBean  divide() called...divide= &quot;+(x/y));\r\n\t\t      return x / y;\r\n\t   }\r\n}\r\n    \r\nMy EJB3 interface looks as follows:    \r\n    \r\n    \r\n\r\n package org.jboss.tutorial.stateless.bean;\r\n    \r\n import javax.ejb.Remote;\r\n    \r\n    @Remote\r\n    public interface Calculator1 {\r\n    \tpublic int add(Integer a, Integer b);\r\n    \tpublic int subtract(Integer a, Integer b);\r\n    \tpublic Integer divide(Integer x, Integer y);\r\n    }\r\n\r\n\r\n\r\n","title":"How do I get the @RolesAllowed annotation to work for my Web application?","body":"<p>You need to basically access the ejb from a web client</p>\n<p>You need to add the following code to web.xml</p>\n<pre><code>&lt;login-config&gt;\n    &lt;auth-method&gt;BASIC&lt;/auth-method&gt;\n    &lt;realm-name&gt;ManagementRealm&lt;/realm-name&gt;\n&lt;/login-config&gt;\n</code></pre>\n<p>You need to add the following code to standalone.xml</p>\n<pre><code> &lt;security-domain name=&quot;other&quot; cache-type=&quot;default&quot;&gt;\n                &lt;authentication&gt;\n                    &lt;login-module code=&quot;Remoting&quot; flag=&quot;optional&quot;&gt;\n                        &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\n                    &lt;/login-module&gt;\n        &lt;login-module code=&quot;RealmUsersRoles&quot; flag=&quot;required&quot;&gt;\n                        &lt;module-option name=&quot;usersProperties&quot; value=&quot;${jboss.server.config.dir}/application-users.properties&quot;/&gt;\n                        &lt;module-option name=&quot;rolesProperties&quot; value=&quot;${jboss.server.config.dir}/application-roles.properties&quot;/&gt;\n                        &lt;module-option name=&quot;realm&quot; value=&quot;ApplicationRealm&quot;/&gt;\n                        &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\n                &lt;/login-module&gt;\n                    &lt;login-module code=&quot;RealmDirect&quot; flag=&quot;required&quot;&gt;\n                        &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\n                    &lt;/login-module&gt;\n                &lt;/authentication&gt;\n            &lt;/security-domain&gt;\n</code></pre>\n<p>You can easily create an ejb bean and an ejb interface in an EJBproject</p>\n<p>Then you can access this ejb from a web project using a servlet\nMy servlet looks as follows:</p>\n<pre><code>@WebServlet(&quot;/JbossServlet&quot;)\npublic class JbossServlet extends HttpServlet {\n    private static final long serialVersionUID = 1L;\n       \n    @EJB\n    Calculator1 calculator1;\n        \n    public JbossServlet() {}\n    \n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {     \n        System.out.println(&quot;1 + 1 = &quot; + calculator1.add(1, 1));\n        System.out.println(&quot;1 - 1 = &quot; + calculator1.subtract(1, 1));\n        System.out.println(&quot;4/2 = &quot; + calculator1.divide(4, 2));\n    }\n\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        doGet(request, response);\n    }   \n\n}\n\nDon't forget to create an application user using jboss-cli.bat before accessing it from the url\n    \nMy EJB3 bean looks as follows:\n\npackage org.jboss.tutorial.stateless.bean;\n\nimport java.security.Principal;\n\nimport javax.annotation.Resource;\nimport javax.annotation.security.PermitAll;\nimport javax.annotation.security.RolesAllowed;\nimport javax.ejb.Remote;\nimport javax.ejb.SessionContext;\nimport javax.ejb.Stateful;\nimport javax.ejb.TransactionAttribute;\nimport javax.ejb.TransactionAttributeType;\n\n\nimport org.jboss.logging.Logger;\nimport org.jboss.security.annotation.SecurityDomain;\n\n\n@Stateful\n@Remote(Calculator1.class)\n@SecurityDomain(&quot;Other&quot;)\npublic class CalculatorBean1 implements Calculator1 {\n    private static Logger log = Logger.getLogger(CalculatorBean1.class.getName());\n\n      @Resource\n      private SessionContext ctx;\n\n      \n       @PermitAll\n       @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)\n       public int add(Integer x, Integer y)\n       {\n           log.info(&quot;ctx&quot;+ctx);\n          return x + y;\n       }\n       \n       @RolesAllowed({&quot;admin&quot;})\n       public int subtract(Integer x, Integer y)\n       {\n           log.info(&quot;inside subtract&quot;);\n           boolean callerInRole=ctx.isCallerInRole(&quot;admin&quot;);\n           Principal callerPrincipal = ctx.getCallerPrincipal();\n           String callerKey = callerPrincipal.getName();\n           log.info(&quot;callerPrincipal&quot;+callerPrincipal);\n           log.info(&quot;callerKey&quot;+callerKey);\n           log.info(&quot;callerInRole&quot;+callerInRole);\n           log.info(&quot;nt isCallerInRole('RoleOne'): &quot; + callerInRole);\n           log.info(&quot;nnt CalculatorBean  subtract() called...substract= &quot;+(x-y));\n             return x - y;\n       }\n       \n       @RolesAllowed({&quot;admin&quot;})\n       public Integer divide(Integer x, Integer y)\n       {\n           log.info(&quot;inside divide&quot;);\n           boolean callerInRole=ctx.isCallerInRole(&quot;RoleTwo&quot;);\n           log.info(&quot;nt isCallerInRole('RoleTwo'): &quot; + callerInRole);\n           log.info(&quot;nnt CalculatorBean  divide() called...divide= &quot;+(x/y));\n              return x / y;\n       }\n}\n    \nMy EJB3 interface looks as follows:    \n    \n    \n\n package org.jboss.tutorial.stateless.bean;\n    \n import javax.ejb.Remote;\n    \n    @Remote\n    public interface Calculator1 {\n        public int add(Integer a, Integer b);\n        public int subtract(Integer a, Integer b);\n        public Integer divide(Integer x, Integer y);\n    }\n\n\n\n</code></pre>\n"}],"owner":{"account_id":2994769,"reputation":1310,"user_id":2541501,"accept_rate":78,"display_name":"PJvG"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56961,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"accepted_answer_id":39633782,"answer_count":5,"score":23,"last_activity_date":1692855936,"creation_date":1410794199,"question_id":25851374,"body_markdown":"I am making a Web application using Backbone.js, Bootstrap, NetBeans IDE 8.0, Java EE 7, JDK 8, WildFly server 8.1.0, JBoss RESTEasy (resteasy-jaxrs-3.0.8), JBoss 2.2.22, JBoss EJB 3.\r\n\r\nI am (relatively) new to Web development, and as such I have only just started to grasp a lot of basic concepts and technologies. I am trying to build a permission system with users and roles into a Web application, but I cannot seem to make the *@RolesAllowed annotation* to work in my RESTful Web Service. I am already working on this problem for a few days.\r\n\r\nI have a RESTful resource (Java Enterprise/Session Bean?) called *UserResource.java*, in here I have a method *create* to create a new user for the application:\r\n\r\n    import java.net.URI;\r\n    import java.security.Principal;\r\n    import java.util.List;\r\n    import javax.annotation.security.PermitAll;\r\n    import javax.annotation.security.RolesAllowed;\r\n    import javax.ejb.EJB;\r\n    import javax.ejb.Stateless;\r\n    import javax.ws.rs.*;\r\n    import javax.ws.rs.core.*;\r\n    import org.jboss.ejb3.annotation.SecurityDomain;\r\n    \r\n    @Stateless\r\n    @SecurityDomain(&quot;other&quot;)\r\n    @Path(&quot;/user&quot;)\r\n    public class UserResource {\r\n        @EJB(name = &quot;UserServiceImp&quot;)\r\n        UserService userService;\r\n        \r\n        @Context\r\n        private UriInfo uriInfo;\r\n    \r\n        @RolesAllowed({&quot;admin&quot;})\r\n        @Path(&quot;create&quot;)\r\n        @POST\r\n        public Response create(CreateRequest request) {        \r\n            try {\r\n                System.out.println(&quot;Start of create method&quot;);\r\n                User user = userService.createUser(request);\r\n                return getCreateResponse(user);\r\n            }\r\n            catch (Exception e){\r\n                return Response.status(401).entity(&quot;Failed to create user&quot;).build();\r\n            }\r\n        }\r\n    }\r\n\r\nThis *create* method works if I use the @PermitAll annotation, but it fails with an error if I use the @RolesAllowed annotation.\r\n\r\nI have this Backbone view *CreateUserView* which provides a form (in HTML) to an end user (with admin rights) for creating new users for the application. On clicking the submit button, JSON data gets send to the url &#39;rest/user/create&#39; for creating a new user. Before the *create* method in *UserResource.java* gets executed, my *SecurityInterceptor.java* (which implements *javax.ws.rs.container.ContainerRequestFilter*) checks if the user has the required permissions. I have debugged this thorough and the Security Interceptor is functioning as it should. So after the Security Interceptor gives clear access, something goes wrong in *UserResource.java*. (As a side note, not sure if this is important, but I believe the Security Interceptor is based on [this blog post about RESTEasy security][1]. I was working on the application with another guy, he initially implemented it, so I&#39;m not sure.. but it looks almost identical. Anyway that guy has moved on to another project a few weeks ago.)\r\n\r\nThe error I am getting (output from the server) is the following:\r\n\r\n    16:45:25,775 ERROR [org.jboss.as.ejb3.invocation] (default task-60) JBAS014134: EJB Invocation failed on component UserResource for method public javax.ws.rs.core.Response org.profit.pgb.rest.resource.UserResource.create(org.profit.pgb.rest.api.CreateRequest): javax.ejb.EJBAccessException: JBAS014502: Invocation on method: public javax.ws.rs.core.Response org.profit.pgb.rest.resource.UserResource.create(org.profit.pgb.rest.api.CreateRequest) of bean: UserResource is not allowed\r\n    \tat org.jboss.as.ejb3.security.AuthorizationInterceptor.processInvocation(AuthorizationInterceptor.java:135) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:95) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:55) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.invocation.ContextClassLoaderInterceptor.processInvocation(ContextClassLoaderInterceptor.java:64)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:326)\r\n    \tat org.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:448)\r\n    \tat org.jboss.invocation.AccessCheckingInterceptor.processInvocation(AccessCheckingInterceptor.java:61)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:326)\r\n    \tat org.jboss.invocation.PrivilegedWithCombinerInterceptor.processInvocation(PrivilegedWithCombinerInterceptor.java:80)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)\r\n    \tat org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:185)\r\n    \tat org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:182)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)\r\n    \tat org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:73)\r\n    \tat org.profit.pgb.rest.resource.UserResource$$$view45.create(Unknown Source) [classes:]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_11]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_11]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_11]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:483) [rt.jar:1.8.0_11]\r\n    \tat org.jboss.weld.util.reflection.Reflections.invokeAndUnwrap(Reflections.java:401) [weld-core-impl-2.1.2.Final.jar:2014-01-09 09:23]\r\n    \tat org.jboss.weld.bean.proxy.EnterpriseBeanProxyMethodHandler.invoke(EnterpriseBeanProxyMethodHandler.java:99) [weld-core-impl-2.1.2.Final.jar:2014-01-09 09:23]\r\n    \tat org.jboss.weld.bean.proxy.EnterpriseTargetBeanInstance.invoke(EnterpriseTargetBeanInstance.java:56) [weld-core-impl-2.1.2.Final.jar:2014-01-09 09:23]\r\n    \tat org.jboss.weld.bean.proxy.InjectionPointPropagatingEnterpriseTargetBeanInstance.invoke(InjectionPointPropagatingEnterpriseTargetBeanInstance.java:65) [weld-core-impl-2.1.2.Final.jar:2014-01-09 09:23]\r\n    \tat org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:100) [weld-core-impl-2.1.2.Final.jar:2014-01-09 09:23]\r\n    \tat org.profit.pgb.rest.resource.UserResource$Proxy$_$$_Weld$EnterpriseProxy$.create(Unknown Source) [classes:]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_11]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_11]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_11]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:483) [rt.jar:1.8.0_11]\r\n    \tat org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:137) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:296) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:250) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:237) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:356) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:179) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:220) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:51) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790) [jboss-servlet-api_3.1_spec-1.0.0.Final.jar:1.0.0.Final]\r\n    \tat io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:85) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:61) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:113) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:56) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.security.handlers.AuthenticationConstraintHandler.handleRequest(AuthenticationConstraintHandler.java:51) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:45) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:61) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.ServletSecurityConstraintHandler.handleRequest(ServletSecurityConstraintHandler.java:56) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:58) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:70) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.security.handlers.SecurityInitialHandler.handleRequest(SecurityInitialHandler.java:76) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:240) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:227) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:73) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:146) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.server.Connectors.executeRootHandler(Connectors.java:177) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:727) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [rt.jar:1.8.0_11]\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [rt.jar:1.8.0_11]\r\n    \tat java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_11]\r\n    \r\n    16:45:25,957 ERROR [io.undertow.request] (default task-60) UT005023: Exception handling request to /pgb/rest/user/create: org.jboss.resteasy.spi.UnhandledException: javax.ejb.EJBAccessException: JBAS014502: Invocation on method: public javax.ws.rs.core.Response org.profit.pgb.rest.resource.UserResource.create(org.profit.pgb.rest.api.CreateRequest) of bean: UserResource is not allowed\r\n    \tat org.jboss.resteasy.core.ExceptionHandler.handleApplicationException(ExceptionHandler.java:76) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.core.ExceptionHandler.handleException(ExceptionHandler.java:212) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.core.SynchronousDispatcher.writeException(SynchronousDispatcher.java:149) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:372) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:179) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:220) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:51) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790) [jboss-servlet-api_3.1_spec-1.0.0.Final.jar:1.0.0.Final]\r\n    \tat io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:85) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:61) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:113) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:56) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.security.handlers.AuthenticationConstraintHandler.handleRequest(AuthenticationConstraintHandler.java:51) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:45) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:61) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.ServletSecurityConstraintHandler.handleRequest(ServletSecurityConstraintHandler.java:56) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:58) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:70) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.security.handlers.SecurityInitialHandler.handleRequest(SecurityInitialHandler.java:76) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:240) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:227) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:73) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:146) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.server.Connectors.executeRootHandler(Connectors.java:177) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:727) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [rt.jar:1.8.0_11]\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [rt.jar:1.8.0_11]\r\n    \tat java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_11]\r\n    Caused by: javax.ejb.EJBAccessException: JBAS014502: Invocation on method: public javax.ws.rs.core.Response org.profit.pgb.rest.resource.UserResource.create(org.profit.pgb.rest.api.CreateRequest) of bean: UserResource is not allowed\r\n    \tat org.jboss.as.ejb3.security.AuthorizationInterceptor.processInvocation(AuthorizationInterceptor.java:135) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:95) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat ... etc. (not fully shown due to SO&#39;s character limit on questions..)\r\n\r\nI&#39;ve seen other people ask similar questions, some which remain unanswered to this day (e.g. https://stackoverflow.com/questions/19863311/jax-rs-service-rolesallowed-annotation-throwing-exception) and others which have solutions that either do not work for me or maybe I do not apply the solution correctly (e.g. https://stackoverflow.com/questions/24591782/resteasy-support-for-jax-rs-rolesallowed).\r\n\r\nI found this: https://developer.jboss.org/thread/177728?start=0&amp;tstart=0 (titled: *&quot;@RolesAllowed, @DenyAll require presence of org.jboss.ejb3.annotation.SecurityDomain?&quot;*), In tried the solution but I cannot get it to work for my project. Not sure if the solution is not applicable for my situation or if I&#39;m just doing it wrong.\r\n\r\nI found this: https://developer.jboss.org/message/720815 (titled: *&quot;is this a defect for processing org.jboss.ejb3.annotation.SecurityDomain ?&quot;*), but I do not understand where my *jboss-ejb-client.properties* are supposed to be. I think they set their project up quite different from me. So no luck with that.\r\n\r\nI found [a guide on EJB3 security][2], as suggested there, I provided the following code in my *standalone.xml*-file:\r\n\r\n    &lt;security-domain name=&quot;other&quot; cache-type=&quot;default&quot;&gt;\r\n        &lt;authentication&gt;\r\n            &lt;login-module code=&quot;Remoting&quot; flag=&quot;optional&quot;&gt;\r\n                &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\r\n            &lt;/login-module&gt;\r\n            &lt;login-module code=&quot;RealmDirect&quot; flag=&quot;required&quot;&gt;\r\n                &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\r\n            &lt;/login-module&gt;\r\n        &lt;/authentication&gt;\r\n    &lt;/security-domain&gt;\r\n\r\nBut that did not solve anything at all. I am not sure if it did anything.\r\n\r\nFinally, I found this SO question: https://stackoverflow.com/questions/24591782/resteasy-support-for-jax-rs-rolesallowed (which references to the &lt;a href=&quot;http://docs.jboss.org/resteasy/docs/3.0.5.Final/userguide/html/Securing_JAX-RS_and_RESTeasy.html&quot;&gt;RESTEasy Documentation&lt;/a&gt;). Even though I also mentioned this question a few paragraphs up as containing a solution that does not work for me, it did change the error to another error. As suggested there I added a *&amp;lt;context-param&amp;gt;*-block to my *web.xml*-file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app version=&quot;2.5&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;&gt;\r\n        &lt;security-constraint&gt;\r\n            &lt;web-resource-collection&gt;\r\n                &lt;web-resource-name&gt;PGB&lt;/web-resource-name&gt;\r\n                &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n                &lt;http-method&gt;GET&lt;/http-method&gt;\r\n                &lt;http-method&gt;POST&lt;/http-method&gt;\r\n            &lt;/web-resource-collection&gt;\r\n    \r\n            &lt;user-data-constraint&gt;\r\n                &lt;!-- use of SSL is required when CONFIDENTIAL is specified --&gt;\r\n                &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;\r\n            &lt;/user-data-constraint&gt;\r\n        &lt;/security-constraint&gt;\r\n        \r\n        &lt;context-param&gt;\r\n          &lt;param-name&gt;resteasy.role.based.security&lt;/param-name&gt;\r\n          &lt;param-value&gt;true&lt;/param-value&gt;\r\n       &lt;/context-param&gt;\r\n    &lt;/web-app&gt;\r\n\r\nWhich results in the following error if I try to create a new user (not completely posted here due to character limit of SO questions):\r\n\r\n    16:58:45,992 WARN  [org.jboss.resteasy.core.ExceptionHandler] (default task-61) failed to execute: javax.ws.rs.ForbiddenException: HTTP 403 Forbidden\r\n    \tat org.jboss.resteasy.plugins.interceptors.RoleBasedSecurityFilter.filter(RoleBasedSecurityFilter.java:45) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat ... etc.\r\n\r\nThis error is not very helpful either, in fact, I find even less information when I search on that error than when I search on the previous error. So, I am not sure if that is a step into the right direction. What is better to have returned from the server? A status 500 (Internal Server Error) or a status 403 (Forbidden)? Also, if after applying that &quot;solution&quot; I change the annotation to @PermitAll, then the creation of a new user works just as before, so it didn&#39;t really make the situation any worse.\r\n\r\nHowever, I can find [the source code of RoleBasedSecurityFilter][3], which shows that it throws the `ForbiddenException`. It shows that a certain *isUserInRole* method must return true, but it does not do that in my application. I can&#39;t get it to return true. It makes me wonder, https://stackoverflow.com/q/26039920/2541501\r\n\r\nI also found the following SO question: https://stackoverflow.com/questions/15188895/rolesallowed-cannot-be-resolved-with-jersey, which is answered by Abhijit Sarkar, and he refers to [an IBM article][4]. Maybe the solution to my problem lies in there, but I have not found it yet.. Anyway, it is suggested there that either adding a *security-role* block to my *web.xml*-file or adding a *@DeclareRoles* annotation to my *UserResource.java* file should solve the problem, but the HTTP 403 Forbidden warning still remains after I do so. It is very frustrating.\r\n\r\nMy *security-role* block (in web.xml) looks as follows:\r\n\r\n    &lt;security-role id=&quot;role_admin&quot;&gt;\r\n        &lt;description&gt;This is role 1 (admin)&lt;/description&gt;\r\n        &lt;role-name&gt;admin&lt;/role-name&gt;\r\n    &lt;/security-role&gt;\r\n\r\nAnd I added the following *security-constraint* block (in web.xml): (note the *auth-constraint*)\r\n\r\n    &lt;security-constraint&gt;\r\n        &lt;web-resource-collection&gt;\r\n            &lt;web-resource-name&gt;PGB&lt;/web-resource-name&gt;\r\n            &lt;url-pattern&gt;/rest/user/create&lt;/url-pattern&gt;\r\n            &lt;http-method&gt;GET&lt;/http-method&gt;\r\n            &lt;http-method&gt;POST&lt;/http-method&gt;\r\n        &lt;/web-resource-collection&gt;\r\n        &lt;auth-constraint id=&quot;AuthConstraint_createUser&quot;&gt;\r\n            &lt;description&gt; Only admin can create a new user&lt;/description&gt;\r\n            &lt;role-name&gt;admin&lt;/role-name&gt;\r\n        &lt;/auth-constraint&gt;\r\n        &lt;user-data-constraint&gt;\r\n            &lt;!-- use of SSL is required when CONFIDENTIAL is specified --&gt;\r\n            &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;\r\n        &lt;/user-data-constraint&gt;\r\n    &lt;/security-constraint&gt;\r\n\r\nI realize now that my problem lies either in the deployment descriptors (*web.xml*) or the server configuration (WildFly&#39;s *standalone-full.xml*).\r\n\r\nI added a `login-config` element (with [FORM authentication][5]) to my *web.xml* file. Changed my login HTML page to fit [the required format][6]. I followed some of the step of this article on [migrating a Java EE App from GlassFish to WildFly][6], but I think I still did something wrong because I always get at the login error page when trying to log in with valid user credentials.\r\n\r\nSee here the `security-domain` element I added to my WildFly configuration:\r\n\r\n    &lt;security-domain name=&quot;app&quot; cache-type=&quot;default&quot;&gt;\r\n        &lt;authentication&gt;\r\n            &lt;login-module code=&quot;Database&quot; flag=&quot;required&quot;&gt;\r\n                &lt;module-option name=&quot;dsJndiName&quot; value=&quot;java:jboss/datasources/mySQL_pool_rel&quot;/&gt;\r\n                &lt;module-option name=&quot;principalsQuery&quot; value=&quot;select hashed_password from user where email_address=?&quot;/&gt;\r\n                &lt;module-option name=&quot;rolesQuery&quot; value=&quot;select role_name, &#39;Roles&#39; from role r inner join user u on r.role_type = u.role_type where u.email_address = ?&quot;/&gt;\r\n                &lt;module-option name=&quot;hashAlgorithm&quot; value=&quot;SHA-256&quot;/&gt;\r\n                &lt;module-option name=&quot;hashEncoding&quot; value=&quot;BASE64&quot;/&gt;\r\n                &lt;module-option name=&quot;unauthenticatedIdentity&quot; value=&quot;guest&quot;/&gt;\r\n            &lt;/login-module&gt;\r\n            &lt;login-module code=&quot;RoleMapping&quot; flag=&quot;required&quot;&gt;\r\n                 &lt;module-option name=&quot;rolesProperties&quot; value=&quot;file:${jboss.server.config.dir}/app.properties&quot;/&gt;\r\n                 &lt;module-option name=&quot;replaceRole&quot; value=&quot;false&quot;/&gt;\r\n            &lt;/login-module&gt;\r\n        &lt;/authentication&gt;\r\n    &lt;/security-domain&gt;\r\n\r\nI think something is wrong with my *rolesQuery* defined there, but I can&#39;t figure out what.\r\n\r\nI would love to know how to implement role-based security for my Web application. Therefore, I also accept other approaches to role-based security, as long as it works. Suggestions are welcome.\r\n\r\nI also placed [my question on developer.jboss.org][7], but I also got no response there yet.\r\n\r\nI provided one workaround solution to my problem as an answer to this question, but it is not a real solution (as explained in that answer). I am still interested in doing this the right way.\r\n\r\n\r\n  [1]: http://howtodoinjava.com/2013/07/25/jax-rs-2-0-resteasy-3-0-2-final-security-tutorial/\r\n  [2]: https://github.com/jboss-eap/quickstart/tree/master-eap6/ejb-security\r\n  [3]: https://github.com/resteasy/Resteasy/blob/master/jaxrs/resteasy-jaxrs/src/main/java/org/jboss/resteasy/plugins/interceptors/RoleBasedSecurityFilter.java\r\n  [4]: http://www-01.ibm.com/support/knowledgecenter/SSAW57_8.5.5/com.ibm.websphere.nd.multiplatform.doc/ae/twbs_jaxrs_impl_securejaxrs_webcont.html?cp=SSAW57_8.5.5%2F3-3-0-42-3-0\r\n  [5]: http://docs.oracle.com/cd/E19798-01/821-1841/bncbn/index.html\r\n  [6]: http://docs.oracle.com/cd/E19798-01/821-1841/bncca/index.html\r\n  [7]: https://developer.jboss.org/thread/248877","title":"How do I get the @RolesAllowed annotation to work for my Web application?","body":"<p>I am making a Web application using Backbone.js, Bootstrap, NetBeans IDE 8.0, Java EE 7, JDK 8, WildFly server 8.1.0, JBoss RESTEasy (resteasy-jaxrs-3.0.8), JBoss 2.2.22, JBoss EJB 3.</p>\n\n<p>I am (relatively) new to Web development, and as such I have only just started to grasp a lot of basic concepts and technologies. I am trying to build a permission system with users and roles into a Web application, but I cannot seem to make the <em>@RolesAllowed annotation</em> to work in my RESTful Web Service. I am already working on this problem for a few days.</p>\n\n<p>I have a RESTful resource (Java Enterprise/Session Bean?) called <em>UserResource.java</em>, in here I have a method <em>create</em> to create a new user for the application:</p>\n\n<pre><code>import java.net.URI;\nimport java.security.Principal;\nimport java.util.List;\nimport javax.annotation.security.PermitAll;\nimport javax.annotation.security.RolesAllowed;\nimport javax.ejb.EJB;\nimport javax.ejb.Stateless;\nimport javax.ws.rs.*;\nimport javax.ws.rs.core.*;\nimport org.jboss.ejb3.annotation.SecurityDomain;\n\n@Stateless\n@SecurityDomain(\"other\")\n@Path(\"/user\")\npublic class UserResource {\n    @EJB(name = \"UserServiceImp\")\n    UserService userService;\n\n    @Context\n    private UriInfo uriInfo;\n\n    @RolesAllowed({\"admin\"})\n    @Path(\"create\")\n    @POST\n    public Response create(CreateRequest request) {        \n        try {\n            System.out.println(\"Start of create method\");\n            User user = userService.createUser(request);\n            return getCreateResponse(user);\n        }\n        catch (Exception e){\n            return Response.status(401).entity(\"Failed to create user\").build();\n        }\n    }\n}\n</code></pre>\n\n<p>This <em>create</em> method works if I use the @PermitAll annotation, but it fails with an error if I use the @RolesAllowed annotation.</p>\n\n<p>I have this Backbone view <em>CreateUserView</em> which provides a form (in HTML) to an end user (with admin rights) for creating new users for the application. On clicking the submit button, JSON data gets send to the url 'rest/user/create' for creating a new user. Before the <em>create</em> method in <em>UserResource.java</em> gets executed, my <em>SecurityInterceptor.java</em> (which implements <em>javax.ws.rs.container.ContainerRequestFilter</em>) checks if the user has the required permissions. I have debugged this thorough and the Security Interceptor is functioning as it should. So after the Security Interceptor gives clear access, something goes wrong in <em>UserResource.java</em>. (As a side note, not sure if this is important, but I believe the Security Interceptor is based on <a href=\"http://howtodoinjava.com/2013/07/25/jax-rs-2-0-resteasy-3-0-2-final-security-tutorial/\" rel=\"noreferrer\">this blog post about RESTEasy security</a>. I was working on the application with another guy, he initially implemented it, so I'm not sure.. but it looks almost identical. Anyway that guy has moved on to another project a few weeks ago.)</p>\n\n<p>The error I am getting (output from the server) is the following:</p>\n\n<pre><code>16:45:25,775 ERROR [org.jboss.as.ejb3.invocation] (default task-60) JBAS014134: EJB Invocation failed on component UserResource for method public javax.ws.rs.core.Response org.profit.pgb.rest.resource.UserResource.create(org.profit.pgb.rest.api.CreateRequest): javax.ejb.EJBAccessException: JBAS014502: Invocation on method: public javax.ws.rs.core.Response org.profit.pgb.rest.resource.UserResource.create(org.profit.pgb.rest.api.CreateRequest) of bean: UserResource is not allowed\n    at org.jboss.as.ejb3.security.AuthorizationInterceptor.processInvocation(AuthorizationInterceptor.java:135) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:95) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:55) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.invocation.ContextClassLoaderInterceptor.processInvocation(ContextClassLoaderInterceptor.java:64)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:326)\n    at org.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:448)\n    at org.jboss.invocation.AccessCheckingInterceptor.processInvocation(AccessCheckingInterceptor.java:61)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:326)\n    at org.jboss.invocation.PrivilegedWithCombinerInterceptor.processInvocation(PrivilegedWithCombinerInterceptor.java:80)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)\n    at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:185)\n    at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:182)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)\n    at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:73)\n    at org.profit.pgb.rest.resource.UserResource$$$view45.create(Unknown Source) [classes:]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_11]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_11]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_11]\n    at java.lang.reflect.Method.invoke(Method.java:483) [rt.jar:1.8.0_11]\n    at org.jboss.weld.util.reflection.Reflections.invokeAndUnwrap(Reflections.java:401) [weld-core-impl-2.1.2.Final.jar:2014-01-09 09:23]\n    at org.jboss.weld.bean.proxy.EnterpriseBeanProxyMethodHandler.invoke(EnterpriseBeanProxyMethodHandler.java:99) [weld-core-impl-2.1.2.Final.jar:2014-01-09 09:23]\n    at org.jboss.weld.bean.proxy.EnterpriseTargetBeanInstance.invoke(EnterpriseTargetBeanInstance.java:56) [weld-core-impl-2.1.2.Final.jar:2014-01-09 09:23]\n    at org.jboss.weld.bean.proxy.InjectionPointPropagatingEnterpriseTargetBeanInstance.invoke(InjectionPointPropagatingEnterpriseTargetBeanInstance.java:65) [weld-core-impl-2.1.2.Final.jar:2014-01-09 09:23]\n    at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:100) [weld-core-impl-2.1.2.Final.jar:2014-01-09 09:23]\n    at org.profit.pgb.rest.resource.UserResource$Proxy$_$$_Weld$EnterpriseProxy$.create(Unknown Source) [classes:]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_11]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_11]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_11]\n    at java.lang.reflect.Method.invoke(Method.java:483) [rt.jar:1.8.0_11]\n    at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:137) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:296) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:250) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:237) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:356) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:179) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:220) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:51) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) [jboss-servlet-api_3.1_spec-1.0.0.Final.jar:1.0.0.Final]\n    at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:85) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:61) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:113) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:56) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.security.handlers.AuthenticationConstraintHandler.handleRequest(AuthenticationConstraintHandler.java:51) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:45) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:61) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.ServletSecurityConstraintHandler.handleRequest(ServletSecurityConstraintHandler.java:56) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:58) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:70) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.security.handlers.SecurityInitialHandler.handleRequest(SecurityInitialHandler.java:76) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:240) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:227) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:73) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:146) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.server.Connectors.executeRootHandler(Connectors.java:177) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:727) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [rt.jar:1.8.0_11]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [rt.jar:1.8.0_11]\n    at java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_11]\n\n16:45:25,957 ERROR [io.undertow.request] (default task-60) UT005023: Exception handling request to /pgb/rest/user/create: org.jboss.resteasy.spi.UnhandledException: javax.ejb.EJBAccessException: JBAS014502: Invocation on method: public javax.ws.rs.core.Response org.profit.pgb.rest.resource.UserResource.create(org.profit.pgb.rest.api.CreateRequest) of bean: UserResource is not allowed\n    at org.jboss.resteasy.core.ExceptionHandler.handleApplicationException(ExceptionHandler.java:76) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.core.ExceptionHandler.handleException(ExceptionHandler.java:212) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.core.SynchronousDispatcher.writeException(SynchronousDispatcher.java:149) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:372) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:179) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:220) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:51) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) [jboss-servlet-api_3.1_spec-1.0.0.Final.jar:1.0.0.Final]\n    at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:85) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:61) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:113) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:56) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.security.handlers.AuthenticationConstraintHandler.handleRequest(AuthenticationConstraintHandler.java:51) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:45) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:61) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.ServletSecurityConstraintHandler.handleRequest(ServletSecurityConstraintHandler.java:56) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:58) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:70) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.security.handlers.SecurityInitialHandler.handleRequest(SecurityInitialHandler.java:76) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:240) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:227) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:73) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:146) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.server.Connectors.executeRootHandler(Connectors.java:177) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:727) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [rt.jar:1.8.0_11]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [rt.jar:1.8.0_11]\n    at java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_11]\nCaused by: javax.ejb.EJBAccessException: JBAS014502: Invocation on method: public javax.ws.rs.core.Response org.profit.pgb.rest.resource.UserResource.create(org.profit.pgb.rest.api.CreateRequest) of bean: UserResource is not allowed\n    at org.jboss.as.ejb3.security.AuthorizationInterceptor.processInvocation(AuthorizationInterceptor.java:135) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:95) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at ... etc. (not fully shown due to SO's character limit on questions..)\n</code></pre>\n\n<p>I've seen other people ask similar questions, some which remain unanswered to this day (e.g. <a href=\"https://stackoverflow.com/questions/19863311/jax-rs-service-rolesallowed-annotation-throwing-exception\">jax-rs service RolesAllowed Annotation throwing exception</a>) and others which have solutions that either do not work for me or maybe I do not apply the solution correctly (e.g. <a href=\"https://stackoverflow.com/questions/24591782/resteasy-support-for-jax-rs-rolesallowed\">RESTEasy support for JAX-RS @RolesAllowed</a>).</p>\n\n<p>I found this: <a href=\"https://developer.jboss.org/thread/177728?start=0&amp;tstart=0\" rel=\"noreferrer\">https://developer.jboss.org/thread/177728?start=0&amp;tstart=0</a> (titled: <em>\"@RolesAllowed, @DenyAll require presence of org.jboss.ejb3.annotation.SecurityDomain?\"</em>), In tried the solution but I cannot get it to work for my project. Not sure if the solution is not applicable for my situation or if I'm just doing it wrong.</p>\n\n<p>I found this: <a href=\"https://developer.jboss.org/message/720815\" rel=\"noreferrer\">https://developer.jboss.org/message/720815</a> (titled: <em>\"is this a defect for processing org.jboss.ejb3.annotation.SecurityDomain ?\"</em>), but I do not understand where my <em>jboss-ejb-client.properties</em> are supposed to be. I think they set their project up quite different from me. So no luck with that.</p>\n\n<p>I found <a href=\"https://github.com/jboss-eap/quickstart/tree/master-eap6/ejb-security\" rel=\"noreferrer\">a guide on EJB3 security</a>, as suggested there, I provided the following code in my <em>standalone.xml</em>-file:</p>\n\n<pre><code>&lt;security-domain name=\"other\" cache-type=\"default\"&gt;\n    &lt;authentication&gt;\n        &lt;login-module code=\"Remoting\" flag=\"optional\"&gt;\n            &lt;module-option name=\"password-stacking\" value=\"useFirstPass\"/&gt;\n        &lt;/login-module&gt;\n        &lt;login-module code=\"RealmDirect\" flag=\"required\"&gt;\n            &lt;module-option name=\"password-stacking\" value=\"useFirstPass\"/&gt;\n        &lt;/login-module&gt;\n    &lt;/authentication&gt;\n&lt;/security-domain&gt;\n</code></pre>\n\n<p>But that did not solve anything at all. I am not sure if it did anything.</p>\n\n<p>Finally, I found this SO question: <a href=\"https://stackoverflow.com/questions/24591782/resteasy-support-for-jax-rs-rolesallowed\">RESTEasy support for JAX-RS @RolesAllowed</a> (which references to the <a href=\"http://docs.jboss.org/resteasy/docs/3.0.5.Final/userguide/html/Securing_JAX-RS_and_RESTeasy.html\" rel=\"noreferrer\">RESTEasy Documentation</a>). Even though I also mentioned this question a few paragraphs up as containing a solution that does not work for me, it did change the error to another error. As suggested there I added a <em>&lt;context-param&gt;</em>-block to my <em>web.xml</em>-file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app version=\"2.5\" xmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"&gt;\n    &lt;security-constraint&gt;\n        &lt;web-resource-collection&gt;\n            &lt;web-resource-name&gt;PGB&lt;/web-resource-name&gt;\n            &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n            &lt;http-method&gt;GET&lt;/http-method&gt;\n            &lt;http-method&gt;POST&lt;/http-method&gt;\n        &lt;/web-resource-collection&gt;\n\n        &lt;user-data-constraint&gt;\n            &lt;!-- use of SSL is required when CONFIDENTIAL is specified --&gt;\n            &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;\n        &lt;/user-data-constraint&gt;\n    &lt;/security-constraint&gt;\n\n    &lt;context-param&gt;\n      &lt;param-name&gt;resteasy.role.based.security&lt;/param-name&gt;\n      &lt;param-value&gt;true&lt;/param-value&gt;\n   &lt;/context-param&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p>Which results in the following error if I try to create a new user (not completely posted here due to character limit of SO questions):</p>\n\n<pre><code>16:58:45,992 WARN  [org.jboss.resteasy.core.ExceptionHandler] (default task-61) failed to execute: javax.ws.rs.ForbiddenException: HTTP 403 Forbidden\n    at org.jboss.resteasy.plugins.interceptors.RoleBasedSecurityFilter.filter(RoleBasedSecurityFilter.java:45) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at ... etc.\n</code></pre>\n\n<p>This error is not very helpful either, in fact, I find even less information when I search on that error than when I search on the previous error. So, I am not sure if that is a step into the right direction. What is better to have returned from the server? A status 500 (Internal Server Error) or a status 403 (Forbidden)? Also, if after applying that \"solution\" I change the annotation to @PermitAll, then the creation of a new user works just as before, so it didn't really make the situation any worse.</p>\n\n<p>However, I can find <a href=\"https://github.com/resteasy/Resteasy/blob/master/jaxrs/resteasy-jaxrs/src/main/java/org/jboss/resteasy/plugins/interceptors/RoleBasedSecurityFilter.java\" rel=\"noreferrer\">the source code of RoleBasedSecurityFilter</a>, which shows that it throws the <code>ForbiddenException</code>. It shows that a certain <em>isUserInRole</em> method must return true, but it does not do that in my application. I can't get it to return true. It makes me wonder, <a href=\"https://stackoverflow.com/q/26039920/2541501\">Is it possible to disable RoleBasedSecurityFilter.java of RESTEasy?</a></p>\n\n<p>I also found the following SO question: <a href=\"https://stackoverflow.com/questions/15188895/rolesallowed-cannot-be-resolved-with-jersey\">@RolesAllowed cannot be resolved with Jersey</a>, which is answered by Abhijit Sarkar, and he refers to <a href=\"http://www-01.ibm.com/support/knowledgecenter/SSAW57_8.5.5/com.ibm.websphere.nd.multiplatform.doc/ae/twbs_jaxrs_impl_securejaxrs_webcont.html?cp=SSAW57_8.5.5%2F3-3-0-42-3-0\" rel=\"noreferrer\">an IBM article</a>. Maybe the solution to my problem lies in there, but I have not found it yet.. Anyway, it is suggested there that either adding a <em>security-role</em> block to my <em>web.xml</em>-file or adding a <em>@DeclareRoles</em> annotation to my <em>UserResource.java</em> file should solve the problem, but the HTTP 403 Forbidden warning still remains after I do so. It is very frustrating.</p>\n\n<p>My <em>security-role</em> block (in web.xml) looks as follows:</p>\n\n<pre><code>&lt;security-role id=\"role_admin\"&gt;\n    &lt;description&gt;This is role 1 (admin)&lt;/description&gt;\n    &lt;role-name&gt;admin&lt;/role-name&gt;\n&lt;/security-role&gt;\n</code></pre>\n\n<p>And I added the following <em>security-constraint</em> block (in web.xml): (note the <em>auth-constraint</em>)</p>\n\n<pre><code>&lt;security-constraint&gt;\n    &lt;web-resource-collection&gt;\n        &lt;web-resource-name&gt;PGB&lt;/web-resource-name&gt;\n        &lt;url-pattern&gt;/rest/user/create&lt;/url-pattern&gt;\n        &lt;http-method&gt;GET&lt;/http-method&gt;\n        &lt;http-method&gt;POST&lt;/http-method&gt;\n    &lt;/web-resource-collection&gt;\n    &lt;auth-constraint id=\"AuthConstraint_createUser\"&gt;\n        &lt;description&gt; Only admin can create a new user&lt;/description&gt;\n        &lt;role-name&gt;admin&lt;/role-name&gt;\n    &lt;/auth-constraint&gt;\n    &lt;user-data-constraint&gt;\n        &lt;!-- use of SSL is required when CONFIDENTIAL is specified --&gt;\n        &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;\n    &lt;/user-data-constraint&gt;\n&lt;/security-constraint&gt;\n</code></pre>\n\n<p>I realize now that my problem lies either in the deployment descriptors (<em>web.xml</em>) or the server configuration (WildFly's <em>standalone-full.xml</em>).</p>\n\n<p>I added a <code>login-config</code> element (with <a href=\"http://docs.oracle.com/cd/E19798-01/821-1841/bncbn/index.html\" rel=\"noreferrer\">FORM authentication</a>) to my <em>web.xml</em> file. Changed my login HTML page to fit <a href=\"http://docs.oracle.com/cd/E19798-01/821-1841/bncca/index.html\" rel=\"noreferrer\">the required format</a>. I followed some of the step of this article on <a href=\"http://docs.oracle.com/cd/E19798-01/821-1841/bncca/index.html\" rel=\"noreferrer\">migrating a Java EE App from GlassFish to WildFly</a>, but I think I still did something wrong because I always get at the login error page when trying to log in with valid user credentials.</p>\n\n<p>See here the <code>security-domain</code> element I added to my WildFly configuration:</p>\n\n<pre><code>&lt;security-domain name=\"app\" cache-type=\"default\"&gt;\n    &lt;authentication&gt;\n        &lt;login-module code=\"Database\" flag=\"required\"&gt;\n            &lt;module-option name=\"dsJndiName\" value=\"java:jboss/datasources/mySQL_pool_rel\"/&gt;\n            &lt;module-option name=\"principalsQuery\" value=\"select hashed_password from user where email_address=?\"/&gt;\n            &lt;module-option name=\"rolesQuery\" value=\"select role_name, 'Roles' from role r inner join user u on r.role_type = u.role_type where u.email_address = ?\"/&gt;\n            &lt;module-option name=\"hashAlgorithm\" value=\"SHA-256\"/&gt;\n            &lt;module-option name=\"hashEncoding\" value=\"BASE64\"/&gt;\n            &lt;module-option name=\"unauthenticatedIdentity\" value=\"guest\"/&gt;\n        &lt;/login-module&gt;\n        &lt;login-module code=\"RoleMapping\" flag=\"required\"&gt;\n             &lt;module-option name=\"rolesProperties\" value=\"file:${jboss.server.config.dir}/app.properties\"/&gt;\n             &lt;module-option name=\"replaceRole\" value=\"false\"/&gt;\n        &lt;/login-module&gt;\n    &lt;/authentication&gt;\n&lt;/security-domain&gt;\n</code></pre>\n\n<p>I think something is wrong with my <em>rolesQuery</em> defined there, but I can't figure out what.</p>\n\n<p>I would love to know how to implement role-based security for my Web application. Therefore, I also accept other approaches to role-based security, as long as it works. Suggestions are welcome.</p>\n\n<p>I also placed <a href=\"https://developer.jboss.org/thread/248877\" rel=\"noreferrer\">my question on developer.jboss.org</a>, but I also got no response there yet.</p>\n\n<p>I provided one workaround solution to my problem as an answer to this question, but it is not a real solution (as explained in that answer). I am still interested in doing this the right way.</p>\n"},{"tags":["java","groovy","spring-security","jersey","jersey-2.0"],"comments":[{"owner":{"account_id":140755,"reputation":1420,"user_id":347304,"accept_rate":60,"display_name":"JSager"},"score":0,"creation_date":1391627352,"post_id":21586070,"comment_id":32609623,"body_markdown":"I may be off base with the thought that it&#39;s bean scope causing the problem. I used @Scope(&quot;request&quot;) and confirmed with a println that I get a new instance of Equipment with every request but UriInfo is still null. Tried it as session scope, same instance, still null. I may just be barking up the wrong tree here.","body":"I may be off base with the thought that it&#39;s bean scope causing the problem. I used @Scope(&quot;request&quot;) and confirmed with a println that I get a new instance of Equipment with every request but UriInfo is still null. Tried it as session scope, same instance, still null. I may just be barking up the wrong tree here."}],"answers":[{"tags":[],"owner":{"account_id":140755,"reputation":1420,"user_id":347304,"accept_rate":60,"display_name":"JSager"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1391628449,"creation_date":1391628449,"answer_id":21586648,"question_id":21586070,"body_markdown":"So, I&#39;ve come up with a solution that gets me around my problem and I&#39;m leaving it here for posterity. The answer doesn&#39;t satisfy the &quot;why&quot; of it all, but it does get my application working and it&#39;s not really a munge.\r\n\r\nInstead of injecting UriInfo at the class level, I inject it at the method level. I got the idea from [here][1]. Their explanation is that if a method signature might get modified, inject it there. I guess Spring Security is doing that, but I don&#39;t understand why that would break something injected at the class level.\r\n\r\nWorking code for posterity:\r\n\r\n    @PreAuthorize(&quot;hasAnyRole(&#39;ROLE_ANALYST&#39;, &#39;ROLE_DEVELOPER&#39;)&quot;)\r\n\t@GET\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    public def list(@Context UriInfo ui) {\r\n    \t...\r\n    }\r\n\r\n\r\n  [1]: http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.base.doc/info/aes/ae/twbs_jaxrs_contextobjects_uri.html","title":"Spring Security @PreAuthorize breaks Jersey @Context UriInfo injection","body":"<p>So, I've come up with a solution that gets me around my problem and I'm leaving it here for posterity. The answer doesn't satisfy the \"why\" of it all, but it does get my application working and it's not really a munge.</p>\n\n<p>Instead of injecting UriInfo at the class level, I inject it at the method level. I got the idea from <a href=\"http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.base.doc/info/aes/ae/twbs_jaxrs_contextobjects_uri.html\" rel=\"nofollow\">here</a>. Their explanation is that if a method signature might get modified, inject it there. I guess Spring Security is doing that, but I don't understand why that would break something injected at the class level.</p>\n\n<p>Working code for posterity:</p>\n\n<pre><code>@PreAuthorize(\"hasAnyRole('ROLE_ANALYST', 'ROLE_DEVELOPER')\")\n@GET\n@Produces(MediaType.APPLICATION_JSON)\npublic def list(@Context UriInfo ui) {\n    ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3984023,"reputation":43,"user_id":3285194,"display_name":"Richard"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692855420,"creation_date":1438083186,"answer_id":31675097,"question_id":21586070,"body_markdown":"I&#39;ve run into this same issue and been fighting with it for a couple of weeks now.  The suggested workaround isn&#39;t practical for my uses though.\r\n\r\nAnother workaround I&#39;ve seen suggested is to move the @PreAuthorize annotation down to the service layer (or some other application layer) instead of using it directly on the REST resource.  That solution isn&#39;t practical for me either, but thought I&#39;d add it as another possibility.","title":"Spring Security @PreAuthorize breaks Jersey @Context UriInfo injection","body":"<p>I've run into this same issue and been fighting with it for a couple of weeks now.  The suggested workaround isn't practical for my uses though.</p>\n<p>Another workaround I've seen suggested is to move the @PreAuthorize annotation down to the service layer (or some other application layer) instead of using it directly on the REST resource.  That solution isn't practical for me either, but thought I'd add it as another possibility.</p>\n"}],"owner":{"account_id":140755,"reputation":1420,"user_id":347304,"accept_rate":60,"display_name":"JSager"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1621,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":21586648,"answer_count":2,"score":2,"last_activity_date":1692855420,"creation_date":1391626619,"question_id":21586070,"body_markdown":"I have a problem with a Jersey/Spring RESTful web application I&#39;m building. I want to use the @PreAuthorize annotation to secure my endpoints. However, I need to have access to the UriInfo because I do work with the query parameters.\r\n\r\nEverything works fine until I secure the method, then suddenly my UriInfo is null. I&#39;m fairly certain this has to do with how @PreAuthorize is causing things to be scoped - no longer at the request level.\r\n\r\n    @Component\r\n    @Path(&quot;/equipment&quot;)\r\n    public class Equipment\r\n    {\r\n    \t@Context \r\n    \tUriInfo ui;\r\n    \r\n    \t@PreAuthorize(&quot;hasAnyRole(&#39;ROLE_ANALYST&#39;, &#39;ROLE_DEVELOPER&#39;)&quot;)\r\n    \t@GET\r\n        @Produces(MediaType.APPLICATION_JSON)\r\n        public def list() {\r\n        \tprintln ui\r\n        \treturn [:]\r\n        }\r\n    \r\n    }\r\n\r\nThe simple class below will print &quot;null&quot;.\r\n\r\nIf you remove the @PreAuthorize annotation, you get the expected result - org.glassfish.jersey.internal.inject.UriInfoInjectee@23b21e3\r\n\r\nBased on things I&#39;ve seen in other questions, let me say in advance my application context already has this line: \r\n\r\n`&lt;security:global-method-security pre-post-annotations=&quot;enabled&quot;/&gt;`\r\n\r\nand the authorization part is working perfectly. It&#39;s just the injection of UriInfo that&#39;s failing.\r\n\r\nI am using Spring 3.1.4 and Jersey 2.3. Code provided is in Groovy but that&#39;s not the problem.\r\n\r\nThank you for your help.","title":"Spring Security @PreAuthorize breaks Jersey @Context UriInfo injection","body":"<p>I have a problem with a Jersey/Spring RESTful web application I'm building. I want to use the @PreAuthorize annotation to secure my endpoints. However, I need to have access to the UriInfo because I do work with the query parameters.</p>\n\n<p>Everything works fine until I secure the method, then suddenly my UriInfo is null. I'm fairly certain this has to do with how @PreAuthorize is causing things to be scoped - no longer at the request level.</p>\n\n<pre><code>@Component\n@Path(\"/equipment\")\npublic class Equipment\n{\n    @Context \n    UriInfo ui;\n\n    @PreAuthorize(\"hasAnyRole('ROLE_ANALYST', 'ROLE_DEVELOPER')\")\n    @GET\n    @Produces(MediaType.APPLICATION_JSON)\n    public def list() {\n        println ui\n        return [:]\n    }\n\n}\n</code></pre>\n\n<p>The simple class below will print \"null\".</p>\n\n<p>If you remove the @PreAuthorize annotation, you get the expected result - org.glassfish.jersey.internal.inject.UriInfoInjectee@23b21e3</p>\n\n<p>Based on things I've seen in other questions, let me say in advance my application context already has this line: </p>\n\n<p><code>&lt;security:global-method-security pre-post-annotations=\"enabled\"/&gt;</code></p>\n\n<p>and the authorization part is working perfectly. It's just the injection of UriInfo that's failing.</p>\n\n<p>I am using Spring 3.1.4 and Jersey 2.3. Code provided is in Groovy but that's not the problem.</p>\n\n<p>Thank you for your help.</p>\n"},{"tags":["java","regex","parsing"],"comments":[{"owner":{"account_id":55050,"reputation":190509,"user_id":164835,"accept_rate":80,"display_name":"Kent"},"score":0,"creation_date":1360545385,"post_id":14804591,"comment_id":20735444,"body_markdown":"if the text part has no quotes/brackets etc. how can you distinguish if a text has something like &quot;we have answered 100yes!&quot; or you mean the text can only contain [a-zA-Z]?","body":"if the text part has no quotes/brackets etc. how can you distinguish if a text has something like &quot;we have answered 100yes!&quot; or you mean the text can only contain [a-zA-Z]?"},{"owner":{"account_id":2350143,"reputation":1117,"user_id":2059238,"accept_rate":44,"display_name":"Karan Goel"},"score":0,"creation_date":1360545493,"post_id":14804591,"comment_id":20735458,"body_markdown":"Well that is part of the problem. I should have mentioned, the text can start/end with number. Would it help if you modify the text to include a tab after yes/no to distinguish between the terms?","body":"Well that is part of the problem. I should have mentioned, the text can start/end with number. Would it help if you modify the text to include a tab after yes/no to distinguish between the terms?"},{"owner":{"account_id":214928,"reputation":9307,"user_id":469201,"accept_rate":67,"display_name":"davidbuzatto"},"score":0,"creation_date":1360545499,"post_id":14804591,"comment_id":20735462,"body_markdown":"May you post more examples of what you need to parse? A list of some examples would be good.","body":"May you post more examples of what you need to parse? A list of some examples would be good."},{"owner":{"account_id":55050,"reputation":190509,"user_id":164835,"accept_rate":80,"display_name":"Kent"},"score":0,"creation_date":1360545589,"post_id":14804591,"comment_id":20735476,"body_markdown":"The problem is I don&#39;t know where is the right &quot;yes/no&quot;! How can I modifiy the text?","body":"The problem is I don&#39;t know where is the right &quot;yes/no&quot;! How can I modifiy the text?"},{"owner":{"account_id":2350143,"reputation":1117,"user_id":2059238,"accept_rate":44,"display_name":"Karan Goel"},"score":0,"creation_date":1360545668,"post_id":14804591,"comment_id":20735486,"body_markdown":"@Kent We always have a yes/no after a number. (That number is later used as index of an array). So it might be useful to say that the number, yes/no and text after that all are needed and cannot be dropped.","body":"@Kent We always have a yes/no after a number. (That number is later used as index of an array). So it might be useful to say that the number, yes/no and text after that all are needed and cannot be dropped."},{"owner":{"account_id":214928,"reputation":9307,"user_id":469201,"accept_rate":67,"display_name":"davidbuzatto"},"score":0,"creation_date":1360545726,"post_id":14804591,"comment_id":20735501,"body_markdown":"@user2059238: Wait a moment, I&#39;m writing some code.","body":"@user2059238: Wait a moment, I&#39;m writing some code."},{"owner":{"account_id":55050,"reputation":190509,"user_id":164835,"accept_rate":80,"display_name":"Kent"},"score":0,"creation_date":1360545818,"post_id":14804591,"comment_id":20735515,"body_markdown":"@user2059238 from your example, apart from computer program, I even cannot parse your text with my eye/brain.... what if your text part has number+yes.../no... pattern as well?","body":"@user2059238 from your example, apart from computer program, I even cannot parse your text with my eye/brain.... what if your text part has number+yes.../no... pattern as well?"},{"owner":{"account_id":2350143,"reputation":1117,"user_id":2059238,"accept_rate":44,"display_name":"Karan Goel"},"score":0,"creation_date":1360545910,"post_id":14804591,"comment_id":20735533,"body_markdown":"@Kent Well, it&#39;s basically like this: `number` `yes|no` `text(may/may not be there)` repeated. I&#39;m sorry but I&#39;m not sure how else can I clarify it.","body":"@Kent Well, it&#39;s basically like this: <code>number</code> <code>yes|no</code> <code>text(may&#47;may not be there)</code> repeated. I&#39;m sorry but I&#39;m not sure how else can I clarify it."},{"owner":{"account_id":55050,"reputation":190509,"user_id":164835,"accept_rate":80,"display_name":"Kent"},"score":0,"creation_date":1360546090,"post_id":14804591,"comment_id":20735574,"body_markdown":"let&#39;s say, is there a rule that your text part doesn&#39;t contain `number+yes|no` pattern? for example &quot;303notes&quot;","body":"let&#39;s say, is there a rule that your text part doesn&#39;t contain <code>number+yes|no</code> pattern? for example &quot;303notes&quot;"},{"owner":{"account_id":2350143,"reputation":1117,"user_id":2059238,"accept_rate":44,"display_name":"Karan Goel"},"score":0,"creation_date":1360546293,"post_id":14804591,"comment_id":20735610,"body_markdown":"In your example, 303notes = `303` is the index (number), `no` is the yes/no part, `tes` is the text. However, if the input was 303no404yes =  `303` is the index (number), `no` is the yes/no part, `` is the text, `404` is the index (number), `yes` is the yes/no part, `` is the text","body":"In your example, 303notes = <code>303</code> is the index (number), <code>no</code> is the yes/no part, <code>tes</code> is the text. However, if the input was 303no404yes =  <code>303</code> is the index (number), <code>no</code> is the yes/no part, `` is the text, <code>404</code> is the index (number), <code>yes</code> is the yes/no part, `` is the text"},{"owner":{"account_id":214928,"reputation":9307,"user_id":469201,"accept_rate":67,"display_name":"davidbuzatto"},"score":0,"creation_date":1360546878,"post_id":14804591,"comment_id":20735706,"body_markdown":"Almost there... Wait a little more...","body":"Almost there... Wait a little more..."},{"owner":{"account_id":55050,"reputation":190509,"user_id":164835,"accept_rate":80,"display_name":"Kent"},"score":0,"creation_date":1360546952,"post_id":14804591,"comment_id":20735724,"body_markdown":"@user2059238 you could simply answer &quot;no, text part doesn&#39;t contain indexyes|no pattern&quot;","body":"@user2059238 you could simply answer &quot;no, text part doesn&#39;t contain indexyes|no pattern&quot;"},{"owner":{"account_id":2350143,"reputation":1117,"user_id":2059238,"accept_rate":44,"display_name":"Karan Goel"},"score":0,"creation_date":1360547801,"post_id":14804591,"comment_id":20735871,"body_markdown":"I think this might be helpful: Every number before yes/no is 1 more than the previous number before yes/no, always!","body":"I think this might be helpful: Every number before yes/no is 1 more than the previous number before yes/no, always!"}],"answers":[{"tags":[],"owner":{"account_id":214928,"reputation":9307,"user_id":469201,"accept_rate":67,"display_name":"davidbuzatto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1360548254,"creation_date":1360547784,"answer_id":14804883,"question_id":14804591,"body_markdown":"Try this. I think it will work.  In the end of the parsing, you will have a List of Answers. Now, you just need to make some modifications to return this List and use its answers. My algorithm just detects all the answers and where they start in the main String and with this information, slice the text. So, the algorithm have two steps (1: bounds detection, 2: string slicing). I made some comnents in my code. Hope it works.\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n\r\n    /**\r\n     *\r\n     * @author David Buzatto\r\n     */\r\n    public class ASimpleParser {\r\n\r\n        public static void main( String[] args ) {\r\n            new ASimpleParser().exec();\r\n        }\r\n\r\n        public void exec() {\r\n\r\n            String[] in = {\r\n                &quot;30no31yesapproximately 278 billion miles from anything.32no33no34no&quot;,\r\n                &quot;30no31yesapproximately 278 billion miles from anything32no33yessince the invention of call waiting34yesGravity is a contributing factor in 73 percent of all accidents involving falling objects.&quot;,\r\n                &quot;35yesanybody who owns hideous clothing36yes if you take it from another person&#39;s plate37yes172 miles per hour upside down38yesonly more intelligent39yes any product including floor wax that has fat in it&quot;,\r\n                &quot;35no36yestake it from another person&#39;s plate37yes172 miles per hour upside down38no39no&quot;,\r\n                &quot;35no36no37yes172 miles per hour38no39no&quot;,\r\n                &quot;35no36no37yesupside down38no39no&quot;\r\n            };\r\n\r\n            Pattern p = Pattern.compile( &quot;(\\\\d+)(yes|no)&quot; );\r\n            List&lt;Answer&gt; allAnswers = new ArrayList&lt;Answer&gt;();\r\n\r\n            for ( String s : in ) {\r\n\r\n                List&lt;Answer&gt; answers = new ArrayList&lt;Answer&gt;();\r\n                Matcher m = p.matcher( s );\r\n\r\n                // step 1: detecting answer bounds (start)\r\n                while ( m.find() ) {\r\n\r\n                    Answer a = new Answer();\r\n                    a.answerStart = m.group();\r\n                    a.number = m.group( 1 );\r\n                    a.yesOrNo = m.group( 2 );\r\n                    a.startAt = s.indexOf( a.answerStart );\r\n\r\n                    answers.add( a );\r\n\r\n                }\r\n\r\n                // step 2: slicing\r\n                for ( int i = 0; i &lt; answers.size(); i++ ) {\r\n\r\n                    Answer a = answers.get( i );\r\n\r\n                    // needs to compare to the right one, the will have the right bounds\r\n                    if ( i != answers.size() - 1 ) {\r\n\r\n                        Answer rightAnswer = answers.get( i + 1 );\r\n                        a.text = s.substring( a.startAt + a.answerStart.length(), rightAnswer.startAt );\r\n\r\n                    } else { // int the last answer, the right bound is the end of the main String. s.length() may be ommited.\r\n\r\n                        a.text = s.substring( a.startAt + a.answerStart.length(), s.length() );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                allAnswers.addAll( answers );\r\n\r\n            }\r\n\r\n            // just iterating over the answers to show them.\r\n            for ( Answer a : allAnswers ) {\r\n                System.out.println( a );\r\n            }\r\n\r\n        }\r\n\r\n        // a private class to contain the answers data\r\n        private class Answer {\r\n\r\n            String answerStart;\r\n            String number;\r\n            String yesOrNo;\r\n            String text;\r\n            int startAt;\r\n\r\n            @Override\r\n            public String toString() {\r\n                return &quot;Answer{&quot; + &quot;number=&quot; + number + &quot;, answer=&quot; + yesOrNo + &quot;, text=&quot; + text + &quot;, startAt=&quot; + startAt + &#39;}&#39;;\r\n            }\r\n\r\n        }\r\n\r\n    }","title":"How can I parse this kind of text?","body":"<p>Try this. I think it will work.  In the end of the parsing, you will have a List of Answers. Now, you just need to make some modifications to return this List and use its answers. My algorithm just detects all the answers and where they start in the main String and with this information, slice the text. So, the algorithm have two steps (1: bounds detection, 2: string slicing). I made some comnents in my code. Hope it works.</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\n/**\n *\n * @author David Buzatto\n */\npublic class ASimpleParser {\n\n    public static void main( String[] args ) {\n        new ASimpleParser().exec();\n    }\n\n    public void exec() {\n\n        String[] in = {\n            \"30no31yesapproximately 278 billion miles from anything.32no33no34no\",\n            \"30no31yesapproximately 278 billion miles from anything32no33yessince the invention of call waiting34yesGravity is a contributing factor in 73 percent of all accidents involving falling objects.\",\n            \"35yesanybody who owns hideous clothing36yes if you take it from another person's plate37yes172 miles per hour upside down38yesonly more intelligent39yes any product including floor wax that has fat in it\",\n            \"35no36yestake it from another person's plate37yes172 miles per hour upside down38no39no\",\n            \"35no36no37yes172 miles per hour38no39no\",\n            \"35no36no37yesupside down38no39no\"\n        };\n\n        Pattern p = Pattern.compile( \"(\\\\d+)(yes|no)\" );\n        List&lt;Answer&gt; allAnswers = new ArrayList&lt;Answer&gt;();\n\n        for ( String s : in ) {\n\n            List&lt;Answer&gt; answers = new ArrayList&lt;Answer&gt;();\n            Matcher m = p.matcher( s );\n\n            // step 1: detecting answer bounds (start)\n            while ( m.find() ) {\n\n                Answer a = new Answer();\n                a.answerStart = m.group();\n                a.number = m.group( 1 );\n                a.yesOrNo = m.group( 2 );\n                a.startAt = s.indexOf( a.answerStart );\n\n                answers.add( a );\n\n            }\n\n            // step 2: slicing\n            for ( int i = 0; i &lt; answers.size(); i++ ) {\n\n                Answer a = answers.get( i );\n\n                // needs to compare to the right one, the will have the right bounds\n                if ( i != answers.size() - 1 ) {\n\n                    Answer rightAnswer = answers.get( i + 1 );\n                    a.text = s.substring( a.startAt + a.answerStart.length(), rightAnswer.startAt );\n\n                } else { // int the last answer, the right bound is the end of the main String. s.length() may be ommited.\n\n                    a.text = s.substring( a.startAt + a.answerStart.length(), s.length() );\n\n                }\n\n            }\n\n            allAnswers.addAll( answers );\n\n        }\n\n        // just iterating over the answers to show them.\n        for ( Answer a : allAnswers ) {\n            System.out.println( a );\n        }\n\n    }\n\n    // a private class to contain the answers data\n    private class Answer {\n\n        String answerStart;\n        String number;\n        String yesOrNo;\n        String text;\n        int startAt;\n\n        @Override\n        public String toString() {\n            return \"Answer{\" + \"number=\" + number + \", answer=\" + yesOrNo + \", text=\" + text + \", startAt=\" + startAt + '}';\n        }\n\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":2350143,"reputation":1117,"user_id":2059238,"accept_rate":44,"display_name":"Karan Goel"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":14804883,"answer_count":1,"score":2,"last_activity_date":1692855205,"creation_date":1360544939,"question_id":14804591,"body_markdown":"This is the format my text is in:\r\n\r\n    15no16no17yes the parents who have older children always tell you the next stage is worse.18yes using only their hands and feet make some of the worst movies in the history of the world.19no\r\n\r\nSo the basic format is this:\r\n\r\n`number` `yes|no` `text(may/may not be there)` repeated\r\n\r\nThe text after `yes` or `no` can be empty, or can start with a space. (I have tried to illustrate this above).\r\n\r\nThe code I have works for this format: \r\n`number` `yes|no` repeated\r\n\r\nMore examples of text to parse:\r\n\r\n    30no31yesapproximately 278 billion miles from anything.32no33no34no\r\n    30no31yesapproximately 278 billion miles from anything32no33yessince the invention of call waiting34yesGravity is a contributing factor in 73 percent of all accidents involving falling objects.\r\n    35yesanybody who owns hideous clothing36yes if you take it from another person&#39;s plate37yes172 miles per hour upside down38yesonly more intelligent39yes any product including floor wax that has fat in it\r\n    35no36yestake it from another person&#39;s plate37yes172 miles per hour upside down38no39no\r\n    35no36no37yes172 miles per hour38no39no\r\n    35no36no37yesupside down38no39no\r\n\r\nHow do I modify my code?\r\n\r\n    String regex = &quot;^(\\\\d+)(yes|no)&quot;;\r\n    Pattern p = Pattern.compile(regex);\r\n\r\n\t\twhile(input.hasNextLine()) {\r\n         String line = input.nextLine();\r\n\t\t\tString myStr = line;\r\n\t\t\tMatcher m = p.matcher(myStr);\r\n\t\t\t\t\t\t\r\n\t\t\twhile(m.find()) {\r\n\t\t\t\tString all = m.group();\r\n       \t\tString digits = m.group(1);\r\n        \t\tString bool = m.group(2);\r\n\t\t\t\t// do stuff\r\n\t\t\t\tmyStr = myStr.substring(all.length());\r\n        \t\tm.reset(myStr);\r\n\t\t\t} // end while\r\n\t\t} // end while\r\n\r\nI tried using `String regex = &quot;^(\\\\d+)(yes|no)(.*)&quot;;` but the problem is that it captures everything after a `yes` or `no`. \r\n\r\nWhat do I do?\r\n\r\nPS: Please let me know if anything is unclear and I&#39;ll provide more explanations.","title":"How can I parse this kind of text?","body":"<p>This is the format my text is in:</p>\n\n<pre><code>15no16no17yes the parents who have older children always tell you the next stage is worse.18yes using only their hands and feet make some of the worst movies in the history of the world.19no\n</code></pre>\n\n<p>So the basic format is this:</p>\n\n<p><code>number</code> <code>yes|no</code> <code>text(may/may not be there)</code> repeated</p>\n\n<p>The text after <code>yes</code> or <code>no</code> can be empty, or can start with a space. (I have tried to illustrate this above).</p>\n\n<p>The code I have works for this format: \n<code>number</code> <code>yes|no</code> repeated</p>\n\n<p>More examples of text to parse:</p>\n\n<pre><code>30no31yesapproximately 278 billion miles from anything.32no33no34no\n30no31yesapproximately 278 billion miles from anything32no33yessince the invention of call waiting34yesGravity is a contributing factor in 73 percent of all accidents involving falling objects.\n35yesanybody who owns hideous clothing36yes if you take it from another person's plate37yes172 miles per hour upside down38yesonly more intelligent39yes any product including floor wax that has fat in it\n35no36yestake it from another person's plate37yes172 miles per hour upside down38no39no\n35no36no37yes172 miles per hour38no39no\n35no36no37yesupside down38no39no\n</code></pre>\n\n<p>How do I modify my code?</p>\n\n<pre><code>String regex = \"^(\\\\d+)(yes|no)\";\nPattern p = Pattern.compile(regex);\n\n    while(input.hasNextLine()) {\n     String line = input.nextLine();\n        String myStr = line;\n        Matcher m = p.matcher(myStr);\n\n        while(m.find()) {\n            String all = m.group();\n        String digits = m.group(1);\n            String bool = m.group(2);\n            // do stuff\n            myStr = myStr.substring(all.length());\n            m.reset(myStr);\n        } // end while\n    } // end while\n</code></pre>\n\n<p>I tried using <code>String regex = \"^(\\\\d+)(yes|no)(.*)\";</code> but the problem is that it captures everything after a <code>yes</code> or <code>no</code>. </p>\n\n<p>What do I do?</p>\n\n<p>PS: Please let me know if anything is unclear and I'll provide more explanations.</p>\n"},{"tags":["java","spring","spring-security","jax-rs","cxf"],"comments":[{"owner":{"account_id":1528364,"reputation":125594,"user_id":1426227,"accept_rate":79,"display_name":"cassiomolin"},"score":0,"creation_date":1445355810,"post_id":33240443,"comment_id":54284657,"body_markdown":"Possible duplicate of [Can I use @RolesAllowed on RESTful Resources implemented on Apache CXF?](http://stackoverflow.com/questions/16433315/can-i-use-rolesallowed-on-restful-resources-implemented-on-apache-cxf)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/16433315/can-i-use-rolesallowed-on-restful-resources-implemented-on-apache-cxf\">Can I use @RolesAllowed on RESTful Resources implemented on Apache CXF?</a>"}],"answers":[{"tags":[],"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1692846231,"creation_date":1445365463,"answer_id":33244066,"question_id":33240443,"body_markdown":"I found four work-arounds:\r\n\r\n1. Extended Interface\r\n\r\n        @Path(&quot;/myresource&quot;)\r\n        public interface MyResource {\r\n\r\n            @Context \r\n            public void setSecurityContext(Security securityContext); \r\n\r\n            @GET\r\n            @Produces(MediaType.TEXT_XML)\r\n            String get();\r\n        }\r\n    \r\n        @Named\r\n        public class MyResourceImpl implements MyResource {\r\n    \r\n            private SecurityContext securityContext;\r\n\r\n            @Override\r\n            public void setSecurityContext(Security securityContext) { \r\n                this.securityContext = securityContext\r\n            }\r\n\r\n            @Override\r\n            @RolesAllowed(&quot;ROLE_user&quot;)\r\n            public String get() {\r\n                return securityContext.getUserPrincipal().getName();\r\n            }\r\n        }\r\n\r\n    But this solution is not perfect, because my [client](https://cxf.apache.org/docs/jax-rs-client-api.html#JAXRSClientAPI-Proxy-basedAPI) should not see implementation details.\r\n\r\n2. [Dedicated interface](http://cxf.547215.n5.nabble.com/IllegalArgumentException-for-UriInfo-context-injection-td5718839.html)\r\n\r\n    If I add a second interface with a public setter for `SecurityContext`, Apache CXF could inject the [JDK proxy](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-introduction-proxies) with `SecurityContext`.\r\n\r\n        public interface ContextAware { \r\n\r\n            @Context \r\n            public void setSecurityContext(Security securityContext); \r\n        } \r\n\r\n        @Path(&quot;/myresource&quot;)\r\n        public interface MyResource {\r\n\r\n            @GET\r\n            @Produces(MediaType.TEXT_XML)\r\n            String get();\r\n        }\r\n    \r\n        @Named\r\n        public class MyResourceImpl implements MyResource, ContextAware  {\r\n    \r\n            private SecurityContext securityContext;\r\n\r\n            @Override\r\n            public void setSecurityContext(Security securityContext) { \r\n                this.securityContext = securityContext\r\n            }\r\n\r\n            @Override\r\n            @RolesAllowed(&quot;ROLE_user&quot;)\r\n            public String get() {\r\n                return securityContext.getUserPrincipal().getName();\r\n            }\r\n        }\r\n\r\n3. [CGLIB proxy without interface](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-introduction-proxies)\r\n\r\n    If I remove the interface Spring uses a CGLIB proxy. \r\n\r\n        @Named\r\n        @Path(&quot;/myresource&quot;)\r\n        public class MyResourceImpl {\r\n\r\n            @Context\r\n            private SecurityContext securityContext;\r\n\r\n            @RolesAllowed(&quot;ROLE_superadmin&quot;)\r\n            @GET\r\n            @Produces(MediaType.TEXT_XML)\r\n            public String get() {\r\n                return securityContext.getUserPrincipal().getName();\r\n            }\r\n        }\r\n\r\n    But this solution is not good, because my [client](http://cxf.apache.org/docs/jax-rs-client-api.html#JAX-RSClientAPI-Proxy-basedAPI) should not see implementation details. And my client should not need implementation dependencies.\r\n\r\n4. [CGLIB proxy with interface](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-proxying)\r\n\r\n        @Path(&quot;/myresource&quot;)\r\n        public interface MyResource {\r\n\r\n            @GET\r\n            @Produces(MediaType.TEXT_XML)\r\n            String get();\r\n        }\r\n    \r\n        @Named\r\n        public class MyResourceImpl implements MyResource {\r\n        \r\n            @Context\r\n            private SecurityContext securityContext;\r\n        \r\n            @Override\r\n            @RolesAllowed(&quot;ROLE_user&quot;)\r\n            public String get() {\r\n                return securityContext.getUserPrincipal().getName();\r\n            }\r\n        }","title":"Combining @Context and @RolesAllowed in a JAX-RS resource?","body":"<p>I found four work-arounds:</p>\n<ol>\n<li><p>Extended Interface</p>\n<pre><code> @Path(&quot;/myresource&quot;)\n public interface MyResource {\n\n     @Context \n     public void setSecurityContext(Security securityContext); \n\n     @GET\n     @Produces(MediaType.TEXT_XML)\n     String get();\n }\n\n @Named\n public class MyResourceImpl implements MyResource {\n\n     private SecurityContext securityContext;\n\n     @Override\n     public void setSecurityContext(Security securityContext) { \n         this.securityContext = securityContext\n     }\n\n     @Override\n     @RolesAllowed(&quot;ROLE_user&quot;)\n     public String get() {\n         return securityContext.getUserPrincipal().getName();\n     }\n }\n</code></pre>\n<p>But this solution is not perfect, because my <a href=\"https://cxf.apache.org/docs/jax-rs-client-api.html#JAXRSClientAPI-Proxy-basedAPI\" rel=\"nofollow noreferrer\">client</a> should not see implementation details.</p>\n</li>\n<li><p><a href=\"http://cxf.547215.n5.nabble.com/IllegalArgumentException-for-UriInfo-context-injection-td5718839.html\" rel=\"nofollow noreferrer\">Dedicated interface</a></p>\n<p>If I add a second interface with a public setter for <code>SecurityContext</code>, Apache CXF could inject the <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-introduction-proxies\" rel=\"nofollow noreferrer\">JDK proxy</a> with <code>SecurityContext</code>.</p>\n<pre><code> public interface ContextAware { \n\n     @Context \n     public void setSecurityContext(Security securityContext); \n } \n\n @Path(&quot;/myresource&quot;)\n public interface MyResource {\n\n     @GET\n     @Produces(MediaType.TEXT_XML)\n     String get();\n }\n\n @Named\n public class MyResourceImpl implements MyResource, ContextAware  {\n\n     private SecurityContext securityContext;\n\n     @Override\n     public void setSecurityContext(Security securityContext) { \n         this.securityContext = securityContext\n     }\n\n     @Override\n     @RolesAllowed(&quot;ROLE_user&quot;)\n     public String get() {\n         return securityContext.getUserPrincipal().getName();\n     }\n }\n</code></pre>\n</li>\n<li><p><a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-introduction-proxies\" rel=\"nofollow noreferrer\">CGLIB proxy without interface</a></p>\n<p>If I remove the interface Spring uses a CGLIB proxy.</p>\n<pre><code> @Named\n @Path(&quot;/myresource&quot;)\n public class MyResourceImpl {\n\n     @Context\n     private SecurityContext securityContext;\n\n     @RolesAllowed(&quot;ROLE_superadmin&quot;)\n     @GET\n     @Produces(MediaType.TEXT_XML)\n     public String get() {\n         return securityContext.getUserPrincipal().getName();\n     }\n }\n</code></pre>\n<p>But this solution is not good, because my <a href=\"http://cxf.apache.org/docs/jax-rs-client-api.html#JAX-RSClientAPI-Proxy-basedAPI\" rel=\"nofollow noreferrer\">client</a> should not see implementation details. And my client should not need implementation dependencies.</p>\n</li>\n<li><p><a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-proxying\" rel=\"nofollow noreferrer\">CGLIB proxy with interface</a></p>\n<pre><code> @Path(&quot;/myresource&quot;)\n public interface MyResource {\n\n     @GET\n     @Produces(MediaType.TEXT_XML)\n     String get();\n }\n\n @Named\n public class MyResourceImpl implements MyResource {\n\n     @Context\n     private SecurityContext securityContext;\n\n     @Override\n     @RolesAllowed(&quot;ROLE_user&quot;)\n     public String get() {\n         return securityContext.getUserPrincipal().getName();\n     }\n }\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":50874,"reputation":2522,"user_id":151845,"accept_rate":75,"display_name":"pioto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692855147,"creation_date":1571427887,"answer_id":58457270,"question_id":33240443,"body_markdown":"I took a slight variation on the solution from @dur. Instead of having the `@Context` as a field, I passed it as a parameter to my method that needed it (I was using `SecurityContext`):\r\n\r\n```java\r\n@Path(&quot;/myresource&quot;)\r\npublic interface MyResource {\r\n    @GET\r\n    @Produces(MediaType.TEXT_XML)\r\n    String get(@Context SecurityContext securityContext);\r\n}\r\n\r\n@Named\r\npublic class MyResourceImpl implements MyResource {\r\n    @Override\r\n    @RolesAllowed(&quot;ROLE_user&quot;)\r\n    public String get(SecurityContext securityContext) {\r\n        return securityContext.getUserPrincipal().getName();\r\n    }\r\n}\r\n```","title":"Combining @Context and @RolesAllowed in a JAX-RS resource?","body":"<p>I took a slight variation on the solution from @dur. Instead of having the <code>@Context</code> as a field, I passed it as a parameter to my method that needed it (I was using <code>SecurityContext</code>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Path(&quot;/myresource&quot;)\npublic interface MyResource {\n    @GET\n    @Produces(MediaType.TEXT_XML)\n    String get(@Context SecurityContext securityContext);\n}\n\n@Named\npublic class MyResourceImpl implements MyResource {\n    @Override\n    @RolesAllowed(&quot;ROLE_user&quot;)\n    public String get(SecurityContext securityContext) {\n        return securityContext.getUserPrincipal().getName();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1288,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":33244066,"answer_count":2,"score":3,"last_activity_date":1692855147,"creation_date":1445354232,"question_id":33240443,"body_markdown":"Is it possible to use [Context](http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/Context.html) annotation and [RolesAllowed](https://docs.oracle.com/javaee/6/api/javax/annotation/security/RolesAllowed.html) annotation in a JAX-RS resource with Apache CXF 2.4.6 and Spring Security 3.2.8?\r\n\r\nMy CXF configuration:\r\n\r\n```xml\r\n&lt;jaxrs:server address=&quot;/example&quot;&gt;\r\n    &lt;jaxrs:serviceBeans&gt;\r\n        &lt;ref bean=&quot;myResourceImpl&quot;/&gt;\r\n    &lt;/jaxrs:serviceBeans&gt;\r\n&lt;/jaxrs:server&gt;\r\n```\r\n\r\nMy Java source code:\r\n\r\n```java\r\n@Path(&quot;/myresource&quot;)\r\npublic interface MyResource {\r\n\r\n    @GET\r\n    @Produces(MediaType.TEXT_XML)\r\n    String get();\r\n}\r\n\r\n@Named\r\npublic class MyResourceImpl implements MyResource {\r\n\r\n    @Context\r\n    private SecurityContext securityContext;\r\n\r\n    @Override\r\n    @RolesAllowed(&quot;ROLE_user&quot;)\r\n    public String get() {\r\n        return securityContext.getUserPrincipal().getName();\r\n    }\r\n}\r\n```\r\n\r\nAfter starting the server, I get the following exception:\r\n\r\n```lang-text\r\nCaused by: java.lang.IllegalArgumentException: Can not set javax.ws.rs.core.SecurityContext field MyResourceImpl.securityContext to com.sun.proxy.$Proxy473\r\n    at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:164)\r\n    at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:168)\r\n    at sun.reflect.UnsafeFieldAccessorImpl.ensureObj(UnsafeFieldAccessorImpl.java:55)\r\n    at sun.reflect.UnsafeObjectFieldAccessorImpl.set(UnsafeObjectFieldAccessorImpl.java:75)\r\n    at java.lang.reflect.Field.set(Field.java:741)\r\n    at org.apache.cxf.jaxrs.utils.InjectionUtils$1.run(InjectionUtils.java:164)\r\n    at java.security.AccessController.doPrivileged(Native Method)\r\n    at org.apache.cxf.jaxrs.utils.InjectionUtils.injectFieldValue(InjectionUtils.java:160)\r\n    at org.apache.cxf.jaxrs.utils.InjectionUtils.injectContextProxiesAndApplication(InjectionUtils.java:912)\r\n    at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.injectContexts(JAXRSServerFactoryBean.java:354)\r\n    at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.updateClassResourceProviders(JAXRSServerFactoryBean.java:380)\r\n    at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.create(JAXRSServerFactoryBean.java:145)\r\n    ... 59 more\r\n```\r\n\r\nIf I remove one of the annotations, it works fine. \r\n\r\nThe problem seems to be that Spring creates a [proxy](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-introduction-proxies) and Apache CXF cannot inject that proxy with the [SecurityContext](https://docs.oracle.com/javaee/6/api/javax/ws/rs/core/SecurityContext.html).\r\n\r\nI have to use Spring Security and cannot use [container-based security](https://docs.oracle.com/javaee/6/tutorial/doc/bnbxe.html).","title":"Combining @Context and @RolesAllowed in a JAX-RS resource?","body":"<p>Is it possible to use <a href=\"http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/Context.html\" rel=\"nofollow noreferrer\">Context</a> annotation and <a href=\"https://docs.oracle.com/javaee/6/api/javax/annotation/security/RolesAllowed.html\" rel=\"nofollow noreferrer\">RolesAllowed</a> annotation in a JAX-RS resource with Apache CXF 2.4.6 and Spring Security 3.2.8?</p>\n<p>My CXF configuration:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;jaxrs:server address=&quot;/example&quot;&gt;\n    &lt;jaxrs:serviceBeans&gt;\n        &lt;ref bean=&quot;myResourceImpl&quot;/&gt;\n    &lt;/jaxrs:serviceBeans&gt;\n&lt;/jaxrs:server&gt;\n</code></pre>\n<p>My Java source code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Path(&quot;/myresource&quot;)\npublic interface MyResource {\n\n    @GET\n    @Produces(MediaType.TEXT_XML)\n    String get();\n}\n\n@Named\npublic class MyResourceImpl implements MyResource {\n\n    @Context\n    private SecurityContext securityContext;\n\n    @Override\n    @RolesAllowed(&quot;ROLE_user&quot;)\n    public String get() {\n        return securityContext.getUserPrincipal().getName();\n    }\n}\n</code></pre>\n<p>After starting the server, I get the following exception:</p>\n<pre class=\"lang-text prettyprint-override\"><code>Caused by: java.lang.IllegalArgumentException: Can not set javax.ws.rs.core.SecurityContext field MyResourceImpl.securityContext to com.sun.proxy.$Proxy473\n    at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:164)\n    at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:168)\n    at sun.reflect.UnsafeFieldAccessorImpl.ensureObj(UnsafeFieldAccessorImpl.java:55)\n    at sun.reflect.UnsafeObjectFieldAccessorImpl.set(UnsafeObjectFieldAccessorImpl.java:75)\n    at java.lang.reflect.Field.set(Field.java:741)\n    at org.apache.cxf.jaxrs.utils.InjectionUtils$1.run(InjectionUtils.java:164)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at org.apache.cxf.jaxrs.utils.InjectionUtils.injectFieldValue(InjectionUtils.java:160)\n    at org.apache.cxf.jaxrs.utils.InjectionUtils.injectContextProxiesAndApplication(InjectionUtils.java:912)\n    at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.injectContexts(JAXRSServerFactoryBean.java:354)\n    at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.updateClassResourceProviders(JAXRSServerFactoryBean.java:380)\n    at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.create(JAXRSServerFactoryBean.java:145)\n    ... 59 more\n</code></pre>\n<p>If I remove one of the annotations, it works fine.</p>\n<p>The problem seems to be that Spring creates a <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-introduction-proxies\" rel=\"nofollow noreferrer\">proxy</a> and Apache CXF cannot inject that proxy with the <a href=\"https://docs.oracle.com/javaee/6/api/javax/ws/rs/core/SecurityContext.html\" rel=\"nofollow noreferrer\">SecurityContext</a>.</p>\n<p>I have to use Spring Security and cannot use <a href=\"https://docs.oracle.com/javaee/6/tutorial/doc/bnbxe.html\" rel=\"nofollow noreferrer\">container-based security</a>.</p>\n"},{"tags":["java","regex","grammar"],"answers":[{"tags":[],"owner":{"display_name":"user1596371"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1359321530,"creation_date":1359321530,"answer_id":14552428,"question_id":14552384,"body_markdown":"If you want the data inside of the square brackets then your regex should look something like:\r\n\r\n    D\\[([^\\]]*)\r\n\r\nwhich basically says &quot;Take &#39;D[&#39;, then take everything from there on that isn&#39;t a &#39;]&#39; and store it in the match&quot;.\r\n\r\nCheck out [Regexper][1] to obtain a visualization of your regular expressions.\r\n\r\n\r\n  [1]: http://www.regexper.com/","title":"Matcher and Regex in Java to output what&#39;s inside Square Brackets but only once","body":"<p>If you want the data inside of the square brackets then your regex should look something like:</p>\n\n<pre><code>D\\[([^\\]]*)\n</code></pre>\n\n<p>which basically says \"Take 'D[', then take everything from there on that isn't a ']' and store it in the match\".</p>\n\n<p>Check out <a href=\"http://www.regexper.com/\" rel=\"nofollow\">Regexper</a> to obtain a visualization of your regular expressions.</p>\n"},{"tags":[],"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1359321616,"creation_date":1359321616,"answer_id":14552440,"question_id":14552384,"body_markdown":"There is this part `D[ &lt;Expr&gt; ]` and `( &lt;Expr&gt; )`, which introduces the problem of bracket matching. This is not something Java regex can handle, since it doesn&#39;t support recursive regex.\r\n\r\nIn this case, regex is only useful for lexing, you need to write a custom parser for your language.","title":"Matcher and Regex in Java to output what&#39;s inside Square Brackets but only once","body":"<p>There is this part <code>D[ &lt;Expr&gt; ]</code> and <code>( &lt;Expr&gt; )</code>, which introduces the problem of bracket matching. This is not something Java regex can handle, since it doesn't support recursive regex.</p>\n\n<p>In this case, regex is only useful for lexing, you need to write a custom parser for your language.</p>\n"}],"owner":{"account_id":2053185,"reputation":73,"user_id":1831680,"accept_rate":67,"display_name":"user1831680"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":677,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":14552440,"answer_count":2,"score":-1,"last_activity_date":1692855006,"creation_date":1359321271,"question_id":14552384,"body_markdown":"I am having major trouble with understanding what is going wrong with a regex. To be complete I will lay out some background info.\r\n\r\nThis program is supposed to implement a SIMPLESEM interpreter. The grammar in concern here is this:\r\n\r\n    &lt; Expr &gt;    ==&gt;   &lt; Term &gt; {( + | - ) &lt; Term &gt;}\r\n    \r\n    &lt; Term &gt;    ==&gt;   &lt; Factor &gt; {( * | / | % ) &lt; Factor &gt;}\r\n    \r\n    &lt; Factor &gt;  ==&gt;   &lt; Number &gt; | D[&lt; Expr &gt;] | (&lt; Expr &gt;)\r\n    \r\n    &lt; Number &gt;  ==&gt;   0 | (1..9){0..9}\r\n\r\n\r\nI was provided with this code which is supposed to give me the contents inside the square brackets of a `&lt; Factor &gt;`, but it didn&#39;t work:\r\n\t\r\n     Matcher m;\r\n\t\r\n    (m = Pattern.compile(&quot;D\\\\[(.*)&quot;).matcher(expr)).find();\r\n    \t\texpr = parseExpr(m.group(1));\r\n    \t\t(m = Pattern.compile(&quot;\\\\](.*)&quot;).matcher(expr)).find();\r\n    \t\texpr = m.group(1);\r\n\r\nAs example input i have this: \r\n\r\n    jumpt 5, D[0] == 0\r\n\r\nThe `&lt; Factor &gt;` concerned here is `D[0]`. It doesn&#39;t work because the function above feeds `0]` into `parseExpr()` which doesn&#39;t handle the left over bracket, and it shouldn&#39;t. So i switched it to:\r\n\r\n\r\n    (m = Pattern.compile(&quot;D\\\\[(.*)&quot;).matcher(expr)).find();\r\n    \t\texpr = m.group(1);\r\n    \t\t(m = Pattern.compile(&quot;\\\\](.*)&quot;).matcher(expr)).find();\r\n    \t\texpr = parseExpr(m.group(1));\r\n\r\nbut this didn&#39;t work because of the Matcher/Regex.\r\nI believe it outputted an empty string.\r\nSo then I tried this which just gives me an error that there is no match:\r\n\r\n    (m = Pattern.compile(&quot;D\\\\[(.*)&quot;).matcher(expr)).find();\r\n    expr = m.group(1);\r\n    \r\n    if(expr.contains(&quot;(.*)&quot;)) \r\n    {\r\n    \t(m = Pattern.compile(&quot;\\\\](.*)&quot;).matcher(expr)).find();\r\n    }\r\n    else\r\n    {\r\n    \t(m = Pattern.compile(&quot;\\\\]&quot;).matcher(expr)).find();\r\n    }\t\r\n        expr = m.group(1);\r\n        expr = parseExpr(expr);\r\n\r\nIt gives an index out of bounds at the second to last line.\r\nThanks in advance for your help.","title":"Matcher and Regex in Java to output what&#39;s inside Square Brackets but only once","body":"<p>I am having major trouble with understanding what is going wrong with a regex. To be complete I will lay out some background info.</p>\n\n<p>This program is supposed to implement a SIMPLESEM interpreter. The grammar in concern here is this:</p>\n\n<pre><code>&lt; Expr &gt;    ==&gt;   &lt; Term &gt; {( + | - ) &lt; Term &gt;}\n\n&lt; Term &gt;    ==&gt;   &lt; Factor &gt; {( * | / | % ) &lt; Factor &gt;}\n\n&lt; Factor &gt;  ==&gt;   &lt; Number &gt; | D[&lt; Expr &gt;] | (&lt; Expr &gt;)\n\n&lt; Number &gt;  ==&gt;   0 | (1..9){0..9}\n</code></pre>\n\n<p>I was provided with this code which is supposed to give me the contents inside the square brackets of a <code>&lt; Factor &gt;</code>, but it didn't work:</p>\n\n<pre><code> Matcher m;\n\n(m = Pattern.compile(\"D\\\\[(.*)\").matcher(expr)).find();\n        expr = parseExpr(m.group(1));\n        (m = Pattern.compile(\"\\\\](.*)\").matcher(expr)).find();\n        expr = m.group(1);\n</code></pre>\n\n<p>As example input i have this: </p>\n\n<pre><code>jumpt 5, D[0] == 0\n</code></pre>\n\n<p>The <code>&lt; Factor &gt;</code> concerned here is <code>D[0]</code>. It doesn't work because the function above feeds <code>0]</code> into <code>parseExpr()</code> which doesn't handle the left over bracket, and it shouldn't. So i switched it to:</p>\n\n<pre><code>(m = Pattern.compile(\"D\\\\[(.*)\").matcher(expr)).find();\n        expr = m.group(1);\n        (m = Pattern.compile(\"\\\\](.*)\").matcher(expr)).find();\n        expr = parseExpr(m.group(1));\n</code></pre>\n\n<p>but this didn't work because of the Matcher/Regex.\nI believe it outputted an empty string.\nSo then I tried this which just gives me an error that there is no match:</p>\n\n<pre><code>(m = Pattern.compile(\"D\\\\[(.*)\").matcher(expr)).find();\nexpr = m.group(1);\n\nif(expr.contains(\"(.*)\")) \n{\n    (m = Pattern.compile(\"\\\\](.*)\").matcher(expr)).find();\n}\nelse\n{\n    (m = Pattern.compile(\"\\\\]\").matcher(expr)).find();\n}   \n    expr = m.group(1);\n    expr = parseExpr(expr);\n</code></pre>\n\n<p>It gives an index out of bounds at the second to last line.\nThanks in advance for your help.</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":478989,"reputation":1103,"user_id":891391,"display_name":"yatul"},"score":2,"creation_date":1373457403,"post_id":17570005,"comment_id":25562350,"body_markdown":"Thats beacause of greedy regexps. Look at http://stackoverflow.com/a/2301298/891391","body":"Thats beacause of greedy regexps. Look at <a href=\"http://stackoverflow.com/a/2301298/891391\">stackoverflow.com/a/2301298/891391</a>"}],"answers":[{"tags":[],"owner":{"account_id":205662,"reputation":189572,"user_id":454533,"accept_rate":74,"display_name":"Explosion Pills"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1373457623,"creation_date":1373457623,"answer_id":17570121,"question_id":17570005,"body_markdown":"`.*` is *greedy* and will try to match *as much as possible*.  You can make it reluctant/ungreedy by appending a question mark.  `.*?`.\r\n\r\nHowever, this *still* won&#39;t give you what you want because `/element|1717_Lorem/64/` will match up to `480`.  A better regex would probably be\r\n\r\n    /element[^/]+/480/","title":"Getting submatches when the regex match with a larger string","body":"<p><code>.*</code> is <em>greedy</em> and will try to match <em>as much as possible</em>.  You can make it reluctant/ungreedy by appending a question mark.  <code>.*?</code>.</p>\n\n<p>However, this <em>still</em> won't give you what you want because <code>/element|1717_Lorem/64/</code> will match up to <code>480</code>.  A better regex would probably be</p>\n\n<pre><code>/element[^/]+/480/\n</code></pre>\n"}],"owner":{"account_id":449588,"reputation":1152,"user_id":844451,"accept_rate":79,"display_name":"hosseio"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":748,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":17570121,"answer_count":1,"score":0,"last_activity_date":1692854976,"creation_date":1373457305,"question_id":17570005,"body_markdown":"I&#39;m trying to match a pattern in a Java string (a json one). This pattern matches in the string several times, but it also matches with a string that contains the others.\r\nLet me explain myself with an example.\r\n\r\n\t\tString json = &quot;IRRELEVANT_TEXT{&#39;/element|1717_todossavoy/480/&#39;: {item_url:&#39;/element|1717_Lorem/64/&#39;, item_description: &#39;Lorem ipsum dolor sit amet&#39;},&#39;/element|1717_Marcrie/480/&#39;: {item_url:&#39;/element|1717_Vestibulum/64/&#39;, item_description: &#39; Vestibulum enim tellus, sodales sit amet consequat ut&#39;},&#39;/element|1717_Cannes05/434/&#39;: {item_url:&#39;/element|1717_Nullam/64/&#39;, item_description: &#39;Nullam gravida risus vehicula nisi egestas&#39;},&#39;/element|1717_babelsavoy/266/&#39;: {item_url:&#39;/element|1717_Pellentesque/64/&#39;, item_description: &#39;Pellentesque habitant morbi tristique senectus&#39;}};IRRELEVANT&quot;;\r\n\t\tMatcher matcher = Pattern.compile(&quot;/element.*480/&quot;).matcher(json);\r\n\t\twhile(matcher.find()) {\r\n\t\t\tSystem.out.println(matcher.group());\r\n\t\t}\r\n\r\nI am getting the following:\r\n\r\n    /element|1717_todossavoy/480/&#39;: {item_url:&#39;/element|1717_Lorem/64/&#39;, item_description: &#39;Lorem ipsum dolor sit amet&#39;},&#39;/element|1717_Marcrie/480/\r\n\r\nBut I&#39;d like to get the 2 following keys:\r\n\r\n    /element|1717_todossavoy/480/\r\n    /element|1717_Marcrie/480/\r\n\r\nWhat am I doing wrong?\r\n\r\n","title":"Getting submatches when the regex match with a larger string","body":"<p>I'm trying to match a pattern in a Java string (a json one). This pattern matches in the string several times, but it also matches with a string that contains the others.\nLet me explain myself with an example.</p>\n\n<pre><code>    String json = \"IRRELEVANT_TEXT{'/element|1717_todossavoy/480/': {item_url:'/element|1717_Lorem/64/', item_description: 'Lorem ipsum dolor sit amet'},'/element|1717_Marcrie/480/': {item_url:'/element|1717_Vestibulum/64/', item_description: ' Vestibulum enim tellus, sodales sit amet consequat ut'},'/element|1717_Cannes05/434/': {item_url:'/element|1717_Nullam/64/', item_description: 'Nullam gravida risus vehicula nisi egestas'},'/element|1717_babelsavoy/266/': {item_url:'/element|1717_Pellentesque/64/', item_description: 'Pellentesque habitant morbi tristique senectus'}};IRRELEVANT\";\n    Matcher matcher = Pattern.compile(\"/element.*480/\").matcher(json);\n    while(matcher.find()) {\n        System.out.println(matcher.group());\n    }\n</code></pre>\n\n<p>I am getting the following:</p>\n\n<pre><code>/element|1717_todossavoy/480/': {item_url:'/element|1717_Lorem/64/', item_description: 'Lorem ipsum dolor sit amet'},'/element|1717_Marcrie/480/\n</code></pre>\n\n<p>But I'd like to get the 2 following keys:</p>\n\n<pre><code>/element|1717_todossavoy/480/\n/element|1717_Marcrie/480/\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["java","regex","string"],"answers":[{"tags":[],"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1372601934,"creation_date":1372599872,"answer_id":17390981,"question_id":17390965,"body_markdown":"You just need to enable *Multiline mode* of matching using `(?m)` embedded flag or [`Pattern.MULTILINE`][1] mode in your regex. This way, the `$` will stop at every line-terminator, instead of the end of entire input.\r\n\r\n    Pattern p1 = Pattern.compile(&quot;(?m)^To: (.*);tag=(.*)$&quot;);\r\n\r\nAlso, instead of:\r\n\r\n    if(m.find())\r\n\r\nyou should use:\r\n\r\n    while (m.find())\r\n\r\nAlso note that you are mismatching the *Matcher* reference name. You are using *matcher* inside your `if`, but you defined *m*.\r\n\r\nP.S: You are re-assigning a new value to your string at the end. Make sure, you use `+=` instead of `=`.\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#MULTILINE","title":"Parse a Protocol paragraph with matcher?","body":"<p>You just need to enable <em>Multiline mode</em> of matching using <code>(?m)</code> embedded flag or <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#MULTILINE\" rel=\"nofollow\"><code>Pattern.MULTILINE</code></a> mode in your regex. This way, the <code>$</code> will stop at every line-terminator, instead of the end of entire input.</p>\n\n<pre><code>Pattern p1 = Pattern.compile(\"(?m)^To: (.*);tag=(.*)$\");\n</code></pre>\n\n<p>Also, instead of:</p>\n\n<pre><code>if(m.find())\n</code></pre>\n\n<p>you should use:</p>\n\n<pre><code>while (m.find())\n</code></pre>\n\n<p>Also note that you are mismatching the <em>Matcher</em> reference name. You are using <em>matcher</em> inside your <code>if</code>, but you defined <em>m</em>.</p>\n\n<p>P.S: You are re-assigning a new value to your string at the end. Make sure, you use <code>+=</code> instead of <code>=</code>.</p>\n"},{"tags":[],"owner":{"account_id":294495,"reputation":32500,"user_id":598420,"accept_rate":91,"display_name":"Anirudha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1372600968,"creation_date":1372600968,"answer_id":17391131,"question_id":17390965,"body_markdown":"I would use this regex\r\n\r\n    ^To:\\s+([^;]*);tag=(\\w+)","title":"Parse a Protocol paragraph with matcher?","body":"<p>I would use this regex</p>\n\n<pre><code>^To:\\s+([^;]*);tag=(\\w+)\n</code></pre>\n"}],"owner":{"account_id":1504897,"reputation":141,"user_id":1408517,"accept_rate":27,"display_name":"Yasin Caner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":17390981,"answer_count":2,"score":0,"last_activity_date":1692854906,"creation_date":1372599768,"question_id":17390965,"body_markdown":"I try to write a Server-Client program. I can send protocol text and get text correctly.\r\nBut when I try to parse text, I got problem with Matcher Class. Because it matches only first line. So how can I find right String and parse text. I think Matcher don&#39;t try to match other line .if it is bug how can I fix it or I am going to split each line and then try to parse.\r\n\r\nAn example is below, I can&#39;t match String on expression.\r\n\r\n    String veri =&quot;SIP/2.0 200 OK\\r\\n&quot;\r\n    +&quot;Via: SIP/2.0/UDP 10.10.10.34:5060;branch=z9hG4bK3834f681a;received=10.10.10.17\\r\\n&quot;\r\n    +&quot;From: &lt;sip:4420145@10.10.10.24&gt;;tag=as153459088\\r\\n&quot;\r\n    +&quot;To: &lt;sip:44520145@10.10.10.24&gt;;tag=as6163450a5a\\r\\n&quot;\r\n    +&quot;Call-ID: 1e0ssdfdb7f456e5977bc0df60645348cf1ce@[::1]\\r\\n&quot;\r\n    +&quot;CSeq: 18368 REGISTER\\r\\n&quot;\r\n    +&quot;Server: Asterisk PBX 11.3.0\\r\\n&quot;\r\n    +&quot;Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO, PUBLISH\\r\\n&quot;\r\n    +&quot;Supported: replaces, timer\\r\\n&quot;\r\n    +&quot;Expires: 120\\r\\n&quot;\r\n    +&quot;Contact: &lt;sip:345dgd@10.10.10.17:5060&gt;;expires=120\\r\\n&quot;\r\n    +&quot;Date: Sat, 29 Jun 2013 14:00:50 GMT\\r\\n&quot;\r\n    +&quot;Content-Length: 0&quot;;\r\n      //veri=&quot;To: &lt;sip:3453@10.10.10.24&gt;;tag=34dgd\\r\\n&quot;;\r\n      Pattern p1 = Pattern.compile(&quot;^To\\\\: (.*);tag=(.*)$&quot;);\r\n\r\n      Matcher m = p1.matcher(veri);\r\n\r\n      if(m.find()){\r\n\r\n        System.out.println(m.group(1).trim());\r\n      }\r\n","title":"Parse a Protocol paragraph with matcher?","body":"<p>I try to write a Server-Client program. I can send protocol text and get text correctly.\nBut when I try to parse text, I got problem with Matcher Class. Because it matches only first line. So how can I find right String and parse text. I think Matcher don't try to match other line .if it is bug how can I fix it or I am going to split each line and then try to parse.</p>\n<p>An example is below, I can't match String on expression.</p>\n<pre><code>String veri =&quot;SIP/2.0 200 OK\\r\\n&quot;\n+&quot;Via: SIP/2.0/UDP 10.10.10.34:5060;branch=z9hG4bK3834f681a;received=10.10.10.17\\r\\n&quot;\n+&quot;From: &lt;sip:4420145@10.10.10.24&gt;;tag=as153459088\\r\\n&quot;\n+&quot;To: &lt;sip:44520145@10.10.10.24&gt;;tag=as6163450a5a\\r\\n&quot;\n+&quot;Call-ID: 1e0ssdfdb7f456e5977bc0df60645348cf1ce@[::1]\\r\\n&quot;\n+&quot;CSeq: 18368 REGISTER\\r\\n&quot;\n+&quot;Server: Asterisk PBX 11.3.0\\r\\n&quot;\n+&quot;Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO, PUBLISH\\r\\n&quot;\n+&quot;Supported: replaces, timer\\r\\n&quot;\n+&quot;Expires: 120\\r\\n&quot;\n+&quot;Contact: &lt;sip:345dgd@10.10.10.17:5060&gt;;expires=120\\r\\n&quot;\n+&quot;Date: Sat, 29 Jun 2013 14:00:50 GMT\\r\\n&quot;\n+&quot;Content-Length: 0&quot;;\n  //veri=&quot;To: &lt;sip:3453@10.10.10.24&gt;;tag=34dgd\\r\\n&quot;;\n  Pattern p1 = Pattern.compile(&quot;^To\\\\: (.*);tag=(.*)$&quot;);\n\n  Matcher m = p1.matcher(veri);\n\n  if(m.find()){\n\n    System.out.println(m.group(1).trim());\n  }\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1371484375,"post_id":17151607,"comment_id":24827172,"body_markdown":"What the parentheses are doing in &quot;(&quot; + keyword + &quot;)&quot; ?","body":"What the parentheses are doing in &quot;(&quot; + keyword + &quot;)&quot; ?"},{"owner":{"account_id":279975,"reputation":15386,"user_id":575421,"accept_rate":50,"display_name":"Mikita Belahlazau"},"score":7,"creation_date":1371484520,"post_id":17151607,"comment_id":24827258,"body_markdown":"Why don&#39;t you use `plainText.contains(keyword)` for this task?","body":"Why don&#39;t you use <code>plainText.contains(keyword)</code> for this task?"},{"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"score":0,"creation_date":1371484863,"post_id":17151607,"comment_id":24827459,"body_markdown":"Could you provide the values of the `keywords` set and the `plainText` string?","body":"Could you provide the values of the <code>keywords</code> set and the <code>plainText</code> string?"},{"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"score":0,"creation_date":1371484964,"post_id":17151607,"comment_id":24827514,"body_markdown":"@NikitaBeloglazov It should be `&quot;.*&quot; + keyword + &quot;.*&quot;` and anyway, it won&#39;t work for multilines input texts.","body":"@NikitaBeloglazov It should be <code>&quot;.*&quot; + keyword + &quot;.*&quot;</code> and anyway, it won&#39;t work for multilines input texts."},{"owner":{"account_id":2380504,"reputation":2993,"user_id":2082631,"accept_rate":70,"display_name":"Nikitin Mikhail"},"score":0,"creation_date":1371554372,"post_id":17151607,"comment_id":24854624,"body_markdown":"Nikita, I need to check not only for words but for regexps too, and, by the way it doesn&#39;t work even with simple words","body":"Nikita, I need to check not only for words but for regexps too, and, by the way it doesn&#39;t work even with simple words"}],"answers":[{"tags":[],"owner":{"account_id":1545827,"reputation":2887,"user_id":1439401,"display_name":"ctn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1371484616,"creation_date":1371484616,"answer_id":17151829,"question_id":17151607,"body_markdown":"The trouble is elsewhere.\r\n\r\n    import java.util.regex.*;\r\n    \r\n    public class HelloWorld {\r\n    \r\n        public static void main(String []args) {\r\n            Pattern pt = Pattern.compile(&quot;(qwer)&quot;);\r\n            Matcher mt = pt.matcher(&quot;asdf qwer zxcv&quot;);\r\n            System.out.println(mt.find());\r\n        }\r\n    }\r\n\r\nThis prints out true. You may want to use word boundary as delimiter, though:\r\n\r\n    import java.util.regex.*;\r\n    \r\n    public class HelloWorld {\r\n    \r\n        public static void main(String []args) {\r\n            Pattern pt = Pattern.compile(&quot;\\\\bqwer\\\\b&quot;);\r\n            Matcher mt = pt.matcher(&quot;asdf qwer zxcv&quot;);\r\n            System.out.println(mt.find());\r\n            mt = pt.matcher(&quot;asdfqwer zxcv&quot;);\r\n            System.out.println(mt.find());\r\n        }\r\n    }\r\n\r\nThe parenthesis are useless unless you need to capture the keyword in a group. But you already have it to begin with.","title":"Matcher can&#39;t match","body":"<p>The trouble is elsewhere.</p>\n\n<pre><code>import java.util.regex.*;\n\npublic class HelloWorld {\n\n    public static void main(String []args) {\n        Pattern pt = Pattern.compile(\"(qwer)\");\n        Matcher mt = pt.matcher(\"asdf qwer zxcv\");\n        System.out.println(mt.find());\n    }\n}\n</code></pre>\n\n<p>This prints out true. You may want to use word boundary as delimiter, though:</p>\n\n<pre><code>import java.util.regex.*;\n\npublic class HelloWorld {\n\n    public static void main(String []args) {\n        Pattern pt = Pattern.compile(\"\\\\bqwer\\\\b\");\n        Matcher mt = pt.matcher(\"asdf qwer zxcv\");\n        System.out.println(mt.find());\n        mt = pt.matcher(\"asdfqwer zxcv\");\n        System.out.println(mt.find());\n    }\n}\n</code></pre>\n\n<p>The parenthesis are useless unless you need to capture the keyword in a group. But you already have it to begin with.</p>\n"},{"tags":[],"owner":{"account_id":2899504,"reputation":775,"user_id":2486561,"accept_rate":60,"display_name":"Lee Fogg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1371484665,"creation_date":1371484665,"answer_id":17151844,"question_id":17151607,"body_markdown":"Use ArrayList&#39;s built in functions `indexOf(Object o)` and `contains(Object o)` to check if a String exists anywhere in the Array and where.\r\ne.g.\r\n\r\n    ArrayList&lt;String&gt; keywords = new ArrayList&lt;String&gt;();\r\n    keywords.add(&quot;hello&quot;);\r\n    System.out.println(keywords.contains(&quot;hello&quot;));\r\n    System.out.println(keywords.indexOf(&quot;hello&quot;));\r\noutputs: &lt;br&gt;\r\ntrue&lt;br&gt;\r\n0","title":"Matcher can&#39;t match","body":"<p>Use ArrayList's built in functions <code>indexOf(Object o)</code> and <code>contains(Object o)</code> to check if a String exists anywhere in the Array and where.\ne.g.</p>\n\n<pre><code>ArrayList&lt;String&gt; keywords = new ArrayList&lt;String&gt;();\nkeywords.add(\"hello\");\nSystem.out.println(keywords.contains(\"hello\"));\nSystem.out.println(keywords.indexOf(\"hello\"));\n</code></pre>\n\n<p>outputs: <br>\ntrue<br>\n0</p>\n"},{"tags":[],"owner":{"account_id":305188,"reputation":9584,"user_id":615182,"accept_rate":86,"display_name":"Narendra Yadala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1371522310,"creation_date":1371489871,"answer_id":17153292,"question_id":17151607,"body_markdown":"Try this to filter out messages which contain banned words using the following regex which uses `OR` operator.\r\n\r\n    private static void findBannedWords() {\r\n    \tfinal ArrayList&lt;String&gt; keywords = new ArrayList&lt;String&gt;();\r\n    \tkeywords.add(&quot;f$%k&quot;);\r\n    \tkeywords.add(&quot;s!@t&quot;);\r\n    \tkeywords.add(&quot;a$s&quot;);\r\n    \t\t\r\n    \tString input = &quot;what the f$%k&quot;;\r\n    \t\t\r\n    \tString bannedRegex = &quot;&quot;;\r\n    \tfor (String keyword: keywords){\r\n    \t\tbannedRegex =  bannedRegex + &quot;.*&quot; + keyword + &quot;.*&quot; + &quot;|&quot;;\r\n    \t}\r\n    \t\t\r\n    \tPattern pt = Pattern.compile(bannedRegex.substring(0, bannedRegex.length()-1));\r\n    \tMatcher mt = pt.matcher(input);\r\n    \tif (mt.matches()) {\r\n    \t     System.out.println(&quot;message can&#39;t be processed because it doesn&#39;t satisfy the rule &quot;);\r\n    \t}\r\n    }","title":"Matcher can&#39;t match","body":"<p>Try this to filter out messages which contain banned words using the following regex which uses <code>OR</code> operator.</p>\n\n<pre><code>private static void findBannedWords() {\n    final ArrayList&lt;String&gt; keywords = new ArrayList&lt;String&gt;();\n    keywords.add(\"f$%k\");\n    keywords.add(\"s!@t\");\n    keywords.add(\"a$s\");\n\n    String input = \"what the f$%k\";\n\n    String bannedRegex = \"\";\n    for (String keyword: keywords){\n        bannedRegex =  bannedRegex + \".*\" + keyword + \".*\" + \"|\";\n    }\n\n    Pattern pt = Pattern.compile(bannedRegex.substring(0, bannedRegex.length()-1));\n    Matcher mt = pt.matcher(input);\n    if (mt.matches()) {\n         System.out.println(\"message can't be processed because it doesn't satisfy the rule \");\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2380504,"reputation":2993,"user_id":2082631,"accept_rate":70,"display_name":"Nikitin Mikhail"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1692854898,"creation_date":1371483922,"question_id":17151607,"body_markdown":"I have the following code. I need to check the text for existing any of the words from some list of banned words. But even if this word exists in the text matcher doesn&#39;t see it. here is the code:\r\n\r\n    final ArrayList&lt;String&gt; regexps = config.getProperty(property);\r\n       for (String regexp: regexps){\r\n       Pattern pt = Pattern.compile(&quot;(&quot; + regexp + &quot;)&quot;, Pattern.CASE_INSENSITIVE);\r\n       Matcher mt = pt.matcher(plainText);                        \r\n       if (mt.find()){\r\n          result = result + &quot;message can&#39;t be processed because it doesn&#39;t satisfy the rule &quot; + property;\r\n          reason = false;\r\n          System.out.println(&quot;reason&quot; + mt.group() + regexp);\r\n                            }\r\n                        }\r\n\r\nWhat is wrong? This code can&#39;f find regexp `в[ыy][шs]лит[еe]`, which is `regexp` in the `plainText = &quot;Вышлите пожалуйста новый счет на оплату на Санг, пока согласовывали, уже\r\nпрошли его сроки. Лиценз...&quot;`. I also tried another variants of the `regexp` but everything is useless","title":"Matcher can&#39;t match","body":"<p>I have the following code. I need to check the text for existing any of the words from some list of banned words. But even if this word exists in the text matcher doesn't see it. here is the code:</p>\n\n<pre><code>final ArrayList&lt;String&gt; regexps = config.getProperty(property);\n   for (String regexp: regexps){\n   Pattern pt = Pattern.compile(\"(\" + regexp + \")\", Pattern.CASE_INSENSITIVE);\n   Matcher mt = pt.matcher(plainText);                        \n   if (mt.find()){\n      result = result + \"message can't be processed because it doesn't satisfy the rule \" + property;\n      reason = false;\n      System.out.println(\"reason\" + mt.group() + regexp);\n                        }\n                    }\n</code></pre>\n\n<p>What is wrong? This code can'f find regexp <code>в[ыy][шs]лит[еe]</code>, which is <code>regexp</code> in the <code>plainText = \"Вышлите пожалуйста новый счет на оплату на Санг, пока согласовывали, уже\nпрошли его сроки. Лиценз...\"</code>. I also tried another variants of the <code>regexp</code> but everything is useless</p>\n"},{"tags":["java","regex","substring"],"answers":[{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1369269271,"creation_date":1369268567,"answer_id":16703698,"question_id":16703645,"body_markdown":"Are you looking for something like this?\r\n\r\n    yourString = yourString.replaceAll(&quot;yourRegex&quot;,&quot;$0\\n&quot;)\r\n\r\n`$0` represents group 0 which is part matched by entire regex. Also instead of `\\n` you can use `System.getProperty(&quot;line.separator&quot;)` to pick separator used in your OS. ","title":"Line break after substring","body":"<p>Are you looking for something like this?</p>\n\n<pre><code>yourString = yourString.replaceAll(\"yourRegex\",\"$0\\n\")\n</code></pre>\n\n<p><code>$0</code> represents group 0 which is part matched by entire regex. Also instead of <code>\\n</code> you can use <code>System.getProperty(\"line.separator\")</code> to pick separator used in your OS. </p>\n"},{"tags":[],"owner":{"account_id":1594907,"reputation":664,"user_id":1477333,"accept_rate":100,"display_name":"LanternMike"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1369268718,"creation_date":1369268718,"answer_id":16703722,"question_id":16703645,"body_markdown":"There is a nice tutorial on Matcher at http://docs.oracle.com/javase/tutorial/essential/regex/matcher.html\r\n\r\nLooks like  replaceFirst(String) and replaceAll(String) described on that page could work. They will replace the matching text and you can replace with same text plus the \\n.","title":"Line break after substring","body":"<p>There is a nice tutorial on Matcher at <a href=\"http://docs.oracle.com/javase/tutorial/essential/regex/matcher.html\" rel=\"nofollow\">http://docs.oracle.com/javase/tutorial/essential/regex/matcher.html</a></p>\n\n<p>Looks like  replaceFirst(String) and replaceAll(String) described on that page could work. They will replace the matching text and you can replace with same text plus the \\n.</p>\n"},{"tags":[],"owner":{"account_id":2767975,"reputation":66,"user_id":2383210,"display_name":"John484"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1369268769,"creation_date":1369268769,"answer_id":16703728,"question_id":16703645,"body_markdown":"You probably want something like this instead of using matcher.find:\r\n\r\n    System.out.println(contentsToSearch.replaceAll(&quot;\\\\*/&quot;, &quot;\\n&quot;));","title":"Line break after substring","body":"<p>You probably want something like this instead of using matcher.find:</p>\n\n<pre><code>System.out.println(contentsToSearch.replaceAll(\"\\\\*/\", \"\\n\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1369269946,"creation_date":1369269110,"answer_id":16703778,"question_id":16703645,"body_markdown":"You could simply do:\r\n\r\n    contentsToSearch = contentsToSearch.replaceAll(&quot;(/\\\\*|\\\\*/)&quot;, &quot;$1\\n&quot;)","title":"Line break after substring","body":"<p>You could simply do:</p>\n\n<pre><code>contentsToSearch = contentsToSearch.replaceAll(\"(/\\\\*|\\\\*/)\", \"$1\\n\")\n</code></pre>\n"}],"owner":{"account_id":1254567,"reputation":13822,"user_id":1565984,"accept_rate":65,"display_name":"kandroidj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":360,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":16703778,"answer_count":4,"score":0,"last_activity_date":1692854889,"creation_date":1369268149,"question_id":16703645,"body_markdown":"If I use a pattern and matcher in Java how can I add a line break right after I find the substring?\r\n**UPDATE**\r\n\r\nI found a solution using the `replaceAll(String,String);` method\r\n\r\n**Thanks a lot guys my solution has been formatted below**\r\n\r\n     String contentsToSearch = &quot;This is an example string /* example comment in my string */ with some extra text following my inline comment&quot;;\r\n    //String regex = &quot;[*/]&quot; ;\r\n    //Pattern pattern = Pattern.compile(regex);\r\n    //Matcher matcher = pattern.matcher(contentsToSearch);\r\n\r\n    //if(matcher.find()){\r\n          // add a line break to the string i am searching\r\n     //}else{\r\n          // print out my string regularly\r\n      //    System.out.println(contentsToSearch);\r\n     //}\r\n     contentsToSearch = contentsToSearch.replaceAll(&quot;\\\\*/&quot;, &quot;\\\\*/\\n&quot;);\r\n     System.out.println(contentsToSearch);","title":"Line break after substring","body":"<p>If I use a pattern and matcher in Java how can I add a line break right after I find the substring?\n<strong>UPDATE</strong></p>\n\n<p>I found a solution using the <code>replaceAll(String,String);</code> method</p>\n\n<p><strong>Thanks a lot guys my solution has been formatted below</strong></p>\n\n<pre><code> String contentsToSearch = \"This is an example string /* example comment in my string */ with some extra text following my inline comment\";\n//String regex = \"[*/]\" ;\n//Pattern pattern = Pattern.compile(regex);\n//Matcher matcher = pattern.matcher(contentsToSearch);\n\n//if(matcher.find()){\n      // add a line break to the string i am searching\n //}else{\n      // print out my string regularly\n  //    System.out.println(contentsToSearch);\n //}\n contentsToSearch = contentsToSearch.replaceAll(\"\\\\*/\", \"\\\\*/\\n\");\n System.out.println(contentsToSearch);\n</code></pre>\n"},{"tags":["java","scxml","apache-commons-scxml"],"comments":[{"owner":{"account_id":2218384,"reputation":3208,"user_id":1958461,"accept_rate":79,"display_name":"Pete B."},"score":0,"creation_date":1426537025,"post_id":8286760,"comment_id":46405118,"body_markdown":"I like the pom.xml solution the best, good work.","body":"I like the pom.xml solution the best, good work."}],"answers":[{"tags":[],"owner":{"account_id":299251,"reputation":335905,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1322409197,"creation_date":1322409197,"answer_id":8286795,"question_id":8286760,"body_markdown":"Add [`commons-jexl.jar`](http://repo1.maven.org/maven2/commons-jexl/commons-jexl/1.1/commons-jexl-1.1.jar) to the CLASSPATH as well. According to the project [`pom.xml`](http://repo1.maven.org/maven2/commons-scxml/commons-scxml/0.9/commons-scxml-0.9.pom) in version 0.9 you will also need (excluding transitive depndencies):\r\n\r\n* `commons-logging`\r\n* `commons-digester`\r\n* `commons-beanutils`\r\n* `commons-el`\r\n","title":"Apache Commons SCXML - cannot find JexlContext","body":"<p>Add <a href=\"http://repo1.maven.org/maven2/commons-jexl/commons-jexl/1.1/commons-jexl-1.1.jar\" rel=\"nofollow\"><code>commons-jexl.jar</code></a> to the CLASSPATH as well. According to the project <a href=\"http://repo1.maven.org/maven2/commons-scxml/commons-scxml/0.9/commons-scxml-0.9.pom\" rel=\"nofollow\"><code>pom.xml</code></a> in version 0.9 you will also need (excluding transitive depndencies):</p>\n\n<ul>\n<li><code>commons-logging</code></li>\n<li><code>commons-digester</code></li>\n<li><code>commons-beanutils</code></li>\n<li><code>commons-el</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":429996,"reputation":33,"user_id":813178,"display_name":"keerthi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1358289379,"creation_date":1358289379,"answer_id":14348222,"question_id":8286760,"body_markdown":"All SCXML dependency jars can be found here:\r\n\r\nhttp://commons.apache.org/scxml/dependencies.html\r\n","title":"Apache Commons SCXML - cannot find JexlContext","body":"<p>All SCXML dependency jars can be found here:</p>\n\n<p><a href=\"http://commons.apache.org/scxml/dependencies.html\" rel=\"nofollow\">http://commons.apache.org/scxml/dependencies.html</a></p>\n"},{"tags":[],"owner":{"account_id":4849409,"reputation":89,"user_id":3912144,"display_name":"milchreis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692854829,"creation_date":1692854829,"answer_id":76966423,"question_id":8286760,"body_markdown":"I got the same problem almost 12 years after the question. The answser are not working for the current version of [common-scxml2][1]. I found a soultion with adding the currently needed version of jexl3.\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n    &lt;artifactId&gt;commons-jexl3&lt;/artifactId&gt;\r\n    &lt;version&gt;3.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n\r\n  [1]: https://github.com/apache/commons-scxml","title":"Apache Commons SCXML - cannot find JexlContext","body":"<p>I got the same problem almost 12 years after the question. The answser are not working for the current version of <a href=\"https://github.com/apache/commons-scxml\" rel=\"nofollow noreferrer\">common-scxml2</a>. I found a soultion with adding the currently needed version of jexl3.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-jexl3&lt;/artifactId&gt;\n    &lt;version&gt;3.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":183857,"reputation":15364,"user_id":419516,"accept_rate":87,"display_name":"user219882"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5862,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":8286795,"answer_count":3,"score":3,"last_activity_date":1692854829,"creation_date":1322408893,"question_id":8286760,"body_markdown":"I&#39;m new to SCXML and I cannot start even the simplest application. When I try to start it I get the following exception. But I have the library `commons-scxml-0.9.jar` with that class on classpath. Any ideas?\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/commons/jexl/JexlContext\r\n\tat java.lang.ClassLoader.defineClass1(Native Method)\r\n\tat java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)\r\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:615)\r\n\tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)\r\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:283)\r\n\tat java.net.URLClassLoader.access$000(URLClassLoader.java:58)\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:197)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:190)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:306)\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:247)\r\n\tat org.apache.commons.scxml.env.AbstractStateMachine.&lt;init&gt;(AbstractStateMachine.java:103)\r\n\tat main.StateMachineImpl.&lt;init&gt;(StateMachineImpl.java:8)\r\n\tat main.Main.main(Main.java:6)\r\n\r\n    Caused by: java.lang.ClassNotFoundException: org.apache.commons.jexl.JexlContext\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:202)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:190)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:306)\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:247)\r\n\t... 15 more\r\n\r\n\r\n\r\nHere is the code:\r\n\r\n`Main class`\r\n\r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tStateMachineImpl stateMachineImpl = new StateMachineImpl();\r\n    \t\tstateMachineImpl.fireEvent(Event.START.getEvent());\r\n    \t\tstateMachineImpl.fireEvent(Event.STOP.getEvent());\r\n    \t}\r\n    }\r\n\r\n`Event`\r\n\r\n\tpublic enum Event {\r\n\t\r\n\t\tSTART(&quot;event.start&quot;), STOP(&quot;event.stop&quot;);\r\n\t\r\n\t\tprivate String event;\r\n\t\r\n\t\tprivate Event(String event) {\r\n\t\t\tthis.event = event;\r\n\t\t}\r\n\t\r\n\t\tpublic String getEvent() {\r\n\t\t\treturn event;\r\n\t\t}\r\n\t\r\n\t\tpublic void setEvent(String event) {\r\n\t\t\tthis.event = event;\r\n\t\t}\r\n\t\r\n\t}\r\n\r\n\r\n`StateMachineImpl`\r\n\t\r\n\tpublic class StateMachineImpl extends AbstractStateMachine {\r\n\t\r\n\t\tpublic StateMachineImpl() {\r\n\t\t\tsuper(StateMachineImpl.class.getClassLoader().getResource(&quot;state-machine-cfg.xml&quot;));\r\n\t\t}\r\n\t\r\n\t\tpublic void off() {\r\n\t\t\tSystem.out.println(&quot;StateMachine is OFF&quot;);\r\n\t\t}\r\n\t\r\n\t\tpublic void running() {\r\n\t\t\tSystem.out.println(&quot;StateMachine is RUNNING&quot;);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n`state-machine-cfg.xml`\r\n&lt;!-- language:xml --&gt;\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\t&lt;scxml xmlns=&quot;http://www.w3.org/2005/07/scxml&quot; version=&quot;1.0&quot;\r\n\t\tinitialstate=&quot;off&quot;&gt;\r\n\t\r\n\t\t&lt;state id=&quot;off&quot;&gt;\r\n\t\t\t&lt;transition event=&quot;event.start&quot; target=&quot;running&quot; /&gt;\r\n\t\t&lt;/state&gt;\r\n\t\t\r\n\t\t&lt;state id=&quot;running&quot;&gt;\r\n\t\t\t&lt;transition event=&quot;event.stop&quot; target=&quot;off&quot; /&gt;\r\n\t\t&lt;/state&gt;\r\n\t\t\r\n\t&lt;/scxml&gt;\r\n\t\r\n**EDIT - solution:**\r\nI have to add additional dependencies (I thought they would be loaded by Maven automatically).\r\n\r\n`pom.xml dependencies`\r\n\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;commons-scxml&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;commons-scxml&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;0.9&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.1.1&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;commons-jexl&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;commons-jexl&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.1&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;xalan&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;xalan&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.1&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n","title":"Apache Commons SCXML - cannot find JexlContext","body":"<p>I'm new to SCXML and I cannot start even the simplest application. When I try to start it I get the following exception. But I have the library <code>commons-scxml-0.9.jar</code> with that class on classpath. Any ideas?</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: org/apache/commons/jexl/JexlContext\nat java.lang.ClassLoader.defineClass1(Native Method)\nat java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)\nat java.lang.ClassLoader.defineClass(ClassLoader.java:615)\nat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)\nat java.net.URLClassLoader.defineClass(URLClassLoader.java:283)\nat java.net.URLClassLoader.access$000(URLClassLoader.java:58)\nat java.net.URLClassLoader$1.run(URLClassLoader.java:197)\nat java.security.AccessController.doPrivileged(Native Method)\nat java.net.URLClassLoader.findClass(URLClassLoader.java:190)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:306)\nat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:247)\nat org.apache.commons.scxml.env.AbstractStateMachine.&lt;init&gt;(AbstractStateMachine.java:103)\nat main.StateMachineImpl.&lt;init&gt;(StateMachineImpl.java:8)\nat main.Main.main(Main.java:6)\n\nCaused by: java.lang.ClassNotFoundException: org.apache.commons.jexl.JexlContext\nat java.net.URLClassLoader$1.run(URLClassLoader.java:202)\nat java.security.AccessController.doPrivileged(Native Method)\nat java.net.URLClassLoader.findClass(URLClassLoader.java:190)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:306)\nat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:247)\n... 15 more\n</code></pre>\n\n<p>Here is the code:</p>\n\n<p><code>Main class</code></p>\n\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        StateMachineImpl stateMachineImpl = new StateMachineImpl();\n        stateMachineImpl.fireEvent(Event.START.getEvent());\n        stateMachineImpl.fireEvent(Event.STOP.getEvent());\n    }\n}\n</code></pre>\n\n<p><code>Event</code></p>\n\n<pre><code>public enum Event {\n\n    START(\"event.start\"), STOP(\"event.stop\");\n\n    private String event;\n\n    private Event(String event) {\n        this.event = event;\n    }\n\n    public String getEvent() {\n        return event;\n    }\n\n    public void setEvent(String event) {\n        this.event = event;\n    }\n\n}\n</code></pre>\n\n<p><code>StateMachineImpl</code></p>\n\n<pre><code>public class StateMachineImpl extends AbstractStateMachine {\n\n    public StateMachineImpl() {\n        super(StateMachineImpl.class.getClassLoader().getResource(\"state-machine-cfg.xml\"));\n    }\n\n    public void off() {\n        System.out.println(\"StateMachine is OFF\");\n    }\n\n    public void running() {\n        System.out.println(\"StateMachine is RUNNING\");\n    }\n\n}\n</code></pre>\n\n<p><code>state-machine-cfg.xml</code></p>\n\n\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;scxml xmlns=\"http://www.w3.org/2005/07/scxml\" version=\"1.0\"\n    initialstate=\"off\"&gt;\n\n    &lt;state id=\"off\"&gt;\n        &lt;transition event=\"event.start\" target=\"running\" /&gt;\n    &lt;/state&gt;\n\n    &lt;state id=\"running\"&gt;\n        &lt;transition event=\"event.stop\" target=\"off\" /&gt;\n    &lt;/state&gt;\n\n&lt;/scxml&gt;\n</code></pre>\n\n<p><strong>EDIT - solution:</strong>\nI have to add additional dependencies (I thought they would be loaded by Maven automatically).</p>\n\n<p><code>pom.xml dependencies</code></p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;commons-scxml&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-scxml&lt;/artifactId&gt;\n    &lt;version&gt;0.9&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n    &lt;version&gt;1.1.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;commons-jexl&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-jexl&lt;/artifactId&gt;\n    &lt;version&gt;1.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;xalan&lt;/groupId&gt;\n    &lt;artifactId&gt;xalan&lt;/artifactId&gt;\n    &lt;version&gt;2.7.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":195331,"reputation":275398,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1369146558,"post_id":16672539,"comment_id":23989080,"body_markdown":"Don&#39;t make your life difficult, put the queries in a properties file (with any key), load it, and iterate over the valueSet.","body":"Don&#39;t make your life difficult, put the queries in a properties file (with any key), load it, and iterate over the valueSet."},{"owner":{"account_id":1379782,"reputation":1108,"user_id":1313047,"accept_rate":62,"display_name":"Velth"},"score":0,"creation_date":1369146776,"post_id":16672539,"comment_id":23989206,"body_markdown":"That ain&#39;t a possible solution, since I need to work with I get, I cannot demand a format as input. The input is a text file containing SQL commands, which I need to extract/parse.","body":"That ain&#39;t a possible solution, since I need to work with I get, I cannot demand a format as input. The input is a text file containing SQL commands, which I need to extract/parse."},{"owner":{"account_id":1251686,"reputation":29348,"user_id":1531054,"accept_rate":95,"display_name":"s.d"},"score":4,"creation_date":1369146893,"post_id":16672539,"comment_id":23989264,"body_markdown":"Any chance for whoever created that string to include &lt;query&gt;...&lt;/query&gt; ? Using plain text for structured information and forcing a developer to live with it seems a deliberate cruelty.","body":"Any chance for whoever created that string to include &lt;query&gt;...&lt;/query&gt; ? Using plain text for structured information and forcing a developer to live with it seems a deliberate cruelty."},{"owner":{"account_id":1387645,"reputation":7926,"user_id":1319284,"accept_rate":69,"display_name":"kutschkem"},"score":0,"creation_date":1369147229,"post_id":16672539,"comment_id":23989481,"body_markdown":"What is your pseudocode example matching? Looks almost exactly like one of the solutions, so what does not work?","body":"What is your pseudocode example matching? Looks almost exactly like one of the solutions, so what does not work?"},{"owner":{"account_id":1153709,"reputation":5117,"user_id":1134885,"display_name":"NovaDenizen"},"score":2,"creation_date":1369147318,"post_id":16672539,"comment_id":23989533,"body_markdown":"Regexps are not a shortcut to parsing.  Learn to parse.","body":"Regexps are not a shortcut to parsing.  Learn to parse."}],"answers":[{"tags":[],"owner":{"account_id":1529045,"reputation":3980,"user_id":1426742,"accept_rate":74,"display_name":"Walls"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1369146984,"creation_date":1369146984,"answer_id":16672705,"question_id":16672539,"body_markdown":"`(?m)^(UPDATE|SELECT|INSERT INTO).*;$` should work.  This would extend the pattern to match over newlines.  It should be able to loop through and find all your SQL.\r\n\r\nLooking at the example you provided it will match your commands until the `;`.  You can see the example used for testing [here](http://rubular.com/r/LTxNI9Seay).","title":"Regular expression to extract SQL query","body":"<p><code>(?m)^(UPDATE|SELECT|INSERT INTO).*;$</code> should work.  This would extend the pattern to match over newlines.  It should be able to loop through and find all your SQL.</p>\n\n<p>Looking at the example you provided it will match your commands until the <code>;</code>.  You can see the example used for testing <a href=\"http://rubular.com/r/LTxNI9Seay\" rel=\"nofollow\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":1033846,"reputation":3585,"user_id":1041631,"accept_rate":60,"display_name":"Lzh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1369147005,"creation_date":1369147005,"answer_id":16672713,"question_id":16672539,"body_markdown":"If you&#39;re dealing with a language, create a lexer that tokenizes your string. Use [JFlex][1], which is a lexical analyzer generator. It generates a Java class that splits a string into tokens based on a grammar specified in a special file. Take the relevant grammar rules from [this file][2].\r\n\r\nParsing is a separate process than tokenization (or lexical analysis). You might want to use a parser generator, after lexical analysis, if lexical analysis is not enough.\r\n\r\n  [1]: http://jflex.de\r\n  [2]: http://yaxx.googlecode.com/svn/trunk/sql/scn2.l","title":"Regular expression to extract SQL query","body":"<p>If you're dealing with a language, create a lexer that tokenizes your string. Use <a href=\"http://jflex.de\" rel=\"nofollow\">JFlex</a>, which is a lexical analyzer generator. It generates a Java class that splits a string into tokens based on a grammar specified in a special file. Take the relevant grammar rules from <a href=\"http://yaxx.googlecode.com/svn/trunk/sql/scn2.l\" rel=\"nofollow\">this file</a>.</p>\n\n<p>Parsing is a separate process than tokenization (or lexical analysis). You might want to use a parser generator, after lexical analysis, if lexical analysis is not enough.</p>\n"},{"tags":[],"owner":{"account_id":2466460,"reputation":17100,"user_id":2149440,"accept_rate":82,"display_name":"Bart"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1369147618,"creation_date":1369147618,"answer_id":16672933,"question_id":16672539,"body_markdown":"You can match it &quot;properly&quot; as long as the semicolon is the last non-whitespace character on that line.\r\n\r\n    final String regex = ^(SELECT|UPDATE|INSERT)[\\s\\S]+?\\;\\s*?$\r\n\r\n    final Pattern p = Pattern.compile(regex, Pattern.MULTILINE);\r\n    final Matcher matcher = p.matcher(content);","title":"Regular expression to extract SQL query","body":"<p>You can match it \"properly\" as long as the semicolon is the last non-whitespace character on that line.</p>\n\n<pre><code>final String regex = ^(SELECT|UPDATE|INSERT)[\\s\\S]+?\\;\\s*?$\n\nfinal Pattern p = Pattern.compile(regex, Pattern.MULTILINE);\nfinal Matcher matcher = p.matcher(content);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2602354,"reputation":2547,"user_id":2254382,"display_name":"melwil"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1476259467,"creation_date":1369148678,"answer_id":16673307,"question_id":16672539,"body_markdown":"I&#39;ll start off by saying that this is not a good way of doing it, and strongly urge you to find another method of doing it, preferrably tagging it properly where the statements are made, so you don&#39;t end up in this situation.\r\n\r\nThat being said, SQL requires it to start with one of the following; `DELETE`, `SELECT`, `WITH`, `UPDATE` or `INSERT INTO`. It also requires that the input ends with `;`.\r\n\r\nWe can use this to grab all sequences matching SQL with the following:\r\n\r\n    final String regex = &quot;^(INSERT INTO|UPDATE|SELECT|WITH|DELETE)(?:[^;&#39;]|(?:&#39;[^&#39;]+&#39;))+;\\\\s*$&quot;;\r\n    final Pattern p = Pattern.compile(regex, Pattern.MULTILINE | Pattern.DOTALL);\r\n\r\nGroup 1 now holds the operating word, in case you wish to filter valid SQL on `UPDATE` or `SELECT`.\r\n\r\nSee the regex in action, as well as a cave-at here:\r\n\r\nhttps://regex101.com/r/dt9XTK/2","title":"Regular expression to extract SQL query","body":"<p>I'll start off by saying that this is not a good way of doing it, and strongly urge you to find another method of doing it, preferrably tagging it properly where the statements are made, so you don't end up in this situation.</p>\n\n<p>That being said, SQL requires it to start with one of the following; <code>DELETE</code>, <code>SELECT</code>, <code>WITH</code>, <code>UPDATE</code> or <code>INSERT INTO</code>. It also requires that the input ends with <code>;</code>.</p>\n\n<p>We can use this to grab all sequences matching SQL with the following:</p>\n\n<pre><code>final String regex = \"^(INSERT INTO|UPDATE|SELECT|WITH|DELETE)(?:[^;']|(?:'[^']+'))+;\\\\s*$\";\nfinal Pattern p = Pattern.compile(regex, Pattern.MULTILINE | Pattern.DOTALL);\n</code></pre>\n\n<p>Group 1 now holds the operating word, in case you wish to filter valid SQL on <code>UPDATE</code> or <code>SELECT</code>.</p>\n\n<p>See the regex in action, as well as a cave-at here:</p>\n\n<p><a href=\"https://regex101.com/r/dt9XTK/2\" rel=\"nofollow\">https://regex101.com/r/dt9XTK/2</a></p>\n"},{"tags":[],"owner":{"account_id":59490,"reputation":1449,"user_id":178003,"display_name":"Jerome"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1369157075,"creation_date":1369157075,"answer_id":16675951,"question_id":16672539,"body_markdown":"SQL is complicated enough that you will need context to find all statements, meaning that you can&#39;t do this with a regular expression.\r\n\r\nFor example:\r\n\r\n    SELECT Model FROM Product\r\n    WHERE ManufacturerID IN (SELECT ManufacturerID FROM Manufacturer \r\n    WHERE Manufacturer = &#39;Dell&#39;)\r\n\r\n(example comes from http://www.sql-tutorial.com/sql-nested-queries-sql-tutorial/). Nested queries can be nested multiple times, start with different values, etc. **If** you could write a regular expression for the subset you are interested in, it would be unreadable.\r\n\r\n[ANTLR][1] has a [SQL 2003 grammar][2] available (I haven&#39;t tried it).\r\n\r\n\r\n  [1]: http://www.antlr3.org/\r\n  [2]: http://www.antlr3.org/grammar/1302709126925/SQL2003_Grammar.zip","title":"Regular expression to extract SQL query","body":"<p>SQL is complicated enough that you will need context to find all statements, meaning that you can't do this with a regular expression.</p>\n\n<p>For example:</p>\n\n<pre><code>SELECT Model FROM Product\nWHERE ManufacturerID IN (SELECT ManufacturerID FROM Manufacturer \nWHERE Manufacturer = 'Dell')\n</code></pre>\n\n<p>(example comes from <a href=\"http://www.sql-tutorial.com/sql-nested-queries-sql-tutorial/\" rel=\"nofollow\">http://www.sql-tutorial.com/sql-nested-queries-sql-tutorial/</a>). Nested queries can be nested multiple times, start with different values, etc. <strong>If</strong> you could write a regular expression for the subset you are interested in, it would be unreadable.</p>\n\n<p><a href=\"http://www.antlr3.org/\" rel=\"nofollow\">ANTLR</a> has a <a href=\"http://www.antlr3.org/grammar/1302709126925/SQL2003_Grammar.zip\" rel=\"nofollow\">SQL 2003 grammar</a> available (I haven't tried it).</p>\n"}],"owner":{"account_id":1379782,"reputation":1108,"user_id":1313047,"accept_rate":62,"display_name":"Velth"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19292,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":5,"score":6,"last_activity_date":1692854815,"creation_date":1369146444,"question_id":16672539,"body_markdown":"Is there a regex which extracts SQL queries from a string? I&#39;m ***NOT*** interested to validate any SQL syntax, rather, and only extracting a selection of SQL commands. This to parse a given SQL file/string in a flexible manner.\r\n\r\nGiven is the following SQL file/string example:\r\n\r\n    SELECT\r\n        *\r\n    FROM\r\n        test_table\r\n    WHERE\r\n        test_row = &#39;Testing ; semicolon&#39;;\r\n    \r\n    SELECT * FROM another_test_table;\r\n\r\n    INSERT INTO \r\n        table_name \r\n    VALUES \r\n        (value1,&#39;value which contains semicolon ;;;;&#39;,value3,...);\r\n\r\nSome pseudocode example would be: `^(UPDATE|SELECT|INSERT INTO)(.*)(;)$`. In the future I&#39;m looking to extend this with all (possible) commands.\r\n\r\n - Look for a starting match with either: (UPDATE|SELECT|INSERT|INTO)\r\n - Zero or more `any character` (including whitespaces and newlines)\r\n - Stop at `;`, which delimits the SQL query.\r\n\r\nWhenever this would be possible via a regex the following Java code is able to extract all SQL commands:\r\n\r\n    final String regex = &quot;LOOKING_FOR_THIS_ONE&quot;;\r\n    final Pattern p = Pattern.compile(regex, Pattern.MULTILINE);\r\n    final Matcher matcher = p.matcher(content);\r\n    \r\n    while (matcher.find()) {\r\n      // matcher.group() now contains the full SQL command\r\n    }\r\n","title":"Regular expression to extract SQL query","body":"<p>Is there a regex which extracts SQL queries from a string? I'm <em><strong>NOT</strong></em> interested to validate any SQL syntax, rather, and only extracting a selection of SQL commands. This to parse a given SQL file/string in a flexible manner.</p>\n<p>Given is the following SQL file/string example:</p>\n<pre><code>SELECT\n    *\nFROM\n    test_table\nWHERE\n    test_row = 'Testing ; semicolon';\n\nSELECT * FROM another_test_table;\n\nINSERT INTO \n    table_name \nVALUES \n    (value1,'value which contains semicolon ;;;;',value3,...);\n</code></pre>\n<p>Some pseudocode example would be: <code>^(UPDATE|SELECT|INSERT INTO)(.*)(;)$</code>. In the future I'm looking to extend this with all (possible) commands.</p>\n<ul>\n<li>Look for a starting match with either: (UPDATE|SELECT|INSERT|INTO)</li>\n<li>Zero or more <code>any character</code> (including whitespaces and newlines)</li>\n<li>Stop at <code>;</code>, which delimits the SQL query.</li>\n</ul>\n<p>Whenever this would be possible via a regex the following Java code is able to extract all SQL commands:</p>\n<pre><code>final String regex = &quot;LOOKING_FOR_THIS_ONE&quot;;\nfinal Pattern p = Pattern.compile(regex, Pattern.MULTILINE);\nfinal Matcher matcher = p.matcher(content);\n\nwhile (matcher.find()) {\n  // matcher.group() now contains the full SQL command\n}\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":2509313,"reputation":4808,"user_id":2182172,"display_name":"Lone nebula"},"score":2,"creation_date":1366960052,"post_id":16230586,"comment_id":23216320,"body_markdown":"Are `m` and `m1` the same object?","body":"Are <code>m</code> and <code>m1</code> the same object?"},{"owner":{"display_name":"user2322618"},"score":0,"creation_date":1366960194,"post_id":16230586,"comment_id":23216385,"body_markdown":"oh yes, i&#39;d messed up with editing my code","body":"oh yes, i&#39;d messed up with editing my code"},{"owner":{"account_id":39580,"reputation":385624,"user_id":114251,"accept_rate":87,"display_name":"Arun P Johny"},"score":0,"creation_date":1366960245,"post_id":16230586,"comment_id":23216406,"body_markdown":"what do you mean by `always pass the first occurrence of the regex`?","body":"what do you mean by <code>always pass the first occurrence of the regex</code>?"},{"owner":{"account_id":39580,"reputation":385624,"user_id":114251,"accept_rate":87,"display_name":"Arun P Johny"},"score":0,"creation_date":1366960269,"post_id":16230586,"comment_id":23216418,"body_markdown":"I&#39;m getting the response `/8/,\n/5/,\n/6/,\n/7/`","body":"I&#39;m getting the response <code>&#47;8&#47;, &#47;5&#47;, &#47;6&#47;, &#47;7&#47;</code>"},{"owner":{"display_name":"user2322618"},"score":0,"creation_date":1366960611,"post_id":16230586,"comment_id":23216583,"body_markdown":"I initially named it with m1 and edited it to m just to clean the code. Error still exists","body":"I initially named it with m1 and edited it to m just to clean the code. Error still exists"},{"owner":{"account_id":1251686,"reputation":29348,"user_id":1531054,"accept_rate":95,"display_name":"s.d"},"score":0,"creation_date":1366960614,"post_id":16230586,"comment_id":23216585,"body_markdown":"You&#39;re grouping the regex, first `find()` should give you all matching groups (if any).","body":"You&#39;re grouping the regex, first <code>find()</code> should give you all matching groups (if any)."}],"answers":[{"tags":[],"owner":{"account_id":2305374,"reputation":44549,"user_id":2024761,"display_name":"Rahul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366960786,"creation_date":1366960269,"answer_id":16230668,"question_id":16230586,"body_markdown":"I think you need to do this, as you need only the `number` between those `slashes`.\r\n\r\n    while (m.find()) {\r\n        System.out.println(m.group(2));\r\n    }\r\n\r\n**group(0)** - gives the whole match `(/n/)`\r\n\r\n**group(1)** - gives you the first slash `(/)`\r\n\r\n**group(2)** - gives you the number `(n)`\r\n\r\n**group(3)** - gives you the second slash `(/)`","title":"First instance does not match using find() method","body":"<p>I think you need to do this, as you need only the <code>number</code> between those <code>slashes</code>.</p>\n\n<pre><code>while (m.find()) {\n    System.out.println(m.group(2));\n}\n</code></pre>\n\n<p><strong>group(0)</strong> - gives the whole match <code>(/n/)</code></p>\n\n<p><strong>group(1)</strong> - gives you the first slash <code>(/)</code></p>\n\n<p><strong>group(2)</strong> - gives you the number <code>(n)</code></p>\n\n<p><strong>group(3)</strong> - gives you the second slash <code>(/)</code></p>\n"},{"tags":[],"owner":{"account_id":39580,"reputation":385624,"user_id":114251,"accept_rate":87,"display_name":"Arun P Johny"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1366960831,"creation_date":1366960325,"answer_id":16230688,"question_id":16230586,"body_markdown":"If you want only the number to be printed use `m.group(2)`.\r\n\r\n    System.out.println(m.group(2));\r\n\r\nAnother solution is to use [lookahead and lookbehind][1]\r\n\r\n\r\n    Pattern p = Pattern.compile(&quot;(?&lt;=\\\\/)(\\\\d+)(?=\\\\/)&quot;);\r\n    Matcher m = p.matcher(&quot;A/8/E/5/F/6/G/7/H&quot;);\r\n    while (m.find()) {\r\n    \tSystem.out.println(m.group(0));\r\n    }\r\n\r\n\r\n  [1]: http://www.regular-expressions.info/lookaround.html","title":"First instance does not match using find() method","body":"<p>If you want only the number to be printed use <code>m.group(2)</code>.</p>\n\n<pre><code>System.out.println(m.group(2));\n</code></pre>\n\n<p>Another solution is to use <a href=\"http://www.regular-expressions.info/lookaround.html\" rel=\"nofollow\">lookahead and lookbehind</a></p>\n\n<pre><code>Pattern p = Pattern.compile(\"(?&lt;=\\\\/)(\\\\d+)(?=\\\\/)\");\nMatcher m = p.matcher(\"A/8/E/5/F/6/G/7/H\");\nwhile (m.find()) {\n    System.out.println(m.group(0));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":545053,"reputation":191,"user_id":914695,"display_name":"lizard"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366960537,"creation_date":1366960537,"answer_id":16230752,"question_id":16230586,"body_markdown":"Assuming you mean to use m, your groups are &#39;/&#39;, &#39;8&#39; and &#39;/&#39;. Try &#39;\\\\/(\\\\d+)\\\\/&#39; for matching just &#39;8&#39;","title":"First instance does not match using find() method","body":"<p>Assuming you mean to use m, your groups are '/', '8' and '/'. Try '\\/(\\d+)\\/' for matching just '8'</p>\n"},{"tags":[],"owner":{"account_id":1894536,"reputation":54819,"user_id":1711796,"accept_rate":100,"display_name":"Bernhard Barker"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366960947,"creation_date":1366960947,"answer_id":16230868,"question_id":16230586,"body_markdown":"You must use `group(i)` to extract the i-th thing in brackets (excluding non-capturing groups).\r\n\r\n`group(0)` or `group()` is the whole pattern.\r\n\r\nSo, for your example, you need `group(2)`.\r\n\r\nAlso note your code won&#39;t work on `8/5/4/3` since `8` can&#39;t match because it doesn&#39;t have a `/` before it, `4` can&#39;t match because `5` used the `/` in between and `3` can&#39;t match because it doesn&#39;t have a `/` after it. You need to include check for start of string (`^`) for `8` and end of string (`$`) for `3` and use look-ahead `(?=...)` for `4`.\r\n\r\nI also used a non-capturing group `(?:...)`, so you can use `group(1)` instead of `group(2)` (this is the only difference `(?:...)` makes).\r\n\r\nAlso, you don&#39;t need to escape `/`.\r\n\r\nFinal code:\r\n\r\n    Pattern p = Pattern.compile(&quot;(?:^|/)(\\\\d+)(?=/|$)&quot;);\r\n    Matcher m = p.matcher(&quot;8/5/4/3&quot;);\r\n    while (m.find()) {\r\n        System.out.println(m.group(1));\r\n    }\r\n\r\n[Regular expression reference](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html).\r\n\r\n[Test](https://ideone.com/13rUGJ).","title":"First instance does not match using find() method","body":"<p>You must use <code>group(i)</code> to extract the i-th thing in brackets (excluding non-capturing groups).</p>\n\n<p><code>group(0)</code> or <code>group()</code> is the whole pattern.</p>\n\n<p>So, for your example, you need <code>group(2)</code>.</p>\n\n<p>Also note your code won't work on <code>8/5/4/3</code> since <code>8</code> can't match because it doesn't have a <code>/</code> before it, <code>4</code> can't match because <code>5</code> used the <code>/</code> in between and <code>3</code> can't match because it doesn't have a <code>/</code> after it. You need to include check for start of string (<code>^</code>) for <code>8</code> and end of string (<code>$</code>) for <code>3</code> and use look-ahead <code>(?=...)</code> for <code>4</code>.</p>\n\n<p>I also used a non-capturing group <code>(?:...)</code>, so you can use <code>group(1)</code> instead of <code>group(2)</code> (this is the only difference <code>(?:...)</code> makes).</p>\n\n<p>Also, you don't need to escape <code>/</code>.</p>\n\n<p>Final code:</p>\n\n<pre><code>Pattern p = Pattern.compile(\"(?:^|/)(\\\\d+)(?=/|$)\");\nMatcher m = p.matcher(\"8/5/4/3\");\nwhile (m.find()) {\n    System.out.println(m.group(1));\n}\n</code></pre>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html\" rel=\"nofollow\">Regular expression reference</a>.</p>\n\n<p><a href=\"https://ideone.com/13rUGJ\" rel=\"nofollow\">Test</a>.</p>\n"}],"owner":{"display_name":"user2322618"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1692854805,"creation_date":1366959875,"question_id":16230586,"body_markdown":"I am searching for the substrings with a number between forward slashes (eg. /n/) but the find() method always pass the first occurrence of the regex. \r\nWhy? Is there something wrong with my regex?\r\n\r\n    Pattern p = Pattern.compile(&quot;(\\\\/)(\\\\d+)(\\\\/)&quot;); \r\n    Matcher m = p.matcher(&quot;A/8/E/5/F/6/G/7/H&quot;);\r\n    while (m.find()) {\r\n        System.out.println(m.group(0));\r\n    }\r\n        \r\n","title":"First instance does not match using find() method","body":"<p>I am searching for the substrings with a number between forward slashes (eg. /n/) but the find() method always pass the first occurrence of the regex. \nWhy? Is there something wrong with my regex?</p>\n\n<pre><code>Pattern p = Pattern.compile(\"(\\\\/)(\\\\d+)(\\\\/)\"); \nMatcher m = p.matcher(\"A/8/E/5/F/6/G/7/H\");\nwhile (m.find()) {\n    System.out.println(m.group(0));\n}\n</code></pre>\n"},{"tags":["java","regex","optimization"],"comments":[{"owner":{"account_id":733809,"reputation":43147,"user_id":1211528,"accept_rate":57,"display_name":"plalx"},"score":2,"creation_date":1366445268,"post_id":16118131,"comment_id":23020316,"body_markdown":"Just saying, but the `.` matches any characters. You have to escape it if you want to match an actual `.`.","body":"Just saying, but the <code>.</code> matches any characters. You have to escape it if you want to match an actual <code>.</code>."},{"owner":{"display_name":"user1131435"},"score":0,"creation_date":1366445582,"post_id":16118131,"comment_id":23020377,"body_markdown":"Are you sure your performance issues are with regex and not the database?","body":"Are you sure your performance issues are with regex and not the database?"},{"owner":{"display_name":"user1813228"},"score":0,"creation_date":1366445699,"post_id":16118131,"comment_id":23020403,"body_markdown":"No not the database. I have setup instrumentation at each component level. So on the Database side, it is looking fine. But only in this component I am seeing lot of variations. In this class, I know one problem can be mutltihreading but the other problem I am suspecting this Regex matching. So that is the reason I just wanted to make sure whether using regex like will cause some performance degradation or not.","body":"No not the database. I have setup instrumentation at each component level. So on the Database side, it is looking fine. But only in this component I am seeing lot of variations. In this class, I know one problem can be mutltihreading but the other problem I am suspecting this Regex matching. So that is the reason I just wanted to make sure whether using regex like will cause some performance degradation or not."},{"owner":{"display_name":"user1131435"},"score":0,"creation_date":1366445934,"post_id":16118131,"comment_id":23020460,"body_markdown":"@Farhan Try a crude `System.nanoTime()` benchmark?","body":"@Farhan Try a crude <code>System.nanoTime()</code> benchmark?"},{"owner":{"account_id":325503,"reputation":10378,"user_id":646723,"display_name":"Bruce Martin"},"score":0,"creation_date":1366446054,"post_id":16118131,"comment_id":23020477,"body_markdown":"Also could make r a static constant - saves recompiling it each call","body":"Also could make r a static constant - saves recompiling it each call"},{"owner":{"account_id":37482,"reputation":33416,"user_id":107152,"accept_rate":87,"display_name":"Qtax"},"score":2,"creation_date":1366446691,"post_id":16118131,"comment_id":23020617,"body_markdown":"Escapte the `.`. The expression it self doesn&#39;t have any performance issues. Try compiling the expression outside of the function, and not on every function call.","body":"Escapte the <code>.</code>. The expression it self doesn&#39;t have any performance issues. Try compiling the expression outside of the function, and not on every function call."},{"owner":{"display_name":"user1813228"},"score":0,"creation_date":1366447338,"post_id":16118131,"comment_id":23020727,"body_markdown":"@Qtax, thanks for suggestion. I was not able to understand your first suggestion. Escaping `.`? You are talking about `VALID_DOMAIN`? Right? Can you provide an example what change I need to make corresponding to that? Thanks for the help.","body":"@Qtax, thanks for suggestion. I was not able to understand your first suggestion. Escaping <code>.</code>? You are talking about <code>VALID_DOMAIN</code>? Right? Can you provide an example what change I need to make corresponding to that? Thanks for the help."},{"owner":{"account_id":37482,"reputation":33416,"user_id":107152,"accept_rate":87,"display_name":"Qtax"},"score":0,"creation_date":1366448090,"post_id":16118131,"comment_id":23020877,"body_markdown":"@FarhanJamal, you escape regex meta characters, like `.` with a backslash. So the regex to match a `.` would be `\\.`. Which in a Java string is quoted as `&quot;\\\\.&quot;` (double backslash).","body":"@FarhanJamal, you escape regex meta characters, like <code>.</code> with a backslash. So the regex to match a <code>.</code> would be <code>\\.</code>. Which in a Java string is quoted as <code>&quot;\\\\.&quot;</code> (double backslash)."}],"answers":[{"tags":[],"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1366450938,"creation_date":1366446827,"answer_id":16118322,"question_id":16118131,"body_markdown":"   \r\nI used caliper to test this and this and the results are: if u compile the Pattern before every method call it is going to be the fastest way.\r\n\r\n**You regex method is the fastest wayto do it, BUT** he only change you need to make is to\r\ncompute the Pattern upfront, not every time:\r\n\r\n     private static Pattern p = Pattern.compile(VALID_DOMAIN);\r\n\r\nthen in your method:\r\n\r\n     Matcher matcher = pattern.matcher(input); ...\r\n\r\nFor the ones interested this is the settings I used for caliper: --warmupMillis 10000  --runMillis 100\r\n\r\n     package stackoverflow;\r\n\r\n     import java.util.regex.Matcher;\r\n     import java.util.regex.Pattern;\r\n\r\n     import com.google.caliper.Param;\r\n     import com.google.caliper.Runner;\r\n     import com.google.caliper.SimpleBenchmark;\r\n     import com.google.common.base.Splitter;\r\n     import com.google.common.collect.Iterables;\r\n\r\n     public class RegexPerformance extends SimpleBenchmark {\r\n          private static final String firstPart    = &quot;technology|computer|sdc|adj|wdc|pp|stub&quot;;\r\n          private static final String secondPart   = &quot;profile|preference|experience|behavioral&quot;;\r\n          private static final String VALID_DOMAIN = &quot;(technology|computer|sdc|adj|wdc|pp|stub)\\\\.(profile|preference|experience|behavioral)&quot;;\r\n\t\r\n          @Param({&quot;technology.profile.financial&quot;, &quot;computer.preference.test&quot;,&quot;sdc.experience.test&quot;})\r\n          private String input;\r\n\t\r\n          public static void main(String[] args) {\r\n               Runner.main(RegexPerformance.class, args);\r\n          }\r\n\t\r\n          public void timeRegexMatch(int reps){\r\n              for(int i=0;i&lt;reps;++i){\r\n                  regexMatch(input);\r\n              }\r\n          }\r\n\t\r\n\t\r\n          public void timeGuavaMatch(int reps){\r\n              for(int i=0;i&lt;reps;++i){\r\n                  guavaMatch(input);\r\n              }\r\n          }\r\n\r\n          public void timeRegexMatchOutsideMethod(int reps){\r\n              for(int i=0;i&lt;reps;++i){\r\n                  regexMatchOutsideMethod(input);\r\n              }\r\n          }\r\n\t\r\n\t\r\n        public String regexMatch(String input){\r\n            Pattern p = Pattern.compile(VALID_DOMAIN);\r\n            Matcher m = p.matcher(input);\r\n            if(m.find()) return m.group();\r\n            return null;\r\n        }\r\n\r\n        public String regexMatchOutsideMethod(String input){\r\n              Matcher matcher = pattern.matcher(input);\r\n              if(matcher.find()) return matcher.group();\r\n              return null;\r\n        }\r\n\t\r\n        public String guavaMatch(String input){\r\n            Iterable&lt;String&gt; tokens = Splitter.on(&quot;.&quot;).omitEmptyStrings().split(input);\r\n            String firstToken  = Iterables.get(tokens, 0);\r\n            String secondToken = Iterables.get(tokens, 1);\r\n            if( (firstPart.contains(firstToken) ) &amp;&amp; (secondPart.contains(secondToken)) ){\r\n                return firstToken+&quot;.&quot;+secondToken;\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n\r\nAnd the results of the test:\r\n\r\n                 RegexMatch technology.profile.financial 2980 ========================\r\n                 RegexMatch     computer.preference.test 2861 =======================\r\n                RegexMatch           sdc.experience.test 3683 ==============================\r\n    RegexMatchOutsideMethod technology.profile.financial  179 =\r\n    RegexMatchOutsideMethod     computer.preference.test  227 =\r\n    RegexMatchOutsideMethod           sdc.experience.test  987 ========\r\n                 GuavaMatch technology.profile.financial  406 ===\r\n                 GuavaMatch     computer.preference.test  421 ===\r\n                GuavaMatch           sdc.experience.test  382 ===","title":"Performance issues in Regular Expression","body":"<p>I used caliper to test this and this and the results are: if u compile the Pattern before every method call it is going to be the fastest way.</p>\n\n<p><strong>You regex method is the fastest wayto do it, BUT</strong> he only change you need to make is to\ncompute the Pattern upfront, not every time:</p>\n\n<pre><code> private static Pattern p = Pattern.compile(VALID_DOMAIN);\n</code></pre>\n\n<p>then in your method:</p>\n\n<pre><code> Matcher matcher = pattern.matcher(input); ...\n</code></pre>\n\n<p>For the ones interested this is the settings I used for caliper: --warmupMillis 10000  --runMillis 100</p>\n\n<pre><code> package stackoverflow;\n\n import java.util.regex.Matcher;\n import java.util.regex.Pattern;\n\n import com.google.caliper.Param;\n import com.google.caliper.Runner;\n import com.google.caliper.SimpleBenchmark;\n import com.google.common.base.Splitter;\n import com.google.common.collect.Iterables;\n\n public class RegexPerformance extends SimpleBenchmark {\n      private static final String firstPart    = \"technology|computer|sdc|adj|wdc|pp|stub\";\n      private static final String secondPart   = \"profile|preference|experience|behavioral\";\n      private static final String VALID_DOMAIN = \"(technology|computer|sdc|adj|wdc|pp|stub)\\\\.(profile|preference|experience|behavioral)\";\n\n      @Param({\"technology.profile.financial\", \"computer.preference.test\",\"sdc.experience.test\"})\n      private String input;\n\n      public static void main(String[] args) {\n           Runner.main(RegexPerformance.class, args);\n      }\n\n      public void timeRegexMatch(int reps){\n          for(int i=0;i&lt;reps;++i){\n              regexMatch(input);\n          }\n      }\n\n\n      public void timeGuavaMatch(int reps){\n          for(int i=0;i&lt;reps;++i){\n              guavaMatch(input);\n          }\n      }\n\n      public void timeRegexMatchOutsideMethod(int reps){\n          for(int i=0;i&lt;reps;++i){\n              regexMatchOutsideMethod(input);\n          }\n      }\n\n\n    public String regexMatch(String input){\n        Pattern p = Pattern.compile(VALID_DOMAIN);\n        Matcher m = p.matcher(input);\n        if(m.find()) return m.group();\n        return null;\n    }\n\n    public String regexMatchOutsideMethod(String input){\n          Matcher matcher = pattern.matcher(input);\n          if(matcher.find()) return matcher.group();\n          return null;\n    }\n\n    public String guavaMatch(String input){\n        Iterable&lt;String&gt; tokens = Splitter.on(\".\").omitEmptyStrings().split(input);\n        String firstToken  = Iterables.get(tokens, 0);\n        String secondToken = Iterables.get(tokens, 1);\n        if( (firstPart.contains(firstToken) ) &amp;&amp; (secondPart.contains(secondToken)) ){\n            return firstToken+\".\"+secondToken;\n        }\n        return null;\n    }\n}\n</code></pre>\n\n<p>And the results of the test:</p>\n\n<pre><code>             RegexMatch technology.profile.financial 2980 ========================\n             RegexMatch     computer.preference.test 2861 =======================\n            RegexMatch           sdc.experience.test 3683 ==============================\nRegexMatchOutsideMethod technology.profile.financial  179 =\nRegexMatchOutsideMethod     computer.preference.test  227 =\nRegexMatchOutsideMethod           sdc.experience.test  987 ========\n             GuavaMatch technology.profile.financial  406 ===\n             GuavaMatch     computer.preference.test  421 ===\n            GuavaMatch           sdc.experience.test  382 ===\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1706574,"reputation":13314,"user_id":1565512,"display_name":"MikeM"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1366449399,"creation_date":1366449399,"answer_id":16118635,"question_id":16118131,"body_markdown":"Two small points:\r\n\r\nAs well as compiling the expression outside of the function, as mentioned in the comments, you could make the `()` non-capturing so the content matched by each is not saved, i.e.\r\n\r\n    String  VALID_DOMAIN = &quot;(?:technology|computer|sdc|adj|wdc|pp|stub)\\\\.(?:profile|preference|experience|behavioral)&quot;;\r\n\r\nand if the valid domain must always appear at the beginning of the attribute name you could perhaps use the `lookingAt` method instead of `find`, so the the match can fail quicker, i.e.\r\n\r\n     if (m.lookingAt()) {\r\n\r\nAnd if the expression was compiled outside of the function, you could add `Pattern.CASE_INSENSITIVE` so then you wouldn&#39;t have to call `toLowerCase()` on the `attrName` each time.","title":"Performance issues in Regular Expression","body":"<p>Two small points:</p>\n\n<p>As well as compiling the expression outside of the function, as mentioned in the comments, you could make the <code>()</code> non-capturing so the content matched by each is not saved, i.e.</p>\n\n<pre><code>String  VALID_DOMAIN = \"(?:technology|computer|sdc|adj|wdc|pp|stub)\\\\.(?:profile|preference|experience|behavioral)\";\n</code></pre>\n\n<p>and if the valid domain must always appear at the beginning of the attribute name you could perhaps use the <code>lookingAt</code> method instead of <code>find</code>, so the the match can fail quicker, i.e.</p>\n\n<pre><code> if (m.lookingAt()) {\n</code></pre>\n\n<p>And if the expression was compiled outside of the function, you could add <code>Pattern.CASE_INSENSITIVE</code> so then you wouldn't have to call <code>toLowerCase()</code> on the <code>attrName</code> each time.</p>\n"},{"tags":[],"owner":{"account_id":10959,"reputation":74232,"user_id":20938,"display_name":"Alan Moore"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1366449889,"creation_date":1366449889,"answer_id":16118703,"question_id":16118131,"body_markdown":"Is there any reason why you can&#39;t save the regex as a Pattern ratter than as a string?  If the regex never changes, you&#39;re wasting a lot of time recompiling the regex every time you use it.  For such a simple pattern, compiling the regex probably takes a lot more time than actually matching it.\r\n\r\nAs for the regex itself, there are some changes I would recommend.  These changes will make the regex slightly more efficient, but it probably won&#39;t be enough to notice. The purpose is to make it more robust.\r\n\r\n- Enclose it in word boundaries to avoid false positives on strings like `foo_technology.profile` or `technology.profile_bar`.  I&#39;m sure you know that kind of thing will happen in your case, but why take even the smallest risk when it&#39;s so easy to avoid?\r\n- Escape the dot, as [@plaix suggested](https://stackoverflow.com/questions/16118131/performance-issues-in-regular-expression#comment23020316_16118131).\r\n- Use non-capturing groups instead of capturing. (Assuming you don&#39;t really need to break out the individual components of the attribute name.)\r\n\r\n&amp;nbsp;\r\n\r\n    static final Pattern VALID_DOMAIN_PATTERN = Pattern.compile(\r\n        &quot;\\\\b(?:technology|computer|sdc|adj|wdc|pp|stub)\\\\.(?:profile|preference|experience|behavioral)\\\\b&quot;);","title":"Performance issues in Regular Expression","body":"<p>Is there any reason why you can't save the regex as a Pattern ratter than as a string?  If the regex never changes, you're wasting a lot of time recompiling the regex every time you use it.  For such a simple pattern, compiling the regex probably takes a lot more time than actually matching it.</p>\n\n<p>As for the regex itself, there are some changes I would recommend.  These changes will make the regex slightly more efficient, but it probably won't be enough to notice. The purpose is to make it more robust.</p>\n\n<ul>\n<li>Enclose it in word boundaries to avoid false positives on strings like <code>foo_technology.profile</code> or <code>technology.profile_bar</code>.  I'm sure you know that kind of thing will happen in your case, but why take even the smallest risk when it's so easy to avoid?</li>\n<li>Escape the dot, as <a href=\"https://stackoverflow.com/questions/16118131/performance-issues-in-regular-expression#comment23020316_16118131\">@plaix suggested</a>.</li>\n<li>Use non-capturing groups instead of capturing. (Assuming you don't really need to break out the individual components of the attribute name.)</li>\n</ul>\n\n<p>&nbsp;</p>\n\n<pre><code>static final Pattern VALID_DOMAIN_PATTERN = Pattern.compile(\n    \"\\\\b(?:technology|computer|sdc|adj|wdc|pp|stub)\\\\.(?:profile|preference|experience|behavioral)\\\\b\");\n</code></pre>\n"}],"owner":{"display_name":"user1813228"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1387,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":16118322,"answer_count":3,"score":2,"last_activity_date":1692854780,"creation_date":1366445057,"question_id":16118131,"body_markdown":"I am having my REST service which is running under heavy load, meaning it is getting lot of traffic around some million read calls per day. My REST servcie will do the lookup from the database basis on the userID and retrieve few bunch of columns corresponding to that userID.\r\n\r\nSo I am seeing high performance issues in my code currently. I am suspecting that below method will be one of the methods that I should start optimizing first of all.\r\n\r\nBelow method will accept an `attributeName` and then basis on that it will give me the match using the Regular Expression.\r\n\r\nLet&#39;s take an example- If the `attrName` is `technology.profile.financial`\r\n\r\nThen the below method will return me back as `technology.profile`. And this way it will work for other case as well.\r\n\r\n    private String getAttrDomain(String attrName){\r\n\t\tPattern r = Pattern.compile(CommonConstants.VALID_DOMAIN);\r\n\t    Matcher m = r.matcher(attrName.toLowerCase());\r\n\t    if (m.find()) {\r\n\t      return m.group(0);\r\n\t    }\r\n\t    return null;\r\n\t}\r\n\t\r\nIn `CommonConstants` class file\r\n\t\r\n\tString \tVALID_DOMAIN = &quot;(technology|computer|sdc|adj|wdc|pp|stub).(profile|preference|experience|behavioral)&quot;;\r\n\t\r\n\t\r\nI am just trying to see, whether there might be some performance issues here or not using the regex above? If yes, then what&#39;s the best way to rewrite this thing again keeping in mind performance issues?\r\n","title":"Performance issues in Regular Expression","body":"<p>I am having my REST service which is running under heavy load, meaning it is getting lot of traffic around some million read calls per day. My REST servcie will do the lookup from the database basis on the userID and retrieve few bunch of columns corresponding to that userID.</p>\n<p>So I am seeing high performance issues in my code currently. I am suspecting that below method will be one of the methods that I should start optimizing first of all.</p>\n<p>Below method will accept an <code>attributeName</code> and then basis on that it will give me the match using the Regular Expression.</p>\n<p>Let's take an example- If the <code>attrName</code> is <code>technology.profile.financial</code></p>\n<p>Then the below method will return me back as <code>technology.profile</code>. And this way it will work for other case as well.</p>\n<pre><code>private String getAttrDomain(String attrName){\n    Pattern r = Pattern.compile(CommonConstants.VALID_DOMAIN);\n    Matcher m = r.matcher(attrName.toLowerCase());\n    if (m.find()) {\n      return m.group(0);\n    }\n    return null;\n}\n</code></pre>\n<p>In <code>CommonConstants</code> class file</p>\n<pre><code>String  VALID_DOMAIN = &quot;(technology|computer|sdc|adj|wdc|pp|stub).(profile|preference|experience|behavioral)&quot;;\n</code></pre>\n<p>I am just trying to see, whether there might be some performance issues here or not using the regex above? If yes, then what's the best way to rewrite this thing again keeping in mind performance issues?</p>\n"},{"tags":["java","regex"],"answers":[{"tags":[],"owner":{"account_id":1190755,"reputation":48912,"user_id":1163607,"accept_rate":97,"display_name":"AllTooSir"},"down_vote_count":1,"up_vote_count":5,"is_accepted":true,"score":4,"last_activity_date":1366218579,"creation_date":1366216772,"answer_id":16065559,"question_id":16065144,"body_markdown":"`Scanner` is not the appropriate utility to retrieve patterns using its `hasNext(Pattern pattern)` method . It will check if the **next complete token** has the requested pattern . \r\n\r\n[Java API][1] is the best document.\r\n\r\n[1]: http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#hasNext()\r\n\r\nSome excerpts:\r\n\r\n    hasNext() : Returns true if the next complete token matches the specified \r\n    pattern. A complete token is prefixed and postfixed by input that matches \r\n    the delimiter pattern.`\r\n\r\nSo if you change the input to be delimited by space or any other delimiter ( other delimiters have to be set after defining the `Scanner` object ) , it will work. So this should work(for the current pattern):\r\n\r\n    Scanner scannerSegment = new Scanner(&quot;10 11 00 10 10 11 01 00 11 11 10 00&quot;);\r\n\r\nEven this will work(for the current pattern):\r\n\r\n    Scanner scannerSegment = new Scanner(&quot;10,11,00,10,10,11,01,00,11,11,10,00&quot;);\r\n    scannerSegment.useDelimiter(&quot;,&quot;);\r\n\r\n\r\n\r\nEDIT: [Scanner][2] breaks its input into tokens using a delimiter pattern, which by default matches whitespace.\r\n\r\n[2]: http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html","title":"Java Scanner vs Matcher - Regular Expressions, Matcher works, Scanner doesn&#39;t","body":"<p><code>Scanner</code> is not the appropriate utility to retrieve patterns using its <code>hasNext(Pattern pattern)</code> method . It will check if the <strong>next complete token</strong> has the requested pattern . </p>\n\n<p><a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#hasNext%28%29\" rel=\"nofollow\">Java API</a> is the best document.</p>\n\n<p>Some excerpts:</p>\n\n<pre><code>hasNext() : Returns true if the next complete token matches the specified \npattern. A complete token is prefixed and postfixed by input that matches \nthe delimiter pattern.`\n</code></pre>\n\n<p>So if you change the input to be delimited by space or any other delimiter ( other delimiters have to be set after defining the <code>Scanner</code> object ) , it will work. So this should work(for the current pattern):</p>\n\n<pre><code>Scanner scannerSegment = new Scanner(\"10 11 00 10 10 11 01 00 11 11 10 00\");\n</code></pre>\n\n<p>Even this will work(for the current pattern):</p>\n\n<pre><code>Scanner scannerSegment = new Scanner(\"10,11,00,10,10,11,01,00,11,11,10,00\");\nscannerSegment.useDelimiter(\",\");\n</code></pre>\n\n<p>EDIT: <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html\" rel=\"nofollow\">Scanner</a> breaks its input into tokens using a delimiter pattern, which by default matches whitespace.</p>\n"}],"owner":{"account_id":476484,"reputation":8618,"user_id":887421,"accept_rate":68,"display_name":"Achow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3082,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":16065559,"answer_count":1,"score":8,"last_activity_date":1692854767,"creation_date":1366215365,"question_id":16065144,"body_markdown":"Why the 1st block works but the 2nd block doesn&#39;t?\r\n\r\n    int numberOfDigits = 2;\r\n    Pattern p = Pattern.compile(&quot;[01]{&quot;+numberOfDigits+&quot;}&quot;);\r\n    Matcher m = p.matcher(&quot;101100101011010011111000&quot;);\r\n    while(m.find()){\r\n    \tSystem.out.println(m.group());\r\n    }\r\n\r\nBLock 2\r\n   \r\n\r\n    Scanner scannerSegment = new Scanner(&quot;101100101011010011111000&quot;);\r\n       while(scannerSegment.hasNext(p)){\r\n        String segment = scannerSegment.next(p);\r\n         \tSystem.out.println(segment);\r\n    \r\n    \t}\r\n\r\n\r\n","title":"Java Scanner vs Matcher - Regular Expressions, Matcher works, Scanner doesn&#39;t","body":"<p>Why the 1st block works but the 2nd block doesn't?</p>\n\n<pre><code>int numberOfDigits = 2;\nPattern p = Pattern.compile(\"[01]{\"+numberOfDigits+\"}\");\nMatcher m = p.matcher(\"101100101011010011111000\");\nwhile(m.find()){\n    System.out.println(m.group());\n}\n</code></pre>\n\n<p>BLock 2</p>\n\n<pre><code>Scanner scannerSegment = new Scanner(\"101100101011010011111000\");\n   while(scannerSegment.hasNext(p)){\n    String segment = scannerSegment.next(p);\n        System.out.println(segment);\n\n    }\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1610145,"reputation":439,"user_id":1489422,"accept_rate":86,"display_name":"Michael K"},"score":0,"creation_date":1366146193,"post_id":16046938,"comment_id":22897680,"body_markdown":"Also, I want to avoid hard-coding match numbers (matcher.group(1), $2, etc - because I&#39;m not sure how many matches will exist","body":"Also, I want to avoid hard-coding match numbers (matcher.group(1), $2, etc - because I&#39;m not sure how many matches will exist"}],"answers":[{"tags":[],"owner":{"account_id":1894536,"reputation":54819,"user_id":1711796,"accept_rate":100,"display_name":"Bernhard Barker"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1366148434,"creation_date":1366148119,"answer_id":16047535,"question_id":16046938,"body_markdown":"Your regex is problematic since your do `replaceAll`, so it will match `MatcH`, then `MatcH` and `MatcHer` will get replaced in that iteration of the loop. Note that the `\\\\b` doesn&#39;t appear in the output of `group`, so nothing prevents it from replacing `MatcHer`.\r\n\r\nYou can put a `System.out.println` inside the loop to print the output of `group` and the output of `replaceAll` to see what happens and why it does what it does.\r\n\r\nSimplifying your code to just the below will work: (that&#39;s probably &quot;hard-coding match numbers&quot; but I don&#39;t really see a problem with that as it stands and I don&#39;t see a simpler solution)\r\n\r\n    String text = &quot;MatcH one MatcHer two MarcH three&quot;;\r\n    text = text.replaceAll(&quot;\\\\b(M\\\\w*H)\\\\b&quot;, &quot;&lt;wrap&gt;$1&lt;/wrap&gt;&quot;);\r\n\r\nThe above is how regex is supposed to work. If you see that problems may arise in future using something similar to the above, regex may not be the way to go.","title":"How to wrap (surround) java matcher groups with xml?","body":"<p>Your regex is problematic since your do <code>replaceAll</code>, so it will match <code>MatcH</code>, then <code>MatcH</code> and <code>MatcHer</code> will get replaced in that iteration of the loop. Note that the <code>\\\\b</code> doesn't appear in the output of <code>group</code>, so nothing prevents it from replacing <code>MatcHer</code>.</p>\n\n<p>You can put a <code>System.out.println</code> inside the loop to print the output of <code>group</code> and the output of <code>replaceAll</code> to see what happens and why it does what it does.</p>\n\n<p>Simplifying your code to just the below will work: (that's probably \"hard-coding match numbers\" but I don't really see a problem with that as it stands and I don't see a simpler solution)</p>\n\n<pre><code>String text = \"MatcH one MatcHer two MarcH three\";\ntext = text.replaceAll(\"\\\\b(M\\\\w*H)\\\\b\", \"&lt;wrap&gt;$1&lt;/wrap&gt;\");\n</code></pre>\n\n<p>The above is how regex is supposed to work. If you see that problems may arise in future using something similar to the above, regex may not be the way to go.</p>\n"}],"owner":{"account_id":1610145,"reputation":439,"user_id":1489422,"accept_rate":86,"display_name":"Michael K"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1323,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":16047535,"answer_count":1,"score":2,"last_activity_date":1692854757,"creation_date":1366145857,"question_id":16046938,"body_markdown":"Using the following value of a text node...\r\n\r\n    MatcH one MatcHer two MarcH three \r\n\r\n\r\nHow can java matcher.find() be used to create the following output?\r\n\r\n    &lt;wrap&gt;MatcH&lt;/wrap&gt; one MatcHer two &lt;wrap&gt;MarcH&lt;/wrap&gt; three \r\n\r\nAssuming a java regex that captures all words starting with capital &#39;M&#39; and ending with a capital &#39;H&#39; \r\n\r\n    \\bM\\w*H\\b\r\n\r\nBasically, I want to surround anything that matches this regex with **wrap** tags\r\n\r\n    String text = &quot;MatcH one MatcHer two MarcH three&quot;;\r\n    Pattern pattern = Pattern.compile(\\\\bM\\w*H\\b\\);\r\n    Matcher matcher = pattern.matcher(text);\r\n\r\n    // replace each time the regex is found\r\n    while (matcher.find()) {\r\n\t   text = text.replaceAll(matcher.group(), &quot;&lt;wrap&gt;&quot; + \r\n\t\t\t\t+ matcher.group() + &quot;&lt;/wrap&gt;&quot;);\r\n    }\r\n\r\nReplaceFirst/ReplaceAll is not working for me because it results in the following...\r\n\r\n    &lt;wrap&gt;MatcH&lt;/wrap&gt; one &lt;wrap&gt;MatcH&lt;/wrap&gt;er two &lt;wrap&gt;MarcH&lt;/wrap&gt; three\r\n\r\n\r\nThanks in advance...\r\n","title":"How to wrap (surround) java matcher groups with xml?","body":"<p>Using the following value of a text node...</p>\n\n<pre><code>MatcH one MatcHer two MarcH three \n</code></pre>\n\n<p>How can java matcher.find() be used to create the following output?</p>\n\n<pre><code>&lt;wrap&gt;MatcH&lt;/wrap&gt; one MatcHer two &lt;wrap&gt;MarcH&lt;/wrap&gt; three \n</code></pre>\n\n<p>Assuming a java regex that captures all words starting with capital 'M' and ending with a capital 'H' </p>\n\n<pre><code>\\bM\\w*H\\b\n</code></pre>\n\n<p>Basically, I want to surround anything that matches this regex with <strong>wrap</strong> tags</p>\n\n<pre><code>String text = \"MatcH one MatcHer two MarcH three\";\nPattern pattern = Pattern.compile(\\\\bM\\w*H\\b\\);\nMatcher matcher = pattern.matcher(text);\n\n// replace each time the regex is found\nwhile (matcher.find()) {\n   text = text.replaceAll(matcher.group(), \"&lt;wrap&gt;\" + \n            + matcher.group() + \"&lt;/wrap&gt;\");\n}\n</code></pre>\n\n<p>ReplaceFirst/ReplaceAll is not working for me because it results in the following...</p>\n\n<pre><code>&lt;wrap&gt;MatcH&lt;/wrap&gt; one &lt;wrap&gt;MatcH&lt;/wrap&gt;er two &lt;wrap&gt;MarcH&lt;/wrap&gt; three\n</code></pre>\n\n<p>Thanks in advance...</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1383489,"reputation":7088,"user_id":1316000,"accept_rate":66,"display_name":"Rodrigo Sasaki"},"score":0,"creation_date":1366115776,"post_id":16037036,"comment_id":22879475,"body_markdown":"You don&#39;t really need to escape it (although you can if you want, doesn&#39;t make a difference in practice), but regular expressions consider this case, and have a special way to treat it. Check my answer for an example","body":"You don&#39;t really need to escape it (although you can if you want, doesn&#39;t make a difference in practice), but regular expressions consider this case, and have a special way to treat it. Check my answer for an example"}],"answers":[{"tags":[],"owner":{"account_id":116580,"reputation":118703,"user_id":305644,"accept_rate":75,"display_name":"hvgotcodes"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1366115257,"creation_date":1366115257,"answer_id":16037061,"question_id":16037036,"body_markdown":"You need to escape it.\r\n\r\n`\\\\]`\r\n\r\n[See this.][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/5768480/java-regular-expression-and-escaping-meta-characters","title":"pattern matcher","body":"<p>You need to escape it.</p>\n\n<p><code>\\\\]</code></p>\n\n<p><a href=\"https://stackoverflow.com/questions/5768480/java-regular-expression-and-escaping-meta-characters\">See this.</a></p>\n"},{"tags":[],"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1366115262,"creation_date":1366115262,"answer_id":16037065,"question_id":16037036,"body_markdown":"`]` is a special character used to denote the end of a [character class][1] so it needs to be escaped:\r\n\r\n    Pattern pat = Pattern.compile(&quot;[^a-z][^,.:;\\\\]]&quot;);\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/essential/regex/char_classes.html","title":"pattern matcher","body":"<p><code>]</code> is a special character used to denote the end of a <a href=\"http://docs.oracle.com/javase/tutorial/essential/regex/char_classes.html\">character class</a> so it needs to be escaped:</p>\n\n<pre><code>Pattern pat = Pattern.compile(\"[^a-z][^,.:;\\\\]]\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1144443,"reputation":4425,"user_id":2113996,"accept_rate":31,"display_name":"eatSleepCode"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1366115333,"creation_date":1366115333,"answer_id":16037089,"question_id":16037036,"body_markdown":"You can do it by using escape character \\ like this `\\\\].`","title":"pattern matcher","body":"<p>You can do it by using escape character \\ like this <code>\\\\].</code></p>\n"},{"tags":[],"owner":{"account_id":1383489,"reputation":7088,"user_id":1316000,"accept_rate":66,"display_name":"Rodrigo Sasaki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366115618,"creation_date":1366115618,"answer_id":16037186,"question_id":16037036,"body_markdown":"You don&#39;t really need to escape it. There is a special rule in Regular Expressions, where if you want the actual `]` character in your list, it has to be the first element on it. And it&#39;ll work just fine. Give this code a try:\r\n\r\n\tpublic static void main(String[] args){\r\n\t\tString texto = &quot;[]hello[]&quot;;\r\n\t\tPattern p = Pattern.compile(&quot;[]]+&quot;);\r\n\t\tMatcher m = p.matcher(texto);\r\n\t\twhile(m.find()){\r\n\t\t\tSystem.out.println(m.group());\r\n\t\t}\r\n\t}","title":"pattern matcher","body":"<p>You don't really need to escape it. There is a special rule in Regular Expressions, where if you want the actual <code>]</code> character in your list, it has to be the first element on it. And it'll work just fine. Give this code a try:</p>\n\n<pre><code>public static void main(String[] args){\n    String texto = \"[]hello[]\";\n    Pattern p = Pattern.compile(\"[]]+\");\n    Matcher m = p.matcher(texto);\n    while(m.find()){\n        System.out.println(m.group());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1430949,"reputation":667,"user_id":1353394,"accept_rate":90,"display_name":"Eduardo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366121746,"creation_date":1366120730,"answer_id":16039105,"question_id":16037036,"body_markdown":"The standard way is the use of `quote` function of the `Pattern` class. This function return the literal pattern String for the specified String.\r\n    \r\n    String myLiteralString = Pattern.quote(&quot;,.[:;&quot;);\r\n    Pattern pat = Pattern.compile(&quot;[^a-z][^&quot; + myLiteralString + &quot;]&quot;);\r\n\r\nThis method escape all special characters of the regular expression syntax.","title":"pattern matcher","body":"<p>The standard way is the use of <code>quote</code> function of the <code>Pattern</code> class. This function return the literal pattern String for the specified String.</p>\n\n<pre><code>String myLiteralString = Pattern.quote(\",.[:;\");\nPattern pat = Pattern.compile(\"[^a-z][^\" + myLiteralString + \"]\");\n</code></pre>\n\n<p>This method escape all special characters of the regular expression syntax.</p>\n"}],"owner":{"account_id":1941976,"reputation":2211,"user_id":1747976,"accept_rate":50,"display_name":"Dodi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":439,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1692854745,"creation_date":1366115170,"question_id":16037036,"body_markdown":"    \r\nI have the following pattern matcher.   \r\n\r\n     Pattern pat = Pattern.compile(&quot;[^a-z][^,.:;]&quot;);\r\n\r\nHow do I include the `]` character itself in it ?","title":"pattern matcher","body":"<p>I have the following pattern matcher.   </p>\n\n<pre><code> Pattern pat = Pattern.compile(\"[^a-z][^,.:;]\");\n</code></pre>\n\n<p>How do I include the <code>]</code> character itself in it ?</p>\n"},{"tags":["java","regex","replaceall"],"answers":[{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1366087321,"creation_date":1366087321,"answer_id":16028929,"question_id":16028876,"body_markdown":"try\r\n\r\n    str = str.replaceAll(&quot;(\\\\b\\\\w\\\\w\\\\b)&quot;, &quot;&lt;h1&gt;$1&lt;/h1&gt;&quot;);","title":"Java replace matched regex","body":"<p>try</p>\n\n<pre><code>str = str.replaceAll(\"(\\\\b\\\\w\\\\w\\\\b)\", \"&lt;h1&gt;$1&lt;/h1&gt;\");\n</code></pre>\n"}],"owner":{"account_id":1314338,"reputation":2872,"user_id":1261600,"accept_rate":67,"display_name":"Lpc_dark"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":204,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1390776270,"accepted_answer_id":16028929,"answer_count":1,"score":1,"last_activity_date":1692854739,"creation_date":1366087033,"question_id":16028876,"body_markdown":"Sorry i had to re write this question i was in the middle of finishing it and someone closed it. \r\nthey weren&#39;t kind enough to explain why so i had to repost? \r\nplease inform me what is confusing.\r\n\r\nMain point: I want to replace a regex match with part of the match\r\nso if i regex hi i want it to be replaced with {hi} \r\nif regex match at i want to replace with {at}\r\n\r\n\r\nthis is awesome look at this two letter words get replaced\r\nthe return would be\r\n\r\n    this &lt;h1&gt;is&lt;/h1&gt; awesome look &lt;h1&gt;at&lt;/h1&gt; this two letter words get replaced\r\n\r\nnotice how the is and at which would match regex \\b\\w\\w\\b would be matched a replaced\r\n\r\nthis is the code i was working on... don&#39;t judge it&#39;s not finished but i am just a little confused and wondering if there is an easier way. i was search the string and finding the matches and then i was going to go it to an arraylist and replace each one. The problem is one of the thing that i am replacing is { and i want to replace it with {{}\r\nnow in a look this will continually replace the brackets because i keep adding them... so my other thought was to replace them all one by one char by char and add to a new `StringBuilder` object?\r\n\r\n    ArrayList&lt;String&gt; replacements= new ArrayList&lt;String&gt;();\r\n    String s=&quot;::&quot;;\r\n    s+=command;\r\n    Pattern p= Pattern.compile(&quot;[!-~]&quot;);\r\n    Matcher match= p.matcher(this.execution);\r\n    while(match.find()){\r\n        replacements.add(match.group());\r\n    }\r\n    StringBuilder string= new StringBuilder();\r\n    for(int i=0;i&lt;this.execution.length();i++){ \r\n        String a=new String(execution.charAt(i));\r\n        if(...){\r\n            ...\r\n        }\r\n    }\r\n    s+=&quot;::&quot;+this.execution;\r\n\r\n","title":"Java replace matched regex","body":"<p>Sorry i had to re write this question i was in the middle of finishing it and someone closed it. \nthey weren't kind enough to explain why so i had to repost? \nplease inform me what is confusing.</p>\n\n<p>Main point: I want to replace a regex match with part of the match\nso if i regex hi i want it to be replaced with {hi} \nif regex match at i want to replace with {at}</p>\n\n<p>this is awesome look at this two letter words get replaced\nthe return would be</p>\n\n<pre><code>this &lt;h1&gt;is&lt;/h1&gt; awesome look &lt;h1&gt;at&lt;/h1&gt; this two letter words get replaced\n</code></pre>\n\n<p>notice how the is and at which would match regex \\b\\w\\w\\b would be matched a replaced</p>\n\n<p>this is the code i was working on... don't judge it's not finished but i am just a little confused and wondering if there is an easier way. i was search the string and finding the matches and then i was going to go it to an arraylist and replace each one. The problem is one of the thing that i am replacing is { and i want to replace it with {{}\nnow in a look this will continually replace the brackets because i keep adding them... so my other thought was to replace them all one by one char by char and add to a new <code>StringBuilder</code> object?</p>\n\n<pre><code>ArrayList&lt;String&gt; replacements= new ArrayList&lt;String&gt;();\nString s=\"::\";\ns+=command;\nPattern p= Pattern.compile(\"[!-~]\");\nMatcher match= p.matcher(this.execution);\nwhile(match.find()){\n    replacements.add(match.group());\n}\nStringBuilder string= new StringBuilder();\nfor(int i=0;i&lt;this.execution.length();i++){ \n    String a=new String(execution.charAt(i));\n    if(...){\n        ...\n    }\n}\ns+=\"::\"+this.execution;\n</code></pre>\n"},{"tags":["java","regex","replaceall"],"answers":[{"tags":[],"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1366097919,"creation_date":1366097919,"answer_id":16031324,"question_id":16028688,"body_markdown":"I don&#39;t really get how could your code solve the requirements you explained above...\r\n\r\nThat said, it seems to be a easier way to do this kind of job by using the JAVA&#39;s [`replaceAll`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String%2C+java.lang.String%29) method, typically for the two-letter words:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    &quot;this is awesome look at this two letter words get replaced&quot;\r\n    .replaceAll(&quot;(\\\\b\\\\w{2}\\\\b)&quot;, &quot;&lt;h1&gt;$1&lt;/h1&gt;&quot;);\r\n\r\nThis prints:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    this &lt;h1&gt;is&lt;/h1&gt; awesome look &lt;h1&gt;at&lt;/h1&gt; this two letter words get replaced","title":"Java replace Matcher","body":"<p>I don't really get how could your code solve the requirements you explained above...</p>\n\n<p>That said, it seems to be a easier way to do this kind of job by using the JAVA's <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String%2C+java.lang.String%29\" rel=\"nofollow\"><code>replaceAll</code></a> method, typically for the two-letter words:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>\"this is awesome look at this two letter words get replaced\"\n.replaceAll(\"(\\\\b\\\\w{2}\\\\b)\", \"&lt;h1&gt;$1&lt;/h1&gt;\");\n</code></pre>\n\n<p>This prints:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>this &lt;h1&gt;is&lt;/h1&gt; awesome look &lt;h1&gt;at&lt;/h1&gt; this two letter words get replaced\n</code></pre>\n"}],"owner":{"account_id":1314338,"reputation":2872,"user_id":1261600,"accept_rate":67,"display_name":"Lpc_dark"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1068,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":16031324,"answer_count":1,"score":0,"last_activity_date":1692854726,"creation_date":1366085774,"question_id":16028688,"body_markdown":"I want to find replace part of what is matched.\r\n\r\n***Example:***\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    this is awesome look at this two letter words get replaced\r\n\r\nthe return would be\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    this &lt;h1&gt;is&lt;/h1&gt; awesome look &lt;h1&gt;at&lt;/h1&gt; this two letter words get replaced\r\n\r\nNotice how the `is` and `at` which would match regex `\\b\\w\\w\\b` would be matched are replaced.\r\n\r\nThis is the code I was working on. It&#39;s not finished but I am just a little confused and wondering if there is an easier way. I was searching the string and finding the matches.  Then I was adding it to an ArrayList and replace each one. The problem is one of the thing that I am replacing is `{` and I want to replace it with `{{}`\r\n\r\nNow in a look this will continually replace the brackets because I keep adding them...\r\nSo my other thought was to replace them all one by one char by char and add to a new StringBuilder object?\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    ArrayList&lt;String&gt; replacements = new ArrayList&lt;String&gt;();\r\n    \r\n    String s = &quot;::&quot;;\r\n\r\n    s += command;\r\n\r\n    Pattern p = Pattern.compile(&quot;[!-~]&quot;);\r\n    Matcher match = p.matcher(this.execution);\r\n\r\n    while(match.find())\r\n    {\r\n        replacements.add(match.group());\r\n    }\r\n\r\n    StringBuilder string = new StringBuilder();\r\n\r\n    for(int i=0; i&lt;this.execution.length(); i++)\r\n    { \r\n        String a  =new String(execution.charAt(i));\r\n        if()\r\n        { \r\n        }\r\n    }\r\n    s += &quot;::&quot; + this.execution;","title":"Java replace Matcher","body":"<p>I want to find replace part of what is matched.</p>\n\n<p><em><strong>Example:</em></strong></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>this is awesome look at this two letter words get replaced\n</code></pre>\n\n<p>the return would be</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>this &lt;h1&gt;is&lt;/h1&gt; awesome look &lt;h1&gt;at&lt;/h1&gt; this two letter words get replaced\n</code></pre>\n\n<p>Notice how the <code>is</code> and <code>at</code> which would match regex <code>\\b\\w\\w\\b</code> would be matched are replaced.</p>\n\n<p>This is the code I was working on. It's not finished but I am just a little confused and wondering if there is an easier way. I was searching the string and finding the matches.  Then I was adding it to an ArrayList and replace each one. The problem is one of the thing that I am replacing is <code>{</code> and I want to replace it with <code>{{}</code></p>\n\n<p>Now in a look this will continually replace the brackets because I keep adding them...\nSo my other thought was to replace them all one by one char by char and add to a new StringBuilder object?</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>ArrayList&lt;String&gt; replacements = new ArrayList&lt;String&gt;();\n\nString s = \"::\";\n\ns += command;\n\nPattern p = Pattern.compile(\"[!-~]\");\nMatcher match = p.matcher(this.execution);\n\nwhile(match.find())\n{\n    replacements.add(match.group());\n}\n\nStringBuilder string = new StringBuilder();\n\nfor(int i=0; i&lt;this.execution.length(); i++)\n{ \n    String a  =new String(execution.charAt(i));\n    if()\n    { \n    }\n}\ns += \"::\" + this.execution;\n</code></pre>\n"},{"tags":["java","regex","string"],"answers":[{"tags":[],"owner":{"account_id":1920143,"reputation":7756,"user_id":1731862,"accept_rate":71,"display_name":"Ankur Shanbhag"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1365527685,"creation_date":1365527685,"answer_id":15908263,"question_id":15908197,"body_markdown":"Try this out :\r\n\r\n    String data = &quot;this is a String ${AUTO_TEST_f} body ${GLOBAL_SYNC} ${AUTO_2}&quot;;\r\n\t\tPattern pattern = Pattern.compile(&quot;\\\\$\\\\{.+?\\\\}&quot;);\r\n\r\n\t\tMatcher matcher = pattern.matcher(data);\r\n\r\n\t\twhile (matcher.find()) {\r\n\t\t\t// Indicates match is found. Do further processing\r\n\t\t\tSystem.out.println(matcher.group());\r\n\t\t}\r\n\r\nOutput is :\r\n\r\n${AUTO_TEST_f}&lt;br&gt;\r\n${GLOBAL_SYNC}&lt;br&gt;\r\n${AUTO_2}\r\n","title":"Matching pattern multiple times on text file?","body":"<p>Try this out :</p>\n\n<pre><code>String data = \"this is a String ${AUTO_TEST_f} body ${GLOBAL_SYNC} ${AUTO_2}\";\n    Pattern pattern = Pattern.compile(\"\\\\$\\\\{.+?\\\\}\");\n\n    Matcher matcher = pattern.matcher(data);\n\n    while (matcher.find()) {\n        // Indicates match is found. Do further processing\n        System.out.println(matcher.group());\n    }\n</code></pre>\n\n<p>Output is :</p>\n\n<p>${AUTO_TEST_f}<br>\n${GLOBAL_SYNC}<br>\n${AUTO_2}</p>\n"},{"tags":[],"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1365527774,"creation_date":1365527774,"answer_id":15908290,"question_id":15908197,"body_markdown":"Whatever you are doing, it is not the right way to code. Composing a regex from smaller components is fine, but it is pointless when you break the component down to single character.\r\n\r\nIf you want to get those that starts with `GLOBAL` or `AUTO`, it is as simple as:\r\n\r\n    \\$\\{(GLOBAL|AUTO)_.*?\\}\r\n\r\nPutting the regex into a string literal:\r\n\r\n    &quot;\\\\$\\\\{(GLOBAL|AUTO)_.*?\\\\}&quot;","title":"Matching pattern multiple times on text file?","body":"<p>Whatever you are doing, it is not the right way to code. Composing a regex from smaller components is fine, but it is pointless when you break the component down to single character.</p>\n\n<p>If you want to get those that starts with <code>GLOBAL</code> or <code>AUTO</code>, it is as simple as:</p>\n\n<pre><code>\\$\\{(GLOBAL|AUTO)_.*?\\}\n</code></pre>\n\n<p>Putting the regex into a string literal:</p>\n\n<pre><code>\"\\\\$\\\\{(GLOBAL|AUTO)_.*?\\\\}\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1365527945,"creation_date":1365527945,"answer_id":15908352,"question_id":15908197,"body_markdown":"Don&#39;t overcomplicate:\r\n\r\n\tString txt = &quot;this is a String ${AUTO_TEST_f} body ${GLOBAL_SYNC} ${AUTO_2}&quot;;\r\n\tString regex = &quot;\\\\$\\\\{(AUTO|GLOBAL)_(.*?)\\\\}&quot;;\r\n\tPattern pattern = Pattern.compile(regex);\r\n\tMatcher matcher = pattern.matcher(txt);\r\n\twhile (matcher.find()) {\r\n\t\tSystem.out.println(matcher.group() + &quot;\\t-&gt;\\t&quot; + matcher.group(2) + &quot;\\t(&quot; + matcher.group(1) + &quot;)&quot; );\r\n\t}\r\n\r\nOutput:\r\n\r\n    ${AUTO_TEST_f}\t-&gt;\tTEST_f\t(AUTO)\r\n    ${GLOBAL_SYNC}\t-&gt;\tSYNC\t(GLOBAL)\r\n    ${AUTO_2}\t    -&gt;\t2   \t(AUTO)\r\n\r\n","title":"Matching pattern multiple times on text file?","body":"<p>Don't overcomplicate:</p>\n\n<pre><code>String txt = \"this is a String ${AUTO_TEST_f} body ${GLOBAL_SYNC} ${AUTO_2}\";\nString regex = \"\\\\$\\\\{(AUTO|GLOBAL)_(.*?)\\\\}\";\nPattern pattern = Pattern.compile(regex);\nMatcher matcher = pattern.matcher(txt);\nwhile (matcher.find()) {\n    System.out.println(matcher.group() + \"\\t-&gt;\\t\" + matcher.group(2) + \"\\t(\" + matcher.group(1) + \")\" );\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>${AUTO_TEST_f}  -&gt;  TEST_f  (AUTO)\n${GLOBAL_SYNC}  -&gt;  SYNC    (GLOBAL)\n${AUTO_2}       -&gt;  2       (AUTO)\n</code></pre>\n"}],"owner":{"account_id":2298361,"reputation":143,"user_id":2019260,"accept_rate":64,"display_name":"user2019260"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5589,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":15908352,"answer_count":3,"score":0,"last_activity_date":1692854705,"creation_date":1365527441,"question_id":15908197,"body_markdown":"The Problem:\r\n-----------\r\nIn Java, I will be parsing scripts and extracting any text from the file that begins with \r\n\r\n        ${GLOBAL_} or ${AUTO_}\r\n\r\nI want to pickup everything until the last curly brace, so for example if I had the following String:\r\n\r\n        &quot;this is a String ${AUTO_TEST_f} body ${GLOBAL_SYNC} ${AUTO_2} ${OTHER_VAR}&quot;\r\nThe results should be:\r\n        \r\n    ${AUTO_TEST_f} \r\n       \r\n    ${GLOBAL_SYNC}\r\n        \r\n    ${AUTO_2} \r\n\r\n\r\nWhat I&#39;ve Attempted:\r\n--------------------\r\n\r\nI&#39;ve attempted to create regex patterns (that I believe do work) and using them to create a Matcher.  I then attempt to use the Matcher to print all the matches to console but I&#39;m having some issues.  For some reason, it&#39;s skipping over ${GLOBAL_VARIABLE_1}. Also, how could I implement this to give me all the matches? A while loop [while match.group(0) != null]?\r\n\r\n\r\nHere&#39;s my code:\r\n\r\n     String re1=&quot;(\\\\$)&quot;;\t// Any Single Character 1\r\n    String re2=&quot;(\\\\{)&quot;;\t// Any Single Character 2\r\n    String re3=&quot;(G)&quot;;\t// Any Single Character 3\r\n    String re4=&quot;(L)&quot;;\t// Any Single Character 4\r\n    String re5=&quot;(O)&quot;;\t// Any Single Character 5\r\n    String re6=&quot;(B)&quot;;\t// Any Single Character 6\r\n    String re7=&quot;(A)&quot;;\t// Any Single Character 7\r\n    String re8=&quot;(L)&quot;;\t// Any Single Character 8\r\n    String re9=&quot;(_)&quot;;\t// Any Single Character 9\r\n    String re10=&quot;(.*?)&quot;;\t// Any Single Character 10\r\n    String re11=&quot;(\\\\})&quot;;\t// Any Single Character 11\r\n    \r\n    \r\n    String r1=&quot;(\\\\$)&quot;;\t// Any Single Character 1\r\n    String r2=&quot;(\\\\{)&quot;;\t// Any Single Character 2\r\n    String r3=&quot;(A)&quot;;\t// Any Single Character 3\r\n    String r4=&quot;(U)&quot;;\t// Any Single Character 4\r\n    String r5=&quot;(T)&quot;;\t// Any Single Character 5\r\n    String r6=&quot;(O)&quot;;\t// Any Single Character 6\r\n    String r7=&quot;(_)&quot;;\t// Any Single Character 7\r\n    String r8=&quot;(.*?)&quot;;\t// Any Single Character 8\r\n    String r9=&quot;(\\\\})&quot;;\t// Any Single Character 9\r\n    \r\n    Pattern p = Pattern.compile((re1+re2+re3+re4+re5+re6+re7+re8+re9+re10+re11));\r\n    Pattern p2 = Pattern.compile(r1+r2+r3+r4+r5+r6+r7+r8+r9);\r\n    \r\n     Matcher m = p.matcher(txt);\r\n     Matcher m1 = p2.matcher(txt);\r\n     m1.find();\r\n     System.out.println(m1.group(0));\r\n     m.find();\r\n     System.out.println(m.group(0));\r\n\r\nAnd this is the Console Results:\r\n   \r\n     Actual Results:\r\n     ${AUTO_1}\r\n     ${GLOBAL_VARIABLE_2}\r\n\r\nHere are my expected Results:\r\n\r\n     Expected Results:\r\n     ${GLOBAL_VARIABLE_1}\r\n     ${AUTO_1}\r\n     ${GLOBAL_VARIABLE_2}\r\n     ${GLOBAL_VARIABLE_3}\r\n\r\n\r\nThanks!","title":"Matching pattern multiple times on text file?","body":"<h2>The Problem:</h2>\n\n<p>In Java, I will be parsing scripts and extracting any text from the file that begins with </p>\n\n<pre><code>    ${GLOBAL_} or ${AUTO_}\n</code></pre>\n\n<p>I want to pickup everything until the last curly brace, so for example if I had the following String:</p>\n\n<pre><code>    \"this is a String ${AUTO_TEST_f} body ${GLOBAL_SYNC} ${AUTO_2} ${OTHER_VAR}\"\n</code></pre>\n\n<p>The results should be:</p>\n\n<pre><code>${AUTO_TEST_f} \n\n${GLOBAL_SYNC}\n\n${AUTO_2} \n</code></pre>\n\n<h2>What I've Attempted:</h2>\n\n<p>I've attempted to create regex patterns (that I believe do work) and using them to create a Matcher.  I then attempt to use the Matcher to print all the matches to console but I'm having some issues.  For some reason, it's skipping over ${GLOBAL_VARIABLE_1}. Also, how could I implement this to give me all the matches? A while loop [while match.group(0) != null]?</p>\n\n<p>Here's my code:</p>\n\n<pre><code> String re1=\"(\\\\$)\";    // Any Single Character 1\nString re2=\"(\\\\{)\"; // Any Single Character 2\nString re3=\"(G)\";   // Any Single Character 3\nString re4=\"(L)\";   // Any Single Character 4\nString re5=\"(O)\";   // Any Single Character 5\nString re6=\"(B)\";   // Any Single Character 6\nString re7=\"(A)\";   // Any Single Character 7\nString re8=\"(L)\";   // Any Single Character 8\nString re9=\"(_)\";   // Any Single Character 9\nString re10=\"(.*?)\";    // Any Single Character 10\nString re11=\"(\\\\})\";    // Any Single Character 11\n\n\nString r1=\"(\\\\$)\";  // Any Single Character 1\nString r2=\"(\\\\{)\";  // Any Single Character 2\nString r3=\"(A)\";    // Any Single Character 3\nString r4=\"(U)\";    // Any Single Character 4\nString r5=\"(T)\";    // Any Single Character 5\nString r6=\"(O)\";    // Any Single Character 6\nString r7=\"(_)\";    // Any Single Character 7\nString r8=\"(.*?)\";  // Any Single Character 8\nString r9=\"(\\\\})\";  // Any Single Character 9\n\nPattern p = Pattern.compile((re1+re2+re3+re4+re5+re6+re7+re8+re9+re10+re11));\nPattern p2 = Pattern.compile(r1+r2+r3+r4+r5+r6+r7+r8+r9);\n\n Matcher m = p.matcher(txt);\n Matcher m1 = p2.matcher(txt);\n m1.find();\n System.out.println(m1.group(0));\n m.find();\n System.out.println(m.group(0));\n</code></pre>\n\n<p>And this is the Console Results:</p>\n\n<pre><code> Actual Results:\n ${AUTO_1}\n ${GLOBAL_VARIABLE_2}\n</code></pre>\n\n<p>Here are my expected Results:</p>\n\n<pre><code> Expected Results:\n ${GLOBAL_VARIABLE_1}\n ${AUTO_1}\n ${GLOBAL_VARIABLE_2}\n ${GLOBAL_VARIABLE_3}\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["java","regex","regex-lookarounds"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1361386482,"post_id":14987735,"comment_id":21048551,"body_markdown":"Why not `@deprecate` the `API(3,Utils.FIFTY,key1,key4)` form, call the new form internally, and recompile?","body":"Why not <code>@deprecate</code> the <code>API(3,Utils.FIFTY,key1,key4)</code> form, call the new form internally, and recompile?"},{"owner":{"account_id":431119,"reputation":538,"user_id":814981,"accept_rate":75,"display_name":"appu"},"score":0,"creation_date":1361386717,"post_id":14987735,"comment_id":21048690,"body_markdown":"The API is developed by another team and we don&#39;t have access to it. The API still exists for backward compatibility. Since we need the new feature, we need to call the new method","body":"The API is developed by another team and we don&#39;t have access to it. The API still exists for backward compatibility. Since we need the new feature, we need to call the new method"}],"answers":[{"tags":[],"owner":{"account_id":237172,"reputation":203767,"user_id":505154,"accept_rate":100,"display_name":"Andrew Clark"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1361389067,"creation_date":1361386812,"answer_id":14987836,"question_id":14987735,"body_markdown":"Something like the following should work:\r\n\r\n    API\\([\\.\\w \\t,]*?,\\s*(key[\\.\\w \\t,]*)\\)\r\n\r\nThe main change here was to change the repetition on the first character class from `*` to `*?`, this means it will now match as few characters as possible instead of as many as possible, so you all of your `key` arguments will be included in your matching group.","title":"Regex issue - Matching API name","body":"<p>Something like the following should work:</p>\n\n<pre><code>API\\([\\.\\w \\t,]*?,\\s*(key[\\.\\w \\t,]*)\\)\n</code></pre>\n\n<p>The main change here was to change the repetition on the first character class from <code>*</code> to <code>*?</code>, this means it will now match as few characters as possible instead of as many as possible, so you all of your <code>key</code> arguments will be included in your matching group.</p>\n"},{"tags":[],"owner":{"account_id":1781872,"reputation":14665,"user_id":1624376,"accept_rate":76,"display_name":"Aubin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1361391689,"creation_date":1361388150,"answer_id":14988213,"question_id":14987735,"body_markdown":"The F.J&#39;s answer doesn&#39;t match this test case:\r\n\r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n    \r\n    public class APIUpdater {\r\n       public static void main( String[] args ) {\r\n          String source = &quot;\\n&quot; +\r\n          \t&quot;API( key.getValue( 18 ),call( key1 ).mth(),key1,key4);\\n&quot; +\r\n          \t&quot;API(\\n&quot; +\r\n          \t&quot;\\t3,\\n&quot; +\r\n          \t&quot;\\tUtils.FIFTY,\\n&quot; +\r\n          \t&quot;\\tkey1,\\n&quot; +\r\n          \t&quot;\\tkey4 );\\n&quot; +\r\n          \t&quot;API(3,Utils.FIFTY,key1,key4);\\n&quot;;\r\n          Pattern p =\r\n             Pattern.compile( &quot;API\\\\([.\\\\w\\\\s,]*?,\\\\s*(key[\\\\.\\\\w\\\\s,]*)\\\\)&quot; );\r\n          Matcher m = p.matcher( source );\r\n          while( m.find())\r\n          {\r\n             System.err.println( m.replaceAll( &quot;API(key1,key4)&quot; ));\r\n          }\r\n       }\r\n    }\r\n\r\nOutput is:\r\n\r\n    API( key.getValue( 18 ),call( key1 ).mth(),key1,key4);\r\n    API(key1,key4);\r\n    API(key1,key4);\r\n\r\nA call on several lines doesn&#39;t match but spaces are correctly handled.\r\n\r\nA true parser with a grammar is required to parse Java, a regular expressions can&#39;t do this complex job because they works at lexical level (the words, not the sentences).\r\n\r\n\r\n","title":"Regex issue - Matching API name","body":"<p>The F.J's answer doesn't match this test case:</p>\n\n<pre><code>import java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class APIUpdater {\n   public static void main( String[] args ) {\n      String source = \"\\n\" +\n        \"API( key.getValue( 18 ),call( key1 ).mth(),key1,key4);\\n\" +\n        \"API(\\n\" +\n        \"\\t3,\\n\" +\n        \"\\tUtils.FIFTY,\\n\" +\n        \"\\tkey1,\\n\" +\n        \"\\tkey4 );\\n\" +\n        \"API(3,Utils.FIFTY,key1,key4);\\n\";\n      Pattern p =\n         Pattern.compile( \"API\\\\([.\\\\w\\\\s,]*?,\\\\s*(key[\\\\.\\\\w\\\\s,]*)\\\\)\" );\n      Matcher m = p.matcher( source );\n      while( m.find())\n      {\n         System.err.println( m.replaceAll( \"API(key1,key4)\" ));\n      }\n   }\n}\n</code></pre>\n\n<p>Output is:</p>\n\n<pre><code>API( key.getValue( 18 ),call( key1 ).mth(),key1,key4);\nAPI(key1,key4);\nAPI(key1,key4);\n</code></pre>\n\n<p>A call on several lines doesn't match but spaces are correctly handled.</p>\n\n<p>A true parser with a grammar is required to parse Java, a regular expressions can't do this complex job because they works at lexical level (the words, not the sentences).</p>\n"},{"tags":[],"owner":{"account_id":1359686,"reputation":12150,"user_id":1297272,"accept_rate":86,"display_name":"Javier"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1361389406,"creation_date":1361389406,"answer_id":14988568,"question_id":14987735,"body_markdown":"You may want to try [Recoder][1], which allows you to apply source code transformations. \r\n\r\n\r\n  [1]: http://sourceforge.net/apps/mediawiki/recoder/index.php?title=Writing_transformations","title":"Regex issue - Matching API name","body":"<p>You may want to try <a href=\"http://sourceforge.net/apps/mediawiki/recoder/index.php?title=Writing_transformations\" rel=\"nofollow\">Recoder</a>, which allows you to apply source code transformations. </p>\n"}],"owner":{"account_id":431119,"reputation":538,"user_id":814981,"accept_rate":75,"display_name":"appu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":524,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":14987836,"answer_count":3,"score":2,"last_activity_date":1692854696,"creation_date":1361386402,"question_id":14987735,"body_markdown":"I am currently working with a large code base, in which recently one of the API&#39;s signature changed. So I need to modify thousands of files to get the new feature. So developed a java program to get take all `*.java` files and look for old API pattern. If found replace it with new pattern. \r\n\r\n###Old API\r\n\r\n    API(3,Utils.FIFTY,key1,key4)\r\n\r\n###New API\r\n\r\n    API(key1,key4)\r\n\r\n\r\nSo I created a regex pattern to match the old API as `API\\([\\d,\\s\\.\\w]*(key[\\.\\w\\s,]*)\\)`\r\nIf it matches it will replace it with \r\n\r\n`replaceString = matcher.group(1) + &quot;(&quot; + matcher.group(2) + &quot;)&quot;;`\r\n\r\nSo with the current code instead of expected `API(key1,key4)`, I am getting `API(key4)`. I&#39;ve analyzed the issue and my inference is that the `\\w` caught the first **key** pattern. If we need to match, we need to do a negative look ahead.\r\n\r\nCan any one share the best consistent way to resolve the regex issue ?\r\n","title":"Regex issue - Matching API name","body":"<p>I am currently working with a large code base, in which recently one of the API's signature changed. So I need to modify thousands of files to get the new feature. So developed a java program to get take all <code>*.java</code> files and look for old API pattern. If found replace it with new pattern. </p>\n\n<h3>Old API</h3>\n\n<pre><code>API(3,Utils.FIFTY,key1,key4)\n</code></pre>\n\n<h3>New API</h3>\n\n<pre><code>API(key1,key4)\n</code></pre>\n\n<p>So I created a regex pattern to match the old API as <code>API\\([\\d,\\s\\.\\w]*(key[\\.\\w\\s,]*)\\)</code>\nIf it matches it will replace it with </p>\n\n<p><code>replaceString = matcher.group(1) + \"(\" + matcher.group(2) + \")\";</code></p>\n\n<p>So with the current code instead of expected <code>API(key1,key4)</code>, I am getting <code>API(key4)</code>. I've analyzed the issue and my inference is that the <code>\\w</code> caught the first <strong>key</strong> pattern. If we need to match, we need to do a negative look ahead.</p>\n\n<p>Can any one share the best consistent way to resolve the regex issue ?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1082797,"reputation":2471,"user_id":1079311,"accept_rate":77,"display_name":"AlexIIP"},"score":0,"creation_date":1361261974,"post_id":14952794,"comment_id":20988627,"body_markdown":"I could use an HTML parser, but this is not a full HTML page, this is a small part of an RSS feed which I was hoping to parse without anything fancy.","body":"I could use an HTML parser, but this is not a full HTML page, this is a small part of an RSS feed which I was hoping to parse without anything fancy."},{"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"score":2,"creation_date":1361262149,"post_id":14952794,"comment_id":20988701,"body_markdown":"The beginning of your Pattern `&quot;\\\\src` means one whitespace followed by `rc`. This will never match `src` as `s` is not whitespace.","body":"The beginning of your Pattern <code>&quot;\\\\src</code> means one whitespace followed by <code>rc</code>. This will never match <code>src</code> as <code>s</code> is not whitespace."}],"answers":[{"tags":[],"owner":{"account_id":1777435,"reputation":11756,"user_id":1620937,"accept_rate":100,"display_name":"Orab&#238;g"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1361262014,"creation_date":1361262014,"answer_id":14952847,"question_id":14952794,"body_markdown":"Why didn&#39;t you try a simplier pattern ? Like this one :\r\n\r\n    Pattern.compile(&quot;src=\\&quot;(.*?)\\&quot;&quot;);\r\n\r\n(Not tested, but should be better)","title":"Java parsing with Matcher and Regex","body":"<p>Why didn't you try a simplier pattern ? Like this one :</p>\n\n<pre><code>Pattern.compile(\"src=\\\"(.*?)\\\"\");\n</code></pre>\n\n<p>(Not tested, but should be better)</p>\n"},{"tags":[],"owner":{"account_id":112681,"reputation":29166,"user_id":297114,"accept_rate":70,"display_name":"Oscar Mederos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1361262250,"creation_date":1361262250,"answer_id":14952906,"question_id":14952794,"body_markdown":"You can use either of the following regexes:\r\n\r\n    src=&quot;([^&quot;]+)\r\n    src=&quot;(.+?&quot;","title":"Java parsing with Matcher and Regex","body":"<p>You can use either of the following regexes:</p>\n\n<pre><code>src=\"([^\"]+)\nsrc=\"(.+?\"\n</code></pre>\n"}],"owner":{"account_id":1082797,"reputation":2471,"user_id":1079311,"accept_rate":77,"display_name":"AlexIIP"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":14952847,"answer_count":2,"score":0,"last_activity_date":1692854677,"creation_date":1361261798,"question_id":14952794,"body_markdown":"I have a very simple problem but I am new to Java Matcher and I am having a hard time figuring out how to use it for my specific problem.\r\n\r\n\r\nI have a string which is something like `this &lt;not needed content&gt;src=&quot;url&quot;&lt;not needed content&gt;src=&quot;url2&quot;&lt;not needed content&gt;`\r\n\r\nWhere &lt;&#39;not needed content&#39;&gt; are the things I want to ignore in my string. I basically want to extract the URLs from the string.\r\n\r\nMy code currently looks like this\r\n\r\n    Pattern MY_PATTERN = Pattern.compile(&quot;\\\\src=\\&quot;(.*?)\\\\\\&quot;&quot;);\r\n    Matcher m = MY_PATTERN.matcher(content);\r\n    String s = &quot;something&quot;;\r\n    while (m.find()) {\r\n       s = m.group(1);\r\n    }\r\n\r\nI apologize for such basic, and possibly duplicate question.\r\n\r\nThank you.","title":"Java parsing with Matcher and Regex","body":"<p>I have a very simple problem but I am new to Java Matcher and I am having a hard time figuring out how to use it for my specific problem.</p>\n\n<p>I have a string which is something like <code>this &lt;not needed content&gt;src=\"url\"&lt;not needed content&gt;src=\"url2\"&lt;not needed content&gt;</code></p>\n\n<p>Where &lt;'not needed content'> are the things I want to ignore in my string. I basically want to extract the URLs from the string.</p>\n\n<p>My code currently looks like this</p>\n\n<pre><code>Pattern MY_PATTERN = Pattern.compile(\"\\\\src=\\\"(.*?)\\\\\\\"\");\nMatcher m = MY_PATTERN.matcher(content);\nString s = \"something\";\nwhile (m.find()) {\n   s = m.group(1);\n}\n</code></pre>\n\n<p>I apologize for such basic, and possibly duplicate question.</p>\n\n<p>Thank you.</p>\n"},{"tags":["java","regex","string"],"comments":[{"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1360008701,"post_id":14694692,"comment_id":20548370,"body_markdown":"Do you just want the output for INCLUDES? And what is the expected output?","body":"Do you just want the output for INCLUDES? And what is the expected output?"},{"owner":{"account_id":1092551,"reputation":3879,"user_id":1086871,"accept_rate":100,"display_name":"G. Bach"},"score":0,"creation_date":1360008905,"post_id":14694692,"comment_id":20548454,"body_markdown":"Is this just missing a * after the . maybe?","body":"Is this just missing a * after the . maybe?"}],"answers":[{"tags":[],"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1360009005,"creation_date":1360009005,"answer_id":14694840,"question_id":14694692,"body_markdown":"Your regex is not correct. You are just capturing a single character inside the bracket, and hence your regex will fail. \r\n\r\nTry using this: -\r\n\r\n    &quot;\\\\w+\\\\(.*?\\\\)&quot;\r\n\r\nAnd then get `group(0)`, or just `group()`: -\r\n\r\n    String text = &quot;INCLUDES(ABC) EXCLUDES(ABC) EXCLUDES(ABC) INCLUDES(ABC) INCLUDES(ABC)&quot;;\r\n    Matcher matcher = Pattern.compile(&quot;\\\\w+\\\\(.*?\\\\)&quot;).matcher(text);\r\n    \r\n    while (matcher.find()) {\r\n        System.out.println(matcher.group());\r\n    }","title":"string mattcher regex needed","body":"<p>Your regex is not correct. You are just capturing a single character inside the bracket, and hence your regex will fail. </p>\n\n<p>Try using this: -</p>\n\n<pre><code>\"\\\\w+\\\\(.*?\\\\)\"\n</code></pre>\n\n<p>And then get <code>group(0)</code>, or just <code>group()</code>: -</p>\n\n<pre><code>String text = \"INCLUDES(ABC) EXCLUDES(ABC) EXCLUDES(ABC) INCLUDES(ABC) INCLUDES(ABC)\";\nMatcher matcher = Pattern.compile(\"\\\\w+\\\\(.*?\\\\)\").matcher(text);\n\nwhile (matcher.find()) {\n    System.out.println(matcher.group());\n}\n</code></pre>\n"}],"owner":{"account_id":75452,"reputation":57633,"user_id":216431,"accept_rate":91,"display_name":"d-man"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":14694840,"answer_count":1,"score":0,"last_activity_date":1692854582,"creation_date":1360008463,"question_id":14694692,"body_markdown":"I have java code with matcher to find number of occurence in string using mattcher.find method.\r\n\r\nfollowing is my code\r\n\r\n\r\n    String text = &quot;INCLUDES(ABC) EXCLUDES(ABC) EXCLUDES(ABC) INCLUDES(EFG) INCLUDES(IJK)&quot;;\r\n\r\n    String patternString = &quot;INCLUDES(.)&quot;;\r\n\r\n    Pattern pattern = Pattern.compile(patternString);\r\n    Matcher matcher = pattern.matcher(text);\r\n\r\n    int count = 0;\r\n    while(matcher.find()) {\r\n        count++;\r\n        System.out.println(&quot;found: &quot; + count + &quot; : &quot;\r\n                + matcher.start() + &quot; - &quot; + matcher.end());\r\n        System.out.println(&quot; - &quot; +text.substring(matcher.start(), matcher.end()));\r\n    }\r\n\r\nwhich returns output as \r\n\r\n\r\n    found: 1 : 0 - 9\r\n     - INCLUDES(\r\n    found: 2 : 42 - 51\r\n     - INCLUDES(\r\n    found: 3 : 56 - 65\r\n     - INCLUDES(\r\n\r\nInstead of i want Regex to find and return number of occurrences as INCLUDES(*)\r\n\r\nany solution is appriciated. expected output should be loop printing values\r\n\r\n    INCLUDES(ABC)\r\n    INCLUDES(EFG)\r\n    INCLUDES(IJK)","title":"string mattcher regex needed","body":"<p>I have java code with matcher to find number of occurence in string using mattcher.find method.</p>\n\n<p>following is my code</p>\n\n<pre><code>String text = \"INCLUDES(ABC) EXCLUDES(ABC) EXCLUDES(ABC) INCLUDES(EFG) INCLUDES(IJK)\";\n\nString patternString = \"INCLUDES(.)\";\n\nPattern pattern = Pattern.compile(patternString);\nMatcher matcher = pattern.matcher(text);\n\nint count = 0;\nwhile(matcher.find()) {\n    count++;\n    System.out.println(\"found: \" + count + \" : \"\n            + matcher.start() + \" - \" + matcher.end());\n    System.out.println(\" - \" +text.substring(matcher.start(), matcher.end()));\n}\n</code></pre>\n\n<p>which returns output as </p>\n\n<pre><code>found: 1 : 0 - 9\n - INCLUDES(\nfound: 2 : 42 - 51\n - INCLUDES(\nfound: 3 : 56 - 65\n - INCLUDES(\n</code></pre>\n\n<p>Instead of i want Regex to find and return number of occurrences as INCLUDES(*)</p>\n\n<p>any solution is appriciated. expected output should be loop printing values</p>\n\n<pre><code>INCLUDES(ABC)\nINCLUDES(EFG)\nINCLUDES(IJK)\n</code></pre>\n"},{"tags":["java","regex"],"answers":[{"tags":[],"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1359951825,"creation_date":1359951825,"answer_id":14680340,"question_id":14680324,"body_markdown":"You need to escape the dash in\r\n\r\n    +-/\r\n\r\nOtherwise, it is interpreted as a range from `&#39;+&#39;` to `&#39;/&#39;` - a range that includes `&#39;+&#39;`, `&#39;,&#39;`, `&#39;-&#39;`. `&#39;.&#39;`, and `&#39;/&#39;`.\r\n\r\n    private static final Pattern VALID_TOKEN = Pattern.compile(&quot;^[a-zA-Z0-9\\\\{\\\\}\\\\[\\\\].+\\\\-/=&gt;&lt;\\\\\\\\*]*$&quot;);\r\n    //                              Here ------------------------------------------------^^\r\n\r\nAlternatively, you can move the dash to the end of the character class (i.e. put it before the closing `]`).\r\n","title":"Java Pattern Matcher COMMA","body":"<p>You need to escape the dash in</p>\n\n<pre><code>+-/\n</code></pre>\n\n<p>Otherwise, it is interpreted as a range from <code>'+'</code> to <code>'/'</code> - a range that includes <code>'+'</code>, <code>','</code>, <code>'-'</code>. <code>'.'</code>, and <code>'/'</code>.</p>\n\n<pre><code>private static final Pattern VALID_TOKEN = Pattern.compile(\"^[a-zA-Z0-9\\\\{\\\\}\\\\[\\\\].+\\\\-/=&gt;&lt;\\\\\\\\*]*$\");\n//                              Here ------------------------------------------------^^\n</code></pre>\n\n<p>Alternatively, you can move the dash to the end of the character class (i.e. put it before the closing <code>]</code>).</p>\n"}],"owner":{"account_id":2323432,"reputation":1297,"user_id":2038475,"accept_rate":78,"display_name":"KernelCurry"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":856,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"closed_date":1655120852,"accepted_answer_id":14680340,"answer_count":1,"score":3,"last_activity_date":1692854561,"creation_date":1359951688,"question_id":14680324,"body_markdown":"I am trying to use a pattern check against a string, and for some reason it is saying that strings that shouldn&#39;t match, do..\r\n\r\nCode:\r\n \r\n    private static final Pattern VALID_TOKEN = Pattern.compile(&quot;^[a-zA-Z0-9\\\\{\\\\}\\\\[\\\\].+-/=&gt;&lt;\\\\\\\\*]*$&quot;);\r\n    System.out.println(VALID_TOKEN.matcher(token).matches());\r\n\r\nExamples:\r\n\r\n    &quot;123&quot; = true\r\n    &quot;1,3&quot; = true // Should NOT BE TRUE\r\n    &quot;123*123&quot; = true\r\n    &quot;123*^123&quot; = false\r\n\r\nAll of the above examples are correct except &quot;1,3&quot;  the pattern should not include a COMMA.  Does anyone have any ideas? \r\n","title":"Java Pattern Matcher COMMA","body":"<p>I am trying to use a pattern check against a string, and for some reason it is saying that strings that shouldn't match, do..</p>\n\n<p>Code:</p>\n\n<pre><code>private static final Pattern VALID_TOKEN = Pattern.compile(\"^[a-zA-Z0-9\\\\{\\\\}\\\\[\\\\].+-/=&gt;&lt;\\\\\\\\*]*$\");\nSystem.out.println(VALID_TOKEN.matcher(token).matches());\n</code></pre>\n\n<p>Examples:</p>\n\n<pre><code>\"123\" = true\n\"1,3\" = true // Should NOT BE TRUE\n\"123*123\" = true\n\"123*^123\" = false\n</code></pre>\n\n<p>All of the above examples are correct except \"1,3\"  the pattern should not include a COMMA.  Does anyone have any ideas? </p>\n"},{"tags":["java","regex","parsing"],"comments":[{"owner":{"account_id":1706574,"reputation":13314,"user_id":1565512,"display_name":"MikeM"},"score":0,"creation_date":1359547340,"post_id":14602518,"comment_id":20388941,"body_markdown":"What is the unpleasant behaviour exactly - can you describe it more clearly? Do you need that many capturing groups `()`?","body":"What is the unpleasant behaviour exactly - can you describe it more clearly? Do you need that many capturing groups <code>()</code>?"},{"owner":{"account_id":2305505,"reputation":13,"user_id":2024867,"display_name":"lugges"},"score":0,"creation_date":1359549312,"post_id":14602518,"comment_id":20389968,"body_markdown":"As the groups 2 to 7 should be null. But there is for example in group 3 the String &quot;0&quot; wich is the last digit of the 190 of the initial string. Even if the overall match is the one i wanted.\nI dont really need all the groups. but I need to get group 3 and group 7 and I need to calculate something with them and then put the calculated values at the specified position","body":"As the groups 2 to 7 should be null. But there is for example in group 3 the String &quot;0&quot; wich is the last digit of the 190 of the initial string. Even if the overall match is the one i wanted. I dont really need all the groups. but I need to get group 3 and group 7 and I need to calculate something with them and then put the calculated values at the specified position"},{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":0,"creation_date":1359551779,"post_id":14602518,"comment_id":20391336,"body_markdown":"@lugges: How come the regex you put separately is different from the regex in your code?","body":"@lugges: How come the regex you put separately is different from the regex in your code?"},{"owner":{"account_id":2305505,"reputation":13,"user_id":2024867,"display_name":"lugges"},"score":0,"creation_date":1359552383,"post_id":14602518,"comment_id":20391673,"body_markdown":"Thats because in my original code I build the regex from different arrays and i used the print method and put it here as a constant. I removed the round brackets around the &#176;C in the initial post and in my code. Is there another difference that im missing?","body":"Thats because in my original code I build the regex from different arrays and i used the print method and put it here as a constant. I removed the round brackets around the &#176;C in the initial post and in my code. Is there another difference that im missing?"}],"answers":[{"tags":[],"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1359558812,"creation_date":1359555941,"answer_id":14606318,"question_id":14602518,"body_markdown":"This seems to be a bug (or feature?) in Java&#39;s implementation. It doesn&#39;t seem to reset the captured text for the capturing group when the matching has to be redone from the next index.\r\n\r\nThis test reveals the discrepancy in behavior between Java regex engine and PHP&#39;s PCRE.\r\n\r\n- Regex: `(\\d+(-\\d+)?){1}+(?!x)`\r\n- Input: `34 34-43x 78 90`\r\n- Java result: 3 matches (`34`, `78`, `90`). The 2nd capturing group of the 2nd match is `-43`. The 2nd capturing group captures nothing for 1st and 3rd match.\r\n- [PHP result](http://www.regex101.com/r/zB9oK3): Also the same 3 matches, but 2nd capturing group captures nothing for all matches. For PHP&#39;s PCRE implementation, when the match has to be redone, the captured text of the capturing groups are reset.\r\n\r\nThis is tested this on JRE 6 Update 37 and JRE 7 Update 11.\r\n\r\nSame result for this, just to prove the point that captured text is not reset when matching has to be redone:\r\n\r\n- Regex: `a(\\d+(-\\d+)?){1}+(?!x)`\r\n- Input: `a34 a34-43x a78 a90`\r\n- [PHP result](http://www.regex101.com/r/zH7gL1)\r\n\r\n**Some comment about your regex**\r\n\r\nI think the `++` should be `{1}+`, since it seems that you want to modify one number or one range of number at a time, while making the match possessive to discard unwanted numbers.\r\n\r\n**Workaround**\r\n\r\nThe first group (the outer most capturing group), which captures everything (one number or a range of number), will always be overwritten when a match is found. Hence you can rely on it. You can check whether there exist a `-` in the group 1 (with `contains` method). If there is, then you can tell that capturing group 2 contains captured text from the current match, and you can use the captured text. If there is not, then you can ignore all the captured text in capturing group 2 and its nested capturing groups.","title":"Regular Expression in Java. Unexpected behaviour","body":"<p>This seems to be a bug (or feature?) in Java's implementation. It doesn't seem to reset the captured text for the capturing group when the matching has to be redone from the next index.</p>\n\n<p>This test reveals the discrepancy in behavior between Java regex engine and PHP's PCRE.</p>\n\n<ul>\n<li>Regex: <code>(\\d+(-\\d+)?){1}+(?!x)</code></li>\n<li>Input: <code>34 34-43x 78 90</code></li>\n<li>Java result: 3 matches (<code>34</code>, <code>78</code>, <code>90</code>). The 2nd capturing group of the 2nd match is <code>-43</code>. The 2nd capturing group captures nothing for 1st and 3rd match.</li>\n<li><a href=\"http://www.regex101.com/r/zB9oK3\" rel=\"nofollow\">PHP result</a>: Also the same 3 matches, but 2nd capturing group captures nothing for all matches. For PHP's PCRE implementation, when the match has to be redone, the captured text of the capturing groups are reset.</li>\n</ul>\n\n<p>This is tested this on JRE 6 Update 37 and JRE 7 Update 11.</p>\n\n<p>Same result for this, just to prove the point that captured text is not reset when matching has to be redone:</p>\n\n<ul>\n<li>Regex: <code>a(\\d+(-\\d+)?){1}+(?!x)</code></li>\n<li>Input: <code>a34 a34-43x a78 a90</code></li>\n<li><a href=\"http://www.regex101.com/r/zH7gL1\" rel=\"nofollow\">PHP result</a></li>\n</ul>\n\n<p><strong>Some comment about your regex</strong></p>\n\n<p>I think the <code>++</code> should be <code>{1}+</code>, since it seems that you want to modify one number or one range of number at a time, while making the match possessive to discard unwanted numbers.</p>\n\n<p><strong>Workaround</strong></p>\n\n<p>The first group (the outer most capturing group), which captures everything (one number or a range of number), will always be overwritten when a match is found. Hence you can rely on it. You can check whether there exist a <code>-</code> in the group 1 (with <code>contains</code> method). If there is, then you can tell that capturing group 2 contains captured text from the current match, and you can use the captured text. If there is not, then you can ignore all the captured text in capturing group 2 and its nested capturing groups.</p>\n"}],"owner":{"account_id":2305505,"reputation":13,"user_id":2024867,"display_name":"lugges"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":14606318,"answer_count":1,"score":1,"last_activity_date":1692854544,"creation_date":1359544040,"question_id":14602518,"body_markdown":"I am trying to match mostly numbers, but depending on the Words which follow the Expression I need to make a difference.\r\n\r\nI match every Number which is not followed by a Temperature Term like &#176;C or a Time Specification. \r\nMy Regular Expression looks like this:\r\n\r\n    (((\\d+?)(\\s*)(\\-)(\\s*))?(\\d+)(\\s*))++(?!minuten|Minuten|min|Min|Stunden|stunden|std|Std|&#176;C| &#176;C)\r\n\r\nHere is an Example:  http://regexr.com?33jeg\r\n\r\nWhile this Behavior is what I expected Java does the Following:\r\nIndex is the corresponding Group to the Match 4\r\n\r\n    0: &quot;4 &quot;1: &quot;4 &quot;2: &quot;0 - &quot;3: &quot;0&quot;4: &quot; &quot;5: &quot;-&quot;6: &quot; &quot;7: &quot;4&quot;8: &quot; &quot;9: &quot;&#176;C&quot;\r\n\r\nYou need to Know that I match every String separate. So the match for the 5 looks like this:\r\n\r\n    0: &quot;5 &quot;1: &quot;5 &quot;2: &quot;null&quot;3: &quot;null&quot;4: &quot;null&quot;5: &quot;null&quot;6: &quot;null&quot;7: &quot;5&quot;8: &quot; &quot;9: &quot;null&quot;\r\n\r\nThis is how Id like the other Match to be. This unpleasant behavior is only when a &quot;-&quot; is somewhere in the String before the Match\r\n\r\nMy Java Code is the following:\r\n\r\n    public static void adaptPortionDetails(EList&lt;Step&gt; steps, double multiplicator){\r\n\t\t\r\n\t\tString portionMatcher = &quot;(((\\\\d+?)(\\\\s*)(\\\\-)(\\\\s*))?(\\\\d+)(\\\\s*))++(?!&#176;C|Grad|minuten|Minuten|min|Min|Stunden|stunden|std|Std)&quot;;\r\n\t\t\r\n\t\tfor (int i = 0; i &lt; steps.size(); i++) {\r\n\t\t\tMatcher matcher = Pattern.compile(portionMatcher).matcher(\r\n\t\t\t\t\tsteps.get(i).getDescription());\r\n\t\t\tStringBuffer sb = new StringBuffer();\r\n\t\t\twhile (matcher.find()) {\r\n\t\t\t\tprintGroups(matcher);\r\n\t\t\t\tString newValue1Str;\r\n\t\t\t\tif (matcher.group(3) == null){\r\n\t\t\t\t\tnewValue1Str = &quot;&quot;;\r\n\t\t\t\t\tSystem.out.println(&quot;test&quot;);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdouble newValue1 = Integer.parseInt(matcher.group(3)) * multiplicator;\r\n\t\t\t\t\tnewValue1Str = Fraction.getFraction(newValue1).toProperString();\r\n\t\t\t\t}\r\n\t\t\t\tdouble newValue2 = Integer.parseInt(matcher.group(7)) * multiplicator;\r\n\t\t\t\tString newValue2Str = Fraction.getFraction(newValue2).toProperString();\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tmatcher.appendReplacement(sb, newValue1Str + &quot;$4$5$6&quot; + newValue2Str + &quot;$8&quot;);\r\n\t\t\t}\r\n\t\t\tmatcher.appendTail(sb);\r\n\t\t\tsteps.get(i).setDescription(sb.toString());\r\n\t\t}\r\n\t}\r\n\r\nHope you can tell what I&#39;m missing.","title":"Regular Expression in Java. Unexpected behaviour","body":"<p>I am trying to match mostly numbers, but depending on the Words which follow the Expression I need to make a difference.</p>\n<p>I match every Number which is not followed by a Temperature Term like °C or a Time Specification.\nMy Regular Expression looks like this:</p>\n<pre><code>(((\\d+?)(\\s*)(\\-)(\\s*))?(\\d+)(\\s*))++(?!minuten|Minuten|min|Min|Stunden|stunden|std|Std|°C| °C)\n</code></pre>\n<p>Here is an Example:  <a href=\"http://regexr.com?33jeg\" rel=\"nofollow noreferrer\">http://regexr.com?33jeg</a></p>\n<p>While this Behavior is what I expected Java does the Following:\nIndex is the corresponding Group to the Match 4</p>\n<pre><code>0: &quot;4 &quot;1: &quot;4 &quot;2: &quot;0 - &quot;3: &quot;0&quot;4: &quot; &quot;5: &quot;-&quot;6: &quot; &quot;7: &quot;4&quot;8: &quot; &quot;9: &quot;°C&quot;\n</code></pre>\n<p>You need to Know that I match every String separate. So the match for the 5 looks like this:</p>\n<pre><code>0: &quot;5 &quot;1: &quot;5 &quot;2: &quot;null&quot;3: &quot;null&quot;4: &quot;null&quot;5: &quot;null&quot;6: &quot;null&quot;7: &quot;5&quot;8: &quot; &quot;9: &quot;null&quot;\n</code></pre>\n<p>This is how Id like the other Match to be. This unpleasant behavior is only when a &quot;-&quot; is somewhere in the String before the Match</p>\n<p>My Java Code is the following:</p>\n<pre><code>public static void adaptPortionDetails(EList&lt;Step&gt; steps, double multiplicator){\n    \n    String portionMatcher = &quot;(((\\\\d+?)(\\\\s*)(\\\\-)(\\\\s*))?(\\\\d+)(\\\\s*))++(?!°C|Grad|minuten|Minuten|min|Min|Stunden|stunden|std|Std)&quot;;\n    \n    for (int i = 0; i &lt; steps.size(); i++) {\n        Matcher matcher = Pattern.compile(portionMatcher).matcher(\n                steps.get(i).getDescription());\n        StringBuffer sb = new StringBuffer();\n        while (matcher.find()) {\n            printGroups(matcher);\n            String newValue1Str;\n            if (matcher.group(3) == null){\n                newValue1Str = &quot;&quot;;\n                System.out.println(&quot;test&quot;);\n            }else{\n                double newValue1 = Integer.parseInt(matcher.group(3)) * multiplicator;\n                newValue1Str = Fraction.getFraction(newValue1).toProperString();\n            }\n            double newValue2 = Integer.parseInt(matcher.group(7)) * multiplicator;\n            String newValue2Str = Fraction.getFraction(newValue2).toProperString();\n            \n            \n            matcher.appendReplacement(sb, newValue1Str + &quot;$4$5$6&quot; + newValue2Str + &quot;$8&quot;);\n        }\n        matcher.appendTail(sb);\n        steps.get(i).setDescription(sb.toString());\n    }\n}\n</code></pre>\n<p>Hope you can tell what I'm missing.</p>\n"},{"tags":["java","regex","stringtokenizer"],"comments":[{"owner":{"account_id":325446,"reputation":17129,"user_id":646634,"accept_rate":100,"display_name":"Brian"},"score":3,"creation_date":1359339035,"post_id":14554472,"comment_id":20305148,"body_markdown":"Maybe a copy and paste error, but it could be that you&#39;re missing the quotes around your regex to make it a `String`.","body":"Maybe a copy and paste error, but it could be that you&#39;re missing the quotes around your regex to make it a <code>String</code>."},{"owner":{"account_id":357343,"reputation":54520,"user_id":697449,"accept_rate":82,"display_name":"Paul Bellora"},"score":0,"creation_date":1359340335,"post_id":14554472,"comment_id":20305403,"body_markdown":"FYI from the [docs](http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html): &quot;`StringTokenizer` is a legacy class that is retained for compatibility reasons although its use is discouraged in new code. It is recommended that anyone seeking this functionality use the `split` method of `String` or the java.util.regex package instead.&quot;","body":"FYI from the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html\" rel=\"nofollow noreferrer\">docs</a>: &quot;<code>StringTokenizer</code> is a legacy class that is retained for compatibility reasons although its use is discouraged in new code. It is recommended that anyone seeking this functionality use the <code>split</code> method of <code>String</code> or the java.util.regex package instead.&quot;"},{"owner":{"account_id":1776716,"reputation":55,"user_id":1620377,"accept_rate":80,"display_name":"Pau"},"score":0,"creation_date":1359345346,"post_id":14554472,"comment_id":20306318,"body_markdown":"Must be lack of sleep, but thanks Brian! \nIt works now -.-\n\nThe tutorial I was reading online didn&#39;t place quotations and I don&#39;t know why it didn&#39;t occur to me that t needed some. Cheers!","body":"Must be lack of sleep, but thanks Brian!  It works now -.-  The tutorial I was reading online didn&#39;t place quotations and I don&#39;t know why it didn&#39;t occur to me that t needed some. Cheers!"},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":1,"creation_date":1359363703,"post_id":14554472,"comment_id":20311612,"body_markdown":"@Brian You should post your comment as an answer so it can be accepted.","body":"@Brian You should post your comment as an answer so it can be accepted."}],"answers":[{"tags":[],"owner":{"account_id":325446,"reputation":17129,"user_id":646634,"accept_rate":100,"display_name":"Brian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1359391769,"creation_date":1359391769,"answer_id":14566941,"question_id":14554472,"body_markdown":"Maybe a copy and paste error, but it could be that you&#39;re missing the quotes around your regex to make it a `String`. For example:\r\n\r\n    while ((line = br.readLine()) != null) { \r\n        StringTokenizer stringTokenizer = new StringTokenizer(line, &quot;\\n&quot;);\r\n    \r\n        while (stringTokenizer.hasMoreElements()) {\r\n            String function = stringTokenizer.nextElement().toString();\r\n    \r\n            if (function.matches(&quot;\\\\s*(unsigned int|float|int|char|void|double)(\\\\s)+[a-zA-Z_](\\\\w)*(\\\\s)*\\\\((\\\\s)*((((unsigned int|float|int|char|double)(\\\\s)*,(\\\\s)*)*((unsigned int|float|int|char|double)(\\\\s)*))|(\\\\s)*|(void)(\\\\s)*)\\\\)(\\\\s)*\\\\;&quot;)) {\r\n                System.out.println(&quot;VALID - &quot;);\r\n            }\r\n        }\r\n    }","title":"Regex and StringTokenizer Syntax Error","body":"<p>Maybe a copy and paste error, but it could be that you're missing the quotes around your regex to make it a <code>String</code>. For example:</p>\n\n<pre><code>while ((line = br.readLine()) != null) { \n    StringTokenizer stringTokenizer = new StringTokenizer(line, \"\\n\");\n\n    while (stringTokenizer.hasMoreElements()) {\n        String function = stringTokenizer.nextElement().toString();\n\n        if (function.matches(\"\\\\s*(unsigned int|float|int|char|void|double)(\\\\s)+[a-zA-Z_](\\\\w)*(\\\\s)*\\\\((\\\\s)*((((unsigned int|float|int|char|double)(\\\\s)*,(\\\\s)*)*((unsigned int|float|int|char|double)(\\\\s)*))|(\\\\s)*|(void)(\\\\s)*)\\\\)(\\\\s)*\\\\;\")) {\n            System.out.println(\"VALID - \");\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1489010,"reputation":7802,"user_id":1396594,"accept_rate":67,"display_name":"exexzian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1359392853,"creation_date":1359392853,"answer_id":14567301,"question_id":14554472,"body_markdown":"  [`matches` method][1] takes `String` as method argument... So, enclose your regex withing quoutes **&quot; &quot;** \r\nlike this:\r\n  \r\n\r\n    function.matches(&quot;\\\\s*(unsigned int|float|int|char|void|double)(\\\\s)+[a-zA-Z_](\\\\w)*(\\\\s)*\\\\((\\\\s)*((((unsigned int|float|int|char|double)(\\\\s)*,(\\\\s)*)*((unsigned int|float|int|char|double)(\\\\s)*))|(\\\\s)*|(void)(\\\\s)*)\\\\)(\\\\s)*\\\\;)&quot;)\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches%28java.lang.String%29","title":"Regex and StringTokenizer Syntax Error","body":"<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches%28java.lang.String%29\" rel=\"nofollow\"><code>matches</code> method</a> takes <code>String</code> as method argument... So, enclose your regex withing quoutes <strong>\" \"</strong> \nlike this:</p>\n\n<pre><code>function.matches(\"\\\\s*(unsigned int|float|int|char|void|double)(\\\\s)+[a-zA-Z_](\\\\w)*(\\\\s)*\\\\((\\\\s)*((((unsigned int|float|int|char|double)(\\\\s)*,(\\\\s)*)*((unsigned int|float|int|char|double)(\\\\s)*))|(\\\\s)*|(void)(\\\\s)*)\\\\)(\\\\s)*\\\\;)\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2219344,"reputation":2642,"user_id":1959181,"display_name":"Edgard Leal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1359394731,"creation_date":1359394731,"answer_id":14567861,"question_id":14554472,"body_markdown":"enclose your string withing quotes **&quot; &quot;**, And note that when using the operator &quot;or&quot; (|) for two consecutive words, we should use them in parenthesis `((unsigned int) | float)`\r\n\r\n&lt;br&gt;\r\n\r\n    while ((line = br.readLine()) != null) { \r\n    StringTokenizer stringTokenizer = new StringTokenizer(line, &quot;\\n&quot;);\r\n\r\n    while (stringTokenizer.hasMoreElements()) {\r\n        String function = stringTokenizer.nextElement().toString();\r\n\r\n        if (function.matches(&quot;\\\\s*((unsigned int)|float|int|char|void|double)(\\\\s)+[a-zA-Z_](\\\\w)*(\\\\s)*\\\\((\\\\s)*((((unsigned int|float|int|char|double)(\\\\s)*,(\\\\s)*)*((unsigned int|float|int|char|double)(\\\\s)*))|(\\\\s)*|(void)(\\\\s)*)\\\\)(\\\\s)*\\\\;&quot;)) {\r\n            System.out.println(&quot;VALID - &quot;);\r\n        }\r\n    }\r\n}","title":"Regex and StringTokenizer Syntax Error","body":"<p>enclose your string withing quotes <strong>\" \"</strong>, And note that when using the operator \"or\" (|) for two consecutive words, we should use them in parenthesis <code>((unsigned int) | float)</code></p>\n\n<p><br></p>\n\n<pre><code>while ((line = br.readLine()) != null) { \nStringTokenizer stringTokenizer = new StringTokenizer(line, \"\\n\");\n\nwhile (stringTokenizer.hasMoreElements()) {\n    String function = stringTokenizer.nextElement().toString();\n\n    if (function.matches(\"\\\\s*((unsigned int)|float|int|char|void|double)(\\\\s)+[a-zA-Z_](\\\\w)*(\\\\s)*\\\\((\\\\s)*((((unsigned int|float|int|char|double)(\\\\s)*,(\\\\s)*)*((unsigned int|float|int|char|double)(\\\\s)*))|(\\\\s)*|(void)(\\\\s)*)\\\\)(\\\\s)*\\\\;\")) {\n        System.out.println(\"VALID - \");\n    }\n}\n</code></pre>\n\n<p>}</p>\n"}],"owner":{"account_id":1776716,"reputation":55,"user_id":1620377,"accept_rate":80,"display_name":"Pau"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":315,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":14567861,"answer_count":3,"score":-2,"last_activity_date":1692854474,"creation_date":1359338591,"question_id":14554472,"body_markdown":"I&#39;m new to regular expressions and `StringTokenizer`, and I&#39;m getting a syntax error whenever I put this regex in `matches`:\r\n\r\n    while ((line = br.readLine()) != null) { \r\n        StringTokenizer stringTokenizer = new StringTokenizer(line, &quot;\\n&quot;);\r\n \r\n        while (stringTokenizer.hasMoreElements()) {\r\n            String function = stringTokenizer.nextElement().toString();\r\n\r\n            if (function.matches(\\\\s*(unsigned int|float|int|char|void|double)(\\\\s)+[a-zA-Z_](\\\\w)*(\\\\s)*\\\\((\\\\s)*((((unsigned int|float|int|char|double)(\\\\s)*,(\\\\s)*)*((unsigned int|float|int|char|double)(\\\\s)*))|(\\\\s)*|(void)(\\\\s)*)\\\\)(\\\\s)*\\\\;)) {\r\n                System.out.println(&quot;VALID - &quot;);\r\n            }\r\n        }\r\n    }","title":"Regex and StringTokenizer Syntax Error","body":"<p>I'm new to regular expressions and <code>StringTokenizer</code>, and I'm getting a syntax error whenever I put this regex in <code>matches</code>:</p>\n\n<pre><code>while ((line = br.readLine()) != null) { \n    StringTokenizer stringTokenizer = new StringTokenizer(line, \"\\n\");\n\n    while (stringTokenizer.hasMoreElements()) {\n        String function = stringTokenizer.nextElement().toString();\n\n        if (function.matches(\\\\s*(unsigned int|float|int|char|void|double)(\\\\s)+[a-zA-Z_](\\\\w)*(\\\\s)*\\\\((\\\\s)*((((unsigned int|float|int|char|double)(\\\\s)*,(\\\\s)*)*((unsigned int|float|int|char|double)(\\\\s)*))|(\\\\s)*|(void)(\\\\s)*)\\\\)(\\\\s)*\\\\;)) {\n            System.out.println(\"VALID - \");\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","string","java-11","string-comparison"],"comments":[{"owner":{"account_id":8666367,"reputation":9194,"user_id":6486738,"accept_rate":100,"display_name":"Ted Klein Bergman"},"score":0,"creation_date":1692859107,"post_id":76966315,"comment_id":135681603,"body_markdown":"@MadProgrammer The linked question is not a duplicate. I suggest to reopen it.","body":"@MadProgrammer The linked question is not a duplicate. I suggest to reopen it."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1692860493,"post_id":76966315,"comment_id":135681825,"body_markdown":"@TedKleinBergman Feel free to cast a re-open vote","body":"@TedKleinBergman Feel free to cast a re-open vote"},{"owner":{"account_id":8666367,"reputation":9194,"user_id":6486738,"accept_rate":100,"display_name":"Ted Klein Bergman"},"score":0,"creation_date":1692860773,"post_id":76966315,"comment_id":135681865,"body_markdown":"@MadProgrammer I can&#39;t cast another; I&#39;ve already cast one before for this question due to it being closed as duplicated with the same question.","body":"@MadProgrammer I can&#39;t cast another; I&#39;ve already cast one before for this question due to it being closed as duplicated with the same question."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1692869932,"post_id":76966315,"comment_id":135683694,"body_markdown":"Do you understand what the term “string literal” means? None of your methods returns a string literal. There is only one string literal in your code (`&quot;&quot;`) but no `return &quot;&quot;;` statement. Neither `n + &quot;&quot;` nor `10 + &quot;&quot;` are string literals.","body":"Do you understand what the term “string literal” means? None of your methods returns a string literal. There is only one string literal in your code (<code>&quot;&quot;</code>) but no <code>return &quot;&quot;;</code> statement. Neither <code>n + &quot;&quot;</code> nor <code>10 + &quot;&quot;</code> are string literals."},{"owner":{"account_id":17530239,"reputation":1,"user_id":12714421,"display_name":"ko-hs"},"score":0,"creation_date":1692874612,"post_id":76966315,"comment_id":135684598,"body_markdown":"@Holger You are correct. I was confusing String and String literal. \n\nNow I understand that a string literal is a fixed string value within the code.\n\nBut based on this understanding, `10 + &quot;&quot;` is a fixed string value within the code, so it is a string literal. Isn&#39;t that correct?","body":"@Holger You are correct. I was confusing String and String literal.   Now I understand that a string literal is a fixed string value within the code.  But based on this understanding, <code>10 + &quot;&quot;</code> is a fixed string value within the code, so it is a string literal. Isn&#39;t that correct?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1692875173,"post_id":76966315,"comment_id":135684702,"body_markdown":"A string literal is a syntactic construct of the source code. Only `&quot;10&quot;` is a string literal. In contrast, `10 + &quot;&quot;` is an *expression*, but its value is a *compile-time constant*. So both, `&quot;10&quot;` and `10 + &quot;&quot;` are compile-time constants with the same value and hence, guaranteed to refer to the same `String` object at runtime. The source code form doesn’t matter, in other words, it doesn’t need to be a string literal. It has to be a compile-time constant, as specified in [this section of the specification](https://docs.oracle.com/javase/specs/jls/se20/html/jls-15.html#jls-15.29)","body":"A string literal is a syntactic construct of the source code. Only <code>&quot;10&quot;</code> is a string literal. In contrast, <code>10 + &quot;&quot;</code> is an <i>expression</i>, but its value is a <i>compile-time constant</i>. So both, <code>&quot;10&quot;</code> and <code>10 + &quot;&quot;</code> are compile-time constants with the same value and hence, guaranteed to refer to the same <code>String</code> object at runtime. The source code form doesn’t matter, in other words, it doesn’t need to be a string literal. It has to be a compile-time constant, as specified in <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-15.html#jls-15.29\" rel=\"nofollow noreferrer\">this section of the specification</a>"}],"answers":[{"tags":[],"owner":{"account_id":8666367,"reputation":9194,"user_id":6486738,"accept_rate":100,"display_name":"Ted Klein Bergman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692854367,"creation_date":1692854367,"answer_id":76966390,"question_id":76966315,"body_markdown":"The string pool is for strings known at compile-time. Case 2 and 3 are known.\r\n\r\nCase 2 always return the string `10 + &quot;&quot;`, so it can be interned.\r\nCase 3 always store the string `10 + &quot;&quot;`, so it can be interned.\r\n\r\nCase 1, however, returns `n + &quot;&quot;` where n can be anything. It wouldn’t make sense for the compiler to store all strings possible for all values of n. Therefore, it is stored in the heap.\r\n\r\nEven if in this simple case, we know that case 1 is `10 + &quot;&quot;` as well, but it would be a bit complicated to go over all functions in your program to try and pre-calculate strings.","title":"Problems when comparing Strings using the &quot;==&quot; operator (Java 11)","body":"<p>The string pool is for strings known at compile-time. Case 2 and 3 are known.</p>\n<p>Case 2 always return the string <code>10 + &quot;&quot;</code>, so it can be interned.\nCase 3 always store the string <code>10 + &quot;&quot;</code>, so it can be interned.</p>\n<p>Case 1, however, returns <code>n + &quot;&quot;</code> where n can be anything. It wouldn’t make sense for the compiler to store all strings possible for all values of n. Therefore, it is stored in the heap.</p>\n<p>Even if in this simple case, we know that case 1 is <code>10 + &quot;&quot;</code> as well, but it would be a bit complicated to go over all functions in your program to try and pre-calculate strings.</p>\n"}],"owner":{"account_id":17530239,"reputation":1,"user_id":12714421,"display_name":"ko-hs"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1692854606,"accepted_answer_id":76966390,"answer_count":1,"score":-3,"last_activity_date":1692854367,"creation_date":1692853016,"question_id":76966315,"body_markdown":"I&#39;m a newbie to Java. Now I&#39;m studying &quot;==&quot; operator with String.\r\n\r\nI know that in java, string literals are stored in String Pool in Heap area to achieve immutability and memory saving. And I know that if I use the &quot;new&quot; keyword, it is stored in the Heap area, not the String pool.\r\n\r\nIn the code below case_1, case_2, case_3 all return the same string literal. So I expected everything to print true. But for case_1 it printed false.\r\n\r\nMy question is:\r\n- Since case_1, 2, and 3 all return the same string literal, they all point to the same address in the string pool, so it should output true, but why does it output false for case_1?\r\n\r\nIf possible, please answer with reference to the String pool in the Heap.\r\n\r\nThanks!\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        MyString ms = new MyString();\r\n\r\n        String str1 = ms.getString1(10);\r\n        String str11 = ms.getString1(10);\r\n\r\n        String str2 = ms.getString2();\r\n        String str22 = ms.getString2();\r\n\r\n        String str3 = 10 + &quot;&quot;;\r\n        String str33 = 10 + &quot;&quot;;\r\n\r\n        System.out.println(str1 == str11); // case_1\r\n        System.out.println(str2 == str22); // case_2\r\n        System.out.println(str3 == str33); // case_3\r\n    }\r\n}\r\n\r\nclass MyString {\r\n    String getString1(int n) {\r\n        return n + &quot;&quot;;\r\n    }\r\n\r\n    String getString2() {\r\n        return 10 + &quot;&quot;;\r\n    }\r\n}\r\n```\r\n\r\nI expected the following\r\n```\r\ntrue\r\ntrue\r\ntrue\r\n```\r\n\r\nbut the actual output like this\r\n```\r\nfalse\r\ntrue\r\ntrue\r\n```\r\n","title":"Problems when comparing Strings using the &quot;==&quot; operator (Java 11)","body":"<p>I'm a newbie to Java. Now I'm studying &quot;==&quot; operator with String.</p>\n<p>I know that in java, string literals are stored in String Pool in Heap area to achieve immutability and memory saving. And I know that if I use the &quot;new&quot; keyword, it is stored in the Heap area, not the String pool.</p>\n<p>In the code below case_1, case_2, case_3 all return the same string literal. So I expected everything to print true. But for case_1 it printed false.</p>\n<p>My question is:</p>\n<ul>\n<li>Since case_1, 2, and 3 all return the same string literal, they all point to the same address in the string pool, so it should output true, but why does it output false for case_1?</li>\n</ul>\n<p>If possible, please answer with reference to the String pool in the Heap.</p>\n<p>Thanks!</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        MyString ms = new MyString();\n\n        String str1 = ms.getString1(10);\n        String str11 = ms.getString1(10);\n\n        String str2 = ms.getString2();\n        String str22 = ms.getString2();\n\n        String str3 = 10 + &quot;&quot;;\n        String str33 = 10 + &quot;&quot;;\n\n        System.out.println(str1 == str11); // case_1\n        System.out.println(str2 == str22); // case_2\n        System.out.println(str3 == str33); // case_3\n    }\n}\n\nclass MyString {\n    String getString1(int n) {\n        return n + &quot;&quot;;\n    }\n\n    String getString2() {\n        return 10 + &quot;&quot;;\n    }\n}\n</code></pre>\n<p>I expected the following</p>\n<pre><code>true\ntrue\ntrue\n</code></pre>\n<p>but the actual output like this</p>\n<pre><code>false\ntrue\ntrue\n</code></pre>\n"},{"tags":["java","regex","replace"],"answers":[{"tags":[],"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1358511328,"creation_date":1358511328,"answer_id":14398759,"question_id":14398683,"body_markdown":"From the [Javadoc][1]:\r\n\r\n`public boolean find(int start)`\r\n\r\n&gt;**Resets** this matcher and then [...]\r\n\r\n(emphasis mine)\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28int%29","title":"Matcher.find (int start) not working within a region","body":"<p>From the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28int%29\" rel=\"nofollow\">Javadoc</a>:</p>\n\n<p><code>public boolean find(int start)</code></p>\n\n<blockquote>\n  <p><strong>Resets</strong> this matcher and then [...]</p>\n</blockquote>\n\n<p>(emphasis mine)</p>\n"}],"owner":{"account_id":2259955,"reputation":952,"user_id":1990297,"accept_rate":81,"display_name":"chrixm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1375,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":14398759,"answer_count":1,"score":2,"last_activity_date":1692854357,"creation_date":1358511069,"question_id":14398683,"body_markdown":"I am trying to match within a selection in a JTextArea and I am using Matcher.region() to define the boundary of my match:\r\n\r\n    JTextComponent t;\r\n\r\n    Pattern p = Pattern.compile(&quot;string&quot;, Pattern.CASE_INSENSITIVE | Pattern.MULTILINE);\r\n    Matcher m = p.matcher(t.getText()).region(t.getSelectionStart(), t.getSelectionEnd());\r\n    m.useAnchoringBounds(false);\r\n\r\n    if(m.find()) {\r\n      System.out.println(&quot;Found match from &quot; + m.start() + &quot; to &quot; + m.end());\r\n    }\r\n    else {\r\n      System.out.println(&quot;No match found&quot;);\r\n    }\r\n\r\nThe above works as expected and it will find the first match within the region - if no match is found then it doesn&#39;t find a match.\r\n\r\nHowever, I am trying to loop through the matches within the region (search and replace type function) and if I specify a start position to find() that is within the region then it matches outside of the region:\r\n\r\n    int cPos = m.regionStart();\r\n    if (m.find(cPos) || m.find(m.regionStart())) {\r\n      System.out.println(&quot;Found match from &quot; + m.start() + &quot; to &quot; + m.end());\r\n      cPos = m.end();\r\n    }\r\n    else {\r\n      System.out.println(&quot;No match found&quot;);\r\n    }\r\n\r\nIs this a bug or am I breaking the region if I specify a start position - even if it is contained within the region?\r\n","title":"Matcher.find (int start) not working within a region","body":"<p>I am trying to match within a selection in a JTextArea and I am using Matcher.region() to define the boundary of my match:</p>\n<pre><code>JTextComponent t;\n\nPattern p = Pattern.compile(&quot;string&quot;, Pattern.CASE_INSENSITIVE | Pattern.MULTILINE);\nMatcher m = p.matcher(t.getText()).region(t.getSelectionStart(), t.getSelectionEnd());\nm.useAnchoringBounds(false);\n\nif(m.find()) {\n  System.out.println(&quot;Found match from &quot; + m.start() + &quot; to &quot; + m.end());\n}\nelse {\n  System.out.println(&quot;No match found&quot;);\n}\n</code></pre>\n<p>The above works as expected and it will find the first match within the region - if no match is found then it doesn't find a match.</p>\n<p>However, I am trying to loop through the matches within the region (search and replace type function) and if I specify a start position to find() that is within the region then it matches outside of the region:</p>\n<pre><code>int cPos = m.regionStart();\nif (m.find(cPos) || m.find(m.regionStart())) {\n  System.out.println(&quot;Found match from &quot; + m.start() + &quot; to &quot; + m.end());\n  cPos = m.end();\n}\nelse {\n  System.out.println(&quot;No match found&quot;);\n}\n</code></pre>\n<p>Is this a bug or am I breaking the region if I specify a start position - even if it is contained within the region?</p>\n"},{"tags":["java","regex"],"answers":[{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1358470433,"creation_date":1358469991,"answer_id":14390768,"question_id":14390722,"body_markdown":"It is hard to say what are you trying to achieve, but I can see few strange things in your regex:\r\n\r\n 1. you have opened class of characters but never closed it. Instead you used `\\\\]` which makes `]` normal character. \r\n - If you want to include `]` in your characters class then you need additional `]` at the end, like `&quot;^[a-zA-Z\\300-\\3770-9\\u0153\\346 \\u002F.&#39;-\\\\]]*$&quot;`\r\n - if you want to include `\\` in your characters class then you need to use `\\\\\\\\` version, because you need to escape its special meaning two times, in regex engine, and in Javas String\r\n 2. you used `-` with (`&#39;-\\\\]`) which in character class is used to specify range of characters like `a-z` or `A-Z`. To escape its special meaning you need to use `\\\\-`","title":"java regex pattern unclosed character class","body":"<p>It is hard to say what are you trying to achieve, but I can see few strange things in your regex:</p>\n\n<ol>\n<li>you have opened class of characters but never closed it. Instead you used <code>\\\\]</code> which makes <code>]</code> normal character. \n<ul>\n<li>If you want to include <code>]</code> in your characters class then you need additional <code>]</code> at the end, like <code>\"^[a-zA-Z\\300-\\3770-9\\u0153\\346 \\u002F.'-\\\\]]*$\"</code></li>\n<li>if you want to include <code>\\</code> in your characters class then you need to use <code>\\\\\\\\</code> version, because you need to escape its special meaning two times, in regex engine, and in Javas String</li>\n</ul></li>\n<li>you used <code>-</code> with (<code>'-\\\\]</code>) which in character class is used to specify range of characters like <code>a-z</code> or <code>A-Z</code>. To escape its special meaning you need to use <code>\\\\-</code></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":410237,"reputation":12627,"user_id":781965,"accept_rate":72,"display_name":"Jeff"},"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1358470404,"creation_date":1358470404,"answer_id":14390835,"question_id":14390722,"body_markdown":"Assuming that you want to match `\\` and `-` and not `]`:\r\n\r\n    Pattern pattern = Pattern.compile(&quot;^[a-zA-Z\\300-\\3770-9\\u0153\\346 \\u002F.&#39;\\\\\\\\-]*$&quot;);\r\n\r\nYou need to double escape your backslashes, as `\\` is also an escape character in regex. Thus `\\\\]` escapes the backslash for java but not for regex. You need to add another java-escaped `\\` in order to regex-escape your second java-escaped `\\`.\r\n\r\nSo `\\\\\\\\` after java escaping becomes `\\\\` which is then regex escaped to `\\`.\r\n\r\nMoving `-` to the end of the sequence means that it is used as a character, instead of a range operator as pointed out by Pshemo.","title":"java regex pattern unclosed character class","body":"<p>Assuming that you want to match <code>\\</code> and <code>-</code> and not <code>]</code>:</p>\n\n<pre><code>Pattern pattern = Pattern.compile(\"^[a-zA-Z\\300-\\3770-9\\u0153\\346 \\u002F.'\\\\\\\\-]*$\");\n</code></pre>\n\n<p>You need to double escape your backslashes, as <code>\\</code> is also an escape character in regex. Thus <code>\\\\]</code> escapes the backslash for java but not for regex. You need to add another java-escaped <code>\\</code> in order to regex-escape your second java-escaped <code>\\</code>.</p>\n\n<p>So <code>\\\\\\\\</code> after java escaping becomes <code>\\\\</code> which is then regex escaped to <code>\\</code>.</p>\n\n<p>Moving <code>-</code> to the end of the sequence means that it is used as a character, instead of a range operator as pointed out by Pshemo.</p>\n"}],"owner":{"account_id":1029549,"reputation":59,"user_id":1038148,"accept_rate":71,"display_name":"Joseph Vance"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25863,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":14390835,"answer_count":2,"score":5,"last_activity_date":1692854287,"creation_date":1358469623,"question_id":14390722,"body_markdown":"I need some help. Im getting:\r\n\r\n    Caused by: java.util.regex.PatternSyntaxException: Unclosed character class near index 24\r\n    ^[a-zA-Z└-&#160;0-9&#163;&#181; /.&#39;-\\]*$\r\n                            ^\r\n            at java.util.regex.Pattern.error(Pattern.java:1713)\r\n            at java.util.regex.Pattern.clazz(Pattern.java:2254)\r\n            at java.util.regex.Pattern.sequence(Pattern.java:1818)\r\n            at java.util.regex.Pattern.expr(Pattern.java:1752)\r\n            at java.util.regex.Pattern.compile(Pattern.java:1460)\r\n            at java.util.regex.Pattern.&lt;init&gt;(Pattern.java:1133)\r\n            at java.util.regex.Pattern.compile(Pattern.java:823)\r\n\r\nHere is my code:\r\n\r\n\tString testString = value.toString();\r\n\r\n\tPattern pattern = Pattern.compile(&quot;^[a-zA-Z\\300-\\3770-9\\u0153\\346 \\u002F.&#39;-\\\\]*$&quot;);\r\n\tMatcher m = pattern.matcher(testString);\r\n\r\nI have to use the unicode value for some because I&#39;m working with xhtml.\r\n\r\nAny help would be great!\r\n","title":"java regex pattern unclosed character class","body":"<p>I need some help. Im getting:</p>\n\n<pre><code>Caused by: java.util.regex.PatternSyntaxException: Unclosed character class near index 24\n^[a-zA-Z└- 0-9£µ /.'-\\]*$\n                        ^\n        at java.util.regex.Pattern.error(Pattern.java:1713)\n        at java.util.regex.Pattern.clazz(Pattern.java:2254)\n        at java.util.regex.Pattern.sequence(Pattern.java:1818)\n        at java.util.regex.Pattern.expr(Pattern.java:1752)\n        at java.util.regex.Pattern.compile(Pattern.java:1460)\n        at java.util.regex.Pattern.&lt;init&gt;(Pattern.java:1133)\n        at java.util.regex.Pattern.compile(Pattern.java:823)\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>String testString = value.toString();\n\nPattern pattern = Pattern.compile(\"^[a-zA-Z\\300-\\3770-9\\u0153\\346 \\u002F.'-\\\\]*$\");\nMatcher m = pattern.matcher(testString);\n</code></pre>\n\n<p>I have to use the unicode value for some because I'm working with xhtml.</p>\n\n<p>Any help would be great!</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"display_name":"user554546"},"score":1,"creation_date":1358340501,"post_id":14358826,"comment_id":19963367,"body_markdown":"The string &quot;seems not working&quot; is not a built-in error message in Java.","body":"The string &quot;seems not working&quot; is not a built-in error message in Java."}],"answers":[{"tags":[],"owner":{"account_id":279975,"reputation":15386,"user_id":575421,"accept_rate":50,"display_name":"Mikita Belahlazau"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1358340653,"creation_date":1358340653,"answer_id":14358920,"question_id":14358826,"body_markdown":"Try this:\r\n\r\n    String regex = &quot;[01]([01][01])*&quot;;\r\n    &quot;00011&quot;.matches(regex) =&gt; true\r\n    &quot;0001&quot;.matches(regex) =&gt; false","title":"How to detect sequence of 01 of odd length by regex","body":"<p>Try this:</p>\n\n<pre><code>String regex = \"[01]([01][01])*\";\n\"00011\".matches(regex) =&gt; true\n\"0001\".matches(regex) =&gt; false\n</code></pre>\n"}],"owner":{"account_id":1138466,"reputation":17496,"user_id":1123020,"accept_rate":60,"display_name":"Yoda"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":477,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":14358920,"answer_count":1,"score":0,"last_activity_date":1692854267,"creation_date":1358340392,"question_id":14358826,"body_markdown":"I would like to match by regex strings of 01 which have odd length.\r\nExample: `&quot;0&quot;,&quot;001&quot;,&quot;111&quot;,&quot;11111&quot; etc.`\r\n\r\nThe idea is the odd length sequences are 0 or 1 followed by pairs of 0 or 1. But my regex seems not working.\r\nI made this:\r\n\r\n    String regex = &quot;[0-1]{1}[[0-1]{2}]{0,}&quot;;\r\n    \tString txt = &quot;01&quot;;\r\n    \tPattern p = Pattern.compile(regex);\r\n    \tMatcher m = p.matcher(txt);\r\n    \r\n    \t\tSystem.out.println(m.matches());\r\n    \t ","title":"How to detect sequence of 01 of odd length by regex","body":"<p>I would like to match by regex strings of 01 which have odd length.\nExample: <code>\"0\",\"001\",\"111\",\"11111\" etc.</code></p>\n\n<p>The idea is the odd length sequences are 0 or 1 followed by pairs of 0 or 1. But my regex seems not working.\nI made this:</p>\n\n<pre><code>String regex = \"[0-1]{1}[[0-1]{2}]{0,}\";\n    String txt = \"01\";\n    Pattern p = Pattern.compile(regex);\n    Matcher m = p.matcher(txt);\n\n        System.out.println(m.matches());\n</code></pre>\n"},{"tags":["java","regex"],"answers":[{"tags":[],"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1358325406,"creation_date":1358325406,"answer_id":14354166,"question_id":14354125,"body_markdown":"Use the negative lookahead / lookbehind constructs from [the special constructs section][1] of the Java [`Pattern`][2] documentation.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#special\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html","title":"Regex pattern for string not bounded by character","body":"<p>Use the negative lookahead / lookbehind constructs from <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#special\" rel=\"nofollow\">the special constructs section</a> of the Java <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html\" rel=\"nofollow\"><code>Pattern</code></a> documentation.</p>\n"},{"tags":[],"owner":{"account_id":1155552,"reputation":355,"user_id":1136274,"display_name":"Rajat Garg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1358326301,"creation_date":1358326301,"answer_id":14354392,"question_id":14354125,"body_markdown":"Try this :\r\n\r\n    String regex = &quot;([^&#39;])([{}])&quot;;\r\n        Pattern pattern = Pattern.compile(regex);\r\n        Matcher matcher = pattern.matcher(str);\r\n\r\n        while (matcher.find()) {\r\n            if (&quot;{&quot;.equals(matcher.group(2))) {\r\n                matcher.appendReplacement(strBuffer, matcher.group(1) + &quot;&lt;&lt;&quot;);\r\n            } else if (&quot;}&quot;.equals(matcher.group(2))) {\r\n                matcher.appendReplacement(strBuffer,matcher.group(1) + &quot;&gt;&gt;&quot;);\r\n            }\r\n        }\r\n        matcher.appendTail(strBuffer);","title":"Regex pattern for string not bounded by character","body":"<p>Try this :</p>\n\n<pre><code>String regex = \"([^'])([{}])\";\n    Pattern pattern = Pattern.compile(regex);\n    Matcher matcher = pattern.matcher(str);\n\n    while (matcher.find()) {\n        if (\"{\".equals(matcher.group(2))) {\n            matcher.appendReplacement(strBuffer, matcher.group(1) + \"&lt;&lt;\");\n        } else if (\"}\".equals(matcher.group(2))) {\n            matcher.appendReplacement(strBuffer,matcher.group(1) + \"&gt;&gt;\");\n        }\n    }\n    matcher.appendTail(strBuffer);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1358326414,"creation_date":1358326414,"answer_id":14354413,"question_id":14354125,"body_markdown":"This is a clear use case for zero-width assertions. The regex you need isn&#39;t very complex:\r\n\r\n    String \r\n       input = &quot;this is single-quoted curly &#39;{&#39;something&#39;}&#39; and this is {not} end&quot;,\r\n      output = &quot;this is single-quoted curly &#39;{&#39;something&#39;}&#39; and this is &lt;&lt;not&gt;&gt; end&quot;;\r\n    System.out.println(input.replaceAll(&quot;(?&lt;!&#39;)\\\\{(.*?)\\\\}(?!&#39;)&quot;, &quot;&lt;&lt;$1&gt;&gt;&quot;)\r\n                            .equals(output));\r\n\r\nprints\r\n\r\n    true","title":"Regex pattern for string not bounded by character","body":"<p>This is a clear use case for zero-width assertions. The regex you need isn't very complex:</p>\n\n<pre><code>String \n   input = \"this is single-quoted curly '{'something'}' and this is {not} end\",\n  output = \"this is single-quoted curly '{'something'}' and this is &lt;&lt;not&gt;&gt; end\";\nSystem.out.println(input.replaceAll(\"(?&lt;!')\\\\{(.*?)\\\\}(?!')\", \"&lt;&lt;$1&gt;&gt;\")\n                        .equals(output));\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>true\n</code></pre>\n"}],"owner":{"account_id":2250359,"reputation":13,"user_id":1982706,"display_name":"Jyahoo Test"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":415,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":14354413,"answer_count":3,"score":1,"last_activity_date":1692854246,"creation_date":1358325201,"question_id":14354125,"body_markdown":"I need java pattern for string not bounded by a character.&lt;br/&gt;\r\n\r\nI have a string (as mentioned below), with some curly brackets bounded by single quotes and other curly brackets that are not. I want to replace the curly brackets that are not bounded by single quotes, with another string.&lt;br/&gt;&lt;br/&gt;\r\nOriginal string:\r\n\r\n    this is single-quoted curly &#39;{&#39;something&#39;}&#39; and this is {not} end\r\nNeeds to be converted to\r\n\r\n    this is single-quoted curly &#39;{&#39;something&#39;}&#39; and this is &lt;&lt;not&gt;&gt; end\r\nNotice that the curly brackets { } that are not bounded by single quotes have been replaced with &lt;&lt; &gt;&gt;.\r\n\r\nHowever, my code prints (character gets eaten up) the text as\r\n\r\n    this is single-quoted curly &#39;{&#39;something&#39;}&#39; and this is&lt;&lt;no&gt;&gt; end\r\n\r\nwhen I use the pattern\r\n\r\n    [^&#39;]([{}])\r\n\r\nMy code is\r\n\r\n    String regex = &quot;[^&#39;]([{}])&quot;;\r\n    Pattern pattern = Pattern.compile(regex);\r\n    Matcher matcher = pattern.matcher(str);\r\n    \r\n    while (matcher.find()) {\r\n    \tif ( &quot;{&quot;.equals(matcher.group(1)) ) {\r\n    \t\tmatcher.appendReplacement(strBuffer, &quot;&amp;lt;&amp;lt;&quot;);\r\n    \t} else if ( &quot;}&quot;.equals(matcher.group(1))) {\r\n    \t\tmatcher.appendReplacement(strBuffer, &quot;&amp;gt;&amp;gt;&quot;);\r\n    \t}\r\n    }\r\n    matcher.appendTail(strBuffer);","title":"Regex pattern for string not bounded by character","body":"<p>I need java pattern for string not bounded by a character.<br/></p>\n\n<p>I have a string (as mentioned below), with some curly brackets bounded by single quotes and other curly brackets that are not. I want to replace the curly brackets that are not bounded by single quotes, with another string.<br/><br/>\nOriginal string:</p>\n\n<pre><code>this is single-quoted curly '{'something'}' and this is {not} end\n</code></pre>\n\n<p>Needs to be converted to</p>\n\n<pre><code>this is single-quoted curly '{'something'}' and this is &lt;&lt;not&gt;&gt; end\n</code></pre>\n\n<p>Notice that the curly brackets { } that are not bounded by single quotes have been replaced with &lt;&lt; >>.</p>\n\n<p>However, my code prints (character gets eaten up) the text as</p>\n\n<pre><code>this is single-quoted curly '{'something'}' and this is&lt;&lt;no&gt;&gt; end\n</code></pre>\n\n<p>when I use the pattern</p>\n\n<pre><code>[^']([{}])\n</code></pre>\n\n<p>My code is</p>\n\n<pre><code>String regex = \"[^']([{}])\";\nPattern pattern = Pattern.compile(regex);\nMatcher matcher = pattern.matcher(str);\n\nwhile (matcher.find()) {\n    if ( \"{\".equals(matcher.group(1)) ) {\n        matcher.appendReplacement(strBuffer, \"&amp;lt;&amp;lt;\");\n    } else if ( \"}\".equals(matcher.group(1))) {\n        matcher.appendReplacement(strBuffer, \"&amp;gt;&amp;gt;\");\n    }\n}\nmatcher.appendTail(strBuffer);\n</code></pre>\n"},{"tags":["java","testing","karate","web-api-testing"],"comments":[{"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"score":0,"creation_date":1692867415,"post_id":76966381,"comment_id":135683192,"body_markdown":"your post does not follow stack overflow guidelines: https://stackoverflow.com/help/how-to-ask - also I don&#39;t think anyone can help you unless you follow this process: https://github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue","body":"your post does not follow stack overflow guidelines: <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> - also I don&#39;t think anyone can help you unless you follow this process: <a href=\"https://github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue\" rel=\"nofollow noreferrer\">github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue</a>"}],"owner":{"account_id":29250121,"reputation":11,"user_id":22409663,"display_name":"Ayush Mandhana"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1692854222,"creation_date":1692854222,"question_id":76966381,"body_markdown":"I was trying to access the karate-config.js file inside the features file. Created a file name karate-config.js\r\n\r\n```\r\nfunction fn(){\r\nvar config = {\r\nname:&quot;test&quot;,\r\nbaseUrl: &quot;http://example.com&quot;\r\n}\r\nreturn config;\r\n}\r\n```\r\nbut unable to access the baseUrl inside the handler.feature file.\r\n[![handler.feature](https://i.stack.imgur.com/mP05Y.png)](https://i.stack.imgur.com/mP05Y.png)\r\n\r\nI got an error response of undefined\r\n[![Error Response I get](https://i.stack.imgur.com/zlZ2q.png)](https://i.stack.imgur.com/zlZ2q.png)\r\n\r\nI have also gone through the folder structure.\r\n[![Folder Structure](https://i.stack.imgur.com/CQYGT.png)](https://i.stack.imgur.com/CQYGT.png)\r\n\r\n\r\nI have gone through the documentation of karatelabs and had followed the same steps but unable to make it work.","title":"Unable to access the karate-config.js inside my handler.feature file","body":"<p>I was trying to access the karate-config.js file inside the features file. Created a file name karate-config.js</p>\n<pre><code>function fn(){\nvar config = {\nname:&quot;test&quot;,\nbaseUrl: &quot;http://example.com&quot;\n}\nreturn config;\n}\n</code></pre>\n<p>but unable to access the baseUrl inside the handler.feature file.\n<a href=\"https://i.stack.imgur.com/mP05Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mP05Y.png\" alt=\"handler.feature\" /></a></p>\n<p>I got an error response of undefined\n<a href=\"https://i.stack.imgur.com/zlZ2q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zlZ2q.png\" alt=\"Error Response I get\" /></a></p>\n<p>I have also gone through the folder structure.\n<a href=\"https://i.stack.imgur.com/CQYGT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CQYGT.png\" alt=\"Folder Structure\" /></a></p>\n<p>I have gone through the documentation of karatelabs and had followed the same steps but unable to make it work.</p>\n"},{"tags":["java","spring-boot","hibernate"],"answers":[{"tags":[],"owner":{"account_id":29165101,"reputation":9,"user_id":22342873,"display_name":"Indunil Prasanna"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1692783897,"creation_date":1692783897,"answer_id":76960157,"question_id":76959808,"body_markdown":"The error message you provided indicates that you&#39;re encountering a duplicate key violation in the &quot;employee&quot; table&#39;s primary key field. This means that you&#39;re trying to insert a record with a value for the primary key column that already exists in the table.\r\n\r\nThe error message specifically mentions &quot;Duplicate entry &#39;1&#39; for key &#39;employee.PRIMARY&#39;&quot;, which indicates that you&#39;re trying to insert a record with a value of &#39;1&#39; in the primary key column, but there is already a record with that value in the table.\r\n\r\nTo resolve this issue:\r\n\r\n1. **Check Data**: Review the data you&#39;re inserting and ensure that you&#39;re not inserting duplicate values for the primary key column.\r\n\r\n2. **Primary Key Sequence**: If the primary key is generated by a sequence or an auto-increment feature, make sure that you&#39;re not manually specifying the primary key value while inserting the record.\r\n\r\n3. **Database State**: Check the current state of the &quot;employee&quot; table to verify if there&#39;s already a record with the primary key value you&#39;re trying to insert.\r\n\r\n4. **Unique Constraint**: Ensure that the primary key column has a unique constraint defined and that there are no data integrity issues in the table.\r\n\r\n5. **Data Insertion Logic**: Double-check your code logic for inserting data into the &quot;employee&quot; table to make sure there are no unintended duplicate insertions.\r\n\r\nBy addressing these points, you should be able to resolve the duplicate key violation issue and successfully insert records into the &quot;employee&quot; table without encountering the constraint violation.","title":"Duplicate entry for primary key on abstract class","body":"<p>The error message you provided indicates that you're encountering a duplicate key violation in the &quot;employee&quot; table's primary key field. This means that you're trying to insert a record with a value for the primary key column that already exists in the table.</p>\n<p>The error message specifically mentions &quot;Duplicate entry '1' for key 'employee.PRIMARY'&quot;, which indicates that you're trying to insert a record with a value of '1' in the primary key column, but there is already a record with that value in the table.</p>\n<p>To resolve this issue:</p>\n<ol>\n<li><p><strong>Check Data</strong>: Review the data you're inserting and ensure that you're not inserting duplicate values for the primary key column.</p>\n</li>\n<li><p><strong>Primary Key Sequence</strong>: If the primary key is generated by a sequence or an auto-increment feature, make sure that you're not manually specifying the primary key value while inserting the record.</p>\n</li>\n<li><p><strong>Database State</strong>: Check the current state of the &quot;employee&quot; table to verify if there's already a record with the primary key value you're trying to insert.</p>\n</li>\n<li><p><strong>Unique Constraint</strong>: Ensure that the primary key column has a unique constraint defined and that there are no data integrity issues in the table.</p>\n</li>\n<li><p><strong>Data Insertion Logic</strong>: Double-check your code logic for inserting data into the &quot;employee&quot; table to make sure there are no unintended duplicate insertions.</p>\n</li>\n</ol>\n<p>By addressing these points, you should be able to resolve the duplicate key violation issue and successfully insert records into the &quot;employee&quot; table without encountering the constraint violation.</p>\n"},{"tags":[],"owner":{"account_id":21967042,"reputation":84,"user_id":16244113,"display_name":"mamJavad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692784247,"creation_date":1692784247,"answer_id":76960203,"question_id":76959808,"body_markdown":"I think if you add \r\n\r\n    @Id\r\n    @GeneratedValue\r\n    private Long personId;\r\nit will be ok","title":"Duplicate entry for primary key on abstract class","body":"<p>I think if you add</p>\n<pre><code>@Id\n@GeneratedValue\nprivate Long personId;\n</code></pre>\n<p>it will be ok</p>\n"},{"tags":[],"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692853513,"creation_date":1692853513,"answer_id":76966336,"question_id":76959808,"body_markdown":"The issue is to do with key generation and related to `@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)` being used with `IDENTITY` generation strategy for Id from Hibernate.\r\n\r\nThe `SEQUENCE` generation strategy is preferred and better for hibernate since it tracks the Id generation rather than the database being responsible for it.","title":"Duplicate entry for primary key on abstract class","body":"<p>The issue is to do with key generation and related to <code>@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)</code> being used with <code>IDENTITY</code> generation strategy for Id from Hibernate.</p>\n<p>The <code>SEQUENCE</code> generation strategy is preferred and better for hibernate since it tracks the Id generation rather than the database being responsible for it.</p>\n"}],"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1692853513,"creation_date":1692781037,"question_id":76959808,"body_markdown":"I have a class Employee which extends Person. When I try to save a Employee I am getting an error about duplicate id (Unit Test).\r\n\r\nEnvironment:\r\nHibernate 6.2\r\nSpring Boot 3.2\r\nJava 18\r\n\r\nMy classes:\r\n\r\n**Person**\r\n\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Entity\r\n    @Data\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    @Table(name=&quot;PERSON&quot;)\r\n    public abstract class Person {\r\n\r\n        @Id\r\n        @GeneratedValue\r\n        private Long personId;\r\n\r\n        @JsonBackReference\r\n        @ManyToOne(fetch = FetchType.LAZY, optional = true)\r\n        private Check check;\r\n    }\r\n\r\nAnd \r\n\r\n**Employee**\r\n\r\n    @Entity\r\n    @Data\r\n    @NoArgsConstructor\r\n    public class Employee extends Person {\r\n\r\n    @Column(unique = true)\r\n    private String empCode;\r\n\r\n    @JoinColumn(name =&quot;dateA&quot;)\r\n    @JsonFormat(pattern=&quot;yyyy-MM-dd&quot;)\r\n    private LocalDate dateA;\r\n\r\n    @Lob\r\n    private String comment;\r\n\r\n    public Pit(String empCode, LocalDate dateA, String comment) {\r\n        this.empCode = empCode;\r\n        this.dateA = dateA;\r\n        this.comment = comment;\r\n       }\r\n    }\r\n\r\nI try to instantiate a instance of Employee\r\n\r\n`Employee emp = employeeRepository.save(new Employee(&quot;XRY827&quot;, LocalDate.of(2023, 03, 28), &quot;comment&quot;));`\r\n\r\nBut I get :\r\n\r\n    could not execute statement [Duplicate entry &#39;1&#39; for key &#39;employee.PRIMARY&#39;] [insert into employee (check_id,code,comment,date_a,person_id) values (?,?,?,?,?)]; SQL [insert into employee (check_id,code,comment,date_inserted,person_id) values (?,?,?,?,?)]; constraint [employee.PRIMARY]\r\n    org.springframework.dao.DataIntegrityViolationException: could not execute statement [Duplicate entry &#39;1&#39; for key &#39;employee.PRIMARY&#39;] [insert into employee(check_id,code,comment,date_inserted,person_id) values (?,?,?,?,?)]; SQL [insert into employee (check_id,code,comment,date_inserted,person_id) values (?,?,?,?,?)]; constraint [employee.PRIMARY]\r\n\r\nFrom the SQL in the error above it looks like hibernate is trying to insert a `person_id` and a `check_id` - even though the `check_id` is optional and the `person_id` is generated?\r\n\r\nHow can I create a new Employee without error?\r\n\r\n","title":"Duplicate entry for primary key on abstract class","body":"<p>I have a class Employee which extends Person. When I try to save a Employee I am getting an error about duplicate id (Unit Test).</p>\n<p>Environment:\nHibernate 6.2\nSpring Boot 3.2\nJava 18</p>\n<p>My classes:</p>\n<p><strong>Person</strong></p>\n<pre><code>@AllArgsConstructor\n@NoArgsConstructor\n@Entity\n@Data\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\n@Table(name=&quot;PERSON&quot;)\npublic abstract class Person {\n\n    @Id\n    @GeneratedValue\n    private Long personId;\n\n    @JsonBackReference\n    @ManyToOne(fetch = FetchType.LAZY, optional = true)\n    private Check check;\n}\n</code></pre>\n<p>And</p>\n<p><strong>Employee</strong></p>\n<pre><code>@Entity\n@Data\n@NoArgsConstructor\npublic class Employee extends Person {\n\n@Column(unique = true)\nprivate String empCode;\n\n@JoinColumn(name =&quot;dateA&quot;)\n@JsonFormat(pattern=&quot;yyyy-MM-dd&quot;)\nprivate LocalDate dateA;\n\n@Lob\nprivate String comment;\n\npublic Pit(String empCode, LocalDate dateA, String comment) {\n    this.empCode = empCode;\n    this.dateA = dateA;\n    this.comment = comment;\n   }\n}\n</code></pre>\n<p>I try to instantiate a instance of Employee</p>\n<p><code>Employee emp = employeeRepository.save(new Employee(&quot;XRY827&quot;, LocalDate.of(2023, 03, 28), &quot;comment&quot;));</code></p>\n<p>But I get :</p>\n<pre><code>could not execute statement [Duplicate entry '1' for key 'employee.PRIMARY'] [insert into employee (check_id,code,comment,date_a,person_id) values (?,?,?,?,?)]; SQL [insert into employee (check_id,code,comment,date_inserted,person_id) values (?,?,?,?,?)]; constraint [employee.PRIMARY]\norg.springframework.dao.DataIntegrityViolationException: could not execute statement [Duplicate entry '1' for key 'employee.PRIMARY'] [insert into employee(check_id,code,comment,date_inserted,person_id) values (?,?,?,?,?)]; SQL [insert into employee (check_id,code,comment,date_inserted,person_id) values (?,?,?,?,?)]; constraint [employee.PRIMARY]\n</code></pre>\n<p>From the SQL in the error above it looks like hibernate is trying to insert a <code>person_id</code> and a <code>check_id</code> - even though the <code>check_id</code> is optional and the <code>person_id</code> is generated?</p>\n<p>How can I create a new Employee without error?</p>\n"},{"tags":["java","mysql","jpa","orm","eclipselink"],"comments":[{"owner":{"account_id":275393,"reputation":4657,"user_id":568254,"accept_rate":60,"display_name":"Daniel B. Chapman"},"score":0,"creation_date":1346615905,"post_id":12002260,"comment_id":16403675,"body_markdown":"Is there a reason you can&#39;t just do a standard import via SQL from Old -&gt; New? Once you have completed that you simply need to adjust the Sequence so that you don&#39;t overwrite the values. After-all, its an ORM and it is reading the database.","body":"Is there a reason you can&#39;t just do a standard import via SQL from Old -&gt; New? Once you have completed that you simply need to adjust the Sequence so that you don&#39;t overwrite the values. After-all, its an ORM and it is reading the database."},{"owner":{"account_id":216313,"reputation":12017,"user_id":471478,"accept_rate":86,"display_name":"scravy"},"score":0,"creation_date":1346622535,"post_id":12002260,"comment_id":16404938,"body_markdown":"The old and the new have completely different schemas and the application is used to transform data from the one model into the other (things like one field for first and last name in the old, two fields in the new, etc.). Of course it would be an alternative option to dump the old database, create a new data script and import these; however, the app is almost complete. Besides, I&#39;d really like to know how to achieve this in general.","body":"The old and the new have completely different schemas and the application is used to transform data from the one model into the other (things like one field for first and last name in the old, two fields in the new, etc.). Of course it would be an alternative option to dump the old database, create a new data script and import these; however, the app is almost complete. Besides, I&#39;d really like to know how to achieve this in general."},{"owner":{"account_id":275393,"reputation":4657,"user_id":568254,"accept_rate":60,"display_name":"Daniel B. Chapman"},"score":0,"creation_date":1346626402,"post_id":12002260,"comment_id":16405611,"body_markdown":"Since you schemas are entirely different, why is there a problem just doing a &quot;clean&quot; import. Aka: build new entities and relationships and persist them? Where I&#39;m leading you is that I think you&#39;re barking up a difficult tree. You can, however, remove the sequence, persist everything manually, then start the sequence.","body":"Since you schemas are entirely different, why is there a problem just doing a &quot;clean&quot; import. Aka: build new entities and relationships and persist them? Where I&#39;m leading you is that I think you&#39;re barking up a difficult tree. You can, however, remove the sequence, persist everything manually, then start the sequence."},{"owner":{"account_id":4131691,"reputation":554,"user_id":3389438,"display_name":"Akzidenzgrotesk"},"score":0,"creation_date":1486295258,"post_id":12002260,"comment_id":71275504,"body_markdown":"`@GeneratedValue(strategy = GenerationType.AUTO)` did the trick in my case. Migrating the old Data first, the existing keys are kept.","body":"<code>@GeneratedValue(strategy = GenerationType.AUTO)</code> did the trick in my case. Migrating the old Data first, the existing keys are kept."}],"answers":[{"tags":[],"owner":{"account_id":1334876,"reputation":3668,"user_id":1277864,"accept_rate":70,"display_name":"Dangling Piyush"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1345192609,"creation_date":1345192609,"answer_id":12002478,"question_id":12002260,"body_markdown":"**Look for Custom Id Generator &lt;br&gt;**\r\n\r\nhttp://blog.anorakgirl.co.uk/2009/01/custom-hibernate-sequence-generator-for-id-field/\r\n\r\n**maybe this could help.**","title":"Manually specify the value of a primary key in JPA @GeneratedValue column","body":"<p><strong>Look for Custom Id Generator <br></strong></p>\n\n<p><a href=\"http://blog.anorakgirl.co.uk/2009/01/custom-hibernate-sequence-generator-for-id-field/\" rel=\"nofollow\">http://blog.anorakgirl.co.uk/2009/01/custom-hibernate-sequence-generator-for-id-field/</a></p>\n\n<p><strong>maybe this could help.</strong></p>\n"},{"tags":[],"owner":{"account_id":181890,"reputation":17919,"user_id":416206,"accept_rate":40,"display_name":"James"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1346767453,"creation_date":1346767453,"answer_id":12265188,"question_id":12002260,"body_markdown":"If you use TABLE sequencing, then EclipseLink will allow you to override the value (or SEQUENCE if your database supports this, MySQL does not).\r\n\r\nFor IDENTITY, I&#39;m not even sure that MySQL will allow you to supply your own Id, you might want to verify this.  In general I would never recommend using IDENTITY as it does not support preallocation.\r\n\r\nThere are a few issues with allowing IDENTITY to provide the id or not.  One is that two different insert SQL will need to be generated depending on the id value, as for IDENTITY the id cannot be in the insert at all.  You may wish to log a bug to have IDENTITY support user provided ids.\r\n\r\nYou should still be able to get it working with your own Sequence subclass, or possibly MySQLPlatform subclass.  You would set your MySQLPlatform subclass using the &quot;eclipselink.target-database&quot; persistence unit property.","title":"Manually specify the value of a primary key in JPA @GeneratedValue column","body":"<p>If you use TABLE sequencing, then EclipseLink will allow you to override the value (or SEQUENCE if your database supports this, MySQL does not).</p>\n\n<p>For IDENTITY, I'm not even sure that MySQL will allow you to supply your own Id, you might want to verify this.  In general I would never recommend using IDENTITY as it does not support preallocation.</p>\n\n<p>There are a few issues with allowing IDENTITY to provide the id or not.  One is that two different insert SQL will need to be generated depending on the id value, as for IDENTITY the id cannot be in the insert at all.  You may wish to log a bug to have IDENTITY support user provided ids.</p>\n\n<p>You should still be able to get it working with your own Sequence subclass, or possibly MySQLPlatform subclass.  You would set your MySQLPlatform subclass using the \"eclipselink.target-database\" persistence unit property.</p>\n"},{"tags":[],"owner":{"account_id":1014607,"reputation":4573,"user_id":1026453,"accept_rate":83,"display_name":"DuncanKinnear"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1346900745,"creation_date":1346900745,"answer_id":12292429,"question_id":12002260,"body_markdown":"I might be missing something obvious, but why not just define another Entity with the same `@Table(name=&quot;.....&quot;)` annotation, with the same fields, but make the id not generated? Then you can use that Entity for the code that copies data from the old DB to the new, and the one with the generated Id can be used for normal creates that require id generation.\r\n\r\nI can&#39;t tell you if it works with EclipseLink, but we&#39;re using Hibernate here and it doesn&#39;t seem to mind it.","title":"Manually specify the value of a primary key in JPA @GeneratedValue column","body":"<p>I might be missing something obvious, but why not just define another Entity with the same <code>@Table(name=\".....\")</code> annotation, with the same fields, but make the id not generated? Then you can use that Entity for the code that copies data from the old DB to the new, and the one with the generated Id can be used for normal creates that require id generation.</p>\n\n<p>I can't tell you if it works with EclipseLink, but we're using Hibernate here and it doesn't seem to mind it.</p>\n"},{"tags":[],"owner":{"account_id":336748,"reputation":22028,"user_id":664577,"accept_rate":98,"display_name":"Anthony Accioly"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1486635842,"creation_date":1346961685,"answer_id":12307512,"question_id":12002260,"body_markdown":"Database-centric solution to your problem:\r\n\r\n 1. Create an auxiliary, nullable column in your table. It will hold your manually assigned ids:\r\n\r\n        CREATE TABLE `test_table`\r\n        (\r\n          `id` bigint(20) NOT NULL AUTO_INCREMENT,\r\n          `manual_id` bigint(20) NULL,\r\n          `some_other_field` varchar(200) NOT NULL,\r\n          PRIMARY KEY(id)\r\n        );\r\n\r\n 2. Map this column to a normal field in your Entity:\r\n\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n        @Column(name=&quot;manual_id&quot;)\r\n        private Integer manualId;\r\n \r\n 3. Create a trigger that sets the table id to the manual assigned id if it is not null:\r\n\r\n        DELIMITER //\r\n        CREATE TRIGGER `test_table_bi` BEFORE INSERT ON `test_table`\r\n          FOR EACH ROW \r\n          BEGIN\r\n            IF NEW.`manual_id` IS NOT NULL THEN \r\n        \t  SET NEW.`id` = NEW.`manual_id`;\r\n            END IF;\r\n        END;//\r\n        DELIMITER;    \r\n\r\n 4. Always use the `manualId` when you need to assign a custom id. The trigger will do the magic for you:\r\n    \r\n        testEntiy.setManualId(300);\r\n        entityManager.persist(testEntity);\r\n\r\n 5. After the database import phase, simple remove the trigger, the auxiliary column and it&#39;s mapping.\r\n\r\n        DROP TRIGGER `test_table_bi`;\r\n        ALTER TABLE `test_table` DROP COLUMN `manual_id`;\r\n\r\n\r\n----------\r\n\r\n**Warning**\r\n\r\nIf you manually specify an id greater than the current `AUTO_INCREMENT` value, the next generated `id` will jump to the value of the manually assigned id plus 1, e.g.: \r\n\r\n    INSERT INTO `test_table` (manual_id, some_other_field) VALUES (50, &#39;Something&#39;);\r\n    INSERT INTO `test_table` (manual_id, some_other_field) VALUES (NULL, &#39;Something else&#39;);\r\n    INSERT INTO `test_table` (manual_id, some_other_field) VALUES (90, &#39;Something 2&#39;);\r\n    INSERT INTO `test_table` (manual_id, some_other_field) VALUES (NULL, &#39;Something else 2&#39;);\r\n    INSERT INTO `test_table` (manual_id, some_other_field) VALUES (40, &#39;Something 3&#39;);\r\n    INSERT INTO `test_table` (manual_id, some_other_field) VALUES (NULL, &#39;Something else 3&#39;);\r\n\r\nWill wield the results:\r\n\r\n    +----+-----------+------------------+\r\n    | id | manual_id | some_other_field |\r\n    +----+-----------+------------------+\r\n    | 50 |        50 | Something        |\r\n    | 51 |      NULL | Something else   |\r\n    | 90 |        90 | Something 2      |\r\n    | 91 |      NULL | Something else 2 |\r\n    | 40 |        40 | Something 3      |\r\n    | 92 |      NULL | Something else 3 |\r\n    +----+-----------+------------------+\r\n\r\nTo avoid problems it is highly recommended to set the `AUTO_INCREMENT` column to start with a number greater than all of the existing ids in your previous database, e.g.: \r\n\r\n    ALTER TABLE `test_table` AUTO_INCREMENT = 100000;\r\n ","title":"Manually specify the value of a primary key in JPA @GeneratedValue column","body":"<p>Database-centric solution to your problem:</p>\n\n<ol>\n<li><p>Create an auxiliary, nullable column in your table. It will hold your manually assigned ids:</p>\n\n<pre><code>CREATE TABLE `test_table`\n(\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\n  `manual_id` bigint(20) NULL,\n  `some_other_field` varchar(200) NOT NULL,\n  PRIMARY KEY(id)\n);\n</code></pre></li>\n<li><p>Map this column to a normal field in your Entity:</p>\n\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\n@Column(name=\"manual_id\")\nprivate Integer manualId;\n</code></pre></li>\n<li><p>Create a trigger that sets the table id to the manual assigned id if it is not null:</p>\n\n<pre><code>DELIMITER //\nCREATE TRIGGER `test_table_bi` BEFORE INSERT ON `test_table`\n  FOR EACH ROW \n  BEGIN\n    IF NEW.`manual_id` IS NOT NULL THEN \n      SET NEW.`id` = NEW.`manual_id`;\n    END IF;\nEND;//\nDELIMITER;    \n</code></pre></li>\n<li><p>Always use the <code>manualId</code> when you need to assign a custom id. The trigger will do the magic for you:</p>\n\n<pre><code>testEntiy.setManualId(300);\nentityManager.persist(testEntity);\n</code></pre></li>\n<li><p>After the database import phase, simple remove the trigger, the auxiliary column and it's mapping.</p>\n\n<pre><code>DROP TRIGGER `test_table_bi`;\nALTER TABLE `test_table` DROP COLUMN `manual_id`;\n</code></pre></li>\n</ol>\n\n<hr>\n\n<p><strong>Warning</strong></p>\n\n<p>If you manually specify an id greater than the current <code>AUTO_INCREMENT</code> value, the next generated <code>id</code> will jump to the value of the manually assigned id plus 1, e.g.: </p>\n\n<pre><code>INSERT INTO `test_table` (manual_id, some_other_field) VALUES (50, 'Something');\nINSERT INTO `test_table` (manual_id, some_other_field) VALUES (NULL, 'Something else');\nINSERT INTO `test_table` (manual_id, some_other_field) VALUES (90, 'Something 2');\nINSERT INTO `test_table` (manual_id, some_other_field) VALUES (NULL, 'Something else 2');\nINSERT INTO `test_table` (manual_id, some_other_field) VALUES (40, 'Something 3');\nINSERT INTO `test_table` (manual_id, some_other_field) VALUES (NULL, 'Something else 3');\n</code></pre>\n\n<p>Will wield the results:</p>\n\n<pre><code>+----+-----------+------------------+\n| id | manual_id | some_other_field |\n+----+-----------+------------------+\n| 50 |        50 | Something        |\n| 51 |      NULL | Something else   |\n| 90 |        90 | Something 2      |\n| 91 |      NULL | Something else 2 |\n| 40 |        40 | Something 3      |\n| 92 |      NULL | Something else 3 |\n+----+-----------+------------------+\n</code></pre>\n\n<p>To avoid problems it is highly recommended to set the <code>AUTO_INCREMENT</code> column to start with a number greater than all of the existing ids in your previous database, e.g.: </p>\n\n<pre><code>ALTER TABLE `test_table` AUTO_INCREMENT = 100000;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1738665,"reputation":189,"user_id":1590666,"display_name":"poison"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1347117274,"creation_date":1347024327,"answer_id":12319026,"question_id":12002260,"body_markdown":"This works with eclipselink. It will create a seperate table for the sequence, but that shouldn&#39;t pose a problem.\r\n\r\n    @Id\r\n    @GeneratedValue(strategy=GenerationType.AUTO)\r\n    @Column(name=&quot;id&quot;, insertable=true, updatable=true, unique=true, nullable=false)\r\n    private Long id;\r\n\r\nGenerationType.AUTO will choose the ideal generation strategy. Since the field is specified as  insertable and updateable, a TABLE generation strategy will be used. This means eclipselink will generate another table holding the current sequence value and generate the sequence itself instead of delegating it to the database. Since the column is declared insertable, if id is null when persisting, eclipselink will generate the id. Otherwise the existing id will be used.","title":"Manually specify the value of a primary key in JPA @GeneratedValue column","body":"<p>This works with eclipselink. It will create a seperate table for the sequence, but that shouldn't pose a problem.</p>\n\n<pre><code>@Id\n@GeneratedValue(strategy=GenerationType.AUTO)\n@Column(name=\"id\", insertable=true, updatable=true, unique=true, nullable=false)\nprivate Long id;\n</code></pre>\n\n<p>GenerationType.AUTO will choose the ideal generation strategy. Since the field is specified as  insertable and updateable, a TABLE generation strategy will be used. This means eclipselink will generate another table holding the current sequence value and generate the sequence itself instead of delegating it to the database. Since the column is declared insertable, if id is null when persisting, eclipselink will generate the id. Otherwise the existing id will be used.</p>\n"},{"tags":[],"owner":{"account_id":1512641,"reputation":305,"user_id":1414351,"display_name":"szarza"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1371136000,"creation_date":1371136000,"answer_id":17090561,"question_id":12002260,"body_markdown":"Using **GenerationType.SEQUENCE** with PostgreSQL and EclipseLink worked for me.\r\n\r\n1) Change\r\n \r\n\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY) \r\n\r\n   by \r\n \r\n\r\n    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator=&quot;step_id_seq&quot;)\r\n    @SequenceGenerator(name=&quot;step_id_seq&quot;, sequenceName=&quot;step_id_seq&quot;)\r\n\r\nNow, you can call sequence using NativeQuery:\r\n\r\n    return ((Vector&lt;Integer&gt;) em.createNativeQuery(&quot;select nextval(&#39;step_id_seq&#39;)::int&quot;).getSingleResult()).get(0);\r\n\r\nand set the returned Id to your Entity before call EntityManager.persist() method.\r\n\r\nHope it&#39;s not too late!","title":"Manually specify the value of a primary key in JPA @GeneratedValue column","body":"<p>Using <strong>GenerationType.SEQUENCE</strong> with PostgreSQL and EclipseLink worked for me.</p>\n\n<p>1) Change</p>\n\n<pre><code>@GeneratedValue(strategy = GenerationType.IDENTITY) \n</code></pre>\n\n<p>by </p>\n\n<pre><code>@GeneratedValue(strategy=GenerationType.SEQUENCE, generator=\"step_id_seq\")\n@SequenceGenerator(name=\"step_id_seq\", sequenceName=\"step_id_seq\")\n</code></pre>\n\n<p>Now, you can call sequence using NativeQuery:</p>\n\n<pre><code>return ((Vector&lt;Integer&gt;) em.createNativeQuery(\"select nextval('step_id_seq')::int\").getSingleResult()).get(0);\n</code></pre>\n\n<p>and set the returned Id to your Entity before call EntityManager.persist() method.</p>\n\n<p>Hope it's not too late!</p>\n"},{"tags":[],"owner":{"account_id":11070566,"reputation":685,"user_id":8128825,"display_name":"Barrrettt"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1645698108,"creation_date":1645698108,"answer_id":71250440,"question_id":12002260,"body_markdown":"My way (MySql) is deactivate GeneratedValue:\r\n\r\n    @Id\r\n    //@GeneratedValue\r\n    @Column(unique = true, nullable = false, columnDefinition =&quot;BINARY(16)&quot;)\r\n    private UUID id;\r\n\r\nAnd add in Entity:\r\n\r\n    @PrePersist\r\n    protected void onCreation() {\r\n        if (id == null) setId(UUID.randomUUID());\r\n    }\r\n\r\nNow in my code I can do (on service for example):\r\n    \r\n    String clientID = env.getParam(&quot;id&quot;);\r\n    Entity entity = entityRepository.findFirstById(UUID.fromString(clientID));\r\n    //is new?\r\n    if (entity==null){\r\n      entity = new Entity();\r\n      entity.setId(UUID.fromString(clientID));//set cumstom ID here\r\n    }\r\n\r\n    Entity entityNew = entityRepository.save(entity); //insert\r\n    if (entityNew.getId().equals(entity.getId()) ){\r\n      Log.i(&quot;OK!&quot;)\r\n    }\r\n\r\n&#128076;\r\n","title":"Manually specify the value of a primary key in JPA @GeneratedValue column","body":"<p>My way (MySql) is deactivate GeneratedValue:</p>\n<pre><code>@Id\n//@GeneratedValue\n@Column(unique = true, nullable = false, columnDefinition =&quot;BINARY(16)&quot;)\nprivate UUID id;\n</code></pre>\n<p>And add in Entity:</p>\n<pre><code>@PrePersist\nprotected void onCreation() {\n    if (id == null) setId(UUID.randomUUID());\n}\n</code></pre>\n<p>Now in my code I can do (on service for example):</p>\n<pre><code>String clientID = env.getParam(&quot;id&quot;);\nEntity entity = entityRepository.findFirstById(UUID.fromString(clientID));\n//is new?\nif (entity==null){\n  entity = new Entity();\n  entity.setId(UUID.fromString(clientID));//set cumstom ID here\n}\n\nEntity entityNew = entityRepository.save(entity); //insert\nif (entityNew.getId().equals(entity.getId()) ){\n  Log.i(&quot;OK!&quot;)\n}\n</code></pre>\n<p>👌</p>\n"},{"tags":[],"owner":{"account_id":15207672,"reputation":1864,"user_id":10973514,"display_name":"pref"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1692853061,"creation_date":1692853061,"answer_id":76966318,"question_id":12002260,"body_markdown":"In my case, \r\n\r\nI commented out **@GeneratedValue** annotation line from the @Id field of my Entity\r\n\r\nand that let me to set the primary key in the object that I&#39;m persisting","title":"Manually specify the value of a primary key in JPA @GeneratedValue column","body":"<p>In my case,</p>\n<p>I commented out <strong>@GeneratedValue</strong> annotation line from the @Id field of my Entity</p>\n<p>and that let me to set the primary key in the object that I'm persisting</p>\n"}],"owner":{"account_id":216313,"reputation":12017,"user_id":471478,"accept_rate":86,"display_name":"scravy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60549,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"answer_count":8,"score":35,"last_activity_date":1692853061,"creation_date":1345191707,"question_id":12002260,"body_markdown":"I&#39;m having an Entity which has a primary key / id field like the following:\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\nThis works well. I&#39;m using EclipseLink to create the DDL-Schema, and the column is correctly created like so:\r\n\r\n    `id` bigint(20) NOT NULL AUTO_INCREMENT\r\n\r\nHowever, I&#39;ve got several entities for which I do want to specify the PK myself (it&#39;s a little application that transfers data from an old database to the new one we&#39;re building). If I specify the ID for the POJO (using `setId(Long id)`) and persist it, EclipseLink *does not* save it (i.e. the record is saved, but the id is auto generated by eclipseLink).\r\n\r\n__Is there a way to manually specify the value of a column which has a @GeneratedValue ?__\r\n\r\nHere some thoughts on the issue:\r\n\r\nI tried to work around the problem by not using @GeneratedValue at all, but simply manually define the column to be AUTO_INCREMENTed. However this forces me to manually provide an IDs *always*, since EclipseLink validates the primary key (so it may not be null, zero, or a negative number). The exception message reads that I should specify eclipselink.id_validation, however this does not seem to make any difference (I annotated `@PrimaryKey(validation = IdValidation.NONE)` but still got the same message).\r\n\r\n__To clarify:__ I&#39;m using EclipseLink (2.4.0) as persistence provider and I can&#39;t switch away from it (large portions of the project depend on eclipselink specific query hints, annotations, and classes).\r\n\r\n----------\r\n\r\nEDIT (In Response to the answers):\r\n\r\n__Custom Sequencing:__ I tried to implement my own sequencing. I tried subclassing DefaultSequence, but EclipseLink will tell me `Internal Exception: org.eclipse.persistence.platform.database.MySQLPlatform could not be found`. But I&#39;ve checked: The class is on the classpath.\r\n\r\nSo I subclassed another class, NativeSequence:\r\n\r\n\tpublic class MyNativeSequence extends NativeSequence {\r\n\t\r\n\t\tpublic MyNativeSequence() {\r\n\t\t\tsuper();\r\n\t\t}\r\n\t\r\n\t\tpublic MyNativeSequence(final String name) {\r\n\t\t\tsuper(name);\r\n\t\t}\r\n\t\r\n\t\r\n\t\t@Override\r\n\t\tpublic boolean shouldAlwaysOverrideExistingValue() {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic boolean shouldAlwaysOverrideExistingValue(final String seqName) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\r\n\t}\r\n\r\nHowever, what I get is the following:\r\n\r\n\t\r\n\tjavax.persistence.RollbackException: Exception [EclipseLink-7197] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.ValidationException\r\n\tException Description: Null or zero primary key encountered in unit of work clone [de.dfv.datenbank.domain.Mitarbeiter[ id=null ]], primary key [null]. Set descriptors IdValidation or the &quot;eclipselink.id-validation&quot; property.\r\n\t\tat org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:102)\r\n\t\t...\r\n\tCaused by: Exception [EclipseLink-7197] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.ValidationException\r\n\tException Description: Null or zero primary key encountered in unit of work clone [de.dfv.datenbank.domain.Mitarbeiter[ id=null ]], primary key [null]. Set descriptors IdValidation or the &quot;eclipselink.id-validation&quot; property.\r\n\t\tat org.eclipse.persistence.exceptions.ValidationException.nullPrimaryKeyInUnitOfWorkClone(ValidationException.java:1451)\r\n\t\t...\r\n\r\n(stack trace shortened for clarity). This is the same message which I got before. Shouldn&#39;t I subclass NativeSequence? If so, I don&#39;t know what to implement for the abstract methods in Sequence or StandardSequence.\r\n\r\nIt may also be worth noting, that simply subclassing (without overriding any methods) the class works as expected. However, returing false in `shouldAlwaysOverrideExistingValue(...)` will not generate a single value at all (I stepped through the program and `getGeneratedValue()` is not called once).\r\n\r\nAlso, when I insert like 8 entities of a certain kind within a transaction it resulted in 11 records in the database (what the hell?!).\r\n\r\n**EDIT (2012-09-01):** I still do not have a Solution for the problem, Implementing my own sequence did not solve it. What I need is a way to be able to not set an Id explicitly (so it will be auto generated) and to be able to set an Id explicitly (so it will be used for the creation of the record in the database).\r\n\r\nI tried to define the column as auto_increment myself and ommit @GeneratedValue, however Validation will kick in and not allow me to save such an entity. If I specify a value != 0 and != zero, mysql will complain for a duplicate primary key.\r\n\r\nI&#39;m running out of ideas and options to try. Any? (starting a bounty)","title":"Manually specify the value of a primary key in JPA @GeneratedValue column","body":"<p>I'm having an Entity which has a primary key / id field like the following:</p>\n\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\n</code></pre>\n\n<p>This works well. I'm using EclipseLink to create the DDL-Schema, and the column is correctly created like so:</p>\n\n<pre><code>`id` bigint(20) NOT NULL AUTO_INCREMENT\n</code></pre>\n\n<p>However, I've got several entities for which I do want to specify the PK myself (it's a little application that transfers data from an old database to the new one we're building). If I specify the ID for the POJO (using <code>setId(Long id)</code>) and persist it, EclipseLink <em>does not</em> save it (i.e. the record is saved, but the id is auto generated by eclipseLink).</p>\n\n<p><strong>Is there a way to manually specify the value of a column which has a @GeneratedValue ?</strong></p>\n\n<p>Here some thoughts on the issue:</p>\n\n<p>I tried to work around the problem by not using @GeneratedValue at all, but simply manually define the column to be AUTO_INCREMENTed. However this forces me to manually provide an IDs <em>always</em>, since EclipseLink validates the primary key (so it may not be null, zero, or a negative number). The exception message reads that I should specify eclipselink.id_validation, however this does not seem to make any difference (I annotated <code>@PrimaryKey(validation = IdValidation.NONE)</code> but still got the same message).</p>\n\n<p><strong>To clarify:</strong> I'm using EclipseLink (2.4.0) as persistence provider and I can't switch away from it (large portions of the project depend on eclipselink specific query hints, annotations, and classes).</p>\n\n<hr>\n\n<p>EDIT (In Response to the answers):</p>\n\n<p><strong>Custom Sequencing:</strong> I tried to implement my own sequencing. I tried subclassing DefaultSequence, but EclipseLink will tell me <code>Internal Exception: org.eclipse.persistence.platform.database.MySQLPlatform could not be found</code>. But I've checked: The class is on the classpath.</p>\n\n<p>So I subclassed another class, NativeSequence:</p>\n\n<pre><code>public class MyNativeSequence extends NativeSequence {\n\n    public MyNativeSequence() {\n        super();\n    }\n\n    public MyNativeSequence(final String name) {\n        super(name);\n    }\n\n\n    @Override\n    public boolean shouldAlwaysOverrideExistingValue() {\n        return false;\n    }\n\n    @Override\n    public boolean shouldAlwaysOverrideExistingValue(final String seqName) {\n        return false;\n    }\n\n}\n</code></pre>\n\n<p>However, what I get is the following:</p>\n\n<pre><code>javax.persistence.RollbackException: Exception [EclipseLink-7197] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.ValidationException\nException Description: Null or zero primary key encountered in unit of work clone [de.dfv.datenbank.domain.Mitarbeiter[ id=null ]], primary key [null]. Set descriptors IdValidation or the \"eclipselink.id-validation\" property.\n    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:102)\n    ...\nCaused by: Exception [EclipseLink-7197] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.ValidationException\nException Description: Null or zero primary key encountered in unit of work clone [de.dfv.datenbank.domain.Mitarbeiter[ id=null ]], primary key [null]. Set descriptors IdValidation or the \"eclipselink.id-validation\" property.\n    at org.eclipse.persistence.exceptions.ValidationException.nullPrimaryKeyInUnitOfWorkClone(ValidationException.java:1451)\n    ...\n</code></pre>\n\n<p>(stack trace shortened for clarity). This is the same message which I got before. Shouldn't I subclass NativeSequence? If so, I don't know what to implement for the abstract methods in Sequence or StandardSequence.</p>\n\n<p>It may also be worth noting, that simply subclassing (without overriding any methods) the class works as expected. However, returing false in <code>shouldAlwaysOverrideExistingValue(...)</code> will not generate a single value at all (I stepped through the program and <code>getGeneratedValue()</code> is not called once).</p>\n\n<p>Also, when I insert like 8 entities of a certain kind within a transaction it resulted in 11 records in the database (what the hell?!).</p>\n\n<p><strong>EDIT (2012-09-01):</strong> I still do not have a Solution for the problem, Implementing my own sequence did not solve it. What I need is a way to be able to not set an Id explicitly (so it will be auto generated) and to be able to set an Id explicitly (so it will be used for the creation of the record in the database).</p>\n\n<p>I tried to define the column as auto_increment myself and ommit @GeneratedValue, however Validation will kick in and not allow me to save such an entity. If I specify a value != 0 and != zero, mysql will complain for a duplicate primary key.</p>\n\n<p>I'm running out of ideas and options to try. Any? (starting a bounty)</p>\n"},{"tags":["java","spring","websocket","jms","broker"],"owner":{"account_id":21136269,"reputation":45,"user_id":15539664,"display_name":"theoutstandingme"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692851361,"creation_date":1692849041,"question_id":76966115,"body_markdown":"I am creating a messenger. Android client is written in java and backend is also written in Java with Spring. \r\nThe client uses okhttp and retrofit.\r\nThe spring app uses boot, mvc, websocket, jms and broker.\r\nI know how to deal with boot and mvc well.\r\nBut I am just attempting to dive into jms and other stuff.\r\nI&#39;ve been struggling with those things for a while.\r\nMy context-path is &quot;gleamy&quot;. It&#39;s my app&#39;s name.\r\nEverything related to generally boot app and controllers is fine. DAOs work correctly.\r\nBut there&#39;re some issues with websocket and broker configs. I consider them troubles with paths, but I&#39;m just learning jms and sockets and don&#39;t know exactly.\r\nWhat it should be:\r\n1. Android client establishes connection with spring.\r\n2. client sends a request to the controller.\r\n3. it should be sent to another client that is in the same chat. I am attempting to send the same msg to all participants.\r\n4. client processes the msg\r\n\r\nPlease, give me a hand to deal with them.\r\n``` java\r\n@Configuration\r\n@EnableWebSocketMessageBroker\r\npublic class JmsConfig implements WebSocketMessageBrokerConfigurer{\r\n@Override\r\n\tpublic void configureMessageBroker(MessageBrokerRegistry registry)\r\n\t{\r\n\t\tregistry.setApplicationDestinationPrefixes(&quot;/gleamy&quot;);\r\n\t\tregistry.enableSimpleBroker(&quot;topic&quot;, &quot;queue&quot;);\r\n\t}\r\n\t@Override\r\n\tpublic void registerStompEndpoints(StompEndpointRegistry registry)\r\n\t{\r\n\t\tregistry.addEndpoint(&quot;/websocket&quot;);\r\n\t}\r\n\t@Override \r\n\tpublic void configureClientInboundChannel(ChannelRegistration registration)\r\n\t{\r\n\t\tregistration.interceptors(new WebSocketInterceptor());\r\n\t}\r\n\t\r\n}\r\n``` \r\n``` java\r\n@Configuration\r\n@EnableWebSocket\r\npublic class WebSocketConfig implements WebSocketConfigurer\r\n{\r\n\tprivate static final Logger logger = LoggerFactory.getLogger(WebSocketConfig.class);\r\n\t@Override\r\n\tpublic void registerWebSocketHandlers(WebSocketHandlerRegistry registry)\r\n\t{\r\n\t\tregistry.addHandler(appWebSocketHandler(), &quot;/websocket&quot;).setAllowedOrigins(&quot;*&quot;);\r\n\t}\r\n\t@Bean\r\n\tpublic WebSocketHandler appWebSocketHandler()\r\n\t{\r\n\t\treturn new TextWebSocketHandler(){\r\n\t\t\t@Override \r\n\t\t\tprotected void handleTextMessage(WebSocketSession session, TextMessage msg)\r\n\t\t\t{\r\n\t\t\t\tlogger.info(msg.toString());\r\n\t\t\t\ttry{\r\n\t\t\t\t\tsession.sendMessage(msg);\r\n\t\t\t\t}\r\n\t\t\t\tcatch(Exception ex)\r\n\t\t\t\t{\r\n\t\t\t\t\tex.printStackTrace(System.err);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n}\r\n\r\n```\r\n``` java\r\n@Service\r\n@Getter @Setter\r\npublic class MessageService {\r\n\t \r\n\tprivate final ApplicationContext appContext;\r\n\tprivate final JmsTemplate jmsTpl;\r\n\tprivate final SimpMessagingTemplate simpJms;\r\n\tprivate final Map&lt;String, AbstractDAO&gt; daos;\r\n\r\n\t@Autowired\r\n\tpublic MessageService(ApplicationContext appContext, JmsTemplate jmsTpl, SimpMessagingTemplate simpJms)\r\n\t{\r\n\t\tthis.appContext = appContext;\r\n\t\tthis.jmsTpl = jmsTpl;\r\n\t\tthis.simpJms = simpJms;\r\n\t\tdaos = new HashMap&lt;&gt;();\r\n\t\taddDAO(&quot;chatDAO&quot;,appContext.getBean(&quot;chatDAO&quot;, ChatDAO.class));\r\n\t}\r\n\t\r\n\tpublic void addDAO(String name, AbstractDAO dao)\r\n\t{\r\n\t\tdaos.put(name, dao);\r\n\t}\r\n\r\n\tpublic void notifyChatMembers(MsgInfo msg) {\r\n\t\tChatDAO chatDAO = (ChatDAO)daos.get(&quot;chatDAO&quot;);\r\n\t\tfor (Long userid : chatDAO.getUserIdsFromChat(msg.getChatid()))\r\n\t\t{\r\n\t\t\tsimpJms.convertAndSend(&quot;/topic/users/&quot; + userid, msg);\r\n\t\t}\r\n\t\t\t\r\n\t}\r\n}\r\n```\r\n``` java\r\n@RestController\r\n@RequestMapping(&quot;/messages&quot;)\r\npublic class MessageController {\r\n    private final MessageDAO msgDAO;\r\n\tprivate final MessageService msgService;\r\n    \r\n    public MessageController(MessageDAO msgDAO, MessageService msgService)\r\n    {\r\n        this.msgDAO  = msgDAO;\r\n\t\tthis.msgService = msgService;\r\n    }\r\n    @PostMapping(&quot;/add&quot;)\r\n    @ResponseBody\r\n    public Map&lt;String, Long&gt; addMessage(@RequestBody MsgInfo msg)\r\n    {\r\n\t\tMap&lt;String, Long&gt; response = new HashMap&lt;&gt;();\r\n\t\tlong msgid = msgDAO.add(msg);\r\n\t\tresponse.put(&quot;msgid&quot;, msgid);\r\n\t\tmsgService.notifyChatMembers(msg);\r\n        return response;\r\n    }\r\n}\r\n```","title":"Client doesn&#39;t receive message from topic","body":"<p>I am creating a messenger. Android client is written in java and backend is also written in Java with Spring.\nThe client uses okhttp and retrofit.\nThe spring app uses boot, mvc, websocket, jms and broker.\nI know how to deal with boot and mvc well.\nBut I am just attempting to dive into jms and other stuff.\nI've been struggling with those things for a while.\nMy context-path is &quot;gleamy&quot;. It's my app's name.\nEverything related to generally boot app and controllers is fine. DAOs work correctly.\nBut there're some issues with websocket and broker configs. I consider them troubles with paths, but I'm just learning jms and sockets and don't know exactly.\nWhat it should be:</p>\n<ol>\n<li>Android client establishes connection with spring.</li>\n<li>client sends a request to the controller.</li>\n<li>it should be sent to another client that is in the same chat. I am attempting to send the same msg to all participants.</li>\n<li>client processes the msg</li>\n</ol>\n<p>Please, give me a hand to deal with them.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class JmsConfig implements WebSocketMessageBrokerConfigurer{\n@Override\n    public void configureMessageBroker(MessageBrokerRegistry registry)\n    {\n        registry.setApplicationDestinationPrefixes(&quot;/gleamy&quot;);\n        registry.enableSimpleBroker(&quot;topic&quot;, &quot;queue&quot;);\n    }\n    @Override\n    public void registerStompEndpoints(StompEndpointRegistry registry)\n    {\n        registry.addEndpoint(&quot;/websocket&quot;);\n    }\n    @Override \n    public void configureClientInboundChannel(ChannelRegistration registration)\n    {\n        registration.interceptors(new WebSocketInterceptor());\n    }\n    \n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSocket\npublic class WebSocketConfig implements WebSocketConfigurer\n{\n    private static final Logger logger = LoggerFactory.getLogger(WebSocketConfig.class);\n    @Override\n    public void registerWebSocketHandlers(WebSocketHandlerRegistry registry)\n    {\n        registry.addHandler(appWebSocketHandler(), &quot;/websocket&quot;).setAllowedOrigins(&quot;*&quot;);\n    }\n    @Bean\n    public WebSocketHandler appWebSocketHandler()\n    {\n        return new TextWebSocketHandler(){\n            @Override \n            protected void handleTextMessage(WebSocketSession session, TextMessage msg)\n            {\n                logger.info(msg.toString());\n                try{\n                    session.sendMessage(msg);\n                }\n                catch(Exception ex)\n                {\n                    ex.printStackTrace(System.err);\n                }\n            }\n        };\n    }\n}\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@Getter @Setter\npublic class MessageService {\n     \n    private final ApplicationContext appContext;\n    private final JmsTemplate jmsTpl;\n    private final SimpMessagingTemplate simpJms;\n    private final Map&lt;String, AbstractDAO&gt; daos;\n\n    @Autowired\n    public MessageService(ApplicationContext appContext, JmsTemplate jmsTpl, SimpMessagingTemplate simpJms)\n    {\n        this.appContext = appContext;\n        this.jmsTpl = jmsTpl;\n        this.simpJms = simpJms;\n        daos = new HashMap&lt;&gt;();\n        addDAO(&quot;chatDAO&quot;,appContext.getBean(&quot;chatDAO&quot;, ChatDAO.class));\n    }\n    \n    public void addDAO(String name, AbstractDAO dao)\n    {\n        daos.put(name, dao);\n    }\n\n    public void notifyChatMembers(MsgInfo msg) {\n        ChatDAO chatDAO = (ChatDAO)daos.get(&quot;chatDAO&quot;);\n        for (Long userid : chatDAO.getUserIdsFromChat(msg.getChatid()))\n        {\n            simpJms.convertAndSend(&quot;/topic/users/&quot; + userid, msg);\n        }\n            \n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(&quot;/messages&quot;)\npublic class MessageController {\n    private final MessageDAO msgDAO;\n    private final MessageService msgService;\n    \n    public MessageController(MessageDAO msgDAO, MessageService msgService)\n    {\n        this.msgDAO  = msgDAO;\n        this.msgService = msgService;\n    }\n    @PostMapping(&quot;/add&quot;)\n    @ResponseBody\n    public Map&lt;String, Long&gt; addMessage(@RequestBody MsgInfo msg)\n    {\n        Map&lt;String, Long&gt; response = new HashMap&lt;&gt;();\n        long msgid = msgDAO.add(msg);\n        response.put(&quot;msgid&quot;, msgid);\n        msgService.notifyChatMembers(msg);\n        return response;\n    }\n}\n</code></pre>\n"},{"tags":["java","quartz-scheduler","cronexpression"],"answers":[{"tags":[],"owner":{"account_id":7505413,"reputation":5686,"user_id":5702105,"display_name":"Ian Mc"},"down_vote_count":0,"up_vote_count":34,"is_accepted":true,"score":34,"last_activity_date":1623136235,"creation_date":1454631750,"answer_id":35214234,"question_id":35214149,"body_markdown":"The first element represents the seconds; to run at second 0 and 30 use the following:\r\n\r\n```\r\n&lt;cron-expression&gt;0/30 0/1 * 1/1 * ? *&lt;/cron-expression&gt;\r\n```","title":"cron expression for every 30 seconds in quartz scheduler?","body":"<p>The first element represents the seconds; to run at second 0 and 30 use the following:</p>\n<pre><code>&lt;cron-expression&gt;0/30 0/1 * 1/1 * ? *&lt;/cron-expression&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7162347,"reputation":75,"user_id":5472704,"accept_rate":20,"display_name":"Shailesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1505975771,"creation_date":1505975639,"answer_id":46336985,"question_id":35214149,"body_markdown":"If you are using Spring framework, make use of `@PostConstruct` annotation and then `@Scheduled(cron=0 0/15 * 1/1 * ?)` to trigger now, now+15min and so on.","title":"cron expression for every 30 seconds in quartz scheduler?","body":"<p>If you are using Spring framework, make use of <code>@PostConstruct</code> annotation and then <code>@Scheduled(cron=0 0/15 * 1/1 * ?)</code> to trigger now, now+15min and so on.</p>\n"},{"tags":[],"owner":{"account_id":2534969,"reputation":565,"user_id":3632455,"accept_rate":30,"display_name":"hariprasad"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1692851321,"creation_date":1537221042,"answer_id":52376143,"question_id":35214149,"body_markdown":"The same effect we can reach (Quartz Spring) using simpler construction:\r\n\r\n    0/30 * * * * ? *\r\n\r\nThe last asterisk we can omit.\r\n\r\n    0/30 * * * * ?\r\n\r\n[Quartz scheduler cron trigger documentation 2.x][1]\r\n\r\n\r\n  [1]: http://www.quartz-scheduler.org/documentation/quartz-2.x/tutorials/crontrigger.html","title":"cron expression for every 30 seconds in quartz scheduler?","body":"<p>The same effect we can reach (Quartz Spring) using simpler construction:</p>\n<pre><code>0/30 * * * * ? *\n</code></pre>\n<p>The last asterisk we can omit.</p>\n<pre><code>0/30 * * * * ?\n</code></pre>\n<p><a href=\"http://www.quartz-scheduler.org/documentation/quartz-2.x/tutorials/crontrigger.html\" rel=\"nofollow noreferrer\">Quartz scheduler cron trigger documentation 2.x</a></p>\n"},{"tags":[],"owner":{"account_id":1874652,"reputation":955,"user_id":1696115,"accept_rate":0,"display_name":"Jar Yit"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1566964523,"creation_date":1566964523,"answer_id":57684846,"question_id":35214149,"body_markdown":"I hope this answer will help you. Please define the cron expression the below \r\n\r\n     0/30 * * * * ? *\r\n\r\nAnd then you go this website and test [Cron Expression Generator &amp; Explainer - Quartz][1].\r\n\r\n\r\n  [1]: https://www.freeformatter.com/cron-expression-generator-quartz.html","title":"cron expression for every 30 seconds in quartz scheduler?","body":"<p>I hope this answer will help you. Please define the cron expression the below </p>\n\n<pre><code> 0/30 * * * * ? *\n</code></pre>\n\n<p>And then you go this website and test <a href=\"https://www.freeformatter.com/cron-expression-generator-quartz.html\" rel=\"noreferrer\">Cron Expression Generator &amp; Explainer - Quartz</a>.</p>\n"}],"owner":{"account_id":2207538,"reputation":4868,"user_id":1950349,"accept_rate":82,"display_name":"user1950349"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":126372,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"accepted_answer_id":35214234,"answer_count":4,"score":26,"last_activity_date":1692851321,"creation_date":1454631224,"question_id":35214149,"body_markdown":"I am using Quartz Scheduler to run my jobs. I want to run my job every thirty seconds. What will be my cron expression for that?\r\n\r\nFor every one minute, I am using below cron expression:\r\n\r\n\t&lt;cron-expression&gt;0 0/1 * 1/1 * ? *&lt;/cron-expression&gt;\r\n\t\r\nWhat it will be for every thirty seconds?","title":"cron expression for every 30 seconds in quartz scheduler?","body":"<p>I am using Quartz Scheduler to run my jobs. I want to run my job every thirty seconds. What will be my cron expression for that?</p>\n\n<p>For every one minute, I am using below cron expression:</p>\n\n<pre><code>&lt;cron-expression&gt;0 0/1 * 1/1 * ? *&lt;/cron-expression&gt;\n</code></pre>\n\n<p>What it will be for every thirty seconds?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9765,"page":227,"page_size":100}
