{"items":[{"tags":["java","eclipse","intellij-idea","compiler-errors","dependencies"],"answers":[{"comments":[{"owner":{"account_id":1728581,"reputation":2763,"user_id":1582712,"accept_rate":51,"display_name":"E.S."},"score":0,"creation_date":1452796505,"post_id":34784817,"comment_id":57337424,"body_markdown":"Awesome! And wow, I had no idea IntelliJ would do that exclude. I feel pretty strongly it should have given me some kind of warning/info message about this. Oh well... Once I learn IntellJ more, perhaps I&#39;ll be able to predict issues like this. Thanks","body":"Awesome! And wow, I had no idea IntelliJ would do that exclude. I feel pretty strongly it should have given me some kind of warning/info message about this. Oh well... Once I learn IntellJ more, perhaps I&#39;ll be able to predict issues like this. Thanks"},{"owner":{"account_id":2893635,"reputation":3813,"user_id":5060066,"display_name":"Ivaylo D. Ivanov"},"score":0,"creation_date":1452844479,"post_id":34784817,"comment_id":57355230,"body_markdown":":) You just need some time getting accustomed to it, and btw if you&#39;re an Eclipse user, you may find this migration guide (from IntelliJ official site) valuable: https://www.jetbrains.com/idea/help/eclipse.html","body":":) You just need some time getting accustomed to it, and btw if you&#39;re an Eclipse user, you may find this migration guide (from IntelliJ official site) valuable: <a href=\"https://www.jetbrains.com/idea/help/eclipse.html\" rel=\"nofollow noreferrer\">jetbrains.com/idea/help/eclipse.html</a>"}],"tags":[],"owner":{"account_id":2893635,"reputation":3813,"user_id":5060066,"display_name":"Ivaylo D. Ivanov"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1452760312,"creation_date":1452760312,"answer_id":34784817,"question_id":34778279,"body_markdown":"This is because BifCreatorController is excluded from compilation (see the small &quot;X&quot; top-left icon near to the file name). One reason would be the file got some errors while compiling, IDEA proposed to exclude it from compilation and you had accepted.\r\n\r\nGo to &quot;File &gt; Settings &gt; Build, Execution, Deployment &gt; Compiler &gt; Excludes&quot; and remove it from there.","title":"IntelliJ can&#39;t find classes in same package when compiling","body":"<p>This is because BifCreatorController is excluded from compilation (see the small \"X\" top-left icon near to the file name). One reason would be the file got some errors while compiling, IDEA proposed to exclude it from compilation and you had accepted.</p>\n\n<p>Go to \"File > Settings > Build, Execution, Deployment > Compiler > Excludes\" and remove it from there.</p>\n"},{"tags":[],"owner":{"account_id":1661378,"reputation":1660,"user_id":1529616,"accept_rate":46,"display_name":"velocity"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1571754755,"creation_date":1571754755,"answer_id":58506605,"question_id":34778279,"body_markdown":"I had the same problem, i cleared the cache and restarted but it did not solve the problem. Then i right clicked the not found class and selected Recompile and after recompilation the problem was solved.","title":"IntelliJ can&#39;t find classes in same package when compiling","body":"<p>I had the same problem, i cleared the cache and restarted but it did not solve the problem. Then i right clicked the not found class and selected Recompile and after recompilation the problem was solved.</p>\n"},{"comments":[{"owner":{"account_id":256891,"reputation":1432,"user_id":2398695,"accept_rate":83,"display_name":"Tom&#225;š Nesrovnal"},"score":0,"creation_date":1593758511,"post_id":60564326,"comment_id":110896056,"body_markdown":"Since it happens very rarely, this is a nice solution that worked perfectly for me.","body":"Since it happens very rarely, this is a nice solution that worked perfectly for me."},{"owner":{"account_id":4103729,"reputation":109,"user_id":3402233,"display_name":"Ganesh"},"score":1,"creation_date":1596241695,"post_id":60564326,"comment_id":111758854,"body_markdown":"So I was like how is this going to work. I went to the class just typed something random and then deleted the random text and it indexed the class???? I have no idea how or why. I literally did invalidate cache and restart which normally works but it did not work today. This worked and I&#39;m forever thankful to you.","body":"So I was like how is this going to work. I went to the class just typed something random and then deleted the random text and it indexed the class???? I have no idea how or why. I literally did invalidate cache and restart which normally works but it did not work today. This worked and I&#39;m forever thankful to you."},{"owner":{"account_id":9227009,"reputation":1342,"user_id":6854489,"accept_rate":100,"display_name":"takanuva15"},"score":2,"creation_date":1611611687,"post_id":60564326,"comment_id":116503555,"body_markdown":"Legendary. Just resolved an hour of head-pounding and frustration after 2 restarts with no success","body":"Legendary. Just resolved an hour of head-pounding and frustration after 2 restarts with no success"},{"owner":{"account_id":4852867,"reputation":881,"user_id":3914720,"display_name":"Preeti Joshi"},"score":1,"creation_date":1611817650,"post_id":60564326,"comment_id":116573307,"body_markdown":"Renaming the class and renaming again back to original one did the trick. Thanks!","body":"Renaming the class and renaming again back to original one did the trick. Thanks!"},{"owner":{"account_id":1660368,"reputation":121,"user_id":1528777,"display_name":"Martin Ivančič"},"score":0,"creation_date":1624884129,"post_id":60564326,"comment_id":120471149,"body_markdown":"Works with &quot;missing&quot; interfaces as well.","body":"Works with &quot;missing&quot; interfaces as well."}],"tags":[],"owner":{"account_id":1026639,"reputation":1007,"user_id":1035809,"display_name":"liuyong"},"comment_count":5,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1583498549,"creation_date":1583498549,"answer_id":60564326,"question_id":34778279,"body_markdown":"Got same problem today. Rebuilding or restarting both didn&#39;t work for me. In the end, I tried to rename the class, problem solved! Then I rename the class to the name I want, everthing was fine!","title":"IntelliJ can&#39;t find classes in same package when compiling","body":"<p>Got same problem today. Rebuilding or restarting both didn't work for me. In the end, I tried to rename the class, problem solved! Then I rename the class to the name I want, everthing was fine!</p>\n"},{"comments":[{"owner":{"account_id":183367,"reputation":873,"user_id":418693,"accept_rate":75,"display_name":"Arman"},"score":0,"creation_date":1620305606,"post_id":66922301,"comment_id":119165461,"body_markdown":"The screenshot suggests that this is not a maven project. Delegating to maven thus cannot be a solution.","body":"The screenshot suggests that this is not a maven project. Delegating to maven thus cannot be a solution."},{"owner":{"account_id":125029,"reputation":330,"user_id":682256,"display_name":"Simon Logic"},"score":0,"creation_date":1620850732,"post_id":66922301,"comment_id":119326841,"body_markdown":"in my case this is the ONLY silver bullet for intellij idea version i&#39;m allowed to install.","body":"in my case this is the ONLY silver bullet for intellij idea version i&#39;m allowed to install."},{"owner":{"account_id":425500,"reputation":793,"user_id":5822240,"display_name":"Filomat"},"score":0,"creation_date":1674082506,"post_id":66922301,"comment_id":132642112,"body_markdown":"only this method worked! Thanks","body":"only this method worked! Thanks"}],"tags":[],"owner":{"account_id":125029,"reputation":330,"user_id":682256,"display_name":"Simon Logic"},"comment_count":3,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1648848335,"creation_date":1617380716,"answer_id":66922301,"question_id":34778279,"body_markdown":"For those who can&#39;t beat the trouble i suggest switching to maven because it&#39;s predictive:\r\n\r\nMaven &gt; Runner &gt; Delegate IDE build/run actions to Maven","title":"IntelliJ can&#39;t find classes in same package when compiling","body":"<p>For those who can't beat the trouble i suggest switching to maven because it's predictive:</p>\n<p>Maven &gt; Runner &gt; Delegate IDE build/run actions to Maven</p>\n"},{"tags":[],"owner":{"account_id":10182669,"reputation":4457,"user_id":7518849,"display_name":"i.karayel"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649745566,"creation_date":1649745566,"answer_id":71838147,"question_id":34778279,"body_markdown":"Another reason is the cache problem. \r\n\r\nGo to -&gt; File -&gt; Invalidate Caches / Restart ...\r\n\r\n[![invalidate cache and restart][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8wW4G.png","title":"IntelliJ can&#39;t find classes in same package when compiling","body":"<p>Another reason is the cache problem.</p>\n<p>Go to -&gt; File -&gt; Invalidate Caches / Restart ...</p>\n<p><a href=\"https://i.stack.imgur.com/8wW4G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8wW4G.png\" alt=\"invalidate cache and restart\" /></a></p>\n"},{"tags":[],"owner":{"account_id":1591602,"reputation":3575,"user_id":1474815,"accept_rate":0,"display_name":"Paulo Pedroso"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691156438,"creation_date":1691156438,"answer_id":76836491,"question_id":34778279,"body_markdown":"Thanks to @liuyong for the tip. In my case it happened with A LOT of classes, so renaming all of them would have been a bit cumbersome.\r\n\r\nThen I decided to rename the base package (I just added a letter at the end), compiled the code and then renamed back to the original one.\r\n\r\nIt worked here too. The problem **didn&#39;t** happen again when switching branches.","title":"IntelliJ can&#39;t find classes in same package when compiling","body":"<p>Thanks to @liuyong for the tip. In my case it happened with A LOT of classes, so renaming all of them would have been a bit cumbersome.</p>\n<p>Then I decided to rename the base package (I just added a letter at the end), compiled the code and then renamed back to the original one.</p>\n<p>It worked here too. The problem <strong>didn't</strong> happen again when switching branches.</p>\n"}],"owner":{"account_id":1728581,"reputation":2763,"user_id":1582712,"accept_rate":51,"display_name":"E.S."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25472,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":34784817,"answer_count":6,"score":15,"last_activity_date":1691156438,"creation_date":1452724059,"question_id":34778279,"body_markdown":"As an extension to my previous question (https://stackoverflow.com/questions/34757159/intellij-cant-find-depencency-when-compiling-but-can-in-editor) which got solved, I now have a new issue which has sprung up.\r\n\r\nWithin the same packages, references to other classes are showing up with errors:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAs you can see in the picture, there is happening at the line involving the `BifCreatorController`, even though that class is in the same package as the `BifCreatorView`.\r\n\r\nJust like my previous question, I am failing to understand why IntellJ is spitting out those errors. This project works just fine in Eclipse, but I am looking to start moving away from eclipse. \r\n\r\n  [1]: http://i.stack.imgur.com/jlOT8.png","title":"IntelliJ can&#39;t find classes in same package when compiling","body":"<p>As an extension to my previous question (<a href=\"https://stackoverflow.com/questions/34757159/intellij-cant-find-depencency-when-compiling-but-can-in-editor\">IntelliJ can&#39;t find depencency when compiling, but can in editor.</a>) which got solved, I now have a new issue which has sprung up.</p>\n\n<p>Within the same packages, references to other classes are showing up with errors:</p>\n\n<p><a href=\"https://i.stack.imgur.com/jlOT8.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jlOT8.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see in the picture, there is happening at the line involving the <code>BifCreatorController</code>, even though that class is in the same package as the <code>BifCreatorView</code>.</p>\n\n<p>Just like my previous question, I am failing to understand why IntellJ is spitting out those errors. This project works just fine in Eclipse, but I am looking to start moving away from eclipse. </p>\n"},{"tags":["java","spring","spring-security"],"owner":{"account_id":14117331,"reputation":25,"user_id":10198796,"display_name":"Mitchell"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691155887,"creation_date":1691100868,"question_id":76831892,"body_markdown":"I am trying to implement Spring Security to my program and the instructions we were given had all information from deprecated classes that aren&#39;t used anymore so I am trying to figure out how to properly update my code. I currently go to my home page localhost:8080 click the login hyper link then I am redirected to localhost:8080/login. I enter the correct username and password but then am redirected back to localhost:8080 instead of localhost:8080/display/orders. \r\n\r\nIs there something wrong in my security class? Or is there not the correct redirecting happening in my controllers?\r\n\r\nHere is my security config\r\n```\tpublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n\t    http\r\n\t        .authorizeHttpRequests(requests -&gt; requests\r\n\t            .requestMatchers(&quot;/&quot;, &quot;/images/**&quot;, &quot;/service/**&quot;).permitAll()\r\n\t            .anyRequest().authenticated()\r\n\t        )\r\n\t        .formLogin(form -&gt; form\r\n\t            .loginPage(&quot;/login&quot;)\r\n\t            .usernameParameter(&quot;username&quot;)\r\n\t            .passwordParameter(&quot;password&quot;)\r\n\t            .permitAll()\r\n\t            .defaultSuccessUrl(&quot;/orders/display&quot;, true)\r\n\t            \r\n\t        )\r\n\t        .logout(logout -&gt; logout\r\n\t        \t.logoutUrl(&quot;/logout&quot;)\r\n\t        \t.invalidateHttpSession(true)\r\n\t        \t.clearAuthentication(true)\r\n\t        \t.logoutSuccessUrl(&quot;/&quot;)\r\n\t            .permitAll());\r\n\t    \r\n\t    return http.build();\r\n\t}\r\n\r\n    @Autowired\r\n    public void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n        auth.inMemoryAuthentication()\r\n        \t.withUser(&quot;test&quot;).password(&quot;{noop}test&quot;).roles(&quot;USER&quot;);\r\n    }\r\n}\r\n```\r\n\r\nHere are my controllers\r\n\r\n```@Controller\r\n@RequestMapping(&quot;/orders&quot;)\r\npublic class OrdersController {\r\n\r\n\t@Autowired\r\n\tprivate OrdersBusinessService service;\r\n\r\n\t@GetMapping(&quot;/display&quot;)\r\n\tpublic String display(Model model) {\r\n\t\tList&lt;OrderModel&gt; orders = service.getOrders();\r\n\t\tmodel.addAttribute(&quot;title&quot;, &quot;My Orders&quot;);\r\n\t\tmodel.addAttribute(&quot;orders&quot;, orders);\r\n\t\treturn &quot;orders&quot;;\r\n\t}\r\n\t\r\n}\r\n```\r\n```@Controller\r\npublic class LoginController {\r\n\t\r\n\t@GetMapping(&quot;/login&quot;)\r\n\tpublic String display(Model model) {\r\n\t\tmodel.addAttribute(&quot;title&quot;, &quot;Login Form&quot;);\r\n\t\treturn &quot;login&quot;;\r\n\t}\r\n```\r\n\r\n```\r\n@Controller\r\npublic class HomeController {\r\n\r\n\t@GetMapping(&quot;/&quot;)\r\n\tpublic String home(Model model) {\r\n\t\tmodel.addAttribute(&quot;title&quot;, &quot;My Home&quot;);\r\n\t\treturn &quot;home&quot;;\r\n\t}\r\n}\r\n```\r\n\r\n","title":"Program keeps redirecting to home page after login","body":"<p>I am trying to implement Spring Security to my program and the instructions we were given had all information from deprecated classes that aren't used anymore so I am trying to figure out how to properly update my code. I currently go to my home page localhost:8080 click the login hyper link then I am redirected to localhost:8080/login. I enter the correct username and password but then am redirected back to localhost:8080 instead of localhost:8080/display/orders.</p>\n<p>Is there something wrong in my security class? Or is there not the correct redirecting happening in my controllers?</p>\n<p>Here is my security config</p>\n<pre><code>        http\n            .authorizeHttpRequests(requests -&gt; requests\n                .requestMatchers(&quot;/&quot;, &quot;/images/**&quot;, &quot;/service/**&quot;).permitAll()\n                .anyRequest().authenticated()\n            )\n            .formLogin(form -&gt; form\n                .loginPage(&quot;/login&quot;)\n                .usernameParameter(&quot;username&quot;)\n                .passwordParameter(&quot;password&quot;)\n                .permitAll()\n                .defaultSuccessUrl(&quot;/orders/display&quot;, true)\n                \n            )\n            .logout(logout -&gt; logout\n                .logoutUrl(&quot;/logout&quot;)\n                .invalidateHttpSession(true)\n                .clearAuthentication(true)\n                .logoutSuccessUrl(&quot;/&quot;)\n                .permitAll());\n        \n        return http.build();\n    }\n\n    @Autowired\n    public void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.inMemoryAuthentication()\n            .withUser(&quot;test&quot;).password(&quot;{noop}test&quot;).roles(&quot;USER&quot;);\n    }\n}\n</code></pre>\n<p>Here are my controllers</p>\n<pre><code>@RequestMapping(&quot;/orders&quot;)\npublic class OrdersController {\n\n    @Autowired\n    private OrdersBusinessService service;\n\n    @GetMapping(&quot;/display&quot;)\n    public String display(Model model) {\n        List&lt;OrderModel&gt; orders = service.getOrders();\n        model.addAttribute(&quot;title&quot;, &quot;My Orders&quot;);\n        model.addAttribute(&quot;orders&quot;, orders);\n        return &quot;orders&quot;;\n    }\n    \n}\n</code></pre>\n<pre><code>public class LoginController {\n    \n    @GetMapping(&quot;/login&quot;)\n    public String display(Model model) {\n        model.addAttribute(&quot;title&quot;, &quot;Login Form&quot;);\n        return &quot;login&quot;;\n    }\n</code></pre>\n<pre><code>@Controller\npublic class HomeController {\n\n    @GetMapping(&quot;/&quot;)\n    public String home(Model model) {\n        model.addAttribute(&quot;title&quot;, &quot;My Home&quot;);\n        return &quot;home&quot;;\n    }\n}\n</code></pre>\n"},{"tags":["java","maven","intellij-idea","jetbrains-ide"],"answers":[{"comments":[{"owner":{"account_id":2970229,"reputation":844,"user_id":2522868,"accept_rate":100,"display_name":"yugi"},"score":0,"creation_date":1527842381,"post_id":50638391,"comment_id":88288683,"body_markdown":"no ..still facing the same issue. maven settings.xml is pointing to correct maven settings.xml","body":"no ..still facing the same issue. maven settings.xml is pointing to correct maven settings.xml"},{"owner":{"account_id":1681986,"reputation":4236,"user_id":1546042,"display_name":"BitfulByte"},"score":1,"creation_date":1527843882,"post_id":50638391,"comment_id":88289613,"body_markdown":"As a last resort, can you try to create your project anew? (e.g. by coping your project folder without the *iml files / .idea folder) and see if you get the same errors. If you don&#39;t it&#39;s your (intelliJ) project&#39;s config. If you still have the issue, it&#39;s perhaps an IntelliJ issue itself. Try to see if there is an update or try the EAP. and/or disable all plugins.","body":"As a last resort, can you try to create your project anew? (e.g. by coping your project folder without the *iml files / .idea folder) and see if you get the same errors. If you don&#39;t it&#39;s your (intelliJ) project&#39;s config. If you still have the issue, it&#39;s perhaps an IntelliJ issue itself. Try to see if there is an update or try the EAP. and/or disable all plugins."},{"owner":{"account_id":2970229,"reputation":844,"user_id":2522868,"accept_rate":100,"display_name":"yugi"},"score":0,"creation_date":1527844960,"post_id":50638391,"comment_id":88290289,"body_markdown":"yeah .. i will try this","body":"yeah .. i will try this"},{"owner":{"account_id":2155086,"reputation":506,"user_id":1910527,"accept_rate":75,"display_name":"Copy and Paste"},"score":0,"creation_date":1695767118,"post_id":50638391,"comment_id":136067820,"body_markdown":"For the worst of issues, sometimes this `Invalidate Caches...` method does NOT work.\nI usually start with the `Invalidate Caches...`. method described in this answer.\nIf that doesn&#39;t work, then I follow up with deleting the `.idea` folder, as described in the following answer. https://stackoverflow.com/a/70408136/1910527","body":"For the worst of issues, sometimes this <code>Invalidate Caches...</code> method does NOT work. I usually start with the <code>Invalidate Caches...</code>. method described in this answer. If that doesn&#39;t work, then I follow up with deleting the <code>.idea</code> folder, as described in the following answer. <a href=\"https://stackoverflow.com/a/70408136/1910527\">stackoverflow.com/a/70408136/1910527</a>"},{"owner":{"account_id":1681986,"reputation":4236,"user_id":1546042,"display_name":"BitfulByte"},"score":0,"creation_date":1695803286,"post_id":50638391,"comment_id":136071564,"body_markdown":"That works yeah, but please be careful. This should only be used really as a very last resort when you&#39;ve tried all else and nothing worked. In 10+ years of day-to-day work with IntelliJ, I have only done this myself only once or twice.\n\nYou are likely to loose all your project configuration and run configs etc. so be prepared to setup the whole project from scratch again! Ideally, create a back-up of the .idea folder just in case.","body":"That works yeah, but please be careful. This should only be used really as a very last resort when you&#39;ve tried all else and nothing worked. In 10+ years of day-to-day work with IntelliJ, I have only done this myself only once or twice.  You are likely to loose all your project configuration and run configs etc. so be prepared to setup the whole project from scratch again! Ideally, create a back-up of the .idea folder just in case."}],"tags":[],"owner":{"account_id":1681986,"reputation":4236,"user_id":1546042,"display_name":"BitfulByte"},"comment_count":5,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1527838714,"creation_date":1527838714,"answer_id":50638391,"question_id":50636628,"body_markdown":"Try:\r\n\r\n - `file` &gt; `invalidate caches / restart`\r\n - maven tool window -&gt; re-import / refresh:\r\n[![maven tool window][1]][1]\r\n - check maven settings of IntelliJ: does it point to the same settings.xml and repository as the maven from the command line? IntelliJ is shipped with it&#39;s internal maven and might use different settings / repo than your plain maven from the command line.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/frPOi.png","title":"Showing compile error in IntelliJ-idea in editor","body":"<p>Try:</p>\n\n<ul>\n<li><code>file</code> > <code>invalidate caches / restart</code></li>\n<li>maven tool window -> re-import / refresh:\n<a href=\"https://i.stack.imgur.com/frPOi.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/frPOi.png\" alt=\"maven tool window\"></a></li>\n<li>check maven settings of IntelliJ: does it point to the same settings.xml and repository as the maven from the command line? IntelliJ is shipped with it's internal maven and might use different settings / repo than your plain maven from the command line.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2420186,"reputation":1395,"user_id":2113338,"accept_rate":50,"display_name":"abstractKarshit"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1527870205,"creation_date":1527870205,"answer_id":50647576,"question_id":50636628,"body_markdown":"I believe this issue is related to the way we open this project in IntelliJ Idea as `mvn clean install` is working fine for you.\r\n\r\nWhile opening the project in IntelliJ, you should open **maven** project like this:\r\n\r\n - New -&gt; Project from Existing Sources -&gt; Select Project -&gt; Import from\r\n   External Model (Select `maven` here)\r\n[![enter image description here][1]][1]\r\n - After this, if you are asked to override .iml (idea files), you can override them.\r\n[![enter image description here][2]][2]\r\n\r\nThis should hopefully solve your problem.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yHPig.png\r\n  [2]: https://i.stack.imgur.com/w8SaL.png","title":"Showing compile error in IntelliJ-idea in editor","body":"<p>I believe this issue is related to the way we open this project in IntelliJ Idea as <code>mvn clean install</code> is working fine for you.</p>\n\n<p>While opening the project in IntelliJ, you should open <strong>maven</strong> project like this:</p>\n\n<ul>\n<li>New -> Project from Existing Sources -> Select Project -> Import from\nExternal Model (Select <code>maven</code> here)\n<a href=\"https://i.stack.imgur.com/yHPig.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/yHPig.png\" alt=\"enter image description here\"></a></li>\n<li>After this, if you are asked to override .iml (idea files), you can override them.\n<a href=\"https://i.stack.imgur.com/w8SaL.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/w8SaL.png\" alt=\"enter image description here\"></a></li>\n</ul>\n\n<p>This should hopefully solve your problem.</p>\n"},{"tags":[],"owner":{"account_id":20506725,"reputation":109,"user_id":15049342,"display_name":"MonishGhutke"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1624639163,"creation_date":1624639163,"answer_id":68134432,"question_id":50636628,"body_markdown":"You can invalidate the cache \r\n\r\n    file -&gt; invalidate caches and restart \r\n\r\nselecting first two options shown in invalidate cache has worked for, also you might get compile time error in already opened file so, try closing/opening these already opened files which are showing errors.\r\n\r\n   \r\n\r\n 1. **Clear file system cache and Local History**: remove the virtual file system cache together with the information stored in Local\r\n    History.\r\n        \r\n        This action might be helpful for troubleshooting purposes when the usual cache invalidation is not enough to solve the problem.\r\n        \r\n      2.  **Ask before downloading new shared indexes**: show a notification prompting you to download new shared indexes as they\r\n    become available.\r\n        \r\n        Enabling this option also updates your settings for shared project indexes in Settings/ Preferences | Tools | Shared Indexes.\r\n        \r\n       3. **Clear downloaded shared indexes**: remove the downloaded shared index files.","title":"Showing compile error in IntelliJ-idea in editor","body":"<p>You can invalidate the cache</p>\n<pre><code>file -&gt; invalidate caches and restart \n</code></pre>\n<p>selecting first two options shown in invalidate cache has worked for, also you might get compile time error in already opened file so, try closing/opening these already opened files which are showing errors.</p>\n<ol>\n<li><p><strong>Clear file system cache and Local History</strong>: remove the virtual file system cache together with the information stored in Local\nHistory.</p>\n<pre><code>This action might be helpful for troubleshooting purposes when the usual cache invalidation is not enough to solve the problem.\n</code></pre>\n<ol start=\"2\">\n<li><strong>Ask before downloading new shared indexes</strong>: show a notification prompting you to download new shared indexes as they\nbecome available.</li>\n</ol>\n<pre><code>Enabling this option also updates your settings for shared project indexes in Settings/ Preferences | Tools | Shared Indexes.\n</code></pre>\n<ol start=\"3\">\n<li><strong>Clear downloaded shared indexes</strong>: remove the downloaded shared index files.</li>\n</ol>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":5156692,"reputation":339,"user_id":4129751,"accept_rate":42,"display_name":"Dravidian"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634848667,"creation_date":1634848667,"answer_id":69668493,"question_id":50636628,"body_markdown":"If it helps, I also had to bump up the heap size for compiler to get past this issue.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/G43Fn.png","title":"Showing compile error in IntelliJ-idea in editor","body":"<p>If it helps, I also had to bump up the heap size for compiler to get past this issue.</p>\n<p><a href=\"https://i.stack.imgur.com/G43Fn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G43Fn.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"owner":{"account_id":1681986,"reputation":4236,"user_id":1546042,"display_name":"BitfulByte"},"score":0,"creation_date":1695803409,"post_id":70408136,"comment_id":136071583,"body_markdown":"Downvoted, because this solution can do more harm than good. Please warn people about the consequences when deleting their .idea folder! As they may loose run configurations and environment variable setup that may be hard to restore as it was. So &quot;import fresh&quot; is rather relative and can have major impact depending on people&#39;s context. \n\nPlease update your answer accordingly.","body":"Downvoted, because this solution can do more harm than good. Please warn people about the consequences when deleting their .idea folder! As they may loose run configurations and environment variable setup that may be hard to restore as it was. So &quot;import fresh&quot; is rather relative and can have major impact depending on people&#39;s context.   Please update your answer accordingly."}],"tags":[],"owner":{"account_id":1519017,"reputation":843,"user_id":1419261,"display_name":"user1419261"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1639873214,"creation_date":1639873214,"answer_id":70408136,"question_id":50636628,"body_markdown":"Try deleteing the .idea folder under your project, close the project completely and re import fresh and it worked for me.","title":"Showing compile error in IntelliJ-idea in editor","body":"<p>Try deleteing the .idea folder under your project, close the project completely and re import fresh and it worked for me.</p>\n"},{"comments":[{"owner":{"account_id":7833047,"reputation":594,"user_id":5922270,"accept_rate":80,"display_name":"Shabbir Essaji"},"score":0,"creation_date":1664190245,"post_id":71845827,"comment_id":130406858,"body_markdown":"This worked for me after doing all other steps(in vain)","body":"This worked for me after doing all other steps(in vain)"}],"tags":[],"owner":{"account_id":4993801,"reputation":997,"user_id":4015129,"display_name":"Prashant Sahoo"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649779667,"creation_date":1649779187,"answer_id":71845827,"question_id":50636628,"body_markdown":"I resolved this issue by deleting the local maven repository and restoring the default setting of **Intellij** \r\n\r\n 1. Go to File --&gt; Manage IDE Settings --&gt; Restore Default Settings \r\n 2. Go to File --&gt; Settings --&gt; Build, Execution, Deployment --&gt; Build Tools --&gt; Maven --&gt; Get the **Local repository** path and delete it.\r\n 3. Open Intellij --&gt; open project --&gt; Go to Terminal --&gt; mvn clean install --&gt; error will disappear after build success","title":"Showing compile error in IntelliJ-idea in editor","body":"<p>I resolved this issue by deleting the local maven repository and restoring the default setting of <strong>Intellij</strong></p>\n<ol>\n<li>Go to File --&gt; Manage IDE Settings --&gt; Restore Default Settings</li>\n<li>Go to File --&gt; Settings --&gt; Build, Execution, Deployment --&gt; Build Tools --&gt; Maven --&gt; Get the <strong>Local repository</strong> path and delete it.</li>\n<li>Open Intellij --&gt; open project --&gt; Go to Terminal --&gt; mvn clean install --&gt; error will disappear after build success</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":2206466,"reputation":187,"user_id":1949561,"display_name":"user1949561"},"score":0,"creation_date":1691683642,"post_id":76836331,"comment_id":135527781,"body_markdown":"Brilliant!  THIS solved this issue for me.  All I had to do was install the LOMBOK plugin, thanks!","body":"Brilliant!  THIS solved this issue for me.  All I had to do was install the LOMBOK plugin, thanks!"}],"tags":[],"owner":{"account_id":7015510,"reputation":113,"user_id":7339779,"accept_rate":50,"display_name":"joy_jlee"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691155333,"creation_date":1691155333,"answer_id":76836331,"question_id":50636628,"body_markdown":"If all the above solutions do not really help, make sure you have the necessary plugins installed (such as Lombok). After an Intellij upgrade, I needed to install lombok plugin again. Intellij usually suggests installing it in the pup-up window at the bottom. ","title":"Showing compile error in IntelliJ-idea in editor","body":"<p>If all the above solutions do not really help, make sure you have the necessary plugins installed (such as Lombok). After an Intellij upgrade, I needed to install lombok plugin again. Intellij usually suggests installing it in the pup-up window at the bottom.</p>\n"}],"owner":{"account_id":2970229,"reputation":844,"user_id":2522868,"accept_rate":100,"display_name":"yugi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12157,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":50647576,"answer_count":7,"score":11,"last_activity_date":1691155333,"creation_date":1527831019,"question_id":50636628,"body_markdown":"Showing compile error in IntelliJ-idea editor. \r\n\r\n    mvn clean install \r\n\r\nWhen run it will build successfully and run code normally. But in editor its unable to resolve those import. Some of the import is showing correctly some of the import it&#39;s showing error like Blow \r\n[![enter image description here][1]][1]\r\n\r\nand actually, the dependency is present in maven dependency list \r\n\r\n[![enter image description here][2]][2]\r\n\r\nIn the editor, it showing full of error \r\n\r\n\r\nI modified build settings, deleted repo, updated maven to the latest version, updated the IntelliJ and tried other suggestion in StackOverflow, still no solution for this problem.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vokjK.png\r\n  [2]: https://i.stack.imgur.com/bc1jB.png\r\n","title":"Showing compile error in IntelliJ-idea in editor","body":"<p>Showing compile error in IntelliJ-idea editor. </p>\n\n<pre><code>mvn clean install \n</code></pre>\n\n<p>When run it will build successfully and run code normally. But in editor its unable to resolve those import. Some of the import is showing correctly some of the import it's showing error like Blow \n<a href=\"https://i.stack.imgur.com/vokjK.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/vokjK.png\" alt=\"enter image description here\"></a></p>\n\n<p>and actually, the dependency is present in maven dependency list </p>\n\n<p><a href=\"https://i.stack.imgur.com/bc1jB.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/bc1jB.png\" alt=\"enter image description here\"></a></p>\n\n<p>In the editor, it showing full of error </p>\n\n<p>I modified build settings, deleted repo, updated maven to the latest version, updated the IntelliJ and tried other suggestion in StackOverflow, still no solution for this problem.</p>\n"},{"tags":["java",".net","visual-studio","maven","nuget"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1691156675,"post_id":76836317,"comment_id":135457738,"body_markdown":"Can you include the data repo as a Git submodule? They&#39;d be in their own repo, but easily included in all other Git repos.","body":"Can you include the data repo as a Git submodule? They&#39;d be in their own repo, but easily included in all other Git repos."},{"owner":{"account_id":140870,"reputation":9827,"user_id":347484,"accept_rate":98,"display_name":"Boppity Bop"},"score":0,"creation_date":1691156731,"post_id":76836317,"comment_id":135457754,"body_markdown":"I don&#39;t know. I never heard of submodules. Tell me more please","body":"I don&#39;t know. I never heard of submodules. Tell me more please"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1691156755,"post_id":76836317,"comment_id":135457757,"body_markdown":"https://git-scm.com/book/en/v2/Git-Tools-Submodules","body":"<a href=\"https://git-scm.com/book/en/v2/Git-Tools-Submodules\" rel=\"nofollow noreferrer\">git-scm.com/book/en/v2/Git-Tools-Submodules</a>"},{"owner":{"account_id":8334489,"reputation":5477,"user_id":6261890,"display_name":"Bowman Zhu-MSFT"},"score":0,"creation_date":1692697407,"post_id":76836317,"comment_id":135656116,"body_markdown":"@BoppityBop Hi, any update of this question? :)","body":"@BoppityBop Hi, any update of this question? :)"},{"owner":{"account_id":140870,"reputation":9827,"user_id":347484,"accept_rate":98,"display_name":"Boppity Bop"},"score":0,"creation_date":1692698223,"post_id":76836317,"comment_id":135656304,"body_markdown":"Jorn idea it sounds good.. but java team rejected the approach. so i couldnt test..","body":"Jorn idea it sounds good.. but java team rejected the approach. so i couldnt test.."}],"owner":{"account_id":140870,"reputation":9827,"user_id":347484,"accept_rate":98,"display_name":"Boppity Bop"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691155226,"creation_date":1691155226,"question_id":76836317,"body_markdown":"We currently have 3 teams working with same set of .json files : java .net and python.\r\n\r\nThe files are static data which changes not very often. They need to be deployed with executables. So they are code-agnostic assets\r\n\r\nThey are part of .net solution and java project (not sure how python guys structure theirs)\r\n\r\nIf there are changes in the files .net and python are going to java github repo and download them, replace locally, check in into their repos. There are also 2 different .net teams using it in separate VS solutions and separate github repos.\r\n\r\nIs there a way to automate it? Or better share from the single source?\r\n\r\nWe use enterprise github","title":"Share project files between Visual Studio .net and Eclipse java","body":"<p>We currently have 3 teams working with same set of .json files : java .net and python.</p>\n<p>The files are static data which changes not very often. They need to be deployed with executables. So they are code-agnostic assets</p>\n<p>They are part of .net solution and java project (not sure how python guys structure theirs)</p>\n<p>If there are changes in the files .net and python are going to java github repo and download them, replace locally, check in into their repos. There are also 2 different .net teams using it in separate VS solutions and separate github repos.</p>\n<p>Is there a way to automate it? Or better share from the single source?</p>\n<p>We use enterprise github</p>\n"},{"tags":["java","android","libgdx"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1690974540,"post_id":76818465,"comment_id":135426828,"body_markdown":"I would say the class you use extends another class and you must pass arguments to the super() in /or from a constructor at minimum whether they are literals fed inside a no Arg constructor to super(....the args....)   or the class you built obtains some or all the args to feed to super(....args...)","body":"I would say the class you use extends another class and you must pass arguments to the super() in /or from a constructor at minimum whether they are literals fed inside a no Arg constructor to super(....the args....)   or the class you built obtains some or all the args to feed to super(....args...)"},{"owner":{"account_id":19809070,"reputation":1,"user_id":14508367,"display_name":"Ajax12Ajax"},"score":0,"creation_date":1691155299,"post_id":76818465,"comment_id":135457374,"body_markdown":"The library in question is built into the framework I&#39;m using (LibGDX) and I don&#39;t seem to be able to add a super() to it anywhere or I just don&#39;t know where to","body":"The library in question is built into the framework I&#39;m using (LibGDX) and I don&#39;t seem to be able to add a super() to it anywhere or I just don&#39;t know where to"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691211194,"post_id":76818465,"comment_id":135464541,"body_markdown":"I&#39;ll just presume &quot;you&quot; have written main class to import the library into, you would be &quot;extending&quot;? from a class in LibGDX ? Or is there a problem with pre loading LibGDX from some ready made program configuration on startup?","body":"I&#39;ll just presume &quot;you&quot; have written main class to import the library into, you would be &quot;extending&quot;? from a class in LibGDX ? Or is there a problem with pre loading LibGDX from some ready made program configuration on startup?"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691211853,"post_id":76818465,"comment_id":135464579,"body_markdown":"It appears you did not initialise a class you needed from this package is the most probable e.g. there is a variable but no construction call in the code, or it is in an if else (or some block) and unclear to the compiler if it would  get called.\n     com.badlogic.gdx.scenes.scene2d.ui","body":"It appears you did not initialise a class you needed from this package is the most probable e.g. there is a variable but no construction call in the code, or it is in an if else (or some block) and unclear to the compiler if it would  get called.      com.badlogic.gdx.scenes.scene2d.ui"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691212417,"post_id":76818465,"comment_id":135464631,"body_markdown":"However, starting an android application uses a no Arg constructor and is as I mentioned before &quot;extended&quot; class, so for main class it does no harm to put in public MyMainClass(){super();}","body":"However, starting an android application uses a no Arg constructor and is as I mentioned before &quot;extended&quot; class, so for main class it does no harm to put in public MyMainClass(){super();}"}],"owner":{"account_id":19809070,"reputation":1,"user_id":14508367,"display_name":"Ajax12Ajax"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691155110,"creation_date":1690968263,"question_id":76818465,"body_markdown":"I get this problem in google play console but not in ide anymore(I use intelij).\r\n\r\nI suspect there may be a problem with proguard.\r\n\r\nHere is my proguard:\r\n```\r\n-verbose\r\n\r\n-dontwarn com.badlogic.gdx.backends.android.AndroidFragmentApplication\r\n\r\n# Required if using Gdx-Controllers extension\r\n-keep class com.badlogic.gdx.controllers.android.AndroidControllers\r\n\r\n-keep class com.badlogic.gdx.scenes.scene2d.ui.**{\r\n   **[] $VALUES;\r\n    *;\r\n}\r\n\r\n-keep class com.your.game.data.**{\r\n   **[] $VALUES;\r\n    *;\r\n}\r\n\r\n# Required if using Box2D extension\r\n-keepclassmembers class com.badlogic.gdx.physics.box2d.World {\r\n   boolean contactFilter(long, long);\r\n   void    beginContact(long);\r\n   void    endContact(long);\r\n   void    preSolve(long, long);\r\n   void    postSolve(long, long);\r\n   boolean reportFixture(long);\r\n   float   reportRayFixture(long, float, float, float, float, float);\r\n}\r\n\r\n```\r\n","title":"LibGDX Class cannot be created (missing no-arg constructor): com.badlogic.gdx.scenes.scene2d.f","body":"<p>I get this problem in google play console but not in ide anymore(I use intelij).</p>\n<p>I suspect there may be a problem with proguard.</p>\n<p>Here is my proguard:</p>\n<pre><code>-verbose\n\n-dontwarn com.badlogic.gdx.backends.android.AndroidFragmentApplication\n\n# Required if using Gdx-Controllers extension\n-keep class com.badlogic.gdx.controllers.android.AndroidControllers\n\n-keep class com.badlogic.gdx.scenes.scene2d.ui.**{\n   **[] $VALUES;\n    *;\n}\n\n-keep class com.your.game.data.**{\n   **[] $VALUES;\n    *;\n}\n\n# Required if using Box2D extension\n-keepclassmembers class com.badlogic.gdx.physics.box2d.World {\n   boolean contactFilter(long, long);\n   void    beginContact(long);\n   void    endContact(long);\n   void    preSolve(long, long);\n   void    postSolve(long, long);\n   boolean reportFixture(long);\n   float   reportRayFixture(long, float, float, float, float, float);\n}\n\n</code></pre>\n"},{"tags":["java","hibernate","jboss","db2"],"owner":{"account_id":19542705,"reputation":11,"user_id":14300153,"display_name":"Ciprian Istrate"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691154679,"creation_date":1691153512,"question_id":76836092,"body_markdown":"Hello i have this error  [Classpath]: Could not load AnnotationConfiguration while i&#39;m trying to use hibernate tool to generate table to/from database that i use. I create a simple maven project just to test the connection. NOTE: On Database Development Perspective - I create a Database Connection that can send Pings to my db\r\n\r\n\r\n\r\npom.xml \r\n```&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;org.o7planning&lt;/groupId&gt;\r\n  &lt;artifactId&gt;HibernateGenerateEntities&lt;/artifactId&gt;\r\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n  &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n  &lt;name&gt;HibernateGenerateEntities&lt;/name&gt;\r\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;version&gt;3.8.1&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n   \r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.4.Final&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- for JPA, use hibernate-entitymanager instead of hibernate-core --&gt;\r\n       &lt;dependency&gt;\r\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n    &lt;version&gt;5.1.0.Final&lt;/version&gt;\r\n    &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n            &lt;groupId&gt;dom4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n    &lt;/exclusions&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n    &lt;version&gt;5.1.0.Final&lt;/version&gt;\r\n    &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n            &lt;groupId&gt;dom4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n    &lt;/exclusions&gt;\r\n&lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-ehcache&lt;/artifactId&gt;\r\n            &lt;version&gt;5.1.0.Final&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n   \r\n        \r\n  &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nhibernate.cfg.xml \r\n```&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE hibernate-configuration SYSTEM\r\n\t\t\r\n\t\t&quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n&lt;hibernate-configuration&gt;\r\n    &lt;session-factory&gt;\r\n        &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.ibm.db2.jcc.DB2Driver&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.password&quot;&gt;pass&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:db2:URL:sslConnection=true;&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.username&quot;&gt;username&lt;/property&gt;\r\n         &lt;property name=&quot;hibernate.dialect&quot;&gt;\r\n            org.hibernate.dialect.DB2390Dialect\r\n        &lt;/property&gt;\r\n    &lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```\r\n[![Hibernate Config](https://i.stack.imgur.com/o0LMf.png)](https://i.stack.imgur.com/o0LMf.png)\r\n\r\nI tried to add:  ```&lt;scope&gt;provided&lt;/scope&gt;``` for hibernate core/ validator also in hibernate.cfg.xml i add SYSTEM. Thanks.\r\n\r\nFull error trace: \r\n```org.hibernate.console.HibernateConsoleRuntimeException: Could not load AnnotationConfiguration\r\n\tat org.hibernate.console.ConfigurationFactory.buildConfiguration(ConfigurationFactory.java:149)\r\n\tat org.hibernate.console.ConfigurationFactory.createConfiguration(ConfigurationFactory.java:87)\r\n\tat org.hibernate.eclipse.console.common.HibernateExtension$5.execute(HibernateExtension.java:165)\r\n\tat org.hibernate.console.execution.DefaultExecutionContext.execute(DefaultExecutionContext.java:63)\r\n\tat org.hibernate.eclipse.console.common.HibernateExtension.execute(HibernateExtension.java:188)\r\n\tat org.hibernate.eclipse.console.common.HibernateExtension.buildWith(HibernateExtension.java:162)\r\n\tat org.hibernate.eclipse.console.common.HibernateExtension.build(HibernateExtension.java:133)\r\n\tat org.hibernate.console.ConsoleConfiguration.build(ConsoleConfiguration.java:188)\r\n\tat org.hibernate.eclipse.console.workbench.ConsoleConfigurationWorkbenchAdapter.getChildren(ConsoleConfigurationWorkbenchAdapter.java:43)\r\n\tat org.hibernate.eclipse.console.workbench.BasicWorkbenchAdapter.getChildren(BasicWorkbenchAdapter.java:98)\r\n\tat org.hibernate.eclipse.console.workbench.BasicWorkbenchAdapter.fetchDeferredChildren(BasicWorkbenchAdapter.java:104)\r\n\tat org.eclipse.ui.progress.DeferredTreeContentManager$1.run(DeferredTreeContentManager.java:219)\r\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)\r\nCaused by: org.hibernate.HibernateException: Could not parse configuration: C:\\DIALOG\\server\\workspaces\\server-ngg\\CommonHibernate\\HibernateGenerateEntities\\src\\main\\java\\hibernate.cfg.xml\r\n\tat org.hibernate.cfg.Configuration.doConfigure(Configuration.java:2165)\r\n\tat org.hibernate.cfg.Configuration.configure(Configuration.java:2135)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.jboss.tools.hibernate.runtime.common.Util.invokeMethod(Util.java:43)\r\n\tat org.jboss.tools.hibernate.runtime.common.AbstractConfigurationFacade.configure(AbstractConfigurationFacade.java:137)\r\n\tat org.hibernate.console.ConfigurationFactory.loadConfigurationXML(ConfigurationFactory.java:340)\r\n\tat org.hibernate.console.ConfigurationFactory.configureStandardConfiguration(ConfigurationFactory.java:268)\r\n\tat org.hibernate.console.ConfigurationFactory.buildConfiguration(ConfigurationFactory.java:145)\r\n\t... 12 more\r\nCaused by: org.dom4j.DocumentException: class org.dom4j.DocumentFactory cannot be cast to class org.dom4j.DocumentFactory (org.dom4j.DocumentFactory is in unnamed module of loader org.hibernate.console.ConsoleConfiguration$2$1 @7ab066a5; org.dom4j.DocumentFactory is in unnamed module of loader org.eclipse.osgi.internal.loader.EquinoxClassLoader @490b38f7) Nested exception: class org.dom4j.DocumentFactory cannot be cast to class org.dom4j.DocumentFactory (org.dom4j.DocumentFactory is in unnamed module of loader org.hibernate.console.ConsoleConfiguration$2$1 @7ab066a5; org.dom4j.DocumentFactory is in unnamed module of loader org.eclipse.osgi.internal.loader.EquinoxClassLoader @490b38f7)\r\n\tat org.dom4j.io.SAXReader.read(SAXReader.java:484)\r\n\tat org.hibernate.cfg.Configuration.doConfigure(Configuration.java:2157)\r\n\t... 22 more\r\n```","title":"[Classpath]: Could not load AnnotationConfiguration","body":"<p>Hello i have this error  [Classpath]: Could not load AnnotationConfiguration while i'm trying to use hibernate tool to generate table to/from database that i use. I create a simple maven project just to test the connection. NOTE: On Database Development Perspective - I create a Database Connection that can send Pings to my db</p>\n<p>pom.xml</p>\n<pre><code>  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;org.o7planning&lt;/groupId&gt;\n  &lt;artifactId&gt;HibernateGenerateEntities&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n\n  &lt;name&gt;HibernateGenerateEntities&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n   \n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;version&gt;5.2.4.Final&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- for JPA, use hibernate-entitymanager instead of hibernate-core --&gt;\n       &lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n    &lt;version&gt;5.1.0.Final&lt;/version&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;dom4j&lt;/groupId&gt;\n            &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n    &lt;version&gt;5.1.0.Final&lt;/version&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;dom4j&lt;/groupId&gt;\n            &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-ehcache&lt;/artifactId&gt;\n            &lt;version&gt;5.1.0.Final&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        \n   \n        \n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>hibernate.cfg.xml</p>\n<pre><code>&lt;!DOCTYPE hibernate-configuration SYSTEM\n        \n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.ibm.db2.jcc.DB2Driver&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.password&quot;&gt;pass&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:db2:URL:sslConnection=true;&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.username&quot;&gt;username&lt;/property&gt;\n         &lt;property name=&quot;hibernate.dialect&quot;&gt;\n            org.hibernate.dialect.DB2390Dialect\n        &lt;/property&gt;\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/o0LMf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o0LMf.png\" alt=\"Hibernate Config\" /></a></p>\n<p>I tried to add:  <code>&lt;scope&gt;provided&lt;/scope&gt;</code> for hibernate core/ validator also in hibernate.cfg.xml i add SYSTEM. Thanks.</p>\n<p>Full error trace:</p>\n<pre><code>    at org.hibernate.console.ConfigurationFactory.buildConfiguration(ConfigurationFactory.java:149)\n    at org.hibernate.console.ConfigurationFactory.createConfiguration(ConfigurationFactory.java:87)\n    at org.hibernate.eclipse.console.common.HibernateExtension$5.execute(HibernateExtension.java:165)\n    at org.hibernate.console.execution.DefaultExecutionContext.execute(DefaultExecutionContext.java:63)\n    at org.hibernate.eclipse.console.common.HibernateExtension.execute(HibernateExtension.java:188)\n    at org.hibernate.eclipse.console.common.HibernateExtension.buildWith(HibernateExtension.java:162)\n    at org.hibernate.eclipse.console.common.HibernateExtension.build(HibernateExtension.java:133)\n    at org.hibernate.console.ConsoleConfiguration.build(ConsoleConfiguration.java:188)\n    at org.hibernate.eclipse.console.workbench.ConsoleConfigurationWorkbenchAdapter.getChildren(ConsoleConfigurationWorkbenchAdapter.java:43)\n    at org.hibernate.eclipse.console.workbench.BasicWorkbenchAdapter.getChildren(BasicWorkbenchAdapter.java:98)\n    at org.hibernate.eclipse.console.workbench.BasicWorkbenchAdapter.fetchDeferredChildren(BasicWorkbenchAdapter.java:104)\n    at org.eclipse.ui.progress.DeferredTreeContentManager$1.run(DeferredTreeContentManager.java:219)\n    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)\nCaused by: org.hibernate.HibernateException: Could not parse configuration: C:\\DIALOG\\server\\workspaces\\server-ngg\\CommonHibernate\\HibernateGenerateEntities\\src\\main\\java\\hibernate.cfg.xml\n    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:2165)\n    at org.hibernate.cfg.Configuration.configure(Configuration.java:2135)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.jboss.tools.hibernate.runtime.common.Util.invokeMethod(Util.java:43)\n    at org.jboss.tools.hibernate.runtime.common.AbstractConfigurationFacade.configure(AbstractConfigurationFacade.java:137)\n    at org.hibernate.console.ConfigurationFactory.loadConfigurationXML(ConfigurationFactory.java:340)\n    at org.hibernate.console.ConfigurationFactory.configureStandardConfiguration(ConfigurationFactory.java:268)\n    at org.hibernate.console.ConfigurationFactory.buildConfiguration(ConfigurationFactory.java:145)\n    ... 12 more\nCaused by: org.dom4j.DocumentException: class org.dom4j.DocumentFactory cannot be cast to class org.dom4j.DocumentFactory (org.dom4j.DocumentFactory is in unnamed module of loader org.hibernate.console.ConsoleConfiguration$2$1 @7ab066a5; org.dom4j.DocumentFactory is in unnamed module of loader org.eclipse.osgi.internal.loader.EquinoxClassLoader @490b38f7) Nested exception: class org.dom4j.DocumentFactory cannot be cast to class org.dom4j.DocumentFactory (org.dom4j.DocumentFactory is in unnamed module of loader org.hibernate.console.ConsoleConfiguration$2$1 @7ab066a5; org.dom4j.DocumentFactory is in unnamed module of loader org.eclipse.osgi.internal.loader.EquinoxClassLoader @490b38f7)\n    at org.dom4j.io.SAXReader.read(SAXReader.java:484)\n    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:2157)\n    ... 22 more\n</code></pre>\n"},{"tags":["java","hibernate","spring-data-jpa","fetch"],"owner":{"account_id":27665354,"reputation":21,"user_id":21117304,"display_name":"IvaneP"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1691153945,"creation_date":1691153945,"question_id":76836156,"body_markdown":"I wonder how I can avoid warn log: *HHH90003004: firstResult/maxResults specified with collection fetch; applying in memory* .\r\n\r\nI used tis @Query annotation (it&#39;s working):\r\n\r\n```\r\n@Query(&quot;select distinct p from Place p&quot;)\r\nPage&lt;Place&gt; findAllWithEvents(Pageable pageable);\r\n```\r\n\r\n**but my task required : paging with fetching**. I tried with two methods:\r\n\r\n```\r\n@Repository\r\npublic interface PlaceRepository extends JpaRepository&lt;Place, Long&gt; {\r\n\r\n    @Query(&quot;select p.id from Place p&quot;)\r\n    List&lt;Long&gt; getAllIds(Pageable pageable);\r\n\r\n    @Query(&quot;select distinct p from Place p left join fetch p.events where p.id IN (:ids)&quot;)\r\n    Page&lt;Place&gt; findAll(@Param(&quot;ids&quot;)List&lt;Long&gt; ids);\r\n```\r\n\r\n,.. but I don&#39;t know how to connect them then in the service?\r\n\r\n```\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class PlaceServiceImpl implements PlaceService {\r\n\r\n    public static final int PAGE_SIZE = 3;\r\n    private final PlaceRepository placeRepository;\r\n\r\n    @Override\r\n    public PlaceSaveDto save(CreatePlaceCommand command) {\r\n        return PlaceSaveDto.fromEntity(placeRepository.save(command.toEntity()));\r\n    }\r\n\r\n    @Override\r\n    public Page&lt;PlaceDto&gt; findAll(Pageable pageable) {\r\n        Page&lt;Place&gt; placesWithEvents = placeRepository.findAll(pageable);\r\n        return placesWithEvents.map(place -&gt; PlaceDto.fromEntityWithEvents(place, place.getEvents()));\r\n    }\r\n}\r\n```\r\n\r\nI have two classes wiht relation one to many:\r\n\r\n```\r\n@Entity\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@EqualsAndHashCode\r\n@Getter\r\n@Setter\r\n@Builder\r\n@ToString\r\npublic class Place {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private long id;\r\n\r\n    private String name;\r\n    private long numberOfPeople;\r\n    private String uniqueCode;\r\n\r\n    @OneToMany\r\n    @JoinColumn(name = &quot;placeId&quot;)\r\n    @BatchSize(size = 10)\r\n    private Set&lt;Event&gt; events;\r\n\r\n\r\n    @PostPersist\r\n    public void generateUniqueCode() {\r\n        StringBuilder codeBuilder = new StringBuilder();\r\n\r\n        if (name.length() &lt;= 3) {\r\n            codeBuilder.append(name.toUpperCase());\r\n        } else {\r\n            codeBuilder.append(name.substring(0, 3).toUpperCase());\r\n        }\r\n        codeBuilder.append(id);\r\n        uniqueCode = codeBuilder.toString().replaceAll(&quot;\\\\s+&quot;, &quot;&quot;);\r\n    }\r\n}\r\n\r\n\r\n@Entity\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@EqualsAndHashCode\r\n@Getter\r\n@Setter\r\n@Builder\r\n@ToString\r\npublic class Event {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private long id;\r\n\r\n    private String name;\r\n    private LocalDate date;\r\n    private BigDecimal price;\r\n    private long numberOfPeople;\r\n    private long placeId;\r\n    private String placeUniqueCode;\r\n}\r\n```\r\n\r\ncan you tell me where i am making mistake?","title":"Paging with fetching - Spring Data JPA","body":"<p>I wonder how I can avoid warn log: <em>HHH90003004: firstResult/maxResults specified with collection fetch; applying in memory</em> .</p>\n<p>I used tis @Query annotation (it's working):</p>\n<pre><code>@Query(&quot;select distinct p from Place p&quot;)\nPage&lt;Place&gt; findAllWithEvents(Pageable pageable);\n</code></pre>\n<p><strong>but my task required : paging with fetching</strong>. I tried with two methods:</p>\n<pre><code>@Repository\npublic interface PlaceRepository extends JpaRepository&lt;Place, Long&gt; {\n\n    @Query(&quot;select p.id from Place p&quot;)\n    List&lt;Long&gt; getAllIds(Pageable pageable);\n\n    @Query(&quot;select distinct p from Place p left join fetch p.events where p.id IN (:ids)&quot;)\n    Page&lt;Place&gt; findAll(@Param(&quot;ids&quot;)List&lt;Long&gt; ids);\n</code></pre>\n<p>,.. but I don't know how to connect them then in the service?</p>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class PlaceServiceImpl implements PlaceService {\n\n    public static final int PAGE_SIZE = 3;\n    private final PlaceRepository placeRepository;\n\n    @Override\n    public PlaceSaveDto save(CreatePlaceCommand command) {\n        return PlaceSaveDto.fromEntity(placeRepository.save(command.toEntity()));\n    }\n\n    @Override\n    public Page&lt;PlaceDto&gt; findAll(Pageable pageable) {\n        Page&lt;Place&gt; placesWithEvents = placeRepository.findAll(pageable);\n        return placesWithEvents.map(place -&gt; PlaceDto.fromEntityWithEvents(place, place.getEvents()));\n    }\n}\n</code></pre>\n<p>I have two classes wiht relation one to many:</p>\n<pre><code>@Entity\n@AllArgsConstructor\n@NoArgsConstructor\n@EqualsAndHashCode\n@Getter\n@Setter\n@Builder\n@ToString\npublic class Place {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    private String name;\n    private long numberOfPeople;\n    private String uniqueCode;\n\n    @OneToMany\n    @JoinColumn(name = &quot;placeId&quot;)\n    @BatchSize(size = 10)\n    private Set&lt;Event&gt; events;\n\n\n    @PostPersist\n    public void generateUniqueCode() {\n        StringBuilder codeBuilder = new StringBuilder();\n\n        if (name.length() &lt;= 3) {\n            codeBuilder.append(name.toUpperCase());\n        } else {\n            codeBuilder.append(name.substring(0, 3).toUpperCase());\n        }\n        codeBuilder.append(id);\n        uniqueCode = codeBuilder.toString().replaceAll(&quot;\\\\s+&quot;, &quot;&quot;);\n    }\n}\n\n\n@Entity\n@AllArgsConstructor\n@NoArgsConstructor\n@EqualsAndHashCode\n@Getter\n@Setter\n@Builder\n@ToString\npublic class Event {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    private String name;\n    private LocalDate date;\n    private BigDecimal price;\n    private long numberOfPeople;\n    private long placeId;\n    private String placeUniqueCode;\n}\n</code></pre>\n<p>can you tell me where i am making mistake?</p>\n"},{"tags":["java","android","android-studio"],"answers":[{"comments":[{"owner":{"account_id":13752654,"reputation":1511,"user_id":9924372,"display_name":"Arjun"},"score":1,"creation_date":1614242632,"post_id":64815757,"comment_id":117327385,"body_markdown":"I&#39;m getting the following error after adding this. Error: The application has specified that a custom LogFactory implementation should be used but class &#39;org.apache.commons.logging.impl.LogFactoryImpl&#39; cannot be converted to &#39;org.apache.commons.logging.LogFactory&#39;. Could you please help me how to resolve this?","body":"I&#39;m getting the following error after adding this. Error: The application has specified that a custom LogFactory implementation should be used but class &#39;org.apache.commons.logging.impl.LogFactoryImpl&#39; cannot be converted to &#39;org.apache.commons.logging.LogFactory&#39;. Could you please help me how to resolve this?"},{"owner":{"account_id":19702128,"reputation":135,"user_id":14424618,"display_name":"Abdus Sattar Nishad"},"score":0,"creation_date":1665493412,"post_id":64815757,"comment_id":130709469,"body_markdown":"any solution to this ?","body":"any solution to this ?"}],"tags":[],"owner":{"account_id":19949849,"reputation":91,"user_id":14619737,"display_name":"Nibuvax"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1660234051,"creation_date":1605243757,"answer_id":64815757,"question_id":60684730,"body_markdown":"This code will solve problem\r\n\r\n    android {\r\n        packagingOptions {\r\n            pickFirst &quot;META-INF/DEPENDENCIES&quot;\r\n        }\r\n    }\r\n    \r\nor\r\n\r\n    android {\r\n        packagingOptions {\r\n            exclude &quot;META-INF/DEPENDENCIES&quot;\r\n        }\r\n    }\r\n\r\n","title":"Error: Execution failed for task &#39;:app:mergeDebugJavaResource&#39;","body":"<p>This code will solve problem</p>\n<pre><code>android {\n    packagingOptions {\n        pickFirst &quot;META-INF/DEPENDENCIES&quot;\n    }\n}\n</code></pre>\n<p>or</p>\n<pre><code>android {\n    packagingOptions {\n        exclude &quot;META-INF/DEPENDENCIES&quot;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1666761287,"post_id":74164926,"comment_id":131009967,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/74164926/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":25184408,"reputation":21,"user_id":19025500,"display_name":"Hitesh Nath"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666453478,"creation_date":1666453478,"answer_id":74164926,"question_id":60684730,"body_markdown":"&gt; flutter clean\r\n&gt; \r\n&gt; flutter pub get\r\n\r\n\r\nThis works for me.","title":"Error: Execution failed for task &#39;:app:mergeDebugJavaResource&#39;","body":"<blockquote>\n<p>flutter clean</p>\n<p>flutter pub get</p>\n</blockquote>\n<p>This works for me.</p>\n"},{"tags":[],"owner":{"account_id":8535619,"reputation":1642,"user_id":7647323,"display_name":"AAber "},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677349997,"creation_date":1677349997,"answer_id":75567555,"question_id":60684730,"body_markdown":"My ISP is using custom SSL infrastructure which blocked the Gradle downloads from: https://storage.googleapis.com/download.flutter.io/io/flutter/arm64_v8a_debug/\r\n\r\nOnce I connected to the internet with a standard connection the build completed without error.  ","title":"Error: Execution failed for task &#39;:app:mergeDebugJavaResource&#39;","body":"<p>My ISP is using custom SSL infrastructure which blocked the Gradle downloads from: <a href=\"https://storage.googleapis.com/download.flutter.io/io/flutter/arm64_v8a_debug/\" rel=\"nofollow noreferrer\">https://storage.googleapis.com/download.flutter.io/io/flutter/arm64_v8a_debug/</a></p>\n<p>Once I connected to the internet with a standard connection the build completed without error.</p>\n"},{"tags":[],"owner":{"account_id":24683299,"reputation":21,"user_id":18576787,"display_name":"Ali Salhab"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691153819,"creation_date":1691153338,"answer_id":76836070,"question_id":60684730,"body_markdown":"\r\nthe main problem in pubspec.yaml file \r\nmake sure to edit pubspec.yaml correctly then\r\n` flutter clean\r\n&amp;&amp; flutter pub get`","title":"Error: Execution failed for task &#39;:app:mergeDebugJavaResource&#39;","body":"<p>the main problem in pubspec.yaml file\nmake sure to edit pubspec.yaml correctly then\n<code> flutter clean &amp;&amp; flutter pub get</code></p>\n"}],"owner":{"account_id":14682697,"reputation":121,"user_id":10603682,"display_name":"Jel Oly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22181,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":4,"score":12,"last_activity_date":1691153819,"creation_date":1584202186,"question_id":60684730,"body_markdown":"I build new Project in android studio Java language and Run &#39;app&#39; failed show error.\r\n\r\nI installed New program and installed new windows but Run failed show error.\r\n\r\n    Executing tasks: [:app:assembleDebug] in project D:\\File\\Android Project\\MyApplication\r\n    \r\n    &gt; Task :app:preBuild UP-TO-DATE\r\n    &gt; Task :app:preDebugBuild UP-TO-DATE\r\n    &gt; Task :app:generateDebugBuildConfig UP-TO-DATE\r\n    &gt; Task :app:javaPreCompileDebug UP-TO-DATE\r\n    &gt; Task :app:compileDebugAidl NO-SOURCE\r\n    &gt; Task :app:compileDebugRenderscript NO-SOURCE\r\n    &gt; Task :app:mainApkListPersistenceDebug UP-TO-DATE\r\n    &gt; Task :app:generateDebugResValues UP-TO-DATE\r\n    &gt; Task :app:generateDebugResources UP-TO-DATE\r\n    &gt; Task :app:mergeDebugResources UP-TO-DATE\r\n    &gt; Task :app:createDebugCompatibleScreenManifests UP-TO-DATE\r\n    &gt; Task :app:extractDeepLinksDebug UP-TO-DATE\r\n    &gt; Task :app:processDebugManifest UP-TO-DATE\r\n    &gt; Task :app:processDebugResources UP-TO-DATE\r\n    &gt; Task :app:compileDebugJavaWithJavac UP-TO-DATE\r\n    &gt; Task :app:compileDebugSources UP-TO-DATE\r\n    &gt; Task :app:mergeDebugShaders UP-TO-DATE\r\n    &gt; Task :app:compileDebugShaders UP-TO-DATE\r\n    &gt; Task :app:generateDebugAssets UP-TO-DATE\r\n    &gt; Task :app:mergeDebugAssets UP-TO-DATE\r\n    &gt; Task :app:processDebugJavaRes NO-SOURCE\r\n    &gt; Task :app:dexBuilderDebug\r\n    &gt; Task :app:mergeDebugJavaResource FAILED\r\n    \r\n    FAILURE: Build failed with an exception.\r\n\r\n    * What went wrong:\r\n    Execution failed for task &#39;:app:mergeDebugJavaResource&#39;.\r\n    &gt; A failure occurred while executing com.android.build.gradle.internal.tasks.Workers$ActionFacade\r\n       &gt; com.google.common.base.VerifyException (no error message)\r\n    \r\n    * Try:\r\n    Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n    \r\n    * Get more help at https://help.gradle.org\r\n    \r\n    BUILD FAILED in 6s\r\n    15 actionable tasks: 2 executed, 13 up-to-date\r\n\r\n\r\n","title":"Error: Execution failed for task &#39;:app:mergeDebugJavaResource&#39;","body":"<p>I build new Project in android studio Java language and Run 'app' failed show error.</p>\n\n<p>I installed New program and installed new windows but Run failed show error.</p>\n\n<pre><code>Executing tasks: [:app:assembleDebug] in project D:\\File\\Android Project\\MyApplication\n\n&gt; Task :app:preBuild UP-TO-DATE\n&gt; Task :app:preDebugBuild UP-TO-DATE\n&gt; Task :app:generateDebugBuildConfig UP-TO-DATE\n&gt; Task :app:javaPreCompileDebug UP-TO-DATE\n&gt; Task :app:compileDebugAidl NO-SOURCE\n&gt; Task :app:compileDebugRenderscript NO-SOURCE\n&gt; Task :app:mainApkListPersistenceDebug UP-TO-DATE\n&gt; Task :app:generateDebugResValues UP-TO-DATE\n&gt; Task :app:generateDebugResources UP-TO-DATE\n&gt; Task :app:mergeDebugResources UP-TO-DATE\n&gt; Task :app:createDebugCompatibleScreenManifests UP-TO-DATE\n&gt; Task :app:extractDeepLinksDebug UP-TO-DATE\n&gt; Task :app:processDebugManifest UP-TO-DATE\n&gt; Task :app:processDebugResources UP-TO-DATE\n&gt; Task :app:compileDebugJavaWithJavac UP-TO-DATE\n&gt; Task :app:compileDebugSources UP-TO-DATE\n&gt; Task :app:mergeDebugShaders UP-TO-DATE\n&gt; Task :app:compileDebugShaders UP-TO-DATE\n&gt; Task :app:generateDebugAssets UP-TO-DATE\n&gt; Task :app:mergeDebugAssets UP-TO-DATE\n&gt; Task :app:processDebugJavaRes NO-SOURCE\n&gt; Task :app:dexBuilderDebug\n&gt; Task :app:mergeDebugJavaResource FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:mergeDebugJavaResource'.\n&gt; A failure occurred while executing com.android.build.gradle.internal.tasks.Workers$ActionFacade\n   &gt; com.google.common.base.VerifyException (no error message)\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 6s\n15 actionable tasks: 2 executed, 13 up-to-date\n</code></pre>\n"},{"tags":["java","linked-list"],"comments":[{"owner":{"account_id":2524075,"reputation":36076,"user_id":2193767,"accept_rate":78,"display_name":"TheLostMind"},"score":0,"creation_date":1401348022,"post_id":23927887,"comment_id":36851665,"body_markdown":"http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html. Check Oracle documentation.","body":"<a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html</a>. Check Oracle documentation."},{"owner":{"account_id":1593181,"reputation":5129,"user_id":1476062,"display_name":"Dennis Meng"},"score":2,"creation_date":1401348115,"post_id":23927887,"comment_id":36851711,"body_markdown":"Do you mind if I change the title to &quot;What is the difference between getFirst() and peekFirst() in Java&#39;s LinkedList?&quot; What you have is a little vague (it sounds like you&#39;re talking about all of the methods in the title, and it&#39;s not clear from the title exactly what you&#39;re asking about them)","body":"Do you mind if I change the title to &quot;What is the difference between getFirst() and peekFirst() in Java&#39;s LinkedList?&quot; What you have is a little vague (it sounds like you&#39;re talking about all of the methods in the title, and it&#39;s not clear from the title exactly what you&#39;re asking about them)"},{"owner":{"display_name":"user2031271"},"score":0,"creation_date":1401348314,"post_id":23927887,"comment_id":36851833,"body_markdown":"@DennisMeng Sure, you can do that.","body":"@DennisMeng Sure, you can do that."},{"owner":{"account_id":37136,"reputation":57822,"user_id":106104,"accept_rate":62,"display_name":"user253751"},"score":1,"creation_date":1401349967,"post_id":23927887,"comment_id":36852681,"body_markdown":"This question is really about `Deque` (which `LinkedList` implements) and not `LinkedList` directly.","body":"This question is really about <code>Deque</code> (which <code>LinkedList</code> implements) and not <code>LinkedList</code> directly."}],"answers":[{"comments":[{"owner":{"account_id":3364813,"reputation":1070,"user_id":2825720,"accept_rate":57,"display_name":"sbhatla"},"score":0,"creation_date":1610942206,"post_id":23928024,"comment_id":116282590,"body_markdown":"Wouldn&#39;t we still need to check for null in the result? Instead of doing this before the call, we&#39;re doing this after the call.","body":"Wouldn&#39;t we still need to check for null in the result? Instead of doing this before the call, we&#39;re doing this after the call."}],"tags":[],"owner":{"account_id":134022,"reputation":717193,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"comment_count":1,"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1401349091,"creation_date":1401348313,"answer_id":23928024,"question_id":23927887,"body_markdown":"Java introduced `LinkedList` in version 1.2. This is when the `getFirst` method has been provided. This message threw `NoSuchElementException` when the list is empty, causing programmers to do an extra check before the call:\r\n\r\n    Element e = null;\r\n    if (!myList.isEmpty()) {\r\n         e = myList.getFirst();\r\n    }\r\n\r\nThis was an inconvenience, which has been fixed in Java version 1.6 by adding the `peekFirst` method and other methods of the `Dequeue&lt;T&gt;` interface.","title":"What is the difference between getFirst() and peekFirst() in Java&#39;s LinkedList?","body":"<p>Java introduced <code>LinkedList</code> in version 1.2. This is when the <code>getFirst</code> method has been provided. This message threw <code>NoSuchElementException</code> when the list is empty, causing programmers to do an extra check before the call:</p>\n\n<pre><code>Element e = null;\nif (!myList.isEmpty()) {\n     e = myList.getFirst();\n}\n</code></pre>\n\n<p>This was an inconvenience, which has been fixed in Java version 1.6 by adding the <code>peekFirst</code> method and other methods of the <code>Dequeue&lt;T&gt;</code> interface.</p>\n"},{"tags":[],"owner":{"account_id":335028,"reputation":1001,"user_id":661859,"accept_rate":75,"display_name":"Nitul"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1401349108,"creation_date":1401349108,"answer_id":23928228,"question_id":23927887,"body_markdown":"Only one reson:\r\n1) It reduces the Exception Handling while development\r\n\r\n     public E peekFirst() {\r\n         if (size==0)\r\n            return null;\r\n\r\n         return getFirst();\r\n     }\r\n\r\nAbove is the implementation of peekFirst(), it just check the size ZERO, and returns NULL instead of throwing Exception\r\n","title":"What is the difference between getFirst() and peekFirst() in Java&#39;s LinkedList?","body":"<p>Only one reson:\n1) It reduces the Exception Handling while development</p>\n\n<pre><code> public E peekFirst() {\n     if (size==0)\n        return null;\n\n     return getFirst();\n }\n</code></pre>\n\n<p>Above is the implementation of peekFirst(), it just check the size ZERO, and returns NULL instead of throwing Exception</p>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1401349495,"creation_date":1401349495,"answer_id":23928325,"question_id":23927887,"body_markdown":"LinkedList is a Deque. Deque API defines methods which exist in two forms: one throws an exception if the operation fails, the other returns a special value (either null or false, depending on the operation).","title":"What is the difference between getFirst() and peekFirst() in Java&#39;s LinkedList?","body":"<p>LinkedList is a Deque. Deque API defines methods which exist in two forms: one throws an exception if the operation fails, the other returns a special value (either null or false, depending on the operation).</p>\n"},{"tags":[],"owner":{"account_id":28872167,"reputation":21,"user_id":22113475,"display_name":"Shraboni Sinha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691153460,"creation_date":1690867492,"answer_id":76808724,"question_id":23927887,"body_markdown":"If your `LinkedList` has data then there is no difference, but if your `LinkedList` is empty then the `peekFirst()` method returns null. It doesn&#39;t throw any errors or exceptions but `getFirst()` method throws an exception if the list is empty. ","title":"What is the difference between getFirst() and peekFirst() in Java&#39;s LinkedList?","body":"<p>If your <code>LinkedList</code> has data then there is no difference, but if your <code>LinkedList</code> is empty then the <code>peekFirst()</code> method returns null. It doesn't throw any errors or exceptions but <code>getFirst()</code> method throws an exception if the list is empty.</p>\n"}],"owner":{"display_name":"user2031271"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11204,"favorite_count":0,"down_vote_count":1,"up_vote_count":19,"accepted_answer_id":23928024,"answer_count":4,"score":18,"last_activity_date":1691153460,"creation_date":1401347821,"question_id":23927887,"body_markdown":"In Java&#39;s LinkedList implementation, I see two methods which seems to me like having identical functions.\r\n\r\n`getFirst()` --Returns the first element in this list.\r\n\r\n`peekFirst()` --Retrieves, but does not remove, the first element of this list, or returns null if this list is empty.\r\n\r\nBoth of them get the pointer to the First element in the LinkedList without making any changes to it. Then, what&#39;s the difference ?\r\n\r\nThe only difference I see is that `peekFirst` returns `null` if the list is empty and `getFirst` throws a `NoSuchElementException` if the list is empty. What was the use of such a design pattern ?\r\n","title":"What is the difference between getFirst() and peekFirst() in Java&#39;s LinkedList?","body":"<p>In Java's LinkedList implementation, I see two methods which seems to me like having identical functions.</p>\n\n<p><code>getFirst()</code> --Returns the first element in this list.</p>\n\n<p><code>peekFirst()</code> --Retrieves, but does not remove, the first element of this list, or returns null if this list is empty.</p>\n\n<p>Both of them get the pointer to the First element in the LinkedList without making any changes to it. Then, what's the difference ?</p>\n\n<p>The only difference I see is that <code>peekFirst</code> returns <code>null</code> if the list is empty and <code>getFirst</code> throws a <code>NoSuchElementException</code> if the list is empty. What was the use of such a design pattern ?</p>\n"},{"tags":["java","spring-boot","maven","oauth","microservices"],"comments":[{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":0,"creation_date":1678468672,"post_id":75698906,"comment_id":133544606,"body_markdown":"What&#39;s the _actual_ error message? Where is the dependency attempting to be downloaded from?","body":"What&#39;s the <i>actual</i> error message? Where is the dependency attempting to be downloaded from?"}],"answers":[{"tags":[],"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1678469574,"creation_date":1678469574,"answer_id":75699298,"question_id":75698906,"body_markdown":"It should be there:\r\n\r\nhttps://mvnrepository.com/artifact/com.okta.spring/okta-spring-boot-starter\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.okta.spring&lt;/groupId&gt;\r\n            &lt;artifactId&gt;okta-spring-boot-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nVersion 3.0.3 is most recent.","title":"I am adding okta dependency in pom.xml file but the dependency is not resolving","body":"<p>It should be there:</p>\n<p><a href=\"https://mvnrepository.com/artifact/com.okta.spring/okta-spring-boot-starter\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/com.okta.spring/okta-spring-boot-starter</a></p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.okta.spring&lt;/groupId&gt;\n        &lt;artifactId&gt;okta-spring-boot-starter&lt;/artifactId&gt;\n        &lt;version&gt;3.0.3&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>Version 3.0.3 is most recent.</p>\n"},{"tags":[],"owner":{"account_id":29080631,"reputation":1,"user_id":22276754,"display_name":"Prasad Poojar"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691153325,"creation_date":1690783010,"answer_id":76800983,"question_id":75698906,"body_markdown":"Remove the project from the IDE and add once again. It worked for me.\r\n","title":"I am adding okta dependency in pom.xml file but the dependency is not resolving","body":"<p>Remove the project from the IDE and add once again. It worked for me.</p>\n"}],"owner":{"account_id":27985311,"reputation":11,"user_id":21372288,"display_name":"Sanket Chaudhari"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":227,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1691153325,"creation_date":1678467090,"question_id":75698906,"body_markdown":"I wanted to OAuth my microservice project, but the okta is not resolving.\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.okta.spring&lt;/groupId&gt;\r\n    &lt;artifactId&gt;okta-spring-boot-starter&lt;/artifactId&gt;\r\n    &lt;version&gt;2.1.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nShowing error: Dependency &#39;com.okta.spring:okta-spring-boot-starter:2.1.1&#39; not found. My spring boot version is 2.7.9. I&#39;m still not able to resolve the issue, can anyone suggest?\r\n\r\n\r\n\r\n","title":"I am adding okta dependency in pom.xml file but the dependency is not resolving","body":"<p>I wanted to OAuth my microservice project, but the okta is not resolving.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.okta.spring&lt;/groupId&gt;\n    &lt;artifactId&gt;okta-spring-boot-starter&lt;/artifactId&gt;\n    &lt;version&gt;2.1.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Showing error: Dependency 'com.okta.spring:okta-spring-boot-starter:2.1.1' not found. My spring boot version is 2.7.9. I'm still not able to resolve the issue, can anyone suggest?</p>\n"},{"tags":["java","eclipse","selenium-webdriver","automation","bdd"],"answers":[{"tags":[],"owner":{"account_id":29133857,"reputation":1,"user_id":22318476,"display_name":"yashwanth veldandi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691153249,"creation_date":1690871042,"answer_id":76808973,"question_id":76807867,"body_markdown":"Try this code, here I have kept my chrome driver inside my working directory.\r\n```java\r\npublic static WebDriver driver;\r\nSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;./drivers/chromedriver.exe&quot;);\r\nChromeOptions options = new ChromeOptions();\r\noptions.addArguments(new String[] { &quot;--ignore-certificate-errors&quot; });\r\ndriver = (WebDriver)new ChromeDriver(options);\r\ndriver.get(url);\r\n```\r\n","title":"Error: Could not start a new session in Selenium","body":"<p>Try this code, here I have kept my chrome driver inside my working directory.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static WebDriver driver;\nSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;./drivers/chromedriver.exe&quot;);\nChromeOptions options = new ChromeOptions();\noptions.addArguments(new String[] { &quot;--ignore-certificate-errors&quot; });\ndriver = (WebDriver)new ChromeDriver(options);\ndriver.get(url);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10388358,"reputation":1,"user_id":7660549,"display_name":"Heshan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690874052,"creation_date":1690874052,"answer_id":76809271,"question_id":76807867,"body_markdown":"&quot;Driver server process died prematurely&quot; indicates that there was an issue with the ChromeDriver server process. This typically happens when the ChromeDriver executable is not able to start or communicate with the Chrome browser properly\r\n\r\n 1. the driver version and the browser version should be matched\r\n 2. ChromeDriver executable permissions\r\n 3. Invalid ChromeDriver path\r\n\r\nThe path should point to the location of the ChromeDriver executable, not the Chrome browser itself\r\n\r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;/Users/imtiyaz/Documents/chromedriver&quot;);\r\n    WebDriver driver = new ChromeDriver();\r\n    driver.get(&quot;https://rahulshettyacademy.com/seleniumPractise/#/&quot;);\r\n\r\n","title":"Error: Could not start a new session in Selenium","body":"<p>&quot;Driver server process died prematurely&quot; indicates that there was an issue with the ChromeDriver server process. This typically happens when the ChromeDriver executable is not able to start or communicate with the Chrome browser properly</p>\n<ol>\n<li>the driver version and the browser version should be matched</li>\n<li>ChromeDriver executable permissions</li>\n<li>Invalid ChromeDriver path</li>\n</ol>\n<p>The path should point to the location of the ChromeDriver executable, not the Chrome browser itself</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;/Users/imtiyaz/Documents/chromedriver&quot;);\nWebDriver driver = new ChromeDriver();\ndriver.get(&quot;https://rahulshettyacademy.com/seleniumPractise/#/&quot;);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":13744424,"reputation":13,"user_id":9918582,"display_name":"Immy110"},"score":0,"creation_date":1690901269,"post_id":76809917,"comment_id":135415960,"body_markdown":"Thank you. So I updated my Selenium version to 4.11.0 in my pom.xml file and also used your simplified code to invoke ChromeDriver. \n\nThis time I am getting following error:\n\nWARNING: Unable to find an exact match for CDP version 115, so returning the closest version found: 114\nFAILED: runScenario(&quot;Search Experience for product search in both home and Offers page&quot;, &quot;Search and Place the order for Products&quot;)\n        Runs Cucumber Scenarios\njava.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.WebDriver.findElement(org.openqa.selenium.By)&quot; because &quot;this.driver&quot; is null","body":"Thank you. So I updated my Selenium version to 4.11.0 in my pom.xml file and also used your simplified code to invoke ChromeDriver.   This time I am getting following error:  WARNING: Unable to find an exact match for CDP version 115, so returning the closest version found: 114 FAILED: runScenario(&quot;Search Experience for product search in both home and Offers page&quot;, &quot;Search and Place the order for Products&quot;)         Runs Cucumber Scenarios java.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.WebDriver.findElement(org.openqa.seleni&zwnj;&#8203;um.By)&quot; because &quot;this.driver&quot; is null"},{"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1690901829,"post_id":76809917,"comment_id":135416074,"body_markdown":"You can ignore this warning `WARNING: Unable to find an exact match for CDP version 115, so returning the closest version found: 114`. Your original issue seems to have resolved, browser has launched successfully. The `NullPointerException` is a different error, something in your code. I suggest create a new question for `NullPointerException` with relevant code and error trace, so that wider community can help you. You can close this question if it has resolved the original problem.  [What should I do when someone answers my question?](https://stackoverflow.com/help/someone-answers)","body":"You can ignore this warning <code>WARNING: Unable to find an exact match for CDP version 115, so returning the closest version found: 114</code>. Your original issue seems to have resolved, browser has launched successfully. The <code>NullPointerException</code> is a different error, something in your code. I suggest create a new question for <code>NullPointerException</code> with relevant code and error trace, so that wider community can help you. You can close this question if it has resolved the original problem.  <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}],"tags":[],"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690881695,"creation_date":1690879363,"answer_id":76809917,"question_id":76807867,"body_markdown":"Selenium `v4.11.0` has been released yesterday(31-Jul23). This version can do the driver management automatically even for chrome browser `v115`, without setting the PATH(`System.setProperty`).\r\n\r\n**Solution:** Just upgrade to Selenium `v4.11.0` and use the simple code as below:\r\n````\r\npublic static void main(String[] args)  {\r\n\r\n\tWebDriver driver = new ChromeDriver();\r\n\tdriver.manage().window().maximize();\r\n\tdriver.get(&quot;https://rahulshettyacademy.com/seleniumPractise/#/&quot;);\r\n\r\n}\r\n````\r\n\r\nIf you want to use `ChromeForTesting` browser for specific reason, then download the `v115` driver(`chromedriver.exe`) and browser(`chrome.exe`) from the following link - https://googlechromelabs.github.io/chrome-for-testing/\r\n\r\nAfter downloading, use the below code:\r\n````\r\npublic static void main(String[] args) {\r\n    // TODO Auto-generated method stub\r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Backup\\\\Selenium jars\\\\drivers\\\\chromedriver-win64\\\\chromedriver.exe&quot;); //115 chromedriver.exe\r\n    ChromeOptions options = new ChromeOptions();\r\n    options.setBinary(&quot;C:\\\\Backup\\\\Selenium jars\\\\browsers\\\\chrome-win64\\\\chrome.exe&quot;); //115 chrome.exe\r\n    WebDriver driver = new ChromeDriver(options);\r\n    driver.get(&quot;https://www.google.com&quot;);        \r\n    System.out.println(driver.getTitle());\r\n}\r\n````\r\n\r\n**Result:**\r\n[![enter image description here][1]][1]\r\n\r\n\r\n**New &quot;Chrome For testing&quot; browser logo is slightly different(See below)**: Left side is regular Chrome browser and right side is new Chrome For Testing browser.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HeWCY.png\r\n  [2]: https://i.stack.imgur.com/TXTTT.png","title":"Error: Could not start a new session in Selenium","body":"<p>Selenium <code>v4.11.0</code> has been released yesterday(31-Jul23). This version can do the driver management automatically even for chrome browser <code>v115</code>, without setting the PATH(<code>System.setProperty</code>).</p>\n<p><strong>Solution:</strong> Just upgrade to Selenium <code>v4.11.0</code> and use the simple code as below:</p>\n<pre><code>public static void main(String[] args)  {\n\n    WebDriver driver = new ChromeDriver();\n    driver.manage().window().maximize();\n    driver.get(&quot;https://rahulshettyacademy.com/seleniumPractise/#/&quot;);\n\n}\n</code></pre>\n<p>If you want to use <code>ChromeForTesting</code> browser for specific reason, then download the <code>v115</code> driver(<code>chromedriver.exe</code>) and browser(<code>chrome.exe</code>) from the following link - <a href=\"https://googlechromelabs.github.io/chrome-for-testing/\" rel=\"nofollow noreferrer\">https://googlechromelabs.github.io/chrome-for-testing/</a></p>\n<p>After downloading, use the below code:</p>\n<pre><code>public static void main(String[] args) {\n    // TODO Auto-generated method stub\n    System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Backup\\\\Selenium jars\\\\drivers\\\\chromedriver-win64\\\\chromedriver.exe&quot;); //115 chromedriver.exe\n    ChromeOptions options = new ChromeOptions();\n    options.setBinary(&quot;C:\\\\Backup\\\\Selenium jars\\\\browsers\\\\chrome-win64\\\\chrome.exe&quot;); //115 chrome.exe\n    WebDriver driver = new ChromeDriver(options);\n    driver.get(&quot;https://www.google.com&quot;);        \n    System.out.println(driver.getTitle());\n}\n</code></pre>\n<p><strong>Result:</strong>\n<a href=\"https://i.stack.imgur.com/HeWCY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HeWCY.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>New &quot;Chrome For testing&quot; browser logo is slightly different(See below)</strong>: Left side is regular Chrome browser and right side is new Chrome For Testing browser.</p>\n<p><a href=\"https://i.stack.imgur.com/TXTTT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TXTTT.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1690918037,"post_id":76812852,"comment_id":135419160,"body_markdown":"No, you should create a brand new question, not ask another question in the old question.","body":"No, you should create a brand new question, not ask another question in the old question."}],"tags":[],"owner":{"account_id":13744424,"reputation":13,"user_id":9918582,"display_name":"Immy110"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690901397,"creation_date":1690901397,"answer_id":76812852,"question_id":76807867,"body_markdown":"I updated my Selenium version to 4.11.0 in my pom.xml file and also used your simplified code to invoke ChromeDriver.\r\n\r\nThis time I am getting following error: \r\n\r\n```\r\nWARNING: Unable to find an exact match for CDP version 115, so returning the closest version found: 114\r\nFAILED: runScenario(&quot;Search Experience for product search in both home and Offers page&quot;, &quot;Search and Place the order for Products&quot;)\r\n        Runs Cucumber Scenarios\r\njava.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.WebDriver.findElement(org.openqa.selenium.By)&quot; because &quot;this.driver&quot; is null\r\n```\r\n\r\n\r\nThis is my code\r\n```\r\npackage stepDefinitions;\r\n\r\nimport java.util.Iterator;\r\nimport java.util.Set;\r\n\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.testng.Assert;\r\n\r\nimport io.cucumber.java.en.Given;\r\nimport io.cucumber.java.en.Then;\r\nimport io.cucumber.java.en.When;\r\n\r\npublic class GreenKartStepDefinition {\r\n\tpublic WebDriver driver;\r\n\tpublic String landingPageProductName;\r\n\tpublic String offerPageProductName;\r\n\t\r\n\t@Given(&quot;User is on GreenCart Landing page&quot;)\r\n\tpublic void user_is_on_green_Cart_landing_page() {\r\n\t    \r\n\t\t WebDriver driver = new ChromeDriver();\r\n\t\t    driver.manage().window().maximize();\r\n\t\t    driver.get(&quot;https://rahulshettyacademy.com/seleniumPractise/#/&quot;);\r\n\t\t\r\n\t\r\n\t\t\r\n\t}\r\n\t@When(&quot;user searched with Shortname {string} and extracted actual name of product&quot;)\r\n\tpublic void user_searched_with_shortname_and_extracted_actual_name_of_product(String shortName) {\r\n\t\r\n\tdriver.findElement(By.xpath(&quot;//input[@type=&#39;search&#39;]&quot;)).sendKeys(shortName);\r\n\tString landingPageproductName = driver.findElement(By.cssSelector(&quot;h4.product-name&quot;)).getText().split(&quot;-&quot;)[0].trim();\r\n    System.out.println(landingPageproductName +&quot;is extracted from Home page&quot;);\r\n\t\r\n\t}\r\n\t\r\n\t@Then(&quot;user searched for {string} shortname in offers page to check if product exists with same name &quot;)\r\n\tpublic void user_searched_for_same_shortname_in_offers_page_to_check_if_product_exists(String shortName) throws InterruptedException {\r\n\t    // Write code here that turns the phrase above into concrete actions\r\n\t driver.findElement(By.linkText(&quot;Top Deals&quot;)).click();\r\n\t Set&lt;String&gt; s1 = driver.getWindowHandles(); //So when we call this method &#39;getWndowHandles&#39;, Parent window is there &amp; chidd  window is there - will fall in this s1 object\r\n\t Iterator&lt;String&gt; i1=s1.iterator(); //The 2 windwows We are storing in 1 set collection type - in 0th index you have parent window, in 1st omdex you have child window\r\n\t //To retrieve those items from the &#39;Set&#39; collection, I&#39;ll use the iterator method\r\n\t //&#39;i1&#39; is responsibile for retrieving\r\n\t String parentWindow = i1.next(); //This will call the 0th index (parent window id)\r\n\t String childWindow = i1.next(); //When we call i1.next again, will go 1 level up and call the child window (1st index)\r\n\t driver.switchTo().window(childWindow);\r\n\t driver.findElement(By.xpath(&quot;//input[@type=&#39;search&#39;&quot;)).sendKeys(shortName);\r\n\t \r\n\t Thread.sleep(2000);\r\n\t offerPageProductName = driver.findElement(By.cssSelector(&quot;tr td:nth-child(1)&quot;)).getText();\r\n\r\n\r\n\t \r\n\t}\r\n\t\r\n\t@Then(&quot;Validate product name in offers page matches with Landing Page&quot;)\r\n\t public void validate_product_name_in_Offers_page()\r\n\t {\r\n\t    Assert.assertEquals(offerPageProductName, landingPageProductName);\r\n     }\r\n\t\t\r\n\r\n}\r\n```","title":"Error: Could not start a new session in Selenium","body":"<p>I updated my Selenium version to 4.11.0 in my pom.xml file and also used your simplified code to invoke ChromeDriver.</p>\n<p>This time I am getting following error:</p>\n<pre><code>WARNING: Unable to find an exact match for CDP version 115, so returning the closest version found: 114\nFAILED: runScenario(&quot;Search Experience for product search in both home and Offers page&quot;, &quot;Search and Place the order for Products&quot;)\n        Runs Cucumber Scenarios\njava.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.WebDriver.findElement(org.openqa.selenium.By)&quot; because &quot;this.driver&quot; is null\n</code></pre>\n<p>This is my code</p>\n<pre><code>package stepDefinitions;\n\nimport java.util.Iterator;\nimport java.util.Set;\n\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.testng.Assert;\n\nimport io.cucumber.java.en.Given;\nimport io.cucumber.java.en.Then;\nimport io.cucumber.java.en.When;\n\npublic class GreenKartStepDefinition {\n    public WebDriver driver;\n    public String landingPageProductName;\n    public String offerPageProductName;\n    \n    @Given(&quot;User is on GreenCart Landing page&quot;)\n    public void user_is_on_green_Cart_landing_page() {\n        \n         WebDriver driver = new ChromeDriver();\n            driver.manage().window().maximize();\n            driver.get(&quot;https://rahulshettyacademy.com/seleniumPractise/#/&quot;);\n        \n    \n        \n    }\n    @When(&quot;user searched with Shortname {string} and extracted actual name of product&quot;)\n    public void user_searched_with_shortname_and_extracted_actual_name_of_product(String shortName) {\n    \n    driver.findElement(By.xpath(&quot;//input[@type='search']&quot;)).sendKeys(shortName);\n    String landingPageproductName = driver.findElement(By.cssSelector(&quot;h4.product-name&quot;)).getText().split(&quot;-&quot;)[0].trim();\n    System.out.println(landingPageproductName +&quot;is extracted from Home page&quot;);\n    \n    }\n    \n    @Then(&quot;user searched for {string} shortname in offers page to check if product exists with same name &quot;)\n    public void user_searched_for_same_shortname_in_offers_page_to_check_if_product_exists(String shortName) throws InterruptedException {\n        // Write code here that turns the phrase above into concrete actions\n     driver.findElement(By.linkText(&quot;Top Deals&quot;)).click();\n     Set&lt;String&gt; s1 = driver.getWindowHandles(); //So when we call this method 'getWndowHandles', Parent window is there &amp; chidd  window is there - will fall in this s1 object\n     Iterator&lt;String&gt; i1=s1.iterator(); //The 2 windwows We are storing in 1 set collection type - in 0th index you have parent window, in 1st omdex you have child window\n     //To retrieve those items from the 'Set' collection, I'll use the iterator method\n     //'i1' is responsibile for retrieving\n     String parentWindow = i1.next(); //This will call the 0th index (parent window id)\n     String childWindow = i1.next(); //When we call i1.next again, will go 1 level up and call the child window (1st index)\n     driver.switchTo().window(childWindow);\n     driver.findElement(By.xpath(&quot;//input[@type='search'&quot;)).sendKeys(shortName);\n     \n     Thread.sleep(2000);\n     offerPageProductName = driver.findElement(By.cssSelector(&quot;tr td:nth-child(1)&quot;)).getText();\n\n\n     \n    }\n    \n    @Then(&quot;Validate product name in offers page matches with Landing Page&quot;)\n     public void validate_product_name_in_Offers_page()\n     {\n        Assert.assertEquals(offerPageProductName, landingPageProductName);\n     }\n        \n\n}\n</code></pre>\n"}],"owner":{"account_id":13744424,"reputation":13,"user_id":9918582,"display_name":"Immy110"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1423,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1691153249,"creation_date":1690850578,"question_id":76807867,"body_markdown":"I seem to be getting the following error in my Eclipse when running my testcase via my Step Definition in my Automation Framework:\r\n\r\n```\r\n    org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure. \r\nHost info: host: &#39;192.168.1.104&#39;, ip: &#39;2a01:4b00:9f00:8d00:f548:778e:6ba3:875d%en0&#39;\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:549)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:227)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:154)\r\n\tat org.openqa.selenium.chromium.ChromiumDriver.&lt;init&gt;(ChromiumDriver.java:107)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:87)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:82)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:50)\r\n\tat stepDefinitions.GreenKartStepDefinition.user_is_on_green_Cart_landing_page(GreenKartStepDefinition.java:24)\r\n\tat ✽.User is on GreenCart Landing page(file:///Users/imtiyaz/Downloads/WebDriverAutomationProject%202/CucumberFramework/src/test/java/features/searchProduct.feature:5)\r\nCaused by: org.openqa.selenium.WebDriverException: Driver server process died prematurely.\r\nBuild info: version: &#39;4.10.0&#39;, revision: &#39;c14d967899&#39;\r\n```\r\n\r\nI did download &#39;Chrome for Testing&#39; from https://chromedriver.chromium.org/downloads as I am using Chrome version 115.0.5790.102.\r\n\r\nI set it in my code as follows:\r\n\r\n```\r\nSystem.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;/Users/imtiyaz/Documents/Google Chrome for Testing&quot; );\r\n\t\tdriver = new ChromeDriver();\r\n\t\tdriver.get(&quot;https://rahulshettyacademy.com/seleniumPractise/#/&quot;);\r\n```\r\n\r\nAny Ideas what I&#39;m doing wrong?","title":"Error: Could not start a new session in Selenium","body":"<p>I seem to be getting the following error in my Eclipse when running my testcase via my Step Definition in my Automation Framework:</p>\n<pre><code>    org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure. \nHost info: host: '192.168.1.104', ip: '2a01:4b00:9f00:8d00:f548:778e:6ba3:875d%en0'\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:549)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:227)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:154)\n    at org.openqa.selenium.chromium.ChromiumDriver.&lt;init&gt;(ChromiumDriver.java:107)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:87)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:82)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:50)\n    at stepDefinitions.GreenKartStepDefinition.user_is_on_green_Cart_landing_page(GreenKartStepDefinition.java:24)\n    at ✽.User is on GreenCart Landing page(file:///Users/imtiyaz/Downloads/WebDriverAutomationProject%202/CucumberFramework/src/test/java/features/searchProduct.feature:5)\nCaused by: org.openqa.selenium.WebDriverException: Driver server process died prematurely.\nBuild info: version: '4.10.0', revision: 'c14d967899'\n</code></pre>\n<p>I did download 'Chrome for Testing' from <a href=\"https://chromedriver.chromium.org/downloads\" rel=\"nofollow noreferrer\">https://chromedriver.chromium.org/downloads</a> as I am using Chrome version 115.0.5790.102.</p>\n<p>I set it in my code as follows:</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;/Users/imtiyaz/Documents/Google Chrome for Testing&quot; );\n        driver = new ChromeDriver();\n        driver.get(&quot;https://rahulshettyacademy.com/seleniumPractise/#/&quot;);\n</code></pre>\n<p>Any Ideas what I'm doing wrong?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":7251728,"reputation":199,"user_id":5531756,"accept_rate":67,"display_name":"Md. Ikramul Murad"},"score":0,"creation_date":1611285053,"post_id":60960189,"comment_id":116407903,"body_markdown":"Is this problem solved already?","body":"Is this problem solved already?"}],"answers":[{"comments":[{"owner":{"account_id":14310867,"reputation":46,"user_id":10337197,"display_name":"Mahmood Shahsavari"},"score":0,"creation_date":1585820767,"post_id":60960243,"comment_id":107899385,"body_markdown":"i dont call destroy() !! :)","body":"i dont call destroy() !! :)"},{"owner":{"account_id":1342401,"reputation":23303,"user_id":1283845,"accept_rate":65,"display_name":"BlackHatSamurai"},"score":0,"creation_date":1585844749,"post_id":60960243,"comment_id":107913084,"body_markdown":"Your stack trace says otherwise :) But it could be called via your SDK. Without seeing your code, it&#39;s hard to say.","body":"Your stack trace says otherwise :) But it could be called via your SDK. Without seeing your code, it&#39;s hard to say."}],"tags":[],"owner":{"account_id":1342401,"reputation":23303,"user_id":1283845,"accept_rate":65,"display_name":"BlackHatSamurai"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1585690361,"creation_date":1585690361,"answer_id":60960243,"question_id":60960189,"body_markdown":"It&#39;s not working because when you call `destroy()`, you are calling it on a null object. This is throwing an NPE can preventing you from connecting. ","title":"openVPN not working on Android 10 in androidstudio","body":"<p>It's not working because when you call <code>destroy()</code>, you are calling it on a null object. This is throwing an NPE can preventing you from connecting. </p>\n"},{"tags":[],"owner":{"account_id":9666921,"reputation":91,"user_id":7173141,"display_name":"Muhammad Mehroz Anjum"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602775147,"creation_date":1602772837,"answer_id":64374063,"question_id":60960189,"body_markdown":"This null pointer exception can be the result of process builder starting a new process by loading a binary from assets which is not supported by android.\r\n\r\nYou can confirm this case by using `e.printStackTrace();` in **`catch`** clause near **line 187 - line 188** of method `private void startOpenVPNThreadArgs(String[] argv)` which can be found in **OpenVPNThread.java**.\r\n\r\nIf you get error 13 in your log cat like this:\r\n\r\n    java.io.IOException: Cannot run program &quot;...&quot;: error=13, Permission denied\r\n\r\nThen you might be using older version of ics-openvpn. In this case please refer to this: \r\n\r\n* [My answer to: &quot;Creating VPN by using OpenVPN&quot;](https://stackoverflow.com/a/64373156/7173141)\r\n* [My comment on the &quot;What change in API 29&quot; issue in the  schwabe /\r\nics-openvpn GitHub repository](https://github.com/schwabe/ics-openvpn/issues/1179#issuecomment-709324457)\r\n\r\n\r\nI hope that this will resolve your issue.","title":"openVPN not working on Android 10 in androidstudio","body":"<p>This null pointer exception can be the result of process builder starting a new process by loading a binary from assets which is not supported by android.</p>\n<p>You can confirm this case by using <code>e.printStackTrace();</code> in <strong><code>catch</code></strong> clause near <strong>line 187 - line 188</strong> of method <code>private void startOpenVPNThreadArgs(String[] argv)</code> which can be found in <strong>OpenVPNThread.java</strong>.</p>\n<p>If you get error 13 in your log cat like this:</p>\n<pre><code>java.io.IOException: Cannot run program &quot;...&quot;: error=13, Permission denied\n</code></pre>\n<p>Then you might be using older version of ics-openvpn. In this case please refer to this:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/64373156/7173141\">My answer to: &quot;Creating VPN by using OpenVPN&quot;</a></li>\n<li><a href=\"https://github.com/schwabe/ics-openvpn/issues/1179#issuecomment-709324457\" rel=\"nofollow noreferrer\">My comment on the &quot;What change in API 29&quot; issue in the  schwabe /\nics-openvpn GitHub repository</a></li>\n</ul>\n<p>I hope that this will resolve your issue.</p>\n"},{"tags":[],"owner":{"account_id":18981447,"reputation":908,"user_id":13852758,"display_name":"Gulab Sagevadiya"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1626951840,"creation_date":1626951840,"answer_id":68483695,"question_id":60960189,"body_markdown":"```\r\n        android:extractNativeLibs=&quot;true&quot;\r\n        tools:replace=&quot;android:extractNativeLibs&quot;\r\n\r\n```\r\n\r\nAdd This Two Lines In Your Manifest Application\r\n","title":"openVPN not working on Android 10 in androidstudio","body":"<pre><code>        android:extractNativeLibs=&quot;true&quot;\n        tools:replace=&quot;android:extractNativeLibs&quot;\n\n</code></pre>\n<p>Add This Two Lines In Your Manifest Application</p>\n"},{"tags":[],"owner":{"account_id":23195002,"reputation":1,"user_id":17290781,"display_name":"Md Manna Mia"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691153095,"creation_date":1690819306,"answer_id":76805313,"question_id":60960189,"body_markdown":"Just add this line in your project&#39;s `gradle.properties` file:\r\n```none\r\nandroid.bundle.enableUncompressedNativeLibs=false\r\n```\r\n`.aab` file handles the `.so` files a bit differently, that&#39;s why VPN was not working in `.aab` bundle releases.","title":"openVPN not working on Android 10 in androidstudio","body":"<p>Just add this line in your project's <code>gradle.properties</code> file:</p>\n<pre class=\"lang-none prettyprint-override\"><code>android.bundle.enableUncompressedNativeLibs=false\n</code></pre>\n<p><code>.aab</code> file handles the <code>.so</code> files a bit differently, that's why VPN was not working in <code>.aab</code> bundle releases.</p>\n"}],"owner":{"account_id":14310867,"reputation":46,"user_id":10337197,"display_name":"Mahmood Shahsavari"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1813,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":4,"score":2,"last_activity_date":1691153095,"creation_date":1585690173,"question_id":60960189,"body_markdown":"hi i use this project in my app :\r\nhttps://github.com/schwabe/ics-openvpn\r\nand write a vpn application \r\nits work fine on all android version because on android 10 i give this error on logcat :\r\n```\r\n2020-04-01 01:47:56.914 2540-2839/com.vpnfree.approid I/OpenVPN: Starting openvpn\r\n2020-04-01 01:47:56.920 2540-2839/com.vpnfree.approid E/OpenVPN: OpenVPNThread Got java.lang.NullPointerException: Attempt to invoke virtual method &#39;void java.lang.Process.destroy()&#39; on a null object reference\r\n2020-04-01 01:47:56.920 2540-2839/com.packagename.approid E/level: LEVEL_NOTCONNECTED\r\n2020-04-01 01:47:56.959 2540-2839/com.packagename.approid I/OpenVPN: Exiting\r\n```","title":"openVPN not working on Android 10 in androidstudio","body":"<p>hi i use this project in my app :\n<a href=\"https://github.com/schwabe/ics-openvpn\" rel=\"nofollow noreferrer\">https://github.com/schwabe/ics-openvpn</a>\nand write a vpn application \nits work fine on all android version because on android 10 i give this error on logcat :</p>\n\n<pre><code>2020-04-01 01:47:56.914 2540-2839/com.vpnfree.approid I/OpenVPN: Starting openvpn\n2020-04-01 01:47:56.920 2540-2839/com.vpnfree.approid E/OpenVPN: OpenVPNThread Got java.lang.NullPointerException: Attempt to invoke virtual method 'void java.lang.Process.destroy()' on a null object reference\n2020-04-01 01:47:56.920 2540-2839/com.packagename.approid E/level: LEVEL_NOTCONNECTED\n2020-04-01 01:47:56.959 2540-2839/com.packagename.approid I/OpenVPN: Exiting\n</code></pre>\n"},{"tags":["java","server","cmis","opencmis","tomcat10"],"answers":[{"tags":[],"owner":{"account_id":11127314,"reputation":41,"user_id":8168392,"display_name":"pvyas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691153079,"creation_date":1691153079,"answer_id":76836043,"question_id":76776336,"body_markdown":"I resolved this issue by removing sun-jaxws.xml file from WEB-INF. I also removed WSContextListener from web.xml.\r\n\r\nThe issue was with CMISWebServicesServlet. Earlier in Open CMIS 0.13.0 CMISWebServicesServlet was extending WSServlet that&#39;s why we had this WS configuration in our WEB-INF. But now that is not needed in Open CMIS 1.1.0.\r\n","title":"handleRequest of CmisWebServicesServlet is not getting called and it is giving &#39;Cannot get CSRF manager!&#39; error","body":"<p>I resolved this issue by removing sun-jaxws.xml file from WEB-INF. I also removed WSContextListener from web.xml.</p>\n<p>The issue was with CMISWebServicesServlet. Earlier in Open CMIS 0.13.0 CMISWebServicesServlet was extending WSServlet that's why we had this WS configuration in our WEB-INF. But now that is not needed in Open CMIS 1.1.0.</p>\n"}],"owner":{"account_id":11127314,"reputation":41,"user_id":8168392,"display_name":"pvyas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691153079,"creation_date":1690428796,"question_id":76776336,"body_markdown":"Actually we have extended Open CMIS code for our product and recently we have upgraded our product for Tomcat 10. When we call RepositoryService it is giving below error:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    java.base/java.lang.Thread.run(Thread.java:833)\r\n    [21/07/23 01:11:23:023 IST] ERROR org.apache.chemistry.opencmis.server.impl.webservices.AbstractService: Cannot get CSRF manager!\r\n    org.apache.chemistry.opencmis.commons.exceptions.CmisRuntimeException: Cannot get CSRF manager!\r\n            at org.apache.chemistry.opencmis.server.impl.webservices.AbstractService.checkCsrfToken(AbstractService.java:166) ~[chemistry-opencmis-server-bindings-1.1.0.jar:1.1.0]\r\n            at org.apache.chemistry.opencmis.server.impl.webservices.AbstractService.getServiceForRepositoryInfo(AbstractService.java:187) ~[chemistry-opencmis-server-bindings-1.1.0.jar:1.1.0]\r\n            at org.apache.chemistry.opencmis.server.impl.webservices.RepositoryService.getRepositories(RepositoryService.java:65) ~[chemistry-opencmis-server-bindings-1.1.0.jar:1.1.0]\r\n            at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n            at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\r\n            at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n            at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nWhat I am suspecting is that handleRequest present in CmisWebServicesServlet is not getting called that&#39;s why we are not able to set attributes in request and it is giving CSRF related error. \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    public void handleRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException {\r\n            // set CMIS version and CSRF Manager\r\n            request.setAttribute(CMIS_VERSION, cmisVersion);\r\n            request.setAttribute(CSRF_MANAGER, csrfManager);\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nAnyone can tell me what could be cause for this error;\r\n\r\nThanks in advance!\r\n","title":"handleRequest of CmisWebServicesServlet is not getting called and it is giving &#39;Cannot get CSRF manager!&#39; error","body":"<p>Actually we have extended Open CMIS code for our product and recently we have upgraded our product for Tomcat 10. When we call RepositoryService it is giving below error:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>java.base/java.lang.Thread.run(Thread.java:833)\n[21/07/23 01:11:23:023 IST] ERROR org.apache.chemistry.opencmis.server.impl.webservices.AbstractService: Cannot get CSRF manager!\norg.apache.chemistry.opencmis.commons.exceptions.CmisRuntimeException: Cannot get CSRF manager!\n        at org.apache.chemistry.opencmis.server.impl.webservices.AbstractService.checkCsrfToken(AbstractService.java:166) ~[chemistry-opencmis-server-bindings-1.1.0.jar:1.1.0]\n        at org.apache.chemistry.opencmis.server.impl.webservices.AbstractService.getServiceForRepositoryInfo(AbstractService.java:187) ~[chemistry-opencmis-server-bindings-1.1.0.jar:1.1.0]\n        at org.apache.chemistry.opencmis.server.impl.webservices.RepositoryService.getRepositories(RepositoryService.java:65) ~[chemistry-opencmis-server-bindings-1.1.0.jar:1.1.0]\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n        at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>What I am suspecting is that handleRequest present in CmisWebServicesServlet is not getting called that's why we are not able to set attributes in request and it is giving CSRF related error.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>public void handleRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException {\n        // set CMIS version and CSRF Manager\n        request.setAttribute(CMIS_VERSION, cmisVersion);\n        request.setAttribute(CSRF_MANAGER, csrfManager);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Anyone can tell me what could be cause for this error;</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","mongodb","spring-boot","redis","rabbitmq"],"answers":[{"tags":[],"owner":{"account_id":27732825,"reputation":1,"user_id":21171001,"display_name":"Charan Kamarapu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691153010,"creation_date":1690747334,"answer_id":76799437,"question_id":76611756,"body_markdown":"Keploy doesn’t support the redis version you are using. Use 2.9.3 if possible. Also the Java-SDK of Keploy doesn’t work with Java 17 nor 19.","title":"Keploy integration with springboot application","body":"<p>Keploy doesn’t support the redis version you are using. Use 2.9.3 if possible. Also the Java-SDK of Keploy doesn’t work with Java 17 nor 19.</p>\n"}],"owner":{"account_id":27308515,"reputation":1,"user_id":20824082,"display_name":"Sanjeev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691153010,"creation_date":1688467040,"question_id":76611756,"body_markdown":"I am trying to integrate Keploy with spring boot application. Our application uses Redis, mongo, Rabbit MQ, Liquibase. I am using keploy version 1.1.5 and able to start the application. But when I am trying to access the end point I am getting the below error.\r\n\r\n```\r\nHandler dispatch failed; nested exception is java.lang.NoSuchMethodError: io.keploy.grpc.stubs.Service.access$35500()Lcom/google/protobuf/Descriptors$Descriptor;\r\n```\r\n\r\nBelow are the dependencies our project is using.\r\n\r\n```\r\n&lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\r\n      &lt;version&gt;2.7.10&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n   &lt;groupId&gt;redis.clients&lt;/groupId&gt;\r\n   &lt;artifactId&gt;jedis&lt;/artifactId&gt;\r\n   &lt;version&gt;3.6.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n   &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n   &lt;version&gt;2.7.10&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nI tried to use upgrade to latest keploy version but getting different exception while making the application up.","title":"Keploy integration with springboot application","body":"<p>I am trying to integrate Keploy with spring boot application. Our application uses Redis, mongo, Rabbit MQ, Liquibase. I am using keploy version 1.1.5 and able to start the application. But when I am trying to access the end point I am getting the below error.</p>\n<pre><code>Handler dispatch failed; nested exception is java.lang.NoSuchMethodError: io.keploy.grpc.stubs.Service.access$35500()Lcom/google/protobuf/Descriptors$Descriptor;\n</code></pre>\n<p>Below are the dependencies our project is using.</p>\n<pre><code>&lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\n      &lt;version&gt;2.7.10&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n   &lt;groupId&gt;redis.clients&lt;/groupId&gt;\n   &lt;artifactId&gt;jedis&lt;/artifactId&gt;\n   &lt;version&gt;3.6.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n   &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n   &lt;version&gt;2.7.10&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I tried to use upgrade to latest keploy version but getting different exception while making the application up.</p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":4256604,"reputation":18866,"user_id":3482140,"accept_rate":83,"display_name":"Am_I_Helpful"},"score":0,"creation_date":1417000440,"post_id":27147538,"comment_id":42790560,"body_markdown":"Loved this game in childhood!","body":"Loved this game in childhood!"},{"owner":{"account_id":5036835,"reputation":109,"user_id":4045376,"accept_rate":82,"display_name":"Gangadhar B"},"score":0,"creation_date":1417000728,"post_id":27147538,"comment_id":42790694,"body_markdown":"@DanielStanley,the error is with this code output is &#39;marriage&#39; but need output as &#39;enemity&#39;","body":"@DanielStanley,the error is with this code output is &#39;marriage&#39; but need output as &#39;enemity&#39;"},{"owner":{"account_id":5036835,"reputation":109,"user_id":4045376,"accept_rate":82,"display_name":"Gangadhar B"},"score":0,"creation_date":1417000911,"post_id":27147538,"comment_id":42790785,"body_markdown":"@DanielStanley,when resultLength is 4 ,start counting for flames first time delete &#39;m&#39; then start counting from &#39;e&#39; then delete &#39;l&#39; as fourth letter like that at last i get &#39;e&#39; so need output as enemity.","body":"@DanielStanley,when resultLength is 4 ,start counting for flames first time delete &#39;m&#39; then start counting from &#39;e&#39; then delete &#39;l&#39; as fourth letter like that at last i get &#39;e&#39; so need output as enemity."},{"owner":{"account_id":5036835,"reputation":109,"user_id":4045376,"accept_rate":82,"display_name":"Gangadhar B"},"score":0,"creation_date":1417000980,"post_id":27147538,"comment_id":42790828,"body_markdown":"@shekharsuman,have you understood my problem in this question?","body":"@shekharsuman,have you understood my problem in this question?"}],"answers":[{"comments":[{"owner":{"account_id":5036835,"reputation":109,"user_id":4045376,"accept_rate":82,"display_name":"Gangadhar B"},"score":0,"creation_date":1417002050,"post_id":27148085,"comment_id":42791405,"body_markdown":",when resultLength is 4 ,start counting for flames first time delete &#39;m&#39; then start counting from &#39;e&#39; then delete &#39;l&#39; as fourth letter like that at last i get &#39;e&#39; so need output as enemity.","body":",when resultLength is 4 ,start counting for flames first time delete &#39;m&#39; then start counting from &#39;e&#39; then delete &#39;l&#39; as fourth letter like that at last i get &#39;e&#39; so need output as enemity."},{"owner":{"account_id":4988045,"reputation":1050,"user_id":4011077,"display_name":"Daniel Stanley"},"score":0,"creation_date":1417002155,"post_id":27148085,"comment_id":42791463,"body_markdown":"That change will cause the output to be &#39;enemity&#39;","body":"That change will cause the output to be &#39;enemity&#39;"},{"owner":{"account_id":5036835,"reputation":109,"user_id":4045376,"accept_rate":82,"display_name":"Gangadhar B"},"score":0,"creation_date":1417002354,"post_id":27148085,"comment_id":42791583,"body_markdown":"Daniel Stanley,i dont want division logic.I need strike resultLength number then start from next char as one from next to strike letter and so on....","body":"Daniel Stanley,i dont want division logic.I need strike resultLength number then start from next char as one from next to strike letter and so on...."}],"tags":[],"owner":{"account_id":4988045,"reputation":1050,"user_id":4011077,"display_name":"Daniel Stanley"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1417001579,"creation_date":1417001579,"answer_id":27148085,"question_id":27147538,"body_markdown":"I think the problem is with this line:\r\n\r\n    int count = temp - 1;\r\n\r\nWhich is giving you an answer of `3` which gives `(0)F (1)L (2)A (3)M`\r\n\r\nSo change it to:\r\n\r\n    int count = temp; //- 1;\r\n\r\nTo get `(0)F (1)L (2)A (3)M (4)E`","title":"flames game logic using java giving error result?","body":"<p>I think the problem is with this line:</p>\n\n<pre><code>int count = temp - 1;\n</code></pre>\n\n<p>Which is giving you an answer of <code>3</code> which gives <code>(0)F (1)L (2)A (3)M</code></p>\n\n<p>So change it to:</p>\n\n<pre><code>int count = temp; //- 1;\n</code></pre>\n\n<p>To get <code>(0)F (1)L (2)A (3)M (4)E</code></p>\n"},{"comments":[{"owner":{"account_id":5036835,"reputation":109,"user_id":4045376,"accept_rate":82,"display_name":"Gangadhar B"},"score":0,"creation_date":1417002005,"post_id":27148090,"comment_id":42791373,"body_markdown":"Sridhar DD,showing error,outofBound exception can your run entire code please.","body":"Sridhar DD,showing error,outofBound exception can your run entire code please."},{"owner":{"account_id":3627501,"reputation":1972,"user_id":4082108,"display_name":"Sridhar DD"},"score":0,"creation_date":1417003679,"post_id":27148090,"comment_id":42792413,"body_markdown":"@GangadharB I had edited the code. Previously i missed the logic of start counting from next character.","body":"@GangadharB I had edited the code. Previously i missed the logic of start counting from next character."},{"owner":{"account_id":5036835,"reputation":109,"user_id":4045376,"accept_rate":82,"display_name":"Gangadhar B"},"score":0,"creation_date":1417004147,"post_id":27148090,"comment_id":42792715,"body_markdown":"Sridhar DD,could you please run your code here http://ideone.com/ .your updated code not ending at all.please paste your code in http://ideone.com/ and try to observe output.","body":"Sridhar DD,could you please run your code here <a href=\"http://ideone.com/\" rel=\"nofollow noreferrer\">ideone.com</a> .your updated code not ending at all.please paste your code in <a href=\"http://ideone.com/\" rel=\"nofollow noreferrer\">ideone.com</a> and try to observe output."},{"owner":{"account_id":5036835,"reputation":109,"user_id":4045376,"accept_rate":82,"display_name":"Gangadhar B"},"score":0,"creation_date":1417004858,"post_id":27148090,"comment_id":42793154,"body_markdown":"Sridhar DD,can you check my updated question.I have added the ouput logic order.","body":"Sridhar DD,can you check my updated question.I have added the ouput logic order."},{"owner":{"account_id":3627501,"reputation":1972,"user_id":4082108,"display_name":"Sridhar DD"},"score":0,"creation_date":1417006194,"post_id":27148090,"comment_id":42793969,"body_markdown":"@GangadharB :: You can check the link now. still you have any issue then let me know.","body":"@GangadharB :: You can check the link now. still you have any issue then let me know."},{"owner":{"account_id":5036835,"reputation":109,"user_id":4045376,"accept_rate":82,"display_name":"Gangadhar B"},"score":0,"creation_date":1417006649,"post_id":27148090,"comment_id":42794231,"body_markdown":"Sridhar DD, thank you for your effort.when length is 4 then output should be &#39;e&#39; but as per your result &#39;f&#39; is coming. check my bottom of my question tag i added the result sequence.","body":"Sridhar DD, thank you for your effort.when length is 4 then output should be &#39;e&#39; but as per your result &#39;f&#39; is coming. check my bottom of my question tag i added the result sequence."},{"owner":{"account_id":3627501,"reputation":1972,"user_id":4082108,"display_name":"Sridhar DD"},"score":1,"creation_date":1417007478,"post_id":27148090,"comment_id":42794724,"body_markdown":"@GangadharB :: Now code is perfect you can visit the link for it.","body":"@GangadharB :: Now code is perfect you can visit the link for it."}],"tags":[],"owner":{"account_id":3627501,"reputation":1972,"user_id":4082108,"display_name":"Sridhar DD"},"comment_count":7,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1417007447,"creation_date":1417001594,"answer_id":27148090,"question_id":27147538,"body_markdown":"Hope this is what you need. I am here striking the character of the word flames until i am getting one character. Once i get the character that is what the result of flames.\r\n\r\n     if (resultLength &gt; 0) {\r\n        while (baseInput.length() !=1)\r\n\t\t    {\r\n\t\t       System.out.println(baseInput);\r\n\t\t       int tmpLen = resultLength % baseInput.length(); //finding char position to strike\r\n\t\t       if(tmpLen != 0)\r\n\t\t       {\r\n\t\t           temp = baseInput.substring(tmpLen) + baseInput.substring(0, tmpLen-1); //Append part start from next char to strike and first charater to char before strike.\r\n\t\t       }\r\n\t\t       else\r\n\t\t       {\r\n\t\t       \t   temp = baseInput.substring(0, baseInput.length()-1); //If mod result zero we can strike last letter easily\r\n\t\t       }\r\n\t\t       baseInput = temp; //Assign the temp to baseinput for next iteration.\r\n\t\t    }\r\n\t\t    relationIs = baseInput.charAt(0);\r\n            System.out.println(relationIs);\r\n     }\r\n\r\nLink : http://ideone.com/Fqgcc1","title":"flames game logic using java giving error result?","body":"<p>Hope this is what you need. I am here striking the character of the word flames until i am getting one character. Once i get the character that is what the result of flames.</p>\n\n<pre><code> if (resultLength &gt; 0) {\n    while (baseInput.length() !=1)\n        {\n           System.out.println(baseInput);\n           int tmpLen = resultLength % baseInput.length(); //finding char position to strike\n           if(tmpLen != 0)\n           {\n               temp = baseInput.substring(tmpLen) + baseInput.substring(0, tmpLen-1); //Append part start from next char to strike and first charater to char before strike.\n           }\n           else\n           {\n               temp = baseInput.substring(0, baseInput.length()-1); //If mod result zero we can strike last letter easily\n           }\n           baseInput = temp; //Assign the temp to baseinput for next iteration.\n        }\n        relationIs = baseInput.charAt(0);\n        System.out.println(relationIs);\n }\n</code></pre>\n\n<p>Link : <a href=\"http://ideone.com/Fqgcc1\" rel=\"nofollow\">http://ideone.com/Fqgcc1</a></p>\n"},{"tags":[],"owner":{"account_id":6863163,"reputation":335,"user_id":5276496,"display_name":"SM ANSARI"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1442902448,"creation_date":1442372342,"answer_id":32599030,"question_id":27147538,"body_markdown":"        // Another Right Code to Find FLAMES in JAVA \r\n        // It is simple\r\n        import java.util.Scanner;\r\n    class Flames\r\n    {\r\n     public static void main(String ar[])\r\n     {\r\n      Scanner sc=new Scanner(System.in);\r\n      String name,fname,flm=&quot;flames&quot;;\r\n      System.out.println(&quot;Enter the boy name...&quot;);\r\n      name=sc.next();\r\n      System.out.println(&quot;Enter the girl name...&quot;);\r\n      fname=sc.next();\r\n      int l=name.length();\r\n      int gl=fname.length();\r\n      int num=0,tl=0; \r\n      char n[]=name.toCharArray();\r\n      char gn[]=fname.toCharArray();\r\n      for(int i=0;i&lt;l;i++)\r\n      {  \r\n       for(int j=0;j&lt;gl;j++)\r\n       {\r\n        if(n[i]==gn[j])\r\n        {\r\n         n[i]=&#39;*&#39;;\r\n         gn[j]=&#39;*&#39;;\r\n         break;\r\n        }\r\n       }\r\n      }\r\n      String tname=new String(n);\r\n      tname=tname+(new String(gn));\r\n      tname=tname.replace(&quot;*&quot;,&quot;&quot;);\r\n      tl=tname.length();\r\n      System.out.println(tl);\r\n      \r\n      for(int s=6;s&gt;=2;s--)\r\n      {\r\n       if(tl&gt;s)\r\n         num=tl-s;\r\n       else\r\n         num=tl;\r\n       while(num&gt;s)\r\n       {\r\n         num=num-s;\r\n       } \r\n       flm=flm.substring(num,flm.length())+(flm.substring(0,num-1)); \r\n      }\r\n      switch(flm.charAt(0))\r\n      {\r\n       case &#39;f&#39;: System.out.println(&quot;Relationship = Friends&quot;); break;\r\n       case &#39;l&#39;: System.out.println(&quot;Relationship = Lovers&quot;); break;\r\n       case &#39;a&#39;: System.out.println(&quot;Relationship = Affections&quot;); break;\r\n       case &#39;m&#39;: System.out.println(&quot;Relationship = Married&quot;); break;\r\n       case &#39;e&#39;: System.out.println(&quot;Relationship = Enemy&quot;); break;\r\n       case &#39;s&#39;: System.out.println(&quot;Relationship = Brother &amp; Sisters&quot;); break;\r\n      }\r\n      //System.out.println(&quot;Name =&quot;+flm);\r\n     }\r\n    }","title":"flames game logic using java giving error result?","body":"<pre><code>    // Another Right Code to Find FLAMES in JAVA \n    // It is simple\n    import java.util.Scanner;\nclass Flames\n{\n public static void main(String ar[])\n {\n  Scanner sc=new Scanner(System.in);\n  String name,fname,flm=\"flames\";\n  System.out.println(\"Enter the boy name...\");\n  name=sc.next();\n  System.out.println(\"Enter the girl name...\");\n  fname=sc.next();\n  int l=name.length();\n  int gl=fname.length();\n  int num=0,tl=0; \n  char n[]=name.toCharArray();\n  char gn[]=fname.toCharArray();\n  for(int i=0;i&lt;l;i++)\n  {  \n   for(int j=0;j&lt;gl;j++)\n   {\n    if(n[i]==gn[j])\n    {\n     n[i]='*';\n     gn[j]='*';\n     break;\n    }\n   }\n  }\n  String tname=new String(n);\n  tname=tname+(new String(gn));\n  tname=tname.replace(\"*\",\"\");\n  tl=tname.length();\n  System.out.println(tl);\n\n  for(int s=6;s&gt;=2;s--)\n  {\n   if(tl&gt;s)\n     num=tl-s;\n   else\n     num=tl;\n   while(num&gt;s)\n   {\n     num=num-s;\n   } \n   flm=flm.substring(num,flm.length())+(flm.substring(0,num-1)); \n  }\n  switch(flm.charAt(0))\n  {\n   case 'f': System.out.println(\"Relationship = Friends\"); break;\n   case 'l': System.out.println(\"Relationship = Lovers\"); break;\n   case 'a': System.out.println(\"Relationship = Affections\"); break;\n   case 'm': System.out.println(\"Relationship = Married\"); break;\n   case 'e': System.out.println(\"Relationship = Enemy\"); break;\n   case 's': System.out.println(\"Relationship = Brother &amp; Sisters\"); break;\n  }\n  //System.out.println(\"Name =\"+flm);\n }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3370121,"reputation":13682,"user_id":2829540,"accept_rate":62,"display_name":"Kevin Amiranoff"},"score":1,"creation_date":1487631842,"post_id":42355620,"comment_id":71862247,"body_markdown":"Please provide a description of what your answer is fixing to make it more comprehensive","body":"Please provide a description of what your answer is fixing to make it more comprehensive"},{"owner":{"account_id":3370121,"reputation":13682,"user_id":2829540,"accept_rate":62,"display_name":"Kevin Amiranoff"},"score":0,"creation_date":1487635842,"post_id":42355620,"comment_id":71863643,"body_markdown":"I was reviewing first post from users. I added the comment so you could make your answer better, by editing your answer and explaining how you respond to the question.","body":"I was reviewing first post from users. I added the comment so you could make your answer better, by editing your answer and explaining how you respond to the question."},{"owner":{"account_id":9388505,"reputation":1,"user_id":7595559,"display_name":"Gunasundari"},"score":0,"creation_date":1487636205,"post_id":42355620,"comment_id":71863762,"body_markdown":"I use String and convert it to Stringbuffer.  Reason for using both to get String and Stringbuffer methods in same program.","body":"I use String and convert it to Stringbuffer.  Reason for using both to get String and Stringbuffer methods in same program."},{"owner":{"account_id":3370121,"reputation":13682,"user_id":2829540,"accept_rate":62,"display_name":"Kevin Amiranoff"},"score":0,"creation_date":1487637611,"post_id":42355620,"comment_id":71864214,"body_markdown":"you should edit your answer, not comment on it...for people who might read it after.","body":"you should edit your answer, not comment on it...for people who might read it after."}],"tags":[],"owner":{"account_id":9388505,"reputation":1,"user_id":7595559,"display_name":"Gunasundari"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1487640695,"creation_date":1487631027,"answer_id":42355620,"question_id":27147538,"body_markdown":"    import java.util.Scanner;\r\n        \r\n        public class Flames {\r\n        \r\n        \tpublic static void main(String[] args) {\r\n        \t\t/* Check the flames using two names  */\r\n        \t\tScanner scan = new Scanner(System.in);\r\n        \t\tSystem.out.print(&quot;Enter Name 1 : &quot;);\r\n        \t\tString Name1 = scan.nextLine();\r\n        \t\t//System.out.println(Name1);\r\n        \t\tSystem.out.print(&quot;Enter Name 2 : &quot;);\r\n        \t\tString Name2 = scan.nextLine();\r\n        \t\t//System.out.println(Name2);\r\n        \t\tint N1len = Name1.length();\r\n        \t\tint N2len = Name2.length();\r\n        \t\tName1 = Name1.toLowerCase();\r\n        \t\tName2 = Name2.toLowerCase();\r\n        \r\n        \t\tStringBuffer NameB1 = new StringBuffer(Name1);\r\n        \t\tStringBuffer NameB2 = new StringBuffer(Name2);\r\n        \t\tint Name3=0;\r\n        \t\tfor (int i = 0; i&lt;N1len; i++) \r\n        \t\t{\r\n        \t\t\tfor (int j = 0; j&lt;N2len; j++)\r\n        \t\t\t {\r\n        \t\t\t\tif (NameB1.charAt(i) == NameB2.charAt(j)) \r\n        \t\t\t\t{\r\n        \t\t\t\t\tNameB1 = NameB1.deleteCharAt(i);\r\n        \t\t\t\t\tNameB2 = NameB2.deleteCharAt(j);\r\n        \t\t\t\t\tN1len= NameB1.length();\r\n        \t\t\t\t\tN2len= NameB2.length();\r\n        \t\t\t\t\ti=0;\r\n        \t\t\t\t\tj=0;\r\n        \t\t\t\t}\r\n        \r\n        \t\t\t}\r\n        \r\n        \t\t}\r\n        \t\tName3= NameB1.length()+NameB2.length();\r\n        \t\t//System.out.println(NameB1);\r\n        \t\t//System.out.println(NameB2);\r\n        \t\t//System.out.println(Name3);\r\n        \r\n        \t\t/* Flames Calculation */\r\n        \r\n        \t\tchar flameResult =0;\r\n        \t\tString flames = &quot;flames&quot;;\r\n                \t\tStringBuffer sb3 = new StringBuffer(flames);\r\n        \t\twhile (sb3.length()!=1)\r\n        \t\t{\r\n        \t\t\tint Name4 =  Name3%sb3.length();\r\n        \t\t\tString temp;\r\n        \t\t\tif(Name4!=0)\r\n        \t\t\t{\r\n        \t\t\ttemp = sb3.substring(Name4)+sb3.substring(0, Name4-1);\r\n        \t\t\t}\r\n        \t\t\telse\r\n        \t\t\t{\r\n        \t\t\ttemp=sb3.substring(0,sb3.length()-1);\r\n        \t\t\t}\r\n        \t\t\tsb3 = new StringBuffer(temp);\r\n        \t\t\t\r\n                   \t\t\tflameResult=sb3.charAt(0);\r\n        \t\t}\t\r\n        \t\r\n        \t\tswitch(flameResult)\r\n        \t\t{\r\n        \t\tcase &#39;f&#39;:\tSystem.out.println(&quot;Friends&quot;);\r\n                       \t\tbreak;\r\n                    \t\tcase &#39;l&#39;:\r\n                        \t\tSystem.out.println(&quot;Love&quot;);\r\n                       \t\tbreak;\r\n                    \t\tcase &#39;a&#39;:\r\n                        \t\tSystem.out.println(&quot;Affection&quot;);\r\n                       \t\tbreak;\r\n                    \t\tcase &#39;m&#39;:\r\n                     \t\t\tSystem.out.println(&quot;Marriage&quot;);\r\n                        \t\tbreak;\r\n                   \t\tcase &#39;e&#39;:\r\n                       \t\tSystem.out.println(&quot;Enemies&quot;);\r\n                      \t\t\tbreak;\r\n                    \t\tcase &#39;s&#39;:\r\n                      \t\t\tSystem.out.println(&quot;Sibling&quot;);\r\n                      \t\t\tbreak;\r\n                        \r\n        \t\t}\r\n        \r\n        \t\t\r\n        \t\t\r\n        \t}\r\n        \r\n        }","title":"flames game logic using java giving error result?","body":"<pre><code>import java.util.Scanner;\n\n    public class Flames {\n\n        public static void main(String[] args) {\n            /* Check the flames using two names  */\n            Scanner scan = new Scanner(System.in);\n            System.out.print(\"Enter Name 1 : \");\n            String Name1 = scan.nextLine();\n            //System.out.println(Name1);\n            System.out.print(\"Enter Name 2 : \");\n            String Name2 = scan.nextLine();\n            //System.out.println(Name2);\n            int N1len = Name1.length();\n            int N2len = Name2.length();\n            Name1 = Name1.toLowerCase();\n            Name2 = Name2.toLowerCase();\n\n            StringBuffer NameB1 = new StringBuffer(Name1);\n            StringBuffer NameB2 = new StringBuffer(Name2);\n            int Name3=0;\n            for (int i = 0; i&lt;N1len; i++) \n            {\n                for (int j = 0; j&lt;N2len; j++)\n                 {\n                    if (NameB1.charAt(i) == NameB2.charAt(j)) \n                    {\n                        NameB1 = NameB1.deleteCharAt(i);\n                        NameB2 = NameB2.deleteCharAt(j);\n                        N1len= NameB1.length();\n                        N2len= NameB2.length();\n                        i=0;\n                        j=0;\n                    }\n\n                }\n\n            }\n            Name3= NameB1.length()+NameB2.length();\n            //System.out.println(NameB1);\n            //System.out.println(NameB2);\n            //System.out.println(Name3);\n\n            /* Flames Calculation */\n\n            char flameResult =0;\n            String flames = \"flames\";\n                    StringBuffer sb3 = new StringBuffer(flames);\n            while (sb3.length()!=1)\n            {\n                int Name4 =  Name3%sb3.length();\n                String temp;\n                if(Name4!=0)\n                {\n                temp = sb3.substring(Name4)+sb3.substring(0, Name4-1);\n                }\n                else\n                {\n                temp=sb3.substring(0,sb3.length()-1);\n                }\n                sb3 = new StringBuffer(temp);\n\n                        flameResult=sb3.charAt(0);\n            }   \n\n            switch(flameResult)\n            {\n            case 'f':   System.out.println(\"Friends\");\n                        break;\n                        case 'l':\n                            System.out.println(\"Love\");\n                        break;\n                        case 'a':\n                            System.out.println(\"Affection\");\n                        break;\n                        case 'm':\n                            System.out.println(\"Marriage\");\n                            break;\n                    case 'e':\n                        System.out.println(\"Enemies\");\n                            break;\n                        case 's':\n                            System.out.println(\"Sibling\");\n                            break;\n\n            }\n\n\n\n        }\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11894284,"reputation":1,"user_id":8704181,"display_name":"rayan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1509535060,"creation_date":1506868323,"answer_id":46513393,"question_id":27147538,"body_markdown":"    import java.util.*;\r\n    public class Flames\r\n    {\r\n       public static void main()\r\n       {\r\n          int sp=0;\r\n          Scanner sc=new Scanner(System.in);\r\n          System.out.println(&quot;enter two names&quot;);\r\n          String s=sc.nextLine().toLowerCase();\r\n          String s1=sc.nextLine().toLowerCase();\r\n          String p=&quot;flames&quot;;\r\n          String p1=&quot;flames&quot;;\r\n          String s2=&quot;&quot;;\r\n          String m=&quot;&quot;;\r\n          for(int i=0;i &lt; s.length();i++)\r\n          {\r\n             if(Character.isLetter(s.charAt(i))) \r\n             {\r\n                m=m+s.charAt(i);\r\n             }\r\n          }\r\n          s=m;\r\n          m=&quot;&quot;;\r\n          for(int i=0;i &lt; s1.length();i++)\r\n          {\r\n             if(Character.isLetter(s1.charAt(i))) \r\n             {\r\n                m=m+s1.charAt(i);\r\n             }\r\n         }\r\n        s1=m;\r\n        m=&quot;&quot;;\r\n        int l=s.length();\r\n        int l1=s1.length();\r\n        for(int i=0;i &lt; l;i++)\r\n        {\r\n           int sl=0;\r\n           for(int j=0;j &lt; s1.length();j++)\r\n           {\r\n              if(s.charAt(i)==s1.charAt(j))\r\n              {\r\n                 if(sl==0)\r\n                 {\r\n                   sl++;sp++;s2=s2+&quot; &quot; ;\r\n                 }\r\n                 else\r\n                 {\r\n                   s2=s2+s1.charAt(j);\r\n                 }\r\n              }\r\n              else\r\n              {\r\n                s2=s2+s1.charAt(j);\r\n              }\r\n          }\r\n         s1=s2;\r\n         s2=&quot;&quot;;\r\n       }\r\n       sp=sp*2;\r\n       int c=(l-1)+(l1-1)-(sp-1);\r\n       for(int i=1;;i++)\r\n       {\r\n          String z=&quot;&quot;;p=p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p;\r\n         String mn=&quot;&quot;;\r\n         char c1=p.charAt(c);\r\n         for(int j=0;j &lt; p1.length();j++)\r\n         {\r\n            if(c1==p1.charAt(j))\r\n            {\r\n               mn=p1.substring(j+1)+mn;\r\n               break;\r\n            }\r\n            else\r\n            {\r\n              mn=mn+p1.charAt(j);\r\n            }\r\n          }\r\n          for(int k=0;k &lt; p1.length();k++)\r\n          {\r\n             if(c1==p1.charAt(k))\r\n             {\r\n             }\r\n             else\r\n             {\r\n                z=z+p1.charAt(k);\r\n             }\r\n          }\r\n          p1=z;\r\n          p=mn;\r\n          if(mn.length()==1)\r\n          {\r\n             System.out.println(mn);\r\n             break;\r\n          }\r\n        }\r\n      }\r\n    }","title":"flames game logic using java giving error result?","body":"<pre><code>import java.util.*;\npublic class Flames\n{\n   public static void main()\n   {\n      int sp=0;\n      Scanner sc=new Scanner(System.in);\n      System.out.println(\"enter two names\");\n      String s=sc.nextLine().toLowerCase();\n      String s1=sc.nextLine().toLowerCase();\n      String p=\"flames\";\n      String p1=\"flames\";\n      String s2=\"\";\n      String m=\"\";\n      for(int i=0;i &lt; s.length();i++)\n      {\n         if(Character.isLetter(s.charAt(i))) \n         {\n            m=m+s.charAt(i);\n         }\n      }\n      s=m;\n      m=\"\";\n      for(int i=0;i &lt; s1.length();i++)\n      {\n         if(Character.isLetter(s1.charAt(i))) \n         {\n            m=m+s1.charAt(i);\n         }\n     }\n    s1=m;\n    m=\"\";\n    int l=s.length();\n    int l1=s1.length();\n    for(int i=0;i &lt; l;i++)\n    {\n       int sl=0;\n       for(int j=0;j &lt; s1.length();j++)\n       {\n          if(s.charAt(i)==s1.charAt(j))\n          {\n             if(sl==0)\n             {\n               sl++;sp++;s2=s2+\" \" ;\n             }\n             else\n             {\n               s2=s2+s1.charAt(j);\n             }\n          }\n          else\n          {\n            s2=s2+s1.charAt(j);\n          }\n      }\n     s1=s2;\n     s2=\"\";\n   }\n   sp=sp*2;\n   int c=(l-1)+(l1-1)-(sp-1);\n   for(int i=1;;i++)\n   {\n      String z=\"\";p=p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p+p;\n     String mn=\"\";\n     char c1=p.charAt(c);\n     for(int j=0;j &lt; p1.length();j++)\n     {\n        if(c1==p1.charAt(j))\n        {\n           mn=p1.substring(j+1)+mn;\n           break;\n        }\n        else\n        {\n          mn=mn+p1.charAt(j);\n        }\n      }\n      for(int k=0;k &lt; p1.length();k++)\n      {\n         if(c1==p1.charAt(k))\n         {\n         }\n         else\n         {\n            z=z+p1.charAt(k);\n         }\n      }\n      p1=z;\n      p=mn;\n      if(mn.length()==1)\n      {\n         System.out.println(mn);\n         break;\n      }\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23336109,"reputation":7,"user_id":17411747,"display_name":"CEH Purushothaman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691152872,"creation_date":1690630796,"answer_id":76793389,"question_id":27147538,"body_markdown":"```java\r\npublic void afterRemoveLetter() {\r\n    int[] name1Array = new int[26];\r\n    int[] name2Array = new int[26];\r\n\r\n    for(char c : name1.toCharArray())\r\n        name1Array[c-97]++;\r\n\r\n    for(char c : name2.toCharArray())\r\n        name2Array[c-97]++;\r\n\r\n    for(int i=0; i&lt;26; i++)\r\n        totalCountOfLetters += Math.abs(name1Array[i] - name2Array[i]);\r\n\r\n}\r\n\r\npublic String findFLAMES(){\r\n    ArrayList&lt;Character&gt; flames = new ArrayList&lt;&gt;() {{\r\n            add(&#39;f&#39;);\r\n            add(&#39;l&#39;);\r\n            add(&#39;a&#39;);\r\n            add(&#39;m&#39;);\r\n            add(&#39;e&#39;);\r\n            add(&#39;s&#39;);\r\n        }};\r\n\r\n    int currentCount = 0;\r\n\r\n    do{\r\n        int temp = totalCountOfLetters % flames.size();\r\n        currentCount = (temp - 1 + currentCount + flames.size()) % flames.size();\r\n        flames.remove(currentCount);\r\n\r\n    }while(flames.size() &gt; 1);\r\n\r\n    return flames.toString();\r\n}\r\n```","title":"flames game logic using java giving error result?","body":"<pre class=\"lang-java prettyprint-override\"><code>public void afterRemoveLetter() {\n    int[] name1Array = new int[26];\n    int[] name2Array = new int[26];\n\n    for(char c : name1.toCharArray())\n        name1Array[c-97]++;\n\n    for(char c : name2.toCharArray())\n        name2Array[c-97]++;\n\n    for(int i=0; i&lt;26; i++)\n        totalCountOfLetters += Math.abs(name1Array[i] - name2Array[i]);\n\n}\n\npublic String findFLAMES(){\n    ArrayList&lt;Character&gt; flames = new ArrayList&lt;&gt;() {{\n            add('f');\n            add('l');\n            add('a');\n            add('m');\n            add('e');\n            add('s');\n        }};\n\n    int currentCount = 0;\n\n    do{\n        int temp = totalCountOfLetters % flames.size();\n        currentCount = (temp - 1 + currentCount + flames.size()) % flames.size();\n        flames.remove(currentCount);\n\n    }while(flames.size() &gt; 1);\n\n    return flames.toString();\n}\n</code></pre>\n"}],"owner":{"account_id":5036835,"reputation":109,"user_id":4045376,"accept_rate":82,"display_name":"Gangadhar B"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10279,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":27148090,"answer_count":6,"score":4,"last_activity_date":1691152872,"creation_date":1417000018,"question_id":27147538,"body_markdown":"Here I have created a flames game logic it is final string length is correct(eg:4 for two strings &#39;raja&#39; and &#39;rani&#39;) based on length I need to show &#39;f&#39; or &#39;l&#39; or &#39;a&#39; or &#39;m&#39; or &#39;e&#39; or &#39;s&#39;.\r\nI have written logic based on length that character is visible but that is not my concern. For length 4 result should be &#39;e&#39;(in flames for length 4 first &#39;m&#39; should remove then &#39;l&#39; then &#39;f&#39; then &#39;a&#39; then &#39;s&#39; finally i need &#39;e&#39; as output.Can anybody tell me idea. This is my code.\r\n\r\n    public static void main(String[] args) {\r\n        String name1 = &quot;raja&quot;;\r\n        String name2 = &quot;rani&quot;;\r\n        String s1 = name1;\r\n        String s2 = name2;\r\n        for (int i = 0; i &lt; name1.length(); i++) {\r\n            for (int j = 0; j &lt; name2.length(); j++) {\r\n                if (name1.charAt(i) == name2.charAt(j)) {\r\n                name1 = name1.replaceFirst(String.valueOf(name1.charAt(i)), &quot;#&quot;);\r\n                name2 = name2.replaceFirst(String.valueOf(name2.charAt(j)), &quot;#&quot;);\r\n                }\r\n            }\r\n        }\r\n        String result = name1 + name2;\r\n        result = result.replaceAll(&quot;#&quot;, &quot;&quot;);\r\n        int resultLength = result.length();\r\n        String baseInput = &quot;flames&quot;;\r\n        char relationIs = 0;\r\n        int temp = 0;\r\n        if (resultLength &gt; 0) {\r\n            temp = resultLength % baseInput.length();\r\n        }\r\n        if (temp == 0 &amp;&amp; resultLength &gt;= 6) {\r\n            relationIs = &#39;s&#39;;\r\n        } else {\r\n            int count = temp - 1;\r\n            if (count &gt;= 0) {\r\n                relationIs = baseInput.charAt(count);\r\n            System.out.println(&quot;Relation Betw &quot; + s1 + &quot; and &quot; + s2 + &quot; is:&quot;);\r\n            }\r\n        }\r\n        switch (relationIs) {\r\n            case &#39;f&#39;:\r\n                System.out.println(&quot;friendship&quot;);\r\n                break;\r\n            case &#39;l&#39;:\r\n                System.out.println(&quot;Lovers&quot;);\r\n                break;\r\n            case &#39;a&#39;:\r\n                System.out.println(&quot;Affection&quot;);\r\n                break;\r\n            case &#39;m&#39;:\r\n                System.out.println(&quot;Marriage&quot;);\r\n                break;\r\n            case &#39;e&#39;:\r\n                System.out.println(&quot;Enemity&quot;);\r\n                break;\r\n            case &#39;s&#39;:\r\n                System.out.println(&quot;Siblings&quot;);\r\n                break;\r\n            default:\r\n                System.out.println(&quot;FLAME Test works only for different names&quot;);\r\n                break;\r\n        }\r\n    }\r\n\r\nLogic follows this order:only forward direction remove 4 character.\r\n\r\n    if length=4\r\n    step 0:flames (&#39;f&#39; as 1)\r\n    step 1:flaes (here &#39;e&#39; as 1)\r\n    step 2:faes  (here &#39;a&#39; as 1)\r\n    step 3:aes   (here &#39;a&#39; as 1)\r\n    step 4:es    (here &#39;e&#39; as 1)\r\n    step 5:e   //output.\r\n\r\nYour help will be appreciated.\r\n\r\n","title":"flames game logic using java giving error result?","body":"<p>Here I have created a flames game logic it is final string length is correct(eg:4 for two strings 'raja' and 'rani') based on length I need to show 'f' or 'l' or 'a' or 'm' or 'e' or 's'.\nI have written logic based on length that character is visible but that is not my concern. For length 4 result should be 'e'(in flames for length 4 first 'm' should remove then 'l' then 'f' then 'a' then 's' finally i need 'e' as output.Can anybody tell me idea. This is my code.</p>\n\n<pre><code>public static void main(String[] args) {\n    String name1 = \"raja\";\n    String name2 = \"rani\";\n    String s1 = name1;\n    String s2 = name2;\n    for (int i = 0; i &lt; name1.length(); i++) {\n        for (int j = 0; j &lt; name2.length(); j++) {\n            if (name1.charAt(i) == name2.charAt(j)) {\n            name1 = name1.replaceFirst(String.valueOf(name1.charAt(i)), \"#\");\n            name2 = name2.replaceFirst(String.valueOf(name2.charAt(j)), \"#\");\n            }\n        }\n    }\n    String result = name1 + name2;\n    result = result.replaceAll(\"#\", \"\");\n    int resultLength = result.length();\n    String baseInput = \"flames\";\n    char relationIs = 0;\n    int temp = 0;\n    if (resultLength &gt; 0) {\n        temp = resultLength % baseInput.length();\n    }\n    if (temp == 0 &amp;&amp; resultLength &gt;= 6) {\n        relationIs = 's';\n    } else {\n        int count = temp - 1;\n        if (count &gt;= 0) {\n            relationIs = baseInput.charAt(count);\n        System.out.println(\"Relation Betw \" + s1 + \" and \" + s2 + \" is:\");\n        }\n    }\n    switch (relationIs) {\n        case 'f':\n            System.out.println(\"friendship\");\n            break;\n        case 'l':\n            System.out.println(\"Lovers\");\n            break;\n        case 'a':\n            System.out.println(\"Affection\");\n            break;\n        case 'm':\n            System.out.println(\"Marriage\");\n            break;\n        case 'e':\n            System.out.println(\"Enemity\");\n            break;\n        case 's':\n            System.out.println(\"Siblings\");\n            break;\n        default:\n            System.out.println(\"FLAME Test works only for different names\");\n            break;\n    }\n}\n</code></pre>\n\n<p>Logic follows this order:only forward direction remove 4 character.</p>\n\n<pre><code>if length=4\nstep 0:flames ('f' as 1)\nstep 1:flaes (here 'e' as 1)\nstep 2:faes  (here 'a' as 1)\nstep 3:aes   (here 'a' as 1)\nstep 4:es    (here 'e' as 1)\nstep 5:e   //output.\n</code></pre>\n\n<p>Your help will be appreciated.</p>\n"},{"tags":["java","spring-boot","swagger","swagger-ui","timezone-offset"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1677532688,"post_id":75584697,"comment_id":133353162,"body_markdown":"&quot;default value&quot; is a misleading choice of words. I suggest you edit the title and body to use the correct terms: ***standard [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) format*** of &#177;HH:MM","body":"&quot;default value&quot; is a misleading choice of words. I suggest you edit the title and body to use the correct terms: <b><i>standard <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> format</i></b> of &#177;HH:MM"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1677532918,"post_id":75584697,"comment_id":133353208,"body_markdown":"I am not sure what sense it makes for an order to have a `ZoneOffset` attribute such as +01:00. But since you think it is meaningful, I too would try to see if I could serialize it exactly as such a string (only), `+01:00`. I’d somehow wonder if there isn’t a way.","body":"I am not sure what sense it makes for an order to have a <code>ZoneOffset</code> attribute such as +01:00. But since you think it is meaningful, I too would try to see if I could serialize it exactly as such a string (only), <code>+01:00</code>. I’d somehow wonder if there isn’t a way."},{"owner":{"account_id":23317768,"reputation":58,"user_id":17396162,"display_name":"Фёдор Надуткин"},"score":0,"creation_date":1677547284,"post_id":75584697,"comment_id":133355771,"body_markdown":"Because the project is old, we store time as it is on our servers. And not to send messages about order (something can change in the order, or the delivery started...) when it is late, we need to understand users timezone and calculate their time, when any change happens","body":"Because the project is old, we store time as it is on our servers. And not to send messages about order (something can change in the order, or the delivery started...) when it is late, we need to understand users timezone and calculate their time, when any change happens"}],"answers":[{"tags":[],"owner":{"account_id":23317768,"reputation":58,"user_id":17396162,"display_name":"Фёдор Надуткин"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691152857,"creation_date":1691152857,"answer_id":76836011,"question_id":75584697,"body_markdown":"I found the solution in [`io.swagger.v3.oas.annotations.media.Schema`](https://docs.swagger.io/swagger-core/v2.0.0-RC3/apidocs/io/swagger/v3/oas/annotations/media/Schema.html#example--)\r\n\r\n```Java\r\n@Schema(example = &quot;+01:00&quot;)\r\nprivate ZoneOffset timezone;\r\n```\r\n\r\ngenerates the same result as I expected.","title":"Standard ISO 8601 format of &#177;HH:MM for ZoneOffset in swagger instead of JSON","body":"<p>I found the solution in <a href=\"https://docs.swagger.io/swagger-core/v2.0.0-RC3/apidocs/io/swagger/v3/oas/annotations/media/Schema.html#example--\" rel=\"nofollow noreferrer\"><code>io.swagger.v3.oas.annotations.media.Schema</code></a></p>\n<pre><code>@Schema(example = &quot;+01:00&quot;)\nprivate ZoneOffset timezone;\n</code></pre>\n<p>generates the same result as I expected.</p>\n"}],"owner":{"account_id":23317768,"reputation":58,"user_id":17396162,"display_name":"Фёдор Надуткин"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76836011,"answer_count":1,"score":2,"last_activity_date":1691152857,"creation_date":1677525472,"question_id":75584697,"body_markdown":"I&#39;m currently working on Java application, which works with the orders. In some `@RestController` methods I return an instance of an `Order` class, which contains a `timezone` field.\r\n\r\n```java\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class Order {\r\n   private ZoneOffset timezone;\r\n}\r\n```\r\n\r\nWhen I generate swagger with spring-boot tools it creates a json for responses, which looks like this\r\n\r\n```json\r\n{\r\n&quot;timezone&quot;: {\r\n    &quot;totalSeconds&quot;: 0,\r\n    &quot;id&quot;: &quot;string&quot;,\r\n    &quot;rules&quot;: {\r\n      &quot;fixedOffset&quot;: true,\r\n      &quot;transitions&quot;: [\r\n        {\r\n          &quot;offsetBefore&quot;: {\r\n            &quot;totalSeconds&quot;: 0,\r\n            &quot;id&quot;: &quot;string&quot;\r\n          },\r\n          &quot;offsetAfter&quot;: {\r\n            &quot;totalSeconds&quot;: 0,\r\n            &quot;id&quot;: &quot;string&quot;\r\n          },\r\n          &quot;duration&quot;: {\r\n            &quot;seconds&quot;: 0,\r\n            &quot;nano&quot;: 0,\r\n            &quot;negative&quot;: true,\r\n            &quot;zero&quot;: true,\r\n            &quot;units&quot;: [\r\n              {\r\n                &quot;dateBased&quot;: true,\r\n                &quot;timeBased&quot;: true,\r\n                &quot;durationEstimated&quot;: true\r\n              }\r\n            ]\r\n          },\r\n          &quot;gap&quot;: true,\r\n          &quot;dateTimeBefore&quot;: &quot;2023-02-27T18:33:30.403Z&quot;,\r\n          &quot;dateTimeAfter&quot;: &quot;2023-02-27T18:33:30.403Z&quot;,\r\n          &quot;instant&quot;: &quot;2023-02-27T18:33:30.403Z&quot;,\r\n          &quot;overlap&quot;: true\r\n        }\r\n      ],\r\n      &quot;transitionRules&quot;: [\r\n        {\r\n          &quot;month&quot;: &quot;JANUARY&quot;,\r\n          &quot;timeDefinition&quot;: &quot;UTC&quot;,\r\n          &quot;standardOffset&quot;: {\r\n            &quot;totalSeconds&quot;: 0,\r\n            &quot;id&quot;: &quot;string&quot;\r\n          },\r\n          &quot;offsetBefore&quot;: {\r\n            &quot;totalSeconds&quot;: 0,\r\n            &quot;id&quot;: &quot;string&quot;\r\n          },\r\n          &quot;offsetAfter&quot;: {\r\n            &quot;totalSeconds&quot;: 0,\r\n            &quot;id&quot;: &quot;string&quot;\r\n          },\r\n          &quot;dayOfWeek&quot;: &quot;MONDAY&quot;,\r\n          &quot;dayOfMonthIndicator&quot;: 0,\r\n          &quot;localTime&quot;: {\r\n            &quot;hour&quot;: 0,\r\n            &quot;minute&quot;: 0,\r\n            &quot;second&quot;: 0,\r\n            &quot;nano&quot;: 0\r\n          },\r\n          &quot;midnightEndOfDay&quot;: true\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nwhich is not human-readable. \r\n\r\nI want swagger to generate the default value, like `+01:00` (like it returns in responses, when I send requests to my api).\r\n\r\nI tried to use annotations like \r\n```java\r\n@ApiModelProperty(example = &quot;+01:00&quot;)\r\n``` \r\nor \r\n```java\r\n@ApiParam(defaultValue=&quot;+01:00&quot;)\r\n```\r\n, but nothing worked out for me.\r\n\r\nI know that spring-boot tools can generate a human-readable json for `ZonedDateTime` (like this \r\n```json\r\n&quot;time&quot;: &quot;2023-02-27T18:33:30.403Z&quot;\r\n```\r\n). So I hope there is way to make the same thing for `ZoneOffset`.\r\n\r\nP.S. I can not replace it is used in different calculations and convert it into string and back seems kind of problematic.","title":"Standard ISO 8601 format of &#177;HH:MM for ZoneOffset in swagger instead of JSON","body":"<p>I'm currently working on Java application, which works with the orders. In some <code>@RestController</code> methods I return an instance of an <code>Order</code> class, which contains a <code>timezone</code> field.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Order {\n   private ZoneOffset timezone;\n}\n</code></pre>\n<p>When I generate swagger with spring-boot tools it creates a json for responses, which looks like this</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n&quot;timezone&quot;: {\n    &quot;totalSeconds&quot;: 0,\n    &quot;id&quot;: &quot;string&quot;,\n    &quot;rules&quot;: {\n      &quot;fixedOffset&quot;: true,\n      &quot;transitions&quot;: [\n        {\n          &quot;offsetBefore&quot;: {\n            &quot;totalSeconds&quot;: 0,\n            &quot;id&quot;: &quot;string&quot;\n          },\n          &quot;offsetAfter&quot;: {\n            &quot;totalSeconds&quot;: 0,\n            &quot;id&quot;: &quot;string&quot;\n          },\n          &quot;duration&quot;: {\n            &quot;seconds&quot;: 0,\n            &quot;nano&quot;: 0,\n            &quot;negative&quot;: true,\n            &quot;zero&quot;: true,\n            &quot;units&quot;: [\n              {\n                &quot;dateBased&quot;: true,\n                &quot;timeBased&quot;: true,\n                &quot;durationEstimated&quot;: true\n              }\n            ]\n          },\n          &quot;gap&quot;: true,\n          &quot;dateTimeBefore&quot;: &quot;2023-02-27T18:33:30.403Z&quot;,\n          &quot;dateTimeAfter&quot;: &quot;2023-02-27T18:33:30.403Z&quot;,\n          &quot;instant&quot;: &quot;2023-02-27T18:33:30.403Z&quot;,\n          &quot;overlap&quot;: true\n        }\n      ],\n      &quot;transitionRules&quot;: [\n        {\n          &quot;month&quot;: &quot;JANUARY&quot;,\n          &quot;timeDefinition&quot;: &quot;UTC&quot;,\n          &quot;standardOffset&quot;: {\n            &quot;totalSeconds&quot;: 0,\n            &quot;id&quot;: &quot;string&quot;\n          },\n          &quot;offsetBefore&quot;: {\n            &quot;totalSeconds&quot;: 0,\n            &quot;id&quot;: &quot;string&quot;\n          },\n          &quot;offsetAfter&quot;: {\n            &quot;totalSeconds&quot;: 0,\n            &quot;id&quot;: &quot;string&quot;\n          },\n          &quot;dayOfWeek&quot;: &quot;MONDAY&quot;,\n          &quot;dayOfMonthIndicator&quot;: 0,\n          &quot;localTime&quot;: {\n            &quot;hour&quot;: 0,\n            &quot;minute&quot;: 0,\n            &quot;second&quot;: 0,\n            &quot;nano&quot;: 0\n          },\n          &quot;midnightEndOfDay&quot;: true\n        }\n      ]\n    }\n  }\n}\n</code></pre>\n<p>which is not human-readable.</p>\n<p>I want swagger to generate the default value, like <code>+01:00</code> (like it returns in responses, when I send requests to my api).</p>\n<p>I tried to use annotations like</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ApiModelProperty(example = &quot;+01:00&quot;)\n</code></pre>\n<p>or</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ApiParam(defaultValue=&quot;+01:00&quot;)\n</code></pre>\n<p>, but nothing worked out for me.</p>\n<p>I know that spring-boot tools can generate a human-readable json for <code>ZonedDateTime</code> (like this</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;time&quot;: &quot;2023-02-27T18:33:30.403Z&quot;\n</code></pre>\n<p>). So I hope there is way to make the same thing for <code>ZoneOffset</code>.</p>\n<p>P.S. I can not replace it is used in different calculations and convert it into string and back seems kind of problematic.</p>\n"},{"tags":["java","spring-boot","logging","spring-webflux","reactor-netty"],"comments":[{"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"score":1,"creation_date":1691313618,"post_id":76831788,"comment_id":135472570,"body_markdown":"you can try writing your own log handler https://stackoverflow.com/a/58050657/175554 or you can group by those logs by their spanid [check](https://opentelemetry.io/docs/specs/otel/logs/data-model/#field-spanid)","body":"you can try writing your own log handler <a href=\"https://stackoverflow.com/a/58050657/175554\">stackoverflow.com/a/58050657/175554</a> or you can group by those logs by their spanid <a href=\"https://opentelemetry.io/docs/specs/otel/logs/data-model/#field-spanid\" rel=\"nofollow noreferrer\">check</a>"}],"owner":{"account_id":4895504,"reputation":702,"user_id":4253293,"accept_rate":50,"display_name":"Steve"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":231,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691152670,"creation_date":1691099338,"question_id":76831788,"body_markdown":"I&#39;m trying to produce logging for Netty Reactor and finding it very hard to get what I want.  The wiretap functionality has much of the information that I need, but the content is messy and spread across multiple lines which would become very confused in a production environment.\r\n\r\nNetty Wiretap Output at INFO level includes all of the handshaking with the proxy server, etc.  At its heart I see this:\r\n\r\n**REQUEST**\r\n```\r\n2023-08-03 17:02:48,474 [reactor-http-nio-1] INFO reactor.netty.http.client.HttpClient:99 - [9f3f80fb-1, L:/111.22.33.44:1234 - R:proxy.mycompany.com/33.44.55.22:8080] WRITE: 480B POST /api/trying/to/call HTTP/1.1\r\nconnection:close\r\nuser-agent: ReactorNetty/1.1.9\r\nhost: target.server.com\r\nAccept: application/json\r\nContent-Type: application/json\r\ncontent-length: 199\r\n\r\n{&quot;key1&quot;: &quot;value1&quot;, &quot;key2&quot;: &quot;value2&quot;}\r\n```\r\nThis isn&#39;t so bad, although I would like to clean it up a bit. At least everything gets written at once. The bigger problem is the response.\r\n\r\n**RESPONSE**\r\n```\r\n2023-08-03 17:02:51,122 [reactor-http-nio-1] INFO reactor.netty.http.client.HttpClient:99 - [9f3f80fb-1, L:/111.22.33.44:1234 - R:proxy.mycompany.com/33.44.55.22:8080] READ: 623B HTTP/1.1 200\r\nDate: Thu, 03 Aug 2023 21:02:51 GMT\r\nContent-Type: application/json\r\nContent-Length: 793\r\nMore-headers: snipped\r\n\r\n2023-08-03 17:02:51,125 [reactor-http-nio-1] INFO reactor.netty.http.client.HttpClient:99 - [9f3f80fb-1, L:/111.22.33.44:1234 - R:proxy.mycompany.com/33.44.55.22:8080] READ COMPLETE\r\n\r\n2023-08-03 17:02:51,128 [reactor-http-nio-1] INFO reactor.netty.http.client.HttpClient:99 - [9f3f80fb-1, L:/111.22.33.44:1234 - R:proxy.mycompany.com/33.44.55.22:8080] READ: 793B {&quot;key1&quot;: &quot;value1&quot;, &quot;key2&quot;:&quot;value2&quot;}\r\n```\r\nI need all of this together.  If you notice this is three separate log entries. It&#39;s easy enough to read like this, but in a production environment with many concurrent requests, trying to keep these correlated will be a much greater challenge.\r\n\r\nDoes anybody have a suggestion how to capture the whole response together?","title":"Log HTTP request/response in Netty","body":"<p>I'm trying to produce logging for Netty Reactor and finding it very hard to get what I want.  The wiretap functionality has much of the information that I need, but the content is messy and spread across multiple lines which would become very confused in a production environment.</p>\n<p>Netty Wiretap Output at INFO level includes all of the handshaking with the proxy server, etc.  At its heart I see this:</p>\n<p><strong>REQUEST</strong></p>\n<pre><code>2023-08-03 17:02:48,474 [reactor-http-nio-1] INFO reactor.netty.http.client.HttpClient:99 - [9f3f80fb-1, L:/111.22.33.44:1234 - R:proxy.mycompany.com/33.44.55.22:8080] WRITE: 480B POST /api/trying/to/call HTTP/1.1\nconnection:close\nuser-agent: ReactorNetty/1.1.9\nhost: target.server.com\nAccept: application/json\nContent-Type: application/json\ncontent-length: 199\n\n{&quot;key1&quot;: &quot;value1&quot;, &quot;key2&quot;: &quot;value2&quot;}\n</code></pre>\n<p>This isn't so bad, although I would like to clean it up a bit. At least everything gets written at once. The bigger problem is the response.</p>\n<p><strong>RESPONSE</strong></p>\n<pre><code>2023-08-03 17:02:51,122 [reactor-http-nio-1] INFO reactor.netty.http.client.HttpClient:99 - [9f3f80fb-1, L:/111.22.33.44:1234 - R:proxy.mycompany.com/33.44.55.22:8080] READ: 623B HTTP/1.1 200\nDate: Thu, 03 Aug 2023 21:02:51 GMT\nContent-Type: application/json\nContent-Length: 793\nMore-headers: snipped\n\n2023-08-03 17:02:51,125 [reactor-http-nio-1] INFO reactor.netty.http.client.HttpClient:99 - [9f3f80fb-1, L:/111.22.33.44:1234 - R:proxy.mycompany.com/33.44.55.22:8080] READ COMPLETE\n\n2023-08-03 17:02:51,128 [reactor-http-nio-1] INFO reactor.netty.http.client.HttpClient:99 - [9f3f80fb-1, L:/111.22.33.44:1234 - R:proxy.mycompany.com/33.44.55.22:8080] READ: 793B {&quot;key1&quot;: &quot;value1&quot;, &quot;key2&quot;:&quot;value2&quot;}\n</code></pre>\n<p>I need all of this together.  If you notice this is three separate log entries. It's easy enough to read like this, but in a production environment with many concurrent requests, trying to keep these correlated will be a much greater challenge.</p>\n<p>Does anybody have a suggestion how to capture the whole response together?</p>\n"},{"tags":["java","reactjs","spring-boot","cors"],"comments":[{"owner":{"account_id":22226004,"reputation":13342,"user_id":16462950,"display_name":"Heiko Thei&#223;en"},"score":0,"creation_date":1691153911,"post_id":76835963,"comment_id":135457046,"body_markdown":"If the backend can be accessed by the UI, it must also be accessible by curl, because curl can be used to make the same requests (including `Origin` header) that the UI also makes. In other words: CORS is not used to protect the backend, but to protect the _client_ against making unwanted requests.","body":"If the backend can be accessed by the UI, it must also be accessible by curl, because curl can be used to make the same requests (including <code>Origin</code> header) that the UI also makes. In other words: CORS is not used to protect the backend, but to protect the <i>client</i> against making unwanted requests."},{"owner":{"account_id":10135,"reputation":14548,"user_id":18995,"accept_rate":81,"display_name":"Paul Croarkin"},"score":0,"creation_date":1691155452,"post_id":76835963,"comment_id":135457415,"body_markdown":"@HeikoThei&#223;en What is the point of allowedOrigins?","body":"@HeikoThei&#223;en What is the point of allowedOrigins?"},{"owner":{"account_id":22226004,"reputation":13342,"user_id":16462950,"display_name":"Heiko Thei&#223;en"},"score":2,"creation_date":1691155550,"post_id":76835963,"comment_id":135457443,"body_markdown":"See here: https://developer.mozilla.org/en-US/docs/Glossary/CORS","body":"See here: <a href=\"https://developer.mozilla.org/en-US/docs/Glossary/CORS\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Glossary/CORS</a>"}],"owner":{"account_id":10135,"reputation":14548,"user_id":18995,"accept_rate":81,"display_name":"Paul Croarkin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691152544,"creation_date":1691152544,"question_id":76835963,"body_markdown":"We have an application with two containers deployed within the same pod hosted on AWS EKS. The React UI container is running on port 8080 while the Spring Boot backend is running on 8081. \r\n\r\nThe CORS configuration on Spring Boot (3.1.2):\r\n\r\n```\r\n@EnableWebSecurity\r\n@Slf4j\r\npublic class WebMvcConfigurerConfig {\r\n\t@Value(&quot;${PUBLIC_URL}&quot;)\r\n\tprivate String url;\r\n\t\r\n\t@Bean\r\n\tpublic WebMvcConfigurer corsConfigurer() {\r\n\t\treturn new WebMvcConfigurer() {\r\n\t\t\t@Override\r\n\t\t\tpublic void addCorsMappings(CorsRegistry registry) {\r\n\t\t\t\tlog.info(&quot;url: &quot; + url);\r\n\t\t\t\tregistry.addMapping(&quot;/**&quot;).allowedOrigins(url, &quot;svc.local.cluster&quot;, &quot;http://localhost:8080&quot;, &quot;http://localhost:8081&quot;, &quot; http://127.0.0.1:8080&quot;);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n}\r\n```\r\n\r\nPUBLIC_URL is an environment variable that defines the url that the application is hosted on. For example: https://acme.com/myapp\r\n\r\nThis configuration successfully stops the backend being able to be accessed via curl or other tools. However, the UI can no longer contact the backend.\r\n\r\nWhat would be the proper allowedOrigins?","title":"Stopping Access to Spring Backend Service via CORS, but React Frontend Can No Longer Access Backend","body":"<p>We have an application with two containers deployed within the same pod hosted on AWS EKS. The React UI container is running on port 8080 while the Spring Boot backend is running on 8081.</p>\n<p>The CORS configuration on Spring Boot (3.1.2):</p>\n<pre><code>@EnableWebSecurity\n@Slf4j\npublic class WebMvcConfigurerConfig {\n    @Value(&quot;${PUBLIC_URL}&quot;)\n    private String url;\n    \n    @Bean\n    public WebMvcConfigurer corsConfigurer() {\n        return new WebMvcConfigurer() {\n            @Override\n            public void addCorsMappings(CorsRegistry registry) {\n                log.info(&quot;url: &quot; + url);\n                registry.addMapping(&quot;/**&quot;).allowedOrigins(url, &quot;svc.local.cluster&quot;, &quot;http://localhost:8080&quot;, &quot;http://localhost:8081&quot;, &quot; http://127.0.0.1:8080&quot;);\n            }\n        };\n    }\n}\n</code></pre>\n<p>PUBLIC_URL is an environment variable that defines the url that the application is hosted on. For example: <a href=\"https://acme.com/myapp\" rel=\"nofollow noreferrer\">https://acme.com/myapp</a></p>\n<p>This configuration successfully stops the backend being able to be accessed via curl or other tools. However, the UI can no longer contact the backend.</p>\n<p>What would be the proper allowedOrigins?</p>\n"},{"tags":["java","jackson","jackson-databind"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691227947,"post_id":76835882,"comment_id":135465859,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":11498079,"reputation":1,"user_id":8426696,"display_name":"C.Loong"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691152074,"creation_date":1691152074,"question_id":76835882,"body_markdown":"I have a Map&lt;String,Object&gt; = new HashMap(). I want to configure a serializer for the value corresponding to the key named &quot;specialKey&quot; (or other keys) in a programmatic way. \r\n\r\nI tried to override the parent class (MapSerializer.class) serialization method to implement this. However, I realized it would lose a lot of logic from the original source code. Is there a better approach to accomplish this?","title":"How to configure a custom serializer for the value of a specified key in a Map","body":"<p>I have a Map&lt;String,Object&gt; = new HashMap(). I want to configure a serializer for the value corresponding to the key named &quot;specialKey&quot; (or other keys) in a programmatic way.</p>\n<p>I tried to override the parent class (MapSerializer.class) serialization method to implement this. However, I realized it would lose a lot of logic from the original source code. Is there a better approach to accomplish this?</p>\n"},{"tags":["java","android","image-classification"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1691152014,"post_id":76764413,"comment_id":135456656,"body_markdown":"Does it work on the same images without tflite?","body":"Does it work on the same images without tflite?"},{"owner":{"account_id":26890580,"reputation":82,"user_id":20469419,"display_name":"SILA"},"score":0,"creation_date":1691402532,"post_id":76764413,"comment_id":135481706,"body_markdown":"Yes,  I will test it again and add it to the question.","body":"Yes,  I will test it again and add it to the question."},{"owner":{"account_id":26890580,"reputation":82,"user_id":20469419,"display_name":"SILA"},"score":0,"creation_date":1691573545,"post_id":76764413,"comment_id":135508701,"body_markdown":"Hi, @dan1st I followed here :https://keras.io/examples/vision/image_classification_efficientnet_fine_tuning/ AND https://github.com/vatsaldpatel/EfficientNet-Transfer-Learning/blob/master/transfer_learning_EfficientNet.py this is mine: https://github.com/usertttwm/EfficientNetImageClassification/blob/main/dinnerTrayBreakfastTrayImageClassification.ipynb\nadditionally I used callback for best model. and I printed the classification report. the result is always 1.00 overfitting? Do you have an idea ? Is there anything I missed? Thank you very much.","body":"Hi, @dan1st I followed here :<a href=\"https://keras.io/examples/vision/image_classification_efficientnet_fine_tuning/\" rel=\"nofollow noreferrer\">keras.io/examples/vision/&hellip;</a> AND <a href=\"https://github.com/vatsaldpatel/EfficientNet-Transfer-Learning/blob/master/transfer_learning_EfficientNet.py\" rel=\"nofollow noreferrer\">github.com/vatsaldpatel/EfficientNet-Transfer-Learning/blob/&zwnj;&#8203;&hellip;</a> this is mine: <a href=\"https://github.com/usertttwm/EfficientNetImageClassification/blob/main/dinnerTrayBreakfastTrayImageClassification.ipynb\" rel=\"nofollow noreferrer\">github.com/usertttwm/EfficientNetImageClassification/blob/ma&zwnj;&#8203;in/&hellip;</a> additionally I used callback for best model. and I printed the classification report. the result is always 1.00 overfitting? Do you have an idea ? Is there anything I missed? Thank you very much."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1691573628,"post_id":76764413,"comment_id":135508720,"body_markdown":"Do you get that result on the training or on a distinct test set? Where are you evaluating it?","body":"Do you get that result on the training or on a distinct test set? Where are you evaluating it?"},{"owner":{"account_id":26890580,"reputation":82,"user_id":20469419,"display_name":"SILA"},"score":0,"creation_date":1691589316,"post_id":76764413,"comment_id":135512182,"body_markdown":"I used the test folder for the classification report @dan1st","body":"I used the test folder for the classification report @dan1st"}],"owner":{"account_id":26890580,"reputation":82,"user_id":20469419,"display_name":"SILA"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691151882,"creation_date":1690299975,"question_id":76764413,"body_markdown":"I did object detection. I cropped the detected object. Now i need to classify this cropped image. I followed this tutorial for classification. https://www.kaggle.com/code/kmkarakaya/transfer-learning-for-image-classification.\r\n\r\nmy report results: I have two classes: EveningTray and BreakfastTray\r\n\r\n\r\n [![result][1]][1]\r\n\r\n\r\n\r\nI converted this model to .tflite. on android the result is always 100% eveningTray. I am missing this part. \r\n\r\n\r\n\r\n    public class TFLiteObjectDetectionAPIModel implements ClassifierTwo {\r\n        private static final String TAG = &quot;TFLiteObjectDetectionAPIModelWithInterpreter&quot;;\r\n    \r\n        private static final int NUM_DETECTIONS = 10;\r\n        private static final float IMAGE_MEAN = 127.5f;\r\n        private static final float IMAGE_STD = 127.5f;\r\n        private static final int NUM_THREADS = 4;\r\n        private boolean isModelQuantized;\r\n    \r\n        private int inputSize;\r\n    \r\n        private final List&lt;String&gt; labels = new ArrayList&lt;&gt;();\r\n        private int[] intValues;\r\n    \r\n        private float[][][] outputLocations;\r\n        private float[][] outputClasses;\r\n    \r\n        private float[][] outputScores;\r\n        private float[] numDetections;\r\n    \r\n        private ByteBuffer imgData;\r\n    \r\n        private MappedByteBuffer tfLiteModel;\r\n        private Interpreter.Options tfLiteOptions;\r\n        private Interpreter tfLite;\r\n    \r\n        private float[][] foodMap;\r\n        private static final int FOOD_SIZE = 2;\r\n        private static final float WHITE_THRESH = 255f;\r\n    \r\n        private TFLiteObjectDetectionAPIModel() {}\r\n        /** Memory-map the model file in Assets. */\r\n        private static MappedByteBuffer loadModelFile(AssetManager assets, String modelFilename)\r\n                throws IOException {\r\n            AssetFileDescriptor fileDescriptor = assets.openFd(modelFilename);\r\n            FileInputStream inputStream = new FileInputStream(fileDescriptor.getFileDescriptor());\r\n            FileChannel fileChannel = inputStream.getChannel();\r\n            long startOffset = fileDescriptor.getStartOffset();\r\n            long declaredLength = fileDescriptor.getDeclaredLength();\r\n            return fileChannel.map(FileChannel.MapMode.READ_ONLY, startOffset, declaredLength);\r\n        }\r\n        public static ClassifierTwo create(\r\n                final Context context,\r\n                final String modelFilename,\r\n                final String labelFilename,\r\n                final int inputSize,\r\n                final boolean isQuantized)\r\n                throws IOException {\r\n            final TFLiteObjectDetectionAPIModel d = new TFLiteObjectDetectionAPIModel();\r\n    \r\n            AssetManager am = context.getAssets();\r\n            InputStream is = am.open(labelFilename);\r\n    \r\n            MappedByteBuffer modelFile = loadModelFile(context.getAssets(), modelFilename);\r\n            MetadataExtractor metadata = new MetadataExtractor(modelFile);\r\n            try (BufferedReader br =\r\n                         new BufferedReader(\r\n                                 new InputStreamReader(is))) {\r\n                String line;\r\n                while ((line = br.readLine()) != null) {\r\n                    //Log.w(TAG, line);\r\n                    d.labels.add(line);\r\n                }\r\n            }\r\n    \r\n            d.inputSize = inputSize;\r\n    \r\n            try {\r\n                Interpreter.Options options = new Interpreter.Options();\r\n                options.setNumThreads(NUM_THREADS);\r\n                options.setUseXNNPACK(true);\r\n                d.tfLite = new Interpreter(modelFile, options);\r\n                d.tfLiteModel = modelFile;\r\n                d.tfLiteOptions = options;\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n    \r\n            d.isModelQuantized = isQuantized;\r\n            // Pre-allocate buffers.\r\n            int numBytesPerChannel;\r\n            if (isQuantized) {\r\n                numBytesPerChannel = 1; // Quantized\r\n            } else {\r\n                numBytesPerChannel = 4; // Floating point\r\n            }\r\n            d.imgData = ByteBuffer.allocateDirect(1 * d.inputSize * d.inputSize * 3 * numBytesPerChannel);\r\n            d.imgData.order(ByteOrder.nativeOrder());\r\n            d.intValues = new int[d.inputSize * d.inputSize];\r\n    \r\n            d.outputLocations = new float[1][NUM_DETECTIONS][2];\r\n            d.outputClasses = new float[1][NUM_DETECTIONS];\r\n            d.outputScores = new float[1][NUM_DETECTIONS];\r\n            d.numDetections = new float[1];\r\n            return d;\r\n        }\r\n    \r\n        @Override\r\n        public String recognizeImage1(final Bitmap bitmap) {\r\n            // Log this method so that it can be analyzed with systrace.\r\n            Trace.beginSection(&quot;recognizeImage1&quot;);\r\n    \r\n            Trace.beginSection(&quot;preprocessBitmap&quot;);\r\n            // Preprocess the image data from 0-255 int to normalized float based\r\n            // on the provided parameters.\r\n            bitmap.getPixels(intValues, 0, bitmap.getWidth(), 0, 0, bitmap.getWidth(), bitmap.getHeight());\r\n    \r\n            imgData.rewind();\r\n            for (int i = 0; i &lt; inputSize; ++i) {\r\n                for (int j = 0; j &lt; inputSize; ++j) {\r\n                    int pixelValue = intValues[i * inputSize + j];\r\n    \r\n    \r\n                    if (isModelQuantized) {\r\n                        // Quantized model\r\n                        imgData.put((byte) ((pixelValue &gt;&gt; 16) &amp; 0xFF));\r\n                        imgData.put((byte) ((pixelValue &gt;&gt; 8) &amp; 0xFF));\r\n                        imgData.put((byte) (pixelValue &amp; 0xFF));\r\n                    } else {\r\n                        imgData.putFloat((pixelValue &amp; 0xFF) / WHITE_THRESH);\r\n                        imgData.putFloat(((pixelValue &gt;&gt; 8) &amp; 0xFF) / WHITE_THRESH);\r\n                        imgData.putFloat(((pixelValue &gt;&gt; 16) &amp; 0xFF) / WHITE_THRESH);\r\n                    }\r\n                }\r\n            }\r\n    \r\n    \r\n            Trace.endSection();\r\n            // Copy the input data into TensorFlow.\r\n            Trace.beginSection(&quot;feed&quot;);\r\n    \r\n    \r\n            Object[] inputArray = {imgData};\r\n    \r\n            Map&lt;Integer, Object&gt; outputMap = new HashMap&lt;&gt;();\r\n    \r\n            foodMap = new float[1][FOOD_SIZE];\r\n    \r\n    \r\n    \r\n            outputMap.put(0, foodMap);\r\n            Trace.endSection();\r\n    \r\n            // Run the inference call.\r\n            Trace.beginSection(&quot;run&quot;);\r\n    \r\n    \r\n            tfLite.runForMultipleInputsOutputs(inputArray, outputMap);\r\n    \r\n    \r\n            Log.w(&quot;traytype&quot;, &quot;!!!traytype: &quot; + foodMap[0][0] + &quot;|&quot; + foodMap[0][1] );\r\n    \r\n            Integer foodInd = 0;\r\n     \r\n            Float max = -1f;\r\n            for (int i = 0; i &lt; foodMap[0].length; i++) {\r\n                float currValue = foodMap[0][i];\r\n    \r\n                if (currValue &gt; max) {\r\n                    max = currValue;\r\n                    foodInd = i;\r\n                }\r\n    \r\n            }\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n            List&lt;String&gt; foodList = Arrays.asList(&quot;eveningTray&quot;, &quot;breakfastTray&quot;);\r\n    \r\n    \r\n            String label = &quot;traytype: &quot; + foodList.get(foodInd);\r\n    \r\n            Trace.endSection();\r\n    \r\n            final int numDetectionsOutput = 1;\r\n            final ArrayList&lt;Recognition&gt; recognitions = new ArrayList&lt;&gt;(numDetectionsOutput);\r\n    \r\n    \r\n    \r\n            Trace.endSection();\r\n            return label;\r\n        }\r\n    //    @Override\r\n    //    public List&lt;Recognition&gt; recognizeImage(Bitmap bitmap) {\r\n    //        return null;\r\n    //    }\r\n    \r\n    \r\n    \r\n        @Override\r\n        public void enableStatLogging(boolean debug) {\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public String getStatString() {\r\n            return null;\r\n        }\r\n    \r\n        @Override\r\n        public void close() {\r\n            if (tfLite != null) {\r\n                tfLite.close();\r\n                tfLite = null;\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void setNumThreads(int num_threads) {\r\n            if (tfLite != null) {\r\n                tfLiteOptions.setNumThreads(num_threads);\r\n                recreateInterpreter();\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void setUseNNAPI(boolean isChecked) {\r\n            if (tfLite != null) {\r\n                tfLiteOptions.setUseNNAPI(isChecked);\r\n                recreateInterpreter();\r\n            }\r\n        }\r\n    \r\n        private void recreateInterpreter() {\r\n            tfLite.close();\r\n            tfLite = new Interpreter(tfLiteModel, tfLiteOptions);\r\n        }\r\n    \r\n        @Override\r\n        public float getObjThresh() {\r\n            return 0;\r\n        }\r\n    \r\n    }\r\n\r\n\r\nI followed here for classification in android:  https://www.youtube.com/watch?v=ZepT3N6aNFM&amp;t=881s\r\n\r\nupdate:\r\nThe problem may be  the model.\r\n\r\n  [1]: https://i.stack.imgur.com/66BiE.jpg\r\n","title":"Classification After Cropping","body":"<p>I did object detection. I cropped the detected object. Now i need to classify this cropped image. I followed this tutorial for classification. <a href=\"https://www.kaggle.com/code/kmkarakaya/transfer-learning-for-image-classification\" rel=\"nofollow noreferrer\">https://www.kaggle.com/code/kmkarakaya/transfer-learning-for-image-classification</a>.</p>\n<p>my report results: I have two classes: EveningTray and BreakfastTray</p>\n<p><a href=\"https://i.stack.imgur.com/66BiE.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/66BiE.jpg\" alt=\"result\" /></a></p>\n<p>I converted this model to .tflite. on android the result is always 100% eveningTray. I am missing this part.</p>\n<pre><code>public class TFLiteObjectDetectionAPIModel implements ClassifierTwo {\n    private static final String TAG = &quot;TFLiteObjectDetectionAPIModelWithInterpreter&quot;;\n\n    private static final int NUM_DETECTIONS = 10;\n    private static final float IMAGE_MEAN = 127.5f;\n    private static final float IMAGE_STD = 127.5f;\n    private static final int NUM_THREADS = 4;\n    private boolean isModelQuantized;\n\n    private int inputSize;\n\n    private final List&lt;String&gt; labels = new ArrayList&lt;&gt;();\n    private int[] intValues;\n\n    private float[][][] outputLocations;\n    private float[][] outputClasses;\n\n    private float[][] outputScores;\n    private float[] numDetections;\n\n    private ByteBuffer imgData;\n\n    private MappedByteBuffer tfLiteModel;\n    private Interpreter.Options tfLiteOptions;\n    private Interpreter tfLite;\n\n    private float[][] foodMap;\n    private static final int FOOD_SIZE = 2;\n    private static final float WHITE_THRESH = 255f;\n\n    private TFLiteObjectDetectionAPIModel() {}\n    /** Memory-map the model file in Assets. */\n    private static MappedByteBuffer loadModelFile(AssetManager assets, String modelFilename)\n            throws IOException {\n        AssetFileDescriptor fileDescriptor = assets.openFd(modelFilename);\n        FileInputStream inputStream = new FileInputStream(fileDescriptor.getFileDescriptor());\n        FileChannel fileChannel = inputStream.getChannel();\n        long startOffset = fileDescriptor.getStartOffset();\n        long declaredLength = fileDescriptor.getDeclaredLength();\n        return fileChannel.map(FileChannel.MapMode.READ_ONLY, startOffset, declaredLength);\n    }\n    public static ClassifierTwo create(\n            final Context context,\n            final String modelFilename,\n            final String labelFilename,\n            final int inputSize,\n            final boolean isQuantized)\n            throws IOException {\n        final TFLiteObjectDetectionAPIModel d = new TFLiteObjectDetectionAPIModel();\n\n        AssetManager am = context.getAssets();\n        InputStream is = am.open(labelFilename);\n\n        MappedByteBuffer modelFile = loadModelFile(context.getAssets(), modelFilename);\n        MetadataExtractor metadata = new MetadataExtractor(modelFile);\n        try (BufferedReader br =\n                     new BufferedReader(\n                             new InputStreamReader(is))) {\n            String line;\n            while ((line = br.readLine()) != null) {\n                //Log.w(TAG, line);\n                d.labels.add(line);\n            }\n        }\n\n        d.inputSize = inputSize;\n\n        try {\n            Interpreter.Options options = new Interpreter.Options();\n            options.setNumThreads(NUM_THREADS);\n            options.setUseXNNPACK(true);\n            d.tfLite = new Interpreter(modelFile, options);\n            d.tfLiteModel = modelFile;\n            d.tfLiteOptions = options;\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n\n        d.isModelQuantized = isQuantized;\n        // Pre-allocate buffers.\n        int numBytesPerChannel;\n        if (isQuantized) {\n            numBytesPerChannel = 1; // Quantized\n        } else {\n            numBytesPerChannel = 4; // Floating point\n        }\n        d.imgData = ByteBuffer.allocateDirect(1 * d.inputSize * d.inputSize * 3 * numBytesPerChannel);\n        d.imgData.order(ByteOrder.nativeOrder());\n        d.intValues = new int[d.inputSize * d.inputSize];\n\n        d.outputLocations = new float[1][NUM_DETECTIONS][2];\n        d.outputClasses = new float[1][NUM_DETECTIONS];\n        d.outputScores = new float[1][NUM_DETECTIONS];\n        d.numDetections = new float[1];\n        return d;\n    }\n\n    @Override\n    public String recognizeImage1(final Bitmap bitmap) {\n        // Log this method so that it can be analyzed with systrace.\n        Trace.beginSection(&quot;recognizeImage1&quot;);\n\n        Trace.beginSection(&quot;preprocessBitmap&quot;);\n        // Preprocess the image data from 0-255 int to normalized float based\n        // on the provided parameters.\n        bitmap.getPixels(intValues, 0, bitmap.getWidth(), 0, 0, bitmap.getWidth(), bitmap.getHeight());\n\n        imgData.rewind();\n        for (int i = 0; i &lt; inputSize; ++i) {\n            for (int j = 0; j &lt; inputSize; ++j) {\n                int pixelValue = intValues[i * inputSize + j];\n\n\n                if (isModelQuantized) {\n                    // Quantized model\n                    imgData.put((byte) ((pixelValue &gt;&gt; 16) &amp; 0xFF));\n                    imgData.put((byte) ((pixelValue &gt;&gt; 8) &amp; 0xFF));\n                    imgData.put((byte) (pixelValue &amp; 0xFF));\n                } else {\n                    imgData.putFloat((pixelValue &amp; 0xFF) / WHITE_THRESH);\n                    imgData.putFloat(((pixelValue &gt;&gt; 8) &amp; 0xFF) / WHITE_THRESH);\n                    imgData.putFloat(((pixelValue &gt;&gt; 16) &amp; 0xFF) / WHITE_THRESH);\n                }\n            }\n        }\n\n\n        Trace.endSection();\n        // Copy the input data into TensorFlow.\n        Trace.beginSection(&quot;feed&quot;);\n\n\n        Object[] inputArray = {imgData};\n\n        Map&lt;Integer, Object&gt; outputMap = new HashMap&lt;&gt;();\n\n        foodMap = new float[1][FOOD_SIZE];\n\n\n\n        outputMap.put(0, foodMap);\n        Trace.endSection();\n\n        // Run the inference call.\n        Trace.beginSection(&quot;run&quot;);\n\n\n        tfLite.runForMultipleInputsOutputs(inputArray, outputMap);\n\n\n        Log.w(&quot;traytype&quot;, &quot;!!!traytype: &quot; + foodMap[0][0] + &quot;|&quot; + foodMap[0][1] );\n\n        Integer foodInd = 0;\n \n        Float max = -1f;\n        for (int i = 0; i &lt; foodMap[0].length; i++) {\n            float currValue = foodMap[0][i];\n\n            if (currValue &gt; max) {\n                max = currValue;\n                foodInd = i;\n            }\n\n        }\n\n\n\n\n\n\n        List&lt;String&gt; foodList = Arrays.asList(&quot;eveningTray&quot;, &quot;breakfastTray&quot;);\n\n\n        String label = &quot;traytype: &quot; + foodList.get(foodInd);\n\n        Trace.endSection();\n\n        final int numDetectionsOutput = 1;\n        final ArrayList&lt;Recognition&gt; recognitions = new ArrayList&lt;&gt;(numDetectionsOutput);\n\n\n\n        Trace.endSection();\n        return label;\n    }\n//    @Override\n//    public List&lt;Recognition&gt; recognizeImage(Bitmap bitmap) {\n//        return null;\n//    }\n\n\n\n    @Override\n    public void enableStatLogging(boolean debug) {\n\n    }\n\n    @Override\n    public String getStatString() {\n        return null;\n    }\n\n    @Override\n    public void close() {\n        if (tfLite != null) {\n            tfLite.close();\n            tfLite = null;\n        }\n    }\n\n    @Override\n    public void setNumThreads(int num_threads) {\n        if (tfLite != null) {\n            tfLiteOptions.setNumThreads(num_threads);\n            recreateInterpreter();\n        }\n    }\n\n    @Override\n    public void setUseNNAPI(boolean isChecked) {\n        if (tfLite != null) {\n            tfLiteOptions.setUseNNAPI(isChecked);\n            recreateInterpreter();\n        }\n    }\n\n    private void recreateInterpreter() {\n        tfLite.close();\n        tfLite = new Interpreter(tfLiteModel, tfLiteOptions);\n    }\n\n    @Override\n    public float getObjThresh() {\n        return 0;\n    }\n\n}\n</code></pre>\n<p>I followed here for classification in android:  <a href=\"https://www.youtube.com/watch?v=ZepT3N6aNFM&amp;t=881s\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=ZepT3N6aNFM&amp;t=881s</a></p>\n<p>update:\nThe problem may be  the model.</p>\n"},{"tags":["java","infinite-loop","stack-overflow"],"comments":[{"owner":{"account_id":1441111,"reputation":815,"user_id":1361248,"accept_rate":56,"display_name":"Michael"},"score":2,"creation_date":1417384830,"post_id":27218736,"comment_id":42916751,"body_markdown":"https://en.wikipedia.org/wiki/Buffer_overflow","body":"<a href=\"https://en.wikipedia.org/wiki/Buffer_overflow\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Buffer_overflow</a>"}],"answers":[{"tags":[],"owner":{"account_id":136532,"reputation":886,"user_id":340090,"display_name":"Marko Živanović"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1417384878,"creation_date":1417384878,"answer_id":27218761,"question_id":27218736,"body_markdown":"If, instead of infinite loop, you have infinite (or very deep) recursion (function invoking itself), then you will get stack overflow. Whenever a function is invoked, some part of stack memory is consumed. Once all the stack is exhausted, you get - stack overflow error.","title":"Stack Overflow error vs. Infinite loop","body":"<p>If, instead of infinite loop, you have infinite (or very deep) recursion (function invoking itself), then you will get stack overflow. Whenever a function is invoked, some part of stack memory is consumed. Once all the stack is exhausted, you get - stack overflow error.</p>\n"},{"tags":[],"owner":{"account_id":2972927,"reputation":1413,"user_id":2524630,"display_name":"David.Jones"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1417384896,"creation_date":1417384896,"answer_id":27218767,"question_id":27218736,"body_markdown":"These are not the same thing. Infinite loop error is dealing with iterative loops (no recursion), where as most stack overflow errors are dealing with recursion. \r\n\r\nYou should google &quot;What is a stack overflow error&quot;:\r\n\r\n&gt; The most common cause of StackOverFlowError is excessively deep or infinite recursion. In Java: There are two areas in memory the heap and stack. The stack memory is used to store local variables and function call, while heap memory is used to store objects in Java.\r\n","title":"Stack Overflow error vs. Infinite loop","body":"<p>These are not the same thing. Infinite loop error is dealing with iterative loops (no recursion), where as most stack overflow errors are dealing with recursion. </p>\n\n<p>You should google \"What is a stack overflow error\":</p>\n\n<blockquote>\n  <p>The most common cause of StackOverFlowError is excessively deep or infinite recursion. In Java: There are two areas in memory the heap and stack. The stack memory is used to store local variables and function call, while heap memory is used to store objects in Java.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":10041612,"reputation":808,"user_id":7424232,"display_name":"Safwat Fathi"},"score":0,"creation_date":1691226519,"post_id":76835816,"comment_id":135465732,"body_markdown":"I am just demonstrating a new condition for stack overflow error it also can happen in any language, About the question age it&#39;s OK to answer a question with much more years than that if i am making a contribution someone might see it as useful.","body":"I am just demonstrating a new condition for stack overflow error it also can happen in any language, About the question age it&#39;s OK to answer a question with much more years than that if i am making a contribution someone might see it as useful."}],"tags":[],"owner":{"account_id":10041612,"reputation":808,"user_id":7424232,"display_name":"Safwat Fathi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691151489,"creation_date":1691151489,"answer_id":76835816,"question_id":27218736,"body_markdown":"Stack overflow error can also be caused by never ending function call loop.\r\n\r\nA simple example in TypeScript:\r\n\r\n    function foo(a: number): number {\r\n        const localFooValue = 12;\r\n        return bar(localFooValue + a);\r\n    }\r\n    \r\n    function bar(b: number): number {\r\n        const localBarValue = 4;\r\n        return foo(localBarValue * b);\r\n    }\r\n\r\nThe preceding code snippet creates stack overflow error, With each `foo` function calling `bar` function and vice-versa this causes infinite function call loop. ","title":"Stack Overflow error vs. Infinite loop","body":"<p>Stack overflow error can also be caused by never ending function call loop.</p>\n<p>A simple example in TypeScript:</p>\n<pre><code>function foo(a: number): number {\n    const localFooValue = 12;\n    return bar(localFooValue + a);\n}\n\nfunction bar(b: number): number {\n    const localBarValue = 4;\n    return foo(localBarValue * b);\n}\n</code></pre>\n<p>The preceding code snippet creates stack overflow error, With each <code>foo</code> function calling <code>bar</code> function and vice-versa this causes infinite function call loop.</p>\n"}],"owner":{"account_id":5367491,"reputation":2199,"user_id":4276951,"accept_rate":71,"display_name":"A P"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10325,"favorite_count":0,"down_vote_count":3,"up_vote_count":8,"accepted_answer_id":27218761,"answer_count":3,"score":5,"last_activity_date":1691151489,"creation_date":1417384725,"question_id":27218736,"body_markdown":"I know what an Infinite Loop error is. Is a stack overflow error the same thing. If not, what is the difference?\r\n\r\nCan you give example code as well?","title":"Stack Overflow error vs. Infinite loop","body":"<p>I know what an Infinite Loop error is. Is a stack overflow error the same thing. If not, what is the difference?</p>\n\n<p>Can you give example code as well?</p>\n"},{"tags":["java","ant","jaxb","xjc"],"owner":{"account_id":4264622,"reputation":39,"user_id":3488017,"display_name":"Arun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691151234,"creation_date":1691151234,"question_id":76835774,"body_markdown":"I want to generate a hashmap to hold the elements under an element. So that I can fetch or update these elements in a single call. So I tried generating a binding file for this. But it never generates the classes which I am looking for. I am expecting classes &quot;MappingMap&quot; and &quot;MappingMapAdapter&quot; to be generated under package &quot;pkg.beans&quot;, but these two are not getting generated. Remaining jaxb classes are created properly. I am using ant script to run the xjc.\r\n\r\nHere are the details:\r\n\r\n**configuration.xsd**\r\n\r\n```\r\n&lt;xs:element name=&quot;mapping_data&quot;&gt;\r\n    &lt;xs:complexType&gt;\r\n\t    &lt;xs:sequence&gt;\r\n\t\t    &lt;xs:element minOccurs=&quot;0&quot; name=&quot;mapping&quot; type=&quot;test:MappingModeller&quot;/&gt;\r\n\t\t&lt;/xs:sequence&gt;\r\n\t&lt;/xs:complexType&gt;\r\n&lt;/xs:element&gt;\r\n&lt;xs:complexType name=&quot;MappingModeller&quot;&gt;\r\n    &lt;xs:sequence&gt;\r\n\t    &lt;xs:element name=&quot;entry&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;&gt;\r\n\t\t    &lt;xs:complexType&gt;\r\n\t\t        &lt;xs:sequence&gt;\r\n\t\t\t        &lt;xs:element name=&quot;key&quot; type=&quot;xs:string&quot;/&gt;\r\n     \t\t\t    &lt;xs:element name=&quot;value&quot; type=&quot;xs:string&quot;/&gt;\r\n\t\t        &lt;/xs:sequence&gt;\r\n\t\t    &lt;/xs:complexType&gt;\r\n\t    &lt;/xs:element&gt;\r\n    &lt;/xs:sequence&gt;\r\n&lt;/xs:complexType&gt;\r\n```\r\n\r\n**binding.xjb**\r\n\r\n```\r\n&lt;jaxb:bindings xmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; version=&quot;2.1&quot;&gt;\r\n    &lt;jaxb:bindings schemaLocation=&quot;..\\..\\..\\..\\..\\xsd\\configuration.xsd&quot;&gt;\r\n        &lt;jaxb:bindings node=&quot;//xs:element[@name=&#39;mapping_data&#39;]//xs:element[@name=&#39;mapping&#39;]&quot;&gt;\r\n            &lt;jaxb:property&gt;\r\n                &lt;jaxb:baseType name=&quot;pkg.beans.MappingMap&amp;lt;String,String&amp;gt;&quot; /&gt;\r\n            &lt;/jaxb:property&gt;\r\n        &lt;/jaxb:bindings&gt;\r\n    &lt;/jaxb:bindings&gt;\r\n&lt;/jaxb:bindings&gt;\r\n```\r\n\r\nI am using ant script to generate the jaxb classes from the xsd. \r\n\r\n```\r\n&lt;taskdef name=&quot;xjc&quot; classname=&quot;com.sun.tools.xjc.XJCTask&quot;&gt;\r\n    &lt;classpath&gt;\r\n\t    &lt;fileset dir=&quot;${dir.jaxb.home}/mod/&quot; includes=&quot;*.jar&quot;/&gt;\r\n\t&lt;/classpath&gt;\r\n&lt;/taskdef&gt;\r\n\r\n&lt;target name=&quot;generate_jaxb_parser_for_schema&quot;&gt;\r\n    &lt;xjc destdir=&quot;${dir.generated.jaxb}&quot; package=&quot;pkg.beans&quot; removeOldOutput=&quot;yes&quot;&gt;\r\n\t    &lt;schema dir=&quot;${dir.xsd}&quot; includes=&quot;configuration.xsd&quot;/&gt;\r\n\t\t&lt;binding dir=&quot;${dir.jaxb.bindings}&quot; includes=&quot;binding.xjb&quot;/&gt;\r\n\t\t&lt;produces dir=&quot;${dir.generated.jaxb}/pkg/beans&quot; includes=&quot;*&quot;/&gt;\r\n\t\t&lt;arg value=&quot;-no-header&quot;/&gt;\r\n\t\t&lt;arg value=&quot;-encoding&quot;/&gt;\r\n\t\t&lt;arg value=&quot;UTF-8&quot;/&gt;\t\r\n\t&lt;/xjc&gt;\r\n&lt;/target&gt;\r\n```\r\n\r\nThis is the snippet of MappingData.java which has unresolved &quot;MappingMap&quot;:\r\n\r\n```\r\n    @XmlRootElement(name = &quot;mapping_data&quot;)\r\n    public class MappingData {\r\n\r\n        @XmlElement(type = MappingModeller.class)\r\n        protected MappingMap&lt;String, String&gt; mapping;\r\n```\r\n\r\nAm I doing something wrong? Please help.\r\n\r\n","title":"XJC does not generate jaxb binding basetType class","body":"<p>I want to generate a hashmap to hold the elements under an element. So that I can fetch or update these elements in a single call. So I tried generating a binding file for this. But it never generates the classes which I am looking for. I am expecting classes &quot;MappingMap&quot; and &quot;MappingMapAdapter&quot; to be generated under package &quot;pkg.beans&quot;, but these two are not getting generated. Remaining jaxb classes are created properly. I am using ant script to run the xjc.</p>\n<p>Here are the details:</p>\n<p><strong>configuration.xsd</strong></p>\n<pre><code>&lt;xs:element name=&quot;mapping_data&quot;&gt;\n    &lt;xs:complexType&gt;\n        &lt;xs:sequence&gt;\n            &lt;xs:element minOccurs=&quot;0&quot; name=&quot;mapping&quot; type=&quot;test:MappingModeller&quot;/&gt;\n        &lt;/xs:sequence&gt;\n    &lt;/xs:complexType&gt;\n&lt;/xs:element&gt;\n&lt;xs:complexType name=&quot;MappingModeller&quot;&gt;\n    &lt;xs:sequence&gt;\n        &lt;xs:element name=&quot;entry&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;&gt;\n            &lt;xs:complexType&gt;\n                &lt;xs:sequence&gt;\n                    &lt;xs:element name=&quot;key&quot; type=&quot;xs:string&quot;/&gt;\n                    &lt;xs:element name=&quot;value&quot; type=&quot;xs:string&quot;/&gt;\n                &lt;/xs:sequence&gt;\n            &lt;/xs:complexType&gt;\n        &lt;/xs:element&gt;\n    &lt;/xs:sequence&gt;\n&lt;/xs:complexType&gt;\n</code></pre>\n<p><strong>binding.xjb</strong></p>\n<pre><code>&lt;jaxb:bindings xmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; version=&quot;2.1&quot;&gt;\n    &lt;jaxb:bindings schemaLocation=&quot;..\\..\\..\\..\\..\\xsd\\configuration.xsd&quot;&gt;\n        &lt;jaxb:bindings node=&quot;//xs:element[@name='mapping_data']//xs:element[@name='mapping']&quot;&gt;\n            &lt;jaxb:property&gt;\n                &lt;jaxb:baseType name=&quot;pkg.beans.MappingMap&amp;lt;String,String&amp;gt;&quot; /&gt;\n            &lt;/jaxb:property&gt;\n        &lt;/jaxb:bindings&gt;\n    &lt;/jaxb:bindings&gt;\n&lt;/jaxb:bindings&gt;\n</code></pre>\n<p>I am using ant script to generate the jaxb classes from the xsd.</p>\n<pre><code>&lt;taskdef name=&quot;xjc&quot; classname=&quot;com.sun.tools.xjc.XJCTask&quot;&gt;\n    &lt;classpath&gt;\n        &lt;fileset dir=&quot;${dir.jaxb.home}/mod/&quot; includes=&quot;*.jar&quot;/&gt;\n    &lt;/classpath&gt;\n&lt;/taskdef&gt;\n\n&lt;target name=&quot;generate_jaxb_parser_for_schema&quot;&gt;\n    &lt;xjc destdir=&quot;${dir.generated.jaxb}&quot; package=&quot;pkg.beans&quot; removeOldOutput=&quot;yes&quot;&gt;\n        &lt;schema dir=&quot;${dir.xsd}&quot; includes=&quot;configuration.xsd&quot;/&gt;\n        &lt;binding dir=&quot;${dir.jaxb.bindings}&quot; includes=&quot;binding.xjb&quot;/&gt;\n        &lt;produces dir=&quot;${dir.generated.jaxb}/pkg/beans&quot; includes=&quot;*&quot;/&gt;\n        &lt;arg value=&quot;-no-header&quot;/&gt;\n        &lt;arg value=&quot;-encoding&quot;/&gt;\n        &lt;arg value=&quot;UTF-8&quot;/&gt;    \n    &lt;/xjc&gt;\n&lt;/target&gt;\n</code></pre>\n<p>This is the snippet of MappingData.java which has unresolved &quot;MappingMap&quot;:</p>\n<pre><code>    @XmlRootElement(name = &quot;mapping_data&quot;)\n    public class MappingData {\n\n        @XmlElement(type = MappingModeller.class)\n        protected MappingMap&lt;String, String&gt; mapping;\n</code></pre>\n<p>Am I doing something wrong? Please help.</p>\n"},{"tags":["java","string","escaping"],"comments":[{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1377623085,"post_id":18471500,"comment_id":27149414,"body_markdown":"You mean in an editor?","body":"You mean in an editor?"},{"owner":{"account_id":66671,"reputation":3328,"user_id":2591612,"accept_rate":96,"display_name":"Engineer2021"},"score":0,"creation_date":1377623112,"post_id":18471500,"comment_id":27149436,"body_markdown":"Just type the \\ character?","body":"Just type the \\ character?"},{"owner":{"account_id":1166666,"reputation":723,"user_id":1144756,"display_name":"Thinesh Ganeshalingam"},"score":0,"creation_date":1377623207,"post_id":18471500,"comment_id":27149479,"body_markdown":"Use StringEscapeUtils.html#escapeJava from apache commons","body":"Use StringEscapeUtils.html#escapeJava from apache commons"},{"owner":{"account_id":382670,"reputation":1433,"user_id":738046,"accept_rate":100,"display_name":"Jigglypuff"},"score":0,"creation_date":1377623207,"post_id":18471500,"comment_id":27149480,"body_markdown":"I mean using the `example` variable.","body":"I mean using the <code>example</code> variable."},{"owner":{"account_id":2028494,"reputation":943,"user_id":1812854,"accept_rate":89,"display_name":"Wayne Weibel"},"score":0,"creation_date":1377623232,"post_id":18471500,"comment_id":27149499,"body_markdown":"possible duplicate of [Escape double quotes in Java](http://stackoverflow.com/questions/6277944/escape-double-quotes-in-java)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/6277944/escape-double-quotes-in-java\">Escape double quotes in Java</a>"},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":3,"creation_date":1377623245,"post_id":18471500,"comment_id":27149505,"body_markdown":"`example.replace(&quot;&#39;&quot;, &quot;\\\\&#39;&quot;);`","body":"<code>example.replace(&quot;&#39;&quot;, &quot;\\\\&#39;&quot;);</code>"}],"answers":[{"comments":[{"owner":{"account_id":382670,"reputation":1433,"user_id":738046,"accept_rate":100,"display_name":"Jigglypuff"},"score":0,"creation_date":1377624078,"post_id":18471715,"comment_id":27149899,"body_markdown":"Thank you! It works. Sorry I didn&#39;t explain the problem clearly.","body":"Thank you! It works. Sorry I didn&#39;t explain the problem clearly."},{"owner":{"account_id":1559114,"reputation":1200,"user_id":1449443,"accept_rate":44,"display_name":"ironicaldiction"},"score":1,"creation_date":1377624436,"post_id":18471715,"comment_id":27150070,"body_markdown":"Glad to help...in the future, realize that when talking about escaping characters, most people DON&#39;T want to see a backslash in their code.  What you asked for is quite unusual.  Be sure to be super precise if deviating from what is typically done with in a given programming subject (e.g. escape characters).","body":"Glad to help...in the future, realize that when talking about escaping characters, most people DON&#39;T want to see a backslash in their code.  What you asked for is quite unusual.  Be sure to be super precise if deviating from what is typically done with in a given programming subject (e.g. escape characters)."}],"tags":[],"owner":{"account_id":1559114,"reputation":1200,"user_id":1449443,"accept_rate":44,"display_name":"ironicaldiction"},"comment_count":2,"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1377623734,"creation_date":1377623734,"answer_id":18471715,"question_id":18471500,"body_markdown":"I&#39;m not claiming elegance here, but i _think_ it does what you want it to do (please correct me if I&#39;m mistaken):\r\n\r\n    public static void main(String[] args)\r\n    {\r\n        String example = &quot;Hello, I&#39;m\\&quot; here&quot;;\r\n        example = example.replaceAll(&quot;&#39;&quot;, &quot;\\\\\\\\&#39;&quot;);\r\n        example = example.replaceAll(&quot;\\&quot;&quot;, &quot;\\\\\\\\\\&quot;&quot;);\r\n        System.out.println(example);\r\n    }\r\n\r\noutputs\r\n\r\n    Hello, I\\&#39;m\\&quot; here\r\n","title":"How can I add escape characters to a Java String?","body":"<p>I'm not claiming elegance here, but i <em>think</em> it does what you want it to do (please correct me if I'm mistaken):</p>\n\n<pre><code>public static void main(String[] args)\n{\n    String example = \"Hello, I'm\\\" here\";\n    example = example.replaceAll(\"'\", \"\\\\\\\\'\");\n    example = example.replaceAll(\"\\\"\", \"\\\\\\\\\\\"\");\n    System.out.println(example);\n}\n</code></pre>\n\n<p>outputs</p>\n\n<pre><code>Hello, I\\'m\\\" here\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2233894,"reputation":5674,"user_id":1970832,"accept_rate":83,"display_name":"Rahul Sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1594253397,"creation_date":1594253397,"answer_id":62805459,"question_id":18471500,"body_markdown":"Try [Apache Commons Text][1] library- \r\n\r\n        System.out.println(StringEscapeUtils.escapeCsv(&quot;a\\&quot;,&quot;));\r\n        System.out.println(StringEscapeUtils.escapeJson(&quot;a\\&quot;,&quot;));\r\n        System.out.println(StringEscapeUtils.escapeEcmaScript(&quot;Hello, I&#39;m \\&quot;here&quot;));\r\n\r\nResult:\r\n\r\n    &quot;a&quot;&quot;,&quot;\r\n    a\\&quot;,\r\n    Hello, I\\&#39;m \\&quot;here\r\n\r\n  [1]: https://commons.apache.org/proper/commons-text/","title":"How can I add escape characters to a Java String?","body":"<p>Try <a href=\"https://commons.apache.org/proper/commons-text/\" rel=\"nofollow noreferrer\">Apache Commons Text</a> library-</p>\n<pre><code>    System.out.println(StringEscapeUtils.escapeCsv(&quot;a\\&quot;,&quot;));\n    System.out.println(StringEscapeUtils.escapeJson(&quot;a\\&quot;,&quot;));\n    System.out.println(StringEscapeUtils.escapeEcmaScript(&quot;Hello, I'm \\&quot;here&quot;));\n</code></pre>\n<p>Result:</p>\n<pre><code>&quot;a&quot;&quot;,&quot;\na\\&quot;,\nHello, I\\'m \\&quot;here\n</code></pre>\n"},{"tags":[],"owner":{"account_id":378670,"reputation":3959,"user_id":731548,"accept_rate":33,"display_name":"cquezel"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1596644143,"creation_date":1596643037,"answer_id":63269019,"question_id":18471500,"body_markdown":"For others who get here for a more general escaping solution, building on Apache Commons Text library you can build your own escaper. Have a look at [StringEscapeUtils][1] for examples:\r\n\r\n    import org.apache.commons.text.translate.AggregateTranslator;\r\n    import org.apache.commons.text.translate.CharSequenceTranslator;\r\n    import org.apache.commons.text.translate.LookupTranslator;\r\n    \r\n    public class CustomEscaper {\r\n    \t\r\n        private static final CharSequenceTranslator ESCAPE_CUSTOM;\r\n        \r\n        static {\r\n            final Map&lt;CharSequence, CharSequence&gt; escapeCustomMap = new HashMap&lt;&gt;();\r\n                    \t\r\n        \tescapeCustomMap.put(&quot;+&quot; ,&quot;\\\\+&quot; ); \r\n        \tescapeCustomMap.put(&quot;-&quot; ,&quot;\\\\-&quot; ); \r\n            ...\r\n            escapeCustomMap.put(&quot;\\\\&quot;, &quot;\\\\\\\\&quot;);\r\n            ESCAPE_CUSTOM = new AggregateTranslator(new LookupTranslator(escapeCustomMap));\r\n        }\r\n\r\n        public static final String customEscape(final String input) {\r\n            return ESCAPE_CUSTOM.translate(input);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringEscapeUtils.html","title":"How can I add escape characters to a Java String?","body":"<p>For others who get here for a more general escaping solution, building on Apache Commons Text library you can build your own escaper. Have a look at <a href=\"https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringEscapeUtils.html\" rel=\"nofollow noreferrer\">StringEscapeUtils</a> for examples:</p>\n<pre><code>import org.apache.commons.text.translate.AggregateTranslator;\nimport org.apache.commons.text.translate.CharSequenceTranslator;\nimport org.apache.commons.text.translate.LookupTranslator;\n\npublic class CustomEscaper {\n    \n    private static final CharSequenceTranslator ESCAPE_CUSTOM;\n    \n    static {\n        final Map&lt;CharSequence, CharSequence&gt; escapeCustomMap = new HashMap&lt;&gt;();\n                    \n        escapeCustomMap.put(&quot;+&quot; ,&quot;\\\\+&quot; ); \n        escapeCustomMap.put(&quot;-&quot; ,&quot;\\\\-&quot; ); \n        ...\n        escapeCustomMap.put(&quot;\\\\&quot;, &quot;\\\\\\\\&quot;);\n        ESCAPE_CUSTOM = new AggregateTranslator(new LookupTranslator(escapeCustomMap));\n    }\n\n    public static final String customEscape(final String input) {\n        return ESCAPE_CUSTOM.translate(input);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14112653,"reputation":33,"user_id":10195099,"display_name":"Shaheaz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691150176,"creation_date":1691150176,"answer_id":76835670,"question_id":18471500,"body_markdown":"If it is only one quote then easy but if it is double quote then use like this\r\n\r\n`eachClientName = eachClientName.replaceAll(&quot;&#39;&quot;,&quot;\\\\\\&#39;&quot;);`\r\n\r\n`eachClientName =eachClientName.replaceAll(&quot;\\&quot;&quot;,&quot;\\\\\\\\\\&quot;&quot;);`","title":"How can I add escape characters to a Java String?","body":"<p>If it is only one quote then easy but if it is double quote then use like this</p>\n<p><code>eachClientName = eachClientName.replaceAll(&quot;'&quot;,&quot;\\\\\\'&quot;);</code></p>\n<p><code>eachClientName =eachClientName.replaceAll(&quot;\\&quot;&quot;,&quot;\\\\\\\\\\&quot;&quot;);</code></p>\n"}],"owner":{"account_id":382670,"reputation":1433,"user_id":738046,"accept_rate":100,"display_name":"Jigglypuff"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67344,"favorite_count":0,"down_vote_count":2,"up_vote_count":16,"accepted_answer_id":18471715,"answer_count":4,"score":14,"last_activity_date":1691150176,"creation_date":1377622997,"question_id":18471500,"body_markdown":"If I had a string variable:\r\n\r\n    String example = &quot;Hello, I&#39;m here&quot;;\r\n\r\nand I wanted to add an escape character in front of every `&#39;` and `&quot;` **within the variable** (i.e. _not_ actually escape the characters), how would I do that?","title":"How can I add escape characters to a Java String?","body":"<p>If I had a string variable:</p>\n\n<pre><code>String example = \"Hello, I'm here\";\n</code></pre>\n\n<p>and I wanted to add an escape character in front of every <code>'</code> and <code>\"</code> <strong>within the variable</strong> (i.e. <em>not</em> actually escape the characters), how would I do that?</p>\n"},{"tags":["java","refactoring","dto"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1691090772,"post_id":76831035,"comment_id":135448477,"body_markdown":"This question would be better suited to &quot;Code Review&quot; on the Stack Exchange","body":"This question would be better suited to &quot;Code Review&quot; on the Stack Exchange"},{"owner":{"account_id":14574512,"reputation":15,"user_id":10526770,"display_name":"Kaue"},"score":0,"creation_date":1691090840,"post_id":76831035,"comment_id":135448489,"body_markdown":"@ControlAltDel Thanks, I&#39;ll post it there once I&#39;m out of the timeout!","body":"@ControlAltDel Thanks, I&#39;ll post it there once I&#39;m out of the timeout!"}],"answers":[{"tags":[],"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691149950,"creation_date":1691149950,"answer_id":76835631,"question_id":76831035,"body_markdown":"We could go by AOP solutions or by extracting validations to a method as below\r\n```\r\npublic void exampleMethod(final UserDto user, String sthElse) {\r\n        validateUser(user);\r\n\r\n        if (sthElse == null) {\r\n            throw new CustomHandledException(&quot;example&quot;);\r\n        }\r\n\r\n        GetUserResponseDto getUserResponse = client.getUserById(user.getId(), country);\r\n\r\n        if (getUserResponse == null) {\r\n            CreateUserRequestDto createUserBody = UserMapper.toCreateBody(user);\r\n            client.createUser(createUserBody);\r\n            return;\r\n        }\r\n\r\n        if (user.getLocale().equals(getUserResponse.getUser().getProfile().getLocale())){\r\n            return;\r\n        }\r\n        // validations needs to be done before updating as well by convention\r\n        // since validations were done while inserting\r\n        client.updateUser(user);\r\n    }\r\n\r\n    private boolean validateUser(UserDto userDto) {\r\n\r\n        //these declarations could be moved at class fields or constant\r\n        Predicate&lt;UserDto&gt; customDtoCheck = user -&gt;user.getGivenName().startsWith(&quot;text&quot;);\r\n        Predicate&lt;String&gt; emailValidation = RequestValidator::validateEmail;\r\n        Predicate notNull = RequestValidator::notNull;\r\n\r\n        boolean validUser = notNull.test(userDto) &amp;&amp;\r\n                            notNull.test(userDto.getId()) &amp;&amp;\r\n                            notNull.test(userDto.getGivenName()) &amp;&amp;\r\n                            notNull.test(userDto.getEmail()) &amp;&amp;\r\n                            notNull.test(userDto.getLocale()) &amp;&amp;\r\n                            emailValidation.test(userDto.getEmail()) &amp;&amp;\r\n                            customDtoCheck.test(userDto);\r\n        if (!validUser)\r\n            throw new CustomHandledException(&quot;example&quot;);\r\n\r\n        return validUser;\r\n    }\r\n```","title":"Validating user inputs on service methods in a cleaner way","body":"<p>We could go by AOP solutions or by extracting validations to a method as below</p>\n<pre><code>public void exampleMethod(final UserDto user, String sthElse) {\n        validateUser(user);\n\n        if (sthElse == null) {\n            throw new CustomHandledException(&quot;example&quot;);\n        }\n\n        GetUserResponseDto getUserResponse = client.getUserById(user.getId(), country);\n\n        if (getUserResponse == null) {\n            CreateUserRequestDto createUserBody = UserMapper.toCreateBody(user);\n            client.createUser(createUserBody);\n            return;\n        }\n\n        if (user.getLocale().equals(getUserResponse.getUser().getProfile().getLocale())){\n            return;\n        }\n        // validations needs to be done before updating as well by convention\n        // since validations were done while inserting\n        client.updateUser(user);\n    }\n\n    private boolean validateUser(UserDto userDto) {\n\n        //these declarations could be moved at class fields or constant\n        Predicate&lt;UserDto&gt; customDtoCheck = user -&gt;user.getGivenName().startsWith(&quot;text&quot;);\n        Predicate&lt;String&gt; emailValidation = RequestValidator::validateEmail;\n        Predicate notNull = RequestValidator::notNull;\n\n        boolean validUser = notNull.test(userDto) &amp;&amp;\n                            notNull.test(userDto.getId()) &amp;&amp;\n                            notNull.test(userDto.getGivenName()) &amp;&amp;\n                            notNull.test(userDto.getEmail()) &amp;&amp;\n                            notNull.test(userDto.getLocale()) &amp;&amp;\n                            emailValidation.test(userDto.getEmail()) &amp;&amp;\n                            customDtoCheck.test(userDto);\n        if (!validUser)\n            throw new CustomHandledException(&quot;example&quot;);\n\n        return validUser;\n    }\n</code></pre>\n"}],"owner":{"account_id":14574512,"reputation":15,"user_id":10526770,"display_name":"Kaue"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76835631,"answer_count":1,"score":0,"last_activity_date":1691149950,"creation_date":1691090263,"question_id":76831035,"body_markdown":"In a project, we use service methods, there, we have to validate certain required inputs for our business logic to work:\r\n\r\n  ```java\r\n  public void exampleMethod(final UserDto user, String sthElse) {\r\n    if (user.getId() == null) {\r\n      throw new CustomHandledException(&quot;example&quot;);\r\n    }\r\n    if (sthElse == null) {\r\n      throw new CustomHandledException(&quot;example&quot;);\r\n    }\r\n\r\n    GetUserResponseDto getUserResponse = client.getUserById(user.getId(), country);\r\n\r\n    if (getUserResponse == null) {\r\n      if (user.getGivenName() == null) {\r\n        throw new CustomHandledException(&quot;example&quot;);\r\n      }\r\n      if (user.getEmail() == null) {\r\n        throw new CustomHandledException(&quot;example&quot;);\r\n      }\r\n      CreateUserRequestDto createUserBody = UserMapper.toCreateBody(user);\r\n      client.createUser(createUserBody);\r\n      return;\r\n    }\r\n\r\n    if (user.getLocale().equals(getUserResponse.getUser().getProfile().getLocale())){\r\n        return;\r\n    }\r\n\r\n    client.updateUser(user);\r\n  }\r\n```\r\n\r\nEven though the code isn&#39;t necessarily wrong and is quite understandable (for me) I feel like there is something odd there, do you have any suggestions for a cleaner code?\r\n\r\nI tried to write clean code, however, it doesn&#39;t feel like it is clean.","title":"Validating user inputs on service methods in a cleaner way","body":"<p>In a project, we use service methods, there, we have to validate certain required inputs for our business logic to work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void exampleMethod(final UserDto user, String sthElse) {\n  if (user.getId() == null) {\n    throw new CustomHandledException(&quot;example&quot;);\n  }\n  if (sthElse == null) {\n    throw new CustomHandledException(&quot;example&quot;);\n  }\n\n  GetUserResponseDto getUserResponse = client.getUserById(user.getId(), country);\n\n  if (getUserResponse == null) {\n    if (user.getGivenName() == null) {\n      throw new CustomHandledException(&quot;example&quot;);\n    }\n    if (user.getEmail() == null) {\n      throw new CustomHandledException(&quot;example&quot;);\n    }\n    CreateUserRequestDto createUserBody = UserMapper.toCreateBody(user);\n    client.createUser(createUserBody);\n    return;\n  }\n\n  if (user.getLocale().equals(getUserResponse.getUser().getProfile().getLocale())){\n      return;\n  }\n\n  client.updateUser(user);\n}\n</code></pre>\n<p>Even though the code isn't necessarily wrong and is quite understandable (for me) I feel like there is something odd there, do you have any suggestions for a cleaner code?</p>\n<p>I tried to write clean code, however, it doesn't feel like it is clean.</p>\n"},{"tags":["java","android","kotlin","contentobserver","fileobserver"],"comments":[{"owner":{"account_id":26579661,"reputation":1,"user_id":20204510,"display_name":"Deepesh kumar"},"score":0,"creation_date":1691148319,"post_id":75350871,"comment_id":135455935,"body_markdown":"@Blackapps please check this","body":"@Blackapps please check this"}],"owner":{"account_id":26579661,"reputation":1,"user_id":20204510,"display_name":"Deepesh kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691149446,"creation_date":1675584402,"question_id":75350871,"body_markdown":"My application is for android 10+ , where i can&#39;t use MANAGE_EXTERNAL_STORAGE in specific application,\r\n\r\nhere i have to observe(in background) that file is created or deleted in this folder(don&#39;t have path , have folder content URI) , I have already used Scoped storage to read file , now i want observe too , so on the basis i can call any function , \r\n\r\ntaken permission \r\n\r\n```\r\n val contentResolver = requireActivity().contentResolver\r\n                    contentResolver.takePersistableUriPermission(\r\n                        treeUri!!,\r\n                        Intent.FLAG_GRANT_READ_URI_PERMISSION\r\n                    )\r\n\r\n```\r\n\r\ntried to observe like this\r\n\r\n```\r\n contentObserver = object : ContentObserver(null){\r\n\r\n            override fun onChange(selfChange: Boolean, uri: Uri?) {\r\n                super.onChange(selfChange, uri)\r\n\r\n                binding.text.text = uri\r\n                Log.e(&quot;OBSERVER OBSERVER&quot;, &quot;CHANGES CHANGES&quot;)\r\n            }\r\n        }\r\n\r\n        requireActivity().contentResolver.registerContentObserver(\r\n            path!!,\r\n            true,\r\n            contentObserver\r\n        )\r\n\r\n```\r\n\r\nand this\r\n\r\n```\r\ncontentObserver = object : ContentObserver(null){\r\n\r\n            override fun onChange(selfChange: Boolean, uri: Uri?) {\r\n                super.onChange(selfChange, uri)\r\n\r\n                binding.text.text = uri\r\n                Log.e(&quot;OBSERVER OBSERVER&quot;, &quot;CHANGES CHANGES&quot;)\r\n            }\r\n        }\r\n\r\nrequireActivity().contentResolver.notifyChange(path,contentObserver)\r\n```\r\n\r\nsometimes, don&#39;t know when app launching it will works but when this folder contents changes it&#39;s doesn&#39;t works, i want it will observe every time when application goes in backgroung or active state,not in destroyed state\r\n\r\nPls help ","title":"how to observe file is created or deleted of whatsapp status folder after android 10?","body":"<p>My application is for android 10+ , where i can't use MANAGE_EXTERNAL_STORAGE in specific application,</p>\n<p>here i have to observe(in background) that file is created or deleted in this folder(don't have path , have folder content URI) , I have already used Scoped storage to read file , now i want observe too , so on the basis i can call any function ,</p>\n<p>taken permission</p>\n<pre><code> val contentResolver = requireActivity().contentResolver\n                    contentResolver.takePersistableUriPermission(\n                        treeUri!!,\n                        Intent.FLAG_GRANT_READ_URI_PERMISSION\n                    )\n\n</code></pre>\n<p>tried to observe like this</p>\n<pre><code> contentObserver = object : ContentObserver(null){\n\n            override fun onChange(selfChange: Boolean, uri: Uri?) {\n                super.onChange(selfChange, uri)\n\n                binding.text.text = uri\n                Log.e(&quot;OBSERVER OBSERVER&quot;, &quot;CHANGES CHANGES&quot;)\n            }\n        }\n\n        requireActivity().contentResolver.registerContentObserver(\n            path!!,\n            true,\n            contentObserver\n        )\n\n</code></pre>\n<p>and this</p>\n<pre><code>contentObserver = object : ContentObserver(null){\n\n            override fun onChange(selfChange: Boolean, uri: Uri?) {\n                super.onChange(selfChange, uri)\n\n                binding.text.text = uri\n                Log.e(&quot;OBSERVER OBSERVER&quot;, &quot;CHANGES CHANGES&quot;)\n            }\n        }\n\nrequireActivity().contentResolver.notifyChange(path,contentObserver)\n</code></pre>\n<p>sometimes, don't know when app launching it will works but when this folder contents changes it's doesn't works, i want it will observe every time when application goes in backgroung or active state,not in destroyed state</p>\n<p>Pls help</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1691144501,"post_id":76834917,"comment_id":135455266,"body_markdown":"Why can&#39;t you update or replace the JDK distribution? That is _the_ solution for this.","body":"Why can&#39;t you update or replace the JDK distribution? That is <i>the</i> solution for this."},{"owner":{"account_id":25484927,"reputation":1,"user_id":19280637,"display_name":"ktckl"},"score":0,"creation_date":1691145517,"post_id":76834917,"comment_id":135455438,"body_markdown":"It is a production system, and we can&#39;t afford any resulting bugs. I don&#39;t think you can update the Java version on existing systems that lightly, can you?","body":"It is a production system, and we can&#39;t afford any resulting bugs. I don&#39;t think you can update the Java version on existing systems that lightly, can you?"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1691145759,"post_id":76834917,"comment_id":135455490,"body_markdown":"That has to be the worst reason for sticking to an outdated Java version, especially one that is **years** out of date. You&#39;re now confronted with the consequences of that decision, and instead of reconsidering, you&#39;re doubling down. Applying a workaround -- if such workaround even exists -- would far more likely result in problems than upgrading to a higher version of the same major version of Java. Java is extensively tested for backwards compatibility.","body":"That has to be the worst reason for sticking to an outdated Java version, especially one that is <b>years</b> out of date. You&#39;re now confronted with the consequences of that decision, and instead of reconsidering, you&#39;re doubling down. Applying a workaround -- if such workaround even exists -- would far more likely result in problems than upgrading to a higher version of the same major version of Java. Java is extensively tested for backwards compatibility."}],"answers":[{"tags":[],"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691149385,"creation_date":1691149385,"answer_id":76835572,"question_id":76834917,"body_markdown":"There are no alternatives nor workarounds. The TLS implementation in Java comes with the JDK. You need to upgrade the JDK to one that supports TLS 1.3. For security reasons the latest release of the version you use is recommended.","title":"Workaround for lack of TLS v1.3 support in Apache Commons Net 3.4.0 and Java 8u201","body":"<p>There are no alternatives nor workarounds. The TLS implementation in Java comes with the JDK. You need to upgrade the JDK to one that supports TLS 1.3. For security reasons the latest release of the version you use is recommended.</p>\n"}],"owner":{"account_id":25484927,"reputation":1,"user_id":19280637,"display_name":"ktckl"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691149385,"creation_date":1691143577,"question_id":76834917,"body_markdown":"I am using the Apache Commons Net 3.4.0 library to establish an FTPS connection, but I have encountered an issue with the lack of support for TLS v1.3 in the Java 8u201 release.\r\n\r\nI know that Oracle releases starting with version 8u261 have support for TLS v1.3, but I am unable to update or replace the JDK distribution.\r\n\r\nIs there a workaround or solution to this issue that would allow me to use TLS v1.3? Any help or suggestions would be greatly appreciated.\r\n","title":"Workaround for lack of TLS v1.3 support in Apache Commons Net 3.4.0 and Java 8u201","body":"<p>I am using the Apache Commons Net 3.4.0 library to establish an FTPS connection, but I have encountered an issue with the lack of support for TLS v1.3 in the Java 8u201 release.</p>\n<p>I know that Oracle releases starting with version 8u261 have support for TLS v1.3, but I am unable to update or replace the JDK distribution.</p>\n<p>Is there a workaround or solution to this issue that would allow me to use TLS v1.3? Any help or suggestions would be greatly appreciated.</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":4,"creation_date":1410972736,"post_id":25896081,"comment_id":40530401,"body_markdown":"Can you rather explain what issues you have with understanding the [documentation](http://books.sonatype.com/mvnref-book/reference/archetype-sect-using.html)? `When the generate goal is executed in interactive mode, it will prompt the user for all the previously listed parameters. When interactiveMode is false, the generate goal will use the values passed in from the command line.`","body":"Can you rather explain what issues you have with understanding the <a href=\"http://books.sonatype.com/mvnref-book/reference/archetype-sect-using.html\" rel=\"nofollow noreferrer\">documentation</a>? <code>When the generate goal is executed in interactive mode, it will prompt the user for all the previously listed parameters. When interactiveMode is false, the generate goal will use the values passed in from the command line.</code>"},{"owner":{"account_id":3836887,"reputation":2752,"user_id":3180973,"accept_rate":18,"display_name":"Maulik Patel"},"score":3,"creation_date":1410973439,"post_id":25896081,"comment_id":40530778,"body_markdown":"there is not issue, but i have understand meaning of interactive-mode and batch mode. can you tell me meaning of both?","body":"there is not issue, but i have understand meaning of interactive-mode and batch mode. can you tell me meaning of both?"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":2,"creation_date":1446709515,"post_id":25896081,"comment_id":54858811,"body_markdown":"Interactive means you need to type some answer in your keyboard and batch mode means no need to type anything maven is assuming defaults as answers.","body":"Interactive means you need to type some answer in your keyboard and batch mode means no need to type anything maven is assuming defaults as answers."}],"answers":[{"comments":[{"owner":{"account_id":1677076,"reputation":19026,"user_id":1542343,"accept_rate":84,"display_name":"gvlasov"},"score":13,"creation_date":1446657541,"post_id":25907959,"comment_id":54837466,"body_markdown":"When would maven ask you for anything interactively? I haven&#39;t ever seen maven ask me for anything, except for when generating a project from an archetype. Are there other cases?","body":"When would maven ask you for anything interactively? I haven&#39;t ever seen maven ask me for anything, except for when generating a project from an archetype. Are there other cases?"},{"owner":{"account_id":27514,"reputation":1785,"user_id":72717,"display_name":"jamshid"},"score":3,"creation_date":1488066966,"post_id":25907959,"comment_id":72068227,"body_markdown":"FYI you can NOT use MAVEN_OPTS=-B because that env var only specifies JVM parameters. Adding this to ~/.m2/settings.xml seems to accomplish same thing: &lt;interactiveMode&gt;false&lt;/interactiveMode&gt;","body":"FYI you can NOT use MAVEN_OPTS=-B because that env var only specifies JVM parameters. Adding this to ~/.m2/settings.xml seems to accomplish same thing: &lt;interactiveMode&gt;false&lt;/interactiveMode&gt;"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1633616029,"post_id":25907959,"comment_id":122811862,"body_markdown":"@JavaJigs  Where is `MAVEN_CLI_OPTS` defined ?","body":"@JavaJigs  Where is <code>MAVEN_CLI_OPTS</code> defined ?"},{"owner":{"account_id":122746,"reputation":5871,"user_id":316745,"accept_rate":83,"display_name":"jhericks"},"score":2,"creation_date":1643952565,"post_id":25907959,"comment_id":125481014,"body_markdown":"@gvlasov There are some fairly common plugin goals that are interactive.  Try `mvn versions:set` for example.","body":"@gvlasov There are some fairly common plugin goals that are interactive.  Try <code>mvn versions:set</code> for example."},{"owner":{"account_id":65080,"reputation":5716,"user_id":191761,"accept_rate":71,"display_name":"Adam Burley"},"score":0,"creation_date":1675081375,"post_id":25907959,"comment_id":132844837,"body_markdown":"@jhericks When I tried to run `mvn versions:set` in batch mode the build fails with an error &quot;Failed to execute goal org.codehaus.mojo:versions-maven-plugin:2.14.2:set (default-cli) on project projectname: You must specify the new version, either by using the newVersion property (that is -DnewVersion=... on the command line) or run in interactive mode&quot; This is different from &quot;automatically use default values instead of asking you via prompt for those values&quot; as @khmarbaise suggested in his answer. Do you have any example that would actually use the default values?","body":"@jhericks When I tried to run <code>mvn versions:set</code> in batch mode the build fails with an error &quot;Failed to execute goal org.codehaus.mojo:versions-maven-plugin:2.14.2:set (default-cli) on project projectname: You must specify the new version, either by using the newVersion property (that is -DnewVersion=... on the command line) or run in interactive mode&quot; This is different from &quot;automatically use default values instead of asking you via prompt for those values&quot; as @khmarbaise suggested in his answer. Do you have any example that would actually use the default values?"}],"tags":[],"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"comment_count":5,"down_vote_count":0,"up_vote_count":86,"is_accepted":false,"score":86,"last_activity_date":1519239779,"creation_date":1411029583,"answer_id":25907959,"question_id":25896081,"body_markdown":"The batch-mode will automatically use default values instead of asking you via prompt for those values. The batch-mode can also be activated via `--batch-mode` or `-B` on command line.","title":"What is the difference between interactive and batch mode in Maven?","body":"<p>The batch-mode will automatically use default values instead of asking you via prompt for those values. The batch-mode can also be activated via <code>--batch-mode</code> or <code>-B</code> on command line.</p>\n"},{"comments":[{"owner":{"account_id":1659759,"reputation":636,"user_id":1528262,"accept_rate":100,"display_name":"Jan Hrcek"},"score":19,"creation_date":1534242092,"post_id":48929096,"comment_id":90631228,"body_markdown":"Since maven 3.5.0 when you don&#39;t use batch mode, maven will colorize the output (usin ANSI escape codes) to make it more human readable. Enabling batch mode disables this output coloring.","body":"Since maven 3.5.0 when you don&#39;t use batch mode, maven will colorize the output (usin ANSI escape codes) to make it more human readable. Enabling batch mode disables this output coloring."},{"owner":{"account_id":122746,"reputation":5871,"user_id":316745,"accept_rate":83,"display_name":"jhericks"},"score":2,"creation_date":1643952600,"post_id":48929096,"comment_id":125481025,"body_markdown":"There are some fairly common plugin goals that are interactive.  Try `mvn versions:set` for example.","body":"There are some fairly common plugin goals that are interactive.  Try <code>mvn versions:set</code> for example."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":2,"creation_date":1643960204,"post_id":48929096,"comment_id":125482505,"body_markdown":"[Since Maven 3.6.1](https://maven.apache.org/docs/3.6.1/release-notes.html) there is a command line option `--no-transfer-progress ` which prevent fully the output of downloads.","body":"<a href=\"https://maven.apache.org/docs/3.6.1/release-notes.html\" rel=\"nofollow noreferrer\">Since Maven 3.6.1</a> there is a command line option <code>--no-transfer-progress </code> which prevent fully the output of downloads."}],"tags":[],"owner":{"account_id":65080,"reputation":5716,"user_id":191761,"accept_rate":71,"display_name":"Adam Burley"},"comment_count":3,"down_vote_count":0,"up_vote_count":97,"is_accepted":false,"score":97,"last_activity_date":1691148436,"creation_date":1519307424,"answer_id":48929096,"question_id":25896081,"body_markdown":"Batch mode causes Maven to not display &quot;Progress: 125/150kB&quot; style lines when running. If you are running Maven on some server and then checking the logs afterwards, these progress lines take up 90% of the log and make it basically impossible to find the stuff that matters. Setting batch mode prevents this. &lt;s&gt;Apart from that, I don&#39;t know any other use for batch mode. As others have said, I have never seen Maven prompt for anything during a build, regardless of whether interactive or batch mode is set.&lt;/s&gt;\r\n\r\nEDIT: As pointed out by @jhericks in comments, Maven can prompt for things during a build in interactive mode, for example if you run `mvn versions:set` it will prompt you for the new version to set. Trying to run such commands in batch mode will cause the build to fail with an error message that suggests re-running the build in interactive mode (or supplying the needed values as command-line parameters).","title":"What is the difference between interactive and batch mode in Maven?","body":"<p>Batch mode causes Maven to not display &quot;Progress: 125/150kB&quot; style lines when running. If you are running Maven on some server and then checking the logs afterwards, these progress lines take up 90% of the log and make it basically impossible to find the stuff that matters. Setting batch mode prevents this. <s>Apart from that, I don't know any other use for batch mode. As others have said, I have never seen Maven prompt for anything during a build, regardless of whether interactive or batch mode is set.</s></p>\n<p>EDIT: As pointed out by @jhericks in comments, Maven can prompt for things during a build in interactive mode, for example if you run <code>mvn versions:set</code> it will prompt you for the new version to set. Trying to run such commands in batch mode will cause the build to fail with an error message that suggests re-running the build in interactive mode (or supplying the needed values as command-line parameters).</p>\n"},{"comments":[{"owner":{"account_id":1342007,"reputation":807,"user_id":1283512,"accept_rate":25,"display_name":"matthaeus"},"score":7,"creation_date":1550133840,"post_id":54589646,"comment_id":96160719,"body_markdown":"A maven cli options reference can be found here http://maven.apache.org/ref/3.6.0/maven-embedder/cli.html","body":"A maven cli options reference can be found here <a href=\"http://maven.apache.org/ref/3.6.0/maven-embedder/cli.html\" rel=\"nofollow noreferrer\">maven.apache.org/ref/3.6.0/maven-embedder/cli.html</a>"}],"tags":[],"owner":{"account_id":1851020,"reputation":4117,"user_id":1677594,"display_name":"Guillaume Husta"},"comment_count":1,"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1549619132,"creation_date":1549619132,"answer_id":54589646,"question_id":25896081,"body_markdown":"A common use case for `--batch-mode` is when using Maven on a Continuous Integration server, like said in this doc : [Running Maven in Batch Mode](https://books.sonatype.com/mvnref-book/reference/running-sect-options.html#running-sect-batch-option).\r\n\r\nSo it will for example suppress upload messages to avoid polluting the console log.\r\n\r\nFor example, when you create a new file on GitLab through the template `.gitlab-ci.yml` for Maven, you will have the following in the variables :\r\n\r\n    variables:\r\n      # This will suppress any download for dependencies and plugins or upload messages which would clutter the console log.\r\n      # `showDateTime` will show the passed time in milliseconds. You need to specify `--batch-mode` to make this work.\r\n      MAVEN_OPTS: &quot;-Dhttps.protocols=TLSv1.2 -Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository -Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=WARN -Dorg.slf4j.simpleLogger.showDateTime=true -Djava.awt.headless=true&quot;\r\n      # As of Maven 3.3.0 instead of this you may define these options in `.mvn/maven.config` so the same config is used\r\n      # when running from the command line.\r\n      # `installAtEnd` and `deployAtEnd` are only effective with recent version of the corresponding plugins.\r\n      MAVEN_CLI_OPTS: &quot;--batch-mode --errors --fail-at-end --show-version -DinstallAtEnd=true -DdeployAtEnd=true&quot;\r\n\r\nYou can see that `--batch-mode` is enabled by default.\r\n","title":"What is the difference between interactive and batch mode in Maven?","body":"<p>A common use case for <code>--batch-mode</code> is when using Maven on a Continuous Integration server, like said in this doc : <a href=\"https://books.sonatype.com/mvnref-book/reference/running-sect-options.html#running-sect-batch-option\" rel=\"noreferrer\">Running Maven in Batch Mode</a>.</p>\n\n<p>So it will for example suppress upload messages to avoid polluting the console log.</p>\n\n<p>For example, when you create a new file on GitLab through the template <code>.gitlab-ci.yml</code> for Maven, you will have the following in the variables :</p>\n\n<pre><code>variables:\n  # This will suppress any download for dependencies and plugins or upload messages which would clutter the console log.\n  # `showDateTime` will show the passed time in milliseconds. You need to specify `--batch-mode` to make this work.\n  MAVEN_OPTS: \"-Dhttps.protocols=TLSv1.2 -Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository -Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=WARN -Dorg.slf4j.simpleLogger.showDateTime=true -Djava.awt.headless=true\"\n  # As of Maven 3.3.0 instead of this you may define these options in `.mvn/maven.config` so the same config is used\n  # when running from the command line.\n  # `installAtEnd` and `deployAtEnd` are only effective with recent version of the corresponding plugins.\n  MAVEN_CLI_OPTS: \"--batch-mode --errors --fail-at-end --show-version -DinstallAtEnd=true -DdeployAtEnd=true\"\n</code></pre>\n\n<p>You can see that <code>--batch-mode</code> is enabled by default.</p>\n"}],"owner":{"account_id":3836887,"reputation":2752,"user_id":3180973,"accept_rate":18,"display_name":"Maulik Patel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70326,"favorite_count":0,"down_vote_count":2,"up_vote_count":82,"answer_count":3,"score":80,"last_activity_date":1691148436,"creation_date":1410972383,"question_id":25896081,"body_markdown":"I have created a Java application with the help of Maven plugin for using following maven goal:\r\n \r\n    mvn archetype:generate -DgroupId=net.javabeat \r\n      -DartifactId=SampleJavaProject\r\n      -DarchetypeArtifactId=maven-archetype-quick-start\r\n\t  -DinteractiveMode=false     \r\n    \r\nWhen `-DinteractiveMode=false`, then project is created in batch mode, and when `-DinteractiveMode=true`, then project is created in interactive mode.    \r\nI&#39;m confused with interactive mode and batch mode. What are those?","title":"What is the difference between interactive and batch mode in Maven?","body":"<p>I have created a Java application with the help of Maven plugin for using following maven goal:</p>\n\n<pre><code>mvn archetype:generate -DgroupId=net.javabeat \n  -DartifactId=SampleJavaProject\n  -DarchetypeArtifactId=maven-archetype-quick-start\n  -DinteractiveMode=false     \n</code></pre>\n\n<p>When <code>-DinteractiveMode=false</code>, then project is created in batch mode, and when <code>-DinteractiveMode=true</code>, then project is created in interactive mode.<br>\nI'm confused with interactive mode and batch mode. What are those?</p>\n"},{"tags":["java","android","firebase","google-cloud-firestore"],"comments":[{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1691159407,"post_id":76835079,"comment_id":135458419,"body_markdown":"&quot;Is there a way in which I know the type of the user before it signs in&quot; Firebase Authentication has no knowledge of a type of user, it merely handles the authentication part. If your app has types of users, it is your application that will need to provide the necessary information about what type of user is trying to sign up - e.g. by having a separate sign-up screen for each type of user, by having a separate app for each type of user, by having a list somewhere of the email addresses of each type of user, etc.","body":"&quot;Is there a way in which I know the type of the user before it signs in&quot; Firebase Authentication has no knowledge of a type of user, it merely handles the authentication part. If your app has types of users, it is your application that will need to provide the necessary information about what type of user is trying to sign up - e.g. by having a separate sign-up screen for each type of user, by having a separate app for each type of user, by having a list somewhere of the email addresses of each type of user, etc."},{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1691159569,"post_id":76835079,"comment_id":135458479,"body_markdown":"This topic has been covered extensively before and many of those approaches don&#39;t rely on Firestore (although they all need a way to know what the type of user is, as explained in my first comment). I recommend reading some of these previous [posts about types of users in Firebase](https://www.google.com/search?q=site:stackoverflow.com+firebase+type+of+user) and trying to implement it. If you run into problems with a specific implementation, post back and it&#39;s more likely we can help.","body":"This topic has been covered extensively before and many of those approaches don&#39;t rely on Firestore (although they all need a way to know what the type of user is, as explained in my first comment). I recommend reading some of these previous <a href=\"https://www.google.com/search?q=site:stackoverflow.com+firebase+type+of+user\" rel=\"nofollow noreferrer\">posts about types of users in Firebase</a> and trying to implement it. If you run into problems with a specific implementation, post back and it&#39;s more likely we can help."}],"answers":[{"comments":[{"owner":{"account_id":10763675,"reputation":2436,"user_id":7919372,"accept_rate":91,"display_name":"Always Learner"},"score":0,"creation_date":1691148986,"post_id":76835449,"comment_id":135456055,"body_markdown":"I&#39;m sorry but this is not answering my question at all.","body":"I&#39;m sorry but this is not answering my question at all."},{"owner":{"account_id":27935158,"reputation":90,"user_id":21332328,"display_name":"RmTomal"},"score":0,"creation_date":1691179038,"post_id":76835449,"comment_id":135462204,"body_markdown":"@JoanP. if you want more you can use Firebase admin which will give you the super user permission of your project. it&#39;s for only admin","body":"@JoanP. if you want more you can use Firebase admin which will give you the super user permission of your project. it&#39;s for only admin"}],"tags":[],"owner":{"account_id":27935158,"reputation":90,"user_id":21332328,"display_name":"RmTomal"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691148412,"creation_date":1691148412,"answer_id":76835449,"question_id":76835079,"body_markdown":"I can give you a solution using firebase real-time database.\r\n\r\n```\r\n private void registerAccount(String name, String rank, String mobilePhone, String mail, String pass){\r\n        mAuth.createUserWithEmailAndPassword(mail, pass)\r\n                .addOnCompleteListener(this, new OnCompleteListener&lt;AuthResult&gt;() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\r\n                        if (task.isSuccessful()) {\r\n                      \r\n                            FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n                            DatabaseReference myRef = database.getReference(&quot;users&quot;);\r\n                            Map&lt;String, String&gt; userInfo = new HashMap&lt;&gt;();\r\n                            userInfo.put(&quot;name&quot;, name);\r\n                            userInfo.put(&quot;report&quot;, &quot;off&quot;);\r\n                            userInfo.put(&quot;email&quot;, mail);\r\n                            userInfo.put(&quot;rank&quot;, rank);\r\n                            userInfo.put(&quot;mobile&quot;, mobilePhone);\r\n                            userInfo.put(&quot;userRole&quot;, &quot;admin&quot;);\r\n//can be role user, admin or others \r\n                            \r\n                            myRef.child(mAuth.getUid()).setValue(userInfo)\r\n                                    .addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n                                        @Override\r\n                                        public void onSuccess(Void unused) {\r\n                                            progressDialog.dismiss();\r\n                                            Toast.makeText(RegisterActivity.this, &quot;success&quot;, Toast.LENGTH_SHORT).show();\r\n                                            startActivity(new Intent(RegisterActivity.this, HomeActivity.class));\r\n                                        }\r\n                                    });\r\n                        } else {\r\n                            // If sign in fails, display a message to the user.\r\n                            Toast.makeText(RegisterActivity.this, &quot;Authentication failed.&quot;+task.getException().getMessage(),\r\n                                    Toast.LENGTH_SHORT).show();\r\n                            progressDialog.dismiss();\r\n                        }\r\n                    }\r\n                });\r\n    }","title":"How to know the type of the user before signing in Firebase?","body":"<p>I can give you a solution using firebase real-time database.</p>\n<pre><code> private void registerAccount(String name, String rank, String mobilePhone, String mail, String pass){\n        mAuth.createUserWithEmailAndPassword(mail, pass)\n                .addOnCompleteListener(this, new OnCompleteListener&lt;AuthResult&gt;() {\n                    @Override\n                    public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\n                        if (task.isSuccessful()) {\n                      \n                            FirebaseDatabase database = FirebaseDatabase.getInstance();\n                            DatabaseReference myRef = database.getReference(&quot;users&quot;);\n                            Map&lt;String, String&gt; userInfo = new HashMap&lt;&gt;();\n                            userInfo.put(&quot;name&quot;, name);\n                            userInfo.put(&quot;report&quot;, &quot;off&quot;);\n                            userInfo.put(&quot;email&quot;, mail);\n                            userInfo.put(&quot;rank&quot;, rank);\n                            userInfo.put(&quot;mobile&quot;, mobilePhone);\n                            userInfo.put(&quot;userRole&quot;, &quot;admin&quot;);\n//can be role user, admin or others \n                            \n                            myRef.child(mAuth.getUid()).setValue(userInfo)\n                                    .addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n                                        @Override\n                                        public void onSuccess(Void unused) {\n                                            progressDialog.dismiss();\n                                            Toast.makeText(RegisterActivity.this, &quot;success&quot;, Toast.LENGTH_SHORT).show();\n                                            startActivity(new Intent(RegisterActivity.this, HomeActivity.class));\n                                        }\n                                    });\n                        } else {\n                            // If sign in fails, display a message to the user.\n                            Toast.makeText(RegisterActivity.this, &quot;Authentication failed.&quot;+task.getException().getMessage(),\n                                    Toast.LENGTH_SHORT).show();\n                            progressDialog.dismiss();\n                        }\n                    }\n                });\n    }\n</code></pre>\n"}],"owner":{"account_id":10763675,"reputation":2436,"user_id":7919372,"accept_rate":91,"display_name":"Always Learner"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691148412,"creation_date":1691144919,"question_id":76835079,"body_markdown":"I have 2 types of users, admins and regular users. I understand that when a user signs up, a FirebaseUser object is created. I read the documentation, and I did not find any field in which I can store such information. I need somehow a boolean field called `admin` in which I can store `true` or `false`. I read this [answer][1] where it is said that we can save the type of the user in Firestore, but that means that I have to read the document first. And that costs.\r\n\r\nIs there a way in which I know the type of the user before it signs in, so I can know to which activity to redirect the user without the need to read a Firestore document? Any help will be very appreciated.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/55655249/how-to-redirect-a-user-to-a-specific-activity-in-cloud-firestore/55655868#55655868","title":"How to know the type of the user before signing in Firebase?","body":"<p>I have 2 types of users, admins and regular users. I understand that when a user signs up, a FirebaseUser object is created. I read the documentation, and I did not find any field in which I can store such information. I need somehow a boolean field called <code>admin</code> in which I can store <code>true</code> or <code>false</code>. I read this <a href=\"https://stackoverflow.com/questions/55655249/how-to-redirect-a-user-to-a-specific-activity-in-cloud-firestore/55655868#55655868\">answer</a> where it is said that we can save the type of the user in Firestore, but that means that I have to read the document first. And that costs.</p>\n<p>Is there a way in which I know the type of the user before it signs in, so I can know to which activity to redirect the user without the need to read a Firestore document? Any help will be very appreciated.</p>\n"},{"tags":["java","sockets","client-server"],"comments":[{"owner":{"display_name":"user9035826"},"score":0,"creation_date":1691093263,"post_id":76829506,"comment_id":135448972,"body_markdown":"Could you explain what exactly the client is sending, and what do you expect server to do?","body":"Could you explain what exactly the client is sending, and what do you expect server to do?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1691100876,"post_id":76829506,"comment_id":135450177,"body_markdown":"“…but when i am trying to send second message i catch the exception.”  Edit your question, and include the full stack trace of the exception you’re getting, including all `Caused by` sections.  That stack trace will tell you, and us, what went wrong and where.  Without that information, we can only guess what your problem is.","body":"“…but when i am trying to send second message i catch the exception.”  Edit your question, and include the full stack trace of the exception you’re getting, including all <code>Caused by</code> sections.  That stack trace will tell you, and us, what went wrong and where.  Without that information, we can only guess what your problem is."},{"owner":{"account_id":26654780,"reputation":5,"user_id":20268479,"display_name":"Lucifer"},"score":0,"creation_date":1691102864,"post_id":76829506,"comment_id":135450388,"body_markdown":"Client is sending the command, for example &quot;SendMsg&quot;, and then some data (message). Command is needed server to know what exactly client wants to do (authorization, registration, sening message...). Server is putting this command to switch case, and reading next data from client. If command is &quot;SendMsg&quot; server is reading the message sent by client and sends it to every user.","body":"Client is sending the command, for example &quot;SendMsg&quot;, and then some data (message). Command is needed server to know what exactly client wants to do (authorization, registration, sening message...). Server is putting this command to switch case, and reading next data from client. If command is &quot;SendMsg&quot; server is reading the message sent by client and sends it to every user."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691103260,"post_id":76829506,"comment_id":135450426,"body_markdown":"Please translate &#39;Канал обірвано&#39;. And get rid of the `reader.ready()` test. It&#39;s pointless. You don&#39;t have the option of not reading the next message. Otherwise you will cause an application protocol error and maybe this one.","body":"Please translate &#39;Канал обірвано&#39;. And get rid of the <code>reader.ready()</code> test. It&#39;s pointless. You don&#39;t have the option of not reading the next message. Otherwise you will cause an application protocol error and maybe this one."},{"owner":{"account_id":26654780,"reputation":5,"user_id":20268479,"display_name":"Lucifer"},"score":0,"creation_date":1691103358,"post_id":76829506,"comment_id":135450434,"body_markdown":"The channel is broken","body":"The channel is broken"},{"owner":{"account_id":26654780,"reputation":5,"user_id":20268479,"display_name":"Lucifer"},"score":0,"creation_date":1691103524,"post_id":76829506,"comment_id":135450461,"body_markdown":"I tried to run this code without reader.ready(), exception has not disapeared","body":"I tried to run this code without reader.ready(), exception has not disapeared"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691103897,"post_id":76829506,"comment_id":135450491,"body_markdown":"Sounds like &#39;connection reset&#39; or &#39;broken pipe&#39;. There are many causes but one of them is either peer closing the socket without having read all the data that was sent.","body":"Sounds like &#39;connection reset&#39; or &#39;broken pipe&#39;. There are many causes but one of them is either peer closing the socket without having read all the data that was sent."},{"owner":{"account_id":26654780,"reputation":5,"user_id":20268479,"display_name":"Lucifer"},"score":0,"creation_date":1691104710,"post_id":76829506,"comment_id":135450571,"body_markdown":"By the way, user207421 if i am not using reader.ready() server throws this while sending first message:\nException in thread &quot;pool-1-thread-1&quot; java.lang.RuntimeException: java.net.SocketException: Socket closed\nat server.Server.handleClient(Server.java:58)\n\tat server.Server.lambda$main$0(Server.java:27)\n...\nat server.Server.handleClient(Server.java:46)","body":"By the way, user207421 if i am not using reader.ready() server throws this while sending first message: Exception in thread &quot;pool-1-thread-1&quot; java.lang.RuntimeException: java.net.SocketException: Socket closed at server.Server.handleClient(Server.java:58) \tat server.Server.lambda$main$0(Server.java:27) ... at server.Server.handleClient(Server.java:46)"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691111736,"post_id":76829506,"comment_id":135451128,"body_markdown":"&#39;Socket closed&#39; means that *you* closed the socket and then continued to use it. You&#39;re missing a `break` after `socket.close()` in the &quot;Exit&quot; case.","body":"&#39;Socket closed&#39; means that <i>you</i> closed the socket and then continued to use it. You&#39;re missing a <code>break</code> after <code>socket.close()</code> in the &quot;Exit&quot; case."},{"owner":{"account_id":26654780,"reputation":5,"user_id":20268479,"display_name":"Lucifer"},"score":0,"creation_date":1691140145,"post_id":76829506,"comment_id":135454469,"body_markdown":"I can&#39;t use break, because it is in the switch case. That is why i put condition in the while loop.","body":"I can&#39;t use break, because it is in the switch case. That is why i put condition in the while loop."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1691143378,"post_id":76829506,"comment_id":135455083,"body_markdown":"You closed the socket in `sendMsg` because of the try-with-resources.","body":"You closed the socket in <code>sendMsg</code> because of the try-with-resources."},{"owner":{"account_id":26654780,"reputation":5,"user_id":20268479,"display_name":"Lucifer"},"score":0,"creation_date":1691148004,"post_id":76829506,"comment_id":135455881,"body_markdown":"YES!!! Mark, you are right.","body":"YES!!! Mark, you are right."}],"answers":[{"tags":[],"owner":{"account_id":26654780,"reputation":5,"user_id":20268479,"display_name":"Lucifer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691148380,"creation_date":1691148380,"answer_id":76835446,"question_id":76829506,"body_markdown":"Thanks to Mark Rotteveel i got the answer.\r\nI just modified sendMsg method by putting try with resources into if(client != socket) (sending message everyone besides client who wrote it) and everything works great.\r\n```\r\n    private static void sendMsg(Socket socket, BufferedReader reader) throws IOException{\r\n            String message = reader.readLine();\r\n    \r\n            for(Socket client : clients) {\r\n                if(client != socket) {\r\n                    try (BufferedWriter writer = new BufferedWriter(\r\n                            new OutputStreamWriter(\r\n                                    client.getOutputStream()))) {\r\n                        writer.write(message);\r\n                        writer.newLine();\r\n                        writer.flush();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n```","title":"java.net.SocketException while trying to send message with BufferedWriter","body":"<p>Thanks to Mark Rotteveel i got the answer.\nI just modified sendMsg method by putting try with resources into if(client != socket) (sending message everyone besides client who wrote it) and everything works great.</p>\n<pre><code>    private static void sendMsg(Socket socket, BufferedReader reader) throws IOException{\n            String message = reader.readLine();\n    \n            for(Socket client : clients) {\n                if(client != socket) {\n                    try (BufferedWriter writer = new BufferedWriter(\n                            new OutputStreamWriter(\n                                    client.getOutputStream()))) {\n                        writer.write(message);\n                        writer.newLine();\n                        writer.flush();\n                    }\n                }\n            }\n        }\n</code></pre>\n"}],"owner":{"account_id":26654780,"reputation":5,"user_id":20268479,"display_name":"Lucifer"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76835446,"answer_count":1,"score":0,"last_activity_date":1691148380,"creation_date":1691076140,"question_id":76829506,"body_markdown":"I am trying to make a simple client/server application using Socket, BufferedReader and BufferedWriter. Authorization works good, and when i am sending first message everything also works, but when i am trying to send second message i catch the exception:\r\n\r\n    Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.RuntimeException: java.net.SocketException: Канал обірвано\r\n    \tat utils.SocketManager.writeMsg(SocketManager.java:33)\r\n    \tat client.Chat.sendMessage(Chat.java:53)\r\n    \tat client.Chat.lambda$new$0(Chat.java:37)\r\n    \tat java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)\r\n    \tat java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2314)\r\n    \tat java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:407)\r\n    \tat java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)\r\n    \tat java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)\r\n    \tat java.desktop/java.awt.Component.processMouseEvent(Component.java:6620)\r\n    \tat java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3398)\r\n    \tat java.desktop/java.awt.Component.processEvent(Component.java:6385)\r\n    \tat java.desktop/java.awt.Container.processEvent(Container.java:2266)\r\n    \tat java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4995)\r\n    \tat java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\r\n    \tat java.desktop/java.awt.Component.dispatchEvent(Component.java:4827)\r\n    \tat java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4948)\r\n    \tat java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4575)\r\n    \tat java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4516)\r\n    \tat java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2310)\r\n    \tat java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\r\n    \tat java.desktop/java.awt.Component.dispatchEvent(Component.java:4827)\r\n    \tat java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:775)\r\n    \tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:720)\r\n    \tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:714)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\r\n    \tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:87)\r\n    \tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:98)\r\n    \tat java.desktop/java.awt.EventQueue$5.run(EventQueue.java:747)\r\n    \tat java.desktop/java.awt.EventQueue$5.run(EventQueue.java:745)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\r\n    \tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:87)\r\n    \tat java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:744)\r\n    \tat java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n    \tat java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n    \tat java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n    \tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n    \tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n    \tat java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\r\n    Caused by: java.net.SocketException: Канал обірвано\r\n    \tat java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:413)\r\n    \tat java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:433)\r\n    \tat java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:812)\r\n    \tat java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1120)\r\n    \tat java.base/sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:313)\r\n    \tat java.base/sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:409)\r\n    \tat java.base/sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:414)\r\n    \tat java.base/sun.nio.cs.StreamEncoder.lockedFlush(StreamEncoder.java:218)\r\n    \tat java.base/sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:205)\r\n    \tat java.base/java.io.OutputStreamWriter.flush(OutputStreamWriter.java:263)\r\n    \tat java.base/java.io.BufferedWriter.implFlush(BufferedWriter.java:372)\r\n    \tat java.base/java.io.BufferedWriter.flush(BufferedWriter.java:359)\r\n    \tat utils.SocketManager.writeMsg(SocketManager.java:31)\r\n    \t... 37 more\r\n\r\nHere is piece of server code:\r\n```\r\nprivate static void handleClient(Socket socket){\r\n                try (BufferedWriter writer = new BufferedWriter(\r\n                        new OutputStreamWriter(\r\n                                socket.getOutputStream()));\r\n                     BufferedReader reader = new BufferedReader(\r\n                             new InputStreamReader(\r\n                                     socket.getInputStream()))) {\r\n        \r\n                    String command = &quot;&quot;;\r\n                    while(!command.equals(&quot;Exit&quot;)) {//here starts endless loop\r\n                        if (reader.ready()) {\r\n                            command = reader.readLine();\r\n                            switch (command) {\r\n                                case &quot;LogIn&quot; -&gt; logIn(writer, reader);\r\n                                case &quot;SendMsg&quot; -&gt; sendMsg(reader);\r\n                                case &quot;Exit&quot; -&gt; {\r\n                                    clients.remove(socket);\r\n                                    socket.close();\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                } catch (IOException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n         private static void sendMsg(BufferedReader reader) throws IOException{\r\n                String message = reader.readLine();\r\n        \r\n                for(Socket client : clients) {\r\n                    try(BufferedWriter writer = new BufferedWriter(\r\n                            new OutputStreamWriter(\r\n                                    client.getOutputStream()))) {\r\n                        writer.write(message);\r\n                        writer.newLine();\r\n                        writer.flush();\r\n                    }\r\n                }\r\n            }\r\n```\r\nClient:\r\n```\r\npublic Chat(String login) {\r\n        this.login = login;\r\n\r\n        Thread thread = new Thread(new ReceiveMessage());\r\n        thread.start();\r\n\r\n        sendButton.addActionListener(e -&gt; sendMessage());\r\n    }\r\n\r\n    public void openFrame() {\r\n        frame = new JFrame(&quot;YurChat&quot;);\r\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\r\n        frame.setVisible(true);\r\n        frame.setContentPane(mainPanel);\r\n\r\n        Toolkit toolkit = Toolkit.getDefaultToolkit();\r\n        frame.setBounds(toolkit.getScreenSize().width / 2 - 325, toolkit.getScreenSize().height / 2 - 200, 550, 300);\r\n    }\r\n\r\n    private void sendMessage() {\r\n        SocketManager.writeMsg(&quot;SendMsg&quot;);//server does not get command second time\r\n        String message = login + &quot;:\\t&quot; + messageTextField.getText();\r\n        SocketManager.writeMsg(message);//throws exception\r\n        messageTextField.setText(&quot;&quot;);\r\n    }\r\n\r\n    private class ReceiveMessage implements Runnable {\r\n        @Override\r\n        public void run() {\r\n            while(true) {\r\n                if(SocketManager.isReaderReady()) {\r\n                    String msg = SocketManager.readMsg();\r\n                    chatTextArea.append(msg);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\nSocketManager:\r\n```\r\npublic final class SocketManager {\r\n    private static final Socket socket;\r\n    private static final BufferedWriter writer;\r\n    private static final BufferedReader reader;\r\n\r\n    static {\r\n        try {\r\n            socket = new Socket(\r\n                    PropertiesUtil.getProperty(&quot;socket.ip&quot;),\r\n                    Integer.parseInt(PropertiesUtil.getProperty(&quot;socket.port&quot;)));\r\n            writer = new BufferedWriter(\r\n                    new OutputStreamWriter(\r\n                            socket.getOutputStream()));\r\n            reader = new BufferedReader(\r\n                    new InputStreamReader(\r\n                            socket.getInputStream()));\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    public static void writeMsg(String message) {\r\n        try {\r\n            writer.write(message);\r\n            writer.newLine();\r\n            writer.flush();\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    public static String readMsg() {\r\n        try {\r\n            return reader.readLine();\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    public static boolean isReaderReady() {\r\n        try {\r\n            return reader.ready();\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    public static void close() {\r\n        try {\r\n            writer.close();\r\n            reader.close();\r\n            socket.close();\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n```\r\nFull code is here: https://github.com/lucifer116664/ClientServerChat.git\r\n\r\nI debugged this app and found that when i am sending message second time client is sending command &quot;SendMsg&quot;, but server does not get it and stops in the endless loop waiting for command.\r\n\r\nThanks in advice.","title":"java.net.SocketException while trying to send message with BufferedWriter","body":"<p>I am trying to make a simple client/server application using Socket, BufferedReader and BufferedWriter. Authorization works good, and when i am sending first message everything also works, but when i am trying to send second message i catch the exception:</p>\n<pre><code>Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.RuntimeException: java.net.SocketException: Канал обірвано\n    at utils.SocketManager.writeMsg(SocketManager.java:33)\n    at client.Chat.sendMessage(Chat.java:53)\n    at client.Chat.lambda$new$0(Chat.java:37)\n    at java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)\n    at java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2314)\n    at java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:407)\n    at java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)\n    at java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)\n    at java.desktop/java.awt.Component.processMouseEvent(Component.java:6620)\n    at java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3398)\n    at java.desktop/java.awt.Component.processEvent(Component.java:6385)\n    at java.desktop/java.awt.Container.processEvent(Container.java:2266)\n    at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4995)\n    at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\n    at java.desktop/java.awt.Component.dispatchEvent(Component.java:4827)\n    at java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4948)\n    at java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4575)\n    at java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4516)\n    at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2310)\n    at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\n    at java.desktop/java.awt.Component.dispatchEvent(Component.java:4827)\n    at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:775)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:720)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:714)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:87)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:98)\n    at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:747)\n    at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:745)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:87)\n    at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:744)\n    at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n    at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\nCaused by: java.net.SocketException: Канал обірвано\n    at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:413)\n    at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:433)\n    at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:812)\n    at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1120)\n    at java.base/sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:313)\n    at java.base/sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:409)\n    at java.base/sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:414)\n    at java.base/sun.nio.cs.StreamEncoder.lockedFlush(StreamEncoder.java:218)\n    at java.base/sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:205)\n    at java.base/java.io.OutputStreamWriter.flush(OutputStreamWriter.java:263)\n    at java.base/java.io.BufferedWriter.implFlush(BufferedWriter.java:372)\n    at java.base/java.io.BufferedWriter.flush(BufferedWriter.java:359)\n    at utils.SocketManager.writeMsg(SocketManager.java:31)\n    ... 37 more\n</code></pre>\n<p>Here is piece of server code:</p>\n<pre><code>private static void handleClient(Socket socket){\n                try (BufferedWriter writer = new BufferedWriter(\n                        new OutputStreamWriter(\n                                socket.getOutputStream()));\n                     BufferedReader reader = new BufferedReader(\n                             new InputStreamReader(\n                                     socket.getInputStream()))) {\n        \n                    String command = &quot;&quot;;\n                    while(!command.equals(&quot;Exit&quot;)) {//here starts endless loop\n                        if (reader.ready()) {\n                            command = reader.readLine();\n                            switch (command) {\n                                case &quot;LogIn&quot; -&gt; logIn(writer, reader);\n                                case &quot;SendMsg&quot; -&gt; sendMsg(reader);\n                                case &quot;Exit&quot; -&gt; {\n                                    clients.remove(socket);\n                                    socket.close();\n                                }\n                            }\n                        }\n                    }\n                } catch (IOException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n         private static void sendMsg(BufferedReader reader) throws IOException{\n                String message = reader.readLine();\n        \n                for(Socket client : clients) {\n                    try(BufferedWriter writer = new BufferedWriter(\n                            new OutputStreamWriter(\n                                    client.getOutputStream()))) {\n                        writer.write(message);\n                        writer.newLine();\n                        writer.flush();\n                    }\n                }\n            }\n</code></pre>\n<p>Client:</p>\n<pre><code>public Chat(String login) {\n        this.login = login;\n\n        Thread thread = new Thread(new ReceiveMessage());\n        thread.start();\n\n        sendButton.addActionListener(e -&gt; sendMessage());\n    }\n\n    public void openFrame() {\n        frame = new JFrame(&quot;YurChat&quot;);\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n        frame.setVisible(true);\n        frame.setContentPane(mainPanel);\n\n        Toolkit toolkit = Toolkit.getDefaultToolkit();\n        frame.setBounds(toolkit.getScreenSize().width / 2 - 325, toolkit.getScreenSize().height / 2 - 200, 550, 300);\n    }\n\n    private void sendMessage() {\n        SocketManager.writeMsg(&quot;SendMsg&quot;);//server does not get command second time\n        String message = login + &quot;:\\t&quot; + messageTextField.getText();\n        SocketManager.writeMsg(message);//throws exception\n        messageTextField.setText(&quot;&quot;);\n    }\n\n    private class ReceiveMessage implements Runnable {\n        @Override\n        public void run() {\n            while(true) {\n                if(SocketManager.isReaderReady()) {\n                    String msg = SocketManager.readMsg();\n                    chatTextArea.append(msg);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>SocketManager:</p>\n<pre><code>public final class SocketManager {\n    private static final Socket socket;\n    private static final BufferedWriter writer;\n    private static final BufferedReader reader;\n\n    static {\n        try {\n            socket = new Socket(\n                    PropertiesUtil.getProperty(&quot;socket.ip&quot;),\n                    Integer.parseInt(PropertiesUtil.getProperty(&quot;socket.port&quot;)));\n            writer = new BufferedWriter(\n                    new OutputStreamWriter(\n                            socket.getOutputStream()));\n            reader = new BufferedReader(\n                    new InputStreamReader(\n                            socket.getInputStream()));\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    public static void writeMsg(String message) {\n        try {\n            writer.write(message);\n            writer.newLine();\n            writer.flush();\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    public static String readMsg() {\n        try {\n            return reader.readLine();\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    public static boolean isReaderReady() {\n        try {\n            return reader.ready();\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    public static void close() {\n        try {\n            writer.close();\n            reader.close();\n            socket.close();\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>Full code is here: <a href=\"https://github.com/lucifer116664/ClientServerChat.git\" rel=\"nofollow noreferrer\">https://github.com/lucifer116664/ClientServerChat.git</a></p>\n<p>I debugged this app and found that when i am sending message second time client is sending command &quot;SendMsg&quot;, but server does not get it and stops in the endless loop waiting for command.</p>\n<p>Thanks in advice.</p>\n"},{"tags":["java","selenium-webdriver","web-scraping","automation","bots"],"comments":[{"owner":{"account_id":10495994,"reputation":1833,"user_id":7736228,"display_name":"Abhay Chaudhary"},"score":0,"creation_date":1691148710,"post_id":76835415,"comment_id":135456006,"body_markdown":"Probably they have implemented Antibot Services to stop scraping","body":"Probably they have implemented Antibot Services to stop scraping"},{"owner":{"account_id":23156460,"reputation":1,"user_id":17257646,"display_name":"Junry Buenavista"},"score":0,"creation_date":1691149231,"post_id":76835415,"comment_id":135456108,"body_markdown":"Hi! thanks for your comment, is there anything I could do with this?","body":"Hi! thanks for your comment, is there anything I could do with this?"}],"owner":{"account_id":23156460,"reputation":1,"user_id":17257646,"display_name":"Junry Buenavista"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691147985,"creation_date":1691147985,"question_id":76835415,"body_markdown":"I have a bot that running almost 1 year but lately it was stuck on login, it seems that the website is updated I&#39;m not sure but I feel they put a bot detection features. When I make a &quot;new tab&quot; their is a warning says &quot;Access denied ERROR 15. The request was blocked by our security service&quot;. But when I use a regular browser without the bot I was working fine. I really appreciated someone can help me out. Thanks!\r\n\r\n\r\n```\r\npublic class Login {\r\n\tWebDriver driver;\r\n\tpublic Login() {\r\n\t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Jars\\\\chromedriver.exe&quot;);\t\t\r\n\t\tHashMap&lt;String,Object&gt; chromePrefs = new HashMap&lt;String, Object&gt;();\r\n\t\tchromePrefs.put(&quot;plugins.always_open_pdf_externally&quot;, true);\r\n\t\tchromePrefs.put(&quot;excludeSwitches&quot;, &quot;enable-popup-blocking&quot;);\t\r\n\t\tChromeOptions options = new ChromeOptions();\r\n\t\r\n\t\t//--------------------------------------------------\r\n\t\t \toptions.addArguments(&quot;--no-sandbox&quot;);\r\n\t\t    options.addArguments(&quot;--disable-dev-shm-usage&quot;);\r\n\t\t    options.setExperimentalOption(&quot;excludeSwitches&quot;, Collections.singletonList(&quot;enable-automation&quot;));\r\n\t\t    options.setExperimentalOption(&quot;useAutomationExtension&quot;, null);\t\t       \r\n\t\t    options.addArguments(&quot;window-size=1920,1080&quot;);\r\n\t\t    options.addArguments(&quot;user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.169 Safari/537.36&quot;);\r\n\t\t    options.addArguments(&quot;disable-infobars&quot;);\r\n\t\tdriver = new ChromeDriver(options);\r\n\t\tdriver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\r\n\t\t\r\n\t\t//------------------------------------------------\r\n\t\t\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tdriver.get(&quot;https://www.fpl.com/my-account/account-landing.html#cards&quot;);\r\n\t\t\tThread.sleep(3000);\r\n\t\t\t\r\n\t\t\tdriver.findElement(By.id(&quot;emailOrUserId&quot;)).sendKeys(&quot;*******&quot;);\r\n\t\t\tdriver.findElement(By.id(&quot;pwd&quot;)).sendKeys(&quot;********&quot;);\r\n\t\t\tdriver.manage().timeouts().implicitlyWait(45, TimeUnit.SECONDS);\r\n\t\t\tdriver.manage().window().maximize();\r\n\t\t\tdriver.findElement(By.id(&quot;loginButton&quot;)).click();\r\n\t\t\t\r\n\t\t}catch(Exception ee) {ee.printStackTrace();}\r\n\t}\r\n\tpublic static void main(String args[]) {\r\n\t\tnew Login();\r\n\t}\r\n}\r\n```\r\n","title":"Java Selenium Stuck in Login","body":"<p>I have a bot that running almost 1 year but lately it was stuck on login, it seems that the website is updated I'm not sure but I feel they put a bot detection features. When I make a &quot;new tab&quot; their is a warning says &quot;Access denied ERROR 15. The request was blocked by our security service&quot;. But when I use a regular browser without the bot I was working fine. I really appreciated someone can help me out. Thanks!</p>\n<pre><code>public class Login {\n    WebDriver driver;\n    public Login() {\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Jars\\\\chromedriver.exe&quot;);        \n        HashMap&lt;String,Object&gt; chromePrefs = new HashMap&lt;String, Object&gt;();\n        chromePrefs.put(&quot;plugins.always_open_pdf_externally&quot;, true);\n        chromePrefs.put(&quot;excludeSwitches&quot;, &quot;enable-popup-blocking&quot;);    \n        ChromeOptions options = new ChromeOptions();\n    \n        //--------------------------------------------------\n            options.addArguments(&quot;--no-sandbox&quot;);\n            options.addArguments(&quot;--disable-dev-shm-usage&quot;);\n            options.setExperimentalOption(&quot;excludeSwitches&quot;, Collections.singletonList(&quot;enable-automation&quot;));\n            options.setExperimentalOption(&quot;useAutomationExtension&quot;, null);             \n            options.addArguments(&quot;window-size=1920,1080&quot;);\n            options.addArguments(&quot;user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.169 Safari/537.36&quot;);\n            options.addArguments(&quot;disable-infobars&quot;);\n        driver = new ChromeDriver(options);\n        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\n        \n        //------------------------------------------------\n        \n        try {\n            \n            driver.get(&quot;https://www.fpl.com/my-account/account-landing.html#cards&quot;);\n            Thread.sleep(3000);\n            \n            driver.findElement(By.id(&quot;emailOrUserId&quot;)).sendKeys(&quot;*******&quot;);\n            driver.findElement(By.id(&quot;pwd&quot;)).sendKeys(&quot;********&quot;);\n            driver.manage().timeouts().implicitlyWait(45, TimeUnit.SECONDS);\n            driver.manage().window().maximize();\n            driver.findElement(By.id(&quot;loginButton&quot;)).click();\n            \n        }catch(Exception ee) {ee.printStackTrace();}\n    }\n    public static void main(String args[]) {\n        new Login();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","hibernate","spring-security","jwt"],"answers":[{"tags":[],"owner":{"account_id":29147487,"reputation":21,"user_id":22329079,"display_name":"Abd El Rahman Tamer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691087264,"creation_date":1691087264,"answer_id":76830748,"question_id":76823592,"body_markdown":"I have solved it by making hibernate do the findByUsername(String username) query automatically instead of making a query using @Query with a native query","title":"JWT authentication failing when User class has an entity subclass in spring","body":"<p>I have solved it by making hibernate do the findByUsername(String username) query automatically instead of making a query using @Query with a native query</p>\n"}],"owner":{"account_id":29147487,"reputation":21,"user_id":22329079,"display_name":"Abd El Rahman Tamer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691147938,"creation_date":1691010986,"question_id":76823592,"body_markdown":"I am trying to develop a system that contains customers and vendors and found many common attributes so i decided to use a common user class that has all the authentication information.\r\n\r\nClass Diagram:\r\n[class digram](https://i.stack.imgur.com/xewS9.png)\r\n\r\nI have been having a problem where when i make one of the sub classes an entity so that hibernate creates their table the authentication doesn&#39;t work.\r\n\r\nSecurity config class:\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableMethodSecurity\r\npublic class SecurityConfig {\r\n\r\n    @Bean\r\n    public AuthenticationManager authManager() {\r\n        var authProvider = new DaoAuthenticationProvider();\r\n        authProvider.setUserDetailsService(userDetailsService());\r\n        authProvider.setPasswordEncoder(new BCryptPasswordEncoder());\r\n        return new ProviderManager(authProvider);\r\n    }\r\n\r\n    @Bean\r\n    public UserDetailsService userDetailsService() {\r\n        return new DatabaseUserDetailsService();\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        return http\r\n                .cors(Customizer.withDefaults())\r\n                .csrf(AbstractHttpConfigurer::disable)\r\n                .authorizeHttpRequests( auth -&gt; auth\r\n                        .requestMatchers(&quot;/token&quot;).permitAll()\r\n                        .anyRequest().authenticated()\r\n                )\r\n                .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt)\r\n                .build();\r\n    }\r\n\r\n}\r\n```\r\n\r\nToken generation functionality:\r\n\r\n```\r\n@Service\r\npublic class TokenService {\r\n\r\n    private final JwtEncoder encoder;\r\n\r\n    public TokenService(JwtEncoder encoder) {\r\n        this.encoder = encoder;\r\n    }\r\n\r\n    public String generateToken(Authentication authentication) {\r\n        Instant now = Instant.now();\r\n        String scope = authentication.getAuthorities().stream()\r\n                .map(GrantedAuthority::getAuthority)\r\n                .collect(Collectors.joining(&quot; &quot;));\r\n        JwtClaimsSet claims = JwtClaimsSet.builder()\r\n                .issuer(&quot;self&quot;)\r\n                .issuedAt(now)\r\n                .expiresAt(now.plus(1, ChronoUnit.HOURS))\r\n                .subject(authentication.getName())\r\n                .claim(&quot;scope&quot;, scope)\r\n                .build();\r\n        return this.encoder.encode(JwtEncoderParameters.from(claims)).getTokenValue();\r\n    }\r\n\r\n}\r\n@PostMapping(&quot;/token&quot;)\r\n    public String token(@RequestBody LoginRequest userLogin) throws AuthenticationException {\r\n        UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(userLogin.username(), userLogin.password());\r\n        Authentication authentication = authenticationManager.authenticate(token);\r\n        return tokenService.generateToken(authentication);\r\n    }\r\n```\r\n\r\n\r\nThe custom user details service:\r\n\r\n```\r\n@Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        User user = userRepo.findByUsername(username);\r\n        System.out.println(user + &quot; &quot; + username);\r\n        if(user == null){\r\n            throw new UsernameNotFoundException(&quot;User with username [&quot; + username + &quot;] not found in the system&quot;);\r\n        }\r\n        return new CustomUserDetails(user);\r\n    }\r\n```\r\n\r\nThe customUserDetails is just a class that inherets UserDetails and has an instance variable user that we get the data for the users from.\r\n\r\nThe user class:\r\n\r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity(name = &quot;user_table&quot;)\r\n@Inheritance(strategy = InheritanceType.JOINED)\r\npublic class User{\r\n\r\n    @Id\r\n    private UUID user_id;\r\n    @Column(name = &quot;username&quot;,unique = true,nullable = false)\r\n    private String username;\r\n    @Column(name = &quot;password&quot;,nullable = false)\r\n    private String password;\r\n\r\n}\r\n```\r\n\r\nThe customer class:\r\n\r\n```\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@ToString\r\n@Entity(name = &quot;customer&quot;) //when i remove this the jwt authentication works\r\npublic class Customer extends User{\r\n\r\n    @Column(name = &quot;first_name&quot;)\r\n    private String firstName;\r\n    @Column(name = &quot;last_name&quot;)\r\n    private String lastName;\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nI have tried debugging the token generation function many times and i end up with this exception.\r\ndispatchException:`class org.hibernate.metamodel.mapping.internal.CaseStatementDiscriminatorMappingImpl$1 cannot be cast to class org.hibernate.sql.ast.spi.SqlSelection (org.hibernate.metamodel.mapping.internal.CaseStatementDiscriminatorMappingImpl$1 and org.hibernate.sql.ast.spi.SqlSelection are in unnamed module of loader &#39;app&#39;)`\r\n\r\nbut i haven&#39;t found any resources leading to the cause of this exception\r\n","title":"JWT authentication failing when User class has an entity subclass in spring","body":"<p>I am trying to develop a system that contains customers and vendors and found many common attributes so i decided to use a common user class that has all the authentication information.</p>\n<p>Class Diagram:\n<a href=\"https://i.stack.imgur.com/xewS9.png\" rel=\"nofollow noreferrer\">class digram</a></p>\n<p>I have been having a problem where when i make one of the sub classes an entity so that hibernate creates their table the authentication doesn't work.</p>\n<p>Security config class:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity\npublic class SecurityConfig {\n\n    @Bean\n    public AuthenticationManager authManager() {\n        var authProvider = new DaoAuthenticationProvider();\n        authProvider.setUserDetailsService(userDetailsService());\n        authProvider.setPasswordEncoder(new BCryptPasswordEncoder());\n        return new ProviderManager(authProvider);\n    }\n\n    @Bean\n    public UserDetailsService userDetailsService() {\n        return new DatabaseUserDetailsService();\n    }\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        return http\n                .cors(Customizer.withDefaults())\n                .csrf(AbstractHttpConfigurer::disable)\n                .authorizeHttpRequests( auth -&gt; auth\n                        .requestMatchers(&quot;/token&quot;).permitAll()\n                        .anyRequest().authenticated()\n                )\n                .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt)\n                .build();\n    }\n\n}\n</code></pre>\n<p>Token generation functionality:</p>\n<pre><code>@Service\npublic class TokenService {\n\n    private final JwtEncoder encoder;\n\n    public TokenService(JwtEncoder encoder) {\n        this.encoder = encoder;\n    }\n\n    public String generateToken(Authentication authentication) {\n        Instant now = Instant.now();\n        String scope = authentication.getAuthorities().stream()\n                .map(GrantedAuthority::getAuthority)\n                .collect(Collectors.joining(&quot; &quot;));\n        JwtClaimsSet claims = JwtClaimsSet.builder()\n                .issuer(&quot;self&quot;)\n                .issuedAt(now)\n                .expiresAt(now.plus(1, ChronoUnit.HOURS))\n                .subject(authentication.getName())\n                .claim(&quot;scope&quot;, scope)\n                .build();\n        return this.encoder.encode(JwtEncoderParameters.from(claims)).getTokenValue();\n    }\n\n}\n@PostMapping(&quot;/token&quot;)\n    public String token(@RequestBody LoginRequest userLogin) throws AuthenticationException {\n        UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(userLogin.username(), userLogin.password());\n        Authentication authentication = authenticationManager.authenticate(token);\n        return tokenService.generateToken(authentication);\n    }\n</code></pre>\n<p>The custom user details service:</p>\n<pre><code>@Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        User user = userRepo.findByUsername(username);\n        System.out.println(user + &quot; &quot; + username);\n        if(user == null){\n            throw new UsernameNotFoundException(&quot;User with username [&quot; + username + &quot;] not found in the system&quot;);\n        }\n        return new CustomUserDetails(user);\n    }\n</code></pre>\n<p>The customUserDetails is just a class that inherets UserDetails and has an instance variable user that we get the data for the users from.</p>\n<p>The user class:</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity(name = &quot;user_table&quot;)\n@Inheritance(strategy = InheritanceType.JOINED)\npublic class User{\n\n    @Id\n    private UUID user_id;\n    @Column(name = &quot;username&quot;,unique = true,nullable = false)\n    private String username;\n    @Column(name = &quot;password&quot;,nullable = false)\n    private String password;\n\n}\n</code></pre>\n<p>The customer class:</p>\n<pre><code>@NoArgsConstructor\n@AllArgsConstructor\n@ToString\n@Entity(name = &quot;customer&quot;) //when i remove this the jwt authentication works\npublic class Customer extends User{\n\n    @Column(name = &quot;first_name&quot;)\n    private String firstName;\n    @Column(name = &quot;last_name&quot;)\n    private String lastName;\n}\n</code></pre>\n<p>I have tried debugging the token generation function many times and i end up with this exception.\ndispatchException:<code>class org.hibernate.metamodel.mapping.internal.CaseStatementDiscriminatorMappingImpl$1 cannot be cast to class org.hibernate.sql.ast.spi.SqlSelection (org.hibernate.metamodel.mapping.internal.CaseStatementDiscriminatorMappingImpl$1 and org.hibernate.sql.ast.spi.SqlSelection are in unnamed module of loader 'app')</code></p>\n<p>but i haven't found any resources leading to the cause of this exception</p>\n"},{"tags":["java","appium","appium-android"],"comments":[{"owner":{"account_id":8440463,"reputation":882,"user_id":6333173,"accept_rate":33,"display_name":"Al Imran"},"score":0,"creation_date":1522918282,"post_id":49665033,"comment_id":86345977,"body_markdown":"resetApp() - it uninstall the app and install app again, wrong concept, it just clear app data and clear cache and open the app.","body":"resetApp() - it uninstall the app and install app again, wrong concept, it just clear app data and clear cache and open the app."},{"owner":{"account_id":8440463,"reputation":882,"user_id":6333173,"accept_rate":33,"display_name":"Al Imran"},"score":0,"creation_date":1522918514,"post_id":49665033,"comment_id":86346137,"body_markdown":"What you expected behavior? Launch the app again without clearing the app data and cache at the middle of test?","body":"What you expected behavior? Launch the app again without clearing the app data and cache at the middle of test?"},{"owner":{"account_id":12183468,"reputation":53,"user_id":8894247,"display_name":"alk1985"},"score":0,"creation_date":1522918706,"post_id":49665033,"comment_id":86346265,"body_markdown":"resetApp() uninstall and install the app for sure. I tried this method lot of times and confirmed. I want to clear the app from the background first then launch the app again.","body":"resetApp() uninstall and install the app for sure. I tried this method lot of times and confirmed. I want to clear the app from the background first then launch the app again."}],"answers":[{"tags":[],"owner":{"account_id":8440463,"reputation":882,"user_id":6333173,"accept_rate":33,"display_name":"Al Imran"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522919381,"creation_date":1522919381,"answer_id":49668423,"question_id":49665033,"body_markdown":"You can try it, I think it will serve your purpose, use below line from where you want to launch the app  again\r\n\r\n    Activity activity = new Activity(&quot;appPackage&quot;, &quot;appActivity&quot;);\r\n    driver.startActivity(activity);","title":"How to hard close/force close/kill the app from memory in Android using Appium in the same test","body":"<p>You can try it, I think it will serve your purpose, use below line from where you want to launch the app  again</p>\n\n<pre><code>Activity activity = new Activity(\"appPackage\", \"appActivity\");\ndriver.startActivity(activity);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9202382,"reputation":966,"user_id":6838888,"display_name":"Vinod"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523269870,"creation_date":1523269870,"answer_id":49730847,"question_id":49665033,"body_markdown":"Try below code and add this to the capability :\r\n\r\n    capabilities.setCapability(MobileCapabilityType.NO_RESET,&quot;false&quot;);\r\n\r\nIt should work as per your requirements.","title":"How to hard close/force close/kill the app from memory in Android using Appium in the same test","body":"<p>Try below code and add this to the capability :</p>\n\n<pre><code>capabilities.setCapability(MobileCapabilityType.NO_RESET,\"false\");\n</code></pre>\n\n<p>It should work as per your requirements.</p>\n"},{"tags":[],"owner":{"account_id":20717463,"reputation":190,"user_id":15212573,"display_name":"roudlek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691147860,"creation_date":1691147860,"answer_id":76835411,"question_id":49665033,"body_markdown":"using **appium 2**:\r\n\r\n\r\n    driver.terminateApp(&quot;app package of the app&quot;);\r\n\r\nto close the app, so you can open it again without closing it by hand, if you don&#39;t do this, it will open first time, second time will not, it is going to stay in the background, but it will be open after launching the test everytime, weither it is on back ground or not !","title":"How to hard close/force close/kill the app from memory in Android using Appium in the same test","body":"<p>using <strong>appium 2</strong>:</p>\n<pre><code>driver.terminateApp(&quot;app package of the app&quot;);\n</code></pre>\n<p>to close the app, so you can open it again without closing it by hand, if you don't do this, it will open first time, second time will not, it is going to stay in the background, but it will be open after launching the test everytime, weither it is on back ground or not !</p>\n"}],"owner":{"account_id":12183468,"reputation":53,"user_id":8894247,"display_name":"alk1985"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2213,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1691147860,"creation_date":1522907488,"question_id":49665033,"body_markdown":"**This is my scenario**\r\n\r\n 1. Launch the  app and perform some steps \r\n 2. Hardclose/Forceclose/Kill the app from memory/Should not run in background \r\n 3. Launch the app again\r\n 4. Perform some steps \r\n 5. Assertion step\r\n\r\nHow to achieve this?\r\n\r\n**I have tried the following methods**\r\n\r\n 1. `resetApp()` - it uninstall the app and install app again. \r\n 2. `closeApp()` - it just close the app but app is still running in the background.\r\n 3. `adb shell am force-stop &lt;packagename&gt;` - it just close the app but app is still running in the background.\r\n\r\nBut for my scenario it should delete from the background and app should not uninstall in **Android** in the same test (middle of the test).","title":"How to hard close/force close/kill the app from memory in Android using Appium in the same test","body":"<p><strong>This is my scenario</strong></p>\n\n<ol>\n<li>Launch the  app and perform some steps </li>\n<li>Hardclose/Forceclose/Kill the app from memory/Should not run in background </li>\n<li>Launch the app again</li>\n<li>Perform some steps </li>\n<li>Assertion step</li>\n</ol>\n\n<p>How to achieve this?</p>\n\n<p><strong>I have tried the following methods</strong></p>\n\n<ol>\n<li><code>resetApp()</code> - it uninstall the app and install app again. </li>\n<li><code>closeApp()</code> - it just close the app but app is still running in the background.</li>\n<li><code>adb shell am force-stop &lt;packagename&gt;</code> - it just close the app but app is still running in the background.</li>\n</ol>\n\n<p>But for my scenario it should delete from the background and app should not uninstall in <strong>Android</strong> in the same test (middle of the test).</p>\n"},{"tags":["java","docker","testing"],"comments":[{"owner":{"account_id":29159427,"reputation":11,"user_id":22338503,"display_name":"Sasailo"},"score":0,"creation_date":1691152886,"post_id":76835376,"comment_id":135456854,"body_markdown":"org.testcontainers.dockerclient.DockerMachineClientProviderStrategy -- docker-machine executable was not found on PATH\n\nIt cant find docker inside my maven-container","body":"org.testcontainers.dockerclient.DockerMachineClientProviderS&zwnj;&#8203;trategy -- docker-machine executable was not found on PATH  It cant find docker inside my maven-container"},{"owner":{"account_id":11555562,"reputation":316,"user_id":8466853,"display_name":"Arno"},"score":0,"creation_date":1701548998,"post_id":76835376,"comment_id":136790433,"body_markdown":"Testcontainers are usually used for unit testing during build. Why do you want to start it in docker-compose? Sounds like a worng use case to me.","body":"Testcontainers are usually used for unit testing during build. Why do you want to start it in docker-compose? Sounds like a worng use case to me."}],"owner":{"account_id":29159427,"reputation":11,"user_id":22338503,"display_name":"Sasailo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691147780,"creation_date":1691147634,"question_id":76835376,"body_markdown":"I want to add testcontainer in my tests\r\n\r\n```    @Container\r\n    public static final PostgreSQLContainer&lt;?&gt; postgresContainer = new PostgreSQLContainer&lt;&gt;(&quot;postgres:13&quot;)\r\n            .withDatabaseName(&quot;TestTask_DB&quot;)\r\n            .withUsername(&quot;root&quot;)\r\n            .withPassword(&quot;root&quot;)\r\n            .withExposedPorts(5432);\r\n\r\n    static class Initializer implements ApplicationContextInitializer&lt;ConfigurableApplicationContext&gt; {\r\n        public void initialize(ConfigurableApplicationContext configurableApplicationContext) {\r\n            TestPropertyValues.of(\r\n                    &quot;spring.datasource.url=&quot; + postgresContainer.getJdbcUrl(),\r\n                    &quot;spring.datasource.username=&quot; + postgresContainer.getUsername(),\r\n                    &quot;spring.datasource.password=&quot; + postgresContainer.getPassword()\r\n            ).applyTo(configurableApplicationContext.getEnvironment());\r\n        }\r\n    }\r\n```\r\n\r\nWhen i start it from IDE - all ok. But if i use docker-compose up - it gives me an error. (mvn test is working)\r\n\r\nmy docker-compose file:\r\n\r\n```version: &#39;3.9&#39;\r\nservices:\r\n  app:\r\n    volumes:\r\n      - /var/run/docker.sock:/var/run/docker.sock\r\n    build:\r\n      context: .\r\n      dockerfile: Dockerfile\r\n    ports:\r\n      - &quot;8080:8080&quot;\r\n    depends_on:\r\n      - db\r\n      - testcontainer\r\n    environment:\r\n      SPRING_DATASOURCE_URL: jdbc:postgresql://db:54320/TestTask_DB\r\n      SPRING_DATASOURCE_USERNAME: root\r\n      SPRING_DATASOURCE_PASSWORD: root\r\n    restart: on-failure\r\n    command: bash -c &quot;sleep 15 &amp;&amp; java -jar /usr/app/TestTask-0.0.1-SNAPSHOT.jar&quot;\r\n\r\n  testcontainer:\r\n    image: postgres:13\r\n    environment:\r\n      POSTGRES_USER: root\r\n      POSTGRES_PASSWORD: root\r\n      POSTGRES_DB: TestTask_DB\r\n    ports:\r\n      - &quot;5432:5432&quot;\r\n\r\n  db:\r\n    image: postgres:13\r\n    environment:\r\n      POSTGRES_USER: root\r\n      POSTGRES_PASSWORD: root\r\n      POSTGRES_DB: TestTask_DB\r\n    ports:\r\n      - &quot;54320:5432&quot;\r\n```\r\n\r\nChatGPT cant help me :(\r\nHelp me please ...","title":"Error: TestTaskApplicationTests &#187; IllegalState Could not find a valid Docker environment. Please see logs and check configuration","body":"<p>I want to add testcontainer in my tests</p>\n<pre><code>    public static final PostgreSQLContainer&lt;?&gt; postgresContainer = new PostgreSQLContainer&lt;&gt;(&quot;postgres:13&quot;)\n            .withDatabaseName(&quot;TestTask_DB&quot;)\n            .withUsername(&quot;root&quot;)\n            .withPassword(&quot;root&quot;)\n            .withExposedPorts(5432);\n\n    static class Initializer implements ApplicationContextInitializer&lt;ConfigurableApplicationContext&gt; {\n        public void initialize(ConfigurableApplicationContext configurableApplicationContext) {\n            TestPropertyValues.of(\n                    &quot;spring.datasource.url=&quot; + postgresContainer.getJdbcUrl(),\n                    &quot;spring.datasource.username=&quot; + postgresContainer.getUsername(),\n                    &quot;spring.datasource.password=&quot; + postgresContainer.getPassword()\n            ).applyTo(configurableApplicationContext.getEnvironment());\n        }\n    }\n</code></pre>\n<p>When i start it from IDE - all ok. But if i use docker-compose up - it gives me an error. (mvn test is working)</p>\n<p>my docker-compose file:</p>\n<pre><code>services:\n  app:\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    build:\n      context: .\n      dockerfile: Dockerfile\n    ports:\n      - &quot;8080:8080&quot;\n    depends_on:\n      - db\n      - testcontainer\n    environment:\n      SPRING_DATASOURCE_URL: jdbc:postgresql://db:54320/TestTask_DB\n      SPRING_DATASOURCE_USERNAME: root\n      SPRING_DATASOURCE_PASSWORD: root\n    restart: on-failure\n    command: bash -c &quot;sleep 15 &amp;&amp; java -jar /usr/app/TestTask-0.0.1-SNAPSHOT.jar&quot;\n\n  testcontainer:\n    image: postgres:13\n    environment:\n      POSTGRES_USER: root\n      POSTGRES_PASSWORD: root\n      POSTGRES_DB: TestTask_DB\n    ports:\n      - &quot;5432:5432&quot;\n\n  db:\n    image: postgres:13\n    environment:\n      POSTGRES_USER: root\n      POSTGRES_PASSWORD: root\n      POSTGRES_DB: TestTask_DB\n    ports:\n      - &quot;54320:5432&quot;\n</code></pre>\n<p>ChatGPT cant help me :(\nHelp me please ...</p>\n"},{"tags":["java","openrewrite"],"comments":[{"owner":{"account_id":21852,"reputation":19896,"user_id":53444,"accept_rate":70,"display_name":"Tim"},"score":2,"creation_date":1690821418,"post_id":76805396,"comment_id":135403179,"body_markdown":"How large is your project in terms of files &amp; classes? For larger projects we typically see people need more memory, with instructions at the top here: https://docs.openrewrite.org/reference/faq","body":"How large is your project in terms of files &amp; classes? For larger projects we typically see people need more memory, with instructions at the top here: <a href=\"https://docs.openrewrite.org/reference/faq\" rel=\"nofollow noreferrer\">docs.openrewrite.org/reference/faq</a>"},{"owner":{"account_id":21852,"reputation":19896,"user_id":53444,"accept_rate":70,"display_name":"Tim"},"score":0,"creation_date":1690821495,"post_id":76805396,"comment_id":135403194,"body_markdown":"The `NoSuchMethodError` should already be fixed in the latest releases; can you expand the truncated stacktrace such that I know which recipe is involved there?","body":"The <code>NoSuchMethodError</code> should already be fixed in the latest releases; can you expand the truncated stacktrace such that I know which recipe is involved there?"},{"owner":{"account_id":14214190,"reputation":81,"user_id":10268546,"display_name":"Dana Georgescu"},"score":0,"creation_date":1690902491,"post_id":76805396,"comment_id":135416208,"body_markdown":"The project is large indeed. I tried using `-Xmx8G` like described and even `-Xmx16G` and I still get `java.lang.NoSuchMethodError`. I will add the stacktrace in the problem description.","body":"The project is large indeed. I tried using <code>-Xmx8G</code> like described and even <code>-Xmx16G</code> and I still get <code>java.lang.NoSuchMethodError</code>. I will add the stacktrace in the problem description."},{"owner":{"account_id":120605,"reputation":24173,"user_id":313137,"display_name":"Romain Hippeau"},"score":0,"creation_date":1690908337,"post_id":76805396,"comment_id":135417359,"body_markdown":"https://rollbar.com/blog/how-to-fix-java-lang-nosuchmethoderror-in-java/#:~:text=A%20java.-,lang.,object%2C%20which%20causes%20a%20java.","body":"<a href=\"https://rollbar.com/blog/how-to-fix-java-lang-nosuchmethoderror-in-java/#:~:text=A%20java.-,lang.,object%2C%20which%20causes%20a%20java\" rel=\"nofollow noreferrer\">rollbar.com/blog/how-to-fix-java-lang-nosuchmethoderror-in-j&zwnj;&#8203;ava/&hellip;</a>."},{"owner":{"account_id":21852,"reputation":19896,"user_id":53444,"accept_rate":70,"display_name":"Tim"},"score":0,"creation_date":1690994149,"post_id":76805396,"comment_id":135431556,"body_markdown":"The stacktrace indicates you&#39;ll want to upgrade to the latest rewrite-spring release; which is 5.0.7 as of today: https://github.com/openrewrite/rewrite-spring/releases","body":"The stacktrace indicates you&#39;ll want to upgrade to the latest rewrite-spring release; which is 5.0.7 as of today: <a href=\"https://github.com/openrewrite/rewrite-spring/releases\" rel=\"nofollow noreferrer\">github.com/openrewrite/rewrite-spring/releases</a>"},{"owner":{"account_id":21852,"reputation":19896,"user_id":53444,"accept_rate":70,"display_name":"Tim"},"score":0,"creation_date":1690994211,"post_id":76805396,"comment_id":135431566,"body_markdown":"That won&#39;t yet fix your OutOfMemoryErrors, and it&#39;s hard to say how much memory you would need for things to pass","body":"That won&#39;t yet fix your OutOfMemoryErrors, and it&#39;s hard to say how much memory you would need for things to pass"},{"owner":{"account_id":14214190,"reputation":81,"user_id":10268546,"display_name":"Dana Georgescu"},"score":0,"creation_date":1691147382,"post_id":76805396,"comment_id":135455750,"body_markdown":"Worked when adding VM options `-Xmx25G  -XX:+UnlockDiagnosticVMOptions -XX:GCLockerRetryAllocationCount=100`","body":"Worked when adding VM options <code>-Xmx25G  -XX:+UnlockDiagnosticVMOptions -XX:GCLockerRetryAllocationCount=100</code>"}],"answers":[{"tags":[],"owner":{"account_id":14214190,"reputation":81,"user_id":10268546,"display_name":"Dana Georgescu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691147707,"creation_date":1691147707,"answer_id":76835390,"question_id":76805396,"body_markdown":"It finally worked when adding these VM options: `-Xmx25G -XX:+UnlockDiagnosticVMOptions XX:GCLockerRetryAllocationCount=100`. So basically I increased the Java Heap and increased the GCLockerRetryAllocationCount from the default value 2, to 100.\r\nThanks Tim for your comment.","title":"When updating from spring boot 2.7 to 3 with openrewrite I get a Java heap space error","body":"<p>It finally worked when adding these VM options: <code>-Xmx25G -XX:+UnlockDiagnosticVMOptions XX:GCLockerRetryAllocationCount=100</code>. So basically I increased the Java Heap and increased the GCLockerRetryAllocationCount from the default value 2, to 100.\nThanks Tim for your comment.</p>\n"}],"owner":{"account_id":14214190,"reputation":81,"user_id":10268546,"display_name":"Dana Georgescu"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":591,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76835390,"answer_count":1,"score":0,"last_activity_date":1691147707,"creation_date":1690819873,"question_id":76805396,"body_markdown":"I am trying to migrate from Spring Boot 2.7 to 3 using [openrewrite.recipe:rewrite-spring:5.0.3](https://docs.openrewrite.org/running-recipes/popular-recipe-guides/migrate-to-spring-3)\r\n\r\nI am using Java 17 and running the plugin in the command line like this:\r\n\r\n```\r\nmvn -U org.openrewrite.maven:rewrite-maven-plugin:run -Drewrite.recipeArtifactCoordinates=org.openrewrite.recipe:rewrite-spring:5.0.6 -Drewrite.activeRecipes=org.openrewrite.java.spring.boot3.UpgradeSpringBoot_3_1\r\n```\r\n\r\nI get a stdout GCLocker error:\r\n\r\n    [162.374s][warning][gc,alloc] ClassGraph-worker-687: Retried waiting for GCLocker too often allocating 2050 words\r\n\r\n\r\nThe plugin execution fails with the following OutOfMemoryError:\r\n\r\n```\r\n[ERROR] Failed to execute goal org.openrewrite.maven:rewrite-maven-plugin:5.3.2:run (default-cli) on project xxxxxxx: Execution default-cli of goal org.openrewrite.maven:rewrite-maven-plugin:5.3.2:run failed: Uncaught exception during scan: Java heap space -&gt; [Help 1]\r\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.openrewrite.maven:rewrite-maven-plugin:5.3.2:run (default-cli) on project myproject: Execution default-cli of goal org.openrewrite.maven:rewrite-maven-plugin:5.3.2:run failed: Uncaught exception during scan\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:568)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n    at org.codehaus.classworlds.Launcher.main (Launcher.java:47)\r\nCaused by: org.apache.maven.plugin.PluginExecutionException: Execution default-cli of goal org.openrewrite.maven:rewrite-maven-plugin:5.3.2:run failed: Uncaught exception during scan\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:148)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:568)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n    at org.codehaus.classworlds.Launcher.main (Launcher.java:47)\r\nCaused by: io.github.classgraph.ClassGraphException: Uncaught exception during scan\r\n    at io.github.classgraph.ClassGraph.scan (ClassGraph.java:1610)\r\n    at io.github.classgraph.ClassGraph.scan (ClassGraph.java:1627)\r\n    at io.github.classgraph.ClassGraph.scan (ClassGraph.java:1640)\r\n    at org.openrewrite.java.marker.JavaSourceSet.build (JavaSourceSet.java:81)\r\n    at org.openrewrite.maven.MavenMojoProjectParser.sourceSet (MavenMojoProjectParser.java:371)\r\n    at org.openrewrite.maven.MavenMojoProjectParser.processMainSources (MavenMojoProjectParser.java:308)\r\n    at org.openrewrite.maven.MavenMojoProjectParser.listSourceFiles (MavenMojoProjectParser.java:172)\r\n    at org.openrewrite.maven.MavenMojoProjectParser.lambda$listSourceFiles$0 (MavenMojoProjectParser.java:145)\r\n    at java.util.stream.ReferencePipeline$7$1.accept (ReferencePipeline.java:273)\r\n    at java.util.ArrayList$ArrayListSpliterator.forEachRemaining (ArrayList.java:1625)\r\n    at java.util.stream.AbstractPipeline.copyInto (AbstractPipeline.java:509)\r\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto (AbstractPipeline.java:499)\r\n    at java.util.stream.ReduceOps$ReduceOp.evaluateSequential (ReduceOps.java:921)\r\n    at java.util.stream.AbstractPipeline.evaluate (AbstractPipeline.java:234)\r\n    at java.util.stream.ReferencePipeline.collect (ReferencePipeline.java:682)\r\n    at org.openrewrite.maven.AbstractRewriteMojo.sourcesWithAutoDetectedStyles (AbstractRewriteMojo.java:281)\r\n    at org.openrewrite.maven.AbstractRewriteMojo.loadSourceSet (AbstractRewriteMojo.java:258)\r\n    at org.openrewrite.maven.AbstractRewriteMojo.listResults (AbstractRewriteMojo.java:239)\r\n    at org.openrewrite.maven.AbstractRewriteRunMojo.execute (AbstractRewriteRunMojo.java:53)\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:568)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n    at org.codehaus.classworlds.Launcher.main (Launcher.java:47)\r\nCaused by: java.lang.OutOfMemoryError: Java heap space\r\n    at nonapi.io.github.classgraph.fileslice.reader.ClassfileReader.&lt;init&gt; (ClassfileReader.java:150)\r\n    at io.github.classgraph.ClasspathElementZip$1.openClassfile (ClasspathElementZip.java:376)\r\n    at io.github.classgraph.Classfile.&lt;init&gt; (Classfile.java:2002)\r\n    at io.github.classgraph.Scanner$ClassfileScannerWorkUnitProcessor.processWorkUnit (Scanner.java:725)\r\n    at io.github.classgraph.Scanner$ClassfileScannerWorkUnitProcessor.processWorkUnit (Scanner.java:647)\r\n    at nonapi.io.github.classgraph.concurrency.WorkQueue.runWorkLoop (WorkQueue.java:246)\r\n    at nonapi.io.github.classgraph.concurrency.WorkQueue.access$000 (WorkQueue.java:50)\r\n    at nonapi.io.github.classgraph.concurrency.WorkQueue$1.call (WorkQueue.java:201)\r\n    at nonapi.io.github.classgraph.concurrency.WorkQueue$1.call (WorkQueue.java:198)\r\n    at java.util.concurrent.FutureTask.run (FutureTask.java:264)\r\n    at java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1136)\r\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:635)\r\n    at java.lang.Thread.run (Thread.java:833)\r\n```\r\n\r\n\r\n\r\n\r\n\r\nAfter reading [this post about GCLocker OOM exceptions](https://tech.clevertap.com/demystifying-g1-gc-gclocker-jni-critical-and-fake-oom-exceptions/) , I reran the plugin the following VM options: \r\n\r\n    -XX:+UnlockDiagnosticVMOptions\r\n    -XX:GCLockerRetryAllocationCount=100\r\n\r\nThe plugin fails with NoSuchMethodError:\r\n\r\n```\r\nError while visiting MyClass.java: java.lang.NoSuchMethodError: &#39;void org.openrewrite.java.tree.J$Identifier.&lt;init&gt;(java.util.UUID, org.openrewrite.java.tree.Space, org.openrewrite.marker.Markers, java.util.List, java.lang.String, org.openrewrite.java.tree.JavaType, org.openrewrite.java.tree.JavaType$Variable)&#39;\r\n  org.openrewrite.staticanalysis.InstanceOfPatternMatch$InstanceOfPatternReplacements.processInstanceOf(InstanceOfPatternMatch.java:215)\r\n  org.openrewrite.staticanalysis.InstanceOfPatternMatch$UseInstanceOfPatternMatching.visitInstanceOf(InstanceOfPatternMatch.java:302)\r\n  org.openrewrite.staticanalysis.InstanceOfPatternMatch$UseInstanceOfPatternMatching.visitInstanceOf(InstanceOfPatternMatch.java:286)\r\n  org.openrewrite.java.tree.J$InstanceOf.acceptJava(J.java:2818)\r\n  org.openrewrite.java.tree.J.accept(J.java:59)\r\n  org.openrewrite.TreeVisitor.visit(TreeVisitor.java:278)\r\n  org.openrewrite.TreeVisitor.visitAndCast(TreeVisitor.java:361)\r\n  org.openrewrite.java.JavaVisitor.visitRightPadded(JavaVisitor.java:1283)\r\n  ...\r\n```\r\n\r\n\r\nI have also tried as suggested in the comments to increase Java Heap memory with flag:\r\n`-Xmx8G`. I still get a `NoSuchMethodError`.\r\n\r\nFull stacktrace:\r\n\r\n    [ERROR] Failed to execute goal org.openrewrite.maven:rewrite-maven-plugin:5.3.2:run (default-cli) on project myproject: Execution default-cli of goal org.openrewrite.maven:rewrite-maven-plugin:5.3.2:run failed: Error while visiting MyClass.java: java.lang.NoSuchMethodError: &#39;void org.openrewrite.java.tree.J$Identifier.&lt;init&gt;(java.util.UUID, org.openrewrite.java.tree.Space, org.openrewrite.marker.Markers, java.util.List\r\n    , java.lang.String, org.openrewrite.java.tree.JavaType, org.openrewrite.java.tree.JavaType$Variable)&#39;\r\n    [ERROR]   org.openrewrite.staticanalysis.InstanceOfPatternMatch$InstanceOfPatternReplacements.processInstanceOf(InstanceOfPatternMatch.java:215)\r\n    [ERROR]   org.openrewrite.staticanalysis.InstanceOfPatternMatch$UseInstanceOfPatternMatching.visitInstanceOf(InstanceOfPatternMatch.java:302)\r\n    [ERROR]   org.openrewrite.staticanalysis.InstanceOfPatternMatch$UseInstanceOfPatternMatching.visitInstanceOf(InstanceOfPatternMatch.java:286)\r\n    [ERROR]   org.openrewrite.java.tree.J$InstanceOf.acceptJava(J.java:2818)\r\n    [ERROR]   org.openrewrite.java.tree.J.accept(J.java:59)\r\n    [ERROR]   org.openrewrite.TreeVisitor.visit(TreeVisitor.java:278)\r\n    [ERROR]   org.openrewrite.TreeVisitor.visitAndCast(TreeVisitor.java:361)\r\n    [ERROR]   org.openrewrite.java.JavaVisitor.visitRightPadded(JavaVisitor.java:1283)\r\n    [ERROR]   ...\r\n    [ERROR] -&gt; [Help 1]\r\n    org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.openrewrite.maven:rewrite-maven-plugin:5.3.2:run (default-cli) on project myproject: Execution default-cli of goal org.openrewrite.maven:rewrite-maven-plugin:5.3.2:run failed:\r\n     Error while visiting MyClass.java: java.lang.NoSuchMethodError: &#39;void org.openrewrite.java.tree.J$Identifier.&lt;init&gt;(java.util.UUID, org.openrewrite.java.tree.Space\r\n    , org.openrewrite.marker.Markers, java.util.List, java.lang.String, org.openrewrite.java.tree.JavaType, org.openrewrite.java.tree.JavaType$Variable)&#39;\r\n      org.openrewrite.staticanalysis.InstanceOfPatternMatch$InstanceOfPatternReplacements.processInstanceOf(InstanceOfPatternMatch.java:215)\r\n      org.openrewrite.staticanalysis.InstanceOfPatternMatch$UseInstanceOfPatternMatching.visitInstanceOf(InstanceOfPatternMatch.java:302)\r\n      org.openrewrite.staticanalysis.InstanceOfPatternMatch$UseInstanceOfPatternMatching.visitInstanceOf(InstanceOfPatternMatch.java:286)\r\n      org.openrewrite.java.tree.J$InstanceOf.acceptJava(J.java:2818)\r\n      org.openrewrite.java.tree.J.accept(J.java:59)\r\n      org.openrewrite.TreeVisitor.visit(TreeVisitor.java:278)\r\n      org.openrewrite.TreeVisitor.visitAndCast(TreeVisitor.java:361)\r\n      org.openrewrite.java.JavaVisitor.visitRightPadded(JavaVisitor.java:1283)\r\n      ...\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:568)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n    Caused by: org.apache.maven.plugin.PluginExecutionException: Execution default-cli of goal org.openrewrite.maven:rewrite-maven-plugin:5.3.2:run failed: Error while visiting MyClass.java: &#39;void org.openrewrite.java.tree.J$Identifier.&lt;init&gt;(java.util.UUID, org.openrewrite.java.tree.Space, org.openrewrite.marker.Markers, java.util.List, java.lang.String, org.openrewrite.java.tree.JavaType, org.ope\r\n    nrewrite.java.tree.JavaType$Variable)&#39;\r\n      org.openrewrite.staticanalysis.InstanceOfPatternMatch$InstanceOfPatternReplacements.processInstanceOf(InstanceOfPatternMatch.java:215)\r\n      org.openrewrite.staticanalysis.InstanceOfPatternMatch$UseInstanceOfPatternMatching.visitInstanceOf(InstanceOfPatternMatch.java:302)\r\n      org.openrewrite.staticanalysis.InstanceOfPatternMatch$UseInstanceOfPatternMatching.visitInstanceOf(InstanceOfPatternMatch.java:286)\r\n      org.openrewrite.java.tree.J$InstanceOf.acceptJava(J.java:2818)\r\n      org.openrewrite.java.tree.J.accept(J.java:59)\r\n      org.openrewrite.TreeVisitor.visit(TreeVisitor.java:278)\r\n      org.openrewrite.TreeVisitor.visitAndCast(TreeVisitor.java:361)\r\n      org.openrewrite.java.JavaVisitor.visitRightPadded(JavaVisitor.java:1283)\r\n      ...\r\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:148)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:568)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n    Caused by: java.lang.RuntimeException: Error while visiting MyClass.java: java.lang.NoSuchMethodError: &#39;void org.openrewrite.java.tree.J$Identifier.&lt;init&gt;(java.util\r\n    .UUID, org.openrewrite.java.tree.Space, org.openrewrite.marker.Markers, java.util.List, java.lang.String, org.openrewrite.java.tree.JavaType, org.openrewrite.java.tree.JavaType$Variable)&#39;\r\n      org.openrewrite.staticanalysis.InstanceOfPatternMatch$InstanceOfPatternReplacements.processInstanceOf(InstanceOfPatternMatch.java:215)\r\n      org.openrewrite.staticanalysis.InstanceOfPatternMatch$UseInstanceOfPatternMatching.visitInstanceOf(InstanceOfPatternMatch.java:302)\r\n      org.openrewrite.staticanalysis.InstanceOfPatternMatch$UseInstanceOfPatternMatching.visitInstanceOf(InstanceOfPatternMatch.java:286)\r\n      org.openrewrite.java.tree.J$InstanceOf.acceptJava(J.java:2818)\r\n      org.openrewrite.java.tree.J.accept(J.java:59)\r\n      org.openrewrite.TreeVisitor.visit(TreeVisitor.java:278)\r\n      org.openrewrite.TreeVisitor.visitAndCast(TreeVisitor.java:361)\r\n      org.openrewrite.java.JavaVisitor.visitRightPadded(JavaVisitor.java:1283)\r\n      ...\r\n        at org.openrewrite.maven.AbstractRewriteMojo$ResultsContainer$1.lambda$preVisit$0 (AbstractRewriteMojo.java:417)\r\n        at java.util.Optional.ifPresent (Optional.java:178)\r\n        at org.openrewrite.maven.AbstractRewriteMojo$ResultsContainer$1.preVisit (AbstractRewriteMojo.java:414)\r\n        at org.openrewrite.maven.AbstractRewriteMojo$ResultsContainer$1.preVisit (AbstractRewriteMojo.java:410)\r\n        at org.openrewrite.maven.AbstractRewriteMojo_ResultsContainer_1_JavaVisitor.preVisit (AbstractRewriteMojo_ResultsContainer_1_JavaVisitor.zig:81)\r\n        at org.openrewrite.TreeVisitor.visit (TreeVisitor.java:275)\r\n        at org.openrewrite.TreeVisitor.visitAndCast (TreeVisitor.java:361)\r\n        at org.openrewrite.java.JavaVisitor.visitRightPadded (JavaVisitor.java:1283)\r\n        at org.openrewrite.java.JavaVisitor.visitControlParentheses (JavaVisitor.java:495)\r\n        at org.openrewrite.java.tree.J$ControlParentheses.acceptJava (J.java:4512)\r\n        at org.openrewrite.java.tree.J.accept (J.java:59)\r\n        at org.openrewrite.TreeVisitor.visit (TreeVisitor.java:278)\r\n        at org.openrewrite.TreeVisitor.visitAndCast (TreeVisitor.java:361)\r\n        at org.openrewrite.java.JavaVisitor.visitIf (JavaVisitor.java:663)\r\n        at org.openrewrite.java.tree.J$If.acceptJava (J.java:2432)\r\n        at org.openrewrite.java.tree.J.accept (J.java:59)\r\n        at org.openrewrite.TreeVisitor.visit (TreeVisitor.java:278)\r\n        at org.openrewrite.TreeVisitor.visitAndCast (TreeVisitor.java:361)\r\n        at org.openrewrite.java.JavaVisitor.visitRightPadded (JavaVisitor.java:1283)\r\n        at org.openrewrite.java.JavaVisitor.lambda$visitBlock$4 (JavaVisitor.java:366)\r\n        at org.openrewrite.internal.ListUtils.map (ListUtils.java:176)\r\n        at org.openrewrite.java.JavaVisitor.visitBlock (JavaVisitor.java:365)\r\n        at org.openrewrite.java.tree.J$Block.acceptJava (J.java:767)\r\n        at org.openrewrite.java.tree.J.accept (J.java:59)\r\n        at org.openrewrite.TreeVisitor.visit (TreeVisitor.java:278)\r\n        at org.openrewrite.TreeVisitor.visitAndCast (TreeVisitor.java:361)\r\n        at org.openrewrite.java.JavaVisitor.visitMethodDeclaration (JavaVisitor.java:816)\r\n        at org.openrewrite.java.tree.J$MethodDeclaration.acceptJava (J.java:3448)\r\n        at org.openrewrite.java.tree.J.accept (J.java:59)\r\n        at org.openrewrite.TreeVisitor.visit (TreeVisitor.java:278)\r\n        at org.openrewrite.TreeVisitor.visitAndCast (TreeVisitor.java:361)\r\n        at org.openrewrite.java.JavaVisitor.visitRightPadded (JavaVisitor.java:1283)\r\n        at org.openrewrite.java.JavaVisitor.lambda$visitBlock$4 (JavaVisitor.java:366)\r\n        at org.openrewrite.internal.ListUtils.map (ListUtils.java:176)\r\n        at org.openrewrite.java.JavaVisitor.visitBlock (JavaVisitor.java:365)\r\n        at org.openrewrite.java.tree.J$Block.acceptJava (J.java:767)\r\n        at org.openrewrite.java.tree.J.accept (J.java:59)\r\n        at org.openrewrite.TreeVisitor.visit (TreeVisitor.java:278)\r\n        at org.openrewrite.TreeVisitor.visitAndCast (TreeVisitor.java:361)\r\n        at org.openrewrite.java.JavaVisitor.visitClassDeclaration (JavaVisitor.java:453)\r\n        at org.openrewrite.java.tree.J$ClassDeclaration.acceptJava (J.java:1217)\r\n        at org.openrewrite.java.tree.J.accept (J.java:59)\r\n        at org.openrewrite.TreeVisitor.visit (TreeVisitor.java:278)\r\n        at org.openrewrite.TreeVisitor.visitAndCast (TreeVisitor.java:361)\r\n        at org.openrewrite.java.JavaVisitor.lambda$visitCompilationUnit$10 (JavaVisitor.java:466)\r\n        at org.openrewrite.internal.ListUtils.map (ListUtils.java:176)\r\n        at org.openrewrite.java.JavaVisitor.visitCompilationUnit (JavaVisitor.java:466)\r\n        at org.openrewrite.java.tree.J$CompilationUnit.acceptJava (J.java:1520)\r\n        at org.openrewrite.java.tree.J.accept (J.java:59)\r\n        at org.openrewrite.TreeVisitor.visit (TreeVisitor.java:278)\r\n        at org.openrewrite.maven.AbstractRewriteMojo$ResultsContainer.getRecipeErrors (AbstractRewriteMojo.java:421)\r\n        at org.openrewrite.maven.AbstractRewriteMojo$ResultsContainer.getFirstException (AbstractRewriteMojo.java:401)\r\n        at org.openrewrite.maven.AbstractRewriteRunMojo.execute (AbstractRewriteRunMojo.java:54)\r\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    \r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:568)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n    [ERROR]\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n\r\nAny idea how to fix this?\r\n\r\nLater edit:\r\nIt finally worked with a huge Java Heap: `-Xmx25G` and also adding these VM options: ` -XX:+UnlockDiagnosticVMOptions XX:GCLockerRetryAllocationCount=100`","title":"When updating from spring boot 2.7 to 3 with openrewrite I get a Java heap space error","body":"<p>I am trying to migrate from Spring Boot 2.7 to 3 using <a href=\"https://docs.openrewrite.org/running-recipes/popular-recipe-guides/migrate-to-spring-3\" rel=\"nofollow noreferrer\">openrewrite.recipe:rewrite-spring:5.0.3</a></p>\n<p>I am using Java 17 and running the plugin in the command line like this:</p>\n<pre><code>mvn -U org.openrewrite.maven:rewrite-maven-plugin:run -Drewrite.recipeArtifactCoordinates=org.openrewrite.recipe:rewrite-spring:5.0.6 -Drewrite.activeRecipes=org.openrewrite.java.spring.boot3.UpgradeSpringBoot_3_1\n</code></pre>\n<p>I get a stdout GCLocker error:</p>\n<pre><code>[162.374s][warning][gc,alloc] ClassGraph-worker-687: Retried waiting for GCLocker too often allocating 2050 words\n</code></pre>\n<p>The plugin execution fails with the following OutOfMemoryError:</p>\n<pre><code>[ERROR] Failed to execute goal org.openrewrite.maven:rewrite-maven-plugin:5.3.2:run (default-cli) on project xxxxxxx: Execution default-cli of goal org.openrewrite.maven:rewrite-maven-plugin:5.3.2:run failed: Uncaught exception during scan: Java heap space -&gt; [Help 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.openrewrite.maven:rewrite-maven-plugin:5.3.2:run (default-cli) on project myproject: Execution default-cli of goal org.openrewrite.maven:rewrite-maven-plugin:5.3.2:run failed: Uncaught exception during scan\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n    at org.codehaus.classworlds.Launcher.main (Launcher.java:47)\nCaused by: org.apache.maven.plugin.PluginExecutionException: Execution default-cli of goal org.openrewrite.maven:rewrite-maven-plugin:5.3.2:run failed: Uncaught exception during scan\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:148)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n    at org.codehaus.classworlds.Launcher.main (Launcher.java:47)\nCaused by: io.github.classgraph.ClassGraphException: Uncaught exception during scan\n    at io.github.classgraph.ClassGraph.scan (ClassGraph.java:1610)\n    at io.github.classgraph.ClassGraph.scan (ClassGraph.java:1627)\n    at io.github.classgraph.ClassGraph.scan (ClassGraph.java:1640)\n    at org.openrewrite.java.marker.JavaSourceSet.build (JavaSourceSet.java:81)\n    at org.openrewrite.maven.MavenMojoProjectParser.sourceSet (MavenMojoProjectParser.java:371)\n    at org.openrewrite.maven.MavenMojoProjectParser.processMainSources (MavenMojoProjectParser.java:308)\n    at org.openrewrite.maven.MavenMojoProjectParser.listSourceFiles (MavenMojoProjectParser.java:172)\n    at org.openrewrite.maven.MavenMojoProjectParser.lambda$listSourceFiles$0 (MavenMojoProjectParser.java:145)\n    at java.util.stream.ReferencePipeline$7$1.accept (ReferencePipeline.java:273)\n    at java.util.ArrayList$ArrayListSpliterator.forEachRemaining (ArrayList.java:1625)\n    at java.util.stream.AbstractPipeline.copyInto (AbstractPipeline.java:509)\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto (AbstractPipeline.java:499)\n    at java.util.stream.ReduceOps$ReduceOp.evaluateSequential (ReduceOps.java:921)\n    at java.util.stream.AbstractPipeline.evaluate (AbstractPipeline.java:234)\n    at java.util.stream.ReferencePipeline.collect (ReferencePipeline.java:682)\n    at org.openrewrite.maven.AbstractRewriteMojo.sourcesWithAutoDetectedStyles (AbstractRewriteMojo.java:281)\n    at org.openrewrite.maven.AbstractRewriteMojo.loadSourceSet (AbstractRewriteMojo.java:258)\n    at org.openrewrite.maven.AbstractRewriteMojo.listResults (AbstractRewriteMojo.java:239)\n    at org.openrewrite.maven.AbstractRewriteRunMojo.execute (AbstractRewriteRunMojo.java:53)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n    at org.codehaus.classworlds.Launcher.main (Launcher.java:47)\nCaused by: java.lang.OutOfMemoryError: Java heap space\n    at nonapi.io.github.classgraph.fileslice.reader.ClassfileReader.&lt;init&gt; (ClassfileReader.java:150)\n    at io.github.classgraph.ClasspathElementZip$1.openClassfile (ClasspathElementZip.java:376)\n    at io.github.classgraph.Classfile.&lt;init&gt; (Classfile.java:2002)\n    at io.github.classgraph.Scanner$ClassfileScannerWorkUnitProcessor.processWorkUnit (Scanner.java:725)\n    at io.github.classgraph.Scanner$ClassfileScannerWorkUnitProcessor.processWorkUnit (Scanner.java:647)\n    at nonapi.io.github.classgraph.concurrency.WorkQueue.runWorkLoop (WorkQueue.java:246)\n    at nonapi.io.github.classgraph.concurrency.WorkQueue.access$000 (WorkQueue.java:50)\n    at nonapi.io.github.classgraph.concurrency.WorkQueue$1.call (WorkQueue.java:201)\n    at nonapi.io.github.classgraph.concurrency.WorkQueue$1.call (WorkQueue.java:198)\n    at java.util.concurrent.FutureTask.run (FutureTask.java:264)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1136)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:635)\n    at java.lang.Thread.run (Thread.java:833)\n</code></pre>\n<p>After reading <a href=\"https://tech.clevertap.com/demystifying-g1-gc-gclocker-jni-critical-and-fake-oom-exceptions/\" rel=\"nofollow noreferrer\">this post about GCLocker OOM exceptions</a> , I reran the plugin the following VM options:</p>\n<pre><code>-XX:+UnlockDiagnosticVMOptions\n-XX:GCLockerRetryAllocationCount=100\n</code></pre>\n<p>The plugin fails with NoSuchMethodError:</p>\n<pre><code>Error while visiting MyClass.java: java.lang.NoSuchMethodError: 'void org.openrewrite.java.tree.J$Identifier.&lt;init&gt;(java.util.UUID, org.openrewrite.java.tree.Space, org.openrewrite.marker.Markers, java.util.List, java.lang.String, org.openrewrite.java.tree.JavaType, org.openrewrite.java.tree.JavaType$Variable)'\n  org.openrewrite.staticanalysis.InstanceOfPatternMatch$InstanceOfPatternReplacements.processInstanceOf(InstanceOfPatternMatch.java:215)\n  org.openrewrite.staticanalysis.InstanceOfPatternMatch$UseInstanceOfPatternMatching.visitInstanceOf(InstanceOfPatternMatch.java:302)\n  org.openrewrite.staticanalysis.InstanceOfPatternMatch$UseInstanceOfPatternMatching.visitInstanceOf(InstanceOfPatternMatch.java:286)\n  org.openrewrite.java.tree.J$InstanceOf.acceptJava(J.java:2818)\n  org.openrewrite.java.tree.J.accept(J.java:59)\n  org.openrewrite.TreeVisitor.visit(TreeVisitor.java:278)\n  org.openrewrite.TreeVisitor.visitAndCast(TreeVisitor.java:361)\n  org.openrewrite.java.JavaVisitor.visitRightPadded(JavaVisitor.java:1283)\n  ...\n</code></pre>\n<p>I have also tried as suggested in the comments to increase Java Heap memory with flag:\n<code>-Xmx8G</code>. I still get a <code>NoSuchMethodError</code>.</p>\n<p>Full stacktrace:</p>\n<pre><code>[ERROR] Failed to execute goal org.openrewrite.maven:rewrite-maven-plugin:5.3.2:run (default-cli) on project myproject: Execution default-cli of goal org.openrewrite.maven:rewrite-maven-plugin:5.3.2:run failed: Error while visiting MyClass.java: java.lang.NoSuchMethodError: 'void org.openrewrite.java.tree.J$Identifier.&lt;init&gt;(java.util.UUID, org.openrewrite.java.tree.Space, org.openrewrite.marker.Markers, java.util.List\n, java.lang.String, org.openrewrite.java.tree.JavaType, org.openrewrite.java.tree.JavaType$Variable)'\n[ERROR]   org.openrewrite.staticanalysis.InstanceOfPatternMatch$InstanceOfPatternReplacements.processInstanceOf(InstanceOfPatternMatch.java:215)\n[ERROR]   org.openrewrite.staticanalysis.InstanceOfPatternMatch$UseInstanceOfPatternMatching.visitInstanceOf(InstanceOfPatternMatch.java:302)\n[ERROR]   org.openrewrite.staticanalysis.InstanceOfPatternMatch$UseInstanceOfPatternMatching.visitInstanceOf(InstanceOfPatternMatch.java:286)\n[ERROR]   org.openrewrite.java.tree.J$InstanceOf.acceptJava(J.java:2818)\n[ERROR]   org.openrewrite.java.tree.J.accept(J.java:59)\n[ERROR]   org.openrewrite.TreeVisitor.visit(TreeVisitor.java:278)\n[ERROR]   org.openrewrite.TreeVisitor.visitAndCast(TreeVisitor.java:361)\n[ERROR]   org.openrewrite.java.JavaVisitor.visitRightPadded(JavaVisitor.java:1283)\n[ERROR]   ...\n[ERROR] -&gt; [Help 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.openrewrite.maven:rewrite-maven-plugin:5.3.2:run (default-cli) on project myproject: Execution default-cli of goal org.openrewrite.maven:rewrite-maven-plugin:5.3.2:run failed:\n Error while visiting MyClass.java: java.lang.NoSuchMethodError: 'void org.openrewrite.java.tree.J$Identifier.&lt;init&gt;(java.util.UUID, org.openrewrite.java.tree.Space\n, org.openrewrite.marker.Markers, java.util.List, java.lang.String, org.openrewrite.java.tree.JavaType, org.openrewrite.java.tree.JavaType$Variable)'\n  org.openrewrite.staticanalysis.InstanceOfPatternMatch$InstanceOfPatternReplacements.processInstanceOf(InstanceOfPatternMatch.java:215)\n  org.openrewrite.staticanalysis.InstanceOfPatternMatch$UseInstanceOfPatternMatching.visitInstanceOf(InstanceOfPatternMatch.java:302)\n  org.openrewrite.staticanalysis.InstanceOfPatternMatch$UseInstanceOfPatternMatching.visitInstanceOf(InstanceOfPatternMatch.java:286)\n  org.openrewrite.java.tree.J$InstanceOf.acceptJava(J.java:2818)\n  org.openrewrite.java.tree.J.accept(J.java:59)\n  org.openrewrite.TreeVisitor.visit(TreeVisitor.java:278)\n  org.openrewrite.TreeVisitor.visitAndCast(TreeVisitor.java:361)\n  org.openrewrite.java.JavaVisitor.visitRightPadded(JavaVisitor.java:1283)\n  ...\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: org.apache.maven.plugin.PluginExecutionException: Execution default-cli of goal org.openrewrite.maven:rewrite-maven-plugin:5.3.2:run failed: Error while visiting MyClass.java: 'void org.openrewrite.java.tree.J$Identifier.&lt;init&gt;(java.util.UUID, org.openrewrite.java.tree.Space, org.openrewrite.marker.Markers, java.util.List, java.lang.String, org.openrewrite.java.tree.JavaType, org.ope\nnrewrite.java.tree.JavaType$Variable)'\n  org.openrewrite.staticanalysis.InstanceOfPatternMatch$InstanceOfPatternReplacements.processInstanceOf(InstanceOfPatternMatch.java:215)\n  org.openrewrite.staticanalysis.InstanceOfPatternMatch$UseInstanceOfPatternMatching.visitInstanceOf(InstanceOfPatternMatch.java:302)\n  org.openrewrite.staticanalysis.InstanceOfPatternMatch$UseInstanceOfPatternMatching.visitInstanceOf(InstanceOfPatternMatch.java:286)\n  org.openrewrite.java.tree.J$InstanceOf.acceptJava(J.java:2818)\n  org.openrewrite.java.tree.J.accept(J.java:59)\n  org.openrewrite.TreeVisitor.visit(TreeVisitor.java:278)\n  org.openrewrite.TreeVisitor.visitAndCast(TreeVisitor.java:361)\n  org.openrewrite.java.JavaVisitor.visitRightPadded(JavaVisitor.java:1283)\n  ...\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:148)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: java.lang.RuntimeException: Error while visiting MyClass.java: java.lang.NoSuchMethodError: 'void org.openrewrite.java.tree.J$Identifier.&lt;init&gt;(java.util\n.UUID, org.openrewrite.java.tree.Space, org.openrewrite.marker.Markers, java.util.List, java.lang.String, org.openrewrite.java.tree.JavaType, org.openrewrite.java.tree.JavaType$Variable)'\n  org.openrewrite.staticanalysis.InstanceOfPatternMatch$InstanceOfPatternReplacements.processInstanceOf(InstanceOfPatternMatch.java:215)\n  org.openrewrite.staticanalysis.InstanceOfPatternMatch$UseInstanceOfPatternMatching.visitInstanceOf(InstanceOfPatternMatch.java:302)\n  org.openrewrite.staticanalysis.InstanceOfPatternMatch$UseInstanceOfPatternMatching.visitInstanceOf(InstanceOfPatternMatch.java:286)\n  org.openrewrite.java.tree.J$InstanceOf.acceptJava(J.java:2818)\n  org.openrewrite.java.tree.J.accept(J.java:59)\n  org.openrewrite.TreeVisitor.visit(TreeVisitor.java:278)\n  org.openrewrite.TreeVisitor.visitAndCast(TreeVisitor.java:361)\n  org.openrewrite.java.JavaVisitor.visitRightPadded(JavaVisitor.java:1283)\n  ...\n    at org.openrewrite.maven.AbstractRewriteMojo$ResultsContainer$1.lambda$preVisit$0 (AbstractRewriteMojo.java:417)\n    at java.util.Optional.ifPresent (Optional.java:178)\n    at org.openrewrite.maven.AbstractRewriteMojo$ResultsContainer$1.preVisit (AbstractRewriteMojo.java:414)\n    at org.openrewrite.maven.AbstractRewriteMojo$ResultsContainer$1.preVisit (AbstractRewriteMojo.java:410)\n    at org.openrewrite.maven.AbstractRewriteMojo_ResultsContainer_1_JavaVisitor.preVisit (AbstractRewriteMojo_ResultsContainer_1_JavaVisitor.zig:81)\n    at org.openrewrite.TreeVisitor.visit (TreeVisitor.java:275)\n    at org.openrewrite.TreeVisitor.visitAndCast (TreeVisitor.java:361)\n    at org.openrewrite.java.JavaVisitor.visitRightPadded (JavaVisitor.java:1283)\n    at org.openrewrite.java.JavaVisitor.visitControlParentheses (JavaVisitor.java:495)\n    at org.openrewrite.java.tree.J$ControlParentheses.acceptJava (J.java:4512)\n    at org.openrewrite.java.tree.J.accept (J.java:59)\n    at org.openrewrite.TreeVisitor.visit (TreeVisitor.java:278)\n    at org.openrewrite.TreeVisitor.visitAndCast (TreeVisitor.java:361)\n    at org.openrewrite.java.JavaVisitor.visitIf (JavaVisitor.java:663)\n    at org.openrewrite.java.tree.J$If.acceptJava (J.java:2432)\n    at org.openrewrite.java.tree.J.accept (J.java:59)\n    at org.openrewrite.TreeVisitor.visit (TreeVisitor.java:278)\n    at org.openrewrite.TreeVisitor.visitAndCast (TreeVisitor.java:361)\n    at org.openrewrite.java.JavaVisitor.visitRightPadded (JavaVisitor.java:1283)\n    at org.openrewrite.java.JavaVisitor.lambda$visitBlock$4 (JavaVisitor.java:366)\n    at org.openrewrite.internal.ListUtils.map (ListUtils.java:176)\n    at org.openrewrite.java.JavaVisitor.visitBlock (JavaVisitor.java:365)\n    at org.openrewrite.java.tree.J$Block.acceptJava (J.java:767)\n    at org.openrewrite.java.tree.J.accept (J.java:59)\n    at org.openrewrite.TreeVisitor.visit (TreeVisitor.java:278)\n    at org.openrewrite.TreeVisitor.visitAndCast (TreeVisitor.java:361)\n    at org.openrewrite.java.JavaVisitor.visitMethodDeclaration (JavaVisitor.java:816)\n    at org.openrewrite.java.tree.J$MethodDeclaration.acceptJava (J.java:3448)\n    at org.openrewrite.java.tree.J.accept (J.java:59)\n    at org.openrewrite.TreeVisitor.visit (TreeVisitor.java:278)\n    at org.openrewrite.TreeVisitor.visitAndCast (TreeVisitor.java:361)\n    at org.openrewrite.java.JavaVisitor.visitRightPadded (JavaVisitor.java:1283)\n    at org.openrewrite.java.JavaVisitor.lambda$visitBlock$4 (JavaVisitor.java:366)\n    at org.openrewrite.internal.ListUtils.map (ListUtils.java:176)\n    at org.openrewrite.java.JavaVisitor.visitBlock (JavaVisitor.java:365)\n    at org.openrewrite.java.tree.J$Block.acceptJava (J.java:767)\n    at org.openrewrite.java.tree.J.accept (J.java:59)\n    at org.openrewrite.TreeVisitor.visit (TreeVisitor.java:278)\n    at org.openrewrite.TreeVisitor.visitAndCast (TreeVisitor.java:361)\n    at org.openrewrite.java.JavaVisitor.visitClassDeclaration (JavaVisitor.java:453)\n    at org.openrewrite.java.tree.J$ClassDeclaration.acceptJava (J.java:1217)\n    at org.openrewrite.java.tree.J.accept (J.java:59)\n    at org.openrewrite.TreeVisitor.visit (TreeVisitor.java:278)\n    at org.openrewrite.TreeVisitor.visitAndCast (TreeVisitor.java:361)\n    at org.openrewrite.java.JavaVisitor.lambda$visitCompilationUnit$10 (JavaVisitor.java:466)\n    at org.openrewrite.internal.ListUtils.map (ListUtils.java:176)\n    at org.openrewrite.java.JavaVisitor.visitCompilationUnit (JavaVisitor.java:466)\n    at org.openrewrite.java.tree.J$CompilationUnit.acceptJava (J.java:1520)\n    at org.openrewrite.java.tree.J.accept (J.java:59)\n    at org.openrewrite.TreeVisitor.visit (TreeVisitor.java:278)\n    at org.openrewrite.maven.AbstractRewriteMojo$ResultsContainer.getRecipeErrors (AbstractRewriteMojo.java:421)\n    at org.openrewrite.maven.AbstractRewriteMojo$ResultsContainer.getFirstException (AbstractRewriteMojo.java:401)\n    at org.openrewrite.maven.AbstractRewriteRunMojo.execute (AbstractRewriteRunMojo.java:54)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n[ERROR]\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n</code></pre>\n<p>Any idea how to fix this?</p>\n<p>Later edit:\nIt finally worked with a huge Java Heap: <code>-Xmx25G</code> and also adding these VM options: <code> -XX:+UnlockDiagnosticVMOptions XX:GCLockerRetryAllocationCount=100</code></p>\n"},{"tags":["java","mongodb","spring-boot","intellij-idea","path"],"comments":[{"owner":{"account_id":13141180,"reputation":4284,"user_id":9492730,"display_name":"dododo"},"score":0,"creation_date":1691140545,"post_id":76834352,"comment_id":135454540,"body_markdown":"You should add a path to mongocryptd binary into PATH. `/usr/local/bin/bin` doesn&#39;t look like correct path.","body":"You should add a path to mongocryptd binary into PATH. <code>&#47;usr&#47;local&#47;bin&#47;bin</code> doesn&#39;t look like correct path."},{"owner":{"account_id":13141180,"reputation":4284,"user_id":9492730,"display_name":"dododo"},"score":0,"creation_date":1691140729,"post_id":76834352,"comment_id":135454572,"body_markdown":"see also a #2 about mongocryptd configuration here https://stackoverflow.com/questions/70154963/unable-understand-how-to-install-libmongocrypt/70159362#70159362","body":"see also a #2 about mongocryptd configuration here <a href=\"https://stackoverflow.com/questions/70154963/unable-understand-how-to-install-libmongocrypt/70159362#70159362\" title=\"unable understand how to install libmongocrypt\">stackoverflow.com/questions/70154963/&hellip;</a>"},{"owner":{"account_id":24429333,"reputation":39,"user_id":18354478,"display_name":"harsh agarwal"},"score":0,"creation_date":1691143044,"post_id":76834352,"comment_id":135455013,"body_markdown":"@dododo the path is correct .. I have checked it..it contains mongocryptd","body":"@dododo the path is correct .. I have checked it..it contains mongocryptd"},{"owner":{"account_id":24429333,"reputation":39,"user_id":18354478,"display_name":"harsh agarwal"},"score":0,"creation_date":1691143415,"post_id":76834352,"comment_id":135455089,"body_markdown":"Also i have tried running it manually..","body":"Also i have tried running it manually.."},{"owner":{"account_id":13141180,"reputation":4284,"user_id":9492730,"display_name":"dododo"},"score":0,"creation_date":1691148043,"post_id":76834352,"comment_id":135455889,"body_markdown":"with doubled `bin`? If you did everything correct, you can open any terminal in any folder and just type: `mongocryptd` and it should work","body":"with doubled <code>bin</code>? If you did everything correct, you can open any terminal in any folder and just type: <code>mongocryptd</code> and it should work"},{"owner":{"account_id":24429333,"reputation":39,"user_id":18354478,"display_name":"harsh agarwal"},"score":0,"creation_date":1691384329,"post_id":76834352,"comment_id":135478867,"body_markdown":"@dododo it shows command not found..","body":"@dododo it shows command not found.."},{"owner":{"account_id":13141180,"reputation":4284,"user_id":9492730,"display_name":"dododo"},"score":0,"creation_date":1691388279,"post_id":76834352,"comment_id":135479243,"body_markdown":"then you didn&#39;t add it to the $PATH, check what you have in the output here `echo $PATH`","body":"then you didn&#39;t add it to the $PATH, check what you have in the output here <code>echo $PATH</code>"}],"owner":{"account_id":24429333,"reputation":39,"user_id":18354478,"display_name":"harsh agarwal"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691146524,"creation_date":1691138929,"question_id":76834352,"body_markdown":"I am trying to run a project on intellij idea but it is showing the following error.\r\n\r\n\r\n```\r\nError creating bean with name &#39;mongoConfiguration&#39;: Unsatisfied dependency expressed through field &#39;mongoDbFactory&#39;: Error creating bean with name &#39;mongoDbFactory&#39; defined in class path resource [com/mongoencryptionutil/config/CustomMongoClientConfiguration.class]: Failed to instantiate [org.springframework.data.mongodb.MongoDatabaseFactory]: Factory method &#39;mongoDbFactory&#39; threw exception with message: Exception starting mongocryptd process. Is `mongocryptd` on the system path?\r\n```\r\n\r\n\r\nI have added /usr/local/bin/bin in path variables of the project and it has mongocryptd.. Still it is showing this error.\r\n\r\n[![System Settings][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/68uvc.png","title":"Exception starting mongocryptd process. Is `mongocryptd` on the system path?","body":"<p>I am trying to run a project on intellij idea but it is showing the following error.</p>\n<pre><code>Error creating bean with name 'mongoConfiguration': Unsatisfied dependency expressed through field 'mongoDbFactory': Error creating bean with name 'mongoDbFactory' defined in class path resource [com/mongoencryptionutil/config/CustomMongoClientConfiguration.class]: Failed to instantiate [org.springframework.data.mongodb.MongoDatabaseFactory]: Factory method 'mongoDbFactory' threw exception with message: Exception starting mongocryptd process. Is `mongocryptd` on the system path?\n</code></pre>\n<p>I have added /usr/local/bin/bin in path variables of the project and it has mongocryptd.. Still it is showing this error.</p>\n<p><a href=\"https://i.stack.imgur.com/68uvc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/68uvc.png\" alt=\"System Settings\" /></a></p>\n"},{"tags":["java","flyway","quarkus"],"answers":[{"tags":[],"owner":{"account_id":21330249,"reputation":297,"user_id":15702124,"display_name":"LenglBoy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691146501,"creation_date":1691146501,"answer_id":76835268,"question_id":64536346,"body_markdown":"There are multiple ways to do so:\r\n\r\n - Create multiple property files for different application profiles\r\n - Add prefix to properties for Profiles\r\n\r\n[Background information][1]: tl;dr; Keep in mind that the properties are always read in a fixed order. The generic property file at first and then the ones for currently active profiles and if there are properties set redundently they are overwriting each other. If they are not mentioned the one of the global file (or default) is taken.\r\n\r\nMulti-File Approach: Simply add new files names like: `application-dev.properties`. All properties for the related profile can be named there. Usually you solve your request like:\r\n\r\n - application.properties  -&gt; Global one and default for all\r\n - application-DEV.properties  -&gt; source of truth for DEV (overwrites)\r\n - application-PROD.properties -&gt; ..\r\n\r\nPrefix:\r\nI think thats the common approach on quarkus. Simply add %DEV.quarkus.... as prefix top a property that should be leading for a special profile. For you this would make it look like:\r\n\r\n    # Gloablly taken and save fallback\r\n    quarkus.flyway.clean-at-start=false\r\n    # Taken / Overwriting when DEV profile is used (%PROD. for other profile)\r\n    %DEV.quarkus.flyway.clean-at-start=true\r\n\r\n  [1]: https://quarkus.io/guides/config-reference","title":"How to enable quarkus.flyway.clean-at-start only for DEV namespace in K8S","body":"<p>There are multiple ways to do so:</p>\n<ul>\n<li>Create multiple property files for different application profiles</li>\n<li>Add prefix to properties for Profiles</li>\n</ul>\n<p><a href=\"https://quarkus.io/guides/config-reference\" rel=\"nofollow noreferrer\">Background information</a>: tl;dr; Keep in mind that the properties are always read in a fixed order. The generic property file at first and then the ones for currently active profiles and if there are properties set redundently they are overwriting each other. If they are not mentioned the one of the global file (or default) is taken.</p>\n<p>Multi-File Approach: Simply add new files names like: <code>application-dev.properties</code>. All properties for the related profile can be named there. Usually you solve your request like:</p>\n<ul>\n<li>application.properties  -&gt; Global one and default for all</li>\n<li>application-DEV.properties  -&gt; source of truth for DEV (overwrites)</li>\n<li>application-PROD.properties -&gt; ..</li>\n</ul>\n<p>Prefix:\nI think thats the common approach on quarkus. Simply add %DEV.quarkus.... as prefix top a property that should be leading for a special profile. For you this would make it look like:</p>\n<pre><code># Gloablly taken and save fallback\nquarkus.flyway.clean-at-start=false\n# Taken / Overwriting when DEV profile is used (%PROD. for other profile)\n%DEV.quarkus.flyway.clean-at-start=true\n</code></pre>\n"}],"owner":{"account_id":1936496,"reputation":32813,"user_id":1743843,"accept_rate":77,"display_name":"softshipper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":342,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691146501,"creation_date":1603712185,"question_id":64536346,"body_markdown":"I have created a microservice with https://quarkus.io/ and I am using the extension [Flyway][1] for the migration.  \r\n\r\nThe microservice is going to be deployed on DEV and PROD namespace into K8S cluster. \r\nOn the DEV namespace, I would like to the set property [clean-at-start][2] to true and on the PROD namespace to false.    \r\n\r\nMy question, how to assign different value to `quarkus.flyway.clean-at-start` depends on K8S `NAMESPACE`.\r\nI assume, I have to do it, when the container gets started.\r\n\r\n\r\n  [1]: https://quarkus.io/guides/flyway\r\n  [2]: https://quarkus.io/guides/flyway#quarkus-flyway_quarkus.flyway.clean-at-start","title":"How to enable quarkus.flyway.clean-at-start only for DEV namespace in K8S","body":"<p>I have created a microservice with <a href=\"https://quarkus.io/\" rel=\"nofollow noreferrer\">https://quarkus.io/</a> and I am using the extension <a href=\"https://quarkus.io/guides/flyway\" rel=\"nofollow noreferrer\">Flyway</a> for the migration.</p>\n<p>The microservice is going to be deployed on DEV and PROD namespace into K8S cluster.\nOn the DEV namespace, I would like to the set property <a href=\"https://quarkus.io/guides/flyway#quarkus-flyway_quarkus.flyway.clean-at-start\" rel=\"nofollow noreferrer\">clean-at-start</a> to true and on the PROD namespace to false.</p>\n<p>My question, how to assign different value to <code>quarkus.flyway.clean-at-start</code> depends on K8S <code>NAMESPACE</code>.\nI assume, I have to do it, when the container gets started.</p>\n"},{"tags":["java","serialization","jackson","jackson-databind","jackson-modules"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1691154156,"post_id":76835179,"comment_id":135457108,"body_markdown":"Can you edit the question to show the output you want or expect? Also, what do you expect it to do when deserializing? To me, it looks like it&#39;s doing exactly what the annotations say to do. The cyclical relationship is a problem when deserializing using arguments to a `@JsonCreator` constructor instead of setters: one of the objects has to be created first.","body":"Can you edit the question to show the output you want or expect? Also, what do you expect it to do when deserializing? To me, it looks like it&#39;s doing exactly what the annotations say to do. The cyclical relationship is a problem when deserializing using arguments to a <code>@JsonCreator</code> constructor instead of setters: one of the objects has to be created first."}],"owner":{"account_id":29159221,"reputation":79,"user_id":22338327,"display_name":"AnthonyGP"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1691145930,"creation_date":1691145791,"question_id":76835179,"body_markdown":"I have intentionally created complex Java classes hierarchy, which also can occur on production in order to test Jackson JSON serialization and deserialization. Some annotations, like `@Getter` are Lombok ones.\r\n\r\nDemoI.java\r\n```\r\n@JsonTypeInfo(\r\n        use = JsonTypeInfo.Id.NAME,\r\n        include = JsonTypeInfo.As.PROPERTY,\r\n        property = &quot;interface&quot;,\r\n        defaultImpl = DemoImpl.class\r\n)\r\n@JsonSubTypes(\r\n        @JsonSubTypes.Type(value = DemoImpl.class, name = &quot;demoImpl&quot;)\r\n)\r\npublic interface DemoI {\r\n}\r\n```\r\n\r\nDemoImpl.java\r\n```\r\npublic class DemoImpl implements DemoI {\r\n    @Getter\r\n    private int age;\r\n    @Getter\r\n    private String name;\r\n    @Getter\r\n    private DemoAbst demoAbst;\r\n\r\n    @JsonCreator\r\n    public DemoImpl(@JsonProperty(&quot;age&quot;) int age,\r\n                    @JsonProperty(&quot;name&quot;) String name,\r\n                    @JsonProperty(&quot;demoAbst&quot;) DemoAbst demoAbst) {\r\n        this.age = age;\r\n        this.name = name;\r\n        this.demoAbst = demoAbst;\r\n    }\r\n}\r\n```\r\nDemoAbst.java\r\n```\r\n@JsonTypeInfo(\r\n        use = JsonTypeInfo.Id.NAME,\r\n        include = JsonTypeInfo.As.PROPERTY,\r\n        property = &quot;abstract&quot;,\r\n        defaultImpl = DemoAbstImpl.class\r\n)\r\n@JsonSubTypes(\r\n        @JsonSubTypes.Type(value = DemoAbstImpl.class, name = &quot;demoAbstImpl&quot;)\r\n)\r\npublic abstract class DemoAbst {\r\n}\r\n```\r\nDemoAbstImpl.java\r\n```\r\n@JsonIdentityInfo(\r\n        generator = ObjectIdGenerators.PropertyGenerator.class,\r\n        property = &quot;id&quot;\r\n)\r\npublic class DemoAbstImpl extends DemoAbst{\r\n    @Getter\r\n    private final int id = 1;\r\n    @Getter\r\n    private int song;\r\n    @Getter\r\n    private final DemoAbstImplImpl demoAbstImplImpl;\r\n\r\n    public DemoAbstImpl(int song) {\r\n        this.song = song;\r\n        this.demoAbstImplImpl = new DemoAbstImplImpl(&quot;song&quot;, this);\r\n    }\r\n\r\n    @JsonCreator\r\n    public DemoAbstImpl(@JsonProperty(&quot;song&quot;) int song,\r\n                        @JsonProperty(&quot;demoAbstImplImpl&quot;) DemoAbstImplImpl d) {\r\n        this.song = song;\r\n        this.demoAbstImplImpl = d;\r\n    }\r\n\r\n}\r\n```\r\nDemoAbstImplImpl.java\r\n```\r\npublic class DemoAbstImplImpl {\r\n    @Getter\r\n    private String koo;\r\n    @Getter\r\n    private final DemoAbstImpl demoAbstImpl;\r\n\r\n    @JsonCreator\r\n    public DemoAbstImplImpl(@JsonProperty(&quot;koo&quot;) String koo,\r\n                            @JsonProperty(&quot;demoAbstImpl&quot;) DemoAbstImpl d) {\r\n        this.koo = koo;\r\n        this.demoAbstImpl = d;\r\n    }\r\n}\r\n```\r\n\r\nAnd finally, the Main.java\r\n```\r\npublic class Demo {\r\n    public static void main(String[] args) throws IOException {\r\n\r\n        DemoAbstImpl dai = new DemoAbstImpl(67);\r\n\r\n        DemoI di = new DemoImpl(1, &quot;Hello&quot;, dai);\r\n\r\n\r\n        ObjectMapper om = new ObjectMapper();\r\n        byte[] b = om.writeValueAsBytes(di);\r\n        Files.write(Path.of(&quot;out.json&quot;), b);\r\n\r\n        DemoI di2 = om.readValue(new File(&quot;out.json&quot;), DemoI.class);\r\n```\r\n\r\nWhen I serialize, I got following JSON\r\n```\r\n{\r\n  &quot;interface&quot;: &quot;demoImpl&quot;,\r\n  &quot;age&quot;: 1,\r\n  &quot;name&quot;: &quot;Hello&quot;,\r\n  &quot;demoAbst&quot;: {\r\n    &quot;abstract&quot;: &quot;demoAbstImpl&quot;,\r\n    &quot;id&quot;: 1,\r\n    &quot;song&quot;: 67,\r\n    &quot;demoAbstImplImpl&quot;: {\r\n      &quot;koo&quot;: &quot;song&quot;,\r\n      &quot;demoAbstImpl&quot;: 1,\r\n      &quot;id&quot;: 2\r\n    }\r\n  }\r\n}\r\n```\r\nFor me, that `demoAbstImpl: 1` doesn&#39;t make sense at all, seems that Jackson uses it as a reference, but why Jackson doesn&#39;t follow that reference till the end, i.e `until it reaches the value`.\r\n\r\nAnd also deserialization ends up with an error `Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.deser.UnresolvedForwardReference: Could not resolve Object Id [1] (for [simple type, com.example.mytest.DemoAbstImpl]).`\r\n\r\nAny ideas, how to fix that? At least for me, the code seems very correct, and no issues should be with Jackson annotations.","title":"Cannot serialize/deserialize bidirectional references using Jackson JSON in Java?","body":"<p>I have intentionally created complex Java classes hierarchy, which also can occur on production in order to test Jackson JSON serialization and deserialization. Some annotations, like <code>@Getter</code> are Lombok ones.</p>\n<p>DemoI.java</p>\n<pre><code>@JsonTypeInfo(\n        use = JsonTypeInfo.Id.NAME,\n        include = JsonTypeInfo.As.PROPERTY,\n        property = &quot;interface&quot;,\n        defaultImpl = DemoImpl.class\n)\n@JsonSubTypes(\n        @JsonSubTypes.Type(value = DemoImpl.class, name = &quot;demoImpl&quot;)\n)\npublic interface DemoI {\n}\n</code></pre>\n<p>DemoImpl.java</p>\n<pre><code>public class DemoImpl implements DemoI {\n    @Getter\n    private int age;\n    @Getter\n    private String name;\n    @Getter\n    private DemoAbst demoAbst;\n\n    @JsonCreator\n    public DemoImpl(@JsonProperty(&quot;age&quot;) int age,\n                    @JsonProperty(&quot;name&quot;) String name,\n                    @JsonProperty(&quot;demoAbst&quot;) DemoAbst demoAbst) {\n        this.age = age;\n        this.name = name;\n        this.demoAbst = demoAbst;\n    }\n}\n</code></pre>\n<p>DemoAbst.java</p>\n<pre><code>@JsonTypeInfo(\n        use = JsonTypeInfo.Id.NAME,\n        include = JsonTypeInfo.As.PROPERTY,\n        property = &quot;abstract&quot;,\n        defaultImpl = DemoAbstImpl.class\n)\n@JsonSubTypes(\n        @JsonSubTypes.Type(value = DemoAbstImpl.class, name = &quot;demoAbstImpl&quot;)\n)\npublic abstract class DemoAbst {\n}\n</code></pre>\n<p>DemoAbstImpl.java</p>\n<pre><code>@JsonIdentityInfo(\n        generator = ObjectIdGenerators.PropertyGenerator.class,\n        property = &quot;id&quot;\n)\npublic class DemoAbstImpl extends DemoAbst{\n    @Getter\n    private final int id = 1;\n    @Getter\n    private int song;\n    @Getter\n    private final DemoAbstImplImpl demoAbstImplImpl;\n\n    public DemoAbstImpl(int song) {\n        this.song = song;\n        this.demoAbstImplImpl = new DemoAbstImplImpl(&quot;song&quot;, this);\n    }\n\n    @JsonCreator\n    public DemoAbstImpl(@JsonProperty(&quot;song&quot;) int song,\n                        @JsonProperty(&quot;demoAbstImplImpl&quot;) DemoAbstImplImpl d) {\n        this.song = song;\n        this.demoAbstImplImpl = d;\n    }\n\n}\n</code></pre>\n<p>DemoAbstImplImpl.java</p>\n<pre><code>public class DemoAbstImplImpl {\n    @Getter\n    private String koo;\n    @Getter\n    private final DemoAbstImpl demoAbstImpl;\n\n    @JsonCreator\n    public DemoAbstImplImpl(@JsonProperty(&quot;koo&quot;) String koo,\n                            @JsonProperty(&quot;demoAbstImpl&quot;) DemoAbstImpl d) {\n        this.koo = koo;\n        this.demoAbstImpl = d;\n    }\n}\n</code></pre>\n<p>And finally, the Main.java</p>\n<pre><code>public class Demo {\n    public static void main(String[] args) throws IOException {\n\n        DemoAbstImpl dai = new DemoAbstImpl(67);\n\n        DemoI di = new DemoImpl(1, &quot;Hello&quot;, dai);\n\n\n        ObjectMapper om = new ObjectMapper();\n        byte[] b = om.writeValueAsBytes(di);\n        Files.write(Path.of(&quot;out.json&quot;), b);\n\n        DemoI di2 = om.readValue(new File(&quot;out.json&quot;), DemoI.class);\n</code></pre>\n<p>When I serialize, I got following JSON</p>\n<pre><code>{\n  &quot;interface&quot;: &quot;demoImpl&quot;,\n  &quot;age&quot;: 1,\n  &quot;name&quot;: &quot;Hello&quot;,\n  &quot;demoAbst&quot;: {\n    &quot;abstract&quot;: &quot;demoAbstImpl&quot;,\n    &quot;id&quot;: 1,\n    &quot;song&quot;: 67,\n    &quot;demoAbstImplImpl&quot;: {\n      &quot;koo&quot;: &quot;song&quot;,\n      &quot;demoAbstImpl&quot;: 1,\n      &quot;id&quot;: 2\n    }\n  }\n}\n</code></pre>\n<p>For me, that <code>demoAbstImpl: 1</code> doesn't make sense at all, seems that Jackson uses it as a reference, but why Jackson doesn't follow that reference till the end, i.e <code>until it reaches the value</code>.</p>\n<p>And also deserialization ends up with an error <code>Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.deser.UnresolvedForwardReference: Could not resolve Object Id [1] (for [simple type, com.example.mytest.DemoAbstImpl]).</code></p>\n<p>Any ideas, how to fix that? At least for me, the code seems very correct, and no issues should be with Jackson annotations.</p>\n"},{"tags":["java","currency-formatting"],"comments":[{"owner":{"account_id":8269356,"reputation":1829,"user_id":6217595,"accept_rate":50,"display_name":"zihadrizkyef"},"score":0,"creation_date":1637909039,"post_id":6670337,"comment_id":123953393,"body_markdown":"do you get any solution?","body":"do you get any solution?"}],"answers":[{"comments":[{"owner":{"account_id":373975,"reputation":24834,"user_id":723920,"accept_rate":60,"display_name":"Kal"},"score":0,"creation_date":1310501667,"post_id":6670459,"comment_id":7888052,"body_markdown":"That looks like you are hardcoding.","body":"That looks like you are hardcoding."}],"tags":[],"owner":{"account_id":440465,"reputation":631,"user_id":830041,"accept_rate":11,"display_name":"Jake Roussel"},"comment_count":1,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1310501465,"creation_date":1310501465,"answer_id":6670459,"question_id":6670337,"body_markdown":"See if this works:\r\n\r\n    DecimalFormat fmt = (DecimalFormat) NumberFormat.getInstance();\r\n    fmt.setGroupingUsed(true);\r\n    fmt.setPositivePrefix(&quot;Rs. &quot;);\r\n    fmt.setNegativePrefix(&quot;Rs. -&quot;);\r\n    fmt.setMinimumFractionDigits(2);\r\n    fmt.setMaximumFractionDigits(2);\r\n    fmt.format(30382.50);\r\n\r\n\r\nEdit: Fixed the first line.","title":"need space between currency symbol and amount","body":"<p>See if this works:</p>\n\n<pre><code>DecimalFormat fmt = (DecimalFormat) NumberFormat.getInstance();\nfmt.setGroupingUsed(true);\nfmt.setPositivePrefix(\"Rs. \");\nfmt.setNegativePrefix(\"Rs. -\");\nfmt.setMinimumFractionDigits(2);\nfmt.setMaximumFractionDigits(2);\nfmt.format(30382.50);\n</code></pre>\n\n<p>Edit: Fixed the first line.</p>\n"},{"comments":[{"owner":{"account_id":8269356,"reputation":1829,"user_id":6217595,"accept_rate":50,"display_name":"zihadrizkyef"},"score":0,"creation_date":1637908655,"post_id":6670693,"comment_id":123953294,"body_markdown":"this is not the best solution as some currency is put at end of the amount","body":"this is not the best solution as some currency is put at end of the amount"}],"tags":[],"owner":{"account_id":101585,"reputation":107721,"user_id":273200,"accept_rate":100,"display_name":"Bala R"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1310502989,"creation_date":1310502486,"answer_id":6670693,"question_id":6670337,"body_markdown":"It&#39;s a bit of a hack but in a very similar situation, I used something like this\r\n\r\n    NumberFormat format = NumberFormat.getCurrencyInstance(new Locale(&quot;en&quot;, &quot;in&quot;));\r\n    String currencySymbol = format.format(0.00).replace(&quot;0.00&quot;, &quot;&quot;);\r\n    System.out.println(format.format(30382.50).replace(currencySymbol, currencySymbol + &quot; &quot;));\r\n\r\nall the currencies I had to deal with involved two decimal places so i was able to do `&quot;0.00&quot;` for all of them but if you plan to use something like Japanese Yen, this has to be tweaked. There is a `NumberFormat.getCurrency().getSymbol()`; but it returns `INR` instead for `Rs.` so that cannot be used for getting the currency symbol.\r\n \r\n\r\n\t\t\r\n","title":"need space between currency symbol and amount","body":"<p>It's a bit of a hack but in a very similar situation, I used something like this</p>\n\n<pre><code>NumberFormat format = NumberFormat.getCurrencyInstance(new Locale(\"en\", \"in\"));\nString currencySymbol = format.format(0.00).replace(\"0.00\", \"\");\nSystem.out.println(format.format(30382.50).replace(currencySymbol, currencySymbol + \" \"));\n</code></pre>\n\n<p>all the currencies I had to deal with involved two decimal places so i was able to do <code>\"0.00\"</code> for all of them but if you plan to use something like Japanese Yen, this has to be tweaked. There is a <code>NumberFormat.getCurrency().getSymbol()</code>; but it returns <code>INR</code> instead for <code>Rs.</code> so that cannot be used for getting the currency symbol.</p>\n"},{"tags":[],"owner":{"account_id":373975,"reputation":24834,"user_id":723920,"accept_rate":60,"display_name":"Kal"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1310502526,"creation_date":1310502526,"answer_id":6670700,"question_id":6670337,"body_markdown":"I dont think you can. \r\n\r\nYou should take a look at http://site.icu-project.org/ \r\n\r\nThere might be better locale-specific currency formatting provided by icu4j.","title":"need space between currency symbol and amount","body":"<p>I dont think you can. </p>\n\n<p>You should take a look at <a href=\"http://site.icu-project.org/\" rel=\"nofollow\">http://site.icu-project.org/</a> </p>\n\n<p>There might be better locale-specific currency formatting provided by icu4j.</p>\n"},{"comments":[{"owner":{"account_id":6561636,"reputation":3683,"user_id":5072526,"accept_rate":57,"display_name":"hinneLinks"},"score":1,"creation_date":1460367576,"post_id":8996309,"comment_id":60690953,"body_markdown":"Doesn&#39;t work for negative amounts - a space is added between the symbol and the negative-sign. Since i couldn&#39;t find a Locale without a Blank between the number and the symbol that has the Currency _after_ (e.g.  `123.45$`), i just only add a space after the symbol, not before. (`StringUtils.replaceOnce(formatted, symbol, symbol + &quot; &quot;).trim();`)","body":"Doesn&#39;t work for negative amounts - a space is added between the symbol and the negative-sign. Since i couldn&#39;t find a Locale without a Blank between the number and the symbol that has the Currency <i>after</i> (e.g.  <code>123.45$</code>), i just only add a space after the symbol, not before. (<code>StringUtils.replaceOnce(formatted, symbol, symbol + &quot; &quot;).trim();</code>)"}],"tags":[],"owner":{"account_id":74281,"reputation":1104,"user_id":213529,"accept_rate":100,"display_name":"depsypher"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1327450913,"creation_date":1327450913,"answer_id":8996309,"question_id":6670337,"body_markdown":"I don&#39;t see any easy way to do this. Here&#39;s what I came up with...\r\n\r\nThe key to getting the actual currency symbol seems to be passing the destination locale into Currency.getSymbol:\r\n\r\n\tcurrencyFormat.getCurrency().getSymbol(locale)\r\n\r\nHere&#39;s some code that seems like it mostly works:\r\n\r\n\tpublic static String formatPrice(String price, Locale locale, String currencyCode) {\r\n\t\r\n\t\tNumberFormat currencyFormat = NumberFormat.getCurrencyInstance(locale);\r\n\t\tCurrency currency = Currency.getInstance(currencyCode);\r\n\t\tcurrencyFormat.setCurrency(currency);\r\n\t    \t\r\n\t\ttry {\r\n\t\t\tString formatted = currencyFormat.format(NumberFormat.getNumberInstance().parse(price));\r\n\t\t\tString symbol = currencyFormat.getCurrency().getSymbol(locale);\r\n\t    \t\t\r\n\t\t\t// Different locales put the symbol on opposite sides of the amount\r\n\t\t\t// http://en.wikipedia.org/wiki/Currency_sign\r\n\t\t\t// If there is already a space (like the fr_FR locale formats things),\r\n\t\t\t// then return this as is, otherwise insert a space on either side\r\n\t\t\t// and trim the result\r\n\t\t\tif (StringUtils.contains(formatted, &quot; &quot; + symbol) || StringUtils.contains(formatted, symbol + &quot; &quot;)) {\r\n\t\t\t\treturn formatted;\r\n\t\t\t} else {\r\n\t\t\t\treturn StringUtils.replaceOnce(formatted, symbol, &quot; &quot; + symbol + &quot; &quot;).trim();\r\n\t\t\t}\r\n\t\t} catch (ParseException e) {\r\n\t\t\t// ignore\r\n\t\t}\r\n\t\treturn null;\r\n\t}","title":"need space between currency symbol and amount","body":"<p>I don't see any easy way to do this. Here's what I came up with...</p>\n\n<p>The key to getting the actual currency symbol seems to be passing the destination locale into Currency.getSymbol:</p>\n\n<pre><code>currencyFormat.getCurrency().getSymbol(locale)\n</code></pre>\n\n<p>Here's some code that seems like it mostly works:</p>\n\n<pre><code>public static String formatPrice(String price, Locale locale, String currencyCode) {\n\n    NumberFormat currencyFormat = NumberFormat.getCurrencyInstance(locale);\n    Currency currency = Currency.getInstance(currencyCode);\n    currencyFormat.setCurrency(currency);\n\n    try {\n        String formatted = currencyFormat.format(NumberFormat.getNumberInstance().parse(price));\n        String symbol = currencyFormat.getCurrency().getSymbol(locale);\n\n        // Different locales put the symbol on opposite sides of the amount\n        // http://en.wikipedia.org/wiki/Currency_sign\n        // If there is already a space (like the fr_FR locale formats things),\n        // then return this as is, otherwise insert a space on either side\n        // and trim the result\n        if (StringUtils.contains(formatted, \" \" + symbol) || StringUtils.contains(formatted, symbol + \" \")) {\n            return formatted;\n        } else {\n            return StringUtils.replaceOnce(formatted, symbol, \" \" + symbol + \" \").trim();\n        }\n    } catch (ParseException e) {\n        // ignore\n    }\n    return null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5929698,"reputation":445,"user_id":4664567,"display_name":"Gabriel Ferreira"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1478653922,"creation_date":1478653922,"answer_id":40498969,"question_id":6670337,"body_markdown":"An easier method, kind of workaround.\r\nFor my locale, the currency symbol is &quot;R$&quot;\r\n\r\n    public static String moneyFormatter(double d){\r\n\r\n        DecimalFormat fmt = (DecimalFormat) NumberFormat.getInstance();\r\n        Locale locale = Locale.getDefault();\r\n        String symbol = Currency.getInstance(locale).getSymbol(locale);\r\n        fmt.setGroupingUsed(true);\r\n        fmt.setPositivePrefix(symbol + &quot; &quot;);\r\n        fmt.setNegativePrefix(&quot;-&quot; + symbol + &quot; &quot;);\r\n        fmt.setMinimumFractionDigits(2);\r\n        fmt.setMaximumFractionDigits(2);\r\n        return fmt.format(d);\r\n    }\r\n\r\nInput: \r\n\r\n    moneyFormatter(225.0);\r\n\r\nOutput: \r\n\r\n    &quot;R$ 225,00&quot;\r\n\r\n","title":"need space between currency symbol and amount","body":"<p>An easier method, kind of workaround.\nFor my locale, the currency symbol is \"R$\"</p>\n\n<pre><code>public static String moneyFormatter(double d){\n\n    DecimalFormat fmt = (DecimalFormat) NumberFormat.getInstance();\n    Locale locale = Locale.getDefault();\n    String symbol = Currency.getInstance(locale).getSymbol(locale);\n    fmt.setGroupingUsed(true);\n    fmt.setPositivePrefix(symbol + \" \");\n    fmt.setNegativePrefix(\"-\" + symbol + \" \");\n    fmt.setMinimumFractionDigits(2);\n    fmt.setMaximumFractionDigits(2);\n    return fmt.format(d);\n}\n</code></pre>\n\n<p>Input: </p>\n\n<pre><code>moneyFormatter(225.0);\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>\"R$ 225,00\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18282373,"reputation":331,"user_id":13310972,"display_name":"Andrey Kijonok"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655904370,"creation_date":1655903933,"answer_id":72716277,"question_id":6670337,"body_markdown":"Sorry for Kotlin I came here from android). \r\nAs I understood there is no correct solutions for that, so that&#39;s why my solution is also hack)\r\n```\r\nfun formatBalance(\r\n    amount: Float,\r\n    currencyCode: String,\r\n    languageLocale: Locale\r\n): String {\r\n```\r\n`amount` can be String as well.\r\n```\r\n    val currencyFormatter: NumberFormat = NumberFormat.getCurrencyInstance(languageLocale)\r\n    currencyFormatter.currency = Currency.getInstance(currencyCode)\r\n    val formatted = currencyFormatter.format(amount)\r\n```\r\n`formatted` will get amount with currency from correct side but without space. (Example: 100$, €100)\r\n```\r\n    val amountFirstSymbol = amount.toString()[0]\r\n    val formattedFirstSymbol = formatted[0]\r\n\r\n    val currencySymbolIsBefore = amountFirstSymbol != formattedFirstSymbol\r\n```\r\nThen I use this little hack to understand if currency symbol is before amount. So for example `amount` is `100` then `amountFirstSymbol` will be `&quot;1&quot;`. And if formatted is `100$` then `formattedFirstSymbol` also will be `&quot;1&quot;`. That means we can put our currency symbol behind amount but now with space.\r\n```\r\n    val symbol = currencyFormatter.currency?.symbol\r\n    return if (currencySymbolIsBefore) &quot;$symbol $amount&quot;\r\n    else &quot;$amount $symbol&quot;\r\n```   \r\n","title":"need space between currency symbol and amount","body":"<p>Sorry for Kotlin I came here from android).\nAs I understood there is no correct solutions for that, so that's why my solution is also hack)</p>\n<pre><code>fun formatBalance(\n    amount: Float,\n    currencyCode: String,\n    languageLocale: Locale\n): String {\n</code></pre>\n<p><code>amount</code> can be String as well.</p>\n<pre><code>    val currencyFormatter: NumberFormat = NumberFormat.getCurrencyInstance(languageLocale)\n    currencyFormatter.currency = Currency.getInstance(currencyCode)\n    val formatted = currencyFormatter.format(amount)\n</code></pre>\n<p><code>formatted</code> will get amount with currency from correct side but without space. (Example: 100$, €100)</p>\n<pre><code>    val amountFirstSymbol = amount.toString()[0]\n    val formattedFirstSymbol = formatted[0]\n\n    val currencySymbolIsBefore = amountFirstSymbol != formattedFirstSymbol\n</code></pre>\n<p>Then I use this little hack to understand if currency symbol is before amount. So for example <code>amount</code> is <code>100</code> then <code>amountFirstSymbol</code> will be <code>&quot;1&quot;</code>. And if formatted is <code>100$</code> then <code>formattedFirstSymbol</code> also will be <code>&quot;1&quot;</code>. That means we can put our currency symbol behind amount but now with space.</p>\n<pre><code>    val symbol = currencyFormatter.currency?.symbol\n    return if (currencySymbolIsBefore) &quot;$symbol $amount&quot;\n    else &quot;$amount $symbol&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7052626,"reputation":516,"user_id":5401167,"display_name":"W-S"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664515747,"creation_date":1664515747,"answer_id":73904368,"question_id":6670337,"body_markdown":"Here what I do to add space after currency symbol:\r\n\r\n```\r\nDecimalFormat numberFormat = (DecimalFormat) NumberFormat.getCurrencyInstance(new Locale(&quot;id&quot;, &quot;ID&quot;));\r\n\r\nDecimalFormatSymbols symbol = new DecimalFormatSymbols(new Locale(&quot;id&quot;, &quot;ID&quot;));\r\n// Add space to currency symbol\r\nsymbol.setCurrencySymbol(symbol.getCurrencySymbol() + &quot; &quot;);\r\n\r\nnumberFormat.setDecimalFormatSymbols(symbol);\r\n```\r\n","title":"need space between currency symbol and amount","body":"<p>Here what I do to add space after currency symbol:</p>\n<pre><code>DecimalFormat numberFormat = (DecimalFormat) NumberFormat.getCurrencyInstance(new Locale(&quot;id&quot;, &quot;ID&quot;));\n\nDecimalFormatSymbols symbol = new DecimalFormatSymbols(new Locale(&quot;id&quot;, &quot;ID&quot;));\n// Add space to currency symbol\nsymbol.setCurrencySymbol(symbol.getCurrencySymbol() + &quot; &quot;);\n\nnumberFormat.setDecimalFormatSymbols(symbol);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1212023,"reputation":1487,"user_id":1180397,"display_name":"Cardinal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691145447,"creation_date":1691145447,"answer_id":76835136,"question_id":6670337,"body_markdown":"Take into account the following:\r\n1. You can&#39;t use `Currency.symbol` to find it in the formatted string because in some locales `$` becomes `US$` while `Currency.symbol` still returns `$`\r\n2. You should use non-breaking space instead of a normal space (default formatter does it this way). The same for checking whether space is already present (in some locales it is)\r\n3. For negatives amount a sign normally goes before the currency\r\n\r\nThe solution is (sorry for Kotlin code):\r\n```kotlin\r\nfun formatPrice(currencyCode: String, price: BigDecimal, locale: Locale? = null): String {\r\n    val resLocale = locale ?: Locale.getDefault()\r\n    val currencyFormat = NumberFormat.getCurrencyInstance(resLocale)\r\n    // decimalFormat formats the amount in the same way as currencyFormat, but without currency symbol.\r\n    // We can&#39;t use currency.symbol because it doesn&#39;t always match the way currency rendered in\r\n    // the resulting string (for some locales &quot;$&quot; becomes &quot;US$&quot;)\r\n    val decimalFormat = NumberFormat.getNumberInstance(resLocale)\r\n    decimalFormat.maximumFractionDigits = currencyFormat.maximumFractionDigits\r\n    decimalFormat.maximumIntegerDigits = currencyFormat.maximumIntegerDigits\r\n    decimalFormat.isGroupingUsed = currencyFormat.isGroupingUsed\r\n    decimalFormat.minimumFractionDigits = currencyFormat.minimumFractionDigits\r\n    decimalFormat.minimumIntegerDigits = currencyFormat.minimumIntegerDigits\r\n    decimalFormat.roundingMode = currencyFormat.roundingMode\r\n    currencyFormat.currency = Currency.getInstance(currencyCode)\r\n\r\n    val priceFormatted = currencyFormat.format(price)\r\n    val amountFormatted = decimalFormat.format(price)\r\n\r\n    // 12&#160;345,67&#160;$&#160;US\r\n    if (priceFormatted.startsWith(amountFormatted)) {\r\n        val suffix = priceFormatted.substringAfter(amountFormatted)\r\n        return if (suffix.isNotEmpty() &amp;&amp; !suffix.first().isWhitespace()) {\r\n            &quot;$amountFormatted&#160;$suffix&quot; // use nbsp to prevent line break\r\n        } else {\r\n            priceFormatted\r\n        }\r\n    }\r\n\r\n    // US$12,345.67\r\n    if (priceFormatted.endsWith(amountFormatted)) {\r\n        val prefix = priceFormatted.substringBefore(amountFormatted)\r\n        return if (prefix.isNotEmpty() &amp;&amp; !prefix.last().isWhitespace()) {\r\n            &quot;$prefix&#160;$amountFormatted&quot; // use nbsp to prevent line break\r\n        } else {\r\n            priceFormatted\r\n        }\r\n    }\r\n\r\n    // For negative amounts a sign normally goes before the currency symbol\r\n    // -US$12,345.67\r\n    val absAmountFormatted = decimalFormat.format(price.abs())\r\n    if (priceFormatted.endsWith(absAmountFormatted)) {\r\n        val prefix = priceFormatted.substringBefore(absAmountFormatted)\r\n        if (prefix.isNotEmpty() &amp;&amp; !prefix.last().isWhitespace()) {\r\n            return &quot;$prefix&#160;$absAmountFormatted&quot; // use nbsp to prevent line break\r\n        }\r\n    }\r\n\r\n    return priceFormatted\r\n}\r\n```\r\n\r\nTesting:\r\n```\r\nLocale: BigDecimal -&gt; default_format -&gt; custom_with_nbsp\r\n\r\nen: 12345.673 -&gt; $12,345.67 -&gt; $&#160;12,345.67\r\nen: 12345.67 -&gt; $12,345.67 -&gt; $&#160;12,345.67\r\nen: -12345.67 -&gt; -$12,345.67 -&gt; -$&#160;12,345.67\r\nen: 12345.67 -&gt; €12,345.67 -&gt; €&#160;12,345.67\r\nen: -12345.67 -&gt; -€12,345.67 -&gt; -€&#160;12,345.67\r\nen: 12345.67 -&gt; PLN12,345.67 -&gt; PLN&#160;12,345.67\r\nen: -12345.67 -&gt; -PLN12,345.67 -&gt; -PLN&#160;12,345.67\r\nzh_CN: 12345.67 -&gt; US$12,345.67 -&gt; US$&#160;12,345.67\r\nfr_CA: -12345.67 -&gt; -12&#160;345,67&#160;PLN -&gt; -12&#160;345,67&#160;PLN\r\npl_PL: 12345.67 -&gt; 12&#160;345,67&#160;zł -&gt; 12&#160;345,67&#160;zł\r\nfr_FR: 12345.67 -&gt; 12&#160;345,67&#160;PLN -&gt; 12&#160;345,67&#160;PLN\r\n```","title":"need space between currency symbol and amount","body":"<p>Take into account the following:</p>\n<ol>\n<li>You can't use <code>Currency.symbol</code> to find it in the formatted string because in some locales <code>$</code> becomes <code>US$</code> while <code>Currency.symbol</code> still returns <code>$</code></li>\n<li>You should use non-breaking space instead of a normal space (default formatter does it this way). The same for checking whether space is already present (in some locales it is)</li>\n<li>For negatives amount a sign normally goes before the currency</li>\n</ol>\n<p>The solution is (sorry for Kotlin code):</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun formatPrice(currencyCode: String, price: BigDecimal, locale: Locale? = null): String {\n    val resLocale = locale ?: Locale.getDefault()\n    val currencyFormat = NumberFormat.getCurrencyInstance(resLocale)\n    // decimalFormat formats the amount in the same way as currencyFormat, but without currency symbol.\n    // We can't use currency.symbol because it doesn't always match the way currency rendered in\n    // the resulting string (for some locales &quot;$&quot; becomes &quot;US$&quot;)\n    val decimalFormat = NumberFormat.getNumberInstance(resLocale)\n    decimalFormat.maximumFractionDigits = currencyFormat.maximumFractionDigits\n    decimalFormat.maximumIntegerDigits = currencyFormat.maximumIntegerDigits\n    decimalFormat.isGroupingUsed = currencyFormat.isGroupingUsed\n    decimalFormat.minimumFractionDigits = currencyFormat.minimumFractionDigits\n    decimalFormat.minimumIntegerDigits = currencyFormat.minimumIntegerDigits\n    decimalFormat.roundingMode = currencyFormat.roundingMode\n    currencyFormat.currency = Currency.getInstance(currencyCode)\n\n    val priceFormatted = currencyFormat.format(price)\n    val amountFormatted = decimalFormat.format(price)\n\n    // 12 345,67 $ US\n    if (priceFormatted.startsWith(amountFormatted)) {\n        val suffix = priceFormatted.substringAfter(amountFormatted)\n        return if (suffix.isNotEmpty() &amp;&amp; !suffix.first().isWhitespace()) {\n            &quot;$amountFormatted $suffix&quot; // use nbsp to prevent line break\n        } else {\n            priceFormatted\n        }\n    }\n\n    // US$12,345.67\n    if (priceFormatted.endsWith(amountFormatted)) {\n        val prefix = priceFormatted.substringBefore(amountFormatted)\n        return if (prefix.isNotEmpty() &amp;&amp; !prefix.last().isWhitespace()) {\n            &quot;$prefix $amountFormatted&quot; // use nbsp to prevent line break\n        } else {\n            priceFormatted\n        }\n    }\n\n    // For negative amounts a sign normally goes before the currency symbol\n    // -US$12,345.67\n    val absAmountFormatted = decimalFormat.format(price.abs())\n    if (priceFormatted.endsWith(absAmountFormatted)) {\n        val prefix = priceFormatted.substringBefore(absAmountFormatted)\n        if (prefix.isNotEmpty() &amp;&amp; !prefix.last().isWhitespace()) {\n            return &quot;$prefix $absAmountFormatted&quot; // use nbsp to prevent line break\n        }\n    }\n\n    return priceFormatted\n}\n</code></pre>\n<p>Testing:</p>\n<pre><code>Locale: BigDecimal -&gt; default_format -&gt; custom_with_nbsp\n\nen: 12345.673 -&gt; $12,345.67 -&gt; $ 12,345.67\nen: 12345.67 -&gt; $12,345.67 -&gt; $ 12,345.67\nen: -12345.67 -&gt; -$12,345.67 -&gt; -$ 12,345.67\nen: 12345.67 -&gt; €12,345.67 -&gt; € 12,345.67\nen: -12345.67 -&gt; -€12,345.67 -&gt; -€ 12,345.67\nen: 12345.67 -&gt; PLN12,345.67 -&gt; PLN 12,345.67\nen: -12345.67 -&gt; -PLN12,345.67 -&gt; -PLN 12,345.67\nzh_CN: 12345.67 -&gt; US$12,345.67 -&gt; US$ 12,345.67\nfr_CA: -12345.67 -&gt; -12 345,67 PLN -&gt; -12 345,67 PLN\npl_PL: 12345.67 -&gt; 12 345,67 zł -&gt; 12 345,67 zł\nfr_FR: 12345.67 -&gt; 12 345,67 PLN -&gt; 12 345,67 PLN\n</code></pre>\n"}],"owner":{"account_id":161859,"reputation":987,"user_id":382939,"accept_rate":82,"display_name":"Seeker"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9923,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"answer_count":8,"score":19,"last_activity_date":1691145447,"creation_date":1310500917,"question_id":6670337,"body_markdown":"I&#39;m trying to print INR format currency like this:\r\n\r\n    NumberFormat fmt = NumberFormat.getCurrencyInstance();\r\n    fmt.setCurrency(Currency.getInstance(&quot;INR&quot;));\r\n    fmt.format(30382.50);\r\n\r\nshows `Rs30,382.50`, but in India its written as `Rs. 30,382.50`(see http://www.flipkart.com/)\r\nhow to solve without hardcoding for INR?","title":"need space between currency symbol and amount","body":"<p>I'm trying to print INR format currency like this:</p>\n\n<pre><code>NumberFormat fmt = NumberFormat.getCurrencyInstance();\nfmt.setCurrency(Currency.getInstance(\"INR\"));\nfmt.format(30382.50);\n</code></pre>\n\n<p>shows <code>Rs30,382.50</code>, but in India its written as <code>Rs. 30,382.50</code>(see <a href=\"http://www.flipkart.com/\" rel=\"noreferrer\">http://www.flipkart.com/</a>)\nhow to solve without hardcoding for INR?</p>\n"},{"tags":["java","sybase","squirrel-sql"],"comments":[{"owner":{"account_id":7670603,"reputation":1867,"user_id":5812981,"accept_rate":23,"display_name":"access_granted"},"score":0,"creation_date":1580767694,"post_id":59992628,"comment_id":106199107,"body_markdown":"If you&#39;re getting this error, you&#39;re are not seeing the driver. Check the jar spelling. Try setting the CLASSLIB env variable to include the jar as well. Lastly, check the jar itself, if it does contain that class, since it may have a different JDBC driver version number.","body":"If you&#39;re getting this error, you&#39;re are not seeing the driver. Check the jar spelling. Try setting the CLASSLIB env variable to include the jar as well. Lastly, check the jar itself, if it does contain that class, since it may have a different JDBC driver version number."},{"owner":{"account_id":194643,"reputation":880,"user_id":1913845,"accept_rate":83,"display_name":"dev4life"},"score":0,"creation_date":1600096289,"post_id":59992628,"comment_id":112973079,"body_markdown":"Did you ever fix this?","body":"Did you ever fix this?"}],"answers":[{"tags":[],"owner":{"account_id":4790051,"reputation":576,"user_id":3869484,"display_name":"Richard Crossley"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580692221,"creation_date":1580692221,"answer_id":60032080,"question_id":59992628,"body_markdown":"Assuming Sybase ASE here; Sybase ASA and ASIQ might be different.\r\n\r\n - Host should be the host name or IP address of the host running the Sybase instance.\r\n - Port is the TCP IP Port number of the &quot;dataserver&quot; process. This is possibly 4100 (Unix) or 5000 (Windows), but can be overridden by the person who installed the Sybase ASE database server\r\n - DBNAME is the name of the database you want to connect to. Try &quot;tempdb&quot; if you&#39;re unsure.\r\n\r\nIf Sybase ASE is running on your Windows PC, the settings might be as follows:\r\n\r\n```\r\njdbc:sybase:Tds:localhost:5000/tempdb\r\n```\r\n\r\nor on some other Unix database server:\r\n\r\n```\r\njdbc:sybase:Tds:dataserver_name:4100/tempdb\r\n```\r\n","title":"Connecting to Sybase DB using Squirrel SQL Client - Driver Class not found Exception","body":"<p>Assuming Sybase ASE here; Sybase ASA and ASIQ might be different.</p>\n\n<ul>\n<li>Host should be the host name or IP address of the host running the Sybase instance.</li>\n<li>Port is the TCP IP Port number of the \"dataserver\" process. This is possibly 4100 (Unix) or 5000 (Windows), but can be overridden by the person who installed the Sybase ASE database server</li>\n<li>DBNAME is the name of the database you want to connect to. Try \"tempdb\" if you're unsure.</li>\n</ul>\n\n<p>If Sybase ASE is running on your Windows PC, the settings might be as follows:</p>\n\n<pre><code>jdbc:sybase:Tds:localhost:5000/tempdb\n</code></pre>\n\n<p>or on some other Unix database server:</p>\n\n<pre><code>jdbc:sybase:Tds:dataserver_name:4100/tempdb\n</code></pre>\n"},{"tags":[],"owner":{"account_id":268435,"reputation":611,"user_id":557194,"display_name":"Nick Humphrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691144850,"creation_date":1691144458,"answer_id":76835030,"question_id":59992628,"body_markdown":"I was able to connect to Sybase Adaptive Server Enterprise using squirrel sql 4.2.0 (so that it will work with jvm 1.8).\r\nFirst, I installed a trial version of Aqua Data Studio 23.0,\r\nthen i got the sybase enterprise driver from that installation:\r\n\r\n    C:\\Program Files\\Aqua Data Studio 23.0 - 64bit\\lib\\drivers\\jconnect16.jar\r\n\r\nThen I followed this tutorial:\r\nhttps://blogs.sap.com/2016/06/28/how-to-configure-squirrel-to-use-it-with-sap-ase/\r\n\r\nand used the following Class Name:\r\n\r\n    com.sybase.jdbc42.jdbc.SybDriver","title":"Connecting to Sybase DB using Squirrel SQL Client - Driver Class not found Exception","body":"<p>I was able to connect to Sybase Adaptive Server Enterprise using squirrel sql 4.2.0 (so that it will work with jvm 1.8).\nFirst, I installed a trial version of Aqua Data Studio 23.0,\nthen i got the sybase enterprise driver from that installation:</p>\n<pre><code>C:\\Program Files\\Aqua Data Studio 23.0 - 64bit\\lib\\drivers\\jconnect16.jar\n</code></pre>\n<p>Then I followed this tutorial:\n<a href=\"https://blogs.sap.com/2016/06/28/how-to-configure-squirrel-to-use-it-with-sap-ase/\" rel=\"nofollow noreferrer\">https://blogs.sap.com/2016/06/28/how-to-configure-squirrel-to-use-it-with-sap-ase/</a></p>\n<p>and used the following Class Name:</p>\n<pre><code>com.sybase.jdbc42.jdbc.SybDriver\n</code></pre>\n"}],"owner":{"account_id":11582964,"reputation":106,"user_id":8486202,"display_name":"Toarn"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1670,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691144850,"creation_date":1580410187,"question_id":59992628,"body_markdown":"I am currently trying to connect to a Sybase DB using Squirrel Client.  However, when I try to connect I am getting an error with the following stack trace.  \r\n\r\njava.lang.RuntimeException: java.lang.ClassNotFoundException: com.sybase.jdbc2.jdbc.SybDriver\r\n\r\nAfter seeing similiar questions on here, I downloaded the JTDS 1.3.1 driver (everything I&#39;m seeing is saying that that is the appropriate driver for sybase) and added the jar file to the lib folder in my squirrel installation.  The error is still showing.\r\n\r\nThe format for my URL is jdbc:sybase:Tds:host:port/DBNAME\r\n\r\nIf anyone has any ideas, I would appreciate the help, I&#39;m drawing all kinds of blanks here.","title":"Connecting to Sybase DB using Squirrel SQL Client - Driver Class not found Exception","body":"<p>I am currently trying to connect to a Sybase DB using Squirrel Client.  However, when I try to connect I am getting an error with the following stack trace.  </p>\n\n<p>java.lang.RuntimeException: java.lang.ClassNotFoundException: com.sybase.jdbc2.jdbc.SybDriver</p>\n\n<p>After seeing similiar questions on here, I downloaded the JTDS 1.3.1 driver (everything I'm seeing is saying that that is the appropriate driver for sybase) and added the jar file to the lib folder in my squirrel installation.  The error is still showing.</p>\n\n<p>The format for my URL is jdbc:sybase:Tds:host:port/DBNAME</p>\n\n<p>If anyone has any ideas, I would appreciate the help, I'm drawing all kinds of blanks here.</p>\n"},{"tags":["java","spring-boot","spring-retry"],"comments":[{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":2,"creation_date":1690994358,"post_id":76821829,"comment_id":135431596,"body_markdown":"You would need a custom back off policy and manually configure an interceptor, passing its bean name into the annotation. However, spring-retry is not really suitable for such long delays because the thread is suspended for that time. You would be better off using custom logic with a `TaskScheduler` instead.","body":"You would need a custom back off policy and manually configure an interceptor, passing its bean name into the annotation. However, spring-retry is not really suitable for such long delays because the thread is suspended for that time. You would be better off using custom logic with a <code>TaskScheduler</code> instead."}],"owner":{"account_id":29145919,"reputation":11,"user_id":22327836,"display_name":"Anjini Nitikka S"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":217,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691144712,"creation_date":1690993567,"question_id":76821829,"body_markdown":"```java\r\n@Retryable(retryFor = SQLException.class, maxAttempts = 2, backoff = @Backoff(delay = 100))\r\nvoid retryServiceWithCustomization(String sql) throws SQLException;\r\n```\r\n\r\nI want to make retry for 5 secs first 60 mins . After 60 mins , retry should be every 30 mins.And No retry logic after 2 days. How Can I implement this use case for above code?\r\n\r\nI have tried using delay and multiplier but not getting the logic","title":"Spring Boot Retry Logic","body":"<pre class=\"lang-java prettyprint-override\"><code>@Retryable(retryFor = SQLException.class, maxAttempts = 2, backoff = @Backoff(delay = 100))\nvoid retryServiceWithCustomization(String sql) throws SQLException;\n</code></pre>\n<p>I want to make retry for 5 secs first 60 mins . After 60 mins , retry should be every 30 mins.And No retry logic after 2 days. How Can I implement this use case for above code?</p>\n<p>I have tried using delay and multiplier but not getting the logic</p>\n"},{"tags":["java","android"],"owner":{"account_id":29158247,"reputation":1,"user_id":22337554,"display_name":"Kiran Srivastava"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691144625,"creation_date":1691144584,"question_id":76835046,"body_markdown":"I have created an app in which I will provide maths and physics questions which will include formula and text both. I am showing these questions in JLatexMathView so that formula can be displayed properly. But this view is showing the whole question no matter how many words are there in it , in just one line. When the number of words is increasing it decreases the size of the word but adjust the whole question in one line. I want to show it in paragraph form. How can I do that ?\r\n\r\nXML code \r\n\r\n\r\n```&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n\r\n    &lt;ru.noties.jlatexmath.JLatexMathView\r\n        android:id=&quot;@+id/j_latex_math_view&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;400dp&quot;\r\n        android:background=&quot;@color/white&quot;\r\n        android:padding=&quot;16dip&quot;\r\n        app:jlmv_alignHorizontal=&quot;center&quot;\r\n        app:jlmv_alignVertical=&quot;center&quot;\r\n        app:jlmv_textSize=&quot;16sp&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;```\r\n\r\n\r\nJAVA code\r\n```\r\n final JLatexMathDrawable drawable = JLatexMathDrawable.builder(&quot;\\\\text{let find the formula find the formula and solve          &quot; +\r\n                        &quot; it now \\n $56 \\\\times 89 \\\\overleftarrow{} \\\\prod \\\\; \\\\lim_{n \\\\to \\\\infty} \\\\coprod$}&quot;)\r\n                .textSize(70)\r\n                .padding(8)\r\n                .background(0xFFffffff)\r\n                .align(JLatexMathDrawable.ALIGN_RIGHT)\r\n                .build();\r\n\r\n\r\n\r\n        latex.setLatexDrawable(drawable);\r\n```\r\n\r\n\r\n\r\n\r\n\r\nI was trying to show the question using jLatexMathView as a paragraph but it is being shown as a single line","title":"How to get line break in JLatexMathView","body":"<p>I have created an app in which I will provide maths and physics questions which will include formula and text both. I am showing these questions in JLatexMathView so that formula can be displayed properly. But this view is showing the whole question no matter how many words are there in it , in just one line. When the number of words is increasing it decreases the size of the word but adjust the whole question in one line. I want to show it in paragraph form. How can I do that ?</p>\n<p>XML code</p>\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n\n    &lt;ru.noties.jlatexmath.JLatexMathView\n        android:id=&quot;@+id/j_latex_math_view&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;400dp&quot;\n        android:background=&quot;@color/white&quot;\n        android:padding=&quot;16dip&quot;\n        app:jlmv_alignHorizontal=&quot;center&quot;\n        app:jlmv_alignVertical=&quot;center&quot;\n        app:jlmv_textSize=&quot;16sp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;```\n\n\nJAVA code\n</code></pre>\n<p>final JLatexMathDrawable drawable = JLatexMathDrawable.builder(&quot;\\text{let find the formula find the formula and solve          &quot; +\n&quot; it now \\n $56 \\times 89 \\overleftarrow{} \\prod \\; \\lim_{n \\to \\infty} \\coprod$}&quot;)\n.textSize(70)\n.padding(8)\n.background(0xFFffffff)\n.align(JLatexMathDrawable.ALIGN_RIGHT)\n.build();</p>\n<pre><code>    latex.setLatexDrawable(drawable);\n</code></pre>\n<pre><code>\n\n\n\n\nI was trying to show the question using jLatexMathView as a paragraph but it is being shown as a single line\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1691142371,"post_id":76834746,"comment_id":135454877,"body_markdown":"So you want to add items only to the *end* of the list?","body":"So you want to add items only to the <i>end</i> of the list?"},{"owner":{"account_id":6813968,"reputation":8276,"user_id":5243272,"accept_rate":83,"display_name":"sandrooco"},"score":0,"creation_date":1691142458,"post_id":76834746,"comment_id":135454896,"body_markdown":"@Sweeper yes, just fill it up to make sure that `size()` will be `3`","body":"@Sweeper yes, just fill it up to make sure that <code>size()</code> will be <code>3</code>"},{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":0,"creation_date":1691142775,"post_id":76834746,"comment_id":135454960,"body_markdown":"Then write your own fill() method. If the list length is less than 3 then you know how many fallback items you have to add. Then add these fallback items.","body":"Then write your own fill() method. If the list length is less than 3 then you know how many fallback items you have to add. Then add these fallback items."}],"answers":[{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1691142806,"creation_date":1691142492,"answer_id":76834774,"question_id":76834746,"body_markdown":"Rather than using `fill`, use `addAll` and `nCopies`:\r\n\r\n```\r\nif (items.size() &lt; 3) {\r\n  items.addAll(Collections.nCopies(3 - items.size(), &quot;fallback&quot;));\r\n}\r\n```\r\n\r\nAs it says [in the Javadoc of `nCopies`](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#nCopies-int-T-):\r\n\r\n&gt; This method is useful in combination with the List.addAll method to grow lists. \r\n","title":"How to fill List to be size 3 but don&#39;t overwrite existing values","body":"<p>Rather than using <code>fill</code>, use <code>addAll</code> and <code>nCopies</code>:</p>\n<pre><code>if (items.size() &lt; 3) {\n  items.addAll(Collections.nCopies(3 - items.size(), &quot;fallback&quot;));\n}\n</code></pre>\n<p>As it says <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#nCopies-int-T-\" rel=\"nofollow noreferrer\">in the Javadoc of <code>nCopies</code></a>:</p>\n<blockquote>\n<p>This method is useful in combination with the List.addAll method to grow lists.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":6813968,"reputation":8276,"user_id":5243272,"accept_rate":83,"display_name":"sandrooco"},"score":0,"creation_date":1691148857,"post_id":76834889,"comment_id":135456036,"body_markdown":"Thanks for your answer. Can you please elaborate on the differences to `.addAll(Collections.nCopies(...));`. Is it a performance thing?","body":"Thanks for your answer. Can you please elaborate on the differences to <code>.addAll(Collections.nCopies(...));</code>. Is it a performance thing?"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1691151172,"post_id":76834889,"comment_id":135456490,"body_markdown":"@sandrooco Even if there is difference in performance, it&#39;s negligible. I believe this approach is more straightforward and easier to understand what&#39;s happening when reading the code.","body":"@sandrooco Even if there is difference in performance, it&#39;s negligible. I believe this approach is more straightforward and easier to understand what&#39;s happening when reading the code."}],"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691143332,"creation_date":1691143332,"answer_id":76834889,"question_id":76834746,"body_markdown":"While you could combine together some provided functionality to achieve it, writing your own `fill` method seems the most straightforward to me:\r\n```\r\nprivate static void fill(List&lt;String&gt; list, String fallback) {\r\n  if (list.size() &gt; 3) {\r\n    //do something?\r\n  }\r\n  while (list.size() &lt; 3) {\r\n    list.add(fallback);\r\n  }\r\n}\r\n```\r\nExample:\r\n```\r\npublic class RandomStuff {\r\n\r\n  public static void main(String[] args) {\r\n    List&lt;String&gt; list1 = new ArrayList&lt;&gt;(Arrays.asList(&quot;item&quot;, &quot;item&quot;, &quot;item&quot;));\r\n    List&lt;String&gt; list2 = new ArrayList&lt;&gt;(Arrays.asList(&quot;item&quot;, &quot;item&quot;));\r\n    List&lt;String&gt; list3 = new ArrayList&lt;&gt;();\r\n    List&lt;String&gt; list4 = new ArrayList&lt;&gt;(Arrays.asList(&quot;item&quot;, &quot;item&quot;, &quot;item&quot;, &quot;item&quot;));\r\n    String fallback = &quot;fallback&quot;;\r\n    fill(list1, fallback);\r\n    fill(list2, fallback);\r\n    fill(list3, fallback);\r\n    fill(list4, fallback);\r\n    System.out.println(list1);\r\n    System.out.println(list2);\r\n    System.out.println(list3);\r\n    System.out.println(list4);\r\n  }\r\n\r\n  private static void fill(List&lt;String&gt; list, String fallback) {\r\n    //body above\r\n  }\r\n}\r\n```","title":"How to fill List to be size 3 but don&#39;t overwrite existing values","body":"<p>While you could combine together some provided functionality to achieve it, writing your own <code>fill</code> method seems the most straightforward to me:</p>\n<pre><code>private static void fill(List&lt;String&gt; list, String fallback) {\n  if (list.size() &gt; 3) {\n    //do something?\n  }\n  while (list.size() &lt; 3) {\n    list.add(fallback);\n  }\n}\n</code></pre>\n<p>Example:</p>\n<pre><code>public class RandomStuff {\n\n  public static void main(String[] args) {\n    List&lt;String&gt; list1 = new ArrayList&lt;&gt;(Arrays.asList(&quot;item&quot;, &quot;item&quot;, &quot;item&quot;));\n    List&lt;String&gt; list2 = new ArrayList&lt;&gt;(Arrays.asList(&quot;item&quot;, &quot;item&quot;));\n    List&lt;String&gt; list3 = new ArrayList&lt;&gt;();\n    List&lt;String&gt; list4 = new ArrayList&lt;&gt;(Arrays.asList(&quot;item&quot;, &quot;item&quot;, &quot;item&quot;, &quot;item&quot;));\n    String fallback = &quot;fallback&quot;;\n    fill(list1, fallback);\n    fill(list2, fallback);\n    fill(list3, fallback);\n    fill(list4, fallback);\n    System.out.println(list1);\n    System.out.println(list2);\n    System.out.println(list3);\n    System.out.println(list4);\n  }\n\n  private static void fill(List&lt;String&gt; list, String fallback) {\n    //body above\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":6813968,"reputation":8276,"user_id":5243272,"accept_rate":83,"display_name":"sandrooco"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":76834774,"answer_count":2,"score":-3,"last_activity_date":1691144604,"creation_date":1691142268,"question_id":76834746,"body_markdown":"I need to make sure that a List has exactly 3 items. Input examples:\r\n\r\n    1. [&quot;item&quot;, &quot;item&quot;, &quot;item&quot;]\r\n    2. [&quot;item&quot;, &quot;item&quot;]\r\n    3. []\r\n\r\nTarget output examples:\r\n\r\n    1. [&quot;item&quot;, &quot;item&quot;, &quot;item&quot;]\r\n    2. [&quot;item&quot;, &quot;item&quot;, &quot;fallback&quot;]\r\n    3. [&quot;fallback&quot;, &quot;fallback&quot;, &quot;fallback&quot;]\r\n\r\n\r\nI tried to use `Collections.fill(items, &quot;fallback&quot;);` but this overwrites the `&quot;item&quot;` values which I need to retain.\r\n","title":"How to fill List to be size 3 but don&#39;t overwrite existing values","body":"<p>I need to make sure that a List has exactly 3 items. Input examples:</p>\n<pre><code>1. [&quot;item&quot;, &quot;item&quot;, &quot;item&quot;]\n2. [&quot;item&quot;, &quot;item&quot;]\n3. []\n</code></pre>\n<p>Target output examples:</p>\n<pre><code>1. [&quot;item&quot;, &quot;item&quot;, &quot;item&quot;]\n2. [&quot;item&quot;, &quot;item&quot;, &quot;fallback&quot;]\n3. [&quot;fallback&quot;, &quot;fallback&quot;, &quot;fallback&quot;]\n</code></pre>\n<p>I tried to use <code>Collections.fill(items, &quot;fallback&quot;);</code> but this overwrites the <code>&quot;item&quot;</code> values which I need to retain.</p>\n"},{"tags":["java","charts","apache-poi","export","powerpoint"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1691036648,"post_id":76822212,"comment_id":135437037,"body_markdown":"For units of rectangle dimensions of `XSLFChart` see https://stackoverflow.com/questions/59848453/resizing-a-xslfchart/59853872#59853872. But not clear what meant with: &quot;find a way to add anchor and place chart from above code in predefined container in presentation&quot;. What predefined container? How would you do this using PowerPoint GUI? Please make the question more clear.","body":"For units of rectangle dimensions of <code>XSLFChart</code> see <a href=\"https://stackoverflow.com/questions/59848453/resizing-a-xslfchart/59853872#59853872\" title=\"resizing a xslfchart\">stackoverflow.com/questions/59848453/resizing-a-xslfchart/&hellip;</a>. But not clear what meant with: &quot;find a way to add anchor and place chart from above code in predefined container in presentation&quot;. What predefined container? How would you do this using PowerPoint GUI? Please make the question more clear."},{"owner":{"account_id":22339809,"reputation":31,"user_id":16559751,"display_name":"adi"},"score":0,"creation_date":1691143070,"post_id":76822212,"comment_id":135455019,"body_markdown":"Thanks @AxelRichter for the comment.\nI was following the thread you provided before but the problem is that when I&#39;m passing rectangle object chart is not reacting to the rectangle values. I&#39;m always receiving chart on (x,y) -&gt; (0,0) and size (w, h)-&gt; 0,0.\nAdding images to main thread.","body":"Thanks @AxelRichter for the comment. I was following the thread you provided before but the problem is that when I&#39;m passing rectangle object chart is not reacting to the rectangle values. I&#39;m always receiving chart on (x,y) -&gt; (0,0) and size (w, h)-&gt; 0,0. Adding images to main thread."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1691143556,"post_id":76822212,"comment_id":135455111,"body_markdown":"My answer in https://stackoverflow.com/questions/45373942/java-create-a-chart-in-a-powerpoint-using-apache-poi now provides an additional example using `XDDF`. Works for me using current Apache POI 5.2.3. Produces a properly dimesioned chart using `Rectangle chartDimensions = new Rectangle(100*Units.EMU_PER_POINT, 50*Units.EMU_PER_POINT, 400*Units.EMU_PER_POINT, 400*Units.EMU_PER_POINT);\nslide.addChart(chart, chartDimensions);`","body":"My answer in <a href=\"https://stackoverflow.com/questions/45373942/java-create-a-chart-in-a-powerpoint-using-apache-poi\" title=\"java create a chart in a powerpoint using apache poi\">stackoverflow.com/questions/45373942/&hellip;</a> now provides an additional example using <code>XDDF</code>. Works for me using current Apache POI 5.2.3. Produces a properly dimesioned chart using <code>Rectangle chartDimensions = new Rectangle(100*Units.EMU_PER_POINT, 50*Units.EMU_PER_POINT, 400*Units.EMU_PER_POINT, 400*Units.EMU_PER_POINT); slide.addChart(chart, chartDimensions);</code>"}],"owner":{"account_id":22339809,"reputation":31,"user_id":16559751,"display_name":"adi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1691143759,"creation_date":1690997063,"question_id":76822212,"body_markdown":"I&#39;m trying to create bar chart as POC and place it in presentation slide container. \r\nI&#39;m able to create chart but it&#39;s appearing in top right corner and it&#39;s very small. When I&#39;m adding dimensions it&#39;s appearing even smaller (not visible). \r\nHere is code:\r\n```\r\nXMLSlideShow ppt = new XMLSlideShow();\r\n// Create a slide\r\nXSLFSlide slide = ppt.createSlide();\r\nXSLFChart chart = ppt.createChart(slide);\r\nchart.setTitleText(&quot;Test Chart&quot;);\r\n// bar chart\r\nXDDFCategoryAxis bottomAxis = chart.createCategoryAxis(AxisPosition.BOTTOM);\r\nXDDFValueAxis leftAxis = chart.createValueAxis(AxisPosition.LEFT);\r\nleftAxis.setCrosses(AxisCrosses.AUTO_ZERO);\r\nleftAxis.setCrossBetween(AxisCrossBetween.BETWEEN);\r\n\r\n// Define chart data\r\nXDDFChartData data = chart.createData(ChartTypes.BAR, bottomAxis, leftAxis);\r\n\r\n// Add chart categories (x-axis data)\r\nString[] categories = new String[] { &quot;Category 1&quot;, &quot;Category 2&quot;, &quot;Category 3&quot; };\r\nXDDFCategoryDataSource categoryData = XDDFDataSourcesFactory.fromArray(categories);\r\n\r\n// Add chart values (y-axis data)\r\nDouble[] values = new Double[] { 10.0, 20.0, 15.0 };\r\nXDDFNumericalDataSource&lt;Double&gt; valueData = XDDFDataSourcesFactory.fromArray(values);\r\nXDDFBarChartData bar = (XDDFBarChartData) data;\r\nbar.setBarDirection(BarDirection.BAR);\r\n\r\nXDDFChartData.Series series = data.addSeries(categoryData, valueData);\r\nseries.setTitle(&quot;Series 1&quot;, null);\r\nchart.plot(data);\r\nslide.addChart(chart);\r\n\r\n// Save the presentation to a file\r\nFileOutputStream out = new FileOutputStream(&quot;ChartPresentation.pptx&quot;);\r\nppt.write(out);\r\nout.close();\r\n```\r\n\r\nI was also trying to pass dimensions but then chart is even smaller. \r\n```\r\nslide.addChart(chart, new Rectangle2D.Float(10, 10, 400, 400));\r\n```\r\n\r\nI was also following sample from [java-create-a-chart-in-a-powerpoint-using-apache-poi](https://stackoverflow.com/questions/45373942/java-create-a-chart-in-a-powerpoint-using-apache-poi) but that one is more complex and not ideal. \r\nit&#39;s not showing charts in preview of the file. File looks like empty. \r\nOutput presentation:\r\n[![output presentation][1]][1]\r\n\r\nResize chart to show that it&#39;s generating:\r\n[![enter image description here][2]][2]\r\n\r\nAlso I can&#39;t find a way to add anchor and place chart from above code in predefined container in presentation. What I mean, I&#39;d like to place chart in predefined container that already exists in template. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pnH5L.png\r\n  [2]: https://i.stack.imgur.com/UKixo.png","title":"Apache-poi PowerPoint create chart and place into container in presentation","body":"<p>I'm trying to create bar chart as POC and place it in presentation slide container.\nI'm able to create chart but it's appearing in top right corner and it's very small. When I'm adding dimensions it's appearing even smaller (not visible).\nHere is code:</p>\n<pre><code>XMLSlideShow ppt = new XMLSlideShow();\n// Create a slide\nXSLFSlide slide = ppt.createSlide();\nXSLFChart chart = ppt.createChart(slide);\nchart.setTitleText(&quot;Test Chart&quot;);\n// bar chart\nXDDFCategoryAxis bottomAxis = chart.createCategoryAxis(AxisPosition.BOTTOM);\nXDDFValueAxis leftAxis = chart.createValueAxis(AxisPosition.LEFT);\nleftAxis.setCrosses(AxisCrosses.AUTO_ZERO);\nleftAxis.setCrossBetween(AxisCrossBetween.BETWEEN);\n\n// Define chart data\nXDDFChartData data = chart.createData(ChartTypes.BAR, bottomAxis, leftAxis);\n\n// Add chart categories (x-axis data)\nString[] categories = new String[] { &quot;Category 1&quot;, &quot;Category 2&quot;, &quot;Category 3&quot; };\nXDDFCategoryDataSource categoryData = XDDFDataSourcesFactory.fromArray(categories);\n\n// Add chart values (y-axis data)\nDouble[] values = new Double[] { 10.0, 20.0, 15.0 };\nXDDFNumericalDataSource&lt;Double&gt; valueData = XDDFDataSourcesFactory.fromArray(values);\nXDDFBarChartData bar = (XDDFBarChartData) data;\nbar.setBarDirection(BarDirection.BAR);\n\nXDDFChartData.Series series = data.addSeries(categoryData, valueData);\nseries.setTitle(&quot;Series 1&quot;, null);\nchart.plot(data);\nslide.addChart(chart);\n\n// Save the presentation to a file\nFileOutputStream out = new FileOutputStream(&quot;ChartPresentation.pptx&quot;);\nppt.write(out);\nout.close();\n</code></pre>\n<p>I was also trying to pass dimensions but then chart is even smaller.</p>\n<pre><code>slide.addChart(chart, new Rectangle2D.Float(10, 10, 400, 400));\n</code></pre>\n<p>I was also following sample from <a href=\"https://stackoverflow.com/questions/45373942/java-create-a-chart-in-a-powerpoint-using-apache-poi\">java-create-a-chart-in-a-powerpoint-using-apache-poi</a> but that one is more complex and not ideal.\nit's not showing charts in preview of the file. File looks like empty.\nOutput presentation:\n<a href=\"https://i.stack.imgur.com/pnH5L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pnH5L.png\" alt=\"output presentation\" /></a></p>\n<p>Resize chart to show that it's generating:\n<a href=\"https://i.stack.imgur.com/UKixo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UKixo.png\" alt=\"enter image description here\" /></a></p>\n<p>Also I can't find a way to add anchor and place chart from above code in predefined container in presentation. What I mean, I'd like to place chart in predefined container that already exists in template.</p>\n"},{"tags":["java","spring","logging","spring-security","exception"],"comments":[{"owner":{"account_id":135174,"reputation":17875,"user_id":337819,"accept_rate":68,"display_name":"Marvo"},"score":0,"creation_date":1568662714,"post_id":51788764,"comment_id":102337889,"body_markdown":"What I can&#39;t figure out is WHO is adding the extra slash?  I type &quot;example.com/app/main&quot; into the browser&#39;s address field, and Spring is somehow getting &quot;/app//main&quot;.","body":"What I can&#39;t figure out is WHO is adding the extra slash?  I type &quot;example.com/app/main&quot; into the browser&#39;s address field, and Spring is somehow getting &quot;/app//main&quot;."},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":1,"creation_date":1615889348,"post_id":51788764,"comment_id":117825228,"body_markdown":"Recorded as [Spring Security bug 5007](https://github.com/spring-projects/spring-security/issues/5007). Noted as fixed in version 5.4.0-M1 in July 2020; [version 5.4.0 was released](https://spring.io/blog/2020/09/10/spring-security-5-4-goes-ga) in September 2020.","body":"Recorded as <a href=\"https://github.com/spring-projects/spring-security/issues/5007\" rel=\"nofollow noreferrer\">Spring Security bug 5007</a>. Noted as fixed in version 5.4.0-M1 in July 2020; <a href=\"https://spring.io/blog/2020/09/10/spring-security-5-4-goes-ga\" rel=\"nofollow noreferrer\">version 5.4.0 was released</a> in September 2020."},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":1,"creation_date":1615889476,"post_id":51788764,"comment_id":117825279,"body_markdown":"However, I am having the same problem with Spring Security 5.4.2. So I guess they have not so much *fixed* the problem, as made it easier to implement a work-around.","body":"However, I am having the same problem with Spring Security 5.4.2. So I guess they have not so much <i>fixed</i> the problem, as made it easier to implement a work-around."}],"answers":[{"comments":[{"owner":{"account_id":973518,"reputation":5174,"user_id":995514,"accept_rate":54,"display_name":"Half_Duplex"},"score":0,"creation_date":1660435194,"post_id":51792347,"comment_id":129532672,"body_markdown":"This is still an issue. Hundreds of lines of pointless stack trace...","body":"This is still an issue. Hundreds of lines of pointless stack trace..."}],"tags":[],"owner":{"account_id":2369743,"reputation":7285,"user_id":2074605,"accept_rate":100,"display_name":"Parker"},"comment_count":1,"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1536763918,"creation_date":1533926419,"answer_id":51792347,"question_id":51788764,"body_markdown":"I implemented a subclass of `StrictHttpFirewall` that logs request information to the console and throws a new exception with a suppressed stack trace. This partially solves my problem (at least I can see the bad requests now).\r\n\r\nIf you just want to see the rejected requests without the stack trace, this is the answer you&#39;re looking for.\r\n\r\nIf you want to handle these exceptions in a controller, please refer to the [accepted answer][1] for a complete (but slightly more complex) solution.\r\n\r\n---\r\n\r\n**LoggingHttpFirewall.java**\r\n\r\nThis class extends [StrictHttpFirewall][2] to catch `RequestRejectedException` and throws a new exception with metadata from the request and a suppressed stack trace.\r\n\r\n    import java.util.logging.Level;\r\n    import java.util.logging.Logger;\r\n    \r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    import org.springframework.security.web.firewall.FirewalledRequest;\r\n    import org.springframework.security.web.firewall.RequestRejectedException;\r\n    import org.springframework.security.web.firewall.StrictHttpFirewall;\r\n    \r\n    /**\r\n     * Overrides the StrictHttpFirewall to log some useful information about blocked requests.\r\n     */\r\n    public final class LoggingHttpFirewall extends StrictHttpFirewall\r\n    {\r\n        /**\r\n         * Logger.\r\n         */\r\n        private static final Logger LOGGER = Logger.getLogger(LoggingHttpFirewall.class.getName());\r\n    \r\n        /**\r\n         * Default constructor.\r\n         */\r\n        public LoggingHttpFirewall()\r\n        {\r\n            super();\r\n            return;\r\n        }\r\n    \r\n        /**\r\n         * Provides the request object which will be passed through the filter chain.\r\n         *\r\n         * @returns A FirewalledRequest (required by the HttpFirewall interface) which\r\n         *          inconveniently breaks the general contract of ServletFilter because\r\n         *          we can&#39;t upcast this to an HttpServletRequest. This prevents us\r\n         *          from re-wrapping this using an HttpServletRequestWrapper.\r\n         * @throws RequestRejectedException if the request should be rejected immediately.\r\n         */\r\n        @Override\r\n        public FirewalledRequest getFirewalledRequest(final HttpServletRequest request) throws RequestRejectedException\r\n        {\r\n            try\r\n            {\r\n                return super.getFirewalledRequest(request);\r\n            } catch (RequestRejectedException ex) {\r\n                if (LOGGER.isLoggable(Level.WARNING))\r\n                {\r\n                    LOGGER.log(Level.WARNING, &quot;Intercepted RequestBlockedException: Remote Host: &quot; + request.getRemoteHost() + &quot; User Agent: &quot; + request.getHeader(&quot;User-Agent&quot;) + &quot; Request URL: &quot; + request.getRequestURL().toString());\r\n                }\r\n    \r\n                // Wrap in a new RequestRejectedException with request metadata and a shallower stack trace.\r\n                throw new RequestRejectedException(ex.getMessage() + &quot;.\\n Remote Host: &quot; + request.getRemoteHost() + &quot;\\n User Agent: &quot; + request.getHeader(&quot;User-Agent&quot;) + &quot;\\n Request URL: &quot; + request.getRequestURL().toString())\r\n                {\r\n                    private static final long serialVersionUID = 1L;\r\n    \r\n                    @Override\r\n                    public synchronized Throwable fillInStackTrace()\r\n                    {\r\n                        return this; // suppress the stack trace.\r\n                    }\r\n                };\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Provides the response which will be passed through the filter chain.\r\n         * This method isn&#39;t extensible because the request may already be committed.\r\n         * Furthermore, this is only invoked for requests that were not blocked, so we can&#39;t\r\n         * control the status or response for blocked requests here.\r\n         *\r\n         * @param response The original HttpServletResponse.\r\n         * @return the original response or a replacement/wrapper.\r\n         */\r\n        @Override\r\n        public HttpServletResponse getFirewalledResponse(final HttpServletResponse response)\r\n        {\r\n            // Note: The FirewalledResponse class is not accessible outside the package.\r\n            return super.getFirewalledResponse(response);\r\n        }\r\n    }\r\n\r\n---\r\n\r\n**WebSecurityConfig.java**\r\n\r\nIn `WebSecurityConfig`, set the HTTP firewall to the `LoggingHttpFirewall`.\r\n\r\n    @EnableWebSecurity\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter\r\n    {\r\n        /**\r\n         * Default constructor.\r\n         */\r\n        public WebSecurityConfig()\r\n        {\r\n            super();\r\n            return;\r\n        }\r\n    \r\n        @Override\r\n        public final void configure(final WebSecurity web) throws Exception\r\n        {\r\n            super.configure(web);\r\n            web.httpFirewall(new LoggingHttpFirewall()); // Set the custom firewall.\r\n            return;\r\n        }\r\n    }\r\n\r\n---\r\n\r\n**Results**\r\n\r\nAfter deploying this solution to production, I quickly discovered that the default behavior of `StrictHttpFirewall` was blocking Google from indexing my site!\r\n\r\n    Aug 13, 2018 1:48:56 PM com.mycompany.spring.security.AnnotatingHttpFirewall getFirewalledRequest\r\n    WARNING: Intercepted RequestBlockedException: Remote Host: 66.249.64.223 User Agent: Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5X Build/MMB29P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.96 Mobile Safari/537.36 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) Request URL: https://www.mycompany.com/10.1601/tx.3784;jsessionid=692804549F9AB55F45DBD0AFE2A97FFD\r\n\r\nAs soon as I discovered this, I quickly deployed a new version (included in [my other answer][1]) that looks for `;jsessionid=` and allows these requests through. There may well be other requests that should pass through as well, and now I have a way of detecting these.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/51800972/2074605\r\n  [2]: https://docs.spring.io/spring-security/site/docs/4.2.7.RELEASE/apidocs/org/springframework/security/web/firewall/StrictHttpFirewall.html","title":"How to intercept a RequestRejectedException in Spring?","body":"<p>I implemented a subclass of <code>StrictHttpFirewall</code> that logs request information to the console and throws a new exception with a suppressed stack trace. This partially solves my problem (at least I can see the bad requests now).</p>\n\n<p>If you just want to see the rejected requests without the stack trace, this is the answer you're looking for.</p>\n\n<p>If you want to handle these exceptions in a controller, please refer to the <a href=\"https://stackoverflow.com/a/51800972/2074605\">accepted answer</a> for a complete (but slightly more complex) solution.</p>\n\n<hr>\n\n<p><strong>LoggingHttpFirewall.java</strong></p>\n\n<p>This class extends <a href=\"https://docs.spring.io/spring-security/site/docs/4.2.7.RELEASE/apidocs/org/springframework/security/web/firewall/StrictHttpFirewall.html\" rel=\"noreferrer\">StrictHttpFirewall</a> to catch <code>RequestRejectedException</code> and throws a new exception with metadata from the request and a suppressed stack trace.</p>\n\n<pre><code>import java.util.logging.Level;\nimport java.util.logging.Logger;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport org.springframework.security.web.firewall.FirewalledRequest;\nimport org.springframework.security.web.firewall.RequestRejectedException;\nimport org.springframework.security.web.firewall.StrictHttpFirewall;\n\n/**\n * Overrides the StrictHttpFirewall to log some useful information about blocked requests.\n */\npublic final class LoggingHttpFirewall extends StrictHttpFirewall\n{\n    /**\n     * Logger.\n     */\n    private static final Logger LOGGER = Logger.getLogger(LoggingHttpFirewall.class.getName());\n\n    /**\n     * Default constructor.\n     */\n    public LoggingHttpFirewall()\n    {\n        super();\n        return;\n    }\n\n    /**\n     * Provides the request object which will be passed through the filter chain.\n     *\n     * @returns A FirewalledRequest (required by the HttpFirewall interface) which\n     *          inconveniently breaks the general contract of ServletFilter because\n     *          we can't upcast this to an HttpServletRequest. This prevents us\n     *          from re-wrapping this using an HttpServletRequestWrapper.\n     * @throws RequestRejectedException if the request should be rejected immediately.\n     */\n    @Override\n    public FirewalledRequest getFirewalledRequest(final HttpServletRequest request) throws RequestRejectedException\n    {\n        try\n        {\n            return super.getFirewalledRequest(request);\n        } catch (RequestRejectedException ex) {\n            if (LOGGER.isLoggable(Level.WARNING))\n            {\n                LOGGER.log(Level.WARNING, \"Intercepted RequestBlockedException: Remote Host: \" + request.getRemoteHost() + \" User Agent: \" + request.getHeader(\"User-Agent\") + \" Request URL: \" + request.getRequestURL().toString());\n            }\n\n            // Wrap in a new RequestRejectedException with request metadata and a shallower stack trace.\n            throw new RequestRejectedException(ex.getMessage() + \".\\n Remote Host: \" + request.getRemoteHost() + \"\\n User Agent: \" + request.getHeader(\"User-Agent\") + \"\\n Request URL: \" + request.getRequestURL().toString())\n            {\n                private static final long serialVersionUID = 1L;\n\n                @Override\n                public synchronized Throwable fillInStackTrace()\n                {\n                    return this; // suppress the stack trace.\n                }\n            };\n        }\n    }\n\n    /**\n     * Provides the response which will be passed through the filter chain.\n     * This method isn't extensible because the request may already be committed.\n     * Furthermore, this is only invoked for requests that were not blocked, so we can't\n     * control the status or response for blocked requests here.\n     *\n     * @param response The original HttpServletResponse.\n     * @return the original response or a replacement/wrapper.\n     */\n    @Override\n    public HttpServletResponse getFirewalledResponse(final HttpServletResponse response)\n    {\n        // Note: The FirewalledResponse class is not accessible outside the package.\n        return super.getFirewalledResponse(response);\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>WebSecurityConfig.java</strong></p>\n\n<p>In <code>WebSecurityConfig</code>, set the HTTP firewall to the <code>LoggingHttpFirewall</code>.</p>\n\n<pre><code>@EnableWebSecurity\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter\n{\n    /**\n     * Default constructor.\n     */\n    public WebSecurityConfig()\n    {\n        super();\n        return;\n    }\n\n    @Override\n    public final void configure(final WebSecurity web) throws Exception\n    {\n        super.configure(web);\n        web.httpFirewall(new LoggingHttpFirewall()); // Set the custom firewall.\n        return;\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Results</strong></p>\n\n<p>After deploying this solution to production, I quickly discovered that the default behavior of <code>StrictHttpFirewall</code> was blocking Google from indexing my site!</p>\n\n<pre><code>Aug 13, 2018 1:48:56 PM com.mycompany.spring.security.AnnotatingHttpFirewall getFirewalledRequest\nWARNING: Intercepted RequestBlockedException: Remote Host: 66.249.64.223 User Agent: Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5X Build/MMB29P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.96 Mobile Safari/537.36 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) Request URL: https://www.mycompany.com/10.1601/tx.3784;jsessionid=692804549F9AB55F45DBD0AFE2A97FFD\n</code></pre>\n\n<p>As soon as I discovered this, I quickly deployed a new version (included in <a href=\"https://stackoverflow.com/a/51800972/2074605\">my other answer</a>) that looks for <code>;jsessionid=</code> and allows these requests through. There may well be other requests that should pass through as well, and now I have a way of detecting these.</p>\n"},{"comments":[{"owner":{"account_id":2863588,"reputation":11468,"user_id":2458310,"display_name":"denov"},"score":0,"creation_date":1648177939,"post_id":51800972,"comment_id":126564294,"body_markdown":"you don&#39;t need to `return` in a void method.  :)","body":"you don&#39;t need to <code>return</code> in a void method.  :)"},{"owner":{"account_id":2369743,"reputation":7285,"user_id":2074605,"accept_rate":100,"display_name":"Parker"},"score":0,"creation_date":1691149021,"post_id":51800972,"comment_id":135456061,"body_markdown":"For all of the other solutions proposed, I&#39;d like to note that this method has been working flawlessly for five years with no changes.","body":"For all of the other solutions proposed, I&#39;d like to note that this method has been working flawlessly for five years with no changes."}],"tags":[],"owner":{"account_id":2369743,"reputation":7285,"user_id":2074605,"accept_rate":100,"display_name":"Parker"},"comment_count":2,"down_vote_count":1,"up_vote_count":15,"is_accepted":true,"score":14,"last_activity_date":1537884288,"creation_date":1533999922,"answer_id":51800972,"question_id":51788764,"body_markdown":"It turns out that although `HttpFirewall` and `StrictHttpFirewall` contain several design errors (documented in the code below), it is just barely possible to escape Spring Security&#39;s *One True Firewall* and tunnel the `HttpFirewall` information via a request attribute to a `HandlerInterceptor` that can pass these flagged requests to a *real* (persistent) firewall without sacrificing the original business logic that flagged them in the first place. The method documented here should be fairly future-proof, as it conforms to a simple contract from the `HttpFirewall` interface, and the rest is simply the core Spring Framework and Java Servlet API.\r\n\r\nThis is essentially a more complicated but more complete alternative to [my earlier answer][1]. In this answer, I implemented a new subclass of `StrictHttpFirewall` that intercepts and logs rejected requests at a specific logging level, but also adds an attribute to the HTTP request that flags it for downstream filters (or controllers) to handle. Also, this `AnnotatingHttpFirewall` provides an `inspect()` method that allows subclasses to add custom rules for blocking requests.\r\n\r\nThis solution is split into two parts: (1) *Spring Security* and (2) *Spring Framework (Core)*, because that is the divide that caused this problem in the first place, and this shows how to bridge it. \r\n\r\nFor reference, this is tested on Spring 4.3.17 and Spring Security 4.2.6. There may be significant changes when Spring 5.1 is released.\r\n\r\n---\r\n\r\n**Part 1: Spring Security**\r\n\r\nThis is the half of the solution that performs the logging and flagging within Spring Security.\r\n\r\n---\r\n\r\n**AnnotatingHttpFirewall.java**\r\n\r\n    import java.util.logging.Level;\r\n    import java.util.logging.Logger;\r\n    \r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    import org.springframework.security.web.firewall.FirewalledRequest;\r\n    import org.springframework.security.web.firewall.RequestRejectedException;\r\n    import org.springframework.security.web.firewall.StrictHttpFirewall;\r\n    \r\n    /**\r\n     * Overrides the StrictHttpFirewall to log some useful information about blocked requests.\r\n     */\r\n    public class AnnotatingHttpFirewall extends StrictHttpFirewall\r\n    {\r\n        /**\r\n         * The name of the HTTP header representing a request that has been rejected by this firewall.\r\n         */\r\n        public static final String HTTP_HEADER_REQUEST_REJECTED_FLAG = &quot;X-HttpFirewall-RequestRejectedFlag&quot;;\r\n\r\n        /**\r\n         * The name of the HTTP header representing the reason a request has been rejected by this firewall.\r\n         */\r\n        public static final String HTTP_HEADER_REQUEST_REJECTED_REASON = &quot;X-HttpFirewall-RequestRejectedReason&quot;;\r\n\r\n        /**\r\n         * Logger.\r\n         */\r\n        private static final Logger LOGGER = Logger.getLogger(AnnotatingHttpFirewall.class.getName());\r\n    \r\n        /**\r\n         * Default constructor.\r\n         */\r\n        public AnnotatingHttpFirewall()\r\n        {\r\n            super();\r\n            return;\r\n        }\r\n    \r\n        /**\r\n         * Provides the request object which will be passed through the filter chain.\r\n         *\r\n         * @param request The original HttpServletRequest.\r\n         * @returns A FirewalledRequest (required by the HttpFirewall interface) which\r\n         *          inconveniently breaks the general contract of ServletFilter because\r\n         *          we can&#39;t upcast this to an HttpServletRequest. This prevents us\r\n         *          from re-wrapping this using an HttpServletRequestWrapper.\r\n         */\r\n        @Override\r\n        public FirewalledRequest getFirewalledRequest(final HttpServletRequest request)\r\n        {\r\n            try\r\n            {\r\n                this.inspect(request); // Perform any additional checks that the naive &quot;StrictHttpFirewall&quot; misses.\r\n                return super.getFirewalledRequest(request);\r\n            } catch (RequestRejectedException ex) {\r\n                final String requestUrl = request.getRequestURL().toString();\r\n\r\n                // Override some of the default behavior because some requests are\r\n                // legitimate.\r\n                if (requestUrl.contains(&quot;;jsessionid=&quot;))\r\n                {\r\n                    // Do not block non-cookie serialized sessions. Google&#39;s crawler does this often.\r\n                } else {\r\n                    // Log anything that is blocked so we can find these in the catalina.out log.\r\n                    // This will give us any information we need to make\r\n                    // adjustments to these special cases and see potentially\r\n                    // malicious activity.\r\n                    if (LOGGER.isLoggable(Level.WARNING))\r\n                    {\r\n                        LOGGER.log(Level.WARNING, &quot;Intercepted RequestBlockedException: Remote Host: &quot; + request.getRemoteHost() + &quot; User Agent: &quot; + request.getHeader(&quot;User-Agent&quot;) + &quot; Request URL: &quot; + request.getRequestURL().toString());\r\n                    }\r\n                    \r\n                    // Mark this request as rejected.\r\n                    request.setAttribute(HTTP_HEADER_REQUEST_REJECTED, Boolean.TRUE);\r\n                    request.setAttribute(HTTP_HEADER_REQUEST_REJECTED_REASON, ex.getMessage());\r\n                }\r\n                \r\n                // Suppress the RequestBlockedException and pass the request through\r\n                // with the additional attribute.\r\n                return new FirewalledRequest(request)\r\n                {\r\n                    @Override\r\n                    public void reset()\r\n                    {\r\n                        return;\r\n                    }\r\n                };\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Provides the response which will be passed through the filter chain.\r\n         * This method isn&#39;t extensible because the request may already be committed.\r\n         * Furthermore, this is only invoked for requests that were not blocked, so we can&#39;t\r\n         * control the status or response for blocked requests here.\r\n         *\r\n         * @param response The original HttpServletResponse.\r\n         * @return the original response or a replacement/wrapper.\r\n         */\r\n        @Override\r\n        public HttpServletResponse getFirewalledResponse(final HttpServletResponse response)\r\n        {\r\n            // Note: The FirewalledResponse class is not accessible outside the package.\r\n            return super.getFirewalledResponse(response);\r\n        }\r\n        \r\n        /**\r\n         * Perform any custom checks on the request.\r\n         * This method may be overridden by a subclass in order to supplement or replace these tests.\r\n         *\r\n         * @param request The original HttpServletRequest.\r\n         * @throws RequestRejectedException if the request should be rejected immediately.\r\n         */\r\n        public void inspect(final HttpServletRequest request) throws RequestRejectedException\r\n        {\r\n            final String requestUri = request.getRequestURI(); // path without parameters\r\n    //        final String requestUrl = request.getRequestURL().toString(); // full path with parameters\r\n            \r\n            if (requestUri.endsWith(&quot;/wp-login.php&quot;))\r\n            {\r\n                throw new RequestRejectedException(&quot;The request was rejected because it is a vulnerability scan.&quot;);\r\n            }\r\n            \r\n            if (requestUri.endsWith(&quot;.php&quot;))\r\n            {\r\n                throw new RequestRejectedException(&quot;The request was rejected because it is a likely vulnerability scan.&quot;);\r\n            }\r\n            \r\n            return; // The request passed all custom tests.\r\n        }\r\n    }\r\n\r\n---\r\n\r\n**WebSecurityConfig.java**\r\n\r\nIn `WebSecurityConfig`, set the HTTP firewall to the `AnnotatingHttpFirewall`.\r\n\r\n    @EnableWebSecurity\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter\r\n    {\r\n        /**\r\n         * Default constructor.\r\n         */\r\n        public WebSecurityConfig()\r\n        {\r\n            super();\r\n            return;\r\n        }\r\n    \r\n        @Override\r\n        public final void configure(final WebSecurity web) throws Exception\r\n        {\r\n            super.configure(web);\r\n            web.httpFirewall(new AnnotatingHttpFirewall()); // Set the custom firewall.\r\n            return;\r\n        }\r\n    }\r\n\r\n---\r\n\r\n**Part 2: Spring Framework**\r\n\r\nThe second part of this solution could conceivably be implemented as a `ServletFilter` or `HandlerInterceptor`. I&#39;m going the path of a `HandlerInterceptor` because it seems to give the most flexibility and works directly within the Spring Framework.\r\n\r\n---\r\n\r\n**RequestBlockedException.java**\r\n\r\nThis custom exception can be handled by an Error Controller. This may be extended to add any request headers, parameters or properties available from the raw request (even the full request itself) that may be pertinent to application business logic (e.g., a persistent firewall).\r\n\r\n    /**\r\n     * A custom exception for situations where a request is blocked or rejected.\r\n     */\r\n    public class RequestBlockedException extends RuntimeException\r\n    {\r\n        private static final long serialVersionUID = 1L;\r\n    \r\n        /**\r\n         * The requested URL.\r\n         */\r\n        private String requestUrl;\r\n    \r\n        /**\r\n         * The remote address of the client making the request.\r\n         */\r\n        private String remoteAddress;\r\n    \r\n        /**\r\n         * A message or reason for blocking the request.\r\n         */\r\n        private String reason;\r\n    \r\n        /**\r\n         * The user agent supplied by the client the request.\r\n         */\r\n        private String userAgent;\r\n    \r\n        /**\r\n         * Creates a new Request Blocked Exception.\r\n         *\r\n         * @param reqUrl The requested URL.\r\n         * @param remoteAddr The remote address of the client making the request.\r\n         * @param userAgent The user agent supplied by the client making the request.\r\n         * @param message A message or reason for blocking the request.\r\n         */\r\n        public RequestBlockedException(final String reqUrl, final String remoteAddr, final String userAgent, final String message)\r\n        {\r\n            this.requestUrl = reqUrl;\r\n            this.remoteAddress = remoteAddr;\r\n            this.userAgent = userAgent;\r\n            this.reason = message;\r\n            return;\r\n        }\r\n    \r\n        /**\r\n         * Gets the requested URL.\r\n         *\r\n         * @return A URL.\r\n         */\r\n        public String getRequestUrl()\r\n        {\r\n            return this.requestUrl;\r\n        }\r\n    \r\n        /**\r\n         * Gets the remote address of the client making the request.\r\n         *\r\n         * @return A remote address.\r\n         */\r\n        public String getRemoteAddress()\r\n        {\r\n            return this.remoteAddress;\r\n        }\r\n    \r\n        /**\r\n         * Gets the user agent supplied by the client making the request.\r\n         *\r\n         * @return  A user agent string.\r\n         */\r\n        public String getUserAgent()\r\n        {\r\n            return this.userAgent;\r\n        }\r\n    \r\n        /**\r\n         * Gets the reason for blocking the request.\r\n         *\r\n         * @return  A message or reason for blocking the request.\r\n         */\r\n        public String getReason()\r\n        {\r\n            return this.reason;\r\n        }\r\n    }\r\n\r\n---\r\n\r\n**FirewallInterceptor.java**\r\n\r\nThis interceptor is invoked after the Spring Security filters have run (i.e., after `AnnotatingHttpFirewall` has flagged requests that should be rejected. This interceptor detects those flags (attributes) on the request and raises a custom exception that our Error Controller can handle.\r\n\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    import org.springframework.web.method.HandlerMethod;\r\n    import org.springframework.web.servlet.HandlerInterceptor;\r\n    import org.springframework.web.servlet.ModelAndView;\r\n    \r\n    /**\r\n     * Intercepts requests that were flagged as rejected by the firewall.\r\n     */\r\n    public final class FirewallInterceptor implements HandlerInterceptor\r\n    {\r\n        /**\r\n         * Default constructor.\r\n         */\r\n        public FirewallInterceptor()\r\n        {\r\n            return;\r\n        }\r\n    \r\n        @Override\r\n        public boolean preHandle(final HttpServletRequest request, final HttpServletResponse response, final Object handler) throws Exception\r\n        {\r\n            if (Boolean.TRUE.equals(request.getAttribute(AnnotatingHttpFirewall.HTTP_HEADER_REQUEST_REJECTED)))\r\n            {\r\n                // Throw a custom exception that can be handled by a custom error controller.\r\n                final String reason = (String) request.getAttribute(AnnotatingHttpFirewall.HTTP_HEADER_REQUEST_REJECTED_REASON);\r\n                throw new RequestRejectedByFirewallException(request.getRequestURL().toString(), request.getRemoteAddr(), request.getHeader(HttpHeaders.USER_AGENT), reason);\r\n            }\r\n\r\n            return true; // Allow the request to proceed normally.\r\n        }\r\n        \r\n        @Override\r\n        public void postHandle(final HttpServletRequest request, final HttpServletResponse response, final Object handler, final ModelAndView modelAndView) throws Exception\r\n        {\r\n            return;\r\n        }\r\n    \r\n        @Override\r\n        public void afterCompletion(final HttpServletRequest request, final HttpServletResponse response, final Object handler, final Exception ex) throws Exception\r\n        {\r\n            return;\r\n        }\r\n    }\r\n\r\n---\r\n\r\n**WebConfig.java**\r\n\r\nIn `WebConfig`, add the `FirewallInterceptor` to the registry.\r\n\r\n    @EnableWebMvc\r\n    public class WebConfig extends WebMvcConfigurerAdapter\r\n    {\r\n        /**\r\n         * Among your other methods in this class, make sure you register\r\n         * your Interceptor.\r\n         */\r\n        @Override\r\n        public void addInterceptors(final InterceptorRegistry registry)\r\n        {\r\n            // Register firewall interceptor for all URLs in webapp.\r\n            registry.addInterceptor(new FirewallInterceptor()).addPathPatterns(&quot;/**&quot;);\r\n            return;\r\n        }\r\n    }\r\n\r\n---\r\n\r\n**ErrorController.java**\r\n\r\nThis specifically handles the custom exception above, and produces a clean error page for the client while logging all of the relevant information and invoking any special business logic for a custom application firewall.\r\n\r\n    import java.io.IOException;\r\n    import java.util.logging.Level;\r\n    import java.util.logging.Logger;\r\n\r\n    import org.springframework.web.servlet.NoHandlerFoundException;\r\n    \r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.web.bind.annotation.ControllerAdvice;\r\n    import org.springframework.web.bind.annotation.ExceptionHandler;\r\n    import org.springframework.web.bind.annotation.ResponseStatus;\r\n\r\n    import RequestBlockedException;\r\n\r\n    @ControllerAdvice\r\n    public final class ErrorController\r\n    {\r\n        /**\r\n         * Logger.\r\n         */\r\n        private static final Logger LOGGER = Logger.getLogger(ErrorController.class.getName());\r\n    \r\n        /**\r\n         * Generates an Error page by intercepting exceptions generated from AnnotatingHttpFirewall.\r\n         *\r\n         * @param request The original HTTP request.\r\n         * @param ex A RequestBlockedException exception.\r\n         * @return The tile definition name for the page.\r\n         */\r\n        @ExceptionHandler(RequestBlockedException.class)\r\n        @ResponseStatus(HttpStatus.BAD_REQUEST)\r\n        public String handleRequestBlockedException(final RequestBlockedException ex)\r\n        {\r\n            if (LOGGER.isLoggable(Level.WARNING))\r\n            {\r\n                LOGGER.log(Level.WARNING, &quot;Rejected request from &quot; + ex.getRemoteAddress() + &quot; for [&quot; + ex.getRequestUrl() + &quot;]. Reason: &quot; + ex.getReason());\r\n            }\r\n    \r\n            // Note: Perform any additional business logic or logging here.\r\n            \r\n            return &quot;errorPage&quot;; // Returns a nice error page with the specified status code.\r\n        }\r\n    \r\n        /**\r\n         * Generates a Page Not Found page.\r\n         *\r\n         * @param ex A NoHandlerFound exception.\r\n         * @return The tile definition name for the page.\r\n         */\r\n        @ExceptionHandler(NoHandlerFoundException.class)\r\n        @ResponseStatus(HttpStatus.NOT_FOUND)\r\n        public String handleException(final NoHandlerFoundException ex)\r\n        {\r\n            return &quot;notFoundPage&quot;;\r\n        }\r\n    }\r\n\r\n---\r\n\r\n**FirewallController.java**\r\n\r\nA controller with a default mapping that throws a `NoHandlerFoundException`.\r\nThis circumvents the chicken-and-egg strategy in [DispatcherServlet.noHandlerFound][2], allowing that method to *always* find a mapping so that `FirewallInterceptor.preHandle` is always invoked. This gives `RequestRejectedByFirewallException` priority over `NoHandlerFoundException`.\r\n\r\nWhy this is necessary:\r\n\r\nAs mentioned [here][3], when a `NoHandlerFoundException` is thrown from `DispatcherServlet` (i.e., when a requested URL has no corresponding mapping), there is no way to handle the exceptions generated from the above firewall (`NoHandlerFoundException` is thrown prior to invoking [preHandle()][4]), so those requests will fall through to your 404 view (which is not the desired behavior in my case - you will see a lot of &quot;No mapping found for HTTP request with URI...&quot; messages). This could be fixed by moving the check for the special header into the `noHandlerFound` method. Unfortunately, there is no way to do this without writing a new Dispatcher Servlet from scratch, and then you may as well throw out the entire Spring Framework. It is impossible to extend `DispatcherServlet` due to the mix of protected, private and final methods, and the fact that its properties are inaccessible (no getters or setters). It is also impossible to wrap the class because there is no common interface that can be implemented. The default mapping in this class provides an elegant way to circumvent all of that logic.\r\n\r\n**Important caveat**: The RequestMapping below will prevent resolution of static resources because it takes precedence over all registered ResourceHandlers. I am still looking for a workaround for this, but one possibility might be to try one of the methods for handling static resources suggested in [this answer][5].\r\n\r\n    import org.springframework.http.HttpHeaders;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.ModelAttribute;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.servlet.NoHandlerFoundException;\r\n    \r\n    @Controller\r\n    public final class FirewallController\r\n    {\r\n        /**\r\n         * The name of the model attribute (or request parameter for advertisement click tracking) that contains the request URL.\r\n         */\r\n        protected static final String REQUEST_URL = &quot;requestUrl&quot;;\r\n    \r\n        /**\r\n         * The name of the model attribute that contains the request method.\r\n         */\r\n        protected static final String REQUEST_METHOD = &quot;requestMethod&quot;;\r\n    \r\n        /**\r\n         * The name of the model attribute that contains all HTTP headers.\r\n         */\r\n        protected static final String REQUEST_HEADERS = &quot;requestHeaders&quot;;\r\n\r\n        /**\r\n         * Default constructor.\r\n         */\r\n        public FirewallController()\r\n        {\r\n            return;\r\n        }\r\n\r\n        /**\r\n         * Populates the request URL model attribute from the HTTP request.\r\n         *\r\n         * @param request The HTTP request.\r\n         * @return The request URL.\r\n         */\r\n        @ModelAttribute(REQUEST_URL)\r\n        public final String getRequestURL(final HttpServletRequest request)\r\n        {\r\n            return request.getRequestURL().toString();\r\n        }\r\n    \r\n        /**\r\n         * Populates the request method from the HTTP request.\r\n         *\r\n         * @param request The HTTP request.\r\n         * @return The request method (GET, POST, HEAD, etc.).\r\n         */\r\n        @ModelAttribute(REQUEST_METHOD)\r\n        public final String getRequestMethod(final HttpServletRequest request)\r\n        {\r\n            return request.getMethod();\r\n        }\r\n    \r\n        /**\r\n         * Gets all headers from the HTTP request.\r\n         *\r\n         * @param request The HTTP request.\r\n         * @return The request headers.\r\n         */\r\n        @ModelAttribute(REQUEST_HEADERS)\r\n        public final HttpHeaders getRequestHeaders(final HttpServletRequest request)\r\n        {\r\n            return FirewallController.headers(request);\r\n        }\r\n\r\n        /**\r\n         * A catch-all default mapping that throws a NoHandlerFoundException.\r\n         * This will be intercepted by the ErrorController, which allows preHandle to work normally.\r\n         *\r\n         * @param requestMethod The request method.\r\n         * @param requestUrl The request URL.\r\n         * @param requestHeaders The request headers.\r\n         * @throws NoHandlerFoundException every time this method is invoked.\r\n         */\r\n        @RequestMapping(value = &quot;/**&quot;) // NOTE: This prevents resolution of static resources. Still looking for a workaround for this.\r\n        public void getNotFoundPage(@ModelAttribute(REQUEST_METHOD) final String requestMethod, @ModelAttribute(REQUEST_URL) final String requestUrl, @ModelAttribute(REQUEST_HEADERS) final HttpHeaders requestHeaders) throws NoHandlerFoundException\r\n        {\r\n            throw new NoHandlerFoundException(requestMethod, requestUrl, requestHeaders);\r\n        }\r\n    \r\n        /**\r\n         * Gets all headers from a HTTP request.\r\n         *\r\n         * @param request The HTTP request.\r\n         * @return The request headers.\r\n         */\r\n        public static HttpHeaders headers(final HttpServletRequest request)\r\n        {\r\n            final HttpHeaders headers = new HttpHeaders();\r\n    \r\n            for (Enumeration&lt;?&gt; names = request.getHeaderNames(); names.hasMoreElements();)\r\n            {\r\n                final String headerName = (String) names.nextElement();\r\n    \r\n                for (Enumeration&lt;?&gt; headerValues = request.getHeaders(headerName); headerValues.hasMoreElements();)\r\n                {\r\n                    headers.add(headerName, (String) headerValues.nextElement());\r\n                }\r\n            }\r\n    \r\n            return headers;\r\n        }\r\n    }\r\n\r\n---\r\n\r\n**Results**\r\n\r\nWhen both parts of this are working, you&#39;ll see the following two warnings logged (the first one is in Spring Security, the second one is the Spring Framework (Core) `ErrorController`). Now you have full control over logging, and an extensible application firewall that you can adjust however you need.\r\n\r\n    Sep 12, 2018 10:24:37 AM com.mycompany.spring.security.AnnotatingHttpFirewall getFirewalledRequest\r\n    WARNING: Intercepted org.springframework.security.web.firewall.RequestRejectedException: Remote Host: 0:0:0:0:0:0:0:1 User Agent: Mozilla/5.0 (Windows NT 6.3; Win64; x64; rv:62.0) Gecko/20100101 Firefox/62.0 Request URL: http://localhost:8080/webapp-www-mycompany-com/login.php\r\n    Sep 12, 2018 10:24:37 AM com.mycompany.spring.controller.ErrorController handleException\r\n    WARNING: Rejected request from 0:0:0:0:0:0:0:1 for [http://localhost:8080/webapp-www-mycompany-com/login.php]. Reason: The request was rejected because it is a likely vulnerability scan.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/51792347/2074605\r\n  [2]: https://github.com/spring-projects/spring-framework/blob/master/spring-webmvc/src/main/java/org/springframework/web/servlet/DispatcherServlet.java\r\n  [3]: https://stackoverflow.com/a/31790661/2074605\r\n  [4]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/HandlerInterceptor.html#preHandle-javax.servlet.http.HttpServletRequest-javax.servlet.http.HttpServletResponse-java.lang.Object-\r\n  [5]: https://stackoverflow.com/a/40563813/2074605","title":"How to intercept a RequestRejectedException in Spring?","body":"<p>It turns out that although <code>HttpFirewall</code> and <code>StrictHttpFirewall</code> contain several design errors (documented in the code below), it is just barely possible to escape Spring Security's <em>One True Firewall</em> and tunnel the <code>HttpFirewall</code> information via a request attribute to a <code>HandlerInterceptor</code> that can pass these flagged requests to a <em>real</em> (persistent) firewall without sacrificing the original business logic that flagged them in the first place. The method documented here should be fairly future-proof, as it conforms to a simple contract from the <code>HttpFirewall</code> interface, and the rest is simply the core Spring Framework and Java Servlet API.</p>\n\n<p>This is essentially a more complicated but more complete alternative to <a href=\"https://stackoverflow.com/a/51792347/2074605\">my earlier answer</a>. In this answer, I implemented a new subclass of <code>StrictHttpFirewall</code> that intercepts and logs rejected requests at a specific logging level, but also adds an attribute to the HTTP request that flags it for downstream filters (or controllers) to handle. Also, this <code>AnnotatingHttpFirewall</code> provides an <code>inspect()</code> method that allows subclasses to add custom rules for blocking requests.</p>\n\n<p>This solution is split into two parts: (1) <em>Spring Security</em> and (2) <em>Spring Framework (Core)</em>, because that is the divide that caused this problem in the first place, and this shows how to bridge it. </p>\n\n<p>For reference, this is tested on Spring 4.3.17 and Spring Security 4.2.6. There may be significant changes when Spring 5.1 is released.</p>\n\n<hr>\n\n<p><strong>Part 1: Spring Security</strong></p>\n\n<p>This is the half of the solution that performs the logging and flagging within Spring Security.</p>\n\n<hr>\n\n<p><strong>AnnotatingHttpFirewall.java</strong></p>\n\n<pre><code>import java.util.logging.Level;\nimport java.util.logging.Logger;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport org.springframework.security.web.firewall.FirewalledRequest;\nimport org.springframework.security.web.firewall.RequestRejectedException;\nimport org.springframework.security.web.firewall.StrictHttpFirewall;\n\n/**\n * Overrides the StrictHttpFirewall to log some useful information about blocked requests.\n */\npublic class AnnotatingHttpFirewall extends StrictHttpFirewall\n{\n    /**\n     * The name of the HTTP header representing a request that has been rejected by this firewall.\n     */\n    public static final String HTTP_HEADER_REQUEST_REJECTED_FLAG = \"X-HttpFirewall-RequestRejectedFlag\";\n\n    /**\n     * The name of the HTTP header representing the reason a request has been rejected by this firewall.\n     */\n    public static final String HTTP_HEADER_REQUEST_REJECTED_REASON = \"X-HttpFirewall-RequestRejectedReason\";\n\n    /**\n     * Logger.\n     */\n    private static final Logger LOGGER = Logger.getLogger(AnnotatingHttpFirewall.class.getName());\n\n    /**\n     * Default constructor.\n     */\n    public AnnotatingHttpFirewall()\n    {\n        super();\n        return;\n    }\n\n    /**\n     * Provides the request object which will be passed through the filter chain.\n     *\n     * @param request The original HttpServletRequest.\n     * @returns A FirewalledRequest (required by the HttpFirewall interface) which\n     *          inconveniently breaks the general contract of ServletFilter because\n     *          we can't upcast this to an HttpServletRequest. This prevents us\n     *          from re-wrapping this using an HttpServletRequestWrapper.\n     */\n    @Override\n    public FirewalledRequest getFirewalledRequest(final HttpServletRequest request)\n    {\n        try\n        {\n            this.inspect(request); // Perform any additional checks that the naive \"StrictHttpFirewall\" misses.\n            return super.getFirewalledRequest(request);\n        } catch (RequestRejectedException ex) {\n            final String requestUrl = request.getRequestURL().toString();\n\n            // Override some of the default behavior because some requests are\n            // legitimate.\n            if (requestUrl.contains(\";jsessionid=\"))\n            {\n                // Do not block non-cookie serialized sessions. Google's crawler does this often.\n            } else {\n                // Log anything that is blocked so we can find these in the catalina.out log.\n                // This will give us any information we need to make\n                // adjustments to these special cases and see potentially\n                // malicious activity.\n                if (LOGGER.isLoggable(Level.WARNING))\n                {\n                    LOGGER.log(Level.WARNING, \"Intercepted RequestBlockedException: Remote Host: \" + request.getRemoteHost() + \" User Agent: \" + request.getHeader(\"User-Agent\") + \" Request URL: \" + request.getRequestURL().toString());\n                }\n\n                // Mark this request as rejected.\n                request.setAttribute(HTTP_HEADER_REQUEST_REJECTED, Boolean.TRUE);\n                request.setAttribute(HTTP_HEADER_REQUEST_REJECTED_REASON, ex.getMessage());\n            }\n\n            // Suppress the RequestBlockedException and pass the request through\n            // with the additional attribute.\n            return new FirewalledRequest(request)\n            {\n                @Override\n                public void reset()\n                {\n                    return;\n                }\n            };\n        }\n    }\n\n    /**\n     * Provides the response which will be passed through the filter chain.\n     * This method isn't extensible because the request may already be committed.\n     * Furthermore, this is only invoked for requests that were not blocked, so we can't\n     * control the status or response for blocked requests here.\n     *\n     * @param response The original HttpServletResponse.\n     * @return the original response or a replacement/wrapper.\n     */\n    @Override\n    public HttpServletResponse getFirewalledResponse(final HttpServletResponse response)\n    {\n        // Note: The FirewalledResponse class is not accessible outside the package.\n        return super.getFirewalledResponse(response);\n    }\n\n    /**\n     * Perform any custom checks on the request.\n     * This method may be overridden by a subclass in order to supplement or replace these tests.\n     *\n     * @param request The original HttpServletRequest.\n     * @throws RequestRejectedException if the request should be rejected immediately.\n     */\n    public void inspect(final HttpServletRequest request) throws RequestRejectedException\n    {\n        final String requestUri = request.getRequestURI(); // path without parameters\n//        final String requestUrl = request.getRequestURL().toString(); // full path with parameters\n\n        if (requestUri.endsWith(\"/wp-login.php\"))\n        {\n            throw new RequestRejectedException(\"The request was rejected because it is a vulnerability scan.\");\n        }\n\n        if (requestUri.endsWith(\".php\"))\n        {\n            throw new RequestRejectedException(\"The request was rejected because it is a likely vulnerability scan.\");\n        }\n\n        return; // The request passed all custom tests.\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>WebSecurityConfig.java</strong></p>\n\n<p>In <code>WebSecurityConfig</code>, set the HTTP firewall to the <code>AnnotatingHttpFirewall</code>.</p>\n\n<pre><code>@EnableWebSecurity\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter\n{\n    /**\n     * Default constructor.\n     */\n    public WebSecurityConfig()\n    {\n        super();\n        return;\n    }\n\n    @Override\n    public final void configure(final WebSecurity web) throws Exception\n    {\n        super.configure(web);\n        web.httpFirewall(new AnnotatingHttpFirewall()); // Set the custom firewall.\n        return;\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Part 2: Spring Framework</strong></p>\n\n<p>The second part of this solution could conceivably be implemented as a <code>ServletFilter</code> or <code>HandlerInterceptor</code>. I'm going the path of a <code>HandlerInterceptor</code> because it seems to give the most flexibility and works directly within the Spring Framework.</p>\n\n<hr>\n\n<p><strong>RequestBlockedException.java</strong></p>\n\n<p>This custom exception can be handled by an Error Controller. This may be extended to add any request headers, parameters or properties available from the raw request (even the full request itself) that may be pertinent to application business logic (e.g., a persistent firewall).</p>\n\n<pre><code>/**\n * A custom exception for situations where a request is blocked or rejected.\n */\npublic class RequestBlockedException extends RuntimeException\n{\n    private static final long serialVersionUID = 1L;\n\n    /**\n     * The requested URL.\n     */\n    private String requestUrl;\n\n    /**\n     * The remote address of the client making the request.\n     */\n    private String remoteAddress;\n\n    /**\n     * A message or reason for blocking the request.\n     */\n    private String reason;\n\n    /**\n     * The user agent supplied by the client the request.\n     */\n    private String userAgent;\n\n    /**\n     * Creates a new Request Blocked Exception.\n     *\n     * @param reqUrl The requested URL.\n     * @param remoteAddr The remote address of the client making the request.\n     * @param userAgent The user agent supplied by the client making the request.\n     * @param message A message or reason for blocking the request.\n     */\n    public RequestBlockedException(final String reqUrl, final String remoteAddr, final String userAgent, final String message)\n    {\n        this.requestUrl = reqUrl;\n        this.remoteAddress = remoteAddr;\n        this.userAgent = userAgent;\n        this.reason = message;\n        return;\n    }\n\n    /**\n     * Gets the requested URL.\n     *\n     * @return A URL.\n     */\n    public String getRequestUrl()\n    {\n        return this.requestUrl;\n    }\n\n    /**\n     * Gets the remote address of the client making the request.\n     *\n     * @return A remote address.\n     */\n    public String getRemoteAddress()\n    {\n        return this.remoteAddress;\n    }\n\n    /**\n     * Gets the user agent supplied by the client making the request.\n     *\n     * @return  A user agent string.\n     */\n    public String getUserAgent()\n    {\n        return this.userAgent;\n    }\n\n    /**\n     * Gets the reason for blocking the request.\n     *\n     * @return  A message or reason for blocking the request.\n     */\n    public String getReason()\n    {\n        return this.reason;\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>FirewallInterceptor.java</strong></p>\n\n<p>This interceptor is invoked after the Spring Security filters have run (i.e., after <code>AnnotatingHttpFirewall</code> has flagged requests that should be rejected. This interceptor detects those flags (attributes) on the request and raises a custom exception that our Error Controller can handle.</p>\n\n<pre><code>import javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport org.springframework.web.method.HandlerMethod;\nimport org.springframework.web.servlet.HandlerInterceptor;\nimport org.springframework.web.servlet.ModelAndView;\n\n/**\n * Intercepts requests that were flagged as rejected by the firewall.\n */\npublic final class FirewallInterceptor implements HandlerInterceptor\n{\n    /**\n     * Default constructor.\n     */\n    public FirewallInterceptor()\n    {\n        return;\n    }\n\n    @Override\n    public boolean preHandle(final HttpServletRequest request, final HttpServletResponse response, final Object handler) throws Exception\n    {\n        if (Boolean.TRUE.equals(request.getAttribute(AnnotatingHttpFirewall.HTTP_HEADER_REQUEST_REJECTED)))\n        {\n            // Throw a custom exception that can be handled by a custom error controller.\n            final String reason = (String) request.getAttribute(AnnotatingHttpFirewall.HTTP_HEADER_REQUEST_REJECTED_REASON);\n            throw new RequestRejectedByFirewallException(request.getRequestURL().toString(), request.getRemoteAddr(), request.getHeader(HttpHeaders.USER_AGENT), reason);\n        }\n\n        return true; // Allow the request to proceed normally.\n    }\n\n    @Override\n    public void postHandle(final HttpServletRequest request, final HttpServletResponse response, final Object handler, final ModelAndView modelAndView) throws Exception\n    {\n        return;\n    }\n\n    @Override\n    public void afterCompletion(final HttpServletRequest request, final HttpServletResponse response, final Object handler, final Exception ex) throws Exception\n    {\n        return;\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>WebConfig.java</strong></p>\n\n<p>In <code>WebConfig</code>, add the <code>FirewallInterceptor</code> to the registry.</p>\n\n<pre><code>@EnableWebMvc\npublic class WebConfig extends WebMvcConfigurerAdapter\n{\n    /**\n     * Among your other methods in this class, make sure you register\n     * your Interceptor.\n     */\n    @Override\n    public void addInterceptors(final InterceptorRegistry registry)\n    {\n        // Register firewall interceptor for all URLs in webapp.\n        registry.addInterceptor(new FirewallInterceptor()).addPathPatterns(\"/**\");\n        return;\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>ErrorController.java</strong></p>\n\n<p>This specifically handles the custom exception above, and produces a clean error page for the client while logging all of the relevant information and invoking any special business logic for a custom application firewall.</p>\n\n<pre><code>import java.io.IOException;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\n\nimport org.springframework.web.servlet.NoHandlerFoundException;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.web.bind.annotation.ControllerAdvice;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.bind.annotation.ResponseStatus;\n\nimport RequestBlockedException;\n\n@ControllerAdvice\npublic final class ErrorController\n{\n    /**\n     * Logger.\n     */\n    private static final Logger LOGGER = Logger.getLogger(ErrorController.class.getName());\n\n    /**\n     * Generates an Error page by intercepting exceptions generated from AnnotatingHttpFirewall.\n     *\n     * @param request The original HTTP request.\n     * @param ex A RequestBlockedException exception.\n     * @return The tile definition name for the page.\n     */\n    @ExceptionHandler(RequestBlockedException.class)\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\n    public String handleRequestBlockedException(final RequestBlockedException ex)\n    {\n        if (LOGGER.isLoggable(Level.WARNING))\n        {\n            LOGGER.log(Level.WARNING, \"Rejected request from \" + ex.getRemoteAddress() + \" for [\" + ex.getRequestUrl() + \"]. Reason: \" + ex.getReason());\n        }\n\n        // Note: Perform any additional business logic or logging here.\n\n        return \"errorPage\"; // Returns a nice error page with the specified status code.\n    }\n\n    /**\n     * Generates a Page Not Found page.\n     *\n     * @param ex A NoHandlerFound exception.\n     * @return The tile definition name for the page.\n     */\n    @ExceptionHandler(NoHandlerFoundException.class)\n    @ResponseStatus(HttpStatus.NOT_FOUND)\n    public String handleException(final NoHandlerFoundException ex)\n    {\n        return \"notFoundPage\";\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>FirewallController.java</strong></p>\n\n<p>A controller with a default mapping that throws a <code>NoHandlerFoundException</code>.\nThis circumvents the chicken-and-egg strategy in <a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-webmvc/src/main/java/org/springframework/web/servlet/DispatcherServlet.java\" rel=\"noreferrer\">DispatcherServlet.noHandlerFound</a>, allowing that method to <em>always</em> find a mapping so that <code>FirewallInterceptor.preHandle</code> is always invoked. This gives <code>RequestRejectedByFirewallException</code> priority over <code>NoHandlerFoundException</code>.</p>\n\n<p>Why this is necessary:</p>\n\n<p>As mentioned <a href=\"https://stackoverflow.com/a/31790661/2074605\">here</a>, when a <code>NoHandlerFoundException</code> is thrown from <code>DispatcherServlet</code> (i.e., when a requested URL has no corresponding mapping), there is no way to handle the exceptions generated from the above firewall (<code>NoHandlerFoundException</code> is thrown prior to invoking <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/HandlerInterceptor.html#preHandle-javax.servlet.http.HttpServletRequest-javax.servlet.http.HttpServletResponse-java.lang.Object-\" rel=\"noreferrer\">preHandle()</a>), so those requests will fall through to your 404 view (which is not the desired behavior in my case - you will see a lot of \"No mapping found for HTTP request with URI...\" messages). This could be fixed by moving the check for the special header into the <code>noHandlerFound</code> method. Unfortunately, there is no way to do this without writing a new Dispatcher Servlet from scratch, and then you may as well throw out the entire Spring Framework. It is impossible to extend <code>DispatcherServlet</code> due to the mix of protected, private and final methods, and the fact that its properties are inaccessible (no getters or setters). It is also impossible to wrap the class because there is no common interface that can be implemented. The default mapping in this class provides an elegant way to circumvent all of that logic.</p>\n\n<p><strong>Important caveat</strong>: The RequestMapping below will prevent resolution of static resources because it takes precedence over all registered ResourceHandlers. I am still looking for a workaround for this, but one possibility might be to try one of the methods for handling static resources suggested in <a href=\"https://stackoverflow.com/a/40563813/2074605\">this answer</a>.</p>\n\n<pre><code>import org.springframework.http.HttpHeaders;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.ModelAttribute;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.servlet.NoHandlerFoundException;\n\n@Controller\npublic final class FirewallController\n{\n    /**\n     * The name of the model attribute (or request parameter for advertisement click tracking) that contains the request URL.\n     */\n    protected static final String REQUEST_URL = \"requestUrl\";\n\n    /**\n     * The name of the model attribute that contains the request method.\n     */\n    protected static final String REQUEST_METHOD = \"requestMethod\";\n\n    /**\n     * The name of the model attribute that contains all HTTP headers.\n     */\n    protected static final String REQUEST_HEADERS = \"requestHeaders\";\n\n    /**\n     * Default constructor.\n     */\n    public FirewallController()\n    {\n        return;\n    }\n\n    /**\n     * Populates the request URL model attribute from the HTTP request.\n     *\n     * @param request The HTTP request.\n     * @return The request URL.\n     */\n    @ModelAttribute(REQUEST_URL)\n    public final String getRequestURL(final HttpServletRequest request)\n    {\n        return request.getRequestURL().toString();\n    }\n\n    /**\n     * Populates the request method from the HTTP request.\n     *\n     * @param request The HTTP request.\n     * @return The request method (GET, POST, HEAD, etc.).\n     */\n    @ModelAttribute(REQUEST_METHOD)\n    public final String getRequestMethod(final HttpServletRequest request)\n    {\n        return request.getMethod();\n    }\n\n    /**\n     * Gets all headers from the HTTP request.\n     *\n     * @param request The HTTP request.\n     * @return The request headers.\n     */\n    @ModelAttribute(REQUEST_HEADERS)\n    public final HttpHeaders getRequestHeaders(final HttpServletRequest request)\n    {\n        return FirewallController.headers(request);\n    }\n\n    /**\n     * A catch-all default mapping that throws a NoHandlerFoundException.\n     * This will be intercepted by the ErrorController, which allows preHandle to work normally.\n     *\n     * @param requestMethod The request method.\n     * @param requestUrl The request URL.\n     * @param requestHeaders The request headers.\n     * @throws NoHandlerFoundException every time this method is invoked.\n     */\n    @RequestMapping(value = \"/**\") // NOTE: This prevents resolution of static resources. Still looking for a workaround for this.\n    public void getNotFoundPage(@ModelAttribute(REQUEST_METHOD) final String requestMethod, @ModelAttribute(REQUEST_URL) final String requestUrl, @ModelAttribute(REQUEST_HEADERS) final HttpHeaders requestHeaders) throws NoHandlerFoundException\n    {\n        throw new NoHandlerFoundException(requestMethod, requestUrl, requestHeaders);\n    }\n\n    /**\n     * Gets all headers from a HTTP request.\n     *\n     * @param request The HTTP request.\n     * @return The request headers.\n     */\n    public static HttpHeaders headers(final HttpServletRequest request)\n    {\n        final HttpHeaders headers = new HttpHeaders();\n\n        for (Enumeration&lt;?&gt; names = request.getHeaderNames(); names.hasMoreElements();)\n        {\n            final String headerName = (String) names.nextElement();\n\n            for (Enumeration&lt;?&gt; headerValues = request.getHeaders(headerName); headerValues.hasMoreElements();)\n            {\n                headers.add(headerName, (String) headerValues.nextElement());\n            }\n        }\n\n        return headers;\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Results</strong></p>\n\n<p>When both parts of this are working, you'll see the following two warnings logged (the first one is in Spring Security, the second one is the Spring Framework (Core) <code>ErrorController</code>). Now you have full control over logging, and an extensible application firewall that you can adjust however you need.</p>\n\n<pre><code>Sep 12, 2018 10:24:37 AM com.mycompany.spring.security.AnnotatingHttpFirewall getFirewalledRequest\nWARNING: Intercepted org.springframework.security.web.firewall.RequestRejectedException: Remote Host: 0:0:0:0:0:0:0:1 User Agent: Mozilla/5.0 (Windows NT 6.3; Win64; x64; rv:62.0) Gecko/20100101 Firefox/62.0 Request URL: http://localhost:8080/webapp-www-mycompany-com/login.php\nSep 12, 2018 10:24:37 AM com.mycompany.spring.controller.ErrorController handleException\nWARNING: Rejected request from 0:0:0:0:0:0:0:1 for [http://localhost:8080/webapp-www-mycompany-com/login.php]. Reason: The request was rejected because it is a likely vulnerability scan.\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1711175,"reputation":106,"user_id":1569214,"display_name":"ArmedChef"},"score":4,"creation_date":1547763464,"post_id":52635656,"comment_id":95314647,"body_markdown":"This is a very unappreciated answer.  Thanks for the simple solution!","body":"This is a very unappreciated answer.  Thanks for the simple solution!"},{"owner":{"account_id":1541876,"reputation":1201,"user_id":1436313,"accept_rate":67,"display_name":"Sabareesh Kkanan"},"score":1,"creation_date":1555534945,"post_id":52635656,"comment_id":98149973,"body_markdown":"This works but we are getting error logs instead of just warn logs","body":"This works but we are getting error logs instead of just warn logs"},{"owner":{"account_id":16864887,"reputation":872,"user_id":12194805,"display_name":"Oozeerally"},"score":0,"creation_date":1582207721,"post_id":52635656,"comment_id":106704138,"body_markdown":"Simple, effective. Thanks for sharing!","body":"Simple, effective. Thanks for sharing!"},{"owner":{"account_id":11904923,"reputation":464,"user_id":8711782,"display_name":"Locutus"},"score":0,"creation_date":1600971673,"post_id":52635656,"comment_id":113265528,"body_markdown":"This worked for me except I had to change the log method otherwise the stack trace was still written.  Changed to: log.warn(&quot;request_rejected: remote={}, user_agent={}, request_url={} reason={}&quot;,\n                                request.getRemoteHost(),  \n                                request.getHeader(HttpHeaders.USER_AGENT),\n                                request.getRequestURL(), \n                                e.getMessage());","body":"This worked for me except I had to change the log method otherwise the stack trace was still written.  Changed to: log.warn(&quot;request_rejected: remote={}, user_agent={}, request_url={} reason={}&quot;,                                 request.getRemoteHost(),                                   request.getHeader(HttpHeaders.USER_AGENT),                                 request.getRequestURL(),                                  e.getMessage());"},{"owner":{"account_id":1531824,"reputation":3794,"user_id":1428862,"display_name":"Scott Carlson"},"score":0,"creation_date":1647966408,"post_id":52635656,"comment_id":126502053,"body_markdown":"For me sendError() triggered the app&#39;s 404 page.  I didn&#39;t want that (because 99% of these requests are script kiddie attacks/probes), so I used setStatus(SC_NOT_FOUND) instead to just return an empty 404","body":"For me sendError() triggered the app&#39;s 404 page.  I didn&#39;t want that (because 99% of these requests are script kiddie attacks/probes), so I used setStatus(SC_NOT_FOUND) instead to just return an empty 404"}],"tags":[],"owner":{"account_id":1920070,"reputation":2269,"user_id":1731801,"display_name":"lanwen"},"comment_count":5,"down_vote_count":0,"up_vote_count":65,"is_accepted":false,"score":65,"last_activity_date":1538600562,"creation_date":1538600562,"answer_id":52635656,"question_id":51788764,"body_markdown":"It can be also handled by a simple filter, which will lead to 404 error response\r\n\r\n    @Component\r\n    @Slf4j\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)\r\n    public class LogAndSuppressRequestRejectedExceptionFilter extends GenericFilterBean {\r\n\r\n        @Override\r\n        public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {\r\n            try {\r\n                chain.doFilter(req, res);\r\n            } catch (RequestRejectedException e) {\r\n                HttpServletRequest request = (HttpServletRequest) req;\r\n                HttpServletResponse response = (HttpServletResponse) res;\r\n\r\n                log\r\n                    .warn(\r\n                            &quot;request_rejected: remote={}, user_agent={}, request_url={}&quot;,\r\n                            request.getRemoteHost(),  \r\n                            request.getHeader(HttpHeaders.USER_AGENT),\r\n                            request.getRequestURL(), \r\n                            e\r\n                    );\r\n\r\n                response.sendError(HttpServletResponse.SC_NOT_FOUND);\r\n            }\r\n        }\r\n    }","title":"How to intercept a RequestRejectedException in Spring?","body":"<p>It can be also handled by a simple filter, which will lead to 404 error response</p>\n\n<pre><code>@Component\n@Slf4j\n@Order(Ordered.HIGHEST_PRECEDENCE)\npublic class LogAndSuppressRequestRejectedExceptionFilter extends GenericFilterBean {\n\n    @Override\n    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {\n        try {\n            chain.doFilter(req, res);\n        } catch (RequestRejectedException e) {\n            HttpServletRequest request = (HttpServletRequest) req;\n            HttpServletResponse response = (HttpServletResponse) res;\n\n            log\n                .warn(\n                        \"request_rejected: remote={}, user_agent={}, request_url={}\",\n                        request.getRemoteHost(),  \n                        request.getHeader(HttpHeaders.USER_AGENT),\n                        request.getRequestURL(), \n                        e\n                );\n\n            response.sendError(HttpServletResponse.SC_NOT_FOUND);\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1541876,"reputation":1201,"user_id":1436313,"accept_rate":67,"display_name":"Sabareesh Kkanan"},"score":1,"creation_date":1555526905,"post_id":55420714,"comment_id":98146781,"body_markdown":"This is invoked twice","body":"This is invoked twice"},{"owner":{"account_id":6502278,"reputation":1449,"user_id":5032575,"display_name":"Ahmed Sayed"},"score":0,"creation_date":1555592898,"post_id":55420714,"comment_id":98170238,"body_markdown":"@SabareeshKkanan this is due to the default advice invocation of AspectJ advices. It is correct that the `handleRequestRejectedException()` method is invoked twice, but the actual method invocation of the `FilterChainProxy.doFilter()` is called only once. Take a look [here](https://stackoverflow.com/a/18054605) to understand more how the `@Around` interception works.","body":"@SabareeshKkanan this is due to the default advice invocation of AspectJ advices. It is correct that the <code>handleRequestRejectedException()</code> method is invoked twice, but the actual method invocation of the <code>FilterChainProxy.doFilter()</code> is called only once. Take a look <a href=\"https://stackoverflow.com/a/18054605\">here</a> to understand more how the <code>@Around</code> interception works."},{"owner":{"account_id":2939068,"reputation":2834,"user_id":2517384,"accept_rate":81,"display_name":"MeetJoeBlack"},"score":0,"creation_date":1606419799,"post_id":55420714,"comment_id":114964883,"body_markdown":"seems like doesn&#39;t work on Spring 5.2.9, NPE is thrown out of `GenericFilterBean#init` method, during context setup, since `Log logger` field is null for some unknown reasons","body":"seems like doesn&#39;t work on Spring 5.2.9, NPE is thrown out of <code>GenericFilterBean#init</code> method, during context setup, since <code>Log logger</code> field is null for some unknown reasons"}],"tags":[],"owner":{"account_id":6502278,"reputation":1449,"user_id":5032575,"display_name":"Ahmed Sayed"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1553873843,"creation_date":1553873190,"answer_id":55420714,"question_id":51788764,"body_markdown":"Another way to handle it is by using [Spring AOP][1]. We can create an advice around the [FilterChainProxy.doFilter()][2] method that catches any RequestRejectedException(s) thrown by the HttpFirewall and translates it into a 400 BAD_REQUEST\r\n\r\n    @Aspect\r\n    @Component\r\n    public class FilterChainProxyAdvice {\r\n    \r\n        @Around(&quot;execution(public void org.springframework.security.web.FilterChainProxy.doFilter(..))&quot;)\r\n        public void handleRequestRejectedException (ProceedingJoinPoint pjp) throws Throwable {\r\n            try {\r\n                pjp.proceed();\r\n            } catch (RequestRejectedException exception) {\r\n                HttpServletResponse response = (HttpServletResponse) pjp.getArgs()[1]);\r\n                response.sendError(HttpServletResponse.SC_BAD_REQUEST);\r\n            }\r\n        }\r\n    }\r\n\r\n  [1]: https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#aop-api\r\n  [2]: https://docs.spring.io/spring-security/site/docs/4.2.11.RELEASE/apidocs/org/springframework/security/web/FilterChainProxy.html#doFilter-javax.servlet.ServletRequest-javax.servlet.ServletResponse-javax.servlet.FilterChain-","title":"How to intercept a RequestRejectedException in Spring?","body":"<p>Another way to handle it is by using <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#aop-api\" rel=\"nofollow noreferrer\">Spring AOP</a>. We can create an advice around the <a href=\"https://docs.spring.io/spring-security/site/docs/4.2.11.RELEASE/apidocs/org/springframework/security/web/FilterChainProxy.html#doFilter-javax.servlet.ServletRequest-javax.servlet.ServletResponse-javax.servlet.FilterChain-\" rel=\"nofollow noreferrer\">FilterChainProxy.doFilter()</a> method that catches any RequestRejectedException(s) thrown by the HttpFirewall and translates it into a 400 BAD_REQUEST</p>\n\n<pre><code>@Aspect\n@Component\npublic class FilterChainProxyAdvice {\n\n    @Around(\"execution(public void org.springframework.security.web.FilterChainProxy.doFilter(..))\")\n    public void handleRequestRejectedException (ProceedingJoinPoint pjp) throws Throwable {\n        try {\n            pjp.proceed();\n        } catch (RequestRejectedException exception) {\n            HttpServletResponse response = (HttpServletResponse) pjp.getArgs()[1]);\n            response.sendError(HttpServletResponse.SC_BAD_REQUEST);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1577409,"reputation":16015,"user_id":1463522,"accept_rate":64,"display_name":"holmis83"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1574245368,"creation_date":1574245368,"answer_id":58952000,"question_id":51788764,"body_markdown":"A quite simple way is to use **web.xml**; specify an error page in that file:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;error-page&gt;\r\n      &lt;exception-type&gt;org.springframework.security.web.firewall.RequestRejectedException&lt;/exception-type&gt;\r\n      &lt;location&gt;/request-rejected&lt;/location&gt;\r\n    &lt;/error-page&gt;\r\n\r\nFor the specified path (location), add a mapping in a `@Controller`-annotated class:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    @RequestMapping(value = &quot;/request-rejected&quot;)\r\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\r\n    public @ResponseBody String handleRequestRejected(\r\n            @RequestAttribute(RequestDispatcher.ERROR_EXCEPTION) RequestRejectedException ex,\r\n            @RequestAttribute(RequestDispatcher.ERROR_REQUEST_URI) String uri) {\r\n\r\n        String msg = ex.getMessage();\r\n\r\n        // optionally log the message and requested URI (slf4j)\r\n        logger.warn(&quot;Request with URI [{}] rejected. {}&quot;, uri, msg);\r\n\r\n        return msg;\r\n    }","title":"How to intercept a RequestRejectedException in Spring?","body":"<p>A quite simple way is to use <strong>web.xml</strong>; specify an error page in that file:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;error-page&gt;\n  &lt;exception-type&gt;org.springframework.security.web.firewall.RequestRejectedException&lt;/exception-type&gt;\n  &lt;location&gt;/request-rejected&lt;/location&gt;\n&lt;/error-page&gt;\n</code></pre>\n\n<p>For the specified path (location), add a mapping in a <code>@Controller</code>-annotated class:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(value = \"/request-rejected\")\n@ResponseStatus(HttpStatus.BAD_REQUEST)\npublic @ResponseBody String handleRequestRejected(\n        @RequestAttribute(RequestDispatcher.ERROR_EXCEPTION) RequestRejectedException ex,\n        @RequestAttribute(RequestDispatcher.ERROR_REQUEST_URI) String uri) {\n\n    String msg = ex.getMessage();\n\n    // optionally log the message and requested URI (slf4j)\n    logger.warn(\"Request with URI [{}] rejected. {}\", uri, msg);\n\n    return msg;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1262597,"reputation":399,"user_id":1220520,"display_name":"ARK"},"score":5,"creation_date":1589198331,"post_id":61607977,"comment_id":109188456,"body_markdown":"Seems like RequestRejectedHandler is added only in spring security 5.4:\nhttps://github.com/spring-projects/spring-security/blob/master/web/src/main/java/org/springframework/security/web/firewall/RequestRejectedHandler.java\n@since 5.4","body":"Seems like RequestRejectedHandler is added only in spring security 5.4: <a href=\"https://github.com/spring-projects/spring-security/blob/master/web/src/main/java/org/springframework/security/web/firewall/RequestRejectedHandler.java\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-security/blob/master/web/s&zwnj;&#8203;rc/&hellip;</a> @since 5.4"},{"owner":{"account_id":6502278,"reputation":1449,"user_id":5032575,"display_name":"Ahmed Sayed"},"score":0,"creation_date":1589272392,"post_id":61607977,"comment_id":109219687,"body_markdown":"@ARK Yes, you&#39;re right, I will adapt it. Thank you!","body":"@ARK Yes, you&#39;re right, I will adapt it. Thank you!"},{"owner":{"account_id":308365,"reputation":2377,"user_id":620192,"accept_rate":64,"display_name":"ScrappyDev"},"score":0,"creation_date":1655410598,"post_id":61607977,"comment_id":128332401,"body_markdown":"Thanks, this made short work of the issue. For me I just did an in-line implementation of the response class and  use our own logging methods.","body":"Thanks, this made short work of the issue. For me I just did an in-line implementation of the response class and  use our own logging methods."},{"owner":{"account_id":3895994,"reputation":166,"user_id":3225025,"display_name":"AwkDenver"},"score":0,"creation_date":1675444241,"post_id":61607977,"comment_id":132937402,"body_markdown":"I was able to override the handle method to log the error and redirect to my 404 page.  I posted the code as another answer","body":"I was able to override the handle method to log the error and redirect to my 404 page.  I posted the code as another answer"}],"tags":[],"owner":{"account_id":6502278,"reputation":1449,"user_id":5032575,"display_name":"Ahmed Sayed"},"comment_count":4,"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1589272400,"creation_date":1588664046,"answer_id":61607977,"question_id":51788764,"body_markdown":"For Spring security versions `5.4` and above, you could simply create a bean of the type `RequestRejectedHandler` that will be injected in the Spring security filter chain\r\n```java\r\nimport org.springframework.security.web.firewall.RequestRejectedHandler;\r\nimport org.springframework.security.web.firewall.HttpStatusRequestRejectedHandler;\r\n\r\n@Bean\r\nRequestRejectedHandler requestRejectedHandler() {\r\n   // sends an error response with a configurable status code (default is 400 BAD_REQUEST)\r\n   // we can pass a different value in the constructor\r\n   return new HttpStatusRequestRejectedHandler();\r\n}\r\n```\r\n","title":"How to intercept a RequestRejectedException in Spring?","body":"<p>For Spring security versions <code>5.4</code> and above, you could simply create a bean of the type <code>RequestRejectedHandler</code> that will be injected in the Spring security filter chain</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.security.web.firewall.RequestRejectedHandler;\nimport org.springframework.security.web.firewall.HttpStatusRequestRejectedHandler;\n\n@Bean\nRequestRejectedHandler requestRejectedHandler() {\n   // sends an error response with a configurable status code (default is 400 BAD_REQUEST)\n   // we can pass a different value in the constructor\n   return new HttpStatusRequestRejectedHandler();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2369743,"reputation":7285,"user_id":2074605,"accept_rate":100,"display_name":"Parker"},"score":0,"creation_date":1598544399,"post_id":63619590,"comment_id":112500237,"body_markdown":"Thanks for the update. I&#39;ll hold off on migrating to Spring 5 until this is included in a release. In the meantime, my above strategy (see accepted solution) has been working flawlessly for over 2 years.","body":"Thanks for the update. I&#39;ll hold off on migrating to Spring 5 until this is included in a release. In the meantime, my above strategy (see accepted solution) has been working flawlessly for over 2 years."}],"tags":[],"owner":{"account_id":10880077,"reputation":1286,"user_id":7999311,"display_name":"Adam Ostrožl&#237;k"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1598543362,"creation_date":1598542911,"answer_id":63619590,"question_id":51788764,"body_markdown":"I see some working solution in recent github change in [this commit][1]\r\n\r\nIt should work if you register bean of type `RequestRejectedHandler` or as I see it, there is also going to be an integration via `WebSecurity` in `WebSecurityConfigurerAdapter`. Unfornunately, this change is not probably included in 2.3.3.RELEASE using dependency management. It should be present in Spring Security Config 5.4.0-M1. For dependency management, it is version 2.4.0-M1. \r\n\r\nSooner or later, people coming across this answer should see this change in standard release.\r\n\r\n  [1]: https://github.com/spring-projects/spring-security/commit/b826c798f760546e77836f28aa4a80f639a8519a#diff-abdb3904d8835bf8660c11d7d644b0e8","title":"How to intercept a RequestRejectedException in Spring?","body":"<p>I see some working solution in recent github change in <a href=\"https://github.com/spring-projects/spring-security/commit/b826c798f760546e77836f28aa4a80f639a8519a#diff-abdb3904d8835bf8660c11d7d644b0e8\" rel=\"nofollow noreferrer\">this commit</a></p>\n<p>It should work if you register bean of type <code>RequestRejectedHandler</code> or as I see it, there is also going to be an integration via <code>WebSecurity</code> in <code>WebSecurityConfigurerAdapter</code>. Unfornunately, this change is not probably included in 2.3.3.RELEASE using dependency management. It should be present in Spring Security Config 5.4.0-M1. For dependency management, it is version 2.4.0-M1.</p>\n<p>Sooner or later, people coming across this answer should see this change in standard release.</p>\n"},{"tags":[],"owner":{"account_id":3484417,"reputation":458,"user_id":2915705,"display_name":" Martin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631853318,"creation_date":1631853318,"answer_id":69217828,"question_id":51788764,"body_markdown":"Our&#39;s was spring-webmvc (4.3.25.RELEASE) GUI using spring-security-core \r\n(4.2.13.RELEASE) and the issue was due to url string containing `&quot;;jsessionid=D3A0470674704B75756AA10F50AA2CFC&quot;` with semicolon as one of its parameters. \r\n\r\nThe error `org.springframework.security.web.firewall.RequestRejectedException: The request was rejected because the URL contained a potentially malicious String &quot;;&quot;` use to occur only when web page loads for the first time causing all sorts of CSS format issue with images not getting loaded, color and fonts not being set properly. However, after refresh of the same page or clicking any of the navigation links the next page use to load fine with all CSS implemented properly. Also, this error `RequestRejectedException` badly polluted the logs.\r\n\r\nWe wanted to handle this issue such that when a new session is created, the generated cookie handles the session with jsessionid and not the query string like how it does for the 2nd time onwards. \r\n\r\nMy solution was derived from implementing the filter as described above in https://stackoverflow.com/a/52635656/2915705 but instead of sending it to an error page check for session and redirect it to encoded  URL as described in https://stackoverflow.com/a/4019476/2915705. After this solution we never received the `RequestRejectedException` or CSS issue even for new sessions or first time page load.\r\n\r\nThe updated `LogAndSuppressRequestRejectedExceptionFilter` can be seen below\r\n\r\n    @Component(&quot;logAndSuppressRequestRejectedExceptionFilter&quot;)\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)\r\n    public class LogAndSuppressRequestRejectedExceptionFilter extends GenericFilterBean {\r\n    \tprivate static final Logger logger = LoggerFactory.getLogger(LogAndSuppressRequestRejectedExceptionFilter.class);\r\n    \r\n    \t@Override\r\n    \tpublic void doFilter(ServletRequest req, ServletResponse res, FilterChain chain)\r\n    \t\t\tthrows IOException, ServletException {\r\n    \t\ttry {\r\n    \t\t\tHttpServletRequest httpRequest = (HttpServletRequest) req;\r\n    \t\t\tHttpServletResponse httpResponse = (HttpServletResponse) res;\r\n    \t\t\tHttpSession session = httpRequest.getSession();\r\n    \r\n    \t\t\tif (session.isNew()) {\r\n    \t\t\t\t// New session? OK, redirect to encoded URL with jsessionid in it (and\r\n    \t\t\t\t// implicitly also set cookie).\r\n    \t\t\t\tlogger.debug(&quot;New session - redirect to encoded url&quot;);\r\n    \t\t\t\thttpResponse.sendRedirect(httpResponse.encodeRedirectURL(httpRequest.getRequestURI()));\r\n    \t\t\t\treturn;\r\n    \t\t\t} else if (session.getAttribute(&quot;verified&quot;) == null) {\r\n    \t\t\t\t// Session has not been verified yet? OK, mark it verified so that we don&#39;t need\r\n    \t\t\t\t// to repeat this.\r\n    \t\t\t\tlogger.debug(&quot;Setting session to verified&quot;);\r\n    \t\t\t\tsession.setAttribute(&quot;verified&quot;, true);\r\n    \t\t\t\tif (httpRequest.isRequestedSessionIdFromCookie()) {\r\n    \t\t\t\t\t// Supports cookies? OK, redirect to unencoded URL to get rid of jsessionid in\r\n    \t\t\t\t\t// URL.\r\n    \t\t\t\t\tlogger.debug(&quot;redirect to unencoded URL to get rid of jsessionid in url&quot;);\r\n    \t\t\t\t\thttpResponse.sendRedirect(httpRequest.getRequestURI().split(&quot;;&quot;)[0]);\r\n    \t\t\t\t\treturn;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \r\n    \t\t\tchain.doFilter(req, res);\r\n    \r\n    \t\t} catch (RequestRejectedException ex) {\r\n    \t\t\tHttpServletRequest request = (HttpServletRequest) req;\r\n    \t\t\tlogger.warn(&quot;request_rejected: remote={}, user_agent={}, request_url={}&quot;, request.getRemoteHost(),\r\n    \t\t\t\t\trequest.getHeader(HttpHeaders.USER_AGENT), request.getRequestURL(), ex.getMessage());\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n","title":"How to intercept a RequestRejectedException in Spring?","body":"<p>Our's was spring-webmvc (4.3.25.RELEASE) GUI using spring-security-core\n(4.2.13.RELEASE) and the issue was due to url string containing <code>&quot;;jsessionid=D3A0470674704B75756AA10F50AA2CFC&quot;</code> with semicolon as one of its parameters.</p>\n<p>The error <code>org.springframework.security.web.firewall.RequestRejectedException: The request was rejected because the URL contained a potentially malicious String &quot;;&quot;</code> use to occur only when web page loads for the first time causing all sorts of CSS format issue with images not getting loaded, color and fonts not being set properly. However, after refresh of the same page or clicking any of the navigation links the next page use to load fine with all CSS implemented properly. Also, this error <code>RequestRejectedException</code> badly polluted the logs.</p>\n<p>We wanted to handle this issue such that when a new session is created, the generated cookie handles the session with jsessionid and not the query string like how it does for the 2nd time onwards.</p>\n<p>My solution was derived from implementing the filter as described above in <a href=\"https://stackoverflow.com/a/52635656/2915705\">https://stackoverflow.com/a/52635656/2915705</a> but instead of sending it to an error page check for session and redirect it to encoded  URL as described in <a href=\"https://stackoverflow.com/a/4019476/2915705\">https://stackoverflow.com/a/4019476/2915705</a>. After this solution we never received the <code>RequestRejectedException</code> or CSS issue even for new sessions or first time page load.</p>\n<p>The updated <code>LogAndSuppressRequestRejectedExceptionFilter</code> can be seen below</p>\n<pre><code>@Component(&quot;logAndSuppressRequestRejectedExceptionFilter&quot;)\n@Order(Ordered.HIGHEST_PRECEDENCE)\npublic class LogAndSuppressRequestRejectedExceptionFilter extends GenericFilterBean {\n    private static final Logger logger = LoggerFactory.getLogger(LogAndSuppressRequestRejectedExceptionFilter.class);\n\n    @Override\n    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain)\n            throws IOException, ServletException {\n        try {\n            HttpServletRequest httpRequest = (HttpServletRequest) req;\n            HttpServletResponse httpResponse = (HttpServletResponse) res;\n            HttpSession session = httpRequest.getSession();\n\n            if (session.isNew()) {\n                // New session? OK, redirect to encoded URL with jsessionid in it (and\n                // implicitly also set cookie).\n                logger.debug(&quot;New session - redirect to encoded url&quot;);\n                httpResponse.sendRedirect(httpResponse.encodeRedirectURL(httpRequest.getRequestURI()));\n                return;\n            } else if (session.getAttribute(&quot;verified&quot;) == null) {\n                // Session has not been verified yet? OK, mark it verified so that we don't need\n                // to repeat this.\n                logger.debug(&quot;Setting session to verified&quot;);\n                session.setAttribute(&quot;verified&quot;, true);\n                if (httpRequest.isRequestedSessionIdFromCookie()) {\n                    // Supports cookies? OK, redirect to unencoded URL to get rid of jsessionid in\n                    // URL.\n                    logger.debug(&quot;redirect to unencoded URL to get rid of jsessionid in url&quot;);\n                    httpResponse.sendRedirect(httpRequest.getRequestURI().split(&quot;;&quot;)[0]);\n                    return;\n                }\n            }\n\n            chain.doFilter(req, res);\n\n        } catch (RequestRejectedException ex) {\n            HttpServletRequest request = (HttpServletRequest) req;\n            logger.warn(&quot;request_rejected: remote={}, user_agent={}, request_url={}&quot;, request.getRemoteHost(),\n                    request.getHeader(HttpHeaders.USER_AGENT), request.getRequestURL(), ex.getMessage());\n            return;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3895994,"reputation":166,"user_id":3225025,"display_name":"AwkDenver"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675443999,"creation_date":1675443999,"answer_id":75338927,"question_id":51788764,"body_markdown":"In spring security 5.7.6 I was able to use this code to log the error and redirect to the 404 page\r\n\r\n\r\n\t@Bean\r\n\tpublic RequestRejectedHandler requestRejectedHandler() {\r\n\t\tHttpStatusRequestRejectedHandler rejectedHandler = new HttpStatusRequestRejectedHandler() {\r\n\t\t\t@Override\r\n\t\t\tpublic void handle(HttpServletRequest request, HttpServletResponse response, RequestRejectedException requestRejectedException) throws IOException {\r\n\t\t\t\tlog.info(requestRejectedException.getMessage() + &quot; for &quot; + request.getRequestURL());\r\n\t\t\t\tresponse.sendRedirect(&quot;/404&quot;);\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn rejectedHandler;\r\n\t}","title":"How to intercept a RequestRejectedException in Spring?","body":"<p>In spring security 5.7.6 I was able to use this code to log the error and redirect to the 404 page</p>\n<pre><code>@Bean\npublic RequestRejectedHandler requestRejectedHandler() {\n    HttpStatusRequestRejectedHandler rejectedHandler = new HttpStatusRequestRejectedHandler() {\n        @Override\n        public void handle(HttpServletRequest request, HttpServletResponse response, RequestRejectedException requestRejectedException) throws IOException {\n            log.info(requestRejectedException.getMessage() + &quot; for &quot; + request.getRequestURL());\n            response.sendRedirect(&quot;/404&quot;);\n        }\n    };\n    return rejectedHandler;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4630254,"reputation":1567,"user_id":3752988,"accept_rate":33,"display_name":"bladekp"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691143260,"creation_date":1691143260,"answer_id":76834872,"question_id":51788764,"body_markdown":"Easiest ootb solution is to create a bean of `RequestRejectedHandler` and do what you want with that exception:\r\n\r\n```\r\n@Bean\r\npublic RequestRejectedHandler handler() {\r\n    return (request, response, exception) -&gt; response.sendError(HttpStatus.FORBIDDEN.value());\r\n}\r\n```\r\nIn above case this exception will cause in 403 http response status. In this place you can additionally add your logger (`logger.warn(...)`), send redirection to error page (`response.sendRedirect(&quot;/500&quot;)`), set the headers etc.","title":"How to intercept a RequestRejectedException in Spring?","body":"<p>Easiest ootb solution is to create a bean of <code>RequestRejectedHandler</code> and do what you want with that exception:</p>\n<pre><code>@Bean\npublic RequestRejectedHandler handler() {\n    return (request, response, exception) -&gt; response.sendError(HttpStatus.FORBIDDEN.value());\n}\n</code></pre>\n<p>In above case this exception will cause in 403 http response status. In this place you can additionally add your logger (<code>logger.warn(...)</code>), send redirection to error page (<code>response.sendRedirect(&quot;/500&quot;)</code>), set the headers etc.</p>\n"}],"owner":{"account_id":2369743,"reputation":7285,"user_id":2074605,"accept_rate":100,"display_name":"Parker"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38356,"favorite_count":0,"down_vote_count":0,"up_vote_count":52,"accepted_answer_id":51800972,"answer_count":10,"score":52,"last_activity_date":1691143260,"creation_date":1533911591,"question_id":51788764,"body_markdown":"I am seeing *a ton* of `RequestRejectedException` entries in my Tomcat log (sample pasted below). These started appearing in my log file after a minor version upgrade (Spring Security 4.2.4, IIRC) a few months ago, so this is clearly a new security feature in Spring that is enabled by default. A similar issue is [reported here][1], but my question involves specifically how to intercept these exceptions in a controller. There is a Spring Security bug documented for this problem ([Provide a way to handle RequestRejectedException][4]). However, they aren&#39;t targeting a fix for this problem until Spring 5.1.\r\n\r\nI understand [why these exceptions are being thrown][2], and I do not want to [disable this security feature][3].\r\n\r\nI want to gain some control over this feature so that:\r\n\r\n 1. I know I&#39;m not blocking legitimate users from my site.\r\n 1. I can see what requests are triggering this (are they SQL Injection attacks?)\r\n 1. I can adjust the server response. The Spring Security firewall dumps a complete stack trace to the web client (information disclosure), along with a `500 Internal Server Error` (which is wildly incorrect, this should be a `400 Bad Request`).\r\n\r\nI want to find a way to log the URL that was requested, but also suppress the stack trace specifically for these exceptions because they are polluting my log files without giving me any helpful information. Optimally, I&#39;d like to intercept these exceptions and handle them in my application layer instead of reporting them in the Tomcat log at all.\r\n\r\nFor example, this is one of thousands of these log entries that appear every day in my `catalina.out`:\r\n\r\n    Aug 10, 2018 2:01:36 PM org.apache.catalina.core.StandardWrapperValve invoke\r\n    SEVERE: Servlet.service() for servlet [dispatcher] in context with path [] threw exception\r\n    org.springframework.security.web.firewall.RequestRejectedException: The request was rejected because the URL contained a potentially malicious String &quot;;&quot;\r\n            at org.springframework.security.web.firewall.StrictHttpFirewall.rejectedBlacklistedUrls(StrictHttpFirewall.java:265)\r\n            at org.springframework.security.web.firewall.StrictHttpFirewall.getFirewalledRequest(StrictHttpFirewall.java:245)\r\n            at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:193)\r\n            at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:177)\r\n            at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:347)\r\n            at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:263)\r\n            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n            at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)\r\n            at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\r\n            at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:496)\r\n            at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)\r\n            at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\r\n            at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)\r\n            at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)\r\n            at org.apache.coyote.ajp.AjpProcessor.service(AjpProcessor.java:486)\r\n            at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\r\n            at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:790)\r\n            at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1459)\r\n            at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n            at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n            at java.lang.Thread.run(Thread.java:748)\r\n\r\nI&#39;m seeing over 3,200 of these in a two day period, and it has quickly become the single largest contributor to my `catalina.out` log file, to the point that it prevents me from seeing other, legitimate problems. Essentially, this new Spring Security feature is a form of built-in Denial-of-Service, and it has wasted hours of my time since April. I am not saying that it is not an important feature, simply that the default implementation is completely botched, and I want to find a way gain some control over it, both as a developer and as a systems administrator.\r\n\r\nI use a custom Error Controller for intercepting many other Exception types (including `IOException`) in Spring. However, `RequestRejectedException` seems to be falling through for some reason.\r\n\r\nThis is the relevant part of my `ErrorController.java`, to give an idea of what I&#39;m trying to accomplish:\r\n\r\n    @ControllerAdvice\r\n    public final class ErrorController\r\n    {\r\n        /**\r\n         * Logger.\r\n         */\r\n        private static final Logger LOGGER = Logger.getLogger(ErrorController.class.getName());\r\n    \r\n        /**\r\n         * Generates an Error page by intercepting exceptions generated from HttpFirewall.\r\n         *\r\n         * @param ex A RequestRejectedException exception.\r\n         * @return The tile definition name for the page.\r\n         */\r\n        @ExceptionHandler(RequestRejectedException.class)\r\n        @ResponseStatus(HttpStatus.BAD_REQUEST)\r\n        public String handleRequestRejectedException(final HttpServletRequest request, final RequestRejectedException ex)\r\n        {\r\n            if (LOGGER.isLoggable(Level.INFO))\r\n            {\r\n                LOGGER.log(Level.INFO, &quot;Request Rejected&quot;, ex);\r\n            }\r\n\r\n            LOGGER.log(Level.WARNING, &quot;Rejected request for [&quot; + request.getRequestURL().toString() + &quot;]. Reason: &quot; + ex.getMessage());\r\n            return &quot;errorPage&quot;;\r\n        }\r\n    \r\n        /**\r\n         * Generates a Server Error page.\r\n         *\r\n         * @param ex An exception.\r\n         * @return The tile definition name for the page.\r\n         */\r\n        @ExceptionHandler(Exception.class)\r\n        @ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)\r\n        public String handleException(final Exception ex)\r\n        {\r\n            if (LOGGER.isLoggable(Level.SEVERE))\r\n            {\r\n                LOGGER.log(Level.SEVERE, &quot;Server Error&quot;, ex);\r\n            }\r\n    \r\n            return &quot;errorPage&quot;;\r\n        }\r\n    }\r\n\r\nThis error controller works for many exceptions. For example, it successfully intercepted this `IllegalStateException`:\r\n\r\n    Aug 05, 2018 7:50:30 AM com.mycompany.spring.controller.ErrorController handleException\r\n    SEVERE: Server Error\r\n    java.lang.IllegalStateException: Cannot create a session after the response has been committed\r\n            at org.apache.catalina.connector.Request.doGetSession(Request.java:2999)\r\n    ...\r\n\r\nHowever, this is not intercepting `RequestRejectedException` (as indicated by the lack of &quot;Server Error&quot; in the first log sample above).\r\n\r\nHow can I intercept `RequestRejectedException` in an error controller?\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/48453980/2074605\r\n  [2]: https://stackoverflow.com/q/48580584/2074605\r\n  [3]: https://stackoverflow.com/a/48636757/2074605\r\n  [4]: https://github.com/spring-projects/spring-security/issues/5007","title":"How to intercept a RequestRejectedException in Spring?","body":"<p>I am seeing <em>a ton</em> of <code>RequestRejectedException</code> entries in my Tomcat log (sample pasted below). These started appearing in my log file after a minor version upgrade (Spring Security 4.2.4, IIRC) a few months ago, so this is clearly a new security feature in Spring that is enabled by default. A similar issue is <a href=\"https://stackoverflow.com/q/48453980/2074605\">reported here</a>, but my question involves specifically how to intercept these exceptions in a controller. There is a Spring Security bug documented for this problem (<a href=\"https://github.com/spring-projects/spring-security/issues/5007\" rel=\"noreferrer\">Provide a way to handle RequestRejectedException</a>). However, they aren't targeting a fix for this problem until Spring 5.1.</p>\n\n<p>I understand <a href=\"https://stackoverflow.com/q/48580584/2074605\">why these exceptions are being thrown</a>, and I do not want to <a href=\"https://stackoverflow.com/a/48636757/2074605\">disable this security feature</a>.</p>\n\n<p>I want to gain some control over this feature so that:</p>\n\n<ol>\n<li>I know I'm not blocking legitimate users from my site.</li>\n<li>I can see what requests are triggering this (are they SQL Injection attacks?)</li>\n<li>I can adjust the server response. The Spring Security firewall dumps a complete stack trace to the web client (information disclosure), along with a <code>500 Internal Server Error</code> (which is wildly incorrect, this should be a <code>400 Bad Request</code>).</li>\n</ol>\n\n<p>I want to find a way to log the URL that was requested, but also suppress the stack trace specifically for these exceptions because they are polluting my log files without giving me any helpful information. Optimally, I'd like to intercept these exceptions and handle them in my application layer instead of reporting them in the Tomcat log at all.</p>\n\n<p>For example, this is one of thousands of these log entries that appear every day in my <code>catalina.out</code>:</p>\n\n<pre><code>Aug 10, 2018 2:01:36 PM org.apache.catalina.core.StandardWrapperValve invoke\nSEVERE: Servlet.service() for servlet [dispatcher] in context with path [] threw exception\norg.springframework.security.web.firewall.RequestRejectedException: The request was rejected because the URL contained a potentially malicious String \";\"\n        at org.springframework.security.web.firewall.StrictHttpFirewall.rejectedBlacklistedUrls(StrictHttpFirewall.java:265)\n        at org.springframework.security.web.firewall.StrictHttpFirewall.getFirewalledRequest(StrictHttpFirewall.java:245)\n        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:193)\n        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:177)\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:347)\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:263)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:496)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)\n        at org.apache.coyote.ajp.AjpProcessor.service(AjpProcessor.java:486)\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:790)\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1459)\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n        at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n\n<p>I'm seeing over 3,200 of these in a two day period, and it has quickly become the single largest contributor to my <code>catalina.out</code> log file, to the point that it prevents me from seeing other, legitimate problems. Essentially, this new Spring Security feature is a form of built-in Denial-of-Service, and it has wasted hours of my time since April. I am not saying that it is not an important feature, simply that the default implementation is completely botched, and I want to find a way gain some control over it, both as a developer and as a systems administrator.</p>\n\n<p>I use a custom Error Controller for intercepting many other Exception types (including <code>IOException</code>) in Spring. However, <code>RequestRejectedException</code> seems to be falling through for some reason.</p>\n\n<p>This is the relevant part of my <code>ErrorController.java</code>, to give an idea of what I'm trying to accomplish:</p>\n\n<pre><code>@ControllerAdvice\npublic final class ErrorController\n{\n    /**\n     * Logger.\n     */\n    private static final Logger LOGGER = Logger.getLogger(ErrorController.class.getName());\n\n    /**\n     * Generates an Error page by intercepting exceptions generated from HttpFirewall.\n     *\n     * @param ex A RequestRejectedException exception.\n     * @return The tile definition name for the page.\n     */\n    @ExceptionHandler(RequestRejectedException.class)\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\n    public String handleRequestRejectedException(final HttpServletRequest request, final RequestRejectedException ex)\n    {\n        if (LOGGER.isLoggable(Level.INFO))\n        {\n            LOGGER.log(Level.INFO, \"Request Rejected\", ex);\n        }\n\n        LOGGER.log(Level.WARNING, \"Rejected request for [\" + request.getRequestURL().toString() + \"]. Reason: \" + ex.getMessage());\n        return \"errorPage\";\n    }\n\n    /**\n     * Generates a Server Error page.\n     *\n     * @param ex An exception.\n     * @return The tile definition name for the page.\n     */\n    @ExceptionHandler(Exception.class)\n    @ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)\n    public String handleException(final Exception ex)\n    {\n        if (LOGGER.isLoggable(Level.SEVERE))\n        {\n            LOGGER.log(Level.SEVERE, \"Server Error\", ex);\n        }\n\n        return \"errorPage\";\n    }\n}\n</code></pre>\n\n<p>This error controller works for many exceptions. For example, it successfully intercepted this <code>IllegalStateException</code>:</p>\n\n<pre><code>Aug 05, 2018 7:50:30 AM com.mycompany.spring.controller.ErrorController handleException\nSEVERE: Server Error\njava.lang.IllegalStateException: Cannot create a session after the response has been committed\n        at org.apache.catalina.connector.Request.doGetSession(Request.java:2999)\n...\n</code></pre>\n\n<p>However, this is not intercepting <code>RequestRejectedException</code> (as indicated by the lack of \"Server Error\" in the first log sample above).</p>\n\n<p>How can I intercept <code>RequestRejectedException</code> in an error controller?</p>\n"},{"tags":["java","bit-manipulation"],"comments":[{"owner":{"account_id":196869,"reputation":402550,"user_id":440558,"accept_rate":75,"display_name":"Some programmer dude"},"score":0,"creation_date":1691142836,"post_id":76834773,"comment_id":135454975,"body_markdown":"I&#39;m guessing it&#39;s all to do with [two&#39;s complement](https://en.wikipedia.org/wiki/Two%27s_complement) which is the common way to store negative integers.","body":"I&#39;m guessing it&#39;s all to do with <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">two&#39;s complement</a> which is the common way to store negative integers."}],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691142887,"creation_date":1691142887,"answer_id":76834820,"question_id":76834773,"body_markdown":"Your constants are ints. 0xFFFFFFFF and 0x00000000FFFFFFFF are both -1. These are equivalent to 0xFFFFFFFFFFFFFFFFL. Use 0xFFFFFFFF**L** and 0x00000000FFFFFFFF**L** instead and you&#39;ll see the results you want.","title":"Java bitwise AND incorrect output?","body":"<p>Your constants are ints. 0xFFFFFFFF and 0x00000000FFFFFFFF are both -1. These are equivalent to 0xFFFFFFFFFFFFFFFFL. Use 0xFFFFFFFF<strong>L</strong> and 0x00000000FFFFFFFF<strong>L</strong> instead and you'll see the results you want.</p>\n"},{"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1691142947,"creation_date":1691142947,"answer_id":76834827,"question_id":76834773,"body_markdown":"`0xFFFFFFFF` and `0x00000000FFFFFFFF` are both `int` literals, representing the value -1. \r\n\r\nWhen `&amp;` is applied on a `long` and an `int`, the `int` undergoes [numeric promotion][1], and gets converted to a `long`. \r\n\r\n&gt; Otherwise, if any expression is of type long, then the promoted type is long, and other expressions that are not of type long undergo [widening primitive conversion][2] to `long`.\r\n\r\nDuring this conversion, the value is sign-extended, \r\n\r\n&gt; A widening conversion of a signed integer value to an integral type T simply sign-extends the two&#39;s-complement representation of the integer value to fill the wider format.\r\n\r\nso you still get the same value (-1) as a `long`. -1&#39;s bits are all 1, so you get the same result.\r\n\r\nTo get the intended result, add the `L` suffix to these literals, so they are actually `long`s, and does not get sign-extended.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.6\r\n  [2]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.1.2","title":"Java bitwise AND incorrect output?","body":"<p><code>0xFFFFFFFF</code> and <code>0x00000000FFFFFFFF</code> are both <code>int</code> literals, representing the value -1.</p>\n<p>When <code>&amp;</code> is applied on a <code>long</code> and an <code>int</code>, the <code>int</code> undergoes <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.6\" rel=\"nofollow noreferrer\">numeric promotion</a>, and gets converted to a <code>long</code>.</p>\n<blockquote>\n<p>Otherwise, if any expression is of type long, then the promoted type is long, and other expressions that are not of type long undergo <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.1.2\" rel=\"nofollow noreferrer\">widening primitive conversion</a> to <code>long</code>.</p>\n</blockquote>\n<p>During this conversion, the value is sign-extended,</p>\n<blockquote>\n<p>A widening conversion of a signed integer value to an integral type T simply sign-extends the two's-complement representation of the integer value to fill the wider format.</p>\n</blockquote>\n<p>so you still get the same value (-1) as a <code>long</code>. -1's bits are all 1, so you get the same result.</p>\n<p>To get the intended result, add the <code>L</code> suffix to these literals, so they are actually <code>long</code>s, and does not get sign-extended.</p>\n"}],"owner":{"account_id":5964120,"reputation":4275,"user_id":4688321,"display_name":"kiner_shah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":76834827,"answer_count":2,"score":0,"last_activity_date":1691142947,"creation_date":1691142491,"question_id":76834773,"body_markdown":"Java gives incorrect output when using Bitwise AND:\r\n```\r\nclass Main\r\n{\r\n    public static void main(String[] args)\r\n    {\r\n        long a = -26000;\r\n        System.out.printf(&quot;%X\\n&quot;, a);\r\n        // upper 32-bits are 0 (implicitly)\r\n        System.out.printf(&quot;%X\\n&quot;, (a &amp; 0xFFFFFFFF));\r\n        // upper 32-bits are 0 (explicitly specified)\r\n        System.out.printf(&quot;%X\\n&quot;, (a &amp; 0x00000000FFFFFFFF));\r\n    }\r\n}\r\n/*\r\nOutput:\r\nFFFFFFFFFFFF9A70\r\nFFFFFFFFFFFF9A70\r\nFFFFFFFFFFFF9A70\r\n*/\r\n```\r\nCode link: https://godbolt.org/z/Y8q3MhdK5\r\n\r\nAny ideas why?","title":"Java bitwise AND incorrect output?","body":"<p>Java gives incorrect output when using Bitwise AND:</p>\n<pre><code>class Main\n{\n    public static void main(String[] args)\n    {\n        long a = -26000;\n        System.out.printf(&quot;%X\\n&quot;, a);\n        // upper 32-bits are 0 (implicitly)\n        System.out.printf(&quot;%X\\n&quot;, (a &amp; 0xFFFFFFFF));\n        // upper 32-bits are 0 (explicitly specified)\n        System.out.printf(&quot;%X\\n&quot;, (a &amp; 0x00000000FFFFFFFF));\n    }\n}\n/*\nOutput:\nFFFFFFFFFFFF9A70\nFFFFFFFFFFFF9A70\nFFFFFFFFFFFF9A70\n*/\n</code></pre>\n<p>Code link: <a href=\"https://godbolt.org/z/Y8q3MhdK5\" rel=\"nofollow noreferrer\">https://godbolt.org/z/Y8q3MhdK5</a></p>\n<p>Any ideas why?</p>\n"},{"tags":["java","scala"],"answers":[{"comments":[{"owner":{"account_id":4332088,"reputation":556,"user_id":3918269,"display_name":"wiesiu_p"},"score":0,"creation_date":1701691657,"post_id":44993034,"comment_id":136803050,"body_markdown":"no example how to play with objects","body":"no example how to play with objects"}],"tags":[],"owner":{"account_id":1656390,"reputation":859,"user_id":1525835,"accept_rate":75,"display_name":"Pedro Hidalgo"},"comment_count":1,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1499575155,"creation_date":1499575155,"answer_id":44993034,"question_id":44993014,"body_markdown":"Yes, Scala classes can be called from Java and vice versa.\r\n\r\nThe below text is taken from: [Scala FAQs][1]\r\n\r\n&gt; What does it mean that Scala is compatible with Java?\r\n&gt; \r\n&gt; The standard Scala backend is a Java VM. Scala classes are Java classes, and vice versa. You can call the methods of either language from methods in the other one. You can extend Java classes in Scala, and vice versa. The main limitation is that some Scala features do not have equivalents in Java, for example traits.\r\n\r\nThe following post also could be helpful to you: [how to call Scala from Java][2]\r\n\r\n\r\n  [1]: http://www.scala-lang.org/old/faq/4\r\n  [2]: http://blog.muhuk.com/2016/05/24/how_to_call_scala_from_java__using_scala_classes.html#.WWGyrtPytTY","title":"Can Scala classes be used in Java?","body":"<p>Yes, Scala classes can be called from Java and vice versa.</p>\n\n<p>The below text is taken from: <a href=\"http://www.scala-lang.org/old/faq/4\" rel=\"noreferrer\">Scala FAQs</a></p>\n\n<blockquote>\n  <p>What does it mean that Scala is compatible with Java?</p>\n  \n  <p>The standard Scala backend is a Java VM. Scala classes are Java classes, and vice versa. You can call the methods of either language from methods in the other one. You can extend Java classes in Scala, and vice versa. The main limitation is that some Scala features do not have equivalents in Java, for example traits.</p>\n</blockquote>\n\n<p>The following post also could be helpful to you: <a href=\"http://blog.muhuk.com/2016/05/24/how_to_call_scala_from_java__using_scala_classes.html#.WWGyrtPytTY\" rel=\"noreferrer\">how to call Scala from Java</a></p>\n"},{"comments":[{"owner":{"account_id":4332088,"reputation":556,"user_id":3918269,"display_name":"wiesiu_p"},"score":0,"creation_date":1701691681,"post_id":44993460,"comment_id":136803058,"body_markdown":"no code example","body":"no code example"}],"tags":[],"owner":{"account_id":8540808,"reputation":361,"user_id":6401022,"accept_rate":80,"display_name":"Stefan Fischer"},"comment_count":1,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1499579983,"creation_date":1499579983,"answer_id":44993460,"question_id":44993014,"body_markdown":"Yes. If you want to do this, there are a few things you might want to remember:\r\n\r\n- Do not use operators in your method names or provide a wordy alternative. Operator names can be called from Java but are mangled into somethings very ugly.\r\n- Java users might expect Java style getters and setters. You can produce those automatically by adding `@BeanProperty` annotation to fields.\r\n- In the same way Java user might be accustomed to factory methods called `ClassName.of` where Scala uses `.apply`. Those you have to provide by hand, if you want to provide that service. ","title":"Can Scala classes be used in Java?","body":"<p>Yes. If you want to do this, there are a few things you might want to remember:</p>\n\n<ul>\n<li>Do not use operators in your method names or provide a wordy alternative. Operator names can be called from Java but are mangled into somethings very ugly.</li>\n<li>Java users might expect Java style getters and setters. You can produce those automatically by adding <code>@BeanProperty</code> annotation to fields.</li>\n<li>In the same way Java user might be accustomed to factory methods called <code>ClassName.of</code> where Scala uses <code>.apply</code>. Those you have to provide by hand, if you want to provide that service. </li>\n</ul>\n"}],"owner":{"account_id":1192551,"reputation":307,"user_id":1165008,"accept_rate":33,"display_name":"Kannan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10188,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":2,"score":10,"last_activity_date":1691142681,"creation_date":1499574834,"question_id":44993014,"body_markdown":"    class Wish{\r\n        val s = &quot;Hello! User.  Wish you a Great day.&quot;\r\n    }\r\n    \r\n    object Wish{\r\n        def main(args: Array[String]){\r\n            val w = new Wish()\r\n            println(&quot;Value - &quot; + w.s )\r\n       }\r\n    }\r\n\r\nJava classes can be used in Scala.  Similarly,  can Scala classes be used in Java?\r\n","title":"Can Scala classes be used in Java?","body":"<pre><code>class Wish{\n    val s = \"Hello! User.  Wish you a Great day.\"\n}\n\nobject Wish{\n    def main(args: Array[String]){\n        val w = new Wish()\n        println(\"Value - \" + w.s )\n   }\n}\n</code></pre>\n\n<p>Java classes can be used in Scala.  Similarly,  can Scala classes be used in Java?</p>\n"},{"tags":["java","quarkus","corba"],"comments":[{"owner":{"account_id":5297359,"reputation":473,"user_id":4784969,"accept_rate":17,"display_name":"Politechniczny"},"score":0,"creation_date":1691142809,"post_id":76834796,"comment_id":135454970,"body_markdown":"It looks that Quarkus class loader can&#39;t find the class.","body":"It looks that Quarkus class loader can&#39;t find the class."},{"owner":{"account_id":5297359,"reputation":473,"user_id":4784969,"accept_rate":17,"display_name":"Politechniczny"},"score":0,"creation_date":1691147659,"post_id":76834796,"comment_id":135455807,"body_markdown":"For some reason when you run `quarkus dev` then classes are NOT visible but when you build uber-jar, then classes are packed in .jar and loaded successfully.","body":"For some reason when you run <code>quarkus dev</code> then classes are NOT visible but when you build uber-jar, then classes are packed in .jar and loaded successfully."}],"owner":{"account_id":5297359,"reputation":473,"user_id":4784969,"accept_rate":17,"display_name":"Politechniczny"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691142668,"creation_date":1691142668,"question_id":76834796,"body_markdown":"In ``pom.xml`` there is dependency:\r\n```xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.jboss.openjdk-orb&lt;/groupId&gt;\r\n  &lt;artifactId&gt;openjdk-orb-jakarta&lt;/artifactId&gt;\r\n  &lt;version&gt;8.1.9.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nNow I try to init CORBA ORB:\r\n```java\r\nvar properties = new Properties();\r\nvar args = new String[]{&quot;-ORBInitRef&quot;, nameServiceReference);\r\nvar orb = ORB.init(args, properties);  // this fails\r\n```\r\nThe exception is:\r\n```\r\njava.lang.RuntimeException: Failed to start quarkus\r\nCaused by: java.lang.NoClassDefFoundError: org/omg/CORBA/NamedValue\r\nCaused by: java.lang.ClassNotFoundException: org.omg.CORBA.NamedValue\r\n```\r\nWhat I tried is to use different CORBA implementations including Glassfish and Jacorb:\r\n```pom.xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.jacorb&lt;/groupId&gt;\r\n  &lt;artifactId&gt;jacorb-omgapi&lt;/artifactId&gt;\r\n  &lt;version&gt;3.9&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nBut the problem still exists.\r\n\r\nIn stubs generated by IDL compiler there is ``NamedValue`` interface and ``_NamedValueStub`` class:\r\n\r\n```java\r\npublic interface NamedValue extends NamedValueOperations, org.omg.CORBA.Object, org.omg.CORBA.portable.IDLEntity \r\n{\r\n} // interface NamedValue\r\n\r\npublic class _NamedValueStub extends org.omg.CORBA.portable.ObjectImpl implements org.omg.CORBA.NamedValue\r\n{\r\n\r\n  // Type-specific CORBA::Object operations\r\n  private static String[] __ids = {&quot;IDL:CORBA/NamedValue:1.0&quot;};\r\n\r\n  // ............\r\n}\r\n```\r\nThe IDL defining it contains:\r\n```\r\nmodule CORBA\r\n{\r\n    interface NamedValue { };\r\n};\r\n```\r\nAny workaround for this? How to init ORB properly?","title":"How to init CORBA in Quarkus Java 17 application?","body":"<p>In <code>pom.xml</code> there is dependency:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.jboss.openjdk-orb&lt;/groupId&gt;\n  &lt;artifactId&gt;openjdk-orb-jakarta&lt;/artifactId&gt;\n  &lt;version&gt;8.1.9.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Now I try to init CORBA ORB:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var properties = new Properties();\nvar args = new String[]{&quot;-ORBInitRef&quot;, nameServiceReference);\nvar orb = ORB.init(args, properties);  // this fails\n</code></pre>\n<p>The exception is:</p>\n<pre><code>java.lang.RuntimeException: Failed to start quarkus\nCaused by: java.lang.NoClassDefFoundError: org/omg/CORBA/NamedValue\nCaused by: java.lang.ClassNotFoundException: org.omg.CORBA.NamedValue\n</code></pre>\n<p>What I tried is to use different CORBA implementations including Glassfish and Jacorb:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.jacorb&lt;/groupId&gt;\n  &lt;artifactId&gt;jacorb-omgapi&lt;/artifactId&gt;\n  &lt;version&gt;3.9&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>But the problem still exists.</p>\n<p>In stubs generated by IDL compiler there is <code>NamedValue</code> interface and <code>_NamedValueStub</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface NamedValue extends NamedValueOperations, org.omg.CORBA.Object, org.omg.CORBA.portable.IDLEntity \n{\n} // interface NamedValue\n\npublic class _NamedValueStub extends org.omg.CORBA.portable.ObjectImpl implements org.omg.CORBA.NamedValue\n{\n\n  // Type-specific CORBA::Object operations\n  private static String[] __ids = {&quot;IDL:CORBA/NamedValue:1.0&quot;};\n\n  // ............\n}\n</code></pre>\n<p>The IDL defining it contains:</p>\n<pre><code>module CORBA\n{\n    interface NamedValue { };\n};\n</code></pre>\n<p>Any workaround for this? How to init ORB properly?</p>\n"},{"tags":["java","xslt","xslt-2.0","saxon"],"comments":[{"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1691138808,"post_id":76834290,"comment_id":135454180,"body_markdown":"First of all, the supported versions of Saxon are 11 and 12 and 10, all XSLT 3.0 processors. If you want to write extension functions in Java check the documentation e.g. https://www.saxonica.com/html/documentation10/extensibility/integratedfunctions/","body":"First of all, the supported versions of Saxon are 11 and 12 and 10, all XSLT 3.0 processors. If you want to write extension functions in Java check the documentation e.g. <a href=\"https://www.saxonica.com/html/documentation10/extensibility/integratedfunctions/\" rel=\"nofollow noreferrer\">saxonica.com/html/documentation10/extensibility/&hellip;</a>"},{"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1691138897,"post_id":76834290,"comment_id":135454204,"body_markdown":"There are also commercial PE and EE editions of Saxon that have support for e.g. the EXPath file module https://www.saxonica.com/html/documentation10/extensions/functions/expath.html","body":"There are also commercial PE and EE editions of Saxon that have support for e.g. the EXPath file module <a href=\"https://www.saxonica.com/html/documentation10/extensions/functions/expath.html\" rel=\"nofollow noreferrer\">saxonica.com/html/documentation10/extensions/functions/&hellip;</a>"},{"owner":{"account_id":10589563,"reputation":15,"user_id":7800643,"display_name":"ashish sharma"},"score":0,"creation_date":1691140719,"post_id":76834290,"comment_id":135454570,"body_markdown":"@MartinHonnen I don&#39;t understood with what you meant by XSLT 3.0 processor , does Saxon support XSLT -2.0 ?","body":"@MartinHonnen I don&#39;t understood with what you meant by XSLT 3.0 processor , does Saxon support XSLT -2.0 ?"},{"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1691140868,"post_id":76834290,"comment_id":135454596,"body_markdown":"Saxon 9.8 and later are XSLT 3 processors.","body":"Saxon 9.8 and later are XSLT 3 processors."},{"owner":{"account_id":10589563,"reputation":15,"user_id":7800643,"display_name":"ashish sharma"},"score":0,"creation_date":1691141798,"post_id":76834290,"comment_id":135454755,"body_markdown":"So is there any other processor for XSLT-2.0 onwards for JAVA world ?","body":"So is there any other processor for XSLT-2.0 onwards for JAVA world ?"},{"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1691142044,"post_id":76834290,"comment_id":135454807,"body_markdown":"Older versions of Saxon (8.9 to 9.7) implement XSLT 2.0. Of course any XSLT 3 processor does run XSLT 2 code.","body":"Older versions of Saxon (8.9 to 9.7) implement XSLT 2.0. Of course any XSLT 3 processor does run XSLT 2 code."},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1691142321,"post_id":76834290,"comment_id":135454864,"body_markdown":"Saxon no longer has an &quot;XSLT 2.0&quot; mode of operation, in the sense that it will reject anything that&#39;s not allowed by the XSLT 2.0 specification. But 3.0 is highly compatible, so all 2.0 stylesheets will run without problems.","body":"Saxon no longer has an &quot;XSLT 2.0&quot; mode of operation, in the sense that it will reject anything that&#39;s not allowed by the XSLT 2.0 specification. But 3.0 is highly compatible, so all 2.0 stylesheets will run without problems."}],"answers":[{"comments":[{"owner":{"account_id":10589563,"reputation":15,"user_id":7800643,"display_name":"ashish sharma"},"score":0,"creation_date":1691144864,"post_id":76834780,"comment_id":135455319,"body_markdown":"Actually i couldnt find anything from the documentation , can you suggest what can i use in place of this ?","body":"Actually i couldnt find anything from the documentation , can you suggest what can i use in place of this ?"},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1691144971,"post_id":76834780,"comment_id":135455340,"body_markdown":"I&#39;m sorry you find the documentation confusing, but I&#39;m not going to write a replacement set of documentation just for you. If you could point to a specific part that you find confusing, please ask a more specific question.","body":"I&#39;m sorry you find the documentation confusing, but I&#39;m not going to write a replacement set of documentation just for you. If you could point to a specific part that you find confusing, please ask a more specific question."}],"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691142570,"creation_date":1691142570,"answer_id":76834780,"question_id":76834290,"body_markdown":"Your stylesheet is using Xalan-specific XSLT extensions to call out to Java code, such as \r\n\r\n    &lt;lxslt:component prefix=&quot;setfile&quot; elements=&quot;copy&quot; functions=&quot;setFile setTcFile getCurrentDir\r\n            getCurrentImanFileName getCurrentImanFileNamePrefix getNiceName&quot;&gt;\r\n      &lt;lxslt:script lang=&quot;javaclass&quot; src=&quot;com.teamcenter.rac.cme.cmereport.CMEReportXalanExtension&quot;/&gt;\r\n    &lt;/lxslt:component&gt;\r\n\r\nSaxon is able to call out to Java, but the details of how to do so differ from the way Xalan does it (partly for security reasons, partly to cater for the fact that the type system in XSLT 2.0+ is much richer than the 1.0 type system.) So you will need to change this part of your code when moving from Xalan to Saxon.","title":"Facing Issue while using Saxon Processor For XML Conversion in XSLT-2.0","body":"<p>Your stylesheet is using Xalan-specific XSLT extensions to call out to Java code, such as</p>\n<pre><code>&lt;lxslt:component prefix=&quot;setfile&quot; elements=&quot;copy&quot; functions=&quot;setFile setTcFile getCurrentDir\n        getCurrentImanFileName getCurrentImanFileNamePrefix getNiceName&quot;&gt;\n  &lt;lxslt:script lang=&quot;javaclass&quot; src=&quot;com.teamcenter.rac.cme.cmereport.CMEReportXalanExtension&quot;/&gt;\n&lt;/lxslt:component&gt;\n</code></pre>\n<p>Saxon is able to call out to Java, but the details of how to do so differ from the way Xalan does it (partly for security reasons, partly to cater for the fact that the type system in XSLT 2.0+ is much richer than the 1.0 type system.) So you will need to change this part of your code when moving from Xalan to Saxon.</p>\n"}],"owner":{"account_id":10589563,"reputation":15,"user_id":7800643,"display_name":"ashish sharma"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76834780,"answer_count":1,"score":0,"last_activity_date":1691142570,"creation_date":1691138377,"question_id":76834290,"body_markdown":"I am Using saxon processor for conversion of XML with XSLT-2.0. but its giving error for XSL file . \r\n\r\nBelow is the Code for XSL File\r\n\r\n    &lt;?xml version=&quot;1.0&quot;?&gt;\r\n    &lt;xsl:stylesheet version=&quot;2.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\r\n    xmlns:plm=&quot;http://www.plmxml.org/Schemas/PLMXMLSchema&quot;\r\n    xmlns:lxslt=&quot;http://www.apache.org/xslt&quot;\r\n    xmlns:setfile =&quot;com.teamcenter.rac.cme.cmereport.CMEReportXalanExtension&quot;&gt;\r\n    \r\n    &lt;xsl:key name=&quot;Occurrence&quot; match=&quot;plm:Occurrence | plm:WorkAreaOccurrence&quot; use=&quot;@id&quot;/&gt;\r\n    &lt;xsl:key name=&quot;Operation&quot; match=&quot;plm:Operation&quot; use=&quot;@id&quot;/&gt;\r\n    &lt;xsl:key name=&quot;OperationRevision&quot; match=&quot;plm:OperationRevision&quot; use=&quot;@id&quot;/&gt;\r\n    &lt;xsl:key name=&quot;Process&quot; match=&quot;plm:Process | plm:Operation&quot; use=&quot;@id&quot;/&gt;\r\n    &lt;xsl:key name=&quot;ProcessOccurrence&quot; match=&quot;plm:ProcessOccurrence | plm:Occurrence | plm:WorkAreaOccurrence&quot; use=&quot;@id&quot;/&gt;\r\n    &lt;xsl:key name=&quot;ProcessRevision&quot; match=&quot;plm:ProcessRevision | plm:OperationRevision&quot; use=&quot;@id&quot;/&gt;\r\n    &lt;xsl:key name=&quot;ProcessView&quot; match=&quot;plm:ProcessView&quot; use=&quot;@id&quot;/&gt;\r\n    &lt;xsl:key name=&quot;ProcOpRevision&quot; match=&quot;plm:ProcessRevision | plm:OperationRevision&quot; use=&quot;@id&quot;/&gt;\r\n    \r\n    &lt;lxslt:component prefix=&quot;setfile&quot; elements=&quot;copy&quot; functions=&quot;setFile setTcFile getCurrentDir\r\n            getCurrentImanFileName getCurrentImanFileNamePrefix getNiceName&quot;&gt;\r\n      &lt;lxslt:script lang=&quot;javaclass&quot; src=&quot;com.teamcenter.rac.cme.cmereport.CMEReportXalanExtension&quot;/&gt;\r\n    &lt;/lxslt:component&gt;\r\n    \r\n    &lt;xsl:output method=&quot;html&quot; indent=&quot;yes&quot;/&gt;\r\n    &lt;xsl:param name=&quot;outDir&quot; select=&quot;setfile:getCurrentDir(setfile:new())&quot;/&gt;\r\n    &lt;xsl:variable name=&quot;roid&quot; select=&quot;/plm:PLMXML/plm:ProcessView/@rootRefs&quot;/&gt;&lt;!-- rootRef instead of prima.. --&gt;\r\n    &lt;!-- Assuming that the primaryOccurrenceRef(&amp; NO MULTIPLE ENTRY POINTS) is always a ProcessOccurrence --&gt;\r\n    &lt;xsl:variable name=&quot;rpoe&quot; select=&quot;key(&#39;ProcessOccurrence&#39;,$roid)&quot;/&gt;\r\n    &lt;xsl:variable name=&quot;rprid&quot; select=&quot;substring-after($rpoe/@instancedRef,&#39;#&#39;)&quot;/&gt;\r\n    &lt;xsl:variable name=&quot;root&quot; select=&quot;key(&#39;ProcessRevision&#39;,$rprid)&quot;/&gt;\r\n    \r\n    &lt;xsl:template match=&quot;/&quot;&gt;\r\n        &lt;xsl:call-template name=&quot;genData&quot;&gt;\r\n            &lt;xsl:with-param name=&quot;curProc&quot; select=&quot;$root&quot;/&gt;\r\n            &lt;xsl:with-param name=&quot;occStr&quot; select=&quot;$rpoe/@occurrenceRefs&quot;/&gt;\r\n        &lt;/xsl:call-template&gt;\r\n    &lt;/xsl:template&gt;\r\n    \r\n    &lt;xsl:template name=&quot;genData&quot;&gt;\r\n    &lt;xsl:param name=&quot;curProc&quot;/&gt;\r\n    &lt;xsl:param name=&quot;occStr&quot;/&gt;\r\n        &lt;html&gt;\r\n            &lt;head&gt;\r\n                &lt;title&gt;Process: &lt;xsl:value-of select=&quot;$curProc/@name&quot;/&gt;&lt;/title&gt;\r\n            &lt;/head&gt;\r\n            &lt;body BGCOLOR=&quot;#FFFFFF&quot; link=&quot;#0000FF&quot; vlink=&quot;#660066&quot;&gt;\r\n                &lt;br/&gt;\r\n                            &lt;!-- Support for Foxfire browser requires specific class=&quot;sample&quot; on all table elements --&gt;\r\n                &lt;table class=&quot;sample&quot;&gt;&lt;!-- main table --&gt;\r\n                    &lt;xsl:call-template name=&quot;heading&quot;&gt;\r\n                        &lt;xsl:with-param name=&quot;title&quot; select=&quot;&#39;Process Report&#39;&quot;/&gt;\r\n                    &lt;/xsl:call-template&gt;\r\n                                    &lt;tr&gt;\r\n                                            &lt;td&gt;\r\n                                                    &lt;xsl:variable name=&quot;procid&quot;&gt;\r\n                                                            &lt;xsl:call-template name=&quot;cleanId&quot;&gt;\r\n                                                                    &lt;xsl:with-param name=&quot;id&quot; select=&quot;$curProc/@masterRef&quot;/&gt;\r\n                                                            &lt;/xsl:call-template&gt;\r\n                                                    &lt;/xsl:variable&gt;\r\n                                                    &lt;xsl:variable name=&quot;proc&quot; select=&quot;key(&#39;Process&#39;,$procid)&quot;/&gt;\r\n                                                    &lt;xsl:value-of select=&quot;concat($proc/@catalogueId,&#39;/&#39;,$curProc/@revision,&#39; - &#39;,$curProc/@name)&quot;/&gt;\r\n                                            &lt;/td&gt;\r\n                                    &lt;/tr&gt;\r\n    \r\n                    &lt;tr&gt;&lt;!-- main table:row6::sub level --&gt;\r\n                        &lt;td&gt;\r\n                            &lt;hr color=&quot;#000000&quot;/&gt;\r\n                            &lt;table class=&quot;sample&quot;&gt;\r\n                            &lt;tr&gt;\r\n                                &lt;th&gt;Name&lt;/th&gt;\r\n                            &lt;/tr&gt;\r\n                            &lt;xsl:call-template name=&quot;createCL&quot;&gt;\r\n                                &lt;xsl:with-param name=&quot;chStr&quot; select=&quot;$occStr&quot;/&gt;\r\n                            &lt;/xsl:call-template&gt;\r\n                            &lt;/table&gt;\r\n                        &lt;/td&gt;\r\n                    &lt;/tr&gt;\r\n                &lt;/table&gt;\r\n            &lt;/body&gt;\r\n        &lt;/html&gt;\r\n    &lt;/xsl:template&gt;\r\n    \r\n    &lt;xsl:template name=&quot;createCL&quot;&gt;\r\n    &lt;xsl:param name=&quot;chStr&quot;/&gt;\r\n        &lt;xsl:variable name=&quot;genele&quot; select=&quot;key(&#39;ProcessOccurrence&#39;,$chStr)&quot;/&gt;\r\n                    &lt;xsl:if test=&quot;name($genele)=&#39;ProcessOccurrence&#39;&quot;&gt;\r\n                        &lt;xsl:call-template name=&quot;creCLext&quot;&gt;\r\n                            &lt;xsl:with-param name=&quot;genel&quot; select=&quot;$genele&quot;/&gt;\r\n                        &lt;/xsl:call-template&gt;\r\n                    &lt;/xsl:if&gt;\r\n    &lt;/xsl:template&gt;\r\n    \r\n    &lt;xsl:template name=&quot;creCLext&quot;&gt;\r\n    &lt;xsl:param name=&quot;genel&quot;/&gt;\r\n        &lt;xsl:variable name=&quot;procid&quot; select=&quot;substring-after($genel/@instancedRef,&#39;#&#39;)&quot;/&gt;\r\n        &lt;xsl:variable name=&quot;procele&quot; select=&quot;key(&#39;ProcOpRevision&#39;,$procid)&quot;/&gt;&lt;!-- ProcessRevision or OperationRevision --&gt;\r\n        &lt;xsl:variable name=&quot;pre1&quot; select=&quot;substring-after($genel/@predecessorRefs,&#39;#&#39;)&quot;/&gt;&lt;!--assuming only one id to be present --&gt;\r\n        &lt;xsl:variable name=&quot;pre2&quot; select=&quot;key(&#39;ProcessOccurrence&#39;,$pre1)&quot;/&gt;\r\n        &lt;xsl:variable name=&quot;preid&quot; select=&quot;substring-after($pre2/@instancedRef,&#39;#&#39;)&quot;/&gt;\r\n        &lt;xsl:variable name=&quot;prele&quot; select=&quot;/plm:PLMXML/*[@id=$preid]&quot;/&gt;\r\n        &lt;tr&gt;\r\n        &lt;td align=&quot;center&quot;&gt;&lt;a&gt;\r\n            &lt;xsl:attribute name=&quot;href&quot;&gt;\r\n                &lt;xsl:value-of select=&quot;concat($procid,&#39;.html&#39;)&quot;/&gt;\r\n            &lt;/xsl:attribute&gt;\r\n            &lt;xsl:value-of select=&quot;$procele/@name&quot;/&gt;\r\n        &lt;/a&gt;&lt;/td&gt;\r\n         \r\n        &lt;/tr&gt;\r\n        &lt;result-document href=&quot;concat($procid,&#39;.html&#39;)&quot;&gt;\r\n        &lt;xsl:call-template name=&quot;genopr&quot;&gt;\r\n                    &lt;xsl:with-param name=&quot;curOpr&quot; select=&quot;$procele&quot;/&gt;\r\n                    &lt;xsl:with-param name=&quot;genel&quot; select=&quot;$genel&quot;/&gt;\r\n                &lt;/xsl:call-template&gt;\r\n        &lt;/result-document&gt;\r\n    &lt;/xsl:template&gt;\r\n    \r\n    &lt;xsl:template name=&quot;genopr&quot;&gt;\r\n    &lt;xsl:param name=&quot;curOpr&quot;/&gt;\r\n    &lt;xsl:param name=&quot;genel&quot;/&gt;\r\n        &lt;html&gt;\r\n            &lt;head&gt;\r\n                &lt;title&gt;Operation: &lt;xsl:value-of select=&quot;$curOpr/@name&quot;/&gt;&lt;/title&gt;\r\n            &lt;/head&gt;\r\n            &lt;body BGCOLOR=&quot;#FFFFFF&quot; link=&quot;#0000FF&quot; vlink=&quot;#660066&quot;&gt;\r\n                &lt;br/&gt;\r\n                &lt;table class=&quot;sample&quot;&gt;&lt;!-- main table --&gt;\r\n                    &lt;xsl:call-template name=&quot;heading&quot;&gt;\r\n                        &lt;xsl:with-param name=&quot;title&quot; select=&quot;&#39;Operation Report&#39;&quot;/&gt;\r\n                    &lt;/xsl:call-template&gt;\r\n                                    &lt;tr&gt;\r\n                                            &lt;td&gt;\r\n                                                    &lt;xsl:variable name=&quot;procid&quot;&gt;\r\n                                                            &lt;xsl:call-template name=&quot;cleanId&quot;&gt;\r\n                                                                    &lt;xsl:with-param name=&quot;id&quot; select=&quot;$curOpr/@masterRef&quot;/&gt;\r\n                                                            &lt;/xsl:call-template&gt;\r\n                                                    &lt;/xsl:variable&gt;\r\n                                                    &lt;xsl:variable name=&quot;proc&quot; select=&quot;key(&#39;Process&#39;,$procid)&quot;/&gt;\r\n                                                    &lt;xsl:value-of select=&quot;concat($proc/@catalogueId,&#39;/&#39;,$curOpr/@revision,&#39; - &#39;,$curOpr/@name)&quot;/&gt;\r\n                                            &lt;/td&gt;\r\n                                    &lt;/tr&gt;\r\n                    \r\n                &lt;/table&gt;\r\n            &lt;/body&gt;\r\n        &lt;/html&gt;\r\n    \r\n    &lt;/xsl:template&gt;\r\n    \r\n    &lt;xsl:template name=&quot;heading&quot;&gt;\r\n    &lt;xsl:param name=&quot;title&quot;/&gt;\r\n                    &lt;tr&gt;&lt;!-- main table:row1::heading--&gt;\r\n                        &lt;th&gt;\r\n                            &lt;div align=&quot;left&quot;&gt;\r\n                            &lt;/div&gt;\r\n                            &lt;div align=&quot;center&quot;&gt;&lt;b&gt;&lt;font size=&quot;+2&quot;&gt;&lt;xsl:value-of select=&quot;$title&quot;/&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;br/&gt;\r\n                        &lt;/th&gt;\r\n                    &lt;/tr&gt;\r\n    &lt;/xsl:template&gt;\r\n    &lt;xsl:template name=&quot;cleanId&quot;&gt;\r\n        &lt;xsl:param name=&quot;id&quot;/&gt;\r\n    \r\n        &lt;xsl:choose&gt;\r\n            &lt;xsl:when test=&quot;contains($id, &#39;#&#39;)&quot;&gt;\r\n                &lt;xsl:value-of select=&quot;substring-after($id,&#39;#&#39;)&quot;/&gt;\r\n            &lt;/xsl:when&gt;\r\n            &lt;xsl:otherwise&gt;\r\n                &lt;xsl:value-of select=&quot;$id&quot;/&gt;\r\n            &lt;/xsl:otherwise&gt;\r\n        &lt;/xsl:choose&gt;\r\n    &lt;/xsl:template&gt;\r\n    \r\n    &lt;/xsl:stylesheet&gt;\r\n\r\nBelow is the the code where we are calling the transformer for conversion from XML to HTML.\r\n\r\n    {\r\n             \r\n\r\n            // 1. Instantiate a TransformerFactory.\r\n            javax.xml.transform.TransformerFactory tFactory =(SAXTransformerFactory) SAXTransformerFactory.newInstance();\r\n\r\n            XslImportResolver myResolve = new XslImportResolver();\r\n            tFactory.setURIResolver( myResolve );\r\n\r\n            // 2. Use the TransformerFactory to process the stylesheet Source and\r\n            //                generate a Transformer.\r\n            javax.xml.transform.Transformer transformer = tFactory.newTransformer\r\n                            (new javax.xml.transform.stream.StreamSource(xslLocation));\r\n\r\n            // Add debugging output if it is definded in the Registry.\r\n            Registry registry = Registry.getRegistry( this );\r\n\r\n            // 3. Use the Transformer to perform the transformation and send the\r\n            //          the output to a Result object.\r\n            transformer.transform( new StreamSource( xmlLocation ),\r\n                    new StreamResult( new FileOutputStream( htmlLocation ) ) );\r\n        }\r\n\r\nWe are getting below error : \r\nStatic error near {...e:getCurrentDir(setfile:new...} at char 22 in expression in xsl:param/@select on line 22 column 73 of PLMXML_DefaultProcessReport.xsl:\r\n  XPST0017: Cannot find a 0-argument function named\r\n  Q{com.teamcenter.rac.cme.cmereport.CMEReportXalanExtension}new()\r\n\r\n\r\n\r\n\r\nwe remove xalan dependencies and now updated XSLT-2.0 and using Saxon processor.","title":"Facing Issue while using Saxon Processor For XML Conversion in XSLT-2.0","body":"<p>I am Using saxon processor for conversion of XML with XSLT-2.0. but its giving error for XSL file .</p>\n<p>Below is the Code for XSL File</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;xsl:stylesheet version=&quot;2.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\nxmlns:plm=&quot;http://www.plmxml.org/Schemas/PLMXMLSchema&quot;\nxmlns:lxslt=&quot;http://www.apache.org/xslt&quot;\nxmlns:setfile =&quot;com.teamcenter.rac.cme.cmereport.CMEReportXalanExtension&quot;&gt;\n\n&lt;xsl:key name=&quot;Occurrence&quot; match=&quot;plm:Occurrence | plm:WorkAreaOccurrence&quot; use=&quot;@id&quot;/&gt;\n&lt;xsl:key name=&quot;Operation&quot; match=&quot;plm:Operation&quot; use=&quot;@id&quot;/&gt;\n&lt;xsl:key name=&quot;OperationRevision&quot; match=&quot;plm:OperationRevision&quot; use=&quot;@id&quot;/&gt;\n&lt;xsl:key name=&quot;Process&quot; match=&quot;plm:Process | plm:Operation&quot; use=&quot;@id&quot;/&gt;\n&lt;xsl:key name=&quot;ProcessOccurrence&quot; match=&quot;plm:ProcessOccurrence | plm:Occurrence | plm:WorkAreaOccurrence&quot; use=&quot;@id&quot;/&gt;\n&lt;xsl:key name=&quot;ProcessRevision&quot; match=&quot;plm:ProcessRevision | plm:OperationRevision&quot; use=&quot;@id&quot;/&gt;\n&lt;xsl:key name=&quot;ProcessView&quot; match=&quot;plm:ProcessView&quot; use=&quot;@id&quot;/&gt;\n&lt;xsl:key name=&quot;ProcOpRevision&quot; match=&quot;plm:ProcessRevision | plm:OperationRevision&quot; use=&quot;@id&quot;/&gt;\n\n&lt;lxslt:component prefix=&quot;setfile&quot; elements=&quot;copy&quot; functions=&quot;setFile setTcFile getCurrentDir\n        getCurrentImanFileName getCurrentImanFileNamePrefix getNiceName&quot;&gt;\n  &lt;lxslt:script lang=&quot;javaclass&quot; src=&quot;com.teamcenter.rac.cme.cmereport.CMEReportXalanExtension&quot;/&gt;\n&lt;/lxslt:component&gt;\n\n&lt;xsl:output method=&quot;html&quot; indent=&quot;yes&quot;/&gt;\n&lt;xsl:param name=&quot;outDir&quot; select=&quot;setfile:getCurrentDir(setfile:new())&quot;/&gt;\n&lt;xsl:variable name=&quot;roid&quot; select=&quot;/plm:PLMXML/plm:ProcessView/@rootRefs&quot;/&gt;&lt;!-- rootRef instead of prima.. --&gt;\n&lt;!-- Assuming that the primaryOccurrenceRef(&amp; NO MULTIPLE ENTRY POINTS) is always a ProcessOccurrence --&gt;\n&lt;xsl:variable name=&quot;rpoe&quot; select=&quot;key('ProcessOccurrence',$roid)&quot;/&gt;\n&lt;xsl:variable name=&quot;rprid&quot; select=&quot;substring-after($rpoe/@instancedRef,'#')&quot;/&gt;\n&lt;xsl:variable name=&quot;root&quot; select=&quot;key('ProcessRevision',$rprid)&quot;/&gt;\n\n&lt;xsl:template match=&quot;/&quot;&gt;\n    &lt;xsl:call-template name=&quot;genData&quot;&gt;\n        &lt;xsl:with-param name=&quot;curProc&quot; select=&quot;$root&quot;/&gt;\n        &lt;xsl:with-param name=&quot;occStr&quot; select=&quot;$rpoe/@occurrenceRefs&quot;/&gt;\n    &lt;/xsl:call-template&gt;\n&lt;/xsl:template&gt;\n\n&lt;xsl:template name=&quot;genData&quot;&gt;\n&lt;xsl:param name=&quot;curProc&quot;/&gt;\n&lt;xsl:param name=&quot;occStr&quot;/&gt;\n    &lt;html&gt;\n        &lt;head&gt;\n            &lt;title&gt;Process: &lt;xsl:value-of select=&quot;$curProc/@name&quot;/&gt;&lt;/title&gt;\n        &lt;/head&gt;\n        &lt;body BGCOLOR=&quot;#FFFFFF&quot; link=&quot;#0000FF&quot; vlink=&quot;#660066&quot;&gt;\n            &lt;br/&gt;\n                        &lt;!-- Support for Foxfire browser requires specific class=&quot;sample&quot; on all table elements --&gt;\n            &lt;table class=&quot;sample&quot;&gt;&lt;!-- main table --&gt;\n                &lt;xsl:call-template name=&quot;heading&quot;&gt;\n                    &lt;xsl:with-param name=&quot;title&quot; select=&quot;'Process Report'&quot;/&gt;\n                &lt;/xsl:call-template&gt;\n                                &lt;tr&gt;\n                                        &lt;td&gt;\n                                                &lt;xsl:variable name=&quot;procid&quot;&gt;\n                                                        &lt;xsl:call-template name=&quot;cleanId&quot;&gt;\n                                                                &lt;xsl:with-param name=&quot;id&quot; select=&quot;$curProc/@masterRef&quot;/&gt;\n                                                        &lt;/xsl:call-template&gt;\n                                                &lt;/xsl:variable&gt;\n                                                &lt;xsl:variable name=&quot;proc&quot; select=&quot;key('Process',$procid)&quot;/&gt;\n                                                &lt;xsl:value-of select=&quot;concat($proc/@catalogueId,'/',$curProc/@revision,' - ',$curProc/@name)&quot;/&gt;\n                                        &lt;/td&gt;\n                                &lt;/tr&gt;\n\n                &lt;tr&gt;&lt;!-- main table:row6::sub level --&gt;\n                    &lt;td&gt;\n                        &lt;hr color=&quot;#000000&quot;/&gt;\n                        &lt;table class=&quot;sample&quot;&gt;\n                        &lt;tr&gt;\n                            &lt;th&gt;Name&lt;/th&gt;\n                        &lt;/tr&gt;\n                        &lt;xsl:call-template name=&quot;createCL&quot;&gt;\n                            &lt;xsl:with-param name=&quot;chStr&quot; select=&quot;$occStr&quot;/&gt;\n                        &lt;/xsl:call-template&gt;\n                        &lt;/table&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/table&gt;\n        &lt;/body&gt;\n    &lt;/html&gt;\n&lt;/xsl:template&gt;\n\n&lt;xsl:template name=&quot;createCL&quot;&gt;\n&lt;xsl:param name=&quot;chStr&quot;/&gt;\n    &lt;xsl:variable name=&quot;genele&quot; select=&quot;key('ProcessOccurrence',$chStr)&quot;/&gt;\n                &lt;xsl:if test=&quot;name($genele)='ProcessOccurrence'&quot;&gt;\n                    &lt;xsl:call-template name=&quot;creCLext&quot;&gt;\n                        &lt;xsl:with-param name=&quot;genel&quot; select=&quot;$genele&quot;/&gt;\n                    &lt;/xsl:call-template&gt;\n                &lt;/xsl:if&gt;\n&lt;/xsl:template&gt;\n\n&lt;xsl:template name=&quot;creCLext&quot;&gt;\n&lt;xsl:param name=&quot;genel&quot;/&gt;\n    &lt;xsl:variable name=&quot;procid&quot; select=&quot;substring-after($genel/@instancedRef,'#')&quot;/&gt;\n    &lt;xsl:variable name=&quot;procele&quot; select=&quot;key('ProcOpRevision',$procid)&quot;/&gt;&lt;!-- ProcessRevision or OperationRevision --&gt;\n    &lt;xsl:variable name=&quot;pre1&quot; select=&quot;substring-after($genel/@predecessorRefs,'#')&quot;/&gt;&lt;!--assuming only one id to be present --&gt;\n    &lt;xsl:variable name=&quot;pre2&quot; select=&quot;key('ProcessOccurrence',$pre1)&quot;/&gt;\n    &lt;xsl:variable name=&quot;preid&quot; select=&quot;substring-after($pre2/@instancedRef,'#')&quot;/&gt;\n    &lt;xsl:variable name=&quot;prele&quot; select=&quot;/plm:PLMXML/*[@id=$preid]&quot;/&gt;\n    &lt;tr&gt;\n    &lt;td align=&quot;center&quot;&gt;&lt;a&gt;\n        &lt;xsl:attribute name=&quot;href&quot;&gt;\n            &lt;xsl:value-of select=&quot;concat($procid,'.html')&quot;/&gt;\n        &lt;/xsl:attribute&gt;\n        &lt;xsl:value-of select=&quot;$procele/@name&quot;/&gt;\n    &lt;/a&gt;&lt;/td&gt;\n     \n    &lt;/tr&gt;\n    &lt;result-document href=&quot;concat($procid,'.html')&quot;&gt;\n    &lt;xsl:call-template name=&quot;genopr&quot;&gt;\n                &lt;xsl:with-param name=&quot;curOpr&quot; select=&quot;$procele&quot;/&gt;\n                &lt;xsl:with-param name=&quot;genel&quot; select=&quot;$genel&quot;/&gt;\n            &lt;/xsl:call-template&gt;\n    &lt;/result-document&gt;\n&lt;/xsl:template&gt;\n\n&lt;xsl:template name=&quot;genopr&quot;&gt;\n&lt;xsl:param name=&quot;curOpr&quot;/&gt;\n&lt;xsl:param name=&quot;genel&quot;/&gt;\n    &lt;html&gt;\n        &lt;head&gt;\n            &lt;title&gt;Operation: &lt;xsl:value-of select=&quot;$curOpr/@name&quot;/&gt;&lt;/title&gt;\n        &lt;/head&gt;\n        &lt;body BGCOLOR=&quot;#FFFFFF&quot; link=&quot;#0000FF&quot; vlink=&quot;#660066&quot;&gt;\n            &lt;br/&gt;\n            &lt;table class=&quot;sample&quot;&gt;&lt;!-- main table --&gt;\n                &lt;xsl:call-template name=&quot;heading&quot;&gt;\n                    &lt;xsl:with-param name=&quot;title&quot; select=&quot;'Operation Report'&quot;/&gt;\n                &lt;/xsl:call-template&gt;\n                                &lt;tr&gt;\n                                        &lt;td&gt;\n                                                &lt;xsl:variable name=&quot;procid&quot;&gt;\n                                                        &lt;xsl:call-template name=&quot;cleanId&quot;&gt;\n                                                                &lt;xsl:with-param name=&quot;id&quot; select=&quot;$curOpr/@masterRef&quot;/&gt;\n                                                        &lt;/xsl:call-template&gt;\n                                                &lt;/xsl:variable&gt;\n                                                &lt;xsl:variable name=&quot;proc&quot; select=&quot;key('Process',$procid)&quot;/&gt;\n                                                &lt;xsl:value-of select=&quot;concat($proc/@catalogueId,'/',$curOpr/@revision,' - ',$curOpr/@name)&quot;/&gt;\n                                        &lt;/td&gt;\n                                &lt;/tr&gt;\n                \n            &lt;/table&gt;\n        &lt;/body&gt;\n    &lt;/html&gt;\n\n&lt;/xsl:template&gt;\n\n&lt;xsl:template name=&quot;heading&quot;&gt;\n&lt;xsl:param name=&quot;title&quot;/&gt;\n                &lt;tr&gt;&lt;!-- main table:row1::heading--&gt;\n                    &lt;th&gt;\n                        &lt;div align=&quot;left&quot;&gt;\n                        &lt;/div&gt;\n                        &lt;div align=&quot;center&quot;&gt;&lt;b&gt;&lt;font size=&quot;+2&quot;&gt;&lt;xsl:value-of select=&quot;$title&quot;/&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;br/&gt;\n                    &lt;/th&gt;\n                &lt;/tr&gt;\n&lt;/xsl:template&gt;\n&lt;xsl:template name=&quot;cleanId&quot;&gt;\n    &lt;xsl:param name=&quot;id&quot;/&gt;\n\n    &lt;xsl:choose&gt;\n        &lt;xsl:when test=&quot;contains($id, '#')&quot;&gt;\n            &lt;xsl:value-of select=&quot;substring-after($id,'#')&quot;/&gt;\n        &lt;/xsl:when&gt;\n        &lt;xsl:otherwise&gt;\n            &lt;xsl:value-of select=&quot;$id&quot;/&gt;\n        &lt;/xsl:otherwise&gt;\n    &lt;/xsl:choose&gt;\n&lt;/xsl:template&gt;\n\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n<p>Below is the the code where we are calling the transformer for conversion from XML to HTML.</p>\n<pre><code>{\n         \n\n        // 1. Instantiate a TransformerFactory.\n        javax.xml.transform.TransformerFactory tFactory =(SAXTransformerFactory) SAXTransformerFactory.newInstance();\n\n        XslImportResolver myResolve = new XslImportResolver();\n        tFactory.setURIResolver( myResolve );\n\n        // 2. Use the TransformerFactory to process the stylesheet Source and\n        //                generate a Transformer.\n        javax.xml.transform.Transformer transformer = tFactory.newTransformer\n                        (new javax.xml.transform.stream.StreamSource(xslLocation));\n\n        // Add debugging output if it is definded in the Registry.\n        Registry registry = Registry.getRegistry( this );\n\n        // 3. Use the Transformer to perform the transformation and send the\n        //          the output to a Result object.\n        transformer.transform( new StreamSource( xmlLocation ),\n                new StreamResult( new FileOutputStream( htmlLocation ) ) );\n    }\n</code></pre>\n<p>We are getting below error :\nStatic error near {...e:getCurrentDir(setfile:new...} at char 22 in expression in xsl:param/@select on line 22 column 73 of PLMXML_DefaultProcessReport.xsl:\nXPST0017: Cannot find a 0-argument function named\nQ{com.teamcenter.rac.cme.cmereport.CMEReportXalanExtension}new()</p>\n<p>we remove xalan dependencies and now updated XSLT-2.0 and using Saxon processor.</p>\n"},{"tags":["java","intellij-idea","lambda"],"comments":[{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":2,"creation_date":1587176684,"post_id":61283367,"comment_id":108414248,"body_markdown":"What does IntelliJ produce when you use that tool? &quot;Change semantics&quot; seems a little hard to interpret accurately.","body":"What does IntelliJ produce when you use that tool? &quot;Change semantics&quot; seems a little hard to interpret accurately."}],"answers":[{"comments":[{"owner":{"account_id":11885028,"reputation":2467,"user_id":8697659,"display_name":"improbable"},"score":0,"creation_date":1587310275,"post_id":61290617,"comment_id":108455387,"body_markdown":"I would also add: Do not use forEach for anything but sout or logging as it&#39;s also a side effect and is not recommended.","body":"I would also add: Do not use forEach for anything but sout or logging as it&#39;s also a side effect and is not recommended."},{"owner":{"account_id":14583345,"reputation":4337,"user_id":10533011,"display_name":"Donat"},"score":1,"creation_date":1587310984,"post_id":61290617,"comment_id":108455707,"body_markdown":"Yes, ```forEach``` is also there for side effects. There are better (functional) ways in most cases, therefore ```forEach``` should be avoided. My intention was not to be complete with what not to do. Just as my example uses ```peek```, I wanted to say: &quot;Don&#39;t do this at home&quot; :-)","body":"Yes, <code>forEach</code> is also there for side effects. There are better (functional) ways in most cases, therefore <code>forEach</code> should be avoided. My intention was not to be complete with what not to do. Just as my example uses <code>peek</code>, I wanted to say: &quot;Don&#39;t do this at home&quot; :-)"}],"tags":[],"owner":{"account_id":14583345,"reputation":4337,"user_id":10533011,"display_name":"Donat"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1691142386,"creation_date":1587219495,"answer_id":61290617,"question_id":61283367,"body_markdown":"If you do not follow the rules of clean functional programming, there may be a change of semantics when you convert a lambda to a method reference. \r\n\r\nThe difference is that the method reference will be resolved only once when the stream is being built. But in the lambda expression the code for getting the method can be evaluated in each execution of the lambda. \r\n\r\nHere is a short self-contained example for demonstration:\r\n\r\n    public class Test40 {\r\n      public static void main(String[] args) {\r\n        Function&lt;Integer, Integer&gt; f2 = n -&gt; 2 * n;\r\n        Function&lt;Integer, Integer&gt; f3 = n -&gt; 3 * n;\r\n        Function&lt;Integer, Integer&gt;[] funcArray = new Function[1];\r\n    \r\n        funcArray[0] = f2;\r\n        Stream.of(1, 2, 3)\r\n              .peek(n -&gt; { if (n &gt; 1) funcArray[0] = f3; })\r\n              .map(funcArray[0]::apply)            // Method reference, &#39;::apply&#39; could be omitted\r\n              .forEach(System.out::print);         // prints 246\r\n        System.out.println();\r\n    \r\n        funcArray[0] = f2;\r\n        Stream.of(1, 2, 3)\r\n              .peek(n -&gt; { if (n &gt; 1) funcArray[0] = f3; })\r\n              .map(n -&gt; funcArray[0].apply(n))     // Lambda\r\n              .forEach(System.out::print);         // prints 269\r\n        System.out.println();\r\n      }\r\n    }\r\n\r\nHow to avoid this problem: Do not use side effects when working with streams. Do not use ```peek``` for processing! This method exists mainly to support debugging (have a look at the javadoc).","title":"IntelliJ - method reference may change semantics","body":"<p>If you do not follow the rules of clean functional programming, there may be a change of semantics when you convert a lambda to a method reference.</p>\n<p>The difference is that the method reference will be resolved only once when the stream is being built. But in the lambda expression the code for getting the method can be evaluated in each execution of the lambda.</p>\n<p>Here is a short self-contained example for demonstration:</p>\n<pre><code>public class Test40 {\n  public static void main(String[] args) {\n    Function&lt;Integer, Integer&gt; f2 = n -&gt; 2 * n;\n    Function&lt;Integer, Integer&gt; f3 = n -&gt; 3 * n;\n    Function&lt;Integer, Integer&gt;[] funcArray = new Function[1];\n\n    funcArray[0] = f2;\n    Stream.of(1, 2, 3)\n          .peek(n -&gt; { if (n &gt; 1) funcArray[0] = f3; })\n          .map(funcArray[0]::apply)            // Method reference, '::apply' could be omitted\n          .forEach(System.out::print);         // prints 246\n    System.out.println();\n\n    funcArray[0] = f2;\n    Stream.of(1, 2, 3)\n          .peek(n -&gt; { if (n &gt; 1) funcArray[0] = f3; })\n          .map(n -&gt; funcArray[0].apply(n))     // Lambda\n          .forEach(System.out::print);         // prints 269\n    System.out.println();\n  }\n}\n</code></pre>\n<p>How to avoid this problem: Do not use side effects when working with streams. Do not use <code>peek</code> for processing! This method exists mainly to support debugging (have a look at the javadoc).</p>\n"}],"owner":{"account_id":1302409,"reputation":5542,"user_id":1252056,"accept_rate":91,"display_name":"streetturtle"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":949,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":61290617,"answer_count":1,"score":7,"last_activity_date":1691142386,"creation_date":1587175135,"question_id":61283367,"body_markdown":"I have following code:\r\n\r\n```java\r\nreturn userService.getAll()\r\n    .stream()\r\n    .map(User::getRoleName)\r\n    .map(roleName -&gt; roleService.findRoleByName(roleName))\r\n    .collect(Collectors.toSet());\r\n```\r\n\r\nIt seems that `roleName -&gt; roleService.findRoleByName(roleName)` could be replaced by a method reference (namely a *Reference to an instance method of a particular object*) however IntelliJ IDEA warns that this may change semantics:\r\n\r\n[![screenshot][1]][1]\r\n\r\nHow could it change semantics? Would it change semantics?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KQ4nJ.png","title":"IntelliJ - method reference may change semantics","body":"<p>I have following code:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>return userService.getAll()\n    .stream()\n    .map(User::getRoleName)\n    .map(roleName -&gt; roleService.findRoleByName(roleName))\n    .collect(Collectors.toSet());\n</code></pre>\n\n<p>It seems that <code>roleName -&gt; roleService.findRoleByName(roleName)</code> could be replaced by a method reference (namely a <em>Reference to an instance method of a particular object</em>) however IntelliJ IDEA warns that this may change semantics:</p>\n\n<p><a href=\"https://i.stack.imgur.com/KQ4nJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KQ4nJ.png\" alt=\"screenshot\"></a></p>\n\n<p>How could it change semantics? Would it change semantics?</p>\n"},{"tags":["java","multithreading","executorservice"],"comments":[{"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"score":1,"creation_date":1503769725,"post_id":18425026,"comment_id":78755331,"body_markdown":"Have a look at : https://stackoverflow.com/questions/36644043/how-to-properly-shutdown-java-executorservice/36644320#36644320","body":"Have a look at : <a href=\"https://stackoverflow.com/questions/36644043/how-to-properly-shutdown-java-executorservice/36644320#36644320\" title=\"how to properly shutdown java executorservice\">stackoverflow.com/questions/36644043/&hellip;</a>"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691141373,"post_id":18425026,"comment_id":135454693,"body_markdown":"There will be no termination until you issue the shutdown, which therefore has to come first. Surely this is obvious? If there was an auto-termination there would be no need for a shutdown API.","body":"There will be no termination until you issue the shutdown, which therefore has to come first. Surely this is obvious? If there was an auto-termination there would be no need for a shutdown API."}],"answers":[{"comments":[{"owner":{"account_id":2590909,"reputation":3911,"user_id":2245634,"accept_rate":61,"display_name":"王奕然"},"score":0,"creation_date":1377397450,"post_id":18425050,"comment_id":27069035,"body_markdown":"thanks,but why  waiting for a very long time?could you give me some example to explain?","body":"thanks,but why  waiting for a very long time?could you give me some example to explain?"},{"owner":{"account_id":9,"reputation":220303,"user_id":13,"accept_rate":100,"display_name":"C. K. Young"},"score":5,"creation_date":1377397550,"post_id":18425050,"comment_id":27069058,"body_markdown":"@user2245634 `awaitTermination` doesn&#39;t actually shut down your executor first. So unless another thread shuts down the executor, `awaitTermination` will just sit there until the timeout runs out. Obviously, in your example, you were waiting only 1 nanosecond before timing out, which was why you didn&#39;t observe the &quot;very long time&quot;.","body":"@user2245634 <code>awaitTermination</code> doesn&#39;t actually shut down your executor first. So unless another thread shuts down the executor, <code>awaitTermination</code> will just sit there until the timeout runs out. Obviously, in your example, you were waiting only 1 nanosecond before timing out, which was why you didn&#39;t observe the &quot;very long time&quot;."},{"owner":{"account_id":2590909,"reputation":3911,"user_id":2245634,"accept_rate":61,"display_name":"王奕然"},"score":1,"creation_date":1377398340,"post_id":18425050,"comment_id":27069168,"body_markdown":"thanks,i understand,and in shutdown() api:This method does not wait for previously submitted tasks to complete execution. it means maybe shutdown() may terminate the task which have submited,but not complete?but i try some examples not prove it","body":"thanks,i understand,and in shutdown() api:This method does not wait for previously submitted tasks to complete execution. it means maybe shutdown() may terminate the task which have submited,but not complete?but i try some examples not prove it"},{"owner":{"account_id":9,"reputation":220303,"user_id":13,"accept_rate":100,"display_name":"C. K. Young"},"score":0,"creation_date":1377398943,"post_id":18425050,"comment_id":27069256,"body_markdown":"@user2245634 Correct, any incomplete tasks will be cancelled (their threads will be sent interrupts). If your tasks don&#39;t check for interrupts, however, then of course cancellation won&#39;t work.","body":"@user2245634 Correct, any incomplete tasks will be cancelled (their threads will be sent interrupts). If your tasks don&#39;t check for interrupts, however, then of course cancellation won&#39;t work."},{"owner":{"account_id":2590909,"reputation":3911,"user_id":2245634,"accept_rate":61,"display_name":"王奕然"},"score":0,"creation_date":1377400302,"post_id":18425050,"comment_id":27069408,"body_markdown":"please look this code public class TestThread9 implements Runnable{\n\t@Override\n\tpublic void run() {\n\t\tif (Thread.interrupted()) {\n\t\t\tSystem.out.println(&quot;interrupted&quot;);\n\t\t\treturn;\n\t\t}\n\t\tSystem.out.println(&quot;a&quot;);\n\t}\n\tpublic static void main(String[] args) throws InterruptedException {\n\t\tExecutorService eService = Executors.newFixedThreadPool(2);\n\t\teService.execute(new TestThread9());\n\t\teService.execute(new TestThread9());\n\t\teService.shutdown();\n\t}\n}in this example,i only call shutdown(),not call awaitTermination ,and i check interrupt but not &quot;interrupted&quot; was print","body":"please look this code public class TestThread9 implements Runnable{ \t@Override \tpublic void run() { \t\tif (Thread.interrupted()) { \t\t\tSystem.out.println(&quot;interrupted&quot;); \t\t\treturn; \t\t} \t\tSystem.out.println(&quot;a&quot;); \t} \tpublic static void main(String[] args) throws InterruptedException { \t\tExecutorService eService = Executors.newFixedThreadPool(2); \t\teService.execute(new TestThread9()); \t\teService.execute(new TestThread9()); \t\teService.shutdown(); \t} }in this example,i only call shutdown(),not call awaitTermination ,and i check interrupt but not &quot;interrupted&quot; was print"},{"owner":{"account_id":9,"reputation":220303,"user_id":13,"accept_rate":100,"display_name":"C. K. Young"},"score":0,"creation_date":1377401217,"post_id":18425050,"comment_id":27069532,"body_markdown":"@user2245634 Your task finished before it was interrupted. Try doing something like: `while (!Thread.interrupted()) {System.out.println(&quot;loop&quot;); Thread.sleep(1000);}`. You will see results.","body":"@user2245634 Your task finished before it was interrupted. Try doing something like: <code>while (!Thread.interrupted()) {System.out.println(&quot;loop&quot;); Thread.sleep(1000);}</code>. You will see results."},{"owner":{"account_id":2590909,"reputation":3911,"user_id":2245634,"accept_rate":61,"display_name":"王奕然"},"score":0,"creation_date":1377406529,"post_id":18425050,"comment_id":27070286,"body_markdown":"i try use your code,and call shutdown(),but never terminate,and print &quot;loop&quot; forever:public class TestThread9 implements Runnable{\n\t@Override\n\tpublic void run() {\n\t\twhile (!Thread.interrupted()) {System.out.println(&quot;loop&quot;); try {\n\t\t\tThread.sleep(1000);\n\t\t} catch (InterruptedException e) {\n\t\t\t// TODO Auto-generated catch block\n\t\t\te.printStackTrace();\n\t\t}}\n\t}\n\tpublic static void main(String[] args) throws InterruptedException {\n\t\tExecutorService eService = Executors.newFixedThreadPool(2);\n\t\teService.execute(new TestThread9());\n\t\teService.execute(new TestThread9());\n\t\teService.shutdown();\n\t}","body":"i try use your code,and call shutdown(),but never terminate,and print &quot;loop&quot; forever:public class TestThread9 implements Runnable{ \t@Override \tpublic void run() { \t\twhile (!Thread.interrupted()) {System.out.println(&quot;loop&quot;); try { \t\t\tThread.sleep(1000); \t\t} catch (InterruptedException e) { \t\t\t// TODO Auto-generated catch block \t\t\te.printStackTrace(); \t\t}} \t} \tpublic static void main(String[] args) throws InterruptedException { \t\tExecutorService eService = Executors.newFixedThreadPool(2); \t\teService.execute(new TestThread9()); \t\teService.execute(new TestThread9()); \t\teService.shutdown(); \t}"},{"owner":{"account_id":2123179,"reputation":10932,"user_id":1886012,"display_name":"bowmore"},"score":25,"creation_date":1377419552,"post_id":18425050,"comment_id":27072308,"body_markdown":"Note that `shutdown()` does not interrupt already executing tasks. From javadoc : &quot;Initiates an orderly shutdown in which previously submitted tasks are executed, but no new tasks will be accepted.&quot; If you want interruption you should call `shutDownNow()`.","body":"Note that <code>shutdown()</code> does not interrupt already executing tasks. From javadoc : &quot;Initiates an orderly shutdown in which previously submitted tasks are executed, but no new tasks will be accepted.&quot; If you want interruption you should call <code>shutDownNow()</code>."},{"owner":{"account_id":9,"reputation":220303,"user_id":13,"accept_rate":100,"display_name":"C. K. Young"},"score":0,"creation_date":1377433133,"post_id":18425050,"comment_id":27075236,"body_markdown":"@user2245634 What bowmore said. (Just said that to highlight your name, so you get notified.)","body":"@user2245634 What bowmore said. (Just said that to highlight your name, so you get notified.)"},{"owner":{"account_id":3845978,"reputation":799,"user_id":3187521,"accept_rate":0,"display_name":"Amrish Pandey"},"score":0,"creation_date":1435762462,"post_id":18425050,"comment_id":50337907,"body_markdown":"shutdown terminates all the threads and awaitTermination after shutdown is redundant.","body":"shutdown terminates all the threads and awaitTermination after shutdown is redundant."},{"owner":{"account_id":550824,"reputation":1453,"user_id":915441,"accept_rate":83,"display_name":"Yngvar Kristiansen"},"score":2,"creation_date":1469780761,"post_id":18425050,"comment_id":64689417,"body_markdown":"@AmrishPandey No, that&#39;s not what the documentation says. See S.D.&#39;s answer. What you describe is what shutdownNow does.","body":"@AmrishPandey No, that&#39;s not what the documentation says. See S.D.&#39;s answer. What you describe is what shutdownNow does."},{"owner":{"account_id":476484,"reputation":8618,"user_id":887421,"accept_rate":68,"display_name":"Achow"},"score":0,"creation_date":1613710369,"post_id":18425050,"comment_id":117165469,"body_markdown":"The ideal construct is   shutdown() ; followed by if(!awaitTermination) -&gt; shutdownNow()","body":"The ideal construct is   shutdown() ; followed by if(!awaitTermination) -&gt; shutdownNow()"}],"tags":[],"owner":{"account_id":9,"reputation":220303,"user_id":13,"accept_rate":100,"display_name":"C. K. Young"},"comment_count":12,"down_vote_count":1,"up_vote_count":84,"is_accepted":true,"score":83,"last_activity_date":1377397207,"creation_date":1377397207,"answer_id":18425050,"question_id":18425026,"body_markdown":"You should call `shutdown` first. Otherwise, you might be waiting for a very long time, since `awaitTermination` doesn&#39;t actually shut down your executor.\r\n\r\nIf you wanted to wait for tasks to complete, rather than wait for the executor to shut down, then you should use `invokeAll`.","title":"shutdown and awaitTermination which first call have any difference?","body":"<p>You should call <code>shutdown</code> first. Otherwise, you might be waiting for a very long time, since <code>awaitTermination</code> doesn't actually shut down your executor.</p>\n\n<p>If you wanted to wait for tasks to complete, rather than wait for the executor to shut down, then you should use <code>invokeAll</code>.</p>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1377405187,"creation_date":1377405187,"answer_id":18425723,"question_id":18425026,"body_markdown":"After we start the first task ThreadPoolExecutor will start a Thread that will not end even after the task is finished. At least it&#39;s true for a fixed thread pool. This is why we need to call shutdown. After shutdown ThreadPoolExecutor will reject any new  task but will wait for running tasks to finish and then allow the Threads to end. This is why we need awaitTermination after shutdwon.","title":"shutdown and awaitTermination which first call have any difference?","body":"<p>After we start the first task ThreadPoolExecutor will start a Thread that will not end even after the task is finished. At least it's true for a fixed thread pool. This is why we need to call shutdown. After shutdown ThreadPoolExecutor will reject any new  task but will wait for running tasks to finish and then allow the Threads to end. This is why we need awaitTermination after shutdwon.</p>\n"},{"comments":[{"owner":{"account_id":30014,"reputation":20532,"user_id":81520,"accept_rate":84,"display_name":"Peter Perh&#225;č"},"score":2,"creation_date":1450225149,"post_id":18425786,"comment_id":56345904,"body_markdown":"you probably meant milliseconds... 60000s is 16.666 hours.","body":"you probably meant milliseconds... 60000s is 16.666 hours."},{"owner":{"account_id":523757,"reputation":60391,"user_id":3141234,"accept_rate":76,"display_name":"Alexander"},"score":34,"creation_date":1455220311,"post_id":18425786,"comment_id":58404681,"body_markdown":"Don&#39;t do a busy-wait like the second code snippet. Just. Don&#39;t.","body":"Don&#39;t do a busy-wait like the second code snippet. Just. Don&#39;t."},{"owner":{"account_id":14245148,"reputation":949,"user_id":10582056,"display_name":"ahrooran"},"score":0,"creation_date":1626018104,"post_id":18425786,"comment_id":120775853,"body_markdown":"the last code block is what I came for. Thank u so much","body":"the last code block is what I came for. Thank u so much"},{"owner":{"account_id":311010,"reputation":1206,"user_id":624341,"accept_rate":100,"display_name":"Igor Rodriguez"},"score":2,"creation_date":1627035280,"post_id":18425786,"comment_id":121055579,"body_markdown":"@ahrooran as @Alexander noted, you should not use the second block. That kind of empty-bodied `while` loop is known as &quot;busy-wait&quot; and will keep a CPU core at 100% until it completes. That is a waste given that you have the `awaitTermination` method available.","body":"@ahrooran as @Alexander noted, you should not use the second block. That kind of empty-bodied <code>while</code> loop is known as &quot;busy-wait&quot; and will keep a CPU core at 100% until it completes. That is a waste given that you have the <code>awaitTermination</code> method available."},{"owner":{"account_id":14245148,"reputation":949,"user_id":10582056,"display_name":"ahrooran"},"score":1,"creation_date":1627114149,"post_id":18425786,"comment_id":121074220,"body_markdown":"@IgorRodriguez true. But I need that last juice of performance out of the system. I had to benchmark a program","body":"@IgorRodriguez true. But I need that last juice of performance out of the system. I had to benchmark a program"},{"owner":{"account_id":3918931,"reputation":620,"user_id":3242022,"display_name":"downvoteit"},"score":0,"creation_date":1629296366,"post_id":18425786,"comment_id":121649822,"body_markdown":"Add some polling for the 2nd example to limit the number of cycles","body":"Add some polling for the 2nd example to limit the number of cycles"},{"owner":{"account_id":17100453,"reputation":272,"user_id":12649631,"display_name":"Frobeniusnorm"},"score":1,"creation_date":1676737996,"post_id":18425786,"comment_id":133199414,"body_markdown":"@ahrooran but the second one does not guarantee better performance. Your Threadpool usually has enough threads to keep all CPUs busy. When calling awaitTermination the join() Operations of the Threads will block your main Thread until all the Executor Threads are completed, so that it does not waste CPU resources that are better used calculating your result. Thanks to interrupts, the Main Thread will immediately be woken up when the threads have terminated, the timelimit is just an upper bound.","body":"@ahrooran but the second one does not guarantee better performance. Your Threadpool usually has enough threads to keep all CPUs busy. When calling awaitTermination the join() Operations of the Threads will block your main Thread until all the Executor Threads are completed, so that it does not waste CPU resources that are better used calculating your result. Thanks to interrupts, the Main Thread will immediately be woken up when the threads have terminated, the timelimit is just an upper bound."}],"tags":[],"owner":{"account_id":397289,"reputation":17010,"user_id":761330,"accept_rate":97,"display_name":"Terry Li"},"comment_count":7,"down_vote_count":5,"up_vote_count":29,"is_accepted":false,"score":24,"last_activity_date":1377408361,"creation_date":1377405955,"answer_id":18425786,"question_id":18425026,"body_markdown":"[shutdown][1] means the executor service takes no more incoming tasks.\r\n\r\n[awaitTermination][2]  is invoked after a shutdown request.\r\n\r\nYou need to first shut down the service and then block and wait for threads to finish.\r\n\r\nIf you want to see all threads finish running and insist on using `awaiTermination`, you need to set the timeout parameter to be big enough. So you could do:\r\n\r\n    eService.shutdown();\r\n    if (!eService.awaitTermination(60000, TimeUnit.SECONDS))\r\n        System.err.println(&quot;Threads didn&#39;t finish in 60000 seconds!&quot;);\r\n    }\r\n\r\nAlternatively, you could do:\r\n\r\n    eService.shutdown();\r\n    while (!eService.isTerminated()) {\r\n\r\n    }\r\n\r\nThis way you are able to ensure all threads are finished running unless they are interrupted unexpectedly.\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#shutdown%28%29\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#awaitTermination%28long,%20java.util.concurrent.TimeUnit%29","title":"shutdown and awaitTermination which first call have any difference?","body":"<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#shutdown%28%29\">shutdown</a> means the executor service takes no more incoming tasks.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#awaitTermination%28long,%20java.util.concurrent.TimeUnit%29\">awaitTermination</a>  is invoked after a shutdown request.</p>\n\n<p>You need to first shut down the service and then block and wait for threads to finish.</p>\n\n<p>If you want to see all threads finish running and insist on using <code>awaiTermination</code>, you need to set the timeout parameter to be big enough. So you could do:</p>\n\n<pre><code>eService.shutdown();\nif (!eService.awaitTermination(60000, TimeUnit.SECONDS))\n    System.err.println(\"Threads didn't finish in 60000 seconds!\");\n}\n</code></pre>\n\n<p>Alternatively, you could do:</p>\n\n<pre><code>eService.shutdown();\nwhile (!eService.isTerminated()) {\n\n}\n</code></pre>\n\n<p>This way you are able to ensure all threads are finished running unless they are interrupted unexpectedly.</p>\n"},{"comments":[{"owner":{"account_id":3156329,"reputation":5805,"user_id":2668666,"accept_rate":76,"display_name":"jmrah"},"score":26,"creation_date":1486861856,"post_id":18426020,"comment_id":71528966,"body_markdown":"I do not understand the documentation for shutdown.  It first says &quot;previously submitted tasks are executed&quot; and then it says &quot;this method does not wait for previously submitted tasks to complete execution.&quot;  So, will my tasks run to completion or not?","body":"I do not understand the documentation for shutdown.  It first says &quot;previously submitted tasks are executed&quot; and then it says &quot;this method does not wait for previously submitted tasks to complete execution.&quot;  So, will my tasks run to completion or not?"},{"owner":{"account_id":1251686,"reputation":29348,"user_id":1531054,"accept_rate":95,"display_name":"s.d"},"score":32,"creation_date":1486972536,"post_id":18426020,"comment_id":71559763,"body_markdown":"@jrahhali It means method call returns immediately. I.e. the thread that calls `shutdown` does not blocks.","body":"@jrahhali It means method call returns immediately. I.e. the thread that calls <code>shutdown</code> does not blocks."},{"owner":{"account_id":3156329,"reputation":5805,"user_id":2668666,"accept_rate":76,"display_name":"jmrah"},"score":16,"creation_date":1486993689,"post_id":18426020,"comment_id":71572404,"body_markdown":"Ahh, does not block.  That makes sense now.  They should&#39;ve used that word instead of wait.  Thanks.","body":"Ahh, does not block.  That makes sense now.  They should&#39;ve used that word instead of wait.  Thanks."},{"owner":{"account_id":1447743,"reputation":2678,"user_id":1379730,"accept_rate":52,"display_name":"Jason"},"score":1,"creation_date":1638221170,"post_id":18426020,"comment_id":124026135,"body_markdown":"One slight modification on @S.D.&#39;s answer. Where they say that &quot;`shutdown` does not wait for previously submitted tasks to complete execution&quot;, I believe they mean that the current thread does _not_ **block** until the previously submitted tasks complete execution.","body":"One slight modification on @S.D.&#39;s answer. Where they say that &quot;<code>shutdown</code> does not wait for previously submitted tasks to complete execution&quot;, I believe they mean that the current thread does <i>not</i> <b>block</b> until the previously submitted tasks complete execution."}],"tags":[],"owner":{"account_id":1251686,"reputation":29348,"user_id":1531054,"accept_rate":95,"display_name":"s.d"},"comment_count":4,"down_vote_count":4,"up_vote_count":61,"is_accepted":false,"score":57,"last_activity_date":1530179596,"creation_date":1377408584,"answer_id":18426020,"question_id":18425026,"body_markdown":"Reading the documentation always helps:\r\n\r\n**[shutdownNow][1]** :\r\n\r\n&gt; Attempts to stop all actively executing tasks, halts the processing of\r\n&gt; waiting tasks, and returns a list of the tasks that were awaiting\r\n&gt; execution. These tasks are drained (removed) from the task queue upon\r\n&gt; return from this method.\r\n&gt; \r\n&gt; This method **does not wait for actively executing tasks to terminate.**\r\n&gt; Use awaitTermination to do that.\r\n&gt; \r\n&gt; There are no guarantees beyond best-effort attempts to stop processing\r\n&gt; actively executing tasks. This implementation cancels tasks via\r\n&gt; Thread.interrupt(), so any task that fails to respond to interrupts\r\n&gt; may never terminate\r\n\r\n**[shutdown][2]:**\r\n\r\n&gt; Initiates an orderly shutdown in which **previously submitted tasks are\r\n&gt; executed, but no new tasks will be accepted.** Invocation has no\r\n&gt; additional effect if already shut down.\r\n&gt; \r\n&gt; This method does not wait for previously submitted tasks to complete\r\n&gt; execution. Use `awaitTermination` to do that.\r\n\r\n**[awaitTermination][3]:**\r\n\r\n&gt; **Blocks until all tasks have completed execution after a shutdown request**, or the timeout occurs, or the current thread is interrupted,\r\n&gt; whichever happens first.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html#shutdownNow--\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html#shutdown--\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html#awaitTermination-long-java.util.concurrent.TimeUnit-","title":"shutdown and awaitTermination which first call have any difference?","body":"<p>Reading the documentation always helps:</p>\n\n<p><strong><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html#shutdownNow--\" rel=\"noreferrer\">shutdownNow</a></strong> :</p>\n\n<blockquote>\n  <p>Attempts to stop all actively executing tasks, halts the processing of\n  waiting tasks, and returns a list of the tasks that were awaiting\n  execution. These tasks are drained (removed) from the task queue upon\n  return from this method.</p>\n  \n  <p>This method <strong>does not wait for actively executing tasks to terminate.</strong>\n  Use awaitTermination to do that.</p>\n  \n  <p>There are no guarantees beyond best-effort attempts to stop processing\n  actively executing tasks. This implementation cancels tasks via\n  Thread.interrupt(), so any task that fails to respond to interrupts\n  may never terminate</p>\n</blockquote>\n\n<p><strong><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html#shutdown--\" rel=\"noreferrer\">shutdown</a>:</strong></p>\n\n<blockquote>\n  <p>Initiates an orderly shutdown in which <strong>previously submitted tasks are\n  executed, but no new tasks will be accepted.</strong> Invocation has no\n  additional effect if already shut down.</p>\n  \n  <p>This method does not wait for previously submitted tasks to complete\n  execution. Use <code>awaitTermination</code> to do that.</p>\n</blockquote>\n\n<p><strong><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html#awaitTermination-long-java.util.concurrent.TimeUnit-\" rel=\"noreferrer\">awaitTermination</a>:</strong></p>\n\n<blockquote>\n  <p><strong>Blocks until all tasks have completed execution after a shutdown request</strong>, or the timeout occurs, or the current thread is interrupted,\n  whichever happens first.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2181800,"reputation":552,"user_id":3094331,"accept_rate":73,"display_name":"user3094331"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1560751342,"creation_date":1516270192,"answer_id":48318680,"question_id":18425026,"body_markdown":"You need to call `shutdownNow()` method after the `awaitTermination()` method call happened. Then only you can find out the actual usage of `awaitTermination()` method.","title":"shutdown and awaitTermination which first call have any difference?","body":"<p>You need to call <code>shutdownNow()</code> method after the <code>awaitTermination()</code> method call happened. Then only you can find out the actual usage of <code>awaitTermination()</code> method.</p>\n"},{"tags":[],"owner":{"account_id":16147545,"reputation":31,"user_id":11656780,"display_name":"user11656780"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1560748651,"creation_date":1560740440,"answer_id":56624228,"question_id":18425026,"body_markdown":"```java\r\nexecutorService.execute(runnableTask);  \r\n\r\n//executorService.shutdown(); //it will make the executorService stop accepting new tasks\r\n//executorService.shutdownNow(); //tires to destroy the executorService immediately, but it doesn&#39;t guarantee that all the running threads will be destroyed at the same time. This method returns list of tasks which are waiting to be processed.\r\n//List&lt;Runnable&gt; notExecutedTasks = executorService.shutdownNow(); //this method returns list of tasks which are waiting to be processed.developer decide what to do with theses tasks?\r\n\r\n//one good way to shutdown the executorService is use both of these methods combined with the awaitTermination\r\nexecutorService.shutdown();\r\ntry{\r\n    if(!executorService.awaitTermination(1000, TimeUnit.MICROSECONDS)) {\r\n        executorService.shutdownNow();\r\n    }\r\n}catch (InterruptedException e){\r\n    e.printStackTrace();\r\n}\r\n```","title":"shutdown and awaitTermination which first call have any difference?","body":"<pre class=\"lang-java prettyprint-override\"><code>executorService.execute(runnableTask);  \n\n//executorService.shutdown(); //it will make the executorService stop accepting new tasks\n//executorService.shutdownNow(); //tires to destroy the executorService immediately, but it doesn't guarantee that all the running threads will be destroyed at the same time. This method returns list of tasks which are waiting to be processed.\n//List&lt;Runnable&gt; notExecutedTasks = executorService.shutdownNow(); //this method returns list of tasks which are waiting to be processed.developer decide what to do with theses tasks?\n\n//one good way to shutdown the executorService is use both of these methods combined with the awaitTermination\nexecutorService.shutdown();\ntry{\n    if(!executorService.awaitTermination(1000, TimeUnit.MICROSECONDS)) {\n        executorService.shutdownNow();\n    }\n}catch (InterruptedException e){\n    e.printStackTrace();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2080635,"reputation":4105,"user_id":1852693,"accept_rate":71,"display_name":"Dexter"},"score":1,"creation_date":1599753249,"post_id":57383461,"comment_id":112878259,"body_markdown":"IMHO, instead of awaitTermination(long timeout, TimeUnit unit), shutdown(long timeout, TimeUnit unit) would have been less confusing. Then would not have to call shutdown() first, then awaitTermination(..). Can any one enlighten on the logic behind a separate method instead of overloading shutdown() ?","body":"IMHO, instead of awaitTermination(long timeout, TimeUnit unit), shutdown(long timeout, TimeUnit unit) would have been less confusing. Then would not have to call shutdown() first, then awaitTermination(..). Can any one enlighten on the logic behind a separate method instead of overloading shutdown() ?"},{"owner":{"account_id":5546216,"reputation":856,"user_id":4400812,"accept_rate":100,"display_name":"n1nsa1d00"},"score":0,"creation_date":1637075330,"post_id":57383461,"comment_id":123725399,"body_markdown":"What if awaitTermination exit the block and there are still tasks running? How do you make sure all the task in the pool are terminated/killed (if timeout is reached) before proceeding?","body":"What if awaitTermination exit the block and there are still tasks running? How do you make sure all the task in the pool are terminated/killed (if timeout is reached) before proceeding?"},{"owner":{"account_id":6845240,"reputation":1517,"user_id":5291521,"accept_rate":67,"display_name":"Ashwani Tiwari"},"score":0,"creation_date":1637077502,"post_id":57383461,"comment_id":123726526,"body_markdown":"As I mentioned in answer, we just call awaitTermination before calling shutdownNow(), giving some time to task in pool to execute or complete. If they not completed in the given time , you will shutdown the executor","body":"As I mentioned in answer, we just call awaitTermination before calling shutdownNow(), giving some time to task in pool to execute or complete. If they not completed in the given time , you will shutdown the executor"},{"owner":{"account_id":352002,"reputation":3871,"user_id":688843,"accept_rate":87,"display_name":"Buffalo"},"score":0,"creation_date":1668075382,"post_id":57383461,"comment_id":131320978,"body_markdown":"Isn&#39;t _awaitTermination()_ useless if used after _shutdown()_?","body":"Isn&#39;t <i>awaitTermination()</i> useless if used after <i>shutdown()</i>?"}],"tags":[],"owner":{"account_id":6845240,"reputation":1517,"user_id":5291521,"accept_rate":67,"display_name":"Ashwani Tiwari"},"comment_count":4,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1599753754,"creation_date":1565122870,"answer_id":57383461,"question_id":18425026,"body_markdown":"**Main Difference**\r\n\r\n**shutdown()**-  \r\n         \r\n    1. Doesn&#39;t block the calling a thread i.e. the thread who called the shutdown().\r\n    2. Excecutor doesn&#39;t accept any new task after calling shutdown().\r\n\r\n**awaitTermination()** - \r\n\r\n    1. Blocks the calling thread. (as join() method do)\r\n  \r\n**Point of Confusion:-** \r\n**If shutdown() does not kill the previously submitted tasks, why do we need  awaitTermination()?**\r\n\r\n   awaitTermination means waiting for the tasks to be completed/terminated, right? `shutdown()` is doing the same- waiting for any task which is already submitted along with the running tasks to continue till completed/terminated, then why another method `awaitTermination(..)`? Below is the explanation:\r\n\r\nSuppose you can wait for **10 min only** to complete all the task that are submitted and after that want to call `shutdownNow()`(---you already know what it do) then use `awaitTermination(long timeout, TimeUnit unit)` after calling shutdown().\r\n\r\nNotice the method arguments in `awaitTermination(long timeout, TimeUnit unit)`. This timeout is the key here.\r\n\r\nIf there is no time restriction, shutdown() is OK. No need of awaitTermination().\r\n\r\n","title":"shutdown and awaitTermination which first call have any difference?","body":"<p><strong>Main Difference</strong></p>\n<p><strong>shutdown()</strong>-</p>\n<pre><code>1. Doesn't block the calling a thread i.e. the thread who called the shutdown().\n2. Excecutor doesn't accept any new task after calling shutdown().\n</code></pre>\n<p><strong>awaitTermination()</strong> -</p>\n<pre><code>1. Blocks the calling thread. (as join() method do)\n</code></pre>\n<p><strong>Point of Confusion:-</strong>\n<strong>If shutdown() does not kill the previously submitted tasks, why do we need  awaitTermination()?</strong></p>\n<p>awaitTermination means waiting for the tasks to be completed/terminated, right? <code>shutdown()</code> is doing the same- waiting for any task which is already submitted along with the running tasks to continue till completed/terminated, then why another method <code>awaitTermination(..)</code>? Below is the explanation:</p>\n<p>Suppose you can wait for <strong>10 min only</strong> to complete all the task that are submitted and after that want to call <code>shutdownNow()</code>(---you already know what it do) then use <code>awaitTermination(long timeout, TimeUnit unit)</code> after calling shutdown().</p>\n<p>Notice the method arguments in <code>awaitTermination(long timeout, TimeUnit unit)</code>. This timeout is the key here.</p>\n<p>If there is no time restriction, shutdown() is OK. No need of awaitTermination().</p>\n"},{"tags":[],"owner":{"account_id":12356669,"reputation":1027,"user_id":9012649,"display_name":"Gawain"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565338558,"creation_date":1565338558,"answer_id":57426047,"question_id":18425026,"body_markdown":"From Java8 ThreadPool awaitTermination method:\r\n\r\n        try {\r\n            for (;;) {\r\n                if (runStateAtLeast(ctl.get(), TERMINATED))\r\n                    return true;\r\n                if (nanos &lt;= 0)\r\n                    return false;\r\n                nanos = termination.awaitNanos(nanos);\r\n            }\r\n        } finally {\r\n            mainLock.unlock();\r\n        }\r\n\r\nIt will first check run state of thread pool. And if the thread pool is not shut down(which set run state to terminated), awaitTermination method will not return until timeout. This explains why await a long time if you await first then shutdown.","title":"shutdown and awaitTermination which first call have any difference?","body":"<p>From Java8 ThreadPool awaitTermination method:</p>\n\n<pre><code>    try {\n        for (;;) {\n            if (runStateAtLeast(ctl.get(), TERMINATED))\n                return true;\n            if (nanos &lt;= 0)\n                return false;\n            nanos = termination.awaitNanos(nanos);\n        }\n    } finally {\n        mainLock.unlock();\n    }\n</code></pre>\n\n<p>It will first check run state of thread pool. And if the thread pool is not shut down(which set run state to terminated), awaitTermination method will not return until timeout. This explains why await a long time if you await first then shutdown.</p>\n"},{"comments":[{"owner":{"account_id":18231926,"reputation":111,"user_id":13270701,"display_name":"hayden.mumm"},"score":1,"creation_date":1691009205,"post_id":58527640,"comment_id":135434331,"body_markdown":"This answer is exactly what I was looking for. Could perhaps use some more explanation as to what is going on though.","body":"This answer is exactly what I was looking for. Could perhaps use some more explanation as to what is going on though."},{"owner":{"account_id":125029,"reputation":330,"user_id":682256,"display_name":"Simon Logic"},"score":0,"creation_date":1698215989,"post_id":58527640,"comment_id":136375300,"body_markdown":"why not to use finally block with single call to executor.shutdownNow() ?","body":"why not to use finally block with single call to executor.shutdownNow() ?"}],"tags":[],"owner":{"account_id":16007610,"reputation":131,"user_id":11552743,"display_name":"Xavy Guzman"},"comment_count":2,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1624992126,"creation_date":1571849530,"answer_id":58527640,"question_id":18425026,"body_markdown":"The best implementation:\t\t    \t\r\n\r\n    executor.shutdown();\r\n\ttry {\r\n        if (!executor.awaitTermination(3500, TimeUnit.MILLISECONDS)) {\r\n\t\t    executor.shutdownNow();\r\n\t\t}\t\t\t    \t\r\n\t} catch (InterruptedException e) {\t\t\t\t\r\n\t    executor.shutdownNow();\r\n\t}\r\n\t\t\t","title":"shutdown and awaitTermination which first call have any difference?","body":"<p>The best implementation:</p>\n<pre><code>executor.shutdown();\ntry {\n    if (!executor.awaitTermination(3500, TimeUnit.MILLISECONDS)) {\n        executor.shutdownNow();\n    }                   \n} catch (InterruptedException e) {              \n    executor.shutdownNow();\n}\n        \n</code></pre>\n"},{"tags":[],"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691142305,"creation_date":1691140724,"answer_id":76834552,"question_id":18425026,"body_markdown":"`shutdown()` will stop the executor from taking anymore tasks and lets the tasks which are in execution to complete. The call won&#39;t block the current Thread.\r\n\r\n`awaitTermination(1, TimeUnit.NANOSECONDS)` will wait for the executor to complete the execution for that given amount of time. Note, it is a blocking call.\r\n\r\nIf your priority is to let the executor complete its execution before terminating, then a simple call to `shutdown()` will do the job.\r\n\r\nHowever, in some scenarios we might want to shutdown the executor after a given period of time, regardless of the tasks completing its execution. For those scenarios you can have something like below:\r\n\r\n```java\r\nRunnable runnable = () -&gt; System.out.println(&quot;Some tasks.&quot;);\r\nExecutorService eService = Executors.newFixedThreadPool(2);\r\neService.execute(runnable);\r\neService.execute(runnable);\r\neService.execute(runnable);\r\neService.execute(runnable);\r\n\r\neService.shutdown();\r\ntry {\r\n    int waitCount = 0;\r\n    // blocking the Thread for 1 minute. If awaitTermination() returns true then executor is shutdown\r\n    while (!eService.awaitTermination(1, TimeUnit.MINUTES)) {\r\n        waitCount++;\r\n        if (waitCount == 60) { // waited for 60 minutes to complete execution\r\n            List&lt;Runnable&gt; runnableList = eService.shutdownNow();\r\n            System.out.println(&quot;ThreadPool forcefully shutdown with &quot; + runnableList.size() + &quot; tasks remaining.&quot;);\r\n            break;\r\n        }\r\n\r\n    }\r\n} catch (InterruptedException e) {\r\n    eService.shutdownNow();\r\n    System.err.println(&quot;ThreadPool shutdown interrupted.&quot;);\r\n    Thread.currentThread().interrupt();\r\n}\r\n```","title":"shutdown and awaitTermination which first call have any difference?","body":"<p><code>shutdown()</code> will stop the executor from taking anymore tasks and lets the tasks which are in execution to complete. The call won't block the current Thread.</p>\n<p><code>awaitTermination(1, TimeUnit.NANOSECONDS)</code> will wait for the executor to complete the execution for that given amount of time. Note, it is a blocking call.</p>\n<p>If your priority is to let the executor complete its execution before terminating, then a simple call to <code>shutdown()</code> will do the job.</p>\n<p>However, in some scenarios we might want to shutdown the executor after a given period of time, regardless of the tasks completing its execution. For those scenarios you can have something like below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Runnable runnable = () -&gt; System.out.println(&quot;Some tasks.&quot;);\nExecutorService eService = Executors.newFixedThreadPool(2);\neService.execute(runnable);\neService.execute(runnable);\neService.execute(runnable);\neService.execute(runnable);\n\neService.shutdown();\ntry {\n    int waitCount = 0;\n    // blocking the Thread for 1 minute. If awaitTermination() returns true then executor is shutdown\n    while (!eService.awaitTermination(1, TimeUnit.MINUTES)) {\n        waitCount++;\n        if (waitCount == 60) { // waited for 60 minutes to complete execution\n            List&lt;Runnable&gt; runnableList = eService.shutdownNow();\n            System.out.println(&quot;ThreadPool forcefully shutdown with &quot; + runnableList.size() + &quot; tasks remaining.&quot;);\n            break;\n        }\n\n    }\n} catch (InterruptedException e) {\n    eService.shutdownNow();\n    System.err.println(&quot;ThreadPool shutdown interrupted.&quot;);\n    Thread.currentThread().interrupt();\n}\n</code></pre>\n"}],"owner":{"account_id":2590909,"reputation":3911,"user_id":2245634,"accept_rate":61,"display_name":"王奕然"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":126000,"favorite_count":0,"down_vote_count":0,"up_vote_count":77,"accepted_answer_id":18425050,"answer_count":10,"score":77,"last_activity_date":1691142305,"creation_date":1377397069,"question_id":18425026,"body_markdown":"What is the difference between\r\n\r\n    ExecutorService eService = Executors.newFixedThreadPool(2);\r\n    eService.execute(new TestThread6());\r\n    eService.execute(new TestThread6());\r\n    eService.execute(new TestThread6());\r\n    eService.awaitTermination(1, TimeUnit.NANOSECONDS);\r\n    eService.shutdown();\r\n\r\nand\r\n\r\n    eService.shutdown();\r\n    eService.awaitTermination(1, TimeUnit.NANOSECONDS);\r\n\r\n\r\nI don&#39;t really understand `shutdown()`. This method does not wait for previously submitted tasks to complete execution. Does it mean `shutdown()` may terminate the tasks which have been submitted, but not completed? I tried some examples, they do not prove it, please give me an example. \r\n","title":"shutdown and awaitTermination which first call have any difference?","body":"<p>What is the difference between</p>\n\n<pre><code>ExecutorService eService = Executors.newFixedThreadPool(2);\neService.execute(new TestThread6());\neService.execute(new TestThread6());\neService.execute(new TestThread6());\neService.awaitTermination(1, TimeUnit.NANOSECONDS);\neService.shutdown();\n</code></pre>\n\n<p>and</p>\n\n<pre><code>eService.shutdown();\neService.awaitTermination(1, TimeUnit.NANOSECONDS);\n</code></pre>\n\n<p>I don't really understand <code>shutdown()</code>. This method does not wait for previously submitted tasks to complete execution. Does it mean <code>shutdown()</code> may terminate the tasks which have been submitted, but not completed? I tried some examples, they do not prove it, please give me an example. </p>\n"},{"tags":["java","multithreading","thread-safety","encryption"],"answers":[{"tags":[],"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":0,"down_vote_count":0,"up_vote_count":112,"is_accepted":true,"score":112,"last_activity_date":1691142288,"creation_date":1312552739,"answer_id":6957496,"question_id":6957406,"body_markdown":"No, it isn&#39;t. The instance is stateful. So you need to store it threadlocal, or to obtain a new instance on every encrypt/decrypt call, or to wrap it in a `synchronized(cipher)` block.\r\n\r\nThreadsafety is usually mentioned in javadocs as &quot;[is thread safe][1]&quot; or &quot;[is **not** thread safe][2]&quot;. This is not the case for [`Cipher`][3], so you should not assume it to be threadsafe.\r\n\r\n\r\n  [1]: https://www.google.com/search?q=%22is%20thread%20safe%22%20site:https://docs.oracle.com/en/java/javase\r\n  [2]: https://www.google.com/search?q=%22is%20not%20thread%20safe%22%20site:https://docs.oracle.com/en/java/javase\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/javax/crypto/Cipher.html","title":"Is Cipher thread-safe?","body":"<p>No, it isn't. The instance is stateful. So you need to store it threadlocal, or to obtain a new instance on every encrypt/decrypt call, or to wrap it in a <code>synchronized(cipher)</code> block.</p>\n<p>Threadsafety is usually mentioned in javadocs as &quot;<a href=\"https://www.google.com/search?q=%22is%20thread%20safe%22%20site:https://docs.oracle.com/en/java/javase\" rel=\"nofollow noreferrer\">is thread safe</a>&quot; or &quot;<a href=\"https://www.google.com/search?q=%22is%20not%20thread%20safe%22%20site:https://docs.oracle.com/en/java/javase\" rel=\"nofollow noreferrer\">is <strong>not</strong> thread safe</a>&quot;. This is not the case for <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/javax/crypto/Cipher.html\" rel=\"nofollow noreferrer\"><code>Cipher</code></a>, so you should not assume it to be threadsafe.</p>\n"},{"comments":[{"owner":{"account_id":1853477,"reputation":4132,"user_id":1679516,"display_name":"Darrell Teague"},"score":1,"creation_date":1458742994,"post_id":6957539,"comment_id":59996670,"body_markdown":"From JavaDocs for Cipher init(): &quot;Note that when a Cipher object is initialized, it loses all previously-acquired state. In other words, initializing a Cipher is equivalent to creating a new instance of that Cipher and initializing it.&quot; https://docs.oracle.com/javase/7/docs/api/javax/crypto/Cipher.html#init(int,%20java.security.Key)","body":"From JavaDocs for Cipher init(): &quot;Note that when a Cipher object is initialized, it loses all previously-acquired state. In other words, initializing a Cipher is equivalent to creating a new instance of that Cipher and initializing it.&quot; <a href=\"https://docs.oracle.com/javase/7/docs/api/javax/crypto/Cipher.html#init(int,%20java.security.Key)\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/javax/crypto/&hellip;</a>"},{"owner":{"account_id":2821173,"reputation":567,"user_id":2424904,"accept_rate":62,"display_name":"RachitSharma"},"score":0,"creation_date":1625026063,"post_id":6957539,"comment_id":120514114,"body_markdown":"Rightly said @ddso","body":"Rightly said @ddso"}],"tags":[],"owner":{"account_id":79546,"reputation":1731,"user_id":225467,"display_name":"ddso"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1312552893,"creation_date":1312552893,"answer_id":6957539,"question_id":6957406,"body_markdown":"I wouldn&#39;t use Cipher objects from multiple threads without synchronization. When you look at the API, there are methods which can only work by changing internal state, such as `init()` and `update()`. That makes them implicitly non-thread-safe.","title":"Is Cipher thread-safe?","body":"<p>I wouldn't use Cipher objects from multiple threads without synchronization. When you look at the API, there are methods which can only work by changing internal state, such as <code>init()</code> and <code>update()</code>. That makes them implicitly non-thread-safe.</p>\n"},{"tags":[],"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1510174992,"creation_date":1312553201,"answer_id":6957605,"question_id":6957406,"body_markdown":"Even if a Cipher was thread-safe, it would not really be useful to use it from multiple threads concurrently.\r\n\r\nThe bytes you put into and get out of the Cipher (via its `update` and `finish` methods) are a continuous stream. This means, on the other end, they have to be passed in the same order to make any sense. This is easiest to accomplish if you have only one thread doing this.\r\n\r\nIf you are using multiple threads, you usually would want to call `reset` between the calls - and then you will need external synchronization anyways.","title":"Is Cipher thread-safe?","body":"<p>Even if a Cipher was thread-safe, it would not really be useful to use it from multiple threads concurrently.</p>\n\n<p>The bytes you put into and get out of the Cipher (via its <code>update</code> and <code>finish</code> methods) are a continuous stream. This means, on the other end, they have to be passed in the same order to make any sense. This is easiest to accomplish if you have only one thread doing this.</p>\n\n<p>If you are using multiple threads, you usually would want to call <code>reset</code> between the calls - and then you will need external synchronization anyways.</p>\n"},{"tags":[],"owner":{"account_id":2054137,"reputation":580,"user_id":1832387,"display_name":"Anton Yuriev"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1539266145,"creation_date":1539266145,"answer_id":52761901,"question_id":6957406,"body_markdown":"Cipher is not thread safe. \r\n\r\nIf you use multithreading for performance and don&#39;t want to do synchronization, you can use Jasypt (http://www.jasypt.org/general-usage.html) it has pooled encryptors: PooledPBEByteEncryptor, PooledPBEStringEncryptor.\r\n\r\nIf synchronization is ok for you and you use Spring. You can use Encryptors (https://docs.spring.io/spring-security/site/docs/4.2.5.RELEASE/apidocs/org/springframework/security/crypto/encrypt/Encryptors.html). They do synchronization internally to access Cipher.","title":"Is Cipher thread-safe?","body":"<p>Cipher is not thread safe. </p>\n\n<p>If you use multithreading for performance and don't want to do synchronization, you can use Jasypt (<a href=\"http://www.jasypt.org/general-usage.html\" rel=\"noreferrer\">http://www.jasypt.org/general-usage.html</a>) it has pooled encryptors: PooledPBEByteEncryptor, PooledPBEStringEncryptor.</p>\n\n<p>If synchronization is ok for you and you use Spring. You can use Encryptors (<a href=\"https://docs.spring.io/spring-security/site/docs/4.2.5.RELEASE/apidocs/org/springframework/security/crypto/encrypt/Encryptors.html\" rel=\"noreferrer\">https://docs.spring.io/spring-security/site/docs/4.2.5.RELEASE/apidocs/org/springframework/security/crypto/encrypt/Encryptors.html</a>). They do synchronization internally to access Cipher.</p>\n"}],"owner":{"account_id":31293,"reputation":43494,"user_id":85821,"accept_rate":73,"display_name":"Bart van Heukelom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29807,"favorite_count":0,"down_vote_count":0,"up_vote_count":65,"accepted_answer_id":6957496,"answer_count":4,"score":65,"last_activity_date":1691142288,"creation_date":1312552349,"question_id":6957406,"body_markdown":"Quite simply, can one instance of `javax.crypto.Cipher` (e.g. `Cipher.getInstance(&quot;RSA&quot;)`) be used from multiple threads, or do I need to stick multiple of them in a `ThreadLocal` (in my case)?","title":"Is Cipher thread-safe?","body":"<p>Quite simply, can one instance of <code>javax.crypto.Cipher</code> (e.g. <code>Cipher.getInstance(\"RSA\")</code>) be used from multiple threads, or do I need to stick multiple of them in a <code>ThreadLocal</code> (in my case)?</p>\n"},{"tags":["java","spring","unit-testing","switch-statement","try-catch"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1691134584,"post_id":76833798,"comment_id":135453385,"body_markdown":"Refactor the code so it becomes easier to test. For example, you could create `Success` and `Error` classes and return instances of them, instead of Strings.","body":"Refactor the code so it becomes easier to test. For example, you could create <code>Success</code> and <code>Error</code> classes and return instances of them, instead of Strings."}],"answers":[{"tags":[],"owner":{"account_id":29148860,"reputation":16,"user_id":22330131,"display_name":"Liuzhaowei"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691135256,"creation_date":1691135256,"answer_id":76833944,"question_id":76833798,"body_markdown":"In my practice, you can define a case value, and you can get the case value when have exception, like this:\r\n\r\n    try {\r\n    int caseValue = 1; // replace with actual case value\r\n    switch (caseValue) {\r\n        case 1:\r\n            // code for case 1\r\n            break;\r\n        case 2:\r\n            // code for case 2\r\n            break;\r\n        // add more cases as needed\r\n        default:\r\n            // default case code\r\n        }\r\n    } catch (Exception e) {\r\n        System.out.println(&quot;Exception occurred in case: &quot; + caseValue);\r\n    }\r\n\r\nHope to solve you doubts.","title":"How to testing switch-case if the all case return &quot;error&quot; string?","body":"<p>In my practice, you can define a case value, and you can get the case value when have exception, like this:</p>\n<pre><code>try {\nint caseValue = 1; // replace with actual case value\nswitch (caseValue) {\n    case 1:\n        // code for case 1\n        break;\n    case 2:\n        // code for case 2\n        break;\n    // add more cases as needed\n    default:\n        // default case code\n    }\n} catch (Exception e) {\n    System.out.println(&quot;Exception occurred in case: &quot; + caseValue);\n}\n</code></pre>\n<p>Hope to solve you doubts.</p>\n"},{"tags":[],"owner":{"account_id":23928466,"reputation":13,"user_id":17923300,"display_name":"ProgrammerGnome"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691142149,"creation_date":1691142149,"answer_id":76834732,"question_id":76833798,"body_markdown":"The solution is the following:\r\n\r\n```\r\nverify(TheTestingClass,times(1)).theTestingMethod(str)\r\n```\r\n\r\n","title":"How to testing switch-case if the all case return &quot;error&quot; string?","body":"<p>The solution is the following:</p>\n<pre><code>verify(TheTestingClass,times(1)).theTestingMethod(str)\n</code></pre>\n"}],"owner":{"account_id":23928466,"reputation":13,"user_id":17923300,"display_name":"ProgrammerGnome"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76833944,"answer_count":2,"score":-1,"last_activity_date":1691142149,"creation_date":1691134080,"question_id":76833798,"body_markdown":"I use JUnit and Mockito.\r\nI have a method, who contain switch-cases in a try-catch statement. The all cases return &#39;null&#39; pojo, but this is not problem, because I know which pojo (=case) returned them. But the try-catch block catching returned error, like this the final return is a &quot;error&quot; string. So I can&#39;t explain, who &quot;case&quot; dropped the &quot;error&quot; string. That way I can&#39;t find out if the call was made in the right direction, even though that would be the job.\r\n\r\nThe code sketch:\r\n\r\n\r\n```\r\ntry{\r\nswitch (String str):\r\n    case &quot;a&quot;:\r\n        return mapper.writeValueAsString(sampleService.sampleServiceMethod(samplePojo));\r\n    ...\r\n} catch () {\r\n    return DefaultMethodResult.error.name()\r\n}\r\n```\r\n","title":"How to testing switch-case if the all case return &quot;error&quot; string?","body":"<p>I use JUnit and Mockito.\nI have a method, who contain switch-cases in a try-catch statement. The all cases return 'null' pojo, but this is not problem, because I know which pojo (=case) returned them. But the try-catch block catching returned error, like this the final return is a &quot;error&quot; string. So I can't explain, who &quot;case&quot; dropped the &quot;error&quot; string. That way I can't find out if the call was made in the right direction, even though that would be the job.</p>\n<p>The code sketch:</p>\n<pre><code>try{\nswitch (String str):\n    case &quot;a&quot;:\n        return mapper.writeValueAsString(sampleService.sampleServiceMethod(samplePojo));\n    ...\n} catch () {\n    return DefaultMethodResult.error.name()\n}\n</code></pre>\n"},{"tags":["java","elasticsearch"],"comments":[{"owner":{"account_id":1391655,"reputation":14169,"user_id":1432281,"display_name":"dadoonet"},"score":0,"creation_date":1691142325,"post_id":76834702,"comment_id":135454865,"body_markdown":"Why do you want to display 20000 hits on a page? Instead display 10-100 docs at a time and paginate.","body":"Why do you want to display 20000 hits on a page? Instead display 10-100 docs at a time and paginate."},{"owner":{"account_id":3015679,"reputation":319,"user_id":2557930,"accept_rate":38,"display_name":"user2557930"},"score":0,"creation_date":1691142569,"post_id":76834702,"comment_id":135454919,"body_markdown":"actually on the page i need to display the size of that  querry hits , so i just display the number 20000","body":"actually on the page i need to display the size of that  querry hits , so i just display the number 20000"},{"owner":{"account_id":6875395,"reputation":1037,"user_id":5284011,"display_name":"JohnXF"},"score":0,"creation_date":1691150393,"post_id":76834702,"comment_id":135456336,"body_markdown":"If you want to paginate, then you need to get a count of the records the query will return, work out how many pages there are and then fetch X records per page. Alternatively, you use scrolling and in that case you can just fetch records in smaller chunks - a couple of tens or hundreds at a time. 10,000 records seems a lot to work with/scroll through for a user interface.","body":"If you want to paginate, then you need to get a count of the records the query will return, work out how many pages there are and then fetch X records per page. Alternatively, you use scrolling and in that case you can just fetch records in smaller chunks - a couple of tens or hundreds at a time. 10,000 records seems a lot to work with/scroll through for a user interface."},{"owner":{"account_id":1391655,"reputation":14169,"user_id":1432281,"display_name":"dadoonet"},"score":0,"creation_date":1691158660,"post_id":76834702,"comment_id":135458229,"body_markdown":"It&#39;s better to display first the meaningful documents to the user (the most relevant ones) instead of letting the user paginate 2000 times to find the right information they are looking for.","body":"It&#39;s better to display first the meaningful documents to the user (the most relevant ones) instead of letting the user paginate 2000 times to find the right information they are looking for."}],"owner":{"account_id":3015679,"reputation":319,"user_id":2557930,"accept_rate":38,"display_name":"user2557930"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691141847,"creation_date":1691141847,"question_id":76834702,"body_markdown":" I have an elasticsearch index with some more than 20 000 documents, initially i fetched the documents with  \r\n\r\n    final SearchHits&lt;MyTyp&gt; searchHitsMyTyp =\r\n            elasticsearchCustomTemplate.search(\r\n                    searchQueryMyTyp,\r\n                    MyTyp.class,\r\n                    IndexCoordinates.of(indexSettings.indexMyTypName))\r\n\r\n\r\nand it returned 10 000 documents immediately , so to handle the limitation i have chnaged that code to the following to fetch all records \r\n\r\n     NativeSearchQuery searchQuery =\r\n            new NativeSearchQueryBuilder()\r\n                    .withQuery(\r\n                            QueryBuilders.matchQuery(\r\n                                    &quot;MyTyp_id&quot;, mytyp.getId()))\r\n                    .build();\r\n\t\t\t\t\t\r\n    NativeSearchQueryBuilder queryBuilder = new NativeSearchQueryBuilder();\r\n    queryBuilder.withQuery(QueryBuilders.termQuery(&quot;MyTyp_id&quot;&quot;, mytyp.getId()));\r\n    queryBuilder.withPageable(PageRequest.of(0, 10000));\r\n    queryBuilder.withSort(SortBuilders.fieldSort(&quot;_id&quot;).order(SortOrder.ASC));\r\n\r\n\r\n    queryBuilder.withAggregations(\r\n            AggregationBuilders.filter(\r\n                    &quot;filter_by_id&quot;, QueryBuilders.termQuery(&quot;MyTyp_id&quot;, mytyp.getId())));\r\n    NativeSearchQuery searchQueryMyTyp = queryBuilder.build();\r\n    SearchHit[] searchHitsMyTyp=null;\r\n    final ArrayList&lt;MyTyp&gt; typeList=new ArrayList();\r\n\r\n    do {\r\n      if(searchHitsMyTyp!=null) {\r\n        searchQuery.setSearchAfter(searchHitsMyTyp[searchHitsMyTyp.length - 1].getSortValues().stream().toList());\r\n      }\r\n      searchHitsMyTyp =  elasticsearchCustomTemplate.search(\r\n              searchQueryMyTyp,\r\n              MyTyp.class,\r\n              IndexCoordinates.of(indexSettings.indexMyTypName)).getSearchHits().toArray(new SearchHit[0]);\r\n      typeList.addAll( Arrays.stream(searchHitsMyTyp).map(p-&gt;(MyTyp)p.getContent()).toList());\r\n\r\n\r\n    }while(searchHitsMyTyp.length &gt;= 10000);\r\n\r\nnow the problem is that its so slows that it literally hangs the UI, is there a way to make that calls faster ,\r\nso if returning 10000 results takes 1 sec 20000 should take like 2 sec ,not sure if there is actually a way arround that or its limitation of ElasticSearch and Spring ?","title":"Fetching more thatn 10000 documents from Elasticsearch in Spring too slow","body":"<p>I have an elasticsearch index with some more than 20 000 documents, initially i fetched the documents with</p>\n<pre><code>final SearchHits&lt;MyTyp&gt; searchHitsMyTyp =\n        elasticsearchCustomTemplate.search(\n                searchQueryMyTyp,\n                MyTyp.class,\n                IndexCoordinates.of(indexSettings.indexMyTypName))\n</code></pre>\n<p>and it returned 10 000 documents immediately , so to handle the limitation i have chnaged that code to the following to fetch all records</p>\n<pre><code> NativeSearchQuery searchQuery =\n        new NativeSearchQueryBuilder()\n                .withQuery(\n                        QueryBuilders.matchQuery(\n                                &quot;MyTyp_id&quot;, mytyp.getId()))\n                .build();\n                \nNativeSearchQueryBuilder queryBuilder = new NativeSearchQueryBuilder();\nqueryBuilder.withQuery(QueryBuilders.termQuery(&quot;MyTyp_id&quot;&quot;, mytyp.getId()));\nqueryBuilder.withPageable(PageRequest.of(0, 10000));\nqueryBuilder.withSort(SortBuilders.fieldSort(&quot;_id&quot;).order(SortOrder.ASC));\n\n\nqueryBuilder.withAggregations(\n        AggregationBuilders.filter(\n                &quot;filter_by_id&quot;, QueryBuilders.termQuery(&quot;MyTyp_id&quot;, mytyp.getId())));\nNativeSearchQuery searchQueryMyTyp = queryBuilder.build();\nSearchHit[] searchHitsMyTyp=null;\nfinal ArrayList&lt;MyTyp&gt; typeList=new ArrayList();\n\ndo {\n  if(searchHitsMyTyp!=null) {\n    searchQuery.setSearchAfter(searchHitsMyTyp[searchHitsMyTyp.length - 1].getSortValues().stream().toList());\n  }\n  searchHitsMyTyp =  elasticsearchCustomTemplate.search(\n          searchQueryMyTyp,\n          MyTyp.class,\n          IndexCoordinates.of(indexSettings.indexMyTypName)).getSearchHits().toArray(new SearchHit[0]);\n  typeList.addAll( Arrays.stream(searchHitsMyTyp).map(p-&gt;(MyTyp)p.getContent()).toList());\n\n\n}while(searchHitsMyTyp.length &gt;= 10000);\n</code></pre>\n<p>now the problem is that its so slows that it literally hangs the UI, is there a way to make that calls faster ,\nso if returning 10000 results takes 1 sec 20000 should take like 2 sec ,not sure if there is actually a way arround that or its limitation of ElasticSearch and Spring ?</p>\n"},{"tags":["java","sqlite","jdbc","prepared-statement"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":3,"creation_date":1691064491,"post_id":76827860,"comment_id":135442736,"body_markdown":"Read the Javadoc for Statement.executeUpdate(String). You want to call `s.executeUpdate()`, as you&#39;ve already provided the SQL to `prepareStatement`.","body":"Read the Javadoc for Statement.executeUpdate(String). You want to call <code>s.executeUpdate()</code>, as you&#39;ve already provided the SQL to <code>prepareStatement</code>."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1691064577,"post_id":76827860,"comment_id":135442749,"body_markdown":"@OHGODSPIDERS they are using parameterless prepared statements, as far as I can tell. i.e. the DDL is a static string.","body":"@OHGODSPIDERS they are using parameterless prepared statements, as far as I can tell. i.e. the DDL is a static string."},{"owner":{"account_id":29151929,"reputation":3,"user_id":22332584,"display_name":"SN4K"},"score":0,"creation_date":1691065712,"post_id":76827860,"comment_id":135442990,"body_markdown":"private &lt;T&gt; T wrapException(String sql, @NotNull ThrowingFunction&lt;Statement, T, SQLException&gt; operation) {\n        try(Connection connection = getConnectionType().getConnection()){\n            try (Statement statement = connection.createStatement()) {\n                return operation.apply(statement);\n            }\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\nYou mean to change PreparedStatement to Statement like this ?","body":"private &lt;T&gt; T wrapException(String sql, @NotNull ThrowingFunction&lt;Statement, T, SQLException&gt; operation) {         try(Connection connection = getConnectionType().getConnection()){             try (Statement statement = connection.createStatement()) {                 return operation.apply(statement);             }         } catch (SQLException e) {             throw new RuntimeException(e);         }     }  You mean to change PreparedStatement to Statement like this ?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691065872,"post_id":76827860,"comment_id":135443034,"body_markdown":"That should work, yes. But when you want to provide parameters to your statements you should use prepared statements.","body":"That should work, yes. But when you want to provide parameters to your statements you should use prepared statements."},{"owner":{"account_id":29151929,"reputation":3,"user_id":22332584,"display_name":"SN4K"},"score":0,"creation_date":1691066089,"post_id":76827860,"comment_id":135443089,"body_markdown":"Yes cause with this method i&#39;m unable to parse PreparedStatement in parameters","body":"Yes cause with this method i&#39;m unable to parse PreparedStatement in parameters"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691066368,"post_id":76827860,"comment_id":135443161,"body_markdown":"But none of your functions have parameters, just static SQL, so `createStatement` is fine for what you are doing.","body":"But none of your functions have parameters, just static SQL, so <code>createStatement</code> is fine for what you are doing."}],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691141649,"creation_date":1691141649,"answer_id":76834670,"question_id":76827860,"body_markdown":"The problem is that some of your methods call `executeQuery(String)` or `executeUpdate(String)` on `PreparedStatement`, and this is not allowed by the JDBC API. Conforming implementations are required to throw a `SQLException` if this happens.\r\n\r\nAs documented on [`Statement.executeQuery(String)`][1] (emphasis mine):\r\n\r\n&gt; **Throws:** \\\r\n&gt; `SQLException` - if a database access error occurs, this method is called on a closed `Statement`, the given SQL statement produces anything other than a single `ResultSet` object, **the method is called on a `PreparedStatement` or `CallableStatement`**\r\n\r\nThe same is documented for other `execute` methods on `Statement`.\r\n\r\nYou either need to use `executeQuery()` or `executeUpdate()`, or you need to use a `Statement` instead of a `PreparedStatement`.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Statement.html#executeQuery(java.lang.String)","title":"java.sql.SQLException: method cannot be called on a PreparedStatement","body":"<p>The problem is that some of your methods call <code>executeQuery(String)</code> or <code>executeUpdate(String)</code> on <code>PreparedStatement</code>, and this is not allowed by the JDBC API. Conforming implementations are required to throw a <code>SQLException</code> if this happens.</p>\n<p>As documented on <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Statement.html#executeQuery(java.lang.String)\" rel=\"nofollow noreferrer\"><code>Statement.executeQuery(String)</code></a> (emphasis mine):</p>\n<blockquote>\n<p><strong>Throws:</strong> <br />\n<code>SQLException</code> - if a database access error occurs, this method is called on a closed <code>Statement</code>, the given SQL statement produces anything other than a single <code>ResultSet</code> object, <strong>the method is called on a <code>PreparedStatement</code> or <code>CallableStatement</code></strong></p>\n</blockquote>\n<p>The same is documented for other <code>execute</code> methods on <code>Statement</code>.</p>\n<p>You either need to use <code>executeQuery()</code> or <code>executeUpdate()</code>, or you need to use a <code>Statement</code> instead of a <code>PreparedStatement</code>.</p>\n"}],"owner":{"account_id":29151929,"reputation":3,"user_id":22332584,"display_name":"SN4K"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76834670,"answer_count":1,"score":-1,"last_activity_date":1691141649,"creation_date":1691063957,"question_id":76827860,"body_markdown":"I would like to connect to SQLite database using SQLite using HikariCP.\r\nBut I get an error when I try to run a query.\r\n\r\n```none\r\nException in thread &quot;main&quot; java.lang.RuntimeException: java.sql.SQLException: method cannot be called on a PreparedStatement\r\n\tat StatementUtility.wrapException(StatementUtility.java:110)\r\n\tat StatementUtility.executeUpdate(StatementUtility.java:101)\r\n\tat Database.createTables(Database.java:27)\r\n\tat Database.&lt;init&gt;(Database.java:23)\r\n\tat Main.main(Main.java:10)\r\n```\r\n\r\nHikari Connection Setup:\r\n```java\r\npublic Client () {\r\n    HikariConfig config = new HikariConfig();\r\n    config.setPoolName(&quot;AuthMeSQLitePool&quot;);\r\n    config.setDriverClassName(&quot;org.sqlite.JDBC&quot;);\r\n    config.setConnectionTestQuery(&quot;SELECT 1&quot;);\r\n    config.setJdbcUrl(&quot;jdbc:sqlite:I:/data.db&quot;);\r\n    config.setMaxLifetime(60000);\r\n    config.setIdleTimeout(45000);\r\n    config.setMaximumPoolSize(50);\r\n}\r\n```\r\n\r\nStatementUtility.java:\r\n```java\r\npublic &lt;R&gt; R executeQuery(String sql, ThrowingConsumer&lt;PreparedStatement&gt; cfg, ThrowingFunction&lt;ResultSet, R, SQLException&gt; op) {\r\n    return wrapException(sql, s -&gt; {\r\n        cfg.accept(s);\r\n        return op.apply(s.executeQuery());\r\n    });\r\n}\r\n\r\npublic int executeUpdate(String sql, ThrowingConsumer&lt;PreparedStatement&gt; cfg) {\r\n    return wrapException(sql, s -&gt; {\r\n        cfg.accept(s);\r\n        return s.executeUpdate();\r\n    });\r\n}\r\n\r\npublic &lt;R&gt; R executeQuery(String sql, ThrowingFunction&lt;ResultSet, R, SQLException&gt; op) {\r\n    return wrapException(sql, s -&gt; op.apply(s.executeQuery(sql)));\r\n}\r\n\r\npublic int executeUpdate(String sql) {\r\n    return wrapException(sql, s -&gt; s.executeUpdate(sql));\r\n}\r\n\r\nprivate &lt;T&gt; T wrapException(String sql, @NotNull ThrowingFunction&lt;PreparedStatement, T, SQLException&gt; operation) {\r\n    try(Connection connection = getConnection()){\r\n        try (PreparedStatement statement = connection.prepareStatement(sql)) {\r\n            return operation.apply(statement);\r\n        }\r\n    } catch (SQLException e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n}\r\n\r\n@FunctionalInterface\r\npublic interface ThrowingConsumer&lt;T&gt; extends Consumer&lt;T&gt; {\r\n\r\n    @Override\r\n    default void accept(final T elem) {\r\n        try {\r\n            acceptThrows(elem);\r\n        } catch (final Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    void acceptThrows(T elem) throws Exception;\r\n}\r\n\r\n@FunctionalInterface\r\npublic interface ThrowingFunction&lt;T, R, E extends Exception&gt; {\r\n    R apply(T input) throws E;\r\n}\r\n```\r\n\r\nIt works with native query statement execution, so it is not a connection related problem. Any idea?\r\n","title":"java.sql.SQLException: method cannot be called on a PreparedStatement","body":"<p>I would like to connect to SQLite database using SQLite using HikariCP.\nBut I get an error when I try to run a query.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.RuntimeException: java.sql.SQLException: method cannot be called on a PreparedStatement\n    at StatementUtility.wrapException(StatementUtility.java:110)\n    at StatementUtility.executeUpdate(StatementUtility.java:101)\n    at Database.createTables(Database.java:27)\n    at Database.&lt;init&gt;(Database.java:23)\n    at Main.main(Main.java:10)\n</code></pre>\n<p>Hikari Connection Setup:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Client () {\n    HikariConfig config = new HikariConfig();\n    config.setPoolName(&quot;AuthMeSQLitePool&quot;);\n    config.setDriverClassName(&quot;org.sqlite.JDBC&quot;);\n    config.setConnectionTestQuery(&quot;SELECT 1&quot;);\n    config.setJdbcUrl(&quot;jdbc:sqlite:I:/data.db&quot;);\n    config.setMaxLifetime(60000);\n    config.setIdleTimeout(45000);\n    config.setMaximumPoolSize(50);\n}\n</code></pre>\n<p>StatementUtility.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public &lt;R&gt; R executeQuery(String sql, ThrowingConsumer&lt;PreparedStatement&gt; cfg, ThrowingFunction&lt;ResultSet, R, SQLException&gt; op) {\n    return wrapException(sql, s -&gt; {\n        cfg.accept(s);\n        return op.apply(s.executeQuery());\n    });\n}\n\npublic int executeUpdate(String sql, ThrowingConsumer&lt;PreparedStatement&gt; cfg) {\n    return wrapException(sql, s -&gt; {\n        cfg.accept(s);\n        return s.executeUpdate();\n    });\n}\n\npublic &lt;R&gt; R executeQuery(String sql, ThrowingFunction&lt;ResultSet, R, SQLException&gt; op) {\n    return wrapException(sql, s -&gt; op.apply(s.executeQuery(sql)));\n}\n\npublic int executeUpdate(String sql) {\n    return wrapException(sql, s -&gt; s.executeUpdate(sql));\n}\n\nprivate &lt;T&gt; T wrapException(String sql, @NotNull ThrowingFunction&lt;PreparedStatement, T, SQLException&gt; operation) {\n    try(Connection connection = getConnection()){\n        try (PreparedStatement statement = connection.prepareStatement(sql)) {\n            return operation.apply(statement);\n        }\n    } catch (SQLException e) {\n        throw new RuntimeException(e);\n    }\n}\n\n@FunctionalInterface\npublic interface ThrowingConsumer&lt;T&gt; extends Consumer&lt;T&gt; {\n\n    @Override\n    default void accept(final T elem) {\n        try {\n            acceptThrows(elem);\n        } catch (final Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    void acceptThrows(T elem) throws Exception;\n}\n\n@FunctionalInterface\npublic interface ThrowingFunction&lt;T, R, E extends Exception&gt; {\n    R apply(T input) throws E;\n}\n</code></pre>\n<p>It works with native query statement execution, so it is not a connection related problem. Any idea?</p>\n"},{"tags":["java","spring","spring-batch","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":198628,"reputation":625,"user_id":443398,"display_name":"AdrianVeidt"},"score":0,"creation_date":1437484384,"post_id":19608828,"comment_id":51039305,"body_markdown":"When I did this, the batch job is just never run.","body":"When I did this, the batch job is just never run."}],"tags":[],"owner":{"account_id":207037,"reputation":4836,"user_id":456684,"accept_rate":100,"display_name":"Mark Spangler"},"comment_count":1,"down_vote_count":1,"up_vote_count":11,"is_accepted":true,"score":10,"last_activity_date":1382804563,"creation_date":1382803648,"answer_id":19608828,"question_id":19597683,"body_markdown":"Found the issue.  When using the `@EnableAutoConfiguration` annotation from Spring Boot it will invoke the `org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration` class which will initialize the database from the &#39;schema-mysql.sql&#39; file.\r\n\r\nInside the [schema-mysql.sql][1] file is some code to reset the sequence id&#39;s for the batch meta tables which is why I was getting a duplicate key error:\r\n\r\n    INSERT INTO BATCH_STEP_EXECUTION_SEQ values(0);\r\n    INSERT INTO BATCH_JOB_EXECUTION_SEQ values(0);\r\n    INSERT INTO BATCH_JOB_SEQ values(0);\r\n\r\nThe fix was to build the Spring Batch tables separately &amp; then change the `@EnableAutoConfiguration` annotation to:\r\n\r\n    @EnableAutoConfiguration(exclude={BatchAutoConfiguration.class})\r\n\r\nso that when the application starts up it will not try to initialize the Spring Batch tables.\r\n\r\nTo exclude or customize Spring Boot&#39;s auto-configuration for other components you can find some docs here: http://projects.spring.io/spring-boot/docs/spring-boot-autoconfigure/README.html\r\n\r\nThe BatchAutoConfiguration code:\r\nhttps://github.com/spring-projects/spring-boot/blob/master/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/batch/BatchAutoConfiguration.java\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-batch/blob/master/spring-batch-core/src/main/resources/org/springframework/batch/core/schema-mysql.sql","title":"Duplicate Spring Batch Job Instance","body":"<p>Found the issue.  When using the <code>@EnableAutoConfiguration</code> annotation from Spring Boot it will invoke the <code>org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration</code> class which will initialize the database from the 'schema-mysql.sql' file.</p>\n\n<p>Inside the <a href=\"https://github.com/spring-projects/spring-batch/blob/master/spring-batch-core/src/main/resources/org/springframework/batch/core/schema-mysql.sql\" rel=\"noreferrer\">schema-mysql.sql</a> file is some code to reset the sequence id's for the batch meta tables which is why I was getting a duplicate key error:</p>\n\n<pre><code>INSERT INTO BATCH_STEP_EXECUTION_SEQ values(0);\nINSERT INTO BATCH_JOB_EXECUTION_SEQ values(0);\nINSERT INTO BATCH_JOB_SEQ values(0);\n</code></pre>\n\n<p>The fix was to build the Spring Batch tables separately &amp; then change the <code>@EnableAutoConfiguration</code> annotation to:</p>\n\n<pre><code>@EnableAutoConfiguration(exclude={BatchAutoConfiguration.class})\n</code></pre>\n\n<p>so that when the application starts up it will not try to initialize the Spring Batch tables.</p>\n\n<p>To exclude or customize Spring Boot's auto-configuration for other components you can find some docs here: <a href=\"http://projects.spring.io/spring-boot/docs/spring-boot-autoconfigure/README.html\" rel=\"noreferrer\">http://projects.spring.io/spring-boot/docs/spring-boot-autoconfigure/README.html</a></p>\n\n<p>The BatchAutoConfiguration code:\n<a href=\"https://github.com/spring-projects/spring-boot/blob/master/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/batch/BatchAutoConfiguration.java\" rel=\"noreferrer\">https://github.com/spring-projects/spring-boot/blob/master/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/batch/BatchAutoConfiguration.java</a></p>\n"},{"tags":[],"owner":{"account_id":19174228,"reputation":66,"user_id":14007264,"display_name":"Vinayak Nair"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1626346127,"creation_date":1626344044,"answer_id":68391914,"question_id":19597683,"body_markdown":"I have faced similar problem and tried with above solution as well, but it didn&#39;t work. So I fixed it with a workaround.\r\n\r\nWhile creating spring batch metadata-schema for the table **BATCH_JOB_INSTANCE** add **AUTO_INCREMENT** for the column **JOB_INSTANCE_ID** and it will resolve your problem.\r\n\r\n","title":"Duplicate Spring Batch Job Instance","body":"<p>I have faced similar problem and tried with above solution as well, but it didn't work. So I fixed it with a workaround.</p>\n<p>While creating spring batch metadata-schema for the table <strong>BATCH_JOB_INSTANCE</strong> add <strong>AUTO_INCREMENT</strong> for the column <strong>JOB_INSTANCE_ID</strong> and it will resolve your problem.</p>\n"},{"tags":[],"owner":{"account_id":7091295,"reputation":167,"user_id":5426380,"display_name":"Prabhu Kvn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679904855,"creation_date":1679474267,"answer_id":75809958,"question_id":19597683,"body_markdown":"Insert the initial values in *seq tables with following query, you can also use 0 in place of 10.\r\n```\r\nINSERT INTO BATCH_STEP_EXECUTION_SEQ (ID, UNIQUE_KEY) select * from (select 10 as ID, &#39;0&#39; as UNIQUE_KEY) as tmp where not exists(select * from BATCH_STEP_EXECUTION_SEQ);\r\n\r\nINSERT INTO BATCH_JOB_SEQ (ID, UNIQUE_KEY) select * from (select 10 as ID, &#39;0&#39; as UNIQUE_KEY) as tmp where not exists(select * from BATCH_JOB_SEQ);\r\n\r\nINSERT INTO BATCH_JOB_EXECUTION_SEQ (ID, UNIQUE_KEY) select * from (select 10 as ID, &#39;0&#39; as UNIQUE_KEY) as tmp where not exists(select * from BATCH_JOB_EXECUTION_SEQ);\r\n```","title":"Duplicate Spring Batch Job Instance","body":"<p>Insert the initial values in *seq tables with following query, you can also use 0 in place of 10.</p>\n<pre><code>INSERT INTO BATCH_STEP_EXECUTION_SEQ (ID, UNIQUE_KEY) select * from (select 10 as ID, '0' as UNIQUE_KEY) as tmp where not exists(select * from BATCH_STEP_EXECUTION_SEQ);\n\nINSERT INTO BATCH_JOB_SEQ (ID, UNIQUE_KEY) select * from (select 10 as ID, '0' as UNIQUE_KEY) as tmp where not exists(select * from BATCH_JOB_SEQ);\n\nINSERT INTO BATCH_JOB_EXECUTION_SEQ (ID, UNIQUE_KEY) select * from (select 10 as ID, '0' as UNIQUE_KEY) as tmp where not exists(select * from BATCH_JOB_EXECUTION_SEQ);\n</code></pre>\n"}],"owner":{"account_id":207037,"reputation":4836,"user_id":456684,"accept_rate":100,"display_name":"Mark Spangler"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24476,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":19608828,"answer_count":3,"score":8,"last_activity_date":1691141383,"creation_date":1382728293,"question_id":19597683,"body_markdown":"I have a small sample Spring Batch application that when started for the first time will work fine but whenever I shut the application down &amp; restart the jar I always get this error:\r\n\r\n    Caused by: org.springframework.dao.DuplicateKeyException: PreparedStatementCallback; SQL [INSERT into BATCH_JOB_INSTANCE(JOB_INSTANCE_ID, JOB_NAME, JOB_KEY, VERSION) values (?, ?, ?, ?)]; Duplicate entry &#39;1&#39; for key 1; nested exception is com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry &#39;1&#39; for key 1\r\n\r\n\r\nI&#39;m not sure if I have the job incrementer setup wrong. But like I said I can start it up &amp; then use the web service url, `/jobLauncher.html`, to invoke the batch process any number of times just fine. It&#39;s only after I shutdown the application &amp; restart it that I get this error. It wants to use id 1 for the job execution table but id 1 is already there from the previous runs.\r\n\r\nMain class\r\n\r\n    @EnableAutoConfiguration\r\n    @ComponentScan\r\n    public class Application {\r\n\r\n        public static void main(String[] args) throws Exception {\r\n            SpringApplication.run(Application.class, new String[]{ &quot;date=&quot; + System.currentTimeMillis() });\r\n        }\r\n    }\r\n\r\nWebservice class\r\n\r\n    @Controller\r\n    public class JobLauncherController {\r\n    \r\n        @Autowired\r\n        JobLauncher jobLauncher;\r\n\r\n        @Autowired\r\n        Job job;\r\n\r\n        @RequestMapping(&quot;/jobLauncher.html&quot;)\r\n        @ResponseBody\r\n        public String handle() throws Exception{\r\n            jobLauncher.run(job, new JobParametersBuilder().addString(&quot;date&quot;, System.currentTimeMillis() + &quot;&quot;).toJobParameters());\r\n            return &quot;Started the batch...&quot;;\r\n        }\r\n    }\r\n\r\nSpring Batch class\r\n\r\n    @Configuration\r\n    @EnableBatchProcessing\r\n    public class SampleBatchApplication {\r\n\r\n        @Autowired\r\n        private JobBuilderFactory jobs;\r\n\r\n        @Autowired\r\n        private StepBuilderFactory steps;\r\n\r\n        @Bean\r\n        protected Tasklet tasklet() {\r\n            return new Tasklet() {\r\n                @Override\r\n                public RepeatStatus execute(StepContribution contribution,\r\n                                            ChunkContext context) {\r\n                    return RepeatStatus.FINISHED;\r\n                }\r\n            };\r\n        }\r\n\r\n        @Bean\r\n        public Job job() throws Exception {\r\n            return this.jobs.get(&quot;job&quot;)\r\n                       .incrementer(new RunIdIncrementer())\r\n                       .flow(this.step1())\r\n                       .end()\r\n                       .build();\r\n        }\r\n\r\n        @Bean\r\n        protected Step step1() throws Exception {\r\n            return this.steps.get(&quot;step1&quot;).tasklet(this.tasklet()).build();\r\n        }\r\n\r\n        @Bean\r\n        public DataSource dataSource() {\r\n\r\n            BasicDataSource ds = new BasicDataSource();\r\n\r\n            try {\r\n                ds.setDriverClassName(&quot;com.mysql.jdbc.Driver&quot;);\r\n                ds.setUsername(&quot;test&quot;);\r\n                ds.setPassword(&quot;test&quot;);\r\n                ds.setUrl(&quot;jdbc:mysql://127.0.0.1:3306/spring-batch&quot;);\r\n\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n            return ds;\r\n        }\r\n    }","title":"Duplicate Spring Batch Job Instance","body":"<p>I have a small sample Spring Batch application that when started for the first time will work fine but whenever I shut the application down &amp; restart the jar I always get this error:</p>\n\n<pre><code>Caused by: org.springframework.dao.DuplicateKeyException: PreparedStatementCallback; SQL [INSERT into BATCH_JOB_INSTANCE(JOB_INSTANCE_ID, JOB_NAME, JOB_KEY, VERSION) values (?, ?, ?, ?)]; Duplicate entry '1' for key 1; nested exception is com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '1' for key 1\n</code></pre>\n\n<p>I'm not sure if I have the job incrementer setup wrong. But like I said I can start it up &amp; then use the web service url, <code>/jobLauncher.html</code>, to invoke the batch process any number of times just fine. It's only after I shutdown the application &amp; restart it that I get this error. It wants to use id 1 for the job execution table but id 1 is already there from the previous runs.</p>\n\n<p>Main class</p>\n\n<pre><code>@EnableAutoConfiguration\n@ComponentScan\npublic class Application {\n\n    public static void main(String[] args) throws Exception {\n        SpringApplication.run(Application.class, new String[]{ \"date=\" + System.currentTimeMillis() });\n    }\n}\n</code></pre>\n\n<p>Webservice class</p>\n\n<pre><code>@Controller\npublic class JobLauncherController {\n\n    @Autowired\n    JobLauncher jobLauncher;\n\n    @Autowired\n    Job job;\n\n    @RequestMapping(\"/jobLauncher.html\")\n    @ResponseBody\n    public String handle() throws Exception{\n        jobLauncher.run(job, new JobParametersBuilder().addString(\"date\", System.currentTimeMillis() + \"\").toJobParameters());\n        return \"Started the batch...\";\n    }\n}\n</code></pre>\n\n<p>Spring Batch class</p>\n\n<pre><code>@Configuration\n@EnableBatchProcessing\npublic class SampleBatchApplication {\n\n    @Autowired\n    private JobBuilderFactory jobs;\n\n    @Autowired\n    private StepBuilderFactory steps;\n\n    @Bean\n    protected Tasklet tasklet() {\n        return new Tasklet() {\n            @Override\n            public RepeatStatus execute(StepContribution contribution,\n                                        ChunkContext context) {\n                return RepeatStatus.FINISHED;\n            }\n        };\n    }\n\n    @Bean\n    public Job job() throws Exception {\n        return this.jobs.get(\"job\")\n                   .incrementer(new RunIdIncrementer())\n                   .flow(this.step1())\n                   .end()\n                   .build();\n    }\n\n    @Bean\n    protected Step step1() throws Exception {\n        return this.steps.get(\"step1\").tasklet(this.tasklet()).build();\n    }\n\n    @Bean\n    public DataSource dataSource() {\n\n        BasicDataSource ds = new BasicDataSource();\n\n        try {\n            ds.setDriverClassName(\"com.mysql.jdbc.Driver\");\n            ds.setUsername(\"test\");\n            ds.setPassword(\"test\");\n            ds.setUrl(\"jdbc:mysql://127.0.0.1:3306/spring-batch\");\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return ds;\n    }\n}\n</code></pre>\n"},{"tags":["java","mysql","spring","jpa"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1691143427,"post_id":76834618,"comment_id":135455091,"body_markdown":"You want random ordering but not repeated results in paging, that seems to be conflicting.","body":"You want random ordering but not repeated results in paging, that seems to be conflicting."},{"owner":{"account_id":13975330,"reputation":149,"user_id":10092887,"display_name":"Flinty926"},"score":0,"creation_date":1691146308,"post_id":76834618,"comment_id":135455577,"body_markdown":"Not really. I want the order of results to be random, but I don&#39;t want individual communities to appear more than once","body":"Not really. I want the order of results to be random, but I don&#39;t want individual communities to appear more than once"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":2,"creation_date":1691146526,"post_id":76834618,"comment_id":135455618,"body_markdown":"Consistent but random ordering between different queries simply isn&#39;t going to happen unless you save that order somewhere. So either make a single query then retrieve pages in batches, or somehow save that random order somewhere. Perhaps in a temporary view?","body":"Consistent but random ordering between different queries simply isn&#39;t going to happen unless you save that order somewhere. So either make a single query then retrieve pages in batches, or somehow save that random order somewhere. Perhaps in a temporary view?"},{"owner":{"account_id":13975330,"reputation":149,"user_id":10092887,"display_name":"Flinty926"},"score":0,"creation_date":1691146875,"post_id":76834618,"comment_id":135455679,"body_markdown":"Ugh, was hoping there might be an easier way to do it... Alright thanks","body":"Ugh, was hoping there might be an easier way to do it... Alright thanks"},{"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"score":0,"creation_date":1691205232,"post_id":76834618,"comment_id":135464311,"body_markdown":"Could you elaborate on the use-case, this seems quite strange (is this a school project?)","body":"Could you elaborate on the use-case, this seems quite strange (is this a school project?)"},{"owner":{"account_id":13975330,"reputation":149,"user_id":10092887,"display_name":"Flinty926"},"score":0,"creation_date":1691248127,"post_id":76834618,"comment_id":135467796,"body_markdown":"It&#39;s not a school project. It&#39;s a directory of gaming communities on a website, and we want to randomise the return order, as to give everyone a chance of being on the first page of results","body":"It&#39;s not a school project. It&#39;s a directory of gaming communities on a website, and we want to randomise the return order, as to give everyone a chance of being on the first page of results"}],"owner":{"account_id":13975330,"reputation":149,"user_id":10092887,"display_name":"Flinty926"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691141252,"creation_date":1691141252,"question_id":76834618,"body_markdown":"I have an API endpoint to return a list of `Community`. I currently return a paginated response, using the JPA `Page` class, as demonstrated below. How can I randomise the order in which rows are retrieved? I have attempted to use an `ORDER BY RAND()` in the JPA query, however this results in repeated results on different pages (e.g. `id` 1 is on pages 3,5,7).\r\n\r\nRepository:\r\n```java\r\n@Query(\r\n            value = &quot;SELECT c FROM Community c LEFT JOIN FETCH c.logo log &quot; +\r\n                    &quot;LEFT JOIN FETCH c.banner ban LEFT JOIN FETCH c.background bg &quot; +\r\n                    &quot;LEFT JOIN FETCH c.tags &quot; +\r\n                    &quot;WHERE c.name LIKE %:name% AND c.abbreviation LIKE %:abbreviation% ORDER BY RAND()&quot;,\r\n            countQuery = &quot;SELECT COUNT(c) FROM Community c WHERE c.name LIKE %:name% AND c.abbreviation LIKE %:abbreviation%&quot;\r\n    )\r\n    Page&lt;Community&gt; findAllWithTagsWithLogoWithBannerByIdNotNull(Pageable pageable, @Param(&quot;name&quot;) String name, @Param(&quot;abbreviation&quot;) String abbreviation);\r\n\r\n```\r\nService Layer: \r\n```java\r\npublic Page&lt;Community&gt; listSocialCommunities(Integer page, Integer size, String name, String abbreviation) {\r\n        Pageable pageable = PageRequest.of(page, size);\r\n        return communityRepository.findAllWithTagsWithLogoWithBannerByIdNotNull(pageable, name, abbreviation);\r\n    }\r\n```\r\n\r\nDB: MySQL 8\r\n\r\nJava 17\r\n\r\nAny suggestions welcomed. ","title":"Spring Boot JPA - Randomised Pagination","body":"<p>I have an API endpoint to return a list of <code>Community</code>. I currently return a paginated response, using the JPA <code>Page</code> class, as demonstrated below. How can I randomise the order in which rows are retrieved? I have attempted to use an <code>ORDER BY RAND()</code> in the JPA query, however this results in repeated results on different pages (e.g. <code>id</code> 1 is on pages 3,5,7).</p>\n<p>Repository:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(\n            value = &quot;SELECT c FROM Community c LEFT JOIN FETCH c.logo log &quot; +\n                    &quot;LEFT JOIN FETCH c.banner ban LEFT JOIN FETCH c.background bg &quot; +\n                    &quot;LEFT JOIN FETCH c.tags &quot; +\n                    &quot;WHERE c.name LIKE %:name% AND c.abbreviation LIKE %:abbreviation% ORDER BY RAND()&quot;,\n            countQuery = &quot;SELECT COUNT(c) FROM Community c WHERE c.name LIKE %:name% AND c.abbreviation LIKE %:abbreviation%&quot;\n    )\n    Page&lt;Community&gt; findAllWithTagsWithLogoWithBannerByIdNotNull(Pageable pageable, @Param(&quot;name&quot;) String name, @Param(&quot;abbreviation&quot;) String abbreviation);\n\n</code></pre>\n<p>Service Layer:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Page&lt;Community&gt; listSocialCommunities(Integer page, Integer size, String name, String abbreviation) {\n        Pageable pageable = PageRequest.of(page, size);\n        return communityRepository.findAllWithTagsWithLogoWithBannerByIdNotNull(pageable, name, abbreviation);\n    }\n</code></pre>\n<p>DB: MySQL 8</p>\n<p>Java 17</p>\n<p>Any suggestions welcomed.</p>\n"},{"tags":["java","email","jakarta-mail","pop3"],"comments":[{"owner":{"account_id":1032936,"reputation":29649,"user_id":1040885,"display_name":"Bill Shannon"},"score":2,"creation_date":1502078293,"post_id":45537491,"comment_id":78038417,"body_markdown":"First, [get rid of the socket factory settings](https://javaee.github.io/javamail/FAQ#commonmistakes).  You [can&#39;t tell which messages are new with pop3](https://javaee.github.io/javamail/FAQ#newmsgs); try using imap.","body":"First, <a href=\"https://javaee.github.io/javamail/FAQ#commonmistakes\" rel=\"nofollow noreferrer\">get rid of the socket factory settings</a>.  You <a href=\"https://javaee.github.io/javamail/FAQ#newmsgs\" rel=\"nofollow noreferrer\">can&#39;t tell which messages are new with pop3</a>; try using imap."}],"answers":[{"tags":[],"owner":{"account_id":1352194,"reputation":2624,"user_id":1291512,"accept_rate":58,"display_name":"WhiteAngel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691140954,"creation_date":1691140954,"answer_id":76834583,"question_id":45537491,"body_markdown":"**Summary:** Add `folder.getMessageCount()` before executing search.  \r\n\r\n**Explanation**\r\n\r\nI had the same experience with Outlook while using IMAP.  \r\nConstantly doing: `folder.search(...)` didn&#39;t show new messages arriving. It seemed like the folder needed to be refreshed before making new search.   \r\n\r\nThe same like for TS, if I were closing the connection and opening a new one before launching new `.search(...)` then everything worked as intended.    \r\n\r\nMy solution to &quot;refresh&quot; the folder was to do: `folder.getMessageCount()` before executing `.search(...)` and after that new messages could be seen and retrieved without the need to close and reopen the connection","title":"JavaMail getMessages doesn&#39;t give new messages","body":"<p><strong>Summary:</strong> Add <code>folder.getMessageCount()</code> before executing search.</p>\n<p><strong>Explanation</strong></p>\n<p>I had the same experience with Outlook while using IMAP.<br />\nConstantly doing: <code>folder.search(...)</code> didn't show new messages arriving. It seemed like the folder needed to be refreshed before making new search.</p>\n<p>The same like for TS, if I were closing the connection and opening a new one before launching new <code>.search(...)</code> then everything worked as intended.</p>\n<p>My solution to &quot;refresh&quot; the folder was to do: <code>folder.getMessageCount()</code> before executing <code>.search(...)</code> and after that new messages could be seen and retrieved without the need to close and reopen the connection</p>\n"}],"owner":{"account_id":1894553,"reputation":4990,"user_id":1711809,"accept_rate":46,"display_name":"Gintas_"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":290,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1691140954,"creation_date":1502060967,"question_id":45537491,"body_markdown":"I&#39;m facing a weird problem, trying to use JavaMail on mail.ru, but it doesn&#39;t give me new emails. I login, start checking getMessages() every second, send email manually, but getMessages() always returns the same emails that were before I sent anything. In other words, it doesn&#39;t give any new emails that are past the time it logged into the mailbox. Did I miss something? Here is the full code:\r\n\r\n    public class MailboxReader\r\n    {\r\n        private Store store;\r\n        private Folder inbox;\r\n        public MailboxReader(EmailAcc emailAcc)\r\n        {\r\n            // connect to pop3 inbox\r\n            try {\r\n                Properties properties = System.getProperties();\r\n                Security.addProvider(new com.sun.net.ssl.internal.ssl.Provider());\r\n                properties.setProperty(&quot;mail.pop3.socketFactory.class&quot;, &quot;javax.net.ssl.SSLSocketFactory&quot;);\r\n                properties.setProperty(&quot;mail.pop3.socketFactory.fallback&quot;, &quot;false&quot;);\r\n                properties.setProperty(&quot;mail.pop3.port&quot;, String.valueOf(emailAcc.pop3port));\r\n                properties.setProperty(&quot;mail.pop3.socketFactory.port&quot;, String.valueOf(emailAcc.pop3port));\r\n                properties.setProperty(&quot;mail.pop3.ssl.trust&quot;, &quot;*&quot;);\r\n                Session session = Session.getInstance(properties);\r\n                store = session.getStore(&quot;pop3&quot;);\r\n                store.connect(emailAcc.pop3ip, emailAcc.pop3port, emailAcc.username, emailAcc.password);\r\n                inbox = store.getFolder(&quot;INBOX&quot;);\r\n                inbox.open(Folder.READ_ONLY);\r\n    \r\n            } catch(Exception e)\r\n            {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        public Message[] getMessages()\r\n        {\r\n            try {\r\n                return inbox.getMessages();\r\n            } catch (MessagingException e) {\r\n                e.printStackTrace();\r\n            }\r\n            return null;\r\n        }\r\n    \r\n        public void close()\r\n        {\r\n            try {\r\n                inbox.close(true);\r\n                store.close();\r\n            } catch (MessagingException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\nI have manually logged into recipient&#39;s email account to check whether my email arrives - it does. And also, if I reconnect to mailbox with JavaMail, it also sees it. But it would be stupid to keep reconnecting every second, something else is wrong.","title":"JavaMail getMessages doesn&#39;t give new messages","body":"<p>I'm facing a weird problem, trying to use JavaMail on mail.ru, but it doesn't give me new emails. I login, start checking getMessages() every second, send email manually, but getMessages() always returns the same emails that were before I sent anything. In other words, it doesn't give any new emails that are past the time it logged into the mailbox. Did I miss something? Here is the full code:</p>\n\n<pre><code>public class MailboxReader\n{\n    private Store store;\n    private Folder inbox;\n    public MailboxReader(EmailAcc emailAcc)\n    {\n        // connect to pop3 inbox\n        try {\n            Properties properties = System.getProperties();\n            Security.addProvider(new com.sun.net.ssl.internal.ssl.Provider());\n            properties.setProperty(\"mail.pop3.socketFactory.class\", \"javax.net.ssl.SSLSocketFactory\");\n            properties.setProperty(\"mail.pop3.socketFactory.fallback\", \"false\");\n            properties.setProperty(\"mail.pop3.port\", String.valueOf(emailAcc.pop3port));\n            properties.setProperty(\"mail.pop3.socketFactory.port\", String.valueOf(emailAcc.pop3port));\n            properties.setProperty(\"mail.pop3.ssl.trust\", \"*\");\n            Session session = Session.getInstance(properties);\n            store = session.getStore(\"pop3\");\n            store.connect(emailAcc.pop3ip, emailAcc.pop3port, emailAcc.username, emailAcc.password);\n            inbox = store.getFolder(\"INBOX\");\n            inbox.open(Folder.READ_ONLY);\n\n        } catch(Exception e)\n        {\n            e.printStackTrace();\n        }\n    }\n\n    public Message[] getMessages()\n    {\n        try {\n            return inbox.getMessages();\n        } catch (MessagingException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n    public void close()\n    {\n        try {\n            inbox.close(true);\n            store.close();\n        } catch (MessagingException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>I have manually logged into recipient's email account to check whether my email arrives - it does. And also, if I reconnect to mailbox with JavaMail, it also sees it. But it would be stupid to keep reconnecting every second, something else is wrong.</p>\n"},{"tags":["java","mapstruct"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":1,"creation_date":1690807616,"post_id":76802511,"comment_id":135400064,"body_markdown":"Does adding `default String map(Role role) { return role.getName(); }` work? MapStruct should then use that to map each role to a string when it creates its own `List&lt;Role&gt;` to `List&lt;String&gt;` conversion method which is then used inside the `map(User)` method.","body":"Does adding <code>default String map(Role role) { return role.getName(); }</code> work? MapStruct should then use that to map each role to a string when it creates its own <code>List&lt;Role&gt;</code> to <code>List&lt;String&gt;</code> conversion method which is then used inside the <code>map(User)</code> method."},{"owner":{"account_id":2310053,"reputation":689,"user_id":2028380,"display_name":"damien"},"score":0,"creation_date":1691140378,"post_id":76802511,"comment_id":135454507,"body_markdown":"Your answer solve my problem perfectly. Thank you!\n\nThe piece of MapStruct documentation related is: https://mapstruct.org/documentation/stable/reference/html/#adding-custom-methods","body":"Your answer solve my problem perfectly. Thank you!  The piece of MapStruct documentation related is: <a href=\"https://mapstruct.org/documentation/stable/reference/html/#adding-custom-methods\" rel=\"nofollow noreferrer\">mapstruct.org/documentation/stable/reference/html/&hellip;</a>"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1691142663,"post_id":76802511,"comment_id":135454939,"body_markdown":"You&#39;re welcome.","body":"You&#39;re welcome."}],"answers":[{"tags":[],"owner":{"account_id":2310053,"reputation":689,"user_id":2028380,"display_name":"damien"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691140759,"creation_date":1691140759,"answer_id":76834559,"question_id":76802511,"body_markdown":"Thanks to the Rob Spoor comment, MapStruct allow default method implementation is the interface for more-than-declarative mapping:\r\n\r\n    @Mapper\r\n    public interface UserMapper {\r\n    \r\n        UserMapper INSTANCE = Mappers.getMapper(UserMapper.class);\r\n    \r\n        UserDto map(User user);\r\n    \r\n        Set&lt;String&gt; map(Set&lt;Role&gt; roles);\r\n    \r\n        default String map(Role role) { return role.getName(); }\r\n    \r\n    }\r\n\r\nRef: https://mapstruct.org/documentation/stable/reference/html/#adding-custom-methods","title":"How to map list of children object as list of String with MapStruct?","body":"<p>Thanks to the Rob Spoor comment, MapStruct allow default method implementation is the interface for more-than-declarative mapping:</p>\n<pre><code>@Mapper\npublic interface UserMapper {\n\n    UserMapper INSTANCE = Mappers.getMapper(UserMapper.class);\n\n    UserDto map(User user);\n\n    Set&lt;String&gt; map(Set&lt;Role&gt; roles);\n\n    default String map(Role role) { return role.getName(); }\n\n}\n</code></pre>\n<p>Ref: <a href=\"https://mapstruct.org/documentation/stable/reference/html/#adding-custom-methods\" rel=\"nofollow noreferrer\">https://mapstruct.org/documentation/stable/reference/html/#adding-custom-methods</a></p>\n"}],"owner":{"account_id":2310053,"reputation":689,"user_id":2028380,"display_name":"damien"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76834559,"answer_count":1,"score":0,"last_activity_date":1691140759,"creation_date":1690797516,"question_id":76802511,"body_markdown":"My parent class is:\r\n```java\r\n@Getter\r\n@Setter\r\npublic class User {\r\n\r\n    Long id;\r\n\r\n    String username;\r\n\r\n    Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\r\n\r\n}\r\n```\r\n\r\nMy child class is:\r\n```java\r\n@Getter\r\n@Setter\r\npublic class Role {\r\n\r\n    Long id;\r\n    \r\n    String name;\r\n\r\n}\r\n```\r\n\r\nI would like to map with MapStruct (last version) this object structure to the following:\r\n```java\r\npublic class UserDto {\r\n\r\n    Long id;\r\n\r\n    String username;\r\n\r\n    Set&lt;String&gt; roles = new HashSet&lt;&gt;();\r\n\r\n}\r\n```\r\n\r\nI have a simple mapper already working but I was unable (after hours of Google search and test) to determine the good way to achieve the conversion of .roles from `Set&lt;Role&gt;` to `Set&lt;String&gt;`:\r\n```\r\n@Mapper\r\npublic interface UserMapper {\r\n\r\n    UserMapper INSTANCE = Mappers.getMapper(UserMapper.class);\r\n\r\n    UserDto map(User user);\r\n\r\n//  List&lt;String&gt; map(List&lt;Role&gt; roles);\r\n}\r\n```","title":"How to map list of children object as list of String with MapStruct?","body":"<p>My parent class is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\npublic class User {\n\n    Long id;\n\n    String username;\n\n    Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\n\n}\n</code></pre>\n<p>My child class is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\npublic class Role {\n\n    Long id;\n    \n    String name;\n\n}\n</code></pre>\n<p>I would like to map with MapStruct (last version) this object structure to the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class UserDto {\n\n    Long id;\n\n    String username;\n\n    Set&lt;String&gt; roles = new HashSet&lt;&gt;();\n\n}\n</code></pre>\n<p>I have a simple mapper already working but I was unable (after hours of Google search and test) to determine the good way to achieve the conversion of .roles from <code>Set&lt;Role&gt;</code> to <code>Set&lt;String&gt;</code>:</p>\n<pre><code>@Mapper\npublic interface UserMapper {\n\n    UserMapper INSTANCE = Mappers.getMapper(UserMapper.class);\n\n    UserDto map(User user);\n\n//  List&lt;String&gt; map(List&lt;Role&gt; roles);\n}\n</code></pre>\n"},{"tags":["java","c#","android","sockets","xamarin"],"comments":[{"owner":{"account_id":54382,"reputation":14965,"user_id":162699,"accept_rate":76,"display_name":"Gusman"},"score":0,"creation_date":1430262971,"post_id":29931285,"comment_id":47985479,"body_markdown":"You are in different subnets, 251 and 252, you will not connect...","body":"You are in different subnets, 251 and 252, you will not connect..."},{"owner":{"account_id":6542609,"reputation":1469,"user_id":5059545,"accept_rate":73,"display_name":"Neo"},"score":0,"creation_date":1438315804,"post_id":29931285,"comment_id":51410583,"body_markdown":"@Coroner_Rex: Could you show your solution to fix this problem? I got this problem, too. Thank you very much!","body":"@Coroner_Rex: Could you show your solution to fix this problem? I got this problem, too. Thank you very much!"},{"owner":{"account_id":6175421,"reputation":323,"user_id":4812471,"accept_rate":33,"display_name":"Coroner_Rex"},"score":1,"creation_date":1438670348,"post_id":29931285,"comment_id":51531096,"body_markdown":"@MrNeo Like Gusman said it cannot find each because the router has allocated computer and the real device into different subnets. You can use your computer to build a wireless LAN by yourself inside of using the public wifi and home router sometimes also puts devices into different subnets so you should always build the LAN by yourself.","body":"@MrNeo Like Gusman said it cannot find each because the router has allocated computer and the real device into different subnets. You can use your computer to build a wireless LAN by yourself inside of using the public wifi and home router sometimes also puts devices into different subnets so you should always build the LAN by yourself."},{"owner":{"account_id":6542609,"reputation":1469,"user_id":5059545,"accept_rate":73,"display_name":"Neo"},"score":0,"creation_date":1438672132,"post_id":29931285,"comment_id":51532061,"body_markdown":"Thank you ^^. My problem fixed, too!","body":"Thank you ^^. My problem fixed, too!"}],"owner":{"account_id":6175421,"reputation":323,"user_id":4812471,"accept_rate":33,"display_name":"Coroner_Rex"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":450,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691140367,"creation_date":1430261226,"question_id":29931285,"body_markdown":"I have a android client need to communicate with a C++ socket server running on my computer. I have successfully connected the client with the the server using android emulator on my computer. However, when I try to run the app on my real device, it cannot connect. The code on the android client side is:\r\n\r\n     Int32 port = 5037;//Is this port setting matters? \r\n\r\n    IPAddress ipAddress = IPAddress.Parse(&quot;128.101.251.176&quot;);//Am I setting the IP address correct?\r\n    \t\t\t\t\r\n    IPEndPoint ipe = new IPEndPoint(ipAddress, port); \r\n    \t\t\t\t\r\n    Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp); \r\n\r\n    sock.Connect(ipe);     //always stuck at this line\r\n\r\n\r\nMy android device IPV4 address is 128.101.252.96 and my computer IPV4 address is 128.101.251.176. Is this means My computer and android phone is in the same LAN? How should I setup my IP address? And also do I need to make any change on my Server side? Thank you!\r\n\r\n","title":"Xamarin Android Client in real device fail to connect with C++ socket server","body":"<p>I have a android client need to communicate with a C++ socket server running on my computer. I have successfully connected the client with the the server using android emulator on my computer. However, when I try to run the app on my real device, it cannot connect. The code on the android client side is:</p>\n\n<pre><code> Int32 port = 5037;//Is this port setting matters? \n\nIPAddress ipAddress = IPAddress.Parse(\"128.101.251.176\");//Am I setting the IP address correct?\n\nIPEndPoint ipe = new IPEndPoint(ipAddress, port); \n\nSocket sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp); \n\nsock.Connect(ipe);     //always stuck at this line\n</code></pre>\n\n<p>My android device IPV4 address is 128.101.252.96 and my computer IPV4 address is 128.101.251.176. Is this means My computer and android phone is in the same LAN? How should I setup my IP address? And also do I need to make any change on my Server side? Thank you!</p>\n"},{"tags":["java","spring-boot","testing","junit","mockito"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1691134291,"post_id":76833806,"comment_id":135453320,"body_markdown":"Which is exactly what you told it to do... What do you think the line in your `setupMock` method does... You tell it here that when `save` is called return an empty/new `UserEntity`.","body":"Which is exactly what you told it to do... What do you think the line in your <code>setupMock</code> method does... You tell it here that when <code>save</code> is called return an empty/new <code>UserEntity</code>."},{"owner":{"account_id":20204611,"reputation":559,"user_id":14819402,"display_name":"Cross"},"score":0,"creation_date":1691134676,"post_id":76833806,"comment_id":135453396,"body_markdown":"@M.Deinum Oh, alright, thanks, I got it. I just thought that the ```@Spy``` annotation will make the repository to do the real behavior of repository object.","body":"@M.Deinum Oh, alright, thanks, I got it. I just thought that the <code>@Spy</code> annotation will make the repository to do the real behavior of repository object."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1691135215,"post_id":76833806,"comment_id":135453537,"body_markdown":"It does, until you register behavior on it, then it no longer does.","body":"It does, until you register behavior on it, then it no longer does."},{"owner":{"account_id":20204611,"reputation":559,"user_id":14819402,"display_name":"Cross"},"score":0,"creation_date":1691135407,"post_id":76833806,"comment_id":135453580,"body_markdown":"@M.Deinum Well, I tried to remove ```setupMock``` method and now ```us``` variable is just null. Even without fields.","body":"@M.Deinum Well, I tried to remove <code>setupMock</code> method and now <code>us</code> variable is just null. Even without fields."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1691135609,"post_id":76833806,"comment_id":135453631,"body_markdown":"Which is the default behavior for a mock. You are using Spring Boot so you should be using `@SpyBean` not `@Spy`. Looking at your test class you posted here wouldn&#39;t even work. All fields would be `null` in your test and the test would fail with `NullPointerException`.","body":"Which is the default behavior for a mock. You are using Spring Boot so you should be using <code>@SpyBean</code> not <code>@Spy</code>. Looking at your test class you posted here wouldn&#39;t even work. All fields would be <code>null</code> in your test and the test would fail with <code>NullPointerException</code>."},{"owner":{"account_id":20204611,"reputation":559,"user_id":14819402,"display_name":"Cross"},"score":0,"creation_date":1691136225,"post_id":76833806,"comment_id":135453748,"body_markdown":"@M.Deinum Alright, thanks, you&#39;re right. Now when I replaced my ```@Spy``` annotations  with ```@SpyBean``` it really fails with ```NullPointerException```. Could you please help me: should I return new UserEntity with all set fields(in ```initializeMock``` method), or there is a way to use real repo, but with mock database(H2, for example)?","body":"@M.Deinum Alright, thanks, you&#39;re right. Now when I replaced my <code>@Spy</code> annotations  with <code>@SpyBean</code> it really fails with <code>NullPointerException</code>. Could you please help me: should I return new UserEntity with all set fields(in <code>initializeMock</code> method), or there is a way to use real repo, but with mock database(H2, for example)?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1691138776,"post_id":76833806,"comment_id":135454169,"body_markdown":"It should fail when using `@Spy` not `@SpyBean`. Your test is confusing what is it you want to test? The repository only then use `@DataJpaTest` (assuming this is a JPA based repository) instead of `@SpringBootTest`. I don&#39;t get the mocking and the spying nor see the benefit in this test (neither of mocking/spying nor the `@SpringBootTest`).","body":"It should fail when using <code>@Spy</code> not <code>@SpyBean</code>. Your test is confusing what is it you want to test? The repository only then use <code>@DataJpaTest</code> (assuming this is a JPA based repository) instead of <code>@SpringBootTest</code>. I don&#39;t get the mocking and the spying nor see the benefit in this test (neither of mocking/spying nor the <code>@SpringBootTest</code>)."}],"answers":[{"comments":[{"owner":{"account_id":20204611,"reputation":559,"user_id":14819402,"display_name":"Cross"},"score":0,"creation_date":1691142571,"post_id":76834474,"comment_id":135454920,"body_markdown":"Thank you for answering. Yes, firstly I tried the way you proposed, but I got exception ```org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement Sequence &quot;USERS_SEQ&quot; not found; SQL statement``` And I started to look for solutions and decided to use @Spy as I thought it will imitate the real behaviour of repository. So could you please help me please with this exception?","body":"Thank you for answering. Yes, firstly I tried the way you proposed, but I got exception <code>org.springframework.dao.InvalidDataAccessResourceUsageExcept&zwnj;&#8203;ion: could not prepare statement Sequence &quot;USERS_SEQ&quot; not found; SQL statement</code> And I started to look for solutions and decided to use @Spy as I thought it will imitate the real behaviour of repository. So could you please help me please with this exception?"},{"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"score":0,"creation_date":1691145522,"post_id":76834474,"comment_id":135455442,"body_markdown":"The exception is thrown because the sequence you are using for generation of entity ids is not created. If you use Liquibase or another DB migration tool please configure tests to run schema migration before starting tests. If you don&#39;t then copy your DB schma into a separate SQL file and run it before tests. See https://www.baeldung.com/java-h2-automatically-create-schemas or https://stackoverflow.com/questions/5225700/can-i-have-h2-autocreate-a-schema-in-an-in-memory-database","body":"The exception is thrown because the sequence you are using for generation of entity ids is not created. If you use Liquibase or another DB migration tool please configure tests to run schema migration before starting tests. If you don&#39;t then copy your DB schma into a separate SQL file and run it before tests. See <a href=\"https://www.baeldung.com/java-h2-automatically-create-schemas\" rel=\"nofollow noreferrer\">baeldung.com/java-h2-automatically-create-schemas</a> or <a href=\"https://stackoverflow.com/questions/5225700/can-i-have-h2-autocreate-a-schema-in-an-in-memory-database\" title=\"can i have h2 autocreate a schema in an in memory database\">stackoverflow.com/questions/5225700/&hellip;</a>"},{"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"score":0,"creation_date":1691238213,"post_id":76834474,"comment_id":135466831,"body_markdown":"@Cross please join https://chat.stackoverflow.com/rooms/254815/userrepository-doesnt-work-in-spring-boot-tests","body":"@Cross please join <a href=\"https://chat.stackoverflow.com/rooms/254815/userrepository-doesnt-work-in-spring-boot-tests\">chat.stackoverflow.com/rooms/254815/&hellip;</a>"},{"owner":{"account_id":20204611,"reputation":559,"user_id":14819402,"display_name":"Cross"},"score":0,"creation_date":1691243785,"post_id":76834474,"comment_id":135467329,"body_markdown":"Unfortunately I still get this error, even after I initialized the scheme through the script and through flyway :/ @Sergey Tsypanov","body":"Unfortunately I still get this error, even after I initialized the scheme through the script and through flyway :/ @Sergey Tsypanov"}],"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691140076,"creation_date":1691140076,"answer_id":76834474,"question_id":76833806,"body_markdown":"First of all you don&#39;t need `@ExtendWith(SpringExtension.class)` over you test class as `@SpringBootTest` already contains it. Second, to have actual data saved into the database you should use real beans, not mocks, as well as have some real storage. Just add this into your `application-test.yml`:\r\n```yml\r\nspring:\r\n  datasource:\r\n    url: jdbc:h2:mem:~/test;DB_CLOSE_ON_EXIT=FALSE\r\n    username: sa\r\n    password:\r\n    driver-class-name: org.h2.Driver\r\n```\r\nThis will give you in-memory database for tests.\r\nThen use `@Autowired` instead of `@Spy`/`@Mock`:\r\n```java\r\n@SpringBootTest\r\n@TestMethodOrder(MethodOrderer.OrderAnnotation.class)\r\npublic class UserServiceTest {\r\n\r\n    @Autowired\r\n    private UserService userService;\r\n\r\n    @Autowired\r\n    private UserRepo userRepo;\r\n\r\n    @MockBean\r\n    private ValidationService validationService;\r\n    @MockBean\r\n    private PasswordEncoder passwordEncoder;\r\n\r\n\r\n    @AfterEach\r\n    public void deleteDb() {\r\n        userRepo.deleteAll();\r\n    }\r\n```\r\nThis would allow you to have real `userService` and real `userRepo` and mock `validationService` and `passwordEncoder`","title":"UserRepository doesn&#39;t work in Spring boot tests","body":"<p>First of all you don't need <code>@ExtendWith(SpringExtension.class)</code> over you test class as <code>@SpringBootTest</code> already contains it. Second, to have actual data saved into the database you should use real beans, not mocks, as well as have some real storage. Just add this into your <code>application-test.yml</code>:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  datasource:\n    url: jdbc:h2:mem:~/test;DB_CLOSE_ON_EXIT=FALSE\n    username: sa\n    password:\n    driver-class-name: org.h2.Driver\n</code></pre>\n<p>This will give you in-memory database for tests.\nThen use <code>@Autowired</code> instead of <code>@Spy</code>/<code>@Mock</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest\n@TestMethodOrder(MethodOrderer.OrderAnnotation.class)\npublic class UserServiceTest {\n\n    @Autowired\n    private UserService userService;\n\n    @Autowired\n    private UserRepo userRepo;\n\n    @MockBean\n    private ValidationService validationService;\n    @MockBean\n    private PasswordEncoder passwordEncoder;\n\n\n    @AfterEach\n    public void deleteDb() {\n        userRepo.deleteAll();\n    }\n</code></pre>\n<p>This would allow you to have real <code>userService</code> and real <code>userRepo</code> and mock <code>validationService</code> and <code>passwordEncoder</code></p>\n"}],"owner":{"account_id":20204611,"reputation":559,"user_id":14819402,"display_name":"Cross"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691140192,"creation_date":1691134137,"question_id":76833806,"body_markdown":"I&#39;m creating an app for practice in java spring boot, but I faced with the problem when I started to test my `UserService`. I don&#39;t know why, but `UserRepository` just doesn&#39;t want to work. It initialized but when I try to call the `save()` method, it doesn&#39;t save anything in database.\r\n\r\nSo here&#39;s my test:\r\n\r\n**UserServiceTest.java**\r\n\r\n```java\r\n@SpringBootTest\r\n@ExtendWith(SpringExtension.class)\r\n@TestMethodOrder(MethodOrderer.OrderAnnotation.class)\r\npublic class UserServiceTest {\r\n\r\n    @InjectMocks\r\n    private UserService userService;\r\n\r\n    @Spy\r\n    private UserRepo userRepo;\r\n\r\n    @Spy\r\n    private ValidationService validationService;\r\n    @Spy\r\n    private PasswordEncoder passwordEncoder;\r\n\r\n\r\n    @AfterEach\r\n    public void deleteDb() {\r\n        List&lt;UserEntity&gt; users = userRepo.findAll();\r\n        userRepo.deleteAll(users);\r\n    }\r\n\r\n    @BeforeEach\r\n    public void setupMock() {\r\n        Mockito.when(userRepo.save(Mockito.any(UserEntity.class))).thenReturn(new UserEntity());\r\n    }\r\n\r\n    @Test\r\n    @Order(1)\r\n    public void testUserAdding() {\r\n\r\n        List&lt;UserAddModel&gt; addModels = getUserAddModels();\r\n        addModels.forEach(m -&gt; {\r\n            userService.addUser(m);\r\n            List&lt;UserEntity&gt; users = userRepo.findAll();\r\n            System.out.println(users);\r\n            UserEntity user = userRepo.findByPhoneNumber(m.getPhoneNumber()).orElseThrow(UserNotFoundException::new);\r\n            isUserGetModelValid(m, UserGetModel.toModel(user));\r\n        });\r\n        addModels = getInvalidUserAddModels();\r\n        addModels.forEach(m -&gt; Assertions.assertThrows(InvalidDataException.class,\r\n                () -&gt; isUserGetModelValid(m, userService.addUser(m))));\r\n    }\r\n\r\n\r\n    private List&lt;UserAddModel&gt; getUserAddModels() {\r\n        return new ArrayList&lt;&gt;(List.of(\r\n                new UserAddModel(\r\n                        &quot;Alex&quot;,\r\n                        &quot;Filtch&quot;,\r\n                        null,\r\n                        &quot;+19772395747&quot;,\r\n                        null,\r\n                        &quot;AbobaAbobaAboba&quot;\r\n                ),\r\n                new UserAddModel(\r\n                        &quot;Scarlet&quot;,\r\n                        &quot;Brown&quot;,\r\n                        &quot;FiftithEnumed&quot;,\r\n                        &quot;+19164167722&quot;,\r\n                        null,\r\n                        &quot;Fi123sdamJfw+&quot;\r\n                ),\r\n                new UserAddModel(\r\n                        &quot;Andy&quot;,\r\n                        &quot;Balk&quot;,\r\n                        &quot;Afton&quot;,\r\n                        &quot;+112486759123&quot;,\r\n                        &quot;IBiB@Basas&quot;,\r\n                        &quot;IBiB@Basas&quot;\r\n                )\r\n        ));\r\n\r\n    }\r\n\r\n    private void isUserGetModelValid(UserAddModel userAddModel, UserGetModel userGetModel) {\r\n        Assertions.assertAll(\r\n                () -&gt; Assertions.assertNotNull(userGetModel.getId()),\r\n                () -&gt; Assertions.assertEquals(userAddModel.getFirstName(), userGetModel.getFirstName()),\r\n                () -&gt; Assertions.assertEquals(userAddModel.getLastName(), userGetModel.getLastName()),\r\n                () -&gt; Assertions.assertEquals(userAddModel.getPatronymic(), userGetModel.getPatronymic()),\r\n                () -&gt; Assertions.assertEquals(userAddModel.getEmail(), userGetModel.getEmail()),\r\n                () -&gt; Assertions.assertEquals(userAddModel.getPhoneNumber(), userGetModel.getPhoneNumber())\r\n        );\r\n    }\r\n}\r\n```\r\n\r\nAnd here I decided to check if `userRepo` is working right in `UserService.java`:\r\n\r\n```java\r\nUserEntity us = userRepo.save(user);\r\n```\r\n\r\nBut **us** variable has null fields after saving:\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CiZAR.png\r\n\r\nSo what can be the problem? If you know, please tell me, I&#39;d really appreciate it!","title":"UserRepository doesn&#39;t work in Spring boot tests","body":"<p>I'm creating an app for practice in java spring boot, but I faced with the problem when I started to test my <code>UserService</code>. I don't know why, but <code>UserRepository</code> just doesn't want to work. It initialized but when I try to call the <code>save()</code> method, it doesn't save anything in database.</p>\n<p>So here's my test:</p>\n<p><strong>UserServiceTest.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest\n@ExtendWith(SpringExtension.class)\n@TestMethodOrder(MethodOrderer.OrderAnnotation.class)\npublic class UserServiceTest {\n\n    @InjectMocks\n    private UserService userService;\n\n    @Spy\n    private UserRepo userRepo;\n\n    @Spy\n    private ValidationService validationService;\n    @Spy\n    private PasswordEncoder passwordEncoder;\n\n\n    @AfterEach\n    public void deleteDb() {\n        List&lt;UserEntity&gt; users = userRepo.findAll();\n        userRepo.deleteAll(users);\n    }\n\n    @BeforeEach\n    public void setupMock() {\n        Mockito.when(userRepo.save(Mockito.any(UserEntity.class))).thenReturn(new UserEntity());\n    }\n\n    @Test\n    @Order(1)\n    public void testUserAdding() {\n\n        List&lt;UserAddModel&gt; addModels = getUserAddModels();\n        addModels.forEach(m -&gt; {\n            userService.addUser(m);\n            List&lt;UserEntity&gt; users = userRepo.findAll();\n            System.out.println(users);\n            UserEntity user = userRepo.findByPhoneNumber(m.getPhoneNumber()).orElseThrow(UserNotFoundException::new);\n            isUserGetModelValid(m, UserGetModel.toModel(user));\n        });\n        addModels = getInvalidUserAddModels();\n        addModels.forEach(m -&gt; Assertions.assertThrows(InvalidDataException.class,\n                () -&gt; isUserGetModelValid(m, userService.addUser(m))));\n    }\n\n\n    private List&lt;UserAddModel&gt; getUserAddModels() {\n        return new ArrayList&lt;&gt;(List.of(\n                new UserAddModel(\n                        &quot;Alex&quot;,\n                        &quot;Filtch&quot;,\n                        null,\n                        &quot;+19772395747&quot;,\n                        null,\n                        &quot;AbobaAbobaAboba&quot;\n                ),\n                new UserAddModel(\n                        &quot;Scarlet&quot;,\n                        &quot;Brown&quot;,\n                        &quot;FiftithEnumed&quot;,\n                        &quot;+19164167722&quot;,\n                        null,\n                        &quot;Fi123sdamJfw+&quot;\n                ),\n                new UserAddModel(\n                        &quot;Andy&quot;,\n                        &quot;Balk&quot;,\n                        &quot;Afton&quot;,\n                        &quot;+112486759123&quot;,\n                        &quot;IBiB@Basas&quot;,\n                        &quot;IBiB@Basas&quot;\n                )\n        ));\n\n    }\n\n    private void isUserGetModelValid(UserAddModel userAddModel, UserGetModel userGetModel) {\n        Assertions.assertAll(\n                () -&gt; Assertions.assertNotNull(userGetModel.getId()),\n                () -&gt; Assertions.assertEquals(userAddModel.getFirstName(), userGetModel.getFirstName()),\n                () -&gt; Assertions.assertEquals(userAddModel.getLastName(), userGetModel.getLastName()),\n                () -&gt; Assertions.assertEquals(userAddModel.getPatronymic(), userGetModel.getPatronymic()),\n                () -&gt; Assertions.assertEquals(userAddModel.getEmail(), userGetModel.getEmail()),\n                () -&gt; Assertions.assertEquals(userAddModel.getPhoneNumber(), userGetModel.getPhoneNumber())\n        );\n    }\n}\n</code></pre>\n<p>And here I decided to check if <code>userRepo</code> is working right in <code>UserService.java</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>UserEntity us = userRepo.save(user);\n</code></pre>\n<p>But <strong>us</strong> variable has null fields after saving:</p>\n<p><a href=\"https://i.stack.imgur.com/CiZAR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CiZAR.png\" alt=\"enter image description here\" /></a></p>\n<p>So what can be the problem? If you know, please tell me, I'd really appreciate it!</p>\n"},{"tags":["java","jgit"],"comments":[{"owner":{"account_id":7615319,"reputation":7120,"user_id":5774952,"display_name":"Zac Anger"},"score":1,"creation_date":1691029784,"post_id":76824468,"comment_id":135436484,"body_markdown":"I don&#39;t know anything about JGit, but from a quick search this looks like it&#39;s more difficult than it probably ought to be. I see [this](https://stackoverflow.com/questions/31325613/equivalent-of-git-diff-in-jgit) and [this](https://stackoverflow.com/questions/12987364/how-to-diff-with-two-files-by-jgit-without-creating-repo) which might be useful (the second one might work even if the files aren&#39;t tracked, assuming it&#39;s not outdated).","body":"I don&#39;t know anything about JGit, but from a quick search this looks like it&#39;s more difficult than it probably ought to be. I see <a href=\"https://stackoverflow.com/questions/31325613/equivalent-of-git-diff-in-jgit\">this</a> and <a href=\"https://stackoverflow.com/questions/12987364/how-to-diff-with-two-files-by-jgit-without-creating-repo\">this</a> which might be useful (the second one might work even if the files aren&#39;t tracked, assuming it&#39;s not outdated)."}],"answers":[{"comments":[{"owner":{"account_id":29148430,"reputation":13,"user_id":22329807,"display_name":"chineseboy"},"score":0,"creation_date":1691113947,"post_id":76826195,"comment_id":135451300,"body_markdown":"Thank you for your feedback. I can use formatter.format(oldTreeIterator, newTreeIterator) to see the modified content.","body":"Thank you for your feedback. I can use formatter.format(oldTreeIterator, newTreeIterator) to see the modified content."},{"owner":{"account_id":179293,"reputation":15713,"user_id":411846,"accept_rate":80,"display_name":"centic"},"score":0,"creation_date":1691135623,"post_id":76826195,"comment_id":135453634,"body_markdown":"FYI, I now added snippets for the different types of diffing to the [jgit-cookbook](https://github.com/centic9/jgit-cookbook/), see [List changed files between two commits](https://github.com/centic9/jgit-cookbook/blob/master/src/main/java/org/dstadler/jgit/porcelain/DiffFilesInCommit.java)\n [List changed files in index](https://github.com/centic9/jgit-cookbook/blob/master/src/main/java/org/dstadler/jgit/porcelain/DiffIndexChanges.java)\n [List changed files in checkout](https://github.com/centic9/jgit-cookbook/blob/master/src/main/java/org/dstadler/jgit/porcelain/DiffLocalChanges.java)","body":"FYI, I now added snippets for the different types of diffing to the <a href=\"https://github.com/centic9/jgit-cookbook/\" rel=\"nofollow noreferrer\">jgit-cookbook</a>, see <a href=\"https://github.com/centic9/jgit-cookbook/blob/master/src/main/java/org/dstadler/jgit/porcelain/DiffFilesInCommit.java\" rel=\"nofollow noreferrer\">List changed files between two commits</a>  <a href=\"https://github.com/centic9/jgit-cookbook/blob/master/src/main/java/org/dstadler/jgit/porcelain/DiffIndexChanges.java\" rel=\"nofollow noreferrer\">List changed files in index</a>  <a href=\"https://github.com/centic9/jgit-cookbook/blob/master/src/main/java/org/dstadler/jgit/porcelain/DiffLocalChanges.java\" rel=\"nofollow noreferrer\">List changed files in checkout</a>"}],"tags":[],"owner":{"account_id":549364,"reputation":20582,"user_id":2986905,"accept_rate":78,"display_name":"R&#252;diger Herrmann"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691140009,"creation_date":1691051067,"answer_id":76826195,"question_id":76824468,"body_markdown":"In Git, the &#39;local workspace&#39; is called the working directory. The abstraction to compare files from different sources (working directory, index, commit) in JGit are _tree iterators_.\r\n\r\nOnce you created two such iterators, you can diff them. To compare the working directory with the HEAD commit, use something like this:\r\n\r\n```java\r\n// Create the HEAD tree iterator\r\nObjectReader reader = git.getRepository().newObjectReader();\r\nCanonicalTreeParser oldTreeIter = new CanonicalTreeParser();\r\nObjectId headTree = git.getRepository().resolve( &quot;HEAD^{tree}&quot; );\r\noldTreeIter.reset( reader, headTree );\r\n// Create the working tree iterator\r\nAbstractTreeIterator newTreeIter = new FileTreeIterator(git.getRepository());\r\n\r\n// Either: call the diff command\r\ngit.diff()\r\n  .setOldTree(oldTreeIter)\r\n  .setNewTree(newTreeIter)\r\n  .call();\r\n// Or: use the DiffFormatter to list changes\r\ntry (DiffFormatter formatter = new DiffFormatter(NullOutputStream.INSTANCE)) {\r\n  formatter.setRepository(git.getRepository());\r\n  List&lt;DiffEntry&gt; entries = formatter.scan(oldTreeIterator, newTreeIterator);\r\n}\r\n```\r\n\r\nJGit&#39;s `DiffCommand` just prints the differences to stdout. \r\nAlternatively, `DiffFormatter::scan` may be used to return `DiffEntry`s each describing a change to a file.\r\n\r\nFor more on JGit&#39;s diff API you may want to read this article, I&#39;ve written long ago: https://www.codeaffine.com/2016/06/16/jgit-diff/\r\n","title":"How to use JGit to view modifications in the local workspace?","body":"<p>In Git, the 'local workspace' is called the working directory. The abstraction to compare files from different sources (working directory, index, commit) in JGit are <em>tree iterators</em>.</p>\n<p>Once you created two such iterators, you can diff them. To compare the working directory with the HEAD commit, use something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Create the HEAD tree iterator\nObjectReader reader = git.getRepository().newObjectReader();\nCanonicalTreeParser oldTreeIter = new CanonicalTreeParser();\nObjectId headTree = git.getRepository().resolve( &quot;HEAD^{tree}&quot; );\noldTreeIter.reset( reader, headTree );\n// Create the working tree iterator\nAbstractTreeIterator newTreeIter = new FileTreeIterator(git.getRepository());\n\n// Either: call the diff command\ngit.diff()\n  .setOldTree(oldTreeIter)\n  .setNewTree(newTreeIter)\n  .call();\n// Or: use the DiffFormatter to list changes\ntry (DiffFormatter formatter = new DiffFormatter(NullOutputStream.INSTANCE)) {\n  formatter.setRepository(git.getRepository());\n  List&lt;DiffEntry&gt; entries = formatter.scan(oldTreeIterator, newTreeIterator);\n}\n</code></pre>\n<p>JGit's <code>DiffCommand</code> just prints the differences to stdout.\nAlternatively, <code>DiffFormatter::scan</code> may be used to return <code>DiffEntry</code>s each describing a change to a file.</p>\n<p>For more on JGit's diff API you may want to read this article, I've written long ago: <a href=\"https://www.codeaffine.com/2016/06/16/jgit-diff/\" rel=\"nofollow noreferrer\">https://www.codeaffine.com/2016/06/16/jgit-diff/</a></p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691503741,"post_id":76832541,"comment_id":135498615,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/76832541/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29148430,"reputation":13,"user_id":22329807,"display_name":"chineseboy"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691114801,"creation_date":1691114760,"answer_id":76832541,"question_id":76824468,"body_markdown":"        Git git = Git.open(new File(&quot;xxx&quot;));\r\n        Repository repository = git.getRepository();\r\n        DiffFormatter diffFormatter = new DiffFormatter(System.out);\r\n        diffFormatter.setRepository(repository);\r\n\r\n        ObjectReader reader = git.getRepository().newObjectReader();\r\n        CanonicalTreeParser oldTreeIter = new CanonicalTreeParser();\r\n        ObjectId headTree = git.getRepository().resolve( &quot;HEAD^{tree}&quot; );\r\n        oldTreeIter.reset( reader, headTree );\r\n        AbstractTreeIterator newTreeIter = new FileTreeIterator(git.getRepository());\r\n        diffFormatter.format(oldTreeIter, newTreeIter);","title":"How to use JGit to view modifications in the local workspace?","body":"<pre><code>    Git git = Git.open(new File(&quot;xxx&quot;));\n    Repository repository = git.getRepository();\n    DiffFormatter diffFormatter = new DiffFormatter(System.out);\n    diffFormatter.setRepository(repository);\n\n    ObjectReader reader = git.getRepository().newObjectReader();\n    CanonicalTreeParser oldTreeIter = new CanonicalTreeParser();\n    ObjectId headTree = git.getRepository().resolve( &quot;HEAD^{tree}&quot; );\n    oldTreeIter.reset( reader, headTree );\n    AbstractTreeIterator newTreeIter = new FileTreeIterator(git.getRepository());\n    diffFormatter.format(oldTreeIter, newTreeIter);\n</code></pre>\n"}],"owner":{"account_id":29148430,"reputation":13,"user_id":22329807,"display_name":"chineseboy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76826195,"answer_count":2,"score":1,"last_activity_date":1691140009,"creation_date":1691027320,"question_id":76824468,"body_markdown":"I can use JGit to view differences between different commits or different branches, but I don&#39;t know how to compare uncommitted files with HEAD.\r\nI have searched through the JGit Cookbook, but I still haven&#39;t found a solution.","title":"How to use JGit to view modifications in the local workspace?","body":"<p>I can use JGit to view differences between different commits or different branches, but I don't know how to compare uncommitted files with HEAD.\nI have searched through the JGit Cookbook, but I still haven't found a solution.</p>\n"},{"tags":["java","struts2","csrf","struts","csrf-token"],"comments":[{"owner":{"account_id":29009791,"reputation":11,"user_id":22221516,"display_name":"SHIVAM AGRAHARI"},"score":0,"creation_date":1689653180,"post_id":76684912,"comment_id":135240318,"body_markdown":"Still not working","body":"Still not working"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1691139486,"post_id":76684912,"comment_id":135454328,"body_markdown":"Updated, see details below.","body":"Updated, see details below."}],"answers":[{"comments":[{"owner":{"account_id":29009791,"reputation":11,"user_id":22221516,"display_name":"SHIVAM AGRAHARI"},"score":0,"creation_date":1689653161,"post_id":76699548,"comment_id":135240317,"body_markdown":"Still not working","body":"Still not working"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1689687779,"post_id":76699548,"comment_id":135246821,"body_markdown":"What is not working?","body":"What is not working?"},{"owner":{"account_id":29009791,"reputation":11,"user_id":22221516,"display_name":"SHIVAM AGRAHARI"},"score":0,"creation_date":1689831879,"post_id":76699548,"comment_id":135269543,"body_markdown":"it is directly redirecting to error page.","body":"it is directly redirecting to error page."},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1691060570,"post_id":76699548,"comment_id":135441926,"body_markdown":"You said it returns an `invalid.token` result code. `it will attempt to display the same response that the original...`. How error page can be returned? What is the error code?","body":"You said it returns an <code>invalid.token</code> result code. <code>it will attempt to display the same response that the original...</code>. How error page can be returned? What is the error code?"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1693937072,"post_id":76699548,"comment_id":135824567,"body_markdown":"If this answer helped you then you should mark it as accepted. The checkbox I&#39;d on the left of the answer. Also it&#39;s worth to vote up the answer that helped you the same to help others to choose the correct answer.","body":"If this answer helped you then you should mark it as accepted. The checkbox I&#39;d on the left of the answer. Also it&#39;s worth to vote up the answer that helped you the same to help others to choose the correct answer."}],"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691139354,"creation_date":1689527973,"answer_id":76699548,"question_id":76684912,"body_markdown":"To use the interceptor defined in the `struts.xml` you should add the annotation \r\n\r\n```\r\n@ParentPackage(&quot;struts-security&quot;)\r\n```\r\n---\r\n\r\nYou were trying to use a \r\n\r\n[`tokenSession` interceptor][1]:\r\n---\r\n&gt;This interceptor builds off of the `TokenInterceptor`, providing advanced logic for handling invalid tokens. Unlike the normal token interceptor, this interceptor will attempt to provide intelligent fail-over in the event of multiple requests using the same session. That is, it will block subsequent requests until the first request is complete, and then instead of returning the `invalid.token` code, it will attempt to display the same response that the original, valid action invocation would have displayed if no multiple requests were submitted in the first place.\r\n&gt;\r\n&gt;Example code:\r\n&gt; \r\n&gt;\r\n&gt;```xml\r\n&gt;\r\n&gt;&lt;action name=&quot;someAction&quot; class=&quot;com.examples.SomeAction&quot;&gt;\r\n&gt;     &lt;interceptor-ref name=&quot;tokenSession&quot;/&gt;\r\n&gt;     &lt;interceptor-ref name=&quot;basicStack&quot;/&gt;\r\n&gt;     &lt;result name=&quot;success&quot;&gt;good_result.ftl&lt;/result&gt;\r\n&gt;&lt;/action&gt;\r\n&gt;\r\n&gt; &lt;-- In this case, myMethod of the action class will not\r\n&gt;        get checked for invalidity of token --&gt;\r\n&gt;&lt;action name=&quot;someAction&quot; class=&quot;com.examples.SomeAction&quot;&gt;\r\n&gt;     &lt;interceptor-ref name=&quot;tokenSession&quot;&gt;\r\n&gt;         &lt;param name=&quot;excludeMethods&quot;&gt;myMethod&lt;/param&gt;\r\n&gt;     &lt;/interceptor-ref name=&quot;tokenSession&gt;\r\n&gt;     &lt;interceptor-ref name=&quot;basicStack&quot;/&gt;\r\n&gt;     &lt;result name=&quot;success&quot;&gt;good_result.ftl&lt;/result&gt;\r\n&gt; &lt;/action&gt;\r\n&gt;```\r\n\r\nAs you see in the examples you were missing some basic interceptors.\r\n\r\n---\r\nThese interceptors are defined in the `struts-default` package which is inherited. So, you shouldn&#39;t override them. Just remove these interceptors from the `&lt;interceptors&gt;` tag, or use `&lt;intetceptor-ref&gt;` tag instead. \r\nOnly one *token* interceptor should be configured to the action. Because both is using the same token from the browser, so they are mutually exclusive.\r\n\r\n```xml\r\n&lt;interceptor name=&quot;token&quot; class=&quot;org.apache.struts2.interceptor.TokenInterceptor&quot; /&gt;\r\n&lt;interceptor name=&quot;tokenSessionStore&quot; class=  &quot;org.apache.struts2.interceptor.TokenSessionStoreInterceptor&quot; /&gt;\r\n```\r\n---\r\n\r\nAlso check [this][2] answer if you want to create a custom interceptor stack and use it to every action.\r\n\r\n\r\n[1]: https://struts.apache.org/maven/struts2-core/apidocs/org/apache/struts2/interceptor/TokenSessionStoreInterceptor.html\r\n  [2]: https://stackoverflow.com/a/16940296/573032","title":"CSRF implementation error in struts 6.2.0","body":"<p>To use the interceptor defined in the <code>struts.xml</code> you should add the annotation</p>\n<pre><code>@ParentPackage(&quot;struts-security&quot;)\n</code></pre>\n<hr />\n<p>You were trying to use a</p>\n<h2><a href=\"https://struts.apache.org/maven/struts2-core/apidocs/org/apache/struts2/interceptor/TokenSessionStoreInterceptor.html\" rel=\"nofollow noreferrer\"><code>tokenSession</code> interceptor</a>:</h2>\n<blockquote>\n<p>This interceptor builds off of the <code>TokenInterceptor</code>, providing advanced logic for handling invalid tokens. Unlike the normal token interceptor, this interceptor will attempt to provide intelligent fail-over in the event of multiple requests using the same session. That is, it will block subsequent requests until the first request is complete, and then instead of returning the <code>invalid.token</code> code, it will attempt to display the same response that the original, valid action invocation would have displayed if no multiple requests were submitted in the first place.</p>\n<p>Example code:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>\n&lt;action name=&quot;someAction&quot; class=&quot;com.examples.SomeAction&quot;&gt;\n    &lt;interceptor-ref name=&quot;tokenSession&quot;/&gt;\n    &lt;interceptor-ref name=&quot;basicStack&quot;/&gt;\n    &lt;result name=&quot;success&quot;&gt;good_result.ftl&lt;/result&gt;\n&lt;/action&gt;\n\n&lt;-- In this case, myMethod of the action class will not\n       get checked for invalidity of token --&gt;\n&lt;action name=&quot;someAction&quot; class=&quot;com.examples.SomeAction&quot;&gt;\n    &lt;interceptor-ref name=&quot;tokenSession&quot;&gt;\n        &lt;param name=&quot;excludeMethods&quot;&gt;myMethod&lt;/param&gt;\n    &lt;/interceptor-ref name=&quot;tokenSession&gt;\n    &lt;interceptor-ref name=&quot;basicStack&quot;/&gt;\n    &lt;result name=&quot;success&quot;&gt;good_result.ftl&lt;/result&gt;\n&lt;/action&gt;\n</code></pre>\n</blockquote>\n<p>As you see in the examples you were missing some basic interceptors.</p>\n<hr />\n<p>These interceptors are defined in the <code>struts-default</code> package which is inherited. So, you shouldn't override them. Just remove these interceptors from the <code>&lt;interceptors&gt;</code> tag, or use <code>&lt;intetceptor-ref&gt;</code> tag instead.\nOnly one <em>token</em> interceptor should be configured to the action. Because both is using the same token from the browser, so they are mutually exclusive.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;interceptor name=&quot;token&quot; class=&quot;org.apache.struts2.interceptor.TokenInterceptor&quot; /&gt;\n&lt;interceptor name=&quot;tokenSessionStore&quot; class=  &quot;org.apache.struts2.interceptor.TokenSessionStoreInterceptor&quot; /&gt;\n</code></pre>\n<hr />\n<p>Also check <a href=\"https://stackoverflow.com/a/16940296/573032\">this</a> answer if you want to create a custom interceptor stack and use it to every action.</p>\n"}],"owner":{"account_id":29009791,"reputation":11,"user_id":22221516,"display_name":"SHIVAM AGRAHARI"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1691139354,"creation_date":1689312332,"question_id":76684912,"body_markdown":"I am trying to implement CSRF in a Struts 6.2.0  project.\r\n\r\n**`struts.xml`**\r\n\r\n\r\n```xml\r\n&lt;package name=&quot;struts-security&quot; abstract=&quot;true&quot; extends=&quot;struts-default&quot;&gt;\r\n  &lt;interceptors&gt;\r\n    &lt;interceptor-stack name=&quot;defaultSecurityStack&quot; /&gt;\r\n    \r\n    &lt;interceptor name=&quot;token&quot; class=&quot;org.apache.struts2.interceptor.TokenInterceptor&quot; /&gt;\r\n    &lt;interceptor name=&quot;tokenSessionStore&quot; class=  &quot;org.apache.struts2.interceptor.TokenSessionStoreInterceptor&quot; /&gt;\r\n  &lt;/interceptors&gt;\r\n\r\n  &lt;default-interceptor-ref name = &quot;defaultSecurityStack&quot; /&gt;\r\n\r\n  &lt;global-results&gt;\r\n    &lt;result name=&quot;error&quot;&gt;/error401.jsp&lt;/result&gt;\r\n  &lt;/global-results&gt;\r\n\r\n  &lt;global-exception-mappings&gt;\r\n    &lt;exception-mapping result=&quot;error&quot; exception=&quot;java.lang.Exception&quot; /&gt;\r\n  &lt;/global-exception-mappings&gt;\r\n```\r\n\r\n**`LoginAction.java`**\r\n\r\n\r\n```java\r\n@Namespace(&quot;/common&quot;)\r\n@Action(&quot;Login&quot;)\r\n@InterceptorRefs({\r\n  @InterceptorRef(&quot;token&quot;),\r\n  @InterceptorRef(&quot;tokenSessionStore&quot;)\r\n})\r\n@Results({\r\n  @Result(name = &quot;input&quot;, location = &quot;login.Login&quot;, type = &quot;tiles&quot;),\r\n})\r\n```\r\n\r\n**`login.jsp`**\r\n\r\n\r\n```xml\r\n&lt;%@ taglib prefix=&quot;s&quot; uri=&quot;/struts-tags&quot;%&gt;\r\n  &lt;s:form  method=&quot;post&quot; validate=&quot;true&quot; theme=&quot;simple&quot; name=&quot;form&quot; id=&quot;paraFrm&quot; &gt;\r\n    &lt;s:token /&gt;\r\n```\r\n\r\nIt is returning `invalid.token`. Because I have added return page,  it is redirecting to error page. Is there any requirement of additional code to implement token in action page or any other places. ","title":"CSRF implementation error in struts 6.2.0","body":"<p>I am trying to implement CSRF in a Struts 6.2.0  project.</p>\n<p><strong><code>struts.xml</code></strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;package name=&quot;struts-security&quot; abstract=&quot;true&quot; extends=&quot;struts-default&quot;&gt;\n  &lt;interceptors&gt;\n    &lt;interceptor-stack name=&quot;defaultSecurityStack&quot; /&gt;\n    \n    &lt;interceptor name=&quot;token&quot; class=&quot;org.apache.struts2.interceptor.TokenInterceptor&quot; /&gt;\n    &lt;interceptor name=&quot;tokenSessionStore&quot; class=  &quot;org.apache.struts2.interceptor.TokenSessionStoreInterceptor&quot; /&gt;\n  &lt;/interceptors&gt;\n\n  &lt;default-interceptor-ref name = &quot;defaultSecurityStack&quot; /&gt;\n\n  &lt;global-results&gt;\n    &lt;result name=&quot;error&quot;&gt;/error401.jsp&lt;/result&gt;\n  &lt;/global-results&gt;\n\n  &lt;global-exception-mappings&gt;\n    &lt;exception-mapping result=&quot;error&quot; exception=&quot;java.lang.Exception&quot; /&gt;\n  &lt;/global-exception-mappings&gt;\n</code></pre>\n<p><strong><code>LoginAction.java</code></strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Namespace(&quot;/common&quot;)\n@Action(&quot;Login&quot;)\n@InterceptorRefs({\n  @InterceptorRef(&quot;token&quot;),\n  @InterceptorRef(&quot;tokenSessionStore&quot;)\n})\n@Results({\n  @Result(name = &quot;input&quot;, location = &quot;login.Login&quot;, type = &quot;tiles&quot;),\n})\n</code></pre>\n<p><strong><code>login.jsp</code></strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;%@ taglib prefix=&quot;s&quot; uri=&quot;/struts-tags&quot;%&gt;\n  &lt;s:form  method=&quot;post&quot; validate=&quot;true&quot; theme=&quot;simple&quot; name=&quot;form&quot; id=&quot;paraFrm&quot; &gt;\n    &lt;s:token /&gt;\n</code></pre>\n<p>It is returning <code>invalid.token</code>. Because I have added return page,  it is redirecting to error page. Is there any requirement of additional code to implement token in action page or any other places.</p>\n"},{"tags":["javascript","java","spring","spring-boot","websocket"],"owner":{"account_id":27094406,"reputation":23,"user_id":21064700,"display_name":"Alok Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691139006,"creation_date":1691122421,"question_id":76832913,"body_markdown":"I am using Stomp in a Spring Boot app where I am getting memory leak warning after adding below code. How to resolve it.\r\n````\r\n@Configuration\r\n@EnableWebSocketMessageBroker\r\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n\r\n    @Override\r\n    public void configureMessageBroker(final MessageBrokerRegistry registry) {\r\n        registry.enableSimpleBroker(&quot;/topic&quot;);\r\n        registry.setApplicationDestinationPrefixes(&quot;/ws&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void registerStompEndpoints(final StompEndpointRegistry registry) {\r\n        registry.addEndpoint(&quot;/our-websocket&quot;)\r\n                .setHandshakeHandler(new UserHandshakeHandler())\r\n                .withSockJS();\r\n    }\r\n}\r\n````\r\nI am getting a warning -- The web application [ROOT] appears to have started a thread named [MessageBroker-4] but has failed to stop it. This is very likely to create a memory leak.\r\n\r\nThe web application [ROOT] appears to have started a thread named [clientInboundChannel-15] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\r\n","title":"Memory leak due to websocket and stomp in Spring Boot app","body":"<p>I am using Stomp in a Spring Boot app where I am getting memory leak warning after adding below code. How to resolve it.</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n\n    @Override\n    public void configureMessageBroker(final MessageBrokerRegistry registry) {\n        registry.enableSimpleBroker(&quot;/topic&quot;);\n        registry.setApplicationDestinationPrefixes(&quot;/ws&quot;);\n    }\n\n    @Override\n    public void registerStompEndpoints(final StompEndpointRegistry registry) {\n        registry.addEndpoint(&quot;/our-websocket&quot;)\n                .setHandshakeHandler(new UserHandshakeHandler())\n                .withSockJS();\n    }\n}\n</code></pre>\n<p>I am getting a warning -- The web application [ROOT] appears to have started a thread named [MessageBroker-4] but has failed to stop it. This is very likely to create a memory leak.</p>\n<p>The web application [ROOT] appears to have started a thread named [clientInboundChannel-15] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:</p>\n"},{"tags":["java","json","rest","jersey"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690872050,"post_id":76809017,"comment_id":135409691,"body_markdown":"You should take a look at the actual JSON you are sending out from the browser, and the raw JSON string that is coming in. If Jackson tells you there&#39;s a start array token at line 1, column 1, that&#39;s what it is.","body":"You should take a look at the actual JSON you are sending out from the browser, and the raw JSON string that is coming in. If Jackson tells you there&#39;s a start array token at line 1, column 1, that&#39;s what it is."}],"answers":[{"tags":[],"owner":{"account_id":13258098,"reputation":518,"user_id":9573518,"display_name":"LBS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691138262,"creation_date":1691138262,"answer_id":76834279,"question_id":76809017,"body_markdown":"The problem was the fact that my JSON contained File objects.\r\n\r\nBut it is not possible to directly convert a File object into JSON, even using JSON.stringify.\r\n\r\nThere are three solutions described [here](https://stackoverflow.com/a/4083908/9573518). I chose to base64 encode the file before stringify the whole body object.","title":"Jersey RESTful mapping returns null object or MismatchedInputException","body":"<p>The problem was the fact that my JSON contained File objects.</p>\n<p>But it is not possible to directly convert a File object into JSON, even using JSON.stringify.</p>\n<p>There are three solutions described <a href=\"https://stackoverflow.com/a/4083908/9573518\">here</a>. I chose to base64 encode the file before stringify the whole body object.</p>\n"}],"owner":{"account_id":13258098,"reputation":518,"user_id":9573518,"display_name":"LBS"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691138262,"creation_date":1690871542,"question_id":76809017,"body_markdown":"My frontend server sends a json built from a VueJS form.\r\nI am trying to get, to map and to parse this json using Jersey 2.32.\r\n\r\n\r\n    {\r\n        &quot;objetDesLiensDuTheme&quot;: {\r\n            &quot;id&quot;: 7195,\r\n            &quot;formalisation&quot;: {\r\n                &quot;selectTitreFichier&quot;: &quot;fiche de formalisation&quot;,\r\n                &quot;inputTitreFichier&quot;: &quot;fiche de formalisation titre fichier&quot;,\r\n                &quot;inputFichier&quot;: {},\r\n            },\r\n            &quot;modop&quot;: {\r\n                &quot;selectTitreFichier&quot;: &quot;fiche m&#233;thodologique&quot;,\r\n                &quot;inputTitreFichier&quot;: &quot;fiche m&#233;thodologique titre fichier&quot;,\r\n                &quot;inputFichier&quot;: {},\r\n            },\r\n        }\r\n    }\r\n\r\n\r\nI&#39;ve stringyfied it to show its structure here but it is a JSON object and a console.log shows me also the content of &quot;inputFichier&quot;:\r\n\r\n\r\n    inputFichier: File { name: &quot;Fichier formalisation.txt&quot;, lastModified: 1690373320586, size: 0, type: &quot;text/plain&quot;, webkitRelativePath: &quot;&quot;}\r\n\r\n\r\nMy REST controller method looks like this:\r\n\r\n\r\n    @POST\r\n    @Path(&quot;/create&quot;)\r\n    @Consumes(MediaType.APPLICATION_JSON)\r\n    public Response createLien(@BeanParam LiensDTO objetDesLiensDuTheme)\r\n    {\r\n        Response response;\r\n        //TODO\r\n        System.out.println(objetDesLiensDuTheme);\r\n\r\n        response = Response.status(Status.CREATED).build();\r\n        return response;\r\n    }\r\n\r\n\r\nBut according to the toString method, the bean parameter seems to be null:\r\n\r\n\r\n    LiensDTO [objetDesLiensDuTheme=null]\r\n\r\n\r\nHere is the LiensDTO class (getter and setter not shown):\r\n\r\n```\r\n    public class LiensDTO implements Serializable\r\n    {\r\n        private static final long serialVersionUID = -5717326975468155988L;\r\n\r\n        public LiensDTO()\r\n        {\r\n            super();\r\n        }\r\n\r\n        @FormParam(&quot;objetDesLiensDuTheme&quot;)\r\n        // @JsonProperty(&quot;objetDesLiensDuTheme&quot;)\r\n        private DocLienDTO objetDesLiensDuTheme;\r\n\r\n        @Override\r\n        public String toString()\r\n        {\r\n            return &quot;LiensDTO [objetDesLiensDuTheme=&quot; + objetDesLiensDuTheme + &quot;]&quot;;\r\n        }\r\n    }\r\n```\r\n\r\nHere is the DocLienDTO class (getters and setters not shown):\r\n\r\n```\r\n    public class DocLienDTO implements Serializable\r\n    {\r\n        private static final long serialVersionUID = -493282593738066056L;\r\n\r\n        private int id;\r\n\r\n        private DocumentDTO formalisation;\r\n\r\n        private DocumentDTO modop;\r\n    }\r\n```\r\n\r\nAnd finally the DocumentDTO class (getters and setters not shown):\r\n\r\n```\r\npublic class DocumentDTO implements Serializable\r\n{\r\n  private static final long serialVersionUID = -6698584238714969958L;\r\n\r\n  private String selectTitreFichier;\r\n\r\n  private String inputTitreFichier;\r\n\r\n  private File inputFichier;\r\n\r\n}\r\n```\r\n\r\n\r\nWhen I try without the `@BeanParam` annotation (like described [here](https://stackoverflow.com/a/34235193/9573518)\r\nor with the `@RequestBody` annotation in the rest controller, I get this exception:\r\n`\r\ncom.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize instance of\r\n`api.bean.LiensDTO` out of START_ARRAY token at [Source:\r\n(org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$UnCloseableInputStream); line: 1, column: 1].\r\n`\r\n\r\nHowever, the json object doesn&#39;t contain arrays.\r\n\r\nI also tried with `@JsonProperty(&quot;objetDesLiensDuTheme&quot;)` instead of `@FormParam(&quot;objetDesLiensDuTheme&quot;)`.\r\n\r\nI would like to get and to iterate through the &quot;objetDesLiensDuTheme&quot; object for my upload module.","title":"Jersey RESTful mapping returns null object or MismatchedInputException","body":"<p>My frontend server sends a json built from a VueJS form.\nI am trying to get, to map and to parse this json using Jersey 2.32.</p>\n<pre><code>{\n    &quot;objetDesLiensDuTheme&quot;: {\n        &quot;id&quot;: 7195,\n        &quot;formalisation&quot;: {\n            &quot;selectTitreFichier&quot;: &quot;fiche de formalisation&quot;,\n            &quot;inputTitreFichier&quot;: &quot;fiche de formalisation titre fichier&quot;,\n            &quot;inputFichier&quot;: {},\n        },\n        &quot;modop&quot;: {\n            &quot;selectTitreFichier&quot;: &quot;fiche méthodologique&quot;,\n            &quot;inputTitreFichier&quot;: &quot;fiche méthodologique titre fichier&quot;,\n            &quot;inputFichier&quot;: {},\n        },\n    }\n}\n</code></pre>\n<p>I've stringyfied it to show its structure here but it is a JSON object and a console.log shows me also the content of &quot;inputFichier&quot;:</p>\n<pre><code>inputFichier: File { name: &quot;Fichier formalisation.txt&quot;, lastModified: 1690373320586, size: 0, type: &quot;text/plain&quot;, webkitRelativePath: &quot;&quot;}\n</code></pre>\n<p>My REST controller method looks like this:</p>\n<pre><code>@POST\n@Path(&quot;/create&quot;)\n@Consumes(MediaType.APPLICATION_JSON)\npublic Response createLien(@BeanParam LiensDTO objetDesLiensDuTheme)\n{\n    Response response;\n    //TODO\n    System.out.println(objetDesLiensDuTheme);\n\n    response = Response.status(Status.CREATED).build();\n    return response;\n}\n</code></pre>\n<p>But according to the toString method, the bean parameter seems to be null:</p>\n<pre><code>LiensDTO [objetDesLiensDuTheme=null]\n</code></pre>\n<p>Here is the LiensDTO class (getter and setter not shown):</p>\n<pre><code>    public class LiensDTO implements Serializable\n    {\n        private static final long serialVersionUID = -5717326975468155988L;\n\n        public LiensDTO()\n        {\n            super();\n        }\n\n        @FormParam(&quot;objetDesLiensDuTheme&quot;)\n        // @JsonProperty(&quot;objetDesLiensDuTheme&quot;)\n        private DocLienDTO objetDesLiensDuTheme;\n\n        @Override\n        public String toString()\n        {\n            return &quot;LiensDTO [objetDesLiensDuTheme=&quot; + objetDesLiensDuTheme + &quot;]&quot;;\n        }\n    }\n</code></pre>\n<p>Here is the DocLienDTO class (getters and setters not shown):</p>\n<pre><code>    public class DocLienDTO implements Serializable\n    {\n        private static final long serialVersionUID = -493282593738066056L;\n\n        private int id;\n\n        private DocumentDTO formalisation;\n\n        private DocumentDTO modop;\n    }\n</code></pre>\n<p>And finally the DocumentDTO class (getters and setters not shown):</p>\n<pre><code>public class DocumentDTO implements Serializable\n{\n  private static final long serialVersionUID = -6698584238714969958L;\n\n  private String selectTitreFichier;\n\n  private String inputTitreFichier;\n\n  private File inputFichier;\n\n}\n</code></pre>\n<p>When I try without the <code>@BeanParam</code> annotation (like described <a href=\"https://stackoverflow.com/a/34235193/9573518\">here</a>\nor with the <code>@RequestBody</code> annotation in the rest controller, I get this exception:\n<code>com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize instance of</code>api.bean.LiensDTO<code>out of START_ARRAY token at [Source: (org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$UnCloseableInputStream); line: 1, column: 1].</code></p>\n<p>However, the json object doesn't contain arrays.</p>\n<p>I also tried with <code>@JsonProperty(&quot;objetDesLiensDuTheme&quot;)</code> instead of <code>@FormParam(&quot;objetDesLiensDuTheme&quot;)</code>.</p>\n<p>I would like to get and to iterate through the &quot;objetDesLiensDuTheme&quot; object for my upload module.</p>\n"},{"tags":["java","android"],"owner":{"account_id":29158247,"reputation":1,"user_id":22337554,"display_name":"Kiran Srivastava"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691138036,"creation_date":1691136507,"question_id":76834085,"body_markdown":"I am creating an android app with JAVA in which I will provide questions realted maths and physics. I have used JLatexMathView to show formula in proper form. It is working fine . But the problem here is that I have added questions in database in mixed form like this &quot; Find the value of [formula]&quot; that&#39;s why when it is being loaded in mathiew it is showing like this &quot;Findthevalueof[formula]&quot; . It is treating the text as formula and erasing the space between the words. \r\n\r\nI want to show it separately like a normal question. How can I do this please explain.\r\nPlease let me know if there is any other option to do this.\r\nI am providing some of my codes below\r\n\r\nXML code\r\n\r\n```&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n   &lt;androidx.constraintlayout.widget.ConstraintLayout        \r\n\r\n\r\n   xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n\r\n    &lt;ru.noties.jlatexmath.JLatexMathView\r\n        android:id=&quot;@+id/j_latex_math_view&quot;\r\n        android:layout_width=&quot;0dp&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:background=&quot;@color/white&quot;\r\n        android:padding=&quot;16dip&quot;\r\n        app:jlmv_alignHorizontal=&quot;center&quot;\r\n        app:jlmv_alignVertical=&quot;center&quot;\r\n        app:jlmv_textSize=&quot;16sp&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;```\r\n\r\n\r\n\r\n\r\nJAVA code\r\n\r\n```\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n    MathView mathView ;\r\n     JLatexMathView latex;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        latex = findViewById(R.id.j_latex_math_view);\r\n\r\n   \r\n        final JLatexMathDrawable drawable = JLatexMathDrawable.builder(&quot; Find value of  \\\\[\\\\sqrt[n]   {ab}\\\\overleftarrow{ab}\\\\coprod_a^b\\\\left(\\\\begin{array}{c}a\\\\\\\\    b\\\\end{array}\\\\right)\\\\sum_a^b\\\\]\\n&quot;)\r\n                .textSize(70)\r\n                .padding(8)\r\n                .background(0xFFffffff)\r\n                .align(JLatexMathDrawable.ALIGN_RIGHT)\r\n                .build();\r\n\r\n\r\n\r\n        latex.setLatex(&quot; hhhhhhh bbbbbbbbbbbb bbbbbbbbbbb tttttttt \\\\[\\\\sqrt[n]{ab}\\\\overleftarrow{ab}\\\\coprod_a^b\\\\left(\\\\begin{array}{c}a\\\\\\\\ b\\\\end{array}\\\\right)\\\\sum_a^b\\\\]\\n&quot;);\r\n      //  latex.setLatexDrawable(drawable);\r\n    }\r\n```\r\n\r\n\r\nDEENDENCY \r\n\r\n    implementation &#39;ru.noties:jlatexmath-android:0.2.0&#39;\r\n\r\n// for Cyrillic symbols\r\n    implementation &#39;ru.noties:jlatexmath-android-font-cyrillic:0.2.0&#39;\r\n\r\n// for Greek symbols\r\n    implementation &#39;ru.noties:jlatexmath-android-font-greek:0.2.0&#39;\r\n\r\nI tried to show mixed text + formula questions for maths and physics android ","title":"How to differentiate between text and formula in JLatexMathView","body":"<p>I am creating an android app with JAVA in which I will provide questions realted maths and physics. I have used JLatexMathView to show formula in proper form. It is working fine . But the problem here is that I have added questions in database in mixed form like this &quot; Find the value of [formula]&quot; that's why when it is being loaded in mathiew it is showing like this &quot;Findthevalueof[formula]&quot; . It is treating the text as formula and erasing the space between the words.</p>\n<p>I want to show it separately like a normal question. How can I do this please explain.\nPlease let me know if there is any other option to do this.\nI am providing some of my codes below</p>\n<p>XML code</p>\n<pre><code>   &lt;androidx.constraintlayout.widget.ConstraintLayout        \n\n\n   xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n    \n\n    &lt;ru.noties.jlatexmath.JLatexMathView\n        android:id=&quot;@+id/j_latex_math_view&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:background=&quot;@color/white&quot;\n        android:padding=&quot;16dip&quot;\n        app:jlmv_alignHorizontal=&quot;center&quot;\n        app:jlmv_alignVertical=&quot;center&quot;\n        app:jlmv_textSize=&quot;16sp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;```\n\n\n\n\nJAVA code\n\n</code></pre>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\nMathView mathView ;\n JLatexMathView latex;\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    latex = findViewById(R.id.j_latex_math_view);\n\n\n    final JLatexMathDrawable drawable = JLatexMathDrawable.builder(&quot; Find value of  \\\\[\\\\sqrt[n]   {ab}\\\\overleftarrow{ab}\\\\coprod_a^b\\\\left(\\\\begin{array}{c}a\\\\\\\\    b\\\\end{array}\\\\right)\\\\sum_a^b\\\\]\\n&quot;)\n            .textSize(70)\n            .padding(8)\n            .background(0xFFffffff)\n            .align(JLatexMathDrawable.ALIGN_RIGHT)\n            .build();\n\n\n\n    latex.setLatex(&quot; hhhhhhh bbbbbbbbbbbb bbbbbbbbbbb tttttttt \\\\[\\\\sqrt[n]{ab}\\\\overleftarrow{ab}\\\\coprod_a^b\\\\left(\\\\begin{array}{c}a\\\\\\\\ b\\\\end{array}\\\\right)\\\\sum_a^b\\\\]\\n&quot;);\n  //  latex.setLatexDrawable(drawable);\n}\n</code></pre>\n<pre><code>\n\nDEENDENCY \n\n    implementation 'ru.noties:jlatexmath-android:0.2.0'\n\n// for Cyrillic symbols\n    implementation 'ru.noties:jlatexmath-android-font-cyrillic:0.2.0'\n\n// for Greek symbols\n    implementation 'ru.noties:jlatexmath-android-font-greek:0.2.0'\n\nI tried to show mixed text + formula questions for maths and physics android \n</code></pre>\n"},{"tags":["java","jar","resources","organization","getresource"],"comments":[{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":1,"creation_date":1691084017,"post_id":76830357,"comment_id":135447189,"body_markdown":"You can locate resources in the folder same way as in jar. Just make sure your folder with resources is provided with -cp with the correct root","body":"You can locate resources in the folder same way as in jar. Just make sure your folder with resources is provided with -cp with the correct root"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1691084046,"post_id":76830357,"comment_id":135447196,"body_markdown":"@gdomo Put that into an answer and I&#39;ll accept it.","body":"@gdomo Put that into an answer and I&#39;ll accept it."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1691084403,"post_id":76830357,"comment_id":135447261,"body_markdown":"@user16320675 That is good to know, but I far prefer the -cp option, as it allows me to be explicit and not depend on assumptions. That is safer for me in the long term.","body":"@user16320675 That is good to know, but I far prefer the -cp option, as it allows me to be explicit and not depend on assumptions. That is safer for me in the long term."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1691084757,"post_id":76830357,"comment_id":135447334,"body_markdown":"There is no need and I would say is an antipattern to add to the classpath something that it is already there. You only need to add to the classpath if it is in a different project or a separate jar.","body":"There is no need and I would say is an antipattern to add to the classpath something that it is already there. You only need to add to the classpath if it is in a different project or a separate jar."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1691086250,"post_id":76830357,"comment_id":135447619,"body_markdown":"@aled I don&#39;t think you understand the full context here. I want to have my resources in an entirely separate folder from where my code (and compiled .class files) will be. Because of this, the -cp option works perfectly for my needs. My code is not going to be nearby my resources, therefore your suggestion doesn&#39;t work, and your concerns about antipattern are irrelevant to my situation. That is because my resources were not on the classpath to begin with.","body":"@aled I don&#39;t think you understand the full context here. I want to have my resources in an entirely separate folder from where my code (and compiled .class files) will be. Because of this, the -cp option works perfectly for my needs. My code is not going to be nearby my resources, therefore your suggestion doesn&#39;t work, and your concerns about antipattern are irrelevant to my situation. That is because my resources were not on the classpath to begin with."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1691086877,"post_id":76830357,"comment_id":135447736,"body_markdown":"assumptions? well, if the code is running, the ClassLoader sure did find the classes that are running, or? If the resources are *sharing* the same location as the classes (deployed together) there is no need for an additional entry (`-cp` or `CLASSPATH`) - Sure, if you *need* a separate location, then it must be added to the classpath","body":"assumptions? well, if the code is running, the ClassLoader sure did find the classes that are running, or? If the resources are <i>sharing</i> the same location as the classes (deployed together) there is no need for an additional entry (<code>-cp</code> or <code>CLASSPATH</code>) - Sure, if you <i>need</i> a separate location, then it must be added to the classpath"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1691087508,"post_id":76830357,"comment_id":135447866,"body_markdown":"@user16320675 My criticism was to aled, not you. You gave a helpful comment -- you are telling me that, if my resources are already on the classpath, then I can forgo the `-cp`. That is useful info, but I can&#39;t take advantage of it because my resources are not already on the classpath. Aled, on the otherhand, made the assumption that my resources were already on the classpath, and told me that doing `-cp` is an antipattern. I am criticizing aled for jumping to conclusions. You did nothing wrong. And yes, the accepted answer included what you said, which is good. It made the answer better.","body":"@user16320675 My criticism was to aled, not you. You gave a helpful comment -- you are telling me that, if my resources are already on the classpath, then I can forgo the <code>-cp</code>. That is useful info, but I can&#39;t take advantage of it because my resources are not already on the classpath. Aled, on the otherhand, made the assumption that my resources were already on the classpath, and told me that doing <code>-cp</code> is an antipattern. I am criticizing aled for jumping to conclusions. You did nothing wrong. And yes, the accepted answer included what you said, which is good. It made the answer better."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1691087896,"post_id":76830357,"comment_id":135447931,"body_markdown":"it&#39;s OK - I did not refer to anything regarding aled&#39;s comment or your reply to it (or at least I think so) - just the &quot;not depend on assumptions&quot; kind of made me think that you did not understand what I wanted to say... Anyway the ClassLoader uses the same mechanism to find/load resources as it does for classes (no matter if in a JAR, a directory, or ??)","body":"it&#39;s OK - I did not refer to anything regarding aled&#39;s comment or your reply to it (or at least I think so) - just the &quot;not depend on assumptions&quot; kind of made me think that you did not understand what I wanted to say... Anyway the ClassLoader uses the same mechanism to find/load resources as it does for classes (no matter if in a JAR, a directory, or ??)"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1691088231,"post_id":76830357,"comment_id":135447991,"body_markdown":"@user16320675 I understand. I think the name classpath is part of the confusion because, when I say resources, I actually mean image files. They exist in a very different folder from the rest of my code, and thus, was not in a location that the `ClassLoader` knew to look. I suppose I could move them there, but I don&#39;t want to because that folder will likely get deleted whenever I need to do clean builds. Java will recreate the folder before inserting the created .class files, but I would have lost my images. I could probably turn off that behaviour, but it&#39;s easier to put the images elsewhere.","body":"@user16320675 I understand. I think the name classpath is part of the confusion because, when I say resources, I actually mean image files. They exist in a very different folder from the rest of my code, and thus, was not in a location that the <code>ClassLoader</code> knew to look. I suppose I could move them there, but I don&#39;t want to because that folder will likely get deleted whenever I need to do clean builds. Java will recreate the folder before inserting the created .class files, but I would have lost my images. I could probably turn off that behaviour, but it&#39;s easier to put the images elsewhere."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1691088547,"post_id":76830357,"comment_id":135448038,"body_markdown":"*kind of*  an [XY problem](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)... like the real problem is how the app is being built -- most IDEs do the correct copying of resources, so do most build tools (I know of)","body":"<i>kind of</i>  an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>... like the real problem is how the app is being built -- most IDEs do the correct copying of resources, so do most build tools (I know of)"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1691088718,"post_id":76830357,"comment_id":135448071,"body_markdown":"@user16320675 In this individual instance, you would be correct. However, that is a separate issue that I can fix. Ultimately, I want to be able to store my resources off the default classpath, and be able to include them in as necessary with an explicit command. This is because I want to be able to have my resources be something the user can easily edit and interact with, even after I have built my code.","body":"@user16320675 In this individual instance, you would be correct. However, that is a separate issue that I can fix. Ultimately, I want to be able to store my resources off the default classpath, and be able to include them in as necessary with an explicit command. This is because I want to be able to have my resources be something the user can easily edit and interact with, even after I have built my code."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1691091596,"post_id":76830357,"comment_id":135448637,"body_markdown":"I agree with @user16320675. It doesn&#39;t look like classpath resource management is what should be used for editable files. I don&#39;t have enough context but probably should be managed as regular files.","body":"I agree with @user16320675. It doesn&#39;t look like classpath resource management is what should be used for editable files. I don&#39;t have enough context but probably should be managed as regular files."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1691091776,"post_id":76830357,"comment_id":135448663,"body_markdown":"@aled By all means, if you have an alternate suggestion, I am willing to hear it.","body":"@aled By all means, if you have an alternate suggestion, I am willing to hear it."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1691092598,"post_id":76830357,"comment_id":135448827,"body_markdown":"For the use case described in the question is what @user16320675 said. However if the user case is that the application edits and manages files that is a complete different situation to the original question. You may want to open a new question but if it is very high level it could be off topic.","body":"For the use case described in the question is what @user16320675 said. However if the user case is that the application edits and manages files that is a complete different situation to the original question. You may want to open a new question but if it is very high level it could be off topic."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1691111705,"post_id":76830357,"comment_id":135451125,"body_markdown":"@aled So to be clear, it is not the application that is editing and managing files, it is the user. What I wanted was to be able to use the same JAR, but have different values for the `-cp` flag when running the application, depending on the context. That way, I only need to make minor changes on the command line to handle an entirely different context. This gives me a lot of flexibility, and allows me to repurpose an existing solution to a new context without having to change any code.","body":"@aled So to be clear, it is not the application that is editing and managing files, it is the user. What I wanted was to be able to use the same JAR, but have different values for the <code>-cp</code> flag when running the application, depending on the context. That way, I only need to make minor changes on the command line to handle an entirely different context. This gives me a lot of flexibility, and allows me to repurpose an existing solution to a new context without having to change any code."}],"answers":[{"comments":[{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1691086352,"post_id":76830485,"comment_id":135447640,"body_markdown":"This is very helpful, thank you very much. Could you also include the part about .jar and how the way to do it for a .jar is the same for javac? I feel like that would really help communicate how the way to solve this problem is actually the same for both contexts.","body":"This is very helpful, thank you very much. Could you also include the part about .jar and how the way to do it for a .jar is the same for javac? I feel like that would really help communicate how the way to solve this problem is actually the same for both contexts."},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":1,"creation_date":1691092818,"post_id":76830485,"comment_id":135448881,"body_markdown":"Not sure if I got your question. I&#39;ve extended the answer a bit. If it&#39;s not enough, please, specify your question.","body":"Not sure if I got your question. I&#39;ve extended the answer a bit. If it&#39;s not enough, please, specify your question."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1691093047,"post_id":76830485,"comment_id":135448922,"body_markdown":"That&#39;s exactly it, ty vm","body":"That&#39;s exactly it, ty vm"}],"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691137992,"creation_date":1691084928,"answer_id":76830485,"question_id":76830357,"body_markdown":"You can locate resources in the folder same way as in a jar. Just make sure your folder with resources is listed via `-cp` when running java and relative paths in your code corresponds to it.\r\n\r\nHere is an example.\r\n\r\n`java -cp &quot;.;first/path/to/resource/folder;second/path;third/path&quot; PackageName.NameOfClassContainingMainMethod`\r\n\r\nThat said, the resource might be inside of the same folder that your compiled code is in. In that case, there is no need to provide it explicitly via `-cp`.\r\n\r\nWhenever you are loading a resource in your code by `ClassLoader.getResource` / `getResourceAsStream` java looks for it in the classpath. Providing .jar (which is essentially just a zipped folder) and raw folder is just an alternative ways to specify a **content** to be loaded into classpath. ","title":"How to specify resource location in the same way when compiling TO and NOT TO a JAR file","body":"<p>You can locate resources in the folder same way as in a jar. Just make sure your folder with resources is listed via <code>-cp</code> when running java and relative paths in your code corresponds to it.</p>\n<p>Here is an example.</p>\n<p><code>java -cp &quot;.;first/path/to/resource/folder;second/path;third/path&quot; PackageName.NameOfClassContainingMainMethod</code></p>\n<p>That said, the resource might be inside of the same folder that your compiled code is in. In that case, there is no need to provide it explicitly via <code>-cp</code>.</p>\n<p>Whenever you are loading a resource in your code by <code>ClassLoader.getResource</code> / <code>getResourceAsStream</code> java looks for it in the classpath. Providing .jar (which is essentially just a zipped folder) and raw folder is just an alternative ways to specify a <strong>content</strong> to be loaded into classpath.</p>\n"}],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76830485,"answer_count":1,"score":2,"last_activity_date":1691137992,"creation_date":1691083749,"question_id":76830357,"body_markdown":"I have a project that I am compiling using `javac`. I want to be able to fetch resources without having to first build my project into a JAR file, but at the same time, I don&#39;t want to hard code the location either (C://Users/name/etc).\r\n\r\nI know that if I had a JAR file, I could use a `ClassLoader` and call one of the resource methods from there. Alternatively, if my resources were contained within another JAR file, and that JAR file was on my class path, then I could fetch it from the JAR file in a similar format.\r\n\r\nBut how do I do so when I am only compiling in javac? I don&#39;t want to have to rework all of my resource fetching logic when I eventually turn this into a JAR file, but I also don&#39;t want to have to make a jar file every time I compile and want to test a change. I just want to be able to specify to Java that this is where to find my resources, and I don&#39;t want to change that strategy when I finally decide to making a JAR file.","title":"How to specify resource location in the same way when compiling TO and NOT TO a JAR file","body":"<p>I have a project that I am compiling using <code>javac</code>. I want to be able to fetch resources without having to first build my project into a JAR file, but at the same time, I don't want to hard code the location either (C://Users/name/etc).</p>\n<p>I know that if I had a JAR file, I could use a <code>ClassLoader</code> and call one of the resource methods from there. Alternatively, if my resources were contained within another JAR file, and that JAR file was on my class path, then I could fetch it from the JAR file in a similar format.</p>\n<p>But how do I do so when I am only compiling in javac? I don't want to have to rework all of my resource fetching logic when I eventually turn this into a JAR file, but I also don't want to have to make a jar file every time I compile and want to test a change. I just want to be able to specify to Java that this is where to find my resources, and I don't want to change that strategy when I finally decide to making a JAR file.</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":2436173,"reputation":5566,"user_id":2126023,"accept_rate":85,"display_name":"Saif Asif"},"score":1,"creation_date":1399312688,"post_id":23478679,"comment_id":35999150,"body_markdown":"Are you sure that there wasn&#39;t any class inside the default package? Also make sure that you have the proper run configurations setup for the project","body":"Are you sure that there wasn&#39;t any class inside the default package? Also make sure that you have the proper run configurations setup for the project"},{"owner":{"account_id":455488,"reputation":2201,"user_id":853671,"accept_rate":69,"display_name":"Lasitha Benaragama"},"score":0,"creation_date":1399312822,"post_id":23478679,"comment_id":35999252,"body_markdown":"Seems You deleted class which contain your main method with the package.","body":"Seems You deleted class which contain your main method with the package."}],"answers":[{"tags":[],"owner":{"account_id":4401329,"reputation":89,"user_id":3586943,"accept_rate":80,"display_name":"user3586943"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1399313241,"creation_date":1399313241,"answer_id":23478887,"question_id":23478679,"body_markdown":"The problem is that the default packeg is contains a class which is empty but cause problem.As soon as I delete that class the package is delete automatically.","title":"Delete default package in Eclipse","body":"<p>The problem is that the default packeg is contains a class which is empty but cause problem.As soon as I delete that class the package is delete automatically.</p>\n"},{"tags":[],"owner":{"account_id":8154208,"reputation":4189,"user_id":6140314,"display_name":"Mohamed Anees A"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1466757137,"creation_date":1466757137,"answer_id":38008942,"question_id":23478679,"body_markdown":"Move your main class from the default package to any other package and then a simple refresh would solve the problem.","title":"Delete default package in Eclipse","body":"<p>Move your main class from the default package to any other package and then a simple refresh would solve the problem.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691493007,"post_id":76834204,"comment_id":135496110,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76834204/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29158425,"reputation":1,"user_id":22337695,"display_name":"TheCelio81"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691137569,"creation_date":1691137569,"answer_id":76834204,"question_id":23478679,"body_markdown":"just create a package and it will solve the problem. Then relauch your application.","title":"Delete default package in Eclipse","body":"<p>just create a package and it will solve the problem. Then relauch your application.</p>\n"}],"owner":{"account_id":4401329,"reputation":89,"user_id":3586943,"accept_rate":80,"display_name":"user3586943"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16888,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":3,"score":4,"last_activity_date":1691137569,"creation_date":1399312553,"question_id":23478679,"body_markdown":"I Have DataLayer and logicLayer as packages in my project. I want to delete the default package since I do not need it. But When I delete I got the following error.\r\n\r\n&gt; Error: Could not find or load main class\r\n\r\nHow can I slove this problem?","title":"Delete default package in Eclipse","body":"<p>I Have DataLayer and logicLayer as packages in my project. I want to delete the default package since I do not need it. But When I delete I got the following error.</p>\n\n<blockquote>\n  <p>Error: Could not find or load main class</p>\n</blockquote>\n\n<p>How can I slove this problem?</p>\n"},{"tags":["java","git","datetime","git-commit","jgit"],"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1680150445,"post_id":75867356,"comment_id":133849903,"body_markdown":"Which version of JGit are you using?","body":"Which version of JGit are you using?"}],"answers":[{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1680014636,"post_id":75867423,"comment_id":133822247,"body_markdown":"I stringly recommend that you don’t use `Date` and `TimeZone` since those classes are poorly designed and long outdated. Later versions of JGit have [constructors that accept a modern `Instant` and a modern  `ZonedId`](https://javadoc.io/static/org.eclipse.jgit/org.eclipse.jgit/6.5.0.202303070854-r/org.eclipse.jgit/org/eclipse/jgit/lib/PersonIdent.html#%3Cinit%3E(java.lang.String,java.lang.String,java.time.Instant,java.time.ZoneId)).","body":"I stringly recommend that you don’t use <code>Date</code> and <code>TimeZone</code> since those classes are poorly designed and long outdated. Later versions of JGit have <a href=\"https://javadoc.io/static/org.eclipse.jgit/org.eclipse.jgit/6.5.0.202303070854-r/org.eclipse.jgit/org/eclipse/jgit/lib/PersonIdent.html#%3Cinit%3E(java.lang.String,java.lang.String,java.time.Instant,java.time.ZoneId)\" rel=\"nofollow noreferrer\">constructors that accept a modern <code>Instant</code> and a modern  <code>ZonedId</code></a>."},{"owner":{"account_id":9930295,"reputation":11658,"user_id":11082165,"display_name":"Brian61354270"},"score":2,"creation_date":1680015216,"post_id":75867423,"comment_id":133822431,"body_markdown":"@OleV.V. Thanks! I updated my answer to reflect the API as of JGit 6.5.0","body":"@OleV.V. Thanks! I updated my answer to reflect the API as of JGit 6.5.0"},{"owner":{"account_id":22903011,"reputation":105,"user_id":17041460,"display_name":"Thend"},"score":0,"creation_date":1680080470,"post_id":75867423,"comment_id":133834832,"body_markdown":"@Brian61354270 Working perfectly. I used `PersonIdent author_committer = new PersonIdent(&quot;X&quot;, &quot;email&quot;, timestamp, timezoneOffset);` The timestamp was `long timestamp = dateTime.atZone(zone).toInstant().toEpochMilli();` where dateTime was the `Date date = formatter.parse(oldDate);\n                LocalDateTime dateTime = LocalDateTime.ofInstant(date.toInstant(), ZoneId.systemDefault());`","body":"@Brian61354270 Working perfectly. I used <code>PersonIdent author_committer = new PersonIdent(&quot;X&quot;, &quot;email&quot;, timestamp, timezoneOffset);</code> The timestamp was <code>long timestamp = dateTime.atZone(zone).toInstant().toEpochMilli();</code> where dateTime was the <code>Date date = formatter.parse(oldDate);                 LocalDateTime dateTime = LocalDateTime.ofInstant(date.toInstant(), ZoneId.systemDefault());</code>"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1680148676,"post_id":75867423,"comment_id":133849755,"body_markdown":"That looks convoluted, @Thend. I am pretty sure that you can leave out the use of `Date`  and `DateFormat`/`SimpleDateFormat`  and simplify considerably.","body":"That looks convoluted, @Thend. I am pretty sure that you can leave out the use of <code>Date</code>  and <code>DateFormat</code>/<code>SimpleDateFormat</code>  and simplify considerably."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1680148965,"post_id":75867423,"comment_id":133849783,"body_markdown":"`long timestamp = LocalDate.parse(oldDate)  .atStartOfDay(zone) .tiInstant()  .toEpochMilli();`.","body":"<code>long timestamp = LocalDate.parse(oldDate)  .atStartOfDay(zone) .tiInstant()  .toEpochMilli();</code>."},{"owner":{"account_id":22903011,"reputation":105,"user_id":17041460,"display_name":"Thend"},"score":0,"creation_date":1680156810,"post_id":75867423,"comment_id":133850734,"body_markdown":"@OleV.V. I think I&#39;m in Central European Summer Time (CEST) +0200 UTC, so + 2 hours.","body":"@OleV.V. I think I&#39;m in Central European Summer Time (CEST) +0200 UTC, so + 2 hours."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1680157042,"post_id":75867423,"comment_id":133850783,"body_markdown":"Sorry, I meant which value are you passing for time zone offset? I believe the method accepts an `int`. So is that 2 for 2 hours, or is it 7200 for 7200 seconds or 7 200 000 milliseconds, or something else? Just because I was curious how to get that value out of a modern `ZoneId` or other modern object and would like to post it as a comment if and when I find out.","body":"Sorry, I meant which value are you passing for time zone offset? I believe the method accepts an <code>int</code>. So is that 2 for 2 hours, or is it 7200 for 7200 seconds or 7 200 000 milliseconds, or something else? Just because I was curious how to get that value out of a modern <code>ZoneId</code> or other modern object and would like to post it as a comment if and when I find out."}],"tags":[],"owner":{"account_id":9930295,"reputation":11658,"user_id":11082165,"display_name":"Brian61354270"},"comment_count":7,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1680014877,"creation_date":1680012859,"answer_id":75867423,"question_id":75867356,"body_markdown":"The [`PersonIdent`](https://javadoc.io/static/org.eclipse.jgit/org.eclipse.jgit/6.5.0.202303070854-r/org.eclipse.jgit/org/eclipse/jgit/lib/PersonIdent.html) constructor you&#39;re calling in\r\n```\r\nnew PersonIdent(&quot;X&quot;, String.valueOf(oldDate));\r\n```\r\nis \r\n&gt; ```java\r\n&gt; public PersonIdent(String aName, \r\n&gt;                    String aEmailAddress)\r\n&gt; ```\r\n&gt; Construct a new PersonIdent **with current time**. \r\n\r\nEmphasis mine. It looks like your specifying the email address instead of the time.\r\n\r\nTo specify the time, you&#39;ll need to use one of the four other non-copy/config constructors (as of JGit 6.5.0 2023-03-07), which are\r\n```java\r\npublic PersonIdent​(String aName,\r\n                   String aEmailAddress,\r\n                   Instant aWhen,\r\n                   ZoneId zoneId)\r\n\r\npublic PersonIdent​(String aName,\r\n                   String aEmailAddress,\r\n                   ProposedTimestamp when)\r\n\r\npublic PersonIdent​(String aName,\r\n                   String aEmailAddress,\r\n                   Date aWhen,\r\n                   TimeZone aTZ)\r\n\r\npublic PersonIdent​(String aName,\r\n                   String aEmailAddress,\r\n                   long aWhen,\r\n                   int aTZ)\r\n```","title":"JGit commiting with past (old) dates to local repository","body":"<p>The <a href=\"https://javadoc.io/static/org.eclipse.jgit/org.eclipse.jgit/6.5.0.202303070854-r/org.eclipse.jgit/org/eclipse/jgit/lib/PersonIdent.html\" rel=\"nofollow noreferrer\"><code>PersonIdent</code></a> constructor you're calling in</p>\n<pre><code>new PersonIdent(&quot;X&quot;, String.valueOf(oldDate));\n</code></pre>\n<p>is</p>\n<blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>public PersonIdent(String aName, \n                   String aEmailAddress)\n</code></pre>\n<p>Construct a new PersonIdent <strong>with current time</strong>.</p>\n</blockquote>\n<p>Emphasis mine. It looks like your specifying the email address instead of the time.</p>\n<p>To specify the time, you'll need to use one of the four other non-copy/config constructors (as of JGit 6.5.0 2023-03-07), which are</p>\n<pre class=\"lang-java prettyprint-override\"><code>public PersonIdent​(String aName,\n                   String aEmailAddress,\n                   Instant aWhen,\n                   ZoneId zoneId)\n\npublic PersonIdent​(String aName,\n                   String aEmailAddress,\n                   ProposedTimestamp when)\n\npublic PersonIdent​(String aName,\n                   String aEmailAddress,\n                   Date aWhen,\n                   TimeZone aTZ)\n\npublic PersonIdent​(String aName,\n                   String aEmailAddress,\n                   long aWhen,\n                   int aTZ)\n</code></pre>\n"}],"owner":{"account_id":22903011,"reputation":105,"user_id":17041460,"display_name":"Thend"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75867423,"answer_count":1,"score":0,"last_activity_date":1691137547,"creation_date":1680012368,"question_id":75867356,"body_markdown":"I would like to **commit in a specific date in the past using JGit** in Java. For example, I would like to commit to the local repository in 2023-03-01, 2023-03-02, 2023-03-03, 2023-03-04. According to many websites (including StackOverflow posts) I can achieve this by:\r\n\r\n    String oldDate = &quot;2023-03-01&quot;;\r\n    \r\n    PersonIdent author = new PersonIdent(&quot;X&quot;, String.valueOf(oldDate));\r\n    PersonIdent committer = new PersonIdent(&quot;X&quot;, String.valueOf(oldDate));\r\n    \r\n    git.commit().setAuthor(author).setCommitter(committer).setMessage(&quot;Modified temp.txt&quot;).call();\r\n\r\nHowever, this doesn&#39;t do what I want since the date stays the same, the actual date, coming from the system. I have checked the result using `git log` in Git Bash: (**Please check this image**)\r\n\r\n[![enter image description here][1]][1] \r\n\r\n**How can I do commits with past dates?** All help is appreciated!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QFsYk.png","title":"JGit commiting with past (old) dates to local repository","body":"<p>I would like to <strong>commit in a specific date in the past using JGit</strong> in Java. For example, I would like to commit to the local repository in 2023-03-01, 2023-03-02, 2023-03-03, 2023-03-04. According to many websites (including StackOverflow posts) I can achieve this by:</p>\n<pre><code>String oldDate = &quot;2023-03-01&quot;;\n\nPersonIdent author = new PersonIdent(&quot;X&quot;, String.valueOf(oldDate));\nPersonIdent committer = new PersonIdent(&quot;X&quot;, String.valueOf(oldDate));\n\ngit.commit().setAuthor(author).setCommitter(committer).setMessage(&quot;Modified temp.txt&quot;).call();\n</code></pre>\n<p>However, this doesn't do what I want since the date stays the same, the actual date, coming from the system. I have checked the result using <code>git log</code> in Git Bash: (<strong>Please check this image</strong>)</p>\n<p><a href=\"https://i.stack.imgur.com/QFsYk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QFsYk.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>How can I do commits with past dates?</strong> All help is appreciated!</p>\n"},{"tags":["java","testing","automated-tests","karate"],"answers":[{"comments":[{"owner":{"account_id":17186781,"reputation":91,"user_id":12441259,"display_name":"Jackson"},"score":1,"creation_date":1593144584,"post_id":62567262,"comment_id":110682903,"body_markdown":"Made a bit modification based on this and it did work. Thanks so much for the help.","body":"Made a bit modification based on this and it did work. Thanks so much for the help."}],"tags":[],"owner":{"account_id":48302,"reputation":55363,"user_id":143475,"display_name":"Peter Thomas"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691116995,"creation_date":1593054714,"answer_id":62567262,"question_id":62566219,"body_markdown":"First, you are encouraged to write static expected results in tests. That said there are multiple ways to do this, here&#39;s one:\r\n\r\n    * def failedSchema = { xml: &#39;#string&#39;, formErrors: &#39;#array&#39; }\r\n    * def isValid = function(x){ if (x.status == &#39;Receipted&#39;) return x.response == null; return karate.match(x.response, failedSchema).pass }\r\n    * match each response.itemList == &#39;#? isValid(_)&#39;\r\n\r\nHere&#39;s another example: https://stackoverflow.com/a/62567412/143475\r\n\r\nThere are other ways to loop in Karate, but not really designed for matching: https://github.com/intuit/karate#loops\r\n\r\nHere&#39;s an extreme example involving JSON transformation to make it easier to match: https://stackoverflow.com/a/53120851/143475\r\n\r\nAlso refer: https://github.com/intuit/karate#conditional-logic | https://stackoverflow.com/a/76091034/143475\r\n\r\n","title":"Asserting and using conditions for an array response in Karate","body":"<p>First, you are encouraged to write static expected results in tests. That said there are multiple ways to do this, here's one:</p>\n<pre><code>* def failedSchema = { xml: '#string', formErrors: '#array' }\n* def isValid = function(x){ if (x.status == 'Receipted') return x.response == null; return karate.match(x.response, failedSchema).pass }\n* match each response.itemList == '#? isValid(_)'\n</code></pre>\n<p>Here's another example: <a href=\"https://stackoverflow.com/a/62567412/143475\">https://stackoverflow.com/a/62567412/143475</a></p>\n<p>There are other ways to loop in Karate, but not really designed for matching: <a href=\"https://github.com/intuit/karate#loops\" rel=\"nofollow noreferrer\">https://github.com/intuit/karate#loops</a></p>\n<p>Here's an extreme example involving JSON transformation to make it easier to match: <a href=\"https://stackoverflow.com/a/53120851/143475\">https://stackoverflow.com/a/53120851/143475</a></p>\n<p>Also refer: <a href=\"https://github.com/intuit/karate#conditional-logic\" rel=\"nofollow noreferrer\">https://github.com/intuit/karate#conditional-logic</a> | <a href=\"https://stackoverflow.com/a/76091034/143475\">https://stackoverflow.com/a/76091034/143475</a></p>\n"}],"owner":{"account_id":17186781,"reputation":91,"user_id":12441259,"display_name":"Jackson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3933,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":62567262,"answer_count":1,"score":2,"last_activity_date":1691137294,"creation_date":1593046391,"question_id":62566219,"body_markdown":"I&#39;ve got a request that returns a list of responses in two possible structures, depending on the &#39;status&#39;.\r\n```json\r\n{\r\n    &quot;listSize&quot;: 2,\r\n    &quot;itemList&quot;: [\r\n       {\r\n            &quot;id&quot;: ,\r\n            &quot;Name&quot;: &quot;&quot;,\r\n            &quot;submittedOn&quot;: &quot;&quot;,\r\n            &quot;Reference&quot;: null,\r\n            &quot;status&quot;: &quot;Receipted&quot;,\r\n            &quot;response&quot;: null\r\n        },\r\n        {\r\n            &quot;id&quot;: 12345,\r\n            &quot;submittedOn&quot;: &quot;&quot;,\r\n            &quot;Reference&quot;: null,\r\n            &quot;status&quot;: &quot;Failed&quot;,\r\n            &quot;response&quot;: {\r\n                &quot;xml&quot;: &quot;&quot;,\r\n                &quot;formErrors&quot;: [\r\n                    {\r\n                        &quot;error_type&quot;: &quot;&quot;,\r\n                        &quot;error_location&quot;:&quot;&quot;, \r\n                        &quot;error_message&quot;: &quot;&quot;,\r\n                    }\r\n                ]\r\n            }\r\n        }, \r\n     ]\r\n}\r\n\r\n```\r\nI need to check the structure for the status being either &#39;Receipted&#39; or &#39;Failed&#39;. In Java I would use a for loop and an if statement within it to check the response field with different criteria depending on the &#39;status&#39; field. (Example below)\r\n\r\n```\r\nfor (int i = 0; i &lt; response.length; i++){\r\n   if (response[i].status.equals(&quot;receipted&quot;)){\r\n      //do something\r\n   }\r\n   else{ //failed\r\n      //do something else\r\n   }\r\n}\r\n```\r\n\r\nHow could I achieve something similar in Karate? Should I use a Java Helper?","title":"Asserting and using conditions for an array response in Karate","body":"<p>I've got a request that returns a list of responses in two possible structures, depending on the 'status'.</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;listSize&quot;: 2,\n    &quot;itemList&quot;: [\n       {\n            &quot;id&quot;: ,\n            &quot;Name&quot;: &quot;&quot;,\n            &quot;submittedOn&quot;: &quot;&quot;,\n            &quot;Reference&quot;: null,\n            &quot;status&quot;: &quot;Receipted&quot;,\n            &quot;response&quot;: null\n        },\n        {\n            &quot;id&quot;: 12345,\n            &quot;submittedOn&quot;: &quot;&quot;,\n            &quot;Reference&quot;: null,\n            &quot;status&quot;: &quot;Failed&quot;,\n            &quot;response&quot;: {\n                &quot;xml&quot;: &quot;&quot;,\n                &quot;formErrors&quot;: [\n                    {\n                        &quot;error_type&quot;: &quot;&quot;,\n                        &quot;error_location&quot;:&quot;&quot;, \n                        &quot;error_message&quot;: &quot;&quot;,\n                    }\n                ]\n            }\n        }, \n     ]\n}\n\n</code></pre>\n<p>I need to check the structure for the status being either 'Receipted' or 'Failed'. In Java I would use a for loop and an if statement within it to check the response field with different criteria depending on the 'status' field. (Example below)</p>\n<pre><code>for (int i = 0; i &lt; response.length; i++){\n   if (response[i].status.equals(&quot;receipted&quot;)){\n      //do something\n   }\n   else{ //failed\n      //do something else\n   }\n}\n</code></pre>\n<p>How could I achieve something similar in Karate? Should I use a Java Helper?</p>\n"},{"tags":["java","xml","json"],"comments":[{"owner":{"account_id":113024,"reputation":4516,"user_id":297907,"accept_rate":56,"display_name":"StackOverFlow"},"score":0,"creation_date":1375953529,"post_id":18121714,"comment_id":26534730,"body_markdown":"@Qwerky Question edited","body":"@Qwerky Question edited"},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":1,"creation_date":1375961673,"post_id":18121714,"comment_id":26539320,"body_markdown":"Clearly this library is doing some guesswork to try and guess the most suitable JSON data type to use. It&#39;s not clear whether you actually want to treat 0123 as a string or as a number. If you want it as a number, it has to be 123 rather than 0123, because JSON doesn&#39;t allow a leading zero: that&#39;s because of the ancient and horrible tradition in C and Java and JS of treating numbers starting with a zero as octal.","body":"Clearly this library is doing some guesswork to try and guess the most suitable JSON data type to use. It&#39;s not clear whether you actually want to treat 0123 as a string or as a number. If you want it as a number, it has to be 123 rather than 0123, because JSON doesn&#39;t allow a leading zero: that&#39;s because of the ancient and horrible tradition in C and Java and JS of treating numbers starting with a zero as octal."}],"answers":[{"comments":[{"owner":{"account_id":113024,"reputation":4516,"user_id":297907,"accept_rate":56,"display_name":"StackOverFlow"},"score":0,"creation_date":1375953686,"post_id":18122229,"comment_id":26534832,"body_markdown":"Please see updated question &amp; What changes I need to do in my code ?","body":"Please see updated question &amp; What changes I need to do in my code ?"},{"owner":{"account_id":2042374,"reputation":2206,"user_id":1823225,"accept_rate":50,"display_name":"Graham Griffiths"},"score":0,"creation_date":1375953974,"post_id":18122229,"comment_id":26534997,"body_markdown":"try &quot;0123A&quot; instead, to check this is really the problem","body":"try &quot;0123A&quot; instead, to check this is really the problem"},{"owner":{"account_id":113024,"reputation":4516,"user_id":297907,"accept_rate":56,"display_name":"StackOverFlow"},"score":0,"creation_date":1375954182,"post_id":18122229,"comment_id":26535107,"body_markdown":"@ Graham Griffiths if I append &#39;A&#39; then I am getting &quot;0123A&quot; in jsonString. I want &quot;0123&quot; only.","body":"@ Graham Griffiths if I append &#39;A&#39; then I am getting &quot;0123A&quot; in jsonString. I want &quot;0123&quot; only."},{"owner":{"account_id":2042374,"reputation":2206,"user_id":1823225,"accept_rate":50,"display_name":"Graham Griffiths"},"score":0,"creation_date":1375954297,"post_id":18122229,"comment_id":26535176,"body_markdown":"to be honest, it looks like a bug in this library code, I think it should be (negative ? 1 : 0) in which case it would always consider a leading zero to mean a string.  With the code as it is, I think it will take two leading zeros to interpret it as a string - it&#39;s worth trying this by using &quot;00123&quot; in your code.","body":"to be honest, it looks like a bug in this library code, I think it should be (negative ? 1 : 0) in which case it would always consider a leading zero to mean a string.  With the code as it is, I think it will take two leading zeros to interpret it as a string - it&#39;s worth trying this by using &quot;00123&quot; in your code."},{"owner":{"account_id":113024,"reputation":4516,"user_id":297907,"accept_rate":56,"display_name":"StackOverFlow"},"score":0,"creation_date":1375954438,"post_id":18122229,"comment_id":26535245,"body_markdown":"Thanks for quick reply :) if xml value=&quot;00123&quot; then getting json value &quot;00123&quot;.","body":"Thanks for quick reply :) if xml value=&quot;00123&quot; then getting json value &quot;00123&quot;."},{"owner":{"account_id":2042374,"reputation":2206,"user_id":1823225,"accept_rate":50,"display_name":"Graham Griffiths"},"score":1,"creation_date":1375954567,"post_id":18122229,"comment_id":26535314,"body_markdown":"I think you have come across a bug in the library, which you could report via this page : http://www.json.org/java/  it seems that when it gets a single leading zero, it will treat the value as a number instead of a string (although it will deal correctly with two or more leading zeros)","body":"I think you have come across a bug in the library, which you could report via this page : <a href=\"http://www.json.org/java/\" rel=\"nofollow noreferrer\">json.org/java</a>  it seems that when it gets a single leading zero, it will treat the value as a number instead of a string (although it will deal correctly with two or more leading zeros)"},{"owner":{"account_id":113024,"reputation":4516,"user_id":297907,"accept_rate":56,"display_name":"StackOverFlow"},"score":0,"creation_date":1375955240,"post_id":18122229,"comment_id":26535710,"body_markdown":"Graham Griffiths Reported problem to json.org . Any workaround to solve this issue?","body":"Graham Griffiths Reported problem to json.org . Any workaround to solve this issue?"},{"owner":{"account_id":2042374,"reputation":2206,"user_id":1823225,"accept_rate":50,"display_name":"Graham Griffiths"},"score":0,"creation_date":1375956488,"post_id":18122229,"comment_id":26536409,"body_markdown":"Use a different JSON library? Otherwise you would have to modify the values of the strings passed in - which seems bad, since you want to pass through the exact original value.  Sorry, no better suggestions.","body":"Use a different JSON library? Otherwise you would have to modify the values of the strings passed in - which seems bad, since you want to pass through the exact original value.  Sorry, no better suggestions."},{"owner":{"account_id":113024,"reputation":4516,"user_id":297907,"accept_rate":56,"display_name":"StackOverFlow"},"score":0,"creation_date":1375957161,"post_id":18122229,"comment_id":26536788,"body_markdown":"@ Graham Griffiths I just want to know what is &quot;e&quot; / &quot;E&quot; in string ?","body":"@ Graham Griffiths I just want to know what is &quot;e&quot; / &quot;E&quot; in string ?"},{"owner":{"account_id":2042374,"reputation":2206,"user_id":1823225,"accept_rate":50,"display_name":"Graham Griffiths"},"score":0,"creation_date":1375957775,"post_id":18122229,"comment_id":26537119,"body_markdown":"e / E is for scientific notation 1.4e-9","body":"e / E is for scientific notation 1.4e-9"}],"tags":[],"owner":{"account_id":2042374,"reputation":2206,"user_id":1823225,"accept_rate":50,"display_name":"Graham Griffiths"},"comment_count":10,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1375955082,"creation_date":1375953431,"answer_id":18122229,"question_id":18121714,"body_markdown":"looking at the [code for XML.java](https://github.com/douglascrockford/JSON-java/blob/master/XML.java) - in particular the stringToValue method which does \r\n\r\n    &quot;Try to convert a string into a number, boolean, or null&quot;.  \r\n\r\nThe code is below - you can see it tries to parse as a number first, in which case it will trim the leading zeros.  To test you could try adding a non-numeric character in your string - I think it would then preserve the leading zeros.\r\n\r\nIt looks like the behaviour you&#39;re seeing is baked into the library.\r\nWhich is not great, even though the docs for the function toJSONObject do warn \r\n\r\n    &quot;Some information may be lost in this transformation because JSON is a data format and XML is a document format&quot;\r\n\r\nteh codez :\r\n\r\n    // If it might be a number, try converting it. If that doesn&#39;t work,\r\n    // return the string.\r\n    \r\n            try {\r\n                char initial = string.charAt(0);\r\n                boolean negative = false;\r\n                if (initial == &#39;-&#39;) {\r\n                    initial = string.charAt(1);\r\n                    negative = true;\r\n                }\r\n                if (initial == &#39;0&#39; &amp;&amp; string.charAt(negative ? 2 : 1) == &#39;0&#39;) {\r\n                    return string;\r\n                }\r\n                if ((initial &gt;= &#39;0&#39; &amp;&amp; initial &lt;= &#39;9&#39;)) {\r\n                    if (string.indexOf(&#39;.&#39;) &gt;= 0) {\r\n                        return Double.valueOf(string);\r\n                    } else if (string.indexOf(&#39;e&#39;) &lt; 0 &amp;&amp; string.indexOf(&#39;E&#39;) &lt; 0) {\r\n                        Long myLong = new Long(string);\r\n                        if (myLong.longValue() == myLong.intValue()) {\r\n                            return new Integer(myLong.intValue());\r\n                        } else {\r\n                            return myLong;\r\n                        }\r\n                    }\r\n                }\r\n            } catch (Exception ignore) {\r\n            }\r\n\r\nEDIT :\r\nthis looks like a bug in the library.  I believe it should use\r\n\r\n    (negative ? 1 : 0)\r\n\r\nbecause the current behaviour wrongly interprets a value with a single leading zero as being a number.  It correctly recognizes two or more leading zeros as being a string, as confirmed by the asker.","title":"xml to json conversion issue in java, 1st leading zero discarded fom string","body":"<p>looking at the <a href=\"https://github.com/douglascrockford/JSON-java/blob/master/XML.java\" rel=\"nofollow\">code for XML.java</a> - in particular the stringToValue method which does </p>\n\n<pre><code>\"Try to convert a string into a number, boolean, or null\".  \n</code></pre>\n\n<p>The code is below - you can see it tries to parse as a number first, in which case it will trim the leading zeros.  To test you could try adding a non-numeric character in your string - I think it would then preserve the leading zeros.</p>\n\n<p>It looks like the behaviour you're seeing is baked into the library.\nWhich is not great, even though the docs for the function toJSONObject do warn </p>\n\n<pre><code>\"Some information may be lost in this transformation because JSON is a data format and XML is a document format\"\n</code></pre>\n\n<p>teh codez :</p>\n\n<pre><code>// If it might be a number, try converting it. If that doesn't work,\n// return the string.\n\n        try {\n            char initial = string.charAt(0);\n            boolean negative = false;\n            if (initial == '-') {\n                initial = string.charAt(1);\n                negative = true;\n            }\n            if (initial == '0' &amp;&amp; string.charAt(negative ? 2 : 1) == '0') {\n                return string;\n            }\n            if ((initial &gt;= '0' &amp;&amp; initial &lt;= '9')) {\n                if (string.indexOf('.') &gt;= 0) {\n                    return Double.valueOf(string);\n                } else if (string.indexOf('e') &lt; 0 &amp;&amp; string.indexOf('E') &lt; 0) {\n                    Long myLong = new Long(string);\n                    if (myLong.longValue() == myLong.intValue()) {\n                        return new Integer(myLong.intValue());\n                    } else {\n                        return myLong;\n                    }\n                }\n            }\n        } catch (Exception ignore) {\n        }\n</code></pre>\n\n<p>EDIT :\nthis looks like a bug in the library.  I believe it should use</p>\n\n<pre><code>(negative ? 1 : 0)\n</code></pre>\n\n<p>because the current behaviour wrongly interprets a value with a single leading zero as being a number.  It correctly recognizes two or more leading zeros as being a string, as confirmed by the asker.</p>\n"},{"tags":[],"owner":{"account_id":113024,"reputation":4516,"user_id":297907,"accept_rate":56,"display_name":"StackOverFlow"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1375957660,"creation_date":1375957660,"answer_id":18123670,"question_id":18121714,"body_markdown":" It works :) \r\n\r\nAdded value in CDATA section so while conversion from xml to json value display as it is\r\n\r\n       org.jdom.Element valueElement = new  org.jdom.Element(&quot;Value&quot;);\r\n        org.jdom.CDATA cdata = new org.jdom.CDATA(getValue());\r\n        valueElement.setText(cdata );","title":"xml to json conversion issue in java, 1st leading zero discarded fom string","body":"<p>It works :) </p>\n\n<p>Added value in CDATA section so while conversion from xml to json value display as it is</p>\n\n<pre><code>   org.jdom.Element valueElement = new  org.jdom.Element(\"Value\");\n    org.jdom.CDATA cdata = new org.jdom.CDATA(getValue());\n    valueElement.setText(cdata );\n</code></pre>\n"}],"owner":{"account_id":113024,"reputation":4516,"user_id":297907,"accept_rate":56,"display_name":"StackOverFlow"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5704,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":18123670,"answer_count":2,"score":2,"last_activity_date":1691137242,"creation_date":1375951828,"question_id":18121714,"body_markdown":"My xml contains attribute value &quot;0123&quot; which I want to treat as string,\r\nafter conversion from xml to json as per following code\r\nleading zero gets discarded from attribute value.\r\n\r\nUsed classes\r\n\r\n    import org.jdom.Attribute;\r\n    import org.jdom.Document;\r\n    import org.jdom.output.Format;\r\n    import org.jdom.output.XMLOutputter;\r\n    import org.json.JSONObject;\r\n    import org.json.XML;\r\n\r\n//Covert xml to json\r\n\r\n        org.jdom.Document jdomDocument = new Document();\r\n        org.jdom.Element Attribute = new org.jdom.Element(&quot;Attribute&quot;);\r\n        jdomDocument.setRootElement(Attribute);\r\n        \t\t\t\r\n        org.jdom.Element valueElement = new  org.jdom.Element(&quot;Value&quot;);\r\n        valueElement.setText(getValue()); // &quot;0123&quot;\r\n       // getValue() return anything like boolean,string,long,date, time etc..\r\n    \r\n         root.addContent(valueElement);\r\n        String xmlval = new    XMLOutputter(Format.getPrettyFormat()).outputString(jdomDocument);\r\n        JSONObject xmlJSONObj = XML.toJSONObject(xmlval);\r\n        String jsonPrettyPrintString = xmlJSONObj.toString(4);\r\n\r\nHow to resolve this issue ?\r\n","title":"xml to json conversion issue in java, 1st leading zero discarded fom string","body":"<p>My xml contains attribute value \"0123\" which I want to treat as string,\nafter conversion from xml to json as per following code\nleading zero gets discarded from attribute value.</p>\n\n<p>Used classes</p>\n\n<pre><code>import org.jdom.Attribute;\nimport org.jdom.Document;\nimport org.jdom.output.Format;\nimport org.jdom.output.XMLOutputter;\nimport org.json.JSONObject;\nimport org.json.XML;\n</code></pre>\n\n<p>//Covert xml to json</p>\n\n<pre><code>    org.jdom.Document jdomDocument = new Document();\n    org.jdom.Element Attribute = new org.jdom.Element(\"Attribute\");\n    jdomDocument.setRootElement(Attribute);\n\n    org.jdom.Element valueElement = new  org.jdom.Element(\"Value\");\n    valueElement.setText(getValue()); // \"0123\"\n   // getValue() return anything like boolean,string,long,date, time etc..\n\n     root.addContent(valueElement);\n    String xmlval = new    XMLOutputter(Format.getPrettyFormat()).outputString(jdomDocument);\n    JSONObject xmlJSONObj = XML.toJSONObject(xmlval);\n    String jsonPrettyPrintString = xmlJSONObj.toString(4);\n</code></pre>\n\n<p>How to resolve this issue ?</p>\n"},{"tags":["java","image","image-processing"],"comments":[{"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"score":0,"creation_date":1324331038,"post_id":8567905,"comment_id":10621922,"body_markdown":"Have you thought of using OpenCV? http://stackoverflow.com/questions/2037579/java-opencv-bindings","body":"Have you thought of using OpenCV? <a href=\"http://stackoverflow.com/questions/2037579/java-opencv-bindings\">stackoverflow.com/questions/2037579/java-opencv-bindings</a>"}],"answers":[{"comments":[{"owner":{"account_id":1111749,"reputation":1383,"user_id":1102092,"accept_rate":76,"display_name":"sum2000"},"score":0,"creation_date":1324331146,"post_id":8567951,"comment_id":10621943,"body_markdown":"does this really give enough precision??","body":"does this really give enough precision??"},{"owner":{"account_id":130645,"reputation":81705,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"score":3,"creation_date":1324331417,"post_id":8567951,"comment_id":10622023,"body_markdown":"Well I don&#39;t think it&#39;s precision you&#39;re looking for, but accuracy. For example, if you take an image and offset it by 3 pixels down and left, this will show that the images are almost nothing alike. But then you have to ask yourself, should it?","body":"Well I don&#39;t think it&#39;s precision you&#39;re looking for, but accuracy. For example, if you take an image and offset it by 3 pixels down and left, this will show that the images are almost nothing alike. But then you have to ask yourself, should it?"},{"owner":{"account_id":130645,"reputation":81705,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"score":0,"creation_date":1399555185,"post_id":8567951,"comment_id":36119021,"body_markdown":"However well it works (which may or may not be good at all depending on if you do every pixel or groups of pixels or whatever) it will work just as well for black and white images.","body":"However well it works (which may or may not be good at all depending on if you do every pixel or groups of pixels or whatever) it will work just as well for black and white images."}],"tags":[],"owner":{"account_id":130645,"reputation":81705,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"comment_count":3,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1324330998,"creation_date":1324330998,"answer_id":8567951,"question_id":8567905,"body_markdown":"Depending on how different the images are, you could do something like this (pseudocode). It&#39;s very primitive, but should be pretty efficient. You could speed it up by taking random or patterned pixels instead of every one.\r\n\r\n    for x = 0 to image.size:\r\n        for y = 0 to image.size:\r\n            diff += abs(image1.get(x,y).red - image2.get(x,y).red)\r\n            diff += abs(image1.get(x,y).blue - image2.get(x,y).blue)\r\n            diff += abs(image1.get(x,y).green - image2.get(x,y).green)\r\n        end\r\n    end\r\n    \r\n    return ((float)(diff)) / ( x * y * 3)\r\n\r\n","title":"How to compare images for similarity using java","body":"<p>Depending on how different the images are, you could do something like this (pseudocode). It's very primitive, but should be pretty efficient. You could speed it up by taking random or patterned pixels instead of every one.</p>\n\n<pre><code>for x = 0 to image.size:\n    for y = 0 to image.size:\n        diff += abs(image1.get(x,y).red - image2.get(x,y).red)\n        diff += abs(image1.get(x,y).blue - image2.get(x,y).blue)\n        diff += abs(image1.get(x,y).green - image2.get(x,y).green)\n    end\nend\n\nreturn ((float)(diff)) / ( x * y * 3)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1111749,"reputation":1383,"user_id":1102092,"accept_rate":76,"display_name":"sum2000"},"score":3,"creation_date":1340349871,"post_id":11113845,"comment_id":14622028,"body_markdown":"This will compare if the two images are same, i am asking to find the similarity between two images.","body":"This will compare if the two images are same, i am asking to find the similarity between two images."},{"owner":{"account_id":302770,"reputation":4294,"user_id":611315,"accept_rate":12,"display_name":"ChanGan"},"score":0,"creation_date":1358508671,"post_id":11113845,"comment_id":20031504,"body_markdown":"Just wanted to check, if two different images meets same size, what will be returned?","body":"Just wanted to check, if two different images meets same size, what will be returned?"},{"owner":{"account_id":302770,"reputation":4294,"user_id":611315,"accept_rate":12,"display_name":"ChanGan"},"score":0,"creation_date":1358511012,"post_id":11113845,"comment_id":20032650,"body_markdown":"Hi Sandip, How to pass two pass two images in place fileA and fileB... both are the location of files? Can you please give me bit brief.","body":"Hi Sandip, How to pass two pass two images in place fileA and fileB... both are the location of files? Can you please give me bit brief."}],"tags":[],"owner":{"account_id":1583429,"reputation":137,"user_id":1468279,"display_name":"Sandip Ganguli"},"comment_count":3,"down_vote_count":2,"up_vote_count":14,"is_accepted":false,"score":12,"last_activity_date":1340173171,"creation_date":1340173171,"answer_id":11113845,"question_id":8567905,"body_markdown":"        **// This API will compare two image file //\r\n\t// return true if both image files are equal else return false//**\r\n\tpublic static boolean compareImage(File fileA, File fileB) {\t\t\r\n\t\ttry {\r\n\t\t\t// take buffer data from botm image files //\r\n\t\t\tBufferedImage biA = ImageIO.read(fileA);\r\n\t\t\tDataBuffer dbA = biA.getData().getDataBuffer();\r\n\t\t\tint sizeA = dbA.getSize();\t\t\t\t\t\t\r\n\t\t\tBufferedImage biB = ImageIO.read(fileB);\r\n\t\t\tDataBuffer dbB = biB.getData().getDataBuffer();\r\n\t\t\tint sizeB = dbB.getSize();\r\n\t\t\t// compare data-buffer objects //\r\n\t\t\tif(sizeA == sizeB) {\r\n\t\t\t\tfor(int i=0; i&lt;sizeA; i++) { \r\n\t\t\t\t\tif(dbA.getElem(i) != dbB.getElem(i)) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} \r\n\t\tcatch (Exception e) { \r\n\t\t\tSystem.out.println(&quot;Failed to compare image files ...&quot;);\r\n\t\t\treturn  false;\r\n\t\t}\r\n\t}","title":"How to compare images for similarity using java","body":"<pre><code>    **// This API will compare two image file //\n// return true if both image files are equal else return false//**\npublic static boolean compareImage(File fileA, File fileB) {        \n    try {\n        // take buffer data from botm image files //\n        BufferedImage biA = ImageIO.read(fileA);\n        DataBuffer dbA = biA.getData().getDataBuffer();\n        int sizeA = dbA.getSize();                      \n        BufferedImage biB = ImageIO.read(fileB);\n        DataBuffer dbB = biB.getData().getDataBuffer();\n        int sizeB = dbB.getSize();\n        // compare data-buffer objects //\n        if(sizeA == sizeB) {\n            for(int i=0; i&lt;sizeA; i++) { \n                if(dbA.getElem(i) != dbB.getElem(i)) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        else {\n            return false;\n        }\n    } \n    catch (Exception e) { \n        System.out.println(\"Failed to compare image files ...\");\n        return  false;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7453512,"reputation":95,"user_id":5667452,"display_name":"Sireesha K"},"score":0,"creation_date":1449813587,"post_id":34216987,"comment_id":56178381,"body_markdown":"Please find the method name with parameters top of the firstline in code, there we can pass two images with file path (ex:C://Documents//image1.jpg)","body":"Please find the method name with parameters top of the firstline in code, there we can pass two images with file path (ex:C://Documents//image1.jpg)"},{"owner":{"account_id":3063446,"reputation":1329,"user_id":2595659,"accept_rate":50,"display_name":"Brian Risk"},"score":7,"creation_date":1497547074,"post_id":34216987,"comment_id":76135420,"body_markdown":"You should mention this is based on the code from Sandip Ganguli&#39;s answer.","body":"You should mention this is based on the code from Sandip Ganguli&#39;s answer."},{"owner":{"account_id":11922239,"reputation":8884,"user_id":8724443,"display_name":"apurv thakkar"},"score":0,"creation_date":1589524562,"post_id":34216987,"comment_id":109333808,"body_markdown":"BufferedImage is not supported in Android studio.","body":"BufferedImage is not supported in Android studio."}],"tags":[],"owner":{"account_id":7453512,"reputation":95,"user_id":5667452,"display_name":"Sireesha K"},"comment_count":3,"down_vote_count":3,"up_vote_count":9,"is_accepted":false,"score":6,"last_activity_date":1449815477,"creation_date":1449813311,"answer_id":34216987,"question_id":8567905,"body_markdown":"This API will compare two image file and return the percentage of similarity\r\n\r\n    public float compareImage(File fileA, File fileB) {\r\n\r\n        float percentage = 0;\r\n        try {\r\n            // take buffer data from both image files //\r\n            BufferedImage biA = ImageIO.read(fileA);\r\n            DataBuffer dbA = biA.getData().getDataBuffer();\r\n            int sizeA = dbA.getSize();\r\n            BufferedImage biB = ImageIO.read(fileB);\r\n            DataBuffer dbB = biB.getData().getDataBuffer();\r\n            int sizeB = dbB.getSize();\r\n            int count = 0;\r\n            // compare data-buffer objects //\r\n            if (sizeA == sizeB) {\r\n\r\n                for (int i = 0; i &lt; sizeA; i++) {\r\n\r\n                    if (dbA.getElem(i) == dbB.getElem(i)) {\r\n                        count = count + 1;\r\n                    }\r\n\r\n                }\r\n                percentage = (count * 100) / sizeA;\r\n            } else {\r\n                System.out.println(&quot;Both the images are not of same size&quot;);\r\n            }\r\n\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Failed to compare image files ...&quot;);\r\n        }\r\n        return percentage;\r\n    }\r\n    \r\n\t \r\n\t","title":"How to compare images for similarity using java","body":"<p>This API will compare two image file and return the percentage of similarity</p>\n\n<pre><code>public float compareImage(File fileA, File fileB) {\n\n    float percentage = 0;\n    try {\n        // take buffer data from both image files //\n        BufferedImage biA = ImageIO.read(fileA);\n        DataBuffer dbA = biA.getData().getDataBuffer();\n        int sizeA = dbA.getSize();\n        BufferedImage biB = ImageIO.read(fileB);\n        DataBuffer dbB = biB.getData().getDataBuffer();\n        int sizeB = dbB.getSize();\n        int count = 0;\n        // compare data-buffer objects //\n        if (sizeA == sizeB) {\n\n            for (int i = 0; i &lt; sizeA; i++) {\n\n                if (dbA.getElem(i) == dbB.getElem(i)) {\n                    count = count + 1;\n                }\n\n            }\n            percentage = (count * 100) / sizeA;\n        } else {\n            System.out.println(\"Both the images are not of same size\");\n        }\n\n    } catch (Exception e) {\n        System.out.println(\"Failed to compare image files ...\");\n    }\n    return percentage;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13089940,"reputation":133,"user_id":10491111,"display_name":"Carlos No&#233;"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691136952,"creation_date":1691136952,"answer_id":76834139,"question_id":8567905,"body_markdown":"        BufferedImage img1 = ImageIO.read(file);\r\n        BufferedImage img2 = ImageIO.read(file2);\r\n\r\n        // Comprueba si cada pixel es igual\r\n        for (int x = 0; x &lt; img1.getWidth(); x++) {\r\n            for (int y = 0; y &lt; img1.getHeight(); y++) {\r\n                Assert.assertEquals(img1.getRGB(x, y), img2.getRGB(x, y));\r\n            }\r\n        }","title":"How to compare images for similarity using java","body":"<pre><code>    BufferedImage img1 = ImageIO.read(file);\n    BufferedImage img2 = ImageIO.read(file2);\n\n    // Comprueba si cada pixel es igual\n    for (int x = 0; x &lt; img1.getWidth(); x++) {\n        for (int y = 0; y &lt; img1.getHeight(); y++) {\n            Assert.assertEquals(img1.getRGB(x, y), img2.getRGB(x, y));\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":1111749,"reputation":1383,"user_id":1102092,"accept_rate":76,"display_name":"sum2000"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74398,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"answer_count":4,"score":18,"last_activity_date":1691136952,"creation_date":1324330746,"question_id":8567905,"body_markdown":"Recently I got an opportunity to work with Image Processing Technologies as a part of one of my projects and my task was to find matching images from an image store when a new image is given. I started my project with googling &quot;How to compare images using java&quot; and I got some good articles on finding the similarity of two images. Almost all of them were based on four basic steps, they are:\r\n\r\n    1.Locating the Region of Interest (Where the Objects appear in the given image),\r\n    2.Re-sizing the ROIs in to a common size,\r\n    3.Substracting ROIs,\r\n    4.Calculating the Black and White Ratio of the resultant image after subtraction.\r\n\r\nThough this sounds as a good algorithm to compare images, it takes a considerable amount of time after implementing it using **JAI** in my project. Therefore I have to find an alternate method of doing it.\r\n\r\nAny suggestions?","title":"How to compare images for similarity using java","body":"<p>Recently I got an opportunity to work with Image Processing Technologies as a part of one of my projects and my task was to find matching images from an image store when a new image is given. I started my project with googling \"How to compare images using java\" and I got some good articles on finding the similarity of two images. Almost all of them were based on four basic steps, they are:</p>\n\n<pre><code>1.Locating the Region of Interest (Where the Objects appear in the given image),\n2.Re-sizing the ROIs in to a common size,\n3.Substracting ROIs,\n4.Calculating the Black and White Ratio of the resultant image after subtraction.\n</code></pre>\n\n<p>Though this sounds as a good algorithm to compare images, it takes a considerable amount of time after implementing it using <strong>JAI</strong> in my project. Therefore I have to find an alternate method of doing it.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["java","swing","dialog","frame"],"comments":[{"owner":{"account_id":4999170,"reputation":175,"user_id":4018709,"display_name":"Zorian"},"score":0,"creation_date":1427702982,"post_id":29341135,"comment_id":46869529,"body_markdown":"what about using anothe layout? e.g. GridBagLayout etc?","body":"what about using anothe layout? e.g. GridBagLayout etc?"},{"owner":{"account_id":218057,"reputation":67738,"user_id":474189,"accept_rate":72,"display_name":"Duncan Jones"},"score":0,"creation_date":1427703044,"post_id":29341135,"comment_id":46869556,"body_markdown":"Does the dialog have the frame as a parent? Without testing, I would assume modal dialogues would always be on top of their parents..","body":"Does the dialog have the frame as a parent? Without testing, I would assume modal dialogues would always be on top of their parents.."},{"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"score":1,"creation_date":1427703808,"post_id":29341135,"comment_id":46869884,"body_markdown":"for better help sooner post an SSCCE/MCVE, short, runnable, comipable, before anything here to read Oracle tutorial about How to Use Modality in Dialogs as the part in Using Other Swing Features","body":"for better help sooner post an SSCCE/MCVE, short, runnable, comipable, before anything here to read Oracle tutorial about How to Use Modality in Dialogs as the part in Using Other Swing Features"},{"owner":{"account_id":4278261,"reputation":1055,"user_id":3498366,"accept_rate":54,"display_name":"Koin Arab"},"score":0,"creation_date":1427705244,"post_id":29341135,"comment_id":46870614,"body_markdown":"@Zorlan what is connection between layouts and setAlwaysOnTop() method?","body":"@Zorlan what is connection between layouts and setAlwaysOnTop() method?"},{"owner":{"account_id":4278261,"reputation":1055,"user_id":3498366,"accept_rate":54,"display_name":"Koin Arab"},"score":0,"creation_date":1427705379,"post_id":29341135,"comment_id":46870679,"body_markdown":"@Duncan yes, the dialog have the frame as parents like in exaple which i added to my post. I though like you but it doesn&#39;t work.","body":"@Duncan yes, the dialog have the frame as parents like in exaple which i added to my post. I though like you but it doesn&#39;t work."},{"owner":{"account_id":7032278,"reputation":688,"user_id":5387533,"display_name":"F. Lumnitz"},"score":0,"creation_date":1453817176,"post_id":29341135,"comment_id":57758016,"body_markdown":"When I run your code, the Dialog is on top of the MainFrame?!","body":"When I run your code, the Dialog is on top of the MainFrame?!"}],"answers":[{"tags":[],"owner":{"account_id":1677570,"reputation":18354,"user_id":1542723,"display_name":"Ferrybig"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453816211,"creation_date":1453816211,"answer_id":35015356,"question_id":29341135,"body_markdown":"&lt;!-- language-all: java --&gt;\r\n\r\nA quick solution for this problem is settings `setAlwaysOnTop` temporary to false while the dialog is shown, then set it to true when the dialog is closed.\r\n\r\n    setAlwaysOnTop(false);\r\n    JOptionPane.showMessageDialog(this, &quot;I want to set this dialog on top of frame&quot;);\r\n    setAlwaysOnTop(true);","title":"How to show dialog on top of the frame, even if setAlwaysOnTop() is set in Java?","body":"\n\n<p>A quick solution for this problem is settings <code>setAlwaysOnTop</code> temporary to false while the dialog is shown, then set it to true when the dialog is closed.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>setAlwaysOnTop(false);\nJOptionPane.showMessageDialog(this, \"I want to set this dialog on top of frame\");\nsetAlwaysOnTop(true);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28079922,"reputation":1,"user_id":21451173,"display_name":"Joop Moore"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691136486,"creation_date":1691136486,"answer_id":76834081,"question_id":29341135,"body_markdown":"I just had the same problem. It was solved by calling passing frame as owner of the dialog:\r\n\r\n    public SettingsDialog(Window owner) {\r\n    \t\tsuper(owner);\r\n\r\n","title":"How to show dialog on top of the frame, even if setAlwaysOnTop() is set in Java?","body":"<p>I just had the same problem. It was solved by calling passing frame as owner of the dialog:</p>\n<pre><code>public SettingsDialog(Window owner) {\n        super(owner);\n</code></pre>\n"}],"owner":{"account_id":4278261,"reputation":1055,"user_id":3498366,"accept_rate":54,"display_name":"Koin Arab"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":839,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691136486,"creation_date":1427702539,"question_id":29341135,"body_markdown":"If the frame have set setAlwaysOnTop() and some dialog is running the dialog is showing underneath the frame. I want to show it on top of the frame. I other words - the dialog should still be on top of the frame, even if setAlwaysOnTop() is set.\r\n\r\nCan somebody help me with this?\r\n\r\nEDIT:\r\n\r\nIt&#39;s example code:\r\n\r\n    public MainFrame() {\r\n            super(&quot;Potatator&quot;);\r\n    \r\n            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            setVisible(true);\r\n            setAlwaysOnTop(true);\r\n    \r\n            JOptionPane.showMessageDialog(this, &quot;I want to set this dialog on top of frame&quot;);\r\n            repaint();\r\n        }\r\n\r\n","title":"How to show dialog on top of the frame, even if setAlwaysOnTop() is set in Java?","body":"<p>If the frame have set setAlwaysOnTop() and some dialog is running the dialog is showing underneath the frame. I want to show it on top of the frame. I other words - the dialog should still be on top of the frame, even if setAlwaysOnTop() is set.</p>\n\n<p>Can somebody help me with this?</p>\n\n<p>EDIT:</p>\n\n<p>It's example code:</p>\n\n<pre><code>public MainFrame() {\n        super(\"Potatator\");\n\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        setVisible(true);\n        setAlwaysOnTop(true);\n\n        JOptionPane.showMessageDialog(this, \"I want to set this dialog on top of frame\");\n        repaint();\n    }\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691039577,"post_id":76823434,"comment_id":135437362,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":13046056,"reputation":1,"user_id":9427878,"display_name":"Hassan Abbas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691136006,"creation_date":1691009514,"question_id":76823434,"body_markdown":"I am trying to initialize a LoudnessEnhancer class object in Android Studio, but I&#39;m encountering an error with the following code:\r\n\r\n\r\n```\r\nLoudnessEnhancer loudnessEnhancer = new LoudnessEnhancer(0);\r\n```\r\n\r\n&#39;0&#39; represents audioSession.Basically, I wanted to apply LoudnessEnhancer to all sounds played by the system.\r\n\r\n[Picture of error](https://i.stack.imgur.com/wVsi4.png)\r\n\r\nI have also attached a screenshot of the error. Could someone please help me identify the issue?\r\n\r\nThank you!\r\n\r\n","title":"Not able to initialize LoudnessEnhancer object in android studio java","body":"<p>I am trying to initialize a LoudnessEnhancer class object in Android Studio, but I'm encountering an error with the following code:</p>\n<pre><code>LoudnessEnhancer loudnessEnhancer = new LoudnessEnhancer(0);\n</code></pre>\n<p>'0' represents audioSession.Basically, I wanted to apply LoudnessEnhancer to all sounds played by the system.</p>\n<p><a href=\"https://i.stack.imgur.com/wVsi4.png\" rel=\"nofollow noreferrer\">Picture of error</a></p>\n<p>I have also attached a screenshot of the error. Could someone please help me identify the issue?</p>\n<p>Thank you!</p>\n"},{"tags":["java","list","selenium-webdriver","hashmap","linkedhashmap"],"comments":[{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1690920899,"post_id":76814885,"comment_id":135419593,"body_markdown":"How does `TextBox`, `DropDown` and `Description` maps to the WebElement attributes?","body":"How does <code>TextBox</code>, <code>DropDown</code> and <code>Description</code> maps to the WebElement attributes?"},{"owner":{"account_id":17077512,"reputation":39,"user_id":12356786,"display_name":"Pet"},"score":0,"creation_date":1690921292,"post_id":76814885,"comment_id":135419642,"body_markdown":"The Text box value will be send to SendKeys method as string. Similarly Dropdown value will be send to drop down     //div[@id=&#39;div1&#39; and text()=&#39;&quot; + DivValue + &quot;&#39;] DivValue  as String.","body":"The Text box value will be send to SendKeys method as string. Similarly Dropdown value will be send to drop down     //div[@id=&#39;div1&#39; and text()=&#39;&quot; + DivValue + &quot;&#39;] DivValue  as String."},{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1690921374,"post_id":76814885,"comment_id":135419659,"body_markdown":"How about `DropDown` and `Description`","body":"How about <code>DropDown</code> and <code>Description</code>"}],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690928837,"creation_date":1690928837,"answer_id":76815545,"question_id":76814885,"body_markdown":"Incase the data is being returned is a _`List`_ of _`Map&lt;String,String&gt;`_ as follows:\r\n\r\n\t[{TextBox=TextValue-1, DropDown=DD-1, Description=Desc-1}, {TextBox=TextValue-2, DropDown=DD-2, Description=Desc-2}, {TextBox=TextValue-3, DropDown=DD-3, Description=Desc-3}]\r\n\t\r\nTo read the _`keys`_ and _`values`_ you can use the following solution:\r\n\r\n\t// System.out.println(list);\r\n\t// [{TextBox=TextValue-1, DropDown=DD-1, Description=Desc-1}, {TextBox=TextValue-2, DropDown=DD-2, Description=Desc-2}, {TextBox=TextValue-3, DropDown=DD-3, Description=Desc-3}]\r\n\tfor (Map&lt;String, String&gt; map : list) {\r\n\t    for (Map.Entry&lt;String, String&gt; entry : map.entrySet()) {\r\n\t\t    String key = entry.getKey();\r\n\t\t    System.out.println(key);\r\n\t\t    Object value = entry.getValue();\r\n\t\t    System.out.println(value);\r\n\t    }\r\n\t}\r\n\t\r\nOutput:\r\n\r\n\tTextBox\r\n\tTextValue-1\r\n\tDropDown\r\n\tDD-1\r\n\tDescription\r\n\tDesc-1\r\n\tTextBox\r\n\tTextValue-2\r\n\tDropDown\r\n\tDD-2\r\n\tDescription\r\n\tDesc-2\r\n\tTextBox\r\n\tTextValue-3\r\n\tDropDown\r\n\tDD-3\r\n\tDescription\r\n\tDesc-3","title":"How to read list of maps","body":"<p>Incase the data is being returned is a <em><code>List</code></em> of <em><code>Map&lt;String,String&gt;</code></em> as follows:</p>\n<pre><code>[{TextBox=TextValue-1, DropDown=DD-1, Description=Desc-1}, {TextBox=TextValue-2, DropDown=DD-2, Description=Desc-2}, {TextBox=TextValue-3, DropDown=DD-3, Description=Desc-3}]\n</code></pre>\n<p>To read the <em><code>keys</code></em> and <em><code>values</code></em> you can use the following solution:</p>\n<pre><code>// System.out.println(list);\n// [{TextBox=TextValue-1, DropDown=DD-1, Description=Desc-1}, {TextBox=TextValue-2, DropDown=DD-2, Description=Desc-2}, {TextBox=TextValue-3, DropDown=DD-3, Description=Desc-3}]\nfor (Map&lt;String, String&gt; map : list) {\n    for (Map.Entry&lt;String, String&gt; entry : map.entrySet()) {\n        String key = entry.getKey();\n        System.out.println(key);\n        Object value = entry.getValue();\n        System.out.println(value);\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>TextBox\nTextValue-1\nDropDown\nDD-1\nDescription\nDesc-1\nTextBox\nTextValue-2\nDropDown\nDD-2\nDescription\nDesc-2\nTextBox\nTextValue-3\nDropDown\nDD-3\nDescription\nDesc-3\n</code></pre>\n"}],"owner":{"account_id":17077512,"reputation":39,"user_id":12356786,"display_name":"Pet"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1690974951,"accepted_answer_id":76815545,"answer_count":1,"score":0,"last_activity_date":1691135232,"creation_date":1690920672,"question_id":76814885,"body_markdown":"I have a TestNG scenario method as\r\n \r\n    @Then(&quot;User Enters Data&quot;)\r\n\tpublic void feedData(IDataReader dataTable) {\r\n\t\tList&lt;Map&lt;String,String&gt;&gt; data= dataTable.getAllRows();\r\n     }\r\n\r\nData is being returned as a list of map as follows:\r\n\r\n    [{TextBox=TextValue-1,DropDown=DD-1, Description=Desc-1},\r\n    {TextBox=TextValue-2,DropDown=DD-2, Description=Desc-2},\r\n    {TextBox=TextValue-3,DropDown=DD-3, Description=Desc-3}]\r\n\r\nSelenium script required to feed the above data in the UI. How to read this hence values can be feed to UI in a sequential order. Like\r\n\r\n    TextBox=TextValue-1,DropDown=DD-1, Description=Desc-1\r\n\r\nThen click on save button.","title":"How to read list of maps","body":"<p>I have a TestNG scenario method as</p>\n<pre><code>@Then(&quot;User Enters Data&quot;)\npublic void feedData(IDataReader dataTable) {\n    List&lt;Map&lt;String,String&gt;&gt; data= dataTable.getAllRows();\n }\n</code></pre>\n<p>Data is being returned as a list of map as follows:</p>\n<pre><code>[{TextBox=TextValue-1,DropDown=DD-1, Description=Desc-1},\n{TextBox=TextValue-2,DropDown=DD-2, Description=Desc-2},\n{TextBox=TextValue-3,DropDown=DD-3, Description=Desc-3}]\n</code></pre>\n<p>Selenium script required to feed the above data in the UI. How to read this hence values can be feed to UI in a sequential order. Like</p>\n<pre><code>TextBox=TextValue-1,DropDown=DD-1, Description=Desc-1\n</code></pre>\n<p>Then click on save button.</p>\n"},{"tags":["java","nan"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1691134914,"post_id":76833868,"comment_id":135453467,"body_markdown":"[Did you see the duplicate target of your previous question?](https://stackoverflow.com/q/76833321/5133585)","body":"<a href=\"https://stackoverflow.com/q/76833321/5133585\">Did you see the duplicate target of your previous question?</a>"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1691135016,"post_id":76833868,"comment_id":135453494,"body_markdown":"@ScaryWombat What exception? OP doesn&#39;t mention one.","body":"@ScaryWombat What exception? OP doesn&#39;t mention one."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1691135052,"post_id":76833868,"comment_id":135453499,"body_markdown":"@Sweeper Good call, I hadn&#39;t even seen that before duping this one","body":"@Sweeper Good call, I hadn&#39;t even seen that before duping this one"}],"answers":[{"comments":[{"owner":{"account_id":29157406,"reputation":1,"user_id":22336872,"display_name":"Desmond Tay"},"score":0,"creation_date":1691135261,"post_id":76833895,"comment_id":135453550,"body_markdown":"Problem solved thank you for help.","body":"Problem solved thank you for help."}],"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691134888,"creation_date":1691134888,"answer_id":76833895,"question_id":76833868,"body_markdown":"Just check for `NaN` before printing:\r\n\r\n```\r\nelse if (Double.isNaN(rumus) || Double.isNaN(h)) {\r\n  System.out.println(&quot;THE EQUATION DOES NOT HAVE ROOTS&quot;);\r\n}\r\n```\r\n","title":"(JAVA language) How to make the output not NaN but the output I want, when the calculation has no answer?","body":"<p>Just check for <code>NaN</code> before printing:</p>\n<pre><code>else if (Double.isNaN(rumus) || Double.isNaN(h)) {\n  System.out.println(&quot;THE EQUATION DOES NOT HAVE ROOTS&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":29157406,"reputation":1,"user_id":22336872,"display_name":"Desmond Tay"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1691134909,"answer_count":1,"score":-2,"last_activity_date":1691134888,"creation_date":1691134656,"question_id":76833868,"body_markdown":"When I input the value of a, b, and c as 1, the output is &quot;BY USING FORMULA, YOUR ANSWER IS: NaN AND NaN&quot;. In this case, I want my output to be &quot;THE EQUATION DOES NOT HAVE ROOTS&quot;. what should I do?\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class Rumus\r\n    {\r\n    public static void main(String[]args)\r\n    {\r\n      Scanner input=new Scanner(System.in);\r\n      System.out.println(&quot;PLEASE ENTER THE VALUE OF A&quot;);\r\n      int a =input.nextInt();\r\n  \r\n      System.out.println(&quot;PLEASE ENTER THE VALUE OF B&quot;);\r\n      int b=input.nextInt();\r\n  \r\n      System.out.println(&quot;PLEASE ENTER THE VALUE OF C&quot;);\r\n      int c=input.nextInt();\r\n\r\n      System.out.println(&quot;YOUR QUADRATIC EQUATION IS : &quot;+ a +&quot;xx+&quot; +&quot;(&quot;+b+&quot;)&quot;+&quot;x+&quot; + &quot;(&quot;+c+ &quot;)&quot;+ &quot;=0&quot;);\r\n  \r\n      double d=(b*b)-(4*a*c);\r\n      double e=(Math.sqrt(d));\r\n      double f=-(b)+e;\r\n      double rumus=f/(2*a);\r\n      double g=-(b)-e;\r\n      double h=g/(2*a);\r\n\r\n      if((a == 0)||(d &gt;= 0))\r\n      {\r\n        System.out.println(&quot;THE EQUATION DOES NOT HAVE ROOTS&quot;);\r\n      }\r\n      else\r\n      {\r\n        System.out.println(&quot;BY USING FORMULA, YOUR ANSWER IS :&quot;+ rumus+&quot; AND &quot;+ h);\r\n      }\r\n        }\r\n    }","title":"(JAVA language) How to make the output not NaN but the output I want, when the calculation has no answer?","body":"<p>When I input the value of a, b, and c as 1, the output is &quot;BY USING FORMULA, YOUR ANSWER IS: NaN AND NaN&quot;. In this case, I want my output to be &quot;THE EQUATION DOES NOT HAVE ROOTS&quot;. what should I do?</p>\n<pre><code>import java.util.Scanner;\n\npublic class Rumus\n{\npublic static void main(String[]args)\n{\n  Scanner input=new Scanner(System.in);\n  System.out.println(&quot;PLEASE ENTER THE VALUE OF A&quot;);\n  int a =input.nextInt();\n\n  System.out.println(&quot;PLEASE ENTER THE VALUE OF B&quot;);\n  int b=input.nextInt();\n\n  System.out.println(&quot;PLEASE ENTER THE VALUE OF C&quot;);\n  int c=input.nextInt();\n\n  System.out.println(&quot;YOUR QUADRATIC EQUATION IS : &quot;+ a +&quot;xx+&quot; +&quot;(&quot;+b+&quot;)&quot;+&quot;x+&quot; + &quot;(&quot;+c+ &quot;)&quot;+ &quot;=0&quot;);\n\n  double d=(b*b)-(4*a*c);\n  double e=(Math.sqrt(d));\n  double f=-(b)+e;\n  double rumus=f/(2*a);\n  double g=-(b)-e;\n  double h=g/(2*a);\n\n  if((a == 0)||(d &gt;= 0))\n  {\n    System.out.println(&quot;THE EQUATION DOES NOT HAVE ROOTS&quot;);\n  }\n  else\n  {\n    System.out.println(&quot;BY USING FORMULA, YOUR ANSWER IS :&quot;+ rumus+&quot; AND &quot;+ h);\n  }\n    }\n}\n</code></pre>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":5860066,"reputation":13485,"user_id":4616087,"display_name":"Marvin"},"score":1,"creation_date":1691134358,"post_id":76833817,"comment_id":135453336,"body_markdown":"All you can do (and what common JSON libraries would most likely do by default) is read it into a `Map&lt;String, Object&gt;` (where the value could be another nested map). Not sure how much processing you can do on that but at least you can read the map keys to identify the names.","body":"All you can do (and what common JSON libraries would most likely do by default) is read it into a <code>Map&lt;String, Object&gt;</code> (where the value could be another nested map). Not sure how much processing you can do on that but at least you can read the map keys to identify the names."}],"answers":[{"comments":[{"owner":{"account_id":29144778,"reputation":11,"user_id":22326958,"display_name":"opsy"},"score":0,"creation_date":1691134865,"post_id":76833869,"comment_id":135453455,"body_markdown":"in this link the key values are known and there is just 5 of them. in my json files the key values is more than 1000+ is there easier way to get all key values?","body":"in this link the key values are known and there is just 5 of them. in my json files the key values is more than 1000+ is there easier way to get all key values?"},{"owner":{"account_id":2067336,"reputation":2848,"user_id":1842599,"display_name":"Andrej Istomin"},"score":0,"creation_date":1691136089,"post_id":76833869,"comment_id":135453724,"body_markdown":"@opsy you parse JSON into MAP, then you can get all the keys from the map using Map.keySet() method: https://www.geeksforgeeks.org/hashmap-keyset-method-in-java/","body":"@opsy you parse JSON into MAP, then you can get all the keys from the map using Map.keySet() method: <a href=\"https://www.geeksforgeeks.org/hashmap-keyset-method-in-java/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/hashmap-keyset-method-in-java</a>"}],"tags":[],"owner":{"account_id":2067336,"reputation":2848,"user_id":1842599,"display_name":"Andrej Istomin"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691134677,"creation_date":1691134677,"answer_id":76833869,"question_id":76833817,"body_markdown":"As was suggested in the comments, you can convert JSON into Map. Here is the example how to do that: https://www.javatpoint.com/convert-json-to-map-in-java\r\nAfter that you may work with your map like that:\r\n```\r\nSystem.out.println(&quot;Name : &quot; + userData.get(&quot;Name&quot;));  \r\nSystem.out.println(&quot;Mobile : &quot; + userData.get(&quot;Mobile&quot;));  \r\nSystem.out.println(&quot;Designation : &quot; + userData.get(&quot;Designation&quot;));  \r\nSystem.out.println(&quot;Pet : &quot; + userData.get(&quot;Pet&quot;));  \r\nSystem.out.println(&quot;Address : &quot; + userData.get(&quot;Address&quot;));   \r\n```","title":"How to parse JSON in JAVA without knowing the contents of the JSON file","body":"<p>As was suggested in the comments, you can convert JSON into Map. Here is the example how to do that: <a href=\"https://www.javatpoint.com/convert-json-to-map-in-java\" rel=\"nofollow noreferrer\">https://www.javatpoint.com/convert-json-to-map-in-java</a>\nAfter that you may work with your map like that:</p>\n<pre><code>System.out.println(&quot;Name : &quot; + userData.get(&quot;Name&quot;));  \nSystem.out.println(&quot;Mobile : &quot; + userData.get(&quot;Mobile&quot;));  \nSystem.out.println(&quot;Designation : &quot; + userData.get(&quot;Designation&quot;));  \nSystem.out.println(&quot;Pet : &quot; + userData.get(&quot;Pet&quot;));  \nSystem.out.println(&quot;Address : &quot; + userData.get(&quot;Address&quot;));   \n</code></pre>\n"}],"owner":{"account_id":29144778,"reputation":11,"user_id":22326958,"display_name":"opsy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691134677,"creation_date":1691134224,"question_id":76833817,"body_markdown":"I&#39;m trying to do a program that gets the file info from the path and parse it without knowing the information inside it. \r\n\r\n\r\n \r\n\r\nI know there is a `jo.get(&quot;name&quot;);`way for example but if i dont know the &quot;name&quot; variable how should i split the file? Our file will contain hundreds of variables like &quot;name&quot; &quot;address&quot; &quot;city&quot; etc.","title":"How to parse JSON in JAVA without knowing the contents of the JSON file","body":"<p>I'm trying to do a program that gets the file info from the path and parse it without knowing the information inside it.</p>\n<p>I know there is a <code>jo.get(&quot;name&quot;);</code>way for example but if i dont know the &quot;name&quot; variable how should i split the file? Our file will contain hundreds of variables like &quot;name&quot; &quot;address&quot; &quot;city&quot; etc.</p>\n"},{"tags":["java","maven","selenium-webdriver","cucumber","test-runner"],"comments":[{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":0,"creation_date":1691043864,"post_id":76825340,"comment_id":135437964,"body_markdown":"Could you try to put the variables BEFORE the &quot;test&quot; in your command line ?","body":"Could you try to put the variables BEFORE the &quot;test&quot; in your command line ?"},{"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"score":0,"creation_date":1691044120,"post_id":76825340,"comment_id":135438009,"body_markdown":"Setting properties in test runner won&#39;t work. Show us the feature file and step definition.","body":"Setting properties in test runner won&#39;t work. Show us the feature file and step definition."},{"owner":{"account_id":12698884,"reputation":35,"user_id":9226386,"display_name":"Ashutosh Das"},"score":0,"creation_date":1691125788,"post_id":76825340,"comment_id":135452200,"body_markdown":"Hi @NandanA, I have updated my question. Please check. Thanks!","body":"Hi @NandanA, I have updated my question. Please check. Thanks!"}],"answers":[{"comments":[{"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"score":0,"creation_date":1695201026,"post_id":76833866,"comment_id":135991151,"body_markdown":"@AshutoshDas if I answered your question correctly. Please accept the answer.","body":"@AshutoshDas if I answered your question correctly. Please accept the answer."}],"tags":[],"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691134632,"creation_date":1691134632,"answer_id":76833866,"question_id":76825340,"body_markdown":"In scenario, you parameterized &quot;Enviromnent&quot;\r\n\r\n    Given User launch &quot;&lt;Environment&gt;&quot; preflight\r\n\r\nbut you are assigning environment value to null(Env is null). \r\n\r\n     Env = System.getProperty(&quot;Environment&quot;);\r\n\r\nUpdate in below way,\r\n\r\n**Scenario**\r\n\r\n    Given User launch Environment preflight\r\n\r\n**Code**\r\n\r\n       public void launchPreflight() {\r\n        System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;/chromedriver/chromedriver&quot;);\r\n        driver = new ChromeDriver();\r\n        String env = System.getProperty(&quot;Environment&quot;);\r\n        if(env.toLowerCase().contains(&quot;prod&quot;)) {\r\n        driver.get(Prod_URL);\r\n        }","title":"Setting system properties from command line but not able to access it in my step definition file","body":"<p>In scenario, you parameterized &quot;Enviromnent&quot;</p>\n<pre><code>Given User launch &quot;&lt;Environment&gt;&quot; preflight\n</code></pre>\n<p>but you are assigning environment value to null(Env is null).</p>\n<pre><code> Env = System.getProperty(&quot;Environment&quot;);\n</code></pre>\n<p>Update in below way,</p>\n<p><strong>Scenario</strong></p>\n<pre><code>Given User launch Environment preflight\n</code></pre>\n<p><strong>Code</strong></p>\n<pre><code>   public void launchPreflight() {\n    System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;/chromedriver/chromedriver&quot;);\n    driver = new ChromeDriver();\n    String env = System.getProperty(&quot;Environment&quot;);\n    if(env.toLowerCase().contains(&quot;prod&quot;)) {\n    driver.get(Prod_URL);\n    }\n</code></pre>\n"}],"owner":{"account_id":12698884,"reputation":35,"user_id":9226386,"display_name":"Ashutosh Das"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691134632,"creation_date":1691043407,"question_id":76825340,"body_markdown":"Command:\r\n\r\n&gt; mvn test -Dcucumber.options=&quot;--name &#39;Approve Rejected Creative&#39;&quot;\r\n&gt; -DEnvironment=&quot;Prod&quot;\r\n\r\nFeature file :\r\n\r\n    Given User launch &quot;&lt;Environment&gt;&quot; preflight\r\n    \t\t  When User enters Email as &quot;zzzz&quot; and Password as &quot;zzzz&quot;\r\n    \t\t  Then Click on Login\r\n    \t\t  When User approves &lt;creativeNumber&gt; creative starting from row &lt;startRow&gt;\r\n    \t\t  Then the creative should be approved\r\n\r\nStep Def:\r\n\r\n    public void launchPreflight(String Env) {\r\n            // Set up WebDriver and launch the preflight URL\r\n            System.setProperty(&quot;webdriver.chrome.driver&quot;, \r\n            \t\t&quot;/chromedriver/chromedriver&quot;);\r\n            driver = new ChromeDriver();\r\n            Env = System.getProperty(&quot;Environment&quot;);\r\n            if(Env.contains(&quot;Prod&quot;) || Env.contains(&quot;prod&quot;) || Env.contains(&quot;PROD&quot;)) {\r\n            driver.get(Prod_URL);\r\n            }\r\n\r\nGetting below error : \r\nErrors: \r\n[ERROR]   Cannot invoke &quot;String.contains(java.lang.CharSequence)&quot; because &quot;Env&quot; is null\r\n\r\nI tried setting properties in the testrunner file but still the same. Am I missing something here, I am new to this code.","title":"Setting system properties from command line but not able to access it in my step definition file","body":"<p>Command:</p>\n<blockquote>\n<p>mvn test -Dcucumber.options=&quot;--name 'Approve Rejected Creative'&quot;\n-DEnvironment=&quot;Prod&quot;</p>\n</blockquote>\n<p>Feature file :</p>\n<pre><code>Given User launch &quot;&lt;Environment&gt;&quot; preflight\n          When User enters Email as &quot;zzzz&quot; and Password as &quot;zzzz&quot;\n          Then Click on Login\n          When User approves &lt;creativeNumber&gt; creative starting from row &lt;startRow&gt;\n          Then the creative should be approved\n</code></pre>\n<p>Step Def:</p>\n<pre><code>public void launchPreflight(String Env) {\n        // Set up WebDriver and launch the preflight URL\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, \n                &quot;/chromedriver/chromedriver&quot;);\n        driver = new ChromeDriver();\n        Env = System.getProperty(&quot;Environment&quot;);\n        if(Env.contains(&quot;Prod&quot;) || Env.contains(&quot;prod&quot;) || Env.contains(&quot;PROD&quot;)) {\n        driver.get(Prod_URL);\n        }\n</code></pre>\n<p>Getting below error :\nErrors:\n[ERROR]   Cannot invoke &quot;String.contains(java.lang.CharSequence)&quot; because &quot;Env&quot; is null</p>\n<p>I tried setting properties in the testrunner file but still the same. Am I missing something here, I am new to this code.</p>\n"},{"tags":["java","xml","spring","maven","xml-parsing"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1691126019,"post_id":76833060,"comment_id":135452219,"body_markdown":"Do not use the old outdated xml configuration for spring. Use the more modern java configuration","body":"Do not use the old outdated xml configuration for spring. Use the more modern java configuration"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1691126076,"post_id":76833060,"comment_id":135452228,"body_markdown":"Have you tries to use `&amp;amp;` for the password? this shud be substituted to `&amp;` by the xml parser","body":"Have you tries to use <code>&amp;amp;</code> for the password? this shud be substituted to <code>&amp;</code> by the xml parser"},{"owner":{"account_id":2799515,"reputation":815,"user_id":6647878,"display_name":"Nidhi257"},"score":0,"creation_date":1691126229,"post_id":76833060,"comment_id":135452249,"body_markdown":"password is stored in variable DB_PASS which is being fetched from other source","body":"password is stored in variable DB_PASS which is being fetched from other source"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691130162,"post_id":76833060,"comment_id":135452691,"body_markdown":"In a nutshell, you are saying , for the bean to be able to load the property value , it reads an XML document, the easiest would be to use &amp;amp in the XML doc value and filter the property (replace) of any XML character entities in get or set !","body":"In a nutshell, you are saying , for the bean to be able to load the property value , it reads an XML document, the easiest would be to use &amp;amp in the XML doc value and filter the property (replace) of any XML character entities in get or set !"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691130918,"post_id":76833060,"comment_id":135452812,"body_markdown":"Writing a bean helper method to convert XML element values with XML entities (for illegal XML characters) back to natural string form inside set or get is more sensible than writing an XSLT for each element to retrieve by mapping  and flagging to convert the entities in the value to a property of a bean.","body":"Writing a bean helper method to convert XML element values with XML entities (for illegal XML characters) back to natural string form inside set or get is more sensible than writing an XSLT for each element to retrieve by mapping  and flagging to convert the entities in the value to a property of a bean."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691131430,"post_id":76833060,"comment_id":135452880,"body_markdown":"XML entities are case sensitive,  checking with if() using stringval.indexOf() would make a helper method easy to use with stringval.replaceAll()","body":"XML entities are case sensitive,  checking with if() using stringval.indexOf() would make a helper method easy to use with stringval.replaceAll()"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1691131898,"post_id":76833060,"comment_id":135452937,"body_markdown":"Spring replaces the value while reading so the XML parser shouldn&#39;t see the `&amp;` at all. So unless you are using processing to replace the values the `${}` shoul sbe handled by Spring and you shouldn&#39;t have any issue.","body":"Spring replaces the value while reading so the XML parser shouldn&#39;t see the <code>&amp;</code> at all. So unless you are using processing to replace the values the <code>${}</code> shoul sbe handled by Spring and you shouldn&#39;t have any issue."}],"answers":[{"tags":[],"owner":{"account_id":2799515,"reputation":815,"user_id":6647878,"display_name":"Nidhi257"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691134617,"creation_date":1691134617,"answer_id":76833864,"question_id":76833060,"body_markdown":"this works for me:\r\n\r\n    &lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&gt;\r\n            &lt;property name=&quot;driverClassName&quot; value=&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;/&gt;\r\n            &lt;property name=&quot;url&quot; value=&quot;${DB_URL}&quot;/&gt;\r\n            &lt;property name=&quot;username&quot; value=&quot;${DB_USER}&quot;/&gt;\r\n            &lt;property name=&quot;password&quot;&gt;\r\n            &lt;value&gt;&lt;![CDATA[${DB_PASS}]]&gt;&lt;/value&gt;\r\n        &lt;/property&gt;\r\n        &lt;/bean&gt;","title":"org.xml.sax.SAXParseException in springmodule.xml file due to &#39;&amp;&#39; in DB password","body":"<p>this works for me:</p>\n<pre><code>&lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&gt;\n        &lt;property name=&quot;driverClassName&quot; value=&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;/&gt;\n        &lt;property name=&quot;url&quot; value=&quot;${DB_URL}&quot;/&gt;\n        &lt;property name=&quot;username&quot; value=&quot;${DB_USER}&quot;/&gt;\n        &lt;property name=&quot;password&quot;&gt;\n        &lt;value&gt;&lt;![CDATA[${DB_PASS}]]&gt;&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n"}],"owner":{"account_id":2799515,"reputation":815,"user_id":6647878,"display_name":"Nidhi257"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76833864,"answer_count":1,"score":0,"last_activity_date":1691134617,"creation_date":1691125452,"question_id":76833060,"body_markdown":"I am getting below error in springmodule.xml file\r\n\r\n**Line 128 in XML document from class path resource [springmodule.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 128; columnNumber: 50; The entity name must immediately follow the &#39;&amp;&#39; in the entity reference.**\r\n\r\nthis is because my DB password contain &#39;&amp;&#39; sign.\r\nI got this same error in pom.xml file so replace &#39;&amp;&#39; with &#39;`&amp;amp;` but in xml file how to replace the same. \r\n\r\ncan we use any string function here to replace &#39;&amp;&#39; with `&amp;amp;`?\r\n \r\n\r\n    &lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&gt;\r\n            &lt;property name=&quot;driverClassName&quot; value=&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;/&gt;\r\n            &lt;property name=&quot;url&quot; value=&quot;${DB_URL}&quot;/&gt;\r\n            &lt;property name=&quot;username&quot; value=&quot;${DB_USER}&quot;/&gt;\r\n            &lt;property name=&quot;password&quot; value=&quot;${DB_PASS}&quot;/&gt;\r\n        &lt;/bean&gt;","title":"org.xml.sax.SAXParseException in springmodule.xml file due to &#39;&amp;&#39; in DB password","body":"<p>I am getting below error in springmodule.xml file</p>\n<p><strong>Line 128 in XML document from class path resource [springmodule.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 128; columnNumber: 50; The entity name must immediately follow the '&amp;' in the entity reference.</strong></p>\n<p>this is because my DB password contain '&amp;' sign.\nI got this same error in pom.xml file so replace '&amp;' with '<code>&amp;amp;</code> but in xml file how to replace the same.</p>\n<p>can we use any string function here to replace '&amp;' with <code>&amp;amp;</code>?</p>\n<pre><code>&lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&gt;\n        &lt;property name=&quot;driverClassName&quot; value=&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;/&gt;\n        &lt;property name=&quot;url&quot; value=&quot;${DB_URL}&quot;/&gt;\n        &lt;property name=&quot;username&quot; value=&quot;${DB_USER}&quot;/&gt;\n        &lt;property name=&quot;password&quot; value=&quot;${DB_PASS}&quot;/&gt;\n    &lt;/bean&gt;\n</code></pre>\n"},{"tags":["java","maven","jenkins","pom.xml","nexus"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1625698288,"post_id":68293270,"comment_id":120699277,"body_markdown":"Have a look at the assembly plugin: http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html","body":"Have a look at the assembly plugin: <a href=\"http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-assembly-plugin/assembly.html</a>"},{"owner":{"account_id":4824120,"reputation":748,"user_id":3893990,"display_name":"Han"},"score":0,"creation_date":1625710740,"post_id":68293270,"comment_id":120701220,"body_markdown":"And since you are on war. Look into this https://maven.apache.org/plugins/maven-war-plugin/usage.html. Compare if the directory structure created is correct. Maybe it&#39;s src/main/ directory issue.","body":"And since you are on war. Look into this <a href=\"https://maven.apache.org/plugins/maven-war-plugin/usage.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-war-plugin/usage.html</a>. Compare if the directory structure created is correct. Maybe it&#39;s src/main/ directory issue."},{"owner":{"account_id":5284837,"reputation":40522,"user_id":9401096,"display_name":"Zeitounator"},"score":0,"creation_date":1625771249,"post_id":68293270,"comment_id":120723327,"body_markdown":"Deploying ansible playbooks, roles and inventories using maven to package a war file ?!?!? You are using a saw to drive a screw. Why don&#39;t you get those files out of git directly using a tags for your version ? If you use gitlab or github, you can also publish releases based on those tags. Roles can be deployed from their own git repo if needed using a `requirements.yml` file and downloaded through the `ansible-galaxy` tool.","body":"Deploying ansible playbooks, roles and inventories using maven to package a war file ?!?!? You are using a saw to drive a screw. Why don&#39;t you get those files out of git directly using a tags for your version ? If you use gitlab or github, you can also publish releases based on those tags. Roles can be deployed from their own git repo if needed using a <code>requirements.yml</code> file and downloaded through the <code>ansible-galaxy</code> tool."}],"answers":[{"tags":[],"owner":{"account_id":7539560,"reputation":1749,"user_id":5724677,"accept_rate":64,"display_name":"granier"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691134424,"creation_date":1691077774,"answer_id":76829732,"question_id":68293270,"body_markdown":"Ansible files are not java files so you should use a packaging for java applications. You can use a jar file to store files, but this is not done for this purpose. I agree, a jar file can contain javadoc files ou java sources but this is still &quot;java world&quot;.\r\n\r\n\r\n\r\nFrom my point of view, the best is to create a &quot;zip&quot; file using the assembly publin [see][1].\r\n\r\n\r\n\r\nThe other question is: where to store ansible scripts in a maven project?\r\n\r\nLooking to [the maven Standard Directory Layout][2] one solution is to store them in src/main/resources for the applications and in src/test/resources for tests.\r\n\r\n\r\n  [1]: https://maven.apache.org/plugins/maven-assembly-plugin/\r\n  [2]: https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html","title":"How to package a repository using maven. No java source files included","body":"<p>Ansible files are not java files so you should use a packaging for java applications. You can use a jar file to store files, but this is not done for this purpose. I agree, a jar file can contain javadoc files ou java sources but this is still &quot;java world&quot;.</p>\n<p>From my point of view, the best is to create a &quot;zip&quot; file using the assembly publin <a href=\"https://maven.apache.org/plugins/maven-assembly-plugin/\" rel=\"nofollow noreferrer\">see</a>.</p>\n<p>The other question is: where to store ansible scripts in a maven project?</p>\n<p>Looking to <a href=\"https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html\" rel=\"nofollow noreferrer\">the maven Standard Directory Layout</a> one solution is to store them in src/main/resources for the applications and in src/test/resources for tests.</p>\n"}],"owner":{"account_id":20993515,"reputation":341,"user_id":15425910,"display_name":"AbhiOps"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691134424,"creation_date":1625694157,"question_id":68293270,"body_markdown":"I&#39;m new to maven. I have a repository contains Ansible playbooks and its config and inventory files. All I want to do is, using Jenkinsfile, SCM Checkout and upload the ansible artifacts to nexus with version increment. \r\nI was able package a war file and upload to nexus. But, when I unzip the war file it contains only below files.  \r\n---------  ---------- -----   ----\r\n       98  07-07-2021 16:53   META-INF/MANIFEST.MF\r\n        0  07-07-2021 16:53   META-INF/\r\n      802  07-07-2021 16:53   META-INF/maven/devansible/AB-ANSIBLE/pom.xml\r\n       86  07-07-2021 16:53   META-INF/maven/devansible/AB-ANSIBLE/pom.properties\r\n\r\n\r\nNow I know Its not working, How can I just package a repository/folder to rar, war or tar anything using maven. \r\npom.xml looks like below. \r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;devansible&lt;/groupId&gt;\r\n  &lt;artifactId&gt;AB-ANSIBLE&lt;/artifactId&gt;\r\n  &lt;version&gt;1.2.0&lt;/version&gt;\r\n  &lt;packaging&gt;war&lt;/packaging&gt;\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;!-- Use this to include a selection of jars that will be included in the WAR --&gt;\r\n          &lt;packagingIncludes&gt;${basedir}/*&lt;/packagingIncludes&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n","title":"How to package a repository using maven. No java source files included","body":"<p>I'm new to maven. I have a repository contains Ansible playbooks and its config and inventory files. All I want to do is, using Jenkinsfile, SCM Checkout and upload the ansible artifacts to nexus with version increment.\nI was able package a war file and upload to nexus. But, when I unzip the war file it contains only below files.</p>\n<hr />\n<pre><code>   98  07-07-2021 16:53   META-INF/MANIFEST.MF\n    0  07-07-2021 16:53   META-INF/\n  802  07-07-2021 16:53   META-INF/maven/devansible/AB-ANSIBLE/pom.xml\n   86  07-07-2021 16:53   META-INF/maven/devansible/AB-ANSIBLE/pom.properties\n</code></pre>\n<p>Now I know Its not working, How can I just package a repository/folder to rar, war or tar anything using maven.\npom.xml looks like below.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;devansible&lt;/groupId&gt;\n  &lt;artifactId&gt;AB-ANSIBLE&lt;/artifactId&gt;\n  &lt;version&gt;1.2.0&lt;/version&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;!-- Use this to include a selection of jars that will be included in the WAR --&gt;\n          &lt;packagingIncludes&gt;${basedir}/*&lt;/packagingIncludes&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","sql","oracle","jdbc","ora-00918"],"answers":[{"comments":[{"owner":{"account_id":183016,"reputation":205,"user_id":418132,"accept_rate":50,"display_name":"daydream"},"score":0,"creation_date":1285206421,"post_id":3774871,"comment_id":3996503,"body_markdown":"I have tried and it shows &quot;ORA-00918: column ambiguously defined&quot;","body":"I have tried and it shows &quot;ORA-00918: column ambiguously defined&quot;"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1285206610,"post_id":3774871,"comment_id":3996515,"body_markdown":"Can you run that query successfully in SQL*Plus, leaving Java out of the equation?  Could be a problem with the query itself.","body":"Can you run that query successfully in SQL*Plus, leaving Java out of the equation?  Could be a problem with the query itself."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1285580930,"post_id":3774871,"comment_id":4031907,"body_markdown":"Personally, I think the answer from OMGPonies is better than mine.  I don&#39;t know if the SQL actually works, but there&#39;s far more details.","body":"Personally, I think the answer from OMGPonies is better than mine.  I don&#39;t know if the SQL actually works, but there&#39;s far more details."}],"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1285206340,"creation_date":1285206340,"answer_id":3774871,"question_id":3774850,"body_markdown":"I see no reason why you should be building this query up and gc-ing it away over and over.  I&#39;d make it a static final String once and be done with it.\r\n\r\nIf you need it twice, why can&#39;t you do this?\r\n\r\n    ps.setString(1, applicationNumber);\r\n    ps.setString(2, applicationNumber);","title":" PreparedStatement error ","body":"<p>I see no reason why you should be building this query up and gc-ing it away over and over.  I'd make it a static final String once and be done with it.</p>\n\n<p>If you need it twice, why can't you do this?</p>\n\n<pre><code>ps.setString(1, applicationNumber);\nps.setString(2, applicationNumber);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":45798,"reputation":327472,"user_id":135152,"accept_rate":100,"display_name":"OMG Ponies"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1285208527,"creation_date":1285208527,"answer_id":3775002,"question_id":3774850,"body_markdown":"I re-wrote your query as:\r\n\r\n    SELECT TO_CHAR(SYSDATE,&#39;DD MONTH,YYYY&#39;),\r\n           a.appl_no,\r\n           a.assigned_to,\r\n           b.co_name,\r\n           b.co_name2,\r\n           a.credit_acct_no,\r\n           a.credit_bank_no,\r\n           a.credit_branch_no,\r\n           a.service_id \r\n      FROM newappl a\r\n      JOIN newappl_hq b ON b.appl_no = a.appl_no\r\n     WHERE a.appl_no = ?\r\n       AND rownum = 1 \r\n       AND credit_status = &#39;CRPEND&#39;\r\n    UNION ALL\r\n    SELECT TO_CHAR(SYSDATE,&#39;DD MONTH,YYYY&#39;),\r\n           a.appl_no,\r\n           a.assigned_to,\r\n           c.trading_name, \r\n           &#39; &#39;, \r\n           d.bank_acct_no, \r\n           d.bank_no, \r\n           d.bank_branch_no,\r\n           a.service_id\r\n      FROM newappl a\r\n      JOIN newappl_ret c ON c.appl_no = a.appl_no\r\n      JOIN newappl_ret_bank d ON d.ret_id = c.ret_id\r\n     WHERE c.appl_no = ?\r\n       AND rownum = 1 \r\n       AND credit_status = &#39;CRPEND&#39;\r\n\r\nFrom what I can see, the [ORA-00918][1] is about the reference to the `credit_status` column.  Of the tables involved, is there a `credit_status` column in more than one of them?  Because it&#39;s the only un-aliased column in either query.\r\n\r\nCouple other things to mention:\r\n\r\n- don&#39;t need to TRUNC a date if you&#39;re going to TO_CHAR it for just the day/month/year info.\r\n- don&#39;t need to alias columns in the latter part of UNION&#39;d statements, UNIONs only need the same number of columns in the SELECT clause and that their data types match\r\n- don&#39;t subquery for what you don&#39;t need to\r\n- always test the query in PLSQL Developer/etc before dumping it into a Prepared Statement.  This looks like it could be a stored procedure with a single parameter (assuming the appl_no is identical for both sides)\r\n\r\n  [1]: http://www.techonthenet.com/oracle/errors/ora00918.php","title":" PreparedStatement error ","body":"<p>I re-wrote your query as:</p>\n\n<pre><code>SELECT TO_CHAR(SYSDATE,'DD MONTH,YYYY'),\n       a.appl_no,\n       a.assigned_to,\n       b.co_name,\n       b.co_name2,\n       a.credit_acct_no,\n       a.credit_bank_no,\n       a.credit_branch_no,\n       a.service_id \n  FROM newappl a\n  JOIN newappl_hq b ON b.appl_no = a.appl_no\n WHERE a.appl_no = ?\n   AND rownum = 1 \n   AND credit_status = 'CRPEND'\nUNION ALL\nSELECT TO_CHAR(SYSDATE,'DD MONTH,YYYY'),\n       a.appl_no,\n       a.assigned_to,\n       c.trading_name, \n       ' ', \n       d.bank_acct_no, \n       d.bank_no, \n       d.bank_branch_no,\n       a.service_id\n  FROM newappl a\n  JOIN newappl_ret c ON c.appl_no = a.appl_no\n  JOIN newappl_ret_bank d ON d.ret_id = c.ret_id\n WHERE c.appl_no = ?\n   AND rownum = 1 \n   AND credit_status = 'CRPEND'\n</code></pre>\n\n<p>From what I can see, the <a href=\"http://www.techonthenet.com/oracle/errors/ora00918.php\" rel=\"nofollow noreferrer\">ORA-00918</a> is about the reference to the <code>credit_status</code> column.  Of the tables involved, is there a <code>credit_status</code> column in more than one of them?  Because it's the only un-aliased column in either query.</p>\n\n<p>Couple other things to mention:</p>\n\n<ul>\n<li>don't need to TRUNC a date if you're going to TO_CHAR it for just the day/month/year info.</li>\n<li>don't need to alias columns in the latter part of UNION'd statements, UNIONs only need the same number of columns in the SELECT clause and that their data types match</li>\n<li>don't subquery for what you don't need to</li>\n<li>always test the query in PLSQL Developer/etc before dumping it into a Prepared Statement.  This looks like it could be a stored procedure with a single parameter (assuming the appl_no is identical for both sides)</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":203122,"reputation":1123,"user_id":450589,"accept_rate":75,"display_name":"Pietro Braione"},"score":0,"creation_date":1691559007,"post_id":76833825,"comment_id":135506195,"body_markdown":"Your answer is unclear; &quot;below solution&quot; does not refer in an unambiguous way to another answer; please, clarify other which answer you are referring.","body":"Your answer is unclear; &quot;below solution&quot; does not refer in an unambiguous way to another answer; please, clarify other which answer you are referring."}],"tags":[],"owner":{"account_id":4399248,"reputation":1,"user_id":3585431,"display_name":"Yogesh"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691134295,"creation_date":1691134295,"answer_id":76833825,"question_id":3774850,"body_markdown":"I also had same exception while running query in sql developer. below solution worked for me, you can also have a try.\r\nYou should rewrite the query, try and see if you can use ambiguous column table in FROM clause instead of putting it inside of JOIN expression.","title":" PreparedStatement error ","body":"<p>I also had same exception while running query in sql developer. below solution worked for me, you can also have a try.\nYou should rewrite the query, try and see if you can use ambiguous column table in FROM clause instead of putting it inside of JOIN expression.</p>\n"}],"owner":{"account_id":183016,"reputation":205,"user_id":418132,"accept_rate":50,"display_name":"daydream"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1506,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":3774871,"answer_count":3,"score":0,"last_activity_date":1691134295,"creation_date":1285205946,"question_id":3774850,"body_markdown":"I have two select statements and make &#39;union all&#39; for these two statements. Then, I use the PreparedStatement and when I setString to this preparedStatement, it shows **&quot;java.sql.SQLException: Missing IN or OUT parameter at index:: 2&quot;.** \r\n\r\nAfter I toured around google, some people say that for each &quot;?&quot; in sql statment, I should write setString. For my situation, I have two select statments so I have two &quot;?&quot; but I &quot;union all&quot;, so I&#39;m not sure whether it is assumed that one &quot;?&quot; or two &quot;?&quot;. But when I tried to write two setString like \r\n**preparedStatement.setString(1,ApplicationNo);\r\npreparedStatement.setString(2,ApplicationNo);**\r\n, it shows **&quot;ORA-00918: column ambiguously defined&quot;.**\r\n\r\nI have no idea how to solve this problem.\r\n\r\nmy union select statment is \r\n\r\n    query.append(&quot;select TO_CHAR(TRUNC(SYSDATE),&#39;DD MONTH,YYYY&#39;),a.appl_no,a.assigned_to,b.co_name,b.co_name2,a.credit_acct_no,a.credit_bank_no,a.credit_branch_no,a.service_id &quot;);\r\n    query.append(&quot;from newappl a, newappl_hq b where b.appl_no = a.appl_no and a.appl_no=(select appl_no from newappl where appl_no=?) and rownum=1 and credit_status = &#39;CRPEND&#39;&quot;);\r\n    query.append(&quot; union all &quot;);\r\n    query.append(&quot;select TO_CHAR(TRUNC(SYSDATE),&#39;DD MONTH,YYYY&#39;),a.appl_no,a.assigned_to,c.trading_name co_name, &#39; &#39; co_name2, d.bank_acct_no  credit_acct_no, d.bank_no credit_bank_no, d.bank_branch_no credit_branch_no,a.service_id &quot;);\r\n    query.append(&quot;from newappl a,newappl_hq b, newappl_ret c, newappl_ret_bank d where b.appl_no = a.appl_no or a.appl_no = c.appl_no and c.ret_id= d.ret_id and a.appl_no=(select appl_no from newappl_ret where appl_no=?) and rownum=1 and credit_status = &#39;CRPEND&#39;&quot;);*\r\n\r\nsetString is **preparedStatement.setString(1,ApplicationNo);**\r\n\r\nWhen I searched for setString example, there are two different parameters if there are two setString like \r\n\r\n    preparedStatement.setString(1,ApplicationNo);\r\n    preparedStatement.setString(2,LoginID);\r\n\r\nBut I need ApplicationNo for both select statments.","title":" PreparedStatement error ","body":"<p>I have two select statements and make 'union all' for these two statements. Then, I use the PreparedStatement and when I setString to this preparedStatement, it shows <strong>\"java.sql.SQLException: Missing IN or OUT parameter at index:: 2\".</strong> </p>\n\n<p>After I toured around google, some people say that for each \"?\" in sql statment, I should write setString. For my situation, I have two select statments so I have two \"?\" but I \"union all\", so I'm not sure whether it is assumed that one \"?\" or two \"?\". But when I tried to write two setString like \n<strong>preparedStatement.setString(1,ApplicationNo);\npreparedStatement.setString(2,ApplicationNo);</strong>\n, it shows <strong>\"ORA-00918: column ambiguously defined\".</strong></p>\n\n<p>I have no idea how to solve this problem.</p>\n\n<p>my union select statment is </p>\n\n<pre><code>query.append(\"select TO_CHAR(TRUNC(SYSDATE),'DD MONTH,YYYY'),a.appl_no,a.assigned_to,b.co_name,b.co_name2,a.credit_acct_no,a.credit_bank_no,a.credit_branch_no,a.service_id \");\nquery.append(\"from newappl a, newappl_hq b where b.appl_no = a.appl_no and a.appl_no=(select appl_no from newappl where appl_no=?) and rownum=1 and credit_status = 'CRPEND'\");\nquery.append(\" union all \");\nquery.append(\"select TO_CHAR(TRUNC(SYSDATE),'DD MONTH,YYYY'),a.appl_no,a.assigned_to,c.trading_name co_name, ' ' co_name2, d.bank_acct_no  credit_acct_no, d.bank_no credit_bank_no, d.bank_branch_no credit_branch_no,a.service_id \");\nquery.append(\"from newappl a,newappl_hq b, newappl_ret c, newappl_ret_bank d where b.appl_no = a.appl_no or a.appl_no = c.appl_no and c.ret_id= d.ret_id and a.appl_no=(select appl_no from newappl_ret where appl_no=?) and rownum=1 and credit_status = 'CRPEND'\");*\n</code></pre>\n\n<p>setString is <strong>preparedStatement.setString(1,ApplicationNo);</strong></p>\n\n<p>When I searched for setString example, there are two different parameters if there are two setString like </p>\n\n<pre><code>preparedStatement.setString(1,ApplicationNo);\npreparedStatement.setString(2,LoginID);\n</code></pre>\n\n<p>But I need ApplicationNo for both select statments.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":26555431,"reputation":558,"user_id":20184128,"display_name":"berse2212"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690985780,"creation_date":1690985780,"answer_id":76820808,"question_id":76819788,"body_markdown":"If you can use JPQL instead of a native query you could use the following approach:\r\n\r\nLet&#39;s imagine you have an entity Person. Then you can define a projection for the person just containing the names like this: \r\n\r\n    package de.models;\r\n    \r\n    public record PersonNames(String vorname, String nachname) {\r\n    }\r\n\r\nYou can use JPQL`s constructor expression creating this dynamically with createQuery:\r\n\r\n    List&lt;PersonNames&gt; p = entityManager.createQuery(\r\n    \t\t\t\t&quot;SELECT new de.models.PersonNames(vorname, nachname) FROM Person p&quot;,\r\n    \t\t\t\tPersonNames.class\r\n    \t\t).getResultList();\r\n\r\nNow this is not very generic and not really for a Class T, but if you really need a generic approach you kind of have to create it yourself. A very simple implementation could be \r\n\r\n    public &lt;T&gt; List&lt;T&gt; findT(Class&lt;T&gt; clazz) {\r\n\r\n\t\tString constructorVariables = Arrays.stream(clazz.getDeclaredFields())\r\n\t\t\t\t.map(Field::getName)\r\n\t\t\t\t.reduce((s1, s2) -&gt; s1 + &quot;, &quot; + s2)\r\n\t\t\t\t.orElse(&quot;&quot;);\r\n\r\n\t\tvar p = entityManager.createQuery(\r\n\t\t\t\t&quot;SELECT new &quot; + clazz.getName() + &quot;(&quot; + constructorVariables + &quot;) FROM Person p&quot;,\r\n\t\t\t\tclazz\r\n\t\t).getResultList();\r\n    }\r\n\r\nIn this approach the projection-class needs to have the same field names as the database-table columns.","title":"JPA query to non entity class","body":"<p>If you can use JPQL instead of a native query you could use the following approach:</p>\n<p>Let's imagine you have an entity Person. Then you can define a projection for the person just containing the names like this:</p>\n<pre><code>package de.models;\n\npublic record PersonNames(String vorname, String nachname) {\n}\n</code></pre>\n<p>You can use JPQL`s constructor expression creating this dynamically with createQuery:</p>\n<pre><code>List&lt;PersonNames&gt; p = entityManager.createQuery(\n                &quot;SELECT new de.models.PersonNames(vorname, nachname) FROM Person p&quot;,\n                PersonNames.class\n        ).getResultList();\n</code></pre>\n<p>Now this is not very generic and not really for a Class T, but if you really need a generic approach you kind of have to create it yourself. A very simple implementation could be</p>\n<pre><code>public &lt;T&gt; List&lt;T&gt; findT(Class&lt;T&gt; clazz) {\n\n    String constructorVariables = Arrays.stream(clazz.getDeclaredFields())\n            .map(Field::getName)\n            .reduce((s1, s2) -&gt; s1 + &quot;, &quot; + s2)\n            .orElse(&quot;&quot;);\n\n    var p = entityManager.createQuery(\n            &quot;SELECT new &quot; + clazz.getName() + &quot;(&quot; + constructorVariables + &quot;) FROM Person p&quot;,\n            clazz\n    ).getResultList();\n}\n</code></pre>\n<p>In this approach the projection-class needs to have the same field names as the database-table columns.</p>\n"}],"owner":{"account_id":6310497,"reputation":136,"user_id":4902186,"accept_rate":62,"display_name":"Stieg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":214,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1691134276,"creation_date":1690978462,"question_id":76819788,"body_markdown":"I want to create a generic way to return data in non entity objects. For example, I want to have a reduced version of an entity because I need to show in the front end a list of them.\r\n\r\nThe problem is that I can&#39;t really go with the annotation `@Query([query], native)...)` because I have optional filters, so I build the query dynamically.\r\n\r\nSo I am trying to use the \r\n```\r\nEntityManager.createNativeQuery([query]).getResultList()\r\n```\r\nand I get a list of Object. What I want is a way for it to return a `List&lt;T&gt;`.\r\n\r\nWhat I&#39;ve tried so far:\r\n```\r\nreturn (List&lt;T&gt;)(T) query.getResultList();\r\n```\r\nThis appears to do absolutely nothing.\r\n\r\nTLDR; I need a way to dynamically create queries (because I&#39;ve got optional filters) and return a list of `T`, `EntityManager.createNativeQuery([query]).getResultList()`, so far gives me a list of Object that can&#39;t seem to be cast to `T` .\r\n\r\n","title":"JPA query to non entity class","body":"<p>I want to create a generic way to return data in non entity objects. For example, I want to have a reduced version of an entity because I need to show in the front end a list of them.</p>\n<p>The problem is that I can't really go with the annotation <code>@Query([query], native)...)</code> because I have optional filters, so I build the query dynamically.</p>\n<p>So I am trying to use the</p>\n<pre><code>EntityManager.createNativeQuery([query]).getResultList()\n</code></pre>\n<p>and I get a list of Object. What I want is a way for it to return a <code>List&lt;T&gt;</code>.</p>\n<p>What I've tried so far:</p>\n<pre><code>return (List&lt;T&gt;)(T) query.getResultList();\n</code></pre>\n<p>This appears to do absolutely nothing.</p>\n<p>TLDR; I need a way to dynamically create queries (because I've got optional filters) and return a list of <code>T</code>, <code>EntityManager.createNativeQuery([query]).getResultList()</code>, so far gives me a list of Object that can't seem to be cast to <code>T</code> .</p>\n"},{"tags":["java","spring-boot","migration","backend","flyway"],"comments":[{"owner":{"account_id":3449131,"reputation":12148,"user_id":2889165,"accept_rate":73,"display_name":"Andreas Lundgren"},"score":0,"creation_date":1691298217,"post_id":76832553,"comment_id":135471473,"body_markdown":"What files are in your db/migration folder in your classpath? Check the class path of the packed application. If it&#39;s a JAR-file, you can check the content like this: https://stackoverflow.com/a/8453600/2889165","body":"What files are in your db/migration folder in your classpath? Check the class path of the packed application. If it&#39;s a JAR-file, you can check the content like this: <a href=\"https://stackoverflow.com/a/8453600/2889165\">stackoverflow.com/a/8453600/2889165</a>"}],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691134116,"creation_date":1691134116,"answer_id":76833802,"question_id":76832553,"body_markdown":"You have configured JPA to create the database schema from the entities with\r\n```\r\nspring.jpa.hibernate.ddl-auto=update\r\n```\r\n\r\n**Solution**\r\n\r\nYou should remove this property as you are using Flyway database migration tool.","title":"Why is flyway migrating a previous version of a SQL query that no longer exists instead of my current updated one?","body":"<p>You have configured JPA to create the database schema from the entities with</p>\n<pre><code>spring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p><strong>Solution</strong></p>\n<p>You should remove this property as you are using Flyway database migration tool.</p>\n"}],"owner":{"account_id":29126796,"reputation":3,"user_id":22312931,"display_name":"Rigene Salang"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76833802,"answer_count":1,"score":0,"last_activity_date":1691134116,"creation_date":1691114947,"question_id":76832553,"body_markdown":"I am trying to add migrations to a mysql database using flyway. I am starting from scratch with a fresh database by using `mvn flyway:clean` and then migrating using `mvn flyway:migrate`, then I run my program. I get the following tables:\r\n\r\n- flyway_schema_history\r\n- trivias\r\n\r\nwhich follows an old schema that I have now scrapped\r\n\r\nI expect the tables to be created when I migrate:\r\n\r\n- flyway_schema_history\r\n- games\r\n\r\nfollowing my migration file `V1__Create_games_table.sql`\r\n\r\nDespite the flyway_schema_history correctly detecting the V1 migration: \r\n`flyway info`\r\n\r\n```\r\nDatabase: jdbc:mysql://127.0.0.1:3306/trivia_database (MySQL 8.0)\r\nSchema version: 1\r\n\r\n+-----------+---------+--------------------+------+---------------------+---------+----------+\r\n| Category  | Version | Description        | Type | Installed On        | State   | Undoable |\r\n+-----------+---------+--------------------+------+---------------------+---------+----------+\r\n| Versioned | 1       | Create games table | SQL  | 2023-08-04 11:47:11 | Success | No       |\r\n+-----------+---------+--------------------+------+---------------------+---------+----------+\r\n```\r\n\r\nHere is my application.properties for reference:\r\n\r\n\r\n```\r\nspring.datasource.url=jdbc:mysql://127.0.0.1:3306/trivia_database\r\nspring.datasource.username=root\r\nspring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect\r\nspring.jpa.hibernate.ddl-auto=update\r\n\r\nspring.profiles.active=development\r\n\r\n# Flyway configuration\r\nspring.flyway.locations=classpath:db/migration\r\n\r\n```\r\nand flyway.conf:\r\n\r\n```\r\nflyway.url=jdbc:mysql://127.0.0.1:3306/trivia_database\r\nflyway.user=root\r\nflyway.locations=classpath:src/main/resources/db/migration\r\nflyway.cleanDisabled=false\r\n```\r\n\r\n\r\n\r\n1. I have tried recreating my database completely using MySQL Workbench with SQL queries DROP and CREATE, then using `mvn flyway:migrate`, I expect that the reset of the database would just clean any metadata involved in previous migrations included in the schema, however I get the same result. A table of an old version 1 is created instead of the new one.  \r\n\r\nIs there a hidden metadata somewhere that saved that old V1 version that created a trivias table and the cleaning resets to that version instead of the current V1 that creates a games table?\r\n\r\n2. I have tried repairing and validating the schema with `mvn flyway:repair/validate` as well as adding `flyway.validateOnMigrate=true` in my flyway.conf file and still getting the same tables &#39;trivias&#39; instead of &#39;games&#39;\r\n\r\n","title":"Why is flyway migrating a previous version of a SQL query that no longer exists instead of my current updated one?","body":"<p>I am trying to add migrations to a mysql database using flyway. I am starting from scratch with a fresh database by using <code>mvn flyway:clean</code> and then migrating using <code>mvn flyway:migrate</code>, then I run my program. I get the following tables:</p>\n<ul>\n<li>flyway_schema_history</li>\n<li>trivias</li>\n</ul>\n<p>which follows an old schema that I have now scrapped</p>\n<p>I expect the tables to be created when I migrate:</p>\n<ul>\n<li>flyway_schema_history</li>\n<li>games</li>\n</ul>\n<p>following my migration file <code>V1__Create_games_table.sql</code></p>\n<p>Despite the flyway_schema_history correctly detecting the V1 migration:\n<code>flyway info</code></p>\n<pre><code>Database: jdbc:mysql://127.0.0.1:3306/trivia_database (MySQL 8.0)\nSchema version: 1\n\n+-----------+---------+--------------------+------+---------------------+---------+----------+\n| Category  | Version | Description        | Type | Installed On        | State   | Undoable |\n+-----------+---------+--------------------+------+---------------------+---------+----------+\n| Versioned | 1       | Create games table | SQL  | 2023-08-04 11:47:11 | Success | No       |\n+-----------+---------+--------------------+------+---------------------+---------+----------+\n</code></pre>\n<p>Here is my application.properties for reference:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://127.0.0.1:3306/trivia_database\nspring.datasource.username=root\nspring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect\nspring.jpa.hibernate.ddl-auto=update\n\nspring.profiles.active=development\n\n# Flyway configuration\nspring.flyway.locations=classpath:db/migration\n\n</code></pre>\n<p>and flyway.conf:</p>\n<pre><code>flyway.url=jdbc:mysql://127.0.0.1:3306/trivia_database\nflyway.user=root\nflyway.locations=classpath:src/main/resources/db/migration\nflyway.cleanDisabled=false\n</code></pre>\n<ol>\n<li>I have tried recreating my database completely using MySQL Workbench with SQL queries DROP and CREATE, then using <code>mvn flyway:migrate</code>, I expect that the reset of the database would just clean any metadata involved in previous migrations included in the schema, however I get the same result. A table of an old version 1 is created instead of the new one.</li>\n</ol>\n<p>Is there a hidden metadata somewhere that saved that old V1 version that created a trivias table and the cleaning resets to that version instead of the current V1 that creates a games table?</p>\n<ol start=\"2\">\n<li>I have tried repairing and validating the schema with <code>mvn flyway:repair/validate</code> as well as adding <code>flyway.validateOnMigrate=true</code> in my flyway.conf file and still getting the same tables 'trivias' instead of 'games'</li>\n</ol>\n"},{"tags":["java","spring-boot","transactions","spring-transactions"],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691133350,"creation_date":1691130906,"answer_id":76833487,"question_id":76833247,"body_markdown":"How you can fix it:\r\n\r\n**Create a custom object** \r\n\r\n       public class PersonWithCountObjects {\r\n    \r\n      private String name;\r\n    \r\n      private int age;\r\n    \r\n      private int objectsCount;\r\n    \r\n      public PersonWithCountObjects(String name, int age, int objectsCount) {\r\n        this.name = name;\r\n        this.age = age;\r\n        this.objectsCount = objectsCount;\r\n      }\r\n      \r\n      //getter &amp;&amp; setter and others methods\r\n    \r\n      \r\n    }\r\n\r\n\r\n**In your PersonRepository  create a DTO projection**\r\n\r\nA DTO projection allows you to fetch fewer columns and you won’t risk any LazyInitializationException.\r\n\r\n      @Query(&quot;SELECT new your.packages.path.to.PersonWithCountObjects &quot; +\r\n          &quot; (person.name, person.age, count(person.objects)) &quot; +\r\n          &quot; FROM Person person &quot;)\r\n       List&lt;PersonWithCountObjects&gt; getPersonsWithObjectsCount();\r\n\r\nAnd after it in your `methodB()` you will replace\r\n \r\n\r\n    List&lt;Person&gt; personList = personRepository.findAll();\r\nwith \r\n\r\n    List&lt;PersonWithCountObjects&gt; personList = personRepository.getPersonsWithObjectsCount();\r\n\r\nand make it `public` because you have `@Transactional` annotation on it\r\n\r\nyou dont need to have this line of code(`int objectSize = methodD(person)`) and also `methodD` you by default will have objects count for every person in field `objectsCount` from `PersonWithCountObjects`\r\n\r\n\r\nAnd your for loop will look so:\r\n\r\n    for (PersonWithCountObjects person : personList) {\r\n                if (person.getObjectsCount() &lt; 50) {\r\n                    PersonDTO personDTO = new PersonDTO();\r\n                    personDTO.setName(person.getName());\r\n                    personDTO.setAge(person.getAge());\r\n                    personDTOList.add(personDTO);\r\n                }\r\n            }\r\n\r\n\r\n","title":"LazyInitializationException: failed to lazily initialize a collection of role: ... could not initialize proxy - no session","body":"<p>How you can fix it:</p>\n<p><strong>Create a custom object</strong></p>\n<pre><code>   public class PersonWithCountObjects {\n\n  private String name;\n\n  private int age;\n\n  private int objectsCount;\n\n  public PersonWithCountObjects(String name, int age, int objectsCount) {\n    this.name = name;\n    this.age = age;\n    this.objectsCount = objectsCount;\n  }\n  \n  //getter &amp;&amp; setter and others methods\n\n  \n}\n</code></pre>\n<p><strong>In your PersonRepository  create a DTO projection</strong></p>\n<p>A DTO projection allows you to fetch fewer columns and you won’t risk any LazyInitializationException.</p>\n<pre><code>  @Query(&quot;SELECT new your.packages.path.to.PersonWithCountObjects &quot; +\n      &quot; (person.name, person.age, count(person.objects)) &quot; +\n      &quot; FROM Person person &quot;)\n   List&lt;PersonWithCountObjects&gt; getPersonsWithObjectsCount();\n</code></pre>\n<p>And after it in your <code>methodB()</code> you will replace</p>\n<pre><code>List&lt;Person&gt; personList = personRepository.findAll();\n</code></pre>\n<p>with</p>\n<pre><code>List&lt;PersonWithCountObjects&gt; personList = personRepository.getPersonsWithObjectsCount();\n</code></pre>\n<p>and make it <code>public</code> because you have <code>@Transactional</code> annotation on it</p>\n<p>you dont need to have this line of code(<code>int objectSize = methodD(person)</code>) and also <code>methodD</code> you by default will have objects count for every person in field <code>objectsCount</code> from <code>PersonWithCountObjects</code></p>\n<p>And your for loop will look so:</p>\n<pre><code>for (PersonWithCountObjects person : personList) {\n            if (person.getObjectsCount() &lt; 50) {\n                PersonDTO personDTO = new PersonDTO();\n                personDTO.setName(person.getName());\n                personDTO.setAge(person.getAge());\n                personDTOList.add(personDTO);\n            }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9008386,"reputation":83,"user_id":6714057,"display_name":"Long"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691132728,"creation_date":1691132341,"answer_id":76833618,"question_id":76833247,"body_markdown":"@Transactional only with public method. You can update your code to something like:\r\n```\r\n@Transactional\r\npublic List&lt;PersonDTO&gt; methodB() {\r\n...\r\n}\r\n```\r\nThe reason why it works when you put @Transactional in your methodA is because methodA has public access modifier. And it bypasses the transaction to methodB inside it.","title":"LazyInitializationException: failed to lazily initialize a collection of role: ... could not initialize proxy - no session","body":"<p>@Transactional only with public method. You can update your code to something like:</p>\n<pre><code>@Transactional\npublic List&lt;PersonDTO&gt; methodB() {\n...\n}\n</code></pre>\n<p>The reason why it works when you put @Transactional in your methodA is because methodA has public access modifier. And it bypasses the transaction to methodB inside it.</p>\n"}],"owner":{"account_id":10383212,"reputation":333,"user_id":7657219,"display_name":"Varox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691133350,"creation_date":1691128110,"question_id":76833247,"body_markdown":"I&#39;m facing this issue at my job and I don&#39;t know how could I achieve this.\r\n\r\nI have these classes (which are not real, but are a very simplistic example of the problem, the real ones are very complex)\r\n\r\nA Person class:\r\n\r\n    @Entity\r\n    public class Person {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        private String name;\r\n        private int age;\r\n    \r\n        @OneToMany(mappedBy = &quot;person&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n        private List&lt;Object&gt; objects = new ArrayList&lt;&gt;();\r\n    \r\n        // Constructors, getters, and setters\r\n    \r\n    }\r\n\r\nThis class have a lazily fetched list of objects, that have:\r\n\r\n    @Entity\r\n    public class Object {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        private String name;\r\n        private double weight;\r\n    \r\n        // Constructors, getters, and setters\r\n    }\r\n\r\nAnd then I have a DTO to get only the name and the age:\r\n\r\n    public class PersonDTO {\r\n        private String name;\r\n        private int age;\r\n    \r\n        // Constructors, getters, and setters\r\n    }\r\n\r\nBoth classes are in the database, the problem is that in the real case, the class object is huge, so it shouldn&#39;t be fetched in any case if it is not necessary.\r\n\r\nNow the problem appears when I try to do a several checks on that data:\r\n\r\n    @Service\r\n    public class PersonService {\r\n    \r\n        @Autowired\r\n        private PersonRepository personRepository;\r\n    \r\n        public List&lt;PersonDTO&gt; methodA() {\r\n            List&lt;PersonDTO&gt; personDTOList = methodB();\r\n            methodC(personDTOList);\r\n            return personDTOList;\r\n        }\r\n    \r\n        @Transactional\r\n        private List&lt;PersonDTO&gt; methodB() {\r\n            List&lt;PersonDTO&gt; personDTOList = new ArrayList&lt;&gt;();\r\n    \r\n            List&lt;Person&gt; personList = personRepository.findAll();\r\n    \r\n            for (Person person : personList) {\r\n                int objectSize = methodD(person);\r\n                if (objectSize &lt; 50) {\r\n                    PersonDTO personDTO = new PersonDTO();\r\n                    personDTO.setName(person.getName());\r\n                    personDTO.setAge(person.getAge());\r\n                    personDTOList.add(personDTO);\r\n                }\r\n            }\r\n    \r\n            return personDTOList;\r\n        }\r\n    \r\n        private int methodD(Person person) {\r\n            return person.getObjects().size();\r\n        }\r\n    \r\n        private void methodC(List&lt;PersonDTO&gt; personDTOList) {\r\n            for (PersonDTO personDTO : personDTOList) {\r\n                System.out.println(&quot;Name: &quot; + personDTO.getName() + &quot;, Age: &quot; + personDTO.getAge());\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\nAs you can see, my main method A is not transactional, because I need to extract a DTO from the data without getting the list of objects, so it can be used later to make changes in database from another table based on the data that is inside the Person ( this is what happens in the real code)\r\n\r\nThe problem is that when I try to execute the following line of code:\r\n\r\n&gt; person.getObjects().size();\r\n\r\nIt throws me this error:\r\n\r\n*Processing of HttpInvokerServiceExporter remote call resulted in fatal exception:\r\nname.of.the.class: org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role:\r\nPerson.Objects, could not initialize proxy - no Session*\r\n\r\n\r\nWhat could be happening?\r\n\r\nHowever, if I use the transactional in the methodA, **everything works**, but I really need to put it in the second method, as I need to do those changes at that moment.\r\n\r\nI&#39;ve tried changing the visibility of all methods and no luck.\r\n\r\nThank you very much for your time.\r\n\r\n\r\n\r\n","title":"LazyInitializationException: failed to lazily initialize a collection of role: ... could not initialize proxy - no session","body":"<p>I'm facing this issue at my job and I don't know how could I achieve this.</p>\n<p>I have these classes (which are not real, but are a very simplistic example of the problem, the real ones are very complex)</p>\n<p>A Person class:</p>\n<pre><code>@Entity\npublic class Person {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String name;\n    private int age;\n\n    @OneToMany(mappedBy = &quot;person&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n    private List&lt;Object&gt; objects = new ArrayList&lt;&gt;();\n\n    // Constructors, getters, and setters\n\n}\n</code></pre>\n<p>This class have a lazily fetched list of objects, that have:</p>\n<pre><code>@Entity\npublic class Object {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String name;\n    private double weight;\n\n    // Constructors, getters, and setters\n}\n</code></pre>\n<p>And then I have a DTO to get only the name and the age:</p>\n<pre><code>public class PersonDTO {\n    private String name;\n    private int age;\n\n    // Constructors, getters, and setters\n}\n</code></pre>\n<p>Both classes are in the database, the problem is that in the real case, the class object is huge, so it shouldn't be fetched in any case if it is not necessary.</p>\n<p>Now the problem appears when I try to do a several checks on that data:</p>\n<pre><code>@Service\npublic class PersonService {\n\n    @Autowired\n    private PersonRepository personRepository;\n\n    public List&lt;PersonDTO&gt; methodA() {\n        List&lt;PersonDTO&gt; personDTOList = methodB();\n        methodC(personDTOList);\n        return personDTOList;\n    }\n\n    @Transactional\n    private List&lt;PersonDTO&gt; methodB() {\n        List&lt;PersonDTO&gt; personDTOList = new ArrayList&lt;&gt;();\n\n        List&lt;Person&gt; personList = personRepository.findAll();\n\n        for (Person person : personList) {\n            int objectSize = methodD(person);\n            if (objectSize &lt; 50) {\n                PersonDTO personDTO = new PersonDTO();\n                personDTO.setName(person.getName());\n                personDTO.setAge(person.getAge());\n                personDTOList.add(personDTO);\n            }\n        }\n\n        return personDTOList;\n    }\n\n    private int methodD(Person person) {\n        return person.getObjects().size();\n    }\n\n    private void methodC(List&lt;PersonDTO&gt; personDTOList) {\n        for (PersonDTO personDTO : personDTOList) {\n            System.out.println(&quot;Name: &quot; + personDTO.getName() + &quot;, Age: &quot; + personDTO.getAge());\n        }\n    }\n}\n</code></pre>\n<p>As you can see, my main method A is not transactional, because I need to extract a DTO from the data without getting the list of objects, so it can be used later to make changes in database from another table based on the data that is inside the Person ( this is what happens in the real code)</p>\n<p>The problem is that when I try to execute the following line of code:</p>\n<blockquote>\n<p>person.getObjects().size();</p>\n</blockquote>\n<p>It throws me this error:</p>\n<p><em>Processing of HttpInvokerServiceExporter remote call resulted in fatal exception:\nname.of.the.class: org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role:\nPerson.Objects, could not initialize proxy - no Session</em></p>\n<p>What could be happening?</p>\n<p>However, if I use the transactional in the methodA, <strong>everything works</strong>, but I really need to put it in the second method, as I need to do those changes at that moment.</p>\n<p>I've tried changing the visibility of all methods and no luck.</p>\n<p>Thank you very much for your time.</p>\n"},{"tags":["java","excel","apache-poi","powerpoint"],"answers":[{"comments":[{"owner":{"account_id":28967622,"reputation":5,"user_id":22188644,"display_name":"Code Trickle"},"score":0,"creation_date":1690808021,"post_id":76803713,"comment_id":135400168,"body_markdown":"To clarify a bit, I am currently parsing a PPTX file and reading XLS table from one of the slides, Can you please let know how to parse a ppt slide and read xls table from it","body":"To clarify a bit, I am currently parsing a PPTX file and reading XLS table from one of the slides, Can you please let know how to parse a ppt slide and read xls table from it"}],"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691053045,"creation_date":1690807084,"answer_id":76803713,"question_id":76803642,"body_markdown":"```java\r\ntry (FileInputStream inStream = new FileInputStream(new File(&quot;path/to/file.xlsx&quot;))) {\r\n   XSSFWorkbook workbook = new XSSFWorkbook(inStream);\r\n   XSSFSheet sheet = workbook.getSheetAt(0);\r\n\r\n   for (Iterator&lt;Row&gt; rowIterator = sheet.iterator() ; rowIterator.hasNext(); ) {\r\n      Row row = rowIterator.next();\r\n      for (Iterator&lt;Cell&gt; cellIterator = row.cellIterator(); cellIterator.hasNext(); )  {\r\n         Cell cell = cellIterator.next();\r\n         switch (cell.getCellType()) \r\n         {\r\n            case Cell.CELL_TYPE_NUMERIC:\r\n               System.out.print(cell.getNumericCellValue() + &quot;\\t&quot;);\r\n               break;\r\n            case Cell.CELL_TYPE_STRING:\r\n               System.out.print(cell.getStringCellValue() + &quot;\\t&quot;);\r\n               break;\r\n            ...   \r\n         }\r\n      }\r\n      System.out.println(&quot;&quot;);\r\n   }\r\n} \r\n```","title":"How to extract table data like excel table cells and table row data from PPT in apache poi","body":"<pre class=\"lang-java prettyprint-override\"><code>try (FileInputStream inStream = new FileInputStream(new File(&quot;path/to/file.xlsx&quot;))) {\n   XSSFWorkbook workbook = new XSSFWorkbook(inStream);\n   XSSFSheet sheet = workbook.getSheetAt(0);\n\n   for (Iterator&lt;Row&gt; rowIterator = sheet.iterator() ; rowIterator.hasNext(); ) {\n      Row row = rowIterator.next();\n      for (Iterator&lt;Cell&gt; cellIterator = row.cellIterator(); cellIterator.hasNext(); )  {\n         Cell cell = cellIterator.next();\n         switch (cell.getCellType()) \n         {\n            case Cell.CELL_TYPE_NUMERIC:\n               System.out.print(cell.getNumericCellValue() + &quot;\\t&quot;);\n               break;\n            case Cell.CELL_TYPE_STRING:\n               System.out.print(cell.getStringCellValue() + &quot;\\t&quot;);\n               break;\n            ...   \n         }\n      }\n      System.out.println(&quot;&quot;);\n   }\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691133340,"creation_date":1691045306,"answer_id":76825519,"question_id":76803642,"body_markdown":"From the POI docs at https://poi.apache.org/components/poifs/embeded.html\r\n\r\n&gt; Files embedded in PowerPoint - PowerPoint does not normally store embedded files in the OLE2 layer. Instead, they are held within records of the main PowerPoint file. See the [HSLF Tutorial](https://poi.apache.org/components/slideshow/how-to-shapes.html#OLE) for how to retrieve embedded OLE objects from a presentation\r\n\r\n&gt; Opening embedded files - All of the POIDocument classes (HSSFWorkbook, HSLFSlideShow, HWPFDocument and HDGFDiagram) can either be opened from a POIFSFileSystem, or from a specific directory within a POIFSFileSystem. So, to open embedded files, simply locate the appropriate DirectoryNode that represents the subdirectory of interest, and pass this + the overall POIFSFileSystem to the constructor. \r\n\r\n&gt; I you want to extract the textual contents of the embedded file, then open the appropriate POIDocument, and then pass this to the extractor class, instead of simply passing the POIFSFilesystem to the extractor.\r\n\r\nAnd from the [HSLF Tutorial](https://poi.apache.org/components/slideshow/how-to-shapes.html#OLE)\r\n\r\n```java\r\nfor (HSLFShape shape : slide.getShapes()) {\r\n    if (shape instanceof OLEShape) {\r\n        OLEShape ole = (OLEShape) shape;\r\n        HSLFObjectData data = ole.getObjectData();\r\n        String name = ole.getInstanceName();\r\n        if (&quot;Worksheet&quot;.equals(name)) {\r\n            HSSFWorkbook wb = new HSSFWorkbook(data.getData());\r\n        } else if (&quot;Document&quot;.equals(name)) {\r\n            HWPFDocument doc = new HWPFDocument(data.getData());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nNote: You can use [WorkbookFactory](https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/WorkbookFactory.html) to abstract yourself from the underlying data format (eg [HSSFWorkbook](https://poi.apache.org/apidocs/dev/org/apache/poi/hssf/usermodel/HSSFWorkbook.html) vs [XSSFWorkbook](https://poi.apache.org/apidocs/dev/org/apache/poi/xssf/usermodel/XSSFWorkbook.html)). \r\n\r\nEg:\r\n\r\n```java\r\nif (&quot;Worksheet&quot;.equals(name)) {\r\n   Workbook wb = WorkbookFactory.create(data.getInputStream());\r\n   Sheet sheet = workbook.getSheetAt(0);\r\n   for (Iterator&lt;Row&gt; rowIterator = sheet.iterator() ; rowIterator.hasNext(); ) {\r\n      ...\r\n   }\r\n}\r\n```","title":"How to extract table data like excel table cells and table row data from PPT in apache poi","body":"<p>From the POI docs at <a href=\"https://poi.apache.org/components/poifs/embeded.html\" rel=\"nofollow noreferrer\">https://poi.apache.org/components/poifs/embeded.html</a></p>\n<blockquote>\n<p>Files embedded in PowerPoint - PowerPoint does not normally store embedded files in the OLE2 layer. Instead, they are held within records of the main PowerPoint file. See the <a href=\"https://poi.apache.org/components/slideshow/how-to-shapes.html#OLE\" rel=\"nofollow noreferrer\">HSLF Tutorial</a> for how to retrieve embedded OLE objects from a presentation</p>\n</blockquote>\n<blockquote>\n<p>Opening embedded files - All of the POIDocument classes (HSSFWorkbook, HSLFSlideShow, HWPFDocument and HDGFDiagram) can either be opened from a POIFSFileSystem, or from a specific directory within a POIFSFileSystem. So, to open embedded files, simply locate the appropriate DirectoryNode that represents the subdirectory of interest, and pass this + the overall POIFSFileSystem to the constructor.</p>\n</blockquote>\n<blockquote>\n<p>I you want to extract the textual contents of the embedded file, then open the appropriate POIDocument, and then pass this to the extractor class, instead of simply passing the POIFSFilesystem to the extractor.</p>\n</blockquote>\n<p>And from the <a href=\"https://poi.apache.org/components/slideshow/how-to-shapes.html#OLE\" rel=\"nofollow noreferrer\">HSLF Tutorial</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>for (HSLFShape shape : slide.getShapes()) {\n    if (shape instanceof OLEShape) {\n        OLEShape ole = (OLEShape) shape;\n        HSLFObjectData data = ole.getObjectData();\n        String name = ole.getInstanceName();\n        if (&quot;Worksheet&quot;.equals(name)) {\n            HSSFWorkbook wb = new HSSFWorkbook(data.getData());\n        } else if (&quot;Document&quot;.equals(name)) {\n            HWPFDocument doc = new HWPFDocument(data.getData());\n        }\n    }\n}\n</code></pre>\n<p>Note: You can use <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/WorkbookFactory.html\" rel=\"nofollow noreferrer\">WorkbookFactory</a> to abstract yourself from the underlying data format (eg <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/hssf/usermodel/HSSFWorkbook.html\" rel=\"nofollow noreferrer\">HSSFWorkbook</a> vs <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/xssf/usermodel/XSSFWorkbook.html\" rel=\"nofollow noreferrer\">XSSFWorkbook</a>).</p>\n<p>Eg:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (&quot;Worksheet&quot;.equals(name)) {\n   Workbook wb = WorkbookFactory.create(data.getInputStream());\n   Sheet sheet = workbook.getSheetAt(0);\n   for (Iterator&lt;Row&gt; rowIterator = sheet.iterator() ; rowIterator.hasNext(); ) {\n      ...\n   }\n}\n</code></pre>\n"}],"owner":{"account_id":28967622,"reputation":5,"user_id":22188644,"display_name":"Code Trickle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1691167053,"answer_count":2,"score":-3,"last_activity_date":1691133340,"creation_date":1690806539,"question_id":76803642,"body_markdown":"I am currently parsing a PPTX document using apache poi and able to extract images, embedded OLE Objects from ppt slide XSLFSlide but dont know how to extract embedded xls tables from the slide. I need help try to parse and read embedded xls tables in a PPT Slide.","title":"How to extract table data like excel table cells and table row data from PPT in apache poi","body":"<p>I am currently parsing a PPTX document using apache poi and able to extract images, embedded OLE Objects from ppt slide XSLFSlide but dont know how to extract embedded xls tables from the slide. I need help try to parse and read embedded xls tables in a PPT Slide.</p>\n"},{"tags":["java","spring","join"],"comments":[{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1691010817,"post_id":76823519,"comment_id":135434647,"body_markdown":"You do know, do you not, that you can get a composite PK for an entity simply by annotating multiple fields with `@Id`?  You do not need to create an `@EmbeddedId` for that purpose.  Including when they are relationship fields.  Pulling yours up into the main `PersonRace` entity might clarify to you what the multiplicity of the relationships needs to be.","body":"You do know, do you not, that you can get a composite PK for an entity simply by annotating multiple fields with <code>@Id</code>?  You do not need to create an <code>@EmbeddedId</code> for that purpose.  Including when they are relationship fields.  Pulling yours up into the main <code>PersonRace</code> entity might clarify to you what the multiplicity of the relationships needs to be."},{"owner":{"account_id":20358115,"reputation":37,"user_id":14933161,"display_name":"Ser"},"score":0,"creation_date":1691042512,"post_id":76823519,"comment_id":135437738,"body_markdown":"@JohnBollinger The part of the code you&#39;re reffering to was written by someone else, but thank you for your suggestion, I will pass it on to my colleague","body":"@JohnBollinger The part of the code you&#39;re reffering to was written by someone else, but thank you for your suggestion, I will pass it on to my colleague"}],"answers":[{"tags":[],"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691063410,"creation_date":1691012372,"answer_id":76823695,"question_id":76823519,"body_markdown":"According to your ER diagram, `PersonRace` has a many-to-one relationship with `Race` (and another with `Person`).  That is not correctly reflected on `PersonRaceId`, which in addition to being a problem in itself, leaves the `Race.personRaces` without a viable owning side.  That&#39;s probably why JPA is looking for a table named `race_person_races`.\r\n\r\nYour `@EmbeddedId` seems to be complicating the matters and confusing you, without serving any useful purpose that I can discern, so I recommend getting rid of it.  That would leave you with:\r\n```\r\n@Entity\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Getter\r\n@Setter\r\n@ToString\r\npublic class PersonRace {\r\n    @Id\r\n    @NotNull\r\n    @ManyToOne\r\n    @Column(name = &quot;race_id&quot;)\r\n    private Race race;\r\n\r\n    @Id\r\n    @NotNull\r\n    @ManyToOne\r\n    @Column(name = &quot;person_id&quot;)\r\n    private Person person;\r\n\r\n    // ...\r\n}\r\n\r\n@Entity\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\n@ToString\r\npublic class Race {\r\n    @Id\r\n    @NotNull\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;race_id&quot;)\r\n    private Long id;\r\n\r\n    @OneToMany(mappedBy = &quot;race&quot;)\r\n    private List&lt;PersonRace&gt; personRaces;\r\n\r\n    // ...\r\n}\r\n```\r\nNote that using the `mappedBy` attribute of the `@OneToMany` enables JPA to figure out for itself the appropriate join column(s).  I don&#39;t think you can do that correctly with annotations alone if you use an `@EmbeddedId`.  And as a side note, there is only one join column for this relationship: `person_race.race_id`.","title":"Join Column with EmbeddedId, Spring","body":"<p>According to your ER diagram, <code>PersonRace</code> has a many-to-one relationship with <code>Race</code> (and another with <code>Person</code>).  That is not correctly reflected on <code>PersonRaceId</code>, which in addition to being a problem in itself, leaves the <code>Race.personRaces</code> without a viable owning side.  That's probably why JPA is looking for a table named <code>race_person_races</code>.</p>\n<p>Your <code>@EmbeddedId</code> seems to be complicating the matters and confusing you, without serving any useful purpose that I can discern, so I recommend getting rid of it.  That would leave you with:</p>\n<pre><code>@Entity\n@NoArgsConstructor\n@AllArgsConstructor\n@Getter\n@Setter\n@ToString\npublic class PersonRace {\n    @Id\n    @NotNull\n    @ManyToOne\n    @Column(name = &quot;race_id&quot;)\n    private Race race;\n\n    @Id\n    @NotNull\n    @ManyToOne\n    @Column(name = &quot;person_id&quot;)\n    private Person person;\n\n    // ...\n}\n\n@Entity\n@NoArgsConstructor\n@Getter\n@Setter\n@ToString\npublic class Race {\n    @Id\n    @NotNull\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;race_id&quot;)\n    private Long id;\n\n    @OneToMany(mappedBy = &quot;race&quot;)\n    private List&lt;PersonRace&gt; personRaces;\n\n    // ...\n}\n</code></pre>\n<p>Note that using the <code>mappedBy</code> attribute of the <code>@OneToMany</code> enables JPA to figure out for itself the appropriate join column(s).  I don't think you can do that correctly with annotations alone if you use an <code>@EmbeddedId</code>.  And as a side note, there is only one join column for this relationship: <code>person_race.race_id</code>.</p>\n"},{"tags":[],"owner":{"account_id":20358115,"reputation":37,"user_id":14933161,"display_name":"Ser"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691133095,"creation_date":1691133095,"answer_id":76833697,"question_id":76823519,"body_markdown":"My colleague didn&#39;t want to change the EmbeddedId like suggested but we solved a problem different way\r\n\r\n**PersonRaceId**\r\n```\r\n@Embeddable\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class PersonRaceId implements Serializable {\r\n\r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;race_id&quot;)\r\n        @NotNull\r\n        @JsonIgnore\r\n        private Race race;\r\n        @ManyToOne\r\n        @NotNull\r\n        @JoinColumn(name = &quot;person_id&quot;)\r\n        private Person person;\r\n}\r\n```\r\n**Race.java**\r\n```\r\n@Entity\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\n@ToString\r\npublic class Race {\r\n    @Id\r\n    @Column(name = &quot;race_id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @NotNull\r\n    private Long id;\r\n    @Column(name = &quot;max_players&quot;)\r\n    @NotNull\r\n    private Integer maxPlayers;\r\n    @NotNull\r\n    private String description;\r\n    @NotNull\r\n    private String location;\r\n    @NotNull\r\n    private LocalDateTime date;\r\n    @NotNull\r\n    private String state;\r\n    @ManyToOne\r\n    @NotNull\r\n    @JoinColumn(name = &quot;event_id&quot;)\r\n    private RaceEvent raceEvent;\r\n    @OneToMany\r\n    @JoinColumn(name = &quot;lap_id&quot;)\r\n    private List&lt;Lap&gt; laps;\r\n    @OneToMany(mappedBy = &quot;personRaceId.race&quot;)\r\n    private List&lt;PersonRace&gt; personRaces;\r\n\r\n\r\n    public Race(@NotNull Long id, @NotNull Integer maxPlayers, @NotNull String description, @NotNull String location, @NotNull LocalDateTime date, @NotNull String state, @NotNull RaceEvent raceEvent, List&lt;Lap&gt; laps) {\r\n        this.id = id;\r\n        this.maxPlayers = maxPlayers;\r\n        this.description = description;\r\n        this.location = location;\r\n        this.date = date;\r\n        this.state = state;\r\n        this.raceEvent = raceEvent;\r\n        this.laps = laps;\r\n    }\r\n}\r\n```","title":"Join Column with EmbeddedId, Spring","body":"<p>My colleague didn't want to change the EmbeddedId like suggested but we solved a problem different way</p>\n<p><strong>PersonRaceId</strong></p>\n<pre><code>@Embeddable\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class PersonRaceId implements Serializable {\n\n        @ManyToOne\n        @JoinColumn(name = &quot;race_id&quot;)\n        @NotNull\n        @JsonIgnore\n        private Race race;\n        @ManyToOne\n        @NotNull\n        @JoinColumn(name = &quot;person_id&quot;)\n        private Person person;\n}\n</code></pre>\n<p><strong>Race.java</strong></p>\n<pre><code>@Entity\n@NoArgsConstructor\n@Getter\n@Setter\n@ToString\npublic class Race {\n    @Id\n    @Column(name = &quot;race_id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @NotNull\n    private Long id;\n    @Column(name = &quot;max_players&quot;)\n    @NotNull\n    private Integer maxPlayers;\n    @NotNull\n    private String description;\n    @NotNull\n    private String location;\n    @NotNull\n    private LocalDateTime date;\n    @NotNull\n    private String state;\n    @ManyToOne\n    @NotNull\n    @JoinColumn(name = &quot;event_id&quot;)\n    private RaceEvent raceEvent;\n    @OneToMany\n    @JoinColumn(name = &quot;lap_id&quot;)\n    private List&lt;Lap&gt; laps;\n    @OneToMany(mappedBy = &quot;personRaceId.race&quot;)\n    private List&lt;PersonRace&gt; personRaces;\n\n\n    public Race(@NotNull Long id, @NotNull Integer maxPlayers, @NotNull String description, @NotNull String location, @NotNull LocalDateTime date, @NotNull String state, @NotNull RaceEvent raceEvent, List&lt;Lap&gt; laps) {\n        this.id = id;\n        this.maxPlayers = maxPlayers;\n        this.description = description;\n        this.location = location;\n        this.date = date;\n        this.state = state;\n        this.raceEvent = raceEvent;\n        this.laps = laps;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20358115,"reputation":37,"user_id":14933161,"display_name":"Ser"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76833697,"answer_count":2,"score":0,"last_activity_date":1691133095,"creation_date":1691010283,"question_id":76823519,"body_markdown":"I have following database relations. person_race and race are important in my question.\r\n[![enter image description here][1]][1]\r\n\r\nI have a problem with creating relationship between race and person_race. What kind of Join should I use?\r\n\r\n**PersonRace.java**\r\n```\r\n@Entity\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Getter\r\n@Setter\r\n@ToString\r\npublic class PersonRace {\r\n\r\n\r\n    @EmbeddedId\r\n    @NotNull\r\n    private PersonRaceId personRaceId;\r\n\r\n    @Column(name = &quot;player_class&quot;)\r\n    @NotNull\r\n    private String playerClass;\r\n\r\n    @Column(name = &quot;motorbike_model&quot;)\r\n    @NotNull\r\n    private String motorbikeModel;\r\n\r\n    @NotNull\r\n    private boolean confirmed;\r\n\r\n    @NotNull\r\n    @Column(name = &quot;number_in_race&quot;)\r\n    private long numberInRace;\r\n}\r\n```\r\n**PersonRaceId**\r\n```\r\n@Embeddable\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class PersonRaceId implements Serializable {\r\n\r\n        @OneToOne\r\n        @JoinColumn(name = &quot;race_id&quot;)\r\n        @NotNull\r\n        private Race race;\r\n        @OneToOne\r\n        @NotNull\r\n        @JoinColumn(name = &quot;person_id&quot;)\r\n        private Person person;\r\n}\r\n```\r\n**Race.java**\r\n```\r\n@Entity\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\n@ToString\r\npublic class Race {\r\n    @Id\r\n    @Column(name = &quot;race_id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @NotNull\r\n    private Long id;\r\n    @Column(name = &quot;max_players&quot;)\r\n    @NotNull\r\n    private Integer maxPlayers;\r\n    @NotNull\r\n    private String description;\r\n    @NotNull\r\n    private String location;\r\n    @NotNull\r\n    private LocalDateTime date;\r\n    @NotNull\r\n    private String state;\r\n    @ManyToOne\r\n    @NotNull\r\n    @JoinColumn(name = &quot;event_id&quot;)\r\n    private RaceEvent raceEvent;\r\n    @OneToMany\r\n    @JoinColumn(name = &quot;lap_id&quot;)\r\n    private List&lt;Lap&gt; laps;\r\n    @OneToMany\r\n    // HERE IS THE PROBLEMATIC CODE\r\n    @PrimaryKeyJoinColumns(value = {\r\n            @PrimaryKeyJoinColumn(name = &quot;race_id&quot;, referencedColumnName = &quot;race_id&quot;),\r\n            @PrimaryKeyJoinColumn(name = &quot;person_id&quot;, referencedColumnName = &quot;person_id&quot;)\r\n    })\r\n    private List&lt;PersonRace&gt; personRaces;\r\n\r\n    public Race(@NotNull Long id, @NotNull Integer maxPlayers, @NotNull String description, @NotNull String location, @NotNull LocalDateTime date, @NotNull String state, @NotNull RaceEvent raceEvent, List&lt;Lap&gt; laps, List&lt;PersonRace&gt; personRaces) {\r\n        this.id = id;\r\n        this.maxPlayers = maxPlayers;\r\n        this.description = description;\r\n        this.location = location;\r\n        this.date = date;\r\n        this.state = state;\r\n        this.raceEvent = raceEvent;\r\n        this.laps = laps;\r\n        this.personRaces = personRaces;\r\n    }\r\n}\r\n```\r\nI created an controller with findAll function but it doesn&#39;t work. It showes error: Caused by: org.postgresql.util.PSQLException: ERROR: relation &quot;race_person_races&quot; does not exist\r\n\r\n**RaceRepository.java**\r\n```\r\n@Repository\r\npublic interface RaceRepository extends CrudRepository&lt;Race, Long&gt; {\r\n    List&lt;Race&gt; findAll();\r\n\r\n}\r\n```\r\n**RaceController.java**\r\n```\r\n@RestController\r\npublic class RaceController {\r\n    private final RaceRepository raceRepository;\r\n\r\n    public RaceController(RaceRepository raceRepository) {\r\n        this.raceRepository = raceRepository;\r\n    }\r\n\r\n    @GetMapping(&quot;/races&quot;)\r\n    public List&lt;Race&gt; getRaces(){\r\n        return raceRepository.findAll();\r\n    }\r\n\r\n}\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/DUJi6.png","title":"Join Column with EmbeddedId, Spring","body":"<p>I have following database relations. person_race and race are important in my question.\n<a href=\"https://i.stack.imgur.com/DUJi6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DUJi6.png\" alt=\"enter image description here\" /></a></p>\n<p>I have a problem with creating relationship between race and person_race. What kind of Join should I use?</p>\n<p><strong>PersonRace.java</strong></p>\n<pre><code>@Entity\n@NoArgsConstructor\n@AllArgsConstructor\n@Getter\n@Setter\n@ToString\npublic class PersonRace {\n\n\n    @EmbeddedId\n    @NotNull\n    private PersonRaceId personRaceId;\n\n    @Column(name = &quot;player_class&quot;)\n    @NotNull\n    private String playerClass;\n\n    @Column(name = &quot;motorbike_model&quot;)\n    @NotNull\n    private String motorbikeModel;\n\n    @NotNull\n    private boolean confirmed;\n\n    @NotNull\n    @Column(name = &quot;number_in_race&quot;)\n    private long numberInRace;\n}\n</code></pre>\n<p><strong>PersonRaceId</strong></p>\n<pre><code>@Embeddable\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class PersonRaceId implements Serializable {\n\n        @OneToOne\n        @JoinColumn(name = &quot;race_id&quot;)\n        @NotNull\n        private Race race;\n        @OneToOne\n        @NotNull\n        @JoinColumn(name = &quot;person_id&quot;)\n        private Person person;\n}\n</code></pre>\n<p><strong>Race.java</strong></p>\n<pre><code>@Entity\n@NoArgsConstructor\n@Getter\n@Setter\n@ToString\npublic class Race {\n    @Id\n    @Column(name = &quot;race_id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @NotNull\n    private Long id;\n    @Column(name = &quot;max_players&quot;)\n    @NotNull\n    private Integer maxPlayers;\n    @NotNull\n    private String description;\n    @NotNull\n    private String location;\n    @NotNull\n    private LocalDateTime date;\n    @NotNull\n    private String state;\n    @ManyToOne\n    @NotNull\n    @JoinColumn(name = &quot;event_id&quot;)\n    private RaceEvent raceEvent;\n    @OneToMany\n    @JoinColumn(name = &quot;lap_id&quot;)\n    private List&lt;Lap&gt; laps;\n    @OneToMany\n    // HERE IS THE PROBLEMATIC CODE\n    @PrimaryKeyJoinColumns(value = {\n            @PrimaryKeyJoinColumn(name = &quot;race_id&quot;, referencedColumnName = &quot;race_id&quot;),\n            @PrimaryKeyJoinColumn(name = &quot;person_id&quot;, referencedColumnName = &quot;person_id&quot;)\n    })\n    private List&lt;PersonRace&gt; personRaces;\n\n    public Race(@NotNull Long id, @NotNull Integer maxPlayers, @NotNull String description, @NotNull String location, @NotNull LocalDateTime date, @NotNull String state, @NotNull RaceEvent raceEvent, List&lt;Lap&gt; laps, List&lt;PersonRace&gt; personRaces) {\n        this.id = id;\n        this.maxPlayers = maxPlayers;\n        this.description = description;\n        this.location = location;\n        this.date = date;\n        this.state = state;\n        this.raceEvent = raceEvent;\n        this.laps = laps;\n        this.personRaces = personRaces;\n    }\n}\n</code></pre>\n<p>I created an controller with findAll function but it doesn't work. It showes error: Caused by: org.postgresql.util.PSQLException: ERROR: relation &quot;race_person_races&quot; does not exist</p>\n<p><strong>RaceRepository.java</strong></p>\n<pre><code>@Repository\npublic interface RaceRepository extends CrudRepository&lt;Race, Long&gt; {\n    List&lt;Race&gt; findAll();\n\n}\n</code></pre>\n<p><strong>RaceController.java</strong></p>\n<pre><code>@RestController\npublic class RaceController {\n    private final RaceRepository raceRepository;\n\n    public RaceController(RaceRepository raceRepository) {\n        this.raceRepository = raceRepository;\n    }\n\n    @GetMapping(&quot;/races&quot;)\n    public List&lt;Race&gt; getRaces(){\n        return raceRepository.findAll();\n    }\n\n}\n</code></pre>\n"},{"tags":["java","vaadin","vaadin7"],"comments":[{"owner":{"account_id":3837378,"reputation":35488,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1686806068,"post_id":76474713,"comment_id":134850377,"body_markdown":"I am quite out of the loop with V7, but I&#39;d be really surprised if\nadding any events on the outer object would have any consequences for an\nunrelated inner object.  If you are desperate and _really_ can not\nchange your view there, I&#39;d go with reflection directly for the private\ncombobox.","body":"I am quite out of the loop with V7, but I&#39;d be really surprised if adding any events on the outer object would have any consequences for an unrelated inner object.  If you are desperate and <i>really</i> can not change your view there, I&#39;d go with reflection directly for the private combobox."},{"owner":{"account_id":4544346,"reputation":47,"user_id":3691373,"display_name":"fraaanz"},"score":0,"creation_date":1686830144,"post_id":76474713,"comment_id":134854956,"body_markdown":"what do you mean with going with reflection?","body":"what do you mean with going with reflection?"}],"answers":[{"tags":[],"owner":{"account_id":238135,"reputation":3952,"user_id":506813,"display_name":"bekce"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690964317,"creation_date":1690964317,"answer_id":76817899,"question_id":76474713,"body_markdown":"You can use Java reflections API to access `comboRecTel` even though it is `private`. \r\n\r\n    Field privateField = TelefonoWidgetView.class.getDeclaredField(&quot;comboRecTel&quot;);\r\n    privateField.setAccessible(true);\r\n    ComboBox comboRecTel = (ComboBox) privateField.get(tel);\r\n    // then add your new custom listener here\r\n    comboRecTel.addValueChangeListener(...);\r\n\r\n","title":"why listener defined in a subclass seems that aren&#39;t defined","body":"<p>You can use Java reflections API to access <code>comboRecTel</code> even though it is <code>private</code>.</p>\n<pre><code>Field privateField = TelefonoWidgetView.class.getDeclaredField(&quot;comboRecTel&quot;);\nprivateField.setAccessible(true);\nComboBox comboRecTel = (ComboBox) privateField.get(tel);\n// then add your new custom listener here\ncomboRecTel.addValueChangeListener(...);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4201504,"reputation":5591,"user_id":3441504,"accept_rate":100,"display_name":"kscherrer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691133093,"creation_date":1691132765,"answer_id":76833670,"question_id":76474713,"body_markdown":"I am assuming that you can edit the `TelefonoWidgetView` class.  \r\nYou can add a public method in your `TelefonoWidgetView` which accepts a `ValueChangeListener` and passes it on to the combobox like this:\r\n\r\n```\r\n// I use newer vaadin versions, so please excuse any errors in my syntax\r\nclass TelefonoWidgetView extends CustomComponent {\r\n\r\n    private ComboBox comboRecTel;\r\n\r\n    public TelefonoWidgetView(){\r\n        comboRecTel = new ComboBox();\r\n        ...\r\n        addComponent(comboRecTel);\r\n    }\r\n\r\n    public void addTelValueChangeListener(ValueChangeListener valueChangeListener) {\r\n        this.comboRecTel.addValueChangeListener(valueChangeListener);\r\n    }\r\n}\r\n\r\npublic class WidgetView {\r\n\r\n    private TelefonoWidgetView tel;\r\n\r\n    public WidgetView() {\r\n        tel = new TelefornoWidgetView();\r\n        addComponent(tel);\r\n        metho1();\r\n    }\r\n\r\n    private void metho1(){\r\n        tel.addTelValueChangeListener(new ValueChangeListener() {\r\n            private static final long serialVersionUID = 1L;\r\n\r\n            @Override\r\n            public void valueChange(ValueChangeEvent event) {\r\n                System.out.println( &quot; scatto addListener su tel : &quot;+event.getValue());\r\n            }\r\n        });\r\n    }\r\n\r\n```","title":"why listener defined in a subclass seems that aren&#39;t defined","body":"<p>I am assuming that you can edit the <code>TelefonoWidgetView</code> class.<br />\nYou can add a public method in your <code>TelefonoWidgetView</code> which accepts a <code>ValueChangeListener</code> and passes it on to the combobox like this:</p>\n<pre><code>// I use newer vaadin versions, so please excuse any errors in my syntax\nclass TelefonoWidgetView extends CustomComponent {\n\n    private ComboBox comboRecTel;\n\n    public TelefonoWidgetView(){\n        comboRecTel = new ComboBox();\n        ...\n        addComponent(comboRecTel);\n    }\n\n    public void addTelValueChangeListener(ValueChangeListener valueChangeListener) {\n        this.comboRecTel.addValueChangeListener(valueChangeListener);\n    }\n}\n\npublic class WidgetView {\n\n    private TelefonoWidgetView tel;\n\n    public WidgetView() {\n        tel = new TelefornoWidgetView();\n        addComponent(tel);\n        metho1();\n    }\n\n    private void metho1(){\n        tel.addTelValueChangeListener(new ValueChangeListener() {\n            private static final long serialVersionUID = 1L;\n\n            @Override\n            public void valueChange(ValueChangeEvent event) {\n                System.out.println( &quot; scatto addListener su tel : &quot;+event.getValue());\n            }\n        });\n    }\n\n</code></pre>\n"}],"owner":{"account_id":4544346,"reputation":47,"user_id":3691373,"display_name":"fraaanz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691133093,"creation_date":1686753342,"question_id":76474713,"body_markdown":"I have a class that contains has a private member a combobox and extended CostomComponet as:\r\n\r\n    class TelefonoWidgetView extends CustomComponent {\r\n    \r\n    private ComboBox comboRecTel;\r\n    \r\n    private VerticalLayout recTelLayout(){\r\n    \r\n    comboRecTel = new ComboBox();\r\n    comboRecTel.addValueChangeListener(new ValueChangeListener() {\r\n    \t\t\tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void valueChange(ValueChangeEvent event) {\r\n                 //do something\r\n    \r\n         }\r\n    }\r\n\r\n\r\nNow in another class I need to use that class (that I cannot modify) and have a Listener on the combobox; How I can do that?\r\n\r\nLet say my new class is WidgetView, and is defined as \r\n\r\n    WidgetView {\r\n    \r\n    private TelefonoWidgetView tel;\r\n    \r\n    private void metho1(){\r\n      \ttel.addListener(new com.vaadin.ui.Component.Listener() {\r\n    \r\n    \t\t\t\r\n    \t\t\t\tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void componentEvent(Event event) {\r\n    \t\t\t\t\tSystem.out.println( &quot; scatto addListener su tel : &quot;);\r\n    \t\t\t\t\t\r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \r\n        }\r\n      }\r\n\r\n \r\nwhen I click on the combobox, I cannot see &quot;scatto addListener su tel&quot; on my console even if it compile correctly, It seems that the Listener has not been defined, while it is there!!\r\n\r\nI know that I can create a combobox by myself but in the class TelefonoWidgetView there are other staff that I cannot copied;\r\n\r\nI ve also tryed to put addDetachListener(new DetachListener(), addAttachListener(new AttachListener(),addContextClickListener(new ContextClickListener() \r\n\r\nbut no one is able to intercept the value change in the combobox\r\n\r\nthanks a lot\r\n","title":"why listener defined in a subclass seems that aren&#39;t defined","body":"<p>I have a class that contains has a private member a combobox and extended CostomComponet as:</p>\n<pre><code>class TelefonoWidgetView extends CustomComponent {\n\nprivate ComboBox comboRecTel;\n\nprivate VerticalLayout recTelLayout(){\n\ncomboRecTel = new ComboBox();\ncomboRecTel.addValueChangeListener(new ValueChangeListener() {\n            private static final long serialVersionUID = 1L;\n\n            @Override\n            public void valueChange(ValueChangeEvent event) {\n             //do something\n\n     }\n}\n</code></pre>\n<p>Now in another class I need to use that class (that I cannot modify) and have a Listener on the combobox; How I can do that?</p>\n<p>Let say my new class is WidgetView, and is defined as</p>\n<pre><code>WidgetView {\n\nprivate TelefonoWidgetView tel;\n\nprivate void metho1(){\n    tel.addListener(new com.vaadin.ui.Component.Listener() {\n\n            \n                private static final long serialVersionUID = 1L;\n\n                @Override\n                public void componentEvent(Event event) {\n                    System.out.println( &quot; scatto addListener su tel : &quot;);\n                    \n                }\n            });\n\n    }\n  }\n</code></pre>\n<p>when I click on the combobox, I cannot see &quot;scatto addListener su tel&quot; on my console even if it compile correctly, It seems that the Listener has not been defined, while it is there!!</p>\n<p>I know that I can create a combobox by myself but in the class TelefonoWidgetView there are other staff that I cannot copied;</p>\n<p>I ve also tryed to put addDetachListener(new DetachListener(), addAttachListener(new AttachListener(),addContextClickListener(new ContextClickListener()</p>\n<p>but no one is able to intercept the value change in the combobox</p>\n<p>thanks a lot</p>\n"},{"tags":["java","android","firebase","google-cloud-platform","google-cloud-firestore"],"answers":[{"comments":[{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1691234690,"post_id":76833413,"comment_id":135466490,"body_markdown":"Hey Bhadra. Have you tried my solution above, does it work for you?","body":"Hey Bhadra. Have you tried my solution above, does it work for you?"}],"tags":[],"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691132874,"creation_date":1691130017,"answer_id":76833413,"question_id":76833363,"body_markdown":"You&#39;re getting the `NullPointerException` because of the following line of code:\r\n\r\n    DocumentReference measurementdata = db.collection(&quot;measurement&quot;).getParent();\r\n\r\nWhen you&#39;re calling [CollectionReference#getParent()][1] on a top-level collection, according to the docs:\r\n\r\n&gt; Gets a `DocumentReference` to the document that contains this collection. Only subcollections are contained in a document. **For root collections, returns `null`**.\r\n\r\nTo avoid that, you have to remove the call to `.getParent()` and add a call to [CollectionReference#document()][2] to create a [DocumentReference][3] object. And to make it work, don&#39;t forget to pass the ID of the document you want to read.\r\n\r\n\r\n  [1]: https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/CollectionReference#getParent()\r\n  [2]: https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/CollectionReference#document()\r\n  [3]: https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/DocumentReference","title":"How to solve the error &quot;com.google.android.gms.tasks.Task com.google.firebase.firestore.DocumentReference.get()&#39; on a null object reference&quot;","body":"<p>You're getting the <code>NullPointerException</code> because of the following line of code:</p>\n<pre><code>DocumentReference measurementdata = db.collection(&quot;measurement&quot;).getParent();\n</code></pre>\n<p>When you're calling <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/CollectionReference#getParent()\" rel=\"nofollow noreferrer\">CollectionReference#getParent()</a> on a top-level collection, according to the docs:</p>\n<blockquote>\n<p>Gets a <code>DocumentReference</code> to the document that contains this collection. Only subcollections are contained in a document. <strong>For root collections, returns <code>null</code></strong>.</p>\n</blockquote>\n<p>To avoid that, you have to remove the call to <code>.getParent()</code> and add a call to <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/CollectionReference#document()\" rel=\"nofollow noreferrer\">CollectionReference#document()</a> to create a <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/DocumentReference\" rel=\"nofollow noreferrer\">DocumentReference</a> object. And to make it work, don't forget to pass the ID of the document you want to read.</p>\n"}],"owner":{"account_id":28701767,"reputation":1,"user_id":21978815,"display_name":"Bhadra Vaghela"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691132874,"creation_date":1691129480,"question_id":76833363,"body_markdown":"[I have tried all the way to solve the .get error but I don&#39;t get any solution ](https://i.stack.imgur.com/DfptK.jpg)\r\n\r\nTextView detailLength = view.findViewById(R.id.detailLength);\r\n        TextView detailShoulder = view.findViewById(R.id.detailShoulder);\r\n\r\n        db = FirebaseFirestore.getInstance();\r\n\r\n        DocumentReference measurementdata = db.collection(&quot;measurement&quot;).getParent();\r\n        measurementdata.get()\r\n                .addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\r\n            @Override\r\n            public void onSuccess(DocumentSnapshot documentSnapshot) {\r\n                MeasurementAdapter measurementAdapter = documentSnapshot.toObject(MeasurementAdapter.class);\r\n\r\n                String length = measurementAdapter.getLength();\r\n\r\n                String shoulder = measurementAdapter.getShoulder();\r\n\r\n\r\n                detailLength.setText(length);\r\n//                detailShoulder.setText(shoulder);\r\n            }\r\n\r\n        });\r\n\r\n\r\nI have tried this code but the text did not set in TextView.","title":"How to solve the error &quot;com.google.android.gms.tasks.Task com.google.firebase.firestore.DocumentReference.get()&#39; on a null object reference&quot;","body":"<p><a href=\"https://i.stack.imgur.com/DfptK.jpg\" rel=\"nofollow noreferrer\">I have tried all the way to solve the .get error but I don't get any solution </a></p>\n<p>TextView detailLength = view.findViewById(R.id.detailLength);\nTextView detailShoulder = view.findViewById(R.id.detailShoulder);</p>\n<pre><code>    db = FirebaseFirestore.getInstance();\n\n    DocumentReference measurementdata = db.collection(&quot;measurement&quot;).getParent();\n    measurementdata.get()\n            .addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\n        @Override\n        public void onSuccess(DocumentSnapshot documentSnapshot) {\n            MeasurementAdapter measurementAdapter = documentSnapshot.toObject(MeasurementAdapter.class);\n\n            String length = measurementAdapter.getLength();\n\n            String shoulder = measurementAdapter.getShoulder();\n\n\n            detailLength.setText(length);\n</code></pre>\n<p>//                detailShoulder.setText(shoulder);\n}</p>\n<pre><code>    });\n</code></pre>\n<p>I have tried this code but the text did not set in TextView.</p>\n"},{"tags":["java","spring","junit","mockito"],"comments":[{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":1,"creation_date":1690804154,"post_id":76803098,"comment_id":135399306,"body_markdown":"How your Unit Test looks like?","body":"How your Unit Test looks like?"}],"answers":[{"comments":[{"owner":{"account_id":12377600,"reputation":565,"user_id":9024680,"display_name":"stackUser"},"score":0,"creation_date":1690810814,"post_id":76803687,"comment_id":135400835,"body_markdown":"I think TestConfiguration and  MockBean both are from spring-boot and not spring.","body":"I think TestConfiguration and  MockBean both are from spring-boot and not spring."},{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1690811894,"post_id":76803687,"comment_id":135401081,"body_markdown":"Yes, you are right. I understand that you use pure spring without boot, but you didn&#39;t say anything about it in your question. @stackUser","body":"Yes, you are right. I understand that you use pure spring without boot, but you didn&#39;t say anything about it in your question. @stackUser"},{"owner":{"account_id":12377600,"reputation":565,"user_id":9024680,"display_name":"stackUser"},"score":0,"creation_date":1690812246,"post_id":76803687,"comment_id":135401178,"body_markdown":"updated with note. Thanks for pointing","body":"updated with note. Thanks for pointing"}],"tags":[],"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691132572,"creation_date":1690806904,"answer_id":76803687,"question_id":76803098,"body_markdown":"When you run a unit test Spring tries to initialize a program context completely. But you have several ways to influence what Spring will initialize.\r\n\r\nThe first way is to use the `@MockBean` annotation, for example:\r\n\r\n    @SpringBootTest\r\n    class SomeTest {\r\n\r\n        @MockBean\r\n        private Subscriber subscriber;\r\n        \r\n        // tests are here\r\n    }\r\n\r\nBut there are a lot of things that you think about, e.g. how the other beans will be interract with mock bean. To solve some problems related to this, `Mockito` can be used.\r\n\r\nThe second way is to use `@TestConfiguration`, for example:\r\n\r\n    @SpringBootTest\r\n    class SomeTest {\r\n    \r\n        @TestConfiguration\r\n        public static class CustomConfiguration {\r\n        \r\n            @Bean\r\n            public Subscriber consumeMessage() {\r\n                // some dummy test building logic is here\r\n                return subscriber\r\n            }\r\n        }\r\n        \r\n        @Autowired\r\n        private Subscriber subscriber;\r\n        \r\n        // tests are here\r\n    }\r\n\r\nIf you use a test configuration you will be able to do whatever you want to create the `Subscriber` bean. But this way requires adding additional configuration: `spring.main.allow-bean-definition-overriding=true`. You can put this line in the `application.properties` that can be placed in the test reources.\r\n\r\nThe choice is yours, which of these methods will suit better. And to demonstrate these methods, I&#39;ve pushed a working example on my [github][1].\r\n\r\n\r\n  [1]: https://github.com/elimxim/so-spring-boot-mock-bean","title":"How to resolve java.lang.IllegalStateException: Failed to load ApplicationContext error","body":"<p>When you run a unit test Spring tries to initialize a program context completely. But you have several ways to influence what Spring will initialize.</p>\n<p>The first way is to use the <code>@MockBean</code> annotation, for example:</p>\n<pre><code>@SpringBootTest\nclass SomeTest {\n\n    @MockBean\n    private Subscriber subscriber;\n    \n    // tests are here\n}\n</code></pre>\n<p>But there are a lot of things that you think about, e.g. how the other beans will be interract with mock bean. To solve some problems related to this, <code>Mockito</code> can be used.</p>\n<p>The second way is to use <code>@TestConfiguration</code>, for example:</p>\n<pre><code>@SpringBootTest\nclass SomeTest {\n\n    @TestConfiguration\n    public static class CustomConfiguration {\n    \n        @Bean\n        public Subscriber consumeMessage() {\n            // some dummy test building logic is here\n            return subscriber\n        }\n    }\n    \n    @Autowired\n    private Subscriber subscriber;\n    \n    // tests are here\n}\n</code></pre>\n<p>If you use a test configuration you will be able to do whatever you want to create the <code>Subscriber</code> bean. But this way requires adding additional configuration: <code>spring.main.allow-bean-definition-overriding=true</code>. You can put this line in the <code>application.properties</code> that can be placed in the test reources.</p>\n<p>The choice is yours, which of these methods will suit better. And to demonstrate these methods, I've pushed a working example on my <a href=\"https://github.com/elimxim/so-spring-boot-mock-bean\" rel=\"nofollow noreferrer\">github</a>.</p>\n"},{"comments":[{"owner":{"account_id":12377600,"reputation":565,"user_id":9024680,"display_name":"stackUser"},"score":0,"creation_date":1690810838,"post_id":76803804,"comment_id":135400842,"body_markdown":"I think MockBean are from spring-boot and not spring.","body":"I think MockBean are from spring-boot and not spring."},{"owner":{"account_id":115659,"reputation":32567,"user_id":303598,"accept_rate":84,"display_name":"matsev"},"score":0,"creation_date":1690819224,"post_id":76803804,"comment_id":135402759,"body_markdown":"true, it is provided by the [spring-boot-test](https://central.sonatype.com/artifact/org.springframework.boot/spring-boot-test) dependency","body":"true, it is provided by the <a href=\"https://central.sonatype.com/artifact/org.springframework.boot/spring-boot-test\" rel=\"nofollow noreferrer\">spring-boot-test</a> dependency"}],"tags":[],"owner":{"account_id":115659,"reputation":32567,"user_id":303598,"accept_rate":84,"display_name":"matsev"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690807794,"creation_date":1690807794,"answer_id":76803804,"question_id":76803098,"body_markdown":"One option is to potentially rewrite the unit test such that it only tests a specific class, i.e. without creating an application context. Another suggestion is to add a mocked `Subscriber` bean to the test application context by using `@MockBean` annotation, e.g.\r\n\r\n```java\r\n@MockBean\r\nSubscriber subscriberMock;\r\n```\r\n\r\nCopied from the [@MockBean][1] JavaDoc:\r\n\r\n&gt;  When registered by type, any existing single bean of a matching type (including subclasses) in the context will be replaced by the mock.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/mock/mockito/MockBean.html","title":"How to resolve java.lang.IllegalStateException: Failed to load ApplicationContext error","body":"<p>One option is to potentially rewrite the unit test such that it only tests a specific class, i.e. without creating an application context. Another suggestion is to add a mocked <code>Subscriber</code> bean to the test application context by using <code>@MockBean</code> annotation, e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@MockBean\nSubscriber subscriberMock;\n</code></pre>\n<p>Copied from the <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/mock/mockito/MockBean.html\" rel=\"nofollow noreferrer\">@MockBean</a> JavaDoc:</p>\n<blockquote>\n<p>When registered by type, any existing single bean of a matching type (including subclasses) in the context will be replaced by the mock.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":12377600,"reputation":565,"user_id":9024680,"display_name":"stackUser"},"score":0,"creation_date":1690867035,"post_id":76804754,"comment_id":135408961,"body_markdown":"tried with ContextConfiguration but getting error. Could you please check updated details.","body":"tried with ContextConfiguration but getting error. Could you please check updated details."},{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1690872590,"post_id":76804754,"comment_id":135409794,"body_markdown":"@stackUser, check this answer - https://stackoverflow.com/a/27979838/22270964","body":"@stackUser, check this answer - <a href=\"https://stackoverflow.com/a/27979838/22270964\">stackoverflow.com/a/27979838/22270964</a>"},{"owner":{"account_id":12377600,"reputation":565,"user_id":9024680,"display_name":"stackUser"},"score":0,"creation_date":1690873032,"post_id":76804754,"comment_id":135409880,"body_markdown":"I had reverse situation and its resolved using Import(GcpPubSubConfig.class) at testClass level. Please check updated details","body":"I had reverse situation and its resolved using Import(GcpPubSubConfig.class) at testClass level. Please check updated details"},{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1690873243,"post_id":76804754,"comment_id":135409921,"body_markdown":"Glad to hear it!","body":"Glad to hear it!"}],"tags":[],"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691132706,"creation_date":1690814829,"answer_id":76804754,"question_id":76803098,"body_markdown":"If you are using pure spring without boot you can still have two options.\r\n\r\n\r\nThe first one is to use `Mockito` to mock a problematic bean, for example:\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    @ContextConfiguration(classes = {/** your configuration class **/})\r\n    class SomeTest {\r\n    \r\n        @Mock\r\n        private Subscriber subscriber;\r\n        \r\n        // tests are here\r\n    }\r\n\r\nThis is the simplest example. If your bean is injected into another beans that you want to test, this will require additional manipulations of the test, such as using `@InjectMocks` or more complex things.\r\n\r\n\r\nThe second one is to use a test context configuration to change bean creation code, for example:\r\n\r\n    @ExtendWith(SpringExtension.class)\r\n    @ContextConfiguration(classes = {/** your configuration class **/, SomeTest.TestConfiguration.class})\r\n    class SomeTest {\r\n\r\n        @Configuration\r\n        public static class TestConfiguration {\r\n    \r\n            @Bean\r\n            public Subscriber consumeMessage() {\r\n                // some dummy test building logic is here\r\n                return subscriber\r\n            }\r\n        }\r\n\r\n        @Autowired\r\n        private Subscriber subscriber;\r\n    \r\n        // tests are here\r\n    }\r\n\r\nTo demonstrate these abilities, I pushed a working example on my [github][1]\r\n\r\n\r\n  [1]: https://github.com/elimxim/so-spring-mock-bean","title":"How to resolve java.lang.IllegalStateException: Failed to load ApplicationContext error","body":"<p>If you are using pure spring without boot you can still have two options.</p>\n<p>The first one is to use <code>Mockito</code> to mock a problematic bean, for example:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\n@ContextConfiguration(classes = {/** your configuration class **/})\nclass SomeTest {\n\n    @Mock\n    private Subscriber subscriber;\n    \n    // tests are here\n}\n</code></pre>\n<p>This is the simplest example. If your bean is injected into another beans that you want to test, this will require additional manipulations of the test, such as using <code>@InjectMocks</code> or more complex things.</p>\n<p>The second one is to use a test context configuration to change bean creation code, for example:</p>\n<pre><code>@ExtendWith(SpringExtension.class)\n@ContextConfiguration(classes = {/** your configuration class **/, SomeTest.TestConfiguration.class})\nclass SomeTest {\n\n    @Configuration\n    public static class TestConfiguration {\n\n        @Bean\n        public Subscriber consumeMessage() {\n            // some dummy test building logic is here\n            return subscriber\n        }\n    }\n\n    @Autowired\n    private Subscriber subscriber;\n\n    // tests are here\n}\n</code></pre>\n<p>To demonstrate these abilities, I pushed a working example on my <a href=\"https://github.com/elimxim/so-spring-mock-bean\" rel=\"nofollow noreferrer\">github</a></p>\n"}],"owner":{"account_id":12377600,"reputation":565,"user_id":9024680,"display_name":"stackUser"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":629,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1691132706,"creation_date":1690802267,"question_id":76803098,"body_markdown":"I have a config class with below bean creation in that\r\n\r\n    @Bean\r\n    public Subscriber consumeMessage() {\r\n        LOGGER.debug( &quot;Subscriber bean created&quot; );\r\n        //here is some custom logic and as it does not find actual credential file its giving error and failed to create bean at app start.\r\n\r\n        return subscriber;\r\n    }\r\n\r\nLooks like spring is trying to create and load all beans before running unit test and above bean creation is failing due to some business logic.\r\n\r\nNote: Its pure Spring based app not spring-boot\r\n\r\n        java.lang.IllegalStateException: Failed to load ApplicationContext\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:145) [spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_362]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_362]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_362]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_362]\r\n    \tat org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:104) [testng-6.10.jar:na]\r\n    \tat org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:515) [testng-6.10.jar:na]\r\n    \tat org.testng.internal.Invoker.invokeConfigurations(Invoker.java:217) [testng-6.10.jar:na]\r\n    \tat org.testng.internal.Invoker.invokeConfigurations(Invoker.java:144) [testng-6.10.jar:na]\r\n    \tat org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:169) [testng-6.10.jar:na]\r\n    \tat org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:108) [testng-6.10.jar:na]\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_362]\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_362]\r\n    \tat java.lang.Thread.run(Thread.java:750) [na:1.8.0_362]\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;consumeMessage&#39; defined in com.teams.docu.config.GcpPubSubConfiguration: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.google.cloud.pubsub.v1.Subscriber]: Factory method &#39;consumeMessage&#39; threw exception; nested exception is BusinessServiceException [details=ExceptionDetails [type=AUTHENTICATION_EXCEPTION, severity=ERROR, errorcode=gcp.credentials.read.error, args=null, validationErrors=null, namedParameters=[]]]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:627) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:456) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863) ~[spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546) ~[spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:128) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:275) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:243) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \t... 18 common frames omitted\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.google.cloud.pubsub.v1.Subscriber]: Factory method &#39;consumeMessage&#39; threw exception; nested exception is BusinessServiceException [details=ExceptionDetails [type=AUTHENTICATION_EXCEPTION, severity=ERROR, errorcode=gcp.credentials.read.error, args=null, validationErrors=null, namedParameters=[]]]\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \t... 36 common frames omitted\r\n    Caused by: com.teams.docu.exception.BusinessServiceException: GCP Credential cannot be created from the stream\r\n    \tat com.teams.docu.service.util.GCPUtil.getGoogleCredentials(GCPUtil.java:89) ~[classes/:na]\r\n    \tat com.teams.docu.config.GcpPubSubConfiguration.getSubscriber(GcpPubSubConfiguration.java:54) ~[classes/:na]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_362]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_362]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_362]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_362]\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \t... 37 common frames omitted\r\n    Caused by: java.io.FileNotFoundException: dummyFileLocation (No such file or directory)\r\n    \tat java.io.FileInputStream.open0(Native Method) ~[na:1.8.0_362]\r\n    \tat java.io.FileInputStream.open(FileInputStream.java:195) ~[na:1.8.0_362]\r\n    \tat java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:138) ~[na:1.8.0_362]\r\n    \tat java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:93) ~[na:1.8.0_362]\r\n    \tat com.teams.docu.service.util.GCPUtil.getGoogleCredentials(GCPUtil.java:87) ~[classes/:na]\r\n    \t... 49 common frames omitted\r\n\r\n \r\nHow to skip/mock the @Configuration class @Bean creation in spring while running unit test.\r\n\r\nUpdates: I have tried with @ContextConfiguration and below is my test class that I can update\r\n\r\n        @ContextConfiguration(classes = GcpPubSubConfig.class)\r\n    public class ServiceImplTest\r\n        extends AbstractTestService&lt;TService&gt; {\r\n    }\r\n        \r\nBelow is framework/common class that we are using while writing unit test that I cant change.\r\n\r\n        @ContextConfiguration(locations = {\r\n        &quot;classpath:docu-service.xml&quot;\r\n    })\r\n    public abstract class AbstractTestService&lt;T&gt;\r\n        extends AbstractTestNGSpringContextTests {\r\n}\r\n\r\n but getting following error as the the framework we are using(AbstractTestService) its already using @ContextConfiguration with locations\r\n\r\n            java.lang.IllegalStateException: Failed to load ApplicationContext\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:145) [spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_362]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_362]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_362]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_362]\r\n    \tat org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:104) [testng-6.10.jar:na]\r\n    \tat org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:515) [testng-6.10.jar:na]\r\n    \tat org.testng.internal.Invoker.invokeConfigurations(Invoker.java:217) [testng-6.10.jar:na]\r\n    \tat org.testng.internal.Invoker.invokeConfigurations(Invoker.java:144) [testng-6.10.jar:na]\r\n    \tat org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:169) [testng-6.10.jar:na]\r\n    \tat org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:108) [testng-6.10.jar:na]\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_362]\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_362]\r\n    \tat java.lang.Thread.run(Thread.java:750) [na:1.8.0_362]\r\n    Caused by: java.lang.IllegalStateException: Neither GenericXmlContextLoader nor AnnotationConfigContextLoader supports loading an ApplicationContext from [MergedContextConfiguration@7ea731f8 testClass = ServiceImplTest, locations = &#39;{classpath:docu-service.xml}&#39;, classes = &#39;{class com.docu.analytic.service.impl.GcpPubSubConfig}&#39;, contextInitializerClasses = &#39;[]&#39;, activeProfiles = &#39;{}&#39;, propertySourceLocations = &#39;{}&#39;, propertySourceProperties = &#39;{}&#39;, contextCustomizers = set[[empty]], contextLoader = &#39;org.springframework.test.context.support.DelegatingSmartContextLoader&#39;, parent = [null]]: declare either &#39;locations&#39; or &#39;classes&#39; but not both.\r\n    \tat org.springframework.util.Assert.state(Assert.java:94) ~[spring-core-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:233) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \t... 18 common frames omitted\r\n    Tests run: 5, Failures: 1, Errors: 0, Skipped: 4, Time elapsed: 2.019 sec &lt;&lt;&lt; FAILURE! - in com.docu.analytic.service.impl.ServiceImplTest\r\n    springTestContextPrepareTestInstance(com.docu.analytic.service.impl.ServiceImplTest)  Time elapsed: 1.955 sec  &lt;&lt;&lt; FAILURE!\r\n    java.lang.IllegalStateException: Failed to load ApplicationContext\r\n    Caused by: java.lang.IllegalStateException: Neither GenericXmlContextLoader nor AnnotationConfigContextLoader supports loading an ApplicationContext from [MergedContextConfiguration@7ea731f8 testClass = ServiceImplTest, locations = &#39;{classpath:docu-service.xml}&#39;, classes = &#39;{class com.docu.analytic.service.impl.GcpPubSubConfig}&#39;, contextInitializerClasses = &#39;[]&#39;, activeProfiles = &#39;{}&#39;, propertySourceLocations = &#39;{}&#39;, propertySourceProperties = &#39;{}&#39;, contextCustomizers = set[[empty]], contextLoader = &#39;org.springframework.test.context.support.DelegatingSmartContextLoader&#39;, parent = [null]]: declare either &#39;locations&#39; or &#39;classes&#39; but not both.\r\n\r\nUpdates: I have updated my test class as below and I am able to resolve the **&quot;declare either &#39;locations&#39; or &#39;classes&#39; but not both&quot;** error\r\n\r\n        @Import(GcpPubSubConfig.class)\r\n    public class ServiceImplTest\r\n        extends AbstractTestService&lt;GreenButtonConnectService&gt; {","title":"How to resolve java.lang.IllegalStateException: Failed to load ApplicationContext error","body":"<p>I have a config class with below bean creation in that</p>\n<pre><code>@Bean\npublic Subscriber consumeMessage() {\n    LOGGER.debug( &quot;Subscriber bean created&quot; );\n    //here is some custom logic and as it does not find actual credential file its giving error and failed to create bean at app start.\n\n    return subscriber;\n}\n</code></pre>\n<p>Looks like spring is trying to create and load all beans before running unit test and above bean creation is failing due to some business logic.</p>\n<p>Note: Its pure Spring based app not spring-boot</p>\n<pre><code>    java.lang.IllegalStateException: Failed to load ApplicationContext\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:145) [spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_362]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_362]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_362]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_362]\n    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:104) [testng-6.10.jar:na]\n    at org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:515) [testng-6.10.jar:na]\n    at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:217) [testng-6.10.jar:na]\n    at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:144) [testng-6.10.jar:na]\n    at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:169) [testng-6.10.jar:na]\n    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:108) [testng-6.10.jar:na]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_362]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_362]\n    at java.lang.Thread.run(Thread.java:750) [na:1.8.0_362]\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'consumeMessage' defined in com.teams.docu.config.GcpPubSubConfiguration: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.google.cloud.pubsub.v1.Subscriber]: Factory method 'consumeMessage' threw exception; nested exception is BusinessServiceException [details=ExceptionDetails [type=AUTHENTICATION_EXCEPTION, severity=ERROR, errorcode=gcp.credentials.read.error, args=null, validationErrors=null, namedParameters=[]]]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:627) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:456) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863) ~[spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546) ~[spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:128) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:275) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:243) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    ... 18 common frames omitted\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.google.cloud.pubsub.v1.Subscriber]: Factory method 'consumeMessage' threw exception; nested exception is BusinessServiceException [details=ExceptionDetails [type=AUTHENTICATION_EXCEPTION, severity=ERROR, errorcode=gcp.credentials.read.error, args=null, validationErrors=null, namedParameters=[]]]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    ... 36 common frames omitted\nCaused by: com.teams.docu.exception.BusinessServiceException: GCP Credential cannot be created from the stream\n    at com.teams.docu.service.util.GCPUtil.getGoogleCredentials(GCPUtil.java:89) ~[classes/:na]\n    at com.teams.docu.config.GcpPubSubConfiguration.getSubscriber(GcpPubSubConfiguration.java:54) ~[classes/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_362]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_362]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_362]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_362]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    ... 37 common frames omitted\nCaused by: java.io.FileNotFoundException: dummyFileLocation (No such file or directory)\n    at java.io.FileInputStream.open0(Native Method) ~[na:1.8.0_362]\n    at java.io.FileInputStream.open(FileInputStream.java:195) ~[na:1.8.0_362]\n    at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:138) ~[na:1.8.0_362]\n    at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:93) ~[na:1.8.0_362]\n    at com.teams.docu.service.util.GCPUtil.getGoogleCredentials(GCPUtil.java:87) ~[classes/:na]\n    ... 49 common frames omitted\n</code></pre>\n<p>How to skip/mock the @Configuration class @Bean creation in spring while running unit test.</p>\n<p>Updates: I have tried with @ContextConfiguration and below is my test class that I can update</p>\n<pre><code>    @ContextConfiguration(classes = GcpPubSubConfig.class)\npublic class ServiceImplTest\n    extends AbstractTestService&lt;TService&gt; {\n}\n    \n</code></pre>\n<p>Below is framework/common class that we are using while writing unit test that I cant change.</p>\n<pre><code>    @ContextConfiguration(locations = {\n    &quot;classpath:docu-service.xml&quot;\n})\npublic abstract class AbstractTestService&lt;T&gt;\n    extends AbstractTestNGSpringContextTests {\n</code></pre>\n<p>}</p>\n<p>but getting following error as the the framework we are using(AbstractTestService) its already using @ContextConfiguration with locations</p>\n<pre><code>        java.lang.IllegalStateException: Failed to load ApplicationContext\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:145) [spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_362]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_362]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_362]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_362]\n    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:104) [testng-6.10.jar:na]\n    at org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:515) [testng-6.10.jar:na]\n    at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:217) [testng-6.10.jar:na]\n    at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:144) [testng-6.10.jar:na]\n    at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:169) [testng-6.10.jar:na]\n    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:108) [testng-6.10.jar:na]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_362]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_362]\n    at java.lang.Thread.run(Thread.java:750) [na:1.8.0_362]\nCaused by: java.lang.IllegalStateException: Neither GenericXmlContextLoader nor AnnotationConfigContextLoader supports loading an ApplicationContext from [MergedContextConfiguration@7ea731f8 testClass = ServiceImplTest, locations = '{classpath:docu-service.xml}', classes = '{class com.docu.analytic.service.impl.GcpPubSubConfig}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]: declare either 'locations' or 'classes' but not both.\n    at org.springframework.util.Assert.state(Assert.java:94) ~[spring-core-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:233) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    ... 18 common frames omitted\nTests run: 5, Failures: 1, Errors: 0, Skipped: 4, Time elapsed: 2.019 sec &lt;&lt;&lt; FAILURE! - in com.docu.analytic.service.impl.ServiceImplTest\nspringTestContextPrepareTestInstance(com.docu.analytic.service.impl.ServiceImplTest)  Time elapsed: 1.955 sec  &lt;&lt;&lt; FAILURE!\njava.lang.IllegalStateException: Failed to load ApplicationContext\nCaused by: java.lang.IllegalStateException: Neither GenericXmlContextLoader nor AnnotationConfigContextLoader supports loading an ApplicationContext from [MergedContextConfiguration@7ea731f8 testClass = ServiceImplTest, locations = '{classpath:docu-service.xml}', classes = '{class com.docu.analytic.service.impl.GcpPubSubConfig}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]: declare either 'locations' or 'classes' but not both.\n</code></pre>\n<p>Updates: I have updated my test class as below and I am able to resolve the <strong>&quot;declare either 'locations' or 'classes' but not both&quot;</strong> error</p>\n<pre><code>    @Import(GcpPubSubConfig.class)\npublic class ServiceImplTest\n    extends AbstractTestService&lt;GreenButtonConnectService&gt; {\n</code></pre>\n"},{"tags":["java","apache-kafka","apache-kafka-connect"],"owner":{"account_id":29107629,"reputation":21,"user_id":22298043,"display_name":"양형욱"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691132675,"creation_date":1690879098,"question_id":76809874,"body_markdown":"As described in Kafka confluent:\r\n\r\n&gt; As described in Installing Connect Plugins, connector plugin JAR files are placed in the plugin path (Connect worker property: plugin.path). However, a few connectors may require that you additionally export the CLASSPATH to the plugin JAR files when starting the connector (`export CLASSPATH=&lt;path-to-jar-files&gt;`). While not recommended, **CLASSPATH** is required for these connectors because Kafka Connect uses classloading isolation to distinguish between system classes and regular classes, and some plugins load system classes (for example, `javax.naming` and others in the package **javax**). An example error message showing this issue is provided below. If you see an error that resembles the example below, in addition to adding the plugin path, you must also `export CLASSPATH=&lt;path-to-jar-files&gt;` when starting the connector.\r\n\r\nOne thing I don&#39;t understand is that when the plug-in class loader that operates as child first tries to load a system class and cannot find a class, it delegates to the parent class loader, which is the system class loader, so that the system class can be loaded. I don&#39;t know why classpath has to be specified.\r\n\r\n","title":"Kafka Connect plugin classpath","body":"<p>As described in Kafka confluent:</p>\n<blockquote>\n<p>As described in Installing Connect Plugins, connector plugin JAR files are placed in the plugin path (Connect worker property: plugin.path). However, a few connectors may require that you additionally export the CLASSPATH to the plugin JAR files when starting the connector (<code>export CLASSPATH=&lt;path-to-jar-files&gt;</code>). While not recommended, <strong>CLASSPATH</strong> is required for these connectors because Kafka Connect uses classloading isolation to distinguish between system classes and regular classes, and some plugins load system classes (for example, <code>javax.naming</code> and others in the package <strong>javax</strong>). An example error message showing this issue is provided below. If you see an error that resembles the example below, in addition to adding the plugin path, you must also <code>export CLASSPATH=&lt;path-to-jar-files&gt;</code> when starting the connector.</p>\n</blockquote>\n<p>One thing I don't understand is that when the plug-in class loader that operates as child first tries to load a system class and cannot find a class, it delegates to the parent class loader, which is the system class loader, so that the system class can be loaded. I don't know why classpath has to be specified.</p>\n"},{"tags":["java","aws-java-sdk","aws-java-sdk-2.x"],"owner":{"account_id":405356,"reputation":31611,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691132520,"creation_date":1691106570,"question_id":76832209,"body_markdown":"I&#39;ve been looking at the documentation for the [AWS SDK for Java][1] and I&#39;m trying to find  how one can download the monthly invoices using this SDK. Is it at all possible or am I chasing my tail here?\r\n\r\nIf this is not supported, are there any alternatives I could use?\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/home.html","title":"Is it possible to download invoices from AWS billing using the sdk-for-java and if so, how?","body":"<p>I've been looking at the documentation for the <a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/home.html\" rel=\"nofollow noreferrer\">AWS SDK for Java</a> and I'm trying to find  how one can download the monthly invoices using this SDK. Is it at all possible or am I chasing my tail here?</p>\n<p>If this is not supported, are there any alternatives I could use?</p>\n"},{"tags":["java","lambda","checked-exceptions","java-8"],"comments":[{"owner":{"account_id":29398,"reputation":10394,"user_id":1859863,"display_name":"Maurice Naftalin"},"score":3,"creation_date":1356533425,"post_id":14039995,"comment_id":19400298,"body_markdown":"For anyone following the evolution of the lambdas API, it&#39;s worth noting that java.util.functions.Factory::make is now java.util.function.Supplier::get. You can see an up-to-date version of the API docs at http://lambdadoc.net, a subsite of the [Lambda FAQ] (http://lambdafaq.org)","body":"For anyone following the evolution of the lambdas API, it&#39;s worth noting that java.util.functions.Factory::make is now java.util.function.Supplier::get. You can see an up-to-date version of the API docs at <a href=\"http://lambdadoc.net\" rel=\"nofollow noreferrer\">lambdadoc.net</a>, a subsite of the [Lambda FAQ] (<a href=\"http://lambdafaq.org\" rel=\"nofollow noreferrer\">lambdafaq.org</a>)"},{"owner":{"account_id":55617,"reputation":20495,"user_id":166589,"accept_rate":91,"display_name":"Lyubomyr Shaydariv"},"score":0,"creation_date":1356533959,"post_id":14039995,"comment_id":19400481,"body_markdown":"@MauriceNaftalin, thanks for the comment. I currently use OpenJDK 1.8.0-EA.","body":"@MauriceNaftalin, thanks for the comment. I currently use OpenJDK 1.8.0-EA."},{"owner":{"account_id":42255,"reputation":8377,"user_id":123054,"accept_rate":83,"display_name":"Matt"},"score":1,"creation_date":1356546142,"post_id":14039995,"comment_id":19404362,"body_markdown":"one approach is given in [this blog](http://java8blog.com/post/37385501926/fixing-checked-exceptions-in-java-8)","body":"one approach is given in <a href=\"http://java8blog.com/post/37385501926/fixing-checked-exceptions-in-java-8\" rel=\"nofollow noreferrer\">this blog</a>"},{"owner":{"account_id":1416522,"reputation":91364,"user_id":3553087,"display_name":"Brian Goetz"},"score":3,"creation_date":1421101622,"post_id":14039995,"comment_id":44223163,"body_markdown":"The exception transparency writeup to which you refer was simply a candidate proposal, which was later deemed to be flawed after examination in greater detail.","body":"The exception transparency writeup to which you refer was simply a candidate proposal, which was later deemed to be flawed after examination in greater detail."},{"owner":{"account_id":428741,"reputation":3863,"user_id":811257,"display_name":"kopelitsa"},"score":0,"creation_date":1462788990,"post_id":14039995,"comment_id":61767635,"body_markdown":"@Matt the link is broken","body":"@Matt the link is broken"}],"answers":[{"comments":[{"owner":{"account_id":55617,"reputation":20495,"user_id":166589,"accept_rate":91,"display_name":"Lyubomyr Shaydariv"},"score":3,"creation_date":1356553631,"post_id":14045585,"comment_id":19406644,"body_markdown":"Thanks! Yes, your approach seems to be a possible solution in the terms of current Java 8 features (this also was suggested by Matt in a post comment via Guava Throwables http://java8blog.com/post/37385501926/fixing-checked-exceptions-in-java-8 ). It also seems to be the most elegant solution, but, I guess you also agree, that&#39;s a little boiler-plate. Brian Goetz in 2010 tried something to solve this problem using something like _variadic type parameters_, and probably Java will get this fixed somehow, who knows.","body":"Thanks! Yes, your approach seems to be a possible solution in the terms of current Java 8 features (this also was suggested by Matt in a post comment via Guava Throwables <a href=\"http://java8blog.com/post/37385501926/fixing-checked-exceptions-in-java-8\" rel=\"nofollow noreferrer\">java8blog.com/post/37385501926/&hellip;</a> ). It also seems to be the most elegant solution, but, I guess you also agree, that&#39;s a little boiler-plate. Brian Goetz in 2010 tried something to solve this problem using something like <i>variadic type parameters</i>, and probably Java will get this fixed somehow, who knows."},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":11,"creation_date":1392498332,"post_id":14045585,"comment_id":32993467,"body_markdown":"Yet another great example of checked exception abuse. Wrapping the exception in RuntimeException might be necessary in this case, but failing to unwrap it again on the outside defeats the entire point of checked exceptions. Please take the time to read why checked exceptions exist and when they should be used: http://stackoverflow.com/a/19061110/14731","body":"Yet another great example of checked exception abuse. Wrapping the exception in RuntimeException might be necessary in this case, but failing to unwrap it again on the outside defeats the entire point of checked exceptions. Please take the time to read why checked exceptions exist and when they should be used: <a href=\"http://stackoverflow.com/a/19061110/14731\">stackoverflow.com/a/19061110/14731</a>"},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":17,"creation_date":1395397128,"post_id":14045585,"comment_id":34329611,"body_markdown":"@Gili Checked exceptions are an abuse of programmer, not vice versa. They promote boilerplate code, incidental complexity, and downright programming errors. They break program flow, especially because `try-catch` is a statement and not an expression. Wrapping exceptions is a) a nuisance, b) little more than a hack and work around the basic misdesign.","body":"@Gili Checked exceptions are an abuse of programmer, not vice versa. They promote boilerplate code, incidental complexity, and downright programming errors. They break program flow, especially because <code>try-catch</code> is a statement and not an expression. Wrapping exceptions is a) a nuisance, b) little more than a hack and work around the basic misdesign."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":7,"creation_date":1395397159,"post_id":14045585,"comment_id":34329627,"body_markdown":"99% of real-life program logic requires checked and unchecked exceptions alike to break the current unit of work and have them uniformly handled at the top-level exception barrier. Those rare cases where the exception is a part of regular program logic are not something that the programmer will tend to miss, and would need the compiler to tell him.","body":"99% of real-life program logic requires checked and unchecked exceptions alike to break the current unit of work and have them uniformly handled at the top-level exception barrier. Those rare cases where the exception is a part of regular program logic are not something that the programmer will tend to miss, and would need the compiler to tell him."},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1395439471,"post_id":14045585,"comment_id":34355939,"body_markdown":"@MarkoTopolnik, I respectfully disagree. Coming from a `C` world, I can tell you that most programmers ignore error codes returned by functions, even if they&#39;re part of the &quot;regular program logic&quot;. I get the fact that you don&#39;t like **any** exceptions, be they checked or unchecked, but that doesn&#39;t mean the rest of all have to follow suit. As for handling all exceptions at a &quot;top-level exception barrier&quot;, it sounds to me like you&#39;re just catching unrecoverable exceptions. You cannot do anything meaningful at a high-level with most recoverable exceptions.","body":"@MarkoTopolnik, I respectfully disagree. Coming from a <code>C</code> world, I can tell you that most programmers ignore error codes returned by functions, even if they&#39;re part of the &quot;regular program logic&quot;. I get the fact that you don&#39;t like <b>any</b> exceptions, be they checked or unchecked, but that doesn&#39;t mean the rest of all have to follow suit. As for handling all exceptions at a &quot;top-level exception barrier&quot;, it sounds to me like you&#39;re just catching unrecoverable exceptions. You cannot do anything meaningful at a high-level with most recoverable exceptions."},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1395439596,"post_id":14045585,"comment_id":34356011,"body_markdown":"@MarkoTopolnik, for example: if a user tries opening a non-existent file it would make no sense to handle it at some &quot;top level exception-barrrier&quot;. You&#39;d need to handle it at the deepest level and prompt the user for a new path.","body":"@MarkoTopolnik, for example: if a user tries opening a non-existent file it would make no sense to handle it at some &quot;top level exception-barrrier&quot;. You&#39;d need to handle it at the deepest level and prompt the user for a new path."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":3,"creation_date":1395439797,"post_id":14045585,"comment_id":34356099,"body_markdown":"@Gili Your example is precisely that *rare case* which I mention. On the server side such cases are even less frequent. As for your comparison with C, exceptions -- unlike error codes -- can only be ignored *explicitly*, with empty catch-blocks. Funnily enough, that&#39;s exactly what happens when devs are forced to do something about checked exceptions. Your statement that I *don&#39;t like* exceptions sounds like you&#39;re trying to be funny, but I&#39;m sorry for missing the humor.","body":"@Gili Your example is precisely that <i>rare case</i> which I mention. On the server side such cases are even less frequent. As for your comparison with C, exceptions -- unlike error codes -- can only be ignored <i>explicitly</i>, with empty catch-blocks. Funnily enough, that&#39;s exactly what happens when devs are forced to do something about checked exceptions. Your statement that I <i>don&#39;t like</i> exceptions sounds like you&#39;re trying to be funny, but I&#39;m sorry for missing the humor."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1395439899,"post_id":14045585,"comment_id":34356135,"body_markdown":"@Gili At the exception barrier we handle exceptions which break the unit of work---and most do. If any step that needs to be taken fails, the unit of work has failed as well.","body":"@Gili At the exception barrier we handle exceptions which break the unit of work---and most do. If any step that needs to be taken fails, the unit of work has failed as well."},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1395457444,"post_id":14045585,"comment_id":34360766,"body_markdown":"@MarkoTopolnik, what is rare for you is not rare for others. It could very well be that the exceptions you deal with are unrecoverable or unexpected. That&#39;s fine. But there are a whole host of cases where this isn&#39;t the case. If you only want to use unchecked exceptions, that is your right. I would point out that server-side applications are much less likely to be interactive than client-side applications, and as such exceptions are much less likely to be recoverable. That said, try developing client-side applications for a couple of years and your experience will be exactly the opposite.","body":"@MarkoTopolnik, what is rare for you is not rare for others. It could very well be that the exceptions you deal with are unrecoverable or unexpected. That&#39;s fine. But there are a whole host of cases where this isn&#39;t the case. If you only want to use unchecked exceptions, that is your right. I would point out that server-side applications are much less likely to be interactive than client-side applications, and as such exceptions are much less likely to be recoverable. That said, try developing client-side applications for a couple of years and your experience will be exactly the opposite."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":3,"creation_date":1395470130,"post_id":14045585,"comment_id":34363095,"body_markdown":"@gili I have extensive experience developing at both sides and, although there is a slight difference, the ratio of all exceptions vs. those that need to be caught early is still very large. For example, user input is *validated* before acting upon it, and that includes such checks as whether a file exists using `file.exists()`, which makes a subsequent `FileNotFoundException` a strange and unexpected occurrence.","body":"@gili I have extensive experience developing at both sides and, although there is a slight difference, the ratio of all exceptions vs. those that need to be caught early is still very large. For example, user input is <i>validated</i> before acting upon it, and that includes such checks as whether a file exists using <code>file.exists()</code>, which makes a subsequent <code>FileNotFoundException</code> a strange and unexpected occurrence."},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1395495223,"post_id":14045585,"comment_id":34369807,"body_markdown":"@MarkoTopolnik, allow me to introduce you to the possibility of race conditions and I/O errors when reading a file. It doesn&#39;t matter how rare an exception is. It matters that it can and *does* happen in the wild. Having your program crash because of the WIFI connection went down in mid-read is hardly a formula for writing reliable software. Again, you are free to avoid handling such errors if you wish, but implying that everyone should do the same is a different story.","body":"@MarkoTopolnik, allow me to introduce you to the possibility of race conditions and I/O errors when reading a file. It doesn&#39;t matter how rare an exception is. It matters that it can and <i>does</i> happen in the wild. Having your program crash because of the WIFI connection went down in mid-read is hardly a formula for writing reliable software. Again, you are free to avoid handling such errors if you wish, but implying that everyone should do the same is a different story."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":2,"creation_date":1395498282,"post_id":14045585,"comment_id":34370702,"body_markdown":"@Gili Now you have invented your own claim and assigned it to me. Where do I claim the application should *crash* in the face of an exception? I said *the current unit of work will be aborted*. Now you tell me, how should the current unit of work *continue* when the WiFi connection is lost? If you have some heuristics in mind that will keep retrying until the connection is reestablished and so on, then that is indeed an example of a *special case* where exceptions are handled within the unit of work. For most purposes such heuristics are not worth it and simply aborting is good enough.","body":"@Gili Now you have invented your own claim and assigned it to me. Where do I claim the application should <i>crash</i> in the face of an exception? I said <i>the current unit of work will be aborted</i>. Now you tell me, how should the current unit of work <i>continue</i> when the WiFi connection is lost? If you have some heuristics in mind that will keep retrying until the connection is reestablished and so on, then that is indeed an example of a <i>special case</i> where exceptions are handled within the unit of work. For most purposes such heuristics are not worth it and simply aborting is good enough."},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":2,"creation_date":1395590302,"post_id":14045585,"comment_id":34396866,"body_markdown":"@MarkoTopolnik, I withdraw my comment about the software crashing in the face of the WIFI connection going down. We could have a very interesting debate on this topic, but Stackoverflow&#39;s comment system doesn&#39;t work well for this kind of discussion (comments are too short, and too asynchronous). Let&#39;s agree to disagree for now ;)","body":"@MarkoTopolnik, I withdraw my comment about the software crashing in the face of the WIFI connection going down. We could have a very interesting debate on this topic, but Stackoverflow&#39;s comment system doesn&#39;t work well for this kind of discussion (comments are too short, and too asynchronous). Let&#39;s agree to disagree for now ;)"},{"owner":{"account_id":46836,"reputation":12142,"user_id":138513,"accept_rate":46,"display_name":"Hakanai"},"score":1,"creation_date":1417993414,"post_id":14045585,"comment_id":43152488,"body_markdown":"@Gili surely this specific example is not recoverable anyway. In pretty much any system I have seen, if DriverManager.getConnection fails, something is seriously wrong. If you&#39;re in a webapp, the odds are the configuration is incorrect. If you&#39;re in a GUI app, the odds are you&#39;re using an embedded database and hard-coding the path. So I would never expect getConnection to throw - yet the API forces us to catch it for no good reason. Checked exceptions may have had a theoretical use case, but their inconsistent application in the JRE has made them worse than useless.","body":"@Gili surely this specific example is not recoverable anyway. In pretty much any system I have seen, if DriverManager.getConnection fails, something is seriously wrong. If you&#39;re in a webapp, the odds are the configuration is incorrect. If you&#39;re in a GUI app, the odds are you&#39;re using an embedded database and hard-coding the path. So I would never expect getConnection to throw - yet the API forces us to catch it for no good reason. Checked exceptions may have had a theoretical use case, but their inconsistent application in the JRE has made them worse than useless."},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1418083700,"post_id":14045585,"comment_id":43190362,"body_markdown":"@Trejkaz, you&#39;re using a strawman argument. If you read http://stackoverflow.com/questions/27578/when-to-choose-checked-and-unchecked-exceptions/19061110#19061110 you&#39;ll see I highlight SQLException as one of the most abused exceptions around. Checked exceptions have a place, but SQLException is not it.","body":"@Trejkaz, you&#39;re using a strawman argument. If you read <a href=\"http://stackoverflow.com/questions/27578/when-to-choose-checked-and-unchecked-exceptions/19061110#19061110\" title=\"when to choose checked and unchecked exceptions\">stackoverflow.com/questions/27578/&hellip;</a> you&#39;ll see I highlight SQLException as one of the most abused exceptions around. Checked exceptions have a place, but SQLException is not it."},{"owner":{"account_id":46836,"reputation":12142,"user_id":138513,"accept_rate":46,"display_name":"Hakanai"},"score":1,"creation_date":1418092072,"post_id":14045585,"comment_id":43192573,"body_markdown":"@Gili A &quot;strawman argument&quot; is an argument where I construct one example of a case where my viewpoint is correct and then use it to imply that my viewpoint is correct. The code fragment above uses SQLException, so I believe that in this situation, I am not using a strawman argument as I did not provide the example. Note that I did not say that checked exceptions are useless. I specifically said that checked exceptions **in Java** are worse than useless. Which is still correct.","body":"@Gili A &quot;strawman argument&quot; is an argument where I construct one example of a case where my viewpoint is correct and then use it to imply that my viewpoint is correct. The code fragment above uses SQLException, so I believe that in this situation, I am not using a strawman argument as I did not provide the example. Note that I did not say that checked exceptions are useless. I specifically said that checked exceptions <b>in Java</b> are worse than useless. Which is still correct."},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1418106095,"post_id":14045585,"comment_id":43196152,"body_markdown":"@Trejkaz, not all exceptions are `SQLException` yet you seem to be extrapolate from the abusive usage of `SQLException` to saying all checked exceptions in Java are &quot;worse than useless&quot;. I am saying that the first point does not imply the second point.","body":"@Trejkaz, not all exceptions are <code>SQLException</code> yet you seem to be extrapolate from the abusive usage of <code>SQLException</code> to saying all checked exceptions in Java are &quot;worse than useless&quot;. I am saying that the first point does not imply the second point."},{"owner":{"account_id":46836,"reputation":12142,"user_id":138513,"accept_rate":46,"display_name":"Hakanai"},"score":1,"creation_date":1418278152,"post_id":14045585,"comment_id":43276524,"body_markdown":"@Gili Okay, let&#39;s flip this around. Can you even name one checked exception in the JRE which is applied consistently and correctly throughout the JRE? I would be interested in hearing your counter-example, because I have not actually discovered a single one yet. (And anyway, I didn&#39;t extrapolate from abusive usage of one exception. I extrapolated from a 15 year experience of running into all the other cases where they couldn&#39;t seem to get it right.)","body":"@Gili Okay, let&#39;s flip this around. Can you even name one checked exception in the JRE which is applied consistently and correctly throughout the JRE? I would be interested in hearing your counter-example, because I have not actually discovered a single one yet. (And anyway, I didn&#39;t extrapolate from abusive usage of one exception. I extrapolated from a 15 year experience of running into all the other cases where they couldn&#39;t seem to get it right.)"},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1418365899,"post_id":14045585,"comment_id":43316301,"body_markdown":"@Trejkaz `java.io.FileNotFoundException` comes to mind. As do any I/O operations where it&#39;s reasonable to retry on failure (or ask the user for an alternative file). `SQLException` typically maps to programming errors, but `IOException` typically maps to runtime errors outside the programmer&#39;s control (and in many cases, these failures are recoverable).","body":"@Trejkaz <code>java.io.FileNotFoundException</code> comes to mind. As do any I/O operations where it&#39;s reasonable to retry on failure (or ask the user for an alternative file). <code>SQLException</code> typically maps to programming errors, but <code>IOException</code> typically maps to runtime errors outside the programmer&#39;s control (and in many cases, these failures are recoverable)."},{"owner":{"account_id":46836,"reputation":12142,"user_id":138513,"accept_rate":46,"display_name":"Hakanai"},"score":1,"creation_date":1418682992,"post_id":14045585,"comment_id":43420552,"body_markdown":"I disagree with that case. When the user enters a file path, it is _expected_ they they can enter an invalid path. Since there is a general rule not use exceptions for normal flow control, in this situation I would check that the file exists before opening it. Therefore, having a FileNotFoundException on constructors of stream classes is just a nuisance to me - a second place I will have to catch.","body":"I disagree with that case. When the user enters a file path, it is <i>expected</i> they they can enter an invalid path. Since there is a general rule not use exceptions for normal flow control, in this situation I would check that the file exists before opening it. Therefore, having a FileNotFoundException on constructors of stream classes is just a nuisance to me - a second place I will have to catch."},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1418683189,"post_id":14045585,"comment_id":43420646,"body_markdown":"@Trejkaz the problem is that you can&#39;t have any guarantee that, after you&#39;ve checked the file existed and you decide to open it, it still exists. Yo need to take race conditions into account.","body":"@Trejkaz the problem is that you can&#39;t have any guarantee that, after you&#39;ve checked the file existed and you decide to open it, it still exists. Yo need to take race conditions into account."},{"owner":{"account_id":46836,"reputation":12142,"user_id":138513,"accept_rate":46,"display_name":"Hakanai"},"score":1,"creation_date":1418692680,"post_id":14045585,"comment_id":43423723,"body_markdown":"@JBNizet Sure, but I would argue that sort of condition to be relatively rare and thus not something I should have to take care of with boilerplate. :(","body":"@JBNizet Sure, but I would argue that sort of condition to be relatively rare and thus not something I should have to take care of with boilerplate. :("},{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":0,"creation_date":1495682800,"post_id":14045585,"comment_id":75358997,"body_markdown":"@JBNizet After having checked that &quot;foo.xml&quot; exists, many things can go wrong. The file disappearing is what I&#39;d fear least, there may be problems with missing read permissions, failing disk, invalid content or bugs in the parser... and none of the problems can be really solved. All of them must be handled somehow, and I can&#39;t see any outstanding solution for `FileNotFoundException` (offering the user to open &quot;bar.json&quot; instead doesn&#39;t count :D). *All* of the problems may or may not be still present when you retry.","body":"@JBNizet After having checked that &quot;foo.xml&quot; exists, many things can go wrong. The file disappearing is what I&#39;d fear least, there may be problems with missing read permissions, failing disk, invalid content or bugs in the parser... and none of the problems can be really solved. All of them must be handled somehow, and I can&#39;t see any outstanding solution for <code>FileNotFoundException</code> (offering the user to open &quot;bar.json&quot; instead doesn&#39;t count :D). <i>All</i> of the problems may or may not be still present when you retry."},{"owner":{"account_id":2259435,"reputation":275,"user_id":1989863,"accept_rate":55,"display_name":"XZen"},"score":0,"creation_date":1511540599,"post_id":14045585,"comment_id":81908683,"body_markdown":"Do you know if this already implemented in Spring / apache commons etc? I realize it&#39;s a small piece of code but still :D","body":"Do you know if this already implemented in Spring / apache commons etc? I realize it&#39;s a small piece of code but still :D"},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1516815005,"post_id":14045585,"comment_id":83847208,"body_markdown":"It is strange that @JBNizet comes up with a clearly case that proves the point against checked exceptions. If forced to catch an exception after checking for the files existence, many programmers would consume the exception without logging (They DO, I&#39;ve seen it) when they would have ignored it allowing it to be logged if it had been unchecked. Consuming a single checked exception without handling it can cost more developer time than almost any other problem... I&#39;ve actually spent a full week tracking one of those that would have taken minutes if it had been unchecked and therefore logged.","body":"It is strange that @JBNizet comes up with a clearly case that proves the point against checked exceptions. If forced to catch an exception after checking for the files existence, many programmers would consume the exception without logging (They DO, I&#39;ve seen it) when they would have ignored it allowing it to be logged if it had been unchecked. Consuming a single checked exception without handling it can cost more developer time than almost any other problem... I&#39;ve actually spent a full week tracking one of those that would have taken minutes if it had been unchecked and therefore logged."}],"tags":[],"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"comment_count":25,"down_vote_count":0,"up_vote_count":49,"is_accepted":true,"score":49,"last_activity_date":1356552040,"creation_date":1356552040,"answer_id":14045585,"question_id":14039995,"body_markdown":"Not sure I really answer your question, but couldn&#39;t you simply use something like that?\r\n\r\n    public final class SupplierUtils {\r\n        private SupplierUtils() {\r\n        }\r\n    \r\n        public static &lt;T&gt; Supplier&lt;T&gt; wrap(Callable&lt;T&gt; callable) {\r\n            return () -&gt; {\r\n                try {\r\n                    return callable.call();\r\n                }\r\n                catch (RuntimeException e) {\r\n                    throw e;\r\n                }\r\n                catch (Exception e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            };\r\n        }\r\n    }\r\n    \r\n    public class JdbcConnectionPool extends ObjectPool&lt;Connection&gt; {\r\n    \r\n        public JdbcConnectionPool(int maxConnections, String url) {\r\n            super(SupplierUtils.wrap(() -&gt; DriverManager.getConnection(url)), maxConnections);\r\n        }\r\n    }","title":"Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?","body":"<p>Not sure I really answer your question, but couldn't you simply use something like that?</p>\n\n<pre><code>public final class SupplierUtils {\n    private SupplierUtils() {\n    }\n\n    public static &lt;T&gt; Supplier&lt;T&gt; wrap(Callable&lt;T&gt; callable) {\n        return () -&gt; {\n            try {\n                return callable.call();\n            }\n            catch (RuntimeException e) {\n                throw e;\n            }\n            catch (Exception e) {\n                throw new RuntimeException(e);\n            }\n        };\n    }\n}\n\npublic class JdbcConnectionPool extends ObjectPool&lt;Connection&gt; {\n\n    public JdbcConnectionPool(int maxConnections, String url) {\n        super(SupplierUtils.wrap(() -&gt; DriverManager.getConnection(url)), maxConnections);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":55617,"reputation":20495,"user_id":166589,"accept_rate":91,"display_name":"Lyubomyr Shaydariv"},"score":0,"creation_date":1358271334,"post_id":14306376,"comment_id":19937949,"body_markdown":"The wrapping is described just like it could imitate a checked-exception-less `Supplier&lt;T&gt;` instead of `Callable&lt;T&gt;` -- that is a surrogate way and it works for most cases that I was faced with. I personally would change the behavior of lambda expressions / functional interfaces for checked exceptions. But I have doubt that the lambda-dev team will agree to change that behavior for lambda&#39;s. Unfortunately Java checked exceptions are good by intention, but harmful in practice. This is similar to wrapping a checked exception into `RuntimeException` within `try/catch` in every method.","body":"The wrapping is described just like it could imitate a checked-exception-less <code>Supplier&lt;T&gt;</code> instead of <code>Callable&lt;T&gt;</code> -- that is a surrogate way and it works for most cases that I was faced with. I personally would change the behavior of lambda expressions / functional interfaces for checked exceptions. But I have doubt that the lambda-dev team will agree to change that behavior for lambda&#39;s. Unfortunately Java checked exceptions are good by intention, but harmful in practice. This is similar to wrapping a checked exception into <code>RuntimeException</code> within <code>try&#47;catch</code> in every method."},{"owner":{"account_id":2232964,"reputation":11,"user_id":1970126,"display_name":"Waldo auf der Springe"},"score":0,"creation_date":1358374902,"post_id":14306376,"comment_id":19981610,"body_markdown":"Well, there is a way to kind of genericly wrap the checked exception which is slightly more eloborate then described, see my upcoming answer. But still, I agree with you that our programming lives would be better if the compiler would work a bit harder and allow us to throw checked exceptions in our lambdas.\nAs it stands we are deprived of catching specific checked exceptions that occur there, forcing us into ugly cumbersome coding. yuck!","body":"Well, there is a way to kind of genericly wrap the checked exception which is slightly more eloborate then described, see my upcoming answer. But still, I agree with you that our programming lives would be better if the compiler would work a bit harder and allow us to throw checked exceptions in our lambdas. As it stands we are deprived of catching specific checked exceptions that occur there, forcing us into ugly cumbersome coding. yuck!"},{"owner":{"account_id":55617,"reputation":20495,"user_id":166589,"accept_rate":91,"display_name":"Lyubomyr Shaydariv"},"score":0,"creation_date":1358415944,"post_id":14306376,"comment_id":19993387,"body_markdown":"By the way, you can try to suggest your idea for simplified checked exceptions handling to lambda-dev team via their mailing list. If they approve your email (not idea itself) -- you might know their pros and cons for changing the spec, and probably personal ideas and thoughts by Brian Goetz too.","body":"By the way, you can try to suggest your idea for simplified checked exceptions handling to lambda-dev team via their mailing list. If they approve your email (not idea itself) -- you might know their pros and cons for changing the spec, and probably personal ideas and thoughts by Brian Goetz too."},{"owner":{"account_id":2232964,"reputation":11,"user_id":1970126,"display_name":"Waldo auf der Springe"},"score":0,"creation_date":1358541989,"post_id":14306376,"comment_id":20048355,"body_markdown":"Thank you for the tip. I tried that actually, but the suggestion has completely been ignored. The reactions of contributions made regarding checked exceptions don&#39;t look too positive. Nevertheless I hope that people that share these concerns speak out, while there is still some time to repair it. The java lambda looks so good that this deserves fixing.","body":"Thank you for the tip. I tried that actually, but the suggestion has completely been ignored. The reactions of contributions made regarding checked exceptions don&#39;t look too positive. Nevertheless I hope that people that share these concerns speak out, while there is still some time to repair it. The java lambda looks so good that this deserves fixing."}],"tags":[],"owner":{"account_id":2232964,"reputation":11,"user_id":1970126,"display_name":"Waldo auf der Springe"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1358099646,"creation_date":1358099646,"answer_id":14306376,"question_id":14039995,"body_markdown":"Wrapping the exception in the described way does not work. I tried it and I still get compiler errors, which is actually according to the spec: the lambda expression throws the exception which is incompatible with the target type of the method argument: Callable&lt;T&gt;; call() does not throw it so I can not pass the lambda expression as a Callable.\r\n\r\nSo basically there is no solution: we are stuck with writing boilerplate. The only thing we can do is voice our opinion that this needs fixing. I think the spec should not just blindly discard a target type based on incompatible thrown exceptions: it should subsequently check whether the thrown incompatible exception is caught or declared as throws in the invoking scope.\r\nAnd for lambda expressions that are not inlined I propose we can mark them as silently throwing checked exception (silent in the sense that the compiler should not check, but the runtime should still catch).\r\nlet&#39;s mark those with =&gt; as opposed to -&gt;\r\nI know this is not a discussion site, but since this IS the only solution to the question, let yourself be heard and let&#39;s change this spec!","title":"Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?","body":"<p>Wrapping the exception in the described way does not work. I tried it and I still get compiler errors, which is actually according to the spec: the lambda expression throws the exception which is incompatible with the target type of the method argument: Callable; call() does not throw it so I can not pass the lambda expression as a Callable.</p>\n\n<p>So basically there is no solution: we are stuck with writing boilerplate. The only thing we can do is voice our opinion that this needs fixing. I think the spec should not just blindly discard a target type based on incompatible thrown exceptions: it should subsequently check whether the thrown incompatible exception is caught or declared as throws in the invoking scope.\nAnd for lambda expressions that are not inlined I propose we can mark them as silently throwing checked exception (silent in the sense that the compiler should not check, but the runtime should still catch).\nlet's mark those with => as opposed to ->\nI know this is not a discussion site, but since this IS the only solution to the question, let yourself be heard and let's change this spec!</p>\n"},{"comments":[{"owner":{"account_id":55617,"reputation":20495,"user_id":166589,"accept_rate":91,"display_name":"Lyubomyr Shaydariv"},"score":0,"creation_date":1376020802,"post_id":18135318,"comment_id":26566614,"body_markdown":"Thank you for reply. I would really like to prevent explicit `try/catch`ing in lambda expressions because `try/catch` blocks look ugly making the lambdas ugly too. I guess there are at least two reasons of why it cannot work like that so far: 1) the history of Java itself; 2) a method, that&#39;s invoked with a lambda expression having methods with `throws` invocations inside, probably should be &quot;automatically&quot; declared as &quot;`throws` _SomeEx_&quot;, even if the method is declared without any `throws` or it declares to throw exception of another type rather than could be propagated from the lambda.","body":"Thank you for reply. I would really like to prevent explicit <code>try&#47;catch</code>ing in lambda expressions because <code>try&#47;catch</code> blocks look ugly making the lambdas ugly too. I guess there are at least two reasons of why it cannot work like that so far: 1) the history of Java itself; 2) a method, that&#39;s invoked with a lambda expression having methods with <code>throws</code> invocations inside, probably should be &quot;automatically&quot; declared as &quot;<code>throws</code> <i>SomeEx</i>&quot;, even if the method is declared without any <code>throws</code> or it declares to throw exception of another type rather than could be propagated from the lambda."},{"owner":{"account_id":55617,"reputation":20495,"user_id":166589,"accept_rate":91,"display_name":"Lyubomyr Shaydariv"},"score":0,"creation_date":1376021781,"post_id":18135318,"comment_id":26566762,"body_markdown":"3) If it could &quot;swallow&quot; checked exceptions, I think, then it might break your expectations for a checked exception or unchecked exception you might expect to catch in any caller outside. For example, you could expect to catch `IOException` for currently illegal code like `list.forEach(p -&gt; outputStream.write(p.hashCode()))` (`write()` throws `IOException`), but you&#39;d probably couldn&#39;t do it, because `Iterable.forEach()` is not declared as a method throwing `IOException`, so a compiler cannot know of these intentions. Sometimes checked exceptions are really harmful...","body":"3) If it could &quot;swallow&quot; checked exceptions, I think, then it might break your expectations for a checked exception or unchecked exception you might expect to catch in any caller outside. For example, you could expect to catch <code>IOException</code> for currently illegal code like <code>list.forEach(p -&gt; outputStream.write(p.hashCode()))</code> (<code>write()</code> throws <code>IOException</code>), but you&#39;d probably couldn&#39;t do it, because <code>Iterable.forEach()</code> is not declared as a method throwing <code>IOException</code>, so a compiler cannot know of these intentions. Sometimes checked exceptions are really harmful..."},{"owner":{"account_id":515883,"reputation":4966,"user_id":1128668,"accept_rate":54,"display_name":"GlenPeterson"},"score":0,"creation_date":1376060966,"post_id":18135318,"comment_id":26583624,"body_markdown":"I agree.  It would be overkill to provide a second set of java.util.function classes that declare that they throw a (checked) Exception.  Especially since we&#39;d need two versions of every method with a function parameter - one that throws and one that doesn&#39;t.  That goes a long way toward explaining why Scala doesn&#39;t have checked exceptions (only unchecked).  Java 8 is a copy of Scala&#39;s lambdas with a `-&gt;` instead of `=&gt;`.  I wonder if Martin Odersky suggested any of this while he was working at Sun?  I hope Java 9 includes immutable versions of most of their API classes.","body":"I agree.  It would be overkill to provide a second set of java.util.function classes that declare that they throw a (checked) Exception.  Especially since we&#39;d need two versions of every method with a function parameter - one that throws and one that doesn&#39;t.  That goes a long way toward explaining why Scala doesn&#39;t have checked exceptions (only unchecked).  Java 8 is a copy of Scala&#39;s lambdas with a <code>-&gt;</code> instead of <code>=&gt;</code>.  I wonder if Martin Odersky suggested any of this while he was working at Sun?  I hope Java 9 includes immutable versions of most of their API classes."}],"tags":[],"owner":{"account_id":515883,"reputation":4966,"user_id":1128668,"accept_rate":54,"display_name":"GlenPeterson"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1376061085,"creation_date":1375992964,"answer_id":18135318,"question_id":14039995,"body_markdown":"Have you considered using a RuntimeException (unchecked) wrapper class to smuggle the original exception out of the lambda expression, then casting the wrapped exception *back* to it&#39;s original checked exception?\r\n\r\n    class WrappedSqlException extends RuntimeException {\r\n        static final long serialVersionUID = 20130808044800000L;\r\n        public WrappedSqlException(SQLException cause) { super(cause); }\r\n        public SQLException getSqlException() { return (SQLException) getCause(); }\r\n    }\r\n\r\n    public ConnectionPool(int maxConnections, String url) throws SQLException {\r\n        try {\r\n            super(() -&gt; {\r\n                try {\r\n                    return DriverManager.getConnection(url);\r\n                } catch ( SQLException ex ) {\r\n                    throw new WrappedSqlException(ex);\r\n                }\r\n            }, maxConnections);\r\n        } catch (WrappedSqlException wse) {\r\n            throw wse.getSqlException();\r\n        }\r\n    }\r\n\r\nCreating your own unique class should prevent any likelihood of mistaking another unchecked exception for the one you wrapped inside your lambda, even if the exception is serialized somewhere in the pipeline before you catch and re-throw it.\r\n\r\nHmm... The only thing I see that&#39;s a problem here is that you are doing this inside a constructor with a call to super() which, by law, must be the first statement in your constructor.  Does `try` count as a previous statement?  I have this working (without the constructor) in my own code.\r\n\r\n  [1]: http://www.oracle.com/technetwork/articles/javase/bloch-effective-08-qa-140880.html\r\n  [2]: http://java8blog.com/post/37385501926/fixing-checked-exceptions-in-java-8","title":"Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?","body":"<p>Have you considered using a RuntimeException (unchecked) wrapper class to smuggle the original exception out of the lambda expression, then casting the wrapped exception <em>back</em> to it's original checked exception?</p>\n\n<pre><code>class WrappedSqlException extends RuntimeException {\n    static final long serialVersionUID = 20130808044800000L;\n    public WrappedSqlException(SQLException cause) { super(cause); }\n    public SQLException getSqlException() { return (SQLException) getCause(); }\n}\n\npublic ConnectionPool(int maxConnections, String url) throws SQLException {\n    try {\n        super(() -&gt; {\n            try {\n                return DriverManager.getConnection(url);\n            } catch ( SQLException ex ) {\n                throw new WrappedSqlException(ex);\n            }\n        }, maxConnections);\n    } catch (WrappedSqlException wse) {\n        throw wse.getSqlException();\n    }\n}\n</code></pre>\n\n<p>Creating your own unique class should prevent any likelihood of mistaking another unchecked exception for the one you wrapped inside your lambda, even if the exception is serialized somewhere in the pipeline before you catch and re-throw it.</p>\n\n<p>Hmm... The only thing I see that's a problem here is that you are doing this inside a constructor with a call to super() which, by law, must be the first statement in your constructor.  Does <code>try</code> count as a previous statement?  I have this working (without the constructor) in my own code.</p>\n"},{"comments":[{"owner":{"account_id":55617,"reputation":20495,"user_id":166589,"accept_rate":91,"display_name":"Lyubomyr Shaydariv"},"score":2,"creation_date":1395944353,"post_id":22689869,"comment_id":34580004,"body_markdown":"Thanks for the reply. Frankly speaking, I hoped that lambda expressions will be checked-exceptions-friendly, and the universe of checked exceptions will pass by lambdas since they are purely a compiler-driven feature. But no luck.","body":"Thanks for the reply. Frankly speaking, I hoped that lambda expressions will be checked-exceptions-friendly, and the universe of checked exceptions will pass by lambdas since they are purely a compiler-driven feature. But no luck."},{"owner":{"account_id":357454,"reputation":77335,"user_id":697630,"accept_rate":84,"display_name":"Edwin Dalorzo"},"score":1,"creation_date":1396019054,"post_id":22689869,"comment_id":34617210,"body_markdown":"@LyubomyrShaydariv I think the expert group struggled with several design issues. The need, requirement or constraint to keep backwards compatibility made things difficult, then we have other important issues like the lack of value types, type erasure and checked exceptions. If Java had the first and lacked of the other two the design of JDK 8 would have been very different. So, we all must understand that it was a difficult problem with lots of tradeoffs and the EG had to draw a line somewhere and make a decision. That may not always pleases us, but surely there will be workarounds suggested.","body":"@LyubomyrShaydariv I think the expert group struggled with several design issues. The need, requirement or constraint to keep backwards compatibility made things difficult, then we have other important issues like the lack of value types, type erasure and checked exceptions. If Java had the first and lacked of the other two the design of JDK 8 would have been very different. So, we all must understand that it was a difficult problem with lots of tradeoffs and the EG had to draw a line somewhere and make a decision. That may not always pleases us, but surely there will be workarounds suggested."},{"owner":{"account_id":55617,"reputation":20495,"user_id":166589,"accept_rate":91,"display_name":"Lyubomyr Shaydariv"},"score":0,"creation_date":1396022624,"post_id":22689869,"comment_id":34619653,"body_markdown":"Yes, but lacking both value types and true generics is caused with JVM legacy, despite the checked exceptions do not exist in runtime, and they are purely compiler-driven. Kotlin or Xtend do not have checked exceptions, so they do not force to catch an `IOException`, for example. For me, it&#39;s still not yet clear why the design team doesn&#39;t allow to omit the checked exceptions in lambda expressions. It would be nice to have an example scenario where omitting a checked exception in a lambda expression might break the expectations.","body":"Yes, but lacking both value types and true generics is caused with JVM legacy, despite the checked exceptions do not exist in runtime, and they are purely compiler-driven. Kotlin or Xtend do not have checked exceptions, so they do not force to catch an <code>IOException</code>, for example. For me, it&#39;s still not yet clear why the design team doesn&#39;t allow to omit the checked exceptions in lambda expressions. It would be nice to have an example scenario where omitting a checked exception in a lambda expression might break the expectations."},{"owner":{"account_id":357454,"reputation":77335,"user_id":697630,"accept_rate":84,"display_name":"Edwin Dalorzo"},"score":3,"creation_date":1396023230,"post_id":22689869,"comment_id":34620042,"body_markdown":"@LyubomyrShaydariv A functional interface is just like any other interface. You can implement it through a lambda expression or manually. If you would throw a checked exception within the implementation of an interface method that does not declare to throw that exception you are breaking the semantics of the programming language. You are throwing an exception not expected by the code dealing with implementations of the interface. I do not see that is OK. I will need a more elaborate example of your proposition for it to make sense to me. Maybe you should create another discussion for that.","body":"@LyubomyrShaydariv A functional interface is just like any other interface. You can implement it through a lambda expression or manually. If you would throw a checked exception within the implementation of an interface method that does not declare to throw that exception you are breaking the semantics of the programming language. You are throwing an exception not expected by the code dealing with implementations of the interface. I do not see that is OK. I will need a more elaborate example of your proposition for it to make sense to me. Maybe you should create another discussion for that."},{"owner":{"account_id":55617,"reputation":20495,"user_id":166589,"accept_rate":91,"display_name":"Lyubomyr Shaydariv"},"score":2,"creation_date":1396029136,"post_id":22689869,"comment_id":34623805,"body_markdown":"Well, so the only thing I currently see, if lambda expressions were checked-exceptions-friendly, is: `try { iDontHaveThrowsDeclared(x -&gt; someIOOperation(x)) } catch ( IOException ) { ... }` won&#39;t compile, because `IOException` in the `catch` block is known to be a checked one and the `iDontHaveThrowsDeclared`doesn&#39;t have a `throws` clause. So yes, it breaks.","body":"Well, so the only thing I currently see, if lambda expressions were checked-exceptions-friendly, is: <code>try { iDontHaveThrowsDeclared(x -&gt; someIOOperation(x)) } catch ( IOException ) { ... }</code> won&#39;t compile, because <code>IOException</code> in the <code>catch</code> block is known to be a checked one and the <code>iDontHaveThrowsDeclared</code>doesn&#39;t have a <code>throws</code> clause. So yes, it breaks."},{"owner":{"account_id":386394,"reputation":9197,"user_id":744133,"accept_rate":57,"display_name":"YoYo"},"score":1,"creation_date":1411323020,"post_id":22689869,"comment_id":40649024,"body_markdown":"@EdwinDalorzo, to the user a Lambda Expression is like it does not have a function body, it is like it runs completely within the context of where the lambda expression is written. For the same reason, it seems natural to expect that the exception can be handled in that same context, outside the lambda expression, within the method. The problem is that the actual execution can happen at a much - much later point, in a totally different context, maybe as part of an API. We cannot expect an API to handle every conceivable checked Exception. Wrapping in an unchecked exception seems appropriate.","body":"@EdwinDalorzo, to the user a Lambda Expression is like it does not have a function body, it is like it runs completely within the context of where the lambda expression is written. For the same reason, it seems natural to expect that the exception can be handled in that same context, outside the lambda expression, within the method. The problem is that the actual execution can happen at a much - much later point, in a totally different context, maybe as part of an API. We cannot expect an API to handle every conceivable checked Exception. Wrapping in an unchecked exception seems appropriate."}],"tags":[],"owner":{"account_id":357454,"reputation":77335,"user_id":697630,"accept_rate":84,"display_name":"Edwin Dalorzo"},"comment_count":6,"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1575772817,"creation_date":1395928743,"answer_id":22689869,"question_id":14039995,"body_markdown":"In the lambda mailing list this was [throughly discussed](http://mail.openjdk.java.net/pipermail/lambda-dev/2013-January/007660.html). As you can see Brian Goetz suggested there that the alternative is to write your own combinator:\r\n\r\n&gt; Or you could write your own trivial combinator:\r\n&gt; \r\n&gt;     static&lt;T&gt; Supplier&lt;T&gt; exceptionWrappingSupplier(Supplier&lt;T&gt; b) {\r\n&gt;          return e -&gt; {\r\n&gt;              try { b.accept(e); }\r\n&gt;              catch (Exception e) { throw new RuntimeException(e); }\r\n&gt;          };\r\n&gt;     }\r\n&gt; \r\n&gt; You can write it once, in less that the time it took to write your \r\n&gt; original e-mail.  And similarly once for each kind of SAM you use.\r\n&gt; \r\n&gt; I&#39;d rather we look at this as &quot;glass 99% full&quot; rather than the \r\n&gt; alternative.  Not all problems require new language features as \r\n&gt; solutions.  (Not to mention that new language features always causes\r\n&gt; new  problems.)\r\n\r\nIn those days the Consumer interface was called Block.\r\n\r\nI think this corresponds with [JB Nizet&#39;s answer](https://stackoverflow.com/questions/14039995/java-8-mandatory-checked-exceptions-handling-in-lambda-expressions-for-standard/14045585#14045585).\r\n\r\nLater Brian [explains why](http://mail.openjdk.java.net/pipermail/lambda-dev/2013-January/007662.html) this was designed this way (the reason of problem)\r\n\r\n&gt; Yes, you&#39;d have to provide your own exceptional SAMs.  But then lambda\r\n&gt; conversion would work fine with them.\r\n&gt; \r\n&gt; The EG discussed additional language and library support for this \r\n&gt; problem, and in the end felt that this was a bad cost/benefit\r\n&gt; tradeoff.\r\n&gt; \r\n&gt; Library-based solutions cause a 2x explosion in SAM types (exceptional\r\n&gt; vs not), which interact badly with existing combinatorial explosions\r\n&gt; for  primitive specialization.\r\n&gt; \r\n&gt; The available language-based solutions were losers from a \r\n&gt; complexity/value tradeoff.  Though there are some alternative\r\n&gt; solutions  we are going to continue to explore -- though clearly not\r\n&gt; for 8 and probably not for 9 either.\r\n&gt; \r\n&gt; In the meantime, you have the tools to do what you want.  I get that\r\n&gt; you  prefer we provide that last mile for you (and, secondarily, your\r\n&gt; request  is really a thinly-veiled request for &quot;why don&#39;t you just\r\n&gt; give up on  checked exceptions already&quot;), but I think the current\r\n&gt; state lets you get your job done.\r\n","title":"Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?","body":"<p>In the lambda mailing list this was <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2013-January/007660.html\" rel=\"nofollow noreferrer\">throughly discussed</a>. As you can see Brian Goetz suggested there that the alternative is to write your own combinator:</p>\n\n<blockquote>\n  <p>Or you could write your own trivial combinator:</p>\n\n<pre><code>static&lt;T&gt; Supplier&lt;T&gt; exceptionWrappingSupplier(Supplier&lt;T&gt; b) {\n     return e -&gt; {\n         try { b.accept(e); }\n         catch (Exception e) { throw new RuntimeException(e); }\n     };\n}\n</code></pre>\n  \n  <p>You can write it once, in less that the time it took to write your \n  original e-mail.  And similarly once for each kind of SAM you use.</p>\n  \n  <p>I'd rather we look at this as \"glass 99% full\" rather than the \n  alternative.  Not all problems require new language features as \n  solutions.  (Not to mention that new language features always causes\n  new  problems.)</p>\n</blockquote>\n\n<p>In those days the Consumer interface was called Block.</p>\n\n<p>I think this corresponds with <a href=\"https://stackoverflow.com/questions/14039995/java-8-mandatory-checked-exceptions-handling-in-lambda-expressions-for-standard/14045585#14045585\">JB Nizet's answer</a>.</p>\n\n<p>Later Brian <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2013-January/007662.html\" rel=\"nofollow noreferrer\">explains why</a> this was designed this way (the reason of problem)</p>\n\n<blockquote>\n  <p>Yes, you'd have to provide your own exceptional SAMs.  But then lambda\n  conversion would work fine with them.</p>\n  \n  <p>The EG discussed additional language and library support for this \n  problem, and in the end felt that this was a bad cost/benefit\n  tradeoff.</p>\n  \n  <p>Library-based solutions cause a 2x explosion in SAM types (exceptional\n  vs not), which interact badly with existing combinatorial explosions\n  for  primitive specialization.</p>\n  \n  <p>The available language-based solutions were losers from a \n  complexity/value tradeoff.  Though there are some alternative\n  solutions  we are going to continue to explore -- though clearly not\n  for 8 and probably not for 9 either.</p>\n  \n  <p>In the meantime, you have the tools to do what you want.  I get that\n  you  prefer we provide that last mile for you (and, secondarily, your\n  request  is really a thinly-veiled request for \"why don't you just\n  give up on  checked exceptions already\"), but I think the current\n  state lets you get your job done.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1129042,"reputation":48154,"user_id":1115554,"accept_rate":100,"display_name":"micha"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1441265032,"creation_date":1441216378,"answer_id":32359977,"question_id":14039995,"body_markdown":"**September 2015:**\n\nYou can use [ET][1] for this. ET is a small Java 8 library for exception conversion/translation.\n\nWith ET you can write:\n    \n    super(() -&gt; et.withReturningTranslation(() -&gt; DriverManager.getConnection(url)), maxConnections);\n\nMulti line version:\n\n    super(() -&gt; {\n      return et.withReturningTranslation(() -&gt; DriverManager.getConnection(url));\n    }, maxConnections);\n\nAll you need to do before, is creating a new `ExceptionTranslator` instance:\n\n    ExceptionTranslator et = ET.newConfiguration().done();\n\nThis instance is thread safe an can be shared by multiple components. You can configure more specific exception conversion rules (e.g. `FooCheckedException -&gt; BarRuntimeException`) if you like. If no other rules are available, checked exceptions are automatically converted to `RuntimeException`.\n\n(Disclaimer: I am the author of ET)\n\n  [1]: https://github.com/mscharhag/ET","title":"Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?","body":"<p><strong>September 2015:</strong></p>\n<p>You can use <a href=\"https://github.com/mscharhag/ET\" rel=\"noreferrer\">ET</a> for this. ET is a small Java 8 library for exception conversion/translation.</p>\n<p>With ET you can write:</p>\n<pre><code>super(() -&gt; et.withReturningTranslation(() -&gt; DriverManager.getConnection(url)), maxConnections);\n</code></pre>\n<p>Multi line version:</p>\n<pre><code>super(() -&gt; {\n  return et.withReturningTranslation(() -&gt; DriverManager.getConnection(url));\n}, maxConnections);\n</code></pre>\n<p>All you need to do before, is creating a new <code>ExceptionTranslator</code> instance:</p>\n<pre><code>ExceptionTranslator et = ET.newConfiguration().done();\n</code></pre>\n<p>This instance is thread safe an can be shared by multiple components. You can configure more specific exception conversion rules (e.g. <code>FooCheckedException -&gt; BarRuntimeException</code>) if you like. If no other rules are available, checked exceptions are automatically converted to <code>RuntimeException</code>.</p>\n<p>(Disclaimer: I am the author of ET)</p>\n"},{"comments":[{"owner":{"account_id":55617,"reputation":20495,"user_id":166589,"accept_rate":91,"display_name":"Lyubomyr Shaydariv"},"score":0,"creation_date":1446148710,"post_id":33423125,"comment_id":54636243,"body_markdown":"That&#39;s cool stuff, and it&#39;s nice to be a part of your inspiration. :) Three years after the post I can&#39;t completely refuse the exceptional twins of the standard functional interfaces. I&#39;m pretty sure it&#39;s just because I&#39;m too lazy to create yet another business logic interface. I usually never combine them with streams processing, and I think that checked exceptions can be a great option especially for cross-layer communucation.","body":"That&#39;s cool stuff, and it&#39;s nice to be a part of your inspiration. :) Three years after the post I can&#39;t completely refuse the exceptional twins of the standard functional interfaces. I&#39;m pretty sure it&#39;s just because I&#39;m too lazy to create yet another business logic interface. I usually never combine them with streams processing, and I think that checked exceptions can be a great option especially for cross-layer communucation."},{"owner":{"account_id":55617,"reputation":20495,"user_id":166589,"accept_rate":91,"display_name":"Lyubomyr Shaydariv"},"score":1,"creation_date":1446149043,"post_id":33423125,"comment_id":54636421,"body_markdown":"I think now, over those years, that my initial question was wrong from the design perspective: why did I want a `Supplier` instance to be a factory at all? Now I think that that dirty constructor in the post should just delegate something like a `IConnectionFactory` that declares an `SQLException` to be thrown just to clearly reveal the intentions of such an interface that might be more or less easily extended in the future.","body":"I think now, over those years, that my initial question was wrong from the design perspective: why did I want a <code>Supplier</code> instance to be a factory at all? Now I think that that dirty constructor in the post should just delegate something like a <code>IConnectionFactory</code> that declares an <code>SQLException</code> to be thrown just to clearly reveal the intentions of such an interface that might be more or less easily extended in the future."}],"tags":[],"owner":{"account_id":515883,"reputation":4966,"user_id":1128668,"accept_rate":54,"display_name":"GlenPeterson"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1474469696,"creation_date":1446147272,"answer_id":33423125,"question_id":14039995,"body_markdown":"[Paguro provides functional interfaces that wrap checked exceptions][1].  I started working on it a few months after you asked your question, so you were probably part of the inspiration for it!\r\n\r\nYou&#39;ll notice that there are only 4 functional interfaces in Paguro vs. the 43 interfaces included with Java 8.  That&#39;s because Paguro prefers generics to primitives.\r\n\r\nPaguro has single-pass transformations built into its immutable collections (copied from Clojure).  These transforms are roughly equivalent to Clojure transducers or Java 8 streams, but they accept functional interfaces that wrap checked exceptions.  See: [the differences between Paguro and Java 8 streams][2].\r\n\r\n  [1]: https://github.com/GlenKPeterson/Paguro\r\n  [2]: https://github.com/GlenKPeterson/Paguro/wiki/Comparison-with-Streams-and-Lambdas-in-JDK8","title":"Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?","body":"<p><a href=\"https://github.com/GlenKPeterson/Paguro\" rel=\"nofollow\">Paguro provides functional interfaces that wrap checked exceptions</a>.  I started working on it a few months after you asked your question, so you were probably part of the inspiration for it!</p>\n\n<p>You'll notice that there are only 4 functional interfaces in Paguro vs. the 43 interfaces included with Java 8.  That's because Paguro prefers generics to primitives.</p>\n\n<p>Paguro has single-pass transformations built into its immutable collections (copied from Clojure).  These transforms are roughly equivalent to Clojure transducers or Java 8 streams, but they accept functional interfaces that wrap checked exceptions.  See: <a href=\"https://github.com/GlenKPeterson/Paguro/wiki/Comparison-with-Streams-and-Lambdas-in-JDK8\" rel=\"nofollow\">the differences between Paguro and Java 8 streams</a>.</p>\n"},{"comments":[{"owner":{"account_id":6209363,"reputation":496,"user_id":9655696,"display_name":"Al Ro"},"score":0,"creation_date":1689786716,"post_id":36395157,"comment_id":135264185,"body_markdown":"Is this actually the complete implementation? you are lacking any example of how to use it.","body":"Is this actually the complete implementation? you are lacking any example of how to use it."}],"tags":[],"owner":{"account_id":2570598,"reputation":13282,"user_id":2229438,"accept_rate":94,"display_name":"Grzegorz Piwowarek"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1691132468,"creation_date":1459747904,"answer_id":36395157,"question_id":14039995,"body_markdown":"We developed an internal project in my company that helped us with this. We decided to went public two months ago.\r\n\r\nThis is what we came up with:\r\n\r\n    @FunctionalInterface\r\n    public interface ThrowingFunction&lt;T,R,E extends Throwable&gt; {\r\n    R apply(T arg) throws E;\r\n\r\n    /**\r\n     * @param &lt;T&gt; type\r\n     * @param &lt;E&gt; checked exception\r\n     * @return a function that accepts one argument and returns it as a value.\r\n     */\r\n    static &lt;T, E extends Exception&gt; ThrowingFunction&lt;T, T, E&gt; identity() {\r\n        return t -&gt; t;\r\n    }\r\n\r\n    /**\r\n     * @return a Function that returns the result of the given function as an Optional instance.\r\n     * In case of a failure, empty Optional is returned\r\n     */\r\n    static &lt;T, R, E extends Exception&gt; Function&lt;T, Optional&lt;R&gt;&gt; lifted(ThrowingFunction&lt;T, R, E&gt; f) {\r\n        Objects.requireNonNull(f);\r\n\r\n        return f.lift();\r\n    }\r\n\r\n    static &lt;T, R, E extends Exception&gt; Function&lt;T, R&gt; unchecked(ThrowingFunction&lt;T, R, E&gt; f) {\r\n        Objects.requireNonNull(f);\r\n\r\n        return f.uncheck();\r\n    }\r\n\r\n    default &lt;V&gt; ThrowingFunction&lt;V, R, E&gt; compose(final ThrowingFunction&lt;? super V, ? extends T, E&gt; before) {\r\n        Objects.requireNonNull(before);\r\n\r\n        return (V v) -&gt; apply(before.apply(v));\r\n    }\r\n\r\n    default &lt;V&gt; ThrowingFunction&lt;T, V, E&gt; andThen(final ThrowingFunction&lt;? super R, ? extends V, E&gt; after) {\r\n        Objects.requireNonNull(after);\r\n\r\n        return (T t) -&gt; after.apply(apply(t));\r\n    }\r\n\r\n    /**\r\n     * @return a Function that returns the result as an Optional instance. In case of a failure, empty Optional is\r\n     * returned\r\n     */\r\n    default Function&lt;T, Optional&lt;R&gt;&gt; lift() {\r\n        return t -&gt; {\r\n            try {\r\n                return Optional.of(apply(t));\r\n            } catch (Throwable e) {\r\n                return Optional.empty();\r\n            }\r\n        };\r\n    }\r\n\r\n    /**\r\n     * @return a new Function instance which wraps thrown checked exception instance into a RuntimeException\r\n     */\r\n    default Function&lt;T, R&gt; uncheck() {\r\n        return t -&gt; {\r\n            try {\r\n                return apply(t);\r\n            } catch (final Throwable e) {\r\n                throw new WrappedException(e);\r\n            }\r\n        };\r\n    }\r\n}\r\n\r\nhttp://github.com/pivovarit/throwing-function","title":"Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?","body":"<p>We developed an internal project in my company that helped us with this. We decided to went public two months ago.</p>\n<p>This is what we came up with:</p>\n<pre><code>@FunctionalInterface\npublic interface ThrowingFunction&lt;T,R,E extends Throwable&gt; {\nR apply(T arg) throws E;\n\n/**\n * @param &lt;T&gt; type\n * @param &lt;E&gt; checked exception\n * @return a function that accepts one argument and returns it as a value.\n */\nstatic &lt;T, E extends Exception&gt; ThrowingFunction&lt;T, T, E&gt; identity() {\n    return t -&gt; t;\n}\n\n/**\n * @return a Function that returns the result of the given function as an Optional instance.\n * In case of a failure, empty Optional is returned\n */\nstatic &lt;T, R, E extends Exception&gt; Function&lt;T, Optional&lt;R&gt;&gt; lifted(ThrowingFunction&lt;T, R, E&gt; f) {\n    Objects.requireNonNull(f);\n\n    return f.lift();\n}\n\nstatic &lt;T, R, E extends Exception&gt; Function&lt;T, R&gt; unchecked(ThrowingFunction&lt;T, R, E&gt; f) {\n    Objects.requireNonNull(f);\n\n    return f.uncheck();\n}\n\ndefault &lt;V&gt; ThrowingFunction&lt;V, R, E&gt; compose(final ThrowingFunction&lt;? super V, ? extends T, E&gt; before) {\n    Objects.requireNonNull(before);\n\n    return (V v) -&gt; apply(before.apply(v));\n}\n\ndefault &lt;V&gt; ThrowingFunction&lt;T, V, E&gt; andThen(final ThrowingFunction&lt;? super R, ? extends V, E&gt; after) {\n    Objects.requireNonNull(after);\n\n    return (T t) -&gt; after.apply(apply(t));\n}\n\n/**\n * @return a Function that returns the result as an Optional instance. In case of a failure, empty Optional is\n * returned\n */\ndefault Function&lt;T, Optional&lt;R&gt;&gt; lift() {\n    return t -&gt; {\n        try {\n            return Optional.of(apply(t));\n        } catch (Throwable e) {\n            return Optional.empty();\n        }\n    };\n}\n\n/**\n * @return a new Function instance which wraps thrown checked exception instance into a RuntimeException\n */\ndefault Function&lt;T, R&gt; uncheck() {\n    return t -&gt; {\n        try {\n            return apply(t);\n        } catch (final Throwable e) {\n            throw new WrappedException(e);\n        }\n    };\n}\n</code></pre>\n<p>}</p>\n<p><a href=\"http://github.com/pivovarit/throwing-function\" rel=\"nofollow noreferrer\">http://github.com/pivovarit/throwing-function</a></p>\n"},{"tags":[],"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1508443242,"creation_date":1508443242,"answer_id":46838023,"question_id":14039995,"body_markdown":"You *can* throw from your lambdas, they just have to be declared &quot;with your own way&quot; (which makes them, unfortunately, not re-usable in standard JDK code, but hey, we does what we cans).\r\n\r\n\r\n\r\n\r\n    @FunctionalInterface\r\n    public interface SupplierIOException {\r\n       MyClass get() throws IOException;\r\n    }\r\n\r\nOr the more generic-ized version:\r\n\r\n    public interface ThrowingSupplier&lt;T, E extends Exception&gt; {\r\n      T get() throws E;\r\n    }\r\n\r\nref [here][1].  There is also a mention of using &quot;sneakyThrow&quot; to not declare the checked exceptions, but then still throw them.  It that hurts my head a bit, maybe an option.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/27644392/32453","title":"Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?","body":"<p>You <em>can</em> throw from your lambdas, they just have to be declared \"with your own way\" (which makes them, unfortunately, not re-usable in standard JDK code, but hey, we does what we cans).</p>\n\n<pre><code>@FunctionalInterface\npublic interface SupplierIOException {\n   MyClass get() throws IOException;\n}\n</code></pre>\n\n<p>Or the more generic-ized version:</p>\n\n<pre><code>public interface ThrowingSupplier&lt;T, E extends Exception&gt; {\n  T get() throws E;\n}\n</code></pre>\n\n<p>ref <a href=\"https://stackoverflow.com/a/27644392/32453\">here</a>.  There is also a mention of using \"sneakyThrow\" to not declare the checked exceptions, but then still throw them.  It that hurts my head a bit, maybe an option.</p>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633615549,"creation_date":1633615549,"answer_id":69482614,"question_id":14039995,"body_markdown":"[jOOλ][1] is a library that supports wrapping all sorts of functional interfaces throwing checked exceptions into equivalent JDK functional interfaces. For example:\r\n\r\n```java\r\n// Wraps the checked exception in an unchecked one:\r\nSupplier&lt;Class&lt;?&gt;&gt; supplier = Unchecked.supplier(() -&gt; Class.forName(&quot;com.example.X&quot;));\r\n\r\n// Re-throws the checked exception without compile time checking:\r\nSupplier&lt;Class&lt;?&gt;&gt; supplier = Sneaky.supplier(() -&gt; Class.forName(&quot;com.example.X&quot;));\r\n```\r\n\r\n[I&#39;ve made some more examples in this blog post here][2].\r\nDisclaimer: I made jOOλ\r\n\r\n\r\n  [1]: https://github.com/jOOQ/jOOL\r\n  [2]: https://blog.jooq.org/use-joo%CE%BBs-sneaky-throw-to-avoid-checked-exceptions/","title":"Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?","body":"<p><a href=\"https://github.com/jOOQ/jOOL\" rel=\"nofollow noreferrer\">jOOλ</a> is a library that supports wrapping all sorts of functional interfaces throwing checked exceptions into equivalent JDK functional interfaces. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Wraps the checked exception in an unchecked one:\nSupplier&lt;Class&lt;?&gt;&gt; supplier = Unchecked.supplier(() -&gt; Class.forName(&quot;com.example.X&quot;));\n\n// Re-throws the checked exception without compile time checking:\nSupplier&lt;Class&lt;?&gt;&gt; supplier = Sneaky.supplier(() -&gt; Class.forName(&quot;com.example.X&quot;));\n</code></pre>\n<p><a href=\"https://blog.jooq.org/use-joo%CE%BBs-sneaky-throw-to-avoid-checked-exceptions/\" rel=\"nofollow noreferrer\">I've made some more examples in this blog post here</a>.\nDisclaimer: I made jOOλ</p>\n"}],"owner":{"account_id":55617,"reputation":20495,"user_id":166589,"accept_rate":91,"display_name":"Lyubomyr Shaydariv"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49171,"favorite_count":0,"down_vote_count":0,"up_vote_count":71,"accepted_answer_id":14045585,"answer_count":9,"score":71,"last_activity_date":1691132468,"creation_date":1356521529,"question_id":14039995,"body_markdown":"I&#39;m playing with the new lambda features in Java 8, and found that the practices offered by Java 8 are really useful. However, I&#39;m wondering is there a _good_ way to make a work-around for the following scenario. Suppose you have an object pool wrapper that requires some kind of a factory to fill the object pool, for example (using `java.lang.functions.Factory`):\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class JdbcConnectionPool extends ObjectPool&lt;Connection&gt; {\r\n\r\n        public ConnectionPool(int maxConnections, String url) {\r\n            super(new Factory&lt;Connection&gt;() {\r\n                @Override\r\n                public Connection make() {\r\n                    try {\r\n                        return DriverManager.getConnection(url);\r\n                    } catch ( SQLException ex ) {\r\n                        throw new RuntimeException(ex);\r\n                    }\r\n                }\r\n            }, maxConnections);\r\n        }\r\n\r\n    }\r\n\r\nAfter transforming the functional interface into lambda expression, the code above becomes like that:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class JdbcConnectionPool extends ObjectPool&lt;Connection&gt; {\r\n\r\n        public ConnectionPool(int maxConnections, String url) {\r\n            super(() -&gt; {\r\n                try {\r\n                    return DriverManager.getConnection(url);\r\n                } catch ( SQLException ex ) {\r\n                    throw new RuntimeException(ex);\r\n                }\r\n            }, maxConnections);\r\n        }\r\n\r\n    }\r\n\r\nNot so bad indeed, but the checked exception `java.sql.SQLException` requires a `try`/`catch` block inside the lambda. At my company we use two interfaces for long time:\r\n\r\n* `IOut&lt;T&gt;` that is an equivalent to `java.lang.functions.Factory`;\r\n* and a special interface for the cases that usually require checked exceptions propagation: `interface IUnsafeOut&lt;T, E extends Throwable&gt; { T out() throws E; }`.\r\n\r\nBoth `IOut&lt;T&gt;` and `IUnsafeOut&lt;T&gt;` are supposed to be removed during migration to Java 8, however there is no exact match for `IUnsafeOut&lt;T, E&gt;`. If the lambda expressions could deal with checked exceptions like they were unchecked, it could be possible to use simply like the following in the constructor above:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    super(() -&gt; DriverManager.getConnection(url), maxConnections);\r\n\r\nThat looks much cleaner. I see that I can rewrite the `ObjectPool` super class to accept our `IUnsafeOut&lt;T&gt;`, but as far as I know, Java 8 is not finished yet, so could be there some changes like:\r\n\r\n* implementing something similar to `IUnsafeOut&lt;T, E&gt;`? (to be honest, I consider that dirty - the subject must choose what to accept: either `Factory` or &quot;unsafe factory&quot; that cannot have compatible method signatures)\r\n* simply ignoring checked exceptions in lambdas, so no need in `IUnsafeOut&lt;T, E&gt;` surrogates? (why not? e.g. another important change: OpenJDK, that I use, `javac` now does not require variables and parameters to be declared as `final` to be captured in an anonymous class [functional interface] or lambda expression)\r\n\r\nSo the question is generally is: is there a way to bypass checked exceptions in lambdas or is it planned in the future until Java 8 is finally released?\r\n\r\n\r\n---\r\n\r\nUpdate 1\r\n\r\nHm-m-m, as far as I understand what we currently have, it seems there is no way at the moment, despite the referenced article is dated from 2010: [Brian Goetz explains exception transparency in Java][1]. If nothing changed much in Java 8, this could be considered an answer. Also Brian says that `interface ExceptionalCallable&lt;V, E extends Exception&gt;` (what I mentioned as `IUnsafeOut&lt;T, E extends Throwable&gt;` out of our code legacy) is pretty much useless, and I agree with him.\r\n\r\nDo I still miss something else?\r\n\r\n\r\n  [1]: https://web.archive.org/web/20170313093438/blogs.oracle.com/briangoetz/entry/exception_transparency_in_java","title":"Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?","body":"<p>I'm playing with the new lambda features in Java 8, and found that the practices offered by Java 8 are really useful. However, I'm wondering is there a <em>good</em> way to make a work-around for the following scenario. Suppose you have an object pool wrapper that requires some kind of a factory to fill the object pool, for example (using <code>java.lang.functions.Factory</code>):</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class JdbcConnectionPool extends ObjectPool&lt;Connection&gt; {\n\n    public ConnectionPool(int maxConnections, String url) {\n        super(new Factory&lt;Connection&gt;() {\n            @Override\n            public Connection make() {\n                try {\n                    return DriverManager.getConnection(url);\n                } catch ( SQLException ex ) {\n                    throw new RuntimeException(ex);\n                }\n            }\n        }, maxConnections);\n    }\n\n}\n</code></pre>\n\n<p>After transforming the functional interface into lambda expression, the code above becomes like that:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class JdbcConnectionPool extends ObjectPool&lt;Connection&gt; {\n\n    public ConnectionPool(int maxConnections, String url) {\n        super(() -&gt; {\n            try {\n                return DriverManager.getConnection(url);\n            } catch ( SQLException ex ) {\n                throw new RuntimeException(ex);\n            }\n        }, maxConnections);\n    }\n\n}\n</code></pre>\n\n<p>Not so bad indeed, but the checked exception <code>java.sql.SQLException</code> requires a <code>try</code>/<code>catch</code> block inside the lambda. At my company we use two interfaces for long time:</p>\n\n<ul>\n<li><code>IOut&lt;T&gt;</code> that is an equivalent to <code>java.lang.functions.Factory</code>;</li>\n<li>and a special interface for the cases that usually require checked exceptions propagation: <code>interface IUnsafeOut&lt;T, E extends Throwable&gt; { T out() throws E; }</code>.</li>\n</ul>\n\n<p>Both <code>IOut&lt;T&gt;</code> and <code>IUnsafeOut&lt;T&gt;</code> are supposed to be removed during migration to Java 8, however there is no exact match for <code>IUnsafeOut&lt;T, E&gt;</code>. If the lambda expressions could deal with checked exceptions like they were unchecked, it could be possible to use simply like the following in the constructor above:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>super(() -&gt; DriverManager.getConnection(url), maxConnections);\n</code></pre>\n\n<p>That looks much cleaner. I see that I can rewrite the <code>ObjectPool</code> super class to accept our <code>IUnsafeOut&lt;T&gt;</code>, but as far as I know, Java 8 is not finished yet, so could be there some changes like:</p>\n\n<ul>\n<li>implementing something similar to <code>IUnsafeOut&lt;T, E&gt;</code>? (to be honest, I consider that dirty - the subject must choose what to accept: either <code>Factory</code> or \"unsafe factory\" that cannot have compatible method signatures)</li>\n<li>simply ignoring checked exceptions in lambdas, so no need in <code>IUnsafeOut&lt;T, E&gt;</code> surrogates? (why not? e.g. another important change: OpenJDK, that I use, <code>javac</code> now does not require variables and parameters to be declared as <code>final</code> to be captured in an anonymous class [functional interface] or lambda expression)</li>\n</ul>\n\n<p>So the question is generally is: is there a way to bypass checked exceptions in lambdas or is it planned in the future until Java 8 is finally released?</p>\n\n<hr>\n\n<p>Update 1</p>\n\n<p>Hm-m-m, as far as I understand what we currently have, it seems there is no way at the moment, despite the referenced article is dated from 2010: <a href=\"https://web.archive.org/web/20170313093438/blogs.oracle.com/briangoetz/entry/exception_transparency_in_java\" rel=\"noreferrer\">Brian Goetz explains exception transparency in Java</a>. If nothing changed much in Java 8, this could be considered an answer. Also Brian says that <code>interface ExceptionalCallable&lt;V, E extends Exception&gt;</code> (what I mentioned as <code>IUnsafeOut&lt;T, E extends Throwable&gt;</code> out of our code legacy) is pretty much useless, and I agree with him.</p>\n\n<p>Do I still miss something else?</p>\n"},{"tags":["java","xml","spring-boot","inheritance","mybatis"],"comments":[{"owner":{"account_id":1314580,"reputation":3299,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1691250964,"post_id":76833590,"comment_id":135468146,"body_markdown":"I&#39;m not sure if I understand your question correctly, but see if this [answer](https://stackoverflow.com/a/76842401/1261766) helps.","body":"I&#39;m not sure if I understand your question correctly, but see if this <a href=\"https://stackoverflow.com/a/76842401/1261766\">answer</a> helps."}],"owner":{"account_id":29157610,"reputation":1,"user_id":22337038,"display_name":"DogFe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691132082,"creation_date":1691132082,"question_id":76833590,"body_markdown":"First of all I apologize for my poor English skills.\r\n\r\nSo far, when designing a class that receives a request from a form, I have created each class separately.\r\n\r\nThis time, unlike before, we are trying to design a request class using inheritance.\r\n\r\nThis is my request classes and controller.\r\n\r\n\r\n\r\n\r\n```\r\n// super class\r\npublic abstract class MenuRequest {\r\n\r\n\t\r\n\tprivate String beginDate;\r\n\t\r\n\tprivate String endDate;\r\n\t\r\n\tprivate Integer restaurantId;\r\n\t\r\n\tprivate Integer mealId;\r\n\r\n}\r\n\r\n// sub class1\r\npublic class MenuListRequest extends MenuRequest{\r\n\r\n\tprivate Integer ingredientLook;\r\n\tprivate Integer currentPage;\r\n\tprivate Integer listCountPerPage;\r\n}\r\n\r\n// sub class2\r\npublic class MenuTableRequest extends MenuRequest {\r\n\r\n}\r\n\r\n// controller 1\r\n@Controller\r\npublic class MenuListController {\r\n\r\n\t@Autowired\r\n\tprivate MenuListServiceImpl menuListServiceImpl;\r\n\r\n\t@GetMapping(&quot;/list&quot;)\r\n\tpublic String getList(MenuListRequest menuListRequest, Model model) {\r\n\t\t...\r\n\t}\r\n\r\n}\r\n\r\n@Controller\r\npublic class MenuTableController {\r\n\t\r\n\t@Autowired\r\n\tprivate MenuTableServiceImpl menuTableServiceImpl;\r\n\t\r\n\t@GetMapping(&quot;/table&quot;)\r\n\tpublic String getTable(Model model, MenuTableRequest menuTableRequest) {\r\n\t\t...\r\n\t}\r\n}\r\n\r\n```\r\n\r\nAnd the mapper class and xml file are like this.\r\n\r\n```\r\n@Mapper\r\npublic interface MenuMapper {\r\n\r\n\tpublic List&lt;Menu&gt; selectMenuList(MenuRequest menuRequest);\r\n\r\n}\r\n\r\n\r\n// code in xml\r\n&lt;select id=&quot;selectMenuList&quot; resultType=&quot;com.sikdan.ojt.model.vo.Menu&quot;&gt;\r\n\r\n\t\tSELECT date_format(ymd, &#39;%Y-%m-%d&#39;) AS ymd, restaurant_nm, meal_nm, food_nm, ingredients_nm\r\n\t\tFROM cms_menu AS m\r\n\t\tLEFT JOIN cms_restaurant AS r\r\n\t\tON m.restaurant_id = r.restaurant_id\r\n\t\tLEFT JOIN cms_meal_division AS md\r\n\t\tON m.meal_id = md.meal_id\r\n\t\tLEFT JOIN cms_food AS f\r\n\t\tON m.food_id = f.food_id\r\n\t\t&lt;choose&gt;\r\n\t\t\t&lt;when test=&#39;ingredientLook == 2&#39;&gt;\r\n\t\t\t\tLEFT JOIN\r\n\t\t\t\t(\r\n\t\t\t\tSELECT food_id, group_concat(ingredients_nm) AS ingredients_nm\r\n\t\t\t\tFROM cms_recipe AS rc\r\n\t\t\t\tLEFT JOIN cms_ingredients AS i\r\n\t\t\t\tON\r\n\t\t\t\trc.ingredients_id = i.ingredients_id\r\n\t\t\t\tGROUP BY food_id\r\n\t\t\t\t) AS i\r\n\t\t\t\tON m.food_id = i.food_id\r\n\t\t\t&lt;/when&gt;\r\n\t\t\t&lt;otherwise&gt;\r\n\t\t\t\tRIGHT JOIN cms_recipe AS rc\r\n\t\t\t\tON m.food_id = rc.food_id\r\n\t\t\t\tLEFT JOIN cms_ingredients AS i\r\n\t\t\t\tON rc.ingredients_id = i.ingredients_id\r\n\t\t\t&lt;/otherwise&gt;\r\n\t\t&lt;/choose&gt;\r\n\t\tWHERE ymd BETWEEN #{beginDate} AND #{endDate}\r\n\t\t&lt;if test=&#39;restaurantId != null&#39;&gt;\r\n\t\t\tAND m.restaurant_id = #{restaurantId}\r\n\t\t&lt;/if&gt;\r\n\t\t&lt;if test=&#39;mealId != null&#39;&gt;\r\n\t\t\tAND m.meal_id = #{mealId}\r\n\t\t&lt;/if&gt;\r\n\t\tORDER BY ymd,\r\n\t\tm.restaurant_id,\r\n\t\tm.meal_id,\r\n\t\tm.food_id\r\n\t\t&lt;if test=&#39;ingredientLook != 2&#39;&gt;\r\n\t\t\t,rc.ingredients_id\r\n\t\t&lt;/if&gt;\r\n\t\t&lt;if test=&#39;listCountPerPage != null&#39;&gt;\r\n\t\t\tLIMIT #{currentPage}, #{listCountPerPage}\r\n\t\t&lt;/if&gt;\r\n&lt;/select&gt;\r\n```\r\n\r\nThe reason I wrote the code like this is because the type of List&lt;menu&gt; needed in the service is the same.\r\nHowever, the class returned to the controller in the service stage after request is different.\r\n\r\n\r\nSomeone might have predicted it, but the &#39;&lt;if test=&quot;ingredientLook == 1&quot;&gt;&#39; part was a problem and an error occurred. This seems to be because MenuTableRequest does not have a member variable called ingredientLook.\r\n\r\n\r\nI think there are two ways to solve this problem.\r\n1. It is not used in the MenuTableRequest class, but it is always treated as null by putting a variable called IngredientLook.\r\n2. Using separate methods in Mapper without using inheritance.\r\n\r\nI&#39;m wondering which of these is the better way. Or just wondering if there is a better way.\r\n\r\nThanks for reading.\r\n\r\n\r\n\r\n\r\nSince different forms call the list of same VO class, I tried to solve both tasks through one Mapper method by designing a request class through inheritance.","title":"Using SpringBoot2.7 and MyBatis 2.3 How can I code a cleaner request class structure?","body":"<p>First of all I apologize for my poor English skills.</p>\n<p>So far, when designing a class that receives a request from a form, I have created each class separately.</p>\n<p>This time, unlike before, we are trying to design a request class using inheritance.</p>\n<p>This is my request classes and controller.</p>\n<pre><code>// super class\npublic abstract class MenuRequest {\n\n    \n    private String beginDate;\n    \n    private String endDate;\n    \n    private Integer restaurantId;\n    \n    private Integer mealId;\n\n}\n\n// sub class1\npublic class MenuListRequest extends MenuRequest{\n\n    private Integer ingredientLook;\n    private Integer currentPage;\n    private Integer listCountPerPage;\n}\n\n// sub class2\npublic class MenuTableRequest extends MenuRequest {\n\n}\n\n// controller 1\n@Controller\npublic class MenuListController {\n\n    @Autowired\n    private MenuListServiceImpl menuListServiceImpl;\n\n    @GetMapping(&quot;/list&quot;)\n    public String getList(MenuListRequest menuListRequest, Model model) {\n        ...\n    }\n\n}\n\n@Controller\npublic class MenuTableController {\n    \n    @Autowired\n    private MenuTableServiceImpl menuTableServiceImpl;\n    \n    @GetMapping(&quot;/table&quot;)\n    public String getTable(Model model, MenuTableRequest menuTableRequest) {\n        ...\n    }\n}\n\n</code></pre>\n<p>And the mapper class and xml file are like this.</p>\n<pre><code>@Mapper\npublic interface MenuMapper {\n\n    public List&lt;Menu&gt; selectMenuList(MenuRequest menuRequest);\n\n}\n\n\n// code in xml\n&lt;select id=&quot;selectMenuList&quot; resultType=&quot;com.sikdan.ojt.model.vo.Menu&quot;&gt;\n\n        SELECT date_format(ymd, '%Y-%m-%d') AS ymd, restaurant_nm, meal_nm, food_nm, ingredients_nm\n        FROM cms_menu AS m\n        LEFT JOIN cms_restaurant AS r\n        ON m.restaurant_id = r.restaurant_id\n        LEFT JOIN cms_meal_division AS md\n        ON m.meal_id = md.meal_id\n        LEFT JOIN cms_food AS f\n        ON m.food_id = f.food_id\n        &lt;choose&gt;\n            &lt;when test='ingredientLook == 2'&gt;\n                LEFT JOIN\n                (\n                SELECT food_id, group_concat(ingredients_nm) AS ingredients_nm\n                FROM cms_recipe AS rc\n                LEFT JOIN cms_ingredients AS i\n                ON\n                rc.ingredients_id = i.ingredients_id\n                GROUP BY food_id\n                ) AS i\n                ON m.food_id = i.food_id\n            &lt;/when&gt;\n            &lt;otherwise&gt;\n                RIGHT JOIN cms_recipe AS rc\n                ON m.food_id = rc.food_id\n                LEFT JOIN cms_ingredients AS i\n                ON rc.ingredients_id = i.ingredients_id\n            &lt;/otherwise&gt;\n        &lt;/choose&gt;\n        WHERE ymd BETWEEN #{beginDate} AND #{endDate}\n        &lt;if test='restaurantId != null'&gt;\n            AND m.restaurant_id = #{restaurantId}\n        &lt;/if&gt;\n        &lt;if test='mealId != null'&gt;\n            AND m.meal_id = #{mealId}\n        &lt;/if&gt;\n        ORDER BY ymd,\n        m.restaurant_id,\n        m.meal_id,\n        m.food_id\n        &lt;if test='ingredientLook != 2'&gt;\n            ,rc.ingredients_id\n        &lt;/if&gt;\n        &lt;if test='listCountPerPage != null'&gt;\n            LIMIT #{currentPage}, #{listCountPerPage}\n        &lt;/if&gt;\n&lt;/select&gt;\n</code></pre>\n<p>The reason I wrote the code like this is because the type of List needed in the service is the same.\nHowever, the class returned to the controller in the service stage after request is different.</p>\n<p>Someone might have predicted it, but the '' part was a problem and an error occurred. This seems to be because MenuTableRequest does not have a member variable called ingredientLook.</p>\n<p>I think there are two ways to solve this problem.</p>\n<ol>\n<li>It is not used in the MenuTableRequest class, but it is always treated as null by putting a variable called IngredientLook.</li>\n<li>Using separate methods in Mapper without using inheritance.</li>\n</ol>\n<p>I'm wondering which of these is the better way. Or just wondering if there is a better way.</p>\n<p>Thanks for reading.</p>\n<p>Since different forms call the list of same VO class, I tried to solve both tasks through one Mapper method by designing a request class through inheritance.</p>\n"},{"tags":["java","windows","swing"],"comments":[{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1690404004,"post_id":76774460,"comment_id":135350670,"body_markdown":"I don&#39;t see where I mentioned **fixing code**","body":"I don&#39;t see where I mentioned <b>fixing code</b>"},{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1690406732,"post_id":76774460,"comment_id":135351112,"body_markdown":"I didn&#39;t metion something about fixing a code. I ask if there is a method or something in java to stop the delay that causes a black backgroud to be seen when resizing the frame,","body":"I didn&#39;t metion something about fixing a code. I ask if there is a method or something in java to stop the delay that causes a black backgroud to be seen when resizing the frame,"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1690408145,"post_id":76774460,"comment_id":135351321,"body_markdown":"Possibly related questions (although hard to say for sure without your [MRE](https://stackoverflow.com/help/minimal-reproducible-example) code): [How to Remove Black Rectangle on Window Resize?](https://stackoverflow.com/a/67043322/), and [How to eliminate black lag area in Java Swing running on Windows](https://stackoverflow.com/q/66382178/)","body":"Possibly related questions (although hard to say for sure without your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MRE</a> code): <a href=\"https://stackoverflow.com/a/67043322/\">How to Remove Black Rectangle on Window Resize?</a>, and <a href=\"https://stackoverflow.com/q/66382178/\">How to eliminate black lag area in Java Swing running on Windows</a>"},{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1690478940,"post_id":76774460,"comment_id":135363147,"body_markdown":"@camickr you&#39;re right, thank you","body":"@camickr you&#39;re right, thank you"},{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1690479236,"post_id":76774460,"comment_id":135363198,"body_markdown":"@camickr I will ask if it is possible that you copy my code and run it so you can have a better understanding of my problem.","body":"@camickr I will ask if it is possible that you copy my code and run it so you can have a better understanding of my problem."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1690479990,"post_id":76774460,"comment_id":135363336,"body_markdown":"I did try the posted code. There is nothing wrong with it other than my comment about creating components on the EDT. I tested on Windows 11 using JDK 11. *I started a new java project with netbeans,* - did you try to just compile/execute from the command line. Maybe something in your IDE is not set up correctly. Did you try reinstalling the IDE and JDK?  I have nothing else to offer since this is basic code.","body":"I did try the posted code. There is nothing wrong with it other than my comment about creating components on the EDT. I tested on Windows 11 using JDK 11. <i>I started a new java project with netbeans,</i> - did you try to just compile/execute from the command line. Maybe something in your IDE is not set up correctly. Did you try reinstalling the IDE and JDK?  I have nothing else to offer since this is basic code."},{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1690480373,"post_id":76774460,"comment_id":135363408,"body_markdown":"I edited my post and added a gif, if you don&#39;t have the same problem so maybe it&#39;s a hardware problem","body":"I edited my post and added a gif, if you don&#39;t have the same problem so maybe it&#39;s a hardware problem"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1690480518,"post_id":76774460,"comment_id":135363435,"body_markdown":"And once again the posted code doesn&#39;t match the gif. The gif includes a label. We can&#39;t trust anything your post.","body":"And once again the posted code doesn&#39;t match the gif. The gif includes a label. We can&#39;t trust anything your post."},{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1690480981,"post_id":76774460,"comment_id":135363544,"body_markdown":"Yes but the problem isn&#39;t related to the code","body":"Yes but the problem isn&#39;t related to the code"},{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1690481078,"post_id":76774460,"comment_id":135363558,"body_markdown":"I took that gif from an unanswered question on stack overflow, the code has nothing to do with it, do you understand ?","body":"I took that gif from an unanswered question on stack overflow, the code has nothing to do with it, do you understand ?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1690481502,"post_id":76774460,"comment_id":135363648,"body_markdown":"Any image/gif you post should match the code you post so we know we are seeing the behaviour of the posted code.","body":"Any image/gif you post should match the code you post so we know we are seeing the behaviour of the posted code."}],"answers":[{"comments":[{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1690478404,"post_id":76776073,"comment_id":135363054,"body_markdown":"Thank you for your answer, but that&#39;s not the problem here","body":"Thank you for your answer, but that&#39;s not the problem here"},{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1690478793,"post_id":76776073,"comment_id":135363120,"body_markdown":"I&#39;m sorry, it&#39;s my fault, the problem wasn&#39;t asked well, again thank you so much for your answer and the effort you put to answer my question.","body":"I&#39;m sorry, it&#39;s my fault, the problem wasn&#39;t asked well, again thank you so much for your answer and the effort you put to answer my question."}],"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1690423279,"creation_date":1690423279,"answer_id":76776073,"question_id":76774460,"body_markdown":"&gt; I reduce this delay by setting a timer that revalidate and repaint the component every 100ms :\r\n&gt; \r\n&gt;     resizeTimer = new Timer(100, (e) -&gt; {\r\n&gt;            imagePanel.updateScaledImage();\r\n&gt;            revalidate();\r\n&gt;            repaint();\r\n&gt;     });    \r\n&gt; Is there a better way ?\r\n\r\nAhhh, I wouldn&#39;t be doing this constantly, if that&#39;s what you&#39;re doing, that&#39;s very expensive.\r\n\r\nIt is likely that `updateScaledImage` is blocking the Event Dispatching Thread, preventing the UI from been painted until it completes OR your paint routine is blocking the Event Dispatching Thread during a paint pass, but that&#39;s all just guess work, as you&#39;ve not provided a runnable example.\r\n\r\nAs stated, the likely cause is somewhere in your code, identifying it, is another issue.\r\n\r\nWhat I&#39;ve done in the past is used a &quot;coalescing callback&quot; coupled with a fast/low quality scaling approach.\r\n\r\nThis means, until there is a sufficient delay between resize events, I&#39;d be using a fast/low quality scaling approach to render &quot;something&quot; to the screen.  Once a &quot;sufficient delay&quot; between resize events occurs, then I&#39;d trigger a slow/high quality scale pass in a background thread, eventually updating the UI with this version.\r\n\r\nNow remember, Swing is single threaded and NOT thread safe.  This means you shouldn&#39;t be executing blocking or long running operations within the Event Dispatching Thread and you shouldn&#39;t be updating the UI (or any state the UI relies on) from outside the Event Dispatching Thread.\r\n\r\nTo this end, I&#39;ve made us of a Swing `Timer` (to act as my &quot;coalescing callback&quot; workflow) and a `SwingWorker` to perform the high quality scale.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n*nb: The original image is 1920x1080. I&#39;m also applying an `AlphaComposite` when the component is using the &quot;fast scaling&quot;, so you can see when the &quot;high quality&quot; image becomes available.*\r\n\r\n    import java.awt.AlphaComposite;\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Dimension;\r\n    import java.awt.EventQueue;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.RenderingHints;\r\n    import java.awt.Transparency;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.awt.event.ComponentAdapter;\r\n    import java.awt.event.ComponentEvent;\r\n    import java.awt.image.BufferedImage;\r\n    import java.beans.PropertyChangeEvent;\r\n    import java.beans.PropertyChangeListener;\r\n    import java.io.IOException;\r\n    import java.time.Instant;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    import java.util.concurrent.ExecutionException;\r\n    import java.util.logging.Level;\r\n    import java.util.logging.Logger;\r\n    import javax.imageio.ImageIO;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.SwingWorker;\r\n    import javax.swing.Timer;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    try {\r\n                        BufferedImage image = ImageIO.read(getClass().getResource(&quot;/images/Mando01.jpeg&quot;));\r\n                        JFrame frame = new JFrame();\r\n                        frame.add(new ImagePane(image));\r\n                        frame.pack();\r\n                        frame.setLocationRelativeTo(null);\r\n                        frame.setVisible(true);\r\n                    } catch (IOException ex) {\r\n                        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        public class ImagePane extends JPanel {\r\n            private Timer resizeTimer;\r\n            private BufferedImage masterImage;\r\n            private BufferedImage scaledImage;\r\n            private Scaler scaler;\r\n\r\n            public ImagePane(BufferedImage masterImage) {\r\n                this.masterImage = masterImage;\r\n                this.scaledImage = masterImage;\r\n\r\n                scaler = new Scaler(masterImage);\r\n                // This timer is &quot;reset&quot; each time the component is resized\r\n                // This is an example of a &quot;coalescing callback&quot;.  This means, rather\r\n                // then responding to each resize event, which could cause a degradation\r\n                // of the performance, we wait until no new events have occured with\r\n                // a 250 millisecond period before we perform our action\r\n                resizeTimer = new Timer(250, new ActionListener() {\r\n                    private Object currentToken;\r\n                    // Adapter so we can extract the scaled image from the worker\r\n                    private SwingWorkerAdapter&lt;ResizeWorker&gt; workerAdapter = new SwingWorkerAdapter&lt;&gt;() {\r\n                        @Override\r\n                        protected void workerDone(ResizeWorker worker) {\r\n                            try {\r\n                                // The important part is the concept of the token\r\n                                // Because we can&#39;t &quot;stop&quot; the worker, we need some\r\n                                // to determine if we&#39;re interested in the results or\r\n                                // not.  This uses a token based approach, but you\r\n                                // could simply remove the adapter from the previous\r\n                                // worker and apply it to the new worker\r\n                                if (!worker.getToken().equals(currentToken)) {\r\n                                    return;\r\n                                }\r\n                                scaledImage = worker.get();\r\n                                repaint();\r\n                            } catch (InterruptedException ex) {\r\n                                Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);\r\n                            } catch (ExecutionException ex) {\r\n                                Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);\r\n                            }\r\n                        }\r\n                    };\r\n\r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        // Just create something that is equatable and is relative\r\n                        // unique within your context\r\n                        currentToken = Instant.now();\r\n                        // Offload the work to a background thread, so we can keep\r\n                        // the UI responsive\r\n                        ResizeWorker worker = new ResizeWorker(currentToken, scaler, getSize());\r\n                        worker.addPropertyChangeListener(workerAdapter);\r\n                        worker.execute();\r\n                        repaint();\r\n                    }\r\n                });\r\n                resizeTimer.setRepeats(false);\r\n                addComponentListener(new ComponentAdapter() {\r\n                    @Override\r\n                    public void componentResized(ComponentEvent e) {\r\n                        scaledImage = null;\r\n                        resizeTimer.restart();\r\n                    }\r\n                });\r\n                setLayout(new BorderLayout());\r\n            }\r\n\r\n            @Override\r\n            public Dimension getPreferredSize() {\r\n                return new Dimension(scaledImage.getWidth(), scaledImage.getHeight());\r\n            }\r\n\r\n            @Override\r\n            protected void paintComponent(Graphics g) {\r\n                super.paintComponent(g);\r\n                Graphics2D g2d = (Graphics2D) g.create();\r\n                if (scaledImage != null) {\r\n                    int x = (getWidth() - scaledImage.getWidth()) / 2;\r\n                    int y = (getHeight() - scaledImage.getHeight()) / 2;\r\n                    g2d.drawImage(scaledImage, x, y, this);\r\n                } else {\r\n                    Dimension scaleSize = scaler.getScaledSizeToFill(getSize());\r\n                    int x = (getWidth() - scaleSize.width) / 2;\r\n                    int y = (getHeight() - scaleSize.height) / 2;\r\n                    // I&#39;ve just applied a alpha composite so I can see when we&#39;re\r\n                    // do a &quot;quick&quot; render\r\n                    g2d.setComposite(AlphaComposite.SrcOver.derive(0.1f));\r\n                    // This might not be the fastest method, but it is eaisly \r\n                    // available\r\n                    g2d.drawImage(masterImage, x, y, scaleSize.width, scaleSize.height, this);\r\n                }\r\n                g2d.dispose();\r\n            }\r\n        }\r\n\r\n        // This makes it easier to deal with the PropertyChangeListener support of\r\n        // SwingWorker and allows you to focus on only the states you are interested\r\n        // in\r\n        public class SwingWorkerAdapter&lt;W extends SwingWorker&gt; implements PropertyChangeListener {\r\n            @Override\r\n            public void propertyChange(PropertyChangeEvent evt) {\r\n                W worker = (W) evt.getSource();\r\n                switch (evt.getPropertyName()) {\r\n                    case &quot;state&quot;:\r\n                        workerStateChanged(worker);\r\n                        switch (worker.getState()) {\r\n                            case STARTED:\r\n                                workerStarted(worker);\r\n                                break;\r\n                            case DONE:\r\n                                workerDone(worker);\r\n                                break;\r\n                        }\r\n                        break;\r\n                    case &quot;progress&quot;:\r\n                        workerProgressUpdated(worker);\r\n                        break;\r\n                }\r\n            }\r\n\r\n            protected void workerProgressUpdated(W worker) {\r\n            }\r\n\r\n            protected void workerStateChanged(W worker) {\r\n            }\r\n\r\n            protected void workerStarted(W worker) {\r\n            }\r\n\r\n            protected void workerDone(W worker) {\r\n            }\r\n\r\n        }\r\n\r\n        // This SwingWorker performs the &quot;quality&quot; scaling workflow, which might\r\n        // take some time to execute, so we do it in the background\r\n        public class ResizeWorker extends SwingWorker&lt;BufferedImage, BufferedImage&gt; {\r\n            private Object token;\r\n            private Scaler scaler;\r\n            private Dimension targetSize;\r\n\r\n            public ResizeWorker(Object token, Scaler scaler, Dimension targetSize) {\r\n                this.token = token;\r\n                this.scaler = scaler;\r\n                this.targetSize = targetSize;\r\n            }\r\n\r\n            public Object getToken() {\r\n                return token;\r\n            }\r\n\r\n            @Override\r\n            protected BufferedImage doInBackground() throws Exception {\r\n                BufferedImage scaledImage = scaler.getScaledInstanceToFill(targetSize);\r\n                publish(scaledImage);\r\n                return scaledImage;\r\n            }\r\n        }\r\n\r\n        // Utility class that uses a &quot;divide and conqure&quot; approach to the scaling\r\n        // of images, this generally produces a higher quality image over using\r\n        // Image#getScaledInstance in a single step\r\n        public class Scaler {\r\n            private BufferedImage master;\r\n            private Dimension masterSize;\r\n\r\n            private Map&lt;RenderingHints.Key, Object&gt; renderingHints = new HashMap&lt;&gt;();\r\n\r\n            public Scaler(BufferedImage master) {\r\n                this.master = master;\r\n                masterSize = new Dimension(master.getWidth(), master.getHeight());\r\n                renderingHints.put(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n                renderingHints.put(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);\r\n                renderingHints.put(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n                renderingHints.put(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);\r\n                renderingHints.put(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);\r\n                renderingHints.put(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);\r\n                renderingHints.put(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n                renderingHints.put(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\r\n                renderingHints.put(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);\r\n            }\r\n\r\n            public BufferedImage getScaledInstanceToFit(Dimension size) {\r\n                return getScaledInstance(getScaleFactorToFit(size));\r\n            }\r\n\r\n            public BufferedImage getScaledInstanceToFill(Dimension size) {\r\n                return getScaledInstance(getScaleFactorToFill(size));\r\n            }\r\n\r\n            public Dimension getScaledSizeToFit(Dimension targetSize) {\r\n                return getScaledSizeForScaleFactor(getScaleFactorToFit(targetSize));\r\n            }\r\n\r\n            public Dimension getScaledSizeToFill(Dimension targetSize) {\r\n                return getScaledSizeForScaleFactor(getScaleFactorToFill(targetSize));\r\n            }\r\n\r\n            protected double getScaleFactor(int masterSize, int targetSize) {\r\n                return (double) targetSize / (double) masterSize;\r\n            }\r\n\r\n            protected double getScaleFactorToFit(Dimension toFit) {\r\n                double dScaleWidth = getScaleFactor(masterSize.width, toFit.width);\r\n                double dScaleHeight = getScaleFactor(masterSize.height, toFit.height);\r\n                return Math.min(dScaleHeight, dScaleWidth);\r\n            }\r\n\r\n            protected double getScaleFactorToFill(Dimension targetSize) {\r\n                double dScaleWidth = getScaleFactor(masterSize.width, targetSize.width);\r\n                double dScaleHeight = getScaleFactor(masterSize.height, targetSize.height);\r\n                return Math.max(dScaleHeight, dScaleWidth);\r\n            }\r\n\r\n            protected Dimension getScaledSizeForScaleFactor(double scaleFactor) {\r\n                int targetWidth = (int) Math.round(masterSize.getWidth() * scaleFactor);\r\n                int targetHeight = (int) Math.round(masterSize.getHeight() * scaleFactor);\r\n                return new Dimension(targetWidth, targetHeight);\r\n            }\r\n\r\n            protected BufferedImage getScaledInstance(double dScaleFactor) {\r\n                BufferedImage imgScale = master;\r\n                int targetWidth = (int) Math.round(masterSize.getWidth() * dScaleFactor);\r\n                int targetHeight = (int) Math.round(masterSize.getHeight() * dScaleFactor);\r\n\r\n                if (dScaleFactor &lt;= 1.0d) {\r\n                    imgScale = getScaledDownInstance(targetWidth, targetHeight);\r\n                } else {\r\n                    imgScale = getScaledUpInstance(targetWidth, targetHeight);\r\n                }\r\n\r\n                return imgScale;\r\n            }\r\n\r\n            protected BufferedImage getScaledDownInstance(\r\n                    int targetWidth,\r\n                    int targetHeight) {\r\n\r\n                int type = (master.getTransparency() == Transparency.OPAQUE)\r\n                        ? BufferedImage.TYPE_INT_RGB : BufferedImage.TYPE_INT_ARGB;\r\n\r\n                BufferedImage scaled = master;\r\n\r\n                if (targetHeight &gt; 0 || targetWidth &gt; 0) {\r\n                    int width = master.getWidth();\r\n                    int height = master.getHeight();\r\n\r\n                    do {\r\n                        if (width &gt; targetWidth) {\r\n                            width /= 2;\r\n                            if (width &lt; targetWidth) {\r\n                                width = targetWidth;\r\n                            }\r\n                        }\r\n                        if (height &gt; targetHeight) {\r\n                            height /= 2;\r\n                            if (height &lt; targetHeight) {\r\n                                height = targetHeight;\r\n                            }\r\n                        }\r\n\r\n                        BufferedImage tmp = new BufferedImage(Math.max(width, 1), Math.max(height, 1), type);\r\n                        Graphics2D g2 = tmp.createGraphics();\r\n                        g2.setRenderingHints(renderingHints);\r\n                        g2.drawImage(scaled, 0, 0, width, height, null);\r\n                        g2.dispose();\r\n\r\n                        scaled = tmp;\r\n                    } while (width != targetWidth || height != targetHeight);\r\n                } else {\r\n                    scaled = new BufferedImage(1, 1, type);\r\n                }\r\n\r\n                return scaled;\r\n            }\r\n\r\n            protected BufferedImage getScaledUpInstance(\r\n                    int targetWidth,\r\n                    int targetHeight) {\r\n\r\n                int type = BufferedImage.TYPE_INT_ARGB;\r\n\r\n                BufferedImage ret = (BufferedImage) master;\r\n                int width = master.getWidth();\r\n                int height = master.getHeight();\r\n\r\n                do {\r\n                    if (width &lt; targetWidth) {\r\n                        width *= 2;\r\n                        if (width &gt; targetWidth) {\r\n                            width = targetWidth;\r\n                        }\r\n                    }\r\n\r\n                    if (height &lt; targetHeight) {\r\n                        height *= 2;\r\n                        if (height &gt; targetHeight) {\r\n                            height = targetHeight;\r\n                        }\r\n                    }\r\n\r\n                    BufferedImage tmp = new BufferedImage(width, height, type);\r\n                    Graphics2D g2 = tmp.createGraphics();\r\n                    g2.setRenderingHints(renderingHints);\r\n                    g2.drawImage(ret, 0, 0, width, height, null);\r\n                    g2.dispose();\r\n\r\n                    ret = tmp;\r\n                } while (width != targetWidth || height != targetHeight);\r\n                return ret;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/U7v3b.gif\r\n\r\nPlease beware, this is just one implementation of the described approach, you might find a different way to implement which better fits your own needs.","title":"Black background on fast resizing a JFrame on windows","body":"<blockquote>\n<p>I reduce this delay by setting a timer that revalidate and repaint the component every 100ms :</p>\n<pre><code>resizeTimer = new Timer(100, (e) -&gt; {\n       imagePanel.updateScaledImage();\n       revalidate();\n       repaint();\n});    \n</code></pre>\n<p>Is there a better way ?</p>\n</blockquote>\n<p>Ahhh, I wouldn't be doing this constantly, if that's what you're doing, that's very expensive.</p>\n<p>It is likely that <code>updateScaledImage</code> is blocking the Event Dispatching Thread, preventing the UI from been painted until it completes OR your paint routine is blocking the Event Dispatching Thread during a paint pass, but that's all just guess work, as you've not provided a runnable example.</p>\n<p>As stated, the likely cause is somewhere in your code, identifying it, is another issue.</p>\n<p>What I've done in the past is used a &quot;coalescing callback&quot; coupled with a fast/low quality scaling approach.</p>\n<p>This means, until there is a sufficient delay between resize events, I'd be using a fast/low quality scaling approach to render &quot;something&quot; to the screen.  Once a &quot;sufficient delay&quot; between resize events occurs, then I'd trigger a slow/high quality scale pass in a background thread, eventually updating the UI with this version.</p>\n<p>Now remember, Swing is single threaded and NOT thread safe.  This means you shouldn't be executing blocking or long running operations within the Event Dispatching Thread and you shouldn't be updating the UI (or any state the UI relies on) from outside the Event Dispatching Thread.</p>\n<p>To this end, I've made us of a Swing <code>Timer</code> (to act as my &quot;coalescing callback&quot; workflow) and a <code>SwingWorker</code> to perform the high quality scale.</p>\n<p><a href=\"https://i.stack.imgur.com/U7v3b.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U7v3b.gif\" alt=\"enter image description here\" /></a></p>\n<p><em>nb: The original image is 1920x1080. I'm also applying an <code>AlphaComposite</code> when the component is using the &quot;fast scaling&quot;, so you can see when the &quot;high quality&quot; image becomes available.</em></p>\n<pre><code>import java.awt.AlphaComposite;\nimport java.awt.BorderLayout;\nimport java.awt.Dimension;\nimport java.awt.EventQueue;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.RenderingHints;\nimport java.awt.Transparency;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.event.ComponentAdapter;\nimport java.awt.event.ComponentEvent;\nimport java.awt.image.BufferedImage;\nimport java.beans.PropertyChangeEvent;\nimport java.beans.PropertyChangeListener;\nimport java.io.IOException;\nimport java.time.Instant;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.concurrent.ExecutionException;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\nimport javax.imageio.ImageIO;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.SwingWorker;\nimport javax.swing.Timer;\n\npublic class Main {\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    BufferedImage image = ImageIO.read(getClass().getResource(&quot;/images/Mando01.jpeg&quot;));\n                    JFrame frame = new JFrame();\n                    frame.add(new ImagePane(image));\n                    frame.pack();\n                    frame.setLocationRelativeTo(null);\n                    frame.setVisible(true);\n                } catch (IOException ex) {\n                    Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);\n                }\n            }\n        });\n    }\n\n    public class ImagePane extends JPanel {\n        private Timer resizeTimer;\n        private BufferedImage masterImage;\n        private BufferedImage scaledImage;\n        private Scaler scaler;\n\n        public ImagePane(BufferedImage masterImage) {\n            this.masterImage = masterImage;\n            this.scaledImage = masterImage;\n\n            scaler = new Scaler(masterImage);\n            // This timer is &quot;reset&quot; each time the component is resized\n            // This is an example of a &quot;coalescing callback&quot;.  This means, rather\n            // then responding to each resize event, which could cause a degradation\n            // of the performance, we wait until no new events have occured with\n            // a 250 millisecond period before we perform our action\n            resizeTimer = new Timer(250, new ActionListener() {\n                private Object currentToken;\n                // Adapter so we can extract the scaled image from the worker\n                private SwingWorkerAdapter&lt;ResizeWorker&gt; workerAdapter = new SwingWorkerAdapter&lt;&gt;() {\n                    @Override\n                    protected void workerDone(ResizeWorker worker) {\n                        try {\n                            // The important part is the concept of the token\n                            // Because we can't &quot;stop&quot; the worker, we need some\n                            // to determine if we're interested in the results or\n                            // not.  This uses a token based approach, but you\n                            // could simply remove the adapter from the previous\n                            // worker and apply it to the new worker\n                            if (!worker.getToken().equals(currentToken)) {\n                                return;\n                            }\n                            scaledImage = worker.get();\n                            repaint();\n                        } catch (InterruptedException ex) {\n                            Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);\n                        } catch (ExecutionException ex) {\n                            Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);\n                        }\n                    }\n                };\n\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    // Just create something that is equatable and is relative\n                    // unique within your context\n                    currentToken = Instant.now();\n                    // Offload the work to a background thread, so we can keep\n                    // the UI responsive\n                    ResizeWorker worker = new ResizeWorker(currentToken, scaler, getSize());\n                    worker.addPropertyChangeListener(workerAdapter);\n                    worker.execute();\n                    repaint();\n                }\n            });\n            resizeTimer.setRepeats(false);\n            addComponentListener(new ComponentAdapter() {\n                @Override\n                public void componentResized(ComponentEvent e) {\n                    scaledImage = null;\n                    resizeTimer.restart();\n                }\n            });\n            setLayout(new BorderLayout());\n        }\n\n        @Override\n        public Dimension getPreferredSize() {\n            return new Dimension(scaledImage.getWidth(), scaledImage.getHeight());\n        }\n\n        @Override\n        protected void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            Graphics2D g2d = (Graphics2D) g.create();\n            if (scaledImage != null) {\n                int x = (getWidth() - scaledImage.getWidth()) / 2;\n                int y = (getHeight() - scaledImage.getHeight()) / 2;\n                g2d.drawImage(scaledImage, x, y, this);\n            } else {\n                Dimension scaleSize = scaler.getScaledSizeToFill(getSize());\n                int x = (getWidth() - scaleSize.width) / 2;\n                int y = (getHeight() - scaleSize.height) / 2;\n                // I've just applied a alpha composite so I can see when we're\n                // do a &quot;quick&quot; render\n                g2d.setComposite(AlphaComposite.SrcOver.derive(0.1f));\n                // This might not be the fastest method, but it is eaisly \n                // available\n                g2d.drawImage(masterImage, x, y, scaleSize.width, scaleSize.height, this);\n            }\n            g2d.dispose();\n        }\n    }\n\n    // This makes it easier to deal with the PropertyChangeListener support of\n    // SwingWorker and allows you to focus on only the states you are interested\n    // in\n    public class SwingWorkerAdapter&lt;W extends SwingWorker&gt; implements PropertyChangeListener {\n        @Override\n        public void propertyChange(PropertyChangeEvent evt) {\n            W worker = (W) evt.getSource();\n            switch (evt.getPropertyName()) {\n                case &quot;state&quot;:\n                    workerStateChanged(worker);\n                    switch (worker.getState()) {\n                        case STARTED:\n                            workerStarted(worker);\n                            break;\n                        case DONE:\n                            workerDone(worker);\n                            break;\n                    }\n                    break;\n                case &quot;progress&quot;:\n                    workerProgressUpdated(worker);\n                    break;\n            }\n        }\n\n        protected void workerProgressUpdated(W worker) {\n        }\n\n        protected void workerStateChanged(W worker) {\n        }\n\n        protected void workerStarted(W worker) {\n        }\n\n        protected void workerDone(W worker) {\n        }\n\n    }\n\n    // This SwingWorker performs the &quot;quality&quot; scaling workflow, which might\n    // take some time to execute, so we do it in the background\n    public class ResizeWorker extends SwingWorker&lt;BufferedImage, BufferedImage&gt; {\n        private Object token;\n        private Scaler scaler;\n        private Dimension targetSize;\n\n        public ResizeWorker(Object token, Scaler scaler, Dimension targetSize) {\n            this.token = token;\n            this.scaler = scaler;\n            this.targetSize = targetSize;\n        }\n\n        public Object getToken() {\n            return token;\n        }\n\n        @Override\n        protected BufferedImage doInBackground() throws Exception {\n            BufferedImage scaledImage = scaler.getScaledInstanceToFill(targetSize);\n            publish(scaledImage);\n            return scaledImage;\n        }\n    }\n\n    // Utility class that uses a &quot;divide and conqure&quot; approach to the scaling\n    // of images, this generally produces a higher quality image over using\n    // Image#getScaledInstance in a single step\n    public class Scaler {\n        private BufferedImage master;\n        private Dimension masterSize;\n\n        private Map&lt;RenderingHints.Key, Object&gt; renderingHints = new HashMap&lt;&gt;();\n\n        public Scaler(BufferedImage master) {\n            this.master = master;\n            masterSize = new Dimension(master.getWidth(), master.getHeight());\n            renderingHints.put(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n            renderingHints.put(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);\n            renderingHints.put(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n            renderingHints.put(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);\n            renderingHints.put(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);\n            renderingHints.put(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);\n            renderingHints.put(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n            renderingHints.put(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\n            renderingHints.put(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);\n        }\n\n        public BufferedImage getScaledInstanceToFit(Dimension size) {\n            return getScaledInstance(getScaleFactorToFit(size));\n        }\n\n        public BufferedImage getScaledInstanceToFill(Dimension size) {\n            return getScaledInstance(getScaleFactorToFill(size));\n        }\n\n        public Dimension getScaledSizeToFit(Dimension targetSize) {\n            return getScaledSizeForScaleFactor(getScaleFactorToFit(targetSize));\n        }\n\n        public Dimension getScaledSizeToFill(Dimension targetSize) {\n            return getScaledSizeForScaleFactor(getScaleFactorToFill(targetSize));\n        }\n\n        protected double getScaleFactor(int masterSize, int targetSize) {\n            return (double) targetSize / (double) masterSize;\n        }\n\n        protected double getScaleFactorToFit(Dimension toFit) {\n            double dScaleWidth = getScaleFactor(masterSize.width, toFit.width);\n            double dScaleHeight = getScaleFactor(masterSize.height, toFit.height);\n            return Math.min(dScaleHeight, dScaleWidth);\n        }\n\n        protected double getScaleFactorToFill(Dimension targetSize) {\n            double dScaleWidth = getScaleFactor(masterSize.width, targetSize.width);\n            double dScaleHeight = getScaleFactor(masterSize.height, targetSize.height);\n            return Math.max(dScaleHeight, dScaleWidth);\n        }\n\n        protected Dimension getScaledSizeForScaleFactor(double scaleFactor) {\n            int targetWidth = (int) Math.round(masterSize.getWidth() * scaleFactor);\n            int targetHeight = (int) Math.round(masterSize.getHeight() * scaleFactor);\n            return new Dimension(targetWidth, targetHeight);\n        }\n\n        protected BufferedImage getScaledInstance(double dScaleFactor) {\n            BufferedImage imgScale = master;\n            int targetWidth = (int) Math.round(masterSize.getWidth() * dScaleFactor);\n            int targetHeight = (int) Math.round(masterSize.getHeight() * dScaleFactor);\n\n            if (dScaleFactor &lt;= 1.0d) {\n                imgScale = getScaledDownInstance(targetWidth, targetHeight);\n            } else {\n                imgScale = getScaledUpInstance(targetWidth, targetHeight);\n            }\n\n            return imgScale;\n        }\n\n        protected BufferedImage getScaledDownInstance(\n                int targetWidth,\n                int targetHeight) {\n\n            int type = (master.getTransparency() == Transparency.OPAQUE)\n                    ? BufferedImage.TYPE_INT_RGB : BufferedImage.TYPE_INT_ARGB;\n\n            BufferedImage scaled = master;\n\n            if (targetHeight &gt; 0 || targetWidth &gt; 0) {\n                int width = master.getWidth();\n                int height = master.getHeight();\n\n                do {\n                    if (width &gt; targetWidth) {\n                        width /= 2;\n                        if (width &lt; targetWidth) {\n                            width = targetWidth;\n                        }\n                    }\n                    if (height &gt; targetHeight) {\n                        height /= 2;\n                        if (height &lt; targetHeight) {\n                            height = targetHeight;\n                        }\n                    }\n\n                    BufferedImage tmp = new BufferedImage(Math.max(width, 1), Math.max(height, 1), type);\n                    Graphics2D g2 = tmp.createGraphics();\n                    g2.setRenderingHints(renderingHints);\n                    g2.drawImage(scaled, 0, 0, width, height, null);\n                    g2.dispose();\n\n                    scaled = tmp;\n                } while (width != targetWidth || height != targetHeight);\n            } else {\n                scaled = new BufferedImage(1, 1, type);\n            }\n\n            return scaled;\n        }\n\n        protected BufferedImage getScaledUpInstance(\n                int targetWidth,\n                int targetHeight) {\n\n            int type = BufferedImage.TYPE_INT_ARGB;\n\n            BufferedImage ret = (BufferedImage) master;\n            int width = master.getWidth();\n            int height = master.getHeight();\n\n            do {\n                if (width &lt; targetWidth) {\n                    width *= 2;\n                    if (width &gt; targetWidth) {\n                        width = targetWidth;\n                    }\n                }\n\n                if (height &lt; targetHeight) {\n                    height *= 2;\n                    if (height &gt; targetHeight) {\n                        height = targetHeight;\n                    }\n                }\n\n                BufferedImage tmp = new BufferedImage(width, height, type);\n                Graphics2D g2 = tmp.createGraphics();\n                g2.setRenderingHints(renderingHints);\n                g2.drawImage(ret, 0, 0, width, height, null);\n                g2.dispose();\n\n                ret = tmp;\n            } while (width != targetWidth || height != targetHeight);\n            return ret;\n        }\n    }\n}\n</code></pre>\n<p>Please beware, this is just one implementation of the described approach, you might find a different way to implement which better fits your own needs.</p>\n"},{"comments":[{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1690499596,"post_id":76782400,"comment_id":135366418,"body_markdown":"I added that to my code and my problem was solved, then I decided to remove it from my code but the problem wasn&#39;t there, that&#39;s weird, I think it was a problem with my hardware.","body":"I added that to my code and my problem was solved, then I decided to remove it from my code but the problem wasn&#39;t there, that&#39;s weird, I think it was a problem with my hardware."},{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1690500151,"post_id":76782400,"comment_id":135366483,"body_markdown":"It is a hardware problem, I restarted my computer and the flicktering came back even with your code, it might be because on startup the cpu is too busy.","body":"It is a hardware problem, I restarted my computer and the flicktering came back even with your code, it might be because on startup the cpu is too busy."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1690507881,"post_id":76782400,"comment_id":135367128,"body_markdown":"If you have random problems, as I have mention multiple times before, all GUI components should be created on the `EDT`. Whether this fixes the problem or not you should be doing this for any code you write.","body":"If you have random problems, as I have mention multiple times before, all GUI components should be created on the <code>EDT</code>. Whether this fixes the problem or not you should be doing this for any code you write."}],"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690481358,"creation_date":1690481358,"answer_id":76782400,"question_id":76774460,"body_markdown":"I did find a Toolkit property that causes the behaviour you describe:\r\n\r\n    import java.awt.*;\r\n    import javax.swing.*;\r\n    \r\n    public class SimpleJFrameExample {\r\n        public static void main(String[] args) {\r\n    \r\n    \t\tToolkit.getDefaultToolkit().setDynamicLayout(false);\r\n    \r\n            // Create a new JFrame\r\n            JFrame frame = new JFrame();\r\n    \r\n            // Set the size of the JFrame\r\n            frame.setSize(400, 300);\r\n    \r\n            // Make the JFrame visible\r\n            frame.setVisible(true);\r\n    \r\n            // Set the default close operation when the user clicks the close button\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        }\r\n    }\r\n\r\nIf I change it back to &quot;true&quot; the issue goes away:\r\n\r\n\t//Toolkit.getDefaultToolkit().setDynamicLayout(false);\r\n\tToolkit.getDefaultToolkit().setDynamicLayout(true);\r\n\r\nDon&#39;t know how or where this property might be set to &quot;false&quot; by default.","title":"Black background on fast resizing a JFrame on windows","body":"<p>I did find a Toolkit property that causes the behaviour you describe:</p>\n<pre><code>import java.awt.*;\nimport javax.swing.*;\n\npublic class SimpleJFrameExample {\n    public static void main(String[] args) {\n\n        Toolkit.getDefaultToolkit().setDynamicLayout(false);\n\n        // Create a new JFrame\n        JFrame frame = new JFrame();\n\n        // Set the size of the JFrame\n        frame.setSize(400, 300);\n\n        // Make the JFrame visible\n        frame.setVisible(true);\n\n        // Set the default close operation when the user clicks the close button\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    }\n}\n</code></pre>\n<p>If I change it back to &quot;true&quot; the issue goes away:</p>\n<pre><code>//Toolkit.getDefaultToolkit().setDynamicLayout(false);\nToolkit.getDefaultToolkit().setDynamicLayout(true);\n</code></pre>\n<p>Don't know how or where this property might be set to &quot;false&quot; by default.</p>\n"}],"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":186,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76776073,"answer_count":2,"score":1,"last_activity_date":1691131240,"creation_date":1690399708,"question_id":76774460,"body_markdown":"I started a new java project with netbeans, I created a `JFrame` then I launched my app then I noticed a black background that appears when resizing the window\r\n```\r\nimport javax.swing.JFrame;\r\n\r\npublic class SimpleJFrameExample {\r\n    public static void main(String[] args) {\r\n        // Create a new JFrame\r\n        JFrame frame = new JFrame();\r\n\r\n        // Set the size of the JFrame\r\n        frame.setSize(400, 300);\r\n\r\n        // Make the JFrame visible\r\n        frame.setVisible(true);\r\n\r\n        // Set the default close operation when the user clicks the close button\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    }\r\n}\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAs you can see there is a black backgroung that shows (in this case I&#39;, resizing to the right).\r\n\r\nI found that :\r\n&gt;This apparently has to do with the native window decorations of the window that hosts the JFrame\r\n\r\nfrom this [answer](https://stackoverflow.com/a/67043322/15160601) and it was proposing to use [`JFrame.setDefaultLookAndFeelDecorated(boolean)`](https://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html) .\r\nI tried it and I got :\r\n\r\n[![enter image description here][2]][2]\r\n\r\nwhich works and doesn&#39;t show any background when resuzing but is not what I want my window to look like so I was wondering if there is\r\na way to stop this effect and keep the normal window decoration.\r\n\r\n[![enter image description here][3]][3]\r\n\r\n  [1]: https://i.stack.imgur.com/gcLz5l.png\r\n  [2]: https://i.stack.imgur.com/t0chJl.png\r\n  [3]: https://i.stack.imgur.com/a6HyI.gif","title":"Black background on fast resizing a JFrame on windows","body":"<p>I started a new java project with netbeans, I created a <code>JFrame</code> then I launched my app then I noticed a black background that appears when resizing the window</p>\n<pre><code>import javax.swing.JFrame;\n\npublic class SimpleJFrameExample {\n    public static void main(String[] args) {\n        // Create a new JFrame\n        JFrame frame = new JFrame();\n\n        // Set the size of the JFrame\n        frame.setSize(400, 300);\n\n        // Make the JFrame visible\n        frame.setVisible(true);\n\n        // Set the default close operation when the user clicks the close button\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/gcLz5l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gcLz5l.png\" alt=\"enter image description here\" /></a></p>\n<p>As you can see there is a black backgroung that shows (in this case I', resizing to the right).</p>\n<p>I found that :</p>\n<blockquote>\n<p>This apparently has to do with the native window decorations of the window that hosts the JFrame</p>\n</blockquote>\n<p>from this <a href=\"https://stackoverflow.com/a/67043322/15160601\">answer</a> and it was proposing to use <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html\" rel=\"nofollow noreferrer\"><code>JFrame.setDefaultLookAndFeelDecorated(boolean)</code></a> .\nI tried it and I got :</p>\n<p><a href=\"https://i.stack.imgur.com/t0chJl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t0chJl.png\" alt=\"enter image description here\" /></a></p>\n<p>which works and doesn't show any background when resuzing but is not what I want my window to look like so I was wondering if there is\na way to stop this effect and keep the normal window decoration.</p>\n<p><a href=\"https://i.stack.imgur.com/a6HyI.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a6HyI.gif\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","collision-detection"],"answers":[{"comments":[{"owner":{"account_id":2584,"reputation":12778,"user_id":3609,"accept_rate":100,"display_name":"Mike B"},"score":0,"creation_date":1228256654,"post_id":335632,"comment_id":172176,"body_markdown":"This is what I was getting at. Java does have intersect, but I am struggling to apply it to the code I already have. Would I have to define the rectangle inside player() and enemy()?","body":"This is what I was getting at. Java does have intersect, but I am struggling to apply it to the code I already have. Would I have to define the rectangle inside player() and enemy()?"},{"owner":{"account_id":14349,"reputation":4064,"user_id":29445,"accept_rate":100,"display_name":"asleep"},"score":0,"creation_date":1228257066,"post_id":335632,"comment_id":172187,"body_markdown":"No.. I&#39;ve not used the painting stuff in java before, but you should definately have an object like &quot;Creature&quot;, and then create instances of Creature i.e. player/enemy or make them subclasses which you create instances of. Create object should contain all that&#39;s needed for an Update/Draw NoCharsLeft","body":"No.. I&#39;ve not used the painting stuff in java before, but you should definately have an object like &quot;Creature&quot;, and then create instances of Creature i.e. player/enemy or make them subclasses which you create instances of. Create object should contain all that&#39;s needed for an Update/Draw NoCharsLeft"}],"tags":[],"owner":{"account_id":14349,"reputation":4064,"user_id":29445,"accept_rate":100,"display_name":"asleep"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1465763839,"creation_date":1228255447,"answer_id":335632,"question_id":335600,"body_markdown":"Use a rectangle to surround each player and enemy, the height and width of the rectangles should correspond to the object you&#39;re surrounding, imagine it being in a box only big enough to fit it.\r\n\r\n\r\nNow, you move these rectangles the same as you do the objects, so they have a &#39;bounding box&#39;\r\n\r\nI&#39;m not sure if Java has this, but it might have a method on the rectangle object called .intersects() so you&#39;d do if(rectangle1.intersectS(rectangle2) to check to see if an object has collided with another.\r\n\r\nOtherwise you can get the x and y co-ordinates of the boxes and using the height/width of them detect whether they&#39;ve intersected yourself.\r\n\r\n\r\nAnyway, you can use that to either do an event on intersection (make one explode, or whatever) or prevent the movement from being drawn. (revert to previous co-ordinates)\r\n\r\n\r\n\r\nedit: here we go\r\n\r\n boolean\t\r\n\r\n&gt; intersects(Rectangle r) \r\n&gt;           Determines whether or not this Rectangle and the specified\r\n&gt; Rectangle intersect.\r\n\r\n\r\nSo I would do (and don&#39;t paste this code, it most likely won&#39;t work, not done java for a long time and I didn&#39;t do graphics when I did use it.)\r\n\r\n\r\n    Rectangle rect1 = new Rectangle(player.x, player.y, player.width, player.height);\r\n    \r\n    Rectangle rect2 = new Rectangle(enemy.x, enemy.y, enemy.width, enemy.height);\r\n    \r\n    //detects when the two rectangles hit\r\n    if(rect1.intersects(rect2))\r\n    {\r\n    \r\n    System.out.println(&quot;game over, g&quot;);\r\n    }\r\n\r\nobviously you&#39;d need to fit that in somewhere.\r\n","title":"Collision Detection between two images in Java","body":"<p>Use a rectangle to surround each player and enemy, the height and width of the rectangles should correspond to the object you're surrounding, imagine it being in a box only big enough to fit it.</p>\n\n<p>Now, you move these rectangles the same as you do the objects, so they have a 'bounding box'</p>\n\n<p>I'm not sure if Java has this, but it might have a method on the rectangle object called .intersects() so you'd do if(rectangle1.intersectS(rectangle2) to check to see if an object has collided with another.</p>\n\n<p>Otherwise you can get the x and y co-ordinates of the boxes and using the height/width of them detect whether they've intersected yourself.</p>\n\n<p>Anyway, you can use that to either do an event on intersection (make one explode, or whatever) or prevent the movement from being drawn. (revert to previous co-ordinates)</p>\n\n<p>edit: here we go</p>\n\n<p>boolean    </p>\n\n<blockquote>\n  <p>intersects(Rectangle r) \n            Determines whether or not this Rectangle and the specified\n  Rectangle intersect.</p>\n</blockquote>\n\n<p>So I would do (and don't paste this code, it most likely won't work, not done java for a long time and I didn't do graphics when I did use it.)</p>\n\n<pre><code>Rectangle rect1 = new Rectangle(player.x, player.y, player.width, player.height);\n\nRectangle rect2 = new Rectangle(enemy.x, enemy.y, enemy.width, enemy.height);\n\n//detects when the two rectangles hit\nif(rect1.intersects(rect2))\n{\n\nSystem.out.println(\"game over, g\");\n}\n</code></pre>\n\n<p>obviously you'd need to fit that in somewhere.</p>\n"},{"tags":[],"owner":{"account_id":16527,"reputation":8987,"user_id":36093,"accept_rate":100,"display_name":"Karl"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1228256776,"creation_date":1228256776,"answer_id":335686,"question_id":335600,"body_markdown":"You don&#39;t want to have the collision check code inside the painting code.  The painting needs to be fast.  Collision can go in the game loop.  Therefore you need an internal representation of the objects independent of their sprites.  ","title":"Collision Detection between two images in Java","body":"<p>You don't want to have the collision check code inside the painting code.  The painting needs to be fast.  Collision can go in the game loop.  Therefore you need an internal representation of the objects independent of their sprites.  </p>\n"},{"comments":[{"owner":{"account_id":7745,"reputation":189765,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"score":2,"creation_date":1228259059,"post_id":335758,"comment_id":172277,"body_markdown":"Java does have an intersect method: http://java.sun.com/javase/6/docs/api/java/awt/Rectangle.html#intersects(java.awt.Rectangle) .","body":"Java does have an intersect method: <a href=\"http://java.sun.com/javase/6/docs/api/java/awt/Rectangle.html#intersects(java.awt.Rectangle)\" rel=\"nofollow noreferrer\">java.sun.com/javase/6/docs/api/java/awt/&hellip;</a> ."},{"owner":{"account_id":7745,"reputation":189765,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"score":0,"creation_date":1228259094,"post_id":335758,"comment_id":172278,"body_markdown":"Argh, can&#39;t get the last ) to be included in the link. Sorry.","body":"Argh, can&#39;t get the last ) to be included in the link. Sorry."}],"tags":[],"owner":{"display_name":"user29053"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1228258655,"creation_date":1228258655,"answer_id":335758,"question_id":335600,"body_markdown":"Since Java doesn&#39;t have an intersect function (really!?) you can do collision detection by simply comparying the X and Y, Width and Height values of the bounding boxes (rectangle) for each of the objects that could potentially collide.\r\n\r\nSo...  in the base object of each colliding object... i.e. if your player and enemy have a common base you can put a simple Rectangle object called something like BoundingBox.  If the common base is a built in Java class then you&#39;ll need to create a class that extends the build in class and have the player and enemy objects extend your new class or are instances of that class.\r\n\r\nAt creation (and each tick or update) you&#39;ll need to set the BoundingBox paremeters for both your player and enemy.  I don&#39;t have the Rectangle class infront of me but its most likely something like X, Y, Width and finally Height.  X and Y are that objects location in your game world.  The width and height are self explanatory I think.  They&#39;ll most likely come out from the right of the players location though so, if the X and Y were bothe at 0 and your Width and Height were both at 256 you wouldn&#39;t see anything because the character would be at the top left outside of the screen.\r\n\r\nAnyways... to detect a collision, you&#39;ll want to compare the attributes of the player and enemy BoundingBoxes.  So something like this...\r\n\r\n     if( Player.BoundingBox.X = Enemy.BoundingBox.X &amp;&amp; If( Player.BoundingBox.Y = Enemy.BoundingBox.Y )\r\n     {\r\n          //Oh noes!  The enemy and player are on top of eachother.\r\n     }\r\n\r\nThe logic can get sort of complicated but you&#39;ll need to compare the distances between each BoundingBox and compare locations.","title":"Collision Detection between two images in Java","body":"<p>Since Java doesn't have an intersect function (really!?) you can do collision detection by simply comparying the X and Y, Width and Height values of the bounding boxes (rectangle) for each of the objects that could potentially collide.</p>\n\n<p>So...  in the base object of each colliding object... i.e. if your player and enemy have a common base you can put a simple Rectangle object called something like BoundingBox.  If the common base is a built in Java class then you'll need to create a class that extends the build in class and have the player and enemy objects extend your new class or are instances of that class.</p>\n\n<p>At creation (and each tick or update) you'll need to set the BoundingBox paremeters for both your player and enemy.  I don't have the Rectangle class infront of me but its most likely something like X, Y, Width and finally Height.  X and Y are that objects location in your game world.  The width and height are self explanatory I think.  They'll most likely come out from the right of the players location though so, if the X and Y were bothe at 0 and your Width and Height were both at 256 you wouldn't see anything because the character would be at the top left outside of the screen.</p>\n\n<p>Anyways... to detect a collision, you'll want to compare the attributes of the player and enemy BoundingBoxes.  So something like this...</p>\n\n<pre><code> if( Player.BoundingBox.X = Enemy.BoundingBox.X &amp;&amp; If( Player.BoundingBox.Y = Enemy.BoundingBox.Y )\n {\n      //Oh noes!  The enemy and player are on top of eachother.\n }\n</code></pre>\n\n<p>The logic can get sort of complicated but you'll need to compare the distances between each BoundingBox and compare locations.</p>\n"},{"tags":[],"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1228260492,"creation_date":1228260492,"answer_id":335809,"question_id":335600,"body_markdown":"Here&#39;s a useful of an open source game that uses a lot of collisions: &lt;http://robocode.sourceforge.net/&gt; \r\n\r\nYou may take a look at the code and complement with the answers written here.","title":"Collision Detection between two images in Java","body":"<p>Here's a useful of an open source game that uses a lot of collisions: <a href=\"http://robocode.sourceforge.net/\" rel=\"nofollow noreferrer\">http://robocode.sourceforge.net/</a> </p>\n\n<p>You may take a look at the code and complement with the answers written here.</p>\n"},{"comments":[{"owner":{"account_id":2584,"reputation":12778,"user_id":3609,"accept_rate":100,"display_name":"Mike B"},"score":0,"creation_date":1228677223,"post_id":335830,"comment_id":181394,"body_markdown":"Correct. My OO skills are dreadful, and the majority of my game exists in one file. Your method works, but I&#39;ve got a lot of work in trying to separate this one file into its respective classes.","body":"Correct. My OO skills are dreadful, and the majority of my game exists in one file. Your method works, but I&#39;ve got a lot of work in trying to separate this one file into its respective classes."},{"owner":{"account_id":1615458,"reputation":7096,"user_id":1493294,"accept_rate":60,"display_name":"candied_orange"},"score":1,"creation_date":1414844362,"post_id":335830,"comment_id":41975376,"body_markdown":"Oh, for... put the Rectangles in the Player and Enemy classes.  `r = e.getRectangle();` is faster and easier on the eyes.","body":"Oh, for... put the Rectangles in the Player and Enemy classes.  <code>r = e.getRectangle();</code> is faster and easier on the eyes."}],"tags":[],"owner":{"account_id":1472,"reputation":173295,"user_id":1965,"accept_rate":50,"display_name":"FlySwat"},"comment_count":2,"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1228261303,"creation_date":1228260925,"answer_id":335830,"question_id":335600,"body_markdown":"I think your problem is that you are not using good OO design for your player and enemies. Create two classes:\r\n\r\n    public class Player\r\n    {\r\n        int X;\r\n        int Y;\r\n        int Width;\r\n        int Height;\r\n    \r\n        // Getters and Setters\r\n    }\r\n    \r\n    public class Enemy\r\n    {\r\n        int X;\r\n        int Y;\r\n        int Width;\r\n        int Height;\r\n    \r\n        // Getters and Setters\r\n    }\r\n\r\nYour Player should have X,Y,Width,and Height variables.\r\n\r\nYour enemies should as well.\r\n\r\nIn your game loop, do something like this (C#):\r\n\r\n    foreach (Enemy e in EnemyCollection)\r\n    {\r\n        Rectangle r = new Rectangle(e.X,e.Y,e.Width,e.Height);\r\n        Rectangle p = new Rectangle(player.X,player.Y,player.Width,player.Height);\r\n    \r\n        // Assuming there is an intersect method, otherwise just handcompare the values\r\n        if (r.Intersects(p))\r\n        {\r\n           // A Collision!\r\n           // we know which enemy (e), so we can call e.DoCollision();\r\n           e.DoCollision();\r\n        }\r\n    }\r\n\r\nTo speed things up, don&#39;t bother checking if the enemies coords are offscreen.\r\n","title":"Collision Detection between two images in Java","body":"<p>I think your problem is that you are not using good OO design for your player and enemies. Create two classes:</p>\n\n<pre><code>public class Player\n{\n    int X;\n    int Y;\n    int Width;\n    int Height;\n\n    // Getters and Setters\n}\n\npublic class Enemy\n{\n    int X;\n    int Y;\n    int Width;\n    int Height;\n\n    // Getters and Setters\n}\n</code></pre>\n\n<p>Your Player should have X,Y,Width,and Height variables.</p>\n\n<p>Your enemies should as well.</p>\n\n<p>In your game loop, do something like this (C#):</p>\n\n<pre><code>foreach (Enemy e in EnemyCollection)\n{\n    Rectangle r = new Rectangle(e.X,e.Y,e.Width,e.Height);\n    Rectangle p = new Rectangle(player.X,player.Y,player.Width,player.Height);\n\n    // Assuming there is an intersect method, otherwise just handcompare the values\n    if (r.Intersects(p))\n    {\n       // A Collision!\n       // we know which enemy (e), so we can call e.DoCollision();\n       e.DoCollision();\n    }\n}\n</code></pre>\n\n<p>To speed things up, don't bother checking if the enemies coords are offscreen.</p>\n"},{"tags":[],"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1228296491,"creation_date":1228296491,"answer_id":336615,"question_id":335600,"body_markdown":"First, use the bounding boxes as described by [Jonathan Holland](https://stackoverflow.com/questions/335600/collision-detection-between-two-images-in-java#335632) to find if you may have a collision.\r\n\r\nFrom the (multi-color) sprites, create black and white versions. You probably already have these if your sprites are transparent (i.e. there are places which are inside the bounding box but you can still see the background). These are &quot;masks&quot;.\r\n\r\nUse `Image.getRGB()` on the mask to get at the pixels. For each pixel which isn&#39;t transparent, set a bit in an integer array (`playerArray` and `enemyArray` below). The size of the array is `height` if `width &lt;= 32` pixels, `(width+31)/32*height` otherwise. The code below is for `width &lt;= 32`.\r\n\r\nIf you have a collision of the bounding boxes, do this:\r\n\r\n    // Find the first line where the two sprites might overlap\r\n    int linePlayer, lineEnemy;\r\n    if (player.y &lt;= enemy.y) {\r\n        linePlayer = enemy.y - player.y;\r\n        lineEnemy = 0;\r\n    } else {\r\n        linePlayer = 0;\r\n        lineEnemy = player.y - enemy.y;\r\n    }\r\n    int line = Math.max(linePlayer, lineEnemy);\r\n\r\n    // Get the shift between the two\r\n    x = player.x - enemy.x;\r\n    int maxLines = Math.max(player.height, enemy.height);\r\n    for ( line &lt; maxLines; line ++) {\r\n        // if width &gt; 32, then you need a second loop here\r\n        long playerMask = playerArray[linePlayer];\r\n        long enemyMask = enemyArray[lineEnemy];\r\n        // Reproduce the shift between the two sprites\r\n        if (x &lt; 0) playerMask &lt;&lt; (-x);\r\n        else enemyMask &lt;&lt; x;\r\n        // If the two masks have common bits, binary AND will return != 0\r\n        if ((playerMask &amp; enemyMask) != 0) {\r\n            // Contact!\r\n        }\r\n\r\n    }\r\n\r\nLinks: [JGame](http://www.13thmonkey.org/~boris/jgame/), [Framework for Small Java Games](http://vredungmand.dk/programming/sjg/)","title":"Collision Detection between two images in Java","body":"<p>First, use the bounding boxes as described by <a href=\"https://stackoverflow.com/questions/335600/collision-detection-between-two-images-in-java#335632\">Jonathan Holland</a> to find if you may have a collision.</p>\n\n<p>From the (multi-color) sprites, create black and white versions. You probably already have these if your sprites are transparent (i.e. there are places which are inside the bounding box but you can still see the background). These are \"masks\".</p>\n\n<p>Use <code>Image.getRGB()</code> on the mask to get at the pixels. For each pixel which isn't transparent, set a bit in an integer array (<code>playerArray</code> and <code>enemyArray</code> below). The size of the array is <code>height</code> if <code>width &lt;= 32</code> pixels, <code>(width+31)/32*height</code> otherwise. The code below is for <code>width &lt;= 32</code>.</p>\n\n<p>If you have a collision of the bounding boxes, do this:</p>\n\n<pre><code>// Find the first line where the two sprites might overlap\nint linePlayer, lineEnemy;\nif (player.y &lt;= enemy.y) {\n    linePlayer = enemy.y - player.y;\n    lineEnemy = 0;\n} else {\n    linePlayer = 0;\n    lineEnemy = player.y - enemy.y;\n}\nint line = Math.max(linePlayer, lineEnemy);\n\n// Get the shift between the two\nx = player.x - enemy.x;\nint maxLines = Math.max(player.height, enemy.height);\nfor ( line &lt; maxLines; line ++) {\n    // if width &gt; 32, then you need a second loop here\n    long playerMask = playerArray[linePlayer];\n    long enemyMask = enemyArray[lineEnemy];\n    // Reproduce the shift between the two sprites\n    if (x &lt; 0) playerMask &lt;&lt; (-x);\n    else enemyMask &lt;&lt; x;\n    // If the two masks have common bits, binary AND will return != 0\n    if ((playerMask &amp; enemyMask) != 0) {\n        // Contact!\n    }\n\n}\n</code></pre>\n\n<p>Links: <a href=\"http://www.13thmonkey.org/~boris/jgame/\" rel=\"nofollow noreferrer\">JGame</a>, <a href=\"http://vredungmand.dk/programming/sjg/\" rel=\"nofollow noreferrer\">Framework for Small Java Games</a></p>\n"},{"tags":[],"owner":{"account_id":760499,"reputation":1,"user_id":780376,"display_name":"tyler"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1306981967,"creation_date":1306977117,"answer_id":6209407,"question_id":335600,"body_markdown":"Here&#39;s the main class from my collision detection program.  \r\nYou can see it run at: http://www.youtube.com/watch?v=JIXhCvXgjsQ\r\n\r\n\r\n    /**\r\n     *\r\n     * @author Tyler Griffin\r\n     */\r\n    import java.awt.*;\r\n    import javax.swing.*;\r\n    import java.awt.event.*;\r\n    import java.awt.GraphicsDevice.*;\r\n    import java.util.ArrayList;\r\n    import java.awt.Graphics;\r\n    import java.awt.geom.Line2D;\r\n    \r\n    \r\n    public class collision extends JFrame implements KeyListener, MouseMotionListener, MouseListener\r\n    {\r\n        ArrayList everything=new ArrayList&lt;tile&gt;();\r\n    \r\n        int time=0, x, y, width, height, up=0, down=0, left=0, right=0, mouse1=0, mouse2=0;\r\n        int mouseX, mouseY;\r\n    \r\n        GraphicsEnvironment environment = GraphicsEnvironment.getLocalGraphicsEnvironment();\r\n        GraphicsDevice screen = environment.getDefaultScreenDevice();\r\n        DisplayMode displayMode = screen.getDisplayMode();\r\n    \r\n        //private BufferStrategy strategy;\r\n    \r\n        JLayeredPane pane = new JLayeredPane();\r\n    \r\n    \t tile Tile;\r\n    \t circle Circle;\r\n    \t rectangle Rectangle;\r\n    \r\n             textPane text;\r\n    \r\n        public collision()\r\n        {\r\n            setUndecorated(screen.isFullScreenSupported());\r\n            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            setVisible(true);\r\n            setLayout(null);\r\n            setResizable(false);\r\n            screen.setFullScreenWindow(this);\r\n    \r\n    \r\n            width=displayMode.getWidth();\r\n            height=displayMode.getHeight();\r\n    \r\n    \r\n    \t\t  Circle=new circle(-(int)Math.round((double)height/7*2),-(int)Math.round((double)height/7*2),(int)Math.round((double)height/7*.85),this);\r\n    \t\t  Rectangle=new rectangle(-(int)Math.round((double)height/7*1.5),-(int)Math.round((double)height/7*1.5),(int)Math.round((double)height/7*1.5),(int)Math.round((double)height/7*1.5),this);\r\n    \t\t  Tile=Circle;\r\n    \t\t  Tile.move(mouseX-Tile.width/2, mouseY-Tile.height/2);\r\n                      text=new textPane(0,0,width,height,this);\r\n    \r\n    \t\t  everything.add(new circle((int)Math.round((double)width/100*75),(int)Math.round((double)height/100*15),(int)Math.round((double)width/100*10),this));\r\n                      everything.add(new rectangle((int)Math.round((double)width/100*70),(int)Math.round((double)height/100*60),(int)Math.round((double)width/100*20),(int)Math.round((double)height/100*20),this));\r\n                      //everything.add(new line(750,250,750,750,this));\r\n                      /*everything.add(new line(width/700*419,height/700*68,width/700*495,height/700*345,this));\r\n                      everything.add(new line(width/700*495,height/700*345,width/700*749,height/700*350,this));\r\n                      everything.add(new line(width/700*749,height/700*350,width/700*549,height/700*519,this));\r\n                      everything.add(new line(width/700*549,height/700*519,width/700*624,height/700*800,this));\r\n                      everything.add(new line(width/700*624,height/700*800,width/700*419,height/700*638,this));\r\n                      everything.add(new line(width/700*419,height/700*638,width/700*203,height/700*800,this));\r\n                      everything.add(new line(width/700*203,height/700*800,width/700*279,height/700*519,this));\r\n                      everything.add(new line(width/700*279,height/700*519,width/700*76,height/700*350,this));\r\n                      everything.add(new line(width/700*76,height/700*350,width/700*333,height/700*345,this));\r\n                      everything.add(new line(width/700*333,height/700*345,width/700*419,height/700*68,this));\r\n    \r\n                      everything.add(new line(width/950*419,height/700*68,width/950*624,height/700*800,this));\r\n                      everything.add(new line(width/950*419,height/700*68,width/950*203,height/700*800,this));\r\n                      everything.add(new line(width/950*76,height/700*350,width/950*624,height/700*800,this));\r\n                      everything.add(new line(width/950*203,height/700*800,width/950*749,height/700*350,this));\r\n                      everything.add(new rectangle(width/950*76,height/700*350,width/950*673,1,this));*/\r\n    \r\n                      everything.add(new line((int)Math.round((double)width/1350*419),(int)Math.round((double)height/1000*68),(int)Math.round((double)width/1350*624),(int)Math.round((double)height/1000*800),this));\r\n                      everything.add(new line((int)Math.round((double)width/1350*419),(int)Math.round((double)height/1000*68),(int)Math.round((double)width/1350*203),(int)Math.round((double)height/1000*800),this));\r\n                      everything.add(new line((int)Math.round((double)width/1350*76),(int)Math.round((double)height/1000*350),(int)Math.round((double)width/1350*624),(int)Math.round((double)height/1000*800),this));\r\n                      everything.add(new line((int)Math.round((double)width/1350*203),(int)Math.round((double)height/1000*800),(int)Math.round((double)width/1350*749),(int)Math.round((double)height/1000*350),this));\r\n                      everything.add(new rectangle((int)Math.round((double)width/1350*76),(int)Math.round((double)height/1000*350),(int)Math.round((double)width/1350*673),1,this));\r\n    \r\n    \r\n            addKeyListener(this);\r\n            addMouseMotionListener(this);\r\n            addMouseListener(this);\r\n        }\r\n    \r\n        public void keyReleased(KeyEvent e)\r\n        {\r\n            Object source=e.getSource();\r\n    \r\n            int released=e.getKeyCode();\r\n    \r\n            if (released==KeyEvent.VK_A){left=0;}\r\n            if (released==KeyEvent.VK_W){up=0;}\r\n            if (released==KeyEvent.VK_D){right=0;}\r\n            if (released==KeyEvent.VK_S){down=0;}\r\n        }//end keyReleased\r\n    \r\n    \r\n        public void keyPressed(KeyEvent e)\r\n        {\r\n            Object source=e.getSource();\r\n    \r\n            int pressed=e.getKeyCode();\r\n    \r\n            if (pressed==KeyEvent.VK_A){left=1;}\r\n            if (pressed==KeyEvent.VK_W){up=1;}\r\n            if (pressed==KeyEvent.VK_D){right=1;}\r\n            if (pressed==KeyEvent.VK_S){down=1;}\r\n    \r\n            if (pressed==KeyEvent.VK_PAUSE&amp;&amp;pressed==KeyEvent.VK_P)\r\n            {\r\n                //if (paused==0){paused=1;}\r\n                //else paused=0;\r\n            }\r\n        }//end keyPressed\r\n    \r\n        public void keyTyped(KeyEvent e){}\r\n    \r\n    //***********************************************************************************************\r\n    \r\n        public void mouseDragged(MouseEvent e)\r\n        {\r\n            mouseX=(e.getX());\r\n            mouseY=(e.getY());\r\n    \r\n    \t\t  //run();\r\n        }\r\n    \r\n        public void mouseMoved(MouseEvent e)\r\n        {\r\n            mouseX=(e.getX());\r\n            mouseY=(e.getY());\r\n    \r\n    \t\t  //run();\r\n        }\r\n    \r\n    //***********************************************************************************************\r\n    \r\n        public void mousePressed(MouseEvent e)\r\n        {\r\n        \tif(e.getX()==0 &amp;&amp; e.getY()==0){System.exit(0);}\r\n    \r\n    \tmouseX=(e.getX()+x);\r\n            mouseY=(e.getY()+y);\r\n    \r\n            if(Tile instanceof circle)\r\n            {\r\n                    Circle.move(0-Circle.width, 0-Circle.height);\r\n                    Circle.setBounds(Circle.x, Circle.y, Circle.width, Circle.height);\r\n                    Tile=Rectangle;\r\n            }\r\n            else\r\n            {\r\n                    Rectangle.move(0-Rectangle.width, 0-Rectangle.height);\r\n                    Rectangle.setBounds(Rectangle.x, Rectangle.y, Rectangle.width, Rectangle.height);\r\n                    Tile=Circle;\r\n            }\r\n    \r\n            Tile.move(mouseX-Tile.width/2, mouseY-Tile.height/2);\r\n        }\r\n    \r\n        public void mouseReleased(MouseEvent e)\r\n        {\r\n             //run();\r\n        }\r\n    \r\n        public void mouseEntered(MouseEvent e){}\r\n        public void mouseExited(MouseEvent e){}\r\n    \r\n        public void mouseClicked(MouseEvent e){}\r\n    \r\n    //***********************************************************************************************\r\n    \r\n        public void run()//run collision detection\r\n        {\r\n            while (this == this)\r\n            {\r\n                Tile.move(Tile.x + ((mouseX - (Tile.x + (Tile.width / 2))) / 10), Tile.y + ((mouseY - (Tile.y + (Tile.height / 2))) / 10));\r\n                //Tile.move((mouseX - Tile.width / 2), mouseY - (Tile.height / 2));\r\n    \r\n                for (int i = 0; i &lt; everything.size(); i++)\r\n                {\r\n                    tile Temp = (tile) everything.get(i);\r\n    \r\n                    if (Temp.x &lt; (Tile.x + Tile.width) &amp;&amp; (Temp.x + Temp.width) &gt; Tile.x &amp;&amp; Temp.y &lt; (Tile.y + Tile.height) &amp;&amp; (Temp.y + Temp.height) &gt; Tile.y)//rectangles collided\r\n                    {\r\n                        if (Temp instanceof rectangle)\r\n                        {\r\n                            if (Tile instanceof rectangle){rectangleRectangle(Temp);}\r\n                            else {circleRectangle(Temp);}//Tile instanceof circle\r\n                        }\r\n                        else\r\n                        {\r\n                            if (Temp instanceof circle)\r\n                            {\r\n                                if (Tile instanceof rectangle) {rectangleCircle(Temp);}\r\n                                else {circleCircle(Temp);}\r\n                            }\r\n                            else//line\r\n                            {\r\n                                if (Tile instanceof rectangle){rectangleLine(Temp);}\r\n                                else{circleLine(Temp);}\r\n                            }\r\n                        }\r\n                    }//end if\r\n                }//end for\r\n    \r\n                try {Thread.sleep(16L);}\r\n                catch (Exception e) {}\r\n    \r\n                Tile.setBounds(Tile.x, Tile.y, Tile.width, Tile.height);\r\n                //Rectangle.setBounds(x, y, width, height);\r\n                //Circle.setBounds(x, y, width, height);\r\n                repaint();\r\n    \r\n                text.out=&quot; &quot;;\r\n            }//end while loop\r\n        }//end run\r\n    \r\n    //***************************************special collision detection/handling functions************************************************\r\n    \r\n    \tvoid rectangleRectangle(tile Temp)\r\n    \t{\r\n    \t\tint lapTop, lapBot, lapLeft, lapRight, small, scootX=0, scootY=0;\r\n    \r\n    \t\tlapTop=(Temp.y+Temp.height)-Tile.y;\r\n    \t\tlapBot=(Tile.y+Tile.height)-Temp.y;\r\n    \t\tlapLeft=(Temp.x+Temp.width)-Tile.x;\r\n    \t\tlapRight=(Tile.x+Tile.width)-Temp.x;\r\n    \r\n    \t\tsmall=999999999;\r\n    \r\n    \t\tif (lapTop&lt;small){small=lapTop; scootX=0; scootY=lapTop;}\r\n    \t\tif (lapBot&lt;small){small=lapBot; scootX=0; scootY=lapBot*-1;}\r\n                    if (lapLeft&lt;small){small=lapLeft; scootX=lapLeft; scootY=0;}\r\n                    if (lapRight&lt;small){small=lapRight; scootX=lapRight*-1; scootY=0;}\r\n    \r\n    \t\tTile.move(Tile.x+scootX, Tile.y+scootY);text.out=&quot;collision detected!&quot;;\r\n    \t}\r\n    \r\n    \r\n    \r\n    \tvoid circleRectangle(tile Temp)\r\n    \t{\r\n    \t\tif((Tile.x+Tile.width/2&lt;=Temp.x+Temp.width &amp;&amp; Tile.x+Tile.width/2&gt;=Temp.x)||(Tile.y+Tile.height/2&gt;=Temp.y &amp;&amp; Tile.y+Tile.height/2&lt;=Temp.y+Temp.height))\r\n    \t\t{\r\n    \t\t\trectangleRectangle(Temp);\r\n    \t\t}\r\n    \t\telse//push from nearest corner\r\n    \t\t{\r\n    \t\t\tint x,y;\r\n    \t\t\tif(Tile.x+Tile.width/2&gt;Temp.x+Temp.width &amp;&amp; Tile.y+Tile.height/2&lt;Temp.y){x=Temp.x+Temp.width; y=Temp.y;}\r\n    \t\t\telse if(Tile.x+Tile.width/2&lt;Temp.x &amp;&amp; Tile.y+Tile.height/2&lt;Temp.y){x=Temp.x; y=Temp.y;}\r\n    \t\t\telse if(Tile.x+Tile.width/2&gt;Temp.x+Temp.width &amp;&amp; Tile.y+Tile.height/2&gt;Temp.y+Temp.height){x=Temp.x+Temp.width; y=Temp.y+Temp.height;}\r\n    \t\t\telse {x=Temp.x; y=Temp.y+Temp.height;}\r\n    \r\n    \t\t\tdouble distance = Math.sqrt(Math.pow(Tile.x+(Tile.width/2) - x, 2) + Math.pow(Tile.y+(Tile.height/2) - y, 2));\r\n    \r\n    \t\t\tif((int)Math.round(distance)&lt;Tile.height/2)\r\n    \t\t\t{\r\n                                 double normY = ((Tile.y+(Tile.height/2) - y) / distance);\r\n                                 double normX = ((Tile.x+(Tile.width/2) - x) / distance);\r\n    \r\n                                Tile.move(x-Tile.width/2+(int)Math.round(normX*((Tile.width/2))) , y-Tile.height/2+(int)Math.round(normY*((Tile.height/2))));text.out=&quot;collision detected!&quot;;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \r\n    \r\n    \tvoid rectangleCircle(tile Temp)\r\n    \t{\r\n    \t\tif((Temp.x+Temp.width/2&lt;=Tile.x+Tile.width &amp;&amp; Temp.x+Temp.width/2&gt;=Tile.x)||(Temp.y+Temp.height/2&gt;=Tile.y &amp;&amp; Temp.y+Temp.height/2&lt;=Tile.y+Tile.height))\r\n    \t\t{\r\n    \t\t\trectangleRectangle(Temp);\r\n    \t\t}\r\n    \t\telse//push from nearest corner\r\n    \t\t{\r\n    \t\t\tint x,y;\r\n    \t\t\tif(Temp.x+Temp.width/2&gt;Tile.x+Tile.width &amp;&amp; Temp.y+Temp.height/2&lt;Tile.y){x=Tile.x+Tile.width; y=Tile.y;}\r\n    \t\t\telse if(Temp.x+Temp.width/2&lt;Tile.x &amp;&amp; Temp.y+Temp.height/2&lt;Tile.y){x=Tile.x; y=Tile.y;}\r\n    \t\t\telse if(Temp.x+Temp.width/2&gt;Tile.x+Tile.width &amp;&amp; Temp.y+Temp.height/2&gt;Tile.y+Tile.height){x=Tile.x+Tile.width; y=Tile.y+Tile.height;}\r\n    \t\t\telse {x=Tile.x; y=Tile.y+Tile.height;}\r\n    \r\n    \t\t\tdouble distance = Math.sqrt(Math.pow(Temp.x+(Temp.width/2) - x, 2) + Math.pow(Temp.y+(Temp.height/2) - y, 2));\r\n    \r\n    \t\t\tif((int)Math.round(distance)&lt;Temp.height/2)\r\n    \t\t\t{\r\n    \t         double normY = ((Temp.y+(Temp.height/2) - y) / distance);\r\n    \t         double normX = ((Temp.x+(Temp.width/2) - x) / distance);\r\n    \r\n    \t         if(Temp.x+Temp.width/2&gt;Tile.x+Tile.width &amp;&amp; Temp.y+Temp.height/2&lt;Tile.y){Tile.move((Temp.x+Temp.width/2)-(int)Math.round(normX*((Temp.width/2)))-Tile.width,(Temp.y+Temp.height/2)-(int)Math.round(normY*((Temp.height/2))));text.out=&quot;collision detected!&quot;;}\r\n    \t\t\t\telse if(Temp.x+Temp.width/2&lt;Tile.x &amp;&amp; Temp.y+Temp.height/2&lt;Tile.y){Tile.move((Temp.x+Temp.width/2)-(int)Math.round(normX*((Temp.width/2))),(Temp.y+Temp.height/2)-(int)Math.round(normY*((Temp.height/2))));text.out=&quot;collision detected!&quot;;}\r\n    \t\t\t\telse if(Temp.x+Temp.width/2&gt;Tile.x+Tile.width &amp;&amp; Temp.y+Temp.height/2&gt;Tile.y+Tile.height){Tile.move((Temp.x+Temp.width/2)-(int)Math.round(normX*((Temp.width/2)))-Tile.width,(Temp.y+Temp.height/2)-(int)Math.round(normY*((Temp.height/2)))-Tile.height);text.out=&quot;collision detected!&quot;;}\r\n    \t\t\t\telse {Tile.move((Temp.x+Temp.width/2)-(int)Math.round(normX*((Temp.width/2))),(Temp.y+Temp.height/2)-(int)Math.round(normY*((Temp.height/2)))-Tile.height);text.out=&quot;collision detected!&quot;;}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \r\n    \r\n    \r\n    \tvoid circleCircle(tile Temp)\r\n    \t{\r\n    \t\tdouble distance = Math.sqrt(Math.pow((Tile.x+(Tile.width/2)) - (Temp.x+(Temp.width/2)),2) + Math.pow((Tile.y+(Tile.height/2)) - (Temp.y+(Temp.height/2)), 2));\r\n    \r\n    \t\tif((int)distance&lt;(Tile.width/2+Temp.width/2))\r\n    \t\t{\r\n                            double normX = ((Tile.x+(Tile.width/2)) - (Temp.x+(Temp.width/2))) / distance;\r\n                            double normY = ((Tile.y+(Tile.height/2)) - (Temp.y+(Temp.height/2))) / distance;\r\n    \r\n    \t\t\tTile.move((Temp.x+(Temp.width/2))+(int)Math.round(normX*(Tile.width/2+Temp.width/2))-(Tile.width/2) , (Temp.y+(Temp.height/2))+(int)Math.round(normY*(Tile.height/2+Temp.height/2))-(Tile.height/2));text.out=&quot;collision detected!&quot;;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \r\n    \r\n    \tvoid circleLine(tile Temp)\r\n    \t{\r\n                line Line=(line)Temp;\r\n    \r\n                if (Line.x1 &lt; (Tile.x + Tile.width) &amp;&amp; (Line.x1) &gt; Tile.x &amp;&amp; Line.y1 &lt; (Tile.y + Tile.height) &amp;&amp; Line.y1 &gt; Tile.y)//circle may be hitting one of the end points\r\n                {\r\n                    rectangle rec=new rectangle(Line.x1, Line.y1, 1, 1, this);\r\n                    circleRectangle(rec);\r\n                    remove(rec);\r\n                }\r\n    \r\n                if (Line.x2 &lt; (Tile.x + Tile.width) &amp;&amp; (Line.x2) &gt; Tile.x &amp;&amp; Line.y2 &lt; (Tile.y + Tile.height) &amp;&amp; Line.y2 &gt; Tile.y)//circle may be hitting one of the end points\r\n                {\r\n                    rectangle rec=new rectangle(Line.x2, Line.y2, 1, 1, this);\r\n                    circleRectangle(rec);\r\n                    remove(rec);\r\n                }\r\n    \r\n    \r\n                int x1=0, y1=0, x2=Tile.x+(Tile.width/2), y2=Tile.y+(Tile.height/2);\r\n    \r\n                x1=Tile.x+(Tile.width/2)-Line.height;//(int)Math.round(Line.xNorm*1000);\r\n                x2=Tile.x+(Tile.width/2)+Line.height;\r\n                if(Line.posSlope)\r\n                {\r\n                    y1=Tile.y+(Tile.height/2)-Line.width;\r\n                    y2=Tile.y+(Tile.height/2)+Line.width;\r\n                }\r\n                else\r\n                {\r\n                    y1=Tile.y+(Tile.height/2)+Line.width;\r\n                    y2=Tile.y+(Tile.height/2)-Line.width;\r\n                }\r\n    \r\n                Point point=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection\r\n    \r\n                if (point.x &lt; (Line.x + Line.width) &amp;&amp; point.x &gt; Line.x &amp;&amp; point.y &lt; (Line.y + Line.height) &amp;&amp; point.y &gt; Line.y)//line intersects within line segment\r\n                {\r\n                    //if(point!=null){System.out.println(point.x+&quot;,&quot;+point.y);}\r\n                    double distance = Math.sqrt(Math.pow((Tile.x+(Tile.width/2)) - point.x,2) + Math.pow((Tile.y+(Tile.width/2)) - point.y, 2));\r\n    \r\n                    if((int)distance&lt;Tile.width/2)\r\n                    {\r\n                        //System.out.println(&quot;hit&quot;);\r\n                        double normX = ((Tile.x+(Tile.width/2)) - point.x) / distance;\r\n                        double normY = ((Tile.y+(Tile.height/2)) - point.y) / distance;\r\n    \r\n                        Tile.move((point.x)+(int)Math.round(normX*(Tile.width/2))-(Tile.width/2) , (point.y)+(int)Math.round(normY*(Tile.height/2))-(Tile.height/2));text.out=&quot;collision detected!&quot;;\r\n                        //System.out.println(point.x+&quot;,&quot;+point.y);\r\n                    }\r\n                }\r\n                \r\n                //new bullet(this, (int)Math.round(tryX), (int)Math.round(tryY));\r\n    \t}\r\n    \r\n            void rectangleLine(tile Temp)\r\n    \t{\r\n                line Line=(line)Temp;\r\n                if(new Line2D.Double(Line.x1,Line.y1,Line.x2,Line.y2).intersects(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height)))\r\n                {\r\n                    if (Line.x1 &lt; (Tile.x + Tile.width) &amp;&amp; (Line.x1) &gt; Tile.x &amp;&amp; Line.y1 &lt; (Tile.y + Tile.height) &amp;&amp; Line.y1 &gt; Tile.y)//circle may be hitting one of the end points\r\n                    {\r\n                        rectangle rec=new rectangle(Line.x1, Line.y1, 1, 1, this);\r\n                        rectangleRectangle(rec);\r\n                        remove(rec);\r\n                    }\r\n    \r\n                    if (Line.x2 &lt; (Tile.x + Tile.width) &amp;&amp; (Line.x2) &gt; Tile.x &amp;&amp; Line.y2 &lt; (Tile.y + Tile.height) &amp;&amp; Line.y2 &gt; Tile.y)//circle may be hitting one of the end points\r\n                    {\r\n                        rectangle rec=new rectangle(Line.x2, Line.y2, 1, 1, this);\r\n                        rectangleRectangle(rec);\r\n                        remove(rec);\r\n                    }\r\n    \r\n                    if(Line.posSlope)//positive sloped line\r\n                    {\r\n                        //first we&#39;ll do the top left corner\r\n                        int x1=Tile.x-Line.height;\r\n                        int x2=Tile.x+Line.height;\r\n                        int y1=Tile.y-Line.width;\r\n                        int y2=Tile.y+Line.width;\r\n                        Point topPoint=new Point(-99,-99), botPoint=new Point(-99,-99);\r\n                        double topDistance=0, botDistance=0;\r\n    \r\n                        topPoint=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection\r\n    \r\n                        topDistance = Math.sqrt(Math.pow(Tile.x - topPoint.x,2) + Math.pow(Tile.y - topPoint.y, 2));\r\n    \r\n                        //new let&#39;s do the bottom right corner\r\n                        x1=Tile.x+Tile.width-Line.height;\r\n                        x2=Tile.x+Tile.width+Line.height;\r\n                        y1=Tile.y+Tile.height-Line.width;\r\n                        y2=Tile.y+Tile.height+Line.width;\r\n    \r\n                        botPoint=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection\r\n    \r\n                        botDistance = Math.sqrt(Math.pow((Tile.x+Tile.width) - botPoint.x,2) + Math.pow((Tile.y+Tile.height) - botPoint.y, 2));\r\n                        \r\n    \r\n                        if(topDistance&lt;botDistance)\r\n                        {\r\n                            if(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height).contains(topPoint) &amp;&amp; new Rectangle(Line.x,Line.y,Line.width,Line.height).contains(topPoint))\r\n                            {\r\n                                Tile.move(topPoint.x,topPoint.y);text.out=&quot;collision detected!&quot;;\r\n                            }\r\n                        }\r\n                        else\r\n                        {\r\n                            if(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height).contains(botPoint) &amp;&amp; new Rectangle(Line.x,Line.y,Line.width,Line.height).contains(botPoint))\r\n                            {\r\n                                Tile.move(botPoint.x-Tile.width,botPoint.y-Tile.height);text.out=&quot;collision detected!&quot;;\r\n                            }\r\n                        }\r\n                    }\r\n                    else//negative sloped lne\r\n                    {\r\n                        //first we&#39;ll do the top right corner\r\n                        int x1=Tile.x+Tile.width-Line.height;\r\n                        int x2=Tile.x+Tile.width+Line.height;\r\n                        int y1=Tile.y+Line.width;\r\n                        int y2=Tile.y-Line.width;\r\n                        Point topPoint=new Point(-99,-99), botPoint=new Point(-99,-99);\r\n                        double topDistance=0, botDistance=0;\r\n    \r\n                        topPoint=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection\r\n    \r\n                        topDistance = Math.sqrt(Math.pow(Tile.x + Tile.width - topPoint.x,2) + Math.pow(Tile.y - topPoint.y, 2));\r\n    \r\n                        //new let&#39;s do the bottom left corner\r\n                        x1=Tile.x-Line.height;\r\n                        x2=Tile.x+Line.height;\r\n                        y1=Tile.y+Tile.height+Line.width;\r\n                        y2=Tile.y+Tile.height-Line.width;\r\n    \r\n                        botPoint=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection\r\n    \r\n                        botDistance = Math.sqrt(Math.pow(Tile.x - botPoint.x,2) + Math.pow((Tile.y+Tile.height) - botPoint.y, 2));\r\n                        \r\n    \r\n                        if(topDistance&lt;botDistance)\r\n                        {\r\n                            if(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height).contains(topPoint) &amp;&amp; new Rectangle(Line.x,Line.y,Line.width,Line.height).contains(topPoint))\r\n                            {\r\n                                Tile.move(topPoint.x-Tile.width,topPoint.y);text.out=&quot;collision detected!&quot;;\r\n                            }\r\n                        }\r\n                        else\r\n                        {\r\n                            if(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height).contains(botPoint) &amp;&amp; new Rectangle(Line.x,Line.y,Line.width,Line.height).contains(botPoint))\r\n                            {\r\n                                Tile.move(botPoint.x,botPoint.y-Tile.height);text.out=&quot;collision detected!&quot;;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n    \t}\r\n    \r\n           public Point intersection(double x1, double y1, double x2, double y2,double x3, double y3, double x4, double y4)//I didn&#39;t write this. got it from http://www.ahristov.com/tutorial/geometry-games/intersection-lines.html (I altered it)\r\n           {\r\n                double d = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\r\n    \r\n                double xi = ((x3 - x4) * (x1 * y2 - y1 * x2) - (x1 - x2) * (x3 * y4 - y3 * x4)) / d;\r\n                double yi = ((y3 - y4) * (x1 * y2 - y1 * x2) - (y1 - y2) * (x3 * y4 - y3 * x4)) / d;\r\n    \r\n                int x=(int)Math.round(xi);\r\n                int y=(int)Math.round(yi);\r\n    \r\n                return new Point(x, y);\r\n            }\r\n            \r\n    //***************************************************************************************\r\n    \r\n        public static void main(String[] args)\r\n        {\r\n            final collision Collision=new collision();\r\n    \t\t  Collision.run();\r\n        }//end main\r\n    }//end class\r\n\r\n","title":"Collision Detection between two images in Java","body":"<p>Here's the main class from my collision detection program.<br>\nYou can see it run at: <a href=\"http://www.youtube.com/watch?v=JIXhCvXgjsQ\" rel=\"nofollow\">http://www.youtube.com/watch?v=JIXhCvXgjsQ</a></p>\n\n<pre><code>/**\n *\n * @author Tyler Griffin\n */\nimport java.awt.*;\nimport javax.swing.*;\nimport java.awt.event.*;\nimport java.awt.GraphicsDevice.*;\nimport java.util.ArrayList;\nimport java.awt.Graphics;\nimport java.awt.geom.Line2D;\n\n\npublic class collision extends JFrame implements KeyListener, MouseMotionListener, MouseListener\n{\n    ArrayList everything=new ArrayList&lt;tile&gt;();\n\n    int time=0, x, y, width, height, up=0, down=0, left=0, right=0, mouse1=0, mouse2=0;\n    int mouseX, mouseY;\n\n    GraphicsEnvironment environment = GraphicsEnvironment.getLocalGraphicsEnvironment();\n    GraphicsDevice screen = environment.getDefaultScreenDevice();\n    DisplayMode displayMode = screen.getDisplayMode();\n\n    //private BufferStrategy strategy;\n\n    JLayeredPane pane = new JLayeredPane();\n\n     tile Tile;\n     circle Circle;\n     rectangle Rectangle;\n\n         textPane text;\n\n    public collision()\n    {\n        setUndecorated(screen.isFullScreenSupported());\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        setVisible(true);\n        setLayout(null);\n        setResizable(false);\n        screen.setFullScreenWindow(this);\n\n\n        width=displayMode.getWidth();\n        height=displayMode.getHeight();\n\n\n          Circle=new circle(-(int)Math.round((double)height/7*2),-(int)Math.round((double)height/7*2),(int)Math.round((double)height/7*.85),this);\n          Rectangle=new rectangle(-(int)Math.round((double)height/7*1.5),-(int)Math.round((double)height/7*1.5),(int)Math.round((double)height/7*1.5),(int)Math.round((double)height/7*1.5),this);\n          Tile=Circle;\n          Tile.move(mouseX-Tile.width/2, mouseY-Tile.height/2);\n                  text=new textPane(0,0,width,height,this);\n\n          everything.add(new circle((int)Math.round((double)width/100*75),(int)Math.round((double)height/100*15),(int)Math.round((double)width/100*10),this));\n                  everything.add(new rectangle((int)Math.round((double)width/100*70),(int)Math.round((double)height/100*60),(int)Math.round((double)width/100*20),(int)Math.round((double)height/100*20),this));\n                  //everything.add(new line(750,250,750,750,this));\n                  /*everything.add(new line(width/700*419,height/700*68,width/700*495,height/700*345,this));\n                  everything.add(new line(width/700*495,height/700*345,width/700*749,height/700*350,this));\n                  everything.add(new line(width/700*749,height/700*350,width/700*549,height/700*519,this));\n                  everything.add(new line(width/700*549,height/700*519,width/700*624,height/700*800,this));\n                  everything.add(new line(width/700*624,height/700*800,width/700*419,height/700*638,this));\n                  everything.add(new line(width/700*419,height/700*638,width/700*203,height/700*800,this));\n                  everything.add(new line(width/700*203,height/700*800,width/700*279,height/700*519,this));\n                  everything.add(new line(width/700*279,height/700*519,width/700*76,height/700*350,this));\n                  everything.add(new line(width/700*76,height/700*350,width/700*333,height/700*345,this));\n                  everything.add(new line(width/700*333,height/700*345,width/700*419,height/700*68,this));\n\n                  everything.add(new line(width/950*419,height/700*68,width/950*624,height/700*800,this));\n                  everything.add(new line(width/950*419,height/700*68,width/950*203,height/700*800,this));\n                  everything.add(new line(width/950*76,height/700*350,width/950*624,height/700*800,this));\n                  everything.add(new line(width/950*203,height/700*800,width/950*749,height/700*350,this));\n                  everything.add(new rectangle(width/950*76,height/700*350,width/950*673,1,this));*/\n\n                  everything.add(new line((int)Math.round((double)width/1350*419),(int)Math.round((double)height/1000*68),(int)Math.round((double)width/1350*624),(int)Math.round((double)height/1000*800),this));\n                  everything.add(new line((int)Math.round((double)width/1350*419),(int)Math.round((double)height/1000*68),(int)Math.round((double)width/1350*203),(int)Math.round((double)height/1000*800),this));\n                  everything.add(new line((int)Math.round((double)width/1350*76),(int)Math.round((double)height/1000*350),(int)Math.round((double)width/1350*624),(int)Math.round((double)height/1000*800),this));\n                  everything.add(new line((int)Math.round((double)width/1350*203),(int)Math.round((double)height/1000*800),(int)Math.round((double)width/1350*749),(int)Math.round((double)height/1000*350),this));\n                  everything.add(new rectangle((int)Math.round((double)width/1350*76),(int)Math.round((double)height/1000*350),(int)Math.round((double)width/1350*673),1,this));\n\n\n        addKeyListener(this);\n        addMouseMotionListener(this);\n        addMouseListener(this);\n    }\n\n    public void keyReleased(KeyEvent e)\n    {\n        Object source=e.getSource();\n\n        int released=e.getKeyCode();\n\n        if (released==KeyEvent.VK_A){left=0;}\n        if (released==KeyEvent.VK_W){up=0;}\n        if (released==KeyEvent.VK_D){right=0;}\n        if (released==KeyEvent.VK_S){down=0;}\n    }//end keyReleased\n\n\n    public void keyPressed(KeyEvent e)\n    {\n        Object source=e.getSource();\n\n        int pressed=e.getKeyCode();\n\n        if (pressed==KeyEvent.VK_A){left=1;}\n        if (pressed==KeyEvent.VK_W){up=1;}\n        if (pressed==KeyEvent.VK_D){right=1;}\n        if (pressed==KeyEvent.VK_S){down=1;}\n\n        if (pressed==KeyEvent.VK_PAUSE&amp;&amp;pressed==KeyEvent.VK_P)\n        {\n            //if (paused==0){paused=1;}\n            //else paused=0;\n        }\n    }//end keyPressed\n\n    public void keyTyped(KeyEvent e){}\n\n//***********************************************************************************************\n\n    public void mouseDragged(MouseEvent e)\n    {\n        mouseX=(e.getX());\n        mouseY=(e.getY());\n\n          //run();\n    }\n\n    public void mouseMoved(MouseEvent e)\n    {\n        mouseX=(e.getX());\n        mouseY=(e.getY());\n\n          //run();\n    }\n\n//***********************************************************************************************\n\n    public void mousePressed(MouseEvent e)\n    {\n        if(e.getX()==0 &amp;&amp; e.getY()==0){System.exit(0);}\n\n    mouseX=(e.getX()+x);\n        mouseY=(e.getY()+y);\n\n        if(Tile instanceof circle)\n        {\n                Circle.move(0-Circle.width, 0-Circle.height);\n                Circle.setBounds(Circle.x, Circle.y, Circle.width, Circle.height);\n                Tile=Rectangle;\n        }\n        else\n        {\n                Rectangle.move(0-Rectangle.width, 0-Rectangle.height);\n                Rectangle.setBounds(Rectangle.x, Rectangle.y, Rectangle.width, Rectangle.height);\n                Tile=Circle;\n        }\n\n        Tile.move(mouseX-Tile.width/2, mouseY-Tile.height/2);\n    }\n\n    public void mouseReleased(MouseEvent e)\n    {\n         //run();\n    }\n\n    public void mouseEntered(MouseEvent e){}\n    public void mouseExited(MouseEvent e){}\n\n    public void mouseClicked(MouseEvent e){}\n\n//***********************************************************************************************\n\n    public void run()//run collision detection\n    {\n        while (this == this)\n        {\n            Tile.move(Tile.x + ((mouseX - (Tile.x + (Tile.width / 2))) / 10), Tile.y + ((mouseY - (Tile.y + (Tile.height / 2))) / 10));\n            //Tile.move((mouseX - Tile.width / 2), mouseY - (Tile.height / 2));\n\n            for (int i = 0; i &lt; everything.size(); i++)\n            {\n                tile Temp = (tile) everything.get(i);\n\n                if (Temp.x &lt; (Tile.x + Tile.width) &amp;&amp; (Temp.x + Temp.width) &gt; Tile.x &amp;&amp; Temp.y &lt; (Tile.y + Tile.height) &amp;&amp; (Temp.y + Temp.height) &gt; Tile.y)//rectangles collided\n                {\n                    if (Temp instanceof rectangle)\n                    {\n                        if (Tile instanceof rectangle){rectangleRectangle(Temp);}\n                        else {circleRectangle(Temp);}//Tile instanceof circle\n                    }\n                    else\n                    {\n                        if (Temp instanceof circle)\n                        {\n                            if (Tile instanceof rectangle) {rectangleCircle(Temp);}\n                            else {circleCircle(Temp);}\n                        }\n                        else//line\n                        {\n                            if (Tile instanceof rectangle){rectangleLine(Temp);}\n                            else{circleLine(Temp);}\n                        }\n                    }\n                }//end if\n            }//end for\n\n            try {Thread.sleep(16L);}\n            catch (Exception e) {}\n\n            Tile.setBounds(Tile.x, Tile.y, Tile.width, Tile.height);\n            //Rectangle.setBounds(x, y, width, height);\n            //Circle.setBounds(x, y, width, height);\n            repaint();\n\n            text.out=\" \";\n        }//end while loop\n    }//end run\n\n//***************************************special collision detection/handling functions************************************************\n\n    void rectangleRectangle(tile Temp)\n    {\n        int lapTop, lapBot, lapLeft, lapRight, small, scootX=0, scootY=0;\n\n        lapTop=(Temp.y+Temp.height)-Tile.y;\n        lapBot=(Tile.y+Tile.height)-Temp.y;\n        lapLeft=(Temp.x+Temp.width)-Tile.x;\n        lapRight=(Tile.x+Tile.width)-Temp.x;\n\n        small=999999999;\n\n        if (lapTop&lt;small){small=lapTop; scootX=0; scootY=lapTop;}\n        if (lapBot&lt;small){small=lapBot; scootX=0; scootY=lapBot*-1;}\n                if (lapLeft&lt;small){small=lapLeft; scootX=lapLeft; scootY=0;}\n                if (lapRight&lt;small){small=lapRight; scootX=lapRight*-1; scootY=0;}\n\n        Tile.move(Tile.x+scootX, Tile.y+scootY);text.out=\"collision detected!\";\n    }\n\n\n\n    void circleRectangle(tile Temp)\n    {\n        if((Tile.x+Tile.width/2&lt;=Temp.x+Temp.width &amp;&amp; Tile.x+Tile.width/2&gt;=Temp.x)||(Tile.y+Tile.height/2&gt;=Temp.y &amp;&amp; Tile.y+Tile.height/2&lt;=Temp.y+Temp.height))\n        {\n            rectangleRectangle(Temp);\n        }\n        else//push from nearest corner\n        {\n            int x,y;\n            if(Tile.x+Tile.width/2&gt;Temp.x+Temp.width &amp;&amp; Tile.y+Tile.height/2&lt;Temp.y){x=Temp.x+Temp.width; y=Temp.y;}\n            else if(Tile.x+Tile.width/2&lt;Temp.x &amp;&amp; Tile.y+Tile.height/2&lt;Temp.y){x=Temp.x; y=Temp.y;}\n            else if(Tile.x+Tile.width/2&gt;Temp.x+Temp.width &amp;&amp; Tile.y+Tile.height/2&gt;Temp.y+Temp.height){x=Temp.x+Temp.width; y=Temp.y+Temp.height;}\n            else {x=Temp.x; y=Temp.y+Temp.height;}\n\n            double distance = Math.sqrt(Math.pow(Tile.x+(Tile.width/2) - x, 2) + Math.pow(Tile.y+(Tile.height/2) - y, 2));\n\n            if((int)Math.round(distance)&lt;Tile.height/2)\n            {\n                             double normY = ((Tile.y+(Tile.height/2) - y) / distance);\n                             double normX = ((Tile.x+(Tile.width/2) - x) / distance);\n\n                            Tile.move(x-Tile.width/2+(int)Math.round(normX*((Tile.width/2))) , y-Tile.height/2+(int)Math.round(normY*((Tile.height/2))));text.out=\"collision detected!\";\n            }\n        }\n    }\n\n\n\n    void rectangleCircle(tile Temp)\n    {\n        if((Temp.x+Temp.width/2&lt;=Tile.x+Tile.width &amp;&amp; Temp.x+Temp.width/2&gt;=Tile.x)||(Temp.y+Temp.height/2&gt;=Tile.y &amp;&amp; Temp.y+Temp.height/2&lt;=Tile.y+Tile.height))\n        {\n            rectangleRectangle(Temp);\n        }\n        else//push from nearest corner\n        {\n            int x,y;\n            if(Temp.x+Temp.width/2&gt;Tile.x+Tile.width &amp;&amp; Temp.y+Temp.height/2&lt;Tile.y){x=Tile.x+Tile.width; y=Tile.y;}\n            else if(Temp.x+Temp.width/2&lt;Tile.x &amp;&amp; Temp.y+Temp.height/2&lt;Tile.y){x=Tile.x; y=Tile.y;}\n            else if(Temp.x+Temp.width/2&gt;Tile.x+Tile.width &amp;&amp; Temp.y+Temp.height/2&gt;Tile.y+Tile.height){x=Tile.x+Tile.width; y=Tile.y+Tile.height;}\n            else {x=Tile.x; y=Tile.y+Tile.height;}\n\n            double distance = Math.sqrt(Math.pow(Temp.x+(Temp.width/2) - x, 2) + Math.pow(Temp.y+(Temp.height/2) - y, 2));\n\n            if((int)Math.round(distance)&lt;Temp.height/2)\n            {\n             double normY = ((Temp.y+(Temp.height/2) - y) / distance);\n             double normX = ((Temp.x+(Temp.width/2) - x) / distance);\n\n             if(Temp.x+Temp.width/2&gt;Tile.x+Tile.width &amp;&amp; Temp.y+Temp.height/2&lt;Tile.y){Tile.move((Temp.x+Temp.width/2)-(int)Math.round(normX*((Temp.width/2)))-Tile.width,(Temp.y+Temp.height/2)-(int)Math.round(normY*((Temp.height/2))));text.out=\"collision detected!\";}\n                else if(Temp.x+Temp.width/2&lt;Tile.x &amp;&amp; Temp.y+Temp.height/2&lt;Tile.y){Tile.move((Temp.x+Temp.width/2)-(int)Math.round(normX*((Temp.width/2))),(Temp.y+Temp.height/2)-(int)Math.round(normY*((Temp.height/2))));text.out=\"collision detected!\";}\n                else if(Temp.x+Temp.width/2&gt;Tile.x+Tile.width &amp;&amp; Temp.y+Temp.height/2&gt;Tile.y+Tile.height){Tile.move((Temp.x+Temp.width/2)-(int)Math.round(normX*((Temp.width/2)))-Tile.width,(Temp.y+Temp.height/2)-(int)Math.round(normY*((Temp.height/2)))-Tile.height);text.out=\"collision detected!\";}\n                else {Tile.move((Temp.x+Temp.width/2)-(int)Math.round(normX*((Temp.width/2))),(Temp.y+Temp.height/2)-(int)Math.round(normY*((Temp.height/2)))-Tile.height);text.out=\"collision detected!\";}\n            }\n        }\n    }\n\n\n\n\n    void circleCircle(tile Temp)\n    {\n        double distance = Math.sqrt(Math.pow((Tile.x+(Tile.width/2)) - (Temp.x+(Temp.width/2)),2) + Math.pow((Tile.y+(Tile.height/2)) - (Temp.y+(Temp.height/2)), 2));\n\n        if((int)distance&lt;(Tile.width/2+Temp.width/2))\n        {\n                        double normX = ((Tile.x+(Tile.width/2)) - (Temp.x+(Temp.width/2))) / distance;\n                        double normY = ((Tile.y+(Tile.height/2)) - (Temp.y+(Temp.height/2))) / distance;\n\n            Tile.move((Temp.x+(Temp.width/2))+(int)Math.round(normX*(Tile.width/2+Temp.width/2))-(Tile.width/2) , (Temp.y+(Temp.height/2))+(int)Math.round(normY*(Tile.height/2+Temp.height/2))-(Tile.height/2));text.out=\"collision detected!\";\n        }\n    }\n\n\n\n    void circleLine(tile Temp)\n    {\n            line Line=(line)Temp;\n\n            if (Line.x1 &lt; (Tile.x + Tile.width) &amp;&amp; (Line.x1) &gt; Tile.x &amp;&amp; Line.y1 &lt; (Tile.y + Tile.height) &amp;&amp; Line.y1 &gt; Tile.y)//circle may be hitting one of the end points\n            {\n                rectangle rec=new rectangle(Line.x1, Line.y1, 1, 1, this);\n                circleRectangle(rec);\n                remove(rec);\n            }\n\n            if (Line.x2 &lt; (Tile.x + Tile.width) &amp;&amp; (Line.x2) &gt; Tile.x &amp;&amp; Line.y2 &lt; (Tile.y + Tile.height) &amp;&amp; Line.y2 &gt; Tile.y)//circle may be hitting one of the end points\n            {\n                rectangle rec=new rectangle(Line.x2, Line.y2, 1, 1, this);\n                circleRectangle(rec);\n                remove(rec);\n            }\n\n\n            int x1=0, y1=0, x2=Tile.x+(Tile.width/2), y2=Tile.y+(Tile.height/2);\n\n            x1=Tile.x+(Tile.width/2)-Line.height;//(int)Math.round(Line.xNorm*1000);\n            x2=Tile.x+(Tile.width/2)+Line.height;\n            if(Line.posSlope)\n            {\n                y1=Tile.y+(Tile.height/2)-Line.width;\n                y2=Tile.y+(Tile.height/2)+Line.width;\n            }\n            else\n            {\n                y1=Tile.y+(Tile.height/2)+Line.width;\n                y2=Tile.y+(Tile.height/2)-Line.width;\n            }\n\n            Point point=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection\n\n            if (point.x &lt; (Line.x + Line.width) &amp;&amp; point.x &gt; Line.x &amp;&amp; point.y &lt; (Line.y + Line.height) &amp;&amp; point.y &gt; Line.y)//line intersects within line segment\n            {\n                //if(point!=null){System.out.println(point.x+\",\"+point.y);}\n                double distance = Math.sqrt(Math.pow((Tile.x+(Tile.width/2)) - point.x,2) + Math.pow((Tile.y+(Tile.width/2)) - point.y, 2));\n\n                if((int)distance&lt;Tile.width/2)\n                {\n                    //System.out.println(\"hit\");\n                    double normX = ((Tile.x+(Tile.width/2)) - point.x) / distance;\n                    double normY = ((Tile.y+(Tile.height/2)) - point.y) / distance;\n\n                    Tile.move((point.x)+(int)Math.round(normX*(Tile.width/2))-(Tile.width/2) , (point.y)+(int)Math.round(normY*(Tile.height/2))-(Tile.height/2));text.out=\"collision detected!\";\n                    //System.out.println(point.x+\",\"+point.y);\n                }\n            }\n\n            //new bullet(this, (int)Math.round(tryX), (int)Math.round(tryY));\n    }\n\n        void rectangleLine(tile Temp)\n    {\n            line Line=(line)Temp;\n            if(new Line2D.Double(Line.x1,Line.y1,Line.x2,Line.y2).intersects(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height)))\n            {\n                if (Line.x1 &lt; (Tile.x + Tile.width) &amp;&amp; (Line.x1) &gt; Tile.x &amp;&amp; Line.y1 &lt; (Tile.y + Tile.height) &amp;&amp; Line.y1 &gt; Tile.y)//circle may be hitting one of the end points\n                {\n                    rectangle rec=new rectangle(Line.x1, Line.y1, 1, 1, this);\n                    rectangleRectangle(rec);\n                    remove(rec);\n                }\n\n                if (Line.x2 &lt; (Tile.x + Tile.width) &amp;&amp; (Line.x2) &gt; Tile.x &amp;&amp; Line.y2 &lt; (Tile.y + Tile.height) &amp;&amp; Line.y2 &gt; Tile.y)//circle may be hitting one of the end points\n                {\n                    rectangle rec=new rectangle(Line.x2, Line.y2, 1, 1, this);\n                    rectangleRectangle(rec);\n                    remove(rec);\n                }\n\n                if(Line.posSlope)//positive sloped line\n                {\n                    //first we'll do the top left corner\n                    int x1=Tile.x-Line.height;\n                    int x2=Tile.x+Line.height;\n                    int y1=Tile.y-Line.width;\n                    int y2=Tile.y+Line.width;\n                    Point topPoint=new Point(-99,-99), botPoint=new Point(-99,-99);\n                    double topDistance=0, botDistance=0;\n\n                    topPoint=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection\n\n                    topDistance = Math.sqrt(Math.pow(Tile.x - topPoint.x,2) + Math.pow(Tile.y - topPoint.y, 2));\n\n                    //new let's do the bottom right corner\n                    x1=Tile.x+Tile.width-Line.height;\n                    x2=Tile.x+Tile.width+Line.height;\n                    y1=Tile.y+Tile.height-Line.width;\n                    y2=Tile.y+Tile.height+Line.width;\n\n                    botPoint=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection\n\n                    botDistance = Math.sqrt(Math.pow((Tile.x+Tile.width) - botPoint.x,2) + Math.pow((Tile.y+Tile.height) - botPoint.y, 2));\n\n\n                    if(topDistance&lt;botDistance)\n                    {\n                        if(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height).contains(topPoint) &amp;&amp; new Rectangle(Line.x,Line.y,Line.width,Line.height).contains(topPoint))\n                        {\n                            Tile.move(topPoint.x,topPoint.y);text.out=\"collision detected!\";\n                        }\n                    }\n                    else\n                    {\n                        if(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height).contains(botPoint) &amp;&amp; new Rectangle(Line.x,Line.y,Line.width,Line.height).contains(botPoint))\n                        {\n                            Tile.move(botPoint.x-Tile.width,botPoint.y-Tile.height);text.out=\"collision detected!\";\n                        }\n                    }\n                }\n                else//negative sloped lne\n                {\n                    //first we'll do the top right corner\n                    int x1=Tile.x+Tile.width-Line.height;\n                    int x2=Tile.x+Tile.width+Line.height;\n                    int y1=Tile.y+Line.width;\n                    int y2=Tile.y-Line.width;\n                    Point topPoint=new Point(-99,-99), botPoint=new Point(-99,-99);\n                    double topDistance=0, botDistance=0;\n\n                    topPoint=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection\n\n                    topDistance = Math.sqrt(Math.pow(Tile.x + Tile.width - topPoint.x,2) + Math.pow(Tile.y - topPoint.y, 2));\n\n                    //new let's do the bottom left corner\n                    x1=Tile.x-Line.height;\n                    x2=Tile.x+Line.height;\n                    y1=Tile.y+Tile.height+Line.width;\n                    y2=Tile.y+Tile.height-Line.width;\n\n                    botPoint=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection\n\n                    botDistance = Math.sqrt(Math.pow(Tile.x - botPoint.x,2) + Math.pow((Tile.y+Tile.height) - botPoint.y, 2));\n\n\n                    if(topDistance&lt;botDistance)\n                    {\n                        if(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height).contains(topPoint) &amp;&amp; new Rectangle(Line.x,Line.y,Line.width,Line.height).contains(topPoint))\n                        {\n                            Tile.move(topPoint.x-Tile.width,topPoint.y);text.out=\"collision detected!\";\n                        }\n                    }\n                    else\n                    {\n                        if(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height).contains(botPoint) &amp;&amp; new Rectangle(Line.x,Line.y,Line.width,Line.height).contains(botPoint))\n                        {\n                            Tile.move(botPoint.x,botPoint.y-Tile.height);text.out=\"collision detected!\";\n                        }\n                    }\n                }\n            }\n    }\n\n       public Point intersection(double x1, double y1, double x2, double y2,double x3, double y3, double x4, double y4)//I didn't write this. got it from http://www.ahristov.com/tutorial/geometry-games/intersection-lines.html (I altered it)\n       {\n            double d = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n\n            double xi = ((x3 - x4) * (x1 * y2 - y1 * x2) - (x1 - x2) * (x3 * y4 - y3 * x4)) / d;\n            double yi = ((y3 - y4) * (x1 * y2 - y1 * x2) - (y1 - y2) * (x3 * y4 - y3 * x4)) / d;\n\n            int x=(int)Math.round(xi);\n            int y=(int)Math.round(yi);\n\n            return new Point(x, y);\n        }\n\n//***************************************************************************************\n\n    public static void main(String[] args)\n    {\n        final collision Collision=new collision();\n          Collision.run();\n    }//end main\n}//end class\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3217215,"reputation":258,"user_id":2715575,"accept_rate":67,"display_name":"johnny"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1414412678,"creation_date":1414411457,"answer_id":26587175,"question_id":335600,"body_markdown":"is there a problem with:\r\n\r\n\r\n    Rectangle box1 = new Rectangle(100,100,100,100);\r\n    Rectangle box2 = new Rectangle(200,200,100,100);\r\n    \r\n    // what this means is if any pixel in box2 enters (hits) box1\r\n    if (box1.contains(box2)) \r\n    {\r\n         // collision occurred\r\n    }\r\n\r\n    // your code for moving the boxes \r\n\r\n&lt;br&gt;\r\n\r\nthis can also be applied to circles:\r\n&lt;br&gt;\r\n\r\n    Ellipse2D.Double ball1 = new Ellipse2D.Double(100,100,200,200);\r\n    Ellipse2D.Double ball2 = new Ellipse2D.Double(400,100,200,200);\r\n    \r\n    // what this means is if any pixel on the circumference in ball2 touches (hits)\r\n    // ball1\r\n        if (ball1.contains(ball2)) \r\n        {\r\n             // collision occurred\r\n        }\r\n    \r\n        // your code for moving the balls\r\n\r\n&lt;br&gt;&lt;br&gt;\r\nto check whether youve hit the edge of a screen you could use the following:\r\n&lt;br&gt;&lt;br&gt;\r\n\r\n    Rectangle screenBounds = jpanel.getBounds();\r\n    Ellipse2D.Double ball = new Ellipse2D.Double(100,100,200,200);  // diameter 200\r\n    Rectangle ballBounds = ball.getBounds();\r\n    \r\n    if (!screenBounds.contains(ballBounds))\r\n    {\r\n    // the ball touched the edge of the screen\r\n    }","title":"Collision Detection between two images in Java","body":"<p>is there a problem with:</p>\n\n<pre><code>Rectangle box1 = new Rectangle(100,100,100,100);\nRectangle box2 = new Rectangle(200,200,100,100);\n\n// what this means is if any pixel in box2 enters (hits) box1\nif (box1.contains(box2)) \n{\n     // collision occurred\n}\n\n// your code for moving the boxes \n</code></pre>\n\n<p><br></p>\n\n<p>this can also be applied to circles:\n<br></p>\n\n<pre><code>Ellipse2D.Double ball1 = new Ellipse2D.Double(100,100,200,200);\nEllipse2D.Double ball2 = new Ellipse2D.Double(400,100,200,200);\n\n// what this means is if any pixel on the circumference in ball2 touches (hits)\n// ball1\n    if (ball1.contains(ball2)) \n    {\n         // collision occurred\n    }\n\n    // your code for moving the balls\n</code></pre>\n\n<p><br><br>\nto check whether youve hit the edge of a screen you could use the following:\n<br><br></p>\n\n<pre><code>Rectangle screenBounds = jpanel.getBounds();\nEllipse2D.Double ball = new Ellipse2D.Double(100,100,200,200);  // diameter 200\nRectangle ballBounds = ball.getBounds();\n\nif (!screenBounds.contains(ballBounds))\n{\n// the ball touched the edge of the screen\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12081091,"reputation":1,"user_id":8832800,"display_name":"Yashwanth Dornala"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1512357603,"creation_date":1511784994,"answer_id":47510806,"question_id":335600,"body_markdown":"No need to use rectangles ... compare the coordinates of  2 players constantly.\r\n\r\nlike \r\n`if(x1===x&amp;&amp;y1==y)` \r\n**remember to increase the range of x when ur comparing.**\r\n\r\nif ur rectangle width is 30 take as `if (x1&gt;x&amp;&amp;x2&gt;x+30)`..likewise y","title":"Collision Detection between two images in Java","body":"<p>No need to use rectangles ... compare the coordinates of  2 players constantly.</p>\n\n<p>like \n<code>if(x1===x&amp;&amp;y1==y)</code> \n<strong>remember to increase the range of x when ur comparing.</strong></p>\n\n<p>if ur rectangle width is 30 take as <code>if (x1&gt;x&amp;&amp;x2&gt;x+30)</code>..likewise y</p>\n"},{"comments":[{"owner":{"account_id":3491975,"reputation":1562,"user_id":2921426,"accept_rate":64,"display_name":"SimonC"},"score":1,"creation_date":1673202532,"post_id":75046627,"comment_id":132440457,"body_markdown":"This answer doesn&#39;t provide any useful question, compared to the other answers on this question. Could you update your answer to clarify? Also, unless I&#39;m missing something, your `if`-statements are identical.","body":"This answer doesn&#39;t provide any useful question, compared to the other answers on this question. Could you update your answer to clarify? Also, unless I&#39;m missing something, your <code>if</code>-statements are identical."},{"owner":{"account_id":27467358,"reputation":1,"user_id":20956842,"display_name":"SunnyGames"},"score":0,"creation_date":1673275643,"post_id":75046627,"comment_id":132456039,"body_markdown":"AoA! What you want to say sir sorry didn&#39;t get it.How my    if    statement is identical.","body":"AoA! What you want to say sir sorry didn&#39;t get it.How my    if    statement is identical."}],"tags":[],"owner":{"account_id":27467358,"reputation":1,"user_id":20956842,"display_name":"SunnyGames"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1673275602,"creation_date":1673169271,"answer_id":75046627,"question_id":335600,"body_markdown":"It&#39;s Java code for collision of two or more ImageViews not rectangles or other,use ImageViews Instead.\r\n\r\n\r\n1.This code of Collision works every where in any views or layouts.\r\n\r\n2.Add a timer to repeat it and to detect collision repeatedly.\r\n\r\n3.It only works with views and layout.\r\n\r\n    if ((getLocationX(_v1) &gt; (getLocationX(_v2) - ((_w2*3) + 40))) &amp;&amp; (getLocationX(_v1) &lt; (getLocationX(_v2) + ((_w2*3) +40)))){\r\n\r\n    if ((getLocationY(_v1) &gt; (getLocationY(_v2) - ((_h2*3) + 40))) &amp;&amp; (getLocationY(_v1) &lt; (getLocationY(_v2) + ((_h2*3) +40)))){\r\n\r\n     showMessage(&quot;Collided&quot;);\r\n\r\n    }\r\n\r\n    }","title":"Collision Detection between two images in Java","body":"<p>It's Java code for collision of two or more ImageViews not rectangles or other,use ImageViews Instead.</p>\n<p>1.This code of Collision works every where in any views or layouts.</p>\n<p>2.Add a timer to repeat it and to detect collision repeatedly.</p>\n<p>3.It only works with views and layout.</p>\n<pre><code>if ((getLocationX(_v1) &gt; (getLocationX(_v2) - ((_w2*3) + 40))) &amp;&amp; (getLocationX(_v1) &lt; (getLocationX(_v2) + ((_w2*3) +40)))){\n\nif ((getLocationY(_v1) &gt; (getLocationY(_v2) - ((_h2*3) + 40))) &amp;&amp; (getLocationY(_v1) &lt; (getLocationY(_v2) + ((_h2*3) +40)))){\n\n showMessage(&quot;Collided&quot;);\n\n}\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25154690,"reputation":9,"user_id":21812779,"display_name":"Dodly Game"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686406603,"creation_date":1686406603,"answer_id":76446611,"question_id":335600,"body_markdown":"First create classes Player and Entity \r\n\r\n    public class Entity {\r\n    \r\n        int x, y, width, height;\r\n    \r\n        public Entity(int x, int y, int width, int height) {\r\n            this.x=x;\r\n            this.y=y;\r\n            this.width=width;\r\n            this.height=height;\r\n        }\r\n    }\r\n\r\n    public class Player {\r\n    \r\n        int x, y, width, height;\r\n    \r\n        public Player(int x, int y, int width, int height) {\r\n            this.x=x;\r\n            this.y=y;\r\n            this.width=width;\r\n            this.height=height;\r\n        }\r\n    }\r\n\r\nNext add this classes to Main class, and add method:\r\n\r\n    public static boolean collision (Player player, Entity entity) {\r\n        return player.x+player.width&gt;=entity.x&amp;&amp;player.x&lt;=entity.x+entity.width&amp;&amp;player.y&lt;=entity.y+entity.height&amp;&amp;player.y+player.height&gt;=entity.y;\r\n    }\r\n\r\nMain class:\r\n\r\n    import java.awt.*;\r\n    import javax.swing.*;\r\n    import java.awt.event.*;\r\n    public class Main extends JFrame implements ActionListener{\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n        Player player = new Player(100,100,50,50);\r\n        Entity entity = new Entity(75,75,50,50);\r\n        Timer timer = new Timer(16,this);\r\n        public Main(){\r\n            setSize(500,500);\r\n            setVisible(true);\r\n    \r\n            timer.start();\r\n        }\r\n        public void actionPerformed(ActionEvent e) {\r\n            repaint();\r\n            if (collision(player,entity)){\r\n                 //collision action\r\n            }\r\n        }\r\n        public void paint (Graphics g) {\r\n            super.paint(g);\r\n            g.drawImage(playerImage,player.x,player.y,player.width,player.height,null);\r\n            g.drawImage(entityImage,entity.x,entity.y,entity.width,entity.height,null);\r\n        }\r\n        public static boolean collision (Player player, Entity entity) {\r\n            return player.x+player.width&gt;=entity.x&amp;&amp;player.x&lt;=entity.x+entity.width&amp;&amp;player.y&lt;=entity.y+entity.height&amp;&amp;player.y+player.height&gt;=entity.y;\r\n        }\r\n    }","title":"Collision Detection between two images in Java","body":"<p>First create classes Player and Entity</p>\n<pre><code>public class Entity {\n\n    int x, y, width, height;\n\n    public Entity(int x, int y, int width, int height) {\n        this.x=x;\n        this.y=y;\n        this.width=width;\n        this.height=height;\n    }\n}\n\npublic class Player {\n\n    int x, y, width, height;\n\n    public Player(int x, int y, int width, int height) {\n        this.x=x;\n        this.y=y;\n        this.width=width;\n        this.height=height;\n    }\n}\n</code></pre>\n<p>Next add this classes to Main class, and add method:</p>\n<pre><code>public static boolean collision (Player player, Entity entity) {\n    return player.x+player.width&gt;=entity.x&amp;&amp;player.x&lt;=entity.x+entity.width&amp;&amp;player.y&lt;=entity.y+entity.height&amp;&amp;player.y+player.height&gt;=entity.y;\n}\n</code></pre>\n<p>Main class:</p>\n<pre><code>import java.awt.*;\nimport javax.swing.*;\nimport java.awt.event.*;\npublic class Main extends JFrame implements ActionListener{\n    public static void main(String[] args) {\n        new Main();\n    }\n    Player player = new Player(100,100,50,50);\n    Entity entity = new Entity(75,75,50,50);\n    Timer timer = new Timer(16,this);\n    public Main(){\n        setSize(500,500);\n        setVisible(true);\n\n        timer.start();\n    }\n    public void actionPerformed(ActionEvent e) {\n        repaint();\n        if (collision(player,entity)){\n             //collision action\n        }\n    }\n    public void paint (Graphics g) {\n        super.paint(g);\n        g.drawImage(playerImage,player.x,player.y,player.width,player.height,null);\n        g.drawImage(entityImage,entity.x,entity.y,entity.width,entity.height,null);\n    }\n    public static boolean collision (Player player, Entity entity) {\n        return player.x+player.width&gt;=entity.x&amp;&amp;player.x&lt;=entity.x+entity.width&amp;&amp;player.y&lt;=entity.y+entity.height&amp;&amp;player.y+player.height&gt;=entity.y;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":29134816,"reputation":1,"user_id":22319238,"display_name":"Theo"},"score":0,"creation_date":1690878627,"post_id":76809792,"comment_id":135410946,"body_markdown":"There is a small Mistake i made sorry for that but the code is useful anyway","body":"There is a small Mistake i made sorry for that but the code is useful anyway"},{"owner":{"account_id":29134816,"reputation":1,"user_id":22319238,"display_name":"Theo"},"score":0,"creation_date":1690879223,"post_id":76809792,"comment_id":135411064,"body_markdown":"I think there is a problem with my Mirroring Method because width and heigth get negativ if i mirror it, but the negativ coordinates are only negativ in the drawing so the attributes x &amp; y are constant on the same position, but there are wrong.","body":"I think there is a problem with my Mirroring Method because width and heigth get negativ if i mirror it, but the negativ coordinates are only negativ in the drawing so the attributes x &amp; y are constant on the same position, but there are wrong."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1691208229,"post_id":76809792,"comment_id":135464419,"body_markdown":"If you are saying that the code in your answer contains bugs, then you should fix the code. I don&#39;t think posting an answer with code that does not work is helpful. You are allowed to edit your answer.","body":"If you are saying that the code in your answer contains bugs, then you should fix the code. I don&#39;t think posting an answer with code that does not work is helpful. You are allowed to edit your answer."}],"tags":[],"owner":{"account_id":29134816,"reputation":1,"user_id":22319238,"display_name":"Theo"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691130906,"creation_date":1690878433,"answer_id":76809792,"question_id":335600,"body_markdown":"I reasently coded my own framework and this collision was very important. I think i made it very simple. It works with scale and the BufferedImage Method getRGB(x,y). \r\n\r\n    public boolean collidesWith(Sprite object) {\r\n    \r\n        if (new Rectangle(x,y,(int)(width*getScale()),(int)(height*getScale()))\r\n                .intersects(new Rectangle(object.x,object.y,(int)(object.width * object.getScale()),\r\n                        (int)(object.height * object.getScale())))){\r\n    \r\n            //making the first mask to compare that one with the other one\r\n            long[][][] maskThis = new long[(int)(width * getScale())][(int)(height*getScale())][3];\r\n    \r\n            for (int widthThis = 0; widthThis &lt; this.width * getScale(); widthThis++){\r\n                for (int heightThis = 0; heightThis &lt; this.height * getScale(); heightThis++){\r\n    \r\n                    maskThis[widthThis][heightThis][0] =\r\n                            image.getRGB((int)(widthThis/this.getScale()),(int)(heightThis/this.getScale()));\r\n                    maskThis[widthThis][heightThis][1] = widthThis+1+x;\r\n                    maskThis[widthThis][heightThis][2] = heightThis+1+y;\r\n                }\r\n            }\r\n    \r\n    \r\n            //making the second mask to compare that one with the other one\r\n            long[][][] maskObject = new long[(int)(object.width* object.getScale())][(int)(object.height* object.getScale())][3];\r\n    \r\n            for (int widthThis = 0; widthThis &lt; object.width * object.getScale(); widthThis++){\r\n                for (int heightThis = 0; heightThis &lt; object.height * object.getScale(); heightThis++){\r\n    \r\n                    maskObject[widthThis][heightThis][0] =\r\n                            object.getImage().getRGB((int)(widthThis/object.getScale()),(int)(heightThis/object.getScale()));\r\n                    maskObject[widthThis][heightThis][1] = widthThis+1+ object.x;\r\n                    maskObject[widthThis][heightThis][2] = heightThis+1 + object.y;\r\n                }\r\n            }\r\n    \r\n            //the final answer\r\n            for (int thatWidth = 0; thatWidth &lt; this.width * getScale(); thatWidth++) {\r\n                for (int thatHeight = 0; thatHeight &lt; this.height * getScale(); thatHeight++) {\r\n    \r\n                    if (maskThis[thatWidth][thatHeight][0] != 0) {\r\n                        for (int objectThatWidth = 0; objectThatWidth &lt; object.width * object.getScale(); objectThatWidth++){\r\n                            for (int objectThatHeight = 0; objectThatHeight &lt; object.height * object.getScale(); objectThatHeight++) {\r\n                                if (maskObject[objectThatWidth][objectThatHeight][1] == maskThis[thatWidth][thatHeight][1]\r\n                                        &amp;&amp; maskObject[objectThatWidth][objectThatHeight][2] == maskThis[thatWidth][thatHeight][2]\r\n                                        &amp;&amp; maskObject[objectThatWidth][objectThatHeight][0] != 0\r\n                                ){\r\n                                    return true;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    \r\n        return false;\r\n    }","title":"Collision Detection between two images in Java","body":"<p>I reasently coded my own framework and this collision was very important. I think i made it very simple. It works with scale and the BufferedImage Method getRGB(x,y).</p>\n<pre><code>public boolean collidesWith(Sprite object) {\n\n    if (new Rectangle(x,y,(int)(width*getScale()),(int)(height*getScale()))\n            .intersects(new Rectangle(object.x,object.y,(int)(object.width * object.getScale()),\n                    (int)(object.height * object.getScale())))){\n\n        //making the first mask to compare that one with the other one\n        long[][][] maskThis = new long[(int)(width * getScale())][(int)(height*getScale())][3];\n\n        for (int widthThis = 0; widthThis &lt; this.width * getScale(); widthThis++){\n            for (int heightThis = 0; heightThis &lt; this.height * getScale(); heightThis++){\n\n                maskThis[widthThis][heightThis][0] =\n                        image.getRGB((int)(widthThis/this.getScale()),(int)(heightThis/this.getScale()));\n                maskThis[widthThis][heightThis][1] = widthThis+1+x;\n                maskThis[widthThis][heightThis][2] = heightThis+1+y;\n            }\n        }\n\n\n        //making the second mask to compare that one with the other one\n        long[][][] maskObject = new long[(int)(object.width* object.getScale())][(int)(object.height* object.getScale())][3];\n\n        for (int widthThis = 0; widthThis &lt; object.width * object.getScale(); widthThis++){\n            for (int heightThis = 0; heightThis &lt; object.height * object.getScale(); heightThis++){\n\n                maskObject[widthThis][heightThis][0] =\n                        object.getImage().getRGB((int)(widthThis/object.getScale()),(int)(heightThis/object.getScale()));\n                maskObject[widthThis][heightThis][1] = widthThis+1+ object.x;\n                maskObject[widthThis][heightThis][2] = heightThis+1 + object.y;\n            }\n        }\n\n        //the final answer\n        for (int thatWidth = 0; thatWidth &lt; this.width * getScale(); thatWidth++) {\n            for (int thatHeight = 0; thatHeight &lt; this.height * getScale(); thatHeight++) {\n\n                if (maskThis[thatWidth][thatHeight][0] != 0) {\n                    for (int objectThatWidth = 0; objectThatWidth &lt; object.width * object.getScale(); objectThatWidth++){\n                        for (int objectThatHeight = 0; objectThatHeight &lt; object.height * object.getScale(); objectThatHeight++) {\n                            if (maskObject[objectThatWidth][objectThatHeight][1] == maskThis[thatWidth][thatHeight][1]\n                                    &amp;&amp; maskObject[objectThatWidth][objectThatHeight][2] == maskThis[thatWidth][thatHeight][2]\n                                    &amp;&amp; maskObject[objectThatWidth][objectThatHeight][0] != 0\n                            ){\n                                return true;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return false;\n    }\n\n    return false;\n}\n</code></pre>\n"}],"owner":{"account_id":2584,"reputation":12778,"user_id":3609,"accept_rate":100,"display_name":"Mike B"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122549,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":335830,"answer_count":12,"score":15,"last_activity_date":1691130906,"creation_date":1228254795,"question_id":335600,"body_markdown":"I have two characters displayed in a game I am writing, the player and the enemy. defined as such:\r\n\r\n    public void player(Graphics g) {\r\n        g.drawImage(plimg, x, y, this);\r\n    }\r\n    \r\n    public void enemy(Graphics g) {\r\n        g.drawImage(enemy, 200, 200, this);\r\n    }\r\n\r\nThen called with:\r\n\r\n    player(g);\r\n    enemy(g);\r\n\r\nI am able to move player() around with the keyboard, but I am at a loss when trying to detect a collision between the two. A lot of people have said to use Rectangles, but being a beginner I cannot see how I would link this into my existing code. Can anyone offer some advice for me?","title":"Collision Detection between two images in Java","body":"<p>I have two characters displayed in a game I am writing, the player and the enemy. defined as such:</p>\n\n<pre><code>public void player(Graphics g) {\n    g.drawImage(plimg, x, y, this);\n}\n\npublic void enemy(Graphics g) {\n    g.drawImage(enemy, 200, 200, this);\n}\n</code></pre>\n\n<p>Then called with:</p>\n\n<pre><code>player(g);\nenemy(g);\n</code></pre>\n\n<p>I am able to move player() around with the keyboard, but I am at a loss when trying to detect a collision between the two. A lot of people have said to use Rectangles, but being a beginner I cannot see how I would link this into my existing code. Can anyone offer some advice for me?</p>\n"},{"tags":["java","string","checksum","astm"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1520867449,"post_id":49238341,"comment_id":85480424,"body_markdown":"Are you sure you should be using a `DataOutputStream`? And using `String.getBytes()` without explicitly specifying a character set is an accident waiting to happen. Also please clarify how it doesn&#39;t work. You&#39;re not providing us a lot to go on.","body":"Are you sure you should be using a <code>DataOutputStream</code>? And using <code>String.getBytes()</code> without explicitly specifying a character set is an accident waiting to happen. Also please clarify how it doesn&#39;t work. You&#39;re not providing us a lot to go on."},{"owner":{"account_id":2302200,"reputation":585,"user_id":2022273,"display_name":"Anatole ABE"},"score":1,"creation_date":1520872655,"post_id":49238341,"comment_id":85484091,"body_markdown":"I use `DataOutputStream` because the connexion is done by the socket, and i have to write bytes to communicate with the receiver. As you can see in top, the string is firstly initialized before `getBytes()`. \n\nTo be more explicit, I want to order the client to start a test by sending him the information on the patient from the frame above. But the concern is that after typing orders that are lower, I do not see the result at the client.\n\nDo you know how to translate ASTM request in JAVA?\n\nI take inspiration on this http://www.med-kim.com.tr/images/kataloglar/5d7cc11c-e.pdf","body":"I use <code>DataOutputStream</code> because the connexion is done by the socket, and i have to write bytes to communicate with the receiver. As you can see in top, the string is firstly initialized before <code>getBytes()</code>.   To be more explicit, I want to order the client to start a test by sending him the information on the patient from the frame above. But the concern is that after typing orders that are lower, I do not see the result at the client.  Do you know how to translate ASTM request in JAVA?  I take inspiration on this <a href=\"http://www.med-kim.com.tr/images/kataloglar/5d7cc11c-e.pdf\" rel=\"nofollow noreferrer\">med-kim.com.tr/images/kataloglar/5d7cc11c-e.pdf</a>"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1520876398,"post_id":49238341,"comment_id":85486370,"body_markdown":"A `DataOutputStream` is for writing a very specific data format, you likely need a plain `OutputStream`.","body":"A <code>DataOutputStream</code> is for writing a very specific data format, you likely need a plain <code>OutputStream</code>."}],"answers":[{"comments":[{"owner":{"account_id":2302200,"reputation":585,"user_id":2022273,"display_name":"Anatole ABE"},"score":0,"creation_date":1520948574,"post_id":49257294,"comment_id":85518509,"body_markdown":"Thank you very much @Muhammad for your answer. I&#39;m checking it to get the best. the machine I use is the GeneXpert from http://www.cepheid.com used to do the molecular tests. I&#39;ll come back to you if I have any other questions.","body":"Thank you very much @Muhammad for your answer. I&#39;m checking it to get the best. the machine I use is the GeneXpert from <a href=\"http://www.cepheid.com\" rel=\"nofollow noreferrer\">cepheid.com</a> used to do the molecular tests. I&#39;ll come back to you if I have any other questions."},{"owner":{"account_id":2302200,"reputation":585,"user_id":2022273,"display_name":"Anatole ABE"},"score":0,"creation_date":1520954124,"post_id":49257294,"comment_id":85522703,"body_markdown":"Re Muhammad. I Know now about the checksum of my machine. You can find it description here https://fr.scribd.com/document/350221421/Rev-e-Genexpert-Lis-Protocol-Specification.\nYou said that I don’t need to send every message one by one. So do I have to create a concatenation of all parties, can you provide me one example from your four parts, because i see that `retmsg` use only one part. This will help me to see if I have to include Ascii chars. Thank you very much.","body":"Re Muhammad. I Know now about the checksum of my machine. You can find it description here <a href=\"https://fr.scribd.com/document/350221421/Rev-e-Genexpert-Lis-Protocol-Specification\" rel=\"nofollow noreferrer\">fr.scribd.com/document/350221421/&hellip;</a>. You said that I don’t need to send every message one by one. So do I have to create a concatenation of all parties, can you provide me one example from your four parts, because i see that <code>retmsg</code> use only one part. This will help me to see if I have to include Ascii chars. Thank you very much."}],"tags":[],"owner":{"account_id":6451015,"reputation":159,"user_id":4997939,"display_name":"Muhammad  Nadeem"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1521027178,"creation_date":1520947251,"answer_id":49257294,"question_id":49238341,"body_markdown":"Before answering, lets discuss machine mechanism for Bidirectional.\r\n    \r\n    String h1, s2, s3, s4, s5, s6 = &quot;&quot;;\r\n        h1 = &quot;H|@^\\\\|ODM-IdfDGIWA-36|||GeneXpert PC^GeneXpert^4.8|||||LIS||P|1394-97|20070521100245&quot;;\r\n        s2 = &quot;P|1&quot;;\r\n        s3 = &quot;O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q&quot;;\r\n        s4 = &quot;O|2|SID-818||^^^TestId-14|S|20070812140600|||||A||||ORH||||||||||Q&quot;;\r\n        s5 = &quot;O|3|SID-818||^^^TestId-16|S|20070812140700|||||A||||ORH||||||||||Q&quot;;\r\n        s6 = &quot;L|1|F&quot;;\r\n\r\n**First**, viewing above String message, there isn&#39;t any tag numbering as every machine I have done so far requires **Tag number**. For example:\r\n\r\n    1H|\\^&amp;|||CS-2500^00-08^22029^^^CP^BV981798||||||||E1394-97\r\n    2P|1|||00000152556|^JOHN^ABC||19440601|M|||||^Dr.Shaukat Khanum Hospital|||||||||^^^EAST\r\n    3O|1|000038^01^0012586236^B||^^^051^^100.00&#165;^^^044^^100.00|R|201803081225236|||||N\r\n    4L|1|N\r\nSo, you must have **NUMBERING** for each tag. \r\n\r\n**Second**, Machine sends following query at first time:\r\n\r\n    1H|\\^&amp;|||CS-2500^^22029^^^CP^BV981798||||||||E1394-9711\r\n    2Q|1|000038^01^   0012365845B||^^^040^PT-INN\\^^^050^APTT-FS|0|201803081227007F\r\n    3L|1|NF9\r\n\r\nIn, Query(2Q) Tag, `000038` rack id, `01` rack sequence number, `001H18074618` sample id (read from Barcode), further information can be verified from host or LIS manual provided by machine vendor. \r\n\r\n**Third**, When we receive this message, we will make message for machine that I have described above (writing again below) with additional **checksum** information. Again, this checksum can be found in host or LIS manual of machine.\r\n\r\n    1H|\\^&amp;|||CS-2500^00-08^22029^^^CP^BV981798||||||||E1394-97\r\n    2P|1|||00000152556|^JOHN^ABC||19440601|M|||||^Dr.Shaukat Khanum Hospital|||||||||^^^EAST\r\n    3O|1|000038^01^12345678^B||^^^051^^100.00&#165;^^^044^^100.00|R|201803081225236|||||N\r\n    4L|1|N\r\n\r\nExample of Checksum calculation. Note that it may vary from machine to machine. \r\n\r\n      public static String getCheckSum(String msg) {\r\n        int sum = 0;\r\n        for (int i = 0; i &lt; msg.length(); i++) {\r\n            sum += msg.charAt(i);\r\n        }\r\n        sum += 16; //adding CR and ETX AND ETB\r\n        sum = sum % 256;\r\n        String checksum = Integer.toHexString(sum).toUpperCase();\r\n        if (checksum.length() == 1) {\r\n            checksum = &quot;0&quot; + checksum;\r\n        }\r\n        //System.out.println(&quot;\\n Check Sum is =&quot;+checksum);\r\n        return checksum;\r\n    }\r\n\r\nAnd here is our complete message that will be sent to machine:\r\n\r\n    String retmsg = &quot;3O|1|&quot; + rackId + &quot;^&quot; + positionNumber + &quot;^&quot; + sampleId + &quot;^B||&quot; + testIds + &quot;|&quot; + priority + &quot;|&quot; + sysDate + &quot;|||||&quot; + orderType + &quot;&quot;;\r\n        logException(&quot;OrderMessae   :&quot; + retmsg);\r\n        retmsg = ProtocolASCII.STX + retmsg + ProtocolASCII.CR + ProtocolASCII.ETX + ProtocolMessage.getCheckSum(retmsg) + ProtocolASCII.CR + ProtocolASCII.LF;\r\n\r\n**Last but not least**, I don&#39;t know what is the machine as I don&#39;t have manual but I sense that you don&#39;t need to send every message one by one. You can send all at once. \r\n\r\nhere is the code snippet of sending and receiving message to and from machine.\r\n\r\n    while (clientIntMessage != ProtocolASCII.EOT) {\r\n                        clientIntMessage = inFromClient.read();\r\n                        currentMsg += String.valueOf(Character.toChars(clientIntMessage));\r\n                        // System.out.println(currentMsg);\r\n                        if (clientIntMessage == ProtocolASCII.ENQ) {\r\n                            outToClient.writeBytes(&quot;&quot; + ProtocolASCII.ACK);\r\n                            System.out.println(&quot;[ACK] on Analyzer [ENQ]&quot;);\r\n                        } else if (clientIntMessage == ProtocolASCII.ACK) {                        \r\n                            System.out.println(&quot;Analyzer [ACK]&quot;);\r\n                            // Send your order message here\r\n                             outToClient.writeBytes(retmsg);\r\n                            }\r\n                        } else if (clientIntMessage == ProtocolASCII.LF) {\r\n                            outToClient.writeBytes(&quot;&quot; + ProtocolASCII.ACK);\r\n                        } else if (clientIntMessage == ProtocolASCII.NAK) {\r\n                            System.out.println(&quot; Analyzer sent [NAK] &quot;);\r\n                        }\r\n\r\n                    }\r\n\r\nWhere **ProtocolASCII.ACK** is `&#39;\\006&#39;`, **ProtocolASCII.ENQ** is `&#39;\\005&#39;` and **ProtocolASCII.EOT** is `&#39;\\004&#39;`.\r\n\r\nThe code is pretty much self explanatory and I am using it in production. \r\n\r\nCan you tell us which machine you are interfacing? It may help you if I have already integrated. \r\n\r\nThanks . If further assistance is required, let me know.\r\n\r\nFor your reference:\r\n\r\n    public class ProtocolASCII {\r\n\r\n      public static char STX = &#39;\\002&#39;;\r\n      public static char ETX = &#39;\\003&#39;;\r\n      public static char ETB = &#39;\\027&#39;;\r\n      public static char EOT = &#39;\\004&#39;;\r\n      public static char ENQ = &#39;\\005&#39;;\r\n      public static char ACK = &#39;\\006&#39;;\r\n      public static char NAK = &#39;\\025&#39;;\r\n      public static char CR = &#39;\\r&#39;;\r\n      public static char LF = &#39;\\n&#39;;\r\n      public static char MOR = &#39;&gt;&#39;;\r\n      public static char FS = &#39;\\034&#39;;\r\n      public static char GS = &#39;\\035&#39;;\r\n      public static char RS = &#39;\\036&#39;;\r\n      public static char SFS = &#39;\\027&#39;;\r\n      public static char VT = 0x0B; //END OF BLOCK 011\r\n    \r\n    \r\n    }\r\n\r\n **Update:**\r\n\r\nFrom your comments:\r\n\r\n`String retmsg = &quot;3O|1|&quot; + rackId + &quot;^&quot; + positionNumber + &quot;^&quot; + sampleId + &quot;^B||&quot; + testIds + &quot;|&quot; + priority + &quot;|&quot; + sysDate + &quot;|||||&quot; + orderType + &quot;&quot;;` Where **testIds** is the list of tests to perform. \r\n   \r\nexample multitest order send `4O|1||4^1^          12345678^B|^^^^WBC\\^^^^RBC\\^^^^HGB\\^^^^HCT\\^^^^MCV\\^^^^MCH\\^^^^MCHC\\^^^^PLT\\^^^^RDW-SD\\^^^^RDW-CV\\^^^^PDW\\^^^^MPV\\^^^^P-LCR\\^^^^PCT\\^^^^NEUT#\\^^^^LYMPH#\\^^^^MONO#\\^^^^EO#\\^^^^BASO#\\^^^^NEUT%\\^^^^LYMPH%\\^^^^MONO%\\^^^^EO%\\^^^^BASO%\\^^^^NRBC#\\^^^^NRBC%\\^^^^IG#\\^^^^IG%|||||||N||||||||||||||F` \r\n\r\nGet test codes from LIS manual or from company engineer and make pattern accordingly.\r\n\r\n**Update 2**\r\n        \r\n    Socket clientSocket = null;\r\n    public static char STX = &#39;\\002&#39;;\r\n    public static char ETX = &#39;\\003&#39;;\r\n    public static char ETB = &#39;\\027&#39;;\r\n    public static char EOT = &#39;\\004&#39;;\r\n    public static char ENQ = &#39;\\005&#39;;\r\n    public static char ACK = &#39;\\006&#39;;\r\n    public static char NAK = &#39;\\025&#39;;\r\n    public static char CR = &#39;\\r&#39;;\r\n    public static char LF = &#39;\\n&#39;;\r\n    public static char MOR = &#39;&gt;&#39;;\r\n    public static char FS = &#39;\\034&#39;;\r\n    public static char GS = &#39;\\035&#39;;\r\n    public static char RS = &#39;\\036&#39;;\r\n    public static char SFS = &#39;\\027&#39;;\r\n    public static char VT = 0x0B; //END OF BLOCK 011\r\n    public static Vector&lt;String&gt; vecMessages = new Vector&lt;String&gt;();\r\n    private static int currentMsgCount = 0;\r\n    private static ServerSocket server;\r\n    private static Socket connection;\r\n    Message mes = new Message();\r\n\r\n    public static void main(String args[]) throws IOException, InterruptedException {\r\n        server = new ServerSocket(12221);\r\n        boolean stopped = false;\r\n\r\n        System.out.println(&quot; start... &quot;);\r\n        connection = server.accept();\r\n        System.out.println(&quot;wait for connection&quot;);\r\n        BufferedReader inFromClient = new BufferedReader(new InputStreamReader(connection.getInputStream()));\r\n        DataOutputStream outToClient = new DataOutputStream(connection.getOutputStream());\r\n        String currentMsg = &quot;&quot;;\r\n        int clientIntMessage;\r\n\r\n    //    String h1, s2, s3, s4, s5, s6 = &quot;&quot;;\r\n    //    h1 = &quot;1H|@^\\\\|ODM-IdfDGIWA-36|||GeneXpert     PC^GeneXpert^4.8|||||LIS||P|1394-97|20070521100245&quot; + ProtocolASCII.LF\r\n    //            + &quot;P|1&quot; + ProtocolASCII.LF\r\n    //            + &quot;O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q&quot; + ProtocolASCII.LF\r\n    //            + &quot;L|1|F&quot; + ProtocolASCII.LF;\r\n    //    s2 = &quot;P|1&quot;;\r\n    //    s3 = &quot;O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q&quot;;\r\n    //    //s4 = &quot;O|2|SID-818||^^^TestId-14|S|20070812140600|||||A||||ORH||||||||||Q&quot;;\r\n    //    //s5 = &quot;O|3|SID-818||^^^TestId-16|S|20070812140700|||||A||||ORH||||||||||Q&quot;;\r\n    //    s6 = &quot;L|1|F&quot;;\r\n    //\r\n    //    String retmsg = h1;\r\n    //    //logException(&quot;OrderMessae   :&quot; + retmsg);\r\n    //    retmsg = ProtocolASCII.STX + retmsg + ProtocolASCII.CR + ProtocolASCII.ETX + ProtocolMessage.getCheckSum(retmsg) + ProtocolASCII.CR + ProtocolASCII.LF;\r\n\r\n    \r\n\r\n        clientIntMessage = inFromClient.read();\r\n            //while (clientIntMessage != ProtocolASCII.EOT) {\r\n            while (true) {\r\n    \r\n                while (clientIntMessage != EOT) {\r\n                    clientIntMessage = inFromClient.read();\r\n                    currentMsg += String.valueOf(Character.toChars(clientIntMessage));\r\n                    // System.out.println(currentMsg);\r\n                    if (clientIntMessage == ENQ) {\r\n                        outToClient.writeBytes(&quot;&quot; + ACK);\r\n                        System.out.println(&quot;[ACK] on Analyzer [ENQ]&quot;);\r\n                    } else if (clientIntMessage == ACK) {\r\n    \r\n                        System.out.println(&quot;Analyzer [ACK]&quot;);\r\n                        if (vecMessages.size() == currentMsgCount) {\r\n                            vecMessages.clear();\r\n                            currentMsgCount = 0;\r\n                            outToClient.writeBytes(&quot;&quot; + EOT);\r\n                            System.out.println(&quot;Host [EOT]&quot;);\r\n                        } else {\r\n                            String msg = (String) vecMessages.get(currentMsgCount++);\r\n    \r\n                            outToClient.writeBytes(msg);\r\n    //                                System.out.println(&quot;Msg &quot; + msg.substring(0, msg.length() - 4));\r\n                        }\r\n                    } else if (clientIntMessage == LF) {\r\n                        outToClient.writeBytes(&quot;&quot; + ACK);\r\n                    } else if (clientIntMessage == NAK) {\r\n                        System.out.println(&quot; Analyzer sent [NAK] &quot;);\r\n                    }\r\n    \r\n                }\r\n    \r\n                System.out.println(currentMsg);\r\n                mes.parser(currentMsg);\r\n    \r\n                clientIntMessage = 0;\r\n                currentMsg = &quot;&quot;;\r\n    \r\n            }\r\n    //        connection.close();\r\n    //        stopped = true;\r\n        }\r\n    \r\n        public static class Message {\r\n    //        machine Send This Query   ==&gt;6.3.2.1.5 Example of Upload Message – Instrument System Sends Host Query\r\n    //        H|@^\\|b4a88d9adab947a7b3dca2b534119c25||ICU^GeneXpert^1.0|||||LIS||P|1394-97|20070521100245 \r\n    //        Q|1|PatientID-556^SpecimenID-888||||||||||O@N \r\n    //        L|1|N \r\n    \r\n            public static Vector&lt;String&gt; vecMessages = new Vector&lt;String&gt;();\r\n    //        make message for machine\r\n    \r\n            public String HeaderMessage() {\r\n                String retmsg = &quot;H|@^\\\\|ccc6ade20d3623314sffa3e287f2314ad||LIS|||||ICU^GeneXpert^1.0||P|1394-97|20070521100245&quot;;\r\n    //        System.out.println(&quot;HeaderMessage  :&quot; + retmsg);\r\n                retmsg = STX + retmsg + CR + ETX + getCheckSum(retmsg) + CR + LF;\r\n    \r\n                return retmsg;\r\n            }\r\n            //  P|1       \r\n            //      6.3.1.3.3 Patient Information Record     Find in Document and make it as per document\r\n    \r\n            public String PatientMessage(Patient pat) {  //(Patient pat)\r\n    \r\n                String retmsg = &quot;P|1|||&quot; + pat.getMRNO() + &quot;|^&quot; + pat.getPatientName() + &quot;||&quot; + pat.getDOB() + &quot;|&quot; + pat.getGender() + &quot;|||||^Dr.SKM-LAS||||||||||||^^^EAST&quot;;\r\n    \r\n                retmsg = STX + retmsg + CR + ETX + getCheckSum(retmsg) + CR + LF;\r\n    \r\n                return retmsg;\r\n            }\r\n    //                6.3.1.3.4 Test Order Record      Find in Document\r\n    \r\n            public String orderMessage(String sampleId, String testIds, String orderType, String rackId, String positionNumber, String priority) {\r\n                DateFormat dateFormat = new SimpleDateFormat(&quot;yyyyMMddHHmmSS&quot;);\r\n                String sysDate = dateFormat.format(new Date());\r\n    \r\n                String retmsg = &quot;3O|1|&quot; + rackId + &quot;^&quot; + positionNumber + &quot;^&quot; + sampleId + &quot;^B||&quot; + testIds + &quot;|&quot; + priority + &quot;|&quot; + sysDate + &quot;|||||&quot; + orderType + &quot;&quot;;\r\n    \r\n                retmsg = STX + retmsg + CR + ETX + getCheckSum(retmsg) + CR + LF;\r\n    \r\n                return retmsg;\r\n            }\r\n    \r\n    //        6.3.1.3.5 Message Terminator Record    Find in Document\r\n            public String terminatorMessage(String type) {\r\n                String retmsg = &quot;L|1|&quot; + type;\r\n    \r\n                retmsg = STX + retmsg + CR + ETX + getCheckSum(retmsg) + CR + LF;\r\n                return retmsg;\r\n            }\r\n    \r\n            public String getCheckSum(String msg) {\r\n                int sum = 0;\r\n                for (int i = 0; i &lt; msg.length(); i++) {\r\n                    sum += msg.charAt(i);\r\n                }\r\n                sum += 16; //adding CR and ETX AND ETB\r\n                sum = sum % 256;\r\n                String checksum = Integer.toHexString(sum).toUpperCase();\r\n                if (checksum.length() == 1) {\r\n                    checksum = &quot;0&quot; + checksum;\r\n                }\r\n                //System.out.println(&quot;\\n Check Sum is =&quot;+checksum);\r\n                return checksum;\r\n            }\r\n    \r\n            public void parser(String input) {\r\n    //        Use StringTokenizer for split or split\r\n    \r\n                if (input.charAt(1) == &#39;Q&#39; || input.charAt(2) == &#39;Q&#39;) {\r\n    \r\n                    //Q|1|PatientID-556^SpecimenID-888||||||||||O@N \r\n    //                        Split it and get information which machine send in Query SampleId and other\r\n                    String rackId = &quot;get from Query to check document&quot;;\r\n                    String positionNumber = &quot;get from Query to check document&quot;;\r\n                    String sampleId = &quot;get from Query to check document&quot;;\r\n    \r\n    //                        this.FetchOrders1(machineId, sampleId);     // for dummy Sample Run\r\n                    this.FetchOrders1(&quot;abc&quot;, sampleId);\r\n                    this.setMesType(&quot;Q&quot;);\r\n    \r\n                }\r\n    \r\n            }\r\n    \r\n            public void FetchOrders1(String machineId, String sampleId) {\r\n                try {\r\n                    this.vecMessages.add(HeaderMessage());\r\n                    this.vecMessages.add(PatientMessage()); //Define patient information\r\n                    this.vecMessages.add(orderMessage(sampleId, &quot;test&quot;, &quot;N&quot;, &quot;rackId&quot;, &quot;positionNumber&quot;, &quot;R&quot;));\r\n                    this.vecMessages.add(terminatorMessage(&quot;N&quot;));\r\n    \r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n    \r\n        }`\r\n            \r\n            \r\n\r\n","title":"How to write and send an ASTM frame to medical equipment","body":"<p>Before answering, lets discuss machine mechanism for Bidirectional.</p>\n\n<pre><code>String h1, s2, s3, s4, s5, s6 = \"\";\n    h1 = \"H|@^\\\\|ODM-IdfDGIWA-36|||GeneXpert PC^GeneXpert^4.8|||||LIS||P|1394-97|20070521100245\";\n    s2 = \"P|1\";\n    s3 = \"O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q\";\n    s4 = \"O|2|SID-818||^^^TestId-14|S|20070812140600|||||A||||ORH||||||||||Q\";\n    s5 = \"O|3|SID-818||^^^TestId-16|S|20070812140700|||||A||||ORH||||||||||Q\";\n    s6 = \"L|1|F\";\n</code></pre>\n\n<p><strong>First</strong>, viewing above String message, there isn't any tag numbering as every machine I have done so far requires <strong>Tag number</strong>. For example:</p>\n\n<pre><code>1H|\\^&amp;|||CS-2500^00-08^22029^^^CP^BV981798||||||||E1394-97\n2P|1|||00000152556|^JOHN^ABC||19440601|M|||||^Dr.Shaukat Khanum Hospital|||||||||^^^EAST\n3O|1|000038^01^0012586236^B||^^^051^^100.00¥^^^044^^100.00|R|201803081225236|||||N\n4L|1|N\n</code></pre>\n\n<p>So, you must have <strong>NUMBERING</strong> for each tag. </p>\n\n<p><strong>Second</strong>, Machine sends following query at first time:</p>\n\n<pre><code>1H|\\^&amp;|||CS-2500^^22029^^^CP^BV981798||||||||E1394-9711\n2Q|1|000038^01^   0012365845B||^^^040^PT-INN\\^^^050^APTT-FS|0|201803081227007F\n3L|1|NF9\n</code></pre>\n\n<p>In, Query(2Q) Tag, <code>000038</code> rack id, <code>01</code> rack sequence number, <code>001H18074618</code> sample id (read from Barcode), further information can be verified from host or LIS manual provided by machine vendor. </p>\n\n<p><strong>Third</strong>, When we receive this message, we will make message for machine that I have described above (writing again below) with additional <strong>checksum</strong> information. Again, this checksum can be found in host or LIS manual of machine.</p>\n\n<pre><code>1H|\\^&amp;|||CS-2500^00-08^22029^^^CP^BV981798||||||||E1394-97\n2P|1|||00000152556|^JOHN^ABC||19440601|M|||||^Dr.Shaukat Khanum Hospital|||||||||^^^EAST\n3O|1|000038^01^12345678^B||^^^051^^100.00¥^^^044^^100.00|R|201803081225236|||||N\n4L|1|N\n</code></pre>\n\n<p>Example of Checksum calculation. Note that it may vary from machine to machine. </p>\n\n<pre><code>  public static String getCheckSum(String msg) {\n    int sum = 0;\n    for (int i = 0; i &lt; msg.length(); i++) {\n        sum += msg.charAt(i);\n    }\n    sum += 16; //adding CR and ETX AND ETB\n    sum = sum % 256;\n    String checksum = Integer.toHexString(sum).toUpperCase();\n    if (checksum.length() == 1) {\n        checksum = \"0\" + checksum;\n    }\n    //System.out.println(\"\\n Check Sum is =\"+checksum);\n    return checksum;\n}\n</code></pre>\n\n<p>And here is our complete message that will be sent to machine:</p>\n\n<pre><code>String retmsg = \"3O|1|\" + rackId + \"^\" + positionNumber + \"^\" + sampleId + \"^B||\" + testIds + \"|\" + priority + \"|\" + sysDate + \"|||||\" + orderType + \"\";\n    logException(\"OrderMessae   :\" + retmsg);\n    retmsg = ProtocolASCII.STX + retmsg + ProtocolASCII.CR + ProtocolASCII.ETX + ProtocolMessage.getCheckSum(retmsg) + ProtocolASCII.CR + ProtocolASCII.LF;\n</code></pre>\n\n<p><strong>Last but not least</strong>, I don't know what is the machine as I don't have manual but I sense that you don't need to send every message one by one. You can send all at once. </p>\n\n<p>here is the code snippet of sending and receiving message to and from machine.</p>\n\n<pre><code>while (clientIntMessage != ProtocolASCII.EOT) {\n                    clientIntMessage = inFromClient.read();\n                    currentMsg += String.valueOf(Character.toChars(clientIntMessage));\n                    // System.out.println(currentMsg);\n                    if (clientIntMessage == ProtocolASCII.ENQ) {\n                        outToClient.writeBytes(\"\" + ProtocolASCII.ACK);\n                        System.out.println(\"[ACK] on Analyzer [ENQ]\");\n                    } else if (clientIntMessage == ProtocolASCII.ACK) {                        \n                        System.out.println(\"Analyzer [ACK]\");\n                        // Send your order message here\n                         outToClient.writeBytes(retmsg);\n                        }\n                    } else if (clientIntMessage == ProtocolASCII.LF) {\n                        outToClient.writeBytes(\"\" + ProtocolASCII.ACK);\n                    } else if (clientIntMessage == ProtocolASCII.NAK) {\n                        System.out.println(\" Analyzer sent [NAK] \");\n                    }\n\n                }\n</code></pre>\n\n<p>Where <strong>ProtocolASCII.ACK</strong> is <code>'\\006'</code>, <strong>ProtocolASCII.ENQ</strong> is <code>'\\005'</code> and <strong>ProtocolASCII.EOT</strong> is <code>'\\004'</code>.</p>\n\n<p>The code is pretty much self explanatory and I am using it in production. </p>\n\n<p>Can you tell us which machine you are interfacing? It may help you if I have already integrated. </p>\n\n<p>Thanks . If further assistance is required, let me know.</p>\n\n<p>For your reference:</p>\n\n<pre><code>public class ProtocolASCII {\n\n  public static char STX = '\\002';\n  public static char ETX = '\\003';\n  public static char ETB = '\\027';\n  public static char EOT = '\\004';\n  public static char ENQ = '\\005';\n  public static char ACK = '\\006';\n  public static char NAK = '\\025';\n  public static char CR = '\\r';\n  public static char LF = '\\n';\n  public static char MOR = '&gt;';\n  public static char FS = '\\034';\n  public static char GS = '\\035';\n  public static char RS = '\\036';\n  public static char SFS = '\\027';\n  public static char VT = 0x0B; //END OF BLOCK 011\n\n\n}\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>From your comments:</p>\n\n<p><code>String retmsg = \"3O|1|\" + rackId + \"^\" + positionNumber + \"^\" + sampleId + \"^B||\" + testIds + \"|\" + priority + \"|\" + sysDate + \"|||||\" + orderType + \"\";</code> Where <strong>testIds</strong> is the list of tests to perform. </p>\n\n<p>example multitest order send <code>4O|1||4^1^          12345678^B|^^^^WBC\\^^^^RBC\\^^^^HGB\\^^^^HCT\\^^^^MCV\\^^^^MCH\\^^^^MCHC\\^^^^PLT\\^^^^RDW-SD\\^^^^RDW-CV\\^^^^PDW\\^^^^MPV\\^^^^P-LCR\\^^^^PCT\\^^^^NEUT#\\^^^^LYMPH#\\^^^^MONO#\\^^^^EO#\\^^^^BASO#\\^^^^NEUT%\\^^^^LYMPH%\\^^^^MONO%\\^^^^EO%\\^^^^BASO%\\^^^^NRBC#\\^^^^NRBC%\\^^^^IG#\\^^^^IG%|||||||N||||||||||||||F</code> </p>\n\n<p>Get test codes from LIS manual or from company engineer and make pattern accordingly.</p>\n\n<p><strong>Update 2</strong></p>\n\n<pre><code>Socket clientSocket = null;\npublic static char STX = '\\002';\npublic static char ETX = '\\003';\npublic static char ETB = '\\027';\npublic static char EOT = '\\004';\npublic static char ENQ = '\\005';\npublic static char ACK = '\\006';\npublic static char NAK = '\\025';\npublic static char CR = '\\r';\npublic static char LF = '\\n';\npublic static char MOR = '&gt;';\npublic static char FS = '\\034';\npublic static char GS = '\\035';\npublic static char RS = '\\036';\npublic static char SFS = '\\027';\npublic static char VT = 0x0B; //END OF BLOCK 011\npublic static Vector&lt;String&gt; vecMessages = new Vector&lt;String&gt;();\nprivate static int currentMsgCount = 0;\nprivate static ServerSocket server;\nprivate static Socket connection;\nMessage mes = new Message();\n\npublic static void main(String args[]) throws IOException, InterruptedException {\n    server = new ServerSocket(12221);\n    boolean stopped = false;\n\n    System.out.println(\" start... \");\n    connection = server.accept();\n    System.out.println(\"wait for connection\");\n    BufferedReader inFromClient = new BufferedReader(new InputStreamReader(connection.getInputStream()));\n    DataOutputStream outToClient = new DataOutputStream(connection.getOutputStream());\n    String currentMsg = \"\";\n    int clientIntMessage;\n\n//    String h1, s2, s3, s4, s5, s6 = \"\";\n//    h1 = \"1H|@^\\\\|ODM-IdfDGIWA-36|||GeneXpert     PC^GeneXpert^4.8|||||LIS||P|1394-97|20070521100245\" + ProtocolASCII.LF\n//            + \"P|1\" + ProtocolASCII.LF\n//            + \"O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q\" + ProtocolASCII.LF\n//            + \"L|1|F\" + ProtocolASCII.LF;\n//    s2 = \"P|1\";\n//    s3 = \"O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q\";\n//    //s4 = \"O|2|SID-818||^^^TestId-14|S|20070812140600|||||A||||ORH||||||||||Q\";\n//    //s5 = \"O|3|SID-818||^^^TestId-16|S|20070812140700|||||A||||ORH||||||||||Q\";\n//    s6 = \"L|1|F\";\n//\n//    String retmsg = h1;\n//    //logException(\"OrderMessae   :\" + retmsg);\n//    retmsg = ProtocolASCII.STX + retmsg + ProtocolASCII.CR + ProtocolASCII.ETX + ProtocolMessage.getCheckSum(retmsg) + ProtocolASCII.CR + ProtocolASCII.LF;\n\n\n\n    clientIntMessage = inFromClient.read();\n        //while (clientIntMessage != ProtocolASCII.EOT) {\n        while (true) {\n\n            while (clientIntMessage != EOT) {\n                clientIntMessage = inFromClient.read();\n                currentMsg += String.valueOf(Character.toChars(clientIntMessage));\n                // System.out.println(currentMsg);\n                if (clientIntMessage == ENQ) {\n                    outToClient.writeBytes(\"\" + ACK);\n                    System.out.println(\"[ACK] on Analyzer [ENQ]\");\n                } else if (clientIntMessage == ACK) {\n\n                    System.out.println(\"Analyzer [ACK]\");\n                    if (vecMessages.size() == currentMsgCount) {\n                        vecMessages.clear();\n                        currentMsgCount = 0;\n                        outToClient.writeBytes(\"\" + EOT);\n                        System.out.println(\"Host [EOT]\");\n                    } else {\n                        String msg = (String) vecMessages.get(currentMsgCount++);\n\n                        outToClient.writeBytes(msg);\n//                                System.out.println(\"Msg \" + msg.substring(0, msg.length() - 4));\n                    }\n                } else if (clientIntMessage == LF) {\n                    outToClient.writeBytes(\"\" + ACK);\n                } else if (clientIntMessage == NAK) {\n                    System.out.println(\" Analyzer sent [NAK] \");\n                }\n\n            }\n\n            System.out.println(currentMsg);\n            mes.parser(currentMsg);\n\n            clientIntMessage = 0;\n            currentMsg = \"\";\n\n        }\n//        connection.close();\n//        stopped = true;\n    }\n\n    public static class Message {\n//        machine Send This Query   ==&gt;6.3.2.1.5 Example of Upload Message – Instrument System Sends Host Query\n//        H|@^\\|b4a88d9adab947a7b3dca2b534119c25||ICU^GeneXpert^1.0|||||LIS||P|1394-97|20070521100245 \n//        Q|1|PatientID-556^SpecimenID-888||||||||||O@N \n//        L|1|N \n\n        public static Vector&lt;String&gt; vecMessages = new Vector&lt;String&gt;();\n//        make message for machine\n\n        public String HeaderMessage() {\n            String retmsg = \"H|@^\\\\|ccc6ade20d3623314sffa3e287f2314ad||LIS|||||ICU^GeneXpert^1.0||P|1394-97|20070521100245\";\n//        System.out.println(\"HeaderMessage  :\" + retmsg);\n            retmsg = STX + retmsg + CR + ETX + getCheckSum(retmsg) + CR + LF;\n\n            return retmsg;\n        }\n        //  P|1       \n        //      6.3.1.3.3 Patient Information Record     Find in Document and make it as per document\n\n        public String PatientMessage(Patient pat) {  //(Patient pat)\n\n            String retmsg = \"P|1|||\" + pat.getMRNO() + \"|^\" + pat.getPatientName() + \"||\" + pat.getDOB() + \"|\" + pat.getGender() + \"|||||^Dr.SKM-LAS||||||||||||^^^EAST\";\n\n            retmsg = STX + retmsg + CR + ETX + getCheckSum(retmsg) + CR + LF;\n\n            return retmsg;\n        }\n//                6.3.1.3.4 Test Order Record      Find in Document\n\n        public String orderMessage(String sampleId, String testIds, String orderType, String rackId, String positionNumber, String priority) {\n            DateFormat dateFormat = new SimpleDateFormat(\"yyyyMMddHHmmSS\");\n            String sysDate = dateFormat.format(new Date());\n\n            String retmsg = \"3O|1|\" + rackId + \"^\" + positionNumber + \"^\" + sampleId + \"^B||\" + testIds + \"|\" + priority + \"|\" + sysDate + \"|||||\" + orderType + \"\";\n\n            retmsg = STX + retmsg + CR + ETX + getCheckSum(retmsg) + CR + LF;\n\n            return retmsg;\n        }\n\n//        6.3.1.3.5 Message Terminator Record    Find in Document\n        public String terminatorMessage(String type) {\n            String retmsg = \"L|1|\" + type;\n\n            retmsg = STX + retmsg + CR + ETX + getCheckSum(retmsg) + CR + LF;\n            return retmsg;\n        }\n\n        public String getCheckSum(String msg) {\n            int sum = 0;\n            for (int i = 0; i &lt; msg.length(); i++) {\n                sum += msg.charAt(i);\n            }\n            sum += 16; //adding CR and ETX AND ETB\n            sum = sum % 256;\n            String checksum = Integer.toHexString(sum).toUpperCase();\n            if (checksum.length() == 1) {\n                checksum = \"0\" + checksum;\n            }\n            //System.out.println(\"\\n Check Sum is =\"+checksum);\n            return checksum;\n        }\n\n        public void parser(String input) {\n//        Use StringTokenizer for split or split\n\n            if (input.charAt(1) == 'Q' || input.charAt(2) == 'Q') {\n\n                //Q|1|PatientID-556^SpecimenID-888||||||||||O@N \n//                        Split it and get information which machine send in Query SampleId and other\n                String rackId = \"get from Query to check document\";\n                String positionNumber = \"get from Query to check document\";\n                String sampleId = \"get from Query to check document\";\n\n//                        this.FetchOrders1(machineId, sampleId);     // for dummy Sample Run\n                this.FetchOrders1(\"abc\", sampleId);\n                this.setMesType(\"Q\");\n\n            }\n\n        }\n\n        public void FetchOrders1(String machineId, String sampleId) {\n            try {\n                this.vecMessages.add(HeaderMessage());\n                this.vecMessages.add(PatientMessage()); //Define patient information\n                this.vecMessages.add(orderMessage(sampleId, \"test\", \"N\", \"rackId\", \"positionNumber\", \"R\"));\n                this.vecMessages.add(terminatorMessage(\"N\"));\n\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        }\n\n    }`\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12303965,"reputation":33,"user_id":8977589,"display_name":"jetshaun"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663660362,"creation_date":1663660362,"answer_id":73783282,"question_id":49238341,"body_markdown":"Your message should include a carriage return (CR) at the end of each string. It can be added as a String in Java in this way: &quot;\\r&quot;.\r\n\r\nFurthermore, the byte array that you write to the outputstream should include the following in this order: STX, frame number, message string (inclusive of the CR character mentioned earlier) ETX, two uppercase checksum characters, CR, LF.\r\n\r\nThe special ASCII characters (STX, ETX etc.) are mentioned here: https://www.cs.cmu.edu/~pattis/15-1XX/common/handouts/ascii.html","title":"How to write and send an ASTM frame to medical equipment","body":"<p>Your message should include a carriage return (CR) at the end of each string. It can be added as a String in Java in this way: &quot;\\r&quot;.</p>\n<p>Furthermore, the byte array that you write to the outputstream should include the following in this order: STX, frame number, message string (inclusive of the CR character mentioned earlier) ETX, two uppercase checksum characters, CR, LF.</p>\n<p>The special ASCII characters (STX, ETX etc.) are mentioned here: <a href=\"https://www.cs.cmu.edu/%7Epattis/15-1XX/common/handouts/ascii.html\" rel=\"nofollow noreferrer\">https://www.cs.cmu.edu/~pattis/15-1XX/common/handouts/ascii.html</a></p>\n"}],"owner":{"account_id":2302200,"reputation":585,"user_id":2022273,"display_name":"Anatole ABE"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13245,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":49257294,"answer_count":2,"score":2,"last_activity_date":1691128891,"creation_date":1520866845,"question_id":49238341,"body_markdown":"I am currently working on the ASTM protocol to send orders tests request to medical instrument. But I cannot send a message to the equipment correctly. To be more explicit, I want for example to send these frames:\r\n\r\n            String h1, s2, s3, s4, s5, s6 = &quot;&quot;;\r\n            h1 = &quot;H|@^\\\\|ODM-IdfDGIWA-36|||GeneXpert PC^GeneXpert^4.8|||||LIS||P|1394-97|20070521100245&quot;;\r\n            s2 = &quot;P|1&quot;;\r\n            s3 = &quot;O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q&quot;;\r\n            s4 = &quot;O|2|SID-818||^^^TestId-14|S|20070812140600|||||A||||ORH||||||||||Q&quot;;\r\n            s5 = &quot;O|3|SID-818||^^^TestId-16|S|20070812140700|||||A||||ORH||||||||||Q&quot;;\r\n            s6 = &quot;L|1|F&quot;;\r\n\r\nand here is how I am doing now:\r\n\r\n  \r\n\r\n        writeMeBytes(outToServer, h1.getBytes());\r\n        writeMeBytes(outToServer, s2.getBytes());\r\n        writeMeBytes(outToServer, s3.getBytes());\r\n        writeMeBytes(outToServer, s4.getBytes());\r\n        writeMeBytes(outToServer, s5.getBytes());\r\n        writeMeBytes(outToServer, s6.getBytes());\r\n\r\n  \r\n    public static void writeMeBytes(DataOutputStream dos, byte [] b){\r\n        if (b.length &gt;0){\r\n            int j = 0;\r\n            while (j &lt;= b.length-1) {\r\n                try {\r\n                    dos.write(b[j++]);\r\n                } catch (IOException ex) {\r\n                    Logger.getLogger(SimpleServer.class.getName()).log(Level.SEVERE, null, ex);\r\n                }\r\n                \r\n            }\r\n        }\r\n    }\r\n\r\nI turn it into byte and then send byte after byte.\r\n\r\nExcept that I do not see any change on the receiver side.\r\n\r\n**Update according to @Muhammad Answer**\r\n\r\nThis is what I did to send order to GeneXpert DX System\r\n\r\n    public class SimpleServer {\r\n\r\n    private static ServerSocket server;\r\n    private static Socket connection;\r\n\r\n    public static void main(String args[]) throws IOException, InterruptedException {\r\n        server = new ServerSocket(12221);\r\n        boolean stopped = false;\r\n\r\n        System.out.println(&quot; start... &quot;);\r\n        connection = server.accept();\r\n        System.out.println(&quot;wait for connection&quot;);\r\n        BufferedReader inFromClient = new BufferedReader(new InputStreamReader(connection.getInputStream()));\r\n        DataOutputStream outToClient = new DataOutputStream(connection.getOutputStream());\r\n        String currentMsg = &quot;&quot;;\r\n        int clientIntMessage;\r\n\r\n        String h1, s2, s3, s4, s5, s6 = &quot;&quot;;\r\n        h1 = &quot;1H|@^\\\\|ODM-IdfDGIWA-36|||GeneXpert PC^GeneXpert^4.8|||||LIS||P|1394-97|20070521100245&quot; + ProtocolASCII.LF\r\n                + &quot;P|1&quot; + ProtocolASCII.LF\r\n                + &quot;O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q&quot; + ProtocolASCII.LF\r\n                + &quot;L|1|F&quot; + ProtocolASCII.LF;\r\n        s2 = &quot;P|1&quot;;\r\n        s3 = &quot;O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q&quot;;\r\n        //s4 = &quot;O|2|SID-818||^^^TestId-14|S|20070812140600|||||A||||ORH||||||||||Q&quot;;\r\n        //s5 = &quot;O|3|SID-818||^^^TestId-16|S|20070812140700|||||A||||ORH||||||||||Q&quot;;\r\n        s6 = &quot;L|1|F&quot;;\r\n\r\n        String retmsg = h1;\r\n        //logException(&quot;OrderMessae   :&quot; + retmsg);\r\n        retmsg = ProtocolASCII.STX + retmsg + ProtocolASCII.CR + ProtocolASCII.ETX + ProtocolMessage.getCheckSum(retmsg) + ProtocolASCII.CR + ProtocolASCII.LF;\r\n\r\n        clientIntMessage = inFromClient.read();\r\n        //while (clientIntMessage != ProtocolASCII.EOT) {\r\n        while (true) {\r\n            currentMsg += String.valueOf(Character.toChars(clientIntMessage));\r\n            if (clientIntMessage == ProtocolASCII.ENQ) {\r\n                outToClient.writeBytes(&quot;&quot; + ProtocolASCII.ACK);\r\n                System.out.println(&quot; &lt;--- LIS [ACK] on DX [ENQ]&quot;);\r\n            } else if (clientIntMessage == ProtocolASCII.ACK) {\r\n                System.out.println(&quot; ---&gt; DX [ACK]&quot;);\r\n                // Send your order message here\r\n                outToClient.writeBytes(retmsg);\r\n            } else if (clientIntMessage == ProtocolASCII.CR) {\r\n                System.out.println(currentMsg);\r\n                outToClient.writeBytes(&quot;&quot; + ProtocolASCII.ACK);\r\n            } else if (clientIntMessage == ProtocolASCII.NAK) {\r\n                System.out.println(&quot; ---&gt; DX sent [NAK] &quot;);\r\n                System.out.println(&quot; --- LIS now wait 10 sec... &quot;);\r\n                Thread.sleep(10000);\r\n                outToClient.writeBytes(&quot;&quot; + ProtocolASCII.ENQ);\r\n                System.out.println(&quot; &lt;--- LIS [ENQ] &quot;);\r\n            } else if (clientIntMessage == ProtocolASCII.EOT) {\r\n                System.out.println(&quot; ---&gt; DX END OF TRANSMISSION&quot;);\r\n                outToClient.writeBytes(&quot;&quot; + ProtocolASCII.ENQ);\r\n                System.out.println(&quot; &lt;--- LIS [ENQ] &quot;);\r\n            }\r\n\r\n            if (stopped) {\r\n                break;\r\n            }\r\n            clientIntMessage = inFromClient.read();\r\n        }\r\n        connection.close();\r\n        stopped = true;\r\n    }}\r\n\r\nAnd this is the result I get from the console:\r\n\r\n    start... \r\n    wait for connection\r\n     &lt;--- LIS [ACK] on DX [ENQ]\r\n    1H|@^\\|ODM-rQTcjIWA-66||GeneXpert PC^GeneXpert^4.8|||||LIS||P|1394-97|20180314003724\r\n    Q|1|ALL||||||||||O@N\r\n    L|1|N\r\n    B5\r\n     ---&gt; DX [EOT] \r\n     &lt;--- LIS [ENQ] \r\n     ---&gt; DX [ACK]\r\n     ---&gt; DX sent [NAK] \r\n     --- LIS now wait 10 sec... \r\n\r\nDX is the machine software and LIS is the host. \r\nWhenever I try to send the ENQ, the machine answers me with NAK. \r\n\r\n**UPDATE 2**  \r\nIt seem to be working. But now windows events shows me an error about why my records orders don&#39;t appear in the GeneXpert DX host record list. The header record have been sent first. \r\n\r\n[![Windows event logs after following @Muhammad *UPDATE 2**][1]][1]\r\n\r\n\r\n[![GeneXpert DX STATUS][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nMWfh.png\r\n  [2]: https://i.stack.imgur.com/eZV4n.png\r\n","title":"How to write and send an ASTM frame to medical equipment","body":"<p>I am currently working on the ASTM protocol to send orders tests request to medical instrument. But I cannot send a message to the equipment correctly. To be more explicit, I want for example to send these frames:</p>\n\n<pre><code>        String h1, s2, s3, s4, s5, s6 = \"\";\n        h1 = \"H|@^\\\\|ODM-IdfDGIWA-36|||GeneXpert PC^GeneXpert^4.8|||||LIS||P|1394-97|20070521100245\";\n        s2 = \"P|1\";\n        s3 = \"O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q\";\n        s4 = \"O|2|SID-818||^^^TestId-14|S|20070812140600|||||A||||ORH||||||||||Q\";\n        s5 = \"O|3|SID-818||^^^TestId-16|S|20070812140700|||||A||||ORH||||||||||Q\";\n        s6 = \"L|1|F\";\n</code></pre>\n\n<p>and here is how I am doing now:</p>\n\n<pre><code>    writeMeBytes(outToServer, h1.getBytes());\n    writeMeBytes(outToServer, s2.getBytes());\n    writeMeBytes(outToServer, s3.getBytes());\n    writeMeBytes(outToServer, s4.getBytes());\n    writeMeBytes(outToServer, s5.getBytes());\n    writeMeBytes(outToServer, s6.getBytes());\n\n\npublic static void writeMeBytes(DataOutputStream dos, byte [] b){\n    if (b.length &gt;0){\n        int j = 0;\n        while (j &lt;= b.length-1) {\n            try {\n                dos.write(b[j++]);\n            } catch (IOException ex) {\n                Logger.getLogger(SimpleServer.class.getName()).log(Level.SEVERE, null, ex);\n            }\n\n        }\n    }\n}\n</code></pre>\n\n<p>I turn it into byte and then send byte after byte.</p>\n\n<p>Except that I do not see any change on the receiver side.</p>\n\n<p><strong>Update according to @Muhammad Answer</strong></p>\n\n<p>This is what I did to send order to GeneXpert DX System</p>\n\n<pre><code>public class SimpleServer {\n\nprivate static ServerSocket server;\nprivate static Socket connection;\n\npublic static void main(String args[]) throws IOException, InterruptedException {\n    server = new ServerSocket(12221);\n    boolean stopped = false;\n\n    System.out.println(\" start... \");\n    connection = server.accept();\n    System.out.println(\"wait for connection\");\n    BufferedReader inFromClient = new BufferedReader(new InputStreamReader(connection.getInputStream()));\n    DataOutputStream outToClient = new DataOutputStream(connection.getOutputStream());\n    String currentMsg = \"\";\n    int clientIntMessage;\n\n    String h1, s2, s3, s4, s5, s6 = \"\";\n    h1 = \"1H|@^\\\\|ODM-IdfDGIWA-36|||GeneXpert PC^GeneXpert^4.8|||||LIS||P|1394-97|20070521100245\" + ProtocolASCII.LF\n            + \"P|1\" + ProtocolASCII.LF\n            + \"O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q\" + ProtocolASCII.LF\n            + \"L|1|F\" + ProtocolASCII.LF;\n    s2 = \"P|1\";\n    s3 = \"O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q\";\n    //s4 = \"O|2|SID-818||^^^TestId-14|S|20070812140600|||||A||||ORH||||||||||Q\";\n    //s5 = \"O|3|SID-818||^^^TestId-16|S|20070812140700|||||A||||ORH||||||||||Q\";\n    s6 = \"L|1|F\";\n\n    String retmsg = h1;\n    //logException(\"OrderMessae   :\" + retmsg);\n    retmsg = ProtocolASCII.STX + retmsg + ProtocolASCII.CR + ProtocolASCII.ETX + ProtocolMessage.getCheckSum(retmsg) + ProtocolASCII.CR + ProtocolASCII.LF;\n\n    clientIntMessage = inFromClient.read();\n    //while (clientIntMessage != ProtocolASCII.EOT) {\n    while (true) {\n        currentMsg += String.valueOf(Character.toChars(clientIntMessage));\n        if (clientIntMessage == ProtocolASCII.ENQ) {\n            outToClient.writeBytes(\"\" + ProtocolASCII.ACK);\n            System.out.println(\" &lt;--- LIS [ACK] on DX [ENQ]\");\n        } else if (clientIntMessage == ProtocolASCII.ACK) {\n            System.out.println(\" ---&gt; DX [ACK]\");\n            // Send your order message here\n            outToClient.writeBytes(retmsg);\n        } else if (clientIntMessage == ProtocolASCII.CR) {\n            System.out.println(currentMsg);\n            outToClient.writeBytes(\"\" + ProtocolASCII.ACK);\n        } else if (clientIntMessage == ProtocolASCII.NAK) {\n            System.out.println(\" ---&gt; DX sent [NAK] \");\n            System.out.println(\" --- LIS now wait 10 sec... \");\n            Thread.sleep(10000);\n            outToClient.writeBytes(\"\" + ProtocolASCII.ENQ);\n            System.out.println(\" &lt;--- LIS [ENQ] \");\n        } else if (clientIntMessage == ProtocolASCII.EOT) {\n            System.out.println(\" ---&gt; DX END OF TRANSMISSION\");\n            outToClient.writeBytes(\"\" + ProtocolASCII.ENQ);\n            System.out.println(\" &lt;--- LIS [ENQ] \");\n        }\n\n        if (stopped) {\n            break;\n        }\n        clientIntMessage = inFromClient.read();\n    }\n    connection.close();\n    stopped = true;\n}}\n</code></pre>\n\n<p>And this is the result I get from the console:</p>\n\n<pre><code>start... \nwait for connection\n &lt;--- LIS [ACK] on DX [ENQ]\n1H|@^\\|ODM-rQTcjIWA-66||GeneXpert PC^GeneXpert^4.8|||||LIS||P|1394-97|20180314003724\nQ|1|ALL||||||||||O@N\nL|1|N\nB5\n ---&gt; DX [EOT] \n &lt;--- LIS [ENQ] \n ---&gt; DX [ACK]\n ---&gt; DX sent [NAK] \n --- LIS now wait 10 sec... \n</code></pre>\n\n<p>DX is the machine software and LIS is the host. \nWhenever I try to send the ENQ, the machine answers me with NAK. </p>\n\n<p><strong>UPDATE 2</strong><br>\nIt seem to be working. But now windows events shows me an error about why my records orders don't appear in the GeneXpert DX host record list. The header record have been sent first. </p>\n\n<p><a href=\"https://i.stack.imgur.com/nMWfh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nMWfh.png\" alt=\"Windows event logs after following @Muhammad *UPDATE 2**\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/eZV4n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eZV4n.png\" alt=\"GeneXpert DX STATUS\"></a></p>\n"},{"tags":["python","java","list","tags","plc"],"comments":[{"owner":{"account_id":17304346,"reputation":336,"user_id":12533400,"display_name":"lcecl"},"score":1,"creation_date":1691153168,"post_id":76833246,"comment_id":135456899,"body_markdown":"How about [pylogix](https://github.com/dmroeder/pylogix/blob/master/examples/23_get_all_tags.py)?","body":"How about <a href=\"https://github.com/dmroeder/pylogix/blob/master/examples/23_get_all_tags.py\" rel=\"nofollow noreferrer\">pylogix</a>?"}],"owner":{"account_id":29157450,"reputation":1,"user_id":22336909,"display_name":"Bala Murugan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691128769,"creation_date":1691128104,"question_id":76833246,"body_markdown":"i can make connection but when i want to read data, idk the tag names present in it.\r\n```\r\ndef read_plc_data(plc, tag_name):\r\n    try:\r\n        data = plc.read(tag_name)\r\n        return data\r\n    except Exception as e:\r\n        print(f&quot;Error while reading PLC data: {e}&quot;)\r\n        return None\r\n```","title":"is there any way to find existing tag names and list out them in allen bradley plc using python code?","body":"<p>i can make connection but when i want to read data, idk the tag names present in it.</p>\n<pre><code>def read_plc_data(plc, tag_name):\n    try:\n        data = plc.read(tag_name)\n        return data\n    except Exception as e:\n        print(f&quot;Error while reading PLC data: {e}&quot;)\n        return None\n</code></pre>\n"},{"tags":["java","spring-kafka"],"comments":[{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1691154635,"post_id":76832968,"comment_id":135457207,"body_markdown":"You need to show your RetryTopicNamesProviderFactory and the full stack trace.","body":"You need to show your RetryTopicNamesProviderFactory and the full stack trace."}],"owner":{"account_id":29157099,"reputation":11,"user_id":22336630,"display_name":"Samir Salamov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":149,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691127733,"creation_date":1691123711,"question_id":76832968,"body_markdown":"I have below configuration for listener\r\n\r\n```\r\n@RetryableTopic(\r\n        attempts = &quot;3&quot;,\r\n        backoff = @Backoff(delay = 5000, multiplier = 3.0, maxDelay = 60000, random = true),\r\n        autoCreateTopics = &quot;false&quot;,\r\n        exclude = {\r\n            JsonProcessingException.class,\r\n            NullPointerException.class,\r\n            IllegalStateException.class,\r\n            IllegalArgumentException.class,\r\n            UnsupportedOperationException.class,\r\n            ConstraintViolationException.class,\r\n            InvalidRequestException.class},\r\n        autoStartDltHandler = &quot;false&quot;,\r\n        topicSuffixingStrategy = TopicSuffixingStrategy.SUFFIX_WITH_INDEX_VALUE)\r\n@KafkaListener(topics = &quot;#{&#39;${spring.kafka.consumer.properties.topics}&#39;.split(&#39;\\\\s+&#39;)}&quot;)\r\n...\r\n```\r\n\r\nand in properties i listed all related topics:\r\n```\r\n... topics: &gt;\r\n          transaction_events_raw_v1\r\n          card_events_raw_v1\r\n          authorisation_events_raw_v1\r\n```\r\n\r\nAs you know multiple RETRY and DLT topics will be created with below naming format:\r\n```\r\ntransaction_events_raw_v1_retry-0\r\ntransaction_events_raw_v1_retry-1\r\ntransaction_events_raw_v1_dlt\r\ncard_events_raw_v1_retry-0\r\ncard_events_raw_v1_retry-1\r\ncard_events_raw_v1_dlt\r\nauthorisation_events_raw_v1_retry-0\r\nauthorisation_events_raw_v1_retry-1\r\nauthorisation_events_raw_v1_dlt\r\n```\r\n\r\nI would like to know is it possible to create single RETRY and DLT topics in this case?\r\n```\r\ndomain_events_retry-0\r\ndomain_events_retry-1\r\ndomain_events_dlt\r\n```\r\n\r\nTried to override RetryTopicNamesProviderFactory and manipulate with retry and dead letter topic names however having duplicate key issue:\r\n\r\n```\r\n\r\nCaused by: java.lang.IllegalStateException: Duplicate key null (attempted merging values DestinationTopic{destinationName=&#39;domain_events_retry&#39;, properties=Properties{delayMs=8605, suffix=&#39;-retry-0&#39;, type=RETRY, maxAttempts=3, numPartitions=1, dltStrategy=ALWAYS_RETRY_ON_ERROR, kafkaOperations=org.springframework.kafka.core.KafkaTemplate@70b196d3, shouldRetryOn=org.springframework.kafka.retrytopic.DestinationTopicPropertiesFactory$$Lambda$841/0x00000008006b2840@5c997de8, timeout=-1}} and DestinationTopic{destinationName=&#39;domain_events_retry&#39;, properties=Properties{delayMs=27926, suffix=&#39;-retry-1&#39;, type=RETRY, maxAttempts=3, numPartitions=1, dltStrategy=ALWAYS_RETRY_ON_ERROR, kafkaOperations=org.springframework.kafka.core.KafkaTemplate@70b196d3, shouldRetryOn=org.springframework.kafka.retrytopic.DestinationTopicPropertiesFactory$$Lambda$841/0x00000008006b2840@45bf93bb, timeout=-1}})\r\n\r\n```\r\n\r\n\r\nRegards,\r\n\r\n--Samir","title":"Single Retry and DLT topic for multiple topics listener with @RetryableTopic","body":"<p>I have below configuration for listener</p>\n<pre><code>@RetryableTopic(\n        attempts = &quot;3&quot;,\n        backoff = @Backoff(delay = 5000, multiplier = 3.0, maxDelay = 60000, random = true),\n        autoCreateTopics = &quot;false&quot;,\n        exclude = {\n            JsonProcessingException.class,\n            NullPointerException.class,\n            IllegalStateException.class,\n            IllegalArgumentException.class,\n            UnsupportedOperationException.class,\n            ConstraintViolationException.class,\n            InvalidRequestException.class},\n        autoStartDltHandler = &quot;false&quot;,\n        topicSuffixingStrategy = TopicSuffixingStrategy.SUFFIX_WITH_INDEX_VALUE)\n@KafkaListener(topics = &quot;#{'${spring.kafka.consumer.properties.topics}'.split('\\\\s+')}&quot;)\n...\n</code></pre>\n<p>and in properties i listed all related topics:</p>\n<pre><code>... topics: &gt;\n          transaction_events_raw_v1\n          card_events_raw_v1\n          authorisation_events_raw_v1\n</code></pre>\n<p>As you know multiple RETRY and DLT topics will be created with below naming format:</p>\n<pre><code>transaction_events_raw_v1_retry-0\ntransaction_events_raw_v1_retry-1\ntransaction_events_raw_v1_dlt\ncard_events_raw_v1_retry-0\ncard_events_raw_v1_retry-1\ncard_events_raw_v1_dlt\nauthorisation_events_raw_v1_retry-0\nauthorisation_events_raw_v1_retry-1\nauthorisation_events_raw_v1_dlt\n</code></pre>\n<p>I would like to know is it possible to create single RETRY and DLT topics in this case?</p>\n<pre><code>domain_events_retry-0\ndomain_events_retry-1\ndomain_events_dlt\n</code></pre>\n<p>Tried to override RetryTopicNamesProviderFactory and manipulate with retry and dead letter topic names however having duplicate key issue:</p>\n<pre><code>\nCaused by: java.lang.IllegalStateException: Duplicate key null (attempted merging values DestinationTopic{destinationName='domain_events_retry', properties=Properties{delayMs=8605, suffix='-retry-0', type=RETRY, maxAttempts=3, numPartitions=1, dltStrategy=ALWAYS_RETRY_ON_ERROR, kafkaOperations=org.springframework.kafka.core.KafkaTemplate@70b196d3, shouldRetryOn=org.springframework.kafka.retrytopic.DestinationTopicPropertiesFactory$$Lambda$841/0x00000008006b2840@5c997de8, timeout=-1}} and DestinationTopic{destinationName='domain_events_retry', properties=Properties{delayMs=27926, suffix='-retry-1', type=RETRY, maxAttempts=3, numPartitions=1, dltStrategy=ALWAYS_RETRY_ON_ERROR, kafkaOperations=org.springframework.kafka.core.KafkaTemplate@70b196d3, shouldRetryOn=org.springframework.kafka.retrytopic.DestinationTopicPropertiesFactory$$Lambda$841/0x00000008006b2840@45bf93bb, timeout=-1}})\n\n</code></pre>\n<p>Regards,</p>\n<p>--Samir</p>\n"},{"tags":["java","android","android-studio","push-notification","notifications"],"comments":[{"owner":{"account_id":26359116,"reputation":585,"user_id":20015640,"display_name":"Urvish Shiroya"},"score":1,"creation_date":1671451654,"post_id":74832565,"comment_id":132094997,"body_markdown":"what you tried?","body":"what you tried?"}],"answers":[{"comments":[{"owner":{"account_id":26507559,"reputation":69,"user_id":20143472,"display_name":"jackie Maik"},"score":1,"creation_date":1671510493,"post_id":74850656,"comment_id":132109558,"body_markdown":"I don&#39;t have pending intent in project. I  added dependencies &quot;implementation &#39;androidx.work:work-runtime:2.7.1&#39; &quot; but the error  still remain.","body":"I don&#39;t have pending intent in project. I  added dependencies &quot;implementation &#39;androidx.work:work-runtime:2.7.1&#39; &quot; but the error  still remain."},{"owner":{"account_id":26359116,"reputation":585,"user_id":20015640,"display_name":"Urvish Shiroya"},"score":0,"creation_date":1671514793,"post_id":74850656,"comment_id":132110143,"body_markdown":"can you provide error logs?","body":"can you provide error logs?"},{"owner":{"account_id":26507559,"reputation":69,"user_id":20143472,"display_name":"jackie Maik"},"score":0,"creation_date":1671517699,"post_id":74850656,"comment_id":132110630,"body_markdown":"I added more errors detail in my question.","body":"I added more errors detail in my question."},{"owner":{"account_id":2018497,"reputation":87,"user_id":1805211,"display_name":"Black_Zerg"},"score":1,"creation_date":1673506595,"post_id":74850656,"comment_id":132515565,"body_markdown":"I am not using PendingIntent in my project and when I added implementation &#39;androidx.work:work-runtime-ktx:2.7.1&#39; it was solved my issue/ Thanks for help","body":"I am not using PendingIntent in my project and when I added implementation &#39;androidx.work:work-runtime-ktx:2.7.1&#39; it was solved my issue/ Thanks for help"},{"owner":{"account_id":18626743,"reputation":131,"user_id":13575682,"display_name":"Vepa Sabyrow"},"score":0,"creation_date":1691498545,"post_id":74850656,"comment_id":135497357,"body_markdown":"How to solve that issue in flutter","body":"How to solve that issue in flutter"},{"owner":{"account_id":25333752,"reputation":451,"user_id":19153194,"display_name":"Vaishnavi Maske"},"score":0,"creation_date":1694257469,"post_id":74850656,"comment_id":135869616,"body_markdown":"How to fixed this issue in react native?","body":"How to fixed this issue in react native?"},{"owner":{"account_id":26359116,"reputation":585,"user_id":20015640,"display_name":"Urvish Shiroya"},"score":0,"creation_date":1694334311,"post_id":74850656,"comment_id":135875464,"body_markdown":"@VaishnaviMaske sorry i have solution for only android platform.","body":"@VaishnaviMaske sorry i have solution for only android platform."}],"tags":[],"owner":{"account_id":26359116,"reputation":585,"user_id":20015640,"display_name":"Urvish Shiroya"},"comment_count":7,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1671453520,"creation_date":1671453520,"answer_id":74850656,"question_id":74832565,"body_markdown":"1) Determine whether your project has pending intent.\r\n2) If `Yes` then search for PendingIntent in the whole project and add the flag to PendingIntent like this.\r\n\r\n- before\r\n```java\r\nPendingIntent mPendingIntent = PendingIntent.getActivity(mContext, 0, intent, 0);\r\n```\r\n- after\r\n```java\r\nPendingIntent mPendingIntent = PendingIntent.getActivity(mContext, 0, intent, PendingIntent.FLAG_MUTABLE);\r\n```\r\n**OR**\r\n\r\nIf there is no PendingIntent in your project or you get an error even though you write the flag:\r\n\r\n- Add the following to your `build.gradle(app)` dependencies.\r\n\r\n```\r\ndependencies {\r\n  // For Java\r\n  implementation &#39;androidx.work:work-runtime:2.7.1&#39; \r\n\r\n  // For Kotlin\r\n  implementation &#39;androidx.work:work-runtime-ktx:2.7.1&#39;\r\n}\r\n```","title":"Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE","body":"<ol>\n<li>Determine whether your project has pending intent.</li>\n<li>If <code>Yes</code> then search for PendingIntent in the whole project and add the flag to PendingIntent like this.</li>\n</ol>\n<ul>\n<li>before</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>PendingIntent mPendingIntent = PendingIntent.getActivity(mContext, 0, intent, 0);\n</code></pre>\n<ul>\n<li>after</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>PendingIntent mPendingIntent = PendingIntent.getActivity(mContext, 0, intent, PendingIntent.FLAG_MUTABLE);\n</code></pre>\n<p><strong>OR</strong></p>\n<p>If there is no PendingIntent in your project or you get an error even though you write the flag:</p>\n<ul>\n<li>Add the following to your <code>build.gradle(app)</code> dependencies.</li>\n</ul>\n<pre><code>dependencies {\n  // For Java\n  implementation 'androidx.work:work-runtime:2.7.1' \n\n  // For Kotlin\n  implementation 'androidx.work:work-runtime-ktx:2.7.1'\n}\n</code></pre>\n"}],"owner":{"account_id":26507559,"reputation":69,"user_id":20143472,"display_name":"jackie Maik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12875,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":1,"score":4,"last_activity_date":1691126573,"creation_date":1671263449,"question_id":74832565,"body_markdown":"I am making Notification app and struggling with below error:\r\n\r\n    java.lang.IllegalArgumentException: com.tonyapp.rabbitfarm: Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE be specified when creating a PendingIntent.\r\n        Strongly consider using FLAG_IMMUTABLE, only use FLAG_MUTABLE if some functionality depends on the PendingIntent being mutable, e.g. if it needs to be used with inline replies or bubbles.\r\n            at android.app.PendingIntent.checkFlags(PendingIntent.java:375)\r\n            at android.app.PendingIntent.getBroadcastAsUser(PendingIntent.java:645)\r\n            at android.app.PendingIntent.getBroadcast(PendingIntent.java:632)\r\n            at com.allyants.notifyme.NotifyMe.scheduleNotification(NotifyMe.java:159)\r\n            at com.allyants.notifyme.NotifyMe.&lt;init&gt;(NotifyMe.java:89)\r\n            at com.allyants.notifyme.NotifyMe$Builder.build(NotifyMe.java:327)\r\n            at com.tonyapp.rabbitfarm.NotesTakerActivity.onTimeSet(NotesTakerActivity.java:291)\r\n            at com.wdullaer.materialdatetimepicker.time.TimePickerDialog.notifyOnDateListener(TimePickerDialog.java:1893)\r\n            at com.wdullaer.materialdatetimepicker.time.TimePickerDialog.lambda$onCreateView$3$com-wdullaer-materialdatetimepicker-time-TimePickerDialog(TimePickerDialog.java:761)\r\n            at com.wdullaer.materialdatetimepicker.time.TimePickerDialog$$ExternalSyntheticLambda3.onClick(Unknown Source:2)\r\n            at android.view.View.performClick(View.java:7441)\r\n            at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1202)\r\n            at android.view.View.performClickInternal(View.java:7418)\r\n            at android.view.View.access$3700(View.java:835)\r\n            at android.view.View$PerformClick.run(View.java:28676)\r\n            at android.os.Handler.handleCallback(Handler.java:938)\r\n            at android.os.Handler.dispatchMessage(Handler.java:99)\r\n            at android.os.Looper.loopOnce(Looper.java:201)\r\n            at android.os.Looper.loop(Looper.java:288)\r\n            at android.app.ActivityThread.main(ActivityThread.java:7839)\r\n            at java.lang.reflect.Method.invoke(Native Method)\r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)\r\n\r\nI searched the solutions for this issue and there are no solution work for me.\r\n\r\nbelow is my Mainactivity.java code:\r\n\r\n     btnCancel.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                NotifyMe.cancel(getApplicationContext(),&quot;test&quot;);\r\n            }\r\n        });\r\n\r\n\r\n        btnNotify.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                dpd.show(getSupportFragmentManager(),&quot;DatePickerDialog&quot;);\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onDateSet(DatePickerDialog view, int year, int monthOfYear, int dayOfMonth) {\r\n\r\n        now.set(Calendar.YEAR,year);\r\n        now.set(Calendar.MONTH,monthOfYear);\r\n        now.set(Calendar.DAY_OF_MONTH,dayOfMonth);\r\n\r\n        tpd.show(getSupportFragmentManager(),&quot;timepicker&quot;);\r\n\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onTimeSet(TimePickerDialog view, int hourOfDay, int minute, int second) {\r\n\r\n\r\n        now.set(Calendar.HOUR_OF_DAY,hourOfDay);\r\n        now.set(Calendar.MINUTE,minute);\r\n        now.set(Calendar.SECOND,second);\r\n\r\n\r\n\r\n        NotifyMe notifyMe = new NotifyMe.Builder(getApplicationContext())\r\n                .title(edt1.getText().toString())\r\n                .content(edt2.getText().toString())\r\n                .color(255,0,0,255)\r\n                .led_color(255,255,255,255)\r\n                .time(now)\r\n                .addAction(new Intent(),&quot;Snooze&quot;,false)\r\n                .addAction(new Intent(),&quot;Dismiss&quot;,true)\r\n                .addAction(new Intent(),&quot;Done&quot;)\r\n                .large_icon(R.mipmap.ic_launcher_round)\r\n                .build();\r\n\r\n    }\r\n\r\nPlease help me fix this problem. thanks in advance.\r\n","title":"Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE","body":"<p>I am making Notification app and struggling with below error:</p>\n<pre><code>java.lang.IllegalArgumentException: com.tonyapp.rabbitfarm: Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE be specified when creating a PendingIntent.\n    Strongly consider using FLAG_IMMUTABLE, only use FLAG_MUTABLE if some functionality depends on the PendingIntent being mutable, e.g. if it needs to be used with inline replies or bubbles.\n        at android.app.PendingIntent.checkFlags(PendingIntent.java:375)\n        at android.app.PendingIntent.getBroadcastAsUser(PendingIntent.java:645)\n        at android.app.PendingIntent.getBroadcast(PendingIntent.java:632)\n        at com.allyants.notifyme.NotifyMe.scheduleNotification(NotifyMe.java:159)\n        at com.allyants.notifyme.NotifyMe.&lt;init&gt;(NotifyMe.java:89)\n        at com.allyants.notifyme.NotifyMe$Builder.build(NotifyMe.java:327)\n        at com.tonyapp.rabbitfarm.NotesTakerActivity.onTimeSet(NotesTakerActivity.java:291)\n        at com.wdullaer.materialdatetimepicker.time.TimePickerDialog.notifyOnDateListener(TimePickerDialog.java:1893)\n        at com.wdullaer.materialdatetimepicker.time.TimePickerDialog.lambda$onCreateView$3$com-wdullaer-materialdatetimepicker-time-TimePickerDialog(TimePickerDialog.java:761)\n        at com.wdullaer.materialdatetimepicker.time.TimePickerDialog$$ExternalSyntheticLambda3.onClick(Unknown Source:2)\n        at android.view.View.performClick(View.java:7441)\n        at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1202)\n        at android.view.View.performClickInternal(View.java:7418)\n        at android.view.View.access$3700(View.java:835)\n        at android.view.View$PerformClick.run(View.java:28676)\n        at android.os.Handler.handleCallback(Handler.java:938)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loopOnce(Looper.java:201)\n        at android.os.Looper.loop(Looper.java:288)\n        at android.app.ActivityThread.main(ActivityThread.java:7839)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)\n</code></pre>\n<p>I searched the solutions for this issue and there are no solution work for me.</p>\n<p>below is my Mainactivity.java code:</p>\n<pre><code> btnCancel.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            NotifyMe.cancel(getApplicationContext(),&quot;test&quot;);\n        }\n    });\n\n\n    btnNotify.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            dpd.show(getSupportFragmentManager(),&quot;DatePickerDialog&quot;);\n        }\n    });\n}\n\n@Override\npublic void onDateSet(DatePickerDialog view, int year, int monthOfYear, int dayOfMonth) {\n\n    now.set(Calendar.YEAR,year);\n    now.set(Calendar.MONTH,monthOfYear);\n    now.set(Calendar.DAY_OF_MONTH,dayOfMonth);\n\n    tpd.show(getSupportFragmentManager(),&quot;timepicker&quot;);\n\n\n\n}\n\n@Override\npublic void onTimeSet(TimePickerDialog view, int hourOfDay, int minute, int second) {\n\n\n    now.set(Calendar.HOUR_OF_DAY,hourOfDay);\n    now.set(Calendar.MINUTE,minute);\n    now.set(Calendar.SECOND,second);\n\n\n\n    NotifyMe notifyMe = new NotifyMe.Builder(getApplicationContext())\n            .title(edt1.getText().toString())\n            .content(edt2.getText().toString())\n            .color(255,0,0,255)\n            .led_color(255,255,255,255)\n            .time(now)\n            .addAction(new Intent(),&quot;Snooze&quot;,false)\n            .addAction(new Intent(),&quot;Dismiss&quot;,true)\n            .addAction(new Intent(),&quot;Done&quot;)\n            .large_icon(R.mipmap.ic_launcher_round)\n            .build();\n\n}\n</code></pre>\n<p>Please help me fix this problem. thanks in advance.</p>\n"},{"tags":["java","go","try-catch-finally"],"comments":[{"owner":{"account_id":4451249,"reputation":499,"user_id":3623056,"accept_rate":69,"display_name":"mbsingh"},"score":0,"creation_date":1429680177,"post_id":29788307,"comment_id":47706030,"body_markdown":"Are you looking to perform cleanup?","body":"Are you looking to perform cleanup?"},{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":1,"creation_date":1429680182,"post_id":29788307,"comment_id":47706032,"body_markdown":"What&#39;s wrong with `finally`?","body":"What&#39;s wrong with <code>finally</code>?"},{"owner":{"account_id":3746057,"reputation":115,"user_id":3114701,"display_name":"Romeo"},"score":0,"creation_date":1429687080,"post_id":29788307,"comment_id":47709629,"body_markdown":"yeah clean-up like closing connection and to free memory..","body":"yeah clean-up like closing connection and to free memory.."},{"owner":{"account_id":34433,"reputation":55374,"user_id":1400793,"display_name":"Paul Hankin"},"score":7,"creation_date":1429692814,"post_id":29788307,"comment_id":47713348,"body_markdown":"There&#39;s no direct translation, and how you write go isn&#39;t how you write java.","body":"There&#39;s no direct translation, and how you write go isn&#39;t how you write java."}],"answers":[{"tags":[],"owner":{"account_id":1082226,"reputation":6704,"user_id":1078890,"accept_rate":46,"display_name":"IamNaN"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1436923056,"creation_date":1429680296,"answer_id":29788438,"question_id":29788307,"body_markdown":"Java 7 has a [try-with-resources statement][1].\r\n\r\n&gt; The try-with-resources statement is a try statement that declares one or more resources. A resource is an object that must be closed after the program is finished with it. The try-with-resources statement ensures that each resource is closed at the end of the statement. Any object that implements java.lang.AutoCloseable, which includes all objects which implement java.io.Closeable, can be used as a resource.\r\n&gt; \r\n&gt; The following example reads the first line from a file. It uses an\r\n&gt; instance of BufferedReader to read data from the file. BufferedReader\r\n&gt; is a resource that must be closed after the program is finished with\r\n&gt; it:\r\n&gt; \r\n&gt;     static String readFirstLineFromFile(String path) throws IOException {\r\n&gt;         try (BufferedReader br = new BufferedReader(new FileReader(path))) {\r\n&gt;             return br.readLine();\r\n&gt;         }\r\n&gt;     }\r\n&gt; \r\n&gt; In this example, the resource declared in the try-with-resources\r\n&gt; statement is a BufferedReader. The declaration statement appears\r\n&gt; within parentheses immediately after the try keyword. The class\r\n&gt; BufferedReader, in Java SE 7 and later, implements the interface\r\n&gt; java.lang.AutoCloseable. Because the BufferedReader instance is\r\n&gt; declared in a try-with-resource statement, it will be closed\r\n&gt; regardless of whether the try statement completes normally or abruptly\r\n&gt; (as a result of the method BufferedReader.readLine throwing an\r\n&gt; IOException).\r\n\r\n\r\n  \r\n\r\n[1]: https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\r\n\r\n","title":"What is the &#39;defer&#39; equivalent for Java","body":"<p>Java 7 has a <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"noreferrer\">try-with-resources statement</a>.</p>\n\n<blockquote>\n  <p>The try-with-resources statement is a try statement that declares one or more resources. A resource is an object that must be closed after the program is finished with it. The try-with-resources statement ensures that each resource is closed at the end of the statement. Any object that implements java.lang.AutoCloseable, which includes all objects which implement java.io.Closeable, can be used as a resource.</p>\n  \n  <p>The following example reads the first line from a file. It uses an\n  instance of BufferedReader to read data from the file. BufferedReader\n  is a resource that must be closed after the program is finished with\n  it:</p>\n\n<pre><code>static String readFirstLineFromFile(String path) throws IOException {\n    try (BufferedReader br = new BufferedReader(new FileReader(path))) {\n        return br.readLine();\n    }\n}\n</code></pre>\n  \n  <p>In this example, the resource declared in the try-with-resources\n  statement is a BufferedReader. The declaration statement appears\n  within parentheses immediately after the try keyword. The class\n  BufferedReader, in Java SE 7 and later, implements the interface\n  java.lang.AutoCloseable. Because the BufferedReader instance is\n  declared in a try-with-resource statement, it will be closed\n  regardless of whether the try statement completes normally or abruptly\n  (as a result of the method BufferedReader.readLine throwing an\n  IOException).</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2268219,"reputation":1637,"user_id":1996296,"accept_rate":69,"display_name":"igreenfield"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1429690861,"creation_date":1429680421,"answer_id":29788462,"question_id":29788307,"body_markdown":"In java 7 and above you can use try-with-resource:\r\n     \r\n    public static String readFirstLineFromFile(String path) throws IOException {\r\n      try (BufferedReader br = new BufferedReader(new FileReader(path))) {\r\n         return br.readLine();\r\n      }\r\n    }\r\n\r\nwhen you exit the try it will close the resource\r\ndocs: [link](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)","title":"What is the &#39;defer&#39; equivalent for Java","body":"<p>In java 7 and above you can use try-with-resource:</p>\n\n<pre><code>public static String readFirstLineFromFile(String path) throws IOException {\n  try (BufferedReader br = new BufferedReader(new FileReader(path))) {\n     return br.readLine();\n  }\n}\n</code></pre>\n\n<p>when you exit the try it will close the resource\ndocs: <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow\">link</a></p>\n"},{"tags":[],"owner":{"account_id":953817,"reputation":493,"user_id":979478,"display_name":"Pawel Zieminski"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691126556,"creation_date":1691125530,"answer_id":76833065,"question_id":29788307,"body_markdown":"You could also do something like this with some extra libraries. Unfortunately, there is the `IOException` to deal with.\r\n\r\n    import com.google.common.io.Closer;\r\n    import lombok.Cleanup;\r\n    import lombok.SneakyThrows;\r\n    import java.io.IOException;\r\n    \r\n    public class Main {\r\n    \r\n        @SneakyThrows(IOException.class)\r\n        public static void main(String[] args) {\r\n            @Cleanup Closer defer = Closer.create();\r\n            defer.register(() -&gt; System.out.println(&quot;world&quot;));\r\n            System.out.println(&quot;hello&quot;);\r\n        }\r\n    }\r\n\r\nIf you don&#39;t like dealing with the exception, and if it&#39;s worth it for you, you could wrap it like this\r\n\r\n    import com.google.common.io.Closer;\r\n    import lombok.Cleanup;\r\n    import lombok.SneakyThrows;\r\n    import java.io.Closeable;\r\n    import java.io.IOException;\r\n    \r\n    public class Main {\r\n    \r\n        public static void main(String[] args) {\r\n            @Cleanup Defer defer = Defer.create();\r\n            defer.register(() -&gt; System.out.println(&quot;world&quot;));\r\n            System.out.println(&quot;hello&quot;);\r\n        }\r\n    }\r\n    \r\n    // in some util package\r\n    class Defer implements Closeable {\r\n        private final Closer closer;\r\n    \r\n        private Defer(Closer closer) {\r\n            this.closer = closer;\r\n        }\r\n    \r\n        public static Defer create() {\r\n            return new Defer(Closer.create());\r\n        }\r\n    \r\n        public &lt;C extends Closeable&gt; C register(C closeable) {\r\n            return this.closer.register(closeable);\r\n        }\r\n    \r\n        @SneakyThrows(IOException.class)\r\n        @Override\r\n        public void close() {\r\n            this.closer.close();\r\n        }\r\n    }\r\n\r\n","title":"What is the &#39;defer&#39; equivalent for Java","body":"<p>You could also do something like this with some extra libraries. Unfortunately, there is the <code>IOException</code> to deal with.</p>\n<pre><code>import com.google.common.io.Closer;\nimport lombok.Cleanup;\nimport lombok.SneakyThrows;\nimport java.io.IOException;\n\npublic class Main {\n\n    @SneakyThrows(IOException.class)\n    public static void main(String[] args) {\n        @Cleanup Closer defer = Closer.create();\n        defer.register(() -&gt; System.out.println(&quot;world&quot;));\n        System.out.println(&quot;hello&quot;);\n    }\n}\n</code></pre>\n<p>If you don't like dealing with the exception, and if it's worth it for you, you could wrap it like this</p>\n<pre><code>import com.google.common.io.Closer;\nimport lombok.Cleanup;\nimport lombok.SneakyThrows;\nimport java.io.Closeable;\nimport java.io.IOException;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        @Cleanup Defer defer = Defer.create();\n        defer.register(() -&gt; System.out.println(&quot;world&quot;));\n        System.out.println(&quot;hello&quot;);\n    }\n}\n\n// in some util package\nclass Defer implements Closeable {\n    private final Closer closer;\n\n    private Defer(Closer closer) {\n        this.closer = closer;\n    }\n\n    public static Defer create() {\n        return new Defer(Closer.create());\n    }\n\n    public &lt;C extends Closeable&gt; C register(C closeable) {\n        return this.closer.register(closeable);\n    }\n\n    @SneakyThrows(IOException.class)\n    @Override\n    public void close() {\n        this.closer.close();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3746057,"reputation":115,"user_id":3114701,"display_name":"Romeo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9897,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":29788438,"answer_count":3,"score":10,"last_activity_date":1691126556,"creation_date":1429679805,"question_id":29788307,"body_markdown":"This is just a short example of Go code:\r\n\r\n    package main\r\n\r\n    import &quot;fmt&quot;\r\n\r\n    func main() {\r\n\t    defer fmt.Println(&quot;world&quot;) //use of keyword &#39;defer&#39;\r\n\r\n\t    fmt.Println(&quot;hello&quot;)\r\n    }\r\n\r\nI am finding an equivalent of &#39;defer&#39; in Java.\r\n\r\nInstead of &#39;defer&#39; I can use\r\n\r\n    try {\r\n        //do something\r\n    } finally {\r\n        //code using defer\r\n    }\r\n\r\nIs there any alternative without using try/catch/finally?","title":"What is the &#39;defer&#39; equivalent for Java","body":"<p>This is just a short example of Go code:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    defer fmt.Println(\"world\") //use of keyword 'defer'\n\n    fmt.Println(\"hello\")\n}\n</code></pre>\n\n<p>I am finding an equivalent of 'defer' in Java.</p>\n\n<p>Instead of 'defer' I can use</p>\n\n<pre><code>try {\n    //do something\n} finally {\n    //code using defer\n}\n</code></pre>\n\n<p>Is there any alternative without using try/catch/finally?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1691126937,"post_id":76833094,"comment_id":135452304,"body_markdown":"@paulsm4 `Singleton` doesn&#39;t incur any overhead either until it&#39;s used.","body":"@paulsm4 <code>Singleton</code> doesn&#39;t incur any overhead either until it&#39;s used."},{"owner":{"account_id":29156880,"reputation":21,"user_id":22336461,"display_name":"jcli"},"score":0,"creation_date":1691130006,"post_id":76833094,"comment_id":135452656,"body_markdown":"@shmosel yes, my problem is here","body":"@shmosel yes, my problem is here"},{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1691175176,"post_id":76833094,"comment_id":135461568,"body_markdown":"@jcli:: as shmosel pointed out: 1) Neither example incurs any runtime overhead unless/until the app actually tries to *access* the class, 2) Your &quot;Singleton1&quot; example (the style I&#39;ve always used) has a potential race condition if `Singleton1.getInstance()` is called from multiple concurrent threads.  Here&#39;s a good discussion of different alternatives: https://www.digitalocean.com/community/tutorials/java-singleton-design-pattern-best-practices-examples","body":"@jcli:: as shmosel pointed out: 1) Neither example incurs any runtime overhead unless/until the app actually tries to <i>access</i> the class, 2) Your &quot;Singleton1&quot; example (the style I&#39;ve always used) has a potential race condition if <code>Singleton1.getInstance()</code> is called from multiple concurrent threads.  Here&#39;s a good discussion of different alternatives: <a href=\"https://www.digitalocean.com/community/tutorials/java-singleton-design-pattern-best-practices-examples\" rel=\"nofollow noreferrer\">digitalocean.com/community/tutorials/&hellip;</a>"},{"owner":{"account_id":29156880,"reputation":21,"user_id":22336461,"display_name":"jcli"},"score":0,"creation_date":1691221215,"post_id":76833094,"comment_id":135465290,"body_markdown":"@paulsm4:: In fact, what I want to know is when using Singleton1 is better than Singleton and when using Singleton is better","body":"@paulsm4:: In fact, what I want to know is when using Singleton1 is better than Singleton and when using Singleton is better"},{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1691252972,"post_id":76833094,"comment_id":135468347,"body_markdown":"The link I cited, [Java Singleton Design Pattern Best Practices with Examples](https://www.digitalocean.com/community/tutorials/java-singleton-design-pattern-best-practices-examples), actually gives *eight* different alternatives for implementing a singleton in Java, And discusses the pros/cons of each.  Personally, whenever it&#39;s applicable, I prefer &quot;lazy initialization&quot; (`if instance == null...`), without &quot;synchronized&quot; (unnecessary overhead if not multithreaded).","body":"The link I cited, <a href=\"https://www.digitalocean.com/community/tutorials/java-singleton-design-pattern-best-practices-examples\" rel=\"nofollow noreferrer\">Java Singleton Design Pattern Best Practices with Examples</a>, actually gives <i>eight</i> different alternatives for implementing a singleton in Java, And discusses the pros/cons of each.  Personally, whenever it&#39;s applicable, I prefer &quot;lazy initialization&quot; (<code>if instance == null...</code>), without &quot;synchronized&quot; (unnecessary overhead if not multithreaded)."}],"owner":{"account_id":29156880,"reputation":21,"user_id":22336461,"display_name":"jcli"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1691126761,"answer_count":0,"score":1,"last_activity_date":1691126038,"creation_date":1691126038,"question_id":76833094,"body_markdown":"Under what circumstances, we need to use the lazy singleton mode. It seems that in the process of use, we load a class to use its properties or methods, then we must create its instance at this time, so there is no difference between a hungry man and a lazy man. In what scenario do we need to load It seems that a class is always loaded the first time it is used\r\n\r\nMy question is ： Under what circumstances, a singleton class will be loaded by jvm but not used. It seems that jvm always loads this class when it is used for the first time\r\n\r\n```\r\nclass Main{\r\n    public static void main(String[] args) {\r\n        Singleton instance=Singleton.getInstance();\r\n        Singleton1 singleton1=Singleton1.getInstance();\r\n    }\r\n}\r\nclass Singleton1{\r\n    private Singleton1(){}\r\n    private volatile static Singleton1 instance=null;\r\n    public static Singleton1 getInstance(){\r\n        if(instance==null){\r\n            synchronized (Singleton1.class){\r\n                if(instance==null){\r\n                    instance=new Singleton1();\r\n                }\r\n            }\r\n        }\r\n        return instance;\r\n    }\r\n}\r\nclass Singleton{\r\n    private Singleton(){}\r\n    private static Singleton instance=new Singleton();\r\n    public static Singleton getInstance(){\r\n        return instance;\r\n    }\r\n}\r\n```\r\nThere seems to be no difference between the two\r\n\r\nHope to get some lazy singleton application scenarios","title":"What is the use of singleton pattern lazy style","body":"<p>Under what circumstances, we need to use the lazy singleton mode. It seems that in the process of use, we load a class to use its properties or methods, then we must create its instance at this time, so there is no difference between a hungry man and a lazy man. In what scenario do we need to load It seems that a class is always loaded the first time it is used</p>\n<p>My question is ： Under what circumstances, a singleton class will be loaded by jvm but not used. It seems that jvm always loads this class when it is used for the first time</p>\n<pre><code>class Main{\n    public static void main(String[] args) {\n        Singleton instance=Singleton.getInstance();\n        Singleton1 singleton1=Singleton1.getInstance();\n    }\n}\nclass Singleton1{\n    private Singleton1(){}\n    private volatile static Singleton1 instance=null;\n    public static Singleton1 getInstance(){\n        if(instance==null){\n            synchronized (Singleton1.class){\n                if(instance==null){\n                    instance=new Singleton1();\n                }\n            }\n        }\n        return instance;\n    }\n}\nclass Singleton{\n    private Singleton(){}\n    private static Singleton instance=new Singleton();\n    public static Singleton getInstance(){\n        return instance;\n    }\n}\n</code></pre>\n<p>There seems to be no difference between the two</p>\n<p>Hope to get some lazy singleton application scenarios</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9865,"page":269,"page_size":100}
