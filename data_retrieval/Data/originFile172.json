{"items":[{"tags":["java","spring","spring-boot","inversion-of-control"],"answers":[{"tags":[],"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695295209,"creation_date":1695295209,"answer_id":77149755,"question_id":77149323,"body_markdown":"If you&#39;re not using Spring Boot, then you have to set up the Spring container by yourself by creating an [`ApplicationContext` bean](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/ApplicationContext.html).\r\n\r\nOne way of doing so is by using the `AnnotationConfigApplicationContext` class. For example:\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n    ApplicationContext context = new ApplicationConfigApplicationContext(TestSpringApplication.class);\r\n    MessageService messageService = context.getBean(MessageService.class);\r\n    messageService.printAllMessages();\r\n}\r\n```\r\n\r\nBut this only creates a basic application context for you. Without Spring Boot, you no longer have access to autoconfigurations. This means that:\r\n\r\n- If you&#39;re depending on a database, you now have to manually create a `DataSource` bean.\r\n- If you&#39;re depending on Spring Data JPA&#39;s repositories, you now have to manually create an `EntityManagerFactory` bean and a `TransactionManager` (and you have to configure Spring Data JPA as well).\r\n- If you&#39;re running a web application, you no longer have access to Spring Boot&#39;s embedded servlet container. Now you either have to configure the embedded Tomcat by yourself, or configure your application for traditional WAR-file deployments.\r\n- If `printAllMessages()` relies on a logging framework, you now have to configure that one by yourself as well.\r\n\r\nIn addition, classes like `CommandLineRunner` are also no longer available. Now you have to rely on alternatives such as listening to the `ContextRefreshedEvent`.","title":"SpringApplication.run() without boot","body":"<p>If you're not using Spring Boot, then you have to set up the Spring container by yourself by creating an <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/ApplicationContext.html\" rel=\"nofollow noreferrer\"><code>ApplicationContext</code> bean</a>.</p>\n<p>One way of doing so is by using the <code>AnnotationConfigApplicationContext</code> class. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    ApplicationContext context = new ApplicationConfigApplicationContext(TestSpringApplication.class);\n    MessageService messageService = context.getBean(MessageService.class);\n    messageService.printAllMessages();\n}\n</code></pre>\n<p>But this only creates a basic application context for you. Without Spring Boot, you no longer have access to autoconfigurations. This means that:</p>\n<ul>\n<li>If you're depending on a database, you now have to manually create a <code>DataSource</code> bean.</li>\n<li>If you're depending on Spring Data JPA's repositories, you now have to manually create an <code>EntityManagerFactory</code> bean and a <code>TransactionManager</code> (and you have to configure Spring Data JPA as well).</li>\n<li>If you're running a web application, you no longer have access to Spring Boot's embedded servlet container. Now you either have to configure the embedded Tomcat by yourself, or configure your application for traditional WAR-file deployments.</li>\n<li>If <code>printAllMessages()</code> relies on a logging framework, you now have to configure that one by yourself as well.</li>\n</ul>\n<p>In addition, classes like <code>CommandLineRunner</code> are also no longer available. Now you have to rely on alternatives such as listening to the <code>ContextRefreshedEvent</code>.</p>\n"}],"owner":{"account_id":8565752,"reputation":615,"user_id":6418277,"accept_rate":81,"display_name":"Gaetan L."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77149755,"answer_count":1,"score":0,"last_activity_date":1695295209,"creation_date":1695291468,"question_id":77149323,"body_markdown":"I&#39;m a total beginner with Spring. I&#39;m currently trying to just run a very simple project just to start learning about Spring and understanding IoC and dependency injection. At first I created a simple Spring Boot project and it worked, but now I&#39;m trying to do it without boot because I want to understand better what&#39;s going on. I don&#39;t understand how to do this (full class below):\r\n\r\n`SpringApplication.run(TestSpringApplication.class, args);`\r\n\r\nI tried to do this:\r\n\r\n    TestSpringApplication app = new TestSpringApplication();\r\n    app.run(args);\r\n\r\nBut then inside the run() method, the @Autowired messageRepository is null. I&#39;m guessing this is because I created my TestSpringApplication using new instead of applicationContext.getBean()? But how can I access/get the applicationContext in my static main method?\r\n\r\nForgive me if it might sound trivial, I&#39;m starting from almost zero here and I have a very hard time finding easy tutorials.\r\n\r\nHere is what I&#39;m trying to do but is not working:\r\n\r\n    package com.cypherf;\r\n    import com.cypherf.model.Message;\r\n    import com.cypherf.repository.MessageRepository;\r\n    import com.cypherf.service.MessageService;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.ApplicationContext;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n\r\n    @Configuration\r\n    @ComponentScan\r\n    public class TestSpringApplication {\r\n        @Autowired\r\n        private ApplicationContext context;\r\n\r\n        @Autowired\r\n        private MessageRepository messageRepository;\r\n\r\n        @Autowired\r\n        private MessageService messageService;\r\n\r\n        public static void main(String[] args) {\r\n            TestSpringApplication app = new TestSpringApplication();\r\n            app.run(args);\r\n        }\r\n\r\n        public void run(String... args) {\r\n            messageRepository.save(new Message(&quot;Message one&quot;));\r\n            messageRepository.save(new Message(&quot;Message two&quot;));\r\n            messageRepository.save(new Message(&quot;Message two&quot;));\r\n\r\n            messageService.printAllMessages();\r\n        }\r\n    }\r\n\r\nHere is my previous class with Spring Boot which is working:\r\n\r\n    package com.cypherf;\r\n    import com.cypherf.model.Message;\r\n    import com.cypherf.repository.MessageRepository;\r\n    import com.cypherf.service.MessageService;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.CommandLineRunner;\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n    @SpringBootApplication\r\n    public class TestSpringApplication implements CommandLineRunner {\r\n\r\n        @Autowired\r\n        private MessageRepository messageRepository;\r\n\r\n        @Autowired\r\n        private MessageService messageService;\r\n\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(TestSpringApplication.class, args);\r\n        }\r\n\r\n        public void run(String... args) throws Exception {\r\n            messageRepository.save(new Message(&quot;Message one&quot;));\r\n            messageRepository.save(new Message(&quot;Message two&quot;));\r\n            messageRepository.save(new Message(&quot;Message two&quot;));\r\n\r\n            messageService.printAllMessages();\r\n        }\r\n    }","title":"SpringApplication.run() without boot","body":"<p>I'm a total beginner with Spring. I'm currently trying to just run a very simple project just to start learning about Spring and understanding IoC and dependency injection. At first I created a simple Spring Boot project and it worked, but now I'm trying to do it without boot because I want to understand better what's going on. I don't understand how to do this (full class below):</p>\n<p><code>SpringApplication.run(TestSpringApplication.class, args);</code></p>\n<p>I tried to do this:</p>\n<pre><code>TestSpringApplication app = new TestSpringApplication();\napp.run(args);\n</code></pre>\n<p>But then inside the run() method, the @Autowired messageRepository is null. I'm guessing this is because I created my TestSpringApplication using new instead of applicationContext.getBean()? But how can I access/get the applicationContext in my static main method?</p>\n<p>Forgive me if it might sound trivial, I'm starting from almost zero here and I have a very hard time finding easy tutorials.</p>\n<p>Here is what I'm trying to do but is not working:</p>\n<pre><code>package com.cypherf;\nimport com.cypherf.model.Message;\nimport com.cypherf.repository.MessageRepository;\nimport com.cypherf.service.MessageService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\n@ComponentScan\npublic class TestSpringApplication {\n    @Autowired\n    private ApplicationContext context;\n\n    @Autowired\n    private MessageRepository messageRepository;\n\n    @Autowired\n    private MessageService messageService;\n\n    public static void main(String[] args) {\n        TestSpringApplication app = new TestSpringApplication();\n        app.run(args);\n    }\n\n    public void run(String... args) {\n        messageRepository.save(new Message(&quot;Message one&quot;));\n        messageRepository.save(new Message(&quot;Message two&quot;));\n        messageRepository.save(new Message(&quot;Message two&quot;));\n\n        messageService.printAllMessages();\n    }\n}\n</code></pre>\n<p>Here is my previous class with Spring Boot which is working:</p>\n<pre><code>package com.cypherf;\nimport com.cypherf.model.Message;\nimport com.cypherf.repository.MessageRepository;\nimport com.cypherf.service.MessageService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class TestSpringApplication implements CommandLineRunner {\n\n    @Autowired\n    private MessageRepository messageRepository;\n\n    @Autowired\n    private MessageService messageService;\n\n    public static void main(String[] args) {\n        SpringApplication.run(TestSpringApplication.class, args);\n    }\n\n    public void run(String... args) throws Exception {\n        messageRepository.save(new Message(&quot;Message one&quot;));\n        messageRepository.save(new Message(&quot;Message two&quot;));\n        messageRepository.save(new Message(&quot;Message two&quot;));\n\n        messageService.printAllMessages();\n    }\n}\n</code></pre>\n"},{"tags":["java","json","serialization","jackson"],"comments":[{"owner":{"account_id":1952668,"reputation":7464,"user_id":1756430,"accept_rate":88,"display_name":"Sam Berry"},"score":1,"creation_date":1467385338,"post_id":12046786,"comment_id":63726809,"body_markdown":"I wrote a post about [How to Write a Custom Serializer with Jackson](https://spin.atomicobject.com/2016/07/01/custom-serializer-jackson/?utm_source=stack-overflow-ao&amp;utm_medium=referral&amp;utm_campaign=custom-serializer-jackson) that may be helpful to some.","body":"I wrote a post about <a href=\"https://spin.atomicobject.com/2016/07/01/custom-serializer-jackson/?utm_source=stack-overflow-ao&amp;utm_medium=referral&amp;utm_campaign=custom-serializer-jackson\" rel=\"nofollow noreferrer\">How to Write a Custom Serializer with Jackson</a> that may be helpful to some."}],"answers":[{"tags":[],"owner":{"account_id":47523,"reputation":89783,"user_id":140816,"accept_rate":90,"display_name":"Jo&#227;o Silva"},"comment_count":0,"down_vote_count":2,"up_vote_count":18,"is_accepted":false,"score":16,"last_activity_date":1345509179,"creation_date":1345508038,"answer_id":12046909,"question_id":12046786,"body_markdown":"Add a `@JsonProperty` annotated getter, which returns a `String`, for the `favoriteNumber` field:\r\n\r\n    public class Person {\r\n        public String name;\r\n        public int age;\r\n        private int favoriteNumber;\r\n        \r\n        public Person(String name, int age, int favoriteNumber) {\r\n        \tthis.name = name;\r\n        \tthis.age = age;\r\n        \tthis.favoriteNumber = favoriteNumber;\r\n        }\r\n        \r\n        @JsonProperty\r\n        public String getFavoriteNumber() {\r\n        \treturn String.valueOf(favoriteNumber);\r\n        }\r\n    \r\n    \tpublic static void main(String... args) throws Exception {\r\n        \tPerson p = new Person(&quot;Joe&quot;, 25, 123);\r\n        \tObjectMapper mapper = new ObjectMapper();\r\n        \tSystem.out.println(mapper.writeValueAsString(p)); \r\n            // {&quot;name&quot;:&quot;Joe&quot;,&quot;age&quot;:25,&quot;favoriteNumber&quot;:&quot;123&quot;}\r\n        }\r\n    }","title":"Jackson JSON custom serialization for certain fields","body":"<p>Add a <code>@JsonProperty</code> annotated getter, which returns a <code>String</code>, for the <code>favoriteNumber</code> field:</p>\n\n<pre><code>public class Person {\n    public String name;\n    public int age;\n    private int favoriteNumber;\n\n    public Person(String name, int age, int favoriteNumber) {\n        this.name = name;\n        this.age = age;\n        this.favoriteNumber = favoriteNumber;\n    }\n\n    @JsonProperty\n    public String getFavoriteNumber() {\n        return String.valueOf(favoriteNumber);\n    }\n\n    public static void main(String... args) throws Exception {\n        Person p = new Person(\"Joe\", 25, 123);\n        ObjectMapper mapper = new ObjectMapper();\n        System.out.println(mapper.writeValueAsString(p)); \n        // {\"name\":\"Joe\",\"age\":25,\"favoriteNumber\":\"123\"}\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2145392,"reputation":776,"user_id":1903113,"display_name":"werupokz"},"score":7,"creation_date":1360841209,"post_id":12046979,"comment_id":20852570,"body_markdown":"Jackson-databind (at least 2.1.3) already contains special ToStringSerializer, see my answer.","body":"Jackson-databind (at least 2.1.3) already contains special ToStringSerializer, see my answer."},{"owner":{"account_id":146433,"reputation":50504,"user_id":356895,"accept_rate":66,"display_name":"JJD"},"score":0,"creation_date":1415144793,"post_id":12046979,"comment_id":42079448,"body_markdown":"@KevinBowersox Can you help with my [deserializing problem](http://stackoverflow.com/questions/26725278/how-to-handle-localized-decimal-separator-with-jackson) please?","body":"@KevinBowersox Can you help with my <a href=\"http://stackoverflow.com/questions/26725278/how-to-handle-localized-decimal-separator-with-jackson\">deserializing problem</a> please?"},{"owner":{"account_id":372833,"reputation":86879,"user_id":722121,"accept_rate":100,"display_name":"Gareth Latty"},"score":9,"creation_date":1429108585,"post_id":12046979,"comment_id":47446101,"body_markdown":"note `as=String.class` is ignored due to the `using` parameter, and is not required here. [*Note: if using() is also used it has precedence (since it directly specified serializer, whereas this would only be used to locate the serializer) and value of this annotation property is ignored.*](http://jackson.codehaus.org/1.7.0/javadoc/org/codehaus/jackson/map/annotate/JsonSerialize.html#as())","body":"note <code>as=String.class</code> is ignored due to the <code>using</code> parameter, and is not required here. <a href=\"http://jackson.codehaus.org/1.7.0/javadoc/org/codehaus/jackson/map/annotate/JsonSerialize.html#as()\" rel=\"nofollow noreferrer\"><i>Note: if using() is also used it has precedence (since it directly specified serializer, whereas this would only be used to locate the serializer) and value of this annotation property is ignored.</i></a>"},{"owner":{"account_id":81519,"reputation":34798,"user_id":229792,"accept_rate":63,"display_name":"jameshfisher"},"score":0,"creation_date":1443698174,"post_id":12046979,"comment_id":53602090,"body_markdown":"Is there any less terrible way to do this? Like `Person implements ToJson`?","body":"Is there any less terrible way to do this? Like <code>Person implements ToJson</code>?"},{"owner":{"account_id":3527008,"reputation":1958,"user_id":2947812,"accept_rate":63,"display_name":"Mikhail Batcer"},"score":0,"creation_date":1455196940,"post_id":12046979,"comment_id":58388124,"body_markdown":"@KevinBowersox There is probably a typo in the first words of the answer: you meant &quot;serializer&quot;, not &quot;deserializer&quot; (though deserializer may also be of insterest).","body":"@KevinBowersox There is probably a typo in the first words of the answer: you meant &quot;serializer&quot;, not &quot;deserializer&quot; (though deserializer may also be of insterest)."},{"owner":{"account_id":5475341,"reputation":879,"user_id":4353482,"accept_rate":0,"display_name":"Bert"},"score":1,"creation_date":1508268089,"post_id":12046979,"comment_id":80542109,"body_markdown":"In my case, it even failed on the `as=String.class` part, due to the types I used. @kevin-bowersox, I suggest updating your comment, in line with what @GarethLatty said.","body":"In my case, it even failed on the <code>as=String.class</code> part, due to the types I used. @kevin-bowersox, I suggest updating your comment, in line with what @GarethLatty said."},{"owner":{"account_id":36295,"reputation":1716,"user_id":103412,"accept_rate":88,"display_name":"Torsten"},"score":0,"creation_date":1518622063,"post_id":12046979,"comment_id":84583370,"body_markdown":"@Bert I second that. I get a `Cannot read latest test results\ncom.fasterxml.jackson.databind.exc.InvalidDefinitionException: Invalid definition for property &quot;instant&quot; (of type `com.MyType`): Cannot refine serialization type [simple type, class java.time.Instant] into java.lang.String; types not related` message, when I don&#39;t remove the `as`-annotation.","body":"@Bert I second that. I get a <code>Cannot read latest test results com.fasterxml.jackson.databind.exc.InvalidDefinitionExceptio&zwnj;&#8203;n: Invalid definition for property &quot;instant&quot; (of type </code>com.MyType<code>): Cannot refine serialization type [simple type, class java.time.Instant] into java.lang.String; types not related</code> message, when I don&#39;t remove the <code>as</code>-annotation."},{"owner":{"account_id":2735749,"reputation":1211,"user_id":2358472,"accept_rate":21,"display_name":"Sammy Pawar"},"score":0,"creation_date":1548264392,"post_id":12046979,"comment_id":95482952,"body_markdown":"we were using custom serialization but now i can&#39;t use POJOs anymore as more clients will be accessing our rest service. how can i still custom serialize certain fields ? just posted this question https://stackoverflow.com/questions/54332390/custom-serialization-based-on-attribute-in-json","body":"we were using custom serialization but now i can&#39;t use POJOs anymore as more clients will be accessing our rest service. how can i still custom serialize certain fields ? just posted this question <a href=\"https://stackoverflow.com/questions/54332390/custom-serialization-based-on-attribute-in-json\" title=\"custom serialization based on attribute in json\">stackoverflow.com/questions/54332390/&hellip;</a>"},{"owner":{"account_id":3064794,"reputation":445,"user_id":2596742,"display_name":"kit"},"score":0,"creation_date":1591287015,"post_id":12046979,"comment_id":110005197,"body_markdown":"In Kotlin, it&#39;s impossible to write &quot;as = &quot; since &quot;as&quot; is a reserved keyword. At least not without any hacks I haven&#39;t bothered to look up yet :)","body":"In Kotlin, it&#39;s impossible to write &quot;as = &quot; since &quot;as&quot; is a reserved keyword. At least not without any hacks I haven&#39;t bothered to look up yet :)"},{"owner":{"account_id":12456171,"reputation":339,"user_id":9069309,"display_name":"Cebrail Yilmaz"},"score":1,"creation_date":1620053037,"post_id":12046979,"comment_id":119080811,"body_markdown":"In kotlin, you can use reserved keywords by surrounding them with backticks. @kit","body":"In kotlin, you can use reserved keywords by surrounding them with backticks. @kit"},{"owner":{"account_id":8736977,"reputation":1090,"user_id":6535270,"accept_rate":50,"display_name":"orpheus"},"score":0,"creation_date":1631038687,"post_id":12046979,"comment_id":122114527,"body_markdown":"This serializes for types and not fields. How do I serialize specific `fields`? Does this solution not also map `age` to a string or does it maintain it as an `int`?","body":"This serializes for types and not fields. How do I serialize specific <code>fields</code>? Does this solution not also map <code>age</code> to a string or does it maintain it as an <code>int</code>?"}],"tags":[],"owner":{"account_id":368269,"reputation":93629,"user_id":714969,"accept_rate":86,"display_name":"Kevin Bowersox"},"comment_count":11,"down_vote_count":2,"up_vote_count":139,"is_accepted":true,"score":137,"last_activity_date":1455670772,"creation_date":1345508717,"answer_id":12046979,"question_id":12046786,"body_markdown":"You can implement a custom serializer as follows: \r\n\r\n\r\n    public class Person {\r\n        public String name;\r\n        public int age;\r\n        @JsonSerialize(using = IntToStringSerializer.class, as=String.class)\r\n        public int favoriteNumber:\r\n    }\r\n    \r\n     \r\n    public class IntToStringSerializer extends JsonSerializer&lt;Integer&gt; {\r\n      \r\n        @Override\r\n        public void serialize(Integer tmpInt, \r\n                              JsonGenerator jsonGenerator, \r\n                              SerializerProvider serializerProvider) \r\n                              throws IOException, JsonProcessingException {\r\n            jsonGenerator.writeObject(tmpInt.toString());\r\n        }\r\n    }\r\n\r\nJava should handle the autoboxing from `int` to `Integer` for you.","title":"Jackson JSON custom serialization for certain fields","body":"<p>You can implement a custom serializer as follows: </p>\n\n<pre><code>public class Person {\n    public String name;\n    public int age;\n    @JsonSerialize(using = IntToStringSerializer.class, as=String.class)\n    public int favoriteNumber:\n}\n\n\npublic class IntToStringSerializer extends JsonSerializer&lt;Integer&gt; {\n\n    @Override\n    public void serialize(Integer tmpInt, \n                          JsonGenerator jsonGenerator, \n                          SerializerProvider serializerProvider) \n                          throws IOException, JsonProcessingException {\n        jsonGenerator.writeObject(tmpInt.toString());\n    }\n}\n</code></pre>\n\n<p>Java should handle the autoboxing from <code>int</code> to <code>Integer</code> for you.</p>\n"},{"comments":[{"owner":{"account_id":246528,"reputation":1736,"user_id":520732,"accept_rate":75,"display_name":"jEremyB"},"score":3,"creation_date":1442516425,"post_id":14873731,"comment_id":53124586,"body_markdown":"What about the reverse where a String needs to be converted to an int? I don&#39;t see ToIntSerializer.class.","body":"What about the reverse where a String needs to be converted to an int? I don&#39;t see ToIntSerializer.class."},{"owner":{"account_id":9399,"reputation":17347,"user_id":17339,"accept_rate":87,"display_name":"Drew Stephens"},"score":1,"creation_date":1491914404,"post_id":14873731,"comment_id":73755420,"body_markdown":"@jEremyB You might have to write a [custom deserializer](http://stackoverflow.com/a/20638114/17339)","body":"@jEremyB You might have to write a <a href=\"http://stackoverflow.com/a/20638114/17339\">custom deserializer</a>"},{"owner":{"account_id":2584392,"reputation":975,"user_id":2240423,"accept_rate":20,"display_name":"Arnie Schwarzvogel"},"score":0,"creation_date":1526741695,"post_id":14873731,"comment_id":87867687,"body_markdown":"ToStringSerializer works but FloatSerializer brings this message: Could not write content: java.lang.Integer cannot be cast to java.lang.Float","body":"ToStringSerializer works but FloatSerializer brings this message: Could not write content: java.lang.Integer cannot be cast to java.lang.Float"}],"tags":[],"owner":{"account_id":2145392,"reputation":776,"user_id":1903113,"display_name":"werupokz"},"comment_count":3,"down_vote_count":0,"up_vote_count":71,"is_accepted":false,"score":71,"last_activity_date":1360841096,"creation_date":1360841096,"answer_id":14873731,"question_id":12046786,"body_markdown":"Jackson-databind (at least 2.1.3) provides special `ToStringSerializer` (`com.fasterxml.jackson.databind.ser.std.ToStringSerializer`)\r\n\r\nExample:\r\n\r\n    public class Person {\r\n        public String name;\r\n        public int age;\r\n        @JsonSerialize(using = ToStringSerializer.class)\r\n        public int favoriteNumber:\r\n    }","title":"Jackson JSON custom serialization for certain fields","body":"<p>Jackson-databind (at least 2.1.3) provides special <code>ToStringSerializer</code> (<code>com.fasterxml.jackson.databind.ser.std.ToStringSerializer</code>)</p>\n\n<p>Example:</p>\n\n<pre><code>public class Person {\n    public String name;\n    public int age;\n    @JsonSerialize(using = ToStringSerializer.class)\n    public int favoriteNumber:\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4236253,"reputation":41,"user_id":3820510,"display_name":"Chetan Pardeshi"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1468304704,"creation_date":1468304704,"answer_id":38321400,"question_id":12046786,"body_markdown":"with the help of **@JsonView** we can decide fields of model classes to serialize which satisfy the minimal criteria ( we have to define the criteria) like we can have one core class with 10 properties but only 5 properties can be serialize which are needful for client only\r\n\r\nDefine our Views by simply creating following class:\r\n\r\n    public class Views\r\n    {\r\n    \tstatic class Android{};\r\n    \tstatic class IOS{};\r\n    \tstatic class Web{};\r\n    }\r\n\r\nAnnotated model class with views:\r\n\r\n    public class Demo \r\n    {\r\n    \tpublic Demo() \r\n    \t{\r\n    \t}\r\n\t\r\n    @JsonView(Views.IOS.class)\r\n    private String iosField;\r\n    \r\n    @JsonView(Views.Android.class)\r\n    private String androidField;\r\n    \r\n    @JsonView(Views.Web.class)\r\n    private String webField;\r\n\r\n     // getters/setters\r\n    ...\r\n    ..\r\n    }\r\n\r\nNow we have to write custom json converter by simply extending HttpMessageConverter class from spring as:\r\n\r\n        public class CustomJacksonConverter implements HttpMessageConverter&lt;Object&gt; \r\n        {\r\n        public CustomJacksonConverter() \r\n        \t{\r\n        \t\tsuper();\r\n    \t\t//this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView(Views.ClientView.class));\r\n    \t\tthis.delegate.getObjectMapper().configure(MapperFeature.DEFAULT_VIEW_INCLUSION, true);\r\n    \t\tthis.delegate.getObjectMapper().setSerializationInclusion(Include.NON_NULL);\r\n    \r\n    \t}\r\n    \t\r\n    \t// a real message converter that will respond to methods and do the actual work\r\n    \tprivate MappingJackson2HttpMessageConverter delegate = new MappingJackson2HttpMessageConverter();\r\n    \r\n    \t@Override\r\n    \tpublic boolean canRead(Class&lt;?&gt; clazz, MediaType mediaType) {\r\n    \t\treturn delegate.canRead(clazz, mediaType);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean canWrite(Class&lt;?&gt; clazz, MediaType mediaType) {\r\n    \t\treturn delegate.canWrite(clazz, mediaType);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic List&lt;MediaType&gt; getSupportedMediaTypes() {\r\n    \t\treturn delegate.getSupportedMediaTypes();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Object read(Class&lt;? extends Object&gt; clazz,\r\n    \t\t\tHttpInputMessage inputMessage) throws IOException,\r\n    \t\t\tHttpMessageNotReadableException {\r\n    \t\treturn delegate.read(clazz, inputMessage);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void write(Object obj, MediaType contentType, HttpOutputMessage outputMessage) throws IOException, HttpMessageNotWritableException \r\n    \t{\r\n    \t\tsynchronized(this) \r\n    \t\t{\r\n    \t\t\tString userAgent = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest().getHeader(&quot;userAgent&quot;);\r\n    \t\t\tif ( userAgent != null ) \r\n    \t\t\t{\r\n    \t\t\t\tswitch (userAgent) \r\n    \t\t\t\t{\r\n    \t\t\t\tcase &quot;IOS&quot; :\r\n    \t\t\t\t\tthis.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView(Views.IOS.class));\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\tcase &quot;Android&quot; :\r\n    \t\t\t\t\tthis.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView(Views.Android.class));\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\tcase &quot;Web&quot; :\r\n    \t\t\t\t\tthis.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView( Views.Web.class));\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\tdefault:\r\n    \t\t\t\t\tthis.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView( null ));\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\telse\r\n    \t\t\t{\r\n    \t\t\t\t// reset to default view\r\n    \t\t\t\tthis.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView( null ));\r\n    \t\t\t}\r\n    \t\t\tdelegate.write(obj, contentType, outputMessage);\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\nNow there is need to tell spring to use this custom json convert by simply putting this in dispatcher-servlet.xml\r\n\r\n    &lt;mvc:annotation-driven&gt;\r\n    \t\t&lt;mvc:message-converters register-defaults=&quot;true&quot;&gt;\r\n    \t\t\t&lt;bean id=&quot;jsonConverter&quot; class=&quot;com.mactores.org.CustomJacksonConverter&quot; &gt;\r\n    \t\t\t&lt;/bean&gt;\r\n    \t\t&lt;/mvc:message-converters&gt;\r\n    \t&lt;/mvc:annotation-driven&gt;\r\n\r\nThat&#39;s how you will able to decide which fields to get serialize.\r\n","title":"Jackson JSON custom serialization for certain fields","body":"<p>with the help of <strong>@JsonView</strong> we can decide fields of model classes to serialize which satisfy the minimal criteria ( we have to define the criteria) like we can have one core class with 10 properties but only 5 properties can be serialize which are needful for client only</p>\n\n<p>Define our Views by simply creating following class:</p>\n\n<pre><code>public class Views\n{\n    static class Android{};\n    static class IOS{};\n    static class Web{};\n}\n</code></pre>\n\n<p>Annotated model class with views:</p>\n\n<pre><code>public class Demo \n{\n    public Demo() \n    {\n    }\n\n@JsonView(Views.IOS.class)\nprivate String iosField;\n\n@JsonView(Views.Android.class)\nprivate String androidField;\n\n@JsonView(Views.Web.class)\nprivate String webField;\n\n // getters/setters\n...\n..\n}\n</code></pre>\n\n<p>Now we have to write custom json converter by simply extending HttpMessageConverter class from spring as:</p>\n\n<pre><code>    public class CustomJacksonConverter implements HttpMessageConverter&lt;Object&gt; \n    {\n    public CustomJacksonConverter() \n        {\n            super();\n        //this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView(Views.ClientView.class));\n        this.delegate.getObjectMapper().configure(MapperFeature.DEFAULT_VIEW_INCLUSION, true);\n        this.delegate.getObjectMapper().setSerializationInclusion(Include.NON_NULL);\n\n    }\n\n    // a real message converter that will respond to methods and do the actual work\n    private MappingJackson2HttpMessageConverter delegate = new MappingJackson2HttpMessageConverter();\n\n    @Override\n    public boolean canRead(Class&lt;?&gt; clazz, MediaType mediaType) {\n        return delegate.canRead(clazz, mediaType);\n    }\n\n    @Override\n    public boolean canWrite(Class&lt;?&gt; clazz, MediaType mediaType) {\n        return delegate.canWrite(clazz, mediaType);\n    }\n\n    @Override\n    public List&lt;MediaType&gt; getSupportedMediaTypes() {\n        return delegate.getSupportedMediaTypes();\n    }\n\n    @Override\n    public Object read(Class&lt;? extends Object&gt; clazz,\n            HttpInputMessage inputMessage) throws IOException,\n            HttpMessageNotReadableException {\n        return delegate.read(clazz, inputMessage);\n    }\n\n    @Override\n    public void write(Object obj, MediaType contentType, HttpOutputMessage outputMessage) throws IOException, HttpMessageNotWritableException \n    {\n        synchronized(this) \n        {\n            String userAgent = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest().getHeader(\"userAgent\");\n            if ( userAgent != null ) \n            {\n                switch (userAgent) \n                {\n                case \"IOS\" :\n                    this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView(Views.IOS.class));\n                    break;\n                case \"Android\" :\n                    this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView(Views.Android.class));\n                    break;\n                case \"Web\" :\n                    this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView( Views.Web.class));\n                    break;\n                default:\n                    this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView( null ));\n                    break;\n                }\n            }\n            else\n            {\n                // reset to default view\n                this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView( null ));\n            }\n            delegate.write(obj, contentType, outputMessage);\n        }\n    }\n\n}\n</code></pre>\n\n<p>Now there is need to tell spring to use this custom json convert by simply putting this in dispatcher-servlet.xml</p>\n\n<pre><code>&lt;mvc:annotation-driven&gt;\n        &lt;mvc:message-converters register-defaults=\"true\"&gt;\n            &lt;bean id=\"jsonConverter\" class=\"com.mactores.org.CustomJacksonConverter\" &gt;\n            &lt;/bean&gt;\n        &lt;/mvc:message-converters&gt;\n    &lt;/mvc:annotation-driven&gt;\n</code></pre>\n\n<p>That's how you will able to decide which fields to get serialize.</p>\n"},{"tags":[],"owner":{"account_id":259073,"reputation":8102,"user_id":541688,"display_name":"Oleg Estekhin"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1502948710,"creation_date":1502805076,"answer_id":45694302,"question_id":12046786,"body_markdown":"jackson-annotations provides `@JsonFormat` which can handle a lot of customizations without the need to write the custom serializer. \r\n\r\nFor example, requesting a `STRING` shape for a field with numeric type will output the numeric value as string\r\n\r\n    public class Person {\r\n        public String name;\r\n        public int age;\r\n        @JsonFormat(shape = JsonFormat.Shape.STRING)\r\n        public int favoriteNumber;\r\n    }\r\n\r\nwill result in the desired output\r\n\r\n    {&quot;name&quot;:&quot;Joe&quot;,&quot;age&quot;:25,&quot;favoriteNumber&quot;:&quot;123&quot;}","title":"Jackson JSON custom serialization for certain fields","body":"<p>jackson-annotations provides <code>@JsonFormat</code> which can handle a lot of customizations without the need to write the custom serializer. </p>\n\n<p>For example, requesting a <code>STRING</code> shape for a field with numeric type will output the numeric value as string</p>\n\n<pre><code>public class Person {\n    public String name;\n    public int age;\n    @JsonFormat(shape = JsonFormat.Shape.STRING)\n    public int favoriteNumber;\n}\n</code></pre>\n\n<p>will result in the desired output</p>\n\n<pre><code>{\"name\":\"Joe\",\"age\":25,\"favoriteNumber\":\"123\"}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1724767,"reputation":6919,"user_id":1579718,"accept_rate":75,"display_name":"Igor G."},"comment_count":0,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1554456889,"creation_date":1554456889,"answer_id":55532363,"question_id":12046786,"body_markdown":"In case you don&#39;t want to pollute your model with annotations and want to perform some custom operations, you could use mixins.\r\n\r\n```\r\nObjectMapper mapper = new ObjectMapper();\r\nSimpleModule simpleModule = new SimpleModule();\r\nsimpleModule.setMixInAnnotation(Person.class, PersonMixin.class);\r\nmapper.registerModule(simpleModule);\r\n```\r\nOverride age:\r\n```\r\npublic abstract class PersonMixin {\r\n    @JsonSerialize(using = PersonAgeSerializer.class)\r\n    public String age;\r\n}\r\n```\r\nDo whatever you need with the age:\r\n```\r\npublic class PersonAgeSerializer extends JsonSerializer&lt;Integer&gt; {\r\n    @Override\r\n    public void serialize(Integer integer, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException {\r\n        jsonGenerator.writeString(String.valueOf(integer * 52) + &quot; months&quot;);\r\n    }\r\n}\r\n```","title":"Jackson JSON custom serialization for certain fields","body":"<p>In case you don't want to pollute your model with annotations and want to perform some custom operations, you could use mixins.</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nSimpleModule simpleModule = new SimpleModule();\nsimpleModule.setMixInAnnotation(Person.class, PersonMixin.class);\nmapper.registerModule(simpleModule);\n</code></pre>\n\n<p>Override age:</p>\n\n<pre><code>public abstract class PersonMixin {\n    @JsonSerialize(using = PersonAgeSerializer.class)\n    public String age;\n}\n</code></pre>\n\n<p>Do whatever you need with the age:</p>\n\n<pre><code>public class PersonAgeSerializer extends JsonSerializer&lt;Integer&gt; {\n    @Override\n    public void serialize(Integer integer, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException {\n        jsonGenerator.writeString(String.valueOf(integer * 52) + \" months\");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3237003,"reputation":1250,"user_id":2730950,"display_name":"Vladimir"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1608232275,"creation_date":1608230824,"answer_id":65346619,"question_id":12046786,"body_markdown":"You can create a custom serializer inline in the mixin. Then annotate a field with it. See example below that appends &quot; *- something else* &quot; to lang field. This is kind of ***hackish*** - if your serializer requires something like a repository or anything injected by spring, this is going to be a problem. Probably best to use a custom deserializer/serializer instead of a mixin.\r\n\r\n    package com.test;\r\n    \r\n    import com.fasterxml.jackson.annotation.JsonAutoDetect;\r\n    import com.fasterxml.jackson.annotation.JsonAutoDetect.Visibility;\r\n    import com.fasterxml.jackson.annotation.JsonProperty;\r\n    import com.fasterxml.jackson.annotation.JsonPropertyOrder;\r\n    import com.fasterxml.jackson.core.JsonGenerator;\r\n    import com.fasterxml.jackson.core.JsonProcessingException;\r\n    import com.fasterxml.jackson.databind.JsonSerializer;\r\n    import com.fasterxml.jackson.databind.SerializerProvider;\r\n    import com.fasterxml.jackson.databind.annotation.JsonSerialize;\r\n    import com.test.Argument;\r\n    import java.io.IOException;\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    //Serialize only fields explicitly mentioned by this mixin.\r\n    @JsonAutoDetect(\r\n        fieldVisibility = Visibility.NONE,\r\n        setterVisibility = Visibility.NONE,\r\n        getterVisibility = Visibility.NONE,\r\n        isGetterVisibility = Visibility.NONE,\r\n        creatorVisibility = Visibility.NONE\r\n    )\r\n    @JsonPropertyOrder({&quot;lang&quot;, &quot;name&quot;, &quot;value&quot;})\r\n    public abstract class V2ArgumentMixin {\r\n    \r\n      @JsonProperty(&quot;name&quot;)\r\n      private String name;\r\n    \r\n      @JsonSerialize(using = LangCustomSerializer.class, as=String.class)\r\n      @JsonProperty(&quot;lang&quot;)\r\n      private String lang;\r\n    \r\n      @JsonProperty(&quot;value&quot;)\r\n      private Object value;\r\n    \r\n    \r\n      \r\n      public static class LangCustomSerializer extends JsonSerializer&lt;String&gt; {\r\n    \r\n        @Override\r\n        public void serialize(String value,\r\n                              JsonGenerator jsonGenerator,\r\n                              SerializerProvider serializerProvider)\r\n            throws IOException, JsonProcessingException {\r\n          jsonGenerator.writeObject(value.toString() + &quot;  - something else&quot;);\r\n        }\r\n      }\r\n    }","title":"Jackson JSON custom serialization for certain fields","body":"<p>You can create a custom serializer inline in the mixin. Then annotate a field with it. See example below that appends &quot; <em>- something else</em> &quot; to lang field. This is kind of <em><strong>hackish</strong></em> - if your serializer requires something like a repository or anything injected by spring, this is going to be a problem. Probably best to use a custom deserializer/serializer instead of a mixin.</p>\n<pre><code>package com.test;\n\nimport com.fasterxml.jackson.annotation.JsonAutoDetect;\nimport com.fasterxml.jackson.annotation.JsonAutoDetect.Visibility;\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport com.fasterxml.jackson.annotation.JsonPropertyOrder;\nimport com.fasterxml.jackson.core.JsonGenerator;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.JsonSerializer;\nimport com.fasterxml.jackson.databind.SerializerProvider;\nimport com.fasterxml.jackson.databind.annotation.JsonSerialize;\nimport com.test.Argument;\nimport java.io.IOException;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n//Serialize only fields explicitly mentioned by this mixin.\n@JsonAutoDetect(\n    fieldVisibility = Visibility.NONE,\n    setterVisibility = Visibility.NONE,\n    getterVisibility = Visibility.NONE,\n    isGetterVisibility = Visibility.NONE,\n    creatorVisibility = Visibility.NONE\n)\n@JsonPropertyOrder({&quot;lang&quot;, &quot;name&quot;, &quot;value&quot;})\npublic abstract class V2ArgumentMixin {\n\n  @JsonProperty(&quot;name&quot;)\n  private String name;\n\n  @JsonSerialize(using = LangCustomSerializer.class, as=String.class)\n  @JsonProperty(&quot;lang&quot;)\n  private String lang;\n\n  @JsonProperty(&quot;value&quot;)\n  private Object value;\n\n\n  \n  public static class LangCustomSerializer extends JsonSerializer&lt;String&gt; {\n\n    @Override\n    public void serialize(String value,\n                          JsonGenerator jsonGenerator,\n                          SerializerProvider serializerProvider)\n        throws IOException, JsonProcessingException {\n      jsonGenerator.writeObject(value.toString() + &quot;  - something else&quot;);\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":218186,"reputation":783,"user_id":474377,"display_name":"Vijay Vepakomma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695295114,"creation_date":1695295114,"answer_id":77149741,"question_id":12046786,"body_markdown":"I ended up combining the two answers (and using the implementation provided by ToStringSerializer)\r\n\r\n- https://stackoverflow.com/a/12046979/474377\r\n- https://stackoverflow.com/a/14873731/474377\r\n\r\nPOJO:\r\n\r\n    public class MyPojo{\r\n      LocalDate date;\r\n    \r\n      @JsonSerialize(using = CurrencySerializer.class)\r\n      double amount;\r\n    }\r\n\r\nSerializer:\r\n\r\n    import com.fasterxml.jackson.databind.annotation.JacksonStdImpl;\r\n    import com.fasterxml.jackson.databind.ser.std.ToStringSerializerBase;\r\n    \r\n    @JacksonStdImpl\r\n    public class CurrencySerializer extends ToStringSerializerBase\r\n    {\r\n      public final static CurrencySerializer instance = new CurrencySerializer();\r\n    \r\n      public CurrencySerializer() { super(Object.class); }\r\n    \r\n    \r\n      public CurrencySerializer(Class&lt;?&gt; handledType) {\r\n        super(handledType);\r\n      }\r\n    \r\n      @Override\r\n      public final String valueToString(Object value) {\r\n        return &quot;$ &quot; + value.toString();\r\n      }\r\n    }\r\n\r\n\r\n\r\n","title":"Jackson JSON custom serialization for certain fields","body":"<p>I ended up combining the two answers (and using the implementation provided by ToStringSerializer)</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/12046979/474377\">https://stackoverflow.com/a/12046979/474377</a></li>\n<li><a href=\"https://stackoverflow.com/a/14873731/474377\">https://stackoverflow.com/a/14873731/474377</a></li>\n</ul>\n<p>POJO:</p>\n<pre><code>public class MyPojo{\n  LocalDate date;\n\n  @JsonSerialize(using = CurrencySerializer.class)\n  double amount;\n}\n</code></pre>\n<p>Serializer:</p>\n<pre><code>import com.fasterxml.jackson.databind.annotation.JacksonStdImpl;\nimport com.fasterxml.jackson.databind.ser.std.ToStringSerializerBase;\n\n@JacksonStdImpl\npublic class CurrencySerializer extends ToStringSerializerBase\n{\n  public final static CurrencySerializer instance = new CurrencySerializer();\n\n  public CurrencySerializer() { super(Object.class); }\n\n\n  public CurrencySerializer(Class&lt;?&gt; handledType) {\n    super(handledType);\n  }\n\n  @Override\n  public final String valueToString(Object value) {\n    return &quot;$ &quot; + value.toString();\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":12404,"reputation":62016,"user_id":24396,"accept_rate":74,"display_name":"Steve Kuo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162733,"favorite_count":0,"down_vote_count":0,"up_vote_count":122,"accepted_answer_id":12046979,"answer_count":8,"score":122,"last_activity_date":1695295114,"creation_date":1345506878,"question_id":12046786,"body_markdown":"Is there a way using Jackson JSON Processor to do custom field level serialization? For example, I&#39;d like to have the class\r\n\r\n    public class Person {\r\n        public String name;\r\n        public int age;\r\n        public int favoriteNumber;\r\n    }\r\n\r\nserialized to the follow JSON:\r\n\r\n    { &quot;name&quot;: &quot;Joe&quot;, &quot;age&quot;: 25, &quot;favoriteNumber&quot;: &quot;123&quot; }\r\n\r\nNote that age=25 is encoded as a **number** while favoriteNumber=123 is encoded as a **string**. Out of the box Jackson marshalls `int` to a number. In this case I want favoriteNumber to be encoded as a string.\r\n","title":"Jackson JSON custom serialization for certain fields","body":"<p>Is there a way using Jackson JSON Processor to do custom field level serialization? For example, I'd like to have the class</p>\n\n<pre><code>public class Person {\n    public String name;\n    public int age;\n    public int favoriteNumber;\n}\n</code></pre>\n\n<p>serialized to the follow JSON:</p>\n\n<pre><code>{ \"name\": \"Joe\", \"age\": 25, \"favoriteNumber\": \"123\" }\n</code></pre>\n\n<p>Note that age=25 is encoded as a <strong>number</strong> while favoriteNumber=123 is encoded as a <strong>string</strong>. Out of the box Jackson marshalls <code>int</code> to a number. In this case I want favoriteNumber to be encoded as a string.</p>\n"},{"tags":["java","azure"],"comments":[{"owner":{"account_id":1826174,"reputation":55261,"user_id":1658906,"accept_rate":100,"display_name":"juunas"},"score":2,"creation_date":1695288152,"post_id":77148810,"comment_id":136005446,"body_markdown":"Have you assigned Azure RBAC roles to that application? It would need for example Storage Blob Data Reader role.","body":"Have you assigned Azure RBAC roles to that application? It would need for example Storage Blob Data Reader role."},{"owner":{"account_id":1826174,"reputation":55261,"user_id":1658906,"accept_rate":100,"display_name":"juunas"},"score":2,"creation_date":1695292210,"post_id":77148810,"comment_id":136006357,"body_markdown":"You can do that through Portal or through Bicep/ARM/Terraform templates or command line.","body":"You can do that through Portal or through Bicep/ARM/Terraform templates or command line."},{"owner":{"account_id":25323437,"reputation":5162,"user_id":19144428,"display_name":"Venkatesan"},"score":0,"creation_date":1695292711,"post_id":77148810,"comment_id":136006443,"body_markdown":"Hi, @Im Go to azure portal -&gt; subscription -&gt; Access control(IAM)  -&gt; Add -&gt; Add Role assignments -&gt; select the azure storage blob reader role -&gt; select members (Your Application) -&gt; click review + assign.","body":"Hi, @Im Go to azure portal -&gt; subscription -&gt; Access control(IAM)  -&gt; Add -&gt; Add Role assignments -&gt; select the azure storage blob reader role -&gt; select members (Your Application) -&gt; click review + assign."},{"owner":{"account_id":110000,"reputation":4107,"user_id":291253,"accept_rate":37,"display_name":"lm."},"score":0,"creation_date":1695293648,"post_id":77148810,"comment_id":136006597,"body_markdown":"Added screenshot for roles defined , Is \n&quot;Storage Blob Data Reader&quot;  different from azure &quot;storage blob reader role&quot; ?","body":"Added screenshot for roles defined , Is  &quot;Storage Blob Data Reader&quot;  different from azure &quot;storage blob reader role&quot; ?"},{"owner":{"account_id":25323437,"reputation":5162,"user_id":19144428,"display_name":"Venkatesan"},"score":0,"creation_date":1695294538,"post_id":77148810,"comment_id":136006757,"body_markdown":"Yes, it is different for blob storage level you need to assign  `Storage Blob Data Reader` role.","body":"Yes, it is different for blob storage level you need to assign  <code>Storage Blob Data Reader</code> role."},{"owner":{"account_id":25323437,"reputation":5162,"user_id":19144428,"display_name":"Venkatesan"},"score":1,"creation_date":1695295146,"post_id":77148810,"comment_id":136006856,"body_markdown":"Hi @Im. You need to assign the role for Azure AD application like https://i.imgur.com/jXCvo1u.png not for the user because you are authenticating by clientsecretcredential.","body":"Hi @Im. You need to assign the role for Azure AD application like <a href=\"https://i.imgur.com/jXCvo1u.png\" rel=\"nofollow noreferrer\">i.imgur.com/jXCvo1u.png</a> not for the user because you are authenticating by clientsecretcredential."}],"answers":[{"tags":[],"owner":{"account_id":25323437,"reputation":5162,"user_id":19144428,"display_name":"Venkatesan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695292824,"creation_date":1695292063,"answer_id":77149410,"question_id":77148810,"body_markdown":"Initially, I tried in my environment and got the same error.\r\n\r\n![enter image description here](https://i.imgur.com/znEtr3F.png)\r\n\r\n&gt; The question : Is there something missing / wrong in code or it is ONLY permission issue ?\r\n\r\nI agree with Junna&#39;s comment After assigning **`Storage blob data reader`** role to my application. I can able to download the file.\r\n\r\n**Portal:**\r\n![enter image description here](https://i.imgur.com/sYz9ymL.png)\r\n\r\n\r\n**Code:**\r\n\r\n    import com.azure.core.credential.TokenCredential;\r\n    import com.azure.identity.ClientSecretCredentialBuilder;\r\n    import com.azure.storage.blob.BlobClient;\r\n    import com.azure.storage.blob.BlobContainerClient;\r\n    import com.azure.storage.blob.BlobContainerClientBuilder;\r\n    \r\n    import java.util.Locale;\r\n    \r\n    public class App {\r\n        public static void main(String[] args) {\r\n            // Set the values for your Azure Blob Storage account\r\n            String accountName = &quot;venkat123&quot;;\r\n            String containerName = &quot;test1&quot;;\r\n            String blobName = &quot;file2.txt&quot;;\r\n            String tenantId = &quot;xxxx&quot;;\r\n            String clientId = &quot;xxxxx&quot;;\r\n            String clientSecret = &quot;xxxxx&quot;;\r\n    \r\n            // Create a token credential using the client secret\r\n            TokenCredential credential = new ClientSecretCredentialBuilder()\r\n                    .tenantId(tenantId)\r\n                    .clientId(clientId)\r\n                    .clientSecret(clientSecret)\r\n                    .build();\r\n    \r\n            // Create a BlobContainerClient using the token credential\r\n            String endpoint = String.format(Locale.ROOT, &quot;https://%s.blob.core.windows.net&quot;, accountName);\r\n            BlobContainerClient containerClient = new BlobContainerClientBuilder()\r\n                    .endpoint(endpoint)\r\n                    .credential(credential)\r\n                    .containerName(containerName)\r\n                    .buildClient();\r\n    \r\n            // Download the blob to a file\r\n            String destinationPath = &quot;C:\\\\Users\\\\xxx\\\\xxx\\\\Documents\\\\xx\\\\sample.txt&quot;;\r\n                BlobClient blobClient = containerClient.getBlobClient(blobName);\r\n                blobClient.downloadToFile(destinationPath, true);\r\n                System.out.println(&quot;Download OK&quot;);\r\n        }\r\n    }\r\n\r\n**Output:** \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n**File:** \r\n\r\n![enter image description here](https://i.imgur.com/9r1abIb.png)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BpuG4.png","title":"Issue with download from Azure with ClientID , TennantID and ClientSecret","body":"<p>Initially, I tried in my environment and got the same error.</p>\n<p><img src=\"https://i.imgur.com/znEtr3F.png\" alt=\"enter image description here\" /></p>\n<blockquote>\n<p>The question : Is there something missing / wrong in code or it is ONLY permission issue ?</p>\n</blockquote>\n<p>I agree with Junna's comment After assigning <strong><code>Storage blob data reader</code></strong> role to my application. I can able to download the file.</p>\n<p><strong>Portal:</strong>\n<img src=\"https://i.imgur.com/sYz9ymL.png\" alt=\"enter image description here\" /></p>\n<p><strong>Code:</strong></p>\n<pre><code>import com.azure.core.credential.TokenCredential;\nimport com.azure.identity.ClientSecretCredentialBuilder;\nimport com.azure.storage.blob.BlobClient;\nimport com.azure.storage.blob.BlobContainerClient;\nimport com.azure.storage.blob.BlobContainerClientBuilder;\n\nimport java.util.Locale;\n\npublic class App {\n    public static void main(String[] args) {\n        // Set the values for your Azure Blob Storage account\n        String accountName = &quot;venkat123&quot;;\n        String containerName = &quot;test1&quot;;\n        String blobName = &quot;file2.txt&quot;;\n        String tenantId = &quot;xxxx&quot;;\n        String clientId = &quot;xxxxx&quot;;\n        String clientSecret = &quot;xxxxx&quot;;\n\n        // Create a token credential using the client secret\n        TokenCredential credential = new ClientSecretCredentialBuilder()\n                .tenantId(tenantId)\n                .clientId(clientId)\n                .clientSecret(clientSecret)\n                .build();\n\n        // Create a BlobContainerClient using the token credential\n        String endpoint = String.format(Locale.ROOT, &quot;https://%s.blob.core.windows.net&quot;, accountName);\n        BlobContainerClient containerClient = new BlobContainerClientBuilder()\n                .endpoint(endpoint)\n                .credential(credential)\n                .containerName(containerName)\n                .buildClient();\n\n        // Download the blob to a file\n        String destinationPath = &quot;C:\\\\Users\\\\xxx\\\\xxx\\\\Documents\\\\xx\\\\sample.txt&quot;;\n            BlobClient blobClient = containerClient.getBlobClient(blobName);\n            blobClient.downloadToFile(destinationPath, true);\n            System.out.println(&quot;Download OK&quot;);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/BpuG4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BpuG4.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>File:</strong></p>\n<p><img src=\"https://i.imgur.com/9r1abIb.png\" alt=\"enter image description here\" /></p>\n"}],"owner":{"account_id":110000,"reputation":4107,"user_id":291253,"accept_rate":37,"display_name":"lm."},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695294803,"creation_date":1695287645,"question_id":77148810,"body_markdown":"I am trying to download blob from Azure storage from java code m by using  ClientID , TennantID and ClientSecret\r\n\r\nHere is code for obtaining client : \r\n\r\n    private BlobContainerClient getContainerClient_SP(String containerName) {\r\n        ClientSecretCredential clientSecretCredential = new ClientSecretCredentialBuilder()\r\n                .tenantId(tenantId)\r\n                .clientId(clientId)\r\n                .clientSecret(clientSecret)\r\n                .build();\r\n    \r\n        String endpoint = String.format(Locale.ROOT, &quot;https://%s.blob.core.windows.net/%s&quot;, accountName, containerName);\r\n        BlobContainerClient containerClient = new BlobContainerClientBuilder()\r\n                .endpoint(endpoint)\r\n                .credential(clientSecretCredential)\r\n                .buildClient();\r\n    \r\n        return containerClient;\r\n    \r\n    }\r\n\r\nHere is code snippet for download :\r\n\r\n    try {\r\n    \tBlobContainerClient containerClient = getContainerClient_SP(containerName);\r\n    \tBlobClient blobClient = containerClient.getBlobClient(blobName);\t\t\r\n    \tString destinationPath = &quot;C:\\\\MyFolder\\\\MyFileName&quot;;\r\n    \tblobClient.downloadToFile(destinationPath,true); //Exception thrown here \r\n    \tSystem.out.println(&quot;Download OK&quot;);\r\n    }\r\n    catch (Exception ex) {\r\n    \tSystem.out.println(&quot;APP exception: &quot;+ex.getMessage());\r\n    \tthrow ex;\r\n    }\r\nException is : \r\n\r\n        Exception in thread &quot;main&quot; \r\n    com.azure.storage.blob.models.BlobStorageException: If you are using a StorageSharedKeyCredential, and the server returned an error message that says &#39;Signature did not match&#39;, you can compare the string to sign with the one generated by the SDK. To log the string to sign, pass in the context key value pair &#39;Azure-Storage-Log-String-To-Sign&#39;: true to the appropriate method call.\r\n        If you are using a SAS token, and the server returned an error message that says &#39;Signature did not match&#39;, you can compare the string to sign with the one generated by the SDK. To log the string to sign, pass in the context key value pair &#39;Azure-Storage-Log-String-To-Sign&#39;: true to the appropriate generateSas method call.\r\n        Please remember to disable &#39;Azure-Storage-Log-String-To-Sign&#39; before going to production as this string can potentially contain PII.\r\n        Status code 403, &quot;&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;Error&gt;&lt;Code&gt;AuthorizationPermissionMismatch&lt;/Code&gt;&lt;Message&gt;This request is not authorized to perform this operation using this permission.\r\n        RequestId:57625f26-801e-0036-206a-ec1d2e000000\r\n        Time:2023-09-21T09:07:08.3082584Z&lt;/Message&gt;&lt;/Error&gt;&quot;\r\n        \tat java.lang.invoke.MethodHandle.invokeWithArguments(MethodHandle.java:627)\r\n        \tat com.azure.core.implementation.http.rest.ResponseExceptionConstructorCache.invoke(ResponseExceptionConstructorCache.java:56)\r\n\r\nThe question : Is there something missing / wrong in code or it is ONLY permission issue ?\r\nThanks in advance \r\nRoles defined : [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8Izyo.png","title":"Issue with download from Azure with ClientID , TennantID and ClientSecret","body":"<p>I am trying to download blob from Azure storage from java code m by using  ClientID , TennantID and ClientSecret</p>\n<p>Here is code for obtaining client :</p>\n<pre><code>private BlobContainerClient getContainerClient_SP(String containerName) {\n    ClientSecretCredential clientSecretCredential = new ClientSecretCredentialBuilder()\n            .tenantId(tenantId)\n            .clientId(clientId)\n            .clientSecret(clientSecret)\n            .build();\n\n    String endpoint = String.format(Locale.ROOT, &quot;https://%s.blob.core.windows.net/%s&quot;, accountName, containerName);\n    BlobContainerClient containerClient = new BlobContainerClientBuilder()\n            .endpoint(endpoint)\n            .credential(clientSecretCredential)\n            .buildClient();\n\n    return containerClient;\n\n}\n</code></pre>\n<p>Here is code snippet for download :</p>\n<pre><code>try {\n    BlobContainerClient containerClient = getContainerClient_SP(containerName);\n    BlobClient blobClient = containerClient.getBlobClient(blobName);        \n    String destinationPath = &quot;C:\\\\MyFolder\\\\MyFileName&quot;;\n    blobClient.downloadToFile(destinationPath,true); //Exception thrown here \n    System.out.println(&quot;Download OK&quot;);\n}\ncatch (Exception ex) {\n    System.out.println(&quot;APP exception: &quot;+ex.getMessage());\n    throw ex;\n}\n</code></pre>\n<p>Exception is :</p>\n<pre><code>    Exception in thread &quot;main&quot; \ncom.azure.storage.blob.models.BlobStorageException: If you are using a StorageSharedKeyCredential, and the server returned an error message that says 'Signature did not match', you can compare the string to sign with the one generated by the SDK. To log the string to sign, pass in the context key value pair 'Azure-Storage-Log-String-To-Sign': true to the appropriate method call.\n    If you are using a SAS token, and the server returned an error message that says 'Signature did not match', you can compare the string to sign with the one generated by the SDK. To log the string to sign, pass in the context key value pair 'Azure-Storage-Log-String-To-Sign': true to the appropriate generateSas method call.\n    Please remember to disable 'Azure-Storage-Log-String-To-Sign' before going to production as this string can potentially contain PII.\n    Status code 403, &quot;&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;Error&gt;&lt;Code&gt;AuthorizationPermissionMismatch&lt;/Code&gt;&lt;Message&gt;This request is not authorized to perform this operation using this permission.\n    RequestId:57625f26-801e-0036-206a-ec1d2e000000\n    Time:2023-09-21T09:07:08.3082584Z&lt;/Message&gt;&lt;/Error&gt;&quot;\n        at java.lang.invoke.MethodHandle.invokeWithArguments(MethodHandle.java:627)\n        at com.azure.core.implementation.http.rest.ResponseExceptionConstructorCache.invoke(ResponseExceptionConstructorCache.java:56)\n</code></pre>\n<p>The question : Is there something missing / wrong in code or it is ONLY permission issue ?\nThanks in advance\nRoles defined : <a href=\"https://i.stack.imgur.com/8Izyo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8Izyo.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","hibernate","jpa","transactions"],"comments":[{"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"score":0,"creation_date":1484696169,"post_id":41705197,"comment_id":70613329,"body_markdown":"I&#39;m puzzled by ```PersistenceContextImpl``` class, why would you override the PersistenceContext annotation? In Spring the injected EntityManager is a proxy which interacts with Transactional and ThreadLocal storage, and it is almost like the Transactional annotation is not respected. I think you will be extremely lucky if someone else has tried this before, and knows the cause. I fear you will have to some debugging to figure this one out.","body":"I&#39;m puzzled by <code>PersistenceContextImpl</code> class, why would you override the PersistenceContext annotation? In Spring the injected EntityManager is a proxy which interacts with Transactional and ThreadLocal storage, and it is almost like the Transactional annotation is not respected. I think you will be extremely lucky if someone else has tried this before, and knows the cause. I fear you will have to some debugging to figure this one out."},{"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"score":0,"creation_date":1484696251,"post_id":41705197,"comment_id":70613356,"body_markdown":"And if you are already upgrading the project, you not get rid of Maven and the bloated XML configuration, and make the switch to Gradle ;)","body":"And if you are already upgrading the project, you not get rid of Maven and the bloated XML configuration, and make the switch to Gradle ;)"},{"owner":{"account_id":10052845,"reputation":41,"user_id":7432066,"display_name":"ProgEngineer"},"score":0,"creation_date":1484739192,"post_id":41705197,"comment_id":70631155,"body_markdown":"@KlausGroenbaek I&#39;m sorry for confusing you here, PersistenceContextImpl in this case is not overriding the PersistenceContext annotation but is just a normal class which is used and which has some interaction with the database. And thanks for the info about Gradle ;) I will check out Gradle in the future, but I&#39;m pretty sure a migration from Maven to Gradle at this point would be pretty lethal... :D","body":"@KlausGroenbaek I&#39;m sorry for confusing you here, PersistenceContextImpl in this case is not overriding the PersistenceContext annotation but is just a normal class which is used and which has some interaction with the database. And thanks for the info about Gradle ;) I will check out Gradle in the future, but I&#39;m pretty sure a migration from Maven to Gradle at this point would be pretty lethal... :D"},{"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"score":0,"creation_date":1484748144,"post_id":41705197,"comment_id":70637340,"body_markdown":"How does ```PersistenceContextImpl``` compile when there are references to two different```PersistenceContext```classes, and none of them are fully qualified? And based on the functionality of the Impl class it should probably be called something that ends with Repository.","body":"How does <code>PersistenceContextImpl</code> compile when there are references to two different<code>PersistenceContext</code>classes, and none of them are fully qualified? And based on the functionality of the Impl class it should probably be called something that ends with Repository."}],"answers":[{"tags":[],"owner":{"account_id":7521965,"reputation":117,"user_id":5713506,"display_name":"Saket Puranik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1484740819,"creation_date":1484740819,"answer_id":41718877,"question_id":41705197,"body_markdown":"I suspect that this can be an issue with your component scanning or package scanning. I cannot find the package scanning code in your spring configuration file. Please check that or update your configuration file.","title":"No EntityManager with actual transaction available for current thread - cannot reliably process &#39;flush&#39; call","body":"<p>I suspect that this can be an issue with your component scanning or package scanning. I cannot find the package scanning code in your spring configuration file. Please check that or update your configuration file.</p>\n"},{"tags":[],"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1484750880,"creation_date":1484750074,"answer_id":41722128,"question_id":41705197,"body_markdown":"The scanning seems to work. If you look at the stacktrace you can see the EntityManager ```Proxy``` (com.sun.proxy.$Proxy163) and that it forwards to```SharedEntityManagerCreator```as expected. \r\n\r\nHowever, before creating the SharedEntityManager it checks if there is a transaction, and this check fails. The transaction should be created by the ```@Transactional``` annotation. This happens through Spring AOP, either creating a GCLIB proxy extending```DBLockingImpl```or a JDK Proxy implementing ```Locking```. This can be determined by setting a breakpoint inside a method and looking at the callstack to see how the method was called. \r\n\r\nLooking at ```DBLockingImpl``` I noticed that you use ```SpringBeanAutowiringInterceptor```which suggests that DBLockingImpl is not a Spring bean, but you just autowire Spring beans into it. If this is that case then I think that is your problem, because then ```DBLockingImpl```will not be AOP proxied, and the @Transactional will therefore not be applied. \r\n\r\nTry making ```DBLockingImpl```a spring bean.\r\n\r\n\r\n","title":"No EntityManager with actual transaction available for current thread - cannot reliably process &#39;flush&#39; call","body":"<p>The scanning seems to work. If you look at the stacktrace you can see the EntityManager <code>Proxy</code> (com.sun.proxy.$Proxy163) and that it forwards to<code>SharedEntityManagerCreator</code>as expected. </p>\n\n<p>However, before creating the SharedEntityManager it checks if there is a transaction, and this check fails. The transaction should be created by the <code>@Transactional</code> annotation. This happens through Spring AOP, either creating a GCLIB proxy extending<code>DBLockingImpl</code>or a JDK Proxy implementing <code>Locking</code>. This can be determined by setting a breakpoint inside a method and looking at the callstack to see how the method was called. </p>\n\n<p>Looking at <code>DBLockingImpl</code> I noticed that you use <code>SpringBeanAutowiringInterceptor</code>which suggests that DBLockingImpl is not a Spring bean, but you just autowire Spring beans into it. If this is that case then I think that is your problem, because then <code>DBLockingImpl</code>will not be AOP proxied, and the @Transactional will therefore not be applied. </p>\n\n<p>Try making <code>DBLockingImpl</code>a spring bean.</p>\n"}],"owner":{"account_id":10052845,"reputation":41,"user_id":7432066,"display_name":"ProgEngineer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8332,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1695294426,"creation_date":1484680567,"question_id":41705197,"body_markdown":"Some background info: I am trying to migrate a big project from Hibernate 3.6.8 to 5.2.5 (including JPA upgrade 2.0 to 2.1), Spring 3.2.3 to 4.3.5 and am facing serious issues. The configuration has not been changed for Spring and Hibernate so far and has been working fine on the old versions, however with the upgrade problems that I can&#39;t solve myself arose.\r\n\r\n&gt; The exception I&#39;m getting is:\r\n\r\n    2017-01-16 10:15:25,635 ERROR [[ACTIVE] ExecuteThread: &#39;15&#39; for queue: &#39;weblogic.kernel.Default (self-tuning)&#39;] org.myproject.common.messaging.BaseMDB: Code: (11702) Source: (Common) Exception caught - Exception org.springframework.dao.InvalidDataAccessApiUsageException in org.myproject.core.processing.message.MessageReceiverImpl caught\r\n    org.springframework.dao.InvalidDataAccessApiUsageException: No EntityManager with actual transaction available for current thread - cannot reliably process &#39;flush&#39; call; nested exception is javax.persistence.TransactionRequiredException: No EntityManager with actual transaction available for current thread - cannot reliably process &#39;flush&#39; call\r\n                    at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:413)\r\n                    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:246)\r\n                    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:491)\r\n                    at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:59)\r\n                    at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:213)\r\n                    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:147)\r\n                    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n                    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)\r\n                    at com.sun.proxy.$Proxy187.flushAndClear(Unknown Source)\r\n                    at org.myproject.core.BasePersistenceMDB.synchronizeBackend(BasePersistenceMDB.java:46)\r\n                    at org.myproject.core.BasePersistenceMDB.onTextMessage(BasePersistenceMDB.java:32)\r\n                    at org.myproject.common.messaging.BaseMDB.evaluateJMSMessage(BaseMDB.java:100)\r\n                    at org.myproject.common.messaging.BaseMDB.onMessage(BaseMDB.java:51)\r\n                    at sun.reflect.GeneratedMethodAccessor591.invoke(Unknown Source)\r\n                    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n                    at java.lang.reflect.Method.invoke(Method.java:498)\r\n                    at com.bea.core.repackaged.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:310)\r\n                    at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)\r\n                    at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)\r\n                    at com.oracle.pitchfork.intercept.MethodInvocationInvocationContext.proceed(MethodInvocationInvocationContext.java:100)\r\n                    at com.oracle.pitchfork.intercept.JeeInterceptorInterceptor.invoke(JeeInterceptorInterceptor.java:117)\r\n                    at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\r\n                    at com.bea.core.repackaged.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:131)\r\n                    at com.bea.core.repackaged.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:119)\r\n                    at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\r\n                    at com.bea.core.repackaged.springframework.aop.framework.JdkDynamicAopProxy.invoke(Unknown Source)\r\n                    at com.sun.proxy.$Proxy121.onMessage(Unknown Source)\r\n                    at weblogic.ejb.container.internal.MDListener.execute(MDListener.java:451)\r\n                    at weblogic.ejb.container.internal.MDListener.transactionalOnMessage(MDListener.java:375)\r\n                    at weblogic.ejb.container.internal.TokenBasedJMSMessagePoller.processOneMessage(TokenBasedJMSMessagePoller.java:279)\r\n                    at weblogic.ejb.container.internal.TokenBasedJMSMessagePoller.run(TokenBasedJMSMessagePoller.java:121)\r\n                    at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:548)\r\n                    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:311)\r\n                    at weblogic.work.ExecuteThread.run(ExecuteThread.java:263)\r\n    Caused by: javax.persistence.TransactionRequiredException: No EntityManager with actual transaction available for current thread - cannot reliably process &#39;flush&#39; call\r\n                    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:282)\r\n                    at com.sun.proxy.$Proxy163.flush(Unknown Source)\r\n                    at org.myproject.core.data.dao.impl.MyPersistenceContextImpl.flushAndClear(MyPersistenceContextImpl.java:49)\r\n                    at sun.reflect.GeneratedMethodAccessor616.invoke(Unknown Source)\r\n                    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n                    at java.lang.reflect.Method.invoke(Method.java:498)\r\n                    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)\r\n                    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\r\n                    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n                    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:136)\r\n                    ... 28 more\r\n\r\n**My configuration looks as follows:\r\npom.xml (relevant snippets):**\r\n**for Spring:**\r\n  \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n        &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n        &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n        &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\r\n        &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n        &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n        &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n        &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n        &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n       &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n        &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n\t  \r\n**for Hibernate:**\r\n\t  \r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate.common&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-commons-annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;5.0.1.Final&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n           &lt;version&gt;5.2.6.Final&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.6.Final&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.0.Final&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-jpamodelgen&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.6.Final&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n          &lt;/dependency&gt;\r\n\r\n\t  \r\n**persistence.xml (full):** (here some things have been changed but didn&#39;t help: jta-data-source has been added, xsd versions have been updated)\r\n\r\n    &lt;persistence xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\r\n                 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                 xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;\r\n                 version=&quot;2.1&quot;&gt;\r\n    \r\n        &lt;persistence-unit name=&quot;MYPROJECT_PU&quot; transaction-type=&quot;JTA&quot;&gt;        \r\n    \t\t&lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\r\n    \t\t&lt;jta-data-source&gt;myproject-ds_jndi&lt;/jta-data-source&gt;\r\n    \t\r\n    \t\t&lt;mapping-file&gt;META-INF/named-queries.xml&lt;/mapping-file&gt;\r\n            \r\n    \t\t&lt;class&gt;org.myproj.core.domain.Message&lt;/class&gt;\r\n    \r\n    \t&lt;/persistence-unit&gt;\r\n    \t\r\n    &lt;/persistence&gt;\r\n\r\n**appContext.xml (relevant snippets):** (just added one extra property in jpaProperties since the upgrade)\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    \txmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xmlns:jdbc=&quot;http://www.springframework.org/schema/jdbc&quot;\r\n    \txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n    \thttp://www.springframework.org/schema/beans/spring-beans.xsd\r\n    \thttp://www.springframework.org/schema/context\r\n    \thttp://www.springframework.org/schema/context/spring-context.xsd\r\n    \thttp://www.springframework.org/schema/tx\r\n    \thttp://www.springframework.org/schema/tx/spring-tx.xsd\r\n    \thttp://www.springframework.org/schema/jdbc\r\n    \thttp://www.springframework.org/schema/jdbc/spring-jdbc.xsd&quot;&gt;\r\n    \t\r\n    ...\r\n    \r\n    &lt;bean\r\n    \t\tclass=&quot;org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor&quot; /&gt;\r\n    \r\n    \t&lt;bean\r\n    \t\tclass=&quot;org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor&quot; /&gt;\r\n    \r\n    \t&lt;bean\r\n    \t\tclass=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;\r\n    \t\t&lt;property name=&quot;locations&quot;&gt;\r\n    \t\t\t&lt;list&gt;\r\n    \t\t\t\t&lt;value&gt;classpath:configuration.properties&lt;/value&gt;\r\n    \t\t\t\t&lt;value&gt;classpath:externalized-queries.properties&lt;/value&gt;\r\n    \t\t\t&lt;/list&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n    \r\n    \t&lt;bean id=&quot;jndiDataSource&quot; class=&quot;org.springframework.jndi.JndiObjectFactoryBean&quot;&gt;\r\n    \t\t&lt;property name=&quot;jndiName&quot; value=&quot;${datasourceJndiName}&quot;&gt;&lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n    \r\n    \t&lt;!-- Indicates a JpaVendorAdapter implementation for Hibernate EntityManager. --&gt;\r\n    \t&lt;bean id=&quot;jpaVendorAdapter&quot;\r\n    \t\tclass=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot;&gt;\r\n    \t\t&lt;property name=&quot;database&quot; value=&quot;${databaseVendor}&quot; /&gt;\r\n    \t\t&lt;property name=&quot;showSql&quot; value=&quot;${showSql}&quot; /&gt;\r\n    \t\t&lt;property name=&quot;generateDdl&quot; value=&quot;${generateDdl}&quot; /&gt;\r\n    \t\t&lt;property name=&quot;databasePlatform&quot; value=&quot;${databaseDialect}&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \r\n    \t&lt;bean id=&quot;entityManagerFactory&quot;\r\n    \t\tclass=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\r\n    \t\t&lt;property name=&quot;persistenceXmlLocation&quot; value=&quot;${persistenceXmlFileLocation}&quot; /&gt;\r\n    \t\t&lt;property name=&quot;persistenceUnitName&quot; value=&quot;${persistenceUnitName}&quot; /&gt;\r\n    \t\t&lt;property name=&quot;dataSource&quot; ref=&quot;jndiDataSource&quot; /&gt;\r\n    \t\t&lt;property name=&quot;jpaVendorAdapter&quot; ref=&quot;jpaVendorAdapter&quot; /&gt;\r\n    \t\t&lt;property name=&quot;jpaProperties&quot;&gt;\r\n    \t\t\t&lt;props&gt;\r\n    \t\t\t\t&lt;prop key=&quot;hibernate.transaction.manager_lookup_class&quot;&gt;${transactionManagerLookupClass}&lt;/prop&gt;\r\n    \t\t\t\t&lt;prop key=&quot;hibernate.transaction.jta.platform&quot;&gt;org.hibernate.service.jta.platform.internal.WeblogicJtaPlatform&lt;/prop&gt; &lt;!-- this was newly added --&gt;\r\n    \t\t\t\t\r\n    \t\t\t&lt;/props&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n    \r\n    \t&lt;tx:annotation-driven /&gt;\r\n    \r\n    \t&lt;tx:jta-transaction-manager /&gt;\r\n    \t\r\n    ...\r\n\r\n**Relevant snippets from the class that opens the transaction demonstrating what annotations have been used here:**\r\n\r\n    import java.sql.SQLException;\r\n    import java.util.Set;\r\n    \r\n    import javax.interceptor.Interceptors;\r\n    \r\n    import org.springframework.ejb.interceptor.SpringBeanAutowiringInterceptor;\r\n    import org.springframework.transaction.annotation.Propagation;\r\n    import org.springframework.transaction.annotation.Transactional;\r\n    \r\n    ...\r\n    \r\n    @Interceptors(SpringBeanAutowiringInterceptor.class)\r\n    @Transactional(propagation = Propagation.REQUIRED)\r\n    public class DBLockingImpl implements Locking {\r\n    \r\n    @Autowired\r\n    private DataSource dataSource;\r\n\r\n\r\n\r\n\r\n**This is the class calling the entityManager (the transaction has already been opened at this point, but the exception happens when the flush method gets called on the EntityManager here):**\r\n\r\n    import javax.persistence.EntityManager;\r\n    import javax.persistence.PersistenceContext;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    \r\n    @Repository(value = &quot;persistenceContext&quot;)\r\n    public class PersistenceContextImpl\r\n        implements PersistenceContext {\r\n    \r\n        /**\r\n         * Instance variable for EntityManager.\r\n         */\r\n        @PersistenceContext\r\n        private EntityManager entityManager;\r\n    \r\n        @Override\r\n        public void flushAndClear() {\r\n            entityManager.flush();\r\n            entityManager.clear();\r\n        }\r\n    }\r\n\r\nSo can anybody please help me with this issue? I don&#39;t understand what&#39;s missing and why I am getting that exception. I get the impression that Spring is not connecting properly to Hibernates entity manager and that&#39;s why the exception comes, since the trasanction itself seems to be created, but whenever it tries to persist this exception flies. After all I find it weird that it is not working anymore, although it worked fine with the old versions of these frameworks. Have there been any big changes in configuration from the old versions?\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"No EntityManager with actual transaction available for current thread - cannot reliably process &#39;flush&#39; call","body":"<p>Some background info: I am trying to migrate a big project from Hibernate 3.6.8 to 5.2.5 (including JPA upgrade 2.0 to 2.1), Spring 3.2.3 to 4.3.5 and am facing serious issues. The configuration has not been changed for Spring and Hibernate so far and has been working fine on the old versions, however with the upgrade problems that I can't solve myself arose.</p>\n\n<blockquote>\n  <p>The exception I'm getting is:</p>\n</blockquote>\n\n<pre><code>2017-01-16 10:15:25,635 ERROR [[ACTIVE] ExecuteThread: '15' for queue: 'weblogic.kernel.Default (self-tuning)'] org.myproject.common.messaging.BaseMDB: Code: (11702) Source: (Common) Exception caught - Exception org.springframework.dao.InvalidDataAccessApiUsageException in org.myproject.core.processing.message.MessageReceiverImpl caught\norg.springframework.dao.InvalidDataAccessApiUsageException: No EntityManager with actual transaction available for current thread - cannot reliably process 'flush' call; nested exception is javax.persistence.TransactionRequiredException: No EntityManager with actual transaction available for current thread - cannot reliably process 'flush' call\n                at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:413)\n                at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:246)\n                at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:491)\n                at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:59)\n                at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:213)\n                at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:147)\n                at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n                at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)\n                at com.sun.proxy.$Proxy187.flushAndClear(Unknown Source)\n                at org.myproject.core.BasePersistenceMDB.synchronizeBackend(BasePersistenceMDB.java:46)\n                at org.myproject.core.BasePersistenceMDB.onTextMessage(BasePersistenceMDB.java:32)\n                at org.myproject.common.messaging.BaseMDB.evaluateJMSMessage(BaseMDB.java:100)\n                at org.myproject.common.messaging.BaseMDB.onMessage(BaseMDB.java:51)\n                at sun.reflect.GeneratedMethodAccessor591.invoke(Unknown Source)\n                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n                at java.lang.reflect.Method.invoke(Method.java:498)\n                at com.bea.core.repackaged.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:310)\n                at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)\n                at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)\n                at com.oracle.pitchfork.intercept.MethodInvocationInvocationContext.proceed(MethodInvocationInvocationContext.java:100)\n                at com.oracle.pitchfork.intercept.JeeInterceptorInterceptor.invoke(JeeInterceptorInterceptor.java:117)\n                at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\n                at com.bea.core.repackaged.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:131)\n                at com.bea.core.repackaged.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:119)\n                at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\n                at com.bea.core.repackaged.springframework.aop.framework.JdkDynamicAopProxy.invoke(Unknown Source)\n                at com.sun.proxy.$Proxy121.onMessage(Unknown Source)\n                at weblogic.ejb.container.internal.MDListener.execute(MDListener.java:451)\n                at weblogic.ejb.container.internal.MDListener.transactionalOnMessage(MDListener.java:375)\n                at weblogic.ejb.container.internal.TokenBasedJMSMessagePoller.processOneMessage(TokenBasedJMSMessagePoller.java:279)\n                at weblogic.ejb.container.internal.TokenBasedJMSMessagePoller.run(TokenBasedJMSMessagePoller.java:121)\n                at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:548)\n                at weblogic.work.ExecuteThread.execute(ExecuteThread.java:311)\n                at weblogic.work.ExecuteThread.run(ExecuteThread.java:263)\nCaused by: javax.persistence.TransactionRequiredException: No EntityManager with actual transaction available for current thread - cannot reliably process 'flush' call\n                at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:282)\n                at com.sun.proxy.$Proxy163.flush(Unknown Source)\n                at org.myproject.core.data.dao.impl.MyPersistenceContextImpl.flushAndClear(MyPersistenceContextImpl.java:49)\n                at sun.reflect.GeneratedMethodAccessor616.invoke(Unknown Source)\n                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n                at java.lang.reflect.Method.invoke(Method.java:498)\n                at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)\n                at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\n                at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\n                at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:136)\n                ... 28 more\n</code></pre>\n\n<p><strong>My configuration looks as follows:\npom.xml (relevant snippets):</strong>\n<strong>for Spring:</strong></p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n    &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n    &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n    &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n    &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n    &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n    &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n    &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n    &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\n  &lt;/dependency&gt;\n   &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n    &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n  &lt;/dependency&gt;\n</code></pre>\n\n<p><strong>for Hibernate:</strong></p>\n\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate.common&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-commons-annotations&lt;/artifactId&gt;\n        &lt;version&gt;5.0.1.Final&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n       &lt;version&gt;5.2.6.Final&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n        &lt;version&gt;5.2.6.Final&lt;/version&gt;\n      &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\n        &lt;version&gt;1.0.0.Final&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-jpamodelgen&lt;/artifactId&gt;\n        &lt;version&gt;5.2.6.Final&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n      &lt;/dependency&gt;\n</code></pre>\n\n<p><strong>persistence.xml (full):</strong> (here some things have been changed but didn't help: jta-data-source has been added, xsd versions have been updated)</p>\n\n<pre><code>&lt;persistence xmlns=\"http://xmlns.jcp.org/xml/ns/persistence\"\n             xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n             xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd\"\n             version=\"2.1\"&gt;\n\n    &lt;persistence-unit name=\"MYPROJECT_PU\" transaction-type=\"JTA\"&gt;        \n        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\n        &lt;jta-data-source&gt;myproject-ds_jndi&lt;/jta-data-source&gt;\n\n        &lt;mapping-file&gt;META-INF/named-queries.xml&lt;/mapping-file&gt;\n\n        &lt;class&gt;org.myproj.core.domain.Message&lt;/class&gt;\n\n    &lt;/persistence-unit&gt;\n\n&lt;/persistence&gt;\n</code></pre>\n\n<p><strong>appContext.xml (relevant snippets):</strong> (just added one extra property in jpaProperties since the upgrade)</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:tx=\"http://www.springframework.org/schema/tx\" xmlns:jdbc=\"http://www.springframework.org/schema/jdbc\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/context\n    http://www.springframework.org/schema/context/spring-context.xsd\n    http://www.springframework.org/schema/tx\n    http://www.springframework.org/schema/tx/spring-tx.xsd\n    http://www.springframework.org/schema/jdbc\n    http://www.springframework.org/schema/jdbc/spring-jdbc.xsd\"&gt;\n\n...\n\n&lt;bean\n        class=\"org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor\" /&gt;\n\n    &lt;bean\n        class=\"org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor\" /&gt;\n\n    &lt;bean\n        class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n        &lt;property name=\"locations\"&gt;\n            &lt;list&gt;\n                &lt;value&gt;classpath:configuration.properties&lt;/value&gt;\n                &lt;value&gt;classpath:externalized-queries.properties&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"jndiDataSource\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n        &lt;property name=\"jndiName\" value=\"${datasourceJndiName}\"&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Indicates a JpaVendorAdapter implementation for Hibernate EntityManager. --&gt;\n    &lt;bean id=\"jpaVendorAdapter\"\n        class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"&gt;\n        &lt;property name=\"database\" value=\"${databaseVendor}\" /&gt;\n        &lt;property name=\"showSql\" value=\"${showSql}\" /&gt;\n        &lt;property name=\"generateDdl\" value=\"${generateDdl}\" /&gt;\n        &lt;property name=\"databasePlatform\" value=\"${databaseDialect}\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"entityManagerFactory\"\n        class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n        &lt;property name=\"persistenceXmlLocation\" value=\"${persistenceXmlFileLocation}\" /&gt;\n        &lt;property name=\"persistenceUnitName\" value=\"${persistenceUnitName}\" /&gt;\n        &lt;property name=\"dataSource\" ref=\"jndiDataSource\" /&gt;\n        &lt;property name=\"jpaVendorAdapter\" ref=\"jpaVendorAdapter\" /&gt;\n        &lt;property name=\"jpaProperties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"hibernate.transaction.manager_lookup_class\"&gt;${transactionManagerLookupClass}&lt;/prop&gt;\n                &lt;prop key=\"hibernate.transaction.jta.platform\"&gt;org.hibernate.service.jta.platform.internal.WeblogicJtaPlatform&lt;/prop&gt; &lt;!-- this was newly added --&gt;\n\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;tx:annotation-driven /&gt;\n\n    &lt;tx:jta-transaction-manager /&gt;\n\n...\n</code></pre>\n\n<p><strong>Relevant snippets from the class that opens the transaction demonstrating what annotations have been used here:</strong></p>\n\n<pre><code>import java.sql.SQLException;\nimport java.util.Set;\n\nimport javax.interceptor.Interceptors;\n\nimport org.springframework.ejb.interceptor.SpringBeanAutowiringInterceptor;\nimport org.springframework.transaction.annotation.Propagation;\nimport org.springframework.transaction.annotation.Transactional;\n\n...\n\n@Interceptors(SpringBeanAutowiringInterceptor.class)\n@Transactional(propagation = Propagation.REQUIRED)\npublic class DBLockingImpl implements Locking {\n\n@Autowired\nprivate DataSource dataSource;\n</code></pre>\n\n<p><strong>This is the class calling the entityManager (the transaction has already been opened at this point, but the exception happens when the flush method gets called on the EntityManager here):</strong></p>\n\n<pre><code>import javax.persistence.EntityManager;\nimport javax.persistence.PersistenceContext;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Repository;\n\n\n@Repository(value = \"persistenceContext\")\npublic class PersistenceContextImpl\n    implements PersistenceContext {\n\n    /**\n     * Instance variable for EntityManager.\n     */\n    @PersistenceContext\n    private EntityManager entityManager;\n\n    @Override\n    public void flushAndClear() {\n        entityManager.flush();\n        entityManager.clear();\n    }\n}\n</code></pre>\n\n<p>So can anybody please help me with this issue? I don't understand what's missing and why I am getting that exception. I get the impression that Spring is not connecting properly to Hibernates entity manager and that's why the exception comes, since the trasanction itself seems to be created, but whenever it tries to persist this exception flies. After all I find it weird that it is not working anymore, although it worked fine with the old versions of these frameworks. Have there been any big changes in configuration from the old versions?</p>\n"},{"tags":["java","spring","spring-boot","websocket","socket.io"],"comments":[{"owner":{"account_id":87230,"reputation":36826,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"score":0,"creation_date":1591655929,"post_id":57505589,"comment_id":110133682,"body_markdown":"similar to https://stackoverflow.com/questions/15568700/best-java-server-implementation-for-socket-io but not flagging as duplicate as this specifically mentions Spring boot","body":"similar to <a href=\"https://stackoverflow.com/questions/15568700/best-java-server-implementation-for-socket-io\" title=\"best java server implementation for socket io\">stackoverflow.com/questions/15568700/&hellip;</a> but not flagging as duplicate as this specifically mentions Spring boot"}],"answers":[{"tags":[],"owner":{"account_id":3514618,"reputation":12090,"user_id":2938364,"accept_rate":88,"display_name":"Markus Weninger"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1695294209,"creation_date":1605807120,"answer_id":64916962,"question_id":57505589,"body_markdown":"The original [Socket.IO](https://socket.io) server is designed to be used in Javascript, mostly Node.\r\n\r\nYet, there are other implementations of the Socket.IO server for other languages.\r\n\r\nFor Java, there is the [Netty-socketio](https://github.com/mrniko/netty-socketio) project, an open-source Java implementation of the Socket.IO server, based on the [Netty](https://netty.io) Java server framework (the Netty-socketio project is also suggested in [this answer](https://stackoverflow.com/a/16711894/2938364)).\r\n\r\n[This example Spring Boot application](https://github.com/jamesjieye/netty-socketio.spring) uses Netty-socketio to provide a Socket.IO server within a Spring Boot application.\r\n\r\nSo **yes**, you can use (an open-source Java implementation of) Socket.IO together with Spring Boot.","title":"Can i use Socket.io with Spring-boot?","body":"<p>The original <a href=\"https://socket.io\" rel=\"nofollow noreferrer\">Socket.IO</a> server is designed to be used in Javascript, mostly Node.</p>\n<p>Yet, there are other implementations of the Socket.IO server for other languages.</p>\n<p>For Java, there is the <a href=\"https://github.com/mrniko/netty-socketio\" rel=\"nofollow noreferrer\">Netty-socketio</a> project, an open-source Java implementation of the Socket.IO server, based on the <a href=\"https://netty.io\" rel=\"nofollow noreferrer\">Netty</a> Java server framework (the Netty-socketio project is also suggested in <a href=\"https://stackoverflow.com/a/16711894/2938364\">this answer</a>).</p>\n<p><a href=\"https://github.com/jamesjieye/netty-socketio.spring\" rel=\"nofollow noreferrer\">This example Spring Boot application</a> uses Netty-socketio to provide a Socket.IO server within a Spring Boot application.</p>\n<p>So <strong>yes</strong>, you can use (an open-source Java implementation of) Socket.IO together with Spring Boot.</p>\n"}],"owner":{"account_id":11992823,"reputation":169,"user_id":8775363,"display_name":"Maziar Karimi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34286,"favorite_count":0,"down_vote_count":1,"up_vote_count":17,"answer_count":1,"score":16,"last_activity_date":1695294209,"creation_date":1565850241,"question_id":57505589,"body_markdown":"I am gonna develop a real time game for andriod/ios and i need a server which transmit data with client real time.\r\nCan i use socket.io with Spring boot?\r\nOr if the answer is no , using websockets with Spring boot is the solution?","title":"Can i use Socket.io with Spring-boot?","body":"<p>I am gonna develop a real time game for andriod/ios and i need a server which transmit data with client real time.\nCan i use socket.io with Spring boot?\nOr if the answer is no , using websockets with Spring boot is the solution?</p>\n"},{"tags":["java","spring","admin","crud"],"answers":[{"tags":[],"owner":{"account_id":146145,"reputation":72,"user_id":5193219,"display_name":"Depanker Sharma"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1500286053,"creation_date":1500285745,"answer_id":45141269,"question_id":45105710,"body_markdown":"https://www.javatpoint.com/spring-mvc-crud-example contains an example of how to create a Spring MVC CRUD there are plenty more examples of various spring project (This particular falls under Spring MVC). \r\n\r\nThis is not a ready-made CRUD, but a way how you could quickly implement one. \r\nhttps://spring.io/guides/gs/crud-with-vaadin/ is also worth checking.\r\n\r\nAlthough there are few project like spring batch admin (For batch administration), or Spring boot admin (Monitoring spring boot applications), which provides a UI, mainly spring project provides a simple programmatically way of plugging in what&#39;s needed. \r\n\r\nIt&#39;s a plug &amp; play kind of framework which targets various aspects of an enterprise application. Chances of finding a ready-made UI app would be more on GitHub rather than a specific spring plugin. ","title":"Spring web-based admin tool with CRUD","body":"<p><a href=\"https://www.javatpoint.com/spring-mvc-crud-example\" rel=\"nofollow noreferrer\">https://www.javatpoint.com/spring-mvc-crud-example</a> contains an example of how to create a Spring MVC CRUD there are plenty more examples of various spring project (This particular falls under Spring MVC). </p>\n\n<p>This is not a ready-made CRUD, but a way how you could quickly implement one. \n<a href=\"https://spring.io/guides/gs/crud-with-vaadin/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/crud-with-vaadin/</a> is also worth checking.</p>\n\n<p>Although there are few project like spring batch admin (For batch administration), or Spring boot admin (Monitoring spring boot applications), which provides a UI, mainly spring project provides a simple programmatically way of plugging in what's needed. </p>\n\n<p>It's a plug &amp; play kind of framework which targets various aspects of an enterprise application. Chances of finding a ready-made UI app would be more on GitHub rather than a specific spring plugin. </p>\n"},{"tags":[],"owner":{"account_id":10161183,"reputation":405,"user_id":7504603,"accept_rate":90,"display_name":"Adib Rajiwate"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1500445975,"creation_date":1500445975,"answer_id":45182573,"question_id":45105710,"body_markdown":" Simple answer to your question is No spring does not provide any tool for that but spring gives you the functionalities that can reduce your work but not with zero coding.\r\n\r\n example:\r\n\r\n -  Using Spring Data JPA there is an Interface name curdRepository which \r\n takes care of the curd Operations we dont need to implement the methods \r\n for Curd Spring takes care of Curd operation.\r\n - Spring Security Provides the login configuration with the login form and logout mechanism.\r\n\r\nYou can use spring boot or just visit the https://start.spring.io/ it will initialize the spring project with the dependencies you need ","title":"Spring web-based admin tool with CRUD","body":"<p>Simple answer to your question is No spring does not provide any tool for that but spring gives you the functionalities that can reduce your work but not with zero coding.</p>\n\n<p>example:</p>\n\n<ul>\n<li>Using Spring Data JPA there is an Interface name curdRepository which \ntakes care of the curd Operations we dont need to implement the methods \nfor Curd Spring takes care of Curd operation.</li>\n<li>Spring Security Provides the login configuration with the login form and logout mechanism.</li>\n</ul>\n\n<p>You can use spring boot or just visit the <a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">https://start.spring.io/</a> it will initialize the spring project with the dependencies you need </p>\n"},{"comments":[{"owner":{"account_id":19918374,"reputation":451,"user_id":14594800,"display_name":"Thomas"},"score":0,"creation_date":1679047846,"post_id":45201774,"comment_id":133654728,"body_markdown":"You may check out https://bootify.io/frontend/spring-boot-admin-ui-with-crud.html - it generates CRUD views for your database based on Thymeleaf.","body":"You may check out <a href=\"https://bootify.io/frontend/spring-boot-admin-ui-with-crud.html\" rel=\"nofollow noreferrer\">bootify.io/frontend/spring-boot-admin-ui-with-crud.html</a> - it generates CRUD views for your database based on Thymeleaf."}],"tags":[],"owner":{"account_id":2926765,"reputation":523,"user_id":2507899,"accept_rate":100,"display_name":"Lucas Colombo"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1631991365,"creation_date":1500501671,"answer_id":45201774,"question_id":45105710,"body_markdown":"Take a look at JHipster project https://www.jhipster.tech/\r\n\r\nWith it you can create Spring Boot+Angular/React/Vue based applications. It provides some cool tools for generating CRUD entities by scaffolding.","title":"Spring web-based admin tool with CRUD","body":"<p>Take a look at JHipster project <a href=\"https://www.jhipster.tech/\" rel=\"nofollow noreferrer\">https://www.jhipster.tech/</a></p>\n<p>With it you can create Spring Boot+Angular/React/Vue based applications. It provides some cool tools for generating CRUD entities by scaffolding.</p>\n"},{"tags":[],"owner":{"account_id":270162,"reputation":7734,"user_id":559940,"accept_rate":74,"display_name":"Ailef"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695291791,"creation_date":1695291791,"answer_id":77149372,"question_id":45105710,"body_markdown":"I&#39;ve recently started developing [Spring Boot Database Admin][1], which is a tool that does just what you ask. It&#39;s still in a very early stage though and it is not stable yet, but the main features are there.\r\n\r\nUnlike Bootify, it doesn&#39;t generate code for you but you just include it as a JAR and everything is detected automatically (you do need to just make some minor configuration changes).\r\n\r\n\r\n  [1]: https://github.com/aileftech/spring-boot-database-admin","title":"Spring web-based admin tool with CRUD","body":"<p>I've recently started developing <a href=\"https://github.com/aileftech/spring-boot-database-admin\" rel=\"nofollow noreferrer\">Spring Boot Database Admin</a>, which is a tool that does just what you ask. It's still in a very early stage though and it is not stable yet, but the main features are there.</p>\n<p>Unlike Bootify, it doesn't generate code for you but you just include it as a JAR and everything is detected automatically (you do need to just make some minor configuration changes).</p>\n"}],"owner":{"account_id":296506,"reputation":2368,"user_id":1079659,"display_name":"Cmyker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11508,"favorite_count":0,"down_vote_count":2,"up_vote_count":9,"accepted_answer_id":45201774,"answer_count":4,"score":7,"last_activity_date":1695291791,"creation_date":1500043223,"question_id":45105710,"body_markdown":"In PHP &amp; Symfony world there is a tool called Sonata Admin https://sonata-project.org/ based on AdminLTE template, that is all-in-one admin tool with login, menu configuration, and what is most important - database tables HTML grid CRUD generators.\r\nThe tool saves you tons of efforts by avoiding you writing boilerplate code, moreover, there might be a scenario that you would write zero code.\r\n\r\nWe need the same but for Java and Spring stack. Any recommendations?","title":"Spring web-based admin tool with CRUD","body":"<p>In PHP &amp; Symfony world there is a tool called Sonata Admin <a href=\"https://sonata-project.org/\" rel=\"noreferrer\">https://sonata-project.org/</a> based on AdminLTE template, that is all-in-one admin tool with login, menu configuration, and what is most important - database tables HTML grid CRUD generators.\nThe tool saves you tons of efforts by avoiding you writing boilerplate code, moreover, there might be a scenario that you would write zero code.</p>\n\n<p>We need the same but for Java and Spring stack. Any recommendations?</p>\n"},{"tags":["java","oracle","spring-boot","testcontainers-junit5"],"comments":[{"owner":{"account_id":2588804,"reputation":951,"user_id":2243919,"display_name":"zpavel"},"score":0,"creation_date":1694770897,"post_id":77079986,"comment_id":135937990,"body_markdown":"Hi. Create sql script init.sql with : CREATE USER OPIOWNER IDENTIFIED BY &quot;password&quot; QUOTA UNLIMITED ON USERS;\nGRANT CONNECT,RESOURCE TO OPIOWNER; Then on initialization of testcontainers add : ORACLE_OPIOWNER_CONTANINER.withInitScript(&quot;component/db/init.sql&quot;)","body":"Hi. Create sql script init.sql with : CREATE USER OPIOWNER IDENTIFIED BY &quot;password&quot; QUOTA UNLIMITED ON USERS; GRANT CONNECT,RESOURCE TO OPIOWNER; Then on initialization of testcontainers add : ORACLE_OPIOWNER_CONTANINER.withInitScript(&quot;component/db/init&zwnj;&#8203;.sql&quot;)"},{"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"score":0,"creation_date":1694784219,"post_id":77079986,"comment_id":135940531,"body_markdown":"Hi @zpavel, thanks for your attention. I tried and I get ORA-01031:insufficient privileges...","body":"Hi @zpavel, thanks for your attention. I tried and I get ORA-01031:insufficient privileges..."},{"owner":{"account_id":2588804,"reputation":951,"user_id":2243919,"display_name":"zpavel"},"score":0,"creation_date":1694873899,"post_id":77079986,"comment_id":135950175,"body_markdown":"Sorry i coulent not ediit but it was : ORACLE_OPIOWNER_CONTANINER.withInitScript(&quot;init.sql&quot;). So i suppose your init.sql was loaded as well (and you modified it). After which query it shows ora-01031 error?","body":"Sorry i coulent not ediit but it was : ORACLE_OPIOWNER_CONTANINER.withInitScript(&quot;init.sql&quot;). So i suppose your init.sql was loaded as well (and you modified it). After which query it shows ora-01031 error?"},{"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"score":0,"creation_date":1694888591,"post_id":77079986,"comment_id":135951778,"body_markdown":"@zpavel, Yes, correct.","body":"@zpavel, Yes, correct."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1694930904,"post_id":77079986,"comment_id":135954651,"body_markdown":"Please add the error in the question and also is there any way to reproduce the issue?","body":"Please add the error in the question and also is there any way to reproduce the issue?"},{"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"score":0,"creation_date":1695225937,"post_id":77079986,"comment_id":135997050,"body_markdown":"@AnishB. your answer has disappeared...","body":"@AnishB. your answer has disappeared..."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695225966,"post_id":77079986,"comment_id":135997057,"body_markdown":"Hi. I deleted my answer. I felt it was not helping you.","body":"Hi. I deleted my answer. I felt it was not helping you."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695226019,"post_id":77079986,"comment_id":135997067,"body_markdown":"Can you tell me if you have privilege to create any account in your test container.","body":"Can you tell me if you have privilege to create any account in your test container."},{"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"score":0,"creation_date":1695226114,"post_id":77079986,"comment_id":135997087,"body_markdown":"It seems I do not have any privilege","body":"It seems I do not have any privilege"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695226181,"post_id":77079986,"comment_id":135997104,"body_markdown":"So, without privilege, you can&#39;t create a user.","body":"So, without privilege, you can&#39;t create a user."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695226679,"post_id":77079986,"comment_id":135997202,"body_markdown":"Can you put the create user statement in init.sql and execute it to see if it works? Which version of the test containers are you using?","body":"Can you put the create user statement in init.sql and execute it to see if it works? Which version of the test containers are you using?"}],"answers":[{"comments":[{"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"score":0,"creation_date":1695012712,"post_id":77120924,"comment_id":135962015,"body_markdown":"Dear @Anish, your answer makes arise a doubt in my mind. In the code under test, entities are defined with schemas. So when a query Is done in a table of firmaowner user hibernate adds the user before any select or insert. I think, as I tried, that  if i use the tecnique you have suggested, the same exceprion User does not exist Will be thrown... Indeed, I tried to create the tables without indicating a user, and the tables have bene created, but the exceprion Is thrown","body":"Dear @Anish, your answer makes arise a doubt in my mind. In the code under test, entities are defined with schemas. So when a query Is done in a table of firmaowner user hibernate adds the user before any select or insert. I think, as I tried, that  if i use the tecnique you have suggested, the same exceprion User does not exist Will be thrown... Indeed, I tried to create the tables without indicating a user, and the tables have bene created, but the exceprion Is thrown"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695018723,"post_id":77120924,"comment_id":135962621,"body_markdown":"@SaverioMirkoViola First of all, are you able to create any user? Because you said that you were not able to create user right?","body":"@SaverioMirkoViola First of all, are you able to create any user? Because you said that you were not able to create user right?"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695018810,"post_id":77120924,"comment_id":135962634,"body_markdown":"@SaverioMirkoViola First try with 1 datasource and execute the query, see what issues are you facing?","body":"@SaverioMirkoViola First try with 1 datasource and execute the query, see what issues are you facing?"},{"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"score":0,"creation_date":1695118794,"post_id":77120924,"comment_id":135978498,"body_markdown":"Hi @Anish, I&#39;m not able to execute the script because of error Sql = CONNECT TEST/password@OPIOWNER, OriginalSql = CONNECT TEST/password@OPIOWNER, Error Msg = ORA-00900: invalid sql statement. Anyway, thing is that I need to create the table for OPIOWNER user and not for TEST. I am not able to create any user...","body":"Hi @Anish, I&#39;m not able to execute the script because of error Sql = CONNECT TEST/password@OPIOWNER, OriginalSql = CONNECT TEST/password@OPIOWNER, Error Msg = ORA-00900: invalid sql statement. Anyway, thing is that I need to create the table for OPIOWNER user and not for TEST. I am not able to create any user..."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695120048,"post_id":77120924,"comment_id":135978702,"body_markdown":"@SaverioMirkoViola I have already mentioned in my answer that you won&#39;t be able to create because you don&#39;t have privileges. That&#39;s why you need to use TEST and I also mentioned the github issue which you have to read to get some conclusion..","body":"@SaverioMirkoViola I have already mentioned in my answer that you won&#39;t be able to create because you don&#39;t have privileges. That&#39;s why you need to use TEST and I also mentioned the github issue which you have to read to get some conclusion.."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695120417,"post_id":77120924,"comment_id":135978773,"body_markdown":"@SaverioMirkoViola `CONNECT TEST/&lt;pwd&gt;@&lt;&lt;NAME OF TEST CONTAINER&gt;&gt;`. Is the name of the container `OPIOWNER`?","body":"@SaverioMirkoViola <code>CONNECT TEST&#47;&lt;pwd&gt;@&lt;&lt;NAME OF TEST CONTAINER&gt;&gt;</code>. Is the name of the container <code>OPIOWNER</code>?"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695121158,"post_id":77120924,"comment_id":135978886,"body_markdown":"@SaverioMirkoViola You can skip Connect sql and try the rest of the sql with test.","body":"@SaverioMirkoViola You can skip Connect sql and try the rest of the sql with test."},{"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"score":0,"creation_date":1695131575,"post_id":77120924,"comment_id":135981016,"body_markdown":"I get ORA-01918:User TEST does not exist...","body":"I get ORA-01918:User TEST does not exist..."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695133133,"post_id":77120924,"comment_id":135981371,"body_markdown":"@SaverioMirkoViola Can you try this -&gt; SELECT *\nFROM master.sys.database_principals; to see how many users are there.","body":"@SaverioMirkoViola Can you try this -&gt; SELECT * FROM master.sys.database_principals; to see how many users are there."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695133218,"post_id":77120924,"comment_id":135981399,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/255328/discussion-between-anish-b-and-saverio-mirko-viola).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/255328/discussion-between-anish-b-and-saverio-mirko-viola\">continue this discussion in chat</a>."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695275338,"post_id":77120924,"comment_id":136003096,"body_markdown":"@SaverioMirkoViola Can you try this please? and reply me now itself.","body":"@SaverioMirkoViola Can you try this please? and reply me now itself."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695275385,"post_id":77120924,"comment_id":136003107,"body_markdown":"@SaverioMirkoViola I have updated my answer. Please verify if this is working now.","body":"@SaverioMirkoViola I have updated my answer. Please verify if this is working now."},{"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"score":0,"creation_date":1695282159,"post_id":77120924,"comment_id":136004173,"body_markdown":"Dear @AnishB, Unfortunately user &#39;sys as sysdba&#39; is not allowed. If I put sys or system, withUsername() method throws an exception. I am using version 1.19.0.","body":"Dear @AnishB, Unfortunately user &#39;sys as sysdba&#39; is not allowed. If I put sys or system, withUsername() method throws an exception. I am using version 1.19.0."},{"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"score":0,"creation_date":1695283765,"post_id":77120924,"comment_id":136004506,"body_markdown":"I understand from container logs that the sys user exists and is called test: CREATE USER sys as sysdba IDENTIFIED BY &quot;test&quot; QUOTA UNLIMITED ON USERS.\nSo probably I need to connect to test to create new users... right?","body":"I understand from container logs that the sys user exists and is called test: CREATE USER sys as sysdba IDENTIFIED BY &quot;test&quot; QUOTA UNLIMITED ON USERS. So probably I need to connect to test to create new users... right?"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695284188,"post_id":77120924,"comment_id":136004590,"body_markdown":"@SaverioMirkoViola Yes!","body":"@SaverioMirkoViola Yes!"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695284494,"post_id":77120924,"comment_id":136004652,"body_markdown":"@SaverioMirkoViola Then I was correct earlier about &#39;test&#39; user in the container.","body":"@SaverioMirkoViola Then I was correct earlier about &#39;test&#39; user in the container."},{"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"score":1,"creation_date":1695285299,"post_id":77120924,"comment_id":136004813,"body_markdown":"Could you please explain to me how can create OPIOWNER user by means of TEST?","body":"Could you please explain to me how can create OPIOWNER user by means of TEST?"},{"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"score":0,"creation_date":1695286337,"post_id":77120924,"comment_id":136005020,"body_markdown":"The whole thing is messing me up","body":"The whole thing is messing me up"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695287144,"post_id":77120924,"comment_id":136005209,"body_markdown":"@SaverioMirkoViola Yes I can explain. Just give me a min.","body":"@SaverioMirkoViola Yes I can explain. Just give me a min."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695287427,"post_id":77120924,"comment_id":136005278,"body_markdown":"@SaverioMirkoViola Are you connected to test user?","body":"@SaverioMirkoViola Are you connected to test user?"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695291401,"post_id":77120924,"comment_id":136006202,"body_markdown":"@SaverioMirkoViola Just try `connect sys/&quot;&lt;pwd&gt;@test&quot; as sysdba` and then execute the create user statement for OPIOWNER.","body":"@SaverioMirkoViola Just try <code>connect sys&#47;&quot;&lt;pwd&gt;@test&quot; as sysdba</code> and then execute the create user statement for OPIOWNER."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695362482,"post_id":77120924,"comment_id":136016759,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/255374/discussion-between-anish-b-and-saverio-mirko-viola).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/255374/discussion-between-anish-b-and-saverio-mirko-viola\">continue this discussion in chat</a>."},{"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"score":0,"creation_date":1695976583,"post_id":77120924,"comment_id":136097694,"body_markdown":"Dear @Anish, forgive be for being so late but I was real busy in these days. Given the difficulties in solving this problem, we, me and our team, decided to change our path.\nAnyway, to let yot know, the last instruction gives the following error: CONNECT sys/&quot;password@test&quot; as sysdba: invalid sql statement","body":"Dear @Anish, forgive be for being so late but I was real busy in these days. Given the difficulties in solving this problem, we, me and our team, decided to change our path. Anyway, to let yot know, the last instruction gives the following error: CONNECT sys/&quot;password@test&quot; as sysdba: invalid sql statement"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695977777,"post_id":77120924,"comment_id":136097908,"body_markdown":"@SaverioMirkoViola Ok no problem.","body":"@SaverioMirkoViola Ok no problem."}],"tags":[],"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"comment_count":24,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695291529,"creation_date":1694936804,"answer_id":77120924,"question_id":77079986,"body_markdown":"I guess I found the issue that you are facing. Kindly go through this **Github issue** below:\r\n\r\n[[OracleContainer] Unable to execute statements which need system privileges][1]\r\n\r\n**Note:** I&#39;m not a DB Expert. \r\n\r\nBased on the information provided there, I&#39;ve formed my answer which is as follows:\r\n\r\n- For an `oracle-xe` image, now the default user and schema is now &quot;**TEST**&quot;. \r\n\r\n- I guess you won&#39;t be able to create any random user where you don&#39;t have the privileges. To overcome that, you have to use **TEST** user which is kind of acts as a super-user for test containers (Oracle Test containers uses/detects **TEST** as the default user).\r\n\r\n- So, what can I suggest is to create an **init.sql** some like this below:\r\n\r\n      CREATE USER OPIOWNER IDENTIFIED BY password;\r\n      GRANT CONNECT TO OPIOWNER;\r\n      GRANT SYSDBA TO OPIOWNER;\r\n      GRANT CREATE SESSION GRANT ANY PRIVILEGE TO OPIOWNER;\r\n      GRANT UNLIMITED TABLESPACE TO OPIOWNER;\r\n\r\n- Update **AbstractContanierBaseTest** class to some like this:\r\n\r\n\r\n\r\n \r\n\r\n        @Slf4\r\n        public class AbstractContanierBaseTest {\r\n    \r\n        static final OracleContainer ORACLE_OPIOWNER_CONTANINER;\r\n        static final OracleContainer ORACLE_FIRMAOWNER_CONTANINER;\r\n    \r\n        static {\r\n            ORACLE_OPIOWNER_CONTANINER = new OracleContainer(&quot;gvenzl/oracle-xe:21-slim&quot;);\r\n            ORACLE_OPIOWNER_CONTANINER\r\n                    .withUsername(&quot;test&quot;)\r\n                    .withInitScript(&quot;init.sql&quot;);\r\n                    .usingSid();\r\n            ORACLE_OPIOWNER_CONTANINER.start();\r\n    \r\n            System.setProperty(&quot;spring.datasource.driver-class-name&quot;, ORACLE_OPIOWNER_CONTANINER.getDriverClassName());\r\n            System.setProperty(&quot;spring.datasource.url&quot;, ORACLE_OPIOWNER_CONTANINER.getJdbcUrl());\r\n            System.setProperty(&quot;spring.datasource.username&quot;, ORACLE_OPIOWNER_CONTANINER.getUsername());\r\n            System.setProperty(&quot;spring.datasource.password&quot;, ORACLE_OPIOWNER_CONTANINER.getPassword());\r\n    \r\n            ORACLE_FIRMAOWNER_CONTANINER = new OracleContainer(&quot;gvenzl/oracle-xe:11-slim&quot;).withCopyFileToContainer(MountableFile.forClasspathResource(&quot;init.sql&quot;), &quot;/container-entrypoint-startdb.d/init.sql&quot;);\r\n            ORACLE_FIRMAOWNER_CONTANINER\r\n                    .withUsername(&quot;firmaowner&quot;)\r\n                    .withPassword(&quot;password&quot;)\r\n                    .withDatabaseName(&quot;FIRMAOWNER&quot;)\r\n                    .withLogConsumer(new Slf4jLogConsumer(log))\r\n                    .withEnv(&quot;ORACLE_PASSWORD&quot;, &quot;password&quot;)\r\n                    .withEnv(&quot;APP_USER&quot;, &quot;firmaowner&quot;)\r\n                    .withEnv(&quot;APP_USER_PASSWORD&quot;, &quot;password&quot;)\r\n                    .usingSid();\r\n            ;\r\n            ORACLE_FIRMAOWNER_CONTANINER.start();\r\n    \r\n            System.setProperty(&quot;spring.second-datasource.url&quot;, ORACLE_FIRMAOWNER_CONTANINER.getJdbcUrl());\r\n            System.setProperty(&quot;spring.second-datasource.username&quot;, ORACLE_FIRMAOWNER_CONTANINER.getUsername());\r\n            System.setProperty(&quot;spring.second-datasource.password&quot;, ORACLE_FIRMAOWNER_CONTANINER.getPassword());\r\n    \r\n        }\r\n\r\n- Now, update the create table script to this:\r\n\r\n        ALTER SESSION SET CONTAINER=&lt;&lt;NAME OF TEST CONTAINER&gt;&gt;;\r\n    \r\n        CREATE TABLE TEST.OPI_CONFLUENZA_DATI\r\n        (\r\n            &quot;OPI_ANNO_EMISSIONE_TITOLO&quot; NUMBER(4,0),\r\n            &quot;OPI_TIPOLOGIADISPOSIZIONE&quot; VARCHAR2(11),\r\n            &quot;OPI_DATADISPOSIZIONE&quot; DATE,\r\n            &quot;OPI_ID_DISPOSIZIONE&quot; NUMBER(10,0) NOT NULL,\r\n            &quot;OPI_NUM_TITOLO&quot; NUMBER(9,0),\r\n            &quot;OPI_PROG_QUOTA&quot; NUMBER(15,0),\r\n            &quot;OPI_TIPO_COD_BENEF&quot; VARCHAR2(2),\r\n            &quot;OPI_CODICE_BENEF&quot; VARCHAR2(16),\r\n            &quot;OPI_TIPO_RECORD&quot; VARCHAR2(11),\r\n            &quot;OPI_SPECIE_TITOLO&quot; VARCHAR2(2),\r\n            &quot;OPI_TIPO_SPESA&quot; VARCHAR2(5),\r\n            &quot;OPI_COD_ENTE&quot; VARCHAR2(15),\r\n            &quot;OPI_IMPORTO&quot; NUMBER(15,3),\r\n            &quot;OPI_NOME_FILE&quot; VARCHAR2(100),\r\n            &quot;OPI_ORDINANTE&quot; VARCHAR2(100)\r\n         );\r\n    \r\n         ALTER TABLE TEST.OPI_CONFLUENZA_DATI\r\n         ADD CONSTRAINT OPI_CONFLUENZA_DATI_PK PRIMARY KEY (&quot;OPI_TIPOLOGIADISPOSIZIONE&quot;, &quot;OPI_DATADISPOSIZIONE&quot;, &quot;OPI_ID_DISPOSIZIONE&quot;);\r\n\r\nSee if this changes work. That&#39;s all. Look at that github issue for more info.\r\n\r\n\r\n\r\n\r\n  [1]: https://github.com/testcontainers/testcontainers-java/issues/4615\r\n","title":"Oracle Test Container throwing SQLSyntaxErrorException: ORA-01918: user does not exist","body":"<p>I guess I found the issue that you are facing. Kindly go through this <strong>Github issue</strong> below:</p>\n<p><a href=\"https://github.com/testcontainers/testcontainers-java/issues/4615\" rel=\"nofollow noreferrer\">[OracleContainer] Unable to execute statements which need system privileges</a></p>\n<p><strong>Note:</strong> I'm not a DB Expert.</p>\n<p>Based on the information provided there, I've formed my answer which is as follows:</p>\n<ul>\n<li><p>For an <code>oracle-xe</code> image, now the default user and schema is now &quot;<strong>TEST</strong>&quot;.</p>\n</li>\n<li><p>I guess you won't be able to create any random user where you don't have the privileges. To overcome that, you have to use <strong>TEST</strong> user which is kind of acts as a super-user for test containers (Oracle Test containers uses/detects <strong>TEST</strong> as the default user).</p>\n</li>\n<li><p>So, what can I suggest is to create an <strong>init.sql</strong> some like this below:</p>\n<pre><code>CREATE USER OPIOWNER IDENTIFIED BY password;\nGRANT CONNECT TO OPIOWNER;\nGRANT SYSDBA TO OPIOWNER;\nGRANT CREATE SESSION GRANT ANY PRIVILEGE TO OPIOWNER;\nGRANT UNLIMITED TABLESPACE TO OPIOWNER;\n</code></pre>\n</li>\n<li><p>Update <strong>AbstractContanierBaseTest</strong> class to some like this:</p>\n<pre><code>  @Slf4\n  public class AbstractContanierBaseTest {\n\n  static final OracleContainer ORACLE_OPIOWNER_CONTANINER;\n  static final OracleContainer ORACLE_FIRMAOWNER_CONTANINER;\n\n  static {\n      ORACLE_OPIOWNER_CONTANINER = new OracleContainer(&quot;gvenzl/oracle-xe:21-slim&quot;);\n      ORACLE_OPIOWNER_CONTANINER\n              .withUsername(&quot;test&quot;)\n              .withInitScript(&quot;init.sql&quot;);\n              .usingSid();\n      ORACLE_OPIOWNER_CONTANINER.start();\n\n      System.setProperty(&quot;spring.datasource.driver-class-name&quot;, ORACLE_OPIOWNER_CONTANINER.getDriverClassName());\n      System.setProperty(&quot;spring.datasource.url&quot;, ORACLE_OPIOWNER_CONTANINER.getJdbcUrl());\n      System.setProperty(&quot;spring.datasource.username&quot;, ORACLE_OPIOWNER_CONTANINER.getUsername());\n      System.setProperty(&quot;spring.datasource.password&quot;, ORACLE_OPIOWNER_CONTANINER.getPassword());\n\n      ORACLE_FIRMAOWNER_CONTANINER = new OracleContainer(&quot;gvenzl/oracle-xe:11-slim&quot;).withCopyFileToContainer(MountableFile.forClasspathResource(&quot;init.sql&quot;), &quot;/container-entrypoint-startdb.d/init.sql&quot;);\n      ORACLE_FIRMAOWNER_CONTANINER\n              .withUsername(&quot;firmaowner&quot;)\n              .withPassword(&quot;password&quot;)\n              .withDatabaseName(&quot;FIRMAOWNER&quot;)\n              .withLogConsumer(new Slf4jLogConsumer(log))\n              .withEnv(&quot;ORACLE_PASSWORD&quot;, &quot;password&quot;)\n              .withEnv(&quot;APP_USER&quot;, &quot;firmaowner&quot;)\n              .withEnv(&quot;APP_USER_PASSWORD&quot;, &quot;password&quot;)\n              .usingSid();\n      ;\n      ORACLE_FIRMAOWNER_CONTANINER.start();\n\n      System.setProperty(&quot;spring.second-datasource.url&quot;, ORACLE_FIRMAOWNER_CONTANINER.getJdbcUrl());\n      System.setProperty(&quot;spring.second-datasource.username&quot;, ORACLE_FIRMAOWNER_CONTANINER.getUsername());\n      System.setProperty(&quot;spring.second-datasource.password&quot;, ORACLE_FIRMAOWNER_CONTANINER.getPassword());\n\n  }\n</code></pre>\n</li>\n<li><p>Now, update the create table script to this:</p>\n<pre><code>  ALTER SESSION SET CONTAINER=&lt;&lt;NAME OF TEST CONTAINER&gt;&gt;;\n\n  CREATE TABLE TEST.OPI_CONFLUENZA_DATI\n  (\n      &quot;OPI_ANNO_EMISSIONE_TITOLO&quot; NUMBER(4,0),\n      &quot;OPI_TIPOLOGIADISPOSIZIONE&quot; VARCHAR2(11),\n      &quot;OPI_DATADISPOSIZIONE&quot; DATE,\n      &quot;OPI_ID_DISPOSIZIONE&quot; NUMBER(10,0) NOT NULL,\n      &quot;OPI_NUM_TITOLO&quot; NUMBER(9,0),\n      &quot;OPI_PROG_QUOTA&quot; NUMBER(15,0),\n      &quot;OPI_TIPO_COD_BENEF&quot; VARCHAR2(2),\n      &quot;OPI_CODICE_BENEF&quot; VARCHAR2(16),\n      &quot;OPI_TIPO_RECORD&quot; VARCHAR2(11),\n      &quot;OPI_SPECIE_TITOLO&quot; VARCHAR2(2),\n      &quot;OPI_TIPO_SPESA&quot; VARCHAR2(5),\n      &quot;OPI_COD_ENTE&quot; VARCHAR2(15),\n      &quot;OPI_IMPORTO&quot; NUMBER(15,3),\n      &quot;OPI_NOME_FILE&quot; VARCHAR2(100),\n      &quot;OPI_ORDINANTE&quot; VARCHAR2(100)\n   );\n\n   ALTER TABLE TEST.OPI_CONFLUENZA_DATI\n   ADD CONSTRAINT OPI_CONFLUENZA_DATI_PK PRIMARY KEY (&quot;OPI_TIPOLOGIADISPOSIZIONE&quot;, &quot;OPI_DATADISPOSIZIONE&quot;, &quot;OPI_ID_DISPOSIZIONE&quot;);\n</code></pre>\n</li>\n</ul>\n<p>See if this changes work. That's all. Look at that github issue for more info.</p>\n"}],"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":276,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1695291529,"creation_date":1694420532,"question_id":77079986,"body_markdown":"I am new to **Oracle Container** and I&#39;m having a test container to open 2 database connections since I have 2 datasource in my spring boot application.\r\n\r\nThis is the abstract class where I create Oracle container instances:\r\n\r\n``` lang-java\r\n@Slf4j\r\npublic class AbstractContanierBaseTest {\r\n\r\n    static final OracleContainer ORACLE_OPIOWNER_CONTANINER;\r\n    static final OracleContainer ORACLE_FIRMAOWNER_CONTANINER;\r\n\r\n    static {\r\n        ORACLE_OPIOWNER_CONTANINER = new OracleContainer(&quot;gvenzl/oracle-xe:21-slim&quot;);\r\n        ORACLE_OPIOWNER_CONTANINER\r\n                .withUsername(&quot;opiowner&quot;)\r\n                .withPassword(&quot;password&quot;)\r\n                .withDatabaseName(&quot;OPIOWNER&quot;)\r\n                .withExposedPorts(1521)\r\n                .withLogConsumer(new Slf4jLogConsumer(log))\r\n                .withEnv(&quot;ORACLE_DATABASE&quot;, &quot;OPIOWNER&quot;)\r\n                .withEnv(&quot;ORACLE_PASSWORD&quot;, &quot;password&quot;)\r\n                .withEnv(&quot;APP_USER&quot;, &quot;opiowner&quot;)\r\n                .withEnv(&quot;APP_USER_PASSWORD&quot;, &quot;password&quot;)\r\n                .usingSid();\r\n        ORACLE_OPIOWNER_CONTANINER.start();\r\n\r\n        System.setProperty(&quot;spring.datasource.driver-class-name&quot;, ORACLE_OPIOWNER_CONTANINER.getDriverClassName());\r\n        System.setProperty(&quot;spring.datasource.url&quot;, ORACLE_OPIOWNER_CONTANINER.getJdbcUrl());\r\n        System.setProperty(&quot;spring.datasource.username&quot;, ORACLE_OPIOWNER_CONTANINER.getUsername());\r\n        System.setProperty(&quot;spring.datasource.password&quot;, ORACLE_OPIOWNER_CONTANINER.getPassword());\r\n\r\n        ORACLE_FIRMAOWNER_CONTANINER = new OracleContainer(&quot;gvenzl/oracle-xe:11-slim&quot;);\r\n        ORACLE_FIRMAOWNER_CONTANINER\r\n                .withUsername(&quot;firmaowner&quot;)\r\n                .withPassword(&quot;password&quot;)\r\n                .withDatabaseName(&quot;FIRMAOWNER&quot;)\r\n                .withLogConsumer(new Slf4jLogConsumer(log))\r\n                .withEnv(&quot;ORACLE_PASSWORD&quot;, &quot;password&quot;)\r\n                .withEnv(&quot;APP_USER&quot;, &quot;firmaowner&quot;)\r\n                .withEnv(&quot;APP_USER_PASSWORD&quot;, &quot;password&quot;)\r\n                .usingSid();\r\n        ;\r\n        ORACLE_FIRMAOWNER_CONTANINER.start();\r\n\r\n        System.setProperty(&quot;spring.second-datasource.url&quot;, ORACLE_FIRMAOWNER_CONTANINER.getJdbcUrl());\r\n        System.setProperty(&quot;spring.second-datasource.username&quot;, ORACLE_FIRMAOWNER_CONTANINER.getUsername());\r\n        System.setProperty(&quot;spring.second-datasource.password&quot;, ORACLE_FIRMAOWNER_CONTANINER.getPassword());\r\n\r\n    }\r\n``` \r\n\r\nThis class inherited by my integration tests written in junit5.\r\n\r\nWhen executing junits an Sql script is launched before tests by means of `@Sql` annotation:\r\n\r\n``` lang-java\r\n@Sql(config = @SqlConfig(transactionManager = &quot;opiownerTransactionManager&quot;), scripts = {&quot;classpath:scripts/ddl/Recall_create_table_opiConfluenzaDati.sql&quot;, &quot;classpath:scripts/dml/Recall_opiConfluenzaDati_script.sql&quot;})\r\n```\r\n\r\nThe script is executed properly, but I receive an oracle `SqlSyntaxException` as per Question title.\r\n\r\nThis is my create table script:\r\n\r\n``` lang-sql\r\nCREATE TABLE opiowner.OPI_CONFLUENZA_DATI\r\n(\r\n    &quot;OPI_ANNO_EMISSIONE_TITOLO&quot; NUMBER(4,0),\r\n    &quot;OPI_TIPOLOGIADISPOSIZIONE&quot; VARCHAR2(11),\r\n    &quot;OPI_DATADISPOSIZIONE&quot; DATE,\r\n    &quot;OPI_ID_DISPOSIZIONE&quot; NUMBER(10,0) NOT NULL,\r\n    &quot;OPI_NUM_TITOLO&quot; NUMBER(9,0),\r\n    &quot;OPI_PROG_QUOTA&quot; NUMBER(15,0),\r\n    &quot;OPI_TIPO_COD_BENEF&quot; VARCHAR2(2),\r\n    &quot;OPI_CODICE_BENEF&quot; VARCHAR2(16),\r\n    &quot;OPI_TIPO_RECORD&quot; VARCHAR2(11),\r\n    &quot;OPI_SPECIE_TITOLO&quot; VARCHAR2(2),\r\n    &quot;OPI_TIPO_SPESA&quot; VARCHAR2(5),\r\n    &quot;OPI_COD_ENTE&quot; VARCHAR2(15),\r\n    &quot;OPI_IMPORTO&quot; NUMBER(15,3),\r\n    &quot;OPI_NOME_FILE&quot; VARCHAR2(100),\r\n    &quot;OPI_ORDINANTE&quot; VARCHAR2(100)\r\n);\r\n\r\nALTER TABLE opiowner.OPI_CONFLUENZA_DATI\r\nADD CONSTRAINT OPI_CONFLUENZA_DATI_PK PRIMARY KEY (&quot;OPI_TIPOLOGIADISPOSIZIONE&quot;, &quot;OPI_DATADISPOSIZIONE&quot;, &quot;OPI_ID_DISPOSIZIONE&quot;);\r\n```\r\n\r\nAs you may guess I need the &#39;opiowner&#39; user to be present in the database. In particular in the first instance of the Oracle container: `ORACLE_OPIOWNER` firstly.\r\n\r\n**Question:** How can I create &#39;opiowner&#39; user in a Oracle Container instance?\r\n\r\nI thought methods `withUsername` and `withPassword` would do the trick, but they do not...\r\n\r\nSo as you can see with method `withEnv` I tried to override environment variables of the Docker image, but again no way...\r\n\r\nHow to fix this issue?","title":"Oracle Test Container throwing SQLSyntaxErrorException: ORA-01918: user does not exist","body":"<p>I am new to <strong>Oracle Container</strong> and I'm having a test container to open 2 database connections since I have 2 datasource in my spring boot application.</p>\n<p>This is the abstract class where I create Oracle container instances:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\npublic class AbstractContanierBaseTest {\n\n    static final OracleContainer ORACLE_OPIOWNER_CONTANINER;\n    static final OracleContainer ORACLE_FIRMAOWNER_CONTANINER;\n\n    static {\n        ORACLE_OPIOWNER_CONTANINER = new OracleContainer(&quot;gvenzl/oracle-xe:21-slim&quot;);\n        ORACLE_OPIOWNER_CONTANINER\n                .withUsername(&quot;opiowner&quot;)\n                .withPassword(&quot;password&quot;)\n                .withDatabaseName(&quot;OPIOWNER&quot;)\n                .withExposedPorts(1521)\n                .withLogConsumer(new Slf4jLogConsumer(log))\n                .withEnv(&quot;ORACLE_DATABASE&quot;, &quot;OPIOWNER&quot;)\n                .withEnv(&quot;ORACLE_PASSWORD&quot;, &quot;password&quot;)\n                .withEnv(&quot;APP_USER&quot;, &quot;opiowner&quot;)\n                .withEnv(&quot;APP_USER_PASSWORD&quot;, &quot;password&quot;)\n                .usingSid();\n        ORACLE_OPIOWNER_CONTANINER.start();\n\n        System.setProperty(&quot;spring.datasource.driver-class-name&quot;, ORACLE_OPIOWNER_CONTANINER.getDriverClassName());\n        System.setProperty(&quot;spring.datasource.url&quot;, ORACLE_OPIOWNER_CONTANINER.getJdbcUrl());\n        System.setProperty(&quot;spring.datasource.username&quot;, ORACLE_OPIOWNER_CONTANINER.getUsername());\n        System.setProperty(&quot;spring.datasource.password&quot;, ORACLE_OPIOWNER_CONTANINER.getPassword());\n\n        ORACLE_FIRMAOWNER_CONTANINER = new OracleContainer(&quot;gvenzl/oracle-xe:11-slim&quot;);\n        ORACLE_FIRMAOWNER_CONTANINER\n                .withUsername(&quot;firmaowner&quot;)\n                .withPassword(&quot;password&quot;)\n                .withDatabaseName(&quot;FIRMAOWNER&quot;)\n                .withLogConsumer(new Slf4jLogConsumer(log))\n                .withEnv(&quot;ORACLE_PASSWORD&quot;, &quot;password&quot;)\n                .withEnv(&quot;APP_USER&quot;, &quot;firmaowner&quot;)\n                .withEnv(&quot;APP_USER_PASSWORD&quot;, &quot;password&quot;)\n                .usingSid();\n        ;\n        ORACLE_FIRMAOWNER_CONTANINER.start();\n\n        System.setProperty(&quot;spring.second-datasource.url&quot;, ORACLE_FIRMAOWNER_CONTANINER.getJdbcUrl());\n        System.setProperty(&quot;spring.second-datasource.username&quot;, ORACLE_FIRMAOWNER_CONTANINER.getUsername());\n        System.setProperty(&quot;spring.second-datasource.password&quot;, ORACLE_FIRMAOWNER_CONTANINER.getPassword());\n\n    }\n</code></pre>\n<p>This class inherited by my integration tests written in junit5.</p>\n<p>When executing junits an Sql script is launched before tests by means of <code>@Sql</code> annotation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Sql(config = @SqlConfig(transactionManager = &quot;opiownerTransactionManager&quot;), scripts = {&quot;classpath:scripts/ddl/Recall_create_table_opiConfluenzaDati.sql&quot;, &quot;classpath:scripts/dml/Recall_opiConfluenzaDati_script.sql&quot;})\n</code></pre>\n<p>The script is executed properly, but I receive an oracle <code>SqlSyntaxException</code> as per Question title.</p>\n<p>This is my create table script:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE opiowner.OPI_CONFLUENZA_DATI\n(\n    &quot;OPI_ANNO_EMISSIONE_TITOLO&quot; NUMBER(4,0),\n    &quot;OPI_TIPOLOGIADISPOSIZIONE&quot; VARCHAR2(11),\n    &quot;OPI_DATADISPOSIZIONE&quot; DATE,\n    &quot;OPI_ID_DISPOSIZIONE&quot; NUMBER(10,0) NOT NULL,\n    &quot;OPI_NUM_TITOLO&quot; NUMBER(9,0),\n    &quot;OPI_PROG_QUOTA&quot; NUMBER(15,0),\n    &quot;OPI_TIPO_COD_BENEF&quot; VARCHAR2(2),\n    &quot;OPI_CODICE_BENEF&quot; VARCHAR2(16),\n    &quot;OPI_TIPO_RECORD&quot; VARCHAR2(11),\n    &quot;OPI_SPECIE_TITOLO&quot; VARCHAR2(2),\n    &quot;OPI_TIPO_SPESA&quot; VARCHAR2(5),\n    &quot;OPI_COD_ENTE&quot; VARCHAR2(15),\n    &quot;OPI_IMPORTO&quot; NUMBER(15,3),\n    &quot;OPI_NOME_FILE&quot; VARCHAR2(100),\n    &quot;OPI_ORDINANTE&quot; VARCHAR2(100)\n);\n\nALTER TABLE opiowner.OPI_CONFLUENZA_DATI\nADD CONSTRAINT OPI_CONFLUENZA_DATI_PK PRIMARY KEY (&quot;OPI_TIPOLOGIADISPOSIZIONE&quot;, &quot;OPI_DATADISPOSIZIONE&quot;, &quot;OPI_ID_DISPOSIZIONE&quot;);\n</code></pre>\n<p>As you may guess I need the 'opiowner' user to be present in the database. In particular in the first instance of the Oracle container: <code>ORACLE_OPIOWNER</code> firstly.</p>\n<p><strong>Question:</strong> How can I create 'opiowner' user in a Oracle Container instance?</p>\n<p>I thought methods <code>withUsername</code> and <code>withPassword</code> would do the trick, but they do not...</p>\n<p>So as you can see with method <code>withEnv</code> I tried to override environment variables of the Docker image, but again no way...</p>\n<p>How to fix this issue?</p>\n"},{"tags":["java","maven","intellij-idea"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1576497016,"post_id":59354878,"comment_id":104906672,"body_markdown":"The message seemed to be saying that your download does not work ..","body":"The message seemed to be saying that your download does not work .."},{"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"score":1,"creation_date":1576497787,"post_id":59354878,"comment_id":104907068,"body_markdown":"Does Maven command line build work?","body":"Does Maven command line build work?"},{"owner":{"account_id":6931141,"reputation":503,"user_id":5320602,"display_name":"The Sun"},"score":1,"creation_date":1576565598,"post_id":59354878,"comment_id":104930928,"body_markdown":"Thank @Andrey! I installed by maven, and then invalidate caches and restart IntelliJ. The plugin worked.","body":"Thank @Andrey! I installed by maven, and then invalidate caches and restart IntelliJ. The plugin worked."}],"answers":[{"tags":[],"owner":{"account_id":6931141,"reputation":503,"user_id":5320602,"display_name":"The Sun"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1576568627,"creation_date":1576566184,"answer_id":59369106,"question_id":59354878,"body_markdown":"I fixed this issue, I do:\r\n\r\n - I installed maven-surefire-plugin version 2.22.2 successfully by\r\n   maven command line: mvn install. It downloaded the plugin but\r\n   IntelliJ still has the error.  \r\n - And then I tried to invalidate caches and restart IntelliJ, it\r\n   worked.\r\n\r\nThanks @Andrey for the great suggestion!","title":"How to fix error not found plugin maven-surefire-plugin &gt;= 2.20 on IntelliJ","body":"<p>I fixed this issue, I do:</p>\n\n<ul>\n<li>I installed maven-surefire-plugin version 2.22.2 successfully by\nmaven command line: mvn install. It downloaded the plugin but\nIntelliJ still has the error.  </li>\n<li>And then I tried to invalidate caches and restart IntelliJ, it\nworked.</li>\n</ul>\n\n<p>Thanks @Andrey for the great suggestion!</p>\n"},{"tags":[],"owner":{"account_id":10317284,"reputation":518,"user_id":10130045,"display_name":"Daniel Bentes"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646395069,"creation_date":1646395069,"answer_id":71351071,"question_id":59354878,"body_markdown":"my solution was to add the dependency, but to stay organized, I added it as test scope\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.22.2&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;","title":"How to fix error not found plugin maven-surefire-plugin &gt;= 2.20 on IntelliJ","body":"<p>my solution was to add the dependency, but to stay organized, I added it as test scope</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.22.2&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695635285,"post_id":77149296,"comment_id":136045900,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77149296/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":22355702,"reputation":1,"user_id":19256703,"display_name":"Vladimir Petrovsky"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695291264,"creation_date":1695291264,"answer_id":77149296,"question_id":59354878,"body_markdown":"I tried to add dependency org.apache.maven.plugins and it works.","title":"How to fix error not found plugin maven-surefire-plugin &gt;= 2.20 on IntelliJ","body":"<p>I tried to add dependency org.apache.maven.plugins and it works.</p>\n"}],"owner":{"account_id":6931141,"reputation":503,"user_id":5320602,"display_name":"The Sun"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28267,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":59369106,"answer_count":3,"score":18,"last_activity_date":1695291264,"creation_date":1576492638,"question_id":59354878,"body_markdown":"I tried to migrate to java 11. But when I change the version of plugin maven-surefire-plugin to 2.22.2 that supports java 11, maven or IntelliJ can not find it:\r\n\r\n![enter image description here][1] \r\n\r\n\r\nI tried with other versions &gt;= 2.20, but had same error. \r\nI tried to fix it:\r\n\r\n 1. Firstly, invalidate caches and restart IntelliJ, then reimport maven. But still error.\r\n 2. I deleted all directories in ~/.m2/repository/org/apache/maven/plugins, and then reimport maven. But maven imported plugin maven-surefire-plugin version 2.19.1 automatically, not imported version 2.22.2 (:\r\n\r\n![enter image description here][2]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/H0Yrx.png\r\n  [2]: https://i.stack.imgur.com/n0Pik.png\r\n\r\n * Update: I installed maven-surefire-plugin version 2.22.2 successfully by maven command line: **mvn install**. It downloaded the plugin but IntelliJ still has the error. I tried to invalidate caches and restart IntelliJ, it worked.\r\n\r\nThanks @Andrey for the great suggestion!","title":"How to fix error not found plugin maven-surefire-plugin &gt;= 2.20 on IntelliJ","body":"<p>I tried to migrate to java 11. But when I change the version of plugin maven-surefire-plugin to 2.22.2 that supports java 11, maven or IntelliJ can not find it:</p>\n\n<p><img src=\"https://i.stack.imgur.com/H0Yrx.png\" alt=\"enter image description here\"> </p>\n\n<p>I tried with other versions >= 2.20, but had same error. \nI tried to fix it:</p>\n\n<ol>\n<li>Firstly, invalidate caches and restart IntelliJ, then reimport maven. But still error.</li>\n<li>I deleted all directories in ~/.m2/repository/org/apache/maven/plugins, and then reimport maven. But maven imported plugin maven-surefire-plugin version 2.19.1 automatically, not imported version 2.22.2 (:</li>\n</ol>\n\n<p><img src=\"https://i.stack.imgur.com/n0Pik.png\" alt=\"enter image description here\"></p>\n\n<ul>\n<li>Update: I installed maven-surefire-plugin version 2.22.2 successfully by maven command line: <strong>mvn install</strong>. It downloaded the plugin but IntelliJ still has the error. I tried to invalidate caches and restart IntelliJ, it worked.</li>\n</ul>\n\n<p>Thanks @Andrey for the great suggestion!</p>\n"},{"tags":["java","realm","realm-list"],"answers":[{"tags":[],"owner":{"account_id":8445215,"reputation":11578,"user_id":6336139,"display_name":"T. Claverie"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1463395304,"creation_date":1463395304,"answer_id":37251985,"question_id":37250987,"body_markdown":"RealmResults&amp;lt;E&amp;gt; implements the Iterable&amp;lt;E&amp;gt; interface, so you can iterate with:\r\n\r\n    for (E e : realmResults) {\r\n        // Do stuff\r\n    }\r\n\r\nIf this does not answer the question, then please precise it and add a sample of code.","title":"How to convert RealmResults&lt;Model&gt; to ArrayList&lt;Model&gt;?","body":"<p>RealmResults&lt;E&gt; implements the Iterable&lt;E&gt; interface, so you can iterate with:</p>\n\n<pre><code>for (E e : realmResults) {\n    // Do stuff\n}\n</code></pre>\n\n<p>If this does not answer the question, then please precise it and add a sample of code.</p>\n"},{"comments":[{"owner":{"account_id":2484267,"reputation":3870,"user_id":2163045,"accept_rate":53,"display_name":"murt"},"score":2,"creation_date":1496927918,"post_id":41286106,"comment_id":75871024,"body_markdown":"You can use advanced technique since Java 1.7\n`try(Realm mRealm = Realm.getDefaultInstance()){ ... do the job...}catch(Exception e){Log.e(e)}` with this syntax at the end realm.close is invoked by itself - you have to call it explicity.","body":"You can use advanced technique since Java 1.7 <code>try(Realm mRealm = Realm.getDefaultInstance()){ ... do the job...}catch(Exception e){Log.e(e)}</code> with this syntax at the end realm.close is invoked by itself - you have to call it explicity."}],"tags":[],"owner":{"account_id":6679130,"reputation":553,"user_id":5152885,"display_name":"fierce_bunny"},"comment_count":1,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1482419155,"creation_date":1482419155,"answer_id":41286106,"question_id":37250987,"body_markdown":"All fetches are lazy in Realm, and the data is never copied. So if you want to get current data from RealmResults, you must call realm.copyFromRealm(results).\r\n\r\n    public List&lt;Model&gt; getModelList() {\r\n        List&lt;Model&gt; list = new ArrayList&lt;&gt;();\r\n        Realm realm;\r\n        try {\r\n            realm = Realm.getDefaultInstance();\r\n            RealmResults&lt;Model&gt; results = realm\r\n                    .where(Model.class)\r\n                    .findAll();\r\n            list.addAll(realm.copyFromRealm(results));\r\n        } finally {\r\n            if (realm != null) {\r\n                realm.close();\r\n            }\r\n        }\r\n        return list;\r\n    }\r\n    ","title":"How to convert RealmResults&lt;Model&gt; to ArrayList&lt;Model&gt;?","body":"<p>All fetches are lazy in Realm, and the data is never copied. So if you want to get current data from RealmResults, you must call realm.copyFromRealm(results).</p>\n\n<pre><code>public List&lt;Model&gt; getModelList() {\n    List&lt;Model&gt; list = new ArrayList&lt;&gt;();\n    Realm realm;\n    try {\n        realm = Realm.getDefaultInstance();\n        RealmResults&lt;Model&gt; results = realm\n                .where(Model.class)\n                .findAll();\n        list.addAll(realm.copyFromRealm(results));\n    } finally {\n        if (realm != null) {\n            realm.close();\n        }\n    }\n    return list;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21006588,"reputation":1,"user_id":15436243,"display_name":"Terio dev"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1677871466,"creation_date":1677871466,"answer_id":75631130,"question_id":37250987,"body_markdown":"    Realm realm = Realm.getDefaultInstance();\r\n            realm.where(Object.class)\r\n                    .findAllAsync()\r\n                    .addChangeListener(list -&gt; {\r\n                       List&lt;Object&gt; listObjects = realm.copyFromRealm(list);\r\n                    });","title":"How to convert RealmResults&lt;Model&gt; to ArrayList&lt;Model&gt;?","body":"<pre><code>Realm realm = Realm.getDefaultInstance();\n        realm.where(Object.class)\n                .findAllAsync()\n                .addChangeListener(list -&gt; {\n                   List&lt;Object&gt; listObjects = realm.copyFromRealm(list);\n                });\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1695180907,"post_id":77122080,"comment_id":135988189,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77122080/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":24062299,"reputation":1,"user_id":18039360,"display_name":"Renzo Sampietro"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695290983,"creation_date":1694958443,"answer_id":77122080,"question_id":37250987,"body_markdown":"kotlin version used in my app :\r\n\r\n    /**\r\n     * convert RealmResults&lt;Model&gt; to ArrayList&lt;Model&gt;\r\n     * REFER to [stackoverflow](https://stackoverflow.com/questions/37250987/how-to-convert-realmresultsmodel-to-arraylistmodel)\r\n     * answer of [DH28](https://stackoverflow.com/users/5152885/dh28)\r\n     *\r\n     * @param realm realm\r\n     * @param results RealmResults&lt;Model&gt; to convert\r\n     * @return resultsList List&lt;Model&gt; converted\r\n    */\r\n    fun getResultsList(\r\n        realm: Realm,\r\n        results: RealmResults&lt;Model&gt;?\r\n    ): MutableList&lt;Model&gt; {\r\n        val resultsList: MutableList&lt;Model&gt; = ArrayList()\r\n        resultsList.addAll(realm.copyFromRealm(results!!))\r\n        return resultsList\r\n    }\r\n\r\n\r\n\r\nsee also [www.mongodb.com][1] method \r\n\r\n    copyFromRealm(Iterable&lt;E&gt; realmObjects)\r\n\r\n    \r\n\r\n\r\n\r\n  [1]: https://www.mongodb.com/docs/realm-sdks/java/10.0.1/io/realm/Realm.html","title":"How to convert RealmResults&lt;Model&gt; to ArrayList&lt;Model&gt;?","body":"<p>kotlin version used in my app :</p>\n<pre><code>/**\n * convert RealmResults&lt;Model&gt; to ArrayList&lt;Model&gt;\n * REFER to [stackoverflow](https://stackoverflow.com/questions/37250987/how-to-convert-realmresultsmodel-to-arraylistmodel)\n * answer of [DH28](https://stackoverflow.com/users/5152885/dh28)\n *\n * @param realm realm\n * @param results RealmResults&lt;Model&gt; to convert\n * @return resultsList List&lt;Model&gt; converted\n*/\nfun getResultsList(\n    realm: Realm,\n    results: RealmResults&lt;Model&gt;?\n): MutableList&lt;Model&gt; {\n    val resultsList: MutableList&lt;Model&gt; = ArrayList()\n    resultsList.addAll(realm.copyFromRealm(results!!))\n    return resultsList\n}\n</code></pre>\n<p>see also <a href=\"https://www.mongodb.com/docs/realm-sdks/java/10.0.1/io/realm/Realm.html\" rel=\"nofollow noreferrer\">www.mongodb.com</a> method</p>\n<pre><code>copyFromRealm(Iterable&lt;E&gt; realmObjects)\n</code></pre>\n"}],"owner":{"account_id":6652231,"reputation":5354,"user_id":5133852,"accept_rate":82,"display_name":"Vassily"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13066,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":41286106,"answer_count":4,"score":8,"last_activity_date":1695290983,"creation_date":1463391986,"question_id":37250987,"body_markdown":"When I use realm.where(Model.class) it returns RealmResults&lt;Model&gt; and list item&#39;s fields are empty. How to convert queryset to readable ArrayList or iterate over RealmResults to get actual data from objects in DB?","title":"How to convert RealmResults&lt;Model&gt; to ArrayList&lt;Model&gt;?","body":"<p>When I use realm.where(Model.class) it returns RealmResults and list item's fields are empty. How to convert queryset to readable ArrayList or iterate over RealmResults to get actual data from objects in DB?</p>\n"},{"tags":["java","sql","apache-camel"],"owner":{"account_id":24503238,"reputation":51,"user_id":18418577,"display_name":"Beerus239"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695290670,"creation_date":1695290670,"question_id":77149215,"body_markdown":"I&#39;m currently building a Spring Boot application which runs multiple select queries. From my understanding the output of a select query is in the form of a map. I want to make the output viewable from my console, but it&#39;s not working. Not sure if something is going wrong in my route or that my Map is not defined correctly. The last run it gave me the following exception : cannot be cast to class java.util.HashMap (org.springframework.util.LinkedCaseInsensitiveMap is in unnamed module of loader\r\n\r\nThis is the route:\r\n\r\n        @Override\r\n        public void configure() throws Exception {\r\n            from(&quot;timer:Timer?period=60000&quot;)\r\n                    //.setHeader(&quot;CamelSqlQuery&quot;, constant(selectBridgeQuery))\r\n                    .routeId(&quot;test route&quot;)\r\n                    .to(&quot;sql:select * from basetimestamps?dataSource=#dataSource&quot;)\r\n                    .bean(databaseStorage, &quot;monitor&quot;)\r\n                    .to(&quot;log:result&quot;)\r\n                    .log(LoggingLevel.INFO,&quot;Output: ${body}&quot;);\r\n        }\r\n    }\r\n\r\nAnd this is the map:\r\n\r\n    @Component\r\n    public class DatabaseStorage {\r\n    \r\n        public void monitor(Exchange exchange) throws Exception {\r\n            List&lt;HashMap&gt; out = (ArrayList&lt;HashMap&gt;) exchange.getIn().getBody();\r\n    \r\n            try{\r\n                for(HashMap outContent:out){\r\n                    String message = outContent.get(&quot;output_obj&quot;).toString();\r\n    \r\n                    System.out.println(message);\r\n                }\r\n            }catch(Exception e){\r\n                System.out.println(e);\r\n            }\r\n        }\r\n    }","title":"How to view this sql select query with a map with Apache Camel?","body":"<p>I'm currently building a Spring Boot application which runs multiple select queries. From my understanding the output of a select query is in the form of a map. I want to make the output viewable from my console, but it's not working. Not sure if something is going wrong in my route or that my Map is not defined correctly. The last run it gave me the following exception : cannot be cast to class java.util.HashMap (org.springframework.util.LinkedCaseInsensitiveMap is in unnamed module of loader</p>\n<p>This is the route:</p>\n<pre><code>    @Override\n    public void configure() throws Exception {\n        from(&quot;timer:Timer?period=60000&quot;)\n                //.setHeader(&quot;CamelSqlQuery&quot;, constant(selectBridgeQuery))\n                .routeId(&quot;test route&quot;)\n                .to(&quot;sql:select * from basetimestamps?dataSource=#dataSource&quot;)\n                .bean(databaseStorage, &quot;monitor&quot;)\n                .to(&quot;log:result&quot;)\n                .log(LoggingLevel.INFO,&quot;Output: ${body}&quot;);\n    }\n}\n</code></pre>\n<p>And this is the map:</p>\n<pre><code>@Component\npublic class DatabaseStorage {\n\n    public void monitor(Exchange exchange) throws Exception {\n        List&lt;HashMap&gt; out = (ArrayList&lt;HashMap&gt;) exchange.getIn().getBody();\n\n        try{\n            for(HashMap outContent:out){\n                String message = outContent.get(&quot;output_obj&quot;).toString();\n\n                System.out.println(message);\n            }\n        }catch(Exception e){\n            System.out.println(e);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","tomcat"],"comments":[{"owner":{"account_id":28330620,"reputation":58,"user_id":21664963,"display_name":"bdev"},"score":0,"creation_date":1695320885,"post_id":77149191,"comment_id":136012352,"body_markdown":"Can you try defining a Servlet Filter and catch the exception?","body":"Can you try defining a Servlet Filter and catch the exception?"}],"owner":{"account_id":22887919,"reputation":1,"user_id":17028498,"display_name":"Kairos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695290665,"creation_date":1695290416,"question_id":77149191,"body_markdown":"I am getting http 400 error when the header exceeds the limit, I want to change it as http 431. Is there any way to modify the response? \r\n\r\n```INFO: Error parsing HTTP request header\r\nNote: further occurrences of HTTP header parsing errors will be logged at DEBUG level.\r\njava.lang. IllegalArgumentException: Request header is too large\r\nat org.apache.coyote.http11.InternalInputBuffer.fill(InternalInputBuffer.java:512)\r\nat org.apache.coyote.http11.InternalInputBuffer.fill(InternalInputBuffer.java:501)\r\nat org.apache.coyote.http11.InternalInputBuffer.parseRequestLine(InternalInputBuffer.java:171)\r\nat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:996)\r\nat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:623)\r\nat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:318)\r\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\r\nat java.util.concurrent.ThreadPoolExecutorSWorker.run(ThreadPoolExecutor.java:603)\r\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\nat java. lang. Thread. run(Thread. java: 722```\r\n\r\n\r\nhow to change the response status code as http 431. Is there any way to modify the response status code and body? ","title":"How to customise the error response from spring-boot app for Error parsing HTTP request header","body":"<p>I am getting http 400 error when the header exceeds the limit, I want to change it as http 431. Is there any way to modify the response?</p>\n<pre><code>Note: further occurrences of HTTP header parsing errors will be logged at DEBUG level.\njava.lang. IllegalArgumentException: Request header is too large\nat org.apache.coyote.http11.InternalInputBuffer.fill(InternalInputBuffer.java:512)\nat org.apache.coyote.http11.InternalInputBuffer.fill(InternalInputBuffer.java:501)\nat org.apache.coyote.http11.InternalInputBuffer.parseRequestLine(InternalInputBuffer.java:171)\nat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:996)\nat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:623)\nat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:318)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\nat java.util.concurrent.ThreadPoolExecutorSWorker.run(ThreadPoolExecutor.java:603)\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\nat java. lang. Thread. run(Thread. java: 722```\n\n\nhow to change the response status code as http 431. Is there any way to modify the response status code and body? \n</code></pre>\n"},{"tags":["java","selenium-webdriver","automated-tests","selenium-firefoxdriver"],"answers":[{"comments":[{"owner":{"account_id":29480367,"reputation":11,"user_id":22591289,"display_name":"WarzoneSpecialist"},"score":0,"creation_date":1695296519,"post_id":77149209,"comment_id":136007134,"body_markdown":"Thank you for your answer. Unfortunately, the issue persist even with this change.","body":"Thank you for your answer. Unfortunately, the issue persist even with this change."}],"tags":[],"owner":{"account_id":25717722,"reputation":10119,"user_id":19475185,"display_name":"Barry the Platipus"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695290610,"creation_date":1695290610,"answer_id":77149209,"question_id":77148082,"body_markdown":"You should also add the following prefs:\r\n\r\n    ffop.addPreference(&quot;browser.helperApps.neverAsk.saveToDisk&quot;, &quot;application/pdf, application/zip, application/octet-stream,application/, text/octet-stream, application/x-gzip, application/x-tar, application/xml, text/plain&quot;);\r\n    ffop.addPreference(&quot;browser.download.folderList&quot;, 2);\r\n    ffop.addPreference(&quot;browser.helperApps.alwaysAsk.force&quot;, false);\r\n    ffop.addPreference(&quot;browser.download.manager.showWhenStarting&quot;, false);","title":"Downloading PDF in Selenium 4 Firefox opens a new tab","body":"<p>You should also add the following prefs:</p>\n<pre><code>ffop.addPreference(&quot;browser.helperApps.neverAsk.saveToDisk&quot;, &quot;application/pdf, application/zip, application/octet-stream,application/, text/octet-stream, application/x-gzip, application/x-tar, application/xml, text/plain&quot;);\nffop.addPreference(&quot;browser.download.folderList&quot;, 2);\nffop.addPreference(&quot;browser.helperApps.alwaysAsk.force&quot;, false);\nffop.addPreference(&quot;browser.download.manager.showWhenStarting&quot;, false);\n</code></pre>\n"}],"owner":{"account_id":29480367,"reputation":11,"user_id":22591289,"display_name":"WarzoneSpecialist"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695290610,"creation_date":1695281626,"question_id":77148082,"body_markdown":"I am trying to change the version of a Selenium Project from 3 to 4. The issue that I am facing is that after downloading a PDF using Firefox, the PDF is opened in a new tab, and I do not wish for this.\r\nI have set the capabilities that were supposed to handle this, but it still does not work.\r\nThe language is Java, I am using Selenium 4.12.0, firefox version is 116.\r\n```\r\nFirefox ffop = new FirefoxOptions();\r\nffop.addPreference(&quot;browser.helperApps.neverAsk.saveToDisk&quot;, &quot;application/pdf&quot;);\r\nffop.addPreference(&quot;pdfjs.disabled&quot;, true);\r\nffop.addPreference(&quot;browser.download.panel.shown&quot;, false);\r\nffop.addPreference(&quot;useAutomationExtension&quot;, false);\r\nffop.addPreference( &quot;plugins.always_open_pdf_externally&quot;, false);\r\nffop.addPreference(&quot;pdfjs.firstRun&quot;, false);\r\nffop.addPreference(&quot;plugin.disable_full_page_plugin_for_types&quot;, &quot;application/pdf,application/vnd.adobe.xfdf,application/vnd.fdf,application/vnd.adobe.xdp+xml&quot;);\r\nffop.addPreference(&quot;plugin.scan.Acrobat&quot;, &quot;99.0&quot;);\r\nffop.addPreference(&quot;plugin.scan.plid.all&quot;, false);\r\n```\r\nI am passing the options as this: \r\n```\r\nFirefoxOptions firefoxOptions = new FirefoxOptions();\r\nstatic Map&lt;String, Object&gt; capabilities = new HashMap&lt;&gt;();\r\ncapabilities.put(&quot;moz:firefoxOptions&quot;, ffop);\r\nfirefoxOptions.setCapability(&quot;cloud:options&quot;,capabilities);\r\n\r\nremoteWebDriver = new RemoteWebDriver(url, firefoxOptions);\r\n```\r\nAny help is welcome. \r\nThank you. \r\n","title":"Downloading PDF in Selenium 4 Firefox opens a new tab","body":"<p>I am trying to change the version of a Selenium Project from 3 to 4. The issue that I am facing is that after downloading a PDF using Firefox, the PDF is opened in a new tab, and I do not wish for this.\nI have set the capabilities that were supposed to handle this, but it still does not work.\nThe language is Java, I am using Selenium 4.12.0, firefox version is 116.</p>\n<pre><code>Firefox ffop = new FirefoxOptions();\nffop.addPreference(&quot;browser.helperApps.neverAsk.saveToDisk&quot;, &quot;application/pdf&quot;);\nffop.addPreference(&quot;pdfjs.disabled&quot;, true);\nffop.addPreference(&quot;browser.download.panel.shown&quot;, false);\nffop.addPreference(&quot;useAutomationExtension&quot;, false);\nffop.addPreference( &quot;plugins.always_open_pdf_externally&quot;, false);\nffop.addPreference(&quot;pdfjs.firstRun&quot;, false);\nffop.addPreference(&quot;plugin.disable_full_page_plugin_for_types&quot;, &quot;application/pdf,application/vnd.adobe.xfdf,application/vnd.fdf,application/vnd.adobe.xdp+xml&quot;);\nffop.addPreference(&quot;plugin.scan.Acrobat&quot;, &quot;99.0&quot;);\nffop.addPreference(&quot;plugin.scan.plid.all&quot;, false);\n</code></pre>\n<p>I am passing the options as this:</p>\n<pre><code>FirefoxOptions firefoxOptions = new FirefoxOptions();\nstatic Map&lt;String, Object&gt; capabilities = new HashMap&lt;&gt;();\ncapabilities.put(&quot;moz:firefoxOptions&quot;, ffop);\nfirefoxOptions.setCapability(&quot;cloud:options&quot;,capabilities);\n\nremoteWebDriver = new RemoteWebDriver(url, firefoxOptions);\n</code></pre>\n<p>Any help is welcome.\nThank you.</p>\n"},{"tags":["java","spring","mockmvc"],"answers":[{"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1695383781,"post_id":77149195,"comment_id":136020725,"body_markdown":"[*Temporary policy: Generative AI (e.g., ChatGPT) is banned*](https://meta.stackoverflow.com/questions/421831/temporary-policy-generative-ai-e-g-chatgpt-is-banned?cb=1)","body":"<a href=\"https://meta.stackoverflow.com/questions/421831/temporary-policy-generative-ai-e-g-chatgpt-is-banned?cb=1\"><i>Temporary policy: Generative AI (e.g., ChatGPT) is banned</i></a>"}],"tags":[],"owner":{"account_id":12241772,"reputation":129,"user_id":8934639,"display_name":"Chedva"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695290455,"creation_date":1695290455,"answer_id":77149195,"question_id":77149101,"body_markdown":"Well ChatGPT won...\r\nthis works:\r\n```\r\n@Test\r\npublic void test() throws Exception {\r\n    final MyRequest request = MyRequest.builder()\r\n            .field(&quot;bla&quot;)\r\n            .build();\r\n\r\n    var res = mockMvc.perform(post(&quot;my-uri&quot;)\r\n            .contentType(MediaType.APPLICATION_JSON)\r\n            .content(getObjectMapper().writeValueAsString(request)))\r\n            .andExpectAll(status().isOk(),\r\n                    header().exists(HttpHeaders.CONTENT_DISPOSITION),\r\n                    header().string(HttpHeaders.CONTENT_TYPE, &quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;))\r\n            .andReturn()\r\n            .getResponse();\r\n    \r\n    System.out.println(res);\r\n    assertTrue(res.getHeader(HttpHeaders.CONTENT_DISPOSITION).matches(&quot;prefix(.*?)suffix&quot;));\r\n    }\r\n```","title":"How to check header regex in response with Spring MockMvc","body":"<p>Well ChatGPT won...\nthis works:</p>\n<pre><code>@Test\npublic void test() throws Exception {\n    final MyRequest request = MyRequest.builder()\n            .field(&quot;bla&quot;)\n            .build();\n\n    var res = mockMvc.perform(post(&quot;my-uri&quot;)\n            .contentType(MediaType.APPLICATION_JSON)\n            .content(getObjectMapper().writeValueAsString(request)))\n            .andExpectAll(status().isOk(),\n                    header().exists(HttpHeaders.CONTENT_DISPOSITION),\n                    header().string(HttpHeaders.CONTENT_TYPE, &quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;))\n            .andReturn()\n            .getResponse();\n    \n    System.out.println(res);\n    assertTrue(res.getHeader(HttpHeaders.CONTENT_DISPOSITION).matches(&quot;prefix(.*?)suffix&quot;));\n    }\n</code></pre>\n"}],"owner":{"account_id":12241772,"reputation":129,"user_id":8934639,"display_name":"Chedva"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695290455,"creation_date":1695289853,"question_id":77149101,"body_markdown":"I have the an API that should return a response containing the header `HttpHeaders.CONTENT_DISPOSITION` with a value that should match the regex `&quot;prefix(.*?)suffix&quot;`.\r\n\r\nMy test:\r\n```\r\n@Test\r\npublic void test() throws Exception {\r\n    final MyRequest request = MyRequest.builder()\r\n            .field(&quot;bla&quot;)\r\n            .build();\r\n\r\n    var res = mockMvc.perform(post(&quot;my-uri&quot;)\r\n            .contentType(MediaType.APPLICATION_JSON)\r\n            .content(getObjectMapper().writeValueAsString(request)))\r\n            .andExpectAll(status().isOk(),\r\n                    header().string(HttpHeaders.CONTENT_DISPOSITION, matches(&quot;prefix(.*?)suffix&quot;)),\r\n                    header().string(HttpHeaders.CONTENT_TYPE, &quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;))\r\n            .andReturn()\r\n            .getResponse();\r\n        System.out.println(res);\r\n    }\r\n```\r\nWhen running it I&#39;m getting this error: `You cannot use argument matchers outside of verification or stubbing.`\r\n\r\nAny idea how can I check the header CONTENT_DISPOSITION?","title":"How to check header regex in response with Spring MockMvc","body":"<p>I have the an API that should return a response containing the header <code>HttpHeaders.CONTENT_DISPOSITION</code> with a value that should match the regex <code>&quot;prefix(.*?)suffix&quot;</code>.</p>\n<p>My test:</p>\n<pre><code>@Test\npublic void test() throws Exception {\n    final MyRequest request = MyRequest.builder()\n            .field(&quot;bla&quot;)\n            .build();\n\n    var res = mockMvc.perform(post(&quot;my-uri&quot;)\n            .contentType(MediaType.APPLICATION_JSON)\n            .content(getObjectMapper().writeValueAsString(request)))\n            .andExpectAll(status().isOk(),\n                    header().string(HttpHeaders.CONTENT_DISPOSITION, matches(&quot;prefix(.*?)suffix&quot;)),\n                    header().string(HttpHeaders.CONTENT_TYPE, &quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;))\n            .andReturn()\n            .getResponse();\n        System.out.println(res);\n    }\n</code></pre>\n<p>When running it I'm getting this error: <code>You cannot use argument matchers outside of verification or stubbing.</code></p>\n<p>Any idea how can I check the header CONTENT_DISPOSITION?</p>\n"},{"tags":["java","java-native-interface","free"],"comments":[{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1695290840,"post_id":77148675,"comment_id":136006063,"body_markdown":"By `String`, do you mean `java.lang.String` or not?","body":"By <code>String</code>, do you mean <code>java.lang.String</code> or not?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1695291060,"post_id":77148675,"comment_id":136006111,"body_markdown":"Impossible to anwserwithout seeing the JNI code concerned.","body":"Impossible to anwserwithout seeing the JNI code concerned."},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1695301119,"post_id":77148675,"comment_id":136008122,"body_markdown":"Unless the native methods go out of their way to do the non-obvious thing, it all results with the fields holding references to JVM objects, just as they would in a normal java class.","body":"Unless the native methods go out of their way to do the non-obvious thing, it all results with the fields holding references to JVM objects, just as they would in a normal java class."}],"answers":[{"tags":[],"owner":{"account_id":7557680,"reputation":2844,"user_id":5736633,"accept_rate":71,"display_name":"vatbub"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695290294,"creation_date":1695290294,"answer_id":77149163,"question_id":77148675,"body_markdown":"In my experience, the Java-wrapper object for the native object is garbage-collected as usual, however native code must do its own memory management. Let&#39;s use the OpenCV library as an example, because I&#39;m familiar with it:\r\n\r\nOpenCV has `Mat` objects which usually represents an image loaded into memory (but that is irrelevant for this example). A `Mat` objects holds its image data in native memory, but it also has a wrapper object in Java-memory so-that Java code can interact with it. The Java-wrapper is garbage-collected as soon as it goes out of scope, but for the native memory to be freed, the programmer needs to explicitly call `mat.release()`. This, however, introduces all manual memory management bugs back into Java:\r\n\r\n- Memory leak if you forget to call `mat.release()`\r\n- Use-after-free if you call `mat.release() and then attempt to do something with it again\r\n\r\nSo, with my limited experience, I would say that the native code needs to offer a method that frees the native memory (c.f. `Mat.release()`) and Java code needs to call that method explicitly.","title":"Do java programmers need to deallocate memory for jni object","body":"<p>In my experience, the Java-wrapper object for the native object is garbage-collected as usual, however native code must do its own memory management. Let's use the OpenCV library as an example, because I'm familiar with it:</p>\n<p>OpenCV has <code>Mat</code> objects which usually represents an image loaded into memory (but that is irrelevant for this example). A <code>Mat</code> objects holds its image data in native memory, but it also has a wrapper object in Java-memory so-that Java code can interact with it. The Java-wrapper is garbage-collected as soon as it goes out of scope, but for the native memory to be freed, the programmer needs to explicitly call <code>mat.release()</code>. This, however, introduces all manual memory management bugs back into Java:</p>\n<ul>\n<li>Memory leak if you forget to call <code>mat.release()</code></li>\n<li>Use-after-free if you call `mat.release() and then attempt to do something with it again</li>\n</ul>\n<p>So, with my limited experience, I would say that the native code needs to offer a method that frees the native memory (c.f. <code>Mat.release()</code>) and Java code needs to call that method explicitly.</p>\n"}],"owner":{"account_id":319461,"reputation":7386,"user_id":637242,"accept_rate":88,"display_name":"Juneyoung Oh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695290294,"creation_date":1695286618,"question_id":77148675,"body_markdown":"There is a class using JNI. Some code like below\r\n\r\n``` java\r\npublic class JniUser {\r\n\tprivate String name;\r\n\tprivate int age;\r\n\tpublic native int getAge();\r\n\tpublic native String getName();\r\n}\r\n```\r\n\r\nIn native code, set name and age fields. As far as I know Garbage collector will collect no referenced java objects. But in even in this case, GC can detect this object is target of GC or not?\r\n\r\nI question about this since String is referenced type but not allocated by VM.\r\n\r\nShould I free memory manually?\r\n\r\nP.S. I know using JNI to implement VO is weird. \r\n","title":"Do java programmers need to deallocate memory for jni object","body":"<p>There is a class using JNI. Some code like below</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class JniUser {\n    private String name;\n    private int age;\n    public native int getAge();\n    public native String getName();\n}\n</code></pre>\n<p>In native code, set name and age fields. As far as I know Garbage collector will collect no referenced java objects. But in even in this case, GC can detect this object is target of GC or not?</p>\n<p>I question about this since String is referenced type but not allocated by VM.</p>\n<p>Should I free memory manually?</p>\n<p>P.S. I know using JNI to implement VO is weird.</p>\n"},{"tags":["java","spring-boot","hibernate","joincolumn"],"owner":{"account_id":19610869,"reputation":39,"user_id":14353401,"display_name":"kunal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695290272,"creation_date":1695289073,"question_id":77149003,"body_markdown":"I have two entities as shown below\r\n\r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    @Table(name = &quot;ice_folder&quot;)\r\n    @AttributeOverride(name = &quot;id&quot;, column = @Column(name = &quot;folder_id&quot;))\r\n    @Audited\r\n    public class Folder extends BaseResourceEntity {\r\n    \r\n      @ManyToOne(fetch = FetchType.LAZY)\r\n      @JoinColumn(name = &quot;parent_folder&quot;)\r\n      private Folder parentFolder;\r\n    }\r\n      \r\n      \r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    @Table(name = &quot;ice_folder&quot;)\r\n    @AttributeOverride(name = &quot;id&quot;, column = @Column(name = &quot;folder_id&quot;))\r\n    public class FolderView extends BaseResourceEntity {\r\n    \r\n      @ManyToOne(fetch = FetchType.LAZY)\r\n      @JoinColumn(name = &quot;parent_folder&quot;, insertable = false, updatable = false)\r\n      private Folder parentFolder;\r\n    }\r\n\r\nwhen I fetch the records by using the FolderView, I&#39;m getting the below infinite recursion error, can anyone tell me how to fix this and fetch the record easily. I can fetch the records only by using the FolderView.\r\n\r\n    `Infinite recursion (StackOverflowError) (through reference chain: org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-\r\n","title":"How to fetch records from entities having join in it","body":"<p>I have two entities as shown below</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@Table(name = &quot;ice_folder&quot;)\n@AttributeOverride(name = &quot;id&quot;, column = @Column(name = &quot;folder_id&quot;))\n@Audited\npublic class Folder extends BaseResourceEntity {\n\n  @ManyToOne(fetch = FetchType.LAZY)\n  @JoinColumn(name = &quot;parent_folder&quot;)\n  private Folder parentFolder;\n}\n  \n  \n@Entity\n@Getter\n@Setter\n@Table(name = &quot;ice_folder&quot;)\n@AttributeOverride(name = &quot;id&quot;, column = @Column(name = &quot;folder_id&quot;))\npublic class FolderView extends BaseResourceEntity {\n\n  @ManyToOne(fetch = FetchType.LAZY)\n  @JoinColumn(name = &quot;parent_folder&quot;, insertable = false, updatable = false)\n  private Folder parentFolder;\n}\n</code></pre>\n<p>when I fetch the records by using the FolderView, I'm getting the below infinite recursion error, can anyone tell me how to fix this and fetch the record easily. I can fetch the records only by using the FolderView.</p>\n<pre><code>`Infinite recursion (StackOverflowError) (through reference chain: org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","rest","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":8884226,"reputation":514,"user_id":6633045,"display_name":"phuongnq1995"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695290250,"creation_date":1695290250,"answer_id":77149148,"question_id":77144359,"body_markdown":"In short, Lazy fetching is work under the transaction, mark your class with `@Transactional`.\r\n","title":"Spring Boot parent child self reference relationship returning the child records as null","body":"<p>In short, Lazy fetching is work under the transaction, mark your class with <code>@Transactional</code>.</p>\n"}],"owner":{"account_id":28242228,"reputation":9,"user_id":21589845,"display_name":"Furqan Ahmed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695290250,"creation_date":1695227180,"question_id":77144359,"body_markdown":"I am working on a Rest Api endpoint using Spring Boot and Spring Data Jpa. The issue I am facing is the child records are coming as null. Following are the codes and the screenshot about the data that I am receiving.\r\n\r\nFirst, the screenshot of the returned data.\r\n[Json returned Data][1]\r\n\r\n\r\nFollowing is my model &quot;Article&quot;\r\n\r\n\t@Entity\r\n    //@JsonInclude(JsonInclude.Include.NON_NULL)\r\n    @JsonIgnoreProperties({&quot;hibernate_lazy_initializer&quot;, &quot;handler&quot;})\r\n    @EqualsAndHashCode(onlyExplicitlyIncluded = true)\r\n    @JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)\r\n    public class Article {\r\n    @Id\r\n\t@Getter\r\n\t@Setter\r\n\t@EqualsAndHashCode.Include\r\n\tprivate Long id;\r\n\t\r\n\t@Getter\r\n\t@Setter\r\n\t@EqualsAndHashCode.Include\r\n\tprivate Long parent_id;\r\n\t\r\n\t@Getter\r\n\t@Setter\t\r\n\t@EqualsAndHashCode.Include\r\n\tprivate String name;\r\n\t\r\n\t@ManyToOne(fetch = FetchType.LAZY)\r\n\t@Getter\r\n\t@Setter\r\n\tprivate Article article;\r\n\t\r\n\t@OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;article&quot;)\r\n\t@JsonProperty(access = JsonProperty.Access.WRITE_ONLY)\r\n\t@Setter\r\n\tprivate Set&lt;Article&gt; subArticles;\r\n\t\r\n\t@JsonIgnore\r\n\tpublic Set&lt;Article&gt; subArticles() {\r\n\t\treturn subArticles;\r\n\t}\r\n    }\r\n\r\nFollowing is my DTO\r\n\r\n    @Data\r\n    @Builder\r\n    //@JsonInclude(JsonInclude.Include.NON_NULL)\r\n    @JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)\r\n    @JsonIgnoreProperties({&quot;hibernate_lazy_initializer&quot;, &quot;handler&quot;})\r\n    public class ArticleDTO {\r\n\r\n\tprivate Long id;\r\n\tprivate String name;\r\n\tprivate Long parent_id;\r\n\tprivate Article article;\r\n\tprivate Set&lt;Article&gt; subArticle;\r\n\t\r\n    }\r\n\r\nFollowing is my Controller:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api/v1/article&quot;)\r\n    public class ArticleController {\r\n\t\r\n\t@Autowired\r\n\tprivate ArticleRepository articleRepository;\r\n\t\r\n\t@GetMapping(&quot;/{id}&quot;)\r\n\tpublic ResponseEntity&lt;ArticleDTO&gt; getAllArticles(@PathVariable(&quot;id&quot;) Long id) {\r\n\t\t\r\n\t\t// here first show simple result/\r\n\t\treturn articleRepository\r\n\t\t\t\t.findById(id)\r\n\t\t\t\t.map(mapToArticleDTO)\r\n\t\t\t\t.map(ResponseEntity::ok)\r\n\t\t\t\t.orElse(ResponseEntity.notFound().build());\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;/{id}/siblings&quot;)\r\n\tpublic ResponseEntity&lt;Set&lt;ArticleDTO&gt;&gt; getAllSiblings(@PathVariable(&quot;id&quot;) Long id) {\r\n\t\treturn articleRepository.findById(id).map(findSubArticles).map(ResponseEntity::ok)\r\n\t\t\t\t.orElse(ResponseEntity.notFound().build());\r\n\t}\r\n\r\n\tprivate Function&lt;Article, ArticleDTO&gt; mapToArticleDTO = a -&gt; ArticleDTO.builder()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.id(a.getId())\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.name(a.getName())\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parent_id(a.getParent_id())\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.build();\r\n\t\r\n\tprivate Function&lt;Article, Set&lt;ArticleDTO&gt;&gt; findSubArticles = article -&gt; article.getArticle().subArticles().stream()\r\n            .map(a -&gt; ArticleDTO.builder().id(a.getId()).name(a.getName()).build()).collect(Collectors.toSet());\r\n    }\r\n\r\nFollowing is my Repository:\r\n\r\n    @Repository\r\n    public interface ArticleRepository extends JpaRepository&lt;Article, Long&gt;{\r\n\r\n    }\r\n\r\nFollowing are my database records screenshot\r\n[Database records][2]\r\n\r\nAny guidance where I am going wrong would be highly appreciated.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EFzOK.png\r\n  [2]: https://i.stack.imgur.com/uaM9P.png","title":"Spring Boot parent child self reference relationship returning the child records as null","body":"<p>I am working on a Rest Api endpoint using Spring Boot and Spring Data Jpa. The issue I am facing is the child records are coming as null. Following are the codes and the screenshot about the data that I am receiving.</p>\n<p>First, the screenshot of the returned data.\n<a href=\"https://i.stack.imgur.com/EFzOK.png\" rel=\"nofollow noreferrer\">Json returned Data</a></p>\n<p>Following is my model &quot;Article&quot;</p>\n<pre><code>@Entity\n//@JsonInclude(JsonInclude.Include.NON_NULL)\n@JsonIgnoreProperties({&quot;hibernate_lazy_initializer&quot;, &quot;handler&quot;})\n@EqualsAndHashCode(onlyExplicitlyIncluded = true)\n@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)\npublic class Article {\n@Id\n@Getter\n@Setter\n@EqualsAndHashCode.Include\nprivate Long id;\n\n@Getter\n@Setter\n@EqualsAndHashCode.Include\nprivate Long parent_id;\n\n@Getter\n@Setter \n@EqualsAndHashCode.Include\nprivate String name;\n\n@ManyToOne(fetch = FetchType.LAZY)\n@Getter\n@Setter\nprivate Article article;\n\n@OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;article&quot;)\n@JsonProperty(access = JsonProperty.Access.WRITE_ONLY)\n@Setter\nprivate Set&lt;Article&gt; subArticles;\n\n@JsonIgnore\npublic Set&lt;Article&gt; subArticles() {\n    return subArticles;\n}\n}\n</code></pre>\n<p>Following is my DTO</p>\n<pre><code>@Data\n@Builder\n//@JsonInclude(JsonInclude.Include.NON_NULL)\n@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)\n@JsonIgnoreProperties({&quot;hibernate_lazy_initializer&quot;, &quot;handler&quot;})\npublic class ArticleDTO {\n\nprivate Long id;\nprivate String name;\nprivate Long parent_id;\nprivate Article article;\nprivate Set&lt;Article&gt; subArticle;\n\n}\n</code></pre>\n<p>Following is my Controller:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/v1/article&quot;)\npublic class ArticleController {\n\n@Autowired\nprivate ArticleRepository articleRepository;\n\n@GetMapping(&quot;/{id}&quot;)\npublic ResponseEntity&lt;ArticleDTO&gt; getAllArticles(@PathVariable(&quot;id&quot;) Long id) {\n    \n    // here first show simple result/\n    return articleRepository\n            .findById(id)\n            .map(mapToArticleDTO)\n            .map(ResponseEntity::ok)\n            .orElse(ResponseEntity.notFound().build());\n}\n\n@GetMapping(&quot;/{id}/siblings&quot;)\npublic ResponseEntity&lt;Set&lt;ArticleDTO&gt;&gt; getAllSiblings(@PathVariable(&quot;id&quot;) Long id) {\n    return articleRepository.findById(id).map(findSubArticles).map(ResponseEntity::ok)\n            .orElse(ResponseEntity.notFound().build());\n}\n\nprivate Function&lt;Article, ArticleDTO&gt; mapToArticleDTO = a -&gt; ArticleDTO.builder()\n                                                        .id(a.getId())\n                                                        .name(a.getName())\n                                                        .parent_id(a.getParent_id())\n                                                        .build();\n\nprivate Function&lt;Article, Set&lt;ArticleDTO&gt;&gt; findSubArticles = article -&gt; article.getArticle().subArticles().stream()\n        .map(a -&gt; ArticleDTO.builder().id(a.getId()).name(a.getName()).build()).collect(Collectors.toSet());\n}\n</code></pre>\n<p>Following is my Repository:</p>\n<pre><code>@Repository\npublic interface ArticleRepository extends JpaRepository&lt;Article, Long&gt;{\n\n}\n</code></pre>\n<p>Following are my database records screenshot\n<a href=\"https://i.stack.imgur.com/uaM9P.png\" rel=\"nofollow noreferrer\">Database records</a></p>\n<p>Any guidance where I am going wrong would be highly appreciated.</p>\n"},{"tags":["java","exception"],"answers":[{"tags":[],"owner":{"account_id":156391,"reputation":9819,"user_id":373653,"display_name":"sjr"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1303888225,"creation_date":1303888225,"answer_id":5800641,"question_id":5800629,"body_markdown":"class `Exception` has constructors that take a `cause` Throwable. You need to call those constructors or provide constructors to your custom exception classes that call these super constructors.","title":"Setting an exception cause in Java","body":"<p>class <code>Exception</code> has constructors that take a <code>cause</code> Throwable. You need to call those constructors or provide constructors to your custom exception classes that call these super constructors.</p>\n"},{"comments":[{"owner":{"account_id":17466472,"reputation":747,"user_id":12663117,"display_name":"Nate T"},"score":0,"creation_date":1623321224,"post_id":5800652,"comment_id":120048604,"body_markdown":"Link is broken.","body":"Link is broken."}],"tags":[],"owner":{"account_id":169521,"reputation":37107,"user_id":395659,"accept_rate":90,"display_name":"CloudyMarble"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1634804141,"creation_date":1303888326,"answer_id":5800652,"question_id":5800629,"body_markdown":"&gt; **getCause** - Returns the cause of this throwable or null if the cause is nonexistent or unknown. (The cause is the throwable that caused this throwable to get thrown.)\r\n\r\nRead the Java documentation: [getCause][1]\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html#getCause()\r\n\r\n\r\n","title":"Setting an exception cause in Java","body":"<blockquote>\n<p><strong>getCause</strong> - Returns the cause of this throwable or null if the cause is nonexistent or unknown. (The cause is the throwable that caused this throwable to get thrown.)</p>\n</blockquote>\n<p>Read the Java documentation: <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html#getCause()\" rel=\"nofollow noreferrer\">getCause</a></p>\n"},{"comments":[{"owner":{"account_id":2043806,"reputation":4771,"user_id":2118777,"display_name":"Pipo"},"score":0,"creation_date":1650400139,"post_id":5800655,"comment_id":127105369,"body_markdown":"was just looking for setCause!!! why init... Thx!","body":"was just looking for setCause!!! why init... Thx!"}],"tags":[],"owner":{"account_id":3284,"reputation":42459,"user_id":4728,"accept_rate":86,"display_name":"Simon Nickerson"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1695290170,"creation_date":1303888351,"answer_id":5800655,"question_id":5800629,"body_markdown":"The cause is usually set in the constructor of the exception, e.g. [`Exception(String message, Throwable cause)`][1].\r\n\r\nIf it isn&#39;t set in the constructor, you can call [`initCause(Throwable cause)`][2].\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/lang/Exception.html#Exception%28java.lang.String,%20java.lang.Throwable%29\r\n  [2]: http://download.oracle.com/javase/6/docs/api/java/lang/Throwable.html#initCause%28java.lang.Throwable%29","title":"Setting an exception cause in Java","body":"<p>The cause is usually set in the constructor of the exception, e.g. <a href=\"http://download.oracle.com/javase/6/docs/api/java/lang/Exception.html#Exception%28java.lang.String,%20java.lang.Throwable%29\" rel=\"nofollow noreferrer\"><code>Exception(String message, Throwable cause)</code></a>.</p>\n<p>If it isn't set in the constructor, you can call <a href=\"http://download.oracle.com/javase/6/docs/api/java/lang/Throwable.html#initCause%28java.lang.Throwable%29\" rel=\"nofollow noreferrer\"><code>initCause(Throwable cause)</code></a>.</p>\n"},{"comments":[{"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"score":1,"creation_date":1484443651,"post_id":5800718,"comment_id":70512488,"body_markdown":"Is it possible to display an exception also showing an additional stack trace of an additional cause?   Isn&#39;t that what Vik was really asking?  He wasn&#39;t asking: show cause of message,   he was asking: show cause of exception .","body":"Is it possible to display an exception also showing an additional stack trace of an additional cause?   Isn&#39;t that what Vik was really asking?  He wasn&#39;t asking: show cause of message,   he was asking: show cause of exception ."},{"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"score":0,"creation_date":1484603203,"post_id":5800718,"comment_id":70568139,"body_markdown":"@djangofan - I&#39;ve added some lines to my answer. Hope it helps.","body":"@djangofan - I&#39;ve added some lines to my answer. Hope it helps."}],"tags":[],"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"comment_count":2,"down_vote_count":0,"up_vote_count":95,"is_accepted":true,"score":95,"last_activity_date":1598922650,"creation_date":1303888834,"answer_id":5800718,"question_id":5800629,"body_markdown":"An Exception has the attributes `message` and `cause`. The message is a description, telling a human reader more or less exactly, what went wrong. The `cause` is something different: it is, if available, another (nested) `Throwable`.\r\n\r\nThe concept is often used if we use custom exceptions like this:\r\n\r\n    catch(IOException e) {\r\n      throw new ApplicationException(&quot;Failed on reading file soandso&quot;, e);\r\n      //                              ^ Message                        ^ Cause\r\n    }\r\n\r\nIn response to [djangofan&#39;s comment][1]:\r\n\r\nThe standard is that the nested expression (the cause) is printed with its stack trace too.\r\n\r\nRunning this little application\r\n\r\n    public class Exceptions {\r\n        public static void main(String[] args) {\r\n            Exception r = new RuntimeException(&quot;Some message&quot;);\r\n            throw new RuntimeException(&quot;Some other message&quot;, r);\r\n        }\r\n    }\r\n\r\nwill output\r\n\r\n    Exception in thread &quot;main&quot; java.lang.RuntimeException: Some other message\r\n        at Exceptions.main(Exceptions.java:4)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)\r\n    Caused by: java.lang.RuntimeException: Some message\r\n        at Exceptions.main(Exceptions.java:3)\r\n        ... 5 more\r\n\r\nBoth messages are included.\r\n\r\n  [1]: https://stackoverflow.com/questions/5800629/setting-exception-cause-in-java#comment70512488_5800718\r\n","title":"Setting an exception cause in Java","body":"<p>An Exception has the attributes <code>message</code> and <code>cause</code>. The message is a description, telling a human reader more or less exactly, what went wrong. The <code>cause</code> is something different: it is, if available, another (nested) <code>Throwable</code>.</p>\n<p>The concept is often used if we use custom exceptions like this:</p>\n<pre><code>catch(IOException e) {\n  throw new ApplicationException(&quot;Failed on reading file soandso&quot;, e);\n  //                              ^ Message                        ^ Cause\n}\n</code></pre>\n<p>In response to <a href=\"https://stackoverflow.com/questions/5800629/setting-exception-cause-in-java#comment70512488_5800718\">djangofan's comment</a>:</p>\n<p>The standard is that the nested expression (the cause) is printed with its stack trace too.</p>\n<p>Running this little application</p>\n<pre><code>public class Exceptions {\n    public static void main(String[] args) {\n        Exception r = new RuntimeException(&quot;Some message&quot;);\n        throw new RuntimeException(&quot;Some other message&quot;, r);\n    }\n}\n</code></pre>\n<p>will output</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.RuntimeException: Some other message\n    at Exceptions.main(Exceptions.java:4)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)\nCaused by: java.lang.RuntimeException: Some message\n    at Exceptions.main(Exceptions.java:3)\n    ... 5 more\n</code></pre>\n<p>Both messages are included.</p>\n"},{"tags":[],"owner":{"account_id":24891415,"reputation":21,"user_id":18763335,"display_name":"Priyabrat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649675199,"creation_date":1649666874,"answer_id":71825001,"question_id":5800629,"body_markdown":"If you just want to get rid of **null** as the cause\r\nthen override toString() method of your *CustomException* class that extends Exception class.\r\n\r\n\r\n\tpublic class CustomException extends Exception {\t\r\n\t\tprivate static final long serialVersionUID = 9355648L;\r\n\t\tpublic CustomException(String message, Throwable cause) {\r\n\t\t\tsuper(message, cause);\r\n\t\t}\r\n\t\t@Override\r\n\t\tpublic String toString() {\r\n\t\t\treturn &quot;Business Exception&quot;;\r\n\t\t}\r\n\t}\r\n\r\nand\r\n\r\n\tthrow new CustomException(&quot;Stopping further processing.&quot;, new CustomException(&quot;stale message&quot;));\r\n\r\nthe output is as follows\r\n\r\n\tStopping further processing. Cause : Business Exception\r\n\r\nfor following catch block.\r\n\r\n\t} catch (CustomException ce) {\r\n\t\tSystem.out.print(ce.getMessage());\r\n\t\tSystem.out.println(&quot; Cause : &quot; + ce.getCause());\r\n\t}","title":"Setting an exception cause in Java","body":"<p>If you just want to get rid of <strong>null</strong> as the cause\nthen override toString() method of your <em>CustomException</em> class that extends Exception class.</p>\n<pre><code>public class CustomException extends Exception {    \n    private static final long serialVersionUID = 9355648L;\n    public CustomException(String message, Throwable cause) {\n        super(message, cause);\n    }\n    @Override\n    public String toString() {\n        return &quot;Business Exception&quot;;\n    }\n}\n</code></pre>\n<p>and</p>\n<pre><code>throw new CustomException(&quot;Stopping further processing.&quot;, new CustomException(&quot;stale message&quot;));\n</code></pre>\n<p>the output is as follows</p>\n<pre><code>Stopping further processing. Cause : Business Exception\n</code></pre>\n<p>for following catch block.</p>\n<pre><code>} catch (CustomException ce) {\n    System.out.print(ce.getMessage());\n    System.out.println(&quot; Cause : &quot; + ce.getCause());\n}\n</code></pre>\n"}],"owner":{"account_id":46067,"reputation":8871,"user_id":135982,"accept_rate":64,"display_name":"Vik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84480,"favorite_count":0,"down_vote_count":0,"up_vote_count":50,"accepted_answer_id":5800718,"answer_count":5,"score":50,"last_activity_date":1695290170,"creation_date":1303888151,"question_id":5800629,"body_markdown":"I can see on catching an exception that I can print `e.getCause()`, though it is always `null`.\r\n\r\nDo I need to set it somewhere, or is something missing which is setting the cause to null?\r\n\r\n\r\n","title":"Setting an exception cause in Java","body":"<p>I can see on catching an exception that I can print <code>e.getCause()</code>, though it is always <code>null</code>.</p>\n<p>Do I need to set it somewhere, or is something missing which is setting the cause to null?</p>\n"},{"tags":["java","apache-spark","rdd"],"comments":[{"owner":{"account_id":4166553,"reputation":39856,"user_id":3415409,"accept_rate":93,"display_name":"eliasah"},"score":0,"creation_date":1446450743,"post_id":33472829,"comment_id":54731204,"body_markdown":"I&#39;m not sure I quite understand what you are trying to do. You want to create a union on a empty RDD? What for?","body":"I&#39;m not sure I quite understand what you are trying to do. You want to create a union on a empty RDD? What for?"},{"owner":{"account_id":6507624,"reputation":211,"user_id":5036019,"accept_rate":0,"display_name":"Chaitra Bannihatti"},"score":0,"creation_date":1446451222,"post_id":33472829,"comment_id":54731403,"body_markdown":"Yes. When i loop through eachRDD i mean foreachRDD in my code i need to do union of rdd&#39;s to this existingRDD so that final i can save this existingRDD to my s3","body":"Yes. When i loop through eachRDD i mean foreachRDD in my code i need to do union of rdd&#39;s to this existingRDD so that final i can save this existingRDD to my s3"},{"owner":{"account_id":6178987,"reputation":13196,"user_id":4815083,"display_name":"Till Rohrmann"},"score":1,"creation_date":1446452170,"post_id":33472829,"comment_id":54731831,"body_markdown":"Why can&#39;t you simply set the `existingRDD` to `rdd` in the first iteration after writing it to s3?","body":"Why can&#39;t you simply set the <code>existingRDD</code> to <code>rdd</code> in the first iteration after writing it to s3?"}],"answers":[{"tags":[],"owner":{"account_id":4166553,"reputation":39856,"user_id":3415409,"accept_rate":93,"display_name":"eliasah"},"comment_count":0,"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1550851788,"creation_date":1446453162,"answer_id":33473504,"question_id":33472829,"body_markdown":"To create an empty RDD in **Java**, you&#39;ll just to do the following:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    // Get an RDD that has no partitions or elements.\r\n    JavaSparkContext jsc;\r\n    ...\r\n    JavaRDD&lt;T&gt; emptyRDD = jsc.emptyRDD();\r\n\r\nI trust you know how to use generics, otherwise, for your case, you&#39;ll need:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    \r\n    JavaRDD&lt;Tuple2&lt;String,List&lt;String&gt;&gt;&gt; emptyRDD = jsc.emptyRDD();\r\n    JavaPairRDD&lt;String,List&lt;String&gt;&gt; emptyPairRDD = JavaPairRDD.fromJavaRDD(\r\n      existingRDD\r\n    );\r\n\r\n\r\nYou can also use the `mapToPair` method to convert your `JavaRDD` to a `JavaPairRDD`.\r\n\r\nIn **Scala** :\r\n\r\n&lt;!-- language: scala --&gt;\r\n\r\n    val sc: SparkContext = ???\r\n    ... \r\n    val emptyRDD = sc.emptyRDD\r\n    // emptyRDD: org.apache.spark.rdd.EmptyRDD[Nothing] = EmptyRDD[1] at ...\r\n\r\n","title":"Initialize an RDD to empty","body":"<p>To create an empty RDD in <strong>Java</strong>, you'll just to do the following:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Get an RDD that has no partitions or elements.\nJavaSparkContext jsc;\n...\nJavaRDD&lt;T&gt; emptyRDD = jsc.emptyRDD();\n</code></pre>\n\n<p>I trust you know how to use generics, otherwise, for your case, you'll need:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>JavaRDD&lt;Tuple2&lt;String,List&lt;String&gt;&gt;&gt; emptyRDD = jsc.emptyRDD();\nJavaPairRDD&lt;String,List&lt;String&gt;&gt; emptyPairRDD = JavaPairRDD.fromJavaRDD(\n  existingRDD\n);\n</code></pre>\n\n<p>You can also use the <code>mapToPair</code> method to convert your <code>JavaRDD</code> to a <code>JavaPairRDD</code>.</p>\n\n<p>In <strong>Scala</strong> :</p>\n\n<pre class=\"lang-scala prettyprint-override\"><code>val sc: SparkContext = ???\n... \nval emptyRDD = sc.emptyRDD\n// emptyRDD: org.apache.spark.rdd.EmptyRDD[Nothing] = EmptyRDD[1] at ...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7758,"reputation":2547,"user_id":13562,"accept_rate":60,"display_name":"Dirk Groeneveld"},"score":2,"creation_date":1503443410,"post_id":40736835,"comment_id":78614467,"body_markdown":"I&#39;m pretty sure that creates an `RDD[String]` with one entry, the empty string.","body":"I&#39;m pretty sure that creates an <code>RDD[String]</code> with one entry, the empty string."}],"tags":[],"owner":{"account_id":9697233,"reputation":17,"user_id":7193275,"display_name":""},"comment_count":1,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1479802711,"creation_date":1479802711,"answer_id":40736835,"question_id":33472829,"body_markdown":"In scala, I used &quot;parallelize&quot; command.\r\n\r\n    val emptyRDD = sc.parallelize(Seq(&quot;&quot;))\r\n\r\n","title":"Initialize an RDD to empty","body":"<p>In scala, I used \"parallelize\" command.</p>\n\n<pre><code>val emptyRDD = sc.parallelize(Seq(\"\"))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8085762,"reputation":728,"user_id":6093375,"display_name":"Nikhil Bhide"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1493988475,"creation_date":1493988475,"answer_id":43805399,"question_id":33472829,"body_markdown":"@eliasah answer is very useful, I am providing code to create empty pair RDD. Consider a scenario in which it is required to create empty pair RDD (key,value). Following scala code illustrates how to create empty pair RDD with key as String and value as Int.\r\n\r\n    type pairRDD = (String,Int)\r\n    var resultRDD = sparkContext.emptyRDD[pairRDD]\r\n\r\nRDD would be created as follows :\r\n\r\n    resultRDD: org.apache.spark.rdd.EmptyRDD[(String, Int)] = EmptyRDD[0] at emptyRDD at &lt;console&gt;:29\r\n\r\n","title":"Initialize an RDD to empty","body":"<p>@eliasah answer is very useful, I am providing code to create empty pair RDD. Consider a scenario in which it is required to create empty pair RDD (key,value). Following scala code illustrates how to create empty pair RDD with key as String and value as Int.</p>\n\n<pre><code>type pairRDD = (String,Int)\nvar resultRDD = sparkContext.emptyRDD[pairRDD]\n</code></pre>\n\n<p>RDD would be created as follows :</p>\n\n<pre><code>resultRDD: org.apache.spark.rdd.EmptyRDD[(String, Int)] = EmptyRDD[0] at emptyRDD at &lt;console&gt;:29\n</code></pre>\n"},{"tags":[],"owner":{"account_id":206715,"reputation":2845,"user_id":456164,"accept_rate":100,"display_name":"Thiago Mata"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1496121316,"creation_date":1496121316,"answer_id":44253931,"question_id":33472829,"body_markdown":"In Java, create the empty RDD was a little complex. I tried using the scala.reflect.classTag but it not work either. After many tests, the code that worked was even more simple.\r\n\r\n\r\n    private JavaRDD&lt;Foo&gt; getEmptyJavaRdd() {\r\n\r\n    /* this code does not compile because require &lt;T&gt; as parameter into emptyRDD */\r\n    //        JavaRDD&lt;Foo&gt; emptyRDD = sparkContext.emptyRDD();\r\n    //        return emptyRDD;\r\n\r\n    /* this should be the solution that try to emulate the scala &lt;T&gt; */\r\n    /* but i could not make it work too */\r\n    //        ClassTag&lt;Foo&gt; tag = scala.reflect.ClassTag$.MODULE$.apply(Foo.class);\r\n    //        return sparkContext.emptyRDD(tag);\r\n\r\n    /* this alternative worked into java 8 */\r\n        return SparkContext.parallelize(\r\n                java.util.Arrays.asList()\r\n        );\r\n\r\n    }\r\n","title":"Initialize an RDD to empty","body":"<p>In Java, create the empty RDD was a little complex. I tried using the scala.reflect.classTag but it not work either. After many tests, the code that worked was even more simple.</p>\n\n<pre><code>private JavaRDD&lt;Foo&gt; getEmptyJavaRdd() {\n\n/* this code does not compile because require &lt;T&gt; as parameter into emptyRDD */\n//        JavaRDD&lt;Foo&gt; emptyRDD = sparkContext.emptyRDD();\n//        return emptyRDD;\n\n/* this should be the solution that try to emulate the scala &lt;T&gt; */\n/* but i could not make it work too */\n//        ClassTag&lt;Foo&gt; tag = scala.reflect.ClassTag$.MODULE$.apply(Foo.class);\n//        return sparkContext.emptyRDD(tag);\n\n/* this alternative worked into java 8 */\n    return SparkContext.parallelize(\n            java.util.Arrays.asList()\n    );\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6574883,"reputation":722,"user_id":5081366,"accept_rate":100,"display_name":"mjbsgll"},"score":0,"creation_date":1547673733,"post_id":50925003,"comment_id":95277007,"body_markdown":"I like this way. I was doing `val emptyRdd:RDD[String]=null`.","body":"I like this way. I was doing <code>val emptyRdd:RDD[String]=null</code>."}],"tags":[],"owner":{"account_id":10258703,"reputation":1721,"user_id":8235911,"display_name":"Thirupathi Chavati"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1529406104,"creation_date":1529400727,"answer_id":50925003,"question_id":33472829,"body_markdown":"    val emptyRdd=sc.emptyRDD[String]\r\n\r\nAbove statement will create empty RDD with `String` Type\r\n\r\nFrom SparkContext class: \r\n&gt;Get an RDD that has no partitions or elements\r\n  \r\n    def emptyRDD[T: ClassTag]: EmptyRDD[T] = new EmptyRDD[T] (this)\r\n","title":"Initialize an RDD to empty","body":"<pre><code>val emptyRdd=sc.emptyRDD[String]\n</code></pre>\n\n<p>Above statement will create empty RDD with <code>String</code> Type</p>\n\n<p>From SparkContext class: </p>\n\n<blockquote>\n  <p>Get an RDD that has no partitions or elements</p>\n</blockquote>\n\n<pre><code>def emptyRDD[T: ClassTag]: EmptyRDD[T] = new EmptyRDD[T] (this)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10234529,"reputation":21,"user_id":7554008,"display_name":"osac"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531865615,"creation_date":1531863984,"answer_id":51390650,"question_id":33472829,"body_markdown":"In Java, create empty pair RDD as follows:\r\n\r\n    JavaPairRDD&lt;T, T&gt; emptyPairRDD = JavaPairRDD.fromJavaRDD(SparkContext.emptyRDD());","title":"Initialize an RDD to empty","body":"<p>In Java, create empty pair RDD as follows:</p>\n\n<pre><code>JavaPairRDD&lt;T, T&gt; emptyPairRDD = JavaPairRDD.fromJavaRDD(SparkContext.emptyRDD());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16342248,"reputation":693,"user_id":11802888,"display_name":"AshuGG"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695289983,"creation_date":1695289983,"answer_id":77149121,"question_id":33472829,"body_markdown":"you can try the below snippet:\r\n\r\n    val emptyRDD = spark.emptyDataset[T].rdd","title":"Initialize an RDD to empty","body":"<p>you can try the below snippet:</p>\n<pre><code>val emptyRDD = spark.emptyDataset[T].rdd\n</code></pre>\n"}],"owner":{"account_id":6507624,"reputation":211,"user_id":5036019,"accept_rate":0,"display_name":"Chaitra Bannihatti"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33348,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"answer_count":7,"score":19,"last_activity_date":1695289983,"creation_date":1446450281,"question_id":33472829,"body_markdown":"I have an RDD called\r\n    \r\n\tJavaPairRDD&lt;String, List&lt;String&gt;&gt; existingRDD; \r\n\r\nNow I need to initialize this  `existingRDD` to empty so that when I get the actual rdd&#39;s I can do a union with this `existingRDD`.\r\nHow do I initialize `existingRDD` to an empty RDD except initializing it to null?\r\nHere is my code:\r\n\r\n    JavaPairRDD&lt;String, List&lt;String&gt;&gt; existingRDD;\r\n    if(ai.get()%10==0)\r\n    {\r\n        existingRDD.saveAsNewAPIHadoopFile(&quot;s3://manthan-impala-test/kinesis-dump/&quot; + startTime + &quot;/&quot; + k + &quot;/&quot; + System.currentTimeMillis() + &quot;/&quot;,\r\n        NullWritable.class, Text.class, TextOutputFormat.class); //on worker failure this will get overwritten\t\t\t\t\t\t\t\t\t\r\n    }\r\n    else\r\n    {\r\n        existingRDD.union(rdd);\r\n    }","title":"Initialize an RDD to empty","body":"<p>I have an RDD called</p>\n\n<pre><code>JavaPairRDD&lt;String, List&lt;String&gt;&gt; existingRDD; \n</code></pre>\n\n<p>Now I need to initialize this  <code>existingRDD</code> to empty so that when I get the actual rdd's I can do a union with this <code>existingRDD</code>.\nHow do I initialize <code>existingRDD</code> to an empty RDD except initializing it to null?\nHere is my code:</p>\n\n<pre><code>JavaPairRDD&lt;String, List&lt;String&gt;&gt; existingRDD;\nif(ai.get()%10==0)\n{\n    existingRDD.saveAsNewAPIHadoopFile(\"s3://manthan-impala-test/kinesis-dump/\" + startTime + \"/\" + k + \"/\" + System.currentTimeMillis() + \"/\",\n    NullWritable.class, Text.class, TextOutputFormat.class); //on worker failure this will get overwritten                                  \n}\nelse\n{\n    existingRDD.union(rdd);\n}\n</code></pre>\n"},{"tags":["java","android","flutter","kotlin","dart"],"comments":[{"owner":{"account_id":27516669,"reputation":398,"user_id":20997501,"display_name":"Wh1t3rabbit"},"score":0,"creation_date":1695182814,"post_id":77139155,"comment_id":135988343,"body_markdown":"&quot;the emulators are being detected as real devices&quot; Show the code you are using that is giving false results. You should be able to check ```isPhysicalDevice``` https://stackoverflow.com/questions/49866014/how-to-determine-if-flutter-is-running-in-simulator","body":"&quot;the emulators are being detected as real devices&quot; Show the code you are using that is giving false results. You should be able to check <code>isPhysicalDevice</code> <a href=\"https://stackoverflow.com/questions/49866014/how-to-determine-if-flutter-is-running-in-simulator\" title=\"how to determine if flutter is running in simulator\">stackoverflow.com/questions/49866014/&hellip;</a>"},{"owner":{"account_id":28734687,"reputation":61,"user_id":22005920,"display_name":"Ropon Pov"},"score":1,"creation_date":1695188859,"post_id":77139155,"comment_id":135988895,"body_markdown":"The **isPhysicalDevice** property only works in the Android Studio Emulator. It does not work in other emulators such as Bluestacks, NoxPlayer, or LDPlayer.","body":"The <b>isPhysicalDevice</b> property only works in the Android Studio Emulator. It does not work in other emulators such as Bluestacks, NoxPlayer, or LDPlayer."},{"owner":{"account_id":28734687,"reputation":61,"user_id":22005920,"display_name":"Ropon Pov"},"score":0,"creation_date":1695257657,"post_id":77139155,"comment_id":136001580,"body_markdown":"The solution to my problem is not working perfectly yet, but I have already found a way to fix it. Thank you for your suggestion. [MY SOLUTION](https://stackoverflow.com/a/77139422/22005920)","body":"The solution to my problem is not working perfectly yet, but I have already found a way to fix it. Thank you for your suggestion. <a href=\"https://stackoverflow.com/a/77139422/22005920\">MY SOLUTION</a>"}],"answers":[{"comments":[{"owner":{"account_id":28734687,"reputation":61,"user_id":22005920,"display_name":"Ropon Pov"},"score":0,"creation_date":1695188638,"post_id":77139291,"comment_id":135988869,"body_markdown":"Have you tried testing it in emulators such as Bluestacks, NoxPlayer, and LDPlayer?","body":"Have you tried testing it in emulators such as Bluestacks, NoxPlayer, and LDPlayer?"}],"tags":[],"owner":{"account_id":7130379,"reputation":1308,"user_id":5451849,"display_name":"Dharam Budh"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695184223,"creation_date":1695184223,"answer_id":77139291,"question_id":77139155,"body_markdown":"Try this:\r\n\r\n    class HomeScreen extends StatefulWidget {\r\n      const HomeScreen({super.key});\r\n    \r\n      @override\r\n      State&lt;HomeScreen&gt; createState() =&gt; _HomeScreenState();\r\n    }\r\n    \r\n    class _HomeScreenState extends State&lt;HomeScreen&gt; {\r\n      @override\r\n      Widget build(BuildContext context) {\r\n        return Scaffold(\r\n          body: SafeArea(\r\n            child: ElevatedButton(\r\n              onPressed: () async {\r\n                log(&quot;isPhysicalDevice: ${await checkIsPhysicalDevice()}&quot;);\r\n              },\r\n              child: const Text(&quot;Check Is Physical Device&quot;),\r\n            ),\r\n          ),\r\n        );\r\n      }\r\n    \r\n      Future&lt;bool&gt; checkIsPhysicalDevice() async {\r\n        final AndroidDeviceInfo androidInfo = await DeviceInfoPlugin().androidInfo;\r\n        final bool finalCondition = androidInfo.fingerprint.startsWith(&quot;generic&quot;) ||\r\n            androidInfo.fingerprint.startsWith(&quot;unknown&quot;) ||\r\n            androidInfo.model.contains(&quot;google_sdk&quot;) ||\r\n            androidInfo.model.contains(&quot;Emulator&quot;) ||\r\n            androidInfo.model.contains(&quot;Android SDK built for x86&quot;) ||\r\n            androidInfo.manufacturer.contains(&quot;Genymotion&quot;) ||\r\n            androidInfo.brand.startsWith(&quot;generic&quot;) ||\r\n            androidInfo.device.startsWith(&quot;generic&quot;) ||\r\n            androidInfo.product == &quot;vbox86p&quot; ||\r\n            androidInfo.device == &quot;vbox86&quot; ||\r\n            androidInfo.hardware == &quot;vbox86&quot; ||\r\n            androidInfo.product == &quot;google_sdk&quot;;\r\n        return Future&lt;bool&gt;.value(finalCondition);\r\n      }\r\n    }\r\n\r\nI assure you that it is more accurate than `androidInfo.isPhysicalDevice`.\r\n\r\nOR\r\n\r\nTry this: [safe_device][1]\r\n\r\n\r\n  [1]: https://pub.dev/packages/safe_device","title":"How to detect emulator or real device in flutter? (Bluestacks, NoxPlayer, or LDPlayer)","body":"<p>Try this:</p>\n<pre><code>class HomeScreen extends StatefulWidget {\n  const HomeScreen({super.key});\n\n  @override\n  State&lt;HomeScreen&gt; createState() =&gt; _HomeScreenState();\n}\n\nclass _HomeScreenState extends State&lt;HomeScreen&gt; {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      body: SafeArea(\n        child: ElevatedButton(\n          onPressed: () async {\n            log(&quot;isPhysicalDevice: ${await checkIsPhysicalDevice()}&quot;);\n          },\n          child: const Text(&quot;Check Is Physical Device&quot;),\n        ),\n      ),\n    );\n  }\n\n  Future&lt;bool&gt; checkIsPhysicalDevice() async {\n    final AndroidDeviceInfo androidInfo = await DeviceInfoPlugin().androidInfo;\n    final bool finalCondition = androidInfo.fingerprint.startsWith(&quot;generic&quot;) ||\n        androidInfo.fingerprint.startsWith(&quot;unknown&quot;) ||\n        androidInfo.model.contains(&quot;google_sdk&quot;) ||\n        androidInfo.model.contains(&quot;Emulator&quot;) ||\n        androidInfo.model.contains(&quot;Android SDK built for x86&quot;) ||\n        androidInfo.manufacturer.contains(&quot;Genymotion&quot;) ||\n        androidInfo.brand.startsWith(&quot;generic&quot;) ||\n        androidInfo.device.startsWith(&quot;generic&quot;) ||\n        androidInfo.product == &quot;vbox86p&quot; ||\n        androidInfo.device == &quot;vbox86&quot; ||\n        androidInfo.hardware == &quot;vbox86&quot; ||\n        androidInfo.product == &quot;google_sdk&quot;;\n    return Future&lt;bool&gt;.value(finalCondition);\n  }\n}\n</code></pre>\n<p>I assure you that it is more accurate than <code>androidInfo.isPhysicalDevice</code>.</p>\n<p>OR</p>\n<p>Try this: <a href=\"https://pub.dev/packages/safe_device\" rel=\"nofollow noreferrer\">safe_device</a></p>\n"},{"tags":[],"owner":{"account_id":28734687,"reputation":61,"user_id":22005920,"display_name":"Ropon Pov"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695191740,"creation_date":1695186466,"answer_id":77139422,"question_id":77139155,"body_markdown":"I have found a solution to the problem:\r\n\r\n  - Add the **[get_radio_version_plugin: ^1.0.0][1]** plugin to your pubspec.yaml file.\r\n  - Get the value of radioVersion and compare it to the following values:\r\n    * 1.0.0.0\r\n    * &quot;&quot; (empty string)\r\n    * null\r\n\r\n  - If **radioVersion** is equal to any of these values, then the device is an emulator. Otherwise, the device is a real device.\r\n  \r\n\r\n  &gt;&gt; **Example Code :** \r\n  \r\n\r\n    if(radioVersion == &#39;1.0.0.0&#39; || radioVersion == &#39;&#39;|| radioVersion == null){\r\n      //Emulator\r\n    } else {\r\n      //Real Device\r\n    }\r\n   [ &gt;&gt; Image Result &lt;&lt;][2]\r\n    \r\n\r\n\r\n  [1]: https://pub.dev/packages/get_radio_version_plugin\r\n  [2]: https://i.stack.imgur.com/75QkB.png","title":"How to detect emulator or real device in flutter? (Bluestacks, NoxPlayer, or LDPlayer)","body":"<p>I have found a solution to the problem:</p>\n<ul>\n<li><p>Add the <strong><a href=\"https://pub.dev/packages/get_radio_version_plugin\" rel=\"nofollow noreferrer\">get_radio_version_plugin: ^1.0.0</a></strong> plugin to your pubspec.yaml file.</p>\n</li>\n<li><p>Get the value of radioVersion and compare it to the following values:</p>\n<ul>\n<li>1.0.0.0</li>\n<li>&quot;&quot; (empty string)</li>\n<li>null</li>\n</ul>\n</li>\n<li><p>If <strong>radioVersion</strong> is equal to any of these values, then the device is an emulator. Otherwise, the device is a real device.</p>\n</li>\n</ul>\n<blockquote>\n<blockquote>\n<p><strong>Example Code :</strong></p>\n</blockquote>\n</blockquote>\n<pre><code>if(radioVersion == '1.0.0.0' || radioVersion == ''|| radioVersion == null){\n  //Emulator\n} else {\n  //Real Device\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/75QkB.png\" rel=\"nofollow noreferrer\"> &gt;&gt; Image Result &lt;&lt;</a></p>\n"}],"owner":{"account_id":28734687,"reputation":61,"user_id":22005920,"display_name":"Ropon Pov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":291,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1695263242,"accepted_answer_id":77139422,"answer_count":2,"score":2,"last_activity_date":1695289509,"creation_date":1695181219,"question_id":77139155,"body_markdown":"I want to detect the difference between an emulator and a real device. I use the device_info_plus package to determine whether the device is an emulator or a real device. It works well, but when I try to run my app and test it in Bluestacks, NoxPlayer, or LDPlayer, it doesn&#39;t work. When I run it in those emulators, the result is that it detects the device as a real device. How can I solve this problem?\r\n\r\nI am trying to run my app on emulators such as Bluestacks, NoxPlayer, and LDPlayer to test whether it is running on an emulator or a real device. However, the emulators are being detected as real devices. How can I fix this?","title":"How to detect emulator or real device in flutter? (Bluestacks, NoxPlayer, or LDPlayer)","body":"<p>I want to detect the difference between an emulator and a real device. I use the device_info_plus package to determine whether the device is an emulator or a real device. It works well, but when I try to run my app and test it in Bluestacks, NoxPlayer, or LDPlayer, it doesn't work. When I run it in those emulators, the result is that it detects the device as a real device. How can I solve this problem?</p>\n<p>I am trying to run my app on emulators such as Bluestacks, NoxPlayer, and LDPlayer to test whether it is running on an emulator or a real device. However, the emulators are being detected as real devices. How can I fix this?</p>\n"},{"tags":["java","protocol-buffers","protostuff"],"owner":{"account_id":15968441,"reputation":373,"user_id":11523294,"display_name":"Criwran"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":317,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1695289298,"creation_date":1682589706,"question_id":76119142,"body_markdown":"Protostuff has a ProtobufIOUtil that seems to be able to convert Java objects into protobuf bytes. \r\nCurrently, it has been found that there may be differences when dealing with map types.\r\n\r\nFor example:\r\n```\r\n@Getter\r\n@Setter\r\npublic class User {\r\n    @Tag(1)\r\n    private long uid;\r\n\r\n    @Tag(2)\r\n    private String name;\r\n\r\n    @Tag(3)\r\n    private Map&lt;Long, Integer&gt; map = new HashMap&lt;&gt;(); // Map type field\r\n}\r\n```\r\n```\r\nsyntax=&quot;proto3&quot;;\r\n\r\nmessage User {\r\n  int64 uid = 1;\r\n  string name = 2;\r\n  map&lt;int64, int32&gt; map = 3;\r\n}\r\n```\r\nThe test:\r\n```\r\npublic class Test {\r\n    public static void main(String[] args) throws InvalidProtocolBufferException {\r\n        User user = new User();\r\n        user.setUid(1);\r\n        user.setName(&quot;s&quot;);\r\n        Map&lt;Long, Integer&gt; map = new HashMap&lt;Long, Integer&gt;();\r\n        map.put(1L, 1);\r\n        user.setMap(map);\r\n        Schema&lt;User&gt; schema = RuntimeSchema.getSchema(User.class);\r\n        byte[] bytes = ProtobufIOUtil.toByteArray(user, schema, LinkedBuffer.allocate());\r\n        System.out.println(Arrays.toString(bytes));\r\n\r\n        UserOuterClass.User pbUser = UserOuterClass.User.newBuilder()\r\n                .setUid(1)\r\n                .setName(&quot;s&quot;)\r\n                .putMap(1, 1)\r\n                .build();\r\n        System.out.println(Arrays.toString(pbUser.toByteArray()));\r\n        UserOuterClass.User newPbUser = UserOuterClass.User.parseFrom(bytes);\r\n        System.out.println(newPbUser.toString());\r\n    }\r\n}\r\n```\r\nThe console output is:\r\n```\r\n[8, 1, 18, 1, 115, 26, 6, 10, 4, 8, 1, 16, 1]\r\n[8, 1, 18, 1, 115, 26, 4, 8, 1, 16, 1]\r\nuid: 1\r\nname: &quot;s&quot;\r\nmap {\r\n  key: 0\r\n  value: 0\r\n}\r\n```\r\n\r\nThe dependencies:\r\n```\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;io.protostuff&lt;/groupId&gt;\r\n            &lt;artifactId&gt;protostuff-core&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.protostuff&lt;/groupId&gt;\r\n            &lt;artifactId&gt;protostuff-runtime&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.protostuff&lt;/groupId&gt;\r\n            &lt;artifactId&gt;protostuff-runtime-registry&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;\r\n            &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;\r\n            &lt;version&gt;3.21.8&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\n\r\nBytes generated by `ProtobufIOUtil.toByteArray()` in ProtoStuff differs from bytes generated in ProtoBuf, once with `Map` type fields in Pojo class.\r\n\r\nThe map data structure encoded by protobuf is roughly `fieldTag, eleLen, eleData, fieldTag, eleLen, eleData`.\r\n\r\nThe byte data converted from protostuff to protobuf is roughly `fieldTag, fieldLen, fieldTag, eleLen, eleData, fieldTag, eleLen, eleData`.\r\n\r\nCompared to protobuf, there are two more data points: `fieldTag, fieldLen`.\r\n\r\nAnyway, I want the bytes generated by protostuff to be parsed in protobuf to generate the same object as the original object.\r\n\r\nIs there any relevant configuration for protostuff that supports not writing `fieldTag` and `fieldLen` at the beginning?\r\n\r\nIf not, does protostuff support custom encoding and decoding (I know  `Delegate` could be used to customize encoding and decoding, but it seems to require writing by myself. I want to combine it with the original map encoding and decoding, but I haven&#39;t found an implementation yet).\r\n\r\n---UPDATE---\r\n\r\nI now decide to use Delegate:\r\n```\r\npublic class MapDelegate {\r\n    public static final Delegate&lt;Map&lt;Long, Integer&gt;&gt; MAP_INT_LONG_DELEGATE = new Delegate&lt;Map&lt;Long, Integer&gt;&gt;() {\r\n        @Override\r\n        public WireFormat.FieldType getFieldType() {\r\n            return WireFormat.FieldType.MESSAGE;\r\n        }\r\n\r\n        @Override\r\n        public Map&lt;Long, Integer&gt; readFrom(Input input) throws IOException {\r\n            // to be implemented\r\n        }\r\n\r\n        @Override\r\n        public void writeTo(Output output, int number, Map&lt;Long, Integer&gt; value, boolean repeated) throws IOException {\r\n            // to be implemented\r\n        }\r\n\r\n        @Override\r\n        public void transfer(Pipe pipe, Input input, Output output, int number, boolean repeated) throws IOException {\r\n            throw new UnsupportedOperationException(&quot;Transfer operation is not supported.&quot;);\r\n        }\r\n\r\n        @Override\r\n        public Class&lt;?&gt; typeClass() {\r\n            return Map.class;\r\n        }\r\n    };\r\n\r\n}\r\n\r\n```\r\nThe updated `Test`:\r\n```\r\npublic class Test {\r\n    public static void main(String[] args) throws InvalidProtocolBufferException {\r\n        DefaultIdStrategy strategy = (DefaultIdStrategy) RuntimeEnv.ID_STRATEGY;\r\n        strategy.registerDelegate(MAP_INT_LONG_DELEGATE);\r\n\r\n        ...\r\n    }\r\n}\r\n```\r\n\r\nBut no idea on how to implement `readFrom` and `writeTo`.\r\n","title":"Protostuff cannot be converted into Protobuf bytes?","body":"<p>Protostuff has a ProtobufIOUtil that seems to be able to convert Java objects into protobuf bytes.\nCurrently, it has been found that there may be differences when dealing with map types.</p>\n<p>For example:</p>\n<pre><code>@Getter\n@Setter\npublic class User {\n    @Tag(1)\n    private long uid;\n\n    @Tag(2)\n    private String name;\n\n    @Tag(3)\n    private Map&lt;Long, Integer&gt; map = new HashMap&lt;&gt;(); // Map type field\n}\n</code></pre>\n<pre><code>syntax=&quot;proto3&quot;;\n\nmessage User {\n  int64 uid = 1;\n  string name = 2;\n  map&lt;int64, int32&gt; map = 3;\n}\n</code></pre>\n<p>The test:</p>\n<pre><code>public class Test {\n    public static void main(String[] args) throws InvalidProtocolBufferException {\n        User user = new User();\n        user.setUid(1);\n        user.setName(&quot;s&quot;);\n        Map&lt;Long, Integer&gt; map = new HashMap&lt;Long, Integer&gt;();\n        map.put(1L, 1);\n        user.setMap(map);\n        Schema&lt;User&gt; schema = RuntimeSchema.getSchema(User.class);\n        byte[] bytes = ProtobufIOUtil.toByteArray(user, schema, LinkedBuffer.allocate());\n        System.out.println(Arrays.toString(bytes));\n\n        UserOuterClass.User pbUser = UserOuterClass.User.newBuilder()\n                .setUid(1)\n                .setName(&quot;s&quot;)\n                .putMap(1, 1)\n                .build();\n        System.out.println(Arrays.toString(pbUser.toByteArray()));\n        UserOuterClass.User newPbUser = UserOuterClass.User.parseFrom(bytes);\n        System.out.println(newPbUser.toString());\n    }\n}\n</code></pre>\n<p>The console output is:</p>\n<pre><code>[8, 1, 18, 1, 115, 26, 6, 10, 4, 8, 1, 16, 1]\n[8, 1, 18, 1, 115, 26, 4, 8, 1, 16, 1]\nuid: 1\nname: &quot;s&quot;\nmap {\n  key: 0\n  value: 0\n}\n</code></pre>\n<p>The dependencies:</p>\n<pre><code>    &lt;dependency&gt;\n            &lt;groupId&gt;io.protostuff&lt;/groupId&gt;\n            &lt;artifactId&gt;protostuff-core&lt;/artifactId&gt;\n            &lt;version&gt;1.7.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.protostuff&lt;/groupId&gt;\n            &lt;artifactId&gt;protostuff-runtime&lt;/artifactId&gt;\n            &lt;version&gt;1.7.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.protostuff&lt;/groupId&gt;\n            &lt;artifactId&gt;protostuff-runtime-registry&lt;/artifactId&gt;\n            &lt;version&gt;1.7.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;\n            &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;\n            &lt;version&gt;3.21.8&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Bytes generated by <code>ProtobufIOUtil.toByteArray()</code> in ProtoStuff differs from bytes generated in ProtoBuf, once with <code>Map</code> type fields in Pojo class.</p>\n<p>The map data structure encoded by protobuf is roughly <code>fieldTag, eleLen, eleData, fieldTag, eleLen, eleData</code>.</p>\n<p>The byte data converted from protostuff to protobuf is roughly <code>fieldTag, fieldLen, fieldTag, eleLen, eleData, fieldTag, eleLen, eleData</code>.</p>\n<p>Compared to protobuf, there are two more data points: <code>fieldTag, fieldLen</code>.</p>\n<p>Anyway, I want the bytes generated by protostuff to be parsed in protobuf to generate the same object as the original object.</p>\n<p>Is there any relevant configuration for protostuff that supports not writing <code>fieldTag</code> and <code>fieldLen</code> at the beginning?</p>\n<p>If not, does protostuff support custom encoding and decoding (I know  <code>Delegate</code> could be used to customize encoding and decoding, but it seems to require writing by myself. I want to combine it with the original map encoding and decoding, but I haven't found an implementation yet).</p>\n<p>---UPDATE---</p>\n<p>I now decide to use Delegate:</p>\n<pre><code>public class MapDelegate {\n    public static final Delegate&lt;Map&lt;Long, Integer&gt;&gt; MAP_INT_LONG_DELEGATE = new Delegate&lt;Map&lt;Long, Integer&gt;&gt;() {\n        @Override\n        public WireFormat.FieldType getFieldType() {\n            return WireFormat.FieldType.MESSAGE;\n        }\n\n        @Override\n        public Map&lt;Long, Integer&gt; readFrom(Input input) throws IOException {\n            // to be implemented\n        }\n\n        @Override\n        public void writeTo(Output output, int number, Map&lt;Long, Integer&gt; value, boolean repeated) throws IOException {\n            // to be implemented\n        }\n\n        @Override\n        public void transfer(Pipe pipe, Input input, Output output, int number, boolean repeated) throws IOException {\n            throw new UnsupportedOperationException(&quot;Transfer operation is not supported.&quot;);\n        }\n\n        @Override\n        public Class&lt;?&gt; typeClass() {\n            return Map.class;\n        }\n    };\n\n}\n\n</code></pre>\n<p>The updated <code>Test</code>:</p>\n<pre><code>public class Test {\n    public static void main(String[] args) throws InvalidProtocolBufferException {\n        DefaultIdStrategy strategy = (DefaultIdStrategy) RuntimeEnv.ID_STRATEGY;\n        strategy.registerDelegate(MAP_INT_LONG_DELEGATE);\n\n        ...\n    }\n}\n</code></pre>\n<p>But no idea on how to implement <code>readFrom</code> and <code>writeTo</code>.</p>\n"},{"tags":["java","datetime","jodatime"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1340786593,"post_id":11222316,"comment_id":14738600,"body_markdown":"Is your X always going to be a factor of 60?","body":"Is your X always going to be a factor of 60?"},{"owner":{"account_id":246765,"reputation":41329,"user_id":521070,"accept_rate":72,"display_name":"Michael"},"score":0,"creation_date":1340786875,"post_id":11222316,"comment_id":14738747,"body_markdown":"Yes. `X` is actually a fraction of an hour.","body":"Yes. <code>X</code> is actually a fraction of an hour."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1340787558,"post_id":11222316,"comment_id":14739030,"body_markdown":"Starting from the hour, then?","body":"Starting from the hour, then?"}],"answers":[{"tags":[],"owner":{"account_id":1527414,"reputation":2329,"user_id":1425488,"accept_rate":82,"display_name":"Scorpio"},"comment_count":0,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1340787410,"creation_date":1340787410,"answer_id":11222664,"question_id":11222316,"body_markdown":"I once hacked this Method to do something like it. It&#39;s not optimized in any way, but it did what I wanted at the time. Never made it in any production environment, and I cannot tell you anything about performance.\r\n\r\n\r\n   \r\n\r\n    @Test\r\n         public void test() {\r\n             System.out.println(roundDate(new DateTime().withMinuteOfHour(13)));\r\n             System.out.println(roundDate(new DateTime().withMinuteOfHour(48)));\r\n             System.out.println(roundDate(new DateTime().withMinuteOfHour(0)));\r\n             System.out.println(roundDate(new DateTime().withMinuteOfHour(59)));\r\n             System.out.println(roundDate(new DateTime().withMinuteOfHour(22)));\r\n             System.out.println(roundDate(new DateTime().withMinuteOfHour(37)));\r\n         }\r\n    \r\n        private DateTime roundDate(final DateTime dateTime) {\r\n            final double minuteOfHour = dateTime.getMinuteOfHour();\r\n            final double tenth = minuteOfHour / 10;\r\n            final long round = Math.round(tenth);\r\n            final int i = (int) (round * 10);\r\n    \r\n            if (i == 60) {\r\n                return dateTime.plusHours(1).withMinuteOfHour(0);\r\n            } else {\r\n                return dateTime.withMinuteOfHour(i);\r\n            }\r\n    \r\n        }\r\n\r\n","title":"How to round DateTime of Joda library to the nearest X minutes?","body":"<p>I once hacked this Method to do something like it. It's not optimized in any way, but it did what I wanted at the time. Never made it in any production environment, and I cannot tell you anything about performance.</p>\n\n<pre><code>@Test\n     public void test() {\n         System.out.println(roundDate(new DateTime().withMinuteOfHour(13)));\n         System.out.println(roundDate(new DateTime().withMinuteOfHour(48)));\n         System.out.println(roundDate(new DateTime().withMinuteOfHour(0)));\n         System.out.println(roundDate(new DateTime().withMinuteOfHour(59)));\n         System.out.println(roundDate(new DateTime().withMinuteOfHour(22)));\n         System.out.println(roundDate(new DateTime().withMinuteOfHour(37)));\n     }\n\n    private DateTime roundDate(final DateTime dateTime) {\n        final double minuteOfHour = dateTime.getMinuteOfHour();\n        final double tenth = minuteOfHour / 10;\n        final long round = Math.round(tenth);\n        final int i = (int) (round * 10);\n\n        if (i == 60) {\n            return dateTime.plusHours(1).withMinuteOfHour(0);\n        } else {\n            return dateTime.withMinuteOfHour(i);\n        }\n\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":300304,"reputation":1234,"user_id":607361,"display_name":"Maciej opaciski"},"score":1,"creation_date":1352722883,"post_id":12800826,"comment_id":18209324,"body_markdown":"#round*Copy() is proper way of rounding dates in Joda","body":"#round*Copy() is proper way of rounding dates in Joda"},{"owner":{"account_id":136350,"reputation":1526,"user_id":339785,"display_name":"qerub"},"score":5,"creation_date":1373907968,"post_id":12800826,"comment_id":25720347,"body_markdown":"@Maciejopaciski: So why don&#39;t you add an answer with such a solution?","body":"@Maciejopaciski: So why don&#39;t you add an answer with such a solution?"},{"owner":{"account_id":300304,"reputation":1234,"user_id":607361,"display_name":"Maciej opaciski"},"score":3,"creation_date":1378460096,"post_id":12800826,"comment_id":27469019,"body_markdown":"@Qerub you misunderstood me - above answer is using round*Copy() and it is not marked as answer to this question as it should be.","body":"@Qerub you misunderstood me - above answer is using round*Copy() and it is not marked as answer to this question as it should be."}],"tags":[],"owner":{"account_id":24377,"reputation":818073,"user_id":61974,"display_name":"Mark Byers"},"comment_count":3,"down_vote_count":0,"up_vote_count":32,"is_accepted":true,"score":32,"last_activity_date":1695289216,"creation_date":1349788268,"answer_id":12800826,"question_id":11222316,"body_markdown":"[The original accepted answer][1] doesn&#39;t correctly handle datetimes that have seconds or milliseconds set. For completeness, here&#39;s a version that does handle that correctly:\r\n\r\n    private DateTime roundDate(final DateTime dateTime, final int minutes) {\r\n        if (minutes &lt; 1 || 60 % minutes != 0) {\r\n            throw new IllegalArgumentException(&quot;minutes must be a factor of 60&quot;);\r\n        }\r\n\r\n        final DateTime hour = dateTime.hourOfDay().roundFloorCopy();\r\n        final long millisSinceHour = new Duration(hour, dateTime).getMillis();\r\n        final int roundedMinutes = ((int)Math.round(\r\n            millisSinceHour / 60000.0 / minutes)) * minutes;\r\n        return hour.plusMinutes(roundedMinutes);\r\n    }\r\n\r\n\r\n[1]: https://stackoverflow.com/a/11222664","title":"How to round DateTime of Joda library to the nearest X minutes?","body":"<p><a href=\"https://stackoverflow.com/a/11222664\">The original accepted answer</a> doesn't correctly handle datetimes that have seconds or milliseconds set. For completeness, here's a version that does handle that correctly:</p>\n<pre><code>private DateTime roundDate(final DateTime dateTime, final int minutes) {\n    if (minutes &lt; 1 || 60 % minutes != 0) {\n        throw new IllegalArgumentException(&quot;minutes must be a factor of 60&quot;);\n    }\n\n    final DateTime hour = dateTime.hourOfDay().roundFloorCopy();\n    final long millisSinceHour = new Duration(hour, dateTime).getMillis();\n    final int roundedMinutes = ((int)Math.round(\n        millisSinceHour / 60000.0 / minutes)) * minutes;\n    return hour.plusMinutes(roundedMinutes);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":214,"reputation":35692,"user_id":268,"accept_rate":100,"display_name":"Vincent Robert"},"score":24,"creation_date":1389870815,"post_id":18661969,"comment_id":31851160,"body_markdown":"&quot;Implemented in Scala for clarity.&quot; ROFL","body":"&quot;Implemented in Scala for clarity.&quot; ROFL"},{"owner":{"account_id":136350,"reputation":1526,"user_id":339785,"display_name":"qerub"},"score":6,"creation_date":1389965481,"post_id":18661969,"comment_id":31900128,"body_markdown":"Clarity as in one less type cast, one less static method invocation and fewer parenthesis in this case. :)","body":"Clarity as in one less type cast, one less static method invocation and fewer parenthesis in this case. :)"},{"owner":{"account_id":1267675,"reputation":13420,"user_id":1224627,"accept_rate":71,"display_name":"wingedsubmariner"},"score":1,"creation_date":1423981362,"post_id":18661969,"comment_id":45363571,"body_markdown":"This will not correctly handle leap seconds. Also, floating point should not be used here, it will lead to inaccuracies and the rounding can be more efficiently implemented with integer arithmetic.","body":"This will not correctly handle leap seconds. Also, floating point should not be used here, it will lead to inaccuracies and the rounding can be more efficiently implemented with integer arithmetic."}],"tags":[],"owner":{"account_id":136350,"reputation":1526,"user_id":339785,"display_name":"qerub"},"comment_count":3,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1378483449,"creation_date":1378483449,"answer_id":18661969,"question_id":11222316,"body_markdown":"Here&#39;s another approach that uses arithmetic on Unix time for completeness:\r\n\r\n(Implemented in Scala for clarity.)\r\n\r\n    import org.joda.time.{DateTime, Duration}\r\n    \r\n    def roundDateTime(t: DateTime, d: Duration) = {\r\n      t minus (t.getMillis - (t.getMillis.toDouble / d.getMillis).round * d.getMillis)\r\n    }\r\n\r\nExample usage:\r\n\r\n    roundDateTime(new DateTime(&quot;2013-06-27T11:32:00&quot;), Duration.standardMinutes(10))\r\n    // =&gt; 2013-06-27T11:30:00.000+02:00\r\n    \r\n    roundDateTime(new DateTime(&quot;2013-06-27T11:37:00&quot;), Duration.standardMinutes(10))\r\n    // =&gt; 2013-06-27T11:40:00.000+02:00","title":"How to round DateTime of Joda library to the nearest X minutes?","body":"<p>Here's another approach that uses arithmetic on Unix time for completeness:</p>\n\n<p>(Implemented in Scala for clarity.)</p>\n\n<pre><code>import org.joda.time.{DateTime, Duration}\n\ndef roundDateTime(t: DateTime, d: Duration) = {\n  t minus (t.getMillis - (t.getMillis.toDouble / d.getMillis).round * d.getMillis)\n}\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>roundDateTime(new DateTime(\"2013-06-27T11:32:00\"), Duration.standardMinutes(10))\n// =&gt; 2013-06-27T11:30:00.000+02:00\n\nroundDateTime(new DateTime(\"2013-06-27T11:37:00\"), Duration.standardMinutes(10))\n// =&gt; 2013-06-27T11:40:00.000+02:00\n</code></pre>\n"},{"comments":[{"owner":{"account_id":14548,"reputation":1557,"user_id":30026,"accept_rate":71,"display_name":"Dan Finucane"},"score":0,"creation_date":1516717777,"post_id":20250692,"comment_id":83796552,"body_markdown":"This doesn&#39;t work.  All of the rounding is being done in the arguments to the withMinuteOfHour call.  the .minuteOfDay().roundFloorCopy() that follows is doing nothing.","body":"This doesn&#39;t work.  All of the rounding is being done in the arguments to the withMinuteOfHour call.  the .minuteOfDay().roundFloorCopy() that follows is doing nothing."},{"owner":{"account_id":9786204,"reputation":176,"user_id":7252458,"display_name":"Serge Kireev"},"score":0,"creation_date":1607448329,"post_id":20250692,"comment_id":115273640,"body_markdown":"Actually it rounds all the units smaller than &#39;minute&#39;, because withMinuteOfHour operates only on the minutes. This is the proper way of doing it. There is a small typo, it should be minuteOfHour() though","body":"Actually it rounds all the units smaller than &#39;minute&#39;, because withMinuteOfHour operates only on the minutes. This is the proper way of doing it. There is a small typo, it should be minuteOfHour() though"}],"tags":[],"owner":{"account_id":459717,"reputation":3789,"user_id":860350,"display_name":"vladaman"},"comment_count":2,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1385578363,"creation_date":1385578363,"answer_id":20250692,"question_id":11222316,"body_markdown":"Using pure DateTime (Joda) Java Library:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n\tDateTime dt = new DateTime(1385577373517L, DateTimeZone.UTC);\r\n\t// Prints 2013-11-27T18:36:13.517Z\r\n\tSystem.out.println(dt);\r\n\t\r\n\t// Prints 2013-11-27T18:36:00.000Z (Floor rounded to a minute)\r\n\tSystem.out.println(dt.minuteOfDay().roundFloorCopy());\r\n\t\r\n\t// Prints 2013-11-27T18:30:00.000Z (Rounded to custom minute Window)\r\n\tint windowMinutes = 10;\r\n\tSystem.out.println(\r\n        dt.withMinuteOfHour((dt.getMinuteOfHour() / windowMinutes) * windowMinutes)\r\n\t\t\t.minuteOfDay().roundFloorCopy()\r\n        );","title":"How to round DateTime of Joda library to the nearest X minutes?","body":"<p>Using pure DateTime (Joda) Java Library:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>DateTime dt = new DateTime(1385577373517L, DateTimeZone.UTC);\n// Prints 2013-11-27T18:36:13.517Z\nSystem.out.println(dt);\n\n// Prints 2013-11-27T18:36:00.000Z (Floor rounded to a minute)\nSystem.out.println(dt.minuteOfDay().roundFloorCopy());\n\n// Prints 2013-11-27T18:30:00.000Z (Rounded to custom minute Window)\nint windowMinutes = 10;\nSystem.out.println(\n    dt.withMinuteOfHour((dt.getMinuteOfHour() / windowMinutes) * windowMinutes)\n        .minuteOfDay().roundFloorCopy()\n    );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3346139,"reputation":14655,"user_id":2811258,"accept_rate":88,"display_name":"Johnny"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1488798454,"creation_date":1488798454,"answer_id":42624023,"question_id":11222316,"body_markdown":"When you want to round [Joda DateTime][1] the best solution IMHO is to use the built-in `roundHalfCeilingCopy` and `roundHalfFloorCopy` methods:\r\n\r\n    DateTime dateTime = DateTime.now();\r\n    DateTime newDateTime = dateTime.minuteOfHour().roundHalfCeilingCopy();\r\n\r\nPlease note that `roundHalfCeilingCopy` will favor the ceiling if halfway. You can use `roundHalfFloorCopy` in order to favor the floor in case it&#39;s halfway.\r\n\r\n\r\n  [1]: http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html","title":"How to round DateTime of Joda library to the nearest X minutes?","body":"<p>When you want to round <a href=\"http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html\" rel=\"noreferrer\">Joda DateTime</a> the best solution IMHO is to use the built-in <code>roundHalfCeilingCopy</code> and <code>roundHalfFloorCopy</code> methods:</p>\n\n<pre><code>DateTime dateTime = DateTime.now();\nDateTime newDateTime = dateTime.minuteOfHour().roundHalfCeilingCopy();\n</code></pre>\n\n<p>Please note that <code>roundHalfCeilingCopy</code> will favor the ceiling if halfway. You can use <code>roundHalfFloorCopy</code> in order to favor the floor in case it's halfway.</p>\n"},{"tags":[],"owner":{"account_id":5112414,"reputation":962,"user_id":4098638,"display_name":"Sviatoslav Zaitsev"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1602445122,"creation_date":1602445122,"answer_id":64308265,"question_id":11222316,"body_markdown":"I have a function for LocalTime class but I think it&#39;s very easy to adopt my sample for your case:\r\n\r\n(Kotlin lang)\r\n\r\n    fun LocalTime.round(roundValue: Int): LocalTime {\r\n        val timeInMillis = this.millisOfDay\r\n        val remainder = timeInMillis % roundValue\r\n        return when {\r\n            remainder &lt; (roundValue / 2) -&gt; LocalTime.fromMillisOfDay((timeInMillis - remainder).toLong())\r\n            else -&gt; LocalTime.fromMillisOfDay((timeInMillis + (roundValue - remainder)).toLong())\r\n        }\r\n    }\r\n\r\nAnd usage:\r\n\r\n    var userWakeTime = LocalTime(6, 42)\r\n    userWakeTime = userWakeTime.round(15 * 60 * 1000) // userWakeTime = 6:45","title":"How to round DateTime of Joda library to the nearest X minutes?","body":"<p>I have a function for LocalTime class but I think it's very easy to adopt my sample for your case:</p>\n<p>(Kotlin lang)</p>\n<pre><code>fun LocalTime.round(roundValue: Int): LocalTime {\n    val timeInMillis = this.millisOfDay\n    val remainder = timeInMillis % roundValue\n    return when {\n        remainder &lt; (roundValue / 2) -&gt; LocalTime.fromMillisOfDay((timeInMillis - remainder).toLong())\n        else -&gt; LocalTime.fromMillisOfDay((timeInMillis + (roundValue - remainder)).toLong())\n    }\n}\n</code></pre>\n<p>And usage:</p>\n<pre><code>var userWakeTime = LocalTime(6, 42)\nuserWakeTime = userWakeTime.round(15 * 60 * 1000) // userWakeTime = 6:45\n</code></pre>\n"}],"owner":{"account_id":246765,"reputation":41329,"user_id":521070,"accept_rate":72,"display_name":"Michael"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23349,"favorite_count":0,"down_vote_count":1,"up_vote_count":30,"accepted_answer_id":12800826,"answer_count":6,"score":29,"last_activity_date":1695289216,"creation_date":1340786081,"question_id":11222316,"body_markdown":"How to round `DateTime` of `Joda` library to the nearest `X` minutes ?  \r\nFor example:\r\n\r\n&lt;pre&gt;X = 10 minutes\r\nJun 27, 11:32 -&gt; Jun 27, 11:30\r\nJun 27, 11:33 -&gt; Jun 27, 11:30\r\nJun 27, 11:34 -&gt; Jun 27, 11:30\r\nJun 27, 11:35 -&gt; Jun 27, 11:40\r\nJun 27, 11:36 -&gt; Jun 27, 11:40\r\nJun 27, 11:37 -&gt; Jun 27, 11:40\r\n&lt;/pre&gt;","title":"How to round DateTime of Joda library to the nearest X minutes?","body":"<p>How to round <code>DateTime</code> of <code>Joda</code> library to the nearest <code>X</code> minutes ?<br>\nFor example:</p>\n\n<pre>X = 10 minutes\nJun 27, 11:32 -> Jun 27, 11:30\nJun 27, 11:33 -> Jun 27, 11:30\nJun 27, 11:34 -> Jun 27, 11:30\nJun 27, 11:35 -> Jun 27, 11:40\nJun 27, 11:36 -> Jun 27, 11:40\nJun 27, 11:37 -> Jun 27, 11:40\n</pre>\n"},{"tags":["java","spring-boot","rabbitmq","ssl-certificate"],"answers":[{"tags":[],"owner":{"account_id":10466881,"reputation":166,"user_id":7716050,"display_name":"hugoalexandremf"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688385365,"creation_date":1681296635,"answer_id":75994594,"question_id":67917016,"body_markdown":"Spring is complaining that it doesn&#39;t trust on the certificate presented by the host `rmq-lb.uat.mycompany.com`. \r\n\r\nIndeed the issue appears to be with the TrustStore that is being passed to the application. \r\n\r\nLocally it works because the code is creating an accepting TrustStrategy, i.e. the Spring application is going to trust in all the presented server certificates.\r\n\r\nIf the certificate that is being used in `rmq-lb.uat.mycompany.com` is trusted, i.e. was issued by a trusted CA (Certificate Authority) contained in the cacerts, there shouldn&#39;t be a problem. \r\n\r\nFor development purposes it is ok to trust in all the server certificates, but in production environment it is not advisable as one should only trust in SSL certificates that were issued by official Certificate Authorities.\r\n\r\nOne thing to check is the certificate chain of the server certificate present in `rmq-lb.uat.mycompany.com`, and more precisely the CA root certificate. One must also check the intermediate certificates present in the certificate chain. If it was indeed issued by a trusted authority and this CA is not included in the cacerts of the JDK we can include it manually in an already created TrustStore with the command (keytool is present in the JDK bin folder):\r\n\r\n    keytool -importcert -file /pathToCert/certToTrust.cer -keystore /pathToJKS/truststore.jks -alias &quot;certToTrust&quot;\r\n\r\nor alternatively if we want to create a Java KeyStore (JKS) with the specific certificate we can use the same command and it will create a TrustStore with the specified certificate inside.","title":"Error connecting to RabbitMQ instance with SSL using java spring-boot","body":"<p>Spring is complaining that it doesn't trust on the certificate presented by the host <code>rmq-lb.uat.mycompany.com</code>.</p>\n<p>Indeed the issue appears to be with the TrustStore that is being passed to the application.</p>\n<p>Locally it works because the code is creating an accepting TrustStrategy, i.e. the Spring application is going to trust in all the presented server certificates.</p>\n<p>If the certificate that is being used in <code>rmq-lb.uat.mycompany.com</code> is trusted, i.e. was issued by a trusted CA (Certificate Authority) contained in the cacerts, there shouldn't be a problem.</p>\n<p>For development purposes it is ok to trust in all the server certificates, but in production environment it is not advisable as one should only trust in SSL certificates that were issued by official Certificate Authorities.</p>\n<p>One thing to check is the certificate chain of the server certificate present in <code>rmq-lb.uat.mycompany.com</code>, and more precisely the CA root certificate. One must also check the intermediate certificates present in the certificate chain. If it was indeed issued by a trusted authority and this CA is not included in the cacerts of the JDK we can include it manually in an already created TrustStore with the command (keytool is present in the JDK bin folder):</p>\n<pre><code>keytool -importcert -file /pathToCert/certToTrust.cer -keystore /pathToJKS/truststore.jks -alias &quot;certToTrust&quot;\n</code></pre>\n<p>or alternatively if we want to create a Java KeyStore (JKS) with the specific certificate we can use the same command and it will create a TrustStore with the specified certificate inside.</p>\n"}],"owner":{"account_id":7728613,"reputation":794,"user_id":5852506,"display_name":"R13mus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3448,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695288514,"creation_date":1623311823,"question_id":67917016,"body_markdown":"I have a problem connecting with my java app in spring-boog to a UAT server in AWS where my RabbitMQ is hosted. I have a load balancer in front which then redirects my requests to one of the RMQ instances.\r\n\r\nI use SSL to connect to RabbitMQ and I generated a .p12 (PKCS12) cert file. \r\n\r\nThis is the properties file for the spring-boot java app : \r\n\r\n```\r\nspring.rabbitmq.host=rmq-lb.uat.mycompany.com\r\nspring.rabbitmq.port=5671\r\nspring.rabbitmq.username=live_prices\r\nspring.rabbitmq.password=aaaa\r\nspring.rabbitmq.virtualHost=my_virtualhost\r\nspring.rabbitmq.ssl.enabled=true\r\nspring.rabbitmq.ssl.algorithm=TLSv1.2\r\nspring.rabbitmq.ssl.key-store=classpath:/rmq_wr.uat.p12\r\nspring.rabbitmq.ssl.key-store-password=bbbb\r\n...\r\n```\r\n\r\nIf I use a .NET app I don&#39;t have to do any additional steps and I can connect to the RMQ instance with this single .p12 file. Also, if I try to connect locally via a docker container to a RMQ instance it works as well.\r\n\r\nBelow is my Spring configuration class :\r\n\r\n```\r\n@Configuration\r\npublic class RabbitMQConfig {\r\n\r\n\t@Value(&quot;${mycompany.rabbitmq.queue}&quot;)\r\n\tString queueName;\r\n\r\n\t@Value(&quot;${mycompany.rabbitmq.exchange}&quot;)\r\n\tString exchange;\r\n\r\n\t@Value(&quot;${mycompany.rabbitmq.routingkey}&quot;)\r\n\tprivate String routingkey;    \r\n\r\n\t@Bean\r\n\tQueue queue() {\r\n\t\treturn new Queue(queueName, true);\r\n\t}\r\n\r\n\t@Bean\r\n\tTopicExchange exchange() {\r\n\t\treturn new TopicExchange (exchange);\r\n\t}\r\n\r\n\t@Bean\r\n\tBinding binding(Queue queue, TopicExchange exchange) {\r\n\t\treturn BindingBuilder.bind(queue).to(exchange).with(routingkey);\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic MessageConverter jsonMessageConverter() {\r\n\t\treturn new Jackson2JsonMessageConverter();\r\n\t}\r\n\t\r\n\tpublic AmqpTemplate rabbitTemplate(ConnectionFactory connectionFactory) {\r\n\t\tfinal RabbitTemplate rabbitTemplate = new RabbitTemplate(connectionFactory);\r\n\t\trabbitTemplate.setMessageConverter(jsonMessageConverter());\r\n\t\treturn rabbitTemplate;\r\n\t}\r\n}\r\n```\r\n\r\nThis is the error that I get when debugging the app: \r\n\r\n```\r\n2021-06-10 09:38:19.914  INFO 20056 --- [  restartedMain] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [rmq-lb.uat.mycompany.com:5671]\r\n2021-06-10 09:38:20.145 ERROR 20056 --- [  restartedMain] c.r.client.impl.SocketFrameHandler       : TLS connection failed: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n2021-06-10 09:38:20.149  INFO 20056 --- [  restartedMain] ConditionEvaluationReportLoggingListener : \r\n\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2021-06-10 09:38:20.176 ERROR 20056 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\r\n\r\njava.lang.IllegalStateException: Failed to execute CommandLineRunner\r\n        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:822) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:803) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:346) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        at com.mycompany.rmqconnector.RMQConnectorApp.main(RMQConnectorApp.java:119) ~[classes/:na]\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n        at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.4.5.jar:2.4.5]\r\nCaused by: org.springframework.amqp.AmqpIOException: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n        at org.springframework.amqp.rabbit.support.RabbitExceptionTranslator.convertRabbitAccessException(RabbitExceptionTranslator.java:70) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:602) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:724) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.createConnection(ConnectionFactoryUtils.java:216) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:2132) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2105) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.send(RabbitTemplate.java:1049) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1114) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1107) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at com.mycompany.rmq.RabbitMQSender.send(RabbitMQSender.java:26) ~[classes/:na]\r\n        at com.mycompany.rmqconnector.RMQConnectorApp.givenUsingTimer_whenSchedulingTaskOnce_thenCorrect(RMQConnectorApp.java:99) ~[classes/:na]\r\n        at com.mycompany.rmqconnector.RMQConnectorApp.lambda$0(RMQConnectorApp.java:60) ~[classes/:na]\r\n        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:819) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        ... 10 common frames omitted\r\nCaused by: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n        at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131) ~[na:na]\r\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:326) ~[na:na]\r\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:269) ~[na:na]\r\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:264) ~[na:na]\r\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:645) ~[na:na]\r\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:464) ~[na:na]\r\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:360) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392) ~[na:na]\r\n        at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:444) ~[na:na]\r\n        at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:422) ~[na:na]\r\n        at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:183) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:171) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1403) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1309) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:440) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLSocketImpl.ensureNegotiated(SSLSocketImpl.java:814) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.write(SSLSocketImpl.java:1184) ~[na:na]\r\n        at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81) ~[na:na]\r\n        at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:142) ~[na:na]\r\n        at java.base/java.io.DataOutputStream.flush(DataOutputStream.java:123) ~[na:na]\r\n        at com.rabbitmq.client.impl.SocketFrameHandler.sendHeader(SocketFrameHandler.java:160) ~[amqp-client-5.10.0.jar:5.10.0]\r\n        at com.rabbitmq.client.impl.SocketFrameHandler.sendHeader(SocketFrameHandler.java:170) ~[amqp-client-5.10.0.jar:5.10.0]\r\n        at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:314) ~[amqp-client-5.10.0.jar:5.10.0]\r\n        at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1139) ~[amqp-client-5.10.0.jar:5.10.0]\r\n        at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1087) ~[amqp-client-5.10.0.jar:5.10.0]\r\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connectAddresses(AbstractConnectionFactory.java:638) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connect(AbstractConnectionFactory.java:613) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:565) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        ... 21 common frames omitted\r\nCaused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n        at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:439) ~[na:na]\r\n        at java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:306) ~[na:na]\r\n        at java.base/sun.security.validator.Validator.validate(Validator.java:264) ~[na:na]\r\n        at java.base/sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:313) ~[na:na]\r\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:222) ~[na:na]\r\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:129) ~[na:na]\r\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:629) ~[na:na]\r\n        ... 44 common frames omitted\r\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n        at java.base/sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141) ~[na:na]\r\n        at java.base/sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126) ~[na:na]\r\n        at java.base/java.security.cert.CertPathBuilder.build(CertPathBuilder.java:297) ~[na:na]\r\n        at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:434) ~[na:na]\r\n        ... 50 common frames omitted\r\n```\r\n\r\nAny ideas ? Thanks a lot ! \r\n\r\n## Edit 1\r\n\r\nI managed to make it work in a simple Java app using Maven with the simple RabbitMQ client library. \r\n\r\nThis is the code :\r\n\r\n```\r\nchar[] keyPassphrase = &quot;bbbb&quot;.toCharArray();\r\n        KeyStore ks = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n        ks.load(this.getClass().getClassLoader().getResourceAsStream(&quot;rmq_wr.uat.p12&quot;), keyPassphrase);\r\n\r\n        KeyManagerFactory kmf = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\r\n        kmf.init(ks, keyPassphrase);\r\n\r\n        TrustManager[] trustAllCerts = new TrustManager[]{\r\n                new X509ExtendedTrustManager() {\r\n                    @Override\r\n                    public java.security.cert.X509Certificate[] getAcceptedIssuers() { return null; }\r\n                    @Override\r\n                    public void checkClientTrusted(java.security.cert.X509Certificate[] certs, String authType) {}\r\n                    @Override\r\n                    public void checkServerTrusted(java.security.cert.X509Certificate[] certs, String authType) {}\r\n                    @Override\r\n                    public void checkClientTrusted(java.security.cert.X509Certificate[] xcs, String string, Socket socket) throws CertificateException {}\r\n                    @Override\r\n                    public void checkServerTrusted(java.security.cert.X509Certificate[] xcs, String string, Socket socket) throws CertificateException {}\r\n                    @Override\r\n                    public void checkClientTrusted(java.security.cert.X509Certificate[] xcs, String string, SSLEngine ssle) throws CertificateException {}\r\n                    @Override\r\n                    public void checkServerTrusted(java.security.cert.X509Certificate[] xcs, String string, SSLEngine ssle) throws CertificateException {}\r\n                }\r\n        };\r\n\r\n        SSLContext c = SSLContext.getInstance(&quot;TLSv1.2&quot;);\r\n        c.init(kmf.getKeyManagers(), trustAllCerts, null);\r\n\r\n        ConnectionFactory factory = new ConnectionFactory();\r\n        factory.setHost(rmqHost);\r\n        factory.setPort(rmqPort);\r\n        factory.setUsername(rmqUsername);\r\n        factory.setPassword(rmqPassword);\r\n        factory.setVirtualHost(vhost);\r\n        factory.useSslProtocol(c);\r\n        //factory.enableHostnameVerification();\r\n\r\n        conn = factory.newConnection();\r\n        channel = conn.createChannel();\r\n\r\n        channel.basicPublish(&quot;my_exchange&quot;, &quot;test&quot;, null, &quot;Hello, World&quot;.getBytes());\r\n```\r\n\r\nI believe it has something to do with the TrustStore option in the application.properties\r\n\r\n```\r\n...\r\nspring.rabbitmq.ssl.trust-store=file:/C:/Users/User/Desktop/rmqconnector/src/main/resources/cacerts\r\nspring.rabbitmq.ssl.trust-store-password=changeit\r\nspring.rabbitmq.ssl.trust-store-type=JKS\r\n...\r\n```\r\n\r\nand in the code I tried : \r\n\r\n```\r\n@Bean\r\n\tpublic CachingConnectionFactory rabbitConnectionFactory(RabbitProperties config) throws Exception {\r\n\t\tClassPathResource keyStorePath = new ClassPathResource(&quot;rmq_wr.uat.p12&quot;);    \r\n\t\tClassPathResource trustStorePath = new ClassPathResource(&quot;rmquat.jks&quot;);\r\n\r\n\t\tRabbitConnectionFactoryBean factory = new RabbitConnectionFactoryBean();\r\n\t\tif (config.determineHost() != null) {\r\n\t\t\tfactory.setHost(config.determineHost());\r\n\t\t}\r\n\t\tfactory.setPort(config.determinePort());\r\n\t\tif (config.determineUsername() != null) {\r\n\t\t\tfactory.setUsername(config.determineUsername());\r\n\t\t}\r\n\t\tif (config.determinePassword() != null) {\r\n\t\t\tfactory.setPassword(config.determinePassword());\r\n\t\t}\r\n\t\tif (config.determineVirtualHost() != null) {\r\n\t\t\tfactory.setVirtualHost(config.determineVirtualHost());\r\n\t\t}\r\n\t\t// read ssl properties from applicaiton.properties\r\n\t\tRabbitProperties.Ssl ssl = config.getSsl();\r\n\t\tif (ssl.getEnabled()) {\r\n\t\t\tfactory.setUseSSL(true);\r\n\t\t\tif (ssl.getAlgorithm() != null) {\r\n\t\t\t\tfactory.setSslAlgorithm(ssl.getAlgorithm());\r\n\t\t\t}\r\n\t\t\t//System.out.println(&quot;keystore = &quot; + ssl.getKeyStore());\r\n\t\t\t// factory.set\r\n\t\t\t factory.setKeyStore(keyStorePath.getPath());\r\n\t\t\t factory.setKeyStoreType(ssl.getKeyStoreType());\r\n\t\t\t factory.setKeyStorePassphrase(ssl.getKeyStorePassword());\r\n\t\t\t\r\n\t\t\t factory.setTrustStore(ssl.getTrustStore());\r\n\t\t\t //factory.setTrustStore(trustStorePath.getPath());\r\n\t\t\t factory.setTrustStorePassphrase(&quot;changeit&quot;);\r\n\t\t\t factory.setTrustStoreType(&quot;JKS&quot;);\r\n\t\t\t//factory.setSkipServerCertificateValidation(true);\r\n\t\t}\r\n\t\tfactory.afterPropertiesSet();\r\n\r\n\t\tCachingConnectionFactory connectionFactory = new CachingConnectionFactory(factory.getObject());\t\t\r\n\t\tconnectionFactory.setAddresses(config.determineAddresses());\r\n\t\t//connectionFactory.setPublisherConfirms(config.isPublisherConfirms());\r\n\t\tconnectionFactory.setPublisherReturns(config.isPublisherReturns());\r\n\t\tif (config.getCache().getChannel().getSize() != null) {\r\n\t\t\tconnectionFactory.setChannelCacheSize(config.getCache().getChannel().getSize());\r\n\t\t}\r\n\t\tif (config.getCache().getConnection().getMode() != null) {\r\n\t\t\tconnectionFactory.setCacheMode(config.getCache().getConnection().getMode());\r\n\t\t}\r\n\t\tif (config.getCache().getConnection().getSize() != null) {\r\n\t\t\tconnectionFactory.setConnectionCacheSize(config.getCache().getConnection().getSize());\r\n\t\t}\r\n\t\treturn connectionFactory;\r\n\t}\r\n```\r\n\r\nbut this results in the following exception : \r\n\r\n```\r\n2021-06-15 20:32:04.345 ERROR 17816 --- [  restartedMain] c.r.client.impl.SocketFrameHandler       : TLS connection failed: No trusted certificate found\r\n2021-06-15 20:32:04.355  INFO 17816 --- [  restartedMain] ConditionEvaluationReportLoggingListener : \r\n\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2021-06-15 20:32:04.375 ERROR 17816 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\r\n\r\njava.lang.IllegalStateException: Failed to execute CommandLineRunner\r\n        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:822) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:803) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:346) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        at eu.rmqconnector.RMQConnectorApp.main(RMQConnectorApp.java:125) ~[classes/:na]\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n        at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.4.5.jar:2.4.5]\r\nCaused by: org.springframework.amqp.AmqpIOException: javax.net.ssl.SSLHandshakeException: No trusted certificate found\r\n        at org.springframework.amqp.rabbit.support.RabbitExceptionTranslator.convertRabbitAccessException(RabbitExceptionTranslator.java:70) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:602) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:724) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.createConnection(ConnectionFactoryUtils.java:216) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:2132) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2105) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.send(RabbitTemplate.java:1049) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1114) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1107) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at eu.rmq.RabbitMQSender.send(RabbitMQSender.java:26) ~[classes/:na]\r\n        at eu.rmqconnector.RMQConnectorApp.givenUsingTimer_whenSchedulingTaskOnce_thenCorrect(RMQConnectorApp.java:105) ~[classes/:na]\r\n        at eu.rmqconnector.RMQConnectorApp.lambda$0(RMQConnectorApp.java:66) ~[classes/:na]\r\n        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:819) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        ... 10 common frames omitted\r\nCaused by: javax.net.ssl.SSLHandshakeException: No trusted certificate found\r\n        at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131) ~[na:na]\r\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:326) ~[na:na]\r\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:269) ~[na:na]\r\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:264) ~[na:na]\r\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:645) ~[na:na]\r\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:464) ~[na:na]\r\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:360) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392) ~[na:na]\r\n        at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:444) ~[na:na]\r\n        at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:422) ~[na:na]\r\n        at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:183) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:171) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1403) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1309) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:440) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLSocketImpl.ensureNegotiated(SSLSocketImpl.java:814) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.write(SSLSocketImpl.java:1184) ~[na:na]\r\n        at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81) ~[na:na]\r\n        at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:142) ~[na:na]\r\n        at java.base/java.io.DataOutputStream.flush(DataOutputStream.java:123) ~[na:na]\r\n        at com.rabbitmq.client.impl.SocketFrameHandler.sendHeader(SocketFrameHandler.java:160) ~[amqp-client-5.10.0.jar:5.10.0]\r\n        at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:314) ~[amqp-client-5.10.0.jar:5.10.0]\r\n        at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1139) ~[amqp-client-5.10.0.jar:5.10.0]\r\n        at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1087) ~[amqp-client-5.10.0.jar:5.10.0]\r\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connectAddresses(AbstractConnectionFactory.java:638) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connect(AbstractConnectionFactory.java:613) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:565) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        ... 21 common frames omitted\r\nCaused by: sun.security.validator.ValidatorException: No trusted certificate found\r\n        at java.base/sun.security.validator.SimpleValidator.buildTrustedChain(SimpleValidator.java:411) ~[na:na]\r\n        at java.base/sun.security.validator.SimpleValidator.engineValidate(SimpleValidator.java:135) ~[na:na]\r\n        at java.base/sun.security.validator.Validator.validate(Validator.java:264) ~[na:na]\r\n        at java.base/sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:313) ~[na:na]\r\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:222) ~[na:na]\r\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:129) ~[na:na]\r\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:629) ~[na:na]\r\n        ... 44 common frames omitted\r\n```\r\n\r\nI list the entries in the keystore as following : \r\n\r\n```\r\nPS C:\\Users\\User\\Desktop\\rmqconnector\\src\\main\\resources&gt; keytool -list -keystore .\\rmq_wr.uat.p12 -storepass bbbb -storetype PKCS12\r\nKeystore type: PKCS12\r\nKeystore provider: SUN\r\n\r\nYour keystore contains 1 entry\r\n\r\n1, Jun 15, 2021, PrivateKeyEntry,\r\nCertificate fingerprint (SHA-256): D0:B5:76:...\r\n```\r\n\r\nI also copied the cacerts file to use it as a TrustStore, but this also does not work. \r\n\r\n```\r\nPS C:\\Users\\User\\Desktop\\rmqconnector\\src\\main\\resources&gt; keytool -list -keystore .\\cacerts -storepass changeit -storetype PKCS12\r\nKeystore type: PKCS12\r\nKeystore provider: SUN\r\n\r\nYour keystore contains 93 entries\r\n\r\n1, Jun 14, 2021, PrivateKeyEntry,\r\nCertificate fingerprint (SHA-256): D0:B5:76:...\r\n...\r\n```\r\n\r\n.","title":"Error connecting to RabbitMQ instance with SSL using java spring-boot","body":"<p>I have a problem connecting with my java app in spring-boog to a UAT server in AWS where my RabbitMQ is hosted. I have a load balancer in front which then redirects my requests to one of the RMQ instances.</p>\n<p>I use SSL to connect to RabbitMQ and I generated a .p12 (PKCS12) cert file.</p>\n<p>This is the properties file for the spring-boot java app :</p>\n<pre><code>spring.rabbitmq.host=rmq-lb.uat.mycompany.com\nspring.rabbitmq.port=5671\nspring.rabbitmq.username=live_prices\nspring.rabbitmq.password=aaaa\nspring.rabbitmq.virtualHost=my_virtualhost\nspring.rabbitmq.ssl.enabled=true\nspring.rabbitmq.ssl.algorithm=TLSv1.2\nspring.rabbitmq.ssl.key-store=classpath:/rmq_wr.uat.p12\nspring.rabbitmq.ssl.key-store-password=bbbb\n...\n</code></pre>\n<p>If I use a .NET app I don't have to do any additional steps and I can connect to the RMQ instance with this single .p12 file. Also, if I try to connect locally via a docker container to a RMQ instance it works as well.</p>\n<p>Below is my Spring configuration class :</p>\n<pre><code>@Configuration\npublic class RabbitMQConfig {\n\n    @Value(&quot;${mycompany.rabbitmq.queue}&quot;)\n    String queueName;\n\n    @Value(&quot;${mycompany.rabbitmq.exchange}&quot;)\n    String exchange;\n\n    @Value(&quot;${mycompany.rabbitmq.routingkey}&quot;)\n    private String routingkey;    \n\n    @Bean\n    Queue queue() {\n        return new Queue(queueName, true);\n    }\n\n    @Bean\n    TopicExchange exchange() {\n        return new TopicExchange (exchange);\n    }\n\n    @Bean\n    Binding binding(Queue queue, TopicExchange exchange) {\n        return BindingBuilder.bind(queue).to(exchange).with(routingkey);\n    }\n\n    @Bean\n    public MessageConverter jsonMessageConverter() {\n        return new Jackson2JsonMessageConverter();\n    }\n    \n    public AmqpTemplate rabbitTemplate(ConnectionFactory connectionFactory) {\n        final RabbitTemplate rabbitTemplate = new RabbitTemplate(connectionFactory);\n        rabbitTemplate.setMessageConverter(jsonMessageConverter());\n        return rabbitTemplate;\n    }\n}\n</code></pre>\n<p>This is the error that I get when debugging the app:</p>\n<pre><code>2021-06-10 09:38:19.914  INFO 20056 --- [  restartedMain] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [rmq-lb.uat.mycompany.com:5671]\n2021-06-10 09:38:20.145 ERROR 20056 --- [  restartedMain] c.r.client.impl.SocketFrameHandler       : TLS connection failed: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n2021-06-10 09:38:20.149  INFO 20056 --- [  restartedMain] ConditionEvaluationReportLoggingListener : \n\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2021-06-10 09:38:20.176 ERROR 20056 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\n\njava.lang.IllegalStateException: Failed to execute CommandLineRunner\n        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:822) ~[spring-boot-2.4.5.jar:2.4.5]\n        at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:803) ~[spring-boot-2.4.5.jar:2.4.5]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:346) ~[spring-boot-2.4.5.jar:2.4.5]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]\n        at com.mycompany.rmqconnector.RMQConnectorApp.main(RMQConnectorApp.java:119) ~[classes/:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n        at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.4.5.jar:2.4.5]\nCaused by: org.springframework.amqp.AmqpIOException: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n        at org.springframework.amqp.rabbit.support.RabbitExceptionTranslator.convertRabbitAccessException(RabbitExceptionTranslator.java:70) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:602) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:724) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.createConnection(ConnectionFactoryUtils.java:216) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:2132) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2105) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.send(RabbitTemplate.java:1049) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1114) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1107) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at com.mycompany.rmq.RabbitMQSender.send(RabbitMQSender.java:26) ~[classes/:na]\n        at com.mycompany.rmqconnector.RMQConnectorApp.givenUsingTimer_whenSchedulingTaskOnce_thenCorrect(RMQConnectorApp.java:99) ~[classes/:na]\n        at com.mycompany.rmqconnector.RMQConnectorApp.lambda$0(RMQConnectorApp.java:60) ~[classes/:na]\n        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:819) ~[spring-boot-2.4.5.jar:2.4.5]\n        ... 10 common frames omitted\nCaused by: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n        at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131) ~[na:na]\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:326) ~[na:na]\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:269) ~[na:na]\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:264) ~[na:na]\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:645) ~[na:na]\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:464) ~[na:na]\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:360) ~[na:na]\n        at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392) ~[na:na]\n        at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:444) ~[na:na]\n        at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:422) ~[na:na]\n        at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:183) ~[na:na]\n        at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:171) ~[na:na]\n        at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1403) ~[na:na]\n        at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1309) ~[na:na]\n        at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:440) ~[na:na]\n        at java.base/sun.security.ssl.SSLSocketImpl.ensureNegotiated(SSLSocketImpl.java:814) ~[na:na]\n        at java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.write(SSLSocketImpl.java:1184) ~[na:na]\n        at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81) ~[na:na]\n        at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:142) ~[na:na]\n        at java.base/java.io.DataOutputStream.flush(DataOutputStream.java:123) ~[na:na]\n        at com.rabbitmq.client.impl.SocketFrameHandler.sendHeader(SocketFrameHandler.java:160) ~[amqp-client-5.10.0.jar:5.10.0]\n        at com.rabbitmq.client.impl.SocketFrameHandler.sendHeader(SocketFrameHandler.java:170) ~[amqp-client-5.10.0.jar:5.10.0]\n        at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:314) ~[amqp-client-5.10.0.jar:5.10.0]\n        at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1139) ~[amqp-client-5.10.0.jar:5.10.0]\n        at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1087) ~[amqp-client-5.10.0.jar:5.10.0]\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connectAddresses(AbstractConnectionFactory.java:638) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connect(AbstractConnectionFactory.java:613) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:565) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        ... 21 common frames omitted\nCaused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n        at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:439) ~[na:na]\n        at java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:306) ~[na:na]\n        at java.base/sun.security.validator.Validator.validate(Validator.java:264) ~[na:na]\n        at java.base/sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:313) ~[na:na]\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:222) ~[na:na]\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:129) ~[na:na]\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:629) ~[na:na]\n        ... 44 common frames omitted\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n        at java.base/sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141) ~[na:na]\n        at java.base/sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126) ~[na:na]\n        at java.base/java.security.cert.CertPathBuilder.build(CertPathBuilder.java:297) ~[na:na]\n        at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:434) ~[na:na]\n        ... 50 common frames omitted\n</code></pre>\n<p>Any ideas ? Thanks a lot !</p>\n<h2>Edit 1</h2>\n<p>I managed to make it work in a simple Java app using Maven with the simple RabbitMQ client library.</p>\n<p>This is the code :</p>\n<pre><code>char[] keyPassphrase = &quot;bbbb&quot;.toCharArray();\n        KeyStore ks = KeyStore.getInstance(&quot;PKCS12&quot;);\n        ks.load(this.getClass().getClassLoader().getResourceAsStream(&quot;rmq_wr.uat.p12&quot;), keyPassphrase);\n\n        KeyManagerFactory kmf = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\n        kmf.init(ks, keyPassphrase);\n\n        TrustManager[] trustAllCerts = new TrustManager[]{\n                new X509ExtendedTrustManager() {\n                    @Override\n                    public java.security.cert.X509Certificate[] getAcceptedIssuers() { return null; }\n                    @Override\n                    public void checkClientTrusted(java.security.cert.X509Certificate[] certs, String authType) {}\n                    @Override\n                    public void checkServerTrusted(java.security.cert.X509Certificate[] certs, String authType) {}\n                    @Override\n                    public void checkClientTrusted(java.security.cert.X509Certificate[] xcs, String string, Socket socket) throws CertificateException {}\n                    @Override\n                    public void checkServerTrusted(java.security.cert.X509Certificate[] xcs, String string, Socket socket) throws CertificateException {}\n                    @Override\n                    public void checkClientTrusted(java.security.cert.X509Certificate[] xcs, String string, SSLEngine ssle) throws CertificateException {}\n                    @Override\n                    public void checkServerTrusted(java.security.cert.X509Certificate[] xcs, String string, SSLEngine ssle) throws CertificateException {}\n                }\n        };\n\n        SSLContext c = SSLContext.getInstance(&quot;TLSv1.2&quot;);\n        c.init(kmf.getKeyManagers(), trustAllCerts, null);\n\n        ConnectionFactory factory = new ConnectionFactory();\n        factory.setHost(rmqHost);\n        factory.setPort(rmqPort);\n        factory.setUsername(rmqUsername);\n        factory.setPassword(rmqPassword);\n        factory.setVirtualHost(vhost);\n        factory.useSslProtocol(c);\n        //factory.enableHostnameVerification();\n\n        conn = factory.newConnection();\n        channel = conn.createChannel();\n\n        channel.basicPublish(&quot;my_exchange&quot;, &quot;test&quot;, null, &quot;Hello, World&quot;.getBytes());\n</code></pre>\n<p>I believe it has something to do with the TrustStore option in the application.properties</p>\n<pre><code>...\nspring.rabbitmq.ssl.trust-store=file:/C:/Users/User/Desktop/rmqconnector/src/main/resources/cacerts\nspring.rabbitmq.ssl.trust-store-password=changeit\nspring.rabbitmq.ssl.trust-store-type=JKS\n...\n</code></pre>\n<p>and in the code I tried :</p>\n<pre><code>@Bean\n    public CachingConnectionFactory rabbitConnectionFactory(RabbitProperties config) throws Exception {\n        ClassPathResource keyStorePath = new ClassPathResource(&quot;rmq_wr.uat.p12&quot;);    \n        ClassPathResource trustStorePath = new ClassPathResource(&quot;rmquat.jks&quot;);\n\n        RabbitConnectionFactoryBean factory = new RabbitConnectionFactoryBean();\n        if (config.determineHost() != null) {\n            factory.setHost(config.determineHost());\n        }\n        factory.setPort(config.determinePort());\n        if (config.determineUsername() != null) {\n            factory.setUsername(config.determineUsername());\n        }\n        if (config.determinePassword() != null) {\n            factory.setPassword(config.determinePassword());\n        }\n        if (config.determineVirtualHost() != null) {\n            factory.setVirtualHost(config.determineVirtualHost());\n        }\n        // read ssl properties from applicaiton.properties\n        RabbitProperties.Ssl ssl = config.getSsl();\n        if (ssl.getEnabled()) {\n            factory.setUseSSL(true);\n            if (ssl.getAlgorithm() != null) {\n                factory.setSslAlgorithm(ssl.getAlgorithm());\n            }\n            //System.out.println(&quot;keystore = &quot; + ssl.getKeyStore());\n            // factory.set\n             factory.setKeyStore(keyStorePath.getPath());\n             factory.setKeyStoreType(ssl.getKeyStoreType());\n             factory.setKeyStorePassphrase(ssl.getKeyStorePassword());\n            \n             factory.setTrustStore(ssl.getTrustStore());\n             //factory.setTrustStore(trustStorePath.getPath());\n             factory.setTrustStorePassphrase(&quot;changeit&quot;);\n             factory.setTrustStoreType(&quot;JKS&quot;);\n            //factory.setSkipServerCertificateValidation(true);\n        }\n        factory.afterPropertiesSet();\n\n        CachingConnectionFactory connectionFactory = new CachingConnectionFactory(factory.getObject());     \n        connectionFactory.setAddresses(config.determineAddresses());\n        //connectionFactory.setPublisherConfirms(config.isPublisherConfirms());\n        connectionFactory.setPublisherReturns(config.isPublisherReturns());\n        if (config.getCache().getChannel().getSize() != null) {\n            connectionFactory.setChannelCacheSize(config.getCache().getChannel().getSize());\n        }\n        if (config.getCache().getConnection().getMode() != null) {\n            connectionFactory.setCacheMode(config.getCache().getConnection().getMode());\n        }\n        if (config.getCache().getConnection().getSize() != null) {\n            connectionFactory.setConnectionCacheSize(config.getCache().getConnection().getSize());\n        }\n        return connectionFactory;\n    }\n</code></pre>\n<p>but this results in the following exception :</p>\n<pre><code>2021-06-15 20:32:04.345 ERROR 17816 --- [  restartedMain] c.r.client.impl.SocketFrameHandler       : TLS connection failed: No trusted certificate found\n2021-06-15 20:32:04.355  INFO 17816 --- [  restartedMain] ConditionEvaluationReportLoggingListener : \n\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2021-06-15 20:32:04.375 ERROR 17816 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\n\njava.lang.IllegalStateException: Failed to execute CommandLineRunner\n        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:822) ~[spring-boot-2.4.5.jar:2.4.5]\n        at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:803) ~[spring-boot-2.4.5.jar:2.4.5]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:346) ~[spring-boot-2.4.5.jar:2.4.5]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]\n        at eu.rmqconnector.RMQConnectorApp.main(RMQConnectorApp.java:125) ~[classes/:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n        at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.4.5.jar:2.4.5]\nCaused by: org.springframework.amqp.AmqpIOException: javax.net.ssl.SSLHandshakeException: No trusted certificate found\n        at org.springframework.amqp.rabbit.support.RabbitExceptionTranslator.convertRabbitAccessException(RabbitExceptionTranslator.java:70) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:602) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:724) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.createConnection(ConnectionFactoryUtils.java:216) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:2132) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2105) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.send(RabbitTemplate.java:1049) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1114) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1107) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at eu.rmq.RabbitMQSender.send(RabbitMQSender.java:26) ~[classes/:na]\n        at eu.rmqconnector.RMQConnectorApp.givenUsingTimer_whenSchedulingTaskOnce_thenCorrect(RMQConnectorApp.java:105) ~[classes/:na]\n        at eu.rmqconnector.RMQConnectorApp.lambda$0(RMQConnectorApp.java:66) ~[classes/:na]\n        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:819) ~[spring-boot-2.4.5.jar:2.4.5]\n        ... 10 common frames omitted\nCaused by: javax.net.ssl.SSLHandshakeException: No trusted certificate found\n        at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131) ~[na:na]\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:326) ~[na:na]\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:269) ~[na:na]\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:264) ~[na:na]\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:645) ~[na:na]\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:464) ~[na:na]\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:360) ~[na:na]\n        at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392) ~[na:na]\n        at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:444) ~[na:na]\n        at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:422) ~[na:na]\n        at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:183) ~[na:na]\n        at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:171) ~[na:na]\n        at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1403) ~[na:na]\n        at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1309) ~[na:na]\n        at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:440) ~[na:na]\n        at java.base/sun.security.ssl.SSLSocketImpl.ensureNegotiated(SSLSocketImpl.java:814) ~[na:na]\n        at java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.write(SSLSocketImpl.java:1184) ~[na:na]\n        at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81) ~[na:na]\n        at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:142) ~[na:na]\n        at java.base/java.io.DataOutputStream.flush(DataOutputStream.java:123) ~[na:na]\n        at com.rabbitmq.client.impl.SocketFrameHandler.sendHeader(SocketFrameHandler.java:160) ~[amqp-client-5.10.0.jar:5.10.0]\n        at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:314) ~[amqp-client-5.10.0.jar:5.10.0]\n        at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1139) ~[amqp-client-5.10.0.jar:5.10.0]\n        at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1087) ~[amqp-client-5.10.0.jar:5.10.0]\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connectAddresses(AbstractConnectionFactory.java:638) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connect(AbstractConnectionFactory.java:613) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:565) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        ... 21 common frames omitted\nCaused by: sun.security.validator.ValidatorException: No trusted certificate found\n        at java.base/sun.security.validator.SimpleValidator.buildTrustedChain(SimpleValidator.java:411) ~[na:na]\n        at java.base/sun.security.validator.SimpleValidator.engineValidate(SimpleValidator.java:135) ~[na:na]\n        at java.base/sun.security.validator.Validator.validate(Validator.java:264) ~[na:na]\n        at java.base/sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:313) ~[na:na]\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:222) ~[na:na]\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:129) ~[na:na]\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:629) ~[na:na]\n        ... 44 common frames omitted\n</code></pre>\n<p>I list the entries in the keystore as following :</p>\n<pre><code>PS C:\\Users\\User\\Desktop\\rmqconnector\\src\\main\\resources&gt; keytool -list -keystore .\\rmq_wr.uat.p12 -storepass bbbb -storetype PKCS12\nKeystore type: PKCS12\nKeystore provider: SUN\n\nYour keystore contains 1 entry\n\n1, Jun 15, 2021, PrivateKeyEntry,\nCertificate fingerprint (SHA-256): D0:B5:76:...\n</code></pre>\n<p>I also copied the cacerts file to use it as a TrustStore, but this also does not work.</p>\n<pre><code>PS C:\\Users\\User\\Desktop\\rmqconnector\\src\\main\\resources&gt; keytool -list -keystore .\\cacerts -storepass changeit -storetype PKCS12\nKeystore type: PKCS12\nKeystore provider: SUN\n\nYour keystore contains 93 entries\n\n1, Jun 14, 2021, PrivateKeyEntry,\nCertificate fingerprint (SHA-256): D0:B5:76:...\n...\n</code></pre>\n<p>.</p>\n"},{"tags":["java","minecraft"],"answers":[{"tags":[],"owner":{"account_id":29482069,"reputation":11,"user_id":22592744,"display_name":"Umatriz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695199236,"creation_date":1695199236,"answer_id":77140710,"question_id":77134835,"body_markdown":"Solution:\r\n\r\n 1. Download natives libs for LWJGL. They are in the `classifiers` section in the version manifest\r\n 3. Add them to classpath","title":"Running Minecraft. [LWJGL] Failed to load a library","body":"<p>Solution:</p>\n<ol>\n<li>Download natives libs for LWJGL. They are in the <code>classifiers</code> section in the version manifest</li>\n<li>Add them to classpath</li>\n</ol>\n"}],"owner":{"account_id":29482069,"reputation":11,"user_id":22592744,"display_name":"Umatriz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":364,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77140710,"answer_count":1,"score":-1,"last_activity_date":1695288469,"creation_date":1695128885,"question_id":77134835,"body_markdown":"I&#39;m developing my own Minecraft launcher in Rust. Now I have problems with running it.\r\n\r\nI use this command to run Minecraft:\r\n```bash\r\njava -XX:HeapDumpPath=MojangTricksIntelDriversForPerformance_javaw.exe_minecraft.exe.heapdump -Dos.name=Windows 10 -Dos.version=10.0 -Xss1M -Djava.library.path=E:\\\\programming\\\\code\\\\nomi\\\\nomi_core\\\\minecraft\\\\versions\\\\1.18.2\\\\natives -Dminecraft.launcher.brand=nomi -Dminecraft.launcher.version=0.0.1 -cp classpath_here net.minecraft.client.main.Main --username Name --version 1.18.2 --gameDir Path/to/game/dir --assetsDir Path/to/assets/dir --assetIndex 1.18 --uuid null --accessToken null unknow_params(below) --versionType release\r\n```\r\nI don&#39;t know what these params do (I ignore them in my command):\r\n```bash\r\n--clientId ${clientid} --xuid ${auth_xuid} --userType ${user_type}\r\n```\r\n\r\nAnd I&#39;m getting this error:\r\n```bash\r\n[16:03:53] [main/WARN]: Unrecognized user type: ${user_type}\r\n[16:03:53] [Render thread/INFO]: [STDERR]: [LWJGL] Failed to load a library. Possible solutions:\r\n        a) Add the directory that contains the shared library to -Djava.library.path or -Dorg.lwjgl.librarypath.\r\n        b) Add the JAR that contains the shared library to the classpath.\r\n[16:03:53] [Render thread/INFO]: [STDERR]: [LWJGL] Enable debug mode with -Dorg.lwjgl.util.Debug=true for better diagnostics.\r\n[16:03:53] [Render thread/INFO]: [STDERR]: [LWJGL] Enable the SharedLibraryLoader debug mode with -Dorg.lwjgl.util.DebugLoader=true for better diagnostics.\r\nException in thread &quot;Render thread&quot; [16:03:53] [Render thread/INFO]: [STDERR]: java.lang.NoClassDefFoundError: Could not initialize class com.mojang.blaze3d.systems.RenderSystem\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at ac.a(SourceFile:65)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dyr.a(SourceFile:2394)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dyr.a(SourceFile:2389)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at net.minecraft.client.main.Main.main(SourceFile:206)\r\n[16:03:54] [Render thread/INFO]: [STDERR]: Caused by: java.lang.ExceptionInInitializerError: Exception java.lang.UnsatisfiedLinkError: Failed to locate \r\nlibrary: lwjgl.dll [in thread &quot;Render thread&quot;]\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at org.lwjgl.system.Library.loadSystem(Library.java:147)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at org.lwjgl.system.Library.loadSystem(Library.java:67)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at org.lwjgl.system.Library.&lt;clinit&gt;(Library.java:50)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at org.lwjgl.system.MemoryUtil.&lt;clinit&gt;(MemoryUtil.java:97)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dsk.&lt;clinit&gt;(SourceFile:8)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dth.&lt;init&gt;(SourceFile:56)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dto.&lt;init&gt;(SourceFile:19)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dto.&lt;init&gt;(SourceFile:23)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dto.&lt;clinit&gt;(SourceFile:11)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at com.mojang.blaze3d.systems.RenderSystem.&lt;clinit&gt;(SourceFile:46)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at net.minecraft.client.main.Main.main(SourceFile:194)\r\n```\r\n\r\nI have java 17.0.7\r\n`java --version` output:\r\n```bash\r\nopenjdk 17.0.7 2023-04-18\r\nOpenJDK Runtime Environment Temurin-17.0.7+7 (build 17.0.7+7)\r\nOpenJDK 64-Bit Server VM Temurin-17.0.7+7 (build 17.0.7+7, mixed mode, sharing)\r\n```\r\n\r\nI have no idea how to fix it but Minecraft must launch","title":"Running Minecraft. [LWJGL] Failed to load a library","body":"<p>I'm developing my own Minecraft launcher in Rust. Now I have problems with running it.</p>\n<p>I use this command to run Minecraft:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java -XX:HeapDumpPath=MojangTricksIntelDriversForPerformance_javaw.exe_minecraft.exe.heapdump -Dos.name=Windows 10 -Dos.version=10.0 -Xss1M -Djava.library.path=E:\\\\programming\\\\code\\\\nomi\\\\nomi_core\\\\minecraft\\\\versions\\\\1.18.2\\\\natives -Dminecraft.launcher.brand=nomi -Dminecraft.launcher.version=0.0.1 -cp classpath_here net.minecraft.client.main.Main --username Name --version 1.18.2 --gameDir Path/to/game/dir --assetsDir Path/to/assets/dir --assetIndex 1.18 --uuid null --accessToken null unknow_params(below) --versionType release\n</code></pre>\n<p>I don't know what these params do (I ignore them in my command):</p>\n<pre class=\"lang-bash prettyprint-override\"><code>--clientId ${clientid} --xuid ${auth_xuid} --userType ${user_type}\n</code></pre>\n<p>And I'm getting this error:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>[16:03:53] [main/WARN]: Unrecognized user type: ${user_type}\n[16:03:53] [Render thread/INFO]: [STDERR]: [LWJGL] Failed to load a library. Possible solutions:\n        a) Add the directory that contains the shared library to -Djava.library.path or -Dorg.lwjgl.librarypath.\n        b) Add the JAR that contains the shared library to the classpath.\n[16:03:53] [Render thread/INFO]: [STDERR]: [LWJGL] Enable debug mode with -Dorg.lwjgl.util.Debug=true for better diagnostics.\n[16:03:53] [Render thread/INFO]: [STDERR]: [LWJGL] Enable the SharedLibraryLoader debug mode with -Dorg.lwjgl.util.DebugLoader=true for better diagnostics.\nException in thread &quot;Render thread&quot; [16:03:53] [Render thread/INFO]: [STDERR]: java.lang.NoClassDefFoundError: Could not initialize class com.mojang.blaze3d.systems.RenderSystem\n[16:03:54] [Render thread/INFO]: [STDERR]:      at ac.a(SourceFile:65)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dyr.a(SourceFile:2394)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dyr.a(SourceFile:2389)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at net.minecraft.client.main.Main.main(SourceFile:206)\n[16:03:54] [Render thread/INFO]: [STDERR]: Caused by: java.lang.ExceptionInInitializerError: Exception java.lang.UnsatisfiedLinkError: Failed to locate \nlibrary: lwjgl.dll [in thread &quot;Render thread&quot;]\n[16:03:54] [Render thread/INFO]: [STDERR]:      at org.lwjgl.system.Library.loadSystem(Library.java:147)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at org.lwjgl.system.Library.loadSystem(Library.java:67)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at org.lwjgl.system.Library.&lt;clinit&gt;(Library.java:50)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at org.lwjgl.system.MemoryUtil.&lt;clinit&gt;(MemoryUtil.java:97)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dsk.&lt;clinit&gt;(SourceFile:8)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dth.&lt;init&gt;(SourceFile:56)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dto.&lt;init&gt;(SourceFile:19)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dto.&lt;init&gt;(SourceFile:23)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dto.&lt;clinit&gt;(SourceFile:11)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at com.mojang.blaze3d.systems.RenderSystem.&lt;clinit&gt;(SourceFile:46)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at net.minecraft.client.main.Main.main(SourceFile:194)\n</code></pre>\n<p>I have java 17.0.7\n<code>java --version</code> output:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>openjdk 17.0.7 2023-04-18\nOpenJDK Runtime Environment Temurin-17.0.7+7 (build 17.0.7+7)\nOpenJDK 64-Bit Server VM Temurin-17.0.7+7 (build 17.0.7+7, mixed mode, sharing)\n</code></pre>\n<p>I have no idea how to fix it but Minecraft must launch</p>\n"},{"tags":["java","android","kotlin","bluetooth-lowenergy","android-bluetooth"],"comments":[{"owner":{"account_id":11064381,"reputation":1063,"user_id":8124605,"display_name":"Risto"},"score":0,"creation_date":1695282371,"post_id":77144957,"comment_id":136004220,"body_markdown":"Which version of Android API/SDK is your app targeting? it might be a [permissions issue](https://developer.android.com/guide/topics/connectivity/bluetooth/permissions)","body":"Which version of Android API/SDK is your app targeting? it might be a <a href=\"https://developer.android.com/guide/topics/connectivity/bluetooth/permissions\" rel=\"nofollow noreferrer\">permissions issue</a>"},{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":0,"creation_date":1695636479,"post_id":77144957,"comment_id":136046167,"body_markdown":"In the `BluetoothLE` class, I don&#39;t see any runtime permissions handling? Did you omit that intentionally? The class must implement a callback named `onRequestPermissionsResult` where your app get response from the user interaction either positive or negative.","body":"In the <code>BluetoothLE</code> class, I don&#39;t see any runtime permissions handling? Did you omit that intentionally? The class must implement a callback named <code>onRequestPermissionsResult</code> where your app get response from the user interaction either positive or negative."}],"answers":[{"tags":[],"owner":{"account_id":25113732,"reputation":155,"user_id":18963042,"display_name":"Vishnu S Dharan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695288433,"creation_date":1695288433,"answer_id":77148916,"question_id":77144957,"body_markdown":"1. Try adding permission Bluetooth connect without location `&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_SCAN&quot; android:usesPermissionFlags=&quot;neverForLocation&quot; /&gt;`\r\n2. If you are trying to search for a beacon, try turning ON Location.\r\n3. Bluetooth.CONNECT, Bluetooth.SCAN are runtime permissions, I assume that you ask them on runtime, if not go to app settings and grand Nearby devices permission","title":"Android 13 BLE ScanCallback not called","body":"<ol>\n<li>Try adding permission Bluetooth connect without location <code>&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_SCAN&quot; android:usesPermissionFlags=&quot;neverForLocation&quot; /&gt;</code></li>\n<li>If you are trying to search for a beacon, try turning ON Location.</li>\n<li>Bluetooth.CONNECT, Bluetooth.SCAN are runtime permissions, I assume that you ask them on runtime, if not go to app settings and grand Nearby devices permission</li>\n</ol>\n"}],"owner":{"account_id":29484188,"reputation":19,"user_id":22594480,"display_name":"yuz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695288433,"creation_date":1695232855,"question_id":77144957,"body_markdown":"I&#39;m currently working on a BLE product that I picked up after a previous dev left. According to them, the BLE scan functionality was working, but not for me anymore. I was given a new product (Android 13) so we hypothesized that that might be a reason, but I checked the new updates for Android 13 but still can&#39;t find the issue.\r\n\r\nHere&#39;s an overview of the code (yes I know one file&#39;s in Kotlin and one&#39;s in Java. I&#39;m not sure why they decided to write it like this. I also didn&#39;t write any of this, but I think the logic works):\r\n\r\n```\r\nvar mBluetoothAdapter: BluetoothAdapter? = null\r\nvar mBTDevice: BluetoothDevice? = null\r\nvar mBTDevices = ArrayList&lt;BluetoothDevice&gt;()\r\nvar mDeviceListAdapter: DeviceListAdapter? = null\r\nvar mBLEMain: BLEMain? = null\r\n\r\nclass HomeFragment : Fragment() {\r\n    var _binding: FragmentSettingBinding? = null\r\n    val binding get() = _binding!!\r\n\r\n    override fun onCreateView(\r\n        inflater: LayoutInflater, container: ViewGroup?,\r\n        savedInstanceState: Bundle?\r\n    ): View? {\r\n        _binding = FragmentHomeBinding.inflate(inflater)\r\n        initUI()\r\n        setAdapter()\r\n        handleOnClickListener()\r\n        return binding.root\r\n    }\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        mBTDevices = java.util.ArrayList()\r\n        val btManager: BluetoothManager = context?.getSystemService(Context.BLUETOOTH_SERVICE) as BluetoothManager;\r\n        mBluetoothAdapter = btManager.adapter;\r\n    }\r\n\r\n    private fun handleOnClickListener() {\r\n        binding.apply {\r\n            btnBTScanButton click {\r\n                 mBLEMain = BluetoothLE(mBluetoothAdapter, mBTDevice, mBTDevices,this@SettingFragment, viewModel)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\npublic class BluetoothLE extends AppCompatActivity implements AdapterView.OnItemClickListener {\r\n\r\n    BluetoothAdapter mBluetoothAdapter;\r\n    BluetoothDevice mBTDevice;\r\n\r\n    public ArrayList&lt;BluetoothDevice&gt; mBTDevices = new ArrayList&lt;&gt;();\r\n\r\n    private BluetoothLeScanner bluetoothLeScanner;\r\n\r\n    private boolean scanning;\r\n    private boolean connected;\r\n    private Handler handler = new Handler();\r\n\r\n    // Stops scanning after 10 seconds.\r\n    private static final long SCAN_PERIOD = 10000;\r\n\r\n    private ServiceConnection serviceConnection;\r\n\r\n    public BluetoothLE(BluetoothAdapter mBluetoothAdapter, BluetoothDevice mBTDevice, ArrayList&lt;BluetoothDevice&gt; mBTDevices) {\r\n\r\n        this.mBluetoothAdapter = mBluetoothAdapter;\r\n        this.mBTDevices = mBTDevices;\r\n        this.mBTDevice = mBTDevice;\r\n        this.mDeviceListAdapter = new DeviceListAdapter(fragment.requireContext(), R.layout.bluetooth_list, mBTDevices);\r\n\r\n        this.fragment = fragment;\r\n\r\n        this.bluetoothLeScanner = mBluetoothAdapter.getBluetoothLeScanner();\r\n        this.serviceConnection = new ServiceConnection() {\r\n            @Override\r\n            public void onServiceConnected(ComponentName name, IBinder service) {\r\n                bluetoothService = ((BLEConnectionService.LocalBinder) service).getService();\r\n                if (bluetoothService != null) {\r\n                    // call functions on service to check connection and connect to devices\r\n                    if (!bluetoothService.initialize()) {\r\n                        Log.e(TAG, &quot;Unable to initialize Bluetooth&quot;);\r\n                        finish();\r\n                    }\r\n                    // perform device connection\r\n                    bluetoothService.connect(deviceAddress);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onServiceDisconnected(ComponentName name) {\r\n                bluetoothService = null;\r\n            }\r\n        };\r\n\r\n        IntentFilter discoverDevicesIntent = makeGattUpdateIntentFilter();\r\n        fragment.getContext().registerReceiver(gattUpdateReceiver, discoverDevicesIntent);\r\n        scanLeDevice();\r\n    }\r\n\r\n    private void scanLeDevice() {\r\n        if (!scanning) {\r\n            // Stops scanning after a predefined scan period.\r\n            handler.postDelayed(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    scanning = false;\r\n                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) {\r\n                        if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {\r\n                            ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_SCAN}, 102);\r\n                        }\r\n                    }else{\r\n                        if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                            ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, 105);\r\n                        }\r\n                    }\r\n                    bluetoothLeScanner.stopScan(leScanCallback);\r\n                }\r\n            }, SCAN_PERIOD);\r\n\r\n            scanning = true;\r\n\r\n\t    // i&#39;m not sure if we actually need all of this, but i put it in to troubleshoot to see if there&#39;s anything wrong with the perms - doesn&#39;t seem like there is\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) {\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_SCAN}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_PRIVILEGED) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_PRIVILEGED}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_COARSE_LOCATION}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_BACKGROUND_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_BACKGROUND_LOCATION}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_ADMIN) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_ADMIN}, 102);\r\n                }\r\n            } else {\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_SCAN}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_PRIVILEGED) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_PRIVILEGED}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_COARSE_LOCATION}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_BACKGROUND_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_BACKGROUND_LOCATION}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_ADMIN) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_ADMIN}, 102);\r\n                }\r\n            }\r\n            bluetoothLeScanner.startScan(leScanCallback);\r\n        } else {\r\n            scanning = false;\r\n            bluetoothLeScanner.stopScan(leScanCallback);\r\n        }\r\n    }\r\n\r\n    private ScanCallback leScanCallback = new ScanCallback() {\r\n                @Override\r\n                public void onScanResult(int callbackType, ScanResult result) {\r\n                    super.onScanResult(callbackType, result);\r\n                    Log.d(&quot;BLE&quot;, &quot;in scanCallback&quot;);\r\n                    if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\r\n                        ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_CONNECT}, 100);\r\n                    }\r\n\r\n                    Log.d(&quot;BLE&quot;, &quot;Device Name is: &quot; + result.getDevice().getName());\r\n                    Log.d(&quot;BLE&quot;, &quot;Device Address is: &quot; + result.getDevice().getAddress());\r\n                    if (result.getDevice().getName() != null &amp;&amp; result.getDevice().getName().contains(&quot;ESP32&quot;) == true) {\r\n                        mBTDevices.add(result.getDevice());\r\n                    }\r\n                    mDeviceListAdapter = new DeviceListAdapter(fragment.getContext(), R.layout.bluetooth_list, mBTDevices);\r\n                    lvNewDevices.setAdapter(mDeviceListAdapter);\r\n                    mDeviceListAdapter.notifyDataSetChanged();\r\n                }\r\n\r\n                @Override\r\n                public void onBatchScanResults(List&lt;ScanResult&gt; results) {\r\n                    super.onBatchScanResults(results);\r\n                    for (ScanResult sr : results) {\r\n                        Log.d(&quot;BLE&quot;, sr.toString());\r\n                    }\r\n                }\r\n\r\n                @Override\r\n                public void onScanFailed(int errorCode) {\r\n                    super.onScanFailed(errorCode);\r\n                    Log.d(&quot;BLE&quot;, &quot;Error Code: &quot; + errorCode);\r\n                }\r\n    };\r\n\r\n}\r\n```\r\n\r\nMy issue is that nothing in the ScanCallback is being logged, which I&#39;m using to assume that it&#39;s not being called.\r\n\r\nSome things I saw while trying to troubleshoot:\r\n\r\n1. PERMISSIONS\r\n\r\nBluetooth is enabled in settings. The code above also checks for every scanning perm I can think of.\r\n\r\nManifest:\r\n```\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.POST_NOTIFICATIONS&quot; /&gt;\r\n\r\n    &lt;uses-feature android:name=&quot;android.hardware.bluetooth&quot; /&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n    &lt;uses-permission\r\n        android:name=&quot;android.permission.BLUETOOTH_PRIVILEGED&quot;\r\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADVERTISE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_CONNECT&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_SCAN&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot; /&gt;\r\n```\r\n\r\n2. RESTRICTIVE BUCKET (?)\r\n\r\nI saw through various SO posts that a new Android 13 updated caused some apps to be restricted so they can&#39;t run BLE anymore. I ran the code to check for my app and it returns a 10, which I&#39;m fairly sure means it&#39;s fine.\r\n\r\nRight now I&#39;m only concerned with scanning, so I omitted the relevant BLEService and GATT code. I&#39;m pretty sure those codes aren&#39;t relevant to being able to scan correctly. If not I&#39;ll edit my post and include those.","title":"Android 13 BLE ScanCallback not called","body":"<p>I'm currently working on a BLE product that I picked up after a previous dev left. According to them, the BLE scan functionality was working, but not for me anymore. I was given a new product (Android 13) so we hypothesized that that might be a reason, but I checked the new updates for Android 13 but still can't find the issue.</p>\n<p>Here's an overview of the code (yes I know one file's in Kotlin and one's in Java. I'm not sure why they decided to write it like this. I also didn't write any of this, but I think the logic works):</p>\n<pre><code>var mBluetoothAdapter: BluetoothAdapter? = null\nvar mBTDevice: BluetoothDevice? = null\nvar mBTDevices = ArrayList&lt;BluetoothDevice&gt;()\nvar mDeviceListAdapter: DeviceListAdapter? = null\nvar mBLEMain: BLEMain? = null\n\nclass HomeFragment : Fragment() {\n    var _binding: FragmentSettingBinding? = null\n    val binding get() = _binding!!\n\n    override fun onCreateView(\n        inflater: LayoutInflater, container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        _binding = FragmentHomeBinding.inflate(inflater)\n        initUI()\n        setAdapter()\n        handleOnClickListener()\n        return binding.root\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        mBTDevices = java.util.ArrayList()\n        val btManager: BluetoothManager = context?.getSystemService(Context.BLUETOOTH_SERVICE) as BluetoothManager;\n        mBluetoothAdapter = btManager.adapter;\n    }\n\n    private fun handleOnClickListener() {\n        binding.apply {\n            btnBTScanButton click {\n                 mBLEMain = BluetoothLE(mBluetoothAdapter, mBTDevice, mBTDevices,this@SettingFragment, viewModel)\n            }\n        }\n    }\n}\n\n\npublic class BluetoothLE extends AppCompatActivity implements AdapterView.OnItemClickListener {\n\n    BluetoothAdapter mBluetoothAdapter;\n    BluetoothDevice mBTDevice;\n\n    public ArrayList&lt;BluetoothDevice&gt; mBTDevices = new ArrayList&lt;&gt;();\n\n    private BluetoothLeScanner bluetoothLeScanner;\n\n    private boolean scanning;\n    private boolean connected;\n    private Handler handler = new Handler();\n\n    // Stops scanning after 10 seconds.\n    private static final long SCAN_PERIOD = 10000;\n\n    private ServiceConnection serviceConnection;\n\n    public BluetoothLE(BluetoothAdapter mBluetoothAdapter, BluetoothDevice mBTDevice, ArrayList&lt;BluetoothDevice&gt; mBTDevices) {\n\n        this.mBluetoothAdapter = mBluetoothAdapter;\n        this.mBTDevices = mBTDevices;\n        this.mBTDevice = mBTDevice;\n        this.mDeviceListAdapter = new DeviceListAdapter(fragment.requireContext(), R.layout.bluetooth_list, mBTDevices);\n\n        this.fragment = fragment;\n\n        this.bluetoothLeScanner = mBluetoothAdapter.getBluetoothLeScanner();\n        this.serviceConnection = new ServiceConnection() {\n            @Override\n            public void onServiceConnected(ComponentName name, IBinder service) {\n                bluetoothService = ((BLEConnectionService.LocalBinder) service).getService();\n                if (bluetoothService != null) {\n                    // call functions on service to check connection and connect to devices\n                    if (!bluetoothService.initialize()) {\n                        Log.e(TAG, &quot;Unable to initialize Bluetooth&quot;);\n                        finish();\n                    }\n                    // perform device connection\n                    bluetoothService.connect(deviceAddress);\n                }\n            }\n\n            @Override\n            public void onServiceDisconnected(ComponentName name) {\n                bluetoothService = null;\n            }\n        };\n\n        IntentFilter discoverDevicesIntent = makeGattUpdateIntentFilter();\n        fragment.getContext().registerReceiver(gattUpdateReceiver, discoverDevicesIntent);\n        scanLeDevice();\n    }\n\n    private void scanLeDevice() {\n        if (!scanning) {\n            // Stops scanning after a predefined scan period.\n            handler.postDelayed(new Runnable() {\n                @Override\n                public void run() {\n                    scanning = false;\n                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) {\n                        if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {\n                            ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_SCAN}, 102);\n                        }\n                    }else{\n                        if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n                            ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, 105);\n                        }\n                    }\n                    bluetoothLeScanner.stopScan(leScanCallback);\n                }\n            }, SCAN_PERIOD);\n\n            scanning = true;\n\n        // i'm not sure if we actually need all of this, but i put it in to troubleshoot to see if there's anything wrong with the perms - doesn't seem like there is\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) {\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_SCAN}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_PRIVILEGED) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_PRIVILEGED}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_COARSE_LOCATION}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_BACKGROUND_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_BACKGROUND_LOCATION}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_ADMIN) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_ADMIN}, 102);\n                }\n            } else {\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_SCAN}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_PRIVILEGED) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_PRIVILEGED}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_COARSE_LOCATION}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_BACKGROUND_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_BACKGROUND_LOCATION}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_ADMIN) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_ADMIN}, 102);\n                }\n            }\n            bluetoothLeScanner.startScan(leScanCallback);\n        } else {\n            scanning = false;\n            bluetoothLeScanner.stopScan(leScanCallback);\n        }\n    }\n\n    private ScanCallback leScanCallback = new ScanCallback() {\n                @Override\n                public void onScanResult(int callbackType, ScanResult result) {\n                    super.onScanResult(callbackType, result);\n                    Log.d(&quot;BLE&quot;, &quot;in scanCallback&quot;);\n                    if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\n                        ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_CONNECT}, 100);\n                    }\n\n                    Log.d(&quot;BLE&quot;, &quot;Device Name is: &quot; + result.getDevice().getName());\n                    Log.d(&quot;BLE&quot;, &quot;Device Address is: &quot; + result.getDevice().getAddress());\n                    if (result.getDevice().getName() != null &amp;&amp; result.getDevice().getName().contains(&quot;ESP32&quot;) == true) {\n                        mBTDevices.add(result.getDevice());\n                    }\n                    mDeviceListAdapter = new DeviceListAdapter(fragment.getContext(), R.layout.bluetooth_list, mBTDevices);\n                    lvNewDevices.setAdapter(mDeviceListAdapter);\n                    mDeviceListAdapter.notifyDataSetChanged();\n                }\n\n                @Override\n                public void onBatchScanResults(List&lt;ScanResult&gt; results) {\n                    super.onBatchScanResults(results);\n                    for (ScanResult sr : results) {\n                        Log.d(&quot;BLE&quot;, sr.toString());\n                    }\n                }\n\n                @Override\n                public void onScanFailed(int errorCode) {\n                    super.onScanFailed(errorCode);\n                    Log.d(&quot;BLE&quot;, &quot;Error Code: &quot; + errorCode);\n                }\n    };\n\n}\n</code></pre>\n<p>My issue is that nothing in the ScanCallback is being logged, which I'm using to assume that it's not being called.</p>\n<p>Some things I saw while trying to troubleshoot:</p>\n<ol>\n<li>PERMISSIONS</li>\n</ol>\n<p>Bluetooth is enabled in settings. The code above also checks for every scanning perm I can think of.</p>\n<p>Manifest:</p>\n<pre><code>    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.POST_NOTIFICATIONS&quot; /&gt;\n\n    &lt;uses-feature android:name=&quot;android.hardware.bluetooth&quot; /&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n    &lt;uses-permission\n        android:name=&quot;android.permission.BLUETOOTH_PRIVILEGED&quot;\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADVERTISE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_CONNECT&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_SCAN&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot; /&gt;\n</code></pre>\n<ol start=\"2\">\n<li>RESTRICTIVE BUCKET (?)</li>\n</ol>\n<p>I saw through various SO posts that a new Android 13 updated caused some apps to be restricted so they can't run BLE anymore. I ran the code to check for my app and it returns a 10, which I'm fairly sure means it's fine.</p>\n<p>Right now I'm only concerned with scanning, so I omitted the relevant BLEService and GATT code. I'm pretty sure those codes aren't relevant to being able to scan correctly. If not I'll edit my post and include those.</p>\n"},{"tags":["java","spring","spring-boot","rest","webclient"],"owner":{"account_id":27849471,"reputation":11,"user_id":21264263,"display_name":"minhat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695288362,"creation_date":1695288362,"question_id":77148907,"body_markdown":"```\r\n@PutMapping()\r\npublic void calApi() {\r\n    Map&lt;String, Object&gt; requestBody = new HashMap&lt;&gt;();\r\n    requestBody.put(&quot;foo&quot;, &quot;bar&quot;);\r\n    webClient\r\n        .post()\r\n        .uri(&quot;/api/v1/endpoint&quot;)\r\n        .bodyValue(requestBody)\r\n        .retrieve()\r\n        .toBodilessEntity()\r\n        .block();\r\n}\r\n```\r\n\r\nWhen i call the calApi controller method, the webClient call end point twice. Why the webClient do that or did i do something wrong?","title":"WebClient call endpoint API twice","body":"<pre><code>@PutMapping()\npublic void calApi() {\n    Map&lt;String, Object&gt; requestBody = new HashMap&lt;&gt;();\n    requestBody.put(&quot;foo&quot;, &quot;bar&quot;);\n    webClient\n        .post()\n        .uri(&quot;/api/v1/endpoint&quot;)\n        .bodyValue(requestBody)\n        .retrieve()\n        .toBodilessEntity()\n        .block();\n}\n</code></pre>\n<p>When i call the calApi controller method, the webClient call end point twice. Why the webClient do that or did i do something wrong?</p>\n"},{"tags":["java","android","arrays","hashmap"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1695291195,"post_id":61061622,"comment_id":136006149,"body_markdown":"Please report the error message accurately. Cut and paste. It doesn&#39;t look like that, and it isn&#39;t recognizable after your mangling.","body":"Please report the error message accurately. Cut and paste. It doesn&#39;t look like that, and it isn&#39;t recognizable after your mangling."}],"answers":[{"comments":[{"owner":{"account_id":18192785,"reputation":49,"user_id":13238365,"display_name":"Ismail"},"score":0,"creation_date":1586182998,"post_id":61061683,"comment_id":108026962,"body_markdown":"Thanks a lot! I was going crazy over here and you saved me!","body":"Thanks a lot! I was going crazy over here and you saved me!"},{"owner":{"account_id":14739603,"reputation":264,"user_id":10644556,"display_name":"PaianganuOm"},"score":0,"creation_date":1586183177,"post_id":61061683,"comment_id":108027083,"body_markdown":"Not a problem. This error should have been outlined by your IDE. If you&#39;re not using one, I strongly recommend you do. Eclipse is free and very used in the community, but there are others of course. https://www.eclipse.org/eclipseide/","body":"Not a problem. This error should have been outlined by your IDE. If you&#39;re not using one, I strongly recommend you do. Eclipse is free and very used in the community, but there are others of course. <a href=\"https://www.eclipse.org/eclipseide/\" rel=\"nofollow noreferrer\">eclipse.org/eclipseide</a>"}],"tags":[],"owner":{"account_id":14739603,"reputation":264,"user_id":10644556,"display_name":"PaianganuOm"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695287825,"creation_date":1586181975,"answer_id":61061683,"question_id":61061622,"body_markdown":"You are using the wrong syntax here: \r\n```\r\nlistItem.put(listGroup).get(0),list1;\r\n```\r\n\r\nThe method `put` from the `Map` API, takes 2 arguments, a key and a value. Both of those arguments need to be provided in the put method call parenthesis:\r\n\r\n```\r\nlistItem.put(listGroup.get(0), list1);\r\n```","title":"Error: put(java.lang.string, list&lt;string&gt;) in hashmap cannot be applied to (java.util.list&lt;java.lang.string&gt;)","body":"<p>You are using the wrong syntax here:</p>\n<pre><code>listItem.put(listGroup).get(0),list1;\n</code></pre>\n<p>The method <code>put</code> from the <code>Map</code> API, takes 2 arguments, a key and a value. Both of those arguments need to be provided in the put method call parenthesis:</p>\n<pre><code>listItem.put(listGroup.get(0), list1);\n</code></pre>\n"}],"owner":{"account_id":18192785,"reputation":49,"user_id":13238365,"display_name":"Ismail"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1587,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":61061683,"answer_count":1,"score":0,"last_activity_date":1695287825,"creation_date":1586181785,"question_id":61061622,"body_markdown":"I&#39;m a beginner following a tutorial and just can&#39;t understand what I&#39;m doing wrong. I tried to ask the owner of the tutorial without any luck. I&#39;m receiving the error mentioned in the title when trying to build and expendable menu. The listGroup gives the error from line 72 to 76 `(listItem.put(listGroup).get(0),list1;)`. Looks like I&#39;m using the HashMap wrongly. I&#39;m using Android Studios 3.6.1. Please help me out. Thank you in advance! \r\n\r\n    package com.mystartup.start;\r\n    \r\n    import android.os.Bundle;\r\n    import android.view.Menu;\r\n    import android.view.MenuInflater;\r\n    import android.widget.ExpandableListView;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import java.util.ArrayList;\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    \r\n    public class MenuActivity extends AppCompatActivity {\r\n        ExpandableListView expandableListView;\r\n        List&lt;String&gt; listGroup;\r\n        HashMap&lt;String,List&lt;String&gt;&gt; listItem;\r\n        MainAdapter adapter;\r\n    \r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.menu);\r\n            assert getSupportActionBar() != null;   //null check\r\n            getSupportActionBar().setDisplayHomeAsUpEnabled(true);   //show back button\r\n    \r\n            expandableListView = findViewById(R.id.expanded_listview);\r\n            listGroup = new ArrayList&lt;&gt;();\r\n            listItem = new HashMap&lt;&gt;();\r\n            adapter = new MainAdapter(this,listGroup,listItem);\r\n            expandableListView.setAdapter(adapter);\r\n            initListData();\r\n        }\r\n    \r\n        private void initListData() {\r\n            listGroup.add(getString(R.string.group1));\r\n            listGroup.add(getString(R.string.group2));\r\n            listGroup.add(getString(R.string.group3));\r\n            listGroup.add(getString(R.string.group4));\r\n            listGroup.add(getString(R.string.group5));\r\n    \r\n            String[] array;\r\n    \r\n            List&lt;String&gt; list1 = new ArrayList&lt;&gt;();\r\n            array = getResources().getStringArray(R.array.group1);\r\n            for (String item : array){\r\n                list1.add(item);\r\n            }\r\n            List&lt;String&gt; list2 = new ArrayList&lt;&gt;();\r\n            array = getResources().getStringArray(R.array.group2);\r\n            for (String item : array){\r\n                list2.add(item);\r\n            }\r\n            List&lt;String&gt; list3 = new ArrayList&lt;&gt;();\r\n            array = getResources().getStringArray(R.array.group3);\r\n            for (String item : array){\r\n                list3.add(item);\r\n            }\r\n            List&lt;String&gt; list4 = new ArrayList&lt;&gt;();\r\n            array = getResources().getStringArray(R.array.group4);\r\n            for (String item : array){\r\n                list4.add(item);\r\n            }\r\n            List&lt;String&gt; list5 = new ArrayList&lt;&gt;();\r\n            array = getResources().getStringArray(R.array.group5);\r\n            for (String item : array){\r\n                list5.add(item);\r\n            }\r\n            listItem.put(listGroup).get(0),list1;\r\n            listItem.put(listGroup).get(1),list2;\r\n            listItem.put(listGroup).get(2),list3;\r\n            listItem.put(listGroup).get(3),list4;\r\n            listItem.put(listGroup).get(4),list5;\r\n            adapter.notifyDataSetChanged();\r\n        }\r\n    \r\n        @Override\r\n        public boolean onCreateOptionsMenu(Menu menu) {\r\n            MenuInflater inflater = getMenuInflater();\r\n            inflater.inflate(R.menu.options_menu, menu);\r\n    \r\n            return true;\r\n        }\r\n        @Override\r\n        public boolean onSupportNavigateUp(){\r\n            finish();\r\n            return true;\r\n        }\r\n    \r\n    }\r\n\r\nThe Strings.xml code:\r\n\r\n    &lt;resources&gt;\r\n        &lt;string name=&quot;app_name&quot;&gt;Start&lt;/string&gt;\r\n        &lt;string name=&quot;name&quot;&gt;Profile:&lt;/string&gt;\r\n        &lt;string name=&quot;menu&quot;&gt;Menu&lt;/string&gt;\r\n        &lt;string name=&quot;search&quot;&gt;Search&lt;/string&gt;\r\n        &lt;string name=&quot;group1&quot;&gt;Group 1&lt;/string&gt;\r\n        &lt;string name=&quot;group2&quot;&gt;Group 2&lt;/string&gt;\r\n        &lt;string name=&quot;group3&quot;&gt;Group 3&lt;/string&gt;\r\n        &lt;string name=&quot;group4&quot;&gt;Group 4&lt;/string&gt;\r\n        &lt;string name=&quot;group5&quot;&gt;Group 5&lt;/string&gt;\r\n        &lt;string-array name=&quot;group1&quot;&gt;\r\n            &lt;item&gt;item1&lt;/item&gt;\r\n            &lt;item&gt;item2&lt;/item&gt;\r\n            &lt;item&gt;item3&lt;/item&gt;\r\n        &lt;/string-array&gt;\r\n        &lt;string-array name=&quot;group2&quot;&gt;\r\n            &lt;item&gt;item1&lt;/item&gt;\r\n            &lt;item&gt;item2&lt;/item&gt;\r\n            &lt;item&gt;item3&lt;/item&gt;\r\n        &lt;/string-array&gt;\r\n        &lt;string-array name=&quot;group3&quot;&gt;\r\n            &lt;item&gt;item1&lt;/item&gt;\r\n            &lt;item&gt;item2&lt;/item&gt;\r\n            &lt;item&gt;item3&lt;/item&gt;\r\n        &lt;/string-array&gt;\r\n        &lt;string-array name=&quot;group4&quot;&gt;\r\n            &lt;item&gt;item1&lt;/item&gt;\r\n            &lt;item&gt;item2&lt;/item&gt;\r\n            &lt;item&gt;item3&lt;/item&gt;\r\n        &lt;/string-array&gt;\r\n        &lt;string-array name=&quot;group5&quot;&gt;\r\n            &lt;item&gt;item1&lt;/item&gt;\r\n            &lt;item&gt;item2&lt;/item&gt;\r\n            &lt;item&gt;item3&lt;/item&gt;\r\n        &lt;/string-array&gt;\r\n    \r\n    \r\n    &lt;/resources&gt;","title":"Error: put(java.lang.string, list&lt;string&gt;) in hashmap cannot be applied to (java.util.list&lt;java.lang.string&gt;)","body":"<p>I'm a beginner following a tutorial and just can't understand what I'm doing wrong. I tried to ask the owner of the tutorial without any luck. I'm receiving the error mentioned in the title when trying to build and expendable menu. The listGroup gives the error from line 72 to 76 <code>(listItem.put(listGroup).get(0),list1;)</code>. Looks like I'm using the HashMap wrongly. I'm using Android Studios 3.6.1. Please help me out. Thank you in advance! </p>\n\n<pre><code>package com.mystartup.start;\n\nimport android.os.Bundle;\nimport android.view.Menu;\nimport android.view.MenuInflater;\nimport android.widget.ExpandableListView;\nimport androidx.appcompat.app.AppCompatActivity;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\n\npublic class MenuActivity extends AppCompatActivity {\n    ExpandableListView expandableListView;\n    List&lt;String&gt; listGroup;\n    HashMap&lt;String,List&lt;String&gt;&gt; listItem;\n    MainAdapter adapter;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.menu);\n        assert getSupportActionBar() != null;   //null check\n        getSupportActionBar().setDisplayHomeAsUpEnabled(true);   //show back button\n\n        expandableListView = findViewById(R.id.expanded_listview);\n        listGroup = new ArrayList&lt;&gt;();\n        listItem = new HashMap&lt;&gt;();\n        adapter = new MainAdapter(this,listGroup,listItem);\n        expandableListView.setAdapter(adapter);\n        initListData();\n    }\n\n    private void initListData() {\n        listGroup.add(getString(R.string.group1));\n        listGroup.add(getString(R.string.group2));\n        listGroup.add(getString(R.string.group3));\n        listGroup.add(getString(R.string.group4));\n        listGroup.add(getString(R.string.group5));\n\n        String[] array;\n\n        List&lt;String&gt; list1 = new ArrayList&lt;&gt;();\n        array = getResources().getStringArray(R.array.group1);\n        for (String item : array){\n            list1.add(item);\n        }\n        List&lt;String&gt; list2 = new ArrayList&lt;&gt;();\n        array = getResources().getStringArray(R.array.group2);\n        for (String item : array){\n            list2.add(item);\n        }\n        List&lt;String&gt; list3 = new ArrayList&lt;&gt;();\n        array = getResources().getStringArray(R.array.group3);\n        for (String item : array){\n            list3.add(item);\n        }\n        List&lt;String&gt; list4 = new ArrayList&lt;&gt;();\n        array = getResources().getStringArray(R.array.group4);\n        for (String item : array){\n            list4.add(item);\n        }\n        List&lt;String&gt; list5 = new ArrayList&lt;&gt;();\n        array = getResources().getStringArray(R.array.group5);\n        for (String item : array){\n            list5.add(item);\n        }\n        listItem.put(listGroup).get(0),list1;\n        listItem.put(listGroup).get(1),list2;\n        listItem.put(listGroup).get(2),list3;\n        listItem.put(listGroup).get(3),list4;\n        listItem.put(listGroup).get(4),list5;\n        adapter.notifyDataSetChanged();\n    }\n\n    @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        MenuInflater inflater = getMenuInflater();\n        inflater.inflate(R.menu.options_menu, menu);\n\n        return true;\n    }\n    @Override\n    public boolean onSupportNavigateUp(){\n        finish();\n        return true;\n    }\n\n}\n</code></pre>\n\n<p>The Strings.xml code:</p>\n\n<pre><code>&lt;resources&gt;\n    &lt;string name=\"app_name\"&gt;Start&lt;/string&gt;\n    &lt;string name=\"name\"&gt;Profile:&lt;/string&gt;\n    &lt;string name=\"menu\"&gt;Menu&lt;/string&gt;\n    &lt;string name=\"search\"&gt;Search&lt;/string&gt;\n    &lt;string name=\"group1\"&gt;Group 1&lt;/string&gt;\n    &lt;string name=\"group2\"&gt;Group 2&lt;/string&gt;\n    &lt;string name=\"group3\"&gt;Group 3&lt;/string&gt;\n    &lt;string name=\"group4\"&gt;Group 4&lt;/string&gt;\n    &lt;string name=\"group5\"&gt;Group 5&lt;/string&gt;\n    &lt;string-array name=\"group1\"&gt;\n        &lt;item&gt;item1&lt;/item&gt;\n        &lt;item&gt;item2&lt;/item&gt;\n        &lt;item&gt;item3&lt;/item&gt;\n    &lt;/string-array&gt;\n    &lt;string-array name=\"group2\"&gt;\n        &lt;item&gt;item1&lt;/item&gt;\n        &lt;item&gt;item2&lt;/item&gt;\n        &lt;item&gt;item3&lt;/item&gt;\n    &lt;/string-array&gt;\n    &lt;string-array name=\"group3\"&gt;\n        &lt;item&gt;item1&lt;/item&gt;\n        &lt;item&gt;item2&lt;/item&gt;\n        &lt;item&gt;item3&lt;/item&gt;\n    &lt;/string-array&gt;\n    &lt;string-array name=\"group4\"&gt;\n        &lt;item&gt;item1&lt;/item&gt;\n        &lt;item&gt;item2&lt;/item&gt;\n        &lt;item&gt;item3&lt;/item&gt;\n    &lt;/string-array&gt;\n    &lt;string-array name=\"group5\"&gt;\n        &lt;item&gt;item1&lt;/item&gt;\n        &lt;item&gt;item2&lt;/item&gt;\n        &lt;item&gt;item3&lt;/item&gt;\n    &lt;/string-array&gt;\n\n\n&lt;/resources&gt;\n</code></pre>\n"},{"tags":["java","duosecurity"],"owner":{"account_id":4933250,"reputation":4859,"user_id":3972291,"accept_rate":100,"display_name":"Enamul Haque"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695287738,"creation_date":1695287738,"question_id":77148826,"body_markdown":"I am using Duo Security Admin API. But when I call the api using below code it shows:\r\n\r\n    Get Users request failed with HTTP (response code: 401)\r\n\r\nHere is my java code:\r\n\r\n        void users(){\r\n\r\n        // Duo Admin API credentials and API hostname\r\n        String integrationKey = &quot;DI7ABPU9TUJQO14RET9Q&quot;;\r\n        String secretKey = &quot;YzDs7ZeQGMllravxDQxcn4jNAwyqF42P1XBDdGd2&quot;;\r\n        String apiHostname = &quot;api-d221a358.duosecurity.com&quot;;\r\n\r\n        try {\r\n\r\n            String usersUrl = &quot;https://&quot; + apiHostname + &quot;/admin/v1/users&quot;;\r\n            // Create URL object\r\n            URL url = new URL(usersUrl);\r\n\r\n            // Open a connection to the URL\r\n            HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n\r\n            // Set request method to GET\r\n            connection.setRequestMethod(&quot;GET&quot;);\r\n\r\n            // Set request headers\r\n            connection.setRequestProperty(&quot;Authorization&quot;, &quot;Basic &quot; + getBase64Credentials(integrationKey, secretKey));\r\n            connection.setRequestProperty(&quot;Date&quot;, OffsetDateTime.now().format(DateTimeFormatter.RFC_1123_DATE_TIME));\r\n            connection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n\r\n            // Get the HTTP response code\r\n            int responseCode = connection.getResponseCode();\r\n\r\n            if (responseCode == HttpURLConnection.HTTP_OK) {\r\n                // Read and print the response (list of users)\r\n                try (BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream()))) {\r\n                    String inputLine;\r\n                    StringBuilder response = new StringBuilder();\r\n\r\n                    while ((inputLine = in.readLine()) != null) {\r\n                        response.append(inputLine);\r\n                    }\r\n\r\n                    System.out.println(&quot;List of Users: &quot; + response.toString());\r\n                }\r\n            } else {\r\n                System.out.println(&quot;Get Users request failed with HTTP response code: &quot; + responseCode);\r\n            }\r\n\r\n            // Close the connection\r\n            connection.disconnect();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    // Encode credentials as Base64\r\n    private static String getBase64Credentials(String integrationKey, String secretKey) {\r\n        String credentials = integrationKey + &quot;:&quot; + secretKey;\r\n        return java.util.Base64.getEncoder().encodeToString(credentials.getBytes());\r\n    }\r\n\r\nWhat is the mistake i have done with my code? \r\nIs it right way to call Duo Security Admin API?\r\n\r\nPlease help me..\r\n","title":"Duo Security Admin API users request failed using in Java","body":"<p>I am using Duo Security Admin API. But when I call the api using below code it shows:</p>\n<pre><code>Get Users request failed with HTTP (response code: 401)\n</code></pre>\n<p>Here is my java code:</p>\n<pre><code>    void users(){\n\n    // Duo Admin API credentials and API hostname\n    String integrationKey = &quot;DI7ABPU9TUJQO14RET9Q&quot;;\n    String secretKey = &quot;YzDs7ZeQGMllravxDQxcn4jNAwyqF42P1XBDdGd2&quot;;\n    String apiHostname = &quot;api-d221a358.duosecurity.com&quot;;\n\n    try {\n\n        String usersUrl = &quot;https://&quot; + apiHostname + &quot;/admin/v1/users&quot;;\n        // Create URL object\n        URL url = new URL(usersUrl);\n\n        // Open a connection to the URL\n        HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n\n        // Set request method to GET\n        connection.setRequestMethod(&quot;GET&quot;);\n\n        // Set request headers\n        connection.setRequestProperty(&quot;Authorization&quot;, &quot;Basic &quot; + getBase64Credentials(integrationKey, secretKey));\n        connection.setRequestProperty(&quot;Date&quot;, OffsetDateTime.now().format(DateTimeFormatter.RFC_1123_DATE_TIME));\n        connection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n\n        // Get the HTTP response code\n        int responseCode = connection.getResponseCode();\n\n        if (responseCode == HttpURLConnection.HTTP_OK) {\n            // Read and print the response (list of users)\n            try (BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream()))) {\n                String inputLine;\n                StringBuilder response = new StringBuilder();\n\n                while ((inputLine = in.readLine()) != null) {\n                    response.append(inputLine);\n                }\n\n                System.out.println(&quot;List of Users: &quot; + response.toString());\n            }\n        } else {\n            System.out.println(&quot;Get Users request failed with HTTP response code: &quot; + responseCode);\n        }\n\n        // Close the connection\n        connection.disconnect();\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n\n// Encode credentials as Base64\nprivate static String getBase64Credentials(String integrationKey, String secretKey) {\n    String credentials = integrationKey + &quot;:&quot; + secretKey;\n    return java.util.Base64.getEncoder().encodeToString(credentials.getBytes());\n}\n</code></pre>\n<p>What is the mistake i have done with my code?\nIs it right way to call Duo Security Admin API?</p>\n<p>Please help me..</p>\n"},{"tags":["java","recursion"],"comments":[{"owner":{"account_id":2810614,"reputation":408,"user_id":2416929,"accept_rate":100,"display_name":"kalimba"},"score":0,"creation_date":1638944024,"post_id":70270690,"comment_id":124219428,"body_markdown":"pass `a` as parameter to `increase`","body":"pass <code>a</code> as parameter to <code>increase</code>"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1695289244,"post_id":70270690,"comment_id":136005688,"body_markdown":"different solution: `void increase(int n) { if (n &gt; 0) { increase(n-1);  System.out.println(n); } }` call it with the final number, e.g. `increase(5)` to print `1 2 3 4 5` (one number per line)","body":"different solution: <code>void increase(int n) { if (n &gt; 0) { increase(n-1);  System.out.println(n); } }</code> call it with the final number, e.g. <code>increase(5)</code> to print <code>1 2 3 4 5</code> (one number per line)"}],"answers":[{"tags":[],"owner":{"display_name":"user15256253"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638944053,"creation_date":1638944053,"answer_id":70270709,"question_id":70270690,"body_markdown":"You can just put `a` outside the function:\r\n```\r\n// I don&#39;t know your class\r\nprivate a = 1;\r\n\r\nstatic void increase(int N){\r\n        \r\n    int a = 1;\r\n    if(b &lt;= N){\r\n        System.out.print(a+&quot; &quot;);\r\n        a=a+1;\r\n    \r\n        \r\n    }\r\n    else\r\n    {\r\n        increase(N);                \r\n    }\r\n\r\n}\r\n```","title":"How to print numbers from 1 to n using recrsion in java","body":"<p>You can just put <code>a</code> outside the function:</p>\n<pre><code>// I don't know your class\nprivate a = 1;\n\nstatic void increase(int N){\n        \n    int a = 1;\n    if(b &lt;= N){\n        System.out.print(a+&quot; &quot;);\n        a=a+1;\n    \n        \n    }\n    else\n    {\n        increase(N);                \n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2810614,"reputation":408,"user_id":2416929,"accept_rate":100,"display_name":"kalimba"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638944134,"creation_date":1638944134,"answer_id":70270718,"question_id":70270690,"body_markdown":"    static void increase(int N, int a){\r\n        if (a&gt;N) return;\r\n        System.out.print(a+&quot; &quot;);\r\n        a=a+1;\r\n        increase(N,a);\r\n    }\r\n    \r\n    //example call from static context print 1-100\r\n    increase(100,1);\r\n","title":"How to print numbers from 1 to n using recrsion in java","body":"<pre><code>static void increase(int N, int a){\n    if (a&gt;N) return;\n    System.out.print(a+&quot; &quot;);\n    a=a+1;\n    increase(N,a);\n}\n\n//example call from static context print 1-100\nincrease(100,1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8645052,"reputation":29,"user_id":6472502,"display_name":"Ants-double"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638944825,"creation_date":1638944825,"answer_id":70270816,"question_id":70270690,"body_markdown":"``` java\r\n  public static void main(String[] args) {\r\n        increase(10,1);\r\n    }\r\n    private static  void increase(int N,int begin){\r\n\r\n        if(begin &lt;= N){\r\n            System.out.print(begin+&quot; &quot;);\r\n            begin=begin+1;\r\n            increase(N,begin);\r\n        }\r\n        return;\r\n    }\r\n```","title":"How to print numbers from 1 to n using recrsion in java","body":"<pre class=\"lang-java prettyprint-override\"><code>  public static void main(String[] args) {\n        increase(10,1);\n    }\n    private static  void increase(int N,int begin){\n\n        if(begin &lt;= N){\n            System.out.print(begin+&quot; &quot;);\n            begin=begin+1;\n            increase(N,begin);\n        }\n        return;\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":0,"creation_date":1638946399,"post_id":70270852,"comment_id":124219981,"body_markdown":"Wouldn&#39;t compile due to a typo - either the method call should be `increase(1, N)` or the method name of the private method should be `private static void printNumbers(...)`.","body":"Wouldn&#39;t compile due to a typo - either the method call should be <code>increase(1, N)</code> or the method name of the private method should be <code>private static void printNumbers(...)</code>."},{"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"score":0,"creation_date":1638946456,"post_id":70270852,"comment_id":124219994,"body_markdown":"@maloomeister got it! Thank you.","body":"@maloomeister got it! Thank you."}],"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638946438,"creation_date":1638945139,"answer_id":70270852,"question_id":70270690,"body_markdown":"You have to create one additional `private` method to count current value.\r\n```java\r\npublic static void increase(int N) {\r\n    increase(1, N);\r\n}\r\n\r\nprivate static void increase(int a, int N) {\r\n    if (a &lt;= N) {\r\n        if (a &gt; 1)\r\n            System.out.print(&#39; &#39;);\r\n\r\n        System.out.print(i);\r\n        increase(a + 1, N);\r\n    }\r\n}\r\n```","title":"How to print numbers from 1 to n using recrsion in java","body":"<p>You have to create one additional <code>private</code> method to count current value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void increase(int N) {\n    increase(1, N);\n}\n\nprivate static void increase(int a, int N) {\n    if (a &lt;= N) {\n        if (a &gt; 1)\n            System.out.print(' ');\n\n        System.out.print(i);\n        increase(a + 1, N);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1695289043,"post_id":77148814,"comment_id":136005632,"body_markdown":"this should just print `10` (and the question is not exactly new)","body":"this should just print <code>10</code> (and the question is not exactly new)"},{"owner":{"account_id":5392262,"reputation":4671,"user_id":4294399,"display_name":"General Grievance"},"score":1,"creation_date":1695306314,"post_id":77148814,"comment_id":136009289,"body_markdown":"You did not test this or you misunderstood the question. Please test easily testable code when submitting answers.","body":"You did not test this or you misunderstood the question. Please test easily testable code when submitting answers."}],"tags":[],"owner":{"account_id":29498906,"reputation":1,"user_id":22606354,"display_name":"Rajkumar"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695287685,"creation_date":1695287685,"answer_id":77148814,"question_id":70270690,"body_markdown":"``` \r\npublic static void main(String[] args) {\r\nincrease(10);\r\n}\r\n\r\npublic static void increase(int a){\r\nif(a == 11)\r\nreturn;\r\n\r\nSystem.out.println(a);\r\nincrease(a+1);\r\n}\r\n```\r\n","title":"How to print numbers from 1 to n using recrsion in java","body":"<pre><code>public static void main(String[] args) {\nincrease(10);\n}\n\npublic static void increase(int a){\nif(a == 11)\nreturn;\n\nSystem.out.println(a);\nincrease(a+1);\n}\n</code></pre>\n"}],"owner":{"account_id":23276428,"reputation":11,"user_id":17360502,"display_name":"Tarang Rastogi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3051,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1695287685,"creation_date":1638943922,"question_id":70270690,"body_markdown":"    public static void increase(int N){\r\n        int a = 1;\r\n\r\n        if(b &lt;= N) {\r\n            System.out.print(a + &quot; &quot;);\r\n            a++;\r\n        } else {\r\n            increase(N);                \r\n        }\r\n    }\r\n\r\nI can see the problem with this approach that the int a gets initialized to `1` every time the code goes for a recursive call. Can anyone suggest the correct solution?","title":"How to print numbers from 1 to n using recrsion in java","body":"<pre><code>public static void increase(int N){\n    int a = 1;\n\n    if(b &lt;= N) {\n        System.out.print(a + &quot; &quot;);\n        a++;\n    } else {\n        increase(N);                \n    }\n}\n</code></pre>\n<p>I can see the problem with this approach that the int a gets initialized to <code>1</code> every time the code goes for a recursive call. Can anyone suggest the correct solution?</p>\n"},{"tags":["java","hibernate"],"answers":[{"comments":[{"owner":{"account_id":959020,"reputation":3213,"user_id":983783,"accept_rate":63,"display_name":"Eddy Freeman"},"score":1,"creation_date":1458551377,"post_id":36126746,"comment_id":59892845,"body_markdown":"Hi, Is the setMaxResults(1)  not suppose to return 1 results from the records?","body":"Hi, Is the setMaxResults(1)  not suppose to return 1 results from the records?"},{"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"score":0,"creation_date":1458551415,"post_id":36126746,"comment_id":59892872,"body_markdown":"It is an error-prone, of course `Person person = (Person)query.list().get(0);`","body":"It is an error-prone, of course <code>Person person = (Person)query.list().get(0);</code>"},{"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"score":0,"creation_date":1458551418,"post_id":36126746,"comment_id":59892874,"body_markdown":"@EddyFreeman Yes it is. It returning only one element, which is inside the list. not a direct person :)","body":"@EddyFreeman Yes it is. It returning only one element, which is inside the list. not a direct person :)"},{"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"score":0,"creation_date":1458551474,"post_id":36126746,"comment_id":59892912,"body_markdown":"@v.ladynev Please feel free to edit the post, if there any improvements to the answer.","body":"@v.ladynev Please feel free to edit the post, if there any improvements to the answer."},{"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"score":0,"creation_date":1458551576,"post_id":36126746,"comment_id":59892957,"body_markdown":"@ss A query can return an empty list :)","body":"@ss A query can return an empty list :)"},{"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"score":0,"creation_date":1458551666,"post_id":36126746,"comment_id":59893014,"body_markdown":"@v.ladynev Hope OP checks for the size of list :)","body":"@v.ladynev Hope OP checks for the size of list :)"}],"tags":[],"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"comment_count":6,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1458551178,"creation_date":1458551178,"answer_id":36126746,"question_id":36126705,"body_markdown":"     Person person = (Person)query.list();\r\n\r\nThat is an illegal cast. Though the list have a single element, you cannot magically cast a list to `Person`. When you set max result, it still returns a list with 1 element.\r\n\r\nHence you have to do \r\n\r\n    Person person = (Person)query.list().get(0);","title":"SetMaxResults() not working as expected in Hibernate","body":"<pre><code> Person person = (Person)query.list();\n</code></pre>\n\n<p>That is an illegal cast. Though the list have a single element, you cannot magically cast a list to <code>Person</code>. When you set max result, it still returns a list with 1 element.</p>\n\n<p>Hence you have to do </p>\n\n<pre><code>Person person = (Person)query.list().get(0);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"score":1,"creation_date":1458551490,"post_id":36126771,"comment_id":59892920,"body_markdown":"It is not suitable, because of an exception, when there is not a result records.","body":"It is not suitable, because of an exception, when there is not a result records."},{"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"score":0,"creation_date":1458551515,"post_id":36126771,"comment_id":59892931,"body_markdown":"It is an error-prone, of course `Person person = (Person)query.list().get(0);`","body":"It is an error-prone, of course <code>Person person = (Person)query.list().get(0);</code>"},{"owner":{"account_id":4248512,"reputation":143,"user_id":3476390,"accept_rate":82,"display_name":"Fr0stDev1"},"score":0,"creation_date":1458551671,"post_id":36126771,"comment_id":59893021,"body_markdown":"@v.ladynev That&#39;s not a good practice to get non-unique entry by unknown order, so I think topic starter should use stricter criteria to get unique result","body":"@v.ladynev That&#39;s not a good practice to get non-unique entry by unknown order, so I think topic starter should use stricter criteria to get unique result"},{"owner":{"account_id":4248512,"reputation":143,"user_id":3476390,"accept_rate":82,"display_name":"Fr0stDev1"},"score":0,"creation_date":1458551734,"post_id":36126771,"comment_id":59893055,"body_markdown":"@v.ladynev some time it&#39;s better to catch exception that spend lot time to find duplicates in database","body":"@v.ladynev some time it&#39;s better to catch exception that spend lot time to find duplicates in database"}],"tags":[],"owner":{"account_id":4248512,"reputation":143,"user_id":3476390,"accept_rate":82,"display_name":"Fr0stDev1"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1458551236,"creation_date":1458551236,"answer_id":36126771,"question_id":36126705,"body_markdown":"Better use \r\n\r\n    Person person = (Person)query.uniqueResult();\r\n\r\nBut be careful with this, it throws exception if there is not unique entry.\r\n\r\nBut it your case use \r\n\r\n    Person person = (Person)query.list().get(0);","title":"SetMaxResults() not working as expected in Hibernate","body":"<p>Better use </p>\n\n<pre><code>Person person = (Person)query.uniqueResult();\n</code></pre>\n\n<p>But be careful with this, it throws exception if there is not unique entry.</p>\n\n<p>But it your case use </p>\n\n<pre><code>Person person = (Person)query.list().get(0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7734689,"reputation":21,"user_id":5856634,"display_name":"MKRISH"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1458552156,"creation_date":1458552156,"answer_id":36127091,"question_id":36126705,"body_markdown":"Just change your code like this, i hope it will work. Thanks\r\n\r\n    private Person findPerson(Session session, String name){\r\n            Query query = session.createQuery(&quot;from Person p where p.name=:name&quot;)\r\n            query.setParameter(&quot;name&quot;, name)\r\n            query.setMaxResults(1);\r\n            return (Person)query.uniqueResult();\r\n    }","title":"SetMaxResults() not working as expected in Hibernate","body":"<p>Just change your code like this, i hope it will work. Thanks</p>\n\n<pre><code>private Person findPerson(Session session, String name){\n        Query query = session.createQuery(\"from Person p where p.name=:name\")\n        query.setParameter(\"name\", name)\n        query.setMaxResults(1);\n        return (Person)query.uniqueResult();\n}\n</code></pre>\n"}],"owner":{"account_id":959020,"reputation":3213,"user_id":983783,"accept_rate":63,"display_name":"Eddy Freeman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2328,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1695287530,"creation_date":1458551047,"question_id":36126705,"body_markdown":"I am a beginner in Hibernate and getting some errors using the `SetMaxResults()` function. This is my MySQL table data:\r\n\r\n    1 \tJ. C. Smell\r\n    2 \tJ. C. Smell\r\n    3 \tJ. C. Smell\r\n    4 \tJ. C. Smell\r\n\r\nThis is the method to retrieve one record from 4 identical records:\r\n\r\n    private Person findPerson(Session session, String name){\r\n    \t\tQuery query = session.createQuery(&quot;from Person p where p.name=:name&quot;);\r\n    \t\tquery.setParameter(&quot;name&quot;, name);\r\n    \t\tquery.setMaxResults(1);\r\n    \t\tPerson person = (Person)query.list();\r\n    \t\tif(person == null)\r\n    \t\t\treturn null;\r\n    \t\treturn person;\r\n    \t}\r\n\r\nI expect to get one record, but according to the Exception am getting an ArrayList of records. The exception comes from this line \r\n `Person person = (Person)query.list();` That line has the number `34` in my source code. This is the exception:\r\n\r\n    java.lang.ClassCastException: java.util.ArrayList cannot be cast to chapter3.simple.Person\r\n    \tat chapter3.simple.RankingTest.findPerson(RankingTest.java:34)\r\n    \tat chapter3.simple.RankingTest.savePerson(RankingTest.java:41)\r\n    \tat chapter3.simple.RankingTest.testSaveRanking(RankingTest.java:72)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:606)\r\n    \tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n    \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n    \tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n    \t...\r\n        ...\r\n\r\nWhat am I doing wrong?\r\n\r\nEdit\r\n---\r\n\r\nIs the setMaxResults(1) not supposed to return 1 results from the records?\r\n","title":"SetMaxResults() not working as expected in Hibernate","body":"<p>I am a beginner in Hibernate and getting some errors using the <code>SetMaxResults()</code> function. This is my MySQL table data:</p>\n<pre><code>1   J. C. Smell\n2   J. C. Smell\n3   J. C. Smell\n4   J. C. Smell\n</code></pre>\n<p>This is the method to retrieve one record from 4 identical records:</p>\n<pre><code>private Person findPerson(Session session, String name){\n        Query query = session.createQuery(&quot;from Person p where p.name=:name&quot;);\n        query.setParameter(&quot;name&quot;, name);\n        query.setMaxResults(1);\n        Person person = (Person)query.list();\n        if(person == null)\n            return null;\n        return person;\n    }\n</code></pre>\n<p>I expect to get one record, but according to the Exception am getting an ArrayList of records. The exception comes from this line\n<code>Person person = (Person)query.list();</code> That line has the number <code>34</code> in my source code. This is the exception:</p>\n<pre><code>java.lang.ClassCastException: java.util.ArrayList cannot be cast to chapter3.simple.Person\n    at chapter3.simple.RankingTest.findPerson(RankingTest.java:34)\n    at chapter3.simple.RankingTest.savePerson(RankingTest.java:41)\n    at chapter3.simple.RankingTest.testSaveRanking(RankingTest.java:72)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    ...\n    ...\n</code></pre>\n<p>What am I doing wrong?</p>\n<h2>Edit</h2>\n<p>Is the setMaxResults(1) not supposed to return 1 results from the records?</p>\n"},{"tags":["java","javac","type-inference","java-11","compiler-bug"],"comments":[{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":8,"creation_date":1550614026,"post_id":54775253,"comment_id":96331305,"body_markdown":"An exception from the compiler is a bug. Write up a test case and submit the bug.","body":"An exception from the compiler is a bug. Write up a test case and submit the bug."},{"owner":{"account_id":1806748,"reputation":3695,"user_id":1643711,"accept_rate":67,"display_name":"Mircea Stanciu"},"score":0,"creation_date":1553546628,"post_id":54775253,"comment_id":97417038,"body_markdown":"I confirm this bug as well","body":"I confirm this bug as well"},{"owner":{"account_id":6227013,"reputation":912,"user_id":4844908,"accept_rate":75,"display_name":"Robert Ravikumar"},"score":1,"creation_date":1605492198,"post_id":54775253,"comment_id":114658525,"body_markdown":"I am not able to build the project while my other team mates are able to build it . I tried to delete my repo . no luck .","body":"I am not able to build the project while my other team mates are able to build it . I tried to delete my repo . no luck ."},{"owner":{"account_id":4748063,"reputation":144,"user_id":3838849,"accept_rate":50,"display_name":"Callum Atwal"},"score":2,"creation_date":1643295238,"post_id":54775253,"comment_id":125305973,"body_markdown":"This is a bug in any version older than 11.0.8. Try upgrading your JDK to 11.0.8 or newer","body":"This is a bug in any version older than 11.0.8. Try upgrading your JDK to 11.0.8 or newer"},{"owner":{"account_id":2130230,"reputation":15498,"user_id":1891219,"display_name":"gaborsch"},"score":1,"creation_date":1651158874,"post_id":54775253,"comment_id":127302236,"body_markdown":"JDK 11.0.14 works, haven&#39;t tried earlier versions.","body":"JDK 11.0.14 works, haven&#39;t tried earlier versions."},{"owner":{"account_id":16535035,"reputation":437,"user_id":11947303,"display_name":"CodeSlave"},"score":0,"creation_date":1657793484,"post_id":54775253,"comment_id":128897041,"body_markdown":"JDK 11.0.15 also worked for me","body":"JDK 11.0.15 also worked for me"}],"answers":[{"comments":[{"owner":{"account_id":487587,"reputation":3346,"user_id":1375292,"accept_rate":67,"display_name":"Troy Daniels"},"score":1,"creation_date":1551135543,"post_id":54776592,"comment_id":96522036,"body_markdown":"Does &quot;fixed in version 12&quot; mean that I need to install JDK 12 to get the fix?  Will JDK 11 remain broken?","body":"Does &quot;fixed in version 12&quot; mean that I need to install JDK 12 to get the fix?  Will JDK 11 remain broken?"},{"owner":{"account_id":4312932,"reputation":23962,"user_id":3523579,"accept_rate":90,"display_name":"Mikhail Kholodkov"},"score":0,"creation_date":1551199574,"post_id":54776592,"comment_id":96549683,"body_markdown":"@TroyDaniels yes fix is included and scheduled to be released as part of JDK 12. https://openjdk.java.net/projects/jdk/12/","body":"@TroyDaniels yes fix is included and scheduled to be released as part of JDK 12. <a href=\"https://openjdk.java.net/projects/jdk/12/\" rel=\"nofollow noreferrer\">openjdk.java.net/projects/jdk/12</a>"},{"owner":{"account_id":1806748,"reputation":3695,"user_id":1643711,"accept_rate":67,"display_name":"Mircea Stanciu"},"score":0,"creation_date":1553546672,"post_id":54776592,"comment_id":97417052,"body_markdown":"what about JDK11 which &quot;supposed&quot; to be LTE?","body":"what about JDK11 which &quot;supposed&quot; to be LTE?"},{"owner":{"account_id":4312932,"reputation":23962,"user_id":3523579,"accept_rate":90,"display_name":"Mikhail Kholodkov"},"score":2,"creation_date":1553553808,"post_id":54776592,"comment_id":97419630,"body_markdown":"@MirceaStanciu [fix has been backported](https://bugs.openjdk.java.net/browse/JDK-8220578) and will be available in JDK 11.0.4. Updated the answer.","body":"@MirceaStanciu <a href=\"https://bugs.openjdk.java.net/browse/JDK-8220578\" rel=\"nofollow noreferrer\">fix has been backported</a> and will be available in JDK 11.0.4. Updated the answer."},{"owner":{"account_id":8652429,"reputation":938,"user_id":6477644,"display_name":"Maxim Kasyanov"},"score":3,"creation_date":1593433270,"post_id":54776592,"comment_id":110770792,"body_markdown":"java 11.0.6 has the same problem","body":"java 11.0.6 has the same problem"},{"owner":{"account_id":80262,"reputation":373,"user_id":227061,"accept_rate":20,"display_name":"wdk"},"score":1,"creation_date":1610741016,"post_id":54776592,"comment_id":116237441,"body_markdown":"Some consusion about versions: in openjdk it is fixed 11.0.4 onwards, oracle jdk 11.0.8. See original bug report [link](https://bugs.openjdk.java.net/browse/JDK-8210197).","body":"Some consusion about versions: in openjdk it is fixed 11.0.4 onwards, oracle jdk 11.0.8. See original bug report <a href=\"https://bugs.openjdk.java.net/browse/JDK-8210197\" rel=\"nofollow noreferrer\">link</a>."},{"owner":{"account_id":4555342,"reputation":615,"user_id":3699234,"accept_rate":61,"display_name":"Anand"},"score":0,"creation_date":1669809447,"post_id":54776592,"comment_id":131726404,"body_markdown":"thanks this post saved me,was unable to figure out wats wrong,literally no stack trace pointing to this change","body":"thanks this post saved me,was unable to figure out wats wrong,literally no stack trace pointing to this change"}],"tags":[],"owner":{"account_id":4312932,"reputation":23962,"user_id":3523579,"accept_rate":90,"display_name":"Mikhail Kholodkov"},"comment_count":7,"down_vote_count":0,"up_vote_count":65,"is_accepted":true,"score":65,"last_activity_date":1553553946,"creation_date":1550619527,"answer_id":54776592,"question_id":54775253,"body_markdown":"Bug ([JDK-8212586][1]) has been already submitted and [fixed][2] in version 12.\r\n\r\nMinimal, verifiable example:\r\n\r\n    public static void main(String[] args) {\r\n        new Bug&lt;&gt;(){};\r\n    }\r\n\r\n    static class Bug&lt;T&gt; {\r\n\r\n        Bug() {\r\n            test(new ParameterizedTypeReference&lt;&gt;(){});\r\n        }\r\n\r\n        void test(ParameterizedTypeReference&lt;T&gt; typeReference) {\r\n        }\r\n    }\r\n\r\n[Some Details.][3]\r\n\r\n\r\n----------\r\nFix has been also backported to JDK 11 - https://bugs.openjdk.java.net/browse/JDK-8220578. \r\n\r\nAvailable starting JDK **11.0.4**.\r\n\r\n  [1]: https://bugs.openjdk.java.net/browse/JDK-8212586\r\n  [2]: http://hg.openjdk.java.net/jdk/jdk/rev/bbbc110cdffe\r\n  [3]: http://mail.openjdk.java.net/pipermail/compiler-dev/2018-November/012592.html","title":"JDK 11.0.2 compilation fails with javac NPE on anonymous parameterized class type inference","body":"<p>Bug (<a href=\"https://bugs.openjdk.java.net/browse/JDK-8212586\" rel=\"noreferrer\">JDK-8212586</a>) has been already submitted and <a href=\"http://hg.openjdk.java.net/jdk/jdk/rev/bbbc110cdffe\" rel=\"noreferrer\">fixed</a> in version 12.</p>\n\n<p>Minimal, verifiable example:</p>\n\n<pre><code>public static void main(String[] args) {\n    new Bug&lt;&gt;(){};\n}\n\nstatic class Bug&lt;T&gt; {\n\n    Bug() {\n        test(new ParameterizedTypeReference&lt;&gt;(){});\n    }\n\n    void test(ParameterizedTypeReference&lt;T&gt; typeReference) {\n    }\n}\n</code></pre>\n\n<p><a href=\"http://mail.openjdk.java.net/pipermail/compiler-dev/2018-November/012592.html\" rel=\"noreferrer\">Some Details.</a></p>\n\n<hr>\n\n<p>Fix has been also backported to JDK 11 - <a href=\"https://bugs.openjdk.java.net/browse/JDK-8220578\" rel=\"noreferrer\">https://bugs.openjdk.java.net/browse/JDK-8220578</a>. </p>\n\n<p>Available starting JDK <strong>11.0.4</strong>.</p>\n"},{"tags":[],"owner":{"account_id":12583603,"reputation":91,"user_id":9153408,"display_name":"Otmane el alami el hassani"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1569040432,"creation_date":1561451871,"answer_id":56749957,"question_id":54775253,"body_markdown":"I Had the same error,you need to create a function : \r\n\r\n    ParameterizedTypeReference&lt;Object&gt; createParameterizedTypeReference(){ return new ParameterizedTypeReference&lt;&gt;(){}; }\r\n\r\nand call it : \r\n\r\n    ResponseEntity&lt;Object&gt; test = restTemplate.exchange(\r\n    &quot;https://example.com&quot;,\r\n    HttpMethod.GET,\r\n    new HttpEntity&lt;&gt;(headers),\r\n    createParameterizedTypeReference() { \r\n    });\r\n","title":"JDK 11.0.2 compilation fails with javac NPE on anonymous parameterized class type inference","body":"<p>I Had the same error,you need to create a function : </p>\n\n<pre><code>ParameterizedTypeReference&lt;Object&gt; createParameterizedTypeReference(){ return new ParameterizedTypeReference&lt;&gt;(){}; }\n</code></pre>\n\n<p>and call it : </p>\n\n<pre><code>ResponseEntity&lt;Object&gt; test = restTemplate.exchange(\n\"https://example.com\",\nHttpMethod.GET,\nnew HttpEntity&lt;&gt;(headers),\ncreateParameterizedTypeReference() { \n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18957548,"reputation":41,"user_id":13833816,"display_name":"Martin Langvatn"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1593505676,"creation_date":1593504134,"answer_id":62652849,"question_id":54775253,"body_markdown":"Java 11.0.7 has the same problem. \r\n\r\nThis changed from:\r\n\r\n    new ParameterizedTypeReference&lt;&gt;() {\r\n    })\r\n\r\nto this:\r\n\r\n    new ParameterizedTypeReference&lt;HashMap&lt;String, MyClass&gt;&gt;() {\r\n    })","title":"JDK 11.0.2 compilation fails with javac NPE on anonymous parameterized class type inference","body":"<p>Java 11.0.7 has the same problem.</p>\n<p>This changed from:</p>\n<pre><code>new ParameterizedTypeReference&lt;&gt;() {\n})\n</code></pre>\n<p>to this:</p>\n<pre><code>new ParameterizedTypeReference&lt;HashMap&lt;String, MyClass&gt;&gt;() {\n})\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8460659,"reputation":2301,"user_id":6346531,"display_name":"aksh1618"},"score":0,"creation_date":1609858046,"post_id":62814267,"comment_id":115949191,"body_markdown":"OpenJDK 11.0.8 has the bug too","body":"OpenJDK 11.0.8 has the bug too"},{"owner":{"account_id":11099552,"reputation":1649,"user_id":8148637,"display_name":"KnockingHeads"},"score":0,"creation_date":1670826070,"post_id":62814267,"comment_id":131954641,"body_markdown":"I did with 11.0.12 and it works.","body":"I did with 11.0.12 and it works."}],"tags":[],"owner":{"account_id":14173637,"reputation":105,"user_id":10239573,"display_name":"Miri"},"comment_count":2,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1594295693,"creation_date":1594295693,"answer_id":62814267,"question_id":54775253,"body_markdown":"As pointed out in previous comments, the problem is with parametrized anonymous classes, e.g. when using TypeToken from Guava, this does **NOT** work:\r\n\r\n    public List&lt;SomeClass&gt; list() {\r\n        return getData(new TypeToken&lt;&gt;() { });\r\n    }\r\n\r\nBut this **DOES** work:\r\n\r\n    public List&lt;SomeClass&gt; list() {\r\n        return getData(new TypeToken&lt;List&lt;SomeClass&gt;&gt;() { });\r\n    }\r\n\r\nI tried that in versions 11.0.3 - 11.0.7 versions and all contains the bug.","title":"JDK 11.0.2 compilation fails with javac NPE on anonymous parameterized class type inference","body":"<p>As pointed out in previous comments, the problem is with parametrized anonymous classes, e.g. when using TypeToken from Guava, this does <strong>NOT</strong> work:</p>\n<pre><code>public List&lt;SomeClass&gt; list() {\n    return getData(new TypeToken&lt;&gt;() { });\n}\n</code></pre>\n<p>But this <strong>DOES</strong> work:</p>\n<pre><code>public List&lt;SomeClass&gt; list() {\n    return getData(new TypeToken&lt;List&lt;SomeClass&gt;&gt;() { });\n}\n</code></pre>\n<p>I tried that in versions 11.0.3 - 11.0.7 versions and all contains the bug.</p>\n"},{"tags":[],"owner":{"account_id":2824572,"reputation":208,"user_id":2427475,"display_name":"bogdancep"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1597062638,"creation_date":1597062638,"answer_id":63340262,"question_id":54775253,"body_markdown":"I&#39;ve fixed this problem on my machine by upgrading to AdoptOpenJDK 11.0.8.\r\n\r\nhttps://adoptopenjdk.net/installation.html#x64_mac-jdk","title":"JDK 11.0.2 compilation fails with javac NPE on anonymous parameterized class type inference","body":"<p>I've fixed this problem on my machine by upgrading to AdoptOpenJDK 11.0.8.</p>\n<p><a href=\"https://adoptopenjdk.net/installation.html#x64_mac-jdk\" rel=\"nofollow noreferrer\">https://adoptopenjdk.net/installation.html#x64_mac-jdk</a></p>\n"},{"tags":[],"owner":{"account_id":5600723,"reputation":649,"user_id":4437074,"display_name":"Ashutosh Srivastav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665740485,"creation_date":1665740485,"answer_id":74067342,"question_id":54775253,"body_markdown":"Most of the times, this error doesn&#39;t tell you the originating class so it&#39;s very hard to intentionally reproduce the problem. After trying a lot, I finally updated project JDK to 11.0.16 (from 11.0.7) and it worked!","title":"JDK 11.0.2 compilation fails with javac NPE on anonymous parameterized class type inference","body":"<p>Most of the times, this error doesn't tell you the originating class so it's very hard to intentionally reproduce the problem. After trying a lot, I finally updated project JDK to 11.0.16 (from 11.0.7) and it worked!</p>\n"},{"tags":[],"owner":{"account_id":1013261,"reputation":61,"user_id":1025387,"display_name":"Naveen LP"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686692584,"creation_date":1686692584,"answer_id":76468908,"question_id":54775253,"body_markdown":"In case anyone else faces this issue: we had to change the java compiler from javac to eclipse (anything else that&#39;s not javac) to get our code to compile. Upgrading/downgrading jdk didn&#39;t fix the issue for us. \r\n\r\n[![settings on intellij idea][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AhWkT.png","title":"JDK 11.0.2 compilation fails with javac NPE on anonymous parameterized class type inference","body":"<p>In case anyone else faces this issue: we had to change the java compiler from javac to eclipse (anything else that's not javac) to get our code to compile. Upgrading/downgrading jdk didn't fix the issue for us.</p>\n<p><a href=\"https://i.stack.imgur.com/AhWkT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AhWkT.png\" alt=\"settings on intellij idea\" /></a></p>\n"},{"tags":[],"owner":{"account_id":17426473,"reputation":990,"user_id":12631293,"display_name":"Tomasz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695287396,"creation_date":1695287396,"answer_id":77148779,"question_id":54775253,"body_markdown":"In my case I &lt;b&gt;intalled latest java 11 from oracle &lt;/b&gt;(Java SE Development Kit 11.0.19) and it solved problem. You can download latest version here : https://www.oracle.com/pl/java/technologies/javase/jdk11-archive-downloads.html","title":"JDK 11.0.2 compilation fails with javac NPE on anonymous parameterized class type inference","body":"<p>In my case I <b>intalled latest java 11 from oracle </b>(Java SE Development Kit 11.0.19) and it solved problem. You can download latest version here : <a href=\"https://www.oracle.com/pl/java/technologies/javase/jdk11-archive-downloads.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/pl/java/technologies/javase/jdk11-archive-downloads.html</a></p>\n"}],"owner":{"account_id":4312932,"reputation":23962,"user_id":3523579,"accept_rate":90,"display_name":"Mikhail Kholodkov"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41233,"favorite_count":0,"down_vote_count":0,"up_vote_count":73,"accepted_answer_id":54776592,"answer_count":8,"score":73,"last_activity_date":1695287396,"creation_date":1550612018,"question_id":54775253,"body_markdown":"**Code** (spring-web 5.1.2)\r\n\r\n    public static void main(String[] args) {\r\n        RestTemplate restTemplate = new RestTemplate();\r\n\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.set(HttpHeaders.AUTHORIZATION, &quot;token&quot;);\r\n        HttpEntity&lt;Object&gt; requestEntity = new HttpEntity&lt;&gt;(headers);\r\n\r\n        ResponseEntity&lt;Object&gt; test = restTemplate.exchange(\r\n                &quot;https://example.com&quot;,\r\n                HttpMethod.GET,\r\n                new HttpEntity&lt;&gt;(headers),\r\n                new ParameterizedTypeReference&lt;&gt;() { // fails here\r\n                });\r\n    }\r\n\r\n**OracleJDK 1.8** (expected output)\r\n\r\n&gt; cannot infer type arguments for\r\n&gt; org.springframework.core.ParameterizedTypeReference&lt;T&gt; \r\n\r\n&gt; reason: cannot use &#39;&lt;&gt;&#39; with anonymous inner classes\r\n\r\n**OracleJDK 11.0.2** (not expected output)\r\n\r\n&gt; compiler message file broken: key=compiler.misc.msg.bug\r\n&gt; arguments=11.0.2, {1}, {2}, {3}, {4}, {5}, {6}, {7}\r\n&gt; java.lang.NullPointerException \tat\r\n&gt; jdk.compiler/com.sun.tools.javac.comp.Flow$FlowAnalyzer.visitApply(Flow.java:1235)\r\n&gt; \tat\r\n&gt; jdk.compiler/com.sun.tools.javac.tree.JCTree$JCMethodInvocation.accept(JCTree.java:1634)\r\n&gt; \tat\r\n&gt; jdk.compiler/com.sun.tools.javac.tree.TreeScanner.scan(TreeScanner.java:49)\r\n&gt; \tat\r\n&gt; jdk.compiler/com.sun.tools.javac.comp.Flow$BaseAnalyzer.scan(Flow.java:398)\r\n&gt; \tat\r\n&gt; jdk.compiler/com.sun.tools.javac.comp.Flow$FlowAnalyzer.visitVarDef(Flow.java:989) &lt;br/&gt;\r\n&gt; ...\r\n\r\nIf I change diamond operator to explicit type\r\n\r\n `new ParameterizedTypeReference&lt;&gt;(){}` to `new ParameterizedTypeReference&lt;Object&gt;(){}`\r\n\r\nthen the code compiles successfully on both JDKs.\r\n\r\nIs it a known compiler bug?","title":"JDK 11.0.2 compilation fails with javac NPE on anonymous parameterized class type inference","body":"<p><strong>Code</strong> (spring-web 5.1.2)</p>\n\n<pre><code>public static void main(String[] args) {\n    RestTemplate restTemplate = new RestTemplate();\n\n    HttpHeaders headers = new HttpHeaders();\n    headers.set(HttpHeaders.AUTHORIZATION, \"token\");\n    HttpEntity&lt;Object&gt; requestEntity = new HttpEntity&lt;&gt;(headers);\n\n    ResponseEntity&lt;Object&gt; test = restTemplate.exchange(\n            \"https://example.com\",\n            HttpMethod.GET,\n            new HttpEntity&lt;&gt;(headers),\n            new ParameterizedTypeReference&lt;&gt;() { // fails here\n            });\n}\n</code></pre>\n\n<p><strong>OracleJDK 1.8</strong> (expected output)</p>\n\n<blockquote>\n  <p>cannot infer type arguments for\n  org.springframework.core.ParameterizedTypeReference </p>\n  \n  <p>reason: cannot use '&lt;>' with anonymous inner classes</p>\n</blockquote>\n\n<p><strong>OracleJDK 11.0.2</strong> (not expected output)</p>\n\n<blockquote>\n  <p>compiler message file broken: key=compiler.misc.msg.bug\n  arguments=11.0.2, {1}, {2}, {3}, {4}, {5}, {6}, {7}\n  java.lang.NullPointerException    at\n  jdk.compiler/com.sun.tools.javac.comp.Flow$FlowAnalyzer.visitApply(Flow.java:1235)\n    at\n  jdk.compiler/com.sun.tools.javac.tree.JCTree$JCMethodInvocation.accept(JCTree.java:1634)\n    at\n  jdk.compiler/com.sun.tools.javac.tree.TreeScanner.scan(TreeScanner.java:49)\n    at\n  jdk.compiler/com.sun.tools.javac.comp.Flow$BaseAnalyzer.scan(Flow.java:398)\n    at\n  jdk.compiler/com.sun.tools.javac.comp.Flow$FlowAnalyzer.visitVarDef(Flow.java:989) <br/>\n  ...</p>\n</blockquote>\n\n<p>If I change diamond operator to explicit type</p>\n\n<p><code>new ParameterizedTypeReference&lt;&gt;(){}</code> to <code>new ParameterizedTypeReference&lt;Object&gt;(){}</code></p>\n\n<p>then the code compiles successfully on both JDKs.</p>\n\n<p>Is it a known compiler bug?</p>\n"},{"tags":["java","jms","ibm-mq","cics"],"comments":[{"owner":{"account_id":9804285,"reputation":10345,"user_id":7264620,"display_name":"JoshMc"},"score":0,"creation_date":1694052169,"post_id":77056065,"comment_id":135841619,"body_markdown":"Does this answer your question? [getting 2110 MQRC format error from Mainframe when sending request and getting reply from IBM MQ using JMS](https://stackoverflow.com/questions/76998990/getting-2110-mqrc-format-error-from-mainframe-when-sending-request-and-getting-r)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/76998990/getting-2110-mqrc-format-error-from-mainframe-when-sending-request-and-getting-r\">getting 2110 MQRC format error from Mainframe when sending request and getting reply from IBM MQ using JMS</a>"},{"owner":{"account_id":9804285,"reputation":10345,"user_id":7264620,"display_name":"JoshMc"},"score":1,"creation_date":1694052244,"post_id":77056065,"comment_id":135841630,"body_markdown":"You should refine your original question not open a duplicate because you didn&#39;t like the response.","body":"You should refine your original question not open a duplicate because you didn&#39;t like the response."}],"answers":[{"comments":[{"owner":{"account_id":1535582,"reputation":7172,"user_id":1431734,"display_name":"Roger"},"score":0,"creation_date":1694714573,"post_id":77063456,"comment_id":135931250,"body_markdown":"The cmqc.h file is included when you install MQ and select &quot;sample code &amp; headers&quot;.","body":"The cmqc.h file is included when you install MQ and select &quot;sample code &amp; headers&quot;."},{"owner":{"account_id":29272689,"reputation":27,"user_id":22427101,"display_name":"SRA"},"score":0,"creation_date":1695218907,"post_id":77063456,"comment_id":135995298,"body_markdown":"I refined my question with request message and response message. Please help to check. I checked with my server team to get the cmqc.h file but they couldn&#39;t find it and I dont have a access to check those file. I suspect this error related to MQCIH. But not  sure which one causing the issue. Please help.","body":"I refined my question with request message and response message. Please help to check. I checked with my server team to get the cmqc.h file but they couldn&#39;t find it and I dont have a access to check those file. I suspect this error related to MQCIH. But not  sure which one causing the issue. Please help."}],"tags":[],"owner":{"account_id":1535582,"reputation":7172,"user_id":1431734,"display_name":"Roger"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694131784,"creation_date":1694131784,"answer_id":77063456,"question_id":77056065,"body_markdown":"You didn&#39;t follow any tips I gave you in the other post on the same subject. There is a lot wrong with your code so I decided to play around with my own code because I was bored today. \r\n\r\nI don&#39;t think you are understanding how MQ handles the chaining of embedded structures:\r\n\r\nThis sets the CCSID of the MQMD header:\r\n\r\n    message.setIntProperty(&quot;JMS_IBM_MQMD_CodedCharSetId&quot;,819);\r\n\r\nWhereas this sets the CCSID of the first embedded structure:\r\n\r\n    message.setIntProperty(&quot;JMS_IBM_Character_Set&quot;, 819);\r\n\r\nNext, why are you setting the MQMD UserId field? There is really no purpose to it. \r\n\r\nAnd your setting of the MQMD format field is not correct.  \r\n\r\nFinally, is the message payload or any of the structures going to be in EBCDIC? If not, then do NOT attempt to set the CCSID, because it will just break or generate an error.\r\n\r\nHere is a fully functioning JMS application that puts a CICS message to a queue.\r\n\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.DataOutputStream;\r\n    import java.io.IOException;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Date;\r\n    import java.util.Hashtable;\r\n    \r\n    import javax.jms.BytesMessage;\r\n    import javax.jms.Destination;\r\n    import javax.jms.JMSException;\r\n    import javax.jms.Queue;\r\n    import javax.jms.QueueConnection;\r\n    import javax.jms.QueueConnectionFactory;\r\n    import javax.jms.QueueSender;\r\n    import javax.jms.QueueSession;\r\n    import javax.jms.Session;\r\n    import javax.naming.Context;\r\n    import javax.naming.InitialContext;\r\n    import javax.naming.NamingException;\r\n    \r\n    import com.ibm.msg.client.jms.JmsDestination;\r\n    \r\n    import com.ibm.mq.MQException;\r\n    import com.ibm.mq.constants.MQConstants;\r\n    \r\n    /**\r\n     * Program Name\r\n     *  MQTestJMS03\r\n     *\r\n     * Description\r\n     *  This java JMS class will connect to a remote queue manager using JNDI and put a message to a queue.\r\n     *\r\n     * Sample Command Line Parameters\r\n     *  -c myQCF -q dev.test.q -f C:\\JNDI-Directory\\roger\\mqjndi -u UserID -x Password\r\n     *\r\n     *  Sample MQ JNDI Commands:\r\n     *    DEFINE QCF(myQCF) QMANAGER(MQA1) CHANNEL(TEST.CHL) HOSTNAME(127.0.0.1) PORT(1414) TRANSPORT(CLIENT) FAILIFQUIESCE(YES)\r\n     *    DEFINE Q(dev.test.q) QUEUE(TEST.Q1) QMANAGER(MQA1) TARGCLIENT(JMS) FAILIFQUIESCE(YES)\r\n     *    DEFINE Q(dev.test.q.reply) QUEUE(TEST.REPLY.Q) QMANAGER(MQA1) TARGCLIENT(JMS) FAILIFQUIESCE(YES)\r\n     *\r\n     * @author Roger Lacroix\r\n     */\r\n    public class MQTestJMS03\r\n    {\r\n       private static final SimpleDateFormat  LOGGER_TIMESTAMP = new SimpleDateFormat(&quot;yyyy/MM/dd HH:mm:ss.SSS&quot;);\r\n       private final String BLANK4 = &quot;    &quot;;\r\n       private final String BLANK8 = &quot;        &quot;;\r\n    \r\n       private QueueConnectionFactory cf;\r\n       private String qName;\r\n       private Destination destination = null;\r\n       private Queue replyQ;\r\n       private Hashtable&lt;String,String&gt; params;\r\n    \r\n       public MQTestJMS03() throws NamingException\r\n       {\r\n          super();\r\n          params = new Hashtable&lt;String,String&gt;();\r\n       }\r\n    \r\n       /**\r\n        * Make sure the required parameters are present.\r\n        * @return true/false\r\n        */\r\n       private boolean allParamsPresent()\r\n       {\r\n          boolean b = params.containsKey(&quot;-c&quot;) &amp;&amp; params.containsKey(&quot;-q&quot;) &amp;&amp;\r\n                      params.containsKey(&quot;-f&quot;) &amp;&amp;\r\n                      params.containsKey(&quot;-u&quot;) &amp;&amp; params.containsKey(&quot;-x&quot;);\r\n    \r\n          return b;\r\n       }\r\n    \r\n       /**\r\n        * Extract the command-line parameters and initialize the MQ variables.\r\n        * @param args\r\n        * @throws IllegalArgumentException\r\n        */\r\n       private void init(String[] args) throws IllegalArgumentException\r\n       {\r\n          if (args.length &gt; 0 &amp;&amp; (args.length % 2) == 0)\r\n          {\r\n             for (int i = 0; i &lt; args.length; i += 2)\r\n             {\r\n                params.put(args[i], args[i + 1]);\r\n             }\r\n          }\r\n          else\r\n          {\r\n             throw new IllegalArgumentException();\r\n          }\r\n    \r\n          if (allParamsPresent())\r\n          {\r\n             Hashtable&lt;String,String&gt; env = new Hashtable&lt;String,String&gt;();\r\n             env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.fscontext.RefFSContextFactory&quot;);\r\n             env.put(Context.PROVIDER_URL, &quot;file:/&quot;+(String) params.get(&quot;-f&quot;));\r\n    \r\n             try\r\n             {\r\n                Context ctx = new InitialContext(env);\r\n    \r\n                cf = (QueueConnectionFactory) ctx.lookup((String) params.get(&quot;-c&quot;));\r\n                qName = ((Queue) ctx.lookup((String) params.get(&quot;-q&quot;))).getQueueName();\r\n                replyQ = (Queue) ctx.lookup((String) params.get(&quot;-q&quot;) + &quot;.reply&quot;);\r\n             }\r\n             catch (NamingException e)\r\n             {\r\n                MQTestJMS03.logger(e.getLocalizedMessage());\r\n                e.printStackTrace();\r\n                throw new IllegalArgumentException();\r\n             }\r\n             catch (JMSException e)\r\n             {\r\n                MQTestJMS03.logger(e.getLocalizedMessage());\r\n                e.printStackTrace();\r\n             }\r\n          }\r\n          else\r\n          {\r\n             throw new IllegalArgumentException();\r\n          }\r\n       }\r\n    \r\n       /**\r\n        * Test the connection to the queue manager.\r\n        * @throws MQException\r\n        */\r\n       private void testConn() throws JMSException\r\n       {\r\n          QueueConnection conn = null;\r\n          QueueSession session = null;\r\n    \r\n          try\r\n          {\r\n             conn = cf.createQueueConnection((String) params.get(&quot;-u&quot;), (String) params.get(&quot;-x&quot;));\r\n             conn.start();\r\n    \r\n             session = conn.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);\r\n             MQTestJMS03.logger(&quot;successfully connected.&quot;);\r\n    \r\n             sendMsg(session);\r\n          }\r\n          catch (JMSException e)\r\n          {\r\n             MQTestJMS03.logger(&quot;getLinkedException()=&quot; + e.getLinkedException());\r\n             MQTestJMS03.logger(e.getLocalizedMessage());\r\n             e.printStackTrace();\r\n          }\r\n          finally\r\n          {\r\n             try\r\n             {\r\n                if (session != null)\r\n                   session.close();\r\n             }\r\n             catch (Exception ex)\r\n             {\r\n                MQTestJMS03.logger(&quot;session.close() : &quot; + ex.getLocalizedMessage());\r\n             }\r\n    \r\n             try\r\n             {\r\n                if (conn != null)\r\n                   conn.stop();\r\n             }\r\n             catch (Exception ex)\r\n             {\r\n                MQTestJMS03.logger(&quot;connection.stop() : &quot; + ex.getLocalizedMessage());\r\n             }\r\n    \r\n             try\r\n             {\r\n                if (conn != null)\r\n                   conn.close();\r\n             }\r\n             catch (Exception ex)\r\n             {\r\n                MQTestJMS03.logger(&quot;connection.close() : &quot; + ex.getLocalizedMessage());\r\n             }\r\n          }\r\n       }\r\n    \r\n       /**\r\n        * Send a message to a queue.\r\n        * @throws MQException\r\n        */\r\n       private void sendMsg(QueueSession session) throws JMSException\r\n       {\r\n          QueueSender sender = null;\r\n    \r\n          try\r\n          {\r\n             destination = session.createQueue(qName);\r\n    \r\n             ((JmsDestination) destination).setIntProperty(MQConstants.WMQ_MQMD_MESSAGE_CONTEXT,MQConstants.WMQ_MDCTX_SET_IDENTITY_CONTEXT);\r\n    \r\n             // Enable write of MQMD fields. See documentation for further details.\r\n             ((JmsDestination) destination).setBooleanProperty(MQConstants.WMQ_MQMD_WRITE_ENABLED, true);\r\n    \r\n             sender = session.createSender((Queue) destination);\r\n    \r\n             BytesMessage message = session.createBytesMessage();\r\n    \r\n             // Request Headers\r\n             message.setStringProperty(&quot;JMS_IBM_MQMD_UserIdentifier&quot;, &quot;RECFUSER&quot;);\r\n    //         message.setIntProperty(&quot;JMS_IBM_MQMD_CodedCharSetId&quot;,819);\r\n             message.setJMSReplyTo(replyQ);\r\n    \r\n             /* Set the format value in the MQRFH2 header to CICS because that is the next embedded message. */\r\n             message.setStringProperty(&quot;JMS_IBM_Format&quot;, &quot;MQCICS&quot;);\r\n    //         message.setIntProperty(&quot;JMS_IBM_Character_Set&quot;, 819);\r\n    \r\n             // Construct the CIH header as a byte array\r\n             ByteArrayOutputStream outBytes = new ByteArrayOutputStream();\r\n             DataOutputStream outData = new DataOutputStream(outBytes);\r\n    \r\n             outData.writeBytes(&quot;CIH &quot;);     // MQCHAR strucId\r\n             outData.writeInt(2);            // MQLONG version\r\n             outData.writeInt(180);          // MQLONG strucLength\r\n             outData.writeInt(MQConstants.MQENC_INTEGER_NORMAL); // MQLONG encoding\r\n    \r\n             // Only set this to 500 if your comm area aka message data is EBCDIC\r\n             outData.writeInt(500);          // MQLONG CodedCharSetId;\r\n             outData.writeBytes(MQConstants.MQFMT_STRING); // MQCHAR8 Format;\r\n             outData.writeInt(4);            // MQLONG Flags;\r\n             outData.writeInt(0);            // MQLONG ReturnCode;\r\n             outData.writeInt(0);            // MQLONG CompCode; Completion code\r\n             outData.writeInt(0);            // MQLONG Reason; MQ reason code\r\n             outData.writeInt(0x111);        // MQCUOWC_ONLY // MQLONG UOWControl; Unit of work control\r\n    \r\n             outData.writeInt(-2);       // MQCGWI_DEFAULT // MQLONG GetWaitInterval;\r\n             outData.writeInt(1);        // MQCLT_PROGRAM // MQLONG LinkType;\r\n             outData.writeInt(-1);       // MQLONG OutputDataLength;\r\n             outData.writeInt(0);        // MQLONG FacilityKeepTime;\r\n             outData.writeInt(0);        // MQLONG ADSDescriptor;\r\n             outData.writeInt(0);        // MQLONG ConversationalTask;\r\n             outData.writeInt(0);        // MQLONG TaskEndStatus;\r\n             outData.write(BLANK8.getBytes()); // MQBYTE Facility[8];\r\n             outData.writeBytes(BLANK4); // MQCHAR4 Function;\r\n             outData.writeBytes(BLANK4); // MQCHAR4 `    ;\r\n             outData.writeBytes(BLANK8); // MQCHAR8 Authenticator;\r\n             outData.writeBytes(BLANK8); // MQCHAR8 Reserved1;\r\n             outData.writeBytes(MQConstants.MQFMT_STRING); // MQCHAR8\r\n             outData.writeBytes(BLANK4); // MQCHAR4 RemoteSysId;\r\n             outData.writeBytes(BLANK4); // MQCHAR4 RemoteTrans Id;\r\n             outData.writeBytes(&quot;ABCD&quot;); // MQCHAR4 TransactionId;;\r\n             outData.writeBytes(BLANK4); // MQCHAR4 FacilityLike;\r\n             outData.writeBytes(BLANK4); // MQCHAR4 AttentionId;\r\n             outData.writeBytes(BLANK4); // MQCHAR4 StartCode;\r\n             outData.writeBytes(BLANK4); // MQCHAR4 CancelCode;\r\n             outData.writeBytes(BLANK4); // MQCHAR4 NextTransactionId;\r\n             outData.writeBytes(BLANK8); // MQCHAR8 Reserved2;\r\n             outData.writeBytes(BLANK8); // MQCHAR8 Reserved3;\r\n             outData.writeInt(0);        // MQLONG CursorPosition;\r\n             outData.writeInt(0);        // MQLONG ErrorOffset;\r\n             outData.writeInt(0);        // MQLONG InputItem;\r\n             outData.writeInt(0);        // MQLONG Reserved4;\r\n             // ---- make sure progName is exactly 8 characters\r\n             StringBuffer pgmName = new StringBuffer(&quot;TESTPGM&quot;);\r\n             for (int i = pgmName.length(); i &lt; 8; i++)\r\n                 pgmName.append(&#39; &#39;);\r\n             // ---- write program name followed by commarea\r\n             outData.writeBytes(pgmName.substring(0, 8));\r\n             outData.writeBytes(&quot;commArea 012356789&quot;);\r\n    \r\n             message.writeBytes(outBytes.toByteArray());\r\n    \r\n             sender.send(message);\r\n    \r\n             MQTestJMS03.logger(&quot;Message sent.&quot;);\r\n          }\r\n          catch (JMSException e)\r\n          {\r\n             MQTestJMS03.logger(&quot;getLinkedException()=&quot; + e.getLinkedException());\r\n             MQTestJMS03.logger(e.getLocalizedMessage());\r\n             e.printStackTrace();\r\n          }\r\n          catch (IOException e)\r\n          {\r\n             MQTestJMS03.logger(e.getLocalizedMessage());\r\n             e.printStackTrace();\r\n          }\r\n          finally\r\n          {\r\n             try\r\n             {\r\n                if (sender != null)\r\n                   sender.close();\r\n             }\r\n             catch (Exception ex)\r\n             {\r\n                MQTestJMS03.logger(&quot;sender.close() : &quot; + ex.getLocalizedMessage());\r\n             }\r\n          }\r\n       }\r\n    \r\n       /**\r\n        * A simple logger method\r\n        * @param data\r\n        */\r\n       public static void logger(String data)\r\n       {\r\n          String className = Thread.currentThread().getStackTrace()[2].getClassName();\r\n    \r\n          // Remove the package info.\r\n          if ( (className != null) &amp;&amp; (className.lastIndexOf(&#39;.&#39;) != -1) )\r\n             className = className.substring(className.lastIndexOf(&#39;.&#39;)+1);\r\n    \r\n          System.out.println(LOGGER_TIMESTAMP.format(new Date())+&quot; &quot;+className+&quot;: &quot;+Thread.currentThread().getStackTrace()[2].getMethodName()+&quot;: &quot;+data);\r\n       }\r\n    \r\n       /**\r\n        * main line\r\n        * @param args\r\n        */\r\n       public static void main(String[] args)\r\n       {\r\n          try\r\n          {\r\n             MQTestJMS03 tj = new MQTestJMS03();\r\n             tj.init(args);\r\n             tj.testConn();\r\n             MQTestJMS03.logger(&quot;finished.&quot;);\r\n          }\r\n          catch (IllegalArgumentException e)\r\n          {\r\n             MQTestJMS03.logger(&quot;Usage: java MQTestJMS03 -c QueueConnectionFactoryName -q JMS_Queue_Name -f path_to_MQ_JNDI -u UserID -x Password&quot;);\r\n             System.exit(1);\r\n          }\r\n          catch (NamingException ex)\r\n          {\r\n             MQTestJMS03.logger(ex.getLocalizedMessage());\r\n             ex.printStackTrace();\r\n    \r\n          }\r\n          catch (JMSException e)\r\n          {\r\n             MQTestJMS03.logger(&quot;getLinkedException()=&quot; + e.getLinkedException());\r\n             MQTestJMS03.logger(e.getLocalizedMessage());\r\n             e.printStackTrace();\r\n          }\r\n          catch (Exception ex)\r\n          {\r\n             MQTestJMS03.logger(ex.getLocalizedMessage());\r\n             ex.printStackTrace();\r\n          }\r\n       }\r\n    }\r\n\r\nHere is a HEX dump of the message sent from my code showing the 2 embedded structures:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe message&#39;s MQMD Format field is shown here:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nAnd the MQRFH2 header, JMS properties and the correctly set CICS format is shown here:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nNow, I don&#39;t currently have a CICS region to test your actual formatting CICS header and message payload. But if its not correct, just refer to the MQCIH structure in the cmqc.h file.\r\n\r\nOr you could just use the MQCIH class from the MQ Java base classes.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1R0H5.png\r\n  [2]: https://i.stack.imgur.com/05kA1.png\r\n  [3]: https://i.stack.imgur.com/IacPu.png","title":"How to resolve Unable to put message to reply queue. MQRC=2110?","body":"<p>You didn't follow any tips I gave you in the other post on the same subject. There is a lot wrong with your code so I decided to play around with my own code because I was bored today.</p>\n<p>I don't think you are understanding how MQ handles the chaining of embedded structures:</p>\n<p>This sets the CCSID of the MQMD header:</p>\n<pre><code>message.setIntProperty(&quot;JMS_IBM_MQMD_CodedCharSetId&quot;,819);\n</code></pre>\n<p>Whereas this sets the CCSID of the first embedded structure:</p>\n<pre><code>message.setIntProperty(&quot;JMS_IBM_Character_Set&quot;, 819);\n</code></pre>\n<p>Next, why are you setting the MQMD UserId field? There is really no purpose to it.</p>\n<p>And your setting of the MQMD format field is not correct.</p>\n<p>Finally, is the message payload or any of the structures going to be in EBCDIC? If not, then do NOT attempt to set the CCSID, because it will just break or generate an error.</p>\n<p>Here is a fully functioning JMS application that puts a CICS message to a queue.</p>\n<pre><code>import java.io.ByteArrayOutputStream;\nimport java.io.DataOutputStream;\nimport java.io.IOException;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\nimport java.util.Hashtable;\n\nimport javax.jms.BytesMessage;\nimport javax.jms.Destination;\nimport javax.jms.JMSException;\nimport javax.jms.Queue;\nimport javax.jms.QueueConnection;\nimport javax.jms.QueueConnectionFactory;\nimport javax.jms.QueueSender;\nimport javax.jms.QueueSession;\nimport javax.jms.Session;\nimport javax.naming.Context;\nimport javax.naming.InitialContext;\nimport javax.naming.NamingException;\n\nimport com.ibm.msg.client.jms.JmsDestination;\n\nimport com.ibm.mq.MQException;\nimport com.ibm.mq.constants.MQConstants;\n\n/**\n * Program Name\n *  MQTestJMS03\n *\n * Description\n *  This java JMS class will connect to a remote queue manager using JNDI and put a message to a queue.\n *\n * Sample Command Line Parameters\n *  -c myQCF -q dev.test.q -f C:\\JNDI-Directory\\roger\\mqjndi -u UserID -x Password\n *\n *  Sample MQ JNDI Commands:\n *    DEFINE QCF(myQCF) QMANAGER(MQA1) CHANNEL(TEST.CHL) HOSTNAME(127.0.0.1) PORT(1414) TRANSPORT(CLIENT) FAILIFQUIESCE(YES)\n *    DEFINE Q(dev.test.q) QUEUE(TEST.Q1) QMANAGER(MQA1) TARGCLIENT(JMS) FAILIFQUIESCE(YES)\n *    DEFINE Q(dev.test.q.reply) QUEUE(TEST.REPLY.Q) QMANAGER(MQA1) TARGCLIENT(JMS) FAILIFQUIESCE(YES)\n *\n * @author Roger Lacroix\n */\npublic class MQTestJMS03\n{\n   private static final SimpleDateFormat  LOGGER_TIMESTAMP = new SimpleDateFormat(&quot;yyyy/MM/dd HH:mm:ss.SSS&quot;);\n   private final String BLANK4 = &quot;    &quot;;\n   private final String BLANK8 = &quot;        &quot;;\n\n   private QueueConnectionFactory cf;\n   private String qName;\n   private Destination destination = null;\n   private Queue replyQ;\n   private Hashtable&lt;String,String&gt; params;\n\n   public MQTestJMS03() throws NamingException\n   {\n      super();\n      params = new Hashtable&lt;String,String&gt;();\n   }\n\n   /**\n    * Make sure the required parameters are present.\n    * @return true/false\n    */\n   private boolean allParamsPresent()\n   {\n      boolean b = params.containsKey(&quot;-c&quot;) &amp;&amp; params.containsKey(&quot;-q&quot;) &amp;&amp;\n                  params.containsKey(&quot;-f&quot;) &amp;&amp;\n                  params.containsKey(&quot;-u&quot;) &amp;&amp; params.containsKey(&quot;-x&quot;);\n\n      return b;\n   }\n\n   /**\n    * Extract the command-line parameters and initialize the MQ variables.\n    * @param args\n    * @throws IllegalArgumentException\n    */\n   private void init(String[] args) throws IllegalArgumentException\n   {\n      if (args.length &gt; 0 &amp;&amp; (args.length % 2) == 0)\n      {\n         for (int i = 0; i &lt; args.length; i += 2)\n         {\n            params.put(args[i], args[i + 1]);\n         }\n      }\n      else\n      {\n         throw new IllegalArgumentException();\n      }\n\n      if (allParamsPresent())\n      {\n         Hashtable&lt;String,String&gt; env = new Hashtable&lt;String,String&gt;();\n         env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.fscontext.RefFSContextFactory&quot;);\n         env.put(Context.PROVIDER_URL, &quot;file:/&quot;+(String) params.get(&quot;-f&quot;));\n\n         try\n         {\n            Context ctx = new InitialContext(env);\n\n            cf = (QueueConnectionFactory) ctx.lookup((String) params.get(&quot;-c&quot;));\n            qName = ((Queue) ctx.lookup((String) params.get(&quot;-q&quot;))).getQueueName();\n            replyQ = (Queue) ctx.lookup((String) params.get(&quot;-q&quot;) + &quot;.reply&quot;);\n         }\n         catch (NamingException e)\n         {\n            MQTestJMS03.logger(e.getLocalizedMessage());\n            e.printStackTrace();\n            throw new IllegalArgumentException();\n         }\n         catch (JMSException e)\n         {\n            MQTestJMS03.logger(e.getLocalizedMessage());\n            e.printStackTrace();\n         }\n      }\n      else\n      {\n         throw new IllegalArgumentException();\n      }\n   }\n\n   /**\n    * Test the connection to the queue manager.\n    * @throws MQException\n    */\n   private void testConn() throws JMSException\n   {\n      QueueConnection conn = null;\n      QueueSession session = null;\n\n      try\n      {\n         conn = cf.createQueueConnection((String) params.get(&quot;-u&quot;), (String) params.get(&quot;-x&quot;));\n         conn.start();\n\n         session = conn.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);\n         MQTestJMS03.logger(&quot;successfully connected.&quot;);\n\n         sendMsg(session);\n      }\n      catch (JMSException e)\n      {\n         MQTestJMS03.logger(&quot;getLinkedException()=&quot; + e.getLinkedException());\n         MQTestJMS03.logger(e.getLocalizedMessage());\n         e.printStackTrace();\n      }\n      finally\n      {\n         try\n         {\n            if (session != null)\n               session.close();\n         }\n         catch (Exception ex)\n         {\n            MQTestJMS03.logger(&quot;session.close() : &quot; + ex.getLocalizedMessage());\n         }\n\n         try\n         {\n            if (conn != null)\n               conn.stop();\n         }\n         catch (Exception ex)\n         {\n            MQTestJMS03.logger(&quot;connection.stop() : &quot; + ex.getLocalizedMessage());\n         }\n\n         try\n         {\n            if (conn != null)\n               conn.close();\n         }\n         catch (Exception ex)\n         {\n            MQTestJMS03.logger(&quot;connection.close() : &quot; + ex.getLocalizedMessage());\n         }\n      }\n   }\n\n   /**\n    * Send a message to a queue.\n    * @throws MQException\n    */\n   private void sendMsg(QueueSession session) throws JMSException\n   {\n      QueueSender sender = null;\n\n      try\n      {\n         destination = session.createQueue(qName);\n\n         ((JmsDestination) destination).setIntProperty(MQConstants.WMQ_MQMD_MESSAGE_CONTEXT,MQConstants.WMQ_MDCTX_SET_IDENTITY_CONTEXT);\n\n         // Enable write of MQMD fields. See documentation for further details.\n         ((JmsDestination) destination).setBooleanProperty(MQConstants.WMQ_MQMD_WRITE_ENABLED, true);\n\n         sender = session.createSender((Queue) destination);\n\n         BytesMessage message = session.createBytesMessage();\n\n         // Request Headers\n         message.setStringProperty(&quot;JMS_IBM_MQMD_UserIdentifier&quot;, &quot;RECFUSER&quot;);\n//         message.setIntProperty(&quot;JMS_IBM_MQMD_CodedCharSetId&quot;,819);\n         message.setJMSReplyTo(replyQ);\n\n         /* Set the format value in the MQRFH2 header to CICS because that is the next embedded message. */\n         message.setStringProperty(&quot;JMS_IBM_Format&quot;, &quot;MQCICS&quot;);\n//         message.setIntProperty(&quot;JMS_IBM_Character_Set&quot;, 819);\n\n         // Construct the CIH header as a byte array\n         ByteArrayOutputStream outBytes = new ByteArrayOutputStream();\n         DataOutputStream outData = new DataOutputStream(outBytes);\n\n         outData.writeBytes(&quot;CIH &quot;);     // MQCHAR strucId\n         outData.writeInt(2);            // MQLONG version\n         outData.writeInt(180);          // MQLONG strucLength\n         outData.writeInt(MQConstants.MQENC_INTEGER_NORMAL); // MQLONG encoding\n\n         // Only set this to 500 if your comm area aka message data is EBCDIC\n         outData.writeInt(500);          // MQLONG CodedCharSetId;\n         outData.writeBytes(MQConstants.MQFMT_STRING); // MQCHAR8 Format;\n         outData.writeInt(4);            // MQLONG Flags;\n         outData.writeInt(0);            // MQLONG ReturnCode;\n         outData.writeInt(0);            // MQLONG CompCode; Completion code\n         outData.writeInt(0);            // MQLONG Reason; MQ reason code\n         outData.writeInt(0x111);        // MQCUOWC_ONLY // MQLONG UOWControl; Unit of work control\n\n         outData.writeInt(-2);       // MQCGWI_DEFAULT // MQLONG GetWaitInterval;\n         outData.writeInt(1);        // MQCLT_PROGRAM // MQLONG LinkType;\n         outData.writeInt(-1);       // MQLONG OutputDataLength;\n         outData.writeInt(0);        // MQLONG FacilityKeepTime;\n         outData.writeInt(0);        // MQLONG ADSDescriptor;\n         outData.writeInt(0);        // MQLONG ConversationalTask;\n         outData.writeInt(0);        // MQLONG TaskEndStatus;\n         outData.write(BLANK8.getBytes()); // MQBYTE Facility[8];\n         outData.writeBytes(BLANK4); // MQCHAR4 Function;\n         outData.writeBytes(BLANK4); // MQCHAR4 `    ;\n         outData.writeBytes(BLANK8); // MQCHAR8 Authenticator;\n         outData.writeBytes(BLANK8); // MQCHAR8 Reserved1;\n         outData.writeBytes(MQConstants.MQFMT_STRING); // MQCHAR8\n         outData.writeBytes(BLANK4); // MQCHAR4 RemoteSysId;\n         outData.writeBytes(BLANK4); // MQCHAR4 RemoteTrans Id;\n         outData.writeBytes(&quot;ABCD&quot;); // MQCHAR4 TransactionId;;\n         outData.writeBytes(BLANK4); // MQCHAR4 FacilityLike;\n         outData.writeBytes(BLANK4); // MQCHAR4 AttentionId;\n         outData.writeBytes(BLANK4); // MQCHAR4 StartCode;\n         outData.writeBytes(BLANK4); // MQCHAR4 CancelCode;\n         outData.writeBytes(BLANK4); // MQCHAR4 NextTransactionId;\n         outData.writeBytes(BLANK8); // MQCHAR8 Reserved2;\n         outData.writeBytes(BLANK8); // MQCHAR8 Reserved3;\n         outData.writeInt(0);        // MQLONG CursorPosition;\n         outData.writeInt(0);        // MQLONG ErrorOffset;\n         outData.writeInt(0);        // MQLONG InputItem;\n         outData.writeInt(0);        // MQLONG Reserved4;\n         // ---- make sure progName is exactly 8 characters\n         StringBuffer pgmName = new StringBuffer(&quot;TESTPGM&quot;);\n         for (int i = pgmName.length(); i &lt; 8; i++)\n             pgmName.append(' ');\n         // ---- write program name followed by commarea\n         outData.writeBytes(pgmName.substring(0, 8));\n         outData.writeBytes(&quot;commArea 012356789&quot;);\n\n         message.writeBytes(outBytes.toByteArray());\n\n         sender.send(message);\n\n         MQTestJMS03.logger(&quot;Message sent.&quot;);\n      }\n      catch (JMSException e)\n      {\n         MQTestJMS03.logger(&quot;getLinkedException()=&quot; + e.getLinkedException());\n         MQTestJMS03.logger(e.getLocalizedMessage());\n         e.printStackTrace();\n      }\n      catch (IOException e)\n      {\n         MQTestJMS03.logger(e.getLocalizedMessage());\n         e.printStackTrace();\n      }\n      finally\n      {\n         try\n         {\n            if (sender != null)\n               sender.close();\n         }\n         catch (Exception ex)\n         {\n            MQTestJMS03.logger(&quot;sender.close() : &quot; + ex.getLocalizedMessage());\n         }\n      }\n   }\n\n   /**\n    * A simple logger method\n    * @param data\n    */\n   public static void logger(String data)\n   {\n      String className = Thread.currentThread().getStackTrace()[2].getClassName();\n\n      // Remove the package info.\n      if ( (className != null) &amp;&amp; (className.lastIndexOf('.') != -1) )\n         className = className.substring(className.lastIndexOf('.')+1);\n\n      System.out.println(LOGGER_TIMESTAMP.format(new Date())+&quot; &quot;+className+&quot;: &quot;+Thread.currentThread().getStackTrace()[2].getMethodName()+&quot;: &quot;+data);\n   }\n\n   /**\n    * main line\n    * @param args\n    */\n   public static void main(String[] args)\n   {\n      try\n      {\n         MQTestJMS03 tj = new MQTestJMS03();\n         tj.init(args);\n         tj.testConn();\n         MQTestJMS03.logger(&quot;finished.&quot;);\n      }\n      catch (IllegalArgumentException e)\n      {\n         MQTestJMS03.logger(&quot;Usage: java MQTestJMS03 -c QueueConnectionFactoryName -q JMS_Queue_Name -f path_to_MQ_JNDI -u UserID -x Password&quot;);\n         System.exit(1);\n      }\n      catch (NamingException ex)\n      {\n         MQTestJMS03.logger(ex.getLocalizedMessage());\n         ex.printStackTrace();\n\n      }\n      catch (JMSException e)\n      {\n         MQTestJMS03.logger(&quot;getLinkedException()=&quot; + e.getLinkedException());\n         MQTestJMS03.logger(e.getLocalizedMessage());\n         e.printStackTrace();\n      }\n      catch (Exception ex)\n      {\n         MQTestJMS03.logger(ex.getLocalizedMessage());\n         ex.printStackTrace();\n      }\n   }\n}\n</code></pre>\n<p>Here is a HEX dump of the message sent from my code showing the 2 embedded structures:</p>\n<p><a href=\"https://i.stack.imgur.com/1R0H5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1R0H5.png\" alt=\"enter image description here\" /></a></p>\n<p>The message's MQMD Format field is shown here:</p>\n<p><a href=\"https://i.stack.imgur.com/05kA1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/05kA1.png\" alt=\"enter image description here\" /></a></p>\n<p>And the MQRFH2 header, JMS properties and the correctly set CICS format is shown here:</p>\n<p><a href=\"https://i.stack.imgur.com/IacPu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IacPu.png\" alt=\"enter image description here\" /></a></p>\n<p>Now, I don't currently have a CICS region to test your actual formatting CICS header and message payload. But if its not correct, just refer to the MQCIH structure in the cmqc.h file.</p>\n<p>Or you could just use the MQCIH class from the MQ Java base classes.</p>\n"}],"owner":{"account_id":29272689,"reputation":27,"user_id":22427101,"display_name":"SRA"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":153,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695287389,"creation_date":1694050014,"question_id":77056065,"body_markdown":"I am encountering an issue when sending the message in this following manner. I am sending the message using CICS via JMS. I receive the error &quot;Unable to put message to reply queue&quot; with an MQRC=2110 error code on the mainframe side, and I also receive a null response. Can you help me resolve this issues.\r\n\r\nVersion : IBM MQ 9.1\r\nI am sending the code like this...\r\n\r\n```\r\nHashtable&lt;String, String&gt; environment = new Hashtable&lt;String, String&gt;();\r\n\r\n\t\t\tenvironment.put(Context.INITIAL_CONTEXT_FACTORY,\r\n\t\t\t\t\t&quot;com.ibm.websphere.naming.WsnInitialContextFactory&quot;);\r\n\r\n\t\t\t// Setup JNDI context\r\n\t\t\tContext context = new InitialContext(environment);\r\n\r\n\t\t\t// Look up connection factory and destination queue\r\n\t\t\tConnectionFactory connectionFactory = (ConnectionFactory) context\r\n\t\t\t\t\t.lookup(&quot;jms/xyz&quot;);\r\n\t\t\t\r\n\t\t\t// creating request Queue\r\n\t\t\tDestination requestQueue = (Destination) context\r\n\t\t\t\t\t.lookup(requestQueueName);\r\n\r\n\t\t\tConnection connection = connectionFactory.createConnection();\r\n\t\t\tSession session = connection.createSession(false,\r\n\t\t\t\t\tSession.AUTO_ACKNOWLEDGE);\r\n\t\t\tlogger.info(&quot;getJMSConnection:: JMS connections  created ...&quot;);\r\n","title":"How to resolve Unable to put message to reply queue. MQRC=2110?","body":"<p>I am encountering an issue when sending the message in this following manner. I am sending the message using CICS via JMS. I receive the error &quot;Unable to put message to reply queue&quot; with an MQRC=2110 error code on the mainframe side, and I also receive a null response. Can you help me resolve this issues.</p>\n<p>Version : IBM MQ 9.1\nI am sending the code like this...</p>\n<pre><code>Hashtable&lt;String, String&gt; environment = new Hashtable&lt;String, String&gt;();\n\n            environment.put(Context.INITIAL_CONTEXT_FACTORY,\n                    &quot;com.ibm.websphere.naming.WsnInitialContextFactory&quot;);\n\n            // Setup JNDI context\n            Context context = new InitialContext(environment);\n\n            // Look up connection factory and destination queue\n            ConnectionFactory connectionFactory = (ConnectionFactory) context\n                    .lookup(&quot;jms/xyz&quot;);\n            \n            // creating request Queue\n            Destination requestQueue = (Destination) context\n                    .lookup(requestQueueName);\n\n            Connection connection = connectionFactory.createConnection();\n            Session session = connection.createSession(false,\n                    Session.AUTO_ACKNOWLEDGE);\n            logger.info(&quot;getJMSConnection:: JMS connections  created ...&quot;);\n</code></pre>\n"},{"tags":["java","apache-camel","messaging","multicast"],"owner":{"account_id":235050,"reputation":75,"user_id":1794333,"accept_rate":100,"display_name":"Sheri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695287090,"creation_date":1695287090,"question_id":77148741,"body_markdown":"I am working on a messaging system using Apache Camel, where I need to send a message to two different endpoints using the `.to(...)` and `.toD(...)` methods. The challenge I&#39;m facing is that I want to prevent the message from being sent to all endpoints if any one of them throws an exception.\r\n\r\nI&#39;ve experimented with using `OnException`, but the issue is that when an exception is caught, the previous messages have already been sent to healthy endpoints that were processed before the one with the exception.\r\n\r\nDo you have any suggestions or techniques to achieve the desired behavior of stopping message propagation to all endpoints if an exception occurs at any point in the process?\r\n\r\nClarification: if `.toD(&quot;endpoint2&quot;)` throws and exception, no message need to sent to the `endpoint1` as well\r\n```java\r\n// Code snippet illustrating the message sending to two different endpoints\r\nfrom(&quot;direct:start&quot;)\r\n    .multicast()\r\n      .to(&quot;endpoint1&quot;)\r\n      .toD(&quot;endpoint2&quot;)\r\n    .end()\r\n...\r\n```\r\n\r\nThank you for your assistance!","title":"How to configure Apache Camel Multicast to avoid sending message to all endpoints if just one endpoint throws exception","body":"<p>I am working on a messaging system using Apache Camel, where I need to send a message to two different endpoints using the <code>.to(...)</code> and <code>.toD(...)</code> methods. The challenge I'm facing is that I want to prevent the message from being sent to all endpoints if any one of them throws an exception.</p>\n<p>I've experimented with using <code>OnException</code>, but the issue is that when an exception is caught, the previous messages have already been sent to healthy endpoints that were processed before the one with the exception.</p>\n<p>Do you have any suggestions or techniques to achieve the desired behavior of stopping message propagation to all endpoints if an exception occurs at any point in the process?</p>\n<p>Clarification: if <code>.toD(&quot;endpoint2&quot;)</code> throws and exception, no message need to sent to the <code>endpoint1</code> as well</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Code snippet illustrating the message sending to two different endpoints\nfrom(&quot;direct:start&quot;)\n    .multicast()\n      .to(&quot;endpoint1&quot;)\n      .toD(&quot;endpoint2&quot;)\n    .end()\n...\n</code></pre>\n<p>Thank you for your assistance!</p>\n"},{"tags":["java","inner-classes","static-initializer"],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695286284,"creation_date":1695285490,"answer_id":77148523,"question_id":77148390,"body_markdown":"`new Foo().new Bar()` is compiled to the following bytecode:\r\n\r\n    NEW Foo$Bar\r\n    DUP\r\n    NEW Foo\r\n    DUP\r\n    INVOKESPECIAL Foo.&lt;init&gt; ()V\r\n    INVOKESPECIAL Foo$Bar.&lt;init&gt; (LFoo;)V\r\n\r\nNote that it is `Bar` that is first created (though `Foo`&#39;s constructor is called first). The `new` instruction is what causes a class to be initialised (see [spec][1]), *not* the constructor call. The  When a class is initialised, its static initialisers run (see [spec][2]).\r\n\r\nJust in case you are not aware, non-static inner classes are implemented by having the constructors take an extra parameter, which serves as the enclosing instance. `new Foo().new Bar()` is basically saying `new Foo.Bar(new Foo())`, but only the former syntax is valid.\r\n\r\nI&#39;m not sure if such an output is behaviour *guaranteed* by the spec. It could technically have been compiled in a way such that `NEW Foo` occurs first, but that would require an additional variable, as if you wrote:\r\n\r\n```\r\nvar f = new Foo();\r\nf.new Bar();\r\n```\r\n\r\nSo when you put `new Foo().new Bar()` in an unrelated class, `Bar` gets initialised first, and so `Bar` is printed first.\r\n\r\nWhen you put `new Foo().new Bar()` in a static method declared in `Foo`, however, `Foo` will be initialised before any of the `new` instructions, hence `Foo` is printed first. This is because calling a static method in `Foo` causes `Foo` to be initialised.\r\n\r\nSee all the conditions for a class or interface `T` to be initialised in the [spec][3]:\r\n\r\n&gt; - T is a class and an instance of T is created.\r\n&gt; \r\n&gt; - A static method declared by T is invoked.\r\n&gt; \r\n&gt; - A static field declared by T is assigned.\r\n&gt; \r\n&gt; - A static field declared by T is used and the field is not a constant variable (&#167;4.12.4).\r\n\r\nNote that the first one refers to the execution of the `new` instruction, not the constructor call.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-6.html#jvms-6.5.new\r\n  [2]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.7\r\n  [3]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-12.html#jls-12.4.1","title":"Between outer and inner classes, their static initializers run order is different when invoking main method inside or outside the outer class","body":"<p><code>new Foo().new Bar()</code> is compiled to the following bytecode:</p>\n<pre><code>NEW Foo$Bar\nDUP\nNEW Foo\nDUP\nINVOKESPECIAL Foo.&lt;init&gt; ()V\nINVOKESPECIAL Foo$Bar.&lt;init&gt; (LFoo;)V\n</code></pre>\n<p>Note that it is <code>Bar</code> that is first created (though <code>Foo</code>'s constructor is called first). The <code>new</code> instruction is what causes a class to be initialised (see <a href=\"https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-6.html#jvms-6.5.new\" rel=\"nofollow noreferrer\">spec</a>), <em>not</em> the constructor call. The  When a class is initialised, its static initialisers run (see <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.7\" rel=\"nofollow noreferrer\">spec</a>).</p>\n<p>Just in case you are not aware, non-static inner classes are implemented by having the constructors take an extra parameter, which serves as the enclosing instance. <code>new Foo().new Bar()</code> is basically saying <code>new Foo.Bar(new Foo())</code>, but only the former syntax is valid.</p>\n<p>I'm not sure if such an output is behaviour <em>guaranteed</em> by the spec. It could technically have been compiled in a way such that <code>NEW Foo</code> occurs first, but that would require an additional variable, as if you wrote:</p>\n<pre><code>var f = new Foo();\nf.new Bar();\n</code></pre>\n<p>So when you put <code>new Foo().new Bar()</code> in an unrelated class, <code>Bar</code> gets initialised first, and so <code>Bar</code> is printed first.</p>\n<p>When you put <code>new Foo().new Bar()</code> in a static method declared in <code>Foo</code>, however, <code>Foo</code> will be initialised before any of the <code>new</code> instructions, hence <code>Foo</code> is printed first. This is because calling a static method in <code>Foo</code> causes <code>Foo</code> to be initialised.</p>\n<p>See all the conditions for a class or interface <code>T</code> to be initialised in the <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-12.html#jls-12.4.1\" rel=\"nofollow noreferrer\">spec</a>:</p>\n<blockquote>\n<ul>\n<li><p>T is a class and an instance of T is created.</p>\n</li>\n<li><p>A static method declared by T is invoked.</p>\n</li>\n<li><p>A static field declared by T is assigned.</p>\n</li>\n<li><p>A static field declared by T is used and the field is not a constant variable (4.12.4).</p>\n</li>\n</ul>\n</blockquote>\n<p>Note that the first one refers to the execution of the <code>new</code> instruction, not the constructor call.</p>\n"}],"owner":{"account_id":5324511,"reputation":89,"user_id":8441793,"display_name":"Sy Pham"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77148523,"answer_count":1,"score":2,"last_activity_date":1695286594,"creation_date":1695284352,"question_id":77148390,"body_markdown":"I have the following code:\r\n\r\n```\r\nclass Foo {\r\n    static { //static initializer block\r\n        System.out.print(&quot;Foo&quot;);\r\n    }\r\n    class Bar {\r\n        static { //static initializer block\r\n            System.out.print(&quot;Bar&quot;);\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) { // =&gt; This will print &quot;FooBar&quot; to the console\r\n        new Foo().new Bar();\r\n    }\r\n}\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) { // This will print &quot;BarFoo&quot; to the console\r\n        new Foo().new Bar();\r\n    }\r\n}\r\n```\r\n\r\nAs the comments say, they will print different result on independent invocation of main methods. Why the placement of main method in this case affect the result printed to the screen?\r\n","title":"Between outer and inner classes, their static initializers run order is different when invoking main method inside or outside the outer class","body":"<p>I have the following code:</p>\n<pre><code>class Foo {\n    static { //static initializer block\n        System.out.print(&quot;Foo&quot;);\n    }\n    class Bar {\n        static { //static initializer block\n            System.out.print(&quot;Bar&quot;);\n        }\n    }\n\n    public static void main(String[] args) { // =&gt; This will print &quot;FooBar&quot; to the console\n        new Foo().new Bar();\n    }\n}\n\npublic class Main {\n\n    public static void main(String[] args) { // This will print &quot;BarFoo&quot; to the console\n        new Foo().new Bar();\n    }\n}\n</code></pre>\n<p>As the comments say, they will print different result on independent invocation of main methods. Why the placement of main method in this case affect the result printed to the screen?</p>\n"},{"tags":["java","intellij-idea","enums"],"comments":[{"owner":{"account_id":11211027,"reputation":531,"user_id":8225099,"display_name":"wartoshika"},"score":0,"creation_date":1654623190,"post_id":72535123,"comment_id":128133074,"body_markdown":"I dont know a way within intellij directly but a small script with classpath reflection would do the trick. Scan for all classes that are enums and get all available values from it.","body":"I dont know a way within intellij directly but a small script with classpath reflection would do the trick. Scan for all classes that are enums and get all available values from it."},{"owner":{"account_id":14879298,"reputation":1234,"user_id":10744483,"display_name":"Olga Klisho"},"score":0,"creation_date":1654671179,"post_id":72535123,"comment_id":128143154,"body_markdown":"Please feel free to create a feature request for the issue: https://youtrack.jetbrains.com/issues/IDEA","body":"Please feel free to create a feature request for the issue: <a href=\"https://youtrack.jetbrains.com/issues/IDEA\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issues/IDEA</a>"}],"answers":[{"tags":[],"owner":{"account_id":19296,"reputation":17862,"user_id":45112,"accept_rate":71,"display_name":"armandino"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695285611,"creation_date":1654623454,"answer_id":72535419,"question_id":72535123,"body_markdown":"Yes, you can do this using the type hierarchy view and export the entries to a file. I&#39;m using eclipse shortcuts and I can open the type hierarchy using `F4`. Just make sure to filter `Production` files.\r\n\r\nExample using the Guava project:\r\n\r\n[![All enums within the project][1]][1]\r\n\r\nAs for getting all the values for each enum, I don&#39;t think there&#39;s such a feature in IntelliJ, but you could probably write a script to process the exported file.\r\n\r\n**Edit**\r\n\r\nThis method will print enum values using the file exported from IntelliJ. You might need to modify it to handle errors, etc.\r\n\r\n```java\r\n    private static void printEnumClassesAndValues(String file) throws IOException {\r\n        Files.lines(Path.of(file))\r\n                .filter(line -&gt; !line.contains(&quot;java.lang&quot;))\r\n                .map(line -&gt; {\r\n                    String[] tokens = line.replaceAll(&quot;[\\\\(\\\\),]&quot;, &quot;&quot;).trim().split(&quot; &quot;);\r\n                    return String.format(&quot;%s.%s&quot;, tokens[1], tokens[0]); // package + class name\r\n                })\r\n                .forEach(enumClass -&gt; System.out.printf(&quot;%s: %s%n&quot;, enumClass, Arrays.toString(getEnumValues(enumClass))));\r\n    }\r\n\r\n    private static Enum&lt;?&gt;[] getEnumValues(String enumClass) {\r\n        try {\r\n            Method m = Class.forName(enumClass).getDeclaredMethod(&quot;values&quot;);\r\n            return (Enum&lt;?&gt;[]) m.invoke(null);\r\n        } catch (Exception ex) {\r\n            throw new RuntimeException(ex); // log or handle otherwise\r\n        }\r\n    }\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/mjenP.png","title":"Is there any way to get all the enums classes and their respective values from a project in IntelliJ?","body":"<p>Yes, you can do this using the type hierarchy view and export the entries to a file. I'm using eclipse shortcuts and I can open the type hierarchy using <code>F4</code>. Just make sure to filter <code>Production</code> files.</p>\n<p>Example using the Guava project:</p>\n<p><a href=\"https://i.stack.imgur.com/mjenP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mjenP.png\" alt=\"All enums within the project\" /></a></p>\n<p>As for getting all the values for each enum, I don't think there's such a feature in IntelliJ, but you could probably write a script to process the exported file.</p>\n<p><strong>Edit</strong></p>\n<p>This method will print enum values using the file exported from IntelliJ. You might need to modify it to handle errors, etc.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static void printEnumClassesAndValues(String file) throws IOException {\n        Files.lines(Path.of(file))\n                .filter(line -&gt; !line.contains(&quot;java.lang&quot;))\n                .map(line -&gt; {\n                    String[] tokens = line.replaceAll(&quot;[\\\\(\\\\),]&quot;, &quot;&quot;).trim().split(&quot; &quot;);\n                    return String.format(&quot;%s.%s&quot;, tokens[1], tokens[0]); // package + class name\n                })\n                .forEach(enumClass -&gt; System.out.printf(&quot;%s: %s%n&quot;, enumClass, Arrays.toString(getEnumValues(enumClass))));\n    }\n\n    private static Enum&lt;?&gt;[] getEnumValues(String enumClass) {\n        try {\n            Method m = Class.forName(enumClass).getDeclaredMethod(&quot;values&quot;);\n            return (Enum&lt;?&gt;[]) m.invoke(null);\n        } catch (Exception ex) {\n            throw new RuntimeException(ex); // log or handle otherwise\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":1967071,"reputation":1336,"user_id":1767021,"accept_rate":76,"display_name":"deldev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":408,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695285611,"creation_date":1654621716,"question_id":72535123,"body_markdown":"I need to create a list of classes declared as enum in a project in IntelliJ and, inside each one, list the respective values. Is there any automated way to accomplish this task, as it is a rather large project, with hundreds of occurrences.","title":"Is there any way to get all the enums classes and their respective values from a project in IntelliJ?","body":"<p>I need to create a list of classes declared as enum in a project in IntelliJ and, inside each one, list the respective values. Is there any automated way to accomplish this task, as it is a rather large project, with hundreds of occurrences.</p>\n"},{"tags":["java","spring","hibernate","jpa","jdbc"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1695127025,"post_id":77134580,"comment_id":135979995,"body_markdown":"Have you tried `List&lt;MyEntityDto&gt; getByUniqueName(@Param(&quot;someNamee&quot;) name)`","body":"Have you tried <code>List&lt;MyEntityDto&gt; getByUniqueName(@Param(&quot;someNamee&quot;) name)</code>"},{"owner":{"account_id":29315873,"reputation":1,"user_id":22460635,"display_name":"Bob Marley"},"score":0,"creation_date":1695127120,"post_id":77134580,"comment_id":135980017,"body_markdown":"@Jens oh sorry not someNamee, it is someName. I edited","body":"@Jens oh sorry not someNamee, it is someName. I edited"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1695129604,"post_id":77134580,"comment_id":135980517,"body_markdown":"No, JPA will not return collections in queries. &#39;m.projects&#39; is treated as a join to projects and so will give you individual projects one by one from the collection. You might be better off returning MyEntity to the DTO and letting it pull out the collection: &quot;SELECT new MyEntityDto(m) FROM MyEntity m WHERE m.name=:someName&quot;","body":"No, JPA will not return collections in queries. &#39;m.projects&#39; is treated as a join to projects and so will give you individual projects one by one from the collection. You might be better off returning MyEntity to the DTO and letting it pull out the collection: &quot;SELECT new MyEntityDto(m) FROM MyEntity m WHERE m.name=:someName&quot;"},{"owner":{"account_id":29315873,"reputation":1,"user_id":22460635,"display_name":"Bob Marley"},"score":0,"creation_date":1695129985,"post_id":77134580,"comment_id":135980623,"body_markdown":"@Chris Okay, I&#39;ll give it a try, thanks for the reply.","body":"@Chris Okay, I&#39;ll give it a try, thanks for the reply."}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695607784,"post_id":77148535,"comment_id":136042446,"body_markdown":"As its currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As its currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/77148535/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":27507552,"reputation":1,"user_id":20990054,"display_name":"Adesh Malunjkar"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695285572,"creation_date":1695285572,"answer_id":77148535,"question_id":77134580,"body_markdown":"@Query(value=&quot;&quot;&quot;\r\nSELECT new com.myprojects.myapp.dto.MyEntityDto (m.projects) FROM MyEntity m WHERE m.name=:someName\r\n&quot;&quot;&quot;) and change return to List&lt;MyEntityDto&gt;.\r\nAnd use the all-args contructor in DTO . Try with this...\r\n\r\n","title":"JPQL Collection field Mapping it is possible?","body":"<p>@Query(value=&quot;&quot;&quot;\nSELECT new com.myprojects.myapp.dto.MyEntityDto (m.projects) FROM MyEntity m WHERE m.name=:someName\n&quot;&quot;&quot;) and change return to List.\nAnd use the all-args contructor in DTO . Try with this...</p>\n"}],"owner":{"account_id":29315873,"reputation":1,"user_id":22460635,"display_name":"Bob Marley"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695285572,"creation_date":1695126630,"question_id":77134580,"body_markdown":"I have a question, is it possible in Jpa to map collections of entity field to Dto?\r\nBelow is an example with List&lt;Projects&gt;\r\n\r\n\r\nEntity:\r\n\r\n    @Entity\r\n    @Table\r\n    public class MyEntity {\r\n       private String name;\r\n       @ManyToMany(...)\r\n       private List&lt;Projects&gt; projects;\r\n\r\n    }\r\n\r\n\r\nDto:\r\n\r\n    public class MyEntityDto {\r\n      private List&lt;Projects&gt; projects;\r\n    }\r\n\r\n\r\nQuery:\r\n\r\n    @Query(value=&quot;&quot;&quot;\r\n    SELECT com.myprojects.myapp.dto.MyEntityDto (m.projects) FROM MyEntity m WHERE m.name=:someName\r\n    &quot;&quot;&quot;)\r\n    MyEntityDto getByUniqueName(@Param(&quot;someName&quot;) name)\r\n\r\n\r\n\r\nIt didn&#39;t work in my project, so I wanted to ask as a question","title":"JPQL Collection field Mapping it is possible?","body":"<p>I have a question, is it possible in Jpa to map collections of entity field to Dto?\nBelow is an example with List</p>\n<p>Entity:</p>\n<pre><code>@Entity\n@Table\npublic class MyEntity {\n   private String name;\n   @ManyToMany(...)\n   private List&lt;Projects&gt; projects;\n\n}\n</code></pre>\n<p>Dto:</p>\n<pre><code>public class MyEntityDto {\n  private List&lt;Projects&gt; projects;\n}\n</code></pre>\n<p>Query:</p>\n<pre><code>@Query(value=&quot;&quot;&quot;\nSELECT com.myprojects.myapp.dto.MyEntityDto (m.projects) FROM MyEntity m WHERE m.name=:someName\n&quot;&quot;&quot;)\nMyEntityDto getByUniqueName(@Param(&quot;someName&quot;) name)\n</code></pre>\n<p>It didn't work in my project, so I wanted to ask as a question</p>\n"},{"tags":["java","intellij-idea","enums"],"comments":[{"owner":{"account_id":14387497,"reputation":1756,"user_id":10393067,"display_name":"logbasex"},"score":0,"creation_date":1586516762,"post_id":42605374,"comment_id":108160653,"body_markdown":"Search tirelessly to find out :(","body":"Search tirelessly to find out :("},{"owner":{"account_id":1497191,"reputation":9670,"user_id":1402846,"accept_rate":90,"display_name":"Pang"},"score":0,"creation_date":1695285722,"post_id":42605374,"comment_id":136004892,"body_markdown":"Turns out this can help: https://stackoverflow.com/a/72535419","body":"Turns out this can help: <a href=\"https://stackoverflow.com/a/72535419\">stackoverflow.com/a/72535419</a>"}],"answers":[{"tags":[],"owner":{"account_id":2748311,"reputation":469,"user_id":2368223,"display_name":"Gan Quan"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1597084120,"creation_date":1597084120,"answer_id":63345982,"question_id":42605374,"body_markdown":"Sometimes plain string search works well. Try search ` enum ` using &quot;Find in Path&quot; (`CTRL+SHIFT+F` or `CMD+SHIFT+F`). Notice the space before and after `enum`, you can adjust the search keyword depending on your code style.","title":"How to search for an Enum file type in IntelliJ","body":"<p>Sometimes plain string search works well. Try search <code>enum</code> using &quot;Find in Path&quot; (<code>CTRL+SHIFT+F</code> or <code>CMD+SHIFT+F</code>). Notice the space before and after <code>enum</code>, you can adjust the search keyword depending on your code style.</p>\n"}],"owner":{"account_id":5683576,"reputation":563,"user_id":4493848,"display_name":"Oxobo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3516,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1695285364,"creation_date":1488696399,"question_id":42605374,"body_markdown":"I&#39;m using IntelliJ 16. I know I can find *classes* by `Ctrl+N` and *files* with `Ctrl+Shift+N`, and I&#39;m also aware of [Structural Search][1], but I want to search with enum&#39;s name (not listing all enums or all files).\r\n\r\n Is there a way to **search for an Enum** file in IntelliJ (with shortcut keys)?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/26526238/how-to-search-navigate-for-to-a-java-file-type-in-intellij-13","title":"How to search for an Enum file type in IntelliJ","body":"<p>I'm using IntelliJ 16. I know I can find <em>classes</em> by <code>Ctrl+N</code> and <em>files</em> with <code>Ctrl+Shift+N</code>, and I'm also aware of <a href=\"https://stackoverflow.com/questions/26526238/how-to-search-navigate-for-to-a-java-file-type-in-intellij-13\">Structural Search</a>, but I want to search with enum's name (not listing all enums or all files).</p>\n<p>Is there a way to <strong>search for an Enum</strong> file in IntelliJ (with shortcut keys)?</p>\n"},{"tags":["java","junit4","spring-boot-test","sprint","serenity"],"answers":[{"tags":[],"owner":{"account_id":7784343,"reputation":25,"user_id":6693884,"display_name":"Satam Guin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695285112,"creation_date":1695285112,"answer_id":77148475,"question_id":76866300,"body_markdown":"I have somehow able to make it parallel. You have to add the below line in the pom.xml, \r\n\r\n    &lt;argLine&gt;-Xmx1600m&lt;/argLine&gt;\r\n\r\n\r\nThis actually help to assign the Java Heap Memory for per thread to operate so that more fork can be spawned in the the same JVM and parallel test cases can be excecuted \r\n","title":"Running Parallel With SpringIntegrationSerenityRunner is not working with maven-surefire","body":"<p>I have somehow able to make it parallel. You have to add the below line in the pom.xml,</p>\n<pre><code>&lt;argLine&gt;-Xmx1600m&lt;/argLine&gt;\n</code></pre>\n<p>This actually help to assign the Java Heap Memory for per thread to operate so that more fork can be spawned in the the same JVM and parallel test cases can be excecuted</p>\n"}],"owner":{"account_id":7784343,"reputation":25,"user_id":6693884,"display_name":"Satam Guin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77148475,"answer_count":1,"score":0,"last_activity_date":1695285112,"creation_date":1691572914,"question_id":76866300,"body_markdown":"I am trying to run the 6 test classes having 6-12 test cases in each test class with the below configuration. But somehow the parallelism is not being achieved so far. Using fork count I am able to do that but more than 1 fork means that multiple processes will be running and every test depends on 1 setUp method(actually this set up method taking much time and want to run only once and then use the returned value thereafter for the next set of test cases) which will be running once and we will use that data to perform. Please help as I don&#39;t want to create the new process and instead I want to run by multiple threads only to achieve parallelism.\r\n\r\n     `     &lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;includes&gt;\r\n\t\t\t\t\t\t&lt;include&gt;**/stories/**/*.java&lt;/include&gt;\r\n\t\t\t\t\t&lt;/includes&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;**/stories/Base*.java&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t\t&lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\r\n\t\t\t\t\t&lt;parallel&gt;all&lt;/parallel&gt;\r\n\t\t\t\t\t&lt;threadCountClasses&gt;2&lt;/threadCountClasses&gt;\r\n\t\t\t\t\t&lt;threadCountMethods&gt;6&lt;/threadCountMethods&gt;\r\n\t\t\t\t\t&lt;threadCount&gt;10&lt;/threadCount&gt;\r\n\t\t\t\t\t&lt;!--&lt;forkCount&gt;3&lt;/forkCount&gt;--&gt;\r\n\t\t\t\t\t&lt;!--&lt;useUnlimitedThreads&gt;true&lt;/useUnlimitedThreads&gt;--&gt;\r\n\t\t\t\t\t&lt;perCoreThreadCount&gt;false&lt;/perCoreThreadCount&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;`","title":"Running Parallel With SpringIntegrationSerenityRunner is not working with maven-surefire","body":"<p>I am trying to run the 6 test classes having 6-12 test cases in each test class with the below configuration. But somehow the parallelism is not being achieved so far. Using fork count I am able to do that but more than 1 fork means that multiple processes will be running and every test depends on 1 setUp method(actually this set up method taking much time and want to run only once and then use the returned value thereafter for the next set of test cases) which will be running once and we will use that data to perform. Please help as I don't want to create the new process and instead I want to run by multiple threads only to achieve parallelism.</p>\n<pre><code> `     &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;includes&gt;\n                    &lt;include&gt;**/stories/**/*.java&lt;/include&gt;\n                &lt;/includes&gt;\n                &lt;excludes&gt;\n                    &lt;exclude&gt;**/stories/Base*.java&lt;/exclude&gt;\n                &lt;/excludes&gt;\n                &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\n                &lt;parallel&gt;all&lt;/parallel&gt;\n                &lt;threadCountClasses&gt;2&lt;/threadCountClasses&gt;\n                &lt;threadCountMethods&gt;6&lt;/threadCountMethods&gt;\n                &lt;threadCount&gt;10&lt;/threadCount&gt;\n                &lt;!--&lt;forkCount&gt;3&lt;/forkCount&gt;--&gt;\n                &lt;!--&lt;useUnlimitedThreads&gt;true&lt;/useUnlimitedThreads&gt;--&gt;\n                &lt;perCoreThreadCount&gt;false&lt;/perCoreThreadCount&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;`\n</code></pre>\n"},{"tags":["python","java","pip","pyinstaller","pyenv"],"owner":{"account_id":29498563,"reputation":1,"user_id":22606064,"display_name":"tch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695285010,"creation_date":1695285010,"question_id":77148465,"body_markdown":"I am using python 3.11.5 and pytinstaller to convert my python scripts to exe but i have this error Traceback (most recent call last):\r\n  File &quot;&lt;frozen runpy&gt;&quot;, line 198, in _run_module_as_main\r\n  File &quot;&lt;frozen runpy&gt;&quot;, line 88, in _run_code\r\n  File &quot;C:\\Users\\pc\\AppData\\Local\\Programs\\Python\\Python311\\Scripts\\pyinstaller.exe\\__main__.py&quot;, line 4, in &lt;module&gt;\r\n  File &quot;C:\\Users\\pc\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\PyInstaller\\__init__.py&quot;, line 45, in &lt;module&gt;\r\n    import pkg_resources\r\nModuleNotFoundError: No module named &#39;pkg_resources&#39;   how i can solve it?\r\n\r\nTraceback (most recent call last):\r\n  File &quot;&lt;frozen runpy&gt;&quot;, line 198, in _run_module_as_main\r\n  File &quot;&lt;frozen runpy&gt;&quot;, line 88, in _run_code\r\n  File &quot;C:\\Users\\pc\\AppData\\Local\\Programs\\Python\\Python311\\Scripts\\pyinstaller.exe\\__main__.py&quot;, line 4, in &lt;module&gt;\r\n  File &quot;C:\\Users\\pc\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\PyInstaller\\__init__.py&quot;, line 45, in &lt;module&gt;\r\n    import pkg_resources\r\nModuleNotFoundError: No module named &#39;pkg_resources&#39;","title":"ModuleNotFoundError: No module named &#39;pkg_resources&#39;","body":"<p>I am using python 3.11.5 and pytinstaller to convert my python scripts to exe but i have this error Traceback (most recent call last):\nFile &quot;&quot;, line 198, in <em>run_module_as_main\nFile &quot;&quot;, line 88, in <em>run_code\nFile &quot;C:\\Users\\pc\\AppData\\Local\\Programs\\Python\\Python311\\Scripts\\pyinstaller.exe_<em>main</em></em>.py&quot;, line 4, in \nFile &quot;C:\\Users\\pc\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\PyInstaller_<em>init</em></em>.py&quot;, line 45, in \nimport pkg_resources\nModuleNotFoundError: No module named 'pkg_resources'   how i can solve it?</p>\n<p>Traceback (most recent call last):\nFile &quot;&quot;, line 198, in <em>run_module_as_main\nFile &quot;&quot;, line 88, in <em>run_code\nFile &quot;C:\\Users\\pc\\AppData\\Local\\Programs\\Python\\Python311\\Scripts\\pyinstaller.exe_<em>main</em></em>.py&quot;, line 4, in \nFile &quot;C:\\Users\\pc\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\PyInstaller_<em>init</em></em>.py&quot;, line 45, in \nimport pkg_resources\nModuleNotFoundError: No module named 'pkg_resources'</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":6078,"reputation":61197,"user_id":10077,"accept_rate":90,"display_name":"Fred Larson"},"score":0,"creation_date":1477680309,"post_id":40311069,"comment_id":67879837,"body_markdown":"Do you have &quot;Show Console When Standard Out Changes&quot; enabled? It&#39;s on the console toolbar.","body":"Do you have &quot;Show Console When Standard Out Changes&quot; enabled? It&#39;s on the console toolbar."},{"owner":{"account_id":5962920,"reputation":117,"user_id":4687529,"accept_rate":75,"display_name":"Eric Marchetti Santos"},"score":0,"creation_date":1477680945,"post_id":40311069,"comment_id":67880187,"body_markdown":"Tried with it both turned on and off","body":"Tried with it both turned on and off"},{"owner":{"account_id":6078,"reputation":61197,"user_id":10077,"accept_rate":90,"display_name":"Fred Larson"},"score":0,"creation_date":1477681035,"post_id":40311069,"comment_id":67880228,"body_markdown":"Did you also try &quot;Pin Console&quot;?","body":"Did you also try &quot;Pin Console&quot;?"}],"answers":[{"tags":[],"owner":{"account_id":14231490,"reputation":359,"user_id":10280599,"display_name":"Osama"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695027174,"creation_date":1695027174,"answer_id":77125733,"question_id":40311069,"body_markdown":"I know this question is old, but since I&#39;ve found the [answer](https://stackoverflow.com/questions/7261151/in-eclipse-can-i-have-multiple-console-views-at-once-each-showing-a-different#comment13161278_7261264) (link to comment), I&#39;d like to leave it here:\r\n\r\nIf you want a console to remain fixed for a project/app, simply **press the button &quot;Pin Console&quot; in the console view**:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WIdIb.png","title":"Eclipse keeps changing all of my console view&#39;s display to the last run project","body":"<p>I know this question is old, but since I've found the <a href=\"https://stackoverflow.com/questions/7261151/in-eclipse-can-i-have-multiple-console-views-at-once-each-showing-a-different#comment13161278_7261264\">answer</a> (link to comment), I'd like to leave it here:</p>\n<p>If you want a console to remain fixed for a project/app, simply <strong>press the button &quot;Pin Console&quot; in the console view</strong>:</p>\n<p><a href=\"https://i.stack.imgur.com/WIdIb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WIdIb.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":5962920,"reputation":117,"user_id":4687529,"accept_rate":75,"display_name":"Eric Marchetti Santos"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77125733,"answer_count":1,"score":1,"last_activity_date":1695284986,"creation_date":1477679016,"question_id":40311069,"body_markdown":"I am building two applications that communicates via sockets, and I have one console view for each. However, when I run a class, every console view changes to the project I am running. I just want them to remain fixed. How do I do that?","title":"Eclipse keeps changing all of my console view&#39;s display to the last run project","body":"<p>I am building two applications that communicates via sockets, and I have one console view for each. However, when I run a class, every console view changes to the project I am running. I just want them to remain fixed. How do I do that?</p>\n"},{"tags":["java","spring","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":8319552,"reputation":407,"user_id":10063655,"display_name":"vc73"},"score":0,"creation_date":1556108353,"post_id":55829684,"comment_id":98324422,"body_markdown":"I didn&#39;t understand the question, do you want to join the tables into a JPA query(and you already have the entities), or do you want to know how to map them into an entity?","body":"I didn&#39;t understand the question, do you want to join the tables into a JPA query(and you already have the entities), or do you want to know how to map them into an entity?"},{"owner":{"account_id":10884793,"reputation":61,"user_id":8002643,"display_name":"mehran qorbani"},"score":0,"creation_date":1556108571,"post_id":55829684,"comment_id":98324548,"body_markdown":"@vc73 not i don&#39;t want to join them i want the result of &#39; UNION&#39; query of these tables","body":"@vc73 not i don&#39;t want to join them i want the result of &#39; UNION&#39; query of these tables"},{"owner":{"account_id":1434762,"reputation":22772,"user_id":1356423,"accept_rate":65,"display_name":"Alan Hay"},"score":1,"creation_date":1556117334,"post_id":55829684,"comment_id":98330427,"body_markdown":"They are 2 completely different things. Why would you want to do that?","body":"They are 2 completely different things. Why would you want to do that?"},{"owner":{"account_id":10884793,"reputation":61,"user_id":8002643,"display_name":"mehran qorbani"},"score":0,"creation_date":1556119103,"post_id":55829684,"comment_id":98331477,"body_markdown":"@AlanHay think of it like result is gonna be used as list of users or group of users that can be choosed to receive email or sth like that","body":"@AlanHay think of it like result is gonna be used as list of users or group of users that can be choosed to receive email or sth like that"},{"owner":{"account_id":7527241,"reputation":652,"user_id":9416473,"display_name":"Akhil Surapuram"},"score":0,"creation_date":1584526210,"post_id":55829684,"comment_id":107460744,"body_markdown":"Make it as Native Query. It will work","body":"Make it as Native Query. It will work"}],"answers":[{"comments":[{"owner":{"account_id":10884793,"reputation":61,"user_id":8002643,"display_name":"mehran qorbani"},"score":0,"creation_date":1556120657,"post_id":55830177,"comment_id":98332390,"body_markdown":"actually tables don&#39;t need to have commens in union . I updated the question and added the query I want.","body":"actually tables don&#39;t need to have commens in union . I updated the question and added the query I want."}],"tags":[],"owner":{"account_id":336191,"reputation":1069,"user_id":1458562,"display_name":"Patrice Blanchardie"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1556262064,"creation_date":1556109252,"answer_id":55830177,"question_id":55829684,"body_markdown":"If you want union, I guess the structure of these 2 entities are similar.\r\n\r\nYou could create a super entity and make User and UserGroup extend this new entity. Add `@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)` on the new entity if you want to keep 2 separate tables.\r\n\r\nThen, create a Spring Data JPA Repository for the parent entity.\r\n\r\n    /**\r\n     * new abstract Superclass\r\n     */\r\n    @Entity\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    public abstract class User {\r\n\r\n        @Id\r\n        private String id;\r\n\r\n        //...\r\n    }\r\n    \r\n    /**\r\n     * Existing User entity\r\n     */\r\n    @Entity\r\n    @Table(name=&quot;my_users&quot;)\r\n    public class LoginUser extends User {\r\n    \r\n        private String password;\r\n    \r\n        @ManyToOne\r\n        private Group group;\r\n    \r\n        //...\r\n    }\r\n    \r\n    /**\r\n     * Existing Group entity\r\n     */\r\n    @Entity\r\n    @Table(name=&quot;my_groups&quot;)\r\n    public class Group extends User {\r\n    \r\n        private String name;\r\n    \r\n        @OneToMany(mappedBy=&quot;group&quot;)\r\n        private Set&lt;LoginUser&gt; users;\r\n\r\n        //...\r\n    }\r\n\r\n    /**\r\n     * Super repository, providing UNION\r\n     */\r\n    public interface UserRepository extends JpaRepository&lt;User, String&gt; {}\r\n\r\nCalling `UserRepository.findAll` will make JPA do the `UNION` of the 2 tables, and can return a `List&lt;User&gt;`. You&#39;ll have both `LoginUser` and `Group` instances in this list:\r\n\r\n    // UNION query returning both LoginUser and Group instances\r\n    List&lt;User&gt; myUnion = userRepository.findAll();\r\n\r\nSee https://en.wikibooks.org/wiki/Java_Persistence/Inheritance for more details about JPA inheritance.\r\n\r\nJPA/Hibernate don&#39;t support custom UNION queries, but inheritance provides out-of-the-box UNION between entities of the same hierarchy when using `TABLE_PER_CLASS` strategy.\r\n\r\nYou cant generate the query you want with JPA. It&#39;s not possible to UNION the different fields. But if you map email and title to the same field (which is a nonsense) and write the following JPQL, JPA will generate your query.\r\n\r\n     SELECT u.yourField FROM User u;","title":"Union tables with spring data jpa","body":"<p>If you want union, I guess the structure of these 2 entities are similar.</p>\n\n<p>You could create a super entity and make User and UserGroup extend this new entity. Add <code>@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)</code> on the new entity if you want to keep 2 separate tables.</p>\n\n<p>Then, create a Spring Data JPA Repository for the parent entity.</p>\n\n<pre><code>/**\n * new abstract Superclass\n */\n@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\npublic abstract class User {\n\n    @Id\n    private String id;\n\n    //...\n}\n\n/**\n * Existing User entity\n */\n@Entity\n@Table(name=\"my_users\")\npublic class LoginUser extends User {\n\n    private String password;\n\n    @ManyToOne\n    private Group group;\n\n    //...\n}\n\n/**\n * Existing Group entity\n */\n@Entity\n@Table(name=\"my_groups\")\npublic class Group extends User {\n\n    private String name;\n\n    @OneToMany(mappedBy=\"group\")\n    private Set&lt;LoginUser&gt; users;\n\n    //...\n}\n\n/**\n * Super repository, providing UNION\n */\npublic interface UserRepository extends JpaRepository&lt;User, String&gt; {}\n</code></pre>\n\n<p>Calling <code>UserRepository.findAll</code> will make JPA do the <code>UNION</code> of the 2 tables, and can return a <code>List&lt;User&gt;</code>. You'll have both <code>LoginUser</code> and <code>Group</code> instances in this list:</p>\n\n<pre><code>// UNION query returning both LoginUser and Group instances\nList&lt;User&gt; myUnion = userRepository.findAll();\n</code></pre>\n\n<p>See <a href=\"https://en.wikibooks.org/wiki/Java_Persistence/Inheritance\" rel=\"noreferrer\">https://en.wikibooks.org/wiki/Java_Persistence/Inheritance</a> for more details about JPA inheritance.</p>\n\n<p>JPA/Hibernate don't support custom UNION queries, but inheritance provides out-of-the-box UNION between entities of the same hierarchy when using <code>TABLE_PER_CLASS</code> strategy.</p>\n\n<p>You cant generate the query you want with JPA. It's not possible to UNION the different fields. But if you map email and title to the same field (which is a nonsense) and write the following JPQL, JPA will generate your query.</p>\n\n<pre><code> SELECT u.yourField FROM User u;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10147386,"reputation":475,"user_id":7495124,"display_name":"JavaGeek"},"score":6,"creation_date":1562699252,"post_id":55920061,"comment_id":100456298,"body_markdown":"Could you elaborate on this? How did you accomplish this? What does the view look like?","body":"Could you elaborate on this? How did you accomplish this? What does the view look like?"}],"tags":[],"owner":{"account_id":10884793,"reputation":61,"user_id":8002643,"display_name":"mehran qorbani"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1562741020,"creation_date":1556624155,"answer_id":55920061,"question_id":55829684,"body_markdown":"So I solved my problem with creating a view in database itself and then map that to my java entity because it seems that hibernate doesn&#39;t support &#39;union&#39; query\r\n","title":"Union tables with spring data jpa","body":"<p>So I solved my problem with creating a view in database itself and then map that to my java entity because it seems that hibernate doesn't support 'union' query</p>\n"},{"tags":[],"owner":{"account_id":7990830,"reputation":187,"user_id":6028739,"display_name":"KHanusova"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641560334,"creation_date":1641560334,"answer_id":70621635,"question_id":55829684,"body_markdown":"You can use nativeQuery:\r\n\r\n    @Query(&quot;select u.email from user u union select g.title from group&quot;, nativeQuery = true)\r\n    public String findResult();\r\n\r\nSpring documentation: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.at-query.native","title":"Union tables with spring data jpa","body":"<p>You can use nativeQuery:</p>\n<pre><code>@Query(&quot;select u.email from user u union select g.title from group&quot;, nativeQuery = true)\npublic String findResult();\n</code></pre>\n<p>Spring documentation: <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.at-query.native\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.at-query.native</a></p>\n"}],"owner":{"account_id":10884793,"reputation":61,"user_id":8002643,"display_name":"mehran qorbani"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16043,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":55920061,"answer_count":3,"score":3,"last_activity_date":1695284753,"creation_date":1556107606,"question_id":55829684,"body_markdown":"I have 2 tables one is `Users` and the other is `UserGroup` Having `ManyToMany` relationship , how can I union them into a single List with spring-data-JPA .\r\n\r\n**  don&#39;t want to use native Queries\r\n\r\n**UPDATE**:\r\n\r\n  The exact query that I need:\r\n\r\nSELECT email FROM user\r\n\r\nUNION\r\n\r\nSELECT title FROM group","title":"Union tables with spring data jpa","body":"<p>I have 2 tables one is <code>Users</code> and the other is <code>UserGroup</code> Having <code>ManyToMany</code> relationship , how can I union them into a single List with spring-data-JPA .</p>\n<p>**  don't want to use native Queries</p>\n<p><strong>UPDATE</strong>:</p>\n<p>The exact query that I need:</p>\n<p>SELECT email FROM user</p>\n<p>UNION</p>\n<p>SELECT title FROM group</p>\n"},{"tags":["java","git","jgit"],"comments":[{"owner":{"account_id":195691,"reputation":28439,"user_id":438742,"accept_rate":73,"display_name":"kan"},"score":0,"creation_date":1506095520,"post_id":46368062,"comment_id":79696817,"body_markdown":"https://stackoverflow.com/questions/10993634/how-do-i-do-git-show-sha1file-using-jgit","body":"<a href=\"https://stackoverflow.com/questions/10993634/how-do-i-do-git-show-sha1file-using-jgit\" title=\"how do i do git show sha1file using jgit\">stackoverflow.com/questions/10993634/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":549364,"reputation":20582,"user_id":2986905,"accept_rate":78,"display_name":"R&#252;diger Herrmann"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695284614,"creation_date":1506135343,"answer_id":46375568,"question_id":46368062,"body_markdown":"While there is no direct equivalent to `git show` in JGit, it provides API to implement what the command does yourself.\r\n\r\nIf all you have is the ref to a branch, then you first need to resolve the tree id of its head commit. Luckily, `Repository::resolve` accepts an expression that will return the necessary tree id:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    ObjectId treeId = repository.resolve(&quot;refs/heads/master^{tree}&quot;);\r\n\r\nGiven the tree id, you can use a `TreeWalk` to obtain the blob id that holds the contents of the desired file.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    TreeWalk treeWalk = TreeWalk.forPath(git.getRepository(), &quot;README.md&quot;, treeId);\r\n    ObjectId blobId = treeWalk.getObjectId(0);\r\n\r\nThe `forPath` factory method creates a `TreeWalk` and positions it at the path that was given in the second argument.\r\n\r\nWith the blob id in turn, you can finally load the contents from Git&#39;s object database.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    ObjectReader objectReader = repository.newObjectReader();\r\n    ObjectLoader objectLoader = objectReader.open(blobId);\r\n    byte[] bytes = objectLoader.getBytes();\r\n    objectReader.close();\r\n\r\nThe complete source code can be found here: https://gist.github.com/rherrmann/0c682ea327862cb6847704acf90b1d5d\r\n\r\nFor more details about the inner workings of the Git object database, you may want to read [Explore Git Internals with the JGit API](http://www.codeaffine.com/2014/10/20/git-internals).","title":"Git show file in target branch in JGit?","body":"<p>While there is no direct equivalent to <code>git show</code> in JGit, it provides API to implement what the command does yourself.</p>\n<p>If all you have is the ref to a branch, then you first need to resolve the tree id of its head commit. Luckily, <code>Repository::resolve</code> accepts an expression that will return the necessary tree id:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ObjectId treeId = repository.resolve(&quot;refs/heads/master^{tree}&quot;);\n</code></pre>\n<p>Given the tree id, you can use a <code>TreeWalk</code> to obtain the blob id that holds the contents of the desired file.</p>\n<pre class=\"lang-java prettyprint-override\"><code>TreeWalk treeWalk = TreeWalk.forPath(git.getRepository(), &quot;README.md&quot;, treeId);\nObjectId blobId = treeWalk.getObjectId(0);\n</code></pre>\n<p>The <code>forPath</code> factory method creates a <code>TreeWalk</code> and positions it at the path that was given in the second argument.</p>\n<p>With the blob id in turn, you can finally load the contents from Git's object database.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ObjectReader objectReader = repository.newObjectReader();\nObjectLoader objectLoader = objectReader.open(blobId);\nbyte[] bytes = objectLoader.getBytes();\nobjectReader.close();\n</code></pre>\n<p>The complete source code can be found here: <a href=\"https://gist.github.com/rherrmann/0c682ea327862cb6847704acf90b1d5d\" rel=\"nofollow noreferrer\">https://gist.github.com/rherrmann/0c682ea327862cb6847704acf90b1d5d</a></p>\n<p>For more details about the inner workings of the Git object database, you may want to read <a href=\"http://www.codeaffine.com/2014/10/20/git-internals\" rel=\"nofollow noreferrer\">Explore Git Internals with the JGit API</a>.</p>\n"}],"owner":{"account_id":5516910,"reputation":5424,"user_id":4381330,"accept_rate":92,"display_name":"Mincong Huang"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":808,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":46375568,"answer_count":1,"score":1,"last_activity_date":1695284614,"creation_date":1506093515,"question_id":46368062,"body_markdown":"I want to show to file content of a target branch in JGit without checking out that branch. For example, showing the content of `README.md` of `master` branch while the current branch is `iss1`. The equivalent Git command should be:\r\n\r\n    myProj (iss1) $ git show master:README.md\r\n    Hello world!\r\n\r\nHow can I do it using JGit?","title":"Git show file in target branch in JGit?","body":"<p>I want to show to file content of a target branch in JGit without checking out that branch. For example, showing the content of <code>README.md</code> of <code>master</code> branch while the current branch is <code>iss1</code>. The equivalent Git command should be:</p>\n\n<pre><code>myProj (iss1) $ git show master:README.md\nHello world!\n</code></pre>\n\n<p>How can I do it using JGit?</p>\n"},{"tags":["java","maven","dependencies","mule","mule-component"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1695296451,"post_id":77148328,"comment_id":136007123,"body_markdown":"This is not a duplicated because the issue is specifically related to Mule 4 classloaders. It should be reopened so a proper answer can be provided.","body":"This is not a duplicated because the issue is specifically related to Mule 4 classloaders. It should be reopened so a proper answer can be provided."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1695296599,"post_id":77148328,"comment_id":136007152,"body_markdown":"Please **do not** post images of code, data, error messages, etc. For more details read the Meta FAQ entry [Why not upload images of code/errors when asking a question?](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557). Mule applications, flows and configurations should be copied as XML into the question. Images and screenshots of flows don&#39;t provide any useful details for troubleshooting.","body":"Please <b>do not</b> post images of code, data, error messages, etc. For more details read the Meta FAQ entry <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557\">Why not upload images of code/errors when asking a question?</a>. Mule applications, flows and configurations should be copied as XML into the question. Images and screenshots of flows don&#39;t provide any useful details for troubleshooting."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1695297012,"post_id":77148328,"comment_id":136007241,"body_markdown":"Since the question is currently closed I&#39;ll give you the short answer: this will not work. You should not try to use the internals of another module or library in your own module. Internals are not even exported.","body":"Since the question is currently closed I&#39;ll give you the short answer: this will not work. You should not try to use the internals of another module or library in your own module. Internals are not even exported."}],"owner":{"account_id":29491695,"reputation":1,"user_id":22600598,"display_name":"Julian"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695286155,"answer_count":0,"score":0,"last_activity_date":1695283940,"creation_date":1695283821,"question_id":77148328,"body_markdown":"I built a Mule 4 module/connector with the Mule Java SDK using mule-module-batch-ee (4.5.0-20220622) internally.\r\n\r\nTo build the &#39;batch-manager-connector&#39; project, I used the Maven archetype org.mule.extensions:mule-extensions-archetype-maven-plugin:1.2.0. I can build the &#39;batch-manager-connector&#39; and include it in my &#39;test_mule_project&#39; application (Anypoint Studio 7.15.0). But when I run it, it fails and I get a &#39;java.lang.NoClassDefFoundError: com/mulesoft/mule/runtime/module/batch/internal/DefaultBatchManager\r\n\r\n&#39; because the library cannot be found.\r\n\r\nTo make the library available at runtime, what must I do?\r\n\r\nAny help would be appreciated &#128512;\r\n\r\n[I was able to add more images to my post on the official Mulesoft forum.](https://help.mulesoft.com/s/question/0D56R00008lpDCsSAM/mule-java-sdk-moduleconnector-javalangnoclassdeffounderror-javalangnoclassdeffounderror-commulesoftmuleruntimemodulebatchinternaldefaultbatchmanager)\r\n\r\n\r\n**Error:**\r\n\r\n```\r\n********************************************************************************\r\nMessage               : java.lang.NoClassDefFoundError: com/mulesoft/mule/runtime/module/batch/internal/DefaultBatchManager\r\nElement               : batchProcessCSVAccounts/processors/3 @ test_mule_project:test_mule_project.xml:39 (Get all batch jobs)\r\nElement DSL           : &lt;batchmanager:get-all-batch-jobs doc:name=&quot;Get all batch jobs&quot; doc:id=&quot;c14b575f-d739-4b4a-aef6-69c5985c8a50&quot;&gt;&lt;/batchmanager:get-all-batch-jobs&gt;\r\nError type            : MULE:FATAL_JVM_ERROR\r\nFlowStack             : at batchProcessCSVAccounts(batchProcessCSVAccounts/processors/3 @ test_mule_project:test_mule_project.xml:39 (Get all batch jobs))\r\nPayload Type          : com.mulesoft.mule.runtime.module.batch.internal.ImmutableBatchJobInstance\r\n--------------------------------------------------------------------------------\r\nRoot Exception stack trace:\r\njava.lang.ClassNotFoundException: com.mulesoft.mule.runtime.module.batch.internal.DefaultBatchManager\r\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:387)\r\n        at org.mule.runtime.module.artifact.api.classloader.FineGrainedControlClassLoader.findLocalClass(FineGrainedControlClassLoader.java:178)\r\n        at org.mule.runtime.module.artifact.api.classloader.FineGrainedControlClassLoader.loadClass(FineGrainedControlClassLoader.java:90)\r\n        at org.mule.runtime.module.artifact.api.classloader.MuleArtifactClassLoader.loadClass(MuleArtifactClassLoader.java:263)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n        at org.mule.extension.batchmanager.internal.BatchManagerOperations.getAllBatchJobs(BatchManagerOperations.java:31)\r\n        at org.mule.extension.batchmanager.internal.BatchManagerOperations$getAllBatchJobs$MethodComponentExecutor_test_mule_project.execute(Unknown Source)\r\n        at org.mule.runtime.module.extension.internal.runtime.execution.GeneratedMethodComponentExecutor.execute(GeneratedMethodComponentExecutor.java:94)\r\n        at org.mule.runtime.module.extension.internal.runtime.execution.CompletableMethodOperationExecutor.doExecute(CompletableMethodOperationExecutor.java:26)\r\n        at org.mule.runtime.module.extension.internal.runtime.execution.AbstractCompletableMethodOperationExecutor.execute(AbstractCompletableMethodOperationExecutor.java:61)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.executeCommand(DefaultExecutionMediator.java:237)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.executeWithInterceptors(DefaultExecutionMediator.java:221)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.lambda$execute$1(DefaultExecutionMediator.java:130)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.lambda$new$0(DefaultExecutionMediator.java:73)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.withExecutionTemplate(DefaultExecutionMediator.java:316)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.execute(DefaultExecutionMediator.java:129)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.ComponentMessageProcessor.executeOperation(ComponentMessageProcessor.java:581)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.ComponentMessageProcessor.prepareAndExecuteOperation(ComponentMessageProcessor.java:820)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.ComponentMessageProcessor.lambda$onEventSynchronous$16(ComponentMessageProcessor.java:483)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.ComponentMessageProcessor.onEventSynchronous(ComponentMessageProcessor.java:490)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.ComponentMessageProcessor.lambda$null$6(ComponentMessageProcessor.java:399)\r\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onNext(FluxPeekFuseable.java:482)\r\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:287)\r\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onNext(FluxPeekFuseable.java:496)\r\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:527)\r\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:522)\r\n        at reactor.core.publisher.FluxHide$SuppressFuseableSubscriber.onNext(FluxHide.java:127)\r\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:204)\r\n        at reactor.core.publisher.FluxOnAssembly$OnAssemblySubscriber.onNext(FluxOnAssembly.java:351)\r\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:204)\r\n        at reactor.core.publisher.FluxContextStart$ContextStartSubscriber.onNext(FluxContextStart.java:103)\r\n        at reactor.core.publisher.FluxContextStart$ContextStartSubscriber.onNext(FluxContextStart.java:103)\r\n        at reactor.core.publisher.FluxMap$MapConditionalSubscriber.onNext(FluxMap.java:213)\r\n        at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onNext(MonoFlatMapMany.java:242)\r\n        at reactor.core.publisher.FluxFlatMap$FlatMapMain.tryEmit(FluxFlatMap.java:537)\r\n        at reactor.core.publisher.FluxFlatMap$FlatMapInner.onNext(FluxFlatMap.java:999)\r\n        at reactor.core.publisher.FluxContextStart$ContextStartSubscriber.onNext(FluxContextStart.java:103)\r\n        at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:76)\r\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:204)\r\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:527)\r\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:522)\r\n        at reactor.core.publisher.FluxHide$SuppressFuseableSubscriber.onNext(FluxHide.java:127)\r\n        at reactor.core.publisher.FluxHandleFuseable$HandleFuseableSubscriber.onNext(FluxHandleFuseable.java:180)\r\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:527)\r\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:522)\r\n        at reactor.core.publisher.FluxHide$SuppressFuseableSubscriber.onNext(FluxHide.java:127)\r\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:204)\r\n        at reactor.core.publisher.FluxOnAssembly$OnAssemblySubscriber.onNext(FluxOnAssembly.java:351)\r\n        at reactor.core.publisher.FluxSubscribeOnValue$ScheduledScalar.run(FluxSubscribeOnValue.java:178)\r\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:50)\r\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:27)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at org.mule.service.scheduler.internal.AbstractRunnableFutureDecorator.doRun(AbstractRunnableFutureDecorator.java:151)\r\n        at org.mule.service.scheduler.internal.RunnableFutureDecorator.run(RunnableFutureDecorator.java:54)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n        at java.lang.Thread.run(Thread.java:750)\r\n \r\n********************************************************************************\r\n```\r\n\r\n**Java: 1.8.0_381 &amp; Maven: 3.9.4**\r\n\r\n**[Flow &#39;test_mule_project&#39;](https://i.stack.imgur.com/eLcGj.png)**\r\n\r\n**Batch Manager - BatchManagerOperations Class (line 29+):**\r\n\r\n```\r\npackage org.mule.extension.batchmanager.internal;\r\n \r\nimport static org.mule.runtime.extension.api.annotation.param.MediaType.ANY;\r\n \r\nimport org.mule.runtime.extension.api.annotation.param.MediaType;\r\nimport org.mule.runtime.extension.api.annotation.param.Config;\r\nimport org.mule.runtime.extension.api.annotation.param.Connection;\r\n \r\nimport com.mulesoft.mule.runtime.module.batch.internal.DefaultBatchManager;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n \r\n \r\n/**\r\n * This class is a container for operations, every public method in this class will be taken as an extension operation.\r\n */\r\npublic class BatchManagerOperations {\r\n        \r\n  private static final Logger LOGGER = LoggerFactory.getLogger(BatchManagerOperations.class);\r\n  /**\r\n   * Example of an operation that uses the configuration and a connection instance to perform some action.\r\n   */\r\n  @MediaType(value = ANY, strict = false)\r\n  public String retrieveInfo(@Config BatchManagerConfiguration configuration, @Connection BatchManagerConnection connection){\r\n    return &quot;Using Configuration [&quot; + configuration.getConfigId() + &quot;] with Connection id [&quot; + connection.getId() + &quot;]&quot;;\r\n  }\r\n \r\n \r\n  @MediaType(value = ANY, strict = false)\r\n  public String getAllBatchJobs() {\r\n        DefaultBatchManager bm = new DefaultBatchManager();\r\n        String jobs = bm.getBatchJobs().toString();\r\n        LOGGER.info(jobs);\r\n    return jobs;\r\n  }\r\n  \r\n}\r\n```\r\n\r\nBatch Manager - pom.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n&lt;project\r\n\txmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;groupId&gt;com.BatchManager.muleConnector&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;mulesoft-batchmanager-connector&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.0.4&lt;/version&gt;\r\n\t&lt;packaging&gt;mule-extension&lt;/packaging&gt;\r\n\t&lt;name&gt;BatchManager Extension&lt;/name&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.mule.extensions&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;mule-modules-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.1.3&lt;/version&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.7.5&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.7.5&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/com.mulesoft.mule.runtime.modules/mule-module-batch-ee --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mulesoft.mule.runtime.modules&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mule-module-batch-ee&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.5.0-20220622&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.mule.runtime/mule-api --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.mule.runtime&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mule-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.5.0-20220622&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n**Batch Manager - Java Build Path**:\r\nclasspath variable:\r\n\r\n&gt; M2_REPO/com/mulesoft/mule/runtime/modules/mule-module-batch-ee/4.5.0-20220622/mule-module-batch-ee-4.5.0-20220622.jar -\r\n&gt; C:\\\\Users{username}.m2\\\\repository\\\\com\\\\mulesoft\\\\mule\\\\runtime\\\\modules\\\\mule-module-batch-ee\\\\4.5.0-20220622\\\\mule-module-batch-ee-4.5.0-20220622","title":"Mule Java SDK Module/Connector - java.lang.NoClassDefFoundError: java.lang.NoClassDefFoundError","body":"<p>I built a Mule 4 module/connector with the Mule Java SDK using mule-module-batch-ee (4.5.0-20220622) internally.</p>\n<p>To build the 'batch-manager-connector' project, I used the Maven archetype org.mule.extensions:mule-extensions-archetype-maven-plugin:1.2.0. I can build the 'batch-manager-connector' and include it in my 'test_mule_project' application (Anypoint Studio 7.15.0). But when I run it, it fails and I get a 'java.lang.NoClassDefFoundError: com/mulesoft/mule/runtime/module/batch/internal/DefaultBatchManager</p>\n<p>' because the library cannot be found.</p>\n<p>To make the library available at runtime, what must I do?</p>\n<p>Any help would be appreciated </p>\n<p><a href=\"https://help.mulesoft.com/s/question/0D56R00008lpDCsSAM/mule-java-sdk-moduleconnector-javalangnoclassdeffounderror-javalangnoclassdeffounderror-commulesoftmuleruntimemodulebatchinternaldefaultbatchmanager\" rel=\"nofollow noreferrer\">I was able to add more images to my post on the official Mulesoft forum.</a></p>\n<p><strong>Error:</strong></p>\n<pre><code>********************************************************************************\nMessage               : java.lang.NoClassDefFoundError: com/mulesoft/mule/runtime/module/batch/internal/DefaultBatchManager\nElement               : batchProcessCSVAccounts/processors/3 @ test_mule_project:test_mule_project.xml:39 (Get all batch jobs)\nElement DSL           : &lt;batchmanager:get-all-batch-jobs doc:name=&quot;Get all batch jobs&quot; doc:id=&quot;c14b575f-d739-4b4a-aef6-69c5985c8a50&quot;&gt;&lt;/batchmanager:get-all-batch-jobs&gt;\nError type            : MULE:FATAL_JVM_ERROR\nFlowStack             : at batchProcessCSVAccounts(batchProcessCSVAccounts/processors/3 @ test_mule_project:test_mule_project.xml:39 (Get all batch jobs))\nPayload Type          : com.mulesoft.mule.runtime.module.batch.internal.ImmutableBatchJobInstance\n--------------------------------------------------------------------------------\nRoot Exception stack trace:\njava.lang.ClassNotFoundException: com.mulesoft.mule.runtime.module.batch.internal.DefaultBatchManager\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:387)\n        at org.mule.runtime.module.artifact.api.classloader.FineGrainedControlClassLoader.findLocalClass(FineGrainedControlClassLoader.java:178)\n        at org.mule.runtime.module.artifact.api.classloader.FineGrainedControlClassLoader.loadClass(FineGrainedControlClassLoader.java:90)\n        at org.mule.runtime.module.artifact.api.classloader.MuleArtifactClassLoader.loadClass(MuleArtifactClassLoader.java:263)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n        at org.mule.extension.batchmanager.internal.BatchManagerOperations.getAllBatchJobs(BatchManagerOperations.java:31)\n        at org.mule.extension.batchmanager.internal.BatchManagerOperations$getAllBatchJobs$MethodComponentExecutor_test_mule_project.execute(Unknown Source)\n        at org.mule.runtime.module.extension.internal.runtime.execution.GeneratedMethodComponentExecutor.execute(GeneratedMethodComponentExecutor.java:94)\n        at org.mule.runtime.module.extension.internal.runtime.execution.CompletableMethodOperationExecutor.doExecute(CompletableMethodOperationExecutor.java:26)\n        at org.mule.runtime.module.extension.internal.runtime.execution.AbstractCompletableMethodOperationExecutor.execute(AbstractCompletableMethodOperationExecutor.java:61)\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.executeCommand(DefaultExecutionMediator.java:237)\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.executeWithInterceptors(DefaultExecutionMediator.java:221)\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.lambda$execute$1(DefaultExecutionMediator.java:130)\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.lambda$new$0(DefaultExecutionMediator.java:73)\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.withExecutionTemplate(DefaultExecutionMediator.java:316)\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.execute(DefaultExecutionMediator.java:129)\n        at org.mule.runtime.module.extension.internal.runtime.operation.ComponentMessageProcessor.executeOperation(ComponentMessageProcessor.java:581)\n        at org.mule.runtime.module.extension.internal.runtime.operation.ComponentMessageProcessor.prepareAndExecuteOperation(ComponentMessageProcessor.java:820)\n        at org.mule.runtime.module.extension.internal.runtime.operation.ComponentMessageProcessor.lambda$onEventSynchronous$16(ComponentMessageProcessor.java:483)\n        at org.mule.runtime.module.extension.internal.runtime.operation.ComponentMessageProcessor.onEventSynchronous(ComponentMessageProcessor.java:490)\n        at org.mule.runtime.module.extension.internal.runtime.operation.ComponentMessageProcessor.lambda$null$6(ComponentMessageProcessor.java:399)\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onNext(FluxPeekFuseable.java:482)\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:287)\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onNext(FluxPeekFuseable.java:496)\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:527)\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:522)\n        at reactor.core.publisher.FluxHide$SuppressFuseableSubscriber.onNext(FluxHide.java:127)\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:204)\n        at reactor.core.publisher.FluxOnAssembly$OnAssemblySubscriber.onNext(FluxOnAssembly.java:351)\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:204)\n        at reactor.core.publisher.FluxContextStart$ContextStartSubscriber.onNext(FluxContextStart.java:103)\n        at reactor.core.publisher.FluxContextStart$ContextStartSubscriber.onNext(FluxContextStart.java:103)\n        at reactor.core.publisher.FluxMap$MapConditionalSubscriber.onNext(FluxMap.java:213)\n        at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onNext(MonoFlatMapMany.java:242)\n        at reactor.core.publisher.FluxFlatMap$FlatMapMain.tryEmit(FluxFlatMap.java:537)\n        at reactor.core.publisher.FluxFlatMap$FlatMapInner.onNext(FluxFlatMap.java:999)\n        at reactor.core.publisher.FluxContextStart$ContextStartSubscriber.onNext(FluxContextStart.java:103)\n        at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:76)\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:204)\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:527)\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:522)\n        at reactor.core.publisher.FluxHide$SuppressFuseableSubscriber.onNext(FluxHide.java:127)\n        at reactor.core.publisher.FluxHandleFuseable$HandleFuseableSubscriber.onNext(FluxHandleFuseable.java:180)\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:527)\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:522)\n        at reactor.core.publisher.FluxHide$SuppressFuseableSubscriber.onNext(FluxHide.java:127)\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:204)\n        at reactor.core.publisher.FluxOnAssembly$OnAssemblySubscriber.onNext(FluxOnAssembly.java:351)\n        at reactor.core.publisher.FluxSubscribeOnValue$ScheduledScalar.run(FluxSubscribeOnValue.java:178)\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:50)\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:27)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at org.mule.service.scheduler.internal.AbstractRunnableFutureDecorator.doRun(AbstractRunnableFutureDecorator.java:151)\n        at org.mule.service.scheduler.internal.RunnableFutureDecorator.run(RunnableFutureDecorator.java:54)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n        at java.lang.Thread.run(Thread.java:750)\n \n********************************************************************************\n</code></pre>\n<p><strong>Java: 1.8.0_381 &amp; Maven: 3.9.4</strong></p>\n<p><strong><a href=\"https://i.stack.imgur.com/eLcGj.png\" rel=\"nofollow noreferrer\">Flow 'test_mule_project'</a></strong></p>\n<p><strong>Batch Manager - BatchManagerOperations Class (line 29+):</strong></p>\n<pre><code>package org.mule.extension.batchmanager.internal;\n \nimport static org.mule.runtime.extension.api.annotation.param.MediaType.ANY;\n \nimport org.mule.runtime.extension.api.annotation.param.MediaType;\nimport org.mule.runtime.extension.api.annotation.param.Config;\nimport org.mule.runtime.extension.api.annotation.param.Connection;\n \nimport com.mulesoft.mule.runtime.module.batch.internal.DefaultBatchManager;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n \n \n/**\n * This class is a container for operations, every public method in this class will be taken as an extension operation.\n */\npublic class BatchManagerOperations {\n        \n  private static final Logger LOGGER = LoggerFactory.getLogger(BatchManagerOperations.class);\n  /**\n   * Example of an operation that uses the configuration and a connection instance to perform some action.\n   */\n  @MediaType(value = ANY, strict = false)\n  public String retrieveInfo(@Config BatchManagerConfiguration configuration, @Connection BatchManagerConnection connection){\n    return &quot;Using Configuration [&quot; + configuration.getConfigId() + &quot;] with Connection id [&quot; + connection.getId() + &quot;]&quot;;\n  }\n \n \n  @MediaType(value = ANY, strict = false)\n  public String getAllBatchJobs() {\n        DefaultBatchManager bm = new DefaultBatchManager();\n        String jobs = bm.getBatchJobs().toString();\n        LOGGER.info(jobs);\n    return jobs;\n  }\n  \n}\n</code></pre>\n<p>Batch Manager - pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\n&lt;project\n    xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.BatchManager.muleConnector&lt;/groupId&gt;\n    &lt;artifactId&gt;mulesoft-batchmanager-connector&lt;/artifactId&gt;\n    &lt;version&gt;1.0.4&lt;/version&gt;\n    &lt;packaging&gt;mule-extension&lt;/packaging&gt;\n    &lt;name&gt;BatchManager Extension&lt;/name&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.mule.extensions&lt;/groupId&gt;\n        &lt;artifactId&gt;mule-modules-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.1.3&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;1.7.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n            &lt;version&gt;1.7.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.mulesoft.mule.runtime.modules/mule-module-batch-ee --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mulesoft.mule.runtime.modules&lt;/groupId&gt;\n            &lt;artifactId&gt;mule-module-batch-ee&lt;/artifactId&gt;\n            &lt;version&gt;4.5.0-20220622&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.mule.runtime/mule-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mule.runtime&lt;/groupId&gt;\n            &lt;artifactId&gt;mule-api&lt;/artifactId&gt;\n            &lt;version&gt;1.5.0-20220622&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p><strong>Batch Manager - Java Build Path</strong>:\nclasspath variable:</p>\n<blockquote>\n<p>M2_REPO/com/mulesoft/mule/runtime/modules/mule-module-batch-ee/4.5.0-20220622/mule-module-batch-ee-4.5.0-20220622.jar -\nC:\\Users{username}.m2\\repository\\com\\mulesoft\\mule\\runtime\\modules\\mule-module-batch-ee\\4.5.0-20220622\\mule-module-batch-ee-4.5.0-20220622</p>\n</blockquote>\n"},{"tags":["java","java-stream","java-time","duration","localdate"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":3,"creation_date":1695194499,"post_id":77140056,"comment_id":135989823,"body_markdown":"You showed a list of people as your expected result, but you are collecting to a `Map`? Which one do you want exactly?","body":"You showed a list of people as your expected result, but you are collecting to a <code>Map</code>? Which one do you want exactly?"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1695195414,"post_id":77140056,"comment_id":135989989,"body_markdown":"Do you want the sum of all durations for each member for each date? And why are you instantiating a `Person` with `new Item()`?","body":"Do you want the sum of all durations for each member for each date? And why are you instantiating a <code>Person</code> with <code>new Item()</code>?"},{"owner":{"account_id":28943042,"reputation":3,"user_id":22169225,"display_name":"Mc_Android"},"score":0,"creation_date":1695196373,"post_id":77140056,"comment_id":135990201,"body_markdown":"As a result I want a list of persons. It is my understanding that I need a map for that. if a have all the results in map, I can create a list again. However if its possible without a map, that would be better.","body":"As a result I want a list of persons. It is my understanding that I need a map for that. if a have all the results in map, I can create a list again. However if its possible without a map, that would be better."},{"owner":{"account_id":28943042,"reputation":3,"user_id":22169225,"display_name":"Mc_Android"},"score":0,"creation_date":1695196545,"post_id":77140056,"comment_id":135990242,"body_markdown":"As for the  provided example with &quot;new item&quot;: this is just  to demonstrate the &quot;layout&quot; of each person-list-object.","body":"As for the  provided example with &quot;new item&quot;: this is just  to demonstrate the &quot;layout&quot; of each person-list-object."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695218839,"post_id":77140056,"comment_id":135995282,"body_markdown":"The first argument to the `toMap` collector is for the *key*, so its not the right place for trying to sum values. The second function determines the value, but only the single value  of a single element, so it isnt the right place either. For aggregating multiple values, a *third* argument has to be specified. The function specified as third argument will receive two values and allows you to insert your summation.","body":"The first argument to the <code>toMap</code> collector is for the <i>key</i>, so its not the right place for trying to sum values. The second function determines the value, but only the single value  of a single element, so it isnt the right place either. For aggregating multiple values, a <i>third</i> argument has to be specified. The function specified as third argument will receive two values and allows you to insert your summation."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1695226739,"post_id":77140056,"comment_id":135997224,"body_markdown":"By the way Standard format for duration text is [defined in ISO 8601](https://en.wikipedia.org/wiki/ISO_8601#Durations): `PnYnMnDTnHnMnS`. Ex: `PT8H` vs `08:00`.","body":"By the way Standard format for duration text is <a href=\"https://en.wikipedia.org/wiki/ISO_8601#Durations\" rel=\"nofollow noreferrer\">defined in ISO 8601</a>: <code>PnYnMnDTnHnMnS</code>. Ex: <code>PT8H</code> vs <code>08:00</code>."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695244028,"post_id":77140056,"comment_id":136000287,"body_markdown":"Your result is *not* a list a persons. You have duplicates, with &quot;member1&quot; and &quot;member2&quot; both listed multiple times. What you really have is a flattened hierarchy of date -&gt; person.","body":"Your result is <i>not</i> a list a persons. You have duplicates, with &quot;member1&quot; and &quot;member2&quot; both listed multiple times. What you really have is a flattened hierarchy of date -&gt; person."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695244421,"post_id":77140056,"comment_id":136000336,"body_markdown":"Why padding zero on your `time1` inputs but not `time2`?","body":"Why padding zero on your <code>time1</code> inputs but not <code>time2</code>?"}],"answers":[{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695218512,"post_id":77141225,"comment_id":135995210,"body_markdown":"When you use `toMap` instead of `groupingBy`+`reducing`, you dont need those `.filter(Optional::isPresent) .map(Optional::get)` steps.","body":"When you use <code>toMap</code> instead of <code>groupingBy</code>+<code>reducing</code>, you dont need those <code>.filter(Optional::isPresent) .map(Optional::get)</code> steps."},{"owner":{"account_id":28943042,"reputation":3,"user_id":22169225,"display_name":"Mc_Android"},"score":0,"creation_date":1695221055,"post_id":77141225,"comment_id":135995875,"body_markdown":"Thanks for your advice. It looks like I have to spend more time to understand the possibilities of java stream.api","body":"Thanks for your advice. It looks like I have to spend more time to understand the possibilities of java stream.api"},{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":0,"creation_date":1695222838,"post_id":77141225,"comment_id":135996332,"body_markdown":"@Holger The filter/map step is ugly, but is a result of using the simple form of `reducing(BinaryOperator)`. This IMO makes the grouping/reducing step a bit less complex, at the expense of an uglier sort/toList step. If I used `reducing(T identity, BinaryOperator&lt;T&gt; op)` the filter/map would no longer be needed, at the expense of more complicated code in the grouping/reducing operation. I am not sure how `toMap` would help, but I would be interested in an example.","body":"@Holger The filter/map step is ugly, but is a result of using the simple form of <code>reducing(BinaryOperator)</code>. This IMO makes the grouping/reducing step a bit less complex, at the expense of an uglier sort/toList step. If I used <code>reducing(T identity, BinaryOperator&lt;T&gt; op)</code> the filter/map would no longer be needed, at the expense of more complicated code in the grouping/reducing operation. I am not sure how <code>toMap</code> would help, but I would be interested in an example."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695225078,"post_id":77141225,"comment_id":135996875,"body_markdown":"Instead of `Collectors.groupingBy(Person::getType, Collectors.reducing((p1, p2) -&gt; ))` you simply use `Collectors.toMap(Person::getType, Function.identity(), (p1, p2) -&gt; )` The merge function is identical to your reduction function. Then, the result would be `Map&lt;String, Person&gt;` instead of `Map&lt;String, Optional&lt;Person&gt;&gt;`. See also [Replacing groupingBy and reducing by toMap](https://stackoverflow.com/q/57041896/2711488)","body":"Instead of <code>Collectors.groupingBy(Person::getType, Collectors.reducing((p1, p2) -&gt; ))</code> you simply use <code>Collectors.toMap(Person::getType, Function.identity(), (p1, p2) -&gt; )</code> The merge function is identical to your reduction function. Then, the result would be <code>Map&lt;String, Person&gt;</code> instead of <code>Map&lt;String, Optional&lt;Person&gt;&gt;</code>. See also <a href=\"https://stackoverflow.com/q/57041896/2711488\">Replacing groupingBy and reducing by toMap</a>"},{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":0,"creation_date":1695225743,"post_id":77141225,"comment_id":135997013,"body_markdown":"Hey @Holger yeah, great idea, thanks! I thought you meant replacing the *first* `groupingBy` - that confused me; replacing the *second*, as you made clear in your comment, makes perfect sense. I will add it to the answer!","body":"Hey @Holger yeah, great idea, thanks! I thought you meant replacing the <i>first</i> <code>groupingBy</code> - that confused me; replacing the <i>second</i>, as you made clear in your comment, makes perfect sense. I will add it to the answer!"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1695226236,"post_id":77141225,"comment_id":135997112,"body_markdown":"Indeed, the first `groupingBy` can not be replaced that way, but it could be fused into the second, when using a compound key, e.g. `record Key(LocalDate date, String type) {}`  `Map&lt;Key, Person&gt; map =  .collect(Collectors.toMap(p -&gt; new Key(p.getStartDate(), p.getType()), Function.identity(), (p1, p2) -&gt; ));` Then, no flattening is needed: `List&lt;Person&gt; result = new ArrayList&lt;&gt;(map.values()); result.sort(byDateThenType);` There are pros and cons to this approach","body":"Indeed, the first <code>groupingBy</code> can not be replaced that way, but it could be fused into the second, when using a compound key, e.g. <code>record Key(LocalDate date, String type) {}</code>  <code>Map&lt;Key, Person&gt; map =  .collect(Collectors.toMap(p -&gt; new Key(p.getStartDate(), p.getType()), Function.identity(), (p1, p2) -&gt; ));</code> Then, no flattening is needed: <code>List&lt;Person&gt; result = new ArrayList&lt;&gt;(map.values()); result.sort(byDateThenType);</code> There are pros and cons to this approach"},{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":0,"creation_date":1695226439,"post_id":77141225,"comment_id":135997157,"body_markdown":"Yes again: I thought of using a compound key, but preferred to keep things simple (even naive if you want) instead of the extra effort of a complex key. But, exactly as you say, there are pros and cons and a matter of taste if I may add!","body":"Yes again: I thought of using a compound key, but preferred to keep things simple (even naive if you want) instead of the extra effort of a complex key. But, exactly as you say, there are pros and cons and a matter of taste if I may add!"},{"owner":{"account_id":28943042,"reputation":3,"user_id":22169225,"display_name":"Mc_Android"},"score":0,"creation_date":1695231289,"post_id":77141225,"comment_id":135998106,"body_markdown":"@NikosParaskevopoulos: really appreciate your work! Thank you very much! I was wondering if its possible to add a second grouping by criteria to the function (in this case the string value)?\nI am asking, because I have a list with some kind of time stamps which I want to query in different ways.","body":"@NikosParaskevopoulos: really appreciate your work! Thank you very much! I was wondering if its possible to add a second grouping by criteria to the function (in this case the string value)? I am asking, because I have a list with some kind of time stamps which I want to query in different ways."},{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":0,"creation_date":1695234441,"post_id":77141225,"comment_id":135998715,"body_markdown":"Not sure I understand, can you edit the question giving an example?","body":"Not sure I understand, can you edit the question giving an example?"},{"owner":{"account_id":28943042,"reputation":3,"user_id":22169225,"display_name":"Mc_Android"},"score":0,"creation_date":1695282188,"post_id":77141225,"comment_id":136004178,"body_markdown":"Your solution aggregates all values of a specific person - in this case &quot;member1&quot; for each LocalDate. It does not aggregate values for &quot;member2&quot; for each localDate.\nExample of my desired output:\n//Day 1\n(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;58:00&quot;,&quot;4:45&quot;), //-&gt; output of your solution\n(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;11:00&quot;,&quot;2:00&quot;), //-&gt; not included\n//Day 2\n(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;18:00&quot;,&quot;2:45&quot;),\n(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;12:00&quot;,&quot;3:00&quot;);\n//\nSo I was wondering if it is possible to add a grouping by person-getType in such a way that the output considers both person-Types?","body":"Your solution aggregates all values of a specific person - in this case &quot;member1&quot; for each LocalDate. It does not aggregate values for &quot;member2&quot; for each localDate. Example of my desired output: //Day 1 (&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;58:00&quot;,&quot;4:45&quot;), //-&gt; output of your solution (&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;11:00&quot;,&quot;2:00&quot;), //-&gt; not included //Day 2 (&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;18:00&quot;,&quot;2:45&quot;), (&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;12:00&quot;,&quot;3:00&quot;); // So I was wondering if it is possible to add a grouping by person-getType in such a way that the output considers both person-Types?"},{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":0,"creation_date":1695283444,"post_id":77141225,"comment_id":136004444,"body_markdown":"When I run it, I get the same outcome as the one from the question, i.e. *(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;11:00&quot;,&quot;2:00&quot;)*. I included the `Person` class I used in the answer.","body":"When I run it, I get the same outcome as the one from the question, i.e. <i>(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;11:00&quot;,&quot;2:00&quot;)</i>. I included the <code>Person</code> class I used in the answer."}],"tags":[],"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"comment_count":11,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695283365,"creation_date":1695203229,"answer_id":77141225,"question_id":77140056,"body_markdown":"One way to do it is with a cascade of groupings and a reduction to sum the durations. The following results in a 2-level map that contains the sum per date and type:\r\n\r\n```java\r\nMap&lt;LocalDate, Map&lt;String, Optional&lt;Person&gt;&gt;&gt; perDateAndTypeAggregated = \r\n\tpersonList.stream().collect(Collectors.groupingBy(\r\n\t\tPerson::getStartDate,\r\n\t\tCollectors.groupingBy(\r\n\t\t\t\tPerson::getType,\r\n\t\t\t\tCollectors.reducing((p1, p2) -&gt;\r\n\t\t\t\t\t// this is where we sum the durations\r\n\t\t\t\t\tnew Person(p1.getStartDate(), p1.getType(), p1.getTime1().plus(p2.getTime1()), p1.getTime2().plus(p2.getTime2()))\r\n\t\t\t\t)\r\n\t\t)\r\n\t));\r\n```\r\n\r\nIf you want a list (the map gives richer information, but it&#39;s your application), you can flatten and sort the previous map as follows:\r\n\r\n```java\r\nComparator&lt;Person&gt; byDateThenType =\r\n\tComparator.comparing(Person::getStartDate).thenComparing(Person::getType);\r\n\r\nList&lt;Person&gt; result =\r\n\tperDateAndTypeAggregated.values().stream()\r\n\t\t.flatMap(m -&gt; m.values().stream())\r\n\t\t.filter(Optional::isPresent)\r\n\t\t.map(Optional::get)\r\n\t\t.sorted(byDateThenType)\r\n\t\t.toList();\r\n```\r\n\r\n---\r\n\r\n**EDIT:** As per the comments from Holger, the above can be simplified using `toMap` instead of the `groupingBy`/`reducing` combination, with the added advantage of simplifying the second operation (`toList`) by removing the `.filter().map()` combo:\r\n\r\n```java\r\nMap&lt;LocalDate, Map&lt;String, Person&gt;&gt; perDateAndTypeAggregated2 = \r\n\tpersonList.stream().collect(Collectors.groupingBy(\r\n\t\tPerson::getStartDate,\r\n\t\tCollectors.toMap(\r\n\t\t\t\tPerson::getType,\r\n\t\t\t\tFunction.identity(),\r\n\t\t\t\t(p1, p2) -&gt;\r\n\t\t\t\t\t// this is where we sum the durations\r\n\t\t\t\t\tnew Person(p1.getStartDate(), p1.getType(), p1.getTime1().plus(p2.getTime1()), p1.getTime2().plus(p2.getTime2()))\r\n\t\t)\r\n\t));\r\n\r\nList&lt;Person&gt; result2 =\r\n\tperDateAndTypeAggregated2.values().stream()\r\n\t\t.flatMap(m -&gt; m.values().stream())\r\n\t\t.sorted(byDateThenType)\r\n\t\t.toList();\r\n```\r\n\r\n---\r\n\r\n**EDIT 2:** I used the following `Person` class:\r\n\r\n```java\r\npublic static class Person {\r\n\tprivate LocalDate startDate;\r\n\tprivate String type;\r\n\tprivate Duration time1;\r\n\tprivate Duration time2;\r\n\r\n\tpublic Person() {}\r\n\r\n\tpublic Person(String startDate, String type, String time1, String time2) {\r\n\t\tthis.startDate = LocalDate.parse(startDate);\r\n\t\tthis.type = type;\r\n\t\tthis.time1 = Duration.parse(time1);\r\n\t\tthis.time2 = Duration.parse(time2);\r\n\t}\r\n\r\n\tpublic Person(LocalDate startDate, String type, Duration time1, Duration time2) {\r\n\t\tthis.startDate = startDate;\r\n\t\tthis.type = type;\r\n\t\tthis.time1 = time1;\r\n\t\tthis.time2 = time2;\r\n\t}\r\n\r\n\t// getters and setters...\r\n\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;Person(&quot; + startDate + &quot;,&quot; + type + &quot;,&quot; + time1 + &quot;,&quot; + time2 + &quot;)&quot;;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean equals(Object o) {\r\n\t\tif (this == o) return true;\r\n\t\tif (o == null || getClass() != o.getClass()) return false;\r\n\t\tPerson person = (Person) o;\r\n\t\treturn Objects.equals(startDate, person.startDate) &amp;&amp; Objects.equals(type, person.type) &amp;&amp; Objects.equals(time1, person.time1) &amp;&amp; Objects.equals(time2, person.time2);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic int hashCode() {\r\n\t\treturn Objects.hash(startDate, type, time1, time2);\r\n\t}\r\n}\r\n```\r\n\r\nAnd initialize the list as:\r\n\r\n```java\r\nList&lt;Person&gt; personList = Arrays.asList(\r\n\t\tnew Person(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;PT8H00M&quot;,&quot;PT4H00M&quot;),\r\n\t\tnew Person(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;PT50H00M&quot;,&quot;PT0H45M&quot;),\r\n\t\tnew Person(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;PT10H00M&quot;,&quot;PT0H40M&quot;),\r\n\t\tnew Person(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;PT1H00M&quot;,&quot;PT1H20M&quot;),\r\n\t\tnew Person(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;PT8H00M&quot;,&quot;PT2H00M&quot;),\r\n\t\tnew Person(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;PT10H00M&quot;,&quot;PT0H45M&quot;),\r\n\t\tnew Person(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;PT10H00M&quot;,&quot;PT1H40M&quot;),\r\n\t\tnew Person(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;PT2H00M&quot;,&quot;PT1H20M&quot;)\r\n);\r\n```\r\n\r\nAll this code is giving me the desired outcome from the question.","title":"How to group and reduce a list of objects with duration","body":"<p>One way to do it is with a cascade of groupings and a reduction to sum the durations. The following results in a 2-level map that contains the sum per date and type:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;LocalDate, Map&lt;String, Optional&lt;Person&gt;&gt;&gt; perDateAndTypeAggregated = \n    personList.stream().collect(Collectors.groupingBy(\n        Person::getStartDate,\n        Collectors.groupingBy(\n                Person::getType,\n                Collectors.reducing((p1, p2) -&gt;\n                    // this is where we sum the durations\n                    new Person(p1.getStartDate(), p1.getType(), p1.getTime1().plus(p2.getTime1()), p1.getTime2().plus(p2.getTime2()))\n                )\n        )\n    ));\n</code></pre>\n<p>If you want a list (the map gives richer information, but it's your application), you can flatten and sort the previous map as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Comparator&lt;Person&gt; byDateThenType =\n    Comparator.comparing(Person::getStartDate).thenComparing(Person::getType);\n\nList&lt;Person&gt; result =\n    perDateAndTypeAggregated.values().stream()\n        .flatMap(m -&gt; m.values().stream())\n        .filter(Optional::isPresent)\n        .map(Optional::get)\n        .sorted(byDateThenType)\n        .toList();\n</code></pre>\n<hr />\n<p><strong>EDIT:</strong> As per the comments from Holger, the above can be simplified using <code>toMap</code> instead of the <code>groupingBy</code>/<code>reducing</code> combination, with the added advantage of simplifying the second operation (<code>toList</code>) by removing the <code>.filter().map()</code> combo:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;LocalDate, Map&lt;String, Person&gt;&gt; perDateAndTypeAggregated2 = \n    personList.stream().collect(Collectors.groupingBy(\n        Person::getStartDate,\n        Collectors.toMap(\n                Person::getType,\n                Function.identity(),\n                (p1, p2) -&gt;\n                    // this is where we sum the durations\n                    new Person(p1.getStartDate(), p1.getType(), p1.getTime1().plus(p2.getTime1()), p1.getTime2().plus(p2.getTime2()))\n        )\n    ));\n\nList&lt;Person&gt; result2 =\n    perDateAndTypeAggregated2.values().stream()\n        .flatMap(m -&gt; m.values().stream())\n        .sorted(byDateThenType)\n        .toList();\n</code></pre>\n<hr />\n<p><strong>EDIT 2:</strong> I used the following <code>Person</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static class Person {\n    private LocalDate startDate;\n    private String type;\n    private Duration time1;\n    private Duration time2;\n\n    public Person() {}\n\n    public Person(String startDate, String type, String time1, String time2) {\n        this.startDate = LocalDate.parse(startDate);\n        this.type = type;\n        this.time1 = Duration.parse(time1);\n        this.time2 = Duration.parse(time2);\n    }\n\n    public Person(LocalDate startDate, String type, Duration time1, Duration time2) {\n        this.startDate = startDate;\n        this.type = type;\n        this.time1 = time1;\n        this.time2 = time2;\n    }\n\n    // getters and setters...\n\n    @Override\n    public String toString() {\n        return &quot;Person(&quot; + startDate + &quot;,&quot; + type + &quot;,&quot; + time1 + &quot;,&quot; + time2 + &quot;)&quot;;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        Person person = (Person) o;\n        return Objects.equals(startDate, person.startDate) &amp;&amp; Objects.equals(type, person.type) &amp;&amp; Objects.equals(time1, person.time1) &amp;&amp; Objects.equals(time2, person.time2);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(startDate, type, time1, time2);\n    }\n}\n</code></pre>\n<p>And initialize the list as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Person&gt; personList = Arrays.asList(\n        new Person(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;PT8H00M&quot;,&quot;PT4H00M&quot;),\n        new Person(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;PT50H00M&quot;,&quot;PT0H45M&quot;),\n        new Person(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;PT10H00M&quot;,&quot;PT0H40M&quot;),\n        new Person(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;PT1H00M&quot;,&quot;PT1H20M&quot;),\n        new Person(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;PT8H00M&quot;,&quot;PT2H00M&quot;),\n        new Person(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;PT10H00M&quot;,&quot;PT0H45M&quot;),\n        new Person(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;PT10H00M&quot;,&quot;PT1H40M&quot;),\n        new Person(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;PT2H00M&quot;,&quot;PT1H20M&quot;)\n);\n</code></pre>\n<p>All this code is giving me the desired outcome from the question.</p>\n"}],"owner":{"account_id":28943042,"reputation":3,"user_id":22169225,"display_name":"Mc_Android"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77141225,"answer_count":1,"score":0,"last_activity_date":1695283365,"creation_date":1695193640,"question_id":77140056,"body_markdown":"I want to create a list of persons sorted by `LocalDate` and `String` as well as aggregated by duration.\r\n\r\nI did some research regarding the use of duration in streams:\r\n- https://stackoverflow.com/questions/70606831/how-to-get-the-average-duration-for-each-category-having-films-using-stream-api\r\n- https://stackoverflow.com/questions/60816247/using-streams-to-sum-a-collection-of-immutable-duration-objects-in-java\r\n\r\nand on using streams with grouping and reducing a list of objects into subgroups:\r\n- https://stackoverflow.com/questions/57337508/grouping-list-of-objects-and-reduce-subgroups-into-different-objects-in-java-8\r\n\r\nHowever, it&#39;s impossible for me to solve my problem, class `Person` looks like this:\r\n\r\n```java\r\nclass Person { \r\n    private LocalDate startDate; \r\n    private String personType;\r\n    private Duration time1;\r\n    private Duration time2;//constructor, getter+setter, other methods\r\n}\r\n```\r\n\r\nAn example of the created list looks like this:\r\n\r\n```\r\nList&lt;Person&gt; personList = Arrays.asList(\r\n          new Person(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;08:00&quot;,&quot;4:00&quot;),\r\n\t    new Person(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;50:00&quot;,&quot;0:45&quot;),\t\r\n\t    new Person(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;10:00&quot;,&quot;0:40&quot;),\r\n\t    new Person(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;01:00&quot;,&quot;1:20&quot;),\r\n\t    new Person(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;08:00&quot;,&quot;2:00&quot;),\r\n\t    new Person(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;10:00&quot;,&quot;0:45&quot;),\t\r\n\t    new Person(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;10:00&quot;,&quot;1:40&quot;),\r\n\t    new Person(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;02:00&quot;,&quot;1:20&quot;),//... \r\n );\r\n```\r\n\r\nI want to create a list of persons sorted by startdate and personType, with the sum of duration.\r\n\r\nDesired output:\r\n\r\n```none\r\n(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;58:00&quot;,&quot;4:45&quot;),\r\n(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;11:00&quot;,&quot;2:00&quot;),\r\n(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;18:00&quot;,&quot;2:45&quot;),\r\n(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;12:00&quot;,&quot;3:00&quot;),\r\n...\r\n```\r\n\r\nMy approach is to use something like this. However, I can&#39;t map duration and string values:\r\n\r\n```\r\nMap&lt;LocalDate,List&lt;Person&gt;&gt; result=personList.stream()\r\n.collect(Collectors.groupingBy(Person::getstartDate))\r\n        .entrySet().stream()\r\n        .collect(Collectors.toMap(x -&gt; {\r\n            //how to sum duration values in here?\r\n           // Duration duration1 = x.getValue().stream() ...;\r\n            //how to use String values in here?\r\n           // String string = x.getValue().stream()....\r\n            return new Person(x.getKey(), string, duration1,duration2);\r\n        }, Map.Entry::getValue));\r\n```","title":"How to group and reduce a list of objects with duration","body":"<p>I want to create a list of persons sorted by <code>LocalDate</code> and <code>String</code> as well as aggregated by duration.</p>\n<p>I did some research regarding the use of duration in streams:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/70606831/how-to-get-the-average-duration-for-each-category-having-films-using-stream-api\">How to get the average duration for each category having films using stream API java</a></li>\n<li><a href=\"https://stackoverflow.com/questions/60816247/using-streams-to-sum-a-collection-of-immutable-duration-objects-in-java\">Using streams to sum a collection of immutable `Duration` objects, in Java</a></li>\n</ul>\n<p>and on using streams with grouping and reducing a list of objects into subgroups:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/57337508/grouping-list-of-objects-and-reduce-subgroups-into-different-objects-in-java-8\">Grouping list of objects and reduce subgroups into different objects in Java 8</a></li>\n</ul>\n<p>However, it's impossible for me to solve my problem, class <code>Person</code> looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Person { \n    private LocalDate startDate; \n    private String personType;\n    private Duration time1;\n    private Duration time2;//constructor, getter+setter, other methods\n}\n</code></pre>\n<p>An example of the created list looks like this:</p>\n<pre><code>List&lt;Person&gt; personList = Arrays.asList(\n          new Person(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;08:00&quot;,&quot;4:00&quot;),\n        new Person(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;50:00&quot;,&quot;0:45&quot;),  \n        new Person(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;10:00&quot;,&quot;0:40&quot;),\n        new Person(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;01:00&quot;,&quot;1:20&quot;),\n        new Person(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;08:00&quot;,&quot;2:00&quot;),\n        new Person(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;10:00&quot;,&quot;0:45&quot;),  \n        new Person(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;10:00&quot;,&quot;1:40&quot;),\n        new Person(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;02:00&quot;,&quot;1:20&quot;),//... \n );\n</code></pre>\n<p>I want to create a list of persons sorted by startdate and personType, with the sum of duration.</p>\n<p>Desired output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;58:00&quot;,&quot;4:45&quot;),\n(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;11:00&quot;,&quot;2:00&quot;),\n(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;18:00&quot;,&quot;2:45&quot;),\n(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;12:00&quot;,&quot;3:00&quot;),\n...\n</code></pre>\n<p>My approach is to use something like this. However, I can't map duration and string values:</p>\n<pre><code>Map&lt;LocalDate,List&lt;Person&gt;&gt; result=personList.stream()\n.collect(Collectors.groupingBy(Person::getstartDate))\n        .entrySet().stream()\n        .collect(Collectors.toMap(x -&gt; {\n            //how to sum duration values in here?\n           // Duration duration1 = x.getValue().stream() ...;\n            //how to use String values in here?\n           // String string = x.getValue().stream()....\n            return new Person(x.getKey(), string, duration1,duration2);\n        }, Map.Entry::getValue));\n</code></pre>\n"},{"tags":["java","regex","kotlin"],"comments":[{"owner":{"account_id":209503,"reputation":22800,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1695252005,"post_id":77146361,"comment_id":136001124,"body_markdown":"Add the code you tried please.","body":"Add the code you tried please."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1695254293,"post_id":77146361,"comment_id":136001316,"body_markdown":"Look up &#39;positive lookahead&#39;. If you want `split()` to remove no characters at all, call `.split(&quot;(?=pattern here)` - that&#39;s positive lookahead.","body":"Look up &#39;positive lookahead&#39;. If you want <code>split()</code> to remove no characters at all, call <code>.split(&quot;(?=pattern here)</code> - that&#39;s positive lookahead."},{"owner":{"account_id":94036,"reputation":107726,"user_id":256970,"accept_rate":86,"display_name":"Cary Swoveland"},"score":0,"creation_date":1695256050,"post_id":77146361,"comment_id":136001458,"body_markdown":"Match something like `[^]+|[]+` but I don&#39;t know Hindi or how that works with regular expressions.","body":"Match something like <code>[^]+|[]+</code> but I don&#39;t know Hindi or how that works with regular expressions."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1695260183,"post_id":77146361,"comment_id":136001780,"body_markdown":"I can make it split to `[, , ]` using a straightforward apporach - are you sure the split should be `[&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;]`?","body":"I can make it split to <code>[, , ]</code> using a straightforward apporach - are you sure the split should be <code>[&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;]</code>?"},{"owner":{"account_id":10640901,"reputation":617,"user_id":7835969,"display_name":"Manishoaham"},"score":0,"creation_date":1695284609,"post_id":77146361,"comment_id":136004683,"body_markdown":"@CarySwoveland there are few compound characters in Hindi e.g. `=++, =++, =++, =++` , though for the regex @Bohemian &#39;s answer helped me, Thanks.","body":"@CarySwoveland there are few compound characters in Hindi e.g. <code>=++, =++, =++, =++</code> , though for the regex @Bohemian &#39;s answer helped me, Thanks."}],"answers":[{"comments":[{"owner":{"account_id":10640901,"reputation":617,"user_id":7835969,"display_name":"Manishoaham"},"score":0,"creation_date":1695283290,"post_id":77146740,"comment_id":136004413,"body_markdown":"Thanks, eventually your single line regex helped me (+1), but the problem lied in using direct regex literal in split method `str.split(&quot;&lt;regex&gt;&quot;)` in case of kotlin. Using the `str.split(Pattern.compose(&quot;&lt;regex&gt;&quot;))` worked.","body":"Thanks, eventually your single line regex helped me (+1), but the problem lied in using direct regex literal in split method <code>str.split(&quot;&lt;regex&gt;&quot;)</code> in case of kotlin. Using the <code>str.split(Pattern.compose(&quot;&lt;regex&gt;&quot;))</code> worked."}],"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695260486,"creation_date":1695260486,"answer_id":77146740,"question_id":77146361,"body_markdown":"Using only the delimiters given as a look behind, splits to what you want \r\nexcept the the last element:\r\n\r\n    String str = &quot;&quot;;\r\n    List&lt;String&gt; delims = List.of(&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;);\r\n    String[] parts = str.split(&quot;(?&lt;=(&quot; + String.join(&quot;|&quot;, delims) + &quot;))&quot;);\r\n\r\nOutput:\r\n\r\n    [, , ]\r\n\r\n----\r\n\r\nTo split exactly to your desire, I has to add an alternate split on the last character:\r\n\r\n    String[] parts = str.split(&quot;(?&lt;=(&quot; + String.join(&quot;|&quot;, delims) + &quot;))|(?=.$)&quot;);\r\n\r\nOutput:\r\n\r\n    [, , , ]\r\n","title":"split string using a given unicode sequence as delimiter and keep the delimeter","body":"<p>Using only the delimiters given as a look behind, splits to what you want\nexcept the the last element:</p>\n<pre><code>String str = &quot;&quot;;\nList&lt;String&gt; delims = List.of(&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;);\nString[] parts = str.split(&quot;(?&lt;=(&quot; + String.join(&quot;|&quot;, delims) + &quot;))&quot;);\n</code></pre>\n<p>Output:</p>\n<pre><code>[, , ]\n</code></pre>\n<hr />\n<p>To split exactly to your desire, I has to add an alternate split on the last character:</p>\n<pre><code>String[] parts = str.split(&quot;(?&lt;=(&quot; + String.join(&quot;|&quot;, delims) + &quot;))|(?=.$)&quot;);\n</code></pre>\n<p>Output:</p>\n<pre><code>[, , , ]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10640901,"reputation":617,"user_id":7835969,"display_name":"Manishoaham"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695282962,"creation_date":1695282962,"answer_id":77148240,"question_id":77146361,"body_markdown":"Not sure if it&#39;s the Java vs Kotlin issue (since the answers I was following were from Java considering both are interoperable), but the root problem lied in the direct string literal used in the split method in case of kotlin.\r\n\r\nThe below code doesn&#39;t work:\r\n\r\n    val array = &quot;&quot;.split(&quot;(?&lt;=(|||))|(?=.\\$)&quot;)\r\n    println(array)\r\n    \r\n    Answer: [] // no split\r\n\r\nBut using `Pattern.compile(&lt;string_regex&gt;)` as below worked:\r\n\r\n    val array = &quot;&quot;.split(Pattern.compile(&quot;(?&lt;=(|||))|(?=.\\$)&quot;))\r\n    println(array)\r\n    \r\n    Answer: [, , , ] // splits as expected\r\n\r\nThe differences between these two code in AndroidStudio:\r\n\r\n[![split with regex literal][1]][1]\r\n[![split with Pattern][2]][2]\r\n\r\nThe single line regex is followed from the [Bohemian][3]&#39;s answer to this question.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ldbEv.png\r\n  [2]: https://i.stack.imgur.com/srdRw.png\r\n  [3]: https://stackoverflow.com/users/256196/bohemian","title":"split string using a given unicode sequence as delimiter and keep the delimeter","body":"<p>Not sure if it's the Java vs Kotlin issue (since the answers I was following were from Java considering both are interoperable), but the root problem lied in the direct string literal used in the split method in case of kotlin.</p>\n<p>The below code doesn't work:</p>\n<pre><code>val array = &quot;&quot;.split(&quot;(?&lt;=(|||))|(?=.\\$)&quot;)\nprintln(array)\n\nAnswer: [] // no split\n</code></pre>\n<p>But using <code>Pattern.compile(&lt;string_regex&gt;)</code> as below worked:</p>\n<pre><code>val array = &quot;&quot;.split(Pattern.compile(&quot;(?&lt;=(|||))|(?=.\\$)&quot;))\nprintln(array)\n\nAnswer: [, , , ] // splits as expected\n</code></pre>\n<p>The differences between these two code in AndroidStudio:</p>\n<p><a href=\"https://i.stack.imgur.com/ldbEv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ldbEv.png\" alt=\"split with regex literal\" /></a>\n<a href=\"https://i.stack.imgur.com/srdRw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/srdRw.png\" alt=\"split with Pattern\" /></a></p>\n<p>The single line regex is followed from the <a href=\"https://stackoverflow.com/users/256196/bohemian\">Bohemian</a>'s answer to this question.</p>\n"}],"owner":{"account_id":10640901,"reputation":617,"user_id":7835969,"display_name":"Manishoaham"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1695282962,"creation_date":1695251875,"question_id":77146361,"body_markdown":"This could be a possible duplicate but I tried many answers available from here but none worked for my requirement.\r\n\r\nI want to split the String = &quot;&quot; into [&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;] using a listOf(&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;) delimiters and want to keep them into result array as above.\r\nNote that the , , ,  themselves are made of a group of characters so are Strings but not characters.","title":"split string using a given unicode sequence as delimiter and keep the delimeter","body":"<p>This could be a possible duplicate but I tried many answers available from here but none worked for my requirement.</p>\n<p>I want to split the String = &quot;&quot; into [&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;] using a listOf(&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;) delimiters and want to keep them into result array as above.\nNote that the , , ,  themselves are made of a group of characters so are Strings but not characters.</p>\n"},{"tags":["java","spring","activemq","message-queue"],"comments":[{"owner":{"account_id":2048438,"reputation":8159,"user_id":1827992,"accept_rate":88,"display_name":"BevynQ"},"score":2,"creation_date":1355206058,"post_id":13814321,"comment_id":19007080,"body_markdown":"the xml validator is complaining that &lt;beans&gt; is not a valid element. This validates in an external xml site. can you open http://www.springframework.org/schema/beans/spring-beans.xsd from where you are? does copying it local help? could be a firewall issue.","body":"the xml validator is complaining that &lt;beans&gt; is not a valid element. This validates in an external xml site. can you open <a href=\"http://www.springframework.org/schema/beans/spring-beans.xsd\" rel=\"nofollow noreferrer\">springframework.org/schema/beans/spring-beans.xsd</a> from where you are? does copying it local help? could be a firewall issue."},{"owner":{"account_id":1985389,"reputation":631,"user_id":1780772,"accept_rate":80,"display_name":"Parvez"},"score":0,"creation_date":1355208364,"post_id":13814321,"comment_id":19007838,"body_markdown":"Could be this reason [getting-error-message-with-spring-cvc-elt-1-cannot-find-the-declaration-of-ele][1]\r\n\r\n\r\n  [1]: http://stackoverflow.com/questions/10182857/getting-error-message-with-spring-cvc-elt-1-cannot-find-the-declaration-of-ele?rq=1","body":"Could be this reason [getting-error-message-with-spring-cvc-elt-1-cannot-find-the&zwnj;&#8203;-declaration-of-ele]&zwnj;&#8203;[1]        [1]: <a href=\"http://stackoverflow.com/questions/10182857/getting-error-message-with-spring-cvc-elt-1-cannot-find-the-declaration-of-ele?rq=1\" title=\"getting error message with spring cvc elt 1 cannot find the declaration of ele\">stackoverflow.com/questions/10182857/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":2127461,"reputation":990,"user_id":1889184,"accept_rate":60,"display_name":"Stefan"},"score":12,"creation_date":1355207132,"post_id":13814648,"comment_id":19007416,"body_markdown":"Just to be explicit: you have to match your spring library version with the XSD version.","body":"Just to be explicit: you have to match your spring library version with the XSD version."},{"owner":{"account_id":1945274,"reputation":2558,"user_id":1750580,"accept_rate":100,"display_name":"Leonardo Andrade"},"score":0,"creation_date":1398277172,"post_id":13814648,"comment_id":35580036,"body_markdown":"See the options in org.springframework.beans.factory.xml of spring-beans package.","body":"See the options in org.springframework.beans.factory.xml of spring-beans package."}],"tags":[],"owner":{"account_id":44871,"reputation":22865,"user_id":131929,"accept_rate":83,"display_name":"Marcel St&#246;r"},"comment_count":2,"down_vote_count":0,"up_vote_count":47,"is_accepted":true,"score":47,"last_activity_date":1435499924,"creation_date":1355206357,"answer_id":13814648,"question_id":13814321,"body_markdown":"Try this, assuming you&#39;re on Spring 3.1:\r\n\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; \r\n           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;\r\n        http://www.springframework.org/schema/beans \r\n        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd&quot;&gt;\r\n\r\nReplace `3.1` on the last line with whatever _major_ Spring version you use. Meaning: there is no `3.1.1` XSD even though there is a Spring version `3.1.1`.","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>Try this, assuming you're on Spring 3.1:</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" \n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"\n    http://www.springframework.org/schema/beans \n    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\"&gt;\n</code></pre>\n\n<p>Replace <code>3.1</code> on the last line with whatever <em>major</em> Spring version you use. Meaning: there is no <code>3.1.1</code> XSD even though there is a Spring version <code>3.1.1</code>.</p>\n"},{"comments":[{"owner":{"account_id":255184,"reputation":7191,"user_id":535060,"accept_rate":94,"display_name":"Somaiah Kumbera"},"score":1,"creation_date":1446113696,"post_id":21596238,"comment_id":54612915,"body_markdown":"No need to copy. The xsd is already in the jar. Something like this should work:\n\nxsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\n            classpath:org/springframework/beans/factory/xml/spring-beans-4.1.xsd\n\t   \t\thttp://www.springframework.org/schema/context\n\t   \t\tclasspath:org/springframework/context/config/spring-context-4.1.xsd&quot;&gt;","body":"No need to copy. The xsd is already in the jar. Something like this should work:  xsi:schemaLocation=&quot;<a href=\"http://www.springframework.org/schema/beans\" rel=\"nofollow noreferrer\">springframework.org/schema/beans</a>             classpath:org/springframework/beans/factory/xml/spring-beans&zwnj;&#8203;-4.1.xsd \t   \t\t<a href=\"http://www.springframework.org/schema/context\" rel=\"nofollow noreferrer\">springframework.org/schema/context</a> \t   \t\tclasspath:org/springframework/context/config/spring-contex&zwnj;&#8203;t-4.1.xsd&quot;&gt;"}],"tags":[],"owner":{"account_id":1435959,"reputation":4869,"user_id":1357328,"accept_rate":55,"display_name":"mickeymoon"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1391670387,"creation_date":1391670387,"answer_id":21596238,"question_id":13814321,"body_markdown":"Found it on another thread that solved my problem... was using an internet connection less network.\r\n\r\nIn that case copy the xsd files from the url and place it next to the beans.xml file and change the xsi:schemaLocation as under:\r\n\r\n     &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; \r\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans \r\n    spring-beans-3.1.xsd&quot;&gt;","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>Found it on another thread that solved my problem... was using an internet connection less network.</p>\n\n<p>In that case copy the xsd files from the url and place it next to the beans.xml file and change the xsi:schemaLocation as under:</p>\n\n<pre><code> &lt;beans xmlns=\"http://www.springframework.org/schema/beans\" \n   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://www.springframework.org/schema/beans \nspring-beans-3.1.xsd\"&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1575209,"reputation":10468,"user_id":1461862,"accept_rate":67,"display_name":"Mauricio Gracia Gutierrez"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1442442228,"creation_date":1442440371,"answer_id":32619402,"question_id":13814321,"body_markdown":"This error of Cannot find the declaration of element &#39;beans&#39; but for a whole different reason\r\n\r\nIt turs out my internet connection was not very reliable, so i decided to check first for this url\r\n\r\nhttp://www.springframework.org/schema/context/spring-context-4.0.xsd\r\n\r\nOnce I saw that the xsd was open succesfully I clean the Eclipse(IDE) project and the error was gone\r\n\r\nIf you try this steps and still get the error then\r\ncheck the Spring version so that it matches as mentioned by another answer\r\n\r\n\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; \r\n           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;\r\n        http://www.springframework.org/schema/beans \r\n        http://www.springframework.org/schema/beans/spring-beans-**[MAYOR.MINOR]**.xsd&quot;&gt;\r\n\r\nReplace [MAYOR.MINOR] on the last line with whatever major.minor  Spring version that you are using\r\n\r\nFor Spring 4.0\r\nhttp://www.springframework.org/schema/context/spring-context-4.0.xsd\r\n\r\nFor Sprint 3.1\r\nhttp://www.springframework.org/schema/beans \r\nspring-beans-3.1.xsd\r\n\r\nAll the contexts are available here\r\nhttp://www.springframework.org/schema/context/","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>This error of Cannot find the declaration of element 'beans' but for a whole different reason</p>\n\n<p>It turs out my internet connection was not very reliable, so i decided to check first for this url</p>\n\n<p><a href=\"http://www.springframework.org/schema/context/spring-context-4.0.xsd\" rel=\"nofollow\">http://www.springframework.org/schema/context/spring-context-4.0.xsd</a></p>\n\n<p>Once I saw that the xsd was open succesfully I clean the Eclipse(IDE) project and the error was gone</p>\n\n<p>If you try this steps and still get the error then\ncheck the Spring version so that it matches as mentioned by another answer</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" \n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"\n    http://www.springframework.org/schema/beans \n    http://www.springframework.org/schema/beans/spring-beans-**[MAYOR.MINOR]**.xsd\"&gt;\n</code></pre>\n\n<p>Replace [MAYOR.MINOR] on the last line with whatever major.minor  Spring version that you are using</p>\n\n<p>For Spring 4.0\n<a href=\"http://www.springframework.org/schema/context/spring-context-4.0.xsd\" rel=\"nofollow\">http://www.springframework.org/schema/context/spring-context-4.0.xsd</a></p>\n\n<p>For Sprint 3.1\n<a href=\"http://www.springframework.org/schema/beans\" rel=\"nofollow\">http://www.springframework.org/schema/beans</a> \nspring-beans-3.1.xsd</p>\n\n<p>All the contexts are available here\n<a href=\"http://www.springframework.org/schema/context/\" rel=\"nofollow\">http://www.springframework.org/schema/context/</a></p>\n"},{"tags":[],"owner":{"account_id":3146860,"reputation":21,"user_id":2661177,"display_name":"user2661177"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1458059721,"creation_date":1458059721,"answer_id":36017043,"question_id":13814321,"body_markdown":"I had this issue and the root cause turned out to be white-space (shown as dots below) after the www.springframework.org/schema/beans reference in xsi:schemaLocation, i.e.\r\n\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\r\n    xsi:schemaLocation=&quot;\r\n    http://www.springframework.org/schema/beans....\r\n    http://www.springframework.org/schema/beans/spring-beans-4.2.xsd\r\n    http://www.springframework.org/schema/context\r\n    http://www.springframework.org/schema/context/spring-context-4.2.xsd\r\n    http://www.springframework.org/schema/mvc\r\n    http://www.springframework.org/schema/mvc/spring-mvc-4.2.xsd&quot;&gt;","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>I had this issue and the root cause turned out to be white-space (shown as dots below) after the www.springframework.org/schema/beans reference in xsi:schemaLocation, i.e.</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:context=\"http://www.springframework.org/schema/context\"\nxmlns:mvc=\"http://www.springframework.org/schema/mvc\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns:p=\"http://www.springframework.org/schema/p\"\nxsi:schemaLocation=\"\nhttp://www.springframework.org/schema/beans....\nhttp://www.springframework.org/schema/beans/spring-beans-4.2.xsd\nhttp://www.springframework.org/schema/context\nhttp://www.springframework.org/schema/context/spring-context-4.2.xsd\nhttp://www.springframework.org/schema/mvc\nhttp://www.springframework.org/schema/mvc/spring-mvc-4.2.xsd\"&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":915334,"reputation":934,"user_id":948241,"accept_rate":62,"display_name":"cryptonkid"},"score":0,"creation_date":1528209157,"post_id":40001942,"comment_id":88414695,"body_markdown":"this is in no way related to the question.","body":"this is in no way related to the question."}],"tags":[],"owner":{"account_id":9422694,"reputation":1,"user_id":7008663,"display_name":"prem"},"comment_count":1,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1476287551,"creation_date":1476284454,"answer_id":40001942,"question_id":13814321,"body_markdown":"Use this to solve your problem:\r\n\r\n    &lt;context:annotation-config/&gt;\r\n","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>Use this to solve your problem:</p>\n\n<pre><code>&lt;context:annotation-config/&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2010740,"reputation":2294,"user_id":1799224,"display_name":"Dark.Passenger"},"score":0,"creation_date":1593112763,"post_id":41438516,"comment_id":110674241,"body_markdown":"In some internal corp environment, accessing external network to get schema is not always feasible. In this case, the solution here works perfectly.","body":"In some internal corp environment, accessing external network to get schema is not always feasible. In this case, the solution here works perfectly."},{"owner":{"account_id":5534046,"reputation":113,"user_id":7708392,"display_name":"xdcsy"},"score":0,"creation_date":1623813437,"post_id":41438516,"comment_id":120182084,"body_markdown":"Solved our problem in an offline environment. It&#39;s a bit tricky that IDEA would mark the classpath in red as an unresolved reference while it actually works fine.","body":"Solved our problem in an offline environment. It&#39;s a bit tricky that IDEA would mark the classpath in red as an unresolved reference while it actually works fine."}],"tags":[],"owner":{"account_id":9282265,"reputation":81,"user_id":6893170,"display_name":"Sushma"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1483434346,"creation_date":1483428776,"answer_id":41438516,"question_id":13814321,"body_markdown":"Add this code     ..It helped me\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n        &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; \r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \r\n             xmlns:context=&quot;http://www.springframework.org/schema/context&quot; \r\n             xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; \r\n             xsi:schemaLocation=&quot;\r\n             http://www.springframework.org/schema/beans \r\n               classpath:/org/springframework/beans/factory/xml/spring-beans-3.0.xsd \r\n             http://www.springframework.org/schema/context \r\n             classpath:/org/springframework/context/config/spring-context-3.0.xsd\r\n            http://www.springframework.org/schema/aop \r\n            classpath:/org/springframework/aop/config/spring-aop-3.0.xsd\r\n             &quot;&gt;      \r\n         &lt;/beans&gt;","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>Add this code     ..It helped me</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n    &lt;beans xmlns=\"http://www.springframework.org/schema/beans\" \n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n         xmlns:context=\"http://www.springframework.org/schema/context\" \n         xmlns:aop=\"http://www.springframework.org/schema/aop\" \n         xsi:schemaLocation=\"\n         http://www.springframework.org/schema/beans \n           classpath:/org/springframework/beans/factory/xml/spring-beans-3.0.xsd \n         http://www.springframework.org/schema/context \n         classpath:/org/springframework/context/config/spring-context-3.0.xsd\n        http://www.springframework.org/schema/aop \n        classpath:/org/springframework/aop/config/spring-aop-3.0.xsd\n         \"&gt;      \n     &lt;/beans&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13455857,"reputation":1,"user_id":9709447,"display_name":"Sujit"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524820850,"creation_date":1524820850,"answer_id":50059211,"question_id":13814321,"body_markdown":"Try Using this- Spring 4.0. Working\r\n\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n           xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\r\n           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n           xmlns:context=&quot;http://www.springframework.org/schema/context&quot; \r\n           xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans                                               http://www.springframework.org/schema/beans/spring-beans.xsd\r\n           http://www.springframework.org/schema/context \r\n           http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; ","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>Try Using this- Spring 4.0. Working</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:p=\"http://www.springframework.org/schema/p\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context=\"http://www.springframework.org/schema/context\" \n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans                                               http://www.springframework.org/schema/beans/spring-beans.xsd\n       http://www.springframework.org/schema/context \n       http://www.springframework.org/schema/context/spring-context.xsd\"&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":12999640,"reputation":158,"user_id":9396130,"display_name":"Nancy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554187948,"creation_date":1554187948,"answer_id":55468590,"question_id":13814321,"body_markdown":"Make sure if all the spring jar file&#39;s version in your build path and the version mentioned in the xml file are same.","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>Make sure if all the spring jar file's version in your build path and the version mentioned in the xml file are same.</p>\n"},{"tags":[],"owner":{"account_id":5159456,"reputation":183,"user_id":4420109,"display_name":"sebke CCU"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591365157,"creation_date":1591363846,"answer_id":62216499,"question_id":13814321,"body_markdown":"For me the problem was my file encoding...I used powershell to write the xml file and this was not UTF-8 ...\r\nIt seems that spring requires UTF8 because as soon as I changed the encoding (using notepad++) it works again without any errors\r\n\r\nNow i Use in my powershellscript the following line to output the xml file in UTF-8:\r\n[IO.File]::WriteAllLines($fname_dataloader_xml_config_file, $dataloader_configfile)\r\n\r\ninstead of using the redirection operator &gt; to create my file\r\n\r\nNote: I didn&#39;t put any xml parameters in my beans tag and it works","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>For me the problem was my file encoding...I used powershell to write the xml file and this was not UTF-8 ...\nIt seems that spring requires UTF8 because as soon as I changed the encoding (using notepad++) it works again without any errors</p>\n\n<p>Now i Use in my powershellscript the following line to output the xml file in UTF-8:\n[IO.File]::WriteAllLines($fname_dataloader_xml_config_file, $dataloader_configfile)</p>\n\n<p>instead of using the redirection operator > to create my file</p>\n\n<p>Note: I didn't put any xml parameters in my beans tag and it works</p>\n"},{"comments":[{"owner":{"account_id":7439229,"reputation":105,"user_id":5657520,"display_name":"Devashish Priyadarshi"},"score":1,"creation_date":1593608481,"post_id":62677359,"comment_id":110840138,"body_markdown":"Another thing I tried that worked was , I reverted my changes kept my namespace as before without any local xsd. And rather ran my jar with proxy args as : java -Dhttp.proxyHost=myProxyHost -Dhttp.proxyPort=myproxyport -jar xyz.jar   And it worked fine","body":"Another thing I tried that worked was , I reverted my changes kept my namespace as before without any local xsd. And rather ran my jar with proxy args as : java -Dhttp.proxyHost=myProxyHost -Dhttp.proxyPort=myproxyport -jar xyz.jar   And it worked fine"}],"tags":[],"owner":{"account_id":7439229,"reputation":105,"user_id":5657520,"display_name":"Devashish Priyadarshi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593608180,"creation_date":1593608180,"answer_id":62677359,"question_id":13814321,"body_markdown":"For me the problem was that spring was not able to download http://www.springframework.org/schema/beans/spring-beans.xsd or http://www.springframework.org/schema/context/spring-context.xsd\r\n\r\nHowever I was able to access those from my browser as it was using my machines proxy. So I just copied the content of the two xsds to files named spring-beans.xsd and spring-context.xsd and replaced the http url with the file names and it worked for me. ","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>For me the problem was that spring was not able to download <a href=\"http://www.springframework.org/schema/beans/spring-beans.xsd\" rel=\"nofollow noreferrer\">http://www.springframework.org/schema/beans/spring-beans.xsd</a> or <a href=\"http://www.springframework.org/schema/context/spring-context.xsd\" rel=\"nofollow noreferrer\">http://www.springframework.org/schema/context/spring-context.xsd</a></p>\n<p>However I was able to access those from my browser as it was using my machines proxy. So I just copied the content of the two xsds to files named spring-beans.xsd and spring-context.xsd and replaced the http url with the file names and it worked for me.</p>\n"},{"tags":[],"owner":{"account_id":9663586,"reputation":51,"user_id":7170757,"display_name":"ManhKM"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1616942326,"creation_date":1616942326,"answer_id":66842588,"question_id":13814321,"body_markdown":"I have encountered this same as you.\r\nWith my solution as follows:\r\n1. Reconfig file: Spring Configuration File (no use XSD namespace declaration).\r\n[![2.][1]][1] \r\n-&gt; with the main purpose of not having tag name( bean, ...)\r\n2. Create tag &lt;bean&gt; with class you want to use.\r\n[![enter image description here][2]][2]\r\n---HappyCoding---\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UYVMz.png\r\n  [2]: https://i.stack.imgur.com/B73HU.png","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>I have encountered this same as you.\nWith my solution as follows:</p>\n<ol>\n<li>Reconfig file: Spring Configuration File (no use XSD namespace declaration).\n<a href=\"https://i.stack.imgur.com/UYVMz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UYVMz.png\" alt=\"2.\" /></a>\n-&gt; with the main purpose of not having tag name( bean, ...)</li>\n<li>Create tag  with class you want to use.\n<a href=\"https://i.stack.imgur.com/B73HU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B73HU.png\" alt=\"enter image description here\" /></a>\n---HappyCoding---</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":21399682,"reputation":1,"user_id":15762079,"display_name":"Abhishek Sakalkar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619367457,"creation_date":1619367457,"answer_id":67255614,"question_id":13814321,"body_markdown":" Try using this:\r\n\r\n   \r\n\r\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n    http://www.springframework.org/schema/beans/spring-beans.xsd\r\n    http://www.springframework.org/schema/context\r\n    http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>Try using this:</p>\n<pre><code>xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\nhttp://www.springframework.org/schema/beans/spring-beans.xsd\nhttp://www.springframework.org/schema/context\nhttp://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11139153,"reputation":59,"user_id":8176437,"display_name":"Aditya Dubey"},"score":0,"creation_date":1669831909,"post_id":70877009,"comment_id":131734780,"body_markdown":"This worked for me but not sure why because I am using spring 5.2.8 can anyone tell me why it worked?","body":"This worked for me but not sure why because I am using spring 5.2.8 can anyone tell me why it worked?"}],"tags":[],"owner":{"account_id":19117694,"reputation":13,"user_id":13962274,"display_name":"Ajith Samraj"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643279410,"creation_date":1643279410,"answer_id":70877009,"question_id":13814321,"body_markdown":"I resolved this using the following code. \r\n\r\n    &lt;? xml version=&quot;1.0&quot; encoding=&quot;UTF-8 ?&gt;\r\n\r\n        &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; \r\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \r\n        xmlns:jee=&quot;http://www.springframework.org/schema/jee&quot; \r\n        xmlns:context=&quot;http://www.springframework.org/schema/context&quot; \r\n        xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans \r\n        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd \r\n        http://www.springframework.org/schema/jee \r\n        http://www.springframework.org/schema/jee/spring-jee-3.0.xsd \r\n        http://www.springframework.org/schema/context \r\n        http://www.springframework.org/schema/context/spring-context-3.0.xsd&quot;&gt; \r\n\r\n    &lt;/Beans&gt;\r\n\r\n    ","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>I resolved this using the following code.</p>\n<pre><code>&lt;? xml version=&quot;1.0&quot; encoding=&quot;UTF-8 ?&gt;\n\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; \n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \n    xmlns:jee=&quot;http://www.springframework.org/schema/jee&quot; \n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot; \n    xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans \n    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd \n    http://www.springframework.org/schema/jee \n    http://www.springframework.org/schema/jee/spring-jee-3.0.xsd \n    http://www.springframework.org/schema/context \n    http://www.springframework.org/schema/context/spring-context-3.0.xsd&quot;&gt; \n\n&lt;/Beans&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5979310,"reputation":281,"user_id":4698969,"display_name":"Andrew Santosa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669115783,"creation_date":1669115783,"answer_id":74531763,"question_id":13814321,"body_markdown":"For Spring 5.1.0.RELEASE, the configuration file format specified in [an answer for another question][1] works for me.\r\n\r\nThis is the copy:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans \r\n    http://www.springframework.org/schema/beans/spring-beans.xsd \r\n    http://www.springframework.org/schema/context \r\n    http://www.springframework.org/schema/context/spring-context.xsd\r\n    http://www.springframework.org/schema/mvc\r\n    http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;\r\n     \r\n    &lt;!-- Bean declaration and other configurations --&gt;\r\n     \r\n&lt;/beans&gt; \r\n```\r\n\r\n  [1]: https://stackoverflow.com/a/52659844/4698969","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>For Spring 5.1.0.RELEASE, the configuration file format specified in <a href=\"https://stackoverflow.com/a/52659844/4698969\">an answer for another question</a> works for me.</p>\n<p>This is the copy:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans \n    http://www.springframework.org/schema/beans/spring-beans.xsd \n    http://www.springframework.org/schema/context \n    http://www.springframework.org/schema/context/spring-context.xsd\n    http://www.springframework.org/schema/mvc\n    http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;\n     \n    &lt;!-- Bean declaration and other configurations --&gt;\n     \n&lt;/beans&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":29498279,"reputation":1,"user_id":22605835,"display_name":"Rahul Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695282555,"creation_date":1695282555,"answer_id":77148197,"question_id":13814321,"body_markdown":"This one is the spring version related issues. Just try to change spring version to lower or 4.1.8.RELEASE","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>This one is the spring version related issues. Just try to change spring version to lower or 4.1.8.RELEASE</p>\n"}],"owner":{"account_id":413891,"reputation":3932,"user_id":787793,"accept_rate":70,"display_name":"nebula"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136431,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":13814648,"answer_count":15,"score":29,"last_activity_date":1695282555,"creation_date":1355204560,"question_id":13814321,"body_markdown":"I have the spring jars of `spring-3.2.0.RC1.jar` and trying to implement `Apache ActiveMQ` `helloWorld` program from tutorial given [here][1]. The xml configuration file is:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;beans xmlns:jms=&quot;http://www.springframework.org/schema/jms&quot;\r\n    \txmlns:p=&quot;http://www.springframework.org/schema/p&quot; \r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txsi:schemalocation=&quot;http://www.springframework.org/schema/beans \r\n    \thttp://www.springframework.org/schema/beans/spring-beans.xsd\r\n        http://www.springframework.org/schema/jms \r\n    \thttp://www.springframework.org/schema/jms/spring-jms.xsd&quot;&gt;\r\n    \t\r\n    \t&lt;bean class=&quot;org.apache.activemq.command.ActiveMQQueue&quot; id=&quot;destination&quot;&gt;\r\n    \t\t&lt;constructor-arg value=&quot;TEST.Q1&quot;&gt;&lt;/constructor-arg&gt;\r\n    \t&lt;/bean&gt;\r\n    \t\r\n    \t&lt;bean class=&quot;org.apache.activemq.ActiveMQConnectionFactory&quot; id=&quot;connectionFactory&quot;\r\n    \t\tp:brokerurl=&quot;tcp://localhost:8161&quot;&gt;&lt;/bean&gt;\r\n    \t\r\n    \t&lt;bean class=&quot;com.jms.helloworld.listner.MessageListenerImpl&quot; id=&quot;simpleMessageListener&quot;&gt;\r\n    \t\t&lt;bean\r\n    \t\t\tclass=&quot;org.springframework.jms.listener.DefaultMessageListenerContainer&quot;\r\n    \t\t\tid=&quot;jmsContainer&quot;&gt;\r\n    \t\t\t&lt;property name=&quot;connectionFactory&quot; ref=&quot;connectionFactory&quot;&gt;&lt;/property&gt;\r\n    \t\t\t&lt;property name=&quot;destination&quot; ref=&quot;destination&quot;&gt;&lt;/property&gt;\r\n    \t\t\t&lt;property name=&quot;messageListener&quot; ref=&quot;simpleMessageListener&quot;&gt;&lt;/property&gt;\r\n    \t\t&lt;/bean&gt;\r\n    \t&lt;/bean&gt;\r\n    &lt;/beans&gt;    \r\n\r\n**main:**\r\n\r\n    public static void main(String[] args) throws JMSException {\r\n    \t\tSystem.out.println(&quot;LISTNER STARTED&quot;);\r\n    \t\tApplicationContext context =  new FileSystemXmlApplicationContext(&quot;src/com/jms/helloworld/config/JMSConfig.xml&quot;);\r\n    \t}\r\n\r\n    **Exception on console**\r\n\r\n\r\n    LISTNER STARTED\r\n    log4j:WARN No appenders could be found for logger (org.springframework.core.env.StandardEnvironment).\r\n    log4j:WARN Please initialize the log4j system properly.\r\n    log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\r\n    Exception in thread &quot;main&quot; org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 10 in XML document from file [/home/neal/workspace/ActiveMQListener/src/com/jms/helloworld/config/JMSConfig.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 10; columnNumber: 61; cvc-elt.1: Cannot find the declaration of element &#39;beans&#39;.\r\n    \tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)\r\n    \tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)\r\n    \tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)\r\n    \tat org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:127)\r\n    \tat org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:93)\r\n    \tat org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:537)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)\r\n    \tat org.springframework.context.support.FileSystemXmlApplicationContext.&lt;init&gt;(FileSystemXmlApplicationContext.java:140)\r\n    \tat org.springframework.context.support.FileSystemXmlApplicationContext.&lt;init&gt;(FileSystemXmlApplicationContext.java:84)\r\n    \tat com.jms.helloworld.test.TestJMSListner.main(TestJMSListner.java:15)\r\n    Caused by: org.xml.sax.SAXParseException; lineNumber: 10; columnNumber: 61; cvc-elt.1: Cannot find the declaration of element &#39;beans&#39;.\r\n    \tat com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)\r\n    \tat com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:134)\r\n    \tat com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:387)\r\n    \tat com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:321)\r\n    \tat com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1920)\r\n    \tat com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:709)\r\n    \tat com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:376)\r\n    \tat com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:602)\r\n    \tat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3080)\r\n    \tat com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:899)\r\n    \tat com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:625)\r\n    \tat com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)\r\n    \tat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)\r\n    \tat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:819)\r\n    \tat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:748)\r\n    \tat com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)\r\n    \tat com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:239)\r\n    \tat com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:288)\r\n    \tat org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)\r\n    \tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)\r\n    \t... 14 more\r\n\r\nI don&#39;t know what is wrong with the beans.So far any suggestion in other question doesn&#39;t help. Any help?\r\n\r\n\r\n  [1]: http://icodingclub.blogspot.com/2011/07/introduction-of-spring-jms-with.html","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>I have the spring jars of <code>spring-3.2.0.RC1.jar</code> and trying to implement <code>Apache ActiveMQ</code> <code>helloWorld</code> program from tutorial given <a href=\"http://icodingclub.blogspot.com/2011/07/introduction-of-spring-jms-with.html\" rel=\"noreferrer\">here</a>. The xml configuration file is:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;beans xmlns:jms=\"http://www.springframework.org/schema/jms\"\n    xmlns:p=\"http://www.springframework.org/schema/p\" \n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns=\"http://www.springframework.org/schema/beans\"\n    xsi:schemalocation=\"http://www.springframework.org/schema/beans \n    http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/jms \n    http://www.springframework.org/schema/jms/spring-jms.xsd\"&gt;\n\n    &lt;bean class=\"org.apache.activemq.command.ActiveMQQueue\" id=\"destination\"&gt;\n        &lt;constructor-arg value=\"TEST.Q1\"&gt;&lt;/constructor-arg&gt;\n    &lt;/bean&gt;\n\n    &lt;bean class=\"org.apache.activemq.ActiveMQConnectionFactory\" id=\"connectionFactory\"\n        p:brokerurl=\"tcp://localhost:8161\"&gt;&lt;/bean&gt;\n\n    &lt;bean class=\"com.jms.helloworld.listner.MessageListenerImpl\" id=\"simpleMessageListener\"&gt;\n        &lt;bean\n            class=\"org.springframework.jms.listener.DefaultMessageListenerContainer\"\n            id=\"jmsContainer\"&gt;\n            &lt;property name=\"connectionFactory\" ref=\"connectionFactory\"&gt;&lt;/property&gt;\n            &lt;property name=\"destination\" ref=\"destination\"&gt;&lt;/property&gt;\n            &lt;property name=\"messageListener\" ref=\"simpleMessageListener\"&gt;&lt;/property&gt;\n        &lt;/bean&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;    \n</code></pre>\n\n<p><strong>main:</strong></p>\n\n<pre><code>public static void main(String[] args) throws JMSException {\n        System.out.println(\"LISTNER STARTED\");\n        ApplicationContext context =  new FileSystemXmlApplicationContext(\"src/com/jms/helloworld/config/JMSConfig.xml\");\n    }\n\n**Exception on console**\n\n\nLISTNER STARTED\nlog4j:WARN No appenders could be found for logger (org.springframework.core.env.StandardEnvironment).\nlog4j:WARN Please initialize the log4j system properly.\nlog4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\nException in thread \"main\" org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 10 in XML document from file [/home/neal/workspace/ActiveMQListener/src/com/jms/helloworld/config/JMSConfig.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 10; columnNumber: 61; cvc-elt.1: Cannot find the declaration of element 'beans'.\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)\n    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:127)\n    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:93)\n    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)\n    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:537)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)\n    at org.springframework.context.support.FileSystemXmlApplicationContext.&lt;init&gt;(FileSystemXmlApplicationContext.java:140)\n    at org.springframework.context.support.FileSystemXmlApplicationContext.&lt;init&gt;(FileSystemXmlApplicationContext.java:84)\n    at com.jms.helloworld.test.TestJMSListner.main(TestJMSListner.java:15)\nCaused by: org.xml.sax.SAXParseException; lineNumber: 10; columnNumber: 61; cvc-elt.1: Cannot find the declaration of element 'beans'.\n    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)\n    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:134)\n    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:387)\n    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:321)\n    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1920)\n    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:709)\n    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:376)\n    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:602)\n    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3080)\n    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:899)\n    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:625)\n    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)\n    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)\n    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:819)\n    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:748)\n    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)\n    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:239)\n    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:288)\n    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)\n    ... 14 more\n</code></pre>\n\n<p>I don't know what is wrong with the beans.So far any suggestion in other question doesn't help. Any help?</p>\n"},{"tags":["java","android","kotlin","android-edittext","keyboard-events"],"owner":{"account_id":27817647,"reputation":591,"user_id":21238708,"display_name":"Jatin guglani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1695282006,"creation_date":1695282006,"question_id":77148124,"body_markdown":"I have an EditView in which I have set the below OnKeyListener to record the ctrl + left arrow key and ctrl + right arrow key.\r\n\r\n            val MyKeyListener: View.OnKeyListener\r\n\r\n        MyKeyListener = object : View.OnKeyListener {\r\n\r\n            override fun onKey (v: View?, keyCode: Int, event: KeyEvent?): Boolean\r\n            {\r\n                if (event?.action == KeyEvent.ACTION_DOWN) {\r\n\r\n                     if (keyCode == KeyEvent.KEYCODE_DPAD_LEFT) {\r\n\r\n                         Log.d (&quot;Key&quot;, &quot;left arrow&quot;)\r\n\r\n                         if (event.isCtrlPressed) {\r\n\r\n                             Log.d (&quot;Key&quot;, &quot;cntl + left&quot;)\r\n                             return true\r\n                         }\r\n\r\n                    } else if (keyCode == KeyEvent.KEYCODE_DPAD_RIGHT) {\r\n\r\n                         Log.d (&quot;Key&quot;, &quot;right arrow&quot;)\r\n\r\n                        if (event.isCtrlPressed) {\r\n\r\n                            Log.d (&quot;Key&quot;, &quot;cntl + right&quot;)\r\n                            return true\r\n                        }\r\n                    } \r\n                }\r\n                return false\r\n            }\r\n\r\n        }\r\n        textfeild.setOnKeyListener(MyKeyListener)\r\n\r\nI&#39;m able to get only the left/right arrow click log i.e. if (keyCode == KeyEvent.KEYCODE_DPAD_LEFT) is true but not able to get (ctrl + left)/(ctrl + right) log.\r\n\r\nThe Android docs also specify the same way to handle modifier keys: https://developer.android.com/develop/ui/views/touch-and-input/keyboard-input/commands#ModifierKey\r\n\r\nbut it&#39;s doesn&#39;t seem to be working in my case, could anyone tell me why and what&#39;s the solution to handle modifier keys?\r\n\r\n(I have also tried the same thing with event.isShiftPressed, but it&#39;s again not working)\r\n","title":"Unable to handle(Keypress) modifier keys in android studio&#39;s emulator","body":"<p>I have an EditView in which I have set the below OnKeyListener to record the ctrl + left arrow key and ctrl + right arrow key.</p>\n<pre><code>        val MyKeyListener: View.OnKeyListener\n\n    MyKeyListener = object : View.OnKeyListener {\n\n        override fun onKey (v: View?, keyCode: Int, event: KeyEvent?): Boolean\n        {\n            if (event?.action == KeyEvent.ACTION_DOWN) {\n\n                 if (keyCode == KeyEvent.KEYCODE_DPAD_LEFT) {\n\n                     Log.d (&quot;Key&quot;, &quot;left arrow&quot;)\n\n                     if (event.isCtrlPressed) {\n\n                         Log.d (&quot;Key&quot;, &quot;cntl + left&quot;)\n                         return true\n                     }\n\n                } else if (keyCode == KeyEvent.KEYCODE_DPAD_RIGHT) {\n\n                     Log.d (&quot;Key&quot;, &quot;right arrow&quot;)\n\n                    if (event.isCtrlPressed) {\n\n                        Log.d (&quot;Key&quot;, &quot;cntl + right&quot;)\n                        return true\n                    }\n                } \n            }\n            return false\n        }\n\n    }\n    textfeild.setOnKeyListener(MyKeyListener)\n</code></pre>\n<p>I'm able to get only the left/right arrow click log i.e. if (keyCode == KeyEvent.KEYCODE_DPAD_LEFT) is true but not able to get (ctrl + left)/(ctrl + right) log.</p>\n<p>The Android docs also specify the same way to handle modifier keys: <a href=\"https://developer.android.com/develop/ui/views/touch-and-input/keyboard-input/commands#ModifierKey\" rel=\"nofollow noreferrer\">https://developer.android.com/develop/ui/views/touch-and-input/keyboard-input/commands#ModifierKey</a></p>\n<p>but it's doesn't seem to be working in my case, could anyone tell me why and what's the solution to handle modifier keys?</p>\n<p>(I have also tried the same thing with event.isShiftPressed, but it's again not working)</p>\n"},{"tags":["java","mysql","spring","error-handling","runtime-error"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1695281754,"post_id":77148083,"comment_id":136004105,"body_markdown":"honestly, if this is your code, I&#39;m surprised it compiles","body":"honestly, if this is your code, I&#39;m surprised it compiles"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1695283759,"post_id":77148083,"comment_id":136004504,"body_markdown":"The exception message tells you that the field (or variable) `jdbcMapping` is null - most probably because you never initialize it (or because you didn&#39;t configure your beans correctly)","body":"The exception message tells you that the field (or variable) <code>jdbcMapping</code> is null - most probably because you never initialize it (or because you didn&#39;t configure your beans correctly)"}],"owner":{"account_id":28986737,"reputation":1,"user_id":22203405,"display_name":"Bhoma Ram"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":201,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695282012,"answer_count":0,"score":0,"last_activity_date":1695281686,"creation_date":1695281630,"question_id":77148083,"body_markdown":"this is the problem while I am hitting api it will give this error\r\n\r\n    java.lang.NullPointerException: Cannot invoke &quot;org.hibernate.metamodel.mapping.JdbcMapping.getJdbcValueBinder()&quot; because &quot;jdbcMapping&quot; is null\r\n    \tat org.hibernate.sql.exec.internal.AbstractJdbcParameter.bindParameterValue(AbstractJdbcParameter.java:118) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.sql.exec.internal.AbstractJdbcParameter.bindParameterValue(AbstractJdbcParameter.java:108) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.bindParameters(DeferredResultSetAccess.java:199) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:228) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:163) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.sql.results.jdbc.internal.AbstractResultSetAccess.getMetaData(AbstractResultSetAccess.java:36) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.sql.results.jdbc.internal.AbstractResultSetAccess.getColumnCount(AbstractResultSetAccess.java:52) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.query.results.ResultSetMappingImpl.resolve(ResultSetMappingImpl.java:193) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:477) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n\r\n\r\n\r\n\r\n    @GetMapping(&quot;/get_product_by_category_and_price_greater_than&quot;)\r\n    List&lt;Product&gt;products  \r\n    @Query(value = &quot;select p from Product p where p.price &gt;= :price and p.catagory = :catagory&quot;, nativeQuery = true)\r\n\r\nI expect a product list from which price is greater then given price\r\n","title":"Why null pointer exception was giving in jQuary section please give me brief explanation","body":"<p>this is the problem while I am hitting api it will give this error</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;org.hibernate.metamodel.mapping.JdbcMapping.getJdbcValueBinder()&quot; because &quot;jdbcMapping&quot; is null\n    at org.hibernate.sql.exec.internal.AbstractJdbcParameter.bindParameterValue(AbstractJdbcParameter.java:118) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.sql.exec.internal.AbstractJdbcParameter.bindParameterValue(AbstractJdbcParameter.java:108) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.bindParameters(DeferredResultSetAccess.java:199) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:228) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:163) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.sql.results.jdbc.internal.AbstractResultSetAccess.getMetaData(AbstractResultSetAccess.java:36) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.sql.results.jdbc.internal.AbstractResultSetAccess.getColumnCount(AbstractResultSetAccess.java:52) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.query.results.ResultSetMappingImpl.resolve(ResultSetMappingImpl.java:193) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:477) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n\n\n\n\n@GetMapping(&quot;/get_product_by_category_and_price_greater_than&quot;)\nList&lt;Product&gt;products  \n@Query(value = &quot;select p from Product p where p.price &gt;= :price and p.catagory = :catagory&quot;, nativeQuery = true)\n</code></pre>\n<p>I expect a product list from which price is greater then given price</p>\n"},{"tags":["java","google-bigquery","dataflow","google-compute-engine"],"answers":[{"tags":[],"owner":{"account_id":9807938,"reputation":21,"user_id":7267078,"display_name":""},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1481793499,"creation_date":1481710361,"answer_id":41139960,"question_id":41135892,"body_markdown":"I resolve this problem myself.\r\nFor someone who encounter same problem like me.\r\n\r\nTo correct this, you may check permission is set on each project. Permission is set each account even though it`s service account. I mean you should check accounts both GCP login account and service account is added as a member to each project.\r\nIn my case, I added a GCP login account but not service account.\r\n\r\nI hope this help you","title":"&quot;Access Denied&quot; when trying to access BigQuery on GCE","body":"<p>I resolve this problem myself.\nFor someone who encounter same problem like me.</p>\n\n<p>To correct this, you may check permission is set on each project. Permission is set each account even though it`s service account. I mean you should check accounts both GCP login account and service account is added as a member to each project.\nIn my case, I added a GCP login account but not service account.</p>\n\n<p>I hope this help you</p>\n"},{"tags":[],"owner":{"account_id":29498133,"reputation":1,"user_id":22605720,"display_name":"Raviteja S"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695281451,"creation_date":1695281451,"answer_id":77148065,"question_id":41135892,"body_markdown":"I got it resolved by providing the the Service Account &quot;Storage Admin&quot; permission. More finer access control should be explored.","title":"&quot;Access Denied&quot; when trying to access BigQuery on GCE","body":"<p>I got it resolved by providing the the Service Account &quot;Storage Admin&quot; permission. More finer access control should be explored.</p>\n"}],"owner":{"account_id":9807938,"reputation":21,"user_id":7267078,"display_name":""},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2603,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695281451,"creation_date":1481695696,"question_id":41135892,"body_markdown":"I developed and built a jar file is processing read from two BigQuery tables and then write it another BigQuery table.\r\n(There are three GCP projects and each project has own BigQuery table.)\r\nThe jar file is a result building and packaging by Maven. I used Dataflow SDK dependency. \r\n\r\nAfter building a jar file, I tested it on my Mac and I checked it works well.\r\nAnd then, I uploaded a jar file to GCE and tested it again. I thought it would work well but it occurs some error like this :\r\n\r\ncom.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden\r\n{\r\n  &quot;code&quot; : 403,\r\n  &quot;errors&quot; : [ {\r\n    &quot;domain&quot; : &quot;global&quot;,\r\n    &quot;message&quot; : &quot;Access Denied: Dataset ${PROJECT_ID}:${DATASET_ID}: The user ${MY_ACCOUNT_ID} does not have bigquery.tables.list permission for dataset ${PROJECT_ID}:${DATASET_ID}.&quot;,\r\n    &quot;reason&quot; : &quot;accessDenied\r\n....\r\n}\r\n\r\nWhen I created GCE instance, I set service account properly. I am sure it`s not about this.\r\n\r\nI do not understand why same jar runs differently, makes error or not?\r\n\r\nThe account on testing is member or owner of three projects.\r\nBefore testing, I use this commands on my Mac and GCE :\r\n\r\n 1. gcloud auth login\r\n 2. gcloud config set project rgpkorea-datalake\r\n 3. gcloud auth application-default login\r\n\r\nIn Java project, I created credential object and build BigQuery service with credential object.\r\n \r\n    GoogleCredential credential = GoogleCredential.getApplicationDefault(HTTP_TRANSPORT, JSON_FACTORY);\r\n    Bigquery bigquery = new Bigquery.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential)\r\n                    .setApplicationName(&quot;BdtAndroidGaSessionMigrator&quot; + CalendarUtil.getYesterdayAsDateFormat()).build();\r\n    List&lt;Tables&gt; tableList = bigquery.tables().list(&quot;${PROJECT_ID}&quot;, &quot;${DATASET_ID}&quot;).setMaxResults(9999999L).execute().getTables();\r\n\r\nFor security, I replaced project id and dataset id as EL expression.\r\n\r\nAs you know as, &quot;gcloud init&quot; command is supported on Google-Cloud-SDK. I also tried &quot;gcloud init&quot; command, but result is not different.\r\nIn my guess, above commands work differently depends on environments such as GCP instance or local machine.\r\n\r\nHow do I resolve &quot;Access denied&quot; issue? please help this.\r\n\r\nP.S.\r\nForgive my poor English.\r\nI doubt my English presents what I have problem to you exactly.","title":"&quot;Access Denied&quot; when trying to access BigQuery on GCE","body":"<p>I developed and built a jar file is processing read from two BigQuery tables and then write it another BigQuery table.\n(There are three GCP projects and each project has own BigQuery table.)\nThe jar file is a result building and packaging by Maven. I used Dataflow SDK dependency. </p>\n\n<p>After building a jar file, I tested it on my Mac and I checked it works well.\nAnd then, I uploaded a jar file to GCE and tested it again. I thought it would work well but it occurs some error like this :</p>\n\n<p>com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden\n{\n  \"code\" : 403,\n  \"errors\" : [ {\n    \"domain\" : \"global\",\n    \"message\" : \"Access Denied: Dataset ${PROJECT_ID}:${DATASET_ID}: The user ${MY_ACCOUNT_ID} does not have bigquery.tables.list permission for dataset ${PROJECT_ID}:${DATASET_ID}.\",\n    \"reason\" : \"accessDenied\n....\n}</p>\n\n<p>When I created GCE instance, I set service account properly. I am sure it`s not about this.</p>\n\n<p>I do not understand why same jar runs differently, makes error or not?</p>\n\n<p>The account on testing is member or owner of three projects.\nBefore testing, I use this commands on my Mac and GCE :</p>\n\n<ol>\n<li>gcloud auth login</li>\n<li>gcloud config set project rgpkorea-datalake</li>\n<li>gcloud auth application-default login</li>\n</ol>\n\n<p>In Java project, I created credential object and build BigQuery service with credential object.</p>\n\n<pre><code>GoogleCredential credential = GoogleCredential.getApplicationDefault(HTTP_TRANSPORT, JSON_FACTORY);\nBigquery bigquery = new Bigquery.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential)\n                .setApplicationName(\"BdtAndroidGaSessionMigrator\" + CalendarUtil.getYesterdayAsDateFormat()).build();\nList&lt;Tables&gt; tableList = bigquery.tables().list(\"${PROJECT_ID}\", \"${DATASET_ID}\").setMaxResults(9999999L).execute().getTables();\n</code></pre>\n\n<p>For security, I replaced project id and dataset id as EL expression.</p>\n\n<p>As you know as, \"gcloud init\" command is supported on Google-Cloud-SDK. I also tried \"gcloud init\" command, but result is not different.\nIn my guess, above commands work differently depends on environments such as GCP instance or local machine.</p>\n\n<p>How do I resolve \"Access denied\" issue? please help this.</p>\n\n<p>P.S.\nForgive my poor English.\nI doubt my English presents what I have problem to you exactly.</p>\n"},{"tags":["java","android"],"owner":{"account_id":21597414,"reputation":75,"user_id":19374684,"display_name":"Michele Bolognini"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695280860,"creation_date":1695217679,"question_id":77143107,"body_markdown":"I am writing an Android App for which the user is required to connect an external storage through the USB-C port of a tablet.\r\nOnce operations on the external storage are complete, I would like the user to unmount the USB device correctly, which means he should either:\r\n1) tap the &quot;unmount&quot; button in the &quot;USB storage added&quot; notification that automatically appears as soon as the device is connected.\r\n2) Open the Storage settings page, tap on the external USB device and press &quot;unmount&quot;.\r\n\r\nIdeally, this process would be quick and as automated as possible. My understanding from reading other questions is that I cannot re-implement in my app the functionality of the button in option 1, because apps are not allowed to mount and unmount storage units.\r\nWhat I can do is open the settings page [ACTION_MEMORY_CARD_SETTINGS][1], except on Android API level 33+ this specific action does not open the Storage settings anymore, but the *Internal Storage* settings. So I have two questions:\r\n\r\n- Is there an easier way of unmounting the storage for the user?\r\n- In case there is not, is there an equivalent action to ACTION_MEMORY_CARD_SETTINGS for API level 33+, that opens the specific memory setting page where a user can unmount an *external* USB device?\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/provider/Settings#ACTION_MEMORY_CARD_SETTINGS","title":"Prompt the user to unmount a USB device","body":"<p>I am writing an Android App for which the user is required to connect an external storage through the USB-C port of a tablet.\nOnce operations on the external storage are complete, I would like the user to unmount the USB device correctly, which means he should either:</p>\n<ol>\n<li>tap the &quot;unmount&quot; button in the &quot;USB storage added&quot; notification that automatically appears as soon as the device is connected.</li>\n<li>Open the Storage settings page, tap on the external USB device and press &quot;unmount&quot;.</li>\n</ol>\n<p>Ideally, this process would be quick and as automated as possible. My understanding from reading other questions is that I cannot re-implement in my app the functionality of the button in option 1, because apps are not allowed to mount and unmount storage units.\nWhat I can do is open the settings page <a href=\"https://developer.android.com/reference/android/provider/Settings#ACTION_MEMORY_CARD_SETTINGS\" rel=\"nofollow noreferrer\">ACTION_MEMORY_CARD_SETTINGS</a>, except on Android API level 33+ this specific action does not open the Storage settings anymore, but the <em>Internal Storage</em> settings. So I have two questions:</p>\n<ul>\n<li>Is there an easier way of unmounting the storage for the user?</li>\n<li>In case there is not, is there an equivalent action to ACTION_MEMORY_CARD_SETTINGS for API level 33+, that opens the specific memory setting page where a user can unmount an <em>external</em> USB device?</li>\n</ul>\n"},{"tags":["java","quarkus","mutiny"],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695382879,"post_id":77146850,"comment_id":136020562,"body_markdown":"As its currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As its currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/77146850/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":27690871,"reputation":1,"user_id":21137607,"display_name":"eksklyuzyv"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695274238,"creation_date":1695263179,"answer_id":77146850,"question_id":77133693,"body_markdown":"To make it happen, just try this: \r\n```\r\nUni.createFrom().&lt;Void&gt;item(Unchecked.supplier(() -&gt; {\r\n            minioClient.setBucketLifecycle(SetBucketLifecycleArgs.builder().config(lifecycleConfiguration).bucket(bucketName).build());\r\n            return null;\r\n        }))\r\n        .onFailure().transform(e -&gt; new CommonSystemErrorException(&quot;Failed to set MinIO bucket life cycle configuration&quot;, e))\r\n        .await().indefinitely();\r\n```","title":"How to use Smallrye Mutiny to call a void method which throws checked exceptions","body":"<p>To make it happen, just try this:</p>\n<pre><code>Uni.createFrom().&lt;Void&gt;item(Unchecked.supplier(() -&gt; {\n            minioClient.setBucketLifecycle(SetBucketLifecycleArgs.builder().config(lifecycleConfiguration).bucket(bucketName).build());\n            return null;\n        }))\n        .onFailure().transform(e -&gt; new CommonSystemErrorException(&quot;Failed to set MinIO bucket life cycle configuration&quot;, e))\n        .await().indefinitely();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3568344,"reputation":639,"user_id":2979325,"display_name":"Serkan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695280598,"creation_date":1695280150,"answer_id":77147924,"question_id":77133693,"body_markdown":"Easiest way is to call it like this:\r\n\r\n    public Uni&lt;Void&gt; foo() {\r\n       return Uni.createFrom().voidItem().invoke(() -&gt; yourVoidMethod());\r\n    }\r\n\r\nOr if you want to catch any exceptions from your void method then you can call it like this:\r\n\r\n    public Uni&lt;Void&gt; foo() {\r\n       return Uni.createFrom().voidItem().invoke(Unchecked.consumer(x -&gt; yourVoidMethod()));\r\n    }\r\n\r\n","title":"How to use Smallrye Mutiny to call a void method which throws checked exceptions","body":"<p>Easiest way is to call it like this:</p>\n<pre><code>public Uni&lt;Void&gt; foo() {\n   return Uni.createFrom().voidItem().invoke(() -&gt; yourVoidMethod());\n}\n</code></pre>\n<p>Or if you want to catch any exceptions from your void method then you can call it like this:</p>\n<pre><code>public Uni&lt;Void&gt; foo() {\n   return Uni.createFrom().voidItem().invoke(Unchecked.consumer(x -&gt; yourVoidMethod()));\n}\n</code></pre>\n"}],"owner":{"account_id":16559898,"reputation":47,"user_id":11966054,"display_name":"EthanStudent"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695280598,"creation_date":1695118710,"question_id":77133693,"body_markdown":"When using Smallrye Mutiny to handle exceptions, the imperative code becomes more fluent. I can even call methods that throw checked exceptions by using ```Unchecked.supplier()``` to handle them: \r\n```\r\nLifecycleConfiguration lifecycleConfiguration = Uni.createFrom().item(Unchecked.supplier(() -&gt; minioClient.getBucketLifecycle(GetBucketLifecycleArgs.builder().bucket(bucketName).build())))\r\n        .onFailure().transform(e -&gt; new CommonSystemErrorException(&quot;Failed to get MinIO bucket life cycle configuration&quot;, e))\r\n        .await().indefinitely();\r\n```\r\nHowever, I cannot apply the same approach to methods that throw checked exceptions and return ```void```. For instance, consider the following method:\r\n```\r\npublic void setBucketLifecycle(SetBucketLifecycleArgs args) throws ErrorResponseException, InsufficientDataException, InternalException, InvalidKeyException, InvalidResponseException, IOException, NoSuchAlgorithmException, ServerException, XmlParserException {\r\n    try {\r\n        this.asyncClient.setBucketLifecycle(args).get();\r\n    } catch (InterruptedException var3) {\r\n        throw new RuntimeException(var3);\r\n    } catch (ExecutionException var4) {\r\n        this.asyncClient.throwEncapsulatedException(var4);\r\n    }\r\n\r\n}\r\n```\r\nIf I write the code below, the IDE raises alerts in two places:\r\n```\r\n//                     vvvv IDE alerts: Cannot resolve method &#39;item(Supplier&lt;T&gt;)&#39;\r\nUni.createFrom().&lt;Void&gt;item(Unchecked.supplier(() -&gt; minioClient.setBucketLifecycle(SetBucketLifecycleArgs.builder().config(lifecycleConfiguration).bucket(bucketName).build())))\r\n//                                                   ^^^^ IDE alerts: Bad return type in lambda expression: void cannot be converted to T\r\n        .onFailure().transform(e -&gt; new CommonSystemErrorException(&quot;Failed to set MinIO bucket life cycle configuration&quot;, e))\r\n        .await().indefinitely();\r\n```\r\nIs it possible that I can call methods that throw checked exceptions and return ```void``` using Smallrye Mutiny, without additionally using try and catch?","title":"How to use Smallrye Mutiny to call a void method which throws checked exceptions","body":"<p>When using Smallrye Mutiny to handle exceptions, the imperative code becomes more fluent. I can even call methods that throw checked exceptions by using <code>Unchecked.supplier()</code> to handle them:</p>\n<pre><code>LifecycleConfiguration lifecycleConfiguration = Uni.createFrom().item(Unchecked.supplier(() -&gt; minioClient.getBucketLifecycle(GetBucketLifecycleArgs.builder().bucket(bucketName).build())))\n        .onFailure().transform(e -&gt; new CommonSystemErrorException(&quot;Failed to get MinIO bucket life cycle configuration&quot;, e))\n        .await().indefinitely();\n</code></pre>\n<p>However, I cannot apply the same approach to methods that throw checked exceptions and return <code>void</code>. For instance, consider the following method:</p>\n<pre><code>public void setBucketLifecycle(SetBucketLifecycleArgs args) throws ErrorResponseException, InsufficientDataException, InternalException, InvalidKeyException, InvalidResponseException, IOException, NoSuchAlgorithmException, ServerException, XmlParserException {\n    try {\n        this.asyncClient.setBucketLifecycle(args).get();\n    } catch (InterruptedException var3) {\n        throw new RuntimeException(var3);\n    } catch (ExecutionException var4) {\n        this.asyncClient.throwEncapsulatedException(var4);\n    }\n\n}\n</code></pre>\n<p>If I write the code below, the IDE raises alerts in two places:</p>\n<pre><code>//                     vvvv IDE alerts: Cannot resolve method 'item(Supplier&lt;T&gt;)'\nUni.createFrom().&lt;Void&gt;item(Unchecked.supplier(() -&gt; minioClient.setBucketLifecycle(SetBucketLifecycleArgs.builder().config(lifecycleConfiguration).bucket(bucketName).build())))\n//                                                   ^^^^ IDE alerts: Bad return type in lambda expression: void cannot be converted to T\n        .onFailure().transform(e -&gt; new CommonSystemErrorException(&quot;Failed to set MinIO bucket life cycle configuration&quot;, e))\n        .await().indefinitely();\n</code></pre>\n<p>Is it possible that I can call methods that throw checked exceptions and return <code>void</code> using Smallrye Mutiny, without additionally using try and catch?</p>\n"},{"tags":["java","future"],"owner":{"account_id":7473334,"reputation":1161,"user_id":5680504,"accept_rate":98,"display_name":"sclee1"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695280008,"creation_date":1695280008,"question_id":77147906,"body_markdown":"I tried to estimate the performance between async and sync.\r\nI wrote some easy async code which is reading the file and printing the result.\r\nI divided them into two parts, one is reading the file and the other is printing the result.\r\n\r\nbelow is my whole code.\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.util.concurrent.*;\r\n    import java.util.concurrent.atomic.AtomicLong;\r\n    \r\n    public class AsyncExample {\r\n    \r\n      private static AtomicLong counter = new AtomicLong(0);\r\n    \r\n      public static void main(String[] args) {\r\n        AsyncExample asyncExample = new AsyncExample();\r\n        ExecutorService executor = Executors.newFixedThreadPool(2);\r\n        ExecutorService dbExecutor = Executors.newFixedThreadPool(32);\r\n    \r\n        ClassLoader classLoader = AsyncExample.class.getClassLoader();\r\n        InputStream inputStream = classLoader.getResourceAsStream(\r\n                &quot;data_id.json&quot;);\r\n    \r\n        Long ts = System.currentTimeMillis();\r\n    \r\n        BlockingQueue&lt;String&gt; lineQueue = new LinkedBlockingQueue&lt;&gt;();\r\n    \r\n        CompletableFuture&lt;Void&gt; readFileFuture = CompletableFuture.runAsync(() -&gt; {\r\n          try (BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream))) {\r\n            String line;\r\n            while ((line = reader.readLine()) != null) {\r\n              lineQueue.offer(line);\r\n              counter.incrementAndGet();\r\n            }\r\n          } catch (IOException e) {\r\n            e.printStackTrace();\r\n          }\r\n        }, executor);\r\n    \r\n        CompletableFuture&lt;Void&gt; writeToDbFuture1 = CompletableFuture.runAsync(() -&gt; {\r\n          while (true) {\r\n            String line = lineQueue.poll();\r\n            if (line != null) {\r\n              CompletableFuture&lt;Void&gt; dbTask = CompletableFuture.runAsync(() -&gt; {\r\n                asyncExample.doTask(line);\r\n              }, dbExecutor);\r\n    \r\n              dbTask.thenAccept(result -&gt; {\r\n                System.out.println(&quot;Task is done&quot;);\r\n              });\r\n            } else if (readFileFuture.isDone()) {\r\n              if (counter.get()==0) {\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        }, dbExecutor);\r\n    \r\n        try {\r\n          readFileFuture.get();\r\n          writeToDbFuture1.get();\r\n    \r\n        } catch (Exception e) {\r\n          e.printStackTrace();\r\n        } finally {\r\n          executor.shutdown();\r\n          dbExecutor.shutdown();\r\n          Long end = System.currentTimeMillis() - ts;\r\n          System.out.println(&quot;time : &quot; + end);\r\n        }\r\n      }\r\n    \r\n      private void doTask(String line) {\r\n        try {\r\n          System.out.println(line);\r\n          Thread.sleep(500);\r\n          counter.decrementAndGet();\r\n        } catch (InterruptedException e) {\r\n          throw new RuntimeException(e);\r\n        }\r\n      }\r\n    }\r\n\r\n\r\nThe `data_is.json` looks as \r\n\r\n````\r\n1\r\n2\r\n3\r\n4\r\n5\r\n6\r\n7\r\n8\r\n9\r\n10\r\n11\r\n12\r\n13\r\n14\r\n15\r\n````\r\n\r\n\r\nThe program finished within 1 seconds because the task is parallel.\r\n\r\nTo enhance my code, I think that below code is little bit strange to me because it has nested completable future.\r\n\r\n    CompletableFuture&lt;Void&gt; writeToDbFuture1 = CompletableFuture.runAsync(() -&gt; {\r\n          while (true) {\r\n            String line = lineQueue.poll();\r\n            if (line != null) {\r\n              CompletableFuture&lt;Void&gt; dbTask = CompletableFuture.runAsync(() -&gt; {\r\n                asyncExample.doTask(line);\r\n              }, dbExecutor);\r\n    \r\n              dbTask.thenAccept(result -&gt; {\r\n                System.out.println(&quot;Task is done&quot;);\r\n              });\r\n            } else if (readFileFuture.isDone()) {\r\n              if (counter.get()==0) {\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        }, dbExecutor);\r\n\r\nSo I changed it into as below one.\r\n\r\n    CompletableFuture&lt;Void&gt; writeToDbFuture2 = CompletableFuture.runAsync(() -&gt; {\r\n      while (true) {\r\n        String line = lineQueue.poll();\r\n        if (line != null) {\r\n          asyncExample.doTask(line);\r\n        } else if (readFileFuture.isDone()) {\r\n          if (counter.get() == 0) {\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }, dbExecutor);\r\n\r\nI removed the nested and expected the result is same but it didn&#39;t.\r\n\r\nIt took about 7 secs which is similar to the sync one.\r\n\r\nFrom this observation, I have the following questions.\r\n\r\n1) Why the second one cannot be run as parallel?\r\n\r\n2) the first code is no problem in programmatic way?","title":"Confused when using the completableFuture for reading the file","body":"<p>I tried to estimate the performance between async and sync.\nI wrote some easy async code which is reading the file and printing the result.\nI divided them into two parts, one is reading the file and the other is printing the result.</p>\n<p>below is my whole code.</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.util.concurrent.*;\nimport java.util.concurrent.atomic.AtomicLong;\n\npublic class AsyncExample {\n\n  private static AtomicLong counter = new AtomicLong(0);\n\n  public static void main(String[] args) {\n    AsyncExample asyncExample = new AsyncExample();\n    ExecutorService executor = Executors.newFixedThreadPool(2);\n    ExecutorService dbExecutor = Executors.newFixedThreadPool(32);\n\n    ClassLoader classLoader = AsyncExample.class.getClassLoader();\n    InputStream inputStream = classLoader.getResourceAsStream(\n            &quot;data_id.json&quot;);\n\n    Long ts = System.currentTimeMillis();\n\n    BlockingQueue&lt;String&gt; lineQueue = new LinkedBlockingQueue&lt;&gt;();\n\n    CompletableFuture&lt;Void&gt; readFileFuture = CompletableFuture.runAsync(() -&gt; {\n      try (BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream))) {\n        String line;\n        while ((line = reader.readLine()) != null) {\n          lineQueue.offer(line);\n          counter.incrementAndGet();\n        }\n      } catch (IOException e) {\n        e.printStackTrace();\n      }\n    }, executor);\n\n    CompletableFuture&lt;Void&gt; writeToDbFuture1 = CompletableFuture.runAsync(() -&gt; {\n      while (true) {\n        String line = lineQueue.poll();\n        if (line != null) {\n          CompletableFuture&lt;Void&gt; dbTask = CompletableFuture.runAsync(() -&gt; {\n            asyncExample.doTask(line);\n          }, dbExecutor);\n\n          dbTask.thenAccept(result -&gt; {\n            System.out.println(&quot;Task is done&quot;);\n          });\n        } else if (readFileFuture.isDone()) {\n          if (counter.get()==0) {\n            break;\n          }\n        }\n      }\n    }, dbExecutor);\n\n    try {\n      readFileFuture.get();\n      writeToDbFuture1.get();\n\n    } catch (Exception e) {\n      e.printStackTrace();\n    } finally {\n      executor.shutdown();\n      dbExecutor.shutdown();\n      Long end = System.currentTimeMillis() - ts;\n      System.out.println(&quot;time : &quot; + end);\n    }\n  }\n\n  private void doTask(String line) {\n    try {\n      System.out.println(line);\n      Thread.sleep(500);\n      counter.decrementAndGet();\n    } catch (InterruptedException e) {\n      throw new RuntimeException(e);\n    }\n  }\n}\n</code></pre>\n<p>The <code>data_is.json</code> looks as</p>\n<pre><code>1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n</code></pre>\n<p>The program finished within 1 seconds because the task is parallel.</p>\n<p>To enhance my code, I think that below code is little bit strange to me because it has nested completable future.</p>\n<pre><code>CompletableFuture&lt;Void&gt; writeToDbFuture1 = CompletableFuture.runAsync(() -&gt; {\n      while (true) {\n        String line = lineQueue.poll();\n        if (line != null) {\n          CompletableFuture&lt;Void&gt; dbTask = CompletableFuture.runAsync(() -&gt; {\n            asyncExample.doTask(line);\n          }, dbExecutor);\n\n          dbTask.thenAccept(result -&gt; {\n            System.out.println(&quot;Task is done&quot;);\n          });\n        } else if (readFileFuture.isDone()) {\n          if (counter.get()==0) {\n            break;\n          }\n        }\n      }\n    }, dbExecutor);\n</code></pre>\n<p>So I changed it into as below one.</p>\n<pre><code>CompletableFuture&lt;Void&gt; writeToDbFuture2 = CompletableFuture.runAsync(() -&gt; {\n  while (true) {\n    String line = lineQueue.poll();\n    if (line != null) {\n      asyncExample.doTask(line);\n    } else if (readFileFuture.isDone()) {\n      if (counter.get() == 0) {\n        break;\n      }\n    }\n  }\n}, dbExecutor);\n</code></pre>\n<p>I removed the nested and expected the result is same but it didn't.</p>\n<p>It took about 7 secs which is similar to the sync one.</p>\n<p>From this observation, I have the following questions.</p>\n<ol>\n<li><p>Why the second one cannot be run as parallel?</p>\n</li>\n<li><p>the first code is no problem in programmatic way?</p>\n</li>\n</ol>\n"},{"tags":["java","weblogic","oracle-adf","jdeveloper"],"answers":[{"tags":[],"owner":{"account_id":371386,"reputation":3693,"user_id":719884,"display_name":"Shay Shmeltzer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1357776200,"creation_date":1357776200,"answer_id":14248682,"question_id":14193616,"body_markdown":"The easiest thing to do would be to click the debug icon instead of the run icon in JDeveloper - that will start your WebLogic in debug mode and you&#39;ll be able to debug your JSPs.\r\n\r\nhttps://blogs.oracle.com/shay/entry/introduction_to_the_adf_debugger\r\n\r\nYou can also start WebLogic itself with debug parameters \r\nhttp://www.oracle.com/technetwork/developer-tools/jdev/remotedebugwls-086628.html","title":"How to enable debug_mode for a JSP page in modern JDeveloper/Weblogic/ADF","body":"<p>The easiest thing to do would be to click the debug icon instead of the run icon in JDeveloper - that will start your WebLogic in debug mode and you'll be able to debug your JSPs.</p>\n\n<p><a href=\"https://blogs.oracle.com/shay/entry/introduction_to_the_adf_debugger\" rel=\"nofollow\">https://blogs.oracle.com/shay/entry/introduction_to_the_adf_debugger</a></p>\n\n<p>You can also start WebLogic itself with debug parameters \n<a href=\"http://www.oracle.com/technetwork/developer-tools/jdev/remotedebugwls-086628.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/developer-tools/jdev/remotedebugwls-086628.html</a></p>\n"},{"tags":[],"owner":{"account_id":2098089,"reputation":5795,"user_id":1866427,"accept_rate":67,"display_name":"lokoko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1361298337,"creation_date":1361298337,"answer_id":14964714,"question_id":14193616,"body_markdown":"As Shay mentioned, you could just debug your project instead of running it. To set the debug params, just goto :\r\n\r\n    project properties - run debug - launch settings - java options and add all your params","title":"How to enable debug_mode for a JSP page in modern JDeveloper/Weblogic/ADF","body":"<p>As Shay mentioned, you could just debug your project instead of running it. To set the debug params, just goto :</p>\n\n<pre><code>project properties - run debug - launch settings - java options and add all your params\n</code></pre>\n"},{"tags":[],"owner":{"account_id":33617,"reputation":1850,"user_id":94225,"display_name":"St.Shadow"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1471948357,"creation_date":1471948357,"answer_id":39098756,"question_id":14193616,"body_markdown":"Another option - start Weblogic in debug mode and connect to it using remote debugger from JDeveloper.","title":"How to enable debug_mode for a JSP page in modern JDeveloper/Weblogic/ADF","body":"<p>Another option - start Weblogic in debug mode and connect to it using remote debugger from JDeveloper.</p>\n"}],"owner":{"account_id":1942336,"reputation":1581,"user_id":1748237,"accept_rate":76,"display_name":"Alexander Tumin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8287,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1695279665,"creation_date":1357553005,"question_id":14193616,"body_markdown":"For  some reason, instead of target jspx page i am gettin the error\r\n\r\n    OracleJSP error: java.io.FileNotFoundException:\r\n    \r\n    Set the init-param debug_mode to &quot;true&quot; to see the complete exception message.\r\n\r\n(thats it, no file name).\r\n\r\nBut i have no idea where to set this init-param.\r\n\r\nAs far as i googled, everyone suggesting (well, back in 2001-2009 years) to set it in `global-web-application.xml` file, but it seems missing in modern JDeveloper setup.\r\n\r\nAlso ones are suggesting to add init-param in `web.xml` (which is exists), but to non-existing section:\r\n\r\n    &lt;servlet&gt;\r\n      &lt;servlet-name&gt;jsp&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;oracle.jsp.runtimev2.JspServlet&lt;/servlet-class&gt;\r\n\r\nSo i am confused. Where should i add this init-param in modern (11.1.1.6.0+) JDeveloper setups?","title":"How to enable debug_mode for a JSP page in modern JDeveloper/Weblogic/ADF","body":"<p>For  some reason, instead of target jspx page i am gettin the error</p>\n\n<pre><code>OracleJSP error: java.io.FileNotFoundException:\n\nSet the init-param debug_mode to \"true\" to see the complete exception message.\n</code></pre>\n\n<p>(thats it, no file name).</p>\n\n<p>But i have no idea where to set this init-param.</p>\n\n<p>As far as i googled, everyone suggesting (well, back in 2001-2009 years) to set it in <code>global-web-application.xml</code> file, but it seems missing in modern JDeveloper setup.</p>\n\n<p>Also ones are suggesting to add init-param in <code>web.xml</code> (which is exists), but to non-existing section:</p>\n\n<pre><code>&lt;servlet&gt;\n  &lt;servlet-name&gt;jsp&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;oracle.jsp.runtimev2.JspServlet&lt;/servlet-class&gt;\n</code></pre>\n\n<p>So i am confused. Where should i add this init-param in modern (11.1.1.6.0+) JDeveloper setups?</p>\n"},{"tags":["java","volatile","java-threads"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":3,"creation_date":1682188288,"post_id":76081253,"comment_id":134177303,"body_markdown":"`value = value + 1` requires an `AtomicInteger`, not just a volatile.","body":"<code>value = value + 1</code> requires an <code>AtomicInteger</code>, not just a volatile."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":2,"creation_date":1682188343,"post_id":76081253,"comment_id":134177313,"body_markdown":"Hi &amp; welcome! :) ..maybe...but: `thread1.start();thread1.join();thread2.start();` *is sequential* (i.e. *not parallel*)","body":"Hi &amp; welcome! :) ..maybe...but: <code>thread1.start();thread1.join();thread2.start();</code> <i>is sequential</i> (i.e. <i>not parallel</i>)"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":2,"creation_date":1682189143,"post_id":76081253,"comment_id":134177413,"body_markdown":"`volatile` makes reads and writes atomic, but not their combination.  See, for example, https://www.scaler.com/topics/volatile-keyword-in-java/.  Incrementing a volatile variable is _not_ safe and needs a full `AtomicInteger`.","body":"<code>volatile</code> makes reads and writes atomic, but not their combination.  See, for example, <a href=\"https://www.scaler.com/topics/volatile-keyword-in-java/\" rel=\"nofollow noreferrer\">scaler.com/topics/volatile-keyword-in-java</a>.  Incrementing a volatile variable is <i>not</i> safe and needs a full <code>AtomicInteger</code>."},{"owner":{"account_id":22604872,"reputation":2005,"user_id":16785907,"display_name":"Mikhail2048"},"score":0,"creation_date":1682192378,"post_id":76081253,"comment_id":134177765,"body_markdown":"@Louis Wasserman `volatile` is not about atomicity, do not please confuse others: https://stackoverflow.com/questions/19744508/volatile-vs-atomic#:~:text=Volatile%20and%20Atomic%20are%20two,on%20variables%20are%20performed%20atomically.","body":"@Louis Wasserman <code>volatile</code> is not about atomicity, do not please confuse others: <a href=\"https://stackoverflow.com/questions/19744508/volatile-vs-atomic#:~:text=Volatile%20and%20Atomic%20are%20two,on%20variables%20are%20performed%20atomically\" title=\"volatile vs atomic%23%3a%7e%3atext%3dVolatile%2520and%2520Atomic%2520are%2520two%2con%2520variables%2520are%2520performed%2520atomically\">stackoverflow.com/questions/19744508/&hellip;</a>."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1682250402,"post_id":76081253,"comment_id":134182493,"body_markdown":"Each instance of `MutliThreadExample` has its own `value`, so there is only one thread accessing it anyway; volatile isn&#39;t really necessary for your code.","body":"Each instance of <code>MutliThreadExample</code> has its own <code>value</code>, so there is only one thread accessing it anyway; volatile isn&#39;t really necessary for your code."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1695280207,"post_id":76081253,"comment_id":136003832,"body_markdown":"@Mikhail2048 - Actually, atomicity *can* come into it.  JLS 17.7 says: *&quot;For the purposes of the Java programming language memory model, a single write to a **non-volatile** long or double value is treated as two separate writes: one to each 32-bit half. This can result in a situation where a thread sees the first 32 bits of a 64-bit value from one write, and the second 32 bits from another write.&quot;*.","body":"@Mikhail2048 - Actually, atomicity <i>can</i> come into it.  JLS 17.7 says: <i>&quot;For the purposes of the Java programming language memory model, a single write to a <b>non-volatile</b> long or double value is treated as two separate writes: one to each 32-bit half. This can result in a situation where a thread sees the first 32 bits of a 64-bit value from one write, and the second 32 bits from another write.&quot;</i>."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1695280491,"post_id":76081253,"comment_id":136003879,"body_markdown":"Note that it is implementation specific whether a JVM is actually subject to &quot;word tearing&quot; issues with non-volatile `long` and `double` shared variables.","body":"Note that it is implementation specific whether a JVM is actually subject to &quot;word tearing&quot; issues with non-volatile <code>long</code> and <code>double</code> shared variables."},{"owner":{"account_id":22604872,"reputation":2005,"user_id":16785907,"display_name":"Mikhail2048"},"score":0,"creation_date":1695283080,"post_id":76081253,"comment_id":136004384,"body_markdown":"@StephenC - yes, if we are talking about the atomicity of double and long writes that&#39;s ok. But this atomicity is achieved on the CPU level on 64-bit machines, and almost all of the machines today are 64-bit, including mobile devices. I am not saying you are wrong, I am saying that the author is using a ridiculous example which is not relevant at all - he uses an integer.","body":"@StephenC - yes, if we are talking about the atomicity of double and long writes that&#39;s ok. But this atomicity is achieved on the CPU level on 64-bit machines, and almost all of the machines today are 64-bit, including mobile devices. I am not saying you are wrong, I am saying that the author is using a ridiculous example which is not relevant at all - he uses an integer."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1695284599,"post_id":76081253,"comment_id":136004678,"body_markdown":"That&#39;s not what your comment **says**.  You respond to a *general* comment about what volatile with an (incorrect) general denial.","body":"That&#39;s not what your comment <b>says</b>.  You respond to a <i>general</i> comment about what volatile with an (incorrect) general denial."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1695279636,"creation_date":1682232769,"answer_id":76083499,"question_id":76081253,"body_markdown":"&gt; Am I doing anything wrong in this ?\r\n\r\nYes.  Multiple things.\r\n\r\nFirstly, your application is effectively single-threaded (NOT multi-threaded) because of this:\r\n\r\n        thread1.start();\r\n        thread1.join();\r\n        thread2.start();\r\n\r\nWhat that says is\r\n\r\n  1.  Start thread1\r\n  2.  Wait for thread1 to finish\r\n  3.  Start thread2.\r\n\r\nSo thread1 and thread2 will not be running at the same time.\r\n\r\nSecondly, the threads do this:\r\n\r\n        Thread.sleep(1000);\r\n\r\nWhen you call `sleep`, variable values that are cached in registers, etcetera are liable to be written to main memory.  That is liable to make this code behave differently, and interfere with any observations you are attempting to make. \r\n\r\nThirdly, they do this:\r\n\r\n        System.out.println(value + &quot;-&quot; + Thread.currentThread());\r\n\r\nIn the `println` call, the I/O stack typically does some synchronization under the hood, and *that* will also interfere with the observation of `value`.  Furthermore `value` may have changed since you incremented it.\r\n\r\nFourthly, you increment the variable like this:\r\n\r\n        value = value + 1;\r\n\r\nThat is not an atomic operation, even when `value` is declared as `volatile`.  It is in fact a read operation followed by an addition followed by a write operation.  The same would be true if you wrote\r\n\r\n        value++;  // or ++value;\r\n\r\nIf two threads *actually* execute these statement simultaneously, they are liable to *occasionally* lose an increment due to the interleaving of the read, add, and write operations on the shared variable from different threads.\r\n\r\n(Declaring a variable as `volatile` gives a *happens before* relationship between a write of the variable by one thread a subsequent reads of the same variable by other threads.  But that is not sufficient to implement a counter that can be updated by two or more threads in a thread-safe fashion.   To do that you need to use `synchronized`, an `AtomicInteger` or equivalent.)\r\n\r\nFinally, you have declared `value` as an instance variable of `MutliThreadExample`, and `thread1` and `thread2` are different instances of that class.  That means that `thread1` and `thread2` are updating *different* `value` variables.  There is no shared variable, so the whole example is moot! \r\n\r\n----------------------\r\n\r\nIn summary your code produces the same output in both versions because it is not multi-threaded.  The `sleep` and `println` calls are also liable to interfere with the &quot;observations&quot;.  And the threads are updating *different* `value` variables anyway.\r\n\r\nIf you fixed all of those problems, your code is *not thread-safe*, either with the `volatile` or without it.  Neither version would be guaranteed produce either correct or incorrect answers.  They would both have non-deterministic behavior.\r\n\r\nReliably demonstrating the effects of `volatile` is difficult.  And making basic programming mistakes doesn&#39;t help.\r\n","title":"Volatile keyword not able to use properly","body":"<blockquote>\n<p>Am I doing anything wrong in this ?</p>\n</blockquote>\n<p>Yes.  Multiple things.</p>\n<p>Firstly, your application is effectively single-threaded (NOT multi-threaded) because of this:</p>\n<pre><code>    thread1.start();\n    thread1.join();\n    thread2.start();\n</code></pre>\n<p>What that says is</p>\n<ol>\n<li>Start thread1</li>\n<li>Wait for thread1 to finish</li>\n<li>Start thread2.</li>\n</ol>\n<p>So thread1 and thread2 will not be running at the same time.</p>\n<p>Secondly, the threads do this:</p>\n<pre><code>    Thread.sleep(1000);\n</code></pre>\n<p>When you call <code>sleep</code>, variable values that are cached in registers, etcetera are liable to be written to main memory.  That is liable to make this code behave differently, and interfere with any observations you are attempting to make.</p>\n<p>Thirdly, they do this:</p>\n<pre><code>    System.out.println(value + &quot;-&quot; + Thread.currentThread());\n</code></pre>\n<p>In the <code>println</code> call, the I/O stack typically does some synchronization under the hood, and <em>that</em> will also interfere with the observation of <code>value</code>.  Furthermore <code>value</code> may have changed since you incremented it.</p>\n<p>Fourthly, you increment the variable like this:</p>\n<pre><code>    value = value + 1;\n</code></pre>\n<p>That is not an atomic operation, even when <code>value</code> is declared as <code>volatile</code>.  It is in fact a read operation followed by an addition followed by a write operation.  The same would be true if you wrote</p>\n<pre><code>    value++;  // or ++value;\n</code></pre>\n<p>If two threads <em>actually</em> execute these statement simultaneously, they are liable to <em>occasionally</em> lose an increment due to the interleaving of the read, add, and write operations on the shared variable from different threads.</p>\n<p>(Declaring a variable as <code>volatile</code> gives a <em>happens before</em> relationship between a write of the variable by one thread a subsequent reads of the same variable by other threads.  But that is not sufficient to implement a counter that can be updated by two or more threads in a thread-safe fashion.   To do that you need to use <code>synchronized</code>, an <code>AtomicInteger</code> or equivalent.)</p>\n<p>Finally, you have declared <code>value</code> as an instance variable of <code>MutliThreadExample</code>, and <code>thread1</code> and <code>thread2</code> are different instances of that class.  That means that <code>thread1</code> and <code>thread2</code> are updating <em>different</em> <code>value</code> variables.  There is no shared variable, so the whole example is moot!</p>\n<hr />\n<p>In summary your code produces the same output in both versions because it is not multi-threaded.  The <code>sleep</code> and <code>println</code> calls are also liable to interfere with the &quot;observations&quot;.  And the threads are updating <em>different</em> <code>value</code> variables anyway.</p>\n<p>If you fixed all of those problems, your code is <em>not thread-safe</em>, either with the <code>volatile</code> or without it.  Neither version would be guaranteed produce either correct or incorrect answers.  They would both have non-deterministic behavior.</p>\n<p>Reliably demonstrating the effects of <code>volatile</code> is difficult.  And making basic programming mistakes doesn't help.</p>\n"}],"owner":{"account_id":28381698,"reputation":31,"user_id":21708882,"display_name":"shravan"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"closed_date":1682317390,"answer_count":1,"score":3,"last_activity_date":1695279636,"creation_date":1682187565,"question_id":76081253,"body_markdown":"I get the same output with and without the `volatile` keyword.\r\n\r\nHave I made a mistake in the code?\r\n\r\n\r\n```java \r\npublic class MutliThreadExample extends Thread{\r\n\r\n\tvolatile int value;\r\n\t\r\n\tpublic static void main(String[] args) throws InterruptedException {\r\n\t\tMutliThreadExample thread1 = new MutliThreadExample();\r\n\t\tMutliThreadExample thread2 = new MutliThreadExample();\r\n\t\tthread1.start();\r\n\t\tthread1.join();\r\n\t\tthread2.start();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void run() {\r\n\t\tfor (int i = 1; i &lt;= 5; i++) {\r\n\t\t\tvalue = value + 1;\r\n\t\t\tSystem.out.println(value + &quot;-&quot; + Thread.currentThread());\r\n\t\t\ttry {\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n```\r\n\r\nI am not able to use `volatile` keyword properly in Java.","title":"Volatile keyword not able to use properly","body":"<p>I get the same output with and without the <code>volatile</code> keyword.</p>\n<p>Have I made a mistake in the code?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MutliThreadExample extends Thread{\n\n    volatile int value;\n    \n    public static void main(String[] args) throws InterruptedException {\n        MutliThreadExample thread1 = new MutliThreadExample();\n        MutliThreadExample thread2 = new MutliThreadExample();\n        thread1.start();\n        thread1.join();\n        thread2.start();\n    }\n\n    @Override\n    public void run() {\n        for (int i = 1; i &lt;= 5; i++) {\n            value = value + 1;\n            System.out.println(value + &quot;-&quot; + Thread.currentThread());\n            try {\n                Thread.sleep(1000);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n}\n</code></pre>\n<p>I am not able to use <code>volatile</code> keyword properly in Java.</p>\n"},{"tags":["java","pdf","google-cloud-platform","itext","google-bucket"],"owner":{"account_id":10471939,"reputation":1,"user_id":7719549,"display_name":"Aamir Sheraz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695279573,"creation_date":1695279573,"question_id":77147859,"body_markdown":"I am trying to generate pdf byte array from image array and then storing in google bucket.\r\nEverything is working fine except resultant pdf page size.\r\nInput image size is reasonable (can be viewed without scrolling page) but when output file is uploaded to google bucket its size becomes more than what it had in inout image.\r\nI have to scroll to view the complete output file\r\n\r\n\r\nBelow is my code\r\n\r\n```\r\npublic static byte[] receiptImageToPdf(byte[] receipt) throws IOException, DocumentException {\r\n        Image image = Image.getInstance(receipt);\r\n        Rectangle imageSize = new Rectangle( image.getWidth() + 1f,   image.getHeight() + 1f);\r\n        image.scaleAbsolute(image.getWidth(), image.getHeight());\r\n        Document document = new Document(imageSize, 0, 0, 0, 0);\r\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n        PdfWriter writer = PdfWriter.getInstance(document, out);\r\n        document.open();\r\n        document.add(image);\r\n        document.close();\r\n        writer.close();\r\n        return out.toByteArray();\r\n    }\r\n```\r\nLater:\r\n```\r\nbyte[] pdfBytes = Util.receiptImageToPdf(imageBytes);\r\nstorage.createFrom(blobInfo, new ByteArrayInputStream(pdfBytes));\r\n```\r\n\r\n Downloaded file from google bucket\r\n[enter image description here](https://i.stack.imgur.com/T714w.jpg)\r\n\r\nI need to generate byte array and then upload to google bucket which can be fit to one page as per input image.","title":"Generate pdf byte array from image byte array with same size in java","body":"<p>I am trying to generate pdf byte array from image array and then storing in google bucket.\nEverything is working fine except resultant pdf page size.\nInput image size is reasonable (can be viewed without scrolling page) but when output file is uploaded to google bucket its size becomes more than what it had in inout image.\nI have to scroll to view the complete output file</p>\n<p>Below is my code</p>\n<pre><code>public static byte[] receiptImageToPdf(byte[] receipt) throws IOException, DocumentException {\n        Image image = Image.getInstance(receipt);\n        Rectangle imageSize = new Rectangle( image.getWidth() + 1f,   image.getHeight() + 1f);\n        image.scaleAbsolute(image.getWidth(), image.getHeight());\n        Document document = new Document(imageSize, 0, 0, 0, 0);\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\n        PdfWriter writer = PdfWriter.getInstance(document, out);\n        document.open();\n        document.add(image);\n        document.close();\n        writer.close();\n        return out.toByteArray();\n    }\n</code></pre>\n<p>Later:</p>\n<pre><code>byte[] pdfBytes = Util.receiptImageToPdf(imageBytes);\nstorage.createFrom(blobInfo, new ByteArrayInputStream(pdfBytes));\n</code></pre>\n<p>Downloaded file from google bucket\n<a href=\"https://i.stack.imgur.com/T714w.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I need to generate byte array and then upload to google bucket which can be fit to one page as per input image.</p>\n"},{"tags":["java","apache-camel","activemq"],"answers":[{"comments":[{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1695306159,"post_id":77147804,"comment_id":136009251,"body_markdown":"If this is the correct answer please mark it as such to help other folks who have this same question in the future. Thanks!","body":"If this is the correct answer please mark it as such to help other folks who have this same question in the future. Thanks!"}],"tags":[],"owner":{"account_id":7156997,"reputation":167,"user_id":5469081,"display_name":"Michal Ambro"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695279161,"creation_date":1695279161,"answer_id":77147804,"question_id":77147690,"body_markdown":"    activeMQConnectionFactory.setAlwaysSyncSend(true);\r\n\r\nhelped me and now I see messages in AMQ and it fails if it is down","title":"Camel and Active MQ connects to some local broker","body":"<pre><code>activeMQConnectionFactory.setAlwaysSyncSend(true);\n</code></pre>\n<p>helped me and now I see messages in AMQ and it fails if it is down</p>\n"}],"owner":{"account_id":7156997,"reputation":167,"user_id":5469081,"display_name":"Michal Ambro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695279161,"creation_date":1695277967,"question_id":77147690,"body_markdown":"I have camel spring boot application and I want to connect local active MQ broker. I added libraries \r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-activemq&lt;/artifactId&gt;\r\n            &lt;version&gt;${cammel.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nconfiguration\r\n\r\n      @Bean(name = &quot;activemq&quot;)\r\n      public ActiveMQComponent createComponent() {\r\n        ActiveMQConnectionFactory activeMQConnectionFactory = new ActiveMQConnectionFactory();\r\n        activeMQConnectionFactory.setBrokerURL(&quot;tcp://AP934467:61616&quot;);\r\n    \r\n    \r\n        ActiveMQComponent activeMQComponent = new ActiveMQComponent();\r\n        activeMQComponent.setConnectionFactory(activeMQConnectionFactory);\r\n        return activeMQComponent;\r\n      }\r\n\r\nand two simple flows\r\n\r\n        from(&quot;file:src/data&quot;)\r\n                .log(LoggingLevel.ERROR, &quot;Forwarding message...&quot;)\r\n                .to(&quot;activemq:queue:In.Queue&quot;);\r\n\r\n        from(&quot;activemq:queue:In.Queue&quot;)\r\n                .log(LoggingLevel.ERROR, &quot;Forwarding message again...&quot;)\r\n                .to(&quot;activemq:queue:Out.Queue&quot;);\r\n\r\nEverything works fine. It takes the file, puts it &#39;somewhere&#39; reads it and puts it to Out.Queue. The issue is, that i do not see messages in ActiveMQ. It even works if I terminate ActiveMQ on &quot;tcp://AP934467:61616&quot;. The messages are handled by something else. \r\n\r\nLog below\r\n\r\n    2023-09-21 08:11:36.126 DEBUG o.a.c.c.file.GenericFileConsumer.processExchange - About to process file: GenericFile[message1.xml] using exchange: Exchange[]\r\n    2023-09-21 08:11:36.126 ERROR route2.log - Forwarding message...\r\n    2023-09-21 08:11:36.126 DEBUG o.a.camel.processor.SendProcessor.process - &gt;&gt;&gt;&gt; activemq://queue:Out.Queue Exchange[063A6440B9046E0-0000000000000002]\r\n    2023-09-21 08:11:36.126 DEBUG o.a.c.c.j.JmsConfiguration$CamelJmsTemplate.execute - Executing callback on JMS Session: Cached JMS Session: ActiveMQSession {id=ID:AP934467-53582-1695276133517-4:1:2,started=true,closed=false} java.lang.Object@613d705a\r\n    2023-09-21 08:11:36.126 DEBUG o.a.camel.component.jms.JmsBinding.appendJmsProperty - Ignoring non primitive header: CamelFileInitialOffset of class: org.apache.camel.support.resume.Resumables$AnonymousResumable with value: org.apache.camel.support.resume.Resumables$AnonymousResumable@63c9e513\r\n    2023-09-21 08:11:36.126 DEBUG o.a.c.component.jms.JmsConfiguration.doSend - Sending JMS message to: queue://Out.Queue with message: ActiveMQBytesMessage {commandId = 0, responseRequired = false, messageId = null, originalDestination = null, originalTransactionId = null, producerId = null, destination = null, transactionId = null, expiration = 0, timestamp = 0, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = null, replyTo = null, persistent = true, type = null, priority = 0, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = {CamelFileLastModified=1693383287223, CamelFileParent=src\\data, CamelMessageTimestamp=1693383287223, CamelFilePath=src\\data\\message1.xml, CamelFileNameConsumed=message1.xml, CamelFileLength=160, CamelFileRelativePath=message1.xml, CamelFileAbsolute=false, CamelFileAbsolutePath=C:\\devenv\\IdeaProjects\\eai-cammel\\web\\src\\data\\message1.xml, CamelFileName=message1.xml, CamelFileNameOnly=message1.xml}, readOnlyProperties = false, readOnlyBody = false, droppable = false, jmsXGroupFirstForConsumer = false} ActiveMQBytesMessage{ bytesOut = org.apache.activemq.util.ByteArrayOutputStream@4bf3c3ed, dataOut = java.io.DataOutputStream@7a43afe9, dataIn = null }\r\n    2023-09-21 08:11:36.129 DEBUG o.a.activemq.broker.region.Queue.messageSent - localhost Message ID:AP934467-53582-1695276133517-4:1:2:1:2 sent to queue://Out.Queue\r\n    2023-09-21 08:11:36.130 DEBUG o.a.activemq.broker.region.Queue.doPageInForDispatch - queue://Out.Queue, subscriptions=1, memory=0%, size=1, pending=0 toPageIn: 1, force:false, Inflight: 0, pagedInMessages.size 0, pagedInPendingDispatch.size 0, enqueueCount: 2, dequeueCount: 1, memUsage:1184, maxPageSize:200\r\n    2023-09-21 08:11:36.130 DEBUG o.a.c.c.file.GenericFileOnCompletion.onCompletion - Done processing file: GenericFile[message1.xml] using exchange: Exchange[063A6440B9046E0-0000000000000002]\r\n    2023-09-21 08:11:36.131 DEBUG o.a.c.c.j.DefaultJmsMessageListenerContainer.doReceiveAndExecute - Received message of type [class org.apache.activemq.command.ActiveMQBytesMessage] from consumer [ActiveMQMessageConsumer { value=ID:AP934467-53582-1695276133517-4:1:1:1, started=true }] of session [Cached JMS Session: ActiveMQSession {id=ID:AP934467-53582-1695276133517-4:1:1,started=true,closed=false} java.lang.Object@4a1954fb]\r\n    2023-09-21 08:11:36.131 DEBUG o.a.activemq.broker.region.Queue.doPageInForDispatch - queue://Out.Queue, subscriptions=1, memory=0%, size=0, pending=0 toPageIn: 0, force:false, Inflight: 0, pagedInMessages.size 0, pagedInPendingDispatch.size 0, enqueueCount: 2, dequeueCount: 2, memUsage:0, maxPageSize:200\r\n    2023-09-21 08:11:36.131 DEBUG o.a.c.c.f.s.GenericFileProcessStrategySupport.renameFile - Renaming file: GenericFile[message1.xml] to: GenericFile[.camel\\message1.xml]\r\n    2023-09-21 08:11:36.131 DEBUG o.a.activemq.broker.region.Queue.doPageInForDispatch - queue://Out.Queue, subscriptions=1, memory=0%, size=0, pending=0 toPageIn: 0, force:false, Inflight: 0, pagedInMessages.size 0, pagedInPendingDispatch.size 0, enqueueCount: 2, dequeueCount: 2, memUsage:0, maxPageSize:200\r\n    2023-09-21 08:11:36.131 DEBUG o.a.c.c.jms.EndpointMessageListener.onMessage - activemq://queue:Out.Queue consumer received JMS message: ActiveMQBytesMessage {commandId = 11, responseRequired = true, messageId = ID:AP934467-53582-1695276133517-4:1:2:1:2, originalDestination = null, originalTransactionId = null, producerId = ID:AP934467-53582-1695276133517-4:1:2:1, destination = queue://Out.Queue, transactionId = null, expiration = 0, timestamp = 1695276696126, arrival = 0, brokerInTime = 1695276696126, brokerOutTime = 1695276696130, correlationId = null, replyTo = null, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = org.apache.activemq.util.ByteSequence@3c088eb, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 1184, properties = {CamelFileLastModified=1693383287223, CamelFileParent=src\\data, CamelMessageTimestamp=1693383287223, CamelFilePath=src\\data\\message1.xml, CamelFileNameConsumed=message1.xml, CamelFileLength=160, CamelFileRelativePath=message1.xml, CamelFileAbsolute=false, CamelFileAbsolutePath=C:\\devenv\\IdeaProjects\\eai-cammel\\web\\src\\data\\message1.xml, CamelFileName=message1.xml, CamelFileNameOnly=message1.xml}, readOnlyProperties = true, readOnlyBody = true, droppable = false, jmsXGroupFirstForConsumer = false} ActiveMQBytesMessage{ bytesOut = null, dataOut = null, dataIn = null }\r\n    2023-09-21 08:11:36.132 ERROR route3.log - Forwarding message again...\r\n    2023-09-21 08:11:36.132 DEBUG o.a.camel.processor.SendProcessor.process - &gt;&gt;&gt;&gt; activemq://queue:In.Queue Exchange[063A6440B9046E0-0000000000000003]\r\n    2023-09-21 08:11:36.132 DEBUG o.a.c.c.j.JmsConfiguration$CamelJmsTemplate.execute - Executing callback on JMS Session: Cached JMS Session: ActiveMQSession {id=ID:AP934467-53582-1695276133517-4:1:1,started=true,closed=false} java.lang.Object@4a1954fb\r\n    2023-09-21 08:11:36.132 DEBUG org.apache.camel.util.FileUtil.renameFile - Tried 1 to rename file: C:\\devenv\\IdeaProjects\\eai-cammel\\web\\src\\data\\message1.xml to: src\\data\\.camel\\message1.xml with result: true\r\n    2023-09-21 08:11:36.132 DEBUG o.a.c.component.jms.JmsConfiguration.doSend - Sending JMS message to: queue://In.Queue with message: ActiveMQBytesMessage {commandId = 0, responseRequired = false, messageId = null, originalDestination = queue://Out.Queue, originalTransactionId = null, producerId = null, destination = null, transactionId = null, expiration = 0, timestamp = 0, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = null, replyTo = null, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = {CamelFileLastModified=1693383287223, CamelFileParent=src\\data, CamelMessageTimestamp=1695276696126, CamelFilePath=src\\data\\message1.xml, CamelFileNameConsumed=message1.xml, CamelFileLength=160, CamelFileRelativePath=message1.xml, CamelJmsDeliveryMode=2, CamelFileAbsolute=false, CamelFileAbsolutePath=C:\\devenv\\IdeaProjects\\eai-cammel\\web\\src\\data\\message1.xml, CamelFileName=message1.xml, CamelFileNameOnly=message1.xml}, readOnlyProperties = false, readOnlyBody = false, droppable = false, jmsXGroupFirstForConsumer = false} ActiveMQBytesMessage{ bytesOut = org.apache.activemq.util.ByteArrayOutputStream@1af2b730, dataOut = java.io.DataOutputStream@294cf90a, dataIn = null }\r\n    2023-09-21 08:11:36.133 DEBUG o.a.activemq.broker.region.Queue.messageSent - localhost Message ID:AP934467-53582-1695276133517-4:1:1:1:2 sent to queue://In.Queue\r\n    2023-09-21 08:11:36.134 DEBUG o.a.activemq.broker.region.Queue.doPageInForDispatch - queue://In.Queue, subscriptions=0, memory=0%, size=2, pending=0 toPageIn: 1, force:false, Inflight: 0, pagedInMessages.size 1, pagedInPendingDispatch.size 1, enqueueCount: 2, dequeueCount: 0, memUsage:2368, maxPageSize:200\r\n\r\n\r\n","title":"Camel and Active MQ connects to some local broker","body":"<p>I have camel spring boot application and I want to connect local active MQ broker. I added libraries</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\n        &lt;artifactId&gt;camel-activemq&lt;/artifactId&gt;\n        &lt;version&gt;${cammel.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>configuration</p>\n<pre><code>  @Bean(name = &quot;activemq&quot;)\n  public ActiveMQComponent createComponent() {\n    ActiveMQConnectionFactory activeMQConnectionFactory = new ActiveMQConnectionFactory();\n    activeMQConnectionFactory.setBrokerURL(&quot;tcp://AP934467:61616&quot;);\n\n\n    ActiveMQComponent activeMQComponent = new ActiveMQComponent();\n    activeMQComponent.setConnectionFactory(activeMQConnectionFactory);\n    return activeMQComponent;\n  }\n</code></pre>\n<p>and two simple flows</p>\n<pre><code>    from(&quot;file:src/data&quot;)\n            .log(LoggingLevel.ERROR, &quot;Forwarding message...&quot;)\n            .to(&quot;activemq:queue:In.Queue&quot;);\n\n    from(&quot;activemq:queue:In.Queue&quot;)\n            .log(LoggingLevel.ERROR, &quot;Forwarding message again...&quot;)\n            .to(&quot;activemq:queue:Out.Queue&quot;);\n</code></pre>\n<p>Everything works fine. It takes the file, puts it 'somewhere' reads it and puts it to Out.Queue. The issue is, that i do not see messages in ActiveMQ. It even works if I terminate ActiveMQ on &quot;tcp://AP934467:61616&quot;. The messages are handled by something else.</p>\n<p>Log below</p>\n<pre><code>2023-09-21 08:11:36.126 DEBUG o.a.c.c.file.GenericFileConsumer.processExchange - About to process file: GenericFile[message1.xml] using exchange: Exchange[]\n2023-09-21 08:11:36.126 ERROR route2.log - Forwarding message...\n2023-09-21 08:11:36.126 DEBUG o.a.camel.processor.SendProcessor.process - &gt;&gt;&gt;&gt; activemq://queue:Out.Queue Exchange[063A6440B9046E0-0000000000000002]\n2023-09-21 08:11:36.126 DEBUG o.a.c.c.j.JmsConfiguration$CamelJmsTemplate.execute - Executing callback on JMS Session: Cached JMS Session: ActiveMQSession {id=ID:AP934467-53582-1695276133517-4:1:2,started=true,closed=false} java.lang.Object@613d705a\n2023-09-21 08:11:36.126 DEBUG o.a.camel.component.jms.JmsBinding.appendJmsProperty - Ignoring non primitive header: CamelFileInitialOffset of class: org.apache.camel.support.resume.Resumables$AnonymousResumable with value: org.apache.camel.support.resume.Resumables$AnonymousResumable@63c9e513\n2023-09-21 08:11:36.126 DEBUG o.a.c.component.jms.JmsConfiguration.doSend - Sending JMS message to: queue://Out.Queue with message: ActiveMQBytesMessage {commandId = 0, responseRequired = false, messageId = null, originalDestination = null, originalTransactionId = null, producerId = null, destination = null, transactionId = null, expiration = 0, timestamp = 0, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = null, replyTo = null, persistent = true, type = null, priority = 0, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = {CamelFileLastModified=1693383287223, CamelFileParent=src\\data, CamelMessageTimestamp=1693383287223, CamelFilePath=src\\data\\message1.xml, CamelFileNameConsumed=message1.xml, CamelFileLength=160, CamelFileRelativePath=message1.xml, CamelFileAbsolute=false, CamelFileAbsolutePath=C:\\devenv\\IdeaProjects\\eai-cammel\\web\\src\\data\\message1.xml, CamelFileName=message1.xml, CamelFileNameOnly=message1.xml}, readOnlyProperties = false, readOnlyBody = false, droppable = false, jmsXGroupFirstForConsumer = false} ActiveMQBytesMessage{ bytesOut = org.apache.activemq.util.ByteArrayOutputStream@4bf3c3ed, dataOut = java.io.DataOutputStream@7a43afe9, dataIn = null }\n2023-09-21 08:11:36.129 DEBUG o.a.activemq.broker.region.Queue.messageSent - localhost Message ID:AP934467-53582-1695276133517-4:1:2:1:2 sent to queue://Out.Queue\n2023-09-21 08:11:36.130 DEBUG o.a.activemq.broker.region.Queue.doPageInForDispatch - queue://Out.Queue, subscriptions=1, memory=0%, size=1, pending=0 toPageIn: 1, force:false, Inflight: 0, pagedInMessages.size 0, pagedInPendingDispatch.size 0, enqueueCount: 2, dequeueCount: 1, memUsage:1184, maxPageSize:200\n2023-09-21 08:11:36.130 DEBUG o.a.c.c.file.GenericFileOnCompletion.onCompletion - Done processing file: GenericFile[message1.xml] using exchange: Exchange[063A6440B9046E0-0000000000000002]\n2023-09-21 08:11:36.131 DEBUG o.a.c.c.j.DefaultJmsMessageListenerContainer.doReceiveAndExecute - Received message of type [class org.apache.activemq.command.ActiveMQBytesMessage] from consumer [ActiveMQMessageConsumer { value=ID:AP934467-53582-1695276133517-4:1:1:1, started=true }] of session [Cached JMS Session: ActiveMQSession {id=ID:AP934467-53582-1695276133517-4:1:1,started=true,closed=false} java.lang.Object@4a1954fb]\n2023-09-21 08:11:36.131 DEBUG o.a.activemq.broker.region.Queue.doPageInForDispatch - queue://Out.Queue, subscriptions=1, memory=0%, size=0, pending=0 toPageIn: 0, force:false, Inflight: 0, pagedInMessages.size 0, pagedInPendingDispatch.size 0, enqueueCount: 2, dequeueCount: 2, memUsage:0, maxPageSize:200\n2023-09-21 08:11:36.131 DEBUG o.a.c.c.f.s.GenericFileProcessStrategySupport.renameFile - Renaming file: GenericFile[message1.xml] to: GenericFile[.camel\\message1.xml]\n2023-09-21 08:11:36.131 DEBUG o.a.activemq.broker.region.Queue.doPageInForDispatch - queue://Out.Queue, subscriptions=1, memory=0%, size=0, pending=0 toPageIn: 0, force:false, Inflight: 0, pagedInMessages.size 0, pagedInPendingDispatch.size 0, enqueueCount: 2, dequeueCount: 2, memUsage:0, maxPageSize:200\n2023-09-21 08:11:36.131 DEBUG o.a.c.c.jms.EndpointMessageListener.onMessage - activemq://queue:Out.Queue consumer received JMS message: ActiveMQBytesMessage {commandId = 11, responseRequired = true, messageId = ID:AP934467-53582-1695276133517-4:1:2:1:2, originalDestination = null, originalTransactionId = null, producerId = ID:AP934467-53582-1695276133517-4:1:2:1, destination = queue://Out.Queue, transactionId = null, expiration = 0, timestamp = 1695276696126, arrival = 0, brokerInTime = 1695276696126, brokerOutTime = 1695276696130, correlationId = null, replyTo = null, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = org.apache.activemq.util.ByteSequence@3c088eb, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 1184, properties = {CamelFileLastModified=1693383287223, CamelFileParent=src\\data, CamelMessageTimestamp=1693383287223, CamelFilePath=src\\data\\message1.xml, CamelFileNameConsumed=message1.xml, CamelFileLength=160, CamelFileRelativePath=message1.xml, CamelFileAbsolute=false, CamelFileAbsolutePath=C:\\devenv\\IdeaProjects\\eai-cammel\\web\\src\\data\\message1.xml, CamelFileName=message1.xml, CamelFileNameOnly=message1.xml}, readOnlyProperties = true, readOnlyBody = true, droppable = false, jmsXGroupFirstForConsumer = false} ActiveMQBytesMessage{ bytesOut = null, dataOut = null, dataIn = null }\n2023-09-21 08:11:36.132 ERROR route3.log - Forwarding message again...\n2023-09-21 08:11:36.132 DEBUG o.a.camel.processor.SendProcessor.process - &gt;&gt;&gt;&gt; activemq://queue:In.Queue Exchange[063A6440B9046E0-0000000000000003]\n2023-09-21 08:11:36.132 DEBUG o.a.c.c.j.JmsConfiguration$CamelJmsTemplate.execute - Executing callback on JMS Session: Cached JMS Session: ActiveMQSession {id=ID:AP934467-53582-1695276133517-4:1:1,started=true,closed=false} java.lang.Object@4a1954fb\n2023-09-21 08:11:36.132 DEBUG org.apache.camel.util.FileUtil.renameFile - Tried 1 to rename file: C:\\devenv\\IdeaProjects\\eai-cammel\\web\\src\\data\\message1.xml to: src\\data\\.camel\\message1.xml with result: true\n2023-09-21 08:11:36.132 DEBUG o.a.c.component.jms.JmsConfiguration.doSend - Sending JMS message to: queue://In.Queue with message: ActiveMQBytesMessage {commandId = 0, responseRequired = false, messageId = null, originalDestination = queue://Out.Queue, originalTransactionId = null, producerId = null, destination = null, transactionId = null, expiration = 0, timestamp = 0, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = null, replyTo = null, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = {CamelFileLastModified=1693383287223, CamelFileParent=src\\data, CamelMessageTimestamp=1695276696126, CamelFilePath=src\\data\\message1.xml, CamelFileNameConsumed=message1.xml, CamelFileLength=160, CamelFileRelativePath=message1.xml, CamelJmsDeliveryMode=2, CamelFileAbsolute=false, CamelFileAbsolutePath=C:\\devenv\\IdeaProjects\\eai-cammel\\web\\src\\data\\message1.xml, CamelFileName=message1.xml, CamelFileNameOnly=message1.xml}, readOnlyProperties = false, readOnlyBody = false, droppable = false, jmsXGroupFirstForConsumer = false} ActiveMQBytesMessage{ bytesOut = org.apache.activemq.util.ByteArrayOutputStream@1af2b730, dataOut = java.io.DataOutputStream@294cf90a, dataIn = null }\n2023-09-21 08:11:36.133 DEBUG o.a.activemq.broker.region.Queue.messageSent - localhost Message ID:AP934467-53582-1695276133517-4:1:1:1:2 sent to queue://In.Queue\n2023-09-21 08:11:36.134 DEBUG o.a.activemq.broker.region.Queue.doPageInForDispatch - queue://In.Queue, subscriptions=0, memory=0%, size=2, pending=0 toPageIn: 1, force:false, Inflight: 0, pagedInMessages.size 1, pagedInPendingDispatch.size 1, enqueueCount: 2, dequeueCount: 0, memUsage:2368, maxPageSize:200\n</code></pre>\n"},{"tags":["java","spring","spring-mvc"],"comments":[{"owner":{"account_id":1628571,"reputation":6081,"user_id":1503570,"accept_rate":51,"display_name":"lorraine batol"},"score":0,"creation_date":1550887788,"post_id":54837368,"comment_id":96449541,"body_markdown":"Might not be what you are looking for exactly, an alternative option could be: in your logging configuration, you could add an entry for AbstractHandlerExceptionResolver then set the level to DEBUG. Note that it would get rid of all your WARN logs for that class not just the one specific that you don&#39;t want","body":"Might not be what you are looking for exactly, an alternative option could be: in your logging configuration, you could add an entry for AbstractHandlerExceptionResolver then set the level to DEBUG. Note that it would get rid of all your WARN logs for that class not just the one specific that you don&#39;t want"},{"owner":{"account_id":4101203,"reputation":1539,"user_id":3366706,"accept_rate":65,"display_name":"user3366706"},"score":0,"creation_date":1551116727,"post_id":54837368,"comment_id":96514047,"body_markdown":"@lorraine Our application uses log4j2, but Spring uses some other logging I guess, Spring is not taking the log configuration from our log4j2.xml file.","body":"@lorraine Our application uses log4j2, but Spring uses some other logging I guess, Spring is not taking the log configuration from our log4j2.xml file."},{"owner":{"account_id":1628571,"reputation":6081,"user_id":1503570,"accept_rate":51,"display_name":"lorraine batol"},"score":0,"creation_date":1551117119,"post_id":54837368,"comment_id":96514232,"body_markdown":"You can override libraries log level if I&#39;m not wrong, just put an entry on your log config file.  We do it for hibernate if when we want to examine its execution by adding entry on our log config file using the hibernate class and specify level.","body":"You can override libraries log level if I&#39;m not wrong, just put an entry on your log config file.  We do it for hibernate if when we want to examine its execution by adding entry on our log config file using the hibernate class and specify level."}],"answers":[{"tags":[],"owner":{"account_id":14600138,"reputation":250,"user_id":10544615,"display_name":"Centos"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1555669152,"creation_date":1555669152,"answer_id":55760310,"question_id":54837368,"body_markdown":"You can disable this warning log in your logback configuration,\r\nby specifying in my case in &#39;logback-spring.groovy&#39; following line\r\n\r\n    logger(&quot;org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver&quot;, ERROR)","title":"Disable WARN logging from AbstractHandlerExceptionResolver in Spring","body":"<p>You can disable this warning log in your logback configuration,\nby specifying in my case in 'logback-spring.groovy' following line</p>\n\n<pre><code>logger(\"org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver\", ERROR)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1612811168,"creation_date":1612811168,"answer_id":66107778,"question_id":54837368,"body_markdown":"You mentioned `spring.mvc.log-resolved-exception=false` as a possible solution:\r\n\r\n&gt; Also, I see on google to set this property &quot;spring.mvc.log-resolved-exception=false&quot; to disable warning, but not sure where/how to set it.\r\n\r\nThe `spring.mvc.log-resolved-exception` property is a [Spring Boot property](https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#spring.mvc.log-resolved-exception), and would be set using standard Spring Boot [externalized configuration](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config) mechanisms.  Enabling the property causes Spring Boot to configure `HandlerExceptionResolver` beans to log exceptions when they otherwise wouldn&#39;t.\r\n\r\n&gt; Whether to enable warn logging of exceptions resolved by a &quot;HandlerExceptionResolver&quot;, except for &quot;DefaultHandlerExceptionResolver&quot;.\r\n\r\nSince you&#39;ve stated you&#39;re not using Spring Boot, this property is not applicable to your scenario.","title":"Disable WARN logging from AbstractHandlerExceptionResolver in Spring","body":"<p>You mentioned <code>spring.mvc.log-resolved-exception=false</code> as a possible solution:</p>\n<blockquote>\n<p>Also, I see on google to set this property &quot;spring.mvc.log-resolved-exception=false&quot; to disable warning, but not sure where/how to set it.</p>\n</blockquote>\n<p>The <code>spring.mvc.log-resolved-exception</code> property is a <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#spring.mvc.log-resolved-exception\" rel=\"noreferrer\">Spring Boot property</a>, and would be set using standard Spring Boot <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config\" rel=\"noreferrer\">externalized configuration</a> mechanisms.  Enabling the property causes Spring Boot to configure <code>HandlerExceptionResolver</code> beans to log exceptions when they otherwise wouldn't.</p>\n<blockquote>\n<p>Whether to enable warn logging of exceptions resolved by a &quot;HandlerExceptionResolver&quot;, except for &quot;DefaultHandlerExceptionResolver&quot;.</p>\n</blockquote>\n<p>Since you've stated you're not using Spring Boot, this property is not applicable to your scenario.</p>\n"},{"tags":[],"owner":{"account_id":29497803,"reputation":1,"user_id":22605474,"display_name":"Trifolium"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695279053,"creation_date":1695279053,"answer_id":77147791,"question_id":54837368,"body_markdown":"When introducing spring-boot-devtools in Spring Boot, the log-resolved-exception will be automatically enabled. To disable it, you need to set `spring.mvc.log-resolved-exception: false` in the profile file. In the production environment where devtools does not exist, you dont need to worry about this issue.","title":"Disable WARN logging from AbstractHandlerExceptionResolver in Spring","body":"<p>When introducing spring-boot-devtools in Spring Boot, the log-resolved-exception will be automatically enabled. To disable it, you need to set <code>spring.mvc.log-resolved-exception: false</code> in the profile file. In the production environment where devtools does not exist, you dont need to worry about this issue.</p>\n"}],"owner":{"account_id":4101203,"reputation":1539,"user_id":3366706,"accept_rate":65,"display_name":"user3366706"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3573,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1695279053,"creation_date":1550885718,"question_id":54837368,"body_markdown":"Below exception handler that is common for all my controllers, is working fine except that I need to disable the WARN log from `AbstractHandlerExceptionResolver` class after processing the exception. Using Spring Web MVC 5.x version.\r\n\r\n\r\n```lang-java\r\n@ControllerAdvice\r\npublic class AllExceptionHandler{\r\n    @ExceptionHandler(SomeCustomException.class)\r\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\r\n    public void exceptionHandler() {\r\n    }\r\n}\r\n```\r\n\r\nThis is the log that is generated which I&#39;m trying to avoid:\r\n&gt; 02-20-2019 15:22:54,896  WARN [http-nio-8080-exec-1] (AbstractHandlerExceptionResolver.java:140) - Resolved [com.rasa.rrt.ste.controller.SomeCustomException]\r\n\r\nI&#39;m not using Spring Boot.\r\n\r\nTried to extend the above `AllExceptionHandler` class with  `ExceptionHandlerExceptionResolver` and call `warnLogCategory(null)` in the `AllExceptionHandler` constructor, but it throws `NullPointerException`.\r\n\r\nAlso, I see on Google to set this property `spring.mvc.log-resolved-exception=false` to disable warning, but not sure where/how to set it.\r\n","title":"Disable WARN logging from AbstractHandlerExceptionResolver in Spring","body":"<p>Below exception handler that is common for all my controllers, is working fine except that I need to disable the WARN log from <code>AbstractHandlerExceptionResolver</code> class after processing the exception. Using Spring Web MVC 5.x version.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ControllerAdvice\npublic class AllExceptionHandler{\n    @ExceptionHandler(SomeCustomException.class)\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\n    public void exceptionHandler() {\n    }\n}\n</code></pre>\n<p>This is the log that is generated which I'm trying to avoid:</p>\n<blockquote>\n<p>02-20-2019 15:22:54,896  WARN [http-nio-8080-exec-1] (AbstractHandlerExceptionResolver.java:140) - Resolved [com.rasa.rrt.ste.controller.SomeCustomException]</p>\n</blockquote>\n<p>I'm not using Spring Boot.</p>\n<p>Tried to extend the above <code>AllExceptionHandler</code> class with  <code>ExceptionHandlerExceptionResolver</code> and call <code>warnLogCategory(null)</code> in the <code>AllExceptionHandler</code> constructor, but it throws <code>NullPointerException</code>.</p>\n<p>Also, I see on Google to set this property <code>spring.mvc.log-resolved-exception=false</code> to disable warning, but not sure where/how to set it.</p>\n"},{"tags":["java","maven","gitlab"],"owner":{"account_id":12063747,"reputation":297,"user_id":8821759,"display_name":"tarmogoyf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695278153,"creation_date":1695186886,"question_id":77139457,"body_markdown":"I struggle with Maven fetching dependency from Gitlab package repository: \r\n- I run &#39;mvn clean install&#39;, then get:\r\n\r\n```\r\n[WARNING] Checksum validation failed, expected &#39;&lt;!DOCTYPE&#39; (REMOTE_EXTERNAL) but is &gt;actually &#39;86eb59572f3ab956e455569321e8a82df68bb7d1&#39; from gitlab-maven for foo.jar\r\n```\r\n\r\n- and compilation then falls with:\r\n\r\n```\r\norg.eclipse.aether.transfer.ChecksumFailureException: Checksum validation failed, &gt;expected &#39;&lt;!DOCTYPE&#39; (REMOTE_EXTERNAL) but is actually &#39;37aa76a5d2b8d41249421e35470ca14c5e6a0b69&#39;\r\n   at org.eclipse.aether.connector.basic.ChecksumValidator.validateExternalChecksums &gt;(ChecksumValidator.java:179)\r\n    at org.eclipse.aether.connector.basic.ChecksumValidator.validate (ChecksumValidator.java:109)\r\n    at org.eclipse.aether.connector.basic.BasicRepositoryConnector$GetTaskRunner.runTask (BasicRepositoryConnector.java:484)\r\n```\r\n\r\n\r\n- My maven repository is configured like that:\r\n\r\n```\r\n&lt;repositories&gt;\r\n    &lt;repository&gt;\r\n        &lt;id&gt;gitlab-maven&lt;/id&gt;\r\n        &lt;url&gt;https://gitlab.foo.bar/company_name/-/packages/&lt;/url&gt;\r\n        &lt;snapshots&gt;\r\n            &lt;enabled&gt;false&lt;/enabled&gt;\r\n        &lt;/snapshots&gt;\r\n    &lt;/repository&gt;\r\n&lt;/repositories&gt;\r\n&lt;distributionManagement&gt;\r\n     &lt;repository&gt;\r\n            &lt;id&gt;gitlab-maven&lt;/id&gt;\r\n            &lt;url&gt;https://gitlab.foo.bar/company_name/-/packages&lt;/url&gt;\r\n     &lt;/repository&gt;\r\n     &lt;snapshotRepository&gt;\r\n            &lt;id&gt;gitlab-maven&lt;/id&gt;\r\n            &lt;url&gt;https://gitlab.foo.bar/company_name/-/packages&lt;/url&gt;\r\n     &lt;/snapshotRepository&gt;\r\n&lt;/distributionManagement&gt;\r\n```\r\nI added personal access token to my settings.xml, with all possible permissions to Gitlab repo:\r\n\r\n```\r\n&lt;servers&gt;\r\n    &lt;server&gt;\r\n      &lt;id&gt;gitlab-maven&lt;/id&gt;\r\n      &lt;configuration&gt;\r\n        &lt;httpHeaders&gt;\r\n          &lt;property&gt;\r\n            &lt;name&gt;Private-Token&lt;/name&gt;\r\n            &lt;value&gt;*********&lt;/value&gt;\r\n          &lt;/property&gt;\r\n        &lt;/httpHeaders&gt;\r\n      &lt;/configuration&gt;\r\n    &lt;/server&gt;\r\n&lt;/servers&gt;\r\n```\r\n\r\nIt seems that foo.jar file is ok, since I am capable to load it on my own and install it using  **mvn install:install-file**\r\nI would appreciate any advice to resolve the problem.","title":"Checksum failed for gitlab artefact","body":"<p>I struggle with Maven fetching dependency from Gitlab package repository:</p>\n<ul>\n<li>I run 'mvn clean install', then get:</li>\n</ul>\n<pre><code>[WARNING] Checksum validation failed, expected '&lt;!DOCTYPE' (REMOTE_EXTERNAL) but is &gt;actually '86eb59572f3ab956e455569321e8a82df68bb7d1' from gitlab-maven for foo.jar\n</code></pre>\n<ul>\n<li>and compilation then falls with:</li>\n</ul>\n<pre><code>org.eclipse.aether.transfer.ChecksumFailureException: Checksum validation failed, &gt;expected '&lt;!DOCTYPE' (REMOTE_EXTERNAL) but is actually '37aa76a5d2b8d41249421e35470ca14c5e6a0b69'\n   at org.eclipse.aether.connector.basic.ChecksumValidator.validateExternalChecksums &gt;(ChecksumValidator.java:179)\n    at org.eclipse.aether.connector.basic.ChecksumValidator.validate (ChecksumValidator.java:109)\n    at org.eclipse.aether.connector.basic.BasicRepositoryConnector$GetTaskRunner.runTask (BasicRepositoryConnector.java:484)\n</code></pre>\n<ul>\n<li>My maven repository is configured like that:</li>\n</ul>\n<pre><code>&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;gitlab-maven&lt;/id&gt;\n        &lt;url&gt;https://gitlab.foo.bar/company_name/-/packages/&lt;/url&gt;\n        &lt;snapshots&gt;\n            &lt;enabled&gt;false&lt;/enabled&gt;\n        &lt;/snapshots&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n&lt;distributionManagement&gt;\n     &lt;repository&gt;\n            &lt;id&gt;gitlab-maven&lt;/id&gt;\n            &lt;url&gt;https://gitlab.foo.bar/company_name/-/packages&lt;/url&gt;\n     &lt;/repository&gt;\n     &lt;snapshotRepository&gt;\n            &lt;id&gt;gitlab-maven&lt;/id&gt;\n            &lt;url&gt;https://gitlab.foo.bar/company_name/-/packages&lt;/url&gt;\n     &lt;/snapshotRepository&gt;\n&lt;/distributionManagement&gt;\n</code></pre>\n<p>I added personal access token to my settings.xml, with all possible permissions to Gitlab repo:</p>\n<pre><code>&lt;servers&gt;\n    &lt;server&gt;\n      &lt;id&gt;gitlab-maven&lt;/id&gt;\n      &lt;configuration&gt;\n        &lt;httpHeaders&gt;\n          &lt;property&gt;\n            &lt;name&gt;Private-Token&lt;/name&gt;\n            &lt;value&gt;*********&lt;/value&gt;\n          &lt;/property&gt;\n        &lt;/httpHeaders&gt;\n      &lt;/configuration&gt;\n    &lt;/server&gt;\n&lt;/servers&gt;\n</code></pre>\n<p>It seems that foo.jar file is ok, since I am capable to load it on my own and install it using  <strong>mvn install:install-file</strong>\nI would appreciate any advice to resolve the problem.</p>\n"},{"tags":["java","jpa","persistence","hql"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1695298427,"post_id":77147703,"comment_id":136007548,"body_markdown":"You mention it is deployed on a server, but not what server or how you&#39;ve configured it. Judging by you putting in jakarta.persistence.jdbc.url in the persistence.xml, you haven&#39;t configured this to be container managed persistence - check your logs and I&#39;m sure your server will be warning you about it not knowing what to do with your @PersistenceContext or that it is loading it with a default one instead of your named &quot;GreedTechDB&quot;","body":"You mention it is deployed on a server, but not what server or how you&#39;ve configured it. Judging by you putting in jakarta.persistence.jdbc.url in the persistence.xml, you haven&#39;t configured this to be container managed persistence - check your logs and I&#39;m sure your server will be warning you about it not knowing what to do with your @PersistenceContext or that it is loading it with a default one instead of your named &quot;GreedTechDB&quot;"},{"owner":{"account_id":10882772,"reputation":128,"user_id":8001135,"display_name":"recklessGreed"},"score":0,"creation_date":1695305622,"post_id":77147703,"comment_id":136009130,"body_markdown":"Yes i deploy the jar on a server and it is started with &quot;java -jar &quot; command in the CLI. Unfortunately i do not get any logs. Neither in Deployment nor in Debug mode on localhost","body":"Yes i deploy the jar on a server and it is started with &quot;java -jar &quot; command in the CLI. Unfortunately i do not get any logs. Neither in Deployment nor in Debug mode on localhost"},{"owner":{"account_id":14376658,"reputation":383,"user_id":10384954,"display_name":"Wladimir Diskowski"},"score":0,"creation_date":1695307754,"post_id":77147703,"comment_id":136009610,"body_markdown":"How do you create instance of MainSource? I hope not something like new MainSource()?","body":"How do you create instance of MainSource? I hope not something like new MainSource()?"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1695319045,"post_id":77147703,"comment_id":136012028,"body_markdown":"What configuration did you do so that the container will inject the &quot;GreedTechDB&quot; into your EntityManager instances? I&#39;d suggest you look at tutorials out there for your server (still not mentioned) on using JPA within it - for transactional management, you are going to need the container to manage the datasource","body":"What configuration did you do so that the container will inject the &quot;GreedTechDB&quot; into your EntityManager instances? I&#39;d suggest you look at tutorials out there for your server (still not mentioned) on using JPA within it - for transactional management, you are going to need the container to manage the datasource"}],"owner":{"account_id":10882772,"reputation":128,"user_id":8001135,"display_name":"recklessGreed"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695278112,"creation_date":1695278112,"question_id":77147703,"body_markdown":"I work on a maven project which is deployed as a runnable jar on a server.\r\n\r\nUnfortunately my EntityManager stays null if I not assign it manually.\r\n\r\nPersistence.xml \r\n```java\r\n&lt;persistence-unit name=&quot;GreedTechDB&quot;&gt;\r\n        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\r\n        &lt;shared-cache-mode&gt;NONE&lt;/shared-cache-mode&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.url&quot; value=&quot;jdbc:mysql://CORRECT_URL/GreedTechV1&quot;/&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.user&quot; value=&quot;CORRECT_USER&quot;/&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.password&quot; value=&quot;CORRECT_PASSWORD&quot;/&gt;\r\n            &lt;property name=&quot;jakarta.persistence.schema-generation.database.action&quot; value=&quot;create&quot; /&gt;\r\n            &lt;property name=&quot;hibernate.dialect&quot;    value=&quot;org.hibernate.dialect.MySQLDialect&quot; /&gt;\r\n            &lt;property name=&quot;hibernate.show_sql&quot;   value=&quot;true&quot; /&gt;\r\n            &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;true&quot; /&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n```\r\n\r\nThen in my BaseSource,java\r\n```java\r\npublic class BaseSource implements Serializable {\r\n\r\n    @Getter\r\n    @PersistenceContext\r\n    protected EntityManager em;\r\n\r\n    private JPAQueryFactory queryFactory = null;\r\n\r\n    protected JPAQueryFactory jpaQueryFactory() {\r\n        if (queryFactory == null)\r\n            queryFactory = new JPAQueryFactory(em);\r\n        //em.clear();\r\n        return queryFactory;\r\n    }\r\n}\r\n```\r\n\r\nWhen my MainSource does the most Part of Insert//Updates\r\n```java\r\npublic class MainSource extends BaseSource {\r\n\r\n    public List&lt;Streamer&gt; getChannelsToJoin() {\r\n        QStreamer qStreamer = QStreamer.streamer;\r\n        return jpaQueryFactory().selectFrom(qStreamer).where(qStreamer.modules.like(&quot;%bot%&quot;)).fetch();\r\n    }\r\n\r\n    @Transactional\r\n    public void insertPengStats(int channel_id, int user_id, boolean success, int time_done) {\r\n        PengStats stats = new PengStats();\r\n        stats.setChannelId(channel_id);\r\n        stats.setUserId(user_id);\r\n        stats.setKilled(success);\r\n        stats.setTimeDone(time_done);\r\n        stats.setTimestamp(LocalDateTime.now());\r\n        em.persist(stats);\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\nI tried to assign the EntityManager manually, then the Selects all worked but my Update/Inserts were not processed correctly. \r\nNo Exception was thrown but no data was persisted either...","title":"EntityManager is null if not created Manually","body":"<p>I work on a maven project which is deployed as a runnable jar on a server.</p>\n<p>Unfortunately my EntityManager stays null if I not assign it manually.</p>\n<p>Persistence.xml</p>\n<pre class=\"lang-java prettyprint-override\"><code>&lt;persistence-unit name=&quot;GreedTechDB&quot;&gt;\n        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\n        &lt;shared-cache-mode&gt;NONE&lt;/shared-cache-mode&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.url&quot; value=&quot;jdbc:mysql://CORRECT_URL/GreedTechV1&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.user&quot; value=&quot;CORRECT_USER&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.password&quot; value=&quot;CORRECT_PASSWORD&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.schema-generation.database.action&quot; value=&quot;create&quot; /&gt;\n            &lt;property name=&quot;hibernate.dialect&quot;    value=&quot;org.hibernate.dialect.MySQLDialect&quot; /&gt;\n            &lt;property name=&quot;hibernate.show_sql&quot;   value=&quot;true&quot; /&gt;\n            &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;true&quot; /&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n</code></pre>\n<p>Then in my BaseSource,java</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class BaseSource implements Serializable {\n\n    @Getter\n    @PersistenceContext\n    protected EntityManager em;\n\n    private JPAQueryFactory queryFactory = null;\n\n    protected JPAQueryFactory jpaQueryFactory() {\n        if (queryFactory == null)\n            queryFactory = new JPAQueryFactory(em);\n        //em.clear();\n        return queryFactory;\n    }\n}\n</code></pre>\n<p>When my MainSource does the most Part of Insert//Updates</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MainSource extends BaseSource {\n\n    public List&lt;Streamer&gt; getChannelsToJoin() {\n        QStreamer qStreamer = QStreamer.streamer;\n        return jpaQueryFactory().selectFrom(qStreamer).where(qStreamer.modules.like(&quot;%bot%&quot;)).fetch();\n    }\n\n    @Transactional\n    public void insertPengStats(int channel_id, int user_id, boolean success, int time_done) {\n        PengStats stats = new PengStats();\n        stats.setChannelId(channel_id);\n        stats.setUserId(user_id);\n        stats.setKilled(success);\n        stats.setTimeDone(time_done);\n        stats.setTimestamp(LocalDateTime.now());\n        em.persist(stats);\n    }\n\n\n}\n</code></pre>\n<p>I tried to assign the EntityManager manually, then the Selects all worked but my Update/Inserts were not processed correctly.\nNo Exception was thrown but no data was persisted either...</p>\n"},{"tags":["java","xml","stax"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1384511049,"post_id":19998460,"comment_id":29775702,"body_markdown":"I don&#39;t think you can. It would be *far* too easy to write broken XML that way.","body":"I don&#39;t think you can. It would be <i>far</i> too easy to write broken XML that way."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1384511194,"post_id":19998460,"comment_id":29775769,"body_markdown":"You could transform your XML with an Xslt identity transform and output the result to a StaxResult based on your XMLStreamWriter...","body":"You could transform your XML with an Xslt identity transform and output the result to a StaxResult based on your XMLStreamWriter..."},{"owner":{"account_id":302030,"reputation":3942,"user_id":610159,"accept_rate":78,"display_name":"Andrei Petrenko"},"score":0,"creation_date":1384511251,"post_id":19998460,"comment_id":29775801,"body_markdown":"@JoachimSauer Sure it would. But let&#39;s assume I know what I&#39;m trying to do :).","body":"@JoachimSauer Sure it would. But let&#39;s assume I know what I&#39;m trying to do :)."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1384512106,"post_id":19998460,"comment_id":29776270,"body_markdown":"I didn&#39;t try to imply otherwise ;-) I was just trying to explain a likely reason why this interface is lacking that (kind-of obvious) feature. I think going the path via an identity transformer (just as if writing to a file) is the way to go here","body":"I didn&#39;t try to imply otherwise ;-) I was just trying to explain a likely reason why this interface is lacking that (kind-of obvious) feature. I think going the path via an identity transformer (just as if writing to a file) is the way to go here"},{"owner":{"account_id":302030,"reputation":3942,"user_id":610159,"accept_rate":78,"display_name":"Andrei Petrenko"},"score":0,"creation_date":1384512442,"post_id":19998460,"comment_id":29776441,"body_markdown":"Thanks for idea. Maybe it makes sense to put it to answer?","body":"Thanks for idea. Maybe it makes sense to put it to answer?"},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1384512839,"post_id":19998460,"comment_id":29776644,"body_markdown":"For an answer I&#39;d have to look up the details, I don&#39;t think what I wrote here is answer-worthy. But feel free to put it as an answer yourself when you&#39;ve figured out the nitty-gritty ;-)","body":"For an answer I&#39;d have to look up the details, I don&#39;t think what I wrote here is answer-worthy. But feel free to put it as an answer yourself when you&#39;ve figured out the nitty-gritty ;-)"}],"answers":[{"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1384686859,"post_id":20000514,"comment_id":29828441,"body_markdown":"With the second approach you&#39;d have to be careful to use the exact same encoding in the `OutputStreamWriter` than the output factory is configured to. Even defaulting to UTF-8 would be more likely to work than just using the platform default encoding (as you currently do).","body":"With the second approach you&#39;d have to be careful to use the exact same encoding in the <code>OutputStreamWriter</code> than the output factory is configured to. Even defaulting to UTF-8 would be more likely to work than just using the platform default encoding (as you currently do)."},{"owner":{"account_id":222360,"reputation":7615,"user_id":480894,"accept_rate":72,"display_name":"Roland"},"score":0,"creation_date":1468832990,"post_id":20000514,"comment_id":64271002,"body_markdown":"I didn&#39;t get option #1 to work. The transform inserts a `&lt;?xml version=&quot;1.0&quot;?&gt;` at the beginning of the fragment and closes of the original tags at the end(in your example the `foo` and `bar` elements would be closed after the transformer has run. Try it to see what I mean.","body":"I didn&#39;t get option #1 to work. The transform inserts a <code>&lt;?xml version=&quot;1.0&quot;?&gt;</code> at the beginning of the fragment and closes of the original tags at the end(in your example the <code>foo</code> and <code>bar</code> elements would be closed after the transformer has run. Try it to see what I mean."},{"owner":{"account_id":1291060,"reputation":196,"user_id":1243161,"accept_rate":57,"display_name":"Magallo"},"score":0,"creation_date":1530005041,"post_id":20000514,"comment_id":89069958,"body_markdown":"Could you possibly provide an example of option 1?","body":"Could you possibly provide an example of option 1?"}],"tags":[],"owner":{"account_id":162425,"reputation":147999,"user_id":383861,"display_name":"bdoughan"},"comment_count":3,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1624899432,"creation_date":1384516459,"answer_id":20000514,"question_id":19998460,"body_markdown":"Below are a couple of options for handling this:\r\n\r\n## Option #1 - Use `javax.xml.transform.Transformer`\r\n\r\nYou could use a `javax.xml.transform.Transformer` to transform a `StreamSource` representing your XML fragment onto your `StAXResult` which is wrapping your `XMLStreamWriter`.\r\n\r\n## Option #2 - Interact Directly with the `OutputStream`\r\n\r\nAlternatively you could do something like the following. You can leverage `flush()` to force the `XMLStreamWriter` to output its contents.  Then you&#39;ll note that I do `xsw.writeCharacters(&quot;&quot;)` this forces the start element to end for `bar` before writing the nested XML as a `String`.  The sample code below needs to be flushed out to properly handle encoding issues.\r\n\r\n    import java.io.*;\r\n    import javax.xml.stream.*;\r\n    \r\n    public class Demo {\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            OutputStream stream = System.out;\r\n            \r\n            XMLOutputFactory xof = XMLOutputFactory.newFactory();\r\n            XMLStreamWriter xsw = xof.createXMLStreamWriter(stream);\r\n            \r\n            xsw.writeStartDocument();\r\n            xsw.writeStartElement(&quot;foo&quot;);\r\n            xsw.writeStartElement(&quot;bar&quot;);\r\n            \r\n            /* Following line is very important, without it unescaped data \r\n               will appear inside the &lt;bar&gt; tag. */\r\n            xsw.writeCharacters(&quot;&quot;);\r\n            xsw.flush();\r\n            \r\n            OutputStreamWriter osw = new OutputStreamWriter(stream);\r\n            osw.write(&quot;&lt;baz&gt;Hello World&lt;baz&gt;&quot;);\r\n            osw.flush();\r\n            \r\n            xsw.writeEndElement();\r\n            xsw.writeEndElement();\r\n            xsw.writeEndDocument();\r\n            xsw.close();\r\n        }\r\n    \r\n    }","title":"How to write unescaped XML to XMLStreamWriter?","body":"<p>Below are a couple of options for handling this:</p>\n<h2>Option #1 - Use <code>javax.xml.transform.Transformer</code></h2>\n<p>You could use a <code>javax.xml.transform.Transformer</code> to transform a <code>StreamSource</code> representing your XML fragment onto your <code>StAXResult</code> which is wrapping your <code>XMLStreamWriter</code>.</p>\n<h2>Option #2 - Interact Directly with the <code>OutputStream</code></h2>\n<p>Alternatively you could do something like the following. You can leverage <code>flush()</code> to force the <code>XMLStreamWriter</code> to output its contents.  Then you'll note that I do <code>xsw.writeCharacters(&quot;&quot;)</code> this forces the start element to end for <code>bar</code> before writing the nested XML as a <code>String</code>.  The sample code below needs to be flushed out to properly handle encoding issues.</p>\n<pre><code>import java.io.*;\nimport javax.xml.stream.*;\n\npublic class Demo {\n\n    public static void main(String[] args) throws Exception {\n        OutputStream stream = System.out;\n        \n        XMLOutputFactory xof = XMLOutputFactory.newFactory();\n        XMLStreamWriter xsw = xof.createXMLStreamWriter(stream);\n        \n        xsw.writeStartDocument();\n        xsw.writeStartElement(&quot;foo&quot;);\n        xsw.writeStartElement(&quot;bar&quot;);\n        \n        /* Following line is very important, without it unescaped data \n           will appear inside the &lt;bar&gt; tag. */\n        xsw.writeCharacters(&quot;&quot;);\n        xsw.flush();\n        \n        OutputStreamWriter osw = new OutputStreamWriter(stream);\n        osw.write(&quot;&lt;baz&gt;Hello World&lt;baz&gt;&quot;);\n        osw.flush();\n        \n        xsw.writeEndElement();\n        xsw.writeEndElement();\n        xsw.writeEndDocument();\n        xsw.close();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":239789,"reputation":29819,"user_id":509627,"accept_rate":63,"display_name":"David Thielen"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1395933763,"creation_date":1395933763,"answer_id":22692045,"question_id":19998460,"body_markdown":"woodstox has a stax implementation and their [XMLStreamWriter2][1] class has a writeRaw() call. We have the same need and this gave us a very nice solution.\r\n\r\n\r\n  [1]: http://woodstox.codehaus.org/3.2.8/javadoc/org/codehaus/stax2/XMLStreamWriter2.html","title":"How to write unescaped XML to XMLStreamWriter?","body":"<p>woodstox has a stax implementation and their <a href=\"http://woodstox.codehaus.org/3.2.8/javadoc/org/codehaus/stax2/XMLStreamWriter2.html\" rel=\"nofollow\">XMLStreamWriter2</a> class has a writeRaw() call. We have the same need and this gave us a very nice solution.</p>\n"},{"comments":[{"owner":{"account_id":1915242,"reputation":546,"user_id":1727937,"display_name":"Lina Shyshova"},"score":1,"creation_date":1550504124,"post_id":34053012,"comment_id":96283385,"body_markdown":"It simplest solution! Thank you.","body":"It simplest solution! Thank you."},{"owner":{"account_id":8719765,"reputation":1168,"user_id":6523288,"display_name":"Dragas"},"score":0,"creation_date":1688130186,"post_id":34053012,"comment_id":135036443,"body_markdown":"Xerces specific.","body":"Xerces specific."}],"tags":[],"owner":{"account_id":427657,"reputation":2580,"user_id":809536,"accept_rate":80,"display_name":"ZiglioUK"},"comment_count":2,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1449090490,"creation_date":1449090490,"answer_id":34053012,"question_id":19998460,"body_markdown":"    final XMLOutputFactory streamWriterFactory = XMLOutputFactory.newFactory();\r\n    streamWriterFactory.setProperty(&quot;escapeCharacters&quot;, false);\r\n\r\n[From here][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/13508779/809536","title":"How to write unescaped XML to XMLStreamWriter?","body":"<pre><code>final XMLOutputFactory streamWriterFactory = XMLOutputFactory.newFactory();\nstreamWriterFactory.setProperty(\"escapeCharacters\", false);\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/13508779/809536\">From here</a></p>\n"}],"owner":{"account_id":302030,"reputation":3942,"user_id":610159,"accept_rate":78,"display_name":"Andrei Petrenko"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5170,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":20000514,"answer_count":3,"score":5,"last_activity_date":1695277866,"creation_date":1384509974,"question_id":19998460,"body_markdown":"I have a number of small XML chunks, that should be embedded in one big XML as child elements. Is there any way to write these chunks to &lt;code&gt;XMLStreamWriter&lt;/code&gt; without escaping them?","title":"How to write unescaped XML to XMLStreamWriter?","body":"<p>I have a number of small XML chunks, that should be embedded in one big XML as child elements. Is there any way to write these chunks to <code>XMLStreamWriter</code> without escaping them?</p>\n"},{"tags":["java","firebase","firebase-authentication"],"answers":[{"comments":[{"owner":{"account_id":29492925,"reputation":1,"user_id":22601623,"display_name":"Shiyu Pan"},"score":0,"creation_date":1695284510,"post_id":77144238,"comment_id":136004655,"body_markdown":"Thank u for your reply. So if I want to use Firebase Admin SDK, I should have a new project without any Android client SDK right?","body":"Thank u for your reply. So if I want to use Firebase Admin SDK, I should have a new project without any Android client SDK right?"},{"owner":{"account_id":426109,"reputation":302042,"user_id":807126,"display_name":"Doug Stevenson"},"score":0,"creation_date":1695299919,"post_id":77144238,"comment_id":136007857,"body_markdown":"I don&#39;t know what IDE or programming environment you&#39;re using, but yes, you will have to write something that is not an Android app.","body":"I don&#39;t know what IDE or programming environment you&#39;re using, but yes, you will have to write something that is not an Android app."}],"tags":[],"owner":{"account_id":426109,"reputation":302042,"user_id":807126,"display_name":"Doug Stevenson"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695226138,"creation_date":1695226138,"answer_id":77144238,"question_id":77144056,"body_markdown":"If you want to write a java program to delete users in Firebase Auth, you must use the [Firebase Admin SDK][1].  You can&#39;t use the Android client SDK - it won&#39;t work at all outside of an Android app, and it doesn&#39;t even expose a method to delete a user by UID.  I suggest referring to the Firebase Admin documentation on [deleting a user][2].\r\n\r\n\r\n  [1]: https://firebase.google.com/docs/admin/setup\r\n  [2]: https://firebase.google.com/docs/auth/admin/manage-users#delete_a_user","title":"Why I can&#39;t use the FirebaseAuth.getInstance.deleteUser(uid);","body":"<p>If you want to write a java program to delete users in Firebase Auth, you must use the <a href=\"https://firebase.google.com/docs/admin/setup\" rel=\"nofollow noreferrer\">Firebase Admin SDK</a>.  You can't use the Android client SDK - it won't work at all outside of an Android app, and it doesn't even expose a method to delete a user by UID.  I suggest referring to the Firebase Admin documentation on <a href=\"https://firebase.google.com/docs/auth/admin/manage-users#delete_a_user\" rel=\"nofollow noreferrer\">deleting a user</a>.</p>\n"},{"comments":[{"owner":{"account_id":29492925,"reputation":1,"user_id":22601623,"display_name":"Shiyu Pan"},"score":0,"creation_date":1695284579,"post_id":77147601,"comment_id":136004677,"body_markdown":"I got it. Firstly sign in a account and then delete which may be the best solution currently. Thank u :)","body":"I got it. Firstly sign in a account and then delete which may be the best solution currently. Thank u :)"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1695535291,"post_id":77147601,"comment_id":136035809,"body_markdown":"You&#39;re very welcome, Shiyu. Did my answer help? Can I help you with other information?","body":"You&#39;re very welcome, Shiyu. Did my answer help? Can I help you with other information?"}],"tags":[],"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695276974,"creation_date":1695276974,"answer_id":77147601,"question_id":77144056,"body_markdown":"While @DougStevenson solution solves the problem using the Firebase Admin SDK, please also note that the [FirebaseAuth][1] class doesn&#39;t contain any `deleteUser(uid)` method. However, there is a [delete()][2] method inside the [FirebaseUser][3] class, which:\r\n\r\n&gt; Deletes the user record from your Firebase project&#39;s database.\r\n\r\nSo if you want to delete a user from an Android app, that&#39;s the function that you have to use.\r\n\r\nOne more thing to notice, the delete operation is an asynchronous operation, so you have to attach a listener to see when the operation is complete or fails with an error.\r\n\r\n  [1]: https://firebase.google.com/docs/reference/android/com/google/firebase/auth/FirebaseAuth\r\n  [2]: https://firebase.google.com/docs/reference/android/com/google/firebase/auth/FirebaseUser#delete()\r\n  [3]: https://firebase.google.com/docs/reference/android/com/google/firebase/auth/FirebaseUser","title":"Why I can&#39;t use the FirebaseAuth.getInstance.deleteUser(uid);","body":"<p>While @DougStevenson solution solves the problem using the Firebase Admin SDK, please also note that the <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/FirebaseAuth\" rel=\"nofollow noreferrer\">FirebaseAuth</a> class doesn't contain any <code>deleteUser(uid)</code> method. However, there is a <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/FirebaseUser#delete()\" rel=\"nofollow noreferrer\">delete()</a> method inside the <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/FirebaseUser\" rel=\"nofollow noreferrer\">FirebaseUser</a> class, which:</p>\n<blockquote>\n<p>Deletes the user record from your Firebase project's database.</p>\n</blockquote>\n<p>So if you want to delete a user from an Android app, that's the function that you have to use.</p>\n<p>One more thing to notice, the delete operation is an asynchronous operation, so you have to attach a listener to see when the operation is complete or fails with an error.</p>\n"}],"owner":{"account_id":29492925,"reputation":1,"user_id":22601623,"display_name":"Shiyu Pan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695277020,"creation_date":1695224513,"question_id":77144056,"body_markdown":"```\r\nFirebaseApp.initializeApp(this);\r\nFirebaseAuth.getInstance().deleteUser(uid);\r\nSystem.out.println(&quot;Successfully deleted user.&quot;);\r\n```\r\n\r\nIn this code`deleteUser(uid)` shows that &quot;Cannot resolve method &#39;deleteUser&#39; in &#39;FirebaseAuth&#39;&quot;. I don&#39;t know why. My doubt is that: there may be some conflicts between client SDK and service SDK. I have not created my service code and just want to test the function so I write all the code in the client.\r\n\r\nI have tried a lot of ways, I want to know what should I do. Thank you guys.\r\nIf I need to separate the client and service then will it work?","title":"Why I can&#39;t use the FirebaseAuth.getInstance.deleteUser(uid);","body":"<pre><code>FirebaseApp.initializeApp(this);\nFirebaseAuth.getInstance().deleteUser(uid);\nSystem.out.println(&quot;Successfully deleted user.&quot;);\n</code></pre>\n<p>In this code<code>deleteUser(uid)</code> shows that &quot;Cannot resolve method 'deleteUser' in 'FirebaseAuth'&quot;. I don't know why. My doubt is that: there may be some conflicts between client SDK and service SDK. I have not created my service code and just want to test the function so I write all the code in the client.</p>\n<p>I have tried a lot of ways, I want to know what should I do. Thank you guys.\nIf I need to separate the client and service then will it work?</p>\n"},{"tags":["java","arrays","traversal"],"answers":[{"comments":[{"owner":{"account_id":986049,"reputation":3856,"user_id":1004505,"accept_rate":73,"display_name":"Connecting life with Android"},"score":0,"creation_date":1325047949,"post_id":8651976,"comment_id":10749532,"body_markdown":"what would be the value of start? i dont want to fix start value","body":"what would be the value of start? i dont want to fix start value"},{"owner":{"account_id":415329,"reputation":21695,"user_id":790070,"accept_rate":100,"display_name":"Timothy Jones"},"score":0,"creation_date":1325048066,"post_id":8651976,"comment_id":10749548,"body_markdown":"Start is wherever you want to start the traversal in the array. To print 3 4 5 1 2, start should be 2, or to print 1 2 3 4 5 start should be 0 - maybe I&#39;ve misunderstood your question?","body":"Start is wherever you want to start the traversal in the array. To print 3 4 5 1 2, start should be 2, or to print 1 2 3 4 5 start should be 0 - maybe I&#39;ve misunderstood your question?"}],"tags":[],"owner":{"account_id":415329,"reputation":21695,"user_id":790070,"accept_rate":100,"display_name":"Timothy Jones"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1325047758,"creation_date":1325047758,"answer_id":8651976,"question_id":8651965,"body_markdown":"How about the following:\r\n\r\n    int start = // start position, must be in bounds\r\n    int i = start;\r\n    do {\r\n       \r\n       ....\r\n\r\n       i++;\r\n       if(i == a.length) i = 0;\r\n    } while(i != start);\r\n","title":"java array traversal in circular manner","body":"<p>How about the following:</p>\n\n<pre><code>int start = // start position, must be in bounds\nint i = start;\ndo {\n\n   ....\n\n   i++;\n   if(i == a.length) i = 0;\n} while(i != start);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":341876,"reputation":3376,"user_id":672736,"accept_rate":70,"display_name":"Swagatika"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1325048041,"creation_date":1325048041,"answer_id":8652007,"question_id":8651965,"body_markdown":"    int st = n ; // n is the starting position from where you print\r\n    for(int i = st; i &lt; a.length; i++)\r\n    {\r\n       -- print each array[i];\r\n    }\r\n    \r\n    if(st != 0)\r\n    {\r\n       for(int i = 0 ; i &lt; st ; i++)\r\n       {\r\n          --- print each array[i];\r\n       }\r\n    }","title":"java array traversal in circular manner","body":"<pre><code>int st = n ; // n is the starting position from where you print\nfor(int i = st; i &lt; a.length; i++)\n{\n   -- print each array[i];\n}\n\nif(st != 0)\n{\n   for(int i = 0 ; i &lt; st ; i++)\n   {\n      --- print each array[i];\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":266613,"reputation":9373,"user_id":554279,"accept_rate":80,"display_name":"Rangi Lin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1325048193,"creation_date":1325048193,"answer_id":8652025,"question_id":8651965,"body_markdown":"Basically you just need to loop through the array, and change the current index if necessary (like move it to the start of the array when it meets the end)\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tint[] array = new int[] { 1, 2, 3, 4, 5 };\r\n\t\tSystem.out.println(printCircularly(array, 4));\r\n\t}\r\n\r\n\tprivate static String printCircularly(int[] array, int startIndex) {\r\n\t\tStringBuilder sb = new StringBuilder();\r\n\t\tint currentIndex = startIndex;\r\n\t\tdo {\r\n\t\t\tsb.append(array[currentIndex++]);\r\n\t\t\tif (currentIndex &gt; array.length - 1) {\r\n\t\t\t\tcurrentIndex = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\twhile (currentIndex != startIndex);\r\n\t\treturn sb.toString();\r\n\t}","title":"java array traversal in circular manner","body":"<p>Basically you just need to loop through the array, and change the current index if necessary (like move it to the start of the array when it meets the end)</p>\n\n<pre><code>public static void main(String[] args) {\n    int[] array = new int[] { 1, 2, 3, 4, 5 };\n    System.out.println(printCircularly(array, 4));\n}\n\nprivate static String printCircularly(int[] array, int startIndex) {\n    StringBuilder sb = new StringBuilder();\n    int currentIndex = startIndex;\n    do {\n        sb.append(array[currentIndex++]);\n        if (currentIndex &gt; array.length - 1) {\n            currentIndex = 0;\n        }\n    }\n    while (currentIndex != startIndex);\n    return sb.toString();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":265101,"reputation":8176,"user_id":551841,"accept_rate":100,"display_name":"AlanFoster"},"score":0,"creation_date":1325049474,"post_id":8652067,"comment_id":10749785,"body_markdown":"This entire post really reminds me of that stupid fuzz buzz problem, lots of people answering with overly complicated non-sensical solutions, when there&#39;s an easier way to do things with no effort","body":"This entire post really reminds me of that stupid fuzz buzz problem, lots of people answering with overly complicated non-sensical solutions, when there&#39;s an easier way to do things with no effort"},{"owner":{"account_id":415329,"reputation":21695,"user_id":790070,"accept_rate":100,"display_name":"Timothy Jones"},"score":0,"creation_date":1325050125,"post_id":8652067,"comment_id":10749882,"body_markdown":"I gave you a +1 for the three line solution that also deals with out out bounds cases :) However, I agree with your readability concern- I think the loop looks like it&#39;s a normal iteration at first glance which may not be ideal.","body":"I gave you a +1 for the three line solution that also deals with out out bounds cases :) However, I agree with your readability concern- I think the loop looks like it&#39;s a normal iteration at first glance which may not be ideal."},{"owner":{"account_id":7701889,"reputation":84,"user_id":5834158,"display_name":"bingeScripter"},"score":0,"creation_date":1650971420,"post_id":8652067,"comment_id":127245146,"body_markdown":"How do you invent something like that? How? :D","body":"How do you invent something like that? How? :D"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1650977756,"post_id":8652067,"comment_id":127247724,"body_markdown":"Don&#39;t ask me.  It isn&#39;t my invention.  Though I don&#39;t recall where I learned it.","body":"Don&#39;t ask me.  It isn&#39;t my invention.  Though I don&#39;t recall where I learned it."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":4,"down_vote_count":1,"up_vote_count":28,"is_accepted":true,"score":27,"last_activity_date":1695276980,"creation_date":1325048659,"answer_id":8652067,"question_id":8651965,"body_markdown":"    int start = ...\r\n    for (int i = 0; i &lt; a.length; i++) {\r\n        System.out.println(a[(start + i) % a.length]);\r\n    }\r\n\r\n&lt;sup&gt;(If you want to iterate the array backwards from `start`, change `start + i` to `start - i + a.length` in the array subscript expression.  The `+ a.length` is needed because, in Java, `x % y` is negative when `x` is negative; see https://stackoverflow.com/questions/4412179)&lt;/sup&gt;\r\n\r\nI should note that this is probably not the most efficient way of expressing the loop ... in terms of execution speed.  However, the difference is small, and *most likely irrelevant*.\r\n\r\nA more relevant point is whether using `%` in this way gives more readable code.  I think it does, but maybe that&#39;s because I&#39;ve seen / used this particular idiom before.  Maybe a comment would be warranted.\r\n\r\n","title":"java array traversal in circular manner","body":"<pre><code>int start = ...\nfor (int i = 0; i &lt; a.length; i++) {\n    System.out.println(a[(start + i) % a.length]);\n}\n</code></pre>\n<p><sup>(If you want to iterate the array backwards from <code>start</code>, change <code>start + i</code> to <code>start - i + a.length</code> in the array subscript expression.  The <code>+ a.length</code> is needed because, in Java, <code>x % y</code> is negative when <code>x</code> is negative; see <a href=\"https://stackoverflow.com/questions/4412179\">Best way to make Java&#39;s modulus behave like it should with negative numbers?</a>)</sup></p>\n<p>I should note that this is probably not the most efficient way of expressing the loop ... in terms of execution speed.  However, the difference is small, and <em>most likely irrelevant</em>.</p>\n<p>A more relevant point is whether using <code>%</code> in this way gives more readable code.  I think it does, but maybe that's because I've seen / used this particular idiom before.  Maybe a comment would be warranted.</p>\n"},{"comments":[{"owner":{"account_id":5027936,"reputation":85,"user_id":4039152,"display_name":"Chathu_sm"},"score":0,"creation_date":1551853703,"post_id":50232534,"comment_id":96787482,"body_markdown":"you saved me big time.","body":"you saved me big time."}],"tags":[],"owner":{"account_id":13516581,"reputation":11,"user_id":9750973,"display_name":"softerboy"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1525778963,"creation_date":1525778963,"answer_id":50232534,"question_id":8651965,"body_markdown":"In addition to [Stephen C](https://stackoverflow.com/users/139985/stephen-c)&#39;s answer\r\n\r\n    int start = ...\r\n\r\n    for (int i = 0; i &lt; a.length; i++) {\r\n        System.out.println(a[(start - i + a.length) % a.length]);\r\n    }\r\n\r\nUse this for reverse loop from start index. It&#39;s a little unclear, but in some cases very useful. For example: UI components like carousel.\r\n\r\nAnd there&#39;s no ArrayIndexOutOfBoundsException!!!","title":"java array traversal in circular manner","body":"<p>In addition to <a href=\"https://stackoverflow.com/users/139985/stephen-c\">Stephen C</a>'s answer</p>\n\n<pre><code>int start = ...\n\nfor (int i = 0; i &lt; a.length; i++) {\n    System.out.println(a[(start - i + a.length) % a.length]);\n}\n</code></pre>\n\n<p>Use this for reverse loop from start index. It's a little unclear, but in some cases very useful. For example: UI components like carousel.</p>\n\n<p>And there's no ArrayIndexOutOfBoundsException!!!</p>\n"},{"tags":[],"owner":{"account_id":3591100,"reputation":930,"user_id":2997147,"accept_rate":52,"display_name":"FrankelStein"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667996150,"creation_date":1667996150,"answer_id":74374740,"question_id":8651965,"body_markdown":"Instead of using a for loop with indexes, which is harder to read, you can use `Iterables` from `Google Guava` as follows :\r\n\r\n    List&lt;Integer&gt; myList = List.of(1,2,3);\r\n    Iterator&lt;Integer&gt; myListIterator = Iterables.cycle(myList).iterator();\r\n\r\nthen you will only have to use `myListIterator.next()`. example :\r\n\r\n    System.out.println(myListIterator.next());\r\n    System.out.println(myListIterator.next());\r\n    System.out.println(myListIterator.next());\r\n    System.out.println(myListIterator.next());\r\n\r\nThis will print :  1 2 3 1\r\n","title":"java array traversal in circular manner","body":"<p>Instead of using a for loop with indexes, which is harder to read, you can use <code>Iterables</code> from <code>Google Guava</code> as follows :</p>\n<pre><code>List&lt;Integer&gt; myList = List.of(1,2,3);\nIterator&lt;Integer&gt; myListIterator = Iterables.cycle(myList).iterator();\n</code></pre>\n<p>then you will only have to use <code>myListIterator.next()</code>. example :</p>\n<pre><code>System.out.println(myListIterator.next());\nSystem.out.println(myListIterator.next());\nSystem.out.println(myListIterator.next());\nSystem.out.println(myListIterator.next());\n</code></pre>\n<p>This will print :  1 2 3 1</p>\n"}],"owner":{"account_id":986049,"reputation":3856,"user_id":1004505,"accept_rate":73,"display_name":"Connecting life with Android"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17252,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":8652067,"answer_count":6,"score":12,"last_activity_date":1695276980,"creation_date":1325047626,"question_id":8651965,"body_markdown":"I have an array which have 1 2 3 4 5 values.\r\n\r\n    array a = [ 1 , 2, 3, 4, 5]\r\n\r\nNow i want to traverse it in circular manner.\r\nlike i want to print 2 3 4 5 1 or 3 4 5 1 2 or 5 1 2 3 4 and so on.\r\nany **algorithm** on this?\r\n\r\n**Edit:** I want to print all the combination in circular manner. i don&#39;t want to state starting point at its initial phase.","title":"java array traversal in circular manner","body":"<p>I have an array which have 1 2 3 4 5 values.</p>\n\n<pre><code>array a = [ 1 , 2, 3, 4, 5]\n</code></pre>\n\n<p>Now i want to traverse it in circular manner.\nlike i want to print 2 3 4 5 1 or 3 4 5 1 2 or 5 1 2 3 4 and so on.\nany <strong>algorithm</strong> on this?</p>\n\n<p><strong>Edit:</strong> I want to print all the combination in circular manner. i don't want to state starting point at its initial phase.</p>\n"},{"tags":["java","spring-test"],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695276531,"creation_date":1695276531,"question_id":77147571,"body_markdown":"I tested this controller class\r\n```java\r\n@RestController\r\npublic class MyRestController {\r\n    private final UserService userService;\r\n\r\n    private final PasswordEncoder passwordEncoder;\r\n\r\n    public MyRestController(UserService userService, PasswordEncoder passwordEncoder) {\r\n        this.userService = userService;\r\n        this.passwordEncoder = passwordEncoder;\r\n    }\r\n\r\n    @PostMapping(&quot;/users&quot;)\r\n    public ResponseEntity&lt;User&gt; addUser(@RequestBody User user) {\r\n        String userPassBeforeEncoding = user.getPassword();\r\n        String encodedPass = passwordEncoder.encode(userPassBeforeEncoding);\r\n        user.setPassword(encodedPass);\r\n        userService.save(user);\r\n        return new ResponseEntity&lt;&gt;(user, HttpStatus.CREATED);\r\n    }\r\n\r\n// more methods\r\n```\r\nwith this test\r\n```java\r\n@WebMvcTest\r\n@AutoConfigureMockMvc(addFilters = false)\r\nclass MyRestControllerTest {\r\n    @Autowired\r\n    MockMvc mockMvc;\r\n    @Autowired\r\n    ObjectMapper objectMapper;\r\n    @MockBean\r\n    UserService userService;\r\n    @MockBean\r\n    PasswordEncoder passwordEncoder;\r\n    User mickey;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        mickey = new User();\r\n        mickey.setUsername(&quot;mickey&quot;);\r\n        // more setters\r\n\r\n        when(passwordEncoder.encode(anyString())).thenReturn(&quot;password&quot;);\r\n    }\r\n\r\n    @Test\r\n    void addUser() throws Exception {\r\n        var response = mockMvc.perform(post(&quot;/users&quot;)\r\n                        .content(objectMapper.writeValueAsString(mickey))\r\n                        .contentType(MediaType.APPLICATION_JSON)\r\n                        .accept(MediaType.APPLICATION_JSON))\r\n                .andExpect(status().isCreated())\r\n                .andReturn()\r\n                .getResponse();\r\n        User userFromResponse = objectMapper.readValue(response.getContentAsString(), User.class);\r\n        assertThat(userFromResponse).isEqualTo(mickey);\r\n        verify(userService, times(1)).save(mickey);\r\n    }\r\n\r\n// more tests\r\n```\r\nIt works but only as long as I disable filters. I wonder how I test it with filters. Here&#39;s my Security config:\r\n```java\r\n@Configuration\r\n@Import(WebMvcConfig.class)\r\n@EnableWebSecurity\r\npublic class WebSecurityConfig {\r\n\r\n    private final UserDao userDao;\r\n\r\n    public WebSecurityConfig(UserDao userDao) {\r\n        this.userDao = userDao;\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.authorizeHttpRequests()\r\n                .requestMatchers(&quot;/user/**&quot;).hasAuthority(&quot;USER&quot;)\r\n                .requestMatchers(&quot;/admin/**&quot;).hasAuthority(&quot;ADMIN&quot;)\r\n                .anyRequest().authenticated()\r\n                .and().formLogin()\r\n                .successHandler(successHandler())\r\n                .and().logout().logoutUrl(&quot;/logout&quot;).logoutSuccessUrl(&quot;/login&quot;);\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public UserDetailsService userDetailsService() {\r\n        return username -&gt; {\r\n            User user = userDao.findByUsername(username);\r\n            if (user == null) {\r\n                String message = String.format(&quot;No user with username %s is found in the database&quot;, username);\r\n                throw new UsernameNotFoundException(message);\r\n            }\r\n            return user;\r\n        };\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationProvider authenticationProvider() {\r\n        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\r\n        authProvider.setUserDetailsService(userDetailsService());\r\n        authProvider.setPasswordEncoder(passwordEncoder());\r\n        return authProvider;\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder(10);\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationSuccessHandler successHandler() {\r\n        return (httpServletRequest, httpServletResponse, authentication) -&gt;\r\n                httpServletResponse.sendRedirect(&quot;/&quot;);\r\n    }\r\n}\r\n```\r\nAs you see, the `/users` endpoint doesn&#39;t require any credentials, only an authentication (you could argue it should, but it&#39;s not the point). That is why `@WithMockUser` alone can&#39;t help. How do I mock such an authentication and avoid my tests failing due to 403 &quot;forbidden&quot; (which is what happens if I keep the filters enabled)?\r\n\r\nI also tried `@WithUsersDetails`\r\n```java\r\npackage pp.spring_bootstrap.controllers;\r\n\r\n// imports\r\n\r\n@WebMvcTest\r\n@ContextConfiguration(classes = MyRestControllerTestConfig.class)\r\nclass MyRestControllerTest {\r\n    @Autowired\r\n    MockMvc mockMvc;\r\n    @Autowired\r\n    ObjectMapper objectMapper;\r\n    @MockBean\r\n    UserService userService;\r\n    @MockBean\r\n    PasswordEncoder passwordEncoder;\r\n    @Autowired\r\n    User mickey;\r\n    @Autowired\r\n    UserDetailsService userDetailsService;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        when(passwordEncoder.encode(anyString())).thenReturn(&quot;password&quot;);\r\n    }\r\n\r\n    @Test\r\n    @WithUserDetails(value = &quot;admin&quot;, userDetailsServiceBeanName = &quot;userDetailsServiceMock&quot;)\r\n    void addUser() throws Exception {\r\n\r\n// ...\r\n```\r\n```java\r\npackage pp.spring_bootstrap.controllers.config;\r\n\r\n// imports\r\n\r\n@TestConfiguration\r\npublic class MyRestControllerTestConfig {\r\n    @Bean\r\n    public UserDetailsService userDetailsServiceMock(UserDetails testAdmin) {\r\n        return username -&gt; testAdmin;\r\n    }\r\n\r\n    @Bean\r\n    public User testAdmin() {\r\n        User scrooge = new User();\r\n        scrooge.setUsername(&quot;admin&quot;);\r\n        scrooge.setPassword(&quot;password&quot;);\r\n        // irrelevant setters\r\n        scrooge.setEnabledByte((byte) 1);\r\n        scrooge.setAuthorities(Set.of(new Role(&quot;USER&quot;),\r\n                new Role(&quot;ADMIN&quot;)));\r\n        return scrooge;\r\n    }\r\n}\r\n```\r\nHowever, I still get 403. Even if I include `@WithMockUser` as well\r\n```java\r\n@WebMvcTest\r\n@ContextConfiguration(classes = MyRestControllerTestConfig.class)\r\n@WithUserDetails(value = &quot;admin&quot;, userDetailsServiceBeanName = &quot;userDetailsServiceMock&quot;)\r\n@WithMockUser(username = &quot;admin&quot;)\r\nclass MyRestControllerTest {\r\n```\r\nI guess it&#39;s no way to mock an authentication after all\r\n\r\nSpring also [suggests][1] `@WithSecurityContext`, but it looks too complex for such a basic scenario. I believe it&#39;s not how I should do it\r\n\r\nSo what are my options? Notice I tried or at least mentioned all solutions listed in [this answer][2]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/4.2.x/reference/html/test-method.html#test-method-withsecuritycontext\r\n  [2]: https://stackoverflow.com/a/62800483/22186847","title":"How do I mock authentications when doing @WebMvcTests with filters enabled?","body":"<p>I tested this controller class</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class MyRestController {\n    private final UserService userService;\n\n    private final PasswordEncoder passwordEncoder;\n\n    public MyRestController(UserService userService, PasswordEncoder passwordEncoder) {\n        this.userService = userService;\n        this.passwordEncoder = passwordEncoder;\n    }\n\n    @PostMapping(&quot;/users&quot;)\n    public ResponseEntity&lt;User&gt; addUser(@RequestBody User user) {\n        String userPassBeforeEncoding = user.getPassword();\n        String encodedPass = passwordEncoder.encode(userPassBeforeEncoding);\n        user.setPassword(encodedPass);\n        userService.save(user);\n        return new ResponseEntity&lt;&gt;(user, HttpStatus.CREATED);\n    }\n\n// more methods\n</code></pre>\n<p>with this test</p>\n<pre class=\"lang-java prettyprint-override\"><code>@WebMvcTest\n@AutoConfigureMockMvc(addFilters = false)\nclass MyRestControllerTest {\n    @Autowired\n    MockMvc mockMvc;\n    @Autowired\n    ObjectMapper objectMapper;\n    @MockBean\n    UserService userService;\n    @MockBean\n    PasswordEncoder passwordEncoder;\n    User mickey;\n\n    @BeforeEach\n    void setUp() {\n        mickey = new User();\n        mickey.setUsername(&quot;mickey&quot;);\n        // more setters\n\n        when(passwordEncoder.encode(anyString())).thenReturn(&quot;password&quot;);\n    }\n\n    @Test\n    void addUser() throws Exception {\n        var response = mockMvc.perform(post(&quot;/users&quot;)\n                        .content(objectMapper.writeValueAsString(mickey))\n                        .contentType(MediaType.APPLICATION_JSON)\n                        .accept(MediaType.APPLICATION_JSON))\n                .andExpect(status().isCreated())\n                .andReturn()\n                .getResponse();\n        User userFromResponse = objectMapper.readValue(response.getContentAsString(), User.class);\n        assertThat(userFromResponse).isEqualTo(mickey);\n        verify(userService, times(1)).save(mickey);\n    }\n\n// more tests\n</code></pre>\n<p>It works but only as long as I disable filters. I wonder how I test it with filters. Here's my Security config:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@Import(WebMvcConfig.class)\n@EnableWebSecurity\npublic class WebSecurityConfig {\n\n    private final UserDao userDao;\n\n    public WebSecurityConfig(UserDao userDao) {\n        this.userDao = userDao;\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.authorizeHttpRequests()\n                .requestMatchers(&quot;/user/**&quot;).hasAuthority(&quot;USER&quot;)\n                .requestMatchers(&quot;/admin/**&quot;).hasAuthority(&quot;ADMIN&quot;)\n                .anyRequest().authenticated()\n                .and().formLogin()\n                .successHandler(successHandler())\n                .and().logout().logoutUrl(&quot;/logout&quot;).logoutSuccessUrl(&quot;/login&quot;);\n        return http.build();\n    }\n\n    @Bean\n    public UserDetailsService userDetailsService() {\n        return username -&gt; {\n            User user = userDao.findByUsername(username);\n            if (user == null) {\n                String message = String.format(&quot;No user with username %s is found in the database&quot;, username);\n                throw new UsernameNotFoundException(message);\n            }\n            return user;\n        };\n    }\n\n    @Bean\n    public AuthenticationProvider authenticationProvider() {\n        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\n        authProvider.setUserDetailsService(userDetailsService());\n        authProvider.setPasswordEncoder(passwordEncoder());\n        return authProvider;\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder(10);\n    }\n\n    @Bean\n    public AuthenticationSuccessHandler successHandler() {\n        return (httpServletRequest, httpServletResponse, authentication) -&gt;\n                httpServletResponse.sendRedirect(&quot;/&quot;);\n    }\n}\n</code></pre>\n<p>As you see, the <code>/users</code> endpoint doesn't require any credentials, only an authentication (you could argue it should, but it's not the point). That is why <code>@WithMockUser</code> alone can't help. How do I mock such an authentication and avoid my tests failing due to 403 &quot;forbidden&quot; (which is what happens if I keep the filters enabled)?</p>\n<p>I also tried <code>@WithUsersDetails</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>package pp.spring_bootstrap.controllers;\n\n// imports\n\n@WebMvcTest\n@ContextConfiguration(classes = MyRestControllerTestConfig.class)\nclass MyRestControllerTest {\n    @Autowired\n    MockMvc mockMvc;\n    @Autowired\n    ObjectMapper objectMapper;\n    @MockBean\n    UserService userService;\n    @MockBean\n    PasswordEncoder passwordEncoder;\n    @Autowired\n    User mickey;\n    @Autowired\n    UserDetailsService userDetailsService;\n\n    @BeforeEach\n    void setUp() {\n        when(passwordEncoder.encode(anyString())).thenReturn(&quot;password&quot;);\n    }\n\n    @Test\n    @WithUserDetails(value = &quot;admin&quot;, userDetailsServiceBeanName = &quot;userDetailsServiceMock&quot;)\n    void addUser() throws Exception {\n\n// ...\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package pp.spring_bootstrap.controllers.config;\n\n// imports\n\n@TestConfiguration\npublic class MyRestControllerTestConfig {\n    @Bean\n    public UserDetailsService userDetailsServiceMock(UserDetails testAdmin) {\n        return username -&gt; testAdmin;\n    }\n\n    @Bean\n    public User testAdmin() {\n        User scrooge = new User();\n        scrooge.setUsername(&quot;admin&quot;);\n        scrooge.setPassword(&quot;password&quot;);\n        // irrelevant setters\n        scrooge.setEnabledByte((byte) 1);\n        scrooge.setAuthorities(Set.of(new Role(&quot;USER&quot;),\n                new Role(&quot;ADMIN&quot;)));\n        return scrooge;\n    }\n}\n</code></pre>\n<p>However, I still get 403. Even if I include <code>@WithMockUser</code> as well</p>\n<pre class=\"lang-java prettyprint-override\"><code>@WebMvcTest\n@ContextConfiguration(classes = MyRestControllerTestConfig.class)\n@WithUserDetails(value = &quot;admin&quot;, userDetailsServiceBeanName = &quot;userDetailsServiceMock&quot;)\n@WithMockUser(username = &quot;admin&quot;)\nclass MyRestControllerTest {\n</code></pre>\n<p>I guess it's no way to mock an authentication after all</p>\n<p>Spring also <a href=\"https://docs.spring.io/spring-security/site/docs/4.2.x/reference/html/test-method.html#test-method-withsecuritycontext\" rel=\"nofollow noreferrer\">suggests</a> <code>@WithSecurityContext</code>, but it looks too complex for such a basic scenario. I believe it's not how I should do it</p>\n<p>So what are my options? Notice I tried or at least mentioned all solutions listed in <a href=\"https://stackoverflow.com/a/62800483/22186847\">this answer</a></p>\n"},{"tags":["java","linux","amazon-web-services","ssh","amazon-ec2"],"comments":[{"owner":{"account_id":1391171,"reputation":1141,"user_id":1321976,"accept_rate":82,"display_name":"gimg1"},"score":0,"creation_date":1381488171,"post_id":19316116,"comment_id":28610589,"body_markdown":"This is a possible duplicate and will probably solve your issue: http://stackoverflow.com/questions/6356340/killing-a-process-using-java","body":"This is a possible duplicate and will probably solve your issue: <a href=\"http://stackoverflow.com/questions/6356340/killing-a-process-using-java\" title=\"killing a process using java\">stackoverflow.com/questions/6356340/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1408589,"reputation":3066,"user_id":1335661,"display_name":"Barak"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1381512035,"creation_date":1381512035,"answer_id":19323839,"question_id":19316116,"body_markdown":"Use the [SIGAR library][1] to scan the process list on a machine and kill your process.\r\n\r\nUse [getProcList()][2] to get all process IDs, [getProcArgs()][3] to get the full command line of each process, and [kill()][4] to kill the relevant process or processes.\r\n\r\nSo if a task is running and you want to kill it, SSH again into the machine and run your SIGAR based process killer.\r\n\r\n  [1]: https://support.hyperic.com/display/SIGAR/Home\r\n  [2]: http://www.hyperic.com/support/docs/sigar/org/hyperic/sigar/Sigar.html#getProcList%28%29\r\n  [3]: http://www.hyperic.com/support/docs/sigar/org/hyperic/sigar/Sigar.html#getProcArgs%28java.lang.String%29\r\n  [4]: http://www.hyperic.com/support/docs/sigar/org/hyperic/sigar/Sigar.html#kill%28long,%20int%29","title":"How to remotely kill a process on amazon EC2 linux instance","body":"<p>Use the <a href=\"https://support.hyperic.com/display/SIGAR/Home\" rel=\"nofollow\">SIGAR library</a> to scan the process list on a machine and kill your process.</p>\n\n<p>Use <a href=\"http://www.hyperic.com/support/docs/sigar/org/hyperic/sigar/Sigar.html#getProcList%28%29\" rel=\"nofollow\">getProcList()</a> to get all process IDs, <a href=\"http://www.hyperic.com/support/docs/sigar/org/hyperic/sigar/Sigar.html#getProcArgs%28java.lang.String%29\" rel=\"nofollow\">getProcArgs()</a> to get the full command line of each process, and <a href=\"http://www.hyperic.com/support/docs/sigar/org/hyperic/sigar/Sigar.html#kill%28long,%20int%29\" rel=\"nofollow\">kill()</a> to kill the relevant process or processes.</p>\n\n<p>So if a task is running and you want to kill it, SSH again into the machine and run your SIGAR based process killer.</p>\n"},{"tags":[],"owner":{"account_id":2277941,"reputation":10097,"user_id":2003763,"accept_rate":100,"display_name":"Thibault D."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1381560159,"creation_date":1381560159,"answer_id":19331358,"question_id":19316116,"body_markdown":"One dirty/functional way would be to kill your process via SSH using the java `Runtime` to execute it. \r\n\r\nSomething like\r\n\r\n    Runtime runtime = Runtime.getRuntime();\r\n    Process p = runtime.exec(&quot;ssh user@host command&quot;);\r\n\r\nSo in your case, if you know the program&#39;s PID (1234 for example):\r\n\r\n    Process p = runtime.exec(&quot;ssh user@host kill 1234&quot;);\r\n\r\nOr if you know the program&#39;s name:\r\n\r\n    Process p = runtime.exec(&quot;ssh user@host pkill my_program_name_x64&quot;);\r\n\r\nNote that you usually have to give absolute paths to the executables invoked via runtime. \r\n\r\nSo you&#39;ll have to replace ssh by something like `/bin/ssh` or `/usr/bin/ssh` as well as for `kill` and `pkill` or `killall`.","title":"How to remotely kill a process on amazon EC2 linux instance","body":"<p>One dirty/functional way would be to kill your process via SSH using the java <code>Runtime</code> to execute it. </p>\n\n<p>Something like</p>\n\n<pre><code>Runtime runtime = Runtime.getRuntime();\nProcess p = runtime.exec(\"ssh user@host command\");\n</code></pre>\n\n<p>So in your case, if you know the program's PID (1234 for example):</p>\n\n<pre><code>Process p = runtime.exec(\"ssh user@host kill 1234\");\n</code></pre>\n\n<p>Or if you know the program's name:</p>\n\n<pre><code>Process p = runtime.exec(\"ssh user@host pkill my_program_name_x64\");\n</code></pre>\n\n<p>Note that you usually have to give absolute paths to the executables invoked via runtime. </p>\n\n<p>So you'll have to replace ssh by something like <code>/bin/ssh</code> or <code>/usr/bin/ssh</code> as well as for <code>kill</code> and <code>pkill</code> or <code>killall</code>.</p>\n"}],"owner":{"account_id":403210,"reputation":7827,"user_id":770834,"accept_rate":70,"display_name":"Sami"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8881,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695276340,"creation_date":1381487920,"question_id":19316116,"body_markdown":"I use Amazon EC2 instances to perform some complex computation by using the AWS Java SDK, these computations might take so long sometimes. Hence, I need to kill the process running on the EC2 instance remotely from my Java code so that I can reuse the same instance for another task without needing to stop and start the instance.\r\n\r\nThe problem with stop and start, is that Amazon treat partial hours as complete hours, so my aim is to make my code more cost effective.\r\n\r\nI use SSH to connect with my EC2 instances and that is how I pass commands to be executed there. I doubt that if I disconnect the SSH connection and connect to it again, it would kill whatever process was running there. \r\n\r\nIn short, what I need is away of doing Ctrl+C but from within my Java code (without user intervention). Is that possible?\r\n\r\nEDIT:\r\nTo clarify, the computation is executed by a separate tool installed on the Linux EC2 instance. So I just pass the command to start this tool, then the command line waits until its finished and shows the results. On manual usage scenario, I can click Ctrl+C on linux command line and will get control of the command line back. But in my case, I want to do similar thing from java code if possible.","title":"How to remotely kill a process on amazon EC2 linux instance","body":"<p>I use Amazon EC2 instances to perform some complex computation by using the AWS Java SDK, these computations might take so long sometimes. Hence, I need to kill the process running on the EC2 instance remotely from my Java code so that I can reuse the same instance for another task without needing to stop and start the instance.</p>\n\n<p>The problem with stop and start, is that Amazon treat partial hours as complete hours, so my aim is to make my code more cost effective.</p>\n\n<p>I use SSH to connect with my EC2 instances and that is how I pass commands to be executed there. I doubt that if I disconnect the SSH connection and connect to it again, it would kill whatever process was running there. </p>\n\n<p>In short, what I need is away of doing Ctrl+C but from within my Java code (without user intervention). Is that possible?</p>\n\n<p>EDIT:\nTo clarify, the computation is executed by a separate tool installed on the Linux EC2 instance. So I just pass the command to start this tool, then the command line waits until its finished and shows the results. On manual usage scenario, I can click Ctrl+C on linux command line and will get control of the command line back. But in my case, I want to do similar thing from java code if possible.</p>\n"},{"tags":["java","android-studio"],"answers":[{"comments":[{"owner":{"account_id":4796924,"reputation":328,"user_id":3874595,"display_name":"Yetti99"},"score":2,"creation_date":1639494143,"post_id":68356338,"comment_id":124359303,"body_markdown":"Thanks but why can&#39;t Gradle give useful errors!","body":"Thanks but why can&#39;t Gradle give useful errors!"},{"owner":{"account_id":157423,"reputation":4810,"user_id":375368,"accept_rate":74,"display_name":"Nasenbaer"},"score":0,"creation_date":1647213937,"post_id":68356338,"comment_id":126308460,"body_markdown":"How did you fix it? I can not find this file anywhere but it must be there to use firebase.","body":"How did you fix it? I can not find this file anywhere but it must be there to use firebase."},{"owner":{"account_id":4002192,"reputation":420,"user_id":3602121,"display_name":"AnnawanDev"},"score":0,"creation_date":1678968110,"post_id":68356338,"comment_id":133637546,"body_markdown":"The build.gradle to modify is in android/build.gradle.  It will then be in your dependencies section","body":"The build.gradle to modify is in android/build.gradle.  It will then be in your dependencies section"}],"tags":[],"owner":{"account_id":22194785,"reputation":500,"user_id":16436336,"display_name":"BobTheCat"},"comment_count":3,"down_vote_count":0,"up_vote_count":47,"is_accepted":false,"score":47,"last_activity_date":1649903934,"creation_date":1626149113,"answer_id":68356338,"question_id":67948855,"body_markdown":"in build.gradle(Project Level) try upgrade google-services in dependencies\r\n\r\n&#39;com.google.gms:google-services:4.3.8&#39;\r\n\r\nthis upgrade as mentioned in here [Firebase][1]\r\n\r\n[![google-services plugin 4.3.8][2]][2]\r\n\r\n\r\n  [1]: https://firebase.google.com/support/release-notes/android#2021-05-14\r\n  [2]: https://i.stack.imgur.com/jhS9F.png","title":"Some problems were found with the configuration of task &#39;:app:processDebugGoogleServices&#39; (type &#39;GoogleServicesTask&#39;)","body":"<p>in build.gradle(Project Level) try upgrade google-services in dependencies</p>\n<p>'com.google.gms:google-services:4.3.8'</p>\n<p>this upgrade as mentioned in here <a href=\"https://firebase.google.com/support/release-notes/android#2021-05-14\" rel=\"noreferrer\">Firebase</a></p>\n<p><a href=\"https://i.stack.imgur.com/jhS9F.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jhS9F.png\" alt=\"google-services plugin 4.3.8\" /></a></p>\n"},{"comments":[{"owner":{"account_id":6948355,"reputation":81,"user_id":5331880,"display_name":"Jo&#227;o Paulichi"},"score":0,"creation_date":1702229376,"post_id":77147525,"comment_id":136868237,"body_markdown":"This solution worked for me!","body":"This solution worked for me!"}],"tags":[],"owner":{"account_id":22968379,"reputation":51,"user_id":17097138,"display_name":"Danson Official"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1695275976,"creation_date":1695275976,"answer_id":77147525,"question_id":67948855,"body_markdown":"Just upgrade to the latest version of ***com.google.gms:google-services***\r\nin the **build.gradle(project..)** file.\r\n\r\nIf its not available then add the dependency\r\n[![enter image description here][1]][1]\r\n\r\nThis worked for me and you can find the latest version of ***com.google.gms:google-services*** [here][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/npnat.png\r\n  [2]: https://mvnrepository.com/artifact/com.google.gms/google-services?repo=google","title":"Some problems were found with the configuration of task &#39;:app:processDebugGoogleServices&#39; (type &#39;GoogleServicesTask&#39;)","body":"<p>Just upgrade to the latest version of <em><strong>com.google.gms:google-services</strong></em>\nin the <strong>build.gradle(project..)</strong> file.</p>\n<p>If its not available then add the dependency\n<a href=\"https://i.stack.imgur.com/npnat.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/npnat.png\" alt=\"enter image description here\" /></a></p>\n<p>This worked for me and you can find the latest version of <em><strong>com.google.gms:google-services</strong></em> <a href=\"https://mvnrepository.com/artifact/com.google.gms/google-services?repo=google\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":21923835,"reputation":201,"user_id":16206738,"display_name":"BenKratos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25343,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"answer_count":2,"score":20,"last_activity_date":1695275976,"creation_date":1623500952,"question_id":67948855,"body_markdown":"I&#39;m pretty new to android studio and I am doing my project and I am stuck because of this error and cant find a solution anywhere\r\n\r\n&gt; Some problems were found with the configuration of task &#39;:app:processDebugGoogleServices&#39; (type &#39;GoogleServicesTask&#39;).\r\n  - Type &#39;com.google.gms.googleservices.GoogleServicesTask&#39; field &#39;intermediateDir&#39; without corresponding getter has been annotated with @OutputDirectory.","title":"Some problems were found with the configuration of task &#39;:app:processDebugGoogleServices&#39; (type &#39;GoogleServicesTask&#39;)","body":"<p>I'm pretty new to android studio and I am doing my project and I am stuck because of this error and cant find a solution anywhere</p>\n<blockquote>\n<p>Some problems were found with the configuration of task ':app:processDebugGoogleServices' (type 'GoogleServicesTask').</p>\n</blockquote>\n<ul>\n<li>Type 'com.google.gms.googleservices.GoogleServicesTask' field 'intermediateDir' without corresponding getter has been annotated with @OutputDirectory.</li>\n</ul>\n"},{"tags":["java","multithreading","vector"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":3,"creation_date":1695274226,"post_id":77147394,"comment_id":136002956,"body_markdown":"and why on earth would you want to use a vector, a class that is so obsolete?","body":"and why on earth would you want to use a vector, a class that is so obsolete?"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":2,"creation_date":1695274302,"post_id":77147394,"comment_id":136002974,"body_markdown":"Please read [ask] and provide a [mcve]. Go ahead and code something, once you have a problem come back here and ask it then.","body":"Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Go ahead and code something, once you have a problem come back here and ask it then."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1695274782,"post_id":77147394,"comment_id":136003031,"body_markdown":"I tried to clean up your code formatting, but it needs more work. Take more care when posting here.","body":"I tried to clean up your code formatting, but it needs more work. Take more care when posting here."}],"answers":[{"comments":[{"owner":{"account_id":13212739,"reputation":1,"user_id":19965154,"display_name":"Polash"},"score":0,"creation_date":1695275123,"post_id":77147416,"comment_id":136003069,"body_markdown":"Can we maintain threads by using executor service?","body":"Can we maintain threads by using executor service?"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695275190,"post_id":77147416,"comment_id":136003077,"body_markdown":"@Polash I have no idea what you mean by &quot;maintain threads&quot;.","body":"@Polash I have no idea what you mean by &quot;maintain threads&quot;."},{"owner":{"account_id":13212739,"reputation":1,"user_id":19965154,"display_name":"Polash"},"score":0,"creation_date":1695275213,"post_id":77147416,"comment_id":136003079,"body_markdown":"Can we check how many threads are currently free in executor service?","body":"Can we check how many threads are currently free in executor service?"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1695275294,"post_id":77147416,"comment_id":136003091,"body_markdown":"@Polash You do not care about threads being free/available. You submit tasks to the executor service. That service sees to it that your tasks get scheduled on threads for eventual execution.","body":"@Polash You do not care about threads being free/available. You submit tasks to the executor service. That service sees to it that your tasks get scheduled on threads for eventual execution."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1695275406,"post_id":77147416,"comment_id":136003111,"body_markdown":"@Polash You have not carefully delineated your actual goal, so I cannot outline any logic in more detail than I already have. I suggest you spend some time learning about how threading works, and about how to use an executor service. Again, search Stack Overflow to find many existing Answers on that topic as well as complete examples of interacting with a database in JDBC.","body":"@Polash You have not carefully delineated your actual goal, so I cannot outline any logic in more detail than I already have. I suggest you spend some time learning about how threading works, and about how to use an executor service. Again, search Stack Overflow to find many existing Answers on that topic as well as complete examples of interacting with a database in JDBC."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695275493,"post_id":77147416,"comment_id":136003130,"body_markdown":"@Polash Tip: Search Stack Overflow using a search engine such as Bing or Google. The search feature within the StackOverflow.com web site is weak and flawed. For [example](https://www.ecosia.org/search?q=site%3Astackoverflow.com%20java%20ScheduledExecutorService&amp;tts=st_asaf_macos).","body":"@Polash Tip: Search Stack Overflow using a search engine such as Bing or Google. The search feature within the StackOverflow.com web site is weak and flawed. For <a href=\"https://www.ecosia.org/search?q=site%3Astackoverflow.com%20java%20ScheduledExecutorService&amp;tts=st_asaf_macos\" rel=\"nofollow noreferrer\">example</a>."},{"owner":{"account_id":13212739,"reputation":1,"user_id":19965154,"display_name":"Polash"},"score":0,"creation_date":1695275581,"post_id":77147416,"comment_id":136003138,"body_markdown":"I want o make fixed number of threads initially. Let&#39;s say we have created 5 threads. At First the main method pull 5 data and give the 5 threads to process. Different threads take different amount of time to process. Let&#39;s say after giving the 5 data main thread goes to sleep for 10 seconds and after waking up it saw that 2 threads have done processing so now main method will  pull 2 data from database and give them to the 2 currently available threads. Can we Build this logic in executor service?","body":"I want o make fixed number of threads initially. Let&#39;s say we have created 5 threads. At First the main method pull 5 data and give the 5 threads to process. Different threads take different amount of time to process. Let&#39;s say after giving the 5 data main thread goes to sleep for 10 seconds and after waking up it saw that 2 threads have done processing so now main method will  pull 2 data from database and give them to the 2 currently available threads. Can we Build this logic in executor service?"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1695277119,"post_id":77147416,"comment_id":136003350,"body_markdown":"@Polash You&#39;re missing the point, the executor service can be configured with a fixed number or a pool of threads - beyond that, you don&#39;t care, just pass work to the executor and let it run.  You make use of `Future`s and/or wait for the current tasks to complete executing and then do more work","body":"@Polash You&#39;re missing the point, the executor service can be configured with a fixed number or a pool of threads - beyond that, you don&#39;t care, just pass work to the executor and let it run.  You make use of <code>Future</code>s and/or wait for the current tasks to complete executing and then do more work"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1695277315,"post_id":77147416,"comment_id":136003381,"body_markdown":"@Polash Submit *all* your tasks to the executor service. The executor service then assigns those tasks to available threads, one after another, just as you described.","body":"@Polash Submit <i>all</i> your tasks to the executor service. The executor service then assigns those tasks to available threads, one after another, just as you described."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":9,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1695275960,"creation_date":1695274395,"answer_id":77147416,"question_id":77147394,"body_markdown":"[`Vector`][1] is a [legacy][2] class, as noted in its Javadoc, invented before the [Java Collections Framework][3]. Instead use a [`SequencedCollection`][4] implementation, such as [`ArrayList`][5] or [`TreeSet`][6]. \r\n\r\nBut for your purpose, use something else. Use an [executor service][7] to manage threads on your behalf.\r\n\r\n&gt; check how many active threads\r\n\r\nYour desired work to be done (tasks) drives the use of threads, not the other way around.\r\n\r\nDefine your tasks as a `Runnable` or `Callable` object. Then submit to an executor service for execution on a background thread. \r\n\r\nIf you want to query your database repeatedly, use a [scheduled executor service][8] to repeat a `Runnable`/`Callable` task. Within that task, query the database. If you find records in the database that need to be processed, instantiate `Runnable`/`Callable` objects for that purpose, and submit to another executor service. In Java 21+, assuming your tasks are not entirely [CPU-bound][9], generally best to use an [executor service backed by virtual threads][10]. \r\n\r\n&gt; assign them to process data from database concurrently\r\n\r\nJust establish an executor service instance, submit one or more tasks (`Runnable`/`Callable` objects), and then automatically close the executor service with try-with-resources syntax. This has been shown [several times already][11] on Stack Overflow.\r\n\r\n----------\r\n\r\n\r\nBy the way, `Class.forName` has not been needed for many years now. In modern Java, all the JDBC drivers are automatically loaded by the [Java Service Provider Interface (SPI)][12]. \r\n\r\nTip: Learn to set up your database connection info (username, password, etc.) within an object implementing the [`DataSource`][13] interface.\r\n\r\nOverall, it sounds like you are working off an ancient tutorial. Find more recent materials to study. Also, you can find many existing Questions and Answers on all these topics mentioned here.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Vector.html\r\n  [2]: https://en.wikipedia.org/wiki/Legacy_system\r\n  [3]: https://en.wikipedia.org/wiki/Java_collections_framework\r\n  [4]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\r\n  [5]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/ArrayList.html\r\n  [6]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/TreeSet.html\r\n  [7]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ExecutorService.html\r\n  [8]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ScheduledExecutorService.html\r\n  [9]: https://en.wikipedia.org/wiki/CPU-bound\r\n  [10]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Executors.html#newVirtualThreadPerTaskExecutor()\r\n  [11]: https://www.ecosia.org/search?q=site%3Astackoverflow.com%20ExecutorService%20try-with-resources%20syntax&amp;tts=st_asaf_macos\r\n  [12]: https://en.wikipedia.org/wiki/Service_provider_interface\r\n  [13]: https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/javax/sql/DataSource.html","title":"Can I create a vector of threads and use to process data concurrently from database table in Java?","body":"<p><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Vector.html\" rel=\"nofollow noreferrer\"><code>Vector</code></a> is a <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"nofollow noreferrer\">legacy</a> class, as noted in its Javadoc, invented before the <a href=\"https://en.wikipedia.org/wiki/Java_collections_framework\" rel=\"nofollow noreferrer\">Java Collections Framework</a>. Instead use a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedCollection</code></a> implementation, such as <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/ArrayList.html\" rel=\"nofollow noreferrer\"><code>ArrayList</code></a> or <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/TreeSet.html\" rel=\"nofollow noreferrer\"><code>TreeSet</code></a>.</p>\n<p>But for your purpose, use something else. Use an <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ExecutorService.html\" rel=\"nofollow noreferrer\">executor service</a> to manage threads on your behalf.</p>\n<blockquote>\n<p>check how many active threads</p>\n</blockquote>\n<p>Your desired work to be done (tasks) drives the use of threads, not the other way around.</p>\n<p>Define your tasks as a <code>Runnable</code> or <code>Callable</code> object. Then submit to an executor service for execution on a background thread.</p>\n<p>If you want to query your database repeatedly, use a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ScheduledExecutorService.html\" rel=\"nofollow noreferrer\">scheduled executor service</a> to repeat a <code>Runnable</code>/<code>Callable</code> task. Within that task, query the database. If you find records in the database that need to be processed, instantiate <code>Runnable</code>/<code>Callable</code> objects for that purpose, and submit to another executor service. In Java 21+, assuming your tasks are not entirely <a href=\"https://en.wikipedia.org/wiki/CPU-bound\" rel=\"nofollow noreferrer\">CPU-bound</a>, generally best to use an <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Executors.html#newVirtualThreadPerTaskExecutor()\" rel=\"nofollow noreferrer\">executor service backed by virtual threads</a>.</p>\n<blockquote>\n<p>assign them to process data from database concurrently</p>\n</blockquote>\n<p>Just establish an executor service instance, submit one or more tasks (<code>Runnable</code>/<code>Callable</code> objects), and then automatically close the executor service with try-with-resources syntax. This has been shown <a href=\"https://www.ecosia.org/search?q=site%3Astackoverflow.com%20ExecutorService%20try-with-resources%20syntax&amp;tts=st_asaf_macos\" rel=\"nofollow noreferrer\">several times already</a> on Stack Overflow.</p>\n<hr />\n<p>By the way, <code>Class.forName</code> has not been needed for many years now. In modern Java, all the JDBC drivers are automatically loaded by the <a href=\"https://en.wikipedia.org/wiki/Service_provider_interface\" rel=\"nofollow noreferrer\">Java Service Provider Interface (SPI)</a>.</p>\n<p>Tip: Learn to set up your database connection info (username, password, etc.) within an object implementing the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/javax/sql/DataSource.html\" rel=\"nofollow noreferrer\"><code>DataSource</code></a> interface.</p>\n<p>Overall, it sounds like you are working off an ancient tutorial. Find more recent materials to study. Also, you can find many existing Questions and Answers on all these topics mentioned here.</p>\n"}],"owner":{"account_id":13212739,"reputation":1,"user_id":19965154,"display_name":"Polash"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":1,"score":-4,"last_activity_date":1695275960,"creation_date":1695274019,"question_id":77147394,"body_markdown":"`Can I create a vector of threads in java \r\nVector&lt;Thread&gt; threads = new Vector&lt;&gt;(5);\r\n\r\nAnd assign them to process data from database concurrently \r\n\r\nI want to make a Java program where main method first check how many active threads are there in the vector and pull that amount of data from the database and process those data and then main thread will go to sleep for 10 seconds \r\nAfter waking up from the sleep the main thread will how many threads are free at this moment Let&#39;s say there are 3 threads are free at this moment so the main thread will pull next 3 data from the database \r\n\r\nCan someone please help me to build the logic and design to implement this in java \r\nIt would be a great help `\r\n\r\n```java\r\nClass.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n                        Connection connection = DriverManager.getConnection(DB_URL, DB_USER, DB_PASSWORD);\r\n\r\n                        String selectQuery = &quot;SELECT dataName, dataItem FROM thread&quot;;\r\n  PreparedStatement preparedStatement = connection.prepareStatement(selectQuery);                              \r\n                        ResultSet rs = preparedStatement.executeQuery();\r\n\r\n                        while (rs.next()) {\r\n                            String dataName = rs.getString(&quot;dataName&quot;);\r\n                            String dataItem = rs.getString(&quot;dataItem&quot;);\r\n                            for (DataProcessingThread thread : threadVector) {\r\n                                if (!thread.isProcessing()) {\r\n                                    thread.setData(dataName, dataItem);\r\n                                    break;\r\n                                }\r\n                            }`\r\nThis is database connection \r\n```","title":"Can I create a vector of threads and use to process data concurrently from database table in Java?","body":"<p>`Can I create a vector of threads in java\nVector threads = new Vector&lt;&gt;(5);</p>\n<p>And assign them to process data from database concurrently</p>\n<p>I want to make a Java program where main method first check how many active threads are there in the vector and pull that amount of data from the database and process those data and then main thread will go to sleep for 10 seconds\nAfter waking up from the sleep the main thread will how many threads are free at this moment Let's say there are 3 threads are free at this moment so the main thread will pull next 3 data from the database</p>\n<p>Can someone please help me to build the logic and design to implement this in java\nIt would be a great help `</p>\n<pre class=\"lang-java prettyprint-override\"><code>Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n                        Connection connection = DriverManager.getConnection(DB_URL, DB_USER, DB_PASSWORD);\n\n                        String selectQuery = &quot;SELECT dataName, dataItem FROM thread&quot;;\n  PreparedStatement preparedStatement = connection.prepareStatement(selectQuery);                              \n                        ResultSet rs = preparedStatement.executeQuery();\n\n                        while (rs.next()) {\n                            String dataName = rs.getString(&quot;dataName&quot;);\n                            String dataItem = rs.getString(&quot;dataItem&quot;);\n                            for (DataProcessingThread thread : threadVector) {\n                                if (!thread.isProcessing()) {\n                                    thread.setData(dataName, dataItem);\n                                    break;\n                                }\n                            }`\nThis is database connection \n</code></pre>\n"},{"tags":["java","windows","eclipse","ssl","certificate"],"comments":[{"owner":{"account_id":3158999,"reputation":845,"user_id":2670685,"accept_rate":14,"display_name":"V P"},"score":0,"creation_date":1604249606,"post_id":61011392,"comment_id":114283304,"body_markdown":"I also have same problem (in my case OpenJDK 11 on NetBSD 9.1)","body":"I also have same problem (in my case OpenJDK 11 on NetBSD 9.1)"},{"owner":{"account_id":1487767,"reputation":3165,"user_id":1395620,"display_name":"Daniel Santos"},"score":0,"creation_date":1675456096,"post_id":61011392,"comment_id":132940555,"body_markdown":"Same on Gentoo, OpenJDK 11.0.18. I saw somewhere it&#39;s a damned key that isn&#39;t installed. If I confirm and fix it, I&#39;ll post an answer.","body":"Same on Gentoo, OpenJDK 11.0.18. I saw somewhere it&#39;s a damned key that isn&#39;t installed. If I confirm and fix it, I&#39;ll post an answer."}],"answers":[{"tags":[],"owner":{"account_id":1487767,"reputation":3165,"user_id":1395620,"display_name":"Daniel Santos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695273022,"creation_date":1695270313,"answer_id":77147199,"question_id":61011392,"body_markdown":"### UPDATE!\r\nAll of my JDKs and JREs have bad symlinks to `/etc/ssl/certs/java/cacerts` and this appears to be the root cause. On my system, JDKs are installed into `/usr/opt` but the installer fatally expected to be able to access the symlink via a bad relative path:\r\n\r\n```\r\n# ll /usr/opt/openjdk-*/lib/security/cacerts\r\nlrwxrwxrwx 1 root root 27 Sep 20 23:48 /usr/opt/openjdk-bin-11.0.18_p10/lib/security/cacerts -&gt; /etc/ssl/certs/java/cacerts\r\nlrwxrwxrwx 1 root root 27 Sep 20 23:48 /usr/opt/openjdk-bin-11/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\r\nlrwxrwxrwx 1 root root 38 Mar  8  2023 /usr/opt/openjdk-bin-17.0.6_p10/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\r\nlrwxrwxrwx 1 root root 38 Mar  8  2023 /usr/opt/openjdk-bin-17/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\r\nlrwxrwxrwx 1 root root 38 Mar  6  2023 /usr/opt/openjdk-jre-bin-11.0.12_p7/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\r\nlrwxrwxrwx 1 root root 38 Mar  6  2023 /usr/opt/openjdk-jre-bin-11/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\r\nlrwxrwxrwx 1 root root 38 Mar  6  2023 /usr/opt/openjdk-jre-bin-8.362_p09/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\r\nlrwxrwxrwx 1 root root 38 Mar  6  2023 /usr/opt/openjdk-jre-bin-8/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\r\n```\r\n\r\nBut you&#39;ll need to figure out where your JVMs are installed. On my Debian laptop they are in `/usr/lib/jvm`.\r\n\r\nSo to fix this without having to reinstall, I would suggest the following.\r\n\r\n 1. Make sure this is really the cause first. Do a long listing and make sure you&#39;re seeing broken symlinks. (if you have `alias ls=&#39;ls --color=auto&#39;` they will be annoyingly blinking red)\r\n```\r\nls -alF /usr/opt/openjdk-*/lib/security/cacerts\r\n# or\r\nls -alF /usr/lib/jvm/*/lib/security/cacerts\r\n```\r\n\r\nIf you see those tags blinking until the end of days, then you can first test this as a normal user (you should get permission denied) and then run it as root. Change the path and pattern to what matches on your system\r\n\r\n```sh\r\nfor f in $(ls /usr/opt/openjdk-*/lib/security/cacerts); do\r\n    [[ -e $f ]] || ln -sf /etc/ssl/certs/java/cacerts $f;\r\ndone\r\n```\r\n\r\n### ORIGINAL ANSWER\r\n\r\nI&#39;m running Gentoo Linux and I finally solved this by... wait for it... reinstalling `dev-java/icedtea`! I feel like it&#39;s a super-lame answer, but it&#39;s the *only* thing that worked. A lot of people have had this problem and I hope this helps somebody. I recall reading a bug report a few years ago in OpenJDK or icedtea project about this, but I haven&#39;t been able to track that down again. I presume reinstalling worked because I somehow had the old jars with the bug and the new version has the fix, but I can&#39;t be 100% certain.\r\n\r\nSpecifically, I ran:\r\n```sh\r\nsudo emerge -1v dev-java/icedtea\r\neselect java-vm set user icedtea-8\r\nANDROID_HOME=/home/daniel/.android-sdk-update-manager /home/daniel/.android-sdk-update-manager/tools/bin/sdkmanager --list\r\n```\r\n\r\nIf you are using Ubuntu, Debian, etc. I presume you&#39;ll want to `apt install --reinstall openjdk-8-jre` or whatever your Java 8 package is called.","title":"Java: the trustAnchors parameter must be non-empty (openjdk)","body":"<h3>UPDATE!</h3>\n<p>All of my JDKs and JREs have bad symlinks to <code>/etc/ssl/certs/java/cacerts</code> and this appears to be the root cause. On my system, JDKs are installed into <code>/usr/opt</code> but the installer fatally expected to be able to access the symlink via a bad relative path:</p>\n<pre><code># ll /usr/opt/openjdk-*/lib/security/cacerts\nlrwxrwxrwx 1 root root 27 Sep 20 23:48 /usr/opt/openjdk-bin-11.0.18_p10/lib/security/cacerts -&gt; /etc/ssl/certs/java/cacerts\nlrwxrwxrwx 1 root root 27 Sep 20 23:48 /usr/opt/openjdk-bin-11/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\nlrwxrwxrwx 1 root root 38 Mar  8  2023 /usr/opt/openjdk-bin-17.0.6_p10/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\nlrwxrwxrwx 1 root root 38 Mar  8  2023 /usr/opt/openjdk-bin-17/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\nlrwxrwxrwx 1 root root 38 Mar  6  2023 /usr/opt/openjdk-jre-bin-11.0.12_p7/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\nlrwxrwxrwx 1 root root 38 Mar  6  2023 /usr/opt/openjdk-jre-bin-11/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\nlrwxrwxrwx 1 root root 38 Mar  6  2023 /usr/opt/openjdk-jre-bin-8.362_p09/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\nlrwxrwxrwx 1 root root 38 Mar  6  2023 /usr/opt/openjdk-jre-bin-8/lib/security/cacerts -&gt; ../../../../etc/ssl/certs/java/cacerts\n</code></pre>\n<p>But you'll need to figure out where your JVMs are installed. On my Debian laptop they are in <code>/usr/lib/jvm</code>.</p>\n<p>So to fix this without having to reinstall, I would suggest the following.</p>\n<ol>\n<li>Make sure this is really the cause first. Do a long listing and make sure you're seeing broken symlinks. (if you have <code>alias ls='ls --color=auto'</code> they will be annoyingly blinking red)</li>\n</ol>\n<pre><code>ls -alF /usr/opt/openjdk-*/lib/security/cacerts\n# or\nls -alF /usr/lib/jvm/*/lib/security/cacerts\n</code></pre>\n<p>If you see those tags blinking until the end of days, then you can first test this as a normal user (you should get permission denied) and then run it as root. Change the path and pattern to what matches on your system</p>\n<pre class=\"lang-bash prettyprint-override\"><code>for f in $(ls /usr/opt/openjdk-*/lib/security/cacerts); do\n    [[ -e $f ]] || ln -sf /etc/ssl/certs/java/cacerts $f;\ndone\n</code></pre>\n<h3>ORIGINAL ANSWER</h3>\n<p>I'm running Gentoo Linux and I finally solved this by... wait for it... reinstalling <code>dev-java/icedtea</code>! I feel like it's a super-lame answer, but it's the <em>only</em> thing that worked. A lot of people have had this problem and I hope this helps somebody. I recall reading a bug report a few years ago in OpenJDK or icedtea project about this, but I haven't been able to track that down again. I presume reinstalling worked because I somehow had the old jars with the bug and the new version has the fix, but I can't be 100% certain.</p>\n<p>Specifically, I ran:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>sudo emerge -1v dev-java/icedtea\neselect java-vm set user icedtea-8\nANDROID_HOME=/home/daniel/.android-sdk-update-manager /home/daniel/.android-sdk-update-manager/tools/bin/sdkmanager --list\n</code></pre>\n<p>If you are using Ubuntu, Debian, etc. I presume you'll want to <code>apt install --reinstall openjdk-8-jre</code> or whatever your Java 8 package is called.</p>\n"}],"owner":{"account_id":7985221,"reputation":197,"user_id":7087118,"accept_rate":100,"display_name":"Alexander Jeitler-Stehr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":649,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695273022,"creation_date":1585915048,"question_id":61011392,"body_markdown":"I want to connect to a site via HttpURLConnection. First of all I stumbled accross *javax.net.ssl.SSLHandshakeException*, as I&#39;ve forgotten to add the carcerts via *keytool -importcert* for the site under .../lib/security. After that, the connection could have been established with ease.\r\n\r\nHowever, today it&#39;s not working anymore, without changing code nor anything else. Following exception is seemed to be thrown:\r\n\r\n     javax.net.ssl.SSLException: Unexpected error: java.security.InvalidAlgorithmParameterException: the \r\n     trustAnchors parameter must be non-empty\r\n\r\nEven though there are plenty of possible solutions on the net, none of them could me get rid off this error.\r\n\r\nMaybe there is some setup needed to be done inside eclipse?\r\n\r\n","title":"Java: the trustAnchors parameter must be non-empty (openjdk)","body":"<p>I want to connect to a site via HttpURLConnection. First of all I stumbled accross <em>javax.net.ssl.SSLHandshakeException</em>, as I've forgotten to add the carcerts via <em>keytool -importcert</em> for the site under .../lib/security. After that, the connection could have been established with ease.</p>\n\n<p>However, today it's not working anymore, without changing code nor anything else. Following exception is seemed to be thrown:</p>\n\n<pre><code> javax.net.ssl.SSLException: Unexpected error: java.security.InvalidAlgorithmParameterException: the \n trustAnchors parameter must be non-empty\n</code></pre>\n\n<p>Even though there are plenty of possible solutions on the net, none of them could me get rid off this error.</p>\n\n<p>Maybe there is some setup needed to be done inside eclipse?</p>\n"},{"tags":["java","android","navigationview"],"comments":[{"owner":{"account_id":4545435,"reputation":860,"user_id":3692177,"accept_rate":88,"display_name":"SebasSBM"},"score":0,"creation_date":1662940413,"post_id":73683267,"comment_id":130115669,"body_markdown":"Even though I do not use Kotlin, I&#39;m not too afraid of it. I could convert it to `Java` most probably anyway...","body":"Even though I do not use Kotlin, I&#39;m not too afraid of it. I could convert it to <code>Java</code> most probably anyway..."},{"owner":{"account_id":1849514,"reputation":193878,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":1,"creation_date":1662943337,"post_id":73683267,"comment_id":130115981,"body_markdown":"So if you know how to get a particular MenuItem, why aren&#39;t you using [`getActionView()`](https://developer.android.com/reference/android/view/MenuItem#getActionView())?","body":"So if you know how to get a particular MenuItem, why aren&#39;t you using <a href=\"https://developer.android.com/reference/android/view/MenuItem#getActionView()\" rel=\"nofollow noreferrer\"><code>getActionView()</code></a>?"},{"owner":{"account_id":4545435,"reputation":860,"user_id":3692177,"accept_rate":88,"display_name":"SebasSBM"},"score":0,"creation_date":1662949628,"post_id":73683267,"comment_id":130116621,"body_markdown":"@ianhanniballake because I just didn&#39;t knew it existed... let&#39;s try this out...","body":"@ianhanniballake because I just didn&#39;t knew it existed... let&#39;s try this out..."}],"answers":[{"comments":[{"owner":{"account_id":4545435,"reputation":860,"user_id":3692177,"accept_rate":88,"display_name":"SebasSBM"},"score":0,"creation_date":1662952576,"post_id":73684096,"comment_id":130116900,"body_markdown":"Would self-accepting my answer too soon be unfair? I wonder...","body":"Would self-accepting my answer too soon be unfair? I wonder..."}],"tags":[],"owner":{"account_id":4545435,"reputation":860,"user_id":3692177,"accept_rate":88,"display_name":"SebasSBM"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662952291,"creation_date":1662951877,"answer_id":73684096,"question_id":73683267,"body_markdown":"Good! @ianhanniballake &#39;s suggested method worked like a charm. If I do this:\r\n\r\n    NavigationView nav_v = findViewById(R.id.navigation_view);\r\n    MenuItem nav_option1 = nav_v.getMenu().findItem(R.id.menu_item1);\r\n    ImageView option1_lock_icon = nav_option1.getActionView().findViewById(R.id.lockedIcon);\r\n\r\nAnd from there, I could do whatever I want with this `ImageView`:\r\n\r\n    // Toggle visibility approach\r\n    if (item_locked) {\r\n        option1_lock_icon.setVisibility(View.VISIBLE);\r\n    } else {\r\n        option1_lock_icon.setVisibility(View.INVISIBLE);\r\n    }\r\n\r\n    // Change icon approach\r\n    string uri = &quot;&quot;;\r\n    if (item_locked) {\r\n        uri = &quot;@android:drawable/ic_lock_idle_lock&quot;;\r\n    } else {\r\n        uri = &quot;@android:drawable/ic_menu_view&quot;;\r\n    }\r\n    int imageResource = getResources()\r\n          .getIdentifier(uri,\r\n                         null,\r\n                         getPackageName()\r\n          );\r\n    option1_lock_icon.setImageDrawable(\r\n           getResources().getDrawable(imageResource)\r\n    );\r\n\r\nAlso, it looks like I can do more or less the same with any object I add to those &quot;action layouts&quot;. :-)","title":"NavigationView menu items with actionLayout. How can I set those action layout&#39;s attribute for each item?","body":"<p>Good! @ianhanniballake 's suggested method worked like a charm. If I do this:</p>\n<pre><code>NavigationView nav_v = findViewById(R.id.navigation_view);\nMenuItem nav_option1 = nav_v.getMenu().findItem(R.id.menu_item1);\nImageView option1_lock_icon = nav_option1.getActionView().findViewById(R.id.lockedIcon);\n</code></pre>\n<p>And from there, I could do whatever I want with this <code>ImageView</code>:</p>\n<pre><code>// Toggle visibility approach\nif (item_locked) {\n    option1_lock_icon.setVisibility(View.VISIBLE);\n} else {\n    option1_lock_icon.setVisibility(View.INVISIBLE);\n}\n\n// Change icon approach\nstring uri = &quot;&quot;;\nif (item_locked) {\n    uri = &quot;@android:drawable/ic_lock_idle_lock&quot;;\n} else {\n    uri = &quot;@android:drawable/ic_menu_view&quot;;\n}\nint imageResource = getResources()\n      .getIdentifier(uri,\n                     null,\n                     getPackageName()\n      );\noption1_lock_icon.setImageDrawable(\n       getResources().getDrawable(imageResource)\n);\n</code></pre>\n<p>Also, it looks like I can do more or less the same with any object I add to those &quot;action layouts&quot;. :-)</p>\n"}],"owner":{"account_id":4545435,"reputation":860,"user_id":3692177,"accept_rate":88,"display_name":"SebasSBM"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":424,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73684096,"answer_count":1,"score":0,"last_activity_date":1695270346,"creation_date":1662939115,"question_id":73683267,"body_markdown":"Following [this answer][1], I learned how to add extra views to the `NavigationView`&#39;s menu items, by adding an `action layout`. My question is, essentially, how can I tweak each of those individual `actionLayout`s dynamically, through Java?\r\n\r\nIn my case, instead of adding a &quot;switch&quot; to the menu items, I used `actionLayout`s to add an extra icon that will show a state for that item. It&#39;s a boolean state, so I want to show the difference either by changing the extra icon dynamically or by toggling visibility.\r\n\r\nSo I have a `menu.xml` like this one for my `NavigationView`:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        tools:showIn=&quot;navigation_view&quot;&gt;\r\n\r\n        &lt;group android:id=&quot;@+id/menu_group&quot;\r\n            android:checkableBehavior=&quot;single&quot; &gt;\r\n            &lt;item\r\n                android:id=&quot;@+id/menu_item1&quot;\r\n                android:icon=&quot;@drawable/some_main_icon&quot;\r\n                app:actionLayout=&quot;@layout/myflag_actionlayout&quot;\r\n                android:title=&quot;OPTION 1&quot; /&gt;\r\n            &lt;item\r\n                android:id=&quot;@+id/menu_item2&quot;\r\n                android:icon=&quot;@drawable/some_main_icon&quot;\r\n                app:actionLayout=&quot;@layout/myflag_actionlayout&quot;\r\n                android:title=&quot;OPTION 2&quot; /&gt;\r\n            &lt;!-- etc. --&gt;\r\n        &lt;/group&gt;\r\n    &lt;/menu&gt;\r\n\r\n...and my `myflag_actionlayout.xml` file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:background=&quot;#444444&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/lockedIcon&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            app:srcCompat=&quot;@android:drawable/ic_lock_idle_lock&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\nSo it looks like this more or less:\r\n\r\n[![my_new_menu_items][2]][2]\r\n\r\nNow I wonder: how can I get each of those menu items&#39; instances, access their `&lt;ImageView&gt;` instance from Java, and change each `lockedIcon`&#39;s `ImageView` depending on a boolean variable? (For instance, toggling the `ImageView`&#39;s visible attribute or changing the image for `app:srcCompat` attribute) Should I use some `findViewById(R.id.lockedIcon)` for this task, or is it a bad idea and I should do it another way?\r\n\r\n#### EDIT:\r\nJust now I recall, I already did something similar to access those &quot;`NavigationView` items&quot; by Java, and add a string to the counter editing the title:\r\n\r\n    NavigationView nav_v = findViewById(R.id.navigation_view);\r\n    MenuItem nav_option1 = nav_v.getMenu().findItem(R.id.menu_item1);\r\n    nav_option1.setTitle(getString(R.string.nav_option1_title) + &quot; -&gt; &quot; + some_counter);\r\n\r\nMaybe i can from `nav_option1` invoke some method to access its action layout?\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/51668942/3692177\r\n  [2]: https://i.stack.imgur.com/p3bbp.png","title":"NavigationView menu items with actionLayout. How can I set those action layout&#39;s attribute for each item?","body":"<p>Following <a href=\"https://stackoverflow.com/a/51668942/3692177\">this answer</a>, I learned how to add extra views to the <code>NavigationView</code>'s menu items, by adding an <code>action layout</code>. My question is, essentially, how can I tweak each of those individual <code>actionLayout</code>s dynamically, through Java?</p>\n<p>In my case, instead of adding a &quot;switch&quot; to the menu items, I used <code>actionLayout</code>s to add an extra icon that will show a state for that item. It's a boolean state, so I want to show the difference either by changing the extra icon dynamically or by toggling visibility.</p>\n<p>So I have a <code>menu.xml</code> like this one for my <code>NavigationView</code>:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    tools:showIn=&quot;navigation_view&quot;&gt;\n\n    &lt;group android:id=&quot;@+id/menu_group&quot;\n        android:checkableBehavior=&quot;single&quot; &gt;\n        &lt;item\n            android:id=&quot;@+id/menu_item1&quot;\n            android:icon=&quot;@drawable/some_main_icon&quot;\n            app:actionLayout=&quot;@layout/myflag_actionlayout&quot;\n            android:title=&quot;OPTION 1&quot; /&gt;\n        &lt;item\n            android:id=&quot;@+id/menu_item2&quot;\n            android:icon=&quot;@drawable/some_main_icon&quot;\n            app:actionLayout=&quot;@layout/myflag_actionlayout&quot;\n            android:title=&quot;OPTION 2&quot; /&gt;\n        &lt;!-- etc. --&gt;\n    &lt;/group&gt;\n&lt;/menu&gt;\n</code></pre>\n<p>...and my <code>myflag_actionlayout.xml</code> file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:orientation=&quot;vertical&quot;\n    android:background=&quot;#444444&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;ImageView\n        android:id=&quot;@+id/lockedIcon&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;match_parent&quot;\n        app:srcCompat=&quot;@android:drawable/ic_lock_idle_lock&quot; /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>So it looks like this more or less:</p>\n<p><a href=\"https://i.stack.imgur.com/p3bbp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p3bbp.png\" alt=\"my_new_menu_items\" /></a></p>\n<p>Now I wonder: how can I get each of those menu items' instances, access their <code>&lt;ImageView&gt;</code> instance from Java, and change each <code>lockedIcon</code>'s <code>ImageView</code> depending on a boolean variable? (For instance, toggling the <code>ImageView</code>'s visible attribute or changing the image for <code>app:srcCompat</code> attribute) Should I use some <code>findViewById(R.id.lockedIcon)</code> for this task, or is it a bad idea and I should do it another way?</p>\n<h4>EDIT:</h4>\n<p>Just now I recall, I already did something similar to access those &quot;<code>NavigationView</code> items&quot; by Java, and add a string to the counter editing the title:</p>\n<pre><code>NavigationView nav_v = findViewById(R.id.navigation_view);\nMenuItem nav_option1 = nav_v.getMenu().findItem(R.id.menu_item1);\nnav_option1.setTitle(getString(R.string.nav_option1_title) + &quot; -&gt; &quot; + some_counter);\n</code></pre>\n<p>Maybe i can from <code>nav_option1</code> invoke some method to access its action layout?</p>\n"},{"tags":["java","serialization","objectmapper"],"answers":[{"tags":[],"owner":{"account_id":11720630,"reputation":27,"user_id":8579706,"display_name":"Sharun"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1695268470,"creation_date":1695268470,"answer_id":77147092,"question_id":77146987,"body_markdown":"\r\nYou need to add import com.fasterxml.jackson.annotation.JsonInclude;\r\n\r\nand it should be ion the top of the POJO class\r\n\r\n@JsonInclude(JsonInclude.Include.NON_NULL) | @JsonInclude(JsonInclude.Include.NON_EMPTY)\r\n\r\nmaybe a duplicate issue from [https://stackoverflow.com/questions/11757487][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/11757487","title":"Why does ObjectMapper serialization with JsonInclude.NON_EMPTY also remove null fields?","body":"<p>You need to add import com.fasterxml.jackson.annotation.JsonInclude;</p>\n<p>and it should be ion the top of the POJO class</p>\n<p>@JsonInclude(JsonInclude.Include.NON_NULL) | @JsonInclude(JsonInclude.Include.NON_EMPTY)</p>\n<p>maybe a duplicate issue from <a href=\"https://stackoverflow.com/questions/11757487\">How to tell Jackson to ignore a field during serialization if its value is null?</a></p>\n"},{"comments":[{"owner":{"account_id":6381461,"reputation":3501,"user_id":6524600,"display_name":"Drex"},"score":0,"creation_date":1695310342,"post_id":77147189,"comment_id":136010223,"body_markdown":"Thank you so much! Sorry I was writting those code on the fly so ignored some annotaiton or imports there","body":"Thank you so much! Sorry I was writting those code on the fly so ignored some annotaiton or imports there"}],"tags":[],"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1695270192,"creation_date":1695270192,"answer_id":77147189,"question_id":77146987,"body_markdown":"Please check out the javadoc for [JsonInclude.NON_EMPTY](https://fasterxml.github.io/jackson-annotations/javadoc/2.9/com/fasterxml/jackson/annotation/JsonInclude.Include.html#NON_EMPTY)  it says: \r\n\r\n&gt; &quot;Value that indicates that only properties with null value, or what is\r\n&gt; considered empty, are not to be included&quot;.\r\n\r\nAlso: \r\n\r\n&gt; &quot;Default emptiness for all types includes:\r\n&gt; \r\n&gt; Null values.&quot;\r\n\r\nso i would say that NON_EMPTY is a superset of NON_NULL, so thats why the lastname which is null is not present. Also, when I was testing, I was unable to serialize your Person class. I had to add the @Value annotation from lombok before my spring application could serialize it properly","title":"Why does ObjectMapper serialization with JsonInclude.NON_EMPTY also remove null fields?","body":"<p>Please check out the javadoc for <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.9/com/fasterxml/jackson/annotation/JsonInclude.Include.html#NON_EMPTY\" rel=\"nofollow noreferrer\">JsonInclude.NON_EMPTY</a>  it says:</p>\n<blockquote>\n<p>&quot;Value that indicates that only properties with null value, or what is\nconsidered empty, are not to be included&quot;.</p>\n</blockquote>\n<p>Also:</p>\n<blockquote>\n<p>&quot;Default emptiness for all types includes:</p>\n<p>Null values.&quot;</p>\n</blockquote>\n<p>so i would say that NON_EMPTY is a superset of NON_NULL, so thats why the lastname which is null is not present. Also, when I was testing, I was unable to serialize your Person class. I had to add the @Value annotation from lombok before my spring application could serialize it properly</p>\n"}],"owner":{"account_id":6381461,"reputation":3501,"user_id":6524600,"display_name":"Drex"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77147189,"answer_count":2,"score":2,"last_activity_date":1695270192,"creation_date":1695266164,"question_id":77146987,"body_markdown":"JsonInclude.NON_EMPTY and JsonInclude.NON_NULL are two Jackson annotations that can be used to control which fields are included in the serialized JSON output.\r\n\r\n    - JsonInclude.NON_EMPTY will ignore fields whose values are empty, such as empty strings, empty collections.\r\n    - JsonInclude.NON_NULL will only ignore fields whose values are null.\r\n\r\nIf I register JsonInclude.NON_EMPTY with the ObjectMapper, then not only fields with empty but also null values will be ignored when serializing objects. Why would NON_EMPTY ignore null fields?\r\n\r\nBelow is the code\r\n```\r\n@Builder\r\nclass Person {\r\n   String firstName;\r\n   String middleName;\r\n   String lastName;\r\n}\r\n\r\n@Test\r\nvoid testSerialization() {\r\n   Person person = Person()\r\n                   .builder()\r\n                   .firstName(&quot;test&quot;)\r\n                   .middleName(&quot;&quot;)\r\n                   .lastName(null)\r\n                   .build();\r\n\r\n   ObjectMapper mapper1 = new ObjectMapper();\r\n   mapper1.setSerializationInclusion(Include.NON_EMPTY);\r\n   String deserializeStr1 = mapper1.writeValueAsString(person);\r\n   // deserializeStr1: { &quot;firstName&quot;: &quot;test&quot; }\r\n   // why does &quot;lastName&quot; not present? \r\n   // why not being: { &quot;firstName&quot;: &quot;test&quot;, &quot;lastName&quot;: null } ?\r\n}\r\n```","title":"Why does ObjectMapper serialization with JsonInclude.NON_EMPTY also remove null fields?","body":"<p>JsonInclude.NON_EMPTY and JsonInclude.NON_NULL are two Jackson annotations that can be used to control which fields are included in the serialized JSON output.</p>\n<pre><code>- JsonInclude.NON_EMPTY will ignore fields whose values are empty, such as empty strings, empty collections.\n- JsonInclude.NON_NULL will only ignore fields whose values are null.\n</code></pre>\n<p>If I register JsonInclude.NON_EMPTY with the ObjectMapper, then not only fields with empty but also null values will be ignored when serializing objects. Why would NON_EMPTY ignore null fields?</p>\n<p>Below is the code</p>\n<pre><code>@Builder\nclass Person {\n   String firstName;\n   String middleName;\n   String lastName;\n}\n\n@Test\nvoid testSerialization() {\n   Person person = Person()\n                   .builder()\n                   .firstName(&quot;test&quot;)\n                   .middleName(&quot;&quot;)\n                   .lastName(null)\n                   .build();\n\n   ObjectMapper mapper1 = new ObjectMapper();\n   mapper1.setSerializationInclusion(Include.NON_EMPTY);\n   String deserializeStr1 = mapper1.writeValueAsString(person);\n   // deserializeStr1: { &quot;firstName&quot;: &quot;test&quot; }\n   // why does &quot;lastName&quot; not present? \n   // why not being: { &quot;firstName&quot;: &quot;test&quot;, &quot;lastName&quot;: null } ?\n}\n</code></pre>\n"},{"tags":["java","mocking","mockito","apache-httpclient-4.x"],"answers":[{"comments":[{"owner":{"account_id":155603,"reputation":1559,"user_id":372366,"accept_rate":66,"display_name":"Global Dictator"},"score":0,"creation_date":1386852214,"post_id":20542544,"comment_id":30719752,"body_markdown":"Thanks thats brilliant! But what I also needed to know was whether I should be mocking DefaultHttpClient or HttpClient instead?","body":"Thanks thats brilliant! But what I also needed to know was whether I should be mocking DefaultHttpClient or HttpClient instead?"},{"owner":{"account_id":3451372,"reputation":1314,"user_id":2890983,"display_name":"Flying Dumpling"},"score":1,"creation_date":1386857294,"post_id":20542544,"comment_id":30723078,"body_markdown":"In mockito you can mock all: interfaces, abstract classes, normal classes. In your case, if you want to simulate the behaviour of only `execute()` method you can mock the `HttpClient` interface. But if you would like do simulate methods from `DefaultHttpClient` that aren&#39;t available in `HttpClient` you have to mock the `DefaultHttpClient` class directly.","body":"In mockito you can mock all: interfaces, abstract classes, normal classes. In your case, if you want to simulate the behaviour of only <code>execute()</code> method you can mock the <code>HttpClient</code> interface. But if you would like do simulate methods from <code>DefaultHttpClient</code> that aren&#39;t available in <code>HttpClient</code> you have to mock the <code>DefaultHttpClient</code> class directly."},{"owner":{"account_id":155603,"reputation":1559,"user_id":372366,"accept_rate":66,"display_name":"Global Dictator"},"score":0,"creation_date":1386927719,"post_id":20542544,"comment_id":30755451,"body_markdown":"Hi, I&#39;m trying to mock the following:","body":"Hi, I&#39;m trying to mock the following:"},{"owner":{"account_id":155603,"reputation":1559,"user_id":372366,"accept_rate":66,"display_name":"Global Dictator"},"score":0,"creation_date":1386927793,"post_id":20542544,"comment_id":30755492,"body_markdown":"HttpResponse response = defaultHttpClient.execute(postRequest);\nBufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));\n\nStringBuffer result = new StringBuffer();\nwhile ((line = rd.readLine()) != null) {\n\tresult.append(line);\t\t}\n\n\t\t\tJSONObject jsonResponseObject = new JSONObject(result.toString());","body":"HttpResponse response = defaultHttpClient.execute(postRequest); BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));  StringBuffer result = new StringBuffer(); while ((line = rd.readLine()) != null) { \tresult.append(line);\t\t}  \t\t\tJSONObject jsonResponseObject = new JSONObject(result.toString());"},{"owner":{"account_id":155603,"reputation":1559,"user_id":372366,"accept_rate":66,"display_name":"Global Dictator"},"score":0,"creation_date":1386928645,"post_id":20542544,"comment_id":30755952,"body_markdown":"I have a stubbed JSON OBject but which other mocs do I need to create for the above mentioned calls?","body":"I have a stubbed JSON OBject but which other mocs do I need to create for the above mentioned calls?"},{"owner":{"account_id":3451372,"reputation":1314,"user_id":2890983,"display_name":"Flying Dumpling"},"score":0,"creation_date":1386930908,"post_id":20542544,"comment_id":30757222,"body_markdown":"For clarification. You can&#39;t mock local varaibles with `@Mock` annotation. `@Mock` allows you to mock only fields of the class you are testing. To mock local variables you can use PowerMockito. See http://stackoverflow.com/questions/6520242/mocking-methods-of-local-scope-objects-with-mockito","body":"For clarification. You can&#39;t mock local varaibles with <code>@Mock</code> annotation. <code>@Mock</code> allows you to mock only fields of the class you are testing. To mock local variables you can use PowerMockito. See <a href=\"http://stackoverflow.com/questions/6520242/mocking-methods-of-local-scope-objects-with-mockito\" title=\"mocking methods of local scope objects with mockito\">stackoverflow.com/questions/6520242/&hellip;</a>"},{"owner":{"account_id":774364,"reputation":5391,"user_id":820666,"accept_rate":68,"display_name":"Bastian Voigt"},"score":15,"creation_date":1455200389,"post_id":20542544,"comment_id":58390689,"body_markdown":"-1. httpClient.execute() does not return a JSON object, but a response object and you need to extract the JSON body from it which is why mocking it is not straight forward.","body":"-1. httpClient.execute() does not return a JSON object, but a response object and you need to extract the JSON body from it which is why mocking it is not straight forward."},{"owner":{"account_id":103956,"reputation":4401,"user_id":278174,"accept_rate":85,"display_name":"powder366"},"score":0,"creation_date":1568384692,"post_id":20542544,"comment_id":102268451,"body_markdown":"My defaultHttpClient is null?","body":"My defaultHttpClient is null?"}],"tags":[],"owner":{"account_id":3451372,"reputation":1314,"user_id":2890983,"display_name":"Flying Dumpling"},"comment_count":8,"down_vote_count":5,"up_vote_count":16,"is_accepted":false,"score":11,"last_activity_date":1386848488,"creation_date":1386848488,"answer_id":20542544,"question_id":20542361,"body_markdown":"In your unit test class you need to mock `defaultHttpClient`:\r\n\r\n    @Mock\r\n    private HttpClient defaultHttpClient;\r\nThen you tell mockito (for example in `@Before` method) to actually create your mocks by:\r\n\r\n    MockitoAnnotations.initMocks(YourTestClass);\r\n\r\nThen in your test method you define what `execute()` method should return:\r\n\r\n    when(defaultHttpClient.execute(any()/* or wahtever you want here */)).thenReturn(stubbed JSON object);","title":"Mocking Apache HTTPClient using Mockito","body":"<p>In your unit test class you need to mock <code>defaultHttpClient</code>:</p>\n\n<pre><code>@Mock\nprivate HttpClient defaultHttpClient;\n</code></pre>\n\n<p>Then you tell mockito (for example in <code>@Before</code> method) to actually create your mocks by:</p>\n\n<pre><code>MockitoAnnotations.initMocks(YourTestClass);\n</code></pre>\n\n<p>Then in your test method you define what <code>execute()</code> method should return:</p>\n\n<pre><code>when(defaultHttpClient.execute(any()/* or wahtever you want here */)).thenReturn(stubbed JSON object);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":367746,"reputation":24129,"user_id":714112,"accept_rate":80,"display_name":"Sridhar Sarnobat"},"score":7,"creation_date":1531890939,"post_id":21694863,"comment_id":89759464,"body_markdown":"Let&#39;s make a bet: 3 years from now PowerMockito will no longer be in vogue and any tests that use it will be &quot;legacy&quot; tests (probably @Ignore&#39;d, or a burden to maintain, or your team will be trying to migrate off it). Anyone please respond to me in July 2021 if I am wrong and I will eat humble pie.","body":"Let&#39;s make a bet: 3 years from now PowerMockito will no longer be in vogue and any tests that use it will be &quot;legacy&quot; tests (probably @Ignore&#39;d, or a burden to maintain, or your team will be trying to migrate off it). Anyone please respond to me in July 2021 if I am wrong and I will eat humble pie."},{"owner":{"account_id":90166,"reputation":3781,"user_id":248304,"accept_rate":88,"display_name":"angelcervera"},"score":2,"creation_date":1641924697,"post_id":21694863,"comment_id":124933493,"body_markdown":"@SridharSarnobat In July 2021, you can do the same using Mockito directly: https://stackoverflow.com/a/63242611/248304 :)","body":"@SridharSarnobat In July 2021, you can do the same using Mockito directly: <a href=\"https://stackoverflow.com/a/63242611/248304\">stackoverflow.com/a/63242611/248304</a> :)"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1665608398,"post_id":21694863,"comment_id":130743540,"body_markdown":"@SridharSarnobat if we base on the commits on https://github.com/powermock/powermock you won :-)","body":"@SridharSarnobat if we base on the commits on <a href=\"https://github.com/powermock/powermock\" rel=\"nofollow noreferrer\">github.com/powermock/powermock</a> you won :-)"},{"owner":{"account_id":367746,"reputation":24129,"user_id":714112,"accept_rate":80,"display_name":"Sridhar Sarnobat"},"score":1,"creation_date":1665695638,"post_id":21694863,"comment_id":130765560,"body_markdown":"Thanks for circling back :) Moral of the story: use discretion when adding dependencies to your project.","body":"Thanks for circling back :) Moral of the story: use discretion when adding dependencies to your project."}],"tags":[],"owner":{"account_id":942617,"reputation":2964,"user_id":970422,"accept_rate":73,"display_name":"Hussain Mansoor"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1392100658,"creation_date":1392100658,"answer_id":21694863,"question_id":20542361,"body_markdown":"You can do this easily using PowerMockito which can also mock final/static methods, private methods and anonymous classes easily. Here&#39;s the sample code for mocking http request. JSON_STRING_DATA is any string which you want to get from execute method.    \r\n\r\n    PowerMockito.mockStatic(DefaultHttpClient.class);\r\n        HttpClient defaultHttpClientMocked =  PowerMockito.mock(DefaultHttpClient.class);        \r\n        PowerMockito.when(defaultHttpClientMocked.execute(Mockito.any(HttpPost.class))).thenReturn(createMockedHTTPResponse(JSON_STRING_DATA));","title":"Mocking Apache HTTPClient using Mockito","body":"<p>You can do this easily using PowerMockito which can also mock final/static methods, private methods and anonymous classes easily. Here's the sample code for mocking http request. JSON_STRING_DATA is any string which you want to get from execute method.    </p>\n\n<pre><code>PowerMockito.mockStatic(DefaultHttpClient.class);\n    HttpClient defaultHttpClientMocked =  PowerMockito.mock(DefaultHttpClient.class);        \n    PowerMockito.when(defaultHttpClientMocked.execute(Mockito.any(HttpPost.class))).thenReturn(createMockedHTTPResponse(JSON_STRING_DATA));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1567970,"reputation":1773,"user_id":1456334,"accept_rate":82,"display_name":"oooyaya"},"score":0,"creation_date":1548950642,"post_id":33942402,"comment_id":95737282,"body_markdown":"This is good, but is there a way to do this where your mocks do not need to be so implementation-specific?  For instance, so that the test would still work if we switched out our HTTP Client for something with a different interface?  Ideally, just watching for an HTTP Request going out (and spying on things like URL, headers, payload) and the ability to control the response coming back (and spying on things like payload, headers)?  I&#39;m coming from a JavaScript testing background where this is the pattern -- mocking the backend at the browser level instead of library level.","body":"This is good, but is there a way to do this where your mocks do not need to be so implementation-specific?  For instance, so that the test would still work if we switched out our HTTP Client for something with a different interface?  Ideally, just watching for an HTTP Request going out (and spying on things like URL, headers, payload) and the ability to control the response coming back (and spying on things like payload, headers)?  I&#39;m coming from a JavaScript testing background where this is the pattern -- mocking the backend at the browser level instead of library level."},{"owner":{"account_id":4592561,"reputation":924,"user_id":3725491,"accept_rate":67,"display_name":"Amber"},"score":0,"creation_date":1580206352,"post_id":33942402,"comment_id":106012788,"body_markdown":"When I mock the execute method, it actually gets called and I get a NullPointerException. Could you help me with this?","body":"When I mock the execute method, it actually gets called and I get a NullPointerException. Could you help me with this?"}],"tags":[],"owner":{"account_id":2083591,"reputation":621,"user_id":1855042,"display_name":"user1855042"},"comment_count":2,"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1448552475,"creation_date":1448552475,"answer_id":33942402,"question_id":20542361,"body_markdown":"Here is what I did to test my code using Mockito and Apache HttpBuilder:\r\n\r\n**Class under test:**\r\n\r\n\timport java.io.BufferedReader;\r\n\timport java.io.IOException;\r\n\t\r\n\timport javax.ws.rs.core.Response.Status;\r\n\t\r\n\timport org.apache.http.HttpResponse;\r\n\timport org.apache.http.client.HttpClient;\r\n\timport org.apache.http.client.methods.HttpGet;\r\n\timport org.apache.http.impl.client.HttpClientBuilder;\r\n\timport org.slf4j.Logger;\r\n\timport org.slf4j.LoggerFactory;\r\n\t\r\n\tpublic class StatusApiClient {\r\n\tprivate static final Logger LOG = LoggerFactory.getLogger(StatusApiClient.class);\r\n\t\t\r\n\t\tprivate String targetUrl = &quot;&quot;;\r\n\t\tprivate HttpClient client = null;\r\n\t\tHttpGet httpGet = null;\r\n\t\t\r\n\t\tpublic StatusApiClient(HttpClient client, HttpGet httpGet) {\r\n\t\t\tthis.client = client;\r\n\t\t\tthis.httpGet = httpGet;\r\n\t\t}\r\n\t\t\r\n\t\tpublic StatusApiClient(String targetUrl) {\r\n\t\t\tthis.targetUrl = targetUrl;\r\n\t\t\tthis.client = HttpClientBuilder.create().build();\r\n\t\t\tthis.httpGet = new HttpGet(targetUrl);\r\n\t\t}\r\n\t\t\r\n\t\tpublic boolean getStatus() {\r\n\t\t\tBufferedReader rd = null;\r\n\t\t\tboolean status = false;\r\n\t\t\ttry{\r\n\t\t\t\tLOG.debug(&quot;Requesting status: &quot; + targetUrl);\r\n\t\t    \t\r\n\t\t    \t\r\n\t\t    \tHttpResponse response = client.execute(httpGet);\r\n\t\t    \t\r\n\t\t    \tif(response.getStatusLine().getStatusCode() == Status.OK.getStatusCode()) {\r\n\t\t    \t\tLOG.debug(&quot;Is online.&quot;);\r\n\t\t    \t\tstatus = true;\r\n\t\t    \t}\r\n\t\t    \t\r\n\t    \t} catch(Exception e) {\r\n\t    \t\tLOG.error(&quot;Error getting the status&quot;, e);\r\n\t    \t} finally {\r\n\t    \t\tif (rd != null) {\r\n\t    \t\t\ttry{\r\n\t    \t\t\t\trd.close();\r\n\t    \t\t\t} catch (IOException ioe) {\r\n\t    \t\t\t\tLOG.error(&quot;Error while closing the Buffered Reader used for reading the status&quot;, ioe);\r\n\t    \t\t\t}\r\n\t    \t\t}\t\r\n\t    \t}\r\n\t\t\t\r\n\t\t\treturn status;\r\n\t\t}\r\n\t}\r\n\r\n\r\n**Test:**\r\n\r\n\timport java.io.IOException;\r\n\t\r\n\timport org.apache.http.HttpResponse;\r\n\timport org.apache.http.StatusLine;\r\n\timport org.apache.http.client.ClientProtocolException;\r\n\timport org.apache.http.client.HttpClient;\r\n\timport org.apache.http.client.methods.HttpGet;\r\n\timport org.apache.http.conn.HttpHostConnectException;\r\n\timport org.junit.Assert;\r\n\timport org.junit.Test;\r\n\timport org.mockito.Mockito;\r\n\t\r\n\tpublic class StatusApiClientTest extends Mockito {\r\n\t\r\n\t\t@Test\r\n\t\tpublic void should_return_true_if_the_status_api_works_properly() throws ClientProtocolException, IOException {\r\n\t\t\t//given:\r\n\t\t\tHttpClient httpClient = mock(HttpClient.class);\r\n\t\t\tHttpGet httpGet = mock(HttpGet.class);\r\n\t\t\tHttpResponse httpResponse = mock(HttpResponse.class);\r\n\t\t\tStatusLine statusLine = mock(StatusLine.class);\r\n\t\t\t\r\n\t\t\t//and:\r\n\t\t\twhen(statusLine.getStatusCode()).thenReturn(200);\r\n\t\t\twhen(httpResponse.getStatusLine()).thenReturn(statusLine);\r\n\t\t\twhen(httpClient.execute(httpGet)).thenReturn(httpResponse);\r\n\t\t\t\r\n\t\t\t//and:\r\n\t\t\tStatusApiClient client = new StatusApiClient(httpClient, httpGet);\r\n\t\t\t\r\n\t\t\t//when:\r\n\t\t\tboolean status = client.getStatus();\r\n\t\t\t\r\n\t\t\t//then:\r\n\t\t\tAssert.assertTrue(status);\r\n\t\t}\r\n\t\t\r\n\t\t@Test\r\n\t\tpublic void should_return_false_if_status_api_do_not_respond() throws ClientProtocolException, IOException {\r\n\t\t\t//given:\r\n\t\t\tHttpClient httpClient = mock(HttpClient.class);\r\n\t\t\tHttpGet httpGet = mock(HttpGet.class);\r\n\t\t\tHttpResponse httpResponse = mock(HttpResponse.class);\r\n\t\t\tStatusLine statusLine = mock(StatusLine.class);\r\n\t\t\t\r\n\t\t\t//and:\r\n\t\t\twhen(httpClient.execute(httpGet)).thenThrow(HttpHostConnectException.class);\r\n\t\t\t\r\n\t\t\t//and:\r\n\t\t\tStatusApiClient client = new StatusApiClient(httpClient, httpGet);\r\n\t\t\t\r\n\t\t\t//when:\r\n\t\t\tboolean status = client.getStatus();\r\n\t\t\t\r\n\t\t\t//then:\r\n\t\t\tAssert.assertFalse(status);\r\n\t\t}\r\n\t\r\n\t}\r\n\r\n\r\nWhat do you think folks, do I need to improve something? (Yeah, I know, the comments. That is something I brought from my Spock background :D)","title":"Mocking Apache HTTPClient using Mockito","body":"<p>Here is what I did to test my code using Mockito and Apache HttpBuilder:</p>\n\n<p><strong>Class under test:</strong></p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\n\nimport javax.ws.rs.core.Response.Status;\n\nimport org.apache.http.HttpResponse;\nimport org.apache.http.client.HttpClient;\nimport org.apache.http.client.methods.HttpGet;\nimport org.apache.http.impl.client.HttpClientBuilder;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class StatusApiClient {\nprivate static final Logger LOG = LoggerFactory.getLogger(StatusApiClient.class);\n\n    private String targetUrl = \"\";\n    private HttpClient client = null;\n    HttpGet httpGet = null;\n\n    public StatusApiClient(HttpClient client, HttpGet httpGet) {\n        this.client = client;\n        this.httpGet = httpGet;\n    }\n\n    public StatusApiClient(String targetUrl) {\n        this.targetUrl = targetUrl;\n        this.client = HttpClientBuilder.create().build();\n        this.httpGet = new HttpGet(targetUrl);\n    }\n\n    public boolean getStatus() {\n        BufferedReader rd = null;\n        boolean status = false;\n        try{\n            LOG.debug(\"Requesting status: \" + targetUrl);\n\n\n            HttpResponse response = client.execute(httpGet);\n\n            if(response.getStatusLine().getStatusCode() == Status.OK.getStatusCode()) {\n                LOG.debug(\"Is online.\");\n                status = true;\n            }\n\n        } catch(Exception e) {\n            LOG.error(\"Error getting the status\", e);\n        } finally {\n            if (rd != null) {\n                try{\n                    rd.close();\n                } catch (IOException ioe) {\n                    LOG.error(\"Error while closing the Buffered Reader used for reading the status\", ioe);\n                }\n            }   \n        }\n\n        return status;\n    }\n}\n</code></pre>\n\n<p><strong>Test:</strong></p>\n\n<pre><code>import java.io.IOException;\n\nimport org.apache.http.HttpResponse;\nimport org.apache.http.StatusLine;\nimport org.apache.http.client.ClientProtocolException;\nimport org.apache.http.client.HttpClient;\nimport org.apache.http.client.methods.HttpGet;\nimport org.apache.http.conn.HttpHostConnectException;\nimport org.junit.Assert;\nimport org.junit.Test;\nimport org.mockito.Mockito;\n\npublic class StatusApiClientTest extends Mockito {\n\n    @Test\n    public void should_return_true_if_the_status_api_works_properly() throws ClientProtocolException, IOException {\n        //given:\n        HttpClient httpClient = mock(HttpClient.class);\n        HttpGet httpGet = mock(HttpGet.class);\n        HttpResponse httpResponse = mock(HttpResponse.class);\n        StatusLine statusLine = mock(StatusLine.class);\n\n        //and:\n        when(statusLine.getStatusCode()).thenReturn(200);\n        when(httpResponse.getStatusLine()).thenReturn(statusLine);\n        when(httpClient.execute(httpGet)).thenReturn(httpResponse);\n\n        //and:\n        StatusApiClient client = new StatusApiClient(httpClient, httpGet);\n\n        //when:\n        boolean status = client.getStatus();\n\n        //then:\n        Assert.assertTrue(status);\n    }\n\n    @Test\n    public void should_return_false_if_status_api_do_not_respond() throws ClientProtocolException, IOException {\n        //given:\n        HttpClient httpClient = mock(HttpClient.class);\n        HttpGet httpGet = mock(HttpGet.class);\n        HttpResponse httpResponse = mock(HttpResponse.class);\n        StatusLine statusLine = mock(StatusLine.class);\n\n        //and:\n        when(httpClient.execute(httpGet)).thenThrow(HttpHostConnectException.class);\n\n        //and:\n        StatusApiClient client = new StatusApiClient(httpClient, httpGet);\n\n        //when:\n        boolean status = client.getStatus();\n\n        //then:\n        Assert.assertFalse(status);\n    }\n\n}\n</code></pre>\n\n<p>What do you think folks, do I need to improve something? (Yeah, I know, the comments. That is something I brought from my Spock background :D)</p>\n"},{"comments":[{"owner":{"account_id":187950,"reputation":2035,"user_id":426371,"accept_rate":82,"display_name":"neXus"},"score":2,"creation_date":1520604803,"post_id":47301020,"comment_id":85396065,"body_markdown":"That looks very nice, but how do you make sure that the class under test uses your `HttpClientMock` instead of `HttpClients.createDefault()`?","body":"That looks very nice, but how do you make sure that the class under test uses your <code>HttpClientMock</code> instead of <code>HttpClients.createDefault()</code>?"},{"owner":{"account_id":1322869,"reputation":3345,"user_id":1268294,"accept_rate":81,"display_name":"Pawe Adamski"},"score":0,"creation_date":1520774103,"post_id":47301020,"comment_id":85444302,"body_markdown":"Well, it can look very different between applications. In my apps usually  I have a separate test Configuration which injects HttpClientMock into application context.","body":"Well, it can look very different between applications. In my apps usually  I have a separate test Configuration which injects HttpClientMock into application context."}],"tags":[],"owner":{"account_id":1322869,"reputation":3345,"user_id":1268294,"accept_rate":81,"display_name":"Pawe Adamski"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1520169987,"creation_date":1510728438,"answer_id":47301020,"question_id":20542361,"body_markdown":"You can look at [HttpClientMock][1], I wrote it for internal project but later decided to open source. It allows you to define mock behavior with fluent API and later verify a number of made calls. Example:\r\n\r\n    HttpClientMock httpClientMock = new \r\n    HttpClientMock(&quot;http://localhost:8080&quot;);\r\n    httpClientMock.onGet(&quot;/login?user=john&quot;).doReturnJSON(&quot;{permission:1}&quot;);\r\n\r\n    httpClientMock.verify().get(&quot;/login?user=john&quot;).called();\r\n\r\n\r\n\r\n  [1]: https://github.com/PawelAdamski/HttpClientMock","title":"Mocking Apache HTTPClient using Mockito","body":"<p>You can look at <a href=\"https://github.com/PawelAdamski/HttpClientMock\" rel=\"noreferrer\">HttpClientMock</a>, I wrote it for internal project but later decided to open source. It allows you to define mock behavior with fluent API and later verify a number of made calls. Example:</p>\n\n<pre><code>HttpClientMock httpClientMock = new \nHttpClientMock(\"http://localhost:8080\");\nhttpClientMock.onGet(\"/login?user=john\").doReturnJSON(\"{permission:1}\");\n\nhttpClientMock.verify().get(\"/login?user=john\").called();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":256642,"reputation":6092,"user_id":537503,"accept_rate":42,"display_name":"Andy Dufresne"},"score":0,"creation_date":1644330198,"post_id":57251296,"comment_id":125574015,"body_markdown":"I tried this but didn&#39;t get it working. This fails at the step where the instance of HttpGet is created since it is not mocked. How would it work?","body":"I tried this but didn&#39;t get it working. This fails at the step where the instance of HttpGet is created since it is not mocked. How would it work?"}],"tags":[],"owner":{"account_id":16407068,"reputation":101,"user_id":11851379,"display_name":"gnulli"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1564393988,"creation_date":1564393988,"answer_id":57251296,"question_id":20542361,"body_markdown":"There is a nicer way to do this without having to add PowerMock as yet another dependency. Here you only need an extra constructor taking HTTPClient as an argument and Mockito. In this example I&#39;m creating a custom health check (Spring Actuator) and I need to mock the HTTPClient for unit testing. \r\n\r\n*Libs: JUnit 5, Spring Boot 2.1.2 and Mockito 2.*\r\n\r\n**Component:**\r\n```java\r\n@Component\r\npublic class MyHealthCheck extends AbstractHealthIndicator {\r\n\r\n\tHttpClient httpClient;\r\n\r\n\tpublic MyHealthCheck() { \r\n\t\thttpClient = HttpClientBuilder.create().build();\r\n\t}\r\n\r\n\t/** \r\n\tAdded another constructor to the class with an HttpClient argument.\r\n    This one can be used for testing\r\n\t*/ \r\n\tpublic MyHealthCheck(HttpClient httpClient) { \r\n\t\tthis.httpClient = httpClient; \r\n\t}\r\n\r\n\t/**\r\n\tMethod to test \r\n\t*/ \r\n\t@Override\r\n\tprotected void doHealthCheck(Builder builder) throws Exception {\r\n\r\n\t\t//\r\n\t\t// Execute request and get status code\r\n\t\tHttpGet request = new HttpGet(&quot;http://www.SomeAuthEndpoint.com&quot;);\r\n\t\tHttpResponse response = httpClient.execute(request);\r\n\r\n\t\t//\r\n\t\t// Update builder according to status code\r\n\t\tint statusCode = response.getStatusLine().getStatusCode();\r\n\t\tif(statusCode == 200 || statusCode == 401) {\r\n\t\t    builder.up().withDetail(&quot;Code from service&quot;, statusCode);\r\n\t\t} else {\r\n\t\t    builder.unknown().withDetail(&quot;Code from service&quot;, statusCode);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n**Test method:**\r\n\r\nNote that here we use *Mockito.any(HttpGet.class)*\r\n\r\n```java\r\nprivate static HttpClient httpClient;\r\nprivate static HttpResponse httpResponse;\r\nprivate static StatusLine statusLine;\r\n\r\n@BeforeAll\r\npublic static void init() {\r\n\t//\r\n\t// Given\r\n\thttpClient = Mockito.mock(HttpClient.class);\r\n\thttpResponse = Mockito.mock(HttpResponse.class);\r\n\tstatusLine = Mockito.mock(StatusLine.class);\r\n}\r\n\r\n\r\n@Test\r\npublic void doHealthCheck_endReturns401_shouldReturnUp() throws Exception {\r\n\t\t\r\n    //\r\n    // When\r\n    when(statusLine.getStatusCode()).thenReturn(401);\r\n    when(httpResponse.getStatusLine()).thenReturn(statusLine);\r\n    when(httpClient.execute(Mockito.any(HttpGet.class))).thenReturn(httpResponse);\r\n\r\n    //\r\n    // Then\r\n\tMyHealthCheck myHealthCheck = new MyHealthCheck(httpClient);\r\n\tHealth.Builder builder = new Health.Builder();\r\n\tmyHealthCheck.doHealthCheck(builder);\r\n\tStatus status = builder.build().getStatus();\r\n\tAssertions.assertTrue(Status.UP == status);\r\n}\r\n```","title":"Mocking Apache HTTPClient using Mockito","body":"<p>There is a nicer way to do this without having to add PowerMock as yet another dependency. Here you only need an extra constructor taking HTTPClient as an argument and Mockito. In this example I'm creating a custom health check (Spring Actuator) and I need to mock the HTTPClient for unit testing. </p>\n\n<p><em>Libs: JUnit 5, Spring Boot 2.1.2 and Mockito 2.</em></p>\n\n<p><strong>Component:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class MyHealthCheck extends AbstractHealthIndicator {\n\n    HttpClient httpClient;\n\n    public MyHealthCheck() { \n        httpClient = HttpClientBuilder.create().build();\n    }\n\n    /** \n    Added another constructor to the class with an HttpClient argument.\n    This one can be used for testing\n    */ \n    public MyHealthCheck(HttpClient httpClient) { \n        this.httpClient = httpClient; \n    }\n\n    /**\n    Method to test \n    */ \n    @Override\n    protected void doHealthCheck(Builder builder) throws Exception {\n\n        //\n        // Execute request and get status code\n        HttpGet request = new HttpGet(\"http://www.SomeAuthEndpoint.com\");\n        HttpResponse response = httpClient.execute(request);\n\n        //\n        // Update builder according to status code\n        int statusCode = response.getStatusLine().getStatusCode();\n        if(statusCode == 200 || statusCode == 401) {\n            builder.up().withDetail(\"Code from service\", statusCode);\n        } else {\n            builder.unknown().withDetail(\"Code from service\", statusCode);\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Test method:</strong></p>\n\n<p>Note that here we use <em>Mockito.any(HttpGet.class)</em></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>private static HttpClient httpClient;\nprivate static HttpResponse httpResponse;\nprivate static StatusLine statusLine;\n\n@BeforeAll\npublic static void init() {\n    //\n    // Given\n    httpClient = Mockito.mock(HttpClient.class);\n    httpResponse = Mockito.mock(HttpResponse.class);\n    statusLine = Mockito.mock(StatusLine.class);\n}\n\n\n@Test\npublic void doHealthCheck_endReturns401_shouldReturnUp() throws Exception {\n\n    //\n    // When\n    when(statusLine.getStatusCode()).thenReturn(401);\n    when(httpResponse.getStatusLine()).thenReturn(statusLine);\n    when(httpClient.execute(Mockito.any(HttpGet.class))).thenReturn(httpResponse);\n\n    //\n    // Then\n    MyHealthCheck myHealthCheck = new MyHealthCheck(httpClient);\n    Health.Builder builder = new Health.Builder();\n    myHealthCheck.doHealthCheck(builder);\n    Status status = builder.build().getStatus();\n    Assertions.assertTrue(Status.UP == status);\n}\n</code></pre>\n"}],"owner":{"account_id":155603,"reputation":1559,"user_id":372366,"accept_rate":66,"display_name":"Global Dictator"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112745,"favorite_count":0,"down_vote_count":0,"up_vote_count":46,"answer_count":5,"score":46,"last_activity_date":1695267228,"creation_date":1386847976,"question_id":20542361,"body_markdown":"I&#39;m trying to mock Apache HttpClient Interface in order to mock one of its methods mentioned below to return a stubbed JSON object in response.\r\n\r\n    HttpResponse response = defaultHttpClient.execute(postRequest); \r\n\r\nCould somebody be able to suggest how to achieve this with some sample code? Your help would be greatly appreciated. \r\n\r\nThanks ","title":"Mocking Apache HTTPClient using Mockito","body":"<p>I'm trying to mock Apache HttpClient Interface in order to mock one of its methods mentioned below to return a stubbed JSON object in response.</p>\n\n<pre><code>HttpResponse response = defaultHttpClient.execute(postRequest); \n</code></pre>\n\n<p>Could somebody be able to suggest how to achieve this with some sample code? Your help would be greatly appreciated. </p>\n\n<p>Thanks </p>\n"},{"tags":["java","excel","csv","apache-poi"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1695276646,"post_id":77147002,"comment_id":136003280,"body_markdown":"What is the problem using your code? What Apache POI version used?","body":"What is the problem using your code? What Apache POI version used?"}],"owner":{"account_id":11064566,"reputation":19,"user_id":8124755,"display_name":"Sarthak"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1695266622,"creation_date":1695266622,"question_id":77147002,"body_markdown":"I want to convert an excel file to csv in Java using the Apache poi pkg. \r\nI have to read a specific range from the excel. Example B:G, I want to specify the starting row as well something like B3:G. \r\nIs their a clean way to do this ?\r\n\r\nCurrently tried using the AreaReference and iterate over the cells to make sure the cell is in the area.\r\n\r\nExample \r\n\r\n```\r\nSheet sheet = workbook.getSheetAt(0); \r\nAreaReference areaReference = new AreadReference(&quot;B3:G100&quot;);\r\nShort startCol = areaReference.getFirstCell().getCol();\r\nShort startRow = areadReference.getFirstCell().getRow();\r\nShort endCol = areadReference.getLastCell().getCol(); \r\nIterator&lt;Row&gt; rowIterator = sheet.iterator();\r\nwhile (rowIterator.hasNext()) {\r\n    Row row = rowIterator.next();\r\n    Iterator&lt;Cell&gt; cellIterator = row.cellIterator();\r\n    while (cellIterator.hasNext()) {\r\n        Cell cell = cellIterator.next();\r\n        int cellColIdx = cell.getAddress().getColumn();\r\n        int cellRowIdx = cell.getAddress().getRow();\r\n        if (cellColIdx &lt;= startCol &amp;&amp; cellColIdx &lt;= endCol &amp;&amp; cellRowIdx &gt;= startRow) {\r\n           // logic\r\n        }\r\n    }\r\n}\r\n```\r\n","title":"How can I read excel by specifying range, I have to use apache poi package","body":"<p>I want to convert an excel file to csv in Java using the Apache poi pkg.\nI have to read a specific range from the excel. Example B:G, I want to specify the starting row as well something like B3:G.\nIs their a clean way to do this ?</p>\n<p>Currently tried using the AreaReference and iterate over the cells to make sure the cell is in the area.</p>\n<p>Example</p>\n<pre><code>Sheet sheet = workbook.getSheetAt(0); \nAreaReference areaReference = new AreadReference(&quot;B3:G100&quot;);\nShort startCol = areaReference.getFirstCell().getCol();\nShort startRow = areadReference.getFirstCell().getRow();\nShort endCol = areadReference.getLastCell().getCol(); \nIterator&lt;Row&gt; rowIterator = sheet.iterator();\nwhile (rowIterator.hasNext()) {\n    Row row = rowIterator.next();\n    Iterator&lt;Cell&gt; cellIterator = row.cellIterator();\n    while (cellIterator.hasNext()) {\n        Cell cell = cellIterator.next();\n        int cellColIdx = cell.getAddress().getColumn();\n        int cellRowIdx = cell.getAddress().getRow();\n        if (cellColIdx &lt;= startCol &amp;&amp; cellColIdx &lt;= endCol &amp;&amp; cellRowIdx &gt;= startRow) {\n           // logic\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","mysql","spring-boot","hibernate"],"answers":[{"tags":[],"owner":{"account_id":11720630,"reputation":27,"user_id":8579706,"display_name":"Sharun"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695266119,"creation_date":1695266119,"answer_id":77146983,"question_id":77056416,"body_markdown":"*The issue you&#39;re facing might be related to Hibernate&#39;s first-level cache and second-level cache. When you delete an entity using Hibernate, the changes are not immediately reflected in the first-level cache or the in-memory representation of the associated entities.*\r\n\r\nBy default, your relationship is marked as lazy-loaded (fetch = FetchType.LAZY). This means that Hibernate will load the photos collection only when you access it explicitly. If you want changes to be reflected immediately, you can change the fetch strategy to FetchType.EAGER:\r\n\r\n------\r\n\r\nEnsure that your method is annotated with `@Transactional`. This will manage the transaction and session properly, and any changes made to the entities will be reflected when the transaction is committed:\r\n\r\n    @Transactional\r\n    public UserDto deleteMeetPhoto(User user, String photoID) {\r\n        // Your delete logic here\r\n    }","title":"Hibernate delete entity OneToMany is not working","body":"<p><em>The issue you're facing might be related to Hibernate's first-level cache and second-level cache. When you delete an entity using Hibernate, the changes are not immediately reflected in the first-level cache or the in-memory representation of the associated entities.</em></p>\n<p>By default, your relationship is marked as lazy-loaded (fetch = FetchType.LAZY). This means that Hibernate will load the photos collection only when you access it explicitly. If you want changes to be reflected immediately, you can change the fetch strategy to FetchType.EAGER:</p>\n<hr />\n<p>Ensure that your method is annotated with <code>@Transactional</code>. This will manage the transaction and session properly, and any changes made to the entities will be reflected when the transaction is committed:</p>\n<pre><code>@Transactional\npublic UserDto deleteMeetPhoto(User user, String photoID) {\n    // Your delete logic here\n}\n</code></pre>\n"}],"owner":{"account_id":19589013,"reputation":47,"user_id":16129883,"display_name":"mateo cunha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695266119,"creation_date":1694056930,"question_id":77056416,"body_markdown":"I am developing an application using SpringBoot and Hibernate.\r\nThe problem: When I delete de contained entity this action is not reflected in real time on the containing entity but it is reflecting in my database.\r\n(I think that it is related with the context of hibernate or the cache of hibernate)\r\n\r\nThe Code is:\r\n\r\n        public UserDto deleteMeetPhoto(User user, String photoID) {\r\n        \r\n        PhotoMeet photoAux = photoMeetDao.selectPhotoByIdAndUser(photoID, user.getId());\r\n        photoMeetDao.deletePhoto(photoAux.getId(), user.getId());\r\n        //Refreshing the user \r\n        user = userDao.findById(user.getId()).get();\r\n\r\n        return new UserDto(user);\r\n    }\r\n\r\nThe User entity code:\r\n\r\n    @LazyCollection(LazyCollectionOption.FALSE)\r\n    @OneToMany(mappedBy = &quot;user&quot;, orphanRemoval = false, cascade = {CascadeType.PERSIST,\r\n            CascadeType.MERGE, CascadeType.REMOVE,\r\n            CascadeType.DETACH, CascadeType.REFRESH})\r\n    private List&lt;PhotoMeet&gt; photos;\r\nThe PhotoMeet code:\r\n\r\n    @ManyToOne(cascade = { CascadeType.PERSIST, CascadeType.MERGE, CascadeType.DETACH,\r\n\t\t\tCascadeType.REFRESH, CascadeType.REMOVE }, fetch = FetchType.LAZY)\r\n\t@JoinColumn(name = &quot;user_id&quot;)\r\n\tprivate User user;","title":"Hibernate delete entity OneToMany is not working","body":"<p>I am developing an application using SpringBoot and Hibernate.\nThe problem: When I delete de contained entity this action is not reflected in real time on the containing entity but it is reflecting in my database.\n(I think that it is related with the context of hibernate or the cache of hibernate)</p>\n<p>The Code is:</p>\n<pre><code>    public UserDto deleteMeetPhoto(User user, String photoID) {\n    \n    PhotoMeet photoAux = photoMeetDao.selectPhotoByIdAndUser(photoID, user.getId());\n    photoMeetDao.deletePhoto(photoAux.getId(), user.getId());\n    //Refreshing the user \n    user = userDao.findById(user.getId()).get();\n\n    return new UserDto(user);\n}\n</code></pre>\n<p>The User entity code:</p>\n<pre><code>@LazyCollection(LazyCollectionOption.FALSE)\n@OneToMany(mappedBy = &quot;user&quot;, orphanRemoval = false, cascade = {CascadeType.PERSIST,\n        CascadeType.MERGE, CascadeType.REMOVE,\n        CascadeType.DETACH, CascadeType.REFRESH})\nprivate List&lt;PhotoMeet&gt; photos;\n</code></pre>\n<p>The PhotoMeet code:</p>\n<pre><code>@ManyToOne(cascade = { CascadeType.PERSIST, CascadeType.MERGE, CascadeType.DETACH,\n        CascadeType.REFRESH, CascadeType.REMOVE }, fetch = FetchType.LAZY)\n@JoinColumn(name = &quot;user_id&quot;)\nprivate User user;\n</code></pre>\n"},{"tags":["java","image","download"],"comments":[{"owner":{"account_id":8834,"reputation":297144,"user_id":16076,"display_name":"Mitch Wheat"},"score":0,"creation_date":1328517789,"post_id":9157501,"comment_id":11516221,"body_markdown":"you mention you have problems but neglect to say what they are specifically. I also find it hard to believe that someone would vote this question up.","body":"you mention you have problems but neglect to say what they are specifically. I also find it hard to believe that someone would vote this question up."},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1328517835,"post_id":9157501,"comment_id":11516231,"body_markdown":"If this is a learning situation, you should tag your question as homework.","body":"If this is a learning situation, you should tag your question as homework."},{"owner":{"account_id":1226405,"reputation":331,"user_id":1191852,"accept_rate":38,"display_name":"Kanchan Ruia"},"score":0,"creation_date":1328517974,"post_id":9157501,"comment_id":11516262,"body_markdown":"sorry for inconvenience i have updated my problem. and problem is that it gets downloaded to servers side at c:// and not to clients side","body":"sorry for inconvenience i have updated my problem. and problem is that it gets downloaded to servers side at c:// and not to clients side"}],"answers":[{"comments":[{"owner":{"account_id":1226405,"reputation":331,"user_id":1191852,"accept_rate":38,"display_name":"Kanchan Ruia"},"score":0,"creation_date":1328518612,"post_id":9157586,"comment_id":11516403,"body_markdown":"I debugged my program name is name of image and it is correct. i just want that it should get downloaded to client side and not server side. for that what should i do ?","body":"I debugged my program name is name of image and it is correct. i just want that it should get downloaded to client side and not server side. for that what should i do ?"},{"owner":{"account_id":292185,"reputation":7185,"user_id":594793,"display_name":"Jon7"},"score":0,"creation_date":1328519214,"post_id":9157586,"comment_id":11516560,"body_markdown":"@user1191852 See my updated response. I think I understand your question now!","body":"@user1191852 See my updated response. I think I understand your question now!"},{"owner":{"account_id":1226405,"reputation":331,"user_id":1191852,"accept_rate":38,"display_name":"Kanchan Ruia"},"score":0,"creation_date":1328519450,"post_id":9157586,"comment_id":11516612,"body_markdown":"sir can i get code for such program. I have my deadlines close","body":"sir can i get code for such program. I have my deadlines close"},{"owner":{"account_id":1226405,"reputation":331,"user_id":1191852,"accept_rate":38,"display_name":"Kanchan Ruia"},"score":0,"creation_date":1328527877,"post_id":9157586,"comment_id":11519024,"body_markdown":"sir its like simple download option which you may while browsing websites and where you just click on download link and respected file or image gets downloaded. i want similar program. Please anybody can help me ?","body":"sir its like simple download option which you may while browsing websites and where you just click on download link and respected file or image gets downloaded. i want similar program. Please anybody can help me ?"},{"owner":{"account_id":292185,"reputation":7185,"user_id":594793,"display_name":"Jon7"},"score":0,"creation_date":1328558070,"post_id":9157586,"comment_id":11529331,"body_markdown":"Like I said, you&#39;ll have to send back the raw data in the HTTP Response. If you post the full code of your servlet (I assume?) we can help more. However, noone here is going to write an application for your from scratch. You have to try it yourself and we can help you along the way.","body":"Like I said, you&#39;ll have to send back the raw data in the HTTP Response. If you post the full code of your servlet (I assume?) we can help more. However, noone here is going to write an application for your from scratch. You have to try it yourself and we can help you along the way."}],"tags":[],"owner":{"account_id":292185,"reputation":7185,"user_id":594793,"display_name":"Jon7"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1328519015,"creation_date":1328518221,"answer_id":9157586,"question_id":9157501,"body_markdown":"If the file is getting downloaded to C:\\\\, then that&#39;s what your `cpath` variable equals when you open your `FileOutputStream`. This would imply that your `name` variable is being passed in as an empty string. Try putting in some logging statements (or even better, using the netbeans debugger!) to see what values your variables are holding as your code executes.\r\n\r\nEDIT: I think I understand the problem now. You&#39;re running this as a servlet or something similar. That means that your code is executing on the server, rather than the client. If you want to download the file to a specific path on the client, you&#39;re going to have to use an `Applet` or something similar that runs on the client side. Alternatively, you can return the file in the HTTP response and the user&#39;s browser will ask them where to save the file. Although, at that point, the user could just navigate to the jpg in a browser themselves.\r\n\r\nYou might want to explain your use case in more detail if this doesn&#39;t answer your question.","title":"java code to download an image from server to client","body":"<p>If the file is getting downloaded to C:\\, then that's what your <code>cpath</code> variable equals when you open your <code>FileOutputStream</code>. This would imply that your <code>name</code> variable is being passed in as an empty string. Try putting in some logging statements (or even better, using the netbeans debugger!) to see what values your variables are holding as your code executes.</p>\n\n<p>EDIT: I think I understand the problem now. You're running this as a servlet or something similar. That means that your code is executing on the server, rather than the client. If you want to download the file to a specific path on the client, you're going to have to use an <code>Applet</code> or something similar that runs on the client side. Alternatively, you can return the file in the HTTP response and the user's browser will ask them where to save the file. Although, at that point, the user could just navigate to the jpg in a browser themselves.</p>\n\n<p>You might want to explain your use case in more detail if this doesn't answer your question.</p>\n"},{"tags":[],"owner":{"account_id":4277269,"reputation":407,"user_id":3497603,"accept_rate":80,"display_name":"Sagar Bhosale"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1399526291,"creation_date":1399526291,"answer_id":23533292,"question_id":9157501,"body_markdown":"Try this running code.It will help you.\r\n\r\n\r\n\r\n\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n    import java.net.Authenticator;\r\n    import java.net.PasswordAuthentication;\r\n    import java.net.URL;\r\n    \r\n    public class SaveImageFromUrl {\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\tString imageUrl = &quot;http://2.bp.blogspot.com/_GHaEnqqbRsE/SVsxi-gdQ2I/AAAAAAAAAAU/NS6MEejoHtE/s320/Gppfront.jpg&quot;;\r\n    \t\t\r\n    \t\t\r\n    \t\tString destinationFile = &quot;D://gpp.jpg&quot;;\r\n    \r\n    \t\tsaveImage(imageUrl, destinationFile);\r\n    \t}\r\n    \r\n    \tpublic static void saveImage(String imageUrl, String destinationFile) throws IOException {\r\n    \t\tURL url = new URL(imageUrl);\r\n    \t\tInputStream is = url.openStream();\r\n    \t\tOutputStream os = new FileOutputStream(destinationFile);\r\n    \r\n    \t\tbyte[] b = new byte[2048];\r\n    \t\tint length;\r\n    \r\n    \t\twhile ((length = is.read(b)) != -1) {\r\n    \t\t\tos.write(b, 0, length);\r\n    \t\t}\r\n    \r\n    \t\tis.close();\r\n    \t\tos.close();\r\n    \t}\r\n    \r\n    }","title":"java code to download an image from server to client","body":"<p>Try this running code.It will help you.</p>\n\n<pre><code>import java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.net.Authenticator;\nimport java.net.PasswordAuthentication;\nimport java.net.URL;\n\npublic class SaveImageFromUrl {\n\n    public static void main(String[] args) throws Exception {\n\n\n\n        String imageUrl = \"http://2.bp.blogspot.com/_GHaEnqqbRsE/SVsxi-gdQ2I/AAAAAAAAAAU/NS6MEejoHtE/s320/Gppfront.jpg\";\n\n\n        String destinationFile = \"D://gpp.jpg\";\n\n        saveImage(imageUrl, destinationFile);\n    }\n\n    public static void saveImage(String imageUrl, String destinationFile) throws IOException {\n        URL url = new URL(imageUrl);\n        InputStream is = url.openStream();\n        OutputStream os = new FileOutputStream(destinationFile);\n\n        byte[] b = new byte[2048];\n        int length;\n\n        while ((length = is.read(b)) != -1) {\n            os.write(b, 0, length);\n        }\n\n        is.close();\n        os.close();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1666657,"reputation":494,"user_id":1533909,"accept_rate":57,"display_name":"gashu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1416393091,"creation_date":1416393091,"answer_id":27014549,"question_id":9157501,"body_markdown":"Please try this working code first:\r\n\r\n    package com.ashugupt.github.stackover;\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.FileOutputStream;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.io.OutputStream;\r\n    import java.net.HttpURLConnection;\r\n    import java.net.URL;\r\n\r\n    public class URLTest {\r\n\r\n      private static void sendGet() throws Exception {\r\n\r\n        String url = &quot;http://www.uni-koblenz-landau.de/images/starts-c-ko.jpg&quot;;\r\n        URL obj = new URL(url);\r\n        HttpURLConnection con = (HttpURLConnection) obj.openConnection();\r\n\r\n        // optional default is GET\r\n        con.setRequestMethod(&quot;GET&quot;);\r\n\r\n        //add request header\r\n        con.setRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/5.0&quot;);\r\n\r\n        int responseCode = con.getResponseCode();\r\n        System.out.println(&quot;\\nSending &#39;GET&#39; request to URL : &quot; + url);\r\n        System.out.println(&quot;Response Code : &quot; + responseCode);\r\n\r\n        InputStream in = con.getInputStream();\r\n        OutputStream out = new FileOutputStream(&quot;/Users/ravikiran/Desktop/abc.jpg&quot;);\r\n        try {\r\n          byte[] bytes = new byte[2048];\r\n          int length;\r\n\r\n          while ((length = in.read(bytes)) != -1) {\r\n            out.write(bytes, 0, length);\r\n          }\r\n        } finally {\r\n          in.close();\r\n          out.close();\r\n        }\r\n      }\r\n\r\n      public static void main(String[] args) throws Exception {\r\n        sendGet();\r\n      }\r\n    }\r\n","title":"java code to download an image from server to client","body":"<p>Please try this working code first:</p>\n\n<pre><code>package com.ashugupt.github.stackover;\n\nimport java.io.BufferedReader;\nimport java.io.FileOutputStream;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.io.OutputStream;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\n\npublic class URLTest {\n\n  private static void sendGet() throws Exception {\n\n    String url = \"http://www.uni-koblenz-landau.de/images/starts-c-ko.jpg\";\n    URL obj = new URL(url);\n    HttpURLConnection con = (HttpURLConnection) obj.openConnection();\n\n    // optional default is GET\n    con.setRequestMethod(\"GET\");\n\n    //add request header\n    con.setRequestProperty(\"User-Agent\", \"Mozilla/5.0\");\n\n    int responseCode = con.getResponseCode();\n    System.out.println(\"\\nSending 'GET' request to URL : \" + url);\n    System.out.println(\"Response Code : \" + responseCode);\n\n    InputStream in = con.getInputStream();\n    OutputStream out = new FileOutputStream(\"/Users/ravikiran/Desktop/abc.jpg\");\n    try {\n      byte[] bytes = new byte[2048];\n      int length;\n\n      while ((length = in.read(bytes)) != -1) {\n        out.write(bytes, 0, length);\n      }\n    } finally {\n      in.close();\n      out.close();\n    }\n  }\n\n  public static void main(String[] args) throws Exception {\n    sendGet();\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":1226405,"reputation":331,"user_id":1191852,"accept_rate":38,"display_name":"Kanchan Ruia"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8983,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1695265590,"creation_date":1328517661,"question_id":9157501,"body_markdown":"I am a new to java. I dont know much about it. I am just learning java.\r\nI am developing a web application. In which i have an option download image . If user clicks he should be able to download image from server to client side say at location c://. \r\n\r\n\r\nI have implemented this code ::\r\n\r\n        \r\n    import java.awt.Image;\r\n    import java.io.BufferedInputStream;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n    \r\n    \r\n    import java.net.HttpURLConnection;\r\n    import java.net.MalformedURLException;\r\n    import java.net.URL;\r\n    import javax.imageio.ImageIO;\r\n    \r\n    \r\n    \r\n    \r\n    public class DownloadingImages{\r\n        public DownloadingImages() {}\r\n        \r\n    public void download(String name) throws MalformedURLException, IOException{\r\n    \r\n    Image image = null;\r\n    try {\r\n        //URL url = new URL(&quot;file:///E:/myproject/build/web/images/Webcam.jpg&quot;);\r\n     \r\n     String  spath=&quot;http://localhost:5051/marketpoint/images/&quot;;\r\n     \r\n     String cpath=&quot;C:\\\\&quot;;\r\n    \r\n     \r\n     spath = spath + name ;\r\n     cpath = cpath + name ;\r\n     System.out.println(&quot;FULL path::: &quot;+spath);\r\n     \r\n     \r\n     \r\n     URL url = new URL(spath);\r\n\r\n \r\n \r\n\r\n     InputStream in = new BufferedInputStream(url.openStream());\r\n    ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n    byte[] buf = new byte[1024];\r\n    int n = 0;\r\n    while (-1!=(n=in.read(buf)))\r\n    {\r\n       out.write(buf, 0, n);\r\n    }\r\n    out.close();\r\n    in.close();\r\n    byte[] response = out.toByteArray();\r\n     FileOutputStream fos = new FileOutputStream(cpath);\r\n        fos.write(response);\r\n        fos.close();  \r\n    } catch (IOException e) {\r\n        \r\n        \r\n    }\r\n    }\r\n    }\r\n\r\n\r\n    Here\r\n    name = name of image thta client wants to download.\r\n\r\nHere problem is that image gets downloaded to server&#39;s side. At c:// . can anybody please tell where  am i going wrong.\r\n\r\nFor this i am using net beans as my editor , Apache tomcat as  server.  Both client and Server gets connected through port no 5051. And image that clients want to download from server is simple jpg image.  will anybody help me to get out of this problems. ","title":"java code to download an image from server to client","body":"<p>I am a new to java. I dont know much about it. I am just learning java.\nI am developing a web application. In which i have an option download image . If user clicks he should be able to download image from server to client side say at location c://. </p>\n\n<p>I have implemented this code ::</p>\n\n<pre><code>import java.awt.Image;\nimport java.io.BufferedInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\n\n\nimport java.net.HttpURLConnection;\nimport java.net.MalformedURLException;\nimport java.net.URL;\nimport javax.imageio.ImageIO;\n\n\n\n\npublic class DownloadingImages{\n    public DownloadingImages() {}\n\npublic void download(String name) throws MalformedURLException, IOException{\n\nImage image = null;\ntry {\n    //URL url = new URL(\"file:///E:/myproject/build/web/images/Webcam.jpg\");\n\n String  spath=\"http://localhost:5051/marketpoint/images/\";\n\n String cpath=\"C:\\\\\";\n\n\n spath = spath + name ;\n cpath = cpath + name ;\n System.out.println(\"FULL path::: \"+spath);\n\n\n\n URL url = new URL(spath);\n\n\n\n\n InputStream in = new BufferedInputStream(url.openStream());\nByteArrayOutputStream out = new ByteArrayOutputStream();\nbyte[] buf = new byte[1024];\nint n = 0;\nwhile (-1!=(n=in.read(buf)))\n{\n   out.write(buf, 0, n);\n}\nout.close();\nin.close();\nbyte[] response = out.toByteArray();\n FileOutputStream fos = new FileOutputStream(cpath);\n    fos.write(response);\n    fos.close();  \n} catch (IOException e) {\n\n\n}\n}\n}\n\n\nHere\nname = name of image thta client wants to download.\n</code></pre>\n\n<p>Here problem is that image gets downloaded to server's side. At c:// . can anybody please tell where  am i going wrong.</p>\n\n<p>For this i am using net beans as my editor , Apache tomcat as  server.  Both client and Server gets connected through port no 5051. And image that clients want to download from server is simple jpg image.  will anybody help me to get out of this problems. </p>\n"},{"tags":["java","linux","spring-boot","scheduled-tasks"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1695270523,"post_id":77146950,"comment_id":136002645,"body_markdown":"well, are you having any other scheduler methods? i noticed you are calling your method `scheduleFixedDelayTask2()`. is the duplicated log coming from any `scheduleFixedDelayTask()` or something?","body":"well, are you having any other scheduler methods? i noticed you are calling your method <code>scheduleFixedDelayTask2()</code>. is the duplicated log coming from any <code>scheduleFixedDelayTask()</code> or something?"},{"owner":{"account_id":27663207,"reputation":5,"user_id":21115931,"display_name":"david_23"},"score":0,"creation_date":1695275900,"post_id":77146950,"comment_id":136003177,"body_markdown":"I have another scheduler task inside of a different controller.  other scheduler calling a different method with different logs. and scheduled time is different","body":"I have another scheduler task inside of a different controller.  other scheduler calling a different method with different logs. and scheduled time is different"}],"owner":{"account_id":27663207,"reputation":5,"user_id":21115931,"display_name":"david_23"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695265404,"creation_date":1695265404,"question_id":77146950,"body_markdown":"In my spring boot application, I have written a scheduler to sync some details at the scheduled time.\r\nI have deployed my spring boot application in a Linux server with the Tomcat server. My Linux\r\nserver is in UTC time. \r\n\r\nMy problem is I&#39;ve noticed my scheduler run two times that I scheduled time. I will mention the log details.\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Xz1ts.png\r\n\r\nAs you can see there are two &quot;ClassLink sync Starting.&quot; messages with different trace Ids. \r\nBellow, I&#39;ll mention my scheduler code also.\r\n\r\n    @Scheduled(cron = &quot;0 30 2 * * *&quot;, zone = &quot;UTC&quot;)\r\n    public void scheduleFixedDelayTask2() throws Exception {\r\n        String traceId = controllerUtil.generateTracerId();\r\n        log.info(MessageConstants.API_LOG_INFO,traceId, LocalDateTime.now(), &quot;ClassLink sync Starting.&quot; );\r\n        //classLinkService.fetchClassLinkData(traceId);\r\n        log.info(MessageConstants.API_LOG_INFO,traceId, LocalDateTime.now(), &quot;ClassLink sync finished.&quot; );\r\n    }\r\n\r\n\r\nPlease not that Linux server doesn&#39;t have docker or multiple instances. Just installed tomact server to Linux environment and deploy the soring boot WAR file in tomcat server\r\n\r\nCan you please help me with this ?\r\n","title":"why is the scheduler run in two time in scheduled time","body":"<p>In my spring boot application, I have written a scheduler to sync some details at the scheduled time.\nI have deployed my spring boot application in a Linux server with the Tomcat server. My Linux\nserver is in UTC time.</p>\n<p>My problem is I've noticed my scheduler run two times that I scheduled time. I will mention the log details.</p>\n<p><a href=\"https://i.stack.imgur.com/Xz1ts.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>As you can see there are two &quot;ClassLink sync Starting.&quot; messages with different trace Ids.\nBellow, I'll mention my scheduler code also.</p>\n<pre><code>@Scheduled(cron = &quot;0 30 2 * * *&quot;, zone = &quot;UTC&quot;)\npublic void scheduleFixedDelayTask2() throws Exception {\n    String traceId = controllerUtil.generateTracerId();\n    log.info(MessageConstants.API_LOG_INFO,traceId, LocalDateTime.now(), &quot;ClassLink sync Starting.&quot; );\n    //classLinkService.fetchClassLinkData(traceId);\n    log.info(MessageConstants.API_LOG_INFO,traceId, LocalDateTime.now(), &quot;ClassLink sync finished.&quot; );\n}\n</code></pre>\n<p>Please not that Linux server doesn't have docker or multiple instances. Just installed tomact server to Linux environment and deploy the soring boot WAR file in tomcat server</p>\n<p>Can you please help me with this ?</p>\n"},{"tags":["java","maven","docker"],"comments":[{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1544355593,"post_id":53691781,"comment_id":94239516,"body_markdown":"I have not used this personally, but maybe Jib can help: https://github.com/GoogleContainerTools/jib","body":"I have not used this personally, but maybe Jib can help: <a href=\"https://github.com/GoogleContainerTools/jib\" rel=\"nofollow noreferrer\">github.com/GoogleContainerTools/jib</a>"},{"owner":{"account_id":161943,"reputation":22096,"user_id":383087,"accept_rate":89,"display_name":"Evgeni Dimitrov"},"score":0,"creation_date":1544355708,"post_id":53691781,"comment_id":94239547,"body_markdown":"Take a look at https://spring.io/blog/2018/11/08/spring-boot-in-a-container It&#39;s for Spring Boot, but you could use the same approach for every maven project. Basically you have to create your Docker file with multiple layers, so during the build Docker can cache the layers that are not changed.","body":"Take a look at <a href=\"https://spring.io/blog/2018/11/08/spring-boot-in-a-container\" rel=\"nofollow noreferrer\">spring.io/blog/2018/11/08/spring-boot-in-a-container</a> It&#39;s for Spring Boot, but you could use the same approach for every maven project. Basically you have to create your Docker file with multiple layers, so during the build Docker can cache the layers that are not changed."},{"owner":{"account_id":12601401,"reputation":13828,"user_id":9164010,"display_name":"ErikMD"},"score":0,"creation_date":1544456878,"post_id":53691781,"comment_id":94272591,"body_markdown":"in your edited question you introduce a command `COPY ./.m2 /root/.m2` similar to @MyTwoCents&#39;s suggestion (which could thus be viewed as an alternative to the standard solution of doing `RUN mvn dependency:go-offline -B`, even if `COPY ./.m2 /root/.m2` is less portable as it requires having maven on your host), but I am unsure this could address your main question about the ~200MB *upload* related to the push of a *fat jar* cf. my other [comment](https://stackoverflow.com/questions/53691781/how-to-cache-maven-dependencies-in-docker/#comment94269471_53694920)","body":"in your edited question you introduce a command <code>COPY .&#47;.m2 &#47;root&#47;.m2</code> similar to @MyTwoCents&#39;s suggestion (which could thus be viewed as an alternative to the standard solution of doing <code>RUN mvn dependency:go-offline -B</code>, even if <code>COPY .&#47;.m2 &#47;root&#47;.m2</code> is less portable as it requires having maven on your host), but I am unsure this could address your main question about the ~200MB <i>upload</i> related to the push of a <i>fat jar</i> cf. my other <a href=\"https://stackoverflow.com/questions/53691781/how-to-cache-maven-dependencies-in-docker/#comment94269471_53694920\">comment</a>"},{"owner":{"account_id":183306,"reputation":9436,"user_id":418599,"accept_rate":52,"display_name":"Antonio Petricca"},"score":0,"creation_date":1644502632,"post_id":53691781,"comment_id":125627974,"body_markdown":"Please look at my solution at  https://stackoverflow.com/a/71066133/418599 .","body":"Please look at my solution at  <a href=\"https://stackoverflow.com/a/71066133/418599\">stackoverflow.com/a/71066133/418599</a> ."}],"answers":[{"comments":[{"owner":{"account_id":9331535,"reputation":383,"user_id":6927126,"accept_rate":50,"display_name":"L. Don"},"score":0,"creation_date":1544365657,"post_id":53692303,"comment_id":94242039,"body_markdown":"Thank you for the answer, i&#39;ll give it a try and i&#39;ll let you know! So basically your approach is to don&#39;t give to the JAR any knowledge of any kind of library binding but substitute directly the `.m2` folder in the container?","body":"Thank you for the answer, i&#39;ll give it a try and i&#39;ll let you know! So basically your approach is to don&#39;t give to the JAR any knowledge of any kind of library binding but substitute directly the <code>.m2</code> folder in the container?"},{"owner":{"account_id":12601401,"reputation":13828,"user_id":9164010,"display_name":"ErikMD"},"score":0,"creation_date":1544368591,"post_id":53692303,"comment_id":94242815,"body_markdown":"I didn&#39;t try your suggestion regarding a `~/.m2.jar` file so I&#39;m unsure it would work... but is it documented somewhere? I did not find such a mention in https://maven.apache.org/","body":"I didn&#39;t try your suggestion regarding a <code>~&#47;.m2.jar</code> file so I&#39;m unsure it would work... but is it documented somewhere? I did not find such a mention in <a href=\"https://maven.apache.org/\" rel=\"nofollow noreferrer\">maven.apache.org</a>"},{"owner":{"account_id":4454424,"reputation":7384,"user_id":3625215,"accept_rate":47,"display_name":"MyTwoCents"},"score":2,"creation_date":1544369243,"post_id":53692303,"comment_id":94242972,"body_markdown":"Sorry for the typo in dockerfile, its .m2.zip. There will be .m2 folder generated where all jars are cached in a way when you run mvn build/mvn install first time.\nFolder structure goes like this   ~/.m2/repository/com/oracle/ojdbc7/12.1.0.1/ojdbc7-12.1.0.1.jar.       More detail here: https://www.baeldung.com/maven-local-repository","body":"Sorry for the typo in dockerfile, its .m2.zip. There will be .m2 folder generated where all jars are cached in a way when you run mvn build/mvn install first time. Folder structure goes like this   ~/.m2/repository/com/oracle/ojdbc7/12.1.0.1/ojdbc7-12.1.0.1.&zwnj;&#8203;jar.       More detail here: <a href=\"https://www.baeldung.com/maven-local-repository\" rel=\"nofollow noreferrer\">baeldung.com/maven-local-repository</a>"},{"owner":{"account_id":4454424,"reputation":7384,"user_id":3625215,"accept_rate":47,"display_name":"MyTwoCents"},"score":1,"creation_date":1544449299,"post_id":53692303,"comment_id":94268296,"body_markdown":"Did you unzip . m2 folder inside docker at /home/testuser. Before running build comnand","body":"Did you unzip . m2 folder inside docker at /home/testuser. Before running build comnand"},{"owner":{"account_id":9331535,"reputation":383,"user_id":6927126,"accept_rate":50,"display_name":"L. Don"},"score":0,"creation_date":1544452241,"post_id":53692303,"comment_id":94269964,"body_markdown":"I deleted the previous comment because i was wrong, now it seems to do what i was asking for, well sort of.\n\n@MyTwoCents When I now have the container `.m2` folder populated with all the dependencies, my application can&#39;t still find them resulting in a `NoClassDefFoundError`. I&#39;ll edit my question for further informations. Thanks again for your help.","body":"I deleted the previous comment because i was wrong, now it seems to do what i was asking for, well sort of.  @MyTwoCents When I now have the container <code>.m2</code> folder populated with all the dependencies, my application can&#39;t still find them resulting in a <code>NoClassDefFoundError</code>. I&#39;ll edit my question for further informations. Thanks again for your help."}],"tags":[],"owner":{"account_id":4454424,"reputation":7384,"user_id":3625215,"accept_rate":47,"display_name":"MyTwoCents"},"comment_count":5,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1544368807,"creation_date":1544358545,"answer_id":53692303,"question_id":53691781,"body_markdown":"In general Dockerfile container build, works in layers and each time you build these layers are available in catch and is used if there are no changes.\r\nIdeally it should have worked same way. \r\n\r\nMaven generally looks for dependencies by default in `.m2` folder located in Home dir of User in Ubuntu `/home/username/`\r\n\r\nIf dependent jars are not available then it downloads those jars to .m2 and uses it.\r\n\r\nNow you can zip and copy this `.m2` folder after 1 successful build and move it inside Docker Container User&#39;s Home directory.\r\n\r\nDo this before you run build command\r\n\r\n**Note:** You might need to replace existing `.m2` folder in docker\r\n\r\n\r\nSo your Docker file would be something like this \r\n\r\n    FROM maven:3.6.0-jdk-8-slim\r\n    \r\n    WORKDIR /app\r\n    \r\n    COPY .m2.zip /home/testuser/\r\n    \r\n    ADD pom.xml /app\r\n    \r\n    RUN mvn verify clean --fail-never\r\n    \r\n    COPY ./src /app/src\r\n    \r\n    RUN mvn package\r\n    ...\r\n\r\n","title":"How to cache maven dependencies in Docker","body":"<p>In general Dockerfile container build, works in layers and each time you build these layers are available in catch and is used if there are no changes.\nIdeally it should have worked same way. </p>\n\n<p>Maven generally looks for dependencies by default in <code>.m2</code> folder located in Home dir of User in Ubuntu <code>/home/username/</code></p>\n\n<p>If dependent jars are not available then it downloads those jars to .m2 and uses it.</p>\n\n<p>Now you can zip and copy this <code>.m2</code> folder after 1 successful build and move it inside Docker Container User's Home directory.</p>\n\n<p>Do this before you run build command</p>\n\n<p><strong>Note:</strong> You might need to replace existing <code>.m2</code> folder in docker</p>\n\n<p>So your Docker file would be something like this </p>\n\n<pre><code>FROM maven:3.6.0-jdk-8-slim\n\nWORKDIR /app\n\nCOPY .m2.zip /home/testuser/\n\nADD pom.xml /app\n\nRUN mvn verify clean --fail-never\n\nCOPY ./src /app/src\n\nRUN mvn package\n...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9331535,"reputation":383,"user_id":6927126,"accept_rate":50,"display_name":"L. Don"},"score":0,"creation_date":1544449173,"post_id":53694920,"comment_id":94268234,"body_markdown":"This is quite interesting, and i&#39;ll give it a read for sure but before trying to switch to this solution i  would try everything i can to use nothing but a Dockerfile. I wouldn&#39;t like to pay the price of another level of complexity at this moment. However this is surely a +1.","body":"This is quite interesting, and i&#39;ll give it a read for sure but before trying to switch to this solution i  would try everything i can to use nothing but a Dockerfile. I wouldn&#39;t like to pay the price of another level of complexity at this moment. However this is surely a +1."},{"owner":{"account_id":12601401,"reputation":13828,"user_id":9164010,"display_name":"ErikMD"},"score":0,"creation_date":1544451341,"post_id":53694920,"comment_id":94269471,"body_markdown":"@L.Don It depends on what you want to achieve: from your initial question it seems there are 2 orthogonal issues to address: (1) avoid a ~200MB *download* at each `docker build`, and (2) avoid a ~200MB *upload* (caused by the large size of the `.jar`) after `docker build  &amp;&amp; docker push`. I mentioned both aspects in my answer (and to address point (2) it seems necessary to tweak the way your `.jar` is built, hence the need for one such Maven plugin). But to address point (1) in a reproducible way, everything can indeed be done at the `Dockerfile` level. I&#39;ll edit my answer to expand on this.","body":"@L.Don It depends on what you want to achieve: from your initial question it seems there are 2 orthogonal issues to address: (1) avoid a ~200MB <i>download</i> at each <code>docker build</code>, and (2) avoid a ~200MB <i>upload</i> (caused by the large size of the <code>.jar</code>) after <code>docker build  &amp;&amp; docker push</code>. I mentioned both aspects in my answer (and to address point (2) it seems necessary to tweak the way your <code>.jar</code> is built, hence the need for one such Maven plugin). But to address point (1) in a reproducible way, everything can indeed be done at the <code>Dockerfile</code> level. I&#39;ll edit my answer to expand on this."}],"tags":[],"owner":{"account_id":12601401,"reputation":13828,"user_id":9164010,"display_name":"ErikMD"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1544459580,"creation_date":1544377053,"answer_id":53694920,"question_id":53691781,"body_markdown":"If I understand correctly what you&#39;d like to achieve, the problem is to avoid creating a **fat jar** with all Maven dependencies at each Docker build (to alleviate the size of the Docker layers to be pushed after a rebuild). \r\n\r\nIf yes, you may be interested in the [*Spring Boot Thin Launcher*](https://github.com/dsyer/spring-boot-thin-launcher), which is also applicable for non-Spring-Boot projects. Some comprehensive documentation is available in the `README.md` of the corresponding GitHub repo:\r\nhttps://github.com/dsyer/spring-boot-thin-launcher#readme\r\n\r\nTo sum up, it should suffice to add the following plugin declaration in your `pom.xml`: \r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;!--&lt;version&gt;${spring-boot.version}&lt;/version&gt;--&gt;\r\n                &lt;dependencies&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;org.springframework.boot.experimental&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;spring-boot-thin-layout&lt;/artifactId&gt;\r\n                        &lt;version&gt;1.0.19.RELEASE&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                &lt;/dependencies&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\nIdeally, this solution should be combined with a standard `Dockerfile` setup to benefit from Docker&#39;s cache (see below for a typical example).\r\n\r\n## Leverage Docker&#39;s cache mechanism for a Java/Maven project\r\n\r\nThe archetype of a `Dockerfile` that avoids re-downloading all Maven dependencies at each build if only source code files (`src/*`) have been touched is given in the following reference:  \r\nhttps://whitfin.io/speeding-up-maven-docker-builds/\r\n\r\nTo be more precise, the proposed `Dockerfile` is as follows:\r\n\r\n    # our base build image\r\n    FROM maven:3.5-jdk-8 as maven\r\n    \r\n    WORKDIR /app\r\n    \r\n    # copy the Project Object Model file\r\n    COPY ./pom.xml ./pom.xml\r\n    \r\n    # fetch all dependencies\r\n    RUN mvn dependency:go-offline -B\r\n    \r\n    # copy your other files\r\n    COPY ./src ./src\r\n    \r\n    # build for release\r\n    # NOTE: my-project-* should be replaced with the proper prefix\r\n    RUN mvn package &amp;&amp; cp target/my-project-*.jar app.jar\r\n    \r\n    \r\n    # smaller, final base image\r\n    FROM openjdk:8u171-jre-alpine\r\n    # OPTIONAL: copy dependencies so the thin jar won&#39;t need to re-download them\r\n    # COPY --from=maven /root/.m2 /root/.m2\r\n\r\n    # set deployment directory\r\n    WORKDIR /app\r\n    \r\n    # copy over the built artifact from the maven image\r\n    COPY --from=maven /app/app.jar ./app.jar\r\n    \r\n    # set the startup command to run your binary\r\n    CMD [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/app.jar&quot;]\r\n\r\nNote that it relies on the so-called [**multi-stage build feature**](https://docs.docker.com/develop/develop-images/multistage-build/) of Docker (presence of two `FROM` directives), implying the final image will be much smaller than the `maven` base image itself.  \r\n(If you are not interested in that feature during the development phase, you can remove the lines `FROM openjdk:8u171-jre-alpine` and `COPY --from=maven /app/app.jar ./app.jar`.)\r\n\r\nIn this approach, the Maven dependencies are fetched with `RUN mvn dependency:go-offline -B` **before** the line `COPY ./src ./src` (to benefit from Docker&#39;s cache).\r\n\r\nNote however that the `dependency:go-offline` standard goal is not &quot;perfect&quot; as a few dynamic dependencies/plugins may still trigger some re-downloading at the `mvn package` step.\r\nIf this is an issue for you (e.g. if at some point you&#39;d really want to work offline), you could take at look at that other [SO answer](https://stackoverflow.com/a/52942964/9164010) that suggests using a dedicated plugin that provides the `de.qaware.maven:go-offline-maven-plugin:resolve-dependencies` goal.","title":"How to cache maven dependencies in Docker","body":"<p>If I understand correctly what you'd like to achieve, the problem is to avoid creating a <strong>fat jar</strong> with all Maven dependencies at each Docker build (to alleviate the size of the Docker layers to be pushed after a rebuild). </p>\n\n<p>If yes, you may be interested in the <a href=\"https://github.com/dsyer/spring-boot-thin-launcher\" rel=\"noreferrer\"><em>Spring Boot Thin Launcher</em></a>, which is also applicable for non-Spring-Boot projects. Some comprehensive documentation is available in the <code>README.md</code> of the corresponding GitHub repo:\n<a href=\"https://github.com/dsyer/spring-boot-thin-launcher#readme\" rel=\"noreferrer\">https://github.com/dsyer/spring-boot-thin-launcher#readme</a></p>\n\n<p>To sum up, it should suffice to add the following plugin declaration in your <code>pom.xml</code>: </p>\n\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;!--&lt;version&gt;${spring-boot.version}&lt;/version&gt;--&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.springframework.boot.experimental&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-thin-layout&lt;/artifactId&gt;\n                    &lt;version&gt;1.0.19.RELEASE&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>Ideally, this solution should be combined with a standard <code>Dockerfile</code> setup to benefit from Docker's cache (see below for a typical example).</p>\n\n<h2>Leverage Docker's cache mechanism for a Java/Maven project</h2>\n\n<p>The archetype of a <code>Dockerfile</code> that avoids re-downloading all Maven dependencies at each build if only source code files (<code>src/*</code>) have been touched is given in the following reference:<br>\n<a href=\"https://whitfin.io/speeding-up-maven-docker-builds/\" rel=\"noreferrer\">https://whitfin.io/speeding-up-maven-docker-builds/</a></p>\n\n<p>To be more precise, the proposed <code>Dockerfile</code> is as follows:</p>\n\n<pre><code># our base build image\nFROM maven:3.5-jdk-8 as maven\n\nWORKDIR /app\n\n# copy the Project Object Model file\nCOPY ./pom.xml ./pom.xml\n\n# fetch all dependencies\nRUN mvn dependency:go-offline -B\n\n# copy your other files\nCOPY ./src ./src\n\n# build for release\n# NOTE: my-project-* should be replaced with the proper prefix\nRUN mvn package &amp;&amp; cp target/my-project-*.jar app.jar\n\n\n# smaller, final base image\nFROM openjdk:8u171-jre-alpine\n# OPTIONAL: copy dependencies so the thin jar won't need to re-download them\n# COPY --from=maven /root/.m2 /root/.m2\n\n# set deployment directory\nWORKDIR /app\n\n# copy over the built artifact from the maven image\nCOPY --from=maven /app/app.jar ./app.jar\n\n# set the startup command to run your binary\nCMD [\"java\", \"-jar\", \"/app/app.jar\"]\n</code></pre>\n\n<p>Note that it relies on the so-called <a href=\"https://docs.docker.com/develop/develop-images/multistage-build/\" rel=\"noreferrer\"><strong>multi-stage build feature</strong></a> of Docker (presence of two <code>FROM</code> directives), implying the final image will be much smaller than the <code>maven</code> base image itself.<br>\n(If you are not interested in that feature during the development phase, you can remove the lines <code>FROM openjdk:8u171-jre-alpine</code> and <code>COPY --from=maven /app/app.jar ./app.jar</code>.)</p>\n\n<p>In this approach, the Maven dependencies are fetched with <code>RUN mvn dependency:go-offline -B</code> <strong>before</strong> the line <code>COPY ./src ./src</code> (to benefit from Docker's cache).</p>\n\n<p>Note however that the <code>dependency:go-offline</code> standard goal is not \"perfect\" as a few dynamic dependencies/plugins may still trigger some re-downloading at the <code>mvn package</code> step.\nIf this is an issue for you (e.g. if at some point you'd really want to work offline), you could take at look at that other <a href=\"https://stackoverflow.com/a/52942964/9164010\">SO answer</a> that suggests using a dedicated plugin that provides the <code>de.qaware.maven:go-offline-maven-plugin:resolve-dependencies</code> goal.</p>\n"},{"tags":[],"owner":{"account_id":4034768,"reputation":331,"user_id":3319644,"display_name":"Daniel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1576593298,"creation_date":1576593298,"answer_id":59376473,"question_id":53691781,"body_markdown":"The [documentation of the official Maven Docker images](https://hub.docker.com/_/maven) also points out different ways to achieve better caching of dependencies.\r\n\r\nBasically, they recommend to either mount the local maven repository as a volume and use it across Docker images or use a special local repository (/usr/share/maven/ref/) the contents of which will be copied on container startup. ","title":"How to cache maven dependencies in Docker","body":"<p>The <a href=\"https://hub.docker.com/_/maven\" rel=\"nofollow noreferrer\">documentation of the official Maven Docker images</a> also points out different ways to achieve better caching of dependencies.</p>\n\n<p>Basically, they recommend to either mount the local maven repository as a volume and use it across Docker images or use a special local repository (/usr/share/maven/ref/) the contents of which will be copied on container startup. </p>\n"},{"tags":[],"owner":{"account_id":2872454,"reputation":431,"user_id":2465467,"display_name":"Ashim"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695264856,"creation_date":1695264856,"answer_id":77146927,"question_id":53691781,"body_markdown":"Docker has a RUN cache feature which you can use to further cache the maven&#39;s .m2 directory. Here&#39;s a sample Dockerfile for a Spring Boot application with Maven.\r\n\r\n    FROM eclipse-temurin:17-jdk-alpine AS build\r\n    WORKDIR /workspace/app\r\n    COPY mvnw .\r\n    COPY .mvn .mvn\r\n    COPY pom.xml .\r\n    RUN \\\r\n        --mount=type=cache,target=/root/.m2 \\\r\n        ./mvnw dependency:resolve-plugins dependency:resolve\r\n    COPY src src\r\n    RUN \\\r\n        --mount=type=cache,target=/root/.m2 \\\r\n        ./mvnw package\r\n    RUN mkdir -p target/dependency &amp;&amp; (cd target/dependency; jar -xf ../*.jar)\r\n    \r\n\r\n    FROM eclipse-temurin:17-jdk-alpine\r\n    VOLUME /tmp\r\n    ARG DEPENDENCY=/workspace/app/target/dependency\r\n    COPY --from=build ${DEPENDENCY}/BOOT-INF/lib /app/lib\r\n    COPY --from=build ${DEPENDENCY}/META-INF /app/META-INF\r\n    COPY --from=build ${DEPENDENCY}/BOOT-INF/classes /app\r\n    ENTRYPOINT [&quot;java&quot;,&quot;-cp&quot;,&quot;app:app/lib/*&quot;,&quot;com.example.SpringApplication&quot;]\r\n\r\n","title":"How to cache maven dependencies in Docker","body":"<p>Docker has a RUN cache feature which you can use to further cache the maven's .m2 directory. Here's a sample Dockerfile for a Spring Boot application with Maven.</p>\n<pre><code>FROM eclipse-temurin:17-jdk-alpine AS build\nWORKDIR /workspace/app\nCOPY mvnw .\nCOPY .mvn .mvn\nCOPY pom.xml .\nRUN \\\n    --mount=type=cache,target=/root/.m2 \\\n    ./mvnw dependency:resolve-plugins dependency:resolve\nCOPY src src\nRUN \\\n    --mount=type=cache,target=/root/.m2 \\\n    ./mvnw package\nRUN mkdir -p target/dependency &amp;&amp; (cd target/dependency; jar -xf ../*.jar)\n\n\nFROM eclipse-temurin:17-jdk-alpine\nVOLUME /tmp\nARG DEPENDENCY=/workspace/app/target/dependency\nCOPY --from=build ${DEPENDENCY}/BOOT-INF/lib /app/lib\nCOPY --from=build ${DEPENDENCY}/META-INF /app/META-INF\nCOPY --from=build ${DEPENDENCY}/BOOT-INF/classes /app\nENTRYPOINT [&quot;java&quot;,&quot;-cp&quot;,&quot;app:app/lib/*&quot;,&quot;com.example.SpringApplication&quot;]\n</code></pre>\n"}],"owner":{"account_id":9331535,"reputation":383,"user_id":6927126,"accept_rate":50,"display_name":"L. Don"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17606,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":4,"score":14,"last_activity_date":1695264856,"creation_date":1544354464,"question_id":53691781,"body_markdown":"I&#39;m working on a project with ~200MB dependencies and i&#39;d like to avoid useless uploads due to my limited bandwidth. \r\n\r\nWhen I push my Dockerfile (i&#39;ll attach it in a moment), I always have a ~200MB upload even if I didn&#39;t touch the pom.xml:\r\n\r\n    FROM maven:3.6.0-jdk-8-slim\r\n    \r\n    WORKDIR /app\r\n    \r\n    ADD pom.xml /app\r\n    \r\n    RUN mvn verify clean --fail-never\r\n   \r\n    COPY ./src /app/src\r\n    \r\n    RUN mvn package\r\n    \r\n    ENV CONFIG_FOLDER=/app/config\r\n    ENV DATA_FOLDER=/app/data\r\n    ENV GOLDENS_FOLDER=/app/goldens\r\n    ENV DEBUG_FOLDER=/app/debug\r\n    \r\n    WORKDIR target\r\n    \r\n    CMD [&quot;java&quot;,&quot;-jar&quot;,&quot;-Dlogs=/app/logs&quot;, &quot;myProject.jar&quot;]\r\n\r\nThis Dockerfile should make a 200MB fatJAR including all the dependencies, that&#39;s why the ~200MB upload that occurs everytime. What i would like to achieve is building a Layer with all the dependencies and &quot;tell&quot; to the packaging phase to not include the dependencies JARs into the fatJAR but to search for them inside a given directory.\r\n\r\nI was wondering to build a script that executes `mvn dependency:copy-dependencies` before the building process and then copying the directory to the container; then building a &quot;non-fat&quot;JAR that has all those dependencies only linked and not actually copied into it.\r\n\r\nIs this possible?\r\n\r\n**EDIT:** \r\nI discovered that the Maven Local Repository of the container is located under `/root/.m2`. So I ended making a very simple script like this:\r\n\r\n*BuildDocker.sh*\r\n\r\n    mvn verify -clean --fail-never\r\n    mv ~/.m2 ~/git/myProjectRepo/.m2\r\n\r\n    sudo docker build -t myName/myProject:&quot;$1&quot;\r\n\r\nAnd edited *Dockerfile* like:\r\n\r\n    # Use an official Python runtime as a parent image\r\n    FROM maven:3.6.0-jdk-8-slim\r\n    \r\n    # Copy my Mavne Local Repository into the container thus creating a new layer\r\n    COPY ./.m2 /root/.m2\r\n\r\n    # Set the working directory to /app\r\n    WORKDIR /app\r\n\r\n    # Copy the pom.xml\r\n    ADD pom.xml /app\r\n\r\n    # Resolve and Download all dependencies: this will be done only if the pom.xml has any changes\r\n    RUN mvn verify clean --fail-never\r\n\r\n    # Copy source code and configs \r\n    COPY ./src /app/src\r\n\r\n    # create a ThinJAR\r\n    RUN mvn package\r\n\r\n\r\n    # Run the jar\r\n    ...\r\n\r\nAfter the building process i stated that `/root/.m2` has all the directories I but as soon as i launch the JAR i get:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/log4j/Priority\r\n    \tat myProject.ThreeMeans.calculate(ThreeMeans.java:17)\r\n    \tat myProject.ClusteringStartup.main(ClusteringStartup.java:7)\r\n    Caused by: java.lang.ClassNotFoundException: org.apache.log4j.Priority\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n    \t... 2 more\r\n\r\nMaybe i shouldn&#39;t run it through `java -jar`?","title":"How to cache maven dependencies in Docker","body":"<p>I'm working on a project with ~200MB dependencies and i'd like to avoid useless uploads due to my limited bandwidth. </p>\n\n<p>When I push my Dockerfile (i'll attach it in a moment), I always have a ~200MB upload even if I didn't touch the pom.xml:</p>\n\n<pre><code>FROM maven:3.6.0-jdk-8-slim\n\nWORKDIR /app\n\nADD pom.xml /app\n\nRUN mvn verify clean --fail-never\n\nCOPY ./src /app/src\n\nRUN mvn package\n\nENV CONFIG_FOLDER=/app/config\nENV DATA_FOLDER=/app/data\nENV GOLDENS_FOLDER=/app/goldens\nENV DEBUG_FOLDER=/app/debug\n\nWORKDIR target\n\nCMD [\"java\",\"-jar\",\"-Dlogs=/app/logs\", \"myProject.jar\"]\n</code></pre>\n\n<p>This Dockerfile should make a 200MB fatJAR including all the dependencies, that's why the ~200MB upload that occurs everytime. What i would like to achieve is building a Layer with all the dependencies and \"tell\" to the packaging phase to not include the dependencies JARs into the fatJAR but to search for them inside a given directory.</p>\n\n<p>I was wondering to build a script that executes <code>mvn dependency:copy-dependencies</code> before the building process and then copying the directory to the container; then building a \"non-fat\"JAR that has all those dependencies only linked and not actually copied into it.</p>\n\n<p>Is this possible?</p>\n\n<p><strong>EDIT:</strong> \nI discovered that the Maven Local Repository of the container is located under <code>/root/.m2</code>. So I ended making a very simple script like this:</p>\n\n<p><em>BuildDocker.sh</em></p>\n\n<pre><code>mvn verify -clean --fail-never\nmv ~/.m2 ~/git/myProjectRepo/.m2\n\nsudo docker build -t myName/myProject:\"$1\"\n</code></pre>\n\n<p>And edited <em>Dockerfile</em> like:</p>\n\n<pre><code># Use an official Python runtime as a parent image\nFROM maven:3.6.0-jdk-8-slim\n\n# Copy my Mavne Local Repository into the container thus creating a new layer\nCOPY ./.m2 /root/.m2\n\n# Set the working directory to /app\nWORKDIR /app\n\n# Copy the pom.xml\nADD pom.xml /app\n\n# Resolve and Download all dependencies: this will be done only if the pom.xml has any changes\nRUN mvn verify clean --fail-never\n\n# Copy source code and configs \nCOPY ./src /app/src\n\n# create a ThinJAR\nRUN mvn package\n\n\n# Run the jar\n...\n</code></pre>\n\n<p>After the building process i stated that <code>/root/.m2</code> has all the directories I but as soon as i launch the JAR i get:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: org/apache/log4j/Priority\n    at myProject.ThreeMeans.calculate(ThreeMeans.java:17)\n    at myProject.ClusteringStartup.main(ClusteringStartup.java:7)\nCaused by: java.lang.ClassNotFoundException: org.apache.log4j.Priority\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    ... 2 more\n</code></pre>\n\n<p>Maybe i shouldn't run it through <code>java -jar</code>?</p>\n"},{"tags":["java","image","transparency","gif","opacity"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1695252981,"post_id":77146395,"comment_id":136001200,"body_markdown":"Seems to work fine for me","body":"Seems to work fine for me"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1695255253,"post_id":77146395,"comment_id":136001389,"body_markdown":"When I use Paint I get the same result as you. I tried to use the Color picker for both colors. However, the alpha value is not displayed, so I don&#39;t know what Paint is reading. I did try creating a simple GUI using a JLabel and the StretchIcon (from my blog) to display each image. Both showed as transparent in the frame.","body":"When I use Paint I get the same result as you. I tried to use the Color picker for both colors. However, the alpha value is not displayed, so I don&#39;t know what Paint is reading. I did try creating a simple GUI using a JLabel and the StretchIcon (from my blog) to display each image. Both showed as transparent in the frame."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1695255910,"post_id":77146395,"comment_id":136001444,"body_markdown":"Also, noticed that in Paint the &quot;transparent&quot; color for the png the color is (255, 255, 255) but for the gif it is (0, 0, 0). Don&#39;t know what it means, just an observation.","body":"Also, noticed that in Paint the &quot;transparent&quot; color for the png the color is (255, 255, 255) but for the gif it is (0, 0, 0). Don&#39;t know what it means, just an observation."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695259816,"post_id":77146395,"comment_id":136001757,"body_markdown":"@MadProgrammer Wow, could you describe your setup? I am Windows 11. Are you using something else? Do you think that this may be a bug with Java Swing?","body":"@MadProgrammer Wow, could you describe your setup? I am Windows 11. Are you using something else? Do you think that this may be a bug with Java Swing?"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695259897,"post_id":77146395,"comment_id":136001763,"body_markdown":"@camickr Thanks for checking. Glad to hear that you are able to recreate this. I don&#39;t understand it either. As a side question, could you tell me what your set up is? Are you Windows 11? Linux? Based on MadProgrammer&#39;s response, it sounds like this might be set up specific.","body":"@camickr Thanks for checking. Glad to hear that you are able to recreate this. I don&#39;t understand it either. As a side question, could you tell me what your set up is? Are you Windows 11? Linux? Based on MadProgrammer&#39;s response, it sounds like this might be set up specific."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695259976,"post_id":77146395,"comment_id":136001772,"body_markdown":"@camickr As a side note, you can get the alpha value by calling the Color::getAlpha \\method.","body":"@camickr As a side note, you can get the alpha value by calling the Color::getAlpha \\method."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695260172,"post_id":77146395,"comment_id":136001779,"body_markdown":"@camickr Using 0, 0, 0, 0 for the transparent didn&#39;t change anything, the color still came out Black","body":"@camickr Using 0, 0, 0, 0 for the transparent didn&#39;t change anything, the color still came out Black"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1695261480,"post_id":77146395,"comment_id":136001876,"body_markdown":"I&quot;m Windows 11. MadProgrammer is Mac.","body":"I&quot;m Windows 11. MadProgrammer is Mac."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695261531,"post_id":77146395,"comment_id":136001881,"body_markdown":"@camickr Interesting! Do you think this is worth submitting a bug report for?","body":"@camickr Interesting! Do you think this is worth submitting a bug report for?"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695261886,"post_id":77146395,"comment_id":136001907,"body_markdown":"Though, I should probably bounty the question first. If the bounty doesn&#39;t give an answer, then I will do it.","body":"Though, I should probably bounty the question first. If the bounty doesn&#39;t give an answer, then I will do it."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1695263008,"post_id":77146395,"comment_id":136002016,"body_markdown":"Playing more with paint and I found that it has a &quot;background transparency&quot; tool. When I used the tool the area I painted over also became black. I then retested the image in my GUi and it indeed did show as transparent. So the black you see in Paint appears to be the way it displays a transparent section since the background by default is white. Look in the &quot;Image&quot; section of paint and click on the drop down arrow of the rectangle in the left area of the image section.","body":"Playing more with paint and I found that it has a &quot;background transparency&quot; tool. When I used the tool the area I painted over also became black. I then retested the image in my GUi and it indeed did show as transparent. So the black you see in Paint appears to be the way it displays a transparent section since the background by default is white. Look in the &quot;Image&quot; section of paint and click on the drop down arrow of the rectangle in the left area of the image section."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1695263618,"post_id":77146395,"comment_id":136002075,"body_markdown":"I also tried using the &quot;Open With&quot; function of FileExplorer and opened the gif image in the &quot;Snipping Tool&quot; and I see a white background in the center of the image which matches the background of the image tool. So I don&#39;t think the is an issue with the image. Note, it would have been nice to work with a larger image in the Paint program to test the &quot;background transparency&quot; tool.","body":"I also tried using the &quot;Open With&quot; function of FileExplorer and opened the gif image in the &quot;Snipping Tool&quot; and I see a white background in the center of the image which matches the background of the image tool. So I don&#39;t think the is an issue with the image. Note, it would have been nice to work with a larger image in the Paint program to test the &quot;background transparency&quot; tool."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695264094,"post_id":77146395,"comment_id":136002116,"body_markdown":"@camickr Thank you for taking the time to test this out! I guess for me, the thing that led me to believe it was not working was because of IrfanView. I have uploaded another image that is public gif from online (hope I don&#39;t get in trouble for using it). When I open it up in IrfanView, it shows purple as the background as expected. I do not get that for my image. I followed your cue, and started checking other image viewers, and all others worked out like you said, so I think you are actually correct. I tried snipping tool, Paint, Photos, Firefox, and LibreOffice Draw. All worked.","body":"@camickr Thank you for taking the time to test this out! I guess for me, the thing that led me to believe it was not working was because of IrfanView. I have uploaded another image that is public gif from online (hope I don&#39;t get in trouble for using it). When I open it up in IrfanView, it shows purple as the background as expected. I do not get that for my image. I followed your cue, and started checking other image viewers, and all others worked out like you said, so I think you are actually correct. I tried snipping tool, Paint, Photos, Firefox, and LibreOffice Draw. All worked."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":1,"creation_date":1695264418,"post_id":77146395,"comment_id":136002134,"body_markdown":"@camickr If you throw your comment into an answer, I&#39;ll accept it. If not, I can do it.","body":"@camickr If you throw your comment into an answer, I&#39;ll accept it. If not, I can do it."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1695265497,"post_id":77146395,"comment_id":136002218,"body_markdown":"@davidalayachew Java 17.0.3.1 on MacOS Ventura 13.5.2","body":"@davidalayachew Java 17.0.3.1 on MacOS Ventura 13.5.2"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695265559,"post_id":77146395,"comment_id":136002232,"body_markdown":"@MadProgrammer Ty vm! Yeah, looks like it is not a bug at all. I am signing up on the IrfanView message boards to see if it is a bug on their side.","body":"@MadProgrammer Ty vm! Yeah, looks like it is not a bug at all. I am signing up on the IrfanView message boards to see if it is a bug on their side."}],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695264293,"creation_date":1695252465,"question_id":77146395,"body_markdown":"I have code that creates a simple 5x5 array of [`java.awt.Color`][1], and then uses that to create a [`java.awt.image.BufferedImage`][2]. The edges of the array are an opaque color (`alpha = 255`) called `o`, while the center is a transparent color (`alpha = 0`) called `t`.\r\n\r\nFinally, I write the image out to file using [`javax.imageio.ImageIO.write()`][3].\r\n\r\nHere is the code.\r\n\r\n```\r\nimport java.awt.Color;\r\nimport java.awt.image.BufferedImage;\r\nimport java.io.File;\r\nimport javax.imageio.ImageIO;\r\n\r\nclass Irrelevant\r\n{\r\n\r\n   public static void main(String[] args) throws Exception\r\n   {\r\n   \r\n      final Color o = new Color(255, 0, 0, 255); //opaque red\r\n      final Color t = new Color(0, 255, 0, 0);   //transparent green -- clear\r\n   \r\n      final Color[][] pixels = //red edges with (ideally) a clear center\r\n         {\r\n            {o, t, t, t, o},\r\n            {o, t, t, t, o},\r\n            {o, t, t, t, o},\r\n            {o, t, t, t, o},\r\n            {o, t, t, t, o}\r\n         };\r\n   \r\n      BufferedImage image = new BufferedImage(pixels.length, pixels[0].length, BufferedImage.TYPE_INT_ARGB);\r\n   \r\n      for (int y = 0; y &lt; pixels.length; y++)\r\n      {\r\n         for (int x = 0; x &lt; pixels[y].length; x++)\r\n         {\r\n            image.setRGB(x, y, pixels[y][x].getRGB());\r\n         }\r\n      }\r\n   \r\n      ImageIO.write(image, &quot;gif&quot;, new File(&quot;abctest.gif&quot;));\r\n      ImageIO.write(image, &quot;png&quot;, new File(&quot;abctest.png&quot;));\r\n   \r\n   }\r\n\r\n}\r\n```\r\n\r\nHowever, here is the resulting gif. I am showing it with a purple background to show that the image is ***NOT*** transparent in the center, like expected. It is actually black.\r\n\r\nDon&#39;t mind the fuzziness, that&#39;s IrfanView being annoying.\r\n\r\n[![enter image description here][4]][4]\r\n\r\nAnd here is another one in Microsoft Paint. Same gif.\r\n\r\n[![enter image description here][5]][5]\r\n\r\nWhy are they not clear in the center? And I know I set the `alpha` correctly because remember, I also saved it as a png as well as a gif. When I save it as a png, it works as expected. Here are screenshots for the png.\r\n\r\n[![enter image description here][6]][6]\r\n\r\n[![enter image description here][7]][7]\r\n\r\nCan someone help point me in the right direction?\r\n\r\nEDIT - Here is an example image that I did not make.\r\n\r\n[![enter image description here][8]][8]\r\n\r\nIn IrfanView, it looks like this.\r\n\r\n[![enter image description here][9]][9]\r\n\r\nIn this gif, the purple shows up correctly, which is what threw me off.\r\n\r\nBut thanks to the help of @camickr, I am starting to think that it is actually something that only happens on IrfanView because all other image viewers I looked at it through worked. That includes, Photos, Snipping Tool, LibreOffice Draw, and Firefox. All showed a white (or background specific color) when rendering, implying that it is actually transparent.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/Color.html\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/image/BufferedImage.html\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/imageio/ImageIO.html#write(java.awt.image.RenderedImage,java.lang.String,java.io.File)\r\n  [4]: https://i.stack.imgur.com/MjfDC.png\r\n  [5]: https://i.stack.imgur.com/L0gnQ.png\r\n  [6]: https://i.stack.imgur.com/Ve5bd.png\r\n  [7]: https://i.stack.imgur.com/kq0Oq.png\r\n  [8]: https://i.stack.imgur.com/Quk0b.gif\r\n  [9]: https://i.stack.imgur.com/rB3gU.png","title":"How to create transparent pixels in a gif for BufferedImage, then save to a GIF file?","body":"<p>I have code that creates a simple 5x5 array of <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/Color.html\" rel=\"nofollow noreferrer\"><code>java.awt.Color</code></a>, and then uses that to create a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/image/BufferedImage.html\" rel=\"nofollow noreferrer\"><code>java.awt.image.BufferedImage</code></a>. The edges of the array are an opaque color (<code>alpha = 255</code>) called <code>o</code>, while the center is a transparent color (<code>alpha = 0</code>) called <code>t</code>.</p>\n<p>Finally, I write the image out to file using <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/imageio/ImageIO.html#write(java.awt.image.RenderedImage,java.lang.String,java.io.File)\" rel=\"nofollow noreferrer\"><code>javax.imageio.ImageIO.write()</code></a>.</p>\n<p>Here is the code.</p>\n<pre><code>import java.awt.Color;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport javax.imageio.ImageIO;\n\nclass Irrelevant\n{\n\n   public static void main(String[] args) throws Exception\n   {\n   \n      final Color o = new Color(255, 0, 0, 255); //opaque red\n      final Color t = new Color(0, 255, 0, 0);   //transparent green -- clear\n   \n      final Color[][] pixels = //red edges with (ideally) a clear center\n         {\n            {o, t, t, t, o},\n            {o, t, t, t, o},\n            {o, t, t, t, o},\n            {o, t, t, t, o},\n            {o, t, t, t, o}\n         };\n   \n      BufferedImage image = new BufferedImage(pixels.length, pixels[0].length, BufferedImage.TYPE_INT_ARGB);\n   \n      for (int y = 0; y &lt; pixels.length; y++)\n      {\n         for (int x = 0; x &lt; pixels[y].length; x++)\n         {\n            image.setRGB(x, y, pixels[y][x].getRGB());\n         }\n      }\n   \n      ImageIO.write(image, &quot;gif&quot;, new File(&quot;abctest.gif&quot;));\n      ImageIO.write(image, &quot;png&quot;, new File(&quot;abctest.png&quot;));\n   \n   }\n\n}\n</code></pre>\n<p>However, here is the resulting gif. I am showing it with a purple background to show that the image is <em><strong>NOT</strong></em> transparent in the center, like expected. It is actually black.</p>\n<p>Don't mind the fuzziness, that's IrfanView being annoying.</p>\n<p><a href=\"https://i.stack.imgur.com/MjfDC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MjfDC.png\" alt=\"enter image description here\" /></a></p>\n<p>And here is another one in Microsoft Paint. Same gif.</p>\n<p><a href=\"https://i.stack.imgur.com/L0gnQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/L0gnQ.png\" alt=\"enter image description here\" /></a></p>\n<p>Why are they not clear in the center? And I know I set the <code>alpha</code> correctly because remember, I also saved it as a png as well as a gif. When I save it as a png, it works as expected. Here are screenshots for the png.</p>\n<p><a href=\"https://i.stack.imgur.com/Ve5bd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ve5bd.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/kq0Oq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kq0Oq.png\" alt=\"enter image description here\" /></a></p>\n<p>Can someone help point me in the right direction?</p>\n<p>EDIT - Here is an example image that I did not make.</p>\n<p><a href=\"https://i.stack.imgur.com/Quk0b.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Quk0b.gif\" alt=\"enter image description here\" /></a></p>\n<p>In IrfanView, it looks like this.</p>\n<p><a href=\"https://i.stack.imgur.com/rB3gU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rB3gU.png\" alt=\"enter image description here\" /></a></p>\n<p>In this gif, the purple shows up correctly, which is what threw me off.</p>\n<p>But thanks to the help of @camickr, I am starting to think that it is actually something that only happens on IrfanView because all other image viewers I looked at it through worked. That includes, Photos, Snipping Tool, LibreOffice Draw, and Firefox. All showed a white (or background specific color) when rendering, implying that it is actually transparent.</p>\n"},{"tags":["java","c++","friend","accessor"],"answers":[{"comments":[{"owner":{"account_id":237,"reputation":28496,"user_id":292,"accept_rate":68,"display_name":"shsteimer"},"score":3,"creation_date":1227627730,"post_id":182285,"comment_id":159294,"body_markdown":"i would consider this such a bad idea that even suggesting it is abhorrent to me.  Obviously this is a cludge at best, and should not be part of any design.","body":"i would consider this such a bad idea that even suggesting it is abhorrent to me.  Obviously this is a cludge at best, and should not be part of any design."}],"tags":[],"owner":{"account_id":6875,"reputation":412,"user_id":11701,"display_name":"NR."},"comment_count":1,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1378396667,"creation_date":1223465975,"answer_id":182285,"question_id":182278,"body_markdown":"Not using a keyword or so.\r\n\r\nYou could &quot;cheat&quot; using reflection etc., but I wouldn&#39;t recommend &quot;cheating&quot;.","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>Not using a keyword or so.</p>\n\n<p>You could \"cheat\" using reflection etc., but I wouldn't recommend \"cheating\".</p>\n"},{"tags":[],"owner":{"account_id":12738,"reputation":5042,"user_id":25234,"accept_rate":83,"display_name":"Black"},"comment_count":0,"down_vote_count":6,"up_vote_count":14,"is_accepted":false,"score":8,"last_activity_date":1223466505,"creation_date":1223466505,"answer_id":182320,"question_id":182278,"body_markdown":"As far as I know, it is not possible.\r\n\r\nMaybe, You could give us some more details about Your design. Questions like these are likely the result of design flaws.\r\n\r\nJust consider\r\n  \r\n  - Why are those classes in different packages, if they are so closely related?\r\n  - Has A to access private members of B or should the operation be moved to class B and triggered by A?\r\n  - Is this really calling or is event-handling better?\r\n","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>As far as I know, it is not possible.</p>\n\n<p>Maybe, You could give us some more details about Your design. Questions like these are likely the result of design flaws.</p>\n\n<p>Just consider</p>\n\n<ul>\n<li>Why are those classes in different packages, if they are so closely related?</li>\n<li>Has A to access private members of B or should the operation be moved to class B and triggered by A?</li>\n<li>Is this really calling or is event-handling better?</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":10732,"reputation":54830,"user_id":20400,"accept_rate":72,"display_name":"Omar Kooheji"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1223466537,"creation_date":1223466537,"answer_id":182324,"question_id":182278,"body_markdown":"If you want to access protected methods you could create a subclass of the class you want to use that exposes the methods you want to use as public (or internal to the namespace to be safer), and have an instance of that class in your class (use it as a proxy).\r\n\r\nAs far as private methods are concerned (I think) you are out of luck. ","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>If you want to access protected methods you could create a subclass of the class you want to use that exposes the methods you want to use as public (or internal to the namespace to be safer), and have an instance of that class in your class (use it as a proxy).</p>\n\n<p>As far as private methods are concerned (I think) you are out of luck. </p>\n"},{"comments":[{"owner":{"account_id":4572,"reputation":43468,"user_id":6932,"accept_rate":97,"display_name":"Greg D"},"score":14,"creation_date":1223469945,"post_id":182370,"comment_id":64353,"body_markdown":"I don&#39;t mean to be a pedant, but access modifiers aren&#39;t a security mechanism.","body":"I don&#39;t mean to be a pedant, but access modifiers aren&#39;t a security mechanism."},{"owner":{"account_id":2277,"reputation":6269,"user_id":3150,"accept_rate":80,"display_name":"David G"},"score":6,"creation_date":1223489457,"post_id":182370,"comment_id":65370,"body_markdown":"Access modifiers are part of the java security model. I was specifically referring to java.lang.RuntimePermission for reflection: accessDeclaredMembers and accessClassInPackage.","body":"Access modifiers are part of the java security model. I was specifically referring to java.lang.RuntimePermission for reflection: accessDeclaredMembers and accessClassInPackage."},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":61,"creation_date":1306511365,"post_id":182370,"comment_id":7149174,"body_markdown":"If Gosling really thought that `friend` violated OOP (in particular, more than package access does) then [he really didnt understand it](http://www.parashift.com/c++-faq-lite/friends.html#faq-14.2)  (entirely possible, many people misunderstand it).","body":"If Gosling really thought that <code>friend</code> violated OOP (in particular, more than package access does) then <a href=\"http://www.parashift.com/c++-faq-lite/friends.html#faq-14.2\" rel=\"nofollow noreferrer\">he really didnt understand it</a>  (entirely possible, many people misunderstand it)."},{"owner":{"account_id":121329,"reputation":11365,"user_id":314345,"accept_rate":67,"display_name":"dhardy"},"score":12,"creation_date":1392201827,"post_id":182370,"comment_id":32853856,"body_markdown":"Class components sometimes need to be separated (e.g. implementation and API, core object and adapter). Package-level protection is at the same time too permissive and too restrictive to do this properly.","body":"Class components sometimes need to be separated (e.g. implementation and API, core object and adapter). Package-level protection is at the same time too permissive and too restrictive to do this properly."},{"owner":{"account_id":1230575,"reputation":16783,"user_id":1195273,"accept_rate":81,"display_name":"crush"},"score":4,"creation_date":1408813054,"post_id":182370,"comment_id":39736765,"body_markdown":"@GregD They *could* be considered a security mechanism in the sense that they help to prevent developers from using a class member incorrectly. I think they&#39;d probably better be referred to as a **safety mechanism**.","body":"@GregD They <i>could</i> be considered a security mechanism in the sense that they help to prevent developers from using a class member incorrectly. I think they&#39;d probably better be referred to as a <b>safety mechanism</b>."},{"owner":{"account_id":3533121,"reputation":1545,"user_id":2952093,"accept_rate":88,"display_name":"kap"},"score":0,"creation_date":1602241420,"post_id":182370,"comment_id":113665003,"body_markdown":"I simply had to upvote, for the writing and the creative solution. However, I hope that I will never be in the need to do such things in production.","body":"I simply had to upvote, for the writing and the creative solution. However, I hope that I will never be in the need to do such things in production."}],"tags":[],"owner":{"account_id":2277,"reputation":6269,"user_id":3150,"accept_rate":80,"display_name":"David G"},"comment_count":6,"down_vote_count":3,"up_vote_count":66,"is_accepted":false,"score":63,"last_activity_date":1223469453,"creation_date":1223467254,"answer_id":182370,"question_id":182278,"body_markdown":"The designers of Java explicitly rejected the idea of friend as it works in C++. You put your &quot;friends&quot; in the same package.  Private, protected, and packaged security is enforced as part of the language design.  \r\n  \r\nJames Gosling wanted Java to be C++ without the mistakes. I believe he felt that friend was a mistake because it violates OOP principles. Packages provide a reasonable way to organize components without being too purist about OOP.\r\n  \r\nNR pointed out that you could cheat using reflection, but even that only works if you aren&#39;t using the SecurityManager. If you turn on Java standard security, you won&#39;t be able to cheat with reflection unless you write security policy to specifically allow it.\r\n\r\n","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>The designers of Java explicitly rejected the idea of friend as it works in C++. You put your \"friends\" in the same package.  Private, protected, and packaged security is enforced as part of the language design.  </p>\n\n<p>James Gosling wanted Java to be C++ without the mistakes. I believe he felt that friend was a mistake because it violates OOP principles. Packages provide a reasonable way to organize components without being too purist about OOP.</p>\n\n<p>NR pointed out that you could cheat using reflection, but even that only works if you aren't using the SecurityManager. If you turn on Java standard security, you won't be able to cheat with reflection unless you write security policy to specifically allow it.</p>\n"},{"tags":[],"owner":{"account_id":712,"reputation":6325,"user_id":931,"accept_rate":59,"display_name":"Ran Biron"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1223477041,"creation_date":1223477041,"answer_id":183127,"question_id":182278,"body_markdown":"I once saw a reflection based solution that did &quot;friend checking&quot; at runtime using reflection and checking the call stack to see if the class calling the method was permitted to do so. Being a runtime check, it has the obvious drawback.","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>I once saw a reflection based solution that did \"friend checking\" at runtime using reflection and checking the call stack to see if the class calling the method was permitted to do so. Being a runtime check, it has the obvious drawback.</p>\n"},{"comments":[{"owner":{"account_id":486108,"reputation":2834,"user_id":1344896,"accept_rate":93,"display_name":"Guy L"},"score":1,"creation_date":1365368618,"post_id":316838,"comment_id":22587009,"body_markdown":"Because I didn&#39;t know what the &quot;static&quot; means in &quot;Exposed&quot; class: The static block, is a block of statement inside a Java class that will be executed when a class is first loaded in to the JVM\n\nRead more at http://www.javatutorialhub.com/java-static-variable-methods.html#VlA0qtKsqfFuFo8r.99","body":"Because I didn&#39;t know what the &quot;static&quot; means in &quot;Exposed&quot; class: The static block, is a block of statement inside a Java class that will be executed when a class is first loaded in to the JVM  Read more at <a href=\"http://www.javatutorialhub.com/java-static-variable-methods.html#VlA0qtKsqfFuFo8r.99\" rel=\"nofollow noreferrer\">javatutorialhub.com/&hellip;</a>"},{"owner":{"account_id":2605515,"reputation":913,"user_id":2256758,"accept_rate":83,"display_name":"Yann-Ga&#235;l Gu&#233;h&#233;neuc"},"score":0,"creation_date":1401098432,"post_id":316838,"comment_id":36736875,"body_markdown":"Interesting pattern but it requires the Exposed and Accessor classes to be public while the classes implementing an API (i.e., a set of Java classes implementing a set of public Java interfaces) would better be &quot;default protected&quot; and, thus, inaccessible to the client to separate types from their implementations.","body":"Interesting pattern but it requires the Exposed and Accessor classes to be public while the classes implementing an API (i.e., a set of Java classes implementing a set of public Java interfaces) would better be &quot;default protected&quot; and, thus, inaccessible to the client to separate types from their implementations."},{"owner":{"account_id":1398947,"reputation":393,"user_id":1328080,"display_name":"Steazy"},"score":8,"creation_date":1406232401,"post_id":316838,"comment_id":38763668,"body_markdown":"I&#39;m fairly rusty on my Java, so forgive my ignorance. What is the advantage of this over the &quot;Romeo and Juliet&quot; solution Salomon BRYS posted? This implementation would scare the pants off of me if I stumbled on it in a code base (without your explanation attached, ie. heavy commenting). The Romeo and Juliet approach is very simple to understand.","body":"I&#39;m fairly rusty on my Java, so forgive my ignorance. What is the advantage of this over the &quot;Romeo and Juliet&quot; solution Salomon BRYS posted? This implementation would scare the pants off of me if I stumbled on it in a code base (without your explanation attached, ie. heavy commenting). The Romeo and Juliet approach is very simple to understand."},{"owner":{"account_id":261678,"reputation":2513,"user_id":546016,"accept_rate":69,"display_name":"ymajoros"},"score":1,"creation_date":1484748224,"post_id":316838,"comment_id":70637388,"body_markdown":"This approach will make problems visible only at runtime, while Romeo and Juliet misuse would make them visible at compile time, while developing.","body":"This approach will make problems visible only at runtime, while Romeo and Juliet misuse would make them visible at compile time, while developing."},{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":1,"creation_date":1535126823,"post_id":316838,"comment_id":90966693,"body_markdown":"@ymajoros The Romeo and Juliet example doesn&#39;t make misuse visible at compile-time. It relies an an argument being passed correctly, and an exception being thrown. Those are both run-time actions.","body":"@ymajoros The Romeo and Juliet example doesn&#39;t make misuse visible at compile-time. It relies an an argument being passed correctly, and an exception being thrown. Those are both run-time actions."},{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":0,"creation_date":1535127147,"post_id":316838,"comment_id":90966855,"body_markdown":"I think this example could be simplified quite a bit, by making the `Accessor` be a public static nested class of `Enclosed` with a private constructor and public methods. Then just inject `Accessor` instances to the friends like you&#39;re already doing. Classes in other packages would only be able to use an accessor if they had one injected. I don&#39;t think there&#39;s much benefit to putting an accessor superclass in the friend package, because you have to make the methods protected which means they&#39;re visible to the outside world anyway e.g. via JavaDocs.","body":"I think this example could be simplified quite a bit, by making the <code>Accessor</code> be a public static nested class of <code>Enclosed</code> with a private constructor and public methods. Then just inject <code>Accessor</code> instances to the friends like you&#39;re already doing. Classes in other packages would only be able to use an accessor if they had one injected. I don&#39;t think there&#39;s much benefit to putting an accessor superclass in the friend package, because you have to make the methods protected which means they&#39;re visible to the outside world anyway e.g. via JavaDocs."},{"owner":{"account_id":261678,"reputation":2513,"user_id":546016,"accept_rate":69,"display_name":"ymajoros"},"score":0,"creation_date":1535372172,"post_id":316838,"comment_id":91028560,"body_markdown":"@Radiodef the question seems to be about a compile-time way to find out about misuses (something like a &#39;friend&#39; operator). This example is indeed about runtime checks, so it&#39;s not really suitable.","body":"@Radiodef the question seems to be about a compile-time way to find out about misuses (something like a &#39;friend&#39; operator). This example is indeed about runtime checks, so it&#39;s not really suitable."},{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":0,"creation_date":1535381450,"post_id":316838,"comment_id":91034492,"body_markdown":"@ymajoros I don&#39;t know what that has to do with what I said. This answer does actually provide compile-time checks, though, unlike the Romeo and Juliet example. In this example, the methods of `Exposed` are not visible to other packages, and the methods of the accessor are protected, so they&#39;re only accessible to the friend package. Those are actually compile-time checks.","body":"@ymajoros I don&#39;t know what that has to do with what I said. This answer does actually provide compile-time checks, though, unlike the Romeo and Juliet example. In this example, the methods of <code>Exposed</code> are not visible to other packages, and the methods of the accessor are protected, so they&#39;re only accessible to the friend package. Those are actually compile-time checks."}],"tags":[],"owner":{"account_id":2842,"reputation":31004,"user_id":4023,"accept_rate":89,"display_name":"Matthew Murdoch"},"comment_count":8,"down_vote_count":2,"up_vote_count":50,"is_accepted":true,"score":48,"last_activity_date":1227606253,"creation_date":1227606253,"answer_id":316838,"question_id":182278,"body_markdown":"The &#39;friend&#39; concept is useful in Java, for example, to separate an API from its implementation. It is common for implementation classes to need access to API class internals but these should not be exposed to API clients. This can be achieved using the &#39;Friend Accessor&#39; pattern as detailed below:\r\n\r\nThe class exposed through the API:\r\n\r\n    package api;\r\n\r\n    public final class Exposed {\r\n        static {\r\n            // Declare classes in the implementation package as &#39;friends&#39;\r\n            Accessor.setInstance(new AccessorImpl());\r\n        }\r\n\r\n        // Only accessible by &#39;friend&#39; classes.\r\n        Exposed() {\r\n\r\n        }\r\n\r\n        // Only accessible by &#39;friend&#39; classes.\r\n        void sayHello() {\r\n            System.out.println(&quot;Hello&quot;);\r\n        }\r\n\r\n        static final class AccessorImpl extends Accessor {\r\n            protected Exposed createExposed() {\r\n                return new Exposed();\r\n            }\r\n\r\n            protected void sayHello(Exposed exposed) {\r\n                exposed.sayHello();\r\n            }\r\n        }\r\n    }\r\n\r\nThe class providing the &#39;friend&#39; functionality:\r\n\r\n    package impl;\r\n\r\n    public abstract class Accessor {\r\n\r\n        private static Accessor instance;\r\n\r\n        static Accessor getInstance() {\r\n            Accessor a = instance;\r\n            if (a != null) {\r\n                return a;\r\n            }\r\n\r\n            return createInstance();\r\n        }\r\n\r\n        private static Accessor createInstance() {\r\n            try {\r\n                Class.forName(Exposed.class.getName(), true, \r\n                    Exposed.class.getClassLoader());\r\n            } catch (ClassNotFoundException e) {\r\n                throw new IllegalStateException(e);\r\n            }\r\n\r\n            return instance;\r\n        }\r\n\r\n        public static void setInstance(Accessor accessor) {\r\n            if (instance != null) {\r\n                throw new IllegalStateException(\r\n                    &quot;Accessor instance already set&quot;);\r\n            }\r\n\r\n            instance = accessor;\r\n        }\r\n\r\n        protected abstract Exposed createExposed();\r\n\r\n        protected abstract void sayHello(Exposed exposed);\r\n    }\r\n\r\nExample access from a class in the &#39;friend&#39; implementation package:\r\n\r\n    package impl;\r\n    \r\n    public final class FriendlyAccessExample {\r\n        public static void main(String[] args) {\r\n            Accessor accessor = Accessor.getInstance();\r\n            Exposed exposed = accessor.createExposed();\r\n            accessor.sayHello(exposed);\r\n        }\r\n    }\r\n","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>The 'friend' concept is useful in Java, for example, to separate an API from its implementation. It is common for implementation classes to need access to API class internals but these should not be exposed to API clients. This can be achieved using the 'Friend Accessor' pattern as detailed below:</p>\n\n<p>The class exposed through the API:</p>\n\n<pre><code>package api;\n\npublic final class Exposed {\n    static {\n        // Declare classes in the implementation package as 'friends'\n        Accessor.setInstance(new AccessorImpl());\n    }\n\n    // Only accessible by 'friend' classes.\n    Exposed() {\n\n    }\n\n    // Only accessible by 'friend' classes.\n    void sayHello() {\n        System.out.println(\"Hello\");\n    }\n\n    static final class AccessorImpl extends Accessor {\n        protected Exposed createExposed() {\n            return new Exposed();\n        }\n\n        protected void sayHello(Exposed exposed) {\n            exposed.sayHello();\n        }\n    }\n}\n</code></pre>\n\n<p>The class providing the 'friend' functionality:</p>\n\n<pre><code>package impl;\n\npublic abstract class Accessor {\n\n    private static Accessor instance;\n\n    static Accessor getInstance() {\n        Accessor a = instance;\n        if (a != null) {\n            return a;\n        }\n\n        return createInstance();\n    }\n\n    private static Accessor createInstance() {\n        try {\n            Class.forName(Exposed.class.getName(), true, \n                Exposed.class.getClassLoader());\n        } catch (ClassNotFoundException e) {\n            throw new IllegalStateException(e);\n        }\n\n        return instance;\n    }\n\n    public static void setInstance(Accessor accessor) {\n        if (instance != null) {\n            throw new IllegalStateException(\n                \"Accessor instance already set\");\n        }\n\n        instance = accessor;\n    }\n\n    protected abstract Exposed createExposed();\n\n    protected abstract void sayHello(Exposed exposed);\n}\n</code></pre>\n\n<p>Example access from a class in the 'friend' implementation package:</p>\n\n<pre><code>package impl;\n\npublic final class FriendlyAccessExample {\n    public static void main(String[] args) {\n        Accessor accessor = Accessor.getInstance();\n        Exposed exposed = accessor.createExposed();\n        accessor.sayHello(exposed);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"Shashi Velur"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507705973,"creation_date":1228709226,"answer_id":348637,"question_id":182278,"body_markdown":"I prefer delegation or composition or factory class (depending upon the issue that results in this problem) to avoid making it a public class. \r\n\r\nIf it is a &quot;interface/implementation classes in different packages&quot; problem, then I would use a public factory class that would in the same package as the impl package and prevent the exposure of the impl class.\r\n\r\nIf it is a &quot;I hate to make this class/method public just to provide this functionality for some other class in a different package&quot; problem, then I would use a public delegate class in the same package and expose only that part of the functionality needed by the &quot;outsider&quot; class.\r\n\r\nSome of these decisions are driven by the target server classloading architecture (OSGi bundle, WAR/EAR, etc.), deployment and package naming conventions. For example, the above proposed solution, &#39;Friend Accessor&#39; pattern is clever for normal java applications. I wonder if it gets tricky to implement it in OSGi due to the difference in classloading style.\r\n\r\n","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>I prefer delegation or composition or factory class (depending upon the issue that results in this problem) to avoid making it a public class. </p>\n\n<p>If it is a \"interface/implementation classes in different packages\" problem, then I would use a public factory class that would in the same package as the impl package and prevent the exposure of the impl class.</p>\n\n<p>If it is a \"I hate to make this class/method public just to provide this functionality for some other class in a different package\" problem, then I would use a public delegate class in the same package and expose only that part of the functionality needed by the \"outsider\" class.</p>\n\n<p>Some of these decisions are driven by the target server classloading architecture (OSGi bundle, WAR/EAR, etc.), deployment and package naming conventions. For example, the above proposed solution, 'Friend Accessor' pattern is clever for normal java applications. I wonder if it gets tricky to implement it in OSGi due to the difference in classloading style.</p>\n"},{"comments":[{"owner":{"account_id":2558256,"reputation":542,"user_id":2219808,"display_name":"user2219808"},"score":0,"creation_date":1499288279,"post_id":1533414,"comment_id":76847948,"body_markdown":"This doesn&#39;t quite work as a normal class in the same package could just getFriend() and then call the protected method bypassing the private one.","body":"This doesn&#39;t quite work as a normal class in the same package could just getFriend() and then call the protected method bypassing the private one."}],"tags":[],"owner":{"account_id":30426,"reputation":677,"user_id":82991,"accept_rate":75,"display_name":"eirikma"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1254940660,"creation_date":1254940660,"answer_id":1533414,"question_id":182278,"body_markdown":"The provided solution was perhaps not the simplest. Another approach is based on the same idea as in C++: private members are not accessible outside the package/private scope, except for a specific class that the owner makes a friend of itself. \r\n\r\nThe class that needs friend access to a member should create a inner public abstract &quot;friend class&quot; that the class owning the hidden properties can export access to, by returning a subclass that implement the access-implementing methods. The &quot;API&quot; method of the friend class can be private so it is not accessible outside the class that needs friend access. Its only statement is a call to an abstract protected member that the exporting class implements. \r\n\r\nHere&#39;s the code:\r\n\r\nFirst the test that verifies that this actually works:\r\n\r\n    \r\n    package application;\r\n    \r\n    import application.entity.Entity;\r\n    import application.service.Service;\r\n    import junit.framework.TestCase;\r\n    \r\n    public class EntityFriendTest extends TestCase {\r\n        public void testFriendsAreOkay() {\r\n            Entity entity = new Entity();\r\n            Service service = new Service();\r\n            assertNull(&quot;entity should not be processed yet&quot;, entity.getPublicData());\r\n            service.processEntity(entity);\r\n            assertNotNull(&quot;entity should be processed now&quot;, entity.getPublicData());\r\n        }\r\n    }\r\n\r\n\r\nThen the Service that needs friend access to a package private member of Entity:\r\n\r\n    package application.service;\r\n    \r\n    import application.entity.Entity;\r\n    \r\n    public class Service {\r\n    \r\n        public void processEntity(Entity entity) {\r\n            String value = entity.getFriend().getEntityPackagePrivateData();\r\n            entity.setPublicData(value);\r\n        }\r\n    \r\n        /**\r\n         * Class that Entity explicitly can expose private aspects to subclasses of.\r\n         * Public, so the class itself is visible in Entity&#39;s package.\r\n         */\r\n        public static abstract class EntityFriend {\r\n            /**\r\n             * Access method: private not visible (a.k.a &#39;friendly&#39;) outside enclosing class.\r\n             */\r\n            private String getEntityPackagePrivateData() {\r\n                return getEntityPackagePrivateDataImpl();\r\n            }\r\n    \r\n            /** contribute access to private member by implementing this */\r\n            protected abstract String getEntityPackagePrivateDataImpl();\r\n        }\r\n    }\r\n\r\n\r\nFinally: the Entity class that provides friendly access to a package private member only to the class application.service.Service. \r\n\r\n    package application.entity;\r\n    \r\n    import application.service.Service;\r\n    \r\n    public class Entity {\r\n    \r\n        private String publicData;\r\n        private String packagePrivateData = &quot;secret&quot;;   \r\n    \r\n        public String getPublicData() {\r\n            return publicData;\r\n        }\r\n    \r\n        public void setPublicData(String publicData) {\r\n            this.publicData = publicData;\r\n        }\r\n    \r\n        String getPackagePrivateData() {\r\n            return packagePrivateData;\r\n        }\r\n    \r\n        /** provide access to proteced method for Service&#39;e helper class */\r\n        public Service.EntityFriend getFriend() {\r\n            return new Service.EntityFriend() {\r\n                protected String getEntityPackagePrivateDataImpl() {\r\n                    return getPackagePrivateData();\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\n\r\nOkay, I must admit it is a bit longer than &quot;friend service::Service;&quot; but it might be possible to shorten it while retaining compile-time checking by using annotations. \r\n\r\n","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>The provided solution was perhaps not the simplest. Another approach is based on the same idea as in C++: private members are not accessible outside the package/private scope, except for a specific class that the owner makes a friend of itself. </p>\n\n<p>The class that needs friend access to a member should create a inner public abstract \"friend class\" that the class owning the hidden properties can export access to, by returning a subclass that implement the access-implementing methods. The \"API\" method of the friend class can be private so it is not accessible outside the class that needs friend access. Its only statement is a call to an abstract protected member that the exporting class implements. </p>\n\n<p>Here's the code:</p>\n\n<p>First the test that verifies that this actually works:</p>\n\n<pre><code>package application;\n\nimport application.entity.Entity;\nimport application.service.Service;\nimport junit.framework.TestCase;\n\npublic class EntityFriendTest extends TestCase {\n    public void testFriendsAreOkay() {\n        Entity entity = new Entity();\n        Service service = new Service();\n        assertNull(\"entity should not be processed yet\", entity.getPublicData());\n        service.processEntity(entity);\n        assertNotNull(\"entity should be processed now\", entity.getPublicData());\n    }\n}\n</code></pre>\n\n<p>Then the Service that needs friend access to a package private member of Entity:</p>\n\n<pre><code>package application.service;\n\nimport application.entity.Entity;\n\npublic class Service {\n\n    public void processEntity(Entity entity) {\n        String value = entity.getFriend().getEntityPackagePrivateData();\n        entity.setPublicData(value);\n    }\n\n    /**\n     * Class that Entity explicitly can expose private aspects to subclasses of.\n     * Public, so the class itself is visible in Entity's package.\n     */\n    public static abstract class EntityFriend {\n        /**\n         * Access method: private not visible (a.k.a 'friendly') outside enclosing class.\n         */\n        private String getEntityPackagePrivateData() {\n            return getEntityPackagePrivateDataImpl();\n        }\n\n        /** contribute access to private member by implementing this */\n        protected abstract String getEntityPackagePrivateDataImpl();\n    }\n}\n</code></pre>\n\n<p>Finally: the Entity class that provides friendly access to a package private member only to the class application.service.Service. </p>\n\n<pre><code>package application.entity;\n\nimport application.service.Service;\n\npublic class Entity {\n\n    private String publicData;\n    private String packagePrivateData = \"secret\";   \n\n    public String getPublicData() {\n        return publicData;\n    }\n\n    public void setPublicData(String publicData) {\n        this.publicData = publicData;\n    }\n\n    String getPackagePrivateData() {\n        return packagePrivateData;\n    }\n\n    /** provide access to proteced method for Service'e helper class */\n    public Service.EntityFriend getFriend() {\n        return new Service.EntityFriend() {\n            protected String getEntityPackagePrivateDataImpl() {\n                return getPackagePrivateData();\n            }\n        };\n    }\n}\n</code></pre>\n\n<p>Okay, I must admit it is a bit longer than \"friend service::Service;\" but it might be possible to shorten it while retaining compile-time checking by using annotations. </p>\n"},{"comments":[{"owner":{"account_id":2842,"reputation":31004,"user_id":4023,"accept_rate":89,"display_name":"Matthew Murdoch"},"score":1,"creation_date":1292251211,"post_id":4428099,"comment_id":4834597,"body_markdown":"This is true, but I was really asking about code residing in different packages...","body":"This is true, but I was really asking about code residing in different packages..."}],"tags":[],"owner":{"account_id":28307,"reputation":583,"user_id":75540,"display_name":"daitangio"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1292251143,"creation_date":1292237862,"answer_id":4428099,"question_id":182278,"body_markdown":"In Java it is possible to have a &quot;package-related friendness&quot;. \r\nThis can be userful for unit testing.\r\nIf you do not specify private/public/protected in front of a method, it will be &quot;friend in the package&quot;.\r\nA class in the same package will be able to access it, but it will be private outside the class.\r\n\r\nThis rule is not always known, and it is a good approximation of a C++ &quot;friend&quot; keyword.\r\nI find it a good replacement.","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>In Java it is possible to have a \"package-related friendness\". \nThis can be userful for unit testing.\nIf you do not specify private/public/protected in front of a method, it will be \"friend in the package\".\nA class in the same package will be able to access it, but it will be private outside the class.</p>\n\n<p>This rule is not always known, and it is a good approximation of a C++ \"friend\" keyword.\nI find it a good replacement.</p>\n"},{"tags":[],"owner":{"account_id":174227,"reputation":27776,"user_id":403455,"accept_rate":83,"display_name":"Jeff Axelrod"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1328619570,"creation_date":1306511043,"answer_id":6154633,"question_id":182278,"body_markdown":"There are two solutions to your question that don&#39;t involve keeping all classes in the same package.  \r\n\r\nThe first is to use the Friend Accessor/[Friend Package][2] pattern described in (Practical API Design, Tulach 2008).\r\n\r\nThe second is to use OSGi.  There is an article [here][1] explaining how OSGi accomplishes this.  \r\n\r\nRelated Questions: [1][3], [2][4], and [3][5].\r\n\r\n  [1]: http://www.1biznow.com/2009/02/hide-private-parts-of-your-bundle.html\r\n  [2]: http://wiki.apidesign.org/wiki/APIDesignPatterns:FriendPackages\r\n  [3]: https://stackoverflow.com/questions/5872124/how-to-hide-the-internal-structure-of-a-java-api-to-the-rest-of-the-world/6154321#6154321\r\n  [4]: https://stackoverflow.com/questions/4759692/hiding-classes-in-a-jar-file\r\n  [5]: https://stackoverflow.com/questions/4647599/why-friend-directive-is-missing-in-java\r\n  [6]: https://stackoverflow.com/questions/182278/is-there-a-way-to-simulate-the-c-friend-concept-in-java","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>There are two solutions to your question that don't involve keeping all classes in the same package.  </p>\n\n<p>The first is to use the Friend Accessor/<a href=\"http://wiki.apidesign.org/wiki/APIDesignPatterns:FriendPackages\" rel=\"nofollow noreferrer\">Friend Package</a> pattern described in (Practical API Design, Tulach 2008).</p>\n\n<p>The second is to use OSGi.  There is an article <a href=\"http://www.1biznow.com/2009/02/hide-private-parts-of-your-bundle.html\" rel=\"nofollow noreferrer\">here</a> explaining how OSGi accomplishes this.  </p>\n\n<p>Related Questions: <a href=\"https://stackoverflow.com/questions/5872124/how-to-hide-the-internal-structure-of-a-java-api-to-the-rest-of-the-world/6154321#6154321\">1</a>, <a href=\"https://stackoverflow.com/questions/4759692/hiding-classes-in-a-jar-file\">2</a>, and <a href=\"https://stackoverflow.com/questions/4647599/why-friend-directive-is-missing-in-java\">3</a>.</p>\n"},{"tags":[],"owner":{"account_id":808074,"reputation":31,"user_id":899773,"display_name":"AriG"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1313634443,"creation_date":1313634443,"answer_id":7101728,"question_id":182278,"body_markdown":"eirikma&#39;s answer is easy and excellent.  I might add one more thing:  instead of having a publicly accessible method, getFriend() to get a friend which cannot be used, you could go one step further and disallow getting the friend without a token: getFriend(Service.FriendToken).  This FriendToken would be an inner public class with a private constructor, so that only Service could instantiate one.","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>eirikma's answer is easy and excellent.  I might add one more thing:  instead of having a publicly accessible method, getFriend() to get a friend which cannot be used, you could go one step further and disallow getting the friend without a token: getFriend(Service.FriendToken).  This FriendToken would be an inner public class with a private constructor, so that only Service could instantiate one.</p>\n"},{"comments":[{"owner":{"account_id":92839,"reputation":8676,"user_id":254252,"display_name":"Christopher Creutzig"},"score":0,"creation_date":1439795846,"post_id":9878042,"comment_id":51989262,"body_markdown":"Er, no, they&#39;re not. It&#39;s more like friendship in real life: It can, but doesn&#39;t need to be, mutual (A being a friend of B&#39;s doesn&#39;t mean B is considered a friend of A), and you and your friends can be from totally different families and have your own, possibly (but not necessarily) overlapping circles of friends. (Not that I&#39;d like to see classes with lots of friends. It can be a useful feature, but should be used with caution.)","body":"Er, no, they&#39;re not. It&#39;s more like friendship in real life: It can, but doesn&#39;t need to be, mutual (A being a friend of B&#39;s doesn&#39;t mean B is considered a friend of A), and you and your friends can be from totally different families and have your own, possibly (but not necessarily) overlapping circles of friends. (Not that I&#39;d like to see classes with lots of friends. It can be a useful feature, but should be used with caution.)"}],"tags":[],"owner":{"account_id":937935,"reputation":57,"user_id":966527,"display_name":"Sephiroth"},"comment_count":1,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1332788329,"creation_date":1332788329,"answer_id":9878042,"question_id":182278,"body_markdown":"I think that friend classes in C++ are like inner-class concept in Java. Using inner-classes\r\nyou can actually define an enclosing class and an enclosed one. Enclosed class has full access to the public and private members of it&#39;s enclosing class.\r\nsee the following link:\r\nhttp://docs.oracle.com/javase/tutorial/java/javaOO/nested.html","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>I think that friend classes in C++ are like inner-class concept in Java. Using inner-classes\nyou can actually define an enclosing class and an enclosed one. Enclosed class has full access to the public and private members of it's enclosing class.\nsee the following link:\n<a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html\" rel=\"nofollow\">http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html</a></p>\n"},{"tags":[],"owner":{"account_id":55284,"reputation":115615,"user_id":165495,"accept_rate":91,"display_name":"Casebash"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1376385773,"creation_date":1345172220,"answer_id":11999192,"question_id":182278,"body_markdown":"I agree that in most cases the friend keyword is unnecessary.\r\n\r\n - Package-private (aka. default) is sufficient in most cases where you have a group of heavily intertwined classes\r\n - For debug classes that want access to internals, I usually make the method private and access it via reflection. Speed usually isn&#39;t important here\r\n - Sometimes, you implement a method that is a &quot;hack&quot; or otherwise which is subject to change.  I make it public, but use @Deprecated to indicate that you shouldn&#39;t rely on this method existing.\r\n\r\nAnd finally, if it really is necessary, there is the friend accessor pattern mentioned in the other answers.","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>I agree that in most cases the friend keyword is unnecessary.</p>\n\n<ul>\n<li>Package-private (aka. default) is sufficient in most cases where you have a group of heavily intertwined classes</li>\n<li>For debug classes that want access to internals, I usually make the method private and access it via reflection. Speed usually isn't important here</li>\n<li>Sometimes, you implement a method that is a \"hack\" or otherwise which is subject to change.  I make it public, but use @Deprecated to indicate that you shouldn't rely on this method existing.</li>\n</ul>\n\n<p>And finally, if it really is necessary, there is the friend accessor pattern mentioned in the other answers.</p>\n"},{"comments":[{"owner":{"account_id":1398947,"reputation":393,"user_id":1328080,"display_name":"Steazy"},"score":0,"creation_date":1406232905,"post_id":18634125,"comment_id":38763908,"body_markdown":"Follow up: I&#39;m a Java newb, so I&#39;m guessing there isn&#39;t an attribute (annotation?) that could be used to enforce that the &quot;Romeo.Love&quot; parameter to &quot;cuddle&quot; can not be null? Something similar to &#39;__attribute__((nonnull))&#39; in many C compilers? That would make this the perfect solution IMHO (as is it&#39;s still awesome).","body":"Follow up: I&#39;m a Java newb, so I&#39;m guessing there isn&#39;t an attribute (annotation?) that could be used to enforce that the &quot;Romeo.Love&quot; parameter to &quot;cuddle&quot; can not be null? Something similar to &#39;__attribute__((nonnull))&#39; in many C compilers? That would make this the perfect solution IMHO (as is it&#39;s still awesome)."},{"owner":{"account_id":253339,"reputation":780,"user_id":531966,"accept_rate":93,"display_name":"Nickolas"},"score":157,"creation_date":1407143347,"post_id":18634125,"comment_id":39086406,"body_markdown":"+1 for &quot;slap you with a NullPointerException&quot;. Very impressive.","body":"+1 for &quot;slap you with a NullPointerException&quot;. Very impressive."},{"owner":{"account_id":1324501,"reputation":9325,"user_id":1269640,"accept_rate":59,"display_name":"Salomon BRYS"},"score":2,"creation_date":1408549282,"post_id":18634125,"comment_id":39633897,"body_markdown":"@Steazy There is : look for the NotNull, NonNull and CheckForNull annotations. Check with your IDE&#39;s documentation to find out how to use and enforce those annotations. I know that IntelliJ embeds this by default and that eclipse needs a plugin (such as FindBugs).","body":"@Steazy There is : look for the NotNull, NonNull and CheckForNull annotations. Check with your IDE&#39;s documentation to find out how to use and enforce those annotations. I know that IntelliJ embeds this by default and that eclipse needs a plugin (such as FindBugs)."},{"owner":{"account_id":1324501,"reputation":9325,"user_id":1269640,"accept_rate":59,"display_name":"Salomon BRYS"},"score":1,"creation_date":1439461871,"post_id":18634125,"comment_id":51876173,"body_markdown":"@ChrisNash You can&#39;t. Juliet must declare an accessor: `public Whatever getPrivateField(Romeo.Love l) { l.hashCode(); return mPrivateField; }`.","body":"@ChrisNash You can&#39;t. Juliet must declare an accessor: <code>public Whatever getPrivateField(Romeo.Love l) { l.hashCode(); return mPrivateField; }</code>."},{"owner":{"account_id":513872,"reputation":569,"user_id":1084488,"accept_rate":54,"display_name":"Matthias"},"score":46,"creation_date":1447169923,"post_id":18634125,"comment_id":55041085,"body_markdown":"You can make `Romeo`&#39;s `Love` for `Julia` everlasting by changing the `love` field to be `final` ;-).","body":"You can make <code>Romeo</code>&#39;s <code>Love</code> for <code>Julia</code> everlasting by changing the <code>love</code> field to be <code>final</code> ;-)."},{"owner":{"account_id":513872,"reputation":569,"user_id":1084488,"accept_rate":54,"display_name":"Matthias"},"score":1,"creation_date":1447170173,"post_id":18634125,"comment_id":55041267,"body_markdown":"... and if you think `Romeo` was into rastafarian &quot;one `Love`&quot; you can make the `love` field `static` as well ;-).","body":"... and if you think <code>Romeo</code> was into rastafarian &quot;one <code>Love</code>&quot; you can make the <code>love</code> field <code>static</code> as well ;-)."},{"owner":{"account_id":1324501,"reputation":9325,"user_id":1269640,"accept_rate":59,"display_name":"Salomon BRYS"},"score":7,"creation_date":1447172006,"post_id":18634125,"comment_id":55042601,"body_markdown":"@Matthias The love field is static... I&#39;ll edit the answer to make it final ;)","body":"@Matthias The love field is static... I&#39;ll edit the answer to make it final ;)"},{"owner":{"account_id":513872,"reputation":569,"user_id":1084488,"accept_rate":54,"display_name":"Matthias"},"score":6,"creation_date":1447174272,"post_id":18634125,"comment_id":55044302,"body_markdown":"Another cool trick to make this even more elegant (albeit possibly also confusing) is to rename the `love` field to `Love`. Yes, you can actually do this (see http://stackoverflow.com/a/14027255/1084488). The result will be that mentions of &quot;`Love`&quot; in `Romeo`&#39;s code (e.g. in `Juliet.cuddle(Love);`) will be interpreted as references to *his* everlasting, one `Love` object(!), whereas mentions of `Romeo.Love` outside of the `Romeo` class will refer to the public `Love` class(!).","body":"Another cool trick to make this even more elegant (albeit possibly also confusing) is to rename the <code>love</code> field to <code>Love</code>. Yes, you can actually do this (see <a href=\"http://stackoverflow.com/a/14027255/1084488\">stackoverflow.com/a/14027255/1084488</a>). The result will be that mentions of &quot;<code>Love</code>&quot; in <code>Romeo</code>&#39;s code (e.g. in <code>Juliet.cuddle(Love);</code>) will be interpreted as references to <i>his</i> everlasting, one <code>Love</code> object(!), whereas mentions of <code>Romeo.Love</code> outside of the <code>Romeo</code> class will refer to the public <code>Love</code> class(!)."},{"owner":{"account_id":6068949,"reputation":2149,"user_id":4738391,"accept_rate":70,"display_name":"Zia Ul Rehman Mughal"},"score":20,"creation_date":1461500110,"post_id":18634125,"comment_id":61217332,"body_markdown":"All answers should be like this (Y) +1 for the humor and great example.","body":"All answers should be like this (Y) +1 for the humor and great example."},{"owner":{"account_id":873102,"reputation":171,"user_id":923516,"accept_rate":62,"display_name":"Stephane Toussaint"},"score":2,"creation_date":1463600231,"post_id":18634125,"comment_id":62138525,"body_markdown":"Totally agree, not only this answer is a great answer, but it provide a simple yet efficient context to remember this &quot;pattern&quot;. Great Job.","body":"Totally agree, not only this answer is a great answer, but it provide a simple yet efficient context to remember this &quot;pattern&quot;. Great Job."},{"owner":{"account_id":322175,"reputation":14732,"user_id":641451,"accept_rate":42,"display_name":"mgarciaisaia"},"score":3,"creation_date":1474399629,"post_id":18634125,"comment_id":66512935,"body_markdown":"A whole new meaning for the phrase &quot;My code is poetry&quot;","body":"A whole new meaning for the phrase &quot;My code is poetry&quot;"},{"owner":{"account_id":1250355,"reputation":579,"user_id":1210878,"accept_rate":44,"display_name":"faghani"},"score":4,"creation_date":1476106023,"post_id":18634125,"comment_id":67198335,"body_markdown":"The most fantastic answer I&#39;ve ever read in SO. +1 for making Romeo&#39;s love everlasting by `final` qualifier ;)","body":"The most fantastic answer I&#39;ve ever read in SO. +1 for making Romeo&#39;s love everlasting by <code>final</code> qualifier ;)"},{"owner":{"account_id":5842921,"reputation":106,"user_id":4603871,"display_name":"Bryan Shaw"},"score":1,"creation_date":1512063158,"post_id":18634125,"comment_id":82115673,"body_markdown":"Super late to this party, but I have to say: this is the most glorious piece of stackedit prose I&#39;ve ever read.  BRAVO.  I SAY BRAVO, GOOD SIR!","body":"Super late to this party, but I have to say: this is the most glorious piece of stackedit prose I&#39;ve ever read.  BRAVO.  I SAY BRAVO, GOOD SIR!"},{"owner":{"account_id":252892,"reputation":2581,"user_id":531232,"accept_rate":67,"display_name":"chris"},"score":0,"creation_date":1535380393,"post_id":18634125,"comment_id":91033856,"body_markdown":"Beautiful! While the necessity of a pattern like this is usually a strong hint at a design smell, we can&#39;t always do big refactorings right away when something smells fishy. In those cases, this solution is as elegant as it gets.","body":"Beautiful! While the necessity of a pattern like this is usually a strong hint at a design smell, we can&#39;t always do big refactorings right away when something smells fishy. In those cases, this solution is as elegant as it gets."},{"owner":{"account_id":17287,"reputation":12605,"user_id":38557,"accept_rate":53,"display_name":"noamtm"},"score":0,"creation_date":1591511382,"post_id":18634125,"comment_id":110079377,"body_markdown":"I really love the answer, but I was wondering if it&#39;s possible to make it resist instantiation by reflection (as done by Gson, for example). If not, anyone can create a `Romeo.Love` object.","body":"I really love the answer, but I was wondering if it&#39;s possible to make it resist instantiation by reflection (as done by Gson, for example). If not, anyone can create a <code>Romeo.Love</code> object."},{"owner":{"account_id":1324501,"reputation":9325,"user_id":1269640,"accept_rate":59,"display_name":"Salomon BRYS"},"score":0,"creation_date":1593335071,"post_id":18634125,"comment_id":110738992,"body_markdown":"@noamtm There&#39;s not much you can do against reflection. By design, reflection allows you to do virtually anything, including calling private methods.","body":"@noamtm There&#39;s not much you can do against reflection. By design, reflection allows you to do virtually anything, including calling private methods."},{"owner":{"account_id":10140825,"reputation":391,"user_id":7490633,"display_name":"mgueydan"},"score":0,"creation_date":1601030202,"post_id":18634125,"comment_id":113283726,"body_markdown":"@Salomon BRYS, I&#39;t&#39;s very impressive, but I think it doesn&#39;t work. What about a Fake Romeo class (let&#39;s call it Iago)  that would have a Iago.Love member that is not constructed by itself, but is stolen from Romeo (as it is public).\nSomething like : private static final Love love = Rome.love","body":"@Salomon BRYS, I&#39;t&#39;s very impressive, but I think it doesn&#39;t work. What about a Fake Romeo class (let&#39;s call it Iago)  that would have a Iago.Love member that is not constructed by itself, but is stolen from Romeo (as it is public). Something like : private static final Love love = Rome.love"},{"owner":{"account_id":1324501,"reputation":9325,"user_id":1269640,"accept_rate":59,"display_name":"Salomon BRYS"},"score":0,"creation_date":1601048299,"post_id":18634125,"comment_id":113292527,"body_markdown":"Lago can&#39;t construct a Romeo.Love (private constructor), nor access Romeo.love (private property).","body":"Lago can&#39;t construct a Romeo.Love (private constructor), nor access Romeo.love (private property)."},{"owner":{"account_id":1582575,"reputation":2872,"user_id":1467600,"accept_rate":100,"display_name":"D&#225;vid T&#243;th"},"score":0,"creation_date":1611748842,"post_id":18634125,"comment_id":116549235,"body_markdown":"Couldn&#39;t this be played by Casting another object to `Romeo.Love` ?","body":"Couldn&#39;t this be played by Casting another object to <code>Romeo.Love</code> ?"},{"owner":{"account_id":3176925,"reputation":206747,"user_id":2684539,"display_name":"Jarod42"},"score":0,"creation_date":1613041223,"post_id":18634125,"comment_id":116955844,"body_markdown":"Note that that mechanism/idiom ([Passkey idiom](https://arne-mertz.de/2016/10/passkey-idiom/)) can also be done in C++ (as it gives access to only some part of the class, and not the whole class).","body":"Note that that mechanism/idiom (<a href=\"https://arne-mertz.de/2016/10/passkey-idiom/\" rel=\"nofollow noreferrer\">Passkey idiom</a>) can also be done in C++ (as it gives access to only some part of the class, and not the whole class)."},{"owner":{"account_id":7912607,"reputation":111,"user_id":5976170,"display_name":"zombieParrot"},"score":0,"creation_date":1665836726,"post_id":18634125,"comment_id":130794501,"body_markdown":"&quot;and checks that the love is real so that the runtime will throw a NullPointerException if it is null&quot;. Fantastic.","body":"&quot;and checks that the love is real so that the runtime will throw a NullPointerException if it is null&quot;. Fantastic."}],"tags":[],"owner":{"account_id":1324501,"reputation":9325,"user_id":1269640,"accept_rate":59,"display_name":"Salomon BRYS"},"comment_count":21,"down_vote_count":2,"up_vote_count":603,"is_accepted":false,"score":601,"last_activity_date":1695261278,"creation_date":1378377577,"answer_id":18634125,"question_id":182278,"body_markdown":"**Here is a small trick that I use in JAVA to replicate C++ friend mechanism.**\r\n\r\nLet&#39;s say I have a class `Romeo` and another class `Juliet`. They are in different packages (family) for hatred reasons.\r\n\r\n`Romeo` wants to `cuddle` `Juliet` and `Juliet` wants to only let `Romeo` `cuddle` her.\r\n\r\nIn C++, `Juliet` would declare `Romeo` as a (lover) `friend` but there are no such things in Java.\r\n\r\nHere are the classes and the trick:\r\n\r\nLadies first:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n\tpackage capulet;\r\n\t\r\n\timport montague.Romeo;\r\n\t\r\n\tpublic class Juliet {\r\n\t\r\n\t\tpublic static void cuddle(Romeo.Love love) {\r\n            Objects.requireNonNull(love);\r\n\t\t\tSystem.out.println(&quot;O Romeo, Romeo, wherefore art thou Romeo?&quot;);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nSo the method `Juliet.cuddle` is `public` but you need a `Romeo.Love` to call it. It uses this `Romeo.Love` as a &quot;signature security&quot; to ensure that only `Romeo` can call this method and checks that the love is real so that the runtime will throw a `NullPointerException` if it is `null`.\r\n\r\nNow boys:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n\tpackage montague;\r\n\t\r\n\timport capulet.Juliet;\r\n\t\r\n\tpublic class Romeo {\r\n\t\tpublic static final class Love { private Love() {} }\r\n\t\tprivate static final Love love = new Love();\r\n\t\t\r\n\t\tpublic static void cuddleJuliet() {\r\n\t\t\tJuliet.cuddle(love);\r\n\t\t}\r\n\t}\r\n\r\nThe class `Romeo.Love` is public, but its constructor is `private`. Therefore anyone can see it, but only `Romeo` can construct it. I use a static reference so the `Romeo.Love` that is never used is only constructed once and does not impact optimization.\r\n\r\nTherefore, `Romeo` can `cuddle` `Juliet` and only he can because only he can construct and access a `Romeo.Love` instance, which is required by `Juliet` to `cuddle` her (or else she&#39;ll slap you with a `NullPointerException`).","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p><strong>Here is a small trick that I use in JAVA to replicate C++ friend mechanism.</strong></p>\n<p>Let's say I have a class <code>Romeo</code> and another class <code>Juliet</code>. They are in different packages (family) for hatred reasons.</p>\n<p><code>Romeo</code> wants to <code>cuddle</code> <code>Juliet</code> and <code>Juliet</code> wants to only let <code>Romeo</code> <code>cuddle</code> her.</p>\n<p>In C++, <code>Juliet</code> would declare <code>Romeo</code> as a (lover) <code>friend</code> but there are no such things in Java.</p>\n<p>Here are the classes and the trick:</p>\n<p>Ladies first:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package capulet;\n\nimport montague.Romeo;\n\npublic class Juliet {\n\n    public static void cuddle(Romeo.Love love) {\n        Objects.requireNonNull(love);\n        System.out.println(&quot;O Romeo, Romeo, wherefore art thou Romeo?&quot;);\n    }\n    \n}\n</code></pre>\n<p>So the method <code>Juliet.cuddle</code> is <code>public</code> but you need a <code>Romeo.Love</code> to call it. It uses this <code>Romeo.Love</code> as a &quot;signature security&quot; to ensure that only <code>Romeo</code> can call this method and checks that the love is real so that the runtime will throw a <code>NullPointerException</code> if it is <code>null</code>.</p>\n<p>Now boys:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package montague;\n\nimport capulet.Juliet;\n\npublic class Romeo {\n    public static final class Love { private Love() {} }\n    private static final Love love = new Love();\n    \n    public static void cuddleJuliet() {\n        Juliet.cuddle(love);\n    }\n}\n</code></pre>\n<p>The class <code>Romeo.Love</code> is public, but its constructor is <code>private</code>. Therefore anyone can see it, but only <code>Romeo</code> can construct it. I use a static reference so the <code>Romeo.Love</code> that is never used is only constructed once and does not impact optimization.</p>\n<p>Therefore, <code>Romeo</code> can <code>cuddle</code> <code>Juliet</code> and only he can because only he can construct and access a <code>Romeo.Love</code> instance, which is required by <code>Juliet</code> to <code>cuddle</code> her (or else she'll slap you with a <code>NullPointerException</code>).</p>\n"},{"tags":[],"owner":{"account_id":1891087,"reputation":878,"user_id":1709144,"display_name":"jpfx1342"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1422347986,"creation_date":1396993526,"answer_id":22948824,"question_id":182278,"body_markdown":"A method I&#39;ve found for solving this problem is to create an accessor object, like so:\r\n\r\n    class Foo {\r\n        private String locked;\r\n        \r\n        /* Anyone can get locked. */\r\n        public String getLocked() { return locked; }\r\n        \r\n        /* This is the accessor. Anyone with a reference to this has special access. */\r\n        public class FooAccessor {\r\n            private FooAccessor (){};\r\n            public void setLocked(String locked) { Foo.this.locked = locked; }\r\n        }\r\n        private FooAccessor accessor;\r\n        \r\n        /** You get an accessor by calling this method. This method can only\r\n         * be called once, so calling is like claiming ownership of the accessor. */\r\n        public FooAccessor getAccessor() {\r\n            if (accessor != null)\r\n                throw new IllegalStateException(&quot;Cannot return accessor more than once!&quot;);\r\n            return accessor = new FooAccessor();\r\n        }\r\n    }\r\n\r\nThe first code to call `getAccessor()` &quot;claims ownership&quot; of the accessor. Usually, this is code that creates the object.\r\n\r\n    Foo bar = new Foo(); //This object is safe to share.\r\n    FooAccessor barAccessor = bar.getAccessor(); //This one is not.\r\n\r\nThis also has an advantage over C++&#39;s friend mechanism, because it allows you to limit access on a *per-instance* level, as opposed to a *per-class* level. By controlling the accessor reference, you control access to the object. You can also create multiple accessors, and give different access to each, which allows fine-grained control over what code can access what:\r\n\r\n    class Foo {\r\n        private String secret;\r\n        private String locked;\r\n        \r\n        /* Anyone can get locked. */\r\n        public String getLocked() { return locked; }\r\n        \r\n        /* Normal accessor. Can write to locked, but not read secret. */\r\n        public class FooAccessor {\r\n            private FooAccessor (){};\r\n            public void setLocked(String locked) { Foo.this.locked = locked; }\r\n        }\r\n        private FooAccessor accessor;\r\n        \r\n        public FooAccessor getAccessor() {\r\n            if (accessor != null)\r\n                throw new IllegalStateException(&quot;Cannot return accessor more than once!&quot;);\r\n            return accessor = new FooAccessor();\r\n        }\r\n        \r\n        /* Super accessor. Allows access to secret. */\r\n        public class FooSuperAccessor {\r\n            private FooSuperAccessor (){};\r\n            public String getSecret() { return Foo.this.secret; }\r\n        }\r\n        private FooSuperAccessor superAccessor;\r\n        \r\n        public FooSuperAccessor getAccessor() {\r\n            if (superAccessor != null)\r\n                throw new IllegalStateException(&quot;Cannot return accessor more than once!&quot;);\r\n            return superAccessor = new FooSuperAccessor();\r\n        }\r\n    }\r\n\r\nFinally, if you&#39;d like things to be a bit more organized, you can create a reference object, which holds everything together. This allows you to claim all accessors with one method call, as well as keep them together with their linked instance. Once you have the reference, you can pass the accessors out to the code that needs it:\r\n\r\n    class Foo {\r\n        private String secret;\r\n        private String locked;\r\n        \r\n        public String getLocked() { return locked; }\r\n        \r\n        public class FooAccessor {\r\n            private FooAccessor (){};\r\n            public void setLocked(String locked) { Foo.this.locked = locked; }\r\n        }\r\n        public class FooSuperAccessor {\r\n            private FooSuperAccessor (){};\r\n            public String getSecret() { return Foo.this.secret; }\r\n        }\r\n        public class FooReference {\r\n            public final Foo foo;\r\n            public final FooAccessor accessor;\r\n            public final FooSuperAccessor superAccessor;\r\n            \r\n            private FooReference() {\r\n                this.foo = Foo.this;\r\n                this.accessor = new FooAccessor();\r\n                this.superAccessor = new FooSuperAccessor();\r\n            }\r\n        }\r\n        \r\n        private FooReference reference;\r\n        \r\n        /* Beware, anyone with this object has *all* the accessors! */\r\n        public FooReference getReference() {\r\n            if (reference != null)\r\n                throw new IllegalStateException(&quot;Cannot return reference more than once!&quot;);\r\n            return reference = new FooReference();\r\n        }\r\n    }\r\n\r\nAfter much head-banging (not the good kind), this was my final solution, and I very much like it. It is flexible, simple to use, and allows very good control over class access. (The *with reference only* access is very useful.) If you use protected instead of private for the accessors/references, sub-classes of Foo can even return extended references from `getReference`. It also doesn&#39;t require any reflection, so it can be used in any environment.\r\n","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>A method I've found for solving this problem is to create an accessor object, like so:</p>\n\n<pre><code>class Foo {\n    private String locked;\n\n    /* Anyone can get locked. */\n    public String getLocked() { return locked; }\n\n    /* This is the accessor. Anyone with a reference to this has special access. */\n    public class FooAccessor {\n        private FooAccessor (){};\n        public void setLocked(String locked) { Foo.this.locked = locked; }\n    }\n    private FooAccessor accessor;\n\n    /** You get an accessor by calling this method. This method can only\n     * be called once, so calling is like claiming ownership of the accessor. */\n    public FooAccessor getAccessor() {\n        if (accessor != null)\n            throw new IllegalStateException(\"Cannot return accessor more than once!\");\n        return accessor = new FooAccessor();\n    }\n}\n</code></pre>\n\n<p>The first code to call <code>getAccessor()</code> \"claims ownership\" of the accessor. Usually, this is code that creates the object.</p>\n\n<pre><code>Foo bar = new Foo(); //This object is safe to share.\nFooAccessor barAccessor = bar.getAccessor(); //This one is not.\n</code></pre>\n\n<p>This also has an advantage over C++'s friend mechanism, because it allows you to limit access on a <em>per-instance</em> level, as opposed to a <em>per-class</em> level. By controlling the accessor reference, you control access to the object. You can also create multiple accessors, and give different access to each, which allows fine-grained control over what code can access what:</p>\n\n<pre><code>class Foo {\n    private String secret;\n    private String locked;\n\n    /* Anyone can get locked. */\n    public String getLocked() { return locked; }\n\n    /* Normal accessor. Can write to locked, but not read secret. */\n    public class FooAccessor {\n        private FooAccessor (){};\n        public void setLocked(String locked) { Foo.this.locked = locked; }\n    }\n    private FooAccessor accessor;\n\n    public FooAccessor getAccessor() {\n        if (accessor != null)\n            throw new IllegalStateException(\"Cannot return accessor more than once!\");\n        return accessor = new FooAccessor();\n    }\n\n    /* Super accessor. Allows access to secret. */\n    public class FooSuperAccessor {\n        private FooSuperAccessor (){};\n        public String getSecret() { return Foo.this.secret; }\n    }\n    private FooSuperAccessor superAccessor;\n\n    public FooSuperAccessor getAccessor() {\n        if (superAccessor != null)\n            throw new IllegalStateException(\"Cannot return accessor more than once!\");\n        return superAccessor = new FooSuperAccessor();\n    }\n}\n</code></pre>\n\n<p>Finally, if you'd like things to be a bit more organized, you can create a reference object, which holds everything together. This allows you to claim all accessors with one method call, as well as keep them together with their linked instance. Once you have the reference, you can pass the accessors out to the code that needs it:</p>\n\n<pre><code>class Foo {\n    private String secret;\n    private String locked;\n\n    public String getLocked() { return locked; }\n\n    public class FooAccessor {\n        private FooAccessor (){};\n        public void setLocked(String locked) { Foo.this.locked = locked; }\n    }\n    public class FooSuperAccessor {\n        private FooSuperAccessor (){};\n        public String getSecret() { return Foo.this.secret; }\n    }\n    public class FooReference {\n        public final Foo foo;\n        public final FooAccessor accessor;\n        public final FooSuperAccessor superAccessor;\n\n        private FooReference() {\n            this.foo = Foo.this;\n            this.accessor = new FooAccessor();\n            this.superAccessor = new FooSuperAccessor();\n        }\n    }\n\n    private FooReference reference;\n\n    /* Beware, anyone with this object has *all* the accessors! */\n    public FooReference getReference() {\n        if (reference != null)\n            throw new IllegalStateException(\"Cannot return reference more than once!\");\n        return reference = new FooReference();\n    }\n}\n</code></pre>\n\n<p>After much head-banging (not the good kind), this was my final solution, and I very much like it. It is flexible, simple to use, and allows very good control over class access. (The <em>with reference only</em> access is very useful.) If you use protected instead of private for the accessors/references, sub-classes of Foo can even return extended references from <code>getReference</code>. It also doesn't require any reflection, so it can be used in any environment.</p>\n"},{"tags":[],"owner":{"account_id":451370,"reputation":2890,"user_id":847235,"accept_rate":92,"display_name":"intrepidis"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1525516221,"creation_date":1439456258,"answer_id":31983744,"question_id":182278,"body_markdown":"Here&#39;s a clear use-case example with a reusable `Friend` class. The benefit of this mechanism is simplicity of use. Maybe good for giving unit test classes more access than the rest of the application.\r\n\r\nTo begin, here is an example of how to use the `Friend` class.\r\n\r\n    public class Owner {\r\n        private final String member = &quot;value&quot;;\r\n\r\n        public String getMember(final Friend friend) {\r\n            // Make sure only a friend is accepted.\r\n            friend.is(Other.class);\r\n            return member;\r\n        }\r\n    }\r\n\r\nThen in another package you can do this:\r\n\r\n    public class Other {\r\n        private final Friend friend = new Friend(this);\r\n\r\n        public void test() {\r\n            String s = new Owner().getMember(friend);\r\n            System.out.println(s);\r\n        }\r\n    }\r\n    \r\nThe `Friend` class is as follows.\r\n\r\n    public final class Friend {\r\n        private final Class as;\r\n    \r\n        public Friend(final Object is) {\r\n            as = is.getClass();\r\n        }\r\n    \r\n        public void is(final Class c) {\r\n            if (c == as)\r\n                return;\r\n            throw new ClassCastException(String.format(&quot;%s is not an expected friend.&quot;, as.getName()));\r\n        }\r\n    \r\n        public void is(final Class... classes) {\r\n            for (final Class c : classes)\r\n                if (c == as)\r\n                    return;\r\n            is((Class)null);\r\n        }\r\n    }\r\n\r\nHowever, the problem is that it can be abused like so:\r\n\r\n    public class Abuser {\r\n        public void doBadThings() {\r\n            Friend badFriend = new Friend(new Other());\r\n            String s = new Owner().getMember(badFriend);\r\n            System.out.println(s);\r\n        }\r\n    }\r\n\r\nNow, it may be true that the `Other` class doesn&#39;t have any public constructors, therefore making the above `Abuser` code impossible. However, if your class &lt;i&gt;does&lt;/i&gt; have a public constructor then it is probably advisable to duplicate the Friend class as an inner class. Take this `Other2` class as an example:\r\n\r\n    public class Other2 {\r\n        private final Friend friend = new Friend();\r\n\r\n        public final class Friend {\r\n            private Friend() {}\r\n            public void check() {}\r\n        }\r\n\r\n        public void test() {\r\n            String s = new Owner2().getMember(friend);\r\n            System.out.println(s);\r\n        }\r\n    }\r\n\r\nAnd then the `Owner2` class would be like this:\r\n\r\n    public class Owner2 {\r\n        private final String member = &quot;value&quot;;\r\n    \r\n        public String getMember(final Other2.Friend friend) {\r\n            friend.check();\r\n            return member;\r\n        }\r\n    }\r\n\r\nNotice that the `Other2.Friend` class has a private constructor, thus making this a much more secure way of doing it.","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>Here's a clear use-case example with a reusable <code>Friend</code> class. The benefit of this mechanism is simplicity of use. Maybe good for giving unit test classes more access than the rest of the application.</p>\n\n<p>To begin, here is an example of how to use the <code>Friend</code> class.</p>\n\n<pre><code>public class Owner {\n    private final String member = \"value\";\n\n    public String getMember(final Friend friend) {\n        // Make sure only a friend is accepted.\n        friend.is(Other.class);\n        return member;\n    }\n}\n</code></pre>\n\n<p>Then in another package you can do this:</p>\n\n<pre><code>public class Other {\n    private final Friend friend = new Friend(this);\n\n    public void test() {\n        String s = new Owner().getMember(friend);\n        System.out.println(s);\n    }\n}\n</code></pre>\n\n<p>The <code>Friend</code> class is as follows.</p>\n\n<pre><code>public final class Friend {\n    private final Class as;\n\n    public Friend(final Object is) {\n        as = is.getClass();\n    }\n\n    public void is(final Class c) {\n        if (c == as)\n            return;\n        throw new ClassCastException(String.format(\"%s is not an expected friend.\", as.getName()));\n    }\n\n    public void is(final Class... classes) {\n        for (final Class c : classes)\n            if (c == as)\n                return;\n        is((Class)null);\n    }\n}\n</code></pre>\n\n<p>However, the problem is that it can be abused like so:</p>\n\n<pre><code>public class Abuser {\n    public void doBadThings() {\n        Friend badFriend = new Friend(new Other());\n        String s = new Owner().getMember(badFriend);\n        System.out.println(s);\n    }\n}\n</code></pre>\n\n<p>Now, it may be true that the <code>Other</code> class doesn't have any public constructors, therefore making the above <code>Abuser</code> code impossible. However, if your class <i>does</i> have a public constructor then it is probably advisable to duplicate the Friend class as an inner class. Take this <code>Other2</code> class as an example:</p>\n\n<pre><code>public class Other2 {\n    private final Friend friend = new Friend();\n\n    public final class Friend {\n        private Friend() {}\n        public void check() {}\n    }\n\n    public void test() {\n        String s = new Owner2().getMember(friend);\n        System.out.println(s);\n    }\n}\n</code></pre>\n\n<p>And then the <code>Owner2</code> class would be like this:</p>\n\n<pre><code>public class Owner2 {\n    private final String member = \"value\";\n\n    public String getMember(final Other2.Friend friend) {\n        friend.check();\n        return member;\n    }\n}\n</code></pre>\n\n<p>Notice that the <code>Other2.Friend</code> class has a private constructor, thus making this a much more secure way of doing it.</p>\n"},{"comments":[{"owner":{"account_id":257842,"reputation":9939,"user_id":539599,"accept_rate":86,"display_name":"Raphael"},"score":1,"creation_date":1507705479,"post_id":38703299,"comment_id":80311386,"body_markdown":"But `ProtectedContainer` can be subclassed outside of the package!","body":"But <code>ProtectedContainer</code> can be subclassed outside of the package!"}],"tags":[],"owner":{"account_id":8480254,"reputation":11,"user_id":6360153,"display_name":"Chris"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1470125655,"creation_date":1470067289,"answer_id":38703299,"question_id":182278,"body_markdown":"I think, the approach of using the friend accessor pattern is way too complicated. I had to face the same problem and I solved using the good, old copy constructor, known from C++, in Java:\r\n\r\n    public class ProtectedContainer {\r\n        protected String iwantAccess;\r\n\r\n        protected ProtectedContainer() {\r\n            super();\r\n            iwantAccess = &quot;Default string&quot;;\r\n        }\r\n\r\n        protected ProtectedContainer(ProtectedContainer other) {\r\n            super();\r\n            this.iwantAccess = other.iwantAccess;\r\n        }\r\n\r\n        public int calcSquare(int x) {\r\n            iwantAccess = &quot;calculated square&quot;;\r\n            return x * x;\r\n        }\r\n    }\r\n\r\nIn your application you could write the following code:\r\n\r\n    public class MyApp {\r\n\r\n        private static class ProtectedAccessor extends ProtectedContainer {\r\n\r\n            protected ProtectedAccessor() {\r\n                super();\r\n            }\r\n\r\n            protected PrivateAccessor(ProtectedContainer prot) {\r\n                super(prot);\r\n            }\r\n\r\n            public String exposeProtected() {\r\n                return iwantAccess;\r\n            }\r\n        }\r\n    }\r\n\r\nThe advantage of this method is that only your application has access to the protected data. It&#39;s not exactly a substitution of the friend keyword. But I think it&#39;s quite suitable when you write custom libraries and you need to access protected data.\r\n\r\nWhenever you have to deal with instances of ProtectedContainer you can wrap your ProtectedAccessor around it and you gain access.\r\n\r\nIt also works with protected methods. You define them protected in your API. Later in your application you write a private wrapper class and expose the protected method as public. That&#39;s it.","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>I think, the approach of using the friend accessor pattern is way too complicated. I had to face the same problem and I solved using the good, old copy constructor, known from C++, in Java:</p>\n\n<pre><code>public class ProtectedContainer {\n    protected String iwantAccess;\n\n    protected ProtectedContainer() {\n        super();\n        iwantAccess = \"Default string\";\n    }\n\n    protected ProtectedContainer(ProtectedContainer other) {\n        super();\n        this.iwantAccess = other.iwantAccess;\n    }\n\n    public int calcSquare(int x) {\n        iwantAccess = \"calculated square\";\n        return x * x;\n    }\n}\n</code></pre>\n\n<p>In your application you could write the following code:</p>\n\n<pre><code>public class MyApp {\n\n    private static class ProtectedAccessor extends ProtectedContainer {\n\n        protected ProtectedAccessor() {\n            super();\n        }\n\n        protected PrivateAccessor(ProtectedContainer prot) {\n            super(prot);\n        }\n\n        public String exposeProtected() {\n            return iwantAccess;\n        }\n    }\n}\n</code></pre>\n\n<p>The advantage of this method is that only your application has access to the protected data. It's not exactly a substitution of the friend keyword. But I think it's quite suitable when you write custom libraries and you need to access protected data.</p>\n\n<p>Whenever you have to deal with instances of ProtectedContainer you can wrap your ProtectedAccessor around it and you gain access.</p>\n\n<p>It also works with protected methods. You define them protected in your API. Later in your application you write a private wrapper class and expose the protected method as public. That's it.</p>\n"},{"comments":[{"owner":{"account_id":280592,"reputation":580,"user_id":576386,"display_name":"DaveMan"},"score":2,"creation_date":1648845367,"post_id":46681855,"comment_id":126736035,"body_markdown":"This answer would be much more useful if it had pointers to explain how to use Java 9 modules for this.","body":"This answer would be much more useful if it had pointers to explain how to use Java 9 modules for this."}],"tags":[],"owner":{"account_id":257842,"reputation":9939,"user_id":539599,"accept_rate":86,"display_name":"Raphael"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1507705530,"creation_date":1507705530,"answer_id":46681855,"question_id":182278,"body_markdown":"As of Java 9, modules can be used to make this a non-issue in many cases.","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>As of Java 9, modules can be used to make this a non-issue in many cases.</p>\n"}],"owner":{"account_id":2842,"reputation":31004,"user_id":4023,"accept_rate":89,"display_name":"Matthew Murdoch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104476,"favorite_count":0,"down_vote_count":0,"up_vote_count":239,"accepted_answer_id":316838,"answer_count":18,"score":239,"last_activity_date":1695261278,"creation_date":1223465873,"question_id":182278,"body_markdown":"I would like to be able to write a Java class in one package which can access non-public methods of a class in another package without having to make it a subclass of the other class. Is this possible?","title":"Is there a way to simulate the C++ &#39;friend&#39; concept in Java?","body":"<p>I would like to be able to write a Java class in one package which can access non-public methods of a class in another package without having to make it a subclass of the other class. Is this possible?</p>\n"},{"tags":["java","api-gateway","interactive-brokers"],"owner":{"account_id":19888878,"reputation":77,"user_id":14571370,"display_name":"Rodrigo Alarc&#243;n"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695261022,"creation_date":1691585146,"question_id":76867934,"body_markdown":"After installation in Ubuntu, is imposible to connecto the API Gateway of iteractive brokes through localhost. When trying to reach https://localhost:5000 (using the browser or curl) I get \r\n```\r\n2023-08-09 08:25:49.763 [SF] ERROR [JTS-SocketListener-55] - Client disconnected before version was sent.\r\njava.net.ConnectException: Connection terminated\r\n\tat jextend.bg.a(bg.java:820)\r\n\tat jextend.bg.b(bg.java:371)\r\n\tat jextend.cG.b(cG.java:379)\r\n\tat jextend.bg.q(bg.java:964)\r\n\tat jextend.eC.c(eC.java:480)\r\n\tat jextend.eC.run(eC.java:299)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n2023-08-09 08:25:49.871 [SF] WARN  [JTS-SocketListener-55] - Error\r\ntwslaunch.jutils.SLogging$Warning: API client version is missing.\r\n\tat twslaunch.jutils.au.B(au.java:287)\r\n\tat jextend.eC.run(eC.java:302)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n2023-08-09 08:25:55.322 [SF] INFO  [JTS-DeadlockMonitor-2] - Memory:total=786,432KB free=682,569KB HeapUsage: Max=786,432KB used=101,814KB committed=203,776KB NonHeapUsage: Max=0KB used=131,297KB committed=134,528KB\r\n2023-08-09 08:25:56.325 [SF] INFO  [JTS-DeadlockMonitor-2] - CPU:cur=0.10% avg=0.76% 30 min avg=0.76% 10 min avg=0.76% 5 min avg=0.61% 1 min avg=0.12%\r\nGC:called=12 times CPU used=0.03%\r\nFinalizer:cur=0.00% avg=0.00% 30 min avg=0.00% 10 min avg=0.00% 5 min avg=0.00% 1 min avg=0.00%\r\nThreads Count:curr live=62 curr daemon=28\r\n2023-08-09 08:26:06.474 [SF] INFO  [JTS-SocketListener-55] - State: STOP, IsAPI: NO\r\n2023-08-09 08:26:06.475 [SF] ERROR [JTS-SocketListener-55] - Error parsing integer value from header.\r\njava.lang.NumberFormatException: For input string: &quot;\u0016\u0003\u0001\u0002&quot;\r\n\tat java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\r\n\tat java.lang.Integer.parseInt(Integer.java:569)\r\n\tat java.lang.Integer.parseInt(Integer.java:615)\r\n\tat jextend.bg.q(bg.java:965)\r\n\tat jextend.eC.c(eC.java:480)\r\n\tat jextend.eC.run(eC.java:299)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n2023-08-09 08:26:06.475 [SF] WARN  [JTS-SocketListener-55] - Error\r\ntwslaunch.jutils.SLogging$Warning: API client version is missing.\r\n\tat twslaunch.jutils.au.B(au.java:287)\r\n\tat jextend.eC.run(eC.java:302)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n2023-08-09 08:26:06.481 [SF] INFO  [JTS-SocketListener-55] - State: STOP, IsAPI: NO\r\n2023-08-09 08:26:06.481 [SF] ERROR [JTS-SocketListener-55] - Error parsing integer value from header.\r\njava.lang.NumberFormatException: For input string: &quot;\u0016\u0003\u0001\u0002&quot;\r\n\tat java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\r\n\tat java.lang.Integer.parseInt(Integer.java:569)\r\n\tat java.lang.Integer.parseInt(Integer.java:615)\r\n\tat jextend.bg.q(bg.java:965)\r\n\tat jextend.eC.c(eC.java:480)\r\n\tat jextend.eC.run(eC.java:299)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n```\r\n\r\nIt seems to point out that a header with the API version is missing (though it not name the parameter) I tried to connect creating a python script and adding headers live `version: 1.0`, or `w: 1`, etc, but it didn&#39;t work\r\n\r\nMy config is:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FJfnJ.png","title":"API Gateway (IB) not working in Linux (interactive brokers)","body":"<p>After installation in Ubuntu, is imposible to connecto the API Gateway of iteractive brokes through localhost. When trying to reach https://localhost:5000 (using the browser or curl) I get</p>\n<pre><code>2023-08-09 08:25:49.763 [SF] ERROR [JTS-SocketListener-55] - Client disconnected before version was sent.\njava.net.ConnectException: Connection terminated\n    at jextend.bg.a(bg.java:820)\n    at jextend.bg.b(bg.java:371)\n    at jextend.cG.b(cG.java:379)\n    at jextend.bg.q(bg.java:964)\n    at jextend.eC.c(eC.java:480)\n    at jextend.eC.run(eC.java:299)\n    at java.lang.Thread.run(Thread.java:748)\n2023-08-09 08:25:49.871 [SF] WARN  [JTS-SocketListener-55] - Error\ntwslaunch.jutils.SLogging$Warning: API client version is missing.\n    at twslaunch.jutils.au.B(au.java:287)\n    at jextend.eC.run(eC.java:302)\n    at java.lang.Thread.run(Thread.java:748)\n2023-08-09 08:25:55.322 [SF] INFO  [JTS-DeadlockMonitor-2] - Memory:total=786,432KB free=682,569KB HeapUsage: Max=786,432KB used=101,814KB committed=203,776KB NonHeapUsage: Max=0KB used=131,297KB committed=134,528KB\n2023-08-09 08:25:56.325 [SF] INFO  [JTS-DeadlockMonitor-2] - CPU:cur=0.10% avg=0.76% 30 min avg=0.76% 10 min avg=0.76% 5 min avg=0.61% 1 min avg=0.12%\nGC:called=12 times CPU used=0.03%\nFinalizer:cur=0.00% avg=0.00% 30 min avg=0.00% 10 min avg=0.00% 5 min avg=0.00% 1 min avg=0.00%\nThreads Count:curr live=62 curr daemon=28\n2023-08-09 08:26:06.474 [SF] INFO  [JTS-SocketListener-55] - State: STOP, IsAPI: NO\n2023-08-09 08:26:06.475 [SF] ERROR [JTS-SocketListener-55] - Error parsing integer value from header.\njava.lang.NumberFormatException: For input string: &quot;&quot;\n    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\n    at java.lang.Integer.parseInt(Integer.java:569)\n    at java.lang.Integer.parseInt(Integer.java:615)\n    at jextend.bg.q(bg.java:965)\n    at jextend.eC.c(eC.java:480)\n    at jextend.eC.run(eC.java:299)\n    at java.lang.Thread.run(Thread.java:748)\n2023-08-09 08:26:06.475 [SF] WARN  [JTS-SocketListener-55] - Error\ntwslaunch.jutils.SLogging$Warning: API client version is missing.\n    at twslaunch.jutils.au.B(au.java:287)\n    at jextend.eC.run(eC.java:302)\n    at java.lang.Thread.run(Thread.java:748)\n2023-08-09 08:26:06.481 [SF] INFO  [JTS-SocketListener-55] - State: STOP, IsAPI: NO\n2023-08-09 08:26:06.481 [SF] ERROR [JTS-SocketListener-55] - Error parsing integer value from header.\njava.lang.NumberFormatException: For input string: &quot;&quot;\n    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\n    at java.lang.Integer.parseInt(Integer.java:569)\n    at java.lang.Integer.parseInt(Integer.java:615)\n    at jextend.bg.q(bg.java:965)\n    at jextend.eC.c(eC.java:480)\n    at jextend.eC.run(eC.java:299)\n    at java.lang.Thread.run(Thread.java:748)\n\n</code></pre>\n<p>It seems to point out that a header with the API version is missing (though it not name the parameter) I tried to connect creating a python script and adding headers live <code>version: 1.0</code>, or <code>w: 1</code>, etc, but it didn't work</p>\n<p>My config is:\n<a href=\"https://i.stack.imgur.com/FJfnJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FJfnJ.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","unit-testing","mockito","logback","slf4j"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1649059242,"post_id":71733717,"comment_id":126770970,"body_markdown":"You probably can&#39;t ignore this line directly in code unless you wrap the statement with a `if(logger.isEnabled(Level.WARN)) { ... }` and disable this logger in your tests (either specifically or more generally on a package/severity/general level). However, if you disable the loggers in your tests the logger itself should not do much beyond this statement and the statement itself doesn&#39;t look like it could throw a NPE. Care to share some details on where exactly this happens, i.e. the stacktrace?","body":"You probably can&#39;t ignore this line directly in code unless you wrap the statement with a <code>if(logger.isEnabled(Level.WARN)) { ... }</code> and disable this logger in your tests (either specifically or more generally on a package/severity/general level). However, if you disable the loggers in your tests the logger itself should not do much beyond this statement and the statement itself doesn&#39;t look like it could throw a NPE. Care to share some details on where exactly this happens, i.e. the stacktrace?"},{"owner":{"account_id":6125530,"reputation":2720,"user_id":4777670,"accept_rate":100,"display_name":"Saif"},"score":0,"creation_date":1649059301,"post_id":71733717,"comment_id":126770983,"body_markdown":"added stack trace","body":"added stack trace"}],"answers":[{"comments":[{"owner":{"account_id":6125530,"reputation":2720,"user_id":4777670,"accept_rate":100,"display_name":"Saif"},"score":1,"creation_date":1649063335,"post_id":71734603,"comment_id":126772355,"body_markdown":"Yeah. `when(myMockedException.getSuppressed()).thenReturn(new Throwable[0]);` does work. But is there a way to not execute the line at all. So that no [WAN], [ERROR], [INFO], etc. are printed during the execution of the unit test?","body":"Yeah. <code>when(myMockedException.getSuppressed()).thenReturn(new Throwable[0]);</code> does work. But is there a way to not execute the line at all. So that no [WAN], [ERROR], [INFO], etc. are printed during the execution of the unit test?"},{"owner":{"account_id":6155088,"reputation":226,"user_id":4798347,"display_name":"Zephyr"},"score":1,"creation_date":1649064046,"post_id":71734603,"comment_id":126772619,"body_markdown":"https://logback.qos.ch/manual/configuration.html#rootElement leads me to believe that you can configure Logback to disable logging completely:\n&quot;The value of the level attribute can be one of the case-insensitive strings TRACE, DEBUG, INFO, WARN, ERROR, ALL or OFF.&quot;\nI have no idea what side-effects that may have, or even whether it would actually solve your problem.","body":"<a href=\"https://logback.qos.ch/manual/configuration.html#rootElement\" rel=\"nofollow noreferrer\">logback.qos.ch/manual/configuration.html#rootElement</a> leads me to believe that you can configure Logback to disable logging completely: &quot;The value of the level attribute can be one of the case-insensitive strings TRACE, DEBUG, INFO, WARN, ERROR, ALL or OFF.&quot; I have no idea what side-effects that may have, or even whether it would actually solve your problem."}],"tags":[],"owner":{"account_id":6155088,"reputation":226,"user_id":4798347,"display_name":"Zephyr"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1649063173,"creation_date":1649063173,"answer_id":71734603,"question_id":71733717,"body_markdown":"The line responsible for the error (in the version that you mentioned) looks like this (see https://github.com/qos-ch/logback/blob/v_1.2.11/logback-classic/src/main/java/ch/qos/logback/classic/spi/ThrowableProxy.java#L99):\r\n\r\n    if (throwableSuppressed.length &gt; 0) {\r\n\r\nIt&#39;s worth noting that there&#39;s a fix for your issue, although I have no idea what version of Logback might have it now or in the future. https://github.com/qos-ch/logback/commit/c34645b320d2b31ccaf0de9bb079391904352a28 contains the following relevant change:\r\nReplaced\r\n\r\n    if (throwableSuppressed.length &gt; 0) {\r\n\r\nwith\r\n\r\n    // while JDK&#39;s implementation of getSuppressed() will always return a non-null array,\r\n    // this might not be the case in mocked throwables. We are being extra defensive here.\r\n    if (OptionHelper.isNotEmtpy(throwableSuppressed)) {\r\n\r\nI&#39;m generally not super keen on mocking Exceptions, myself. But if that&#39;s what your context demands, then mocking getSuppressed() to return a non-null (probably empty is fine) array might solve the issue.","title":"How to ignore/mock Slf4j log lines?","body":"<p>The line responsible for the error (in the version that you mentioned) looks like this (see <a href=\"https://github.com/qos-ch/logback/blob/v_1.2.11/logback-classic/src/main/java/ch/qos/logback/classic/spi/ThrowableProxy.java#L99\" rel=\"nofollow noreferrer\">https://github.com/qos-ch/logback/blob/v_1.2.11/logback-classic/src/main/java/ch/qos/logback/classic/spi/ThrowableProxy.java#L99</a>):</p>\n<pre><code>if (throwableSuppressed.length &gt; 0) {\n</code></pre>\n<p>It's worth noting that there's a fix for your issue, although I have no idea what version of Logback might have it now or in the future. <a href=\"https://github.com/qos-ch/logback/commit/c34645b320d2b31ccaf0de9bb079391904352a28\" rel=\"nofollow noreferrer\">https://github.com/qos-ch/logback/commit/c34645b320d2b31ccaf0de9bb079391904352a28</a> contains the following relevant change:\nReplaced</p>\n<pre><code>if (throwableSuppressed.length &gt; 0) {\n</code></pre>\n<p>with</p>\n<pre><code>// while JDK's implementation of getSuppressed() will always return a non-null array,\n// this might not be the case in mocked throwables. We are being extra defensive here.\nif (OptionHelper.isNotEmtpy(throwableSuppressed)) {\n</code></pre>\n<p>I'm generally not super keen on mocking Exceptions, myself. But if that's what your context demands, then mocking getSuppressed() to return a non-null (probably empty is fine) array might solve the issue.</p>\n"}],"owner":{"account_id":6125530,"reputation":2720,"user_id":4777670,"accept_rate":100,"display_name":"Saif"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1097,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71734603,"answer_count":1,"score":0,"last_activity_date":1695260788,"creation_date":1649058764,"question_id":71733717,"body_markdown":"I upgraded Spring Boot from 2.5.10 to 2.5.12 and it brought a breaking change for me in logback https://github.com/spring-projects/spring-boot/releases/tag/v2.5.11\r\n\r\nA few of my unit tests (using Mockito) are breaking with NullPointerException where I am passing a mocked exception to the log lines in the main code.\r\nFor example, this is a log line that I have in my main code, and the class is annotated with lombok&#39;s @Slf4j\r\n```java\r\nlog.warn(&quot;Exception occurred while doing something&quot;, exception);\r\n```\r\nEarlier, this log line was not throwing any errors.\r\n\r\nMy intention here is to not mock the logger, but to ignore this line through whatever workaround possible (even if I have to mock it).\r\n\r\nLombok adds the following on compilation (not sure if mocking would work here):\r\n```java\r\nprivate static final org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(HelloWorld.class);\r\n```\r\nOne workaround I have is to not use mocked exceptions and pass an actual exception but that&#39;s going to take the fun out of unit tests.\r\n\r\nStack trace:\r\n```\r\njava.lang.NullPointerException\r\n    at ch.qos.logback.classic.spi.ThrowableProxy.&lt;init&gt;(ThrowableProxy.java:99)\r\n    at ch.qos.logback.classic.spi.ThrowableProxy.&lt;init&gt;(ThrowableProxy.java:62)\r\n    at ch.qos.logback.classic.spi.LoggingEvent.&lt;init&gt;(LoggingEvent.java:119)\r\n    at ch.qos.logback.classic.Logger.buildLoggingEventAndAppend(Logger.java:419)\r\n    at ch.qos.logback.classic.Logger.filterAndLog_0_Or3Plus(Logger.java:383)\r\n    at ch.qos.logback.classic.Logger.warn(Logger.java:692)\r\n    at com.example.r.e.d.s.d.t.HelloWorld.executeInternal(HelloWorld.java:74)\r\n    at com.example.r.e.d.s.d.t.HelloWorldTest.testLocksOnDomain(HelloWorldTest.java:94)\r\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\r\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\r\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n    at org.mockito.internal.runners.DefaultInternalRunner$1$1.evaluate(DefaultInternalRunner.java:54)\r\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n    at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\r\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\r\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\r\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\r\n    at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\r\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\r\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\r\n    at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\r\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\r\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:413)\r\n    at org.mockito.internal.runners.DefaultInternalRunner$1.run(DefaultInternalRunner.java:99)\r\n    at org.mockito.internal.runners.DefaultInternalRunner.run(DefaultInternalRunner.java:105)\r\n    at org.mockito.internal.runners.StrictRunner.run(StrictRunner.java:40)\r\n    at org.mockito.junit.MockitoJUnitRunner.run(MockitoJUnitRunner.java:163)\r\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\r\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\n\r\n\r\nProcess finished with exit code 255\r\n```\r\n\r\nMoreover, with my unit tests working with the previous library version. There was a problem that during the execution of the unit tests, it used to print logs like WARN and ERROR in the console (which sometimes created a lot of confusion).\r\n","title":"How to ignore/mock Slf4j log lines?","body":"<p>I upgraded Spring Boot from 2.5.10 to 2.5.12 and it brought a breaking change for me in logback <a href=\"https://github.com/spring-projects/spring-boot/releases/tag/v2.5.11\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/releases/tag/v2.5.11</a></p>\n<p>A few of my unit tests (using Mockito) are breaking with NullPointerException where I am passing a mocked exception to the log lines in the main code.\nFor example, this is a log line that I have in my main code, and the class is annotated with lombok's @Slf4j</p>\n<pre class=\"lang-java prettyprint-override\"><code>log.warn(&quot;Exception occurred while doing something&quot;, exception);\n</code></pre>\n<p>Earlier, this log line was not throwing any errors.</p>\n<p>My intention here is to not mock the logger, but to ignore this line through whatever workaround possible (even if I have to mock it).</p>\n<p>Lombok adds the following on compilation (not sure if mocking would work here):</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(HelloWorld.class);\n</code></pre>\n<p>One workaround I have is to not use mocked exceptions and pass an actual exception but that's going to take the fun out of unit tests.</p>\n<p>Stack trace:</p>\n<pre><code>java.lang.NullPointerException\n    at ch.qos.logback.classic.spi.ThrowableProxy.&lt;init&gt;(ThrowableProxy.java:99)\n    at ch.qos.logback.classic.spi.ThrowableProxy.&lt;init&gt;(ThrowableProxy.java:62)\n    at ch.qos.logback.classic.spi.LoggingEvent.&lt;init&gt;(LoggingEvent.java:119)\n    at ch.qos.logback.classic.Logger.buildLoggingEventAndAppend(Logger.java:419)\n    at ch.qos.logback.classic.Logger.filterAndLog_0_Or3Plus(Logger.java:383)\n    at ch.qos.logback.classic.Logger.warn(Logger.java:692)\n    at com.example.r.e.d.s.d.t.HelloWorld.executeInternal(HelloWorld.java:74)\n    at com.example.r.e.d.s.d.t.HelloWorldTest.testLocksOnDomain(HelloWorldTest.java:94)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\n    at org.mockito.internal.runners.DefaultInternalRunner$1$1.evaluate(DefaultInternalRunner.java:54)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\n    at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\n    at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:413)\n    at org.mockito.internal.runners.DefaultInternalRunner$1.run(DefaultInternalRunner.java:99)\n    at org.mockito.internal.runners.DefaultInternalRunner.run(DefaultInternalRunner.java:105)\n    at org.mockito.internal.runners.StrictRunner.run(StrictRunner.java:40)\n    at org.mockito.junit.MockitoJUnitRunner.run(MockitoJUnitRunner.java:163)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\n\n\nProcess finished with exit code 255\n</code></pre>\n<p>Moreover, with my unit tests working with the previous library version. There was a problem that during the execution of the unit tests, it used to print logs like WARN and ERROR in the console (which sometimes created a lot of confusion).</p>\n"},{"tags":["java","json","hibernate","spring-mvc"],"comments":[{"owner":{"account_id":4264785,"reputation":335,"user_id":3488143,"display_name":"Iryna"},"score":0,"creation_date":1455269580,"post_id":23101260,"comment_id":58424224,"body_markdown":"What would you say about this answer? http://stackoverflow.com/a/30559076/3488143","body":"What would you say about this answer? <a href=\"http://stackoverflow.com/a/30559076/3488143\">stackoverflow.com/a/30559076/3488143</a>"},{"owner":{"account_id":6010232,"reputation":2616,"user_id":4720910,"display_name":"Musa"},"score":0,"creation_date":1462134255,"post_id":23101260,"comment_id":61498601,"body_markdown":"this information may be helpful\nhttp://stackoverflow.com/questions/12505141/only-using-jsonignore-during-serialization-but-not-deserialization/36965995#36965995","body":"this information may be helpful <a href=\"http://stackoverflow.com/questions/12505141/only-using-jsonignore-during-serialization-but-not-deserialization/36965995#36965995\" title=\"only using jsonignore during serialization but not deserialization\">stackoverflow.com/questions/12505141/&hellip;</a>"},{"owner":{"account_id":20398931,"reputation":81,"user_id":14965133,"display_name":"Edward Abattam"},"score":0,"creation_date":1631100032,"post_id":23101260,"comment_id":122130905,"body_markdown":"I answered here\n[Easy way to filter fields dynamically](https://stackoverflow.com/a/69102018/14965133)","body":"I answered here <a href=\"https://stackoverflow.com/a/69102018/14965133\">Easy way to filter fields dynamically</a>"},{"owner":{"account_id":15397479,"reputation":993,"user_id":11214377,"display_name":"Andrew Mititi"},"score":0,"creation_date":1636983389,"post_id":23101260,"comment_id":123695640,"body_markdown":"To dynamically  ignore the field in json response, before you send back your response, try setting that field to null i.e ```entityClass.setFieldToIgnore(null)```. The spring-mvc is by default set to ignore null values when deserializing, or you can configure it manually","body":"To dynamically  ignore the field in json response, before you send back your response, try setting that field to null i.e <code>entityClass.setFieldToIgnore(null)</code>. The spring-mvc is by default set to ignore null values when deserializing, or you can configure it manually"}],"answers":[{"comments":[{"owner":{"account_id":2518869,"reputation":8932,"user_id":2189617,"accept_rate":68,"display_name":"iCode"},"score":0,"creation_date":1397630037,"post_id":23101347,"comment_id":35311877,"body_markdown":"Can I do it dynamically? Not in POJO? Can I do it in my Controller class?","body":"Can I do it dynamically? Not in POJO? Can I do it in my Controller class?"},{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1397630199,"post_id":23101347,"comment_id":35311940,"body_markdown":"Do you mean that you don&#39;t want to add the annotations to the POJO?","body":"Do you mean that you don&#39;t want to add the annotations to the POJO?"},{"owner":{"account_id":2518869,"reputation":8932,"user_id":2189617,"accept_rate":68,"display_name":"iCode"},"score":1,"creation_date":1397630459,"post_id":23101347,"comment_id":35312087,"body_markdown":"Because Sometimes I may want to send all the fields to client side. Sometimes few fields. The fields which I should send to client side is getting from database in the controller class only. After that only I need to set which fields should ignore.","body":"Because Sometimes I may want to send all the fields to client side. Sometimes few fields. The fields which I should send to client side is getting from database in the controller class only. After that only I need to set which fields should ignore."}],"tags":[],"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"comment_count":3,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1397630577,"creation_date":1397628647,"answer_id":23101347,"question_id":23101260,"body_markdown":"Add `@JsonInclude(JsonInclude.Include.NON_NULL)` (forces Jackson to serialize null values) to the class as well as `@JsonIgnore` to the password field.\r\n\r\nYou could of course set `@JsonIgnore` on createdBy and updatedBy as well if you always want to ignore then and not just in this specific case.\r\n\r\n**UPDATE**\r\n\r\nIn the event that you do not want to add the annotation to the POJO itself, a great option is Jackson&#39;s Mixin Annotations. Check out the [documentation][1]\r\n\r\n\r\n  [1]: http://wiki.fasterxml.com/JacksonMixInAnnotations","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>Add <code>@JsonInclude(JsonInclude.Include.NON_NULL)</code> (forces Jackson to serialize null values) to the class as well as <code>@JsonIgnore</code> to the password field.</p>\n\n<p>You could of course set <code>@JsonIgnore</code> on createdBy and updatedBy as well if you always want to ignore then and not just in this specific case.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>In the event that you do not want to add the annotation to the POJO itself, a great option is Jackson's Mixin Annotations. Check out the <a href=\"http://wiki.fasterxml.com/JacksonMixInAnnotations\" rel=\"noreferrer\">documentation</a></p>\n"},{"comments":[{"owner":{"account_id":2518869,"reputation":8932,"user_id":2189617,"accept_rate":68,"display_name":"iCode"},"score":96,"creation_date":1397630164,"post_id":23101380,"comment_id":35311929,"body_markdown":"Can I do it dynamically? Not in POJO? Can I do it in my Controller class?","body":"Can I do it dynamically? Not in POJO? Can I do it in my Controller class?"},{"owner":{"account_id":2651999,"reputation":7958,"user_id":3145373,"accept_rate":77,"display_name":"user3145373 "},"score":3,"creation_date":1397630283,"post_id":23101380,"comment_id":35311981,"body_markdown":"@iProgrammer : here is a similar as you want :http://stackoverflow.com/questions/8179986/jackson-change-jsonignore-dynamically","body":"@iProgrammer : here is a similar as you want :<a href=\"http://stackoverflow.com/questions/8179986/jackson-change-jsonignore-dynamically\" title=\"jackson change jsonignore dynamically\">stackoverflow.com/questions/8179986/&hellip;</a>"},{"owner":{"account_id":2651999,"reputation":7958,"user_id":3145373,"accept_rate":77,"display_name":"user3145373 "},"score":3,"creation_date":1397630500,"post_id":23101380,"comment_id":35312111,"body_markdown":"@iProgrammer : very impressive answer here http://stackoverflow.com/questions/13764280/how-do-i-exclude-fields-with-jackson-not-using-annotations","body":"@iProgrammer : very impressive answer here <a href=\"http://stackoverflow.com/questions/13764280/how-do-i-exclude-fields-with-jackson-not-using-annotations\" title=\"how do i exclude fields with jackson not using annotations\">stackoverflow.com/questions/13764280/&hellip;</a>"},{"owner":{"account_id":3641223,"reputation":2385,"user_id":3035247,"accept_rate":0,"display_name":"xiaohuo"},"score":15,"creation_date":1469526660,"post_id":23101380,"comment_id":64561356,"body_markdown":"remark:`@JsonIgnore` is `com.fasterxml.jackson.annotation.JsonIgnore` not `org.codehaus.jackson.annotate.JsonIgnore`.","body":"remark:<code>@JsonIgnore</code> is <code>com.fasterxml.jackson.annotation.JsonIgnore</code> not <code>org.codehaus.jackson.annotate.JsonIgnore</code>."},{"owner":{"account_id":4806580,"reputation":1001,"user_id":3881432,"accept_rate":33,"display_name":"zulkarnain shah"},"score":9,"creation_date":1504867148,"post_id":23101380,"comment_id":79191093,"body_markdown":"That ignores both while reading from request and while sending response. I want to ignore only while sending response because i need that property from the request object. Any ideas?","body":"That ignores both while reading from request and while sending response. I want to ignore only while sending response because i need that property from the request object. Any ideas?"},{"owner":{"account_id":2651999,"reputation":7958,"user_id":3145373,"accept_rate":77,"display_name":"user3145373 "},"score":0,"creation_date":1505101604,"post_id":23101380,"comment_id":79257369,"body_markdown":"Hello @zulkarnainshah: you can use json serializer then.","body":"Hello @zulkarnainshah: you can use json serializer then."},{"owner":{"account_id":4806580,"reputation":1001,"user_id":3881432,"accept_rate":33,"display_name":"zulkarnain shah"},"score":1,"creation_date":1505105663,"post_id":23101380,"comment_id":79258281,"body_markdown":"@user3145373. I think I need to set the JSONIgnore on the getter method of that field and remove it from the field itself.","body":"@user3145373. I think I need to set the JSONIgnore on the getter method of that field and remove it from the field itself."},{"owner":{"account_id":2651999,"reputation":7958,"user_id":3145373,"accept_rate":77,"display_name":"user3145373 "},"score":1,"creation_date":1505106037,"post_id":23101380,"comment_id":79258384,"body_markdown":"@zulkarnainshah: refer https://stackoverflow.com/questions/12505141/only-using-jsonignore-during-serialization-but-not-deserialization for more details","body":"@zulkarnainshah: refer <a href=\"https://stackoverflow.com/questions/12505141/only-using-jsonignore-during-serialization-but-not-deserialization\" title=\"only using jsonignore during serialization but not deserialization\">stackoverflow.com/questions/12505141/&hellip;</a> for more details"},{"owner":{"account_id":4806580,"reputation":1001,"user_id":3881432,"accept_rate":33,"display_name":"zulkarnain shah"},"score":1,"creation_date":1505106201,"post_id":23101380,"comment_id":79258427,"body_markdown":"@user3145373 Ya the JSONIgnore needs to be only on top of the getter method. Thanks !","body":"@user3145373 Ya the JSONIgnore needs to be only on top of the getter method. Thanks !"},{"owner":{"account_id":2035724,"reputation":1280,"user_id":1818122,"accept_rate":27,"display_name":"The_Cute_Hedgehog"},"score":0,"creation_date":1552588908,"post_id":23101380,"comment_id":97078961,"body_markdown":"I guess `JsonFilter` annotation is what you need.","body":"I guess <code>JsonFilter</code> annotation is what you need."},{"owner":{"account_id":322468,"reputation":1506,"user_id":641887,"accept_rate":68,"display_name":"user641887"},"score":0,"creation_date":1602231205,"post_id":23101380,"comment_id":113660558,"body_markdown":"@user3145373 this does not work for inner class. what should be done to make it work for attributes/fields in the inner class ?","body":"@user3145373 this does not work for inner class. what should be done to make it work for attributes/fields in the inner class ?"},{"owner":{"account_id":2651999,"reputation":7958,"user_id":3145373,"accept_rate":77,"display_name":"user3145373 "},"score":0,"creation_date":1602232589,"post_id":23101380,"comment_id":113661102,"body_markdown":"@user641887 you need to use same annotation in inner class. If you do not want to whole inner class then you need to add annotation in parent one.","body":"@user641887 you need to use same annotation in inner class. If you do not want to whole inner class then you need to add annotation in parent one."},{"owner":{"account_id":322468,"reputation":1506,"user_id":641887,"accept_rate":68,"display_name":"user641887"},"score":0,"creation_date":1602265308,"post_id":23101380,"comment_id":113676380,"body_markdown":"@user3145373 i want few fields of the inner class but not all. adding annotation on the fields of the inner class which i dont need does not work.","body":"@user3145373 i want few fields of the inner class but not all. adding annotation on the fields of the inner class which i dont need does not work."},{"owner":{"account_id":2651999,"reputation":7958,"user_id":3145373,"accept_rate":77,"display_name":"user3145373 "},"score":0,"creation_date":1602478065,"post_id":23101380,"comment_id":113722334,"body_markdown":"@user641887 Annotation work at any place, parent-child it does not matter.","body":"@user641887 Annotation work at any place, parent-child it does not matter."},{"owner":{"account_id":1576010,"reputation":3103,"user_id":2834196,"accept_rate":31,"display_name":"Olkunmustafa"},"score":2,"creation_date":1608458839,"post_id":23101380,"comment_id":115585712,"body_markdown":"It is not the answer for THAT question. Why the @iCode accepted it I couldn&#39;t understand.","body":"It is not the answer for THAT question. Why the @iCode accepted it I couldn&#39;t understand."},{"owner":{"account_id":2651999,"reputation":7958,"user_id":3145373,"accept_rate":77,"display_name":"user3145373 "},"score":0,"creation_date":1608528134,"post_id":23101380,"comment_id":115601960,"body_markdown":"@Olkunmustafa: Can you please explain what&#39;s wrong in this and what actually -iCode wants? If something is wrong then happy to correct it.","body":"@Olkunmustafa: Can you please explain what&#39;s wrong in this and what actually -iCode wants? If something is wrong then happy to correct it."},{"owner":{"account_id":1576010,"reputation":3103,"user_id":2834196,"accept_rate":31,"display_name":"Olkunmustafa"},"score":0,"creation_date":1608574787,"post_id":23101380,"comment_id":115620269,"body_markdown":"@user3145373 Because -iCode is asking to change response dynamically not in POJO. Already he commented about it but the answer accepted I couldn&#39;t understand. Correct answer should be this one =&gt; https://stackoverflow.com/a/51990626/2834196","body":"@user3145373 Because -iCode is asking to change response dynamically not in POJO. Already he commented about it but the answer accepted I couldn&#39;t understand. Correct answer should be this one =&gt; <a href=\"https://stackoverflow.com/a/51990626/2834196\">stackoverflow.com/a/51990626/2834196</a>"},{"owner":{"account_id":10633939,"reputation":403,"user_id":7831181,"display_name":"Pieber"},"score":0,"creation_date":1628605092,"post_id":23101380,"comment_id":121462195,"body_markdown":"Another solution is to use a Data Transfer Object (DTO) which allows to only send fields that your client needs. This object will only have `userId`, `userName` and `emailId` as attributes.","body":"Another solution is to use a Data Transfer Object (DTO) which allows to only send fields that your client needs. This object will only have <code>userId</code>, <code>userName</code> and <code>emailId</code> as attributes."},{"owner":{"account_id":4659290,"reputation":539,"user_id":3773944,"display_name":"Gowtham"},"score":1,"creation_date":1641809239,"post_id":23101380,"comment_id":124894566,"body_markdown":"But to not to add this attribute in serialization and de-serialization we and define &#39;@JsonIgnore&#39; at data-member level:\n\n@JsonIgnore\nprivate String userPassword;","body":"But to not to add this attribute in serialization and de-serialization we and define &#39;@JsonIgnore&#39; at data-member level:  @JsonIgnore private String userPassword;"}],"tags":[],"owner":{"account_id":2651999,"reputation":7958,"user_id":3145373,"accept_rate":77,"display_name":"user3145373 "},"comment_count":19,"down_vote_count":8,"up_vote_count":197,"is_accepted":false,"score":189,"last_activity_date":1584965036,"creation_date":1397628777,"answer_id":23101380,"question_id":23101260,"body_markdown":"Add the `@JsonIgnoreProperties(&quot;fieldname&quot;)` annotation  to your POJO.\r\n\r\nOr you can use `@JsonIgnore` before the name of the field you want to ignore while deserializing JSON. Example:\r\n\r\n    @JsonIgnore\r\n    @JsonProperty(value = &quot;user_password&quot;)\r\n    public String getUserPassword() {\r\n        return userPassword;\r\n    }\r\n\r\n\r\n[GitHub example](https://gist.github.com/thurloat/2510887)","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>Add the <code>@JsonIgnoreProperties(\"fieldname\")</code> annotation  to your POJO.</p>\n\n<p>Or you can use <code>@JsonIgnore</code> before the name of the field you want to ignore while deserializing JSON. Example:</p>\n\n<pre><code>@JsonIgnore\n@JsonProperty(value = \"user_password\")\npublic String getUserPassword() {\n    return userPassword;\n}\n</code></pre>\n\n<p><a href=\"https://gist.github.com/thurloat/2510887\" rel=\"noreferrer\">GitHub example</a></p>\n"},{"comments":[{"owner":{"account_id":399251,"reputation":3559,"user_id":764469,"display_name":"Jeff"},"score":6,"creation_date":1471058922,"post_id":28388559,"comment_id":65214462,"body_markdown":"Thank you!  This was the way to go for me. I needed custom JSON views with the same objects in different locations and @JsonIgnore just wouldn&#39;t work.  This library made it dead simple get done.","body":"Thank you!  This was the way to go for me. I needed custom JSON views with the same objects in different locations and @JsonIgnore just wouldn&#39;t work.  This library made it dead simple get done."},{"owner":{"account_id":4055331,"reputation":714,"user_id":3333559,"accept_rate":81,"display_name":"anindis"},"score":2,"creation_date":1518431902,"post_id":28388559,"comment_id":84488726,"body_markdown":"You made my code cleaner and implementation easier. thank you","body":"You made my code cleaner and implementation easier. thank you"},{"owner":{"account_id":3330345,"reputation":474,"user_id":2799439,"accept_rate":38,"display_name":"Ninad"},"score":0,"creation_date":1551769567,"post_id":28388559,"comment_id":96750390,"body_markdown":"@monitorjbl : this is a bit off track, I have used json views and its solving my purpose. But I am not able to register custom serializer for java.util.Date class(no runtime/compile time error) were as for string I was able to register custom serializer.","body":"@monitorjbl : this is a bit off track, I have used json views and its solving my purpose. But I am not able to register custom serializer for java.util.Date class(no runtime/compile time error) were as for string I was able to register custom serializer."},{"owner":{"account_id":5416397,"reputation":1423,"user_id":4311428,"display_name":"maxeh"},"score":0,"creation_date":1600095876,"post_id":28388559,"comment_id":112972872,"body_markdown":"JsonView seems to be part of Jackson object mapper now","body":"JsonView seems to be part of Jackson object mapper now"},{"owner":{"account_id":4633185,"reputation":730,"user_id":3755079,"display_name":"Adel Ben Hamadi"},"score":0,"creation_date":1663687547,"post_id":28388559,"comment_id":130296136,"body_markdown":"@monitorjbl intresting, i guess i&#39;ll try your library","body":"@monitorjbl intresting, i guess i&#39;ll try your library"}],"tags":[],"owner":{"account_id":224671,"reputation":4300,"user_id":484661,"accept_rate":68,"display_name":"monitorjbl"},"comment_count":5,"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1446513238,"creation_date":1423350446,"answer_id":28388559,"question_id":23101260,"body_markdown":"I know I&#39;m a bit late to the party, but I actually ran into this as well a few months back. All of the available solutions weren&#39;t very appealing to me (mixins? ugh!), so I ended up creating a new library to make this process cleaner. It&#39;s available here if anyone would like to try it out: https://github.com/monitorjbl/spring-json-view.\r\n\r\nThe basic usage is pretty simple, you use the `JsonView` object in your controller methods like so:\r\n\r\n    import com.monitorjbl.json.JsonView;\r\n    import static com.monitorjbl.json.Match.match;\r\n\r\n\t@RequestMapping(method = RequestMethod.GET, value = &quot;/myObject&quot;)\r\n\t@ResponseBody\r\n\tpublic void getMyObjects() {\r\n\t    //get a list of the objects\r\n\t    List&lt;MyObject&gt; list = myObjectService.list();\r\n\r\n\t    //exclude expensive field\r\n\t    JsonView.with(list).onClass(MyObject.class, match().exclude(&quot;contains&quot;));\r\n\t}\r\n\r\nYou can also use it outside of Spring: \r\n\r\n\timport com.fasterxml.jackson.databind.ObjectMapper;\r\n\timport com.fasterxml.jackson.databind.module.SimpleModule;\r\n\timport static com.monitorjbl.json.Match.match;\r\n\r\n\tObjectMapper mapper = new ObjectMapper();\r\n\tSimpleModule module = new SimpleModule();\r\n\tmodule.addSerializer(JsonView.class, new JsonViewSerializer());\r\n\tmapper.registerModule(module);\r\n\r\n\tmapper.writeValueAsString(JsonView.with(list)\r\n\t      .onClass(MyObject.class, match()\r\n\t        .exclude(&quot;contains&quot;))\r\n\t      .onClass(MySmallObject.class, match()\r\n\t        .exclude(&quot;id&quot;));\r\n\t        ","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>I know I'm a bit late to the party, but I actually ran into this as well a few months back. All of the available solutions weren't very appealing to me (mixins? ugh!), so I ended up creating a new library to make this process cleaner. It's available here if anyone would like to try it out: <a href=\"https://github.com/monitorjbl/spring-json-view\" rel=\"noreferrer\">https://github.com/monitorjbl/spring-json-view</a>.</p>\n\n<p>The basic usage is pretty simple, you use the <code>JsonView</code> object in your controller methods like so:</p>\n\n<pre><code>import com.monitorjbl.json.JsonView;\nimport static com.monitorjbl.json.Match.match;\n\n@RequestMapping(method = RequestMethod.GET, value = \"/myObject\")\n@ResponseBody\npublic void getMyObjects() {\n    //get a list of the objects\n    List&lt;MyObject&gt; list = myObjectService.list();\n\n    //exclude expensive field\n    JsonView.with(list).onClass(MyObject.class, match().exclude(\"contains\"));\n}\n</code></pre>\n\n<p>You can also use it outside of Spring: </p>\n\n<pre><code>import com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.module.SimpleModule;\nimport static com.monitorjbl.json.Match.match;\n\nObjectMapper mapper = new ObjectMapper();\nSimpleModule module = new SimpleModule();\nmodule.addSerializer(JsonView.class, new JsonViewSerializer());\nmapper.registerModule(module);\n\nmapper.writeValueAsString(JsonView.with(list)\n      .onClass(MyObject.class, match()\n        .exclude(\"contains\"))\n      .onClass(MySmallObject.class, match()\n        .exclude(\"id\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":211811,"reputation":726,"user_id":464219,"accept_rate":17,"display_name":"Hamedz"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1570921480,"creation_date":1460635392,"answer_id":36622507,"question_id":23101260,"body_markdown":"If I were you and wanted to do so, I wouldn&#39;t use my User entity in Controller layer.Instead I create and use UserDto (Data transfer object) to communicate with business(Service) layer and Controller.\r\nYou can use Apache BeanUtils(copyProperties method) to copy data from User entity to UserDto.","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>If I were you and wanted to do so, I wouldn't use my User entity in Controller layer.Instead I create and use UserDto (Data transfer object) to communicate with business(Service) layer and Controller.\nYou can use Apache BeanUtils(copyProperties method) to copy data from User entity to UserDto.</p>\n"},{"comments":[{"owner":{"account_id":5226191,"reputation":2965,"user_id":4178170,"accept_rate":55,"display_name":"Humoyun Ahmad"},"score":5,"creation_date":1511224780,"post_id":36982952,"comment_id":81760606,"body_markdown":"why so complications for an easy question","body":"why so complications for an easy question"}],"tags":[],"owner":{"account_id":6695581,"reputation":149,"user_id":5163678,"display_name":"C2dric"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1462193595,"creation_date":1462193595,"answer_id":36982952,"question_id":23101260,"body_markdown":"I&#39;ve found a solution for me with Spring and jackson\r\n\r\n**First specify the filter name in the entity**\r\n\r\n    @Entity\r\n    @Table(name = &quot;SECTEUR&quot;)\r\n    @JsonFilter(ModelJsonFilters.SECTEUR_FILTER)\r\n    public class Secteur implements Serializable {\r\n\r\n\t/** Serial UID */\r\n\tprivate static final long serialVersionUID = 5697181222899184767L;\r\n\r\n\t/**\r\n\t * Unique ID\r\n\t */\r\n\t@Id\r\n\t@JsonView(View.SecteurWithoutChildrens.class)\r\n\t@Column(name = &quot;id&quot;)\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate long id;\r\n\r\n\t@JsonView(View.SecteurWithoutChildrens.class)\r\n\t@Column(name = &quot;code&quot;, nullable = false, length = 35)\r\n\tprivate String code;\r\n\r\n\t/**\r\n\t * Identifiant du secteur parent\r\n\t */\r\n\t@JsonView(View.SecteurWithoutChildrens.class)\r\n\t@Column(name = &quot;id_parent&quot;)\r\n\tprivate Long idParent;\r\n\r\n\t@OneToMany(fetch = FetchType.LAZY)\r\n\t@JoinColumn(name = &quot;id_parent&quot;)\r\n\tprivate List&lt;Secteur&gt; secteursEnfants = new ArrayList&lt;&gt;(0);\r\n\r\n    }\r\n\r\n**Then you can see the constants filters names class with the default FilterProvider used in spring configuration**\r\n\r\n    public class ModelJsonFilters {\r\n\r\n\tpublic final static String SECTEUR_FILTER = &quot;SecteurFilter&quot;;\r\n\tpublic final static String APPLICATION_FILTER = &quot;ApplicationFilter&quot;;\r\n\tpublic final static String SERVICE_FILTER = &quot;ServiceFilter&quot;;\r\n\tpublic final static String UTILISATEUR_FILTER = &quot;UtilisateurFilter&quot;;\r\n\r\n\tpublic static SimpleFilterProvider getDefaultFilters() {\r\n\t\tSimpleBeanPropertyFilter theFilter = SimpleBeanPropertyFilter.serializeAll();\r\n\t\treturn new SimpleFilterProvider().setDefaultFilter(theFilter);\r\n\t}\r\n\r\n    }\r\n\r\n**Spring configuration :**\r\n\r\n    @EnableWebMvc\r\n    @Configuration\r\n    @ComponentScan(basePackages = &quot;fr.sodebo&quot;)\r\n\r\n    public class ApiRootConfiguration extends WebMvcConfigurerAdapter {\r\n\r\n\t@Autowired\r\n\tprivate EntityManagerFactory entityManagerFactory;\r\n\r\n\r\n\t/**\r\n\t * config qui permet d&#39;&#233;viter les &quot;Lazy loading Error&quot; au moment de la\r\n\t * conversion json par jackson pour les retours des services REST&lt;br&gt;\r\n\t * on permet &#224; jackson d&#39;acceder &#224; sessionFactory pour charger ce dont il a\r\n\t * besoin\r\n\t */\r\n\t@Override\r\n\tpublic void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n\r\n\t\tsuper.configureMessageConverters(converters);\r\n\t\tMappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();\r\n\t\tObjectMapper mapper = new ObjectMapper();\r\n\r\n\t\t// config d&#39;hibernate pour la conversion json\r\n\t\tmapper.registerModule(getConfiguredHibernateModule());//\r\n\r\n\t\t// inscrit les filtres json\r\n\t\tsubscribeFiltersInMapper(mapper);\r\n\r\n\t\t// config du comportement de json views\r\n\t\tmapper.configure(MapperFeature.DEFAULT_VIEW_INCLUSION, false);\r\n\r\n\t\tconverter.setObjectMapper(mapper);\r\n\t\tconverters.add(converter);\r\n\t}\r\n\r\n\t/**\r\n\t * config d&#39;hibernate pour la conversion json\r\n\t * \r\n\t * @return Hibernate5Module\r\n\t */\r\n\tprivate Hibernate5Module getConfiguredHibernateModule() {\r\n\t\tSessionFactory sessionFactory = entityManagerFactory.unwrap(SessionFactory.class);\r\n\t\tHibernate5Module module = new Hibernate5Module(sessionFactory);\r\n\t\tmodule.configure(Hibernate5Module.Feature.FORCE_LAZY_LOADING, true);\r\n\r\n\t\treturn module;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * inscrit les filtres json\r\n\t * \r\n\t * @param mapper\r\n\t */\r\n\tprivate void subscribeFiltersInMapper(ObjectMapper mapper) {\r\n\r\n\t\tmapper.setFilterProvider(ModelJsonFilters.getDefaultFilters());\r\n\r\n\t}\r\n\r\n    }\r\n\r\n**Endly I can specify a specific filter in restConstoller when i need....**\r\n\r\n    @RequestMapping(value = &quot;/{id}/droits/&quot;, method = RequestMethod.GET)\r\n\tpublic MappingJacksonValue getListDroits(@PathVariable long id) {\r\n\r\n\t\tLOGGER.debug(&quot;Get all droits of user with id {}&quot;, id);\r\n\r\n\t\tList&lt;Droit&gt; droits = utilisateurService.findDroitsDeUtilisateur(id);\r\n\r\n\t\tMappingJacksonValue value;\r\n\r\n\t\tUtilisateurWithSecteurs utilisateurWithSecteurs = droitsUtilisateur.fillLists(droits).get(id);\r\n\r\n\t\tvalue = new MappingJacksonValue(utilisateurWithSecteurs);\r\n\r\n\t\tFilterProvider filters = ModelJsonFilters.getDefaultFilters().addFilter(ModelJsonFilters.SECTEUR_FILTER, SimpleBeanPropertyFilter.serializeAllExcept(&quot;secteursEnfants&quot;)).addFilter(ModelJsonFilters.APPLICATION_FILTER,\r\n\t\t\t\tSimpleBeanPropertyFilter.serializeAllExcept(&quot;services&quot;));\r\n\r\n\t\tvalue.setFilters(filters);\r\n\t\treturn value;\r\n\r\n\t}","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>I've found a solution for me with Spring and jackson</p>\n\n<p><strong>First specify the filter name in the entity</strong></p>\n\n<pre><code>@Entity\n@Table(name = \"SECTEUR\")\n@JsonFilter(ModelJsonFilters.SECTEUR_FILTER)\npublic class Secteur implements Serializable {\n\n/** Serial UID */\nprivate static final long serialVersionUID = 5697181222899184767L;\n\n/**\n * Unique ID\n */\n@Id\n@JsonView(View.SecteurWithoutChildrens.class)\n@Column(name = \"id\")\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate long id;\n\n@JsonView(View.SecteurWithoutChildrens.class)\n@Column(name = \"code\", nullable = false, length = 35)\nprivate String code;\n\n/**\n * Identifiant du secteur parent\n */\n@JsonView(View.SecteurWithoutChildrens.class)\n@Column(name = \"id_parent\")\nprivate Long idParent;\n\n@OneToMany(fetch = FetchType.LAZY)\n@JoinColumn(name = \"id_parent\")\nprivate List&lt;Secteur&gt; secteursEnfants = new ArrayList&lt;&gt;(0);\n\n}\n</code></pre>\n\n<p><strong>Then you can see the constants filters names class with the default FilterProvider used in spring configuration</strong></p>\n\n<pre><code>public class ModelJsonFilters {\n\npublic final static String SECTEUR_FILTER = \"SecteurFilter\";\npublic final static String APPLICATION_FILTER = \"ApplicationFilter\";\npublic final static String SERVICE_FILTER = \"ServiceFilter\";\npublic final static String UTILISATEUR_FILTER = \"UtilisateurFilter\";\n\npublic static SimpleFilterProvider getDefaultFilters() {\n    SimpleBeanPropertyFilter theFilter = SimpleBeanPropertyFilter.serializeAll();\n    return new SimpleFilterProvider().setDefaultFilter(theFilter);\n}\n\n}\n</code></pre>\n\n<p><strong>Spring configuration :</strong></p>\n\n<pre><code>@EnableWebMvc\n@Configuration\n@ComponentScan(basePackages = \"fr.sodebo\")\n\npublic class ApiRootConfiguration extends WebMvcConfigurerAdapter {\n\n@Autowired\nprivate EntityManagerFactory entityManagerFactory;\n\n\n/**\n * config qui permet d'viter les \"Lazy loading Error\" au moment de la\n * conversion json par jackson pour les retours des services REST&lt;br&gt;\n * on permet  jackson d'acceder  sessionFactory pour charger ce dont il a\n * besoin\n */\n@Override\npublic void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n\n    super.configureMessageConverters(converters);\n    MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();\n    ObjectMapper mapper = new ObjectMapper();\n\n    // config d'hibernate pour la conversion json\n    mapper.registerModule(getConfiguredHibernateModule());//\n\n    // inscrit les filtres json\n    subscribeFiltersInMapper(mapper);\n\n    // config du comportement de json views\n    mapper.configure(MapperFeature.DEFAULT_VIEW_INCLUSION, false);\n\n    converter.setObjectMapper(mapper);\n    converters.add(converter);\n}\n\n/**\n * config d'hibernate pour la conversion json\n * \n * @return Hibernate5Module\n */\nprivate Hibernate5Module getConfiguredHibernateModule() {\n    SessionFactory sessionFactory = entityManagerFactory.unwrap(SessionFactory.class);\n    Hibernate5Module module = new Hibernate5Module(sessionFactory);\n    module.configure(Hibernate5Module.Feature.FORCE_LAZY_LOADING, true);\n\n    return module;\n\n}\n\n/**\n * inscrit les filtres json\n * \n * @param mapper\n */\nprivate void subscribeFiltersInMapper(ObjectMapper mapper) {\n\n    mapper.setFilterProvider(ModelJsonFilters.getDefaultFilters());\n\n}\n\n}\n</code></pre>\n\n<p><strong>Endly I can specify a specific filter in restConstoller when i need....</strong></p>\n\n<pre><code>@RequestMapping(value = \"/{id}/droits/\", method = RequestMethod.GET)\npublic MappingJacksonValue getListDroits(@PathVariable long id) {\n\n    LOGGER.debug(\"Get all droits of user with id {}\", id);\n\n    List&lt;Droit&gt; droits = utilisateurService.findDroitsDeUtilisateur(id);\n\n    MappingJacksonValue value;\n\n    UtilisateurWithSecteurs utilisateurWithSecteurs = droitsUtilisateur.fillLists(droits).get(id);\n\n    value = new MappingJacksonValue(utilisateurWithSecteurs);\n\n    FilterProvider filters = ModelJsonFilters.getDefaultFilters().addFilter(ModelJsonFilters.SECTEUR_FILTER, SimpleBeanPropertyFilter.serializeAllExcept(\"secteursEnfants\")).addFilter(ModelJsonFilters.APPLICATION_FILTER,\n            SimpleBeanPropertyFilter.serializeAllExcept(\"services\"));\n\n    value.setFilters(filters);\n    return value;\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1679362,"reputation":495,"user_id":1544034,"accept_rate":75,"display_name":"Hammad Dar"},"score":1,"creation_date":1516726586,"post_id":46526138,"comment_id":83802923,"body_markdown":"Totally irrelevantly answered. The purpose of the question is different while the answer is about something else. -1 for that","body":"Totally irrelevantly answered. The purpose of the question is different while the answer is about something else. -1 for that"}],"tags":[],"owner":{"account_id":8846170,"reputation":13,"user_id":6606839,"display_name":"Jeevan Gowda"},"comment_count":1,"down_vote_count":8,"up_vote_count":2,"is_accepted":false,"score":-6,"last_activity_date":1523991873,"creation_date":1506949752,"answer_id":46526138,"question_id":23101260,"body_markdown":"In your entity class add `@JsonInclude(JsonInclude.Include.NON_NULL)` annotation to resolve the problem\r\n\r\nit will look like\r\n\r\n\r\n    @Entity\r\n    @JsonInclude(JsonInclude.Include.NON_NULL)","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>In your entity class add <code>@JsonInclude(JsonInclude.Include.NON_NULL)</code> annotation to resolve the problem</p>\n\n<p>it will look like</p>\n\n<pre><code>@Entity\n@JsonInclude(JsonInclude.Include.NON_NULL)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6348487,"reputation":724,"user_id":4928281,"accept_rate":73,"display_name":"Leonardo Beal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1510738520,"creation_date":1510738520,"answer_id":47303816,"question_id":23101260,"body_markdown":"Would not creating a `UserJsonResponse` class and populating with the wanted fields be a cleaner solution?\r\n\r\nReturning directly a JSON seems a great solution when you want to give all the model back. Otherwise it just gets messy.\r\n\r\nIn the future, for example you might want to have a JSON field that does not match any Model field and then you&#39;re in a bigger trouble.","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>Would not creating a <code>UserJsonResponse</code> class and populating with the wanted fields be a cleaner solution?</p>\n\n<p>Returning directly a JSON seems a great solution when you want to give all the model back. Otherwise it just gets messy.</p>\n\n<p>In the future, for example you might want to have a JSON field that does not match any Model field and then you're in a bigger trouble.</p>\n"},{"comments":[{"owner":{"account_id":1030972,"reputation":123,"user_id":1039281,"display_name":"stx"},"score":4,"creation_date":1563454723,"post_id":49207551,"comment_id":100711403,"body_markdown":"This is a fantastic and minimalistic answer! I wanted to return as a JSON just only few fields from a @Configuration annotated component and skipping all the internal fields that are automatically included. Thanks a lot!","body":"This is a fantastic and minimalistic answer! I wanted to return as a JSON just only few fields from a @Configuration annotated component and skipping all the internal fields that are automatically included. Thanks a lot!"},{"owner":{"account_id":8746002,"reputation":2039,"user_id":11844909,"display_name":"Daman Arora"},"score":1,"creation_date":1646909702,"post_id":49207551,"comment_id":126242411,"body_markdown":"This should be the accepted solution. Really helped. Thanks @Hett","body":"This should be the accepted solution. Really helped. Thanks @Hett"},{"owner":{"account_id":2892394,"reputation":879,"user_id":2480869,"accept_rate":24,"display_name":"nomadus"},"score":0,"creation_date":1655538979,"post_id":49207551,"comment_id":128359782,"body_markdown":"Don&#39;t forget to add spring.jackson.mapper.default-view-inclusion=true to cascade to child objects, see here https://stackoverflow.com/a/57928379/18209257","body":"Don&#39;t forget to add spring.jackson.mapper.default-view-inclusion=true to cascade to child objects, see here <a href=\"https://stackoverflow.com/a/57928379/18209257\">stackoverflow.com/a/57928379/18209257</a>"}],"tags":[],"owner":{"account_id":1612911,"reputation":3570,"user_id":1491378,"accept_rate":88,"display_name":"Hett"},"comment_count":3,"down_vote_count":0,"up_vote_count":51,"is_accepted":false,"score":51,"last_activity_date":1650952920,"creation_date":1520674573,"answer_id":49207551,"question_id":23101260,"body_markdown":"&gt; Can I do it dynamically?\r\n\r\nCreate view class:\r\n    \r\n    public class View {\r\n        static class Public { }\r\n        static class ExtendedPublic extends Public { }\r\n        static class Internal extends ExtendedPublic { }\r\n    }\r\n\r\nAnnotate you model\r\n\r\n    @Document\r\n    public class User {\r\n    \r\n        @Id\r\n        @JsonView(View.Public.class)\r\n        private String id;\r\n    \r\n        @JsonView(View.Internal.class)\r\n        private String email;\r\n    \r\n        @JsonView(View.Public.class)\r\n        private String name;\r\n    \r\n        @JsonView(View.Public.class)\r\n        private Instant createdAt = Instant.now();\r\n        // getters/setters\r\n    }\r\n\r\nSpecify the view class in your controller\r\n\r\n\r\n    @RequestMapping(&quot;/user/{email}&quot;)\r\n    public class UserController {\r\n\r\n        private final UserRepository userRepository;\r\n\r\n        @Autowired\r\n        UserController(UserRepository userRepository) {\r\n            this.userRepository = userRepository;\r\n        }\r\n\r\n        @RequestMapping(method = RequestMethod.GET)\r\n        @JsonView(View.Internal.class)\r\n        public @ResponseBody Optional&lt;User&gt; get(@PathVariable String email) {\r\n            return userRepository.findByEmail(email);\r\n        }\r\n\r\n    }\r\n\r\nData example:\r\n\r\n    {&quot;id&quot;:&quot;5aa2496df863482dc4da2067&quot;,&quot;name&quot;:&quot;test&quot;,&quot;createdAt&quot;:&quot;2018-03-10T09:35:31.050353800Z&quot;}\r\n\r\nUPD: keep in mind that it&#39;s not best practice to use entity in response. Better use different DTO for each case and fill them using `modelmapper`","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<blockquote>\n<p>Can I do it dynamically?</p>\n</blockquote>\n<p>Create view class:</p>\n<pre><code>public class View {\n    static class Public { }\n    static class ExtendedPublic extends Public { }\n    static class Internal extends ExtendedPublic { }\n}\n</code></pre>\n<p>Annotate you model</p>\n<pre><code>@Document\npublic class User {\n\n    @Id\n    @JsonView(View.Public.class)\n    private String id;\n\n    @JsonView(View.Internal.class)\n    private String email;\n\n    @JsonView(View.Public.class)\n    private String name;\n\n    @JsonView(View.Public.class)\n    private Instant createdAt = Instant.now();\n    // getters/setters\n}\n</code></pre>\n<p>Specify the view class in your controller</p>\n<pre><code>@RequestMapping(&quot;/user/{email}&quot;)\npublic class UserController {\n\n    private final UserRepository userRepository;\n\n    @Autowired\n    UserController(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    @RequestMapping(method = RequestMethod.GET)\n    @JsonView(View.Internal.class)\n    public @ResponseBody Optional&lt;User&gt; get(@PathVariable String email) {\n        return userRepository.findByEmail(email);\n    }\n\n}\n</code></pre>\n<p>Data example:</p>\n<pre><code>{&quot;id&quot;:&quot;5aa2496df863482dc4da2067&quot;,&quot;name&quot;:&quot;test&quot;,&quot;createdAt&quot;:&quot;2018-03-10T09:35:31.050353800Z&quot;}\n</code></pre>\n<p>UPD: keep in mind that it's not best practice to use entity in response. Better use different DTO for each case and fill them using <code>modelmapper</code></p>\n"},{"tags":[],"owner":{"account_id":6413292,"reputation":577,"user_id":4972235,"display_name":"Devendra Dora"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1523991849,"creation_date":1523991378,"answer_id":49885568,"question_id":23101260,"body_markdown":"I have created a JsonUtil which can be used to ignore fields at runtime while giving a response. \r\n\r\nExample Usage :\r\n     First argument should be any POJO class (Student) and ignoreFields is comma seperated fields you want to ignore in response. \r\n    \r\n     Student st = new Student();\r\n     createJsonIgnoreFields(st,&quot;firstname,age&quot;);\r\n\r\n    import java.util.logging.Logger;\r\n    \r\n    import org.codehaus.jackson.map.ObjectMapper;\r\n    import org.codehaus.jackson.map.ObjectWriter;\r\n    import org.codehaus.jackson.map.ser.FilterProvider;\r\n    import org.codehaus.jackson.map.ser.impl.SimpleBeanPropertyFilter;\r\n    import org.codehaus.jackson.map.ser.impl.SimpleFilterProvider;\r\n\r\n    public class JsonUtil {\r\n\r\n      public static String createJsonIgnoreFields(Object object, String ignoreFields) {\r\n         try {\r\n             ObjectMapper mapper = new ObjectMapper();\r\n             mapper.getSerializationConfig().addMixInAnnotations(Object.class, JsonPropertyFilterMixIn.class);\r\n             String[] ignoreFieldsArray = ignoreFields.split(&quot;,&quot;);\r\n             FilterProvider filters = new SimpleFilterProvider()\r\n                 .addFilter(&quot;filter properties by field names&quot;,\r\n                     SimpleBeanPropertyFilter.serializeAllExcept(ignoreFieldsArray));\r\n             ObjectWriter writer = mapper.writer().withFilters(filters);\r\n             return writer.writeValueAsString(object);\r\n         } catch (Exception e) {\r\n             //handle exception here\r\n         }\r\n         return &quot;&quot;;\r\n       }\r\n\r\n       public static String createJson(Object object) {\r\n            try {\r\n             ObjectMapper mapper = new ObjectMapper();\r\n             ObjectWriter writer = mapper.writer().withDefaultPrettyPrinter();\r\n             return writer.writeValueAsString(object);\r\n            }catch (Exception e) {\r\n             //handle exception here\r\n            }\r\n            return &quot;&quot;;\r\n       }\r\n     }    \r\n    \r\n    \r\n   ","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>I have created a JsonUtil which can be used to ignore fields at runtime while giving a response. </p>\n\n<p>Example Usage :\n     First argument should be any POJO class (Student) and ignoreFields is comma seperated fields you want to ignore in response. </p>\n\n<pre><code> Student st = new Student();\n createJsonIgnoreFields(st,\"firstname,age\");\n\nimport java.util.logging.Logger;\n\nimport org.codehaus.jackson.map.ObjectMapper;\nimport org.codehaus.jackson.map.ObjectWriter;\nimport org.codehaus.jackson.map.ser.FilterProvider;\nimport org.codehaus.jackson.map.ser.impl.SimpleBeanPropertyFilter;\nimport org.codehaus.jackson.map.ser.impl.SimpleFilterProvider;\n\npublic class JsonUtil {\n\n  public static String createJsonIgnoreFields(Object object, String ignoreFields) {\n     try {\n         ObjectMapper mapper = new ObjectMapper();\n         mapper.getSerializationConfig().addMixInAnnotations(Object.class, JsonPropertyFilterMixIn.class);\n         String[] ignoreFieldsArray = ignoreFields.split(\",\");\n         FilterProvider filters = new SimpleFilterProvider()\n             .addFilter(\"filter properties by field names\",\n                 SimpleBeanPropertyFilter.serializeAllExcept(ignoreFieldsArray));\n         ObjectWriter writer = mapper.writer().withFilters(filters);\n         return writer.writeValueAsString(object);\n     } catch (Exception e) {\n         //handle exception here\n     }\n     return \"\";\n   }\n\n   public static String createJson(Object object) {\n        try {\n         ObjectMapper mapper = new ObjectMapper();\n         ObjectWriter writer = mapper.writer().withDefaultPrettyPrinter();\n         return writer.writeValueAsString(object);\n        }catch (Exception e) {\n         //handle exception here\n        }\n        return \"\";\n   }\n }    \n</code></pre>\n"},{"comments":[{"owner":{"account_id":5730547,"reputation":789,"user_id":4526235,"accept_rate":72,"display_name":"Oleg Kuts"},"score":1,"creation_date":1540479186,"post_id":51990626,"comment_id":92889702,"body_markdown":"@Shafqat Man, thank you so much, you are my savior. Spent almost a day trying to find out this kind of functionality. This solution is so elegant and simple? and does exactly what was requested. Should be marked as the right answer.","body":"@Shafqat Man, thank you so much, you are my savior. Spent almost a day trying to find out this kind of functionality. This solution is so elegant and simple? and does exactly what was requested. Should be marked as the right answer."}],"tags":[],"owner":{"account_id":6718018,"reputation":1158,"user_id":5179190,"accept_rate":29,"display_name":"Shafqat Shafi"},"comment_count":1,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1535042652,"creation_date":1535042652,"answer_id":51990626,"question_id":23101260,"body_markdown":"Yes, you can specify which fields are serialized as JSON response and which to ignore.\r\nThis is what you need to do to implement Dynamically ignore properties.\r\n\r\n1) First, you need to add @JsonFilter from com.fasterxml.jackson.annotation.JsonFilter on your entity class as.\r\n\r\n    import com.fasterxml.jackson.annotation.JsonFilter;\r\n    \r\n    @JsonFilter(&quot;SomeBeanFilter&quot;)\r\n    public class SomeBean {\r\n      \r\n      private String field1;\r\n      \r\n      private String field2;\r\n      \r\n      private String field3;\r\n    \r\n      // getters/setters\r\n    }\r\n\r\n2) Then in your controller, you have to add create the MappingJacksonValue object and set filters on it and in the end, you have to return this object.\r\n\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    import org.springframework.http.converter.json.MappingJacksonValue;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    import com.fasterxml.jackson.databind.ser.FilterProvider;\r\n    import com.fasterxml.jackson.databind.ser.impl.SimpleBeanPropertyFilter;\r\n    import com.fasterxml.jackson.databind.ser.impl.SimpleFilterProvider;\r\n    \r\n    @RestController\r\n    public class FilteringController {\r\n    \r\n      // Here i want to ignore all properties except field1,field2.\r\n      @GetMapping(&quot;/ignoreProperties&quot;)\r\n      public MappingJacksonValue retrieveSomeBean() {\r\n        SomeBean someBean = new SomeBean(&quot;value1&quot;, &quot;value2&quot;, &quot;value3&quot;);\r\n    \r\n        SimpleBeanPropertyFilter filter = SimpleBeanPropertyFilter.filterOutAllExcept(&quot;field1&quot;, &quot;field2&quot;);\r\n    \r\n        FilterProvider filters = new SimpleFilterProvider().addFilter(&quot;SomeBeanFilter&quot;, filter);\r\n    \r\n        MappingJacksonValue mapping = new MappingJacksonValue(someBean);\r\n    \r\n        mapping.setFilters(filters);\r\n    \r\n        return mapping;\r\n      }\r\n    }\r\n\r\n\r\nThis is what you will get in response:\r\n\r\n    {\r\n      field1:&quot;value1&quot;,\r\n      field2:&quot;value2&quot;\r\n    }\r\n\r\ninstead of this:\r\n\r\n    {\r\n      field1:&quot;value1&quot;,\r\n      field2:&quot;value2&quot;,\r\n      field3:&quot;value3&quot;\r\n    }\r\n\r\nHere you can see it ignores other properties(field3 in this case) in response except for property field1 and field2.\r\n\r\nHope this helps.\r\n","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>Yes, you can specify which fields are serialized as JSON response and which to ignore.\nThis is what you need to do to implement Dynamically ignore properties.</p>\n\n<p>1) First, you need to add @JsonFilter from com.fasterxml.jackson.annotation.JsonFilter on your entity class as.</p>\n\n<pre><code>import com.fasterxml.jackson.annotation.JsonFilter;\n\n@JsonFilter(\"SomeBeanFilter\")\npublic class SomeBean {\n\n  private String field1;\n\n  private String field2;\n\n  private String field3;\n\n  // getters/setters\n}\n</code></pre>\n\n<p>2) Then in your controller, you have to add create the MappingJacksonValue object and set filters on it and in the end, you have to return this object.</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.List;\n\nimport org.springframework.http.converter.json.MappingJacksonValue;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.fasterxml.jackson.databind.ser.FilterProvider;\nimport com.fasterxml.jackson.databind.ser.impl.SimpleBeanPropertyFilter;\nimport com.fasterxml.jackson.databind.ser.impl.SimpleFilterProvider;\n\n@RestController\npublic class FilteringController {\n\n  // Here i want to ignore all properties except field1,field2.\n  @GetMapping(\"/ignoreProperties\")\n  public MappingJacksonValue retrieveSomeBean() {\n    SomeBean someBean = new SomeBean(\"value1\", \"value2\", \"value3\");\n\n    SimpleBeanPropertyFilter filter = SimpleBeanPropertyFilter.filterOutAllExcept(\"field1\", \"field2\");\n\n    FilterProvider filters = new SimpleFilterProvider().addFilter(\"SomeBeanFilter\", filter);\n\n    MappingJacksonValue mapping = new MappingJacksonValue(someBean);\n\n    mapping.setFilters(filters);\n\n    return mapping;\n  }\n}\n</code></pre>\n\n<p>This is what you will get in response:</p>\n\n<pre><code>{\n  field1:\"value1\",\n  field2:\"value2\"\n}\n</code></pre>\n\n<p>instead of this:</p>\n\n<pre><code>{\n  field1:\"value1\",\n  field2:\"value2\",\n  field3:\"value3\"\n}\n</code></pre>\n\n<p>Here you can see it ignores other properties(field3 in this case) in response except for property field1 and field2.</p>\n\n<p>Hope this helps.</p>\n"},{"comments":[{"owner":{"account_id":15617631,"reputation":173,"user_id":11267417,"display_name":"kamasuPaul"},"score":0,"creation_date":1684996067,"post_id":52726827,"comment_id":134599531,"body_markdown":"Just incase someone comes looking, I used this to ignore a property sent in the request, but still have in the response. Other solutions like `@JsonIgnore` ignores the property in both the request and response","body":"Just incase someone comes looking, I used this to ignore a property sent in the request, but still have in the response. Other solutions like <code>@JsonIgnore</code> ignores the property in both the request and response"}],"tags":[],"owner":{"account_id":10601072,"reputation":1176,"user_id":7807996,"display_name":"ceekay"},"comment_count":1,"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1539107897,"creation_date":1539107897,"answer_id":52726827,"question_id":23101260,"body_markdown":"We can do this by setting access to `JsonProperty.Access.WRITE_ONLY` while declaring the property.\r\n\r\n    @JsonProperty( value = &quot;password&quot;, access = JsonProperty.Access.WRITE_ONLY)\r\n    @SerializedName(&quot;password&quot;)\r\n    private String password;","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>We can do this by setting access to <code>JsonProperty.Access.WRITE_ONLY</code> while declaring the property.</p>\n\n<pre><code>@JsonProperty( value = \"password\", access = JsonProperty.Access.WRITE_ONLY)\n@SerializedName(\"password\")\nprivate String password;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2233181,"reputation":3815,"user_id":1970299,"accept_rate":72,"display_name":"Mehdi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553565278,"creation_date":1553564953,"answer_id":55348748,"question_id":23101260,"body_markdown":"This is a clean utility tool for the above [answer][1] :\r\n\r\n    @GetMapping(value = &quot;/my-url&quot;)\r\n    public @ResponseBody\r\n    MappingJacksonValue getMyBean() {\r\n        List&lt;MyBean&gt; myBeans = Service.findAll();\r\n        MappingJacksonValue mappingValue = MappingFilterUtils.applyFilter(myBeans, MappingFilterUtils.JsonFilterMode.EXCLUDE_FIELD_MODE, &quot;MyFilterName&quot;, &quot;myBiggerObject.mySmallerObject.mySmallestObject&quot;);\r\n        return mappingValue;\r\n    }\r\n\r\n    //AND THE UTILITY CLASS\r\n    public class MappingFilterUtils {\r\n\r\n        public enum JsonFilterMode {\r\n            INCLUDE_FIELD_MODE, EXCLUDE_FIELD_MODE\r\n        }\r\n        public static MappingJacksonValue applyFilter(Object object, final JsonFilterMode mode, final String filterName, final String... fields) {\r\n            if (fields == null || fields.length == 0) {\r\n                throw new IllegalArgumentException(&quot;You should pass at least one field&quot;);\r\n            }\r\n            return applyFilter(object, mode, filterName, new HashSet&lt;&gt;(Arrays.asList(fields)));\r\n        }\r\n\r\n        public static MappingJacksonValue applyFilter(Object object, final JsonFilterMode mode, final String filterName, final Set&lt;String&gt; fields) {\r\n            if (fields == null || fields.isEmpty()) {\r\n                throw new IllegalArgumentException(&quot;You should pass at least one field&quot;);\r\n            }\r\n\r\n            SimpleBeanPropertyFilter filter = null;\r\n            switch (mode) {\r\n                case EXCLUDE_FIELD_MODE:\r\n                    filter = SimpleBeanPropertyFilter.serializeAllExcept(fields);\r\n                    break;\r\n                case INCLUDE_FIELD_MODE:\r\n                    filter = SimpleBeanPropertyFilter.filterOutAllExcept(fields);\r\n                    break;\r\n            }\r\n\r\n            FilterProvider filters = new SimpleFilterProvider().addFilter(filterName, filter);\r\n            MappingJacksonValue mapping = new MappingJacksonValue(object);\r\n            mapping.setFilters(filters);\r\n            return mapping;\r\n        }\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/a/51990626/1970299","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>This is a clean utility tool for the above <a href=\"https://stackoverflow.com/a/51990626/1970299\">answer</a> :</p>\n\n<pre><code>@GetMapping(value = \"/my-url\")\npublic @ResponseBody\nMappingJacksonValue getMyBean() {\n    List&lt;MyBean&gt; myBeans = Service.findAll();\n    MappingJacksonValue mappingValue = MappingFilterUtils.applyFilter(myBeans, MappingFilterUtils.JsonFilterMode.EXCLUDE_FIELD_MODE, \"MyFilterName\", \"myBiggerObject.mySmallerObject.mySmallestObject\");\n    return mappingValue;\n}\n\n//AND THE UTILITY CLASS\npublic class MappingFilterUtils {\n\n    public enum JsonFilterMode {\n        INCLUDE_FIELD_MODE, EXCLUDE_FIELD_MODE\n    }\n    public static MappingJacksonValue applyFilter(Object object, final JsonFilterMode mode, final String filterName, final String... fields) {\n        if (fields == null || fields.length == 0) {\n            throw new IllegalArgumentException(\"You should pass at least one field\");\n        }\n        return applyFilter(object, mode, filterName, new HashSet&lt;&gt;(Arrays.asList(fields)));\n    }\n\n    public static MappingJacksonValue applyFilter(Object object, final JsonFilterMode mode, final String filterName, final Set&lt;String&gt; fields) {\n        if (fields == null || fields.isEmpty()) {\n            throw new IllegalArgumentException(\"You should pass at least one field\");\n        }\n\n        SimpleBeanPropertyFilter filter = null;\n        switch (mode) {\n            case EXCLUDE_FIELD_MODE:\n                filter = SimpleBeanPropertyFilter.serializeAllExcept(fields);\n                break;\n            case INCLUDE_FIELD_MODE:\n                filter = SimpleBeanPropertyFilter.filterOutAllExcept(fields);\n                break;\n        }\n\n        FilterProvider filters = new SimpleFilterProvider().addFilter(filterName, filter);\n        MappingJacksonValue mapping = new MappingJacksonValue(object);\n        mapping.setFilters(filters);\n        return mapping;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11134043,"reputation":241,"user_id":8173143,"display_name":"foxbit"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1560868035,"creation_date":1560864393,"answer_id":56650264,"question_id":23101260,"body_markdown":"I&#39;ve solved using only `@JsonIgnore` like @kryger has suggested.\r\nSo your getter will become:\r\n\r\n```java\r\n@JsonIgnore\r\npublic String getEncryptedPwd() {\r\n    return this.encryptedPwd;\r\n}\r\n```\r\n\r\nYou can set `@JsonIgnore` of course on field, setter or getter like described [here][1].\r\n\r\nAnd, if you want to protect encrypted password only on serialization side (e.g. when you need to login your users), add this `@JsonProperty` annotation to your **field**:\r\n\r\n```java\r\n@JsonProperty(access = Access.WRITE_ONLY)\r\nprivate String encryptedPwd;\r\n```\r\n\r\nMore info [here][2].\r\n\r\n\r\n  [1]: https://www.concretepage.com/jackson-api/jackson-jsonignore-jsonignoreproperties-and-jsonignoretype#JsonIgnore\r\n  [2]: https://stackoverflow.com/a/12505165/8173143","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>I've solved using only <code>@JsonIgnore</code> like @kryger has suggested.\nSo your getter will become:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@JsonIgnore\npublic String getEncryptedPwd() {\n    return this.encryptedPwd;\n}\n</code></pre>\n\n<p>You can set <code>@JsonIgnore</code> of course on field, setter or getter like described <a href=\"https://www.concretepage.com/jackson-api/jackson-jsonignore-jsonignoreproperties-and-jsonignoretype#JsonIgnore\" rel=\"noreferrer\">here</a>.</p>\n\n<p>And, if you want to protect encrypted password only on serialization side (e.g. when you need to login your users), add this <code>@JsonProperty</code> annotation to your <strong>field</strong>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@JsonProperty(access = Access.WRITE_ONLY)\nprivate String encryptedPwd;\n</code></pre>\n\n<p>More info <a href=\"https://stackoverflow.com/a/12505165/8173143\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":8320526,"reputation":2415,"user_id":6252399,"display_name":"Alan Sereb"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1560865802,"creation_date":1560865802,"answer_id":56650736,"question_id":23101260,"body_markdown":"Place `@JsonIgnore` on the field or its getter, or create a custom dto\r\n\r\n    @JsonIgnore\r\n    private String encryptedPwd;\r\n\r\nor as mentioned above by `ceekay` annotate it with `@JsonProperty` where access attribute is set to write only\r\n    \r\n    @JsonProperty( value = &quot;password&quot;, access = JsonProperty.Access.WRITE_ONLY)\r\n    private String encryptedPwd;","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>Place <code>@JsonIgnore</code> on the field or its getter, or create a custom dto</p>\n\n<pre><code>@JsonIgnore\nprivate String encryptedPwd;\n</code></pre>\n\n<p>or as mentioned above by <code>ceekay</code> annotate it with <code>@JsonProperty</code> where access attribute is set to write only</p>\n\n<pre><code>@JsonProperty( value = \"password\", access = JsonProperty.Access.WRITE_ONLY)\nprivate String encryptedPwd;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6380763,"reputation":9,"user_id":5255286,"display_name":"shivam mishra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1606809505,"creation_date":1606809178,"answer_id":65086591,"question_id":23101260,"body_markdown":"To acheive dynamic filtering follow the link - https://iamvickyav.medium.com/spring-boot-dynamically-ignore-fields-while-converting-java-object-to-json-e8d642088f55\r\n\r\n 1. Add the @JsonFilter(&quot;Filter name&quot;) annotation to the model class.\r\n 2. Inside the controller function add the code:-\r\n\r\n        SimpleBeanPropertyFilter simpleBeanPropertyFilter =\r\n                SimpleBeanPropertyFilter.serializeAllExcept(&quot;id&quot;, &quot;dob&quot;); \r\n\r\n        FilterProvider filterProvider = new SimpleFilterProvider()\r\n                .addFilter(&quot;Filter name&quot;, simpleBeanPropertyFilter);\r\n\r\n        List&lt;User&gt; userList = userService.getAllUsers();\r\n        MappingJacksonValue mappingJacksonValue = new MappingJacksonValue(userList);\r\n        mappingJacksonValue.setFilters(filterProvider);\r\n\r\n        return mappingJacksonValue;\r\n\r\n\r\n 3. make sure the return type is MappingJacksonValue.\n\r\n \r\n\r\n","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>To acheive dynamic filtering follow the link - <a href=\"https://iamvickyav.medium.com/spring-boot-dynamically-ignore-fields-while-converting-java-object-to-json-e8d642088f55\" rel=\"nofollow noreferrer\">https://iamvickyav.medium.com/spring-boot-dynamically-ignore-fields-while-converting-java-object-to-json-e8d642088f55</a></p>\n<ol>\n<li><p>Add the @JsonFilter(&quot;Filter name&quot;) annotation to the model class.</p>\n</li>\n<li><p>Inside the controller function add the code:-</p>\n<pre><code>SimpleBeanPropertyFilter simpleBeanPropertyFilter =\n        SimpleBeanPropertyFilter.serializeAllExcept(&quot;id&quot;, &quot;dob&quot;); \n\nFilterProvider filterProvider = new SimpleFilterProvider()\n        .addFilter(&quot;Filter name&quot;, simpleBeanPropertyFilter);\n\nList&lt;User&gt; userList = userService.getAllUsers();\nMappingJacksonValue mappingJacksonValue = new MappingJacksonValue(userList);\nmappingJacksonValue.setFilters(filterProvider);\n\nreturn mappingJacksonValue;\n</code></pre>\n</li>\n<li><p>make sure the return type is MappingJacksonValue.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":5422342,"reputation":798,"user_id":4315620,"display_name":"Serhat Oz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637270129,"creation_date":1637270129,"answer_id":70026828,"question_id":23101260,"body_markdown":"Hi I have achieved dynamic filtering by using **Gson** library like in the below:\r\n\r\n    JsonObject jsonObj = new Gson().fromJson(mapper.writeValueAsString(sampleObject), JsonObject.class);\r\n    jsonObj.remove(&quot;someProperty&quot;);\r\n    String data = new Gson().toJson(jsonObj);","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>Hi I have achieved dynamic filtering by using <strong>Gson</strong> library like in the below:</p>\n<pre><code>JsonObject jsonObj = new Gson().fromJson(mapper.writeValueAsString(sampleObject), JsonObject.class);\njsonObj.remove(&quot;someProperty&quot;);\nString data = new Gson().toJson(jsonObj);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9382894,"reputation":101,"user_id":8315708,"display_name":"Taras Shpek"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669585527,"creation_date":1669585527,"answer_id":74594018,"question_id":23101260,"body_markdown":" &gt; Can I do it dynamically?\r\n\r\nYes, you can use a combination of Jackson&#39;s **PropertyFilter** and **mixins**.\r\n\r\n## Explanation\r\nJackson has a `PropertyFilter` interface to implement a filter to ignore fields dynamically. The problem is that filter has to be defined on the DTO/POJO class using the `@JsonFilter` annotation.\r\n\r\nTo avoid adding a `@JsonFilter` on class we can use `ObjectMapper`&#39;s `addMixIn` method to *&quot;dynamically&quot;* add this annotation (and leave our DTO/POJO classes as is).\r\n\r\n## Code example\r\nHere is my implementation of the idea provided above. We can call `toJson()` with two arguments: (1) object to be serialized and (2) lambda (Java&#39;s Predicate) to be used in PropertyFilter:\r\n\r\n``` lang-java\r\npublic class JsonService {\r\n\r\n    public String toJson(Object object, Predicate&lt;PropertyWriter&gt; filter) {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        FilterProvider filterProvider = new SimpleFilterProvider()\r\n                .addFilter(&quot;DynamicFilter&quot;, new DynamicFilter(filter));\r\n        mapper.setFilterProvider(filterProvider);\r\n        mapper.addMixIn(object.getClass(), DynamicFilterMixin.class);\r\n        try {\r\n            return mapper.writeValueAsString(object);\r\n        } catch (JsonProcessingException e) {\r\n            throw new MyException(e);\r\n        }\r\n    }\r\n\r\n    private static final class DynamicFilter extends SimpleBeanPropertyFilter {\r\n\r\n        private Predicate&lt;PropertyWriter&gt; filter;\r\n\r\n        private DynamicFilter(Predicate&lt;PropertyWriter&gt; filter) {\r\n            this.filter = filter;\r\n        }\r\n\r\n        protected boolean include(BeanPropertyWriter writer) {\r\n            return include((PropertyWriter) writer);\r\n        }\r\n\r\n        protected boolean include(PropertyWriter writer) {\r\n            return filter.test(writer);\r\n        }\r\n    }\r\n\r\n    @JsonFilter(&quot;DynamicFilter&quot;)\r\n    private interface DynamicFilterMixin {\r\n    }\r\n\r\n}\r\n```\r\n\r\nNow we can call `toJson` and filter fields during a serialization:\r\n1. Filtering by name\r\n``` lang-java\r\nnew JsonService().toJson(object, w -&gt; !w.getName().equals(&quot;fieldNameToBeIgnored&quot;));\r\n```\r\n2. Filtering by annotation (on the field)\r\n``` lang-java\r\nnew JsonService().toJson(object, w -&gt; w.getAnnotation(MyAnnotation.class) == null);\r\n```\r\n\r\n## Unit tests\r\nHere are the unit tests for the class above:\r\n\r\n``` lang-java\r\npublic class JsonServiceTest {\r\n    \r\n    private JsonService jsonService = new JsonService();\r\n    \r\n    @Test\r\n    public void withoutFiltering() {\r\n        MyObject object = getObject();\r\n        String json = jsonService.toJson(object, w -&gt; true);\r\n        assertEquals(&quot;{\\&quot;myString\\&quot;:\\&quot;stringValue\\&quot;,\\&quot;myInteger\\&quot;:10,\\&quot;myBoolean\\&quot;:true}&quot;, json);\r\n    }\r\n\r\n    @Test\r\n    public void filteredByFieldName() {\r\n        MyObject object = getObject();\r\n        String json = jsonService.toJson(object, w -&gt; !w.getName().equals(&quot;myString&quot;));\r\n        assertEquals(&quot;{\\&quot;myInteger\\&quot;:10,\\&quot;myBoolean\\&quot;:true}&quot;, json);\r\n    }\r\n\r\n    @Test\r\n    public void filteredByAnnotation() {\r\n        MyObject object = getObject();\r\n        String json = jsonService.toJson(object, w -&gt; w.getAnnotation(Deprecated.class) == null);\r\n        assertEquals(&quot;{\\&quot;myString\\&quot;:\\&quot;stringValue\\&quot;,\\&quot;myInteger\\&quot;:10}&quot;, json);\r\n    }\r\n    \r\n    private MyObject getObject() {\r\n        MyObject object = new MyObject();\r\n        object.myString = &quot;stringValue&quot;;\r\n        object.myInteger = 10;\r\n        object.myBoolean = true;\r\n        return object;\r\n    }\r\n    \r\n    private static class MyObject {\r\n        private String myString;\r\n        private int myInteger;\r\n        @Deprecated\r\n        private boolean myBoolean;\r\n\r\n        public String getMyString() {\r\n            return myString;\r\n        }\r\n\r\n        public void setMyString(String myString) {\r\n            this.myString = myString;\r\n        }\r\n\r\n        public int getMyInteger() {\r\n            return myInteger;\r\n        }\r\n\r\n        public void setMyInteger(int myInteger) {\r\n            this.myInteger = myInteger;\r\n        }\r\n\r\n        public boolean isMyBoolean() {\r\n            return myBoolean;\r\n        }\r\n\r\n        public void setMyBoolean(boolean myBoolean) {\r\n            this.myBoolean = myBoolean;\r\n        }\r\n    }\r\n\r\n}\r\n```","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<blockquote>\n<p>Can I do it dynamically?</p>\n</blockquote>\n<p>Yes, you can use a combination of Jackson's <strong>PropertyFilter</strong> and <strong>mixins</strong>.</p>\n<h2>Explanation</h2>\n<p>Jackson has a <code>PropertyFilter</code> interface to implement a filter to ignore fields dynamically. The problem is that filter has to be defined on the DTO/POJO class using the <code>@JsonFilter</code> annotation.</p>\n<p>To avoid adding a <code>@JsonFilter</code> on class we can use <code>ObjectMapper</code>'s <code>addMixIn</code> method to <em>&quot;dynamically&quot;</em> add this annotation (and leave our DTO/POJO classes as is).</p>\n<h2>Code example</h2>\n<p>Here is my implementation of the idea provided above. We can call <code>toJson()</code> with two arguments: (1) object to be serialized and (2) lambda (Java's Predicate) to be used in PropertyFilter:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class JsonService {\n\n    public String toJson(Object object, Predicate&lt;PropertyWriter&gt; filter) {\n        ObjectMapper mapper = new ObjectMapper();\n        FilterProvider filterProvider = new SimpleFilterProvider()\n                .addFilter(&quot;DynamicFilter&quot;, new DynamicFilter(filter));\n        mapper.setFilterProvider(filterProvider);\n        mapper.addMixIn(object.getClass(), DynamicFilterMixin.class);\n        try {\n            return mapper.writeValueAsString(object);\n        } catch (JsonProcessingException e) {\n            throw new MyException(e);\n        }\n    }\n\n    private static final class DynamicFilter extends SimpleBeanPropertyFilter {\n\n        private Predicate&lt;PropertyWriter&gt; filter;\n\n        private DynamicFilter(Predicate&lt;PropertyWriter&gt; filter) {\n            this.filter = filter;\n        }\n\n        protected boolean include(BeanPropertyWriter writer) {\n            return include((PropertyWriter) writer);\n        }\n\n        protected boolean include(PropertyWriter writer) {\n            return filter.test(writer);\n        }\n    }\n\n    @JsonFilter(&quot;DynamicFilter&quot;)\n    private interface DynamicFilterMixin {\n    }\n\n}\n</code></pre>\n<p>Now we can call <code>toJson</code> and filter fields during a serialization:</p>\n<ol>\n<li>Filtering by name</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>new JsonService().toJson(object, w -&gt; !w.getName().equals(&quot;fieldNameToBeIgnored&quot;));\n</code></pre>\n<ol start=\"2\">\n<li>Filtering by annotation (on the field)</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>new JsonService().toJson(object, w -&gt; w.getAnnotation(MyAnnotation.class) == null);\n</code></pre>\n<h2>Unit tests</h2>\n<p>Here are the unit tests for the class above:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class JsonServiceTest {\n    \n    private JsonService jsonService = new JsonService();\n    \n    @Test\n    public void withoutFiltering() {\n        MyObject object = getObject();\n        String json = jsonService.toJson(object, w -&gt; true);\n        assertEquals(&quot;{\\&quot;myString\\&quot;:\\&quot;stringValue\\&quot;,\\&quot;myInteger\\&quot;:10,\\&quot;myBoolean\\&quot;:true}&quot;, json);\n    }\n\n    @Test\n    public void filteredByFieldName() {\n        MyObject object = getObject();\n        String json = jsonService.toJson(object, w -&gt; !w.getName().equals(&quot;myString&quot;));\n        assertEquals(&quot;{\\&quot;myInteger\\&quot;:10,\\&quot;myBoolean\\&quot;:true}&quot;, json);\n    }\n\n    @Test\n    public void filteredByAnnotation() {\n        MyObject object = getObject();\n        String json = jsonService.toJson(object, w -&gt; w.getAnnotation(Deprecated.class) == null);\n        assertEquals(&quot;{\\&quot;myString\\&quot;:\\&quot;stringValue\\&quot;,\\&quot;myInteger\\&quot;:10}&quot;, json);\n    }\n    \n    private MyObject getObject() {\n        MyObject object = new MyObject();\n        object.myString = &quot;stringValue&quot;;\n        object.myInteger = 10;\n        object.myBoolean = true;\n        return object;\n    }\n    \n    private static class MyObject {\n        private String myString;\n        private int myInteger;\n        @Deprecated\n        private boolean myBoolean;\n\n        public String getMyString() {\n            return myString;\n        }\n\n        public void setMyString(String myString) {\n            this.myString = myString;\n        }\n\n        public int getMyInteger() {\n            return myInteger;\n        }\n\n        public void setMyInteger(int myInteger) {\n            this.myInteger = myInteger;\n        }\n\n        public boolean isMyBoolean() {\n            return myBoolean;\n        }\n\n        public void setMyBoolean(boolean myBoolean) {\n            this.myBoolean = myBoolean;\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12211707,"reputation":367,"user_id":8913302,"display_name":"Johan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695260467,"creation_date":1695260467,"answer_id":77146739,"question_id":23101260,"body_markdown":"Simply create new dto class without field password.\r\n\r\n    class UserDto {\r\n          // ... your field without password field\r\n    }\r\n\r\nconvert your User.java into UserDto.java on response.\r\n\r\n","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>Simply create new dto class without field password.</p>\n<pre><code>class UserDto {\n      // ... your field without password field\n}\n</code></pre>\n<p>convert your User.java into UserDto.java on response.</p>\n"}],"owner":{"account_id":2518869,"reputation":8932,"user_id":2189617,"accept_rate":68,"display_name":"iCode"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":402978,"favorite_count":0,"down_vote_count":0,"up_vote_count":150,"answer_count":18,"score":150,"last_activity_date":1695260467,"creation_date":1397628318,"question_id":23101260,"body_markdown":"I have model class like this, for hibernate\r\n\r\n    @Entity\r\n    @Table(name = &quot;user&quot;, catalog = &quot;userdb&quot;)\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class User implements java.io.Serializable {\r\n    \r\n    \tprivate Integer userId;\r\n    \tprivate String userName;\r\n    \tprivate String emailId;\r\n    \tprivate String encryptedPwd;\r\n    \tprivate String createdBy;\r\n    \tprivate String updatedBy;\r\n    \r\n    \t@Id\r\n    \t@GeneratedValue(strategy = IDENTITY)\r\n    \t@Column(name = &quot;UserId&quot;, unique = true, nullable = false)\r\n    \tpublic Integer getUserId() {\r\n    \t\treturn this.userId;\r\n    \t}\r\n    \r\n    \tpublic void setUserId(Integer userId) {\r\n    \t\tthis.userId = userId;\r\n    \t}\r\n    \r\n    \t@Column(name = &quot;UserName&quot;, length = 100)\r\n    \tpublic String getUserName() {\r\n    \t\treturn this.userName;\r\n    \t}\r\n    \r\n    \tpublic void setUserName(String userName) {\r\n    \t\tthis.userName = userName;\r\n    \t}\r\n    \r\n    \t@Column(name = &quot;EmailId&quot;, nullable = false, length = 45)\r\n    \tpublic String getEmailId() {\r\n    \t\treturn this.emailId;\r\n    \t}\r\n    \r\n    \tpublic void setEmailId(String emailId) {\r\n    \t\tthis.emailId = emailId;\r\n    \t}\r\n    \r\n    \t@Column(name = &quot;EncryptedPwd&quot;, length = 100)\r\n    \tpublic String getEncryptedPwd() {\r\n    \t\treturn this.encryptedPwd;\r\n    \t}\r\n    \r\n    \tpublic void setEncryptedPwd(String encryptedPwd) {\r\n    \t\tthis.encryptedPwd = encryptedPwd;\r\n    \t}\r\n    \r\n    \tpublic void setCreatedBy(String createdBy) {\r\n    \t\tthis.createdBy = createdBy;\r\n    \t}\r\n    \r\n    \t@Column(name = &quot;UpdatedBy&quot;, length = 100)\r\n    \tpublic String getUpdatedBy() {\r\n    \t\treturn this.updatedBy;\r\n    \t}\r\n    \r\n    \tpublic void setUpdatedBy(String updatedBy) {\r\n    \t\tthis.updatedBy = updatedBy;\r\n    \t}\r\n    }\r\n\r\n\r\nIn Spring MVC controller, using DAO, I am able to get the object. and returning as JSON Object.\r\n\r\n    @Controller\r\n    public class UserController {\r\n    \r\n    \t@Autowired\r\n    \tprivate UserService userService;\r\n    \r\n    \t@RequestMapping(value = &quot;/getUser/{userId}&quot;, method = RequestMethod.GET)\r\n    \t@ResponseBody\r\n    \tpublic User getUser(@PathVariable Integer userId) throws Exception {\r\n    \r\n    \t\tUser user = userService.get(userId);\r\n    \t\tuser.setCreatedBy(null);\r\n    \t\tuser.setUpdatedBy(null);\r\n    \t\treturn user;\r\n    \t}\r\n    }\r\n\r\nView part is done using AngularJS, so it will get JSON like this\r\n\r\n    {\r\n      &quot;userId&quot; :2,\r\n      &quot;userName&quot; : &quot;john&quot;,\r\n      &quot;emailId&quot; : &quot;john@gmail.com&quot;,\r\n      &quot;encryptedPwd&quot; : &quot;Co7Fwd1fXYk=&quot;,\r\n      &quot;createdBy&quot; : null,\r\n      &quot;updatedBy&quot; : null\r\n    }\r\n\r\nIf I don&#39;t want to set encrypted Password, I will set that field also as null.\r\n\r\nBut I don&#39;t want like this, I dont want to send all fields to client side. If I dont want password, updatedby, createdby fields to send, My result JSON should be like\r\n\r\n    {\r\n      &quot;userId&quot; :2,\r\n      &quot;userName&quot; : &quot;john&quot;,\r\n      &quot;emailId&quot; : &quot;john@gmail.com&quot;\r\n    }\r\n\r\nThe list of fields which I don&#39;t want to send to client coming from other database table. So it will change based on the user who is logged in.  How can I do that?\r\n\r\nI hope You got my question. \r\n\r\n","title":"Ignore fields from Java object dynamically while sending as JSON from Spring MVC","body":"<p>I have model class like this, for hibernate</p>\n\n<pre><code>@Entity\n@Table(name = \"user\", catalog = \"userdb\")\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class User implements java.io.Serializable {\n\n    private Integer userId;\n    private String userName;\n    private String emailId;\n    private String encryptedPwd;\n    private String createdBy;\n    private String updatedBy;\n\n    @Id\n    @GeneratedValue(strategy = IDENTITY)\n    @Column(name = \"UserId\", unique = true, nullable = false)\n    public Integer getUserId() {\n        return this.userId;\n    }\n\n    public void setUserId(Integer userId) {\n        this.userId = userId;\n    }\n\n    @Column(name = \"UserName\", length = 100)\n    public String getUserName() {\n        return this.userName;\n    }\n\n    public void setUserName(String userName) {\n        this.userName = userName;\n    }\n\n    @Column(name = \"EmailId\", nullable = false, length = 45)\n    public String getEmailId() {\n        return this.emailId;\n    }\n\n    public void setEmailId(String emailId) {\n        this.emailId = emailId;\n    }\n\n    @Column(name = \"EncryptedPwd\", length = 100)\n    public String getEncryptedPwd() {\n        return this.encryptedPwd;\n    }\n\n    public void setEncryptedPwd(String encryptedPwd) {\n        this.encryptedPwd = encryptedPwd;\n    }\n\n    public void setCreatedBy(String createdBy) {\n        this.createdBy = createdBy;\n    }\n\n    @Column(name = \"UpdatedBy\", length = 100)\n    public String getUpdatedBy() {\n        return this.updatedBy;\n    }\n\n    public void setUpdatedBy(String updatedBy) {\n        this.updatedBy = updatedBy;\n    }\n}\n</code></pre>\n\n<p>In Spring MVC controller, using DAO, I am able to get the object. and returning as JSON Object.</p>\n\n<pre><code>@Controller\npublic class UserController {\n\n    @Autowired\n    private UserService userService;\n\n    @RequestMapping(value = \"/getUser/{userId}\", method = RequestMethod.GET)\n    @ResponseBody\n    public User getUser(@PathVariable Integer userId) throws Exception {\n\n        User user = userService.get(userId);\n        user.setCreatedBy(null);\n        user.setUpdatedBy(null);\n        return user;\n    }\n}\n</code></pre>\n\n<p>View part is done using AngularJS, so it will get JSON like this</p>\n\n<pre><code>{\n  \"userId\" :2,\n  \"userName\" : \"john\",\n  \"emailId\" : \"john@gmail.com\",\n  \"encryptedPwd\" : \"Co7Fwd1fXYk=\",\n  \"createdBy\" : null,\n  \"updatedBy\" : null\n}\n</code></pre>\n\n<p>If I don't want to set encrypted Password, I will set that field also as null.</p>\n\n<p>But I don't want like this, I dont want to send all fields to client side. If I dont want password, updatedby, createdby fields to send, My result JSON should be like</p>\n\n<pre><code>{\n  \"userId\" :2,\n  \"userName\" : \"john\",\n  \"emailId\" : \"john@gmail.com\"\n}\n</code></pre>\n\n<p>The list of fields which I don't want to send to client coming from other database table. So it will change based on the user who is logged in.  How can I do that?</p>\n\n<p>I hope You got my question. </p>\n"},{"tags":["java","jvm","jmx"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1695247181,"post_id":77146110,"comment_id":136000654,"body_markdown":"Doesn&#39;t seem so: https://stackoverflow.com/questions/4469774/how-to-change-java-properties-at-runtime","body":"Doesn&#39;t seem so: <a href=\"https://stackoverflow.com/questions/4469774/how-to-change-java-properties-at-runtime\" title=\"how to change java properties at runtime\">stackoverflow.com/questions/4469774/&hellip;</a>"},{"owner":{"account_id":5175809,"reputation":1052,"user_id":4142984,"accept_rate":83,"display_name":"Gyro Gearloose"},"score":0,"creation_date":1695247821,"post_id":77146110,"comment_id":136000726,"body_markdown":"Seeing the link that @shmosel provided, the least dirty thing you can do is to store your properties in an external file that your program reads  actively when appropriate.","body":"Seeing the link that @shmosel provided, the least dirty thing you can do is to store your properties in an external file that your program reads  actively when appropriate."},{"owner":{"account_id":1693760,"reputation":9824,"user_id":1555615,"accept_rate":62,"display_name":"Marinos An"},"score":0,"creation_date":1695247954,"post_id":77146110,"comment_id":136000739,"body_markdown":"@GyroGearloose This requires updating the application code, which is not an option as noted on my question.","body":"@GyroGearloose This requires updating the application code, which is not an option as noted on my question."},{"owner":{"account_id":5175809,"reputation":1052,"user_id":4142984,"accept_rate":83,"display_name":"Gyro Gearloose"},"score":0,"creation_date":1695248382,"post_id":77146110,"comment_id":136000795,"body_markdown":"The update of the code would be necessary only once, from then on the code could check on the property-file all for itself. But if your&#39;e not the owner of the code, then your out of luck and options. But if so, this is someone else&#39;s problem, not yours.","body":"The update of the code would be necessary only once, from then on the code could check on the property-file all for itself. But if your&#39;e not the owner of the code, then your out of luck and options. But if so, this is someone else&#39;s problem, not yours."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1695257016,"post_id":77146110,"comment_id":136001528,"body_markdown":"Does this answer your question? [How to change Java properties at runtime?](https://stackoverflow.com/questions/4469774/how-to-change-java-properties-at-runtime)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/4469774/how-to-change-java-properties-at-runtime\">How to change Java properties at runtime?</a>"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1695257049,"post_id":77146110,"comment_id":136001533,"body_markdown":"This is a duplicate question, please close it","body":"This is a duplicate question, please close it"},{"owner":{"account_id":1693760,"reputation":9824,"user_id":1555615,"accept_rate":62,"display_name":"Marinos An"},"score":1,"creation_date":1695261129,"post_id":77146110,"comment_id":136001855,"body_markdown":"@GyroGearloose &quot;But if your&#39;e not the owner of the code, then your out of luck and options&quot;. Not really. See the accepted answer.","body":"@GyroGearloose &quot;But if your&#39;e not the owner of the code, then your out of luck and options&quot;. Not really. See the accepted answer."}],"answers":[{"comments":[{"owner":{"account_id":1693760,"reputation":9824,"user_id":1555615,"accept_rate":62,"display_name":"Marinos An"},"score":0,"creation_date":1695258660,"post_id":77146654,"comment_id":136001668,"body_markdown":"Nice! This elegant solution is what I was looking for. After some research I was also ready to post a similar answer but I missed the`SetProperty.class.getProtectionDomain().getCodeSource().getLocation().toString()` to get the jar path.","body":"Nice! This elegant solution is what I was looking for. After some research I was also ready to post a similar answer but I missed the<code>SetProperty.class.getProtectionDomain().getCodeSource().g&zwnj;&#8203;etLocation().toStrin&zwnj;&#8203;g()</code> to get the jar path."},{"owner":{"account_id":1693760,"reputation":9824,"user_id":1555615,"accept_rate":62,"display_name":"Marinos An"},"score":0,"creation_date":1695259076,"post_id":77146654,"comment_id":136001703,"body_markdown":"I think a drawback is that you cannot easily unload the agent, so next time you need to change a system property value you will need to load a second agent instance e.t.c. Perhaps an improvement could be that the agent accepts a `system-properties-overrides` .properties file as an option , watches it for changes and updates the corresponding system properties accordingly.","body":"I think a drawback is that you cannot easily unload the agent, so next time you need to change a system property value you will need to load a second agent instance e.t.c. Perhaps an improvement could be that the agent accepts a <code>system-properties-overrides</code> .properties file as an option , watches it for changes and updates the corresponding system properties accordingly."},{"owner":{"account_id":5175809,"reputation":1052,"user_id":4142984,"accept_rate":83,"display_name":"Gyro Gearloose"},"score":0,"creation_date":1695310301,"post_id":77146654,"comment_id":136010214,"body_markdown":"On my system I can&#39;t find neither tools.jar nor can I import VirtualMachine via eclipse ... . Still I can compile and run your example on the command line. Looks this is a very different problem local to my machine. Thanks a lot for the solution!","body":"On my system I can&#39;t find neither tools.jar nor can I import VirtualMachine via eclipse ... . Still I can compile and run your example on the command line. Looks this is a very different problem local to my machine. Thanks a lot for the solution!"},{"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1695314101,"post_id":77146654,"comment_id":136011051,"body_markdown":"@MarinosAn There is no problem in setting multiple properties. You *can* attach the same agent as many times as needed. It will be loaded only once, but `agentmain` will execute each time with new arguments.","body":"@MarinosAn There is no problem in setting multiple properties. You <i>can</i> attach the same agent as many times as needed. It will be loaded only once, but <code>agentmain</code> will execute each time with new arguments."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1695314468,"post_id":77146654,"comment_id":136011122,"body_markdown":"Instead of calling `toString()` on a `URL` and doing this magic `int startIndex = &quot;\\\\&quot;.equals(System.getProperty(&quot;file.separator&quot;)) ? 6 : 5;`  `url.substring(startIndex)` Id rather convert the `URL` to a file using `Paths.get(url.toURI()).toString()` which is simpler and more reliable. Its also worth noting that there are plans to disable dynamic agent loading by default, so for future Java versions, dynamic attach has to be enabled via the command line option `-XX:+EnableDynamicAgentLoading` at startup.","body":"Instead of calling <code>toString()</code> on a <code>URL</code> and doing this magic <code>int startIndex = &quot;\\\\&quot;.equals(System.getProperty(&quot;file.separator&quot;)) ? 6 : 5;</code>  <code>url.substring(startIndex)</code> Id rather convert the <code>URL</code> to a file using <code>Paths.get(url.toURI()).toString()</code> which is simpler and more reliable. Its also worth noting that there are plans to disable dynamic agent loading by default, so for future Java versions, dynamic attach has to be enabled via the command line option <code>-XX:+EnableDynamicAgentLoading</code> at startup."}],"tags":[],"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"comment_count":5,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1695258296,"creation_date":1695258296,"answer_id":77146654,"question_id":77146110,"body_markdown":"The idea is to attach an agent that calls `System.setProperty` to a running application.  \r\n**Note:** this does not require modifying application code.\r\n\r\nHere is the agent code:\r\n```\r\nimport com.sun.tools.attach.VirtualMachine;\r\n\r\npublic class SetProperty {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        String url = SetProperty.class.getProtectionDomain().getCodeSource().getLocation().toString();\r\n        if (args.length &lt; 2 || !url.startsWith(&quot;file:&quot;)) {\r\n            System.out.println(&quot;Usage: java -jar setproperty.jar pid property=value&quot;);\r\n            System.exit(1);\r\n        }\r\n\r\n        VirtualMachine vm = VirtualMachine.attach(args[0]);\r\n        try {\r\n            int startIndex = &quot;\\\\&quot;.equals(System.getProperty(&quot;file.separator&quot;)) ? 6 : 5;\r\n            vm.loadAgent(url.substring(startIndex), args[1]);\r\n        } finally {\r\n            vm.detach();\r\n        }\r\n    }\r\n\r\n    public static void agentmain(String args) {\r\n        int eq = args.indexOf(&#39;=&#39;);\r\n        System.setProperty(args.substring(0, eq), args.substring(eq + 1));\r\n    }\r\n}\r\n```\r\n\r\n1. Compile the source code:\r\n```\r\njavac -source 8 -taraget 8 SetProperty.java\r\n```\r\n2. Create `MANIFEST.MF` file with the following contents:\r\n```\r\nMain-Class: SetProperty\r\nAgent-Class: SetProperty\r\n```\r\n3. Build .jar file from the compiled sources and the manifest:\r\n```\r\njar cfm setproperty.jar MANIFEST.MF SetProperty.class \r\n```\r\n4. Launch the agent passing the target process ID and the property to set (JDK 9+):\r\n```\r\njava -jar setproperty.jar 1234 MyProperty=SomeValue\r\n```\r\nIf you are using JDK 8, you&#39;ll need to add `tools.jar` to the class path:\r\n```\r\njava -cp setproperty.jar:$JAVA_HOME/lib/tools.jar SetProperty 1234 MyProperty=SomeValue\r\n```\r\n\r\nI prepared [setproperty.jar](https://profiler.tools/misc/setproperty.jar) so you can skip steps 1-3 and proceed directly to the final command.","title":"How can I dynamically set a System property on the JVM, after it has started, without modifying my program&#39;s code?","body":"<p>The idea is to attach an agent that calls <code>System.setProperty</code> to a running application.<br />\n<strong>Note:</strong> this does not require modifying application code.</p>\n<p>Here is the agent code:</p>\n<pre><code>import com.sun.tools.attach.VirtualMachine;\n\npublic class SetProperty {\n\n    public static void main(String[] args) throws Exception {\n        String url = SetProperty.class.getProtectionDomain().getCodeSource().getLocation().toString();\n        if (args.length &lt; 2 || !url.startsWith(&quot;file:&quot;)) {\n            System.out.println(&quot;Usage: java -jar setproperty.jar pid property=value&quot;);\n            System.exit(1);\n        }\n\n        VirtualMachine vm = VirtualMachine.attach(args[0]);\n        try {\n            int startIndex = &quot;\\\\&quot;.equals(System.getProperty(&quot;file.separator&quot;)) ? 6 : 5;\n            vm.loadAgent(url.substring(startIndex), args[1]);\n        } finally {\n            vm.detach();\n        }\n    }\n\n    public static void agentmain(String args) {\n        int eq = args.indexOf('=');\n        System.setProperty(args.substring(0, eq), args.substring(eq + 1));\n    }\n}\n</code></pre>\n<ol>\n<li>Compile the source code:</li>\n</ol>\n<pre><code>javac -source 8 -taraget 8 SetProperty.java\n</code></pre>\n<ol start=\"2\">\n<li>Create <code>MANIFEST.MF</code> file with the following contents:</li>\n</ol>\n<pre><code>Main-Class: SetProperty\nAgent-Class: SetProperty\n</code></pre>\n<ol start=\"3\">\n<li>Build .jar file from the compiled sources and the manifest:</li>\n</ol>\n<pre><code>jar cfm setproperty.jar MANIFEST.MF SetProperty.class \n</code></pre>\n<ol start=\"4\">\n<li>Launch the agent passing the target process ID and the property to set (JDK 9+):</li>\n</ol>\n<pre><code>java -jar setproperty.jar 1234 MyProperty=SomeValue\n</code></pre>\n<p>If you are using JDK 8, you'll need to add <code>tools.jar</code> to the class path:</p>\n<pre><code>java -cp setproperty.jar:$JAVA_HOME/lib/tools.jar SetProperty 1234 MyProperty=SomeValue\n</code></pre>\n<p>I prepared <a href=\"https://profiler.tools/misc/setproperty.jar\" rel=\"nofollow noreferrer\">setproperty.jar</a> so you can skip steps 1-3 and proceed directly to the final command.</p>\n"}],"owner":{"account_id":1693760,"reputation":9824,"user_id":1555615,"accept_rate":62,"display_name":"Marinos An"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":213,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77146654,"answer_count":1,"score":1,"last_activity_date":1695258296,"creation_date":1695246976,"question_id":77146110,"body_markdown":"I would like to be able to change a system property while a java application is running inside an application server. I know that this can be done with `java.lang.System.setProperty` or by adding the `-DpropertyName=value` as a JVM flag. \r\n\r\nBut I want to do this at runtime and without modifying the application code.\r\n\r\nIs there a tool that can change system properties in the JVM at runtime without having to update the application-code ( e.g. just by attaching a tool the running process or by using JMX ) ?","title":"How can I dynamically set a System property on the JVM, after it has started, without modifying my program&#39;s code?","body":"<p>I would like to be able to change a system property while a java application is running inside an application server. I know that this can be done with <code>java.lang.System.setProperty</code> or by adding the <code>-DpropertyName=value</code> as a JVM flag.</p>\n<p>But I want to do this at runtime and without modifying the application code.</p>\n<p>Is there a tool that can change system properties in the JVM at runtime without having to update the application-code ( e.g. just by attaching a tool the running process or by using JMX ) ?</p>\n"},{"tags":["java","sockets","debugging","intellij-idea","virtual-machine"],"comments":[{"owner":{"account_id":2399674,"reputation":2691,"user_id":2097675,"display_name":"JJF"},"score":1,"creation_date":1457794706,"post_id":35954997,"comment_id":59573685,"body_markdown":"That&#39;s the message you would see if the debugee VM exits.","body":"That&#39;s the message you would see if the debugee VM exits."}],"answers":[{"tags":[],"owner":{"account_id":2028664,"reputation":6942,"user_id":1812993,"accept_rate":80,"display_name":"melchoir55"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1477108988,"creation_date":1477108988,"answer_id":40188187,"question_id":35954997,"body_markdown":"This is probably normal behavior. If you are experiencing an error such as an exception then you should also see a stack trace in there. If not, it is possible that you are catching and silently eating the exception.","title":"Disconnected from the target VM","body":"<p>This is probably normal behavior. If you are experiencing an error such as an exception then you should also see a stack trace in there. If not, it is possible that you are catching and silently eating the exception.</p>\n"}],"owner":{"account_id":2808137,"reputation":35560,"user_id":2414957,"accept_rate":61,"display_name":"Mona Jalal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12373,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1695258160,"creation_date":1457767827,"question_id":35954997,"body_markdown":"Sometimes when I press on the debug button in IntelliJ I receive the following and can&#39;t debug as a result. I wonder what could be wrong and how that can be fixed?\r\n\r\n    /Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/bin/java -agentlib:jdwp=transport=dt_socket,address=127.0.0.1:59089,suspend=y,server=n -Dfile.encoding=UTF-8 -classpath &quot;/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/ant-javafx.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/dt.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/javafx-doclet.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/javafx-mx.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/jconsole.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/sa-jdi.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/tools.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/charsets.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/deploy.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/htmlconverter.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/javaws.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/jce.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/jfr.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/jfxrt.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/jsse.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/management-agent.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/plugin.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/resources.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/rt.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/dnsns.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/localedata.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/sunec.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/sunjce_provider.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/sunpkcs11.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/zipfs.jar:/Users/mona/IdeaProjects/testJ/out/production/testJ:/Applications/IntelliJ IDEA 14 CE.app/Contents/lib/idea_rt.jar&quot; PeakElementLog\r\n    Connected to the target VM, address: &#39;127.0.0.1:59089&#39;, transport: &#39;socket&#39;\r\n    Disconnected from the target VM, address: &#39;127.0.0.1:59089&#39;, transport: &#39;socket&#39;","title":"Disconnected from the target VM","body":"<p>Sometimes when I press on the debug button in IntelliJ I receive the following and can't debug as a result. I wonder what could be wrong and how that can be fixed?</p>\n\n<pre><code>/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/bin/java -agentlib:jdwp=transport=dt_socket,address=127.0.0.1:59089,suspend=y,server=n -Dfile.encoding=UTF-8 -classpath \"/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/ant-javafx.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/dt.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/javafx-doclet.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/javafx-mx.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/jconsole.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/sa-jdi.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/lib/tools.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/charsets.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/deploy.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/htmlconverter.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/javaws.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/jce.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/jfr.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/jfxrt.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/jsse.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/management-agent.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/plugin.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/resources.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/rt.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/dnsns.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/localedata.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/sunec.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/sunjce_provider.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/sunpkcs11.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/jre/lib/ext/zipfs.jar:/Users/mona/IdeaProjects/testJ/out/production/testJ:/Applications/IntelliJ IDEA 14 CE.app/Contents/lib/idea_rt.jar\" PeakElementLog\nConnected to the target VM, address: '127.0.0.1:59089', transport: 'socket'\nDisconnected from the target VM, address: '127.0.0.1:59089', transport: 'socket'\n</code></pre>\n"},{"tags":["java","data-conversion","java.util.date"],"comments":[{"owner":{"account_id":198346,"reputation":20665,"user_id":442945,"accept_rate":77,"display_name":"Nathaniel Ford"},"score":2,"creation_date":1340128391,"post_id":11106532,"comment_id":14547599,"body_markdown":"Out of curiosity, does the API require any number of seconds? Or seconds from a particular epoch? Because if it will accept and work with any int of seconds, just take the seconds value from your date variable.","body":"Out of curiosity, does the API require any number of seconds? Or seconds from a particular epoch? Because if it will accept and work with any int of seconds, just take the seconds value from your date variable."},{"owner":{"account_id":97082,"reputation":375036,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"score":4,"creation_date":1340128507,"post_id":11106532,"comment_id":14547649,"body_markdown":"the `getTime()` methods returns the milliseconds since Epoch. Divide by 1000 to have seconds.","body":"the <code>getTime()</code> methods returns the milliseconds since Epoch. Divide by 1000 to have seconds."},{"owner":{"account_id":72575,"reputation":40794,"user_id":209513,"accept_rate":100,"display_name":"Subhrajyoti Majumder"},"score":0,"creation_date":1340128522,"post_id":11106532,"comment_id":14547661,"body_markdown":"check [getTime](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#getTime()) mehod in util.Date class.","body":"check <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#getTime()\" rel=\"nofollow noreferrer\">getTime</a> mehod in util.Date class."},{"owner":{"account_id":188548,"reputation":55127,"user_id":427309,"accept_rate":95,"display_name":"Richard J. Ross III"},"score":2,"creation_date":1340192957,"post_id":11106532,"comment_id":14567474,"body_markdown":"I don&#39;t understand the downvotes &amp; flags here. It&#39;s a completely readable, on-topic question, with a concrete answer!","body":"I don&#39;t understand the downvotes &amp; flags here. It&#39;s a completely readable, on-topic question, with a concrete answer!"}],"answers":[{"tags":[],"owner":{"account_id":1555969,"reputation":1786,"user_id":1447481,"display_name":"Karthik Kumar Viswanathan"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1695257513,"creation_date":1340128717,"answer_id":11106619,"question_id":11106532,"body_markdown":"    import java.util.Date;\r\n    \r\n    ...\r\n    long secs = (new Date().getTime())/1000;\r\n    ...\r\n\r\nPlease see:\r\nhttp://docs.oracle.com/javase/6/docs/api/java/util/Date.html#getTime().","title":"Get date representation in seconds?","body":"<pre><code>import java.util.Date;\n\n...\nlong secs = (new Date().getTime())/1000;\n...\n</code></pre>\n<p>Please see:\n<a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#getTime()\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#getTime()</a>.</p>\n"},{"tags":[],"owner":{"account_id":72575,"reputation":40794,"user_id":209513,"accept_rate":100,"display_name":"Subhrajyoti Majumder"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1695257750,"creation_date":1340128731,"answer_id":11106622,"question_id":11106532,"body_markdown":"`java.util.Date.getTime()` it returns the number of milliseconds since January 1, 1970, 00:00:00 GMT represented by this Date object:\r\n\r\n    java.util.Date date = new Date();\r\n    System.out.println(date.getTime());\r\n\r\n*Output*:\r\n1340128712111\r\n\r\nTo get seconds from milliseconds you need to divide it by `1000`:\r\n\r\n    long secs = date.getTime()/1000;\r\n    System.out.println(secs);\r\n\r\n*Output*:\r\n1340128712\r\n\r\nAlternatively `Instant.getEpochSecond()` returns the number of seconds from the Java epoch of 1970-01-01T00:00:00Z. Its available since Java v1.8 [docs][1].\r\n\r\n\r\n[1]: https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#getEpochSecond--","title":"Get date representation in seconds?","body":"<p><code>java.util.Date.getTime()</code> it returns the number of milliseconds since January 1, 1970, 00:00:00 GMT represented by this Date object:</p>\n<pre><code>java.util.Date date = new Date();\nSystem.out.println(date.getTime());\n</code></pre>\n<p><em>Output</em>:\n1340128712111</p>\n<p>To get seconds from milliseconds you need to divide it by <code>1000</code>:</p>\n<pre><code>long secs = date.getTime()/1000;\nSystem.out.println(secs);\n</code></pre>\n<p><em>Output</em>:\n1340128712</p>\n<p>Alternatively <code>Instant.getEpochSecond()</code> returns the number of seconds from the Java epoch of 1970-01-01T00:00:00Z. Its available since Java v1.8 <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#getEpochSecond--\" rel=\"nofollow noreferrer\">docs</a>.</p>\n"},{"tags":[],"owner":{"account_id":114991,"reputation":69738,"user_id":302139,"accept_rate":75,"display_name":"Edwin Buck"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1340128860,"creation_date":1340128860,"answer_id":11106656,"question_id":11106532,"body_markdown":"Number of seconds by itself doesn&#39;t mean much.  Number of seconds within the current minute?  Number of seconds since 0:00:00 Janurary 1st, 1970?  Number of seconds since lunch?  Could you be more specific.\r\n\r\nPut it into the API also doesn&#39;t mean much, unless you specify exactly which API you are using, and where you are attempting to put these seconds.","title":"Get date representation in seconds?","body":"<p>Number of seconds by itself doesn't mean much.  Number of seconds within the current minute?  Number of seconds since 0:00:00 Janurary 1st, 1970?  Number of seconds since lunch?  Could you be more specific.</p>\n\n<p>Put it into the API also doesn't mean much, unless you specify exactly which API you are using, and where you are attempting to put these seconds.</p>\n"},{"tags":[],"owner":{"account_id":1556012,"reputation":1838,"user_id":1447087,"accept_rate":69,"display_name":"Bigger"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1528182520,"creation_date":1528182520,"answer_id":50694094,"question_id":11106532,"body_markdown":"Since Java 8 and onwards there&#39;s this elegant method which returns the Epoch time in seconds (seconds since 0:00:0 January 1st 1970). You can then store this value as an numeric value: a &quot;long&quot; in this case.\r\n\r\n```\r\nlong timestamp = java.time.Instant.now().getEpochSecond();\r\n```","title":"Get date representation in seconds?","body":"<p>Since Java 8 and onwards there's this elegant method which returns the Epoch time in seconds (seconds since 0:00:0 January 1st 1970). You can then store this value as an numeric value: a \"long\" in this case.</p>\n\n<p><code>\nlong timestamp = java.time.Instant.now().getEpochSecond();\n</code></p>\n"}],"owner":{"account_id":1581956,"reputation":861,"user_id":1467158,"accept_rate":33,"display_name":"Sam"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54147,"favorite_count":0,"down_vote_count":3,"up_vote_count":21,"accepted_answer_id":11106619,"answer_count":4,"score":18,"last_activity_date":1695257750,"creation_date":1340128309,"question_id":11106532,"body_markdown":"I am using an API which requires a date parameter as a number of seconds, an `int`. \r\n\r\nMy problem is that I currently store this time in `java.util.date` and I was wondering if there is some way to convert the `java.util.date` variable to seconds so that I can fit it into the `int` parameter which the API requires?","title":"Get date representation in seconds?","body":"<p>I am using an API which requires a date parameter as a number of seconds, an <code>int</code>. </p>\n\n<p>My problem is that I currently store this time in <code>java.util.date</code> and I was wondering if there is some way to convert the <code>java.util.date</code> variable to seconds so that I can fit it into the <code>int</code> parameter which the API requires?</p>\n"},{"tags":["java","spring","spring-boot","aop","spring-aop"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1695103649,"post_id":77131152,"comment_id":135975510,"body_markdown":"Annotations aren&#39;t inherited (that is the way of annotations) so they aren&#39;t accessible from the actual class. This is even made a bit worse by the fact that you have an interface and use `@Validated` which woiuld lead to an interface proxy which even further would reduce the visibility of the annotations.","body":"Annotations aren&#39;t inherited (that is the way of annotations) so they aren&#39;t accessible from the actual class. This is even made a bit worse by the fact that you have an interface and use <code>@Validated</code> which woiuld lead to an interface proxy which even further would reduce the visibility of the annotations."}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695257233,"creation_date":1695175001,"answer_id":77138842,"question_id":77131152,"body_markdown":"## (Almost) no annotation inheritance in Java\r\n\r\n_M. Deinum_ is right about annotation inheritance. It basically does not exist in Java with one very special exception. For details, see [my answer here](https://stackoverflow.com/a/42607016/1082681). Other than using advanced native AspectJ, as described there, your simplest workaround is not to annotate the interface method but the implementing class&#39;s method:\r\n\r\n```java\r\n@Override\r\n@GetMapping(value = &quot;/test&quot;)\r\npublic ResponseEntity&lt;?&gt; createJsonSchemaMetadata() {\r\n  return ResponseEntity.status(HttpStatus.OK).body(&quot;Successful&quot;);\r\n}\r\n```\r\n\r\n## Targeting annotated classes\r\n\r\nYou also want to make sure that no JDK proxies are used for classes overriding interfaces but CGLIB proxies. In Spring Boot, this is the default. In plain vanilla Spring, you can use `@EnableAspectJAutoProxy(proxyTargetClass = true)`.\r\n\r\nRegarding your second pointcut, it is simply wrong:\r\n\r\n```java\r\n@Pointcut(&quot;@annotation(org.springframework.web.bind.annotation.RequestMapping)&quot;)\r\n```\r\n\r\nThis targets **annotated methods,** but you want to intercept methods in **annotated classes,** which is different and needs to be expressed like this:\r\n\r\n```java\r\n@Pointcut(&quot;@within(org.springframework.web.bind.annotation.RequestMapping)&quot;)\r\n```\r\n\r\nIf all your target classes carry a `@RequestMapping` annotation, you do not need the first pointcut at all. Otherwise, you do, but then make sure to follow my advice from the first paragraph.","title":"Spring AOP for Parent and Child relation classes","body":"<h2>(Almost) no annotation inheritance in Java</h2>\n<p><em>M. Deinum</em> is right about annotation inheritance. It basically does not exist in Java with one very special exception. For details, see <a href=\"https://stackoverflow.com/a/42607016/1082681\">my answer here</a>. Other than using advanced native AspectJ, as described there, your simplest workaround is not to annotate the interface method but the implementing class's method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n@GetMapping(value = &quot;/test&quot;)\npublic ResponseEntity&lt;?&gt; createJsonSchemaMetadata() {\n  return ResponseEntity.status(HttpStatus.OK).body(&quot;Successful&quot;);\n}\n</code></pre>\n<h2>Targeting annotated classes</h2>\n<p>You also want to make sure that no JDK proxies are used for classes overriding interfaces but CGLIB proxies. In Spring Boot, this is the default. In plain vanilla Spring, you can use <code>@EnableAspectJAutoProxy(proxyTargetClass = true)</code>.</p>\n<p>Regarding your second pointcut, it is simply wrong:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Pointcut(&quot;@annotation(org.springframework.web.bind.annotation.RequestMapping)&quot;)\n</code></pre>\n<p>This targets <strong>annotated methods,</strong> but you want to intercept methods in <strong>annotated classes,</strong> which is different and needs to be expressed like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Pointcut(&quot;@within(org.springframework.web.bind.annotation.RequestMapping)&quot;)\n</code></pre>\n<p>If all your target classes carry a <code>@RequestMapping</code> annotation, you do not need the first pointcut at all. Otherwise, you do, but then make sure to follow my advice from the first paragraph.</p>\n"}],"owner":{"account_id":3347567,"reputation":407,"user_id":2812410,"accept_rate":33,"display_name":"Prajyod Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77138842,"answer_count":1,"score":0,"last_activity_date":1695257233,"creation_date":1695085821,"question_id":77131152,"body_markdown":"I&#39;m working on existing code and I am writing some Auditing for the requests.\r\nI have tried multiple ways but my Pointcut expressions are not getting executed.\r\n\r\nI have created a separate class which has similar annotations without any parent and child hierarchy and I&#39;m able to invoke these pointcut expressions.\r\n\r\nI&#39;m not sure what Pointcut expressions should be used when there is Parent and Child relationship.\r\n```java\r\npublic interface Parent {\r\n\t  @GetMapping(value = &quot;/test&quot;)\r\n\t  ResponseEntity&lt;?&gt; createJsonSchemaMetadata();\r\n\r\n}\r\n```\r\nMy Child class\r\n\r\n```java\r\n@RestController\r\n@Validated\r\n@RequestMapping(&quot;/api&quot;)\r\npublic class Child implements Parent {\r\n\r\n\t@Override\r\n\tpublic ResponseEntity&lt;?&gt; createJsonSchemaMetadata() {\r\n\t\treturn ResponseEntity.status(HttpStatus.OK).body(&quot;Successful&quot;);\r\n\t}\r\n}\r\n```\r\nMy Pointcut expressions:\r\n```java\r\n@Aspect\r\npublic class PointcutDefinition {\r\n\r\n\t// targeting GET,POST,PUT,DELETE methods\r\n\t@Pointcut(&quot;@annotation(org.springframework.web.bind.annotation.GetMapping) || @annotation(org.springframework.web.bind.annotation.PostMapping) &quot;\r\n\t\t\t+ &quot;|| @annotation(org.springframework.web.bind.annotation.PutMapping)&quot;\r\n\t\t\t+ &quot;|| @annotation(org.springframework.web.bind.annotation.DeleteMapping)&quot;)\r\n\tpublic void httpMethodsWithAnnotation() {\r\n\t}\r\n\r\n\t// targeting methods which are defined using RequestMapping.\r\n\t@Pointcut(&quot;@annotation(org.springframework.web.bind.annotation.RequestMapping)&quot;)\r\n\tpublic void requestMappingMethodsWithHttpMethods() {\r\n\t}\r\n\r\n}\r\n```\r\nMy Advice:\r\n\r\n```java\r\n@Aspect\r\n@Component\r\npublic class AuditingAspect {\r\n\r\n\tprivate static final Logger log = LoggerFactory.getLogger(AuditingAspect.class);\r\n\r\n\t\r\n\t@Around(&quot; PointcutDefinition.httpMethodsWithAnnotation() || PointcutDefinition.requestMappingMethodsWithHttpMethods()&quot;)\r\n\tpublic Object auditAdvice(ProceedingJoinPoint joinPoint) throws Throwable {\r\n\t\tif (log.isTraceEnabled()) {\r\n\t\t\tlog.trace(&quot;Entering auditAdvice method in &quot; + this.getClass());\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Auditing triggered.&quot;);\r\n\t\tObject proceed = joinPoint.proceed();\r\n\t\treturn proceed;\r\n\t}\r\n}\r\n```\r\n\r\nI see my Advice is not getting invoked with these Pointcut expressions. Can someone help here.","title":"Spring AOP for Parent and Child relation classes","body":"<p>I'm working on existing code and I am writing some Auditing for the requests.\nI have tried multiple ways but my Pointcut expressions are not getting executed.</p>\n<p>I have created a separate class which has similar annotations without any parent and child hierarchy and I'm able to invoke these pointcut expressions.</p>\n<p>I'm not sure what Pointcut expressions should be used when there is Parent and Child relationship.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Parent {\n      @GetMapping(value = &quot;/test&quot;)\n      ResponseEntity&lt;?&gt; createJsonSchemaMetadata();\n\n}\n</code></pre>\n<p>My Child class</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@Validated\n@RequestMapping(&quot;/api&quot;)\npublic class Child implements Parent {\n\n    @Override\n    public ResponseEntity&lt;?&gt; createJsonSchemaMetadata() {\n        return ResponseEntity.status(HttpStatus.OK).body(&quot;Successful&quot;);\n    }\n}\n</code></pre>\n<p>My Pointcut expressions:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Aspect\npublic class PointcutDefinition {\n\n    // targeting GET,POST,PUT,DELETE methods\n    @Pointcut(&quot;@annotation(org.springframework.web.bind.annotation.GetMapping) || @annotation(org.springframework.web.bind.annotation.PostMapping) &quot;\n            + &quot;|| @annotation(org.springframework.web.bind.annotation.PutMapping)&quot;\n            + &quot;|| @annotation(org.springframework.web.bind.annotation.DeleteMapping)&quot;)\n    public void httpMethodsWithAnnotation() {\n    }\n\n    // targeting methods which are defined using RequestMapping.\n    @Pointcut(&quot;@annotation(org.springframework.web.bind.annotation.RequestMapping)&quot;)\n    public void requestMappingMethodsWithHttpMethods() {\n    }\n\n}\n</code></pre>\n<p>My Advice:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Aspect\n@Component\npublic class AuditingAspect {\n\n    private static final Logger log = LoggerFactory.getLogger(AuditingAspect.class);\n\n    \n    @Around(&quot; PointcutDefinition.httpMethodsWithAnnotation() || PointcutDefinition.requestMappingMethodsWithHttpMethods()&quot;)\n    public Object auditAdvice(ProceedingJoinPoint joinPoint) throws Throwable {\n        if (log.isTraceEnabled()) {\n            log.trace(&quot;Entering auditAdvice method in &quot; + this.getClass());\n        }\n        System.out.println(&quot;Auditing triggered.&quot;);\n        Object proceed = joinPoint.proceed();\n        return proceed;\n    }\n}\n</code></pre>\n<p>I see my Advice is not getting invoked with these Pointcut expressions. Can someone help here.</p>\n"},{"tags":["java","jar"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1695246317,"post_id":77146043,"comment_id":136000561,"body_markdown":"Are you using Windows?  Windows likes to lie and present a .zip file as if its a folder, but it very much is not.  Make sure you have actually extracted the .zip file (that is, right-click on the zip file and choose one the Extract items in the context menu), then try your java -jar command again.","body":"Are you using Windows?  Windows likes to lie and present a .zip file as if its a folder, but it very much is not.  Make sure you have actually extracted the .zip file (that is, right-click on the zip file and choose one the Extract items in the context menu), then try your java -jar command again."},{"owner":{"account_id":5175809,"reputation":1052,"user_id":4142984,"accept_rate":83,"display_name":"Gyro Gearloose"},"score":0,"creation_date":1695246508,"post_id":77146043,"comment_id":136000587,"body_markdown":"It is difficult to analyze from afar, but if &quot;sesam.util.whatsit*&quot; is mentioned, then at least the jar file is readable and executing. Unusual for java jar files, there is a specialized classLoader. My best guess is, that this thing tries to find other files that you have not downloaded or are not in the place it is looking for them.","body":"It is difficult to analyze from afar, but if &quot;sesam.util.whatsit*&quot; is mentioned, then at least the jar file is readable and executing. Unusual for java jar files, there is a specialized classLoader. My best guess is, that this thing tries to find other files that you have not downloaded or are not in the place it is looking for them."},{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1695255907,"post_id":77146043,"comment_id":136001443,"body_markdown":"This is a question about the specific software you&#39;re trying to run, because it&#39;s a problem in SeSAm.jar, you&#39;ll have to read the documentation for that to learn how to launch it. That error shows the java -jar command was successful and the program started, but sesam doesn&#39;t like how you opened it.","body":"This is a question about the specific software you&#39;re trying to run, because it&#39;s a problem in SeSAm.jar, you&#39;ll have to read the documentation for that to learn how to launch it. That error shows the java -jar command was successful and the program started, but sesam doesn&#39;t like how you opened it."}],"answers":[{"tags":[],"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695256496,"creation_date":1695256496,"answer_id":77146579,"question_id":77146043,"body_markdown":"Because of its use of Reflection, SeSAm only works with Java 8. \r\n\r\nMake sure you&#39;re using Java 8 to run it. You can verify what version of java you have by running \r\n\r\n`java -version` \r\nin command prompt.","title":"How do I extend my classpath to run a .jar file?","body":"<p>Because of its use of Reflection, SeSAm only works with Java 8.</p>\n<p>Make sure you're using Java 8 to run it. You can verify what version of java you have by running</p>\n<p><code>java -version</code>\nin command prompt.</p>\n"}],"owner":{"account_id":29495191,"reputation":1,"user_id":22603430,"display_name":"Dr. Primate"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695256496,"creation_date":1695245676,"question_id":77146043,"body_markdown":"I am trying to run an executable jar file for the agent-based modeling program called SeSAm (shell for simulated agent systems... wordpress can be found [here](https://multiagentsimulation.com/)). I have downloaded the zip file and subsequently unzipped the file and I used command prompt to try and run it.\r\n\r\nI have changed my directory to the folder with the jar file in it, and when I use the command to run the file (java -jar SeSAm.jar) it throws the following error: \r\n\r\n    Exception in thread &quot;main&quot; java.lang.RuntimeException: Please extend your classpath with: null\r\n            at sesam.util.jarclassloader.ClassLoaderExtender.addToClassPath(ClassLoaderExtender.java:140)\r\n            at sesam.util.jarclassloader.ClassLoaderExtender.addToClassPath(ClassLoaderExtender.java:99)\r\n            at sesam.gui.mas.application.SeSAm.extendClasspath(SeSAm.java:157)\r\n            at sesam.gui.mas.application.SeSAm.main(SeSAm.java:141)\r\n\r\nI have no formal education or training in computer programming so please excuse me if this is a trivial question or has a very obvious fix that is alluding me. I&#39;d appreciate any help on how to fix this issue.\r\n\r\nI appreciate the help in advance.\r\n\r\n\r\n","title":"How do I extend my classpath to run a .jar file?","body":"<p>I am trying to run an executable jar file for the agent-based modeling program called SeSAm (shell for simulated agent systems... wordpress can be found <a href=\"https://multiagentsimulation.com/\" rel=\"nofollow noreferrer\">here</a>). I have downloaded the zip file and subsequently unzipped the file and I used command prompt to try and run it.</p>\n<p>I have changed my directory to the folder with the jar file in it, and when I use the command to run the file (java -jar SeSAm.jar) it throws the following error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.RuntimeException: Please extend your classpath with: null\n        at sesam.util.jarclassloader.ClassLoaderExtender.addToClassPath(ClassLoaderExtender.java:140)\n        at sesam.util.jarclassloader.ClassLoaderExtender.addToClassPath(ClassLoaderExtender.java:99)\n        at sesam.gui.mas.application.SeSAm.extendClasspath(SeSAm.java:157)\n        at sesam.gui.mas.application.SeSAm.main(SeSAm.java:141)\n</code></pre>\n<p>I have no formal education or training in computer programming so please excuse me if this is a trivial question or has a very obvious fix that is alluding me. I'd appreciate any help on how to fix this issue.</p>\n<p>I appreciate the help in advance.</p>\n"},{"tags":["java","jpa","entitymanager"],"comments":[{"owner":{"account_id":932139,"reputation":10997,"user_id":961810,"accept_rate":69,"display_name":"Brad Peabody"},"score":0,"creation_date":1440037682,"post_id":32108491,"comment_id":52111325,"body_markdown":"Check this out, might answer: http://stackoverflow.com/questions/28392747/jpa-flush-vs-commit","body":"Check this out, might answer: <a href=\"http://stackoverflow.com/questions/28392747/jpa-flush-vs-commit\">stackoverflow.com/questions/28392747/jpa-flush-vs-commit</a>"},{"owner":{"account_id":1993980,"reputation":5458,"user_id":1787314,"accept_rate":60,"display_name":"Nick Div"},"score":0,"creation_date":1440038598,"post_id":32108491,"comment_id":52111508,"body_markdown":"@bgp Some of the answers say  &quot;flush is only for use within a transaction? It flushes (but doesn&#39;t commit), whereas commit commits data (obviously)&quot; Thats my question whats the purpose of flush in all this.","body":"@bgp Some of the answers say  &quot;flush is only for use within a transaction? It flushes (but doesn&#39;t commit), whereas commit commits data (obviously)&quot; Thats my question whats the purpose of flush in all this."}],"answers":[{"comments":[{"owner":{"account_id":1993980,"reputation":5458,"user_id":1787314,"accept_rate":60,"display_name":"Nick Div"},"score":2,"creation_date":1440038771,"post_id":32108730,"comment_id":52111564,"body_markdown":"But when I do flush I dont see the data updated in the database. Some tutorials and some questions on SO mention that flush only moves data to a second level cache. I dont know what that means though but since the data is not in the database I dont know if it is that userful","body":"But when I do flush I dont see the data updated in the database. Some tutorials and some questions on SO mention that flush only moves data to a second level cache. I dont know what that means though but since the data is not in the database I dont know if it is that userful"},{"owner":{"account_id":5870607,"reputation":535,"user_id":4623055,"display_name":"owenrb"},"score":0,"creation_date":1440039893,"post_id":32108730,"comment_id":52111838,"body_markdown":"As I remember, this is the same flush method used by the entity manager as well. If the update is not reflecting in the database there must be an exception being thrown during the commit process. It could be some unsychronized persistence context after the series of transaction events.","body":"As I remember, this is the same flush method used by the entity manager as well. If the update is not reflecting in the database there must be an exception being thrown during the commit process. It could be some unsychronized persistence context after the series of transaction events."},{"owner":{"account_id":2432741,"reputation":2413,"user_id":2123306,"accept_rate":83,"display_name":"Mathias Begert"},"score":4,"creation_date":1440040765,"post_id":32108730,"comment_id":52112018,"body_markdown":"@NickDiv A simple example: **persist** -&gt; memory / **flush** -&gt; database (isolated, not visible for others) / **commit** -&gt; database (visible for others). Read about database transactions.","body":"@NickDiv A simple example: <b>persist</b> -&gt; memory / <b>flush</b> -&gt; database (isolated, not visible for others) / <b>commit</b> -&gt; database (visible for others). Read about database transactions."},{"owner":{"account_id":5870607,"reputation":535,"user_id":4623055,"display_name":"owenrb"},"score":1,"creation_date":1440040907,"post_id":32108730,"comment_id":52112049,"body_markdown":"If you suspect it is a caching issue, you may try to disable caching via persistence.xml configuration file.\nSet the `shared-cache-mode` to `NONE`","body":"If you suspect it is a caching issue, you may try to disable caching via persistence.xml configuration file. Set the <code>shared-cache-mode</code> to <code>NONE</code>"},{"owner":{"account_id":1993980,"reputation":5458,"user_id":1787314,"accept_rate":60,"display_name":"Nick Div"},"score":0,"creation_date":1440049027,"post_id":32108730,"comment_id":52114183,"body_markdown":"@OwenBringino Thanks so much for the answer. The cache does not seem to be the issue. And there is no exception being thrown as well. I dont know why I do not see the data in the DB. Is it possible that data flushed can be rolled back?","body":"@OwenBringino Thanks so much for the answer. The cache does not seem to be the issue. And there is no exception being thrown as well. I dont know why I do not see the data in the DB. Is it possible that data flushed can be rolled back?"},{"owner":{"account_id":1993980,"reputation":5458,"user_id":1787314,"accept_rate":60,"display_name":"Nick Div"},"score":0,"creation_date":1440049184,"post_id":32108730,"comment_id":52114235,"body_markdown":"@MathiasBegert Thank you so much, your explanation makes a lot of sense. Simple and effective :-) I dont know why I do not see the data in the DB. Is it possible that data flushed can be rolled back?","body":"@MathiasBegert Thank you so much, your explanation makes a lot of sense. Simple and effective :-) I dont know why I do not see the data in the DB. Is it possible that data flushed can be rolled back?"},{"owner":{"account_id":203624,"reputation":891,"user_id":451390,"accept_rate":58,"display_name":"Katrin"},"score":0,"creation_date":1539319303,"post_id":32108730,"comment_id":92466698,"body_markdown":"@NickDiv did you try to check the data during the process using another db session?","body":"@NickDiv did you try to check the data during the process using another db session?"}],"tags":[],"owner":{"account_id":5870607,"reputation":535,"user_id":4623055,"display_name":"owenrb"},"comment_count":7,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1440038590,"creation_date":1440038590,"answer_id":32108730,"question_id":32108491,"body_markdown":"When the transaction commits the entity manager does that flush-ing for you. In some case, like handling optimistic locking in a container-managed transaction, you may need to manually invoke the flush method to catch and handle specific locking exception.\r\n\r\n","title":"What is exact purpose of flush in JPA","body":"<p>When the transaction commits the entity manager does that flush-ing for you. In some case, like handling optimistic locking in a container-managed transaction, you may need to manually invoke the flush method to catch and handle specific locking exception.</p>\n"},{"comments":[{"owner":{"account_id":1993980,"reputation":5458,"user_id":1787314,"accept_rate":60,"display_name":"Nick Div"},"score":0,"creation_date":1440049681,"post_id":32108891,"comment_id":52114408,"body_markdown":"So if I do a read on the database will the flush be called before the read automatically?","body":"So if I do a read on the database will the flush be called before the read automatically?"},{"owner":{"account_id":1993980,"reputation":5458,"user_id":1787314,"accept_rate":60,"display_name":"Nick Div"},"score":1,"creation_date":1440051732,"post_id":32108891,"comment_id":52115316,"body_markdown":"And one more small question, if one thread flushes some data on an entity and another thread makes some change to it and does a flush in its own transaction, is it going to throw an Optimistic Lock, I am just wondering because like you said flushed data is isolated to only the owing transaction, not visible to others. So can the other thread cause the optimistic lock?","body":"And one more small question, if one thread flushes some data on an entity and another thread makes some change to it and does a flush in its own transaction, is it going to throw an Optimistic Lock, I am just wondering because like you said flushed data is isolated to only the owing transaction, not visible to others. So can the other thread cause the optimistic lock?"},{"owner":{"account_id":2432741,"reputation":2413,"user_id":2123306,"accept_rate":83,"display_name":"Mathias Begert"},"score":0,"creation_date":1440057217,"post_id":32108891,"comment_id":52118212,"body_markdown":"I answered your questions in my answer above, but ask a new concrete question on SO rather than &quot;extending&quot; this one, it might not be helpful to others.","body":"I answered your questions in my answer above, but ask a new concrete question on SO rather than &quot;extending&quot; this one, it might not be helpful to others."}],"tags":[],"owner":{"account_id":2432741,"reputation":2413,"user_id":2123306,"accept_rate":83,"display_name":"Mathias Begert"},"comment_count":3,"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1440056958,"creation_date":1440039861,"answer_id":32108891,"question_id":32108491,"body_markdown":"In theory, you (as a user of JPA) should never (or in absolutely rare situations) get in a situation to call `flush()`.\r\n\r\n&gt; Flushing is the process of synchronizing the underlying persistent\r\n&gt; store with persistable state held in memory\r\n\r\nIn other words, on a `flush()` all the insert, update, delete or whatever statements are actually called on the database, before a `flush()` nothing happens on your database. Flushing is caused by a commit of your transaction or some kinds of database reads. For example if you execute a JPQL query, a `flush()` has to be done to get the correct results from the database. But this is just very nice to know and completely handled by your JPA implementation. \r\n\r\nThere may be some situations you want to control this flushing on your own and then you can invoke it with `flush()`.\r\n\r\n**Edit** to answer the questions in comment:\r\n\r\nNot on every read a flush is necessary, consider this scenario (one transaction):\r\n\r\n 1. Read a person `Person p = em.find(Person.class, 234)` \r\n 2. Update person `p.setAge(31)` \r\n 3. Read a building `Building b = em.find(Building.class, 123`\r\n 4. Read a building with JPQL query `select b from Building b where b.id = 123`\r\n\r\nAutomatic **flush** occurs only before 4., because Eclipselink can&#39;t determine what you are gonna read, so the person&#39;s age must be up to date on the database before this read can occur. Before 3. there is no flush needed because Eclipselink knows that the update on a person can not affect a building.\r\n\r\nTo work with optimistic locking, you have to implement it. Read about the `@Version` annotation here: https://blogs.oracle.com/carolmcdonald/entry/jpa_2_0_concurrency_and. Without that your entity will not use optimistic locking and the &quot;last update wins&quot;.\r\n","title":"What is exact purpose of flush in JPA","body":"<p>In theory, you (as a user of JPA) should never (or in absolutely rare situations) get in a situation to call <code>flush()</code>.</p>\n\n<blockquote>\n  <p>Flushing is the process of synchronizing the underlying persistent\n  store with persistable state held in memory</p>\n</blockquote>\n\n<p>In other words, on a <code>flush()</code> all the insert, update, delete or whatever statements are actually called on the database, before a <code>flush()</code> nothing happens on your database. Flushing is caused by a commit of your transaction or some kinds of database reads. For example if you execute a JPQL query, a <code>flush()</code> has to be done to get the correct results from the database. But this is just very nice to know and completely handled by your JPA implementation. </p>\n\n<p>There may be some situations you want to control this flushing on your own and then you can invoke it with <code>flush()</code>.</p>\n\n<p><strong>Edit</strong> to answer the questions in comment:</p>\n\n<p>Not on every read a flush is necessary, consider this scenario (one transaction):</p>\n\n<ol>\n<li>Read a person <code>Person p = em.find(Person.class, 234)</code> </li>\n<li>Update person <code>p.setAge(31)</code> </li>\n<li>Read a building <code>Building b = em.find(Building.class, 123</code></li>\n<li>Read a building with JPQL query <code>select b from Building b where b.id = 123</code></li>\n</ol>\n\n<p>Automatic <strong>flush</strong> occurs only before 4., because Eclipselink can't determine what you are gonna read, so the person's age must be up to date on the database before this read can occur. Before 3. there is no flush needed because Eclipselink knows that the update on a person can not affect a building.</p>\n\n<p>To work with optimistic locking, you have to implement it. Read about the <code>@Version</code> annotation here: <a href=\"https://blogs.oracle.com/carolmcdonald/entry/jpa_2_0_concurrency_and\" rel=\"noreferrer\">https://blogs.oracle.com/carolmcdonald/entry/jpa_2_0_concurrency_and</a>. Without that your entity will not use optimistic locking and the \"last update wins\".</p>\n"},{"tags":[],"owner":{"account_id":11228459,"reputation":71,"user_id":8237398,"display_name":"Roberto Messa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695255064,"creation_date":1695255064,"answer_id":77146521,"question_id":32108491,"body_markdown":"If you&#39;re persisting two entities manually, you&#39;ll need the generated id.\r\n\r\n```\r\nentityManagerInstance.persist(entity1);\r\nentityManagerInstance.flush();\r\nentity2.setForeignKeyToEntity1(entity1.getId());\r\nentity2.create();\r\n```","title":"What is exact purpose of flush in JPA","body":"<p>If you're persisting two entities manually, you'll need the generated id.</p>\n<pre><code>entityManagerInstance.persist(entity1);\nentityManagerInstance.flush();\nentity2.setForeignKeyToEntity1(entity1.getId());\nentity2.create();\n</code></pre>\n"}],"owner":{"account_id":1993980,"reputation":5458,"user_id":1787314,"accept_rate":60,"display_name":"Nick Div"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32631,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"accepted_answer_id":32108891,"answer_count":3,"score":26,"last_activity_date":1695255064,"creation_date":1440036644,"question_id":32108491,"body_markdown":"Some confusing explanation:\r\nflush(); Flushing is the process of synchronizing the underlying persistent store with persistable state held in memory.it will update or insert into your tables in the running transaction, but it may not commit those changes.\r\n\r\nIf the changes are anyways going to be persisted in the database only after the commit then why to flush in the middle of the code. \r\n\r\nAnd after running the flush if any changes are made to the managed object then will that throw an Exception or will those get synchronized and then will get perisisted. If they get synchronized then again why flush in the first place. \r\n\r\n","title":"What is exact purpose of flush in JPA","body":"<p>Some confusing explanation:\nflush(); Flushing is the process of synchronizing the underlying persistent store with persistable state held in memory.it will update or insert into your tables in the running transaction, but it may not commit those changes.</p>\n\n<p>If the changes are anyways going to be persisted in the database only after the commit then why to flush in the middle of the code. </p>\n\n<p>And after running the flush if any changes are made to the managed object then will that throw an Exception or will those get synchronized and then will get perisisted. If they get synchronized then again why flush in the first place. </p>\n"},{"tags":["java","spring","web-services","rest","cxf"],"comments":[{"owner":{"account_id":225235,"reputation":6429,"user_id":485608,"accept_rate":50,"display_name":"M. Abbas"},"score":0,"creation_date":1380201413,"post_id":19028780,"comment_id":28118321,"body_markdown":"Could you verify if you have different version of the same libray(jar) in your classpath?","body":"Could you verify if you have different version of the same libray(jar) in your classpath?"},{"owner":{"account_id":2587959,"reputation":1082,"user_id":2334391,"accept_rate":80,"display_name":"jos"},"score":0,"creation_date":1380201586,"post_id":19028780,"comment_id":28118448,"body_markdown":"in pom.xml cxf version is 2.7.5. all cxf jar versions are same","body":"in pom.xml cxf version is 2.7.5. all cxf jar versions are same"},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":2,"creation_date":1380202231,"post_id":19028780,"comment_id":28118889,"body_markdown":"Take a look at this: http://stackoverflow.com/questions/1980452/what-causes-java-lang-incompatibleclasschangeerror","body":"Take a look at this: <a href=\"http://stackoverflow.com/questions/1980452/what-causes-java-lang-incompatibleclasschangeerror\" title=\"what causes java lang incompatibleclasschangeerror\">stackoverflow.com/questions/1980452/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":7425398,"reputation":21,"user_id":5648070,"display_name":"donglei"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453118362,"creation_date":1453116885,"answer_id":34853759,"question_id":19028780,"body_markdown":"I don&#39;t know what kind of conflict there is...&lt;br /&gt;\r\nYou can try to delete the `cxf-rt-ws-policy-3.1.1.jar`.&lt;br /&gt;\r\nI don&#39;t know why, but this worked for me.\r\n","title":"cxf rest spring service giving error","body":"<p>I don't know what kind of conflict there is...<br />\nYou can try to delete the <code>cxf-rt-ws-policy-3.1.1.jar</code>.<br />\nI don't know why, but this worked for me.</p>\n"},{"tags":[],"owner":{"account_id":3567133,"reputation":623,"user_id":2978362,"accept_rate":67,"display_name":"vsriram92"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671820524,"creation_date":1671817619,"answer_id":74902574,"question_id":19028780,"body_markdown":"I had similar issue where I had my Spring context available inside the lib folder of my war and its transitive dependency such as cxf-rt-ws-policy, cxf-core was kept in tomcat lib folder. &lt;br/&gt;&lt;br/&gt;\r\nMoving cxf-rt-ws-policy and cxf-core to the war&#39;s lib folder solved the issue.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;cxf-rt-ws-policy&lt;/artifactId&gt;\r\n        &lt;version&gt;3.5.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;cxf-core&lt;/artifactId&gt;\r\n        &lt;version&gt;3.5.2&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"cxf rest spring service giving error","body":"<p>I had similar issue where I had my Spring context available inside the lib folder of my war and its transitive dependency such as cxf-rt-ws-policy, cxf-core was kept in tomcat lib folder. <br/><br/>\nMoving cxf-rt-ws-policy and cxf-core to the war's lib folder solved the issue.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n    &lt;artifactId&gt;cxf-rt-ws-policy&lt;/artifactId&gt;\n    &lt;version&gt;3.5.2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n    &lt;artifactId&gt;cxf-core&lt;/artifactId&gt;\n    &lt;version&gt;3.5.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":2587959,"reputation":1082,"user_id":2334391,"accept_rate":80,"display_name":"jos"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10487,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1695254575,"creation_date":1380199785,"question_id":19028780,"body_markdown":"I am trying to expose rest service using **cxf rest**. i have **cxf 2.7.5** and **spring 3.1.3.RELEASE**  when trying to use the url `http://localhost:8080/web/services/rest/getreq` its giving error.\r\n\r\n\r\n    Status Code: 500 Internal Server Error\r\n    Connection: close\r\n    Content-Language: en\r\n    Content-Type: text/html;charset=ISO-8859-1\r\n    Date: Thu, 26 Sep 2013 12:51:02 GMT\r\n    Server: Apache-Coyote/1.1\r\n    Transfer-Encoding: chunked\r\n\r\n    SEVERE: StandardWrapper.Throwable\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;cxf&#39; defined in class path resource [META-INF/cxf/cxf.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.apache.cxf.bus.spring.SpringBus]: Constructor threw exception; nested exception is org.apache.cxf.bus.extension.ExtensionException: Could not load extension class org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl.\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:997)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:605)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:925)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472)\r\n    \tat org.apache.cxf.transport.servlet.CXFServlet.createSpringContext(CXFServlet.java:160)\r\n    \tat org.apache.cxf.transport.servlet.CXFServlet.loadBus(CXFServlet.java:74)\r\n    \tat org.apache.cxf.transport.servlet.CXFNonSpringServlet.init(CXFNonSpringServlet.java:71)\r\n    \tat org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1274)\r\n    \tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1186)\r\n    \tat org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:858)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)\r\n    \tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\r\n    \tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)\r\n    \tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)\r\n    \tat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n    \tat java.lang.Thread.run(Thread.java:724)\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.apache.cxf.bus.spring.SpringBus]: Constructor threw exception; nested exception is org.apache.cxf.bus.extension.ExtensionException: Could not load extension class org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl.\r\n    \tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:162)\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:990)\r\n    \t... 30 more\r\n    Caused by: org.apache.cxf.bus.extension.ExtensionException: Could not load extension class org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl.\r\n    \tat org.apache.cxf.bus.extension.Extension.tryClass(Extension.java:173)\r\n    \tat org.apache.cxf.bus.extension.Extension.getClassObject(Extension.java:185)\r\n    \tat org.apache.cxf.bus.extension.ExtensionManagerImpl.activateAllByType(ExtensionManagerImpl.java:138)\r\n    \tat org.apache.cxf.bus.extension.ExtensionManagerBus.&lt;init&gt;(ExtensionManagerBus.java:126)\r\n    \tat org.apache.cxf.bus.extension.ExtensionManagerBus.&lt;init&gt;(ExtensionManagerBus.java:138)\r\n    \tat org.apache.cxf.bus.spring.SpringBus.&lt;init&gt;(SpringBus.java:47)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:526)\r\n    \tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)\r\n    \t... 32 more\r\n    Caused by: java.lang.IncompatibleClassChangeError: Implementing class\r\n    \tat java.lang.ClassLoader.defineClass1(Native Method)\r\n    \tat java.lang.ClassLoader.defineClass(ClassLoader.java:792)\r\n    \tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n    \tat org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)\r\n    \tat org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)\r\n    \tat org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)\r\n    \tat org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)\r\n    \tat java.lang.ClassLoader.defineClass1(Native Method)\r\n    \tat java.lang.ClassLoader.defineClass(ClassLoader.java:792)\r\n    \tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n    \tat org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)\r\n    \tat org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)\r\n    \tat org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)\r\n    \tat org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)\r\n    \tat org.apache.cxf.bus.extension.Extension.tryClass(Extension.java:169)\r\n    \t... 42 more\r\n\r\ni made my service class **@service(&quot;dimRequirementManager&quot;)** then is it necessary to create bean in cxf-servlet.xml?\r\n\r\n**cxf-servlet.xml**\r\n\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:jaxws=&quot;http://cxf.apache.org/jaxws&quot;\r\n    \txmlns:jaxrs=&quot;http://cxf.apache.org/jaxrs&quot; xmlns:cxf=&quot;http://cxf.apache.org/core&quot;\r\n    \txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\r\n                http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd\r\n                http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd\r\n                http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd&quot;&gt;    \r\n    \t&lt;import resource=&quot;classpath:META-INF/cxf/cxf.xml&quot; /&gt;\r\n    \t&lt;import resource=&quot;classpath:META-INF/cxf/cxf-servlet.xml&quot; /&gt;    \r\n    \t&lt;cxf:bus&gt;\r\n    \t\t&lt;cxf:features&gt;\r\n    \t\t\t&lt;cxf:logging /&gt;\r\n    \t\t&lt;/cxf:features&gt;\r\n    \t&lt;/cxf:bus&gt;\r\n    \t&lt;bean id=&quot;jsonProvider&quot; class=&quot;org.codehaus.jackson.jaxrs.JacksonJsonProvider&quot; /&gt;\r\n    \t&lt;bean id=&quot;dimRequirementDao&quot;\r\n    \t\tclass=&quot;com.vxl.dao.hibernate.DimRequirementDaoHibernate&quot;&gt;\r\n    \t&lt;/bean&gt;    \r\n    \t&lt;bean id=&quot;dimRequirementManager&quot;\r\n    \t\tclass=&quot;com.vxl.service.impl.DimRequirementManagerImpl&quot;&gt;\r\n    \t\t&lt;property name=&quot;dimRequirementDao&quot; ref=&quot;dimRequirementDao&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \t&lt;!-- Add new endpoints for additional services you&#39;d like to expose --&gt;    \r\n    \t&lt;jaxrs:server address=&quot;/rest&quot;&gt;\r\n    \t\t&lt;jaxrs:serviceBeans&gt;\r\n    \t\t\t&lt;ref bean=&quot;dimRequirementManager&quot; /&gt;\r\n    \t\t&lt;/jaxrs:serviceBeans&gt;\r\n    \t\t&lt;jaxrs:providers&gt;\r\n    \t\t\t&lt;ref bean=&quot;jsonProvider&quot; /&gt;\r\n    \t\t&lt;/jaxrs:providers&gt;\r\n    \t\t&lt;jaxrs:extensionMappings&gt;\r\n    \t\t\t&lt;entry key=&quot;json&quot; value=&quot;application/json&quot; /&gt;\r\n    \t\t\t&lt;entry key=&quot;xml&quot; value=&quot;application/xml&quot; /&gt;\r\n    \t\t\t&lt;entry key=&quot;feed&quot; value=&quot;application/atom+xml&quot; /&gt;\r\n    \t\t&lt;/jaxrs:extensionMappings&gt;\r\n    \t&lt;/jaxrs:server&gt;    \r\n    &lt;/beans&gt;\r\n\r\n**web.xml**\r\n\r\n    &lt;context-param&gt;\r\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n        &lt;param-value&gt;\r\n                classpath:/applicationContext-dca.xml\r\n                classpath:/applicationContext-service.xml\r\n            &lt;/param-value&gt;\r\n      &lt;/context-param&gt;\r\n    &lt;listener&gt;\r\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\r\n      &lt;/listener&gt;\r\n    &lt;servlet&gt;\r\n        &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;org.apache.cxf.transport.servlet.CXFServlet&lt;/servlet-class&gt;\r\n      &lt;/servlet&gt;\r\n      &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;/services/*&lt;/url-pattern&gt;\r\n      &lt;/servlet-mapping&gt;\r\n\r\n**service class**\r\n\r\n    @Produces(&quot;application/xml&quot;)\r\n    @Consumes(&quot;application/xml&quot;)\r\n    @Service(&quot;dimRequirementManager&quot;)\r\n    public class DimRequirementManagerImpl implements DimRequirementManager {    \r\n        DimRequirementDao dimRequirementDao;    \r\n    \t@Override\r\n    \tpublic List&lt;DimRequirement&gt; getAllByClientNIsCurrent(Long clientKey) {\r\n    \t\treturn dimRequirementDao.getAllByClientNIsCurrent(clientKey);\r\n    \t}    \t\r\n    \t@GET\r\n    \t@Path(&quot;/getreq&quot;)\r\n    \tpublic DimRequirement getreq(){\r\n    \t\tDimRequirement requirement =new DimRequirement();\r\n    \t\trequirement.setClientKey(22L);\r\n    \t\trequirement.setClassification(&quot;classification&quot;);\r\n    \t\treturn requirement;    \t\t\r\n    \t}","title":"cxf rest spring service giving error","body":"<p>I am trying to expose rest service using <strong>cxf rest</strong>. i have <strong>cxf 2.7.5</strong> and <strong>spring 3.1.3.RELEASE</strong>  when trying to use the url <code>http://localhost:8080/web/services/rest/getreq</code> its giving error.</p>\n\n<pre><code>Status Code: 500 Internal Server Error\nConnection: close\nContent-Language: en\nContent-Type: text/html;charset=ISO-8859-1\nDate: Thu, 26 Sep 2013 12:51:02 GMT\nServer: Apache-Coyote/1.1\nTransfer-Encoding: chunked\n\nSEVERE: StandardWrapper.Throwable\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cxf' defined in class path resource [META-INF/cxf/cxf.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.apache.cxf.bus.spring.SpringBus]: Constructor threw exception; nested exception is org.apache.cxf.bus.extension.ExtensionException: Could not load extension class org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl.\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:997)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:605)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:925)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472)\n    at org.apache.cxf.transport.servlet.CXFServlet.createSpringContext(CXFServlet.java:160)\n    at org.apache.cxf.transport.servlet.CXFServlet.loadBus(CXFServlet.java:74)\n    at org.apache.cxf.transport.servlet.CXFNonSpringServlet.init(CXFNonSpringServlet.java:71)\n    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1274)\n    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1186)\n    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:858)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)\n    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)\n    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:724)\nCaused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.apache.cxf.bus.spring.SpringBus]: Constructor threw exception; nested exception is org.apache.cxf.bus.extension.ExtensionException: Could not load extension class org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl.\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:162)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:990)\n    ... 30 more\nCaused by: org.apache.cxf.bus.extension.ExtensionException: Could not load extension class org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl.\n    at org.apache.cxf.bus.extension.Extension.tryClass(Extension.java:173)\n    at org.apache.cxf.bus.extension.Extension.getClassObject(Extension.java:185)\n    at org.apache.cxf.bus.extension.ExtensionManagerImpl.activateAllByType(ExtensionManagerImpl.java:138)\n    at org.apache.cxf.bus.extension.ExtensionManagerBus.&lt;init&gt;(ExtensionManagerBus.java:126)\n    at org.apache.cxf.bus.extension.ExtensionManagerBus.&lt;init&gt;(ExtensionManagerBus.java:138)\n    at org.apache.cxf.bus.spring.SpringBus.&lt;init&gt;(SpringBus.java:47)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:526)\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)\n    ... 32 more\nCaused by: java.lang.IncompatibleClassChangeError: Implementing class\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:792)\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)\n    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)\n    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)\n    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:792)\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)\n    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)\n    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)\n    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)\n    at org.apache.cxf.bus.extension.Extension.tryClass(Extension.java:169)\n    ... 42 more\n</code></pre>\n\n<p>i made my service class <strong>@service(\"dimRequirementManager\")</strong> then is it necessary to create bean in cxf-servlet.xml?</p>\n\n<p><strong>cxf-servlet.xml</strong></p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:jaxws=\"http://cxf.apache.org/jaxws\"\n    xmlns:jaxrs=\"http://cxf.apache.org/jaxrs\" xmlns:cxf=\"http://cxf.apache.org/core\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n            http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd\n            http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd\n            http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd\"&gt;    \n    &lt;import resource=\"classpath:META-INF/cxf/cxf.xml\" /&gt;\n    &lt;import resource=\"classpath:META-INF/cxf/cxf-servlet.xml\" /&gt;    \n    &lt;cxf:bus&gt;\n        &lt;cxf:features&gt;\n            &lt;cxf:logging /&gt;\n        &lt;/cxf:features&gt;\n    &lt;/cxf:bus&gt;\n    &lt;bean id=\"jsonProvider\" class=\"org.codehaus.jackson.jaxrs.JacksonJsonProvider\" /&gt;\n    &lt;bean id=\"dimRequirementDao\"\n        class=\"com.vxl.dao.hibernate.DimRequirementDaoHibernate\"&gt;\n    &lt;/bean&gt;    \n    &lt;bean id=\"dimRequirementManager\"\n        class=\"com.vxl.service.impl.DimRequirementManagerImpl\"&gt;\n        &lt;property name=\"dimRequirementDao\" ref=\"dimRequirementDao\" /&gt;\n    &lt;/bean&gt;\n    &lt;!-- Add new endpoints for additional services you'd like to expose --&gt;    \n    &lt;jaxrs:server address=\"/rest\"&gt;\n        &lt;jaxrs:serviceBeans&gt;\n            &lt;ref bean=\"dimRequirementManager\" /&gt;\n        &lt;/jaxrs:serviceBeans&gt;\n        &lt;jaxrs:providers&gt;\n            &lt;ref bean=\"jsonProvider\" /&gt;\n        &lt;/jaxrs:providers&gt;\n        &lt;jaxrs:extensionMappings&gt;\n            &lt;entry key=\"json\" value=\"application/json\" /&gt;\n            &lt;entry key=\"xml\" value=\"application/xml\" /&gt;\n            &lt;entry key=\"feed\" value=\"application/atom+xml\" /&gt;\n        &lt;/jaxrs:extensionMappings&gt;\n    &lt;/jaxrs:server&gt;    \n&lt;/beans&gt;\n</code></pre>\n\n<p><strong>web.xml</strong></p>\n\n<pre><code>&lt;context-param&gt;\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;\n            classpath:/applicationContext-dca.xml\n            classpath:/applicationContext-service.xml\n        &lt;/param-value&gt;\n  &lt;/context-param&gt;\n&lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n  &lt;/listener&gt;\n&lt;servlet&gt;\n    &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.apache.cxf.transport.servlet.CXFServlet&lt;/servlet-class&gt;\n  &lt;/servlet&gt;\n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/services/*&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n</code></pre>\n\n<p><strong>service class</strong></p>\n\n<pre><code>@Produces(\"application/xml\")\n@Consumes(\"application/xml\")\n@Service(\"dimRequirementManager\")\npublic class DimRequirementManagerImpl implements DimRequirementManager {    \n    DimRequirementDao dimRequirementDao;    \n    @Override\n    public List&lt;DimRequirement&gt; getAllByClientNIsCurrent(Long clientKey) {\n        return dimRequirementDao.getAllByClientNIsCurrent(clientKey);\n    }       \n    @GET\n    @Path(\"/getreq\")\n    public DimRequirement getreq(){\n        DimRequirement requirement =new DimRequirement();\n        requirement.setClientKey(22L);\n        requirement.setClassification(\"classification\");\n        return requirement;         \n    }\n</code></pre>\n"},{"tags":["java","spring-boot","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1695044723,"post_id":77126102,"comment_id":135967693,"body_markdown":"There&#39;s a Kafka Connect sink to Postgres over jdbc, which doesn&#39;t require any code, by the way. Had you tried that?","body":"There&#39;s a Kafka Connect sink to Postgres over jdbc, which doesn&#39;t require any code, by the way. Had you tried that?"},{"owner":{"account_id":20833547,"reputation":1212,"user_id":15302273,"display_name":"stacktrace2234"},"score":0,"creation_date":1695044786,"post_id":77126102,"comment_id":135967719,"body_markdown":"Nope, at the moment I am just learning kafka.","body":"Nope, at the moment I am just learning kafka."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1695045135,"post_id":77126102,"comment_id":135967792,"body_markdown":"That&#39;s okay. Kafka Connect is part of Kafka. You can learn that too","body":"That&#39;s okay. Kafka Connect is part of Kafka. You can learn that too"}],"answers":[{"tags":[],"owner":{"account_id":29214968,"reputation":186,"user_id":22381995,"display_name":"cant-code"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695030933,"creation_date":1695030933,"answer_id":77126211,"question_id":77126102,"body_markdown":"&gt; The auto-offset-reset property accepts the following values: \r\n&gt;  - earliest: This value automatically resets the offset to the earliest    offset \r\n&gt;  - latest: This value automatically resets the offset to the    latest offset \r\n&gt;  - none: This value throws an exception to the consumer if    no previous offset is found for the consumers group.\r\n\r\nAs mentioned, earliest might be the safest offset setting to use if your consumer starts after a few days or so and there are some messages not consumed. This will make sure that no messages are dropped.\r\nYou can also keep a track of the message ids from queue and check whether they were already processed or not.\r\n\r\nIf all this is not part of your worries then you can also use &#39;latest&#39; to just start fetching from the latest offset.\r\n\r\nEdit: Source\r\nhttps://www.baeldung.com/java-kafka-consumer-api-read","title":"Spring Boot Kafka: How to prevent to consume the same messages if I restart the consumer?","body":"<blockquote>\n<p>The auto-offset-reset property accepts the following values:</p>\n<ul>\n<li>earliest: This value automatically resets the offset to the earliest    offset</li>\n<li>latest: This value automatically resets the offset to the    latest offset</li>\n<li>none: This value throws an exception to the consumer if    no previous offset is found for the consumers group.</li>\n</ul>\n</blockquote>\n<p>As mentioned, earliest might be the safest offset setting to use if your consumer starts after a few days or so and there are some messages not consumed. This will make sure that no messages are dropped.\nYou can also keep a track of the message ids from queue and check whether they were already processed or not.</p>\n<p>If all this is not part of your worries then you can also use 'latest' to just start fetching from the latest offset.</p>\n<p>Edit: Source\n<a href=\"https://www.baeldung.com/java-kafka-consumer-api-read\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-kafka-consumer-api-read</a></p>\n"},{"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1695044632,"post_id":77126622,"comment_id":135967669,"body_markdown":"Except Kafka will drop messages, regardless of there being a consumer, after a week, by default","body":"Except Kafka will drop messages, regardless of there being a consumer, after a week, by default"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1695045640,"post_id":77126622,"comment_id":135967894,"body_markdown":"Kafka will drop messages if retention time or space is exceeded, yes. But you can still configure infinite retention if you know what you&#39;re doing (and need it for some reason, such as using Kafka as a data backbone in the system).","body":"Kafka will drop messages if retention time or space is exceeded, yes. But you can still configure infinite retention if you know what you&#39;re doing (and need it for some reason, such as using Kafka as a data backbone in the system)."}],"tags":[],"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695034948,"creation_date":1695034569,"answer_id":77126622,"question_id":77126102,"body_markdown":"&gt; What if I close the consumer application and then start it again?\r\n\r\nDepends on how you commit and other things. If you consume a record, auto-commit the offset to Kafka, and the environment goes down before you&#39;ve processed it, you just lost a record.\r\n\r\nIf you&#39;re not making sure that there are no duplicates with e.g. idempotent producer and all the other necessary things, you could get duplicates from various places, starting with producer retries.\r\n\r\nIf you&#39;re saving something to a transactional storage (like database), you can store the Kafka offsets in the database in the same transaction as the data, this will make the database the source of truth for Kafka offsets, and you can `seek()` to the correct position on startup to make sure there are no dropped records (it won&#39;t help against records duplicated somewhere before the consumer though).\r\n\r\n&gt; What if the consumer processes the 1000 messages, I stop the consumer, produce 1000 more messages and start the consumer?\r\n\r\nYou should know that Kafka won&#39;t drop messages even if there&#39;s no consumer to read them. I suggest reading up on Kafka internal workings, as it&#39;s pretty complicated and `spring-kafka` makes it look easier than it is.","title":"Spring Boot Kafka: How to prevent to consume the same messages if I restart the consumer?","body":"<blockquote>\n<p>What if I close the consumer application and then start it again?</p>\n</blockquote>\n<p>Depends on how you commit and other things. If you consume a record, auto-commit the offset to Kafka, and the environment goes down before you've processed it, you just lost a record.</p>\n<p>If you're not making sure that there are no duplicates with e.g. idempotent producer and all the other necessary things, you could get duplicates from various places, starting with producer retries.</p>\n<p>If you're saving something to a transactional storage (like database), you can store the Kafka offsets in the database in the same transaction as the data, this will make the database the source of truth for Kafka offsets, and you can <code>seek()</code> to the correct position on startup to make sure there are no dropped records (it won't help against records duplicated somewhere before the consumer though).</p>\n<blockquote>\n<p>What if the consumer processes the 1000 messages, I stop the consumer, produce 1000 more messages and start the consumer?</p>\n</blockquote>\n<p>You should know that Kafka won't drop messages even if there's no consumer to read them. I suggest reading up on Kafka internal workings, as it's pretty complicated and <code>spring-kafka</code> makes it look easier than it is.</p>\n"},{"tags":[],"owner":{"account_id":2491257,"reputation":351,"user_id":2168654,"accept_rate":32,"display_name":"Zahra Hosseini"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695253570,"creation_date":1695253570,"answer_id":77146454,"question_id":77126102,"body_markdown":"you should set: `auto-offset-reset:latest`\r\n\r\nin this way consumer start to consumes from last offset that have been read.","title":"Spring Boot Kafka: How to prevent to consume the same messages if I restart the consumer?","body":"<p>you should set: <code>auto-offset-reset:latest</code></p>\n<p>in this way consumer start to consumes from last offset that have been read.</p>\n"}],"owner":{"account_id":20833547,"reputation":1212,"user_id":15302273,"display_name":"stacktrace2234"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1695253570,"creation_date":1695030094,"question_id":77126102,"body_markdown":"- I start the kafka and I produce 1000 messages in topic `user`\r\n- I create a Spring Boot Consumer that listens on this topic and saves the messages in the database\r\n\r\nWhat if I close the consumer application and then start it again? How to prevent to save the same messages in the database?\r\n\r\nWhat if the consumer processes the 1000 messages, I stop the consumer, produce 1000 more messages and start the consumer?\r\n\r\n\r\n```\r\nspring:\r\n  kafka:\r\n    consumer:\r\n      bootstrap-servers:\r\n        - localhost:9092\r\n      group-id: &quot;myGroup&quot;\r\n      auto-offset-reset: earliest\r\n      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer\r\n      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer\r\n  datasource:\r\n    username: postgres\r\n    url: jdbc:postgresql://localhost:5432/mydatabase\r\n    password: admin\r\n```","title":"Spring Boot Kafka: How to prevent to consume the same messages if I restart the consumer?","body":"<ul>\n<li>I start the kafka and I produce 1000 messages in topic <code>user</code></li>\n<li>I create a Spring Boot Consumer that listens on this topic and saves the messages in the database</li>\n</ul>\n<p>What if I close the consumer application and then start it again? How to prevent to save the same messages in the database?</p>\n<p>What if the consumer processes the 1000 messages, I stop the consumer, produce 1000 more messages and start the consumer?</p>\n<pre><code>spring:\n  kafka:\n    consumer:\n      bootstrap-servers:\n        - localhost:9092\n      group-id: &quot;myGroup&quot;\n      auto-offset-reset: earliest\n      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer\n      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer\n  datasource:\n    username: postgres\n    url: jdbc:postgresql://localhost:5432/mydatabase\n    password: admin\n</code></pre>\n"},{"tags":["java","android","flutter","razorpay"],"comments":[{"owner":{"account_id":25289565,"reputation":239,"user_id":19115931,"display_name":"Kokila"},"score":0,"creation_date":1675228858,"post_id":62853695,"comment_id":132881251,"body_markdown":"is your razorpay key is valid?","body":"is your razorpay key is valid?"},{"owner":{"account_id":12587801,"reputation":116,"user_id":9155909,"display_name":"Aman khan Roohaani"},"score":0,"creation_date":1692471842,"post_id":62853695,"comment_id":135628942,"body_markdown":"Hi Aashraya, Did u check this? https://stackoverflow.com/questions/63546926/why-do-i-get-this-error-using-razorpay-with-flutter-uncaught-typeerrorwindow","body":"Hi Aashraya, Did u check this? <a href=\"https://stackoverflow.com/questions/63546926/why-do-i-get-this-error-using-razorpay-with-flutter-uncaught-typeerrorwindow\" title=\"why do i get this error using razorpay with flutter uncaught typeerrorwindow\">stackoverflow.com/questions/63546926/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":20944889,"reputation":91,"user_id":15387997,"display_name":"Tanveer Ahmad"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688625349,"creation_date":1688625349,"answer_id":76626096,"question_id":62853695,"body_markdown":"I thing flutter WebView in which Razorpay is running doesn&#39;t have access to the getDeviceDetails function. This could be due to a number of reasons:\r\n\r\n**The function is not defined:** Ensure that the getDeviceDetails function is properly defined in your code.\r\n\r\n**The function is not in scope:** If the function is defined, make sure it&#39;s in the correct scope. JavaScript functions can only be called from within the scope they&#39;re defined in.\r\n\r\n**The WebView settings**: The settings for the WebView might be preventing the function from being called. You might need to enable JavaScript or adjust other settings.\r\n\r\n**The Razorpay library:** There might be an issue with the version of the Razorpay library you&#39;re using. Try updating to the latest version or down grade some version.","title":"window.getDeviceDetails is not a function in razorpay integration with flutter","body":"<p>I thing flutter WebView in which Razorpay is running doesn't have access to the getDeviceDetails function. This could be due to a number of reasons:</p>\n<p><strong>The function is not defined:</strong> Ensure that the getDeviceDetails function is properly defined in your code.</p>\n<p><strong>The function is not in scope:</strong> If the function is defined, make sure it's in the correct scope. JavaScript functions can only be called from within the scope they're defined in.</p>\n<p><strong>The WebView settings</strong>: The settings for the WebView might be preventing the function from being called. You might need to enable JavaScript or adjust other settings.</p>\n<p><strong>The Razorpay library:</strong> There might be an issue with the version of the Razorpay library you're using. Try updating to the latest version or down grade some version.</p>\n"},{"tags":[],"owner":{"account_id":23316766,"reputation":394,"user_id":17395277,"display_name":"Karma"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695253482,"creation_date":1695253482,"answer_id":77146444,"question_id":62853695,"body_markdown":"You need to send a request to Razorpay to generate an Order ID. \r\nlike this:\r\n\r\n    curl -u &lt;YOUR_KEY_ID&gt;:&lt;YOUR_SECRET&gt; \\\r\n    -X POST https://api.razorpay.com/v1/orders \\\r\n    -H &quot;content-type: application/json&quot; \\\r\n    -d &#39;{\r\n      &quot;amount&quot;: 50000,\r\n      &quot;currency&quot;: &quot;INR&quot;,\r\n      &quot;receipt&quot;: &quot;receipt#1&quot;,\r\n      &quot;payment_capture&quot;: 1\r\n    }&#39;\r\n\r\nI have created a distinct method to produce an Order ID within my application.\r\n\r\n    import &#39;dart:convert&#39;;\r\n    import &#39;package:http/http.dart&#39; as http;\r\n    \r\n    Future&lt;String&gt; generateOrderId(String key, String secret,int amount) async{\r\n      var authn = &#39;Basic &#39; + base64Encode(utf8.encode(&#39;$key:$secret&#39;));\r\n    \r\n      var headers = {\r\n        &#39;content-type&#39;: &#39;application/json&#39;,\r\n        &#39;Authorization&#39;: authn,\r\n      };\r\n    \r\n      var data = &#39;{ &quot;amount&quot;: $amount, &quot;currency&quot;: &quot;INR&quot;, &quot;receipt&quot;: &quot;receipt#R1&quot;, &quot;payment_capture&quot;: 1 }&#39;; // as per my experience the receipt doesn&#39;t play any role in helping you generate a certain pattern in your Order ID!!\r\n    \r\n      var res = await http.post(&#39;https://api.razorpay.com/v1/orders&#39;, headers: headers, body: data);\r\n      if (res.statusCode != 200) throw Exception(&#39;http.post error: statusCode= ${res.statusCode}&#39;);\r\n      print(&#39;ORDER ID response =&gt; ${res.body}&#39;);\r\n    \r\n      return json.decode(res.body)[&#39;id&#39;].toString();\r\n    }\r\n\r\n","title":"window.getDeviceDetails is not a function in razorpay integration with flutter","body":"<p>You need to send a request to Razorpay to generate an Order ID.\nlike this:</p>\n<pre><code>curl -u &lt;YOUR_KEY_ID&gt;:&lt;YOUR_SECRET&gt; \\\n-X POST https://api.razorpay.com/v1/orders \\\n-H &quot;content-type: application/json&quot; \\\n-d '{\n  &quot;amount&quot;: 50000,\n  &quot;currency&quot;: &quot;INR&quot;,\n  &quot;receipt&quot;: &quot;receipt#1&quot;,\n  &quot;payment_capture&quot;: 1\n}'\n</code></pre>\n<p>I have created a distinct method to produce an Order ID within my application.</p>\n<pre><code>import 'dart:convert';\nimport 'package:http/http.dart' as http;\n\nFuture&lt;String&gt; generateOrderId(String key, String secret,int amount) async{\n  var authn = 'Basic ' + base64Encode(utf8.encode('$key:$secret'));\n\n  var headers = {\n    'content-type': 'application/json',\n    'Authorization': authn,\n  };\n\n  var data = '{ &quot;amount&quot;: $amount, &quot;currency&quot;: &quot;INR&quot;, &quot;receipt&quot;: &quot;receipt#R1&quot;, &quot;payment_capture&quot;: 1 }'; // as per my experience the receipt doesn't play any role in helping you generate a certain pattern in your Order ID!!\n\n  var res = await http.post('https://api.razorpay.com/v1/orders', headers: headers, body: data);\n  if (res.statusCode != 200) throw Exception('http.post error: statusCode= ${res.statusCode}');\n  print('ORDER ID response =&gt; ${res.body}');\n\n  return json.decode(res.body)['id'].toString();\n}\n</code></pre>\n"}],"owner":{"account_id":18628557,"reputation":179,"user_id":13577102,"display_name":"Aashraya Singal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1323,"favorite_count":0,"down_vote_count":1,"up_vote_count":17,"answer_count":2,"score":16,"last_activity_date":1695253482,"creation_date":1594496145,"question_id":62853695,"body_markdown":"This is the Error Message that is showing I/chromium: [INFO:CONSOLE(1)] &quot;Uncaught TypeError: window.getDeviceDetails is not a function&quot;, source: https://api.razorpay.com/v1/checkout/public?version=1.5.16&amp;library=checkoutjs&amp;platform=android (1)","title":"window.getDeviceDetails is not a function in razorpay integration with flutter","body":"<p>This is the Error Message that is showing I/chromium: [INFO:CONSOLE(1)] &quot;Uncaught TypeError: window.getDeviceDetails is not a function&quot;, source: <a href=\"https://api.razorpay.com/v1/checkout/public?version=1.5.16&amp;library=checkoutjs&amp;platform=android\" rel=\"noreferrer\">https://api.razorpay.com/v1/checkout/public?version=1.5.16&amp;library=checkoutjs&amp;platform=android</a> (1)</p>\n"},{"tags":["java","spring","generics","dependency-injection"],"owner":{"account_id":17351379,"reputation":11,"user_id":18241395,"display_name":"Sergei S."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695274135,"answer_count":0,"score":0,"last_activity_date":1695253453,"creation_date":1695253453,"question_id":77146442,"body_markdown":"I created a generic interface and several parameterized implementations for it. Then I try to inject a class implementing this interface with a concrete type via the @Autoware annotation but fail.\r\n\r\nI create an interface:\r\n\r\n\r\n```\r\npublic interface DataParser&lt;T&gt; {\r\n     T parse(List&lt;String&gt; objectList);\r\n}\r\n```\r\nand realisation :\r\n\r\n\r\n\r\n```\r\n@Component\r\npublic class DataItemParserImpl implements DataParser&lt;Item&gt; {\r\n    @Override\r\n    public Item parse(List&lt;String&gt; objectList) {\r\n```\r\n\r\nwhen I try to Autoware bean like this \r\n\r\n\r\n```\r\n    @Autowired\r\n    @Qualifier(&quot;dataItemParserImpl&quot;)\r\n    public DataParser&lt;Item&gt; itemDataParser;\r\n```\r\nI doesn&#39;t get any error, but object itemDataParser is NULL. \r\nWhat&#39;s the catch? I&#39;m thinking about type erasure. How to fix, optimize?","title":"Generic Interface autowaring in Spring","body":"<p>I created a generic interface and several parameterized implementations for it. Then I try to inject a class implementing this interface with a concrete type via the @Autoware annotation but fail.</p>\n<p>I create an interface:</p>\n<pre><code>public interface DataParser&lt;T&gt; {\n     T parse(List&lt;String&gt; objectList);\n}\n</code></pre>\n<p>and realisation :</p>\n<pre><code>@Component\npublic class DataItemParserImpl implements DataParser&lt;Item&gt; {\n    @Override\n    public Item parse(List&lt;String&gt; objectList) {\n</code></pre>\n<p>when I try to Autoware bean like this</p>\n<pre><code>    @Autowired\n    @Qualifier(&quot;dataItemParserImpl&quot;)\n    public DataParser&lt;Item&gt; itemDataParser;\n</code></pre>\n<p>I doesn't get any error, but object itemDataParser is NULL.\nWhat's the catch? I'm thinking about type erasure. How to fix, optimize?</p>\n"},{"tags":["java","compression","gzip"],"comments":[{"owner":{"account_id":1083854,"reputation":13775,"user_id":1080064,"accept_rate":43,"display_name":"tkausl"},"score":2,"creation_date":1695249587,"post_id":77146227,"comment_id":136000921,"body_markdown":"You&#39;re treating your bytes as string and then convert it to UTF-8. Don&#39;t do that.","body":"You&#39;re treating your bytes as string and then convert it to UTF-8. Don&#39;t do that."},{"owner":{"account_id":20053569,"reputation":141,"user_id":14701745,"display_name":"HelloWorld"},"score":0,"creation_date":1695250681,"post_id":77146227,"comment_id":136001006,"body_markdown":"Is there way to unzip if I have only the string?","body":"Is there way to unzip if I have only the string?"},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":1,"creation_date":1695370122,"post_id":77146227,"comment_id":136018011,"body_markdown":"You need to receive the gzip as byte[]. A gzip byte stream isn&#39;t convertable to String reliably - whatever encoding you try, the conversion as String and back is unlikely to return the original bytes.","body":"You need to receive the gzip as byte[]. A gzip byte stream isn&#39;t convertable to String reliably - whatever encoding you try, the conversion as String and back is unlikely to return the original bytes."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695253072,"creation_date":1695253072,"answer_id":77146430,"question_id":77146227,"body_markdown":"&gt; _&quot;... What am I doing wrong? I have verified that file is in fact GZIP format and it&#39;s not corrupted. ...&quot;_\r\n\r\nReturn a _byte array_ from _readUsingFileInputStream_, and use the [_String_ constructor](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#%3Cinit%3E(byte%5B%5D,java.nio.charset.Charset)) to create a _UTF-8_ value.\r\n\r\n```java\r\n/**\r\n * Read file content into a String\r\n */\r\nprivate static byte[] readUsingFileInputStream(String fileName) throws IOException {\r\n    try (FileInputStream fis = new FileInputStream(fileName)) {\r\n        return fis.readAllBytes();\r\n    }\r\n}\r\n\r\n/**\r\n * Unzip file content\r\n */\r\npublic static String unzip(final byte[] compressed) throws IOException {\r\n    try (final GZIPInputStream gzipInput = new GZIPInputStream(new ByteArrayInputStream(compressed))) {\r\n        return new String(gzipInput.readAllBytes(), StandardCharsets.UTF_8);\r\n    }\r\n}\r\n```\r\n\r\nExample\r\n\r\n```java\r\nbyte[] compressedData = readUsingFileInputStream(&quot;/path/to/my/compressed_file_json.gz&quot;);\r\nSystem.out.println(unzip(compressedData));\r\n```","title":"Java: Unable to unzip a gzip compressed file?","body":"<blockquote>\n<p><em>&quot;... What am I doing wrong? I have verified that file is in fact GZIP format and it's not corrupted. ...&quot;</em></p>\n</blockquote>\n<p>Return a <em>byte array</em> from <em>readUsingFileInputStream</em>, and use the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#%3Cinit%3E(byte%5B%5D,java.nio.charset.Charset)\" rel=\"nofollow noreferrer\"><em>String</em> constructor</a> to create a <em>UTF-8</em> value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Read file content into a String\n */\nprivate static byte[] readUsingFileInputStream(String fileName) throws IOException {\n    try (FileInputStream fis = new FileInputStream(fileName)) {\n        return fis.readAllBytes();\n    }\n}\n\n/**\n * Unzip file content\n */\npublic static String unzip(final byte[] compressed) throws IOException {\n    try (final GZIPInputStream gzipInput = new GZIPInputStream(new ByteArrayInputStream(compressed))) {\n        return new String(gzipInput.readAllBytes(), StandardCharsets.UTF_8);\n    }\n}\n</code></pre>\n<p>Example</p>\n<pre class=\"lang-java prettyprint-override\"><code>byte[] compressedData = readUsingFileInputStream(&quot;/path/to/my/compressed_file_json.gz&quot;);\nSystem.out.println(unzip(compressedData));\n</code></pre>\n"}],"owner":{"account_id":20053569,"reputation":141,"user_id":14701745,"display_name":"HelloWorld"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695253072,"creation_date":1695248956,"question_id":77146227,"body_markdown":"I am trying to unzip a gzip file content that I have read into memory as a String. \r\n\r\n```\r\n    /**\r\n     * Read file content into a String\r\n     */\r\n    private static String readUsingFileInputStream(String fileName) {\r\n        FileInputStream fis = null;\r\n        byte[] buffer = new byte[10];\r\n        StringBuilder sb = new StringBuilder();\r\n        try {\r\n            fis = new FileInputStream(fileName);\r\n\r\n\r\n            while (fis.read(buffer) != -1) {\r\n                sb.append(new String(buffer));\r\n                buffer = new byte[10];\r\n            }\r\n            fis.close();\r\n\r\n        } catch (IOException e) {\r\n            //...\r\n        return sb.toString();\r\n    }\r\n\r\n    /**\r\n     * Unzip file content\r\n     */\r\n    public static String unzip(final byte[] compressed) {\r\n        try (final GZIPInputStream gzipInput = new GZIPInputStream(new ByteArrayInputStream(compressed));\r\n            final StringWriter stringWriter = new StringWriter()) {\r\n            IOUtils.copy(gzipInput, stringWriter, UTF_8);\r\n            return stringWriter.toString();\r\n        } catch (IOException e) {\r\n            throw new UncheckedIOException(&quot;Error while decompression!&quot;, e);\r\n        }\r\n    }\r\n```\r\nThen in my `main` method, I am doing:\r\n\r\n```\r\nString compressedData = readUsingFileInputStream(&quot;/path/to/my/compressed_file_json.gz&quot;);\r\nSystem.out.println(unzip(compressedData.getBytes(UTF_8)));\r\n```\r\n\r\nBut I am getting following error:\r\n\r\n```\r\njava.util.zip.ZipException: Not in GZIP format\r\n\tat java.base/java.util.zip.GZIPInputStream.readHeader(GZIPInputStream.java:166)\r\n\tat java.base/java.util.zip.GZIPInputStream.&lt;init&gt;(GZIPInputStream.java:80)\r\n\tat java.base/java.util.zip.GZIPInputStream.&lt;init&gt;(GZIPInputStream.java:92)\r\n```\r\n\r\nWhat am I doing wrong? I have verified that file is in fact GZIP format and it&#39;s not corrupted.\r\n\r\nNote: I am aware that I can input the FileInputStream directly in the GZIPInputStream, but for the purposes of the actual problem, I don&#39;t have access to FileInputStream, just resulting the String.","title":"Java: Unable to unzip a gzip compressed file?","body":"<p>I am trying to unzip a gzip file content that I have read into memory as a String.</p>\n<pre><code>    /**\n     * Read file content into a String\n     */\n    private static String readUsingFileInputStream(String fileName) {\n        FileInputStream fis = null;\n        byte[] buffer = new byte[10];\n        StringBuilder sb = new StringBuilder();\n        try {\n            fis = new FileInputStream(fileName);\n\n\n            while (fis.read(buffer) != -1) {\n                sb.append(new String(buffer));\n                buffer = new byte[10];\n            }\n            fis.close();\n\n        } catch (IOException e) {\n            //...\n        return sb.toString();\n    }\n\n    /**\n     * Unzip file content\n     */\n    public static String unzip(final byte[] compressed) {\n        try (final GZIPInputStream gzipInput = new GZIPInputStream(new ByteArrayInputStream(compressed));\n            final StringWriter stringWriter = new StringWriter()) {\n            IOUtils.copy(gzipInput, stringWriter, UTF_8);\n            return stringWriter.toString();\n        } catch (IOException e) {\n            throw new UncheckedIOException(&quot;Error while decompression!&quot;, e);\n        }\n    }\n</code></pre>\n<p>Then in my <code>main</code> method, I am doing:</p>\n<pre><code>String compressedData = readUsingFileInputStream(&quot;/path/to/my/compressed_file_json.gz&quot;);\nSystem.out.println(unzip(compressedData.getBytes(UTF_8)));\n</code></pre>\n<p>But I am getting following error:</p>\n<pre><code>java.util.zip.ZipException: Not in GZIP format\n    at java.base/java.util.zip.GZIPInputStream.readHeader(GZIPInputStream.java:166)\n    at java.base/java.util.zip.GZIPInputStream.&lt;init&gt;(GZIPInputStream.java:80)\n    at java.base/java.util.zip.GZIPInputStream.&lt;init&gt;(GZIPInputStream.java:92)\n</code></pre>\n<p>What am I doing wrong? I have verified that file is in fact GZIP format and it's not corrupted.</p>\n<p>Note: I am aware that I can input the FileInputStream directly in the GZIPInputStream, but for the purposes of the actual problem, I don't have access to FileInputStream, just resulting the String.</p>\n"},{"tags":["java","string","file","if-statement","text"],"comments":[{"owner":{"account_id":10795251,"reputation":5207,"user_id":7941251,"display_name":"SuperStormer"},"score":5,"creation_date":1695232000,"post_id":77144846,"comment_id":135998236,"body_markdown":"Presumably it allows for comments in the form of `# comment`. By no means is it necessary, but it is helpful for hand-written files.","body":"Presumably it allows for comments in the form of <code># comment</code>. By no means is it necessary, but it is helpful for hand-written files."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1695232357,"post_id":77144846,"comment_id":135998299,"body_markdown":"Yes, ignoring comments as @SuperStormer said. You need to make a decision on whether you&#39;re reading resources or arbitrarily-located files though, as the two means do not mix well","body":"Yes, ignoring comments as @SuperStormer said. You need to make a decision on whether you&#39;re reading resources or arbitrarily-located files though, as the two means do not mix well"},{"owner":{"account_id":200728,"reputation":3833,"user_id":446738,"accept_rate":71,"display_name":"worpet"},"score":3,"creation_date":1695232998,"post_id":77144846,"comment_id":135998441,"body_markdown":"It&#39;s your code so it&#39;s up to you. If you don&#39;t want to skip lines that begin with `#` or don&#39;t expect lines like this in your input, you don&#39;t have to do this.","body":"It&#39;s your code so it&#39;s up to you. If you don&#39;t want to skip lines that begin with <code>#</code> or don&#39;t expect lines like this in your input, you don&#39;t have to do this."},{"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"score":1,"creation_date":1695234427,"post_id":77144846,"comment_id":135998710,"body_markdown":"Its probably for commenting out lines, you can disallow for it, but if there exists somewhere files with commented out lines then you will get in trouble as your code might fail to load them.","body":"Its probably for commenting out lines, you can disallow for it, but if there exists somewhere files with commented out lines then you will get in trouble as your code might fail to load them."}],"answers":[{"tags":[],"owner":{"account_id":25647583,"reputation":122,"user_id":19415431,"display_name":"Divyansh Gemini"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695237307,"creation_date":1695237307,"answer_id":77145364,"question_id":77144846,"body_markdown":"In the `for` loop, we are checking for  `line.indexOf(&#39;#&#39;) == 0` to check if the line is a comment. So that the line will be ignored.\r\n\r\nYou can also use `line.charAt(0) == &#39;#&#39;` to check for comments, both ways are correct.\r\n\r\n**Commented the code for better explanation of each statement:**\r\n```\r\n// getting the complete path of &#39;filmovi.txt&#39; file as Path&#39;s object\r\nPath path = Paths.get(getClass().getClassLoader().getResource(&quot;filmovi.txt&quot;).toURI());\r\n         \r\n// getting all lines of the file as a List\r\nList&lt;String&gt; lines = Files.readAllLines(path, Charset.forName(&quot;UTF-8&quot;));\r\n\r\n// iterating over each line in the List of lines\r\nfor (String line : lines) {\r\n            \r\n        // removing extra spaces from beginning &amp; end of each line\r\n        line = line.trim();                                 \r\n\r\n        // if the line is empty (means it has no characters) or line&#39;s first character is &#39;#&#39; (means it is a comment)\r\n        if (line.equals(&quot;&quot;) || line.indexOf(&#39;#&#39;) == 0)\r\n \r\n                // then skipping further statements of the loop, &amp; continuing for next line\r\n                continue;\r\n\r\n        // splitting the line by delimiter &#39;;&#39; &amp; storing splitter parts into the array of String\r\n        String[] tokens = line.split(&quot;;&quot;);\r\n       \r\n        // storing the line number (which is written in starting of each line) in a Long type variable\r\n        Long id = Long.parseLong(tokens[0]);\r\n     \r\n        // storing the main text of the line in a String type variable\r\n        String naziv = tokens[1];\r\n  \r\n        // storing the number written at the end of each line in int type variable\r\n        int trajanje  = Integer.parseInt(tokens[2]);\r\n\r\n        ...\r\n}\r\n```\r\n","title":"Java - String that starts with &#39;#&#39;","body":"<p>In the <code>for</code> loop, we are checking for  <code>line.indexOf('#') == 0</code> to check if the line is a comment. So that the line will be ignored.</p>\n<p>You can also use <code>line.charAt(0) == '#'</code> to check for comments, both ways are correct.</p>\n<p><strong>Commented the code for better explanation of each statement:</strong></p>\n<pre><code>// getting the complete path of 'filmovi.txt' file as Path's object\nPath path = Paths.get(getClass().getClassLoader().getResource(&quot;filmovi.txt&quot;).toURI());\n         \n// getting all lines of the file as a List\nList&lt;String&gt; lines = Files.readAllLines(path, Charset.forName(&quot;UTF-8&quot;));\n\n// iterating over each line in the List of lines\nfor (String line : lines) {\n            \n        // removing extra spaces from beginning &amp; end of each line\n        line = line.trim();                                 \n\n        // if the line is empty (means it has no characters) or line's first character is '#' (means it is a comment)\n        if (line.equals(&quot;&quot;) || line.indexOf('#') == 0)\n \n                // then skipping further statements of the loop, &amp; continuing for next line\n                continue;\n\n        // splitting the line by delimiter ';' &amp; storing splitter parts into the array of String\n        String[] tokens = line.split(&quot;;&quot;);\n       \n        // storing the line number (which is written in starting of each line) in a Long type variable\n        Long id = Long.parseLong(tokens[0]);\n     \n        // storing the main text of the line in a String type variable\n        String naziv = tokens[1];\n  \n        // storing the number written at the end of each line in int type variable\n        int trajanje  = Integer.parseInt(tokens[2]);\n\n        ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695252640,"creation_date":1695252640,"answer_id":77146400,"question_id":77144846,"body_markdown":"If you&#39;re going to treat the input as a resource, you could do it like this:\r\n```\r\nimport java.util.Map;\r\nimport java.util.List;\r\nimport java.util.Scanner;\r\nimport java.util.stream.Collectors;\r\n\r\npublic class FilmParser {\r\n    public static void main(String[] args) throws Exception {\r\n        Map&lt;Long, List&lt;Film&gt;&gt; filmMap = null;\r\n        try (Scanner sc = new Scanner(FilmParser.class.getResourceAsStream(&quot;/films.csv&quot;), &quot;UTF-8&quot;).useDelimiter(&quot;\\\\R&quot;)) {\r\n            filmMap = sc.tokens()\r\n                .map(String::trim)\r\n                .filter(s -&gt;!s.startsWith(&quot;#&quot;))\r\n                .filter(s -&gt;!s.isEmpty())\r\n                .map(Film::valueOfColonSV)\r\n                .collect(Collectors.groupingBy(Film::getId));\r\n        }\r\n        System.out.println(filmMap);\r\n    }\r\n}\r\n```\r\nI&#39;ve given the `Film` class a convenience method to create an instance from CSV","title":"Java - String that starts with &#39;#&#39;","body":"<p>If you're going to treat the input as a resource, you could do it like this:</p>\n<pre><code>import java.util.Map;\nimport java.util.List;\nimport java.util.Scanner;\nimport java.util.stream.Collectors;\n\npublic class FilmParser {\n    public static void main(String[] args) throws Exception {\n        Map&lt;Long, List&lt;Film&gt;&gt; filmMap = null;\n        try (Scanner sc = new Scanner(FilmParser.class.getResourceAsStream(&quot;/films.csv&quot;), &quot;UTF-8&quot;).useDelimiter(&quot;\\\\R&quot;)) {\n            filmMap = sc.tokens()\n                .map(String::trim)\n                .filter(s -&gt;!s.startsWith(&quot;#&quot;))\n                .filter(s -&gt;!s.isEmpty())\n                .map(Film::valueOfColonSV)\n                .collect(Collectors.groupingBy(Film::getId));\n        }\n        System.out.println(filmMap);\n    }\n}\n</code></pre>\n<p>I've given the <code>Film</code> class a convenience method to create an instance from CSV</p>\n"}],"owner":{"account_id":22370856,"reputation":11,"user_id":16585952,"display_name":"VennaTT"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1695252640,"creation_date":1695231916,"question_id":77144846,"body_markdown":"Can someone explain to me, why we need to write &#39;line.indexOf(&#39;#&#39;) == 0&#39; in this code? I&#39;m trying to load data from a text file and create objects. \r\n\r\n             Path path = Paths.get(getClass().getClassLoader().getResource(&quot;filmovi.txt&quot;).toURI());\r\n\t         //path is content of filmovi.txt\r\n\t\t     List&lt;String&gt; lines = Files.readAllLines(path, Charset.forName(&quot;UTF-8&quot;));\r\n             //I put that content in List\r\n\r\n\t\t\tfor (String line : lines) {\r\n\t\t\t\tline = line.trim();\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\tif (line.equals(&quot;&quot;) || line.indexOf(&#39;#&#39;) == 0)\t//why we check &#39;#&#39;\t\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tString[] tokens = line.split(&quot;;&quot;);\r\n\t\t\t\tLong id = Long.parseLong(tokens[0]);\r\n\t\t\t\tString naziv = tokens[1];\r\n\t\t\t\tint trajanje  = Integer.parseInt(tokens[2]);\r\n\r\n\t\t\t\tfilmovi.put(Long.parseLong(tokens[0]), new Film(id, naziv, trajanje));\r\n\t\t\t\tif(nextId&lt;id)\r\n\t\t\t\t\tnextId=id;\r\n\r\n\r\nThis is the content of the file I am trying to load. I just don&#39;t understand why is this (&#39;line.indexOf(&#39;#&#39;) == 0&#39;) important to check?\r\n\r\n```\r\n1;The Shining;146\r\n2;One Flew Over the Cuckoo&#39;s Nest;133\r\n3;The Little Shop of Horrors;72\r\n```","title":"Java - String that starts with &#39;#&#39;","body":"<p>Can someone explain to me, why we need to write 'line.indexOf('#') == 0' in this code? I'm trying to load data from a text file and create objects.</p>\n<pre><code>         Path path = Paths.get(getClass().getClassLoader().getResource(&quot;filmovi.txt&quot;).toURI());\n         //path is content of filmovi.txt\n         List&lt;String&gt; lines = Files.readAllLines(path, Charset.forName(&quot;UTF-8&quot;));\n         //I put that content in List\n\n        for (String line : lines) {\n            line = line.trim();                                 \n\n            if (line.equals(&quot;&quot;) || line.indexOf('#') == 0)  //why we check '#'  \n                continue;\n            String[] tokens = line.split(&quot;;&quot;);\n            Long id = Long.parseLong(tokens[0]);\n            String naziv = tokens[1];\n            int trajanje  = Integer.parseInt(tokens[2]);\n\n            filmovi.put(Long.parseLong(tokens[0]), new Film(id, naziv, trajanje));\n            if(nextId&lt;id)\n                nextId=id;\n</code></pre>\n<p>This is the content of the file I am trying to load. I just don't understand why is this ('line.indexOf('#') == 0') important to check?</p>\n<pre><code>1;The Shining;146\n2;One Flew Over the Cuckoo's Nest;133\n3;The Little Shop of Horrors;72\n</code></pre>\n"},{"tags":["java","for-loop"],"comments":[{"owner":{"account_id":2119809,"reputation":50969,"user_id":1883316,"display_name":"Tim Roberts"},"score":0,"creation_date":1694907583,"post_id":77119986,"comment_id":135953428,"body_markdown":"You have two `in.nextDouble()` calls.  Each one of those needs to read a number.  You need to fetch the value ONCE into a variable, then test the variable.","body":"You have two <code>in.nextDouble()</code> calls.  Each one of those needs to read a number.  You need to fetch the value ONCE into a variable, then test the variable."}],"answers":[{"comments":[{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1695027072,"post_id":77120008,"comment_id":135964108,"body_markdown":"`hasNextDouble()` does not consume input. Of these two, only `nextDouble()` does.","body":"<code>hasNextDouble()</code> does not consume input. Of these two, only <code>nextDouble()</code> does."}],"tags":[],"owner":{"account_id":17987542,"reputation":91,"user_id":13072453,"display_name":"Drecomposer"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695252587,"creation_date":1694908282,"answer_id":77120008,"question_id":77119986,"body_markdown":"The problem you are experiencing arises from the fact that when you&#39;re using methods like `nextDouble()`, you&#39;re actually consuming input. Each time you call this method, the scanner will read from the input source.\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class CountDownByTwos {\r\n   public static void main(String[] args) {\r\n        Scanner in = new Scanner(System.in);\r\n\r\n        System.out.println(&quot;Input a positive number and I will count down by 2&quot;);\r\n\r\n        // Keep prompting the user until a valid input is provided\r\n        double num = -1; // initialized to a negative number to ensure the loop runs at least once\r\n        while (num &lt; 0) {\r\n            if (!in.hasNextDouble()) {\r\n                String input = in.next();\r\n                System.err.println(input + &quot; is not a number, try again please&quot;);\r\n            } else {\r\n                num = in.nextDouble();\r\n                if (num &lt; 0) {\r\n                    System.err.println(&quot;Please input a POSITIVE number.&quot;);\r\n                    num = -1; // reset it to a negative value so the loop will continue\r\n                }\r\n            }\r\n        }\r\n\r\n        // for statement to count down\r\n        for (double i = num; i &gt;= 0; i = i - 2) {\r\n            System.out.println(i);\r\n        }\r\n    }\r\n}\r\n```","title":"How can I fix my code to accept a basic number input the first time, not the second time?","body":"<p>The problem you are experiencing arises from the fact that when you're using methods like <code>nextDouble()</code>, you're actually consuming input. Each time you call this method, the scanner will read from the input source.</p>\n<pre><code>import java.util.Scanner;\n\npublic class CountDownByTwos {\n   public static void main(String[] args) {\n        Scanner in = new Scanner(System.in);\n\n        System.out.println(&quot;Input a positive number and I will count down by 2&quot;);\n\n        // Keep prompting the user until a valid input is provided\n        double num = -1; // initialized to a negative number to ensure the loop runs at least once\n        while (num &lt; 0) {\n            if (!in.hasNextDouble()) {\n                String input = in.next();\n                System.err.println(input + &quot; is not a number, try again please&quot;);\n            } else {\n                num = in.nextDouble();\n                if (num &lt; 0) {\n                    System.err.println(&quot;Please input a POSITIVE number.&quot;);\n                    num = -1; // reset it to a negative value so the loop will continue\n                }\n            }\n        }\n\n        // for statement to count down\n        for (double i = num; i &gt;= 0; i = i - 2) {\n            System.out.println(i);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24735826,"reputation":1,"user_id":18623206,"display_name":"Cuber6251"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694918314,"creation_date":1694918278,"answer_id":77120291,"question_id":77119986,"body_markdown":"You are getting two inputs because you are calling in.nextDouble() twice, once when checking if it is negative, and once when declaring the num variable.\r\n\r\nThis code worked for me: `\r\n    \r\n    import java.util.Scanner;\r\n    \r\n    public class CountDownByTwos {\r\n        public static void main(String[] args) {\r\n            Scanner in = new Scanner(System.in);\r\n    \r\n            System.out.println(&quot;Input a positive number and I will count down by 2&quot;);\r\n    \r\n            //our number used for input\r\n            double num = 0;\r\n    \r\n            boolean isNum = false;\r\n    \r\n            //getting input while their input is not a number\r\n            while(!isNum) {\r\n                //trying to get a double input, if not double it is caught\r\n                try {\r\n                    //getting the input\r\n                    num = in.nextDouble();\r\n                    isNum = true;\r\n                } catch (Exception e) {\r\n                    //if input was caught\r\n                    String input = in.nextLine();\r\n                    System.err.println(input + &quot; is not a number, try again please&quot;);\r\n                    //going to the start of the loop again\r\n                    continue;\r\n                }\r\n                //if the try catch succeeded\r\n                if(num &lt; 0){\r\n                    //making isNum false so we start the loop again\r\n                    isNum = false;\r\n                    System.err.println(&quot;Please input a POSITIVE number next time&quot;);\r\n                }\r\n            }\r\n    \r\n            for (double i = num; i &gt;= 0; i -= 2) {\r\n                System.out.println(i);\r\n            }\r\n        }\r\n    }\r\n`","title":"How can I fix my code to accept a basic number input the first time, not the second time?","body":"<p>You are getting two inputs because you are calling in.nextDouble() twice, once when checking if it is negative, and once when declaring the num variable.</p>\n<p>This code worked for me: `</p>\n<pre><code>import java.util.Scanner;\n\npublic class CountDownByTwos {\n    public static void main(String[] args) {\n        Scanner in = new Scanner(System.in);\n\n        System.out.println(&quot;Input a positive number and I will count down by 2&quot;);\n\n        //our number used for input\n        double num = 0;\n\n        boolean isNum = false;\n\n        //getting input while their input is not a number\n        while(!isNum) {\n            //trying to get a double input, if not double it is caught\n            try {\n                //getting the input\n                num = in.nextDouble();\n                isNum = true;\n            } catch (Exception e) {\n                //if input was caught\n                String input = in.nextLine();\n                System.err.println(input + &quot; is not a number, try again please&quot;);\n                //going to the start of the loop again\n                continue;\n            }\n            //if the try catch succeeded\n            if(num &lt; 0){\n                //making isNum false so we start the loop again\n                isNum = false;\n                System.err.println(&quot;Please input a POSITIVE number next time&quot;);\n            }\n        }\n\n        for (double i = num; i &gt;= 0; i -= 2) {\n            System.out.println(i);\n        }\n    }\n}\n</code></pre>\n<p>`</p>\n"},{"tags":[],"owner":{"account_id":26975329,"reputation":1,"user_id":20540671,"display_name":"Marcocholla01"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695210203,"creation_date":1695122058,"answer_id":77134047,"question_id":77119986,"body_markdown":"The issue you&#39;re encountering is due to the way you structured your code. The `hasNextDouble()` and `nextDouble()` methods of the Scanner class should be used together to ensure proper input reading. In your current code, you&#39;re calling `in.nextDouble()` multiple times without re-prompting the user for input.\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class CountDownByTwos {\r\n    public static void main(String[] args) {\r\n        Scanner in = new Scanner(System.in);\r\n        \r\n        double num = 0; // Initialize num\r\n        \r\n        // Get a valid positive number from the user\r\n        while (true) {\r\n            System.out.println(&quot;Input a positive number and I will count down by 2&quot;);\r\n            \r\n            if (in.hasNextDouble()) {\r\n                num = in.nextDouble();\r\n                if (num &gt;= 0) {\r\n                    break; // Break the loop if a valid positive number is provided\r\n                } else {\r\n                    System.err.println(&quot;Please input a POSITIVE number&quot;);\r\n                }\r\n            } else {\r\n                String input = in.next();\r\n                System.err.println(input + &quot; is not a number, try again please&quot;);\r\n            }\r\n        }\r\n        \r\n        // Use a for loop to count down by 2 until it reaches 0\r\n        for (double i = num; i &gt;= 0; i -= 2) {\r\n            System.out.println(i);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nIn this code:\r\n\r\n1. We initialize `num` to `0` outside the loop to ensure it&#39;s defined before being used.\r\n\r\n2. We use a `while` loop to repeatedly prompt the user for input until a valid positive number is provided.\r\n\r\n3. Inside the loop, we use `hasNextDouble()` to check if the next input is a double. If it is, we then check if it&#39;s greater than or equal to `0`. If both conditions are met, we break out of the loop. If not, we display an error message.\r\n\r\n4. If the input is not a valid double, we display an error message and continue the loop.\r\n\r\n5. Once a valid positive number is obtained, we use a `for` loop to count down by 2 until it reaches `0`.\r\n\r\n","title":"How can I fix my code to accept a basic number input the first time, not the second time?","body":"<p>The issue you're encountering is due to the way you structured your code. The <code>hasNextDouble()</code> and <code>nextDouble()</code> methods of the Scanner class should be used together to ensure proper input reading. In your current code, you're calling <code>in.nextDouble()</code> multiple times without re-prompting the user for input.</p>\n<pre><code>import java.util.Scanner;\n\npublic class CountDownByTwos {\n    public static void main(String[] args) {\n        Scanner in = new Scanner(System.in);\n        \n        double num = 0; // Initialize num\n        \n        // Get a valid positive number from the user\n        while (true) {\n            System.out.println(&quot;Input a positive number and I will count down by 2&quot;);\n            \n            if (in.hasNextDouble()) {\n                num = in.nextDouble();\n                if (num &gt;= 0) {\n                    break; // Break the loop if a valid positive number is provided\n                } else {\n                    System.err.println(&quot;Please input a POSITIVE number&quot;);\n                }\n            } else {\n                String input = in.next();\n                System.err.println(input + &quot; is not a number, try again please&quot;);\n            }\n        }\n        \n        // Use a for loop to count down by 2 until it reaches 0\n        for (double i = num; i &gt;= 0; i -= 2) {\n            System.out.println(i);\n        }\n    }\n}\n\n</code></pre>\n<p>In this code:</p>\n<ol>\n<li><p>We initialize <code>num</code> to <code>0</code> outside the loop to ensure it's defined before being used.</p>\n</li>\n<li><p>We use a <code>while</code> loop to repeatedly prompt the user for input until a valid positive number is provided.</p>\n</li>\n<li><p>Inside the loop, we use <code>hasNextDouble()</code> to check if the next input is a double. If it is, we then check if it's greater than or equal to <code>0</code>. If both conditions are met, we break out of the loop. If not, we display an error message.</p>\n</li>\n<li><p>If the input is not a valid double, we display an error message and continue the loop.</p>\n</li>\n<li><p>Once a valid positive number is obtained, we use a <code>for</code> loop to count down by 2 until it reaches <code>0</code>.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":29462540,"reputation":9,"user_id":22577001,"display_name":"Topy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77120008,"answer_count":3,"score":0,"last_activity_date":1695252587,"creation_date":1694907462,"question_id":77119986,"body_markdown":"I need to make a simple code for homework where I take some input from the user and use a for-loop to count down by 2 until it reaches 0.\r\n\r\nI could do this part, but for some reason when I input a number it wont do anything until I input another number. I don&#39;t know why the first number is ignored, and would appreciate some help\r\n\r\n(Also, I can only give a wrong input once and I don&#39;t know how to make it accept multiple wrong inputs without breaking. If anyone knows how to fix that too I would appreciate it)\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class CountDownByTwos {\r\n        public static void main(String[] args) {\r\n            Scanner in = new Scanner(System.in);\r\n                System.out.println(&quot;Input a positive number and I will count down by 2&quot;);\r\n            //validation\r\n            if(!in.hasNextDouble()) {\r\n                String input = in.next();\r\n                    System.err.println(input+&quot; is not a number, try again please&quot;);\r\n            }\r\n            if(in.nextDouble() &lt; 0) {\r\n                    System.err.println(&quot;Please input a POSITIVE number next time&quot;);\r\n            }\r\n            //catch the proper input\r\n            double num = in.nextDouble();\r\n            //for statement with all the stuff in it\r\n            for(double i = num; i &gt;= 0; i = i-2) {\r\n                    System.out.println(i);\r\n            }\r\n        }\r\n    }\r\n\r\nI tried changing the validation to while loops and if-else ones, but those just added more errors. I think the hiccup comes from the validation, but it just randomly didn&#39;t accept the first correct input and refused to stop doing that, so idk.\r\n\r\nI know this is very simple code, but I just cannot figure out how to fix this and need some help.","title":"How can I fix my code to accept a basic number input the first time, not the second time?","body":"<p>I need to make a simple code for homework where I take some input from the user and use a for-loop to count down by 2 until it reaches 0.</p>\n<p>I could do this part, but for some reason when I input a number it wont do anything until I input another number. I don't know why the first number is ignored, and would appreciate some help</p>\n<p>(Also, I can only give a wrong input once and I don't know how to make it accept multiple wrong inputs without breaking. If anyone knows how to fix that too I would appreciate it)</p>\n<pre><code>import java.util.Scanner;\n\npublic class CountDownByTwos {\n    public static void main(String[] args) {\n        Scanner in = new Scanner(System.in);\n            System.out.println(&quot;Input a positive number and I will count down by 2&quot;);\n        //validation\n        if(!in.hasNextDouble()) {\n            String input = in.next();\n                System.err.println(input+&quot; is not a number, try again please&quot;);\n        }\n        if(in.nextDouble() &lt; 0) {\n                System.err.println(&quot;Please input a POSITIVE number next time&quot;);\n        }\n        //catch the proper input\n        double num = in.nextDouble();\n        //for statement with all the stuff in it\n        for(double i = num; i &gt;= 0; i = i-2) {\n                System.out.println(i);\n        }\n    }\n}\n</code></pre>\n<p>I tried changing the validation to while loops and if-else ones, but those just added more errors. I think the hiccup comes from the validation, but it just randomly didn't accept the first correct input and refused to stop doing that, so idk.</p>\n<p>I know this is very simple code, but I just cannot figure out how to fix this and need some help.</p>\n"},{"tags":["java","android","androidx","exoplayer","android-media3"],"owner":{"account_id":29346444,"reputation":1,"user_id":22484662,"display_name":"Sb HaniF "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695252484,"creation_date":1694769761,"question_id":77111172,"body_markdown":"I Create an app for playing video with fetching folders and files from storage.\r\n\r\nI implement **Androidx.media3.exoplayer** and playing video from a folder that contains multiple videos.\r\nMy problem is Next Button is unClickable, all button are clickable by default but Next Button is not clickable.\r\n\r\n**Note**: I&#39;m not customised just play for test exoplayer and i got a problem. \r\n\r\nIf Anyone fix this issue?\r\nPlease help me...\r\n\r\n\r\n[This is problems image][1]\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wup6S.jpg\r\n  [2]: https://i.stack.imgur.com/JcSYf.jpg","title":"Why Androidx.media3.exoplayer Video Next (exo_next) button not Clickable?","body":"<p>I Create an app for playing video with fetching folders and files from storage.</p>\n<p>I implement <strong>Androidx.media3.exoplayer</strong> and playing video from a folder that contains multiple videos.\nMy problem is Next Button is unClickable, all button are clickable by default but Next Button is not clickable.</p>\n<p><strong>Note</strong>: I'm not customised just play for test exoplayer and i got a problem.</p>\n<p>If Anyone fix this issue?\nPlease help me...</p>\n<p><a href=\"https://i.stack.imgur.com/wup6S.jpg\" rel=\"nofollow noreferrer\">This is problems image</a>\n<a href=\"https://i.stack.imgur.com/JcSYf.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JcSYf.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":297814,"reputation":25324,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":1,"creation_date":1442390890,"post_id":9499560,"comment_id":53057960,"body_markdown":"possible duplicate of [Compare two Byte Arrays? (Java)](http://stackoverflow.com/questions/5440039/compare-two-byte-arrays-java)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/5440039/compare-two-byte-arrays-java\">Compare two Byte Arrays? (Java)</a>"},{"owner":{"account_id":2201793,"reputation":3516,"user_id":1946016,"accept_rate":83,"display_name":"karthikdivi"},"score":0,"creation_date":1604675571,"post_id":9499560,"comment_id":114427641,"body_markdown":"Arrays.equals works. Run and check online here https://onecompiler.com/java/3wc4ec2su","body":"Arrays.equals works. Run and check online here <a href=\"https://onecompiler.com/java/3wc4ec2su\" rel=\"nofollow noreferrer\">onecompiler.com/java/3wc4ec2su</a>"}],"answers":[{"comments":[{"owner":{"account_id":1059829,"reputation":1432,"user_id":1061699,"display_name":"Lazy"},"score":0,"creation_date":1330520741,"post_id":9499597,"comment_id":12028012,"body_markdown":"if i have a &#39;HashMap&lt;byte[], IoBuffer&gt;&#39; and i &#39;put(a, buffer)&#39;,,,if i &#39;print(map.containsKey(b))&#39; it print &quot;false&quot;, is it the same reason????","body":"if i have a &#39;HashMap&lt;byte[], IoBuffer&gt;&#39; and i &#39;put(a, buffer)&#39;,,,if i &#39;print(map.containsKey(b))&#39; it print &quot;false&quot;, is it the same reason????"},{"owner":{"account_id":82188,"reputation":7572,"user_id":231290,"accept_rate":94,"display_name":"Lukasz"},"score":3,"creation_date":1330520959,"post_id":9499597,"comment_id":12028097,"body_markdown":"@Lazy: Yes, the reason is the same... you can&#39;t use raw byte[] as keys in maps... Read more here: http://stackoverflow.com/questions/1058149/using-a-byte-array-as-hashmap-key-java","body":"@Lazy: Yes, the reason is the same... you can&#39;t use raw byte[] as keys in maps... Read more here: <a href=\"http://stackoverflow.com/questions/1058149/using-a-byte-array-as-hashmap-key-java\" title=\"using a byte array as hashmap key java\">stackoverflow.com/questions/1058149/&hellip;</a>"}],"tags":[],"owner":{"account_id":82188,"reputation":7572,"user_id":231290,"accept_rate":94,"display_name":"Lukasz"},"comment_count":2,"down_vote_count":0,"up_vote_count":240,"is_accepted":true,"score":240,"last_activity_date":1330520305,"creation_date":1330520305,"answer_id":9499597,"question_id":9499560,"body_markdown":"Use `Arrays.equals()` if you want to compare the actual content of arrays that contain primitive types values (like byte).\r\n\r\n    System.out.println(Arrays.equals(aa, bb));\r\n\r\nUse `Arrays.deepEquals` for comparison of arrays that contain objects.","title":"how to compare the Java Byte[] array?","body":"<p>Use <code>Arrays.equals()</code> if you want to compare the actual content of arrays that contain primitive types values (like byte).</p>\n\n<pre><code>System.out.println(Arrays.equals(aa, bb));\n</code></pre>\n\n<p>Use <code>Arrays.deepEquals</code> for comparison of arrays that contain objects.</p>\n"},{"comments":[{"owner":{"account_id":8847049,"reputation":3637,"user_id":6607497,"accept_rate":17,"display_name":"U. Windl"},"score":2,"creation_date":1524033634,"post_id":9499610,"comment_id":86801105,"body_markdown":"That&#39;s part of the Java nonsense: Why use a static method from a different class to compare objects in another class? That is: Why didn&#39;t they override the `equals()` method?","body":"That&#39;s part of the Java nonsense: Why use a static method from a different class to compare objects in another class? That is: Why didn&#39;t they override the <code>equals()</code> method?"},{"owner":{"account_id":3109658,"reputation":356,"user_id":2631710,"display_name":"JHead"},"score":0,"creation_date":1672930008,"post_id":9499610,"comment_id":132387530,"body_markdown":"@U.Windl It is a clean code design pattern: the data structure should be separated from the logic. In my experience, the code is much more transparent and further development is easier this way.","body":"@U.Windl It is a clean code design pattern: the data structure should be separated from the logic. In my experience, the code is much more transparent and further development is easier this way."}],"tags":[],"owner":{"account_id":322748,"reputation":36417,"user_id":642340,"accept_rate":83,"display_name":"soulcheck"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1330520341,"creation_date":1330520341,"answer_id":9499610,"question_id":9499560,"body_markdown":"Cause they&#39;re not equal, ie: they&#39;re different arrays with equal elements inside.\r\n\r\nTry using `Arrays.equals()` or `Arrays.deepEquals()`. ","title":"how to compare the Java Byte[] array?","body":"<p>Cause they're not equal, ie: they're different arrays with equal elements inside.</p>\n\n<p>Try using <code>Arrays.equals()</code> or <code>Arrays.deepEquals()</code>. </p>\n"},{"comments":[{"owner":{"account_id":1059829,"reputation":1432,"user_id":1061699,"display_name":"Lazy"},"score":0,"creation_date":1330520580,"post_id":9499615,"comment_id":12027951,"body_markdown":"if i have a &#39;HashMap&lt;byte[], IoBuffer&gt;&#39; and i &#39;put(a, buffer)&#39;,,,if i &#39;print(map.containsKey(b))&#39; it print &quot;false&quot;, is it the same reason????","body":"if i have a &#39;HashMap&lt;byte[], IoBuffer&gt;&#39; and i &#39;put(a, buffer)&#39;,,,if i &#39;print(map.containsKey(b))&#39; it print &quot;false&quot;, is it the same reason????"},{"owner":{"account_id":11356,"reputation":26481,"user_id":21849,"accept_rate":96,"display_name":"Dan Vinton"},"score":0,"creation_date":1330520890,"post_id":9499615,"comment_id":12028069,"body_markdown":"@Lazy - see http://stackoverflow.com/questions/1058149/using-a-byte-array-as-hashmap-key-java","body":"@Lazy - see <a href=\"http://stackoverflow.com/questions/1058149/using-a-byte-array-as-hashmap-key-java\" title=\"using a byte array as hashmap key java\">stackoverflow.com/questions/1058149/&hellip;</a>"}],"tags":[],"owner":{"account_id":11356,"reputation":26481,"user_id":21849,"accept_rate":96,"display_name":"Dan Vinton"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1330520946,"creation_date":1330520380,"answer_id":9499615,"question_id":9499560,"body_markdown":"have you looked at [`Arrays.equals()`][1]?\r\n\r\nEdit: if, as per your comment, the issue is using a byte array as a HashMap key then see [this question][2].\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#equals%28byte%5B%5D,%20byte%5B%5D%29\r\n  [2]: https://stackoverflow.com/questions/1058149/using-a-byte-array-as-hashmap-key-java","title":"how to compare the Java Byte[] array?","body":"<p>have you looked at <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#equals%28byte%5B%5D,%20byte%5B%5D%29\" rel=\"nofollow noreferrer\"><code>Arrays.equals()</code></a>?</p>\n\n<p>Edit: if, as per your comment, the issue is using a byte array as a HashMap key then see <a href=\"https://stackoverflow.com/questions/1058149/using-a-byte-array-as-hashmap-key-java\">this question</a>.</p>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1524034466,"creation_date":1330520405,"answer_id":9499622,"question_id":9499560,"body_markdown":"Because neither `==` nor the `equals()` method of the array compare the contents; both only evaluate object identity (`==` always does, and `equals()` is not overwritten, so the version from `Object` is being used).\r\n\r\nFor comparing the contents, use [`Arrays.equals()`][1].\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#equals%28byte%5B%5D,%20byte%5B%5D%29","title":"how to compare the Java Byte[] array?","body":"<p>Because neither <code>==</code> nor the <code>equals()</code> method of the array compare the contents; both only evaluate object identity (<code>==</code> always does, and <code>equals()</code> is not overwritten, so the version from <code>Object</code> is being used).</p>\n\n<p>For comparing the contents, use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#equals%28byte%5B%5D,%20byte%5B%5D%29\" rel=\"nofollow noreferrer\"><code>Arrays.equals()</code></a>.</p>\n"},{"tags":[],"owner":{"account_id":74486,"reputation":105478,"user_id":214010,"accept_rate":83,"display_name":"mikera"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1330520455,"creation_date":1330520455,"answer_id":9499633,"question_id":9499560,"body_markdown":"They are returning false because you are testing for object identity rather than value equality. This returns false because your arrays are actually different objects in memory.\r\n\r\nIf you want to test for value equality should use the handy comparison functions in [java.util.Arrays][1]\r\n\r\ne.g.\r\n\r\n    import java.util.Arrays;\r\n\r\n    &#39;&#39;&#39;&#39;&#39;\r\n\r\n    Arrays.equals(a,b);\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html","title":"how to compare the Java Byte[] array?","body":"<p>They are returning false because you are testing for object identity rather than value equality. This returns false because your arrays are actually different objects in memory.</p>\n\n<p>If you want to test for value equality should use the handy comparison functions in <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html\" rel=\"nofollow\">java.util.Arrays</a></p>\n\n<p>e.g.</p>\n\n<pre><code>import java.util.Arrays;\n\n'''''\n\nArrays.equals(a,b);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1330520455,"creation_date":1330520455,"answer_id":9499634,"question_id":9499560,"body_markdown":"As byte[] is mutable it is treated as only being `.equals()` if its the same object.\r\n\r\nIf you want to compare the contents you have to use `Arrays.equals(a, b)`\r\n\r\nBTW: Its not the way I would design it. ;)","title":"how to compare the Java Byte[] array?","body":"<p>As byte[] is mutable it is treated as only being <code>.equals()</code> if its the same object.</p>\n\n<p>If you want to compare the contents you have to use <code>Arrays.equals(a, b)</code></p>\n\n<p>BTW: Its not the way I would design it. ;)</p>\n"},{"tags":[],"owner":{"account_id":1074732,"reputation":3309,"user_id":1073129,"accept_rate":74,"display_name":"Bhavesh Shah"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1441454332,"creation_date":1330520459,"answer_id":9499635,"question_id":9499560,"body_markdown":"Try for this:\r\n\r\n    boolean blnResult = Arrays.equals(byteArray1, byteArray2);\r\n\r\nI am also not sure about this, but try this may be it works. ","title":"how to compare the Java Byte[] array?","body":"<p>Try for this:</p>\n\n<pre><code>boolean blnResult = Arrays.equals(byteArray1, byteArray2);\n</code></pre>\n\n<p>I am also not sure about this, but try this may be it works. </p>\n"},{"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1330521767,"creation_date":1330520942,"answer_id":9499744,"question_id":9499560,"body_markdown":"If you&#39;re trying to use the array as a generic HashMap key, that&#39;s not going to work. Consider creating a custom wrapper object that holds the array, and whose `equals(...)` and `hashcode(...)` method returns the results from the java.util.Arrays methods. For example...\r\n\r\n    import java.util.Arrays;\r\n    \r\n    public class MyByteArray {\r\n       private byte[] data;\r\n    \r\n       // ... constructors, getters methods, setter methods, etc...\r\n       \r\n    \r\n       @Override\r\n       public int hashCode() {\r\n          return Arrays.hashCode(data);\r\n       }\r\n    \r\n       @Override\r\n       public boolean equals(Object obj) {\r\n          if (this == obj)\r\n             return true;\r\n          if (obj == null)\r\n             return false;\r\n          if (getClass() != obj.getClass())\r\n             return false;\r\n          MyByteArray other = (MyByteArray) obj;\r\n          if (!Arrays.equals(data, other.data))\r\n             return false;\r\n          return true;\r\n       }\r\n       \r\n       \r\n    }\r\n\r\nObjects of this wrapper class will work fine as a key for your `HashMap&lt;MyByteArray, OtherType&gt;` and will allow for clean use of `equals(...)` and `hashCode(...)` methods.","title":"how to compare the Java Byte[] array?","body":"<p>If you're trying to use the array as a generic HashMap key, that's not going to work. Consider creating a custom wrapper object that holds the array, and whose <code>equals(...)</code> and <code>hashcode(...)</code> method returns the results from the java.util.Arrays methods. For example...</p>\n\n<pre><code>import java.util.Arrays;\n\npublic class MyByteArray {\n   private byte[] data;\n\n   // ... constructors, getters methods, setter methods, etc...\n\n\n   @Override\n   public int hashCode() {\n      return Arrays.hashCode(data);\n   }\n\n   @Override\n   public boolean equals(Object obj) {\n      if (this == obj)\n         return true;\n      if (obj == null)\n         return false;\n      if (getClass() != obj.getClass())\n         return false;\n      MyByteArray other = (MyByteArray) obj;\n      if (!Arrays.equals(data, other.data))\n         return false;\n      return true;\n   }\n\n\n}\n</code></pre>\n\n<p>Objects of this wrapper class will work fine as a key for your <code>HashMap&lt;MyByteArray, OtherType&gt;</code> and will allow for clean use of <code>equals(...)</code> and <code>hashCode(...)</code> methods.</p>\n"},{"tags":[],"owner":{"account_id":1212298,"reputation":27085,"user_id":1180621,"accept_rate":100,"display_name":"Andrejs"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1414937703,"creation_date":1414937703,"answer_id":26700269,"question_id":9499560,"body_markdown":"You can also use a `ByteArrayComparator` from [Apache Directory][1]. In addition to *equals* it lets you compare if one array is **greater** than the other.\r\n\r\n\r\n  [1]: http://directory.apache.org/mavibot/gen-docs/latest/apidocs/org/apache/directory/mavibot/btree/comparator/ByteArrayComparator.html","title":"how to compare the Java Byte[] array?","body":"<p>You can also use a <code>ByteArrayComparator</code> from <a href=\"http://directory.apache.org/mavibot/gen-docs/latest/apidocs/org/apache/directory/mavibot/btree/comparator/ByteArrayComparator.html\" rel=\"nofollow\">Apache Directory</a>. In addition to <em>equals</em> it lets you compare if one array is <strong>greater</strong> than the other.</p>\n"},{"comments":[{"owner":{"account_id":26848,"reputation":4825,"user_id":70213,"display_name":"divegeek"},"score":3,"creation_date":1472050960,"post_id":34598001,"comment_id":65599226,"body_markdown":"By &quot;faster&quot; you mean &quot;slower&quot;.","body":"By &quot;faster&quot; you mean &quot;slower&quot;."}],"tags":[],"owner":{"account_id":3489469,"reputation":1,"user_id":2919515,"display_name":"nagyatka"},"comment_count":1,"down_vote_count":5,"up_vote_count":0,"is_accepted":false,"score":-5,"last_activity_date":1451934088,"creation_date":1451934088,"answer_id":34598001,"question_id":9499560,"body_markdown":"There&#39;s a faster way to do that:\r\n\r\n    Arrays.hashCode(arr1) == Arrays.hashCode(arr2)\r\n\r\n","title":"how to compare the Java Byte[] array?","body":"<p>There's a faster way to do that:</p>\n\n<pre><code>Arrays.hashCode(arr1) == Arrays.hashCode(arr2)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7094078,"reputation":194,"user_id":5428327,"display_name":"Jack47"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453636797,"creation_date":1453636797,"answer_id":34975487,"question_id":9499560,"body_markdown":"why a[] doesn&#39;t equals b[]?\r\nBecause `equals` function really called on `Byte[]` or `byte[]` is `Object.equals(Object obj)`. This functions only compares object identify , don&#39;t compare the contents of the array.","title":"how to compare the Java Byte[] array?","body":"<p>why a[] doesn't equals b[]?\nBecause <code>equals</code> function really called on <code>Byte[]</code> or <code>byte[]</code> is <code>Object.equals(Object obj)</code>. This functions only compares object identify , don't compare the contents of the array.</p>\n"},{"tags":[],"owner":{"account_id":138148,"reputation":5659,"user_id":342882,"accept_rate":34,"display_name":"Daniil Iaitskov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481962442,"creation_date":1481962442,"answer_id":41196690,"question_id":9499560,"body_markdown":"I looked for an array wrapper which makes it comparable to use with guava TreeRangeMap. The class doesn&#39;t accept comparator.\r\n\r\nAfter some research I realized that ByteBuffer from JDK has this feature and it doesn&#39;t copy original array which is good.\r\nMore over you can compare faster with ByteBuffer::asLongBuffer 8 bytes at time (also doesn&#39;t copy). By default ByteBuffer::wrap(byte[]) use BigEndian so order relation is the same as comparing individual bytes.\r\n\r\n\r\n\r\n. ","title":"how to compare the Java Byte[] array?","body":"<p>I looked for an array wrapper which makes it comparable to use with guava TreeRangeMap. The class doesn't accept comparator.</p>\n\n<p>After some research I realized that ByteBuffer from JDK has this feature and it doesn't copy original array which is good.\nMore over you can compare faster with ByteBuffer::asLongBuffer 8 bytes at time (also doesn't copy). By default ByteBuffer::wrap(byte[]) use BigEndian so order relation is the same as comparing individual bytes.</p>\n\n<p>. </p>\n"},{"tags":[],"owner":{"account_id":3411471,"reputation":3358,"user_id":2861283,"accept_rate":20,"display_name":"Rakesh Chaudhari"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523879102,"creation_date":1523879102,"answer_id":49856513,"question_id":9499560,"body_markdown":"Java byte compare,\r\n\r\n\t\r\n\r\n    public static boolean equals(byte[] a, byte[] a2) {\r\n    \t\tif (a == a2)\r\n    \t\t\treturn true;\r\n    \t\tif (a == null || a2 == null)\r\n    \t\t\treturn false;\r\n    \r\n    \t\tint length = a.length;\r\n    \t\tif (a2.length != length)\r\n    \t\t\treturn false;\r\n    \r\n    \t\tfor (int i = 0; i &lt; length; i++)\r\n    \t\t\tif (a[i] != a2[i])\r\n    \t\t\t\treturn false;\r\n    \r\n    \t\treturn true;\r\n    \t}","title":"how to compare the Java Byte[] array?","body":"<p>Java byte compare,</p>\n\n<pre><code>public static boolean equals(byte[] a, byte[] a2) {\n        if (a == a2)\n            return true;\n        if (a == null || a2 == null)\n            return false;\n\n        int length = a.length;\n        if (a2.length != length)\n            return false;\n\n        for (int i = 0; i &lt; length; i++)\n            if (a[i] != a2[i])\n                return false;\n\n        return true;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2384530,"reputation":1672,"user_id":2085768,"display_name":"RoutesMaps.com"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531406365,"creation_date":1531406365,"answer_id":51308502,"question_id":9499560,"body_markdown":"You can also use org.apache.commons.lang.ArrayUtils.isEquals()","title":"how to compare the Java Byte[] array?","body":"<p>You can also use org.apache.commons.lang.ArrayUtils.isEquals()</p>\n"},{"tags":[],"owner":{"account_id":2102941,"reputation":7351,"user_id":1870054,"accept_rate":72,"display_name":"wener"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1537503565,"creation_date":1537503565,"answer_id":52436549,"question_id":9499560,"body_markdown":"`Arrays.equals` is not enough for a comparator, you can not check the map contain the data. I copy the code from `Arrays.equals`, modified to build a `Comparator`.\r\n\r\n    class ByteArrays{\r\n        public static &lt;T&gt; SortedMap&lt;byte[], T&gt; newByteArrayMap() {\r\n            return new TreeMap&lt;&gt;(new ByteArrayComparator());\r\n        }\r\n    \r\n        public static SortedSet&lt;byte[]&gt; newByteArraySet() {\r\n            return new TreeSet&lt;&gt;(new ByteArrayComparator());\r\n        }\r\n    \r\n        static class ByteArrayComparator implements Comparator&lt;byte[]&gt; {\r\n            @Override\r\n            public int compare(byte[] a, byte[] b) {\r\n                if (a == b) {\r\n                    return 0;\r\n                }\r\n                if (a == null || b == null) {\r\n                    throw new NullPointerException();\r\n                }\r\n    \r\n                int length = a.length;\r\n                int cmp;\r\n                if ((cmp = Integer.compare(length, b.length)) != 0) {\r\n                    return cmp;\r\n                }\r\n\r\n                for (int i = 0; i &lt; length; i++) {\r\n                    if ((cmp = Byte.compare(a[i], b[i])) != 0) {\r\n                        return cmp;\r\n                    }\r\n                }\r\n    \r\n                return 0;\r\n            }\r\n        }\r\n    }","title":"how to compare the Java Byte[] array?","body":"<p><code>Arrays.equals</code> is not enough for a comparator, you can not check the map contain the data. I copy the code from <code>Arrays.equals</code>, modified to build a <code>Comparator</code>.</p>\n\n<pre><code>class ByteArrays{\n    public static &lt;T&gt; SortedMap&lt;byte[], T&gt; newByteArrayMap() {\n        return new TreeMap&lt;&gt;(new ByteArrayComparator());\n    }\n\n    public static SortedSet&lt;byte[]&gt; newByteArraySet() {\n        return new TreeSet&lt;&gt;(new ByteArrayComparator());\n    }\n\n    static class ByteArrayComparator implements Comparator&lt;byte[]&gt; {\n        @Override\n        public int compare(byte[] a, byte[] b) {\n            if (a == b) {\n                return 0;\n            }\n            if (a == null || b == null) {\n                throw new NullPointerException();\n            }\n\n            int length = a.length;\n            int cmp;\n            if ((cmp = Integer.compare(length, b.length)) != 0) {\n                return cmp;\n            }\n\n            for (int i = 0; i &lt; length; i++) {\n                if ((cmp = Byte.compare(a[i], b[i])) != 0) {\n                    return cmp;\n                }\n            }\n\n            return 0;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7525670,"reputation":12204,"user_id":5715934,"accept_rate":95,"display_name":"Supun Wijerathne"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695251606,"creation_date":1695251606,"answer_id":77146351,"question_id":9499560,"body_markdown":"As a newer solution, you can use\r\n\r\n    import org.junit.jupiter.api.Assertions.*\r\n\r\n    assertArrayEquals(aa,bb);\r\n","title":"how to compare the Java Byte[] array?","body":"<p>As a newer solution, you can use</p>\n<pre><code>import org.junit.jupiter.api.Assertions.*\n\nassertArrayEquals(aa,bb);\n</code></pre>\n"}],"owner":{"account_id":1059829,"reputation":1432,"user_id":1061699,"display_name":"Lazy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":156018,"favorite_count":0,"down_vote_count":0,"up_vote_count":124,"accepted_answer_id":9499597,"answer_count":16,"score":124,"last_activity_date":1695251606,"creation_date":1330520150,"question_id":9499560,"body_markdown":"    public class ByteArr {\r\n\r\n        public static void main(String[] args){\r\n\t        Byte[] a = {(byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00};\r\n\t        Byte[] b = {(byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00};\r\n\t        byte[] aa = {(byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00};\r\n\t        byte[] bb = {(byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00};\r\n\t\t\r\n\t        System.out.println(a);\r\n\t        System.out.println(b);\r\n\t        System.out.println(a == b);\r\n\t        System.out.println(a.equals(b));\r\n\t\t\r\n\t        System.out.println(aa);\r\n\t        System.out.println(bb);\r\n\t        System.out.println(aa == bb);\r\n\t        System.out.println(aa.equals(bb));\r\n\t    }\r\n    }\r\n\r\n\r\nI do not know why all of them print false.\r\n\r\nWhen I run &quot;java ByteArray&quot;, the answer is &quot;false false false false&quot;.\r\n\r\nI think the a[] equals b[] but the JVM is telling me I am wrong, why","title":"how to compare the Java Byte[] array?","body":"<pre><code>public class ByteArr {\n\n    public static void main(String[] args){\n        Byte[] a = {(byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00};\n        Byte[] b = {(byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00};\n        byte[] aa = {(byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00};\n        byte[] bb = {(byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00};\n\n        System.out.println(a);\n        System.out.println(b);\n        System.out.println(a == b);\n        System.out.println(a.equals(b));\n\n        System.out.println(aa);\n        System.out.println(bb);\n        System.out.println(aa == bb);\n        System.out.println(aa.equals(bb));\n    }\n}\n</code></pre>\n\n<p>I do not know why all of them print false.</p>\n\n<p>When I run \"java ByteArray\", the answer is \"false false false false\".</p>\n\n<p>I think the a[] equals b[] but the JVM is telling me I am wrong, why</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":318306,"reputation":541,"user_id":635460,"accept_rate":100,"display_name":"Me again"},"score":1,"creation_date":1695228336,"post_id":77144442,"comment_id":135997522,"body_markdown":"so what is the question?","body":"so what is the question?"}],"answers":[{"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1695230698,"post_id":77144647,"comment_id":135997991,"body_markdown":"Why give code to someone who&#39;s shown zero effort?","body":"Why give code to someone who&#39;s shown zero effort?"}],"tags":[],"owner":{"account_id":23603435,"reputation":67,"user_id":17639531,"display_name":"zerdeshtjuan"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":true,"score":-1,"last_activity_date":1695230131,"creation_date":1695230131,"answer_id":77144647,"question_id":77144442,"body_markdown":"Here is sample code that does what you want: \r\n```java\r\nimport java.util.regex.Pattern;\r\n\r\nclass Main{\r\n    public static void main(String[] args) {\r\n        String s = &quot;09 Software for use in assisted driving of railway vehicles; software for electronic railway driving assistance systems; hardware for electronic railway driving assistance systems; driver assistance systems for railway vehicles. 37 Installation and replacement services for railway vehicles, railway vehicles that incorporate driver assistance systems in the detection and avoidance of excessive speed, obstacles, vehicles and people; Software installation and replacement services for railway driving assistance systems and vehicle network coordination centers 42 Supervision services for driving. assistance; systems for railway vehicles; checking railway vehicles; checking railway vehicles that incorporate driver assistance systems&quot;;\r\n\r\n        // split on numbers \r\n        Pattern p = Pattern.compile(&quot;\\\\s*(?:\\\\d+)\\\\s*&quot;);\r\n        String[] arr = p.split(s);\r\n\r\n        // capture the numbers seperately\r\n        String[] numbers = p.matcher(s).results().map(m -&gt; m.group().strip()).toArray(String[]::new);\r\n\r\n        for (int i = 1; i &lt; arr.length; i++) {\r\n            System.out.printf(&quot;%s: \\&quot;%s\\&quot;\\n&quot;, numbers[i-1], arr[i]);// first split is empty, so first string is at index 1\r\n\r\n        }\r\n\r\n    }\r\n}   \r\n```","title":"Struggling with split text with number in between 1 to 45 using regex in java","body":"<p>Here is sample code that does what you want:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.regex.Pattern;\n\nclass Main{\n    public static void main(String[] args) {\n        String s = &quot;09 Software for use in assisted driving of railway vehicles; software for electronic railway driving assistance systems; hardware for electronic railway driving assistance systems; driver assistance systems for railway vehicles. 37 Installation and replacement services for railway vehicles, railway vehicles that incorporate driver assistance systems in the detection and avoidance of excessive speed, obstacles, vehicles and people; Software installation and replacement services for railway driving assistance systems and vehicle network coordination centers 42 Supervision services for driving. assistance; systems for railway vehicles; checking railway vehicles; checking railway vehicles that incorporate driver assistance systems&quot;;\n\n        // split on numbers \n        Pattern p = Pattern.compile(&quot;\\\\s*(?:\\\\d+)\\\\s*&quot;);\n        String[] arr = p.split(s);\n\n        // capture the numbers seperately\n        String[] numbers = p.matcher(s).results().map(m -&gt; m.group().strip()).toArray(String[]::new);\n\n        for (int i = 1; i &lt; arr.length; i++) {\n            System.out.printf(&quot;%s: \\&quot;%s\\&quot;\\n&quot;, numbers[i-1], arr[i]);// first split is empty, so first string is at index 1\n\n        }\n\n    }\n}   \n</code></pre>\n"}],"owner":{"account_id":1271410,"reputation":177,"user_id":1227571,"accept_rate":64,"display_name":"meet patel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1695230169,"accepted_answer_id":77144647,"answer_count":1,"score":-3,"last_activity_date":1695251549,"creation_date":1695228103,"question_id":77144442,"body_markdown":"i am struggling with splitting the whole text starting with number and followed by it text\r\nso the number is in between 01 to 45,can be possibility with any either 04 or 4 \r\n\r\n&gt;**09** Software for use in assisted driving of railway vehicles; software for electronic railway driving assistance systems; hardware for electronic railway driving assistance systems; driver assistance systems for railway vehicles. **37** Installation and replacement services for railway vehicles, railway vehicles that incorporate driver assistance systems in the detection and avoidance of excessive speed, obstacles, vehicles and people; Software installation and replacement services for railway driving assistance systems and vehicle network coordination centers **42** Supervision services for driving. assistance; systems for railway vehicles; checking railway vehicles; checking railway vehicles that incorporate driver assistance systems\r\n\r\nRequired output as per below array list.\r\n```\r\nindex[0]=09 Software for use in assisted driving of railway vehicles; software for electronic railway driving assistance systems; hardware for electronic railway driving assistance systems; driver assistance systems for railway vehicles.\r\nindex[1]=37 Installation and replacement services for railway vehicles, railway vehicles that incorporate driver assistance systems in the detection and avoidance of excessive speed, obstacles, vehicles and people; Software installation and replacement services for railway driving assistance systems and vehicle network coordination centers\r\nindex[2]=42 Supervision services for driving. assistance; systems for railway vehicles; checking railway vehicles; checking railway vehicles that incorporate driver assistance systems\r\n```","title":"Struggling with split text with number in between 1 to 45 using regex in java","body":"<p>i am struggling with splitting the whole text starting with number and followed by it text\nso the number is in between 01 to 45,can be possibility with any either 04 or 4</p>\n<blockquote>\n<p><strong>09</strong> Software for use in assisted driving of railway vehicles; software for electronic railway driving assistance systems; hardware for electronic railway driving assistance systems; driver assistance systems for railway vehicles. <strong>37</strong> Installation and replacement services for railway vehicles, railway vehicles that incorporate driver assistance systems in the detection and avoidance of excessive speed, obstacles, vehicles and people; Software installation and replacement services for railway driving assistance systems and vehicle network coordination centers <strong>42</strong> Supervision services for driving. assistance; systems for railway vehicles; checking railway vehicles; checking railway vehicles that incorporate driver assistance systems</p>\n</blockquote>\n<p>Required output as per below array list.</p>\n<pre><code>index[0]=09 Software for use in assisted driving of railway vehicles; software for electronic railway driving assistance systems; hardware for electronic railway driving assistance systems; driver assistance systems for railway vehicles.\nindex[1]=37 Installation and replacement services for railway vehicles, railway vehicles that incorporate driver assistance systems in the detection and avoidance of excessive speed, obstacles, vehicles and people; Software installation and replacement services for railway driving assistance systems and vehicle network coordination centers\nindex[2]=42 Supervision services for driving. assistance; systems for railway vehicles; checking railway vehicles; checking railway vehicles that incorporate driver assistance systems\n</code></pre>\n"},{"tags":["java","sql","postgresql","postgresql-14"],"comments":[{"owner":{"account_id":904738,"reputation":617095,"user_id":939860,"accept_rate":100,"display_name":"Erwin Brandstetter"},"score":0,"creation_date":1695175987,"post_id":77138887,"comment_id":135987845,"body_markdown":"Why did you tag Postgres 9.3 and 9.4? What is your actual version? Something more recent I would hope? Also, show a valid `CREATE TABLE` statement. That beats all vague descriptions.","body":"Why did you tag Postgres 9.3 and 9.4? What is your actual version? Something more recent I would hope? Also, show a valid <code>CREATE TABLE</code> statement. That beats all vague descriptions."},{"owner":{"account_id":26689899,"reputation":1,"user_id":20298616,"display_name":"mss"},"score":0,"creation_date":1695176134,"post_id":77138887,"comment_id":135987858,"body_markdown":"Hello, thank you for your question. As it is my first question here, it&#39;s the only versions appeared in list. I use 14 postgres","body":"Hello, thank you for your question. As it is my first question here, it&#39;s the only versions appeared in list. I use 14 postgres"},{"owner":{"account_id":904738,"reputation":617095,"user_id":939860,"accept_rate":100,"display_name":"Erwin Brandstetter"},"score":0,"creation_date":1695176237,"post_id":77138887,"comment_id":135987866,"body_markdown":"I see. That&#39;s misleading as &quot;9&quot; sorts before &quot;10&quot; in that smart sort. All versions are there. I fixed that for you.","body":"I see. That&#39;s misleading as &quot;9&quot; sorts before &quot;10&quot; in that smart sort. All versions are there. I fixed that for you."},{"owner":{"account_id":26689899,"reputation":1,"user_id":20298616,"display_name":"mss"},"score":0,"creation_date":1695176335,"post_id":77138887,"comment_id":135987871,"body_markdown":"group:\ncreate table dm_group\n(\n    entity_type            varchar(15) not null,\n    id                     bigserial\n        primary key,\n    description            text,\n    name                   varchar(255),\n    group_type             varchar(255));\n\nuser_to_group:\n\ncreate table user_to_group\n(\n    group_id bigint\n        constraint fk_gr_to_u\n            references group,\n    user_id  bigint\n        constraint fk_us_to_gr\n            references user\n);","body":"group: create table dm_group (     entity_type            varchar(15) not null,     id                     bigserial         primary key,     description            text,     name                   varchar(255),     group_type             varchar(255));  user_to_group:  create table user_to_group (     group_id bigint         constraint fk_gr_to_u             references group,     user_id  bigint         constraint fk_us_to_gr             references user );"},{"owner":{"account_id":904738,"reputation":617095,"user_id":939860,"accept_rate":100,"display_name":"Erwin Brandstetter"},"score":0,"creation_date":1695176474,"post_id":77138887,"comment_id":135987883,"body_markdown":"Please [edit] the question to present all info there. And use a legal table name. &quot;group&quot; is a reserved word that would require double-quoting. So go with &quot;dm_group&quot;.","body":"Please <a href=\"https://stackoverflow.com/posts/77138887/edit\">edit</a> the question to present all info there. And use a legal table name. &quot;group&quot; is a reserved word that would require double-quoting. So go with &quot;dm_group&quot;."},{"owner":{"account_id":26689899,"reputation":1,"user_id":20298616,"display_name":"mss"},"score":0,"creation_date":1695176964,"post_id":77138887,"comment_id":135987925,"body_markdown":"I agree, I&#39;ve applied changes","body":"I agree, I&#39;ve applied changes"},{"owner":{"account_id":904738,"reputation":617095,"user_id":939860,"accept_rate":100,"display_name":"Erwin Brandstetter"},"score":0,"creation_date":1695177002,"post_id":77138887,"comment_id":135987928,"body_markdown":"Can&#39;t use `group` as table alias, either. :) Please show the statement you actually tried.","body":"Can&#39;t use <code>group</code> as table alias, either. :) Please show the statement you actually tried."},{"owner":{"account_id":26689899,"reputation":1,"user_id":20298616,"display_name":"mss"},"score":0,"creation_date":1695177180,"post_id":77138887,"comment_id":135987941,"body_markdown":"Yeah, exactly, I&#39;ve added my statement","body":"Yeah, exactly, I&#39;ve added my statement"},{"owner":{"account_id":904738,"reputation":617095,"user_id":939860,"accept_rate":100,"display_name":"Erwin Brandstetter"},"score":0,"creation_date":1695177404,"post_id":77138887,"comment_id":135987959,"body_markdown":"And why would you join from `dm_user.id` to `dm_group.id`. Please present a consistent question next time. Gotta go.","body":"And why would you join from <code>dm_user.id</code> to <code>dm_group.id</code>. Please present a consistent question next time. Gotta go."},{"owner":{"account_id":26689899,"reputation":1,"user_id":20298616,"display_name":"mss"},"score":0,"creation_date":1695177672,"post_id":77138887,"comment_id":135987972,"body_markdown":"Because user can present a group or can be part of it. So dm_group_id can define user&#39;s group, where other user&#39;s can be included in. Hope you will find time","body":"Because user can present a group or can be part of it. So dm_group_id can define user&#39;s group, where other user&#39;s can be included in. Hope you will find time"},{"owner":{"account_id":26689899,"reputation":1,"user_id":20298616,"display_name":"mss"},"score":0,"creation_date":1695177862,"post_id":77138887,"comment_id":135987983,"body_markdown":"So group name can have entity_type Group and its name will be user&#39;s name who conduct it. But if entity_type is Discipline it shows with what subject user is related to..","body":"So group name can have entity_type Group and its name will be user&#39;s name who conduct it. But if entity_type is Discipline it shows with what subject user is related to.."}],"answers":[{"comments":[{"owner":{"account_id":26689899,"reputation":1,"user_id":20298616,"display_name":"mss"},"score":0,"creation_date":1695201580,"post_id":77139520,"comment_id":135991268,"body_markdown":"Hello, I&#39;m really sorry for bad task description. I rewrote it again. Thank you so much!","body":"Hello, I&#39;m really sorry for bad task description. I rewrote it again. Thank you so much!"},{"owner":{"account_id":26689899,"reputation":1,"user_id":20298616,"display_name":"mss"},"score":0,"creation_date":1695232670,"post_id":77139520,"comment_id":135998375,"body_markdown":"Please review my query","body":"Please review my query"}],"tags":[],"owner":{"account_id":28999910,"reputation":1011,"user_id":22213656,"display_name":"Maimoona Abid"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695187707,"creation_date":1695187707,"answer_id":77139520,"question_id":77138887,"body_markdown":"By combining subqueries and the string_agg function, you can get the desired results. However, you must modify your SQL query in a few specific ways. Here is an illustration of how to accomplish it:\r\n\r\n    SELECT\r\n        gr.id AS group_id,\r\n        string_agg(d.name || &#39;(&#39; || COALESCE(CAST(sub.count AS text), &#39;0&#39;) || &#39;)&#39;, &#39;; &#39;) AS &quot;Discipline Counts&quot;\r\n    FROM\r\n        dm_group gr\r\n    LEFT JOIN (\r\n        SELECT\r\n            g.id AS group_id,\r\n            u.id AS user_id,\r\n            d.name AS discipline_name\r\n        FROM\r\n            dm_user_to_group utg\r\n        JOIN\r\n            dm_group g ON utg.group_id = g.id\r\n        JOIN\r\n            dm_user u ON utg.user_id = u.id\r\n        LEFT JOIN\r\n            dm_group d ON u.id = d.id AND d.entity_type = &#39;Discipline&#39;\r\n        WHERE\r\n            g.group_type = &#39;Math&#39;\r\n    ) AS sub ON gr.id = sub.group_id\r\n    GROUP BY\r\n        gr.id\r\n    ORDER BY\r\n        gr.id;\r\n\r\nThis should return a list of group_ids and the subjects they are linked with, together with the number of users for each subject related to the &#39;Math&#39; group type. Change the table and column names to correspond to your actual database schema.\r\n\r\nHope it works :)","title":"PostgreSQL Using string_agg with count","body":"<p>By combining subqueries and the string_agg function, you can get the desired results. However, you must modify your SQL query in a few specific ways. Here is an illustration of how to accomplish it:</p>\n<pre><code>SELECT\n    gr.id AS group_id,\n    string_agg(d.name || '(' || COALESCE(CAST(sub.count AS text), '0') || ')', '; ') AS &quot;Discipline Counts&quot;\nFROM\n    dm_group gr\nLEFT JOIN (\n    SELECT\n        g.id AS group_id,\n        u.id AS user_id,\n        d.name AS discipline_name\n    FROM\n        dm_user_to_group utg\n    JOIN\n        dm_group g ON utg.group_id = g.id\n    JOIN\n        dm_user u ON utg.user_id = u.id\n    LEFT JOIN\n        dm_group d ON u.id = d.id AND d.entity_type = 'Discipline'\n    WHERE\n        g.group_type = 'Math'\n) AS sub ON gr.id = sub.group_id\nGROUP BY\n    gr.id\nORDER BY\n    gr.id;\n</code></pre>\n<p>This should return a list of group_ids and the subjects they are linked with, together with the number of users for each subject related to the 'Math' group type. Change the table and column names to correspond to your actual database schema.</p>\n<p>Hope it works :)</p>\n"},{"comments":[{"owner":{"account_id":26689899,"reputation":1,"user_id":20298616,"display_name":"mss"},"score":0,"creation_date":1695201532,"post_id":77139692,"comment_id":135991256,"body_markdown":"I&#39;m really sorry for that. I rewrote all description and added possible steps. I hope it will really help. Thank you so much!","body":"I&#39;m really sorry for that. I rewrote all description and added possible steps. I hope it will really help. Thank you so much!"},{"owner":{"account_id":26689899,"reputation":1,"user_id":20298616,"display_name":"mss"},"score":0,"creation_date":1695232657,"post_id":77139692,"comment_id":135998372,"body_markdown":"Please review my query","body":"Please review my query"},{"owner":{"account_id":904738,"reputation":617095,"user_id":939860,"accept_rate":100,"display_name":"Erwin Brandstetter"},"score":0,"creation_date":1695250692,"post_id":77139692,"comment_id":136001010,"body_markdown":"@mss Still confusing. Not sure your relational model is ideal. I adapted my guess slightly.","body":"@mss Still confusing. Not sure your relational model is ideal. I adapted my guess slightly."}],"tags":[],"owner":{"account_id":904738,"reputation":617095,"user_id":939860,"accept_rate":100,"display_name":"Erwin Brandstetter"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695250795,"creation_date":1695190012,"answer_id":77139692,"question_id":77138887,"body_markdown":"Here is my guess:\r\n\r\n~~~pgsql\r\nSELECT id, string_agg(dis_ct, &#39;; &#39;) AS &quot;Discipline Counts&quot;\r\nFROM  (\r\n   SELECT tr.id, d.name || &#39;(&#39; || count(DISTINCT d.id) || &#39;)&#39; AS dis_ct\r\n   FROM   dm_group           tr\r\n   LEFT   JOIN user_to_group ug ON ug.group_id = tr.id\r\n   LEFT   JOIN dm_user       u  ON u.id = ug.user_id\r\n   LEFT   JOIN dm_group      d  ON d.id = u.id\r\n                               AND d.entity_type = &#39;Discipline&#39;\r\n   WHERE  tr.group_type = &#39;TRAINER&#39;\r\n   GROUP  BY tr.id, d.name\r\n   ORDER  BY tr.id, d.name\r\n   ) sub\r\nGROUP  BY tr.id\r\nORDER  BY tr.id;\r\n~~~\r\n\r\nAggregate counts in a subquery. Then aggregate the desired string format at the outer level.\r\n\r\nIf no matching row in `d` is found, the count would be 0. But concatenating that to `d.name` (which then is `null`, consequently) removes these noise counts anyway, so no `FILTER` needed.","title":"PostgreSQL Using string_agg with count","body":"<p>Here is my guess:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT id, string_agg(dis_ct, '; ') AS &quot;Discipline Counts&quot;\nFROM  (\n   SELECT tr.id, d.name || '(' || count(DISTINCT d.id) || ')' AS dis_ct\n   FROM   dm_group           tr\n   LEFT   JOIN user_to_group ug ON ug.group_id = tr.id\n   LEFT   JOIN dm_user       u  ON u.id = ug.user_id\n   LEFT   JOIN dm_group      d  ON d.id = u.id\n                               AND d.entity_type = 'Discipline'\n   WHERE  tr.group_type = 'TRAINER'\n   GROUP  BY tr.id, d.name\n   ORDER  BY tr.id, d.name\n   ) sub\nGROUP  BY tr.id\nORDER  BY tr.id;\n</code></pre>\n<p>Aggregate counts in a subquery. Then aggregate the desired string format at the outer level.</p>\n<p>If no matching row in <code>d</code> is found, the count would be 0. But concatenating that to <code>d.name</code> (which then is <code>null</code>, consequently) removes these noise counts anyway, so no <code>FILTER</code> needed.</p>\n"}],"owner":{"account_id":26689899,"reputation":1,"user_id":20298616,"display_name":"mss"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695250795,"creation_date":1695175778,"question_id":77138887,"body_markdown":"I have to create a query to show **group_id** and the *list with the main user&#39;s subjects and number of people from this group per subjects*.\r\n\r\nHello, I agree that it&#39;s difficult to understand. Sorry for that.\r\nThere&#39;s some steps to make it easy to understand.\r\nHere is used one table(**dm_group gr**) for **two** facts: \r\n\r\n1. To show to is discipline leader (gr.entity_type=&#39;Group&#39; and gr.group_type=&#39;TRAINER&#39;), so I can identify only teachers. \r\nIn this case gr.name will be teacher&#39;s name.\r\n\r\n2. But every user has at least one line in dm_group gr, which shows what is his the main subject/direction (gr.entity_type = &#39;Discipline&#39;). In this case gr.name will be exactly the name of the main user&#39;s subject.\r\n\r\nSo, one user, as a teacher forms a group to what students can be assigned. And generally, every user has a main subject he is also assigned to. \r\n Finally, I should identify all teacher&#39;s ids with the list of all their students subjects with number of user&#39;s.\r\n\r\n1. So, first of all we identify **all the teachers** (select gr.id where group_type=&#39;TRAINER&#39;)\r\n2. Next in **dm_user_to_group utg** we find all users assigned to each teacher(**select u.id where utg.id = gr.id**)\r\n3. So the next step is *tricky*, knowing all user_ids for each teacher, I have to find all group ids for this users to find in dm_group their main subject(**where gr.entity_type = &#39;Discipline&#39;**) and finally to get how much people have this or that subject as the main in each teacher&#39;s group.\r\n\r\nResult should be like: group_id| subject(#);subject(#);..., where subject is the number of people from group and related to concrete subject.\r\n\r\nI wrote smth like this:\r\n\r\n*But it doesn&#39;t work as expected.. \r\n\r\n```\r\nSELECT tr.id AS &quot;Trainer ID&quot;,\r\n       string_agg(info.name || &#39;(&#39; || info.number || &#39;)&#39;,\r\n                  &#39;; &#39; order by info.name\r\n           ) AS &quot;Discipline Counts&quot;\r\nFROM (\r\n         SELECT d.name, count(u.userid) as number\r\n         FROM dm_group tr\r\n                  LEFT JOIN\r\n              dm_user_to_group utg ON tr.id = utg.group_id\r\n                  LEFT JOIN\r\n              dm_user u ON utg.user_id = u.userid\r\n                  LEFT JOIN\r\n              dm_group d ON u.userid = d.id AND d.entity_type = &#39;Discipline&#39;\r\n         group by d.name, u.userid) info\r\n         full outer JOIN dm_group tr on tr.name = info.name\r\nwhere tr.group_type = &#39;TRAINER&#39;\r\nGROUP BY tr.id\r\nORDER BY tr.id;\r\n```\r\n\r\nTables used:\r\n\r\n`dm_group`:\r\n\r\n```\r\ncreate table dm_group (\r\n  entity_type  varchar(15) not null,\r\n  id           bigserial primary key,\r\n  description  text\r\n  name         varchar(255),\r\n  group_type   varchar(255)\r\n);\r\n```\r\n\r\n`dm_user_to_group`:\r\n\r\n```\r\ncreate table dm_user_to_group (\r\n  group_id bigint constraint fk_gr_to_u references dm_group,\r\n  user_id  bigint constraint fk_us_to_gr references dm_user\r\n);\r\n```","title":"PostgreSQL Using string_agg with count","body":"<p>I have to create a query to show <strong>group_id</strong> and the <em>list with the main user's subjects and number of people from this group per subjects</em>.</p>\n<p>Hello, I agree that it's difficult to understand. Sorry for that.\nThere's some steps to make it easy to understand.\nHere is used one table(<strong>dm_group gr</strong>) for <strong>two</strong> facts:</p>\n<ol>\n<li><p>To show to is discipline leader (gr.entity_type='Group' and gr.group_type='TRAINER'), so I can identify only teachers.\nIn this case gr.name will be teacher's name.</p>\n</li>\n<li><p>But every user has at least one line in dm_group gr, which shows what is his the main subject/direction (gr.entity_type = 'Discipline'). In this case gr.name will be exactly the name of the main user's subject.</p>\n</li>\n</ol>\n<p>So, one user, as a teacher forms a group to what students can be assigned. And generally, every user has a main subject he is also assigned to.\nFinally, I should identify all teacher's ids with the list of all their students subjects with number of user's.</p>\n<ol>\n<li>So, first of all we identify <strong>all the teachers</strong> (select gr.id where group_type='TRAINER')</li>\n<li>Next in <strong>dm_user_to_group utg</strong> we find all users assigned to each teacher(<strong>select u.id where utg.id = gr.id</strong>)</li>\n<li>So the next step is <em>tricky</em>, knowing all user_ids for each teacher, I have to find all group ids for this users to find in dm_group their main subject(<strong>where gr.entity_type = 'Discipline'</strong>) and finally to get how much people have this or that subject as the main in each teacher's group.</li>\n</ol>\n<p>Result should be like: group_id| subject(#);subject(#);..., where subject is the number of people from group and related to concrete subject.</p>\n<p>I wrote smth like this:</p>\n<p>*But it doesn't work as expected..</p>\n<pre><code>SELECT tr.id AS &quot;Trainer ID&quot;,\n       string_agg(info.name || '(' || info.number || ')',\n                  '; ' order by info.name\n           ) AS &quot;Discipline Counts&quot;\nFROM (\n         SELECT d.name, count(u.userid) as number\n         FROM dm_group tr\n                  LEFT JOIN\n              dm_user_to_group utg ON tr.id = utg.group_id\n                  LEFT JOIN\n              dm_user u ON utg.user_id = u.userid\n                  LEFT JOIN\n              dm_group d ON u.userid = d.id AND d.entity_type = 'Discipline'\n         group by d.name, u.userid) info\n         full outer JOIN dm_group tr on tr.name = info.name\nwhere tr.group_type = 'TRAINER'\nGROUP BY tr.id\nORDER BY tr.id;\n</code></pre>\n<p>Tables used:</p>\n<p><code>dm_group</code>:</p>\n<pre><code>create table dm_group (\n  entity_type  varchar(15) not null,\n  id           bigserial primary key,\n  description  text\n  name         varchar(255),\n  group_type   varchar(255)\n);\n</code></pre>\n<p><code>dm_user_to_group</code>:</p>\n<pre><code>create table dm_user_to_group (\n  group_id bigint constraint fk_gr_to_u references dm_group,\n  user_id  bigint constraint fk_us_to_gr references dm_user\n);\n</code></pre>\n"},{"tags":["java","switch-statement","java.util.scanner"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1695247312,"post_id":77146120,"comment_id":136000666,"body_markdown":"As a standard sanity-debugging step: print the content of `choice` before you start switching, and print it between some brackets, to see what&#39;s actually in it. And those brackets are important, because you want to see whether there are any special whitespace characters or not.","body":"As a standard sanity-debugging step: print the content of <code>choice</code> before you start switching, and print it between some brackets, to see what&#39;s actually in it. And those brackets are important, because you want to see whether there are any special whitespace characters or not."},{"owner":{"account_id":21322273,"reputation":1,"user_id":15695231,"display_name":"Prime"},"score":0,"creation_date":1695247709,"post_id":77146120,"comment_id":136000710,"body_markdown":"@Mike&#39;Pomax&#39;Kamermans Thanks, I did it, and it didnt print out anything. Its a blank line.\nIm guessing the scanner didnt take the input, but why?","body":"@Mike&#39;Pomax&#39;Kamermans Thanks, I did it, and it didnt print out anything. Its a blank line. Im guessing the scanner didnt take the input, but why?"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1695247888,"post_id":77146120,"comment_id":136000735,"body_markdown":"`scanner.nextInt()` won&#39;t consume the new line which is in the buffer, so your next call to `String choice = scanner.nextLine();` will return an empty `String`.  Instead of calling `scanner.nextLine();` after it (which you seem to have identified as a symptom of the problem), call `scanner.nextLine();` before `String choice = scanner.nextLine();`","body":"<code>scanner.nextInt()</code> won&#39;t consume the new line which is in the buffer, so your next call to <code>String choice = scanner.nextLine();</code> will return an empty <code>String</code>.  Instead of calling <code>scanner.nextLine();</code> after it (which you seem to have identified as a symptom of the problem), call <code>scanner.nextLine();</code> before <code>String choice = scanner.nextLine();</code>"},{"owner":{"account_id":21322273,"reputation":1,"user_id":15695231,"display_name":"Prime"},"score":0,"creation_date":1695248200,"post_id":77146120,"comment_id":136000776,"body_markdown":"@MadProgrammer You&#39;re a life saver man. It works now! Thanks a lot. But could you explain again, why it didnt work and why it works now? I dont seem to understand, so maybe try explaining it like you would explain it to a 5 year old? &#128517;","body":"@MadProgrammer You&#39;re a life saver man. It works now! Thanks a lot. But could you explain again, why it didnt work and why it works now? I dont seem to understand, so maybe try explaining it like you would explain it to a 5 year old? "},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1695248454,"post_id":77146120,"comment_id":136000801,"body_markdown":"@Prime I only understand it from an observational point of view, but when you time something into the console, the `Scanner` will consume all the text, including the new line character (which is injected when you press enter). `nextInt` will only remove the characters from the buffer which form a valid `int` value, the new line character will remain.  So the next call to `nextLine` will return an empty `String`, because there&#39;s no other characters proceeding the new line character, but will &quot;wait&quot; for input at the second `nextLine`, as no new data exists yet","body":"@Prime I only understand it from an observational point of view, but when you time something into the console, the <code>Scanner</code> will consume all the text, including the new line character (which is injected when you press enter). <code>nextInt</code> will only remove the characters from the buffer which form a valid <code>int</code> value, the new line character will remain.  So the next call to <code>nextLine</code> will return an empty <code>String</code>, because there&#39;s no other characters proceeding the new line character, but will &quot;wait&quot; for input at the second <code>nextLine</code>, as no new data exists yet"},{"owner":{"account_id":21322273,"reputation":1,"user_id":15695231,"display_name":"Prime"},"score":0,"creation_date":1695249128,"post_id":77146120,"comment_id":136000871,"body_markdown":"@MadProgrammer Got it, Thanks! Have a great rest of the week.","body":"@MadProgrammer Got it, Thanks! Have a great rest of the week."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695258100,"post_id":77146120,"comment_id":136001620,"body_markdown":"Vague title. Rewrite to summarize your specific technical issue.","body":"Vague title. Rewrite to summarize your specific technical issue."}],"owner":{"account_id":21322273,"reputation":1,"user_id":15695231,"display_name":"Prime"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695258127,"answer_count":0,"score":0,"last_activity_date":1695247268,"creation_date":1695247110,"question_id":77146120,"body_markdown":"I am writing a code to calculate the amount of crates you need depending on the amount of bottles you have.\r\n\r\n6 bottles equal 1 crate.\r\n\r\nFor example, if you&#39;d input 4 bottles, the output would be 1 crate.\r\nIf you&#39;d input 9 bottles, you&#39;d get 2 crates etc..\r\n\r\nNow I am facing some trouble trying to give the user a choice if they want to calculate again or not. \r\nHeres my code:\r\n\r\n    import java.util.*;\r\n\r\n    public class Main {\r\n      public static void main(String[] args) {\r\n        Scanner scanner = new Scanner(System.in);\r\n\r\n        boolean again = true;\r\n        boolean loop = true;\r\n\r\n        while (again) {\r\n          System.out.println(&quot;CRATE CALCULATION&quot;);\r\n          System.out.println(&quot;==================&quot;);\r\n          System.out.println(&quot;Number of bottles?: &quot;);\r\n\r\n          int bottles;\r\n          if (scanner.hasNextInt()) {\r\n            bottles = scanner.nextInt();\r\n            if (bottles &lt;= 0) {\r\n              System.out.println(&quot;You dont need any crates!&quot;);\r\n            } else {\r\n              int crates = (bottles + 5) / 6;\r\n              System.out.println(&quot;You need &quot; + crates + &quot; crates!&quot;);\r\n            }\r\n\r\n            System.out.println(&quot;Do you want to calculate again? (y/n)&quot;);\r\n            String choice = scanner.nextLine();\r\n            scanner.nextLine();\r\n\r\n            switch (choice) {\r\n            case &quot;y&quot;:\r\n              again = true;\r\n              break;\r\n            case &quot;n&quot;:\r\n              again = false;\r\n              break;\r\n            default:\r\n              System.out.println(&quot;Invalid choice. Lets try again.&quot;);\r\n              again = true;\r\n              break;\r\n            }\r\n          } else {\r\n            System.out.println(&quot;You need to tell us the amount of bottles you have in numbers.&quot;);\r\n            scanner.next();\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\nThe problem I have is that whenever i enter &quot;y&quot; to calculate again, instead of running the &quot;y&quot; case, it runs the default one. I did research, even talked to ChatGPT but nothing works. Im thinking the problem here lies within scanner, but thats just me.\r\n\r\nHelp would be much appreciated. ","title":"Scanner is giving me trouble in Java","body":"<p>I am writing a code to calculate the amount of crates you need depending on the amount of bottles you have.</p>\n<p>6 bottles equal 1 crate.</p>\n<p>For example, if you'd input 4 bottles, the output would be 1 crate.\nIf you'd input 9 bottles, you'd get 2 crates etc..</p>\n<p>Now I am facing some trouble trying to give the user a choice if they want to calculate again or not.\nHeres my code:</p>\n<pre><code>import java.util.*;\n\npublic class Main {\n  public static void main(String[] args) {\n    Scanner scanner = new Scanner(System.in);\n\n    boolean again = true;\n    boolean loop = true;\n\n    while (again) {\n      System.out.println(&quot;CRATE CALCULATION&quot;);\n      System.out.println(&quot;==================&quot;);\n      System.out.println(&quot;Number of bottles?: &quot;);\n\n      int bottles;\n      if (scanner.hasNextInt()) {\n        bottles = scanner.nextInt();\n        if (bottles &lt;= 0) {\n          System.out.println(&quot;You dont need any crates!&quot;);\n        } else {\n          int crates = (bottles + 5) / 6;\n          System.out.println(&quot;You need &quot; + crates + &quot; crates!&quot;);\n        }\n\n        System.out.println(&quot;Do you want to calculate again? (y/n)&quot;);\n        String choice = scanner.nextLine();\n        scanner.nextLine();\n\n        switch (choice) {\n        case &quot;y&quot;:\n          again = true;\n          break;\n        case &quot;n&quot;:\n          again = false;\n          break;\n        default:\n          System.out.println(&quot;Invalid choice. Lets try again.&quot;);\n          again = true;\n          break;\n        }\n      } else {\n        System.out.println(&quot;You need to tell us the amount of bottles you have in numbers.&quot;);\n        scanner.next();\n      }\n    }\n  }\n}\n</code></pre>\n<p>The problem I have is that whenever i enter &quot;y&quot; to calculate again, instead of running the &quot;y&quot; case, it runs the default one. I did research, even talked to ChatGPT but nothing works. Im thinking the problem here lies within scanner, but thats just me.</p>\n<p>Help would be much appreciated.</p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":29495283,"reputation":1,"user_id":22603505,"display_name":"Jo&#227;o Rodolpho"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695246200,"creation_date":1695246200,"answer_id":77146065,"question_id":75924030,"body_markdown":"had the same doubt, you just need to get this extension.\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wRqGd.png\r\n\r\nif you dont want to open the url the name of the extension is spring boot dashboard","title":"How do I enable hot reload in Java Spring Boot using VSCode?","body":"<p>had the same doubt, you just need to get this extension.\n<a href=\"https://i.stack.imgur.com/wRqGd.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>if you dont want to open the url the name of the extension is spring boot dashboard</p>\n"}],"owner":{"account_id":21481623,"reputation":1446,"user_id":15828895,"display_name":"plutownium"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":607,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1695246200,"creation_date":1680558763,"question_id":75924030,"body_markdown":"I am trying to hot reload, meaning auto-restart the server on code change, in Java using Spring Boot and VSCode.\r\n\r\nI expect the following steps to be enough:\r\n\r\n1. Update `pom.xml`:\r\n\r\n```\r\n\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\n\r\n[This post says its enough][1]\r\n\r\nI run again using `mvn spring-boot:run` and expect updating code to restart it\r\n\r\nMy actual result is that it stays the same as prior to the code change\r\n\r\nI also tried: [![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/46144346/hot-swapping-in-spring-boot-in-visual-studio-code\r\n  [2]: https://i.stack.imgur.com/EhfZ2.png","title":"How do I enable hot reload in Java Spring Boot using VSCode?","body":"<p>I am trying to hot reload, meaning auto-restart the server on code change, in Java using Spring Boot and VSCode.</p>\n<p>I expect the following steps to be enough:</p>\n<ol>\n<li>Update <code>pom.xml</code>:</li>\n</ol>\n<pre><code>    &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/46144346/hot-swapping-in-spring-boot-in-visual-studio-code\">This post says its enough</a></p>\n<p>I run again using <code>mvn spring-boot:run</code> and expect updating code to restart it</p>\n<p>My actual result is that it stays the same as prior to the code change</p>\n<p>I also tried: <a href=\"https://i.stack.imgur.com/EhfZ2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EhfZ2.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","tomcat","jvm","heap-memory","visualvm"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1695246573,"post_id":77146057,"comment_id":136000594,"body_markdown":"If a GC causes the memory to go down, it&#39;s probably not an application issue. Try changing the GC settings (maybe so it is doing collections earlier or that you have a bigger region size for the young generation). My guess is that you just have a lot of objects in the old generation.","body":"If a GC causes the memory to go down, it&#39;s probably not an application issue. Try changing the GC settings (maybe so it is doing collections earlier or that you have a bigger region size for the young generation). My guess is that you just have a lot of objects in the old generation."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1695247507,"post_id":77146057,"comment_id":136000681,"body_markdown":"If the heap size gradually reaches 6G, and then falls without triggering a GC overhead limit exceeded exception, then I&#39;d say everything is okay. Do you have a symptom (e.g. some requests take much longer than expected) which makes you think something is wrong?","body":"If the heap size gradually reaches 6G, and then falls without triggering a GC overhead limit exceeded exception, then I&#39;d say everything is okay. Do you have a symptom (e.g. some requests take much longer than expected) which makes you think something is wrong?"},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1695248157,"post_id":77146057,"comment_id":136000768,"body_markdown":"jvm can do that automatically when [there&#39;s memory error](https://www.baeldung.com/java-heap-dump-capture#automatically)","body":"jvm can do that automatically when <a href=\"https://www.baeldung.com/java-heap-dump-capture#automatically\" rel=\"nofollow noreferrer\">there&#39;s memory error</a>"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1695252519,"post_id":77146057,"comment_id":136001159,"body_markdown":"This sounds entirely, 100% normal for a JVM application.  It is normal for it to consume all the memory it is given access to, to perform a garbage collection when that threshold is reached, and for that number to go down.  If you want it to consume less memory, cap the heap size lower.","body":"This sounds entirely, 100% normal for a JVM application.  It is normal for it to consume all the memory it is given access to, to perform a garbage collection when that threshold is reached, and for that number to go down.  If you want it to consume less memory, cap the heap size lower."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1695266219,"post_id":77146057,"comment_id":136002299,"body_markdown":"According to https://stackoverflow.com/a/51448003/139985, you can use `jcmd` (without the `:live` option) to get a heap dump without running the GC first.  Try running `jcmd` in a shell on the remote machine if you can&#39;t figure out how to make VisualVM do it.","body":"According to <a href=\"https://stackoverflow.com/a/51448003/139985\">stackoverflow.com/a/51448003/139985</a>, you can use <code>jcmd</code> (without the <code>:live</code> option) to get a heap dump without running the GC first.  Try running <code>jcmd</code> in a shell on the remote machine if you can&#39;t figure out how to make VisualVM do it."}],"owner":{"account_id":21006817,"reputation":23,"user_id":15436415,"display_name":"DonBege"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695246074,"creation_date":1695246074,"question_id":77146057,"body_markdown":"I am using VisualVM to extract a Heap Dump from a tomcat that is consuming a lot of memory resources. It starts consuming around 1GB but gradually reaches 5-6GB. It has peaks where the CPU is at 100% and where the memory is close to 99%.\r\n\r\nI am trying to investigate this event by extracting heap dump, but every time I run a Heap Dump with the VisualVM software it runs a full Garbage Collection first which causes the heap memory to go from 5-6GB at the time of the request to around 1GB, and the heap dump extract that it extracts is 1GB, when I want it to extract the extract from the moment before the GC\r\n\r\nReading this thread https://stackoverflow.com/questions/1268336/how-can-i-take-a-heap-dump-on-java-5-without-garbage-collecting-first I have seen that I should use the value of &quot;live&quot; to false to prevent this from happening, but I can&#39;t find how to do it in VisualVM. I am connecting to the server using an SSH connection and tunneling, so the remote server does not have JDK installed.\r\n\r\nHow can I extract the entire heap dump remotely? Any advice to deal with this memory consumption? I am investigating the code in case there could be an error that causes consumption, but the fact that when a full GC is run the memory is restored to normal levels makes me suspicious.\r\n","title":"Execute heap dump in remote Java 8+ JVM without first executing a Garbage Collecting","body":"<p>I am using VisualVM to extract a Heap Dump from a tomcat that is consuming a lot of memory resources. It starts consuming around 1GB but gradually reaches 5-6GB. It has peaks where the CPU is at 100% and where the memory is close to 99%.</p>\n<p>I am trying to investigate this event by extracting heap dump, but every time I run a Heap Dump with the VisualVM software it runs a full Garbage Collection first which causes the heap memory to go from 5-6GB at the time of the request to around 1GB, and the heap dump extract that it extracts is 1GB, when I want it to extract the extract from the moment before the GC</p>\n<p>Reading this thread <a href=\"https://stackoverflow.com/questions/1268336/how-can-i-take-a-heap-dump-on-java-5-without-garbage-collecting-first\">How can I take a heap dump on Java 5 without garbage collecting first?</a> I have seen that I should use the value of &quot;live&quot; to false to prevent this from happening, but I can't find how to do it in VisualVM. I am connecting to the server using an SSH connection and tunneling, so the remote server does not have JDK installed.</p>\n<p>How can I extract the entire heap dump remotely? Any advice to deal with this memory consumption? I am investigating the code in case there could be an error that causes consumption, but the fact that when a full GC is run the memory is restored to normal levels makes me suspicious.</p>\n"},{"tags":["java","loops","filter","java-stream"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1694474923,"post_id":77085228,"comment_id":135893012,"body_markdown":"Strings should be compared with `equals`, not with `=`. Nothing is compared with `=`.","body":"Strings should be compared with <code>equals</code>, not with <code>=</code>. Nothing is compared with <code>=</code>."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":3,"creation_date":1694481835,"post_id":77085228,"comment_id":135893457,"body_markdown":"Why not use `HashMaps` instead of Lists? Then the lookups and removals are *O(1)* and the whole thing becomes linear.","body":"Why not use <code>HashMaps</code> instead of Lists? Then the lookups and removals are <i>O(1)</i> and the whole thing becomes linear."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1694525756,"post_id":77085228,"comment_id":135900289,"body_markdown":"`person.firstName = p.firstName` is an *assignment*; it changes the variable `person.firstName` to point to the same string as `p.firstName`. I leave as an exercise for you to find out what `Boolean.parseBoolean()` is really for and why it isnt appropriate here. As a general advice: dont insert code into your program whose purpose you dont understand.","body":"<code>person.firstName = p.firstName</code> is an <i>assignment</i>; it changes the variable <code>person.firstName</code> to point to the same string as <code>p.firstName</code>. I leave as an exercise for you to find out what <code>Boolean.parseBoolean()</code> is really for and why it isnt appropriate here. As a general advice: dont insert code into your program whose purpose you dont understand."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1694600701,"post_id":77085228,"comment_id":135911646,"body_markdown":"Step 1: count the occurrences of names in the second list (into a mutable map): `Map&lt;String,Integer&gt; counts = people2.stream() .collect(Collectors.toMap(Person::getFirstName, p -&gt; 1, Integer::sum, HashMap::new));` Step 2: remove each person from the first list if their count is still not negative after decrementing: `people1.removeIf(p -&gt; counts.merge(p.getFirstName(), -1, Integer::sum) &gt;= 0);` Thats it. This example assumes that you have a method like `public String getFirstName() { return firstName; }` in your `Person` class as the `firstName` field is `private`.","body":"Step 1: count the occurrences of names in the second list (into a mutable map): <code>Map&lt;String,Integer&gt; counts = people2.stream() .collect(Collectors.toMap(Person::getFirstName, p -&gt; 1, Integer::sum, HashMap::new));</code> Step 2: remove each person from the first list if their count is still not negative after decrementing: <code>people1.removeIf(p -&gt; counts.merge(p.getFirstName(), -1, Integer::sum) &gt;= 0);</code> Thats it. This example assumes that you have a method like <code>public String getFirstName() { return firstName; }</code> in your <code>Person</code> class as the <code>firstName</code> field is <code>private</code>."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1694601061,"post_id":77085228,"comment_id":135911720,"body_markdown":"https://ideone.com/QmqCpE","body":"<a href=\"https://ideone.com/QmqCpE\" rel=\"nofollow noreferrer\">ideone.com/QmqCpE</a>"}],"answers":[{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1694488363,"post_id":77085325,"comment_id":135893896,"body_markdown":"*&quot;This algorithm would scale linearly.&quot;* - But it is worth noting that it also requires `O(N)` additional space.","body":"<i>&quot;This algorithm would scale linearly.&quot;</i> - But it is worth noting that it also requires <code>O(N)</code> additional space."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1694500084,"post_id":77085325,"comment_id":135894951,"body_markdown":"@StephenC OK, but only references to already created objects are held in the map, (plus entries, but they too have a tiny footprint) so O(tiny N) space","body":"@StephenC OK, but only references to already created objects are held in the map, (plus entries, but they too have a tiny footprint) so O(tiny N) space"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1694502804,"post_id":77085325,"comment_id":135895393,"body_markdown":"The footprint of a `Map.Entry` is significantly more than a reference.  It is 3 references + an `int` + an object header.  (For a 64 bit JVM without compressed OOPS, it is 40 bytes per entry, I think.)  And then there is the `HashMap`&#39;s hash array whose size is proportional to the number of entries (until N gets too large).  And the `ArrayList&lt;Person&gt;` value objects which comprise a Java object with a private primitive array.  It could add up to O(*significant* N) ... depending on your assumptions.","body":"The footprint of a <code>Map.Entry</code> is significantly more than a reference.  It is 3 references + an <code>int</code> + an object header.  (For a 64 bit JVM without compressed OOPS, it is 40 bytes per entry, I think.)  And then there is the <code>HashMap</code>&#39;s hash array whose size is proportional to the number of entries (until N gets too large).  And the <code>ArrayList&lt;Person&gt;</code> value objects which comprise a Java object with a private primitive array.  It could add up to O(<i>significant</i> N) ... depending on your assumptions."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1694526614,"post_id":77085325,"comment_id":135900534,"body_markdown":"Since the OPs code is not even remotely correct, its pointless to discuss its main efficiency problem. Then, the code is unnecessarily complicated, `map.getOrDefault(p.getFirstName(), null)` is not better than `map.get(p.getFirstName())` which will return `null` for absent keys anyway. Further, when the complexity is O(n * k) and you dont know anything about the number of people with the same name (k), then its still O(n&#178;), as O() denotes the *worst case*. Which could easily avoided by grouping into `ArrayDeque` instead of `ArrayList`, then, removing the first item is O(1).","body":"Since the OPs code is not even remotely correct, its pointless to discuss its main efficiency problem. Then, the code is unnecessarily complicated, <code>map.getOrDefault(p.getFirstName(), null)</code> is not better than <code>map.get(p.getFirstName())</code> which will return <code>null</code> for absent keys anyway. Further, when the complexity is O(n * k) and you dont know anything about the number of people with the same name (k), then its still O(n&#178;), as O() denotes the <i>worst case</i>. Which could easily avoided by grouping into <code>ArrayDeque</code> instead of <code>ArrayList</code>, then, removing the first item is O(1)."}],"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695245863,"creation_date":1694475728,"answer_id":77085325,"question_id":77085228,"body_markdown":"The main efficiency problem you have is 2 nested loops, resulting in O(n&lt;sup&gt;2&lt;/sup&gt;) [time complexity][1].\r\n\r\nHowever, you can do it O(n) time complexity by using a more efficient way to find the matching person from `people1` to remove.\r\n\r\n```\r\nMap&lt;String, Deque&lt;Person&gt;&gt; map = people1.stream().collect(groupingBy(Person::getFirstName, toCollection(ArrayDeque::new)));\r\n\r\nfor (Person p : people2) {\r\n    Optional.ofNullable(map.get(p.getFirstName()))\r\n      .filter(list -&gt; !list.isEmpty())\r\n      .ifPresent(Deque::remove);\r\n}\r\n\r\npeople1 = map.values().stream().flatMap(Deque::stream).toList();\r\n```\r\n\r\nThis creates a map (actually as `HashMap`, which has constant time efficiency) to find the list of people with the same first name. The lists are `LinkedList`, which has O(1) time complexity for removing the first element.\r\n\r\nThen, for each person in list 2, the list of people with the same first name is retrieved from the map and if it exists and is not empty, the first person is removed from it.\r\n\r\nAt the end of the loop, list 1 is constructed from whatever people remain in the map.\r\n\r\nThis algorithm scales linearly (both time and space).\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Time_complexity","title":"Return the difference between two lists by comparing key values, and not the entire objects in Java","body":"<p>The main efficiency problem you have is 2 nested loops, resulting in O(n<sup>2</sup>) <a href=\"https://en.wikipedia.org/wiki/Time_complexity\" rel=\"nofollow noreferrer\">time complexity</a>.</p>\n<p>However, you can do it O(n) time complexity by using a more efficient way to find the matching person from <code>people1</code> to remove.</p>\n<pre><code>Map&lt;String, Deque&lt;Person&gt;&gt; map = people1.stream().collect(groupingBy(Person::getFirstName, toCollection(ArrayDeque::new)));\n\nfor (Person p : people2) {\n    Optional.ofNullable(map.get(p.getFirstName()))\n      .filter(list -&gt; !list.isEmpty())\n      .ifPresent(Deque::remove);\n}\n\npeople1 = map.values().stream().flatMap(Deque::stream).toList();\n</code></pre>\n<p>This creates a map (actually as <code>HashMap</code>, which has constant time efficiency) to find the list of people with the same first name. The lists are <code>LinkedList</code>, which has O(1) time complexity for removing the first element.</p>\n<p>Then, for each person in list 2, the list of people with the same first name is retrieved from the map and if it exists and is not empty, the first person is removed from it.</p>\n<p>At the end of the loop, list 1 is constructed from whatever people remain in the map.</p>\n<p>This algorithm scales linearly (both time and space).</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694550450,"creation_date":1694482545,"answer_id":77085618,"question_id":77085228,"body_markdown":"&gt; _&quot;... I want to iterate through the `people2` list, and if a person with the same name exists in the `people1` list, then find the first match and remove it (only caring about name, not age). ...&quot;_\r\n\r\nUse an _[Iterator](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Iterator.html)_ to traverse each list.\r\n\r\n```java\r\nIterator&lt;Person&gt; x = people1.iterator();\r\nIterator&lt;Person&gt; y = people2.iterator();\r\nString s;\r\nwhile (x.hasNext()) {\r\n    s = x.next().getFirstName();\r\n    while (y.hasNext()) {\r\n        if (y.next().getFirstName().equals(s)) {\r\n            x.remove();\r\n            y.remove();\r\n            break;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nOr, if you&#39;re utilizing _Stream#filter_, use a _while-loop_ for the _people2_ list, so you can remove the value.\r\n\r\n```java\r\npeople1 =\r\n    people1.stream().filter(x -&gt; {\r\n        Iterator&lt;Person&gt; i = people2.iterator();\r\n        String s = x.getFirstName();\r\n        while (i.hasNext()) {\r\n            if (i.next().getFirstName().equals(s)) {\r\n                i.remove();\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }).toList();\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n[John 61, John 13]\r\n```","title":"Return the difference between two lists by comparing key values, and not the entire objects in Java","body":"<blockquote>\n<p><em>&quot;... I want to iterate through the <code>people2</code> list, and if a person with the same name exists in the <code>people1</code> list, then find the first match and remove it (only caring about name, not age). ...&quot;</em></p>\n</blockquote>\n<p>Use an <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Iterator.html\" rel=\"nofollow noreferrer\">Iterator</a></em> to traverse each list.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Iterator&lt;Person&gt; x = people1.iterator();\nIterator&lt;Person&gt; y = people2.iterator();\nString s;\nwhile (x.hasNext()) {\n    s = x.next().getFirstName();\n    while (y.hasNext()) {\n        if (y.next().getFirstName().equals(s)) {\n            x.remove();\n            y.remove();\n            break;\n        }\n    }\n}\n</code></pre>\n<p>Or, if you're utilizing <em>Stream#filter</em>, use a <em>while-loop</em> for the <em>people2</em> list, so you can remove the value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>people1 =\n    people1.stream().filter(x -&gt; {\n        Iterator&lt;Person&gt; i = people2.iterator();\n        String s = x.getFirstName();\n        while (i.hasNext()) {\n            if (i.next().getFirstName().equals(s)) {\n                i.remove();\n                return false;\n            }\n        }\n        return true;\n    }).toList();\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>[John 61, John 13]\n</code></pre>\n"}],"owner":{"account_id":27863021,"reputation":49,"user_id":21275121,"display_name":"Sherbet Head"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1695245863,"creation_date":1694473782,"question_id":77085228,"body_markdown":"I have two lists from the same class (e.g. a Person class with a name and age property), and I am trying to come up with an efficient way to remove elements from List A, if they appear in List B, but only if the name property matches (ignoring age). I don&#39;t want to remove ALL values that have a matching name from List B, but rather remove one value from List A for every matching name in List B.\r\n\r\nHere&#39;s an example: \r\n\r\n```\r\npublic class Person {\r\n    private String firstName;\r\n    private Integer age;\r\n\r\n    public Person(String firstName, Integer age) {\r\n        this.firstName = firstName;\r\n        this.age = age;\r\n    }\r\n}\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n\r\n        Person p1 = new Person(&quot;John&quot;, 25);\r\n        Person p2 = new Person(&quot;Lisa&quot;, 54);\r\n        Person p3 = new Person(&quot;Mike&quot;, 61);\r\n        Person p4 = new Person(&quot;John&quot;, 61);\r\n        Person p5 = new Person(&quot;John&quot;, 13);\r\n        List&lt;Person&gt; people1 = new ArrayList&lt;Person&gt;();\r\n        people1.add(p1);\r\n        people1.add(p2);\r\n        people1.add(p3);\r\n        people1.add(p4);\r\n        people1.add(p5);\r\n\r\n        Person p6 = new Person(&quot;John&quot;, 88);\r\n        Person p7 = new Person(&quot;Lisa&quot;, 66);\r\n        Person p8 = new Person(&quot;Mike&quot;, 71);\r\n        List&lt;Person&gt; people2 = new ArrayList&lt;Person&gt;();\r\n        people2.add(p6);\r\n        people2.add(p7);\r\n        people2.add(p8);\r\n\r\n\r\n        for (Person p : people2) {\r\n            people1.stream()\r\n                .filter(person -&gt; Boolean.parseBoolean(person.firstName = p.firstName))\r\n                .findFirst()\r\n                .ifPresent(person -&gt; people1.remove(person));\r\n        } // This is what i&#39;ve tried, but it doesn&#39;t work and seems very inefficient\r\n\r\n        System.out.println(people1);\r\n    }\r\n```\r\nBasically, I want to iterate through the `people2` list, and if a person with the same name exists in the `people1` list, then find the first match and remove it (only caring about name, not age).\r\n\r\nDesired Result: A list containing \r\n\r\n - John, 61\r\n - John, 13","title":"Return the difference between two lists by comparing key values, and not the entire objects in Java","body":"<p>I have two lists from the same class (e.g. a Person class with a name and age property), and I am trying to come up with an efficient way to remove elements from List A, if they appear in List B, but only if the name property matches (ignoring age). I don't want to remove ALL values that have a matching name from List B, but rather remove one value from List A for every matching name in List B.</p>\n<p>Here's an example:</p>\n<pre><code>public class Person {\n    private String firstName;\n    private Integer age;\n\n    public Person(String firstName, Integer age) {\n        this.firstName = firstName;\n        this.age = age;\n    }\n}\n\npublic class Main {\n    public static void main(String[] args) {\n\n        Person p1 = new Person(&quot;John&quot;, 25);\n        Person p2 = new Person(&quot;Lisa&quot;, 54);\n        Person p3 = new Person(&quot;Mike&quot;, 61);\n        Person p4 = new Person(&quot;John&quot;, 61);\n        Person p5 = new Person(&quot;John&quot;, 13);\n        List&lt;Person&gt; people1 = new ArrayList&lt;Person&gt;();\n        people1.add(p1);\n        people1.add(p2);\n        people1.add(p3);\n        people1.add(p4);\n        people1.add(p5);\n\n        Person p6 = new Person(&quot;John&quot;, 88);\n        Person p7 = new Person(&quot;Lisa&quot;, 66);\n        Person p8 = new Person(&quot;Mike&quot;, 71);\n        List&lt;Person&gt; people2 = new ArrayList&lt;Person&gt;();\n        people2.add(p6);\n        people2.add(p7);\n        people2.add(p8);\n\n\n        for (Person p : people2) {\n            people1.stream()\n                .filter(person -&gt; Boolean.parseBoolean(person.firstName = p.firstName))\n                .findFirst()\n                .ifPresent(person -&gt; people1.remove(person));\n        } // This is what i've tried, but it doesn't work and seems very inefficient\n\n        System.out.println(people1);\n    }\n</code></pre>\n<p>Basically, I want to iterate through the <code>people2</code> list, and if a person with the same name exists in the <code>people1</code> list, then find the first match and remove it (only caring about name, not age).</p>\n<p>Desired Result: A list containing</p>\n<ul>\n<li>John, 61</li>\n<li>John, 13</li>\n</ul>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9962,"page":172,"page_size":100}
