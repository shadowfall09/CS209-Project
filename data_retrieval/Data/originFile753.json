{"items":[{"tags":["java","mysql"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1672933135,"post_id":75020897,"comment_id":132388825,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":27443716,"reputation":1,"user_id":20937918,"display_name":"Joao Castilhos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672933112,"creation_date":1672933004,"question_id":75020897,"body_markdown":"I&#39;m new in Java programming so that&#39;s why I&#39;m here seeking your kind help stackoverflowers.\r\n\r\nI have this problem which I could not find the solution on internet, I hope someone could inform me where is my mistake and how can I fix it.\r\n\r\nMy problem is that when I try to insert the data, everything goes fine, the window opens, I can insert the data, button looks just fine.\r\n\r\nBut it gives me this message \r\n\r\njava.sql.SQLIntegrityConstraintViolationException: Column &#39;prenom&#39; cannot be null\r\n\r\nWhich I assume was a problem with php mySQL, then I changed all variables to NULL, activating the button &quot;Null&quot; for all of them.\r\n\r\nIt then WORKED, but all informations were saved as &quot;null&quot; in my database, which didn&#39;t really solve my problem.\r\n\r\nMy goal is to insert data (name, lastname, phone, email) into a data base (php mySQL) through eclipse. I did a program which I&#39;m obliged to use window builder to insert that data, so graphical user interface MUST be used \r\n\r\nWhat I expect to happen is to save data normally. Like, name = Mike, lastname = Tyson, phone = +55555, email = mtyson@gmail.com\r\nAnd it shows in my database, not null message.\r\n\r\nThank you everyone\r\n\r\n\r\n\r\n\r\n```\r\npackage interfaceGraphique;\r\n\r\n\r\nimport accesBaseDeDonnees.ClientsBDD;\r\nimport entites.Clients;\r\n\r\nimport java.awt.EventQueue;\r\n\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.border.EmptyBorder;\r\nimport javax.swing.AbstractButton;\r\nimport javax.swing.JButton;\r\nimport java.awt.event.ActionListener;\r\nimport java.sql.Connection;\r\nimport java.awt.event.ActionEvent;\r\nimport javax.swing.JTextField;\r\nimport javax.swing.JLabel;\r\nimport java.awt.Color;\r\n\r\npublic class InterfaceClients extends JFrame {\r\n\r\n\tstatic InterfaceClients window;\r\n\t\r\n\tprivate JPanel contentPane;\r\n\tprivate JTextField txtPrenom;\r\n\tprivate JTextField txtNom;\r\n\tprivate JTextField txtTelephone;\r\n\tprivate JTextField txtEmail;\r\n\r\n\t/**\r\n\t * Launch the application.\r\n\t */\r\n\tpublic static void main(String[] args) {\r\n\t\tEventQueue.invokeLater(new Runnable() {\r\n\t\t\tpublic void run() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tInterfaceClients frame = new InterfaceClients();\r\n\t\t\t\t\tframe.setVisible(true);\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Create the frame.\r\n\t */\r\n\tpublic InterfaceClients() {\r\n\t\tsetBackground(new Color(0, 0, 0));\r\n\t\tsetOpacity(1.0f);\r\n\t\tsetTitle(&quot;Ajouter un client&quot;);\r\n\t\t\r\n\t\t\r\n\t\tsetDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\tsetBounds(100, 100, 450, 300);\r\n\t\tcontentPane = new JPanel();\r\n\t\tcontentPane.setBorder(new EmptyBorder(5, 5, 5, 5));\r\n\r\n\t\tsetContentPane(contentPane);\r\n\t\tcontentPane.setLayout(null);\r\n\t\t\r\n\t\tJButton btnNewButton = new JButton(&quot;Enregistrer&quot;);\r\n\t\tbtnNewButton.addActionListener(new ActionListener() {\r\n\t\t\tprivate AbstractButton labelResult;\r\n\t\t\t\r\n\t\t\t@Override\r\n\t\t\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t\t\tString prenom = txtPrenom.getText();\r\n\t\t\t\tString nom = txtNom.getText();\r\n\t\t\t\tString telephone = txtTelephone.getText();\r\n\t\t\t\tString email = txtEmail.getText();\r\n\t\t\t\t\r\n\t\t\t\tClients Clients = new Clients(prenom, nom, telephone, email);\r\n\t\t\t\tClientsBDD clientsBDD = new ClientsBDD();\r\n\t\t\t\tConnection cn = clientsBDD.makeConnection();\r\n\t\t\t\tclientsBDD.insert(Clients, cn);\r\n\t\t\t\tclientsBDD.closeConnection(cn);\r\n\t\t\t\t\r\n\t\t\t\t//labelResult = null;\r\n\t\t\t\t//labelResult.setText(&quot;Client ajoute avec succes&quot;);\r\n\t\t\t\t}\r\n\t\t});\r\n\t\tbtnNewButton.setBounds(45, 227, 112, 23);\r\n\t\tcontentPane.add(btnNewButton);\r\n\t\t\r\n\t\ttxtPrenom = new JTextField();\r\n\t\ttxtPrenom.setBounds(124, 39, 258, 20);\r\n\t\tcontentPane.add(txtPrenom);\r\n\t\ttxtPrenom.setColumns(10);\r\n\t\t\r\n\t\ttxtNom = new JTextField();\r\n\t\ttxtNom.setColumns(10);\r\n\t\ttxtNom.setBounds(124, 82, 258, 20);\r\n\t\tcontentPane.add(txtNom);\r\n\t\t\r\n\t\ttxtTelephone = new JTextField();\r\n\t\ttxtTelephone.setColumns(10);\r\n\t\ttxtTelephone.setBounds(124, 125, 258, 20);\r\n\t\tcontentPane.add(txtTelephone);\r\n\t\t\r\n\t\ttxtEmail = new JTextField();\r\n\t\ttxtEmail.setColumns(10);\r\n\t\ttxtEmail.setBounds(124, 166, 258, 20);\r\n\t\tcontentPane.add(txtEmail);\r\n\t\t\r\n\t\tJLabel lblNewLabel = new JLabel(&quot;Prenom&quot;);\r\n\t\tlblNewLabel.setBounds(45, 42, 67, 14);\r\n\t\tcontentPane.add(lblNewLabel);\r\n\t\t\r\n\t\tJLabel lblMarque = new JLabel(&quot;Nom&quot;);\r\n\t\tlblMarque.setBounds(45, 85, 46, 14);\r\n\t\tcontentPane.add(lblMarque);\r\n\t\t\r\n\t\tJLabel lblNewLabel_1_1 = new JLabel(&quot;Telephone&quot;);\r\n\t\tlblNewLabel_1_1.setBounds(45, 128, 67, 14);\r\n\t\tcontentPane.add(lblNewLabel_1_1);\r\n\t\t\r\n\t\tJLabel lblNewLabel_1_1_1 = new JLabel(&quot;Email&quot;);\r\n\t\tlblNewLabel_1_1_1.setBounds(45, 169, 89, 14);\r\n\t\tcontentPane.add(lblNewLabel_1_1_1);\r\n\t\t\r\n\t\tJLabel labelResult = new JLabel(&quot;&quot;);\r\n\t\tlabelResult.setBounds(194, 229, 227, 16);\r\n\t\tcontentPane.add(labelResult);\r\n\t}\r\n}\r\n```\r\n","title":"java.sql.SQLIntegrityConstraintViolationException: Column &#39;prenom&#39; cannot be null","body":"<p>I'm new in Java programming so that's why I'm here seeking your kind help stackoverflowers.</p>\n<p>I have this problem which I could not find the solution on internet, I hope someone could inform me where is my mistake and how can I fix it.</p>\n<p>My problem is that when I try to insert the data, everything goes fine, the window opens, I can insert the data, button looks just fine.</p>\n<p>But it gives me this message</p>\n<p>java.sql.SQLIntegrityConstraintViolationException: Column 'prenom' cannot be null</p>\n<p>Which I assume was a problem with php mySQL, then I changed all variables to NULL, activating the button &quot;Null&quot; for all of them.</p>\n<p>It then WORKED, but all informations were saved as &quot;null&quot; in my database, which didn't really solve my problem.</p>\n<p>My goal is to insert data (name, lastname, phone, email) into a data base (php mySQL) through eclipse. I did a program which I'm obliged to use window builder to insert that data, so graphical user interface MUST be used</p>\n<p>What I expect to happen is to save data normally. Like, name = Mike, lastname = Tyson, phone = +55555, email = mtyson@gmail.com\nAnd it shows in my database, not null message.</p>\n<p>Thank you everyone</p>\n<pre><code>package interfaceGraphique;\n\n\nimport accesBaseDeDonnees.ClientsBDD;\nimport entites.Clients;\n\nimport java.awt.EventQueue;\n\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.AbstractButton;\nimport javax.swing.JButton;\nimport java.awt.event.ActionListener;\nimport java.sql.Connection;\nimport java.awt.event.ActionEvent;\nimport javax.swing.JTextField;\nimport javax.swing.JLabel;\nimport java.awt.Color;\n\npublic class InterfaceClients extends JFrame {\n\n    static InterfaceClients window;\n    \n    private JPanel contentPane;\n    private JTextField txtPrenom;\n    private JTextField txtNom;\n    private JTextField txtTelephone;\n    private JTextField txtEmail;\n\n    /**\n     * Launch the application.\n     */\n    public static void main(String[] args) {\n        EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                try {\n                    InterfaceClients frame = new InterfaceClients();\n                    frame.setVisible(true);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n    }\n\n    /**\n     * Create the frame.\n     */\n    public InterfaceClients() {\n        setBackground(new Color(0, 0, 0));\n        setOpacity(1.0f);\n        setTitle(&quot;Ajouter un client&quot;);\n        \n        \n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        setBounds(100, 100, 450, 300);\n        contentPane = new JPanel();\n        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));\n\n        setContentPane(contentPane);\n        contentPane.setLayout(null);\n        \n        JButton btnNewButton = new JButton(&quot;Enregistrer&quot;);\n        btnNewButton.addActionListener(new ActionListener() {\n            private AbstractButton labelResult;\n            \n            @Override\n            public void actionPerformed(ActionEvent e) {\n                String prenom = txtPrenom.getText();\n                String nom = txtNom.getText();\n                String telephone = txtTelephone.getText();\n                String email = txtEmail.getText();\n                \n                Clients Clients = new Clients(prenom, nom, telephone, email);\n                ClientsBDD clientsBDD = new ClientsBDD();\n                Connection cn = clientsBDD.makeConnection();\n                clientsBDD.insert(Clients, cn);\n                clientsBDD.closeConnection(cn);\n                \n                //labelResult = null;\n                //labelResult.setText(&quot;Client ajoute avec succes&quot;);\n                }\n        });\n        btnNewButton.setBounds(45, 227, 112, 23);\n        contentPane.add(btnNewButton);\n        \n        txtPrenom = new JTextField();\n        txtPrenom.setBounds(124, 39, 258, 20);\n        contentPane.add(txtPrenom);\n        txtPrenom.setColumns(10);\n        \n        txtNom = new JTextField();\n        txtNom.setColumns(10);\n        txtNom.setBounds(124, 82, 258, 20);\n        contentPane.add(txtNom);\n        \n        txtTelephone = new JTextField();\n        txtTelephone.setColumns(10);\n        txtTelephone.setBounds(124, 125, 258, 20);\n        contentPane.add(txtTelephone);\n        \n        txtEmail = new JTextField();\n        txtEmail.setColumns(10);\n        txtEmail.setBounds(124, 166, 258, 20);\n        contentPane.add(txtEmail);\n        \n        JLabel lblNewLabel = new JLabel(&quot;Prenom&quot;);\n        lblNewLabel.setBounds(45, 42, 67, 14);\n        contentPane.add(lblNewLabel);\n        \n        JLabel lblMarque = new JLabel(&quot;Nom&quot;);\n        lblMarque.setBounds(45, 85, 46, 14);\n        contentPane.add(lblMarque);\n        \n        JLabel lblNewLabel_1_1 = new JLabel(&quot;Telephone&quot;);\n        lblNewLabel_1_1.setBounds(45, 128, 67, 14);\n        contentPane.add(lblNewLabel_1_1);\n        \n        JLabel lblNewLabel_1_1_1 = new JLabel(&quot;Email&quot;);\n        lblNewLabel_1_1_1.setBounds(45, 169, 89, 14);\n        contentPane.add(lblNewLabel_1_1_1);\n        \n        JLabel labelResult = new JLabel(&quot;&quot;);\n        labelResult.setBounds(194, 229, 227, 16);\n        contentPane.add(labelResult);\n    }\n}\n</code></pre>\n"},{"tags":["java","amazon-web-services","spring-boot","amazon-s3"],"answers":[{"tags":[],"owner":{"account_id":2486870,"reputation":685,"user_id":2165146,"display_name":"muhammed ozbilici"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672932972,"creation_date":1672932972,"answer_id":75020887,"question_id":75020392,"body_markdown":"You can use `GeneratePresignedUrlRequest`, try this ;\r\n\r\n    GeneratePresignedUrlRequest generatePresignedUrlRequest = new GeneratePresignedUrlRequest(S3_BUCKET_NAME, key);\r\n    generatePresignedUrlRequest.addRequestParameter(&quot;uploadId&quot;, uploadIdentifier);\r\n    generatePresignedUrlRequest.addRequestParameter(&quot;partNumber&quot;, Integer.toString(partNumber))\r\n    generatePresignedUrlRequest.putCustomRequestHeader(Headers.CONTENT_MD5, md5Hash);\r\n    generatePresignedUrlRequest.putCustomRequestHeader(Headers.CONTENT_LENGTH, Long.toString(contentLength));","title":"What is the best way to create multipart upload to a presigned url in aws s3 bucket?","body":"<p>You can use <code>GeneratePresignedUrlRequest</code>, try this ;</p>\n<pre><code>GeneratePresignedUrlRequest generatePresignedUrlRequest = new GeneratePresignedUrlRequest(S3_BUCKET_NAME, key);\ngeneratePresignedUrlRequest.addRequestParameter(&quot;uploadId&quot;, uploadIdentifier);\ngeneratePresignedUrlRequest.addRequestParameter(&quot;partNumber&quot;, Integer.toString(partNumber))\ngeneratePresignedUrlRequest.putCustomRequestHeader(Headers.CONTENT_MD5, md5Hash);\ngeneratePresignedUrlRequest.putCustomRequestHeader(Headers.CONTENT_LENGTH, Long.toString(contentLength));\n</code></pre>\n"}],"owner":{"account_id":15704117,"reputation":83,"user_id":11916606,"display_name":"Artem Causelove"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1672932972,"creation_date":1672930693,"question_id":75020392,"body_markdown":"I want to generate a presign url(with upload rights only) and share it with my second application, so the second application can upload multipart file to it. How can I achieve this with java + spring boot ? \r\nP.S. all the solutions I googled work only for single upload but not for multipart.","title":"What is the best way to create multipart upload to a presigned url in aws s3 bucket?","body":"<p>I want to generate a presign url(with upload rights only) and share it with my second application, so the second application can upload multipart file to it. How can I achieve this with java + spring boot ?\nP.S. all the solutions I googled work only for single upload but not for multipart.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1672903883,"post_id":75011130,"comment_id":132378965,"body_markdown":"Have you read the error? You get a validation error which tries to redirect to `/error` (which is the default behavior), for some reason your `/error` page is only visible by fully authenticated users, it probably not in your `permitAll` list.","body":"Have you read the error? You get a validation error which tries to redirect to <code>&#47;error</code> (which is the default behavior), for some reason your <code>&#47;error</code> page is only visible by fully authenticated users, it probably not in your <code>permitAll</code> list."},{"owner":{"account_id":27367851,"reputation":71,"user_id":20874384,"display_name":"vw0389"},"score":0,"creation_date":1672932824,"post_id":75011130,"comment_id":132388677,"body_markdown":"Thank you, I had no idea that was how it worked.  I had not explicity permitted /error to all users w/o a jwt, so it was giving an auth error.","body":"Thank you, I had no idea that was how it worked.  I had not explicity permitted /error to all users w/o a jwt, so it was giving an auth error."}],"answers":[{"tags":[],"owner":{"account_id":27367851,"reputation":71,"user_id":20874384,"display_name":"vw0389"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672932882,"creation_date":1672932882,"answer_id":75020870,"question_id":75011130,"body_markdown":"added\r\n```\r\n.requestMatchers(&quot;/error&quot;).permitAll()\r\n```\r\nTo my filterChain in my WebSecurityConfig file. I did not know that when @Validated fails to validate it redirects to `/error`","title":"Spring @Validated is appears to be giving AuthenticationException","body":"<p>added</p>\n<pre><code>.requestMatchers(&quot;/error&quot;).permitAll()\n</code></pre>\n<p>To my filterChain in my WebSecurityConfig file. I did not know that when @Validated fails to validate it redirects to <code>/error</code></p>\n"}],"owner":{"account_id":27367851,"reputation":71,"user_id":20874384,"display_name":"vw0389"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75020870,"answer_count":1,"score":-1,"last_activity_date":1672932882,"creation_date":1672865373,"question_id":75011130,"body_markdown":"I&#39;m trying to make a blog w/ spring boot. I am using @Validated and groupings for certain requests.  For Example hitting my signup route, I validate the email using @NotBlank and @Email on my User model\r\n\r\nController:\r\n```\r\npackage com.vweinert.fedditbackend.controllers;\r\n\r\nimport com.vweinert.fedditbackend.security.jwt.AuthEntryPointJwt;\r\nimport org.modelmapper.ModelMapper;\r\n\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.validation.annotation.Validated;\r\nimport org.springframework.web.bind.annotation.CrossOrigin;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport com.vweinert.fedditbackend.entities.User;\r\nimport com.vweinert.fedditbackend.request.auth.LoginRequest;\r\nimport com.vweinert.fedditbackend.request.auth.SignupRequest;\r\nimport com.vweinert.fedditbackend.dto.AuthDto;\r\nimport com.vweinert.fedditbackend.service.inter.UserService;\r\n@CrossOrigin(origins = &quot;*&quot;, maxAge = 3600)\r\n@RestController\r\n@RequestMapping(&quot;/api/auth&quot;)\r\npublic class AuthController {\r\n    private final UserService userService;\r\n    private final ModelMapper modelMapper;\r\n    private static final Logger logger = LoggerFactory.getLogger(AuthController.class);\r\n    public AuthController(UserService userService, ModelMapper modelMapper) {\r\n        this.userService = userService;\r\n        this.modelMapper = modelMapper;\r\n        logger.debug(&quot;Auth controller initialized&quot;);\r\n    }\r\n\r\n    @PostMapping(&quot;/signin&quot;)\r\n    public ResponseEntity&lt;?&gt; loginUser(@Validated(LoginRequest.class) @RequestBody User loginRequest) {\r\n        try {\r\n            logger.debug(&quot;logging in user {},&quot;,loginRequest);\r\n            User user = userService.sigInUser(loginRequest);\r\n            AuthDto authDto = modelMapper.map(user, AuthDto.class);\r\n            return ResponseEntity.ok(authDto);\r\n        } catch (Exception e) {\r\n            return ResponseEntity.badRequest().body(e.getMessage());\r\n        }\r\n    }\r\n\r\n    @PostMapping(&quot;/signup&quot;)\r\n    public ResponseEntity&lt;?&gt; registerUser(@Validated(SignupRequest.class) @RequestBody User signUpRequest) {\r\n        try {\r\n            logger.debug(&quot;signing up user {},&quot;, signUpRequest);\r\n            User user = userService.registerUser(signUpRequest);\r\n            AuthDto authDto = modelMapper.map(user, AuthDto.class);\r\n            return ResponseEntity.ok(authDto);\r\n        } catch (Exception e) {\r\n            return ResponseEntity.badRequest().body(e.getMessage());\r\n        }\r\n    }\r\n}\r\n```\r\nModel:\r\n```\r\npackage com.vweinert.fedditbackend.entities;\r\n\r\nimport java.time.LocalDateTime;\r\nimport java.util.Set;\r\n\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Table;\r\nimport jakarta.persistence.JoinColumn;\r\nimport jakarta.persistence.OneToMany;\r\nimport jakarta.persistence.ManyToMany;\r\nimport jakarta.persistence.JoinTable;\r\nimport jakarta.persistence.Transient;\r\nimport jakarta.persistence.FetchType;\r\nimport jakarta.validation.constraints.Email;\r\nimport jakarta.validation.constraints.NotBlank;\r\nimport jakarta.validation.constraints.Size;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonInclude;\r\n\r\nimport org.hibernate.annotations.CreationTimestamp;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\nimport com.vweinert.fedditbackend.request.auth.LoginRequest;\r\nimport com.vweinert.fedditbackend.request.auth.SignupRequest;\r\n\r\n@Entity\r\n@Table(name=&quot;users&quot;)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    @Column(nullable=false,unique = true)\r\n    @NotBlank(groups = {SignupRequest.class}, message = &quot;email is blank&quot;)\r\n    @Email(groups = {SignupRequest.class}, message = &quot;invalid email&quot;)\r\n    private String email;\r\n    @Column(nullable=false,updatable = false,unique = true)\r\n    @NotBlank(groups = {LoginRequest.class, SignupRequest.class},message = &quot;username is blank&quot;)\r\n    @Size(min = 8, max = 32, groups = {LoginRequest.class, SignupRequest.class}, message = &quot;username must be between 8 and 32 characters&quot;)\r\n    private String username;\r\n    @Column(nullable=false)\r\n    @NotBlank(groups = {LoginRequest.class, SignupRequest.class},message = &quot;Missing password&quot;)\r\n    @Size(min = 8, max = 32, groups = {LoginRequest.class, SignupRequest.class}, message = &quot;password must be between 8 and 32 characters&quot;)\r\n    private String password;\r\n    @Column(columnDefinition = &quot;text&quot;)\r\n    private String about;\r\n    @Column(nullable=false,updatable = false)\r\n    @CreationTimestamp\r\n    private LocalDateTime createdAt;\r\n    private LocalDateTime passwordChangedAt;\r\n    private LocalDateTime aboutChangedAt;\r\n    @Column(nullable = false)\r\n    @Builder.Default\r\n    private Boolean deleted = false;\r\n    @ManyToMany(fetch = FetchType.LAZY)\r\n    @JoinTable(\tname = &quot;user_roles&quot;, \r\n\t\t\t\tjoinColumns = @JoinColumn(name = &quot;user_id&quot;), \r\n\t\t\t\tinverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;))\r\n    private Set&lt;Role&gt; roles;\r\n  \r\n    @OneToMany(mappedBy = &quot;user&quot;,fetch = FetchType.LAZY)\r\n    private Set&lt;Post&gt; posts;\r\n\r\n    @OneToMany(mappedBy = &quot;user&quot;,fetch = FetchType.LAZY)\r\n    private Set&lt;Comment&gt; comments;\r\n    @Transient\r\n    @JsonInclude()\r\n    private String jwt;\r\n    public User(String username, String email, String password){\r\n        this.username = username;\r\n        this.email = email;\r\n        this.password = password;\r\n    }\r\n}\r\n```\r\nSignup request interface for the @Validated groups\r\n```\r\npackage com.vweinert.fedditbackend.request.auth;\r\n\r\npublic interface SignupRequest {\r\n\r\n}\r\n```\r\nWeb Security Config:\r\n```\r\npackage com.vweinert.fedditbackend.security;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\r\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\r\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\n\r\nimport com.vweinert.fedditbackend.security.jwt.AuthEntryPointJwt;\r\nimport com.vweinert.fedditbackend.security.jwt.AuthTokenFilter;\r\nimport com.vweinert.fedditbackend.security.services.UserDetailsServiceImpl;\r\nimport com.vweinert.fedditbackend.security.jwt.JwtUtils;\r\n\r\n@Configuration\r\n@EnableGlobalMethodSecurity(\r\n    prePostEnabled = true)\r\npublic class WebSecurityConfig {\r\n  private final UserDetailsServiceImpl userDetailsService;\r\n  private final AuthEntryPointJwt unauthorizedHandler;\r\n  private final JwtUtils jwtUtils;\r\n  public WebSecurityConfig(JwtUtils jwtUtils, UserDetailsServiceImpl userDetailsService, AuthEntryPointJwt unauthorizedHandler) {\r\n    this.jwtUtils = jwtUtils;\r\n    this.userDetailsService = userDetailsService;\r\n    this.unauthorizedHandler = unauthorizedHandler;\r\n  }\r\n  @Bean\r\n  public AuthTokenFilter authenticationJwtTokenFilter() {\r\n    return new AuthTokenFilter(jwtUtils,userDetailsService);\r\n  }\r\n  \r\n  @Bean\r\n  public DaoAuthenticationProvider authenticationProvider() {\r\n      DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\r\n       \r\n      authProvider.setUserDetailsService(userDetailsService);\r\n      authProvider.setPasswordEncoder(passwordEncoder());\r\n   \r\n      return authProvider;\r\n  }\r\n  \r\n  @Bean\r\n  public AuthenticationManager authenticationManager(AuthenticationConfiguration authConfig) throws Exception {\r\n    return authConfig.getAuthenticationManager();\r\n  }\r\n\r\n  @Bean\r\n  public PasswordEncoder passwordEncoder() {\r\n    return new BCryptPasswordEncoder();\r\n  }\r\n  \r\n  @Bean\r\n  public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    http.cors().and().csrf().disable()\r\n        .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\r\n        .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n            .authorizeHttpRequests((requests) -&gt; requests\r\n                    .requestMatchers(&quot;/api/auth/**&quot;).permitAll()\r\n                    .requestMatchers(&quot;/api/home/**&quot;).permitAll()\r\n                    .anyRequest().authenticated()\r\n            );\r\n    http.authenticationProvider(authenticationProvider());\r\n    http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\r\n    return http.build();\r\n  }\r\n}\r\n```\r\nAuthentication entry Point:\r\n```\r\npackage com.vweinert.fedditbackend.security.jwt;\r\n\r\nimport java.io.IOException;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\nimport jakarta.servlet.ServletException;\r\nimport jakarta.servlet.http.HttpServletRequest;\r\nimport jakarta.servlet.http.HttpServletResponse;\r\n\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.security.core.AuthenticationException;\r\nimport org.springframework.security.web.AuthenticationEntryPoint;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n\r\n@Component\r\npublic class AuthEntryPointJwt implements AuthenticationEntryPoint {\r\n\r\n  private static final Logger logger = LoggerFactory.getLogger(AuthEntryPointJwt.class);\r\n\r\n  @Override\r\n  public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException)\r\n      throws IOException, ServletException {\r\n    logger.error(&quot;Unauthorized error: {}&quot;, authException.getMessage());\r\n\r\n    response.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n    response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\r\n\r\n    final Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\r\n    body.put(&quot;status&quot;, HttpServletResponse.SC_UNAUTHORIZED);\r\n    body.put(&quot;error&quot;, &quot;Unauthorized&quot;);\r\n    body.put(&quot;message&quot;, authException.getMessage());\r\n    body.put(&quot;path&quot;, request.getServletPath());\r\n\r\n    final ObjectMapper mapper = new ObjectMapper();\r\n    mapper.writeValue(response.getOutputStream(), body);\r\n  }\r\n\r\n}\r\n```\r\n\r\nCurrently I am getting an AuthenticationException going through my commence method that implements the AuthenticationEntryPoint class.  I would like to have custom exceptions that simply return the message attached to my @Email annotation, though I&#39;m really not sure how to do this.\r\n\r\nWhen I do a postman call with this (with no authorization and an intentionally invalid email):\r\n```\r\n{\r\n\t&quot;email&quot;:&quot;emailssss&quot;,\r\n\t&quot;username&quot;:&quot;emailsssssssss&quot;,\r\n\t&quot;password&quot;:&quot;emailly123theemail&quot;\r\n}\r\n```\r\nI get:\r\n```\r\n{\r\n    &quot;path&quot;: &quot;/error&quot;,\r\n    &quot;error&quot;: &quot;Unauthorized&quot;,\r\n    &quot;message&quot;: &quot;Full authentication is required to access this resource&quot;,\r\n    &quot;status&quot;: 401\r\n}\r\n```\r\nand in the console I get:\r\n```\r\n2023-01-04T14:37:25.768-06:00  WARN 36022 --- [nio-8080-exec-1] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity&lt;?&gt; com.vweinert.fedditbackend.controllers.AuthController.registerUser(com.vweinert.fedditbackend.entities.User): [Field error in object &#39;user&#39; on field &#39;email&#39;: rejected value [emailssss]; codes [Email.user.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@49be6e2e,.*]; default message [invalid email]] ]\r\n2023-01-04T14:37:25.774-06:00 ERROR 36022 --- [nio-8080-exec-1] c.v.f.security.jwt.AuthEntryPointJwt     : Unauthorized error: Full authentication is required to access this resource\r\n```\r\nI would like to get something like:\r\n```\r\n{\r\n    &quot;message&quot;: &quot;invalid email&quot;\r\n}\r\n```\r\n","title":"Spring @Validated is appears to be giving AuthenticationException","body":"<p>I'm trying to make a blog w/ spring boot. I am using @Validated and groupings for certain requests.  For Example hitting my signup route, I validate the email using @NotBlank and @Email on my User model</p>\n<p>Controller:</p>\n<pre><code>package com.vweinert.fedditbackend.controllers;\n\nimport com.vweinert.fedditbackend.security.jwt.AuthEntryPointJwt;\nimport org.modelmapper.ModelMapper;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.validation.annotation.Validated;\nimport org.springframework.web.bind.annotation.CrossOrigin;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.vweinert.fedditbackend.entities.User;\nimport com.vweinert.fedditbackend.request.auth.LoginRequest;\nimport com.vweinert.fedditbackend.request.auth.SignupRequest;\nimport com.vweinert.fedditbackend.dto.AuthDto;\nimport com.vweinert.fedditbackend.service.inter.UserService;\n@CrossOrigin(origins = &quot;*&quot;, maxAge = 3600)\n@RestController\n@RequestMapping(&quot;/api/auth&quot;)\npublic class AuthController {\n    private final UserService userService;\n    private final ModelMapper modelMapper;\n    private static final Logger logger = LoggerFactory.getLogger(AuthController.class);\n    public AuthController(UserService userService, ModelMapper modelMapper) {\n        this.userService = userService;\n        this.modelMapper = modelMapper;\n        logger.debug(&quot;Auth controller initialized&quot;);\n    }\n\n    @PostMapping(&quot;/signin&quot;)\n    public ResponseEntity&lt;?&gt; loginUser(@Validated(LoginRequest.class) @RequestBody User loginRequest) {\n        try {\n            logger.debug(&quot;logging in user {},&quot;,loginRequest);\n            User user = userService.sigInUser(loginRequest);\n            AuthDto authDto = modelMapper.map(user, AuthDto.class);\n            return ResponseEntity.ok(authDto);\n        } catch (Exception e) {\n            return ResponseEntity.badRequest().body(e.getMessage());\n        }\n    }\n\n    @PostMapping(&quot;/signup&quot;)\n    public ResponseEntity&lt;?&gt; registerUser(@Validated(SignupRequest.class) @RequestBody User signUpRequest) {\n        try {\n            logger.debug(&quot;signing up user {},&quot;, signUpRequest);\n            User user = userService.registerUser(signUpRequest);\n            AuthDto authDto = modelMapper.map(user, AuthDto.class);\n            return ResponseEntity.ok(authDto);\n        } catch (Exception e) {\n            return ResponseEntity.badRequest().body(e.getMessage());\n        }\n    }\n}\n</code></pre>\n<p>Model:</p>\n<pre><code>package com.vweinert.fedditbackend.entities;\n\nimport java.time.LocalDateTime;\nimport java.util.Set;\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\nimport jakarta.persistence.JoinColumn;\nimport jakarta.persistence.OneToMany;\nimport jakarta.persistence.ManyToMany;\nimport jakarta.persistence.JoinTable;\nimport jakarta.persistence.Transient;\nimport jakarta.persistence.FetchType;\nimport jakarta.validation.constraints.Email;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.Size;\n\nimport com.fasterxml.jackson.annotation.JsonInclude;\n\nimport org.hibernate.annotations.CreationTimestamp;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport com.vweinert.fedditbackend.request.auth.LoginRequest;\nimport com.vweinert.fedditbackend.request.auth.SignupRequest;\n\n@Entity\n@Table(name=&quot;users&quot;)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    @Column(nullable=false,unique = true)\n    @NotBlank(groups = {SignupRequest.class}, message = &quot;email is blank&quot;)\n    @Email(groups = {SignupRequest.class}, message = &quot;invalid email&quot;)\n    private String email;\n    @Column(nullable=false,updatable = false,unique = true)\n    @NotBlank(groups = {LoginRequest.class, SignupRequest.class},message = &quot;username is blank&quot;)\n    @Size(min = 8, max = 32, groups = {LoginRequest.class, SignupRequest.class}, message = &quot;username must be between 8 and 32 characters&quot;)\n    private String username;\n    @Column(nullable=false)\n    @NotBlank(groups = {LoginRequest.class, SignupRequest.class},message = &quot;Missing password&quot;)\n    @Size(min = 8, max = 32, groups = {LoginRequest.class, SignupRequest.class}, message = &quot;password must be between 8 and 32 characters&quot;)\n    private String password;\n    @Column(columnDefinition = &quot;text&quot;)\n    private String about;\n    @Column(nullable=false,updatable = false)\n    @CreationTimestamp\n    private LocalDateTime createdAt;\n    private LocalDateTime passwordChangedAt;\n    private LocalDateTime aboutChangedAt;\n    @Column(nullable = false)\n    @Builder.Default\n    private Boolean deleted = false;\n    @ManyToMany(fetch = FetchType.LAZY)\n    @JoinTable( name = &quot;user_roles&quot;, \n                joinColumns = @JoinColumn(name = &quot;user_id&quot;), \n                inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;))\n    private Set&lt;Role&gt; roles;\n  \n    @OneToMany(mappedBy = &quot;user&quot;,fetch = FetchType.LAZY)\n    private Set&lt;Post&gt; posts;\n\n    @OneToMany(mappedBy = &quot;user&quot;,fetch = FetchType.LAZY)\n    private Set&lt;Comment&gt; comments;\n    @Transient\n    @JsonInclude()\n    private String jwt;\n    public User(String username, String email, String password){\n        this.username = username;\n        this.email = email;\n        this.password = password;\n    }\n}\n</code></pre>\n<p>Signup request interface for the @Validated groups</p>\n<pre><code>package com.vweinert.fedditbackend.request.auth;\n\npublic interface SignupRequest {\n\n}\n</code></pre>\n<p>Web Security Config:</p>\n<pre><code>package com.vweinert.fedditbackend.security;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\n\nimport com.vweinert.fedditbackend.security.jwt.AuthEntryPointJwt;\nimport com.vweinert.fedditbackend.security.jwt.AuthTokenFilter;\nimport com.vweinert.fedditbackend.security.services.UserDetailsServiceImpl;\nimport com.vweinert.fedditbackend.security.jwt.JwtUtils;\n\n@Configuration\n@EnableGlobalMethodSecurity(\n    prePostEnabled = true)\npublic class WebSecurityConfig {\n  private final UserDetailsServiceImpl userDetailsService;\n  private final AuthEntryPointJwt unauthorizedHandler;\n  private final JwtUtils jwtUtils;\n  public WebSecurityConfig(JwtUtils jwtUtils, UserDetailsServiceImpl userDetailsService, AuthEntryPointJwt unauthorizedHandler) {\n    this.jwtUtils = jwtUtils;\n    this.userDetailsService = userDetailsService;\n    this.unauthorizedHandler = unauthorizedHandler;\n  }\n  @Bean\n  public AuthTokenFilter authenticationJwtTokenFilter() {\n    return new AuthTokenFilter(jwtUtils,userDetailsService);\n  }\n  \n  @Bean\n  public DaoAuthenticationProvider authenticationProvider() {\n      DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\n       \n      authProvider.setUserDetailsService(userDetailsService);\n      authProvider.setPasswordEncoder(passwordEncoder());\n   \n      return authProvider;\n  }\n  \n  @Bean\n  public AuthenticationManager authenticationManager(AuthenticationConfiguration authConfig) throws Exception {\n    return authConfig.getAuthenticationManager();\n  }\n\n  @Bean\n  public PasswordEncoder passwordEncoder() {\n    return new BCryptPasswordEncoder();\n  }\n  \n  @Bean\n  public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http.cors().and().csrf().disable()\n        .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\n        .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n            .authorizeHttpRequests((requests) -&gt; requests\n                    .requestMatchers(&quot;/api/auth/**&quot;).permitAll()\n                    .requestMatchers(&quot;/api/home/**&quot;).permitAll()\n                    .anyRequest().authenticated()\n            );\n    http.authenticationProvider(authenticationProvider());\n    http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\n    return http.build();\n  }\n}\n</code></pre>\n<p>Authentication entry Point:</p>\n<pre><code>package com.vweinert.fedditbackend.security.jwt;\n\nimport java.io.IOException;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport jakarta.servlet.ServletException;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport org.springframework.http.MediaType;\nimport org.springframework.security.core.AuthenticationException;\nimport org.springframework.security.web.AuthenticationEntryPoint;\nimport org.springframework.stereotype.Component;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\n@Component\npublic class AuthEntryPointJwt implements AuthenticationEntryPoint {\n\n  private static final Logger logger = LoggerFactory.getLogger(AuthEntryPointJwt.class);\n\n  @Override\n  public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException)\n      throws IOException, ServletException {\n    logger.error(&quot;Unauthorized error: {}&quot;, authException.getMessage());\n\n    response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n    response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\n\n    final Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\n    body.put(&quot;status&quot;, HttpServletResponse.SC_UNAUTHORIZED);\n    body.put(&quot;error&quot;, &quot;Unauthorized&quot;);\n    body.put(&quot;message&quot;, authException.getMessage());\n    body.put(&quot;path&quot;, request.getServletPath());\n\n    final ObjectMapper mapper = new ObjectMapper();\n    mapper.writeValue(response.getOutputStream(), body);\n  }\n\n}\n</code></pre>\n<p>Currently I am getting an AuthenticationException going through my commence method that implements the AuthenticationEntryPoint class.  I would like to have custom exceptions that simply return the message attached to my @Email annotation, though I'm really not sure how to do this.</p>\n<p>When I do a postman call with this (with no authorization and an intentionally invalid email):</p>\n<pre><code>{\n    &quot;email&quot;:&quot;emailssss&quot;,\n    &quot;username&quot;:&quot;emailsssssssss&quot;,\n    &quot;password&quot;:&quot;emailly123theemail&quot;\n}\n</code></pre>\n<p>I get:</p>\n<pre><code>{\n    &quot;path&quot;: &quot;/error&quot;,\n    &quot;error&quot;: &quot;Unauthorized&quot;,\n    &quot;message&quot;: &quot;Full authentication is required to access this resource&quot;,\n    &quot;status&quot;: 401\n}\n</code></pre>\n<p>and in the console I get:</p>\n<pre><code>2023-01-04T14:37:25.768-06:00  WARN 36022 --- [nio-8080-exec-1] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity&lt;?&gt; com.vweinert.fedditbackend.controllers.AuthController.registerUser(com.vweinert.fedditbackend.entities.User): [Field error in object 'user' on field 'email': rejected value [emailssss]; codes [Email.user.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@49be6e2e,.*]; default message [invalid email]] ]\n2023-01-04T14:37:25.774-06:00 ERROR 36022 --- [nio-8080-exec-1] c.v.f.security.jwt.AuthEntryPointJwt     : Unauthorized error: Full authentication is required to access this resource\n</code></pre>\n<p>I would like to get something like:</p>\n<pre><code>{\n    &quot;message&quot;: &quot;invalid email&quot;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":15841746,"reputation":6011,"user_id":11430047,"display_name":"Eleftheria Stein-Kousathana"},"score":0,"creation_date":1672930269,"post_id":75019714,"comment_id":132387608,"body_markdown":"I assume the `WebSecurityConfig` class used to extend the `WebSecurityConfigurerAdapter`. When you no longer extend the class then there is no method to override. Check out the &quot;In-Memory Authentication&quot; section in [this post](https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter) that describes how to migrate away from the `WebSecurityConfigurerAdapter`.","body":"I assume the <code>WebSecurityConfig</code> class used to extend the <code>WebSecurityConfigurerAdapter</code>. When you no longer extend the class then there is no method to override. Check out the &quot;In-Memory Authentication&quot; section in <a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">this post</a> that describes how to migrate away from the <code>WebSecurityConfigurerAdapter</code>."}],"owner":{"account_id":8776074,"reputation":8345,"user_id":6561309,"accept_rate":42,"display_name":"Richard"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672932752,"creation_date":1672927736,"question_id":75019714,"body_markdown":"I am using Spring Boot 3.0.1, and am trying to configure web access.\r\n\r\nI have the following:\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class WebSecurityConfig {\r\n    \r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n                    .authorizeHttpRequests().requestMatchers(&quot;/soapWS/**&quot;).permitAll().and()\r\n                    .authorizeHttpRequests().requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;).permitAll().and()\r\n                    .authorizeHttpRequests().requestMatchers(&quot;/actuator/**&quot;).permitAll().and()\r\n                    .authorizeHttpRequests().requestMatchers(&quot;/powwow/spreadsheet/**&quot;).permitAll().and()\r\n                    .authorizeHttpRequests().requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;).permitAll()\r\n                    .anyRequest().authenticated().and()\r\n                    .cors().and()\r\n                    .httpBasic().and()\r\n                    .csrf().disable();\r\n            return http.build();\r\n        }\r\n\r\n        @Bean\r\n        protected AuthenticationManager configure(AuthenticationManagerBuilder auth) throws Exception {\r\n            return\r\n                    auth.authenticationProvider(customWebAuthenticationProvider)\r\n                    .inMemoryAuthentication()\r\n                    .passwordEncoder(passwordEncoder())\r\n                    .withUser(WEB_ACCESS_USERNAME).password(passwordEncoder().encode(WEB_ACCESS_PASSWORD)).roles(&quot;USER&quot;)\r\n                            .and().and().getObject();\r\n        }\r\n    \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    \r\n    }\r\n\r\n**Error**\r\n\r\n\r\n&gt; Error creating bean with name &#39;configure&#39; defined in class path\r\n&gt; resource [com/xxxx/powwow/config/WebSecurityConfig.class]: Failed to\r\n&gt; instantiate\r\n&gt; [org.springframework.security.authentication.AuthenticationManager]:\r\n&gt; Factory method &#39;configure&#39; threw exception with message: Cannot apply\r\n&gt; org.springframework.security.config.annotation.authentication.configurers.provisioning.InMemoryUserDetailsManagerConfigurer@57b7287c\r\n&gt; to already built object\r\n\r\nI was previously using Spring Boot 2.5.1, and the following method was working perfectly. However, with the new version, it requires a return type.\r\n\r\n    @Override\r\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n        auth.authenticationProvider(customWebAuthenticationProvider);\r\n        auth.inMemoryAuthentication()\r\n                .passwordEncoder(passwordEncoder())\r\n                .withUser(WEB_ACCESS_USERNAME).password(passwordEncoder().encode(WEB_ACCESS_PASSWORD)).roles(&quot;USER&quot;);\r\n    }\r\n\r\nAny help appreciated.\r\n\r\n**UPDATE**\r\n\r\nThanks to the comments below, I have updated it to the following which compiles an runs with no errors now, however all requests return a `401` error:\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n                .authorizeHttpRequests().requestMatchers(&quot;/soapWS/**&quot;).permitAll().and()\r\n                .authorizeHttpRequests().requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;).permitAll().and()\r\n                .authorizeHttpRequests().requestMatchers(&quot;/actuator/**&quot;).permitAll().and()\r\n                .authorizeHttpRequests().requestMatchers(&quot;/powwow/spreadsheet/**&quot;).permitAll()\r\n                .anyRequest().authenticated().and()\r\n                .cors().and()\r\n                .httpBasic().and()\r\n                .csrf().disable();\r\n        return http.build();\r\n    }\r\n    \r\n    @Bean\r\n    public InMemoryUserDetailsManager userDetailsService() {\r\n        UserDetails user = User\r\n                .withUsername(WEB_ACCESS_USERNAME)\r\n                .password(passwordEncoder().encode(WEB_ACCESS_PASSWORD))\r\n                .roles(&quot;USER&quot;)\r\n                .build();\r\n        return new InMemoryUserDetailsManager(user);\r\n    }\r\n\r\n    @Bean\r\n    public WebSecurityCustomizer webSecurityCustomizer() {\r\n        return (web) -&gt; {\r\n            web.ignoring().requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;);\r\n        };\r\n    }\r\n\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\ne.g. If I try to access Swagger via the following, it always gets a `401`, even through I do have &#39;Basic Auth&#39; set in in Postman to correct credentials (this worked before the upgrade):\r\n\r\n    http://localhost:8085/swagger-ui/index.html#/\r\n\r\nor a REST endpoint via:\r\n\r\n    http://localhost:8085/powwow/test-me","title":"Spring Boot configure WebSecurityConfig error","body":"<p>I am using Spring Boot 3.0.1, and am trying to configure web access.</p>\n<p>I have the following:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n                .authorizeHttpRequests().requestMatchers(&quot;/soapWS/**&quot;).permitAll().and()\n                .authorizeHttpRequests().requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;).permitAll().and()\n                .authorizeHttpRequests().requestMatchers(&quot;/actuator/**&quot;).permitAll().and()\n                .authorizeHttpRequests().requestMatchers(&quot;/powwow/spreadsheet/**&quot;).permitAll().and()\n                .authorizeHttpRequests().requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;).permitAll()\n                .anyRequest().authenticated().and()\n                .cors().and()\n                .httpBasic().and()\n                .csrf().disable();\n        return http.build();\n    }\n\n    @Bean\n    protected AuthenticationManager configure(AuthenticationManagerBuilder auth) throws Exception {\n        return\n                auth.authenticationProvider(customWebAuthenticationProvider)\n                .inMemoryAuthentication()\n                .passwordEncoder(passwordEncoder())\n                .withUser(WEB_ACCESS_USERNAME).password(passwordEncoder().encode(WEB_ACCESS_PASSWORD)).roles(&quot;USER&quot;)\n                        .and().and().getObject();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n}\n</code></pre>\n<p><strong>Error</strong></p>\n<blockquote>\n<p>Error creating bean with name 'configure' defined in class path\nresource [com/xxxx/powwow/config/WebSecurityConfig.class]: Failed to\ninstantiate\n[org.springframework.security.authentication.AuthenticationManager]:\nFactory method 'configure' threw exception with message: Cannot apply\norg.springframework.security.config.annotation.authentication.configurers.provisioning.InMemoryUserDetailsManagerConfigurer@57b7287c\nto already built object</p>\n</blockquote>\n<p>I was previously using Spring Boot 2.5.1, and the following method was working perfectly. However, with the new version, it requires a return type.</p>\n<pre><code>@Override\nprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\n    auth.authenticationProvider(customWebAuthenticationProvider);\n    auth.inMemoryAuthentication()\n            .passwordEncoder(passwordEncoder())\n            .withUser(WEB_ACCESS_USERNAME).password(passwordEncoder().encode(WEB_ACCESS_PASSWORD)).roles(&quot;USER&quot;);\n}\n</code></pre>\n<p>Any help appreciated.</p>\n<p><strong>UPDATE</strong></p>\n<p>Thanks to the comments below, I have updated it to the following which compiles an runs with no errors now, however all requests return a <code>401</code> error:</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n            .authorizeHttpRequests().requestMatchers(&quot;/soapWS/**&quot;).permitAll().and()\n            .authorizeHttpRequests().requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;).permitAll().and()\n            .authorizeHttpRequests().requestMatchers(&quot;/actuator/**&quot;).permitAll().and()\n            .authorizeHttpRequests().requestMatchers(&quot;/powwow/spreadsheet/**&quot;).permitAll()\n            .anyRequest().authenticated().and()\n            .cors().and()\n            .httpBasic().and()\n            .csrf().disable();\n    return http.build();\n}\n\n@Bean\npublic InMemoryUserDetailsManager userDetailsService() {\n    UserDetails user = User\n            .withUsername(WEB_ACCESS_USERNAME)\n            .password(passwordEncoder().encode(WEB_ACCESS_PASSWORD))\n            .roles(&quot;USER&quot;)\n            .build();\n    return new InMemoryUserDetailsManager(user);\n}\n\n@Bean\npublic WebSecurityCustomizer webSecurityCustomizer() {\n    return (web) -&gt; {\n        web.ignoring().requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;);\n    };\n}\n\n\n@Bean\npublic PasswordEncoder passwordEncoder() {\n    return new BCryptPasswordEncoder();\n}\n</code></pre>\n<p>e.g. If I try to access Swagger via the following, it always gets a <code>401</code>, even through I do have 'Basic Auth' set in in Postman to correct credentials (this worked before the upgrade):</p>\n<pre><code>http://localhost:8085/swagger-ui/index.html#/\n</code></pre>\n<p>or a REST endpoint via:</p>\n<pre><code>http://localhost:8085/powwow/test-me\n</code></pre>\n"},{"tags":["java","aws-cdk"],"comments":[{"owner":{"account_id":12231203,"reputation":400,"user_id":8927135,"display_name":"y. bs"},"score":0,"creation_date":1675093185,"post_id":75020807,"comment_id":132848976,"body_markdown":"you should `Implements` the StackProps not extends it","body":"you should <code>Implements</code> the StackProps not extends it"},{"owner":{"account_id":2050693,"reputation":361,"user_id":1829787,"accept_rate":53,"display_name":"Trevor"},"score":0,"creation_date":1677599107,"post_id":75020807,"comment_id":133367692,"body_markdown":"Thank you. Total mistake on my part using extends vs implements.","body":"Thank you. Total mistake on my part using extends vs implements."}],"owner":{"account_id":2050693,"reputation":361,"user_id":1829787,"accept_rate":53,"display_name":"Trevor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":299,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672932642,"creation_date":1672932642,"question_id":75020807,"body_markdown":"I was trying to implement something similar to [this](https://docs.aws.amazon.com/cdk/api/v2/java/index.html?software/amazon/awscdk/StackProps.html) example. \r\n\r\n```java\r\n public class StackUnderTestProps extends StackProps {\r\n     private Architecture architecture;\r\n     public Architecture getArchitecture() {\r\n         return this.architecture;\r\n     }\r\n     public StackUnderTestProps architecture(Architecture architecture) {\r\n         this.architecture = architecture;\r\n         return this;\r\n     }\r\n }\r\n```\r\n\r\nI get an error with the extends because StackProps is an interface not a class. I am unable to find any examples extending StackProps using Java. Not quite sure how to do it considering that StackProps proxy is a final class. Thoughts?","title":"How do I extend StackProps in cdk using Java?","body":"<p>I was trying to implement something similar to <a href=\"https://docs.aws.amazon.com/cdk/api/v2/java/index.html?software/amazon/awscdk/StackProps.html\" rel=\"nofollow noreferrer\">this</a> example.</p>\n<pre class=\"lang-java prettyprint-override\"><code> public class StackUnderTestProps extends StackProps {\n     private Architecture architecture;\n     public Architecture getArchitecture() {\n         return this.architecture;\n     }\n     public StackUnderTestProps architecture(Architecture architecture) {\n         this.architecture = architecture;\n         return this;\n     }\n }\n</code></pre>\n<p>I get an error with the extends because StackProps is an interface not a class. I am unable to find any examples extending StackProps using Java. Not quite sure how to do it considering that StackProps proxy is a final class. Thoughts?</p>\n"},{"tags":["java","asynchronous","vaadin","vaadin-flow","vaadin14"],"owner":{"account_id":19662820,"reputation":169,"user_id":14393923,"display_name":"Miłosz Bąbliński"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672932558,"creation_date":1672932558,"question_id":75020789,"body_markdown":"i want to make update in my component after getting event which can be executed during refreshing the page so component can be detached. So the problem is that when i&#39;m using \r\n\r\n    comp.getUI().get().access(() -&gt; makeAction());\r\nmy component can by detached because of reloading the page with PreserveOnRefresh annotation so it throw a error that UI is detached. But after reloading ends then component will be attached again and i would like to get result of the view which should be after firing makeAction function. So my question is what is the best way to make async updates which can by fired during when component is detached but will be attached again.\r\n\r\nI made something like that:\r\n\r\n    public static void doCommandWhenCompUIAccessIsAvailable(Component c, final Command command){\r\n    \tif(c.getUI().isPresent() &amp;&amp; c.isAttached()){\r\n    \t\tc.getUI().get().access(command);\r\n    \t}else{\r\n    \t\tc.addAttachListener(evt -&gt; {\r\n    \t\t\tevt.getUI().access(command);\r\n    \t\t\tevt.unregisterListener();\r\n    \t\t});\r\n    \t}\r\n    }\r\n\r\n but i&#39;m getting error because of attach listener functionality like the one from [this thread][1].  \r\nI&#39;m using Vaadin 14.8.14.\r\n\r\n  [1]: https://stackoverflow.com/questions/75019718/vaadin-flow-14-cant-move-a-node-from-one-state-tree-to-another-error-when-refre/75020305#75020305","title":"Vaadin 14 async update to component send during refresh","body":"<p>i want to make update in my component after getting event which can be executed during refreshing the page so component can be detached. So the problem is that when i'm using</p>\n<pre><code>comp.getUI().get().access(() -&gt; makeAction());\n</code></pre>\n<p>my component can by detached because of reloading the page with PreserveOnRefresh annotation so it throw a error that UI is detached. But after reloading ends then component will be attached again and i would like to get result of the view which should be after firing makeAction function. So my question is what is the best way to make async updates which can by fired during when component is detached but will be attached again.</p>\n<p>I made something like that:</p>\n<pre><code>public static void doCommandWhenCompUIAccessIsAvailable(Component c, final Command command){\n    if(c.getUI().isPresent() &amp;&amp; c.isAttached()){\n        c.getUI().get().access(command);\n    }else{\n        c.addAttachListener(evt -&gt; {\n            evt.getUI().access(command);\n            evt.unregisterListener();\n        });\n    }\n}\n</code></pre>\n<p>but i'm getting error because of attach listener functionality like the one from <a href=\"https://stackoverflow.com/questions/75019718/vaadin-flow-14-cant-move-a-node-from-one-state-tree-to-another-error-when-refre/75020305#75020305\">this thread</a>.<br />\nI'm using Vaadin 14.8.14.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":13919742,"reputation":964,"user_id":10342150,"display_name":"robertobatts"},"score":0,"creation_date":1672931235,"post_id":75020008,"comment_id":132388026,"body_markdown":"Is it working correctly on &quot;/hello&quot;?","body":"Is it working correctly on &quot;/hello&quot;?"},{"owner":{"account_id":27443078,"reputation":41,"user_id":20937437,"display_name":"Seungje Mun"},"score":0,"creation_date":1672932082,"post_id":75020008,"comment_id":132388386,"body_markdown":"yes it&#39;s working on /hello url..","body":"yes it&#39;s working on /hello url.."}],"answers":[{"tags":[],"owner":{"account_id":27443078,"reputation":41,"user_id":20937437,"display_name":"Seungje Mun"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1672932391,"creation_date":1672932391,"answer_id":75020751,"question_id":75020008,"body_markdown":"I found a answer.\r\nThere was no mapped paged with &quot;/&quot;.\r\nAfter I map the &quot;/&quot; page, it work.\r\nI thought that it should be shown White page, but it seems like if start page is white page, then it print log in page even though there is permitted by permitAll.\r\n\r\n    @RestController\r\n    public class HelloController {\r\n        @GetMapping(&quot;/hello&quot;)\r\n        public String hello(){\r\n            return &quot;hello&quot;;\r\n        }\r\n    \r\n        @GetMapping(&quot;/hello2&quot;)\r\n        public String hello2(){\r\n            return &quot;hello2&quot;;\r\n        }\r\n    //\r\n    //    @GetMapping(&quot;/&quot;)\r\n    //    public String start(){\r\n    //        return &quot;startpage&quot;;\r\n    //    }\r\n    }","title":"permitAll of requestMatchers doesn&#39;t work on &quot;/&quot; pattern","body":"<p>I found a answer.\nThere was no mapped paged with &quot;/&quot;.\nAfter I map the &quot;/&quot; page, it work.\nI thought that it should be shown White page, but it seems like if start page is white page, then it print log in page even though there is permitted by permitAll.</p>\n<pre><code>@RestController\npublic class HelloController {\n    @GetMapping(&quot;/hello&quot;)\n    public String hello(){\n        return &quot;hello&quot;;\n    }\n\n    @GetMapping(&quot;/hello2&quot;)\n    public String hello2(){\n        return &quot;hello2&quot;;\n    }\n//\n//    @GetMapping(&quot;/&quot;)\n//    public String start(){\n//        return &quot;startpage&quot;;\n//    }\n}\n</code></pre>\n"}],"owner":{"account_id":27443078,"reputation":41,"user_id":20937437,"display_name":"Seungje Mun"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":823,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1672932391,"creation_date":1672929086,"question_id":75020008,"body_markdown":"I&#39;m making website and I have to use SecurityFilterChain.\r\nBTW, the start page - localhost:8080/ is always secured.\r\nWhen I enter localhost:8080/, browser always want me to sign in.\r\nHow can I adjust permitAll on &quot;/&quot; pattern?\r\n\r\n```\r\npublic class SecurityConfig {\r\n\r\n    @Bean\r\n    public SecurityFilterChain web(HttpSecurity http) throws Exception {\r\n        return http\r\n                .authorizeHttpRequests(auth -&gt; {\r\n                    auth.requestMatchers(&quot;/&quot;, &quot;/hello&quot;).permitAll();\r\n                    auth.anyRequest().authenticated();\r\n                })\r\n                .formLogin(Customizer.withDefaults())\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nWhen I entered localhost:8080/, I expect to see the page, not sign in page.","title":"permitAll of requestMatchers doesn&#39;t work on &quot;/&quot; pattern","body":"<p>I'm making website and I have to use SecurityFilterChain.\nBTW, the start page - localhost:8080/ is always secured.\nWhen I enter localhost:8080/, browser always want me to sign in.\nHow can I adjust permitAll on &quot;/&quot; pattern?</p>\n<pre><code>public class SecurityConfig {\n\n    @Bean\n    public SecurityFilterChain web(HttpSecurity http) throws Exception {\n        return http\n                .authorizeHttpRequests(auth -&gt; {\n                    auth.requestMatchers(&quot;/&quot;, &quot;/hello&quot;).permitAll();\n                    auth.anyRequest().authenticated();\n                })\n                .formLogin(Customizer.withDefaults())\n                .build();\n    }\n}\n</code></pre>\n<p>When I entered localhost:8080/, I expect to see the page, not sign in page.</p>\n"},{"tags":["java","ignite","apacheignite"],"comments":[{"owner":{"account_id":15624718,"reputation":2360,"user_id":11272685,"display_name":"Alexandr Shapkin"},"score":0,"creation_date":1673120346,"post_id":75020685,"comment_id":132428461,"body_markdown":"Is it repetitive? I don&#39;t think there is a chance to debug this without having a complete thread dump and full logs. Are there any errors in the logs? I think you mentioned an NPE in another discussion. Could be a known issue.","body":"Is it repetitive? I don&#39;t think there is a chance to debug this without having a complete thread dump and full logs. Are there any errors in the logs? I think you mentioned an NPE in another discussion. Could be a known issue."},{"owner":{"account_id":470642,"reputation":8064,"user_id":877942,"accept_rate":79,"display_name":"Shades88"},"score":0,"creation_date":1673257158,"post_id":75020685,"comment_id":132449320,"body_markdown":"This error repeated for many hours and then died down on its own. But this occurs on every cluster restart. So this is worrisome","body":"This error repeated for many hours and then died down on its own. But this occurs on every cluster restart. So this is worrisome"},{"owner":{"account_id":11418892,"reputation":419,"user_id":8371000,"display_name":"sk0x50"},"score":0,"creation_date":1673599738,"post_id":75020685,"comment_id":132539894,"body_markdown":"@Shades88 Could you please upload the full thread dump somewhere (for example, GitHub) and provide a link to it? I&#39;ll try to analyze it to understand the root cause.","body":"@Shades88 Could you please upload the full thread dump somewhere (for example, GitHub) and provide a link to it? I&#39;ll try to analyze it to understand the root cause."}],"owner":{"account_id":470642,"reputation":8064,"user_id":877942,"accept_rate":79,"display_name":"Shades88"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":291,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672932068,"creation_date":1672932068,"question_id":75020685,"body_markdown":"I have a 2 node Ignite cluster on dev environment. Version 2.9.0\r\nI have enabled persistence in my data region configs. When I start cluster it runs fine. Now when I shutdown node one by one and restart them, to check if persistence is working alright, I see below errors in one of the nodes.\r\n\r\n    SEVERE: Blocked system-critical thread has been detected. This can lead to cluster-wide undefined behaviour [workerName=ttl-cleanup-worker, threadName=ttl-cleanup-worker-#44%Gemini.dev%, blockedFor=3079s]\r\n\r\n    [15:04:59] Possible failure suppressed accordingly to a configured handler [hnd=StopNodeOrHaltFailureHandler [tryStop=false, timeout=0, super=AbstractFailureHandler [ignoredFailureTypes=UnmodifiableSet [SYSTEM_WORKER_BLOCKED, SYSTEM_CRITICAL_OPERATION_TIMEOUT]]], failureCtx=FailureContext [type=SYSTEM_WORKER_BLOCKED, err=class o.a.i.IgniteException: GridWorker [name=ttl-cleanup-worker, igniteInstanceName=Gemini.dev, finished=false, heartbeatTs=1672928019372]]]\r\n\r\n    Jan 05, 2023 3:05:08 PM org.apache.ignite.logger.java.JavaLogger error\r\n    SEVERE: Blocked system-critical thread has been detected. This can lead to cluster-wide undefined behaviour [workerName=sys-stripe-0, threadName=sys-stripe-0-#1%Gemini.dev%, blockedFor=2490s]\r\n\r\n    [15:05:08] Possible failure suppressed accordingly to a configured handler [hnd=StopNodeOrHaltFailureHandler [tryStop=false, timeout=0, super=AbstractFailureHandler [ignoredFailureTypes=UnmodifiableSet [SYSTEM_WORKER_BLOCKED, SYSTEM_CRITICAL_OPERATION_TIMEOUT]]], failureCtx=FailureContext [type=SYSTEM_WORKER_BLOCKED, err=class o.a.i.IgniteException: GridWorker [name=sys-stripe-0, igniteInstanceName=Gemini.dev, finished=false, heartbeatTs=1672928617333]]]\r\n\r\n    Jan 05, 2023 3:05:08 PM org.apache.ignite.logger.java.JavaLogger error\r\n    SEVERE: Blocked system-critical thread has been detected. This can lead to cluster-wide undefined behaviour [workerName=sys-stripe-6, threadName=sys-stripe-6-#7%Gemini.dev%, blockedFor=2506s]\r\n\r\n    [15:05:08] Possible failure suppressed accordingly to a configured handler [hnd=StopNodeOrHaltFailureHandler [tryStop=false, timeout=0, super=AbstractFailureHandler [ignoredFailureTypes=UnmodifiableSet [SYSTEM_WORKER_BLOCKED, SYSTEM_CRITICAL_OPERATION_TIMEOUT]]], failureCtx=FailureContext [type=SYSTEM_WORKER_BLOCKED, err=class o.a.i.IgniteException: GridWorker [name=sys-stripe-6, igniteInstanceName=Gemini.dev, finished=false, heartbeatTs=1672928602019]]]\r\n\r\n    Jan 05, 2023 3:05:17 PM org.apache.ignite.logger.java.JavaLogger error\r\n    SEVERE: Blocked system-critical thread has been detected. This can lead to cluster-wide undefined behaviour [workerName=db-checkpoint-thread, threadName=db-checkpoint-thread-#105%Gemini.dev%, blockedFor=3098s]\r\n\r\n    [15:05:17] Possible failure suppressed accordingly to a configured handler [hnd=StopNodeOrHaltFailureHandler [tryStop=false, timeout=0, super=AbstractFailureHandler [ignoredFailureTypes=UnmodifiableSet [SYSTEM_WORKER_BLOCKED, SYSTEM_CRITICAL_OPERATION_TIMEOUT]]], failureCtx=FailureContext [type=SYSTEM_WORKER_BLOCKED, err=class o.a.i.IgniteException: GridWorker [name=db-checkpoint-thread, igniteInstanceName=Gemini.dev, finished=false, heartbeatTs=1672928018434]]]\r\n\r\nWhen these errors are shown some caches of cluster become unresponsive. I am attaching entire Ignite config at the end. \r\n\r\nI also tried observing persistence related metrics, but I don&#39;t see any in JConsole in &quot;Persistent Storage&quot; section. As you can see in my config I have set `metricsEnabled=true` in DR configs.\r\n\r\nI took a threaddump too. Although I am unable to make out anything from it. There are many threads which are in WAITING(parking) state. Here is one snippet from it.\r\n\r\n    &quot;db-checkpoint-thread-#105%Gemini.dev%&quot; #165 prio=5 os_prio=0 cpu=86.94ms elapsed=2085.34s tid=0x00007f9a5c138000 nid=0x3d3b waiting on condition  [0x00007f7eabf7c000]\r\n       java.lang.Thread.State: WAITING (parking)\r\n            at jdk.internal.misc.Unsafe.park(java.base@11.0.17/Native Method)\r\n            - parking to wait for  &lt;0x00000004018cc220&gt; (a java.util.concurrent.locks.ReentrantReadWriteLock$NonfairSync)\r\n            at java.util.concurrent.locks.LockSupport.park(java.base@11.0.17/LockSupport.java:194)\r\n            at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(java.base@11.0.17/AbstractQueuedSynchronizer.java:885)\r\n            at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(java.base@11.0.17/AbstractQueuedSynchronizer.java:917)\r\n            at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(java.base@11.0.17/AbstractQueuedSynchronizer.java:1240)\r\n            at java.util.concurrent.locks.ReentrantReadWriteLock$WriteLock.lock(java.base@11.0.17/ReentrantReadWriteLock.java:959)\r\n\r\nSome lines are cut to keep post under size limit\r\n\r\nBelow is my entire Ignite server config.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;    \r\n    &lt;beans xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n           xmlns:util=&quot;http://www.springframework.org/schema/util&quot;\r\n           xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n           xsi:schemaLocation=&quot;\r\n            http://www.springframework.org/schema/beans\r\n            http://www.springframework.org/schema/beans/spring-beans.xsd\r\n            http://www.springframework.org/schema/util\r\n            http://www.springframework.org/schema/util/spring-util.xsd&quot;&gt;\r\n    \r\n      &lt;bean id=&quot;propertyConfigurer&quot; class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;\r\n        &lt;property name=&quot;systemPropertiesModeName&quot; value=&quot;SYSTEM_PROPERTIES_MODE_FALLBACK&quot;/&gt;\r\n        &lt;property name=&quot;searchSystemEnvironment&quot; value=&quot;true&quot;/&gt;\r\n      &lt;/bean&gt;\r\n    \r\n      &lt;bean id=&quot;ignite.cfg&quot; class=&quot;org.apache.ignite.configuration.IgniteConfiguration&quot;&gt;\r\n        &lt;!-- Set to true to enable distributed class loading for examples, default is false. --&gt;\r\n        &lt;property name=&quot;sslContextFactory&quot;&gt;\r\n          &lt;bean class=&quot;org.apache.ignite.ssl.SslContextFactory&quot;&gt;\r\n              &lt;property name=&quot;keyStoreFilePath&quot; value=&quot;/home/sysSvcDevOps/ssl/ignite1.keystore.jks&quot;/&gt;\r\n              &lt;property name=&quot;keyStorePassword&quot; value=&quot;KeyStore443&quot;/&gt;\r\n              &lt;property name=&quot;keyStoreType&quot; value=&quot;jks&quot;/&gt;\r\n              &lt;property name=&quot;trustStoreFilePath&quot; value=&quot;/home/sysSvcDevOps/ssl/cacerts/java.cacerts.jks&quot;/&gt;\r\n              &lt;property name=&quot;trustStorePassword&quot; value=&quot;changeit&quot;/&gt;\r\n              &lt;property name=&quot;trustStoreType&quot; value=&quot;jks&quot;/&gt;\r\n          &lt;/bean&gt;\r\n        &lt;/property&gt;\r\n        &lt;property name=&quot;igniteInstanceName&quot; value=&quot;.dev&quot;/&gt;\r\n        &lt;property name=&quot;consistentId&quot; value=&quot;ignite1.dev&quot;/&gt;\r\n        &lt;property name=&quot;workDirectory&quot; value=&quot;/apps/Svc/dev/Ignite/IgniteData/persistentstore/work&quot;/&gt;\r\n    \r\n          &lt;property name=&quot;rebalanceThreadPoolSize&quot; value=&quot;8&quot;/&gt;\r\n          &lt;property name=&quot;publicThreadPoolSize&quot; value=&quot;32&quot;/&gt;\r\n          &lt;property name=&quot;systemThreadPoolSize&quot; value=&quot;64&quot;/&gt;\r\n          &lt;property name=&quot;queryThreadPoolSize&quot; value=&quot;64&quot;/&gt;\r\n          &lt;property name=&quot;failureDetectionTimeout&quot; value=&quot;30000&quot;/&gt;\r\n          &lt;property name=&quot;authenticationEnabled&quot; value=&quot;true&quot;/&gt;\r\n          &lt;property name=&quot;metricsUpdateFrequency&quot; value=&quot;30000&quot;/&gt;\r\n          &lt;property name=&quot;peerClassLoadingEnabled&quot; value=&quot;false&quot;/&gt;\r\n          &lt;property name=&quot;clientMode&quot; value=&quot;false&quot;/&gt;\r\n    \r\n        &lt;!-- Enable task execution events for examples. --&gt;\r\n        &lt;property name=&quot;includeEventTypes&quot;&gt;\r\n          &lt;list&gt;\r\n            &lt;util:constant static-field=&quot;org.apache.ignite.events.EventType.EVT_CACHE_STARTED&quot;/&gt;\r\n            &lt;util:constant static-field=&quot;org.apache.ignite.events.EventType.EVT_CACHE_STOPPED&quot;/&gt;\r\n            &lt;util:constant static-field=&quot;org.apache.ignite.events.EventType.EVT_CACHE_REBALANCE_PART_DATA_LOST&quot;/&gt;\r\n            &lt;util:constant static-field=&quot;org.apache.ignite.events.EventType.EVT_CACHE_NODES_LEFT&quot;/&gt;\r\n          &lt;/list&gt;\r\n        &lt;/property&gt;\r\n    \r\n        &lt;property name=&quot;dataStorageConfiguration&quot;&gt;\r\n          &lt;bean class=&quot;org.apache.ignite.configuration.DataStorageConfiguration&quot;&gt;\r\n    \r\n            &lt;property name=&quot;walSegmentSize&quot; value=&quot;1073741824&quot;/&gt;\r\n              &lt;property name=&quot;walSegments&quot; value=&quot;20&quot;/&gt;\r\n              &lt;property name=&quot;maxWalArchiveSize&quot; value=&quot;10737418240&quot;/&gt;\r\n              &lt;property name=&quot;walCompactionEnabled&quot; value=&quot;true&quot;/&gt;\r\n              &lt;property name=&quot;walCompactionLevel&quot; value=&quot;4&quot;/&gt;\r\n              &lt;property name=&quot;checkpointFrequency&quot; value=&quot;300000&quot;/&gt;\r\n              &lt;property name=&quot;checkpointThreads&quot; value=&quot;16&quot;/&gt;\r\n              &lt;property name=&quot;checkpointReadLockTimeout&quot; value=&quot;60000&quot;/&gt;\r\n              &lt;property name=&quot;lockWaitTime&quot; value=&quot;45000&quot;/&gt;\r\n              &lt;property name=&quot;checkpointWriteOrder&quot; value=&quot;RANDOM&quot;/&gt;\r\n              &lt;property name=&quot;pageSize&quot; value=&quot;4096&quot;/&gt;\r\n              &lt;property name=&quot;writeThrottlingEnabled&quot; value=&quot;true&quot;/&gt;\r\n    \r\n            &lt;!-- wal storage paths --&gt;\r\n            &lt;property name=&quot;walPath&quot; value=&quot;/apps/Svc/dev/Ignite/IgniteData&quot;/&gt;\r\n            &lt;property name=&quot;walArchivePath&quot; value=&quot;/apps/Svc/dev/Ignite/IgniteDataArchive&quot;/&gt;\r\n            &lt;property name=&quot;storagePath&quot; value=&quot;/apps/Svc/dev/Ignite/IgniteData/archive&quot;/&gt;\r\n    \r\n            &lt;property name=&quot;dataRegionConfigurations&quot;&gt;\r\n              &lt;list&gt;\r\n                    &lt;bean class=&quot;org.apache.ignite.configuration.DataRegionConfiguration&quot;&gt;\r\n                        &lt;property name=&quot;name&quot; value=&quot;dr.dev.referencedata&quot;/&gt;\r\n                        &lt;property name=&quot;persistenceEnabled&quot; value=&quot;true&quot;/&gt;\r\n                        &lt;property name=&quot;initialSize&quot; value=&quot;1073741824&quot;/&gt;\r\n                        &lt;property name=&quot;maxSize&quot; value=&quot;4294969673&quot;/&gt;\r\n                        &lt;property name=&quot;checkpointPageBufferSize&quot; value=&quot;1073741824&quot;/&gt;\r\n                    &lt;/bean&gt;\r\n                    &lt;bean class=&quot;org.apache.ignite.configuration.DataRegionConfiguration&quot;&gt;\r\n                        &lt;property name=&quot;name&quot; value=&quot;dr.dev.input&quot;/&gt;\r\n                        &lt;property name=&quot;persistenceEnabled&quot; value=&quot;true&quot;/&gt;\r\n                        &lt;property name=&quot;metricsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                        &lt;property name=&quot;checkpointPageBufferSize&quot; value=&quot;#{4 * 1024 * 1024 * 1024}&quot;/&gt;\r\n                        &lt;property name=&quot;initialSize&quot; value=&quot;12884901888&quot;/&gt;\r\n                        &lt;property name=&quot;maxSize&quot; value=&quot;81604378624&quot;/&gt;\r\n                        &lt;property name=&quot;pageEvictionMode&quot; value=&quot;RANDOM_2_LRU&quot;/&gt;\r\n                    &lt;/bean&gt;\r\n                    &lt;bean class=&quot;org.apache.ignite.configuration.DataRegionConfiguration&quot;&gt;\r\n                        &lt;property name=&quot;name&quot; value=&quot;dr.dev.input.exception&quot;/&gt;\r\n                        &lt;property name=&quot;persistenceEnabled&quot; value=&quot;true&quot;/&gt;\r\n                        &lt;property name=&quot;metricsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                        &lt;property name=&quot;checkpointPageBufferSize&quot; value=&quot;#{4 * 1024 * 1024 * 1024}&quot;/&gt;\r\n                        &lt;property name=&quot;initialSize&quot; value=&quot;4294967296&quot;/&gt;\r\n                        &lt;property name=&quot;maxSize&quot; value=&quot;21474836480&quot;/&gt;\r\n                        &lt;property name=&quot;pageEvictionMode&quot; value=&quot;RANDOM_2_LRU&quot;/&gt;\r\n                    &lt;/bean&gt;\r\n                    &lt;bean class=&quot;org.apache.ignite.configuration.DataRegionConfiguration&quot;&gt;\r\n                        &lt;property name=&quot;name&quot; value=&quot;dr.dev.output&quot;/&gt;\r\n                        &lt;property name=&quot;initialSize&quot; value=&quot;1073741824&quot;/&gt;\r\n                        &lt;property name=&quot;persistenceEnabled&quot; value=&quot;true&quot;/&gt;\r\n                        &lt;property name=&quot;metricsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                        &lt;property name=&quot;checkpointPageBufferSize&quot; value=&quot;#{2 * 1024 * 1024 * 1024}&quot;/&gt;\r\n                        &lt;property name=&quot;maxSize&quot; value=&quot;2147483648&quot;/&gt;\r\n                    &lt;/bean&gt;\r\n              &lt;/list&gt;\r\n            &lt;/property&gt;\r\n    \r\n            &lt;property name=&quot;defaultDataRegionConfiguration&quot;&gt;\r\n              &lt;bean class=&quot;org.apache.ignite.configuration.DataRegionConfiguration&quot;&gt;\r\n                  &lt;property name=&quot;name&quot; value=&quot;default_region&quot;/&gt;\r\n                  &lt;property name=&quot;persistenceEnabled&quot; value=&quot;true&quot;/&gt;\r\n                  &lt;property name=&quot;initialSize&quot; value=&quot;268435456&quot;/&gt;\r\n                  &lt;property name=&quot;maxSize&quot; value=&quot;268435456&quot;/&gt;\r\n    \r\n              &lt;/bean&gt;\r\n            &lt;/property&gt;\r\n          &lt;/bean&gt;\r\n        &lt;/property&gt;\r\n    \r\n        &lt;property name=&quot;discoverySpi&quot;&gt;\r\n          &lt;bean class=&quot;org.apache.ignite.spi.discovery.zk.ZookeeperDiscoverySpi&quot;&gt;\r\n            &lt;property name=&quot;zkConnectionString&quot; value=&quot;zk1.intranet.com:22001,zk2.intranet.com:22001&quot;/&gt;\r\n              &lt;property name=&quot;zkRootPath&quot; value=&quot;/ignite&quot;/&gt;\r\n              &lt;property name=&quot;sessionTimeout&quot; value=&quot;120000&quot;/&gt;\r\n              &lt;property name=&quot;joinTimeout&quot; value=&quot;10000&quot;/&gt;\r\n          &lt;/bean&gt;\r\n        &lt;/property&gt;\r\n    \r\n        &lt;property name=&quot;communicationSpi&quot;&gt;\r\n          &lt;bean class=&quot;org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi&quot;&gt;\r\n              &lt;property name=&quot;socketWriteTimeout&quot; value=&quot;60000&quot;/&gt;\r\n          &lt;/bean&gt;\r\n        &lt;/property&gt;\r\n    \r\n        &lt;property name=&quot;cacheConfiguration&quot;&gt;\r\n          &lt;list&gt;\r\n              &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\r\n                    class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\r\n                  &lt;property name=&quot;name&quot; value=&quot;referenceDataCacheTemplate*&quot;/&gt;\r\n                  &lt;property name=&quot;cacheMode&quot; value=&quot;REPLICATED&quot;/&gt;\r\n                  &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\r\n                  &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\r\n                  &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.referencedata&quot;/&gt;\r\n                  &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\r\n                  &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\r\n                  &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                  &lt;property name=&quot;sqlIndexMaxInlineSize&quot; value=&quot;203&quot;/&gt;\r\n                &lt;property name=&quot;affinity&quot;&gt;\r\n                  &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\r\n                      &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\r\n    \r\n    \r\n                  &lt;/bean&gt;\r\n                &lt;/property&gt;\r\n              &lt;/bean&gt;\r\n              &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\r\n                    class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\r\n                  &lt;property name=&quot;name&quot; value=&quot;inputMetadataCacheTemplate*&quot;/&gt;\r\n                  &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\r\n                  &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\r\n                  &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\r\n                  &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.input&quot;/&gt;\r\n                  &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\r\n                  &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\r\n                  &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                  &lt;property name=&quot;readFromBackup&quot; value=&quot;false&quot;/&gt;\r\n                  &lt;property name=&quot;sqlIndexMaxInlineSize&quot; value=&quot;211&quot;/&gt;\r\n                &lt;property name=&quot;affinity&quot;&gt;\r\n                  &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\r\n                      &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\r\n    \r\n                    &lt;property name=&quot;affinityBackupFilter&quot;&gt;\r\n                              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\r\n                                &lt;constructor-arg&gt;\r\n                                                      &lt;array value-type=&quot;java.lang.String&quot;&gt;\r\n                                                      &lt;value&gt;RACK_ID&lt;/value&gt;\r\n                                                         &lt;/array&gt;\r\n                                 &lt;/constructor-arg&gt;\r\n                              &lt;/bean&gt;\r\n                    &lt;/property&gt;\r\n    \r\n                  &lt;/bean&gt;\r\n                &lt;/property&gt;\r\n                  &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\r\n                    &lt;bean class=&quot;javax.cache.expiry.ModifiedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\r\n                      &lt;constructor-arg&gt;\r\n                        &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\r\n                          &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\r\n                          &lt;constructor-arg value=&quot;5&quot;/&gt;\r\n                        &lt;/bean&gt;\r\n                      &lt;/constructor-arg&gt;\r\n                    &lt;/bean&gt;\r\n                  &lt;/property&gt;\r\n              &lt;/bean&gt;\r\n              &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\r\n                    class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\r\n                  &lt;property name=&quot;name&quot; value=&quot;inputReconCacheTemplate*&quot;/&gt;\r\n                  &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\r\n                  &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\r\n                  &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\r\n                  &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.input&quot;/&gt;\r\n                  &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\r\n                  &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\r\n                  &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                  &lt;property name=&quot;readFromBackup&quot; value=&quot;false&quot;/&gt;\r\n                  &lt;property name=&quot;sqlIndexMaxInlineSize&quot; value=&quot;211&quot;/&gt;\r\n                &lt;property name=&quot;affinity&quot;&gt;\r\n                  &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\r\n                      &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\r\n    \r\n                    &lt;property name=&quot;affinityBackupFilter&quot;&gt;\r\n                              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\r\n                                &lt;constructor-arg&gt;\r\n                                                      &lt;array value-type=&quot;java.lang.String&quot;&gt;\r\n                                                      &lt;value&gt;RACK_ID&lt;/value&gt;\r\n                                                         &lt;/array&gt;\r\n                                 &lt;/constructor-arg&gt;\r\n                              &lt;/bean&gt;\r\n                    &lt;/property&gt;\r\n    \r\n                  &lt;/bean&gt;\r\n                &lt;/property&gt;\r\n                  &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\r\n                    &lt;bean class=&quot;javax.cache.expiry.CreatedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\r\n                      &lt;constructor-arg&gt;\r\n                        &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\r\n                          &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\r\n                          &lt;constructor-arg value=&quot;4&quot;/&gt;\r\n                        &lt;/bean&gt;\r\n                      &lt;/constructor-arg&gt;\r\n                    &lt;/bean&gt;\r\n                  &lt;/property&gt;\r\n              &lt;/bean&gt;\r\n              &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\r\n                    class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\r\n                  &lt;property name=&quot;name&quot; value=&quot;inputExceptionsCacheTemplate*&quot;/&gt;\r\n                  &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\r\n                  &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\r\n                  &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\r\n                  &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.input.exception&quot;/&gt;\r\n                  &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\r\n                  &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\r\n                  &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                  &lt;property name=&quot;readFromBackup&quot; value=&quot;false&quot;/&gt;\r\n                &lt;property name=&quot;affinity&quot;&gt;\r\n                  &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\r\n                      &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\r\n    \r\n                    &lt;property name=&quot;affinityBackupFilter&quot;&gt;\r\n                              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\r\n                                &lt;constructor-arg&gt;\r\n                                                      &lt;array value-type=&quot;java.lang.String&quot;&gt;\r\n                                                      &lt;value&gt;RACK_ID&lt;/value&gt;\r\n                                                         &lt;/array&gt;\r\n                                 &lt;/constructor-arg&gt;\r\n                              &lt;/bean&gt;\r\n                    &lt;/property&gt;\r\n    \r\n                  &lt;/bean&gt;\r\n                &lt;/property&gt;\r\n                  &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\r\n                    &lt;bean class=&quot;javax.cache.expiry.CreatedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\r\n                      &lt;constructor-arg&gt;\r\n                        &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\r\n                          &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\r\n                          &lt;constructor-arg value=&quot;15&quot;/&gt;\r\n                        &lt;/bean&gt;\r\n                      &lt;/constructor-arg&gt;\r\n                    &lt;/bean&gt;\r\n                  &lt;/property&gt;\r\n              &lt;/bean&gt;\r\n              &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\r\n                    class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\r\n                  &lt;property name=&quot;name&quot; value=&quot;outputDataCacheTemplate*&quot;/&gt;\r\n                  &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\r\n                  &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\r\n                  &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\r\n                  &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.output&quot;/&gt;\r\n                  &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\r\n                  &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\r\n                  &lt;property name=&quot;sqlSchema&quot; value=&quot;&quot;/&gt;\r\n                  &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                &lt;property name=&quot;affinity&quot;&gt;\r\n                  &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\r\n                      &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\r\n    \r\n                    &lt;property name=&quot;affinityBackupFilter&quot;&gt;\r\n                              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\r\n                                &lt;constructor-arg&gt;\r\n                                                      &lt;array value-type=&quot;java.lang.String&quot;&gt;\r\n                                                      &lt;value&gt;RACK_ID&lt;/value&gt;\r\n                                                         &lt;/array&gt;\r\n                                 &lt;/constructor-arg&gt;\r\n                              &lt;/bean&gt;\r\n                    &lt;/property&gt;\r\n    \r\n                  &lt;/bean&gt;\r\n                &lt;/property&gt;\r\n                  &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\r\n                    &lt;bean class=&quot;javax.cache.expiry.CreatedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\r\n                      &lt;constructor-arg&gt;\r\n                        &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\r\n                          &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\r\n                          &lt;constructor-arg value=&quot;450&quot;/&gt;\r\n                        &lt;/bean&gt;\r\n                      &lt;/constructor-arg&gt;\r\n                    &lt;/bean&gt;\r\n                  &lt;/property&gt;\r\n              &lt;/bean&gt;\r\n              &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\r\n                    class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\r\n                  &lt;property name=&quot;name&quot; value=&quot;reconAuditDataCacheTemplate*&quot;/&gt;\r\n                  &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\r\n                  &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\r\n                  &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\r\n                  &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.referencedata&quot;/&gt;\r\n                  &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\r\n                  &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\r\n                  &lt;property name=&quot;sqlSchema&quot; value=&quot;&quot;/&gt;\r\n                  &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                &lt;property name=&quot;affinity&quot;&gt;\r\n                  &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\r\n                      &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\r\n    \r\n                    &lt;property name=&quot;affinityBackupFilter&quot;&gt;\r\n                              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\r\n                                &lt;constructor-arg&gt;\r\n                                                      &lt;array value-type=&quot;java.lang.String&quot;&gt;\r\n                                                      &lt;value&gt;RACK_ID&lt;/value&gt;\r\n                                                         &lt;/array&gt;\r\n                                 &lt;/constructor-arg&gt;\r\n                              &lt;/bean&gt;\r\n                    &lt;/property&gt;\r\n    \r\n                  &lt;/bean&gt;\r\n                &lt;/property&gt;\r\n              &lt;/bean&gt;\r\n              &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\r\n                    class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\r\n                  &lt;property name=&quot;name&quot; value=&quot;fileDataCacheTemplate*&quot;/&gt;\r\n                  &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\r\n                  &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\r\n                  &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\r\n                  &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.input&quot;/&gt;\r\n                  &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\r\n                  &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\r\n                  &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                  &lt;property name=&quot;queryParallelism&quot; value=&quot;4&quot;/&gt;\r\n                  &lt;property name=&quot;eagerTtl&quot; value=&quot;true&quot;/&gt;\r\n                &lt;property name=&quot;affinity&quot;&gt;\r\n                  &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\r\n                      &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\r\n    \r\n                    &lt;property name=&quot;affinityBackupFilter&quot;&gt;\r\n                              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\r\n                                &lt;constructor-arg&gt;\r\n                                                      &lt;array value-type=&quot;java.lang.String&quot;&gt;\r\n                                                      &lt;value&gt;RACK_ID&lt;/value&gt;\r\n                                                         &lt;/array&gt;\r\n                                 &lt;/constructor-arg&gt;\r\n                              &lt;/bean&gt;\r\n                    &lt;/property&gt;\r\n    \r\n                  &lt;/bean&gt;\r\n                &lt;/property&gt;\r\n                  &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\r\n                    &lt;bean class=&quot;javax.cache.expiry.CreatedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\r\n                      &lt;constructor-arg&gt;\r\n                        &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\r\n                          &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\r\n                          &lt;constructor-arg value=&quot;5&quot;/&gt;\r\n                        &lt;/bean&gt;\r\n                      &lt;/constructor-arg&gt;\r\n                    &lt;/bean&gt;\r\n                  &lt;/property&gt;\r\n              &lt;/bean&gt;\r\n              &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\r\n                    class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\r\n                  &lt;property name=&quot;name&quot; value=&quot;shortLivedReferenceDataTemplate*&quot;/&gt;\r\n                  &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\r\n                  &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\r\n                  &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\r\n                  &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.input.exception&quot;/&gt;\r\n                  &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\r\n                  &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\r\n                  &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                  &lt;property name=&quot;managementEnabled&quot; value=&quot;true&quot;/&gt;\r\n                &lt;property name=&quot;affinity&quot;&gt;\r\n                  &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\r\n                      &lt;property name=&quot;partitions&quot; value=&quot;64&quot;/&gt;\r\n    \r\n                    &lt;property name=&quot;affinityBackupFilter&quot;&gt;\r\n                              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\r\n                                &lt;constructor-arg&gt;\r\n                                                      &lt;array value-type=&quot;java.lang.String&quot;&gt;\r\n                                                      &lt;value&gt;RACK_ID&lt;/value&gt;\r\n                                                         &lt;/array&gt;\r\n                                 &lt;/constructor-arg&gt;\r\n                              &lt;/bean&gt;\r\n                    &lt;/property&gt;\r\n    \r\n                  &lt;/bean&gt;\r\n                &lt;/property&gt;\r\n                  &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\r\n                    &lt;bean class=&quot;javax.cache.expiry.CreatedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\r\n                      &lt;constructor-arg&gt;\r\n                        &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\r\n                          &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\r\n                          &lt;constructor-arg value=&quot;2&quot;/&gt;\r\n                        &lt;/bean&gt;\r\n                      &lt;/constructor-arg&gt;\r\n                    &lt;/bean&gt;\r\n                  &lt;/property&gt;\r\n              &lt;/bean&gt;\r\n    \r\n          &lt;/list&gt;\r\n        &lt;/property&gt;\r\n    \r\n        &lt;property name=&quot;sqlSchemas&quot;&gt;\r\n          &lt;list&gt;\r\n            &lt;value&gt;dataInput&lt;/value&gt;\r\n          &lt;/list&gt;\r\n        &lt;/property&gt;\r\n    \r\n      &lt;/bean&gt;\r\n    &lt;/beans&gt;","title":"Ignite system-critical thread blocked","body":"<p>I have a 2 node Ignite cluster on dev environment. Version 2.9.0\nI have enabled persistence in my data region configs. When I start cluster it runs fine. Now when I shutdown node one by one and restart them, to check if persistence is working alright, I see below errors in one of the nodes.</p>\n<pre><code>SEVERE: Blocked system-critical thread has been detected. This can lead to cluster-wide undefined behaviour [workerName=ttl-cleanup-worker, threadName=ttl-cleanup-worker-#44%Gemini.dev%, blockedFor=3079s]\n\n[15:04:59] Possible failure suppressed accordingly to a configured handler [hnd=StopNodeOrHaltFailureHandler [tryStop=false, timeout=0, super=AbstractFailureHandler [ignoredFailureTypes=UnmodifiableSet [SYSTEM_WORKER_BLOCKED, SYSTEM_CRITICAL_OPERATION_TIMEOUT]]], failureCtx=FailureContext [type=SYSTEM_WORKER_BLOCKED, err=class o.a.i.IgniteException: GridWorker [name=ttl-cleanup-worker, igniteInstanceName=Gemini.dev, finished=false, heartbeatTs=1672928019372]]]\n\nJan 05, 2023 3:05:08 PM org.apache.ignite.logger.java.JavaLogger error\nSEVERE: Blocked system-critical thread has been detected. This can lead to cluster-wide undefined behaviour [workerName=sys-stripe-0, threadName=sys-stripe-0-#1%Gemini.dev%, blockedFor=2490s]\n\n[15:05:08] Possible failure suppressed accordingly to a configured handler [hnd=StopNodeOrHaltFailureHandler [tryStop=false, timeout=0, super=AbstractFailureHandler [ignoredFailureTypes=UnmodifiableSet [SYSTEM_WORKER_BLOCKED, SYSTEM_CRITICAL_OPERATION_TIMEOUT]]], failureCtx=FailureContext [type=SYSTEM_WORKER_BLOCKED, err=class o.a.i.IgniteException: GridWorker [name=sys-stripe-0, igniteInstanceName=Gemini.dev, finished=false, heartbeatTs=1672928617333]]]\n\nJan 05, 2023 3:05:08 PM org.apache.ignite.logger.java.JavaLogger error\nSEVERE: Blocked system-critical thread has been detected. This can lead to cluster-wide undefined behaviour [workerName=sys-stripe-6, threadName=sys-stripe-6-#7%Gemini.dev%, blockedFor=2506s]\n\n[15:05:08] Possible failure suppressed accordingly to a configured handler [hnd=StopNodeOrHaltFailureHandler [tryStop=false, timeout=0, super=AbstractFailureHandler [ignoredFailureTypes=UnmodifiableSet [SYSTEM_WORKER_BLOCKED, SYSTEM_CRITICAL_OPERATION_TIMEOUT]]], failureCtx=FailureContext [type=SYSTEM_WORKER_BLOCKED, err=class o.a.i.IgniteException: GridWorker [name=sys-stripe-6, igniteInstanceName=Gemini.dev, finished=false, heartbeatTs=1672928602019]]]\n\nJan 05, 2023 3:05:17 PM org.apache.ignite.logger.java.JavaLogger error\nSEVERE: Blocked system-critical thread has been detected. This can lead to cluster-wide undefined behaviour [workerName=db-checkpoint-thread, threadName=db-checkpoint-thread-#105%Gemini.dev%, blockedFor=3098s]\n\n[15:05:17] Possible failure suppressed accordingly to a configured handler [hnd=StopNodeOrHaltFailureHandler [tryStop=false, timeout=0, super=AbstractFailureHandler [ignoredFailureTypes=UnmodifiableSet [SYSTEM_WORKER_BLOCKED, SYSTEM_CRITICAL_OPERATION_TIMEOUT]]], failureCtx=FailureContext [type=SYSTEM_WORKER_BLOCKED, err=class o.a.i.IgniteException: GridWorker [name=db-checkpoint-thread, igniteInstanceName=Gemini.dev, finished=false, heartbeatTs=1672928018434]]]\n</code></pre>\n<p>When these errors are shown some caches of cluster become unresponsive. I am attaching entire Ignite config at the end.</p>\n<p>I also tried observing persistence related metrics, but I don't see any in JConsole in &quot;Persistent Storage&quot; section. As you can see in my config I have set <code>metricsEnabled=true</code> in DR configs.</p>\n<p>I took a threaddump too. Although I am unable to make out anything from it. There are many threads which are in WAITING(parking) state. Here is one snippet from it.</p>\n<pre><code>&quot;db-checkpoint-thread-#105%Gemini.dev%&quot; #165 prio=5 os_prio=0 cpu=86.94ms elapsed=2085.34s tid=0x00007f9a5c138000 nid=0x3d3b waiting on condition  [0x00007f7eabf7c000]\n   java.lang.Thread.State: WAITING (parking)\n        at jdk.internal.misc.Unsafe.park(java.base@11.0.17/Native Method)\n        - parking to wait for  &lt;0x00000004018cc220&gt; (a java.util.concurrent.locks.ReentrantReadWriteLock$NonfairSync)\n        at java.util.concurrent.locks.LockSupport.park(java.base@11.0.17/LockSupport.java:194)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(java.base@11.0.17/AbstractQueuedSynchronizer.java:885)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(java.base@11.0.17/AbstractQueuedSynchronizer.java:917)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(java.base@11.0.17/AbstractQueuedSynchronizer.java:1240)\n        at java.util.concurrent.locks.ReentrantReadWriteLock$WriteLock.lock(java.base@11.0.17/ReentrantReadWriteLock.java:959)\n</code></pre>\n<p>Some lines are cut to keep post under size limit</p>\n<p>Below is my entire Ignite server config.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;    \n&lt;beans xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n       xmlns:util=&quot;http://www.springframework.org/schema/util&quot;\n       xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n       xsi:schemaLocation=&quot;\n        http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/util\n        http://www.springframework.org/schema/util/spring-util.xsd&quot;&gt;\n\n  &lt;bean id=&quot;propertyConfigurer&quot; class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;\n    &lt;property name=&quot;systemPropertiesModeName&quot; value=&quot;SYSTEM_PROPERTIES_MODE_FALLBACK&quot;/&gt;\n    &lt;property name=&quot;searchSystemEnvironment&quot; value=&quot;true&quot;/&gt;\n  &lt;/bean&gt;\n\n  &lt;bean id=&quot;ignite.cfg&quot; class=&quot;org.apache.ignite.configuration.IgniteConfiguration&quot;&gt;\n    &lt;!-- Set to true to enable distributed class loading for examples, default is false. --&gt;\n    &lt;property name=&quot;sslContextFactory&quot;&gt;\n      &lt;bean class=&quot;org.apache.ignite.ssl.SslContextFactory&quot;&gt;\n          &lt;property name=&quot;keyStoreFilePath&quot; value=&quot;/home/sysSvcDevOps/ssl/ignite1.keystore.jks&quot;/&gt;\n          &lt;property name=&quot;keyStorePassword&quot; value=&quot;KeyStore443&quot;/&gt;\n          &lt;property name=&quot;keyStoreType&quot; value=&quot;jks&quot;/&gt;\n          &lt;property name=&quot;trustStoreFilePath&quot; value=&quot;/home/sysSvcDevOps/ssl/cacerts/java.cacerts.jks&quot;/&gt;\n          &lt;property name=&quot;trustStorePassword&quot; value=&quot;changeit&quot;/&gt;\n          &lt;property name=&quot;trustStoreType&quot; value=&quot;jks&quot;/&gt;\n      &lt;/bean&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;igniteInstanceName&quot; value=&quot;.dev&quot;/&gt;\n    &lt;property name=&quot;consistentId&quot; value=&quot;ignite1.dev&quot;/&gt;\n    &lt;property name=&quot;workDirectory&quot; value=&quot;/apps/Svc/dev/Ignite/IgniteData/persistentstore/work&quot;/&gt;\n\n      &lt;property name=&quot;rebalanceThreadPoolSize&quot; value=&quot;8&quot;/&gt;\n      &lt;property name=&quot;publicThreadPoolSize&quot; value=&quot;32&quot;/&gt;\n      &lt;property name=&quot;systemThreadPoolSize&quot; value=&quot;64&quot;/&gt;\n      &lt;property name=&quot;queryThreadPoolSize&quot; value=&quot;64&quot;/&gt;\n      &lt;property name=&quot;failureDetectionTimeout&quot; value=&quot;30000&quot;/&gt;\n      &lt;property name=&quot;authenticationEnabled&quot; value=&quot;true&quot;/&gt;\n      &lt;property name=&quot;metricsUpdateFrequency&quot; value=&quot;30000&quot;/&gt;\n      &lt;property name=&quot;peerClassLoadingEnabled&quot; value=&quot;false&quot;/&gt;\n      &lt;property name=&quot;clientMode&quot; value=&quot;false&quot;/&gt;\n\n    &lt;!-- Enable task execution events for examples. --&gt;\n    &lt;property name=&quot;includeEventTypes&quot;&gt;\n      &lt;list&gt;\n        &lt;util:constant static-field=&quot;org.apache.ignite.events.EventType.EVT_CACHE_STARTED&quot;/&gt;\n        &lt;util:constant static-field=&quot;org.apache.ignite.events.EventType.EVT_CACHE_STOPPED&quot;/&gt;\n        &lt;util:constant static-field=&quot;org.apache.ignite.events.EventType.EVT_CACHE_REBALANCE_PART_DATA_LOST&quot;/&gt;\n        &lt;util:constant static-field=&quot;org.apache.ignite.events.EventType.EVT_CACHE_NODES_LEFT&quot;/&gt;\n      &lt;/list&gt;\n    &lt;/property&gt;\n\n    &lt;property name=&quot;dataStorageConfiguration&quot;&gt;\n      &lt;bean class=&quot;org.apache.ignite.configuration.DataStorageConfiguration&quot;&gt;\n\n        &lt;property name=&quot;walSegmentSize&quot; value=&quot;1073741824&quot;/&gt;\n          &lt;property name=&quot;walSegments&quot; value=&quot;20&quot;/&gt;\n          &lt;property name=&quot;maxWalArchiveSize&quot; value=&quot;10737418240&quot;/&gt;\n          &lt;property name=&quot;walCompactionEnabled&quot; value=&quot;true&quot;/&gt;\n          &lt;property name=&quot;walCompactionLevel&quot; value=&quot;4&quot;/&gt;\n          &lt;property name=&quot;checkpointFrequency&quot; value=&quot;300000&quot;/&gt;\n          &lt;property name=&quot;checkpointThreads&quot; value=&quot;16&quot;/&gt;\n          &lt;property name=&quot;checkpointReadLockTimeout&quot; value=&quot;60000&quot;/&gt;\n          &lt;property name=&quot;lockWaitTime&quot; value=&quot;45000&quot;/&gt;\n          &lt;property name=&quot;checkpointWriteOrder&quot; value=&quot;RANDOM&quot;/&gt;\n          &lt;property name=&quot;pageSize&quot; value=&quot;4096&quot;/&gt;\n          &lt;property name=&quot;writeThrottlingEnabled&quot; value=&quot;true&quot;/&gt;\n\n        &lt;!-- wal storage paths --&gt;\n        &lt;property name=&quot;walPath&quot; value=&quot;/apps/Svc/dev/Ignite/IgniteData&quot;/&gt;\n        &lt;property name=&quot;walArchivePath&quot; value=&quot;/apps/Svc/dev/Ignite/IgniteDataArchive&quot;/&gt;\n        &lt;property name=&quot;storagePath&quot; value=&quot;/apps/Svc/dev/Ignite/IgniteData/archive&quot;/&gt;\n\n        &lt;property name=&quot;dataRegionConfigurations&quot;&gt;\n          &lt;list&gt;\n                &lt;bean class=&quot;org.apache.ignite.configuration.DataRegionConfiguration&quot;&gt;\n                    &lt;property name=&quot;name&quot; value=&quot;dr.dev.referencedata&quot;/&gt;\n                    &lt;property name=&quot;persistenceEnabled&quot; value=&quot;true&quot;/&gt;\n                    &lt;property name=&quot;initialSize&quot; value=&quot;1073741824&quot;/&gt;\n                    &lt;property name=&quot;maxSize&quot; value=&quot;4294969673&quot;/&gt;\n                    &lt;property name=&quot;checkpointPageBufferSize&quot; value=&quot;1073741824&quot;/&gt;\n                &lt;/bean&gt;\n                &lt;bean class=&quot;org.apache.ignite.configuration.DataRegionConfiguration&quot;&gt;\n                    &lt;property name=&quot;name&quot; value=&quot;dr.dev.input&quot;/&gt;\n                    &lt;property name=&quot;persistenceEnabled&quot; value=&quot;true&quot;/&gt;\n                    &lt;property name=&quot;metricsEnabled&quot; value=&quot;true&quot;/&gt;\n                    &lt;property name=&quot;checkpointPageBufferSize&quot; value=&quot;#{4 * 1024 * 1024 * 1024}&quot;/&gt;\n                    &lt;property name=&quot;initialSize&quot; value=&quot;12884901888&quot;/&gt;\n                    &lt;property name=&quot;maxSize&quot; value=&quot;81604378624&quot;/&gt;\n                    &lt;property name=&quot;pageEvictionMode&quot; value=&quot;RANDOM_2_LRU&quot;/&gt;\n                &lt;/bean&gt;\n                &lt;bean class=&quot;org.apache.ignite.configuration.DataRegionConfiguration&quot;&gt;\n                    &lt;property name=&quot;name&quot; value=&quot;dr.dev.input.exception&quot;/&gt;\n                    &lt;property name=&quot;persistenceEnabled&quot; value=&quot;true&quot;/&gt;\n                    &lt;property name=&quot;metricsEnabled&quot; value=&quot;true&quot;/&gt;\n                    &lt;property name=&quot;checkpointPageBufferSize&quot; value=&quot;#{4 * 1024 * 1024 * 1024}&quot;/&gt;\n                    &lt;property name=&quot;initialSize&quot; value=&quot;4294967296&quot;/&gt;\n                    &lt;property name=&quot;maxSize&quot; value=&quot;21474836480&quot;/&gt;\n                    &lt;property name=&quot;pageEvictionMode&quot; value=&quot;RANDOM_2_LRU&quot;/&gt;\n                &lt;/bean&gt;\n                &lt;bean class=&quot;org.apache.ignite.configuration.DataRegionConfiguration&quot;&gt;\n                    &lt;property name=&quot;name&quot; value=&quot;dr.dev.output&quot;/&gt;\n                    &lt;property name=&quot;initialSize&quot; value=&quot;1073741824&quot;/&gt;\n                    &lt;property name=&quot;persistenceEnabled&quot; value=&quot;true&quot;/&gt;\n                    &lt;property name=&quot;metricsEnabled&quot; value=&quot;true&quot;/&gt;\n                    &lt;property name=&quot;checkpointPageBufferSize&quot; value=&quot;#{2 * 1024 * 1024 * 1024}&quot;/&gt;\n                    &lt;property name=&quot;maxSize&quot; value=&quot;2147483648&quot;/&gt;\n                &lt;/bean&gt;\n          &lt;/list&gt;\n        &lt;/property&gt;\n\n        &lt;property name=&quot;defaultDataRegionConfiguration&quot;&gt;\n          &lt;bean class=&quot;org.apache.ignite.configuration.DataRegionConfiguration&quot;&gt;\n              &lt;property name=&quot;name&quot; value=&quot;default_region&quot;/&gt;\n              &lt;property name=&quot;persistenceEnabled&quot; value=&quot;true&quot;/&gt;\n              &lt;property name=&quot;initialSize&quot; value=&quot;268435456&quot;/&gt;\n              &lt;property name=&quot;maxSize&quot; value=&quot;268435456&quot;/&gt;\n\n          &lt;/bean&gt;\n        &lt;/property&gt;\n      &lt;/bean&gt;\n    &lt;/property&gt;\n\n    &lt;property name=&quot;discoverySpi&quot;&gt;\n      &lt;bean class=&quot;org.apache.ignite.spi.discovery.zk.ZookeeperDiscoverySpi&quot;&gt;\n        &lt;property name=&quot;zkConnectionString&quot; value=&quot;zk1.intranet.com:22001,zk2.intranet.com:22001&quot;/&gt;\n          &lt;property name=&quot;zkRootPath&quot; value=&quot;/ignite&quot;/&gt;\n          &lt;property name=&quot;sessionTimeout&quot; value=&quot;120000&quot;/&gt;\n          &lt;property name=&quot;joinTimeout&quot; value=&quot;10000&quot;/&gt;\n      &lt;/bean&gt;\n    &lt;/property&gt;\n\n    &lt;property name=&quot;communicationSpi&quot;&gt;\n      &lt;bean class=&quot;org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi&quot;&gt;\n          &lt;property name=&quot;socketWriteTimeout&quot; value=&quot;60000&quot;/&gt;\n      &lt;/bean&gt;\n    &lt;/property&gt;\n\n    &lt;property name=&quot;cacheConfiguration&quot;&gt;\n      &lt;list&gt;\n          &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\n                class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\n              &lt;property name=&quot;name&quot; value=&quot;referenceDataCacheTemplate*&quot;/&gt;\n              &lt;property name=&quot;cacheMode&quot; value=&quot;REPLICATED&quot;/&gt;\n              &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\n              &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\n              &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.referencedata&quot;/&gt;\n              &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\n              &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\n              &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\n              &lt;property name=&quot;sqlIndexMaxInlineSize&quot; value=&quot;203&quot;/&gt;\n            &lt;property name=&quot;affinity&quot;&gt;\n              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\n                  &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\n\n\n              &lt;/bean&gt;\n            &lt;/property&gt;\n          &lt;/bean&gt;\n          &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\n                class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\n              &lt;property name=&quot;name&quot; value=&quot;inputMetadataCacheTemplate*&quot;/&gt;\n              &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\n              &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\n              &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\n              &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.input&quot;/&gt;\n              &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\n              &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\n              &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\n              &lt;property name=&quot;readFromBackup&quot; value=&quot;false&quot;/&gt;\n              &lt;property name=&quot;sqlIndexMaxInlineSize&quot; value=&quot;211&quot;/&gt;\n            &lt;property name=&quot;affinity&quot;&gt;\n              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\n                  &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\n\n                &lt;property name=&quot;affinityBackupFilter&quot;&gt;\n                          &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\n                            &lt;constructor-arg&gt;\n                                                  &lt;array value-type=&quot;java.lang.String&quot;&gt;\n                                                  &lt;value&gt;RACK_ID&lt;/value&gt;\n                                                     &lt;/array&gt;\n                             &lt;/constructor-arg&gt;\n                          &lt;/bean&gt;\n                &lt;/property&gt;\n\n              &lt;/bean&gt;\n            &lt;/property&gt;\n              &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\n                &lt;bean class=&quot;javax.cache.expiry.ModifiedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\n                  &lt;constructor-arg&gt;\n                    &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\n                      &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\n                      &lt;constructor-arg value=&quot;5&quot;/&gt;\n                    &lt;/bean&gt;\n                  &lt;/constructor-arg&gt;\n                &lt;/bean&gt;\n              &lt;/property&gt;\n          &lt;/bean&gt;\n          &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\n                class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\n              &lt;property name=&quot;name&quot; value=&quot;inputReconCacheTemplate*&quot;/&gt;\n              &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\n              &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\n              &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\n              &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.input&quot;/&gt;\n              &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\n              &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\n              &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\n              &lt;property name=&quot;readFromBackup&quot; value=&quot;false&quot;/&gt;\n              &lt;property name=&quot;sqlIndexMaxInlineSize&quot; value=&quot;211&quot;/&gt;\n            &lt;property name=&quot;affinity&quot;&gt;\n              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\n                  &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\n\n                &lt;property name=&quot;affinityBackupFilter&quot;&gt;\n                          &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\n                            &lt;constructor-arg&gt;\n                                                  &lt;array value-type=&quot;java.lang.String&quot;&gt;\n                                                  &lt;value&gt;RACK_ID&lt;/value&gt;\n                                                     &lt;/array&gt;\n                             &lt;/constructor-arg&gt;\n                          &lt;/bean&gt;\n                &lt;/property&gt;\n\n              &lt;/bean&gt;\n            &lt;/property&gt;\n              &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\n                &lt;bean class=&quot;javax.cache.expiry.CreatedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\n                  &lt;constructor-arg&gt;\n                    &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\n                      &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\n                      &lt;constructor-arg value=&quot;4&quot;/&gt;\n                    &lt;/bean&gt;\n                  &lt;/constructor-arg&gt;\n                &lt;/bean&gt;\n              &lt;/property&gt;\n          &lt;/bean&gt;\n          &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\n                class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\n              &lt;property name=&quot;name&quot; value=&quot;inputExceptionsCacheTemplate*&quot;/&gt;\n              &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\n              &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\n              &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\n              &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.input.exception&quot;/&gt;\n              &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\n              &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\n              &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\n              &lt;property name=&quot;readFromBackup&quot; value=&quot;false&quot;/&gt;\n            &lt;property name=&quot;affinity&quot;&gt;\n              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\n                  &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\n\n                &lt;property name=&quot;affinityBackupFilter&quot;&gt;\n                          &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\n                            &lt;constructor-arg&gt;\n                                                  &lt;array value-type=&quot;java.lang.String&quot;&gt;\n                                                  &lt;value&gt;RACK_ID&lt;/value&gt;\n                                                     &lt;/array&gt;\n                             &lt;/constructor-arg&gt;\n                          &lt;/bean&gt;\n                &lt;/property&gt;\n\n              &lt;/bean&gt;\n            &lt;/property&gt;\n              &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\n                &lt;bean class=&quot;javax.cache.expiry.CreatedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\n                  &lt;constructor-arg&gt;\n                    &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\n                      &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\n                      &lt;constructor-arg value=&quot;15&quot;/&gt;\n                    &lt;/bean&gt;\n                  &lt;/constructor-arg&gt;\n                &lt;/bean&gt;\n              &lt;/property&gt;\n          &lt;/bean&gt;\n          &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\n                class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\n              &lt;property name=&quot;name&quot; value=&quot;outputDataCacheTemplate*&quot;/&gt;\n              &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\n              &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\n              &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\n              &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.output&quot;/&gt;\n              &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\n              &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\n              &lt;property name=&quot;sqlSchema&quot; value=&quot;&quot;/&gt;\n              &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\n            &lt;property name=&quot;affinity&quot;&gt;\n              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\n                  &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\n\n                &lt;property name=&quot;affinityBackupFilter&quot;&gt;\n                          &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\n                            &lt;constructor-arg&gt;\n                                                  &lt;array value-type=&quot;java.lang.String&quot;&gt;\n                                                  &lt;value&gt;RACK_ID&lt;/value&gt;\n                                                     &lt;/array&gt;\n                             &lt;/constructor-arg&gt;\n                          &lt;/bean&gt;\n                &lt;/property&gt;\n\n              &lt;/bean&gt;\n            &lt;/property&gt;\n              &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\n                &lt;bean class=&quot;javax.cache.expiry.CreatedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\n                  &lt;constructor-arg&gt;\n                    &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\n                      &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\n                      &lt;constructor-arg value=&quot;450&quot;/&gt;\n                    &lt;/bean&gt;\n                  &lt;/constructor-arg&gt;\n                &lt;/bean&gt;\n              &lt;/property&gt;\n          &lt;/bean&gt;\n          &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\n                class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\n              &lt;property name=&quot;name&quot; value=&quot;reconAuditDataCacheTemplate*&quot;/&gt;\n              &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\n              &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\n              &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\n              &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.referencedata&quot;/&gt;\n              &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\n              &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\n              &lt;property name=&quot;sqlSchema&quot; value=&quot;&quot;/&gt;\n              &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\n            &lt;property name=&quot;affinity&quot;&gt;\n              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\n                  &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\n\n                &lt;property name=&quot;affinityBackupFilter&quot;&gt;\n                          &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\n                            &lt;constructor-arg&gt;\n                                                  &lt;array value-type=&quot;java.lang.String&quot;&gt;\n                                                  &lt;value&gt;RACK_ID&lt;/value&gt;\n                                                     &lt;/array&gt;\n                             &lt;/constructor-arg&gt;\n                          &lt;/bean&gt;\n                &lt;/property&gt;\n\n              &lt;/bean&gt;\n            &lt;/property&gt;\n          &lt;/bean&gt;\n          &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\n                class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\n              &lt;property name=&quot;name&quot; value=&quot;fileDataCacheTemplate*&quot;/&gt;\n              &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\n              &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\n              &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\n              &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.input&quot;/&gt;\n              &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\n              &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\n              &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\n              &lt;property name=&quot;queryParallelism&quot; value=&quot;4&quot;/&gt;\n              &lt;property name=&quot;eagerTtl&quot; value=&quot;true&quot;/&gt;\n            &lt;property name=&quot;affinity&quot;&gt;\n              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\n                  &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\n\n                &lt;property name=&quot;affinityBackupFilter&quot;&gt;\n                          &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\n                            &lt;constructor-arg&gt;\n                                                  &lt;array value-type=&quot;java.lang.String&quot;&gt;\n                                                  &lt;value&gt;RACK_ID&lt;/value&gt;\n                                                     &lt;/array&gt;\n                             &lt;/constructor-arg&gt;\n                          &lt;/bean&gt;\n                &lt;/property&gt;\n\n              &lt;/bean&gt;\n            &lt;/property&gt;\n              &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\n                &lt;bean class=&quot;javax.cache.expiry.CreatedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\n                  &lt;constructor-arg&gt;\n                    &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\n                      &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\n                      &lt;constructor-arg value=&quot;5&quot;/&gt;\n                    &lt;/bean&gt;\n                  &lt;/constructor-arg&gt;\n                &lt;/bean&gt;\n              &lt;/property&gt;\n          &lt;/bean&gt;\n          &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\n                class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\n              &lt;property name=&quot;name&quot; value=&quot;shortLivedReferenceDataTemplate*&quot;/&gt;\n              &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\n              &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\n              &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\n              &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.input.exception&quot;/&gt;\n              &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\n              &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\n              &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\n              &lt;property name=&quot;managementEnabled&quot; value=&quot;true&quot;/&gt;\n            &lt;property name=&quot;affinity&quot;&gt;\n              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\n                  &lt;property name=&quot;partitions&quot; value=&quot;64&quot;/&gt;\n\n                &lt;property name=&quot;affinityBackupFilter&quot;&gt;\n                          &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\n                            &lt;constructor-arg&gt;\n                                                  &lt;array value-type=&quot;java.lang.String&quot;&gt;\n                                                  &lt;value&gt;RACK_ID&lt;/value&gt;\n                                                     &lt;/array&gt;\n                             &lt;/constructor-arg&gt;\n                          &lt;/bean&gt;\n                &lt;/property&gt;\n\n              &lt;/bean&gt;\n            &lt;/property&gt;\n              &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\n                &lt;bean class=&quot;javax.cache.expiry.CreatedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\n                  &lt;constructor-arg&gt;\n                    &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\n                      &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\n                      &lt;constructor-arg value=&quot;2&quot;/&gt;\n                    &lt;/bean&gt;\n                  &lt;/constructor-arg&gt;\n                &lt;/bean&gt;\n              &lt;/property&gt;\n          &lt;/bean&gt;\n\n      &lt;/list&gt;\n    &lt;/property&gt;\n\n    &lt;property name=&quot;sqlSchemas&quot;&gt;\n      &lt;list&gt;\n        &lt;value&gt;dataInput&lt;/value&gt;\n      &lt;/list&gt;\n    &lt;/property&gt;\n\n  &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n"},{"tags":["java","http-post","spring-webflux","rsocket"],"comments":[{"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"score":0,"creation_date":1673038170,"post_id":75020476,"comment_id":132415593,"body_markdown":"can you provide a small reproducer ?","body":"can you provide a small reproducer ?"}],"owner":{"account_id":13939282,"reputation":101,"user_id":10065622,"display_name":"Kaustubh Dixit"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672932052,"creation_date":1672931119,"question_id":75020476,"body_markdown":"I want the functionality similar to HTTP POST using Rsocket. Using Rsocket&#39;s request/response pattern, the data(image file and text) needs to be send and confirmation will be sent back to requester. \r\n\r\nI tried to create a simple CustomData class to test :\r\n\r\nRSocket Requester : \r\n\r\n```\r\n            RSocketRequester req = RSocketRequester.builder()\r\n                .websocket(URI.create(&quot;ws://localhost:7000/rsocket&quot;));\r\n\r\n            req.route(&quot;message&quot;)\r\n                .data(Mono.just(new CustomData(&quot;name&quot;, 12)), CustomData.class)\r\n                .retrieveMono(String.class).subscribe((value) -&gt; {\r\n                    System.out.println(value);\r\n                });\r\n```\r\n\r\nMessage Handler:\r\n\r\n```\r\n        @MessageMapping(&quot;message&quot;)\r\n        public Mono&lt;String&gt; response(@Payload CustomData cData) {\r\n            return Mono.just(&quot;data received!&quot;);\r\n        }\r\n```\r\n\r\nI am getting this exception : \r\n```\r\njava.lang.IllegalArgumentException: No encoder for com.demo1.demo.customdata.CustomData\r\n```\r\n\r\nCan anyone please provide an example to fulfil this?\r\n\r\n","title":"How to send form data(like HTTP POST) containing image and text via Rsocket?","body":"<p>I want the functionality similar to HTTP POST using Rsocket. Using Rsocket's request/response pattern, the data(image file and text) needs to be send and confirmation will be sent back to requester.</p>\n<p>I tried to create a simple CustomData class to test :</p>\n<p>RSocket Requester :</p>\n<pre><code>            RSocketRequester req = RSocketRequester.builder()\n                .websocket(URI.create(&quot;ws://localhost:7000/rsocket&quot;));\n\n            req.route(&quot;message&quot;)\n                .data(Mono.just(new CustomData(&quot;name&quot;, 12)), CustomData.class)\n                .retrieveMono(String.class).subscribe((value) -&gt; {\n                    System.out.println(value);\n                });\n</code></pre>\n<p>Message Handler:</p>\n<pre><code>        @MessageMapping(&quot;message&quot;)\n        public Mono&lt;String&gt; response(@Payload CustomData cData) {\n            return Mono.just(&quot;data received!&quot;);\n        }\n</code></pre>\n<p>I am getting this exception :</p>\n<pre><code>java.lang.IllegalArgumentException: No encoder for com.demo1.demo.customdata.CustomData\n</code></pre>\n<p>Can anyone please provide an example to fulfil this?</p>\n"},{"tags":["java","xml","jaxb"],"answers":[{"tags":[],"owner":{"account_id":162425,"reputation":148009,"user_id":383861,"display_name":"bdoughan"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1380033431,"creation_date":1380033042,"answer_id":18984458,"question_id":18983687,"body_markdown":"By default a [**JAXB (JSR-222)**][1] implementation will not marshal an attribute/element for null values.  This will be true for the following field in your Java model.\r\n\r\n    @XmlElement(name = &quot;Val1&quot;, required = true)\r\n    protected BigDecimal val1;\r\n\r\nYou can override this behaviour by specifying `nillable=true` on the `@XmlElement` annotation like you have done here:\r\n\r\n    @XmlElement(name = &quot;Val2&quot;, required = true, nillable = true)\r\n    protected BigDecimal val2;\r\n\r\nThis will cause the `xsi:nil=&quot;true&quot;` attribute to be leverage:\r\n\r\n    &lt;Val2 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:nil=&quot;true&quot;/&gt;\r\n\r\nFor more information:\r\n\r\n  - http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html\r\n\r\n---\r\n\r\n## Java Model\r\n\r\n**PersonTraining**\r\n\r\nSince you are annotating the `fields` you should make sure you specify `@XmlAccessorType(XmlAccessType.FIELD)` at the class or package level (see:  http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html).\r\n\r\n    import java.math.BigDecimal;\r\n    import javax.xml.bind.annotation.*;\r\n    import javax.xml.datatype.XMLGregorianCalendar;\r\n    \r\n    @XmlRootElement\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    public class PersonTraining {\r\n    \r\n        @XmlElement(name = &quot;Val1&quot;, required = true)\r\n        protected BigDecimal val1;\r\n        @XmlElement(name = &quot;Val2&quot;, required = true, nillable = true)\r\n        protected BigDecimal val2;\r\n        @XmlElement(name = &quot;Val3&quot;, required = true, nillable = true)\r\n        @XmlSchemaType(name = &quot;dateTime&quot;)\r\n        protected XMLGregorianCalendar val3;\r\n    \r\n    }\r\n\r\n## Demo Code\r\n\r\n**Demo**\r\n\r\n    import javax.xml.bind.*;\r\n    \r\n    public class Demo {\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            JAXBContext jc = JAXBContext.newInstance(PersonTraining.class);\r\n            \r\n            PersonTraining pt = new PersonTraining();\r\n            \r\n            Marshaller marshaller = jc.createMarshaller();\r\n            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\r\n            marshaller.marshal(pt, System.out);\r\n        }\r\n    \r\n    }\r\n\r\n**Output**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n    &lt;personTraining&gt;\r\n        &lt;Val2 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:nil=&quot;true&quot;/&gt;\r\n        &lt;Val3 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:nil=&quot;true&quot;/&gt;\r\n    &lt;/personTraining&gt;\r\n\r\n\r\n  [1]: http://jcp.org/en/jsr/detail?id=222","title":"JAXB Marshaller does not have elements whos value is null","body":"<p>By default a <a href=\"http://jcp.org/en/jsr/detail?id=222\" rel=\"noreferrer\"><strong>JAXB (JSR-222)</strong></a> implementation will not marshal an attribute/element for null values.  This will be true for the following field in your Java model.</p>\n\n<pre><code>@XmlElement(name = \"Val1\", required = true)\nprotected BigDecimal val1;\n</code></pre>\n\n<p>You can override this behaviour by specifying <code>nillable=true</code> on the <code>@XmlElement</code> annotation like you have done here:</p>\n\n<pre><code>@XmlElement(name = \"Val2\", required = true, nillable = true)\nprotected BigDecimal val2;\n</code></pre>\n\n<p>This will cause the <code>xsi:nil=\"true\"</code> attribute to be leverage:</p>\n\n<pre><code>&lt;Val2 xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:nil=\"true\"/&gt;\n</code></pre>\n\n<p>For more information:</p>\n\n<ul>\n<li><a href=\"http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html\" rel=\"noreferrer\">http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html</a></li>\n</ul>\n\n<hr>\n\n<h2>Java Model</h2>\n\n<p><strong>PersonTraining</strong></p>\n\n<p>Since you are annotating the <code>fields</code> you should make sure you specify <code>@XmlAccessorType(XmlAccessType.FIELD)</code> at the class or package level (see:  <a href=\"http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html\" rel=\"noreferrer\">http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html</a>).</p>\n\n<pre><code>import java.math.BigDecimal;\nimport javax.xml.bind.annotation.*;\nimport javax.xml.datatype.XMLGregorianCalendar;\n\n@XmlRootElement\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class PersonTraining {\n\n    @XmlElement(name = \"Val1\", required = true)\n    protected BigDecimal val1;\n    @XmlElement(name = \"Val2\", required = true, nillable = true)\n    protected BigDecimal val2;\n    @XmlElement(name = \"Val3\", required = true, nillable = true)\n    @XmlSchemaType(name = \"dateTime\")\n    protected XMLGregorianCalendar val3;\n\n}\n</code></pre>\n\n<h2>Demo Code</h2>\n\n<p><strong>Demo</strong></p>\n\n<pre><code>import javax.xml.bind.*;\n\npublic class Demo {\n\n    public static void main(String[] args) throws Exception {\n        JAXBContext jc = JAXBContext.newInstance(PersonTraining.class);\n\n        PersonTraining pt = new PersonTraining();\n\n        Marshaller marshaller = jc.createMarshaller();\n        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\n        marshaller.marshal(pt, System.out);\n    }\n\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;personTraining&gt;\n    &lt;Val2 xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:nil=\"true\"/&gt;\n    &lt;Val3 xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:nil=\"true\"/&gt;\n&lt;/personTraining&gt;\n</code></pre>\n"}],"owner":{"account_id":1580087,"reputation":8933,"user_id":1465623,"accept_rate":84,"display_name":"Rahul Agrawal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44278,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":18984458,"answer_count":1,"score":14,"last_activity_date":1672931976,"creation_date":1380031043,"question_id":18983687,"body_markdown":"When I marshall a java object using JAXB Marshaller, the marshaller does not create empty elements for null files in the java object. For example, I have a following java object:\r\n\r\n\r\n    public class PersonTraining {\r\n    \r\n        @XmlElement(name = &quot;Val1&quot;, required = true)\r\n        protected BigDecimal val1;\r\n        @XmlElement(name = &quot;Val2&quot;, required = true, nillable = true)\r\n        protected BigDecimal val2;\r\n        @XmlElement(name = &quot;Val3&quot;, required = true, nillable = true)\r\n        @XmlSchemaType(name = &quot;dateTime&quot;)\r\n        protected XMLGregorianCalendar val3;\r\n    }\r\n\r\nWhen I take an instance of this object, and marshall into an XML, I get the following (This is beacuse I did not set the value for Val2):\r\n\r\n    &lt;PersonTraining&gt;\r\n          &lt;Val1&gt;1&lt;/Val1&gt;\r\n           &lt;Val3&gt;2010-01-01T00:00:00.0-05:00&lt;/Val3&gt;\r\n     &lt;/PersonTraining&gt;\r\n\r\nHowever, I had expected hte following result from the marshalling operation (Infact, I specifically need &lt;Val2&gt; element as well so that the XML can be validated against the XSD)\r\n\r\n    &lt;PersonTraining&gt;\r\n          &lt;Val1&gt;1&lt;/Val1&gt;\r\n          &lt;Val2&gt;&lt;/Val2&gt;\r\n           &lt;Val3&gt;2010-01-01T00:00:00.0-05:00&lt;/Val3&gt;\r\n     &lt;/PersonTraining&gt;\r\n\r\nPlease let me know what option I would need to set so that the null value in the object attributes can ALSO be marshalled, and returned as empty/null elements.\r\n\r\n\r\nHere is the marshalling code:\r\n\r\n            \r\n\r\n    \r\n\r\n    StringWriter sw = new StringWriter();\r\n    JAXBContext jc = JAXBContext.newInstance(&quot;person_training&quot;);   \r\n    Marshaller m = jc.createMarshaller();\r\n    m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);\r\n    m.marshal(ptl, sw);\r\n\r\n","title":"JAXB Marshaller does not have elements whos value is null","body":"<p>When I marshall a java object using JAXB Marshaller, the marshaller does not create empty elements for null files in the java object. For example, I have a following java object:</p>\n\n<pre><code>public class PersonTraining {\n\n    @XmlElement(name = \"Val1\", required = true)\n    protected BigDecimal val1;\n    @XmlElement(name = \"Val2\", required = true, nillable = true)\n    protected BigDecimal val2;\n    @XmlElement(name = \"Val3\", required = true, nillable = true)\n    @XmlSchemaType(name = \"dateTime\")\n    protected XMLGregorianCalendar val3;\n}\n</code></pre>\n\n<p>When I take an instance of this object, and marshall into an XML, I get the following (This is beacuse I did not set the value for Val2):</p>\n\n<pre><code>&lt;PersonTraining&gt;\n      &lt;Val1&gt;1&lt;/Val1&gt;\n       &lt;Val3&gt;2010-01-01T00:00:00.0-05:00&lt;/Val3&gt;\n &lt;/PersonTraining&gt;\n</code></pre>\n\n<p>However, I had expected hte following result from the marshalling operation (Infact, I specifically need  element as well so that the XML can be validated against the XSD)</p>\n\n<pre><code>&lt;PersonTraining&gt;\n      &lt;Val1&gt;1&lt;/Val1&gt;\n      &lt;Val2&gt;&lt;/Val2&gt;\n       &lt;Val3&gt;2010-01-01T00:00:00.0-05:00&lt;/Val3&gt;\n &lt;/PersonTraining&gt;\n</code></pre>\n\n<p>Please let me know what option I would need to set so that the null value in the object attributes can ALSO be marshalled, and returned as empty/null elements.</p>\n\n<p>Here is the marshalling code:</p>\n\n<pre><code>StringWriter sw = new StringWriter();\nJAXBContext jc = JAXBContext.newInstance(\"person_training\");   \nMarshaller m = jc.createMarshaller();\nm.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);\nm.marshal(ptl, sw);\n</code></pre>\n"},{"tags":["java","arrays","loops","if-statement","return"],"comments":[{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":1,"creation_date":1672753626,"post_id":74994201,"comment_id":132342138,"body_markdown":"You need to create a comparator that compares `Person` objects by birthYear. That&#39;s the best solution. Other solution is brute force. Sort by getting the age year and swap (like a bubblesort).","body":"You need to create a comparator that compares <code>Person</code> objects by birthYear. That&#39;s the best solution. Other solution is brute force. Sort by getting the age year and swap (like a bubblesort)."},{"owner":{"account_id":1475,"reputation":533754,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1672754365,"post_id":74994201,"comment_id":132342389,"body_markdown":"@hfontanez Sorting is overkill. It&#39;s simpler and more efficient to iterate through the array and keep track of the oldest person so far.","body":"@hfontanez Sorting is overkill. It&#39;s simpler and more efficient to iterate through the array and keep track of the oldest person so far."},{"owner":{"account_id":1475,"reputation":533754,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1672754517,"post_id":74994201,"comment_id":132342438,"body_markdown":"The approach outlined at the beginning of the last paragraph is sound. So please show us what you have tried. Not sure what you mean by &quot;use external method calls&quot;. What would you need them for? You have all the information you need right there in your `Person` class.","body":"The approach outlined at the beginning of the last paragraph is sound. So please show us what you have tried. Not sure what you mean by &quot;use external method calls&quot;. What would you need them for? You have all the information you need right there in your <code>Person</code> class."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1672754859,"post_id":74994201,"comment_id":132342544,"body_markdown":"@KonradRudolph I never said that sorting was an optimal solution. In fact, you seem to ignore that my initial recommendation was to create a comparator AND that I mentioned it was the best solution.","body":"@KonradRudolph I never said that sorting was an optimal solution. In fact, you seem to ignore that my initial recommendation was to create a comparator AND that I mentioned it was the best solution."},{"owner":{"account_id":1475,"reputation":533754,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1672754979,"post_id":74994201,"comment_id":132342576,"body_markdown":"@hfontanez My comment didn&#39;t imply that you said it was the best solution; but why mention it at all? In fact, creating a comparator is *also* overkill for OP (but I agree that in real-world code it would *usually* be the best solution). Given their level, it&#39;s best to have a dumb, manual `for` loop that compares the ages in each iteration.","body":"@hfontanez My comment didn&#39;t imply that you said it was the best solution; but why mention it at all? In fact, creating a comparator is <i>also</i> overkill for OP (but I agree that in real-world code it would <i>usually</i> be the best solution). Given their level, it&#39;s best to have a dumb, manual <code>for</code> loop that compares the ages in each iteration."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1672768316,"post_id":74994201,"comment_id":132347072,"body_markdown":"I suggest to change (if you can) the `birthYear` variable name to `birthDate` and change its datatype to be `LocalDate`. You can still use g00se solution to figure out the eldest `Person`.","body":"I suggest to change (if you can) the <code>birthYear</code> variable name to <code>birthDate</code> and change its datatype to be <code>LocalDate</code>. You can still use g00se solution to figure out the eldest <code>Person</code>."}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672754596,"creation_date":1672754596,"answer_id":74994423,"question_id":74994201,"body_markdown":"Or you could use a stream approach:\r\n\r\n        Optional&lt;Person&gt; eldest = Arrays.stream(allPersons)\r\n            .collect(Collectors.maxBy((p1, p2) -&gt; Integer.compare(p1.getAge(), p2.getAge())));\r\n        System.out.println(&quot;Eldest is &quot; + eldest.get());\r\n\r\nBut you might want to do a simple iteration, keeping track of the current oldest, as has been suggested\r\n\r\n","title":"Find highest age of person in Array and return name","body":"<p>Or you could use a stream approach:</p>\n<pre><code>    Optional&lt;Person&gt; eldest = Arrays.stream(allPersons)\n        .collect(Collectors.maxBy((p1, p2) -&gt; Integer.compare(p1.getAge(), p2.getAge())));\n    System.out.println(&quot;Eldest is &quot; + eldest.get());\n</code></pre>\n<p>But you might want to do a simple iteration, keeping track of the current oldest, as has been suggested</p>\n"},{"tags":[],"owner":{"account_id":13542195,"reputation":139,"user_id":9769594,"display_name":"warmCabin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672780403,"creation_date":1672780403,"answer_id":74998696,"question_id":74994201,"body_markdown":"This should get you started.\r\n\r\n```java\r\npublic String nameOfTheOldest()\r\n{\r\n    Person oldest = allPersons[0];\r\n    for (int i = 1; i &lt; allPersons.length; i++)\r\n    {\r\n        if (allPersons[i] ...)\r\n            ...\r\n    }\r\n    return ...;\r\n}\r\n```","title":"Find highest age of person in Array and return name","body":"<p>This should get you started.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String nameOfTheOldest()\n{\n    Person oldest = allPersons[0];\n    for (int i = 1; i &lt; allPersons.length; i++)\n    {\n        if (allPersons[i] ...)\n            ...\n    }\n    return ...;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27421106,"reputation":1,"user_id":20919521,"display_name":"Hexatronic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672849087,"creation_date":1672849059,"answer_id":75008268,"question_id":74994201,"body_markdown":"I tried this. Returns the \r\nage as a string but not the name. Also i get &quot;Exception occurred&quot; if the amount\r\nof Person objects in the array do not match the length of the array when i use the method.  \r\n\r\nCode:\r\n```\r\n      public String nameOfTheOldest() {\r\n        // oldest == earliest birthYear.\r\n            \r\n            String str= &quot;&quot;;\r\n            Person oldest = allPersons[0];\r\n            int oldestINT = oldest.birthYear();\r\n    for (int i = 1; i &lt; allPersons.length; i++)\r\n    {     \r\n        \r\n        Person maybeOldest = allPersons[i];\r\n        int perhapsOldest = maybeOldest.birthYear();\r\n        if (perhapsOldest &lt; oldestINT)\r\n            oldestINT = perhapsOldest;\r\n            \r\n            str = String.valueOf(oldestINT);\r\n            \r\n    }\r\n    return str;\r\n}\r\n```","title":"Find highest age of person in Array and return name","body":"<p>I tried this. Returns the\nage as a string but not the name. Also i get &quot;Exception occurred&quot; if the amount\nof Person objects in the array do not match the length of the array when i use the method.</p>\n<p>Code:</p>\n<pre><code>      public String nameOfTheOldest() {\n        // oldest == earliest birthYear.\n            \n            String str= &quot;&quot;;\n            Person oldest = allPersons[0];\n            int oldestINT = oldest.birthYear();\n    for (int i = 1; i &lt; allPersons.length; i++)\n    {     \n        \n        Person maybeOldest = allPersons[i];\n        int perhapsOldest = maybeOldest.birthYear();\n        if (perhapsOldest &lt; oldestINT)\n            oldestINT = perhapsOldest;\n            \n            str = String.valueOf(oldestINT);\n            \n    }\n    return str;\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user20937564"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672931960,"creation_date":1672931960,"answer_id":75020656,"question_id":74994201,"body_markdown":"Use below code -\r\n\r\n        public String nameOfTheOldest() {\r\n        Person oldest = allPersons[0];\r\n        for (int i = 1; i &lt; allPersons.length; i++)\r\n        {\r\n            Person p = allPersons[i];\r\n            if (p.birthYear() &lt; oldest.birthYear()) {\r\n                oldest = p;\r\n            }\r\n        }\r\n        return oldest.name();\r\n    }\r\n","title":"Find highest age of person in Array and return name","body":"<p>Use below code -</p>\n<pre><code>    public String nameOfTheOldest() {\n    Person oldest = allPersons[0];\n    for (int i = 1; i &lt; allPersons.length; i++)\n    {\n        Person p = allPersons[i];\n        if (p.birthYear() &lt; oldest.birthYear()) {\n            oldest = p;\n        }\n    }\n    return oldest.name();\n}\n</code></pre>\n"}],"owner":{"account_id":27421106,"reputation":1,"user_id":20919521,"display_name":"Hexatronic"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1672931960,"creation_date":1672753438,"question_id":74994201,"body_markdown":"Task: your task is to expand the class `PersonRegister` through coding the method `nameOftheOldest()`. The methods task is to find and return the name of the person that is the oldest in the register (that is the oldest of those stored in the list `allPersons` array).\r\n\r\nCode of the class looks like this:\r\n\r\n```\r\npublic class PersonRegister\r\n{\r\n    // instance variables - replace the example below with your own\r\n    private Person[] allPersons;\r\n\r\n    /**\r\n     * Constructor for objects of class PersonRegister\r\n     */\r\n    public PersonRegister(int numberOfPersons)\r\n    {\r\n        // initialise instance variables\r\n        this.allPersons = new Person[numberOfPersons];\r\n    }\r\n    \r\n    public void registreraPerson(int index, Person aPerson)\r\n    {\r\n        \r\n        allPersons[index] = aPerson;\r\n        \r\n    }\r\n}\r\n```\r\n\r\nThere is another class called Person in the program that looks like this:\r\n\r\n```\r\npublic class Person\r\n{\r\n    // instance variables - replace the example below with your own\r\n    private String name;\r\n    private int birthYear;\r\n\r\n    /**\r\n     * Constructor for objects of class ExperimentJavaLoops\r\n     */\r\n    public Person(String name, int birthYear)\r\n    {\r\n        // initialise instance variables\r\n        this.name = name;\r\n        this.birthYear = birthYear;\r\n    }\r\n    \r\n    public String getName()\r\n    {\r\n        return name;\r\n        \r\n    }\r\n    \r\n    public int birthYear()\r\n    {\r\n        return birthYear;\r\n    }\r\n    \r\n    public void setName(String name)\r\n    {\r\n        this.name = name;\r\n        \r\n    }\r\n    \r\n    public void setbirthYear(int birthYear)\r\n    {\r\n        \r\n        this.birthYear = birthYear;\r\n        \r\n    }\r\n}\r\n```\r\n\r\nGoogled this a lot, read literature and tried to code it but cant find a solution. I think I&#39;m supposed to loop through the array and compare values inside the loop through an if-statement. Then also use external method calls to get the name and birthyear (oldest will be the person with lowest birthyear, naturally). And it should be converted to String and returned in order to return name? Confused. Very new to programming and a bit more used to ArrayLists than Arrays. ","title":"Find highest age of person in Array and return name","body":"<p>Task: your task is to expand the class <code>PersonRegister</code> through coding the method <code>nameOftheOldest()</code>. The methods task is to find and return the name of the person that is the oldest in the register (that is the oldest of those stored in the list <code>allPersons</code> array).</p>\n<p>Code of the class looks like this:</p>\n<pre><code>public class PersonRegister\n{\n    // instance variables - replace the example below with your own\n    private Person[] allPersons;\n\n    /**\n     * Constructor for objects of class PersonRegister\n     */\n    public PersonRegister(int numberOfPersons)\n    {\n        // initialise instance variables\n        this.allPersons = new Person[numberOfPersons];\n    }\n    \n    public void registreraPerson(int index, Person aPerson)\n    {\n        \n        allPersons[index] = aPerson;\n        \n    }\n}\n</code></pre>\n<p>There is another class called Person in the program that looks like this:</p>\n<pre><code>public class Person\n{\n    // instance variables - replace the example below with your own\n    private String name;\n    private int birthYear;\n\n    /**\n     * Constructor for objects of class ExperimentJavaLoops\n     */\n    public Person(String name, int birthYear)\n    {\n        // initialise instance variables\n        this.name = name;\n        this.birthYear = birthYear;\n    }\n    \n    public String getName()\n    {\n        return name;\n        \n    }\n    \n    public int birthYear()\n    {\n        return birthYear;\n    }\n    \n    public void setName(String name)\n    {\n        this.name = name;\n        \n    }\n    \n    public void setbirthYear(int birthYear)\n    {\n        \n        this.birthYear = birthYear;\n        \n    }\n}\n</code></pre>\n<p>Googled this a lot, read literature and tried to code it but cant find a solution. I think I'm supposed to loop through the array and compare values inside the loop through an if-statement. Then also use external method calls to get the name and birthyear (oldest will be the person with lowest birthyear, naturally). And it should be converted to String and returned in order to return name? Confused. Very new to programming and a bit more used to ArrayLists than Arrays.</p>\n"},{"tags":["java","svg","batik"],"comments":[{"owner":{"display_name":"user19145409"},"score":0,"creation_date":1672905219,"post_id":75014971,"comment_id":132379297,"body_markdown":"are you using maven ?","body":"are you using maven ?"},{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":0,"creation_date":1672907521,"post_id":75014971,"comment_id":132379873,"body_markdown":"Please [don&#39;t upload text as image](https://meta.stackoverflow.com/a/285557/13447). Edit your question to contain all the information in text form - consider to use the editor&#39;s formatting options. Also see [ask]: A screenshot of an IDE is not a proper problem description. Check [mcve] for a description of what is required to help, and what will help others coming after you finding the same, or a similar problem and its solution","body":"Please <a href=\"https://meta.stackoverflow.com/a/285557/13447\">don&#39;t upload text as image</a>. Edit your question to contain all the information in text form - consider to use the editor&#39;s formatting options. Also see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>: A screenshot of an IDE is not a proper problem description. Check <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for a description of what is required to help, and what will help others coming after you finding the same, or a similar problem and its solution"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1672908413,"post_id":75014971,"comment_id":132380136,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":9067781,"reputation":30720,"user_id":6752050,"display_name":"273K"},"score":0,"creation_date":1672931804,"post_id":75014971,"comment_id":132388272,"body_markdown":"The tag [tag:STL] is wrong here. Read the descriptions while choosing tags.","body":"The tag <a href=\"https://stackoverflow.com/questions/tagged/stl\">stl</a> is wrong here. Read the descriptions while choosing tags."}],"answers":[{"tags":[],"owner":{"display_name":"user19145409"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1672905424,"creation_date":1672905424,"answer_id":75015329,"question_id":75014971,"body_markdown":"If you are using maven :\r\n\r\nFor For Apache Batik:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;\r\n      &lt;artifactId&gt;batik-all&lt;/artifactId&gt;\r\n      &lt;version&gt;1.13&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nFor For OpenPnP:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.openpnp&lt;/groupId&gt;\r\n      &lt;artifactId&gt;openpnp-lib&lt;/artifactId&gt;\r\n      &lt;version&gt;2.2.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nApply the import as required. \r\n\r\n    import org.apache.batik.dom.svg.SVGDOMImplementation;\r\n    import org.openpnp.model.LengthUnit;\r\n\r\n \r\nIf you are not using maven:\r\n\r\n1.Download the latest version of the libraries from the Apache Batik website (https://xmlgraphics.apache.org/batik/) and the OpenPnP website (http://openpnp.org/).\r\n\r\n2.Add the libraries to your project&#39;s classpath. This will typically involve adding the libraries to your project&#39;s build path or referencing them in your build tool&#39;s configuration files.\r\n\r\nDoing above must help you in general.\r\n","title":"How do I add Apache Batik and OpenePnP libraries in my project","body":"<p>If you are using maven :</p>\n<p>For For Apache Batik:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;\n  &lt;artifactId&gt;batik-all&lt;/artifactId&gt;\n  &lt;version&gt;1.13&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>For For OpenPnP:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.openpnp&lt;/groupId&gt;\n  &lt;artifactId&gt;openpnp-lib&lt;/artifactId&gt;\n  &lt;version&gt;2.2.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Apply the import as required.</p>\n<pre><code>import org.apache.batik.dom.svg.SVGDOMImplementation;\nimport org.openpnp.model.LengthUnit;\n</code></pre>\n<p>If you are not using maven:</p>\n<p>1.Download the latest version of the libraries from the Apache Batik website (<a href=\"https://xmlgraphics.apache.org/batik/\" rel=\"nofollow noreferrer\">https://xmlgraphics.apache.org/batik/</a>) and the OpenPnP website (<a href=\"http://openpnp.org/\" rel=\"nofollow noreferrer\">http://openpnp.org/</a>).</p>\n<p>2.Add the libraries to your project's classpath. This will typically involve adding the libraries to your project's build path or referencing them in your build tool's configuration files.</p>\n<p>Doing above must help you in general.</p>\n"}],"owner":{"account_id":20991485,"reputation":1,"user_id":19630161,"display_name":"Pawan Kumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1672931760,"answer_count":1,"score":-3,"last_activity_date":1672931811,"creation_date":1672903054,"question_id":75014971,"body_markdown":"[Here is problem](https://i.stack.imgur.com/GMtwT.png)\r\n\r\n[Please guide me](https://i.stack.imgur.com/H1IHi.png)\r\n\r\nI tried to add libraries which I download and it didnot work.\r\ncan someone help me to solve this problem","title":"How do I add Apache Batik and OpenePnP libraries in my project","body":"<p><a href=\"https://i.stack.imgur.com/GMtwT.png\" rel=\"nofollow noreferrer\">Here is problem</a></p>\n<p><a href=\"https://i.stack.imgur.com/H1IHi.png\" rel=\"nofollow noreferrer\">Please guide me</a></p>\n<p>I tried to add libraries which I download and it didnot work.\ncan someone help me to solve this problem</p>\n"},{"tags":["java","android","service","permissions","adb"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":1,"creation_date":1672933097,"post_id":75020620,"comment_id":132388804,"body_markdown":"Have you read [this answer](https://stackoverflow.com/a/31386719/150978)? I assume it is the same case here, the service does not make use of the permission, instead it defines that the component using the service requires it.","body":"Have you read <a href=\"https://stackoverflow.com/a/31386719/150978\">this answer</a>? I assume it is the same case here, the service does not make use of the permission, instead it defines that the component using the service requires it."},{"owner":{"account_id":10060184,"reputation":2295,"user_id":7437143,"accept_rate":100,"display_name":"a.t."},"score":0,"creation_date":1672961480,"post_id":75020620,"comment_id":132397361,"body_markdown":"Thank you, it indeed seems related to this error, however, I did not yet understand it well enough to apply that knowledge to start the service with the required permission.","body":"Thank you, it indeed seems related to this error, however, I did not yet understand it well enough to apply that knowledge to start the service with the required permission."}],"owner":{"account_id":10060184,"reputation":2295,"user_id":7437143,"accept_rate":100,"display_name":"a.t."},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":281,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672931795,"creation_date":1672931795,"question_id":75020620,"body_markdown":"## Context\r\nWhile trying to launch a tor service in Orbot, on a rooted phone, I am encountering some difficulties.\r\n\r\nWhen I try to launch the tor connection with:\r\n```\r\nadb shell am startservice -n org.torproject.android/.service.OrbotService\r\n```\r\nI get error:\r\n```\r\nStarting service: Intent { cmp=org.torproject.android/.service.OrbotService }\r\nError: Requires permission android.permission.BIND_VPN_SERVICE\r\n```\r\nYet when I try to set that permission with:\r\n```\r\nadb shell pm grant org.torproject.android android.permission.BIND_VPN_SERVICE\r\n```\r\nIt throws error:\r\n```\r\nSecurity exception: Package org.torproject.android has not requested permission android.permission.BIND_VPN_SERVICE\r\n\r\njava.lang.SecurityException: Package org.torproject.android has not requested permission android.permission.BIND_VPN_SERVICE\r\n\tat com.android.server.pm.permission.BasePermission.enforceDeclaredUsedAndRuntimeOrDevelopment(BasePermission.java:444)\r\n\tat com.android.server.pm.permission.PermissionManagerService.grantRuntimePermission(PermissionManagerService.java:2238)\r\n\tat com.android.server.pm.permission.PermissionManagerService.access$1100(PermissionManagerService.java:122)\r\n\tat com.android.server.pm.permission.PermissionManagerService$PermissionManagerServiceInternalImpl.grantRuntimePermission(PermissionManagerService.java:3239)\r\n\tat com.android.server.pm.PackageManagerService.grantRuntimePermission(PackageManagerService.java:5788)\r\n\tat com.android.server.pm.PackageManagerShellCommand.runGrantRevokePermission(PackageManagerShellCommand.java:1955)\r\n\tat com.android.server.pm.PackageManagerShellCommand.onCommand(PackageManagerShellCommand.java:230)\r\n\tat android.os.ShellCommand.exec(ShellCommand.java:104)\r\n\tat com.android.server.pm.PackageManagerService.onShellCommand(PackageManagerService.java:21952)\r\n\tat android.os.Binder.shellCommand(Binder.java:881)\r\n\tat android.os.Binder.onTransact(Binder.java:765)\r\n\tat android.content.pm.IPackageManager$Stub.onTransact(IPackageManager.java:4876)\r\n\tat com.android.server.pm.PackageManagerService.onTransact(PackageManagerService.java:4049)\r\n\tat android.os.Binder.execTransactInternal(Binder.java:1021)\r\n\tat android.os.Binder.execTransact(Binder.java:994)\r\n```\r\nBased on [this answer](https://stackoverflow.com/a/21767385/7437143) I should create the request in the `AndroidManifest.xml` of the Orbot `.apk` file, however, I am not compiling the apk, the apk is already pre-installed from a store, and I would expect the request for the permission to be stored when I try to launch the service. (Such that it recongises the previous request for permmission when I try to set it).\r\n\r\n## Question\r\nHow can I start the service and set the required permission successfully using `adb`?","title":"Error: Requires permission android.permission.BIND_VPN_SERVICE with Error: Package has not requested permission android.permission.BIND_VPN_SERVICE","body":"<h2>Context</h2>\n<p>While trying to launch a tor service in Orbot, on a rooted phone, I am encountering some difficulties.</p>\n<p>When I try to launch the tor connection with:</p>\n<pre><code>adb shell am startservice -n org.torproject.android/.service.OrbotService\n</code></pre>\n<p>I get error:</p>\n<pre><code>Starting service: Intent { cmp=org.torproject.android/.service.OrbotService }\nError: Requires permission android.permission.BIND_VPN_SERVICE\n</code></pre>\n<p>Yet when I try to set that permission with:</p>\n<pre><code>adb shell pm grant org.torproject.android android.permission.BIND_VPN_SERVICE\n</code></pre>\n<p>It throws error:</p>\n<pre><code>Security exception: Package org.torproject.android has not requested permission android.permission.BIND_VPN_SERVICE\n\njava.lang.SecurityException: Package org.torproject.android has not requested permission android.permission.BIND_VPN_SERVICE\n    at com.android.server.pm.permission.BasePermission.enforceDeclaredUsedAndRuntimeOrDevelopment(BasePermission.java:444)\n    at com.android.server.pm.permission.PermissionManagerService.grantRuntimePermission(PermissionManagerService.java:2238)\n    at com.android.server.pm.permission.PermissionManagerService.access$1100(PermissionManagerService.java:122)\n    at com.android.server.pm.permission.PermissionManagerService$PermissionManagerServiceInternalImpl.grantRuntimePermission(PermissionManagerService.java:3239)\n    at com.android.server.pm.PackageManagerService.grantRuntimePermission(PackageManagerService.java:5788)\n    at com.android.server.pm.PackageManagerShellCommand.runGrantRevokePermission(PackageManagerShellCommand.java:1955)\n    at com.android.server.pm.PackageManagerShellCommand.onCommand(PackageManagerShellCommand.java:230)\n    at android.os.ShellCommand.exec(ShellCommand.java:104)\n    at com.android.server.pm.PackageManagerService.onShellCommand(PackageManagerService.java:21952)\n    at android.os.Binder.shellCommand(Binder.java:881)\n    at android.os.Binder.onTransact(Binder.java:765)\n    at android.content.pm.IPackageManager$Stub.onTransact(IPackageManager.java:4876)\n    at com.android.server.pm.PackageManagerService.onTransact(PackageManagerService.java:4049)\n    at android.os.Binder.execTransactInternal(Binder.java:1021)\n    at android.os.Binder.execTransact(Binder.java:994)\n</code></pre>\n<p>Based on <a href=\"https://stackoverflow.com/a/21767385/7437143\">this answer</a> I should create the request in the <code>AndroidManifest.xml</code> of the Orbot <code>.apk</code> file, however, I am not compiling the apk, the apk is already pre-installed from a store, and I would expect the request for the permission to be stored when I try to launch the service. (Such that it recongises the previous request for permmission when I try to set it).</p>\n<h2>Question</h2>\n<p>How can I start the service and set the required permission successfully using <code>adb</code>?</p>\n"},{"tags":["java","avro"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1672931871,"post_id":75016400,"comment_id":132388299,"body_markdown":"Javadoc says AvroEncode overrides Nullable annotation - https://avro.apache.org/docs/current/api/java/org/apache/avro/reflect/AvroEncode.html Did you try `@Union` with Void and Long?","body":"Javadoc says AvroEncode overrides Nullable annotation - <a href=\"https://avro.apache.org/docs/current/api/java/org/apache/avro/reflect/AvroEncode.html\" rel=\"nofollow noreferrer\">avro.apache.org/docs/current/api/java/org/apache/avro/reflec&zwnj;&#8203;t/&hellip;</a> Did you try <code>@Union</code> with Void and Long?"}],"owner":{"account_id":1527510,"reputation":961,"user_id":1425564,"accept_rate":50,"display_name":"Ruju"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672931767,"creation_date":1672911556,"question_id":75016400,"body_markdown":"I need to allow default &quot;null&quot; value to Date type field.\r\nJava class :\r\n```\r\nclass Test{\r\n@Nullable\r\n@AvroEncode(using=DateAsLongEncoding.class)\r\nprivate Date updatedDate;\r\n}\r\n```\r\nGenerated schema for updatedDate:\r\n```\r\n{\r\n &quot;name&quot;:&quot;updatedDate&quot;,\r\n  &quot;type&quot;:{\r\n      &quot;type&quot;:&quot;long&quot;,\r\n      &quot;CustomEncoding&quot;:&quot;DateAsLongEncoding&quot;\r\n  }\r\n}\r\n```\r\nWhenever try to push the records to kafka it gives following exception whenever updatedDate is null\r\n```\r\nCaused by: java.lang.NullPointerException at org.apache.avro.reflect.DateAsLongEncoding.java\r\n```\r\nHow this field can be configured to nullable?","title":"allow null to &quot;Date&quot; type field encoded with DateAsLongEncoding","body":"<p>I need to allow default &quot;null&quot; value to Date type field.\nJava class :</p>\n<pre><code>class Test{\n@Nullable\n@AvroEncode(using=DateAsLongEncoding.class)\nprivate Date updatedDate;\n}\n</code></pre>\n<p>Generated schema for updatedDate:</p>\n<pre><code>{\n &quot;name&quot;:&quot;updatedDate&quot;,\n  &quot;type&quot;:{\n      &quot;type&quot;:&quot;long&quot;,\n      &quot;CustomEncoding&quot;:&quot;DateAsLongEncoding&quot;\n  }\n}\n</code></pre>\n<p>Whenever try to push the records to kafka it gives following exception whenever updatedDate is null</p>\n<pre><code>Caused by: java.lang.NullPointerException at org.apache.avro.reflect.DateAsLongEncoding.java\n</code></pre>\n<p>How this field can be configured to nullable?</p>\n"},{"tags":["java","apache-kafka","confluent-schema-registry"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672931573,"creation_date":1672931573,"answer_id":75020568,"question_id":75016914,"body_markdown":"The serializers are separated from the core registry module. \r\n\r\nYou&#39;re missing these \r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.confluent&lt;/groupId&gt;\r\n    &lt;artifactId&gt;kafka-json-schema-provider&lt;/artifactId&gt;\r\n    &lt;version&gt;7.3.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.confluent&lt;/groupId&gt;\r\n    &lt;artifactId&gt;kafka-json-schema-serializer&lt;/artifactId&gt;\r\n    &lt;version&gt;7.3.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Confluent Kafka java.lang.ClassNotFoundException: io.confluent.kafka.schemaregistry.json.jackson.Jackson","body":"<p>The serializers are separated from the core registry module.</p>\n<p>You're missing these</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.confluent&lt;/groupId&gt;\n    &lt;artifactId&gt;kafka-json-schema-provider&lt;/artifactId&gt;\n    &lt;version&gt;7.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.confluent&lt;/groupId&gt;\n    &lt;artifactId&gt;kafka-json-schema-serializer&lt;/artifactId&gt;\n    &lt;version&gt;7.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":13832761,"reputation":97,"user_id":12073556,"display_name":"blinkbink"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":467,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75020568,"answer_count":1,"score":0,"last_activity_date":1672931573,"creation_date":1672914031,"question_id":75016914,"body_markdown":"Cause i use ant project, i need lib jar from here [kafka-schema-registry][1], use the jar but got error missing \r\n\r\n    java.lang.ClassNotFoundException: io.confluent.kafka.schemaregistry.json.jackson.Jackson\r\n\r\n\r\n\r\nif i try build with maven project\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/io.confluent/kafka-schema-registry --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.confluent&lt;/groupId&gt;\r\n        &lt;artifactId&gt;kafka-schema-registry&lt;/artifactId&gt;\r\n        &lt;version&gt;7.3.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nthe class `io.confluent.kafka.schemaregistry.json.jackson.Jackson` can be imported\r\n\r\n    import io.confluent.kafka.schemaregistry.json.jackson.Jackson;\r\n\r\nwhy the class missing in .jar ?\r\n\r\n  [1]: https://mvnrepository.com/artifact/io.confluent/kafka-schema-registry/7.3.1\r\n\r\nimport lib :\r\n\r\n    import io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializer;\r\n    import io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializerConfig;\r\n    import org.apache.kafka.clients.producer.KafkaProducer;\r\n    import org.apache.kafka.clients.producer.Producer;\r\n    import org.apache.kafka.clients.producer.ProducerConfig;\r\n    import org.apache.kafka.clients.producer.ProducerRecord;\r\n    import org.apache.kafka.common.serialization.IntegerSerializer;\r\n\r\nConfig :\r\n\r\n    Properties props = new Properties();\r\n    \t\t        props.put(&quot;bootstrap.servers&quot;, url);\r\n    \t\t        props.put(&quot;linger.ms&quot;, 1);\r\n    \t\t        props.put(&quot;max.block.ms&quot;, 10000);\r\n    \t\t        props.put(&quot;group.id&quot;, &quot;billtrust&quot;);\r\n    \t\t        props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, IntegerSerializer.class.getName());\r\n    \t\t        props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, KafkaJsonSchemaSerializer.class.getName());\r\n    \t\t        props.put(KafkaJsonSchemaSerializerConfig.SCHEMA_REGISTRY_URL_CONFIG, &quot;http://localhost:8081&quot;);\r\n    \t\t        Producer&lt;String, Payment&gt; producer = new KafkaProducer&lt;String, Payment&gt;(props);\r\n    \t\t        ProducerRecord&lt;String, Payment&gt; record = new ProducerRecord&lt;String, Payment&gt;(topic, uuid, message);\r\n    \r\n    \t\t        producer.send(record);\r\n\r\ncomplete error log :\r\n\r\n    org.apache.kafka.common.KafkaException: Failed to construct kafka producer\r\n            at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:468)\r\n            at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:291)\r\n            at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:318)\r\n            at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:303)\r\n            at api.kafka.Kafka.sendPayment(Kafka.java:80)\r\n            at apiBiling.Prepaid.TopupPlan.TopupwPlan(TopupPlan.java:382)\r\n            at apiBiling.Prepaid.TopupPlan.execute(TopupPlan.java:86)\r\n            at org.jpublish.action.ActionWrapper.execute(ActionWrapper.java:68)\r\n            at org.jpublish.page.PageInstance.executeActions(PageInstance.java:272)\r\n            at org.jpublish.Page.executeActions(Page.java:245)\r\n            at org.jpublish.servlet.JPublishServlet.doPost(JPublishServlet.java:413)\r\n            at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\r\n            at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n            at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n            at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n            at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n            at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\r\n            at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n            at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n            at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\r\n            at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n            at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n            at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\r\n            at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n            at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)\r\n            at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1722)\r\n            at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n            at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n            at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n            at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n            at java.lang.Thread.run(Thread.java:748)\r\n    Caused by: org.apache.kafka.common.KafkaException: Could not instantiate class io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializer\r\n            at org.apache.kafka.common.utils.Utils.newInstance(Utils.java:396)\r\n            at org.apache.kafka.common.config.AbstractConfig.getConfiguredInstance(AbstractConfig.java:401)\r\n            at org.apache.kafka.common.config.AbstractConfig.getConfiguredInstance(AbstractConfig.java:436)\r\n            at org.apache.kafka.common.config.AbstractConfig.getConfiguredInstance(AbstractConfig.java:421)\r\n            at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:394)\r\n            ... 34 more\r\n    Caused by: java.lang.reflect.InvocationTargetException\r\n            at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n            at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n            at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n            at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n            at org.apache.kafka.common.utils.Utils.newInstance(Utils.java:392)\r\n            ... 38 more\r\n    Caused by: java.lang.NoClassDefFoundError: io/confluent/kafka/schemaregistry/json/jackson/Jackson\r\n            at io.confluent.kafka.serializers.json.AbstractKafkaJsonSchemaSerializer.&lt;init&gt;(AbstractKafkaJsonSchemaSerializer.java:47)\r\n            at io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializer.&lt;init&gt;(KafkaJsonSchemaSerializer.java:41)\r\n            ... 43 more\r\n    Caused by: java.lang.ClassNotFoundException: io.confluent.kafka.schemaregistry.json.jackson.Jackson\r\n            at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1407)\r\n            at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1215)\r\n            ... 45 more\r\n    java.lang.Exception: org.apache.kafka.common.KafkaException: Failed to construct kafka producer\r\n\r\n","title":"Confluent Kafka java.lang.ClassNotFoundException: io.confluent.kafka.schemaregistry.json.jackson.Jackson","body":"<p>Cause i use ant project, i need lib jar from here <a href=\"https://mvnrepository.com/artifact/io.confluent/kafka-schema-registry/7.3.1\" rel=\"nofollow noreferrer\">kafka-schema-registry</a>, use the jar but got error missing</p>\n<pre><code>java.lang.ClassNotFoundException: io.confluent.kafka.schemaregistry.json.jackson.Jackson\n</code></pre>\n<p>if i try build with maven project</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/io.confluent/kafka-schema-registry --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.confluent&lt;/groupId&gt;\n    &lt;artifactId&gt;kafka-schema-registry&lt;/artifactId&gt;\n    &lt;version&gt;7.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>the class <code>io.confluent.kafka.schemaregistry.json.jackson.Jackson</code> can be imported</p>\n<pre><code>import io.confluent.kafka.schemaregistry.json.jackson.Jackson;\n</code></pre>\n<p>why the class missing in .jar ?</p>\n<p>import lib :</p>\n<pre><code>import io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializer;\nimport io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializerConfig;\nimport org.apache.kafka.clients.producer.KafkaProducer;\nimport org.apache.kafka.clients.producer.Producer;\nimport org.apache.kafka.clients.producer.ProducerConfig;\nimport org.apache.kafka.clients.producer.ProducerRecord;\nimport org.apache.kafka.common.serialization.IntegerSerializer;\n</code></pre>\n<p>Config :</p>\n<pre><code>Properties props = new Properties();\n                props.put(&quot;bootstrap.servers&quot;, url);\n                props.put(&quot;linger.ms&quot;, 1);\n                props.put(&quot;max.block.ms&quot;, 10000);\n                props.put(&quot;group.id&quot;, &quot;billtrust&quot;);\n                props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, IntegerSerializer.class.getName());\n                props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, KafkaJsonSchemaSerializer.class.getName());\n                props.put(KafkaJsonSchemaSerializerConfig.SCHEMA_REGISTRY_URL_CONFIG, &quot;http://localhost:8081&quot;);\n                Producer&lt;String, Payment&gt; producer = new KafkaProducer&lt;String, Payment&gt;(props);\n                ProducerRecord&lt;String, Payment&gt; record = new ProducerRecord&lt;String, Payment&gt;(topic, uuid, message);\n\n                producer.send(record);\n</code></pre>\n<p>complete error log :</p>\n<pre><code>org.apache.kafka.common.KafkaException: Failed to construct kafka producer\n        at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:468)\n        at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:291)\n        at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:318)\n        at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:303)\n        at api.kafka.Kafka.sendPayment(Kafka.java:80)\n        at apiBiling.Prepaid.TopupPlan.TopupwPlan(TopupPlan.java:382)\n        at apiBiling.Prepaid.TopupPlan.execute(TopupPlan.java:86)\n        at org.jpublish.action.ActionWrapper.execute(ActionWrapper.java:68)\n        at org.jpublish.page.PageInstance.executeActions(PageInstance.java:272)\n        at org.jpublish.Page.executeActions(Page.java:245)\n        at org.jpublish.servlet.JPublishServlet.doPost(JPublishServlet.java:413)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n        at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1722)\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n        at java.lang.Thread.run(Thread.java:748)\nCaused by: org.apache.kafka.common.KafkaException: Could not instantiate class io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializer\n        at org.apache.kafka.common.utils.Utils.newInstance(Utils.java:396)\n        at org.apache.kafka.common.config.AbstractConfig.getConfiguredInstance(AbstractConfig.java:401)\n        at org.apache.kafka.common.config.AbstractConfig.getConfiguredInstance(AbstractConfig.java:436)\n        at org.apache.kafka.common.config.AbstractConfig.getConfiguredInstance(AbstractConfig.java:421)\n        at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:394)\n        ... 34 more\nCaused by: java.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n        at org.apache.kafka.common.utils.Utils.newInstance(Utils.java:392)\n        ... 38 more\nCaused by: java.lang.NoClassDefFoundError: io/confluent/kafka/schemaregistry/json/jackson/Jackson\n        at io.confluent.kafka.serializers.json.AbstractKafkaJsonSchemaSerializer.&lt;init&gt;(AbstractKafkaJsonSchemaSerializer.java:47)\n        at io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializer.&lt;init&gt;(KafkaJsonSchemaSerializer.java:41)\n        ... 43 more\nCaused by: java.lang.ClassNotFoundException: io.confluent.kafka.schemaregistry.json.jackson.Jackson\n        at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1407)\n        at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1215)\n        ... 45 more\njava.lang.Exception: org.apache.kafka.common.KafkaException: Failed to construct kafka producer\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-kafka"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1672876348,"post_id":75012134,"comment_id":132374569,"body_markdown":"What exactly does microservice B do that needs to happen exactly once? Just sending an email?","body":"What exactly does microservice B do that needs to happen exactly once? Just sending an email?"},{"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1672931480,"post_id":75012134,"comment_id":132388127,"body_markdown":"Consumption is always at least once (or at most once); exactly once is not possible for your scenario; more in my answer.","body":"Consumption is always at least once (or at most once); exactly once is not possible for your scenario; more in my answer."}],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672931441,"creation_date":1672931441,"answer_id":75020535,"question_id":75012134,"body_markdown":"Exactly once semantics in Kafka apply to `consume-&gt;process-&gt;produce` operations within the same application - even then, only the entire cpp is &quot;exactly once&quot;; the `consume-&gt;process` part is at least once; consumption is always at least once (or at most once),  including in your scenario (for B).","title":"Exactly once Producer and Consumption - Apache Kafka and SpringBoot","body":"<p>Exactly once semantics in Kafka apply to <code>consume-&gt;process-&gt;produce</code> operations within the same application - even then, only the entire cpp is &quot;exactly once&quot;; the <code>consume-&gt;process</code> part is at least once; consumption is always at least once (or at most once),  including in your scenario (for B).</p>\n"}],"owner":{"account_id":27435856,"reputation":11,"user_id":20931720,"display_name":"Spinozist Scientist"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1672931441,"creation_date":1672872202,"question_id":75012134,"body_markdown":"I am working on a microservices project. In this project, there is a Microservice A is doing a process in various steps. At the completion of each step, Microservice sends a message into a kafka topic. Then another Microservice B consumes the message from the kafka topic and sends an email notifying the successful completion of the step. I need Exactly once semantics for this. I am using KafkaTemplate.send in Microservice A and @KafkaListener to read the message in Microservice B. My question is whether KafkaTemplate producer and @KafkaListener consumer are idempotent and if not, how can I make them idempotent.\r\n\r\nRegards,\r\n\r\nI am creating autowiring the KafkaTemplate using the following code:-\r\n@Autowired\r\n    public EventProducer(NewTopic topic, KafkaTemplate&lt;String, Event&gt; kafkaTemplate) {\r\n        this.kafkaTemplate = kafkaTemplate;\r\n  }","title":"Exactly once Producer and Consumption - Apache Kafka and SpringBoot","body":"<p>I am working on a microservices project. In this project, there is a Microservice A is doing a process in various steps. At the completion of each step, Microservice sends a message into a kafka topic. Then another Microservice B consumes the message from the kafka topic and sends an email notifying the successful completion of the step. I need Exactly once semantics for this. I am using KafkaTemplate.send in Microservice A and @KafkaListener to read the message in Microservice B. My question is whether KafkaTemplate producer and @KafkaListener consumer are idempotent and if not, how can I make them idempotent.</p>\n<p>Regards,</p>\n<p>I am creating autowiring the KafkaTemplate using the following code:-\n@Autowired\npublic EventProducer(NewTopic topic, KafkaTemplate&lt;String, Event&gt; kafkaTemplate) {\nthis.kafkaTemplate = kafkaTemplate;\n}</p>\n"},{"tags":["java","gradle","casting","deserialization"],"owner":{"account_id":10398091,"reputation":65,"user_id":7667292,"display_name":"chrisb89"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672930924,"creation_date":1672927491,"question_id":75019664,"body_markdown":"I have a gradle project with two modules, `library` and `app`. `library` is a java-library that can be published as maven artifact. It contains some util methods that are used by `app`, hence `app` depends on `library`.\r\n\r\nNow, I&#39;d like to add two util methods for serialization as shown below. Depending on where the util methods are placed and whether or not the serialized string of `MyClass` (which is also located in `app`) is written to a csv file in between (serialize -&gt; export -&gt; import -&gt; deserialize).\r\n\r\n**Case 1 / No Problem**: As long as my util methods are part of `app`, I can serialize and deserialize `MyClass` without any problems, even if I export the serialized string to a csv-file in between.\r\n\r\n**Case 2 / No Problem**: When my utils methods are part of `library`, I can only serialize and deserialize `MyClass`, if the serialized string is not written to a csv-file in between.\r\n\r\n**Case 3 / PROBLEM**: If my utils are placed in `library` and the serialized string is written to a csv-file in between, then I get a `java.lang.ClassCastException: Cannot cast my.package.MyClass to my.package.MyClass at java.base/java.lang.Class.cast(Class.java:3605)`.\r\n\r\nWhen I run the debugger up until `ois.readObject()`, I can even see the properly deserialized object. However, it is not possible to cast it correctly.\r\n\r\nCould anyone help me to find the reason for the situation described above? Any ideas why this error could occur? Any ideas why it might not be allowed to have my util methods in `library`?\r\n\r\n```\r\n@Nonnull\r\npublic static &lt;T&gt; String serialize(T object) throws IllegalStateException {\r\n    try (\r\n        final ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n        final ObjectOutputStream oos = new ObjectOutputStream(bos)\r\n    ) {\r\n        oos.writeObject(object);\r\n        return Base64.getEncoder().encodeToString(bos.toByteArray());\r\n    } catch (final IOException e) {\r\n        throw new IllegalStateException(&quot;serialization failed&quot;, e);\r\n    }\r\n}\r\n\r\n\r\n@Nonnull\r\npublic static &lt;T&gt; T deserialize(String objectAsString, Class&lt;T&gt; tClass) throws IllegalStateException {\r\n    final byte[] data = Base64.getDecoder().decode(objectAsString);\r\n    try (\r\n        final ByteArrayInputStream bis = new ByteArrayInputStream(data);\r\n        final ObjectInputStream ois = new ObjectInputStream(bis)\r\n    ) {\r\n        return tClass.cast(ois.readObject());\r\n    } catch (Exception e) {\r\n        throw new IllegalStateException(&quot;deserialization failed&quot;, e);\r\n    }\r\n}\r\n```","title":"ClassCastException depending on which gradle module holds the code?","body":"<p>I have a gradle project with two modules, <code>library</code> and <code>app</code>. <code>library</code> is a java-library that can be published as maven artifact. It contains some util methods that are used by <code>app</code>, hence <code>app</code> depends on <code>library</code>.</p>\n<p>Now, I'd like to add two util methods for serialization as shown below. Depending on where the util methods are placed and whether or not the serialized string of <code>MyClass</code> (which is also located in <code>app</code>) is written to a csv file in between (serialize -&gt; export -&gt; import -&gt; deserialize).</p>\n<p><strong>Case 1 / No Problem</strong>: As long as my util methods are part of <code>app</code>, I can serialize and deserialize <code>MyClass</code> without any problems, even if I export the serialized string to a csv-file in between.</p>\n<p><strong>Case 2 / No Problem</strong>: When my utils methods are part of <code>library</code>, I can only serialize and deserialize <code>MyClass</code>, if the serialized string is not written to a csv-file in between.</p>\n<p><strong>Case 3 / PROBLEM</strong>: If my utils are placed in <code>library</code> and the serialized string is written to a csv-file in between, then I get a <code>java.lang.ClassCastException: Cannot cast my.package.MyClass to my.package.MyClass at java.base/java.lang.Class.cast(Class.java:3605)</code>.</p>\n<p>When I run the debugger up until <code>ois.readObject()</code>, I can even see the properly deserialized object. However, it is not possible to cast it correctly.</p>\n<p>Could anyone help me to find the reason for the situation described above? Any ideas why this error could occur? Any ideas why it might not be allowed to have my util methods in <code>library</code>?</p>\n<pre><code>@Nonnull\npublic static &lt;T&gt; String serialize(T object) throws IllegalStateException {\n    try (\n        final ByteArrayOutputStream bos = new ByteArrayOutputStream();\n        final ObjectOutputStream oos = new ObjectOutputStream(bos)\n    ) {\n        oos.writeObject(object);\n        return Base64.getEncoder().encodeToString(bos.toByteArray());\n    } catch (final IOException e) {\n        throw new IllegalStateException(&quot;serialization failed&quot;, e);\n    }\n}\n\n\n@Nonnull\npublic static &lt;T&gt; T deserialize(String objectAsString, Class&lt;T&gt; tClass) throws IllegalStateException {\n    final byte[] data = Base64.getDecoder().decode(objectAsString);\n    try (\n        final ByteArrayInputStream bis = new ByteArrayInputStream(data);\n        final ObjectInputStream ois = new ObjectInputStream(bis)\n    ) {\n        return tClass.cast(ois.readObject());\n    } catch (Exception e) {\n        throw new IllegalStateException(&quot;deserialization failed&quot;, e);\n    }\n}\n</code></pre>\n"},{"tags":["javascript","java","swing"],"comments":[{"owner":{"account_id":19886917,"reputation":1199,"user_id":14569750,"display_name":"ericmp"},"score":0,"creation_date":1672930838,"post_id":75020410,"comment_id":132387845,"body_markdown":"is javascript related?","body":"is javascript related?"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1673005864,"post_id":75020410,"comment_id":132405698,"body_markdown":"[mcve] please ..  mind the M! that is nothing unrelated but still runnable as-is to demonstrate the issue you are describing. That said: in your shoes I would first try to add a user in a plain non-ui context (use hard-coded data) to verify that the issue is related to swing.","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please ..  mind the M! that is nothing unrelated but still runnable as-is to demonstrate the issue you are describing. That said: in your shoes I would first try to add a user in a plain non-ui context (use hard-coded data) to verify that the issue is related to swing."}],"owner":{"account_id":27067565,"reputation":11,"user_id":20618687,"display_name":"bertrand pacode"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672930754,"creation_date":1672930754,"question_id":75020410,"body_markdown":"I try to add users in my active directory (samba-ad). The addition goes well except that the name of the user appears in a character string for example yanick gives $BE23343... in the active directory\r\n\r\nindeed I retrieve the information that the user would have typed through the graphical interface and I add in the context\r\n\r\nhere is what i tried\r\n\r\n```\r\nimport javax.naming.*;\r\nimport javax.naming.directory.*;\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport java.util.Hashtable;\r\n\r\npublic class ADManagerUI extends JFrame {\r\n\r\n  private static final long serialVersionUID = 1L;\r\nprivate JTextField cnField;\r\n  private JTextField snField;\r\n  private JTextField uidField;\r\n  private JTextField passwordField;\r\n  private JTextField mailField;\r\n  private JTextField displayNameField;\r\n  private JTextField descriptionField;\r\n  private JButton addButton;\r\n  private JButton deleteButton;\r\n  private JButton modifyButton;\r\n  \r\n\r\n  public ADManagerUI() {\r\n    // Initialisation de la fen&#234;tre\r\n    setTitle(&quot;Gestionnaire d&#39;utilisateurs AD&quot;);\r\n    setSize(600, 400);\r\n    setLocationRelativeTo(null);\r\n    setDefaultCloseOperation(EXIT_ON_CLOSE);\r\n\r\n    // Cr&#233;ation des champs de texte et des labels\r\n    JLabel cnLabel = new JLabel(&quot;Nom complet :&quot;);\r\n    cnField = new JTextField(20);\r\n    JLabel snLabel = new JLabel(&quot;Nom de famille :&quot;);\r\n    snField = new JTextField(20);\r\n    JLabel uidLabel = new JLabel(&quot;Nom d&#39;utilisateur :&quot;);\r\n    uidField = new JTextField(20);\r\n    JLabel passwordLabel = new JLabel(&quot;Mot de passe :&quot;);\r\n    passwordField = new JTextField(20);\r\n    JLabel mailLabel = new JLabel(&quot;Adresse e-mail :&quot;);\r\n    mailField = new JTextField(20);\r\n    JLabel displayNameLabel = new JLabel(&quot;Nom affich&#233; :&quot;);\r\n    displayNameField = new JTextField(20);\r\n    JLabel descriptionLabel = new JLabel(&quot;Description :&quot;);\r\n    descriptionField = new JTextField(20);\r\n\r\n    // Cr&#233;ation des boutons\r\n    addButton = new JButton(&quot;Ajouter un utilisateur&quot;);\r\n    deleteButton = new JButton(&quot;Supprimer un utilisateur&quot;);\r\n    modifyButton = new JButton(&quot;Modifier un utilisateur&quot;);\r\n\r\n    // Ajout des champs de texte et des labels &#224; la fen&#234;tre\r\n    setLayout(new GridBagLayout());\r\n    GridBagConstraints constraints = new GridBagConstraints();\r\n    constraints.anchor = GridBagConstraints.WEST;\r\n    constraints.insets = new Insets(5, 5, 5, 5);\r\n    constraints.gridx = 0;\r\n    constraints.gridy = 0;\r\n    add(cnLabel, constraints);\r\n    constraints.gridx = 1;\r\n    add(cnField, constraints);\r\n    constraints.gridx = 0;\r\n    constraints.gridy = 1;\r\n    add(snLabel, constraints);\r\n    constraints.gridx = 1;\r\n    add(snField, constraints);\r\n    constraints.gridx = 0;\r\n    constraints.gridy = 2;\r\n    add(uidLabel, constraints);\r\n    constraints.gridx = 1;\r\n    add(uidField, constraints);\r\n    constraints.gridx = 0;\r\n    constraints.gridy = 3;\r\n    add(passwordLabel, constraints);\r\n    constraints.gridx = 1;\r\n    add(passwordField, constraints);\r\n    constraints.gridx = 0;\r\n    constraints.gridy = 4;\r\n    add(mailLabel, constraints);\r\n    constraints.gridx = 1;\r\n    add( mailField, constraints);\r\n    constraints.gridx = 0;\r\n    constraints.gridy = 5;\r\n    add(displayNameLabel, constraints);\r\n    constraints.gridx = 1;\r\n    add(displayNameField, constraints);\r\n    constraints.gridx = 0;\r\n    constraints.gridy = 6;\r\n    add(descriptionLabel , constraints);\r\n    constraints.gridx = 1;\r\n    add(descriptionField, constraints);\r\n    // Ajout des boutons &#224; la fen&#234;tre\r\n    constraints.gridx = 0;\r\n    constraints.gridy = 8;\r\n    add(addButton, constraints);\r\n    constraints.gridx = 1;\r\n    add(deleteButton, constraints);\r\n    constraints.gridx = 2;\r\n    add(modifyButton, constraints);\r\n    // Ajout des listeners aux boutons\r\n    addButton.addActionListener(new AddButtonListener());\r\n    deleteButton.addActionListener(new DeleteButtonListener());\r\n    modifyButton.addActionListener(new ModifyButtonListener());\r\n}\r\n\r\n// Classe interne pour g&#233;rer le clic sur le bouton &quot;Ajouter&quot;\r\nclass AddButtonListener implements ActionListener {\r\n  public void actionPerformed(ActionEvent e) {\r\n    // Les informations de connexion au serveur LDAP\r\n    String ldapAdServer = &quot;ldap://serveur.domaine.com&quot;;\r\n    String ldapUsername = &quot;cn=admin,dc=domaine,dc=com&quot;;\r\n    String ldapPassword = &quot;mot_de_passe&quot;;\r\n\r\n    // Les informations du nouvel utilisateur\r\n    String cn = cnField.getText();\r\n    String sn = snField.getText();\r\n    String uid = uidField.getText();\r\n    String password = passwordField.getText();\r\n    String mail = mailField.getText();\r\n    String displayName = displayNameField.getText();\r\n    String description = descriptionField.getText();\r\n\r\n    // Connexion au serveur LDAP\r\n    Hashtable&lt;String, Object&gt; env = new Hashtable&lt;String, Object&gt;();\r\n    env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\r\n    env.put(Context.PROVIDER_URL, ldapAdServer);\r\n    env.put(Context.SECURITY_PRINCIPAL, ldapUsername);\r\n    env.put(Context.SECURITY_CREDENTIALS, ldapPassword);\r\n\r\n    try {\r\n      // Cr&#233;ation du contexte LDAP\r\n      DirContext ctx = new InitialDirContext(env);\r\n\r\n      // Cr&#233;ation de l&#39;entr&#233;e pour le nouvel utilisateur\r\n      Attributes attrs = new BasicAttributes();\r\n      Attribute objClasses = new BasicAttribute(&quot;objectClass&quot;);\r\n      objClasses.add(&quot;top&quot;);\r\n      objClasses.add(&quot;person&quot;);\r\n      objClasses.add(&quot;organizationalPerson&quot;);\r\n      objClasses.add(&quot;user&quot;);\r\n      attrs.put(objClasses);\r\n      attrs.put(new BasicAttribute(&quot;cn&quot;, cn));\r\n      attrs.put(new BasicAttribute(&quot;sn&quot;, sn));\r\n      attrs.put(new BasicAttribute(&quot;uid&quot;, uid));\r\n      attrs.put(new BasicAttribute(&quot;userPassword&quot;, password));\r\n      attrs.put(new BasicAttribute(&quot;mail&quot;, mail));\r\n      attrs.put(new BasicAttribute(&quot;displayName&quot;, displayName));\r\n      attrs.put(new BasicAttribute(&quot;description&quot;, description));\r\n\r\n      String dn = &quot;cn=&quot; + cn + &quot;,ou=utilisateurs,dc=domaine,dc=com&quot;;\r\n      ctx.createSubcontext(dn, attrs);\r\n      ctx.close();\r\n\r\n      JOptionPane.showMessageDialog(null, &quot;Utilisateur ajout&#233; avec succ&#232;s !&quot;);\r\n    } catch (NamingException ex) {\r\n      ex.printStackTrace();\r\n      JOptionPane.showMessageDialog(null, &quot;Erreur lors de l&#39;ajout de l&#39;utilisateur !&quot;);\r\n    }\r\n  }\r\n}\r\n\r\n}\r\n\r\npublic static void main(String[] args) {\r\n  ADManagerUI adUI = new ADManagerUI();\r\n  adUI.setVisible(true);\r\n}\r\n}\r\n```","title":"Java,Add user into Active Directory (samba-ad)","body":"<p>I try to add users in my active directory (samba-ad). The addition goes well except that the name of the user appears in a character string for example yanick gives $BE23343... in the active directory</p>\n<p>indeed I retrieve the information that the user would have typed through the graphical interface and I add in the context</p>\n<p>here is what i tried</p>\n<pre><code>import javax.naming.*;\nimport javax.naming.directory.*;\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.*;\nimport java.util.Hashtable;\n\npublic class ADManagerUI extends JFrame {\n\n  private static final long serialVersionUID = 1L;\nprivate JTextField cnField;\n  private JTextField snField;\n  private JTextField uidField;\n  private JTextField passwordField;\n  private JTextField mailField;\n  private JTextField displayNameField;\n  private JTextField descriptionField;\n  private JButton addButton;\n  private JButton deleteButton;\n  private JButton modifyButton;\n  \n\n  public ADManagerUI() {\n    // Initialisation de la fenêtre\n    setTitle(&quot;Gestionnaire d'utilisateurs AD&quot;);\n    setSize(600, 400);\n    setLocationRelativeTo(null);\n    setDefaultCloseOperation(EXIT_ON_CLOSE);\n\n    // Création des champs de texte et des labels\n    JLabel cnLabel = new JLabel(&quot;Nom complet :&quot;);\n    cnField = new JTextField(20);\n    JLabel snLabel = new JLabel(&quot;Nom de famille :&quot;);\n    snField = new JTextField(20);\n    JLabel uidLabel = new JLabel(&quot;Nom d'utilisateur :&quot;);\n    uidField = new JTextField(20);\n    JLabel passwordLabel = new JLabel(&quot;Mot de passe :&quot;);\n    passwordField = new JTextField(20);\n    JLabel mailLabel = new JLabel(&quot;Adresse e-mail :&quot;);\n    mailField = new JTextField(20);\n    JLabel displayNameLabel = new JLabel(&quot;Nom affiché :&quot;);\n    displayNameField = new JTextField(20);\n    JLabel descriptionLabel = new JLabel(&quot;Description :&quot;);\n    descriptionField = new JTextField(20);\n\n    // Création des boutons\n    addButton = new JButton(&quot;Ajouter un utilisateur&quot;);\n    deleteButton = new JButton(&quot;Supprimer un utilisateur&quot;);\n    modifyButton = new JButton(&quot;Modifier un utilisateur&quot;);\n\n    // Ajout des champs de texte et des labels à la fenêtre\n    setLayout(new GridBagLayout());\n    GridBagConstraints constraints = new GridBagConstraints();\n    constraints.anchor = GridBagConstraints.WEST;\n    constraints.insets = new Insets(5, 5, 5, 5);\n    constraints.gridx = 0;\n    constraints.gridy = 0;\n    add(cnLabel, constraints);\n    constraints.gridx = 1;\n    add(cnField, constraints);\n    constraints.gridx = 0;\n    constraints.gridy = 1;\n    add(snLabel, constraints);\n    constraints.gridx = 1;\n    add(snField, constraints);\n    constraints.gridx = 0;\n    constraints.gridy = 2;\n    add(uidLabel, constraints);\n    constraints.gridx = 1;\n    add(uidField, constraints);\n    constraints.gridx = 0;\n    constraints.gridy = 3;\n    add(passwordLabel, constraints);\n    constraints.gridx = 1;\n    add(passwordField, constraints);\n    constraints.gridx = 0;\n    constraints.gridy = 4;\n    add(mailLabel, constraints);\n    constraints.gridx = 1;\n    add( mailField, constraints);\n    constraints.gridx = 0;\n    constraints.gridy = 5;\n    add(displayNameLabel, constraints);\n    constraints.gridx = 1;\n    add(displayNameField, constraints);\n    constraints.gridx = 0;\n    constraints.gridy = 6;\n    add(descriptionLabel , constraints);\n    constraints.gridx = 1;\n    add(descriptionField, constraints);\n    // Ajout des boutons à la fenêtre\n    constraints.gridx = 0;\n    constraints.gridy = 8;\n    add(addButton, constraints);\n    constraints.gridx = 1;\n    add(deleteButton, constraints);\n    constraints.gridx = 2;\n    add(modifyButton, constraints);\n    // Ajout des listeners aux boutons\n    addButton.addActionListener(new AddButtonListener());\n    deleteButton.addActionListener(new DeleteButtonListener());\n    modifyButton.addActionListener(new ModifyButtonListener());\n}\n\n// Classe interne pour gérer le clic sur le bouton &quot;Ajouter&quot;\nclass AddButtonListener implements ActionListener {\n  public void actionPerformed(ActionEvent e) {\n    // Les informations de connexion au serveur LDAP\n    String ldapAdServer = &quot;ldap://serveur.domaine.com&quot;;\n    String ldapUsername = &quot;cn=admin,dc=domaine,dc=com&quot;;\n    String ldapPassword = &quot;mot_de_passe&quot;;\n\n    // Les informations du nouvel utilisateur\n    String cn = cnField.getText();\n    String sn = snField.getText();\n    String uid = uidField.getText();\n    String password = passwordField.getText();\n    String mail = mailField.getText();\n    String displayName = displayNameField.getText();\n    String description = descriptionField.getText();\n\n    // Connexion au serveur LDAP\n    Hashtable&lt;String, Object&gt; env = new Hashtable&lt;String, Object&gt;();\n    env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\n    env.put(Context.PROVIDER_URL, ldapAdServer);\n    env.put(Context.SECURITY_PRINCIPAL, ldapUsername);\n    env.put(Context.SECURITY_CREDENTIALS, ldapPassword);\n\n    try {\n      // Création du contexte LDAP\n      DirContext ctx = new InitialDirContext(env);\n\n      // Création de l'entrée pour le nouvel utilisateur\n      Attributes attrs = new BasicAttributes();\n      Attribute objClasses = new BasicAttribute(&quot;objectClass&quot;);\n      objClasses.add(&quot;top&quot;);\n      objClasses.add(&quot;person&quot;);\n      objClasses.add(&quot;organizationalPerson&quot;);\n      objClasses.add(&quot;user&quot;);\n      attrs.put(objClasses);\n      attrs.put(new BasicAttribute(&quot;cn&quot;, cn));\n      attrs.put(new BasicAttribute(&quot;sn&quot;, sn));\n      attrs.put(new BasicAttribute(&quot;uid&quot;, uid));\n      attrs.put(new BasicAttribute(&quot;userPassword&quot;, password));\n      attrs.put(new BasicAttribute(&quot;mail&quot;, mail));\n      attrs.put(new BasicAttribute(&quot;displayName&quot;, displayName));\n      attrs.put(new BasicAttribute(&quot;description&quot;, description));\n\n      String dn = &quot;cn=&quot; + cn + &quot;,ou=utilisateurs,dc=domaine,dc=com&quot;;\n      ctx.createSubcontext(dn, attrs);\n      ctx.close();\n\n      JOptionPane.showMessageDialog(null, &quot;Utilisateur ajouté avec succès !&quot;);\n    } catch (NamingException ex) {\n      ex.printStackTrace();\n      JOptionPane.showMessageDialog(null, &quot;Erreur lors de l'ajout de l'utilisateur !&quot;);\n    }\n  }\n}\n\n}\n\npublic static void main(String[] args) {\n  ADManagerUI adUI = new ADManagerUI();\n  adUI.setVisible(true);\n}\n}\n</code></pre>\n"},{"tags":["java","jpa","spring-data-jpa","jpql"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1672931514,"post_id":75020326,"comment_id":132388141,"body_markdown":"https://www.baeldung.com/hibernate-criteria-queries","body":"<a href=\"https://www.baeldung.com/hibernate-criteria-queries\" rel=\"nofollow noreferrer\">baeldung.com/hibernate-criteria-queries</a>"},{"owner":{"account_id":15365778,"reputation":62,"user_id":11085357,"display_name":"Coding"},"score":0,"creation_date":1672934783,"post_id":75020326,"comment_id":132389470,"body_markdown":"the baeldung tutorial is helpful but my ConfigVO is not an Entity, it contains some fields that need to be calculated. So the tutorial is not perfect match","body":"the baeldung tutorial is helpful but my ConfigVO is not an Entity, it contains some fields that need to be calculated. So the tutorial is not perfect match"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1672935053,"post_id":75020326,"comment_id":132389576,"body_markdown":"Sure but there is never a perfect match for a problem in development. You should first try to solve the problem yourself. And then ask question what is not working for you https://stackoverflow.com/help/how-to-ask","body":"Sure but there is never a perfect match for a problem in development. You should first try to solve the problem yourself. And then ask question what is not working for you <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}],"owner":{"account_id":15365778,"reputation":62,"user_id":11085357,"display_name":"Coding"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672930443,"creation_date":1672930443,"question_id":75020326,"body_markdown":"I have two Entities like Below:\r\n\r\n```\r\n@Entity\r\n@Table(name=&quot;tb_sm_config&quot;)\r\nclass Config {\r\n   @Id\r\n   private Long id;\r\n   private String code;\r\n   private String name;\r\n   @Enumerated(EnumType.STRING)\r\n   private State state;\r\n   @JsonIgnore\r\n   @OneToMany(mappedBy = &quot;config&quot;, fetch = FetchType.LAZY)\r\n   private List&lt;ConfigItem&gt; items;\r\n}\r\n\r\n@Entity\r\n@Table(name=&quot;tb_sm_config_item&quot;)\r\nclass ConfigItem {\r\n   @Id\r\n   private Long id;\r\n   private String code;\r\n   private String name;\r\n   @Enumerated(EnumType.STRING)\r\n   private State state;\r\n   @ManyToOne(fetch = FetchType.LAZY)\r\n   @JoinColumn(name = &quot;config_id&quot;, referencedColumnName = &quot;id&quot;, foreignKey = @ForeignKey(ConstraintMode.NO_CONSTRAINT))\r\n    private Config config;\r\n}\r\n```\r\n\r\nthe State is an Enum, there are three states : VALID, INVALID, DELETED\r\n\r\nThen I define a ConfigVO like below:\r\n\r\n```\r\nclass ConfigVO {\r\n   private Long id;\r\n   private String code;\r\n   private String name;\r\n   private State state;\r\n   private Long validItemCount;\r\n   private Long invalidItemCount;\r\n   pirvate Long deletedItemCount;\r\n}\r\n```\r\nI want to provide fuzzy query based on config.name, config.code and precise query based on config.state and return a list of ConfigVO with pageable and sortable.\r\n\r\nI know native sql will like :\r\n\r\n```\r\nselect a.id, a.code, a.name, a.state,\r\n       coalesce(b._valid, 0) validItemCount,\r\n       coalesce(b._invalid, 0) invalidItemCount,\r\n       coalesce(b._deleted, 0) deletedItemCount\r\nfrom tb_sm_config a left join\r\n    (select config_id, sum(if(state = &#39;VALID&#39;, 1, 0)) _valid, sum(if(state = &#39;INVALID&#39;, 1, 0)) _invalid, sum(if(state = &#39;DELETED&#39;, 1, 0)) _deleted  from tb_sm_config_item group by config_id) b\r\non a.id = b.config_id\r\nwhere code like %:code% and name like %:name% and state = :state\r\n```\r\n\r\nBut here are the problems I don&#39;t know how to deal with:\r\n1. The frontend will not always pass the code, name, state to query, so these three parameters is nullable.\r\n2. If I use the @Query(nativeQuery=true, value=xxxx) in the ConfigRepository interface method, I don&#39;t know how to deal with the null value and the paging and sorting.\r\n\r\n\r\n\r\n\r\nIs that any possible to achieve this goal through JpaSpecificationExecutor interface, Example interface, or something else?\r\n\r\nI want to query base on the code, name, state, sometimes they will be null and want to count the total number of individual configItem states and pageable and sortable.","title":"Translate native sql to JPA code or JPQL and make it pageable and sortable","body":"<p>I have two Entities like Below:</p>\n<pre><code>@Entity\n@Table(name=&quot;tb_sm_config&quot;)\nclass Config {\n   @Id\n   private Long id;\n   private String code;\n   private String name;\n   @Enumerated(EnumType.STRING)\n   private State state;\n   @JsonIgnore\n   @OneToMany(mappedBy = &quot;config&quot;, fetch = FetchType.LAZY)\n   private List&lt;ConfigItem&gt; items;\n}\n\n@Entity\n@Table(name=&quot;tb_sm_config_item&quot;)\nclass ConfigItem {\n   @Id\n   private Long id;\n   private String code;\n   private String name;\n   @Enumerated(EnumType.STRING)\n   private State state;\n   @ManyToOne(fetch = FetchType.LAZY)\n   @JoinColumn(name = &quot;config_id&quot;, referencedColumnName = &quot;id&quot;, foreignKey = @ForeignKey(ConstraintMode.NO_CONSTRAINT))\n    private Config config;\n}\n</code></pre>\n<p>the State is an Enum, there are three states : VALID, INVALID, DELETED</p>\n<p>Then I define a ConfigVO like below:</p>\n<pre><code>class ConfigVO {\n   private Long id;\n   private String code;\n   private String name;\n   private State state;\n   private Long validItemCount;\n   private Long invalidItemCount;\n   pirvate Long deletedItemCount;\n}\n</code></pre>\n<p>I want to provide fuzzy query based on config.name, config.code and precise query based on config.state and return a list of ConfigVO with pageable and sortable.</p>\n<p>I know native sql will like :</p>\n<pre><code>select a.id, a.code, a.name, a.state,\n       coalesce(b._valid, 0) validItemCount,\n       coalesce(b._invalid, 0) invalidItemCount,\n       coalesce(b._deleted, 0) deletedItemCount\nfrom tb_sm_config a left join\n    (select config_id, sum(if(state = 'VALID', 1, 0)) _valid, sum(if(state = 'INVALID', 1, 0)) _invalid, sum(if(state = 'DELETED', 1, 0)) _deleted  from tb_sm_config_item group by config_id) b\non a.id = b.config_id\nwhere code like %:code% and name like %:name% and state = :state\n</code></pre>\n<p>But here are the problems I don't know how to deal with:</p>\n<ol>\n<li>The frontend will not always pass the code, name, state to query, so these three parameters is nullable.</li>\n<li>If I use the @Query(nativeQuery=true, value=xxxx) in the ConfigRepository interface method, I don't know how to deal with the null value and the paging and sorting.</li>\n</ol>\n<p>Is that any possible to achieve this goal through JpaSpecificationExecutor interface, Example interface, or something else?</p>\n<p>I want to query base on the code, name, state, sometimes they will be null and want to count the total number of individual configItem states and pageable and sortable.</p>\n"},{"tags":["java","spring-boot","exception","spring-data-jpa","associations"],"comments":[{"owner":{"account_id":13979585,"reputation":211,"user_id":10096086,"display_name":"Abraham Ciokler"},"score":0,"creation_date":1672777250,"post_id":74995964,"comment_id":132349495,"body_markdown":"This error means you haven&#39;t saved the `department` entity in the database before assigning it to the `Student` entity. A typical mistake that can cause this is the `id` field is null somehow. Please, post the logic that actually assigns departments to students and how it saves.","body":"This error means you haven&#39;t saved the <code>department</code> entity in the database before assigning it to the <code>Student</code> entity. A typical mistake that can cause this is the <code>id</code> field is null somehow. Please, post the logic that actually assigns departments to students and how it saves."},{"owner":{"account_id":8183303,"reputation":107,"user_id":6159786,"display_name":"B.Ahmad"},"score":0,"creation_date":1672818659,"post_id":74995964,"comment_id":132356530,"body_markdown":"@AbrahamCiokler You are absolutely right. The Department id was null when passing the department object to Student. Problem solved!. Thanks a lot my friend!","body":"@AbrahamCiokler You are absolutely right. The Department id was null when passing the department object to Student. Problem solved!. Thanks a lot my friend!"}],"answers":[{"tags":[],"owner":{"account_id":13979585,"reputation":211,"user_id":10096086,"display_name":"Abraham Ciokler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672930413,"creation_date":1672930413,"answer_id":75020317,"question_id":74995964,"body_markdown":"This error means you haven&#39;t saved the department entity in the database before assigning it to the Student entity. A typical mistake that can cause this is the id field is null somehow.","title":"How to resolve TransientPropertyValueException in one to one association without using Cascading types?[SOLVED]","body":"<p>This error means you haven't saved the department entity in the database before assigning it to the Student entity. A typical mistake that can cause this is the id field is null somehow.</p>\n"}],"owner":{"account_id":8183303,"reputation":107,"user_id":6159786,"display_name":"B.Ahmad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672930413,"creation_date":1672763032,"question_id":74995964,"body_markdown":"I have a Student entity like this:\r\n```\r\n@Entity\r\n@Table(name=&quot;student&quot;)\r\npublic class Student{\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n  private Long id;\r\n \r\n  @OneToOne\r\n  @JoinColumn(name=&quot;dept_id&quot;)\r\n  private Department department;\r\n}\r\n```\r\nand a Department Entity:\r\n```\r\n@Entity\r\n@Table(name=&quot;department&quot;)\r\npublic class Department{\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n  private Long id;\r\n \r\n  @Column(unique=true)\r\n  private String departmentName;\r\n}\r\n```\r\nBefore I save students, I have saved couple of Departments in the the MySQL database. In the Add Student form, I select Department from the dropdown which are fetched from Database. Now when I am about to save Student, following exception occurs:\r\n```\r\nobject references an unsaved transient instance - save the transient instance before flushing\r\n```\r\nBy searching on internet, I found that adding CascadeType.ALL resolves the problem. But I don&#39;t want the department be saved along with Student when saving Student, because that department is already in the database. Again, CascadeType.ALL tries the existing department to save in the &quot;department&quot; table but fails due to unique deparmentName attribute. Also, I don&#39;t want associated department to be removed when I remove any Student. \r\nPlease advise. All I want is to make a query where all students will be returned as list and each student object will consist the associated department information also.\r\nThanks in advance!\r\n\r\n*** [SOLVED] The problem is solved actually. Department id was null when passing the department object to Student.***","title":"How to resolve TransientPropertyValueException in one to one association without using Cascading types?[SOLVED]","body":"<p>I have a Student entity like this:</p>\n<pre><code>@Entity\n@Table(name=&quot;student&quot;)\npublic class Student{\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  private Long id;\n \n  @OneToOne\n  @JoinColumn(name=&quot;dept_id&quot;)\n  private Department department;\n}\n</code></pre>\n<p>and a Department Entity:</p>\n<pre><code>@Entity\n@Table(name=&quot;department&quot;)\npublic class Department{\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  private Long id;\n \n  @Column(unique=true)\n  private String departmentName;\n}\n</code></pre>\n<p>Before I save students, I have saved couple of Departments in the the MySQL database. In the Add Student form, I select Department from the dropdown which are fetched from Database. Now when I am about to save Student, following exception occurs:</p>\n<pre><code>object references an unsaved transient instance - save the transient instance before flushing\n</code></pre>\n<p>By searching on internet, I found that adding CascadeType.ALL resolves the problem. But I don't want the department be saved along with Student when saving Student, because that department is already in the database. Again, CascadeType.ALL tries the existing department to save in the &quot;department&quot; table but fails due to unique deparmentName attribute. Also, I don't want associated department to be removed when I remove any Student.\nPlease advise. All I want is to make a query where all students will be returned as list and each student object will consist the associated department information also.\nThanks in advance!</p>\n<p>*** [SOLVED] The problem is solved actually. Department id was null when passing the department object to Student.***</p>\n"},{"tags":["java","vaadin","refresh","vaadin-flow","vaadin14"],"answers":[{"tags":[],"owner":{"account_id":2759852,"reputation":7920,"user_id":2376954,"display_name":"Leif &#197;strand"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672930379,"creation_date":1672930379,"answer_id":75020305,"question_id":75019718,"body_markdown":"The error message you see is there to guard against accidentally reusing the same component instance between separate UIs e.g. by using the component instance through a singleton bean with Spring or CDI.\r\n\r\nBecause `@PreserveOnRefresh` is technically creating a new UI when you refresh, there&#39;s some special logic that goes through components that are attached during the refresh and detaches them from the old UI in a special way (`removeFromTree()`) to avoid triggering the logic that prevents accidental sharing.\r\n\r\nI suspect the problem in your case is that the button isn&#39;t always attached when the refresh happens, which also means that it doesn&#39;t get detached in that special way. This means that you need to use `removeFromTree()` for whenever you want to be able to reuse something that wasn&#39;t attached when the refresh happened.\r\n","title":"Vaadin Flow 14 Can&#39;t move a node from one state tree to another error when refreshing","body":"<p>The error message you see is there to guard against accidentally reusing the same component instance between separate UIs e.g. by using the component instance through a singleton bean with Spring or CDI.</p>\n<p>Because <code>@PreserveOnRefresh</code> is technically creating a new UI when you refresh, there's some special logic that goes through components that are attached during the refresh and detaches them from the old UI in a special way (<code>removeFromTree()</code>) to avoid triggering the logic that prevents accidental sharing.</p>\n<p>I suspect the problem in your case is that the button isn't always attached when the refresh happens, which also means that it doesn't get detached in that special way. This means that you need to use <code>removeFromTree()</code> for whenever you want to be able to reuse something that wasn't attached when the refresh happened.</p>\n"}],"owner":{"account_id":19662820,"reputation":169,"user_id":14393923,"display_name":"Miłosz Bąbliński"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":229,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672930379,"creation_date":1672927763,"question_id":75019718,"body_markdown":"i have a problem with adding again btn to layout after this layout is cleared from components. I&#39;m gettin a error \r\n\r\n&gt; Can&#39;t move a node from one state tree to another. If this is intentional, first remove the node from its current state tree by calling removeFromTree\r\n\r\nfor the line \r\n\r\n    \t\t\tactionsLay.add(testButton);\r\nafter refreshing few times, and i don&#39;t get it why this error is showing. Below is very simple code to show this error when i&#39;m adding and removing button for refresh action. In my app it is much more complicated code and i&#39;m getting this error aswell after some page refresh and only for one component. I know that i can just add \r\n\r\n    testButton.getElement().removeFromTree()\r\n\r\nbut until I know why this error appears then I won&#39;t know when when i should add this line.\r\n\r\nI&#39;m using Vaadin 14.8.14.\r\n\r\n    @Route(value = &quot;test&quot;)\r\n    @UIScope\r\n    @PreserveOnRefresh\r\n    public class testPanel extends Div {\r\n    \tprivate static final long serialVersionUID = 5081824598131333345L;\r\n    \r\n    \tButton testButton;\r\n    \tprivate HorizontalLayout actionsLay;\r\n    \tprivate boolean addBtn = true;\r\n    \tpublic testPanel() {\r\n    \t\ttestButton = new Button(new Icon(VaadinIcon.REFRESH));\r\n    \t\tactionsLay = new HorizontalLayout();\r\n    \t\tadd(actionsLay);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected void onAttach(AttachEvent attachEvent) {\r\n    \t\tif (addBtn) {\r\n    \t\t\tactionsLay.removeAll();\r\n    \t\t\tactionsLay.add(testButton);\r\n    \t\t\taddBtn = false;\r\n    \t\t} else {\r\n    \t\t\tactionsLay.removeAll();\r\n    \t\t\taddBtn = true;\r\n    \t\t}\r\n    \r\n    \t}\r\n    }\r\n\r\nThe error is thrown becouse \r\n\r\n    isOwnerAttached = ((StateTree) getOwner()).getRootNode()\r\n                    .isAttached();\r\nin class StateNode in method doSetTree is true.","title":"Vaadin Flow 14 Can&#39;t move a node from one state tree to another error when refreshing","body":"<p>i have a problem with adding again btn to layout after this layout is cleared from components. I'm gettin a error</p>\n<blockquote>\n<p>Can't move a node from one state tree to another. If this is intentional, first remove the node from its current state tree by calling removeFromTree</p>\n</blockquote>\n<p>for the line</p>\n<pre><code>            actionsLay.add(testButton);\n</code></pre>\n<p>after refreshing few times, and i don't get it why this error is showing. Below is very simple code to show this error when i'm adding and removing button for refresh action. In my app it is much more complicated code and i'm getting this error aswell after some page refresh and only for one component. I know that i can just add</p>\n<pre><code>testButton.getElement().removeFromTree()\n</code></pre>\n<p>but until I know why this error appears then I won't know when when i should add this line.</p>\n<p>I'm using Vaadin 14.8.14.</p>\n<pre><code>@Route(value = &quot;test&quot;)\n@UIScope\n@PreserveOnRefresh\npublic class testPanel extends Div {\n    private static final long serialVersionUID = 5081824598131333345L;\n\n    Button testButton;\n    private HorizontalLayout actionsLay;\n    private boolean addBtn = true;\n    public testPanel() {\n        testButton = new Button(new Icon(VaadinIcon.REFRESH));\n        actionsLay = new HorizontalLayout();\n        add(actionsLay);\n    }\n\n    @Override\n    protected void onAttach(AttachEvent attachEvent) {\n        if (addBtn) {\n            actionsLay.removeAll();\n            actionsLay.add(testButton);\n            addBtn = false;\n        } else {\n            actionsLay.removeAll();\n            addBtn = true;\n        }\n\n    }\n}\n</code></pre>\n<p>The error is thrown becouse</p>\n<pre><code>isOwnerAttached = ((StateTree) getOwner()).getRootNode()\n                .isAttached();\n</code></pre>\n<p>in class StateNode in method doSetTree is true.</p>\n"},{"tags":["java","sql","postgresql","spring-boot","sql-order-by"],"comments":[{"owner":{"account_id":4564696,"reputation":43122,"user_id":3706016,"display_name":"jarlh"},"score":0,"creation_date":1672930306,"post_id":75020249,"comment_id":132387622,"body_markdown":"Why the GROUP BY? Do you simply want SELECT DISTINCT?","body":"Why the GROUP BY? Do you simply want SELECT DISTINCT?"},{"owner":{"account_id":17883305,"reputation":33,"user_id":12991527,"display_name":"Fazeel Usmani"},"score":0,"creation_date":1672930679,"post_id":75020249,"comment_id":132387781,"body_markdown":"@jarlh Earlier, I thought of having them in groups thats why GROUP BY. And now thinking of only ORDER BY would do the job. \nDISTINCT returns only unique records.","body":"@jarlh Earlier, I thought of having them in groups thats why GROUP BY. And now thinking of only ORDER BY would do the job.  DISTINCT returns only unique records."}],"owner":{"account_id":17883305,"reputation":33,"user_id":12991527,"display_name":"Fazeel Usmani"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672930159,"creation_date":1672930159,"question_id":75020249,"body_markdown":"I&#39;m unable to figure out the Spring query for my SQL query\r\n\r\n\r\n    SELECT person_name, role FROM persons\r\n    GROUP BY person_name, role\r\n    ORDER BY ROLE = &#39;viewer&#39;,\r\n    \t ROLE = &#39;participant&#39;,\r\n    \t ROLE = &#39;collaborator&#39;,\r\n    \t ROLE = &#39;lead&#39;;\r\n\r\n\r\nI tried \r\n\r\n    select(field(&quot;person_name&quot;), field(&quot;role&quot;))\r\n     .from(table(&quot;person&quot;)\r\n     .groupBy(field(&quot;person_name&quot;), field(&quot;role&quot;))\r\n     .orderBy((field(&quot;role&quot;).equals(&quot;viewer&quot;)).and(field(&quot;role&quot;).equals(&quot;participant&quot;)).and(\r\n                   field(&quot;role&quot;).equals(&quot;collaborator&quot;)).and(field(&quot;role&quot;).equals(&quot;lead&quot;)));\r\n\r\nbut no luck. \r\n\r\nIf I do orderBy(role) then I&#39;m getting ascending order result like \r\ncollaborator &gt; lead &gt; participant &gt; viewer\r\n\r\nBut I&#39;m expecting lead &gt; collaborator &gt; participant &gt; viewer\r\n\r\n","title":"Using orderBy for custom sorting in Spring Boot","body":"<p>I'm unable to figure out the Spring query for my SQL query</p>\n<pre><code>SELECT person_name, role FROM persons\nGROUP BY person_name, role\nORDER BY ROLE = 'viewer',\n     ROLE = 'participant',\n     ROLE = 'collaborator',\n     ROLE = 'lead';\n</code></pre>\n<p>I tried</p>\n<pre><code>select(field(&quot;person_name&quot;), field(&quot;role&quot;))\n .from(table(&quot;person&quot;)\n .groupBy(field(&quot;person_name&quot;), field(&quot;role&quot;))\n .orderBy((field(&quot;role&quot;).equals(&quot;viewer&quot;)).and(field(&quot;role&quot;).equals(&quot;participant&quot;)).and(\n               field(&quot;role&quot;).equals(&quot;collaborator&quot;)).and(field(&quot;role&quot;).equals(&quot;lead&quot;)));\n</code></pre>\n<p>but no luck.</p>\n<p>If I do orderBy(role) then I'm getting ascending order result like\ncollaborator &gt; lead &gt; participant &gt; viewer</p>\n<p>But I'm expecting lead &gt; collaborator &gt; participant &gt; viewer</p>\n"},{"tags":["java","performance","jmeter","blockchain","corda"],"answers":[{"tags":[],"owner":{"account_id":10430083,"reputation":141,"user_id":7690168,"display_name":"Christian Sailer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672929430,"creation_date":1672929430,"answer_id":75020077,"question_id":74992529,"body_markdown":"This also applies to the connection to the notary, technically that is just a peer 2 peer connection like to any other node.\r\n\r\nHowever, I think you misunderstood the bit from the documentation you quoted here. The limitation mentioned there is not on establishing a connection - it refers to the fact that the SSL implementation in Java 1.8 that Corda 4.x uses limits how fast data can be en-/decrypted, so has an impact on the steady stream throughput.\r\n","title":"Does a Corda node communication with Notary is same as in case of another peer node?","body":"<p>This also applies to the connection to the notary, technically that is just a peer 2 peer connection like to any other node.</p>\n<p>However, I think you misunderstood the bit from the documentation you quoted here. The limitation mentioned there is not on establishing a connection - it refers to the fact that the SSL implementation in Java 1.8 that Corda 4.x uses limits how fast data can be en-/decrypted, so has an impact on the steady stream throughput.</p>\n"}],"owner":{"account_id":17248886,"reputation":105,"user_id":12489459,"display_name":"Benjamin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75020077,"answer_count":1,"score":0,"last_activity_date":1672929430,"creation_date":1672744157,"question_id":74992529,"body_markdown":"&gt; TLS connections\r\nCorda uses TLS to encrypt the peer to peer connections between nodes. It can be shown that the maximal throughput that is achievable with the JVM TLS layer can limit the node throughput for flows that need to send sufficient amount of data between peers. This is e.g. the case for the CashIssueAndPayment flow in the performance test CorDapp.\r\n\r\nRef: https://docs.r3.com/en/platform/corda/4.9/enterprise/node/operating/optimizing.html#tls-connections\r\n\r\nI hope this is same in case of Communication with Notary as well, if so does this connection establish (like handshaking) only on the first flow execution or it happens along with node restart?\r\n\r\nI am trying to correlate facts for the significant time taken while calling a flow after the node is up and running when compared to succeeding ones.\r\n\r\nAnother related question: https://stackoverflow.com/questions/74953584/corda-jmeter-performance-testing-takes-more-time-for-first-sampler-inside-thread\r\n","title":"Does a Corda node communication with Notary is same as in case of another peer node?","body":"<blockquote>\n<p>TLS connections\nCorda uses TLS to encrypt the peer to peer connections between nodes. It can be shown that the maximal throughput that is achievable with the JVM TLS layer can limit the node throughput for flows that need to send sufficient amount of data between peers. This is e.g. the case for the CashIssueAndPayment flow in the performance test CorDapp.</p>\n</blockquote>\n<p>Ref: <a href=\"https://docs.r3.com/en/platform/corda/4.9/enterprise/node/operating/optimizing.html#tls-connections\" rel=\"nofollow noreferrer\">https://docs.r3.com/en/platform/corda/4.9/enterprise/node/operating/optimizing.html#tls-connections</a></p>\n<p>I hope this is same in case of Communication with Notary as well, if so does this connection establish (like handshaking) only on the first flow execution or it happens along with node restart?</p>\n<p>I am trying to correlate facts for the significant time taken while calling a flow after the node is up and running when compared to succeeding ones.</p>\n<p>Another related question: <a href=\"https://stackoverflow.com/questions/74953584/corda-jmeter-performance-testing-takes-more-time-for-first-sampler-inside-thread\">Corda Jmeter Performance testing takes more time for first sampler inside Thread group (all are Java Request Samplers)</a></p>\n"},{"tags":["java","selenium","selenium-webdriver","selenium-chromedriver","cucumber-java"],"answers":[{"tags":[],"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625642237,"creation_date":1625642237,"answer_id":68281622,"question_id":68271205,"body_markdown":"I am not sure about using cucumber options but by using cucumber `RuntimeOptions` class you can achieve it. The below method needs to be called in a loop that means you have 10 tags to execute then call this method in `for` loop.\r\n\r\n    public static boolean cucumberRun(String tag) {\r\n    \t\ttry {\r\n                ClassLoader classLoader = CustomClass.class.getClassLoader();\r\n    \t\t\tResourceLoader resourceLoader = new MultiLoader(classLoader);\r\n    \t\t\tClassFinder classFinder = new ResourceLoaderClassFinder(resourceLoader, classLoader);\r\n    \r\n    \t\t\t/* Adding cucumber plugins */\r\n    \t\t\tList&lt;String&gt; pluginList = new ArrayList&lt;String&gt;();\r\n    \t\t\tpluginList.add(&quot;--plugin&quot;);\r\n    \t\t\tpluginList.add(&quot;html:target/cucumber-html-report&quot;);\r\n    \t\t\tpluginList.add(&quot;--plugin&quot;);\r\n    \t\t\tpluginList.add(&quot;json:target/cucumber.json&quot;);\r\n    \t\t\tpluginList.add(&quot;--plugin&quot;);\r\n    \t\t\tpluginList.add(&quot;com.cucumber.listener.ExtentCucumberFormatter:&quot;);\r\n    \t\t\tpluginList.add(&quot;--plugin&quot;);\r\n    \t\t\tpluginList.add(&quot;rerun:target/failedScenarios.txt&quot;);\r\n    \r\n    \t\t\t/* Location for BDD extent report. */\r\n    \t\t\tExtentProperties extentProperties = ExtentProperties.INSTANCE;\r\n    \t\t\textentProperties.setReportPath(&quot;location/Extent_report.html&quot;);\r\n    \r\n    \t\t\t/*\r\n    \t\t\t * Adding cucumberOptions.\r\n    \t\t\t * \r\n    \t\t\t * You can get the tag value from excel and pass it here. We need to add @ before tag value.\r\n    \t\t\t */\r\n    \t\t\tRuntimeOptions ro = new RuntimeOptions(pluginList);\r\n    \t\t\tro.getFilters().add(&quot;@&quot;+tag);\r\n    \t\t\tro.getFeaturePaths().add(&quot;location of feature files&quot;);\r\n    \t\t\tro.getGlue().add(&quot;location of glue code&quot;);\r\n    \r\n    \t\t\t/* Loads all the resources into Cucumber RunTime class and execute. */\r\n    \t\t\tcucumber.runtime.Runtime runtime = new cucumber.runtime.Runtime(resourceLoader, classFinder, classLoader,\r\n    \t\t\t\t\tro);\r\n    \t\t\truntime.run();\r\n    }catch(Exception e){\r\n    // Handle exception\r\n    }","title":"How to get @tag from an excel file to CucumberOptions in Selenium java","body":"<p>I am not sure about using cucumber options but by using cucumber <code>RuntimeOptions</code> class you can achieve it. The below method needs to be called in a loop that means you have 10 tags to execute then call this method in <code>for</code> loop.</p>\n<pre><code>public static boolean cucumberRun(String tag) {\n        try {\n            ClassLoader classLoader = CustomClass.class.getClassLoader();\n            ResourceLoader resourceLoader = new MultiLoader(classLoader);\n            ClassFinder classFinder = new ResourceLoaderClassFinder(resourceLoader, classLoader);\n\n            /* Adding cucumber plugins */\n            List&lt;String&gt; pluginList = new ArrayList&lt;String&gt;();\n            pluginList.add(&quot;--plugin&quot;);\n            pluginList.add(&quot;html:target/cucumber-html-report&quot;);\n            pluginList.add(&quot;--plugin&quot;);\n            pluginList.add(&quot;json:target/cucumber.json&quot;);\n            pluginList.add(&quot;--plugin&quot;);\n            pluginList.add(&quot;com.cucumber.listener.ExtentCucumberFormatter:&quot;);\n            pluginList.add(&quot;--plugin&quot;);\n            pluginList.add(&quot;rerun:target/failedScenarios.txt&quot;);\n\n            /* Location for BDD extent report. */\n            ExtentProperties extentProperties = ExtentProperties.INSTANCE;\n            extentProperties.setReportPath(&quot;location/Extent_report.html&quot;);\n\n            /*\n             * Adding cucumberOptions.\n             * \n             * You can get the tag value from excel and pass it here. We need to add @ before tag value.\n             */\n            RuntimeOptions ro = new RuntimeOptions(pluginList);\n            ro.getFilters().add(&quot;@&quot;+tag);\n            ro.getFeaturePaths().add(&quot;location of feature files&quot;);\n            ro.getGlue().add(&quot;location of glue code&quot;);\n\n            /* Loads all the resources into Cucumber RunTime class and execute. */\n            cucumber.runtime.Runtime runtime = new cucumber.runtime.Runtime(resourceLoader, classFinder, classLoader,\n                    ro);\n            runtime.run();\n}catch(Exception e){\n// Handle exception\n}\n</code></pre>\n"}],"owner":{"account_id":22141353,"reputation":1,"user_id":16391333,"display_name":"Aarsha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":586,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672929006,"creation_date":1625576988,"question_id":68271205,"body_markdown":"Normally I would write a cucumber option as below:\r\n\r\n    @CucumberOptions(\r\n        \tfeatures = &quot;src\\\\main\\\\java\\\\feature&quot;\r\n            \t, glue= &quot;stepdefination&quot;,\r\n\t            plugin= {&quot;com.cucumber.listener.ExtentCucumberFormatter:Report/Report.html&quot;}\r\n        \t    tags=&quot;@tag, @tag1, @sort&quot; \r\n               )\r\n\r\npublic class TestRunner extends TestFunction {\r\n\r\n\t@Test\r\n\tpublic void runcukes( ) {\r\n\t\tnew TestNGCucumberRunner(getClass()).runCukes();\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t@BeforeClass\r\n    public void tags() {\r\n }\r\n\t\t \r\n\t@AfterClass\r\n\tpublic void writeExtentReport() {\r\n\t\tReporter.loadXMLConfig(&quot;extent-config.xml&quot;);\r\n\t}\r\n\r\n}\r\n\r\nMy question is: How can I fetch @tag, @tag1, @sort from an excel file to @cucmberoptions and run the program in Selenium Java? ","title":"How to get @tag from an excel file to CucumberOptions in Selenium java","body":"<p>Normally I would write a cucumber option as below:</p>\n<pre><code>@CucumberOptions(\n        features = &quot;src\\\\main\\\\java\\\\feature&quot;\n            , glue= &quot;stepdefination&quot;,\n            plugin= {&quot;com.cucumber.listener.ExtentCucumberFormatter:Report/Report.html&quot;}\n            tags=&quot;@tag, @tag1, @sort&quot; \n           )\n</code></pre>\n<p>public class TestRunner extends TestFunction {</p>\n<pre><code>@Test\npublic void runcukes( ) {\n    new TestNGCucumberRunner(getClass()).runCukes();\n    \n}\n\n\n@BeforeClass\npublic void tags() {\n</code></pre>\n<p>}</p>\n<pre><code>@AfterClass\npublic void writeExtentReport() {\n    Reporter.loadXMLConfig(&quot;extent-config.xml&quot;);\n}\n</code></pre>\n<p>}</p>\n<p>My question is: How can I fetch @tag, @tag1, @sort from an excel file to @cucmberoptions and run the program in Selenium Java?</p>\n"},{"tags":["python","java"],"comments":[{"owner":{"account_id":4614611,"reputation":6295,"user_id":3741571,"accept_rate":2,"display_name":"chenzhongpu"},"score":0,"creation_date":1672927763,"post_id":75019653,"comment_id":132386645,"body_markdown":"Have a look at https://www.baeldung.com/java-working-with-python","body":"Have a look at <a href=\"https://www.baeldung.com/java-working-with-python\" rel=\"nofollow noreferrer\">baeldung.com/java-working-with-python</a>"}],"answers":[{"tags":[],"owner":{"account_id":15779087,"reputation":29,"user_id":11386042,"display_name":"Felipe Kafuri"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1672928888,"creation_date":1672928888,"answer_id":75019965,"question_id":75019653,"body_markdown":"Try this my friend https://pythonhosted.org/javabridge/java2python.html it might help you with the solution. But I never tried my self","title":"How could I use a method from a Python code in a Java?","body":"<p>Try this my friend <a href=\"https://pythonhosted.org/javabridge/java2python.html\" rel=\"nofollow noreferrer\">https://pythonhosted.org/javabridge/java2python.html</a> it might help you with the solution. But I never tried my self</p>\n"},{"tags":[],"owner":{"account_id":27164886,"reputation":1,"user_id":20702542,"display_name":"Nithin Rokkam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672929001,"creation_date":1672929001,"answer_id":75019987,"question_id":75019653,"body_markdown":"You can use Java Runtime. exec() to run python script, As an example first create a python script file using shebang and then set it executable","title":"How could I use a method from a Python code in a Java?","body":"<p>You can use Java Runtime. exec() to run python script, As an example first create a python script file using shebang and then set it executable</p>\n"}],"owner":{"account_id":27414177,"reputation":1,"user_id":20913654,"display_name":"RandyLyroyd"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1673175012,"answer_count":2,"score":0,"last_activity_date":1672929001,"creation_date":1672927443,"question_id":75019653,"body_markdown":"So I have a Python script that look like this:\r\n```\r\ndef methodOne():\r\n    print(&quot;Hello I am the first method&quot;)\r\n\r\ndef methodTwo():\r\n    print(&quot;Hello I am the second method&quot;)\r\n```\r\nAnd I have a simple Java script like this:\r\n\r\n```\r\npublic class helloworld {\r\n\r\n    public static void main(String[] args) {\r\n        //Here I want to call the Methods that are in the Python script\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nBut I can&#180;t figure out how I could call those methods in the Java file. Is there a way to do this?","title":"How could I use a method from a Python code in a Java?","body":"<p>So I have a Python script that look like this:</p>\n<pre><code>def methodOne():\n    print(&quot;Hello I am the first method&quot;)\n\ndef methodTwo():\n    print(&quot;Hello I am the second method&quot;)\n</code></pre>\n<p>And I have a simple Java script like this:</p>\n<pre><code>public class helloworld {\n\n    public static void main(String[] args) {\n        //Here I want to call the Methods that are in the Python script\n    }\n\n}\n</code></pre>\n<p>But I can´t figure out how I could call those methods in the Java file. Is there a way to do this?</p>\n"},{"tags":["java","string","addition","integer-arithmetic","string-conversion"],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299848,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672913008,"creation_date":1672913008,"answer_id":75016720,"question_id":75016577,"body_markdown":"The loop iterates over `--T`, and then you use `T` as the array index for the result, meaning you&#39;re getting the results in **reverse** order. One way to solve this is to use a straight-up ascending for loop and use its index as the array index:\r\n\r\n  \r\n    for (int i = 0; i &lt; T; ++i) {\r\n        // The logic remains unchanged\r\n        String arr[] = sc.nextLine().split(&quot; &quot;);\r\n\r\n        System.out.println(&quot;arr[0]: &quot; + Integer.parseInt(arr[0]));\r\n        System.out.println(&quot;arr[1]: &quot; + Integer.parseInt(arr[1]));\r\n        System.out.println(&quot;arr[2]: &quot; + Integer.parseInt(arr[2]));\r\n\r\n        // i is used for the array index, not T\r\n        if ((Integer.parseInt(arr[0]) + Integer.parseInt(arr[1]) + Integer.parseInt(arr[2])) == 180) {\r\n            output[i] = &quot;YES&quot;;\r\n        } else {\r\n            output[i] = &quot;NO&quot;;\r\n        }\r\n    }","title":"Can&#39;t we convert string into Integer and add it to other Integers at the same time and check in a if condition if it equals another integer?","body":"<p>The loop iterates over <code>--T</code>, and then you use <code>T</code> as the array index for the result, meaning you're getting the results in <strong>reverse</strong> order. One way to solve this is to use a straight-up ascending for loop and use its index as the array index:</p>\n<pre><code>for (int i = 0; i &lt; T; ++i) {\n    // The logic remains unchanged\n    String arr[] = sc.nextLine().split(&quot; &quot;);\n\n    System.out.println(&quot;arr[0]: &quot; + Integer.parseInt(arr[0]));\n    System.out.println(&quot;arr[1]: &quot; + Integer.parseInt(arr[1]));\n    System.out.println(&quot;arr[2]: &quot; + Integer.parseInt(arr[2]));\n\n    // i is used for the array index, not T\n    if ((Integer.parseInt(arr[0]) + Integer.parseInt(arr[1]) + Integer.parseInt(arr[2])) == 180) {\n        output[i] = &quot;YES&quot;;\n    } else {\n        output[i] = &quot;NO&quot;;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1672928570,"creation_date":1672913203,"answer_id":75016762,"question_id":75016577,"body_markdown":"The variable `T` runs &quot;backwards&quot;; it starts at - in the example - `2` and ends at `0`. Variable `T` is also used to index the `output` array. This means that:\r\n- `output[2]` correlates with the 1st iteration (i.e. the input `40 40 100`), \r\n- `output[1]` correlates with the 2nd iteration (i.e. the input `45 45 90`), and\r\n- `output[0]` correlates with the 3rd iteration (i.e. the input `180 1 1`).\r\n\r\nNow we see that - in fact - the value of `output[0]` (being `&quot;NO&quot;`) is correct since `180 + 1 + 1 = 182 != 180`.\r\n\r\nI rewrote the program such that the `output` is stored in the order the values are calculates:\r\n\r\n    class Ideone {\r\n      public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in);\r\n        int num = Integer.parseInt(sc.nextLine().split(&quot; &quot;)[0]);\r\n        String[] output = new String[num];\r\n        for (int index = 0; index &lt; num; ++index) {\r\n          String arr[] = sc.nextLine().split(&quot; &quot;);\r\n    \r\n          System.out.println(&quot;arr[0]: &quot; + Integer.parseInt(arr[0]));\r\n          System.out.println(&quot;arr[1]: &quot; + Integer.parseInt(arr[1]));\r\n          System.out.println(&quot;arr[2]: &quot; + Integer.parseInt(arr[2]));\r\n          if ((Integer.parseInt(arr[0]) + Integer.parseInt(arr[1]) + Integer.parseInt(arr[2])) == 180) {\r\n            output[index] = &quot;YES&quot;;\r\n          } else {\r\n            output[index] = &quot;NO&quot;;\r\n          }\r\n        }\r\n        System.out.println(Arrays.toString(output));\r\n      }\r\n    }\r\n\r\nThis then gives the output:\r\n\r\n    ...\r\n    [YES, YES, NO]\r\n\r\n[&lt;kbd&gt;`Ideone.com` demo&lt;/kbd&gt;][ideone]\r\n\r\n--- \r\n\r\nSome remarks:\r\n- We should use descriptive names for variables (e.g. `String[] arr` could be `String[] userInputs`)\r\n- variable names should be writte in `lowerCamelCase` (`int T = ...` -&gt; `int t = ...`)\r\n- Instead of parsing the `String`s over and over again, I would suggest to parse them once, and then - for example - store them in a `List&lt;Integer&gt;` and work with them, e.g.: \r\n\r\n      List&lt;Integer&gt; values = Arrays.stream(arr)\r\n          .mapToInt(Integer::parseInt)\r\n          .boxed()\r\n          .toList();\r\n- While possible, it is uncommon to write the array-brackets (`[]`) after the variable name. We normally write them after the type since they influence the type (`String arr[]` -&gt; `String[] arr`).\r\n\r\n[ideone]: https://ideone.com/rsO8t4","title":"Can&#39;t we convert string into Integer and add it to other Integers at the same time and check in a if condition if it equals another integer?","body":"<p>The variable <code>T</code> runs &quot;backwards&quot;; it starts at - in the example - <code>2</code> and ends at <code>0</code>. Variable <code>T</code> is also used to index the <code>output</code> array. This means that:</p>\n<ul>\n<li><code>output[2]</code> correlates with the 1st iteration (i.e. the input <code>40 40 100</code>),</li>\n<li><code>output[1]</code> correlates with the 2nd iteration (i.e. the input <code>45 45 90</code>), and</li>\n<li><code>output[0]</code> correlates with the 3rd iteration (i.e. the input <code>180 1 1</code>).</li>\n</ul>\n<p>Now we see that - in fact - the value of <code>output[0]</code> (being <code>&quot;NO&quot;</code>) is correct since <code>180 + 1 + 1 = 182 != 180</code>.</p>\n<p>I rewrote the program such that the <code>output</code> is stored in the order the values are calculates:</p>\n<pre><code>class Ideone {\n  public static void main(String[] args) {\n    Scanner sc = new Scanner(System.in);\n    int num = Integer.parseInt(sc.nextLine().split(&quot; &quot;)[0]);\n    String[] output = new String[num];\n    for (int index = 0; index &lt; num; ++index) {\n      String arr[] = sc.nextLine().split(&quot; &quot;);\n\n      System.out.println(&quot;arr[0]: &quot; + Integer.parseInt(arr[0]));\n      System.out.println(&quot;arr[1]: &quot; + Integer.parseInt(arr[1]));\n      System.out.println(&quot;arr[2]: &quot; + Integer.parseInt(arr[2]));\n      if ((Integer.parseInt(arr[0]) + Integer.parseInt(arr[1]) + Integer.parseInt(arr[2])) == 180) {\n        output[index] = &quot;YES&quot;;\n      } else {\n        output[index] = &quot;NO&quot;;\n      }\n    }\n    System.out.println(Arrays.toString(output));\n  }\n}\n</code></pre>\n<p>This then gives the output:</p>\n<pre><code>...\n[YES, YES, NO]\n</code></pre>\n<p><a href=\"https://ideone.com/rsO8t4\" rel=\"nofollow noreferrer\"><kbd><code>Ideone.com</code> demo</kbd></a></p>\n<hr />\n<p>Some remarks:</p>\n<ul>\n<li><p>We should use descriptive names for variables (e.g. <code>String[] arr</code> could be <code>String[] userInputs</code>)</p>\n</li>\n<li><p>variable names should be writte in <code>lowerCamelCase</code> (<code>int T = ...</code> -&gt; <code>int t = ...</code>)</p>\n</li>\n<li><p>Instead of parsing the <code>String</code>s over and over again, I would suggest to parse them once, and then - for example - store them in a <code>List&lt;Integer&gt;</code> and work with them, e.g.:</p>\n<pre><code>List&lt;Integer&gt; values = Arrays.stream(arr)\n    .mapToInt(Integer::parseInt)\n    .boxed()\n    .toList();\n</code></pre>\n</li>\n<li><p>While possible, it is uncommon to write the array-brackets (<code>[]</code>) after the variable name. We normally write them after the type since they influence the type (<code>String arr[]</code> -&gt; <code>String[] arr</code>).</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":18271532,"reputation":24,"user_id":13302222,"display_name":"Marzen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672913234,"creation_date":1672913234,"answer_id":75016773,"question_id":75016577,"body_markdown":"you&#39;ve assigned YES/NO into the array `output` with a reserved sort.when you are using `--T` the index of `output` in loop was 2,1,0 so the values in output are [&quot;NO&quot;,&quot;YES&quot;,&quot;YES]. that&#39;s why you get a wrong result.\r\n\r\nYou can change the while loop to a simple for loop.\r\n`for(int i=0;i&lt;output.size;i++`)` and assign YES/NO to output[i]","title":"Can&#39;t we convert string into Integer and add it to other Integers at the same time and check in a if condition if it equals another integer?","body":"<p>you've assigned YES/NO into the array <code>output</code> with a reserved sort.when you are using <code>--T</code> the index of <code>output</code> in loop was 2,1,0 so the values in output are [&quot;NO&quot;,&quot;YES&quot;,&quot;YES]. that's why you get a wrong result.</p>\n<p>You can change the while loop to a simple for loop.\n<code>for(int i=0;i&lt;output.size;i++</code>)` and assign YES/NO to output[i]</p>\n"}],"owner":{"account_id":27216231,"reputation":37,"user_id":20746216,"display_name":"JavaBoi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75016762,"answer_count":3,"score":2,"last_activity_date":1672928570,"creation_date":1672912397,"question_id":75016577,"body_markdown":"I was solving a question on Codechef and I encountered this problem.\r\n\r\nHere is the link to the question. https://www.codechef.com/LP0TO101/problems/FLOW013\r\n\r\nBasically we are given three angles and we need to check if their sum is 180 and therefore it is a triangle, and if it is we need to print YES or else we need to print NO.\r\n\r\nWe are given input in the following format.\r\n\r\n```\r\n3 \r\n40 40 100\r\n45 45 90\r\n180 1 1\r\n```\r\n[Note: There is a blank string(&quot; &quot;) right after 3.]\r\n\r\nThis is my source code.\r\n\r\n\r\n```\r\nimport java.util.Scanner;\r\nimport java.util.stream.IntStream;\r\n\r\nclass Codechef {\r\n\tpublic static void main(String[] args) throws java.lang.Exception {\r\n\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\tint T = Integer.parseInt(sc.nextLine().split(&quot; &quot;)[0]);\r\n\t\tString[] output = new String[T];\r\n\t\twhile (--T &gt;= 0) {\r\n\t\t\tString arr[] = sc.nextLine().split(&quot; &quot;);\r\n\r\n\t\t\tSystem.out.println(&quot;arr[0]: &quot; + Integer.parseInt(arr[0]));\r\n\t\t\tSystem.out.println(&quot;arr[1]: &quot; + Integer.parseInt(arr[1]));\r\n\t\t\tSystem.out.println(&quot;arr[2]: &quot; + Integer.parseInt(arr[2]));\r\n\t\t\tif ((Integer.parseInt(arr[0]) + Integer.parseInt(arr[1]) + Integer.parseInt(arr[2])) == 180) {\r\n\t\t\t\toutput[T] = &quot;YES&quot;;\r\n\t\t\t} else {\r\n\t\t\t\toutput[T] = &quot;NO&quot;;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tIntStream.range(0, output.length).forEach(h -&gt; System.out.println(output[h]));\r\n\r\n\t}\r\n}\r\n\r\n\r\n```\r\n\r\nThe output it is returning on Codechef is:\r\n```\r\narr[0]: 40\r\narr[1]: 40\r\narr[2]: 100\r\narr[0]: 45\r\narr[1]: 45\r\narr[2]: 90\r\narr[0]: 180\r\narr[1]: 1\r\narr[2]: 1\r\nNO\r\nYES\r\nYES\r\n```\r\nWhat is wrong here, please help.\r\n\r\n&gt;My question is how come arr[0]: 40 + arr[1]: 40 + arr[2]: 100 is not equal to 180, I mean 40 + 40 + 100 should be equal to 180, so what is wrong.\r\n\r\n\r\nWhen in the Eclipse IDE I gave the input of:\r\n```\r\n1\r\n40 40 100\r\n```\r\nIt showed me output of: \r\n```\r\narr[0]: 40\r\narr[1]: 40\r\narr[2]: 100\r\nYES\r\n```\r\nBut when I give the same output there, it doesn&#39;t executes fully and keeps processing while it is incomplete and shows me output of(I am inserting the image): \r\n\r\n![enter image description here](https://i.stack.imgur.com/SrWzk.png)\r\n\r\n\r\nNote: The red square in the right corner of the image shows that it is still executing.\r\n\r\nHowever when I have removed the printing statements and gave the same input in eclipse, it showed me an output of: (Inserting an image again) \r\n\r\n![enter image description here](https://i.stack.imgur.com/fBZoC.png)\r\n\r\n\r\nI hope you have understood my problem. \r\n\r\n&gt; My question again is how come arr[0]: 40 + arr[1]: 40 + arr[2]: 100 is not equal to 180, I mean 40 + 40 + 100 should be equal to 180, what is wrong.\r\nAnd when I am executing it individually it is showing me the right output but when I do the test case on Codechef it is showing the opposite answer.\r\n\r\n What is wrong here?\r\n\r\n","title":"Can&#39;t we convert string into Integer and add it to other Integers at the same time and check in a if condition if it equals another integer?","body":"<p>I was solving a question on Codechef and I encountered this problem.</p>\n<p>Here is the link to the question. <a href=\"https://www.codechef.com/LP0TO101/problems/FLOW013\" rel=\"nofollow noreferrer\">https://www.codechef.com/LP0TO101/problems/FLOW013</a></p>\n<p>Basically we are given three angles and we need to check if their sum is 180 and therefore it is a triangle, and if it is we need to print YES or else we need to print NO.</p>\n<p>We are given input in the following format.</p>\n<pre><code>3 \n40 40 100\n45 45 90\n180 1 1\n</code></pre>\n<p>[Note: There is a blank string(&quot; &quot;) right after 3.]</p>\n<p>This is my source code.</p>\n<pre><code>import java.util.Scanner;\nimport java.util.stream.IntStream;\n\nclass Codechef {\n    public static void main(String[] args) throws java.lang.Exception {\n\n        Scanner sc = new Scanner(System.in);\n        int T = Integer.parseInt(sc.nextLine().split(&quot; &quot;)[0]);\n        String[] output = new String[T];\n        while (--T &gt;= 0) {\n            String arr[] = sc.nextLine().split(&quot; &quot;);\n\n            System.out.println(&quot;arr[0]: &quot; + Integer.parseInt(arr[0]));\n            System.out.println(&quot;arr[1]: &quot; + Integer.parseInt(arr[1]));\n            System.out.println(&quot;arr[2]: &quot; + Integer.parseInt(arr[2]));\n            if ((Integer.parseInt(arr[0]) + Integer.parseInt(arr[1]) + Integer.parseInt(arr[2])) == 180) {\n                output[T] = &quot;YES&quot;;\n            } else {\n                output[T] = &quot;NO&quot;;\n            }\n        }\n\n        IntStream.range(0, output.length).forEach(h -&gt; System.out.println(output[h]));\n\n    }\n}\n\n\n</code></pre>\n<p>The output it is returning on Codechef is:</p>\n<pre><code>arr[0]: 40\narr[1]: 40\narr[2]: 100\narr[0]: 45\narr[1]: 45\narr[2]: 90\narr[0]: 180\narr[1]: 1\narr[2]: 1\nNO\nYES\nYES\n</code></pre>\n<p>What is wrong here, please help.</p>\n<blockquote>\n<p>My question is how come arr[0]: 40 + arr[1]: 40 + arr[2]: 100 is not equal to 180, I mean 40 + 40 + 100 should be equal to 180, so what is wrong.</p>\n</blockquote>\n<p>When in the Eclipse IDE I gave the input of:</p>\n<pre><code>1\n40 40 100\n</code></pre>\n<p>It showed me output of:</p>\n<pre><code>arr[0]: 40\narr[1]: 40\narr[2]: 100\nYES\n</code></pre>\n<p>But when I give the same output there, it doesn't executes fully and keeps processing while it is incomplete and shows me output of(I am inserting the image):</p>\n<p><img src=\"https://i.stack.imgur.com/SrWzk.png\" alt=\"enter image description here\" /></p>\n<p>Note: The red square in the right corner of the image shows that it is still executing.</p>\n<p>However when I have removed the printing statements and gave the same input in eclipse, it showed me an output of: (Inserting an image again)</p>\n<p><img src=\"https://i.stack.imgur.com/fBZoC.png\" alt=\"enter image description here\" /></p>\n<p>I hope you have understood my problem.</p>\n<blockquote>\n<p>My question again is how come arr[0]: 40 + arr[1]: 40 + arr[2]: 100 is not equal to 180, I mean 40 + 40 + 100 should be equal to 180, what is wrong.\nAnd when I am executing it individually it is showing me the right output but when I do the test case on Codechef it is showing the opposite answer.</p>\n</blockquote>\n<p>What is wrong here?</p>\n"},{"tags":["java","vert.x","blocking","nonblocking","jmc"],"comments":[{"owner":{"account_id":2446461,"reputation":8725,"user_id":2133695,"display_name":"tsegismont"},"score":0,"creation_date":1672933123,"post_id":75019835,"comment_id":132388819,"body_markdown":"you might be interested in https://stackoverflow.com/a/63883926/2133695","body":"you might be interested in <a href=\"https://stackoverflow.com/a/63883926/2133695\">stackoverflow.com/a/63883926/2133695</a>"},{"owner":{"account_id":2616549,"reputation":1922,"user_id":2265497,"accept_rate":41,"display_name":"slesh"},"score":0,"creation_date":1672934753,"post_id":75019835,"comment_id":132389452,"body_markdown":"I saw it, that SO mentioned in my message. My question is more about is it okay to see such amount of &quot;Java Monitor Blocked&quot; events in JMC?","body":"I saw it, that SO mentioned in my message. My question is more about is it okay to see such amount of &quot;Java Monitor Blocked&quot; events in JMC?"},{"owner":{"account_id":2446461,"reputation":8725,"user_id":2133695,"display_name":"tsegismont"},"score":0,"creation_date":1673623826,"post_id":75019835,"comment_id":132547783,"body_markdown":"Can you share a simple reproducer on GitHub?","body":"Can you share a simple reproducer on GitHub?"}],"owner":{"account_id":2616549,"reputation":1922,"user_id":2265497,"accept_rate":41,"display_name":"slesh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1672928273,"creation_date":1672928273,"question_id":75019835,"body_markdown":"I do profile my vert.x based http service and noticed in JMC that all my envelop threads(aka verticles) produce lots of &quot;Java Monitor Blocked&quot; events in class io.vertx.core.http.impl.Http1xServerConnection. Javadoc of this class says: &quot;The internal state is protected using the synchronized keyword. If always used on the same event loop, then we benefit from biased locking which makes the overhead of synchronized near zero.&quot;. I noticed that JDK17 I use has BiasedLocking turned off. I try to run test with turned on BiasedLocking but nothing changed. It also says that BiasedLocking was deprecated and could be removed. In the internet I found this SO topic which says that it&#39;s fine that vert.x uses synchronized in some classes https://stackoverflow.com/questions/63868643/does-vert-x-have-plans-addressing-the-deprecation-of-biased-locking-in-java-15\r\n\r\nMy question is that does the JMC profile looks good or I should worry and there is a performance issues in my code? [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8XbBU.png","title":"Is JMC&#39;s &quot;Java Monitor Blocked&quot; caused by vert.x Http1xServerConnection problem?","body":"<p>I do profile my vert.x based http service and noticed in JMC that all my envelop threads(aka verticles) produce lots of &quot;Java Monitor Blocked&quot; events in class io.vertx.core.http.impl.Http1xServerConnection. Javadoc of this class says: &quot;The internal state is protected using the synchronized keyword. If always used on the same event loop, then we benefit from biased locking which makes the overhead of synchronized near zero.&quot;. I noticed that JDK17 I use has BiasedLocking turned off. I try to run test with turned on BiasedLocking but nothing changed. It also says that BiasedLocking was deprecated and could be removed. In the internet I found this SO topic which says that it's fine that vert.x uses synchronized in some classes <a href=\"https://stackoverflow.com/questions/63868643/does-vert-x-have-plans-addressing-the-deprecation-of-biased-locking-in-java-15\">Does Vert.x have plans addressing the deprecation of biased locking in Java 15?</a></p>\n<p>My question is that does the JMC profile looks good or I should worry and there is a performance issues in my code? <a href=\"https://i.stack.imgur.com/8XbBU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8XbBU.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","unit-testing","testing","junit"],"comments":[{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":1,"creation_date":1672951449,"post_id":75019826,"comment_id":132394929,"body_markdown":"you don&#39;t get any other exception stacktrace? Btw, it&#39;s not a good idea to have `DEFINED_PORT`, it could be random port too..","body":"you don&#39;t get any other exception stacktrace? Btw, it&#39;s not a good idea to have <code>DEFINED_PORT</code>, it could be random port too.."},{"owner":{"account_id":2726668,"reputation":4982,"user_id":2351527,"accept_rate":67,"display_name":"codeX"},"score":0,"creation_date":1672990940,"post_id":75019826,"comment_id":132401712,"body_markdown":"Thanks for the comment, @Eugene.  No other potential traces are thrown. If I am not using a defined port, how can I make it target the 8080 port ? Let me try it out, configuring that in application.properties.","body":"Thanks for the comment, @Eugene.  No other potential traces are thrown. If I am not using a defined port, how can I make it target the 8080 port ? Let me try it out, configuring that in application.properties."},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1672991850,"post_id":75019826,"comment_id":132401892,"body_markdown":"without a stacktrace, this is impossible to diagnose, I am sure you know that. You don&#39;t &quot;need&quot; to target 8080 usually, what if there is some other service that is running on 8080 on that host? That&#39;s the entire point of `RANDOM_PORT` and then you use annotation `@LocalServerPort` (or `@Value(&quot;${local.server.port}&quot;`) if you are on a spring version that does not have that yet","body":"without a stacktrace, this is impossible to diagnose, I am sure you know that. You don&#39;t &quot;need&quot; to target 8080 usually, what if there is some other service that is running on 8080 on that host? That&#39;s the entire point of <code>RANDOM_PORT</code> and then you use annotation <code>@LocalServerPort</code> (or <code>@Value(&quot;${local.server.port}&quot;</code>) if you are on a spring version that does not have that yet"},{"owner":{"account_id":2726668,"reputation":4982,"user_id":2351527,"accept_rate":67,"display_name":"codeX"},"score":0,"creation_date":1673028668,"post_id":75019826,"comment_id":132413036,"body_markdown":"Thanks Eugene.I have defined the port number in application.yaml as 8080, and it&#39;s taken by default during the execution in local. But why can&#39;t it take it in the build ?\n\nI tried using Random Port and  @Value(&quot;${local.server.port}&quot;) but still the default port only taken because /sampletest executes the snippet where it catches the port on the fly from application.yaml.\n\nI have seen the trace and port is the only problem. If I am able to make the get call get this random port number on the fly, I believe it will do it. Trying that now.","body":"Thanks Eugene.I have defined the port number in application.yaml as 8080, and it&#39;s taken by default during the execution in local. But why can&#39;t it take it in the build ?  I tried using Random Port and  @Value(&quot;${local.server.port}&quot;) but still the default port only taken because /sampletest executes the snippet where it catches the port on the fly from application.yaml.  I have seen the trace and port is the only problem. If I am able to make the get call get this random port number on the fly, I believe it will do it. Trying that now."},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1673083833,"post_id":75019826,"comment_id":132421451,"body_markdown":"after you have the port in your test class, for example `@Autowired private WebTestClient webClient;`, you need to use it in the testing code, for example: `webClient.get().uri(&quot;http://localhost:{port}/actuator/health&quot;, this.port)`","body":"after you have the port in your test class, for example <code>@Autowired private WebTestClient webClient;</code>, you need to use it in the testing code, for example: <code>webClient.get().uri(&quot;http:&#47;&#47;localhost:{port}&#47;actuator&#47;health&zwnj;&#8203;&quot;, this.port)</code>"}],"owner":{"account_id":2726668,"reputation":4982,"user_id":2351527,"accept_rate":67,"display_name":"codeX"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1672928249,"creation_date":1672928249,"question_id":75019826,"body_markdown":"I have a test case class something like\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)\r\n    @AutoConfigureWebTestClient\r\n    public class sampleTests {\r\n    \r\n       when(test.getUrl()).thenReturn(&quot;http://localhost:8080/sampletest&quot;);\r\n    \r\n     @Test\r\n      public void getEndpoint() throws Exception {\r\n            webTestClient.get().uri(&quot;/sampletest&quot;).exchange().expectStatus().isOk().expectBody().consumeWith(System.out::println).json(expectedBody);\r\n    \r\n             }\r\n    \r\n    }\r\n\r\nThis is passing in local, but got failed with the following error when executed in the azure DevOps pipeline.\r\n\r\n    java.lang.AssertionError: Status expected:&lt;200 OK&gt; but was:&lt;500 INTERNAL_SERVER_ERROR&gt;\r\n\r\nAny insights on the same will be much appreciated.","title":"Springboot REST API Testcase passing in local but failing in build","body":"<p>I have a test case class something like</p>\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)\n@AutoConfigureWebTestClient\npublic class sampleTests {\n\n   when(test.getUrl()).thenReturn(&quot;http://localhost:8080/sampletest&quot;);\n\n @Test\n  public void getEndpoint() throws Exception {\n        webTestClient.get().uri(&quot;/sampletest&quot;).exchange().expectStatus().isOk().expectBody().consumeWith(System.out::println).json(expectedBody);\n\n         }\n\n}\n</code></pre>\n<p>This is passing in local, but got failed with the following error when executed in the azure DevOps pipeline.</p>\n<pre><code>java.lang.AssertionError: Status expected:&lt;200 OK&gt; but was:&lt;500 INTERNAL_SERVER_ERROR&gt;\n</code></pre>\n<p>Any insights on the same will be much appreciated.</p>\n"},{"tags":["java","jsp","jdbc"],"owner":{"account_id":27381020,"reputation":1,"user_id":20885629,"display_name":"Dipesh Mahajan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672928237,"creation_date":1672928237,"question_id":75019821,"body_markdown":"This is my RegistrationController.jsp\r\n```\r\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\r\n    pageEncoding=&quot;UTF-8&quot;%&gt;\r\n&lt;%@page import=&quot;com.jsplogindemo.dao.UserDao&quot; %&gt;\r\n&lt;%@page import=&quot;com.jsplogindemo.daoimpl.UserDaoImpl&quot; %&gt;\r\n\r\n &lt;jsp:useBean class=&quot;com.jsplogindemo.entity.User&quot; \r\n    id=&quot;user&quot; scope=&quot;page&quot;&gt;&lt;/jsp:useBean&gt;\r\n    &lt;jsp:setProperty name=&quot;user&quot; property=&quot;*&quot;/&gt;\r\n    \r\n    &lt;%\r\n    \tUserDao daoImpl = new UserDaoImpl();\r\n    \t\r\n    \tif(daoImpl.addNewUser(user)) {\r\n    \t\tresponse.sendRedirect(\r\n    \t\t\t\t&quot;login.jsp?msg=regsuccess&quot;);\r\n    \t}\r\n    \telse {\r\n    \t\tresponse.sendRedirect(\r\n    \t\t\t\t&quot;registration.jsp?msg=regerror&quot;);\r\n    \t}\r\n    %&gt;\r\n```\r\nThis is LoginController.jsp\r\n\r\n```\r\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\r\n    pageEncoding=&quot;UTF-8&quot;%&gt;\r\n&lt;%@page import=&quot;com.jsplogindemo.dao.UserDao&quot; %&gt;\r\n&lt;%@page import=&quot;com.jsplogindemo.daoimpl.UserDaoImpl&quot; %&gt;\r\n\r\n &lt;jsp:useBean class=&quot;com.jsplogindemo.entity.User&quot; \r\n    id=&quot;user&quot; scope=&quot;page&quot;&gt;&lt;/jsp:useBean&gt;\r\n    &lt;jsp:setProperty name=&quot;user&quot; property=&quot;*&quot;/&gt;\r\n    \r\n    &lt;%\r\n    \tUserDao daoImpl = new UserDaoImpl();\r\n    \t\r\n    \tif(daoImpl.checkUserCredentials(user)) {\r\n    \t\t\r\n    \t\tsession.setAttribute(&quot;USERNAME&quot;, \r\n    \t\t\t\tuser.getUsername());\r\n    \t\tresponse.sendRedirect(&quot;home&quot;);\r\n    \t}\r\n    \telse {\r\n    \t\tresponse.sendRedirect(\r\n    \t\t\t\t&quot;login.jsp?msg=loginerror&quot;);\r\n    \t}\r\n    %&gt;\r\n```\r\nThis is User.java \r\n\r\n```\r\npackage com.jsplogindemo.entity;\r\n\r\npublic class User {\r\n     private String username;\r\n     private String email;\r\n     private String password;\r\n     \r\n\t public User() {\r\n\t\t\r\n\t}\r\n\tpublic User(String username, String email, String password) {\r\n\t\tsuper();\r\n\t\tthis.setUsername(username);\r\n\t\tthis.setEmail(email);\r\n\t\tthis.setPassword(password);\r\n\t}\r\n\tpublic String getEmail() {\r\n\t\treturn email;\r\n\t}\r\n\tpublic void setEmail(String email) {\r\n\t\tthis.email = email;\r\n\t}\r\n\tpublic String getUsername() {\r\n\t\treturn username;\r\n\t}\r\n\tpublic void setUsername(String username) {\r\n\t\tthis.username = username;\r\n\t}\r\n\tpublic String getPassword() {\r\n\t\treturn password;\r\n\t}\r\n\tpublic void setPassword(String password) {\r\n\t\tthis.password = password;\r\n\t}\r\n\t\r\n     \r\n     \r\n}\r\n```\r\nThis is my folder structure\r\n[folder structure](https://i.stack.imgur.com/Jb1Go.jpg)\r\n\r\n\r\nI want to register the user and take to the login page but it show this type of error\r\n\r\nI am using Apache Tomcat/9.0.70\r\n\r\n&gt; HTTP Status 500 – Internal Server Error\r\n&gt; Type Exception Report\r\n&gt; \r\n&gt; Message /controller/RegistrationController.jsp (line: [6], column: [1]) The value for the useBean class attribute [com.jsplogindemo.entity.User] is invalid.\r\n&gt; \r\n&gt; Description The server encountered an unexpected condition that prevented it from fulfilling the request.\r\n&gt; \r\n&gt; Exception ","title":"HTTP Status 500 – Internal Server Error - The value for the ___ class attribute [ ____ ] is invalid","body":"<p>This is my RegistrationController.jsp</p>\n<pre><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\n    pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%@page import=&quot;com.jsplogindemo.dao.UserDao&quot; %&gt;\n&lt;%@page import=&quot;com.jsplogindemo.daoimpl.UserDaoImpl&quot; %&gt;\n\n &lt;jsp:useBean class=&quot;com.jsplogindemo.entity.User&quot; \n    id=&quot;user&quot; scope=&quot;page&quot;&gt;&lt;/jsp:useBean&gt;\n    &lt;jsp:setProperty name=&quot;user&quot; property=&quot;*&quot;/&gt;\n    \n    &lt;%\n        UserDao daoImpl = new UserDaoImpl();\n        \n        if(daoImpl.addNewUser(user)) {\n            response.sendRedirect(\n                    &quot;login.jsp?msg=regsuccess&quot;);\n        }\n        else {\n            response.sendRedirect(\n                    &quot;registration.jsp?msg=regerror&quot;);\n        }\n    %&gt;\n</code></pre>\n<p>This is LoginController.jsp</p>\n<pre><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\n    pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%@page import=&quot;com.jsplogindemo.dao.UserDao&quot; %&gt;\n&lt;%@page import=&quot;com.jsplogindemo.daoimpl.UserDaoImpl&quot; %&gt;\n\n &lt;jsp:useBean class=&quot;com.jsplogindemo.entity.User&quot; \n    id=&quot;user&quot; scope=&quot;page&quot;&gt;&lt;/jsp:useBean&gt;\n    &lt;jsp:setProperty name=&quot;user&quot; property=&quot;*&quot;/&gt;\n    \n    &lt;%\n        UserDao daoImpl = new UserDaoImpl();\n        \n        if(daoImpl.checkUserCredentials(user)) {\n            \n            session.setAttribute(&quot;USERNAME&quot;, \n                    user.getUsername());\n            response.sendRedirect(&quot;home&quot;);\n        }\n        else {\n            response.sendRedirect(\n                    &quot;login.jsp?msg=loginerror&quot;);\n        }\n    %&gt;\n</code></pre>\n<p>This is User.java</p>\n<pre><code>package com.jsplogindemo.entity;\n\npublic class User {\n     private String username;\n     private String email;\n     private String password;\n     \n     public User() {\n        \n    }\n    public User(String username, String email, String password) {\n        super();\n        this.setUsername(username);\n        this.setEmail(email);\n        this.setPassword(password);\n    }\n    public String getEmail() {\n        return email;\n    }\n    public void setEmail(String email) {\n        this.email = email;\n    }\n    public String getUsername() {\n        return username;\n    }\n    public void setUsername(String username) {\n        this.username = username;\n    }\n    public String getPassword() {\n        return password;\n    }\n    public void setPassword(String password) {\n        this.password = password;\n    }\n    \n     \n     \n}\n</code></pre>\n<p>This is my folder structure\n<a href=\"https://i.stack.imgur.com/Jb1Go.jpg\" rel=\"nofollow noreferrer\">folder structure</a></p>\n<p>I want to register the user and take to the login page but it show this type of error</p>\n<p>I am using Apache Tomcat/9.0.70</p>\n<blockquote>\n<p>HTTP Status 500 – Internal Server Error\nType Exception Report</p>\n<p>Message /controller/RegistrationController.jsp (line: [6], column: [1]) The value for the useBean class attribute [com.jsplogindemo.entity.User] is invalid.</p>\n<p>Description The server encountered an unexpected condition that prevented it from fulfilling the request.</p>\n<p>Exception</p>\n</blockquote>\n"},{"tags":["java","java-8","precision","jit","java-17"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":4,"creation_date":1670624386,"post_id":74747949,"comment_id":131924271,"body_markdown":"Could explain where the error is?  For example, what result do you see, and what result to you expect to see?  I realize the arrays are large but pointing out what values (at least a few of them) are wrong might help folks debug on their own end.","body":"Could explain where the error is?  For example, what result do you see, and what result to you expect to see?  I realize the arrays are large but pointing out what values (at least a few of them) are wrong might help folks debug on their own end."},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":2,"creation_date":1670668445,"post_id":74747949,"comment_id":131929541,"body_markdown":"Please [edit] your question to include your source code as a working [mcve], which can be tested by others.","body":"Please <a href=\"https://stackoverflow.com/posts/74747949/edit\">edit</a> your question to include your source code as a working <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which can be tested by others."},{"owner":{"account_id":5655489,"reputation":308,"user_id":4474819,"display_name":"greg"},"score":0,"creation_date":1670669858,"post_id":74747949,"comment_id":131929731,"body_markdown":"Yes I will do this, for that I need to rework a bit the code such that I can reproduce in a minimal unit test.","body":"Yes I will do this, for that I need to rework a bit the code such that I can reproduce in a minimal unit test."},{"owner":{"account_id":5655489,"reputation":308,"user_id":4474819,"display_name":"greg"},"score":0,"creation_date":1672928033,"post_id":74747949,"comment_id":132386748,"body_markdown":"@Progman Just added a link to the reproductible example.","body":"@Progman Just added a link to the reproductible example."},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1672932526,"post_id":74747949,"comment_id":132388581,"body_markdown":"@greg Please add your code to the question itself, not on an external site.","body":"@greg Please add your code to the question itself, not on an external site."},{"owner":{"account_id":5655489,"reputation":308,"user_id":4474819,"display_name":"greg"},"score":0,"creation_date":1672933375,"post_id":74747949,"comment_id":132388914,"body_markdown":"@Progman It&#39;s not a simple code snippet there are multiple classes involved so I&#39;am not sure how to proceed on stackoverlow as I do not see any import zipped or similar button","body":"@Progman It&#39;s not a simple code snippet there are multiple classes involved so I&#39;am not sure how to proceed on stackoverlow as I do not see any import zipped or similar button"}],"owner":{"account_id":5655489,"reputation":308,"user_id":4474819,"display_name":"greg"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"answer_count":0,"score":5,"last_activity_date":1672928196,"creation_date":1670617162,"question_id":74747949,"body_markdown":"In the context of a scientific computing pipeline implemented in Java, we are using a LeastSquare optimizer from Apache Commons math 3.6.1 and experience strange numerical differences between Java 8 (jdk8u322-b06), Java and Java 17.\r\n\r\nWe noticed differences after migration to Java 17 (currently using 17.0.5.)\r\n\r\nI can reproduce the different behavior between Java 8 and Java 17 in a &quot;simple&quot; unit test without involving the full computing pipeline so all problems that could come from the data loading  or multi threading part are excluded.\r\n\r\nIn JDK 17 the strict floating point semantics has been restored but the results is fully different compared to Java 8 compiled or interpreted. In this case actually the least square optimizer does not converge while it does in the Java 8 case.\r\n\r\nAn important point is that all these results are fully reproducible to the last digit, they are fully predictable on each platform configuration.\r\n\r\nI also but this time in the full pipeline execution observed that I can reproduce numerical difference on Java 8 itself depending if the code is interpreted or compiled (at C2 level or C1 I did not investigated yet)\r\n\r\nI am really puzzled and would like to know if this are known/documented behaviors or if this is a bug in the JDK 8 platform or JDK 17 ?\r\nDoes anyone observed such issues ?\r\n\r\nThanks for any hints !\r\n\r\n\r\n**EDIT**\r\n\r\nI cannot provide here a simple code snippet to reproduce the issue. But I extracted the necessary part of the code to reproduce the behavior in a GitHub repository. Disclaimer : I&#39;am not the original author of the code.\r\n\r\nSteps to reproduce:\r\n* git clone https://github.com/gjevardat/ReproduceFloatingPointBug\r\n* Run the unit test named TimeSeriesModelFitterBugTest\r\nI ran it in eclipse as a Junit5 test.\r\n\r\nTo see the difference of behavior just switch the java.version property from 1.8 to 17 in the pom.xml. \r\n\r\nI can pinpoint the location in Apache math commons were the code diverge:\r\nIn the class LevenbergMarquardtOptimizer of Apache Math commmons 3.6.1 (line 453)\r\n\r\n      double actRed = -1.0;\r\n          if (0.1 * currentCost &lt; previousCost) {\r\n              double r = currentCost / previousCost;\r\n              actRed = 1.0 - r * r;\r\n          }\r\nAt iteration 17 actRed becomes 0 because r==1 in Java 17 while it is slightly positive in Java 8\r\nBecause of the value being 0, later (line 533) the non convergenceException is thrown\r\n\r\n     if (FastMath.abs(actRed) &lt;= TWO_EPS &amp;&amp;\r\n         preRed &lt;= TWO_EPS &amp;&amp; ratio &lt;= 2.0) {\r\n             throw new ConvergenceException(LocalizedFormats.TOO_SMALL_COST_RELATIVE_TOLERANCE,\r\n                                                   costRelativeTolerance);\r\n                } ","title":"Java floating point computations behavior differences","body":"<p>In the context of a scientific computing pipeline implemented in Java, we are using a LeastSquare optimizer from Apache Commons math 3.6.1 and experience strange numerical differences between Java 8 (jdk8u322-b06), Java and Java 17.</p>\n<p>We noticed differences after migration to Java 17 (currently using 17.0.5.)</p>\n<p>I can reproduce the different behavior between Java 8 and Java 17 in a &quot;simple&quot; unit test without involving the full computing pipeline so all problems that could come from the data loading  or multi threading part are excluded.</p>\n<p>In JDK 17 the strict floating point semantics has been restored but the results is fully different compared to Java 8 compiled or interpreted. In this case actually the least square optimizer does not converge while it does in the Java 8 case.</p>\n<p>An important point is that all these results are fully reproducible to the last digit, they are fully predictable on each platform configuration.</p>\n<p>I also but this time in the full pipeline execution observed that I can reproduce numerical difference on Java 8 itself depending if the code is interpreted or compiled (at C2 level or C1 I did not investigated yet)</p>\n<p>I am really puzzled and would like to know if this are known/documented behaviors or if this is a bug in the JDK 8 platform or JDK 17 ?\nDoes anyone observed such issues ?</p>\n<p>Thanks for any hints !</p>\n<p><strong>EDIT</strong></p>\n<p>I cannot provide here a simple code snippet to reproduce the issue. But I extracted the necessary part of the code to reproduce the behavior in a GitHub repository. Disclaimer : I'am not the original author of the code.</p>\n<p>Steps to reproduce:</p>\n<ul>\n<li>git clone <a href=\"https://github.com/gjevardat/ReproduceFloatingPointBug\" rel=\"nofollow noreferrer\">https://github.com/gjevardat/ReproduceFloatingPointBug</a></li>\n<li>Run the unit test named TimeSeriesModelFitterBugTest\nI ran it in eclipse as a Junit5 test.</li>\n</ul>\n<p>To see the difference of behavior just switch the java.version property from 1.8 to 17 in the pom.xml.</p>\n<p>I can pinpoint the location in Apache math commons were the code diverge:\nIn the class LevenbergMarquardtOptimizer of Apache Math commmons 3.6.1 (line 453)</p>\n<pre><code>  double actRed = -1.0;\n      if (0.1 * currentCost &lt; previousCost) {\n          double r = currentCost / previousCost;\n          actRed = 1.0 - r * r;\n      }\n</code></pre>\n<p>At iteration 17 actRed becomes 0 because r==1 in Java 17 while it is slightly positive in Java 8\nBecause of the value being 0, later (line 533) the non convergenceException is thrown</p>\n<pre><code> if (FastMath.abs(actRed) &lt;= TWO_EPS &amp;&amp;\n     preRed &lt;= TWO_EPS &amp;&amp; ratio &lt;= 2.0) {\n         throw new ConvergenceException(LocalizedFormats.TOO_SMALL_COST_RELATIVE_TOLERANCE,\n                                               costRelativeTolerance);\n            } \n</code></pre>\n"},{"tags":["java","intellij-idea","javafx","lib"],"comments":[{"owner":{"account_id":26954515,"reputation":27,"user_id":20523135,"display_name":"n00biew0lf"},"score":0,"creation_date":1672877618,"post_id":75012642,"comment_id":132374759,"body_markdown":"somehow the links didn&#39;t go through for what I used for my help -- here they are: [](https://intellij-support.jetbrains.com/hc/en-us/community/posts/6415280540562-Where-can-I-find-the-Create-project-from-template-and-the-Base-package-settings-when-creating-a-new-project-)\n\n[](https://stackoverflow.com/questions/51478675/error-javafx-runtime-components-are-missing-and-are-required-to-run-this-appli)\n\n[](https://stackoverflow.com/questions/71215161/eclipse-ide-error-could-not-find-or-load-main-class-javafx-fxml-caused-by-java)","body":"somehow the links didn&#39;t go through for what I used for my help -- here they are: [](<a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/6415280540562-Where-can-I-find-the-Create-project-from-template-and-the-Base-package-settings-when-creating-a-new-project-\" rel=\"nofollow noreferrer\">intellij-support.jetbrains.com/hc/en-us/community/posts/&hellip;</a>&zwnj;&#8203;)  [](<a href=\"https://stackoverflow.com/questions/51478675/error-javafx-runtime-components-are-missing-and-are-required-to-run-this-appli\" title=\"error javafx runtime components are missing and are required to run this appli\">stackoverflow.com/questions/51478675/&hellip;</a>)  [](<a href=\"https://stackoverflow.com/questions/71215161/eclipse-ide-error-could-not-find-or-load-main-class-javafx-fxml-caused-by-java\" title=\"eclipse ide error could not find or load main class javafx fxml caused by java\">stackoverflow.com/questions/71215161/&hellip;</a>)"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1672877958,"post_id":75012642,"comment_id":132374811,"body_markdown":"You need a space between the module-path and the next directive, e.g. NOT `javafx-sdk-19\\lib--add-modules=javafx.controls`, but instead `javafx-sdk-19\\lib --add-modules=javafx.controls`.","body":"You need a space between the module-path and the next directive, e.g. NOT <code>javafx-sdk-19\\lib--add-modules=javafx.controls</code>, but instead <code>javafx-sdk-19\\lib --add-modules=javafx.controls</code>."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1672878148,"post_id":75012642,"comment_id":132374836,"body_markdown":"The command-line information in the `...` is important for the question.  In the Idea console that you copied this text from, you can get the full command line by clicking on the `...` in the console, which will expand it, then you can copy and paste the full command line into the question.","body":"The command-line information in the <code>...</code> is important for the question.  In the Idea console that you copied this text from, you can get the full command line by clicking on the <code>...</code> in the console, which will expand it, then you can copy and paste the full command line into the question."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1672878401,"post_id":75012642,"comment_id":132374875,"body_markdown":"Also, check that you are [setting VM options](https://stackoverflow.com/a/67960821/1155209) and not program execution arguments.","body":"Also, check that you are <a href=\"https://stackoverflow.com/a/67960821/1155209\">setting VM options</a> and not program execution arguments."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1672878807,"post_id":75012642,"comment_id":132374926,"body_markdown":"`C:\\Users\\wtfri\\Downloads\\openjfx-19_windows-x64_bin-sdk.zip\\javafx-sdk-19\\lib` — That looks like you&#39;re pointing to a directory inside a ZIP file. Is that what&#39;s happening? Because I don&#39;t believe that&#39;s possible (at least not by default). You should be extracting the ZIP file, then pointing to the extracted directory.","body":"<code>C:\\Users\\wtfri\\Downloads\\openjfx-19_windows-x64_bin-sdk.zip\\&zwnj;&#8203;javafx-sdk-19\\lib</code> — That looks like you&#39;re pointing to a directory inside a ZIP file. Is that what&#39;s happening? Because I don&#39;t believe that&#39;s possible (at least not by default). You should be extracting the ZIP file, then pointing to the extracted directory."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1672878946,"post_id":75012642,"comment_id":132374948,"body_markdown":"It is probably easier to get started with JavaFX using the [new project wizard](https://stackoverflow.com/questions/74764217/error-javafx-runtime-components-are-missing-with-intellij-idea-maven-and-jdk/74764297#74764297) rather than a downloaded SDK.  I recommend using the wizard instead.","body":"It is probably easier to get started with JavaFX using the <a href=\"https://stackoverflow.com/questions/74764217/error-javafx-runtime-components-are-missing-with-intellij-idea-maven-and-jdk/74764297#74764297\">new project wizard</a> rather than a downloaded SDK.  I recommend using the wizard instead."},{"owner":{"account_id":26954515,"reputation":27,"user_id":20523135,"display_name":"n00biew0lf"},"score":1,"creation_date":1672879564,"post_id":75012642,"comment_id":132375031,"body_markdown":"@Slaw I removed the &quot;.zip&quot; and it went through--looks like that was it.","body":"@Slaw I removed the &quot;.zip&quot; and it went through--looks like that was it."},{"owner":{"account_id":26954515,"reputation":27,"user_id":20523135,"display_name":"n00biew0lf"},"score":0,"creation_date":1672879600,"post_id":75012642,"comment_id":132375037,"body_markdown":"@jewelsea I&#39;ll add the space in the path as well -- thank you for that!","body":"@jewelsea I&#39;ll add the space in the path as well -- thank you for that!"}],"owner":{"account_id":26954515,"reputation":27,"user_id":20523135,"display_name":"n00biew0lf"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672927902,"creation_date":1672877560,"question_id":75012642,"body_markdown":"I&#39;m trying to set up an IntelliJ application, and can&#39;t get something quite right. \r\n\r\nBeing hit with an error when I try to run it:\r\n```none\r\n&quot;C:\\Program Files\\Java\\jdk-19\\bin\\java.exe&quot; ...\r\nError occurred during initialization of boot layer\r\njava.lang.module.FindException: Module javafx.controls not found\r\n\r\nProcess finished with exit code 1\r\n```\r\n\r\nI uploaded the lib folder for openjfx, as well as the pathway to the lib folder in Project Structure.\r\n\r\nI used these three pages in order to help me get to where I currently am:\r\n\r\n- [Where can I find the &quot;Create project from template&quot; and the &quot;Base package&quot; settings when creating a new project?][1]\r\n- https://stackoverflow.com/questions/51478675/error-javafx-runtime-components-are-missing-and-are-required-to-run-this-appli\r\n- https://stackoverflow.com/questions/71215161/eclipse-ide-error-could-not-find-or-load-main-class-javafx-fxml-caused-by-java\r\n\r\nIn the VM Options under Run Configurations, I put the pathway to the lib folder:\r\n&gt; --module-path C:\\Users\\wtfri\\Downloads\\openjfx-19_windows-x64_bin-sdk.zip\\javafx-sdk-19\\lib--add-modules=javafx.controls\r\n\r\nI feel like I made a mistake somewhere in the snippet of code I put into the VM options, but I&#39;m not experienced enough yet to know what&#39;s going on.\r\n\r\n\r\n  [1]: https://intellij-support.jetbrains.com/hc/en-us/community/posts/6415280540562-Where-can-I-find-the-Create-project-from-template-and-the-Base-package-settings-when-creating-a-new-project-","title":"JavaFX/IntelliJ Application Pathway Issue","body":"<p>I'm trying to set up an IntelliJ application, and can't get something quite right.</p>\n<p>Being hit with an error when I try to run it:</p>\n<pre class=\"lang-none prettyprint-override\"><code>&quot;C:\\Program Files\\Java\\jdk-19\\bin\\java.exe&quot; ...\nError occurred during initialization of boot layer\njava.lang.module.FindException: Module javafx.controls not found\n\nProcess finished with exit code 1\n</code></pre>\n<p>I uploaded the lib folder for openjfx, as well as the pathway to the lib folder in Project Structure.</p>\n<p>I used these three pages in order to help me get to where I currently am:</p>\n<ul>\n<li><a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/6415280540562-Where-can-I-find-the-Create-project-from-template-and-the-Base-package-settings-when-creating-a-new-project-\" rel=\"nofollow noreferrer\">Where can I find the &quot;Create project from template&quot; and the &quot;Base package&quot; settings when creating a new project?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/51478675/error-javafx-runtime-components-are-missing-and-are-required-to-run-this-appli\">Error: JavaFX runtime components are missing, and are required to run this application with JDK 11</a></li>\n<li><a href=\"https://stackoverflow.com/questions/71215161/eclipse-ide-error-could-not-find-or-load-main-class-javafx-fxml-caused-by-java\">Eclipse IDE Error: Could not find or load main class javafx.fxml Caused by: java.lang.ClassNotFoundException: javafx.fxml</a></li>\n</ul>\n<p>In the VM Options under Run Configurations, I put the pathway to the lib folder:</p>\n<blockquote>\n<p>--module-path C:\\Users\\wtfri\\Downloads\\openjfx-19_windows-x64_bin-sdk.zip\\javafx-sdk-19\\lib--add-modules=javafx.controls</p>\n</blockquote>\n<p>I feel like I made a mistake somewhere in the snippet of code I put into the VM options, but I'm not experienced enough yet to know what's going on.</p>\n"},{"tags":["java","oracle","hibernate","quarkus"],"comments":[{"owner":{"account_id":1635690,"reputation":150047,"user_id":1509264,"accept_rate":58,"display_name":"MT0"},"score":0,"creation_date":1652692156,"post_id":72256360,"comment_id":127658664,"body_markdown":"Do you just need to add an `@Lob` annotation to the entity on the `JSON` column?","body":"Do you just need to add an <code>@Lob</code> annotation to the entity on the <code>JSON</code> column?"},{"owner":{"account_id":25301457,"reputation":11,"user_id":19125638,"display_name":"babl"},"score":0,"creation_date":1652693587,"post_id":72256360,"comment_id":127659114,"body_markdown":"@MT0 I tried with `@Lob` annotation, but without any change unfortunately","body":"@MT0 I tried with <code>@Lob</code> annotation, but without any change unfortunately"},{"owner":{"account_id":25301457,"reputation":11,"user_id":19125638,"display_name":"babl"},"score":0,"creation_date":1652693666,"post_id":72256360,"comment_id":127659144,"body_markdown":"I also tried with `Integer id` instead of `Long id`, consequently leading to `OraclePreparedStatement.setIntegerInternal` throwing the error","body":"I also tried with <code>Integer id</code> instead of <code>Long id</code>, consequently leading to <code>OraclePreparedStatement.setIntegerInternal</code> throwing the error"},{"owner":{"account_id":25229135,"reputation":556,"user_id":19064525,"display_name":"SeanH"},"score":0,"creation_date":1652695826,"post_id":72256360,"comment_id":127659916,"body_markdown":"Can you compare the oracle jdbc driver used in your case?  which version can work? Are those 2 scenaios using the same version of oracle jdbc driver?","body":"Can you compare the oracle jdbc driver used in your case?  which version can work? Are those 2 scenaios using the same version of oracle jdbc driver?"},{"owner":{"account_id":25301457,"reputation":11,"user_id":19125638,"display_name":"babl"},"score":0,"creation_date":1652696910,"post_id":72256360,"comment_id":127660244,"body_markdown":"@SeanH the last working version used com.oracle.database.jdbc:ojdbc8:jar:21.1.0.0:compile   -&gt; non working versions use com.oracle.database.jdbc:ojdbc11:jar:21.3.0.0:compile to com.oracle.database.jdbc:ojdbc11:jar:21.5.0.0:compile","body":"@SeanH the last working version used com.oracle.database.jdbc:ojdbc8:jar:21.1.0.0:compile   -&gt; non working versions use com.oracle.database.jdbc:ojdbc11:jar:21.3.0.0:compile to com.oracle.database.jdbc:ojdbc11:jar:21.5.0.0:compile"},{"owner":{"account_id":25301457,"reputation":11,"user_id":19125638,"display_name":"babl"},"score":0,"creation_date":1652697561,"post_id":72256360,"comment_id":127660442,"body_markdown":"@SeanH I just wanted to try with new Quarkus-version plus old (working) jdbc-driver, but this unfortunalety leads to io.quarkus.jdbc.oracle.deployment.OracleProcessor#configureAgroalConnection threw an exception: java.lang.NoSuchFieldError: AGROAL   so it&#39;s not really compatible","body":"@SeanH I just wanted to try with new Quarkus-version plus old (working) jdbc-driver, but this unfortunalety leads to io.quarkus.jdbc.oracle.deployment.OracleProcessor#configureA&zwnj;&#8203;groalConnection threw an exception: java.lang.NoSuchFieldError: AGROAL   so it&#39;s not really compatible"},{"owner":{"account_id":25229135,"reputation":556,"user_id":19064525,"display_name":"SeanH"},"score":0,"creation_date":1652707288,"post_id":72256360,"comment_id":127663799,"body_markdown":"From your description,  perhaps you can fire a BUG to Quarkus system directly.  Seems it&#39;s easy to reproduce the issue.","body":"From your description,  perhaps you can fire a BUG to Quarkus system directly.  Seems it&#39;s easy to reproduce the issue."},{"owner":{"account_id":25301457,"reputation":11,"user_id":19125638,"display_name":"babl"},"score":0,"creation_date":1652713716,"post_id":72256360,"comment_id":127666429,"body_markdown":"Already did as @SeanH advised: [here is the link to the issue](https://github.com/quarkusio/quarkus/issues/25593)","body":"Already did as @SeanH advised: <a href=\"https://github.com/quarkusio/quarkus/issues/25593\" rel=\"nofollow noreferrer\">here is the link to the issue</a>"}],"answers":[{"tags":[],"owner":{"account_id":1202593,"reputation":9569,"user_id":1173495,"accept_rate":46,"display_name":"SANN3"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672927706,"creation_date":1672927706,"answer_id":75019709,"question_id":72256360,"body_markdown":"Escaping the column name with backtick character will solve the issue.\r\n\r\n    @Column(name = &quot;`JSON`&quot;)\r\n    private String json;","title":"oracle.jdbc.driver.OraclePreparedStatement.setLongInternal throws invalid column index","body":"<p>Escaping the column name with backtick character will solve the issue.</p>\n<pre><code>@Column(name = &quot;`JSON`&quot;)\nprivate String json;\n</code></pre>\n"}],"owner":{"account_id":25301457,"reputation":11,"user_id":19125638,"display_name":"babl"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":338,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1672927706,"creation_date":1652690459,"question_id":72256360,"body_markdown":"From Quarkus2.6.2/Hibernate5.6.1 to our current Quarkus2.8.2/Hibernate5.6.8 we are getting an invalid column index error when updating one of our entities.\r\nThe identical code did work without any problems under Quarkus1.13.7/Hibernate5.4.29.\r\nWe are using\r\n```\r\nquarkus.datasource.db-kind=oracle\r\nquarkus.hibernate-orm.dialect = org.hibernate.dialect.Oracle9iDialect\r\n```\r\n\r\nMy question is, whether this is a problem of:\r\n\r\n 1. The Oracle driver?\r\n 2. Hibernate?\r\n 3. Quarkus?\r\n 4. Something wrong in our code?\r\n\r\nHere is the entity:\r\n```\r\n@Entity\r\n@Table(name = &quot;USER_PREFERENCES&quot;)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\n@SequenceGenerator(name = &quot;user_preferences_id_sequence&quot;, sequenceName = &quot;USER_PREFERENCES_SEQ&quot;, allocationSize = 1)\r\npublic class Preferences {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;user_preferences_id_sequence&quot;)\r\n    @Column(name = &quot;ID&quot;)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;TYP&quot;)\r\n    private String typ;\r\n\r\n    @Column(name = &quot;MODEX&quot;)\r\n    private String modex;\r\n\r\n    @Column(name = &quot;JSON&quot;)\r\n    private String json;\r\n}\r\n```\r\n\r\nAnd here is the DB-Table as created via Liquibase:\r\n```\r\n&lt;createTable tableName=&quot;USER_PREFERENCES&quot;&gt;\r\n    &lt;column name=&quot;ID&quot; type=&quot;NUMBER(38,0)&quot;&gt;\r\n        &lt;constraints nullable=&quot;false&quot; primaryKey=&quot;true&quot; /&gt;\r\n    &lt;/column&gt;\r\n    &lt;column name=&quot;MODEX&quot; type=&quot;VARCHAR2(12)&quot;/&gt;\r\n    &lt;column name=&quot;TYP&quot; type=&quot;VARCHAR2(100)&quot;/&gt;\r\n    &lt;column name=&quot;JSON&quot; type=&quot;CLOB&quot;/&gt;\r\n&lt;/createTable&gt;\r\n\r\nleading to:\r\n\r\nID\tNUMBER(38,0)\r\nMODEX\tVARCHAR2(12 CHAR)\r\nTYP\tVARCHAR2(100 CHAR)\r\nJSON\tCLOB\r\n```\r\n\r\nUpon calling `em.persist(preferences)` Hibernate creates the following output in both, the working and the not-working versions:\r\n```\r\n2022-05-16 08:50:39,914 DEBUG [org.hib.SQL] (executor-thread-1)\r\n    update\r\n        USER_PREFERENCES\r\n    set\r\n        JSON=?,\r\n        MODEX=?,\r\n        TYP=?\r\n    where\r\n        ID=?\r\nHibernate:\r\n    update\r\n        USER_PREFERENCES\r\n    set\r\n        JSON=?,\r\n        MODEX=?,\r\n        TYP=?\r\n    where\r\n        ID=?\r\n2022-05-16 08:50:39,918 TRACE [org.hib.typ.des.sql.BasicBinder] (executor-thread-1) binding parameter [1] as [VARCHAR] - [{&quot;autoSearch&quot;:true,&quot;filter&quot;:{&quot;statusId&quot;:2,&quot;userId&quot;:55,&quot;testProp&quot;:&quot;xxx&quot;}}]\r\n2022-05-16 08:50:39,919 TRACE [org.hib.typ.des.sql.BasicBinder] (executor-thread-1) binding parameter [2] as [VARCHAR] - [testB985B]\r\n2022-05-16 08:50:39,921 TRACE [org.hib.typ.des.sql.BasicBinder] (executor-thread-1) binding parameter [3] as [VARCHAR] - [search_prefs]\r\n2022-05-16 08:50:39,923 TRACE [org.hib.typ.des.sql.BasicBinder] (executor-thread-1) binding parameter [4] as [BIGINT] - [11]\r\n```\r\n\r\nIn the not-working version, this leads to\r\n```\r\n2022-05-16 09:06:51,292 DEBUG [org.hib.eng.jdb.spi.SqlExceptionHelper] (executor-thread-0) could not update: [de.my.app.preferences.entity.Preferences#11] [update USER_PREFERENCES set JSON=?, MODEX=?, TYP=? where ID=?]: java.sql.SQLException: Ung&#179;ltiger Spaltenindex\r\n        at oracle.jdbc.driver.OraclePreparedStatement.setLongInternal(OraclePreparedStatement.java:5005)\r\n        at oracle.jdbc.driver.OraclePreparedStatement.setLong(OraclePreparedStatement.java:4996)\r\n        at oracle.jdbc.driver.OraclePreparedStatementWrapper.setLong(OraclePreparedStatementWrapper.java:207)\r\n        at io.agroal.pool.wrapper.PreparedStatementWrapper.setLong(PreparedStatementWrapper.java:148)\r\n        at org.hibernate.type.descriptor.sql.BigIntTypeDescriptor$1.doBind(BigIntTypeDescriptor.java:46)\r\n        at org.hibernate.type.descriptor.sql.BasicBinder.bind(BasicBinder.java:73)\r\n        at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:276)\r\n        at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:271)\r\n        at org.hibernate.persister.entity.AbstractEntityPersister.dehydrateId(AbstractEntityPersister.java:3121)\r\n        at org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:3093)\r\n        at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3527)\r\n        ... 139 more\r\n```","title":"oracle.jdbc.driver.OraclePreparedStatement.setLongInternal throws invalid column index","body":"<p>From Quarkus2.6.2/Hibernate5.6.1 to our current Quarkus2.8.2/Hibernate5.6.8 we are getting an invalid column index error when updating one of our entities.\nThe identical code did work without any problems under Quarkus1.13.7/Hibernate5.4.29.\nWe are using</p>\n<pre><code>quarkus.datasource.db-kind=oracle\nquarkus.hibernate-orm.dialect = org.hibernate.dialect.Oracle9iDialect\n</code></pre>\n<p>My question is, whether this is a problem of:</p>\n<ol>\n<li>The Oracle driver?</li>\n<li>Hibernate?</li>\n<li>Quarkus?</li>\n<li>Something wrong in our code?</li>\n</ol>\n<p>Here is the entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;USER_PREFERENCES&quot;)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\n@SequenceGenerator(name = &quot;user_preferences_id_sequence&quot;, sequenceName = &quot;USER_PREFERENCES_SEQ&quot;, allocationSize = 1)\npublic class Preferences {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;user_preferences_id_sequence&quot;)\n    @Column(name = &quot;ID&quot;)\n    private Long id;\n\n    @Column(name = &quot;TYP&quot;)\n    private String typ;\n\n    @Column(name = &quot;MODEX&quot;)\n    private String modex;\n\n    @Column(name = &quot;JSON&quot;)\n    private String json;\n}\n</code></pre>\n<p>And here is the DB-Table as created via Liquibase:</p>\n<pre><code>&lt;createTable tableName=&quot;USER_PREFERENCES&quot;&gt;\n    &lt;column name=&quot;ID&quot; type=&quot;NUMBER(38,0)&quot;&gt;\n        &lt;constraints nullable=&quot;false&quot; primaryKey=&quot;true&quot; /&gt;\n    &lt;/column&gt;\n    &lt;column name=&quot;MODEX&quot; type=&quot;VARCHAR2(12)&quot;/&gt;\n    &lt;column name=&quot;TYP&quot; type=&quot;VARCHAR2(100)&quot;/&gt;\n    &lt;column name=&quot;JSON&quot; type=&quot;CLOB&quot;/&gt;\n&lt;/createTable&gt;\n\nleading to:\n\nID  NUMBER(38,0)\nMODEX   VARCHAR2(12 CHAR)\nTYP VARCHAR2(100 CHAR)\nJSON    CLOB\n</code></pre>\n<p>Upon calling <code>em.persist(preferences)</code> Hibernate creates the following output in both, the working and the not-working versions:</p>\n<pre><code>2022-05-16 08:50:39,914 DEBUG [org.hib.SQL] (executor-thread-1)\n    update\n        USER_PREFERENCES\n    set\n        JSON=?,\n        MODEX=?,\n        TYP=?\n    where\n        ID=?\nHibernate:\n    update\n        USER_PREFERENCES\n    set\n        JSON=?,\n        MODEX=?,\n        TYP=?\n    where\n        ID=?\n2022-05-16 08:50:39,918 TRACE [org.hib.typ.des.sql.BasicBinder] (executor-thread-1) binding parameter [1] as [VARCHAR] - [{&quot;autoSearch&quot;:true,&quot;filter&quot;:{&quot;statusId&quot;:2,&quot;userId&quot;:55,&quot;testProp&quot;:&quot;xxx&quot;}}]\n2022-05-16 08:50:39,919 TRACE [org.hib.typ.des.sql.BasicBinder] (executor-thread-1) binding parameter [2] as [VARCHAR] - [testB985B]\n2022-05-16 08:50:39,921 TRACE [org.hib.typ.des.sql.BasicBinder] (executor-thread-1) binding parameter [3] as [VARCHAR] - [search_prefs]\n2022-05-16 08:50:39,923 TRACE [org.hib.typ.des.sql.BasicBinder] (executor-thread-1) binding parameter [4] as [BIGINT] - [11]\n</code></pre>\n<p>In the not-working version, this leads to</p>\n<pre><code>2022-05-16 09:06:51,292 DEBUG [org.hib.eng.jdb.spi.SqlExceptionHelper] (executor-thread-0) could not update: [de.my.app.preferences.entity.Preferences#11] [update USER_PREFERENCES set JSON=?, MODEX=?, TYP=? where ID=?]: java.sql.SQLException: Ung³ltiger Spaltenindex\n        at oracle.jdbc.driver.OraclePreparedStatement.setLongInternal(OraclePreparedStatement.java:5005)\n        at oracle.jdbc.driver.OraclePreparedStatement.setLong(OraclePreparedStatement.java:4996)\n        at oracle.jdbc.driver.OraclePreparedStatementWrapper.setLong(OraclePreparedStatementWrapper.java:207)\n        at io.agroal.pool.wrapper.PreparedStatementWrapper.setLong(PreparedStatementWrapper.java:148)\n        at org.hibernate.type.descriptor.sql.BigIntTypeDescriptor$1.doBind(BigIntTypeDescriptor.java:46)\n        at org.hibernate.type.descriptor.sql.BasicBinder.bind(BasicBinder.java:73)\n        at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:276)\n        at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:271)\n        at org.hibernate.persister.entity.AbstractEntityPersister.dehydrateId(AbstractEntityPersister.java:3121)\n        at org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:3093)\n        at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3527)\n        ... 139 more\n</code></pre>\n"},{"tags":["javascript","java","angular","typescript","spring-boot"],"comments":[{"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"score":0,"creation_date":1672925617,"post_id":75019145,"comment_id":132385772,"body_markdown":"You could set it in the ENV and read it from there.","body":"You could set it in the ENV and read it from there."}],"answers":[{"tags":[],"owner":{"account_id":5255222,"reputation":573,"user_id":4198317,"display_name":"St&#233;phane Jeandeaux"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672925843,"creation_date":1672925843,"answer_id":75019280,"question_id":75019145,"body_markdown":"There are many ways to do it\r\n\r\n 1. environmental variables\r\n 2. application arguments CommandLineRunner\r\n 3. configuration file\r\n\r\n","title":"Setting host and port when executing a .jar","body":"<p>There are many ways to do it</p>\n<ol>\n<li>environmental variables</li>\n<li>application arguments CommandLineRunner</li>\n<li>configuration file</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1672927493,"creation_date":1672926849,"answer_id":75019502,"question_id":75019145,"body_markdown":"The question is very broad and could not be answered definitely with such minimal information. I want to point some things though which you must consider in what ever solution you apply to this problem.\r\n\r\nThe backend which is a spring boot app, may as well run in `localhost:8080` and that is fine. It is never however the case that an application backend is in the same machine as the Frontend. You have adopted `angular` as your frontend which means by default (if you haven&#39;t overridden this behavior) some static files would be served and executed in the browser of the end user.\r\n\r\nSo this in most cases means that the end user must know the `ip-address` or domain so that he can reach the machine that runs the backend server.\r\n\r\nSo the end situation you will have is backend running in for example `localhost:8080` in some VM and frontend using a property like `const PATH: string = &#39;http://my-backend-domain.com:8080/(...)&#39;;` so that an external user can reach the backend server from his browser.\r\n\r\nIn a very simplified scenario an effective solution would be to adapt your angular app [with this answer][1] then during deployment decide what is the domain for example where you are deploying the app like `/my-backend-domain.com` and go to `assets/data/config.json` and configure it there. This would not require any additional build of Frontend just a simple configuration. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/49904822/7237884","title":"Setting host and port when executing a .jar","body":"<p>The question is very broad and could not be answered definitely with such minimal information. I want to point some things though which you must consider in what ever solution you apply to this problem.</p>\n<p>The backend which is a spring boot app, may as well run in <code>localhost:8080</code> and that is fine. It is never however the case that an application backend is in the same machine as the Frontend. You have adopted <code>angular</code> as your frontend which means by default (if you haven't overridden this behavior) some static files would be served and executed in the browser of the end user.</p>\n<p>So this in most cases means that the end user must know the <code>ip-address</code> or domain so that he can reach the machine that runs the backend server.</p>\n<p>So the end situation you will have is backend running in for example <code>localhost:8080</code> in some VM and frontend using a property like <code>const PATH: string = 'http://my-backend-domain.com:8080/(...)';</code> so that an external user can reach the backend server from his browser.</p>\n<p>In a very simplified scenario an effective solution would be to adapt your angular app <a href=\"https://stackoverflow.com/a/49904822/7237884\">with this answer</a> then during deployment decide what is the domain for example where you are deploying the app like <code>/my-backend-domain.com</code> and go to <code>assets/data/config.json</code> and configure it there. This would not require any additional build of Frontend just a simple configuration.</p>\n"}],"owner":{"account_id":25542851,"reputation":37,"user_id":19328650,"display_name":"podehi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":251,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75019502,"answer_count":2,"score":0,"last_activity_date":1672927493,"creation_date":1672925210,"question_id":75019145,"body_markdown":"I have an Angular + Spring Boot app that&#39;s deployed as a single .jar file, some .properties files and a bash script to execute the .jar depending on what properties we want to use.\r\n\r\nRight now, my .ts classes have host and port set statically, e.g.:\r\n```\r\nconst PATH: string = &#39;http://localhost:8080/(...)&#39;;\r\n```\r\n\r\nIs there a way to set them dynamically while executing the .jar?","title":"Setting host and port when executing a .jar","body":"<p>I have an Angular + Spring Boot app that's deployed as a single .jar file, some .properties files and a bash script to execute the .jar depending on what properties we want to use.</p>\n<p>Right now, my .ts classes have host and port set statically, e.g.:</p>\n<pre><code>const PATH: string = 'http://localhost:8080/(...)';\n</code></pre>\n<p>Is there a way to set them dynamically while executing the .jar?</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1672835065,"post_id":75005363,"comment_id":132361315,"body_markdown":"You want to print stuff **if**  a number is 0 or negative, not **while** a number is zero or negative. That&#39;s the difference between a condition (what you&#39;re looking for) and a loop (what you&#39;re actually using).","body":"You want to print stuff <b>if</b>  a number is 0 or negative, not <b>while</b> a number is zero or negative. That&#39;s the difference between a condition (what you&#39;re looking for) and a loop (what you&#39;re actually using)."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1672835126,"post_id":75005363,"comment_id":132361335,"body_markdown":"Also, judging by the output you&#39;re expecting you&#39;ll need two loops: one to read the data and one to print &quot;Hello name&quot;.","body":"Also, judging by the output you&#39;re expecting you&#39;ll need two loops: one to read the data and one to print &quot;Hello name&quot;."}],"answers":[{"tags":[],"owner":{"account_id":26778261,"reputation":32,"user_id":20373538,"display_name":"Rixit Dobariya"},"down_vote_count":2,"up_vote_count":2,"is_accepted":true,"score":0,"last_activity_date":1672836294,"creation_date":1672836294,"answer_id":75005637,"question_id":75005363,"body_markdown":"```\r\nimport java.util.*;\r\npublic class Main {\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner input = new Scanner(System.in);\r\n        System.out.println(&quot;Enter the size of an Array&quot;);\r\n        int num = input.nextInt();\r\n        if(num==0) {\r\n            System.out.println(&quot;Oh, it looks like there is no one here&quot;);\r\n        }\r\n        else if(num&lt;0) {\r\n            System.out.println(&quot;Seriously? Why so negative?&quot;);\r\n        }\r\n        else {\r\n            String numbers[] = new String[num];\r\n            input.nextLine();\r\n            for (int i=0; i&lt; num;i++) {\r\n              numbers[i]=input.nextLine();\r\n            }\r\n            for (int i=0; i&lt; numbers.length;i++) {\r\n              System.out.println(&quot;Hello, &quot; +numbers[i]);\r\n            }\r\n        }\r\n\t}\r\n}\r\n\r\n```\r\nThis is how your code will look and you&#39;ll need to add member function input.nextLine(); to read newline character, so there can&#39;t be problem regarding input","title":"Scan a number of names, print names (number==amount of names) and print Hello to each of them","body":"<pre><code>import java.util.*;\npublic class Main {\n    public static void main(String[] args) {\n        Scanner input = new Scanner(System.in);\n        System.out.println(&quot;Enter the size of an Array&quot;);\n        int num = input.nextInt();\n        if(num==0) {\n            System.out.println(&quot;Oh, it looks like there is no one here&quot;);\n        }\n        else if(num&lt;0) {\n            System.out.println(&quot;Seriously? Why so negative?&quot;);\n        }\n        else {\n            String numbers[] = new String[num];\n            input.nextLine();\n            for (int i=0; i&lt; num;i++) {\n              numbers[i]=input.nextLine();\n            }\n            for (int i=0; i&lt; numbers.length;i++) {\n              System.out.println(&quot;Hello, &quot; +numbers[i]);\n            }\n        }\n    }\n}\n\n</code></pre>\n<p>This is how your code will look and you'll need to add member function input.nextLine(); to read newline character, so there can't be problem regarding input</p>\n"},{"tags":[],"owner":{"account_id":20887307,"reputation":21,"user_id":15343591,"display_name":"senasimsek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672927206,"creation_date":1672862685,"answer_id":75010710,"question_id":75005363,"body_markdown":"With using do while loop you can ask the number to the user again and again if it is negative number.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    import java.util.Scanner;\r\n    public class Main\r\n      {\r\n\t    public static void main(String[] args) {\r\n\t    int num;\r\n\t    String name;\r\n\t    Scanner scan = new Scanner(System.in);\r\n\t    \r\n\t    //The loop asks a number till the number is nonnegative\r\n\t    do{\r\n\t        \r\n\t\tSystem.out.print(&quot;Please enter the number of strangers: &quot;);\r\n\t\tnum = scan.nextInt();\r\n\t\t\r\n\t\tif(num&lt;0) {\r\n\t\t    \r\n\t\t    System.out.println(&quot;It cannot be a negative number try again.&quot;);\r\n\t\t}else if(num==0) {\r\n\t\t    \r\n\t\t    System.out.println(&quot;Oh, it looks like there is no one here&quot;);\r\n\t\t    break;\r\n\t\t}else{\r\n\t\t    \r\n\t\t    String[] strangers = new String[num];\r\n\t\t    //Takes the names and puts them to the strangers array\r\n\t\t    for(int i=0;i&lt;num;i++) {\r\n\t\t        System.out.print(&quot;Name &quot; + (i+1) + &quot; : &quot;);\r\n\t\t        name = scan.next();\r\n\t\t        strangers[i] = name;\r\n\t\t    }\r\n\t\t    \r\n\t\t    //Printing the array\r\n\t\t    for(int j=0; j&lt;num; j++) {\r\n\t\t        System.out.println(&quot;Hello, &quot; + strangers[j]);\r\n\t\t    }\r\n\t\t    break;\r\n\t\t    \r\n\t\t}\r\n\t    }while(num&lt;0);\r\n\t\r\n\t}\r\n    }\r\n","title":"Scan a number of names, print names (number==amount of names) and print Hello to each of them","body":"<p>With using do while loop you can ask the number to the user again and again if it is negative number.</p>\n<pre><code>import java.util.Scanner;\npublic class Main\n  {\n    public static void main(String[] args) {\n    int num;\n    String name;\n    Scanner scan = new Scanner(System.in);\n    \n    //The loop asks a number till the number is nonnegative\n    do{\n        \n    System.out.print(&quot;Please enter the number of strangers: &quot;);\n    num = scan.nextInt();\n    \n    if(num&lt;0) {\n        \n        System.out.println(&quot;It cannot be a negative number try again.&quot;);\n    }else if(num==0) {\n        \n        System.out.println(&quot;Oh, it looks like there is no one here&quot;);\n        break;\n    }else{\n        \n        String[] strangers = new String[num];\n        //Takes the names and puts them to the strangers array\n        for(int i=0;i&lt;num;i++) {\n            System.out.print(&quot;Name &quot; + (i+1) + &quot; : &quot;);\n            name = scan.next();\n            strangers[i] = name;\n        }\n        \n        //Printing the array\n        for(int j=0; j&lt;num; j++) {\n            System.out.println(&quot;Hello, &quot; + strangers[j]);\n        }\n        break;\n        \n    }\n    }while(num&lt;0);\n\n}\n}\n</code></pre>\n"}],"owner":{"account_id":27430364,"reputation":19,"user_id":20927173,"display_name":"Kris"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":75005637,"answer_count":2,"score":0,"last_activity_date":1672927206,"creation_date":1672834836,"question_id":75005363,"body_markdown":"I am new to Java and have a task: Scanner a number of &quot;strangers&#39; &quot; names, then read these names and print &quot;Hello+name&quot; to the console. If number of strangers is zero, then print &quot;Looks empty&quot;, if the number is negative, then print &quot;Looks negative to me&quot;.\r\nSo the input and output to console should look like this:\r\n\r\n    3\r\n    Den\r\n    Ken\r\n    Mel\r\n    Hello, Den\r\n    Hello, Ken\r\n    Hello, Mel\r\n\r\nSo I have this code edited from someone with some related task, but it seems I miss something as I am new to Java...\r\n\r\n    Scanner input = new Scanner(System.in);\r\n    System.out.println(&quot;Enter the size of an Array&quot;);\r\n    int num = input.nextInt();\r\n    \r\n    while (num==0) {\r\n      System.out.println(&quot;Oh, it looks like there is no one here&quot;);\r\n      break;\r\n    \r\n    } while (num&lt;0) {\r\n      System.out.println(&quot;Seriously? Why so negative?&quot;);\r\n      break;\r\n    }\r\n    \r\n    String[] numbers = new String[num];\r\n    for (int i=0; i&lt; numbers.length;i++) {\r\n      System.out.println(&quot;Hello, &quot; +input.nextLine());\r\n    }","title":"Scan a number of names, print names (number==amount of names) and print Hello to each of them","body":"<p>I am new to Java and have a task: Scanner a number of &quot;strangers' &quot; names, then read these names and print &quot;Hello+name&quot; to the console. If number of strangers is zero, then print &quot;Looks empty&quot;, if the number is negative, then print &quot;Looks negative to me&quot;.\nSo the input and output to console should look like this:</p>\n<pre><code>3\nDen\nKen\nMel\nHello, Den\nHello, Ken\nHello, Mel\n</code></pre>\n<p>So I have this code edited from someone with some related task, but it seems I miss something as I am new to Java...</p>\n<pre><code>Scanner input = new Scanner(System.in);\nSystem.out.println(&quot;Enter the size of an Array&quot;);\nint num = input.nextInt();\n\nwhile (num==0) {\n  System.out.println(&quot;Oh, it looks like there is no one here&quot;);\n  break;\n\n} while (num&lt;0) {\n  System.out.println(&quot;Seriously? Why so negative?&quot;);\n  break;\n}\n\nString[] numbers = new String[num];\nfor (int i=0; i&lt; numbers.length;i++) {\n  System.out.println(&quot;Hello, &quot; +input.nextLine());\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":20415010,"reputation":29,"user_id":14977444,"display_name":"eritten"},"score":0,"creation_date":1672629179,"post_id":74978611,"comment_id":132315528,"body_markdown":"Please someone should help me. I have been trying to fix it but still have not been able to fix it.","body":"Please someone should help me. I have been trying to fix it but still have not been able to fix it."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1672629647,"post_id":74978611,"comment_id":132315576,"body_markdown":"You need to make sure that that class is on the classpath when you run your program.","body":"You need to make sure that that class is on the classpath when you run your program."},{"owner":{"account_id":20415010,"reputation":29,"user_id":14977444,"display_name":"eritten"},"score":0,"creation_date":1672629982,"post_id":74978611,"comment_id":132315609,"body_markdown":"Please I am using maven and  I have specified the freetts 1.2.2  dependency in the pom.xml file.","body":"Please I am using maven and  I have specified the freetts 1.2.2  dependency in the pom.xml file."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1672632469,"post_id":74978611,"comment_id":132315835,"body_markdown":"How are you running your program?","body":"How are you running your program?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1672633143,"post_id":74978611,"comment_id":132315912,"body_markdown":"https://freetts.sourceforge.io/#no_jsapi might help","body":"<a href=\"https://freetts.sourceforge.io/#no_jsapi\" rel=\"nofollow noreferrer\">freetts.sourceforge.io/#no_jsapi</a> might help"}],"owner":{"account_id":20415010,"reputation":29,"user_id":14977444,"display_name":"eritten"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1672926816,"answer_count":0,"score":0,"last_activity_date":1672926799,"creation_date":1672626581,"question_id":74978611,"body_markdown":"I am new to freetts and I want to convert text to speech, but I am getting class not found exception.\r\n\r\nMy source code\r\n```java\r\npackage com.sewonet;\r\n\r\nimport com.sun.speech.freetts.VoiceManager;\r\nimport com.sun.speech.freetts.Voice;\r\n\r\npublic class App {\r\n    public static void main(String[] args) throws Exception{\r\n        VoiceManager voiceManager = VoiceManager.getInstance();\r\n        Voice voice = VoiceManager.getVoice(&quot;kelvin16&quot;);\r\n        voice.speak(&quot;I love java&quot;);\r\n    }\r\n\r\n}\r\n```\r\nCode compilation does not generate any error but generate the below error at runtime.\r\n```none\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/sun/speech/freetts/VoiceManager\r\n        at com.sewonet.App.main(App.java:7)\r\nCaused by: java.lang.ClassNotFoundException: com.sun.speech.freetts.VoiceManager\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n        ... 1 more\r\n```\r\n\r\n\r\n","title":"How to fix class not found error exception in freetts 1.2.2 VoiceManager in Maven on Windows","body":"<p>I am new to freetts and I want to convert text to speech, but I am getting class not found exception.</p>\n<p>My source code</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.sewonet;\n\nimport com.sun.speech.freetts.VoiceManager;\nimport com.sun.speech.freetts.Voice;\n\npublic class App {\n    public static void main(String[] args) throws Exception{\n        VoiceManager voiceManager = VoiceManager.getInstance();\n        Voice voice = VoiceManager.getVoice(&quot;kelvin16&quot;);\n        voice.speak(&quot;I love java&quot;);\n    }\n\n}\n</code></pre>\n<p>Code compilation does not generate any error but generate the below error at runtime.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/sun/speech/freetts/VoiceManager\n        at com.sewonet.App.main(App.java:7)\nCaused by: java.lang.ClassNotFoundException: com.sun.speech.freetts.VoiceManager\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n        ... 1 more\n</code></pre>\n"},{"tags":["java","android","listener"],"comments":[{"owner":{"account_id":2675582,"reputation":1012,"user_id":2312064,"display_name":"krzydyn"},"score":1,"creation_date":1660294360,"post_id":73331467,"comment_id":129503664,"body_markdown":"make the count variable an upper class field, maybe you need to add sth to check if count is ready.","body":"make the count variable an upper class field, maybe you need to add sth to check if count is ready."},{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":0,"creation_date":1660294693,"post_id":73331467,"comment_id":129503765,"body_markdown":"You cannot get the count value instantly because the listener is an asnchronous call and it will be called somewhere in the future depending on its events. Where else do you need to use the count?","body":"You cannot get the count value instantly because the listener is an asnchronous call and it will be called somewhere in the future depending on its events. Where else do you need to use the count?"},{"owner":{"account_id":12869869,"reputation":1426,"user_id":9308731,"display_name":"CrackerKSR"},"score":0,"creation_date":1660295620,"post_id":73331467,"comment_id":129504070,"body_markdown":"@Kozmotronik I just wanted this count to avoid index out bound error while retrieving  the bitmaps using that decoder . I cant get bitmaps in onStart(). it only works outside of listener. But noticed that sharedpref works fine. How it gives values  in synch way. &#129300;","body":"@Kozmotronik I just wanted this count to avoid index out bound error while retrieving  the bitmaps using that decoder . I cant get bitmaps in onStart(). it only works outside of listener. But noticed that sharedpref works fine. How it gives values  in synch way. 🤔"}],"answers":[{"tags":[],"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660294572,"creation_date":1660294572,"answer_id":73331647,"question_id":73331467,"body_markdown":"To get around the `must be final` you may use a \r\n\r\n    final AtomicInteger count = new AtomicInteger(0);\r\n\r\nand then\r\n\r\n    count.addAndGet(1);\r\n\r\nAnyway, line\r\n\r\n    Log.d(TAG,&quot;count : &quot;+count.get());\r\n\r\nwill always return 0, as long it is before `decoder.start()`. Probably you want to put into a Handler and run periodically ?.\r\n ","title":"How to get value outside of asynchronous listener methods","body":"<p>To get around the <code>must be final</code> you may use a</p>\n<pre><code>final AtomicInteger count = new AtomicInteger(0);\n</code></pre>\n<p>and then</p>\n<pre><code>count.addAndGet(1);\n</code></pre>\n<p>Anyway, line</p>\n<pre><code>Log.d(TAG,&quot;count : &quot;+count.get());\n</code></pre>\n<p>will always return 0, as long it is before <code>decoder.start()</code>. Probably you want to put into a Handler and run periodically ?.</p>\n"},{"tags":[],"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660296738,"creation_date":1660296738,"answer_id":73332054,"question_id":73331467,"body_markdown":"Well a more effective way to achieve to control this would be using a LiveData object to keep track of the active counts.\r\n\r\nDefine the count variable as a `MutableLiveData&lt;Integer&gt;` and update this livedata whenever the `onStart` method called. This may be much faster than writing to and reading from the shared preferences. See the example snippet for an example implementation.\r\n\r\n```lang-java\r\n// Define the live data object within a correct scope in your class\r\nMutableLiveData&lt;Integer&gt; mldCount = new MutableLiveData&lt;&gt;(0);\r\n\r\n// In the part where you want to control and avoid the index out of bounds observe the count live data\r\nmldCount.observe(&lt;Pass the lifecycle owner here&gt;, count -&gt; {\r\n    // Check the new count here\r\n});\r\n\r\npublic void Test5 (String path){\r\n   \r\n   decoder.addRenderListener(\r\n     new WebPDecoder.RenderListener(){\r\n       @Override\r\n       public void onStart(){\r\n\r\n         // 2. assigning value to count variable\r\n         int count = decoder.getFrameCount();\r\n         // If this callback is called from a background thread use:\r\n         mldCount.postValue(count);\r\n         \r\n         // If it is called in main thread then use:\r\n         mldCount.setValue(count);\r\n         Log.d(TAG, count); count is non zero\r\n\r\n       }\r\n       @Override\r\n       public void onRender(ByteBuffer byebuffer){}\r\n       \r\n       @Override\r\n       public void onEnd(){\r\n         decoder.stop();\r\n       }\r\n     }\r\n   );\r\n\r\n   // This will not show the valid actual values\r\n   Log.d(TAG,&quot;count : &quot;+mldCount.getValue());  // still  count is 0\r\n\r\n   decoder.start();\r\n\r\n }\r\n```\r\n","title":"How to get value outside of asynchronous listener methods","body":"<p>Well a more effective way to achieve to control this would be using a LiveData object to keep track of the active counts.</p>\n<p>Define the count variable as a <code>MutableLiveData&lt;Integer&gt;</code> and update this livedata whenever the <code>onStart</code> method called. This may be much faster than writing to and reading from the shared preferences. See the example snippet for an example implementation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Define the live data object within a correct scope in your class\nMutableLiveData&lt;Integer&gt; mldCount = new MutableLiveData&lt;&gt;(0);\n\n// In the part where you want to control and avoid the index out of bounds observe the count live data\nmldCount.observe(&lt;Pass the lifecycle owner here&gt;, count -&gt; {\n    // Check the new count here\n});\n\npublic void Test5 (String path){\n   \n   decoder.addRenderListener(\n     new WebPDecoder.RenderListener(){\n       @Override\n       public void onStart(){\n\n         // 2. assigning value to count variable\n         int count = decoder.getFrameCount();\n         // If this callback is called from a background thread use:\n         mldCount.postValue(count);\n         \n         // If it is called in main thread then use:\n         mldCount.setValue(count);\n         Log.d(TAG, count); count is non zero\n\n       }\n       @Override\n       public void onRender(ByteBuffer byebuffer){}\n       \n       @Override\n       public void onEnd(){\n         decoder.stop();\n       }\n     }\n   );\n\n   // This will not show the valid actual values\n   Log.d(TAG,&quot;count : &quot;+mldCount.getValue());  // still  count is 0\n\n   decoder.start();\n\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12869869,"reputation":1426,"user_id":9308731,"display_name":"CrackerKSR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660317423,"creation_date":1660317423,"answer_id":73336353,"question_id":73331467,"body_markdown":"I got solution but won&#39;t accept is as answer beacuse it is not a solution for specified problem in question.\r\n\r\nI invoked ```decoder.stop()``` in override ```OnStart()``` and then I could access the Bitmaps after stopping. So now no need to get frameCount outside of decoder. ","title":"How to get value outside of asynchronous listener methods","body":"<p>I got solution but won't accept is as answer beacuse it is not a solution for specified problem in question.</p>\n<p>I invoked <code>decoder.stop()</code> in override <code>OnStart()</code> and then I could access the Bitmaps after stopping. So now no need to get frameCount outside of decoder.</p>\n"}],"owner":{"account_id":12869869,"reputation":1426,"user_id":9308731,"display_name":"CrackerKSR"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1672926668,"creation_date":1660293612,"question_id":73331467,"body_markdown":"\r\nI want to get frame counts which can be obtain on listener&#39;s overridden methods.\r\n\r\nBut if I use try to assign value to outer variable I get error.\r\n```error: local variables referenced from an inner class must be final or effectively final```\r\n\r\n``` java\r\n\r\npublic void Test5 (String path, Callback cb){\r\n   // 1. initialised count variable\r\n   int count = 0;\r\n   \r\n   decoder.addRenderListener(\r\n     new WebPDecoder.RenderListener(){\r\n       @Override\r\n       public void onStart(){\r\n\r\n         // 2. assigning value to count variable\r\n         count = decoder.getFrameCount();\r\n         Log.d(TAG, count); count is non zero\r\n\r\n       }\r\n       @Override\r\n       public void onRender(ByteBuffer byebuffer){}\r\n       \r\n       @Override\r\n       public void onEnd(){\r\n         decoder.stop();\r\n       }\r\n     }\r\n   );\r\n   decoder.start();\r\n   \r\n   // 3. accessing the count variable\r\n   Log.d(TAG,&quot;count : &quot;+count);  // still  count is 0\r\n   \r\n   // this won&#39;t run as count is 0\r\n   for(int i=0; i &lt; count i++)\r\n       bitmaps.add(decoder.getFrameBitmap(i));\r\n       // and getFrameBitmap(i) is not useful inside above listener overriden methods. This returns bitmap only outside of listener.\r\n }\r\n```\r\n\r\nI tried SharedPreference and it works but I can&#39;t use for reliablity and also app crashes.\r\n\r\nI also Tried to use custom class. It does not give error But the value is still zero.\r\n```MyData frameData = new MyData();\r\nframeData.setFrameCount(frameCount); // setting in onStart()\r\nframeData.getFrameCount(); // getting out of listener\r\nbut still zero because it executes before assignment\r\n```\r\n\r\n\r\nI wonder how sharedPreference gives non zero value but not this custom class\r\n","title":"How to get value outside of asynchronous listener methods","body":"<p>I want to get frame counts which can be obtain on listener's overridden methods.</p>\n<p>But if I use try to assign value to outer variable I get error.\n<code>error: local variables referenced from an inner class must be final or effectively final</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic void Test5 (String path, Callback cb){\n   // 1. initialised count variable\n   int count = 0;\n   \n   decoder.addRenderListener(\n     new WebPDecoder.RenderListener(){\n       @Override\n       public void onStart(){\n\n         // 2. assigning value to count variable\n         count = decoder.getFrameCount();\n         Log.d(TAG, count); count is non zero\n\n       }\n       @Override\n       public void onRender(ByteBuffer byebuffer){}\n       \n       @Override\n       public void onEnd(){\n         decoder.stop();\n       }\n     }\n   );\n   decoder.start();\n   \n   // 3. accessing the count variable\n   Log.d(TAG,&quot;count : &quot;+count);  // still  count is 0\n   \n   // this won't run as count is 0\n   for(int i=0; i &lt; count i++)\n       bitmaps.add(decoder.getFrameBitmap(i));\n       // and getFrameBitmap(i) is not useful inside above listener overriden methods. This returns bitmap only outside of listener.\n }\n</code></pre>\n<p>I tried SharedPreference and it works but I can't use for reliablity and also app crashes.</p>\n<p>I also Tried to use custom class. It does not give error But the value is still zero.</p>\n<pre><code>frameData.setFrameCount(frameCount); // setting in onStart()\nframeData.getFrameCount(); // getting out of listener\nbut still zero because it executes before assignment\n</code></pre>\n<p>I wonder how sharedPreference gives non zero value but not this custom class</p>\n"},{"tags":["java","android","rad-studio"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1603373697,"creation_date":1603373697,"answer_id":64483418,"question_id":64481883,"body_markdown":"&gt; &quot;Is this meaning something?&quot;  \r\n\r\nThose arguments are for the `keytool` command not the `java` command.\r\n\r\nSee the [Keytool manual page](https://docs.oracle.com/en/java/javase/11/tools/keytool.html).\r\n\r\nIf your sample Android app is actually trying to run `keytool`, it is doing it the wrong way.  However, I don&#39;t think we can help beyond that unless you share the code with us so that we can understand what it is trying to do.\r\n\r\n","title":"RAD studio 10.3.3 could not create java virtual machine","body":"<blockquote>\n<p>&quot;Is this meaning something?&quot;</p>\n</blockquote>\n<p>Those arguments are for the <code>keytool</code> command not the <code>java</code> command.</p>\n<p>See the <a href=\"https://docs.oracle.com/en/java/javase/11/tools/keytool.html\" rel=\"nofollow noreferrer\">Keytool manual page</a>.</p>\n<p>If your sample Android app is actually trying to run <code>keytool</code>, it is doing it the wrong way.  However, I don't think we can help beyond that unless you share the code with us so that we can understand what it is trying to do.</p>\n"},{"tags":[],"owner":{"account_id":3781691,"reputation":725,"user_id":3140961,"accept_rate":65,"display_name":"JimPapas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1609603386,"creation_date":1603375416,"answer_id":64483954,"question_id":64481883,"body_markdown":"Ok, I found my mistake.\r\n\r\nIn tools/options/deployment/SDKmanager/Java/keytool location I had the (wrong value) java.exe instead of keytool.exe\r\n\r\nMany thanks for your help","title":"RAD studio 10.3.3 could not create java virtual machine","body":"<p>Ok, I found my mistake.</p>\n<p>In tools/options/deployment/SDKmanager/Java/keytool location I had the (wrong value) java.exe instead of keytool.exe</p>\n<p>Many thanks for your help</p>\n"}],"owner":{"account_id":3781691,"reputation":725,"user_id":3140961,"accept_rate":65,"display_name":"JimPapas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3041,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1672926446,"creation_date":1603368436,"question_id":64481883,"body_markdown":"I already checked the issue but i didn&#39;t found a solution.\r\n\r\nI use RAD STUDIO 10.3.3 in Win 10/**64b** and i have installed java 1.8_171/**32b**\r\n\r\nI try to create a new (sample) android application **32b** and it builds ok.\r\n\r\nWhen i try to run it raises the error `could not create java virtual machine` followed by\r\n`[Exec Error] EXEC(1): A fatal exception has occurred. Program will exit.`\r\n\r\nand\r\n\r\n`[Exec Error] The command &quot;&quot;C:\\Program Files (x86)\\Java\\jdk1.8.0_171\\bin\\java.exe&quot; -genkey -v -keystore &quot;C:\\Users\\DELL\\AppData\\Roaming\\Embarcadero\\BDS\\20.0\\debug.keystore&quot; -storepass android -alias androiddebugkey -keypass android -dname &quot;cn=Unnamed, ou=Mobile Organization, o=Embarcadero Technologies, l=San Francisco, s=California, c=US&quot; -keyalg RSA -keysize 2048 -validity 10000&quot; exited with code 1.`\r\n\r\nAs i can see java.exe does not support parameter `-keypass` and all the others following it. Is this meaning something ?\r\nPlease help me to solve this problem\r\n","title":"RAD studio 10.3.3 could not create java virtual machine","body":"<p>I already checked the issue but i didn't found a solution.</p>\n<p>I use RAD STUDIO 10.3.3 in Win 10/<strong>64b</strong> and i have installed java 1.8_171/<strong>32b</strong></p>\n<p>I try to create a new (sample) android application <strong>32b</strong> and it builds ok.</p>\n<p>When i try to run it raises the error <code>could not create java virtual machine</code> followed by\n<code>[Exec Error] EXEC(1): A fatal exception has occurred. Program will exit.</code></p>\n<p>and</p>\n<p><code>[Exec Error] The command &quot;&quot;C:\\Program Files (x86)\\Java\\jdk1.8.0_171\\bin\\java.exe&quot; -genkey -v -keystore &quot;C:\\Users\\DELL\\AppData\\Roaming\\Embarcadero\\BDS\\20.0\\debug.keystore&quot; -storepass android -alias androiddebugkey -keypass android -dname &quot;cn=Unnamed, ou=Mobile Organization, o=Embarcadero Technologies, l=San Francisco, s=California, c=US&quot; -keyalg RSA -keysize 2048 -validity 10000&quot; exited with code 1.</code></p>\n<p>As i can see java.exe does not support parameter <code>-keypass</code> and all the others following it. Is this meaning something ?\nPlease help me to solve this problem</p>\n"},{"tags":["java","excel","apache-poi","xlsx"],"comments":[{"owner":{"account_id":12646737,"reputation":1077,"user_id":9192223,"display_name":"hiren"},"score":2,"creation_date":1672656022,"post_id":74981363,"comment_id":132320071,"body_markdown":"Might help: https://stackoverflow.com/questions/58147646/found-interface-org-apache-poi-util-poilogger-but-class-was-expected-error","body":"Might help: <a href=\"https://stackoverflow.com/questions/58147646/found-interface-org-apache-poi-util-poilogger-but-class-was-expected-error\" title=\"found interface org apache poi util poilogger but class was expected error\">stackoverflow.com/questions/58147646/&hellip;</a>"}],"owner":{"account_id":27410414,"reputation":1,"user_id":20910422,"display_name":"Taimoor Pasha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1672926190,"answer_count":0,"score":0,"last_activity_date":1672926177,"creation_date":1672655845,"question_id":74981363,"body_markdown":"I am trying to read my excel file using following method:\r\n\r\n```\r\npublic static String readDataFromExcel(String fileName, int rowNumber, \r\n    int columnNumber) throws IOException {\r\n    String valueOfCell;\r\n    XSSFWorkbook sheetWorkBook = null;\r\n    try {\r\n        FileInputStream fis = new FileInputStream(fileName);\r\n        sheetWorkBook = new XSSFWorkbook(fis);\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\n    assert sheetWorkBook != null;\r\n    Sheet sheet = sheetWorkBook.getSheetAt(0);\r\n    Row row = sheet.getRow(rowNumber);\r\n    Cell cell = row.getCell(columnNumber);\r\n    valueOfCell = cell.getStringCellValue();\r\n    return valueOfCell;\r\n}\r\n\r\npublic static void main(String [] args) throws IOException {\r\n    System.out.println(readDataFromExcel(filePathInString, 1, 0));\r\n}\r\n```\r\n\r\nUpon executing, I am getting this message:\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.IncompatibleClassChangeError:\r\n&gt; Found interface org.apache.poi.util.POILogger, but class was expected\r\n\r\nI need to know what I am doing wrong.","title":"Found interface org.apache.poi.util.POILogger, but class was expected","body":"<p>I am trying to read my excel file using following method:</p>\n<pre><code>public static String readDataFromExcel(String fileName, int rowNumber, \n    int columnNumber) throws IOException {\n    String valueOfCell;\n    XSSFWorkbook sheetWorkBook = null;\n    try {\n        FileInputStream fis = new FileInputStream(fileName);\n        sheetWorkBook = new XSSFWorkbook(fis);\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    assert sheetWorkBook != null;\n    Sheet sheet = sheetWorkBook.getSheetAt(0);\n    Row row = sheet.getRow(rowNumber);\n    Cell cell = row.getCell(columnNumber);\n    valueOfCell = cell.getStringCellValue();\n    return valueOfCell;\n}\n\npublic static void main(String [] args) throws IOException {\n    System.out.println(readDataFromExcel(filePathInString, 1, 0));\n}\n</code></pre>\n<p>Upon executing, I am getting this message:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.IncompatibleClassChangeError:\nFound interface org.apache.poi.util.POILogger, but class was expected</p>\n</blockquote>\n<p>I need to know what I am doing wrong.</p>\n"},{"tags":["python","java","algorithm","recursion","bucket"],"comments":[{"owner":{"account_id":95372,"reputation":114366,"user_id":259769,"accept_rate":93,"display_name":"Enigmativity"},"score":0,"creation_date":1672878387,"post_id":75012388,"comment_id":132374873,"body_markdown":"What language is this?","body":"What language is this?"},{"owner":{"account_id":19451776,"reputation":11,"user_id":14228017,"display_name":"charlesrain"},"score":0,"creation_date":1672879236,"post_id":75012388,"comment_id":132374990,"body_markdown":"Python, but I&#39;d be open to any solution in a language a Java/Python person can understand","body":"Python, but I&#39;d be open to any solution in a language a Java/Python person can understand"},{"owner":{"account_id":95372,"reputation":114366,"user_id":259769,"accept_rate":93,"display_name":"Enigmativity"},"score":0,"creation_date":1672881435,"post_id":75012388,"comment_id":132375336,"body_markdown":"Then you should add the tags so that people who have subscribed to those languages get your question highlighted to them. Otherwise you severely restrict your audience. It&#39;s also worthwhile explicitly stating the languages that you&#39;d like as part of the answer.","body":"Then you should add the tags so that people who have subscribed to those languages get your question highlighted to them. Otherwise you severely restrict your audience. It&#39;s also worthwhile explicitly stating the languages that you&#39;d like as part of the answer."},{"owner":{"account_id":19451776,"reputation":11,"user_id":14228017,"display_name":"charlesrain"},"score":0,"creation_date":1672882448,"post_id":75012388,"comment_id":132375503,"body_markdown":"It seems to be added now!","body":"It seems to be added now!"},{"owner":{"account_id":95372,"reputation":114366,"user_id":259769,"accept_rate":93,"display_name":"Enigmativity"},"score":0,"creation_date":1672882933,"post_id":75012388,"comment_id":132375581,"body_markdown":"I added the tags.","body":"I added the tags."},{"owner":{"account_id":2460360,"reputation":64577,"user_id":2144669,"display_name":"David Eisenstat"},"score":0,"creation_date":1672924253,"post_id":75012388,"comment_id":132385267,"body_markdown":"I disagree on the language tags; the algorithm tag alone gives enough visibility to the right people, and getting genpop to look too often just results in a closed question.","body":"I disagree on the language tags; the algorithm tag alone gives enough visibility to the right people, and getting genpop to look too often just results in a closed question."}],"answers":[{"tags":[],"owner":{"account_id":2460360,"reputation":64577,"user_id":2144669,"display_name":"David Eisenstat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672926161,"creation_date":1672926161,"answer_id":75019354,"question_id":75012388,"body_markdown":"For recursion, you need a base case and a recursive case.\r\n\r\n&gt; You could use some kind of recursion, where the end criterion is\r\n&gt; “\\[height\\] is smaller than or equal to max bucket value, return one”.\r\n\r\nThis is half of a correct base case. The other half is doing one round\r\nof splits when `max_size &lt; height &lt;= splits * max_size`.\r\n\r\nFor the recursive case, we need to determine the optimal way to split.\r\nThis turns out to be splitting off `splits - 1` buckets of size\r\n`max_size` (the bigger the better) and handling the remainder. See the\r\nPython below. (I would use iteration instead because of Python’s stack\r\nlimit.)\r\n\r\nTo prove correctness, we need to do some math. The base cases are\r\ncorrect by inspection. For the recursive case, since `n` buckets hold at\r\nmost `n * max_size`, we need at least `height / max_size` buckets. We\r\nalso know that the number of buckets must be one plus a multiple of\r\n`splits - 1`, since we start with one and add `splits - 1` with each\r\nround of splits. Hence, the number of buckets in the optimal solution is\r\nat least `height / max_size` rounded up to the nearest one plus a\r\nmultiple of `splits - 1`. The recursive case matches this bound exactly,\r\nso it’s optimal.\r\n\r\n``` python\r\ndef buckets(height, max_size, splits):\r\n    if height &lt;= max_size:\r\n        return 1\r\n    if height &lt;= splits * max_size:\r\n        return splits\r\n    return (splits - 1) + buckets(height - (splits - 1) * max_size, max_size, splits)\r\n```\r\n","title":"How to count the number of buckets needed to split a number into buckets of max size X, where each split has to be Y splits","body":"<p>For recursion, you need a base case and a recursive case.</p>\n<blockquote>\n<p>You could use some kind of recursion, where the end criterion is\n“[height] is smaller than or equal to max bucket value, return one”.</p>\n</blockquote>\n<p>This is half of a correct base case. The other half is doing one round\nof splits when <code>max_size &lt; height &lt;= splits * max_size</code>.</p>\n<p>For the recursive case, we need to determine the optimal way to split.\nThis turns out to be splitting off <code>splits - 1</code> buckets of size\n<code>max_size</code> (the bigger the better) and handling the remainder. See the\nPython below. (I would use iteration instead because of Python’s stack\nlimit.)</p>\n<p>To prove correctness, we need to do some math. The base cases are\ncorrect by inspection. For the recursive case, since <code>n</code> buckets hold at\nmost <code>n * max_size</code>, we need at least <code>height / max_size</code> buckets. We\nalso know that the number of buckets must be one plus a multiple of\n<code>splits - 1</code>, since we start with one and add <code>splits - 1</code> with each\nround of splits. Hence, the number of buckets in the optimal solution is\nat least <code>height / max_size</code> rounded up to the nearest one plus a\nmultiple of <code>splits - 1</code>. The recursive case matches this bound exactly,\nso it’s optimal.</p>\n<pre class=\"lang-py prettyprint-override\"><code>def buckets(height, max_size, splits):\n    if height &lt;= max_size:\n        return 1\n    if height &lt;= splits * max_size:\n        return splits\n    return (splits - 1) + buckets(height - (splits - 1) * max_size, max_size, splits)\n</code></pre>\n"}],"owner":{"account_id":19451776,"reputation":11,"user_id":14228017,"display_name":"charlesrain"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1672926161,"creation_date":1672874496,"question_id":75012388,"body_markdown":"I encoutered this problem on a leetcode github and can&#39;t wrap my head around it. I figured you could use some kind of recursion, where the end criterion is &quot;bucket is smaller than or equal to max bucket value, return one&quot;, but I am having a hard time getting there.\r\n\r\nI&#39;ve tried this (in Python):\r\n\r\n    def buckets(height, max, splits):\r\n        \r\n        if(splits &gt;= height):\r\n            return math.ceil(height / max) + 1\r\n        else:\r\n            return math.ceil(height / max) \r\n        ","title":"How to count the number of buckets needed to split a number into buckets of max size X, where each split has to be Y splits","body":"<p>I encoutered this problem on a leetcode github and can't wrap my head around it. I figured you could use some kind of recursion, where the end criterion is &quot;bucket is smaller than or equal to max bucket value, return one&quot;, but I am having a hard time getting there.</p>\n<p>I've tried this (in Python):</p>\n<pre><code>def buckets(height, max, splits):\n    \n    if(splits &gt;= height):\n        return math.ceil(height / max) + 1\n    else:\n        return math.ceil(height / max) \n    \n</code></pre>\n"},{"tags":["java","javafx","fxml","scenebuilder","gridpane"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1571880966,"post_id":58532867,"comment_id":103389321,"body_markdown":"I would start by verifying that `source` is in fact an AnchorPane.  I would also verify that its parent is a GridPane.","body":"I would start by verifying that <code>source</code> is in fact an AnchorPane.  I would also verify that its parent is a GridPane."},{"owner":{"account_id":16958389,"reputation":1,"user_id":12266125,"display_name":"Tammy Bammy"},"score":0,"creation_date":1571881083,"post_id":58532867,"comment_id":103389340,"body_markdown":"Here, the &#39;grid&#39; is the GridPane. So I thought it will add as a child of &#39;grid&#39;. And how do I check the type of source?","body":"Here, the &#39;grid&#39; is the GridPane. So I thought it will add as a child of &#39;grid&#39;. And how do I check the type of source?"},{"owner":{"account_id":16958389,"reputation":1,"user_id":12266125,"display_name":"Tammy Bammy"},"score":0,"creation_date":1571881508,"post_id":58532867,"comment_id":103389430,"body_markdown":"I have checked the parent of the AnchorPane identifiers and the `source` and it is `grid`. And it is still returning null.","body":"I have checked the parent of the AnchorPane identifiers and the <code>source</code> and it is <code>grid</code>. And it is still returning null."},{"owner":{"account_id":1206541,"reputation":2037,"user_id":1176037,"accept_rate":67,"display_name":"Alan Deep"},"score":0,"creation_date":1571884779,"post_id":58532867,"comment_id":103390043,"body_markdown":"this is a bad approach @TammyBammy, you should use `Controllers`, it&#39;s much better and easier in JavaFX","body":"this is a bad approach @TammyBammy, you should use <code>Controllers</code>, it&#39;s much better and easier in JavaFX"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1571886164,"post_id":58532867,"comment_id":103390273,"body_markdown":"One thing that I noticed in the past was that Scenebuilder would not put a zero in the FXML. So I would look at the FXML and make sure all zero indexed gridcells had zero&#39;s in the FXML. Also make sure you have some type of Node in each cell. Have a look at [this](https://github.com/sedj601/GameOfFifteen) code.","body":"One thing that I noticed in the past was that Scenebuilder would not put a zero in the FXML. So I would look at the FXML and make sure all zero indexed gridcells had zero&#39;s in the FXML. Also make sure you have some type of Node in each cell. Have a look at <a href=\"https://github.com/sedj601/GameOfFifteen\" rel=\"nofollow noreferrer\">this</a> code."},{"owner":{"account_id":4962253,"reputation":18492,"user_id":3992939,"accept_rate":73,"display_name":"c0der"},"score":2,"creation_date":1571928023,"post_id":58532867,"comment_id":103408896,"body_markdown":"&quot;\nQuestions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: [mre]&quot;","body":"&quot; Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;"}],"answers":[{"tags":[],"owner":{"account_id":19013920,"reputation":31,"user_id":13879295,"display_name":"krešimir šumiga"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672926130,"creation_date":1672922719,"answer_id":75018605,"question_id":58532867,"body_markdown":"I don&#39;t know if this is a problem anymore, but looking for answers I came across this topic, so I will answer it in case someone needs answer. First of all, the problem is with accessing node itself with command: \r\n```Integer colIndex = grid.getColumnIndex(source);```. \r\nCommand getColumnIndex is static, so you have to access the type directly: \r\n```GridPane.getColumnIndex(source);```\r\n\r\nSecondly, you are trying to retrieve coordinates of a grid pane without anything inside the grid pane, which doesn&#39;t work because grid pane cell without children, which means node type, is null. There must be a node inside a grid pane intersection, let&#39;s say ImageView, meaning all nodes must be cast to ImageView type node:\r\n\r\n```for(Node i : grid.getChildren){ImageView iv = (ImageView)i;```\r\n\r\nNow you can retrieve indexes:\r\n\r\n```int colIndex = GridPane.getColumnIndex(iv);}```\r\n\r\nBasically, this means that method must know what is the type of node whose indexes it is retrieving. \r\n\r\nAnd lastly, be careful with fxml, because, if you, for example, drag and drop ImageView or button to grid pane in SceneBuilder, if grid pane cell has row or column index 0, fxml will assume default value, which is zero and it will not assign value explicitly: \r\n\r\n```\r\n&lt;example&gt;\r\n&lt;ImageView fx:id=&quot;IvTarget_0_0&quot; fitHeight=&quot;55.0&quot; fitWidth=&quot;58.0&quot; onDragDropped=&quot;#handleImageDrop&quot; pickOnBounds=&quot;true&quot; preserveRatio=&quot;true&quot;&gt;\r\n               &lt;GridPane.margin&gt;\r\n                  &lt;Insets left=&quot;12.0&quot; /&gt;\r\n               &lt;/GridPane.margin&gt;\r\n            &lt;/ImageView&gt;\r\n&lt;/example&gt;\r\n```\r\n\r\nso you see that node with coordinates 0,0 in your fxml editor doesn&#39;t have ```GridPane.columnIndex ``` or ```GridPane.rowIndex``` values set. This is OK for other functionalities, but when it comes to retrieving indexes, it will throw nullPtr exception, even if just one of multiple children doesn&#39;t have these properties set. In this case, you have to review all nodes in fxml editor and set them manually. \r\n\r\n```\r\n&lt;example&gt;\r\n&lt;ImageView fx:id=&quot;IvTarget_0_0&quot; GridPane.columnIndex=&quot;0&quot; GridPane.rowIndex=&quot;0&quot; fitHeight=&quot;55.0&quot; fitWidth=&quot;58.0&quot; onDragDropped=&quot;#handleImageDrop&quot; pickOnBounds=&quot;true&quot; preserveRatio=&quot;true&quot;&gt;\r\n               &lt;GridPane.margin&gt;\r\n                  &lt;Insets left=&quot;12.0&quot; /&gt;\r\n               &lt;/GridPane.margin&gt;\r\n            &lt;/ImageView&gt;\r\n&lt;/example&gt;\r\n```\r\n\r\nHope this helps! \r\n","title":"Java FXML GridPane.getRowIndex(source) returning null always when handling mouse event in Scene Builder","body":"<p>I don't know if this is a problem anymore, but looking for answers I came across this topic, so I will answer it in case someone needs answer. First of all, the problem is with accessing node itself with command:\n<code>Integer colIndex = grid.getColumnIndex(source);</code>.\nCommand getColumnIndex is static, so you have to access the type directly:\n<code>GridPane.getColumnIndex(source);</code></p>\n<p>Secondly, you are trying to retrieve coordinates of a grid pane without anything inside the grid pane, which doesn't work because grid pane cell without children, which means node type, is null. There must be a node inside a grid pane intersection, let's say ImageView, meaning all nodes must be cast to ImageView type node:</p>\n<p><code>for(Node i : grid.getChildren){ImageView iv = (ImageView)i;</code></p>\n<p>Now you can retrieve indexes:</p>\n<p><code>int colIndex = GridPane.getColumnIndex(iv);}</code></p>\n<p>Basically, this means that method must know what is the type of node whose indexes it is retrieving.</p>\n<p>And lastly, be careful with fxml, because, if you, for example, drag and drop ImageView or button to grid pane in SceneBuilder, if grid pane cell has row or column index 0, fxml will assume default value, which is zero and it will not assign value explicitly:</p>\n<pre><code>&lt;example&gt;\n&lt;ImageView fx:id=&quot;IvTarget_0_0&quot; fitHeight=&quot;55.0&quot; fitWidth=&quot;58.0&quot; onDragDropped=&quot;#handleImageDrop&quot; pickOnBounds=&quot;true&quot; preserveRatio=&quot;true&quot;&gt;\n               &lt;GridPane.margin&gt;\n                  &lt;Insets left=&quot;12.0&quot; /&gt;\n               &lt;/GridPane.margin&gt;\n            &lt;/ImageView&gt;\n&lt;/example&gt;\n</code></pre>\n<p>so you see that node with coordinates 0,0 in your fxml editor doesn't have <code>GridPane.columnIndex </code> or <code>GridPane.rowIndex</code> values set. This is OK for other functionalities, but when it comes to retrieving indexes, it will throw nullPtr exception, even if just one of multiple children doesn't have these properties set. In this case, you have to review all nodes in fxml editor and set them manually.</p>\n<pre><code>&lt;example&gt;\n&lt;ImageView fx:id=&quot;IvTarget_0_0&quot; GridPane.columnIndex=&quot;0&quot; GridPane.rowIndex=&quot;0&quot; fitHeight=&quot;55.0&quot; fitWidth=&quot;58.0&quot; onDragDropped=&quot;#handleImageDrop&quot; pickOnBounds=&quot;true&quot; preserveRatio=&quot;true&quot;&gt;\n               &lt;GridPane.margin&gt;\n                  &lt;Insets left=&quot;12.0&quot; /&gt;\n               &lt;/GridPane.margin&gt;\n            &lt;/ImageView&gt;\n&lt;/example&gt;\n</code></pre>\n<p>Hope this helps!</p>\n"}],"owner":{"account_id":16958389,"reputation":1,"user_id":12266125,"display_name":"Tammy Bammy"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":223,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1672926130,"creation_date":1571880093,"question_id":58532867,"body_markdown":"I am new to Java FXML. I am still learning how to use Scene Builder 2.0 and controller classes. I don&#39;t understand why this is returning null\n\n\n    @FXML\n    public void gridClick(MouseEvent e){\n        Node source = (Node)e.getSource() ;\n        Integer colIndex = grid.getColumnIndex(source);\n        Integer rowIndex = grid.getRowIndex(source);\n        System.out.println(&quot;Mouse entered cell [&quot;+colIndex+&quot;,&quot;+rowIndex+&quot;]&quot;);\n    }\n\n\nI initiated all the grid cells in SceneBuilder\n[The gridpane has been created in SceneBuilder][1]\nThen I created the anchorpanes for each cell in the controller class initialization:\n\n    for(int row=0;row&lt;numRows;row++){\n        for(int col=0;col&lt;numCols;col++){\n            AnchorPane slot=new AnchorPane();\n            slot.setStyle(&quot;-fx-border-color: black;-fx-border-width: 0.2;&quot;);\n            grid.add(slot,col,row);\n        }\n    }\n\nI don&#39;t know if this is a bad approach but i am trying to learn. Please help me how to do this differently or why it is giving me null value.\nWhen the user clicks on one of the grid cells, i.e. they should be anchorpanes, I want the Anchorpane that they clicked or the grid cell row and column.\n\n  [1]: https://i.stack.imgur.com/IXwJd.png","title":"Java FXML GridPane.getRowIndex(source) returning null always when handling mouse event in Scene Builder","body":"<p>I am new to Java FXML. I am still learning how to use Scene Builder 2.0 and controller classes. I don't understand why this is returning null</p>\n<pre><code>@FXML\npublic void gridClick(MouseEvent e){\n    Node source = (Node)e.getSource() ;\n    Integer colIndex = grid.getColumnIndex(source);\n    Integer rowIndex = grid.getRowIndex(source);\n    System.out.println(&quot;Mouse entered cell [&quot;+colIndex+&quot;,&quot;+rowIndex+&quot;]&quot;);\n}\n</code></pre>\n<p>I initiated all the grid cells in SceneBuilder\n<a href=\"https://i.stack.imgur.com/IXwJd.png\" rel=\"nofollow noreferrer\">The gridpane has been created in SceneBuilder</a>\nThen I created the anchorpanes for each cell in the controller class initialization:</p>\n<pre><code>for(int row=0;row&lt;numRows;row++){\n    for(int col=0;col&lt;numCols;col++){\n        AnchorPane slot=new AnchorPane();\n        slot.setStyle(&quot;-fx-border-color: black;-fx-border-width: 0.2;&quot;);\n        grid.add(slot,col,row);\n    }\n}\n</code></pre>\n<p>I don't know if this is a bad approach but i am trying to learn. Please help me how to do this differently or why it is giving me null value.\nWhen the user clicks on one of the grid cells, i.e. they should be anchorpanes, I want the Anchorpane that they clicked or the grid cell row and column.</p>\n"},{"tags":["java","tomcat"],"owner":{"account_id":17324638,"reputation":21,"user_id":12549136,"display_name":"7575 mohan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672926064,"creation_date":1672901380,"question_id":75014753,"body_markdown":"I have below Java code to prevent X-FRAME-OPTIONS header being set for specific product responses \r\n\r\n```java\r\npublic class ResponseHeaderValve extends ValveBase {\r\n    private static final Logger LOGGER = Logger.getLogger(ResponseHeaderValve.class.getName());\r\n    private static final String PRODUCT_NAME = &quot;PRODUCT_NAME&quot;; \r\n\r\n    @Override\r\n    public void invoke(Request request, Response response) throws ServletException, IOException {\r\n        try {\r\n            HttpSession session = request.getSession();\r\n            String productName = (String) session.getAttribute(PRODUCT_NAME);\r\n            if (productName == null &amp;&amp; request.getParameterMap().containsKey(PRODUCT_NAME)) {\r\n                productName = request.getParameter(PRODUCT_NAME);\r\n            }\r\n\r\n            if (productName != null &amp;&amp; productName.equalsIgnoreCase(&quot;product1&quot;)) {\r\n                HttpServletResponse httpServletResponse = new HttpServletResponseWrapper(response.getResponse()) {\r\n                    public void addHeader(String name, String value) {\r\n                        if (!name.equalsIgnoreCase(&quot;X-FRAME-OPTIONS&quot;)) {\r\n                            super.setHeader(name, value);\r\n                        }\r\n                    }\r\n                    public void setHeader(String name, String value) {\r\n                        if (!name.equalsIgnoreCase(&quot;X-FRAME-OPTIONS&quot;)) {\r\n                            super.setHeader(name, value);\r\n                        }\r\n                    }\r\n                };\r\n                this.getNext().invoke(request,httpServletResponse);\r\n            } else {\r\n                this.getNext().invoke(request, response);\r\n\r\n            }\r\n        }\r\n        catch(Exception e){\r\n            LOGGER.log(Level.INFO, &quot;Exception in ResponseHeaderValve: invoke():&quot;, e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nFor cases productName equals &quot;product1&quot; using HttpServletResponseWrapper I tried to prevent header being set.\r\n\r\nI have to pass request, httpServletResponse to the next valve using invoke method, but org.apache.catalina.valve invoke(Request,Response) method does not allow passing httpServletResponse. I have tried casting (Response)httpServletResponse, it did not work throws ClassCastException. How can I proceed?\r\n","title":"How to pass HttpServletResponse in org.apache.catalina.valve invoke(Request,Response) method","body":"<p>I have below Java code to prevent X-FRAME-OPTIONS header being set for specific product responses</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ResponseHeaderValve extends ValveBase {\n    private static final Logger LOGGER = Logger.getLogger(ResponseHeaderValve.class.getName());\n    private static final String PRODUCT_NAME = &quot;PRODUCT_NAME&quot;; \n\n    @Override\n    public void invoke(Request request, Response response) throws ServletException, IOException {\n        try {\n            HttpSession session = request.getSession();\n            String productName = (String) session.getAttribute(PRODUCT_NAME);\n            if (productName == null &amp;&amp; request.getParameterMap().containsKey(PRODUCT_NAME)) {\n                productName = request.getParameter(PRODUCT_NAME);\n            }\n\n            if (productName != null &amp;&amp; productName.equalsIgnoreCase(&quot;product1&quot;)) {\n                HttpServletResponse httpServletResponse = new HttpServletResponseWrapper(response.getResponse()) {\n                    public void addHeader(String name, String value) {\n                        if (!name.equalsIgnoreCase(&quot;X-FRAME-OPTIONS&quot;)) {\n                            super.setHeader(name, value);\n                        }\n                    }\n                    public void setHeader(String name, String value) {\n                        if (!name.equalsIgnoreCase(&quot;X-FRAME-OPTIONS&quot;)) {\n                            super.setHeader(name, value);\n                        }\n                    }\n                };\n                this.getNext().invoke(request,httpServletResponse);\n            } else {\n                this.getNext().invoke(request, response);\n\n            }\n        }\n        catch(Exception e){\n            LOGGER.log(Level.INFO, &quot;Exception in ResponseHeaderValve: invoke():&quot;, e);\n        }\n    }\n}\n</code></pre>\n<p>For cases productName equals &quot;product1&quot; using HttpServletResponseWrapper I tried to prevent header being set.</p>\n<p>I have to pass request, httpServletResponse to the next valve using invoke method, but org.apache.catalina.valve invoke(Request,Response) method does not allow passing httpServletResponse. I have tried casting (Response)httpServletResponse, it did not work throws ClassCastException. How can I proceed?</p>\n"},{"tags":["java","android","android-studio","android-permissions","android-11"],"owner":{"account_id":15562903,"reputation":11,"user_id":11227563,"display_name":"Rakib"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":567,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672925944,"creation_date":1619777916,"question_id":67332195,"body_markdown":"Android 11 (R) skip my permission request but all the work is going on without permission. I gave my code below. I tryed many code but doesnot work properly. Please help me\r\n\r\n\r\n[I need this type of permission dialog][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wrXkY.jpg\r\n\r\n         int m_permit = ActivityCompat.checkSelfPermission(activity, Manifest.permission.WRITE_EXTERNAL_STORAGE);\r\n\r\n        if (m_permit != PackageManager.PERMISSION_GRANTED){\r\n\r\n            Permission(context);\r\n        }\r\n\r\n\r\n\r\n    \r\n    public void Permission(Context context) {\r\n\r\n        final Dialog dialog;\r\n\r\n        final Activity activity = (Activity) context;\r\n\r\n\r\n        LayoutInflater li = LayoutInflater.from(context);\r\n\r\n            View view= li.inflate(R.layout.dialog_permission, null);\r\n            dialog = new Dialog(context, R.style.Theme_AppCompat_Light_Dialog);\r\n            dialog.setContentView(view);\r\n\r\n            TextView ok = view.findViewById(R.id.ok);\r\n            dialog.show();\r\n\r\n            ok.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    dialog.dismiss();\r\n\r\n                    int m_permit = ActivityCompat.checkSelfPermission(activity, Manifest.permission.WRITE_EXTERNAL_STORAGE);\r\n\r\n                    if (m_permit != PackageManager.PERMISSION_GRANTED) {\r\n                        requestPermissions(activity,\r\n                                STORAGE_PERMISSION,\r\n                                1);\r\n                    }\r\n                }\r\n            });\r\n    }","title":"Android 11 Runtime Storage Permission","body":"<p>Android 11 (R) skip my permission request but all the work is going on without permission. I gave my code below. I tryed many code but doesnot work properly. Please help me</p>\n<p><a href=\"https://i.stack.imgur.com/wrXkY.jpg\" rel=\"nofollow noreferrer\">I need this type of permission dialog</a></p>\n<pre><code>     int m_permit = ActivityCompat.checkSelfPermission(activity, Manifest.permission.WRITE_EXTERNAL_STORAGE);\n\n    if (m_permit != PackageManager.PERMISSION_GRANTED){\n\n        Permission(context);\n    }\n\n\n\n\npublic void Permission(Context context) {\n\n    final Dialog dialog;\n\n    final Activity activity = (Activity) context;\n\n\n    LayoutInflater li = LayoutInflater.from(context);\n\n        View view= li.inflate(R.layout.dialog_permission, null);\n        dialog = new Dialog(context, R.style.Theme_AppCompat_Light_Dialog);\n        dialog.setContentView(view);\n\n        TextView ok = view.findViewById(R.id.ok);\n        dialog.show();\n\n        ok.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                dialog.dismiss();\n\n                int m_permit = ActivityCompat.checkSelfPermission(activity, Manifest.permission.WRITE_EXTERNAL_STORAGE);\n\n                if (m_permit != PackageManager.PERMISSION_GRANTED) {\n                    requestPermissions(activity,\n                            STORAGE_PERMISSION,\n                            1);\n                }\n            }\n        });\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-data-jpa","h2"],"owner":{"account_id":23483000,"reputation":56,"user_id":17534884,"display_name":"Samir Zafar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":181,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672925905,"creation_date":1672911963,"question_id":75016496,"body_markdown":"I am trying to connect to two different databases in Spring Boot.\r\nI want to connect to a MySQL database and an in-memory H2 database.\r\nMy application runs fine, but when I try to return all data in a table from the second database connection (H2) called &#39;Lobby&#39;, I get the following error:\r\n\r\n&gt; Table &quot;LOBBY&quot; not found (this database is empty)\r\n\r\nHere is my application.properties file (Please note I put in some dummy MySQL credentials for this post).\r\n```ini\r\n# Main DB -\r\nspring.datasource.jdbc-url=jdbc:mysql://localhost\r\nspring.datasource.username=sa\r\nspring.datasource.password=sa\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n\r\n# Keep the connection alive if idle for a long time (needed in production)\r\nspring.datasource.tomcat.test-while-idle=true\r\nspring.datasource.tomcat.validation-query=SELECT 1\r\n\r\n# In Memory, WebSocket and Secondary DB -\r\nspring.datasource.second.jdbc-url=jdbc:h2:mem:test\r\nspring.datasource.second.username=sa\r\nspring.datasource.second.password=sa\r\nspring.datasource.second.driver-class-name=org.h2.Driver\r\n\r\n# Extra Options -\r\nspring.jpa.hibernate.ddl-auto=update\r\nspring.jpa.show-sql=true\r\nspring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\r\nserver.error.include-message=always\r\nspring.jpa.properties.hibernate.format_sql=true\r\nspring.jpa.database=default\r\n```\r\n\r\nHere are my code snippets.\r\nPrimaryDbConfig:\r\n\r\n```java\r\npackage codenemy.api.Configuration;\r\n\r\nimport org.springframework.beans.factory.annotation.Qualifier;\r\nimport org.springframework.boot.context.properties.ConfigurationProperties;\r\nimport org.springframework.boot.jdbc.DataSourceBuilder;\r\nimport org.springframework.boot.orm.jpa.EntityManagerFactoryBuilder;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.context.annotation.Primary;\r\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\nimport org.springframework.orm.jpa.JpaTransactionManager;\r\nimport org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\r\nimport org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\r\nimport org.springframework.transaction.PlatformTransactionManager;\r\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\r\n\r\nimport javax.persistence.EntityManagerFactory;\r\nimport javax.sql.DataSource;\r\nimport java.util.HashMap;\r\n\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableJpaRepositories(\r\n        basePackages = {\r\n                &quot;codenemy.api.Auth.repository&quot;,\r\n                &quot;codenemy.api.Problem.repository&quot;,\r\n                &quot;codenemy.api.Submission.repository&quot;})\r\npublic class PrimaryDbConfig {\r\n    @Primary\r\n    @Bean(name = &quot;dataSource&quot;)\r\n    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\r\n    public DataSource dataSource() {\r\n        return DataSourceBuilder.create().build();\r\n    }\r\n\r\n    @Primary\r\n    @Bean(name = &quot;entityManagerFactory&quot;)\r\n    public LocalContainerEntityManagerFactoryBean\r\n    entityManagerFactory(\r\n            EntityManagerFactoryBuilder builder,\r\n            @Qualifier(&quot;dataSource&quot;) DataSource dataSource\r\n    ) {\r\n        return builder\r\n                .dataSource(dataSource)\r\n                .packages(\r\n                        &quot;codenemy.api.Auth.model&quot;,\r\n                        &quot;codenemy.api.Problem.model&quot;,\r\n                        &quot;codenemy.api.Submission.model&quot;)\r\n                .persistenceUnit(&quot;Role&quot;)\r\n                .persistenceUnit(&quot;User&quot;)\r\n                .persistenceUnit(&quot;Language&quot;)\r\n                .persistenceUnit(&quot;Problem&quot;)\r\n                .persistenceUnit(&quot;ProblemLanguage&quot;)\r\n                .persistenceUnit(&quot;Tag&quot;)\r\n                .persistenceUnit(&quot;TestCase&quot;)\r\n                .persistenceUnit(&quot;Submission&quot;)\r\n                .build();\r\n    }\r\n\r\n    @Primary\r\n    @Bean(name = &quot;transactionManager&quot;)\r\n    public PlatformTransactionManager transactionManager(\r\n            @Qualifier(&quot;entityManagerFactory&quot;) EntityManagerFactory\r\n                    entityManagerFactory\r\n    ) {\r\n        return new JpaTransactionManager(entityManagerFactory);\r\n    }\r\n\r\n    @Primary\r\n    @Bean\r\n    public EntityManagerFactoryBuilder entityManagerFactoryBuilder() {\r\n        return new EntityManagerFactoryBuilder(new HibernateJpaVendorAdapter(), new HashMap&lt;&gt;(), null);\r\n    }\r\n\r\n}\r\n```\r\nSecondaryDbConfig\r\n```java\r\npackage codenemy.api.Configuration;\r\n\r\nimport org.springframework.beans.factory.annotation.Qualifier;\r\nimport org.springframework.boot.context.properties.ConfigurationProperties;\r\nimport org.springframework.boot.jdbc.DataSourceBuilder;\r\nimport org.springframework.boot.orm.jpa.EntityManagerFactoryBuilder;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\nimport org.springframework.orm.jpa.JpaTransactionManager;\r\nimport org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\r\nimport org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\r\nimport org.springframework.transaction.PlatformTransactionManager;\r\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\r\n\r\nimport javax.persistence.EntityManagerFactory;\r\nimport javax.sql.DataSource;\r\nimport java.util.HashMap;\r\n\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableJpaRepositories(\r\n        entityManagerFactoryRef = &quot;secondaryEntityManagerFactory&quot;,\r\n        transactionManagerRef = &quot;secondaryTransactionManager&quot;,\r\n        basePackages = {&quot;codenemy.api.WebSocket.repository&quot;})\r\npublic class SecondaryDbConfig {\r\n\r\n    @Bean(name = &quot;secondaryDataSource&quot;)\r\n    @ConfigurationProperties(prefix = &quot;spring.datasource.second&quot;)\r\n    public DataSource dataSource() {\r\n        return DataSourceBuilder.create().build();\r\n    }\r\n\r\n    @Bean(name = &quot;secondaryEntityManagerFactory&quot;)\r\n    public LocalContainerEntityManagerFactoryBean secondaryEntityManagerFactory(\r\n            @Qualifier(&quot;secondaryEntityManagerFactoryBuilder&quot;) EntityManagerFactoryBuilder builder,\r\n            @Qualifier(&quot;secondaryDataSource&quot;) DataSource dataSource)\r\n    {\r\n        return builder\r\n                .dataSource(dataSource)\r\n                .packages(&quot;codenemy.api.WebSocket.model&quot;).build();\r\n    }\r\n\r\n    @Bean(name = &quot;secondaryTransactionManager&quot;)\r\n    public PlatformTransactionManager secondaryTransactionManager(\r\n            @Qualifier(&quot;secondaryEntityManagerFactory&quot;) EntityManagerFactory secondaryEntityManagerFactory) {\r\n        return new JpaTransactionManager(secondaryEntityManagerFactory);\r\n    }\r\n\r\n    @Bean(name = &quot;secondaryEntityManagerFactoryBuilder&quot;)\r\n    public EntityManagerFactoryBuilder entityManagerFactoryBuilder() {\r\n        return new EntityManagerFactoryBuilder(new HibernateJpaVendorAdapter(), new HashMap&lt;&gt;(), null);\r\n    }\r\n}\r\n```\r\n\r\n","title":"Connecting to two different databases from Spring Boot, second one not created","body":"<p>I am trying to connect to two different databases in Spring Boot.\nI want to connect to a MySQL database and an in-memory H2 database.\nMy application runs fine, but when I try to return all data in a table from the second database connection (H2) called 'Lobby', I get the following error:</p>\n<blockquote>\n<p>Table &quot;LOBBY&quot; not found (this database is empty)</p>\n</blockquote>\n<p>Here is my application.properties file (Please note I put in some dummy MySQL credentials for this post).</p>\n<pre class=\"lang-ini prettyprint-override\"><code># Main DB -\nspring.datasource.jdbc-url=jdbc:mysql://localhost\nspring.datasource.username=sa\nspring.datasource.password=sa\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n\n# Keep the connection alive if idle for a long time (needed in production)\nspring.datasource.tomcat.test-while-idle=true\nspring.datasource.tomcat.validation-query=SELECT 1\n\n# In Memory, WebSocket and Secondary DB -\nspring.datasource.second.jdbc-url=jdbc:h2:mem:test\nspring.datasource.second.username=sa\nspring.datasource.second.password=sa\nspring.datasource.second.driver-class-name=org.h2.Driver\n\n# Extra Options -\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.show-sql=true\nspring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\nserver.error.include-message=always\nspring.jpa.properties.hibernate.format_sql=true\nspring.jpa.database=default\n</code></pre>\n<p>Here are my code snippets.\nPrimaryDbConfig:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package codenemy.api.Configuration;\n\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.boot.jdbc.DataSourceBuilder;\nimport org.springframework.boot.orm.jpa.EntityManagerFactoryBuilder;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Primary;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\nimport org.springframework.orm.jpa.JpaTransactionManager;\nimport org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\nimport org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\nimport org.springframework.transaction.PlatformTransactionManager;\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\n\nimport javax.persistence.EntityManagerFactory;\nimport javax.sql.DataSource;\nimport java.util.HashMap;\n\n@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(\n        basePackages = {\n                &quot;codenemy.api.Auth.repository&quot;,\n                &quot;codenemy.api.Problem.repository&quot;,\n                &quot;codenemy.api.Submission.repository&quot;})\npublic class PrimaryDbConfig {\n    @Primary\n    @Bean(name = &quot;dataSource&quot;)\n    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\n    public DataSource dataSource() {\n        return DataSourceBuilder.create().build();\n    }\n\n    @Primary\n    @Bean(name = &quot;entityManagerFactory&quot;)\n    public LocalContainerEntityManagerFactoryBean\n    entityManagerFactory(\n            EntityManagerFactoryBuilder builder,\n            @Qualifier(&quot;dataSource&quot;) DataSource dataSource\n    ) {\n        return builder\n                .dataSource(dataSource)\n                .packages(\n                        &quot;codenemy.api.Auth.model&quot;,\n                        &quot;codenemy.api.Problem.model&quot;,\n                        &quot;codenemy.api.Submission.model&quot;)\n                .persistenceUnit(&quot;Role&quot;)\n                .persistenceUnit(&quot;User&quot;)\n                .persistenceUnit(&quot;Language&quot;)\n                .persistenceUnit(&quot;Problem&quot;)\n                .persistenceUnit(&quot;ProblemLanguage&quot;)\n                .persistenceUnit(&quot;Tag&quot;)\n                .persistenceUnit(&quot;TestCase&quot;)\n                .persistenceUnit(&quot;Submission&quot;)\n                .build();\n    }\n\n    @Primary\n    @Bean(name = &quot;transactionManager&quot;)\n    public PlatformTransactionManager transactionManager(\n            @Qualifier(&quot;entityManagerFactory&quot;) EntityManagerFactory\n                    entityManagerFactory\n    ) {\n        return new JpaTransactionManager(entityManagerFactory);\n    }\n\n    @Primary\n    @Bean\n    public EntityManagerFactoryBuilder entityManagerFactoryBuilder() {\n        return new EntityManagerFactoryBuilder(new HibernateJpaVendorAdapter(), new HashMap&lt;&gt;(), null);\n    }\n\n}\n</code></pre>\n<p>SecondaryDbConfig</p>\n<pre class=\"lang-java prettyprint-override\"><code>package codenemy.api.Configuration;\n\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.boot.jdbc.DataSourceBuilder;\nimport org.springframework.boot.orm.jpa.EntityManagerFactoryBuilder;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\nimport org.springframework.orm.jpa.JpaTransactionManager;\nimport org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\nimport org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\nimport org.springframework.transaction.PlatformTransactionManager;\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\n\nimport javax.persistence.EntityManagerFactory;\nimport javax.sql.DataSource;\nimport java.util.HashMap;\n\n@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(\n        entityManagerFactoryRef = &quot;secondaryEntityManagerFactory&quot;,\n        transactionManagerRef = &quot;secondaryTransactionManager&quot;,\n        basePackages = {&quot;codenemy.api.WebSocket.repository&quot;})\npublic class SecondaryDbConfig {\n\n    @Bean(name = &quot;secondaryDataSource&quot;)\n    @ConfigurationProperties(prefix = &quot;spring.datasource.second&quot;)\n    public DataSource dataSource() {\n        return DataSourceBuilder.create().build();\n    }\n\n    @Bean(name = &quot;secondaryEntityManagerFactory&quot;)\n    public LocalContainerEntityManagerFactoryBean secondaryEntityManagerFactory(\n            @Qualifier(&quot;secondaryEntityManagerFactoryBuilder&quot;) EntityManagerFactoryBuilder builder,\n            @Qualifier(&quot;secondaryDataSource&quot;) DataSource dataSource)\n    {\n        return builder\n                .dataSource(dataSource)\n                .packages(&quot;codenemy.api.WebSocket.model&quot;).build();\n    }\n\n    @Bean(name = &quot;secondaryTransactionManager&quot;)\n    public PlatformTransactionManager secondaryTransactionManager(\n            @Qualifier(&quot;secondaryEntityManagerFactory&quot;) EntityManagerFactory secondaryEntityManagerFactory) {\n        return new JpaTransactionManager(secondaryEntityManagerFactory);\n    }\n\n    @Bean(name = &quot;secondaryEntityManagerFactoryBuilder&quot;)\n    public EntityManagerFactoryBuilder entityManagerFactoryBuilder() {\n        return new EntityManagerFactoryBuilder(new HibernateJpaVendorAdapter(), new HashMap&lt;&gt;(), null);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","jpa","spring-transactions"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1672926974,"post_id":75019293,"comment_id":132386364,"body_markdown":"Your code is wrong, due to you catching an exception Spring doesn&#39;t know it needs to rollback. So eother do the exception handling outside of `methodA` or do manual tx management so that both your regular code and error handling code use a different transaction.","body":"Your code is wrong, due to you catching an exception Spring doesn&#39;t know it needs to rollback. So eother do the exception handling outside of <code>methodA</code> or do manual tx management so that both your regular code and error handling code use a different transaction."},{"owner":{"account_id":15800454,"reputation":120,"user_id":11401122,"display_name":"Bonniu"},"score":0,"creation_date":1672927101,"post_id":75019293,"comment_id":132386404,"body_markdown":"You are catching exception, Spring will rollback any RuntimeException, in your code there will be no exceptions thrown. So you should not catch the exception, or rethrow it, but remembering that it should extend RuntimeException","body":"You are catching exception, Spring will rollback any RuntimeException, in your code there will be no exceptions thrown. So you should not catch the exception, or rethrow it, but remembering that it should extend RuntimeException"},{"owner":{"account_id":4487116,"reputation":429,"user_id":3649352,"accept_rate":67,"display_name":"Kunal Varpe"},"score":0,"creation_date":1672929975,"post_id":75019293,"comment_id":132387516,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":21496283,"reputation":13,"user_id":15841266,"display_name":"John"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":419,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672925888,"creation_date":1672925888,"question_id":75019293,"body_markdown":"Below is the code I have implemented:\r\n\r\n\r\n```\r\n@Transactional\r\nMethodA{\r\n  try{\r\n     fetch from DB, update entities and save them;\r\n     some exception occurs;\r\n  } catch(Exception e){\r\n     update Exception to DB;\r\n  }\r\n}\r\n```\r\n\r\nThe updates I do to the entities in the try block are also saved to DB. How to circumvent this?","title":"Catching an exception during a transaction and saving the error to DB, but modified entities in try block also getting saved","body":"<p>Below is the code I have implemented:</p>\n<pre><code>@Transactional\nMethodA{\n  try{\n     fetch from DB, update entities and save them;\n     some exception occurs;\n  } catch(Exception e){\n     update Exception to DB;\n  }\n}\n</code></pre>\n<p>The updates I do to the entities in the try block are also saved to DB. How to circumvent this?</p>\n"},{"tags":["java","linux"],"comments":[{"owner":{"account_id":2413237,"reputation":31164,"user_id":2107876,"accept_rate":88,"display_name":"laune"},"score":0,"creation_date":1423462954,"post_id":28403852,"comment_id":45142472,"body_markdown":"Check https://access.redhat.com/solutions/446823","body":"Check <a href=\"https://access.redhat.com/solutions/446823\" rel=\"nofollow noreferrer\">access.redhat.com/solutions/446823</a>"},{"owner":{"account_id":2736964,"reputation":1137,"user_id":2359435,"accept_rate":75,"display_name":"Max"},"score":0,"creation_date":1673344007,"post_id":28403852,"comment_id":132472140,"body_markdown":"Happened to me because of Elastic APM java agent 1.35.0. See https://discuss.elastic.co/t/sigsegv-jvm-crash/322812/1","body":"Happened to me because of Elastic APM java agent 1.35.0. See <a href=\"https://discuss.elastic.co/t/sigsegv-jvm-crash/322812/1\" rel=\"nofollow noreferrer\">discuss.elastic.co/t/sigsegv-jvm-crash/322812/1</a>"}],"answers":[{"tags":[],"owner":{"account_id":4144598,"reputation":2301,"user_id":3398732,"accept_rate":58,"display_name":"CodeWalker"},"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1423465318,"creation_date":1423464405,"answer_id":28404197,"question_id":28403852,"body_markdown":"&gt; Signal Description\r\n\r\n&gt; SIGSEGV, SIGBUS, SIGFPE, SIGPIPE, SIGILL --\r\nUsed in the implementation for implicit null check, and so forth.&lt;br&gt;\r\n\r\n&gt; SIGQUIT\tThread dump support -- To dump Java stack traces at the standard error stream. (Optional.)&lt;br&gt;\r\n\r\n&gt; SIGTERM, SIGINT, SIGHUP --\tUsed to support the shutdown hook mechanism (java.lang.Runtime.addShutdownHook) when the VM is terminated abnormally. (Optional.)&lt;br&gt;\r\n\r\n&gt; SIGUSR1 -- Used in the implementation of the java.lang.Thread.interrupt method. (Configurable.) Not used starting with Solaris 10 OS. Reserved on Linux.\r\nSIGUSR2\tUsed internally. (Configurable.) Not used starting with Solaris 10 OS.\r\nSIGABRT\tThe HotSpot VM does not handle this signal. Instead it calls the abort function after fatal error handling. If an application uses this signal then it should terminate the process to preserve the expected semantics.\r\n\r\nThe fatal error log indicates that the crash was in a native library, there might be a bug in native code or JNI library code. The crash could of course be caused by something else, but analysis of the library and any core file or crash dump is a good starting place.\r\n\r\nIn this case a SIGSEGV occurred with a thread executing in the library libdtagentcore.so . In some cases a bug in a native library manifests itself as a crash in Java VM code. Consider the following crash where a JavaThread fails while in the _thread_in_vm state (meaning that it is executing in Java VM code)\r\n\r\n&lt;ul&gt;&lt;li&gt;If you get a crash in a native application library (as in your case), then you might be able to attach the native debugger to the core file or crash dump, if it is available. Depending on the operating system, the native debugger is dbx, gdb, or windbg.\r\n\r\n&lt;li&gt;Another approach is to run with the `-Xcheck:jni` option added to the command line. This option is not guaranteed to find all issues with JNI code, but it can help identify a significant number of issues.\r\n\r\n&lt;li&gt;If the native library where the crash occurred is part of the Java runtime environment (for example awt.dll, net.dll, and so forth), then it is possible that you have encountered a library or API bug. If after further analysis you conclude this is a library or API bug, then gather a much data as possible and submit a bug or support call.\r\n&lt;/ul&gt;","title":"JVM Crash due to SIGSEGV","body":"<blockquote>\n  <p>Signal Description</p>\n  \n  <p>SIGSEGV, SIGBUS, SIGFPE, SIGPIPE, SIGILL --\n  Used in the implementation for implicit null check, and so forth.<br></p>\n  \n  <p>SIGQUIT   Thread dump support -- To dump Java stack traces at the standard error stream. (Optional.)<br></p>\n  \n  <p>SIGTERM, SIGINT, SIGHUP --    Used to support the shutdown hook mechanism (java.lang.Runtime.addShutdownHook) when the VM is terminated abnormally. (Optional.)<br></p>\n  \n  <p>SIGUSR1 -- Used in the implementation of the java.lang.Thread.interrupt method. (Configurable.) Not used starting with Solaris 10 OS. Reserved on Linux.\n  SIGUSR2 Used internally. (Configurable.) Not used starting with Solaris 10 OS.\n  SIGABRT The HotSpot VM does not handle this signal. Instead it calls the abort function after fatal error handling. If an application uses this signal then it should terminate the process to preserve the expected semantics.</p>\n</blockquote>\n\n<p>The fatal error log indicates that the crash was in a native library, there might be a bug in native code or JNI library code. The crash could of course be caused by something else, but analysis of the library and any core file or crash dump is a good starting place.</p>\n\n<p>In this case a SIGSEGV occurred with a thread executing in the library libdtagentcore.so . In some cases a bug in a native library manifests itself as a crash in Java VM code. Consider the following crash where a JavaThread fails while in the _thread_in_vm state (meaning that it is executing in Java VM code)</p>\n\n<ul><li>If you get a crash in a native application library (as in your case), then you might be able to attach the native debugger to the core file or crash dump, if it is available. Depending on the operating system, the native debugger is dbx, gdb, or windbg.\n\n<li>Another approach is to run with the `-Xcheck:jni` option added to the command line. This option is not guaranteed to find all issues with JNI code, but it can help identify a significant number of issues.\n\n<li>If the native library where the crash occurred is part of the Java runtime environment (for example awt.dll, net.dll, and so forth), then it is possible that you have encountered a library or API bug. If after further analysis you conclude this is a library or API bug, then gather a much data as possible and submit a bug or support call.\n</ul>\n"},{"tags":[],"owner":{"account_id":1802273,"reputation":1208,"user_id":1640284,"accept_rate":29,"display_name":"Ales Teska"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1474417762,"creation_date":1423618103,"answer_id":28445066,"question_id":28403852,"body_markdown":"There is one catchy situation in JNI code: when such a code blocks SIGSEGV signal e.g. because it blocks all signals (quite common approach in threaded C code how to ensure that only main thread will process signals) *AND* it calls &#39;back&#39; Java VM (aka callback) then it can result in quite random SIGSEGV-triggered aborting of the process.  \r\nAnd there is virtually nothing wrong - SIGSEGV is actually triggered by Java VM in order to detect certain conditions in memory (it acts as memory barrier … etc) and it expects that such a signal will be handled by Java VM. Unfortunately when SIGSEGV is blocked, then &#39;standard&#39; SIGSEGV reaction is triggered =&gt; VM process crashes.","title":"JVM Crash due to SIGSEGV","body":"<p>There is one catchy situation in JNI code: when such a code blocks SIGSEGV signal e.g. because it blocks all signals (quite common approach in threaded C code how to ensure that only main thread will process signals) <em>AND</em> it calls 'back' Java VM (aka callback) then it can result in quite random SIGSEGV-triggered aborting of the process.<br>\nAnd there is virtually nothing wrong - SIGSEGV is actually triggered by Java VM in order to detect certain conditions in memory (it acts as memory barrier … etc) and it expects that such a signal will be handled by Java VM. Unfortunately when SIGSEGV is blocked, then 'standard' SIGSEGV reaction is triggered => VM process crashes.</p>\n"},{"tags":[],"owner":{"account_id":125486,"reputation":2868,"user_id":321302,"accept_rate":100,"display_name":"Steves"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1487246469,"creation_date":1487246469,"answer_id":42273382,"question_id":28403852,"body_markdown":"It is telling you that an error occurred in code loaded from `libdtagentcore.so`. More specifically it happened in function named `restrict` and at offset `0x506f6`. The first offset mentioned (`0xb7aaa`) is offset within the library itself. If it was build with debugging symbols (-g) you can look at the code that caused the exception, on Linux something along the lines of:\r\n\r\n    addr2line -e libdtagentcore.so -C -f 0xb7aaa\r\n\r\nIn case this is read by someone on Windows, see https://community.oracle.com/blogs/kohsuke/2009/02/19/crash-course-jvm-crash-analysis\r\n\r\nMore details in https://www.youtube.com/watch?v=jd6dJa7tSNU","title":"JVM Crash due to SIGSEGV","body":"<p>It is telling you that an error occurred in code loaded from <code>libdtagentcore.so</code>. More specifically it happened in function named <code>restrict</code> and at offset <code>0x506f6</code>. The first offset mentioned (<code>0xb7aaa</code>) is offset within the library itself. If it was build with debugging symbols (-g) you can look at the code that caused the exception, on Linux something along the lines of:</p>\n\n<pre><code>addr2line -e libdtagentcore.so -C -f 0xb7aaa\n</code></pre>\n\n<p>In case this is read by someone on Windows, see <a href=\"https://community.oracle.com/blogs/kohsuke/2009/02/19/crash-course-jvm-crash-analysis\" rel=\"noreferrer\">https://community.oracle.com/blogs/kohsuke/2009/02/19/crash-course-jvm-crash-analysis</a></p>\n\n<p>More details in <a href=\"https://www.youtube.com/watch?v=jd6dJa7tSNU\" rel=\"noreferrer\">https://www.youtube.com/watch?v=jd6dJa7tSNU</a></p>\n"}],"owner":{"account_id":4762832,"reputation":171,"user_id":3849800,"accept_rate":0,"display_name":"Manisankar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29739,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":3,"score":13,"last_activity_date":1672925866,"creation_date":1423462599,"question_id":28403852,"body_markdown":"Our server hung because of a SIGSEGV fault..\r\n\r\n    \r\n\r\n   \r\n A fatal error has been detected by the Java Runtime Environment:\r\n\r\n      SIGSEGV (0xb) at pc=0x00007ff5c7195aaa, pid=262778, tid=140690480097024\r\n    \r\n     JRE version: 6.0_35-b10\r\n     Java VM: Java HotSpot(TM) 64-Bit Server VM (20.10-b01 mixed mode linux-amd64 compressed oops)\r\n     Problematic frame:\r\n     C  [libdtagentcore.so+0xb7aaa]  long double restrict+0x506f6\r\n\r\n    \r\n\r\nI am curious to know what could be the root cause of this?\r\n\r\nAny help is highly appreciated..Thanks..\r\n","title":"JVM Crash due to SIGSEGV","body":"<p>Our server hung because of a SIGSEGV fault..</p>\n\n<p>A fatal error has been detected by the Java Runtime Environment:</p>\n\n<pre><code>  SIGSEGV (0xb) at pc=0x00007ff5c7195aaa, pid=262778, tid=140690480097024\n\n JRE version: 6.0_35-b10\n Java VM: Java HotSpot(TM) 64-Bit Server VM (20.10-b01 mixed mode linux-amd64 compressed oops)\n Problematic frame:\n C  [libdtagentcore.so+0xb7aaa]  long double restrict+0x506f6\n</code></pre>\n\n<p>I am curious to know what could be the root cause of this?</p>\n\n<p>Any help is highly appreciated..Thanks..</p>\n"},{"tags":["java","unzip","zip"],"comments":[{"owner":{"account_id":2334898,"reputation":441,"user_id":2047463,"display_name":"parsifal"},"score":1,"creation_date":1360348370,"post_id":14778980,"comment_id":20691497,"body_markdown":"As written, your question is very unclear. Do you want to extract files from the ZIP or not? What *specific problem* are you trying to solve?","body":"As written, your question is very unclear. Do you want to extract files from the ZIP or not? What <i>specific problem</i> are you trying to solve?"},{"owner":{"account_id":1005212,"reputation":28558,"user_id":1019167,"accept_rate":92,"display_name":"AlexWien"},"score":0,"creation_date":1360349278,"post_id":14778980,"comment_id":20691904,"body_markdown":"bye the way: Navigation Sytems do it the same way, they keep their digital road maps data compressed in main memory, and unzip parts on demand","body":"bye the way: Navigation Sytems do it the same way, they keep their digital road maps data compressed in main memory, and unzip parts on demand"}],"answers":[{"tags":[],"owner":{"account_id":1005212,"reputation":28558,"user_id":1019167,"accept_rate":92,"display_name":"AlexWien"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1411740105,"creation_date":1360348111,"answer_id":14779013,"question_id":14778980,"body_markdown":"Your idea is to read the zip file as it is into a byte array and store it in a variable.\r\nLater when you need the zip you extract it on demand, saving memory:\r\n\r\nFirst read the content of the  Zip file in a byte array *zipFileBytes*&lt;br&gt;\r\n\r\nIf you have Java 1.7:\r\n\r\n    Path path = Paths.get(&quot;path/to/file&quot;);\r\n    byte[] zipFileBytes= Files.readAllBytes(path);\r\n\r\notherwise use Appache.commons lib\r\n\r\n    byte[] zipFileBytes;\r\n    zipFileBytes = IOUtils.toByteArray(InputStream input);\r\n\r\n\r\nNow your Zip file is stored in a variable zipFileBytes, still in compressed form.\r\n\r\nThen when you need to extract something use \r\n\r\n    ByteArrayInputStream bis = new ByteArrayInputStream(zipFileBytes));\r\n    ZipInputStream zis = new ZipInputStream(bis);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to read content of the Zipped file without extracting in java","body":"<p>Your idea is to read the zip file as it is into a byte array and store it in a variable.\nLater when you need the zip you extract it on demand, saving memory:</p>\n\n<p>First read the content of the  Zip file in a byte array <em>zipFileBytes</em><br></p>\n\n<p>If you have Java 1.7:</p>\n\n<pre><code>Path path = Paths.get(\"path/to/file\");\nbyte[] zipFileBytes= Files.readAllBytes(path);\n</code></pre>\n\n<p>otherwise use Appache.commons lib</p>\n\n<pre><code>byte[] zipFileBytes;\nzipFileBytes = IOUtils.toByteArray(InputStream input);\n</code></pre>\n\n<p>Now your Zip file is stored in a variable zipFileBytes, still in compressed form.</p>\n\n<p>Then when you need to extract something use </p>\n\n<pre><code>ByteArrayInputStream bis = new ByteArrayInputStream(zipFileBytes));\nZipInputStream zis = new ZipInputStream(bis);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":439324,"reputation":32505,"user_id":828193,"accept_rate":85,"display_name":"user000001"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1672925636,"creation_date":1360348368,"answer_id":14779083,"question_id":14778980,"body_markdown":"Try this:\r\n\r\n  \r\n        String zipFile = &quot;ex.zip&quot;;\r\n        try (ZipFile zip = new ZipFile(zipFile)) {\r\n            int i = 0;\r\n            for (Enumeration&lt;? extends ZipEntry&gt; e = zip.entries(); e.hasMoreElements(); ) {\r\n                ZipEntry entry = (ZipEntry) e.nextElement();\r\n                System.out.println(entry);\r\n                System.out.println(i);\r\n\r\n                InputStream in = zip.getInputStream(entry);\r\n            }\r\n        }\r\n\r\n\r\nFor example, if the file contains text, and you want to print it as a String, you can read the InputStream like this: https://stackoverflow.com/questions/309424/read-convert-an-inputstream-to-a-string","title":"How to read content of the Zipped file without extracting in java","body":"<p>Try this:</p>\n<pre><code>    String zipFile = &quot;ex.zip&quot;;\n    try (ZipFile zip = new ZipFile(zipFile)) {\n        int i = 0;\n        for (Enumeration&lt;? extends ZipEntry&gt; e = zip.entries(); e.hasMoreElements(); ) {\n            ZipEntry entry = (ZipEntry) e.nextElement();\n            System.out.println(entry);\n            System.out.println(i);\n\n            InputStream in = zip.getInputStream(entry);\n        }\n    }\n</code></pre>\n<p>For example, if the file contains text, and you want to print it as a String, you can read the InputStream like this: <a href=\"https://stackoverflow.com/questions/309424/read-convert-an-inputstream-to-a-string\">How do I read / convert an InputStream into a String in Java?</a></p>\n"},{"tags":[],"owner":{"account_id":38931,"reputation":32526,"user_id":112079,"display_name":"fvu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1360349754,"creation_date":1360348720,"answer_id":14779174,"question_id":14778980,"body_markdown":"I think that in your case the fact that a zipfile is a container that can hold many files (and thus forces you to navigate to the right contained file each time you open it) seriously complicates things, as you state that each zipfile only contains one textfile.  Maybe it&#39;s a lot easier to just gzip the text file (gzip is not a container, just a compressed version of your data).  And it&#39;s very simple to use:\r\n\r\n    GZIPInputStream gis = new GZIPInputStream(new FileInputStream(&quot;file.txt.gz&quot;));\r\n    // and a BufferedReader on top to comfortably read the file\r\n    BufferedReader in = new BufferedReader(new InputStreamReader(gis) );\r\n\r\nProducing them is equally simple:\r\n\r\n    GZIPOutputStream gos = new GZIPOutputStream(new FileOutputStream(&quot;file.txt.gz&quot;));","title":"How to read content of the Zipped file without extracting in java","body":"<p>I think that in your case the fact that a zipfile is a container that can hold many files (and thus forces you to navigate to the right contained file each time you open it) seriously complicates things, as you state that each zipfile only contains one textfile.  Maybe it's a lot easier to just gzip the text file (gzip is not a container, just a compressed version of your data).  And it's very simple to use:</p>\n\n<pre><code>GZIPInputStream gis = new GZIPInputStream(new FileInputStream(\"file.txt.gz\"));\n// and a BufferedReader on top to comfortably read the file\nBufferedReader in = new BufferedReader(new InputStreamReader(gis) );\n</code></pre>\n\n<p>Producing them is equally simple:</p>\n\n<pre><code>GZIPOutputStream gos = new GZIPOutputStream(new FileOutputStream(\"file.txt.gz\"));\n</code></pre>\n"}],"owner":{"account_id":2160662,"reputation":139,"user_id":1914880,"display_name":"satheesh kumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28469,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1672925636,"creation_date":1360347976,"question_id":14778980,"body_markdown":"I have file with names like `ex.zip`. In this example, the Zip file contains only one file with the same name(ie. `ex.txt&#39;), which is quite large. I don&#39;t want to extract the zip file every time.Hence I need to read the content of the file(ex.txt) without extracting the zip file. I tried some code like below But i can only read the name of the file in the variable.\r\n\r\nHow do I read the content of the file and stores it in the variable? \r\n\r\nThank you in Advance\r\n\r\n\r\n    fis=new FileInputStream(&quot;C:/Documents and Settings/satheesh/Desktop/ex.zip&quot;);\r\n    ZipInputStream zis = new ZipInputStream(new BufferedInputStream(fis));\r\n    ZipEntry entry;\r\n\r\n    while((entry = zis.getNextEntry()) != null) {\r\n        i=i+1; \r\n        System.out.println(entry);\r\n        System.out.println(i);\r\n        //read from zis until available\r\n    }\r\n\r\n","title":"How to read content of the Zipped file without extracting in java","body":"<p>I have file with names like <code>ex.zip</code>. In this example, the Zip file contains only one file with the same name(ie. `ex.txt'), which is quite large. I don't want to extract the zip file every time.Hence I need to read the content of the file(ex.txt) without extracting the zip file. I tried some code like below But i can only read the name of the file in the variable.</p>\n\n<p>How do I read the content of the file and stores it in the variable? </p>\n\n<p>Thank you in Advance</p>\n\n<pre><code>fis=new FileInputStream(\"C:/Documents and Settings/satheesh/Desktop/ex.zip\");\nZipInputStream zis = new ZipInputStream(new BufferedInputStream(fis));\nZipEntry entry;\n\nwhile((entry = zis.getNextEntry()) != null) {\n    i=i+1; \n    System.out.println(entry);\n    System.out.println(i);\n    //read from zis until available\n}\n</code></pre>\n"},{"tags":["java","android","timestamp"],"comments":[{"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1672925627,"post_id":75019199,"comment_id":132385778,"body_markdown":"You have a `T` in the middle of the input sting that is not present in the prescribed format.","body":"You have a <code>T</code> in the middle of the input sting that is not present in the prescribed format."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1673184666,"post_id":75019199,"comment_id":132436622,"body_markdown":"I strongly recommend that you don’t use `java.sql.Timestamp`. That class is a hack on top of the already poorly designed `java.util.Date` class and has some nasty surprises. For a timestamp prefer to use `timestamp with time zone` in SQL and `OffsetDateTime` in Java (`Instant` may or may not work).","body":"I strongly recommend that you don’t use <code>java.sql.Timestamp</code>. That class is a hack on top of the already poorly designed <code>java.util.Date</code> class and has some nasty surprises. For a timestamp prefer to use <code>timestamp with time zone</code> in SQL and <code>OffsetDateTime</code> in Java (<code>Instant</code> may or may not work)."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1673184853,"post_id":75019199,"comment_id":132436655,"body_markdown":"If under no circumstances you can avoid the need for an old-fashioned `Timestamp` object, you may get one from `Timestamp.from(OffsetDateTime.parse(&quot;2023-01-05T12:33:32.883+00:00&quot;).toInstant())`.","body":"If under no circumstances you can avoid the need for an old-fashioned <code>Timestamp</code> object, you may get one from <code>Timestamp.from(OffsetDateTime.parse(&quot;2023-01-05T12:33:32.883&zwnj;&#8203;+00:00&quot;).toInstant()&zwnj;&#8203;)</code>."}],"owner":{"account_id":8720587,"reputation":163,"user_id":6523875,"display_name":"StudentOfTheGame"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672925442,"creation_date":1672925442,"question_id":75019199,"body_markdown":"My Rest API has the following field:\r\n```\r\n@JsonProperty(access = JsonProperty.Access.READ_ONLY)\r\n   @Column(name = &quot;timestamp&quot;)\r\n   @CreationTimestamp\r\n   private Timestamp timestamp;\r\n```\r\nWhen the following JSON is returned as a response from the API to Android:\r\n```\r\n{&quot;timestamp&quot;:&quot;2023-01-05T12:33:32.883+00:00&quot;}\r\n```\r\nI am parsing it like this:\r\n```\r\nx.setTimestamp(java.sql.Timestamp.valueOf(arr.getJSONObject(i).getString(&quot;timestamp&quot;)));\r\n```\r\nWhile the field is of type java.sql.Timestamp on both API and Android, i am getting the following exception:\r\n```\r\njava.lang.IllegalArgumentException: Timestamp format must be yyyy-mm-dd hh:mm:ss[.fffffffff]\r\n```","title":"Android can&#39;t parse java.sql.Timestamp","body":"<p>My Rest API has the following field:</p>\n<pre><code>@JsonProperty(access = JsonProperty.Access.READ_ONLY)\n   @Column(name = &quot;timestamp&quot;)\n   @CreationTimestamp\n   private Timestamp timestamp;\n</code></pre>\n<p>When the following JSON is returned as a response from the API to Android:</p>\n<pre><code>{&quot;timestamp&quot;:&quot;2023-01-05T12:33:32.883+00:00&quot;}\n</code></pre>\n<p>I am parsing it like this:</p>\n<pre><code>x.setTimestamp(java.sql.Timestamp.valueOf(arr.getJSONObject(i).getString(&quot;timestamp&quot;)));\n</code></pre>\n<p>While the field is of type java.sql.Timestamp on both API and Android, i am getting the following exception:</p>\n<pre><code>java.lang.IllegalArgumentException: Timestamp format must be yyyy-mm-dd hh:mm:ss[.fffffffff]\n</code></pre>\n"},{"tags":["java","exception","try-catch"],"comments":[{"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"score":0,"creation_date":1672925333,"post_id":75019127,"comment_id":132385678,"body_markdown":"Can you expand on what you mean by *doesn&#39;t work*? Add compilation error(s) if you get any.","body":"Can you expand on what you mean by <i>doesn&#39;t work</i>? Add compilation error(s) if you get any."},{"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"score":1,"creation_date":1672925629,"post_id":75019127,"comment_id":132385780,"body_markdown":"`addMessage` returns an instance of `ExceptionManager`. But an `ExceptionManager` is **not** a Throwable","body":"<code>addMessage</code> returns an instance of <code>ExceptionManager</code>. But an <code>ExceptionManager</code> is <b>not</b> a Throwable"},{"owner":{"account_id":26181927,"reputation":31,"user_id":19865178,"display_name":"Flo Flo"},"score":0,"creation_date":1672928263,"post_id":75019127,"comment_id":132386852,"body_markdown":"It tells me that the exception thrown is not declared in the method.","body":"It tells me that the exception thrown is not declared in the method."},{"owner":{"account_id":26181927,"reputation":31,"user_id":19865178,"display_name":"Flo Flo"},"score":0,"creation_date":1672928302,"post_id":75019127,"comment_id":132386868,"body_markdown":"Yes I understand but what should I do ?","body":"Yes I understand but what should I do ?"}],"owner":{"account_id":26181927,"reputation":31,"user_id":19865178,"display_name":"Flo Flo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1672925094,"creation_date":1672925094,"question_id":75019127,"body_markdown":"I have 2 classes:\r\n\r\n    class MyException extends Exception implements ExceptionManager{\r\n        MyException addMessage(String message){...}\r\n    }\r\n\r\nand\r\n\r\n    class MyRuntimeException extends RuntimeException implements ExceptionManager {\r\n        MyRuntimeException addMessage(String message){...}\r\n    }\r\n\r\nwhere\r\n\r\n    interface ExceptionManager{\r\n        ExceptionManager addMessage(String message);\r\n    }\r\nI want to do this:\r\n\r\n    void foo() throws MyException {\r\n        try {\r\n            ...\r\n        } catch (MyException | MyRuntimeException e){\r\n            throw e.addMessage(...);\r\n        }\r\n    }\r\nbut it doesn&#39;t work ; I tried setting ExceptionManager&lt;T extends Exception &amp; ExceptionManager&lt;T&gt;&gt; and T addMessage(String message); or other things but still doesn&#39;t work...\r\n\r\nObviously I don&#39;t want foo to throw Exception nor set 2 catches and the project is java 11 so no scealed types.\r\n\r\nCan&#39;t the compiler understand that there&#39;s only 2 possibilities for the exception to be thrown, one runtime so I only must declare the other ? Can someone tell me how to do or confirm that it&#39;s impossible ?\r\n\r\nThanks","title":"catch disjonction case exception","body":"<p>I have 2 classes:</p>\n<pre><code>class MyException extends Exception implements ExceptionManager{\n    MyException addMessage(String message){...}\n}\n</code></pre>\n<p>and</p>\n<pre><code>class MyRuntimeException extends RuntimeException implements ExceptionManager {\n    MyRuntimeException addMessage(String message){...}\n}\n</code></pre>\n<p>where</p>\n<pre><code>interface ExceptionManager{\n    ExceptionManager addMessage(String message);\n}\n</code></pre>\n<p>I want to do this:</p>\n<pre><code>void foo() throws MyException {\n    try {\n        ...\n    } catch (MyException | MyRuntimeException e){\n        throw e.addMessage(...);\n    }\n}\n</code></pre>\n<p>but it doesn't work ; I tried setting ExceptionManager&lt;T extends Exception &amp; ExceptionManager&gt; and T addMessage(String message); or other things but still doesn't work...</p>\n<p>Obviously I don't want foo to throw Exception nor set 2 catches and the project is java 11 so no scealed types.</p>\n<p>Can't the compiler understand that there's only 2 possibilities for the exception to be thrown, one runtime so I only must declare the other ? Can someone tell me how to do or confirm that it's impossible ?</p>\n<p>Thanks</p>\n"},{"tags":["java","android","android-studio","r.java-file","android-package-managers"],"comments":[{"owner":{"account_id":4490687,"reputation":124,"user_id":3651854,"accept_rate":50,"display_name":"user3651854"},"score":0,"creation_date":1511522128,"post_id":26888762,"comment_id":81898516,"body_markdown":"I have the same problem. Did you find a solution ?","body":"I have the same problem. Did you find a solution ?"}],"answers":[{"tags":[],"owner":{"account_id":4217278,"reputation":799,"user_id":3453066,"accept_rate":92,"display_name":"Jure"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1415800949,"creation_date":1415800949,"answer_id":26888822,"question_id":26888762,"body_markdown":"It&#39;s best to rename packages so that you right click on package name - &gt; refactor -&gt; rename. So android studio automatically renames all that has to be renamed.","title":"After Renaming Package Name in android studio Launching error, Runtime Error","body":"<p>It's best to rename packages so that you right click on package name - > refactor -> rename. So android studio automatically renames all that has to be renamed.</p>\n"},{"tags":[],"owner":{"account_id":535236,"reputation":10313,"user_id":829407,"display_name":"IncrediApp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1425560421,"creation_date":1425560421,"answer_id":28878476,"question_id":26888762,"body_markdown":"You need to clean the project after renaming the packages as for some reason it doesn&#39;t rebuild it after the rename.\r\nChoose `Build -&gt; Clean Project` and then run it again - It should be fine","title":"After Renaming Package Name in android studio Launching error, Runtime Error","body":"<p>You need to clean the project after renaming the packages as for some reason it doesn't rebuild it after the rename.\nChoose <code>Build -&gt; Clean Project</code> and then run it again - It should be fine</p>\n"},{"tags":[],"owner":{"account_id":2993104,"reputation":3717,"user_id":2540235,"display_name":"Design.Garden"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1635180571,"creation_date":1513710952,"answer_id":47893768,"question_id":26888762,"body_markdown":"Using Android Studio 3.0.1, it is not enough to just refactor the name of your package using the `Refactor -&gt; Rename...` tool. First, as noted, this misses several references throughout your project, including within your Manifest file(s). Second, this misses generated-files and Android Studio cache (leading to the error identified by the OP).\r\n\r\nFor anyone stumbling on this, if you have not already renamed your package then follow these steps to do so: https://stackoverflow.com/questions/16804093/android-studio-rename-package\r\n\r\nOtherwise, if you&#39;ve already tried and failed then the following steps will rescue your project:\r\n\r\n**Solution in Android Studio**\r\n\r\n 1. Use `Ctrl+Shift+F` to find and replace any references to your old package name that were missed by the refactor tool.\r\n 2. Fix any remaining errors in your code, then clean and rebuild your application using `Build -&gt; Clean Project`. This will regenerate your R file, fixing the last related build error, but giving you the startup error noted by the OP. Unfortunately, if you still have build errors then you&#39;re not quite facing the same issue as the OP...\r\n 3. Prepare to restart the IDE (save your work and close any emulators that are running).\r\n 4. From Android Studio, select `File -&gt; Invalidate Caches / Restart...`\r\n\r\nThat&#39;s it! Android Studio will synchronize your Gradle file upon restarting, and from now on it will reference your new package name when starting your app.","title":"After Renaming Package Name in android studio Launching error, Runtime Error","body":"<p>Using Android Studio 3.0.1, it is not enough to just refactor the name of your package using the <code>Refactor -&gt; Rename...</code> tool. First, as noted, this misses several references throughout your project, including within your Manifest file(s). Second, this misses generated-files and Android Studio cache (leading to the error identified by the OP).</p>\n<p>For anyone stumbling on this, if you have not already renamed your package then follow these steps to do so: <a href=\"https://stackoverflow.com/questions/16804093/android-studio-rename-package\">Rename package in Android Studio</a></p>\n<p>Otherwise, if you've already tried and failed then the following steps will rescue your project:</p>\n<p><strong>Solution in Android Studio</strong></p>\n<ol>\n<li>Use <code>Ctrl+Shift+F</code> to find and replace any references to your old package name that were missed by the refactor tool.</li>\n<li>Fix any remaining errors in your code, then clean and rebuild your application using <code>Build -&gt; Clean Project</code>. This will regenerate your R file, fixing the last related build error, but giving you the startup error noted by the OP. Unfortunately, if you still have build errors then you're not quite facing the same issue as the OP...</li>\n<li>Prepare to restart the IDE (save your work and close any emulators that are running).</li>\n<li>From Android Studio, select <code>File -&gt; Invalidate Caches / Restart...</code></li>\n</ol>\n<p>That's it! Android Studio will synchronize your Gradle file upon restarting, and from now on it will reference your new package name when starting your app.</p>\n"},{"tags":[],"owner":{"account_id":433890,"reputation":850,"user_id":819486,"accept_rate":87,"display_name":"byteWalrus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672925083,"creation_date":1672925083,"answer_id":75019125,"question_id":26888762,"body_markdown":"For anybody still having issues with the app installing, but not launching on devices or the emulator, even after invalidating caches and doing everything else:\r\n\r\nWhen I renamed the package in my project, it somehow also edited my ```Run/Debug Configurations```. Make sure ```Launch``` under the ```Launch Options``` section is not set to ```None```. Usually, this should be ```Default Activity```.","title":"After Renaming Package Name in android studio Launching error, Runtime Error","body":"<p>For anybody still having issues with the app installing, but not launching on devices or the emulator, even after invalidating caches and doing everything else:</p>\n<p>When I renamed the package in my project, it somehow also edited my <code>Run/Debug Configurations</code>. Make sure <code>Launch</code> under the <code>Launch Options</code> section is not set to <code>None</code>. Usually, this should be <code>Default Activity</code>.</p>\n"}],"owner":{"account_id":1085189,"reputation":2325,"user_id":1081050,"accept_rate":43,"display_name":"Dharmik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11030,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":4,"score":11,"last_activity_date":1672925083,"creation_date":1415800773,"question_id":26888762,"body_markdown":"\r\nI have one project in android studio, \r\n\r\nI have first exported project from eclipse to android studio. \r\nAfter that \r\nI have changed its package name in `AndroidMenifest.xml,` \r\n\r\nrename directories from Android Studio, \r\n\r\nChanges Package name in all `my class files`, \r\n\r\nalso changed position of `R.java` file \r\n\r\nAnd `gen` folder like old was `com.oldpath.path1` to `com.newpath.path2`.\r\n\r\nAlso reflect same in R.java file and BuildConfig.java file.\r\n\r\nNow getting Error as follow..\r\n\r\n        Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.oldpath.path1/com.newpath.path2.main.SplashScreen }\r\n    Error type 3\r\n    Error: Activity class {com.oldpath.path1/com.newpath.path2.main.SplashScreen} does not exist.\r\n\r\n\r\nPlease help me I am stuck in my project..","title":"After Renaming Package Name in android studio Launching error, Runtime Error","body":"<p>I have one project in android studio, </p>\n\n<p>I have first exported project from eclipse to android studio. \nAfter that \nI have changed its package name in <code>AndroidMenifest.xml,</code> </p>\n\n<p>rename directories from Android Studio, </p>\n\n<p>Changes Package name in all <code>my class files</code>, </p>\n\n<p>also changed position of <code>R.java</code> file </p>\n\n<p>And <code>gen</code> folder like old was <code>com.oldpath.path1</code> to <code>com.newpath.path2</code>.</p>\n\n<p>Also reflect same in R.java file and BuildConfig.java file.</p>\n\n<p>Now getting Error as follow..</p>\n\n<pre><code>    Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.oldpath.path1/com.newpath.path2.main.SplashScreen }\nError type 3\nError: Activity class {com.oldpath.path1/com.newpath.path2.main.SplashScreen} does not exist.\n</code></pre>\n\n<p>Please help me I am stuck in my project..</p>\n"},{"tags":["java","arraylist","actionlistener","is-empty"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1672924711,"post_id":75018940,"comment_id":132385438,"body_markdown":"How exactly does the array list &quot;become empty?&quot;  What steps do you perform on the GUI to reproduce the error?","body":"How exactly does the array list &quot;become empty?&quot;  What steps do you perform on the GUI to reproduce the error?"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1672924955,"post_id":75018940,"comment_id":132385524,"body_markdown":"Aside from main question please *don&#39;t name your class as `addPanel`* as it looks like *method* since it (1) starts in lower case instead of upper case, (2) is verb (action) instead of noun (name of something, like `MyPanel`, `MyPanel`, etc.). Also since you want help with debugging, please provide code which we could debug. But to debug code we first need to be able to run it. So please provide actual [SSCCE](http://sscce.org) (a.k.a. [MCVE]).","body":"Aside from main question please <i>don&#39;t name your class as <code>addPanel</code></i> as it looks like <i>method</i> since it (1) starts in lower case instead of upper case, (2) is verb (action) instead of noun (name of something, like <code>MyPanel</code>, <code>MyPanel</code>, etc.). Also since you want help with debugging, please provide code which we could debug. But to debug code we first need to be able to run it. So please provide actual <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE</a> (a.k.a. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)."},{"owner":{"account_id":11833808,"reputation":1152,"user_id":8659747,"display_name":"Kitswas"},"score":0,"creation_date":1672925015,"post_id":75018940,"comment_id":132385552,"body_markdown":"Please provide the definitions of your `Gebruikers` and `Gebruiker` classes.","body":"Please provide the definitions of your <code>Gebruikers</code> and <code>Gebruiker</code> classes."}],"answers":[{"tags":[],"owner":{"account_id":16388221,"reputation":48,"user_id":11837666,"display_name":"Daffy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672925074,"creation_date":1672925074,"answer_id":75019124,"question_id":75018940,"body_markdown":"Have you tried to make &quot;Gebruikers list&quot; static and access it using the class name in the listener?","title":"Arraylist turns empty when having contact with listener","body":"<p>Have you tried to make &quot;Gebruikers list&quot; static and access it using the class name in the listener?</p>\n"}],"owner":{"account_id":25837455,"reputation":3,"user_id":19573631,"display_name":"Juanita Pardo Isidoro Rasgado"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75019124,"answer_count":1,"score":0,"last_activity_date":1672925074,"creation_date":1672924259,"question_id":75018940,"body_markdown":"Hello I am writing a program for school and I am stuck on this problem where I try to get an arraylist from another class using a button, but when the arraylist comes in contact with the listener it becomes empty. If i try to use the arraylist in another function instead of the listener itself it is still empty.\r\n\r\n```\r\nimport javax.swing.*;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.awt.event.KeyAdapter;\r\nimport java.awt.event.KeyEvent;\r\nimport java.util.ArrayList;\r\n\r\npublic class addPanel {\r\n    private JPanel panel1;\r\n    private JTextField textField1;\r\n    private JButton OKButton;\r\n    private JButton registreerButton;\r\n    private JTextField textField2;\r\n    private String voorNaam;\r\n    private String achterNaam;\r\n\r\n    public addPanel() {\r\n\r\n        textField1.addKeyListener(new KeyAdapter() {\r\n            @Override\r\n            public void keyReleased(KeyEvent e) {\r\n                super.keyReleased(e);\r\n                voorNaam = textField1.getText().toLowerCase();\r\n            }\r\n        });\r\n        textField2.addKeyListener(new KeyAdapter() {\r\n            @Override\r\n            public void keyReleased(KeyEvent e) {\r\n                super.keyReleased(e);\r\n                achterNaam = textField2.getText().toLowerCase();\r\n            }\r\n        });\r\n        OKButton.addActionListener(new ActionListener() {\r\n            @Override\r\n            public void actionPerformed(ActionEvent e) {\r\n\r\n                System.out.println(gebruikas); // is empty\r\n                returnInputGebruiker();\r\n            }\r\n        });\r\n    }\r\n    Gebruikers g = new Gebruikers();\r\n    ArrayList&lt;Gebruiker&gt; gebruikas = g.getGebruikers();\r\n    \r\n    public void worksFine() {\r\n        System.out.println(gebruikas);//works fine on its own\r\n    }\r\n\r\n    public void returnInputGebruiker(){\r\n\r\n        System.out.println(gebruikas);// is empty\r\n    }\r\n\r\n    public void run(JFrame parent) {\r\n        JFrame frame = new JFrame();\r\n        frame.setContentPane(panel1);\r\n        frame.setTitle(&quot;persoon details&quot;);\r\n        frame.pack();\r\n        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\r\n        if (parent != null)\r\n            frame.setLocationRelativeTo(parent);\r\n        frame.setVisible(true);\r\n    }\r\n}\r\n\r\n```\r\n\r\nI tried putting the getter in different places but nothing seems to work.","title":"Arraylist turns empty when having contact with listener","body":"<p>Hello I am writing a program for school and I am stuck on this problem where I try to get an arraylist from another class using a button, but when the arraylist comes in contact with the listener it becomes empty. If i try to use the arraylist in another function instead of the listener itself it is still empty.</p>\n<pre><code>import javax.swing.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.event.KeyAdapter;\nimport java.awt.event.KeyEvent;\nimport java.util.ArrayList;\n\npublic class addPanel {\n    private JPanel panel1;\n    private JTextField textField1;\n    private JButton OKButton;\n    private JButton registreerButton;\n    private JTextField textField2;\n    private String voorNaam;\n    private String achterNaam;\n\n    public addPanel() {\n\n        textField1.addKeyListener(new KeyAdapter() {\n            @Override\n            public void keyReleased(KeyEvent e) {\n                super.keyReleased(e);\n                voorNaam = textField1.getText().toLowerCase();\n            }\n        });\n        textField2.addKeyListener(new KeyAdapter() {\n            @Override\n            public void keyReleased(KeyEvent e) {\n                super.keyReleased(e);\n                achterNaam = textField2.getText().toLowerCase();\n            }\n        });\n        OKButton.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n\n                System.out.println(gebruikas); // is empty\n                returnInputGebruiker();\n            }\n        });\n    }\n    Gebruikers g = new Gebruikers();\n    ArrayList&lt;Gebruiker&gt; gebruikas = g.getGebruikers();\n    \n    public void worksFine() {\n        System.out.println(gebruikas);//works fine on its own\n    }\n\n    public void returnInputGebruiker(){\n\n        System.out.println(gebruikas);// is empty\n    }\n\n    public void run(JFrame parent) {\n        JFrame frame = new JFrame();\n        frame.setContentPane(panel1);\n        frame.setTitle(&quot;persoon details&quot;);\n        frame.pack();\n        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n        if (parent != null)\n            frame.setLocationRelativeTo(parent);\n        frame.setVisible(true);\n    }\n}\n\n</code></pre>\n<p>I tried putting the getter in different places but nothing seems to work.</p>\n"},{"tags":["java","algorithm","security","sha"],"comments":[{"owner":{"account_id":199923,"reputation":106976,"user_id":445517,"accept_rate":43,"display_name":"CodesInChaos"},"score":0,"creation_date":1307356396,"post_id":6250662,"comment_id":7289048,"body_markdown":"What do you need the hash for? Which hashfunction and output size is required depends a lot on what you want to do with it.","body":"What do you need the hash for? Which hashfunction and output size is required depends a lot on what you want to do with it."}],"answers":[{"tags":[],"owner":{"account_id":312656,"reputation":37469,"user_id":626853,"display_name":"Aasmund Eldhuset"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1307356068,"creation_date":1307356068,"answer_id":6250687,"question_id":6250662,"body_markdown":"No; a SHA-1 hash has a size of 160 bits by definition. I strongly doubt that the size of the hash will be a problem; I suppose that you have other data in your database as well? Most likely, you will find that other parts of the data contribute even more to the database size. And how many rows to you expect to have with these hashes?\r\n\r\nHowever, there _is_ a size difference between storing the hash as a string (this will take at least 40 bytes, depending on the string encoding) and storing it as binary data (this will take 20 bytes).\r\n\r\nYou _can_ switch to another algorithm, as others have noted, but that might not be a good choice from a security perspective - the shorter the output length of a hash algorithm is, the weaker it is.","title":"How to decrease the size of SHA1?","body":"<p>No; a SHA-1 hash has a size of 160 bits by definition. I strongly doubt that the size of the hash will be a problem; I suppose that you have other data in your database as well? Most likely, you will find that other parts of the data contribute even more to the database size. And how many rows to you expect to have with these hashes?</p>\n\n<p>However, there <em>is</em> a size difference between storing the hash as a string (this will take at least 40 bytes, depending on the string encoding) and storing it as binary data (this will take 20 bytes).</p>\n\n<p>You <em>can</em> switch to another algorithm, as others have noted, but that might not be a good choice from a security perspective - the shorter the output length of a hash algorithm is, the weaker it is.</p>\n"},{"tags":[],"owner":{"account_id":28583,"reputation":20628,"user_id":76465,"accept_rate":93,"display_name":"Chathuranga Chandrasekara"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1307356094,"creation_date":1307356094,"answer_id":6250695,"question_id":6250662,"body_markdown":"If you reduce it it is no more SHA1 :). You have to think of a different algorithm","title":"How to decrease the size of SHA1?","body":"<p>If you reduce it it is no more SHA1 :). You have to think of a different algorithm</p>\n"},{"tags":[],"owner":{"account_id":199923,"reputation":106976,"user_id":445517,"accept_rate":43,"display_name":"CodesInChaos"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1307371310,"creation_date":1307356234,"answer_id":6250722,"question_id":6250662,"body_markdown":"Is 20 bytes per hash(assuming binary storage) really too much? If you currently use hex encoding switching to binary saves you 20 bytes per hash. Base64 saves about 10 bytes compared to hex.\r\n\r\nIf you simply truncate a cryptographic hash it is still a good cryptographic hash, but with a reduced output size. What output size you need depends on your application.\r\n\r\nIntegrity checks against random changes can use a much shorter hash of 32-64 bits and don&#39;t need a cryptographic hash functions.\r\n\r\nIf you need uniqueness you should have `&gt;&gt;2*log_2(entries)` bits in your hash (See [birthday paradox][1]). At around 120 bits it&#39;s similar to a GUID/UUID (There is a sha1 based generation mode for GUIDs)\r\n\r\nIf you want cryptographic strength I&#39;d avoid going below 128bits.\r\n\r\n\r\n  [1]: http://betterexplained.com/articles/understanding-the-birthday-paradox/","title":"How to decrease the size of SHA1?","body":"<p>Is 20 bytes per hash(assuming binary storage) really too much? If you currently use hex encoding switching to binary saves you 20 bytes per hash. Base64 saves about 10 bytes compared to hex.</p>\n\n<p>If you simply truncate a cryptographic hash it is still a good cryptographic hash, but with a reduced output size. What output size you need depends on your application.</p>\n\n<p>Integrity checks against random changes can use a much shorter hash of 32-64 bits and don't need a cryptographic hash functions.</p>\n\n<p>If you need uniqueness you should have <code>&gt;&gt;2*log_2(entries)</code> bits in your hash (See <a href=\"http://betterexplained.com/articles/understanding-the-birthday-paradox/\">birthday paradox</a>). At around 120 bits it's similar to a GUID/UUID (There is a sha1 based generation mode for GUIDs)</p>\n\n<p>If you want cryptographic strength I'd avoid going below 128bits.</p>\n"},{"tags":[],"owner":{"account_id":2638775,"reputation":3596,"user_id":2282880,"accept_rate":86,"display_name":"Meloman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672924628,"creation_date":1672922990,"answer_id":75018666,"question_id":6250662,"body_markdown":"To store SHA1 hash in MySQL database, we need a `CHAR(40)`. \r\n\r\nSIZE REDUCTION\r\n--------------\r\n\r\nBut, we can **reduce size by 27%** by choosing BASE64 encoding. The column type will be `CHAR(29)`.\r\n\r\nExample :\r\n\r\nSHA1 -&gt; digest Hex -&gt; 40 chars : \r\n`5d41402abc4b2a76b9719d911017c575`\r\n\r\nSHA1 -&gt; digest base64 -&gt; 29 chars :\r\n`XUFAKrxLKna5cZ2REBfFdQ==`\r\n\r\n\r\nPERFORMANCE INCREASE\r\n--------------------\r\n\r\nTo guarantee **more performance** when reading (especially with PRIMARY, INDEX, UNIQUE, ... or using a JOIN) a BINARY(20) is more appropriate. \r\n\r\nIt&#39;s necessary to have a hash in Hex form (a-z/0-9) and apply the UNHEX() function of MySQL during the insertion.\r\n\r\n    INSERT INTO my_table (\r\n        id, \r\n        my_hash\r\n    ) VALUES (\r\n        1, \r\n        UNHEX(&#39;5d41402abc4b2a76b9719d911017c575&#39;)\r\n    );\r\n\r\nIt could also be written with short `X&#39;...&#39;` syntax like this :\r\n\r\n    INSERT INTO my_table (\r\n        id, \r\n        my_hash\r\n    ) VALUES (\r\n        1, \r\n        X&#39;5d41402abc4b2a76b9719d911017c575&#39;\r\n    );\r\n\r\n \r\n\r\n","title":"How to decrease the size of SHA1?","body":"<p>To store SHA1 hash in MySQL database, we need a <code>CHAR(40)</code>.</p>\n<h2>SIZE REDUCTION</h2>\n<p>But, we can <strong>reduce size by 27%</strong> by choosing BASE64 encoding. The column type will be <code>CHAR(29)</code>.</p>\n<p>Example :</p>\n<p>SHA1 -&gt; digest Hex -&gt; 40 chars :\n<code>5d41402abc4b2a76b9719d911017c575</code></p>\n<p>SHA1 -&gt; digest base64 -&gt; 29 chars :\n<code>XUFAKrxLKna5cZ2REBfFdQ==</code></p>\n<h2>PERFORMANCE INCREASE</h2>\n<p>To guarantee <strong>more performance</strong> when reading (especially with PRIMARY, INDEX, UNIQUE, ... or using a JOIN) a BINARY(20) is more appropriate.</p>\n<p>It's necessary to have a hash in Hex form (a-z/0-9) and apply the UNHEX() function of MySQL during the insertion.</p>\n<pre><code>INSERT INTO my_table (\n    id, \n    my_hash\n) VALUES (\n    1, \n    UNHEX('5d41402abc4b2a76b9719d911017c575')\n);\n</code></pre>\n<p>It could also be written with short <code>X'...'</code> syntax like this :</p>\n<pre><code>INSERT INTO my_table (\n    id, \n    my_hash\n) VALUES (\n    1, \n    X'5d41402abc4b2a76b9719d911017c575'\n);\n</code></pre>\n"}],"owner":{"account_id":281776,"reputation":705,"user_id":578272,"accept_rate":86,"display_name":"fahmi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2924,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":6250722,"answer_count":4,"score":7,"last_activity_date":1672924628,"creation_date":1307355956,"question_id":6250662,"body_markdown":"I have a problem, maybe a silly question, I want to store data in a database after I hash with the SHA1 algorithm. However, at a future time, the size in database will increase because size words in SHA1 is big.\r\n\r\nCan we decrease the size of SHA1 algorithm, maybe half the size. I&#39;m sorry for my silly question, and for my bad English. Thanks. :D\r\n\r\nI am using JAVA.","title":"How to decrease the size of SHA1?","body":"<p>I have a problem, maybe a silly question, I want to store data in a database after I hash with the SHA1 algorithm. However, at a future time, the size in database will increase because size words in SHA1 is big.</p>\n\n<p>Can we decrease the size of SHA1 algorithm, maybe half the size. I'm sorry for my silly question, and for my bad English. Thanks. :D</p>\n\n<p>I am using JAVA.</p>\n"},{"tags":["java","firebase","android-studio","google-cloud-firestore"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1672906134,"post_id":75011815,"comment_id":132379478,"body_markdown":"Do you need a database schema or the structure of a class? If it&#39;s the latter one, then please edit your question and add your database structure as a screenshot.","body":"Do you need a database schema or the structure of a class? If it&#39;s the latter one, then please edit your question and add your database structure as a screenshot."}],"answers":[{"tags":[],"owner":{"account_id":14283739,"reputation":366,"user_id":10317633,"display_name":"GabrielNexT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672870676,"creation_date":1672870676,"answer_id":75011936,"question_id":75011815,"body_markdown":"I recommend that you model it as follows:\r\n\r\n```java\r\nprivate String name;\r\nprivate String email;\r\n// If the number of games grows too much, new modeling will be necessary.\r\nprivate List&lt;GameScore&gt; game1Scores;\r\nprivate List&lt;GameScore&gt; game2Scores;\r\nprivate List&lt;GameScore&gt; game3Scores;\r\nprivate int game1HighScore;\r\nprivate int game2HighScore;\r\nprivate int game3HighScore;\r\n```\r\n\r\nGameScore will be a class with the field GameName or GameId, score and maybe createdAt to set the time of the game.\r\n\r\nAfterwards, I recommend that you save all matches in a collection. Maybe this way:\r\n\r\n**Collection:** matchs   \r\nIn this collection you will save the GameScore and player id for each match.\r\n\r\nWhenever a document is inserted into the match collection, you will trigger a [cloud function][1] to update the player rank and global rank.\r\n\r\nThe global rank you can update every few minutes to avoid a lot of writing in the same document.\r\n\r\nRemember to query correctly to avoid a large number of reads.\r\n\r\n\r\n  [1]: https://firebase.google.com/docs/functions/firestore-events#writing-triggered_functions","title":"firestore data structure","body":"<p>I recommend that you model it as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private String name;\nprivate String email;\n// If the number of games grows too much, new modeling will be necessary.\nprivate List&lt;GameScore&gt; game1Scores;\nprivate List&lt;GameScore&gt; game2Scores;\nprivate List&lt;GameScore&gt; game3Scores;\nprivate int game1HighScore;\nprivate int game2HighScore;\nprivate int game3HighScore;\n</code></pre>\n<p>GameScore will be a class with the field GameName or GameId, score and maybe createdAt to set the time of the game.</p>\n<p>Afterwards, I recommend that you save all matches in a collection. Maybe this way:</p>\n<p><strong>Collection:</strong> matchs<br />\nIn this collection you will save the GameScore and player id for each match.</p>\n<p>Whenever a document is inserted into the match collection, you will trigger a <a href=\"https://firebase.google.com/docs/functions/firestore-events#writing-triggered_functions\" rel=\"nofollow noreferrer\">cloud function</a> to update the player rank and global rank.</p>\n<p>The global rank you can update every few minutes to avoid a lot of writing in the same document.</p>\n<p>Remember to query correctly to avoid a large number of reads.</p>\n"},{"tags":[],"owner":{"account_id":14052833,"reputation":1260,"user_id":10151066,"display_name":"flutroid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672924361,"creation_date":1672913826,"answer_id":75016882,"question_id":75011815,"body_markdown":"&gt; 1. what is the best way to override the oldest score with new score ?\r\n\r\nIn current data struture in your screenshot, You can just caompare exits score in client see if need to update scores.\r\n\r\n&gt; 2. i wanna be able to show in app a list of HighScores, high to low from all users. how do I do it ?\r\n&gt; 3. should i do a &quot;scores&quot; collection. how do i connect score to user?\r\n\r\nYou can put score and user id in a same document, Then put all documents in same collection &#39;scores&#39; like you said. If specific user need to get self top three scores just run query on these two fields. You can also using collection group to achive this it depend on your case.","title":"firestore data structure","body":"<blockquote>\n<ol>\n<li>what is the best way to override the oldest score with new score ?</li>\n</ol>\n</blockquote>\n<p>In current data struture in your screenshot, You can just caompare exits score in client see if need to update scores.</p>\n<blockquote>\n<ol start=\"2\">\n<li>i wanna be able to show in app a list of HighScores, high to low from all users. how do I do it ?</li>\n<li>should i do a &quot;scores&quot; collection. how do i connect score to user?</li>\n</ol>\n</blockquote>\n<p>You can put score and user id in a same document, Then put all documents in same collection 'scores' like you said. If specific user need to get self top three scores just run query on these two fields. You can also using collection group to achive this it depend on your case.</p>\n"}],"owner":{"account_id":18047215,"reputation":17,"user_id":13117876,"display_name":"Ohad"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75011936,"answer_count":2,"score":0,"last_activity_date":1672924361,"creation_date":1672869657,"question_id":75011815,"body_markdown":"im building an app with android studio-java, firestore and firebase auth.\r\nI need help on how to save the data.\r\n\r\nThe app has 3 games, the goal is to save users. score+date (DD/MM/YY for each score), and high score for each game. i need to save last 5 scores for each game. \r\nMy first attempt is to do it with 1 collection called &quot;users&quot;.\r\n\r\nuser class:\r\n\r\n    private String name;\r\n    private String email;\r\n    private HashMap&lt;Integer, Date&gt; game1_Scores;\r\n    private HashMap&lt;Integer, Date&gt; game2_Scores;\r\n    private HashMap&lt;Integer, Date&gt; game3_Scores;\r\n    private int game1_HighScore;\r\n    private int game2_HighScore;\r\n    private int game3_HighScore;\r\n\r\nmy question:\r\n1. what is the best way to override the oldest score with new score ?\r\n2. i wanna be able to show in app a list of HighScores, high to low from all users. how do I do it ?\r\n3. should i do a &quot;scores&quot; collection. how do i connect score to user?\r\n\r\nAny help will be appreciated.\r\n\r\nEDIT: my db screenshot\r\n[![enter image description here][1]][1] \r\n\r\np.s. How to control the order of the fields when adding a new User document.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gTckf.png","title":"firestore data structure","body":"<p>im building an app with android studio-java, firestore and firebase auth.\nI need help on how to save the data.</p>\n<p>The app has 3 games, the goal is to save users. score+date (DD/MM/YY for each score), and high score for each game. i need to save last 5 scores for each game.\nMy first attempt is to do it with 1 collection called &quot;users&quot;.</p>\n<p>user class:</p>\n<pre><code>private String name;\nprivate String email;\nprivate HashMap&lt;Integer, Date&gt; game1_Scores;\nprivate HashMap&lt;Integer, Date&gt; game2_Scores;\nprivate HashMap&lt;Integer, Date&gt; game3_Scores;\nprivate int game1_HighScore;\nprivate int game2_HighScore;\nprivate int game3_HighScore;\n</code></pre>\n<p>my question:</p>\n<ol>\n<li>what is the best way to override the oldest score with new score ?</li>\n<li>i wanna be able to show in app a list of HighScores, high to low from all users. how do I do it ?</li>\n<li>should i do a &quot;scores&quot; collection. how do i connect score to user?</li>\n</ol>\n<p>Any help will be appreciated.</p>\n<p>EDIT: my db screenshot\n<a href=\"https://i.stack.imgur.com/gTckf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gTckf.png\" alt=\"enter image description here\" /></a></p>\n<p>p.s. How to control the order of the fields when adding a new User document.</p>\n"},{"tags":["java","mapstruct"],"comments":[{"owner":{"account_id":2563377,"reputation":7174,"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"score":0,"creation_date":1563372857,"post_id":57077333,"comment_id":100679113,"body_markdown":"Little offtopic from me: you can set default componentModel to &quot;spring&quot; for all of your mappers, hence no need to explicitly set it in `@Mapper` annotation. Refer to http://mapstruct.org/documentation/stable/reference/html/#configuration-options","body":"Little offtopic from me: you can set default componentModel to &quot;spring&quot; for all of your mappers, hence no need to explicitly set it in <code>@Mapper</code> annotation. Refer to <a href=\"http://mapstruct.org/documentation/stable/reference/html/#configuration-options\" rel=\"nofollow noreferrer\">mapstruct.org/documentation/stable/reference/html/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":11271392,"reputation":1064,"user_id":8266738,"display_name":"Michael"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1563372322,"creation_date":1563371581,"answer_id":57077551,"question_id":57077333,"body_markdown":"You need to set the `NullValuePropertyMappingStrategy` (as part of the `Mapper` annotation) for defining how null properties are to be mapped.\r\n\r\nSee [NullValuePropertyMappingStrategy.html#SET_TO_DEFAULT][1]\r\n\r\nThe default value for `String` is `&quot;&quot;`. You don&#39;t need to define it explicitly.\r\n\r\nSo, your mapper can simply look like this:\r\n```\r\n@Mapper(\r\n    componentModel = &quot;spring&quot;, \r\n    nullValueMappingStrategy = NullValueMappingStrategy.RETURN_DEFAULT, \r\n    nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.SET_TO_DEFAULT\r\n)\r\npublic interface MyMapper {\r\n\r\n    public Target mapFrom(Source source);\r\n\r\n}\r\n```\r\n\r\n  [1]: http://mapstruct.org/documentation/stable/api/org/mapstruct/NullValuePropertyMappingStrategy.html#SET_TO_DEFAULT","title":"Mapstruct: How to default a target String to Empty String when the Source is Null (Both fields have the same name and type) Java / Spring","body":"<p>You need to set the <code>NullValuePropertyMappingStrategy</code> (as part of the <code>Mapper</code> annotation) for defining how null properties are to be mapped.</p>\n\n<p>See <a href=\"http://mapstruct.org/documentation/stable/api/org/mapstruct/NullValuePropertyMappingStrategy.html#SET_TO_DEFAULT\" rel=\"noreferrer\">NullValuePropertyMappingStrategy.html#SET_TO_DEFAULT</a></p>\n\n<p>The default value for <code>String</code> is <code>\"\"</code>. You don't need to define it explicitly.</p>\n\n<p>So, your mapper can simply look like this:</p>\n\n<pre><code>@Mapper(\n    componentModel = \"spring\", \n    nullValueMappingStrategy = NullValueMappingStrategy.RETURN_DEFAULT, \n    nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.SET_TO_DEFAULT\n)\npublic interface MyMapper {\n\n    public Target mapFrom(Source source);\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25827639,"reputation":1,"user_id":19565417,"display_name":"Mieker"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672924105,"creation_date":1672924105,"answer_id":75018910,"question_id":57077333,"body_markdown":"When your Source object has the **same** fields as Target object and when you want to manage all Source **null** values (e.g. for String) to became an **empty String** (&quot;&quot;) in the Target object, you could create mapper interface from [MapStruct](https://mapstruct.org/) library as below:\r\n### Step 1: ###\r\n```java\r\n@Mapper(componentModel = &quot;spring&quot;)\r\npublic interface SourceToTargetMapper {\r\n\r\n  Target map(Source source);\r\n\r\n  @BeanMapping(nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.SET_TO_DEFAULT)\r\n  void update(Source source, @MappingTarget Target target);\r\n}\r\n```\r\nThe whole trick is to define ```nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.SET_TO_DEFAULT``` but you cannot define it in @Mapper annotation. Instead of that you had to place it as parameter in @BeanMapping annotation for ```update()``` method.\r\nYou can read more about this in [MapStruct documentation](https://mapstruct.org/documentation/stable/reference/html/#mapping-result-for-null-properties).\r\n\r\n### Step 2: ###\r\nTherefore you had to do one more operation in your code and use just implemented &#39;update()&#39; method:\r\n```java\r\n@Component\r\npublic class ClassThatUsingMapper {\r\n\r\n  private final SourceToTargetMapper mapper;\r\n\r\n  public Target someMethodToMapObjects(Source source) {\r\n    Target target = mapper.map(source);\r\n\tmapper.update(source, target)\r\n\r\n    return target;\r\n  }\r\n}\r\n\r\n```\r\nAll *null to empty String process* takes place under ```mapper.update(source, target)``` method. After run ```mvn clean install``` for your project, you can check how it looks and how it works in ```target/generated-sources/annotations/...../SourceToTargetMapperImpl.java``` file.","title":"Mapstruct: How to default a target String to Empty String when the Source is Null (Both fields have the same name and type) Java / Spring","body":"<p>When your Source object has the <strong>same</strong> fields as Target object and when you want to manage all Source <strong>null</strong> values (e.g. for String) to became an <strong>empty String</strong> (&quot;&quot;) in the Target object, you could create mapper interface from <a href=\"https://mapstruct.org/\" rel=\"nofollow noreferrer\">MapStruct</a> library as below:</p>\n<h3>Step 1:</h3>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper(componentModel = &quot;spring&quot;)\npublic interface SourceToTargetMapper {\n\n  Target map(Source source);\n\n  @BeanMapping(nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.SET_TO_DEFAULT)\n  void update(Source source, @MappingTarget Target target);\n}\n</code></pre>\n<p>The whole trick is to define <code>nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.SET_TO_DEFAULT</code> but you cannot define it in @Mapper annotation. Instead of that you had to place it as parameter in @BeanMapping annotation for <code>update()</code> method.\nYou can read more about this in <a href=\"https://mapstruct.org/documentation/stable/reference/html/#mapping-result-for-null-properties\" rel=\"nofollow noreferrer\">MapStruct documentation</a>.</p>\n<h3>Step 2:</h3>\n<p>Therefore you had to do one more operation in your code and use just implemented 'update()' method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class ClassThatUsingMapper {\n\n  private final SourceToTargetMapper mapper;\n\n  public Target someMethodToMapObjects(Source source) {\n    Target target = mapper.map(source);\n    mapper.update(source, target)\n\n    return target;\n  }\n}\n\n</code></pre>\n<p>All <em>null to empty String process</em> takes place under <code>mapper.update(source, target)</code> method. After run <code>mvn clean install</code> for your project, you can check how it looks and how it works in <code>target/generated-sources/annotations/...../SourceToTargetMapperImpl.java</code> file.</p>\n"}],"owner":{"account_id":3308675,"reputation":217,"user_id":2782660,"accept_rate":70,"display_name":"MarcA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21861,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":57077551,"answer_count":2,"score":3,"last_activity_date":1672924105,"creation_date":1563370924,"question_id":57077333,"body_markdown":"I have two Objects Source and Target both with the same field names and types.\r\n\r\nIf a source field is null I would like the target to be &quot;&quot; (Empty String)\r\n\r\nMy Interface mapping looks like this (This is just two field, I have many)\r\n\r\n\r\n`````\r\n@Mapper(componentModel = &quot;spring&quot;, nullValueMappingStrategy = NullValueMappingStrategy.RETURN_DEFAULT)\r\npublic interface MyMapper {\r\n\r\n@Mappings({\r\n    @Mapping(target=&quot;medium&quot;, defaultExpression=&quot;java(\\&quot;\\&quot;)&quot;),\r\n    @Mapping(target=&quot;origin&quot;, defaultExpression=&quot;java(\\&quot;\\&quot;)&quot;)\r\n }) \r\npublic Target mapFrom(Source source)\r\n\r\n`````\r\n\r\nIf the Source has a value it should be copied across, if it is null in the source it should be &quot;&quot; in the target.\r\n\r\nMapstruct-1.3.0 seems to just keep everything null.\r\n\r\nAny Idea? I would like default to be empty String for everything","title":"Mapstruct: How to default a target String to Empty String when the Source is Null (Both fields have the same name and type) Java / Spring","body":"<p>I have two Objects Source and Target both with the same field names and types.</p>\n\n<p>If a source field is null I would like the target to be \"\" (Empty String)</p>\n\n<p>My Interface mapping looks like this (This is just two field, I have many)</p>\n\n<pre><code>@Mapper(componentModel = \"spring\", nullValueMappingStrategy = NullValueMappingStrategy.RETURN_DEFAULT)\npublic interface MyMapper {\n\n@Mappings({\n    @Mapping(target=\"medium\", defaultExpression=\"java(\\\"\\\")\"),\n    @Mapping(target=\"origin\", defaultExpression=\"java(\\\"\\\")\")\n }) \npublic Target mapFrom(Source source)\n\n</code></pre>\n\n<p>If the Source has a value it should be copied across, if it is null in the source it should be \"\" in the target.</p>\n\n<p>Mapstruct-1.3.0 seems to just keep everything null.</p>\n\n<p>Any Idea? I would like default to be empty String for everything</p>\n"},{"tags":["java","android","kotlin","google-api","google-drive-api"],"answers":[{"tags":[],"owner":{"account_id":2066403,"reputation":109410,"user_id":1841839,"accept_rate":71,"display_name":"Linda Lawton - DaImTo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672923945,"creation_date":1672923945,"answer_id":75018875,"question_id":75018507,"body_markdown":"Im not exactly sure I understand what your issue is,  so let me try to explain the documentation page for [Store application-specific data](https://developers.google.com/drive/api/guides/appdata) that appears to be unclear to you.\r\n\r\nUploading to the app data folder is done exactly the same as uploading to any other folder.  With three differences.\r\n\r\nFirst off when you authorize your user you will need to use the scope of `DriveScopes.DRIVE_APPDATA`, This scope gives you access `See, create, and delete its own configuration data in your Google Drive`.  Which will mean that you can only edit data that your application created.\r\n\r\nSecond.  When you upload the file. The file type must be .json.  Configuration files are .json thats it.\r\n\r\nFinally when you upload the file you set the parent directory to `appDataFolder`.\r\n\r\n     var fileMetadata = new Google.Apis.Drive.v3.Data.File()\r\n                {\r\n                    Name = &quot;config.json&quot;,\r\n                    Parents = new List&lt;string&gt;()\r\n                    {\r\n                        &quot;appDataFolder&quot;\r\n                    }\r\n                };\r\n\r\n\r\nThat&#39;s it, that is the only difference with google drive api and uploading to appDataFolder.  Any google drive api upload example can be used.  ","title":"How to Store application-specific data of the android kotlin app in user&#39;s google drive?","body":"<p>Im not exactly sure I understand what your issue is,  so let me try to explain the documentation page for <a href=\"https://developers.google.com/drive/api/guides/appdata\" rel=\"nofollow noreferrer\">Store application-specific data</a> that appears to be unclear to you.</p>\n<p>Uploading to the app data folder is done exactly the same as uploading to any other folder.  With three differences.</p>\n<p>First off when you authorize your user you will need to use the scope of <code>DriveScopes.DRIVE_APPDATA</code>, This scope gives you access <code>See, create, and delete its own configuration data in your Google Drive</code>.  Which will mean that you can only edit data that your application created.</p>\n<p>Second.  When you upload the file. The file type must be .json.  Configuration files are .json thats it.</p>\n<p>Finally when you upload the file you set the parent directory to <code>appDataFolder</code>.</p>\n<pre><code> var fileMetadata = new Google.Apis.Drive.v3.Data.File()\n            {\n                Name = &quot;config.json&quot;,\n                Parents = new List&lt;string&gt;()\n                {\n                    &quot;appDataFolder&quot;\n                }\n            };\n</code></pre>\n<p>That's it, that is the only difference with google drive api and uploading to appDataFolder.  Any google drive api upload example can be used.</p>\n"}],"owner":{"account_id":14629980,"reputation":772,"user_id":14599955,"display_name":"Tehleel Mir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":442,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672923986,"creation_date":1672922302,"question_id":75018507,"body_markdown":"I want to use the user&#39;s google drive as a database to store the app-specific data in his drive. To use it as a backup drive. \r\n\r\nNow there is [this][1] documentation which is suppose to help how to implement it as the google says we can achieve this using google drive apis. \r\n\r\nBut there is not a single article that can help me to integrate it completely from a to z. \r\n\r\nSome post i found but they are not again specific to the this use case i.e. &quot;Store application-specific data&quot;. Also they are outdated\r\n\r\n- [Can someone provide an up-to-date Android guide for Google Drive REST API v3?](https://stackoverflow.com/q/56949872/1841839)\r\n\r\n- [Integrate Google Drive REST API on Android App](https://ammar.lanui.online/integrate-google-drive-rest-api-on-android-app-bc4ddbd90820)\r\n\r\n\r\n\r\n\r\n  [1]: https://developers.google.com/drive/api/guides/appdata#:~:text=The%20application%20data%20folder%20is,shouldn&#39;t%20directly%20interact%20with.","title":"How to Store application-specific data of the android kotlin app in user&#39;s google drive?","body":"<p>I want to use the user's google drive as a database to store the app-specific data in his drive. To use it as a backup drive.</p>\n<p>Now there is <a href=\"https://developers.google.com/drive/api/guides/appdata#:%7E:text=The%20application%20data%20folder%20is,shouldn%27t%20directly%20interact%20with.\" rel=\"nofollow noreferrer\">this</a> documentation which is suppose to help how to implement it as the google says we can achieve this using google drive apis.</p>\n<p>But there is not a single article that can help me to integrate it completely from a to z.</p>\n<p>Some post i found but they are not again specific to the this use case i.e. &quot;Store application-specific data&quot;. Also they are outdated</p>\n<ul>\n<li><p><a href=\"https://stackoverflow.com/q/56949872/1841839\">Can someone provide an up-to-date Android guide for Google Drive REST API v3?</a></p>\n</li>\n<li><p><a href=\"https://ammar.lanui.online/integrate-google-drive-rest-api-on-android-app-bc4ddbd90820\" rel=\"nofollow noreferrer\">Integrate Google Drive REST API on Android App</a></p>\n</li>\n</ul>\n"},{"tags":["java","hibernate","junit","transactions"],"owner":{"account_id":2243576,"reputation":407,"user_id":1977508,"accept_rate":50,"display_name":"Furious Gamer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672923730,"creation_date":1672923400,"question_id":75018758,"body_markdown":"I understand that flush() per se does not trigger an actual commit, which depends on how transaction management is used. However, i have a case where i really do not understand why it doesn&#39;t happen until the very end of the program, rather than step wise in between as it is programmed. I have a quarkus project with hibernate and i am currently writing an integration test for a class (not a resource) to see why it is not paging database writes. Here is the code simplified as much as possible:\r\n\r\nThe test case (everything important happens in the `jobRunner.runJob()` method):\r\n    \r\n    // Note this does not have an @Transactional annotation, so no overarching transaction is defined\r\n    @Test\r\n    public void testRunJobPagesLocalDbWritesForLargeDataSet() throws Exception {\r\n        int dbPagingSize = 200;\r\n        Job job = getPersistedJob();\r\n        int amountOfSourceTerms = seedTestSourceTermsFromSqlScript();\r\n        int expectedPersistCalls = amountOfSourceTerms / dbPagingSize;\r\n        JobRunDataRepository dataRepositoryWrapperMock = buildJobRunDataRepositoryWrapperMock();\r\n        JobRunner jobRunner = new JobRunner(jobRunRepository, dataRepositoryWrapperMock, termRepositoryProxy);\r\n\r\n        jobRunner.setSettings(buildPagableSettingsFor(dbPagingSize));\r\n        jobRunner.runJob(job, new TestWebScraper());\r\n\r\n        verify(dataRepositoryWrapperMock, times(expectedPersistCalls))\r\n            .persistAllFor(any(JobRun.class), any());\r\n        assertHasWrittenJobRunDataMatchingAmount(job.getId());\r\n    }\r\n\r\nThe reason i am using a &quot;mock&quot; of `JobRunDataRepository` here is so i can wrap the `persistAllFor()` to verify how many times it is internally called - i still call the live persistAllFor() method. This is not an issue specific to the test, as the same problem occurs in the live code. For completion purposes, here is the method creating the wrapped mock around the live call:\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    private JobRunDataRepository buildJobRunDataRepositoryWrapperMock() {\r\n        JobRunDataRepository dataRepositoryWrapperMock = Mockito.mock(JobRunDataRepository.class);\r\n        \r\n        doAnswer(new Answer&lt;Void&gt;() {\r\n            @Override\r\n            public Void answer(InvocationOnMock invocation) throws Throwable {\r\n                Object[] arguments = invocation.getRawArguments();\r\n                JobRun jobRun = (JobRun) arguments[0];\r\n                Map&lt;String, String&gt; termMap = (Map&lt;String, String&gt;) arguments[1];\r\n                // Live call is done here from an injected version of the repo with a live entityManager, so it still actually does the db write.\r\n                jobRunDataRepository.persistAllFor(jobRun, termMap);\r\n                return null;\r\n            }\r\n        }).when(dataRepositoryWrapperMock).persistAllFor(any(JobRun.class), any());\r\n\r\n        return dataRepositoryWrapperMock;\r\n    }\r\n\r\nHere is `runJob()` from `JobRunner`:\r\n    \r\n    // Note once again, no @Transactional defined here either - so NO transaction spanning the entire runJob method\r\n    public void runJob(final Job job, final WebScraper webScraper) {\r\n        try {\r\n            tryToRunJob(job, webScraper);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            updateRunWithFailedStatus();\r\n        }\r\n    }\r\n\r\nHere is a broken down version of `tryToRunJob` in `JobRunner` (runWebScrapingPhase() is the next level):\r\n \r\n    // Note: Still no overarching transaction defined here either\r\n    private void tryToRunJob(Job job, WebScraper webScraper) throws Exception {\r\n        currentOffset = 0;\r\n        createAndPersistJobRunFrom(job); // This method calls a db persist from a repository class, which has a @Transactional annotation and works perfectly fine. Object is stored in DB after call\r\n        initTermRepositoryProxyFor(job);\r\n        runWebScrapingPhase(webScraper); // This is where things seem to not work\r\n        updateRunWithFinishedStatus();\r\n    }\r\n\r\nHere is the `runWebScrapingPhase()` from `JobRunner` with unrelated or unimportant code in between removed:\r\n\r\n    // Note, still no overarching @Transactional defined\r\n    private int runWebScrapingPhase(WebScraper webScraper) throws Exception {\r\n        List&lt;String&gt; sourceTerms = termRepositoryProxy.getSourceTerms(currentOffset);\r\n        if (sourceTerms.isEmpty()) return 0;\r\n        Map&lt;String, String&gt; termMap = findTargetTermsFor(sourceTerms, webScraper);\r\n        // If i print current offset here, current data set to be written to the DB and amount of entries everything is correct\r\n\r\n        // This method has an @Transactional annotation, but does not write to the DB immediately\r\n        dataRepository.persistAllFor(jobRun, termMap);\r\n\r\n        // When i print the COUNT of the table in the DB here for debugging purposes, it shows 0 entries (meaning it did not write the data after `persistAllFor()` completed\r\n        \r\n        return termMap.size();\r\n    }\r\n\r\nNow, we come to the problem child: here is the `persistAllFor()` method of `JobRunDataRepository` class (which has an entityManager injected like all other repository classes where it works):\r\n\r\n    @Transactional\r\n    public void persistAllFor(JobRun jobRun, Map&lt;String, String&gt; termMap) {\r\n        termMap.forEach((sourceTerm, targetTerm) -&gt; {\r\n            JobRunData jobRunData = new JobRunData();\r\n            jobRunData.setJobRun(jobRun);\r\n            jobRunData.setSourceTerm(sourceTerm);\r\n            jobRunData.setTargetTerm(targetTerm);\r\n            entityManager.persist(jobRunData);\r\n        });\r\n        \r\n        entityManager.flush(); // I am calling `flush()` here\r\n    }\r\n\r\nI loop over the data for persist calls, and since this is the only transaction scope of the current method, it should commit/execute within/after the scope of this method - right? All the data persisted here. But as stated in the prior code block, the COUNT of the table remains zero. At the end of the program it tends to commit somehow as the data appears then in the database. Meaning, if an error or exception occurs in between - no data is written at all despite using paging. Its either all of the data of none at all. Why does the `flush()`/`@Transactional` not work here for the `persistAllFor()` method? I would understand it if another `@Transactional` was wrapped around the code on a higher level, but as you can see there isn&#39;t.","title":"Why does entityManager.flush() not write to the database here despite local transaction scope ending?","body":"<p>I understand that flush() per se does not trigger an actual commit, which depends on how transaction management is used. However, i have a case where i really do not understand why it doesn't happen until the very end of the program, rather than step wise in between as it is programmed. I have a quarkus project with hibernate and i am currently writing an integration test for a class (not a resource) to see why it is not paging database writes. Here is the code simplified as much as possible:</p>\n<p>The test case (everything important happens in the <code>jobRunner.runJob()</code> method):</p>\n<pre><code>// Note this does not have an @Transactional annotation, so no overarching transaction is defined\n@Test\npublic void testRunJobPagesLocalDbWritesForLargeDataSet() throws Exception {\n    int dbPagingSize = 200;\n    Job job = getPersistedJob();\n    int amountOfSourceTerms = seedTestSourceTermsFromSqlScript();\n    int expectedPersistCalls = amountOfSourceTerms / dbPagingSize;\n    JobRunDataRepository dataRepositoryWrapperMock = buildJobRunDataRepositoryWrapperMock();\n    JobRunner jobRunner = new JobRunner(jobRunRepository, dataRepositoryWrapperMock, termRepositoryProxy);\n\n    jobRunner.setSettings(buildPagableSettingsFor(dbPagingSize));\n    jobRunner.runJob(job, new TestWebScraper());\n\n    verify(dataRepositoryWrapperMock, times(expectedPersistCalls))\n        .persistAllFor(any(JobRun.class), any());\n    assertHasWrittenJobRunDataMatchingAmount(job.getId());\n}\n</code></pre>\n<p>The reason i am using a &quot;mock&quot; of <code>JobRunDataRepository</code> here is so i can wrap the <code>persistAllFor()</code> to verify how many times it is internally called - i still call the live persistAllFor() method. This is not an issue specific to the test, as the same problem occurs in the live code. For completion purposes, here is the method creating the wrapped mock around the live call:</p>\n<pre><code>@SuppressWarnings(&quot;unchecked&quot;)\nprivate JobRunDataRepository buildJobRunDataRepositoryWrapperMock() {\n    JobRunDataRepository dataRepositoryWrapperMock = Mockito.mock(JobRunDataRepository.class);\n    \n    doAnswer(new Answer&lt;Void&gt;() {\n        @Override\n        public Void answer(InvocationOnMock invocation) throws Throwable {\n            Object[] arguments = invocation.getRawArguments();\n            JobRun jobRun = (JobRun) arguments[0];\n            Map&lt;String, String&gt; termMap = (Map&lt;String, String&gt;) arguments[1];\n            // Live call is done here from an injected version of the repo with a live entityManager, so it still actually does the db write.\n            jobRunDataRepository.persistAllFor(jobRun, termMap);\n            return null;\n        }\n    }).when(dataRepositoryWrapperMock).persistAllFor(any(JobRun.class), any());\n\n    return dataRepositoryWrapperMock;\n}\n</code></pre>\n<p>Here is <code>runJob()</code> from <code>JobRunner</code>:</p>\n<pre><code>// Note once again, no @Transactional defined here either - so NO transaction spanning the entire runJob method\npublic void runJob(final Job job, final WebScraper webScraper) {\n    try {\n        tryToRunJob(job, webScraper);\n    } catch (Exception e) {\n        e.printStackTrace();\n        updateRunWithFailedStatus();\n    }\n}\n</code></pre>\n<p>Here is a broken down version of <code>tryToRunJob</code> in <code>JobRunner</code> (runWebScrapingPhase() is the next level):</p>\n<pre><code>// Note: Still no overarching transaction defined here either\nprivate void tryToRunJob(Job job, WebScraper webScraper) throws Exception {\n    currentOffset = 0;\n    createAndPersistJobRunFrom(job); // This method calls a db persist from a repository class, which has a @Transactional annotation and works perfectly fine. Object is stored in DB after call\n    initTermRepositoryProxyFor(job);\n    runWebScrapingPhase(webScraper); // This is where things seem to not work\n    updateRunWithFinishedStatus();\n}\n</code></pre>\n<p>Here is the <code>runWebScrapingPhase()</code> from <code>JobRunner</code> with unrelated or unimportant code in between removed:</p>\n<pre><code>// Note, still no overarching @Transactional defined\nprivate int runWebScrapingPhase(WebScraper webScraper) throws Exception {\n    List&lt;String&gt; sourceTerms = termRepositoryProxy.getSourceTerms(currentOffset);\n    if (sourceTerms.isEmpty()) return 0;\n    Map&lt;String, String&gt; termMap = findTargetTermsFor(sourceTerms, webScraper);\n    // If i print current offset here, current data set to be written to the DB and amount of entries everything is correct\n\n    // This method has an @Transactional annotation, but does not write to the DB immediately\n    dataRepository.persistAllFor(jobRun, termMap);\n\n    // When i print the COUNT of the table in the DB here for debugging purposes, it shows 0 entries (meaning it did not write the data after `persistAllFor()` completed\n    \n    return termMap.size();\n}\n</code></pre>\n<p>Now, we come to the problem child: here is the <code>persistAllFor()</code> method of <code>JobRunDataRepository</code> class (which has an entityManager injected like all other repository classes where it works):</p>\n<pre><code>@Transactional\npublic void persistAllFor(JobRun jobRun, Map&lt;String, String&gt; termMap) {\n    termMap.forEach((sourceTerm, targetTerm) -&gt; {\n        JobRunData jobRunData = new JobRunData();\n        jobRunData.setJobRun(jobRun);\n        jobRunData.setSourceTerm(sourceTerm);\n        jobRunData.setTargetTerm(targetTerm);\n        entityManager.persist(jobRunData);\n    });\n    \n    entityManager.flush(); // I am calling `flush()` here\n}\n</code></pre>\n<p>I loop over the data for persist calls, and since this is the only transaction scope of the current method, it should commit/execute within/after the scope of this method - right? All the data persisted here. But as stated in the prior code block, the COUNT of the table remains zero. At the end of the program it tends to commit somehow as the data appears then in the database. Meaning, if an error or exception occurs in between - no data is written at all despite using paging. Its either all of the data of none at all. Why does the <code>flush()</code>/<code>@Transactional</code> not work here for the <code>persistAllFor()</code> method? I would understand it if another <code>@Transactional</code> was wrapped around the code on a higher level, but as you can see there isn't.</p>\n"},{"tags":["java","spring-boot","caching","redis-cache"],"comments":[{"owner":{"account_id":4739993,"reputation":1837,"user_id":3833111,"accept_rate":100,"display_name":"Mr_Thorynque"},"score":1,"creation_date":1673013658,"post_id":75017780,"comment_id":132407974,"body_markdown":"No Redis does not. Why do you want stop using ignte ?","body":"No Redis does not. Why do you want stop using ignte ?"},{"owner":{"account_id":27441104,"reputation":21,"user_id":20936016,"display_name":"Vital"},"score":0,"creation_date":1673502696,"post_id":75017780,"comment_id":132514772,"body_markdown":"I am migrating our on-premiss application to cloud where Ignite is not available as managed service on AWS. So, planned to move to redis but we have leveraged query language from ignite which is not available in redis. So if you have any solution or alternative where I can use querying type caching tool on cloud let me know. @Mr_Thorynque","body":"I am migrating our on-premiss application to cloud where Ignite is not available as managed service on AWS. So, planned to move to redis but we have leveraged query language from ignite which is not available in redis. So if you have any solution or alternative where I can use querying type caching tool on cloud let me know. @Mr_Thorynque"},{"owner":{"account_id":4739993,"reputation":1837,"user_id":3833111,"accept_rate":100,"display_name":"Mr_Thorynque"},"score":0,"creation_date":1673512402,"post_id":75017780,"comment_id":132517020,"body_markdown":"If you want managed ( and payed) solution you can take a look to gridgrain https://www.gridgain.com/products/in-memory-computing-platform it&#39;s based on apache ignite.","body":"If you want managed ( and payed) solution you can take a look to gridgrain <a href=\"https://www.gridgain.com/products/in-memory-computing-platform\" rel=\"nofollow noreferrer\">gridgain.com/products/in-memory-computing-platform</a> it&#39;s based on apache ignite."}],"owner":{"account_id":27441104,"reputation":21,"user_id":20936016,"display_name":"Vital"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1672923539,"creation_date":1672918373,"question_id":75017780,"body_markdown":"I am using apache ignite for my application now I wanted to migrate to redis-cache but I used ignite query api to fetch data. Is there any possible way I can use the same queries just by changing dependencies from ignite to redis-cache?\r\n\r\nIs there any alternative tool where i can use in AWS cloud platform which supports Native SQL API?","title":"Does Redis cache supports Native sql Api","body":"<p>I am using apache ignite for my application now I wanted to migrate to redis-cache but I used ignite query api to fetch data. Is there any possible way I can use the same queries just by changing dependencies from ignite to redis-cache?</p>\n<p>Is there any alternative tool where i can use in AWS cloud platform which supports Native SQL API?</p>\n"},{"tags":["java","angular","typescript","spring-mvc","samba"],"comments":[{"owner":{"account_id":2188351,"reputation":113,"user_id":1936175,"display_name":"tbc"},"score":1,"creation_date":1672917646,"post_id":75017363,"comment_id":132383105,"body_markdown":"ASAIK even if you were able to redirect the browser to the proper path, it will simply download a copy of the file.","body":"ASAIK even if you were able to redirect the browser to the proper path, it will simply download a copy of the file."},{"owner":{"account_id":2557515,"reputation":177,"user_id":2219184,"display_name":"OASE Software GmbH"},"score":0,"creation_date":1673003799,"post_id":75017363,"comment_id":132405132,"body_markdown":"This sounds not good. The customer was used to work like this with an old VisualBasic desktop program. We wanted to make the switch to the web-app as convenient as possible, but it&#39;s a big loss of quality. Is there another solution for this?","body":"This sounds not good. The customer was used to work like this with an old VisualBasic desktop program. We wanted to make the switch to the web-app as convenient as possible, but it&#39;s a big loss of quality. Is there another solution for this?"}],"owner":{"account_id":2557515,"reputation":177,"user_id":2219184,"display_name":"OASE Software GmbH"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672923402,"creation_date":1672916195,"question_id":75017363,"body_markdown":"The use-case of this topic is as follows.\r\nThe user works within the angular app to capture data for specific cases. In addition to every case the user can upload files in the angular app.\r\nNow if the user reopens the case and wants to edit the uploaded file I&#39;d like to show him links for every file and when he clicks on a link the file should not be delivered from the server with a stream, but should him kind of redirect to the local location of the file on the shared folder like `file:///X:/TheShare/file2edit.doc`\r\nSo Word opens up and the user can make changes to the file and directly save the file on the location. So there is no subsequent upload neccessary for the file to be updated on the servers drive where the shared folder points to.\r\nMy working environment is an angular(7) frontend which interacts with a spring-mvc backend.\r\nThe user working on windows clients with Firefox/Chrome/Edge and the shared folder is available via samba from an linux server whichs hosts the spring backend.\r\n","title":"Is it possible to open DOCS, XLSX, PDF files from a shared folder to edit the file in the intranet from a Angular-App?","body":"<p>The use-case of this topic is as follows.\nThe user works within the angular app to capture data for specific cases. In addition to every case the user can upload files in the angular app.\nNow if the user reopens the case and wants to edit the uploaded file I'd like to show him links for every file and when he clicks on a link the file should not be delivered from the server with a stream, but should him kind of redirect to the local location of the file on the shared folder like <code>file:///X:/TheShare/file2edit.doc</code>\nSo Word opens up and the user can make changes to the file and directly save the file on the location. So there is no subsequent upload neccessary for the file to be updated on the servers drive where the shared folder points to.\nMy working environment is an angular(7) frontend which interacts with a spring-mvc backend.\nThe user working on windows clients with Firefox/Chrome/Edge and the shared folder is available via samba from an linux server whichs hosts the spring backend.</p>\n"},{"tags":["java","spring-boot","spring-transactions"],"comments":[{"owner":{"account_id":2690800,"reputation":1906,"user_id":2324206,"accept_rate":100,"display_name":"Haridarshan"},"score":0,"creation_date":1623412350,"post_id":67936472,"comment_id":120078373,"body_markdown":"`rollbackFor-Exception.class` is this typo while posting question or you&#39;ve actually used this &#39;-&#39; in the code?","body":"<code>rollbackFor-Exception.class</code> is this typo while posting question or you&#39;ve actually used this &#39;-&#39; in the code?"},{"owner":{"account_id":10404372,"reputation":73,"user_id":7671721,"display_name":"Bhargav J"},"score":0,"creation_date":1623413450,"post_id":67936472,"comment_id":120078824,"body_markdown":"Sorry , that&#39;s a typo , actual code is in a different machine , I have typed the code here! , Thank you will correct it :)","body":"Sorry , that&#39;s a typo , actual code is in a different machine , I have typed the code here! , Thank you will correct it :)"},{"owner":{"account_id":2690800,"reputation":1906,"user_id":2324206,"accept_rate":100,"display_name":"Haridarshan"},"score":0,"creation_date":1623413918,"post_id":67936472,"comment_id":120079036,"body_markdown":"It seems application is throwing checked exceptions instead of unchecked exceptions hence the transactions are committed. Ref: https://docs.spring.io/spring-framework/docs/2.5.x/reference/transaction.html#transaction-declarative","body":"It seems application is throwing checked exceptions instead of unchecked exceptions hence the transactions are committed. Ref: <a href=\"https://docs.spring.io/spring-framework/docs/2.5.x/reference/transaction.html#transaction-declarative\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/2.5.x/reference/&hellip;</a>"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1623414139,"post_id":67936472,"comment_id":120079120,"body_markdown":"And why should it? You are catching the exceptions and then swallowing it. Hence the transaction management never sees the exception and assumes all is ok and will do a commit. Never catch and swallow an exception. Also your method is `private` so the `@Transactional` is basically ignored as a `private` method cannot be proxied nor called from the outside.","body":"And why should it? You are catching the exceptions and then swallowing it. Hence the transaction management never sees the exception and assumes all is ok and will do a commit. Never catch and swallow an exception. Also your method is <code>private</code> so the <code>@Transactional</code> is basically ignored as a <code>private</code> method cannot be proxied nor called from the outside."}],"answers":[{"tags":[],"owner":{"account_id":21633886,"reputation":146,"user_id":15957056,"display_name":"Vipulkumar Gorasiya"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1623414149,"creation_date":1623414149,"answer_id":67936972,"question_id":67936472,"body_markdown":"The method `PublicationServiceImpl.save` must be `public` if you want to use `@Transactional`.\r\n\r\nAs per Spring Documentation:\r\n&gt;When you use transactional proxies with Spring’s standard configuration, you should apply the @Transactional annotation only to methods with public visibility. If you do annotate protected, private, or package-visible methods with the @Transactional annotation, no error is raised, but the annotated method does not exhibit the configured transactional settings. ","title":"Spring boot @Transactional not rolling back the database inserts","body":"<p>The method <code>PublicationServiceImpl.save</code> must be <code>public</code> if you want to use <code>@Transactional</code>.</p>\n<p>As per Spring Documentation:</p>\n<blockquote>\n<p>When you use transactional proxies with Spring’s standard configuration, you should apply the @Transactional annotation only to methods with public visibility. If you do annotate protected, private, or package-visible methods with the @Transactional annotation, no error is raised, but the annotated method does not exhibit the configured transactional settings.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1754849,"reputation":663,"user_id":1603131,"accept_rate":43,"display_name":"Sorin Penteleiciuc"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1623414166,"creation_date":1623414166,"answer_id":67936975,"question_id":67936472,"body_markdown":"Annotations in general never work on methods called from the same class because of how proxies are created in Spring. \r\n\r\nIt has nothing to do with @Transaction in particular but with the fact that your methods is **private** and **called from the within same object**.\r\n\r\nPlease make the method **public** and move the @Transactional method in a separate class annoted with @Service and called it from outside of the instance of the class  \r\n\r\n      @Service\r\n      public class PublicationServiceSaverImpl {\r\n\r\n         @Transactional\r\n         **public** int save(Request request) {\r\n          ...\r\n         }\r\n      }\r\n\r\nYou must call the save method  from outside of the class PublicationServiceSaverImpl, maybe from PublicationServiceImpl. \r\n\r\n\r\n\r\n\r\n  \r\n\r\n\r\n\r\n\r\n    ","title":"Spring boot @Transactional not rolling back the database inserts","body":"<p>Annotations in general never work on methods called from the same class because of how proxies are created in Spring.</p>\n<p>It has nothing to do with @Transaction in particular but with the fact that your methods is <strong>private</strong> and <strong>called from the within same object</strong>.</p>\n<p>Please make the method <strong>public</strong> and move the @Transactional method in a separate class annoted with @Service and called it from outside of the instance of the class</p>\n<pre><code>  @Service\n  public class PublicationServiceSaverImpl {\n\n     @Transactional\n     **public** int save(Request request) {\n      ...\n     }\n  }\n</code></pre>\n<p>You must call the save method  from outside of the class PublicationServiceSaverImpl, maybe from PublicationServiceImpl.</p>\n"},{"tags":[],"owner":{"account_id":7427444,"reputation":519,"user_id":5649507,"display_name":"Nidhin Dev"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1623414216,"creation_date":1623414216,"answer_id":67936988,"question_id":67936472,"body_markdown":"In stead of @Transactional(propagation = propagation.REQUIRED provide @Transactional(propagation = propagation.REQUIRED_NEW\r\n\r\nIf you use the latter, it will use the parent transaction boundary, which is at class level.\r\n\r\nAnd you don&#39;t need explicitly state rollbackFor=Exception.class. By default spring will roll back on exception\r\n\r\nAnd do change private to public\r\n\r\nTry this out","title":"Spring boot @Transactional not rolling back the database inserts","body":"<p>In stead of @Transactional(propagation = propagation.REQUIRED provide @Transactional(propagation = propagation.REQUIRED_NEW</p>\n<p>If you use the latter, it will use the parent transaction boundary, which is at class level.</p>\n<p>And you don't need explicitly state rollbackFor=Exception.class. By default spring will roll back on exception</p>\n<p>And do change private to public</p>\n<p>Try this out</p>\n"},{"tags":[],"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1623414764,"creation_date":1623414764,"answer_id":67937121,"question_id":67936472,"body_markdown":"There are several things that break proper transactions in Spring \r\n\r\n1. Your service method is `private`\r\n2. You are catching and swallowing exceptions\r\n\r\n`private` method\r\n===\r\n\r\nThe fact that your `PublicationServiceImpl` `save` method is `private` basically makes the `@Transactional` on that method useless. As a `private` method cannot be proxied, no transactions will apply. Even if it would be `public` it wouldn&#39;t work as you are calling the method from within the same object, hence the transactionality of that method applies. \r\n\r\nTo fix, make your method `public` and call the `save` method from an other class (or make the actual method that is calling `save` have the proper `@Transactional`. \r\n\r\nThe fact that is doesn&#39;t work is due to the type op AOP being used, by default Spring will use proxies and this is a drawback of using proxy based AOP. \r\n\r\nAnother solution to make it work with `private` methods is to switch to full-blown AspectJ with either compile-time or load-time weaving of the classes. Both require additional setup and that can be tedious. \r\n\r\nCatch and swallow exceptions\r\n===\r\n\r\nYou have in both your repository as well as your service a `try/catch` block. Each of those catches and swallows the exceptions (they are logged but not re-thrown). \r\n\r\nFor transactions to work properly it needs to see the exceptions. The fact that you are catching and swallowing them, makes the transaction aspect not see them and instead of doing a rollback, do a commit. For the transaction aspect everything is ok because there was no exception. \r\n\r\nTo fix, remove either the `try/catch` or rethrow the exceptions. ","title":"Spring boot @Transactional not rolling back the database inserts","body":"<p>There are several things that break proper transactions in Spring</p>\n<ol>\n<li>Your service method is <code>private</code></li>\n<li>You are catching and swallowing exceptions</li>\n</ol>\n<h1><code>private</code> method</h1>\n<p>The fact that your <code>PublicationServiceImpl</code> <code>save</code> method is <code>private</code> basically makes the <code>@Transactional</code> on that method useless. As a <code>private</code> method cannot be proxied, no transactions will apply. Even if it would be <code>public</code> it wouldn't work as you are calling the method from within the same object, hence the transactionality of that method applies.</p>\n<p>To fix, make your method <code>public</code> and call the <code>save</code> method from an other class (or make the actual method that is calling <code>save</code> have the proper <code>@Transactional</code>.</p>\n<p>The fact that is doesn't work is due to the type op AOP being used, by default Spring will use proxies and this is a drawback of using proxy based AOP.</p>\n<p>Another solution to make it work with <code>private</code> methods is to switch to full-blown AspectJ with either compile-time or load-time weaving of the classes. Both require additional setup and that can be tedious.</p>\n<h1>Catch and swallow exceptions</h1>\n<p>You have in both your repository as well as your service a <code>try/catch</code> block. Each of those catches and swallows the exceptions (they are logged but not re-thrown).</p>\n<p>For transactions to work properly it needs to see the exceptions. The fact that you are catching and swallowing them, makes the transaction aspect not see them and instead of doing a rollback, do a commit. For the transaction aspect everything is ok because there was no exception.</p>\n<p>To fix, remove either the <code>try/catch</code> or rethrow the exceptions.</p>\n"},{"tags":[],"owner":{"account_id":7778530,"reputation":3138,"user_id":9860374,"display_name":"Matheus"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1623415169,"creation_date":1623415169,"answer_id":67937203,"question_id":67936472,"body_markdown":"First of all: make your method public.\r\n\r\nSecond: you have to throw the exception. If you catch and not rethrow it, how do you expect the transactional processing to know that an error occured and then rollback?\r\n\r\nYou have two options: throw the `Exception` instead of catching it, or catch, do some further processing and then rethrow it.\r\n\r\nSo in your repository, just add a throws keyword and then rethrow the exception after the log statement:\r\n\r\n```java\r\npublic int executeQuery() throws Exception {\r\n  try {\r\n    keyHolder = new GenerateKeyHolder();\r\n    namedParamaterJDBCTemplate.update(getInsertQuery(), sqlParamaterSource, kekHolder, new String[] {\r\n      &quot;pk_id&quot;\r\n    })\r\n    return keyHolder.getKey().intValue();\r\n  } catch(Exception e) {\r\n    log.error(&quot;Exception while saving&quot;);\r\n    throw e;\r\n  }\r\n}\r\n```\r\n\r\nNow, for your service:\r\n\r\nExample 1 - use the throws keyword to propagate the checked exception:\r\n\r\n```java\r\n@Override\r\n@Transactional(propagation = propagation.REQUIRED, rollbackFor = Exception.class)\r\npublic int save(Request request) throws Exception {\r\n  int pk_id_partner = partnerRepo.save(request);\r\n  int pk_id_flow = flowRepo.save(request);\r\n\r\n  String publicationCode = generatePubCode(request);\r\n  int publicationCode = pubRepo.save(pk_id_partner, pk_id_flow, request);\r\n  return 0;\r\n}\r\n```\r\n\r\nExample 2 - catch and rethrow it as an RuntimeException, which is unchecked.\r\n\r\n```java\r\n@Override\r\n@Transactional(propagation = propagation.REQUIRED)\r\npublic int save(Request request) {\r\n  try {\r\n    int pk_id_partner = partnerRepo.save(request);\r\n    int pk_id_flow = flowRepo.save(request);\r\n\r\n    String publicationCode = generatePubCode(request);\r\n    int publicationCode = pubRepo.save(pk_id_partner, pk_id_flow, request);\r\n  } catch(Exception ex) {\r\n    throw new RuntimeException(ex);\r\n  }\r\n  return 0;\r\n}\r\n```\r\n\r\nNote that the second example doesn&#39;t need the `rollbackFor` argument to the `@Transactional`. By default, a transaction is rolled back if a unchecked exception occurs, so there&#39;s no need to explicitly use `rollbackFor` in cases of `RuntimeException`s.","title":"Spring boot @Transactional not rolling back the database inserts","body":"<p>First of all: make your method public.</p>\n<p>Second: you have to throw the exception. If you catch and not rethrow it, how do you expect the transactional processing to know that an error occured and then rollback?</p>\n<p>You have two options: throw the <code>Exception</code> instead of catching it, or catch, do some further processing and then rethrow it.</p>\n<p>So in your repository, just add a throws keyword and then rethrow the exception after the log statement:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public int executeQuery() throws Exception {\n  try {\n    keyHolder = new GenerateKeyHolder();\n    namedParamaterJDBCTemplate.update(getInsertQuery(), sqlParamaterSource, kekHolder, new String[] {\n      &quot;pk_id&quot;\n    })\n    return keyHolder.getKey().intValue();\n  } catch(Exception e) {\n    log.error(&quot;Exception while saving&quot;);\n    throw e;\n  }\n}\n</code></pre>\n<p>Now, for your service:</p>\n<p>Example 1 - use the throws keyword to propagate the checked exception:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n@Transactional(propagation = propagation.REQUIRED, rollbackFor = Exception.class)\npublic int save(Request request) throws Exception {\n  int pk_id_partner = partnerRepo.save(request);\n  int pk_id_flow = flowRepo.save(request);\n\n  String publicationCode = generatePubCode(request);\n  int publicationCode = pubRepo.save(pk_id_partner, pk_id_flow, request);\n  return 0;\n}\n</code></pre>\n<p>Example 2 - catch and rethrow it as an RuntimeException, which is unchecked.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n@Transactional(propagation = propagation.REQUIRED)\npublic int save(Request request) {\n  try {\n    int pk_id_partner = partnerRepo.save(request);\n    int pk_id_flow = flowRepo.save(request);\n\n    String publicationCode = generatePubCode(request);\n    int publicationCode = pubRepo.save(pk_id_partner, pk_id_flow, request);\n  } catch(Exception ex) {\n    throw new RuntimeException(ex);\n  }\n  return 0;\n}\n</code></pre>\n<p>Note that the second example doesn't need the <code>rollbackFor</code> argument to the <code>@Transactional</code>. By default, a transaction is rolled back if a unchecked exception occurs, so there's no need to explicitly use <code>rollbackFor</code> in cases of <code>RuntimeException</code>s.</p>\n"},{"tags":[],"owner":{"account_id":18531064,"reputation":1,"user_id":13507719,"display_name":"ALVIN POMA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632423916,"creation_date":1632423916,"answer_id":69305671,"question_id":67936472,"body_markdown":"Another verification that would have to be done if the solution does not work. It is to verify that the database tables allow the rollback. For this, the engine has to be in InnoDB and not in MyISAM and others.","title":"Spring boot @Transactional not rolling back the database inserts","body":"<p>Another verification that would have to be done if the solution does not work. It is to verify that the database tables allow the rollback. For this, the engine has to be in InnoDB and not in MyISAM and others.</p>\n"},{"tags":[],"owner":{"account_id":8256277,"reputation":418,"user_id":6209355,"display_name":"Yauheni Leaniuk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672923308,"creation_date":1672923308,"answer_id":75018735,"question_id":67936472,"body_markdown":"In my case adding @EnableTransactionManagement annotation on Application class resolved the issue","title":"Spring boot @Transactional not rolling back the database inserts","body":"<p>In my case adding @EnableTransactionManagement annotation on Application class resolved the issue</p>\n"}],"owner":{"account_id":10404372,"reputation":73,"user_id":7671721,"display_name":"Bhargav J"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15015,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":67937121,"answer_count":7,"score":6,"last_activity_date":1672923308,"creation_date":1623412020,"question_id":67936472,"body_markdown":"Need some help here, I&#39;m not able to understand why my transactions are not getting rolled back in an event of exception.\r\n\r\nI will try to put my code as close to as It is on the project (cannot share on the internet) \r\n\r\nThis is my Service\r\n\r\n    @Service\r\n    @SL4j\r\n    @Transactional(propagation = propagation.SUPPORTS, readOnly=true)\r\n    public class PublicationServiceImpl implements PublicationService{\r\n        @Autowired \r\n        private PartnerRepo partnerRepo;\r\n                    \r\n        @Autowired\r\n        private FlowRepo flowRepo;\r\n    \r\n        @Autowired\r\n        private PubRepo pubRepo;\r\n                    \r\n        @Override\r\n        @Transactional(propagation = propagation.REQUIRED, rollbackFor=Exception.class)\r\n        public int save(Request request) {\r\n        try{\r\n                       int  pk_id_partner = partnerRepo.save(request);\r\n                       int  pk_id_flow = flowRepo.save(request);\r\n            \r\n                       String publicationCode = generatePubCode(request);\r\n                       int publicationCode= pubRepo.save(pk_id_partner, pk_id_flow, request);\r\n            }\r\n            catch(Exception e){\r\n            log.error(&quot;Exception in saving&quot;);\r\n        }\r\n        return 0;\r\n        }\r\n    }\r\n\r\nThis is my Repository (example of 1 , all 3 repos follow same coding standards)\r\n\r\n        \r\n    @Repository\r\n    @Slf4j\r\n    public class PartnerRepo implemets PartnerRepo{\r\n        @Autowired\r\n        private NamedParamaterJDBCTemplate namedParamaterJDBCTemplate;\r\n        //String Declarations .....\r\n    \r\n        private MapSqlParameterSource sqlParameterSource;\r\n    \r\n        @Override\r\n        public int save(Request request){\r\n            sqlParamatersSource = new MapSqlParameterSource();\r\n            //sqlParamatersSource.addValue(.....)\r\n            //sqlParamatersSource.addValue(.....)\r\n            //sqlParamatersSource.addValue(.....)\r\n    \r\n            return executeQuery();\r\n        }\r\n    \r\n        private int executeQuery(){\r\n            try{\r\n                keyHolder = new GenerateKeyHolder();\r\n                namedParamaterJDBCTemplate.update(getInsertQuery(), sqlParamaterSource , kekHolder, new String[]{&quot;pk_id&quot;})\r\n                return keyHolder.getKey().intValue();\r\n            }catch(Exception e){\r\n                log.error(&quot;Exception while saving&quot;);\r\n                return 0;\r\n            }\r\n        }\r\n    }\r\n\r\nSo the problem is , Consider there is an exception in the method `generatePubCode(request);` , ideally since I have used `@Transactional` at class level and method level , The previous 2 repo transactions () should be rolled back right? However it isn&#39;t happening, Even After the code is finished execution I can see the records in DB (Postgres DB v10).\r\n\r\nPlease help figure out this issue , Am I doing something fundamentally wrong ? \r\n\r\nPlease do let me know in case you need further information that might help here!\r\n\r\n\r\n P.S: I have tried all permutations of `@Transactional` , nothing works : ONLY having this in the catch block works!  `TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();` \r\nI wonder If its the right approach for a springBoot project \r\n\r\nThanks in advance for the help! \r\n\r\nEdit: as per suggestion made the `PublicationServiceSaverImpl.save()` public\r\n\r\nBest reagards,\r\nBhargav.\r\n\r\n","title":"Spring boot @Transactional not rolling back the database inserts","body":"<p>Need some help here, I'm not able to understand why my transactions are not getting rolled back in an event of exception.</p>\n<p>I will try to put my code as close to as It is on the project (cannot share on the internet)</p>\n<p>This is my Service</p>\n<pre><code>@Service\n@SL4j\n@Transactional(propagation = propagation.SUPPORTS, readOnly=true)\npublic class PublicationServiceImpl implements PublicationService{\n    @Autowired \n    private PartnerRepo partnerRepo;\n                \n    @Autowired\n    private FlowRepo flowRepo;\n\n    @Autowired\n    private PubRepo pubRepo;\n                \n    @Override\n    @Transactional(propagation = propagation.REQUIRED, rollbackFor=Exception.class)\n    public int save(Request request) {\n    try{\n                   int  pk_id_partner = partnerRepo.save(request);\n                   int  pk_id_flow = flowRepo.save(request);\n        \n                   String publicationCode = generatePubCode(request);\n                   int publicationCode= pubRepo.save(pk_id_partner, pk_id_flow, request);\n        }\n        catch(Exception e){\n        log.error(&quot;Exception in saving&quot;);\n    }\n    return 0;\n    }\n}\n</code></pre>\n<p>This is my Repository (example of 1 , all 3 repos follow same coding standards)</p>\n<pre><code>@Repository\n@Slf4j\npublic class PartnerRepo implemets PartnerRepo{\n    @Autowired\n    private NamedParamaterJDBCTemplate namedParamaterJDBCTemplate;\n    //String Declarations .....\n\n    private MapSqlParameterSource sqlParameterSource;\n\n    @Override\n    public int save(Request request){\n        sqlParamatersSource = new MapSqlParameterSource();\n        //sqlParamatersSource.addValue(.....)\n        //sqlParamatersSource.addValue(.....)\n        //sqlParamatersSource.addValue(.....)\n\n        return executeQuery();\n    }\n\n    private int executeQuery(){\n        try{\n            keyHolder = new GenerateKeyHolder();\n            namedParamaterJDBCTemplate.update(getInsertQuery(), sqlParamaterSource , kekHolder, new String[]{&quot;pk_id&quot;})\n            return keyHolder.getKey().intValue();\n        }catch(Exception e){\n            log.error(&quot;Exception while saving&quot;);\n            return 0;\n        }\n    }\n}\n</code></pre>\n<p>So the problem is , Consider there is an exception in the method <code>generatePubCode(request);</code> , ideally since I have used <code>@Transactional</code> at class level and method level , The previous 2 repo transactions () should be rolled back right? However it isn't happening, Even After the code is finished execution I can see the records in DB (Postgres DB v10).</p>\n<p>Please help figure out this issue , Am I doing something fundamentally wrong ?</p>\n<p>Please do let me know in case you need further information that might help here!</p>\n<p>P.S: I have tried all permutations of <code>@Transactional</code> , nothing works : ONLY having this in the catch block works!  <code>TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();</code>\nI wonder If its the right approach for a springBoot project</p>\n<p>Thanks in advance for the help!</p>\n<p>Edit: as per suggestion made the <code>PublicationServiceSaverImpl.save()</code> public</p>\n<p>Best reagards,\nBhargav.</p>\n"},{"tags":["java","parsing","localdatetime"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1672923824,"post_id":75018614,"comment_id":132385125,"body_markdown":"Try `&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ssZ&quot;` -- `SS` is milliseconds, not seconds, and you need to match the literal `T` and the offset.","body":"Try <code>&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ssZ&quot;</code> -- <code>SS</code> is milliseconds, not seconds, and you need to match the literal <code>T</code> and the offset."}],"owner":{"account_id":27089847,"reputation":17,"user_id":20637812,"display_name":"pawello12"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1672923174,"answer_count":0,"score":0,"last_activity_date":1672923248,"creation_date":1672922768,"question_id":75018614,"body_markdown":"how can I format such a date:  \r\n`2023-01-04T17:19:08+0100` in a string to a date in `LocalDateTime` using `DateTimeFormatter` or another tool ? It tries this way and throws a `DateTimeParseException` :\r\n\r\n\r\n\r\n```\r\n   private LocalDateTime parseLocalDateTime(String dateTime){\r\n\r\n        final DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:SS&quot;);\r\n        return LocalDateTime.parse(dateTime, formatter);\r\n    }\r\n```\r\n\r\n\r\n\r\n\r\n","title":"format date time from string","body":"<p>how can I format such a date:<br />\n<code>2023-01-04T17:19:08+0100</code> in a string to a date in <code>LocalDateTime</code> using <code>DateTimeFormatter</code> or another tool ? It tries this way and throws a <code>DateTimeParseException</code> :</p>\n<pre><code>   private LocalDateTime parseLocalDateTime(String dateTime){\n\n        final DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:SS&quot;);\n        return LocalDateTime.parse(dateTime, formatter);\n    }\n</code></pre>\n"},{"tags":["java","jenkins","ssh"],"comments":[{"owner":{"account_id":24305212,"reputation":316,"user_id":18248076,"display_name":"Working dollar"},"score":0,"creation_date":1675518835,"post_id":75018678,"comment_id":132948475,"body_markdown":"Turns out that I was being blocked by a firewall","body":"Turns out that I was being blocked by a firewall"}],"owner":{"account_id":24305212,"reputation":316,"user_id":18248076,"display_name":"Working dollar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":217,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672923061,"creation_date":1672923061,"question_id":75018678,"body_markdown":"When I ssh (I am using Windows 10 with OpenSSH) into jenkins-cli.jar I get the following error:\r\n```\r\nJan 05, 2023 12:48:06 PM io.jenkins.cli.shaded.org.apache.sshd.common.util.security.AbstractSecurityProviderRegistrar getOrCreateProvider\r\nINFO: getOrCreateProvider(EdDSA) created instance of io.jenkins.cli.shaded.net.i2p.crypto.eddsa.EdDSASecurityProvider\r\nJan 05, 2023 12:48:07 PM io.jenkins.cli.shaded.org.apache.sshd.common.io.DefaultIoServiceFactoryFactory getIoServiceProvider\r\nINFO: No detected/configured IoServiceFactoryFactory; using Nio2ServiceFactoryFactory\r\nio.jenkins.cli.shaded.org.apache.sshd.common.RuntimeSshException: Failed to get the session.\r\n        at io.jenkins.cli.shaded.org.apache.sshd.client.future.DefaultConnectFuture.getSession(DefaultConnectFuture.java:59)\r\n        at io.jenkins.cli.shaded.org.apache.sshd.client.future.DefaultConnectFuture.getSession(DefaultConnectFuture.java:34)\r\n        at hudson.cli.SSHCLI.sshConnection(SSHCLI.java:102)\r\n        at hudson.cli.CLI._main(CLI.java:294)\r\n        at hudson.cli.CLI.main(CLI.java:103)\r\nCaused by: java.io.IOException: The semaphore timeout period has expired\r\n        at java.base/sun.nio.ch.Iocp.translateErrorToIOException(Iocp.java:299)\r\n        at java.base/sun.nio.ch.Iocp$EventHandlerTask.run(Iocp.java:389)\r\n        at java.base/java.lang.Thread.run(Thread.java:1589)\r\n```\r\n\r\nAfter trying:\r\n```\r\njava -jar jenkins-cli.jar -s SERVER:8080/ -ssh -user MY_USERNAME\r\n```\r\n\r\nWhat is the cause of this error, so that I can fix it and SSH into my jenkins instance?","title":"SSH with Jenkins CLI","body":"<p>When I ssh (I am using Windows 10 with OpenSSH) into jenkins-cli.jar I get the following error:</p>\n<pre><code>Jan 05, 2023 12:48:06 PM io.jenkins.cli.shaded.org.apache.sshd.common.util.security.AbstractSecurityProviderRegistrar getOrCreateProvider\nINFO: getOrCreateProvider(EdDSA) created instance of io.jenkins.cli.shaded.net.i2p.crypto.eddsa.EdDSASecurityProvider\nJan 05, 2023 12:48:07 PM io.jenkins.cli.shaded.org.apache.sshd.common.io.DefaultIoServiceFactoryFactory getIoServiceProvider\nINFO: No detected/configured IoServiceFactoryFactory; using Nio2ServiceFactoryFactory\nio.jenkins.cli.shaded.org.apache.sshd.common.RuntimeSshException: Failed to get the session.\n        at io.jenkins.cli.shaded.org.apache.sshd.client.future.DefaultConnectFuture.getSession(DefaultConnectFuture.java:59)\n        at io.jenkins.cli.shaded.org.apache.sshd.client.future.DefaultConnectFuture.getSession(DefaultConnectFuture.java:34)\n        at hudson.cli.SSHCLI.sshConnection(SSHCLI.java:102)\n        at hudson.cli.CLI._main(CLI.java:294)\n        at hudson.cli.CLI.main(CLI.java:103)\nCaused by: java.io.IOException: The semaphore timeout period has expired\n        at java.base/sun.nio.ch.Iocp.translateErrorToIOException(Iocp.java:299)\n        at java.base/sun.nio.ch.Iocp$EventHandlerTask.run(Iocp.java:389)\n        at java.base/java.lang.Thread.run(Thread.java:1589)\n</code></pre>\n<p>After trying:</p>\n<pre><code>java -jar jenkins-cli.jar -s SERVER:8080/ -ssh -user MY_USERNAME\n</code></pre>\n<p>What is the cause of this error, so that I can fix it and SSH into my jenkins instance?</p>\n"},{"tags":["java","spring-boot","spring-batch","spring-cloud-dataflow"],"comments":[{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1670267951,"post_id":74686792,"comment_id":131832462,"body_markdown":"Any reason you are trying to separate the databases? Centralizing business tables and technical tables makes your application&#39;s configuration easier than having to deal with distributed transactions with JTA, etc. In your case, you need to configure the reader/writer by setting the second datasource on them directly.","body":"Any reason you are trying to separate the databases? Centralizing business tables and technical tables makes your application&#39;s configuration easier than having to deal with distributed transactions with JTA, etc. In your case, you need to configure the reader/writer by setting the second datasource on them directly."},{"owner":{"account_id":9570882,"reputation":1,"user_id":7108544,"display_name":"Zishnu"},"score":0,"creation_date":1670306400,"post_id":74686792,"comment_id":131839725,"body_markdown":"We have application database in different source. Since we have to do some ETL kind of operation where we have to read and write in Oracle to MySQL. Please suggest me the proper configuration so that we can read/write from other external database.","body":"We have application database in different source. Since we have to do some ETL kind of operation where we have to read and write in Oracle to MySQL. Please suggest me the proper configuration so that we can read/write from other external database."},{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1670311829,"post_id":74686792,"comment_id":131840955,"body_markdown":"You can have a Spring Batch job that reads data from a database and writes it to another one. For that, you need to configure two datasources and set them on the reader and the writer as needed. Now for the meta-data, it is up to you to decide where to put the Batch/Task tables.","body":"You can have a Spring Batch job that reads data from a database and writes it to another one. For that, you need to configure two datasources and set them on the reader and the writer as needed. Now for the meta-data, it is up to you to decide where to put the Batch/Task tables."}],"owner":{"account_id":9570882,"reputation":1,"user_id":7108544,"display_name":"Zishnu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672922966,"creation_date":1670236609,"question_id":74686792,"body_markdown":"I&#39;m setting up an instance of Spring Cloud Data Flow. I&#39;ve run the following commands:\r\n\r\njava -jar spring-cloud-dataflow-server-2.9.2.jar --spring.datasource.url=jdbc:oracle:thin:@oracle-test.com:1521/dev --spring.datasource.username=ORACLE_USER --spring.datasource.password=123456 --spring.datasource.driver-class-name=oracle.jdbc.OracleDriver &amp;\r\n\r\nIn the second step, I&#39;m using some other oracle database, not the dataflow oracle task database.\r\n\r\n**How to separate dataflow task datasource and batch job Itemreader/Writer database with two external data source.**\r\n\r\n\r\n```\r\napp.dataflow-single-step-batch.spring.datasource.data-password=123456\r\napp.dataflow-single-step-batch.spring.datasource.data-username=ORACLE_USER\r\napp.dataflow-single-step-batch.spring.datasource.driver-class-name=oracle.jdbc.OracleDriver\r\napp.dataflow-single-step-batch.spring.datasource.driverClassName=oracle.jdbc.OracleDriver\r\napp.dataflow-single-step-batch.spring.datasource.generate-unique-name=false\r\napp.dataflow-single-step-batch.spring.datasource.password=123456\r\napp.dataflow-single-step-batch.spring.datasource.url=jdbc:oracle:thin:@oracle-test-perf.com:1521/test\r\napp.dataflow-single-step-batch.spring.datasource.username=ORACLE_USER\r\napp.dataflow-single-step-batch.spring.jpa.database-platform=org.hibernate.dialect.Oracle10gDialect\r\n```\r\n\r\n\r\n**With this above configuration Batch job ItemReader points to other data source. But I am getting the issue below **\r\n**Failed to start bean &#39;taskLifecycleListener&#39;; nested exception\r\nCaused by: java.lang.IllegalArgumentException: Invalid TaskExecution, ID 32 not found**","title":"Spring Cloud Data Flow Task database and Single step batch data source pointing to separate external database","body":"<p>I'm setting up an instance of Spring Cloud Data Flow. I've run the following commands:</p>\n<p>java -jar spring-cloud-dataflow-server-2.9.2.jar --spring.datasource.url=jdbc:oracle:thin:@oracle-test.com:1521/dev --spring.datasource.username=ORACLE_USER --spring.datasource.password=123456 --spring.datasource.driver-class-name=oracle.jdbc.OracleDriver &amp;</p>\n<p>In the second step, I'm using some other oracle database, not the dataflow oracle task database.</p>\n<p><strong>How to separate dataflow task datasource and batch job Itemreader/Writer database with two external data source.</strong></p>\n<pre><code>app.dataflow-single-step-batch.spring.datasource.data-password=123456\napp.dataflow-single-step-batch.spring.datasource.data-username=ORACLE_USER\napp.dataflow-single-step-batch.spring.datasource.driver-class-name=oracle.jdbc.OracleDriver\napp.dataflow-single-step-batch.spring.datasource.driverClassName=oracle.jdbc.OracleDriver\napp.dataflow-single-step-batch.spring.datasource.generate-unique-name=false\napp.dataflow-single-step-batch.spring.datasource.password=123456\napp.dataflow-single-step-batch.spring.datasource.url=jdbc:oracle:thin:@oracle-test-perf.com:1521/test\napp.dataflow-single-step-batch.spring.datasource.username=ORACLE_USER\napp.dataflow-single-step-batch.spring.jpa.database-platform=org.hibernate.dialect.Oracle10gDialect\n</code></pre>\n<p>**With this above configuration Batch job ItemReader points to other data source. But I am getting the issue below **\n<strong>Failed to start bean 'taskLifecycleListener'; nested exception\nCaused by: java.lang.IllegalArgumentException: Invalid TaskExecution, ID 32 not found</strong></p>\n"},{"tags":["java","sorting","arraylist","comparator"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1672920691,"post_id":75018160,"comment_id":132384077,"body_markdown":"What&#39;s the problem with the code exactly?","body":"What&#39;s the problem with the code exactly?"},{"owner":{"account_id":10625943,"reputation":55,"user_id":7825572,"display_name":"4ulls"},"score":1,"creation_date":1672923607,"post_id":75018160,"comment_id":132385063,"body_markdown":"I does not sort, but after some debugging I have replaced the line: return (int)(a.getX() - b.getX()); by: return (int)Math.signum(a.getX() - b.getX()); and now it does.","body":"I does not sort, but after some debugging I have replaced the line: return (int)(a.getX() - b.getX()); by: return (int)Math.signum(a.getX() - b.getX()); and now it does."}],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299848,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1672922860,"creation_date":1672921591,"answer_id":75018378,"question_id":75018160,"body_markdown":"`nextFloat()` will generate a `float` in the range [0,1), and by subtracting any two such values in the comparator, you&#39;ll get a value in the range (-1, 1). When you cast this to an `int` you&#39;ll get a 0, meaning that according to this comparator they are all equivalent, and the list will retain its order.\r\n\r\nYou can solve this by not implementing the comparator with `-`, but by reusing `Float`&#39;s [`compare`](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Float.html#compare(float,float)) method:\r\n\r\n```java\r\nclass sorter implements Comparator&lt;someObj&gt; {\r\n    \r\n    public int compare(someObj a, someObj b) {\r\n        return Float.compare(a.getX(), b.getX());\r\n    }\r\n}\r\n```\r\n\r\nOr better yet, use [`Comparator.comparing`](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Comparator.html#comparing(java.util.function.Function)) to create this comparator on the fly:\r\n\r\n```java\r\nCollections.sort(oList, Comparator.comparing(someObj::getX));\r\n```\r\n\r\n**EDIT:**\\\r\nAs Andy Turner noted in the comments, `Collections.sort` is a bit outdated. Since JDK 8, lists have their own `sort` method you can invoke directly:\r\n\r\n```java\r\noList.sort(Comparator.comparing(someObj::getX));\r\n```","title":"Trying to sort an ArrayList using Comparator","body":"<p><code>nextFloat()</code> will generate a <code>float</code> in the range [0,1), and by subtracting any two such values in the comparator, you'll get a value in the range (-1, 1). When you cast this to an <code>int</code> you'll get a 0, meaning that according to this comparator they are all equivalent, and the list will retain its order.</p>\n<p>You can solve this by not implementing the comparator with <code>-</code>, but by reusing <code>Float</code>'s <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Float.html#compare(float,float)\" rel=\"noreferrer\"><code>compare</code></a> method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class sorter implements Comparator&lt;someObj&gt; {\n    \n    public int compare(someObj a, someObj b) {\n        return Float.compare(a.getX(), b.getX());\n    }\n}\n</code></pre>\n<p>Or better yet, use <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Comparator.html#comparing(java.util.function.Function)\" rel=\"noreferrer\"><code>Comparator.comparing</code></a> to create this comparator on the fly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Collections.sort(oList, Comparator.comparing(someObj::getX));\n</code></pre>\n<p><strong>EDIT:</strong><br />\nAs Andy Turner noted in the comments, <code>Collections.sort</code> is a bit outdated. Since JDK 8, lists have their own <code>sort</code> method you can invoke directly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>oList.sort(Comparator.comparing(someObj::getX));\n</code></pre>\n"}],"owner":{"account_id":10625943,"reputation":55,"user_id":7825572,"display_name":"4ulls"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":75018378,"answer_count":1,"score":2,"last_activity_date":1672922860,"creation_date":1672920583,"question_id":75018160,"body_markdown":"In the code below the object `someObj` has two properties, a `float x` and an `int pnt`.\r\nAn `ArrayList&lt;someObj&gt;` is created and is then sorted using a `Comparator` interface according to x. The property `pnt` is intended to keep track of the elements after the sorting.\r\n\r\nI&#39;ve copied the code from https://www.geeksforgeeks.org/collections-sort-java-examples/\r\nand modified it a little to suit my needs. I wonder what might be wrong, it just does not do its sorting job.\r\n\r\n```java\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.Comparator;\r\nimport java.util.Random;\r\n\r\npublic class ArrayListSorting {\r\n\r\n   public static void main(String[] args) {\r\n\t   \r\n       // 20 random numbers will be used for the test\r\n\t   final int sz=20;\r\n\t   Random rand = new Random();\r\n\t   \r\n\t   ArrayList&lt;someObj&gt; oList=new ArrayList&lt;someObj&gt;();\r\n\t  \r\n      // Build the list\r\n      for(int i=0;i&lt;sz;i++) {\r\n    \t  oList.add(new someObj(i,rand.nextFloat()));\r\n      }\r\n    \r\n      // Print the list before sorting\r\n      for(int i=0;i&lt;sz;i++) {\r\n    \t  System.out.println(i+&quot;\\t&quot;+oList.get(i).getX());\r\n      }\r\n\r\n      Collections.sort(oList, new sorter());\r\n\r\n      // ...and after sorting\r\n      for(int i=0;i&lt;sz;i++) {\r\n    \t  int j=oList.get(i).getPnt();\r\n    \t  System.out.println(j+&quot;\\t&quot;+oList.get(i).getX());\r\n      }\r\n\r\n   }\r\n}\r\n\r\nclass someObj {\r\n\r\n\tprivate float x;\r\n\tprivate int pnt;\r\n\t\r\n\tpublic someObj(int pnt,float x) {\r\n\t\tthis.pnt=pnt;\r\n\t\tthis.x=x;\r\n\t}\r\n\t\r\n\tpublic int getPnt() {\r\n\t\treturn pnt;\r\n\t}\r\n\t\r\n\tpublic float getX() {\r\n\t\treturn x;\r\n\t}\r\n}\r\n\r\nclass sorter implements Comparator&lt;someObj&gt; {\r\n\t\r\n\tpublic int compare(someObj a, someObj b) {\r\n        return (int)(a.getX() - b.getX());\r\n    }\r\n}\r\n```","title":"Trying to sort an ArrayList using Comparator","body":"<p>In the code below the object <code>someObj</code> has two properties, a <code>float x</code> and an <code>int pnt</code>.\nAn <code>ArrayList&lt;someObj&gt;</code> is created and is then sorted using a <code>Comparator</code> interface according to x. The property <code>pnt</code> is intended to keep track of the elements after the sorting.</p>\n<p>I've copied the code from <a href=\"https://www.geeksforgeeks.org/collections-sort-java-examples/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/collections-sort-java-examples/</a>\nand modified it a little to suit my needs. I wonder what might be wrong, it just does not do its sorting job.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.Comparator;\nimport java.util.Random;\n\npublic class ArrayListSorting {\n\n   public static void main(String[] args) {\n       \n       // 20 random numbers will be used for the test\n       final int sz=20;\n       Random rand = new Random();\n       \n       ArrayList&lt;someObj&gt; oList=new ArrayList&lt;someObj&gt;();\n      \n      // Build the list\n      for(int i=0;i&lt;sz;i++) {\n          oList.add(new someObj(i,rand.nextFloat()));\n      }\n    \n      // Print the list before sorting\n      for(int i=0;i&lt;sz;i++) {\n          System.out.println(i+&quot;\\t&quot;+oList.get(i).getX());\n      }\n\n      Collections.sort(oList, new sorter());\n\n      // ...and after sorting\n      for(int i=0;i&lt;sz;i++) {\n          int j=oList.get(i).getPnt();\n          System.out.println(j+&quot;\\t&quot;+oList.get(i).getX());\n      }\n\n   }\n}\n\nclass someObj {\n\n    private float x;\n    private int pnt;\n    \n    public someObj(int pnt,float x) {\n        this.pnt=pnt;\n        this.x=x;\n    }\n    \n    public int getPnt() {\n        return pnt;\n    }\n    \n    public float getX() {\n        return x;\n    }\n}\n\nclass sorter implements Comparator&lt;someObj&gt; {\n    \n    public int compare(someObj a, someObj b) {\n        return (int)(a.getX() - b.getX());\n    }\n}\n</code></pre>\n"},{"tags":["java","multithreading","algorithm","indexing","hashmap"],"comments":[{"owner":{"account_id":8218454,"reputation":762,"user_id":6183889,"display_name":"Tom Elias"},"score":0,"creation_date":1672761443,"post_id":74995581,"comment_id":132344821,"body_markdown":"first of all, you have to make sure the keys of your hashmap, or any hashmap, are immutable. otherwise, you won&#39;t be able to &quot;get&quot; anything out of the map. the type of your key (pair&lt;T,T&gt;) does not seem immutable as T can be any object. at the very least, T type has to implement equals+hashcode. if you plan on using Strings or primitives for the keys, just concat the 2 values with an underscore between them and throw out the Pair.","body":"first of all, you have to make sure the keys of your hashmap, or any hashmap, are immutable. otherwise, you won&#39;t be able to &quot;get&quot; anything out of the map. the type of your key (pair&lt;T,T&gt;) does not seem immutable as T can be any object. at the very least, T type has to implement equals+hashcode. if you plan on using Strings or primitives for the keys, just concat the 2 values with an underscore between them and throw out the Pair."},{"owner":{"account_id":15508020,"reputation":185,"user_id":11187611,"display_name":"Zartof"},"score":0,"creation_date":1672763914,"post_id":74995581,"comment_id":132345652,"body_markdown":"Hi Tom Elias, thanks for your comment. I voluntarily omitted some not related to my problem details. I can confirm that my keys are immutable and that the implementation of T has equals and hashcode methods.","body":"Hi Tom Elias, thanks for your comment. I voluntarily omitted some not related to my problem details. I can confirm that my keys are immutable and that the implementation of T has equals and hashcode methods."}],"answers":[{"tags":[],"owner":{"account_id":286249,"reputation":43941,"user_id":585411,"accept_rate":60,"display_name":"btilly"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672771455,"creation_date":1672771455,"answer_id":74997473,"question_id":74995581,"body_markdown":"I don&#39;t know what your throughput is, or what you expect it to be, but the &quot;merge&quot; should be pretty efficient since it is just inserting a value into a set.  If its performance is not what is expected, then I&#39;d suggest looking at the performance of the `hashcode()` method.  It should be fast to calculate, and should distribute your keys to a spread of values.  A poor `hashcode()` method on custom objects can make hashing slow.\r\n\r\nYou can get bad performance due to locking and concurrency issues, in which case [ConcurrentHashMap][1] may help.  It also offers a `newKeySet()` method for a concurrent set implementation.\r\n\r\nAlso, I would suggest that you try not using `getOrDefault` here.  Instead `get` and test for `null`.  In the case where the key exists, you can then skip your `put` operations.  Otherwise construct the default explicitly and `put` it.  Minimizing operations to your parent hashmaps is good for throughput.  But we&#39;re only talking about a small factor, so I can&#39;t imagine this making much of a difference.\r\n\r\nIf you absolutely can&#39;t fix the bottleneck, then you can solve this by having multiple threads, each with a portion of the data structure, and divide keys by the range the hashcode is in.  So instead of writing to something like `firstToPairMap` you calculate a `hashcode()`, and based on it send this to the correct queue running on its own CPU to manipulate this data structure.\r\n\r\nThat seems excessive though.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html","title":"How to speed up the population of a second level index map using multithreading?","body":"<p>I don't know what your throughput is, or what you expect it to be, but the &quot;merge&quot; should be pretty efficient since it is just inserting a value into a set.  If its performance is not what is expected, then I'd suggest looking at the performance of the <code>hashcode()</code> method.  It should be fast to calculate, and should distribute your keys to a spread of values.  A poor <code>hashcode()</code> method on custom objects can make hashing slow.</p>\n<p>You can get bad performance due to locking and concurrency issues, in which case <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html\" rel=\"nofollow noreferrer\">ConcurrentHashMap</a> may help.  It also offers a <code>newKeySet()</code> method for a concurrent set implementation.</p>\n<p>Also, I would suggest that you try not using <code>getOrDefault</code> here.  Instead <code>get</code> and test for <code>null</code>.  In the case where the key exists, you can then skip your <code>put</code> operations.  Otherwise construct the default explicitly and <code>put</code> it.  Minimizing operations to your parent hashmaps is good for throughput.  But we're only talking about a small factor, so I can't imagine this making much of a difference.</p>\n<p>If you absolutely can't fix the bottleneck, then you can solve this by having multiple threads, each with a portion of the data structure, and divide keys by the range the hashcode is in.  So instead of writing to something like <code>firstToPairMap</code> you calculate a <code>hashcode()</code>, and based on it send this to the correct queue running on its own CPU to manipulate this data structure.</p>\n<p>That seems excessive though.</p>\n"}],"owner":{"account_id":15508020,"reputation":185,"user_id":11187611,"display_name":"Zartof"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74997473,"answer_count":1,"score":0,"last_activity_date":1672922666,"creation_date":1672760884,"question_id":74995581,"body_markdown":"I&#39;m stuck with a performance issue I would hope to get some help/idea/suggestions.\r\n\r\nFirst things first, some context:\r\n\r\nA *foo()* procedure it&#39;s processed in parallel through multithreading. One goal of this procedure it&#39;s to populate a map (from now on *mainMap*) to index some results obtained during the computation. The signature of the mainMap is **Map&lt;Pair&lt;T, T&gt;, Object&gt;**\r\n\r\nFor the nature of my problem the values of the **mainMap** doesn&#39;t really matter. So let&#39;s focus on the key.\r\n\r\nThe **Pair** object it&#39;s really simple, it just pack up 2 (same type) objects.\r\n\r\n    public class Pair&lt;T, T&gt; {\r\n        private T first; //first member of pair\r\n        private T second; //second member of pair\r\n\r\n        public Pair(T first, T second) {\r\n            this.first = first;\r\n            this.second = second;\r\n        }\r\n\r\n        public boolean contains(T elem) {\r\n            return this.first.equals(elem) || this.second.equals(elem);\r\n        }\r\n\r\n        //Getters and Setters...\r\n    }\r\n\r\n**Problem**: For my processing purposes, I need to fetch from the **mainMap** all values that have as key a pair that contains as first or second element a specific **T elem** .\r\n\r\nNow I&#39;m gonna walk you through my approaches to the one I guess might work.\r\n\r\n**Note:** in the examples I&#39;m gonna use Strings as implementation of the generics **T**, but keep in mind that could be anything.\r\n\r\n1. Dummy approach:\r\nI just ran a **mainMap.keySet()** and filter the result using **key.contains(elem)**. All the pairs remained can now be used to query the mainMap.\r\n\r\n**Results**: This basic approach just doesn&#39;t fit my needs in terms of performance as long my maps can be very large with thousands of thousands of entries.\r\n\r\n\r\n2. Secondary level indexing:\r\nI created 2 new maps with the following signature **Map&lt;T, Set&lt;Pair&lt;T, T&gt;&gt;&gt;** called **firstToPairMap** and **secondToPairMap**. They work as follows:\r\n\r\n    Let&#39;s say that in the **mainMap** there are these 2 entries:\r\n\r\n         {A, B} -&gt; ...\r\n         {C, B} -&gt; ...\r\n         {X, Z} -&gt; ...\r\n\r\n    The **firstToPairMap** would then be populated like this:\r\n\r\n         A -&gt; [{A, B}]\r\n         C -&gt; [{C, B}]\r\n         X -&gt; [{X, Z}]\r\n\r\n    While the **secondToPairMap** would be like this:\r\n\r\n         B -&gt; [{A, B}, {C, B}]\r\n         Z -&gt; [{X, Z}]\r\n\r\nAs you can see both these 2 new maps index the keys of the **mainMap** so that querying some **T elem** to both these secondary level index maps give directly all the pairs I need to query the **mainMap**.\r\n\r\n**Results**: The querying part works just fine. The main problem here is the population of these 2 secondary level index maps.\r\nThe **mainMap** is populated in parallel by multithreading and so are the secondary level index maps. But in order to populate correctly these maps I can&#39;t simply **put** new entries, I need to **merge** new values with pre-existent ones (look the B case on the secondToPairMap). \r\nSo, to get to the point, the problem is that this operation of merging it&#39;s really slow.\r\n\r\n\r\nTrying to pursuing the second approach, I tried the following strategy without any success yet.\r\nI queued all **Pairs** I had to insert during the parallel computing and delayed this operation so that it remains only to implement (better) this function:\r\n\r\n    private static void dequeuePairsMap(Queue&lt;Pair&lt;T, T&gt;&gt; queue, Map&lt;T, Set&lt;Pair&lt;T, T&gt;&gt;&gt; secondToPairMap, Map&lt;T, Set&lt;Pair&lt;T, T&gt;&gt;&gt; firstToPairMap) {\r\n       while(!queue.isEmpty()) {\r\n            Pair&lt;T, T&gt; pair = queue.poll();\r\n            Set&lt;Pair&lt;T, T&gt;&gt; secondToPairSet = secondToPairMap.getOrDefault(pair.getSecond(), new HashSet&lt;&gt;());\r\n            Set&lt;Pair&lt;T, T&gt;&gt; firstToPairSet = firstToPairMap.getOrDefault(pair.getFirst(), new HashSet&lt;&gt;());\r\n            secondToPairSet.add(pair);\r\n            firstToPairSet.add(pair);\r\n            secondToPairMap.put(pair.getSecond(), secondToPairSet);\r\n            firstToPairMap.put(pair.getFirst(), firstToPairSet);\r\n        }\r\n    }\r\n\r\nAs you can tell this implementation doesn&#39;t solve my problem cause I&#39;m still relying on a merge kind approach.\r\nI was just able to prove that the performance problem it&#39;s not due the concurrent access to the map, but it&#39;s truly the merge operation.\r\n \r\nCan you help me figuring it out how to solve the performance issue?\r\n\r\nEDIT:\r\nsharing new implementation of `dequeuePairsMap` that actually speed up things. The idea behind is to perform as many possibile bulk insert in the map and minimizing in the same time merge requests.\r\n\r\n    private static void dequeuePairsMap(Queue&lt;Pair&lt;T, T&gt;&gt; queue, Map&lt;T, Set&lt;Pair&lt;T, T&gt;&gt;&gt; secondToPairMap, Map&lt;T, Set&lt;Pair&lt;T, T&gt;&gt;&gt; firstToPairMap) {\r\n\r\n        while(!queue.isEmpty()) {\r\n            Pair&lt;T, T&gt; pair = queue.poll();\r\n            Set&lt;Pair&lt;T, T&gt;&gt; firstToPairSet = queue.stream().filter(edge -&gt; edge.containsAsFirst(pair.getFirst())).collect(Collectors.toSet());\r\n            Set&lt;Pair&lt;T, T&gt;&gt; secondToPairSet = queue.stream().filter(edge -&gt; edge.containsAsSecond(pair.getSecond())).collect(Collectors.toSet());\r\n            firstToPairSet.add(pair);\r\n            secondToPairSet.add(pair);\r\n            Set&lt;Pair&lt;T, T&gt;&gt; firstToPairExistingSet = firstToPairMap.getOrDefault(pair.getFirst(), new HashSet&lt;&gt;());\r\n            Set&lt;Pair&lt;T, T&gt;&gt; secondToPairExistingSet = secondToPairMap.getOrDefault(pair.getSecond(), new HashSet&lt;&gt;());\r\n            if(!firstToPairExistingSet.containsAll(firstToPairSet))\r\n                firstToPairMap.merge(pair.getFirst(), firstToPairSet, (oldSet, newSet) -&gt; Stream.concat(oldSet.stream(), newSet.stream()).collect(Collectors.toSet()));\r\n\r\n            if(!secondToPairExistingSet.containsAll(secondToPairSet))\r\n                secondToPairMap.merge(pair.getSecond(), secondToPairSet, (oldSet, newSet) -&gt; Stream.concat(oldSet.stream(), newSet.stream()).collect(Collectors.toSet()));\r\n\r\n        }\r\n\r\n    }\r\n\r\n","title":"How to speed up the population of a second level index map using multithreading?","body":"<p>I'm stuck with a performance issue I would hope to get some help/idea/suggestions.</p>\n<p>First things first, some context:</p>\n<p>A <em>foo()</em> procedure it's processed in parallel through multithreading. One goal of this procedure it's to populate a map (from now on <em>mainMap</em>) to index some results obtained during the computation. The signature of the mainMap is <strong>Map&lt;Pair&lt;T, T&gt;, Object&gt;</strong></p>\n<p>For the nature of my problem the values of the <strong>mainMap</strong> doesn't really matter. So let's focus on the key.</p>\n<p>The <strong>Pair</strong> object it's really simple, it just pack up 2 (same type) objects.</p>\n<pre><code>public class Pair&lt;T, T&gt; {\n    private T first; //first member of pair\n    private T second; //second member of pair\n\n    public Pair(T first, T second) {\n        this.first = first;\n        this.second = second;\n    }\n\n    public boolean contains(T elem) {\n        return this.first.equals(elem) || this.second.equals(elem);\n    }\n\n    //Getters and Setters...\n}\n</code></pre>\n<p><strong>Problem</strong>: For my processing purposes, I need to fetch from the <strong>mainMap</strong> all values that have as key a pair that contains as first or second element a specific <strong>T elem</strong> .</p>\n<p>Now I'm gonna walk you through my approaches to the one I guess might work.</p>\n<p><strong>Note:</strong> in the examples I'm gonna use Strings as implementation of the generics <strong>T</strong>, but keep in mind that could be anything.</p>\n<ol>\n<li>Dummy approach:\nI just ran a <strong>mainMap.keySet()</strong> and filter the result using <strong>key.contains(elem)</strong>. All the pairs remained can now be used to query the mainMap.</li>\n</ol>\n<p><strong>Results</strong>: This basic approach just doesn't fit my needs in terms of performance as long my maps can be very large with thousands of thousands of entries.</p>\n<ol start=\"2\">\n<li><p>Secondary level indexing:\nI created 2 new maps with the following signature <strong>Map&lt;T, Set&lt;Pair&lt;T, T&gt;&gt;&gt;</strong> called <strong>firstToPairMap</strong> and <strong>secondToPairMap</strong>. They work as follows:</p>\n<p>Let's say that in the <strong>mainMap</strong> there are these 2 entries:</p>\n<pre><code>  {A, B} -&gt; ...\n  {C, B} -&gt; ...\n  {X, Z} -&gt; ...\n</code></pre>\n<p>The <strong>firstToPairMap</strong> would then be populated like this:</p>\n<pre><code>  A -&gt; [{A, B}]\n  C -&gt; [{C, B}]\n  X -&gt; [{X, Z}]\n</code></pre>\n<p>While the <strong>secondToPairMap</strong> would be like this:</p>\n<pre><code>  B -&gt; [{A, B}, {C, B}]\n  Z -&gt; [{X, Z}]\n</code></pre>\n</li>\n</ol>\n<p>As you can see both these 2 new maps index the keys of the <strong>mainMap</strong> so that querying some <strong>T elem</strong> to both these secondary level index maps give directly all the pairs I need to query the <strong>mainMap</strong>.</p>\n<p><strong>Results</strong>: The querying part works just fine. The main problem here is the population of these 2 secondary level index maps.\nThe <strong>mainMap</strong> is populated in parallel by multithreading and so are the secondary level index maps. But in order to populate correctly these maps I can't simply <strong>put</strong> new entries, I need to <strong>merge</strong> new values with pre-existent ones (look the B case on the secondToPairMap).\nSo, to get to the point, the problem is that this operation of merging it's really slow.</p>\n<p>Trying to pursuing the second approach, I tried the following strategy without any success yet.\nI queued all <strong>Pairs</strong> I had to insert during the parallel computing and delayed this operation so that it remains only to implement (better) this function:</p>\n<pre><code>private static void dequeuePairsMap(Queue&lt;Pair&lt;T, T&gt;&gt; queue, Map&lt;T, Set&lt;Pair&lt;T, T&gt;&gt;&gt; secondToPairMap, Map&lt;T, Set&lt;Pair&lt;T, T&gt;&gt;&gt; firstToPairMap) {\n   while(!queue.isEmpty()) {\n        Pair&lt;T, T&gt; pair = queue.poll();\n        Set&lt;Pair&lt;T, T&gt;&gt; secondToPairSet = secondToPairMap.getOrDefault(pair.getSecond(), new HashSet&lt;&gt;());\n        Set&lt;Pair&lt;T, T&gt;&gt; firstToPairSet = firstToPairMap.getOrDefault(pair.getFirst(), new HashSet&lt;&gt;());\n        secondToPairSet.add(pair);\n        firstToPairSet.add(pair);\n        secondToPairMap.put(pair.getSecond(), secondToPairSet);\n        firstToPairMap.put(pair.getFirst(), firstToPairSet);\n    }\n}\n</code></pre>\n<p>As you can tell this implementation doesn't solve my problem cause I'm still relying on a merge kind approach.\nI was just able to prove that the performance problem it's not due the concurrent access to the map, but it's truly the merge operation.</p>\n<p>Can you help me figuring it out how to solve the performance issue?</p>\n<p>EDIT:\nsharing new implementation of <code>dequeuePairsMap</code> that actually speed up things. The idea behind is to perform as many possibile bulk insert in the map and minimizing in the same time merge requests.</p>\n<pre><code>private static void dequeuePairsMap(Queue&lt;Pair&lt;T, T&gt;&gt; queue, Map&lt;T, Set&lt;Pair&lt;T, T&gt;&gt;&gt; secondToPairMap, Map&lt;T, Set&lt;Pair&lt;T, T&gt;&gt;&gt; firstToPairMap) {\n\n    while(!queue.isEmpty()) {\n        Pair&lt;T, T&gt; pair = queue.poll();\n        Set&lt;Pair&lt;T, T&gt;&gt; firstToPairSet = queue.stream().filter(edge -&gt; edge.containsAsFirst(pair.getFirst())).collect(Collectors.toSet());\n        Set&lt;Pair&lt;T, T&gt;&gt; secondToPairSet = queue.stream().filter(edge -&gt; edge.containsAsSecond(pair.getSecond())).collect(Collectors.toSet());\n        firstToPairSet.add(pair);\n        secondToPairSet.add(pair);\n        Set&lt;Pair&lt;T, T&gt;&gt; firstToPairExistingSet = firstToPairMap.getOrDefault(pair.getFirst(), new HashSet&lt;&gt;());\n        Set&lt;Pair&lt;T, T&gt;&gt; secondToPairExistingSet = secondToPairMap.getOrDefault(pair.getSecond(), new HashSet&lt;&gt;());\n        if(!firstToPairExistingSet.containsAll(firstToPairSet))\n            firstToPairMap.merge(pair.getFirst(), firstToPairSet, (oldSet, newSet) -&gt; Stream.concat(oldSet.stream(), newSet.stream()).collect(Collectors.toSet()));\n\n        if(!secondToPairExistingSet.containsAll(secondToPairSet))\n            secondToPairMap.merge(pair.getSecond(), secondToPairSet, (oldSet, newSet) -&gt; Stream.concat(oldSet.stream(), newSet.stream()).collect(Collectors.toSet()));\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","android","xmpp","chat","smack"],"comments":[{"owner":{"account_id":17333111,"reputation":872,"user_id":12555686,"display_name":"Simran Sharma"},"score":0,"creation_date":1614774746,"post_id":46477971,"comment_id":117486565,"body_markdown":"In the line `Chat chat = ChatManager.getInstanceFor(connection).createChat(jid);`, how do you get the `jid`","body":"In the line <code>Chat chat = ChatManager.getInstanceFor(connection).createChat(jid);</code>, how do you get the <code>jid</code>"}],"answers":[{"tags":[],"owner":{"display_name":"user5699130"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1625099414,"creation_date":1506674510,"answer_id":46485012,"question_id":46477971,"body_markdown":"### Answer\r\n\r\nDigging a bit deeper I found the answer, the code below will help to send a message\r\n\r\n### Sending Message Code\r\n    final Chat chat = ChatManager.getInstanceFor(connection).chatWith(jid);\r\n    \r\n    Message newMessage = new Message(jid, Message.Type.chat);\r\n    newMessage.setBody(message);\r\n    \r\n    chat.send(newMessage);\r\n\r\n### Conclusion\r\n\r\nSo instead of sending a string message, you need to create a `Message` object and I think what is more important is to specify `Message.Type.chat` in the constructor and also `jid` and then call `chat.send(...)`","title":"Sending message does not work in XMPP with Smack library","body":"<h3>Answer</h3>\n<p>Digging a bit deeper I found the answer, the code below will help to send a message</p>\n<h3>Sending Message Code</h3>\n<pre><code>final Chat chat = ChatManager.getInstanceFor(connection).chatWith(jid);\n\nMessage newMessage = new Message(jid, Message.Type.chat);\nnewMessage.setBody(message);\n\nchat.send(newMessage);\n</code></pre>\n<h3>Conclusion</h3>\n<p>So instead of sending a string message, you need to create a <code>Message</code> object and I think what is more important is to specify <code>Message.Type.chat</code> in the constructor and also <code>jid</code> and then call <code>chat.send(...)</code></p>\n"},{"tags":[],"owner":{"account_id":11388548,"reputation":1,"user_id":8349438,"display_name":"Kevin Chen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672922570,"creation_date":1530070375,"answer_id":51054169,"question_id":46477971,"body_markdown":"You can refer to this code snippet:\r\n\r\n&gt; ```java\r\n&gt; public void sendMessage(String to, Message newMessage) {\r\n&gt; if(chatManager!=null) {\r\n&gt; Chat newChat = chatManager.createChat(to);\r\n&gt; \r\n&gt; try {\r\n&gt; if (connection.isConnected() &amp;&amp; connection.isAuthenticated()) {\r\n&gt; \r\n&gt; newChat.sendMessage(newMessage);\r\n&gt; }\r\n&gt; } catch (SmackException.NotConnectedException e) {\r\n&gt; e.printStackTrace();\r\n&gt; }\r\n&gt; }\r\n&gt; else\r\n&gt; {\r\n&gt; Log.d(TAG,”chatmanager is null”);\r\n&gt; }\r\n&gt; }\r\n&gt; ```\r\n\r\nAnd the link is https://ramzandroidarchive.wordpress.com/2016/03/13/send-messages-over-xmpp-using-smack-4-1/ .","title":"Sending message does not work in XMPP with Smack library","body":"<p>You can refer to this code snippet:</p>\n<blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>public void sendMessage(String to, Message newMessage) {\nif(chatManager!=null) {\nChat newChat = chatManager.createChat(to);\n\ntry {\nif (connection.isConnected() &amp;&amp; connection.isAuthenticated()) {\n\nnewChat.sendMessage(newMessage);\n}\n} catch (SmackException.NotConnectedException e) {\ne.printStackTrace();\n}\n}\nelse\n{\nLog.d(TAG,”chatmanager is null”);\n}\n}\n</code></pre>\n</blockquote>\n<p>And the link is <a href=\"https://ramzandroidarchive.wordpress.com/2016/03/13/send-messages-over-xmpp-using-smack-4-1/\" rel=\"nofollow noreferrer\">https://ramzandroidarchive.wordpress.com/2016/03/13/send-messages-over-xmpp-using-smack-4-1/</a> .</p>\n"},{"tags":[],"owner":{"account_id":13856402,"reputation":31,"user_id":10003092,"display_name":"Z. Mei"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1530280316,"creation_date":1530276229,"answer_id":51102073,"question_id":46477971,"body_markdown":"There is an example with an older version of smack:\r\n\r\n    import org.jivesoftware.smack.Chat;\r\n    import org.jivesoftware.smack.ChatManager;\r\n    import org.jivesoftware.smack.ChatManagerListener;\r\n    import org.jivesoftware.smack.ConnectionConfiguration;\r\n    import org.jivesoftware.smack.MessageListener;\r\n    import org.jivesoftware.smack.XMPPConnection;\r\n    import org.jivesoftware.smack.XMPPException;\r\n    import org.jivesoftware.smack.packet.Message;\r\n    \r\n    public class Test {\r\n    \tpublic static void main(String args[]) throws XMPPException {\r\n    \t\tConnectionConfiguration config = new ConnectionConfiguration(&quot;127.0.0.1&quot;, 5222);\t\r\n    \t\tXMPPConnection connection = new XMPPConnection(config);\t\r\n    \t\tconnection.connect();\t\r\n    \t\tconnection.login(&quot;userx&quot;, &quot;123456&quot;);\r\n    \t\tChatManager cm = connection.getChatManager(); \r\n    \t\tChat chat = cm.createChat(&quot;tongqian@tsw-PC&quot;, null);\r\n    \t\t/*\r\n    \t\t * add listener\r\n    \t\t */\r\n    \t\tcm.addChatListener(new ChatManagerListener() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic void chatCreated(Chat chat, boolean create) {\r\n    \t\t\t\tchat.addMessageListener(new MessageListener() {\r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic void processMessage(Chat chat, Message msg) {\r\n    \t\t\t\t\t\tSystem.out.println(chat.getParticipant() + &quot;:&quot; + msg.getBody());\r\n    \t\t\t\t\t}\r\n    \t\t\t\t});\r\n    \t\t\t}\r\n    \t\t});\r\n    \t\tchat.sendMessage(&quot;hello&quot;);\t\r\n    \t\twhile(true); \t\t\r\n    \t\t//connection.disconnect();\t\r\n    \t}\r\n    }\r\n\r\n ","title":"Sending message does not work in XMPP with Smack library","body":"<p>There is an example with an older version of smack:</p>\n\n<pre><code>import org.jivesoftware.smack.Chat;\nimport org.jivesoftware.smack.ChatManager;\nimport org.jivesoftware.smack.ChatManagerListener;\nimport org.jivesoftware.smack.ConnectionConfiguration;\nimport org.jivesoftware.smack.MessageListener;\nimport org.jivesoftware.smack.XMPPConnection;\nimport org.jivesoftware.smack.XMPPException;\nimport org.jivesoftware.smack.packet.Message;\n\npublic class Test {\n    public static void main(String args[]) throws XMPPException {\n        ConnectionConfiguration config = new ConnectionConfiguration(\"127.0.0.1\", 5222);    \n        XMPPConnection connection = new XMPPConnection(config); \n        connection.connect();   \n        connection.login(\"userx\", \"123456\");\n        ChatManager cm = connection.getChatManager(); \n        Chat chat = cm.createChat(\"tongqian@tsw-PC\", null);\n        /*\n         * add listener\n         */\n        cm.addChatListener(new ChatManagerListener() {\n            @Override\n            public void chatCreated(Chat chat, boolean create) {\n                chat.addMessageListener(new MessageListener() {\n                    @Override\n                    public void processMessage(Chat chat, Message msg) {\n                        System.out.println(chat.getParticipant() + \":\" + msg.getBody());\n                    }\n                });\n            }\n        });\n        chat.sendMessage(\"hello\");  \n        while(true);        \n        //connection.disconnect();  \n    }\n}\n</code></pre>\n"}],"owner":{"display_name":"user5699130"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1291,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":46485012,"answer_count":3,"score":1,"last_activity_date":1672922570,"creation_date":1506631340,"question_id":46477971,"body_markdown":"###Problem Description\r\n\r\nI&#39;m writing chat application using XMPP and Smack Android library. I&#39;m sending messages using code below and everything is working fine.\r\n\r\n    final ChatManager chatManager = ChatManager.getInstanceFor(connection);\r\n    chatManager.addChatListener(this); \r\n    ....\r\n\r\n    @Override\r\n    public void chatCreated(Chat chat, boolean createdLocally) {\r\n        chat.addMessageListener(this);\r\n    }\r\n\r\n    @Override\r\n    public void processMessage(Chat chat, Message message) {\r\n        // Do something here.\r\n    }\r\n\r\n    Chat chat = ChatManager.getInstanceFor(connection).createChat(jid);\r\n    chat.sendMessage(&quot;message&quot;);\r\n\r\n###Question\r\nUnfortunately the API above is deprecated `org.jivesoftware.smack.chat.Chat` and instead I should use `org.jivesoftware.smack.chat2.Chat`, so I am changing implementation as follows\r\n\r\n    final ChatManager chatManager = ChatManager.getInstanceFor(connection);\r\n    chatManager.addOutgoingListener(this);\r\n    chatManager.addIncomingListener(this);\r\n    ....\r\n    Chat chat = ChatManager.getInstanceFor(connection).chatWith(jid);\r\n    chat.send(&quot;message&quot;);\r\n\r\nIn this case I can still get Incoming messages, but when I am trying to send message with `chat.send(&quot;message&quot;);` server does not get anything and `addOutgoingListener` callback is not called.\r\n\r\nAny ideas why?","title":"Sending message does not work in XMPP with Smack library","body":"<h3>Problem Description</h3>\n\n<p>I'm writing chat application using XMPP and Smack Android library. I'm sending messages using code below and everything is working fine.</p>\n\n<pre><code>final ChatManager chatManager = ChatManager.getInstanceFor(connection);\nchatManager.addChatListener(this); \n....\n\n@Override\npublic void chatCreated(Chat chat, boolean createdLocally) {\n    chat.addMessageListener(this);\n}\n\n@Override\npublic void processMessage(Chat chat, Message message) {\n    // Do something here.\n}\n\nChat chat = ChatManager.getInstanceFor(connection).createChat(jid);\nchat.sendMessage(\"message\");\n</code></pre>\n\n<h3>Question</h3>\n\n<p>Unfortunately the API above is deprecated <code>org.jivesoftware.smack.chat.Chat</code> and instead I should use <code>org.jivesoftware.smack.chat2.Chat</code>, so I am changing implementation as follows</p>\n\n<pre><code>final ChatManager chatManager = ChatManager.getInstanceFor(connection);\nchatManager.addOutgoingListener(this);\nchatManager.addIncomingListener(this);\n....\nChat chat = ChatManager.getInstanceFor(connection).chatWith(jid);\nchat.send(\"message\");\n</code></pre>\n\n<p>In this case I can still get Incoming messages, but when I am trying to send message with <code>chat.send(\"message\");</code> server does not get anything and <code>addOutgoingListener</code> callback is not called.</p>\n\n<p>Any ideas why?</p>\n"},{"tags":["java","web-scraping","redirect","diacritics"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1672922510,"post_id":75018290,"comment_id":132384673,"body_markdown":"What makes you think this has to do with the umlauts?","body":"What makes you think this has to do with the umlauts?"},{"owner":{"account_id":4570223,"reputation":315,"user_id":3710098,"accept_rate":71,"display_name":"Garog"},"score":0,"creation_date":1672924466,"post_id":75018290,"comment_id":132385346,"body_markdown":"because i can access every other page where the redirect has no umlauts. just the pages with umlauts are not working.","body":"because i can access every other page where the redirect has no umlauts. just the pages with umlauts are not working."}],"owner":{"account_id":4570223,"reputation":315,"user_id":3710098,"accept_rate":71,"display_name":"Garog"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672922524,"creation_date":1672921188,"question_id":75018290,"body_markdown":"I have a url `url = new URL(&quot;https://website.com/lang/npc=&quot;+id);` and want to load the content with `con.getInputStream()` but that results in `Server redirected too many  times (20)`.\r\nThis problem is because the website redirects me to a url with umlauts -&gt; `https://website.com/lang/npc=6/koboldgez&#252;cht`\r\n\r\nHow to avoid this problem ? ","title":"WebScraping with Java getInputStream(), redirect and umlauts","body":"<p>I have a url <code>url = new URL(&quot;https://website.com/lang/npc=&quot;+id);</code> and want to load the content with <code>con.getInputStream()</code> but that results in <code>Server redirected too many  times (20)</code>.\nThis problem is because the website redirects me to a url with umlauts -&gt; <code>https://website.com/lang/npc=6/koboldgezücht</code></p>\n<p>How to avoid this problem ?</p>\n"},{"tags":["java","casting","classcastexception"],"comments":[{"owner":{"account_id":24831,"reputation":5854,"user_id":63383,"accept_rate":100,"display_name":"Mauricio"},"score":59,"creation_date":1296566042,"post_id":4862960,"comment_id":5403937,"body_markdown":"YOU are telling the compiler to NOT detect the error.","body":"YOU are telling the compiler to NOT detect the error."}],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":59,"is_accepted":false,"score":59,"last_activity_date":1296565991,"creation_date":1296565991,"answer_id":4862980,"question_id":4862960,"body_markdown":"Because theoretically `Animal animal` _can_ be a dog:\r\n\r\n    Animal animal = new Dog();\r\n\r\nGenerally, downcasting is not a good idea. You should avoid it. If you use it, you better include a check: \r\n\r\n    if (animal instanceof Dog) {\r\n        Dog dog = (Dog) animal;\r\n    }","title":"Explicit casting from super-class to sub-class","body":"<p>Because theoretically <code>Animal animal</code> <em>can</em> be a dog:</p>\n\n<pre><code>Animal animal = new Dog();\n</code></pre>\n\n<p>Generally, downcasting is not a good idea. You should avoid it. If you use it, you better include a check: </p>\n\n<pre><code>if (animal instanceof Dog) {\n    Dog dog = (Dog) animal;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":102129,"reputation":7632,"user_id":274344,"accept_rate":82,"display_name":"Simeon"},"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1296566573,"creation_date":1296566573,"answer_id":4863082,"question_id":4862960,"body_markdown":"The code generates a compilation error because your **instance type** is an Animal:\r\n\r\n    Animal animal=new Animal();\r\n\r\nDowncasting is not allowed in Java for several reasons.\r\nSee [here][1] for details.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/380813/downcasting-in-java/380828#380828","title":"Explicit casting from super-class to sub-class","body":"<p>The code generates a compilation error because your <strong>instance type</strong> is an Animal:</p>\n\n<pre><code>Animal animal=new Animal();\n</code></pre>\n\n<p>Downcasting is not allowed in Java for several reasons.\nSee <a href=\"https://stackoverflow.com/questions/380813/downcasting-in-java/380828#380828\">here</a> for details.</p>\n"},{"tags":[],"owner":{"account_id":264830,"reputation":70811,"user_id":551406,"accept_rate":95,"display_name":"Michael Berry"},"down_vote_count":1,"up_vote_count":369,"is_accepted":true,"score":368,"last_activity_date":1406737009,"creation_date":1296566615,"answer_id":4863090,"question_id":4862960,"body_markdown":"By using a cast you&#39;re essentially telling the compiler &quot;trust me. I&#39;m a professional, I know what I&#39;m doing and I know that although you can&#39;t guarantee it, I&#39;m telling you that this `animal` variable is definitely going to be a dog.&quot;\r\n\r\nSince the animal isn&#39;t actually a dog (it&#39;s an animal, you could do `Animal animal = new Dog();` and it&#39;d be a dog) the VM throws an exception at runtime because you&#39;ve violated that trust (you told the compiler everything would be ok and it&#39;s not!)\r\n\r\nThe compiler is a bit smarter than just blindly accepting everything, if you try and cast objects in different inheritence hierarchies (cast a Dog to a String for example) then the compiler will throw it back at you because it knows that could never possibly work.\r\n\r\nBecause you&#39;re essentially just stopping the compiler from complaining, every time you cast it&#39;s important to check that you won&#39;t cause a `ClassCastException` by using `instanceof` in an if statement (or something to that effect.)","title":"Explicit casting from super-class to sub-class","body":"<p>By using a cast you're essentially telling the compiler \"trust me. I'm a professional, I know what I'm doing and I know that although you can't guarantee it, I'm telling you that this <code>animal</code> variable is definitely going to be a dog.\"</p>\n\n<p>Since the animal isn't actually a dog (it's an animal, you could do <code>Animal animal = new Dog();</code> and it'd be a dog) the VM throws an exception at runtime because you've violated that trust (you told the compiler everything would be ok and it's not!)</p>\n\n<p>The compiler is a bit smarter than just blindly accepting everything, if you try and cast objects in different inheritence hierarchies (cast a Dog to a String for example) then the compiler will throw it back at you because it knows that could never possibly work.</p>\n\n<p>Because you're essentially just stopping the compiler from complaining, every time you cast it's important to check that you won't cause a <code>ClassCastException</code> by using <code>instanceof</code> in an if statement (or something to that effect.)</p>\n"},{"tags":[],"owner":{"account_id":924594,"reputation":9411,"user_id":955619,"accept_rate":93,"display_name":"Caumons"},"down_vote_count":0,"up_vote_count":56,"is_accepted":false,"score":56,"last_activity_date":1329083698,"creation_date":1329083698,"answer_id":9253085,"question_id":4862960,"body_markdown":"In order to avoid this kind of ClassCastException, if you have:\r\n\r\n    class A\r\n    class B extends A\r\n\r\nYou can define a constructor in B that takes an object of A. This way we can do the &quot;cast&quot; e.g.:\r\n\r\n    public B(A a) {\r\n        super(a.arg1, a.arg2); //arg1 and arg2 must be, at least, protected in class A\r\n        // If B class has more attributes, then you would initilize them here\r\n    }","title":"Explicit casting from super-class to sub-class","body":"<p>In order to avoid this kind of ClassCastException, if you have:</p>\n\n<pre><code>class A\nclass B extends A\n</code></pre>\n\n<p>You can define a constructor in B that takes an object of A. This way we can do the \"cast\" e.g.:</p>\n\n<pre><code>public B(A a) {\n    super(a.arg1, a.arg2); //arg1 and arg2 must be, at least, protected in class A\n    // If B class has more attributes, then you would initilize them here\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2315704,"reputation":11983,"user_id":2032823,"accept_rate":84,"display_name":"Zeeshan"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1564140172,"creation_date":1403528877,"answer_id":24366779,"question_id":4862960,"body_markdown":"*Elaborating the answer given by Michael Berry.*\r\n\r\n`Dog d = (Dog)Animal; //Compiles but fails at runtime`\r\n\r\nHere you are saying to the compiler &quot;Trust me. I know `d` is really referring to a `Dog` object&quot; although it&#39;s not. \r\n**Remember compiler is forced to trust us when we do a downcast**. \r\n \r\n&gt; The compiler only knows about the declared reference type. The JVM at runtime knows what the object really is. \r\n\r\nSo when the JVM at the runtime figures out that the `Dog d` is actually referring to an `Animal` and not a `Dog` object it says.\r\n Hey... you lied to the compiler and throws a big fat `ClassCastException`.\r\n\r\nSo if you are downcasting you should use `instanceof` test to avoid screwing up.\r\n\r\n`if (animal instanceof Dog) {\r\n    Dog dog = (Dog) animal;\r\n}`\r\n\r\nNow a question comes to our mind. Why the hell compiler is allowing the downcast when eventually it is going to throw a `java.lang.ClassCastException`?\r\n\r\nThe answer is that all the compiler can do is verify that the two types are in the same inheritance tree, so depending on whatever code might have\r\n come before the downcast, it&#39;s possible that `animal` is of type `dog`. \r\n &gt; The compiler must allow things that might possible work at runtime.\r\n \r\n Consider the following code snipet:\r\n \r\n\r\n    public static void main(String[] args) \r\n    {\t\r\n    \tDog d = getMeAnAnimal();// ERROR: Type mismatch: cannot convert Animal to Dog\r\n    \tDog d = (Dog)getMeAnAnimal(); // Downcast works fine. No ClassCastException :)\r\n    \td.eat();\r\n    \r\n    }\r\n    \r\n    private static Animal getMeAnAnimal()\r\n    {\r\n    \tAnimal animal = new Dog();\r\n    \treturn animal;\r\n    }\r\n\r\n \r\n However, if the compiler is sure that the cast would not possible work, compilation will fail. I.E. If you try to cast objects in different inheritance hierarchies \r\n\r\n `String s = (String)d; // ERROR : cannot cast for Dog to String`\r\n \r\n &gt;Unlike downcasting, upcasting works implicitly because when you upcast you are implicitly restricting the number of method you can invoke,\r\n as opposite to downcasting, which implies that later on, you might want to invoke a more specific method.\r\n \r\n `Dog d = new Dog();\r\n Animal animal1 = d;\t// Works fine with no explicit cast\r\n Animal animal2 = (Animal) d; // Works fine with n explicit cast`\r\n \r\n Both of the above upcast will work fine without any exception because a Dog IS-A Animal, anithing an Animal can do, a dog can do. But it&#39;s not true vica-versa.\r\n ","title":"Explicit casting from super-class to sub-class","body":"<p><em>Elaborating the answer given by Michael Berry.</em></p>\n\n<p><code>Dog d = (Dog)Animal; //Compiles but fails at runtime</code></p>\n\n<p>Here you are saying to the compiler \"Trust me. I know <code>d</code> is really referring to a <code>Dog</code> object\" although it's not. \n<strong>Remember compiler is forced to trust us when we do a downcast</strong>. </p>\n\n<blockquote>\n  <p>The compiler only knows about the declared reference type. The JVM at runtime knows what the object really is. </p>\n</blockquote>\n\n<p>So when the JVM at the runtime figures out that the <code>Dog d</code> is actually referring to an <code>Animal</code> and not a <code>Dog</code> object it says.\n Hey... you lied to the compiler and throws a big fat <code>ClassCastException</code>.</p>\n\n<p>So if you are downcasting you should use <code>instanceof</code> test to avoid screwing up.</p>\n\n<p><code>if (animal instanceof Dog) {\n    Dog dog = (Dog) animal;\n}</code></p>\n\n<p>Now a question comes to our mind. Why the hell compiler is allowing the downcast when eventually it is going to throw a <code>java.lang.ClassCastException</code>?</p>\n\n<p>The answer is that all the compiler can do is verify that the two types are in the same inheritance tree, so depending on whatever code might have\n come before the downcast, it's possible that <code>animal</code> is of type <code>dog</code>. </p>\n\n<blockquote>\n  <p>The compiler must allow things that might possible work at runtime.</p>\n</blockquote>\n\n<p>Consider the following code snipet:</p>\n\n<pre><code>public static void main(String[] args) \n{   \n    Dog d = getMeAnAnimal();// ERROR: Type mismatch: cannot convert Animal to Dog\n    Dog d = (Dog)getMeAnAnimal(); // Downcast works fine. No ClassCastException :)\n    d.eat();\n\n}\n\nprivate static Animal getMeAnAnimal()\n{\n    Animal animal = new Dog();\n    return animal;\n}\n</code></pre>\n\n<p>However, if the compiler is sure that the cast would not possible work, compilation will fail. I.E. If you try to cast objects in different inheritance hierarchies </p>\n\n<p><code>String s = (String)d; // ERROR : cannot cast for Dog to String</code></p>\n\n<blockquote>\n  <p>Unlike downcasting, upcasting works implicitly because when you upcast you are implicitly restricting the number of method you can invoke,\n   as opposite to downcasting, which implies that later on, you might want to invoke a more specific method.</p>\n</blockquote>\n\n<p><code>Dog d = new Dog();\n Animal animal1 = d;    // Works fine with no explicit cast\n Animal animal2 = (Animal) d; // Works fine with n explicit cast</code></p>\n\n<p>Both of the above upcast will work fine without any exception because a Dog IS-A Animal, anithing an Animal can do, a dog can do. But it's not true vica-versa.</p>\n"},{"tags":[],"owner":{"account_id":4094046,"reputation":1930,"user_id":3361335,"accept_rate":15,"display_name":"fresko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1424271451,"creation_date":1424271451,"answer_id":28586625,"question_id":4862960,"body_markdown":"As explained, it is not possible.\r\nIf you want to use a method of the subclass, evaluate the possibility to add the method to the superclass (may be empty) and call from the subclasses getting the behaviour you want (subclass) thanks to polymorphism.\r\nSo when you call d.method() the call will succeed withoug casting, but in case the object will be not a dog, there will not be a problem","title":"Explicit casting from super-class to sub-class","body":"<p>As explained, it is not possible.\nIf you want to use a method of the subclass, evaluate the possibility to add the method to the superclass (may be empty) and call from the subclasses getting the behaviour you want (subclass) thanks to polymorphism.\nSo when you call d.method() the call will succeed withoug casting, but in case the object will be not a dog, there will not be a problem</p>\n"},{"tags":[],"owner":{"account_id":2233181,"reputation":3805,"user_id":1970299,"accept_rate":72,"display_name":"Mehdi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1542950684,"creation_date":1542950684,"answer_id":53441037,"question_id":4862960,"body_markdown":"To develop the answer of @Caumons:\r\n\r\n&gt; Imagine one father class has many children and there is a need to add a common\r\n&gt; field into that class. If you consider the mentioned approach, you should\r\n&gt; go to each children class one by one and refactor their constructors for the new field.\r\n&gt; therefore that solution is not a promising solution in this scenario\r\n\r\nNow take a look at this solution.\r\n\r\n&gt; A father can receive an self object from each children. Here is a father\r\n&gt; class:\r\n\r\n    public class Father {\r\n    \r\n        protected String fatherField;\r\n    \r\n        public Father(Father a){\r\n            fatherField = a.fatherField;\r\n        }\r\n\r\n        //Second constructor\r\n        public Father(String fatherField){\r\n            this.fatherField = fatherField;\r\n        }\r\n\r\n        //.... Other constructors + Getters and Setters for the Fields\r\n    }\r\n\r\n&gt; Here is our child class that should implement one of its father\r\n&gt; constructor, in this case the aforementioned constructor :\r\n\r\n    public class Child extends Father {\r\n    \r\n        protected String childField;\r\n    \r\n        public Child(Father father, String childField ) {\r\n            super(father);\r\n            this.childField = childField;\r\n        }\r\n    \r\n        //.... Other constructors + Getters and Setters for the Fields\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return String.format(&quot;Father Field is: %s\\nChild Field is: %s&quot;, fatherField, childField);\r\n        }\r\n    }\r\n\r\n\r\nNow we test out application:\r\n\r\n    public class Test {\r\n        public static void main(String[] args) {\r\n            Father fatherObj = new Father(&quot;Father String&quot;);\r\n            Child child = new Child(fatherObj, &quot;Child String&quot;);\r\n            System.out.println(child);\r\n        }\r\n    }\r\n\r\nAnd here is the result : \r\n\r\n&gt; Father Field is: Father String \r\n\r\n&gt; Child Field is: Child String\r\n\r\nNow you can easily add new fields to father class without being worried of your children codes to break;","title":"Explicit casting from super-class to sub-class","body":"<p>To develop the answer of @Caumons:</p>\n\n<blockquote>\n  <p>Imagine one father class has many children and there is a need to add a common\n  field into that class. If you consider the mentioned approach, you should\n  go to each children class one by one and refactor their constructors for the new field.\n  therefore that solution is not a promising solution in this scenario</p>\n</blockquote>\n\n<p>Now take a look at this solution.</p>\n\n<blockquote>\n  <p>A father can receive an self object from each children. Here is a father\n  class:</p>\n</blockquote>\n\n<pre><code>public class Father {\n\n    protected String fatherField;\n\n    public Father(Father a){\n        fatherField = a.fatherField;\n    }\n\n    //Second constructor\n    public Father(String fatherField){\n        this.fatherField = fatherField;\n    }\n\n    //.... Other constructors + Getters and Setters for the Fields\n}\n</code></pre>\n\n<blockquote>\n  <p>Here is our child class that should implement one of its father\n  constructor, in this case the aforementioned constructor :</p>\n</blockquote>\n\n<pre><code>public class Child extends Father {\n\n    protected String childField;\n\n    public Child(Father father, String childField ) {\n        super(father);\n        this.childField = childField;\n    }\n\n    //.... Other constructors + Getters and Setters for the Fields\n\n    @Override\n    public String toString() {\n        return String.format(\"Father Field is: %s\\nChild Field is: %s\", fatherField, childField);\n    }\n}\n</code></pre>\n\n<p>Now we test out application:</p>\n\n<pre><code>public class Test {\n    public static void main(String[] args) {\n        Father fatherObj = new Father(\"Father String\");\n        Child child = new Child(fatherObj, \"Child String\");\n        System.out.println(child);\n    }\n}\n</code></pre>\n\n<p>And here is the result : </p>\n\n<blockquote>\n  <p>Father Field is: Father String </p>\n  \n  <p>Child Field is: Child String</p>\n</blockquote>\n\n<p>Now you can easily add new fields to father class without being worried of your children codes to break;</p>\n"},{"tags":[],"owner":{"account_id":2109512,"reputation":310,"user_id":1875069,"display_name":"S01ds"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1648121214,"creation_date":1648121214,"answer_id":71601642,"question_id":4862960,"body_markdown":"As it was said before, you can&#39;t cast from superclass to subclass unless your object was instantiated from the subclass in the first place.\r\n\r\nHowever, there are workarounds.\r\n\r\nAll you need is a set of constructors and a convenience method that will either cast your object to Dog, or return a new Dog object with the same Animal properties.\r\n\r\nBelow is an example that does just that:\r\n\r\n\tpublic class Animal {\r\n\r\n\t    public Animal() {}\r\n\r\n\t    public Animal(Animal in) {\r\n\t    \t// Assign animal properties\r\n\t    }\r\n\r\n\t    public Dog toDog() {\r\n\t        if (this instanceof Dog)\r\n\t            return (Dog) this;\r\n\t        return new Dog(this);\r\n\t    }\r\n\r\n\t}\r\n\r\n\tpublic class Dog extends Animal {\r\n\r\n\t    public Dog(Animal in) {\r\n\t    \tsuper(in);\r\n\t    }\r\n\r\n\t    public void main(String[] args) {\r\n\t        Animal animal = new Animal();\r\n\t        Dog dog = animal.toDog();\r\n\t    }\r\n\r\n\t}","title":"Explicit casting from super-class to sub-class","body":"<p>As it was said before, you can't cast from superclass to subclass unless your object was instantiated from the subclass in the first place.</p>\n<p>However, there are workarounds.</p>\n<p>All you need is a set of constructors and a convenience method that will either cast your object to Dog, or return a new Dog object with the same Animal properties.</p>\n<p>Below is an example that does just that:</p>\n<pre><code>public class Animal {\n\n    public Animal() {}\n\n    public Animal(Animal in) {\n        // Assign animal properties\n    }\n\n    public Dog toDog() {\n        if (this instanceof Dog)\n            return (Dog) this;\n        return new Dog(this);\n    }\n\n}\n\npublic class Dog extends Animal {\n\n    public Dog(Animal in) {\n        super(in);\n    }\n\n    public void main(String[] args) {\n        Animal animal = new Animal();\n        Dog dog = animal.toDog();\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":287330,"reputation":5349,"user_id":1470886,"accept_rate":41,"display_name":"saravanan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":287336,"favorite_count":0,"down_vote_count":2,"up_vote_count":187,"accepted_answer_id":4863090,"answer_count":8,"score":185,"last_activity_date":1672922508,"creation_date":1296565860,"question_id":4862960,"body_markdown":"    public class Animal {\r\n        public void eat() {}\r\n    }\r\n\r\n    public class Dog extends Animal {\r\n        public void eat() {}\r\n\r\n        public void main(String[] args) {\r\n            Animal animal = new Animal();\r\n            Dog dog = (Dog) animal;\r\n        }\r\n    }\r\n\r\nThe assignment `Dog dog = (Dog) animal;` does not generate a compilation error, but at runtime it generates a `ClassCastException`. Why can&#39;t the compiler detect this error?\r\n","title":"Explicit casting from super-class to sub-class","body":"<pre><code>public class Animal {\n    public void eat() {}\n}\n\npublic class Dog extends Animal {\n    public void eat() {}\n\n    public void main(String[] args) {\n        Animal animal = new Animal();\n        Dog dog = (Dog) animal;\n    }\n}\n</code></pre>\n\n<p>The assignment <code>Dog dog = (Dog) animal;</code> does not generate a compilation error, but at runtime it generates a <code>ClassCastException</code>. Why can't the compiler detect this error?</p>\n"},{"tags":["java","android","sockets","xmpp","asmack"],"answers":[{"tags":[],"owner":{"account_id":1133306,"reputation":8320,"user_id":1118886,"accept_rate":68,"display_name":"Sheraz Ahmad Khilji"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1394617057,"creation_date":1394617057,"answer_id":22347294,"question_id":22344187,"body_markdown":"I think the problem is that your providers aren&#39;t registered. Please take a look at [this][1]. On Android you have to register the providers manually before you form an XMPP connection. Copy the class below into your project\r\n\r\n\r\n    import org.jivesoftware.smack.provider.PrivacyProvider;\r\n    import org.jivesoftware.smack.provider.ProviderManager;\r\n    import org.jivesoftware.smackx.GroupChatInvitation;\r\n    import org.jivesoftware.smackx.PrivateDataManager;\r\n    import org.jivesoftware.smackx.packet.ChatStateExtension;\r\n    import org.jivesoftware.smackx.packet.LastActivity;\r\n    import org.jivesoftware.smackx.packet.OfflineMessageInfo;\r\n    import org.jivesoftware.smackx.packet.OfflineMessageRequest;\r\n    import org.jivesoftware.smackx.packet.SharedGroupsInfo;\r\n    import org.jivesoftware.smackx.provider.AdHocCommandDataProvider;\r\n    import org.jivesoftware.smackx.provider.BytestreamsProvider;\r\n    import org.jivesoftware.smackx.provider.DataFormProvider;\r\n    import org.jivesoftware.smackx.provider.DelayInformationProvider;\r\n    import org.jivesoftware.smackx.provider.DiscoverInfoProvider;\r\n    import org.jivesoftware.smackx.provider.DiscoverItemsProvider;\r\n    import org.jivesoftware.smackx.provider.MUCAdminProvider;\r\n    import org.jivesoftware.smackx.provider.MUCOwnerProvider;\r\n    import org.jivesoftware.smackx.provider.MUCUserProvider;\r\n    import org.jivesoftware.smackx.provider.MessageEventProvider;\r\n    import org.jivesoftware.smackx.provider.MultipleAddressesProvider;\r\n    import org.jivesoftware.smackx.provider.RosterExchangeProvider;\r\n    import org.jivesoftware.smackx.provider.StreamInitiationProvider;\r\n    import org.jivesoftware.smackx.provider.VCardProvider;\r\n    import org.jivesoftware.smackx.provider.XHTMLExtensionProvider;\r\n    import org.jivesoftware.smackx.search.UserSearch;\r\n    \r\n    import android.util.Log;\r\n    \r\n    public class ServiceProviders {\r\n    \tpublic static void Register_Providers(ProviderManager pm) {\r\n    \r\n    \t\t// Private Data Storage\r\n    \t\tpm.addIQProvider(&quot;query&quot;, &quot;jabber:iq:private&quot;,\r\n    \t\t\t\tnew PrivateDataManager.PrivateDataIQProvider());\r\n    \r\n    \t\t// Time\r\n    \t\ttry {\r\n    \t\t\tpm.addIQProvider(&quot;query&quot;, &quot;jabber:iq:time&quot;,\r\n    \t\t\t\t\tClass.forName(&quot;org.jivesoftware.smackx.packet.Time&quot;));\r\n    \t\t} catch (ClassNotFoundException e) {\r\n    \t\t\tLog.w(&quot;TestClient&quot;,\r\n    \t\t\t\t\t&quot;Can&#39;t load class for org.jivesoftware.smackx.packet.Time&quot;);\r\n    \t\t}\r\n    \r\n    \t\t// Roster Exchange\r\n    \t\tpm.addExtensionProvider(&quot;x&quot;, &quot;jabber:x:roster&quot;,\r\n    \t\t\t\tnew RosterExchangeProvider());\r\n    \r\n    \t\t// Message Events\r\n    \t\tpm.addExtensionProvider(&quot;x&quot;, &quot;jabber:x:event&quot;,\r\n    \t\t\t\tnew MessageEventProvider());\r\n    \r\n    \t\t// Chat State\r\n    \t\tpm.addExtensionProvider(&quot;active&quot;,\r\n    \t\t\t\t&quot;http://jabber.org/protocol/chatstates&quot;,\r\n    \t\t\t\tnew ChatStateExtension.Provider());\r\n    \r\n    \t\tpm.addExtensionProvider(&quot;composing&quot;,\r\n    \t\t\t\t&quot;http://jabber.org/protocol/chatstates&quot;,\r\n    \t\t\t\tnew ChatStateExtension.Provider());\r\n    \r\n    \t\tpm.addExtensionProvider(&quot;paused&quot;,\r\n    \t\t\t\t&quot;http://jabber.org/protocol/chatstates&quot;,\r\n    \t\t\t\tnew ChatStateExtension.Provider());\r\n    \r\n    \t\tpm.addExtensionProvider(&quot;inactive&quot;,\r\n    \t\t\t\t&quot;http://jabber.org/protocol/chatstates&quot;,\r\n    \t\t\t\tnew ChatStateExtension.Provider());\r\n    \r\n    \t\tpm.addExtensionProvider(&quot;gone&quot;,\r\n    \t\t\t\t&quot;http://jabber.org/protocol/chatstates&quot;,\r\n    \t\t\t\tnew ChatStateExtension.Provider());\r\n    \r\n    \t\t// XHTML\r\n    \t\tpm.addExtensionProvider(&quot;html&quot;, &quot;http://jabber.org/protocol/xhtml-im&quot;,\r\n    \t\t\t\tnew XHTMLExtensionProvider());\r\n    \r\n    \t\t// Group Chat Invitations\r\n    \t\tpm.addExtensionProvider(&quot;x&quot;, &quot;jabber:x:conference&quot;,\r\n    \t\t\t\tnew GroupChatInvitation.Provider());\r\n    \r\n    \t\t// Service Discovery # Items\r\n    \t\tpm.addIQProvider(&quot;query&quot;, &quot;http://jabber.org/protocol/disco#items&quot;,\r\n    \t\t\t\tnew DiscoverItemsProvider());\r\n    \r\n    \t\t// Service Discovery # Info\r\n    \t\tpm.addIQProvider(&quot;query&quot;, &quot;http://jabber.org/protocol/disco#info&quot;,\r\n    \t\t\t\tnew DiscoverInfoProvider());\r\n    \r\n    \t\t// Data Forms\r\n    \t\tpm.addExtensionProvider(&quot;x&quot;, &quot;jabber:x:data&quot;, new DataFormProvider());\r\n    \r\n    \t\t// MUC User\r\n    \t\tpm.addExtensionProvider(&quot;x&quot;, &quot;http://jabber.org/protocol/muc#user&quot;,\r\n    \t\t\t\tnew MUCUserProvider());\r\n    \r\n    \t\t// MUC Admin\r\n    \t\tpm.addIQProvider(&quot;query&quot;, &quot;http://jabber.org/protocol/muc#admin&quot;,\r\n    \t\t\t\tnew MUCAdminProvider());\r\n    \r\n    \t\t// MUC Owner\r\n    \t\tpm.addIQProvider(&quot;query&quot;, &quot;http://jabber.org/protocol/muc#owner&quot;,\r\n    \t\t\t\tnew MUCOwnerProvider());\r\n    \r\n    \t\t// Delayed Delivery\r\n    \t\tpm.addExtensionProvider(&quot;x&quot;, &quot;jabber:x:delay&quot;,\r\n    \t\t\t\tnew DelayInformationProvider());\r\n    \r\n    \t\t// Version\r\n    \t\ttry {\r\n    \t\t\tpm.addIQProvider(&quot;query&quot;, &quot;jabber:iq:version&quot;,\r\n    \t\t\t\t\tClass.forName(&quot;org.jivesoftware.smackx.packet.Version&quot;));\r\n    \t\t} catch (ClassNotFoundException e) {\r\n    \t\t\t// Not sure what&#39;s happening here.\r\n    \t\t}\r\n    \r\n    \t\t// VCard\r\n    \t\tpm.addIQProvider(&quot;vCard&quot;, &quot;vcard-temp&quot;, new VCardProvider());\r\n    \r\n    \t\t// Offline Message Requests\r\n    \t\tpm.addIQProvider(&quot;offline&quot;, &quot;http://jabber.org/protocol/offline&quot;,\r\n    \t\t\t\tnew OfflineMessageRequest.Provider());\r\n    \r\n    \t\t// Offline Message Indicator\r\n    \t\tpm.addExtensionProvider(&quot;offline&quot;,\r\n    \t\t\t\t&quot;http://jabber.org/protocol/offline&quot;,\r\n    \t\t\t\tnew OfflineMessageInfo.Provider());\r\n    \r\n    \t\t// Last Activity\r\n    \t\tpm.addIQProvider(&quot;query&quot;, &quot;jabber:iq:last&quot;, new LastActivity.Provider());\r\n    \r\n    \t\t// User Search\r\n    \t\tpm.addIQProvider(&quot;query&quot;, &quot;jabber:iq:search&quot;, new UserSearch.Provider());\r\n    \r\n    \t\t// SharedGroupsInfo\r\n    \t\tpm.addIQProvider(&quot;sharedgroup&quot;,\r\n    \t\t\t\t&quot;http://www.jivesoftware.org/protocol/sharedgroup&quot;,\r\n    \t\t\t\tnew SharedGroupsInfo.Provider());\r\n    \r\n    \t\t// JEP-33: Extended Stanza Addressing\r\n    \t\tpm.addExtensionProvider(&quot;addresses&quot;,\r\n    \t\t\t\t&quot;http://jabber.org/protocol/address&quot;,\r\n    \t\t\t\tnew MultipleAddressesProvider());\r\n    \r\n    \t\t// FileTransfer\r\n    \t\tpm.addIQProvider(&quot;si&quot;, &quot;http://jabber.org/protocol/si&quot;,\r\n    \t\t\t\tnew StreamInitiationProvider());\r\n    \r\n    \t\tpm.addIQProvider(&quot;query&quot;, &quot;http://jabber.org/protocol/bytestreams&quot;,\r\n    \t\t\t\tnew BytestreamsProvider());\r\n    \r\n    \t\t// Privacy\r\n    \t\tpm.addIQProvider(&quot;query&quot;, &quot;jabber:iq:privacy&quot;, new PrivacyProvider());\r\n    \r\n    \t\tpm.addIQProvider(&quot;command&quot;, &quot;http://jabber.org/protocol/commands&quot;,\r\n    \t\t\t\tnew AdHocCommandDataProvider());\r\n    \t\tpm.addExtensionProvider(&quot;malformed-action&quot;,\r\n    \t\t\t\t&quot;http://jabber.org/protocol/commands&quot;,\r\n    \t\t\t\tnew AdHocCommandDataProvider.MalformedActionError());\r\n    \t\tpm.addExtensionProvider(&quot;bad-locale&quot;,\r\n    \t\t\t\t&quot;http://jabber.org/protocol/commands&quot;,\r\n    \t\t\t\tnew AdHocCommandDataProvider.BadLocaleError());\r\n    \t\tpm.addExtensionProvider(&quot;bad-payload&quot;,\r\n    \t\t\t\t&quot;http://jabber.org/protocol/commands&quot;,\r\n    \t\t\t\tnew AdHocCommandDataProvider.BadPayloadError());\r\n    \t\tpm.addExtensionProvider(&quot;bad-sessionid&quot;,\r\n    \t\t\t\t&quot;http://jabber.org/protocol/commands&quot;,\r\n    \t\t\t\tnew AdHocCommandDataProvider.BadSessionIDError());\r\n    \t\tpm.addExtensionProvider(&quot;session-expired&quot;,\r\n    \t\t\t\t&quot;http://jabber.org/protocol/commands&quot;,\r\n    \t\t\t\tnew AdHocCommandDataProvider.SessionExpiredError());\r\n    \r\n    \t\tpm.addIQProvider(&quot;query&quot;, &quot;http://jabber.org/protocol/disco#info&quot;,\r\n    \t\t\t\tnew DiscoverInfoProvider());\r\n    \t\tpm.addExtensionProvider(&quot;x&quot;, &quot;jabber:x:data&quot;, new DataFormProvider());\r\n    \t\t// pm.addExtensionProvider(&quot;status &quot;,&quot;&quot;, new XMLPlayerList());\r\n    \r\n    \t}\r\n    }\r\n\r\n\r\nCall this method like this\r\n\r\n    ServiceProviders.Register_Providers(ProviderManager.getInstance());\r\n\r\nSo try calling this method at the start of your app or before forming a connection.\r\n\r\nHope this helps\r\n\r\n\r\n  [1]: http://community.igniterealtime.org/thread/31118","title":"Send and Receive IQ XMPP ASMACK Android","body":"<p>I think the problem is that your providers aren't registered. Please take a look at <a href=\"http://community.igniterealtime.org/thread/31118\" rel=\"nofollow\">this</a>. On Android you have to register the providers manually before you form an XMPP connection. Copy the class below into your project</p>\n\n<pre><code>import org.jivesoftware.smack.provider.PrivacyProvider;\nimport org.jivesoftware.smack.provider.ProviderManager;\nimport org.jivesoftware.smackx.GroupChatInvitation;\nimport org.jivesoftware.smackx.PrivateDataManager;\nimport org.jivesoftware.smackx.packet.ChatStateExtension;\nimport org.jivesoftware.smackx.packet.LastActivity;\nimport org.jivesoftware.smackx.packet.OfflineMessageInfo;\nimport org.jivesoftware.smackx.packet.OfflineMessageRequest;\nimport org.jivesoftware.smackx.packet.SharedGroupsInfo;\nimport org.jivesoftware.smackx.provider.AdHocCommandDataProvider;\nimport org.jivesoftware.smackx.provider.BytestreamsProvider;\nimport org.jivesoftware.smackx.provider.DataFormProvider;\nimport org.jivesoftware.smackx.provider.DelayInformationProvider;\nimport org.jivesoftware.smackx.provider.DiscoverInfoProvider;\nimport org.jivesoftware.smackx.provider.DiscoverItemsProvider;\nimport org.jivesoftware.smackx.provider.MUCAdminProvider;\nimport org.jivesoftware.smackx.provider.MUCOwnerProvider;\nimport org.jivesoftware.smackx.provider.MUCUserProvider;\nimport org.jivesoftware.smackx.provider.MessageEventProvider;\nimport org.jivesoftware.smackx.provider.MultipleAddressesProvider;\nimport org.jivesoftware.smackx.provider.RosterExchangeProvider;\nimport org.jivesoftware.smackx.provider.StreamInitiationProvider;\nimport org.jivesoftware.smackx.provider.VCardProvider;\nimport org.jivesoftware.smackx.provider.XHTMLExtensionProvider;\nimport org.jivesoftware.smackx.search.UserSearch;\n\nimport android.util.Log;\n\npublic class ServiceProviders {\n    public static void Register_Providers(ProviderManager pm) {\n\n        // Private Data Storage\n        pm.addIQProvider(\"query\", \"jabber:iq:private\",\n                new PrivateDataManager.PrivateDataIQProvider());\n\n        // Time\n        try {\n            pm.addIQProvider(\"query\", \"jabber:iq:time\",\n                    Class.forName(\"org.jivesoftware.smackx.packet.Time\"));\n        } catch (ClassNotFoundException e) {\n            Log.w(\"TestClient\",\n                    \"Can't load class for org.jivesoftware.smackx.packet.Time\");\n        }\n\n        // Roster Exchange\n        pm.addExtensionProvider(\"x\", \"jabber:x:roster\",\n                new RosterExchangeProvider());\n\n        // Message Events\n        pm.addExtensionProvider(\"x\", \"jabber:x:event\",\n                new MessageEventProvider());\n\n        // Chat State\n        pm.addExtensionProvider(\"active\",\n                \"http://jabber.org/protocol/chatstates\",\n                new ChatStateExtension.Provider());\n\n        pm.addExtensionProvider(\"composing\",\n                \"http://jabber.org/protocol/chatstates\",\n                new ChatStateExtension.Provider());\n\n        pm.addExtensionProvider(\"paused\",\n                \"http://jabber.org/protocol/chatstates\",\n                new ChatStateExtension.Provider());\n\n        pm.addExtensionProvider(\"inactive\",\n                \"http://jabber.org/protocol/chatstates\",\n                new ChatStateExtension.Provider());\n\n        pm.addExtensionProvider(\"gone\",\n                \"http://jabber.org/protocol/chatstates\",\n                new ChatStateExtension.Provider());\n\n        // XHTML\n        pm.addExtensionProvider(\"html\", \"http://jabber.org/protocol/xhtml-im\",\n                new XHTMLExtensionProvider());\n\n        // Group Chat Invitations\n        pm.addExtensionProvider(\"x\", \"jabber:x:conference\",\n                new GroupChatInvitation.Provider());\n\n        // Service Discovery # Items\n        pm.addIQProvider(\"query\", \"http://jabber.org/protocol/disco#items\",\n                new DiscoverItemsProvider());\n\n        // Service Discovery # Info\n        pm.addIQProvider(\"query\", \"http://jabber.org/protocol/disco#info\",\n                new DiscoverInfoProvider());\n\n        // Data Forms\n        pm.addExtensionProvider(\"x\", \"jabber:x:data\", new DataFormProvider());\n\n        // MUC User\n        pm.addExtensionProvider(\"x\", \"http://jabber.org/protocol/muc#user\",\n                new MUCUserProvider());\n\n        // MUC Admin\n        pm.addIQProvider(\"query\", \"http://jabber.org/protocol/muc#admin\",\n                new MUCAdminProvider());\n\n        // MUC Owner\n        pm.addIQProvider(\"query\", \"http://jabber.org/protocol/muc#owner\",\n                new MUCOwnerProvider());\n\n        // Delayed Delivery\n        pm.addExtensionProvider(\"x\", \"jabber:x:delay\",\n                new DelayInformationProvider());\n\n        // Version\n        try {\n            pm.addIQProvider(\"query\", \"jabber:iq:version\",\n                    Class.forName(\"org.jivesoftware.smackx.packet.Version\"));\n        } catch (ClassNotFoundException e) {\n            // Not sure what's happening here.\n        }\n\n        // VCard\n        pm.addIQProvider(\"vCard\", \"vcard-temp\", new VCardProvider());\n\n        // Offline Message Requests\n        pm.addIQProvider(\"offline\", \"http://jabber.org/protocol/offline\",\n                new OfflineMessageRequest.Provider());\n\n        // Offline Message Indicator\n        pm.addExtensionProvider(\"offline\",\n                \"http://jabber.org/protocol/offline\",\n                new OfflineMessageInfo.Provider());\n\n        // Last Activity\n        pm.addIQProvider(\"query\", \"jabber:iq:last\", new LastActivity.Provider());\n\n        // User Search\n        pm.addIQProvider(\"query\", \"jabber:iq:search\", new UserSearch.Provider());\n\n        // SharedGroupsInfo\n        pm.addIQProvider(\"sharedgroup\",\n                \"http://www.jivesoftware.org/protocol/sharedgroup\",\n                new SharedGroupsInfo.Provider());\n\n        // JEP-33: Extended Stanza Addressing\n        pm.addExtensionProvider(\"addresses\",\n                \"http://jabber.org/protocol/address\",\n                new MultipleAddressesProvider());\n\n        // FileTransfer\n        pm.addIQProvider(\"si\", \"http://jabber.org/protocol/si\",\n                new StreamInitiationProvider());\n\n        pm.addIQProvider(\"query\", \"http://jabber.org/protocol/bytestreams\",\n                new BytestreamsProvider());\n\n        // Privacy\n        pm.addIQProvider(\"query\", \"jabber:iq:privacy\", new PrivacyProvider());\n\n        pm.addIQProvider(\"command\", \"http://jabber.org/protocol/commands\",\n                new AdHocCommandDataProvider());\n        pm.addExtensionProvider(\"malformed-action\",\n                \"http://jabber.org/protocol/commands\",\n                new AdHocCommandDataProvider.MalformedActionError());\n        pm.addExtensionProvider(\"bad-locale\",\n                \"http://jabber.org/protocol/commands\",\n                new AdHocCommandDataProvider.BadLocaleError());\n        pm.addExtensionProvider(\"bad-payload\",\n                \"http://jabber.org/protocol/commands\",\n                new AdHocCommandDataProvider.BadPayloadError());\n        pm.addExtensionProvider(\"bad-sessionid\",\n                \"http://jabber.org/protocol/commands\",\n                new AdHocCommandDataProvider.BadSessionIDError());\n        pm.addExtensionProvider(\"session-expired\",\n                \"http://jabber.org/protocol/commands\",\n                new AdHocCommandDataProvider.SessionExpiredError());\n\n        pm.addIQProvider(\"query\", \"http://jabber.org/protocol/disco#info\",\n                new DiscoverInfoProvider());\n        pm.addExtensionProvider(\"x\", \"jabber:x:data\", new DataFormProvider());\n        // pm.addExtensionProvider(\"status \",\"\", new XMLPlayerList());\n\n    }\n}\n</code></pre>\n\n<p>Call this method like this</p>\n\n<pre><code>ServiceProviders.Register_Providers(ProviderManager.getInstance());\n</code></pre>\n\n<p>So try calling this method at the start of your app or before forming a connection.</p>\n\n<p>Hope this helps</p>\n"},{"tags":[],"owner":{"account_id":11388548,"reputation":1,"user_id":8349438,"display_name":"Kevin Chen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672921896,"creation_date":1530099050,"answer_id":51061708,"question_id":22344187,"body_markdown":"For sent out, you actually just need to construct the xml string and return in `getChildElementXML()`, no other setup needed.\r\n\r\nAs mentioned in this blog post: https://billynyh.github.io/blog/2014/09/28/android-xmpp-dev/\r\n\r\n&gt; For receiving IQ response, first you need to create IQProvider and add\r\n&gt; to ProviderManager, matching the xmlns in the query object. The\r\n&gt; IQProvider is used to convert the response packet to your customized\r\n&gt; IQ object. Then you need to extends PacketListener, and when you\r\n&gt; create the connection object, add the listener to it, with a\r\n&gt; PacketTypeFilter to match your IQ class. With both provider and\r\n&gt; listener setup correctly, you should be able to receive the response\r\n&gt; of the IQ.","title":"Send and Receive IQ XMPP ASMACK Android","body":"<p>For sent out, you actually just need to construct the xml string and return in <code>getChildElementXML()</code>, no other setup needed.</p>\n<p>As mentioned in this blog post: <a href=\"https://billynyh.github.io/blog/2014/09/28/android-xmpp-dev/\" rel=\"nofollow noreferrer\">https://billynyh.github.io/blog/2014/09/28/android-xmpp-dev/</a></p>\n<blockquote>\n<p>For receiving IQ response, first you need to create IQProvider and add\nto ProviderManager, matching the xmlns in the query object. The\nIQProvider is used to convert the response packet to your customized\nIQ object. Then you need to extends PacketListener, and when you\ncreate the connection object, add the listener to it, with a\nPacketTypeFilter to match your IQ class. With both provider and\nlistener setup correctly, you should be able to receive the response\nof the IQ.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":13856402,"reputation":31,"user_id":10003092,"display_name":"Z. Mei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530277943,"creation_date":1530277943,"answer_id":51102588,"question_id":22344187,"body_markdown":"When sending a self-define message, for example,\r\n\r\n    &lt;iq id=&#39;123&#39; type=&#39;get&#39; from=&#39;client@xmpp/B&#39; to=&#39;client2@xmpp/s2&#39;&gt;&lt;req var=&#39;read&#39;&gt;&lt;attr var=&#39;temprature&#39;/&gt;&lt;/req&gt;&lt;/iq&gt;\r\n\r\nYou need to define your own IQ and send this IQ:\r\n\r\n\r\n    public class MyIQ extends IQ {\r\n            @Override\r\n            public String getChildElementXML() {\r\n                StringBuilder stringBuilder = new StringBuilder();\r\n                stringBuilder.append(&quot;&amp;lt;req var=&#39;read&#39;&amp;gt;&amp;lt; attr var=&#39;temprature&#39;/&amp;gt;&amp;lt;/req&amp;gt;&quot;);\r\n                return stringBuilder.toString();\r\n            }\r\n        }\r\n       \r\n        MyIQ packet = new MyIQ();\r\n        packet.setType(IQ.Type.GET);\r\n        packet.setFrom(&quot;client@xmpp/B&quot;);\r\n        packet.setTo(&quot;client2@xmpp/s2&quot;);\r\n        xmppConnection.sendPacket(packet);\r\n\r\n ","title":"Send and Receive IQ XMPP ASMACK Android","body":"<p>When sending a self-define message, for example,</p>\n\n<pre><code>&lt;iq id='123' type='get' from='client@xmpp/B' to='client2@xmpp/s2'&gt;&lt;req var='read'&gt;&lt;attr var='temprature'/&gt;&lt;/req&gt;&lt;/iq&gt;\n</code></pre>\n\n<p>You need to define your own IQ and send this IQ:</p>\n\n<pre><code>public class MyIQ extends IQ {\n        @Override\n        public String getChildElementXML() {\n            StringBuilder stringBuilder = new StringBuilder();\n            stringBuilder.append(\"&amp;lt;req var='read'&amp;gt;&amp;lt; attr var='temprature'/&amp;gt;&amp;lt;/req&amp;gt;\");\n            return stringBuilder.toString();\n        }\n    }\n\n    MyIQ packet = new MyIQ();\n    packet.setType(IQ.Type.GET);\n    packet.setFrom(\"client@xmpp/B\");\n    packet.setTo(\"client2@xmpp/s2\");\n    xmppConnection.sendPacket(packet);\n</code></pre>\n"}],"owner":{"account_id":3324280,"reputation":2469,"user_id":2794682,"accept_rate":44,"display_name":"Hassaan Rabbani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6187,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"accepted_answer_id":22347294,"answer_count":3,"score":9,"last_activity_date":1672921896,"creation_date":1394607693,"question_id":22344187,"body_markdown":"**Background:**\r\n\r\nI have been able to implement one to one chatting through `XMPP` in android using `asmack` library. I am able to send presence to the server as well. I am using `OpenFire` server for my Chat based application. \r\n\r\n**Problem:**\r\nI am using `connection.addPacketListener(new PacketListener()`  to receive message and IQ packets, for message packets I have classified it like this\r\n\r\n    PacketFilter Chatfilter = new MessageTypeFilter(Message.Type.chat);\r\n    connection.addPacketListener(new PacketListener() {\r\n            public void processPacket(Packet packet) {\r\n                Message message = (Message) packet;\r\n                if (message.getBody() != null) {\r\n                    String fromName = StringUtils.parseBareAddress(message.getFrom());\r\n                    Log.i(&quot;XMPPClient&quot;, &quot;Got text [&quot; + message.getBody() + &quot;] from [&quot; + fromName + &quot;]&quot;);\r\n                    messages.add(fromName + &quot;:&quot;);\r\n                    m1=message.getBody();\r\n                    messages.add(message.getBody());\r\n                    // Add the incoming message to the list view\r\n                    /* mHandler.post(new Runnable() {\r\n                    public void run() {\r\n                    setListAdapter();\r\n                    recieve.setText(m1);\r\n                    }\r\n                    });*/\r\n                }\r\n            }\r\n    }, Chatfilter);\r\n\r\nAnd it is working all fine, but **problem arises when** I use something similar to receive IQ packets\r\n\r\nHere is the code which I am using to receive IQ PACKETS\r\n\r\n    PacketFilter Iqfilter = new IQTypeFilter(IQ.Type.RESULT);\r\n    connection.addPacketListener(new PacketListener() {\r\n        public void processPacket(Packet packet) {\r\n            IQ iq = (IQ) packet;\r\n            String fromName = StringUtils.parseBareAddress(iq.getFrom());\r\n            Log.i(&quot;XMPPClient&quot;, &quot;Got text [&quot; + iq.toString() + &quot;] from [&quot; + fromName + &quot;]&quot;);\r\n            m1=iq.getFrom();\r\n            mHandler.post(new Runnable() {\r\n                public void run() {\r\n                    setListAdapter();\r\n                    recieve.setText(m1);\r\n                }\r\n            });\r\n        }\r\n    }, Iqfilter);\r\n\r\nI am sending a simple `disco#items` query and it does not respond, even it does not enter into the function, I have tried to debug it as well, I have also tried to send simple `PING` command but it does not respond to it either. **what am I missing here?**\r\n\r\nSecondly I am facing problems in sending IQ packets to the server as well or to some other client as well. I read somewhere that I should do it like this. but it does not work.\r\n\r\n    final IQ iq = new IQ() {\r\n            \tpublic String getChildElementXML() { \r\n            \treturn &quot;&lt;query xmlns=&#39;http://jabber.org/protocol/disco#info&#39;/&gt;&quot;; // here is your query\r\n            \t//this returns &quot;&lt;iq type=&#39;get&#39; from=&#39;User@YourServer/Resource&#39; id=&#39;info1&#39;&gt; &lt;query xmlns=&#39;http://jabber.org/protocol/disco#info&#39;/&gt;&lt;/iq&gt;&quot;;\r\n            \t }};\r\n            \t// set the type\r\n            \tiq.setType(IQ.Type.GET);\r\n\r\n            \t// send the request\r\n            \tconnection.sendPacket(iq);\r\n\r\nThe confusing thing is when I read the documentation of XMPP and asmack for android it was written that to send an IQ you need to have receiver&#39;s address as well. but in this code we are not setting up any receiver.\r\n\r\nThere is much less information available on internet for XMPP asmack and Android. ","title":"Send and Receive IQ XMPP ASMACK Android","body":"<p><strong>Background:</strong></p>\n\n<p>I have been able to implement one to one chatting through <code>XMPP</code> in android using <code>asmack</code> library. I am able to send presence to the server as well. I am using <code>OpenFire</code> server for my Chat based application. </p>\n\n<p><strong>Problem:</strong>\nI am using <code>connection.addPacketListener(new PacketListener()</code>  to receive message and IQ packets, for message packets I have classified it like this</p>\n\n<pre><code>PacketFilter Chatfilter = new MessageTypeFilter(Message.Type.chat);\nconnection.addPacketListener(new PacketListener() {\n        public void processPacket(Packet packet) {\n            Message message = (Message) packet;\n            if (message.getBody() != null) {\n                String fromName = StringUtils.parseBareAddress(message.getFrom());\n                Log.i(\"XMPPClient\", \"Got text [\" + message.getBody() + \"] from [\" + fromName + \"]\");\n                messages.add(fromName + \":\");\n                m1=message.getBody();\n                messages.add(message.getBody());\n                // Add the incoming message to the list view\n                /* mHandler.post(new Runnable() {\n                public void run() {\n                setListAdapter();\n                recieve.setText(m1);\n                }\n                });*/\n            }\n        }\n}, Chatfilter);\n</code></pre>\n\n<p>And it is working all fine, but <strong>problem arises when</strong> I use something similar to receive IQ packets</p>\n\n<p>Here is the code which I am using to receive IQ PACKETS</p>\n\n<pre><code>PacketFilter Iqfilter = new IQTypeFilter(IQ.Type.RESULT);\nconnection.addPacketListener(new PacketListener() {\n    public void processPacket(Packet packet) {\n        IQ iq = (IQ) packet;\n        String fromName = StringUtils.parseBareAddress(iq.getFrom());\n        Log.i(\"XMPPClient\", \"Got text [\" + iq.toString() + \"] from [\" + fromName + \"]\");\n        m1=iq.getFrom();\n        mHandler.post(new Runnable() {\n            public void run() {\n                setListAdapter();\n                recieve.setText(m1);\n            }\n        });\n    }\n}, Iqfilter);\n</code></pre>\n\n<p>I am sending a simple <code>disco#items</code> query and it does not respond, even it does not enter into the function, I have tried to debug it as well, I have also tried to send simple <code>PING</code> command but it does not respond to it either. <strong>what am I missing here?</strong></p>\n\n<p>Secondly I am facing problems in sending IQ packets to the server as well or to some other client as well. I read somewhere that I should do it like this. but it does not work.</p>\n\n<pre><code>final IQ iq = new IQ() {\n            public String getChildElementXML() { \n            return \"&lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;\"; // here is your query\n            //this returns \"&lt;iq type='get' from='User@YourServer/Resource' id='info1'&gt; &lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;&lt;/iq&gt;\";\n             }};\n            // set the type\n            iq.setType(IQ.Type.GET);\n\n            // send the request\n            connection.sendPacket(iq);\n</code></pre>\n\n<p>The confusing thing is when I read the documentation of XMPP and asmack for android it was written that to send an IQ you need to have receiver's address as well. but in this code we are not setting up any receiver.</p>\n\n<p>There is much less information available on internet for XMPP asmack and Android. </p>\n"},{"tags":["java","maven","refactoring"],"comments":[{"owner":{"account_id":1042328,"reputation":7972,"user_id":1048093,"accept_rate":75,"display_name":"wemu"},"score":1,"creation_date":1383754713,"post_id":19816278,"comment_id":29464346,"body_markdown":"I&#39;m not aware of a tool or a maven plugin that does this. I usually use the IDE and its search and replace features. Just be careful if you use the groupId for several artifactId&#39;s.","body":"I&#39;m not aware of a tool or a maven plugin that does this. I usually use the IDE and its search and replace features. Just be careful if you use the groupId for several artifactId&#39;s."},{"owner":{"account_id":3381550,"reputation":1165,"user_id":2838491,"accept_rate":29,"display_name":"joao cenoura"},"score":3,"creation_date":1383757891,"post_id":19816278,"comment_id":29466370,"body_markdown":"I&#39;ve ended up using sed: `find ~/project/trunk -name &quot;pom.xml&quot; | xargs sed -i &#39;s/&lt;groupId&gt;org.old.groupId&lt;\\/groupId&gt;/&lt;groupId&gt;org.new.groupId&lt;\\/groupId&gt;/g&#39;`. It worked like a charm, but still I was curious if there was a mojo outwhere.","body":"I&#39;ve ended up using sed: <code>find ~&#47;project&#47;trunk -name &quot;pom.xml&quot; | xargs sed -i &#39;s&#47;&lt;groupId&gt;org.old.groupId&lt;\\&#47;groupId&gt;&#47;&lt;groupId&gt;org.new.grou&zwnj;&#8203;pId&lt;\\&#47;groupId&gt;&#47;g&#39;</code>. It worked like a charm, but still I was curious if there was a mojo outwhere."},{"owner":{"account_id":1042328,"reputation":7972,"user_id":1048093,"accept_rate":75,"display_name":"wemu"},"score":2,"creation_date":1383812521,"post_id":19816278,"comment_id":29487794,"body_markdown":"out of curiosity I found: http://docs.codehaus.org/display/MAVENUSER/PomMavenPlugin but it seems a bit old :)","body":"out of curiosity I found: <a href=\"http://docs.codehaus.org/display/MAVENUSER/PomMavenPlugin\" rel=\"nofollow noreferrer\">docs.codehaus.org/display/MAVENUSER/PomMavenPlugin</a> but it seems a bit old :)"},{"owner":{"account_id":3381550,"reputation":1165,"user_id":2838491,"accept_rate":29,"display_name":"joao cenoura"},"score":1,"creation_date":1383850381,"post_id":19816278,"comment_id":29510784,"body_markdown":"Thanks! That was exactly what I was looking for. Quite a pity it is pretty much abandoned...","body":"Thanks! That was exactly what I was looking for. Quite a pity it is pretty much abandoned..."},{"owner":{"account_id":7547772,"reputation":8583,"user_id":5730279,"display_name":"hc_dev"},"score":0,"creation_date":1618125983,"post_id":19816278,"comment_id":118503444,"body_markdown":"@wemu You should add an answer. A solving comment is harder to find by others asking the same &#129300;","body":"@wemu You should add an answer. A solving comment is harder to find by others asking the same 🤔"},{"owner":{"account_id":3044540,"reputation":877,"user_id":2580580,"accept_rate":67,"display_name":"Sebastian"},"score":1,"creation_date":1619974012,"post_id":19816278,"comment_id":119059499,"body_markdown":"sometimes searching and using a tool is slower than just doing it :-)","body":"sometimes searching and using a tool is slower than just doing it :-)"}],"answers":[{"tags":[],"owner":{"display_name":"user8272917"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1499461731,"creation_date":1499461731,"answer_id":44979656,"question_id":19816278,"body_markdown":"Simple solution would be use textpad or notepad++ or other tool as you said sed and use find in file and replace the group id and artifact ids.","title":"Renaming groupId in maven","body":"<p>Simple solution would be use textpad or notepad++ or other tool as you said sed and use find in file and replace the group id and artifact ids.</p>\n"},{"tags":[],"owner":{"account_id":1686882,"reputation":1183,"user_id":1549977,"accept_rate":86,"display_name":"Benjamin Marwell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1618125847,"creation_date":1566907390,"answer_id":57674272,"question_id":19816278,"body_markdown":"&gt; Is there a way to rename both groupId and artifactId?\n\nAs of today, the answer to your question is simple:\n\n* No, there is no such plugin for renaming.\r\n\n### Write your own Maven Plugin\r\nI guess you might be able to write such a maven plugin, though.\r\n\r\nYou can include this field in your Mojo:\r\n```java\r\n    @Parameter(defaultValue = &quot;${project}&quot;, readonly = true)\r\n    @SuppressWarnings(&quot;UnusedDeclaration&quot;)\r\n    private MavenProject project;\r\n```\r\n\r\nThe `MavenProject` class has the methods you are looking for (`setArtifactId`, etc.).\r\n\r\nIn fact, the [`SetMojo`][1] from the maven-version-plugin will do exactly this for you.\r\n\n------\r\nThis answer will be updated as soon as there is such a plugin.\n\n\n  [1]: https://github.com/mojohaus/versions-maven-plugin/blob/master/src/main/java/org/codehaus/mojo/versions/SetMojo.java","title":"Renaming groupId in maven","body":"<blockquote>\n<p>Is there a way to rename both groupId and artifactId?</p>\n</blockquote>\n<p>As of today, the answer to your question is simple:</p>\n<ul>\n<li>No, there is no such plugin for renaming.</li>\n</ul>\n<h3>Write your own Maven Plugin</h3>\n<p>I guess you might be able to write such a maven plugin, though.</p>\n<p>You can include this field in your Mojo:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Parameter(defaultValue = &quot;${project}&quot;, readonly = true)\n    @SuppressWarnings(&quot;UnusedDeclaration&quot;)\n    private MavenProject project;\n</code></pre>\n<p>The <code>MavenProject</code> class has the methods you are looking for (<code>setArtifactId</code>, etc.).</p>\n<p>In fact, the <a href=\"https://github.com/mojohaus/versions-maven-plugin/blob/master/src/main/java/org/codehaus/mojo/versions/SetMojo.java\" rel=\"nofollow noreferrer\"><code>SetMojo</code></a> from the maven-version-plugin will do exactly this for you.</p>\n<hr />\n<p>This answer will be updated as soon as there is such a plugin.</p>\n"},{"tags":[],"owner":{"account_id":6131586,"reputation":1281,"user_id":4781571,"accept_rate":76,"display_name":"harsha kumar Reddy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618169339,"creation_date":1618169339,"answer_id":67049336,"question_id":19816278,"body_markdown":"This is the only way i know of. \r\n\r\nFirst  create the and move all java source according to the new groupId you are going to specify in the pom . rename the project folder to the new artifactId. update the .project file according to new artifactId.\r\n\r\nNow right click on the project in eclipse and do update maven project. If its updated without any errors you are good to go . ","title":"Renaming groupId in maven","body":"<p>This is the only way i know of.</p>\n<p>First  create the and move all java source according to the new groupId you are going to specify in the pom . rename the project folder to the new artifactId. update the .project file according to new artifactId.</p>\n<p>Now right click on the project in eclipse and do update maven project. If its updated without any errors you are good to go .</p>\n"}],"owner":{"account_id":3381550,"reputation":1165,"user_id":2838491,"accept_rate":29,"display_name":"joao cenoura"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15610,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"answer_count":3,"score":26,"last_activity_date":1672921468,"creation_date":1383752305,"question_id":19816278,"body_markdown":"I&#39;m in a middle of a refactoring and house keeping process of a multi-module Maven3 project and I need to rename groupId and artifactId of some artifacts.\r\n \r\nIs there a way to rename both groupId and artifactId?  \r\nI know I can use some find-and-replace tool like sed, but I&#39;m wondering if there&#39;s a mojo like [versions-maven-plugin][1] (e.g.: `mvn versions:set -DnewVersion=1.0.3-SNAPSHOT`) but for groupId and artifactId.\r\n\r\n\r\n\r\n  [1]: http://mojo.codehaus.org/versions-maven-plugin/","title":"Renaming groupId in maven","body":"<p>I'm in a middle of a refactoring and house keeping process of a multi-module Maven3 project and I need to rename groupId and artifactId of some artifacts.</p>\n\n<p>Is there a way to rename both groupId and artifactId?<br>\nI know I can use some find-and-replace tool like sed, but I'm wondering if there's a mojo like <a href=\"http://mojo.codehaus.org/versions-maven-plugin/\" rel=\"noreferrer\">versions-maven-plugin</a> (e.g.: <code>mvn versions:set -DnewVersion=1.0.3-SNAPSHOT</code>) but for groupId and artifactId.</p>\n"},{"tags":["java","zip","fileoutputstream","zipoutputstream"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1672917136,"post_id":75017448,"comment_id":132382935,"body_markdown":"How exactly did you try to open the downloaded file?","body":"How exactly did you try to open the downloaded file?"},{"owner":{"account_id":14672099,"reputation":1179,"user_id":10596295,"display_name":"Martin"},"score":0,"creation_date":1672917196,"post_id":75017448,"comment_id":132382963,"body_markdown":"I am opening it via Archive Utility on mac. @BasilBourque","body":"I am opening it via Archive Utility on mac. @BasilBourque"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":1,"creation_date":1672919137,"post_id":75017448,"comment_id":132383571,"body_markdown":"Have you tried using the DEFLATE method? It could be that the Mac doesn&#39;t recognise NO_COMPRESSION. Also, are you sure you want to name the zip entry &quot;details_&lt;date&gt;.zip&quot;? There are multiple problems with that. First, are you sure you want a zip file inside a zip file? If not, you should remove the &quot;.zip&quot; from the filename. Second, if the date contains &quot;/&quot; characters (such as &quot;5/1/2023&quot;) then they will end up as subdirectories.","body":"Have you tried using the DEFLATE method? It could be that the Mac doesn&#39;t recognise NO_COMPRESSION. Also, are you sure you want to name the zip entry &quot;details_&lt;date&gt;.zip&quot;? There are multiple problems with that. First, are you sure you want a zip file inside a zip file? If not, you should remove the &quot;.zip&quot; from the filename. Second, if the date contains &quot;/&quot; characters (such as &quot;5/1/2023&quot;) then they will end up as subdirectories."},{"owner":{"account_id":14672099,"reputation":1179,"user_id":10596295,"display_name":"Martin"},"score":1,"creation_date":1672921078,"post_id":75017448,"comment_id":132384177,"body_markdown":"You are right @k314159, wrapping zip with zip was problematic. I posted an answer. Thanks a lot!","body":"You are right @k314159, wrapping zip with zip was problematic. I posted an answer. Thanks a lot!"}],"answers":[{"tags":[],"owner":{"account_id":14672099,"reputation":1179,"user_id":10596295,"display_name":"Martin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672921043,"creation_date":1672921043,"answer_id":75018261,"question_id":75017448,"body_markdown":"I managed to find out the root cause with @k314159\r\n, namely, I had a zip file wrapped with a zip file. New version which works as expected. \r\n\r\n```\r\n    public static byte[] createZipByteArray(String fileName, byte[] content) throws IOException {\r\n        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\r\n        try (byteArrayOutputStream; ZipOutputStream zipOutputStream = new ZipOutputStream(byteArrayOutputStream)) {\r\n            zipOutputStream.setLevel(Deflater.DEFLATED);\r\n            ZipEntry zipEntry = new ZipEntry(fileName);\r\n            zipOutputStream.putNextEntry(zipEntry);\r\n            zipOutputStream.write(content);\r\n            zipOutputStream.closeEntry();\r\n            zipOutputStream.flush();\r\n        }\r\n        return byteArrayOutputStream.toByteArray();\r\n    }\r\n```\r\n\r\nand controller \r\n\r\n```\r\n    @GetMapping(value = &quot;objectWithDetails&quot;, produces = &quot;application/zip&quot;)\r\n    @RolesAllowed(&quot;QUERY_DATA&quot;)\r\n    public ResponseEntity&lt;byte[]&gt; getObjectWithDetails(String limit, HttpServletResponse response) throws IOException {\r\n        response.setContentType(&quot;application/zip&quot;);\r\n        List&lt;ObjectSpecification &gt; objectRepresentation = objectService.getObjectRepresentation(limit);\r\n\r\n        byte[] objectsBytes = objectMapper.writeValueAsBytes(objectRepresentation);\r\n\r\n        return ResponseEntity\r\n                .ok()\r\n                .contentType(MediaType.valueOf(&quot;application/zip&quot;))\r\n                .header(&quot;Content-Encoding&quot;, &quot;UTF-8&quot;)\r\n                .header(&quot;Content-Disposition&quot;, getObjectFileName(&quot;attachment; filename=objects_&quot;))\r\n                .body(createZipByteArray(getObjectFileName(&quot;objects_&quot;), objectsBytes));\r\n    }\r\n```\r\n","title":"Generated zip file is always corrupted after download on Mac","body":"<p>I managed to find out the root cause with @k314159\n, namely, I had a zip file wrapped with a zip file. New version which works as expected.</p>\n<pre><code>    public static byte[] createZipByteArray(String fileName, byte[] content) throws IOException {\n        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n        try (byteArrayOutputStream; ZipOutputStream zipOutputStream = new ZipOutputStream(byteArrayOutputStream)) {\n            zipOutputStream.setLevel(Deflater.DEFLATED);\n            ZipEntry zipEntry = new ZipEntry(fileName);\n            zipOutputStream.putNextEntry(zipEntry);\n            zipOutputStream.write(content);\n            zipOutputStream.closeEntry();\n            zipOutputStream.flush();\n        }\n        return byteArrayOutputStream.toByteArray();\n    }\n</code></pre>\n<p>and controller</p>\n<pre><code>    @GetMapping(value = &quot;objectWithDetails&quot;, produces = &quot;application/zip&quot;)\n    @RolesAllowed(&quot;QUERY_DATA&quot;)\n    public ResponseEntity&lt;byte[]&gt; getObjectWithDetails(String limit, HttpServletResponse response) throws IOException {\n        response.setContentType(&quot;application/zip&quot;);\n        List&lt;ObjectSpecification &gt; objectRepresentation = objectService.getObjectRepresentation(limit);\n\n        byte[] objectsBytes = objectMapper.writeValueAsBytes(objectRepresentation);\n\n        return ResponseEntity\n                .ok()\n                .contentType(MediaType.valueOf(&quot;application/zip&quot;))\n                .header(&quot;Content-Encoding&quot;, &quot;UTF-8&quot;)\n                .header(&quot;Content-Disposition&quot;, getObjectFileName(&quot;attachment; filename=objects_&quot;))\n                .body(createZipByteArray(getObjectFileName(&quot;objects_&quot;), objectsBytes));\n    }\n</code></pre>\n"}],"owner":{"account_id":14672099,"reputation":1179,"user_id":10596295,"display_name":"Martin"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":332,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75018261,"answer_count":1,"score":0,"last_activity_date":1672921043,"creation_date":1672916599,"question_id":75017448,"body_markdown":"Lets say that I have a collection of objects which I would like to wrap with zip. My zip conversion class looks like:\r\n\r\n```\r\npublic class ZipFile {\r\n\r\n    public byte[] createZipByteArray(String fileName, byte[] content) throws IOException {\r\n        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\r\n        try (byteArrayOutputStream; ZipOutputStream zipOutputStream = new ZipOutputStream(byteArrayOutputStream)) {\r\n            zipOutputStream.setLevel(Deflater.NO_COMPRESSION);\r\n            ZipEntry zipEntry = new ZipEntry(fileName);\r\n            zipOutputStream.putNextEntry(zipEntry);\r\n            zipOutputStream.write(content);\r\n            zipOutputStream.closeEntry();\r\n            zipOutputStream.flush();\r\n        }\r\n        return byteArrayOutputStream.toByteArray();\r\n    }\r\n\r\n}\r\n```\r\n\r\nMy controller looks like:\r\n\r\n```\r\n    @GetMapping(value = &quot;objectWithDetails/zip&quot;, produces = &quot;application/zip&quot;)\r\n    @RolesAllowed(&quot;QUERY_DATA&quot;)\r\n    public ResponseEntity&lt;byte[]&gt; getObjectWithDetails(String limit, HttpServletResponse response) throws IOException {\r\n        response.setContentType(&quot;application/zip&quot;);\r\n\r\n        List&lt;ObjectSpecification&gt; objectRepresentation = recipeService.getObjectRepresentation(limit);\r\n\r\n        byte[] objectsBytes = objectMapper.writeValueAsBytes(objectRepresentation);\r\n\r\n        ZipFile zipFile = new ZipFile();\r\n\r\n        return ResponseEntity\r\n                .ok()\r\n                .contentType(MediaType.valueOf(&quot;application/zip&quot;))\r\n                .header(&quot;Content-Encoding&quot;, &quot;UTF-8&quot;)\r\n                .header(&quot;Content-Disposition&quot;, String.format(&quot;attachment; filename=\\&quot;details_%s.zip\\&quot;&quot;, dateTimeProvider.nowDate()))\r\n                .body(zipFile.createZipByteArray(String.format(&quot;details_%s.zip&quot;, dateTimeProvider.nowDate()), objectsBytes));\r\n\r\n    }\r\n```\r\n\r\nIn swagger, I have a download option for the generated zip files. After all, when I try to open the downloaded file I receive the following:\r\n\r\n```Unable to expand filename.zip. It is in an unsupported format. ```\r\n\r\nI tried closing `ZipOutputStream` and `ByteArrayOutputStream` in a different configuration. Applied a different option for the content type in the controller but still, I cannot find out why all zip files are corrupted. I will be grateful for suggestions on what I miss. Cheers!  ","title":"Generated zip file is always corrupted after download on Mac","body":"<p>Lets say that I have a collection of objects which I would like to wrap with zip. My zip conversion class looks like:</p>\n<pre><code>public class ZipFile {\n\n    public byte[] createZipByteArray(String fileName, byte[] content) throws IOException {\n        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n        try (byteArrayOutputStream; ZipOutputStream zipOutputStream = new ZipOutputStream(byteArrayOutputStream)) {\n            zipOutputStream.setLevel(Deflater.NO_COMPRESSION);\n            ZipEntry zipEntry = new ZipEntry(fileName);\n            zipOutputStream.putNextEntry(zipEntry);\n            zipOutputStream.write(content);\n            zipOutputStream.closeEntry();\n            zipOutputStream.flush();\n        }\n        return byteArrayOutputStream.toByteArray();\n    }\n\n}\n</code></pre>\n<p>My controller looks like:</p>\n<pre><code>    @GetMapping(value = &quot;objectWithDetails/zip&quot;, produces = &quot;application/zip&quot;)\n    @RolesAllowed(&quot;QUERY_DATA&quot;)\n    public ResponseEntity&lt;byte[]&gt; getObjectWithDetails(String limit, HttpServletResponse response) throws IOException {\n        response.setContentType(&quot;application/zip&quot;);\n\n        List&lt;ObjectSpecification&gt; objectRepresentation = recipeService.getObjectRepresentation(limit);\n\n        byte[] objectsBytes = objectMapper.writeValueAsBytes(objectRepresentation);\n\n        ZipFile zipFile = new ZipFile();\n\n        return ResponseEntity\n                .ok()\n                .contentType(MediaType.valueOf(&quot;application/zip&quot;))\n                .header(&quot;Content-Encoding&quot;, &quot;UTF-8&quot;)\n                .header(&quot;Content-Disposition&quot;, String.format(&quot;attachment; filename=\\&quot;details_%s.zip\\&quot;&quot;, dateTimeProvider.nowDate()))\n                .body(zipFile.createZipByteArray(String.format(&quot;details_%s.zip&quot;, dateTimeProvider.nowDate()), objectsBytes));\n\n    }\n</code></pre>\n<p>In swagger, I have a download option for the generated zip files. After all, when I try to open the downloaded file I receive the following:</p>\n<p><code>Unable to expand filename.zip. It is in an unsupported format. </code></p>\n<p>I tried closing <code>ZipOutputStream</code> and <code>ByteArrayOutputStream</code> in a different configuration. Applied a different option for the content type in the controller but still, I cannot find out why all zip files are corrupted. I will be grateful for suggestions on what I miss. Cheers!</p>\n"},{"tags":["java","spring-boot","jpa","jparepository"],"answers":[{"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672921011,"creation_date":1672921011,"answer_id":75018255,"question_id":75018217,"body_markdown":"You select two columns which is not a string. Your message returns an `Object[]`:\r\n\r\n    interface MyClassRepository extends JpaRepository&lt;MyClass, Long&gt; {\r\n        @Query(value = &quot;select m.name, max(date) from MyClass m group by m.name&quot;)\r\n        List&lt;Object[]&gt; selectLatest();\r\n    }\r\n\r\nWhere the index zero contains the name and the index 1 contains the Date.\r\n\r\nBut for me a better solution is to create an Object with two attributes and select this:\r\n\r\n    public class MyLatestClass {\r\n       private String name;\r\n       private LocalDate date;\r\n       \r\n       public MyLatestClass(String name, LocalDate date){\r\n         this.name=name;\r\n         this.date=date;\r\n       }\r\n       //getter \r\n       ....\r\n    }\r\n    \r\n    interface MyClassRepository extends JpaRepository&lt;MyClass, Long&gt; {\r\n        @Query(value = &quot;select new MyLatestClass(name, max(date)) from MyClass m group by m.name&quot;)\r\n        List&lt;MyLatestClass&gt; selectLatest();\r\n    }","title":"No converter found capable of converting from type [java.time.LocalDate] to type [@org.springframework.data.jpa.repository.Query java.lang.String]","body":"<p>You select two columns which is not a string. Your message returns an <code>Object[]</code>:</p>\n<pre><code>interface MyClassRepository extends JpaRepository&lt;MyClass, Long&gt; {\n    @Query(value = &quot;select m.name, max(date) from MyClass m group by m.name&quot;)\n    List&lt;Object[]&gt; selectLatest();\n}\n</code></pre>\n<p>Where the index zero contains the name and the index 1 contains the Date.</p>\n<p>But for me a better solution is to create an Object with two attributes and select this:</p>\n<pre><code>public class MyLatestClass {\n   private String name;\n   private LocalDate date;\n   \n   public MyLatestClass(String name, LocalDate date){\n     this.name=name;\n     this.date=date;\n   }\n   //getter \n   ....\n}\n\ninterface MyClassRepository extends JpaRepository&lt;MyClass, Long&gt; {\n    @Query(value = &quot;select new MyLatestClass(name, max(date)) from MyClass m group by m.name&quot;)\n    List&lt;MyLatestClass&gt; selectLatest();\n}\n</code></pre>\n"}],"owner":{"account_id":16736345,"reputation":13,"user_id":12097339,"display_name":"user678"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":479,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75018255,"answer_count":1,"score":0,"last_activity_date":1672921011,"creation_date":1672920839,"question_id":75018217,"body_markdown":"I have a springboot project with mysql and jpa and in there I have a model/domain class\r\n\r\n```\r\nclass MyClass {\r\n    private long id;\r\n    private String name;\r\n    private LocalDate date;\r\n    private String data1;\r\n    private Integer data2;\r\n}\r\n```\r\nand I also have repository interface that extends JpaRepository where I want to add a custom query to pick rows with latest date by name - the code is as follows:\r\n\r\n```\r\ninterface MyClassRepository extends JpaRepository&lt;MyClass, Long&gt; {\r\n    @Query(value = &quot;select m.name, max(date) from MyClass m group by m.name&quot;)\r\n    List&lt;String&gt; selectLatest();\r\n}\r\n```\r\nWhen the call of that query is executed I get the error message as in the title\r\n\r\n```\r\nNo converter found capable of converting from type [java.time.LocalDate] to type [@org.springframework.data.jpa.repository.Query java.lang.String]\r\n```\r\n\r\n\r\n\r\n\r\n\r\nI have found similar questions but each was more specific to a class and more complex than mine, I think it&#39;s the java.util.LocalDate that&#39;s the problem here?","title":"No converter found capable of converting from type [java.time.LocalDate] to type [@org.springframework.data.jpa.repository.Query java.lang.String]","body":"<p>I have a springboot project with mysql and jpa and in there I have a model/domain class</p>\n<pre><code>class MyClass {\n    private long id;\n    private String name;\n    private LocalDate date;\n    private String data1;\n    private Integer data2;\n}\n</code></pre>\n<p>and I also have repository interface that extends JpaRepository where I want to add a custom query to pick rows with latest date by name - the code is as follows:</p>\n<pre><code>interface MyClassRepository extends JpaRepository&lt;MyClass, Long&gt; {\n    @Query(value = &quot;select m.name, max(date) from MyClass m group by m.name&quot;)\n    List&lt;String&gt; selectLatest();\n}\n</code></pre>\n<p>When the call of that query is executed I get the error message as in the title</p>\n<pre><code>No converter found capable of converting from type [java.time.LocalDate] to type [@org.springframework.data.jpa.repository.Query java.lang.String]\n</code></pre>\n<p>I have found similar questions but each was more specific to a class and more complex than mine, I think it's the java.util.LocalDate that's the problem here?</p>\n"},{"tags":["java","xml","list","xpath","nodelist"],"comments":[{"owner":{"account_id":91947,"reputation":161814,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1672921421,"post_id":75017933,"comment_id":132384295,"body_markdown":"You could consider to simply select e.g. `//IR/Level` with XPath, that way, for your sample, the node list would contain two element nodes and the value you want (e.g. either the empty string or the value `LVL00006` could be read out on the DOM API level with `nodes.item(i).getTextContent()` or with a relative XPath expression selecting `string()` on `nodes.item(i)`.","body":"You could consider to simply select e.g. <code>&#47;&#47;IR&#47;Level</code> with XPath, that way, for your sample, the node list would contain two element nodes and the value you want (e.g. either the empty string or the value <code>LVL00006</code> could be read out on the DOM API level with <code>nodes.item(i).getTextContent()</code> or with a relative XPath expression selecting <code>string()</code> on <code>nodes.item(i)</code>."},{"owner":{"account_id":91947,"reputation":161814,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1672921505,"post_id":75017933,"comment_id":132384326,"body_markdown":"Another option would be to move to XPath 2 or 3 where you can select e.g. `//IR/Level/string()` directly as a sequence of string. That is not possible with the JAXP, XPath 1 API but certainly e.g. with Saxon&#39;s s9api.","body":"Another option would be to move to XPath 2 or 3 where you can select e.g. <code>&#47;&#47;IR&#47;Level&#47;string()</code> directly as a sequence of string. That is not possible with the JAXP, XPath 1 API but certainly e.g. with Saxon&#39;s s9api."}],"owner":{"account_id":20230671,"reputation":3,"user_id":14837299,"display_name":"Ajitesh Shukla"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672920986,"creation_date":1672919296,"question_id":75017933,"body_markdown":"I have a use case where my XML is like this \r\n```xml\r\n&lt;IR&gt;\r\n        &lt;name&gt;abc&lt;/name&gt;\r\n        &lt;Level&gt;&lt;/Level&gt;\r\n      \r\n&lt;/IR&gt;\r\n&lt;IR&gt;\r\n        &lt;name&gt;xyz&lt;/name&gt; \r\n        &lt;Level&gt;LVL00006&lt;/Level&gt;     \r\n&lt;/IR&gt;\r\n```\r\n\r\nI am using below code to extract information of level.\r\n\r\n```java\r\npublic class TestUseCases {\r\n public static void main(String[] args) {\r\n\tDocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n\ttry {\r\n\t\tfactory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\r\n\t} catch (ParserConfigurationException e1) {\r\n\t\t// TODO Auto-generated catch block\r\n\t\te1.printStackTrace();\r\n\t}\r\n\tDocument document;\r\n\ttry {\r\n\t\tdocument = factory.newDocumentBuilder()\r\n\t\t\t\t.parse(new InputSource(new StringReader(xml)));\r\n\t\r\n\tString xpathExpression = &quot;&quot;;\r\n\tMap&lt;String, List&lt;String&gt;&gt; iRValues = new LinkedHashMap&lt;String, List&lt;String&gt;&gt;();\r\n\txpathExpression = &quot;(/IR/Level/text())&quot;;\r\n\t\r\n\t\tiRValues.put(&quot;REQLVL&quot;, evaluateXPath(document, xpathExpression));\r\n\t\t\r\n\t\tSystem.out.println(iRValues);\r\n\t} catch (SupportException e) {\r\n\t\t// TODO Auto-generated catch block\r\n\t\te.printStackTrace();\r\n\t} catch (SAXException | IOException | ParserConfigurationException e) {\r\n\t\t// TODO Auto-generated catch block\r\n\t\te.printStackTrace();\r\n\t}\r\n  }\r\n\r\n  private static List&lt;String&gt; evaluateXPath(Document document, String xpathExpression) throws SupportException {\r\n\t// Create XPathFactory object\r\n\tXPathFactory xpathFactory = XPathFactory.newInstance();\r\n\r\n\t// Create XPath object\r\n\tXPath xpath = xpathFactory.newXPath();\r\n\r\n\tList&lt;String&gt; values = new ArrayList&lt;&gt;();\r\n\ttry {\r\n\t\t// Create XPathExpression object\r\n\t\tXPathExpression expr = xpath.compile(xpathExpression);\r\n\t\t// Evaluate expression result on XML document\r\n\t\tNodeList nodes = (NodeList) expr.evaluate(document, XPathConstants.NODESET);\r\n\t\tSystem.out.println(nodes.getLength());\r\n\t\tfor (int i = 0; i &lt; nodes.getLength(); i++) {\r\n\t\t\tString item = nodes.item(i).getNodeValue();\r\n\t\t\tSystem.out.println(item);\r\n\t\t\tif (item.trim().isEmpty()) {\r\n\t\t\t\tvalues.add(SupportConstants.EMPTY_SPACE);\r\n\t\t\t} else {\r\n\t\t\t\tvalues.add(nodes.item(i).getNodeValue());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t} catch (XPathExpressionException e) {\r\n\t\tthrow new SupportException(SupportExceptionMessage.ERROR_IN_READING_RESPONSE_FROM_CM);\r\n\t}\r\n\treturn values;\r\n  }\r\n}\r\n```\r\n\r\nOUTPUT:\r\n```none\r\n1\r\nLVL00006\r\n{REQLVL=[LVL00006]}\r\n```\r\n\r\nThe problem is because first level tag is empty, I get a list which has only one element and I am not able to know whether the element is of abc or xyz. Is there a way so that I can put space if the tag is empty?\r\n\r\n\r\n\r\n\r\n\r\nI am expecting list as [&quot; &quot;, LVL00006].","title":"How to get element as space in list of tags using xpath, if the element is not present","body":"<p>I have a use case where my XML is like this</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;IR&gt;\n        &lt;name&gt;abc&lt;/name&gt;\n        &lt;Level&gt;&lt;/Level&gt;\n      \n&lt;/IR&gt;\n&lt;IR&gt;\n        &lt;name&gt;xyz&lt;/name&gt; \n        &lt;Level&gt;LVL00006&lt;/Level&gt;     \n&lt;/IR&gt;\n</code></pre>\n<p>I am using below code to extract information of level.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class TestUseCases {\n public static void main(String[] args) {\n    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n    try {\n        factory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\n    } catch (ParserConfigurationException e1) {\n        // TODO Auto-generated catch block\n        e1.printStackTrace();\n    }\n    Document document;\n    try {\n        document = factory.newDocumentBuilder()\n                .parse(new InputSource(new StringReader(xml)));\n    \n    String xpathExpression = &quot;&quot;;\n    Map&lt;String, List&lt;String&gt;&gt; iRValues = new LinkedHashMap&lt;String, List&lt;String&gt;&gt;();\n    xpathExpression = &quot;(/IR/Level/text())&quot;;\n    \n        iRValues.put(&quot;REQLVL&quot;, evaluateXPath(document, xpathExpression));\n        \n        System.out.println(iRValues);\n    } catch (SupportException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (SAXException | IOException | ParserConfigurationException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n  }\n\n  private static List&lt;String&gt; evaluateXPath(Document document, String xpathExpression) throws SupportException {\n    // Create XPathFactory object\n    XPathFactory xpathFactory = XPathFactory.newInstance();\n\n    // Create XPath object\n    XPath xpath = xpathFactory.newXPath();\n\n    List&lt;String&gt; values = new ArrayList&lt;&gt;();\n    try {\n        // Create XPathExpression object\n        XPathExpression expr = xpath.compile(xpathExpression);\n        // Evaluate expression result on XML document\n        NodeList nodes = (NodeList) expr.evaluate(document, XPathConstants.NODESET);\n        System.out.println(nodes.getLength());\n        for (int i = 0; i &lt; nodes.getLength(); i++) {\n            String item = nodes.item(i).getNodeValue();\n            System.out.println(item);\n            if (item.trim().isEmpty()) {\n                values.add(SupportConstants.EMPTY_SPACE);\n            } else {\n                values.add(nodes.item(i).getNodeValue());\n            }\n        }\n\n    } catch (XPathExpressionException e) {\n        throw new SupportException(SupportExceptionMessage.ERROR_IN_READING_RESPONSE_FROM_CM);\n    }\n    return values;\n  }\n}\n</code></pre>\n<p>OUTPUT:</p>\n<pre class=\"lang-none prettyprint-override\"><code>1\nLVL00006\n{REQLVL=[LVL00006]}\n</code></pre>\n<p>The problem is because first level tag is empty, I get a list which has only one element and I am not able to know whether the element is of abc or xyz. Is there a way so that I can put space if the tag is empty?</p>\n<p>I am expecting list as [&quot; &quot;, LVL00006].</p>\n"},{"tags":["java","maven-3"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1672921352,"post_id":75018223,"comment_id":132384264,"body_markdown":"ask an author of dependency to publish valid pom","body":"ask an author of dependency to publish valid pom"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1672921496,"post_id":75018223,"comment_id":132384322,"body_markdown":"The relative parent-pom path in a pom of a dependency should be irrelevant, since they are only needed to build the dependency; when built, the parent pom should be resolve through the dependency system (e.g. through mvnrepository). Please [edit] the post and add the (relevant part of the) `pom.xml`.","body":"The relative parent-pom path in a pom of a dependency should be irrelevant, since they are only needed to build the dependency; when built, the parent pom should be resolve through the dependency system (e.g. through mvnrepository). Please <a href=\"https://stackoverflow.com/posts/75018223/edit\">edit</a> the post and add the (relevant part of the) <code>pom.xml</code>."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1672940793,"post_id":75018223,"comment_id":132391693,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":11458982,"reputation":1,"user_id":8399169,"display_name":"Azhar Ahmed A"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672920874,"creation_date":1672920874,"question_id":75018223,"body_markdown":"I have a service where I have added dependency which contains relative path to a parent pom. When I try to build this locally, the local build fails complaining that its unable to find the parent pom.\r\n\r\nSuggestion to overcome this issue so that I can build the project locally ","title":"Dependency in pom refers to a parent pom which when running locally fails","body":"<p>I have a service where I have added dependency which contains relative path to a parent pom. When I try to build this locally, the local build fails complaining that its unable to find the parent pom.</p>\n<p>Suggestion to overcome this issue so that I can build the project locally</p>\n"},{"tags":["java","selenium","xpath"],"answers":[{"tags":[],"owner":{"account_id":27429108,"reputation":1,"user_id":20926091,"display_name":"Adinath Rajegore"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672844174,"creation_date":1672844174,"answer_id":75007245,"question_id":75004456,"body_markdown":"Here You are providing indexing to the h3 tag, after which both the lists are getting located because both are coming in following-sibling Axes. \r\n\r\nYou can provide indexing to ul direclty as:\r\nList&lt;WebElement&gt; logs = driver.findElements(By.xpath(&quot;//*[@id=\\&quot;on-premisesbackwardsincompatible\\&quot;]/following-sibling::h3/following-sibling::ul[1]&quot;));\r\n\r\nor you can locate the element with xpath:\r\nList&lt;WebElement&gt; logs = driver.findElements(By.xpath(&quot;//*[@id=&#39;v2-43-october-11--2022&#39;]/following-sibling::ul[1]));","title":"How to get a list within two different elements in selenium java","body":"<p>Here You are providing indexing to the h3 tag, after which both the lists are getting located because both are coming in following-sibling Axes.</p>\n<p>You can provide indexing to ul direclty as:\nList logs = driver.findElements(By.xpath(&quot;//*[@id=&quot;on-premisesbackwardsincompatible&quot;]/following-sibling::h3/following-sibling::ul[1]&quot;));</p>\n<p>or you can locate the element with xpath:\nList logs = driver.findElements(By.xpath(&quot;//*[@id='v2-43-october-11--2022']/following-sibling::ul[1]));</p>\n"},{"tags":[],"owner":{"account_id":10404380,"reputation":2588,"user_id":7671727,"display_name":"AbiSaran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672920667,"creation_date":1672920667,"answer_id":75018180,"question_id":75004456,"body_markdown":"You can try the below XPath:\r\n\r\n    //*[@id=&#39;v2-45-january-10--2023&#39;]/preceding-sibling::ul\r\n\r\nIt gives the results of the first 2 `&lt;ul&gt;` tags which are next to the first `&lt;h3&gt;` tag.","title":"How to get a list within two different elements in selenium java","body":"<p>You can try the below XPath:</p>\n<pre><code>//*[@id='v2-45-january-10--2023']/preceding-sibling::ul\n</code></pre>\n<p>It gives the results of the first 2 <code>&lt;ul&gt;</code> tags which are next to the first <code>&lt;h3&gt;</code> tag.</p>\n"}],"owner":{"account_id":18283691,"reputation":1,"user_id":13322070,"display_name":"Ganesan M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1672920667,"creation_date":1672830145,"question_id":75004456,"body_markdown":"Here,\r\nhaving two h3 tags under a div tag.Need a lists which is under 1st h3 tag(which is not under 2nd h3 tag)\r\n\r\nAs shown in the below image,&lt;br&gt;\r\nh3(1) -&gt; v2-43-october-11--2022&lt;br&gt;\r\nh3(2) -&gt; v2-45-january-10--2023\r\nUnder h3(1) i have two list(ul), under h3(2) i have one list(ul)\r\nNeed an elements which is under h3(1) only&lt;br&gt;(https://i.stack.imgur.com/So4A4.png)\r\n\r\nHere is my code\r\n\r\n```\r\nList&lt;WebElement&gt; logs = driver.findElements(By.xpath(&quot;//*[@id=\\&quot;on-premisesbackwardsincompatible\\&quot;]/following-sibling::h3[1]/following-sibling::ul&quot;));\r\nfor(WebElement w : logs)\r\n       System.out.println(w.getText());\r\n```\r\n\r\n\r\nbut it&#39;s giving all the 3 lists, need 1st two lists only&lt;br&gt;\r\nNeed an elements which is under h3(1) only&lt;br&gt;\r\n(https://i.stack.imgur.com/XCs1W.png)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Njxvs.png","title":"How to get a list within two different elements in selenium java","body":"<p>Here,\nhaving two h3 tags under a div tag.Need a lists which is under 1st h3 tag(which is not under 2nd h3 tag)</p>\n<p>As shown in the below image,<br>\nh3(1) -&gt; v2-43-october-11--2022<br>\nh3(2) -&gt; v2-45-january-10--2023\nUnder h3(1) i have two list(ul), under h3(2) i have one list(ul)\nNeed an elements which is under h3(1) only<br>(<a href=\"https://i.stack.imgur.com/So4A4.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/So4A4.png</a>)</p>\n<p>Here is my code</p>\n<pre><code>List&lt;WebElement&gt; logs = driver.findElements(By.xpath(&quot;//*[@id=\\&quot;on-premisesbackwardsincompatible\\&quot;]/following-sibling::h3[1]/following-sibling::ul&quot;));\nfor(WebElement w : logs)\n       System.out.println(w.getText());\n</code></pre>\n<p>but it's giving all the 3 lists, need 1st two lists only<br>\nNeed an elements which is under h3(1) only<br>\n(<a href=\"https://i.stack.imgur.com/XCs1W.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/XCs1W.png</a>)</p>\n"},{"tags":["java","postgresql","spring-boot","liquibase"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1672920259,"post_id":75017965,"comment_id":132383943,"body_markdown":"[liquibase-schema-name](https://docs.liquibase.com/parameters/liquibase-schema-name.html). In short: since default schema is managed by jdbc driver, liquibase does not see previous `DATABASECHANGELOG` table and tries to reapply old migrations. You need to specify correct schema where the actual `DATABASECHANGELOG` table is located via `spring.liquibase.liquibase-schema`. BTW, being in your shoes I would stay clear off schemas.","body":"<a href=\"https://docs.liquibase.com/parameters/liquibase-schema-name.html\" rel=\"nofollow noreferrer\">liquibase-schema-name</a>. In short: since default schema is managed by jdbc driver, liquibase does not see previous <code>DATABASECHANGELOG</code> table and tries to reapply old migrations. You need to specify correct schema where the actual <code>DATABASECHANGELOG</code> table is located via <code>spring.liquibase.liquibase-schema</code>. BTW, being in your shoes I would stay clear off schemas."},{"owner":{"account_id":22889080,"reputation":37,"user_id":17029505,"display_name":"idelkaro"},"score":0,"creation_date":1673805139,"post_id":75017965,"comment_id":132574630,"body_markdown":"Thanks, it worked out! but also in my case i had to add ```spring.liquibase.url```","body":"Thanks, it worked out! but also in my case i had to add <code>spring.liquibase.url</code>"}],"owner":{"account_id":22889080,"reputation":37,"user_id":17029505,"display_name":"idelkaro"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672919850,"creation_date":1672919511,"question_id":75017965,"body_markdown":"I have ```db-service``` with all the changelog files. When running ```db-service``` for the first time all the tables will be created in the ```public schema```. Then tables will be filled with initial data. \r\n\r\n[![enter image description here][1]][1] db-service \r\n\r\n[![enter image description here][2]][2] db-service\r\n\r\nNow we have decided to split ```db-service``` and distribute changelog files between services. So in the microservice I have created the same structure of folders.\r\n\r\nI moved changelog files to ```info-service```. And now I need to move tables into a separate schema, but I can&#39;t do it until tables aren&#39;t filled with init data. So I&#39;ve created new folder and added additional path in root.changelog.\r\n\r\n[![enter image description here][3]][3] info-service\r\n\r\n[![enter image description here][4]][4] info-service\r\n\r\nMy changesets look like: \r\n\r\n [![enter image description here][5]][5] 230105-initial-changelog.xml\r\n\r\nI run this changeset with URL ```spring.datasource.url=jdbc:postgresql://localhost:5432/postgres``` and everything works fine, tables are moved to another schema.\r\n\r\nBut then I modify data source URL to start working in my info-microservice with specific schema: \r\n```spring.datasource.url=jdbc:postgresql://localhost:5432/postgres?currentSchema=info_schema```\r\n\r\nAnd when I run my service for the second time with currentSchema URL parameter I get ```ERROR: relation &quot;atm&quot; already exists``` and ```ERROR: relation &quot;contacts&quot; already exists```. So liquibase wants to start doing all the changes from the beginning in the info-schema. It tries to create, init and alter tables again.\r\n\r\nHow to let Liquibase know that it shouldn&#39;t create tables in my schema? Note that i can&#39;t change old changelogfiles from the ```structure folder```\r\n\r\n \r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZskzA.png\r\n  [2]: https://i.stack.imgur.com/T1JWK.png\r\n  [3]: https://i.stack.imgur.com/2QF9w.png\r\n  [4]: https://i.stack.imgur.com/eQiuQ.png\r\n  [5]: https://i.stack.imgur.com/nPk1g.png","title":"How to move tables to another postgres schema using liquibase without running queries inside schema again?","body":"<p>I have <code>db-service</code> with all the changelog files. When running <code>db-service</code> for the first time all the tables will be created in the <code>public schema</code>. Then tables will be filled with initial data.</p>\n<p><a href=\"https://i.stack.imgur.com/ZskzA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZskzA.png\" alt=\"enter image description here\" /></a> db-service</p>\n<p><a href=\"https://i.stack.imgur.com/T1JWK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T1JWK.png\" alt=\"enter image description here\" /></a> db-service</p>\n<p>Now we have decided to split <code>db-service</code> and distribute changelog files between services. So in the microservice I have created the same structure of folders.</p>\n<p>I moved changelog files to <code>info-service</code>. And now I need to move tables into a separate schema, but I can't do it until tables aren't filled with init data. So I've created new folder and added additional path in root.changelog.</p>\n<p><a href=\"https://i.stack.imgur.com/2QF9w.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2QF9w.png\" alt=\"enter image description here\" /></a> info-service</p>\n<p><a href=\"https://i.stack.imgur.com/eQiuQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eQiuQ.png\" alt=\"enter image description here\" /></a> info-service</p>\n<p>My changesets look like:</p>\n<p><a href=\"https://i.stack.imgur.com/nPk1g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nPk1g.png\" alt=\"enter image description here\" /></a> 230105-initial-changelog.xml</p>\n<p>I run this changeset with URL <code>spring.datasource.url=jdbc:postgresql://localhost:5432/postgres</code> and everything works fine, tables are moved to another schema.</p>\n<p>But then I modify data source URL to start working in my info-microservice with specific schema:\n<code>spring.datasource.url=jdbc:postgresql://localhost:5432/postgres?currentSchema=info_schema</code></p>\n<p>And when I run my service for the second time with currentSchema URL parameter I get <code>ERROR: relation &quot;atm&quot; already exists</code> and <code>ERROR: relation &quot;contacts&quot; already exists</code>. So liquibase wants to start doing all the changes from the beginning in the info-schema. It tries to create, init and alter tables again.</p>\n<p>How to let Liquibase know that it shouldn't create tables in my schema? Note that i can't change old changelogfiles from the <code>structure folder</code></p>\n"},{"tags":["java","spring","testing","junit"],"answers":[{"tags":[],"owner":{"account_id":3710759,"reputation":104,"user_id":3088166,"display_name":"a.eugene"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587381813,"creation_date":1587381813,"answer_id":61321289,"question_id":61319742,"body_markdown":"Are you sure that your rest controller present in the application context that starts during the test? \r\n\r\nTry `@SpringBootTest(classes = TestConfig.class)` instead of `@SpringBootTest(classes = EncoderRest.class)`.\r\n\r\n    @Configuration\r\n    @EnableAutoConfiguration\r\n    public class TestConfig {\r\n\r\n    }","title":"No mapping found for HTTP request with URI [/api/encodedurl] in DispatcherServlet with name &#39;&#39;","body":"<p>Are you sure that your rest controller present in the application context that starts during the test? </p>\n\n<p>Try <code>@SpringBootTest(classes = TestConfig.class)</code> instead of <code>@SpringBootTest(classes = EncoderRest.class)</code>.</p>\n\n<pre><code>@Configuration\n@EnableAutoConfiguration\npublic class TestConfig {\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13678477,"reputation":299,"user_id":9869394,"display_name":"Dinushika Rathnayake"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672919646,"creation_date":1672919646,"answer_id":75017992,"question_id":61319742,"body_markdown":"*No mapping found for HTTP request with URI [lanka-qr/tran/validate] in DispatcherServlet with name &#39;&#39;*\r\n\r\nNot related to application context but same error occurs due to missing leading forward slash when mock perform().\r\n\r\nMy Controller have @RequestMapping and @PostMapping like this.\r\n\r\n    @RequestMapping(value = &quot;aaa&quot;)\r\n\r\n    @PostMapping(value = &quot;bbb/ccc&quot;)\r\n\r\nWhen I perform mock like this, error occures.\r\n\r\n    mockMvc.perform(post(&quot;aaa/bbb/ccc&quot;)\r\nCorrected as,\r\n\r\n    mockMvc.perform(post(&quot;/aaa/bbb/ccc&quot;)","title":"No mapping found for HTTP request with URI [/api/encodedurl] in DispatcherServlet with name &#39;&#39;","body":"<p><em>No mapping found for HTTP request with URI [lanka-qr/tran/validate] in DispatcherServlet with name ''</em></p>\n<p>Not related to application context but same error occurs due to missing leading forward slash when mock perform().</p>\n<p>My Controller have @RequestMapping and @PostMapping like this.</p>\n<pre><code>@RequestMapping(value = &quot;aaa&quot;)\n\n@PostMapping(value = &quot;bbb/ccc&quot;)\n</code></pre>\n<p>When I perform mock like this, error occures.</p>\n<pre><code>mockMvc.perform(post(&quot;aaa/bbb/ccc&quot;)\n</code></pre>\n<p>Corrected as,</p>\n<pre><code>mockMvc.perform(post(&quot;/aaa/bbb/ccc&quot;)\n</code></pre>\n"}],"owner":{"account_id":15518530,"reputation":36,"user_id":11195302,"display_name":"Pranjal Chamola"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":457,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1672919646,"creation_date":1587376811,"question_id":61319742,"body_markdown":"I am writing a JUnit test case for an API but getting error as `No mapping found for HTTP request with URI [/api/encodedurl] in DispatcherServlet with name &#39;&#39;`&lt;br&gt;\r\nI wasted more than 2 days not getting any solution checked every possible thing for this. API is token free already.\r\n\r\n\r\nHere is my code\r\n\r\n**Encoder Rest Test**\r\n\t\r\n\tpackage com.zoylo.admin.web.rest;\r\n\t\r\n\timport static org.junit.Assert.assertEquals;\t\r\n\timport org.junit.Test;\r\n\timport org.junit.runner.RunWith;\r\n\timport org.mockito.Mockito;\r\n\timport org.springframework.beans.factory.annotation.Autowired;\r\n\timport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\r\n\timport org.springframework.boot.test.context.SpringBootTest;\r\n\timport org.springframework.boot.test.mock.mockito.MockBean;\r\n\timport org.springframework.http.HttpStatus;\r\n\timport org.springframework.http.MediaType;\r\n\timport org.springframework.mock.web.MockHttpServletResponse;\r\n\timport org.springframework.test.context.junit4.SpringRunner;\r\n\timport org.springframework.test.web.servlet.MockMvc;\r\n\timport org.springframework.test.web.servlet.MvcResult;\r\n\timport org.springframework.test.web.servlet.RequestBuilder;\r\n\timport org.springframework.test.web.servlet.request.MockMvcRequestBuilders;\t\r\n\t\r\n\t@RunWith(SpringRunner.class)\r\n\t@SpringBootTest(classes = EncoderRest.class)\r\n\t@AutoConfigureMockMvc\r\n\tpublic class EncoderRestTest {\r\n\t\t@Autowired\r\n\t\tprivate MockMvc mockMvc;\r\n\t\r\n\t\t@MockBean\r\n\t\tprivate EncoderBll encoderBll;\r\n\t\r\n\t\tObjectMapper mapper = new ObjectMapper();\r\n\t\r\n\t\t@Test\r\n\t\tpublic void save() throws Exception {\r\n\t\t\t// mock output\r\n\t\t\tEncoderMV mv = new EncoderMV();\r\n\t\t\tmv.setPaymentUrl(&quot;www.paytm.com&quot;);\r\n\t\t\tMockito.when(encoderBll.createPaymentUrl(Mockito.any(EncoderVM.class))).thenReturn(mv);\r\n\t\r\n\t\t\tEncoderVM vm = new EncoderVM();\r\n\t\t\tvm.setBookingId(&quot;ICICI090&quot;);\r\n\t\t\tvm.setType(&quot;Payment&quot;);\r\n\t\r\n\t\t\tString requestBody = mapper.writerWithDefaultPrettyPrinter().writeValueAsString(vm);\r\n\t\t\tRequestBuilder requestBuilder = MockMvcRequestBuilders.post(&quot;/api/encodedurl&quot;)\r\n\t\t\t\t\t.accept(MediaType.APPLICATION_JSON).content(requestBody).contentType(MediaType.APPLICATION_JSON);\r\n\t\t\tMvcResult result = mockMvc.perform(requestBuilder).andReturn();\r\n\t\t\tMockHttpServletResponse response = result.getResponse();\r\n\t\t\tassertEquals(HttpStatus.CREATED.value(), response.getStatus());\r\n\t\r\n\t\t}\r\n\t\r\n\t}\r\n\t\r\n\r\n**EncoderRest**\r\n\t\r\n\t@RestController\r\n\t@RequestMapping(&quot;/api&quot;)\r\n\tpublic class EncoderRest {\r\n\t\t\r\n\t\tprivate final Logger logger = LoggerFactory.getLogger(this.getClass());\r\n\t\t\r\n\t\t@Autowired\r\n\t\tprivate EncoderBll encoderBll;\r\n\t\t\r\n\t\t\r\n\t\t@PostMapping(&quot;/encodedurl&quot;)\r\n\t\tpublic ResponseEntity&lt;?&gt; generateEncodedUrl(@RequestBody EncoderVM encoderVM) {\r\n\t\t\t......\r\n\t\t}\r\n\t}\r\n\t\r\n\r\n**EncoderBllImpl**\r\n\t\r\n\tpublic class EncoderBllImpl implements EncoderBll{\r\n\t\t\t\r\n\t\t@Override\r\n\t\tpublic EncoderMV createPaymentUrl(EncoderVM encoderVM) {\r\n\t\t\tEncoderMV encoderMV = null;\r\n\t\t\t.\r\n\t\t\t.\r\n\t\t\t.\t\r\n\t\t\treturn encoderMV;\r\n\t\t}\t\r\n\t}\r\n\t\r\n**Error**\r\n\t\r\n&gt;     No mapping found for HTTP request with URI [/api/encodedurl] in DispatcherServlet with name &#39;&#39;  \r\n\r\n","title":"No mapping found for HTTP request with URI [/api/encodedurl] in DispatcherServlet with name &#39;&#39;","body":"<p>I am writing a JUnit test case for an API but getting error as <code>No mapping found for HTTP request with URI [/api/encodedurl] in DispatcherServlet with name ''</code><br>\nI wasted more than 2 days not getting any solution checked every possible thing for this. API is token free already.</p>\n\n<p>Here is my code</p>\n\n<p><strong>Encoder Rest Test</strong></p>\n\n<pre><code>package com.zoylo.admin.web.rest;\n\nimport static org.junit.Assert.assertEquals;    \nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.Mockito;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.MediaType;\nimport org.springframework.mock.web.MockHttpServletResponse;\nimport org.springframework.test.context.junit4.SpringRunner;\nimport org.springframework.test.web.servlet.MockMvc;\nimport org.springframework.test.web.servlet.MvcResult;\nimport org.springframework.test.web.servlet.RequestBuilder;\nimport org.springframework.test.web.servlet.request.MockMvcRequestBuilders; \n\n@RunWith(SpringRunner.class)\n@SpringBootTest(classes = EncoderRest.class)\n@AutoConfigureMockMvc\npublic class EncoderRestTest {\n    @Autowired\n    private MockMvc mockMvc;\n\n    @MockBean\n    private EncoderBll encoderBll;\n\n    ObjectMapper mapper = new ObjectMapper();\n\n    @Test\n    public void save() throws Exception {\n        // mock output\n        EncoderMV mv = new EncoderMV();\n        mv.setPaymentUrl(\"www.paytm.com\");\n        Mockito.when(encoderBll.createPaymentUrl(Mockito.any(EncoderVM.class))).thenReturn(mv);\n\n        EncoderVM vm = new EncoderVM();\n        vm.setBookingId(\"ICICI090\");\n        vm.setType(\"Payment\");\n\n        String requestBody = mapper.writerWithDefaultPrettyPrinter().writeValueAsString(vm);\n        RequestBuilder requestBuilder = MockMvcRequestBuilders.post(\"/api/encodedurl\")\n                .accept(MediaType.APPLICATION_JSON).content(requestBody).contentType(MediaType.APPLICATION_JSON);\n        MvcResult result = mockMvc.perform(requestBuilder).andReturn();\n        MockHttpServletResponse response = result.getResponse();\n        assertEquals(HttpStatus.CREATED.value(), response.getStatus());\n\n    }\n\n}\n</code></pre>\n\n<p><strong>EncoderRest</strong></p>\n\n<pre><code>@RestController\n@RequestMapping(\"/api\")\npublic class EncoderRest {\n\n    private final Logger logger = LoggerFactory.getLogger(this.getClass());\n\n    @Autowired\n    private EncoderBll encoderBll;\n\n\n    @PostMapping(\"/encodedurl\")\n    public ResponseEntity&lt;?&gt; generateEncodedUrl(@RequestBody EncoderVM encoderVM) {\n        ......\n    }\n}\n</code></pre>\n\n<p><strong>EncoderBllImpl</strong></p>\n\n<pre><code>public class EncoderBllImpl implements EncoderBll{\n\n    @Override\n    public EncoderMV createPaymentUrl(EncoderVM encoderVM) {\n        EncoderMV encoderMV = null;\n        .\n        .\n        .   \n        return encoderMV;\n    }   \n}\n</code></pre>\n\n<p><strong>Error</strong></p>\n\n<blockquote>\n<pre><code>No mapping found for HTTP request with URI [/api/encodedurl] in DispatcherServlet with name ''  \n</code></pre>\n</blockquote>\n"},{"tags":["java","image","url","io"],"comments":[{"owner":{"account_id":20466438,"reputation":115,"user_id":15017829,"display_name":"Mike Kim"},"score":0,"creation_date":1672298383,"post_id":74948118,"comment_id":132260831,"body_markdown":"What happens if you do `file = new File()` after the `mkdir()`? How about if you assign `boolean foo = directory.mkdir()` and print out `foo`, does it say &quot;true&quot;?","body":"What happens if you do <code>file = new File()</code> after the <code>mkdir()</code>? How about if you assign <code>boolean foo = directory.mkdir()</code> and print out <code>foo</code>, does it say &quot;true&quot;?"},{"owner":{"account_id":25902085,"reputation":35,"user_id":19627792,"display_name":"VegetaSan"},"score":0,"creation_date":1672302721,"post_id":74948118,"comment_id":132261830,"body_markdown":"@MikeKim I did `file = new File()` after the `mkdir()`, but it didn&#39;t help, still same error and works only half of the time... Regarding `boolean foo = directory.mkdir()` - it prints true if the folder doesn&#39;t exist and it creates one, if the folder is already created, its skips that if statement","body":"@MikeKim I did <code>file = new File()</code> after the <code>mkdir()</code>, but it didn&#39;t help, still same error and works only half of the time... Regarding <code>boolean foo = directory.mkdir()</code> - it prints true if the folder doesn&#39;t exist and it creates one, if the folder is already created, its skips that if statement"},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1672304478,"post_id":74948118,"comment_id":132262280,"body_markdown":"*&quot;I&#39;m trying to convert URL to file and save it to the folder.&quot;* - For this task, you should probably just download the URL to file using an HTTP library. Unless you also need to convert the image to JPEG, you can leave `ImageIO` out of it, and save time. `ImageIO.read(URL)`, I believe, is intended mostly for local resources (ie. `ClassLoader.getResource(..)` URLs).  If you need the conversion, I suggest using 2 steps, first download, then convert. Very odd if your code works only in debug mode though...","body":"<i>&quot;I&#39;m trying to convert URL to file and save it to the folder.&quot;</i> - For this task, you should probably just download the URL to file using an HTTP library. Unless you also need to convert the image to JPEG, you can leave <code>ImageIO</code> out of it, and save time. <code>ImageIO.read(URL)</code>, I believe, is intended mostly for local resources (ie. <code>ClassLoader.getResource(..)</code> URLs).  If you need the conversion, I suggest using 2 steps, first download, then convert. Very odd if your code works only in debug mode though..."}],"owner":{"account_id":25902085,"reputation":35,"user_id":19627792,"display_name":"VegetaSan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672919360,"creation_date":1672296985,"question_id":74948118,"body_markdown":"I&#39;m trying to convert URL to file and save it to the folder.\r\n\r\n    public void saveFileToStorage(String url, Long timestamp, Integer deviceId) {\r\n        String folder = &quot;D:\\\\Work\\\\S3\\\\&quot; + deviceId;\r\n        File directory = new File(folder);\r\n        File file = new File(folder, timestamp + &quot;.jpg&quot;);\r\n        if (!directory.exists()) {\r\n            directory.mkdir();\r\n        }\r\n        try {\r\n            URL link = new URL(url);\r\n            HttpURLConnection connection = (HttpURLConnection) link.openConnection();\r\n            BufferedImage image = ImageIO.read(connection.getInputStream());\r\n            ImageIO.write(image, &quot;jpg&quot;, file);\r\n            connection.disconnect();\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\nBut this code works fine only in debug mode, when I start a program, most of the time it will throw - &quot;java.lang.RuntimeException: java.io.FileNotFoundException&quot; I tried to read image from URL only by using ImageIO.read and without HttpURLConnection, but it will always throw - &quot;Can&#39;t get input stream from URL!&quot;(in debug mode still works). Is there a way to fix this? Thank you\r\n\r\n**UPD: Solved!**\r\nThe problems was in url from which file uploads with delay, and because program works fast, it didn&#39;t have time to download file and threw FileNotFoundException. For now I added `Thread.slepp(1000)` and it works.\r\n","title":"java.lang.RuntimeException: java.io.FileNotFoundException: when creating file from URL(works in debug mode)","body":"<p>I'm trying to convert URL to file and save it to the folder.</p>\n<pre><code>public void saveFileToStorage(String url, Long timestamp, Integer deviceId) {\n    String folder = &quot;D:\\\\Work\\\\S3\\\\&quot; + deviceId;\n    File directory = new File(folder);\n    File file = new File(folder, timestamp + &quot;.jpg&quot;);\n    if (!directory.exists()) {\n        directory.mkdir();\n    }\n    try {\n        URL link = new URL(url);\n        HttpURLConnection connection = (HttpURLConnection) link.openConnection();\n        BufferedImage image = ImageIO.read(connection.getInputStream());\n        ImageIO.write(image, &quot;jpg&quot;, file);\n        connection.disconnect();\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>But this code works fine only in debug mode, when I start a program, most of the time it will throw - &quot;java.lang.RuntimeException: java.io.FileNotFoundException&quot; I tried to read image from URL only by using ImageIO.read and without HttpURLConnection, but it will always throw - &quot;Can't get input stream from URL!&quot;(in debug mode still works). Is there a way to fix this? Thank you</p>\n<p><strong>UPD: Solved!</strong>\nThe problems was in url from which file uploads with delay, and because program works fast, it didn't have time to download file and threw FileNotFoundException. For now I added <code>Thread.slepp(1000)</code> and it works.</p>\n"},{"tags":["java","selenium"],"comments":[{"owner":{"account_id":9804742,"reputation":3296,"user_id":8157304,"accept_rate":75,"display_name":"sound wave"},"score":0,"creation_date":1672911233,"post_id":75006885,"comment_id":132381021,"body_markdown":"is it ok if i post python code? cause i&#39;m not familiar with java","body":"is it ok if i post python code? cause i&#39;m not familiar with java"}],"answers":[{"tags":[],"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672919160,"creation_date":1672919160,"answer_id":75017913,"question_id":75006885,"body_markdown":"This works just fine:\r\n\r\n    String chromedriverPath = System.getProperty(&quot;user.dir&quot;) + &quot;\\\\resources\\\\chromedriver.exe&quot;;\r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;, chromedriverPath);\r\n    ChromeOptions options = new ChromeOptions();\r\n    options.addArguments(&quot;--ignore-certificate-errors&quot;);\r\n    options.addArguments(&quot;--start-maximized&quot;);\r\n    options.addArguments(&quot;--disable-notifications&quot;);\r\n    WebDriver driver = new ChromeDriver(options);\r\n    driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\r\n\r\n    driver.get(&quot;https://www.google.com&quot;);\r\n    driver.findElement(By.id(&quot;L2AGLb&quot;)).click();","title":"How to handle with Google Cookies window in Selenium","body":"<p>This works just fine:</p>\n<pre><code>String chromedriverPath = System.getProperty(&quot;user.dir&quot;) + &quot;\\\\resources\\\\chromedriver.exe&quot;;\nSystem.setProperty(&quot;webdriver.chrome.driver&quot;, chromedriverPath);\nChromeOptions options = new ChromeOptions();\noptions.addArguments(&quot;--ignore-certificate-errors&quot;);\noptions.addArguments(&quot;--start-maximized&quot;);\noptions.addArguments(&quot;--disable-notifications&quot;);\nWebDriver driver = new ChromeDriver(options);\ndriver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\n\ndriver.get(&quot;https://www.google.com&quot;);\ndriver.findElement(By.id(&quot;L2AGLb&quot;)).click();\n</code></pre>\n"}],"owner":{"account_id":27431792,"reputation":1,"user_id":20928364,"display_name":"CeBugger"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672919160,"creation_date":1672842500,"question_id":75006885,"body_markdown":"I can not find a way to handle with the Google Cookies window at the first navigation to google.com. I would like accept the cookies but I can not scroll down on the page. \r\n[screenshot here](https://i.stack.imgur.com/wjPhV.png)\r\n\r\nI guess focus is staying on the main page which is google.com but I could not switch to the cookies window. I have tried the iframe swithc, alert or popup iterator. None of them did not work. Any suggestion is appreciated.\r\n","title":"How to handle with Google Cookies window in Selenium","body":"<p>I can not find a way to handle with the Google Cookies window at the first navigation to google.com. I would like accept the cookies but I can not scroll down on the page.\n<a href=\"https://i.stack.imgur.com/wjPhV.png\" rel=\"nofollow noreferrer\">screenshot here</a></p>\n<p>I guess focus is staying on the main page which is google.com but I could not switch to the cookies window. I have tried the iframe swithc, alert or popup iterator. None of them did not work. Any suggestion is appreciated.</p>\n"},{"tags":["java","excel","apache-poi"],"comments":[{"owner":{"account_id":3685403,"reputation":9772,"user_id":3069254,"display_name":"Jorge_B"},"score":3,"creation_date":1392638327,"post_id":21828403,"comment_id":33037083,"body_markdown":"Are you totally sure that this output belongs to this program?","body":"Are you totally sure that this output belongs to this program?"},{"owner":{"account_id":125988,"reputation":4853,"user_id":2115021,"accept_rate":20,"display_name":"Kick"},"score":0,"creation_date":1392638507,"post_id":21828403,"comment_id":33037204,"body_markdown":"Dnt think the above code will throw any such error","body":"Dnt think the above code will throw any such error"},{"owner":{"account_id":3825012,"reputation":1457,"user_id":3172024,"display_name":"Naren"},"score":0,"creation_date":1392639608,"post_id":21828403,"comment_id":33037868,"body_markdown":"First refresh ur project in Eclipse then you can see it.. in the console there will be nothing .if you run this program","body":"First refresh ur project in Eclipse then you can see it.. in the console there will be nothing .if you run this program"},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":1,"creation_date":1392723915,"post_id":21828403,"comment_id":33079713,"body_markdown":"Looks like you&#39;re running a different program!","body":"Looks like you&#39;re running a different program!"}],"answers":[{"tags":[],"owner":{"account_id":27225279,"reputation":1,"user_id":20753875,"display_name":"Tamilarasi S"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672919151,"creation_date":1670824284,"answer_id":74767070,"question_id":21828403,"body_markdown":"Actually this error you will get while the Jar is still building. Just wait for few seconds. \r\n**Right Click** and then **Run** : It will work..!\r\n\r\n","title":"Error With creating an excel file from java POI","body":"<p>Actually this error you will get while the Jar is still building. Just wait for few seconds.\n<strong>Right Click</strong> and then <strong>Run</strong> : It will work..!</p>\n"}],"owner":{"account_id":2742280,"reputation":59,"user_id":2363546,"display_name":"mzpx"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":649,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672919151,"creation_date":1392638065,"question_id":21828403,"body_markdown":"Hi I would like to create an excel file from a java code, I put this code on eclipse but nothing happen\r\n\r\n    import org.apache.poi.ss.usermodel.Workbook;\r\n    import org.apache.poi.hssf.usermodel.HSSFWorkbook;\r\n    \r\n    import java.io.FileOutputStream;\r\n    \r\n    public class TestPOI1 {\r\n    \r\n         public static void main(String[] args) {\r\n             //create the new workbook\r\n             Workbook workbook = new HSSFWorkbook();\r\n    \r\n             try {\r\n                     //create the output stream to save the document on the hard drive\r\n                     FileOutputStream output = new FileOutputStream(&quot;Test1.xls&quot;);\r\n    \r\n                     //write the file onto the hard drive\r\n                     workbook.write(output);\r\n    \r\n                     //finish it up by closing the document\r\n                     output.close();\r\n             } catch(Exception e) {\r\n                     e.printStackTrace();\r\n             }   \r\n        }        \r\n    }\r\n\r\nin the console, this message is written\r\n\r\n     Usage: BiffDrawingToXml [options] inputWorkbook Options:\r\n     -exclude-workbook exclude workbook-level records\r\n     -sheet-indexes output sheets with specified indexes\r\n     -sheet-namek output sheets with specified name\r\n\r\nand I can&#39;t found my excel file in the hard drive or in the file project. thanks for help.","title":"Error With creating an excel file from java POI","body":"<p>Hi I would like to create an excel file from a java code, I put this code on eclipse but nothing happen</p>\n\n<pre><code>import org.apache.poi.ss.usermodel.Workbook;\nimport org.apache.poi.hssf.usermodel.HSSFWorkbook;\n\nimport java.io.FileOutputStream;\n\npublic class TestPOI1 {\n\n     public static void main(String[] args) {\n         //create the new workbook\n         Workbook workbook = new HSSFWorkbook();\n\n         try {\n                 //create the output stream to save the document on the hard drive\n                 FileOutputStream output = new FileOutputStream(\"Test1.xls\");\n\n                 //write the file onto the hard drive\n                 workbook.write(output);\n\n                 //finish it up by closing the document\n                 output.close();\n         } catch(Exception e) {\n                 e.printStackTrace();\n         }   \n    }        \n}\n</code></pre>\n\n<p>in the console, this message is written</p>\n\n<pre><code> Usage: BiffDrawingToXml [options] inputWorkbook Options:\n -exclude-workbook exclude workbook-level records\n -sheet-indexes output sheets with specified indexes\n -sheet-namek output sheets with specified name\n</code></pre>\n\n<p>and I can't found my excel file in the hard drive or in the file project. thanks for help.</p>\n"},{"tags":["java","oop","design-patterns"],"answers":[{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672918911,"creation_date":1672917446,"answer_id":75017611,"question_id":75017457,"body_markdown":"Instead of having those special items I&#39;d suggest you try the following:\r\n\r\n- Provide rules for discounts like you&#39;re already doing. Define a hierarchy of rules since you might not want to combine discounts (e.g. &quot;buy x, get y free&quot; and &quot;buy x and pay only y&quot;)\r\n- Add &quot;discount&quot; items if a rule applies, e.g.\r\n  - &quot;buy x, get y free&quot; -&gt; add a discount of &quot;free_items * item_price&quot;, e.g. &quot;buy 6 and get 2 free&quot; with a price of 4.99 -&gt; position with value &quot;-9.98&quot;\r\n  - &quot;buy x for price y&quot; -&gt; add discount of &quot;items * (item_price - discounted_price)&quot;\r\n  - &quot;buy item x and get item y for price z&quot; -&gt; add discount item for &quot;y&quot; with a value of &quot;amount_of_y * (price_of_y - z)&quot;\r\n\r\n\r\nIn the end the receipt could thus look like this (with each line being an item):\r\n\r\n    Item          Amount Unit price  Total\r\n    ======================================\r\n    Coke               4       0.99   3.96\r\n    Coke 4 for 3       1      -0.99  -0.99  //item added by the &quot;buy 4 get 1 free&quot; rule\r\n    Snickers           2       1.95   3.90\r\n    Snickers 1.70      2      -0.25  -0.50  //item added by the &quot;get Snickers for 1.70&quot; rule\r\n    Beer              11       1.50  16.50\r\n    Chips              1       2.69   2.69      \r\n    Chips (for 6 beer) 1      -2.69  -2.69  //item added by the &quot;buy 6 beer and get 1 bag of chips&quot; rule, applied once 1 bag of chips was in the cart  \r\n    ======================================\r\n    Total                            22.87\r\n\r\nThis has the advantage of showing the original price as well as the discounts that were added. Of course the order of elements could be different if needed but I&#39;d basically maintain it like this:\r\n\r\n    List&lt;Item&gt; basketItems; //items the customer added with the original price\r\n    List&lt;Item&gt; discountItems; //items created by rules to show the discounts that were applied\r\n\r\n    List&lt;Item&gt; finalItems; //a combination of basketItems and discountItems to show in the output - either just concatenate or sort by item, group, price etc. as needed","title":"How to design a &#39;bundle&#39; discount for a supermarket checkout?","body":"<p>Instead of having those special items I'd suggest you try the following:</p>\n<ul>\n<li>Provide rules for discounts like you're already doing. Define a hierarchy of rules since you might not want to combine discounts (e.g. &quot;buy x, get y free&quot; and &quot;buy x and pay only y&quot;)</li>\n<li>Add &quot;discount&quot; items if a rule applies, e.g.\n<ul>\n<li>&quot;buy x, get y free&quot; -&gt; add a discount of &quot;free_items * item_price&quot;, e.g. &quot;buy 6 and get 2 free&quot; with a price of 4.99 -&gt; position with value &quot;-9.98&quot;</li>\n<li>&quot;buy x for price y&quot; -&gt; add discount of &quot;items * (item_price - discounted_price)&quot;</li>\n<li>&quot;buy item x and get item y for price z&quot; -&gt; add discount item for &quot;y&quot; with a value of &quot;amount_of_y * (price_of_y - z)&quot;</li>\n</ul>\n</li>\n</ul>\n<p>In the end the receipt could thus look like this (with each line being an item):</p>\n<pre><code>Item          Amount Unit price  Total\n======================================\nCoke               4       0.99   3.96\nCoke 4 for 3       1      -0.99  -0.99  //item added by the &quot;buy 4 get 1 free&quot; rule\nSnickers           2       1.95   3.90\nSnickers 1.70      2      -0.25  -0.50  //item added by the &quot;get Snickers for 1.70&quot; rule\nBeer              11       1.50  16.50\nChips              1       2.69   2.69      \nChips (for 6 beer) 1      -2.69  -2.69  //item added by the &quot;buy 6 beer and get 1 bag of chips&quot; rule, applied once 1 bag of chips was in the cart  \n======================================\nTotal                            22.87\n</code></pre>\n<p>This has the advantage of showing the original price as well as the discounts that were added. Of course the order of elements could be different if needed but I'd basically maintain it like this:</p>\n<pre><code>List&lt;Item&gt; basketItems; //items the customer added with the original price\nList&lt;Item&gt; discountItems; //items created by rules to show the discounts that were applied\n\nList&lt;Item&gt; finalItems; //a combination of basketItems and discountItems to show in the output - either just concatenate or sort by item, group, price etc. as needed\n</code></pre>\n"}],"owner":{"account_id":17492472,"reputation":11,"user_id":12684339,"display_name":"hfg124g76g1"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":225,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672918911,"creation_date":1672916651,"question_id":75017457,"body_markdown":"I&#39;m working on an exercise to create a supermarket design with various discounts for the products. Examples of discounts are:\r\n- Buy x amount of an item to get y free\r\n- Buy y amount of an item for $y\r\n- Buy item x and item y for $z\r\n\r\nThe first two discounts I have managed to create. But since the discount is calculated against the *basket item*, I&#39;m struggling to see how I can get the discount to apply to more than one products. I could create a brand new item and label it &quot;x and y&quot; but that feels a bit like cheating. Please advise\r\n\r\n\r\n\r\n```\r\nimport java.math.BigDecimal;\r\n\r\npublic class Item {\r\n\r\n    private final String sku;\r\n    private final BigDecimal unitPrice;\r\n\r\n    public Item(String sku, BigDecimal unitPrice) {\r\n        this.sku = sku;\r\n        this.unitPrice = unitPrice;\r\n    }\r\n\r\n    public BigDecimal getUnitPrice() {\r\n        return unitPrice;\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n```\r\nimport java.math.BigDecimal;\r\n\r\npublic class BasketItem {\r\n\r\n    private final Item item;\r\n    private int quantity;\r\n    private final Discount discount;\r\n\r\n    public BasketItem(Item item, Discount discount) {\r\n        this.item = item;\r\n        this.discount = discount;\r\n        this.quantity = 1;\r\n    }\r\n\r\n    public BasketItem(Item item, Discount discount, int quantity) {\r\n        this.item = item;\r\n        this.discount = discount;\r\n        this.quantity = quantity;\r\n    }\r\n\r\n    public void increment() {\r\n        this.quantity++;\r\n    }\r\n\r\n    public BigDecimal calculateSubTotal() {\r\n        return item.getUnitPrice().multiply(new BigDecimal(quantity));\r\n    }\r\n\r\n    public BigDecimal calculateDiscount() {\r\n        return discount.apply(this);\r\n    }\r\n\r\n    public Item getItem() {\r\n        return item;\r\n    }\r\n\r\n    public int getQuantity() {\r\n        return quantity;\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n```\r\nimport java.math.BigDecimal;\r\n\r\npublic interface Discount {\r\n\r\n    BigDecimal apply(BasketItem item);\r\n\r\n}\r\n```\r\n\r\n\r\n```\r\nimport java.math.BigDecimal;\r\nimport java.security.InvalidParameterException;\r\n\r\npublic class BuyXGetYFree implements Discount {\r\n\r\n    private final int buy;\r\n    private final int free;\r\n\r\n    public BuyXGetYFree(int buy, int free) {\r\n        if (buy &lt; 1) {\r\n            throw new InvalidParameterException(&quot;Can&#39;t buy less than 1 item&quot;);\r\n        }\r\n\r\n        if (free &lt; 1) {\r\n            throw new InvalidParameterException(&quot;Can&#39;t free less than 1 item for free&quot;);\r\n        }\r\n\r\n        if (free &gt; buy) {\r\n            throw new InvalidParameterException(&quot;The free amount must not exceed the purchased amount&quot;);\r\n        }\r\n\r\n        this.buy = buy;\r\n        this.free = free;\r\n    }\r\n\r\n    @Override\r\n    public BigDecimal apply(BasketItem basketItem) {\r\n\r\n        int quantity = basketItem.getQuantity();\r\n        BigDecimal unitPrice = basketItem.getItem().getUnitPrice();\r\n\r\n        if (buy + free &gt; quantity &amp;&amp; quantity &gt; buy) {\r\n            return unitPrice.multiply(BigDecimal.valueOf(quantity - buy));\r\n        }\r\n\r\n        int multiplier = quantity / (buy + free);\r\n        int forFree = multiplier * free;\r\n        return unitPrice.multiply(BigDecimal.valueOf(forFree));\r\n    }\r\n    \r\n}\r\n\r\n\r\n```\r\n\r\n\r\n\r\n```\r\nimport java.math.BigDecimal;\r\n\r\npublic class NoDiscount implements Discount {\r\n\r\n    @Override\r\n    public BigDecimal apply(BasketItem item) {\r\n        return BigDecimal.ZERO;\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n```\r\nimport java.math.BigDecimal;\r\nimport java.security.InvalidParameterException;\r\n\r\npublic class BuyXForY implements Discount{\r\n\r\n    int buy;\r\n    BigDecimal pay;\r\n\r\n    public BuyXForY(int buy, BigDecimal pay) {\r\n        if (buy &lt; 1) {\r\n            throw new InvalidParameterException(&quot;Buy must be at least 1&quot;);\r\n        }\r\n        this.buy = buy;\r\n        this.pay = pay;\r\n    }\r\n\r\n    @Override\r\n    public BigDecimal apply(BasketItem item) {\r\n        int quantity = item.getQuantity();\r\n\r\n        if (quantity &lt; buy) {\r\n            return BigDecimal.ZERO;\r\n        }\r\n\r\n        int multiplier = quantity / buy;\r\n        int remainder = quantity % buy;\r\n\r\n        BigDecimal buyAtDiscountedPrice = new BigDecimal(multiplier).multiply(pay);\r\n        BigDecimal buyAtNormalPrice = new BigDecimal(multiplier).multiply(new BigDecimal(remainder));\r\n        BigDecimal normalPrice = new BigDecimal(quantity).multiply(item.getItem().getUnitPrice());\r\n\r\n        return normalPrice.subtract(buyAtDiscountedPrice.add(buyAtNormalPrice));\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n```\r\npublic class DiscountAssignment {\r\n\r\n    private final Discount discount;\r\n    private final Item item;\r\n\r\n    public DiscountAssignment(Discount discount, Item item) {\r\n        this.discount = discount;\r\n        this.item = item;\r\n    }\r\n\r\n    public Discount getDiscount() {\r\n        return discount;\r\n    }\r\n\r\n    public Item getItem() {\r\n        return item;\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n```\r\nimport java.math.BigDecimal;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Optional;\r\n\r\npublic class Checkout {\r\n\r\n    private final List&lt;BasketItem&gt; basketItems;\r\n    private final List&lt;DiscountAssignment&gt; discountAssignments;\r\n\r\n    public Checkout(List&lt;DiscountAssignment&gt; discountAssignments) {\r\n        this.basketItems = new ArrayList&lt;&gt;();\r\n        this.discountAssignments = discountAssignments;\r\n    }\r\n\r\n    public void scan(Item item) {\r\n        Optional&lt;BasketItem&gt; basketItemOptional = basketItems.stream().filter(basketItem -&gt; basketItem.getItem().equals(item)).findFirst();\r\n\r\n        if (basketItemOptional.isPresent()) {\r\n            basketItemOptional.get().increment();\r\n            return;\r\n        }\r\n\r\n        Optional&lt;DiscountAssignment&gt; discountsToApply = discountAssignments.stream().filter(discountAssignment -&gt; discountAssignment.getItem().equals(item)).findFirst();\r\n\r\n        if (discountsToApply.isPresent()) {\r\n            basketItems.add(new BasketItem(item, discountsToApply.get().getDiscount()));\r\n        } else {\r\n            basketItems.add(new BasketItem(item, new NoDiscount()));\r\n        }\r\n    }\r\n\r\n    public BigDecimal total() {\r\n        System.out.println(basketItems);\r\n\r\n        return basketItems.stream()\r\n                .map(BasketItem::calculateSubTotal)\r\n                .reduce(BigDecimal.ZERO, BigDecimal::add)\r\n                .subtract(basketItems.stream()\r\n                        .map(BasketItem::calculateDiscount)\r\n                        .reduce(BigDecimal.ZERO, BigDecimal::add));\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nA quick test outputs a total cost of 4 \r\n\r\n```\r\nimport java.math.BigDecimal;\r\nimport java.util.List;\r\n\r\npublic class Test {\r\n\r\n    public static void main(String[] args) {\r\n        Item drink = new Item(&quot;Drink&quot;, new BigDecimal(1));\r\n        Item candy = new Item(&quot;Candy&quot;, new BigDecimal(1));\r\n\r\n        DiscountAssignment buyOneGetOneFreeDiscount = new DiscountAssignment(new BuyXGetYFree(1, 1), drink);\r\n        DiscountAssignment buyTwoForOneDollar = new DiscountAssignment(new BuyXForY(2, BigDecimal.ONE), candy);\r\n\r\n        Checkout checkout = new Checkout(List.of(buyOneGetOneFreeDiscount, buyTwoForOneDollar));\r\n        checkout.scan(drink);\r\n        checkout.scan(drink);\r\n        checkout.scan(drink);\r\n        checkout.scan(drink);\r\n        checkout.scan(candy);\r\n        checkout.scan(candy);\r\n\r\n        System.out.println(&quot;Total cost: &quot; + checkout.total());\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\nI tried created a brand new bundle item. But each item must be scanned individually. ","title":"How to design a &#39;bundle&#39; discount for a supermarket checkout?","body":"<p>I'm working on an exercise to create a supermarket design with various discounts for the products. Examples of discounts are:</p>\n<ul>\n<li>Buy x amount of an item to get y free</li>\n<li>Buy y amount of an item for $y</li>\n<li>Buy item x and item y for $z</li>\n</ul>\n<p>The first two discounts I have managed to create. But since the discount is calculated against the <em>basket item</em>, I'm struggling to see how I can get the discount to apply to more than one products. I could create a brand new item and label it &quot;x and y&quot; but that feels a bit like cheating. Please advise</p>\n<pre><code>import java.math.BigDecimal;\n\npublic class Item {\n\n    private final String sku;\n    private final BigDecimal unitPrice;\n\n    public Item(String sku, BigDecimal unitPrice) {\n        this.sku = sku;\n        this.unitPrice = unitPrice;\n    }\n\n    public BigDecimal getUnitPrice() {\n        return unitPrice;\n    }\n}\n\n</code></pre>\n<pre><code>import java.math.BigDecimal;\n\npublic class BasketItem {\n\n    private final Item item;\n    private int quantity;\n    private final Discount discount;\n\n    public BasketItem(Item item, Discount discount) {\n        this.item = item;\n        this.discount = discount;\n        this.quantity = 1;\n    }\n\n    public BasketItem(Item item, Discount discount, int quantity) {\n        this.item = item;\n        this.discount = discount;\n        this.quantity = quantity;\n    }\n\n    public void increment() {\n        this.quantity++;\n    }\n\n    public BigDecimal calculateSubTotal() {\n        return item.getUnitPrice().multiply(new BigDecimal(quantity));\n    }\n\n    public BigDecimal calculateDiscount() {\n        return discount.apply(this);\n    }\n\n    public Item getItem() {\n        return item;\n    }\n\n    public int getQuantity() {\n        return quantity;\n    }\n\n}\n</code></pre>\n<pre><code>import java.math.BigDecimal;\n\npublic interface Discount {\n\n    BigDecimal apply(BasketItem item);\n\n}\n</code></pre>\n<pre><code>import java.math.BigDecimal;\nimport java.security.InvalidParameterException;\n\npublic class BuyXGetYFree implements Discount {\n\n    private final int buy;\n    private final int free;\n\n    public BuyXGetYFree(int buy, int free) {\n        if (buy &lt; 1) {\n            throw new InvalidParameterException(&quot;Can't buy less than 1 item&quot;);\n        }\n\n        if (free &lt; 1) {\n            throw new InvalidParameterException(&quot;Can't free less than 1 item for free&quot;);\n        }\n\n        if (free &gt; buy) {\n            throw new InvalidParameterException(&quot;The free amount must not exceed the purchased amount&quot;);\n        }\n\n        this.buy = buy;\n        this.free = free;\n    }\n\n    @Override\n    public BigDecimal apply(BasketItem basketItem) {\n\n        int quantity = basketItem.getQuantity();\n        BigDecimal unitPrice = basketItem.getItem().getUnitPrice();\n\n        if (buy + free &gt; quantity &amp;&amp; quantity &gt; buy) {\n            return unitPrice.multiply(BigDecimal.valueOf(quantity - buy));\n        }\n\n        int multiplier = quantity / (buy + free);\n        int forFree = multiplier * free;\n        return unitPrice.multiply(BigDecimal.valueOf(forFree));\n    }\n    \n}\n\n\n</code></pre>\n<pre><code>import java.math.BigDecimal;\n\npublic class NoDiscount implements Discount {\n\n    @Override\n    public BigDecimal apply(BasketItem item) {\n        return BigDecimal.ZERO;\n    }\n}\n\n</code></pre>\n<pre><code>import java.math.BigDecimal;\nimport java.security.InvalidParameterException;\n\npublic class BuyXForY implements Discount{\n\n    int buy;\n    BigDecimal pay;\n\n    public BuyXForY(int buy, BigDecimal pay) {\n        if (buy &lt; 1) {\n            throw new InvalidParameterException(&quot;Buy must be at least 1&quot;);\n        }\n        this.buy = buy;\n        this.pay = pay;\n    }\n\n    @Override\n    public BigDecimal apply(BasketItem item) {\n        int quantity = item.getQuantity();\n\n        if (quantity &lt; buy) {\n            return BigDecimal.ZERO;\n        }\n\n        int multiplier = quantity / buy;\n        int remainder = quantity % buy;\n\n        BigDecimal buyAtDiscountedPrice = new BigDecimal(multiplier).multiply(pay);\n        BigDecimal buyAtNormalPrice = new BigDecimal(multiplier).multiply(new BigDecimal(remainder));\n        BigDecimal normalPrice = new BigDecimal(quantity).multiply(item.getItem().getUnitPrice());\n\n        return normalPrice.subtract(buyAtDiscountedPrice.add(buyAtNormalPrice));\n    }\n}\n\n</code></pre>\n<pre><code>public class DiscountAssignment {\n\n    private final Discount discount;\n    private final Item item;\n\n    public DiscountAssignment(Discount discount, Item item) {\n        this.discount = discount;\n        this.item = item;\n    }\n\n    public Discount getDiscount() {\n        return discount;\n    }\n\n    public Item getItem() {\n        return item;\n    }\n\n}\n</code></pre>\n<pre><code>import java.math.BigDecimal;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Optional;\n\npublic class Checkout {\n\n    private final List&lt;BasketItem&gt; basketItems;\n    private final List&lt;DiscountAssignment&gt; discountAssignments;\n\n    public Checkout(List&lt;DiscountAssignment&gt; discountAssignments) {\n        this.basketItems = new ArrayList&lt;&gt;();\n        this.discountAssignments = discountAssignments;\n    }\n\n    public void scan(Item item) {\n        Optional&lt;BasketItem&gt; basketItemOptional = basketItems.stream().filter(basketItem -&gt; basketItem.getItem().equals(item)).findFirst();\n\n        if (basketItemOptional.isPresent()) {\n            basketItemOptional.get().increment();\n            return;\n        }\n\n        Optional&lt;DiscountAssignment&gt; discountsToApply = discountAssignments.stream().filter(discountAssignment -&gt; discountAssignment.getItem().equals(item)).findFirst();\n\n        if (discountsToApply.isPresent()) {\n            basketItems.add(new BasketItem(item, discountsToApply.get().getDiscount()));\n        } else {\n            basketItems.add(new BasketItem(item, new NoDiscount()));\n        }\n    }\n\n    public BigDecimal total() {\n        System.out.println(basketItems);\n\n        return basketItems.stream()\n                .map(BasketItem::calculateSubTotal)\n                .reduce(BigDecimal.ZERO, BigDecimal::add)\n                .subtract(basketItems.stream()\n                        .map(BasketItem::calculateDiscount)\n                        .reduce(BigDecimal.ZERO, BigDecimal::add));\n    }\n\n}\n\n</code></pre>\n<p>A quick test outputs a total cost of 4</p>\n<pre><code>import java.math.BigDecimal;\nimport java.util.List;\n\npublic class Test {\n\n    public static void main(String[] args) {\n        Item drink = new Item(&quot;Drink&quot;, new BigDecimal(1));\n        Item candy = new Item(&quot;Candy&quot;, new BigDecimal(1));\n\n        DiscountAssignment buyOneGetOneFreeDiscount = new DiscountAssignment(new BuyXGetYFree(1, 1), drink);\n        DiscountAssignment buyTwoForOneDollar = new DiscountAssignment(new BuyXForY(2, BigDecimal.ONE), candy);\n\n        Checkout checkout = new Checkout(List.of(buyOneGetOneFreeDiscount, buyTwoForOneDollar));\n        checkout.scan(drink);\n        checkout.scan(drink);\n        checkout.scan(drink);\n        checkout.scan(drink);\n        checkout.scan(candy);\n        checkout.scan(candy);\n\n        System.out.println(&quot;Total cost: &quot; + checkout.total());\n    }\n\n}\n\n</code></pre>\n<p>I tried created a brand new bundle item. But each item must be scanned individually.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":17258352,"reputation":94,"user_id":12496947,"display_name":"Nouman Ahmed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672918735,"creation_date":1672918735,"answer_id":75017845,"question_id":75017290,"body_markdown":"I think you have Spring tests running when you try to build your project. So either fix the test or disable it if you don&#39;t need it for time being. ","title":"Project stops building after adding spring-boot-starter-oauth2-client","body":"<p>I think you have Spring tests running when you try to build your project. So either fix the test or disable it if you don't need it for time being.</p>\n"}],"owner":{"account_id":13970001,"reputation":1974,"user_id":10088866,"display_name":"Clyde Barrow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672918735,"creation_date":1672915802,"question_id":75017290,"body_markdown":"I have a very simple spring boot app with dependencies like \r\n\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-actuator&#39;\r\n    \timplementation &quot;org.springframework.boot:spring-boot-starter-validation&quot;\r\n    \timplementation &quot;org.springframework.boot:spring-boot-starter-actuator&quot;\r\n    \timplementation&quot;org.togglz:togglz-spring-boot-starter:3.2.1&quot;\r\n    \timplementation &quot;org.togglz:togglz-console:3.2.1&quot;\r\n    \tcompileOnly &#39;org.projectlombok:lombok&#39;\r\n    \tannotationProcessor &#39;org.projectlombok:lombok&#39;\r\n    \ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n\r\nThe app is working fine but when I am adding the `spring-boot-starter-oauth2-client` suddenly the spring context cannot load and I get exception like \r\n```\r\njava.lang.IllegalStateException: Failed to load ApplicationContext\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:98) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43) ~[spring-boot-test-autoconfigure-2.7.4.jar:2.7.4]\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[na:na]\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[na:na]\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[na:na]\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[na:na]\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[na:na]\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[na:na]\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[na:na]\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[na:na]\r\n\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53) ~[na:na]\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99) ~[na:na]\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79) ~[na:na]\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75) ~[na:na]\r\n\tat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]\r\n\tat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]\r\n\tat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]\r\n\tat jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]\r\n\tat org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]\r\n\tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]\r\n\tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]\r\n\tat worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]\r\n\tat worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;featureManager&#39; defined in class path resource [org/togglz/spring/boot/actuate/autoconfigure/TogglzAutoConfiguration$FeatureManagerConfiguration.class]: Unsatisfied dependency expressed through method &#39;featureManager&#39; parameter 2; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.togglz.core.user.UserProvider&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.23.jar:5.3.23]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.23.jar:5.3.23]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.4.jar:2.7.4]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.4.jar:2.7.4]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.4.jar:2.7.4]\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.4.jar:2.7.4]\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:141) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:90) ~[spring-test-5.3.23.jar:5.3.23]\r\n\t... 88 common frames omitted\r\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.togglz.core.user.UserProvider&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1801) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1357) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\t... 106 common frames omitted\r\n```\r\n\r\nI see that it has something to do with the actuator but I don&#39;t understand why it happens when I add this particular dependency. How to fix it ? \r\n \r\nI created a small example of the issue -&gt; https://github.com/solveretur/springissue/blob/main/build.gradle\r\n","title":"Project stops building after adding spring-boot-starter-oauth2-client","body":"<p>I have a very simple spring boot app with dependencies like</p>\n<pre><code>    implementation 'org.springframework.boot:spring-boot-starter-actuator'\n    implementation &quot;org.springframework.boot:spring-boot-starter-validation&quot;\n    implementation &quot;org.springframework.boot:spring-boot-starter-actuator&quot;\n    implementation&quot;org.togglz:togglz-spring-boot-starter:3.2.1&quot;\n    implementation &quot;org.togglz:togglz-console:3.2.1&quot;\n    compileOnly 'org.projectlombok:lombok'\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n</code></pre>\n<p>The app is working fine but when I am adding the <code>spring-boot-starter-oauth2-client</code> suddenly the spring context cannot load and I get exception like</p>\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:98) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43) ~[spring-boot-test-autoconfigure-2.7.4.jar:2.7.4]\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]\n    at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]\n    at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]\n    at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[na:na]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[na:na]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[na:na]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[na:na]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[na:na]\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[na:na]\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[na:na]\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[na:na]\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53) ~[na:na]\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99) ~[na:na]\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79) ~[na:na]\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75) ~[na:na]\n    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]\n    at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]\n    at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]\n    at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]\n    at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]\n    at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]\n    at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]\n    at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]\n    at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'featureManager' defined in class path resource [org/togglz/spring/boot/actuate/autoconfigure/TogglzAutoConfiguration$FeatureManagerConfiguration.class]: Unsatisfied dependency expressed through method 'featureManager' parameter 2; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.togglz.core.user.UserProvider' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.23.jar:5.3.23]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.23.jar:5.3.23]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.4.jar:2.7.4]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.4.jar:2.7.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.4.jar:2.7.4]\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.4.jar:2.7.4]\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:141) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:90) ~[spring-test-5.3.23.jar:5.3.23]\n    ... 88 common frames omitted\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.togglz.core.user.UserProvider' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1801) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1357) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.23.jar:5.3.23]\n    ... 106 common frames omitted\n</code></pre>\n<p>I see that it has something to do with the actuator but I don't understand why it happens when I add this particular dependency. How to fix it ?</p>\n<p>I created a small example of the issue -&gt; <a href=\"https://github.com/solveretur/springissue/blob/main/build.gradle\" rel=\"nofollow noreferrer\">https://github.com/solveretur/springissue/blob/main/build.gradle</a></p>\n"},{"tags":["java","spring-boot","visual-studio-code","azure-appservice"],"comments":[{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1672909357,"post_id":75010485,"comment_id":132380405,"body_markdown":"You should use a version of the Java runtime org.springframework.boot.loader.WarLauncher on Azure App Service that is compatible with the version of the .class file.","body":"You should use a version of the Java runtime org.springframework.boot.loader.WarLauncher on Azure App Service that is compatible with the version of the .class file."},{"owner":{"account_id":4206618,"reputation":808,"user_id":4180447,"accept_rate":47,"display_name":"tarekahf"},"score":0,"creation_date":1672910291,"post_id":75010485,"comment_id":132380711,"body_markdown":"I tried and created several App Services with different JDK versions. When I selected JDK 17 the Container Crash error disappeared however I still cannot browse the service. I am still seeing the same error response I mentioned in the post above.","body":"I tried and created several App Services with different JDK versions. When I selected JDK 17 the Container Crash error disappeared however I still cannot browse the service. I am still seeing the same error response I mentioned in the post above."},{"owner":{"account_id":4206618,"reputation":808,"user_id":4180447,"accept_rate":47,"display_name":"tarekahf"},"score":0,"creation_date":1672912657,"post_id":75010485,"comment_id":132381452,"body_markdown":"@JialeDu check the update I added to the post above.","body":"@JialeDu check the update I added to the post above."},{"owner":{"account_id":405484,"reputation":34324,"user_id":774398,"accept_rate":83,"display_name":"Patrick"},"score":0,"creation_date":1678281605,"post_id":75010485,"comment_id":133501740,"body_markdown":"Could also be this issue: https://github.com/spring-projects/spring-boot/issues/33974","body":"Could also be this issue: <a href=\"https://github.com/spring-projects/spring-boot/issues/33974\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/issues/33974</a>"}],"answers":[{"tags":[],"owner":{"account_id":4206618,"reputation":808,"user_id":4180447,"accept_rate":47,"display_name":"tarekahf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672918468,"creation_date":1672917782,"answer_id":75017674,"question_id":75010485,"body_markdown":"I checked the steps from:\r\n\r\nhttps://learn.microsoft.com/en-us/azure/app-service/quickstart-java?pivots=platform-linux-development-environment-maven&amp;tabs=tomcat\r\n\r\nand, I combined the steps on the project I used earlier, mainly I ran the following commands:\r\n\r\n```\r\nPS&gt; cd complete\r\nPS&gt; mvn com.microsoft.azure:azure-webapp-maven-plugin:2.5.0:config\r\nPS&gt; mvn package azure-webapp:deploy\r\n```\r\nNote that when creating an App Service, the selection of version `Java 17` and web container `Java SE` is required to make it successful. Also, I was able to create the app service either using Maven command lines or using the Azure portal. I was unable to create the App Service with Java 17 from Azure Extension.\r\n\r\nThe maven config adds the App Service setup to the pom.xml:\r\n\r\n```\r\n  &lt;build&gt; \r\n    &lt;plugins&gt; \r\n      &lt;plugin&gt; \r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  \r\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; \r\n      &lt;/plugin&gt;  \r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\r\n        &lt;artifactId&gt;azure-webapp-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.5.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;schemaVersion&gt;v2&lt;/schemaVersion&gt;\r\n          &lt;subscriptionId&gt;dd9aa0d1-f465-4cf3-a0e0-88aa1eb9a8c1&lt;/subscriptionId&gt;\r\n          &lt;resourceGroup&gt;spring-boot-complete-1672914653291-rg&lt;/resourceGroup&gt;\r\n          &lt;appName&gt;spring-boot-complete-1672914653291&lt;/appName&gt;\r\n          &lt;pricingTier&gt;P1v2&lt;/pricingTier&gt;\r\n          &lt;region&gt;centralus&lt;/region&gt;\r\n          &lt;runtime&gt;\r\n            &lt;os&gt;Linux&lt;/os&gt;\r\n            &lt;javaVersion&gt;Java 17&lt;/javaVersion&gt;\r\n            &lt;webContainer&gt;Java SE&lt;/webContainer&gt;\r\n          &lt;/runtime&gt;\r\n          &lt;deployment&gt;\r\n            &lt;resources&gt;\r\n              &lt;resource&gt;\r\n                &lt;directory&gt;${project.basedir}/target&lt;/directory&gt;\r\n                &lt;includes&gt;\r\n                  &lt;include&gt;*.jar&lt;/include&gt;\r\n                &lt;/includes&gt;\r\n              &lt;/resource&gt;\r\n            &lt;/resources&gt;\r\n          &lt;/deployment&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt; \r\n  &lt;/build&gt; \r\n```\r\n\r\nAfter following the above steps, it worked right away. I was able to make changes and right-click on the JAR file and deploy to the App Service again without any problem.\r\n\r\nIt&#39;s clear the article from VS Code website is missing those steps.","title":"Errors navigating to Azure App Service after deploying Spring Boot Java App to Linux App Service","body":"<p>I checked the steps from:</p>\n<p><a href=\"https://learn.microsoft.com/en-us/azure/app-service/quickstart-java?pivots=platform-linux-development-environment-maven&amp;tabs=tomcat\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/app-service/quickstart-java?pivots=platform-linux-development-environment-maven&amp;tabs=tomcat</a></p>\n<p>and, I combined the steps on the project I used earlier, mainly I ran the following commands:</p>\n<pre><code>PS&gt; cd complete\nPS&gt; mvn com.microsoft.azure:azure-webapp-maven-plugin:2.5.0:config\nPS&gt; mvn package azure-webapp:deploy\n</code></pre>\n<p>Note that when creating an App Service, the selection of version <code>Java 17</code> and web container <code>Java SE</code> is required to make it successful. Also, I was able to create the app service either using Maven command lines or using the Azure portal. I was unable to create the App Service with Java 17 from Azure Extension.</p>\n<p>The maven config adds the App Service setup to the pom.xml:</p>\n<pre><code>  &lt;build&gt; \n    &lt;plugins&gt; \n      &lt;plugin&gt; \n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  \n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; \n      &lt;/plugin&gt;  \n      &lt;plugin&gt;\n        &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\n        &lt;artifactId&gt;azure-webapp-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.5.0&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;schemaVersion&gt;v2&lt;/schemaVersion&gt;\n          &lt;subscriptionId&gt;dd9aa0d1-f465-4cf3-a0e0-88aa1eb9a8c1&lt;/subscriptionId&gt;\n          &lt;resourceGroup&gt;spring-boot-complete-1672914653291-rg&lt;/resourceGroup&gt;\n          &lt;appName&gt;spring-boot-complete-1672914653291&lt;/appName&gt;\n          &lt;pricingTier&gt;P1v2&lt;/pricingTier&gt;\n          &lt;region&gt;centralus&lt;/region&gt;\n          &lt;runtime&gt;\n            &lt;os&gt;Linux&lt;/os&gt;\n            &lt;javaVersion&gt;Java 17&lt;/javaVersion&gt;\n            &lt;webContainer&gt;Java SE&lt;/webContainer&gt;\n          &lt;/runtime&gt;\n          &lt;deployment&gt;\n            &lt;resources&gt;\n              &lt;resource&gt;\n                &lt;directory&gt;${project.basedir}/target&lt;/directory&gt;\n                &lt;includes&gt;\n                  &lt;include&gt;*.jar&lt;/include&gt;\n                &lt;/includes&gt;\n              &lt;/resource&gt;\n            &lt;/resources&gt;\n          &lt;/deployment&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt; \n  &lt;/build&gt; \n</code></pre>\n<p>After following the above steps, it worked right away. I was able to make changes and right-click on the JAR file and deploy to the App Service again without any problem.</p>\n<p>It's clear the article from VS Code website is missing those steps.</p>\n"}],"owner":{"account_id":4206618,"reputation":808,"user_id":4180447,"accept_rate":47,"display_name":"tarekahf"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":577,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75017674,"answer_count":1,"score":0,"last_activity_date":1672918468,"creation_date":1672861139,"question_id":75010485,"body_markdown":"I followed the steps here:\r\n\r\nhttps://code.visualstudio.com/docs/java/java-webapp#_deploy-web-apps-to-the-cloud\r\n\r\nand deployed the app under the &quot;Complete&quot; folder to Azure App Service. I had to change the packaging type from JAR to WAR in pom.xml so that the deployment was successful, otherwise, it was not deploying and was getting errors something as cannot deploy JAR artifact.\r\n\r\nWhen I open the Azure App Service URL, I get the following error response:\r\n\r\n```\r\nHTTP Status 404 – Not Found\r\nType Status Report\r\n\r\nMessage The requested resource [/] is not available\r\n\r\nDescription The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.\r\n\r\nApache Tomcat/8.5.78\r\n```\r\n\r\nI did enable the logs and diagnostics and I see the following error under App Service | AppServiceName | Diagnose and solve problems:\r\n\r\n```\r\nContainer Crash\r\nDisplays application logs for why the container may have crashed\r\nApplication Errors that may have caused the container to crash were detected\r\n2023-01-04T17:04:36.769939898Z Picked up JAVA_TOOL_OPTIONS: -Xmx716M -Djava.net.preferIPv4Stack=true 2023-01-04T17:04:37.193667111Z Error: LinkageError occurred while loading main class org.springframework.boot.loader.WarLauncher2023-01-04T17:04:37.197640485Z java.lang.UnsupportedClassVersionError: org/springframework/boot/loader/WarLauncher has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 55.0 \r\n```\r\n\r\n\r\nBelow is the pom.xml after modifying the `java.version` from 17 to 18 and packaging from jar to war:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-complete&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;spring-boot-complete&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;18&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- tag::actuator[] --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- end::actuator[] --&gt;\r\n\r\n\t\t&lt;!-- tag::tests[] --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- end::tests[] --&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n``` \r\n\r\nThe JDK used was JDK 18 in VS Code on my local and the one deployed on Azure App Service was JDK 11. The Spring Boot configured in the pom.xml seems to be based on JDK 17. I repeated the deployment and chose App Service JDK 17 and Tomcat 10. This time I didn&#39;t see the error above in the diagnostic logs, but still, I see the same error response when I navigate to the app service URL.\r\n\r\nUpdate 1\r\n===\r\nI followed the steps from this article and it worked from the first time: https://learn.microsoft.com/en-us/azure/app-service/quickstart-java?pivots=platform-linux-development-environment-maven&amp;tabs=tomcat\r\n\r\nI think the missing step from the first article is the configuration of Maven `com.microsoft.azure:azure-webapp-maven-plugin`. I need to check it out. The steps create the `helloworld` app with the following pom.xml. I think I cam compare and figure out the changes.\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;  \r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;  \r\n  &lt;groupId&gt;example.demo&lt;/groupId&gt;  \r\n  &lt;artifactId&gt;helloworld&lt;/artifactId&gt;  \r\n  &lt;packaging&gt;war&lt;/packaging&gt;  \r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;  \r\n  &lt;name&gt;helloworld Maven Webapp&lt;/name&gt;  \r\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;  \r\n  &lt;dependencies&gt; \r\n    &lt;dependency&gt; \r\n      &lt;groupId&gt;junit&lt;/groupId&gt;  \r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;  \r\n      &lt;version&gt;3.8.1&lt;/version&gt;  \r\n      &lt;scope&gt;test&lt;/scope&gt; \r\n    &lt;/dependency&gt; \r\n  &lt;/dependencies&gt;  \r\n  &lt;build&gt; \r\n    &lt;finalName&gt;helloworld&lt;/finalName&gt;  \r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\r\n        &lt;artifactId&gt;azure-webapp-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.5.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;schemaVersion&gt;v2&lt;/schemaVersion&gt;\r\n          &lt;subscriptionId&gt;dd9aa0d1-f465-4cf3-a0e0-88aa1eb9a8c1&lt;/subscriptionId&gt;\r\n          &lt;resourceGroup&gt;helloworld-1672911087928-rg&lt;/resourceGroup&gt;\r\n          &lt;appName&gt;helloworld-1672911087928&lt;/appName&gt;\r\n          &lt;pricingTier&gt;P1v2&lt;/pricingTier&gt;\r\n          &lt;region&gt;centralus&lt;/region&gt;\r\n          &lt;runtime&gt;\r\n            &lt;os&gt;Linux&lt;/os&gt;\r\n            &lt;javaVersion&gt;Java 11&lt;/javaVersion&gt;\r\n            &lt;webContainer&gt;Tomcat 8.5&lt;/webContainer&gt;\r\n          &lt;/runtime&gt;\r\n          &lt;deployment&gt;\r\n            &lt;resources&gt;\r\n              &lt;resource&gt;\r\n                &lt;directory&gt;${project.basedir}/target&lt;/directory&gt;\r\n                &lt;includes&gt;\r\n                  &lt;include&gt;*.war&lt;/include&gt;\r\n                &lt;/includes&gt;\r\n              &lt;/resource&gt;\r\n            &lt;/resources&gt;\r\n          &lt;/deployment&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt; \r\n&lt;/project&gt;\r\n```\r\n\r\nAny help to troubleshoot this problem would be greatly appreciated.","title":"Errors navigating to Azure App Service after deploying Spring Boot Java App to Linux App Service","body":"<p>I followed the steps here:</p>\n<p><a href=\"https://code.visualstudio.com/docs/java/java-webapp#_deploy-web-apps-to-the-cloud\" rel=\"nofollow noreferrer\">https://code.visualstudio.com/docs/java/java-webapp#_deploy-web-apps-to-the-cloud</a></p>\n<p>and deployed the app under the &quot;Complete&quot; folder to Azure App Service. I had to change the packaging type from JAR to WAR in pom.xml so that the deployment was successful, otherwise, it was not deploying and was getting errors something as cannot deploy JAR artifact.</p>\n<p>When I open the Azure App Service URL, I get the following error response:</p>\n<pre><code>HTTP Status 404 – Not Found\nType Status Report\n\nMessage The requested resource [/] is not available\n\nDescription The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.\n\nApache Tomcat/8.5.78\n</code></pre>\n<p>I did enable the logs and diagnostics and I see the following error under App Service | AppServiceName | Diagnose and solve problems:</p>\n<pre><code>Container Crash\nDisplays application logs for why the container may have crashed\nApplication Errors that may have caused the container to crash were detected\n2023-01-04T17:04:36.769939898Z Picked up JAVA_TOOL_OPTIONS: -Xmx716M -Djava.net.preferIPv4Stack=true 2023-01-04T17:04:37.193667111Z Error: LinkageError occurred while loading main class org.springframework.boot.loader.WarLauncher2023-01-04T17:04:37.197640485Z java.lang.UnsupportedClassVersionError: org/springframework/boot/loader/WarLauncher has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 55.0 \n</code></pre>\n<p>Below is the pom.xml after modifying the <code>java.version</code> from 17 to 18 and packaging from jar to war:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-complete&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;spring-boot-complete&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;18&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- tag::actuator[] --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!-- end::actuator[] --&gt;\n\n        &lt;!-- tag::tests[] --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- end::tests[] --&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>The JDK used was JDK 18 in VS Code on my local and the one deployed on Azure App Service was JDK 11. The Spring Boot configured in the pom.xml seems to be based on JDK 17. I repeated the deployment and chose App Service JDK 17 and Tomcat 10. This time I didn't see the error above in the diagnostic logs, but still, I see the same error response when I navigate to the app service URL.</p>\n<h1>Update 1</h1>\n<p>I followed the steps from this article and it worked from the first time: <a href=\"https://learn.microsoft.com/en-us/azure/app-service/quickstart-java?pivots=platform-linux-development-environment-maven&amp;tabs=tomcat\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/app-service/quickstart-java?pivots=platform-linux-development-environment-maven&amp;tabs=tomcat</a></p>\n<p>I think the missing step from the first article is the configuration of Maven <code>com.microsoft.azure:azure-webapp-maven-plugin</code>. I need to check it out. The steps create the <code>helloworld</code> app with the following pom.xml. I think I cam compare and figure out the changes.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;  \n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;  \n  &lt;groupId&gt;example.demo&lt;/groupId&gt;  \n  &lt;artifactId&gt;helloworld&lt;/artifactId&gt;  \n  &lt;packaging&gt;war&lt;/packaging&gt;  \n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;  \n  &lt;name&gt;helloworld Maven Webapp&lt;/name&gt;  \n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;  \n  &lt;dependencies&gt; \n    &lt;dependency&gt; \n      &lt;groupId&gt;junit&lt;/groupId&gt;  \n      &lt;artifactId&gt;junit&lt;/artifactId&gt;  \n      &lt;version&gt;3.8.1&lt;/version&gt;  \n      &lt;scope&gt;test&lt;/scope&gt; \n    &lt;/dependency&gt; \n  &lt;/dependencies&gt;  \n  &lt;build&gt; \n    &lt;finalName&gt;helloworld&lt;/finalName&gt;  \n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\n        &lt;artifactId&gt;azure-webapp-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.5.0&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;schemaVersion&gt;v2&lt;/schemaVersion&gt;\n          &lt;subscriptionId&gt;dd9aa0d1-f465-4cf3-a0e0-88aa1eb9a8c1&lt;/subscriptionId&gt;\n          &lt;resourceGroup&gt;helloworld-1672911087928-rg&lt;/resourceGroup&gt;\n          &lt;appName&gt;helloworld-1672911087928&lt;/appName&gt;\n          &lt;pricingTier&gt;P1v2&lt;/pricingTier&gt;\n          &lt;region&gt;centralus&lt;/region&gt;\n          &lt;runtime&gt;\n            &lt;os&gt;Linux&lt;/os&gt;\n            &lt;javaVersion&gt;Java 11&lt;/javaVersion&gt;\n            &lt;webContainer&gt;Tomcat 8.5&lt;/webContainer&gt;\n          &lt;/runtime&gt;\n          &lt;deployment&gt;\n            &lt;resources&gt;\n              &lt;resource&gt;\n                &lt;directory&gt;${project.basedir}/target&lt;/directory&gt;\n                &lt;includes&gt;\n                  &lt;include&gt;*.war&lt;/include&gt;\n                &lt;/includes&gt;\n              &lt;/resource&gt;\n            &lt;/resources&gt;\n          &lt;/deployment&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt; \n&lt;/project&gt;\n</code></pre>\n<p>Any help to troubleshoot this problem would be greatly appreciated.</p>\n"},{"tags":["java","queue","addition"],"answers":[{"tags":[],"owner":{"account_id":9400,"reputation":54564,"user_id":17343,"accept_rate":81,"display_name":"Peter Lang"},"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1672917958,"creation_date":1272102797,"answer_id":2704005,"question_id":2703984,"body_markdown":"The short answer: **it depends** on the concrete implementation.\r\n\r\nIf your queue has a max capacity limit, there actually is a difference.  \r\n \r\n\r\n - Case #1 (**no max capacity limit**) applied:\r\n\r\nThere is **no difference** like the implementation of [`PriorityQueue`][1]:\r\n\r\n    public boolean add(E e) {\r\n        return offer(e);\r\n    }\r\n\r\n---\r\n\r\n - Case #2 (**max capacity limit**) applied:\r\n\r\n**There actually is a difference** like the implementation of [`ArrayBlockingQueue`][2] which extends [`AbstractQueue`][3] :\r\n\r\n    // ArrayBlockingQueue which extends AbstractQueue\r\n    public boolean add(E e) {\r\n        return super.add(e);\r\n    }\r\n    \r\n    // AbstractQueue\r\n    public boolean add(E e) {\r\n        if (offer(e))\r\n            return true;\r\n        else\r\n            throw new IllegalStateException(&quot;Queue full&quot;);\r\n    }\r\n\r\n - `offer`: if the queue is full, return `false` and will not throw an exception\r\n - `add`: if the queue is full, throw an exception\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ArrayBlockingQueue.html\r\n  [3]: http://java.sun.com/j2se/1.5.0/docs/api/java/util/AbstractQueue.html","title":"What is the difference between the add and offer methods in a Queue in Java?","body":"<p>The short answer: <strong>it depends</strong> on the concrete implementation.</p>\n<p>If your queue has a max capacity limit, there actually is a difference.</p>\n<ul>\n<li>Case #1 (<strong>no max capacity limit</strong>) applied:</li>\n</ul>\n<p>There is <strong>no difference</strong> like the implementation of <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html\" rel=\"nofollow noreferrer\"><code>PriorityQueue</code></a>:</p>\n<pre><code>public boolean add(E e) {\n    return offer(e);\n}\n</code></pre>\n<hr />\n<ul>\n<li>Case #2 (<strong>max capacity limit</strong>) applied:</li>\n</ul>\n<p><strong>There actually is a difference</strong> like the implementation of <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ArrayBlockingQueue.html\" rel=\"nofollow noreferrer\"><code>ArrayBlockingQueue</code></a> which extends <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/AbstractQueue.html\" rel=\"nofollow noreferrer\"><code>AbstractQueue</code></a> :</p>\n<pre><code>// ArrayBlockingQueue which extends AbstractQueue\npublic boolean add(E e) {\n    return super.add(e);\n}\n\n// AbstractQueue\npublic boolean add(E e) {\n    if (offer(e))\n        return true;\n    else\n        throw new IllegalStateException(&quot;Queue full&quot;);\n}\n</code></pre>\n<ul>\n<li><code>offer</code>: if the queue is full, return <code>false</code> and will not throw an exception</li>\n<li><code>add</code>: if the queue is full, throw an exception</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":67098,"reputation":2296,"user_id":196509,"display_name":"dvd"},"down_vote_count":0,"up_vote_count":201,"is_accepted":true,"score":201,"last_activity_date":1446782440,"creation_date":1272103064,"answer_id":2704023,"question_id":2703984,"body_markdown":"I guess the difference is in the contract, that when element can not be added to collection the `add` method throws an exception and `offer` doesn&#39;t.\r\n\r\nFrom: http://java.sun.com/j2se/1.5.0/docs/api/java/util/Collection.html#add%28E%29\r\n&gt; If a collection refuses to add a\r\n&gt; particular element for any reason\r\n&gt; other than that it already contains\r\n&gt; the element, it **must throw** an\r\n&gt; exception (rather than returning\r\n&gt; false). This preserves the invariant\r\n&gt; that a collection always contains the\r\n&gt; specified element after this call\r\n&gt; returns.\r\n\r\nFrom: http://java.sun.com/j2se/1.5.0/docs/api/java/util/Queue.html#offer%28E%29\r\n\r\n&gt; Inserts the specified element into\r\n&gt; this queue, if possible. When using\r\n&gt; queues that may impose insertion\r\n&gt; restrictions (for example capacity\r\n&gt; bounds), method offer is generally\r\n&gt; preferable to method\r\n&gt; Collection.add(E), which can fail to\r\n&gt; insert an element only by throwing an\r\n&gt; exception.\r\n\r\n","title":"What is the difference between the add and offer methods in a Queue in Java?","body":"<p>I guess the difference is in the contract, that when element can not be added to collection the <code>add</code> method throws an exception and <code>offer</code> doesn't.</p>\n\n<p>From: <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/Collection.html#add%28E%29\" rel=\"noreferrer\">http://java.sun.com/j2se/1.5.0/docs/api/java/util/Collection.html#add%28E%29</a></p>\n\n<blockquote>\n  <p>If a collection refuses to add a\n  particular element for any reason\n  other than that it already contains\n  the element, it <strong>must throw</strong> an\n  exception (rather than returning\n  false). This preserves the invariant\n  that a collection always contains the\n  specified element after this call\n  returns.</p>\n</blockquote>\n\n<p>From: <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/Queue.html#offer%28E%29\" rel=\"noreferrer\">http://java.sun.com/j2se/1.5.0/docs/api/java/util/Queue.html#offer%28E%29</a></p>\n\n<blockquote>\n  <p>Inserts the specified element into\n  this queue, if possible. When using\n  queues that may impose insertion\n  restrictions (for example capacity\n  bounds), method offer is generally\n  preferable to method\n  Collection.add(E), which can fail to\n  insert an element only by throwing an\n  exception.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1272103619,"creation_date":1272103212,"answer_id":2704036,"question_id":2703984,"body_markdown":"The difference between `offer` and `add` is explained by these two excerpts from the javadocs:\r\n\r\nFrom the [`Collection`][1] interface:\r\n\r\n&gt; If a collection refuses to `add` a particular element for any reason other than that it already contains the element, it must throw an exception (rather than returning false). This preserves the invariant that a collection always contains the specified element after this call returns. \r\n\r\nFrom the [`Queue`][2] interface\r\n\r\n&gt; When using queues that may impose insertion restrictions (for example capacity bounds), method `offer` is generally preferable to method `Collection.add(E)`, which can fail to insert an element only by throwing an exception. \r\n\r\n`PriorityQueue` is a `Queue` implementation that does not impose any insertion restrictions.  Therefore the `add` and `offer` methods have the same semantics.\r\n\r\nBy contrast, `ArrayBlockingQueue` is an implementation in which `offer` and `add` behave differently, depending on how the queue was instantiated.\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/util/Collection.html#add(E)\r\n  [2]: http://java.sun.com/j2se/1.5.0/docs/api/java/util/Queue.html#offer(E)","title":"What is the difference between the add and offer methods in a Queue in Java?","body":"<p>The difference between <code>offer</code> and <code>add</code> is explained by these two excerpts from the javadocs:</p>\n\n<p>From the <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/Collection.html#add(E)\" rel=\"noreferrer\"><code>Collection</code></a> interface:</p>\n\n<blockquote>\n  <p>If a collection refuses to <code>add</code> a particular element for any reason other than that it already contains the element, it must throw an exception (rather than returning false). This preserves the invariant that a collection always contains the specified element after this call returns. </p>\n</blockquote>\n\n<p>From the <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/Queue.html#offer(E)\" rel=\"noreferrer\"><code>Queue</code></a> interface</p>\n\n<blockquote>\n  <p>When using queues that may impose insertion restrictions (for example capacity bounds), method <code>offer</code> is generally preferable to method <code>Collection.add(E)</code>, which can fail to insert an element only by throwing an exception. </p>\n</blockquote>\n\n<p><code>PriorityQueue</code> is a <code>Queue</code> implementation that does not impose any insertion restrictions.  Therefore the <code>add</code> and <code>offer</code> methods have the same semantics.</p>\n\n<p>By contrast, <code>ArrayBlockingQueue</code> is an implementation in which <code>offer</code> and <code>add</code> behave differently, depending on how the queue was instantiated.</p>\n"},{"tags":[],"owner":{"account_id":1936670,"reputation":2894,"user_id":1743971,"display_name":"Yeshodhan Kulkarni"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1367946131,"creation_date":1367946131,"answer_id":16424648,"question_id":2703984,"body_markdown":"Source: http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html\r\n\r\nThe offer method inserts an element if possible, otherwise returning false. This differs from the Collection.add method, which can fail to add an element only by throwing an unchecked exception. The offer method is designed for use when failure is a normal, rather than exceptional occurrence, for example, in fixed-capacity (or &quot;bounded&quot;) queues.","title":"What is the difference between the add and offer methods in a Queue in Java?","body":"<p>Source: <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html\" rel=\"nofollow\">http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html</a></p>\n\n<p>The offer method inserts an element if possible, otherwise returning false. This differs from the Collection.add method, which can fail to add an element only by throwing an unchecked exception. The offer method is designed for use when failure is a normal, rather than exceptional occurrence, for example, in fixed-capacity (or \"bounded\") queues.</p>\n"},{"tags":[],"owner":{"account_id":2519241,"reputation":81,"user_id":2189930,"display_name":"Heavin"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1400308184,"creation_date":1400306928,"answer_id":23708193,"question_id":2703984,"body_markdown":"from the source code in jdk 7 as follow:\r\n\r\n    public boolean add(E e) {\r\n        if (offer(e))\r\n            return true;\r\n        else\r\n            throw new IllegalStateException(&quot;Queue full&quot;);\r\n    }\r\n\r\nwe can easily know that the add function will return true when successfully add a new element into the queue, but throw a exception when failed .","title":"What is the difference between the add and offer methods in a Queue in Java?","body":"<p>from the source code in jdk 7 as follow:</p>\n\n<pre><code>public boolean add(E e) {\n    if (offer(e))\n        return true;\n    else\n        throw new IllegalStateException(\"Queue full\");\n}\n</code></pre>\n\n<p>we can easily know that the add function will return true when successfully add a new element into the queue, but throw a exception when failed .</p>\n"},{"tags":[],"owner":{"account_id":5460,"reputation":6354,"user_id":8792,"display_name":"Peter"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1402432999,"creation_date":1402432999,"answer_id":24150480,"question_id":2703984,"body_markdown":"The `Queue` interface specifies that `add()` will throw an `IllegalStateException` if no space is currently available (and otherwise return `true`) while `offer()` will return `false` if the element couldn&#39;t be inserted due to capacity restrictions.\r\n\r\nThe reason they are the same in a `PriorityQueue` is that this queue is specified to be unbounded, i.e. there are no capacity restrictions.  In the case of no capacity restrictions, the contracts of `add()` and `offer()` display the same behaviour.","title":"What is the difference between the add and offer methods in a Queue in Java?","body":"<p>The <code>Queue</code> interface specifies that <code>add()</code> will throw an <code>IllegalStateException</code> if no space is currently available (and otherwise return <code>true</code>) while <code>offer()</code> will return <code>false</code> if the element couldn't be inserted due to capacity restrictions.</p>\n\n<p>The reason they are the same in a <code>PriorityQueue</code> is that this queue is specified to be unbounded, i.e. there are no capacity restrictions.  In the case of no capacity restrictions, the contracts of <code>add()</code> and <code>offer()</code> display the same behaviour.</p>\n"},{"tags":[],"owner":{"account_id":3228622,"reputation":761,"user_id":2724374,"accept_rate":56,"display_name":"Aslam a"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1672917080,"creation_date":1501643441,"answer_id":45450816,"question_id":2703984,"body_markdown":"I will write the java contract example code for the `offer` method and the `add` method showing how they differ.\r\n\r\n\r\n    BlockingQueue&lt;String&gt; queue = new ArrayBlockingQueue&lt;&gt;(2);\r\n    queue.add(&quot;TestQuue1&quot;);  // will return true\t\t\r\n    queue.add(&quot;TestQuue2&quot;);\t // will return true\r\n    queue.add(&quot;TestQuue3&quot;);\t // will throw &quot;java.lang.IllegalStateException: Queue full\r\n    \r\n    BlockingQueue&lt;String&gt; queue = new ArrayBlockingQueue&lt;&gt;(2);\r\n    queue.offer(&quot;TestQuue1&quot;); // will return true\t\t\r\n    queue.offer(&quot;TestQuue2&quot;); // will return true\t\r\n    queue.offer(&quot;TestQuue3&quot;); // will return false and will not throw any exception","title":"What is the difference between the add and offer methods in a Queue in Java?","body":"<p>I will write the java contract example code for the <code>offer</code> method and the <code>add</code> method showing how they differ.</p>\n<pre><code>BlockingQueue&lt;String&gt; queue = new ArrayBlockingQueue&lt;&gt;(2);\nqueue.add(&quot;TestQuue1&quot;);  // will return true        \nqueue.add(&quot;TestQuue2&quot;);  // will return true\nqueue.add(&quot;TestQuue3&quot;);  // will throw &quot;java.lang.IllegalStateException: Queue full\n\nBlockingQueue&lt;String&gt; queue = new ArrayBlockingQueue&lt;&gt;(2);\nqueue.offer(&quot;TestQuue1&quot;); // will return true       \nqueue.offer(&quot;TestQuue2&quot;); // will return true   \nqueue.offer(&quot;TestQuue3&quot;); // will return false and will not throw any exception\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4553174,"reputation":454,"user_id":15068701,"display_name":"Maksym Ovsianikov"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1543222329,"creation_date":1519506371,"answer_id":48967605,"question_id":2703984,"body_markdown":"The difference is following:\r\n\r\n - **offer** method - tries to add an element to a queue, and returns ***false*** if the element can&#39;t be added (like in case when a queue is full), or ***true*** if the element was added, and doesn&#39;t throw any specific exception.\r\n\r\n - **add** method - tries to add an element to a queue, returns ***true*** if the element was added, or throws an IllegalStateException if no space is currently available.","title":"What is the difference between the add and offer methods in a Queue in Java?","body":"<p>The difference is following:</p>\n\n<ul>\n<li><p><strong>offer</strong> method - tries to add an element to a queue, and returns <strong><em>false</em></strong> if the element can't be added (like in case when a queue is full), or <strong><em>true</em></strong> if the element was added, and doesn't throw any specific exception.</p></li>\n<li><p><strong>add</strong> method - tries to add an element to a queue, returns <strong><em>true</em></strong> if the element was added, or throws an IllegalStateException if no space is currently available.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4893517,"reputation":53,"user_id":4159669,"display_name":"Neha Jain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651082968,"creation_date":1651082968,"answer_id":72033462,"question_id":2703984,"body_markdown":"**offer** method throws true or false, if addition is done\r\n\r\n**add** method throws an exception when no addition possible in queue","title":"What is the difference between the add and offer methods in a Queue in Java?","body":"<p><strong>offer</strong> method throws true or false, if addition is done</p>\n<p><strong>add</strong> method throws an exception when no addition possible in queue</p>\n"}],"owner":{"account_id":106062,"reputation":31478,"user_id":282706,"accept_rate":80,"display_name":"Finbarr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127620,"favorite_count":0,"down_vote_count":0,"up_vote_count":145,"accepted_answer_id":2704023,"answer_count":9,"score":145,"last_activity_date":1672917958,"creation_date":1272102379,"question_id":2703984,"body_markdown":"Take the `PriorityQueue` for example http://java.sun.com/j2se/1.5.0/docs/api/java/util/PriorityQueue.html#offer(E)\r\n\r\nCan anyone give me an example of a [`Queue`][1] where the [`add`][2] and [`offer`][3] methods are different?\r\n\r\nAccording to the [`Collection`][4] doc, the `add` method will often seek to ensure that an element exists within the `Collection` rather than adding duplicates. So my question is, what is the difference between the `add` and `offer` methods?\r\n\r\nIs it that the `offer` method will add duplicates regardless? (I doubt that it is because if a `Collection` should only have distinct elements this would circumvent that).\r\n\r\nEDIT:\r\nIn a `PriorityQueue` the `add` and `offer` methods are the same method (see my answer below). Can anyone give me an example of a class where the `add` and `offer` methods are different?\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/Queue.html\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/util/Queue.html#add-E-\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/java/util/Queue.html#offer-E-\r\n  [4]: http://docs.oracle.com/javase/8/docs/api/java/util/Collection.html","title":"What is the difference between the add and offer methods in a Queue in Java?","body":"<p>Take the <code>PriorityQueue</code> for example <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/PriorityQueue.html#offer(E)\" rel=\"noreferrer\">http://java.sun.com/j2se/1.5.0/docs/api/java/util/PriorityQueue.html#offer(E)</a></p>\n\n<p>Can anyone give me an example of a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Queue.html\" rel=\"noreferrer\"><code>Queue</code></a> where the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Queue.html#add-E-\" rel=\"noreferrer\"><code>add</code></a> and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Queue.html#offer-E-\" rel=\"noreferrer\"><code>offer</code></a> methods are different?</p>\n\n<p>According to the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Collection.html\" rel=\"noreferrer\"><code>Collection</code></a> doc, the <code>add</code> method will often seek to ensure that an element exists within the <code>Collection</code> rather than adding duplicates. So my question is, what is the difference between the <code>add</code> and <code>offer</code> methods?</p>\n\n<p>Is it that the <code>offer</code> method will add duplicates regardless? (I doubt that it is because if a <code>Collection</code> should only have distinct elements this would circumvent that).</p>\n\n<p>EDIT:\nIn a <code>PriorityQueue</code> the <code>add</code> and <code>offer</code> methods are the same method (see my answer below). Can anyone give me an example of a class where the <code>add</code> and <code>offer</code> methods are different?</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","thymeleaf","spring-thymeleaf"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1672757330,"post_id":74940172,"comment_id":132343420,"body_markdown":"Check your logs for the full stack trace and add it (as code) to your question.","body":"Check your logs for the full stack trace and add it (as code) to your question."}],"answers":[{"tags":[],"owner":{"account_id":6632532,"reputation":1,"user_id":7121721,"display_name":"Tristan Mahinay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672756293,"creation_date":1672756293,"answer_id":74994738,"question_id":74940172,"body_markdown":"One thing this cloud happen is some html tags aren&#39;t enclosed well. Like your &lt;meta&gt; tag should be closed too.","title":"How can I get the information that I already put in H2 Database to thymeleaf page?","body":"<p>One thing this cloud happen is some html tags aren't enclosed well. Like your  tag should be closed too.</p>\n"}],"owner":{"account_id":27373451,"reputation":1,"user_id":20879174,"display_name":"Bilel Guembri"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672917935,"creation_date":1672229928,"question_id":74940172,"body_markdown":"Client.java\r\n\r\n```\r\npackage com.example.demo.entities;\r\n\r\nimport java.io.Serializable;\r\nimport java.util.Collection;\r\n\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.*;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\n@Entity\r\n@Table(name = &quot;clients&quot;)\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class Client implements Serializable {\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\t\r\n\t@Column(name = &quot;name&quot;)\t\r\n\tprivate java.lang.String nom;\r\n\t\r\n\t@Column(name = &quot;adress&quot;)\t\r\n\tprivate java.lang.String adresse;\r\n\tprivate String mail;\r\n\tprivate String telephone;\r\n\t\r\n\t\r\n\tpublic Client(String nom, String adresse) {\r\n\t\tsuper();\r\n\t\tthis.nom = nom;\r\n\t\tthis.adresse = adresse;\r\n\t}\r\n\tpublic Client(String nom, String adresse,  String mail, String telephone) {\r\n\t\tsuper();\r\n\t\tthis.nom = nom;\r\n\t\tthis.adresse = adresse;\r\n\t\tthis.mail = mail;\r\n\t\tthis.telephone = telephone;\r\n\t}\r\n\tpublic Client() {};\r\n}\r\n```\r\n\r\nClientController.java\r\n\r\n```\r\npackage com.example.demo.controller;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\n\r\nimport com.example.demo.entities.Client;\r\nimport com.example.demo.repository.ClientRepository;\r\n\r\n@Controller\r\npublic class ClientController{\r\n\t@Autowired\r\n\tpublic ClientRepository cr;\r\n\t@GetMapping(&quot;/&quot;)\r\n\tpublic String viewHomePage(Model model) {\r\n\t\tList &lt;Client&gt; list= cr.findAll();\r\n\t\tmodel.addAttribute(&quot;list&quot;,list);\r\n\t\treturn &quot;home&quot;;\t\r\n\t\t\r\n\t}\r\n\t\t\r\n}\r\n```\r\n\r\nClientRepository.java\r\n\r\n```\r\npackage com.example.demo.repository;\r\n\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\nimport com.example.demo.entities.Client;\r\n@Repository \r\npublic interface ClientRepository extends JpaRepository&lt;Client,Long&gt;{\r\n\t\r\n}\r\n```\r\n\r\nmain.java\r\n\r\n```\r\npackage com.example.demo;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.context.ApplicationContext;\r\n\r\nimport com.example.demo.entities.Client;\r\nimport com.example.demo.repository.ClientRepository;\r\n\r\n@SpringBootApplication\r\npublic class Shop1Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tApplicationContext crt=SpringApplication.run(Shop1Application.class, args);\r\n\t\tClientRepository cr=crt.getBean(ClientRepository.class);\r\n\t\tClient c1=new Client(&quot;Bilel&quot;,&quot;Hammamet&quot;,&quot;myemailis&quot;,&quot;123456&quot;);\r\n\t\tClient c2=new Client(&quot;Wissal&quot;,&quot;Tunis&quot;,&quot;herrmail&quot;,&quot;1151&quot;);\r\n\t\tClient c3=new Client(&quot;Mohamed&quot;,&quot;nabeul&quot;,&quot;hisemail&quot;,&quot;444&quot;);\r\n\t\tClient c4=new Client(&quot;anas&quot;,&quot;Hammamet&quot;,&quot;his&quot;,&quot;55222&quot;);\r\n\t\tClient c5=new Client(&quot;mourad&quot;,&quot;tunis&quot;,&quot;fffff&quot;,&quot;44&quot;);\r\n\t\tcr.save(c1);\r\n\t\tcr.save(c2);\r\n\t\tcr.save(c3);\r\n\t\tcr.save(c4);\r\n\t\tcr.save(c5);\r\n\t\t\r\n\t\r\n\t}\r\n\r\n}\r\n```\r\n\r\nhome.html\r\n\r\n```html\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html xmlns:th=&quot;http//www.thymeleaf.org&quot;&gt;\r\n&lt;head&gt;\r\n&lt;meta charset=&quot;UTF-8&quot;&gt;\r\n&lt;title&gt;Insert title here&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;h1 &gt; Liste des clients de la base &lt;/h1&gt;\r\n&lt;div&gt;\r\n&lt;table&gt;\r\n&lt;tr&gt;\r\n&lt;th&gt;ID&lt;/th&gt;&lt;th&gt;Nom&lt;/th&gt;&lt;th&gt;Adresse&lt;/th&gt;&lt;th&gt;Mail&lt;/th&gt;&lt;th&gt;telephone&lt;/th&gt;\r\n&lt;/tr&gt;\r\n&lt;tr th:each=&quot;c:${list}&quot;&gt;\r\n&lt;td th:text=&quot;${c.id}&quot;&gt;&lt;/td&gt;\r\n&lt;td th:text=&quot;${c.nom}&quot;&gt;&lt;/td&gt;\r\n&lt;td th:text=&quot;${c.adresse}&quot;&gt;&lt;/td&gt;\r\n&lt;td th:text=&quot;${c.mail}&quot;&gt;&lt;/td&gt;\r\n&lt;td th:text=&quot;${c.telephone}&quot;&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/table&gt;\r\n&lt;/div&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\n\r\n[This is an ss of my packages][1] \r\n\r\n\r\n[This is an ss of error in localhost:8080][2]\r\n\r\n\r\n[This is h2 database][3]\r\n\r\n\r\nI tried to change in the home.html file but nothing happened I think the problem is in the home.html (Thymeleaf section). I think I have a problem calling the id, adresse, telephone from the repository which found in the h2 database to make them appear in a table in the thymeleaf page.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OqWi7.png\r\n  [2]: https://i.stack.imgur.com/TBLps.png\r\n  [3]: https://i.stack.imgur.com/6ttfM.png","title":"How can I get the information that I already put in H2 Database to thymeleaf page?","body":"<p>Client.java</p>\n<pre><code>package com.example.demo.entities;\n\nimport java.io.Serializable;\nimport java.util.Collection;\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.*;\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n@Entity\n@Table(name = &quot;clients&quot;)\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class Client implements Serializable {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    \n    @Column(name = &quot;name&quot;)  \n    private java.lang.String nom;\n    \n    @Column(name = &quot;adress&quot;)    \n    private java.lang.String adresse;\n    private String mail;\n    private String telephone;\n    \n    \n    public Client(String nom, String adresse) {\n        super();\n        this.nom = nom;\n        this.adresse = adresse;\n    }\n    public Client(String nom, String adresse,  String mail, String telephone) {\n        super();\n        this.nom = nom;\n        this.adresse = adresse;\n        this.mail = mail;\n        this.telephone = telephone;\n    }\n    public Client() {};\n}\n</code></pre>\n<p>ClientController.java</p>\n<pre><code>package com.example.demo.controller;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\n\nimport com.example.demo.entities.Client;\nimport com.example.demo.repository.ClientRepository;\n\n@Controller\npublic class ClientController{\n    @Autowired\n    public ClientRepository cr;\n    @GetMapping(&quot;/&quot;)\n    public String viewHomePage(Model model) {\n        List &lt;Client&gt; list= cr.findAll();\n        model.addAttribute(&quot;list&quot;,list);\n        return &quot;home&quot;;  \n        \n    }\n        \n}\n</code></pre>\n<p>ClientRepository.java</p>\n<pre><code>package com.example.demo.repository;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\nimport com.example.demo.entities.Client;\n@Repository \npublic interface ClientRepository extends JpaRepository&lt;Client,Long&gt;{\n    \n}\n</code></pre>\n<p>main.java</p>\n<pre><code>package com.example.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ApplicationContext;\n\nimport com.example.demo.entities.Client;\nimport com.example.demo.repository.ClientRepository;\n\n@SpringBootApplication\npublic class Shop1Application {\n\n    public static void main(String[] args) {\n        \n        ApplicationContext crt=SpringApplication.run(Shop1Application.class, args);\n        ClientRepository cr=crt.getBean(ClientRepository.class);\n        Client c1=new Client(&quot;Bilel&quot;,&quot;Hammamet&quot;,&quot;myemailis&quot;,&quot;123456&quot;);\n        Client c2=new Client(&quot;Wissal&quot;,&quot;Tunis&quot;,&quot;herrmail&quot;,&quot;1151&quot;);\n        Client c3=new Client(&quot;Mohamed&quot;,&quot;nabeul&quot;,&quot;hisemail&quot;,&quot;444&quot;);\n        Client c4=new Client(&quot;anas&quot;,&quot;Hammamet&quot;,&quot;his&quot;,&quot;55222&quot;);\n        Client c5=new Client(&quot;mourad&quot;,&quot;tunis&quot;,&quot;fffff&quot;,&quot;44&quot;);\n        cr.save(c1);\n        cr.save(c2);\n        cr.save(c3);\n        cr.save(c4);\n        cr.save(c5);\n        \n    \n    }\n\n}\n</code></pre>\n<p>home.html</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=&quot;http//www.thymeleaf.org&quot;&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;UTF-8&quot;&gt;\n&lt;title&gt;Insert title here&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1 &gt; Liste des clients de la base &lt;/h1&gt;\n&lt;div&gt;\n&lt;table&gt;\n&lt;tr&gt;\n&lt;th&gt;ID&lt;/th&gt;&lt;th&gt;Nom&lt;/th&gt;&lt;th&gt;Adresse&lt;/th&gt;&lt;th&gt;Mail&lt;/th&gt;&lt;th&gt;telephone&lt;/th&gt;\n&lt;/tr&gt;\n&lt;tr th:each=&quot;c:${list}&quot;&gt;\n&lt;td th:text=&quot;${c.id}&quot;&gt;&lt;/td&gt;\n&lt;td th:text=&quot;${c.nom}&quot;&gt;&lt;/td&gt;\n&lt;td th:text=&quot;${c.adresse}&quot;&gt;&lt;/td&gt;\n&lt;td th:text=&quot;${c.mail}&quot;&gt;&lt;/td&gt;\n&lt;td th:text=&quot;${c.telephone}&quot;&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/table&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/OqWi7.png\" rel=\"nofollow noreferrer\">This is an ss of my packages</a></p>\n<p><a href=\"https://i.stack.imgur.com/TBLps.png\" rel=\"nofollow noreferrer\">This is an ss of error in localhost:8080</a></p>\n<p><a href=\"https://i.stack.imgur.com/6ttfM.png\" rel=\"nofollow noreferrer\">This is h2 database</a></p>\n<p>I tried to change in the home.html file but nothing happened I think the problem is in the home.html (Thymeleaf section). I think I have a problem calling the id, adresse, telephone from the repository which found in the h2 database to make them appear in a table in the thymeleaf page.</p>\n"},{"tags":["java","maven","pom.xml","spring-cloud"],"comments":[{"owner":{"account_id":6964901,"reputation":10403,"user_id":5343269,"accept_rate":45,"display_name":"11thdimension"},"score":0,"creation_date":1512633390,"post_id":47690101,"comment_id":82339260,"body_markdown":"Most likely you&#39;re behind a corporate proxy and maven hasn&#39;t been configured for it.","body":"Most likely you&#39;re behind a corporate proxy and maven hasn&#39;t been configured for it."},{"owner":{"account_id":8675941,"reputation":438,"user_id":6493369,"display_name":"Poorvi Nigotiya"},"score":0,"creation_date":1512633825,"post_id":47690101,"comment_id":82339486,"body_markdown":"There is no such proxy setting. Also, If I override the default version with some other version, it successfully downloads","body":"There is no such proxy setting. Also, If I override the default version with some other version, it successfully downloads"},{"owner":{"account_id":6964901,"reputation":10403,"user_id":5343269,"accept_rate":45,"display_name":"11thdimension"},"score":0,"creation_date":1512634368,"post_id":47690101,"comment_id":82339738,"body_markdown":"Default version of what?","body":"Default version of what?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1512635308,"post_id":47690101,"comment_id":82340203,"body_markdown":"Have you run Maven on command line or from within Eclipse? If in eclipse please try from plain command line...Apart from that which version of Maven are you using? If this does not help. Delete the directory `$HOME/.m2/repository/org/springframework` and retry...","body":"Have you run Maven on command line or from within Eclipse? If in eclipse please try from plain command line...Apart from that which version of Maven are you using? If this does not help. Delete the directory <code>$HOME&#47;.m2&#47;repository&#47;org&#47;springframework</code> and retry..."},{"owner":{"account_id":8675941,"reputation":438,"user_id":6493369,"display_name":"Poorvi Nigotiya"},"score":0,"creation_date":1512636768,"post_id":47690101,"comment_id":82341023,"body_markdown":"@11thdimension - I am using Brixton.RELEASE which by default looks for org.springframework.boot:spring-boot-starter-web:jar:1.3.5.RELEASE. But if I override version as &lt;version&gt;1.3.6.RELEASE&lt;\\version&gt; it downloads successfully. Same for other dependency as well","body":"@11thdimension - I am using Brixton.RELEASE which by default looks for org.springframework.boot:spring-boot-starter-web:jar:1.3.5.R&zwnj;&#8203;ELEASE. But if I override version as &lt;version&gt;1.3.6.RELEASE&lt;\\version&gt; it downloads successfully. Same for other dependency as well"},{"owner":{"account_id":8675941,"reputation":438,"user_id":6493369,"display_name":"Poorvi Nigotiya"},"score":0,"creation_date":1512636909,"post_id":47690101,"comment_id":82341105,"body_markdown":"@khmarbaise I am using STS. I tried deleting the .m2 repository, but still facing the issue","body":"@khmarbaise I am using STS. I tried deleting the .m2 repository, but still facing the issue"},{"owner":{"account_id":6964901,"reputation":10403,"user_id":5343269,"accept_rate":45,"display_name":"11thdimension"},"score":0,"creation_date":1512658136,"post_id":47690101,"comment_id":82355040,"body_markdown":"It&#39;s strange, if it&#39;s working for one version and not working for a specific version. I tried your pom and it&#39;s working for me, that means there&#39;s nothing wrong with POM itself. Try running with `-X or --debug` may be that will give more clues.","body":"It&#39;s strange, if it&#39;s working for one version and not working for a specific version. I tried your pom and it&#39;s working for me, that means there&#39;s nothing wrong with POM itself. Try running with <code>-X or --debug</code> may be that will give more clues."},{"owner":{"account_id":8675941,"reputation":438,"user_id":6493369,"display_name":"Poorvi Nigotiya"},"score":0,"creation_date":1512714654,"post_id":47690101,"comment_id":82377602,"body_markdown":"Actually, I switched from STS to eclipse and surprisingly same pom.xml is working fine. It&#39;s a mystery how this could be IDE dependent. And that too when STS is built over Eclipse itself. I am clueless.","body":"Actually, I switched from STS to eclipse and surprisingly same pom.xml is working fine. It&#39;s a mystery how this could be IDE dependent. And that too when STS is built over Eclipse itself. I am clueless."}],"answers":[{"tags":[],"owner":{"account_id":216316,"reputation":8480,"user_id":471481,"accept_rate":100,"display_name":"Andrei Sfat"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1512642094,"creation_date":1512633261,"answer_id":47690145,"question_id":47690101,"body_markdown":"Try force refreshing your dependencies. Specifying `-U` does that\r\n\r\n    mvn clean install -U\r\n\r\nEdit:\r\nYou can purge your local release dependencies and to the normal `mvn clean install` afterwards:\r\n\r\n    mvn dependency:purge-local-repository\r\n\r\nThere is not way to force the release dependencies to be pulled, the `-U` only works with snapshot dependencies","title":"Could not transfer artifacts from/to central maven repo when using Spring Framework Cloud","body":"<p>Try force refreshing your dependencies. Specifying <code>-U</code> does that</p>\n\n<pre><code>mvn clean install -U\n</code></pre>\n\n<p>Edit:\nYou can purge your local release dependencies and to the normal <code>mvn clean install</code> afterwards:</p>\n\n<pre><code>mvn dependency:purge-local-repository\n</code></pre>\n\n<p>There is not way to force the release dependencies to be pulled, the <code>-U</code> only works with snapshot dependencies</p>\n"},{"tags":[],"owner":{"account_id":8675941,"reputation":438,"user_id":6493369,"display_name":"Poorvi Nigotiya"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1512737987,"creation_date":1512737987,"answer_id":47714937,"question_id":47690101,"body_markdown":"I tried the same pom.xml inEclipse IDE and surprisingly it worked there as it is.\r\n\r\nTo make it work on STS, I added following properties\r\n\r\n    &lt;properties&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t\t&lt;start-class&gt;io.pivotal.microservices.services.Main&lt;/start-class&gt;\r\n    \t\t&lt;spring-cloud.version&gt;Brixton.RELEASE&lt;/spring-cloud.version&gt;\r\n    \t&lt;/properties&gt;\r\n\r\nRefer https://stackoverflow.com/questions/45765370/unable-to-download-import-package-org-springframework-cloud-config-server-enable\r\n\r\nThis worked for me, though I am still curious about the difference.","title":"Could not transfer artifacts from/to central maven repo when using Spring Framework Cloud","body":"<p>I tried the same pom.xml inEclipse IDE and surprisingly it worked there as it is.</p>\n\n<p>To make it work on STS, I added following properties</p>\n\n<pre><code>&lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;start-class&gt;io.pivotal.microservices.services.Main&lt;/start-class&gt;\n        &lt;spring-cloud.version&gt;Brixton.RELEASE&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n</code></pre>\n\n<p>Refer <a href=\"https://stackoverflow.com/questions/45765370/unable-to-download-import-package-org-springframework-cloud-config-server-enable\">Unable to download/import package org.springframework.cloud.config.server.EnableConfigServer</a></p>\n\n<p>This worked for me, though I am still curious about the difference.</p>\n"},{"tags":[],"owner":{"account_id":23954992,"reputation":1,"user_id":17946007,"display_name":"Javohir Rajabov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651057464,"creation_date":1650980963,"answer_id":72015132,"question_id":47690101,"body_markdown":"I had the same error on my project and this is what worked for me.\r\n\r\nFirst of all, go to your `pom.xml` and find your spring-parent version. Then \r\ngo to https://repo.maven.apache.org/maven2/springframework/spring-parent and check if your same **springframework** version exists, if not change your **springframework** version to an existing one.\r\n\r\n\r\n  [1]: https://repo.maven.apache.org/maven2/springframework/spring-parent/","title":"Could not transfer artifacts from/to central maven repo when using Spring Framework Cloud","body":"<p>I had the same error on my project and this is what worked for me.</p>\n<p>First of all, go to your <code>pom.xml</code> and find your spring-parent version. Then\ngo to <a href=\"https://repo.maven.apache.org/maven2/springframework/spring-parent\" rel=\"nofollow noreferrer\">https://repo.maven.apache.org/maven2/springframework/spring-parent</a> and check if your same <strong>springframework</strong> version exists, if not change your <strong>springframework</strong> version to an existing one.</p>\n"}],"owner":{"account_id":8675941,"reputation":438,"user_id":6493369,"display_name":"Poorvi Nigotiya"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54176,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":47714937,"answer_count":3,"score":4,"last_activity_date":1672917305,"creation_date":1512633050,"question_id":47690101,"body_markdown":"I am trying to create a maven project using Spring Framework Cloud. \r\nI defined pom.xml file as below\r\n\r\n    &lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-cloud-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;Brixton.RELEASE&lt;/version&gt;\r\n    \t&lt;/parent&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;!-- Stand-alone RESTFul application for testing only --&gt;\r\n    \t\t&lt;start-class&gt;io.pivotal.microservices.services.Main&lt;/start-class&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;!-- Setup Spring Boot --&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;!-- Setup Spring MVC &amp; REST, use Embedded Tomcat --&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;!-- Setup Spring Data common components --&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-data-commons&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;!-- Testing starter --&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;!-- Setup Spring Data JPA Repository support --&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;!-- In-memory database for testing/demos --&gt;\r\n    \t\t\t&lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;!-- Spring Cloud starter --&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-cloud-starter&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;!-- Eureka service registration --&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-cloud-starter-eureka-server&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n\r\nWhen trying to build maven getting error for all dependencies as \r\n\r\nCould not transfer artifacts from/to central (https://repo.maven.apache.org/maven2) \r\n\r\n&gt; Multiple annotations found at this line:\r\n&gt; \t- Failure to transfer org.springframework:spring-orm:jar:4.2.6.RELEASE from\r\n&gt; https://repo.maven.apache.org/maven2 was cached in the local\r\n&gt; repository, resolution will not be  \t reattempted until the update\r\n&gt; interval of central has elapsed or updates are forced. Original error:\r\n&gt; Could not transfer artifact\r\n&gt; org.springframework:spring-orm:jar:4.2.6.RELEASE from/to central  \t\r\n&gt; (https://repo.maven.apache.org/maven2): The operation was cancelled.\r\n&gt; org.eclipse.aether.transfer.ArtifactTransferException: Failure to\r\n&gt; transfer org.springframework:spring-orm:jar:\r\n&gt; \t 4.2.6.RELEASE from https://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the\r\n&gt; update interval of central has elapsed or updates are  \t forced.\r\n&gt; Original error: Could not transfer artifact\r\n&gt; org.springframework:spring-orm:jar:4.2.6.RELEASE from/to central\r\n&gt; (https://repo.maven.apache.org/maven2): The operation was cancelled.\r\n&gt; at  \t\r\n&gt; org.eclipse.aether.internal.impl.DefaultUpdateCheckManager.newException(DefaultUpdateCheckManager.java:238)\r\n&gt; at  \t\r\n&gt; org.eclipse.aether.internal.impl.DefaultUpdateCheckManager.checkArtifact(DefaultUpdateCheckManager.java:206)\r\n&gt; at  \t\r\n&gt; org.eclipse.aether.internal.impl.DefaultArtifactResolver.gatherDownloads(DefaultArtifactResolver.java:585)\r\n&gt; at  \t\r\n&gt; org.eclipse.aether.internal.impl.DefaultArtifactResolver.performDownloads(DefaultArtifactResolver.java:503)\r\n&gt; at  \t\r\n&gt; org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:421)\r\n&gt; at  \t\r\n&gt; org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:246)\r\n&gt; at  \t\r\n&gt; org.eclipse.aether.internal.impl.DefaultRepositorySystem.resolveDependencies(DefaultRepositorySystem.java:367)\r\n&gt; at\r\n\r\nWhen I go to the location, I can clearly see the Jar files are present in that location.\r\nIs there something else I need to add to my pom.xml?","title":"Could not transfer artifacts from/to central maven repo when using Spring Framework Cloud","body":"<p>I am trying to create a maven project using Spring Framework Cloud. \nI defined pom.xml file as below</p>\n\n<pre><code>&lt;parent&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;Brixton.RELEASE&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;!-- Stand-alone RESTFul application for testing only --&gt;\n        &lt;start-class&gt;io.pivotal.microservices.services.Main&lt;/start-class&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;!-- Setup Spring Boot --&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;!-- Setup Spring MVC &amp; REST, use Embedded Tomcat --&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;!-- Setup Spring Data common components --&gt;\n            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-data-commons&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;!-- Testing starter --&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;!-- Setup Spring Data JPA Repository support --&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;!-- In-memory database for testing/demos --&gt;\n            &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n            &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;!-- Spring Cloud starter --&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;!-- Eureka service registration --&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-eureka-server&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n\n<p>When trying to build maven getting error for all dependencies as </p>\n\n<p>Could not transfer artifacts from/to central (<a href=\"https://repo.maven.apache.org/maven2\" rel=\"nofollow noreferrer\">https://repo.maven.apache.org/maven2</a>) </p>\n\n<blockquote>\n  <p>Multiple annotations found at this line:\n    - Failure to transfer org.springframework:spring-orm:jar:4.2.6.RELEASE from\n  <a href=\"https://repo.maven.apache.org/maven2\" rel=\"nofollow noreferrer\">https://repo.maven.apache.org/maven2</a> was cached in the local\n  repository, resolution will not be     reattempted until the update\n  interval of central has elapsed or updates are forced. Original error:\n  Could not transfer artifact\n  org.springframework:spring-orm:jar:4.2.6.RELEASE from/to central<br>\n  (<a href=\"https://repo.maven.apache.org/maven2\" rel=\"nofollow noreferrer\">https://repo.maven.apache.org/maven2</a>): The operation was cancelled.\n  org.eclipse.aether.transfer.ArtifactTransferException: Failure to\n  transfer org.springframework:spring-orm:jar:\n     4.2.6.RELEASE from <a href=\"https://repo.maven.apache.org/maven2\" rel=\"nofollow noreferrer\">https://repo.maven.apache.org/maven2</a> was cached in the local repository, resolution will not be reattempted until the\n  update interval of central has elapsed or updates are      forced.\n  Original error: Could not transfer artifact\n  org.springframework:spring-orm:jar:4.2.6.RELEASE from/to central\n  (<a href=\"https://repo.maven.apache.org/maven2\" rel=\"nofollow noreferrer\">https://repo.maven.apache.org/maven2</a>): The operation was cancelled.\n  at<br>\n  org.eclipse.aether.internal.impl.DefaultUpdateCheckManager.newException(DefaultUpdateCheckManager.java:238)\n  at<br>\n  org.eclipse.aether.internal.impl.DefaultUpdateCheckManager.checkArtifact(DefaultUpdateCheckManager.java:206)\n  at<br>\n  org.eclipse.aether.internal.impl.DefaultArtifactResolver.gatherDownloads(DefaultArtifactResolver.java:585)\n  at<br>\n  org.eclipse.aether.internal.impl.DefaultArtifactResolver.performDownloads(DefaultArtifactResolver.java:503)\n  at<br>\n  org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:421)\n  at<br>\n  org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:246)\n  at<br>\n  org.eclipse.aether.internal.impl.DefaultRepositorySystem.resolveDependencies(DefaultRepositorySystem.java:367)\n  at</p>\n</blockquote>\n\n<p>When I go to the location, I can clearly see the Jar files are present in that location.\nIs there something else I need to add to my pom.xml?</p>\n"},{"tags":["java","spring-security","microservices","spring-cloud","resilience4j"],"owner":{"account_id":9909761,"reputation":25,"user_id":7336936,"display_name":"Abhishek Singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":436,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1672916581,"creation_date":1672897207,"question_id":75014269,"body_markdown":"To provide some background, I am trying to implement below architecture.\r\nIt is from a course provided by &quot;DailyCodeBuffer&quot; on microservices, there are 3 services, order, product and payment. Clients can call the order service and order-service internally accesses payment and product services. Everything is registered on Eureka service registry and there is an API-Gateway via which everything should be routed.\r\n[Architecture Schema][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CKzfH.png\r\n\r\nSo, first I created everything without the Okta Auth implementation and things were working perfectly fine. Upon calling the order-service via the gateway, I was able to get the order details by id let&#39;s say for example.\r\n\r\nThen I added the Okta auth and now every time I try to access an order details by id, **for first 2-3 times I always get the fallback method response from the gateway. And if I keep requesting back to back, it gives me result after 2-3 times**. If I try to hit the order-service directly without going via the gateway, things are working fine. Similarly, if I remove the circuit-breaker configuration for order-service from the Yaml given below, things are working fine again. **Kindly suggest the possible reasons and the solution/direction in which I should look.**\r\nPlease let me know if you want any other code/implementation from the repo. At this point, I honestly don’t know where to look for the issue.\r\n\r\nHere is my API-gateway yaml:\r\n\r\n    server:\r\n      port: 9090\r\n    \r\n    logging:\r\n      level:\r\n        web: debug\r\n    \r\n    spring:\r\n      application:\r\n        name: API-GATEWAY\r\n      config:\r\n        import: configserver:http://localhost:9296\r\n      cloud:\r\n        gateway:\r\n          routes:\r\n            - id: ORDER-SERVICE\r\n              uri: lb://ORDER-SERVICE\r\n              predicates:\r\n                - Path=/order/**\r\n              filters:\r\n                - name: CircuitBreaker\r\n                  args:\r\n                    name: ORDER-SERVICE\r\n                    fallbackuri: forward:/orderServiceFallBack\r\n                - name: RequestRateLimiter\r\n                  args:\r\n                    redis-rate-limiter.replenishRate: 1\r\n                    redis-rate-limiter.burstCapacity: 1\r\n            - id: PAYMENT-SERVICE\r\n              uri: lb://PAYMENT-SERVICE\r\n              predicates:\r\n                - Path=/payment/**\r\n              filters:\r\n                - name: CircuitBreaker\r\n                  args:\r\n                    name: PAYMENT-SERVICE\r\n                    fallbackuri: forward:/paymentServiceFallBack\r\n                - name: RequestRateLimiter\r\n                  args:\r\n                    redis-rate-limiter.replenishRate: 1\r\n                    redis-rate-limiter.burstCapacity: 1\r\n            - id: PRODUCT-SERVICE\r\n              uri: lb://PRODUCT-SERVICE\r\n              predicates:\r\n                - Path=/product/**\r\n              filters:\r\n                - name: CircuitBreaker\r\n                  args:\r\n                    name: PRODUCT-SERVICE\r\n                    fallbackuri: forward:/productServiceFallBack\r\n                - name: RequestRateLimiter\r\n                  args:\r\n                    redis-rate-limiter.replenishRate: 1\r\n                    redis-rate-limiter.burstCapacity: 1\r\n    \r\n    okta:\r\n      oauth2:\r\n        issuer: &lt;&lt;not mentioning here for security reasons&gt;&gt;\r\n        audience: api://default\r\n        client-id: &lt;&lt;not mentioning here for security reasons&gt;&gt;\r\n        client-secret: &lt;&lt;not mentioning here for security reasons&gt;&gt;\r\n        scopes: openid, profile, email, offline_access\r\n\r\nHere is my controller layer for order-service(The SOUT is printing everything correctly every time, so I am skipping service layer code here, please ask if you still want it):\r\n\r\n    @PreAuthorize(&quot;hasAuthority(&#39;Admin&#39;) || hasAuthority(&#39;Customer&#39;)&quot;)\r\n    @GetMapping(&quot;/{orderId}&quot;)\r\n    public ResponseEntity&lt;OrderResponse&gt; getOrderDetails(@PathVariable(&quot;orderId&quot;) long orderId) {\r\n        OrderResponse orderResponse = orderService.getOrderDetails(orderId);\r\n        System.out.println(&quot;orderResponse = &quot; + orderResponse);\r\n        return new ResponseEntity&lt;&gt;(orderResponse, HttpStatus.OK);\r\n    }\r\n\r\nHere is my Cloud-Gateway application class where I have setup the circuit breaker with default configs:\r\n\r\n    @SpringBootApplication\r\n    public class CloudGatewayApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(CloudGatewayApplication.class, args);\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tKeyResolver userKeySolver() {\r\n    \t\treturn exchange -&gt; Mono.just(&quot;userKey&quot;);\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic Customizer&lt;Resilience4JCircuitBreakerFactory&gt; defaultCustomizer() {\r\n    \t\treturn factory -&gt; factory.configureDefault(\r\n    \t\t\t\tid -&gt; new Resilience4JConfigBuilder(id)\r\n    \t\t\t\t\t\t.circuitBreakerConfig(\r\n    \t\t\t\t\t\t\t\tCircuitBreakerConfig.ofDefaults()\r\n    \t\t\t\t\t\t).build()\r\n    \t\t);\r\n    \t}\r\n    \r\n    }\r\n\r\nFallBack controller in API-gateway:\r\n\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    @RestController\r\n    public class FallbackController {\r\n    \r\n        @GetMapping(&quot;/orderServiceFallBack&quot;)\r\n        public String orderServiceFallback() {\r\n            return &quot;Order service is down!&quot;;\r\n        }\r\n    \r\n        @GetMapping(&quot;/paymentServiceFallBack&quot;)\r\n        public String paymentServiceFallback() {\r\n            return &quot;Payment service is down!&quot;;\r\n        }\r\n    \r\n        @GetMapping(&quot;/productServiceFallBack&quot;)\r\n        public String productServiceFallback() {\r\n            return &quot;Product service is down!&quot;;\r\n        }\r\n    }\r\n\r\n\r\n Order-service logs (Same logs every time):\r\n\r\n    2023-01-05 10:56:22.465 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://dev-89319517.okta.com/oauth2/default/v1/keys\r\n    2023-01-05 10:56:22.466 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Accept=[text/plain, */*]\r\n    2023-01-05 10:56:23.799 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Response 200 OK\r\n    2023-01-05 10:56:23.799 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Reading to [java.lang.String] as &quot;application/json&quot;\r\n    2023-01-05 10:56:23.860 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.servlet.DispatcherServlet        : GET &quot;/order/4&quot;, parameters={}\r\n    2023-01-05 10:56:23.872 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.dailycodebuffer.orderservice.controller.OrderController#getOrderDetails(long)\r\n    2023-01-05 10:56:23.915  INFO [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] c.d.o.service.OrderServiceImpl           : Get order details for order id: 4\r\n    2023-01-05 10:56:24.016  INFO [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] c.d.o.service.OrderServiceImpl           : Invoking product service to fetch the product for id: 2\r\n    2023-01-05 10:56:24.018 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : HTTP GET http://PRODUCT-SERVICE/product/2\r\n    2023-01-05 10:56:24.019 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]\r\n    2023-01-05 10:56:24.028 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,1bc48b17dcb26435] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : HTTP POST https://dev-89319517.okta.com/oauth2/default/v1/token\r\n    2023-01-05 10:56:24.028 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,1bc48b17dcb26435] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]\r\n    2023-01-05 10:56:24.029 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,1bc48b17dcb26435] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Writing [{grant_type=[client_credentials], scope=[internal]}] as &quot;application/x-www-form-urlencoded;charset=UTF-8&quot;\r\n    2023-01-05 10:56:24.672 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,1bc48b17dcb26435] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Response 200 OK\r\n    2023-01-05 10:56:24.672 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,1bc48b17dcb26435] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Reading to [org.springframework.security.oauth2.core.endpoint.OAuth2AccessTokenResponse] as &quot;application/json;charset=UTF-8&quot;\r\n    2023-01-05 10:56:26.132 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Response 200 OK\r\n    2023-01-05 10:56:26.132 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Reading to [com.dailycodebuffer.orderservice.external.response.ProductResponse]\r\n    2023-01-05 10:56:26.134  INFO [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] c.d.o.service.OrderServiceImpl           : Getting payment information from payment service\r\n    2023-01-05 10:56:26.134 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : HTTP GET http://PAYMENT-SERVICE/payment/order/4\r\n    2023-01-05 10:56:26.134 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]\r\n    2023-01-05 10:56:26.134 DEBUG [ORDER-SERVICE,,] 14072 --- [/api/v2/spans}}] org.springframework.web.HttpLogging      : HTTP POST http://localhost:9411/api/v2/spans\r\n    2023-01-05 10:56:26.134 DEBUG [ORDER-SERVICE,,] 14072 --- [/api/v2/spans}}] org.springframework.web.HttpLogging      : Accept=[text/plain, application/json, application/*+json, */*]\r\n    2023-01-05 10:56:26.135 DEBUG [ORDER-SERVICE,,] 14072 --- [/api/v2/spans}}] org.springframework.web.HttpLogging      : Writing [[B@397bd980] as &quot;application/json&quot;\r\n    2023-01-05 10:56:26.165 DEBUG [ORDER-SERVICE,,] 14072 --- [/api/v2/spans}}] org.springframework.web.HttpLogging      : Response 202 ACCEPTED\r\n    2023-01-05 10:56:27.744 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Response 200 OK\r\n    2023-01-05 10:56:27.744 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Reading to [com.dailycodebuffer.orderservice.external.response.PaymentResponse]\r\n    orderResponse = OrderResponse(orderId=4, orderDate=2023-01-02T12:21:48.312429Z, orderStatus=PLACED, amount=2000, productDetails=OrderResponse.ProductDetails(productName=MacBook, productId=2, quantity=1, price=2000), paymentDetails=OrderResponse.PaymentDetails(paymentId=1, paymentMode=CASH, paymentStatus=SUCCESS, paymentDate=2023-01-02T12:21:48.794794Z))\r\n    2023-01-05 10:56:27.760 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using &#39;application/json&#39;, given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]\r\n    2023-01-05 10:56:27.763 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [OrderResponse(orderId=4, orderDate=2023-01-02T12:21:48.312429Z, orderStatus=PLACED, amount=2000, pro (truncated)...]\r\n    2023-01-05 10:56:27.773 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK\r\n    2023-01-05 10:56:28.168 DEBUG [ORDER-SERVICE,,] 14072 --- [/api/v2/spans}}] org.springframework.web.HttpLogging      : HTTP POST http://localhost:9411/api/v2/spans\r\n    2023-01-05 10:56:28.169 DEBUG [ORDER-SERVICE,,] 14072 --- [/api/v2/spans}}] org.springframework.web.HttpLogging      : Accept=[text/plain, application/json, application/*+json, */*]\r\n    2023-01-05 10:56:28.169 DEBUG [ORDER-SERVICE,,] 14072 --- [/api/v2/spans}}] org.springframework.web.HttpLogging      : Writing [[B@3460194e] as &quot;application/json&quot;\r\n    2023-01-05 10:56:28.176 DEBUG [ORDER-SERVICE,,] 14072 --- [/api/v2/spans}}] org.springframework.web.HttpLogging      : Response 202 ACCEPTED\r\n\r\n\r\nAPI-Gateway logs when it fails:\r\n\r\n    2023-01-05 10:58:24.485 DEBUG [API-GATEWAY,,] 23068 --- [ctor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f9b266b7-10] HTTP GET &quot;/order/4&quot;\r\n    2023-01-05 10:58:24.496 DEBUG [API-GATEWAY,e7049b94195ecf37,6cf05802f3dca2dc] 23068 --- [     parallel-1] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.\r\n    2023-01-05 10:58:25.163 DEBUG [API-GATEWAY,,] 23068 --- [/api/v2/spans}}] o.s.w.r.f.client.ExchangeFunctions       : [34ca7d36] HTTP POST http://localhost:9411/api/v2/spans\r\n    2023-01-05 10:58:25.168 DEBUG [API-GATEWAY,60dd40f12b9da81d,070b6d8bba49f22f] 23068 --- [ctor-http-nio-4] o.s.core.codec.ByteArrayEncoder          : [34ca7d36] Writing 439 bytes\r\n    2023-01-05 10:58:25.181 DEBUG [API-GATEWAY,60dd40f12b9da81d,070b6d8bba49f22f] 23068 --- [ctor-http-nio-4] o.s.w.r.f.client.ExchangeFunctions       : [34ca7d36] [862de7b5-1, L:/127.0.0.1:59384 - R:localhost/127.0.0.1:9411] Response 202 ACCEPTED\r\n    2023-01-05 10:58:25.511 DEBUG [API-GATEWAY,b4f5aea2726ff3fb,08f2382b1d8686aa] 23068 --- [     parallel-2] s.w.r.r.m.a.RequestMappingHandlerMapping : [f9b266b7-10] Mapped to com.dailycodebuffer.cloudgateway.controller.FallbackController#orderServiceFallback()\r\n    2023-01-05 10:58:25.514 DEBUG [API-GATEWAY,b4f5aea2726ff3fb,08f2382b1d8686aa] 23068 --- [     parallel-2] o.s.w.r.r.m.a.ResponseBodyResultHandler  : [f9b266b7-10] Using &#39;text/plain;charset=UTF-8&#39; given [*/*] and supported [text/plain;charset=UTF-8, text/event-stream, text/plain;charset=UTF-8, */*]\r\n    2023-01-05 10:58:25.514 DEBUG [API-GATEWAY,b4f5aea2726ff3fb,08f2382b1d8686aa] 23068 --- [     parallel-2] o.s.w.r.r.m.a.ResponseBodyResultHandler  : [f9b266b7-10] 0..1 [java.lang.String]\r\n    2023-01-05 10:58:25.514 DEBUG [API-GATEWAY,b4f5aea2726ff3fb,08f2382b1d8686aa] 23068 --- [     parallel-2] o.s.core.codec.CharSequenceEncoder       : [f9b266b7-10] Writing &quot;Order service is down!&quot;\r\n    2023-01-05 10:58:25.516 DEBUG [API-GATEWAY,,] 23068 --- [ctor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f9b266b7-10] Completed 200 OK\r\n    2023-01-05 10:58:26.188 DEBUG [API-GATEWAY,,] 23068 --- [/api/v2/spans}}] o.s.w.r.f.client.ExchangeFunctions       : [1c1092e2] HTTP POST http://localhost:9411/api/v2/spans\r\n    2023-01-05 10:58:26.190 DEBUG [API-GATEWAY,60dd40f12b9da81d,070b6d8bba49f22f] 23068 --- [ctor-http-nio-4] o.s.core.codec.ByteArrayEncoder          : [1c1092e2] Writing 1268 bytes\r\n    2023-01-05 10:58:26.198 DEBUG [API-GATEWAY,60dd40f12b9da81d,070b6d8bba49f22f] 23068 --- [ctor-http-nio-4] o.s.w.r.f.client.ExchangeFunctions       : [1c1092e2] [862de7b5-2, L:/127.0.0.1:59384 - R:localhost/127.0.0.1:9411] Response 202 ACCEPTED\r\n\r\nAPI-Gateway logs when it returns proper results:\r\n\r\n    2023-01-05 10:59:44.857 DEBUG [API-GATEWAY,b4f5aea2726ff3fb,08f2382b1d8686aa] 23068 --- [ctor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f9b266b7-12] HTTP GET &quot;/order/4&quot;\r\n    2023-01-05 10:59:44.865 DEBUG [API-GATEWAY,6e2c73066610bdd2,04c9da4375862aa5] 23068 --- [     parallel-3] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.\r\n    2023-01-05 10:59:44.946 DEBUG [API-GATEWAY,,] 23068 --- [/api/v2/spans}}] o.s.w.r.f.client.ExchangeFunctions       : [c2145ca] HTTP POST http://localhost:9411/api/v2/spans\r\n    2023-01-05 10:59:44.947 DEBUG [API-GATEWAY,,] 23068 --- [ctor-http-nio-2] o.s.core.codec.ByteArrayEncoder          : [c2145ca] Writing 439 bytes\r\n    2023-01-05 10:59:44.960 DEBUG [API-GATEWAY,,] 23068 --- [ctor-http-nio-2] o.s.w.r.f.client.ExchangeFunctions       : [c2145ca] [fcfb2f85-3, L:/127.0.0.1:59436 - R:localhost/127.0.0.1:9411] Response 202 ACCEPTED\r\n    2023-01-05 10:59:45.484 DEBUG [API-GATEWAY,,] 23068 --- [ctor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f9b266b7-12] Completed 200 OK\r\n    2023-01-05 10:59:45.964 DEBUG [API-GATEWAY,,] 23068 --- [/api/v2/spans}}] o.s.w.r.f.client.ExchangeFunctions       : [143e412e] HTTP POST http://localhost:9411/api/v2/spans\r\n    2023-01-05 10:59:45.965 DEBUG [API-GATEWAY,,] 23068 --- [ctor-http-nio-2] o.s.core.codec.ByteArrayEncoder          : [143e412e] Writing 853 bytes\r\n    2023-01-05 10:59:45.993 DEBUG [API-GATEWAY,,] 23068 --- [ctor-http-nio-2] o.s.w.r.f.client.ExchangeFunctions       : [143e412e] [fcfb2f85-4, L:/127.0.0.1:59436 - R:localhost/127.0.0.1:9411] Response 202 ACCEPTED\r\n\r\n**Update:** I added Exception in the fallback method argument list and below in the stacktrace:\r\n\r\n    @GetMapping(&quot;/orderServiceFallBack&quot;)\r\n        public String orderServiceFallback(Exception e) {\r\n            System.out.println(&quot;e.getMessage() = &quot; + e.getMessage()); // This is printing null.\r\n            System.out.println(&quot;e.getStackTrace() = &quot; + Arrays.toString(e.getStackTrace()));\r\n            return &quot;Order service is down!&quot;;\r\n        }\r\n\r\nBelow is the stacktrace printed:\r\n     \r\n  \r\n\r\n    [java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n        java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\r\n        java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n        java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n        java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n        org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:211)\r\n        org.springframework.web.reactive.result.method.annotation.ModelAttributeMethodArgumentResolver.constructAttribute(ModelAttributeMethodArgumentResolver.java:225)\r\n        org.springframework.web.reactive.result.method.annotation.ModelAttributeMethodArgumentResolver.createAttribute(ModelAttributeMethodArgumentResolver.java:217)\r\n        org.springframework.web.reactive.result.method.annotation.ModelAttributeMethodArgumentResolver.prepareAttributeMono(ModelAttributeMethodArgumentResolver.java:177)\r\n        org.springframework.web.reactive.result.method.annotation.ModelAttributeMethodArgumentResolver.resolveArgument(ModelAttributeMethodArgumentResolver.java:111)\r\n        org.springframework.web.reactive.result.method.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:119)\r\n        org.springframework.web.reactive.result.method.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:205)\r\n        org.springframework.web.reactive.result.method.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:136)\r\n        org.springframework.web.reactive.result.method.annotation.RequestMappingHandlerAdapter.lambda$handle$1(RequestMappingHandlerAdapter.java:200)\r\n        reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:44)\r\n        reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:240)\r\n        reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:203)\r\n        reactor.core.publisher.MonoFlatMap$FlatMapMain.onComplete(MonoFlatMap.java:181)\r\n        reactor.core.publisher.Operators.complete(Operators.java:137)\r\n        reactor.core.publisher.MonoZip.subscribe(MonoZip.java:121)\r\n        reactor.core.publisher.Mono.subscribe(Mono.java:4490)\r\n        reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263)\r\n        reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)\r\n        reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64)\r\n        reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:157)\r\n        reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)\r\n        reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82)\r\n        reactor.core.publisher.FluxConcatMap$ConcatMapImmediate.innerNext(FluxConcatMap.java:282)\r\n        reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863)\r\n        reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\r\n        reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)\r\n        reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2400)\r\n        reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.request(MonoPeekTerminal.java:139)\r\n        reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\r\n        reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2196)\r\n        reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2070)\r\n        reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\r\n        reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onSubscribe(MonoPeekTerminal.java:152)\r\n        reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)\r\n        reactor.core.publisher.Mono.subscribe(Mono.java:4490)\r\n        reactor.core.publisher.FluxConcatMap$ConcatMapImmediate.drain(FluxConcatMap.java:451)\r\n        reactor.core.publisher.FluxConcatMap$ConcatMapImmediate.onSubscribe(FluxConcatMap.java:219)\r\n        reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201)\r\n        reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83)\r\n        reactor.core.publisher.Mono.subscribe(Mono.java:4490)\r\n        reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:103)\r\n        reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onError(MonoPeekTerminal.java:258)\r\n        reactor.core.publisher.SerializedSubscriber.onError(SerializedSubscriber.java:124)\r\n        reactor.core.publisher.SerializedSubscriber.onError(SerializedSubscriber.java:124)\r\n        reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.handleTimeout(FluxTimeout.java:295)\r\n        reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.doTimeout(FluxTimeout.java:280)\r\n        reactor.core.publisher.FluxTimeout$TimeoutTimeoutSubscriber.onNext(FluxTimeout.java:419)\r\n        reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)\r\n        reactor.core.publisher.MonoDelay$MonoDelayRunnable.propagateDelay(MonoDelay.java:271)\r\n        reactor.core.publisher.MonoDelay$MonoDelayRunnable.run(MonoDelay.java:286)\r\n        reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)\r\n        reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)\r\n        java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n        java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\r\n        java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n        java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n        java.base/java.lang.Thread.run(Thread.java:833)]\r\n\r\n\r\n**Update2:** I enabled the circuitbreakers&#39; status in the actuator and checked before and after hitting the API. the failedCalls numbers are going up. But why? Because in my controller, the SOUT is printing everything perfectly fine.\r\n\r\nThis is what I am getting in the /actuator/health endpoint:\r\n\r\n    {\r\n    &quot;status&quot;: &quot;UP&quot;,\r\n    &quot;components&quot;: {\r\n        &quot;circuitBreakers&quot;: {\r\n            &quot;status&quot;: &quot;UP&quot;,\r\n            &quot;details&quot;: {\r\n                &quot;PAYMENT-SERVICE&quot;: {\r\n                    &quot;status&quot;: &quot;UP&quot;,\r\n                    &quot;details&quot;: {\r\n                        &quot;failureRate&quot;: &quot;-1.0%&quot;,\r\n                        &quot;failureRateThreshold&quot;: &quot;50.0%&quot;,\r\n                        &quot;slowCallRate&quot;: &quot;-1.0%&quot;,\r\n                        &quot;slowCallRateThreshold&quot;: &quot;100.0%&quot;,\r\n                        &quot;bufferedCalls&quot;: 0,\r\n                        &quot;slowCalls&quot;: 0,\r\n                        &quot;slowFailedCalls&quot;: 0,\r\n                        &quot;failedCalls&quot;: 0,\r\n                        &quot;notPermittedCalls&quot;: 0,\r\n                        &quot;state&quot;: &quot;CLOSED&quot;\r\n                    }\r\n                },\r\n                &quot;ORDER-SERVICE&quot;: {\r\n                    &quot;status&quot;: &quot;UP&quot;,\r\n                    &quot;details&quot;: {\r\n                        &quot;failureRate&quot;: &quot;-1.0%&quot;,\r\n                        &quot;failureRateThreshold&quot;: &quot;50.0%&quot;,\r\n                        &quot;slowCallRate&quot;: &quot;-1.0%&quot;,\r\n                        &quot;slowCallRateThreshold&quot;: &quot;100.0%&quot;,\r\n                        &quot;bufferedCalls&quot;: 1,\r\n                        &quot;slowCalls&quot;: 0,\r\n                        &quot;slowFailedCalls&quot;: 0,\r\n                        &quot;failedCalls&quot;: 1,\r\n                        &quot;notPermittedCalls&quot;: 0,\r\n                        &quot;state&quot;: &quot;CLOSED&quot;\r\n                    }\r\n                },\r\n                &quot;PRODUCT-SERVICE&quot;: {\r\n                    &quot;status&quot;: &quot;UP&quot;,\r\n                    &quot;details&quot;: {\r\n                        &quot;failureRate&quot;: &quot;-1.0%&quot;,\r\n                        &quot;failureRateThreshold&quot;: &quot;50.0%&quot;,\r\n                        &quot;slowCallRate&quot;: &quot;-1.0%&quot;,\r\n                        &quot;slowCallRateThreshold&quot;: &quot;100.0%&quot;,\r\n                        &quot;bufferedCalls&quot;: 0,\r\n                        &quot;slowCalls&quot;: 0,\r\n                        &quot;slowFailedCalls&quot;: 0,\r\n                        &quot;failedCalls&quot;: 0,\r\n                        &quot;notPermittedCalls&quot;: 0,\r\n                        &quot;state&quot;: &quot;CLOSED&quot;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }","title":"Spring API-gateway | Resilience4j randomly invoking fallback method even if the service is returning proper response","body":"<p>To provide some background, I am trying to implement below architecture.\nIt is from a course provided by &quot;DailyCodeBuffer&quot; on microservices, there are 3 services, order, product and payment. Clients can call the order service and order-service internally accesses payment and product services. Everything is registered on Eureka service registry and there is an API-Gateway via which everything should be routed.\n<a href=\"https://i.stack.imgur.com/CKzfH.png\" rel=\"nofollow noreferrer\">Architecture Schema</a></p>\n<p>So, first I created everything without the Okta Auth implementation and things were working perfectly fine. Upon calling the order-service via the gateway, I was able to get the order details by id let's say for example.</p>\n<p>Then I added the Okta auth and now every time I try to access an order details by id, <strong>for first 2-3 times I always get the fallback method response from the gateway. And if I keep requesting back to back, it gives me result after 2-3 times</strong>. If I try to hit the order-service directly without going via the gateway, things are working fine. Similarly, if I remove the circuit-breaker configuration for order-service from the Yaml given below, things are working fine again. <strong>Kindly suggest the possible reasons and the solution/direction in which I should look.</strong>\nPlease let me know if you want any other code/implementation from the repo. At this point, I honestly don’t know where to look for the issue.</p>\n<p>Here is my API-gateway yaml:</p>\n<pre><code>server:\n  port: 9090\n\nlogging:\n  level:\n    web: debug\n\nspring:\n  application:\n    name: API-GATEWAY\n  config:\n    import: configserver:http://localhost:9296\n  cloud:\n    gateway:\n      routes:\n        - id: ORDER-SERVICE\n          uri: lb://ORDER-SERVICE\n          predicates:\n            - Path=/order/**\n          filters:\n            - name: CircuitBreaker\n              args:\n                name: ORDER-SERVICE\n                fallbackuri: forward:/orderServiceFallBack\n            - name: RequestRateLimiter\n              args:\n                redis-rate-limiter.replenishRate: 1\n                redis-rate-limiter.burstCapacity: 1\n        - id: PAYMENT-SERVICE\n          uri: lb://PAYMENT-SERVICE\n          predicates:\n            - Path=/payment/**\n          filters:\n            - name: CircuitBreaker\n              args:\n                name: PAYMENT-SERVICE\n                fallbackuri: forward:/paymentServiceFallBack\n            - name: RequestRateLimiter\n              args:\n                redis-rate-limiter.replenishRate: 1\n                redis-rate-limiter.burstCapacity: 1\n        - id: PRODUCT-SERVICE\n          uri: lb://PRODUCT-SERVICE\n          predicates:\n            - Path=/product/**\n          filters:\n            - name: CircuitBreaker\n              args:\n                name: PRODUCT-SERVICE\n                fallbackuri: forward:/productServiceFallBack\n            - name: RequestRateLimiter\n              args:\n                redis-rate-limiter.replenishRate: 1\n                redis-rate-limiter.burstCapacity: 1\n\nokta:\n  oauth2:\n    issuer: &lt;&lt;not mentioning here for security reasons&gt;&gt;\n    audience: api://default\n    client-id: &lt;&lt;not mentioning here for security reasons&gt;&gt;\n    client-secret: &lt;&lt;not mentioning here for security reasons&gt;&gt;\n    scopes: openid, profile, email, offline_access\n</code></pre>\n<p>Here is my controller layer for order-service(The SOUT is printing everything correctly every time, so I am skipping service layer code here, please ask if you still want it):</p>\n<pre><code>@PreAuthorize(&quot;hasAuthority('Admin') || hasAuthority('Customer')&quot;)\n@GetMapping(&quot;/{orderId}&quot;)\npublic ResponseEntity&lt;OrderResponse&gt; getOrderDetails(@PathVariable(&quot;orderId&quot;) long orderId) {\n    OrderResponse orderResponse = orderService.getOrderDetails(orderId);\n    System.out.println(&quot;orderResponse = &quot; + orderResponse);\n    return new ResponseEntity&lt;&gt;(orderResponse, HttpStatus.OK);\n}\n</code></pre>\n<p>Here is my Cloud-Gateway application class where I have setup the circuit breaker with default configs:</p>\n<pre><code>@SpringBootApplication\npublic class CloudGatewayApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(CloudGatewayApplication.class, args);\n    }\n\n    @Bean\n    KeyResolver userKeySolver() {\n        return exchange -&gt; Mono.just(&quot;userKey&quot;);\n    }\n\n    @Bean\n    public Customizer&lt;Resilience4JCircuitBreakerFactory&gt; defaultCustomizer() {\n        return factory -&gt; factory.configureDefault(\n                id -&gt; new Resilience4JConfigBuilder(id)\n                        .circuitBreakerConfig(\n                                CircuitBreakerConfig.ofDefaults()\n                        ).build()\n        );\n    }\n\n}\n</code></pre>\n<p>FallBack controller in API-gateway:</p>\n<pre><code>import org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class FallbackController {\n\n    @GetMapping(&quot;/orderServiceFallBack&quot;)\n    public String orderServiceFallback() {\n        return &quot;Order service is down!&quot;;\n    }\n\n    @GetMapping(&quot;/paymentServiceFallBack&quot;)\n    public String paymentServiceFallback() {\n        return &quot;Payment service is down!&quot;;\n    }\n\n    @GetMapping(&quot;/productServiceFallBack&quot;)\n    public String productServiceFallback() {\n        return &quot;Product service is down!&quot;;\n    }\n}\n</code></pre>\n<p>Order-service logs (Same logs every time):</p>\n<pre><code>2023-01-05 10:56:22.465 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://dev-89319517.okta.com/oauth2/default/v1/keys\n2023-01-05 10:56:22.466 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Accept=[text/plain, */*]\n2023-01-05 10:56:23.799 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Response 200 OK\n2023-01-05 10:56:23.799 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Reading to [java.lang.String] as &quot;application/json&quot;\n2023-01-05 10:56:23.860 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.servlet.DispatcherServlet        : GET &quot;/order/4&quot;, parameters={}\n2023-01-05 10:56:23.872 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.dailycodebuffer.orderservice.controller.OrderController#getOrderDetails(long)\n2023-01-05 10:56:23.915  INFO [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] c.d.o.service.OrderServiceImpl           : Get order details for order id: 4\n2023-01-05 10:56:24.016  INFO [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] c.d.o.service.OrderServiceImpl           : Invoking product service to fetch the product for id: 2\n2023-01-05 10:56:24.018 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : HTTP GET http://PRODUCT-SERVICE/product/2\n2023-01-05 10:56:24.019 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]\n2023-01-05 10:56:24.028 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,1bc48b17dcb26435] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : HTTP POST https://dev-89319517.okta.com/oauth2/default/v1/token\n2023-01-05 10:56:24.028 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,1bc48b17dcb26435] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]\n2023-01-05 10:56:24.029 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,1bc48b17dcb26435] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Writing [{grant_type=[client_credentials], scope=[internal]}] as &quot;application/x-www-form-urlencoded;charset=UTF-8&quot;\n2023-01-05 10:56:24.672 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,1bc48b17dcb26435] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Response 200 OK\n2023-01-05 10:56:24.672 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,1bc48b17dcb26435] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Reading to [org.springframework.security.oauth2.core.endpoint.OAuth2AccessTokenResponse] as &quot;application/json;charset=UTF-8&quot;\n2023-01-05 10:56:26.132 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Response 200 OK\n2023-01-05 10:56:26.132 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Reading to [com.dailycodebuffer.orderservice.external.response.ProductResponse]\n2023-01-05 10:56:26.134  INFO [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] c.d.o.service.OrderServiceImpl           : Getting payment information from payment service\n2023-01-05 10:56:26.134 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : HTTP GET http://PAYMENT-SERVICE/payment/order/4\n2023-01-05 10:56:26.134 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]\n2023-01-05 10:56:26.134 DEBUG [ORDER-SERVICE,,] 14072 --- [/api/v2/spans}}] org.springframework.web.HttpLogging      : HTTP POST http://localhost:9411/api/v2/spans\n2023-01-05 10:56:26.134 DEBUG [ORDER-SERVICE,,] 14072 --- [/api/v2/spans}}] org.springframework.web.HttpLogging      : Accept=[text/plain, application/json, application/*+json, */*]\n2023-01-05 10:56:26.135 DEBUG [ORDER-SERVICE,,] 14072 --- [/api/v2/spans}}] org.springframework.web.HttpLogging      : Writing [[B@397bd980] as &quot;application/json&quot;\n2023-01-05 10:56:26.165 DEBUG [ORDER-SERVICE,,] 14072 --- [/api/v2/spans}}] org.springframework.web.HttpLogging      : Response 202 ACCEPTED\n2023-01-05 10:56:27.744 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Response 200 OK\n2023-01-05 10:56:27.744 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.client.RestTemplate              : Reading to [com.dailycodebuffer.orderservice.external.response.PaymentResponse]\norderResponse = OrderResponse(orderId=4, orderDate=2023-01-02T12:21:48.312429Z, orderStatus=PLACED, amount=2000, productDetails=OrderResponse.ProductDetails(productName=MacBook, productId=2, quantity=1, price=2000), paymentDetails=OrderResponse.PaymentDetails(paymentId=1, paymentMode=CASH, paymentStatus=SUCCESS, paymentDate=2023-01-02T12:21:48.794794Z))\n2023-01-05 10:56:27.760 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]\n2023-01-05 10:56:27.763 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [OrderResponse(orderId=4, orderDate=2023-01-02T12:21:48.312429Z, orderStatus=PLACED, amount=2000, pro (truncated)...]\n2023-01-05 10:56:27.773 DEBUG [ORDER-SERVICE,03f7ef4ad8f0e497,4a4d18fceb3bada1] 14072 --- [nio-8082-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK\n2023-01-05 10:56:28.168 DEBUG [ORDER-SERVICE,,] 14072 --- [/api/v2/spans}}] org.springframework.web.HttpLogging      : HTTP POST http://localhost:9411/api/v2/spans\n2023-01-05 10:56:28.169 DEBUG [ORDER-SERVICE,,] 14072 --- [/api/v2/spans}}] org.springframework.web.HttpLogging      : Accept=[text/plain, application/json, application/*+json, */*]\n2023-01-05 10:56:28.169 DEBUG [ORDER-SERVICE,,] 14072 --- [/api/v2/spans}}] org.springframework.web.HttpLogging      : Writing [[B@3460194e] as &quot;application/json&quot;\n2023-01-05 10:56:28.176 DEBUG [ORDER-SERVICE,,] 14072 --- [/api/v2/spans}}] org.springframework.web.HttpLogging      : Response 202 ACCEPTED\n</code></pre>\n<p>API-Gateway logs when it fails:</p>\n<pre><code>2023-01-05 10:58:24.485 DEBUG [API-GATEWAY,,] 23068 --- [ctor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f9b266b7-10] HTTP GET &quot;/order/4&quot;\n2023-01-05 10:58:24.496 DEBUG [API-GATEWAY,e7049b94195ecf37,6cf05802f3dca2dc] 23068 --- [     parallel-1] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.\n2023-01-05 10:58:25.163 DEBUG [API-GATEWAY,,] 23068 --- [/api/v2/spans}}] o.s.w.r.f.client.ExchangeFunctions       : [34ca7d36] HTTP POST http://localhost:9411/api/v2/spans\n2023-01-05 10:58:25.168 DEBUG [API-GATEWAY,60dd40f12b9da81d,070b6d8bba49f22f] 23068 --- [ctor-http-nio-4] o.s.core.codec.ByteArrayEncoder          : [34ca7d36] Writing 439 bytes\n2023-01-05 10:58:25.181 DEBUG [API-GATEWAY,60dd40f12b9da81d,070b6d8bba49f22f] 23068 --- [ctor-http-nio-4] o.s.w.r.f.client.ExchangeFunctions       : [34ca7d36] [862de7b5-1, L:/127.0.0.1:59384 - R:localhost/127.0.0.1:9411] Response 202 ACCEPTED\n2023-01-05 10:58:25.511 DEBUG [API-GATEWAY,b4f5aea2726ff3fb,08f2382b1d8686aa] 23068 --- [     parallel-2] s.w.r.r.m.a.RequestMappingHandlerMapping : [f9b266b7-10] Mapped to com.dailycodebuffer.cloudgateway.controller.FallbackController#orderServiceFallback()\n2023-01-05 10:58:25.514 DEBUG [API-GATEWAY,b4f5aea2726ff3fb,08f2382b1d8686aa] 23068 --- [     parallel-2] o.s.w.r.r.m.a.ResponseBodyResultHandler  : [f9b266b7-10] Using 'text/plain;charset=UTF-8' given [*/*] and supported [text/plain;charset=UTF-8, text/event-stream, text/plain;charset=UTF-8, */*]\n2023-01-05 10:58:25.514 DEBUG [API-GATEWAY,b4f5aea2726ff3fb,08f2382b1d8686aa] 23068 --- [     parallel-2] o.s.w.r.r.m.a.ResponseBodyResultHandler  : [f9b266b7-10] 0..1 [java.lang.String]\n2023-01-05 10:58:25.514 DEBUG [API-GATEWAY,b4f5aea2726ff3fb,08f2382b1d8686aa] 23068 --- [     parallel-2] o.s.core.codec.CharSequenceEncoder       : [f9b266b7-10] Writing &quot;Order service is down!&quot;\n2023-01-05 10:58:25.516 DEBUG [API-GATEWAY,,] 23068 --- [ctor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f9b266b7-10] Completed 200 OK\n2023-01-05 10:58:26.188 DEBUG [API-GATEWAY,,] 23068 --- [/api/v2/spans}}] o.s.w.r.f.client.ExchangeFunctions       : [1c1092e2] HTTP POST http://localhost:9411/api/v2/spans\n2023-01-05 10:58:26.190 DEBUG [API-GATEWAY,60dd40f12b9da81d,070b6d8bba49f22f] 23068 --- [ctor-http-nio-4] o.s.core.codec.ByteArrayEncoder          : [1c1092e2] Writing 1268 bytes\n2023-01-05 10:58:26.198 DEBUG [API-GATEWAY,60dd40f12b9da81d,070b6d8bba49f22f] 23068 --- [ctor-http-nio-4] o.s.w.r.f.client.ExchangeFunctions       : [1c1092e2] [862de7b5-2, L:/127.0.0.1:59384 - R:localhost/127.0.0.1:9411] Response 202 ACCEPTED\n</code></pre>\n<p>API-Gateway logs when it returns proper results:</p>\n<pre><code>2023-01-05 10:59:44.857 DEBUG [API-GATEWAY,b4f5aea2726ff3fb,08f2382b1d8686aa] 23068 --- [ctor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f9b266b7-12] HTTP GET &quot;/order/4&quot;\n2023-01-05 10:59:44.865 DEBUG [API-GATEWAY,6e2c73066610bdd2,04c9da4375862aa5] 23068 --- [     parallel-3] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.\n2023-01-05 10:59:44.946 DEBUG [API-GATEWAY,,] 23068 --- [/api/v2/spans}}] o.s.w.r.f.client.ExchangeFunctions       : [c2145ca] HTTP POST http://localhost:9411/api/v2/spans\n2023-01-05 10:59:44.947 DEBUG [API-GATEWAY,,] 23068 --- [ctor-http-nio-2] o.s.core.codec.ByteArrayEncoder          : [c2145ca] Writing 439 bytes\n2023-01-05 10:59:44.960 DEBUG [API-GATEWAY,,] 23068 --- [ctor-http-nio-2] o.s.w.r.f.client.ExchangeFunctions       : [c2145ca] [fcfb2f85-3, L:/127.0.0.1:59436 - R:localhost/127.0.0.1:9411] Response 202 ACCEPTED\n2023-01-05 10:59:45.484 DEBUG [API-GATEWAY,,] 23068 --- [ctor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f9b266b7-12] Completed 200 OK\n2023-01-05 10:59:45.964 DEBUG [API-GATEWAY,,] 23068 --- [/api/v2/spans}}] o.s.w.r.f.client.ExchangeFunctions       : [143e412e] HTTP POST http://localhost:9411/api/v2/spans\n2023-01-05 10:59:45.965 DEBUG [API-GATEWAY,,] 23068 --- [ctor-http-nio-2] o.s.core.codec.ByteArrayEncoder          : [143e412e] Writing 853 bytes\n2023-01-05 10:59:45.993 DEBUG [API-GATEWAY,,] 23068 --- [ctor-http-nio-2] o.s.w.r.f.client.ExchangeFunctions       : [143e412e] [fcfb2f85-4, L:/127.0.0.1:59436 - R:localhost/127.0.0.1:9411] Response 202 ACCEPTED\n</code></pre>\n<p><strong>Update:</strong> I added Exception in the fallback method argument list and below in the stacktrace:</p>\n<pre><code>@GetMapping(&quot;/orderServiceFallBack&quot;)\n    public String orderServiceFallback(Exception e) {\n        System.out.println(&quot;e.getMessage() = &quot; + e.getMessage()); // This is printing null.\n        System.out.println(&quot;e.getStackTrace() = &quot; + Arrays.toString(e.getStackTrace()));\n        return &quot;Order service is down!&quot;;\n    }\n</code></pre>\n<p>Below is the stacktrace printed:</p>\n<pre><code>[java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\n    java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n    java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n    org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:211)\n    org.springframework.web.reactive.result.method.annotation.ModelAttributeMethodArgumentResolver.constructAttribute(ModelAttributeMethodArgumentResolver.java:225)\n    org.springframework.web.reactive.result.method.annotation.ModelAttributeMethodArgumentResolver.createAttribute(ModelAttributeMethodArgumentResolver.java:217)\n    org.springframework.web.reactive.result.method.annotation.ModelAttributeMethodArgumentResolver.prepareAttributeMono(ModelAttributeMethodArgumentResolver.java:177)\n    org.springframework.web.reactive.result.method.annotation.ModelAttributeMethodArgumentResolver.resolveArgument(ModelAttributeMethodArgumentResolver.java:111)\n    org.springframework.web.reactive.result.method.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:119)\n    org.springframework.web.reactive.result.method.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:205)\n    org.springframework.web.reactive.result.method.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:136)\n    org.springframework.web.reactive.result.method.annotation.RequestMappingHandlerAdapter.lambda$handle$1(RequestMappingHandlerAdapter.java:200)\n    reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:44)\n    reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:240)\n    reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:203)\n    reactor.core.publisher.MonoFlatMap$FlatMapMain.onComplete(MonoFlatMap.java:181)\n    reactor.core.publisher.Operators.complete(Operators.java:137)\n    reactor.core.publisher.MonoZip.subscribe(MonoZip.java:121)\n    reactor.core.publisher.Mono.subscribe(Mono.java:4490)\n    reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263)\n    reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)\n    reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64)\n    reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:157)\n    reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)\n    reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82)\n    reactor.core.publisher.FluxConcatMap$ConcatMapImmediate.innerNext(FluxConcatMap.java:282)\n    reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863)\n    reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)\n    reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2400)\n    reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.request(MonoPeekTerminal.java:139)\n    reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\n    reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2196)\n    reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2070)\n    reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\n    reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onSubscribe(MonoPeekTerminal.java:152)\n    reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)\n    reactor.core.publisher.Mono.subscribe(Mono.java:4490)\n    reactor.core.publisher.FluxConcatMap$ConcatMapImmediate.drain(FluxConcatMap.java:451)\n    reactor.core.publisher.FluxConcatMap$ConcatMapImmediate.onSubscribe(FluxConcatMap.java:219)\n    reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201)\n    reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83)\n    reactor.core.publisher.Mono.subscribe(Mono.java:4490)\n    reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:103)\n    reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onError(MonoPeekTerminal.java:258)\n    reactor.core.publisher.SerializedSubscriber.onError(SerializedSubscriber.java:124)\n    reactor.core.publisher.SerializedSubscriber.onError(SerializedSubscriber.java:124)\n    reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.handleTimeout(FluxTimeout.java:295)\n    reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.doTimeout(FluxTimeout.java:280)\n    reactor.core.publisher.FluxTimeout$TimeoutTimeoutSubscriber.onNext(FluxTimeout.java:419)\n    reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)\n    reactor.core.publisher.MonoDelay$MonoDelayRunnable.propagateDelay(MonoDelay.java:271)\n    reactor.core.publisher.MonoDelay$MonoDelayRunnable.run(MonoDelay.java:286)\n    reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)\n    reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)\n    java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\n    java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    java.base/java.lang.Thread.run(Thread.java:833)]\n</code></pre>\n<p><strong>Update2:</strong> I enabled the circuitbreakers' status in the actuator and checked before and after hitting the API. the failedCalls numbers are going up. But why? Because in my controller, the SOUT is printing everything perfectly fine.</p>\n<p>This is what I am getting in the /actuator/health endpoint:</p>\n<pre><code>{\n&quot;status&quot;: &quot;UP&quot;,\n&quot;components&quot;: {\n    &quot;circuitBreakers&quot;: {\n        &quot;status&quot;: &quot;UP&quot;,\n        &quot;details&quot;: {\n            &quot;PAYMENT-SERVICE&quot;: {\n                &quot;status&quot;: &quot;UP&quot;,\n                &quot;details&quot;: {\n                    &quot;failureRate&quot;: &quot;-1.0%&quot;,\n                    &quot;failureRateThreshold&quot;: &quot;50.0%&quot;,\n                    &quot;slowCallRate&quot;: &quot;-1.0%&quot;,\n                    &quot;slowCallRateThreshold&quot;: &quot;100.0%&quot;,\n                    &quot;bufferedCalls&quot;: 0,\n                    &quot;slowCalls&quot;: 0,\n                    &quot;slowFailedCalls&quot;: 0,\n                    &quot;failedCalls&quot;: 0,\n                    &quot;notPermittedCalls&quot;: 0,\n                    &quot;state&quot;: &quot;CLOSED&quot;\n                }\n            },\n            &quot;ORDER-SERVICE&quot;: {\n                &quot;status&quot;: &quot;UP&quot;,\n                &quot;details&quot;: {\n                    &quot;failureRate&quot;: &quot;-1.0%&quot;,\n                    &quot;failureRateThreshold&quot;: &quot;50.0%&quot;,\n                    &quot;slowCallRate&quot;: &quot;-1.0%&quot;,\n                    &quot;slowCallRateThreshold&quot;: &quot;100.0%&quot;,\n                    &quot;bufferedCalls&quot;: 1,\n                    &quot;slowCalls&quot;: 0,\n                    &quot;slowFailedCalls&quot;: 0,\n                    &quot;failedCalls&quot;: 1,\n                    &quot;notPermittedCalls&quot;: 0,\n                    &quot;state&quot;: &quot;CLOSED&quot;\n                }\n            },\n            &quot;PRODUCT-SERVICE&quot;: {\n                &quot;status&quot;: &quot;UP&quot;,\n                &quot;details&quot;: {\n                    &quot;failureRate&quot;: &quot;-1.0%&quot;,\n                    &quot;failureRateThreshold&quot;: &quot;50.0%&quot;,\n                    &quot;slowCallRate&quot;: &quot;-1.0%&quot;,\n                    &quot;slowCallRateThreshold&quot;: &quot;100.0%&quot;,\n                    &quot;bufferedCalls&quot;: 0,\n                    &quot;slowCalls&quot;: 0,\n                    &quot;slowFailedCalls&quot;: 0,\n                    &quot;failedCalls&quot;: 0,\n                    &quot;notPermittedCalls&quot;: 0,\n                    &quot;state&quot;: &quot;CLOSED&quot;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","elasticsearch","spring-data-elasticsearch","testcontainers","testcontainers-junit5"],"answers":[{"tags":[],"owner":{"account_id":1093963,"reputation":3605,"user_id":1087978,"display_name":"Oleg Šelajev"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1642769225,"creation_date":1642682793,"answer_id":70786515,"question_id":70778593,"body_markdown":"General advice for any performance work or optimizations is to measure before introducing changes. I&#39;d recommend profiling your test runs before you draw conclusions. \r\n\r\nThere are a few metrics there that you can estimate without extensive use of profilers. \r\n* How long does the Elastic container start? \r\n\r\nFor me it takes 8.2 seconds (I used `elasticsearch-oss:7.10.2`): \r\n```\r\n14:35:55.803 [main] INFO  &#128051; [docker.elastic.co/elasticsearch/elasticsearch-oss:7.10.2] -\r\n Container docker.elastic.co/elasticsearch/elasticsearch-oss:7.10.2 \r\n started in PT8.264592S\r\n```\r\n* How often do you start new containers? The Docker image will be naturally cached, so it&#39;s not a concern, but depending on how you organize your test suite the amount of time you start new containers can grow. \r\n\r\nYou can read more about the lifecycle of the containers managed by Testcontainers [in the docs](https://www.testcontainers.org/test_framework_integration/manual_lifecycle_control/).\r\n \r\nFor example, if you use JUnit you can check whether you start new containers in `@BeforeEach` or `@BeforeAll` or are using a singleton container throughout the test suite. \r\n\r\n* How fast is the application in the container? \r\n\r\nOne of the factors is how much resources Docker is allowed to use. By default, [Docker is configured](https://docs.docker.com/desktop/mac/#resources) to have 2G of memory which could be a bottleneck.\r\nIf you don&#39;t have enough memory available in the container Elastic might behave slower than it should (even slower if it starts swapping, etc). Give it plenty of CPU and memory for fastest results. \r\n\r\nIf looking at these 3 things doesn&#39;t help, then perhaps you could profile the test run to check what are the bottlenecks.\r\n","title":"Speed up Elasticsearch Test Containers","body":"<p>General advice for any performance work or optimizations is to measure before introducing changes. I'd recommend profiling your test runs before you draw conclusions.</p>\n<p>There are a few metrics there that you can estimate without extensive use of profilers.</p>\n<ul>\n<li>How long does the Elastic container start?</li>\n</ul>\n<p>For me it takes 8.2 seconds (I used <code>elasticsearch-oss:7.10.2</code>):</p>\n<pre><code>14:35:55.803 [main] INFO  🐳 [docker.elastic.co/elasticsearch/elasticsearch-oss:7.10.2] -\n Container docker.elastic.co/elasticsearch/elasticsearch-oss:7.10.2 \n started in PT8.264592S\n</code></pre>\n<ul>\n<li>How often do you start new containers? The Docker image will be naturally cached, so it's not a concern, but depending on how you organize your test suite the amount of time you start new containers can grow.</li>\n</ul>\n<p>You can read more about the lifecycle of the containers managed by Testcontainers <a href=\"https://www.testcontainers.org/test_framework_integration/manual_lifecycle_control/\" rel=\"nofollow noreferrer\">in the docs</a>.</p>\n<p>For example, if you use JUnit you can check whether you start new containers in <code>@BeforeEach</code> or <code>@BeforeAll</code> or are using a singleton container throughout the test suite.</p>\n<ul>\n<li>How fast is the application in the container?</li>\n</ul>\n<p>One of the factors is how much resources Docker is allowed to use. By default, <a href=\"https://docs.docker.com/desktop/mac/#resources\" rel=\"nofollow noreferrer\">Docker is configured</a> to have 2G of memory which could be a bottleneck.\nIf you don't have enough memory available in the container Elastic might behave slower than it should (even slower if it starts swapping, etc). Give it plenty of CPU and memory for fastest results.</p>\n<p>If looking at these 3 things doesn't help, then perhaps you could profile the test run to check what are the bottlenecks.</p>\n"}],"owner":{"account_id":3463037,"reputation":2280,"user_id":2899485,"accept_rate":42,"display_name":"A_G"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2317,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70786515,"answer_count":1,"score":2,"last_activity_date":1672916415,"creation_date":1642631529,"question_id":70778593,"body_markdown":"I have moved the java integration tests to use elasticsearch test containers instead of using embedded elasticsearch. The tests have become slower by 1 hour which is a huge productivity hit. I am looking for ways to speed that up.\r\n\r\nI tried using params like `reuse` on Elasticsearch container but that didn&#39;t make a dent. My latest configuration is\r\n```\r\n    private static final String ELASTICSEARCH_VERSION = &quot;7.11.2&quot;;\r\n    private static ElasticsearchContainer elasticsearchContainer;\r\n    private static final DockerImageName ELASTICSEARCH_IMAGE =\r\n          DockerImageName\r\n                .parse(&quot;docker.elastic.co/elasticsearch/elasticsearch&quot;)\r\n                .withTag(ELASTICSEARCH_VERSION);\r\n```\r\n\r\n```\r\n            elasticsearchContainer = new ElasticsearchContainer(ELASTICSEARCH_IMAGE)\r\n                  .withEnv(&quot;foo&quot;, &quot;bar&quot;).withSharedMemorySize(1000000000L);\r\n            elasticsearchContainer.addExposedPorts(9200, 9300);\r\n            elasticsearchContainer.withStartupTimeout(Duration.of(5, ChronoUnit.MINUTES));\r\n            elasticsearchContainer.start();\r\n```\r\n\r\n```\r\n    private static RestHighLevelClient getRestHighLevelClient(ElasticsearchContainer container) {\r\n        final CredentialsProvider credentialsProvider = new BasicCredentialsProvider();\r\n        credentialsProvider.setCredentials(AuthScope.ANY,\r\n                                           new UsernamePasswordCredentials(ELASTICSEARCH_USERNAME,\r\n                                                                           ELASTICSEARCH_PASSWORD));\r\n        RestClientBuilder restClientBuilder = RestClient.builder(HttpHost.create(container.getHttpHostAddress()))\r\n              .setHttpClientConfigCallback(httpClientBuilder -&gt; httpClientBuilder\r\n                    .setDefaultCredentialsProvider(credentialsProvider)\r\n                    .setKeepAliveStrategy((response, context) -&gt; 3 * 60 * 1000));\r\n        // Try to prevent SocketTimeoutException when fetching larger batch size\r\n        restClientBuilder.setRequestConfigCallback(\r\n              requestConfigBuilder -&gt; requestConfigBuilder.setSocketTimeout(2 * 60 * 1000));\r\n\r\n        return new RestHighLevelClient(restClientBuilder);\r\n    }\r\n```\r\n\r\nGradle config (gradle daemon crashed once so increased to 2g)\r\n```\r\norg.gradle.jvmargs=-Xms2g -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8\r\n```\r\n\r\nAny suggestions on making the tests faster?","title":"Speed up Elasticsearch Test Containers","body":"<p>I have moved the java integration tests to use elasticsearch test containers instead of using embedded elasticsearch. The tests have become slower by 1 hour which is a huge productivity hit. I am looking for ways to speed that up.</p>\n<p>I tried using params like <code>reuse</code> on Elasticsearch container but that didn't make a dent. My latest configuration is</p>\n<pre><code>    private static final String ELASTICSEARCH_VERSION = &quot;7.11.2&quot;;\n    private static ElasticsearchContainer elasticsearchContainer;\n    private static final DockerImageName ELASTICSEARCH_IMAGE =\n          DockerImageName\n                .parse(&quot;docker.elastic.co/elasticsearch/elasticsearch&quot;)\n                .withTag(ELASTICSEARCH_VERSION);\n</code></pre>\n<pre><code>            elasticsearchContainer = new ElasticsearchContainer(ELASTICSEARCH_IMAGE)\n                  .withEnv(&quot;foo&quot;, &quot;bar&quot;).withSharedMemorySize(1000000000L);\n            elasticsearchContainer.addExposedPorts(9200, 9300);\n            elasticsearchContainer.withStartupTimeout(Duration.of(5, ChronoUnit.MINUTES));\n            elasticsearchContainer.start();\n</code></pre>\n<pre><code>    private static RestHighLevelClient getRestHighLevelClient(ElasticsearchContainer container) {\n        final CredentialsProvider credentialsProvider = new BasicCredentialsProvider();\n        credentialsProvider.setCredentials(AuthScope.ANY,\n                                           new UsernamePasswordCredentials(ELASTICSEARCH_USERNAME,\n                                                                           ELASTICSEARCH_PASSWORD));\n        RestClientBuilder restClientBuilder = RestClient.builder(HttpHost.create(container.getHttpHostAddress()))\n              .setHttpClientConfigCallback(httpClientBuilder -&gt; httpClientBuilder\n                    .setDefaultCredentialsProvider(credentialsProvider)\n                    .setKeepAliveStrategy((response, context) -&gt; 3 * 60 * 1000));\n        // Try to prevent SocketTimeoutException when fetching larger batch size\n        restClientBuilder.setRequestConfigCallback(\n              requestConfigBuilder -&gt; requestConfigBuilder.setSocketTimeout(2 * 60 * 1000));\n\n        return new RestHighLevelClient(restClientBuilder);\n    }\n</code></pre>\n<p>Gradle config (gradle daemon crashed once so increased to 2g)</p>\n<pre><code>org.gradle.jvmargs=-Xms2g -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8\n</code></pre>\n<p>Any suggestions on making the tests faster?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1672754508,"post_id":74993410,"comment_id":132342436,"body_markdown":"Does this answer your question? [How does one specify a temp directory for file uploads in Spring Boot?](https://stackoverflow.com/questions/29923682/how-does-one-specify-a-temp-directory-for-file-uploads-in-spring-boot)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/29923682/how-does-one-specify-a-temp-directory-for-file-uploads-in-spring-boot\">How does one specify a temp directory for file uploads in Spring Boot?</a>"}],"answers":[{"tags":[],"owner":{"account_id":16623452,"reputation":902,"user_id":12013107,"display_name":"Saurabh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672916409,"creation_date":1672817851,"answer_id":75002240,"question_id":74993410,"body_markdown":"As mentioned in [this][1] document for `spring.servlet.multipart.location`, \r\n\r\n&gt; location specifies the directory where uploaded files will be stored.\r\n&gt; When not specified, a temporary directory will be used.\r\n\r\nI dig around some internal code and found out that, it depends on the `spring.servlet.multipart.file-size-threshold` configuration. As mentioned in the doc \r\n\r\n&gt; specifies the size threshold after which files will be written to disk. The default is 0.\r\n\r\nIf you mention any non-zero value then it will attempt to store that much in memory first before, writing to disk.\r\nFor your case, if you mention any location in `spring.servlet.multipart.location` the file will directly stored over that location only.\r\nYou may also want to check  `spring.servlet.multipart.max-file-size` and `spring.servlet.multipart.max-request-size` property.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/web/servlet/MultipartProperties.html","title":"Spring boot multi part files upload storing data wondering","body":"<p>As mentioned in <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/web/servlet/MultipartProperties.html\" rel=\"nofollow noreferrer\">this</a> document for <code>spring.servlet.multipart.location</code>,</p>\n<blockquote>\n<p>location specifies the directory where uploaded files will be stored.\nWhen not specified, a temporary directory will be used.</p>\n</blockquote>\n<p>I dig around some internal code and found out that, it depends on the <code>spring.servlet.multipart.file-size-threshold</code> configuration. As mentioned in the doc</p>\n<blockquote>\n<p>specifies the size threshold after which files will be written to disk. The default is 0.</p>\n</blockquote>\n<p>If you mention any non-zero value then it will attempt to store that much in memory first before, writing to disk.\nFor your case, if you mention any location in <code>spring.servlet.multipart.location</code> the file will directly stored over that location only.\nYou may also want to check  <code>spring.servlet.multipart.max-file-size</code> and <code>spring.servlet.multipart.max-request-size</code> property.</p>\n"}],"owner":{"account_id":22246447,"reputation":17,"user_id":16480070,"display_name":"Sizor"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":457,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672916409,"creation_date":1672749016,"question_id":74993410,"body_markdown":"I have this service in spring boot app:\r\n\r\n    @Service\r\n    public class FileStorageService {\r\n        private final Path root = Paths.get(&quot;uploads&quot;);\r\n    \r\n        public void init() {\r\n            try {\r\n              Files.createDirectories(root);\r\n            } catch (IOException e) {\r\n              throw new RuntimeException(&quot;Could not initialize folder for upload!&quot;);\r\n            }\r\n          }\r\n        \r\n          public ResponseEntity&lt;?&gt; save(MultipartFile[] files) {\r\n            if (files.length == 0) {\r\n                //return ResponseEntity.badRequest();\r\n            }\r\n    \r\n           \r\n        \r\n            Arrays.asList(files).stream().forEach(file -&gt; {\r\n                try {\r\n                    // Get the file and save it somewhere\r\n                    byte[] bytes = file.getBytes();\r\n                    Path path = Paths.get(root + File.separator + file.getOriginalFilename());\r\n                    Files.write(path, bytes);\r\n        \r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            });\r\n    \r\n            \r\n            return new ResponseEntity&lt;&gt;(null, HttpStatus.OK);\r\n            \r\n        }\r\n        \r\n    }\r\n\r\nThere is some folder for saving files &quot;uploads&quot;. And i am now wondering what is \r\n\r\n    spring.servlet.multipart.location=\r\n\r\nsetting used for. Is this just folder where raw data from request are stored before they are saved in &quot;uploads&quot; folder?","title":"Spring boot multi part files upload storing data wondering","body":"<p>I have this service in spring boot app:</p>\n<pre><code>@Service\npublic class FileStorageService {\n    private final Path root = Paths.get(&quot;uploads&quot;);\n\n    public void init() {\n        try {\n          Files.createDirectories(root);\n        } catch (IOException e) {\n          throw new RuntimeException(&quot;Could not initialize folder for upload!&quot;);\n        }\n      }\n    \n      public ResponseEntity&lt;?&gt; save(MultipartFile[] files) {\n        if (files.length == 0) {\n            //return ResponseEntity.badRequest();\n        }\n\n       \n    \n        Arrays.asList(files).stream().forEach(file -&gt; {\n            try {\n                // Get the file and save it somewhere\n                byte[] bytes = file.getBytes();\n                Path path = Paths.get(root + File.separator + file.getOriginalFilename());\n                Files.write(path, bytes);\n    \n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        });\n\n        \n        return new ResponseEntity&lt;&gt;(null, HttpStatus.OK);\n        \n    }\n    \n}\n</code></pre>\n<p>There is some folder for saving files &quot;uploads&quot;. And i am now wondering what is</p>\n<pre><code>spring.servlet.multipart.location=\n</code></pre>\n<p>setting used for. Is this just folder where raw data from request are stored before they are saved in &quot;uploads&quot; folder?</p>\n"},{"tags":["java","appium"],"owner":{"account_id":12496720,"reputation":21,"user_id":11494942,"display_name":"mr.m.m."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672916399,"creation_date":1672840915,"question_id":75006580,"body_markdown":"I&#39;ve been using older version of Appium and appium-java-client and recently I&#39;ve been trying to upgrade to new versions. For closing the app after each android test I used `mobileDriver.quit()` but it&#39;s not working in the new version. I&#39;ve read the documentation and found a command `mobileDriver.executeScript(&quot;mobile: terminateApp&quot;, ImmutableMap.of(&quot;appId&quot;, &quot;app.id&quot;))` but it won&#39;t work either. Has anyone been able to achieve this?\r\nThanks in advance.","title":"How to terminate app after each test Appium UIAutomator2","body":"<p>I've been using older version of Appium and appium-java-client and recently I've been trying to upgrade to new versions. For closing the app after each android test I used <code>mobileDriver.quit()</code> but it's not working in the new version. I've read the documentation and found a command <code>mobileDriver.executeScript(&quot;mobile: terminateApp&quot;, ImmutableMap.of(&quot;appId&quot;, &quot;app.id&quot;))</code> but it won't work either. Has anyone been able to achieve this?\nThanks in advance.</p>\n"},{"tags":["java","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":6682867,"reputation":544,"user_id":5155332,"display_name":"northpl93"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1587414344,"creation_date":1587414344,"answer_id":61331426,"question_id":61331320,"body_markdown":"If you are using JetBrains Toolbox, restart it. IntelliJ inherits old environment variables from toolbox&#39;s process.","title":"IntelliJ terminal has a different environment path?","body":"<p>If you are using JetBrains Toolbox, restart it. IntelliJ inherits old environment variables from toolbox's process.</p>\n"},{"tags":[],"owner":{"account_id":36734,"reputation":392117,"user_id":104891,"display_name":"CrazyCoder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1587414866,"creation_date":1587414866,"answer_id":61331578,"question_id":61331320,"body_markdown":"Environment variables are inherited from the parent process and are not updated on the fly in most cases. You should logout/login or reboot for the environment variables to have effect for all the apps on the system.","title":"IntelliJ terminal has a different environment path?","body":"<p>Environment variables are inherited from the parent process and are not updated on the fly in most cases. You should logout/login or reboot for the environment variables to have effect for all the apps on the system.</p>\n"}],"owner":{"account_id":11936627,"reputation":105,"user_id":8734879,"display_name":"Rufus7"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":472,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":61331578,"answer_count":2,"score":1,"last_activity_date":1672915962,"creation_date":1587413959,"question_id":61331320,"body_markdown":"I am trying to run maven project in the intelliJ, then got an error \r\n```\r\n JAVA_HOME is set to an invalid directory.\r\n JAVA_HOME = &quot;H:\\jdk\\1.8\\bin&quot;\r\n Please set the JAVA_HOME varialbe in your environment to match \r\n the location of you Java installation\r\n```\r\n\r\nI have changed the environment variable in system to &quot;H:\\jdk\\1.8&quot;, and restart the intelliJ, still got the same error. But in system command prompt, the java_home is already &quot;H:\\jdk\\1.8&quot;\r\n\r\nDoes anyone know how to solve it? Thank you.","title":"IntelliJ terminal has a different environment path?","body":"<p>I am trying to run maven project in the intelliJ, then got an error </p>\n\n<pre><code> JAVA_HOME is set to an invalid directory.\n JAVA_HOME = \"H:\\jdk\\1.8\\bin\"\n Please set the JAVA_HOME varialbe in your environment to match \n the location of you Java installation\n</code></pre>\n\n<p>I have changed the environment variable in system to \"H:\\jdk\\1.8\", and restart the intelliJ, still got the same error. But in system command prompt, the java_home is already \"H:\\jdk\\1.8\"</p>\n\n<p>Does anyone know how to solve it? Thank you.</p>\n"},{"tags":["java","protocol-buffers","grpc","grpc-java"],"comments":[{"owner":{"account_id":14947494,"reputation":506,"user_id":10792320,"display_name":"San P"},"score":2,"creation_date":1615160359,"post_id":66507828,"comment_id":117598774,"body_markdown":"Why don&#39;t you like the first approach? For best practices you can check out:\n\nhttps://developers.google.com/protocol-buffers/docs/proto3#enum\n\nor\n\nhttps://developers.google.com/protocol-buffers/docs/reference/java-generated#enum","body":"Why don&#39;t you like the first approach? For best practices you can check out:  <a href=\"https://developers.google.com/protocol-buffers/docs/proto3#enum\" rel=\"nofollow noreferrer\">developers.google.com/protocol-buffers/docs/proto3#enum</a>  or  <a href=\"https://developers.google.com/protocol-buffers/docs/reference/java-generated#enum\" rel=\"nofollow noreferrer\">developers.google.com/protocol-buffers/docs/reference/&hellip;</a>"},{"owner":{"account_id":5382000,"reputation":5258,"user_id":4286990,"accept_rate":60,"display_name":"vatsal mevada"},"score":0,"creation_date":1615177941,"post_id":66507828,"comment_id":117601653,"body_markdown":"@SanP Thanks for those references to best practices. I ended up using the first approach only. I also noticed that there is experimental support for optional attributes, which appeared cleaner to me but unfortunately I won&#39;t be able to use that experimental feature in our production code. About the first approach one annoying thing was the scoping semantics of the enums. i.e. I have to keep in unique in the entire proto file which means I will have to use `UNKNOWN_FOO` instead of `UNKNOWN`.","body":"@SanP Thanks for those references to best practices. I ended up using the first approach only. I also noticed that there is experimental support for optional attributes, which appeared cleaner to me but unfortunately I won&#39;t be able to use that experimental feature in our production code. About the first approach one annoying thing was the scoping semantics of the enums. i.e. I have to keep in unique in the entire proto file which means I will have to use <code>UNKNOWN_FOO</code> instead of <code>UNKNOWN</code>."}],"answers":[{"tags":[],"owner":{"account_id":5209973,"reputation":1102,"user_id":4166721,"display_name":"Cash Lo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644222366,"creation_date":1644222366,"answer_id":71015456,"question_id":66507828,"body_markdown":"You should be able to check the field using `hasFoo()`, while `getFoo()` will return `BAR`, `hasFoo()` should return `false`.","title":"How to handle a nullable enum type field in a protobuf3 message?","body":"<p>You should be able to check the field using <code>hasFoo()</code>, while <code>getFoo()</code> will return <code>BAR</code>, <code>hasFoo()</code> should return <code>false</code>.</p>\n"},{"tags":[],"owner":{"account_id":14173637,"reputation":105,"user_id":10239573,"display_name":"Miri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672915705,"creation_date":1672915705,"answer_id":75017267,"question_id":66507828,"body_markdown":"Continue reading only if you do not wish to use `UNKNOWN` enum value.\r\n\r\nDo not know if the best practice but whenever I&#39;m sending the object itself where the value can&#39;t be null, I use the `enum` value.\r\nAnd in requests (like your `UpdateRequest`) when it can be empty I&#39;m using a `string` type instead and handle the conversion manually.\r\n\r\n    message Object {\r\n      EnumProperty property = 1;\r\n    \r\n      enum EnumProperty {\r\n        FIRST = 0;\r\n        SECOND = 1;\r\n        THIRD = 2;\r\n      }\r\n    }\r\n    \r\n    message ObjectUpdateRequest {\r\n      string property = 1;\r\n    }","title":"How to handle a nullable enum type field in a protobuf3 message?","body":"<p>Continue reading only if you do not wish to use <code>UNKNOWN</code> enum value.</p>\n<p>Do not know if the best practice but whenever I'm sending the object itself where the value can't be null, I use the <code>enum</code> value.\nAnd in requests (like your <code>UpdateRequest</code>) when it can be empty I'm using a <code>string</code> type instead and handle the conversion manually.</p>\n<pre><code>message Object {\n  EnumProperty property = 1;\n\n  enum EnumProperty {\n    FIRST = 0;\n    SECOND = 1;\n    THIRD = 2;\n  }\n}\n\nmessage ObjectUpdateRequest {\n  string property = 1;\n}\n</code></pre>\n"}],"owner":{"account_id":5382000,"reputation":5258,"user_id":4286990,"accept_rate":60,"display_name":"vatsal mevada"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5161,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1672915705,"creation_date":1615047143,"question_id":66507828,"body_markdown":"The following are my protobuf definitions:\r\n```\r\nenum Foo {\r\n   BAR = 0;\r\n   BAZ = 1;      \r\n}\r\n\r\nmessage UpdateRequest {\r\n  string id = 1;\r\n  Foo foo = 2;\r\n  .\r\n  .\r\n  .\r\n}\r\n```\r\n\r\nI need the `foo` field of the `UpdateRequest` to be nullable. However, if I don&#39;t set the value of this field then as per protobuf semantics it always ends up picking `BAR` as the default value.\r\n\r\nLooking around, I found a couple of ways to handle this.\r\n1. Add an additional `UNKNOWN` value in the enum and map it to `0` so that this value will be used as the default value instead of `BAR` and I can treat this value as null.\r\n\r\n```\r\nenum Foo {\r\n   UNKNOWN = 0;\r\n   BAR = 1;\r\n   BAZ = 2;      \r\n}\r\n```\r\n2. Use `oneof` construct.\r\n\r\nHowever, somehow I feel that both of the above approaches are a kind of a workaround and I am not able to locate official documentation explaining the best practice to handle this case.\r\n\r\nWhat is the best practice to handle this use case?\r\n","title":"How to handle a nullable enum type field in a protobuf3 message?","body":"<p>The following are my protobuf definitions:</p>\n<pre><code>enum Foo {\n   BAR = 0;\n   BAZ = 1;      \n}\n\nmessage UpdateRequest {\n  string id = 1;\n  Foo foo = 2;\n  .\n  .\n  .\n}\n</code></pre>\n<p>I need the <code>foo</code> field of the <code>UpdateRequest</code> to be nullable. However, if I don't set the value of this field then as per protobuf semantics it always ends up picking <code>BAR</code> as the default value.</p>\n<p>Looking around, I found a couple of ways to handle this.</p>\n<ol>\n<li>Add an additional <code>UNKNOWN</code> value in the enum and map it to <code>0</code> so that this value will be used as the default value instead of <code>BAR</code> and I can treat this value as null.</li>\n</ol>\n<pre><code>enum Foo {\n   UNKNOWN = 0;\n   BAR = 1;\n   BAZ = 2;      \n}\n</code></pre>\n<ol start=\"2\">\n<li>Use <code>oneof</code> construct.</li>\n</ol>\n<p>However, somehow I feel that both of the above approaches are a kind of a workaround and I am not able to locate official documentation explaining the best practice to handle this case.</p>\n<p>What is the best practice to handle this use case?</p>\n"},{"tags":["java","open-telemetry"],"comments":[{"owner":{"account_id":10595855,"reputation":2708,"user_id":7804595,"display_name":"Valeriy K."},"score":0,"creation_date":1678961579,"post_id":75016256,"comment_id":133635603,"body_markdown":"Try to exclude classLoaderMatcher() at all. It enables classloader which will load `java.sql.Statement` but may be unable to load other classes. Use the default loader.","body":"Try to exclude classLoaderMatcher() at all. It enables classloader which will load <code>java.sql.Statement</code> but may be unable to load other classes. Use the default loader."}],"answers":[{"tags":[],"owner":{"account_id":21372668,"reputation":156,"user_id":15739953,"display_name":"Mateusz Rzeszutek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672913032,"creation_date":1672913032,"answer_id":75016729,"question_id":75016256,"body_markdown":"You&#39;ll need to set the `readOnly = false` option on the `@Argument` annotation , otherwise the advice code will not overwrite the original value:\r\n\r\n```java\r\n    @Advice.OnMethodEnter(suppress = Throwable.class)\r\n    public static void onEnter(@Advice.Argument(value = 0, readOnly = false) String sql) {\r\n      System.out.println(&quot;Inside MYSQL-1.4&quot;);\r\n\r\n      sql = sql + &quot; -- some comment&quot;;\r\n\r\n      System.out.println(&quot;Inside MYSQL- 1.5&quot;);\r\n    }\r\n```","title":"Why is my OpenTelemetry java extension not working","body":"<p>You'll need to set the <code>readOnly = false</code> option on the <code>@Argument</code> annotation , otherwise the advice code will not overwrite the original value:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Advice.OnMethodEnter(suppress = Throwable.class)\n    public static void onEnter(@Advice.Argument(value = 0, readOnly = false) String sql) {\n      System.out.println(&quot;Inside MYSQL-1.4&quot;);\n\n      sql = sql + &quot; -- some comment&quot;;\n\n      System.out.println(&quot;Inside MYSQL- 1.5&quot;);\n    }\n</code></pre>\n"}],"owner":{"account_id":27438316,"reputation":21,"user_id":20933731,"display_name":"Vaibhav"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":873,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672915682,"creation_date":1672910744,"question_id":75016256,"body_markdown":"I have created an extension to add some comment in the sql query. For this I have created a `MySQLAddCommentInstrumentation.java` class to make changes to `query` in `Statement.java` class.\r\nAlso there is one `MySQLAddCommentInstrumentationModule.java` class which adds this instrumentation (`MySQLAddCommentInstrumentation`) to its list.\r\n\r\nWhen I build this extension and run my app, I do not see the comment in the query under db.statement zipkin log.\r\n\r\nInstrumentation Class - MySQLAddCommentInstrumentation.java\r\nPath - examples/extension/src/main/java/com/example/javaagent/mysqlinstrumentation/MySQLAddCommentInstrumentation.java\r\n\r\n\r\n```\r\npackage com.example.javaagent.mysqlinstrumentation;\r\n\r\nimport static io.opentelemetry.javaagent.extension.matcher.AgentElementMatchers.implementsInterface;\r\nimport static net.bytebuddy.matcher.ElementMatchers.named;\r\nimport static net.bytebuddy.matcher.ElementMatchers.namedOneOf;\r\n\r\nimport io.opentelemetry.javaagent.extension.instrumentation.TypeInstrumentation;\r\nimport io.opentelemetry.javaagent.extension.instrumentation.TypeTransformer;\r\nimport net.bytebuddy.asm.Advice;\r\nimport net.bytebuddy.description.type.TypeDescription;\r\nimport net.bytebuddy.matcher.ElementMatcher;\r\nimport net.bytebuddy.matcher.ElementMatchers;\r\n\r\npublic class MySQLAddCommentInstrumentation implements TypeInstrumentation {\r\n\r\n  @Override\r\n  public ElementMatcher&lt;TypeDescription&gt; typeMatcher() {\r\n    System.out.println(&quot;Inside MYSQL- 1.1&quot;);\r\n    return implementsInterface(named(&quot;java.sql.Statement&quot;));\r\n  }\r\n\r\n  public void transform(TypeTransformer transformer) {\r\n    System.out.println(&quot;Inside MYSQL- 1.2&quot;);\r\n\r\n    transformer.applyAdviceToMethod(\r\n        namedOneOf(&quot;executeQuery&quot;)\r\n            .and(ElementMatchers.takesArgument(0, String.class))\r\n            .and(ElementMatchers.isPublic()),\r\n        MySQLAddCommentInstrumentation.class.getName() + &quot;$StatementAddCommentAdvice&quot;);\r\n\r\n    System.out.println(&quot;Inside MYSQL- 1.3&quot;);\r\n  }\r\n\r\n  @SuppressWarnings(&quot;unused&quot;)\r\n  public static class StatementAddCommentAdvice {\r\n\r\n    @Advice.OnMethodEnter(suppress = Throwable.class)\r\n    public static void onEnter(@Advice.Argument(value = 0, readOnly = false) String sql) {\r\n      System.out.println(&quot;Inside MYSQL- 1.4&quot;);\r\n\r\n      sql = sql + &quot; -- some comment&quot;;\r\n\r\n      System.out.println(&quot;Inside MYSQL- 1.5&quot;);\r\n    }\r\n  }\r\n```\r\n\r\nInstrumentationModule - MySQLAddCommentInstrumentationModule.java\r\nPath - examples/extension/src/main/java/com/example/javaagent/mysqlinstrumentation/MySQLAddCommentInstrumentationModule.java\r\n\r\n\r\n\r\n```\r\npackage com.example.javaagent.mysqlinstrumentation;\r\n\r\nimport static java.util.Collections.singletonList;\r\n\r\nimport com.google.auto.service.AutoService;\r\nimport io.opentelemetry.javaagent.extension.instrumentation.InstrumentationModule;\r\nimport io.opentelemetry.javaagent.extension.instrumentation.TypeInstrumentation;\r\nimport io.opentelemetry.javaagent.extension.matcher.AgentElementMatchers;\r\nimport java.util.List;\r\nimport net.bytebuddy.matcher.ElementMatcher;\r\n\r\n\r\n@AutoService(InstrumentationModule.class)\r\npublic final class MySQLAddCommentInstrumentationModule extends InstrumentationModule {\r\n  public MySQLAddCommentInstrumentationModule() {\r\n    super(&quot;jdbc&quot;);\r\n  }\r\n\r\n  @Override\r\n  public int order() {\r\n    return 1;\r\n  }\r\n\r\n  @Override\r\n  public ElementMatcher.Junction&lt;ClassLoader&gt; classLoaderMatcher() {\r\n    return AgentElementMatchers.hasClassesNamed(&quot;java.sql.Statement&quot;);\r\n  }\r\n\r\n  @Override\r\n  public List&lt;TypeInstrumentation&gt; typeInstrumentations() {\r\n    return singletonList(new MySQLAddCommentInstrumentation());\r\n  }\r\n}\r\n\r\n```\r\n\r\n\r\nCode where this instrumentations is expected to run:\r\n\r\n\r\n```\r\ntry {\r\n            Connection con = DriverManager.getConnection(url, uname, password);\r\n            Statement statement = con.createStatement();\r\n            System.out.println(query);\r\n            ResultSet result = statement.executeQuery(query);\r\n            System.out.println(query);\r\n\r\n        } catch (SQLException e) {\r\n            e.printStackTrace();\r\n        }\r\n```\r\n\r\nI have run `./gradlew build` inside examples/extension and used that extension jar to run my application\r\n\r\n```\r\njava -javaagent:/Users/vaibhavpaharia/Downloads/opentelemetry-javaagent.jar \\\r\n     -Dotel.javaagent.extensions=/Users/vaibhavpaharia/ok/opentelemetry-java-instrumentation/examples/extension/build/libs/opentelemetry-java-instrumentation-extension-demo-1.0-all.jar  \\\r\n     -Dotel.service.name=simpleapplication \\\r\n     -Dotel.traces.exporter=zipkin \\\r\n     -Dserver.port=8080 \\\r\n     -jar /Users/vaibhavpaharia/Downloads/simpleproject/target/simpleproject-0.0.1-SNAPSHOT.jar\r\n```\r\n\r\n\r\nAfter running the application with agent and extension I see that other extensions are working fine which are present in the example folder. \r\nAlso, I tried changing the order method in MySQLAddCommentInstrumentationModule.java and returned 0 from there, in that case `Inside MYSQL- 1.1`, `Inside MYSQL- 1.2` and `Inside MYSQL- 1.3` got printed so it seems the new extension is recognised while running the application. It never prints `Inside MYSQL- 1.4` and `Inside MYSQL- 1.5`. Also, the traces stop coming to zipkin.\r\n\r\n\r\n```\r\nOpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended\r\n[otel.javaagent 2023-01-05 14:50:31:010 +0530] [main] INFO io.opentelemetry.javaagent.tooling.VersionLogger - opentelemetry-javaagent - version: 1.20.2\r\nInside MYSQL- 1.1\r\nInside MYSQL- 1.2\r\nInside MYSQL- 1.3\r\n[otel.javaagent 2023-01-05 14:50:34:068 +0530] [main] INFO io.opentelemetry.javaagent.shaded.instrumentation.jmx.engine.JmxMetricInsight - Empty JMX configuration, no metrics will be collected for InstrumentationScope io.opentelemetry.jmx\r\n\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v3.0.1)\r\n\r\n2023-01-05T14:50:35.687+05:30  INFO 85143 --- [           main] c.e.s.SimpleprojectApplication           : Starting SimpleprojectApplication v0.0.1-SNAPSHOT using Java 18.0.2 with PID 85143 (/Users/vaibhavpaharia/Downloads/simpleproject/target/simpleproject-0.0.1-SNAPSHOT.jar started by vaibhavpaharia in /Users/vaibhavpaharia)\r\n2023-01-05T14:50:35.700+05:30  INFO 85143 --- [           main] c.e.s.SimpleprojectApplication           : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-01-05T14:50:37.451+05:30  INFO 85143 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n2023-01-05T14:50:37.531+05:30  INFO 85143 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2023-01-05T14:50:37.531+05:30  INFO 85143 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.4]\r\n2023-01-05T14:50:37.643+05:30  INFO 85143 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2023-01-05T14:50:37.645+05:30  INFO 85143 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1859 ms\r\n2023-01-05T14:50:38.254+05:30  INFO 85143 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;\r\n2023-01-05T14:50:38.266+05:30  INFO 85143 --- [           main] c.e.s.SimpleprojectApplication           : Started SimpleprojectApplication in 3.409 seconds (process running for 7.566)\r\n```\r\n\r\n","title":"Why is my OpenTelemetry java extension not working","body":"<p>I have created an extension to add some comment in the sql query. For this I have created a <code>MySQLAddCommentInstrumentation.java</code> class to make changes to <code>query</code> in <code>Statement.java</code> class.\nAlso there is one <code>MySQLAddCommentInstrumentationModule.java</code> class which adds this instrumentation (<code>MySQLAddCommentInstrumentation</code>) to its list.</p>\n<p>When I build this extension and run my app, I do not see the comment in the query under db.statement zipkin log.</p>\n<p>Instrumentation Class - MySQLAddCommentInstrumentation.java\nPath - examples/extension/src/main/java/com/example/javaagent/mysqlinstrumentation/MySQLAddCommentInstrumentation.java</p>\n<pre><code>package com.example.javaagent.mysqlinstrumentation;\n\nimport static io.opentelemetry.javaagent.extension.matcher.AgentElementMatchers.implementsInterface;\nimport static net.bytebuddy.matcher.ElementMatchers.named;\nimport static net.bytebuddy.matcher.ElementMatchers.namedOneOf;\n\nimport io.opentelemetry.javaagent.extension.instrumentation.TypeInstrumentation;\nimport io.opentelemetry.javaagent.extension.instrumentation.TypeTransformer;\nimport net.bytebuddy.asm.Advice;\nimport net.bytebuddy.description.type.TypeDescription;\nimport net.bytebuddy.matcher.ElementMatcher;\nimport net.bytebuddy.matcher.ElementMatchers;\n\npublic class MySQLAddCommentInstrumentation implements TypeInstrumentation {\n\n  @Override\n  public ElementMatcher&lt;TypeDescription&gt; typeMatcher() {\n    System.out.println(&quot;Inside MYSQL- 1.1&quot;);\n    return implementsInterface(named(&quot;java.sql.Statement&quot;));\n  }\n\n  public void transform(TypeTransformer transformer) {\n    System.out.println(&quot;Inside MYSQL- 1.2&quot;);\n\n    transformer.applyAdviceToMethod(\n        namedOneOf(&quot;executeQuery&quot;)\n            .and(ElementMatchers.takesArgument(0, String.class))\n            .and(ElementMatchers.isPublic()),\n        MySQLAddCommentInstrumentation.class.getName() + &quot;$StatementAddCommentAdvice&quot;);\n\n    System.out.println(&quot;Inside MYSQL- 1.3&quot;);\n  }\n\n  @SuppressWarnings(&quot;unused&quot;)\n  public static class StatementAddCommentAdvice {\n\n    @Advice.OnMethodEnter(suppress = Throwable.class)\n    public static void onEnter(@Advice.Argument(value = 0, readOnly = false) String sql) {\n      System.out.println(&quot;Inside MYSQL- 1.4&quot;);\n\n      sql = sql + &quot; -- some comment&quot;;\n\n      System.out.println(&quot;Inside MYSQL- 1.5&quot;);\n    }\n  }\n</code></pre>\n<p>InstrumentationModule - MySQLAddCommentInstrumentationModule.java\nPath - examples/extension/src/main/java/com/example/javaagent/mysqlinstrumentation/MySQLAddCommentInstrumentationModule.java</p>\n<pre><code>package com.example.javaagent.mysqlinstrumentation;\n\nimport static java.util.Collections.singletonList;\n\nimport com.google.auto.service.AutoService;\nimport io.opentelemetry.javaagent.extension.instrumentation.InstrumentationModule;\nimport io.opentelemetry.javaagent.extension.instrumentation.TypeInstrumentation;\nimport io.opentelemetry.javaagent.extension.matcher.AgentElementMatchers;\nimport java.util.List;\nimport net.bytebuddy.matcher.ElementMatcher;\n\n\n@AutoService(InstrumentationModule.class)\npublic final class MySQLAddCommentInstrumentationModule extends InstrumentationModule {\n  public MySQLAddCommentInstrumentationModule() {\n    super(&quot;jdbc&quot;);\n  }\n\n  @Override\n  public int order() {\n    return 1;\n  }\n\n  @Override\n  public ElementMatcher.Junction&lt;ClassLoader&gt; classLoaderMatcher() {\n    return AgentElementMatchers.hasClassesNamed(&quot;java.sql.Statement&quot;);\n  }\n\n  @Override\n  public List&lt;TypeInstrumentation&gt; typeInstrumentations() {\n    return singletonList(new MySQLAddCommentInstrumentation());\n  }\n}\n\n</code></pre>\n<p>Code where this instrumentations is expected to run:</p>\n<pre><code>try {\n            Connection con = DriverManager.getConnection(url, uname, password);\n            Statement statement = con.createStatement();\n            System.out.println(query);\n            ResultSet result = statement.executeQuery(query);\n            System.out.println(query);\n\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n</code></pre>\n<p>I have run <code>./gradlew build</code> inside examples/extension and used that extension jar to run my application</p>\n<pre><code>java -javaagent:/Users/vaibhavpaharia/Downloads/opentelemetry-javaagent.jar \\\n     -Dotel.javaagent.extensions=/Users/vaibhavpaharia/ok/opentelemetry-java-instrumentation/examples/extension/build/libs/opentelemetry-java-instrumentation-extension-demo-1.0-all.jar  \\\n     -Dotel.service.name=simpleapplication \\\n     -Dotel.traces.exporter=zipkin \\\n     -Dserver.port=8080 \\\n     -jar /Users/vaibhavpaharia/Downloads/simpleproject/target/simpleproject-0.0.1-SNAPSHOT.jar\n</code></pre>\n<p>After running the application with agent and extension I see that other extensions are working fine which are present in the example folder.\nAlso, I tried changing the order method in MySQLAddCommentInstrumentationModule.java and returned 0 from there, in that case <code>Inside MYSQL- 1.1</code>, <code>Inside MYSQL- 1.2</code> and <code>Inside MYSQL- 1.3</code> got printed so it seems the new extension is recognised while running the application. It never prints <code>Inside MYSQL- 1.4</code> and <code>Inside MYSQL- 1.5</code>. Also, the traces stop coming to zipkin.</p>\n<pre><code>OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended\n[otel.javaagent 2023-01-05 14:50:31:010 +0530] [main] INFO io.opentelemetry.javaagent.tooling.VersionLogger - opentelemetry-javaagent - version: 1.20.2\nInside MYSQL- 1.1\nInside MYSQL- 1.2\nInside MYSQL- 1.3\n[otel.javaagent 2023-01-05 14:50:34:068 +0530] [main] INFO io.opentelemetry.javaagent.shaded.instrumentation.jmx.engine.JmxMetricInsight - Empty JMX configuration, no metrics will be collected for InstrumentationScope io.opentelemetry.jmx\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.0.1)\n\n2023-01-05T14:50:35.687+05:30  INFO 85143 --- [           main] c.e.s.SimpleprojectApplication           : Starting SimpleprojectApplication v0.0.1-SNAPSHOT using Java 18.0.2 with PID 85143 (/Users/vaibhavpaharia/Downloads/simpleproject/target/simpleproject-0.0.1-SNAPSHOT.jar started by vaibhavpaharia in /Users/vaibhavpaharia)\n2023-01-05T14:50:35.700+05:30  INFO 85143 --- [           main] c.e.s.SimpleprojectApplication           : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-01-05T14:50:37.451+05:30  INFO 85143 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2023-01-05T14:50:37.531+05:30  INFO 85143 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-01-05T14:50:37.531+05:30  INFO 85143 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.4]\n2023-01-05T14:50:37.643+05:30  INFO 85143 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-01-05T14:50:37.645+05:30  INFO 85143 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1859 ms\n2023-01-05T14:50:38.254+05:30  INFO 85143 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''\n2023-01-05T14:50:38.266+05:30  INFO 85143 --- [           main] c.e.s.SimpleprojectApplication           : Started SimpleprojectApplication in 3.409 seconds (process running for 7.566)\n</code></pre>\n"},{"tags":["java","android","imei"],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1635353355,"creation_date":1635353355,"answer_id":69742582,"question_id":69740071,"body_markdown":"You can&#39;t get READ_PRIVILEGED_PHONE_STATE.  It&#39;s only available to privleged system apps.  Unless this is a personal app and you have a rooted device so you can make your app a privleged system app.","title":"getImeiForSlot: The user 10170 does not meet the requirements to access device identifiers","body":"<p>You can't get READ_PRIVILEGED_PHONE_STATE.  It's only available to privleged system apps.  Unless this is a personal app and you have a rooted device so you can make your app a privleged system app.</p>\n"},{"tags":[],"owner":{"account_id":10128114,"reputation":881,"user_id":7482614,"accept_rate":20,"display_name":"deva11"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1672915654,"creation_date":1672915654,"answer_id":75017258,"question_id":69740071,"body_markdown":"As Mentioned in Docs , There is a Restriction on non-resettable device identifiers.\r\n\r\nStarting in Android 10, apps must have the READ_PRIVILEGED_PHONE_STATE privileged permission in order to access the device&#39;s non-resettable identifiers, which include both IMEI and serial number.\r\n\r\n&gt; Caution: Third-party apps installed from the Google Play Store cannot\r\n&gt; declare privileged permissions.\r\n\r\nRef : https://developer.android.com/about/versions/10/privacy/changes#non-resettable-device-ids","title":"getImeiForSlot: The user 10170 does not meet the requirements to access device identifiers","body":"<p>As Mentioned in Docs , There is a Restriction on non-resettable device identifiers.</p>\n<p>Starting in Android 10, apps must have the READ_PRIVILEGED_PHONE_STATE privileged permission in order to access the device's non-resettable identifiers, which include both IMEI and serial number.</p>\n<blockquote>\n<p>Caution: Third-party apps installed from the Google Play Store cannot\ndeclare privileged permissions.</p>\n</blockquote>\n<p>Ref : <a href=\"https://developer.android.com/about/versions/10/privacy/changes#non-resettable-device-ids\" rel=\"nofollow noreferrer\">https://developer.android.com/about/versions/10/privacy/changes#non-resettable-device-ids</a></p>\n"}],"owner":{"account_id":10484756,"reputation":847,"user_id":7728676,"display_name":"lewis machilika"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3498,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69742582,"answer_count":2,"score":0,"last_activity_date":1672915654,"creation_date":1635343174,"question_id":69740071,"body_markdown":"I have **android 10** I want to get **IMEI** below is my manifest settings\r\n```\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_PRIVILEGED_PHONE_STATE&quot;/&gt;\r\n```\r\n\r\nand below is my java code to get the IMEI but I am getting the above error.\r\n```\r\n        Button btnAuth = findViewById(R.id.button);\r\n        TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);\r\n        btnAuth.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                try {\r\n                    Log.i(&quot;huwa &quot;, telephonyManager.getImei());\r\n                }catch(Exception e){\r\n                    Log.i(&quot;huwa &quot;, e.toString());\r\n                }\r\n            }\r\n        });\r\n```","title":"getImeiForSlot: The user 10170 does not meet the requirements to access device identifiers","body":"<p>I have <strong>android 10</strong> I want to get <strong>IMEI</strong> below is my manifest settings</p>\n<pre><code>    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_PRIVILEGED_PHONE_STATE&quot;/&gt;\n</code></pre>\n<p>and below is my java code to get the IMEI but I am getting the above error.</p>\n<pre><code>        Button btnAuth = findViewById(R.id.button);\n        TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);\n        btnAuth.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                try {\n                    Log.i(&quot;huwa &quot;, telephonyManager.getImei());\n                }catch(Exception e){\n                    Log.i(&quot;huwa &quot;, e.toString());\n                }\n            }\n        });\n</code></pre>\n"},{"tags":["java","javafx","javafx-3d"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1672940306,"post_id":75016039,"comment_id":132391537,"body_markdown":"Anything you can use in the `PickResult`, mentioned [here](https://stackoverflow.com/a/72322484/230513), [here](https://stackoverflow.com/a/72313844/230513) and [here](https://stackoverflow.com/a/59329700/230513)?","body":"Anything you can use in the <code>PickResult</code>, mentioned <a href=\"https://stackoverflow.com/a/72322484/230513\">here</a>, <a href=\"https://stackoverflow.com/a/72313844/230513\">here</a> and <a href=\"https://stackoverflow.com/a/59329700/230513\">here</a>?"},{"owner":{"account_id":11854454,"reputation":433,"user_id":14999427,"display_name":"Suic"},"score":0,"creation_date":1672941205,"post_id":75016039,"comment_id":132391839,"body_markdown":"unfortunately not, seems like i&#39;ll have to do all the math myself to construct the ray &amp; intersect with each triangle, the former is which what im mainly struggling with currently (how to construct a ray from a point in screen space)","body":"unfortunately not, seems like i&#39;ll have to do all the math myself to construct the ray &amp; intersect with each triangle, the former is which what im mainly struggling with currently (how to construct a ray from a point in screen space)"},{"owner":{"account_id":4498992,"reputation":735,"user_id":3658055,"display_name":"Birdasaur"},"score":1,"creation_date":1673290865,"post_id":75016039,"comment_id":132461514,"body_markdown":"For others interested the original StackOverflow post about Ray Intersections refers to Github repo code that has been since moved to here:\nhttps://github.com/FXyz/FXyz","body":"For others interested the original StackOverflow post about Ray Intersections refers to Github repo code that has been since moved to here: <a href=\"https://github.com/FXyz/FXyz\" rel=\"nofollow noreferrer\">github.com/FXyz/FXyz</a>"}],"answers":[{"tags":[],"owner":{"account_id":5347179,"reputation":10433,"user_id":4262407,"accept_rate":40,"display_name":"mipa"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1672911613,"creation_date":1672911613,"answer_id":75016408,"question_id":75016039,"body_markdown":"I think the answer to this question may help you. https://stackoverflow.com/questions/50790379/how-to-correctly-obtain-screen-coordinates-of-3d-shape-after-rotation If you can compute the screen coordinates of a 3D shape (triangle) the hit test should then be simple.","title":"Intersect TriangleMesh from screen coordinates in JavaFX","body":"<p>I think the answer to this question may help you. <a href=\"https://stackoverflow.com/questions/50790379/how-to-correctly-obtain-screen-coordinates-of-3d-shape-after-rotation\">How to correctly obtain screen coordinates of 3D shape after rotation</a> If you can compute the screen coordinates of a 3D shape (triangle) the hit test should then be simple.</p>\n"}],"owner":{"account_id":11854454,"reputation":433,"user_id":14999427,"display_name":"Suic"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1672915261,"creation_date":1672909666,"question_id":75016039,"body_markdown":"I have a TriangleMesh in javafx and a 2D point in screen space and i want to check whether any triangles in the mesh intersect with that point(basically same as clicking a point in the mesh except that i already have a predefined screen coordinate)\r\n\r\nNote that i don&#39;t care where the intersection happened etc but only the fact whether it intersected or not.\r\n\r\nI did try googling this and found some useful answers, especially one by Jos&#233; Pereda here: https://stackoverflow.com/a/27612786/14999427\r\n\r\nHowever the links are down\r\n\r\nEdit: i did find a working link to it, however it just hardcodes the origin/target and im not sure how to compute these from the 2d screen point\r\n\r\nAnother idea i had was to copy the implementation from openjfx but after some research i figured that i&#39;d have to copy a lot of internals and even then i wasn&#39;t sure if i would get it working so i scrapped that idea.\r\n\r\nGoal: i want to use my mouse to create a rectangle at an arbitrary position in the mesh and then find all triangles that are inside that rectangle (i believe it&#39;s usually called rectangle selection in 3d modeling software)\r\n\r\nUpdate: converting each triangle to 2d screen coordinates using Node#localToScreen and then doing a 2D point inside triangle test works perfectly however it also selects faces that are culled.\r\n\r\nUpdate 2: after also doing the culling myself it works quite well (it&#39;s not perfect but it&#39;s mostly accurate)\r\nCurrent code:\r\n```java\r\nPoint2D v1Screen = view.localToScreen(mesh.getPoints().get(0), mesh.getPoints()\r\n        .get(1), mesh.getPoints().get(2));\r\nPoint2D v2Screen = view.localToScreen(mesh.getPoints().get(3), mesh.getPoints()\r\n        .get(4), mesh.getPoints().get(5));\r\nPoint2D v3Screen = view.localToScreen(mesh.getPoints().get(6), mesh.getPoints()\r\n        .get(7), mesh.getPoints().get(8));\r\nPoint2D point = new Point2D(mouseX, mouseY);\r\nboolean inTriangle = pointInTriangle(point, v1Screen, v2Screen, v3Screen);\r\n// Back-face culling\r\ndouble dxAB = v1Screen.getX() - v2Screen.getX();\r\ndouble dyAB = v1Screen.getY() - v2Screen.getY();\r\ndouble dxCB = v3Screen.getX() - v2Screen.getX();\r\ndouble dyCB = v3Screen.getY() - v2Screen.getY();\r\nboolean culled = ((dxAB * dyCB) - (dyAB * dxCB)) &lt;= 0;\r\nif (inTriangle &amp;&amp; !culled) {\r\n    view.setMaterial(new PhongMaterial(Color.BLUE));\r\n    System.out.println(&quot;Intersected&quot;);\r\n}\r\n```","title":"Intersect TriangleMesh from screen coordinates in JavaFX","body":"<p>I have a TriangleMesh in javafx and a 2D point in screen space and i want to check whether any triangles in the mesh intersect with that point(basically same as clicking a point in the mesh except that i already have a predefined screen coordinate)</p>\n<p>Note that i don't care where the intersection happened etc but only the fact whether it intersected or not.</p>\n<p>I did try googling this and found some useful answers, especially one by José Pereda here: <a href=\"https://stackoverflow.com/a/27612786/14999427\">https://stackoverflow.com/a/27612786/14999427</a></p>\n<p>However the links are down</p>\n<p>Edit: i did find a working link to it, however it just hardcodes the origin/target and im not sure how to compute these from the 2d screen point</p>\n<p>Another idea i had was to copy the implementation from openjfx but after some research i figured that i'd have to copy a lot of internals and even then i wasn't sure if i would get it working so i scrapped that idea.</p>\n<p>Goal: i want to use my mouse to create a rectangle at an arbitrary position in the mesh and then find all triangles that are inside that rectangle (i believe it's usually called rectangle selection in 3d modeling software)</p>\n<p>Update: converting each triangle to 2d screen coordinates using Node#localToScreen and then doing a 2D point inside triangle test works perfectly however it also selects faces that are culled.</p>\n<p>Update 2: after also doing the culling myself it works quite well (it's not perfect but it's mostly accurate)\nCurrent code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Point2D v1Screen = view.localToScreen(mesh.getPoints().get(0), mesh.getPoints()\n        .get(1), mesh.getPoints().get(2));\nPoint2D v2Screen = view.localToScreen(mesh.getPoints().get(3), mesh.getPoints()\n        .get(4), mesh.getPoints().get(5));\nPoint2D v3Screen = view.localToScreen(mesh.getPoints().get(6), mesh.getPoints()\n        .get(7), mesh.getPoints().get(8));\nPoint2D point = new Point2D(mouseX, mouseY);\nboolean inTriangle = pointInTriangle(point, v1Screen, v2Screen, v3Screen);\n// Back-face culling\ndouble dxAB = v1Screen.getX() - v2Screen.getX();\ndouble dyAB = v1Screen.getY() - v2Screen.getY();\ndouble dxCB = v3Screen.getX() - v2Screen.getX();\ndouble dyCB = v3Screen.getY() - v2Screen.getY();\nboolean culled = ((dxAB * dyCB) - (dyAB * dxCB)) &lt;= 0;\nif (inTriangle &amp;&amp; !culled) {\n    view.setMaterial(new PhongMaterial(Color.BLUE));\n    System.out.println(&quot;Intersected&quot;);\n}\n</code></pre>\n"},{"tags":["java","performance","indexing","elasticsearch"],"answers":[{"tags":[],"owner":{"account_id":2674438,"reputation":35313,"user_id":2311148,"display_name":"cmbaxter"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1371557887,"creation_date":1371557887,"answer_id":17168662,"question_id":17167779,"body_markdown":"I apologize in advance it I don&#39;t understand the question.  Elasticsearch is itself an index based technology (it&#39;s built on top of Lucene which is a build for index based search).  You put documents into Elasticsearch and the individual fields on those documents are indexed and searchable.  You should not have to worry about creating secondary indexes; the fields will be indexed by default (in most cases).\r\n\r\nOne of the differences between Elasticsearch and Solr is that in Solr, you have to specify a schema defining what the fields are on the documents and whether that field will be indexed (available to search against), stored (available as the result of a search) or both.  Elasticsearch does not require an upfront schema, and in lieu of specific mappings for fields, then reasonable defaults are used instead.  I believe that the core fields (string, number, etc..._) are indexed by default, meaning they are available to search against.\r\n\r\nNow in your case, you have a document with a lot of fields on it.  You will probably need to tweak the mappings a bit to only index the fields that you know you might search against.  If you index too much, the size of the index itself will balloon and will not be as fast as if you had a trim index of only the fields you know you will search against.  Also, Lucene loads parts of the index into memory to really enable fast searches.  With a bloated index, you won&#39;t be able to keep as much stuff in memory and your searches will suffer as a result.  You should look at the [Mappings API][1] and the [Core Types][2] section for more info on how to do this.\r\n\r\n\r\n  [1]: http://www.elasticsearch.org/guide/reference/mapping/\r\n  [2]: http://www.elasticsearch.org/guide/reference/mapping/core-types/","title":"ElasticSearch: Secondary indecies on field values using Java-API","body":"<p>I apologize in advance it I don't understand the question.  Elasticsearch is itself an index based technology (it's built on top of Lucene which is a build for index based search).  You put documents into Elasticsearch and the individual fields on those documents are indexed and searchable.  You should not have to worry about creating secondary indexes; the fields will be indexed by default (in most cases).</p>\n\n<p>One of the differences between Elasticsearch and Solr is that in Solr, you have to specify a schema defining what the fields are on the documents and whether that field will be indexed (available to search against), stored (available as the result of a search) or both.  Elasticsearch does not require an upfront schema, and in lieu of specific mappings for fields, then reasonable defaults are used instead.  I believe that the core fields (string, number, etc..._) are indexed by default, meaning they are available to search against.</p>\n\n<p>Now in your case, you have a document with a lot of fields on it.  You will probably need to tweak the mappings a bit to only index the fields that you know you might search against.  If you index too much, the size of the index itself will balloon and will not be as fast as if you had a trim index of only the fields you know you will search against.  Also, Lucene loads parts of the index into memory to really enable fast searches.  With a bloated index, you won't be able to keep as much stuff in memory and your searches will suffer as a result.  You should look at the <a href=\"http://www.elasticsearch.org/guide/reference/mapping/\" rel=\"nofollow\">Mappings API</a> and the <a href=\"http://www.elasticsearch.org/guide/reference/mapping/core-types/\" rel=\"nofollow\">Core Types</a> section for more info on how to do this.</p>\n"}],"owner":{"account_id":2766246,"reputation":175,"user_id":2381893,"display_name":"Perditor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2234,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":17168662,"answer_count":1,"score":2,"last_activity_date":1672915060,"creation_date":1371555164,"question_id":17167779,"body_markdown":"I&#39;m considering to use ElasticSearch as a search engine for large objects. There are about 500 millions objects on a single machine. For far is Elasticsearch a good solution for executing advanced queries. But a have the problem that i did find any technique to create secondary index on the document fields. Is in elasticsearch a possibility to create a secondary indecies like in MySQL on columns? Or are there any other technologies implemented to accelerate searches on field values? I&#39;m using an single server enviroment and I have to store about 300 fields per row/object. At the moment there are about 500 million object in my database.","title":"ElasticSearch: Secondary indecies on field values using Java-API","body":"<p>I'm considering to use ElasticSearch as a search engine for large objects. There are about 500 millions objects on a single machine. For far is Elasticsearch a good solution for executing advanced queries. But a have the problem that i did find any technique to create secondary index on the document fields. Is in elasticsearch a possibility to create a secondary indecies like in MySQL on columns? Or are there any other technologies implemented to accelerate searches on field values? I'm using an single server enviroment and I have to store about 300 fields per row/object. At the moment there are about 500 million object in my database.</p>\n"},{"tags":["java","spring-boot","rest"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1672915045,"post_id":75017093,"comment_id":132382234,"body_markdown":"No there isn&#39;t. An `@RequestParam` annotated `Map` will automatically have all the request parameters. So unless you define your own object, annotation and `MethodArgumentHandler` this isn&#39;t possible.","body":"No there isn&#39;t. An <code>@RequestParam</code> annotated <code>Map</code> will automatically have all the request parameters. So unless you define your own object, annotation and <code>MethodArgumentHandler</code> this isn&#39;t possible."},{"owner":{"account_id":7816422,"reputation":127,"user_id":5910979,"accept_rate":60,"display_name":"BillUser88"},"score":0,"creation_date":1672933764,"post_id":75017093,"comment_id":132389070,"body_markdown":"Can I combine the MethodArgumentHandler  with the dynamic number of parameters?","body":"Can I combine the MethodArgumentHandler  with the dynamic number of parameters?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1672934278,"post_id":75017093,"comment_id":132389282,"body_markdown":"You can do whatever you want, however simply filtering the known attributes from the map is a lot easier.","body":"You can do whatever you want, however simply filtering the known attributes from the map is a lot easier."}],"owner":{"account_id":7816422,"reputation":127,"user_id":5910979,"accept_rate":60,"display_name":"BillUser88"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672914905,"creation_date":1672914905,"question_id":75017093,"body_markdown":"I am having a rest call where the front end sends me page and size and also a dynamic number of query parameters in the url. I map them all using this piece of code:\r\n\r\nFrom postman:\r\n\r\n    http://localhost:8080/something/search?page=0&amp;size=10&amp;sort=applicationId,asc&amp;applicationId=name1&amp;applicationId=name2&amp;reference=12345\r\n\r\nThe way I map them:\r\n\r\n    public ResponseEntity&lt;Page&lt;ObjectToReturn&gt;&gt; getObjectWithDynamicCriteria(Pageable pageable, @RequestParam MultiValueMap&lt;String, String&gt; params) \r\n\r\nMy problem with this approach is that both pageable and multivalue map contains the same information about the pageable object.\r\n\r\n    \r\n      Page request [number: 0, size 10, sort: applicationId: ASC]\r\n      params {page=[0], size=[10], sort=[applicationId,asc], applicationId=[name1, name2], reference=[12345]} \r\n\r\nI process the multivalue map values for example the application id and the reference but before I remove the page and size from the map because they already exist in the pageable object.\r\n\r\nIs there any way to have lets say pageable object and multivalue map but the multivalue map to not have the --&gt;  page=[0], size=[10], sort=[applicationId,asc]?\r\n\r\n   \r\n\r\n\r\n\r\n\r\n","title":"How to map seperately dynamic number of query parameters and pageable information in rest call?","body":"<p>I am having a rest call where the front end sends me page and size and also a dynamic number of query parameters in the url. I map them all using this piece of code:</p>\n<p>From postman:</p>\n<pre><code>http://localhost:8080/something/search?page=0&amp;size=10&amp;sort=applicationId,asc&amp;applicationId=name1&amp;applicationId=name2&amp;reference=12345\n</code></pre>\n<p>The way I map them:</p>\n<pre><code>public ResponseEntity&lt;Page&lt;ObjectToReturn&gt;&gt; getObjectWithDynamicCriteria(Pageable pageable, @RequestParam MultiValueMap&lt;String, String&gt; params) \n</code></pre>\n<p>My problem with this approach is that both pageable and multivalue map contains the same information about the pageable object.</p>\n<pre><code>  Page request [number: 0, size 10, sort: applicationId: ASC]\n  params {page=[0], size=[10], sort=[applicationId,asc], applicationId=[name1, name2], reference=[12345]} \n</code></pre>\n<p>I process the multivalue map values for example the application id and the reference but before I remove the page and size from the map because they already exist in the pageable object.</p>\n<p>Is there any way to have lets say pageable object and multivalue map but the multivalue map to not have the --&gt;  page=[0], size=[10], sort=[applicationId,asc]?</p>\n"},{"tags":["java","compare","migration","java-7","comparator"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1342041790,"post_id":11441666,"comment_id":15097492,"body_markdown":"What line of code causes this Exception to be thrown? What&#39;s on lines 835 and 453 of ComparableTimSort.java?","body":"What line of code causes this Exception to be thrown? What&#39;s on lines 835 and 453 of ComparableTimSort.java?"},{"owner":{"account_id":360576,"reputation":60355,"user_id":702638,"accept_rate":98,"display_name":"Hunter McMillen"},"score":0,"creation_date":1342041862,"post_id":11441666,"comment_id":15097520,"body_markdown":"It seems to me that you should have this method delegate to the `Card` class: `return card1.compareTo(card2)` and implement this logic there.","body":"It seems to me that you should have this method delegate to the <code>Card</code> class: <code>return card1.compareTo(card2)</code> and implement this logic there."},{"owner":{"account_id":1521093,"reputation":3980,"user_id":1420715,"accept_rate":89,"display_name":"Lakatos Gyula"},"score":2,"creation_date":1342042373,"post_id":11441666,"comment_id":15097722,"body_markdown":"@HovercraftFullOfEels It&#39;s a class from Oracle, not wroted by me. It&#39;s thows an exception on that line. The method is very long and looks hard to understand.","body":"@HovercraftFullOfEels It&#39;s a class from Oracle, not wroted by me. It&#39;s thows an exception on that line. The method is very long and looks hard to understand."},{"owner":{"account_id":1521093,"reputation":3980,"user_id":1420715,"accept_rate":89,"display_name":"Lakatos Gyula"},"score":0,"creation_date":1342042476,"post_id":11441666,"comment_id":15097760,"body_markdown":"@HunterMcMillen I can&#39;t do that. Card only contains the static data of a card (name, text etc...) while this class contains some changing variables like type and amount.","body":"@HunterMcMillen I can&#39;t do that. Card only contains the static data of a card (name, text etc...) while this class contains some changing variables like type and amount."},{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":0,"creation_date":1409581485,"post_id":11441666,"comment_id":40003156,"body_markdown":"I really wonder what makes you to write such a weird asymmetrical and unreadable `compareTo`???","body":"I really wonder what makes you to write such a weird asymmetrical and unreadable <code>compareTo</code>???"},{"owner":{"account_id":1521093,"reputation":3980,"user_id":1420715,"accept_rate":89,"display_name":"Lakatos Gyula"},"score":1,"creation_date":1409640921,"post_id":11441666,"comment_id":40020619,"body_markdown":"After reading the Clean Code book I don&#39;t know either.","body":"After reading the Clean Code book I don&#39;t know either."},{"owner":{"account_id":8235,"reputation":87010,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1453847193,"post_id":11441666,"comment_id":57777123,"body_markdown":"Possible duplicate of [&quot;Comparison method violates its general contract!&quot;](http://stackoverflow.com/questions/8327514/comparison-method-violates-its-general-contract)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/8327514/comparison-method-violates-its-general-contract\">&quot;Comparison method violates its general contract!&quot;</a>"}],"answers":[{"tags":[],"owner":{"account_id":299251,"reputation":335905,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"down_vote_count":0,"up_vote_count":130,"is_accepted":true,"score":130,"last_activity_date":1342043373,"creation_date":1342042300,"answer_id":11441813,"question_id":11441666,"body_markdown":"The exception message is actually pretty descriptive. The contract it mentions is *transitivity*: if `A &gt; B` and `B &gt; C` then for any `A`, `B` and `C`: `A &gt; C`. I checked it with paper and pencil and your code seems to have few holes:\r\n\r\n    if (card1.getRarity() &lt; card2.getRarity()) {\r\n      return 1;\r\n\r\nyou do not return `-1` if `card1.getRarity() &gt; card2.getRarity()`.\r\n\r\n---\r\n\r\n    if (card1.getId() == card2.getId()) {\r\n      //...\r\n    }\r\n    return -1;\r\n\r\nYou return `-1` if ids aren&#39;t equal. You should return `-1` or `1` depending on which id was bigger.\r\n\r\n---\r\n\r\nTake a look at this. Apart from being much more readable, I think it should actually work:\r\n\r\n\tif (card1.getSet() &gt; card2.getSet()) {\r\n\t\treturn 1;\r\n\t}\r\n\tif (card1.getSet() &lt; card2.getSet()) {\r\n\t\treturn -1;\r\n\t};\r\n\tif (card1.getRarity() &lt; card2.getRarity()) {\r\n\t\treturn 1;\r\n\t}\r\n\tif (card1.getRarity() &gt; card2.getRarity()) {\r\n\t\treturn -1;\r\n\t}\r\n\tif (card1.getId() &gt; card2.getId()) {\r\n\t\treturn 1;\r\n\t}\r\n\tif (card1.getId() &lt; card2.getId()) {\r\n\t\treturn -1;\r\n\t}\r\n\treturn cardType - item.getCardType();  //watch out for overflow!","title":"Java error: Comparison method violates its general contract","body":"<p>The exception message is actually pretty descriptive. The contract it mentions is <em>transitivity</em>: if <code>A &gt; B</code> and <code>B &gt; C</code> then for any <code>A</code>, <code>B</code> and <code>C</code>: <code>A &gt; C</code>. I checked it with paper and pencil and your code seems to have few holes:</p>\n\n<pre><code>if (card1.getRarity() &lt; card2.getRarity()) {\n  return 1;\n</code></pre>\n\n<p>you do not return <code>-1</code> if <code>card1.getRarity() &gt; card2.getRarity()</code>.</p>\n\n<hr>\n\n<pre><code>if (card1.getId() == card2.getId()) {\n  //...\n}\nreturn -1;\n</code></pre>\n\n<p>You return <code>-1</code> if ids aren't equal. You should return <code>-1</code> or <code>1</code> depending on which id was bigger.</p>\n\n<hr>\n\n<p>Take a look at this. Apart from being much more readable, I think it should actually work:</p>\n\n<pre><code>if (card1.getSet() &gt; card2.getSet()) {\n    return 1;\n}\nif (card1.getSet() &lt; card2.getSet()) {\n    return -1;\n};\nif (card1.getRarity() &lt; card2.getRarity()) {\n    return 1;\n}\nif (card1.getRarity() &gt; card2.getRarity()) {\n    return -1;\n}\nif (card1.getId() &gt; card2.getId()) {\n    return 1;\n}\nif (card1.getId() &lt; card2.getId()) {\n    return -1;\n}\nreturn cardType - item.getCardType();  //watch out for overflow!\n</code></pre>\n"},{"tags":[],"owner":{"account_id":921430,"reputation":7972,"user_id":953068,"accept_rate":59,"display_name":"Joe"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1375259026,"creation_date":1342042501,"answer_id":11441860,"question_id":11441666,"body_markdown":"            if (card1.getRarity() &lt; card2.getRarity()) {\r\n                return 1;\r\n\r\nHowever, if `card2.getRarity()` is less than `card1.getRarity()` you might not return **-1**.\r\n\r\nYou similarly miss other cases.  I would do this, you can change around depending on your intent:\r\n\r\n    public int compareTo(Object o) {\t\r\n        if(this == o){\r\n            return 0;\r\n        }\r\n    \r\n        CollectionItem item = (CollectionItem) o;\r\n    \r\n        Card card1 = CardCache.getInstance().getCard(cardId);\r\n        Card card2 = CardCache.getInstance().getCard(item.getCardId());\r\n    \tint comp=card1.getSet() - card2.getSet();\r\n    \tif (comp!=0){\r\n    \t\treturn comp;\r\n    \t}\r\n    \tcomp=card1.getRarity() - card2.getRarity();\r\n    \tif (comp!=0){\r\n    \t\treturn comp;\r\n    \t}\r\n    \tcomp=card1.getSet() - card2.getSet();\r\n    \tif (comp!=0){\r\n    \t\treturn comp;\r\n    \t}\t\r\n    \tcomp=card1.getId() - card2.getId();\r\n    \tif (comp!=0){\r\n    \t\treturn comp;\r\n    \t}\t\r\n    \tcomp=card1.getCardType() - card2.getCardType();\r\n    \r\n    \treturn comp;\r\n    \t\r\n        }\r\n    }","title":"Java error: Comparison method violates its general contract","body":"<pre><code>        if (card1.getRarity() &lt; card2.getRarity()) {\n            return 1;\n</code></pre>\n\n<p>However, if <code>card2.getRarity()</code> is less than <code>card1.getRarity()</code> you might not return <strong>-1</strong>.</p>\n\n<p>You similarly miss other cases.  I would do this, you can change around depending on your intent:</p>\n\n<pre><code>public int compareTo(Object o) {    \n    if(this == o){\n        return 0;\n    }\n\n    CollectionItem item = (CollectionItem) o;\n\n    Card card1 = CardCache.getInstance().getCard(cardId);\n    Card card2 = CardCache.getInstance().getCard(item.getCardId());\n    int comp=card1.getSet() - card2.getSet();\n    if (comp!=0){\n        return comp;\n    }\n    comp=card1.getRarity() - card2.getRarity();\n    if (comp!=0){\n        return comp;\n    }\n    comp=card1.getSet() - card2.getSet();\n    if (comp!=0){\n        return comp;\n    }   \n    comp=card1.getId() - card2.getId();\n    if (comp!=0){\n        return comp;\n    }   \n    comp=card1.getCardType() - card2.getCardType();\n\n    return comp;\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13062,"reputation":21722,"user_id":26039,"accept_rate":82,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1342042558,"creation_date":1342042558,"answer_id":11441871,"question_id":11441666,"body_markdown":"Consider the following case:\r\n\r\nFirst, `o1.compareTo(o2)` is called. `card1.getSet() == card2.getSet()` happens to be true and so is `card1.getRarity() &lt; card2.getRarity()`, so you return 1.\r\n\r\nThen, `o2.compareTo(o1)` is called. Again, `card1.getSet() == card2.getSet()` is true. Then, you skip to the following `else`, then `card1.getId() == card2.getId()` happens to be true, and so is `cardType &gt; item.getCardType()`. You return 1 again.\r\n\r\nFrom that, `o1 &gt; o2`, and `o2 &gt; o1`. You broke the contract.","title":"Java error: Comparison method violates its general contract","body":"<p>Consider the following case:</p>\n\n<p>First, <code>o1.compareTo(o2)</code> is called. <code>card1.getSet() == card2.getSet()</code> happens to be true and so is <code>card1.getRarity() &lt; card2.getRarity()</code>, so you return 1.</p>\n\n<p>Then, <code>o2.compareTo(o1)</code> is called. Again, <code>card1.getSet() == card2.getSet()</code> is true. Then, you skip to the following <code>else</code>, then <code>card1.getId() == card2.getId()</code> happens to be true, and so is <code>cardType &gt; item.getCardType()</code>. You return 1 again.</p>\n\n<p>From that, <code>o1 &gt; o2</code>, and <code>o2 &gt; o1</code>. You broke the contract.</p>\n"},{"tags":[],"owner":{"account_id":3375818,"reputation":893,"user_id":2833957,"display_name":"Justin Civi"},"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1471528734,"creation_date":1385539504,"answer_id":20236925,"question_id":11441666,"body_markdown":"It also has something to do with the version of JDK.\r\nIf it does well in JDK6, maybe it will have the problem in JDK 7 described by you, because the implementation method in jdk 7 has been changed.\r\n\r\nLook at this:\r\n\r\nDescription: The sorting algorithm used by `java.util.Arrays.sort` and (indirectly) by `java.util.Collections.sort` has been replaced. The new sort implementation may throw an `IllegalArgumentException` if it detects a `Comparable` that violates the `Comparable` contract. The previous implementation silently ignored such a situation. If the previous behavior is desired, you can use the new system property, `java.util.Arrays.useLegacyMergeSort`, to restore previous mergesort behaviour.\r\n\r\nI don&#39;t know the exact reason. However, if you add the code before you use sort. It will be OK.\r\n\r\n    System.setProperty(&quot;java.util.Arrays.useLegacyMergeSort&quot;, &quot;true&quot;);","title":"Java error: Comparison method violates its general contract","body":"<p>It also has something to do with the version of JDK.\nIf it does well in JDK6, maybe it will have the problem in JDK 7 described by you, because the implementation method in jdk 7 has been changed.</p>\n\n<p>Look at this:</p>\n\n<p>Description: The sorting algorithm used by <code>java.util.Arrays.sort</code> and (indirectly) by <code>java.util.Collections.sort</code> has been replaced. The new sort implementation may throw an <code>IllegalArgumentException</code> if it detects a <code>Comparable</code> that violates the <code>Comparable</code> contract. The previous implementation silently ignored such a situation. If the previous behavior is desired, you can use the new system property, <code>java.util.Arrays.useLegacyMergeSort</code>, to restore previous mergesort behaviour.</p>\n\n<p>I don't know the exact reason. However, if you add the code before you use sort. It will be OK.</p>\n\n<pre><code>System.setProperty(\"java.util.Arrays.useLegacyMergeSort\", \"true\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8235,"reputation":87010,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"down_vote_count":1,"up_vote_count":63,"is_accepted":false,"score":62,"last_activity_date":1455556581,"creation_date":1453750161,"answer_id":35000727,"question_id":11441666,"body_markdown":"You can use the following class to pinpoint transitivity bugs in your Comparators:\r\n\r\n    /**\r\n     * @author Gili Tzabari\r\n     */\r\n    public final class Comparators\r\n    {\r\n    \t/**\r\n    \t * Verify that a comparator is transitive.\r\n    \t *\r\n    \t * @param &lt;T&gt;        the type being compared\r\n    \t * @param comparator the comparator to test\r\n    \t * @param elements   the elements to test against\r\n    \t * @throws AssertionError if the comparator is not transitive\r\n    \t */\r\n    \tpublic static &lt;T&gt; void verifyTransitivity(Comparator&lt;T&gt; comparator, Collection&lt;T&gt; elements)\r\n    \t{\r\n    \t\tfor (T first: elements)\r\n    \t\t{\r\n    \t\t\tfor (T second: elements)\r\n    \t\t\t{\r\n    \t\t\t\tint result1 = comparator.compare(first, second);\r\n    \t\t\t\tint result2 = comparator.compare(second, first);\r\n    \t\t\t\tif (result1 != -result2)\r\n    \t\t\t\t{\r\n    \t\t\t\t\t// Uncomment the following line to step through the failed case\r\n    \t\t\t\t\t//comparator.compare(first, second);\r\n    \t\t\t\t\tthrow new AssertionError(&quot;compare(&quot; + first + &quot;, &quot; + second + &quot;) == &quot; + result1 +\r\n    \t\t\t\t\t\t&quot; but swapping the parameters returns &quot; + result2);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n\t\t\tfor (T first: elements)\r\n\t\t\t{\r\n\t\t\t\tfor (T second: elements)\r\n\t\t\t\t{\r\n\t\t\t\t\tint firstGreaterThanSecond = comparator.compare(first, second);\r\n\t\t\t\t\tif (firstGreaterThanSecond &lt;= 0)\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\tfor (T third: elements)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tint secondGreaterThanThird = comparator.compare(second, third);\r\n\t\t\t\t\t\tif (secondGreaterThanThird &lt;= 0)\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\tint firstGreaterThanThird = comparator.compare(first, third);\r\n\t\t\t\t\t\tif (firstGreaterThanThird &lt;= 0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// Uncomment the following line to step through the failed case\r\n\t\t\t\t\t\t\t//comparator.compare(first, third);\r\n\t\t\t\t\t\t\tthrow new AssertionError(&quot;compare(&quot; + first + &quot;, &quot; + second + &quot;) &gt; 0, &quot; +\r\n\t\t\t\t\t\t\t\t&quot;compare(&quot; + second + &quot;, &quot; + third + &quot;) &gt; 0, but compare(&quot; + first + &quot;, &quot; + third + &quot;) == &quot; +\r\n\t\t\t\t\t\t\t\tfirstGreaterThanThird);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Prevent construction.\r\n    \t */\r\n    \tprivate Comparators()\r\n    \t{\r\n    \t}\r\n    }\r\n\r\nSimply invoke `Comparators.verifyTransitivity(myComparator, myCollection)` in front of the code that fails.","title":"Java error: Comparison method violates its general contract","body":"<p>You can use the following class to pinpoint transitivity bugs in your Comparators:</p>\n\n<pre><code>/**\n * @author Gili Tzabari\n */\npublic final class Comparators\n{\n    /**\n     * Verify that a comparator is transitive.\n     *\n     * @param &lt;T&gt;        the type being compared\n     * @param comparator the comparator to test\n     * @param elements   the elements to test against\n     * @throws AssertionError if the comparator is not transitive\n     */\n    public static &lt;T&gt; void verifyTransitivity(Comparator&lt;T&gt; comparator, Collection&lt;T&gt; elements)\n    {\n        for (T first: elements)\n        {\n            for (T second: elements)\n            {\n                int result1 = comparator.compare(first, second);\n                int result2 = comparator.compare(second, first);\n                if (result1 != -result2)\n                {\n                    // Uncomment the following line to step through the failed case\n                    //comparator.compare(first, second);\n                    throw new AssertionError(\"compare(\" + first + \", \" + second + \") == \" + result1 +\n                        \" but swapping the parameters returns \" + result2);\n                }\n            }\n        }\n        for (T first: elements)\n        {\n            for (T second: elements)\n            {\n                int firstGreaterThanSecond = comparator.compare(first, second);\n                if (firstGreaterThanSecond &lt;= 0)\n                    continue;\n                for (T third: elements)\n                {\n                    int secondGreaterThanThird = comparator.compare(second, third);\n                    if (secondGreaterThanThird &lt;= 0)\n                        continue;\n                    int firstGreaterThanThird = comparator.compare(first, third);\n                    if (firstGreaterThanThird &lt;= 0)\n                    {\n                        // Uncomment the following line to step through the failed case\n                        //comparator.compare(first, third);\n                        throw new AssertionError(\"compare(\" + first + \", \" + second + \") &gt; 0, \" +\n                            \"compare(\" + second + \", \" + third + \") &gt; 0, but compare(\" + first + \", \" + third + \") == \" +\n                            firstGreaterThanThird);\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * Prevent construction.\n     */\n    private Comparators()\n    {\n    }\n}\n</code></pre>\n\n<p>Simply invoke <code>Comparators.verifyTransitivity(myComparator, myCollection)</code> in front of the code that fails.</p>\n"},{"tags":[],"owner":{"account_id":11679359,"reputation":1,"user_id":8551666,"display_name":"Jean Burkhardt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1520494007,"creation_date":1504353536,"answer_id":46013525,"question_id":11441666,"body_markdown":"I had to sort on several criterion (date, and, if same date; other things...). What was working on Eclipse with an older version of Java, did not worked any more on Android : comparison method violates contract ...\r\n\r\nAfter reading on StackOverflow, I wrote a separate function that I called from compare() if the dates are the same. This function calculates the priority, according to the criteria, and returns -1, 0, or 1 to compare(). It seems to work now. ","title":"Java error: Comparison method violates its general contract","body":"<p>I had to sort on several criterion (date, and, if same date; other things...). What was working on Eclipse with an older version of Java, did not worked any more on Android : comparison method violates contract ...</p>\n\n<p>After reading on StackOverflow, I wrote a separate function that I called from compare() if the dates are the same. This function calculates the priority, according to the criteria, and returns -1, 0, or 1 to compare(). It seems to work now. </p>\n"},{"tags":[],"owner":{"account_id":5379962,"reputation":941,"user_id":4285515,"display_name":"pmkent"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523239755,"creation_date":1523238369,"answer_id":49724518,"question_id":11441666,"body_markdown":"I got the same error with a class like the following `StockPickBean`. Called from this code:\r\n\r\n    List&lt;StockPickBean&gt; beansListcatMap.getValue();\r\n    beansList.sort(StockPickBean.Comparators.VALUE);\r\n\r\n    public class StockPickBean implements Comparable&lt;StockPickBean&gt; {\r\n        private double value;\r\n        public double getValue() { return value; }\r\n        public void setValue(double value) { this.value = value; }\r\n       \r\n        @Override\r\n        public int compareTo(StockPickBean view) {\r\n            return Comparators.VALUE.compare(this,view); //return \r\n            Comparators.SYMBOL.compare(this,view);\r\n        }\r\n    \r\n        public static class Comparators {\r\n            public static Comparator&lt;StockPickBean&gt; VALUE = (val1, val2) -&gt; \r\n    (int) \r\n             (val1.value - val2.value);\r\n        }\r\n    }\r\n\r\nAfter getting the same error: \r\n\r\n&gt; java.lang.IllegalArgumentException: Comparison method violates its general contract!\r\n\r\nI changed this line:\r\n\r\n    public static Comparator&lt;StockPickBean&gt; VALUE = (val1, val2) -&gt; (int) \r\n             (val1.value - val2.value);\r\n\r\nto:\r\n\r\n    public static Comparator&lt;StockPickBean&gt; VALUE = (StockPickBean spb1, \r\n    StockPickBean spb2) -&gt; Double.compare(spb2.value,spb1.value);\r\n\r\nThat fixes the error.","title":"Java error: Comparison method violates its general contract","body":"<p>I got the same error with a class like the following <code>StockPickBean</code>. Called from this code:</p>\n\n<pre><code>List&lt;StockPickBean&gt; beansListcatMap.getValue();\nbeansList.sort(StockPickBean.Comparators.VALUE);\n\npublic class StockPickBean implements Comparable&lt;StockPickBean&gt; {\n    private double value;\n    public double getValue() { return value; }\n    public void setValue(double value) { this.value = value; }\n\n    @Override\n    public int compareTo(StockPickBean view) {\n        return Comparators.VALUE.compare(this,view); //return \n        Comparators.SYMBOL.compare(this,view);\n    }\n\n    public static class Comparators {\n        public static Comparator&lt;StockPickBean&gt; VALUE = (val1, val2) -&gt; \n(int) \n         (val1.value - val2.value);\n    }\n}\n</code></pre>\n\n<p>After getting the same error: </p>\n\n<blockquote>\n  <p>java.lang.IllegalArgumentException: Comparison method violates its general contract!</p>\n</blockquote>\n\n<p>I changed this line:</p>\n\n<pre><code>public static Comparator&lt;StockPickBean&gt; VALUE = (val1, val2) -&gt; (int) \n         (val1.value - val2.value);\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>public static Comparator&lt;StockPickBean&gt; VALUE = (StockPickBean spb1, \nStockPickBean spb2) -&gt; Double.compare(spb2.value,spb1.value);\n</code></pre>\n\n<p>That fixes the error.</p>\n"},{"tags":[],"owner":{"account_id":3153911,"reputation":765,"user_id":2666708,"display_name":"Prateek Bhuwania"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1577274517,"creation_date":1577274517,"answer_id":59478121,"question_id":11441666,"body_markdown":"I ran into a similar problem where I was trying to sort a `n x 2 2D array` named `contests` which is a 2D array of simple integers. This was working for most of the times but threw a runtime error for one input:-\r\n```        \r\nArrays.sort(contests, (row1, row2) -&gt; {\r\n            if (row1[0] &lt; row2[0]) {\r\n                return 1;\r\n            } else return -1;\r\n        });\r\n```\r\n\r\nError:-\r\n\r\n    Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: Comparison method violates its general contract!\r\n    \tat java.base/java.util.TimSort.mergeHi(TimSort.java:903)\r\n    \tat java.base/java.util.TimSort.mergeAt(TimSort.java:520)\r\n    \tat java.base/java.util.TimSort.mergeForceCollapse(TimSort.java:461)\r\n    \tat java.base/java.util.TimSort.sort(TimSort.java:254)\r\n    \tat java.base/java.util.Arrays.sort(Arrays.java:1441)\r\n    \tat com.hackerrank.Solution.luckBalance(Solution.java:15)\r\n    \tat com.hackerrank.Solution.main(Solution.java:49)\r\n\r\nLooking at the answers above I tried adding a condition for `equals` and I don&#39;t know why but it worked. Hopefully we must explicitly specify what should be returned for all cases (greater than, equals and less than):\r\n```\r\n        Arrays.sort(contests, (row1, row2) -&gt; {\r\n            if (row1[0] &lt; row2[0]) {\r\n                return 1;\r\n            }\r\n            if(row1[0] == row2[0]) return 0;\r\n            return -1;\r\n        });\r\n```","title":"Java error: Comparison method violates its general contract","body":"<p>I ran into a similar problem where I was trying to sort a <code>n x 2 2D array</code> named <code>contests</code> which is a 2D array of simple integers. This was working for most of the times but threw a runtime error for one input:-</p>\n\n<pre><code>Arrays.sort(contests, (row1, row2) -&gt; {\n            if (row1[0] &lt; row2[0]) {\n                return 1;\n            } else return -1;\n        });\n</code></pre>\n\n<p>Error:-</p>\n\n<pre><code>Exception in thread \"main\" java.lang.IllegalArgumentException: Comparison method violates its general contract!\n    at java.base/java.util.TimSort.mergeHi(TimSort.java:903)\n    at java.base/java.util.TimSort.mergeAt(TimSort.java:520)\n    at java.base/java.util.TimSort.mergeForceCollapse(TimSort.java:461)\n    at java.base/java.util.TimSort.sort(TimSort.java:254)\n    at java.base/java.util.Arrays.sort(Arrays.java:1441)\n    at com.hackerrank.Solution.luckBalance(Solution.java:15)\n    at com.hackerrank.Solution.main(Solution.java:49)\n</code></pre>\n\n<p>Looking at the answers above I tried adding a condition for <code>equals</code> and I don't know why but it worked. Hopefully we must explicitly specify what should be returned for all cases (greater than, equals and less than):</p>\n\n<pre><code>        Arrays.sort(contests, (row1, row2) -&gt; {\n            if (row1[0] &lt; row2[0]) {\n                return 1;\n            }\n            if(row1[0] == row2[0]) return 0;\n            return -1;\n        });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":137615,"reputation":910,"user_id":341919,"accept_rate":75,"display_name":"Carl Rosenberger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1591555439,"creation_date":1591555439,"answer_id":62250048,"question_id":11441666,"body_markdown":"I had the same symptom. For me it turned out that another thread was modifying the compared objects while the sorting was happening in a Stream. To resolve the issue, I mapped the objects to immutable temporary objects, collected the Stream to a temporary Collection and did the sorting on that.","title":"Java error: Comparison method violates its general contract","body":"<p>I had the same symptom. For me it turned out that another thread was modifying the compared objects while the sorting was happening in a Stream. To resolve the issue, I mapped the objects to immutable temporary objects, collected the Stream to a temporary Collection and did the sorting on that.</p>\n"},{"tags":[],"owner":{"account_id":3667837,"reputation":2435,"user_id":3055724,"display_name":"Duloren"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1647633826,"creation_date":1647633826,"answer_id":71532607,"question_id":11441666,"body_markdown":"The origin of this exception is a wrong `Comparator` implementation. By [checking the docs][1], we must implement the `compare(o1, o2)` method as an [equivalence relation][2] by following the rules:\r\n\r\n- `if` a.equals(b) is `true` `then` compare(a, b) is `0`\r\n- `if` a.compare(b) &gt; 0 `then` b.compare(a) &lt; 0 is `true`\r\n- `if` a.compare(b) &gt; 0 and b.compare(c) &gt; 0 `then` a.compare(c) &gt; 0 is `true`\r\n\r\nYou may check your code to realize where your implementation is offending one or more of Comparator contract rules. If it is hard to find it by a static analysis, you can use the data which cast the exception to check the rules. \r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html\r\n  [2]: https://en.wikipedia.org/wiki/Equivalence_relation","title":"Java error: Comparison method violates its general contract","body":"<p>The origin of this exception is a wrong <code>Comparator</code> implementation. By <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html\" rel=\"nofollow noreferrer\">checking the docs</a>, we must implement the <code>compare(o1, o2)</code> method as an <a href=\"https://en.wikipedia.org/wiki/Equivalence_relation\" rel=\"nofollow noreferrer\">equivalence relation</a> by following the rules:</p>\n<ul>\n<li><code>if</code> a.equals(b) is <code>true</code> <code>then</code> compare(a, b) is <code>0</code></li>\n<li><code>if</code> a.compare(b) &gt; 0 <code>then</code> b.compare(a) &lt; 0 is <code>true</code></li>\n<li><code>if</code> a.compare(b) &gt; 0 and b.compare(c) &gt; 0 <code>then</code> a.compare(c) &gt; 0 is <code>true</code></li>\n</ul>\n<p>You may check your code to realize where your implementation is offending one or more of Comparator contract rules. If it is hard to find it by a static analysis, you can use the data which cast the exception to check the rules.</p>\n"},{"tags":[],"owner":{"account_id":6607573,"reputation":11,"user_id":5103928,"display_name":"Jeffrey Do"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654612136,"creation_date":1654612136,"answer_id":72532989,"question_id":11441666,"body_markdown":"What about doing something simpler like this:\r\n    \r\n    int result = card1.getSet().compareTo(card2.getSet())\r\n    if (result == 0) {\r\n        result = card1.getRarity().compareTo(card2.getRarity())\r\n    }\r\n    if (result == 0) {\r\n        result = card1.getId().compareTo(card2.getId())\r\n    }\r\n    if (result == 0) {\r\n        result = card1.getCardType().compareTo(card2.getCardType())\r\n    }\r\n    return result;\r\n\r\nYou just need to order the comparisons in order of preference.  ","title":"Java error: Comparison method violates its general contract","body":"<p>What about doing something simpler like this:</p>\n<pre><code>int result = card1.getSet().compareTo(card2.getSet())\nif (result == 0) {\n    result = card1.getRarity().compareTo(card2.getRarity())\n}\nif (result == 0) {\n    result = card1.getId().compareTo(card2.getId())\n}\nif (result == 0) {\n    result = card1.getCardType().compareTo(card2.getCardType())\n}\nreturn result;\n</code></pre>\n<p>You just need to order the comparisons in order of preference.</p>\n"},{"tags":[],"owner":{"account_id":22415217,"reputation":185,"user_id":16623378,"display_name":"Quốc H&#249;ng"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1660037312,"creation_date":1660037312,"answer_id":73289480,"question_id":11441666,"body_markdown":"If you try to run this code you will meet the kind this exception:\r\n```java\r\n    public static void main(String[] args) {\r\n        Random random = new Random();\r\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n        for (int i = 0; i &lt; 50000; i++) {\r\n            list.add(random.nextInt());\r\n        }\r\n        list.sort((x, y) -&gt; {\r\n            int c = random.nextInt(3);\r\n            if (c == 0) {\r\n                return 0;\r\n            }\r\n            if (c == 1) {\r\n                return 1;\r\n            }\r\n            return -1;\r\n        });\r\n    }\r\n```\r\n```\r\nException in thread &quot;main&quot; java.lang.IllegalArgumentException: Comparison method violates its general contract!\r\n\tat java.util.TimSort.mergeLo(TimSort.java:777)\r\n\tat java.util.TimSort.mergeAt(TimSort.java:514)\r\n\tat java.util.TimSort.mergeCollapse(TimSort.java:441)\r\n\tat java.util.TimSort.sort(TimSort.java:245)\r\n\tat java.util.Arrays.sort(Arrays.java:1512)\r\n\tat java.util.ArrayList.sort(ArrayList.java:1462)\r\n\tat Test.main(Test.java:14)\r\n```\r\nThe reason is when implementing the Comparator, it may meet the case of A &gt; B and B &gt; C and C &gt; A and the sort method will be run around to be broken. Java prevent this case by throw exception this case:\r\n```java\r\nclass TimSort&lt;T&gt; {\r\n.\r\n.\r\n.\r\nelse if (len1 == 0) {\r\n            throw new IllegalArgumentException(\r\n                &quot;Comparison method violates its general contract!&quot;);\r\n.\r\n.\r\n.\r\n```\r\nIn conclusion, to handle this issue. You have to make sure the comparator will not meet the case of A &gt; B and B &gt; C and C &gt; A.\r\n","title":"Java error: Comparison method violates its general contract","body":"<p>If you try to run this code you will meet the kind this exception:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void main(String[] args) {\n        Random random = new Random();\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; 50000; i++) {\n            list.add(random.nextInt());\n        }\n        list.sort((x, y) -&gt; {\n            int c = random.nextInt(3);\n            if (c == 0) {\n                return 0;\n            }\n            if (c == 1) {\n                return 1;\n            }\n            return -1;\n        });\n    }\n</code></pre>\n<pre><code>Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: Comparison method violates its general contract!\n    at java.util.TimSort.mergeLo(TimSort.java:777)\n    at java.util.TimSort.mergeAt(TimSort.java:514)\n    at java.util.TimSort.mergeCollapse(TimSort.java:441)\n    at java.util.TimSort.sort(TimSort.java:245)\n    at java.util.Arrays.sort(Arrays.java:1512)\n    at java.util.ArrayList.sort(ArrayList.java:1462)\n    at Test.main(Test.java:14)\n</code></pre>\n<p>The reason is when implementing the Comparator, it may meet the case of A &gt; B and B &gt; C and C &gt; A and the sort method will be run around to be broken. Java prevent this case by throw exception this case:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class TimSort&lt;T&gt; {\n.\n.\n.\nelse if (len1 == 0) {\n            throw new IllegalArgumentException(\n                &quot;Comparison method violates its general contract!&quot;);\n.\n.\n.\n</code></pre>\n<p>In conclusion, to handle this issue. You have to make sure the comparator will not meet the case of A &gt; B and B &gt; C and C &gt; A.</p>\n"},{"tags":[],"owner":{"account_id":1140418,"reputation":5502,"user_id":1124509,"accept_rate":53,"display_name":"Reto H&#246;hener"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672914465,"creation_date":1672914465,"answer_id":75017000,"question_id":11441666,"body_markdown":"A variation of Gili&#39;s answer to check if the comparator satisfies the requirements described in the compare method&#39;s javadoc - with a focus on completeness and readability, e.g. by naming the variables the same as in the javadoc. Note that this is O(n^3), only use it when debugging, maybe just on a subset of your elements, in order to be fast enough to finish at all.\r\n\r\n      public static &lt;T&gt; void verifyComparator(Comparator&lt;T&gt; comparator, Collection&lt;T&gt; elements) {\r\n        for (T x : elements) {\r\n          for (T y : elements) {\r\n            for (T z : elements) {\r\n              int x_y = comparator.compare(x, y);\r\n              int y_x = comparator.compare(y, x);\r\n              int y_z = comparator.compare(y, z);\r\n              int x_z = comparator.compare(x, z);\r\n    \r\n              // javadoc: The implementor must ensure that sgn(compare(x, y)) == -sgn(compare(y, x))\r\n              if (Math.signum(x_y) == -Math.signum(y_x)) { // ok\r\n              } else {\r\n                System.err.println(&quot;not holding: sgn(compare(x, y)) == -sgn(compare(y, x))&quot; //\r\n                    + &quot; | x_y: &quot; + x_y + &quot;, y_x: &quot; + y_x + &quot;,  x: &quot; + x + &quot;, y: &quot; + y);\r\n              }\r\n    \r\n              // javadoc: The implementor must also ensure that the relation is transitive:\r\n              // ((compare(x, y)&gt;0) &amp;&amp; (compare(y, z)&gt;0)) implies compare(x, z)&gt;0.\r\n              if (x_y &gt; 0 &amp;&amp; y_z &gt; 0) {\r\n                if (x_z &gt; 0) { // ok\r\n                } else {\r\n                  System.err.println(&quot;not holding: ((compare(x, y)&gt;0) &amp;&amp; (compare(y, z)&gt;0)) implies compare(x, z)&gt;0&quot; //\r\n                      + &quot; | x_y: &quot; + x_y + &quot;, y_z: &quot; + y_z + &quot;,  x_z: &quot; + x_z + &quot;, x: &quot; + x + &quot;, y: &quot; + y + &quot;, z: &quot; + z);\r\n                }\r\n              }\r\n    \r\n              // javadoc: Finally, the implementor must ensure that:\r\n              // compare(x, y)==0 implies that sgn(compare(x, z))==sgn(compare(y, z)) for all z.\r\n              if (x_y == 0) {\r\n                if (Math.signum(x_z) == Math.signum(y_z)) { // ok\r\n                } else {\r\n                  System.err.println(&quot;not holding: compare(x, y)==0 implies that sgn(compare(x, z))==sgn(compare(y, z)) for all z&quot; //\r\n                      + &quot; | x_y: &quot; + x_y + &quot;, x_z: &quot; + x_z + &quot;,  y_z: &quot; + y_z + &quot;, x: &quot; + x + &quot;, y: &quot; + y + &quot;, z: &quot; + z);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }","title":"Java error: Comparison method violates its general contract","body":"<p>A variation of Gili's answer to check if the comparator satisfies the requirements described in the compare method's javadoc - with a focus on completeness and readability, e.g. by naming the variables the same as in the javadoc. Note that this is O(n^3), only use it when debugging, maybe just on a subset of your elements, in order to be fast enough to finish at all.</p>\n<pre><code>  public static &lt;T&gt; void verifyComparator(Comparator&lt;T&gt; comparator, Collection&lt;T&gt; elements) {\n    for (T x : elements) {\n      for (T y : elements) {\n        for (T z : elements) {\n          int x_y = comparator.compare(x, y);\n          int y_x = comparator.compare(y, x);\n          int y_z = comparator.compare(y, z);\n          int x_z = comparator.compare(x, z);\n\n          // javadoc: The implementor must ensure that sgn(compare(x, y)) == -sgn(compare(y, x))\n          if (Math.signum(x_y) == -Math.signum(y_x)) { // ok\n          } else {\n            System.err.println(&quot;not holding: sgn(compare(x, y)) == -sgn(compare(y, x))&quot; //\n                + &quot; | x_y: &quot; + x_y + &quot;, y_x: &quot; + y_x + &quot;,  x: &quot; + x + &quot;, y: &quot; + y);\n          }\n\n          // javadoc: The implementor must also ensure that the relation is transitive:\n          // ((compare(x, y)&gt;0) &amp;&amp; (compare(y, z)&gt;0)) implies compare(x, z)&gt;0.\n          if (x_y &gt; 0 &amp;&amp; y_z &gt; 0) {\n            if (x_z &gt; 0) { // ok\n            } else {\n              System.err.println(&quot;not holding: ((compare(x, y)&gt;0) &amp;&amp; (compare(y, z)&gt;0)) implies compare(x, z)&gt;0&quot; //\n                  + &quot; | x_y: &quot; + x_y + &quot;, y_z: &quot; + y_z + &quot;,  x_z: &quot; + x_z + &quot;, x: &quot; + x + &quot;, y: &quot; + y + &quot;, z: &quot; + z);\n            }\n          }\n\n          // javadoc: Finally, the implementor must ensure that:\n          // compare(x, y)==0 implies that sgn(compare(x, z))==sgn(compare(y, z)) for all z.\n          if (x_y == 0) {\n            if (Math.signum(x_z) == Math.signum(y_z)) { // ok\n            } else {\n              System.err.println(&quot;not holding: compare(x, y)==0 implies that sgn(compare(x, z))==sgn(compare(y, z)) for all z&quot; //\n                  + &quot; | x_y: &quot; + x_y + &quot;, x_z: &quot; + x_z + &quot;,  y_z: &quot; + y_z + &quot;, x: &quot; + x + &quot;, y: &quot; + y + &quot;, z: &quot; + z);\n            }\n          }\n        }\n      }\n    }\n  }\n</code></pre>\n"}],"owner":{"account_id":1521093,"reputation":3980,"user_id":1420715,"accept_rate":89,"display_name":"Lakatos Gyula"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":203206,"favorite_count":0,"down_vote_count":0,"up_vote_count":121,"accepted_answer_id":11441813,"answer_count":13,"score":121,"last_activity_date":1672914465,"creation_date":1342041615,"question_id":11441666,"body_markdown":"I saw many questions about this, and tried to solve the problem, but after one hour of googling and a lots of trial &amp; error, I still can&#39;t fix it. I hope some of you catch the problem.\r\n\r\nThis is what I get:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    java.lang.IllegalArgumentException: Comparison method violates its general contract!\r\n    \tat java.util.ComparableTimSort.mergeHi(ComparableTimSort.java:835)\r\n    \tat java.util.ComparableTimSort.mergeAt(ComparableTimSort.java:453)\r\n    \tat java.util.ComparableTimSort.mergeForceCollapse(ComparableTimSort.java:392)\r\n    \tat java.util.ComparableTimSort.sort(ComparableTimSort.java:191)\r\n    \tat java.util.ComparableTimSort.sort(ComparableTimSort.java:146)\r\n    \tat java.util.Arrays.sort(Arrays.java:472)\r\n    \tat java.util.Collections.sort(Collections.java:155)\r\n        ...\r\n\r\nAnd this is my comparator:\r\n\r\n    @Override\r\n    public int compareTo(Object o) {\r\n        if(this == o){\r\n            return 0;\r\n        }\r\n        \r\n        CollectionItem item = (CollectionItem) o;\r\n\r\n        Card card1 = CardCache.getInstance().getCard(cardId);\r\n        Card card2 = CardCache.getInstance().getCard(item.getCardId());\r\n\r\n        if (card1.getSet() &lt; card2.getSet()) {\r\n            return -1;\r\n        } else {\r\n            if (card1.getSet() == card2.getSet()) {\r\n                if (card1.getRarity() &lt; card2.getRarity()) {\r\n                    return 1;\r\n                } else {\r\n                    if (card1.getId() == card2.getId()) {\r\n                        if (cardType &gt; item.getCardType()) {\r\n                            return 1;\r\n                        } else {\r\n                            if (cardType == item.getCardType()) {\r\n                                return 0;\r\n                            }\r\n                            return -1;\r\n                        }\r\n                    }\r\n                    return -1;\r\n                }\r\n            }\r\n            return 1;\r\n        }\r\n    }\r\n\r\nAny idea?","title":"Java error: Comparison method violates its general contract","body":"<p>I saw many questions about this, and tried to solve the problem, but after one hour of googling and a lots of trial &amp; error, I still can't fix it. I hope some of you catch the problem.</p>\n\n<p>This is what I get:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.IllegalArgumentException: Comparison method violates its general contract!\n    at java.util.ComparableTimSort.mergeHi(ComparableTimSort.java:835)\n    at java.util.ComparableTimSort.mergeAt(ComparableTimSort.java:453)\n    at java.util.ComparableTimSort.mergeForceCollapse(ComparableTimSort.java:392)\n    at java.util.ComparableTimSort.sort(ComparableTimSort.java:191)\n    at java.util.ComparableTimSort.sort(ComparableTimSort.java:146)\n    at java.util.Arrays.sort(Arrays.java:472)\n    at java.util.Collections.sort(Collections.java:155)\n    ...\n</code></pre>\n\n<p>And this is my comparator:</p>\n\n<pre><code>@Override\npublic int compareTo(Object o) {\n    if(this == o){\n        return 0;\n    }\n\n    CollectionItem item = (CollectionItem) o;\n\n    Card card1 = CardCache.getInstance().getCard(cardId);\n    Card card2 = CardCache.getInstance().getCard(item.getCardId());\n\n    if (card1.getSet() &lt; card2.getSet()) {\n        return -1;\n    } else {\n        if (card1.getSet() == card2.getSet()) {\n            if (card1.getRarity() &lt; card2.getRarity()) {\n                return 1;\n            } else {\n                if (card1.getId() == card2.getId()) {\n                    if (cardType &gt; item.getCardType()) {\n                        return 1;\n                    } else {\n                        if (cardType == item.getCardType()) {\n                            return 0;\n                        }\n                        return -1;\n                    }\n                }\n                return -1;\n            }\n        }\n        return 1;\n    }\n}\n</code></pre>\n\n<p>Any idea?</p>\n"},{"tags":["java","file","if-statement","size","filesize"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1672909579,"post_id":75015948,"comment_id":132380479,"body_markdown":"What do you mean you can&#39;t? What result do you expect and what do you get, instead?","body":"What do you mean you can&#39;t? What result do you expect and what do you get, instead?"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1672909687,"post_id":75015948,"comment_id":132380504,"body_markdown":"Anyway, if you mean you&#39;re overflowing, try using `BigDecimal` if you care about decimals or `BigInteger` if you only care about integers.","body":"Anyway, if you mean you&#39;re overflowing, try using <code>BigDecimal</code> if you care about decimals or <code>BigInteger</code> if you only care about integers."},{"owner":{"account_id":22903011,"reputation":105,"user_id":17041460,"display_name":"Thend"},"score":0,"creation_date":1672909889,"post_id":75015948,"comment_id":132380570,"body_markdown":"@FedericoklezCulloca Sorry for my quick and lazy posting, I edited the post (early morning here). The problem is that for files larger than 1Gb it directly jumps to TB and shows zero.","body":"@FedericoklezCulloca Sorry for my quick and lazy posting, I edited the post (early morning here). The problem is that for files larger than 1Gb it directly jumps to TB and shows zero."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1672910459,"post_id":75015948,"comment_id":132380769,"body_markdown":"Of course it does. `size` can&#39;t be less than `size / n` if `n &lt; size` so none of the previous conditions (`size &lt; kilobytes`, `size &lt; megabytes` etc) will ever be true. And then it shows 0 because you&#39;re reassigning the value back to size, which is a `long` and doesn&#39;t have decimals.","body":"Of course it does. <code>size</code> can&#39;t be less than <code>size &#47; n</code> if <code>n &lt; size</code> so none of the previous conditions (<code>size &lt; kilobytes</code>, <code>size &lt; megabytes</code> etc) will ever be true. And then it shows 0 because you&#39;re reassigning the value back to size, which is a <code>long</code> and doesn&#39;t have decimals."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1672910516,"post_id":75015948,"comment_id":132380784,"body_markdown":"You could avoid all those `&amp;&amp; size &lt; xxx`  in your condition if you reverse the order of the `if`s (i.e., start with TB, then GB etc...)","body":"You could avoid all those <code>&amp;&amp; size &lt; xxx</code>  in your condition if you reverse the order of the <code>if</code>s (i.e., start with TB, then GB etc...)"},{"owner":{"account_id":22903011,"reputation":105,"user_id":17041460,"display_name":"Thend"},"score":0,"creation_date":1672911895,"post_id":75015948,"comment_id":132381214,"body_markdown":"@FedericoklezCulloca I changed to BigDecimal, however still jumps to TB, what is your suggestion? Should I change the relations somehow, not clear how. (Edited the post!)","body":"@FedericoklezCulloca I changed to BigDecimal, however still jumps to TB, what is your suggestion? Should I change the relations somehow, not clear how. (Edited the post!)"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1672911984,"post_id":75015948,"comment_id":132381249,"body_markdown":"I suggested to change to `BigDecimal` **if** the problem was overflowing (which is not, as you then explained). See my other comments that explain what the actual problems are and how to fix this.","body":"I suggested to change to <code>BigDecimal</code> <b>if</b> the problem was overflowing (which is not, as you then explained). See my other comments that explain what the actual problems are and how to fix this."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1672912172,"post_id":75015948,"comment_id":132381296,"body_markdown":"I forgot, the solution to not seeing 0 is to not reassign to `size`. Either assign the result to a `double` or just print `size / (1024.0 * 1024.0 *1024.0 *1024)` directly.","body":"I forgot, the solution to not seeing 0 is to not reassign to <code>size</code>. Either assign the result to a <code>double</code> or just print <code>size &#47; (1024.0 * 1024.0 *1024.0 *1024)</code> directly."},{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":1,"creation_date":1672912948,"post_id":75015948,"comment_id":132381549,"body_markdown":"Does this answer your question? [How can I convert byte size into a human-readable format in Java?](https://stackoverflow.com/questions/3758606/how-can-i-convert-byte-size-into-a-human-readable-format-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/3758606/how-can-i-convert-byte-size-into-a-human-readable-format-in-java\">How can I convert byte size into a human-readable format in Java?</a>"},{"owner":{"account_id":22903011,"reputation":105,"user_id":17041460,"display_name":"Thend"},"score":0,"creation_date":1672914441,"post_id":75015948,"comment_id":132382030,"body_markdown":"@FedericoklezCulloca I have changed size / (1024.0 * 1024.0 *1024.0 *1024) as you mentioned, for all of the code, now works perfectly. I edited the post with the correct code. Best!","body":"@FedericoklezCulloca I have changed size / (1024.0 * 1024.0 *1024.0 *1024) as you mentioned, for all of the code, now works perfectly. I edited the post with the correct code. Best!"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1672915026,"post_id":75015948,"comment_id":132382226,"body_markdown":"@Thend glad I could help :) It would be better if you posted your solution as an actual answer, rather than an edit to your original question. It makes everything more clear **and** helps future readers which may have a similar problem to yours find a solution.","body":"@Thend glad I could help :) It would be better if you posted your solution as an actual answer, rather than an edit to your original question. It makes everything more clear <b>and</b> helps future readers which may have a similar problem to yours find a solution."}],"owner":{"account_id":22903011,"reputation":105,"user_id":17041460,"display_name":"Thend"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1672914195,"creation_date":1672909253,"question_id":75015948,"body_markdown":"I&#39;d like to print file/directory sizes in Java, however for files larger than 1GB I cannot. For example, when I check a file with ~1.3 GB it writes 0.000 TB, this is shown on the debugging screenshot. The if-else jumps to the else branch. Probably the maximum limit of long type? Please advice me, the code is the following:\r\n\r\n    long size;\r\n    String notation;\r\n    if (file.isDirectory()) {\r\n        // File is a directory, calculate size of all files in the directory\r\n        size = 0;\r\n        for (File f : file.listFiles()) {\r\n            size += f.length();\r\n        }\r\n    } else {\r\n        // File is a regular file, use size of file\r\n        size = file.length();\r\n    }\r\n\r\n    // Conversion\r\n    long bytes = size;\r\n    long kilobytes = (bytes / 1024);\r\n    long megabytes = (kilobytes / 1024);\r\n    long gigabytes = (megabytes / 1024);\r\n    long terabytes = (gigabytes / 1024);\r\n    long petabytes = (terabytes / 1024);\r\n    long exabytes = (petabytes / 1024);\r\n    //long zettabytes = (exabytes / 1024);\r\n    //long yottabytes = (zettabytes / 1024);\r\n\r\n    if (size &gt; 0 &amp;&amp; size &lt; kilobytes){\r\n        notation = &quot;B&quot;;\r\n        System.out.println(size+notation);\r\n    } else if (size &gt; kilobytes &amp;&amp; size &lt; megabytes) {\r\n        // file is smaller than 1 MB, return size in KB\r\n        size /= 1024;\r\n        notation = &quot;KB&quot;;\r\n        System.out.println(size+notation);\r\n    } else if (size &gt; megabytes &amp;&amp; size &lt; gigabytes) {\r\n        // file is smaller than 1 GB, return size in MB\r\n        notation = &quot;MB&quot;;\r\n        size /= 1024.0 * 1024;\r\n        System.out.println(size+notation);\r\n    } else if (size &gt; gigabytes &amp;&amp; size &lt; terabytes) {\r\n        // file is larger than 1 GB, return size in GB\r\n        notation = &quot;GB&quot;;\r\n        size /= 1024.0 * 1024.0 * 1024.0;\r\n        System.out.println(size+notation);\r\n    } else {\r\n        // file is larger than 1 TB, return size in TB\r\n        notation = &quot;TB&quot;;\r\n        size /= 1024.0 * 1024.0 * 1024.0 * 1024;\r\n        System.out.println(size+notation);\r\n    }\r\n\r\n    // cast size to double before passing it to String.format\r\n    return String.format(&quot;[Size: %.3f %s]&quot;, (double) size, notation);\r\n}\r\n\r\nDebugging shows the following: [![screenshot][1]][1]\r\n\r\n\r\n**EDIT:**\r\nI have changed to BigDecimal, the values seems correct, but still jumps to TB. Please see the screenshot:\r\n[![screenshot 2][2]][2]\r\n\r\n**SOLUTION:**\r\nNow everything is perfect, thank you for all ;)\r\n\r\n    if (bsize.compareTo(BigDecimal.valueOf(1024)) &lt; 0) {\r\n        notation = &quot;B&quot;;\r\n        System.out.println(bsize+notation);\r\n    } else if (bsize.compareTo(BigDecimal.valueOf(1024*1024)) &lt; 0) {\r\n        // file is smaller than 1 MB, return size in KB\r\n        bsize = bsize.divide(BigDecimal.valueOf(1024));\r\n        notation = &quot;KB&quot;;\r\n        System.out.println(bsize+notation);\r\n    } else if (bsize.compareTo(BigDecimal.valueOf(1024L*1024L*1024L)) &lt; 0) {\r\n        // file is smaller than 1 GB, return size in MB\r\n        notation = &quot;MB&quot;;\r\n        bsize = bsize.divide(BigDecimal.valueOf(1024*1024));\r\n        System.out.println(bsize+notation);\r\n    } else if (bsize.compareTo(BigDecimal.valueOf(1024L*1024L*1024L*1024L)) &lt; 0) {\r\n        // file is larger than 1 GB, return size in GB\r\n        notation = &quot;GB&quot;;\r\n        System.out.println(bsize+notation);\r\n        bsize = bsize.divide(BigDecimal.valueOf(1024*1024*1024));\r\n        System.out.println(bsize+notation);\r\n    } else {\r\n        // file is larger than 1 TB, return size in TB\r\n        notation = &quot;TB&quot;;\r\n        bsize = bsize.divide(BigDecimal.valueOf(1024L*1024L*1024L*1024L));\r\n        System.out.println(bsize+notation);\r\n    }\r\n\r\n  [1]: https://i.stack.imgur.com/H5AvA.jpg\r\n  [2]: https://i.stack.imgur.com/M5x7S.jpg","title":"Java if-else statement to print file/directory size; large file size (1 GB&lt;) printing issue","body":"<p>I'd like to print file/directory sizes in Java, however for files larger than 1GB I cannot. For example, when I check a file with ~1.3 GB it writes 0.000 TB, this is shown on the debugging screenshot. The if-else jumps to the else branch. Probably the maximum limit of long type? Please advice me, the code is the following:</p>\n<pre><code>long size;\nString notation;\nif (file.isDirectory()) {\n    // File is a directory, calculate size of all files in the directory\n    size = 0;\n    for (File f : file.listFiles()) {\n        size += f.length();\n    }\n} else {\n    // File is a regular file, use size of file\n    size = file.length();\n}\n\n// Conversion\nlong bytes = size;\nlong kilobytes = (bytes / 1024);\nlong megabytes = (kilobytes / 1024);\nlong gigabytes = (megabytes / 1024);\nlong terabytes = (gigabytes / 1024);\nlong petabytes = (terabytes / 1024);\nlong exabytes = (petabytes / 1024);\n//long zettabytes = (exabytes / 1024);\n//long yottabytes = (zettabytes / 1024);\n\nif (size &gt; 0 &amp;&amp; size &lt; kilobytes){\n    notation = &quot;B&quot;;\n    System.out.println(size+notation);\n} else if (size &gt; kilobytes &amp;&amp; size &lt; megabytes) {\n    // file is smaller than 1 MB, return size in KB\n    size /= 1024;\n    notation = &quot;KB&quot;;\n    System.out.println(size+notation);\n} else if (size &gt; megabytes &amp;&amp; size &lt; gigabytes) {\n    // file is smaller than 1 GB, return size in MB\n    notation = &quot;MB&quot;;\n    size /= 1024.0 * 1024;\n    System.out.println(size+notation);\n} else if (size &gt; gigabytes &amp;&amp; size &lt; terabytes) {\n    // file is larger than 1 GB, return size in GB\n    notation = &quot;GB&quot;;\n    size /= 1024.0 * 1024.0 * 1024.0;\n    System.out.println(size+notation);\n} else {\n    // file is larger than 1 TB, return size in TB\n    notation = &quot;TB&quot;;\n    size /= 1024.0 * 1024.0 * 1024.0 * 1024;\n    System.out.println(size+notation);\n}\n\n// cast size to double before passing it to String.format\nreturn String.format(&quot;[Size: %.3f %s]&quot;, (double) size, notation);\n</code></pre>\n<p>}</p>\n<p>Debugging shows the following: <a href=\"https://i.stack.imgur.com/H5AvA.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H5AvA.jpg\" alt=\"screenshot\" /></a></p>\n<p><strong>EDIT:</strong>\nI have changed to BigDecimal, the values seems correct, but still jumps to TB. Please see the screenshot:\n<a href=\"https://i.stack.imgur.com/M5x7S.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/M5x7S.jpg\" alt=\"screenshot 2\" /></a></p>\n<p><strong>SOLUTION:</strong>\nNow everything is perfect, thank you for all ;)</p>\n<pre><code>if (bsize.compareTo(BigDecimal.valueOf(1024)) &lt; 0) {\n    notation = &quot;B&quot;;\n    System.out.println(bsize+notation);\n} else if (bsize.compareTo(BigDecimal.valueOf(1024*1024)) &lt; 0) {\n    // file is smaller than 1 MB, return size in KB\n    bsize = bsize.divide(BigDecimal.valueOf(1024));\n    notation = &quot;KB&quot;;\n    System.out.println(bsize+notation);\n} else if (bsize.compareTo(BigDecimal.valueOf(1024L*1024L*1024L)) &lt; 0) {\n    // file is smaller than 1 GB, return size in MB\n    notation = &quot;MB&quot;;\n    bsize = bsize.divide(BigDecimal.valueOf(1024*1024));\n    System.out.println(bsize+notation);\n} else if (bsize.compareTo(BigDecimal.valueOf(1024L*1024L*1024L*1024L)) &lt; 0) {\n    // file is larger than 1 GB, return size in GB\n    notation = &quot;GB&quot;;\n    System.out.println(bsize+notation);\n    bsize = bsize.divide(BigDecimal.valueOf(1024*1024*1024));\n    System.out.println(bsize+notation);\n} else {\n    // file is larger than 1 TB, return size in TB\n    notation = &quot;TB&quot;;\n    bsize = bsize.divide(BigDecimal.valueOf(1024L*1024L*1024L*1024L));\n    System.out.println(bsize+notation);\n}\n</code></pre>\n"},{"tags":["java","performance-testing","gatling"],"answers":[{"tags":[],"owner":{"account_id":6852429,"reputation":6319,"user_id":5269205,"display_name":"St&#233;phane LANDELLE"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672914167,"creation_date":1672914167,"answer_id":75016946,"question_id":75016699,"body_markdown":"That&#39;s not possible. Gatling Expression Language is intended as a simple solution for simple use cases.\r\n\r\nFor more complex use cases, you have to switch to using [functions][1] and the [Session API][2].\r\n\r\n\r\n  [1]: https://gatling.io/docs/gatling/reference/current/core/session/function/\r\n  [2]: https://gatling.io/docs/gatling/reference/current/core/session/session_api/#fetching-data","title":"Nested attributes in Gatling Expression Language","body":"<p>That's not possible. Gatling Expression Language is intended as a simple solution for simple use cases.</p>\n<p>For more complex use cases, you have to switch to using <a href=\"https://gatling.io/docs/gatling/reference/current/core/session/function/\" rel=\"nofollow noreferrer\">functions</a> and the <a href=\"https://gatling.io/docs/gatling/reference/current/core/session/session_api/#fetching-data\" rel=\"nofollow noreferrer\">Session API</a>.</p>\n"}],"owner":{"account_id":15028110,"reputation":93,"user_id":10847244,"display_name":"Taserface"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672914167,"creation_date":1672912924,"question_id":75016699,"body_markdown":"I use Gatling Java  to write a performance test.\r\nI have a session variable &#39;VAR_X&#39; with a value of &#39;Jerry&#39;.\r\n\r\nMy code has a &#39;post()&#39; method that sends a request. It uses a custom feeder to provide a body for the request.  \r\n\r\n    public ChainBuilder post() {\r\n    \tList&lt;String&gt; requestBodyList = new ArrayList&lt;String&gt;();\r\n    \tIterator&lt;Map&lt;String, Object&gt;&gt; feeder =requestBodyList.add(Collections.singletonMap(&quot;REQUEST_BODY&quot;, (Object) &quot;my_config { x: #{VAR_X} }&quot;)).iterator();\r\n    \treturn feed(feeder)\r\n    \t\t.exec(http(&quot;Post request&quot;))\r\n    \t\t.post(&quot;x_resource/&quot;)\r\n    \t\t.body(StringBody(&quot;#{REQUEST_BODY}&quot;))\r\n    }\r\n\r\n\r\nCurrently my code results in the request body to be &quot;my_config { x: #{VAR_X} }&quot;. \r\nI would like the value of session variable &#39;VAR_X&#39; to get inserted into the request body, by using Gatling Expression Language (GEL).\r\nThe desired request body should be:\r\n&quot;my_config { x: Jerry }&quot;\r\n\r\nHow can I change my code to achieve that?","title":"Nested attributes in Gatling Expression Language","body":"<p>I use Gatling Java  to write a performance test.\nI have a session variable 'VAR_X' with a value of 'Jerry'.</p>\n<p>My code has a 'post()' method that sends a request. It uses a custom feeder to provide a body for the request.</p>\n<pre><code>public ChainBuilder post() {\n    List&lt;String&gt; requestBodyList = new ArrayList&lt;String&gt;();\n    Iterator&lt;Map&lt;String, Object&gt;&gt; feeder =requestBodyList.add(Collections.singletonMap(&quot;REQUEST_BODY&quot;, (Object) &quot;my_config { x: #{VAR_X} }&quot;)).iterator();\n    return feed(feeder)\n        .exec(http(&quot;Post request&quot;))\n        .post(&quot;x_resource/&quot;)\n        .body(StringBody(&quot;#{REQUEST_BODY}&quot;))\n}\n</code></pre>\n<p>Currently my code results in the request body to be &quot;my_config { x: #{VAR_X} }&quot;.\nI would like the value of session variable 'VAR_X' to get inserted into the request body, by using Gatling Expression Language (GEL).\nThe desired request body should be:\n&quot;my_config { x: Jerry }&quot;</p>\n<p>How can I change my code to achieve that?</p>\n"},{"tags":["java","mysql","spring","jpa"],"comments":[{"owner":{"account_id":18002520,"reputation":324,"user_id":13084140,"display_name":"Ryednap"},"score":0,"creation_date":1672926054,"post_id":75016936,"comment_id":132385965,"body_markdown":"From my testing of both cases you specified the field `boo` will be set to `null` by default.","body":"From my testing of both cases you specified the field <code>boo</code> will be set to <code>null</code> by default."}],"owner":{"account_id":12766164,"reputation":467,"user_id":10789874,"display_name":"Shivam Papat"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672914133,"creation_date":1672914133,"question_id":75016936,"body_markdown":"I have an entity with a Boolean object. As Boolean gets converted to TINYINT(1) in MYSQL, the values stored in the column is either 1 or 0. \r\n\r\nI declared the column in entity class as: \r\n\r\n    @Column(name=&quot;boo&quot;)\r\n    Boolean boo = false;\r\n\r\nCurrently, it is storing 0 for all columns. \r\nHow do I set default to NULL to all values.\r\n\r\nDoes this will set default to null ?\r\n\r\n    @ColumnDefault(value=&quot;null&quot;)\r\n    @Column(name=&quot;boo&quot;)\r\n    Boolean boo;\r\n\r\nor this,\r\n\r\n    @ColumnDefault(value=&quot;NULL&quot;)\r\n    @Column(name=&quot;boo&quot;)\r\n    Boolean boo;\r\n\r\nIf none, what else can be done. \r\nThanks.","title":"How to set default NULL for tinyint(1) using JPA","body":"<p>I have an entity with a Boolean object. As Boolean gets converted to TINYINT(1) in MYSQL, the values stored in the column is either 1 or 0.</p>\n<p>I declared the column in entity class as:</p>\n<pre><code>@Column(name=&quot;boo&quot;)\nBoolean boo = false;\n</code></pre>\n<p>Currently, it is storing 0 for all columns.\nHow do I set default to NULL to all values.</p>\n<p>Does this will set default to null ?</p>\n<pre><code>@ColumnDefault(value=&quot;null&quot;)\n@Column(name=&quot;boo&quot;)\nBoolean boo;\n</code></pre>\n<p>or this,</p>\n<pre><code>@ColumnDefault(value=&quot;NULL&quot;)\n@Column(name=&quot;boo&quot;)\nBoolean boo;\n</code></pre>\n<p>If none, what else can be done.\nThanks.</p>\n"},{"tags":["java","spring","spring-mvc","mapping","servlet-filters"],"comments":[{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1441232872,"post_id":32364126,"comment_id":52600815,"body_markdown":"Why do you think that, in your current configuration, the `Filter` should be invoked?","body":"Why do you think that, in your current configuration, the <code>Filter</code> should be invoked?"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1441233084,"post_id":32364126,"comment_id":52600882,"body_markdown":"According following answer: http://stackoverflow.com/a/26157610/2674303","body":"According following answer: <a href=\"http://stackoverflow.com/a/26157610/2674303\">stackoverflow.com/a/26157610/2674303</a>"},{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1441233188,"post_id":32364126,"comment_id":52600906,"body_markdown":"So you&#39;re using Spring Boot?","body":"So you&#39;re using Spring Boot?"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1441233303,"post_id":32364126,"comment_id":52600942,"body_markdown":"@Sotirios Delimanolis I am not absolutelu sure but I have dependency on **spring-framework-bom** in my pom","body":"@Sotirios Delimanolis I am not absolutelu sure but I have dependency on <b>spring-framework-bom</b> in my pom"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1441234087,"post_id":32364126,"comment_id":52601195,"body_markdown":"@Sotirios Delimanolis topic updated","body":"@Sotirios Delimanolis topic updated"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1441485314,"post_id":32364126,"comment_id":52701226,"body_markdown":"@Roxy please be attentive. I meantioned about this link in my topic","body":"@Roxy please be attentive. I meantioned about this link in my topic"},{"owner":{"account_id":3299944,"reputation":419,"user_id":2776345,"accept_rate":50,"display_name":"Nayanjyoti Deka"},"score":0,"creation_date":1441995880,"post_id":32364126,"comment_id":52917766,"body_markdown":"In the contructor of CaseInsensitiveHttpServletRequestWrapper where you do params.putAll(request.getParameterMap()), instead of directly putting the parameter map, if you iterate over the parameter map and put individually key, value params with converting the key to lowercase or uppercase, wouldn&#39;t it work?","body":"In the contructor of CaseInsensitiveHttpServletRequestWrapper where you do params.putAll(request.getParameterMap()), instead of directly putting the parameter map, if you iterate over the parameter map and put individually key, value params with converting the key to lowercase or uppercase, wouldn&#39;t it work?"},{"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"score":0,"creation_date":1501839941,"post_id":32364126,"comment_id":77967603,"body_markdown":"Did you find a solution regarding `@ModelAttribute` mapping?","body":"Did you find a solution regarding <code>@ModelAttribute</code> mapping?"}],"answers":[{"tags":[],"owner":{"account_id":1658164,"reputation":3247,"user_id":1527103,"accept_rate":89,"display_name":"Gokhan Oner"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1441490060,"creation_date":1441490060,"answer_id":32418047,"question_id":32364126,"body_markdown":"Your problem, I believe, is ```@ModelAttribute```. You&#39;re asking Spring to map the parameters to ```MyBean``` object, and the property inside this object is ```valueName```. \r\n\r\nIn order Spring to reflect the params to the object, it needs to be in the correct case.\r\n\r\nYou have 2 options:\r\n\r\n - change the property name to ```valuename``` in your MyBean object, and all property names to lowercase, it should work with help of your solution.\r\n - remove ```@ModelAttribute``` and put ```@RequestParam``` for each property. If you have many props, this could be painful.\r\n","title":"Spring mvc. case insensitive get parameters mapping","body":"<p>Your problem, I believe, is <code>@ModelAttribute</code>. You're asking Spring to map the parameters to <code>MyBean</code> object, and the property inside this object is <code>valueName</code>. </p>\n\n<p>In order Spring to reflect the params to the object, it needs to be in the correct case.</p>\n\n<p>You have 2 options:</p>\n\n<ul>\n<li>change the property name to <code>valuename</code> in your MyBean object, and all property names to lowercase, it should work with help of your solution.</li>\n<li>remove <code>@ModelAttribute</code> and put <code>@RequestParam</code> for each property. If you have many props, this could be painful.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4946877,"reputation":173,"user_id":3982002,"accept_rate":71,"display_name":"Neeraj Gupta"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1441796454,"creation_date":1441796454,"answer_id":32477766,"question_id":32364126,"body_markdown":"Here is what you can do...\r\n\r\nCreate the domain(POJO) with all lowercase variables\r\n\r\n    public class MyBean{\r\n        private String valuename;\r\n    \r\n    \tpublic String getValuename() {\r\n    \t\treturn valuename;\r\n    \t}\r\n    \r\n    \tpublic void setValuename(String valuename) {\r\n    \t\tthis.valuename = valuename;\r\n    \t}\r\n    }\r\n\r\nThen create a class which will extend [`HttpServletRequestWrapper`][1] \r\n\r\n    public class CustomWrappedRequest extends HttpServletRequestWrapper\r\n    {\r\n        private final Map&lt;String, String[]&gt; modifiableParameters;\r\n        private Map&lt;String, String[]&gt; allParameters = null;\r\n    \r\n        public CustomWrappedRequest(final HttpServletRequest request, \r\n                                                        final Map&lt;String, String[]&gt; additionalParams)\r\n        {\r\n            super(request);\r\n            modifiableParameters = new TreeMap&lt;String, String[]&gt;();\r\n            modifiableParameters.putAll(additionalParams);\r\n        }\r\n    \r\n        @Override\r\n        public String getParameter(final String name)\r\n        {\r\n            String[] strings = getParameterMap().get(name);\r\n            if (strings != null)\r\n            {\r\n                return strings[0];\r\n            }\r\n            return super.getParameter(name);\r\n        }\r\n    \r\n        @Override\r\n        public Map&lt;String, String[]&gt; getParameterMap()\r\n        {\r\n            if (allParameters == null)\r\n            {\r\n                allParameters = new TreeMap&lt;String, String[]&gt;();\r\n                allParameters.putAll(super.getParameterMap());\r\n                allParameters.putAll(modifiableParameters);\r\n            }\r\n            return Collections.unmodifiableMap(allParameters);\r\n        }\r\n    \r\n        @Override\r\n        public Enumeration&lt;String&gt; getParameterNames()\r\n        {\r\n            return Collections.enumeration(getParameterMap().keySet());\r\n        }\r\n    \r\n        @Override\r\n        public String[] getParameterValues(final String name)\r\n        {\r\n            return getParameterMap().get(name);\r\n        }\r\n    }\r\n\r\nLast add a filter with appropriate web.xml config the `doFilter()` will look like this\r\n\r\n    public void doFilter(ServletRequest request, ServletResponse reponse, FilterChain chain)\r\n    \t\t\tthrows IOException, ServletException {\r\n    \t    Map&lt;String, String[]&gt; params = request.getParameterMap();\r\n    \t    Map&lt;String, String[]&gt; extraParams = new TreeMap&lt;String, String[]&gt;();\r\n    \t    Iterator&lt;String&gt; i = params.keySet().iterator();\r\n    \r\n    \t    while ( i.hasNext() )\r\n    \t      {\r\n    \t        String key = (String) i.next();\r\n    \t        String value = ((String[]) params.get( key ))[ 0 ];\r\n    \t        extraParams.put(key.toLowerCase(), new String[] {value});\r\n    \r\n    \t      }\r\n    \t    HttpServletRequest wrappedRequest = new CustomWrappedRequest((HttpServletRequest)request, extraParams);\r\n    \t    \r\n    \t    chain.doFilter(wrappedRequest, reponse);\r\n    \t\t\r\n    \t}\r\n\r\nHere the filter will convet the params into lowercase and attach it to your custom made request. \r\nThen use can use `@ModelAttribute` in the controller code to get the desired object.\r\n\r\nHope it helps :)\r\n\r\n\r\n\r\n\r\n\r\n  [1]: http://www.ocpsoft.org/opensource/how-to-safely-add-modify-servlet-request-parameter-values/","title":"Spring mvc. case insensitive get parameters mapping","body":"<p>Here is what you can do...</p>\n\n<p>Create the domain(POJO) with all lowercase variables</p>\n\n<pre><code>public class MyBean{\n    private String valuename;\n\n    public String getValuename() {\n        return valuename;\n    }\n\n    public void setValuename(String valuename) {\n        this.valuename = valuename;\n    }\n}\n</code></pre>\n\n<p>Then create a class which will extend <a href=\"http://www.ocpsoft.org/opensource/how-to-safely-add-modify-servlet-request-parameter-values/\" rel=\"nofollow\"><code>HttpServletRequestWrapper</code></a> </p>\n\n<pre><code>public class CustomWrappedRequest extends HttpServletRequestWrapper\n{\n    private final Map&lt;String, String[]&gt; modifiableParameters;\n    private Map&lt;String, String[]&gt; allParameters = null;\n\n    public CustomWrappedRequest(final HttpServletRequest request, \n                                                    final Map&lt;String, String[]&gt; additionalParams)\n    {\n        super(request);\n        modifiableParameters = new TreeMap&lt;String, String[]&gt;();\n        modifiableParameters.putAll(additionalParams);\n    }\n\n    @Override\n    public String getParameter(final String name)\n    {\n        String[] strings = getParameterMap().get(name);\n        if (strings != null)\n        {\n            return strings[0];\n        }\n        return super.getParameter(name);\n    }\n\n    @Override\n    public Map&lt;String, String[]&gt; getParameterMap()\n    {\n        if (allParameters == null)\n        {\n            allParameters = new TreeMap&lt;String, String[]&gt;();\n            allParameters.putAll(super.getParameterMap());\n            allParameters.putAll(modifiableParameters);\n        }\n        return Collections.unmodifiableMap(allParameters);\n    }\n\n    @Override\n    public Enumeration&lt;String&gt; getParameterNames()\n    {\n        return Collections.enumeration(getParameterMap().keySet());\n    }\n\n    @Override\n    public String[] getParameterValues(final String name)\n    {\n        return getParameterMap().get(name);\n    }\n}\n</code></pre>\n\n<p>Last add a filter with appropriate web.xml config the <code>doFilter()</code> will look like this</p>\n\n<pre><code>public void doFilter(ServletRequest request, ServletResponse reponse, FilterChain chain)\n            throws IOException, ServletException {\n        Map&lt;String, String[]&gt; params = request.getParameterMap();\n        Map&lt;String, String[]&gt; extraParams = new TreeMap&lt;String, String[]&gt;();\n        Iterator&lt;String&gt; i = params.keySet().iterator();\n\n        while ( i.hasNext() )\n          {\n            String key = (String) i.next();\n            String value = ((String[]) params.get( key ))[ 0 ];\n            extraParams.put(key.toLowerCase(), new String[] {value});\n\n          }\n        HttpServletRequest wrappedRequest = new CustomWrappedRequest((HttpServletRequest)request, extraParams);\n\n        chain.doFilter(wrappedRequest, reponse);\n\n    }\n</code></pre>\n\n<p>Here the filter will convet the params into lowercase and attach it to your custom made request. \nThen use can use <code>@ModelAttribute</code> in the controller code to get the desired object.</p>\n\n<p>Hope it helps :)</p>\n"},{"tags":[],"owner":{"account_id":2417567,"reputation":886,"user_id":2111288,"accept_rate":33,"display_name":"SaviNuclear"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1442012312,"creation_date":1441981342,"answer_id":32525732,"question_id":32364126,"body_markdown":"Actually, you have to change the things in the `CaseInsensitiveRequestFilter` class as per your bean variable name. In your case the variable is `valueName`, so for every request it will convert it as per your variable setter method camel case injection and then match as per your request. Just try for your custom requirements:\r\n\r\n    package biz.deinum.web.filter;\r\n    \r\n    import java.io.IOException;\r\n    import java.util.Collections;\r\n    import java.util.Enumeration;\r\n    import java.util.HashMap;\r\n    import java.util.Iterator;\r\n    import java.util.Map;\r\n    import java.util.Map.Entry;\r\n    import java.util.Set;\r\n    \r\n    import javax.servlet.FilterChain;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletRequestWrapper;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    import org.springframework.util.LinkedCaseInsensitiveMap;\r\n    import org.springframework.web.filter.OncePerRequestFilter;\r\n    \r\n    public class CaseInsensitiveRequestFilter extends OncePerRequestFilter {\r\n        @Override\r\n        protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n            filterChain.doFilter(new CaseInsensitiveHttpServletRequestWrapper(request), response);\r\n        }\r\n    \r\n        private static class CaseInsensitiveHttpServletRequestWrapper extends HttpServletRequestWrapper {\r\n    \r\n            private final LinkedCaseInsensitiveMap&lt;String[]&gt; params = new LinkedCaseInsensitiveMap&lt;&gt;();\r\n    \r\n            private CaseInsensitiveHttpServletRequestWrapper(HttpServletRequest request) {\r\n                super(request);\r\n                Map&lt;String, String[]&gt; map = request.getParameterMap();\r\n                Set set = map.entrySet();\r\n                Iterator it = set.iterator();\r\n                Map&lt;String, String[]&gt; tempMap = new HashMap&lt;String, String[]&gt;(); \r\n                while (it.hasNext()) {\r\n                \tMap.Entry&lt;String, String[]&gt; entry = (Entry&lt;String, String[]&gt;) it.next();\r\n                \tString key = entry.getKey();\r\n                \t// Keep your parameter bean name here in your case it is &quot;valueName&quot;\r\n                \tString beanParamaterName = &quot;valueName&quot;;\r\n                \tif(key.equalsIgnoreCase(beanParamaterName)){\r\n                \t\ttempMap.put(key.toLowerCase(), entry.getValue());\r\n                \t}\r\n                }\r\n                params.putAll(tempMap);\r\n            }\r\n    \r\n            @Override\r\n            public String getParameter(String name) {\r\n                String[] values = getParameterValues(name);\r\n                System.out.println(values.toString()+&quot;-&quot;);\r\n                if (values == null || values.length == 0) {\r\n                    return null;\r\n                }\r\n                return values[0];\r\n            }\r\n    \r\n            @Override\r\n            public Map&lt;String, String[]&gt; getParameterMap() {\r\n                return Collections.unmodifiableMap(this.params);\r\n            }\r\n    \r\n            @Override\r\n            public Enumeration&lt;String&gt; getParameterNames() {\r\n                return Collections.enumeration(this.params.keySet());\r\n            }\r\n    \r\n            @Override\r\n            public String[] getParameterValues(String name) {\r\n            \tSystem.out.println(name);\r\n                return (String[])params.get(name);\r\n            }\r\n        }\r\n    }","title":"Spring mvc. case insensitive get parameters mapping","body":"<p>Actually, you have to change the things in the <code>CaseInsensitiveRequestFilter</code> class as per your bean variable name. In your case the variable is <code>valueName</code>, so for every request it will convert it as per your variable setter method camel case injection and then match as per your request. Just try for your custom requirements:</p>\n\n<pre><code>package biz.deinum.web.filter;\n\nimport java.io.IOException;\nimport java.util.Collections;\nimport java.util.Enumeration;\nimport java.util.HashMap;\nimport java.util.Iterator;\nimport java.util.Map;\nimport java.util.Map.Entry;\nimport java.util.Set;\n\nimport javax.servlet.FilterChain;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletRequestWrapper;\nimport javax.servlet.http.HttpServletResponse;\n\nimport org.springframework.util.LinkedCaseInsensitiveMap;\nimport org.springframework.web.filter.OncePerRequestFilter;\n\npublic class CaseInsensitiveRequestFilter extends OncePerRequestFilter {\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        filterChain.doFilter(new CaseInsensitiveHttpServletRequestWrapper(request), response);\n    }\n\n    private static class CaseInsensitiveHttpServletRequestWrapper extends HttpServletRequestWrapper {\n\n        private final LinkedCaseInsensitiveMap&lt;String[]&gt; params = new LinkedCaseInsensitiveMap&lt;&gt;();\n\n        private CaseInsensitiveHttpServletRequestWrapper(HttpServletRequest request) {\n            super(request);\n            Map&lt;String, String[]&gt; map = request.getParameterMap();\n            Set set = map.entrySet();\n            Iterator it = set.iterator();\n            Map&lt;String, String[]&gt; tempMap = new HashMap&lt;String, String[]&gt;(); \n            while (it.hasNext()) {\n                Map.Entry&lt;String, String[]&gt; entry = (Entry&lt;String, String[]&gt;) it.next();\n                String key = entry.getKey();\n                // Keep your parameter bean name here in your case it is \"valueName\"\n                String beanParamaterName = \"valueName\";\n                if(key.equalsIgnoreCase(beanParamaterName)){\n                    tempMap.put(key.toLowerCase(), entry.getValue());\n                }\n            }\n            params.putAll(tempMap);\n        }\n\n        @Override\n        public String getParameter(String name) {\n            String[] values = getParameterValues(name);\n            System.out.println(values.toString()+\"-\");\n            if (values == null || values.length == 0) {\n                return null;\n            }\n            return values[0];\n        }\n\n        @Override\n        public Map&lt;String, String[]&gt; getParameterMap() {\n            return Collections.unmodifiableMap(this.params);\n        }\n\n        @Override\n        public Enumeration&lt;String&gt; getParameterNames() {\n            return Collections.enumeration(this.params.keySet());\n        }\n\n        @Override\n        public String[] getParameterValues(String name) {\n            System.out.println(name);\n            return (String[])params.get(name);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2800537,"reputation":454,"user_id":2408863,"display_name":"tonnoz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672914120,"creation_date":1672914120,"answer_id":75016934,"question_id":32364126,"body_markdown":"Your enum param:\r\n\r\n    enum YourEnum {\r\n        ENUM1, ENUM2, ENUM3\r\n    }\r\n\r\nAdd this converter class:\r\n\r\n    class StringToEnumConverter implements Converter&lt;String, YourEnum&gt; {\r\n        @Override\r\n        YourEnum convert(String source) {\r\n            return YourEnum.valueOf(source.toUpperCase());\r\n        }\r\n    }\r\n\r\nand this Configuration:\r\n\r\n    class ApiWebConfiguration implements WebMvcConfigurer {\r\n    \r\n        @Override\r\n        void addFormatters(FormatterRegistry registry) {\r\n            registry.addConverter(new StringToEnumConverter());\r\n        }\r\n    ...\r\n    }\r\n\r\nvoila, case-unsensitive enum parameter.","title":"Spring mvc. case insensitive get parameters mapping","body":"<p>Your enum param:</p>\n<pre><code>enum YourEnum {\n    ENUM1, ENUM2, ENUM3\n}\n</code></pre>\n<p>Add this converter class:</p>\n<pre><code>class StringToEnumConverter implements Converter&lt;String, YourEnum&gt; {\n    @Override\n    YourEnum convert(String source) {\n        return YourEnum.valueOf(source.toUpperCase());\n    }\n}\n</code></pre>\n<p>and this Configuration:</p>\n<pre><code>class ApiWebConfiguration implements WebMvcConfigurer {\n\n    @Override\n    void addFormatters(FormatterRegistry registry) {\n        registry.addConverter(new StringToEnumConverter());\n    }\n...\n}\n</code></pre>\n<p>voila, case-unsensitive enum parameter.</p>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7084,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":4,"score":11,"last_activity_date":1672914120,"creation_date":1441232657,"question_id":32364126,"body_markdown":"according [this answer][1] I try to write my code:\n\npojo:\n\n    class MyBean{\n    \n        public String getValueName() {\n            return valueName;\n        }\n    \n        public void setValueName(String valueName) {\n            this.valueName = valueName;\n        }\n    \n        String valueName;\n    }\n\ninside controller:\n\n\n        @ModelAttribute\n        public MyBean createMyBean() {\n            return new MyBean();\n        }\n        @RequestMapping(value = &quot;/getMyBean&quot;, method = RequestMethod.GET)\n        public String getMyBean(@ModelAttribute MyBean myBean) {\n            System.out.println(myBean.getValueName());\n            return &quot;pathToJsp&quot;;\n        }\n\n\nweb.xml configuration:\n\n   \n\n    &lt;filter&gt;\n        &lt;filter-name&gt;caseInsensitiveFilter&lt;/filter-name&gt;\n        &lt;filter-class&gt;com.terminal.interceptor.CaseInsensitiveRequestFilter&lt;/filter-class&gt;\n    &lt;/filter&gt;\n    \n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;caseInsensitiveFilter&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n\nFilter:\n\n    @Component\n    public class CaseInsensitiveRequestFilter extends OncePerRequestFilter {\n        @Override\n        protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n            filterChain.doFilter(new CaseInsensitiveHttpServletRequestWrapper(request), response);\n        }\n    \n        private static class CaseInsensitiveHttpServletRequestWrapper extends HttpServletRequestWrapper {\n    \n            private final LinkedCaseInsensitiveMap params = new LinkedCaseInsensitiveMap();\n    \n            /**\n             * Constructs a request object wrapping the given request.\n             *\n             * @param request\n             * @throws IllegalArgumentException if the request is null\n             */\n            private CaseInsensitiveHttpServletRequestWrapper(HttpServletRequest request) {\n                super(request);\n                params.putAll(request.getParameterMap());\n            }\n    \n            @Override\n            public String getParameter(String name) {\n                String[] values = getParameterValues(name);\n                if (values == null || values.length == 0) {\n                    return null;\n                }\n                return values[0];\n            }\n    \n            @Override\n            public Map getParameterMap() {\n                return Collections.unmodifiableMap(this.params);\n            }\n    \n            @Override\n            public Enumeration getParameterNames() {\n                return Collections.enumeration(this.params.keySet());\n            }\n    \n            @Override\n            public String[] getParameterValues(String name) {\n                return (String[]) params.get(name);\n            }\n        }\n    }\n\nIn debug I see that filter method invoke but I cannot achieve case insentive get parameters mapping.\n\nfor example `localhost:8081/getMyBean?valueName=trololo` works but `localhost:8081/getMyBean?valuename=trololo` - not\n\n  [1]: https://stackoverflow.com/a/29533456/2674303","title":"Spring mvc. case insensitive get parameters mapping","body":"<p>according <a href=\"https://stackoverflow.com/a/29533456/2674303\">this answer</a> I try to write my code:</p>\n<p>pojo:</p>\n<pre><code>class MyBean{\n\n    public String getValueName() {\n        return valueName;\n    }\n\n    public void setValueName(String valueName) {\n        this.valueName = valueName;\n    }\n\n    String valueName;\n}\n</code></pre>\n<p>inside controller:</p>\n<pre><code>    @ModelAttribute\n    public MyBean createMyBean() {\n        return new MyBean();\n    }\n    @RequestMapping(value = &quot;/getMyBean&quot;, method = RequestMethod.GET)\n    public String getMyBean(@ModelAttribute MyBean myBean) {\n        System.out.println(myBean.getValueName());\n        return &quot;pathToJsp&quot;;\n    }\n</code></pre>\n<p>web.xml configuration:</p>\n<pre><code>&lt;filter&gt;\n    &lt;filter-name&gt;caseInsensitiveFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;com.terminal.interceptor.CaseInsensitiveRequestFilter&lt;/filter-class&gt;\n&lt;/filter&gt;\n\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;caseInsensitiveFilter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n<p>Filter:</p>\n<pre><code>@Component\npublic class CaseInsensitiveRequestFilter extends OncePerRequestFilter {\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        filterChain.doFilter(new CaseInsensitiveHttpServletRequestWrapper(request), response);\n    }\n\n    private static class CaseInsensitiveHttpServletRequestWrapper extends HttpServletRequestWrapper {\n\n        private final LinkedCaseInsensitiveMap params = new LinkedCaseInsensitiveMap();\n\n        /**\n         * Constructs a request object wrapping the given request.\n         *\n         * @param request\n         * @throws IllegalArgumentException if the request is null\n         */\n        private CaseInsensitiveHttpServletRequestWrapper(HttpServletRequest request) {\n            super(request);\n            params.putAll(request.getParameterMap());\n        }\n\n        @Override\n        public String getParameter(String name) {\n            String[] values = getParameterValues(name);\n            if (values == null || values.length == 0) {\n                return null;\n            }\n            return values[0];\n        }\n\n        @Override\n        public Map getParameterMap() {\n            return Collections.unmodifiableMap(this.params);\n        }\n\n        @Override\n        public Enumeration getParameterNames() {\n            return Collections.enumeration(this.params.keySet());\n        }\n\n        @Override\n        public String[] getParameterValues(String name) {\n            return (String[]) params.get(name);\n        }\n    }\n}\n</code></pre>\n<p>In debug I see that filter method invoke but I cannot achieve case insentive get parameters mapping.</p>\n<p>for example <code>localhost:8081/getMyBean?valueName=trololo</code> works but <code>localhost:8081/getMyBean?valuename=trololo</code> - not</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9239,"page":753,"page_size":100}
